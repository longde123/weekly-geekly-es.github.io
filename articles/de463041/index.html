<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõ•Ô∏è üòç üë©‚ÄçüöÄ Definiert oder undefiniert? Nuancen beim Erstellen von Arrays in JavaScript ‚úçÔ∏è üò† üóª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vor ein paar Monaten bin ich auf eine interessante Frage zum Stackoverflow gesto√üen , bei der eine Person, kurz gesagt, eine leere 5x5- Matrix erstell...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Definiert oder undefiniert? Nuancen beim Erstellen von Arrays in JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463041/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/uz/xt/cfuzxt6gszx356ckhbffnh21g9g.jpeg" alt="Bild"></div><br>  Vor ein paar Monaten bin ich auf eine interessante Frage zum <i>Stackoverflow gesto√üen</i> , bei der eine Person, kurz gesagt, eine leere <i>5x5-</i> Matrix erstellen wollte und mit einer Methode erfolgreich war, mit der anderen jedoch nicht.  In der anschlie√üenden Diskussion wurden interessante Gedanken zu diesem Thema zitiert. <br><br>  Die Person, die die Frage gestellt hat, sowie diejenigen, die sie beantwortet haben, haben zwar nicht darauf geachtet, dass die Matrix tats√§chlich nicht erstellt werden konnte und das Ergebnis der Berechnung falsch war.  All dies interessierte mich und ich beschloss, etwas tiefer zu graben, um dann zu interessanten Schlussfolgerungen zu kommen, die ich jetzt mit Ihnen teilen werde. <br><a name="habracut"></a><br>  <i>Hinweis: Ich habe auch unter dieser Diskussion unter dem Spitznamen <i>AndreyGS geantwortet</i> - dort habe ich ziemlich kurz geantwortet, hier werde ich versuchen, das Problem vollst√§ndig zu behandeln.</i> <br><br>  Im Allgemeinen besteht die Herausforderung darin, ein Array zu erstellen.  Wie machen wir das?  Seltsamerweise gibt es verschiedene Optionen, je nachdem, was wir bekommen m√∂chten. <br><br>  Wir wissen, dass Funktionen in JavaScript zwei interne Methoden haben, <i>Call</i> und <i>Construct</i> .  Wenn wir das <i>neue</i> Schl√ºsselwort verwenden, wird die Construct-Methode verwendet, die eine neue Instanz des Objekts erstellt, ihm <i>diesen</i> Verweis zuweist und dann den Hauptteil der Funktion ausf√ºhrt.  Nicht alle Funktionen haben diese Methode, aber f√ºr uns ist dies momentan nicht so wichtig. <br><br>  Beim Erstellen von Arrays gibt es eine Besonderheit: Es spielt keine Rolle, ob wir <i>Array (...)</i> oder <i>neues Array (...) verwenden</i> - die <i>ECMAScript-</i> Spezifikation unterscheidet nicht zwischen ihnen und betrachtet sie au√üerdem als gleichwertig. <br><br><pre><code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> The Array Constructor The Array constructor is the <span class="hljs-variable"><span class="hljs-variable">%Array%</span></span> intrinsic object and the initial value of the Array property of the global object. When called as a constructor it creates and initializes a new exotic Array object. When Array is called as a function rather than as a constructor, it also creates and initializes a new Array object. Thus the function <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> Array(‚Ä¶) is equivalent to the object creation expression new Array(‚Ä¶) with the same arguments.</code> </pre> <br>  Daher werde ich nicht schelmisch philosophieren, und in den Beispielen werde ich nur das <i>neue Array (...)</i> -Konstrukt verwenden, um niemanden zu verwirren. <br><br>  Fangen wir an. <br><br>  Erstellen Sie ein Array: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>);</code> </pre> <br>  Was haben wir bekommen? <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ &lt;5 empty slots&gt; ] console.log(arr[0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr,"0")); // undefined</span></span></code> </pre> <br>  Hmm ... nun, im Prinzip sollte es so sein - wir haben die L√§nge eingestellt und f√ºnf leere Zellen mit dem <i>undefinierten</i> Wert erhalten, an denen weiter gearbeitet werden kann, oder?  Es stimmt, es gibt ein paar Punkte, die mich verwirren.  Lass es uns √ºberpr√ºfen. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>); }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ &lt;5 empty slots&gt; ] console.log(arr[0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr,"0")); // undefined console.log(arr[0][0]); // TypeError: arr[0] is undefined</span></span></code> </pre> <br>  Wie kommt es, dass wir schlie√ülich eine Matrix bekommen mussten und in jeder Zelle dementsprechend ein Array von 5 Elementen vorhanden sein sollte ... <br><br>  Wenden wir uns noch einmal der <i>ECMAScript-</i> Dokumentation zu und sehen, was darin √ºber die Methode zum Erstellen von Arrays mit einem Argument geschrieben ist: <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> Array (len) This description applies <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> and only <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> the Array constructor is called with exactly one argument. <span class="hljs-number"><span class="hljs-number">1</span></span>. Let numberOfArgs be the number of arguments passed to this function <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>. <span class="hljs-number"><span class="hljs-number">2</span></span>. Assert: numberOfArgs = <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">3</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> NewTarget is undefined, let newTarget be the active function object, <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> let newTarget be NewTarget. <span class="hljs-number"><span class="hljs-number">4</span></span>. Let proto be GetPrototypeFromConstructor(newTarget, "<span class="hljs-variable"><span class="hljs-variable">%ArrayPrototype%</span></span>"). <span class="hljs-number"><span class="hljs-number">5</span></span>. ReturnIfAbrupt(proto). <span class="hljs-number"><span class="hljs-number">6</span></span>. Let array be ArrayCreate(<span class="hljs-number"><span class="hljs-number">0</span></span>, proto). <span class="hljs-number"><span class="hljs-number">7</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span>(len) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> Number, then <span class="hljs-number"><span class="hljs-number">1</span></span>. Let defineStatus be CreateDataProperty(array, "<span class="hljs-number"><span class="hljs-number">0</span></span>", len). <span class="hljs-number"><span class="hljs-number">2</span></span>. Assert: defineStatus is true. <span class="hljs-number"><span class="hljs-number">3</span></span>. Let intLen be <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">8</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">Else</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>. Let intLen be ToUint32(len). <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> intLen ‚â† len, throw a RangeError exception. <span class="hljs-number"><span class="hljs-number">9</span></span>. Let setStatus be <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>(array, "length", intLen, true). <span class="hljs-number"><span class="hljs-number">10</span></span>. Assert: setStatus is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> an abrupt completion. <span class="hljs-number"><span class="hljs-number">11</span></span>. Return array.</code> </pre> <br>  Und wie wir sehen, stellt sich heraus, dass das Objekt erstellt wurde, die Eigenschaft <i>length</i> in der ArrayCreate-Prozedur erstellt wurde (Punkt 6), der Wert in der Eigenschaft <i>length</i> festgelegt wurde (Punkt 9) und was ist mit den Zellen?  Abgesehen von dem Sonderfall, dass das √ºbergebene Argument keine Zahl ist und ein Array mit einer einzelnen Zelle ‚Äû0‚Äú mit dem entsprechenden Wert (Punkt 7) erstellt wird, gibt es kein Wort dar√ºber ... Das hei√üt, L√§nge == 5 ist, aber es gibt keine f√ºnf Zellen.  Ja, der Compiler verwirrt uns, wenn wir versuchen, auf eine einzelne Zelle zuzugreifen. Er gibt an, dass ihr Wert <i>undefiniert ist</i> , w√§hrend dies tats√§chlich nicht der Fall ist. <br><br>  Zum Vergleich hier die Methode zum Erstellen von Arrays mit mehreren Argumenten, die an den Konstruktor gesendet werden: <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span> Array (...items ) This description applies <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> and only <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> the Array constructor is called with <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> least two arguments. When the Array function is called the following steps are taken: <span class="hljs-number"><span class="hljs-number">1</span></span>. Let numberOfArgs be the number of arguments passed to this function <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>. <span class="hljs-number"><span class="hljs-number">2</span></span>. Assert: numberOfArgs ‚â• <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-number"><span class="hljs-number">3</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> NewTarget is undefined, let newTarget be the active function object, <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> let newTarget be NewTarget. <span class="hljs-number"><span class="hljs-number">4</span></span>. Let proto be GetPrototypeFromConstructor(newTarget, "<span class="hljs-variable"><span class="hljs-variable">%ArrayPrototype%</span></span>"). <span class="hljs-number"><span class="hljs-number">5</span></span>. ReturnIfAbrupt(proto). <span class="hljs-number"><span class="hljs-number">6</span></span>. Let array be ArrayCreate(numberOfArgs, proto). <span class="hljs-number"><span class="hljs-number">7</span></span>. ReturnIfAbrupt(array). <span class="hljs-number"><span class="hljs-number">8</span></span>. Let k be <span class="hljs-number"><span class="hljs-number">0</span></span>. <span class="hljs-number"><span class="hljs-number">9</span></span>. Let items be a zero-origined List containing the argument items <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> order. <span class="hljs-number"><span class="hljs-number">10</span></span>. Repeat, while k &lt; numberOfArgs <span class="hljs-number"><span class="hljs-number">1</span></span>. Let Pk be ToString(k). <span class="hljs-number"><span class="hljs-number">2</span></span>. Let itemK be items[k]. <span class="hljs-number"><span class="hljs-number">3</span></span>. Let defineStatus be CreateDataProperty(array, Pk, itemK). <span class="hljs-number"><span class="hljs-number">4</span></span>. Assert: defineStatus is true. <span class="hljs-number"><span class="hljs-number">5</span></span>. Increase k by <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">11</span></span>. Assert: the value of array's length property is numberOfArgs. <span class="hljs-number"><span class="hljs-number">12</span></span>. Return array.</code> </pre> <br>  Hier bitte - 10 Punkte, die Schaffung der gleichen Zellen. <br><br>  Und was macht <i>Array.prototype.map ()</i> als n√§chstes? <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">15</span></span> Array.prototype.map ( callbackfn [ , thisArg ] ) <span class="hljs-number"><span class="hljs-number">1</span></span>. Let O be ToObject(this value). <span class="hljs-number"><span class="hljs-number">2</span></span>. ReturnIfAbrupt(O). <span class="hljs-number"><span class="hljs-number">3</span></span>. Let len be ToLength(Get(O, "length")). <span class="hljs-number"><span class="hljs-number">4</span></span>. ReturnIfAbrupt(len). <span class="hljs-number"><span class="hljs-number">5</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> IsCallable(callbackfn) is false, throw a TypeError exception. <span class="hljs-number"><span class="hljs-number">6</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> thisArg was supplied, let T be thisArg; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> let T be undefined. <span class="hljs-number"><span class="hljs-number">7</span></span>. Let A be ArraySpeciesCreate(O, len). <span class="hljs-number"><span class="hljs-number">8</span></span>. ReturnIfAbrupt(A). <span class="hljs-number"><span class="hljs-number">9</span></span>. Let k be <span class="hljs-number"><span class="hljs-number">0</span></span>. <span class="hljs-number"><span class="hljs-number">10</span></span>. Repeat, while k &lt; len <span class="hljs-number"><span class="hljs-number">1</span></span>. Let Pk be ToString(k). <span class="hljs-number"><span class="hljs-number">2</span></span>. Let kPresent be HasProperty(O, Pk). <span class="hljs-number"><span class="hljs-number">3</span></span>. ReturnIfAbrupt(kPresent). <span class="hljs-number"><span class="hljs-number">4</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> kPresent is true, then <span class="hljs-number"><span class="hljs-number">1</span></span>. Let kValue be Get(O, Pk). <span class="hljs-number"><span class="hljs-number">2</span></span>. ReturnIfAbrupt(kValue). <span class="hljs-number"><span class="hljs-number">3</span></span>. Let mappedValue be <span class="hljs-keyword"><span class="hljs-keyword">Call</span></span>(callbackfn, T, ¬´kValue, k, O¬ª). <span class="hljs-number"><span class="hljs-number">4</span></span>. ReturnIfAbrupt(mappedValue). <span class="hljs-number"><span class="hljs-number">5</span></span>. Let status be CreateDataPropertyOrThrow (A, Pk, mappedValue). <span class="hljs-number"><span class="hljs-number">6</span></span>. ReturnIfAbrupt(status). <span class="hljs-number"><span class="hljs-number">5</span></span>. Increase k by <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">11</span></span>. Return A.</code> </pre> <br>  Klausel 7 - Eine Kopie des urspr√ºnglichen Arrays wird erstellt, in Klausel 10 werden Iterationen f√ºr seine Elemente durchgef√ºhrt, und insbesondere in Klausel 10.2 wird gepr√ºft, ob sich eine bestimmte Zelle im Quellarray befindet, sodass bei Erfolg Map (10.4) und Erstellen Sie die entsprechende Zelle in der Kopie - 10.4.5.  Da 10.2 f√ºr jeden der <i>5</i> Durchg√§nge <i>false</i> angibt, wird auch keine einzelne Zelle in der zur√ºckgegebenen Kopie des Arrays erstellt. <br><br>  Wie der Array-Konstruktor und die Methode <i>Array.prototype.map () funktionieren, haben</i> wir herausgefunden, aber die Aufgabe blieb wie zuvor ungel√∂st, da die Matrix nicht erstellt wurde.  <i>Function.prototype.apply ()</i> wird zur Rettung kommen! <br>  Lassen Sie es uns gleich in Aktion √ºberpr√ºfen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ undefined, undefined, undefined, undefined, undefined ] console.log(arr[0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr,"0")); // Object { value: undefined, writable: true, enumerable: true, configurable: true }</span></span></code> </pre> <br>  Hurra, alle f√ºnf Zellen sind hier deutlich zu beobachten, und auch die erste Testzelle mit der Nummer <i>‚Äû0‚Äú</i> hat einen Deskriptor. <br><br>  In diesem Fall funktionierte das Programm wie folgt: <br><br><ol><li>  Wir haben die <i>Function.prototype.apply ()</i> -Methode aufgerufen und den <i>Nullkontext</i> an sie √ºbergeben und als Array <i>new Array (5)</i> . </li><li>  <i>new Array (5)</i> hat ein Array ohne Zellen erstellt, jedoch mit einer L√§nge von <i>5</i> . </li><li>  <i>Function.prototype.apply ()</i> verwendete die interne Methode zum Aufteilen des Arrays in separate Argumente. Als Ergebnis wurden f√ºnf Argumente mit <i>undefinierten</i> Werten an den <i>Array-</i> Konstruktor √ºbergeben. </li><li>  <i>Array</i> erhielt <i>5</i> Argumente mit <i>undefinierten</i> Werten und f√ºgte sie den entsprechenden Zellen hinzu. </li></ol><br>  Alles scheint verst√§ndlich zu sein, au√üer was ist diese interne Methode von <i>Function.prototype.apply ()</i> , die <i>5</i> Argumente aus dem Nichts macht - ich schlage noch einmal vor, die <i>ECMAScript-</i> Dokumentation zu betrachten: <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">19</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> Function.prototype.apply <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> IsCallable(func) is false, throw a TypeError exception. <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> argArray is null or undefined, then Return <span class="hljs-keyword"><span class="hljs-keyword">Call</span></span>(func, thisArg). <span class="hljs-number"><span class="hljs-number">3</span></span>. Let argList be CreateListFromArrayLike(argArray). <span class="hljs-number"><span class="hljs-number">7</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">17</span></span> CreateListFromArrayLike (obj [, elementTypes] ) <span class="hljs-number"><span class="hljs-number">1</span></span>. ReturnIfAbrupt(obj). <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> elementTypes was <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> passed, let elementTypes be (Undefined, Null, Boolean, String, Symbol, Number, Object). <span class="hljs-number"><span class="hljs-number">3</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span>(obj) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> Object, throw a TypeError exception. <span class="hljs-number"><span class="hljs-number">4</span></span>. Let len be ToLength(Get(obj, "length")). <span class="hljs-number"><span class="hljs-number">5</span></span>. ReturnIfAbrupt(len). <span class="hljs-number"><span class="hljs-number">6</span></span>. Let list be an empty List. <span class="hljs-number"><span class="hljs-number">7</span></span>. Let index be <span class="hljs-number"><span class="hljs-number">0</span></span>. <span class="hljs-number"><span class="hljs-number">8</span></span>. Repeat while index &lt; len a. Let indexName be ToString(index). b. Let next be Get(obj, indexName). c. ReturnIfAbrupt(next). d. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span>(next) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> an element of elementTypes, throw a TypeError exception. e. <span class="hljs-built_in"><span class="hljs-built_in">Append</span></span> next as the last element of list. f. <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span> index to index + <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">9</span></span>. Return list.</code> </pre> <br>  Wir betrachten die interessantesten Punkte: <br><br>  19.2.3.1 - Absatz 3: Erstellen einer Liste von Argumenten aus einem Objekt √§hnlich einem Array (wie wir uns erinnern, sollten solche Objekte eine L√§ngeneigenschaft haben). <br><br>  7.3.17 - die Methode zur Listenerstellung selbst.  Es pr√ºft, ob das Objekt ist oder nicht, und wenn ja, eine Anfrage f√ºr das <i>L√§ngenfeld</i> (Absatz 4).  Dann wird ein Index gleich <i>‚Äû0‚Äú erstellt</i> (Absatz 7).  Eine Schleife wird mit einem Inkrement des Index auf den Wert aus dem <i>L√§ngenfeld erstellt</i> (Absatz 8).  In diesem Zyklus beziehen wir uns auf die Zellenwerte des √ºbertragenen Arrays mit den entsprechenden Indizes (Abschnitte 8a und 8b).  Und wie wir uns erinnern, gibt es beim Zugriff auf den Wert einer einzelnen Zelle in einem Array, in dem es tats√§chlich keine Zellen gibt, immer noch einen <i>undefinierten</i> Wert.  Der resultierende Wert wird am Ende der Argumentliste hinzugef√ºgt (Absatz 8e). <br><br>  Nun, da alles zusammengepasst hat, k√∂nnen Sie die sehr leere Matrix sicher erstellen. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)); }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ (5) [‚Ä¶], (5) [‚Ä¶], (5) [‚Ä¶], (5) [‚Ä¶], (5) [‚Ä¶] ] console.log(arr[0]); // Array(5) [ undefined, undefined, undefined, undefined, undefined ] console.log(Object.getOwnPropertyDescriptor(arr,"0")); // Object { value: (5) [‚Ä¶], writable: true, enumerable: true, configurable: true } console.log(arr[0][0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr[0],"0")); // Object { value: undefined, writable: true, enumerable: true, configurable: true }</span></span></code> </pre> <br>  Wie Sie sehen, konvergiert nun alles und sieht ziemlich einfach aus: Wir erstellen, wie wir bereits wissen, ein einfaches leeres <i>Array Array.apply (null, neues Array (5))</i> und √ºbergeben es dann an die Map-Methode, die dasselbe Array in erstellt jede der Zellen. <br><br>  Dar√ºber hinaus k√∂nnen Sie es noch einfacher machen.  Der Operator <i>verbreiten</i> - <i>...</i> erschien in <i>ECMAScript6</i> und funktioniert, was typisch ist, auch speziell mit Arrays.  Deshalb k√∂nnen wir einfach einfahren: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...new <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...new <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)));</code> </pre> <br>  oder wir werden es komplett vereinfachen, obwohl ich zuvor versprochen habe, nichts Neues zu ber√ºhren ... <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...Array(<span class="hljs-number"><span class="hljs-number">5</span></span>)).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...Array(<span class="hljs-number"><span class="hljs-number">5</span></span>)));</code> </pre>  <i>Hinweis: Hier haben wir auch Pfeilfunktionen verwendet, da es sich immer noch um einen Spread-Operator handelt, der in derselben Spezifikation wie sie vorkommt.</i> <br><br>  Wir werden nicht auf das Prinzip des <i>Spread-</i> Operators eingehen, aber f√ºr die allgemeine Entwicklung glaube ich, dass dieses Beispiel auch n√ºtzlich war. <br><br>  Dar√ºber hinaus k√∂nnen wir nat√ºrlich unsere eigenen Funktionen erstellen, die mithilfe der Sortierung <i>Function.prototype.apply ()</i> normale Arrays mit leeren Zellen f√ºr uns erstellen. Dabei werden jedoch die internen Prinzipien von JavaScript und dementsprechend die korrekte und angemessene Verwendung verstanden eingebaute Funktionen sind eine Basis f√ºr das Mastering, die Priorit√§t hat.  Nun, und nat√ºrlich ist es so einfach, schneller und bequemer. <br><br>  Und schlie√ülich, zur√ºck zu dieser Frage zum <i>Stapel√ºberlauf</i> - dort, wie ich mich erinnere, hat die Person f√§lschlicherweise angenommen, dass die Methode, die sie erhalten hat, zur richtigen Antwort gef√ºhrt hat und dass sie jedoch eine <i>5x5-</i> Matrix erhalten hat -, hat sich dort ein kleiner Fehler eingeschlichen. <br><br>  Er fuhr hinein: <br><br> <code>Array.apply(null, new Array(5)).map(function(){ <br> return new Array(5); <br> });</code> <br> <br>  Was denkst du, wird das tats√§chliche Ergebnis hier sein? <br><br><div class="spoiler">  <b class="spoiler_title">Die Antwort</b> <div class="spoiler_text">  console.log (arr);  // Array (5) [(5) [...], (5) [...], (5) [...], (5) [...], (5) [...]] <br>  console.log (arr [0]);  // Array (5) [&lt;5 leere Slots&gt;] <br>  console.log (Object.getOwnPropertyDescriptor (arr, "0"));  // Objekt {Wert: (5) [...], beschreibbar: wahr, aufz√§hlbar: wahr, konfigurierbar: wahr} <br>  console.log (arr [0] [0]);  // undefiniert <br>  console.log (Object.getOwnPropertyDescriptor (arr [0], "0"));  // undefiniert <br></div></div><br>  ist es nicht, das ist nicht ganz das, was er wollte ... <br><br>  Referenzen: <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">ECMAScript 2015-Sprachspezifikation</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" rel="nofollow">Was macht Array.apply eigentlich?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463041/">https://habr.com/ru/post/de463041/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463027/index.html">Unabh√§ngige √úberpr√ºfung von PVS-Studio (Linux, C ++)</a></li>
<li><a href="../de463031/index.html">Lebe und lerne. Teil 3. Weiterbildung oder das Alter des ewigen Sch√ºlers</a></li>
<li><a href="../de463035/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 471 (23.07.2019 - 29.07.2019)</a></li>
<li><a href="../de463037/index.html">Auf der Suche nach Inspiration oder wie man sich aus F herausholt</a></li>
<li><a href="../de463039/index.html">Manik√ºre-Staubsauger zum Selbermachen</a></li>
<li><a href="../de463045/index.html">Erkennen Sie Emotionen automatisch in Textkonversationen mithilfe neuronaler Netze</a></li>
<li><a href="../de463055/index.html">√úber Administratoren, Entwickler, endlose Verwirrung und DevOps-Transformation innerhalb des Unternehmens</a></li>
<li><a href="../de463057/index.html">Benutzerdefinierte Rechte f√ºr Yii Framework 2</a></li>
<li><a href="../de463059/index.html">Drei leben in der IT und nicht nur</a></li>
<li><a href="../de463061/index.html">Regeln f√ºr die Erstellung von Layouts in Figma</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>