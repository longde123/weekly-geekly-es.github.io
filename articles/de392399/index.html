<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛡️ 🏌️ 🐂 Espruino: JavaScript im Mikrocontroller 🌟 😑 👨🏼‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Warum?", "Was für ein Unsinn?", "Perversion!", "Fu-Fu-Fu" - dies sind einige der vielen Aussagen, die wir gehört haben, als wir das Iskra JS- Board a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Espruino: JavaScript im Mikrocontroller</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/amperka/blog/392399/"><img src="https://habrastorage.org/files/d7a/aae/106/d7aaae106a9549d299c70a245bd412f4.png" alt="Bild" align="right"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"Warum?", "Was für ein Unsinn?", "Perversion!", "Fu-Fu-Fu" - dies sind einige der vielen Aussagen, die wir gehört haben, als wir das </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iskra JS-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Board </font><font style="vertical-align: inherit;">auf dem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espruino-</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kern veröffentlicht haben </font><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Warum</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Als der richtige Elektronikingenieur hört, dass am Arduino etwas getan wurde, steigt seine Körpertemperatur um etwa ein halbes Grad: „Sie haben einen geeigneten Mikrocontroller genommen und statt figak figak und Register alle Säfte herausgepresst, alles vulgarisiert ... es gibt keine Worte, eins Hass. " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber Sie können noch weiter gehen. Nehmen Sie den Cortex M4-Mikrocontroller, der zehnmal so umfangreich ist wie der auf demselben Arduino Uno, schieben Sie den JavaScript-Interpreter hinein und führen Sie die JavaScript-Projekte aus! </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich denke, dass in diesem Moment diejenigen, die nicht bereit sind für einen solchen Missbrauch heiliger Mikrokreise, bereits geplatzt sind. Ich werde für den Rest weitermachen.</font></font><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Im Elektronik-Hobby für die meisten Projekte reicht der Arduino Uno für die Augen. Und es spielt keine Rolle, ob es mit der Standardfrequenz von 16 MHz oder 4 MHz arbeitet: Es spielt keine Rolle, ob sich die Bettbeleuchtung einschaltet oder die Pumpe in der Hütte in 1 ms oder 10 ms. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was zählt ist, dass C ++ komplex und aus Holz ist. Ja, es ist nah an Eisen, aber deshalb erfordert es ein tiefes Verständnis dieser Eisen- und Informatik. Fügen Sie dazu die Syntax mit einer Reihe von Nuancen hinzu, die die Summe der Fehler der 30-jährigen Entwicklung der Sprache darstellt. Dann berauben wir das, was sich als adäquate Arrays, Strings, Wörterbücher und noch besser herausstellte - im Allgemeinen berauben wir das dynamische Gedächtnis. Hier haben wir endlich den Arduino.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn ich mir Fragen in unserem Forum ansehe, sehe ich, dass die Leute Zeit damit verbringen, mit der Sprache zu ficken, und nicht mit der Essenz ihrer Projekte. </font><font style="vertical-align: inherit;">Warum also nicht die Kluft zwischen Eisen und Menschen verringern? </font><font style="vertical-align: inherit;">Eisen ist billig und entwickelt sich ständig weiter, die Zeit der Menschen ist teuer und kommt nicht von irgendwoher.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe viele Jahre lang einen ähnlichen Prozess beobachtet, als ich in der Spieleentwicklung gearbeitet habe. </font><font style="vertical-align: inherit;">Im Jahr 2003 war es unmöglich sich vorzustellen, dass das Spiel auf etwas anderem als C / C ++ geschrieben werden kann. </font><font style="vertical-align: inherit;">Dann erschien das eingebaute Skript der Maschine in den Motoren. </font><font style="vertical-align: inherit;">Und dann wurde die Schaffung eines vollwertigen Produkts ohne eine einzige Zeile in C möglich. </font><font style="vertical-align: inherit;">Nur Java, C #, Ruby, Python, JavaScript. </font><font style="vertical-align: inherit;">Dies ist logisch, da das Eisen anfing, „langsame Sprachen“ zu ziehen, und aufgrund der zeitweise schnelleren Entwicklung und der verfügbaren Programmierer wurde es möglich, mehr Ressourcen für die Interessantheit des Spiels und nicht für das Auffinden von Speicherlecks aufzuwenden.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie die Programmierung von JavaScript-Mikrocontrollern aussieht</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Programmierung ist wie ... JavaScript. </font><font style="vertical-align: inherit;">Zur Entwicklung für Browser oder Node.js. </font><font style="vertical-align: inherit;">Hier ist ein Beispiel:</font></font><br>
<br>
<pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// SMS</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sim = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'@amperka/Sim900r'</span></span>).connect();<font></font>
sim.powerOn();<font></font>
sim.on(<span class="hljs-string"><span class="hljs-string">'sms'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">sms</span></span></span><span class="hljs-function">) </span></span>{
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rgb = sms.text.split(<span class="hljs-string"><span class="hljs-string">' '</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> r = +rgb[<span class="hljs-number"><span class="hljs-number">0</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> g = +rgb[<span class="hljs-number"><span class="hljs-number">1</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = +rgb[<span class="hljs-number"><span class="hljs-number">2</span></span>];
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>(r + g + b)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;<font></font>
    fadeTo(r, g, b);<font></font>
});<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// </span></span>
SPI2.setup({<span class="hljs-attr"><span class="hljs-attr">baud</span></span>:<span class="hljs-number"><span class="hljs-number">3200000</span></span>, <span class="hljs-attr"><span class="hljs-attr">mosi</span></span>:B15});
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> LED_COUNT = <span class="hljs-number"><span class="hljs-number">150</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> colors = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Uint8ClampedArray</span></span>(LED_COUNT * <span class="hljs-number"><span class="hljs-number">3</span></span>);<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fadeTo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">r, g, b</span></span></span><span class="hljs-function">) </span></span>{
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ivalID = setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{<font></font>
    colors[n*<span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">0</span></span>] = b;<font></font>
    colors[n*<span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>] = r;<font></font>
    colors[n*<span class="hljs-number"><span class="hljs-number">3</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>] = g;<font></font>
    SPI2.send4bit(colors, <span class="hljs-number"><span class="hljs-number">0b0001</span></span>, <span class="hljs-number"><span class="hljs-number">0b0011</span></span>);
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n++ &gt;= LED_COUNT) {<font></font>
      clearInterval(ivalID);<font></font>
    }<font></font>
  }, <span class="hljs-number"><span class="hljs-number">50</span></span>);<font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Programm empfängt SMS'ki und ändert je nach Text bei laufendem Licht die Farbe des angeschlossenen RGB-Bandes. </font><font style="vertical-align: inherit;">Wir haben ein solches Projekt für unseren Neujahrsbaum gemacht, aber auf dem klassischen Arduino. </font><font style="vertical-align: inherit;">Der Code war viermal mehr.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espruino Kernel</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Computer verfügt also über V8- und SpiderMonkey-Engines für JavaScript. </font><font style="vertical-align: inherit;">Und Mikrocontroller haben eine Espruino-Engine. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grob gesagt handelt es sich bei der Espruino-Engine um eine Firmware (Skizze, Skizze) für Mikrocontroller, die wiederum JavaScript-Code ausführen kann, den Sie über eine serielle Verbindung, beispielsweise über USB, auf die Karte übertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espruino ist ein Open Source-Projekt, das von Gordon Williams gesponsert wird. </font><font style="vertical-align: inherit;">Die Person, die den größten Teil des gesamten Ökosystems im Alleingang implementiert und erfolgreich mit ihr auf KickStarter gegangen ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieses Ökosystem besteht aus mehreren Hauptteilen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espruino Web IDE - eine Programmierumgebung; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espruino Firmware - JavaScript-Maschine, die auf einem Mikrocontroller läuft; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eisen - die Bretter selbst, die mit Espruino kompatibel sind; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardbibliothek und externe Bibliotheken; </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dokumentation </font></font></li>
</ul><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Wichtigste zuerst.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Programmierumgebung</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Schreiben von JavaScript-Code, das Herunterladen auf die Karte und das Überwachen der Ausgabe erfolgt in der Espruino Web IDE. </font><font style="vertical-align: inherit;">Diese Anwendung ist für Google Chrome, wird also mit einem Klick erstellt und funktioniert unter allen Desktop-Betriebssystemen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Für den Benutzer ersetzt diese Umgebung die Arduino IDE. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entsprechend der Funktionalität der Espruino-IDE ist es natürlich viel einfacher als die vollwertige Eclipse oder Visual Studio, aber es ist weiter fortgeschritten als die Arduino-IDE.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/6c8/0ca/a0c/6c80caa0c1544157bff5331460014f16.png" alt="Bild"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn Sie sich auf einen Blick im Umgebungsfenster umschauen, sehen Sie den Code-Editor (rechts), das Konsolenfenster (links) und die Schaltfläche zum Herunterladen des Codes auf die Karte. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Konsole ähnelt einem seriellen Monitor in der Arduino IDE, zeigt sie jedoch nicht nur an, sondern akzeptiert sie auch: Sie können eine Funktion direkt aufrufen, ohne ein neues Programm zurückzusetzen und zu laden, den Wert der Variablen anzeigen, den Zyklus unterbrechen usw. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nachdem Sie enger gearbeitet haben, werden Sie auf einen Debugger (ja, schrittweise Ausführung, Haltepunkte), Editor-Hinweise, blinkende Fehler im laufenden Betrieb und andere nette Tricks stoßen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Darüber hinaus können Sie direkt von der IDE aus die Version der Espruino-Firmware selbst auf den neuesten Stand bringen. </font><font style="vertical-align: inherit;">Die Umgebung selbst lädt die neueste verfügbare Version herunter und lädt sie über USB hoch.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Herzstück des Systems ist die Firmware, die sich auf dem Mikrocontroller dreht. </font><font style="vertical-align: inherit;">Es ist in reinem C geschrieben, wird einmal an eine separate Stelle im Flash-Speicher des Mikrocontrollers geladen und verpflichtet sich, Benutzer-JS-Code auszuführen, der über eine serielle Verbindung kommt oder sich im Benutzerbereich des Flash-Speichers befindet. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn wir das Layout des Flash-Speichers für Iskra JS schematisch darstellen, erhalten wir das folgende Bild:</font></font><br>
<br>
<img src="https://habrastorage.org/files/89c/084/d48/89c084d486f3478fa8f3c7584b83b97d.png" alt="Bild"><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bootloader</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zuerst kommt der Bootloader, der niemals (bedingt) aktualisiert wird. </font><font style="vertical-align: inherit;">Dies ist ein kleines Programm, bei dessen Ausführung die Lebensdauer des Mikrocontrollers absolut immer nach dem Einschalten oder Zurücksetzen beginnt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Bootloader macht eine ziemlich einfache Sache:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn die BTN1-Benutzertaste nicht gedrückt wird, überträgt sie sofort die Kontrolle an den Interpreter.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn die Taste beim Start gedrückt wurde, wird eine Schleife ausgeführt und es wird entweder gewartet, bis die Taste erneut gedrückt wird, um zum Interpreter zurückzukehren, oder es wird gewartet, bis die neue Version des Interpreters über USB heruntergeladen wurde. </font><font style="vertical-align: inherit;">In diesem Fall überschreibt der Bootloader den Flash-Speicherbereich mit der Espruino-Firmware, und wir erhalten die neueste Version des Interpreters auf der Karte.</font></font></li>
</ul><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dolmetscher</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dem Lader folgt also ein Dolmetscher, der die Hauptarbeit erledigt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Start wird überprüft, ob das magische Byte im Flash-Speicher des Benutzers gespeichert ist. </font><font style="vertical-align: inherit;">Wenn dies der Fall ist, wird die Ausführung akzeptiert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn kein Code vorhanden ist oder wenn wir den Bootloader manuell mit BTN1 beendet haben, wird für das Meeting nichts ausgeführt. Wir bereiten lediglich einen JS-Computer für die Arbeit vor.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Freier Speicher</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem Interpreter befindet sich ein zeichnbarer Speicherbereich, in dem Sie Ihre Daten nichtflüchtig speichern können. </font><font style="vertical-align: inherit;">Dies ist eine Art Ersatz für das EEPROM von Arduino, jedoch mit seinen eigenen Besonderheiten sowie zehn- bis hundertmal mehr.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Benutzerdefinierter Code</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier wird das vom Interpreter ausgeführte JS-Programm gespeichert. </font><font style="vertical-align: inherit;">Das Programm ist so wie es ist im Klartext, in einem Brikett. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Damit viele verbundene Bibliotheken mit ihren Abhängigkeiten und Ihrem eigenen Programm zu einem gegossenen und minimierten Brikett werden, wird es beim Laden der IDE überwacht. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vielmehr wird die gesamte Arbeit nicht von der IDE erledigt, sondern von ihrer GUI-unabhängigen Komponente von EspruinoTools, die über eine Befehlszeilenschnittstelle und einen Einstiegspunkt zur Verwendung als Node.js-Modul verfügt. </font><font style="vertical-align: inherit;">Wenn Sie möchten, können Sie daher Vim, Atom, Eclipse oder was auch immer für Sie am bequemsten zu entwickeln ist verwenden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Anstelle des Codes kann anstelle eines Textbriketts eine gespeicherte binäre RAM-Besetzung vorhanden sein, die den Status des Interpreters zum Zeitpunkt des Speicherns vollständig widerspiegelt. </font><font style="vertical-align: inherit;">Dies sind jedoch bereits technische Details, die keinen schnellen Überblick bieten.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bibliotheken</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bibliotheken können in drei Typen unterteilt werden: Standard, integriert und extern.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardbibliothek</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Standardbibliothek besteht aus Funktionen und Objekten, die verwendet werden können. </font><font style="vertical-align: inherit;">Darunter befinden sich sowohl die vertrauten als auch die in der Standardsprache "Date", "JSON", "Math", "Object", "setInterval", "setTimeout" und anderen - anderen - sowie Espruino-spezifischen Funktionen für die Arbeit mit Pins und Schnittstellen durch Erinnerung. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter den Funktionen finden Sie "pinMode", "digitalRead", "digitalWrite", "analogRead", "analogWrite", die dem Arduino vertraut sind, und "setWatch" zum Beobachten von Eingangsstiften, "digitalPulse" zur genauen Erzeugung einer Folge von digitalen Impulsen und viele weitere verschiedene Dinge, um mit Peripheriegeräten zu arbeiten.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Übrigens, trotz der Tatsache, dass es auf der Plattform eine PinMode-Funktion gibt, funktioniert diese standardmäßig von selbst hinter den Kulissen, sodass Sie sich in den meisten Szenarien nicht daran erinnern können (der letzte Elektronikingenieur platzte zu diesem Zeitpunkt laut). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was Sie in der Standardbibliothek nicht finden, ist "Verzögerung". Mama Mia, wie dankbar bin ich dafür! Es reicht aus, das Denken ein wenig neu zu ordnen und es wird klar, dass alles durch "setInterval", "setTimeout" ohne "Verzögerung" gelöst wird. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zum Dank erhalten Sie eine asynchrone Ausführung: Sie können zwanzig LEDs unabhängig voneinander mit jeweils einer eigenen Frequenz blinken lassen. Und Sie erhalten Energieeffizienz: "Verzögerung" verbrennt die Prozessorzeit, und ohne "Verzögerung" kann der Prozessor ruhig schlafen, während nichts zu tun ist. In Espruino schläft der Prozessor ein, obwohl keine Arbeit vorhanden ist, und verbraucht Dutzende Male weniger Strom.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eingebaute Bibliotheken</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Integrierte Bibliotheken sind in dem Sinne derselbe Teil der Standardbibliothek, dass sie fest in die Espruino-Firmware codiert sind. Für den Zugriff auf ihre Funktionen müssen sie jedoch mithilfe der für JavaScript-Programmierer bekannten Funktion "require" syntaktisch verbunden werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unter solchen Bibliotheken finden Sie beispielsweise "fs" für die Arbeit mit Dateisystemen von SD-Karten, "http" zum Erstellen einer Webschnittstelle für Ihr Gerät, "Waveform" zum Aufzeichnen / Abspielen von Audiosignalen und andere. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Standardbibliotheken und die integrierten Bibliotheken sind in reinem C implementiert, und der Benutzer erhält nur eine JavaScript-Oberfläche in Form einer Reihe von Objekten, Funktionen und Modulen. </font><font style="vertical-align: inherit;">Auf diese Weise können Sie maximale Effizienz bei der Implementierung komplexer Algorithmen erzielen und gleichzeitig die Möglichkeit lassen, über Code auf hoher Ebene darauf zuzugreifen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie selbst können etwas in C implementieren, das JavaScript "Nein, danke" sagt, und nur ein paar Schwänze herausbringen, die zum Ausführen benötigt werden.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Externe Bibliotheken</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Externe Bibliotheken prägen den Wohlstand des Ökosystems. </font><font style="vertical-align: inherit;">Sie sind in JavaScript von Espruino-Autoren geschrieben, wir schreiben, Espruino-Benutzer schreiben. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können auf einer lokalen Festplatte gespeichert werden, in der Sandbox des aktuellen Projekts, im Internet-Repository, auf GitHub und auf NPM. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bibliotheken werden traditionell mit "require" verbunden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn in der Umgebung "erforderlich" angezeigt wird, werden sie rekursiv von einer Remote-Quelle heruntergeladen und beim Laden einer Skizze an den Anfang Ihres Programms eingefügt. </font><font style="vertical-align: inherit;">Somit wird für den Mikrocontroller ein integrales Brikett mit dem Code gebildet, über den ich oben gesprochen habe.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Ansatz bedeutet auch, dass der Benutzer im Gegensatz zu Arduino nicht über die Tatsache stolpern muss, dass die Bibliothek gefunden, heruntergeladen und dort abgelegt werden muss, wo sie beginnen muss. </font><font style="vertical-align: inherit;">Es reicht aus, nur die Skizze, die Sie mögen, von irgendwoher zu zuschlagen, und die Umgebung selbst wird sich mit den Bibliotheksabhängigkeiten befassen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eisen</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
So kommen wir zu der greifbarsten Komponente des Espruino-Ökosystems. </font><font style="vertical-align: inherit;">Dies sind die Karten, auf denen die Espruino-Firmware ausgeführt werden kann.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/afb/b7e/d24/afbb7ed24c6f45c1a4c9a0b1069f58ec.jpg" alt="Bild"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dazu gehören das ursprüngliche </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espruino Board</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espruino Pico</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , sowie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iskra JS,</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> das von Amperka veröffentlicht wurde </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Alles ist bereits werkseitig auf den aufgeführten Platinen installiert, sie sind sofort einsatzbereit. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sie können das Tamburin mehrmals treffen und den Espruino-Kern auf den STM32 Discovery, Nucleo und plötzlich auf den ESP8266 setzen.</font></font><br>
<br>
<h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Dokumentation</font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es gibt nichts Traurigeres als etwas sehr Cooles und Mächtiges, aber ohne Dokumentation. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Espruino hat eine ziemlich gute Dokumentation. </font><font style="vertical-align: inherit;">Unter </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">www.espruino.com/Reference</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> finden Sie viele Referenz- und Schulungsartikel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wir wollen mehr und besser machen. </font><font style="vertical-align: inherit;">Aus diesem </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Grund haben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> wir einen separaten Abschnitt erstellt: </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">js.amperka.ru</font></a><font style="vertical-align: inherit;"> , Video-Tutorials aufnehmen. </font><font style="vertical-align: inherit;">Die Arbeiten sind im Gange, aber es wurde bereits viel abgedeckt. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und traditionell für diejenigen, die Box-Lösungen lieben, haben wir eine Reihe von " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iodo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " erstellt. </font><font style="vertical-align: inherit;">Es enthält Iskra JS, Module und ein Farbbuch. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier ist eine Petersilie. </font><font style="vertical-align: inherit;">Das einzige Rätsel ist, ob mindestens ein korrekter Elektronikingenieur diese Zeile lesen kann.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de392399/">https://habr.com/ru/post/de392399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de392383/index.html">Wie einfach es ist, unverschlüsseltes Android zu hacken oder warum es sich immer noch lohnt, es zu verschlüsseln</a></li>
<li><a href="../de392387/index.html">„Yandex. Karten "auf Vektor umgestellt</a></li>
<li><a href="../de392389/index.html">Einrichtung eines Hörsaals zu Ehren des russischen Wissenschaftstages am 24. April</a></li>
<li><a href="../de392391/index.html">Trollim Papierzeitung</a></li>
<li><a href="../de392395/index.html">Die Ransomware „Petya“ verschlüsselt die gesamte Festplatte und benötigt Geld</a></li>
<li><a href="../de392401/index.html">Der mysteriöse Planet X könnte von der Sonne aus einem anderen Sternensystem eingefangen werden</a></li>
<li><a href="../de392403/index.html">Likbez auf Xiaomi-Gadgets auf AliExpress vorgestellt</a></li>
<li><a href="../de392405/index.html">Wissenschaftler konnten die Geschwindigkeit des Käfers durch Implantation von Elektroden in seine Muskeln steuern</a></li>
<li><a href="../de392407/index.html">Microsoft hat mit dem Versand der HoloLens-Version für Entwickler begonnen und den Emulator veröffentlicht</a></li>
<li><a href="../de392409/index.html">Node.js вещает: Google инженеры нашли уязвимость в NPM скриптах</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>