<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüî¨ ü§∫ üìÑ G√©n√©rateur de donjon de n≈ìud graphique üåç üé® üç±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, je d√©crirai l'algorithme de g√©n√©ration proc√©durale des niveaux d'un donjon bidimensionnel avec une structure pr√©d√©termin√©e. Dans la ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>G√©n√©rateur de donjon de n≈ìud graphique</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436198/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/pt/uh/r0/ptuhr0jo9giaq3dkb15uiqlfp30.png" alt="image"></div><br>  Dans cet article, je d√©crirai l'algorithme de g√©n√©ration proc√©durale des niveaux d'un donjon bidimensionnel avec une structure pr√©d√©termin√©e.  Dans la premi√®re partie, une description g√©n√©rale sera pr√©sent√©e, et dans la seconde, la mise en ≈ìuvre de l'algorithme. <br><br><h2>  Pr√©sentation </h2><br>  L'algorithme a √©t√© √©crit dans le cadre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'un travail de licence</a> et est bas√© sur un article de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Ma et al (2014)</a> .  Le but du travail √©tait d'acc√©l√©rer l'algorithme et de le compl√©ter avec de nouvelles fonctions.  Je suis assez content du r√©sultat, car nous avons rendu l'algorithme assez rapide pour l'utiliser lors de l'ex√©cution du jeu.  Apr√®s avoir termin√© le travail du baccalaur√©at, nous avons d√©cid√© de le transformer en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article</a> et de l'envoyer √† la conf√©rence Game-ON 2018. <br><br><h2>  Algorithme </h2><br>  Pour cr√©er un niveau de jeu, l'algorithme re√ßoit en entr√©e un ensemble de blocs de construction polygonaux et un graphe de connectivit√© de niveau (topologie de niveau).  Les n≈ìuds du graphique indiquent les pi√®ces et les bords d√©terminent les connexions entre elles.  Le but de l'algorithme est d'attribuer √† chaque n≈ìud du graphique la forme et l'emplacement de la pi√®ce de sorte qu'aucune forme de pi√®ce ne se recoupe et que chaque paire de pi√®ces voisines puisse √™tre reli√©e par des portes. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/41f/ed9/68f/41fed968fc3150ffb6285e660ff2ec5c.png"></div><br>  a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/96a/68a/302/96a68a302c5af7bc046644a659f0cc81.png"></div><br>  b) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fc1/79e/c88/fc179ec88afc1fa1889937a2df25c029.png"></div><br>  (c) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9f/898/224/d9f8982240071dcb3d9205207912a46f.png"></div><br>  (d) <br><br>  Les figures (c) et (d) montrent les diagrammes g√©n√©r√©s √† partir du graphique d'entr√©e (a) et des blocs de construction (b). <br><br>  √Ä l'aide du graphique de connectivit√©, un concepteur de jeu peut facilement contr√¥ler le flux du gameplay.  Avez-vous besoin d'un chemin commun vers la salle du boss avec plusieurs chemins lat√©raux en option?  Commencez simplement par le graphique du chemin, puis sp√©cifiez quelques n≈ìuds dans lesquels le joueur peut choisir: soit suivre le chemin principal, soit explorer le chemin lat√©ral, avec des tr√©sors et / ou des monstres possibles qui l'attendent.  Avez-vous besoin de couper le chemin?  S√©lectionnez simplement les deux n≈ìuds dans le graphique et ajoutez une courte route les reliant.  Les possibilit√©s de ce sch√©ma sont infinies. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/619/044/41a/61904441a82fd281642664a0e784513d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9fe/b4e/65e/9feb4e65e116328e42b3e9638911fae5.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83c/fd9/d63/83cfd9d6388c784f88c818e7bc6c9513.png"></div><br>  <i>Exemples de graphiques d'entr√©e.</i>  <i>Le chemin principal est indiqu√© en rouge, les chemins auxiliaires sont bleus, le chemin court est orange.</i> <br><br>  L'algorithme permet non seulement aux concepteurs de jeux de g√©rer la structure de haut niveau des cartes g√©n√©r√©es, mais offre √©galement la possibilit√© de contr√¥ler l'apparence des pi√®ces individuelles et la fa√ßon de les connecter les unes aux autres. <br><br><h3>  Diff√©rentes formes pour diff√©rentes pi√®ces </h3><br>  J'ai mentionn√© la salle des boss √† la fin du niveau.  Nous ne voulons pas que la pi√®ce du patron ressemble √† une autre pi√®ce ordinaire, non?  L'algorithme vous permet de d√©finir des formulaires pour chaque pi√®ce.  Par exemple, nous pouvons cr√©er une salle au d√©but du niveau et une salle de boss, qui devrait avoir leurs propres ensembles de formes de pi√®ce et un ensemble commun pour toutes les autres pi√®ces. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e1f/988/e05/e1f988e05bf84eea4209c128ac0b9e60.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f97/b39/b15/f97b39b15661d51ad7cf3a30a4e9b80a.png"></div><br>  Deux circuits g√©n√©r√©s √† partir du graphique d'entr√©e, dans lesquels une forme sp√©ciale de pi√®ces est associ√©e √† la pi√®ce num√©ro 8. <br><br><h3>  Positions de porte explicitement indiqu√©es </h3><br>  Imaginez que vous ayez un script de r√©union de boss de haute qualit√© et que nous ayons besoin que le joueur entre dans la salle du boss depuis une tuile sp√©cifique.  Ou nous pouvons avoir un mod√®le de pi√®ce dans lequel certaines tuiles sont r√©serv√©es aux murs et autres obstacles.  L'algorithme permet aux concepteurs de d√©finir explicitement les positions de porte possibles pour les formes de pi√®ces individuelles. <br><br>  Mais parfois, l'objectif peut √™tre le contraire.  Nous pouvons cr√©er des mod√®les de pi√®ce de telle mani√®re que les portes puissent √™tre presque n'importe o√π.  Pour cette raison, nous imposons moins de restrictions √† l'algorithme; par cons√©quent, il s'ex√©cute souvent plus rapidement, et les circuits g√©n√©r√©s peuvent sembler moins monotones et plus organiques.  Pour de telles situations, il est possible d'indiquer simplement la longueur des portes et √† quelle distance elles doivent √™tre des coins.  La distance par rapport aux coins est une sorte de compromis entre la disposition manuelle de toutes les portes et la pr√©sence de portes n'importe o√π. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/13d/cf8/05f/13dcf805f54ce10ad637ce1c6e298b28.png"></div><br>  a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7be/e9f/51e/7bee9f51e10cda43d07163e27f7ff1dd.png"></div><br>  b) <br><br>  La figure (a) illustre les diff√©rents types de placement des portes - une pi√®ce carr√©e a 8 positions de porte clairement d√©finies, et une pi√®ce rectangulaire utilise la longueur et la distance des coins.  La figure (b) montre un diagramme g√©n√©r√© simple avec les formes des pi√®ces de la figure (a). <br><br><h3>  Couloirs entre les chambres </h3><br>  Lorsque nous parlons de niveaux de donjon, nous imaginons souvent des pi√®ces reli√©es par des couloirs √©troits.  Je voudrais supposer que les connexions sur le graphique d'entr√©e indiquent les couloirs, mais elles ne le sont pas.  Ils garantissent simplement que tous les n≈ìuds voisins seront directement connect√©s par des portes.  Si nous voulons que les pi√®ces soient connect√©es par des couloirs, nous devons ins√©rer un nouveau n≈ìud entre toutes les paires de pi√®ces voisines et pr√©tendre qu'il s'agit de pi√®ces de couloir (avec certaines formes de pi√®ces et des positions de porte donn√©es). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b59/56a/2b3/b5956a2b30f27882272fa44fe540f0bb.png"></div><br>  a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbc/91d/b4e/fbc91db4e3beec215ad06cc7799cc56a.png"></div><br>  b) <br><br>  Une illustration de la fa√ßon dont nous pouvons modifier le graphique d'entr√©e pour ajouter des couloirs entre les pi√®ces.  La figure (a) montre le graphique d'entr√©e avant d'ajouter les pi√®ces du couloir.  La figure (b) montre le graphique d'entr√©e cr√©√© √† partir de (a) en ajoutant de nouvelles pi√®ces entre toutes les pi√®ces adjacentes du graphique d'origine. <br><br>  Malheureusement, cela complique grandement la t√¢che de l'algorithme, car souvent le nombre de n≈ìuds double.  Par cons√©quent, j'ai impl√©ment√© une version de l'algorithme qui prend en compte les couloirs, ce qui permet de r√©duire la diminution des performances lors de l'am√©nagement des salles de couloir.  √Ä l'heure actuelle, l'algorithme prend en charge soit des couloirs entre toutes les pi√®ces, soit l'absence totale de couloirs, mais √† l'avenir, je pr√©vois de le rendre plus flexible. <br><br><h2>  Des exemples </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b01/c4c/b17/b01c4cb173e0b315ce81c842a617e32c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a2b/5a0/5aa/a2b5a05aa014d12b0fc70d23a540997d.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/305/5b7/de6/3055b7de654c62dc96c1e83ad510e199.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/80e/d9e/b26/80ed9eb26994f6b395e9fa2af34b6dce.png"></div><br>  <i>Plusieurs sch√©mas g√©n√©r√©s √† partir de diff√©rents ensembles de blocs de construction et avec des couloirs activ√©s.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/738/8a4/a44/7388a4a4466fe32fc9b9975e71473936.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c1e/1ed/95b/c1e1ed95b4a9236c02fc11ed1bb33ed9.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/628/f19/025/628f19025acf78eed8aa199347804f9e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa7/7e5/03d/aa77e503dbb791e78189777bc875e2cd.png"></div><br>  <i>Plusieurs sch√©mas g√©n√©r√©s √† partir de diff√©rents ensembles de blocs de construction avec des couloirs activ√©s et d√©sactiv√©s.</i> <br><br>  Dans la deuxi√®me partie de l'article, je parlerai du fonctionnement interne de l'algorithme. <br><br>  Je travaille √©galement sur un plugin Unity pour la g√©n√©ration de donjons proc√©duraux, qui inclura cet algorithme.  Je le fais car malgr√© la possibilit√© d'utiliser cet algorithme directement dans Unity (il est √©crit en C #), la commodit√© de travailler avec lui est loin d'√™tre id√©ale.  Il faut beaucoup de temps pour cr√©er des mod√®les de salle sans interface graphique, et beaucoup de code est n√©cessaire pour convertir la sortie de l'algorithme en la repr√©sentation utilis√©e dans le jeu. <br><br>  Comme je ne suis pas moi-m√™me d√©veloppeur de jeux, mon objectif est de rendre le plugin suffisamment bon pour que d'autres personnes puissent l'utiliser.  Si tout se passe bien, j'essaierai de publier des mises √† jour lorsque j'aurai quelque chose d'int√©ressant √† dire.  J'ai d√©j√† pas mal d'id√©es sur le g√©n√©rateur lui-m√™me et sur le test de ses capacit√©s. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d12/43f/2c0/d1243f2c05e18826eb3d97a30b6f743c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7ed/34f/05c/7ed34f05ca19aa127aae0938e26d63ec.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad4/d48/39f/ad4d4839f9ca1c333c2fbb3e0333989e.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c0e/805/121/c0e805121b2cda153980875d780d5f9b.png"></div><br>  <i>Captures d'√©cran du plugin Unity (le projet est en cours de d√©veloppement)</i> <br><br><h2>  Partie 2. Mise en ≈ìuvre de l'algorithme </h2><br>  Dans cette partie, je parlerai des id√©es de base √©nonc√©es dans la base de l'algorithme d√©crit dans la premi√®re partie de l'article.  Au d√©part, je voulais d√©crire les concepts de base ainsi que les principales am√©liorations n√©cessaires pour que l'algorithme soit suffisamment rapide.  Cependant, il s'est av√©r√© que m√™me les concepts de base sont plus que suffisants pour ce poste.  Par cons√©quent, j'ai d√©cid√© de r√©v√©ler les am√©liorations de performances dans un futur article. <br><br><h2>  La motivation </h2><br>  Avant de passer √† la mise en ≈ìuvre, je veux montrer le r√©sultat de ce que nous allons faire.  La vid√©o ci-dessous montre 30 circuits diff√©rents g√©n√©r√©s √† partir d'un graphique d'entr√©e et d'un ensemble de blocs de construction.  L'algorithme s'arr√™te toujours pendant 500 ms apr√®s avoir g√©n√©r√© le circuit, puis essaie de g√©n√©rer le suivant. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://ondra.nepozitek.cz/blog/wp-content/uploads/2019/01/GeneratorWindow-12_01_2019-23_48_40.mp4" type="video/mp4"></video></div></div></div><br><h2>  Comment √ßa marche </h2><br>  Le but de l'algorithme est d'attribuer la forme et la position de la pi√®ce √† chaque n≈ìud du graphique de sorte qu'aucune pi√®ce ne se croise et que les pi√®ces voisines soient reli√©es par des portes. <br><br>  Une fa√ßon d'y parvenir est d'essayer toutes les combinaisons possibles de formes de pi√®ce et de leurs positions.  Cependant, comme vous pouvez le deviner, cela sera tr√®s inefficace et nous ne serons probablement pas en mesure de g√©n√©rer des circuits, m√™me sur la base de graphiques d'entr√©e tr√®s simples. <br><br>  Au lieu de rechercher toutes les combinaisons possibles, l'algorithme calcule comment connecter correctement toutes les pi√®ces individuelles (les soi-disant espaces de configuration) et utilise ces informations pour diriger la recherche.  Malheureusement, m√™me avec ces informations, il est encore assez difficile de trouver le bon sch√©ma.  Par cons√©quent, pour une √©tude efficace de l'espace de recherche, nous utilisons une technique d'optimisation probabiliste (dans ce cas, la simulation de recuit).  Et pour acc√©l√©rer davantage l'optimisation, nous divisons la t√¢che d'entr√©e en sous-t√¢ches plus petites et plus faciles √† r√©soudre.  Cela se fait en divisant le graphique en parties plus petites (appel√©es cha√Ænes) avec la cr√©ation ult√©rieure de sch√©mas pour chacun d'eux dans l'ordre. <br><br><h2>  Espaces de configuration </h2><br>  Pour une paire de polygones dans lesquels l'un est fix√© en place et l'autre peut se d√©placer librement, l'espace de configuration est l'ensemble des positions d'un polygone libre auquel deux polygones ne se croisent pas et peuvent √™tre reli√©s par des portes.  Lorsque vous travaillez avec des polygones, chaque espace de configuration peut √™tre repr√©sent√© comme un ensemble de lignes √©ventuellement vide et calcul√© par de simples outils g√©om√©triques. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/134/823/45e/13482345ed98c982677a10e53ddaec2d.png"></div><br>  a) <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8c/1eb/62c/b8c1eb62c2f6d8f166670781dfe35336.png"></div><br>  b) <br><br>  Configurations spatiales.  La figure (a) montre l'espace de configuration (lignes rouges) d'un rectangle libre par rapport √† un polygone fixe en forme de L.  Il d√©termine tous les emplacements du centre du carr√© o√π les deux blocs ne se croisent pas et ne se touchent pas.  La figure (b) montre l'intersection (points jaunes) des espaces de configuration d'un carr√© mobile par rapport √† deux rectangles fixes. <br><br>  L'algorithme suivant est utilis√© pour calculer l'espace de configuration d'un bloc fixe et d'un bloc libre.  Nous s√©lectionnons un point de r√©f√©rence sur le bloc mobile et consid√©rons tous les emplacements dans <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>a</mi><mi>t</mi><mi>h</mi><mi>b</mi><mi>b</mi><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>R</mi></mrow><mn>2</mn></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="10.843ex" height="2.539ex" viewBox="0 -987.6 4668.4 1093.4" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-6D" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-61" x="1128" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-74" x="1658" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-68" x="2019" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-62" x="2596" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-62" x="3025" y="0"></use><g transform="translate(3455,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-52" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMAIN-32" x="1074" y="581"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>m</mi><mi>a</mi><mi>t</mi><mi>h</mi><mi>b</mi><mi>b</mi><msup><mrow class="MJX-TeXAtom-ORD"><mi>R</mi></mrow><mn>2</mn></msup></math></span></span><script type="math/tex" id="MathJax-Element-1"> \ mathbb {R} ^ 2 </script>  , de sorte que lors du d√©placement du polygone de sorte que son point de r√©f√©rence se trouve √† cet emplacement, les blocs mobile et fixe se touchent, mais ne se coupent pas.  L'ensemble de tous ces points forme l'espace de configuration de deux blocs (figure (a) ci-dessus).  Afin d'obtenir l'espace des configurations du bloc mobile par rapport √† deux ou plusieurs blocs fixes, l'intersection des espaces de configuration individuels est calcul√©e (figure (b) ci-dessus). <br><br>  L'algorithme utilise les espaces de configuration de deux mani√®res.  Tout d'abord, au lieu d'essayer les positions al√©atoires de pi√®ces individuelles, nous utilisons des espaces de configuration pour rechercher des positions menant au plus grand nombre possible de pi√®ces adjacentes reli√©es par les portes.  Pour ce faire, nous devons obtenir l'intersection maximale non vide des espaces de configuration des voisins.  Deuxi√®mement, nous utilisons des espaces de configuration pour v√©rifier si toutes les paires de pi√®ces voisines peuvent √™tre connect√©es avec des portes.  Cela se fait en v√©rifiant si la position de la pi√®ce est √† l'int√©rieur de l'espace de configuration de tous ses voisins. <br><br>  √âtant donn√© que les formes des pi√®ces ne changent pas pendant l'ex√©cution du jeu, nous pouvons pr√©-calculer les espaces de configuration de toutes les paires de formes de pi√®ces avant le d√©marrage de l'algorithme.  Gr√¢ce √† cela, l'ensemble de l'algorithme est consid√©rablement acc√©l√©r√©. <br><br><h2>  Sch√©ma incr√©mental </h2><br>  Lors de la r√©solution d'un probl√®me complexe, l'une des approches possibles consiste √† le diviser en sous-t√¢ches plus petites et plus simples, et √† les r√©soudre d√©j√†.  C'est exactement ce que nous ferons avec la t√¢che de placer des pi√®ces individuelles.  Au lieu d'organiser toutes les pi√®ces √† la fois, nous divisons le graphique d'entr√©e en sous-graphiques plus petits et essayons d'en cr√©er des diagrammes un par un.  Les auteurs de l'algorithme original appellent ces sous-graphes des ¬´cha√Ænes¬ª en raison du principe m√™me de ces graphes, dans lequel chaque n≈ìud n'a pas plus de deux voisins, et il est donc assez simple de cr√©er leur sch√©ma. <br><br>  Le circuit de sortie final est toujours un composant connect√©, il est donc inutile de connecter les composants individuels au circuit, puis d'essayer de les combiner, car le processus de combinaison peut √™tre assez compliqu√©.  Par cons√©quent, apr√®s avoir plac√© la cha√Æne, la prochaine cha√Æne connect√©e sera toujours celle qui est connect√©e aux sommets d√©j√† align√©s dans le circuit. <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-function">Layout </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateLayout</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">inputGraph</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> emptyLayout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Layout(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stack = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stack&lt;Layout&gt;(); stack.Push(emptyLayout); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(!stack.Empty()) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layout = stack.Pop(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nextChain = GetNextChain(layout, inputGraph); Layout[] partialLayouts = AddChain(layout, nextChain); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!partialLayouts.Empty()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsFullLayout(partialLayouts[<span class="hljs-number"><span class="hljs-number">0</span></span>])) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> partialLayouts[<span class="hljs-number"><span class="hljs-number">0</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { stack.Push(partialLayouts); } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; }</code> </pre> <br>  <i>Pseudo-code montrant une approche incr√©mentale pour trouver le bon sch√©ma.</i> <br><br>  Le pseudo-code pr√©sent√© ci-dessus illustre l'impl√©mentation d'un sch√©ma incr√©mentiel.  √Ä chaque it√©ration de l'algorithme (lignes 6-18), nous prenons d'abord le dernier circuit de la pile (ligne 7) et calculons la cha√Æne √† ajouter ensuite (ligne 8).  Cela peut √™tre fait en stockant simplement le num√©ro du dernier circuit ajout√© √† chaque circuit partiel.  √Ä l'√©tape suivante, nous ajoutons la cha√Æne suivante au circuit (ligne 9), g√©n√©rant plusieurs circuits d√©taill√©s et les enregistrons.  Si la phase d'expansion √©choue, mais aucun nouveau sch√©ma partiel n'est ajout√© √† la pile, et l'algorithme doit continuer avec le dernier sch√©ma partiel enregistr√©.  Nous appelons cette situation une recherche de retour car l'algorithme ne peut pas √©tendre le sch√©ma partiel actuel et doit revenir en arri√®re et continuer avec un autre sch√©ma enregistr√©.  Cela est g√©n√©ralement n√©cessaire lorsqu'il n'y a pas assez d'espace pour connecter des circuits suppl√©mentaires aux sommets d√©j√† compos√©s dans le circuit.  De plus, une recherche de retour est la raison pour laquelle nous essayons toujours de g√©n√©rer plusieurs sch√©mas avanc√©s (ligne 9).  Sinon, nous n'aurions rien sur quoi revenir.  Le processus se termine lorsque nous g√©n√©rons un circuit complet ou que la pile est vide. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/90e/909/ca4/90e909ca4640401cf869e4ad2e558d32.png"></div><br>  (a) Graphique d'entr√©e <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ca/736/f69/8ca736f69ce1ba31910d12c49f0546a4.png"></div><br>  (b) Diagramme partiel <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0e/74f/284/d0e74f2846ea5cdd8351bd1a20561704.png"></div><br>  (c) Diagramme partiel <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c4/708/d35/2c4708d351e2b4a13a98cffa9a090a58.png"></div><br>  d) Aper√ßu complet <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b3b/13b/796/b3b13b796d79dd8587d23d82cee6da52.png"></div><br>  e) Plan complet <br><br>  Sch√©ma incr√©mental.  Les figures (b) et (c) montrent deux sch√©mas partiels apr√®s la planification du premier circuit.  La figure (d) montre le circuit complet apr√®s expansion (b) par un deuxi√®me circuit.  La figure (e) montre le circuit complet apr√®s expansion (c) par un deuxi√®me circuit. <br><br>  Pour diviser le graphique en parties, vous devez trouver une incorporation √† plat du graphique d'entr√©e, c'est-√†-dire un dessin sur le plan dans lequel les ar√™tes se coupent uniquement aux extr√©mit√©s.  Cette pi√®ce jointe est ensuite utilis√©e pour obtenir toutes les faces du graphique.  L'id√©e principale de la d√©composition est qu'il est plus difficile de cr√©er un circuit √† partir de cycles, car leurs n≈ìuds ont plus de restrictions.  Par cons√©quent, nous essayons d'organiser les cycles au d√©but de la d√©composition, afin qu'ils soient trait√©s le plus t√¥t possible et de r√©duire la probabilit√© d'un besoin de revenir en arri√®re dans les √©tapes suivantes.  La premi√®re cha√Æne de d√©composition est form√©e par la plus petite face de l'attachement, et les faces suivantes sont ensuite ajout√©es dans l'ordre de recherche en largeur.  Si d'autres faces peuvent √™tre s√©lectionn√©es, la plus petite d'entre elles est utilis√©e.  Lorsqu'il n'y a plus de faces, les composants non cycliques restants sont ajout√©s.  La figure 4 montre un exemple de d√©composition dans une cha√Æne, qui a √©t√© obtenue conform√©ment √† ces √©tapes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e0f/c57/c57/e0fc57c571633c5f70b818c412e8d80c.png"></div><br>  a) <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4bb/02c/950/4bb02c950ef9309be5df082e0c630ec3.png"></div><br>  b) <br><br>  D√©composition en cha√Ænes.  La figure (b) montre un exemple de disposition de la figure (a) sur un circuit.  Chaque couleur repr√©sente une cha√Æne distincte.  Les nombres indiquent l'ordre dans lequel les cha√Ænes sont cr√©√©es. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f0c/ad3/554/f0cad3554aa63d7cc46e5d9dae334209.png"></div><br>  (c) Bonne conception partielle <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d00/839/114/d0083911404026fa33a26f529d1db1a0.png"></div>  d) Aper√ßu complet <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b27/f99/ed2/b27f99ed239d73e25a14e3f785ba5bd2.png"></div><br>  (a) Graphique d'entr√©e <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/85c/60c/13b/85c60c13b6479b643855f71f5138f738.png"></div><br>  (b) Mauvais graphique partiel <br><br>  Recherche avec retour.  La figure (b) montre un exemple d'un mauvais circuit partiel, car il n'y a pas assez d'espace pour connecter les n≈ìuds 0 et 9. Pour g√©n√©rer le circuit complet (d), un retour √† un autre circuit partiel (c) est n√©cessaire. <br><br><h2>  Recuit simul√© </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">L'algorithme de simulation de recuit</a> est une technique d'optimisation probabiliste dont le but est d'√©tudier l'espace des circuits possibles.  Il a √©t√© choisi par les auteurs de l'article original parce qu'il s'est av√©r√© utile dans des situations similaires dans le pass√©.  Lors de la mise en ≈ìuvre de l'algorithme, j'ai d√©cid√© d'utiliser la m√™me m√©thode, car je voulais commencer par ce qui a d√©j√† prouv√© son efficacit√© pour r√©soudre ce probl√®me.  Cependant, je pense qu'elle peut √™tre remplac√©e par une autre m√©thode et ma biblioth√®que est √©crite de telle mani√®re que le processus de remplacement de la m√©thode est assez simple. <br><br>  L'algorithme de simulation de recuit √©value de mani√®re it√©rative de petits changements dans la configuration ou le circuit actuel.  Cela signifie que nous cr√©ons une nouvelle configuration en s√©lectionnant au hasard un n≈ìud et en modifiant sa position ou sa forme.  Si la nouvelle configuration am√©liore la fonction √©nerg√©tique, elle est toujours accept√©e.  Sinon, il y a peu de chances d'accepter la configuration de toute fa√ßon.  La probabilit√© de prendre de mauvaises d√©cisions diminue avec le temps.  La fonction d'√©nergie est con√ßue de mani√®re √† imposer de grosses amendes aux n≈ìuds qui se croisent et aux n≈ìuds adjacents qui ne se touchent pas. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>E</mi><mo>=</mo><msup><mi>e</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>A</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><msup><mi>e</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>D</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><mo>&amp;#x2212;</mo><mn>1</mn></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="32.209ex" height="2.66ex" viewBox="0 -987.6 13867.5 1145.2" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-45" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMAIN-3D" x="1042" y="0"></use><g transform="translate(2098,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-66" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-72" x="904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-61" x="1355" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-63" x="1885" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-41" x="2318" y="0"></use><g transform="translate(2170,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-6F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-6D" x="839" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-65" x="1717" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-67" x="2184" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-61" x="2664" y="0"></use></g></g></g><g transform="translate(7093,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-65" x="0" y="0"></use><g transform="translate(466,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-66" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-72" x="904" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-61" x="1355" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-63" x="1885" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-44" x="2318" y="0"></use><g transform="translate(2225,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-6F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-6D" x="839" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-65" x="1717" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-67" x="2184" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-61" x="2664" y="0"></use></g></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMAIN-2212" x="12366" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMAIN-31" x="13367" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>E</mi><mo>=</mo><msup><mi>e</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>A</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><msup><mi>e</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>D</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></mrow></msup><mo>‚àí</mo><mn>1</mn></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> E = e ^ {\ frac {A} {\ omega}} e ^ {\ frac {D} {\ omega}} - 1 </script></p><br>  A est la zone d'intersection totale entre toutes les paires de blocs du diagramme.  D est la somme des carr√©s des distances entre les centres des paires de blocs dans le graphe d'entr√©e qui sont voisins mais ne se touchent pas.  Valeur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/436198/&amp;usg=ALkJrhh2wShQ1tIMWjMfLTU-IrqLZl31EQ#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ omega </script>  affecte la probabilit√© que le recuit simul√© soit autoris√© √† passer √† la pire configuration;  ce param√®tre est calcul√© √† partir de la surface moyenne des blocs de construction. <br><br>  Apr√®s avoir s√©lectionn√© un n≈ìud √† modifier, nous modifions sa forme ou sa position.  Comment choisissons-nous un nouveau poste?  Vous pouvez le choisir au hasard, mais cela d√©gradera souvent la fonction d'√©nergie et l'algorithme convergera tr√®s lentement.  Pouvons-nous choisir une position plus susceptible d'augmenter la fonction √©nerg√©tique?  Vous voyez √† quoi je m√®ne?  Nous utilisons des espaces de configuration pour s√©lectionner une position qui satisfait les limites du plus grand nombre de pi√®ces voisines. <br><br>  Ensuite, pour modifier la forme, s√©lectionnez simplement l'une des formes de pi√®ce disponibles.  Bien que l'algorithme n'essaie pas de d√©cider quelle forme est la plus susceptible de nous conduire au sch√©ma correct.  Cependant, il serait int√©ressant d'essayer cette fonctionnalit√© et de voir si elle acc√©l√®re l'algorithme. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">List&lt;Layout&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddChain</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">chain, layout</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentLayout = GetInitialLayout(layout, chain); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> generatedLayouts = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Layout&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>; i &lt;= n, i++) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/*       */</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">1</span></span>; j &lt;= m, j++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newLayout = PerturbLayout(currentLayout, chain); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsValid(newLayout)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (DifferentEnough(newLayout, generatedLayouts)) { generatedLayouts.Add(newLayout); } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/* newLayout ,  currentLayout */</span></span>) { currentLayout = newLayout; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-comment"><span class="hljs-comment">/* ,   ,    newLayout */</span></span>) { currentLayout = newLayout; } } <span class="hljs-comment"><span class="hljs-comment">/*      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> generatedLayouts; }</code> </pre> <br>  Il s'agit du pseudo-code de la m√©thode responsable de la cr√©ation d'un circuit s√©par√© en simulant un recuit. <br><br>  Pour acc√©l√©rer l'ensemble du processus, nous allons essayer de trouver la configuration initiale basse √©nergie.  Pour ce faire, nous organiserons les n≈ìuds de la cha√Æne actuelle pour une recherche en premier, en commen√ßant par ceux qui sont adjacents aux n≈ìuds d√©j√† inclus dans le sch√©ma.  Ensuite, les n≈ìuds ordonn√©s sont plac√©s un √† la fois et pour eux, la position avec l'√©nergie la plus faible est s√©lectionn√©e dans l'espace de configuration.  Ici, nous ne faisons aucun retour en arri√®re - c'est un processus simple et gourmand. <br><br><h2>  Vid√©o bonus </h2><br>  La vid√©o ci-dessous montre les diagrammes g√©n√©r√©s √† partir du m√™me graphique d'entr√©e que dans la premi√®re vid√©o.  Cependant, cette fois, une approche incr√©mentale est montr√©e.  Vous remarquerez peut-√™tre que l'algorithme ajoute des cha√Ænes de n≈ìuds un par un.  On voit √©galement qu'il existe parfois deux circuits partiels cons√©cutifs avec le m√™me nombre de n≈ìuds.  Cela se produit lorsque l'algorithme revient.  Si la premi√®re tentative d'ajouter un autre circuit au premier circuit partiel √©choue, alors l'algorithme essaie un autre circuit partiel. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Votre navigateur ne prend pas en charge la vid√©o HTML5. <source src="https://ondra.nepozitek.cz/blog/wp-content/uploads/2019/01/GeneratorWindow-13_01_2019-23_23_30.mp4" type="video/mp4"></video></div></div></div><br><h2>  Documents t√©l√©chargeables </h2><br>  L'impl√©mentation de l'algorithme sur .NET se trouve dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">mon github</a> .  Le r√©f√©rentiel contient la DLL .NET et l'application graphique WinForms, contr√¥l√©es par les fichiers de configuration YAML. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436198/">https://habr.com/ru/post/fr436198/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436186/index.html">Que penser lors de l'entretien NALSD</a></li>
<li><a href="../fr436188/index.html">La libert√© de voler √† port√©e de main avec le contr√¥leur intelligent DJI</a></li>
<li><a href="../fr436192/index.html">Simulation du navigateur physique</a></li>
<li><a href="../fr436194/index.html">Fonctionnement du syst√®me de vid√©osurveillance Ivideon: pr√©sentation de l'application mobile</a></li>
<li><a href="../fr436196/index.html">Voyeurisme testeur: comment espionner correctement les gens et pourquoi il est n√©cessaire</a></li>
<li><a href="../fr436200/index.html">D√©cision d'un tribunal am√©ricain: les autorit√©s n'ont pas le droit de forcer une personne √† d√©verrouiller le t√©l√©phone avec un doigt ou un visage</a></li>
<li><a href="../fr436202/index.html">J'ai perdu confiance dans le d√©veloppement, br√ªl√©, mais le culte de l'outil m'a sauv√©</a></li>
<li><a href="../fr436206/index.html">Comment unir sans peine l'art avec Java, JavaScript et les graphiques ou l'histoire derri√®re la cr√©ation d'un produit de th√©√¢tre interactif</a></li>
<li><a href="../fr436208/index.html">De nouveaux torrents n'apparaissent plus sur The Pirate Bay</a></li>
<li><a href="../fr436210/index.html">Biquaternions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>