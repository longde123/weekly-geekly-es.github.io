<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õ∏Ô∏è üëù üïû Funciones de nivelaci√≥n autom√°tica en el almacenamiento Qsan XCubeSAN ‚úä ü¶á üíò</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuando con la consideraci√≥n de las tecnolog√≠as para acelerar las operaciones de E / S aplicadas a los sistemas de almacenamiento, que comenz√≥ en ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Funciones de nivelaci√≥n autom√°tica en el almacenamiento Qsan XCubeSAN</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skilline/blog/447520/"><p>  Continuando con la consideraci√≥n de las tecnolog√≠as para acelerar las operaciones de E / S aplicadas a los sistemas de almacenamiento, que comenz√≥ en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo anterior</a> , uno no puede evitar detenerse en una opci√≥n tan popular como la nivelaci√≥n autom√°tica.  Aunque la ideolog√≠a de esta funci√≥n es muy similar a la de varios fabricantes de sistemas de almacenamiento, consideraremos las caracter√≠sticas de la implementaci√≥n de desgarro utilizando el ejemplo del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">almacenamiento Qsan</a> . </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ku/_v/ya/ku_vyabwv-ny-wbrnh1cbrvuetg.png"></div><a name="habracut"></a><br><p>  A pesar de la variedad de datos almacenados en el sistema de almacenamiento, estos mismos datos pueden dividirse en varios grupos seg√∫n su relevancia (frecuencia de uso).  Los datos m√°s populares ("calientes") son extremadamente importantes para organizar el acceso m√°s r√°pido, mientras que el procesamiento de datos menos populares ("fr√≠os") se puede realizar con una prioridad m√°s baja. </p><br><p>  Para organizar dicho esquema, se utiliza el rasgado funcional.  La matriz de datos en este caso no consiste en el mismo tipo de discos, sino en varios grupos de unidades que forman diferentes niveles de almacenamiento.  Mediante un algoritmo especial, los datos se mueven autom√°ticamente entre niveles para garantizar el m√°ximo rendimiento final. </p><br><img align="right" width="50%" src="https://habrastorage.org/webt/uj/yv/3w/ujyv3wfwhctis7zvo6jdhuzftz8.png"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los sistemas de</a> almacenamiento <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Qsan</a> admiten hasta tres niveles de almacenamiento: </p><br><ul><li>  Nivel 1: SSD M√°ximo rendimiento </li><li>  Nivel 2: HDD SAS 10K / 15K, alto rendimiento </li><li>  Nivel 3: HDD NL-SAS 7.2K, capacidad m√°xima </li></ul><br><br><p>  El grupo de niveles autom√°ticos puede contener los tres niveles y solo dos en cualquier combinaci√≥n.  Dentro de cada nivel, las unidades se combinan en grupos RAID familiares.  Para una m√°xima flexibilidad, el nivel RAID en cada nivel puede ser diferente.  Es decir, por ejemplo, nada le impide organizar una estructura como 4x SSD RAID10 + 6x HDD 10K RAID5 + 12 HDD 7.2K RAID6 </p><br><p>  Despu√©s de crear vol√∫menes (discos virtuales) en el grupo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Auto Tiering</a> , comienza la recopilaci√≥n de estad√≠sticas en segundo plano sobre todas las operaciones de E / S.  Para hacer esto, el espacio se "corta" en bloques de 1GB (el llamado sub LUN).  Cada vez que accede a dicho bloque, se le asigna un coeficiente 1. Luego, con el tiempo, este coeficiente disminuye.  Despu√©s de 24 horas, en ausencia de solicitudes de entrada / salida para esta unidad, ya ser√° igual a 0.5 y continuar√° cayendo despu√©s de cada hora subsiguiente. </p><br><p>  En un momento determinado (de forma predeterminada todos los d√≠as a la medianoche), los resultados recopilados se clasifican por actividad sub LUN en funci√≥n de sus coeficientes.  En base a esto, se toma una decisi√≥n sobre qu√© bloques mover y en qu√© direcci√≥n.  Despu√©s de lo cual, de hecho, hay una reubicaci√≥n de datos entre los niveles. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/0z/gc/do/0zgcdoi7cuq1kgygu2fndtthe7e.png"></div><br><p>  El sistema de almacenamiento Qsan implementa perfectamente el control del proceso de rasgado utilizando una variedad de par√°metros, lo que le permitir√° configurar de manera muy flexible el rendimiento final de la matriz. </p><br><p>  Para determinar la ubicaci√≥n inicial de los datos y la direcci√≥n de prioridad de su movimiento, se utilizan pol√≠ticas que se establecen por separado para cada volumen: </p><br><ul><li>  <b>Nivelaci√≥n autom√°tica</b> : la pol√≠tica predeterminada, la ubicaci√≥n inicial y la direcci√≥n de los movimientos se determina autom√°ticamente, es decir  Los datos "calientes" tienden al nivel m√°s alto, y los datos "fr√≠os" bajan.  La ubicaci√≥n inicial se selecciona en funci√≥n del espacio disponible en cada nivel.  Pero debe comprender que el sistema busca principalmente maximizar el uso de las unidades m√°s r√°pidas.  Por lo tanto, si hay espacio libre, los datos se colocar√°n en los niveles superiores.  Esta pol√≠tica es adecuada para la mayor√≠a de los escenarios cuando la demanda de datos no se puede predecir de antemano. </li><li>  <b>Comience alto y, luego, nivelaci√≥n autom√°tica</b> : la diferencia con respecto al anterior solo est√° en la ubicaci√≥n de datos original (en el nivel m√°s r√°pido) </li><li>  <b>El nivel m√°s alto</b> : los datos siempre se esfuerzan por ocupar el nivel m√°s r√°pido.  Si en el proceso se mueven hacia abajo, lo antes posible se mueven hacia atr√°s.  Esta pol√≠tica es adecuada para datos que requieren el acceso m√°s r√°pido. </li><li>  <b>Nivel m√≠nimo</b> : los datos siempre se esfuerzan por ocupar el nivel m√°s bajo.  Esta pol√≠tica es perfecta para datos raramente utilizados (por ejemplo, archivos). </li><li>  <b>Sin movimiento</b> : el sistema determina autom√°ticamente la ubicaci√≥n inicial de los datos y no los mueve.  Sin embargo, se siguen recopilando estad√≠sticas en caso de que posteriormente se requiera su reubicaci√≥n. </li></ul><br><p>  Vale la pena se√±alar que, a pesar del hecho de que las pol√≠ticas se definen al crear cada volumen, se pueden cambiar repetidamente sobre la marcha durante el ciclo de vida del sistema. </p><br><p>  Adem√°s de las pol√≠ticas para el mecanismo de desgarro, tambi√©n se configura la frecuencia y el ritmo del movimiento de datos entre niveles.  Puede establecer un tiempo espec√≠fico de movimiento: diariamente o en ciertos d√≠as de la semana, as√≠ como reducir el intervalo de recopilaci√≥n de estad√≠sticas a varias horas (la frecuencia m√≠nima es de 2 horas).  Si es necesario limitar el tiempo de ejecuci√≥n de la operaci√≥n de movimiento de datos, puede establecer el marco de tiempo (ventana para mover).  Adem√°s, tambi√©n se indica la velocidad de reubicaci√≥n: 3 modos: r√°pido, medio, lento. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/3n/rc/ly/3nrcly0rrc6zp4g2emifvkhzy7o.png"></div><br><p>  En caso de una necesidad de reubicaci√≥n de datos inmediata, es posible ejecutarla en modo manual en cualquier momento por orden del administrador. </p><br><p>  Est√° claro que cuanto m√°s a menudo y m√°s r√°pido se muevan los datos entre niveles, m√°s flexible ser√° el sistema de almacenamiento para adaptarse a las condiciones de operaci√≥n actuales.  Pero al mismo tiempo, vale la pena recordar que mover es una carga adicional (principalmente en discos), por lo que no es necesario "manejar" los datos sin una necesidad extrema.  Es mejor planificar el movimiento para momentos de carga m√≠nima.  Si el trabajo de almacenamiento requiere constantemente un alto rendimiento las 24 horas, los 7 d√≠as de la semana, entonces vale la pena reducir al m√≠nimo la tasa de reubicaci√≥n. </p><br><p>  La abundancia de configuraciones de rasgado indudablemente complacer√° a los usuarios avanzados.  Sin embargo, para aquellos que se enfrentan a dicha tecnolog√≠a por primera vez, no hay nada de qu√© preocuparse.  Es muy posible confiar en la configuraci√≥n predeterminada (pol√≠tica de nivelaci√≥n autom√°tica, moverse a la velocidad m√°xima una vez al d√≠a por la noche) y, a medida que se acumulan las estad√≠sticas, ajustar ciertos par√°metros para lograr el resultado deseado. </p><br><p>  Al comparar el emparejamiento con una tecnolog√≠a no menos popular para aumentar la productividad como el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">almacenamiento en cach√© de SSD</a> , uno debe tener en cuenta los diferentes principios de sus algoritmos. </p><br><table><tbody><tr><th></th><th>  Almacenamiento en cach√© SSD </th><th>  Nivelaci√≥n autom√°tica </th></tr><tr><td>  <b>Tasa de inicio del efecto</b> </td><td>  Casi al instante.  Pero un efecto notable solo despu√©s de que el cach√© se "calienta" (minutos-horas) </td><td>  Despu√©s de recopilar estad√≠sticas (a partir de 2 horas, idealmente un d√≠a), m√°s el tiempo para mover los datos </td></tr><tr><td>  <b>Duraci√≥n del efecto</b> </td><td>  Hasta que los datos sean reemplazados por una nueva porci√≥n (minutos-horas) </td><td>  Si bien la demanda de datos es relevante (d√≠a o m√°s) </td></tr><tr><td>  <b>Indicaciones de uso</b> </td><td>  Aumente instant√°neamente la productividad por un corto tiempo (bases de datos, entornos de virtualizaci√≥n) </td><td>  Aumento de la productividad durante un largo per√≠odo (archivos, web, servidores de correo) </td></tr></tbody></table><br><p>  Tambi√©n una de las caracter√≠sticas del rasgado es la capacidad de usarlo no solo para escenarios como "SSD + HDD", sino tambi√©n "HDD r√°pido + HDD lento" o los tres niveles en general, lo que es imposible en principio cuando se usa el almacenamiento en cach√© SSD. </p><br><h2>  Prueba </h2><br><p>  Para probar el funcionamiento de los algoritmos de desgarro, realizamos una prueba simple.  Se cre√≥ un grupo de dos niveles de SSD (RAID 1) + HDD 7.2K (RAID1), en el que se coloc√≥ el volumen con la pol√≠tica de "nivel m√≠nimo".  Es decir  los datos siempre deben ubicarse en discos lentos. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/wz/ao/sh/wzaosh2xtpg6udoo-oj-vthkifg.png"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/rg/rh/sr/rgrhsrmqbcxh9owogzvjwpziygy.png"></div><br><p>  <i>La interfaz de control muestra claramente la ubicaci√≥n de los datos entre niveles.</i> </p><br><p>  Despu√©s de llenar el volumen con datos, cambiamos la pol√≠tica de ubicaci√≥n a Nivelaci√≥n autom√°tica y ejecutamos la prueba IOmeter. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/ij/16/ae/ij16ae-y3lhjz-drv-layz8bx6o.png"></div><br><p>  Despu√©s de varias horas de pruebas, cuando el sistema pudo acumular estad√≠sticas, comenz√≥ el proceso de reubicaci√≥n. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/65/ei/vv/65eivv0c2j-6wztcum3b-ruw6ey.png"></div><br><p>  Al final del movimiento de datos, nuestro volumen de prueba se arrastr√≥ completamente al nivel superior (SSD). </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/6z/zn/uo/6zznuo9ksohljxxge7inru3fqz4.png"></div><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/06/lm/cc06lmfovo0wyeclc2uhzuwxt5g.png"></div><br><h3>  El veredicto </h3><br><blockquote>  La nivelaci√≥n autom√°tica es una tecnolog√≠a maravillosa que le permite aumentar la productividad del sistema de almacenamiento con el m√≠nimo de costos de material y tiempo debido al uso m√°s intensivo de unidades de alta velocidad.  En <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">relaci√≥n</a> con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Qsan, la</a> √∫nica inversi√≥n es una licencia, que se adquiere de una vez por todas sin limitaci√≥n en el volumen / n√∫mero de discos / estantes / etc.  Esta funcionalidad est√° equipada con una configuraci√≥n tan rica que puede satisfacer casi cualquier tarea empresarial.  Y la visualizaci√≥n de los procesos en la interfaz le permitir√° administrar de manera efectiva el dispositivo. <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/447520/">https://habr.com/ru/post/447520/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../447508/index.html">Sergey Zonov: "Hice el primer Spectrum porque estaba interesado"</a></li>
<li><a href="../447510/index.html">GeekUniversity abre la inscripci√≥n en el departamento de dise√±o</a></li>
<li><a href="../447512/index.html">¬øY qui√©n hizo esto? Automatizar la auditor√≠a de seguridad de la informaci√≥n.</a></li>
<li><a href="../447514/index.html">7 startups interesantes en IoT</a></li>
<li><a href="../447516/index.html">C√≥mo overclockeamos CAD COMPASS-3D ‚Üí Parte 2</a></li>
<li><a href="../447522/index.html">Qu√© cosas √∫tiles se pueden extraer de los registros de una estaci√≥n de trabajo basada en Windows</a></li>
<li><a href="../447526/index.html">Bicicleta propia para sincronizar MariaDB y Sphinx</a></li>
<li><a href="../447528/index.html">¬øQui√©n es responsable de la calidad?</a></li>
<li><a href="../447530/index.html">OceanLotus: actualizaci√≥n de Malvari para macOS</a></li>
<li><a href="../447532/index.html">Splunk Universal Forwarder en el Docker como recopilador de registros del sistema</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>