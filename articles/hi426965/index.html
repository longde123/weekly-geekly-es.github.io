<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯжЗ ЁЯТ┤ ЁЯША C ++ 2a рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рд╣реЛрдЧрд╛ ЁЯдЯЁЯП╛ ЁЯзСЁЯП╗тАНЁЯдЭтАНЁЯзСЁЯП╗ ЁЯПЗ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдХреБрдЫ рд╣рдлрд╝реНрддреЗ рдкрд╣рд▓реЗ C ++ рджреБрдирд┐рдпрд╛ рдореЗрдВ рдореБрдЦреНрдп рд╕рдореНрдореЗрд▓рди рдерд╛ - CPPCON ред 
 рд▓рдЧрд╛рддрд╛рд░ рд╕реБрдмрд╣ 8 рдмрдЬреЗ рд╕реЗ рд░рд╛рдд 10 рдмрдЬреЗ рддрдХ рдЦрдмрд░реЗрдВ рдЖрдИрдВред рд╕рднреА рдзрд░реНрдореЛрдВ рдХреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░реЛрдВ рдиреЗ рд╕реА ++ рдХреЗ рднрд╡рд┐...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C ++ 2a рдореЗрдВ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрдпрд╛ рд╣реЛрдЧрд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426965/"><p><img src="https://habrastorage.org/getpro/habr/post_images/47f/f1a/031/47ff1a031b06731d90b89bbedbb9de05.jpg" alt="рдЫрд╡рд┐"></p><br><p>  рдХреБрдЫ рд╣рдлрд╝реНрддреЗ рдкрд╣рд▓реЗ C ++ рджреБрдирд┐рдпрд╛ рдореЗрдВ рдореБрдЦреНрдп рд╕рдореНрдореЗрд▓рди рдерд╛ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">CPPCON</a> ред <br>  рд▓рдЧрд╛рддрд╛рд░ рд╕реБрдмрд╣ 8 рдмрдЬреЗ рд╕реЗ рд░рд╛рдд 10 рдмрдЬреЗ рддрдХ рдЦрдмрд░реЗрдВ рдЖрдИрдВред  рд╕рднреА рдзрд░реНрдореЛрдВ рдХреЗ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░реЛрдВ рдиреЗ рд╕реА ++ рдХреЗ рднрд╡рд┐рд╖реНрдп рдкрд░ рдЪрд░реНрдЪрд╛ рдХреА, рдмрд╛рдЗрдХ рдХреЛ рдЬрд╣рд░ рджрд┐рдпрд╛ рдФрд░ рд╕реЛрдЪрд╛ рдХрд┐ рдХреИрд╕реЗ рд╕реА ++ рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рдпрд╛ рдЬрд╛рдПред </p><br><p>  рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд░реВрдк рд╕реЗ рдХрдИ рд░рд┐рдкреЛрд░реНрдЯреЗрдВ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдорд░реНрдкрд┐рдд рдереАрдВред  рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЖрдкрдХреЛ рдЕрдзрд┐рдХрддрдо рдкреНрд░рджрд░реНрд╢рди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВ рдпрд╛ рдХреЛрдб рд╢реАрдЯ рдЙрддреНрдкрдиреНрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br>  C ++ 2a рдореЗрдВ рдХреМрди рд╕реЗ рдирд╡рд╛рдЪрд╛рд░реЛрдВ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рд╣реИ? </p><a name="habracut"></a><br><h2 id="nemnogo-teorii">  рд╕рд┐рджреНрдзрд╛рдВрдд рдХреА рдмрд┐рдЯ </h2><br><p>  рдкрд░рдВрдкрд░рд╛рдЧрдд рд░реВрдк рд╕реЗ, рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреА рд╕рднреА рдЧрд▓рдд рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЛ 2 рдмрдбрд╝реЗ рд╕рдореВрд╣реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><ul><li>  рдШрд╛рддрдХ рддреНрд░реБрдЯрд┐рдпрд╛рдБред </li><li>  рдШрд╛рддрдХ рдпрд╛ рдЕрдкреЗрдХреНрд╖рд┐рдд рддреНрд░реБрдЯрд┐рдпрд╛рдБ рдирд╣реАрдВред </li></ul><br><h2 id="fatalnye-oshibki">  рдШрд╛рддрдХ рддреНрд░реБрдЯрд┐рдпрд╛рдБ </h2><br><p> рдЙрдирдХреЗ рдмрд╛рдж, рдирд┐рд╖реНрдкрд╛рджрди рдХреЛ рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХрд╛ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред <br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рдПрдХ рдЕрд╢рдХреНрдд рд╕реВрдЪрдХ рд╣реИ, рдЬреЛ рд╕реНрдореГрддрд┐ рд╕реЗ рдЧреБрдЬрд░ рд░рд╣рд╛ рд╣реИ, 0 рд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ, рдпрд╛ рдХреЛрдб рдореЗрдВ рдЕрдиреНрдп рдЖрдХреНрд░рдордгрдХрд╛рд░рд┐рдпреЛрдВ рдХрд╛ рдЙрд▓реНрд▓рдВрдШрди рдХрд░ рд░рд╣рд╛ рд╣реИред  рдЬрдм рд╡реЗ рд╣реЛрддреЗ рд╣реИрдВ рддреЛ рд╕рднреА рдХреЛ рд╕рдорд╕реНрдпрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХрддрдо рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдФрд░ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </p><br><p>  рд╕реА ++ рдореЗрдВ <del>  рдмрд╣реБрдд рдЬреНрдпрд╛рджрд╛ </del>  рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдкрд░реНрдпрд╛рдкреНрдд рддрд░реАрдХреЗ рд╣реИрдВ: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрд╕рдЯреАрдбреА :: рд╕рдорд╛рдкреНрдд рдХрд░реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">std :: рдЧрд░реНрднрдкрд╛рдд</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрд╕рдЯреАрдбреА :: рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">std :: quick_exit</a> </li></ul><br><p>  рд▓рд╛рдЗрдмреНрд░реЗрд░реАрдЬрд╝ рдХреНрд░реИрд╢ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">1</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">2</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">3</a> ) рдкрд░ рдбреЗрдЯрд╛ рдПрдХрддреНрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ рд▓рдЧреА рд╣реИрдВред </p><br><h2 id="ne-fatalnye-oshibki">  рдЧреИрд░ рдШрд╛рддрдХ рддреНрд░реБрдЯрд┐рдпрд╛рдВ </h2><br><p>  рдпреЗ рддреНрд░реБрдЯрд┐рдпрд╛рдБ рд╣реИрдВ рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдо рд▓реЙрдЬрд┐рдХ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддреЗ рд╕рдордп рддреНрд░реБрдЯрд┐рдпрд╛рдВ, рдПрдХ рдЕрдорд╛рдиреНрдп рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЛ рдПрдХ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рдирд╛, рдЖрджрд┐ред  рдХрд╛рд░реНрдпрдХреНрд░рдо рдореЗрдВ рдРрд╕реА рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдЪреАрдЬреЛрдВ рдХреЗ рдХреНрд░рдо рдореЗрдВ рд╣реИред  рдЙрдирдХреЗ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рд▓рд┐рдП, C ++ рдореЗрдВ рдХрдИ рдЖрдо рддреМрд░ рдкрд░ рд╕реНрд╡реАрдХреГрдд рд░рдгрдиреАрддрд┐ рд╣реИрдВред <br>  рд╣рдо рдПрдХ рд╕рд░рд▓ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдмрд╛рдд рдХрд░реЗрдВрдЧреЗ: </p><br><p> рдЖрдЗрдП, рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдлрд╝рдВрдХреНрд╢рди <code>void addTwo()</code> рд▓рд┐рдЦрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░реЗрдВред <br>  рдлрд╝рдВрдХреНрд╢рди рдХреЛ 2 рдкрдВрдХреНрддрд┐рдпреЛрдВ рдХреЛ рдкрдврд╝рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЙрдиреНрд╣реЗрдВ <code>int</code> рдмрджрд▓рдирд╛ рдФрд░ рдпреЛрдЧ рдкреНрд░рд┐рдВрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред  IO рддреНрд░реБрдЯрд┐рдпреЛрдВ, рдЕрддрд┐рдкреНрд░рд╡рд╛рд╣ рдФрд░ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд░реВрдкрд╛рдВрддрд░рдг рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдореИрдВ рдирд┐рд░реНрдмрд╛рдз рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рд╡рд┐рд╡рд░рдгреЛрдВ рдХреЛ рдЫреЛрдбрд╝ рджреВрдВрдЧрд╛ред  рд╣рдо 3 рдореБрдЦреНрдп рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗред </p><br><h3 id="1-isklyucheniya">  1. рдЕрдкрд╡рд╛рдж </h3><br><pre> <code class="hljs pgsql">//     //   IO  std::runtime_error std::string readLine(); //    <span class="hljs-type"><span class="hljs-type">int</span></span> //     std::invalid_argument <span class="hljs-type"><span class="hljs-type">int</span></span> parseInt(const std::string&amp; str); //  a  b //     std::overflow_error <span class="hljs-type"><span class="hljs-type">int</span></span> safeAdd(<span class="hljs-type"><span class="hljs-type">int</span></span> a, <span class="hljs-type"><span class="hljs-type">int</span></span> b); <span class="hljs-type"><span class="hljs-type">void</span></span> addTwo() { try { std::string aStr = readLine(); std::string bStr = readLine(); <span class="hljs-type"><span class="hljs-type">int</span></span> a = parseInt(aStr); <span class="hljs-type"><span class="hljs-type">int</span></span> b = parseInt(bStr); std::cout &lt;&lt; safeAdd(a, b) &lt;&lt; std::endl; } catch(const std::exeption&amp; e) { std::cout &lt;&lt; e.what() &lt;&lt; std::endl; } }</code> </pre> <br><p>  C ++ рдореЗрдВ рдЕрдкрд╡рд╛рдж рдЖрдкрдХреЛ <code>  </code> рдЕрдирд╛рд╡рд╢реНрдпрдХ <code>  </code> рдмрд┐рдирд╛ рдХреЗрдВрджреНрд░реАрдп рд░реВрдк рд╕реЗ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВ, <br>  рд▓реЗрдХрд┐рди рдЖрдкрдХреЛ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЗ рдкреВрд░реЗ рдвреЗрд░ рдХреЗ рд╕рд╛рде рдЗрд╕рдХреЗ рд▓рд┐рдП рднреБрдЧрддрд╛рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><br><ul><li>  рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдУрд╡рд░рд╣реЗрдб рдХрд╛рдлреА рдмрдбрд╝рд╛ рд╣реИ, рдЖрдк рдЕрдХреНрд╕рд░ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рдирд╣реАрдВ рдлреЗрдВрдХ рд╕рдХрддреЗред </li><li>  рдпрд╣ рдмреЗрд╣рддрд░ рдирд╣реАрдВ рд╣реИ рдХрд┐ рдирд┐рд░реНрдорд╛рдгрдХрд░реНрддрд╛рдУрдВ / рд╡рд┐рдзреНрд╡рдВрд╕рдХреЛрдВ рдХреЗ рдЕрдкрд╡рд╛рджреЛрдВ рдХреЛ рди рдлреЗрдВрдХреЗ рдФрд░ RAII рдХрд╛ рдирд┐рд░реАрдХреНрд╖рдг рдХрд░реЗрдВред </li><li>  рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд╣рд╕реНрддрд╛рдХреНрд╖рд░ рд╕реЗ, рдпрд╣ рд╕рдордЭрдирд╛ рдЕрд╕рдВрднрд╡ рд╣реИ рдХрд┐ рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рдЕрдкрд╡рд╛рдж рдХреНрдпрд╛ рдЙрдбрд╝ рд╕рдХрддрд╛ рд╣реИред </li><li>  рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрдкрд╡рд╛рдж рд╕рдорд░реНрдерди рдХреЛрдб рдХреЗ рдХрд╛рд░рдг рдмрд╛рдЗрдирд░реА рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдЖрдХрд╛рд░ рдмрдврд╝рддрд╛ рд╣реИред </li></ul><br><h3 id="2-kody-vozvrata">  2. рдХреЛрдб рд▓реМрдЯрд╛рдПрдВ </h3><br><p>  рд╕реА рд╕реЗ рд╡рд┐рд░рд╛рд╕рдд рдореЗрдВ рдорд┐рд▓рд╛ рд╢рд╛рд╕реНрддреНрд░реАрдп рджреГрд╖реНрдЯрд┐рдХреЛрдгред </p><br><pre> <code class="hljs cpp"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readLine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; str)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parseInt</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; str, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; result)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">safeAdd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&amp; result)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTwo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> aStr; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ok = readLine(aStr); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ok) { processError(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> bStr; ok = readLine(bStr); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ok) { processError(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a = <span class="hljs-number"><span class="hljs-number">0</span></span>; ok = parseInt(aStr, a); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ok) { processError(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b = <span class="hljs-number"><span class="hljs-number">0</span></span>; ok = parseInt(bStr, b); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ok) { processError(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> result = <span class="hljs-number"><span class="hljs-number">0</span></span>; ok = safeAdd(a, b, result); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ok) { processError(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; result &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; }</code> </pre> <br><p>  рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛ рдирд╣реАрдВ рд▓рдЧрддрд╛ рд╣реИ? </p><br><ol><li>  рдЖрдк рдХрд┐рд╕реА рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдорд╛рди рдирд╣реАрдВ рд▓реМрдЯрд╛ рд╕рдХрддреЗред </li><li>  рддреНрд░реБрдЯрд┐ рдХреЛ рд╣реИрдВрдбрд▓ рдХрд░рдирд╛ рднреВрд▓ рдЬрд╛рдирд╛ рдмрд╣реБрдд рдЖрд╕рд╛рди рд╣реИ (рдкрд┐рдЫрд▓реА рдмрд╛рд░ рдЬрдм рдЖрдкрдиреЗ рдкреНрд░рд┐рдВрдЯрдлрд╝ рд╕реЗ рд░рд┐рдЯрд░реНрди рдХреЛрдб рдХреА рдЬрд╛рдБрдЪ рдХреА рдереА?)ред </li><li>  рдЖрдкрдХреЛ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдЖрдЧреЗ рдПрд░рд░ рд╣реИрдВрдбрд▓рд┐рдВрдЧ рдХреЛрдб рд▓рд┐рдЦрдирд╛ рд╣реЛрдЧрд╛ред  рдРрд╕реЗ рдХреЛрдб рдХреЛ рдкрдврд╝рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИред <br>  C ++ 17 рдФрд░ C ++ 2a рдХрд╛ рдЙрдкрдпреЛрдЧ рдЗрди рд╕рднреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рдХреНрд░рдо рд╕реЗ рдареАрдХ рдХрд░реЗрдЧрд╛ред </li></ol><br><h3 id="3-c17-i-nodiscard">  3. рд╕реА ++ 17 рдФрд░ рдиреЛрдбреЛрдХрд╛рд░реНрдб </h3><br><p>  C ++ 17 рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>  nodiscard</code></a> рд╣реИред <br>  рдпрджрд┐ рдЖрдк рдЗрд╕реЗ рдлрд╝рдВрдХреНрд╢рди рдШреЛрд╖рдгрд╛ рд╕реЗ рдкрд╣рд▓реЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рд░рд┐рдЯрд░реНрди рдореВрд▓реНрдп рдХреА рдЬрд╛рдВрдЪ рдирд╣реАрдВ рд╣реЛрдиреЗ рд╕реЗ рд╕рдВрдХрд▓рдХ рдЪреЗрддрд╛рд╡рдиреА рдХрд╛ рдХрд╛рд░рдг рд╣реЛрдЧрд╛ред </p><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">[nodiscard</span></span>]] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doStuff</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> doStuff(); <span class="hljs-comment"><span class="hljs-comment">//  ! bool ok = doStuff(); // .</span></span></code> </pre> <br><p>  рдЖрдк рдПрдХ рд╡рд░реНрдЧ, рд╕рдВрд░рдЪрдирд╛, рдпрд╛ <code>nodiscard</code> рд╡рд░реНрдЧ рдХреЗ рд▓рд┐рдП <code>nodiscard</code> рднреА рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдЙрди рд╕рднреА рдХрд╛рд░реНрдпреЛрдВ рддрдХ рдлреИрд▓реА рд╣реБрдИ рд╣реИ рдЬреЛ рд▓реЗрдмрд▓ рдХрд┐рдП рдЧрдП <code>nodiscard</code> рдорд╛рди <code>nodiscard</code> ред </p><br><pre> <code class="hljs lua">enum class <span class="hljs-string"><span class="hljs-string">[[nodiscard]]</span></span> ErrorCode { Exists, PermissionDenied }; ErrorCode createDir(); /* ... */ createDir();</code> </pre> <br><p>  рдореИрдВ <code>nodiscard</code> рдХреЗ рд╕рд╛рде рдХреЛрдб рдкреНрд░рджрд╛рди рдирд╣реАрдВ <code>nodiscard</code> ред </p><br><h3 id="c17-stdoptional">  рд╕реА ++ 17 рдПрд╕рдЯреА :: рд╡реИрдХрд▓реНрдкрд┐рдХ </h3><br><p>  C ++ 17 рдореЗрдВ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>std::optional&lt;T&gt;</code></a> ред <br>  рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдЕрдм рдХреЛрдб рдХреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред </p><br><pre> <code class="hljs cpp"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; readLine(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; parseInt(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&amp; str); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; safeAdd(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addTwo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; aStr = readLine(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; bStr = readLine(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (aStr == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::nullopt || bStr == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::nullopt){ <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cerr</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Some input error"</span></span> &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; a = parseInt(*aStr); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; b = parseInt(*bStr); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!a || !b) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cerr</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Some parse error"</span></span> &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::optional&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; result = safeAdd(*a, *b); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!result) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cerr</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Integer overflow"</span></span> &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; *result &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; }</code> </pre> <br><p>  рдЖрдк рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рдЗрди-рдЖрдЙрдЯ рддрд░реНрдХ рдирд┐рдХрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдХреЛрдб рдХреНрд▓реАрдирд░ рдмрди рдЬрд╛рдПрдЧрд╛ред <br>  рд╣рд╛рд▓рд╛рдБрдХрд┐, рд╣рдо рддреНрд░реБрдЯрд┐ рдЬрд╛рдирдХрд╛рд░реА рдЦреЛ рд░рд╣реЗ рд╣реИрдВред  рдпрд╣ рдЕрд╕реНрдкрд╖реНрдЯ рд╣реЛ рдЧрдпрд╛ рдХрд┐ рдХрдм рдФрд░ рдХреНрдпрд╛ рдЧрд▓рдд рд╣реБрдЖред <br>  рдЖрдк <code>std::optional</code> рдХреЛ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВ <code>std::optional</code> рд╕рд╛рде <code>std::optional</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>std::variant&lt;ResultType, ValueType&gt;</code></a> ред <br>  рдХреЛрдб рдХрд╛ рдЕрд░реНрде <code>std::optional</code> рд╕рд╛рде рд╣реА рд╣реИ <code>std::optional</code> , рд▓реЗрдХрд┐рди рдЕрдзрд┐рдХ рдмреЛрдЭрд┐рд▓ред </p><br><h3 id="c2a-i-stdexpected">  C ++ 2a рдФрд░ std :: рдЕрдкреЗрдХреНрд╖рд┐рдд </h3><br><p>  <code>std::expected&lt;ResultType, ErrorType&gt;</code> - рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рд╢реЗрд╖ рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреНрд░рдХрд╛рд░</a> , рдпрд╣ рд╕рдВрднрд╡рддрдГ рдирд┐рдХрдЯрддрдо рдЕрдкреВрд░реНрдг рдорд╛рдирдХ рдореЗрдВ рдЖ рдЬрд╛рдПрдЧрд╛ред <br>  рдЗрд╕рдХреЗ 2 рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИрдВред </p><br><ul><li>  <code>ReusltType</code> рдЕрдкреЗрдХреНрд╖рд┐рдд рдорд╛рди рд╣реИред </li><li>  <code>ErrorType</code> - рддреНрд░реБрдЯрд┐ рдХрд╛ рдкреНрд░рдХрд╛рд░ред <br>  <code>std::expected</code> рдореЗрдВ рдЕрдкреЗрдХреНрд╖рд┐рдд рдорд╛рди рдпрд╛ рддреНрд░реБрдЯрд┐ рд╣реЛ рд╕рдХрддреА рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╣реЛрдЧрд╛: <br><pre> <code class="hljs cpp"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; ok = <span class="hljs-number"><span class="hljs-number">0</span></span>; expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&gt; notOk = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unexpected(<span class="hljs-string"><span class="hljs-string">"something wrong"</span></span>);</code> </pre> </li></ul><br><p>  рдпрд╣ рд╕рд╛рдорд╛рдиреНрдп <code>variant</code> рд╕реЗ рдХреИрд╕реЗ рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИ?  рдХреНрдпрд╛ рдЦрд╛рд╕ рд╣реИ рдЗрд╕реЗ? <br>  <code>std::expected</code> рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдиреНрдпрд╛рд╕реА рд╣реЛрдЧрд╛</a> ред <br>  рдпрд╣ <code>std::expected</code> рдкрд░ рдкрд░рд┐рдЪрд╛рд▓рди рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рд╣реИ <code>std::expected</code> рдПрдХ <code>catch_error</code> рдкрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХреА <code>std::expected</code> : <code>map</code> , <code>catch_error</code> , <code>bind</code> , <code>unwrap</code> , <code>return</code> рдФрд░ <code>then</code> ред <br>  рдЗрди рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдЪреЗрди рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдПрдХ рдЪреЗрди рдореЗрдВ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><pre> <code class="hljs markdown">getInt().map([<span class="hljs-string"></span><span class="hljs-string"></span>](<span class="hljs-link"><span class="hljs-link">int i</span></span>)return i * 2;) .map(integer<span class="hljs-emphasis"><span class="hljs-emphasis">_divide_</span></span>by<span class="hljs-emphasis"><span class="hljs-emphasis">_2) .catch_</span></span>error([](auto e) return 0; );</code> </pre> <br><p>  рдорд╛рди рд▓реЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рд▓реМрдЯрдиреЗ рд╡рд╛рд▓реЗ <code>std::expected</code> рд╕рд╛рде рдХрд╛рд░реНрдп рд╣реИрдВред </p><br><pre> <code class="hljs cpp"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::expected&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::runtime_error&gt; readLine(); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::runtime_error&gt; parseInt(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span>&amp; str); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::runtime_error&gt; safeAdd(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> a, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> b);</code> </pre> <br><p>  <strong>рдиреАрдЪреЗ рдХреЗрд╡рд▓ рдЫрджреНрдо рдХреЛрдб рд╣реИ, рдЗрд╕реЗ рдХрд┐рд╕реА рднреА рдЖрдзреБрдирд┐рдХ рд╕рдВрдХрд▓рдХ рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдордЬрдмреВрд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред</strong> <br>  рдЖрдк рд╕рд╛рдзреБрдУрдВ рдкрд░ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдП</a> рд╣рд╕реНрдХреЗрд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЛ-рд╕рд┐рдВрдЯреИрдХреНрд╕</a> рд╕реЗ рдЙрдзрд╛рд░ рд▓реЗрдиреЗ рдХрд╛ рдкреНрд░рдпрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдХреНрдпреЛрдВ рди рджреЗрдВ: </p><br><pre> <code class="hljs cpp"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::runtime_error&gt; result = <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> aStr &lt;- readLine(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> bStr &lt;- readLine(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> a &lt;- parseInt(aStr); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> b &lt;- parseInt(bStr); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> safeAdd(a, b) }</code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдЫ рд▓реЗрдЦрдХ</a> рдЗрд╕ рд╡рд╛рдХреНрдп рд░рдЪрдирд╛ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддреЗ рд╣реИрдВ: </p><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> aStr = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> readLine(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> bStr = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> readLine(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> a = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> parseInt(aStr); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> parseInt(bStr); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> result &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> safeAdd(a, b) } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::runtime_error&amp; err) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cerr</span></span> &lt;&lt; err.what() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre> <br><p>  рд╕рдВрдХрд▓рдХ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдлрд╝рдВрдХреНрд╢рди рдХреЙрд▓ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдореЗрдВ рдХреЛрдб рдХреЗ рдРрд╕реЗ рдмреНрд▓реЙрдХ рдХреЛ рдкрд░рд┐рд╡рд░реНрддрд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЕрдЧрд░ рдХреБрдЫ рдмрд┐рдВрджреБ рдкрд░ рдлрд╝рдВрдХреНрд╢рди рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдЖрддрд╛ рд╣реИ рддреЛ рдЗрд╕рдХреА рдЙрдореНрдореАрдж рдХреА рдЬрд╛рддреА рд╣реИ, рдЧрдгрдирд╛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдЯреВрдЯ рдЬрд╛рдПрдЧреАред  рд╣рд╛рдВ, рдФрд░ рдПрдХ рддреНрд░реБрдЯрд┐ рдкреНрд░рдХрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ, рдЖрдк рдорд╛рдирдХ рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рдореМрдЬреВрдж рдЕрдкрд╡рд╛рдж рдкреНрд░рдХрд╛рд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <code>std::runtime_error</code> , <code>std::out_of_range</code> , рдЖрджрд┐ред </p><br><p>  рдпрджрд┐ рдЖрдк рд╡рд╛рдХреНрдп рд░рдЪрдирд╛ рдХреЛ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдбрд┐рдЬрд╛рдЗрди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рддреЛ <code>std::expected</code> рдЖрдкрдХреЛ рд╕рд░рд▓ рдФрд░ рдХреБрд╢рд▓ рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛ред </p><br><h3 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br><p>  рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХрд╛ рдХреЛрдИ рдЖрджрд░реНрд╢ рддрд░реАрдХрд╛ рдирд╣реАрдВ рд╣реИред  рдХреБрдЫ рд╕рдордп рдкрд╣рд▓реЗ, C ++ рдореЗрдВ рдореЛрдирдбреЗрд╕ рдХреЛ рдЫреЛрдбрд╝рдХрд░ рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдХреЗ рд▓рдЧрднрдЧ рд╕рднреА рд╕рдВрднрд╡ рддрд░реАрдХреЗ рдереЗред <br>  C ++ 2a рдореЗрдВ, рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рддрд░реАрдХреЛрдВ рдХреЗ рдкреНрд░рдХрдЯ рд╣реЛрдиреЗ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рд╣реИред </p><br><h3 id="chto-pochitat-i-posmotret-po-teme">  рд╡рд┐рд╖рдп рдкрд░ рдХреНрдпрд╛ рдкрдврд╝рдирд╛ рдФрд░ рджреЗрдЦрдирд╛ рд╣реИ </h3><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкреНрд░рд╕реНрддрд╛рд╡</a> ред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">CPPCON рдХреЗ рд╕рд╛рде рдЕрдкреЗрдХреНрд╖рд┐рдд std рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рднрд╛рд╖рдг</a> ред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрдВрджреНрд░реЗрдИ рдЕрд▓реЗрдХреНрдЬреЗрдВрдбреНрд░реЗрд╕реНрдХреБ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ std :: C ++ рд░реВрд╕ рдореЗрдВ рдЕрдкреЗрдХреНрд╖рд┐рдд</a> ред </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░реЗрдбрд┐рдЯ рдкрд░ рдкреНрд░рд╕реНрддрд╛рд╡ рдХреЗ рд╣рд╛рд▓ рдХреЗ рдХрдореЛрдмреЗрд╢ рдЪрд░реНрдЪрд╛</a> ред </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi426965/">https://habr.com/ru/post/hi426965/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi426953/index.html">рдЖрд░реНрдХ рд▓рд┐рдирдХреНрд╕ рдирдореВрдирд╛ рдФрд░ рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рддрд░реАрдХреЗ</a></li>
<li><a href="../hi426957/index.html">WSGI рд╕рд░реНрд╡рд░ рдХрд╛ рдкрд░рд┐рдЪрдп: рднрд╛рдЧ рдПрдХ</a></li>
<li><a href="../hi426959/index.html">Kubernetes рдХреЛ kubespray рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ (рд╕реНрдерд╛рдиреАрдп-рднрдВрдбрд╛рд░рдг, Elasticsearch + Fluentd + Kibana, prometheus рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ)</a></li>
<li><a href="../hi426961/index.html">рдХреИрд╕реЗ Microsoft рдиреЗ C # рдХреЗ C # рдХрдВрдкрд╛рдЗрд▓рд░ рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрд╛ рдФрд░ рдЙрд╕реЗ рдЦреЛрд▓ рджрд┐рдпрд╛</a></li>
<li><a href="../hi426963/index.html">рдХреНрдпрд╛ рдлрд╝реНрд▓рдЯрд░ рдРрдкреНрд╕ рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо-рдЖрдзрд╛рд░рд┐рдд рд╡рд┐рдЬреЗрдЯ рдХрд╛ рд╕рдкрдирд╛ рджреЗрдЦрддреЗ рд╣реИрдВ?</a></li>
<li><a href="../hi426967/index.html">рдСрдирд▓рд╛рдЗрди ABAP рдХреЛрдб рдЬрдирд░реЗрдЯрд░</a></li>
<li><a href="../hi426969/index.html">рд╕рддрд░реНрдХрддрд╛ Lida: рд╕реБрд░рдХреНрд╖рд╛ рдкрд░реАрдХреНрд╖рдг рд╕реНрд╡рдЪрд╛рд▓рди</a></li>
<li><a href="../hi426971/index.html">рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ рдореЗрдВ рдирд┐рдпрддрд┐рд╡рд╛рдж</a></li>
<li><a href="../hi426973/index.html">рдХреЙрд░реНрдкреЛрд░реЗрдЯ рд╕реИрдВрдбрд╡рд┐рдЪ</a></li>
<li><a href="../hi426975/index.html">рдЬреЛрдХрд░ 2018: рдЕрд╕рдВрднрд╡ рд╕рдВрднрд╡ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>