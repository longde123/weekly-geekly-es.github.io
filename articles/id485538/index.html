<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💃🏾 📿 📕 Zabbix: memonitor semuanya secara berurutan (pada contoh Redis) 👩🏻‍🌾 💩 ❓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Zabbix adalah produk hebat untuk administrator perangkat lunak dan sistem perangkat keras yang besar. Sangat bagus sehingga dapat digunakan tidak hany...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Zabbix: memonitor semuanya secara berurutan (pada contoh Redis)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485538/"><p> <a href="https://www.zabbix.com/ru/" rel="nofollow">Zabbix</a> adalah produk hebat untuk administrator perangkat lunak dan sistem perangkat keras yang besar.  Sangat bagus sehingga dapat digunakan tidak hanya oleh bisnis besar, tetapi juga oleh bisnis menengah-kecil, dan bahkan dalam proyek <code>pet</code> .  Secara umum, saya memiliki sedikit pengalaman dengan Zabbix dan saya dapat dengan aman merekomendasikannya untuk digunakan. </p><br><p>  Benar, saya tidak bisa mengatakan bahwa saya mengerti " <em>filosofi Zabbix</em> ".  Terlepas dari dokumentasi terperinci yang luas dalam bahasa Rusia, sulit bagi saya untuk terjun ke dunia Zabbix - saya merasa bahwa para pengembang dan saya menyebut hal yang sama dengan nama yang berbeda.  Mungkin karena Zabbix dibuat oleh admin untuk admin, tetapi saya masih lebih sebagai pengembang dan pengguna. </p><br><p>  Namun, untuk menjalankan Zabbix dan memonitor parameter utama sistem komputer (prosesor, memori, dll.), Keterampilan pengguna linux biasa sudah cukup.  Ada banyak plug-in dari pengembang pihak ketiga yang memperluas kemampuan Zabbix.  Untuk kebutuhan saya, saya perlu mengkonfigurasi pemantauan server Redis.  Saya mencari-cari sedikit dalam kode plug-in yang tersedia dan, menggunakan contoh mereka, menemukan bahwa arsitektur Zabbix memungkinkan Anda untuk hanya terhubung ke pemantauan parameter sistem informasi yang dapat diekspresikan dalam bentuk numerik. </p><br><p>  Di bawah kucing - contoh plugin Zabbix dengan penjelasan saya tentang terminologi Zabbix.  Bagi sebagian orang, contoh ini akan tampak naif, tetapi bagi sebagian orang akan lebih mudah merasa nyaman dengan konsep.  Bagaimanapun, Zabbix <a href="http://irinagold.pro/na-kogo-pohozh-slon-pritcha/" rel="nofollow">cukup besar</a> untuk merasakannya dari sudut yang berbeda. </p><a name="habracut"></a><br><h1 id="bazovye-ponyatiya">  Konsep dasar </h1><br><p>  Secara singkat tentang beberapa konsep yang digunakan dalam Zabbix: <em>agen</em> , <em>item</em> , <em>pemicu</em> , <em>tindakan</em> , <em>pemberitahuan</em> , <em>templat</em> . </p><br><h2 id="server-i-agenty">  Server dan Agen </h2><br><p>  Dari sudut pandang pengguna, Zabbix dibagi menjadi dua bagian besar: server dan agen.  Server terletak di satu mesin, yang mengumpulkan dan menyimpan data statistik, dan agen di mesin-mesin dari mana data dikumpulkan: </p><br><p><img src="https://habrastorage.org/webt/22/cc/y2/22ccy2szuqjhs0eprqqxkn29-2e.png" alt="Server dan agen zabbix"></p><br><h2 id="parametry-monitoringa">  Opsi pemantauan </h2><br><p>  Kuantitas apa pun yang dapat diekspresikan dalam bentuk angka atau string disebut dalam terminologi Zabbix - elemen data (item).  Setiap elemen dikaitkan dengan <a href="https://www.zabbix.com/documentation/current/ru/manual/config/items/item/key" rel="nofollow">kunci</a> unik (nama).  Berikut ini contoh item data: </p><br><ul><li>  <strong>system.cpu.load [percpu, avg1]</strong> : 0.1167 </li><li>  <strong>system.uname</strong> : "Linux supru 4.15.0-50-generic # 54-Ubuntu SMP Senin 6 Mei 18:46:08 UTC 2019 x86_64" </li></ul><br><p>  Nilai elemen data ini (parameter pemantauan) dilampirkan ke waktu, riwayat nilai parameter disimpan dalam database server. </p><br><h2 id="sobytiya">  Acara </h2><br><p>  Ketika suatu peristiwa terjadi di Zabbix, sebuah pemicu kebakaran.  Sebagai contoh </p><br><ul><li>  <strong>{system.cpu.load [percpu, avg1] .avg (5m)}&gt; 10</strong> - nilai rata-rata parameter selama 5 menit terakhir telah melampaui "10" </li><li>  <strong>{system.uname.diff (0)}&gt; 0</strong> - nilai parameter saat ini tidak sama dengan nilai sebelumnya </li></ul><br><p>  Bahkan, pemicu adalah rumus di mana parameter pemantauan (saat ini dan disimpan) bertindak sebagai variabel, dan yang menghasilkan <code>true</code> / <code>false</code> pada output. </p><br><h2 id="deystviya-i-opovescheniya">  Tindakan dan Peringatan </h2><br><p>  Jika terjadi suatu peristiwa (pemicu), server dapat melakukan suatu tindakan.  Misalnya, kirim peringatan email ke alamat yang diberikan (" <em>Masalah: host tidak dapat dijangkau selama 5 menit</em> ").  Juga, suatu tindakan dapat dilakukan jika pemicu kembali ke keadaan semula (" <em>Diselesaikan: host tidak dapat dijangkau selama 5 menit</em> ").  Semua peristiwa (pemicu pemindahan) dicatat di sisi server. </p><br><h2 id="shablony">  Pola </h2><br><p>  Zabbix memungkinkan untuk mengonfigurasi aturan pemantauan untuk satu host, serta membuat template aturan (templat) yang dapat diterapkan ke berbagai host: </p><br><p><img src="https://habrastorage.org/webt/4t/yt/qw/4tytqw7tog1do4nsqoizzxjbglw.png" alt="templat zabbix"></p><br><p>  Contoh menunjukkan bahwa templat "Templat Aplikasi SSH Layanan" menjelaskan satu aplikasi (Aplikasi), satu parameter pemantauan (Item), satu pemicu (Pemicu).  Deskripsi untuk grafik, layar, aturan penemuan, dan skrip web juga tersedia. </p><br><h1 id="postanovka-zadachi-dlya-plagina">  Mengatur tugas untuk plugin </h1><br><h2 id="nachalnoe-polozhenie">  Posisi awal </h2><br><p>  Zabbix sendiri menawarkan <a href="https://www.zabbix.com/ru/integrations/redis" rel="nofollow">pluginnya sendiri</a> untuk memantau status Redis, tetapi pada versi server saya (4.2.8) saya tidak dapat menggunakannya (plugin untuk versi 4.4 dan lebih tinggi).  <a href="https://www.zabbix.com/ru/integrations/redis" rel="nofollow">Solusi dari</a> pihak <a href="https://www.zabbix.com/ru/integrations/redis" rel="nofollow">ketiga</a> juga ditawarkan (sekitar selusin opsi untuk berbagai versi Zabbix, hanya ada tiga yang pertama dalam gambar): </p><br><p><img src="https://habrastorage.org/webt/bv/pt/tk/bvpttkxf9lkxqn2thcnwwacutyw.png" alt="Plugin redis untuk zabbix"></p><br><p>  Masing-masing memiliki kelebihan dan kekurangan masing-masing, harus melihat ke dalam untuk memilih.  Yang terbaik, menurut pendapat saya, adalah <a href="https://github.com/Shakeeljaveed/zabbix-redis-userparamaters" rel="nofollow">plugin Shakeeljaveed / zabbix-redis-userparamaters</a> , yang terdiri dari dua file: </p><br><ul><li>  README.md </li><li>  redis-userparameter.conf </li></ul><br><p>  Saya harus bekerja sedikit "pena", tetapi pada contohnya itu menjadi sedikit lebih jelas bagaimana data dari agen masuk ke server.  Atas saran penulis <a href="https://github.com/Shakeeljaveed" rel="nofollow">Javeed Shakeel,</a> status <a href="https://github.com/Shakeeljaveed" rel="nofollow">Redis</a> direset setiap 2 menit oleh mahkota ke file <code>/tmp/redismetric</code> : </p><br><pre> <code class="plaintext hljs">*/2 * * * * /usr/bin/redis-cli info &gt; /tmp/redismetric</code> </pre> <br><p>  Dan kemudian setiap parameter pemantauan diekstraksi oleh agen dari file <code>/tmp/redismetric</code> menggunakan alat-alat sistem operasi itu sendiri.  Instruksi untuk ini ditempatkan dalam konfigurasi agen Zabbix <code>/etc/zabbix/zabbix_agent.conf.d/userparameter_redis.conf</code> .  Sebagai contoh, ini adalah bagaimana instruksi untuk mengambil parameter <code>used_memory</code> (penggunaan memori oleh server Redis) terlihat seperti ini: </p><br><pre> <code class="plaintext hljs">UserParameter=used_memory,grep -w 'used_memory' /tmp/redismetric | cut -d: -f2</code> </pre> <br><p>  Yaitu, dalam file <code>/tmp/redismetric</code> dengan output <code>redis-cli INFO</code> , string ( <code>grep -w ...</code> ) dicari oleh kunci <code>used_memory</code> </p><br><pre> <code class="plaintext hljs">used_memory:7153216</code> </pre> <br><p>  yang kemudian dibagi menjadi kolom oleh pemisah ":" ( <code>cut -d: -f2</code> ).  Pada output, agen menerima nomor <code>7153216</code> dan menugaskannya ke parameter <code>used_memory</code> . </p><br><p>  Tetap mengkonfigurasi server melalui antarmuka berbasis web sehingga secara berkala mengirim permintaan ke agen untuk menerima data menggunakan parameter <code>used_memory</code> , setelah data mulai <code>used_memory</code> ke server, disimpan dalam database, Anda dapat menggunakannya untuk membuat grafik dan membuat pemicu yang merespons perubahan pada parameter ini. </p><br><h2 id="cel">  Tujuan </h2><br><p>  Tugas memantau status sistem apa pun tidak hanya pengumpulan statistik, tetapi juga peringatan tentang terjadinya situasi yang membutuhkan intervensi manusia.  Karena saya bekerja dengan Redis sebagai pengguna yang sangat pemula, saya harus mencari informasi tentang parameter "kesehatan" apa yang harus diperhatikan dan apa artinya.  Artikel yang paling layak adalah " <a href="https://scalegrid.io/blog/6-crucial-redis-monitoring-metrics/" rel="nofollow">6 Metrik Pemantauan Redis Krusial yang Perlu Anda Awasi</a> ."  Setelah menganalisisnya, saya sampai pada kesimpulan bahwa "untuk kebahagiaan lengkap" saya perlu mengumpulkan data untuk mendeteksi peristiwa berikut: </p><br><ul><li>  Fragmentasi memori: used_memory_rss / used_memory&gt; 1.5 </li><li>  Rasio hit cache rendah: (keyspace_hits) / (keyspace_hits + keyspace_misses) &lt;0.8 </li><li>  Koneksi yang ditolak: ditolak_connections&gt; 0 </li><li>  Kunci yang diusir: evicted_keys&gt; 0 </li></ul><br><p>  Saya juga ingin mengumpulkan statistik tentang parameter tambahan (versi Redis, waktu aktif, dll.).  Secara umum, memiliki gagasan umum tentang bagaimana data dikumpulkan oleh agen dan dikirim ke server, Wishlist dapat sangat terbatas.  Hasilnya, kami mendapat daftar parameter untuk pemantauan dari 12 posisi. </p><br><h1 id="sozdanie-sobstvennogo-plagina">  Buat plugin Anda sendiri </h1><br><h2 id="parametry-monitoringa-1">  Opsi pemantauan </h2><br><p>  Plugin yang saya analisis mengasumsikan eksekusi perintah terpisah untuk mendapatkan parameter terpisah (data item, item): </p><br><pre> <code class="plaintext hljs">grep -w 'used_memory' /tmp/redismetric | cut -d: -f2</code> </pre> <br><p>  Artinya, untuk mendapatkan data pada 12 parameter, agen harus mengeksekusi berbagai set perintah 12 kali.  Dan jika saya perlu memonitor parameter yang sulit untuk diekstraksi dengan serangkaian perintah dan perlu menulis skrip shell terpisah atau program lengkap?  Untuk "Daftar Keinginan" seperti itu, Zabbix menawarkan varian dengan elemen data dependen.  Esensinya adalah bahwa di sisi agen, skrip membentuk kumpulan data (misalnya, dalam format JSON), yang ditransmisikan ke server sebagai parameter string.  Kemudian, di sisi server, data yang diterima diuraikan dan parameter elementer individu diekstraksi dari mereka. </p><br><h3 id="osnovnoy-element-dannyh">  Item data utama </h3><br><p>  Saya menjelaskan <code>redis.info</code> data <code>redis.info</code> utama <code>redis.info</code> tipe string dengan periode pembaruan 1 menit, tanpa menyimpan riwayat perubahan: </p><br><p><img src="https://habrastorage.org/webt/hz/_m/tn/hz_mtnfj7n2uqzbssnnsdhtpgq4.png" alt="item dasar"></p><br><p>  Agaknya, JSON berikut harus dihasilkan di sisi agen: </p><br><pre> <code class="plaintext hljs">{ "version": "4.0.9", "uptime": 1897336, "used_memory": 1054943416, "used_memory_rss": 1138159616, "keyspace_hits": 75810274, "keyspace_misses": 13545949, "connected_clients": 15, "rdb_last_save_time": 1580126954, "total_connections_received": 1258614, "rejected_connections": 0, "expired_keys": 60270, "evicted_keys": 0 }</code> </pre> <br><p>  setelah itu teks ini harus <code>redis.info</code> ke server sebagai <code>redis.info</code> data <code>redis.info</code> , tetapi tidak disimpan, tetapi berfungsi sebagai basis untuk elemen data lainnya (parameter pemantauan). </p><br><h3 id="zavisimyy-element-dannyh">  Item Data Tanggungan </h3><br><p>  Parameter uji <code>redis.info.version</code> bergantung pada <code>redis.info</code> dan menyimpan nilainya dalam database selama 90 hari.  Frekuensi pemantauan parameter tergantung pada elemen dasar ( <code>redis.info</code> ): </p><br><p><img src="https://habrastorage.org/webt/eu/3u/jy/eu3ujyhzzyful-jrh8ceyqxsoz4.png" alt="item tergantung (basis)"></p><br><p>  Nilai parameter <code>redis.info.version</code> diambil dari nilai <code>redis.info</code> menggunakan instruksi JSONPath: </p><br><p><img src="https://habrastorage.org/webt/pn/3j/ad/pn3jad7k78sxnpq7pl1ubne9btk.png" alt="item tergantung (preprocess)"></p><br><p>  Skema serupa menjelaskan elemen-elemen data dependen yang tersisa (parameter pemantauan), yang dikirim dalam bentuk JSON.  Berikut adalah contoh deskripsi parameter numerik <code>redis.info.used_memory</code> : </p><br><p><img src="https://habrastorage.org/webt/rh/_t/d8/rh_td8dczrfqa2ejsihinaobiho.png" alt="item nomor dependen (basis)"></p><br><p>  Semuanya cukup transparan, dengan pengecualian <code>Trend storage period</code> <code>Units</code> dan <code>Trend storage period</code> .  Saya tidak mengerti poin kedua, saya membiarkannya secara default, dan unit pengukuran dijelaskan dalam <a href="https://www.zabbix.com/documentation/current/ru/manual/appendix/suffixes" rel="nofollow">dokumentasi</a> .  Dalam hal ini, nilai <code>redis.info.used_memory</code> diukur dalam byte dan diminimalkan ke kilo / mega / giga / ...- byte di antarmuka web. </p><br><p>  Rumus untuk mengekstraksi nilai dari JSON adalah: <code>JSONPath = $.used_memory</code> </p><br><h3 id="vychislyaemyy-element-dannyh">  Item Data yang Dihitung </h3><br><p>  Untuk menghitung fragmentasi memori, hubungan <code>used_memory_rss</code> / <code>used_memory</code> digunakan, dan atas dasar pemicu ditentukan bahwa akan menyala ketika rasio melebihi 1,5.  Zabbix memiliki tipe elemen data yang dikomputasi: </p><br><p><img src="https://habrastorage.org/webt/iy/sd/4g/iysd4g2bqofdmwrvp9cpbguzvzo.png" alt="item kalk"></p><br><p>  Nilai untuk parameter <code>redis.info.used_memory_ratio</code> dihitung setiap menit berdasarkan nilai terakhir dari dua parameter lainnya ( <code>redis.info.used_memory_rss</code> dan <code>redis.info.used_memory</code> ), disimpan dalam database selama 90 hari, dll. </p><br><h2 id="triggery">  Pemicu </h2><br><p>  Berikut adalah contoh pemicu yang menyala ketika memori terlalu terfragmentasi: </p><br><p><img src="https://habrastorage.org/webt/bl/81/oj/bl81ojowbfvanebjn9nefzoh29w.png"></p><br><p>  Tidak ada yang aneh, kecuali untuk format ekspresi yang digunakan dalam rumus perubahan status pemicu.  Zabbix memiliki perancang formulir, Anda dapat menggunakannya atau merujuk ke <a href="https://www.zabbix.com/documentation/current/ru/manual/config/triggers/expression" rel="nofollow">dokumentasi</a> / contoh (daftar pemicu tersedia melalui antarmuka web di " <em>Configuration / Templates / $ {TemplateName} / Triggers</em> "). </p><br><p>  Pemicu dapat didasarkan pada elemen data apa saja (item), terlepas dari jenisnya (utama, dependen, dihitung). </p><br><h2 id="nastroyka-agenta">  Pengaturan agen </h2><br><h3 id="generaciya-jsona">  Generasi JSON </h3><br><p>  Untuk mendapatkan nilai parameter pemantauan dan pembentukan JSON, saya menggunakan skrip shell ini: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ## =========================================================================== # Script to generate Redis monitoring data in JSON format # for 'zabbix-agent'. ## =========================================================================== # collect working variables/data BIN_REDIS=$(whereis -b redis-cli | cut -d" " -f2) # /usr/bin/redis-cli DATA_INFO=$(${BIN_REDIS} INFO | tr -d '\r') # get info and remove trailing '\r' from output ## # Extract stats and save it into env. vars. ## # find lines with 'grep', cut second field after ":" and put it into env. variable: ITEM_VERSION=$(grep "^redis_version:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_UPTIME=$(grep "^uptime_in_seconds:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_USED_MEMORY=$(grep "^used_memory:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_USED_MEMORY_RSS=$(grep "^used_memory_rss:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_KEYSPACE_HITS=$(grep "^keyspace_hits:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_KEYSPACE_MISSES=$(grep "^keyspace_misses:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_CONNECTED_CLIENTS=$(grep "^connected_clients:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_RDB_LAST_SAVE_TIME=$(grep "^rdb_last_save_time:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_TOTAL_CONNECTIONS_RECEIVED=$(grep "^total_connections_received:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_REJECTED_CONNECTIONS=$(grep "^rejected_connections:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_EXPIRED_KEYS=$(grep "^expired_keys:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) ITEM_EVICTED_KEYS=$(grep "^evicted_keys:" &lt;&lt;&lt;"${DATA_INFO}" | cut -d: -f2) # compose output JSON for Zabbix server: echo -n "{" echo -n "\"version\": \"${ITEM_VERSION}\"," echo -n "\"uptime\": ${ITEM_UPTIME}," echo -n "\"used_memory\": ${ITEM_USED_MEMORY}," echo -n "\"used_memory_rss\": ${ITEM_USED_MEMORY_RSS}," echo -n "\"keyspace_hits\": ${ITEM_KEYSPACE_HITS}," echo -n "\"keyspace_misses\": ${ITEM_KEYSPACE_MISSES}," echo -n "\"connected_clients\": ${ITEM_CONNECTED_CLIENTS}," echo -n "\"rdb_last_save_time\": ${ITEM_RDB_LAST_SAVE_TIME}," echo -n "\"total_connections_received\": ${ITEM_TOTAL_CONNECTIONS_RECEIVED}," echo -n "\"rejected_connections\": ${ITEM_REJECTED_CONNECTIONS}," echo -n "\"expired_keys\": ${ITEM_EXPIRED_KEYS}," echo -n "\"evicted_keys\": ${ITEM_EVICTED_KEYS}" echo -n "}"</span></span></code> </pre> <br><p>  Saya menempatkan skrip ini di file <code>/var/lib/zabbix/user_parameter/redis/get_info.sh</code> di server dengan Redis, di mana agen Zabbix sudah diinstal.  Pengguna di mana agen Zabbix <code>zabbix</code> (biasanya <code>zabbix</code> ) harus memiliki izin untuk mengeksekusi file <code>get_info.sh</code> . </p><br><h2 id="fayl-userparameter_xxxconf">  File <code>userparameter_XXX.conf</code> </h2><br><p>  Di sisi agen, parameter pemantauan tambahan <code>userparameter_*.conf</code> dalam file <code>userparameter_*.conf</code> di direktori <code>userparameter_*.conf</code> .  Oleh karena itu, agar agen mengetahui bagaimana perlu mengumpulkan data pada parameter <code>redis.info</code> , saya membuat file <code>/etc/zabbix/zabbix_agentd.d/userparameter_redis.conf</code> dengan konten berikut: </p><br><pre> <code class="plaintext hljs">UserParameter=redis.info,/var/lib/zabbix/user_parameter/redis/get_info.sh</code> </pre> <br><p>  Yaitu, untuk mendapatkan data pada parameter <code>redis.info</code> agen harus menjalankan skrip <code>/var/lib/zabbix/user_parameter/redis/get_info.sh</code> dan mentransfer hasil eksekusi ke server. </p><br><p>  Setelah memulai ulang agen Zabbix ( <code>sudo service zabbix-agent restart</code> ), dimungkinkan untuk mengumpulkan data untuk parameter <code>redis.info</code> dan mengirimkannya ke server. </p><br><h1 id="rezyume">  Ringkasan </h1><br><p>  Memahami Zabbix datang kepada saya (dan masih datang) cukup sulit.  Namun demikian, saya menganggapnya sebagai alat yang hebat, terutama setelah kesederhanaan menambahkan parameter pemantauan saya sendiri (elemen data) terbuka untuk saya.  Secara umum, cukup menambahkan satu file ke server dengan agen ( <code>userparameter_XXX.conf</code> ) dengan perintah shell untuk mengumpulkan data dan mengkonfigurasi server Zabbix untuk menerima data ini melalui antarmuka web.  Dan itu saja - Anda dapat mengumpulkan data, membuat grafik, menganalisis perubahan, dan membuat pemicu yang merespons perubahan ini. </p><br><p>  Kode untuk templat, file <code>userparameter_redis.conf</code> dan skrip <code>get_info.sh</code> dapat dilihat di proyek <a href="https://github.com/flancer32/zabbix_plugin_redis/tree/habr" rel="nofollow">flancer32 / zabbix_plugin_redis</a> . </p><br><p>  Terima kasih kepada semua orang yang membaca sampai akhir, dan terutama kepada mereka yang menemukan sesuatu yang bermanfaat untuk diri mereka sendiri dalam publikasi. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id485538/">https://habr.com/ru/post/id485538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id485528/index.html">Cara Menyelesaikan Proyek Pengembangan Perangkat Lunak dengan Cara yang Benar</a></li>
<li><a href="../id485530/index.html">Pembelajaran Terpandu</a></li>
<li><a href="../id485532/index.html">Panduan Wawancara untuk para programmer yang tidak memahaminya</a></li>
<li><a href="../id485534/index.html">HighLoad ++, Mikhail Makurov (Intersvyaz): pengalaman dalam membuat layanan Zabbix cadangan dan berkerumun</a></li>
<li><a href="../id485536/index.html">Apakah mungkin untuk meretas pesawat - 2</a></li>
<li><a href="../id485542/index.html">Tambahkan grafik ke Notion</a></li>
<li><a href="../id485544/index.html">Catur sebagai sistem yang dinamis</a></li>
<li><a href="../id485546/index.html">Kiamat akan datang</a></li>
<li><a href="../id485548/index.html">SwiftUI di rak</a></li>
<li><a href="../id485550/index.html">Apakah ada kehidupan di luar Moscow Ring Road? Bagaimana kami mencari dan menyiapkan pengembang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>