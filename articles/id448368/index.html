<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’… ğŸš™ ğŸ‘ SQL: tugas waktu kerja ğŸ˜‘ ğŸ’š ğŸŒº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Radio SQL kembali mengudara! Uleni ganglia, sebarkan pseudopodia (atau sebaliknya?) Dan dengarkan gelombang gravitasi kita! 


 Terakhir kali, s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SQL: tugas waktu kerja</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/postgrespro/blog/448368/">  Halo, Radio SQL kembali mengudara!  Uleni ganglia, sebarkan pseudopodia (atau sebaliknya?) Dan dengarkan gelombang gravitasi kita! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rc/a6/z4/rca6z4cduxlps2le_c4l_3rwnrg.png"></div><a name="habracut"></a><br>  Terakhir kali, saya hampir dikucilkan untuk parsing ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://habr.com/en/post/359064/</a> ) masalah Olympiad SQL, konon itu tidak cukup dekat dengan kehidupan.  Seolah-olah tag "pemrograman tidak normal" dan "Olimpiade" tidak berbicara sendiri.  Tapi jelas tidak ada yang membaca tag!  Namun demikian, saya akan melanjutkan topik tugas parsing dalam bahasa pemrograman SQL yang indah.  Karena cakar (gatal). <br><br>  Hari ini kita dihadapkan dengan tugas yang secara eksklusif mengancam jiwa, dan bahkan tugas yang praktis.  Saya berlari ke dalamnya, mencoba menghitung kinerja SLA berdasarkan permintaan dari pengguna yang penuh kasih.  Inti dari masalah awal adalah sebagai berikut: perlu untuk menghitung durasi pekerjaan untuk setiap aplikasi dan membandingkan dengan apa yang kami janjikan.  Semuanya akan baik-baik saja, tetapi waktu dalam kewajiban dinyatakan bekerja, dan dari perubahan status dalam aplikasi saya hanya bisa mendapatkan kalender.  Dan inilah sebuah pemikiran!  Ini dia, tugas!  Tidak terlalu rumit, tetapi juga tidak sepenuhnya sepele.  Hanya untuk meregangkan bagian pusat sistem saraf otonom Anda, membuatnya lebih simpatik! <br><br>  Jadi, saya nyatakan kondisinya. <br><br>  Ada beberapa interval waktu yang ditentukan oleh tanggal-waktu awal dan akhir (contoh dalam sintaks PostgreSQL): <br><br><pre><code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> periods(<span class="hljs-keyword"><span class="hljs-keyword">id</span></span>, start_time, stop_time) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">values</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">'2019-03-29 07:00:00'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>, <span class="hljs-string"><span class="hljs-string">'2019-04-08 14:00:00'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>), (<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'2019-04-10 07:00:00'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>, <span class="hljs-string"><span class="hljs-string">'2019-04-10 20:00:00'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>), (<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-string"><span class="hljs-string">'2019-04-11 12:00:00'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>, <span class="hljs-string"><span class="hljs-string">'2019-04-12 16:07:12'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>), (<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">'2018-12-28 12:00:00'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>, <span class="hljs-string"><span class="hljs-string">'2019-01-16 16:00:00'</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">timestamp</span></span>) )</code> </pre> <br>  Diperlukan dalam satu query SQL (c) untuk menghitung durasi setiap interval dalam jam kerja.  Kami percaya bahwa kami bekerja pada hari kerja dari Senin hingga Jumat, jam kerja selalu dari 10:00 hingga 19:00.  Selain itu, sesuai dengan kalender produksi Federasi Rusia, ada sejumlah hari libur resmi yang bukan hari kerja, dan beberapa hari libur, sebaliknya, adalah hari kerja karena penundaan hari libur yang sama.  Pemendekan hari pra-liburan tidak diperlukan, kami menganggapnya lengkap.  Karena liburan bervariasi dari tahun ke tahun, yaitu, ditetapkan oleh daftar eksplisit, kami akan membatasi diri hanya untuk tanggal dari 2018 dan 2019.  Saya yakin, jika perlu, solusinya dapat dengan mudah ditambahkan. <br><br>  Perlu menambahkan satu kolom dengan durasi dalam jam kerja ke periode awal dari <i>periode</i> .  Inilah hasilnya: <br><br><pre> <code class="sql hljs"> id | start_time | stop_time | work_hrs <span class="hljs-comment"><span class="hljs-comment">----+---------------------+---------------------+---------- 1 | 2019-03-29 07:00:00 | 2019-04-08 14:00:00 | 58:00:00 2 | 2019-04-10 07:00:00 | 2019-04-10 20:00:00 | 09:00:00 3 | 2019-04-11 12:00:00 | 2019-04-12 16:07:12 | 13:07:12 4 | 2018-12-28 12:00:00 | 2019-01-16 16:00:00 | 67:00:00</span></span></code> </pre> <br>  Kami tidak memeriksa data awal untuk kebenaran, kami selalu mempertimbangkan <i>start_time &lt;= stop_time</i> . <br><br>  Konstruk SQL dialek khusus PostgreSQL dapat digunakan, tetapi tidak disalahgunakan.  Agar benar-benar tepat, saya menambahkan bahwa kueri harus dijalankan pada PostgreSQL versi 10 atau lebih baru. <br><br>  Dalam sebulan akan ada analisis tugas.  Saya tidak mengambil keputusan apa pun sehingga ada insentif untuk menyelesaikannya sendiri.  Kami mohon - tempatkan kode di komentar di bawah spoiler! <br><br>  <b>Terakhir tapi tidak kalah pentingnya</b> .  Jika saya sudah berhasil memposting artikel ini di blog perusahaan Postgres Professional, kami akan menggunakan beberapa barang korporat: untuk solusi paling menarik untuk masalah ini, kami akan memainkan perjalanan gratis ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PGConf.Russia 2020</a> .  Kriteria minat akan menjadi milik saya pribadi, ditambah kriteria rekan kerja yang saya anggap perlu berkonsultasi.  Semoga beruntung <br><br>  <b>UPDATE!</b>  Sesuatu yang saya lihat bahwa jam kerja dirasakan karena alasan tertentu secara eksklusif tanpa menit kerja.  Jangan lupa menit!  Saya menyesuaikan interval awal dan jawaban yang diharapkan untuk menekankan ketersediaan menit. <br><br>  Ringkasan <b>UPDATE2</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://habr.com/en/company/postgrespro/blog/457722/</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id448368/">https://habr.com/ru/post/id448368/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id448358/index.html">Kami mendengarkan musik dan ceramah dari Youtube dengan layar ponsel cerdas yang terkunci dan tanpa iklan menggunakan Telegram</a></li>
<li><a href="../id448360/index.html">Backdoor kecil di Flask atau cara mengontrol komputer di jaringan lokal</a></li>
<li><a href="../id448362/index.html">Saya pikir saya perlu mengirim desainer ke ...</a></li>
<li><a href="../id448364/index.html">Stormglass - prediktor kristal</a></li>
<li><a href="../id448366/index.html">Rust 1.34 Rilis</a></li>
<li><a href="../id448372/index.html">Berhentilah menolak pencari kerja yang hebat dengan pertanyaan salah Anda.</a></li>
<li><a href="../id448374/index.html">Bukti baru aktivitas gunung berapi, yang menyebabkan kepunahan paling masif dalam sejarah, diterima.</a></li>
<li><a href="../id448376/index.html">Matematika memberi tahu sel apa yang seharusnya</a></li>
<li><a href="../id448378/index.html">Keamanan DHCP di Windows 10: Menjelajahi Kerentanan Kritis CVE-2019-0726</a></li>
<li><a href="../id448382/index.html">Bagaimana kami mengevaluasi kualitas dokumentasi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>