<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚷 😑 🎎 Gatsby.js secara detail 👟 🤹🏾 🐎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seperti yang Anda ketahui, Anda tidak bisa menggunakan beberapa pelat ketel sendirian, jadi Anda harus mempelajari teknologi apa pun untuk mempelajari...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gatsby.js secara detail</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442298/"><p><img src="https://habrastorage.org/webt/05/2c/ll/052cllvfmcuw_rru5rhjwhxxqem.jpeg"></p><br><p>  Seperti yang Anda ketahui, Anda tidak bisa menggunakan beberapa pelat ketel sendirian, jadi Anda harus mempelajari teknologi apa pun untuk mempelajari cara menulis sesuatu yang bermanfaat.  Artikel ini membahas detail <strong>Gatsby.js</strong> , yang pengetahuannya memungkinkan Anda membuat dan mengelola situs web dan blog yang kompleks. </p><a name="habracut"></a><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Artikel sebelumnya</a> tentang cara membuat dan menerbitkan blog pribadi menggunakan JAM-stack </blockquote><p>  Topik yang dibahas di bawah ini: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Struktur dan perutean halaman</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Komponen, Templat, dan Interaksi Mereka</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Bekerja dengan data</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Plugin</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Penataan gaya aplikasi</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Optimasi SEO menggunakan helm reaksi</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pengaturan PWA</a> </li></ul><br><h2 id="podgotovka">  Persiapan </h2><br><div class="spoiler">  <b class="spoiler_title">Instal Gatsby di PC</b> <div class="spoiler_text"><pre><code class="bash hljs">yarn global add gatsby-cli</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Mengkloning Proyek Minimal</b> <div class="spoiler_text"><pre> <code class="bash hljs"> npx gatsby new gatsby-tutorial https://github.com/gatsbyjs/gatsby-starter-hello-world <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> gatsby-tutorial</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Inisialisasi Repositori</b> <div class="spoiler_text"><pre> <code class="bash hljs"> git init git add . git commit -m <span class="hljs-string"><span class="hljs-string">"init commit"</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">Pemeriksaan Kesehatan</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> yarn start</code> </pre> <br><p>  Jika tidak ada kesalahan di konsol, dan di browser di sepanjang jalan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: // localhost: 8000 Anda</a> melihat "Halo dunia!"  itu berarti semuanya berfungsi dengan baik.  Anda dapat mencoba mengubah konten file <em>/src/pages/index.js</em> untuk memeriksa hot-reload. </p></div></div><br><h2 id="struktura-stranic-i-routing">  Struktur dan perutean halaman </h2><br><p>  Untuk membuat halaman di Gatsby, cukup tempatkan file baru di folder <em>/ src / pages</em> dan itu akan dikompilasi ke halaman HTML terpisah.  <strong>Penting untuk dicatat bahwa jalur ke halaman ini akan sesuai dengan jalur aktual dengan nama</strong> .  Misalnya, tambahkan beberapa halaman lagi: </p><br><pre> <code class="plaintext hljs">src └── pages ├── about.js ├── index.js └── tutorial ├── part-four.js ├── part-one.js ├── part-three.js ├── part-two.js └── part-zero.js</code> </pre><br><p>  Konten belum penting, sehingga teks apa pun dapat digunakan untuk membedakan antar halaman. </p><br><pre> <code class="plaintext hljs">import React from "react"; export default () =&gt; &lt;div&gt;Welcome to tutorial/part-one&lt;/div&gt;;</code> </pre> <br><p>  Periksa di browser: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: // localhost: 8000 / tutorial / bagian-satu</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: // localhost: 8000 / about</a> </li></ul><br><p>  Dengan cara ini, saat menyusun file, Anda dapat segera menyelesaikan masalah perutean. </p><br><blockquote>  Ada juga <strong>API createPage</strong> khusus yang <strong>dengannya</strong> Anda dapat lebih fleksibel mengontrol jalur dan nama halaman, tetapi untuk mengatasinya kita memerlukan pemahaman tentang operasi data di Gatsby, jadi kami akan mempertimbangkannya sedikit lebih jauh dalam artikel. </blockquote><p>  Gabungkan halaman yang dibuat menggunakan tautan, untuk ini kami menggunakan komponen <code>&lt;Link /&gt;</code> dari paket Gatsby, yang dibuat khusus untuk navigasi internal.  Untuk semua tautan eksternal, gunakan tag <code>&lt;a&gt;</code> biasa. </p><br><p>  <em>/src/pages/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link } from "gatsby"; export default () =&gt; ( &lt;div&gt; &lt;ul&gt; &lt;li&gt; &lt;Link to="/about"&gt;about&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-zero"&gt;Part #0&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-one"&gt;Part #1&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-two"&gt;Part #2&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-three"&gt;Part #3&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-four"&gt;Part #4&lt;/Link&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; );</code> </pre> <br><blockquote>  <code>&lt;Link&gt;</code> bawah tenda memiliki mekanisme yang sangat rumit untuk mengoptimalkan pemuatan halaman dan karenanya digunakan alih-alih <code>&lt;a&gt;</code> untuk menavigasi situs.  Rincian lebih lanjut dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </blockquote><p><img src="https://habrastorage.org/webt/no/ev/fj/noevfjkjdbel6tonxughcn6mkfq.gif" alt="navigasi"></p><br><p>  Halaman dibuat, tautan ditambahkan, ternyata navigasi selesai. </p><br><h2 id="komponenty-shablony-i-ih-vzaimodeystvie">  Komponen, Templat, dan Interaksi Mereka </h2><br><p>  Seperti yang Anda ketahui, dalam proyek apa pun selalu ada elemen berulang, untuk situs web itu adalah header, footer, bilah navigasi.  Selain itu, halaman, apa pun kontennya, dibuat menurut struktur tertentu, dan karena <strong>Gatsby</strong> adalah kompiler untuk <strong>React</strong> , pendekatan komponen yang sama digunakan untuk menyelesaikan masalah ini. </p><br><p>  Buat komponen untuk header dan panel navigasi: </p><br><p>  <em>/src/components/header.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link } from "gatsby"; /** *         *  ,     React-. *      ,    *  " ".     *    ""  GraphQL  gatsby- */ import logoSrc from "../images/logo.png"; export default () =&gt; ( &lt;header&gt; &lt;Link to="/"&gt; &lt;img src={logoSrc} alt="logo" width="60px" height="60px" /&gt; &lt;/Link&gt; That is header &lt;/header&gt; );</code> </pre> <br><p>  <em>/src/components/sidebar.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link } from "gatsby"; export default () =&gt; ( &lt;div&gt; &lt;ul&gt; &lt;li&gt; &lt;Link to="/about"&gt;about&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-zero"&gt;Part #0&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-one"&gt;Part #1&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-two"&gt;Part #2&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-three"&gt;Part #3&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-four"&gt;Part #4&lt;/Link&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; );</code> </pre> <br><p>  dan menambahkannya ke <em>/src/pages/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import Header from "../components/header"; import Sidebar from "../components/sidebar"; export default () =&gt; ( &lt;div&gt; &lt;Header /&gt; &lt;Sidebar /&gt; &lt;h1&gt;Index page&lt;/h1&gt; &lt;/div&gt; );</code> </pre> <br><p>  Kami memeriksa: </p><br><p><img src="https://habrastorage.org/webt/bg/l6/jn/bgl6jndogi4j0qzvm9q0jvsiglk.jpeg" alt="index_page"></p><br><p>  Semuanya berfungsi, tetapi kita perlu mengimpor Header dan Bilah Samping di setiap halaman secara terpisah, yang sangat tidak nyaman, dan untuk mengatasi masalah ini cukup membuat komponen tata letak dan membungkus setiap halaman dengannya. </p><br><blockquote>  Tata letak Gatsby == bereaksi wadah <br>  <em>ya, itu bukan kesetaraan yang ketat, karena "hampir" merupakan hal yang sama</em> </blockquote><p>  <em>/src/components/layout.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import Header from "./header"; import Sidebar from "./sidebar"; export default ({ children }) =&gt; ( &lt;&gt; &lt;Header /&gt; &lt;div style={{ margin: `0 auto`, maxWidth: 650, backgroundColor: `#eeeeee` }} &gt; &lt;Sidebar /&gt; {children} &lt;/div&gt; &lt;/&gt; );</code> </pre> <br><p>  <em>/src/pages/index.js</em> (dan semua halaman lainnya) </p><br><pre> <code class="plaintext hljs">import React from "react"; import Layout from "../components/layout"; export default () =&gt; ( &lt;Layout&gt; &lt;h1&gt;Index page&lt;/h1&gt; &lt;/Layout&gt; );</code> </pre> <br><p>  Selesai, lihat browser: </p><br><p><img src="https://habrastorage.org/webt/9p/9v/wo/9p9vwogkf2px--00mtzbgz2ke64.gif" alt="tata letak"></p><br><blockquote>  Mengapa proyek semua nama file dengan huruf kecil?  Untuk memulainya, mari kita tentukan bahwa namespace untuk <strong>React</strong> berasal dari fakta bahwa "setiap file adalah kelas, dan kelas selalu menggunakan huruf kapital."  Di <strong>Gatsby,</strong> file masih mengandung kelas, tetapi ada satu "tetapi" - "setiap file adalah halaman potensial, dan namanya adalah URL ke halaman ini".  Komunitas sampai pada kesimpulan bahwa tautan seperti <code>http://domain.com/User/Settings</code> tidak <em>comme-il-faut</em> dan disetujui oleh kasus kebab untuk nama file. </blockquote><br><div class="spoiler">  <b class="spoiler_title">Struktur file</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> src ├── components │ ├── header.js │ ├── layout.js │ └── sidebar.js ├── images │ └── logo.png └── pages ├── about.js ├── index.js └── tutorial ├── part-eight.js ├── part-five.js ├── part-four.js ├── part-one.js ├── part-seven.js ├── part-six.js ├── part-three.js ├── part-two.js └── part-zero.js</code> </pre> </div></div><br><h2 id="rabota-s-dannymi">  Bekerja dengan data </h2><br><p>  Setelah struktur situs siap, Anda dapat melanjutkan ke pengisian konten.  Pendekatan "hardcode" klasik tidak sesuai dengan pembuat tumpukan JAM, serta "render konten dari permintaan AJAX" dan oleh karena itu mereka menyarankan mengisi situs dengan konten pada waktu kompilasi.  Dalam kasus <strong>Gatsby</strong> , <strong>GraphQL</strong> bertanggung jawab untuk ini, yang memungkinkan Anda untuk bekerja dengan nyaman dengan aliran data dari sumber apa pun. </p><br><blockquote>  Singkatnya, mustahil untuk berbicara tentang GraphQL, jadi disarankan untuk mempelajarinya sendiri atau menunggu artikel saya berikutnya.  Anda dapat membaca lebih lanjut tentang bekerja dengan GraphQL di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . </blockquote><p>  Untuk bekerja dengan <strong>GraphQL</strong> , dari versi kedua, paket <code>gatsby</code> komponen <code>gatsby</code> yang dapat digunakan baik pada halaman maupun dalam komponen sederhana, dan ini adalah perbedaan utamanya dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kueri</a> pendahulunya - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman</a> .  Sejauh ini, situs kami tidak terhubung ke sumber data apa pun, jadi mari kita coba menampilkan halaman metadata, misalnya, dan kemudian beralih ke hal-hal yang lebih kompleks. </p><br><p>  Untuk membangun <code>query</code> Anda harus membuka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http: // localhost: 8000 / ___ graphql</a> , dan menggunakan bilah sisi dengan dokumentasi untuk menemukan data yang tersedia tentang situs, dan jangan lupa tentang pelengkapan otomatis. </p><br><p><img src="https://habrastorage.org/webt/qw/im/yd/qwimydi9eummj2mlkdpuzxdlg_0.gif" alt="graphql"></p><br><p>  <em>/src/components/sidebar.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; export default () =&gt; ( &lt;StaticQuery query={graphql` { allSitePage { edges { node { id path } } } } `} render={({ allSitePage: { edges } }) =&gt; ( &lt;ul&gt; {edges.map(({ node: { id, path } }) =&gt; ( &lt;li key={id}&gt; &lt;Link to={path}&gt;{id}&lt;/Link&gt; &lt;/li&gt; ))} &lt;/ul&gt; )} /&gt; );</code> </pre> <br><p>  Sekarang, menggunakan <code>query</code> kami mendapatkan data tentang halaman yang kami render di panel navigasi, dan kami tidak perlu khawatir tentang fakta bahwa tautan tidak akan cocok dengan namanya, karena semua data dikumpulkan secara otomatis. </p><br><p><img src="https://habrastorage.org/webt/nc/pk/6l/ncpk6l8hirx9guim5am6ikgpfvo.jpeg" alt="queried_navigation_panel"></p><br><p>  Sebenarnya, ini semua data yang bisa ada di situs kami tanpa menggunakan plug-in pihak ketiga dan tanpa "hardcode" lama yang baik, jadi kami dengan lancar beralih ke topik berikutnya dari artikel kami - plugin. </p><br><h2 id="plaginy">  Plugin </h2><br><p>  Pada intinya, Gatsby adalah kompiler dengan banyak barang, yang merupakan plugin.  Dengan menggunakannya, Anda dapat menyesuaikan pemrosesan file tertentu, tipe data, dan berbagai format. </p><br><p>  Buat file <em>/gatsby-config.js</em> di tingkat root aplikasi.  yang bertanggung jawab atas konfigurasi kompiler secara keseluruhan, dan mencoba mengonfigurasi plugin pertama untuk bekerja dengan file: </p><br><p>  Instalasi plugin: </p><br><pre> <code class="bash hljs">yarn add gatsby-source-filesystem</code> </pre> <br><p>  Konfigurasi dalam file <em>/gatsby-config.js:</em> </p><br><pre> <code class="plaintext hljs">module.exports = { plugins: [ { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/`, } } ], }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Lebih detail tentang file di atas</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> /** * gatsby-config.js     *     JS *     */ module.exports = { /** *  'plugins'  pipeline  * ,      */ plugins: [ /** *        , *         */ `gatsby-example-plugin`, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/`, } } ], }</code> </pre> </div></div><br><p>  Ingat kami berbicara tentang impor gambar "benar" ke <strong>Gatsby</strong> ? </p><br><p>  <em>/src/components/header.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; export default () =&gt; ( &lt;StaticQuery query={graphql` { allFile(filter: { name: { eq: "logo" } }) { edges { node { publicURL } } } } `} render={({ allFile: { edges: [ { node: { publicURL } } ] } }) =&gt; ( &lt;header&gt; &lt;Link to="/"&gt; &lt;img src={publicURL} alt="logo" width="60px" height="60px" /&gt; &lt;/Link&gt; That is header &lt;/header&gt; )} /&gt; );</code> </pre> <br><p>  Tidak ada yang berubah di situs, tetapi sekarang gambar diganti menggunakan GraphQL, bukan impor webpack sederhana.  Sepintas, mungkin terlihat bahwa desainnya terlalu kompleks dan itu isyarat yang tidak perlu, tapi jangan terburu-buru mengambil kesimpulan, karena benda itu ada di plugin yang sama.  Misalnya, jika kami memutuskan untuk mengirim ribuan foto di situs, dalam hal apa pun kami harus berpikir tentang mengoptimalkan pemuatan semua konten, dan agar tidak membangun <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proses pemuatan malas</a> kami dari awal, kami hanya akan menambahkan plugin <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gambar</a> gatsby yang akan mengoptimalkan pemuatan semua foto. gambar yang diimpor menggunakan <code>query</code> . </p><br><p>  Menginstal pengaya untuk penataan: </p><br><pre> <code class="bash hljs">yarn add gatsby-plugin-typography react-typography typography typography-theme-noriega node-sass gatsby-plugin-sass gatsby-plugin-styled-components styled-components babel-plugin-styled-components</code> </pre> <br><p>  <em>gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">module.exports = { plugins: [ { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/` } }, // add style plugins below `gatsby-plugin-typography`, `gatsby-plugin-sass`, `gatsby-plugin-styled-components` ] };</code> </pre> <br><blockquote>  Di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situs web resmi</a> Anda dapat menemukan plugin untuk setiap selera. </blockquote><br><h2 id="stilizaciya-prilozheniya">  Penataan gaya aplikasi </h2><br><p>  Mari kita mulai menata aplikasi menggunakan berbagai pendekatan.  Pada langkah sebelumnya, kami telah menginstal plugin untuk bekerja dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SASS</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">komponen-gaya</a> dan pustaka <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">typography.js</a> , sementara itu penting untuk dicatat bahwa css.modules didukung di luar kotak. </p><br><p>  Mari kita mulai dengan gaya global, yang, seperti hal-hal lain yang terkait dengan seluruh situs, harus dikonfigurasi dalam file <em>/gatsby-browser.js</em> : </p><br><pre> <code class="plaintext hljs">import "./src/styles/global.scss";</code> </pre> <br><blockquote>  Lebih lanjut tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gatsby-browser.js</a> </blockquote><p>  <em>/src/styles/global.scss</em> </p><br><pre> <code class="plaintext hljs">body { background-color: lavenderblush; }</code> </pre> <br><p>  Karena berbagai alasan, tren beberapa tahun terakhir condong ke arah pendekatan "CSS in JS", jadi Anda tidak boleh menyalahgunakan gaya global dan lebih baik membatasi diri Anda untuk menunjukkan font dan kelas yang digunakan kembali.  Proyek khusus ini berencana untuk menggunakan <strong>Tipografi.js</strong> untuk tujuan ini, sehingga gaya global akan tetap kosong. </p><br><p>  Anda mungkin telah memperhatikan perubahan tampilan situs setelah menambahkan <code>gatsby-plugin-typography</code> ke konfigurasi - ini karena pengaturan awal yang ditetapkan telah diterapkan, dan sekarang kami akan mengonfigurasinya sendiri. </p><br><p>  <em>/src/utils/typography.js</em> </p><br><pre> <code class="plaintext hljs">import Typography from "typography"; import theme from "typography-theme-noriega"; const typography = new Typography(theme); export default typography;</code> </pre> <br><blockquote>  Anda dapat memilih prasetel lain dari <a href="">daftar</a> atau membuatnya sendiri menggunakan paket API ( <a href="">contoh</a> konfigurasi situs web Gatsby resmi) </blockquote><p>  <em>/gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">module.exports = { plugins: [ { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/` } }, { resolve: `gatsby-plugin-typography`, options: { pathToConfigModule: `src/utils/typography` } }, `gatsby-plugin-sass`, `gatsby-plugin-styled-components` ] };</code> </pre> <br><p>  Dan tergantung pada pengaturan awal yang dipilih, gaya global situs akan diubah.  Putuskan pendekatan apa untuk menetapkan gaya global untuk diri Anda sendiri, ini masalah preferensi dan perbedaan pribadi dari sudut pandang teknis, tetapi kami beralih ke penataan komponen menggunakan komponen yang <strong>ditata</strong> : </p><br><p>  Tambahkan file dengan variabel global <em>/src/utils/vars.js</em> </p><br><pre> <code class="plaintext hljs">export const colors = { main: `#663399`, second: `#fbfafc`, main50: `rgba(102, 51, 153, 0.5)`, second50: `rgba(251, 250, 252, 0.5)`, textMain: `#000000`, textSecond: `#ffffff`, textBody: `#222222` };</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">/src/components/header.js</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; import styled from "styled-components"; import { colors } from "../utils/vars"; const Header = styled.header` width: 100%; height: 3em; display: flex; justify-content: space-between; align-items: center; background-color: ${colors.main}; color: ${colors.textSecond}; padding: 0.5em; `; const Logo = styled.img` border-radius: 50%; height: 100%; `; const logoLink = `height: 100%;`; export default () =&gt; ( &lt;StaticQuery query={graphql` { allFile(filter: { name: { eq: "logo" } }) { edges { node { publicURL } } } } `} render={({ allFile: { edges: [ { node: { publicURL } } ] } }) =&gt; ( &lt;Header&gt; That is header &lt;Link to="/" css={logoLink}&gt; &lt;Logo src={publicURL} alt="logo" /&gt; &lt;/Link&gt; &lt;/Header&gt; )} /&gt; );</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">/src/components/sidebar.js</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> import React from "react" import { Link, StaticQuery, graphql } from "gatsby" import styled from "styled-components" import { colors } from "../utils/vars" const Sidebar = styled.section` position: fixed; left: 0; width: 20%; height: 100%; display: flex; flex-direction: column; justify-content: center; background-color: ${colors.second}; color: ${colors.textMain}; ` const navItem = ` display: flex; align-items: center; margin: 0 1em 0 2em; padding: 0.5em 0; border-bottom: 0.05em solid ${colors.mainHalf}; postion: relative; color: ${colors.textBody}; text-decoration: none; &amp;:before { content: ''; transition: 0.5s; width: 0.5em; height: 0.5em; position: absolute; left: 0.8em; border-radius: 50%; display: block; background-color: ${colors.main}; transform: scale(0); } &amp;:last-child { border-bottom: none; } &amp;:hover { &amp;:before { transform: scale(1); } } ` export default () =&gt; ( &lt;StaticQuery query={graphql` { allSitePage { edges { node { id, path } } } } `} render={({ allSitePage: { edges } }) =&gt; ( &lt;Sidebar&gt; { edges.map(({ node: { id, path } }) =&gt; ( &lt;Link to={path} key={id} css={navItem} &gt;{id}&lt;/Link&gt; )) } &lt;/Sidebar&gt; )} /&gt; )</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/qf/1w/i6/qf1wi6f95fjjjx794g8qvujbksw.gif" alt="ditata"></p><br><p>  Elemen yang sudah ada bergaya, dan sudah waktunya untuk mengaitkan konten dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Contentful</a> , hubungkan plugin margin dan hasilkan halaman menggunakan <strong>API createPages</strong> . </p><br><blockquote>  Baca lebih lanjut tentang cara menautkan Gatsby dan Contentful di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel sebelumnya.</a> </blockquote><br><div class="spoiler">  <b class="spoiler_title">Struktur data saya dengan Contentful</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> [ { "id": "title", "type": "Symbol" }, { "id": "content", "type": "Text", }, { "id": "link", "type": "Symbol", }, { "id": "orderNumber", "type": "Integer", } ]</code> </pre> </div></div><br><p>  Instalasi Paket: </p><br><pre> <code class="bash hljs">yarn add dotenv gatsby-source-contentful gatsby-transformer-remark</code> </pre> <br><p>  <em>/gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">if (process.env.NODE_ENV === "development") { require("dotenv").config(); } module.exports = { plugins: [ `gatsby-transformer-remark`, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/`, } }, { resolve: `gatsby-plugin-typography`, options: { pathToConfigModule: `src/utils/typography`, }, }, { resolve: `gatsby-source-contentful`, options: { spaceId: process.env.CONTENTFUL_SPACE_ID, accessToken: process.env.CONTENTFUL_ACCESS_TOKEN, }, }, `gatsby-plugin-sass`, `gatsby-plugin-styled-components`, ], }</code> </pre> <br><p>  Hapus folder <em>/ src / pages</em> dengan semua file di dalamnya dan buat file baru untuk mengelola node di Gatsby: </p><br><p>  <em>/gatsby-node.js</em> </p><br><pre> <code class="plaintext hljs">const path = require(`path`); /** *  ,      *       */ exports.createPages = ({ graphql, actions }) =&gt; { /** *        *        *    */ const { createPage } = actions; return graphql(` { allContentfulArticle { edges { node { title link content { childMarkdownRemark { html } } } } } } `).then(({ data: { allContentfulArticle: { edges } } }) =&gt; { /** *       *  createPage()    *      */ edges.forEach(({ node }) =&gt; { createPage({ path: node.link, component: path.resolve(`./src/templates/index.js`), context: { slug: node.link } }); }); }); };</code> </pre> <br><blockquote>  Lebih lanjut tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gatsby-node.js</a> </blockquote><p>  Buat file templat yang akan menjadi dasar untuk halaman yang dihasilkan <br>  <em>/src/templates/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { graphql } from "gatsby"; import Layout from "../components/layout"; export default ({ data: { allContentfulArticle: { edges: [ { node: { content: { childMarkdownRemark: { html } } } } ] } } }) =&gt; { return ( &lt;Layout&gt; &lt;div dangerouslySetInnerHTML={{ __html: html }} /&gt; &lt;/Layout&gt; ); }; export const query = graphql` query($slug: String!) { allContentfulArticle(filter: { link: { eq: $slug } }) { edges { node { title link content { childMarkdownRemark { html } } } } } } `;</code> </pre> <br><blockquote>  Mengapa komponen <code>&lt;StaticQuery /&gt;</code> tidak digunakan di sini?  Masalahnya adalah itu tidak mendukung variabel untuk membangun permintaan, tetapi kita perlu menggunakan variabel <code>$slug</code> dari konteks halaman. </blockquote><br><div class="spoiler">  <b class="spoiler_title">Memperbarui logika di bilah navigasi</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; import styled from "styled-components"; import { colors } from "../utils/vars"; const Sidebar = styled.section` position: fixed; left: 0; width: 20%; height: 100%; display: flex; flex-direction: column; justify-content: center; background-color: ${colors.second}; color: ${colors.textMain}; `; const navItem = ` display: flex; align-items: center; margin: 0 1em 0 2em; padding: 0.5em 0; border-bottom: 0.05em solid ${colors.main50}; postion: relative; color: ${colors.textBody}; text-decoration: none; &amp;:before { content: ''; transition: 0.5s; width: 0.5em; height: 0.5em; position: absolute; left: 0.8em; border-radius: 50%; display: block; background-color: ${colors.main}; transform: scale(0); } &amp;:last-child { border-bottom: none; } &amp;:hover { &amp;:before { transform: scale(1); } } `; export default () =&gt; ( &lt;StaticQuery query={graphql` { allContentfulArticle(sort: { order: ASC, fields: orderNumber }) { edges { node { title link orderNumber } } } } `} render={({ allContentfulArticle: { edges } }) =&gt; ( &lt;Sidebar&gt; {edges.map(({ node: { title, link, orderNumber } }) =&gt; ( &lt;Link to={link} key={link} css={navItem}&gt; {orderNumber}. {title} &lt;/Link&gt; ))} &lt;/Sidebar&gt; )} /&gt; );</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/fn/bc/fs/fnbcfsl-qbdzkh1murfclmr7itk.gif" alt="data"></p><br><h2 id="seo-optimizaciya">  Optimasi SEO </h2><br><p>  Di sisi teknis, situs dapat dianggap siap, jadi mari kita bekerja dengan metadata-nya.  Untuk melakukan ini, kita memerlukan plugin berikut: </p><br><pre> <code class="bash hljs">yarn add gatsby-plugin-react-helmet react-helmet</code> </pre> <br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">react-helm</a> menghasilkan <code>&lt;head&gt;...&lt;/head&gt;</code> untuk halaman HTML dan bersama dengan rendering Gatsby adalah alat yang ampuh dan nyaman untuk bekerja dengan SEO. </blockquote><p>  <em>/src/templates/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { graphql } from "gatsby"; import { Helmet } from "react-helmet"; import Layout from "../components/layout"; export default ({ data: { allContentfulArticle: { edges: [ { node: { title, content: { childMarkdownRemark: { html } } } } ] } } }) =&gt; { return ( &lt;Layout&gt; &lt;Helmet&gt; &lt;meta charSet="utf-8" /&gt; &lt;title&gt;{title}&lt;/title&gt; &lt;/Helmet&gt; &lt;div dangerouslySetInnerHTML={{ __html: html }} /&gt; &lt;/Layout&gt; ); }; export const query = graphql` query($slug: String!) { allContentfulArticle(filter: { link: { eq: $slug } }) { edges { node { title link content { childMarkdownRemark { html } } } } } } `;</code> </pre> <br><p>  Sekarang <code>title</code> situs akan selalu cocok dengan judul artikel, yang akan secara signifikan mempengaruhi penerbitan situs dalam hasil pencarian khusus untuk masalah ini.  Di sini Anda dapat dengan mudah menambahkan <code>&lt;meta name="description" content=" "&gt;</code> dengan deskripsi masing-masing artikel secara terpisah, sehingga memungkinkan pengguna untuk memahami tentang apa artikel tersebut di halaman pencarian, secara umum, semua fitur SEO sekarang tersedia dan dapat dikelola satu tempat. </p><br><p><img src="https://habrastorage.org/webt/_7/l2/ht/_7l2hthmllnqdgycorxhaz2v_mw.png" alt="seo"></p><br><h2 id="nastroyka-pwa">  Pengaturan PWA </h2><br><p>  <strong>Gatsby</strong> dirancang untuk memberikan kinerja kelas satu di luar kotak.  Ini menangani masalah pemisahan dan minimisasi kode, serta optimasi dalam bentuk pra-pemuatan di latar belakang, pemrosesan gambar, dll., Sehingga situs yang Anda buat memiliki kinerja tinggi tanpa konfigurasi manual.  Fitur kinerja ini merupakan bagian penting untuk mendukung pendekatan aplikasi web progresif. </p><br><p>  Namun selain semua hal di atas, ada tiga kriteria dasar untuk situs yang mendefinisikannya sebagai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">PWA</a> : </p><br><ul><li>  Protokol https </li><li>  kehadiran <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">manifest.json</a> </li><li>  akses offline ke situs karena <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pekerja layanan</a> </li></ul><br><p>  Poin pertama tidak dapat diselesaikan oleh Gatsby, karena <em>domain</em> , <em>hosting</em> , dan <em>protokol</em> adalah masalah penyebaran, dan bukan pengembangan sama sekali, tetapi saya dapat merekomendasikan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Netlify</a> , yang memecahkan masalah https secara default. </p><br><p>  Kami beralih ke item lainnya, untuk ini kami akan menginstal dua plugin: </p><br><pre> <code class="bash hljs">yarn add gatsby-plugin-manifest gatsby-plugin-offline</code> </pre> <br><p>  dan konfigurasikan <em>/src/gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">if (process.env.NODE_ENV === "development") { require("dotenv").config(); } module.exports = { plugins: [ { resolve: `gatsby-plugin-manifest`, options: { name: `GatsbyJS translated tutorial`, short_name: `GatsbyJS tutorial`, start_url: `/`, background_color: `#f7f0eb`, theme_color: `#a2466c`, display: `standalone`, icon: `public/favicon.ico`, include_favicon: true } }, `gatsby-plugin-offline`, `gatsby-transformer-remark`, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/` } }, { resolve: `gatsby-plugin-typography`, options: { pathToConfigModule: `src/utils/typography` } }, { resolve: `gatsby-source-contentful`, options: { spaceId: process.env.CONTENTFUL_SPACE_ID, accessToken: process.env.CONTENTFUL_ACCESS_TOKEN } }, `gatsby-plugin-sass`, `gatsby-plugin-styled-components`, `gatsby-plugin-react-helmet` ] };</code> </pre> <br><p>  Anda dapat menyesuaikan manifes Anda menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> , serta menyesuaikan strategi pekerja layanan dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menimpa pengaturan plugin</a> . </p><br><p>  Anda tidak akan melihat adanya perubahan dalam mode pengembangan, tetapi situs tersebut sudah memenuhi persyaratan terbaru dari dunia web, dan ketika di-host di https: // domain itu tidak akan sama. </p><br><h2 id="vyvod">  Kesimpulan </h2><br><p>  Beberapa tahun yang lalu, ketika saya pertama kali menemui masalah membawa aplikasi Bereaksi ke Internet, mendukungnya dan memperbarui konten, saya tidak bisa membayangkan bahwa sudah ada pendekatan tumpukan-JAM di pasar yang menyederhanakan semua proses ini, dan sekarang saya tidak akan terkejut melihatnya kesederhanaan.  Gatsby memecahkan sebagian besar masalah yang memengaruhi kinerja situs hanya "di luar kotak", dan jika Anda memahami sedikit tentang seluk-beluk menyesuaikannya dengan kebutuhan Anda, Anda bisa mendapatkan indikator 100% untuk semua item di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Mercusuar</a> , yang secara signifikan mempengaruhi pengiriman situs di mesin pencari (oleh setidaknya di Google). </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Repositori dengan proyek</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id442298/">https://habr.com/ru/post/id442298/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id442286/index.html">Dokter mata Rusia berbicara tentang visi bionik. Aplikasi mobile baru menunjukkan karya siber</a></li>
<li><a href="../id442288/index.html">Radiasi: sumber</a></li>
<li><a href="../id442290/index.html">Membuat ST-Link V2.1 dari Bahasa Cina ST-Link V2</a></li>
<li><a href="../id442292/index.html">Magang Sberseason: Python, UX / UI, Data dan banyak lagi untuk siswa</a></li>
<li><a href="../id442294/index.html">Apa Oleg Artamonov sedikit salah</a></li>
<li><a href="../id442300/index.html">Saya melihat dan mendengarkan di mana saya inginkan. Mengintegrasikan Chromecast ke dalam Aplikasi Android</a></li>
<li><a href="../id442304/index.html">Lipat smartphone: bagaimana dengan aplikasi?</a></li>
<li><a href="../id442306/index.html">Cara vendor git ke git lain</a></li>
<li><a href="../id442310/index.html">Firmware Sonoff Basic melalui Raspberry Pi</a></li>
<li><a href="../id442312/index.html">DoT untuk distribusi RPZ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>