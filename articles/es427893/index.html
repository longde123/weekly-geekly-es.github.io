<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚õµÔ∏è üßöüèª üå´Ô∏è Bloody Lola en Omega 2 o Python asfixiante en Halloween üóº üë∂üèø ü§£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nunca entend√≠ estas vacaciones. Pero la idea naci√≥. Haz una mu√±eca espeluznante que brille con sus ojos y produzca sonidos espeluznantes. 

 Una cabez...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bloody Lola en Omega 2 o Python asfixiante en Halloween</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/427893/"> Nunca entend√≠ estas vacaciones.  Pero la idea naci√≥.  Haz una mu√±eca espeluznante que brille con sus ojos y produzca sonidos espeluznantes. <br><br><img src="https://habrastorage.org/webt/v_/j7/ng/v_j7ngyryzuvabfo6rnfi58atsu.gif" alt="imagen" width="400" align="left">  Una cabeza de ni√±o genial apareci√≥ bajo esto (gracias Anton) y un concurso de Cebolla con un sorteo de ballenas especiales, que la conciencia no me permite comprar.  Si es as√≠, hice el cerebro de la ni√±a Lola en Omega 2, usando mis mejores pr√°cticas del art√≠culo anterior. <br><br>  Todos los que est√©n interesados ‚Äã‚Äãen c√≥mo repetir tal cosa, por favor, debajo del gato. <br><a name="habracut"></a><br>  Necesitaremos: dos LED, un altavoz, una fuente de alimentaci√≥n de 12 voltios, un sensor de movimiento (solo necesita 12 voltios), un convertidor de potencia de 3,3 voltios, un convertidor de potencia de 5 voltios, un amplificador simple (cualquier clase D con fuente de alimentaci√≥n de 3-12 voltios) y Omega 2. A√∫n as√≠, opcionalmente, necesitar√° una unidad flash USB o una tarjeta SD para ampliar el espacio en disco. <br><br>  Abrimos la mu√±eca y colocamos los LED en los ojos y el altavoz en el √°rea de la boca con adhesivo termofusible.  Emitimos el cableado al √°rea del <s>cerebro</s> Omega 2. Soldamos el altavoz al amplificador, conectamos los LED a los transistores de efecto de campo ... En general, ensamblamos el siguiente circuito. <br><br><img src="https://habrastorage.org/webt/kr/cu/oy/krcuoy7-0pdep9pj8wyl99hkou8.jpeg" alt="imagen"><br><br>  En lugar de un convertidor de 5 voltios, puede tomar una fuente de alimentaci√≥n dual para 5 y 12 voltios, que est√° m√°s cerca. <br><br>  A continuaci√≥n, vaya a la configuraci√≥n del software.  Si desea utilizar el sonido i2s, instalamos el firmware b193 en omega, porque m√°s i2s no funciona.  De lo contrario, puede insertar una tarjeta de sonido en el USB y luego configurar el sonido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">para esta gu√≠a</a> .  Si est√° haciendo lo que yo hice, entonces escrib√≠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> sobre trabajar con el sonido i2s.  Nos conectamos a wifi y aumentamos el espacio en disco omega 2. Todo se detalla en el manual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . Despu√©s de eso realizamos <br><br><pre><code class="hljs sql">opkg <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> opkg <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> alsa-utils mpg123 python pyOnionGpio nano</code> </pre> <br>  Ahora nuestro omega ya casi puede hablar y solo queda escribir un c√≥digo Python para este negocio.  La l√≥gica es simple.  El sensor de movimiento abre el circuito entre los dos GPIO.  Por un lado, alimentamos una unidad l√≥gica cuando se enciende (tengo 15 salidas), leemos el valor de la segunda (uso 17 salidas).  Cuando hay 0 (porque el sensor PIR ha activado y abierto la l√≠nea), comenzamos a reproducir sonidos terribles y parpadear los LED.  El resto del tiempo estamos en silencio y no tocamos a nadie.  La implementaci√≥n de todo esto se ve as√≠. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> onionGpio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> subprocess <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> random gpioOut = onionGpio.OnionGpio(<span class="hljs-number"><span class="hljs-number">15</span></span>) gpioOut.setOutputDirection(<span class="hljs-number"><span class="hljs-number">0</span></span>) gpioOut.setValue(<span class="hljs-number"><span class="hljs-number">1</span></span>) gpioObj = onionGpio.OnionGpio(<span class="hljs-number"><span class="hljs-number">17</span></span>) status = gpioObj.setInputDirection() <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-comment"><span class="hljs-comment">#   value = gpioObj.getValue() #   if int(value)==0: cmd = "fast-gpio pwm 18 " + str(random.randint(5,15)) + " 50" subprocess.call(cmd, shell=True) cmd = "fast-gpio pwm 19 " + str(random.randint(2,10)) + " 50" subprocess.call(cmd, stdout=subprocess.PIPE, shell=True) cmd = "mpg123 -f 256 -C /mnt/sda1/" + str(random.randint(1,6)) + ".mp3" subprocess.call(cmd, shell=True) #   else: subprocess.call("fast-gpio set 18 0", shell=True) subprocess.call("fast-gpio set 19 0", shell=True)</span></span></code> </pre><br>  Los archivos de sonidos espeluznantes se agregan a / mnt / sda1 bajo los nombres 1.mp3, 2.mp3 ... Tengo 6. y uno de ellos se enciende aleatoriamente.  La frecuencia de las salidas PWM del Omega 2 tambi√©n se activa aleatoriamente por separado debajo de los ojos izquierdo y derecho.  Ser√≠a posible usar hardware PWM, pero aqu√≠ la posible inestabilidad de frecuencia es una ventaja.  Luego escribimos dos l√≠neas en rc.local ejecutando el comando <code>nano /etc/rc.local</code> <br><br><pre> <code class="hljs pgsql">omega2-ctrl gpiomux <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> i2s i2s python /mnt/sda1/<span class="hljs-keyword"><span class="hljs-keyword">start</span></span>.py</code> </pre><br>  Como creo que adivin√≥ el script que cit√© anteriormente, debe guardarlo en el directorio / mnt / sda1 con el nombre <i>start.py</i> . <br><br>  El siguiente es el √∫ltimo paso.  El mas creativo.  Maquillaje.  Acabo de preguntarle a mi esposa (tramposa) y ella fue genial.  Muchas gracias <br><br><img src="https://habrastorage.org/webt/tn/me/zh/tnmezhhstxnqumqhaeey7ni-vlu.jpeg" alt="imagen"><br><br>  Puedes ver c√≥mo funciona todo con el sonido en el siguiente video.  En la oscuridad, "Eater of Male Hearts" de Lola se ve bastante espeluznante, para ser honesto.  Espero que lo hayas disfrutado.  Gracias por su atencion! <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/f-GnMWJSe6k" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  ¬øY qu√© productos caseros terribles hiciste? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427893/">https://habr.com/ru/post/es427893/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427877/index.html">Lenguaje de programaci√≥n Rockstar: cuando el c√≥digo se parece al texto rock hit</a></li>
<li><a href="../es427879/index.html">C√≥mo cambi√© de Python a Julia (y por qu√©)</a></li>
<li><a href="../es427883/index.html">Presentaci√≥n de virtualizaci√≥n, contenedores y Kubernetes: 18 recursos en la nube</a></li>
<li><a href="../es427889/index.html">¬°Incorrecto, incorrecto, INCORRECTO! m√©todos de mitigaci√≥n de DDoS</a></li>
<li><a href="../es427891/index.html">Millones de personas pueden ser atacadas a trav√©s de la vulnerabilidad en la plataforma de conferencia Cisco WebEx</a></li>
<li><a href="../es427895/index.html">Eliminar datos de una base de datos compartible</a></li>
<li><a href="../es427897/index.html">An√°lisis de un generador de im√°genes de resonancia magn√©tica II: metamateriales en resonancia magn√©tica</a></li>
<li><a href="../es427899/index.html">JsonWriterSax: una biblioteca para crear JSON</a></li>
<li><a href="../es427901/index.html">C√≥mo no usar Node.js Stream API</a></li>
<li><a href="../es427905/index.html">Miner√≠a de alimentos o encrucijada a trav√©s de los ojos de un hacker</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>