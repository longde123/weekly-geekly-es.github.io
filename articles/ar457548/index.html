<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ผ๐ผ ๐ธ๏ธ ๐ ุชูููุฏ ุฅุดุงุฑุฉ PWM ูุชุนุฏุฏุฉ ุงููุฑุงุญู ุนูู TMS320F28027 ๐ฉ๐ปโ๐จ ๐ ๐ด๓ง๓ข๓ฅ๓ฎ๓ง๓ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฐุงุช ูุฑุฉ  ูู ูุฌุฑุฉ โโุจุนูุฏุฉ ุจุนูุฏุฉ  ูุชุจุช ููุงูุฉ ูุตูุฑุฉ ุญูู ูุญุฏุฉ ุงูุชุญูู Piccolo ุงููุชุฎุตุตุฉ ูู Texas Instruments ุ ูุงูุชู ุตููุช ููุชุญูู ูู ูุญููุงุช ุงูุทุงูุฉ ูุงููุญุฑูุงุช ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูููุฏ ุฅุดุงุฑุฉ PWM ูุชุนุฏุฏุฉ ุงููุฑุงุญู ุนูู TMS320F28027</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457548/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุฐุงุช ูุฑุฉ <del>  ูู ูุฌุฑุฉ โโุจุนูุฏุฉ ุจุนูุฏุฉ </del>  ูุชุจุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงูุฉ ูุตูุฑุฉ</a> ุญูู ูุญุฏุฉ ุงูุชุญูู Piccolo ุงููุชุฎุตุตุฉ ูู Texas Instruments ุ ูุงูุชู ุตููุช ููุชุญูู ูู ูุญููุงุช ุงูุทุงูุฉ ูุงููุญุฑูุงุช ุงูููุฑุจุงุฆูุฉ.  ุฃุฏูุงุช ุงูุชุญูู ูุฐู ุฃุฏูุงุช ุชุทููุฑ ูููุฉ ุฌุฏูุง ูู ุงูุนุฏูุฏ ูู ุงูููุงู ูุฃุฑุฏุช ุฃู ุฃูุชุจ ุดูุฆูุง ุขุฎุฑ ุนููุง ... ุจุณูุท ููููุฏ. </p><br><p style=";text-align:right;direction:rtl">  ููุฏ ุดุนุฑุช ุจุงูุญูุฑุฉ ูุคุฎุฑูุง ูุชุทููุฑ ูุญุฏุฉ ุชุญูู ููุชุญูู ูู ุงููุญุฑูุงุช ุ ูุจูุงุกู ุนูู ุฐูู ุ ุชู ุชุดููู ููุถูุน ููุฐู ุงูููุงูุฉ - ุงูููู ุณุฃุชุญุฏุซ ุนู ุนูููุฉ ุชุดููู PWM ุซูุงุซูุฉ ุงูุทูุฑ ููุชุญูู ูู ุงููุญุฑูุงุช ุ ููุฐูู ุดุฑุญ ุงูุงุฎุชูุงูุงุช ุงููููุฏุฉ ุจูู TMS320F28 ููุญุฏุงุช ุงูุชุญูู ุงูุฃุฎุฑู ูุซู STM32F334 ู STM32G484 ู XMC4200 ูุบูุฑูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุญุงูู ุ ุณุฃุณุชุฎุฏู ูุญุฏุฉ ุงูุชุญูู ููุฏ ุงูุชุทููุฑ ุ ููุฃุณู ุ ูุง ุฃุณุชุทูุน ุงูุชุญุฏุซ ุนู ุงูุฌุฒุก ุงูุญุฏูุฏู ุจุงูุชูุตูู.  ููุน ุฐูู ุ ุฅุฐุง ููุช ุฃู ูุญุฏุฉ ุงูุชุญูู ูุจููุฉ ุนูู ุฃุณุงุณ ุญุฒูุฉ TMS320F28027 + DRV8353RSRGZT ุ ูููููู ุงูุงุทูุงุน ุนูู ูุฑูุฉ ุจูุงูุงุช ุจุฑูุงูุฌ ุงูุชุดุบูู ูุฑุคูุฉ ููููู ุงูุฏุงุฆุฑุฉ ุงูุนุงูุฉ + ููุงู ุชุตุญูุญ ุงูุฃุฎุทุงุก ุนูู ูุฐุง ุงูุญุฌุฑ ูุงูุชุตููู ุงููุฑุฌุนู ููุชูุญ ุนููู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/bu/ps/ur/bupsur6y9nfobnpa53zqjrfodmo.jpeg" alt="ุณุงุฆู BLDC"></p><br><p style=";text-align:right;direction:rtl">  ูู ุญูุซ ุงููุจุฏุฃ ุ ุนูู ููุณ ุงูููุน ูู ุงูุฏูุงุฆุฑ ุ ูู ุงููููู ุงูุชุญูู ูู ูุญุฑูุงุช BLDC ุงูุชู ุชุณุชููู ูุณุชููุงุช ุงูุฌูุฏ ู 3 ูุฑุงุญู ุงูุนุงุฏูุฉ ุ ูุงูุชู ุชุฑูุฏ ุจุงููุนู ุฅุฎุฑุงุฌ ุงูุฌูุจูุฉ.  ุณุฃุนุฑุถ ููุง ุงูุฎูุงุฑูู ุ ููุง  ุงูุทุฑูู ุฅูู ุงูุฌูุจ ูููู ูู ุชุดููู ูุณุชููุงุช ุงูุฌูุฏ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qf/rd/ck/qfrdck6y4rcvirbws9o6zbzrfea.png" alt="ุงูุฐุจุฐุจุงุช ุฑูู 1"></p><a name="habracut"></a><br><h1 id="nemnogo-o-zheleze" style=";text-align:right;direction:rtl">  ููููุง ุนู ุงูุญุฏูุฏ </h1><br><p style=";text-align:right;direction:rtl">  ูุชููู ุงูุฌุฒุก ุงูููู ููุณุงุฆู ูู ุงููุงุญูุฉ ุงูุฃูุฏููููุฌูุฉ ูู 3 ูุญููุงุช ูุตู ุฌุณุฑ ุ ูุฑุจูุง ูุชู ุชุตููุน ุฌููุน ุฃุฌูุฒุฉ ุงูุชุญูู ูุงูุชุญูู ูู ูุญุฑูุงุช BLDC ูู ุฌููุน ุงููุฑูุญูุงุช ุจุทุฑููุฉ ููุงุซูุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fm/kd/3t/fmkd3tequjgg3gapytg5bvupwfw.png" alt="ุซูุงุซ ูุฑุงุญู ุงูุฌุณุฑ"></p><br><p style=";text-align:right;direction:rtl">  ูุฑู ูุงุญุฏ - ููุณ ูุฏู ุงููุนุฏู ุงููุฏุฎูุงุช ุ ูุฃูู  ูุชู ุชุดุบูู ูุญุฏุฉ ุงูุชุญูู ูู ุงูุจุฏุงูุฉ ุจุฌูุฏ ุซุงุจุช.  ูุตุฏุฑ ุงูุทุงูุฉ ูู ุญุงูุชู ูู ูุฌููุนุฉ ูู ุจุทุงุฑูุงุช li-ion ูู ุดูู 18650 ุฎููุฉ ุ ูููู ููุณุงุฆู DRV8353RSRGZT ุงููุณุชุฎุฏู ุงูุชุญูู ูู 3 ุฌุณูุฑ ูุตู ููุท ูู ุงูุทุงูุฉ ุ ููุฐูู ูู ุงูุฅุตุฏุงุฑ ุงููุณุชุฎุฏู ูู ุงูุญุฌุฑ ุ ููุง ููุฌุฏ ุฃูุถูุง ูุถุฎูุงุช ุตูุชูุฉ ูุฏูุฌุฉ ููุนูู ูุน shunts ููุณุชุดุนุฑุงุช ุญุงููุฉ ูุฏูุฌุฉ ุงูุนุงุตูุฉ / ุงูุนุงุตูุฉ ุ ูุงูุชู ูููู ุฃู ุชูุถู ูุง ูุตู ุฅูู 70 ... 80V ููุชู ุชูููู ูู ูุฐุง ุจูุฑููุฉ ูุจูุฑุฉ ุนุจุฑ SPI.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุฑูุญ ููุบุงูุฉ ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุถุจุท ุงูุญุฏ ุงูุฃูุตู ุงูุญุงูู ููุจุถ ุงูุชุญูู ูู ุงูุชุฑุงูุฒุณุชูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุถูุง ูู ูุฐู ุงูุณูุณูุฉ ุ ุชูุฌุฏ ุจุฑุงูุฌ ุชุดุบูู ูุน ูุฌููุนุฉ ูุฎุชููุฉ ูู ุงููุธุงุฆู ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุงู ูุน ุงูุชุญูู ุงูุชูุงุธุฑูุฉ ุ ูููุณ SPI ุฃู ุจุฏูู ุงูุนุงุตูุฉ / ุงูุนุงุตูุฉ ูุจุฏูู ุงููุฑุฌุน ุฃูุจูุฑ.  ุจุงููุณุจุฉ ููุณุนุฑ ุ ููู ููุณุช ูุฎุชููุฉ ุชูุงููุง ูุฃุฎุฐุช ุฃูุซุฑ "ุฌุฑุฃุฉ" ููุง ูุฏ ุชููู ูููุช ุจุงููุนู.  ูุฐุง ุงูุฃูุฑ ููู ูุจุฏู ุฌููููุง ุฌุฏูุง ุ ููููู ุงูุชุฑุจุช ุชุตููููุง ููุงุฆููุง ูู ุชุตููู ุงูุณุงุฆู ูุชุณุจุจุช ูู ูุดููุชูู ูุจูุฑุชูู.  ูู ุงููุงูุน ุ ููุงู ูุดููุฉ ูุงุญุฏุฉ ููุท - ููุฐู ูุดููุฉ ุงุฑุชูุงุน ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hh/ud/hh/hhudhh5jk3tpwowsivbvjjar66e.jpeg" alt="ุชุตููุฑ ุญุฑุงุฑู"></p><br><p style=";text-align:right;direction:rtl">  ูููู ุณุจุจ ูุฐู ุงููุดููุฉ ุณุจุจุงู.  ูู ุงููุงูุน ุฌููุฑ ุงููุดููุฉ ูู ุงุฑุชูุงุน ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุงูุณุงุฆู ููุณู.  ุนูู ุงูุฑุณู ุงูุจูุงูู ุ ูุชู ุชุญููู ุงูุณุงุฆู ูุน ุชูุงุฑ 5A (ุจุงููุณุจุฉ ูู ูู ุชูุฑูุจุง ุงูุฎููู) ููุง ุดูุก ุณูู ุงูุณุงุฆู ู MK ููุณู ูุชู ุชุณุฎูููุง ููููุง.  ุงูุชุฑุงูุฒุณุชูุฑุงุช ููุณุช ูุงุถุญุฉ ุญุชู ุ ูุฏููู ุฏุฑุฌุฉ ุญุฑุงุฑุฉ ุซูุงุฆู ุงูููููู ูุชุนุฏุฏ ุงููููุฑ ุ ูู 5A ููุงู ุฎุณุงุฆุฑ ุญุฑุงุฑุฉ ุถุฆููุฉ. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุฎุทุฃ ุฑูู 1</strong> <br>  ููุฏ ุทูุจ ููู ุตุฏูู ูู ุ ุจุตุฑุงุญุฉ ุ ููุช ุฃููุฑ ูู ูุฐุง ุงูุฃูุฑ ุจุงุนุชุจุงุฑู ุขุฎุฑ ุดูุก - ูุฏู ุงูุณุงุฆู ูุญุฏุฉ ุชุญูู ุชูุงุฑ ูุณุชูุฑ / ุชูุงุฑ ูุณุชูุฑ ุ ูุงูุฐู ูุณุชูุจู 15 ... 50V ูุฏุฎูุงุช ููุฎุฑุฌุงุช 3.3 ูููุช ูุชุดุบูู MK ุ ูุงูููุทู ุ ูุงูููุงุฑูุฉ ุ ูููุจุฑุงุช ุงูุตูุช ุงูุชุดุบูููุฉ.  ูุจุฏู ุฃู ูุดุงุฑูุนู ุชุญุชูู ุนูู ุฑูุงุฆู LM5008 ู LM5017 ูู ุดูู ุฑูุงุฆู ูููุตูุฉ ููุฏ ุฎูุถุช ุจูุฏูุก 60 ูููุช ุฅูู 3.3 ูููุช ุฏูู ุชุณุฎูู ููุญูุธ ุจูุนุฏู 100-150 ูููู ุฃูุจูุฑ ุ ููู ุชุจูู ุฃู ูู ุดูุก ุฃุตุจุญ ุฃูุซุฑ ุตุนูุจุฉ - ุชุญููุช ุงูููุงุกุฉ ุงูุฅุฌูุงููุฉ ูููุญูู ุฅูู ุญูุงูู 65-70ูช ูู ุงูููุช ุงูุญุงูู 300 ูููู ุฃูุจูุฑ!  ูุงูุญูููุฉ ูู ุฃู ุงููุญูู ููุณู ูููู ุฃู ูุนุทู 3.3V ุ ูููู ุงูููุงุกุฉ ุณุชููู ุถุฆููุฉ ุ ููู ุงูุฃูุถู ูุถุจุท ุงูุฌูุฏ ุงููุงุชุฌ 10-12-15V.  ุนูุฏูุง ูุงู ุงููุงุชุฌ 12V 100 ูููู ุฃูุจูุฑ ุ ุชููู ุงูุณุงุฆู ุนู ุงูุงุญูุงุก ุนูููุงู ุ ูุจูุบุช ุงูููุงุกุฉ 88ูช.  <strong>ูููู ุญู ุงููุดููุฉ</strong> ูู ุฎูุถ ุงููุฏุฎูุงุช 15 ... ูู 50 ูููุช ุฅูู 12 ูููุช ูุน ุงูุนุงุตูุฉ / ุงูุนุงุตูุฉ ุงููุฏูุฌุฉ ุ ููู ุซู ุฎูุถูุง ูู 12V ุฅูู 3.3V ูุน ุงูุนุงุตูุฉ / ุงูุนุงุตูุฉ ุงูุฎุงุฑุฌูุฉ ุฑุฎูุตุฉ ุจุงููุนู. </li></ul><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุฎุทุฃ ุฑูู 2</strong> <br>  ุงูุฎุทุฃ ุงูุซุงูู ูู ุฃูุซุฑ ูุถูุญุง ูุฃูู ูุง ุฃุฎุทุฃุช ููู ูู ูุง ุงุณุชุทุนุช.  ูุงูุญูููุฉ ูู ุฃูู ุจุงููุณุจุฉ ููุฑูุงุฆู ุงูููุฌูุฏุฉ ูู ุญุฒูุฉ QFN ุ ุชุชู ุฅุฒุงูุฉ ุงูุญุฑุงุฑุฉ ุงูุฑุฆูุณูุฉ ูู ุฎูุงู "ุงูุจุทู" ุ ูุนุงุฏุฉู ูุง ูุชู ูุถุนูุง ุนูู GND ุ ููู ุฎูุงู ุนุฏุฉ vias (ุนุจุฑ) ุ ุชุชูุณู ุจุงูุฃุฑุถ ูุชูุชูู ุงูุญุฑุงุฑุฉ ุฅูู ููุงู ุจูุฏูุก.  ูู ุงูุจุฏุงูุฉ ุ ูู ุฃุถุน ูู ุงูุญุณุจุงู ุงูููุงุกุฉ ุงููุฒููุฉ ููุชูุงุฑ ุงููุฏูุฌ / ุงููุณุชูุฑ ูุน ุงุฎุชูุงู ุงูุฌูุฏ ุงูููุฑุจุงุฆู ุงููุจูุฑ ุ ูุฐูู ูู ูุฒุนุฌูู ุฃู ุงููุทุฑุฉ ุงูุญุฑุงุฑูุฉ ("ุงูุจุทู") ุชุดุจุซุช ุจูุถูุน GND ุตูุจ ุนูู ุงูุทุจูุฉ ุงูุฏุงุฎููุฉ ุ ุนูู ุงูุทุจูุฉ ุงูุฎุงุฑุฌูุฉ ุงูุชู ูู ููู ูููุง ุงููุญุงุณ ุชุญุช ุงูุจุทู ููุถูุน GND.  ูุชูุฌุฉ ูุฐูู ุ ุงุชุถุญ ุฃู ุญูุงูู 0.5 ูุงุท ูู ุงูุญุฑุงุฑุฉ ูุชู ุฅุทูุงููุง ุนูู ุงูุฑูุงูุฉ ุ ูุฃููุง ุชุชุจุฏุฏ ูู ุงูุทุจูุฉ ุงูุฏุงุฎููุฉ ูููุญุฉ ุ ุฃู ุฃู ุงูููุงุกุฉ ุฑุฏูุฆุฉ ููุบุงูุฉ.  <strong>ูููู ุญู ุงููุดููุฉ ูู</strong> ุฃูู ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุฃุฑุถู ุนูู ุงูุทุจูุฉ ุงูุฎุงุฑุฌูุฉ (ุงูุทุจูุฉ ุงูุณูููุฉ) ูุนุฏู ุงูููุงู ุจุฐูู: </li></ul><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/xj/hr/0g/xjhr0galowhdsrtub50fwouwj_s.png" alt="ููุญุฉ ุงูุฏูุงุฆุฑ"></p><br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉู ูุฐูู ุ ูู ุงููุฑุงุฌุนุฉ ุงูุซุงููุฉ ููุญุฏูุฏ ุ ุชู ุชุตุญูุญ ูุฐู ุงูุฃุฎุทุงุก: ุชูุช ุฅุถุงูุฉ ูุญูู ุชูุงุฑ ูุณุชูุฑ / ุชูุงุฑ 12-3.3V ูุชู ุฅุถุงูุฉ ูุถูุน GND ุจุดูู ุฅุถุงูู ุนูู ุงูุทุจูุฉ ุงูุณูููุฉ ูุชู ุฒุฑุน ูุณุงุฏุฉ ุงูุฑูุงูุฉ ุนููู + ูุชู ุงูุญูุงุธ ุนูู ูุถูุน ุงูุฃุฑุถูุฉ ุงูุตูุจุฉ ุงูุฏุงุฎูู.  ุจุนุฏ ูุฐู ุงูุชุญุณููุงุช ุ ุงูุฎูุถุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ูู ุงูุชุดุบูู ุงููุณุชูุฑ ูู +82 ุฅูู +43 <sup>ุฏุฑุฌุฉ</sup> ูุฆููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/_p/t9/qf/_pt9qfhtiicqqdj-kuo_ssg2zsm.png" alt="ุญุฑุงุฑู"></p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ุ ูุธุฑูุง ูุงูุฎูุงุถ ุงูููุฏุงู ุ ุงูุฎูุถุช ุฏุฑุฌุฉ ุงูุญุฑุงุฑุฉ ุจุดูู ูุจูุฑ ูู ุธู ููุณ ุงูุธุฑูู ุ ููุง ุฃู ุงูุญุฑุงุฑุฉ ููุฒุนุฉ ุงูุขู ุจุดูู ุฃูุซุฑ ุชูุงุฒูุงู ุนูู ูุณุงุญุฉ ุงูููุญุฉ ููุง ุชุณุฎู ูุญููุงู ุฅูุง ุงูุณุงุฆู ุฃู ุงููุชุญูู ุงูุฏููู.  ูู ุญูุซ ุงููุจุฏุฃ ุ ูุงู ูู ุดูุก ูู ุงูุญุฏูุฏ ุ ููู ูุญุฏุซ ุดูุก ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูุนูู ุจุดูู ูุณุชูุฑ.  ูุชูุฌุฉ ูุฐูู ุ ูุฏ ููุตูู ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ุงูุชุดุบูู <strong>DRV8353</strong> . </p><br><h1 id="realizaciya-apparatnogo-sdviga-faz-na-120suposup" style=";text-align:right;direction:rtl">  ุชูููุฐ ูุฑุญูุฉ ุงูุชุญูู ุงูุฃุฌูุฒุฉ ูู 120 <sup>ุณ</sup> </h1><br><p style=";text-align:right;direction:rtl">  ุชุชูุซู ุฅุญุฏู ููุฒุงุช ุงูุดุจูุฉ ุซูุงุซูุฉ ุงูุทูุฑ ูู ุฃู ุงูุชูุงุฑ ูู ุงููุฑุงุญู ููุณ ูุชุฒุงูููุง ุ ูููู ูุชู ุฅุฒุงุญุชู ุจููุฏุงุฑ 120 <sup>o</sup> ุจุงููุณุจุฉ ุฅูู ุงููุฑุญูุฉ ุงููุฌุงูุฑุฉ.  ูุง ูู ูุฐุง ุงูุชุญูู 120 <sup>ุณ</sup> ุงููุฑุญูุฉ ุจุดูู ุนุงูุ  ุจุนุจุงุฑุงุช ุจุณูุทุฉ ุ ูุฐุง ูู ุชุญูู ููุทุฉ ุจุฏุงูุฉ ุงูุฌูู ุจููุฏุงุฑ 1/3 ูู ูุฐู ุงููุชุฑุฉ.  ูู ูุฌูุฉ ุงููุธุฑ ุงูุฑูุงุถูุฉ ุ ุชููู ูุชุฑุฉ ุงูุฅุดุงุฑุฉ <em>2ฯ</em> ุ ููุง ูุนูู ุฃูู ูุฌุจ ุชุญุฑูู ุงูุฅุดุงุฑุฉ ุงูุซุงููุฉ ุจููุฏุงุฑ 2ฯ / 3 ุ ูุงูุซุงูุซุฉ ุจููุฏุงุฑ 4ฯ / 3.  ูู ูุฌูุฉ ูุธุฑ ุฅููุชุฑูููุฉ ุ ูุชู ุชุนููู ุงููุชุฑุฉ ูู ุฎูุงู ูุชุฑุฉ ุงูุนุฏ ุงูุชูุงุฒูู ูุฌูุงุฒ ุถุจุท ุงูููุช.  ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏ ุชุณุฌูู ุงูููุช ุจุชุฑุฏุฏ 60 MHz ุ ูุฑูุฏ ุงูุญุตูู ุนูู PWM ุจุชุฑุฏุฏ 50 ูููู ูุฑุชุฒ ุ ููุง ูุนูู ุฃู ูุชุฑุฉ ุงูุนุฏ ุงูุชูุงุฒูู ุงููุคูุช ุณุชููู ูู 0 ุฅูู 1200 (60000 Hz / 50 000 Hz = 1200).  ุงูุขู ุ ููุญุตูู ุนูู 3 ูุฑุงุญู ูุน ุงูุชุญูู ูู 120 <sup>ุฏุฑุฌุฉ ุ</sup> ูุง ูุญุชุงุฌ ุฅูู ููุณ ุงููุฑุญูุฉ ุงูุฃููู ุ ุฅุถุงูุฉ +400 ุฅูู ุงููููุฉ ุงูุญุงููุฉ ูููุฑุญูุฉ ุงูุซุงููุฉ ุ ุฅุถุงูุฉ + 800 ุฅูู ุงููุฑุญูุฉ ุงูุญุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุงุณุชุฎุฏููุง ูููุฑูููุชุฑููุฑ ุนูู ูุจ ุงููุดุฑุฉ ุ ููููููุง ุชูููุฐ ูุฐุง ุงูุชุญูู ุฅูุง ุนู ุทุฑูู ูุชุงุจุฉ ุตูุบุฉ ุฑูุงุถูุฉ ุฃู ุจุงุณุชุฎุฏุงู ุชุฒุงูู ุงูุฃุญุฏุงุซ.  ูุงู ูู ุงููุฏูุด ุฏูููุง ุจุงููุณุจุฉ ูู ุฃู ST ู NXP ูุบูุฑูู ูู ูุณุฌููุง ููุท ุญูุซ ุณูุชู ูุชุงุจุฉ ูููุฉ ุงูุชุญูู.  ูุญุณู ุงูุญุธ ุ ูุนูุช TI ูุฐุง ูู TMS320F28xxx ุ ูุชุนููู ุงูุชุญูู ุ ููุท ุงูุชุจ ุณุฌู ูุงุญุฏ!  ูู ุฃุฎุจุฑูู ุนู ุงูุณุจุจ ูู ุฃู ุญู ุงูุจุฑูุงูุฌ ููุณ ูู ุงูุฃูุซู ุ ุณุฃููู ููุท ุฃูู ูุนุชุจุฑ ุตูุบ MK ุบูุฑ ุณุฑูุนุฉ ุฌุฏูุง.  ุฅู ุงูููุงููุฉ ุงููุฒุงููุฉ ูู ุงูุฃุญุฏุงุซ ุฃูุซุฑ ููุงุกูุฉ ุจุงููุนู ุ ููู ูุฐุง ุงูููุช ุณุฃูุนู ุฐูู ุ ููู ูุฐุง ุงูุฎูุงุฑ ูุง ูุณูุญ ุจุชุบููุฑ ูููุฉ ุงูุทูุฑ ุฃุซูุงุก ุงูุทูุฑุงู ุ ุฃู ุจุงููุณุจุฉ ูุจุนุถ ุงูุฌุณูุฑ ุงูุชู ุชุญููุช ุทูุฑูุง ูุฑุฉ ุฃุฎุฑู ุ ูุจูู ุฅุตุฏุงุฑ ุงูุจุฑูุงูุฌ ููุท.  ูู ููุฒุฉ ุงููุฏุฑุฉ ุนูู ุงูุชุญูู ูู ุฃุฌูุฒุฉ ุงููุฑุญูุฉุ  ุงูุฃูุฑ ูุชุฑูู ูู ูุชูุฑูุฑ ุ ููููุชู ูู ุฃู ุฃููู ูู ุฃูู ูู ุงููููู.  ุจุงููุณุจุฉ ูู ุ ุชุนุฏ ูุฐู ููุฒุฉ ุฅุถุงููุฉ ุนูุฏูุง ูุชุญุฏุซ ุนู ุงูุชุญูู ูู ูุญุฑู ููุฑุจุงุฆู ุฃู ูุญููุงุช ุงูุฌูุฏ ุงูููุฑุจุงุฆู ุจุฅุฎุฑุงุฌ ุซูุงุซู ุงูุทูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฏุนููุง ุชูููู ุชูููุฏ ุฅุดุงุฑุงุช PWM ูู ุดูู 3 ุฃุฒูุงุฌ ุชูููููุฉ ูุน ุงูููุช ุงูููุช ูุชุญูู ุงููุฑุญูุฉ.  ุญุชู ุงูุขู ุฏูู ุดุฑุท.  ุณุฃุณุชุฎุฏู ุงูุฃุฒูุงุฌ ุงูุชุงููุฉ: EPWM1A + EPWM1B ุ EPWM2A + EPWM2B ู EPWM4A + EPWM4B.  ูุฐู ูู ุงูุฅุดุงุฑุงุช ุงูุชู ุชูุชูู ูู ูุชุญูู ุฅูู ุงูุณุงุฆู. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุงูุฎุทูุฉ 1</strong> <br>  ูู ุงูุถุฑูุฑู ุชูููู ููุถุงุนูู GPIO ุจูุณุงุนุฏุฉ ุณุฌู <em>GPAMUX</em> ููุนูู ูุน PWM ูุฅููุงู ุนูููุงุช <em>ุณุญุจ</em> ุงูุฅุฎุฑุงุฌ ุฅูู ูุตุฏุฑ ุงูุทุงูุฉ ุ ุจุญูุซ ุนูุฏ ุชุดุบูู ุฌููุน ุงูุฃุฑุฌู ูุง ูููู ููุง ุณุฌู .1 ููุง ุชูุชุญ ุงูููุงุชูุญ.  ุจุงูุชุฃููุฏ ุณุชููุฑ ุงูุญูุงูุฉ ุงูุญุงููุฉ ุ ููู ูู ุงูุฃูุถู ุนุฏู ุงูููุงู ุจุฐูู.  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฃูุถูุง ุฅูู ุฃูู ูููุตูู ุฅูู ุณุฌูุงุช ุงูุฅุนุฏุงุฏ ุ ุชุญุชุงุฌ ุฅูู ุงูุญุตูู ุนูููุง ุจุงุณุชุฎุฏุงู ุงูุฃูุฑ <em>EALLOW</em> ุซู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุญูุงูุฉ ูู ุงููุชุงุจุฉ ุงูููููุฉ ุจุงุณุชุฎุฏุงู ุฃูุฑ <em>EDIS</em> . </li></ul><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitGPIOforPWM</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ EALLOW; GpioCtrlRegs.GPAPUD.bit.GPIO0 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Disable pull-up on GPIO0 (EPWM1A) GpioCtrlRegs.GPAPUD.bit.GPIO1 = 1; // Disable pull-up on GPIO1 (EPWM1B) GpioCtrlRegs.GPAMUX1.bit.GPIO0 = 1; // Configure GPIO0 as EPWM1A GpioCtrlRegs.GPAMUX1.bit.GPIO1 = 1; // Configure GPIO1 as EPWM1B GpioCtrlRegs.GPAPUD.bit.GPIO2 = 1; // Disable pull-up on GPIO2 (EPWM2A) GpioCtrlRegs.GPAPUD.bit.GPIO3 = 1; // Disable pull-up on GPIO3 (EPWM2B) GpioCtrlRegs.GPAMUX1.bit.GPIO2 = 1; // Configure GPIO2 as EPWM2A GpioCtrlRegs.GPAMUX1.bit.GPIO3 = 1; // Configure GPIO3 as EPWM2B GpioCtrlRegs.GPAPUD.bit.GPIO6 = 1; // Disable pull-up on GPIO6 (EPWM4A) GpioCtrlRegs.GPAPUD.bit.GPIO7 = 1; // Disable pull-up on GPIO7 (EPWM4B) GpioCtrlRegs.GPAMUX1.bit.GPIO6 = 1; // Configure GPIO6 as EPWM4A GpioCtrlRegs.GPAMUX1.bit.GPIO7 = 1; // Configure GPIO7 as EPWM4B EDIS; }</span></span></code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุงูุฎุทูุฉ 2</strong> <br>  ุฅุนุฏุงุฏ ุชูููุฏ ุฅุดุงุฑุฉ PWM.  ูู ุงูุถุฑูุฑู ุงูุญุตูู ุนูู ุชุฑุฏุฏ ูุฏุฑู 50 ูููู ูุฑุชุฒ ูุชุญูู ุทูุฑ ูุฏุฑู 120 <sup>ุฏุฑุฌุฉ ูุฆููุฉ</sup> .  ูู ูุฐู ุงูุญุงูุฉ ุ ูููููู ุงุณุชุฎุฏุงู PWM ุงููุนุชุงุฏ ุ ูุฃูู ูู ูุญุฏุฉ ุงูุชุญูู ูุฐู ุชูุฌุฏ ุฃูุถูุง HRPWM ุ ูู ุงูููู ุชุฐูุฑ ุฐูู.  ุชู ุชุณุฌูู ุงููุญุฏุฉ ุงูููุทูุฉ PWM ูู ุงูุชุฑุฏุฏ ุงูุฃุณุงุณู ุ ุฃู 60 ููุฌุง ูุฑุชุฒ ุ ูุฃุธูุฑุช ููููุฉ ุถุจุท ุชุฑุฏุฏ PLL ูู ุงูููุงูุฉ ุงูุฃููู ุนูู TMS320 ุ ููู ุฃูุฑุฑ ุฐูู ุ ูููู ูู ููุงูุฉ ุงูููุงูุฉ ุณูููู ููุงู ุฃุฑุดูู ูุน ุงูุฑูุฒ ูุณูููู ูู ุงููููู ุฅููุงุก ูุธุฑุฉ ุฎุงุทูุฉ ุนููู. </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitPWM</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// EPWM Module 1 config EPwm1Regs.TBPRD = 600; // Set priod EPwm1Regs.TBPHS.half.TBPHS = 0; // Set phase EPwm1Regs.TBCTL.bit.CTRMODE = TB_COUNT_UPDOWN; // Symmetrical mode EPwm1Regs.TBCTL.bit.PHSEN = TB_DISABLE; // Master enable EPwm1Regs.TBCTL.bit.PRDLD = TB_SHADOW; EPwm1Regs.TBCTL.bit.SYNCOSEL = TB_CTR_ZERO; // Sync down-stream module EPwm1Regs.CMPCTL.bit.SHDWAMODE = CC_SHADOW; EPwm1Regs.CMPCTL.bit.SHDWBMODE = CC_SHADOW; EPwm1Regs.CMPCTL.bit.LOADAMODE = CC_CTR_ZERO; EPwm1Regs.CMPCTL.bit.LOADBMODE = CC_CTR_ZERO; EPwm1Regs.AQCTLA.bit.CAU = AQ_SET; EPwm1Regs.AQCTLA.bit.CAD = AQ_CLEAR; EPwm1Regs.DBCTL.bit.OUT_MODE = DB_FULL_ENABLE; // enable dead-time module EPwm1Regs.DBCTL.bit.POLSEL = DB_ACTV_HIC; // Active Hi complementary EPwm1Regs.DBFED = 20; // dead-time on 20 tick EPwm1Regs.DBRED = 20; // dead-time off 20 tick // EPWM Module 2 config EPwm2Regs.TBPRD = 600; EPwm2Regs.TBPHS.half.TBPHS = 400; // Set phase = 400/1200 * 360 = 120 deg EPwm2Regs.TBCTL.bit.CTRMODE = TB_COUNT_UPDOWN; EPwm2Regs.TBCTL.bit.PHSEN = TB_ENABLE; // Slave enable EPwm2Regs.TBCTL.bit.PHSDIR = TB_DOWN; // Count DOWN on sync (=120 deg) EPwm2Regs.TBCTL.bit.PRDLD = TB_SHADOW; EPwm2Regs.TBCTL.bit.SYNCOSEL = TB_SYNC_IN; // sync flow-through EPwm2Regs.CMPCTL.bit.SHDWAMODE = CC_SHADOW; EPwm2Regs.CMPCTL.bit.SHDWBMODE = CC_SHADOW; EPwm2Regs.CMPCTL.bit.LOADAMODE = CC_CTR_ZERO; EPwm2Regs.CMPCTL.bit.LOADBMODE = CC_CTR_ZERO; EPwm2Regs.AQCTLA.bit.CAU = AQ_SET; EPwm2Regs.AQCTLA.bit.CAD = AQ_CLEAR; EPwm2Regs.DBCTL.bit.OUT_MODE = DB_FULL_ENABLE; EPwm2Regs.DBCTL.bit.POLSEL = DB_ACTV_HIC; EPwm2Regs.DBFED = 20; EPwm2Regs.DBRED = 20; // EPWM Module 4 config EPwm4Regs.TBPRD = 600; EPwm4Regs.TBPHS.half.TBPHS = 400; EPwm4Regs.TBCTL.bit.CTRMODE = TB_COUNT_UPDOWN; EPwm4Regs.TBCTL.bit.PHSEN = TB_ENABLE; EPwm4Regs.TBCTL.bit.PHSDIR = TB_UP; EPwm4Regs.TBCTL.bit.PRDLD = TB_SHADOW; EPwm4Regs.TBCTL.bit.SYNCOSEL = TB_SYNC_IN; EPwm4Regs.CMPCTL.bit.SHDWAMODE = CC_SHADOW; EPwm4Regs.CMPCTL.bit.SHDWBMODE = CC_SHADOW; EPwm4Regs.CMPCTL.bit.LOADAMODE = CC_CTR_ZERO; EPwm4Regs.CMPCTL.bit.LOADBMODE = CC_CTR_ZERO; EPwm4Regs.AQCTLA.bit.CAU = AQ_SET; EPwm4Regs.AQCTLA.bit.CAD = AQ_CLEAR; EPwm4Regs.DBCTL.bit.OUT_MODE = DB_FULL_ENABLE; EPwm4Regs.DBCTL.bit.POLSEL = DB_ACTV_HIC; EPwm4Regs.DBFED = 20; EPwm4Regs.DBRED = 20; }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ุงููุฒูุฏ ูู ุงูุชูุงุตูู ... ูู ุณุฌู <em>TBPRD</em> ุ ุงูุชุจ ุงููุชุฑุฉ ุ ุฃู ุจุงูุฃุญุฑู ุ "ุงููุชุฑุฉ / 2" ุ ูุฃู  ูุชู ุญุณุงุจ ุงููููุช ูู ููุง ุงูุงุชุฌุงููู ุ ูุงุชุถุญ ุฃู ุงููุชุฑุฉ 600 ุชุชูุงูู ูุน ุชุฑุฏุฏ ุฅุดุงุฑุฉ ุฎุฑุฌ PWM ุงูุจุงูุบุฉ 50 ูููู ูุฑุชุฒ ูู ูุถุน ุงูุฒูุฌ ุงูุชููููู.  ูู ุณุฌู <em>TBPHS</em> ููุชุจ ูููุฉ ุงููุฑุญูุฉ ุงูุชู ูุญุชุงุฌ ุฅูู <em>ุชุญููููุง</em> ุ ูู ูุฐู ุงูุญุงูุฉ 400 ูู 600 ุ ุฃู ูุง ูุนุงุฏู 2ฯ / 3.  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃููุง ูุง ูุชุญุฑู ูู ุงููุฑุญูุฉ ุงูุฃููู ุ ูุฐูู ุงูุชุญูู ูู 0 ุ ุจุงููุณุจุฉ ูููุฑุญูุฉ ุงูุซุงููุฉ ุ ูููู ุงูุชุญูู 400 ุ ุนูู ุงูุชูุงูู ุ ูููู ุจุงููุณุจุฉ ูููุฑุญูุฉ ุงูุซุงูุซุฉ ุ ูู ุงูููุทูู ุฃู ุชูุชุจ 800 ุ ูููู 800 ูู 600 ุจุทุฑููุฉ ูุง ููุณ ุญููุง ... ูุฐูู ููุชุจูู ุงูุชุญูู ุบูุฑ ุงููุชุนูู ุจุงููุฑุญูุฉ ุงูุฃููู ุ ูููู ุจุงููุณุจุฉ ุฅูู ุงููุฑุญูุฉ ุงูุณุงุจูุฉ ุ ุฃู ุงููุฑุญูุฉ ุงูุซุงููุฉ.  ูุชูุฌุฉ ูุฐูู ุ ุญุตููุง ุนูู ุฐูู ูู ุงููุฑุญูุฉ ุงูุซุงูุซุฉ ููุชุจ 400 ุ ููุฐุง ููุงุจู 2ฯ / 3 ุจูู ุงููุฑุญูุฉ 2 ู 3 ุ ูุจูุง ุฃู ุงููุฑุญูุฉ ุงูุซุงููุฉ ูุฏ ุชุญููุช ุจุงููุนู ุ ูุณูููู ููุงู "2ฯ / 3 + 2ฯ / 3 = 4ฯ" ุจูู ุงููุฑุญูุชูู 1 ู 3 / 3 "ููู ูุฌูุฉ ูุธุฑ ุงูุฅููุชุฑูููุงุช ูู ุดูุก ูุจุฏู ููุทููุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุฃู ุชููู ุงููุฑุงุญู ูู ูุชุญุฑู ุจุงููุณุจุฉ ููู ุ ููุงู ุญุงุฌุฉ ุฅูู ุฑุฆูุณ ุ ูุฐูู ุชู ุชุนููู <em>EPWM1</em> ุจุงุณุชุฎุฏุงู ุจุช <em>PHSEN</em> ูุฅุชูุงู ุงููุถุน ุ ู EPWM2 ู EPWM4 ุ ุนูู ุงูุชูุงูู ุ ูุนุจูุฏ.  ุจุงุณุชุฎุฏุงู ุจุช <em>SYNCOSEL</em> ุ ูุชู <em>ุฃูุถูุง</em> ุถุจุท "ููุทุฉ" <em>ุงูุชุฒุงูู</em> ุ ุฃู ูู ุฃูู ุชูุฑุฃ ุงูุชุญูู ูู.  ุชุชู ูุฒุงููุฉ EPWM1 โโูุน ุจุฏุงูุฉ ุงููุคูุช ุ ุฃู ูุน ูุชุฑุฉ ุงูุตูุฑ ุ ููุฒุงููุฉ EPWM2 ู EPWM4 ุจุงููุนู ุจุงููุณุจุฉ ูุญุงูุฉ ุฅุดุงุฑุฉ ุงูููุงุฉ ุงูุณุงุจูุฉ: ุงูููุงุฉ ุงูุณุงุจูุฉ ูู EPWM2 ูู EPWM1 โโุ ููู EPWM2. </p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ูุจูู ูุชุดุบูู ุฃุฒูุงุฌ ุชูููููุฉ ูุชุนููู ูุฏุฉ ุงูููุช.  ุจุงุณุชุฎุฏุงู ุจุชุงุช <em>POLSEL</em> ุ <em>ูููุง</em> ุจุชุนููู PWM ุบูุฑ ูุนููุณ ุ ุฃู ุนูุฏ ุงููุตูู ุฅูู ุงููููุฉ ุงููุญุฏุฏุฉ ููููุงุฑูุฉ (ุงููุฑุฌุน) ุ ูุชู ุฅูุดุงุก ุณุฌู ุนูุฏ ุงูุฅุฎุฑุงุฌ.  1. ูู <em>OUT_MODE ุ ุญุฏุฏูุง</em> ุชูููุฏ ุงูููุช <em>ุงููููุช</em> ุนูู ุงูุญุงูุฉ ูุณููุท ุงูุฅุดุงุฑุฉ.  ูููุง ูุฐูู ุ ูู ุณุฌูุงุช <em>DBFED</em> ู <em>DBRED</em> ุงูุชุจ ูุฏุฉ ุงูููุช ุงูููุช ูู ุงููุฑุงุฏ. </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ุงูุฎุทูุฉ 3</strong> <br>  ุงูุขู ูุจูู ููุชุงุจุฉ ูููุฉ ุนุงูู ุงููุงุฌุจ ูู ุณุฌู <em>CMPA</em> ุงูููุงุจูุฉ ููู ููุงุฉ ูููููู ูุฑุงูุจุฉ ุงููุชูุฌุฉ. </li></ul><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> EPwm1Regs.CMPA.half.CMPA = <span class="hljs-number"><span class="hljs-number">300</span></span>; <span class="hljs-comment"><span class="hljs-comment">// duty for output EPWM1A EPwm2Regs.CMPA.half.CMPA = 300; // duty for output EPWM2A EPwm4Regs.CMPA.half.CMPA = 300; // duty for output EPWM4A</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/sl/wy/6b/slwy6b5zoivfrdpbzlf9vpbsmms.png" alt="ุซูุงุซ ูุฑุงุญู PWM"></p><br><p style=";text-align:right;direction:rtl">  ููููุง!  ุชุฑุชุจุท ุชุญูููุงุช ุงูุฐุจุฐุจุงุช ุจุฅุฎุฑุงุฌ ุจุฑูุงูุฌ ุงูุชุดุบูู.  ุงูููุงุฉ ุงูุตูุฑุงุก ูู EPWM1 โโูุฏููุง ุ ููุฐุง ูู ุ ุณูุฏ.  ุงูููุงุฉ ุงูุฒุฑูุงุก ูู EPWM2 ููุชู ุฅุฒุงุญุชูุง 2ฯ / 3 (ุฃู 400 ุนููุฉ) ูุณุจุฉ ุฅูู ุงูููุงุฉ ุงูุตูุฑุงุก ุ ููุชู ุฅุฒุงุญุฉ ุงูููุงุฉ ุงูุฎุถุฑุงุก 400 ุนููุฉ ุฃุฎุฑู.  ูุจุงูุชุงูู ูุญุตู ุนูู 3 ูุฑุงุญู ุ ุญูุซ ูุชู ุชุจุฏูู ูู ูุฑุญูุฉ ุจููุฏุงุฑ 120 <sup>ุฏุฑุฌุฉ ูุฆููุฉ</sup> . </p><br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ุงูุขู ูููู ุชุญูููุงุช ุงูุฐุจุฐุจุงุช ูู ูุฎุฑุฌ ุฌุณุฑ ุงููุฏุฑุฉ ุฅูู ุฅุดุงุฑุงุช ุงูุชุญูู ุงูุชู ุชุฎุฑุฌ ูู ุงููุชุญูู ุงูุฏููู ูุชุฃูุฏ ูู ูุฌูุฏ ููุช ููุงุฉ ุฏุงุฎู ุงูุฒูุฌ ุงูุชููููู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/cd/aj/k7/cdajk7vfo9vs5d1yzvbuvtggy00.png" alt="ุงูุฐุจุฐุจุงุช ุฑูู 2"></p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ุ ูุฅู ุงูููุช ุงูููุช ุงููุญุฏุฏ ูุชูุงูู ูุน ุงูููุช ุงูุญูููู.  ูุฏุฉ ุงูุนููุฉ ุงููุงุญุฏุฉ ูู <em>1 / 60ุ000ุ000 ูุฑุชุฒ = 16.6 ูุงููุซุงููุฉ</em> ููุญุตู ุนูู 20 ุนููุฉ ุ ุฃู ูุง ูุนุงุฏู ุงูููุช ุงูููุช 20.6 <em>16</em> ูุงููุซุงููุฉ = 332 ูุงููุซุงููุฉ ุ * ููู ูุง ููุฑุจ ูู ูุง ููุญุธ ุนูู ุงูุฐุจุฐุจุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงููุงูุน ุญูุซ ูููู ุฃู ูุฃุชู ูุฐุง ูู ูุชูุงูู ูุฏู ุ ูู ุงูุดูู ุงูุฐู ูู ุนููู ุงูุขู.  ุงูุฎูุงุฑ ุงูุฃูุซุฑ ูุถูุญูุง ูู ูุญููุงุช dc / dc ูุชุนุฏุฏุฉ ุงูุฃุทูุงุฑ ุ ููุฑุงุบุจูู ูู google <strong>ุจูุญูู dc / dc ุงููุชุฏุงุฎู</strong> .  ูุฐุง ูู ุญู ุชููู ูุซูุฑ ููุงูุชูุงู ููุบุงูุฉ ูููู ุฃู ูููู ุจุดูู ูุจูุฑ ูู ุญุฌู ูุญุงุซุงุช ุงูุทุงูุฉ ุ ููููู ูู ุงูุณุนุฉ ุงูุฅุฎุฑุงุฌ ููููุซูุงุช ุ ููุฐูู ุฒูุงุฏุฉ ุงูููุงุกุฉ.  ุนูู TMS320F28027 ุจุณูุท ุ ููููู ุชูููุฐ ูุญูู ูู 4 ูุฑุงุญู ูุณูุชู ุชูููุฐ ูู ูุฐุง ุจุจุณุงุทุฉ ูู ุงูููุฏ ููู ุงูุฃุฌูุฒุฉ ููุท. </p><br><h1 id="generiruem-trehfaznoe-peremennoe-napryazhenie" style=";text-align:right;direction:rtl">  ูุญู ูููุฏ ุฌูุฏ ุงูุชูุงุฑ ุงููุชุฑุฏุฏ ุซูุงุซู ุงููุฑุงุญู </h1><br><p style=";text-align:right;direction:rtl">  ูู ุงูุนุฏูุฏ ูู ุงููุดุงูู ุ ูู ูููู ูุงููุงู ููุญุตูู ุนูู ููู ูููุตูุฉ ูู 0 ุฃู VCC ุนูุฏ ุงูุฎุฑุฌ ุ ููุงู ุญุงุฌุฉ ุฅูู ููุฌุฉ ุฌูุจูุฉ.  ูุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู</a> ูุชุญุฏุซ ุนู ุชุดููู ุฌูุฏ ุงูุชูุงุฑ ุงููุชุฑุฏุฏ ุฃุญุงุฏู ุงูุทูุฑ ููุชู ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ "ุงููุฌุฏููุฉ" ููุงู ุ ุฃู ุชู ุญุณุงุจ ููู ุงูููุฌุฉ ุงูุฌูุจูุฉ ูู ุงูุจุฏุงูุฉ.  ูู ุญูุซ ุงููุจุฏุฃ ุ ูููู ุงูููุงู ุจุฐูู ุฃูุถูุง ูู ุฃุฌู ุงููุฑุงุญู ุงูุซูุงุซ ุ ููููู ุฃุฑุบุจ ูู ุนุฑุถ ุฎูุงุฑ ุจุฏูู ุ ุฃูุง ููู ุญุณุงุจ ูููุฉ ุงููุงุฌุจ ูู ุงูููุช ุงููุนูู ุฃู ุฃุซูุงุก ุงูุทูุฑุงู. </p><br><p style=";text-align:right;direction:rtl">  ููุงู ููุฒุฉ ูุงุญุฏุฉ.  ุชุฑุฏุฏ PWM ูู ูุฐู ุงูุญุงูุฉ ูู ุฃูุถูุง 50 ูููู ูุฑุชุฒ ููุชู ุถุจุท ุฅุฒุงุญุฉ ุงูุทูุฑ ุจูู ูุชุฑุงุช ูุฐู ุงูุฅุดุงุฑุฉ.  ููููุง ูุฐูู ุ ุนูุฏูุง ูููู ุจุชุนุฏูู ุงูุฌููุจ ุงูุฃูููุฉ ุจุชุฑุฏุฏ 50 ูุฑุชุฒ ุ ุณูุชู "ุชุบูููุฑ" ูุฑุญูุฉ ุทูุฑ ุงูุฃุฌูุฒุฉ ุ ูุณุชุธู ููุฌูุฏุฉ ุจูู PWMs ุ ูููู ููุณ ุฏุงุฎู ุงูุฌููุจ ุงูุฃูููุฉ ุ ูุฐูู ูุฌุจ ุฃู ูุชู ุฐูู ุจุฑูุฌูุงุช.  ุนูู ุงููุซูุซุงุช ูู ุดูุก ุซููู ุจุงููุณุจุฉ ุฅูู TMS320F28027 ุ ูููู ููุณ ูุดุบูููุง ุฌุฏูุง ูุนู ุ ูุฐูู ุฏุนู ูุญุณุจ.  ุฅุฐุง ูุงู ูุฏูู ูููุฉ ุชุชุทูุจ ุงููุซูุฑ ูู ุงูุนูููุงุช ุงูุญุณุงุจูุฉ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ูุญุฏุฉ ุชุญูู ูุน TMU ู FPU ุ ุนูู ุณุจูู ุงููุซุงู ุ TMS320F280049 ุ ูุงูุชู ูููู ุฃู ุชุญูู ุงูุฑูุงุถูุงุช ุจุดูู ุฃุณุฑุน. </p><br><p style=";text-align:right;direction:rtl">  ูุชุญููู ููู ุงููุงุฌุจ ูู PWM ุ ูุญุชุงุฌ ุฅูู ูุคูุช ุ ุณุชุญุฏุฏ ุงููุชุฑุฉ ุงูุฒูููุฉ ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช.  ุฃุญุชุงุฌ ุฅูู ูุชุฑุฉ 20 ูููู ุซุงููุฉ (1/50 ูุฑุชุฒ = 20 ูููู ุซุงููุฉ) ูุณุฃุฎุฐ ุนุฏุฏ ุงูุฎุทูุงุช ูู ุงูุฌููุจ ุงูุฃูููุฉ ุ ุฏุนูุง ูููู 20 ุ ููุชูุฌุฉ ูุฐูู ุ ูุฌุจ ุฅูุดุงุก ููุงุทุนุฉ ุจุชุฑุฏุฏ ูุฏุฑู 0.02 ุซุงููุฉ / 20 = 0.001 ูููู ุซุงููุฉ = 1 ูููู ูุฑุชุฒ ููู ูุฐู ุงูููุงุทุนุฉ ุณุฃูุชุจ ุงููููุฉ ุฅูู PWM .  ููุจุณุงุทุฉ ุ <em>ุณุฃุณุชุบุฑู</em> ูุคูุช <em>CPU0 ูุคูุชูุง ูุฃููุฆู</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitTimer0ForGenerator</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ EALLOW; PieVectTable.TINT0 = &amp;cpu_timer0_isr; EDIS; InitCpuTimers(); ConfigCpuTimer(&amp;CpuTimer0, <span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>); CpuTimer0Regs.TCR.bit.TIE = <span class="hljs-number"><span class="hljs-number">1</span></span>; CpuTimer0Regs.TCR.bit.TSS = <span class="hljs-number"><span class="hljs-number">0</span></span>; IER |= M_INT1; PieCtrlRegs.PIEIER1.bit.INTx7 = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// Enable TINT0 in the PIE: Group 1 interrupt 7 EINT; // Enable Global interrupt INTM ERTM; // Enable Global real-time interrupt DBGM } __interrupt void cpu_timer0_isr (void) { CpuTimer0.InterruptCount++; /* *   -  . ... */ PieCtrlRegs.PIEACK.all = PIEACK_GROUP1; // Acknowledge this interrupt to receive more interrupts from group 1 }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุนุฏ <em>ูุธุงุฆู InitCpuTimers</em> ู <em>ConfigCpuTimer</em> ููุงุณูุฉ ุ ูุฌููุน ุงูุฅุนุฏุงุฏุงุช ููุฌูุฏุฉ ูููุง ุ ูุญุชุงุฌ ููุท ุฅูู ููู ุงูุชุฑุฏุฏ ุงูุฃุณุงุณู (60 ููุฌุงูุฑุชุฒ) ููุชุฑุฉ ุงูุญุณุงุจ ุจุงููููุฑูุซุงููุฉ (1000 ฮผs = 1 ูููู ุซุงููุฉ) ุ ุฃู ูุง ูุนุงุฏู 1 ูููู ูุฑุชุฒ ุ ููุญู ูู ุญุงุฌุฉ ุฅูููุง.  ูุฐุง ุ ูู ูุธููุฉ ุงูุชูููู ุ ูููููุง ุชูููู ุงูููุงุทุนุงุช ูุชูุฑูุฑ ุนููุงู ูุนุงูุฌ ุงูููุงุทุนุฉ ุ ุญูุซ ุณูุญุฏุซ ูู ุดูุก. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุถุฑูุฑู ุงูุขู "ุงุฎุชุฑุงุน" ุตูุบุฉ ุงูุฌูุจ ูุฑุฉ ุฃุฎุฑู ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ุนูู ุงููุซูุซุงุช ุงููุฏุฑุณูุฉ ููุฐุง ูู ุดูุก.  ูููุฐุง ... ูุฏููุง ูุธููุฉ <strong><em>y = sin (x)</em></strong> ููุฑุณู ูุฐู ุงููุธููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hi/bx/ey/hibxeyajv_h7l7t-mqkbkfrq6-s.png" alt="ุฐ = ุงูุฎุทูุฆุฉ (ุณ)"></p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ูู ุงูุฑุณู ุงูุจูุงูู ุ ุชุชุฑุงูุญ ุณุนุฉ y ูู -1 ุฅูู 1 ุ ููููุง ูุฑูุฏ ูู 0 ุฅูู 1 ุ ูุฃู  ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุณุนุฉ ูุฏููุง 0V ุ ูุจุญุฏ ุฃูุตู (ุฃู ูุง ูุนุงุฏู 1) ูุฏููุง + VCC.  "ูุฑุณู" -1 ... + 1 ูุญุชุงุฌ ุฅูู ุชุบุฐูุฉ ุซูุงุฆูุฉ ุงููุทุจ ุ ููู ุงูุฃูุฑ ููุณ ูุฐูู.  ุชุญุชุงุฌ ุฅูู ุชุญููู ุงููุฎุทุท ูู ุงุชุฌุงู ุฅูุฌุงุจู.  ุฅุฐุง ูููุง ุจุฑูุนูุง ููุท ุ ูุณูุตุจุญ ูู 0 ุฅูู +2 ุ ููููููุง ููุท +1.  ูุฐูู ุชุญุชุงุฌ ุฅูู ุงููุณูุฉ ุนูู 2 ูุดูุก ููุท!  ููุจุฏุฃ ุจูุฌุฑุฏ ุงููุณูุฉ ูุงูุชุฎุทูุท ูู <strong><em>y = (sin (x) / 2):</em></strong> </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/t_/n0/iw/t_n0iw1fym8aboggaxk1my7r4um.png" alt="ุต = (ุงูุฎุทูุฆุฉ (ุณ) / 2)"></p><br><p style=";text-align:right;direction:rtl">  ุขูุง!  ูุญุชูู ุงูุฑุณู ุงูุจูุงูู ุงูุขู ุนูู ูุทุงู ูู -0.5 ุฅูู +0.5 ุ ุฃู ุฃู ุงูุณุนุฉ ูู 1. ุฅูู ุจุงููุนู ุฃูุถู ุ ููููุง ูู ูุชุฎูุต ุจุนุฏ ูู ุงูููู ุงูุณูุจูุฉ ุ ูุฐูู ุฏุนููุง ูุญูู ุงูุฑุณู ุงูุจูุงูู ุฅูู 0.5 ุ ูุฐูู ูุญู ุจุญุงุฌุฉ ููุท ุฅูู ุฅุถุงูุฉ ูุฐู ุงููููุฉ ุฅูู ุงููุชูุฌุฉ ูุงูุญุตูู ุนูู ุงูุตูุบุฉ <strong><em>y = 0.5 + (sin (x) / 2)</em></strong> ูุฑุณู ุงูุฑุณู ุงูุจูุงูู ููุฐู ุงููุธููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/df/vu/ez/dfvuez1lks2uhg0cp3tkhie9cdq.png" alt="ุฐ = 0.5 + (ุงูุฎุทูุฆุฉ (ุณ) / 2)"></p><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุฃุตุจุญ ูู ุดูุก ูุซุงูููุง ุชูุงููุง: ุงูุฌููุจ ุงูุฃูููุฉ ููุง ุณุนุฉ 0 ุฅูู 1 ุ ูุงูููู ุงูุณูุจูุฉ ุบุงุฆุจุฉ.  ุชุตู ุงูุตูุบุฉ <strong><em>y = 0.5 + (sin (x) / 2)</em></strong> ุงููุฑุญูุฉ ุงูุฃููู ุ ูุงูุขู ูู ุงูุถุฑูุฑู ุฅุถุงูุฉ ุชุญูู ูุฑุญูุฉ ููุญุตูู ุนูู ุงููุฑุญูุชูู 2 ู 3. ููููุงู ุจุฐูู ุ ูู ุจุทุฑุญ 2ฯ / 3 ู 4ฯ / 3 ูู <em>x ุ</em> ุนูู ุงูุชูุงูู ุ ูุงูุญุตูู ุนูู ุงูุตูุบ ุงููุชุจููุฉ ุงููุฑุงุญู <strong><em>y = 0.5 + (sin (x-2ฯ / 3) / 2)</em></strong> ู <strong><em>y = 0.5 + (sin (x-4ฯ / 3) / 2).</em></strong>  ูุญู ูุจูู 3 ุฑุณูู ุจูุงููุฉ ููุฑู ูุง ุฅุฐุง ูุงูุช ุชุจุฏู ุงูุญูููุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hj/kp/n9/hjkpn93-37r_rclbrevchhdzf_m.png" alt="3 ูุฑุงุญู"></p><br><p style=";text-align:right;direction:rtl">  ููุณ ุณูุฆุง!  ุชุดุจู ุงูุตูุฑุฉ ูุง ูุชู ุฑุณูู ุนุงุฏุฉ ูู ูุชุจ ุงูููุฏุณุฉ ุงูููุฑุจุงุฆูุฉ ุนูุฏูุง ูุชุญุฏุซูู ุนู ุดุจูุฉ ุซูุงุซูุฉ ุงูุทูุฑ ุฃู ูุญุฑูุงุช ุบูุฑ ูุชุฒุงููุฉ.  ุจุงูููุงุณุจุฉ ุ 2.0943 ูู 2ฯ / 3 ุ ู 4.1866 ูู 4ฯ / 3 ุ ุนูู ุงูุชูุงูู ุ ููุฏ ุนุฏุชูุง ููุชู ุนูู ุงูููุฑ ูุชุธูุฑ ูู ุดูุฑุชู.  ุงููุฌููุน ูุฏููุง 3 ูุนุงุฏูุงุช: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ ุฃ - <strong><em>ุต = 0.5 + (ุงูุฎุทูุฆุฉ (ุณ) / 2)</em></strong> </li><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ ุจ - <strong><em>ุต = 0.5 + (ุงูุฎุทูุฆุฉ (x-2ฯ / 3) / 2)</em></strong> </li><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ C - <strong><em>y = 0.5 + (sin (x-4ฯ / 3) / 2)</em></strong> </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ุฌุงูุจ ุงูุฑูุงุถูุงุช ุ ูุจุฏู ุฃู ูู ุดูุก ุจุณูุท ููุงุถุญ ุ ูููู ูุฌุจ ุงูุขู ุชููููู ููุชูุงุณุจ ูุน ุญูุงุฆู ุงููุชุญูู ุงูุฏููู.  ููุฌุฉ ุงูุฌูุจ ุงูุฎุงุตุฉ ุจูุง ููุณุช ุชูุงุธุฑูุฉ ุ ูููููุง ุชุญุชูู ุนูู "ุฎุทูุงุช" ุ ุฃู ุฃููุง ูููุตูุฉ ุ ูุฃููุง ูุง ูุณุชุทูุน ุถุจุท ุงูุฌูุฏ ุงูููุฑุจุงุฆู ุฃู ุงูุฌูุฏ ุงูููุฑุจู ููุท ุฅูุง ุนูู 0V ุฃู + 15V (VCC) ูู ุญุงูุชู.  ูู ููุช ุณุงุจู ุ ูุชุจุช ุฃูู ุณูููู ูุฏู 20 ุฎุทูุฉ ุ ูุฐูู ุณูููู ูุฏู 20 ุญุณุงุจูุง ููุชุฑุฉ ูุงุญุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฃููุงู ุ ูููุฑุฑ ูุง ูุฌุจ ุงุณุชุจุฏุงูู ุจู <em>x</em> .  ูุชุฑุฉ ุงูุฌูุจูุฉ ูู <em>2ฯ</em> ุ ููุง ูุนูู ุฃู ุฎุทูุฉ ุฃุฎุฐ ุงูุนููุงุช ุณุชููู <em>2ฯ / 20</em> .  ููููุง ูุฐูู ุ ุณูุชุฃูู ุงูุฌููุจ ุงูุฃูููุฉ ูู 20 ููุทุฉ ุ ููุง ูู ููุง ูุจูู ุฑุณููุง ุจูุงูููุง ุนูู ุงูููุงุท ุ ูููุงุฑุจ ุจููููุง.  ูุชูุฌุฉ ูุฐูู ุ ุณุชููู ุงููููุฉ ูู ุงูุฎุทูุฉ ุงูุฃููู ูู <strong><em>sin (2ฯ * (1/20) ุ</em></strong> ูู ุงูุฎุทูุฉ ุงูุซุงููุฉ <strong><em>sin (2ฯ * (2/20)) ุ</em></strong> ูู ุงูุฎุทูุฉ ุงูุซุงูุซุฉ * <strong>sin (2ฯ <em>(3/20))</em></strong> ูููุฐุง ุ ุนูุฏูุง ูููู ุฅุฐุง ูุตู ุฅูู <em>20/20</em> ุ ูุฅู ูุฐุง ูุนูู ููุงูุฉ ุงููุชุฑุฉ ูุณูููู ูู ุงูุถุฑูุฑู ุงูุจุฏุก ูู ุงูุญุณุงุจ ูุฑุฉ ุฃุฎุฑู ุ ูุจูุงุกู ุนูู ุงูุจูุงูุงุช ุงููุงุฑุฏุฉ ุ ูููุตุญุญ ุงูุตูุบ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ A - <strong><em>y = 0.5 + (sin (2ฯ * (n / N)) / 2)</em></strong> </li><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ ุจ - <strong><em>ุต = 0.5 + (ุงูุฎุทูุฆุฉ (2ฯ * (n / N) -2ฯ / 3) / 2)</em></strong> </li><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ C - <strong><em>y = 0.5 + (sin (2ฯ * (n / N) -4ฯ / 3) / 2)</em></strong> </li></ul><br><p style=";text-align:right;direction:rtl">  ุงูุขู ุ ูุนุชุจุฑ ุงูุขู ูููุฉ ุงูุฌูุจ ูู ูู ููุทุฉ ูุญุฏุฏุฉ ุนูู ุงูุฑุณู ุงูุจูุงูู.  ููููุง ูุฐูู ุ <strong>n</strong> ูู ุงูุฎุทูุฉ ุงูุญุงููุฉ ุ <strong>N</strong> ูู ุงูุฎุทูุฉ ุงููููุฉ (20).  ุจุนุฏ ูุฐู ุงูุตูุบ ุ ูุญุตู ุนูู ูููุฉ ูู 0 ุฅูู 1 ุ ูููู ูู ุงููุงูุน ูุญู ูุง ูุนูู ุจุณุนุฉ ูุฌุฑุฏุฉ.  ุงูุณุนุฉ ูู ุญุงูุชูุง ุชุนุชูุฏ ุนูู ุฏูุฑุฉ ุงูุนูู ุ ูุฃู  ูุฎุชูู ุงููุงุฌุจ ูู 0 ุฅูู 600 (ูู ุฅุนุฏุงุฏุงุช PWM) ุ ุซู 0 ุชุณุงูู 0 ููุงุญุฏ ูุนุงุฏู 600. ูุจูุงุกู ุนูู ุฐูู ุ ุฏุนูุง ูุนูุฏ ุญุณุงุจู ูู ุตูุบุฉ ุญููููุฉ ููุญุตูู ุนูู ุงููููุฉ ุงูุชู ุณูุชู ุชุญููููุง ูู ุณุฌู CMPA <em>PWM</em> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ A - <strong><em>ุงููุงุฌุจ 1 = A <em>(0.5 + (sin (2ฯ</em> (n / N)) / 2))</em></strong> </li><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ B - <strong><em>ุงููุงุฌุจ 2 = A <em>(0.5 + (sin (2ฯ</em> (n / N) -2ฯ / 3) / 2))</em></strong> </li><li style=";text-align:right;direction:rtl">  ุงููุฑุญูุฉ C - <strong><em>ุงููุงุฌุจ 4 = A <em>(0.5 + (sin (2ฯ</em> (n / N) -4ฯ / 3) / 2))</em></strong> </li></ul><br><p style=";text-align:right;direction:rtl">  ููููุง ูุฐูู ุ <strong>A</strong> ูู ุงููููุฉ ุงููุตูู ููุณุนุฉ ุ ุฃู 600 ุ <strong>n</strong> ูู ุงูุฎุทูุฉ ุงูุญุงููุฉ ุ <strong>N</strong> ูู ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุฎุทูุงุช (20).  ููู <strong><em>ุงููุงุฌุจ 1 ุ ุงููุงุฌุจ 2 ุ ุงููุงุฌุจ 4</em></strong> ูู ุงูููู ุงูุญููููุฉ ุงููุญููุฉ ูุนุงูู ุงููุงุฌุจ ุ ูุงูุชู ูุชู ุชุญููููุง ูู <em>CMPA.</em>  ุงูุขู ุฏุนูุง ููุชุจ ุงูููุฏ ุงูุฎุงุต ุจูุนุงูุฌ ุงูููุงุทุนุฉ ุงููุญุฏุซ ููุนูู ุนู ูู ุงููุชุบูุฑุงุช ุงูุถุฑูุฑูุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> activeStep = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> amplitude = <span class="hljs-number"><span class="hljs-number">600.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> allStep = <span class="hljs-number"><span class="hljs-number">20.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> pi = <span class="hljs-number"><span class="hljs-number">3.1415</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ฯ const float piTwo = 6.2831; // 2ฯ const float phaseShifted120deg = 2.0943; // 2ฯ/3 const float phaseShifted240deg = 4.1866; // 4ฯ/3 __interrupt void cpu_timer0_isr (void) { if (activeStep &gt;= allStep) {activeStep = 0;} activeStep++; EPwm1Regs.CMPA.half.CMPA = ((uint16_t)(amplitude * (0.5 + (sinf(piTwo * (activeStep / allStep)) / 2)))); EPwm2Regs.CMPA.half.CMPA = ((uint16_t)(amplitude * (0.5 + (sinf(piTwo * (activeStep / allStep) - phaseShifted120deg) / 2)))); EPwm4Regs.CMPA.half.CMPA = ((uint16_t)(amplitude * (0.5 + (sinf(piTwo * (activeStep / allStep) - phaseShifted240deg) / 2)))); PieCtrlRegs.PIEACK.all = PIEACK_GROUP1; // Acknowledge this interrupt to receive more interrupts from group 1 }</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  ุงูุดูุฑุฉ ุ ููุง ุชุฑู ุ ูู ุฃุจุณุทูุง ุ ุฅุฐุง ูููุช ูุง ูู ูุทููุจ ููููุงู ุจู ูุงูุฑูุงุถูุงุช ุงูุจุณูุทุฉ ูู ุงููุดููุฉ ุงูุชู ูุชุนูู ุญููุง.  ูู ูู ูุฑุฉ ูุชู ุงุณุชุฏุนุงุก ุงูููุงุทุนุฉ ุ ูููู ุจุฒูุงุฏุฉ ูุชุบูุฑ <em>activeStep</em> ุ ุงูุฐู ูุญุชูู ุนูู ุฑูู ุงูุฎุทูุฉ ุ ููุชุบูุฑ ูู 0 ุฅูู 20 ุซู ุชุชู ุฅุนุงุฏุฉ ุชุนูููู.  ุงุชุถุญ ุฃููุง ูู ูุชุฑุฉ ูุงุญุฏุฉ ูููู ุจุชูููุฐ 20 ุฎุทูุฉ ู 20 ุนูููุฉ ุญุณุงุจูุฉ ููู ูุฑุญูุฉ.  ููู ูุง ุฃุญุณุจ <em>2ฯ / 3</em> ู <em>4ฯ / 3</em> ูู ุงูุตูุบุฉ ุทูุงู ุงูููุช ุ <em>ุฃุญุณุจูู ุนูู</em> ุงูููุฑ ูุงุณุชุฎุฏุงููู ูู ุงูุซูุงุจุช. </p><br><p style=";text-align:right;direction:rtl">  ุชุญููุช ุงูุญุณุงุจุงุช ุฅูู ุงูุญุฏ ุงูุฃุฏูู ุ ููุฐุง MK ูู ูุง ุดูุก ุนูู ุงูุฅุทูุงู.  ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ูููู ุฒูุงุฏุฉ ุนุฏุฏ ุงูููุงุท ุจุดูู ูุจูุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุง ูุตู ุฅูู 200. ูู ูุฐุง ูุชููู ุนูู ุงููููุฉ.  ูุญุฏุซ ุชุบููุฑ ุชุฑุฏุฏ PWM ุนู ุทุฑูู ุชุบููุฑ ุชูุฑุงุฑ ููุงููุฉ ุงูููุงุทุนุฉ ูุนุฏุฏ ุงูุฎุทูุงุช.  ููููู ุฃูุถูุง ุชุบููุฑ <em>ุงูุณุนุฉ</em> ุงููุชุบูุฑุฉ ูุชุบููุฑ ุงูุฌูุฏ ุนูุฏ ุฅุฎุฑุงุฌ ูุญูู ุงูุทุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชูุฒูู ุงูุฑูุฒ ุฅูู ูุชุญูู ุ ุณูู ุชุญุตู ุนูู ุงูุตูุฑุฉ ุงูููุงุจูุฉ: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/qf/rd/ck/qfrdck6y4rcvirbws9o6zbzrfea.png" alt="ุงูุฐุจุฐุจุงุช ุฑูู 1"></p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุจุชูุฏูุฏ ุงูุฑุณู ุงูุจูุงูู ุนูู ุทูู <em>Y</em> ุ ูุณูุตุจุญ ูู ุงูุฃูุถู ุฑุคูุฉ ุนููุจ ุงูุฅุดุงุฑุฉ.  ูุฐุง ูุงุชุฌ ุนู ููุฉ ุนุฏุฏ ุฎุทูุงุช ุฃุฎุฐ ุงูุนููุงุช ุ ูุชู ุชุทุจูู ูุงุนุฏุฉ ุดุฑุทูุฉ: <strong>ูููุง ุฒุงุฏ ุนุฏุฏ ุงูููุงุท ุ ุฒุงุฏ ุนุฏุฏ ุงูุฅุดุงุฑุฉ.</strong> </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/wh/4d/du/wh4dduwnbyshscey7rlmzs6s1mw.png" alt="ุงูุฐุจุฐุจุงุช ุฑูู 3"></p><br><h1 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><p style=";text-align:right;direction:rtl">  ุชุญุฏุซุช ุงูููู ุนู ุนูููุฉ ุชุดููู ุชุญูู ุงููุฑุญูุฉ ูู ุงูุฃูุธูุฉ ูุชุนุฏุฏุฉ ุงููุฑุงุญู ุ ูุง ููุฌุฏ ุดูุก ูุนูุฏ ูู ุญูุซ ุงููุจุฏุฃ ุ ุฎุงุตุฉ ุนูุฏ ุงุณุชุฎุฏุงู TMS320F28.  ุงูุจุงูู ูุนูุฏ ุฅูู ุงูุฎูุงุฑุฒููุงุช ุ ูู ุญูุซ ุงููุจุฏุฃ ุ ุนูู ุดุจูุฉ ุงูุฅูุชุฑูุช ุ ูููุงู ุงูุนุฏูุฏ ูู ุงูููุงูุงุช ุงูุชู ุชุญูู ุงููุถุบ ูุงููุญุฑูุงุช ุจุฏูู ูุฑุด ุ ูุบูุฑ ูุชุฒุงูู ูุฌููุน ุฃููุงุน ุงูุขุฎุฑูู ุ ููููู ููุท ุชุญููู ุงูููุทู. </p><br><p style=";text-align:right;direction:rtl">  ุขูู ุฃู ุชููู ูุฐู ุงูููุงุฏ ูููุฏุฉ ูููุณุช ูููุฉ ุจุดูู ุฎุงุต ูููุฑุงุกุฉ.  ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ูุชู ุฅุฑูุงู ุงููุตุฏุฑ: </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฑุดูุฉ ูุน ุงููุดุฑูุน ู Code Composer Studio</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar457548/">https://habr.com/ru/post/ar457548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar457534/index.html">ุงูุฅุตุฏุงุฑุงุช ุงููุนุชูุฏุฉ - ุฃุดุนู ุงููุงุฑ ุงูุชู ูุฎุชุงุฑูุง</a></li>
<li><a href="../ar457538/index.html">ููู ูููููู ุงุณุชุฎุฏุงู ุงูุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ ุงูุชู ุชูุช ููุงุทุนุชูุง ูู Yandex.Cloud ูุญูุธูุง ุนูู ุญู ุงููุดููุงุช ูุงุณุนุฉ ุงููุทุงู</a></li>
<li><a href="../ar457540/index.html">ุฐุงูุฑุฉ Intel Optane DC ุงูุฏุงุฆูุฉ ุ ุจุนุฏ ุนุงู</a></li>
<li><a href="../ar457542/index.html">ุงููุฑุตูุฉ ูุญูุงูุฉ ุชุดููุฑ ูุญุฑูุงุช ุงูุฃูุฑุงุต LUKS</a></li>
<li><a href="../ar457546/index.html">ููู ุงูุนุฑุถ ุงูุชูุถูุญู: ููุงุฐุง ูู ูู ุดูุก ูููู ููุนู ุฐูู UPD + ุงูุจุซ</a></li>
<li><a href="../ar457550/index.html">ูุง ุชุญุชุงุฌ ุงูุตูุงุนุฉ ุงูุฑูููุฉ ูุชููู ูุญููุฉ ูู</a></li>
<li><a href="../ar457552/index.html">ุงููุชุณูููู ูู ุฒุงูุงุณุงุฏูุง. ููู ุชุนูู ุงูุญููุงุช ุนูู ุจุฑุฌ ูุฑูุฒ ูุฎุชุง</a></li>
<li><a href="../ar457558/index.html">ุชุญููู ุงูุถุนู EvilParcel</a></li>
<li><a href="../ar457560/index.html">ุงูุฃุณูู ุงููุดูุฑุฉ: ููู ุชุตุจุญ ูุณุชุซูุฑุง ูุจู ุงูุญุตูู ุนูู ุงูุงูุชุชุงุจ ุงูุนุงู</a></li>
<li><a href="../ar457562/index.html">Ivideon Counter 3D: ูู ุ ูููู ูููุงุฐุง ุญุณุงุจ ุนุฏุฏ ุงูุฒูุงุฑ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>