<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-143967986-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-143967986-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíû üì° üë† Unity Shader Graph Basics üçé ü¶ì üêøÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A shader is a small program that contains instructions for the GPU. It describes how to calculate screen color for a specific material. 

 Although Un...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unity Shader Graph Basics</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479302/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78f/f7b/1ff/78ff7b1ff1bc94d8a45e9b1f52e2ff2e.jpg" alt="image"></div><br>  A shader is a small program that contains instructions for the GPU.  It describes how to calculate screen color for a specific material. <br><br>  Although Unity has a Standard Shader, sometimes you need to implement an effect that a standard shader is not capable of. <br><br>  Previously, this required knowledge of a specific shader language, such as Cg or HLSL, and the approaches in them are slightly different from the usual creation of gameplay scripts.  For many people, writing shaders is an unpopular aspect of game development, because it requires the development of an additional learning curve. <br><br>  Unity introduced <strong>Shader Graph</strong> , which makes it easier to write shaders with almost no code.  Best of all, Shader Graph allows you to work with a visual interactive interface. <br><br>  In this tutorial, you will create your first Unity shader! <br><a name="habracut"></a><br><h2>  Getting to work </h2><br>  This tutorial uses Unity version 2019.1 or newer.  Download the new version of Unity <a href="https://unity3d.com/get-unity/update">here</a> . <br><br><blockquote>  <em>Note</em> : although this tutorial is intended for beginners in Shader Graph, it assumes that you know the basics of development in Unity and have mastered the interface of the engine.  If you're new to Unity, then check out the excellent <a href="https://www.raywenderlich.com/5589-unity-tutorial-part-1-getting-started" rel="noopener">Getting Started In Unity</a> tutorial. </blockquote><br>  Download the tutorial materials <a href="">here</a> .  Then unzip the contents and open <strong>Intro to Shader Graph Starter</strong> in Unity. <br><br>  The <strong>RW</strong> folder in the Project window is organized as follows: <br><br><ul><li>  <strong>Fonts</strong> : Fonts used in the scene. </li><li>  <strong>Materials</strong> : materials for the scene. </li><li>  <strong>Models</strong> : 3D meshes for game shapes and backgrounds. </li><li>  <strong>PostFX</strong> : post-processing effects for scene rendering. </li><li>  <strong>Prefabs</strong> : various pre-built components. </li><li>  <strong>Scenes</strong> : game scene. </li><li>  <strong>Scripts</strong> : scripts with game logic. </li><li>  <strong>Shaders</strong> : Shader graphs created for this tutorial. </li><li>  <strong>Sprites</strong> : a sprite used as part of the instructions. </li><li>  <strong>Textures</strong> : texture maps for game shapes and backgrounds. </li></ul><br>  Now load the <b>TangramPuzzle</b> scene from the <b>Scenes</b> folder. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8e/174/581/b8e1745819cb97e299c2d2216323a498.jpg"></div><br>  This is a simple game called <b>Tangram</b> , which appeared in China in the 19th century.  The player's task is to move seven flat geometric shapes, making them stylized pictograms or silhouettes. <br><br>  Launch <b>Play</b> mode in the editor and test the demo games. <br><br>  You can click on the shapes and drag them.  Use direction keys to rotate shapes.  Rotate and shift the shapes so that they do not overlap each other. <br><br>  Can you figure out how to move the seven shapes to create such patterns? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a80/59c/f3b/a8059cf3b9b0a92a0bd6439768cca473.jpg"></div><br>  So, from a <i>technical</i> point of view, the game works, but it does not give any visual feedback about the selected figure. <br><br>  What if we can make the shape glow when a mouse is over it?  This will improve the user interface. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ddd/aba/5ec/dddaba5ecb269c55ff4ed734565dd44d.jpg"></div><br>  And this is a great chance to demonstrate the capabilities of Shader Graph! <br><br><h2>  Checking pipeline parameters for Shader Graph </h2><br>  Shader Graph only works with the relatively new <b>Scriptable Render Pipeline</b> , i.e. with the <em>High-Definition Render Pipeline</em> or with the <em>Lightweight Render Pipeline</em> . <br><br>  When creating a new project for working with Shader Graph, select the correct template. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/213/6b1/315/2136b13151945e40c96e3ebb592ca1c5.jpg"></div><br>  The sample project is already configured to work with the <b>Lightweight Render Pipeline</b> .  First, confirm in PackageManager that you have <b>Lightweight RP</b> and <b>ShaderGraph installed</b> by choosing <b>Window ‚ñ∫ PackageManager</b> . <br><br>  Then select one of the available versions and, if necessary, click the <b>Update to</b> button.  Usually the best option is the latest <i>verified</i> version. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54c/d1c/a7d/54cd1ca7dd3795ea4c4deed83b04566d.jpg"></div><br>  After updating the packages, carefully check the correctness of the pipeline parameters in <b>Edit ‚ñ∫ Project Settings</b> . <br><br>  On the <b>Graphics</b> tab, the <b>Scriptable Render Pipeline Settings</b> parameter should be set to <b>LWRP-HighQuality</b> .  Thanks to this, the project will use the highest default setting for the Lightweight Render Pipeline. <br><br>  After making sure that you are using one of the <b>Scriptable Render Pipeline</b> assets, close this window. <br><br><h2>  Creating PBR Graph </h2><br>  When rendering a 3D mesh to the screen, the material and the shader always work together.  Therefore, before starting to create a shader, we need material. <br><br>  First, click the <b>Create</b> button in the Project window to generate a new material in the <b>RW / Materials</b> folder.  Select <b>Create ‚ñ∫ Material</b> , and then rename it to <b>Glow_Mat</b> . <br><br>  Then, in the <b>RW / Shaders</b> folder, create a <b>PBR Graph</b> by choosing <b>Create ‚ñ∫ Shader ‚ñ∫ PBR Graph</b> .  This is a shader graph that supports <i>physically accurate rendering</i> , or PBR. <br><br>  Name it <b>HighlightShaderGraph</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a22/1f8/52e/a221f852e2e1e71f73482ed388374495.gif"></div><br>  Material Glow_Mat so far uses a standard shader for <b>LightweightRenderPipeline</b> called <b>LightweightRenderPipeline / Lit.</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39f/eeb/d28/39feebd289c2fbf6363ddcc24f6e0789.gif"></div><br>  Change it to the newly created new shader graph.  With <strong>Glow_Mat</strong> selected, click on the <b>Shader</b> drop-down menu at the top of the inspector and select <b>Shader Graphs ‚ñ∫ HighlightShaderGraph</b> . <br><br>  Glow_Mat will take on a slightly lighter shade of gray, but otherwise remain pretty dull.  Don‚Äôt worry, we will fix it soon. <br><br>  Now double-click on the <b>HighlightShaderGraph</b> asset or click on the <b>Open Shader Editor</b> in the inspector.  This will open the <strong>Shader Graph</strong> window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7f1/365/141/7f1365141746fb31c6b7226b4da4b35d.gif"></div><br>  Check out the main parts of this interface: <br><br><ul><li>  <b>The main workspace</b> is a dark gray area in which graph operations will be stored.  You can right-click on the workspace to open the context menu. </li><li>  A <b>node</b> is a single element of a graph.  Each node has an input, output, or operation, depending on its ports.  Nodes are connected to each other using <b>edges</b> . </li><li>  <b>Master node</b> is the last output node of the graph.  In this example, we use a physically accurate rendering option, also called the PBR Master node.  You may notice certain properties in it, such as Albedo, Normal, Emission, and Metallic, which are used in Standard Shader. </li><li>  <b>Blackboard</b> can provide access to certain parts of the graph in the inspector.  This allows the user to configure parameters without directly editing the graph itself. </li><li>  <b>Main Preview</b> interactively displays the current output of the shader as a sphere. </li></ul><br>  By connecting the various nodes, you can create a <b>shader graph</b> that Unity compiles and transfers to the GPU. <br><br><h2>  Creating a Color node </h2><br>  First, let's give the shader some basic color.  To do this, connect the color node with the Albedo component of the PBR Master node.  <b>Right-click</b> on the workspace to create the first node from the context menu by choosing <b>Create Node ‚ñ∫ Input ‚ñ∫ Basic ‚ñ∫ Color</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/363/509/a40/363509a4051583a7535f3dac08f5112a.gif"></div><br>  Notice that there are hundreds of nodes in the <b>Create Node</b> menu!  At first it seems confusing, but you will soon figure out the most actively used ones. <br><br>  Next, drag the node over the workspace, holding on to its title bar.  Then leave it somewhere to the left of the <b>PBR Master</b> node. <br><br>  The <b>Color node</b> allows you to specify a single color.  Click on the color field and select a beautiful red hue, for example <b>R: 128, G: 5, B: 5</b> . <br><br>  To output the color to the <b>PBR Master</b> node, drag the <b>Out</b> port to the <b>Albedo</b> port, which indicates the base color of the shader. <br><br>  By connecting the nodes edge-by-side, you should see how the sphere in the <b>Main Preview</b> turns red. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f7c/3f4/19d/f7c3f419dbd4caca163997b64b15df35.jpg"></div><br>  Excellent!  In the area of ‚Äã‚Äãwriting shaders, creating a single-color shader is an analogue of <em>Hello, world!</em> <br><br>  Although you may not understand this yet, but you just created your first shader! <br><br><h2>  Work with the interface </h2><br>  Although there are only a couple of nodes in the graph, now is the best time to get comfortable with the Shader Graph interface. <br><br>  Try dragging the nodes and notice that the edges between the <b>Color</b> output port and the <b>PBR Master</b> input port remain connected. <br><br>  Nodes can contain various types of data.  Just as we created a node containing a single input color, we can create a node representing a single number;  Select <b>Create Node ‚ñ∫ Input ‚ñ∫ Basic ‚ñ∫ Integer</b> .  We will not do anything with this node; it is needed only to illustrate the principle. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/36f/82d/64f/36f82d64fb65d569c0471e419191a5e4.jpg"></div><br>  Connect the <b>Integer Out</b> port to the <b>Alpha</b> port of the <b>PBR Master</b> node. <br><br>  Our graph is still very small, but we already have enough nodes to check the action of the hot keys.  Select a pair of nodes and press the following keys: <br><br><ul><li>  <b>F</b> : frame the selected nodes. </li><li>  <b>A</b> : frame the entire graph. </li></ul><br>  You can also use the buttons at the top of the window to switch between <b>Main Preview</b> and <b>Blackboard</b> .  The <b>Show in Project</b> button helps to find the current shader graph in the Project window. <br><br>  Having dealt with the management of the graph, we clean it.  All we need is the <b>Color</b> and <b>PBR Master</b> nodes. <br><br>  Right-click the connection between the <b>Integer</b> and <b>Master</b> nodes, and then select <b>Delete</b> .  This will separate the node from the graph. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c4/bf4/3b1/4c4bf43b168f47d748443962faa62b77.jpg"></div><br>  Similarly, you can delete the <b>Integer</b> node entirely.  Right-click on the node and select <b>Delete</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b9/ddc/87c/1b9ddc87cdf18aac23371e3f9fcb1362.jpg"></div><br>  When finished, click on the <b>Save Asset</b> button in the upper left corner of the interface.  Unity will save all changes, and then compile and activate the shader.  This step should be done every time you want to see the latest changes in the editor. <br><br>  Now go back to the window and select the <b>Glow_Mat</b> material. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/886/e45/8c8/886e458c866aa26b261adaa95677372d.jpg"></div><br>  As the shader extends to the material, the sphere in the inspector's preview window should turn red. <br><br>  Now drag the <b>Glow_Mat</b> material <b>onto</b> the tangram shapes in the <b>Scene</b> window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ef/044/2d4/5ef0442d42d3391f07152f1842ddc342.gif"></div><br>  As expected, the material with the shader painted the mesh in a beautiful, uniform red color. <br><br><h2>  Add a glow effect </h2><br>  If you want the Glow_Mat material to have a more mysterious glow, you need to edit the shader graph again. <br><br>  Now the <b>Color</b> output is transferred to the input of the <b>Albedo</b> <b>PBR Master</b> node. <br><br>  You can also drag another edge from <b>Out</b> to <b>Emission</b> .  Now the same color is used twice: both as the base color and as the color of the radiation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/185/4dc/2e0/1854dc2e00739e3a8c9ea765faa8771d.jpg"></div><br>  Output ports can have multiple edges, and input ports can have only one. <br><br>  Now switch the <b>Mode</b> drop-down menu of the <b>Color</b> node to <b>HDR</b> mode.  So we will include the <i>extended dynamic</i> range of colors. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/562/3ac/fb35623acdb347bffaeb33925936e936.jpg"></div><br>  Now change the color field.  In <b>HDR Mode</b> , an additional <b>Intensity</b> option has appeared.  Click <b>+1 a</b> couple of times in the bottom palette or drag the slider about <b>2.5</b> .  Now save the changes and return to the editor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/350/55d/b51/35055db513df608effa2f27b1956c83f.png"></div><br>  In the editor, the figure will glow in bright orange.  Post-processing in the scene is already on and it enhances the color of the extended dynamic range. <br><br>  Now select the game object <b>PostProcessing</b> in the hierarchy.  The glow is due to the <b>Bloom</b> effect. <br><br>  Open the <b>Bloom</b> options and set the <b>Intensity</b> (luminous strength) and <b>Threshold</b> (threshold for the onset of luminescence).  The example shows the values <b>3</b> and <b>2</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c83/999/c29/c83999c293634a90fd3f4f93c2444a82.jpg"></div><br>  Wow, this shine! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f1c/f3e/a78/f1cf3ea784a21f33d2e5c1417e7d7fd5.jpg"></div><br><h2>  Creating a highlight script </h2><br>  We do not want the figure to glow constantly.  We need the glow to turn on only depending on the position of the mouse. <br><br>  When the mouse cursor is over the shape, we must enable the Glow_Mat material.  In other cases, the figure should be displayed with the standard material Wood_Mat. <br><br>  First, create a new <b>C #</b> script in <strong>RW / Scripts</strong> and call it <strong>Highlighter</strong> .  He will help us switch between the two materials during the execution of the program.  Replace all lines in the script with the following code: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-comment"><span class="hljs-comment">// 1 [RequireComponent(typeof(MeshRenderer))] [RequireComponent(typeof(Collider))] public class Highlighter : MonoBehaviour { // 2 // reference to MeshRenderer component private MeshRenderer meshRenderer; [SerializeField] private Material originalMaterial; [SerializeField] private Material highlightedMaterial; void Start() { // 3 // cache a reference to the MeshRenderer meshRenderer = GetComponent&lt;MeshRenderer&gt;(); // 4 // use non-highlighted material by default EnableHighlight(false); } // toggle betweeen the original and highlighted materials public void EnableHighlight(bool onOff) { // 5 if (meshRenderer != null &amp;&amp; originalMaterial != null &amp;&amp; highlightedMaterial != null) { // 6 meshRenderer.material = onOff ? highlightedMaterial : originalMaterial; } } }</span></span></code> </pre> <br>  Let's parse this script: <br><br><ol><li>  The script can only be applied to an object containing the components <code>MeshRenderer</code> and <code>Collider</code> .  This is controlled by adding the <code>[RequireComponent]</code> attributes to the top of the script. </li><li>  These are links to <code>MeshRenderer</code> , <code>originalMaterial</code> and <code>highlightedMaterial</code> .  Materials are marked with the <code>[SerializeField]</code> attribute, which allows you to assign them from the inspector. </li><li>  In the <code>Start</code> method, we automatically populate the <code>MeshRenderer</code> using <code>GetComponent</code> . </li><li>  Called <code>EnableHighlight(false)</code> .  This ensures that, by default, non-highlighted content is displayed.  Below is the public <code>EnableHighlight</code> method, which switches the renderer material.  It receives the boolean parameter <code>onOff</code> , which determines the state of the backlight. </li><li>  Preventing All NullReference Errors </li><li>  To save space, we use the ternary operator. </li></ol><br><h2>  Add mouse events </h2><br>  Since this script applies to shapes that have a <code>MeshCollider</code> , we can use the built-in methods <code>OnMouseOver</code> and <code>OnMouseOver</code> .  Add the following code after the <code>EnableHighlight</code> method: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseOver</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { EnableHighlight(<span class="hljs-literal"><span class="hljs-literal">true</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnMouseExit</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { EnableHighlight(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); }</code> </pre> <br>  When the mouse is over the shape, it will call <code>EnableHighlight(true)</code> .  Similarly, when the mouse leaves Collider, it will call <code>EnableHighlight(false)</code> . <br><br>  That's all!  Save the script. <br><br><h2>  Figure highlight </h2><br>  If in the previous sections of the tutorial you applied Glow_Mat to any of the figures, then in the editor you need to return Wood_Mat material to all game figures.  Now, to turn on the glow, we will use <b>Highlighter</b> while the program is running. <br><br>  First, we‚Äôll select seven objects inside the transform <b>Tangram</b> , which are separate shapes.  Then we add to them all the <code>Highlighter</code> script at the same time. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e1d/99b/452/e1d99b452c4d7adffec90997fc53d296.jpg"></div><br>  Then drag <b>Wood_Mat</b> into the <b>Original Material</b> field and <b>Glow_Mat</b> into the <b>Highlighted Material</b> <b>field</b> .  Now run the <b>Play</b> mode and check the result of our work. <br><br>  Not bad!  When you hover over the tangram shape, it begins to glow in bright red.  If you remove the cursor from it, it returns to its original state. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d74/c09/f33/d74c09f333e899af67b3687733769285.gif"></div><br>  In the game itself, nothing has changed, but the highlight effect added visual interest and allows the player to focus. <br><br><h2>  Using texture nodes </h2><br>  At the moment, our simple shader has a solid bright red color.  We will change the shader so that it does not lose its original wood texture.  To do this, we will make the backlight appear as a luminous edge <i>around the</i> surface. <br><br>  First, change the <b>HighlightShaderGraph</b> by double-clicking on it or selecting <br>  in the <b>Open Shader Editor</b> . <br><br>  Delete the <b>Color</b> node by <b>right-clicking on it</b> and selecting <b>Delete</b> .  We will create everything from scratch. <br><br>  Instead of a single color, we substitute the texture using the <b>Sample Texture 2D</b> node. <br><br>  Create a node, either from the context menu, <b>by right-clicking</b> and choosing <b>Create Node</b> , or by using a hot key (space).  Select <b>Input ‚ñ∫ Texture ‚ñ∫ Sample Texture 2D</b> . <br><br>  The <b>Sample Texture 2D</b> node reads color information from a texture asset and outputs its RGB values. <br><br>  Select a texture from the <b>Texture</b> input port.  Click on the dot next to the empty field to open the file browser. <br><br>  Select the WoodAlbedo texture <b>asset</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9a/97c/4fd/f9a97c4fd623492c7fa1352f52137a29.jpg"></div><br>  Connect the <b>RGBA</b> output port of the <b>Sample Texture 2D</b> node to the <b>PBR Master Albedo</b> port. <br><br>  Voila!  Now the texture of the tree is displayed on the surface of the preview sphere. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/340/f6f/c8a/340f6fc8ac69c61cf9b574b90964741c.jpg"></div><br>  If you add a normal map, you can create parts on the surface.  First, create another <b>Sample Texture 2D</b> node by choosing <b>Create Node ‚ñ∫ Input ‚ñ∫ Texture ‚ñ∫ Sample Texture 2D</b> . <br><br>  Select a <b>WoodNormal</b> texture in the Texture input port. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed3/f17/157/ed3f17157cb757325db5ac5fff3063a2.jpg"></div><br>  Change the <b>Type</b> drop-down menu from <b>Default</b> to <b>Normal</b> . <br><br>  Output the <b>RGBA</b> values ‚Äã‚Äãto the <b>Normal</b> port of the <b>PBR Master</b> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c35/269/2e2/c352692e26036e357e7ca5934371925f.jpg"></div><br>  The scope of the <b>Main Preview</b> should now look more rough.  The normal map imitates small irregularities and indentations on the surface.  This allows you to simulate the appearance of a tree. <br><br><blockquote>  <em>Note</em> : the data type of each port is indicated in parentheses next to the port.  <b>(T2)</b> means that the port is compatible with two-dimensional texture, and <b>(4)</b> means that the port uses <b>Vector4</b> .  Depending on the context, the Shader Graph may ignore extra floating point values. </blockquote><br><h2>  Adding the Fresnel Effect </h2><br>  Now that the solid red color has changed to the base texture and normal map, let's add a highlight effect using another method. <br><br>  Instead of a uniform glow of the entire object, we will limit the glow to its edges only.  This can be realized using <b>the Fresnel effect</b> . <br><br>  Create a new node by <b>right-clicking</b> or spacebar, and then select <b>Create Node ‚ñ∫ Math ‚ñ∫ Vector ‚ñ∫ Fresnel Effect</b> . <br><br>  This new node shows a sphere with a white radiant ring in diameter.  You can adjust the width of this halo using the <b>Power</b> input port.  Click and drag the <b>X</b> to the left of the field or enter the numbers you want. <br><br>  The larger the value, the thinner the halo becomes, and the smaller values ‚Äã‚Äãmake it very wide.  To create a subtle glow around the edge, you can use the value <b>4</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f62/519/63c/f6251963c4a386e595c2e160213d061a.gif"></div><br>  To convey this halo to the material, we will connect the <b>Fresnel Effect</b> output to the <b>Emission</b> input of the <b>PBR Master</b> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/135/f1d/6ac/135f1d6ac986df2f97eebb4ee4edc6aa.jpg"></div><br>  Now, <b>MainPreview</b> displays a wooden sphere with a bright white halo, obtained thanks to the <b>Fresnel Effect</b> . <br><br><blockquote>  <em>Note</em> : The Fresnel effect is named after the French physicist Augustin Jean Fresnel.  He noticed that the light makes the surfaces very bright and look like a mirror when an observer approaches a <i>glide angle</i> . </blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/137/921/1cb/1379211cb556a35dfe79d01d8db52ae2.gif"></div><br>  You can experiment with the kitchen table.  We use the Unity version of this phenomenon to give geometry a radiance. <br><br><h2>  Multiplication by Color </h2><br>  You can add colors to the luminous contour using simple color calculations. <br><br>  Create a new color node that will indicate the color of the luminous ring.  <b>Right-click</b> or spacebar to open the context menu, and then select <b>Create node ‚ñ∫ Input ‚ñ∫ Basic ‚ñ∫ Color</b> .  Switch the color mode to <b>HDR</b> . <br><br>  Select a color that will indicate the color of the backlight.  For example, choose a beautiful bright green: <b>R: 5, G: 255, B: 5</b> . <br><br>  Increase <b>Intensity</b> to <b>3.5</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d9/652/ad0/7d9652ad083521122e9079d850010e93.jpg"></div><br>  We cannot combine the new color with the Fresnel effect.  because it has no input for color.  Therefore, we will need to combine the output of the effect with the output of the color node.  This can be done using the <b>Multiply</b> node. <br><br>  Create a <b>Multiply</b> node by <b>right-clicking</b> , and then select <b>Create node ‚ñ∫ Math ‚ñ∫ Basic ‚ñ∫ Multiply</b> . <br><br>  Delete the edge between the <b>Fresnel Effect</b> and the <b>PBR Master</b> .  Connect the <b>Fresnel Effect</b> output to the <b>A</b> input of the <b>Multiply</b> node. <br><br>  Connect the <b>Out</b> node of the <b>Color</b> node to the input <b>B of the</b> <b>Multiply</b> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da3/bc9/943/da3bc9943795de428ea498ce46d6f4b2.jpg"></div><br>  Then connect <b>Out of the</b> <b>Multiply</b> node to the <b>Emission</b> port of the <b>PBR Master</b> node.  Voila!  Now we see how the bright green HDR color surrounds the <b>Main Preview</b> sphere. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/13f/514/e08/13f514e08ea71acd0cc175279d7e6738.jpg"></div><br>  Remember that you can use <b>Fresnel Effect Power</b> to increase or decrease the halo.  If you reduce the value to 1.5, you get a wide green glow. <br><br>  For our game example, a value from <b>4</b> to <b>5 is</b> good, but you can experiment with your values. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/18a/13b/95d/18a13b95dbd4fea691a17a7f7fd9c2b1.jpg"></div><br>  Save the shader graph and return to the editor.  You will immediately see your <b>HighlightShaderGraph</b> in action. <br><br>  Launch <b>Play</b> Mode. <br><br>  When you hover over a shape, it retains its tree texture.  However, a bright green glow has now appeared around its edges.  Formally, nothing has changed in the game, only the backlight has become weaker. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/78f/f7b/1ff/78ff7b1ff1bc94d8a45e9b1f52e2ff2e.jpg"></div><br><h2>  Add Blackboard Properties </h2><br>  If you want to change the appearance of the glow effect, you need to return to the Shader Graph editor window and make these changes.  For example, using <b>Fresnel Effect Power,</b> expand or narrow the halo band. <br><br>  This is not very convenient if we want to test various changes.  Fortunately, Shader Graph has a concept for properties. <br><br>  You can make part of the graph publicly visible in the inspector, which allows you to make small changes interactively.  This is done using the <b>Blackboard</b> interface. <br><br>  Go back to the Shader Graph and turn on the <b>Blackboard</b> display.  If it is hidden, then click the <b>Blackboard</b> button in the upper right corner. <br><br><h3>  Adding Base Texture and Normal Map Properties </h3><br>  Now we will open both the base texture and the normal map so that they can be accessed through the inspector. <br><br>  Click the <b>+</b> icon in the upper right corner of the <b>Blackboard</b> .  Select <b>Texture 2D</b> from the drop-down list.  The item should appear on the <b>Blackboard</b> .  Rename it to <b>BaseTexture</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e15/b99/3bb/e15b993bb5c806ae0e00c65dfc7d6f18.jpg"></div><br>  Make sure the <b>exposed</b> checkbox is checked.  If you open a property, it will become public and accessible in the inspector. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bea/269/c8e/bea269c8e357d460265c573c3de1c706.jpg"></div><br>  To add a property to the graph, simply drag it by the label into the workspace.  Leave it somewhere to the left of the <b>Sample Texture 2D</b> node. <br><br>  Connect the <b>BaseTexture</b> port to the <b>Texture</b> input port of the <b>SampleTexture 2D</b> node that is connected to Albedo.  This will replace the previous setpoint. <br><br>  Repeat the same process for <b>Normal Map</b> .  Click on the <b>+</b> icon and create a new <b>Texture 2D</b> .  Rename it to <b>Normal Map</b> . <br><br>  Drag the property into the workspace and attach it to the <b>Sample Texture 2D</b> for the normal map. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a19/0fd/324/a190fd3243a5e151df9d4354868f0906.jpg"></div><br>  Click <b>Save Asset</b> and return to the main editor window. <br><br>  Select the <b>Glow_Mat</b> material and notice two new fields in the inspector: <b>Base Texture</b> and <b>Normal Map</b> . <br><br>  Since no texture has been set for them yet, a green highlight over the gray sphere is displayed in the preview window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3e7/b70/c88/3e7b70c8847d16294fb2a1ff0d03f455.jpg"></div><br>  Select <b>WoodAlbedo</b> and <b>WoodNormal for</b> <b>BaseTexture</b> and <b>NormalMap</b> . <br><br>  Now, under the luminous edges, the texture of the tree will be displayed correctly. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe3/0b2/f5a/fe30b2f5ae65b3d25f0b86a0933737c6.jpg"></div><br>  Public properties allow the user to enter data directly into the shader without the need to edit the shader graph.  Experiment on your own with a selection of different basic textures and normal maps. <br><br><h3>  Add properties Glow Size and Glow Color </h3><br>  Now we will reveal other types of properties in Blackboard.  For example, it will be useful to let the Fresnel Effect Power value change. <br><br>  Click the <b>+</b> icon on <b>Blackboard</b> and create the <b>Vector1</b> property.  It denotes a single parameter of type float. <br><br>  Rename it to <b>GlowSize</b> . <br><br>  You can limit the range of values ‚Äã‚Äãentered for this property by converting it into a <b>slider</b> .  Switch <b>Mode</b> to <b>Slider</b> , and then set <b>Min</b> to <b>0.05</b> and <b>Max</b> to <b>6</b> to specify a range.  Set the <b>Default</b> value to <b>5</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b2c/fba/b70/b2cfbab70c7b0597bc27953aab56cff9.jpg"></div><br>  Drag the <b>GlowSize</b> property into the workspace.  Connect the output port to the <b>Fresnel Effect Power</b> input. <br><br>  Now let the user set the color of the glow.  Instead of creating a property in Blackboard, we transform the existing node in the graph. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14c/e33/445/14ce334459feee966f622d0d041bbf29.jpg"></div><br>  Select the <b>Color</b> node, then <b>right-click</b> and select <b>Convert to Property</b> . <br><br>  The <b>Color node is</b> converted to a color property in the <b>Blackboard</b> , which can no longer be changed directly in the graph.  Rename the property to <b>GlowColor</b> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/208/6fe/b82/2086feb822d8a23a18d61d1acfee2528.jpg"></div><br>  Click <b>Save Asset</b> and return to the main editor window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd1/a22/b42/cd1a22b4290547018d7fbb4b12424124.jpg"></div><br>  Select the <b>Glow_Mat</b> material in the Project window.  You should see that the <b>GlowSize</b> slider and the <b>GlowColor</b> field are now available in the inspector. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/079/65c/339/07965c339c3a356635df7cc1add76c8a.jpg"></div><br>  Change the material values ‚Äã‚Äãto your taste.  Launch <em>Play</em> mode to test your work. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/adf/d63/a65/adfd63a65155b52a0f5ef17be7feb823.gif"></div><br>  Now you have a customizable backlight that can be changed as you wish! <br><br><h2>  Where to go next </h2><br>  Congratulations!  Now you can create your own shaders using the Shader Graph! <br><br>  Using your own creative abilities, you yourself will be surprised that you will succeed.  Want to create a cool fantastic laser beam or force field?  Adapt the result of our work to the shader you need. <br><br>  Although there are literally hundreds of nodes, this tutorial should have helped you learn Shader Graph. </div></div><p>Source: <a href="https://habr.com/ru/post/479302/">https://habr.com/ru/post/479302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../479292/index.html">How to teach a neural network to reproduce game physics</a></li>
<li><a href="../479294/index.html">GitLab 12.5 released with the creation of EKS clusters and the environment panel</a></li>
<li><a href="../479296/index.html">How I stopped hating and fell in love with development</a></li>
<li><a href="../479298/index.html">PostgreSQL Antipatterns: CTE x CTE</a></li>
<li><a href="../479300/index.html">Ecology and data centers. As in Russia and abroad, "green data"</a></li>
<li><a href="../479304/index.html">Ephemeral Containers Kubernetes First Steps</a></li>
<li><a href="../479306/index.html">PHP Digest No. 169 (November 26 - December 9, 2019)</a></li>
<li><a href="../479308/index.html">Pro Demand Planning, Holt-Winters and XGboost</a></li>
<li><a href="../479310/index.html">How to 1C Programmer to become a Java developer</a></li>
<li><a href="../479312/index.html">Creating an incremental server for iOS Team</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter54458986 = new Ya.Metrika({
                  id:54458986,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/54458986" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-143967986-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=IU0EG0jaqnehka2lu5TyzAcchrZXI4Yb1QXKQvJxpqE&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>