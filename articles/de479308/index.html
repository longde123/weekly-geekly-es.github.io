<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§≤üèΩ üèÇüèæ ‚õΩÔ∏è Pro Demand Planning, Holt-Winters und XGboost üè™ üçü üë©‚Äç‚ù§Ô∏è‚Äçüë©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hallo, hallo! 

 Es gibt viele Artikel auf der Website √ºber die Vorhersage von Ausverk√§ufen verschiedener Kategorien von FMCG, w√§hrend andere Produktk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pro Demand Planning, Holt-Winters und XGboost</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/479308/"> Hallo, hallo! <br><br>  Es gibt viele Artikel auf der Website √ºber die Vorhersage von Ausverk√§ufen verschiedener Kategorien von FMCG, w√§hrend andere Produktkategorien nicht so beliebt sind.  Dar√ºber hinaus wird der Einzelhandel in der Regel mit einer Prognose von mehreren Tagen im Voraus untersucht, nicht jedoch von einem H√§ndler mit einer Prognose von 2 Monaten im Voraus - obwohl letzterer h√§ufiger an einer qualitativen Prognose interessiert ist als selbst ein Einzelh√§ndler.  Als zus√§tzliche Herausforderung lohnt es sich, den Konservativismus eines bedeutenden Teils der H√§ndler im Sinne der Auswahl von Prognosetechnologien zu ber√ºcksichtigen.  Man kann sich leicht vorstellen, wie man den Umsatz des Unternehmens aus mittlerer Hand prognostiziert: Ums√§tze aus SAP + -Stammdaten werden mit dem von Menschenhand erstellten Excel-Tool erfasst. Die Automatisierung wird in solchen F√§llen durch eine relativ einfache Prognosemethode eingeschr√§nkt, die nicht weit vom durchschnittlichen / linearen Trend der Raketenwissenschaft in Form von HoltWinters entfernt ist. <br><br>  So stie√ü ich im Dienst auf einen Hersteller einer Marke f√ºr preiswerte dekorative Kosmetik (ca. 500 SKU) und erkannte die traurigen Folgen einer konservativen Prognose in Form niedriger KPIs.  Es war notwendig, kleine √Ñnderungen am Planungssystem vorzunehmen, einschlie√ülich des Prognoseprozesses, und dann werde ich √ºber meine Forschung sprechen. <br><a name="habracut"></a><br><h3>  Status Quo Ante Bellum </h3><br>  Das Hauptproblem der Marke √ºber mehrere Jahre hinweg war das √§u√üerst niedrige Serviceniveau ( <i>CSS = Shipped / Ordered</i> ), das deutlich unter dem Durchschnitt des Unternehmens lag, der durch die Prognose auf der Grundlage des durchschnittlichen Umsatzes ( <i>Forecast = Average Sales</i> ) versch√§rft wurde.  Der Teufelskreis: Der Kunde bestellt Volumen, erh√§lt nicht die vollen Mengen und kommt beim n√§chsten Mal mit erh√∂hter Nachfrage, und wir planen die Zukunft nur nach dem erf√ºllten Bedarf. <br><br>  Auf dieser Grundlage wurde beschlossen, nicht Verk√§ufe, sondern Bestellungen ohne Wiederholungen vorherzusagen (d. H., Wenn der Kunde 100 St√ºck und Bestellungen pro Woche w√ºnscht, gehen wir davon aus, dass die Nachfrage pro Monat 100 St√ºck und nicht 400 St√ºck betr√§gt) Weitere Verk√§ufe werden wir auftragsfrei machen.  Nach der Verbesserung des Servicelevels wird der Unterschied zwischen den Begriffen ausgeglichen.  Das Unternehmen verwendet die Formel ( <i>Prognosegenauigkeit = (1 - Summe der Diskrepanzmodule zwischen Fakt und Prognose) / Prognose</i> ), um die Genauigkeit der Prognose im Unternehmen zu sch√§tzen, und wir werden sie verwenden.  Ein wichtiger Punkt: Die Vorhersage in diesem Fall ist eine Vorhersage mit Verz√∂gerung 2, d.h.  Wenn wir die Genauigkeit im Oktober bewerten, vergleichen wir den Umsatz im Oktober mit der Prognose im August.  Es wird angenommen, dass ein Ergebnis von mehr als 35% als zufriedenstellend interpretiert werden kann.  √úbrigens ist an dieser Stelle anzumerken, dass wir zun√§chst nicht mit einer Erh√∂hung der Genauigkeit gerechnet haben - wir haben mit einer Erh√∂hung des Servicegrads gerechnet und werden die Ergebnisse anhand der Qualit√§t der Warensendungen an Kunden bewerten. <br><br>  Wir mussten nicht viel √ºber die Stichprobe schwitzen, um zu trainieren - obwohl das Unternehmen keine analytische DWH hat, gibt es einen monatlichen Upload von Auftr√§gen, die ein kleiner Python-Zyklus gesammelt und gel√∂scht hat.  Ebenso haben wir Stammdaten erhalten.  Ereignisse und Werbeaktionen mussten in den Berechnungen aufgrund von √ºberm√§√üigem L√§rm ignoriert werden (wir hatten Angst, mehr L√§rm als n√ºtzliche Informationen hinzuzuf√ºgen), da der gr√∂√üte Einzelh√§ndler in regelm√§√üigen Abst√§nden ohne Vereinbarung oder Ank√ºndigung Werbeaktionen durchf√ºhrte, das Ereignisvolumen sch√§tzte usw. <br><br>  Als Modell haben wir uns f√ºr 3 Zweige entschieden - Naiv, Exponentielles Gl√§tten und Maschinelles Lernen. <br><br><h3>  Naive Vorhersage </h3><br>  Der Hauptgrund, warum naive Prognosen immer noch verwendet werden, ist die einfache Interpretation f√ºr den Menschen.  In der Tat, wenn es f√ºr ein Unternehmen √ºblich ist, jeden Code anhand der 5-Warum-Methode detailliert zu analysieren, passt die durchschnittliche Prognose perfekt.  Bestellt der Kunde durchschnittlich 10 St√ºck pro Monat?  Es ist logisch, dass er n√§chsten Monat 10 St√ºck bestellen wird.  Das Ergebnis entspricht nicht unseren Erwartungen und der Kunde hat 50 St√ºck bestellt?  Wahrscheinlich wei√ü der Kunde einfach nicht, wie er vorhersagen soll / die automatische Reihenfolge ist kaputt / der Roboter ist w√ºtend usw. Sie sollten Joint Forecasting implementieren und Dateien austauschen, um Stress abzubauen und die Prognosegenauigkeit zu verbessern (nat√ºrlich ein Scherz, aber mit ein bisschen Wahrheit). <br><br>  Um den Methoden ein wenig Relevanz zu verleihen, haben wir vorgeschlagen, dass die Saisonalit√§t der Waren mit der Saisonalit√§t der Kategorie identisch ist (das Paket statmodels wurde zur Identifizierung der Saisonalit√§t verwendet, das Bild zeigt 3 Hauptergebnisse). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f31/5d1/a69/f315d1a692d08a1ea53b3b83fd839eba.png" alt="Bild"><br><br>  Wir haben 4 Methoden verwendet - den Durchschnitt und den Median f√ºr die gesamte Verkaufsgeschichte (Genauigkeit 0,32 bzw. 0,30) und die letzten 6 Punkte (0,36 und 0,26).  0,36 wird unser Ma√üstab sein - in Zukunft m√ºssen wir bessere Ergebnisse erzielen. <br><br><h3>  ESM-Prognose </h3><br>  Exponentielle Gl√§ttung ist oft der ultimative Traum in der Bedarfsplanung und es ist leicht zu verstehen, warum.  Sch√§tzungen der Genauigkeit in der Stirn zeigen die am wenigsten vergleichbaren Ergebnisse f√ºr ESM und ML in Bezug auf die Genauigkeit, sie sind in allen industriellen Prognosesystemen (JDA, Oracle RDF usw.) enthalten, die Berechnung ist schneller und einfacher zu interpretieren - deshalb sind die Klassiker lebendiger als alle Lebewesen.  Auf der anderen Seite ist das Ergebnis m√∂glicherweise nicht ganz ehrlich, da die Features nicht ausreichend vorbereitet wurden. <br><br>  F√ºr die Vorhersage haben wir dasselbe statmodels-Paket verwendet.  Zun√§chst haben wir die Holt-Klasse f√ºr die gesamte Umsatzhistorie mit gel√∂schter Gruppensaison und f√ºr die letzten 6 Punkte (Genauigkeit 0,34 und 0,37) belegt. <br><br>  Als n√§chstes haben wir die SKU in zwei Gruppen unterteilt - Produkte mit einer langen Geschichte wurden von der HoltWinters-Klasse vorhergesagt, und f√ºr eine kurze Geschichte haben wir Holt bei 6 Punkten verlassen.  Das Ergebnis war viel besser - 0,44, das ist leicht zu erkl√§ren.  Wenn es auf der obersten Ebene so aussieht, als w√§ren alle Waren Zwillingsbr√ºder, dann k√∂nnen wir die Unterschiede in der Unterkategorie erkennen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5dc/f82/5d0/5dcf825d060be8999bc8b4aec199324f.png" alt="Bild"><br><br><h3>  ML-Prognose </h3><br>  Der Hauptnachteil der Standardmethoden ist die mangelnde Tiefe der Berechnungen, weil  Wir verwenden nicht alle verf√ºgbaren Informationen.  Zum Beispiel der Verlauf von Ereignissen: Normalerweise sollten wir beim klassischen Ansatz die aufgetretenen Rohre vom Verlauf subtrahieren, eine Basislinienprognose erstellen und die geplanten Rohre mit dem entsprechenden Kalender hinzuf√ºgen.  Bei ungen√ºgend genauer Aufzeichnung von Ereignissen kann das Ergebnis entt√§uschend sein (bei Holt-Winters haben wir es geschafft - 5 pp auf Genauigkeit zu bringen).  Viele Gr√ºnde k√∂nnen genannt werden - zum Beispiel untersch√§tzen KAM-Kategorien das Volumen, um √úbererf√ºllung zu zeigen und Boni zu erhalten.  Wenn wir vom Ansatz ( <i>Forecast = Baseline + Pipes</i> ) zu einer Prognose √ºbergehen, die auf Features basiert, k√∂nnen wir einen Teil der verf√ºgbaren Informationen erg√§nzen.  Zu diesem Zweck haben wir eine Liste mit 50 Funktionen (Preise, Stammdaten, Verk√§ufe, getrennte Kunden usw.) zusammengestellt.  Aus der Sklearn-Bibliothek haben wir den Basis-Lasso / Ridge / KNN-Regressor genommen, der oft einen schnellen Gewinn bringt, aber in unserem Fall war nur KNN mit einer Genauigkeit von 0,44 zufrieden.  Ein zuf√§lliger Wald hat in kleinen Stichproben eine gute Leistung, in unserem Fall betr√§gt die Genauigkeit 0,48.  Nat√ºrlich haben wir Xgboost nicht vergessen, das nach einer kleinen Kreuzvalidierung das beste Ergebnis lieferte - 0,51.  Unten sehen Sie eine Grafik mit der Genauigkeit der einzelnen Modelle <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83a/fbf/2bb/83afbf2bb6c89ddb0bb16ea900bb6c5b.png" alt="Bild"><br><br><h3>  Bedenken </h3><br>  Was k√∂nnen Konservative in Bezug auf die Verwendung von ML bei der Umsatzprognose sein?  Zum Beispiel Feedback: Eine Reihe von E-Commerce- und Offline-Einzelh√§ndlern nutzen neuronale Netze und Steigungserh√∂hungen und erschrecken Sie regelm√§√üig mit verr√ºckten Bestellungen.  Ja, wenn der Einzelh√§ndler die Genauigkeit der Prognose misst, ist das Ergebnis vielleicht optimistisch, aber dies ist bis zu einem gewissen Grad eine sich selbst erf√ºllende Prophezeiung: Wenn ein Fehler vorliegt, wird der Verkauf / Schwarzer Freitag / Geburtstag des Netzwerks aktiviert usw. <br><br>  Daher ist es f√ºr uns wichtig zu zeigen, dass das Ergebnis von Xgboost nicht nur genauer, sondern auch stabiler ist (und kein zuf√§lliges Roulette, wie ein unvorbereitetes Segelflugzeug scheinen mag).  Zu diesem Zweck haben wir die Verteilung der HoltWinters- und Xgboost-Fehlerverteilungen verglichen und sichergestellt, dass die Ergebnisse der letzteren ein dichteres Zentrum um Null und einen schwachen Schwanz aufweisen <br><br><img src="https://habrastorage.org/getpro/habr/post_images/622/6b4/b9e/6226b4b9ee71a1edf023f28aab80f628.png" alt="Bild"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/68b/6c4/62c/68b6c462c43a9d240b5ab42acbf4eb45.png" alt="Bild"><br><br><h3>  Zwischenergebnisse </h3><br>  Seit Beginn des Schreibens des Artikels / der ersten Prognose wurden aufgrund positiver Ergebnisse 2 weitere Marken von dekorativen Kosmetika auf Xgboost umgestellt.  Ende November betrug der durchschnittliche Anstieg des Servicelevels + 16%, d. H.  das durchschnittliche unternehmensniveau wurde erreicht <br><br><div class="scrollable-table"><table><tbody><tr><th>  Brand </th><th>  November SL GJ19 </th><th>  November SL GJ20 </th><th>  SL Delta </th></tr><tr><td>  Brand1 </td><td>  73% </td><td>  89% </td><td>  16% </td></tr><tr><td>  Brand2 </td><td>  80% </td><td>  85% </td><td>  5% </td></tr><tr><td>  Brand3 </td><td>  63% </td><td>  93% </td><td>  30% </td></tr><tr><td>  Total </td><td>  73% </td><td>  89% </td><td>  16% </td></tr></tbody></table></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de479308/">https://habr.com/ru/post/de479308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de479298/index.html">PostgreSQL-Antimuster: CTE x CTE</a></li>
<li><a href="../de479300/index.html">√ñkologie und Rechenzentren. Wie in Russland und im Ausland "gr√ºne Daten"</a></li>
<li><a href="../de479302/index.html">Grundlagen zu Unity Shader-Diagrammen</a></li>
<li><a href="../de479304/index.html">Ephemere Container Kubernetes Erste Schritte</a></li>
<li><a href="../de479306/index.html">PHP Digest Nr. 169 (26. November - 9. Dezember 2019)</a></li>
<li><a href="../de479310/index.html">Wie man 1C Programmer zum Java-Entwickler macht</a></li>
<li><a href="../de479312/index.html">Erstellen eines inkrementellen Servers f√ºr iOS Team</a></li>
<li><a href="../de479316/index.html">Integrationsbus f√ºr die Bank SOYUZ (AO): Design und Autotest</a></li>
<li><a href="../de479318/index.html">CLion 2019.3 ist da! Verbesserte Editorgeschwindigkeit und die am meisten erwarteten neuen Funktionen</a></li>
<li><a href="../de479320/index.html">Ausgabe Nr. 28: IT-Schulung - Aktuelle Fragen und Herausforderungen f√ºhrender Unternehmen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>