<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè© üë®üèΩ‚Äçüé® üö£üèø Utiliser ClickHouse dans VK, ou pourquoi nous avons √©crit KittenHouse üßò ‚óÄÔ∏è üèÇüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au d√©but de l'ann√©e, nous avons d√©cid√© d'apprendre √† stocker et √† lire les journaux de d√©bogage VK plus efficacement qu'auparavant. Les journaux de d√©...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Utiliser ClickHouse dans VK, ou pourquoi nous avons √©crit KittenHouse</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/vk/blog/430168/"><img src="https://habrastorage.org/webt/rr/st/hl/rrsthl86lfjf6fjaojdxickg_wu.jpeg" width="300" align="left">  Au d√©but de l'ann√©e, nous avons d√©cid√© d'apprendre √† stocker et √† lire les journaux de d√©bogage VK plus efficacement qu'auparavant.  Les journaux de d√©bogage sont, par exemple, des journaux de conversion vid√©o (essentiellement la sortie de la commande ffmpeg et une liste d'√©tapes de pr√©traitement des fichiers), dont nous n'avons parfois besoin que de 2 √† 3 mois apr√®s le traitement du fichier probl√®me. <br><br>  √Ä cette √©poque, nous avions 2 fa√ßons de stocker et de traiter les journaux - notre propre moteur de journaux et rsyslog, que nous utilisions en parall√®le.  Nous avons commenc√© √† envisager d'autres options et avons r√©alis√© que ClickHouse de Yandex nous convenait parfaitement - nous avons d√©cid√© de la mettre en ≈ìuvre. <br><br>  Dans cet article, je vais vous parler de la fa√ßon dont nous avons commenc√© √† utiliser ClickHouse sur VKontakte, du type de r√¢teau sur lequel ils ont march√© et de ce que sont KittenHouse et LightHouse.  Les deux produits sont pr√©sent√©s en open-source, des liens √† la fin de l'article. <br><a name="habracut"></a><br><h3>  T√¢che de collecte des journaux </h3><br>  Configuration requise: <br><br><ol><li>  Stockage de centaines de t√©raoctets de journaux. </li><li>  Stockage pendant des mois ou (rarement) des ann√©es. </li><li>  Vitesse d'√©criture √©lev√©e. </li><li>  Vitesse de lecture √©lev√©e (la lecture est rare). </li><li>  Prise en charge de l'index </li><li>  Prise en charge des cordes longues (&gt; 4 Ko). </li><li>  Simplicit√© de fonctionnement. </li><li>  Stockage compact. </li><li>  La possibilit√© d'ins√©rer √† partir de dizaines de milliers de serveurs (UDP sera un plus). </li></ol><br><h3>  Solutions possibles </h3><br>  √ânum√©rons bri√®vement les options que nous avons envisag√©es et leurs inconv√©nients: <br><br><h4>  Moteur de journaux </h4><br>  Notre microservice auto-√©crit pour les journaux. <br><blockquote>  - Capable de ne donner que les N derni√®res lignes qui tiennent dans la RAM. <br>  - Stockage peu compact (pas de compression transparente). </blockquote><br><h4>  Hadoop </h4><br><blockquote>  - Tous les formats n'ont pas d'index. <br>  - La vitesse de lecture peut √™tre plus √©lev√©e (selon le format). <br>  - La complexit√© des param√®tres. <br>  - Il n'y a aucune possibilit√© d'insertion √† partir de dizaines de milliers de serveurs (Kafka ou analogues sont n√©cessaires). </blockquote><h4>  Fichiers Rsyslog + </h4><br><blockquote>  - Pas d'index. <br>  - Faible vitesse de lecture (grep / zgrep r√©gulier). <br>  - Cha√Ænes non prises en charge sur le plan architectural&gt; 4 Ko, UDP encore moins (1,5 Ko). <br>  ¬± Le stockage compact est r√©alis√© par logrotate sur la couronne </blockquote><br>  Nous avons utilis√© rsyslog comme solution de rechange pour le stockage √† long terme, mais les longues lignes ont √©t√© tronqu√©es, il peut donc difficilement √™tre qualifi√© d'id√©al. <br><br><h4>  Fichiers LSD + </h4><br><blockquote>  - Pas d'index. <br>  - Faible vitesse de lecture (grep / zgrep r√©gulier). <br>  - Pas sp√©cialement con√ßu pour √™tre ins√©r√© √† partir de dizaines de milliers de serveurs. <br>  ¬± Le stockage compact est r√©alis√© par logrotate sur la couronne. </blockquote>  Les diff√©rences par rapport √† rsyslog dans notre cas sont que LSD prend en charge les cha√Ænes longues, mais des modifications importantes du protocole interne sont n√©cessaires pour ins√©rer √† partir de dizaines de milliers de serveurs, bien que cela puisse √™tre fait. <br><br><h4>  Elasticsearch </h4><br><blockquote>  - Probl√®mes de fonctionnement. <br>  - Enregistrement instable. <br>  - Pas d'UDP. <br>  - Mauvaise compression. </blockquote> La pile ELK est d√©j√† presque la norme de l'industrie pour le stockage des journaux.  D'apr√®s notre exp√©rience, tout va bien avec la vitesse de lecture, mais il y a des probl√®mes d'√©criture, par exemple, lors de la fusion d'indices. <br><br>  ElasticSearch est principalement con√ßu pour la recherche en texte int√©gral et les demandes de lecture relativement fr√©quentes.  Pour nous, un enregistrement stable et la possibilit√© de lire nos donn√©es plus ou moins rapidement sont plus importants, et par co√Øncidence exacte.  L'index pour ElasticSearch est affin√© pour la recherche en texte int√©gral, et l'espace disque est assez important par rapport au gzip du contenu original. <br><br><h4>  Clickhouse </h4><br><blockquote>  - Pas d'UDP. </blockquote><br>  Dans l'ensemble, la seule chose qui ne nous convenait pas chez ClickHouse √©tait le manque de communication UDP.  En fait, parmi les options ci-dessus, seul rsyslog l'avait, mais rsyslog ne supportait pas les longues lignes. <br><br>  Selon d'autres crit√®res, ClickHouse est venu vers nous, et nous avons d√©cid√© de l'utiliser, et des probl√®mes de transport ont √©t√© r√©solus au cours du processus. <br><br><h3>  Pourquoi KittenHouse est n√©cessaire </h3><br>  Comme vous le savez probablement, VKontakte fonctionne sur PHP / KPHP, avec des "moteurs" (microservices) en C / C ++ et un peu sur Go.  PHP n'a pas de concept ¬´d'√©tat¬ª entre les requ√™tes, sauf peut-√™tre pour la m√©moire partag√©e et les connexions ouvertes. <br><br>  Puisque nous avons des dizaines de milliers de serveurs √† partir desquels nous voulons pouvoir envoyer des journaux √† ClickHouse, il ne serait pas rentable de garder des connexions ouvertes de chaque travailleur PHP (il peut y avoir plus de 100 travailleurs pour chaque serveur).  Par cons√©quent, nous avons besoin d'une sorte de proxy entre ClickHouse et PHP.  Nous avons appel√© ce proxy KittenHouse. <br><br><h3>  KittenHouse, v1 </h3><br>  Tout d'abord, nous avons d√©cid√© d'essayer le sch√©ma le plus simple possible pour comprendre si notre approche fonctionnerait ou non.  Si Kafka vous vient √† l'esprit lorsque vous r√©solvez ce probl√®me, alors vous n'√™tes pas seul.  Cependant, nous ne voulions pas utiliser de serveurs interm√©diaires suppl√©mentaires - dans ce cas, nous pourrions facilement nous reposer sur les performances de ces serveurs, et non sur ClickHouse lui-m√™me.  De plus, nous avons collect√© des journaux et nous avions besoin d'un l√©ger retard pr√©visible dans l'insertion des donn√©es.  Le sch√©ma est le suivant: <br><br><img src="https://habrastorage.org/webt/az/pv/b8/azpvb8fivabsjrpasiemvl0_udw.png"><br><br>  Sur chacun des serveurs, notre proxy local (kittenhouse) est install√© et chaque instance conserve strictement une connexion HTTP avec le serveur ClickHouse n√©cessaire.  Le collage se fait dans des tables spoul√©es, car il n'est souvent pas recommand√© d'ins√©rer MergeTree. <br><br><h3>  Caract√©ristiques KittenHouse, v1 </h3><br>  La premi√®re version de KittenHouse en savait un peu, mais cela suffisait pour les tests: <br><br><ul><li>  Communication via notre RPC (TL Scheme). </li><li>  Maintenez 1 connexion TCP / IP par serveur. </li><li>  Mise en m√©moire tampon par d√©faut, avec une taille de m√©moire tampon limit√©e (le reste est rejet√©). </li><li>  La possibilit√© d'√©crire sur le disque, dans ce cas il y a une garantie de livraison (au moins une fois). </li><li>  L'intervalle d'insertion est une fois toutes les 2 secondes. </li></ul><br><h3>  Premiers probl√®mes </h3><br>  Nous avons rencontr√© le premier probl√®me lorsque nous avons ¬´rembours√©¬ª le serveur ClickHouse pendant plusieurs heures, puis l'avons rallum√©.  Ci-dessous, vous pouvez voir la moyenne de charge sur le serveur apr√®s qu'il a "augment√©": <br><br><img src="https://habrastorage.org/webt/jr/sm/o6/jrsmo61d61pmkmf1wt39l8igl_i.png"><br><br>  L'explication est assez simple: ClickHouse a un mod√®le de r√©seau par thread, donc quand j'essaye de faire INSERT √† partir de milliers de n≈ìuds en m√™me temps, il y avait une tr√®s forte concurrence pour les ressources CPU et le serveur a √† peine r√©pondu.  Cependant, toutes les donn√©es ont finalement √©t√© ins√©r√©es et rien n'est tomb√©. <br><br>  Pour r√©soudre ce probl√®me, nous avons mis nginx devant ClickHouse et, en g√©n√©ral, cela a aid√©. <br><br><h3>  D√©veloppement ult√©rieur </h3><br>  Au cours de l'op√©ration, nous avons rencontr√© un certain nombre de probl√®mes, principalement li√©s non pas √† ClickHouse, mais √† notre mode de fonctionnement.  Voici un autre r√¢teau sur lequel nous avons march√©: <br><br><h4>  Un grand nombre de ¬´morceaux¬ª de tables Buffer entra√Æne des vidages fr√©quents de tampon dans MergeTree </h4><br>  Dans notre cas, il y avait 16 morceaux de tampon et un intervalle de r√©initialisation toutes les 2 secondes, et il y avait 20 morceaux de tables, ce qui donnait jusqu'√† 160 insertions par seconde.  Cela affectait p√©riodiquement tr√®s fortement les performances d'insertion - il y avait beaucoup de fusions en arri√®re-plan et l'utilisation du disque atteignait 80% et plus. <br><br>  <b>Solution:</b> augmentez l'intervalle de r√©initialisation du tampon par d√©faut, r√©duisez le nombre de pi√®ces √† 2. <br><br><h4>  Nginx renvoie 502 lorsque les connexions √† l'extr√©mit√© amont </h4><br>  Cela en soi n'est pas un probl√®me, mais en combinaison avec un vidage fr√©quent du tampon, cela a donn√© un arri√®re-plan assez √©lev√© de 502 erreurs lors de la tentative d'insertion dans l'une des tables, ainsi que lors de la tentative de SELECT. <br><br>  <b>Solution: ils ont</b> √©crit leur proxy inverse √† l'aide de la biblioth√®que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://github.com/valyala/fast">fasthttp</a> , qui regroupe l'insert en tables et consomme tr√®s √©conomiquement les connexions.  Il fait √©galement la distinction entre SELECT et INSERT et dispose de pools de connexion distincts pour l'insertion et la lecture. <br><br><img src="https://habrastorage.org/webt/7i/4z/wl/7i4zwlmtjgfpgodsdqup1coqqus.png"><br><br><h4>  Manque de m√©moire avec insertion intensive </h4><br>  La biblioth√®que fasthttp a ses avantages et ses inconv√©nients.  L'un des inconv√©nients est que la requ√™te et la r√©ponse sont enti√®rement mises en m√©moire tampon avant de donner le contr√¥le au gestionnaire de requ√™tes.  Pour nous, cela a abouti au fait que si l'insertion dans ClickHouse "n'avait pas le temps", alors les tampons ont commenc√© √† augmenter et finalement toute la m√©moire sur le serveur s'est √©puis√©e, ce qui a conduit √† la destruction du proxy inverse par OOM.  Des coll√®gues ont dessin√© un d√©motivateur: <br><br><img src="https://habrastorage.org/webt/ny/cb/k1/nycbk1toeiw_x-ktpun4gmicsf0.png" width="300"><br><br>  <b>Solution:</b> patcher fasthttp pour prendre en charge le streaming du corps de la demande POST s'est av√©r√© √™tre une t√¢che intimidante, nous avons donc d√©cid√© d'utiliser les connexions Hijack () et de mettre √† niveau la connexion √† notre protocole si la demande venait avec la m√©thode HTTP KITTEN.  Puisque le serveur doit r√©pondre MEOW en r√©ponse, s'il comprend ce protocole, l'ensemble du sch√©ma est appel√© protocole KITTEN / MEOW. <br><br>  Nous lisons uniquement √† partir de 50 connexions al√©atoires √† la fois, donc, gr√¢ce √† TCP / IP, le reste des clients ¬´attend¬ª et nous ne d√©pensons pas de m√©moire sur les tampons jusqu'√† ce que la file d'attente atteigne les clients correspondants.  Cela a r√©duit la consommation de m√©moire d'au moins 20 fois, et nous n'avons plus eu de tels probl√®mes. <br><br><h4>  Les tables ALTER peuvent durer longtemps s'il y a de longues requ√™tes </h4><br>  ClickHouse a un ALTER non bloquant dans le sens o√π il n'interf√®re pas avec les requ√™tes SELECT et INSERT.  Mais ALTER ne peut pas d√©marrer tant qu'il n'a pas termin√© d'ex√©cuter des requ√™tes sur cette table envoy√©e avant ALTER. <br><br>  Si votre serveur a des ant√©c√©dents de ¬´longues¬ª requ√™tes sur certaines tables, vous pouvez rencontrer une situation o√π ALTER sur cette table n'aura pas le temps de s'ex√©cuter dans un d√©lai par d√©faut de 60 secondes.  Mais cela ne signifie pas qu'ALTER √©chouera: il sera ex√©cut√© d√®s que ces requ√™tes SELECT seront termin√©es. <br><br>  Cela signifie que vous ne savez pas √† quel moment ALTER s'est r√©ellement produit et que vous n'avez pas la possibilit√© de recr√©er automatiquement les tables Buffer afin que leur disposition soit toujours la m√™me.  Cela peut entra√Æner des probl√®mes d'insertion. <br><br><img src="https://habrastorage.org/webt/59/3n/qn/593nqn-p_ujm0uqitctfapgj8t4.png"><br><br><img src="https://habrastorage.org/webt/pj/2p/8p/pj2p8pxgpjxefjjgo_yzbvqg_ys.png"><br><br>  <b>Solution:</b> En cons√©quence, nous pr√©voyons d'abandonner compl√®tement l'utilisation des tables tampons.  En g√©n√©ral, les tables tampons ont une port√©e, jusqu'√† pr√©sent, nous les utilisons et ne rencontrons pas d'√©normes probl√®mes.  Mais maintenant, nous avons finalement atteint le point o√π il est plus facile d'impl√©menter la fonctionnalit√© des tables de tampons du c√¥t√© du proxy inverse que de continuer √† accepter leurs d√©fauts.  Un exemple de circuit ressemblera √† ceci (la ligne pointill√©e montre l'asynchronie ACK sur INSERT). <br><br><img src="https://habrastorage.org/webt/1_/1f/l4/1_1fl4op3ycts_jltiboixtxmoq.png"><br><br><h3>  Lecture des donn√©es </h3><br>  Disons que nous avons compris l'encart.  Comment lire ces journaux de ClickHouse?  Malheureusement, nous n'avons trouv√© aucun outil pratique et facile √† utiliser pour lire les donn√©es brutes (sans graphiques et autres) de ClickHouse, nous avons donc √©crit notre propre solution - LightHouse.  Ses capacit√©s sont plut√¥t modestes: <br><br><ul><li>  Vue rapide du contenu du tableau. </li><li>  Filtrage, tri. </li><li>  Modification d'une requ√™te SQL. </li><li>  Voir la structure de la table. </li><li>  Affiche le nombre approximatif de lignes et l'espace disque utilis√©. </li></ul><br>  Cependant, LightHouse est rapide et capable de faire ce dont nous avons besoin.  Voici quelques captures d'√©cran: <br><br>  <b>Voir la structure de la table</b> <br><br><img src="https://habrastorage.org/webt/ne/jb/vt/nejbvtrgm8w2plmtk9rt24vtu9c.png"><br><br>  <b>Filtrage de contenu</b> <br><br><img src="https://habrastorage.org/webt/qe/-m/lj/qe-mlja21vnhuxziu3bzoj2gvek.png"><br><br><h3>  R√©sultats </h3><br>  ClickHouse est pratiquement la seule base de donn√©es open source qui a pris racine sur VKontakte.  Nous sommes satisfaits de la rapidit√© de ses travaux et sommes pr√™ts √† accepter les lacunes qui sont examin√©es ci-dessous. <br><br><h4>  Difficult√© au travail </h4><br>  Dans l'ensemble, ClickHouse est une base de donn√©es tr√®s stable et tr√®s rapide.  Cependant, comme pour tout produit, surtout si jeune, il y a des caract√©ristiques dans le travail qui doivent √™tre prises en compte: <br><br><ul><li>  Toutes les versions ne sont pas √©galement stables: ne passez pas directement √† la nouvelle version en production, il vaut mieux attendre plusieurs versions de correction de bugs. </li><li>  Pour des performances optimales, il est fortement conseill√© de configurer le RAID et d'autres choses selon les instructions.  Cela a √©t√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©cemment signal√© sur une charge √©lev√©e</a> . </li><li>  La r√©plication n'a pas de limites de vitesse int√©gr√©es et peut entra√Æner une d√©gradation significative des performances du serveur si vous ne la limitez pas vous-m√™me (mais ils promettent de la corriger). </li><li>  Linux a une caract√©ristique d√©sagr√©able du m√©canisme de m√©moire virtuelle: si vous √©crivez activement sur le disque et que les donn√©es n'ont pas le temps d'√™tre vid√©es, √† un moment donn√©, le serveur ¬´se met compl√®tement en lui-m√™me¬ª, commence √† vider activement le cache des pages sur le disque et bloque presque compl√®tement le processus ClickHouse.  Cela se produit parfois avec des fusions importantes et vous devez surveiller cela, par exemple, vider r√©guli√®rement les tampons vous-m√™me ou effectuer une synchronisation. </li></ul><br><h3>  Open source </h3><br>  KittenHouse et LightHouse sont maintenant disponibles en open source dans notre d√©p√¥t github: <br><br><ul><li>  KittenHouse: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/vkcom/kittenhouse</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LightHouse</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">github.com/vkcom/lighthouse</a> </li></ul><br>  Je vous remercie! <br><br>  <i>Yuri Nasretdinov, d√©veloppeur au d√©partement d'infrastructure backend de VKontakte</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430168/">https://habr.com/ru/post/fr430168/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430156/index.html">¬´D√©collez ou pas¬ª: un nouveau lecteur appara√Ætra sur le march√© des services de streaming vid√©o</a></li>
<li><a href="../fr430158/index.html">10 commandements de s√©curit√© qui pourraient √™tre utiles √† toute organisation</a></li>
<li><a href="../fr430160/index.html">Conception UX / UI du nouveau VS 2019</a></li>
<li><a href="../fr430164/index.html">Comment dire non √† un client √©tranger et ne pas ruiner les relations commerciales</a></li>
<li><a href="../fr430166/index.html">Nouveaut√©s de Blazor 0.7.0</a></li>
<li><a href="../fr430172/index.html">Site statique sans serveur utilisant IPFS</a></li>
<li><a href="../fr430178/index.html">Soleil artificiel chinois ...</a></li>
<li><a href="../fr430180/index.html">"L'esprit est en ligne." Contact avec un esprit diff√©rent</a></li>
<li><a href="../fr430182/index.html">CodeOne 2018 en JavaOne mais uniquement en masque</a></li>
<li><a href="../fr430186/index.html">L'informatique paresseuse au quotidien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>