<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏴󠁧󠁢󠁷󠁬󠁳󠁿 👩🏼‍🤝‍👨🏽 🤶🏽 Manual do Node.js, parte 5: npm e npx ⛅️ 🐜 ☠️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje, na quinta parte da tradução do manual Node.js., concluiremos a análise dos recursos do npm, em particular, abordaremos problemas como descobrir ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manual do Node.js, parte 5: npm e npx</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/423705/">  Hoje, na quinta parte da tradução do manual Node.js., concluiremos a análise dos recursos do npm, em particular, abordaremos problemas como descobrir versões instaladas de pacotes npm, instalar versões antigas de pacotes, atualizar versões antigas, atualizar dependências, desinstalação local e global de pacotes.  Aqui falamos sobre npx. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/he/di/2j/hedi2j_qyfbnwfo_jqnnqd3ub6o.png"></a> <br><br><div class="spoiler">  <b class="spoiler_title">[Aconselhamos a ler] Outras partes do ciclo</b> <div class="spoiler_text">  Parte 1: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Informações gerais e introdução</a> <br>  Parte 2: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JavaScript, V8, alguns truques de desenvolvimento</a> <br>  Parte 3: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hospedagem, REPL, trabalho com o console, módulos</a> <br>  Parte 4: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">arquivos npm, package.json e package-lock.json</a> <br>  Parte 5: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npm e npx</a> <br>  Parte 6: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">loop de eventos, pilha de chamadas, temporizadores</a> <br>  Parte 7: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Programação assíncrona</a> <br>  Parte 8: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Guia Node.js, Parte 8: Protocolos HTTP e WebSocket</a> <br>  Parte 9: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Guia Node.js, parte 9: trabalhando com o sistema de arquivos</a> <br>  Parte 10: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Guia do Node.js, Parte 10: Módulos padrão, fluxos, bancos de dados, NODE_ENV</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PDF completo do Guia Node.js.</a> <br></div></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Descobrindo versões dos pacotes npm instalados</font> </h2><br>  Para descobrir as versões de todos os pacotes npm instalados na pasta do projeto, incluindo suas dependências, execute o seguinte comando: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list</code> </pre> <br>  Como resultado, por exemplo, pode resultar o seguinte: <br><br><pre> <code class="hljs mel">&gt; npm list /Users/flavio/dev/node/cowsay └─┬ cowsay@1<span class="hljs-number"><span class="hljs-number">.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> ├── get-stdin@5<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> ├─┬ optimist@0<span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> │ ├── minimist@0<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span> │ └── wordwrap@0<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.3</span></span> ├─┬ <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>-width@2<span class="hljs-number"><span class="hljs-number">.1</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> │ ├── is-fullwidth-code-point@2<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> │ └─┬ <span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-ansi@4<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> │  └── ansi-regex@3<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> └── <span class="hljs-keyword"><span class="hljs-keyword">strip</span></span>-eof@1<span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre> <br>  Você pode descobrir o mesmo observando o <code>package-lock.json</code> projeto, mas a estrutura em árvore que o comando acima exibe é mais conveniente para exibição. <br><br>  Para obter uma lista semelhante de pacotes instalados globalmente, você pode usar o seguinte comando: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list -g</code> </pre> <br>  Você pode exibir apenas informações sobre pacotes locais de nível superior (ou seja, aqueles que você instalou e listados em <code>package.json</code> ) da seguinte maneira: <br><br><pre> <code class="hljs pgsql">npm list <span class="hljs-comment"><span class="hljs-comment">--depth=0</span></span></code> </pre> <br>  Como resultado, se, por exemplo, você instalou apenas o pacote cowsay, o seguinte será exibido: <br><br><pre> <code class="hljs pgsql">&gt; npm list <span class="hljs-comment"><span class="hljs-comment">--depth=0 /Users/flavio/dev/node/cowsay └── cowsay@1.3.1</span></span></code> </pre> <br>  Para descobrir a versão de um pacote específico, use o seguinte comando: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> list cowsay</code> </pre> <br>  Como resultado de sua implementação, obtemos aproximadamente o seguinte: <br><br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; npm list cowsay /Users/flavio/dev/node/cowsay └── cowsay@1.3.1</span></span></code> </pre> <br>  Este comando também é adequado para descobrir as versões de dependência dos pacotes que você instalou.  Nesse caso, o nome do pacote de dependência atua como o nome do pacote passado para ele e a saída do comando será semelhante a esta: <br><br><pre> <code class="hljs perl">&gt; npm list minimist /Users/flavio/dev/node/cowsay └─┬ cowsay@1.<span class="hljs-number"><span class="hljs-number">3.1</span></span> └─┬ optimist@0.<span class="hljs-number"><span class="hljs-number">6.1</span></span>   └── minimist@0.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br>  Uma entrada sobre o pacote de dependência nessa estrutura será destacada. <br><br>  Se você deseja saber qual é o número da versão mais recente de um pacote disponível no repositório npm, será necessário um comando do seguinte formato: <br><br><pre> <code class="hljs pgsql">npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> [package_name] <span class="hljs-keyword"><span class="hljs-keyword">version</span></span></code> </pre> <br>  Em resposta, ela emite o número da versão do pacote: <br><br><pre> <code class="hljs pgsql">&gt; npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> cowsay <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-number"><span class="hljs-number">1.3</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Instalando versões antigas dos pacotes npm</font> </h2><br>  A instalação de uma versão antiga do pacote npm pode ser necessária para solucionar problemas de compatibilidade.  Você pode instalar a versão exigida do pacote a partir do npm usando a seguinte construção: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>&gt;@&lt;<span class="hljs-keyword"><span class="hljs-keyword">version</span></span>&gt;</code> </pre> <br>  No caso do pacote cowsay que estamos usando como exemplo, o <code>install cowsay</code> instalará sua versão mais recente (1.3.1 no momento desta redação).  Se você precisar instalar sua versão 1.2.0, use este comando: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">npm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cowsay</span></span>@<span class="hljs-keyword"><span class="hljs-keyword">1</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">2</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">0</span></span></code> </pre> <br>  Você pode especificar versões instalando pacotes globais: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">npm</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-g</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">webpack</span></span>@<span class="hljs-keyword"><span class="hljs-keyword">4</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">16</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">4</span></span></code> </pre> <br>  Se você precisar descobrir quais versões de um pacote estão disponíveis no npm, faça isso com a ajuda desta construção: <br><br><pre> <code class="hljs vhdl">npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>&gt; versions</code> </pre> <br>  Aqui está um exemplo do resultado de seu trabalho: <br><br><pre> <code class="hljs pgsql">&gt; npm <span class="hljs-keyword"><span class="hljs-keyword">view</span></span> cowsay versions [ <span class="hljs-string"><span class="hljs-string">'1.0.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.2'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.0.3'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.2'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.3'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.4'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.5'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.6'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.7'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.8'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.1.9'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.2.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.2.1'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.3.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'1.3.1'</span></span> ]</code> </pre> <br><h2>  <font color="#3AC1EF">Atualizando dependências do projeto para suas versões mais recentes</font> </h2><br>  Quando você instala um pacote com um comando do tipo <code>npm install &lt;packagename&gt;</code> , a versão mais recente é baixada do repositório e colocada na pasta <code>node_modules</code> .  Nesse caso, as entradas correspondentes são adicionadas aos <code>package-lock.json</code> <code>package.json</code> e <code>package-lock.json</code> localizados na pasta do projeto. <br><br>  Além disso, instalando um pacote, o npm localiza e instala suas dependências. <br><br>  Suponha que instalemos o pacote cowsay familiar executando o <code>npm install cowsay</code> .  O pacote será instalado na pasta <code>node_modules</code> do projeto e a seguinte entrada estará no arquivo <code>package.json</code> : <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"cowsay"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.3.1"</span></span> } }</code> </pre> <br>  <code>package-lock.json</code> também incluirá informações sobre este pacote.  Aqui está um fragmento: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"requires"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lockfileVersion"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: {   <span class="hljs-attr"><span class="hljs-attr">"cowsay"</span></span>: {     <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.3.1"</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"resolved"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz"</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"integrity"</span></span>: <span class="hljs-string"><span class="hljs-string">"sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkMAjufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ=="</span></span>,     <span class="hljs-attr"><span class="hljs-attr">"requires"</span></span>: {       <span class="hljs-attr"><span class="hljs-attr">"get-stdin"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.0.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"optimist"</span></span>: <span class="hljs-string"><span class="hljs-string">"~0.6.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"string-width"</span></span>: <span class="hljs-string"><span class="hljs-string">"~2.1.1"</span></span>,       <span class="hljs-attr"><span class="hljs-attr">"strip-eof"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.0.0"</span></span>     }   } } }</code> </pre> <br>  A partir desses dois arquivos, você pode descobrir que instalamos o cowsay versão 1.3.1 e que a regra de atualização do pacote está especificada como <code>^1.3.1</code> .  Na quarta parte desta série de materiais, já falamos sobre as regras do controle de versão semântico.  Lembre-se de que esta entrada significa que o npm pode atualizar o pacote quando suas versões secundária e de patch forem lançadas. <br><br>  Se, por exemplo, uma nova versão secundária de um pacote for <code>npm update</code> e executarmos o comando <code>npm update</code> , a versão instalada do pacote será atualizada e as informações sobre o pacote instalado <code>package-lock.json</code> atualizadas no arquivo <code>package-lock.json</code> e o arquivo <code>package.json</code> permanecerá inalterado. <br><br>  Para descobrir se novas versões dos pacotes usados ​​no projeto foram lançadas, você pode usar o seguinte comando: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npm</span></span> outdated</code> </pre> <br>  Aqui estão os resultados deste comando para um projeto cujas dependências não foram atualizadas por um longo tempo: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a65/820/68f/a6582068f2d230e7f7699324aeefff84.png"></div><br>  <i><font color="#999999">Análise de dependências obsoletas do projeto</font></i> <br><br>  Algumas das atualizações de pacotes disponíveis são seus principais lançamentos, cujas atualizações não ocorrerão quando o comando <code>npm update</code> for executado.  A atualização para os principais releases desta equipe não é realizada, pois eles (por definição) podem conter grandes alterações que não se distinguem pela compatibilidade com versões anteriores anteriores, e o npm procura salvar o desenvolvedor de problemas que possam causar o uso de tais pacotes. <br><br>  Para atualizar para as novas versões principais de todos os pacotes usados, instale globalmente o <code>npm-check-updates</code> : <br><br><pre> <code class="hljs powershell">npm install <span class="hljs-literal"><span class="hljs-literal">-g</span></span> npm<span class="hljs-literal"><span class="hljs-literal">-check</span></span><span class="hljs-literal"><span class="hljs-literal">-updates</span></span></code> </pre> <br>  Em seguida, execute o utilitário fornecido por ele: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ncu</span></span> -u</code> </pre> <br>  Este comando atualizará o arquivo <code>package.json</code> , fazendo alterações nas instruções para versões adequadas do pacote nas <code>devDependencies</code> <code>dependencies</code> e <code>devDependencies</code> .  Isso permitirá que o npm atualize os pacotes usados ​​no projeto para novas versões principais depois de executar o comando <code>npm update</code> . <br><br>  Se você deseja instalar as versões mais recentes do pacote para um projeto que você acabou de baixar, que ainda não possui uma pasta <code>node_modules</code> , em vez de <code>npm update</code> , execute o comando <code>npm install</code> . <br><br><h2>  <font color="#3AC1EF">Desinstalação local ou global de pacotes</font> </h2><br>  Para desinstalar um pacote que foi instalado anteriormente localmente (usando o comando <code>install &lt;package-name&gt;</code> ), execute um comando parecido com este: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">uninstall</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">package</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>&gt;</code> </pre> <br>  Se o pacote estiver instalado globalmente, você precisará usar o sinalizador <code>-g</code> <code>(--global</code> ) para removê-lo.  Por exemplo, um comando semelhante pode ser assim: <br><br><pre> <code class="hljs sql">npm <span class="hljs-keyword"><span class="hljs-keyword">uninstall</span></span> -g webpack</code> </pre> <br>  Ao executar esse comando, a pasta atual não importa. <br><br><h2>  <font color="#3AC1EF">Sobre como escolher entre instalação global e local de pacotes</font> </h2><br>  Quando e por que os pacotes são melhor instalados globalmente?  Para responder a essa pergunta, lembremos como as instalações local e global dos pacotes diferem: <br><br><ul><li>  Pacotes locais são instalados no diretório em que eles executam um comando no formato <code>npm install &lt;package-name&gt;</code> .  Esses pacotes estão localizados na pasta <code>node_modules</code> localizada neste diretório. </li><li>  Pacotes globais são instalados em uma pasta especial (que depende das configurações específicas do seu sistema), independentemente de onde eles executam um comando no formato <code>npm install -g &lt;package-name&gt;</code> . </li></ul><br>  Conectar pacotes locais e globais no código é o mesmo: <br><br><pre> <code class="hljs lisp">require('package-name')</code> </pre> <br>  Então, qual é a melhor maneira de instalar pacotes? <br><br>  Em geral, todos os pacotes devem ser instalados localmente.  Por esse motivo, mesmo se você tiver dezenas de projetos Node.js., poderá garantir, se necessário, o uso de versões diferentes dos mesmos pacotes. <br><br>  A atualização do pacote global leva ao fato de que todos os projetos nos quais ele é aplicado usarão seu novo release.  É fácil entender que isso, em termos de suporte ao projeto, pode levar a um verdadeiro pesadelo, pois os novos lançamentos de alguns pacotes podem ser incompatíveis com as versões antigas. <br><br>  Se cada projeto tiver sua própria versão local de um pacote, mesmo que isso pareça um desperdício de recursos, é uma taxa muito pequena pela oportunidade de evitar as consequências negativas que podem ser causadas pela incompatibilidade de novas versões de pacotes atualizadas centralmente com o código do projeto. <br><br>  Os pacotes devem ser instalados globalmente quando são alguns utilitários chamados da linha de comando usados ​​em muitos projetos. <br><br>  Esses pacotes também podem ser instalados localmente, executando os utilitários de linha de comando que eles fornecem usando npx, mas alguns pacotes ainda são melhor instalados globalmente.  Esses pacotes com os quais você pode estar familiarizado incluem, por exemplo, o seguinte: <br><br><ul><li>  npm </li><li>  create-react-app </li><li>  vue-cli </li><li>  grunt-cli </li><li>  mocha </li><li>  react-native-cli </li><li>  Gatsby-Cli </li><li>  para sempre </li><li>  nodemon </li></ul><br>  É possível que seu sistema já tenha pacotes instalados globalmente.  Para descobrir isso, use o seguinte comando: <br><br><pre> <code class="hljs powershell">npm list <span class="hljs-literal"><span class="hljs-literal">-g</span></span> -<span class="hljs-literal"><span class="hljs-literal">-depth</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">Sobre dependências do projeto</font> </h2><br>  Quando um pacote deve ser considerado como uma dependência regular do projeto, necessária para garantir seu funcionamento, e quando - como uma dependência do desenvolvimento? <br><br>  Ao instalar um pacote usando um comando como <code>npm install &lt;package-name&gt;</code> ele é instalado como uma dependência regular.  Um registro desse pacote é feito na seção <code>dependencies</code> do arquivo <code>package.json</code> (antes da npm 5, esse registro era feito apenas usando o sinalizador <code>--save</code> , agora não é necessário usá-lo). <br><br>  O uso do <code>--save-dev</code> permite instalar o pacote como uma dependência de desenvolvimento.  Ao mesmo tempo, é feito um registro na seção <code>devDependencies</code> do arquivo <code>devDependencies</code> . <br><br>  Dependências de desenvolvimento são pacotes necessários no processo de desenvolvimento de um projeto e, durante seu funcionamento normal, não são necessários.  Tais pacotes incluem, por exemplo, ferramentas de teste, Webpack, Babel. <br><br>  Quando um projeto é implantado usando o comando <code>npm install</code> em sua pasta, na qual existe uma pasta que contém o arquivo <code>package.json</code> , isso leva à instalação de todas as dependências, já que o npm assume que essa instalação é executada com a finalidade de trabalhar no projeto. <br><br>  Portanto, se o pacote precisar ser implementado na produção, ao implementá-lo, você precisará usar o <code>install --production</code> npm <code>install --production</code> --production.  Graças ao sinalizador <code>--production</code> , <code>--production</code> dependências de <code>--production</code> não serão instaladas. <br><br><h2>  <font color="#3AC1EF">Utilitário Npx</font> </h2><br>  Agora falaremos sobre uma equipe muito poderosa, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">npx</a> , que apareceu na npm 5.2.  Uma de suas capacidades é executar arquivos executáveis ​​incluídos nos pacotes npm.  Já consideramos usar o npx para executar um arquivo semelhante a partir do pacote cowsay.  Agora vamos falar sobre isso com mais detalhes. <br><br><h3>  <font color="#3AC1EF">NUse npx para simplificar a execução de comandos locais</font> </h3><br>  Os desenvolvedores do Node.js. publicaram muitos arquivos executáveis ​​(utilitários) na forma de pacotes que deveriam ser instalados globalmente, o que fornecia acesso conveniente a seus recursos, já que era possível executá-los na linha de comando simplesmente digitando o nome do comando correspondente.  No entanto, trabalhar em um ambiente assim era muito desconfortável se fosse necessário instalar versões diferentes dos mesmos pacotes. <br><br>  O uso de um comando no formato <code>npx commandname</code> procura automaticamente o arquivo desejado na pasta do projeto <code>node_modules</code> .  Isso elimina a necessidade de saber o caminho exato para esse arquivo.  Isso também torna desnecessário instalar o pacote globalmente com acesso a ele em qualquer lugar do sistema de arquivos usando a variável de sistema <code>PATH</code> . <br><br><h3>  <font color="#3AC1EF">ErExecutando utilitários sem a necessidade de instalá-los</font> </h3><br>  Npx tem outro recurso interessante, graças ao qual os utilitários podem ser iniciados sem antes instalá-los.  Isso é útil principalmente pelos seguintes motivos: <br><br><ul><li>  Não é necessária a instalação de utilitários. </li><li>  Você pode executar versões diferentes dos mesmos utilitários especificando a versão desejada usando a construção <code>@version</code> . </li></ul><br>  Vamos ver como usar esse mecanismo, usando o utilitário <code>cowsay</code> você já conhece.  Portanto, se o pacote cowsay estiver instalado globalmente, a execução do <code>cowsay "Hello"</code> na linha de comando exibirá no console uma vaca "falante": <br><br><pre> <code class="hljs tex">_______ &lt; Hello &gt; -------       <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>^__^        <span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>(oo)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">_</span></span></span></span>______           (__)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>)<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">/</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"> </span></span></span></span>              ||----w |               || ||</code> </pre> <br>  Se o pacote cowsay não estiver instalado globalmente, um comando semelhante gerará um erro. <br><br>  O utilitário npx permite executar esses comandos sem instalá-los.  Parece, no quadro de nosso exemplo, o seguinte: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">npx</span></span> cowsay <span class="hljs-string"><span class="hljs-string">"Hello"</span></span></code> </pre> <br>  Esse comando funcionará, mas embora uma vaca "falante", em geral, não traga muitos benefícios, a mesma abordagem pode ser usada para executar comandos muito mais úteis.  Aqui estão alguns exemplos: <br><br><ul><li>  Existe uma ferramenta de linha de comando projetada para criar e executar aplicativos Vue.  Usando npx, ele pode ser chamado assim: <code>npx vue create my-vue-app</code> . </li><li>  Você pode usar o utilitário <code>create-react-app</code> para <code>create-react-app</code> aplicativos React.  Sua chamada pelo npx é assim: <code>npx create-react-app my-react-app</code> . </li></ul><br>  Depois de baixar e usar o código npx apropriado, ele será excluído. <br><br><h3>  <font color="#3AC1EF">▍ Iniciando o código JavaScript usando várias versões do Node.js</font> </h3><br>  Para executar algum código usando versões diferentes do Node.js, você pode, usando o npx, acessar o <code>node</code> pacote npm, indicando sua versão.  É assim: <br><br><pre> <code class="hljs perl">npx node@6 -v <span class="hljs-comment"><span class="hljs-comment">#v6.14.3 npx node@8 -v #v8.11.3</span></span></code> </pre> <br>  Isso elimina a necessidade de ferramentas como nvm ou outros gerenciadores de versão do Node.js. <br><br><h3>  <font color="#3AC1EF">▍Inicie fragmentos de código arbitrário disponíveis em um determinado endereço</font> </h3><br>  Npx permite executar não apenas o código publicado em npm.  Em particular, se você tiver um link para um determinado pedaço de código (por exemplo, uma essência publicada no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">GitHub</a> ), poderá executá-lo assim: <br><br><pre> <code class="hljs objectivec">npx https:<span class="hljs-comment"><span class="hljs-comment">//gist.github.com/zkat/4bc19503fe9e9309e2bfaa2c58074d32</span></span></code> </pre> <br>  Obviamente, ao executar esse código, você não deve esquecer a segurança.  O Npx oferece ao desenvolvedor grandes oportunidades, mas também significa grande responsabilidade. <br><br><h3>  <font color="#3AC1EF">▍ Resultados</font> </h3><br>  Hoje falamos sobre alguns mecanismos úteis do npm e o uso do npx.  Neste ponto, você deve ter um entendimento básico do dispositivo npm e como trabalhar com este gerenciador de pacotes.  Se você quiser dar uma olhada mais profunda no npm, consulte a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">página de</a> documentação do projeto e experimente mais. <br><br>  Da próxima vez, discutiremos alguns mecanismos básicos do Node.js., um entendimento necessário para o desenvolvimento bem-sucedido de aplicativos para esta plataforma. <br><br>  <b>Caros leitores!</b>  Você usa npx? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt423705/">https://habr.com/ru/post/pt423705/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt423695/index.html">Como se aposentar antes dos 40 anos com um milhão de dólares em uma conta bancária</a></li>
<li><a href="../pt423697/index.html">Apresentando o Spring Data JDBC</a></li>
<li><a href="../pt423699/index.html">A “economia digital” aumentou de preço: 2 trilhões de rublos deverão ser alocados a partir do orçamento</a></li>
<li><a href="../pt423701/index.html">Guia do Node.js, parte 3: hospedagem, REPL, operações de console, módulos</a></li>
<li><a href="../pt423703/index.html">Manual do Node.js., Parte 4: Arquivos npm, package.json e package-lock.json</a></li>
<li><a href="../pt423707/index.html">O que há sob o capô da Jaxx. Entropia fora da caixa de 128 bits</a></li>
<li><a href="../pt423709/index.html">CSS Grid - canivete suíço para layouts de sites e aplicativos</a></li>
<li><a href="../pt423711/index.html">Gerenciando para um nerd: de onde obter dados?</a></li>
<li><a href="../pt423713/index.html">"Made in Russia" - linguagem de programação WBASIC para desenvolvimento de aplicativos Web do lado do servidor</a></li>
<li><a href="../pt423719/index.html">De Erlang / Elixir a Java e vice-versa. Aventura por 20 minutos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>