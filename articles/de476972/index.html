<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🎊 🧚🏼 🏇🏻 Deno: Node.JS läuft die Zeit davon? 👪 🙏🏿 🤳🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ungefähr 18 Monate sind seit Denos interner Veröffentlichung vergangen, eine Vorschau-Veröffentlichung wurde veröffentlicht, mehrere Artikel sind auf ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Deno: Node.JS läuft die Zeit davon?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/476972/"><p><img src="https://habrastorage.org/webt/ph/0g/t5/ph0gt5rsvagsf2ysoqple3gg7oo.png"></p><br><p>  Ungefähr 18 Monate sind seit Denos interner Veröffentlichung vergangen, eine Vorschau-Veröffentlichung wurde veröffentlicht, mehrere Artikel sind auf Habré erschienen, und Ryan geht zu Konferenzen und spricht über ihn.  Ich habe jedoch noch nie eine sorgfältige Analyse dieses Projekts gesehen - aus irgendeinem Grund beschränkt sich jeder darauf, die Dokumentation zu übersetzen ... </p><br><p> Versuchen wir es jetzt.  In den letzten 5 Jahren habe ich auf Node.JS geschrieben, und die Firma OneTwoTrip, in der ich jetzt arbeite, schreibt seit ungefähr 9 Jahren Projekte auf dem Knoten (ja, ich habe die Geschichte <a href="https://habr.com/ru/post/459206/">in einem Monolithen</a> über <a href="https://habr.com/ru/post/459206/">9 Jahre auf dem Knoten geschrieben</a> ).  Die Analyse sollte also gut sein.  Außerdem habe ich es ihm bereits in <a href="https://axept.timepad.ru/event/1110942/">Moscow Node.JS Meetup 10</a> gesagt, und es war interessant.  Übrigens, wenn es für Sie bequemer ist, zuzuhören und nicht zu lesen, <a href="https://youtu.be/4414kjKYekM">können</a> Sie hier zuhören und zuschauen.  Meine zweite Rede, ich bin ein Typ in einem rosa Hemd. </p><a name="habracut"></a><br><p>  Seltsamerweise ist es notwendig, in die Vergangenheit zu geraten, um zu verstehen, woher das Projekt kam und warum.  Also werfen wir etwas Plutonium ein, öffnen die Türen unseres Delorean und begeben uns auf eine Reise - schauen Sie sich die wichtigen 10 Jahre an, die Node.JS zu dem gemacht haben, was wir jetzt sehen. </p><br><p><img src="https://habrastorage.org/webt/sv/f7/xa/svf7xamhyfsi4rzxzdkwxlkfum0.jpeg"></p><br><h2 id="vperyod-v-proshloe">  Vorwärts in die Vergangenheit </h2><br><h3 id="2009">  2009 </h3><br><p>  Ryan Dahl kündigt Node.JS an, <a href="https://www.youtube.com/watch%3Fv%3DztspvPYybIY">hier ist sie</a> - die allererste Präsentation auf der JSConf 2009. </p><br><h3 id="2010">  2010 </h3><br><p>  Express, socket.io erscheinen - die Hauptbausteine ​​im Moment sind fast alle Dienstleistungen. </p><br><p>  Es gibt verrückte Leute, die wirklich Server-Code schreiben! </p><br><h3 id="2011">  2011 </h3><br><p>  Große Jungs beginnen mit Node.JS zu flirten - einschließlich Uber und Linkedin. </p><br><p>  Npm 1.0 Version. </p><br><p>  Der Knoten beginnt unter Windows zu arbeiten. </p><br><h3 id="2012">  2012 </h3><br><p>  Ryan entfernt sich von der Entwicklung von Node.JS.  <strong>Erinnere dich</strong> .  Es war 2012.  Ryan ist mit Sicherheit der Schöpfer und hat viel für das Ökosystem getan - aber die nächsten 7 Jahre vergingen <strong>ohne</strong> seine Teilnahme. </p><br><h3 id="2013">  2013 </h3><br><p>  Knoten bei Paypal, Walmart, eBay. </p><br><p>  Koa taucht auf - erinnerst du dich, wie viele Kopien von Generatoren kaputt waren? </p><br><h3 id="2014">  2014 </h3><br><p>  Knoten bei Netflix.  Die Versuche beginnen, das Projekt zu einem etwas ausgereifteren zu machen, mit einem offenen Modell für die Leitung eines Beirats.  Es gibt eine technische Stagnation, die zur Gabelung von io.js führt. </p><br><h3 id="2015">  2015 </h3><br><p>  Arbeite an den Bugs.  Die Fusion von io.js und Node in Ecstasy unter der Schirmherrschaft der Node Foundation und die Veröffentlichung von Node 4. Ich muss sagen, dies ist die Version, die ich für die erste halte, auf der es wirklich möglich war, etwas zu entwickeln.  Wenn jemand über die Versionen 0.xx geschrieben hat - dann erinnern Sie sich an var, callback hell, eine Reihe verschiedener Bibliotheken zur Vereinfachung der asynchronen Arbeit (wie step und async. Ja, async ist nicht nur async await, sondern auch eine npm-Bibliothek). </p><br><h3 id="2016">  2016 </h3><br><p>  Der Vorfall mit dem Linkspad, der immer noch böse Zungen sind, erinnert an das Ökosystem.  Wie viele Artikel und Angriffe.  Nun, Hasser werden hassen.  Hieraus wurden jedoch wichtige Lehren gezogen. </p><br><h3 id="2017">  2017 </h3><br><p>  Durchbruchjahr.  Ich werde nicht alle Releases des Knotens und die Zunahme der Anzahl der Installationen von Modulen mit npm erwähnen, jedoch überstieg die Anzahl der Dienste auf Node.JS in diesem Jahr 8 Millionen, und die Anzahl der Installationen betrug 3 Milliarden pro Woche.  Absolut kosmische Figuren, die schwer vorstellbar sind. </p><br><p>  Die N-API wurde ebenfalls angezeigt, und Node.JS wurde erneut in Ayo.js aufgeteilt.  Eine sehr lustige und lehrreiche Geschichte über SJW - es ist einen separaten Artikel wert, damit ich nicht weiter darauf eingehen werde - ich empfehle nur, sie in Ruhe zu lesen.  Nur an den Prospoiler, dass die Gabel sicher gestorben ist. </p><br><h3 id="2018">  2018 </h3><br><p>  Die zweite Massenhysterie seit leftpad - jetzt darüber, wie Event-Stream Bitcoins stiehlt.  Hunderte von Beiträgen über die Unsicherheit des Ökosystems.  Fantasy-Posts darüber, wie Npm-Pakete Kreditkarteninformationen stehlen.  Die Gemeinde versprüht Schlamm wie einen Schlauch.  Ich muss sagen, es war sehr nützlich und es wurden auch Schlussfolgerungen gezogen - etwas später. </p><br><p>  Außerdem bläst Ryan plötzlich Community-Posts auf, die darauf hinweisen, dass es sich lohnt, seriöse Dienste auf Go zu schreiben, beschreibt 10 Dinge in Node, die er bedauert, und kündigt Deno an, der alle Probleme löst. </p><br><h3 id="2019">  2019 </h3><br><p>  Deno wechselt zur Vorschau-Version, eine Reihe von Artikeln werden im Hub angezeigt, und jetzt lesen Sie einen davon. </p><br><p><img src="https://habrastorage.org/webt/r2/df/4i/r2df4igff7g0bhkz6a0sl0hq_cs.jpeg"></p><br><h2 id="nazad-v-nastoyaschee">  Zurück in die Gegenwart </h2><br><p>  Ich hoffe, dass nach dieser Tour klarer wurde, welche wunden Stellen das Ökosystem hatte und wie es sich entwickelte - in diesem Kontext ist es viel einfacher zu verstehen, was jetzt passiert. </p><br><h2 id="10-veschey-v-nodejs-o-kotoryh-sozhaleet-rayan-dal">  10 Dinge, die Ryan Dahl an Node.JS bereut </h2><br><p>  Leider habe ich den Artikel mit der Übersetzung des Berichts nicht sofort gefunden, daher werde ich sie hier kurz auflisten und hier kommentieren. </p><br><ol><li>  <strong>Mangelnde Unterstützung für Versprechen zu Beginn der Reise</strong> .  Ja, es wäre einfacher gewesen, wenn Ryan die Versprechen nicht eingehalten hätte, da sie eine zusätzliche Komplikation darstellen, die zu Beginn der Entwicklung des Knotens nicht aufgeht.  Verlorene Zeit für all diese Callback-Hölle ist sicherlich schade - aber im Jahr 2019 haben alle vernünftigen Bibliotheken Versprechen als Hauptschnittstelle.  Darüber hinaus versprechen auch Systembibliotheken endlich etwas. </li><li>  <strong>Sicherheit von Systemanrufen und Netzwerkanrufen.</strong>  Einerseits - ja, es ist gut, wenn alles sicher ist.  Andererseits ist unklar, wie sich der Knoten in dieser Hinsicht als schlechter als jedes andere Medium herausstellte. </li><li>  <strong>Erstellen Sie native Module mit GYP.</strong>  Ja, wahrscheinlich war es überflüssig, aber wer könnte wissen, dass das Chrom sie verlassen würde.  Nochmal - wenn das Chrom weg ist, können wir auch gehen .... </li><li>  <strong>Übermäßige package.json.</strong>  <strong>NPM als Monopolregister.</strong>  Das Argument über package.json ist etwas seltsam.  Zum Beispiel sagt Ryan, dass es dort irgendeinen Müll wie eine Lizenz gibt.  Aber wenn es nicht da wäre, wie könnten Sie schnell die Lizenzen der in Ihrem Projekt verwendeten Module herausfinden? Das Argument über NPM ist eher die Wahrheit, aber wir werden später genauer darauf eingehen. </li><li>  <strong>Knotenmodule.</strong>  <strong>Die komplexe Auflösung von Abhängigkeiten funktioniert nicht wie in einem Browser.</strong>  Ja das stimmt  Stabile Abhängigkeiten begannen sich ohne Wunder nur auf die 4-5-Version von npm zu übertragen.  Aber der Mechanismus funktioniert und Sie können erstaunliche Dinge tun - im Moment ist das in Ordnung.  Was die Kompatibilität mit dem Browser anbelangt, wird es unabhängig von Ihrer Arbeit immer noch Stufen geben, in denen der Code verarbeitet wird, z. B. das Kompilieren und Sammeln von Bundles.  Daher ist es unwahrscheinlich, dass Knotenmodule in diesem Kontext eine Bedeutung haben. </li><li>  <strong>Fordern Sie ohne Erweiterung und deren Unsicherheit</strong> .  Ja, wahrscheinlich schlecht.  Aber nicht genug, um es zu erwähnen ... </li><li>  <strong>index.js als unnötige Komplikation.</strong>  Auch zu trivial und langweilig zu beschreiben. </li></ol><br><p>  Übrigens, wohlgemerkt, ich sagte, dass Ryan 10 Dinge bedauert, aber nur 7 Punkte. Dies ist kein Fehler, ich habe seinen Bericht mehrmals überprüft und die Bewertungen des Berichts.  Entweder war es ein komplizierter Witz über die Verarbeitung von Zahlenwerten, oder Ryan war einfach zu schüchtern, um drei weitere Punkte zu nennen ... </p><br><p>  Aber alles klar, wir haben die Probleme verstanden und sind weitergefahren.  Logischerweise hat Ryan in Deno beschlossen, alle Probleme von Node.JS zu beseitigen.  Mal sehen, was mit ihm passiert ist. </p><br><h2 id="iz-chego-sostoit-deno">  Woraus besteht Deno? </h2><br><ol><li>  Deno ist in Rust geschrieben. </li><li>  Als Event-Loop verwendet Deno Tokio, das erneut in Rust geschrieben wurde. </li><li>  Deno unterstützt ab Werk Typescript. </li><li>  Nun, der Code wird mit demselben V8 ausgeführt, der die ganze Welt erfasst hat. </li></ol><br><p>  Auf den ersten Blick klingt es gut, aber schauen wir uns diese Punkte genauer an. </p><br><p>  <strong>Rust</strong> .  Nein, bitte verstehe mich richtig - ich glaube, dass Rust and Go wunderbare Sprachen sind, und ich bin aufrichtig froh, dass sie es sind.  Sie ermöglichen es, Code auf niedriger Ebene schneller und sicherer als in C ++ zu schreiben.  Es gibt jedoch eine Nuance - im besten Fall ist sie nicht langsamer als die Implementierung in C ++.  Ich persönlich sehe es also nicht als sinnvoll an, eine vollständige Analogie von Systemsträngen und einer Ereignisschleife zu schreiben - es ist unwahrscheinlich, dass dies einen wirklichen Nutzen bringt, da dies Dinge sind, die irgendwann einfach den optimalen Zustand erreichen und tatsächlich nicht weiter optimiert werden. </p><br><p>  <strong>TypeScript</strong>  Wieder - ich habe nichts gegen TS.  Es wird von einer Vielzahl von Unternehmen und Entwicklern eingesetzt und hat sich bereits bewährt.  Aber Deno versteckt nur den Transpiler in der Binärdatei und den transpilierten Code in speziellen Verzeichnissen.  Das heißt, unter der Haube ist alles gleich, und es gibt keinen Vorteil, außer der Ästhetik.  Aber es gibt ein Minus - die Transpiler-Version ist fest an die Deno-Version genagelt.  Ich bin mir nicht sicher, ob dies gut ist. Man kann sich leicht eine Situation vorstellen, in der Sie entweder den Transpiler oder die Laufzeit aktualisieren möchten.  Aber nicht beides gleichzeitig. </p><br><p>  So ist zwar nichts Leckeres zu sehen.  Gehen wir weiter und schauen uns die Hauptfunktionen an. </p><br><h2 id="osnovnye-otlichiya-deno-i-nodejs">  Die Hauptunterschiede zwischen Deno und Node.JS </h2><br><h3 id="deno-ne-ispolzuet-npm-net-centralizovannogo-reestra-moduli-importiruyutsya-po-url-net-packagejson">  Deno verwendet keine npm.  Es gibt keine zentrale Registrierung.  Module werden per URL importiert.  Kein package.json. </h3><br><p>  Das heißt, der Code sieht ungefähr so ​​aus: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { test, runIfMain } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"https://deno.land/std/testing/mod.ts"</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { assertEquals } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"https://deno.land/std/testing/asserts.ts"</span></span>;

test(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">t1</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{
  assertEquals(<span class="hljs-string"><span class="hljs-string">"hello"</span></span>, <span class="hljs-string"><span class="hljs-string">"hello"</span></span>);
});
</code></pre><br>
<p>      ,    .        .  ,       .       :</p><br>
<ol>
<li>      .         ,    ,      . .  ,     :<br>
1.1.  ,      ,      .<br>
1.2.    ,       ,    ,       .<br>
1.3.       ,         .       2012 ,  npm  ,  ?     , " "?</li>
<li> ,  .      github, gitlab,    ,       .   .   .  npm , ,  —   ,     ?       —   .     Entropic, , ,   —    .</li>
</ol><br>
<p>     .    ,     -       (       ) —   …        …    2019? ,    ,   2012   Node.JS   shrinkwrap,   lock file?      ,   ?</p><br>
<p>  ,    URL —     ,    —     .</p><br>
<h3 id="vse-asinhronnye-operacii-v-deno-vozvraschayut-promise">    Deno  Promise.</h3><br>
<p>  , .   2012      —          .        .     -  .</p><br>
<h3 id="deno-vsegda-zavershaet-rabotu-na-uncaught-errors">Deno     Uncaught Errors</h3><br>
<p>      .  Node.JS       .    .</p><br>
<h3 id="ispolzuyutsya-es-modules-a-ne-require"> ES Modules,   require</h3><br>
<p>, ,        .  ,  Node.JS     ES Modules...</p><br>
<h3 id="deno-trebuet-razresheniya-na-rabotu-s-setyu-faylami-i-peremennymi-okruzheniya">Deno      ,    .</h3><br>
<p> !  …  —     allow-read, allow-net, allow-run, allow-env.   - :</p><br>
<pre><code class="bash hljs">deno --allow-read=/etc https://deno.land/std/examples/cat.ts /etc/passwd</code></pre><br>
<p>      :</p><br>
<ol>
<li>        .</li>
<li> ,          --allow-all.</li>
<li>        .      .    ,                ,    .       .   ,     —   .</li>
<li>  .    ,     ,      .      .  ,     2019       2012,      —        ...</li>
</ol><br>
<h2 id="nashe-vremya-nashi-dni-npm"> .  . NPM.</h2><br>
<p><img src="https://habrastorage.org/webt/zk/gz/ei/zkgzeiqxfwe_gxqhgbndrhi3sem.png"></p><br>
<p>      ,    npm  2012 :</p><br>
<ol>
<li>  .      .</li>
<li>Lock file   .</li>
<li>  .    github, snyk   npm.</li>
<li>    .</li>
<li>  .</li>
<li>       — , ,  .</li>
<li>  .</li>
</ol><br>
<p>   npm  … ,         .  ,  ,   …   " ",        — facebook, google, microsoft, gitlab…         ,  npm       .</p><br>
<h2 id="podvodya-itogi"> </h2><br>
<p>  :</p><br>
<ol>
<li>Rust —  .</li>
<li>TypeScript —  .</li>
<li>   URL  NPM —    .</li>
<li>  —  .</li>
<li>  .   .  .  !</li>
</ol><br>
<p><img src="https://habrastorage.org/webt/qw/v8/qc/qwv8qcrwbqujdxridpefbeet4-0.png"></p><br>
<p>         Deno.     " ,  " — ,     ,  Deno   —      .</p><br>
<p>     ,    ,    ,     ,       .    Deno  , ,      Moscow Node.JS Meetup —       .        — ,     -     ?</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de476972/">https://habr.com/ru/post/de476972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de476948/index.html">Quantenbahnen und womit sie essen</a></li>
<li><a href="../de476954/index.html">Arbeit ist kein Wolf, Teil 3. Anfänger - wachsen oder überleben?</a></li>
<li><a href="../de476956/index.html">Winkel ohne zone.js: maximale Leistung</a></li>
<li><a href="../de476958/index.html">Omega Red + PS1 Emulator = Kojima Genius</a></li>
<li><a href="../de476970/index.html">EkbDotNet-Treffen Nr. 1 - Jekaterinburg tritt der DotNet.Ru-Community bei</a></li>
<li><a href="../de476974/index.html">Lernen Sie Responsive Web Design in 5 Minuten</a></li>
<li><a href="../de476976/index.html">6 Redefehler bei Konferenzen</a></li>
<li><a href="../de476980/index.html">Was ist Legal Support? Empfehlungen für einen Anwalt eines IT-Unternehmens</a></li>
<li><a href="../de476982/index.html">Entwickler auf einer Remote-Site - von Grund auf neu zu einem Helden</a></li>
<li><a href="../de476984/index.html">Fallbeispiel von Narcade: Türkische Entwickler sprechen über die Lokalisierung mobiler Spiele und den türkischen Spielemarkt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>