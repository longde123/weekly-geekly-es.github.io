<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏾‍⚕️ 👩🏽‍🌾 👉 Was Sie lernen können, wenn Sie einen Audio-Player für verschiedene Browser entwickeln 🏂🏾 🦓 🔴</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Diese Geschichte begann vor ungefähr 1,5 Jahren. Es ist mit dem Abspielen von Musik in verschiedenen Browsern und Plattformen verbunden, auf denen sie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was Sie lernen können, wenn Sie einen Audio-Player für verschiedene Browser entwickeln</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438952/">  Diese Geschichte begann vor ungefähr 1,5 Jahren.  Es ist mit dem Abspielen von Musik in verschiedenen Browsern und Plattformen verbunden, auf denen sie ausgeführt werden.  Ein Weg voller <s>„Schmerz und Leid“ der</s> Erkenntnis, dass eine einfache Aufgabe auf den ersten Blick möglicherweise nicht so einfach ist, und „unbedeutende“ Details, denen Sie am Anfang keine Bedeutung beimessen, können alles beeinflussen. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Kleinere Details für die Neugierigsten :)</b> <div class="spoiler_text"> 1. Herunterladen von Daten zu jedem nächsten Titel aus dem Netzwerk. <br>  2. Für jedes Audioelement: new Audio () oder &lt;audio&gt; benötigen Sie die Erlaubnis des Benutzers - eine Benutzeraktion auf der Seite. <br></div></div><br><h3>  Hintergrund </h3><br>  Wahrscheinlich ist jeder, der mindestens einmal in seinem Leben einen Audio-Player für Browser geschrieben hat, auf das Problem der browserübergreifenden Kompatibilität und plattformübergreifenden Probleme gestoßen. <br><br>  Während ich an dem neuen MVP arbeitete, stieß ich auf verschiedene Funktionen zur Wiedergabe von Audio in Browsern. <br><br>  Und alles begann mit der Tatsache, dass es notwendig war, während der Wiedergabe zwei Spuren gleichmäßig zu überblenden - dies ist das erste Feature.  Unser Team wollte die Titel wie im Radio wechseln.  Und die zweite Funktion - jede nachfolgende Spur wird vom Netzwerk angefordert. <br><br><img src="https://habrastorage.org/webt/7h/o6/4h/7ho64hihtgz3atuttk1vm0mucpq.png"><br><br><h3>  Forschungen </h3><br>  Dann verwendeten fast alle unsere Projekte die Sound Manager 2-Bibliothek. <br><br>  Fast sofort stellen Sie fest, dass das gleichzeitige Abspielen von zwei Audiodateien auf Mobilgeräten nicht überall gleich funktioniert! <br><br>  In Chrome (~ 62 Version) für PC wurden Titel so abgespielt, wie sie sollten.  Auf Mobilgeräten (auch in Chrome) funktionierte die Titelwiedergabe, jedoch nur bei aktivem Bildschirm.  Wenn der Bildschirm gesperrt war, wurde der nächste Titel nach dem aktuellen Player nicht abgespielt.  Wie bei iOS / macOS funktionierte die Wiedergabe auf ähnliche Weise.  Weitere Informationen erhalten Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> - Abschnitt „Single Audio Stream“. <br><br>  Also ging <s>ich über drei Meere und</s> suchte Stück für Stück nach Informationen über die Funktionen von Browsern mit Audio. <br><br>  Ok, ich versuche eine Lösung mit Web Audio, ohne Bibliotheken zu verwenden.  Ja, diese Technologie ist für andere Zwecke gedacht: Synthese, Tonverarbeitung, für Spiele usw., anstatt nur Titel abzuspielen.  Für das Experiment war es jedoch notwendig, es zu versuchen, da Sie damit Sounds aus verschiedenen Quellen in einem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Audioausgang zusammensetzen können</a> - Lautsprecher / Kopfhörer / Telefonlautsprecher / usw.  Es gibt Leute, die gezielt nach <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">den</a> Möglichkeiten suchen, Sound auf Mobilgeräten mithilfe der Web-Audio-API abzuspielen. <br><br>  Nach der Implementierung wurden bestimmte Nuancen deutlich. <br><br>  Zunächst müssen Sie warten, bis der gesamte Track vollständig geladen ist.  Bei einer langsamen Internetverbindung machen sich Pausen bemerkbar, da der zweite Titel möglicherweise bis zum Ende des ersten Titels keine Zeit zum Laden hat.  Ein vollständiger Download kann vermieden werden, indem eine Reihe von HTML5-Audio-Tags verwendet werden, die als Tonquellen für Web-Audio dienen. In diesem Fall ist es jedoch wieder unmöglich, zwei Sounds gleichzeitig abzuspielen. <br><br>  Zweitens, wenn Sie einen Track in Fragmenten über das Netzwerk herunterladen und programmgesteuert dekodieren, erhöht dies die Belastung der CPU.  Dies war für einen PC akzeptabel, für mobile Geräte jedoch von entscheidender Bedeutung. <br><br>  Drittens gab es Probleme bei der Dekodierung.  Wenn Fragmente von mp3 / ogg / wav-Dateien zum Client kamen, wurden diese Stücke leise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dekodiert</a> und abgespielt.  Wenn jedoch Teile der mp4-Datei, die als Container für HE-AAC fungierte, in den Browser kamen, konnten sie nicht dekodiert werden.  Dies gilt in gewissem Umfang auch für den Opera-Browser, in dem die Wiedergabe von MP3-Dateien von Version zu Version instabil ist - sie wird manchmal reproduziert und es wird der Fehler angezeigt, dass dieses Format nicht unterstützt wird. <br><br>  Viertens wurde der Name des Titels auf dem gesperrten Bildschirm auf einer Platte mit einem nativen Audioplayer (auf dem iPad) nicht angezeigt / nicht geändert.  beim Umschalten zwischen Spuren.  Vielleicht aufgrund der Tatsache, dass die Tests das iPad mit Version 9 von iOS verwendeten - es gab zu diesem Zeitpunkt kein anderes. <br><br>  Infolgedessen musste Web Audio zu diesem Zeitpunkt aufgegeben werden.  Trotzdem ist Crossfade nichts für Browser, Standard-Musikkompositionen in guter Qualität wiegen ziemlich viel. <br><br>  Da wir das Überblenden ablehnen, implementieren wir ein einfaches Ein- und Ausblenden am Anfang bzw. am Ende des Musiktitels. <br><br>  Der Code im vorletzten Jahr wurde leicht modifiziert und getestet.  Als Ergebnis der Tests tauchten verschiedene Nuancen auf (in der Tabelle gezeigt).  All dies mithilfe der Sound Manager 2-Bibliothek. <br><br><img src="https://habrastorage.org/webt/b5/bj/wg/b5bjwgh2mds3pn1x8ghbp3nuyue.png"><br><br>  Wir fügen die Protokollierung aller Ereignisse hinzu, um den Moment des Übergangs zwischen den Titeln zu bestimmen und um zu verstehen, an welchem ​​Punkt sie aufhören zu spielen. <br><br><img src="https://habrastorage.org/webt/z_/nr/0g/z_nr0g8j0zxskeevs2e3loddlok.png"><br><br><div class="spoiler">  <b class="spoiler_title">Tab-Aktivierung</b> <div class="spoiler_text">  In Safari 9+ wird der Sound nicht immer angezeigt, wenn die Registerkarte aktiviert ist. <br></div></div><br>  Hieraus kann angenommen werden, dass die Ausführung von JS im Hintergrund gedrosselt wird oder dass der Ausführungsthread vollständig stoppt (Ereignisse und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Timer</a> ).  Später wird jedoch klar, dass dies teilweise eine korrekte Schlussfolgerung war.  Im Folgenden werden wir eine weitere Nuance betrachten, die mit dem Abspielen von Titeln verbunden ist, und verstehen, warum kein Ton angezeigt wird. <br><br><div class="spoiler">  <b class="spoiler_title">Bemerkung</b> <div class="spoiler_text">  Um mit dem Fortschritt (Fortschrittsbalken) zu arbeiten und ihn beispielsweise für einen Track zu rendern, empfiehlt es sich, requestAnimationFrame anstelle von setInterval / setTimeout zu verwenden.  Sie können den kumulativen Effekt vermeiden, wenn Sie die Registerkarte deaktivieren (Registerkarte Hintergrund) und dann aktivieren und vorübergehend einfrieren, was mit allen Berechnungen und dem erneuten Zeichnen des Fortschrittsstatus verbunden ist. <br></div></div><br>  Gleichzeitig stellte sich die Frage: Was ist mit der automatischen Wiedergabe von Titeln auf einem PC und auf Mobilgeräten? <br><blockquote>  Autoplay bezieht sich auf den automatischen Start der Wiedergabe eines Titels ohne Benutzeraktion beim Laden einer Seite. <br></blockquote>  Was Safari im Hinblick auf die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">automatische Wiedergabe</a> beim <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Laden</a> der Seite betrifft, ist dies nicht möglich. Sie benötigen eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Benutzerinteraktion</a> mit der Seite, wie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mobilgeräten</a> .  Dies gilt sowohl für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Videoinhalte</a> als auch für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Audioinhalte</a> . <br><br>  Zu dieser Zeit gab es also Folgendes: <br><br><ol><li>  Es ist unmöglich (nicht wünschenswert), zwei oder mehr Töne gleichzeitig wiederzugeben. </li><li>  Für das Pseudo-Auto-Play des Tracks ist eine Benutzerberechtigung erforderlich - die erste Interaktion, später wurde sie als "Finger an das Gerät verkaufen" bezeichnet. </li><li>  im Hintergrund (Hintergrundregisterkarte / Sperrbildschirm) JS (alles hängt vom Browser ab): <br>  entweder friert vollständig ein; <br>  entweder Drosselung; <br>  beides funktioniert genauso wie mit der aktiven Registerkarte; <br></li><li>  Sie können die Wiedergabe automatisch ohne Ton starten, aber es ist nicht klar, warum (für Audioinhalte)? </li><li>  Irgendwo in der Ferne taucht der Gedanke auf, aber wie kann man JS dazu bringen, weiterhin im Hintergrund zu arbeiten? </li></ol><br>  Andere Bibliotheken, die die Funktionen des Players implementierten, gingen davon aus, dass es möglicherweise eine Lösung für dieses Problem gibt.  Trotz der Tatsache, dass auf GitHub viele Probleme mit einer Beschreibung der Probleme beim Abspielen von Titeln in verschiedenen Browsern beobachtet wurden, bestand immer noch die Hoffnung, dass Sie auf den Grund gehen würden: Warum funktioniert es nicht und wie funktioniert es?  Wie sich herausstellte, nein ... <br><br>  Einige Codebeispiele mit Videodemonstration der Arbeit von Bibliotheken: <br><br><ol><li>  Sound Manager 2 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Seiten</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Repository</a> , Video: <a href="">macOS Safari 12</a> ;  <a href="">iOS Safari 10</a> mit entsperrtem Bildschirm </li><li>  Heuler <br>  Howler v2.0.9 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Seiten</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Repository</a> , Video: <a href="">macOS Safari 12</a> , <a href="">iOS Safari 10</a> <br>  Howler v2.0.15 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Seiten</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Repository</a> , Video: <a href="">macOS Safari 12</a> <br>  Howler v2.1.1 - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Seiten</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Repository</a> , Video: <a href="">macOS Safari 12</a> , <a href="">iOS Safari 10</a> <br></li></ol><br><blockquote>  Unter macOS wurde die Videoaufnahme ohne Ton erstellt. Sie müssen sich daher die Lautstärkeanzeige ansehen - das Bild des Lautsprechers auf der Registerkarte. <br><br>  Weitere Beispielvideos finden Sie im Repository. <br><br>  Im interaktiven Beispiel für Howler v2.1.1 - manchmal können Sie mehrere Sounds gleichzeitig hören. Dies ist auf das Hinzufügen eines Pools von Audioelementen zurückzuführen, die vom Benutzer entsperrt wurden (dies sollte in zukünftigen Versionen der Bibliothek behoben werden). <br></blockquote>  Was ist der Grund für die Inoperabilität dieser Bibliotheken? <br><br>  Ich habe oben geschrieben: <i>"Im Hintergrund (Registerkarte" Hintergrund ") friert JS entweder vollständig ein oder wird gedrosselt</i> . <i>"</i>  Hier taucht also ein weiterer Punkt auf: Bibliotheken im Code verwenden die Erstellung neuer Audioobjekte über new Audio ().  Wenn sie dynamisch erzeugt werden, d.h.  Wenn ein vorhandenes Audioobjekt nicht verwendet wird und der Benutzer in keiner Weise mit der Site interagiert, die Registerkarte inaktiv ist oder der Bildschirm gesperrt ist, können einige Browser der Ansicht sein, dass der Ton dieses Audioelements erst abgespielt werden sollte, wenn die Registerkarte wieder aktiv ist oder der Benutzer dies nicht tut jede Aktion. <br><br>  Ein Beispieltest auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Seiten</a> und im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Repository auf Github</a> mit neuem Audio ().  Video: <a href="">macOS Safari 12</a> ;  <a href="">iOS Safari 10</a> mit entsperrtem Bildschirm. <br><br>  <b>Es scheint, dass es kein universelles Werkzeug gibt und es notwendig ist, nach einer anderen Kompromisslösung zu suchen.</b> <br><br>  Dann setzen wir uns mit den Jungs aus dem Team zusammen, um zu diskutieren, und was ist wirklich wichtig für die Arbeit des Audio-Players?  Denn es wäre möglich, die Experimente unendlich fortzusetzen, aber wir müssen vorwärts gehen. <br><br>  Zunächst wurden wichtige Punkte identifiziert, die das Erreichen des gewünschten Ergebnisses verhinderten: <br><br><ol><li>  Safari unter macOS spielt keine Titel ab, wenn die Registerkarte inaktiv ist. </li><li>  Auf Smartphones mit iOS und Android gibt es keine Möglichkeit, Musik im Hintergrund zu hören (wenn der Bildschirm gesperrt ist). Ich möchte eine aggressive Umleitung von Benutzern zu einer mobilen Anwendung (in Zukunft) vermeiden, da frühere Erfahrungen zeigen, dass ein großer Teil der Benutzer keine mobile Anwendung installieren möchte ;; </li><li>  Der Player arbeitet nicht korrekt mit einer dynamischen Wiedergabeliste, d. h.  wenn nicht im Voraus bekannt ist, was der nächste Track sein wird. </li></ol><br>  Darüber hinaus konnten die zur Erreichung der Ziele erforderlichen Ziele formuliert werden: <br><br><ol><li>  Stellen Sie den Player im Hintergrund bereit - in verschiedenen Browsern und auf verschiedenen Plattformen. </li><li>  Ermöglichen Sie dem Benutzer die Auswahl der zu verwendenden Elemente: Hören Sie Musik auf der Website oder in der mobilen Anwendung. </li><li>  bieten die Möglichkeit, den Player (oder Ansatz) in verschiedenen zukünftigen Projekten zu verwenden. </li></ol><br>  Eine neue Phase bei der Suche nach einer Lösung für das Problem hat begonnen.  Zu diesem Zeitpunkt wurden verschiedene Bibliotheken nicht mehr verwendet, alle Studien wurden mit HTML5 Audio durchgeführt.  Das Ergebnis war, dass eine Option mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">engagierten Mitarbeitern gefunden wurde</a> .  iOS ließ diese Entscheidung nicht wieder gewinnen - die Wiedergabe im Hintergrund funktioniert nicht, aber es stellte sich heraus, dass sie in Android (Chrome, Opera, Safari) funktioniert. <br><br>  HTML5 Audio + Dedicated Workers- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Testbeispiel auf Github-Seiten</a> und im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Repository</a> . <br><br>  Wenn der Worker initialisiert wird, werden Daten zum aktuellen Track angefordert.  Der Mitarbeiter sendet außerdem ein Signal, um den Fortschrittsstatus - wie lange der Titel abgespielt wird - vom Hauptstrom abzurufen, und entscheidet anhand dieser Daten, wann Daten über den nächsten Titel vom Netzwerk angefordert werden sollen. <br><br><img src="https://habrastorage.org/webt/ln/t0/sh/lnt0shcslejecuvcenkh-rlv28y.png"><br><br>  Zu diesem Zeitpunkt wurde auch das folgende Beispiel getestet ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-Seiten</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Github-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Repository</a> ), wenn das HTML5-Audio-Tag in das DOM eingebettet ist (Video: <a href="">macOS Safari 12</a> , <a href="">iOS Safari 10</a> ) und SRC beim Wechseln zwischen Spuren einfach ersetzt.  Bisher funktioniert dieses Beispiel unter macOS in 12 Safari.  Leider gibt es derzeit keine Möglichkeit, die Funktionalität dieses Beispiels unter macOS in Safari 10 und 11 zu testen, aber zu diesem Zeitpunkt funktionierte dieses Beispiel während der Tests nicht ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Richtlinien für die</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">automatische</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wiedergabe</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einschränkungen für die</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">automatische</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wiedergabe</a> ). <br><br>  Zusammenfassend betrachtet der Safari-Browser für iOS und macOS keine neue Instanz des Audioelements, die vom Benutzer aktiviert werden soll, wenn es im Hintergrund eines Ereignisses erstellt wurde, z. B. ajax, setTimeout, onended. <br><br>  In Bezug auf die Wiedergabe von Titeln in iOS Safari und iOS Chrome wurde außerdem festgestellt, dass Titel im Hintergrund (wenn der Bildschirm gesperrt ist) nur mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HLS abgespielt werden können</a> .  Für iOS- und MacOS-Plattformen ist dieses Format Standard und die Übertragung wird vom Betriebssystem unterstützt.  Für Android Chrome und Edge ist auch eine native Implementierung verfügbar.  Und für PCs in Chrome können Sie Software-Handler verwenden, z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hls.js</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bitmovin Player</a> usw. <br><br>  Ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link zum Github-Repository</a> bietet ein Beispiel für Code, der den einfachsten Anwendungsfall abdeckt - einfach den auf dem Server generierten Stream abspielen, ohne zurückspulen, zum nächsten Titel wechseln usw.  Beispiele werden vorgestellt mit: dem Audio-Tag, dem Video-Tag, der hls.js-Bibliothek und dem Player von Bitmovin.  Dieser Inhalt erfordert Node.js. <br><br><h3>  Schlussfolgerungen </h3><br>  Der erste Punkt ist leider, dass es aufgrund der Vielfalt der Browser keine universelle Lösung gibt, die es ermöglicht, Musik in Browsern überall gleich gut zu hören.  Überall gibt es Einschränkungen und wie die Praxis zeigt, können Sie ganz bequem damit leben. <br><br>  Der zweite Punkt: Manchmal lohnt es sich, Grenzfälle so schnell wie möglich zu überprüfen, z. B. eine native Implementierung.  Finden Sie eine Art minimal akzeptabler Anforderungen und überprüfen Sie schnell deren Leistung, anstatt eine Bibliothek als Grundlage zu verwenden.  Dadurch erhalten Sie ein besseres Verständnis dafür, wie diese Bibliotheken intern angeordnet sind und warum bestimmte Funktionen funktionieren oder nicht.  Andernfalls können Sie im Projekt ziemlich weit laufen und nachdem Sie festgestellt haben, dass etwas schief geht.  Und es kann sich herausstellen, dass das Verlassen der Bibliothek ziemlich teuer sein wird.  Ein wesentlicher Teil des Codes muss neu geschrieben werden. <br><br>  Der dritte Punkt: Achten Sie unbedingt auf die Zielgruppe Ihres Dienstes - von welchen Browsern und Betriebssystemen Ihre Benutzer stammen.  Dies ist mit verschiedenen Metriken und Fehlerüberwachungssystemen relativ einfach zu verfolgen.  Ein solcher Ansatz hilft zu verstehen, welche Plattformen und Browser unterstützt werden müssen und welche ohne Aufwand verwendet werden können. <br><br><h4>  Und schließlich </h4><br>  Ich kündige einen kleinen Wettbewerb zum Abspielen von Musik auf iOS mit HLS-Technologie an. <br><br>  Die Beschreibung finden Sie unter dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Link auf Github</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de438952/">https://habr.com/ru/post/de438952/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de438940/index.html">Offener Kurs „Deep Learning an den Fingern“</a></li>
<li><a href="../de438942/index.html">2D-Schatten auf signierten Distanzfeldern</a></li>
<li><a href="../de438946/index.html">DateTimeOffset (streng)</a></li>
<li><a href="../de438948/index.html">Warum brauchen wir eine Optimierung auf niedriger Ebene für Elbrus oder wie können wir das Erkennungssystem eineinhalb Mal beschleunigen?</a></li>
<li><a href="../de438950/index.html">Die Zentralbank startete einen Roboter, um im Internet nach Verdienstmöglichkeiten zu suchen</a></li>
<li><a href="../de438954/index.html">Vorzeichenbehaftete Distanzfelder in 2D kombinieren</a></li>
<li><a href="../de438956/index.html">Magnetitis in den Zähnen: Sequenzierung der Transkriptome des Gewebes der Muschel-Mollusken-Radula</a></li>
<li><a href="../de438958/index.html">ILV bestätigte die Existenz seiner "Raumstation"</a></li>
<li><a href="../de438960/index.html">Wie ich Ruby zugunsten von Python aufgegeben habe, als ich an einem Backend gearbeitet habe</a></li>
<li><a href="../de438962/index.html">Zum größten Teil ein positiver Ausblick für die Zukunft der Chips</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>