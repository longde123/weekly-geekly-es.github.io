<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>↩️ 🎛️ 🌽 基于QLC的SSD-硬盘杀手?？ 不是真的 🙍🏼 🍮 🍤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SSD驱动器早已不再属于昂贵且不可靠的奇异驱动器类别，并且已成为从预算办公室“打字机”到功能强大的服务器的各种级别计算机的熟悉组件。 

 在本文中，我们想谈谈SSD发展的一个新阶段-NAND中数据记录级别的下一个增长：大约每个具有4位的四级单元，即QLC （四级单元）。 使用这种技术制成的存储设备...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>基于QLC的SSD-硬盘杀手?？ 不是真的</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kingston_technology/blog/439568/">  SSD驱动器早已不再属于昂贵且不可靠的奇异驱动器类别，并且已成为从预算办公室“打字机”到功能强大的服务器的各种级别计算机的熟悉组件。 <br><br> 在本文中，我们想谈谈SSD发展的一个新阶段-NAND中数据记录级别的下一个增长：大约<b>每个</b>具有4位的四级单元，即<b>QLC</b> （四级单元）。 使用这种技术制成的存储设备具有更高的记录密度，从而简化了其体积的增加，并且其成本低于具有“传统” MLC和TLC单元的SSD。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9cc/f29/f4e/9ccf29f4ee03229c10f386bb40eb2ae7.png"><br><br> 不出所料，在开发过程中，有必要解决与过渡到新技术有关的许多问题。 大型公司成功地应对了这些挑战，而中国的小型公司仍然落后，其驱动力虽然技术含量较低，但价格却更低。 <br><br> 这是如何发生的，是否出现了新的“ HDD杀手”，以及是否有必要进行存储，将前几代的所有HDD和SSD更换为新的-我们将在下面说明。 <br><a name="habracut"></a><br> 在存储设备的发展过程中，存储信息的方式发生了变化，制造过程变得越来越细腻，并且单个单元和芯片上的记录密度增加了。 控制器改进了算法，写入速度接近读取速度，然后开始迅速增长。 如今，对NAND存储单元的呼叫分配的统一性已达到一定的最佳水平，信息存储的可靠性已增长了很多倍，几乎与传统HDD相当。 在技​​术飞速发展的过程中，SSD开始以各种形式发行。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3bb/3c3/c7a/3bb3c3c7ae95a017585553f5aaeed4bc.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/9dd/97c/9eb/9dd97c9eba4ce30738895a3a10e503fd.png"><br><br> 现在市场上，来自众多公司的驱动器可供选择，既有A品牌的第一梯队，也有试图为每个人提供足够SSD的中国公司提供的驱动器。 <br><br><h2>  QLC技术为我们提供了什么？ </h2><br> 单个NAND单元中记录的位数取决于浮栅晶体管中的电荷量。 数量越多，单个晶体管可以存储的位数就越多。 这是<b>QLC技术与“先前” TLC之间</b>的<b>主要区别-一个单元中的位数已从三增加到四</b> 。 <br><br> 随着充电量数量的增加，驱动器的特性发生了很大变化：访问速度降低，信息存储的可靠性降低，但是容量增加，并且价格/体积比对客户更具吸引力。 因此，基于QLC技术的芯片比上一代TLC便宜，后者在一个单元中存储3位。 同时，QLC的可靠性较差，因为每个新级别的电池失效的可能性都大大增加。 <br><br> 除了单个细胞的复杂性之外，还会出现其他情况。 由于存储芯片是使用3D NAND技术制成的，因此它们是单元的三维阵列，彼此密密麻麻地堆积在一起，相邻“层”中的单元相互影响，破坏了其相邻节点的生命。 此外，现代芯片比前几代产品包含更多的层。 例如，一种用于增加存储密度的技术意味着将晶体中的层数从48个增加到64个。在另一种技术的框架中，两个“ 48层晶体”被“焊接”，总数达到96个，这对该晶体边界的对准提出了很高的要求。三明治”，失败的点更多，婚姻的份额也在增长。 尽管该过程很复杂，但与尝试在一个晶体中生长层相比，这种技术的利润更高，这是因为随着层数的增加，拒绝率呈非线性增加，而合适芯片的低产量将花费太多。 公平地说，应该指出，只有顶级公司才能负担得起此类发展。 一些中国芯片制造商尚未转换为64层晶体，到目前为止，只有英特尔和美光等电子巨头才拥有“粘合”两个48层晶体的技术。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d1/f37/7df/8d1f377df15695eebe3d2c5b0ad60a7c.png"><br>  <i>3D NAND</i> <br><br> 新一代A品牌驱动器中使用的另一个新颖性是将控制权和供应约束转移到一系列单元上。 因此，晶体的面积减小了，并且有可能将四个存储体放置在以前仅两个存储体的位置。 从而使查询并行化并提高处理内存的速度成为可能。 另外，晶体的较小面积允许增加存储容量。 <br><br> 增加的单元密度还有助于抵抗更快的内存降级。 我们借助单元阵列更大的冗余度来“正面”处理此任务。 <br><br> 去年夏天展示了QLC芯片的原型，并在今年初做出了使用新技术发布SSD的最初承诺。 在夏季，几乎所有生产驱动器的公司都表示已准备好进行批量生产，并表达了新型号的名称，价格和规格。 现在，您可以购买带有QLC芯片的SSD。 大多数型号都具有M.2和2.5“尺寸，容量分别为512 GB，1 TB和2 TB。 <br><br><h2>  QLC存放位置 </h2><br> 首先，可以公平地承认使用新的QLC技术创建的驱动器绝对不适合进行严重/关键的任务。 造成这种情况的原因是大型公司的工程师（发明家和中国“追随者”）必须解决的许多技术难题。 <br><br> 例如，在英特尔网站上，仅针对家用计算机的中档市场提供了新的SSD。 特别是在低性能上网本中使用它们是合理的，其上网本的任务不包括游戏或使用数据库，相反，成本非常重要。 这种“打字机”的需求越来越大。 为了在企业级市场上工作，仅提供带有MLC和TLC芯片的驱动器。 <br><br> 如果我们比较品牌固态硬盘的特征（廉价的中国固态硬盘没有意义，廉价的控制器会扼杀所有特征），那么QLC驱动器的平均价格要比MLC低约20-30％，而且尺寸和体积都相同。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/02f/79d/57e/02f79d57e5a3ed35017b9290ab53e90b.png" width="400"></div><br><br>  <b>访问速度</b> 。 对于具有QLC芯片的型号，它是：读取速度最高1500 Mb / s，写入速度最高1000 Mb / s。 对于TLC芯片上的模型-分别为3210 Mb / s和1625 Mb / s。  QLC驱动器的写入速度降低了一半半，而读取速度则降低了两倍。 差异是巨大的，但是对于浏览互联网和编辑文本来说，绰绰有余。 <br><br>  <b>TBW（写入的总字节数）</b> 。 表征SSD资源的关键参数。 他谈到了可以写入驱动器的最大TB数。  TBW越高，驱动器越坚韧，并且可以正常工作的时间越长。 对于760p系列的所有型号，资源为288 TBW，而对于660p系列，资源仅为100 TBW。 相差近三倍。 <br><br>  <b>DWPD（每天的驱动器写入量）</b> 。 此可靠性指标指示每天可以覆盖整个驱动器多少次，并通过以下公式计算得出： <br><br> <code>DWPD = TBW / 0,512 * 365 * 5</code> <br> <br> 其中0,512是驱动器的容量（以TB为单位）； <br>  365-一年中的天数； <br>  5-保修期限。 <br><br>  DWPD更加客观，因为计算考虑了制造商同意免费解决驱动器问题的时间。 对于QLC模型，DWPD为0.1；对于TLC模型，DWPD为0.32。 换句话说，在此示例中，QLC每天可以完全覆盖50 GB-这是其正常的操作模式。 考虑到价格相同，QLC驱动器的容量要高于MLC，“带互联网打字机”的普通用户不太可能设法开发这种资源。 <br><br> 这两个设备是工程师如何解决许多技术难题的生动示例，在QLC中，这些技术难题比在TLC中显得明亮。 尤其是，QLC具有较低的读写访问速度，较低的资源，较高的WAF系数（下面将对此进行详细介绍）。 让我们仔细看看主要的困难和解决方法。 <br><br><h2> 存取速度 </h2><br> 让我们从QLC SSD最引人注目的功能之一开始， <b>即为</b>用户提供<b>较低的驱动器缓存速度（当驱动器的缓存已满时）</b> 。 由于QLC的访问速度已经相对较低，因此制造商正尝试通过缓存来提高访问速度。  SSD为此使用了自己的磁盘单元阵列，将其转移到单位操作模式-SLC。 <br><br> 有几种缓存算法。 通常，驱动器本身的一小部分容量会分配给缓存-平均从2 GB到16 GB，在某些型号中可能高达数十GB。 这种方法的缺点是，如果在计算机操作过程中进行大量数据交换，则少量的高速缓存会迅速填满，并且读/写速度将急剧下降。 <br><br> 更多的技术公司使用先进的控制器，这些控制器可以将部分单元动态转移到SLC快速模式，在这种情况下，缓存大小取决于总驱动器容量，并且可以达到10％。 在现代SSD中，两种方法都可以使用：相对少量的静态高速缓存由动态分配的卷补充，后者的容量要大很多倍。 可用空间越多，缓存大小就越大，耗尽其大小就越困难。 从逻辑上讲，较大的驱动器具有较大的缓存，这意味着其中的动态缓存将更有效地工作。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9b5/9e6/174/9b59e6174bd128d4a4f2879d5fac0f6e.png"><br>  <i>SLC高速缓存的大小与驱动器的大小以及驱动器上的可用空间有明显的依赖关系。</i> <br><br><h2> 读取错误 </h2><br> 与TLC相比，QLC体系结构的复杂性不断提高，导致数据读取错误的数量增加。 为了纠正它们，需要强制使用<b>ECC（纠错码，纠错码）算法</b> 。 在他们的帮助下，控制器可以独立纠正几乎所有的数据读取错误。 开发有效的校正算法是创建QLC驱动器时最困难的任务之一，因为不仅必须确保较高的校正效率（以每1 Kb数据表示的校正位数表示），而且还需要使用尽可能少的存储单元来节省其资源。 。 为此，制造商推出了更具生产力的控制器，但最重要的是，他们使用功能强大的科学和统计设备来创建和改进算法。 <br><br><h2> 资源资源 </h2><br>  QLC体系结构的特征不仅降低了可靠性，而且还导致了<b>“写放大”</b>现象<b>（写放大，WA）</b> 。 虽然说“记录倍增”会更正确，但是，迄今为止，在Runet中更常使用<b>“放大”</b>选项。 <br><br> 什么是WA？ 在物理上具有单元的SSD中，读/写操作比直接从操作系统接收的数据量所需的更多。 与传统的HDD具有很小的“量子”可重写数据量不同，SSD上的数据存储在相当大的“页面”中，通常每个页面4 KB。 还有“块”的概念-可以重写的最小页面数。 通常，一个块包含128到512页。 <br><br> 例如，SSD中的重写周期包含以下几种操作： <br><br><ol><li> 将页面从已擦除的块移动到临时存储位置， </li><li> 清除块所占据的空间， </li><li> 通过添加新页面来重写临时块， </li><li> 将更新的块写入旧位置， </li><li> 清洁用于临时存放的地方。 </li></ol><br> 如您所见，即使操作系统只想更改几个字节，此操作也会重复读取和擦除驱动器几个不同区域中的大量数据。 这严重增加了电池的磨损。 另外，“额外”的读/写操作大大降低了闪存的吞吐量。 <br><br>  “写入放大”的程度由WAF（写入放大系数）表示： <b>实际</b>可重写数据量与<b>需要</b>重写的数据量之比。 理想情况下，当不使用压缩时，WAF为1。实际值很大程度上取决于各种因素，例如，可重写块的大小以及控制器中使用的算法。 <br><br> 而且由于QLC单元对重写周期的数量更加敏感，因此WAF的大小已变得比TLC和MLC更为重要。 <br><br> 还有哪些其他因素会对QLC驱动器中的WAF产生负面影响？ <br><br><ul><li>  <b>垃圾收集算法</b> ，该<b>算法</b>搜索同时包含空白页和空白页的不均匀填充的块，并覆盖它们，以使这些块仅包含空白页或仅填充的页，这进一步减少了导致WA的操作数量。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c48/027/930/c48027930bbd3403af622dfa2c469e49.png"></li><li>  <b>磨损平衡</b> 。 系统经常访问的块定期移至单元，而不是需求量较小的块。 这是为了确保驱动器中的所有存储单元均匀磨损。 但是结果是，即使将其用作存档存储，该驱动器的总资源也会逐渐减少。 <br><br> 由于损耗平衡和垃圾回收机制，这是“写入增强”的示例： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/785/c3f/140/785c3f140f44ba1956b8f12ea03fceb8.png"></li><li>  WAF值还受纠错机制（ECC）的操作影响。 如前所述，可以通过改进包括<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">LDPC</a>在内的算法来减少其对“记录乘法”的贡献。 </li><li> 在SSD上有足够的可用空间时，某些控制器可以将某些NAND单元置于具有较少记录级别的模式：从QLC到SLC。 这大大加快了驱动器的运行速度，并提高了其可靠性。 但是，随着可用空间的减少，单元将再次以具有最大级别数的模式覆盖。 如果SSD的控制器非常先进并支持此功能，则SSD上的可用空间越多，它的工作速度就会越快且效率越高。 如果将最活跃使用的电池的一部分保留在SLC模式下，则会增加总的WAF，但会减少磨损。 </li></ul><br> 随着WAF的增长，使用各种方法来争夺QLC。 <br><br> 例如，使用超额配置（OP）-为业务分配需要一部分用户不可用的卷。 <br><br> <code>OP = (  —   ) /   </code> <br> <br> 分配的区域越大，控制器拥有的自由度就越高，其算法运行得越快。 例如，较早之前，在OP下，区分了“实际”和“营销”千兆字节之间的差异，即10 <sup>9</sup> = 1 000 000 000字节与2 <sup>30</sup> = 1 073 741 824字节之间，等于驱动器总容量的7.37％。 分配办公空间还有许多其他技巧。 例如，现代控制器允许您在OP下动态使用驱动器的全部当前可用空间。 <br><br>  WAF对OP大小的近似依赖： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c02/046/8e0/c020468e0b277805e50822448cc33e44.png"><br><br> 减少WAF以及静态和动态数据分离算法。 控制器计算哪些数据经常被覆盖，哪些数据主要被读取，或者根本不被更改，并相应地对磁盘上的数据块进行分组。 <br><br> 减少QLC驱动器中WAF的其他工具包括顺序记录技术（可以将其与通常的HDD碎片整理进行比较）。 该算法确定可能属于一个大文件且不需要垃圾收集器处理的块。 如果操作系统发出删除或修改该文件的命令，则其块将整体上被擦除或覆盖，而不会包含在WA周期中，这将提高速度并减少内存单元的消耗。 最后，预写数据压缩和重复数据删除有助于对抗WA。 <br><br> 如您所知，QLC驱动器的可靠性和资源不仅取决于所使用的存储芯片，还取决于控制器的性能，最重要的是，取决于控制器中嵌入的各种算法的发展。 许多公司，甚至大型公司，都从其他专门购买它们的公司购买控制器。 中国的小型公司使用前几代价格便宜且简单的控制器，而不是由算法的质量和新颖性决定，而是由价格决定。 大型公司没有为他们的SSD节省硬件，而是选择了可以延长驱动器寿命和加快运行速度的控制器。  SSD控制器制造商中的领导者正在不断变化。 但是，除了复杂的控制器之外，固件算法还扮演着重要的角色，大型制造商独立开发固件算法，而不是将这一重要问题交给第三方公司。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/40d/570/521/40d5705214ff5f77a5f07b22d9ade44a.png"><br><br><h2> 结论 </h2><br> 与TLC和MLC芯片上的驱动器相比，QLC的主要优势在于它设法将更多的内存放入同一物理卷中。 因此，QLC不会淘汰市场上的先前技术，更不用说HDD的竞争对手了。 <br><br> 启动繁重的程序并进行大量数据交换时，QLC和TLC在速度上的差异将非常明显。 但是普通用户可能不会注意到这一点，因为在建议使用QLC驱动器级别的计算机上，该程序等待用户操作的时间比处理数据的时间更长。 <br><br> 可以肯定地说，低性能的廉价驱动器已经被成功占据了，因为它对于增加可靠性或最大读写速度没有多付钱。 在此类计算机中，QLC SSD可能是唯一将安装系统和必要程序以及用户数据的驱动器。 但是在企业中-革命没有发生；在这里，像以前一样，他们仍然会喜欢更可靠的TLC和缓慢但朴实的HDD。 <br><br> 然而，技术并不会停滞不前，今年制造商承诺将开始向7纳米制程技术过渡，并且在未来的2021年及以后，将会出现5和3纳米制程技术。 控制器算法正在改进中，一些公司承诺将智能SSD驱动器的速度提高几倍，并针对某些特定用例，计划开发3D NAND技术。 <br><br> 因此，请等待几年，然后看看制造商还能为我们提供什么。 <br><br>  <i>有关金士顿产品的更多信息，请访问<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">公司的官方网站</a> 。</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN439568/">https://habr.com/ru/post/zh-CN439568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN439558/index.html">新旧电话。 重塑PSTN电话</a></li>
<li><a href="../zh-CN439560/index.html">适用于InterSystems IRIS数据平台的以太坊区块链适配器</a></li>
<li><a href="../zh-CN439562/index.html">使用kubeadm在裸机上配置Kubernetes HA集群。 第1/3部分</a></li>
<li><a href="../zh-CN439564/index.html">以Putut为例的AST树转换的实际应用</a></li>
<li><a href="../zh-CN439566/index.html">为什么SRE文档很重要。 第三部分</a></li>
<li><a href="../zh-CN439570/index.html">IPython魔术来编辑Jupyter细胞标记</a></li>
<li><a href="../zh-CN439572/index.html">电子设备的计算机辅助设计</a></li>
<li><a href="../zh-CN439574/index.html">SmartCard I2C协议。 通过I2C接口交换APDU命令</a></li>
<li><a href="../zh-CN439576/index.html">Python采访的广泛概述。 提示与技巧</a></li>
<li><a href="../zh-CN439578/index.html">关于转换和其他操作的问题</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>