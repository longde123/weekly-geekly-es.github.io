<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåπ üòâ üåê DEFCON 21. A confer√™ncia DNS pode ser perigosa para sua sa√∫de. Parte 2 ü§üüèæ ‚èèÔ∏è üë®‚Äçüëß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="DEFCON 21. A confer√™ncia DNS pode ser perigosa para sua sa√∫de. Parte 1 

 Supunha-se que os limites de dom√≠nio da organiza√ß√£o fossem foo.com e voc√™ nu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DEFCON 21. A confer√™ncia DNS pode ser perigosa para sua sa√∫de. Parte 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/430936/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DEFCON 21. A confer√™ncia DNS pode ser perigosa para sua sa√∫de.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> <br><br>  Supunha-se que os limites de dom√≠nio da organiza√ß√£o fossem foo.com e voc√™ nunca desejaria usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.com</a> .  A Microsoft mudou esse comportamento do DNS porque, obviamente, nem todas as organiza√ß√µes t√™m dois n√≠veis para nomes de dom√≠nio. <br><br><img src="https://habrastorage.org/webt/vf/vl/75/vfvl75firrgcfnxkplyxadipigi.jpeg"><br><br>  Se o seu dom√≠nio de n√≠vel superior for o Reino Unido, ao se conectar a um dom√≠nio ad.foo.co.uk espec√≠fico, o comportamento padr√£o do DNS ser√° semelhante a: <br><br><img src="https://habrastorage.org/webt/2o/_3/y6/2o_3y6rzyxg1a6uzbnxxrdzqnvk.jpeg"><br><br>  Ou seja, a solicita√ß√£o ser√° enviada para fora dos limites do seu nome de dom√≠nio em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.co.uk.</a>  Portanto, um hotfix aleat√≥rio foi criado, um patch de seguran√ßa que reduzia os limites organizacionais do dom√≠nio para 3; nesse caso, a devolu√ß√£o do DNS parou ap√≥s a segunda solicita√ß√£o para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.foo.co.uk.</a> <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/p1/v5/3f/p1v53f72bjrrddwozdqzth3fpms.jpeg"><br><br>  Por√©m, em nosso exemplo de nome de dom√≠nio, essa corre√ß√£o de seguran√ßa, projetada para interromper publicidade desnecess√°ria, quebrou centenas de milhares de empresas clientes cujo design de nome de dom√≠nio dependia do comportamento DNS original e original.  O que essas empresas est√£o fazendo?  Eles alteram o design da infraestrutura para corresponder ao novo comportamento que leva em considera√ß√£o esse hotfix aleat√≥rio?  N√£o, eles mudam o comportamento de volta ao que era antes. <br><br>  O slide a seguir mostra a √°rvore de decis√£o que a Microsoft usa antes de criar uma consulta DNS. <br><br>  Eu sei que parece simples (risos), e √© claro que voc√™ est√° surpreso que algu√©m possa entend√™-lo mal. <br><br><img src="https://habrastorage.org/webt/6p/6k/u6/6p6ku64sfpnrz1hzrxuk9frchsi.jpeg"><br><br>  Depois disso, houve dezenas de corre√ß√µes e atualiza√ß√µes nesse comportamento do DNS, que foram alteradas de vers√£o para vers√£o.  Mas eles o documentaram uma vez e, se um dos ramos dessa √°rvore for alterado, ele interromper√° completamente o seu modo de usar o DNS, e voc√™ n√£o poder√° alterar as configura√ß√µes para restaurar o comportamento original.  Voc√™ teve um problema porque a cada nova atualiza√ß√£o suas configura√ß√µes se comportam de maneira diferente.  Talvez algo quebre, ou talvez n√£o, ou seja, algo que voc√™ n√£o espera que possa acontecer. <br><br>  Portanto, as empresas fazem altera√ß√µes por meio da edi√ß√£o de registro ou de diretiva de grupo, tentando restaurar o comportamento DNS original, mas algumas delas n√£o podem faz√™-lo corretamente onde o comportamento foi alterado por outro fix pack.  Eles est√£o tentando reverter as altera√ß√µes para restaurar esse comportamento perdido, porque desejam que os clientes possam acessar o foo.com novamente. <br><br><img src="https://habrastorage.org/webt/b0/tp/wu/b0tpwujwuzovazxhj0zlm1bh_so.jpeg"><br><br>  Mas na maioria dos casos, quando eles n√£o podem restaurar uma devolu√ß√£o de dois n√≠veis, eles simplesmente se livram da restri√ß√£o de dois n√≠veis original.  Obrigado, Microsoft, pelo Windows 7 - agora voc√™ pode alterar os tr√™s n√≠veis de dom√≠nio padr√£o por 2, mas o sistema n√£o permite reduzi-los a um. <br><br><img src="https://habrastorage.org/webt/tz/kw/jl/tzkwjlaf1zpmbv2lz5mk8ma1zva.jpeg"><br><br>  Voc√™ pode pensar que agora tudo est√° corrigido, mas e os dispositivos BYOD e dispositivos m√≥veis usando a configura√ß√£o do XP?  Decidi verificar quantas configura√ß√µes danificadas ainda podem existir l√°.  Registrei v√°rios dom√≠nios geralmente usados ‚Äã‚Äãapenas em um ambiente corporativo. <br><br>  O primeiro dom√≠nio √© o acr√¥nimo de Microsoft Office Communicator, que solicita um servidor SIP interno.  Os pr√≥ximos dois nomes que encontrei no Google s√£o os nomes abreviados das chaves de registro de chaves que o proxy da web cont√©m; portanto, atribuai esses nomes aos meus servidores e esperei que os clientes entrassem em contato comigo.  E eles fizeram isso. <br><br><img src="https://habrastorage.org/webt/fg/gc/lg/fggclg28hcqs7pcmzfbn5vo02eq.jpeg"><br><br>  Ap√≥s me registrar no sipinternal.com, comecei a receber solicita√ß√µes de clientes do comunicador do escrit√≥rio - o slide mostra um exemplo de solicita√ß√£o para registrar um dos recursos da DHL e, como se viu, existem milhares de dispositivos aleat√≥rios no mundo que tentaram se registrar comigo. <br><br><img src="https://habrastorage.org/webt/ts/cr/fu/tscrfup8wbhfkzj5oui4zveuzfg.jpeg"><br><br>  Eu brinquei um pouco com eles e pareciam v√°rios ataques que um servidor SIP mal-intencionado realiza contra comunicadores de clientes.  Esta ser√° minha pr√≥xima hist√≥ria sobre proxy-phoenix.com <br><br><img src="https://habrastorage.org/webt/qd/sa/zr/qdsazrdrokpuopnnqnssrxv1nai.jpeg"><br><br>  V√°rios usu√°rios finais da IBM e da HP come√ßaram a me pedir para se tornar seu servidor proxy, e agora eles t√™m um cliente em Phoenix que ‚Äúempurra‚Äù o proxy-Phoenix como um nome abreviado para seus usu√°rios.  Eu achei interessante.  Mas o set-proxy.com ficou ainda mais interessante. <br><br>  Os primeiros pedidos que recebi foram tentativas de milhares de clientes Windows de baixar um arquivo de pacote de instala√ß√£o de proxy.  Descobri que o endere√ßo IP de origem estava registrado na Arthur Andersen, uma empresa de contabilidade que faliu com a Enron. <br><br><img src="https://habrastorage.org/webt/jt/tk/du/jttkdu_otn6oyqtmdsb9r21naky.jpeg"><br><br>  A Accenture se separou de seu grupo de consultoria, o que faz mais sentido na pr√≥xima parte.  Isso mostra que a pol√≠tica deles sobre o uso de dispositivos m√≥veis caiu (risos). <br><br><img src="https://habrastorage.org/webt/ra/xy/52/raxy5209fuvmmn4jjbg7xh9wvmu.jpeg"><br><br>  Eles promovem uma configura√ß√£o que se refere ao local do pacote proxy pelo nome de dom√≠nio abreviado.  E milhares de iPhone e iPad responderam a esse nome abreviado e come√ßaram a me pedir para fornecer esses pacotes de arquivos.  Mesmo o fato de essa configura√ß√£o n√£o permitir que os clientes obtenham o que eles pediram n√£o os fez pensar, e eles foram diretamente para a Internet, ignorando o proxy, para solicitar esses arquivos de mim. <br><br>  Observando com mais aten√ß√£o, notei que recebo solicita√ß√µes n√£o apenas da Accenture, mas tamb√©m de seus clientes conectados √† rede desta empresa.  Assim, atrav√©s de um DNS incorreto, a Accenture comprometeu n√£o apenas sua rede local, mas tamb√©m as redes de todos os clientes conectados a ela, permitindo invadir todos os dispositivos localizados l√°.  Fui diretamente contatado por dispositivos pertencentes a funcion√°rios da IBM, HP, Dow, Nokia, GE, Merck, Medco.  Todos eles me pediram para ser seu procurador, e vou lhe dizer que esperava o melhor da Accenture. <br><br><img src="https://habrastorage.org/webt/30/cp/ce/30cpcedocnjq2uwrbi52whb6w7s.jpeg"><br><br>  Tais li√ß√µes podem ser extra√≠das disso.  Observe o tr√°fego DNS, porque se o Windows se comportar da mesma maneira agora, isso n√£o significa que ele se comportar√° da mesma maneira ap√≥s a segunda ter√ßa-feira do m√™s (risos). <br><br>  N√£o confie nas expectativas com base no fato de as coisas correrem como deveriam, observe o tr√°fego e aprenda a entender como deve ser o tr√°fego DNS normal na sua rede.  Voc√™ precisa entender claramente como √© o tr√°fego normal antes de fazer altera√ß√µes nas configura√ß√µes, para poder compar√°-las posteriormente. <br><br><img src="https://habrastorage.org/webt/zh/2h/0a/zh2h0afmnkcw3li9x5hy94nhpcw.jpeg"><br><br>  Legenda: ‚ÄúVoc√™ n√£o √© o propriet√°rio deste dom√≠nio.  Eu sou ele. <br><br>  Eu demonstrei algumas maneiras bastante exclusivas pelas quais um bit "flip" no DNS pode ser perigoso.  No entanto, o agachamento de bits n√£o √© uma grande amea√ßa; portanto, √© mais interessante executar truques com um comportamento DNS inesperado causado por uma combina√ß√£o de "patches" da Microsoft com a configura√ß√£o original, o que o torna completamente inintelig√≠vel. <br><br>  No entanto, uma das piores coisas que as empresas fazem em rela√ß√£o ao DNS √© auto-mutila√ß√£o 100% por neglig√™ncia. <br><br>  Vi empresas que repetidamente, ao longo de v√°rios anos, algumas vezes por acidente e outras intencionalmente, criaram todas as condi√ß√µes para que um invasor pudesse assumir todas as partes de sua infraestrutura. <br><br>  O problema √© que, de fato, as empresas usam os dom√≠nios dos quais n√£o s√£o propriet√°rios.  Esses dom√≠nios, colocados nas cadeias de caracteres de pesquisa com sufixo, "pressionam" todos os seus clientes a acessar inevitavelmente a Internet externa quando precisam de suporte t√©cnico. <br><br>  Decidi estudar quantas empresas s√£o for√ßadas a fazer isso, e n√£o foi dif√≠cil para mim.  Comecei pedindo ajuda ao Google para encontrar os nomes das chaves do Registro que armazenam a lista de pesquisa para a sa√≠da da configura√ß√£o de IP do Windows e a lista de pesquisa de sufixos DNS. <br><br><img src="https://habrastorage.org/webt/us/lv/rv/uslvrvao2-dpoodwfs4wulpfmv0.jpeg"><br><br>  Os f√≥runs de suporte t√©cnico incentivam os usu√°rios a publicar informa√ß√µes de configura√ß√£o da esta√ß√£o de trabalho para obter assist√™ncia na solu√ß√£o de problemas. <br><br><img src="https://habrastorage.org/webt/f2/hv/b8/f2hvb8a8hgdxm_qtaveacz_2o2k.jpeg"><br><br>  Estudei o Google e criei uma lista exclusiva de dom√≠nios e comecei a registr√°-los.  Ao analisar a configura√ß√£o do IP, deparei-me com o sufixo DNS do rsquanta e fiz dele a base da minha lista de registro de dom√≠nio. <br><br><img src="https://habrastorage.org/webt/tc/o3/mh/tco3mharjdukpwup-zm4g3xkfu4.jpeg"><br><br>  Depois de registrar os dom√≠nios com os nomes distorcidos mostrados no pr√≥ximo slide, comecei a receber milhares de solicita√ß√µes de dispositivos m√≥veis que nem sabiam com qual empresa estavam entrando em contato.  Mas eu descobri.  Verificou-se que o sufixo rsquanta.com do nome de dom√≠nio pertence a uma grande empresa de hardware de computadores de Taiwan, a Quanta Computer, que emprega 60 mil pessoas. <br><br><img src="https://habrastorage.org/webt/jd/oc/np/jdocnpwh2bzb0gics-adlvpyaiy.jpeg"><br><br>  Eles projetaram e fabricaram o laptop de cem d√≥lares para crian√ßas OLPC e colaboraram com o Facebook para projetar e montar seus novos servidores com base em seus dispositivos.  Recebi pedidos de detec√ß√£o autom√°tica de proxies, servidores SMS, servidores de correio, servidores de transfer√™ncia de arquivos.  Havia dezenas de maneiras pelas quais eu poderia aproveitar esses dispositivos com calma na Tail√¢ndia e introduzir explora√ß√µes para roubar credenciais ou interceptar arquivos transferidos.  Depois que eles me pediram para ajud√°-los a encontrar os recursos certos, um ataque de homem do meio pareceria trivial. <br><br>  Mas quando eu determinei as fontes dos pedidos que recebi para meus servidores fict√≠cios, isso realmente me impressionou.  Descobri que o tr√°fego regular vinha de redes de clientes, o que indicava a exist√™ncia de dispositivos Quanta Computer na Cisco, Apple, 3m e Dell. <br><br><img src="https://habrastorage.org/webt/oq/tt/jl/oqttjloopihnzszsk_yvl1swy8k.jpeg"><br><br>  Portanto, eles deveriam ter uma equipe de campo cujo dever era ajudar a implementar o equipamento Quanta.  E esses s√£o apenas alguns dos clientes desta empresa que t√™m funcion√°rios da Quanta Computer trabalhando no campo - descobri sobre eles porque todos me pediram para fornecer acesso aos ativos da empresa. <br><br><img src="https://habrastorage.org/webt/bk/fo/lv/bkfolvgcq_x0mdzwwa2aaejblay.jpeg"><br><br>  Seu hardware estava firmemente estabelecido nos equipamentos de empresas conhecidas e relacionado √† propriedade intelectual confidencial.  Assim, havia muitas informa√ß√µes passivas que eu poderia extrair do tr√°fego delas.  Eu possu√≠a uma lista dos nomes de cada dispositivo em sua rede, vi o tr√°fego da empresa oculto ao p√∫blico, o que indicava a presen√ßa de um novo contrato.  Se o tr√°fego parasse repentinamente, eu poderia assumir que eles haviam perdido o contrato e rastrear para onde iriam a seguir, para onde esses funcion√°rios viajam e para onde est√£o. <br><br><img src="https://habrastorage.org/webt/l5/-1/mh/l5-1mhi4a6g6jj0iqcdjn5uxu58.jpeg"><br><br>  Por exemplo, vejo que um servi√ßo de limpeza a seco Wi-Fi foi aberto perto do escrit√≥rio da empresa, porque centenas de dispositivos me enviam solicita√ß√µes de tempos em tempos a partir da√≠.  Eu at√© vejo que nesta cidade existem pessoas para o Black Hat e o DefCon, depois falaremos sobre isso (risos). <br><br>  Portanto, um erro desse tipo √© bastante s√©rio.  Para evit√°-lo, verifique sua configura√ß√£o de DNS.  Use a Internet para descobrir os detalhes de sua configura√ß√£o interna usando recursos como Pastebin e Bleeping Computer. <br><br>  Observe seus logs DNS e verifique se seus clientes e os clientes de seus parceiros e fabricantes atendem √†s solicita√ß√µes exatamente como voc√™ espera.  Se voc√™ rastrear logs, identifique facilmente dom√≠nios solicitados com frequ√™ncia para cada dispositivo, cada ativo corporativo. <br><br>  H√° alguns anos, comecei a comprar dom√≠nios expirados, que eram usados ‚Äã‚Äãanteriormente como servidores C&amp;C.  (risos)  Foi muito divertido, ent√£o, no come√ßo, eu queria entender quanto mais infec√ß√£o restava l√°, depois descobrir que tipo de dispositivos ainda estavam infectados e onde estavam. <br><br>  Pesquisando dom√≠nios da ‚Äúlista negra‚Äù n√£o foi dif√≠cil, ent√£o eu tive uma escolha de milhares de dom√≠nios a um pre√ßo de 99 centavos, e comprei v√°rios deles.  O slide a seguir mostra o primeiro dom√≠nio que comprei - microsoft-windows-security.com.  Ele foi infectado pelo v√≠rus Win32: EyeStye, um Trojan bot, um interceptador de teclado usado para roubar informa√ß√µes confidenciais.  Ele interceptou a entrada e a enviou para esse dom√≠nio na forma de mensagens n√£o criptografadas.  Eu n√£o fiz nada com ele, apenas enviei um erro 404 toda vez que ele queria entrar em contato comigo, mas ele ainda tentou me enviar os dados roubados. <br><br><img src="https://habrastorage.org/webt/g7/el/ih/g7elihaxxzz7kqjfkqa0hhchzcw.jpeg"><br><br>  Este bot relata seu identificador exclusivo, o nome do processo que controla, a fun√ß√£o interceptada, os dados nele contidos e a carga √∫til na forma do nome de usu√°rio e senha do usu√°rio. <br><br><img src="https://habrastorage.org/webt/my/g1/ky/myg1ky-n-o5sfcggfwaycmpfyzy.jpeg"><br><br>  Muitos desses bots continuam entregando cargas √∫teis √†s cegas em seu dom√≠nio.  Registrei dezenas desses dom√≠nios, cobrindo milhares de dispositivos infectados.  Esses representantes da rede botnet foram simplesmente abandonados por seus propriet√°rios anteriores, que n√£o quiseram fazer um esfor√ßo para fech√°-los, mas simplesmente os deixaram na rede at√© que o dom√≠nio expirasse.  Ent√£o gastei meus primeiros 6 d√≥lares nesses dom√≠nios infectados por v√≠rus (aplausos no corredor). <br><br><img src="https://habrastorage.org/webt/ai/bk/zr/aibkzrs36ipq1f963hlkwt2wcsm.jpeg"><br><br>  Eu tinha 23.000 dispositivos enviando relat√≥rios para o meu servidor e todos esses dom√≠nios foram retirados de listas negras publicadas.  Por que tantas empresas permitem que seus clientes entrem em contato com dom√≠nios considerados h√° muito tempo maliciosos? <br><br>  Todos n√≥s podemos melhorar nosso trabalho controlando um dos mecanismos mais simples; portanto, apenas procurando nos logs dos meus dom√≠nios, me deparei com um que parecia realmente incomum. <br><br><img src="https://habrastorage.org/webt/je/zg/rv/jezgrvyjs16ezlty6pirdol3vp0.jpeg"><br><br>  Um dos clientes de 82 mil dispositivos na minha rede solicitou regularmente e, quando comecei a resolv√™-lo, descobri que esse dom√≠nio tinha seis meses e n√£o estava em nenhuma "lista negra" e n√£o havia uma √∫nica men√ß√£o no Google.  Parecia muito suspeito, ent√£o comprei e imediatamente fui inundado de clientes.  Era um invasor comum que enviava sua carga √∫til de forma n√£o criptografada e controlava 10.000 dispositivos infectados em todo o mundo.  Alguns deles estavam localizados em √°reas com o mais alto regime de seguran√ßa, e descobri que um dos dispositivos infectados pertence √†s instala√ß√µes de tratamento da cidade de Phoenix. <br><br>  Eu me virei para algu√©m da empresa e disse que poderia identificar o v√≠rus se eles me enviassem uma amostra do arquivo infectado.  Assim que eles me enviaram uma amostra, enviei-a para o Virustotal e constatei que nenhum dos 42 scanners antiv√≠rus conseguiu identificar esse v√≠rus.  Esse malware tinha 2 anos e me parecia estranho que n√£o fosse identificado como uma amea√ßa em nenhum antiv√≠rus.  Mas o que era ainda mais estranho foi por que ele foi abandonado?  Completamente invis√≠vel aos antiv√≠rus, era realmente uma infec√ß√£o viral muito valiosa.  E aqui est√° um exemplo ir√¥nico: era um engenheiro de controle de qualidade da Symantec, espero que ele n√£o esteja aqui. <br><br><img src="https://habrastorage.org/webt/ll/mx/q4/llmxq42ijulwwwrgk3fzrazdwia.jpeg"><br><br>  A seguir, vejo como ele funciona no sistema de emiss√£o de bilhetes on-line e, nesse caso, fecha o ticket devido ao problema de seguran√ßa do cart√£o SIM do produto.  Acho muito triste que parte do malware, que j√° tem 2 anos de idade, ainda esteja inclu√≠da na lista de exclus√£o do programa antiv√≠rus da empresa por um engenheiro que trabalha para eliminar defeitos perigosos e garantir a seguran√ßa dos produtos da empresa. <br>  Existem muitos dispositivos infectados pertencentes a altos funcion√°rios e funcion√°rios do governo, como o secret√°rio da justi√ßa, a c√¢mara baixa do Congresso dos EUA, escrit√≥rios de transfer√™ncia de dinheiro, jornais e at√© o caixa da Uni√£o dos Servidores Federais em Langley!  Estes s√£o definitivamente os melhores 99 centavos que j√° gastei. <br><br>  √â assustador pensar que provavelmente existem milh√µes de dispositivos infectados tentando acessar os servidores de Comando e Controle, cujo acesso n√£o √© mais permitido.  Se voc√™ usar o DNS aberto ou local de quase qualquer grande provedor, n√£o d√™ aos dispositivos infectados a oportunidade de obter tudo o que eles est√£o tentando resolver, n√£o importa se esse dom√≠nio existe ou n√£o.  Porque eles falsificam uma resposta que n√£o existe e fornecem o endere√ßo IP padr√£o da p√°gina de destino.  Portanto, o log do servidor que hospeda esta p√°gina cont√©m uma infinidade de dados roubados.  Voc√™ acha que os propriet√°rios do host est√£o fazendo algo para evitar isso? <br><br>  Eles est√£o apenas tentando gerar receita com tr√°fego inapropriado com an√∫ncios que roubam inadvertidamente seus dados pessoais.  Voc√™ espera que, se um programa mal-intencionado tentar permitir que voc√™ entre em contato com um servidor C&amp;C que foi desconectado, voc√™ n√£o chegar√° a lugar algum, simplesmente n√£o poder√° ir para l√°. <br><br><img src="https://habrastorage.org/webt/xr/m-/0q/xrm-0qzte3qd1jnm31esgwn1res.jpeg"><br><br>  Na realidade, isso acontece como mostrado nos slides a seguir - os DNSs abertos s√£o t√£o gentis que dar√£o uma resposta para qualquer coisa, n√£o importa se esse dom√≠nio existe ou n√£o, e eles ter√£o prazer em fornecer o endere√ßo IP de um site malicioso que roubar√° seus dados. <br><br><img src="https://habrastorage.org/webt/_z/8f/j-/_z8fj-172xf7nedkhr96miby-5g.jpeg"><br><br><img src="https://habrastorage.org/webt/ka/w1/2s/kaw12s4xqu1_ww_r0h9plfwkc_w.jpeg"><br><br>  Registrei v√°rios dom√≠nios que n√£o est√£o atualmente em nenhuma lista negra.  Encontrei todas as amostras de malware que passaram despercebidas pelos principais fornecedores de antiv√≠rus, analisando os logs DNS.  Para detectar esses v√≠rus, ajo assim: <br><br><ul><li>  Eu coleciono os logs DNS que as pessoas me fornecem em um banco de dados comum; </li><li>    ,     ; </li><li>  ,    ; </li><li>           ; </li><li>  ,   IP- 127.0.0.1, ,   ¬´¬ª. </li></ul><br>      ,    .      ,   ,      .         ,      ,     DNS. <br><br>  Bro   DNS-    .     DNS Anomaly Detection ‚Äì   ,         ,  ,  ,  - . <br><br> Passive DNS ‚Äì     Microsoft,     ¬´¬ª   ,   ¬´¬ª        .pcap   . <br><br><img src="https://habrastorage.org/webt/bo/z9/qi/boz9qifx5wf225qkmyhekeaoryu.jpeg"><br><br> Response Policy Zones   ,            ,       .       DNS Sinkholes,         ,      . <br><br>       ,      ¬´¬ª  DNS,        ,  . <br><br><img src="https://habrastorage.org/webt/vm/sh/hh/vmshhhzvurq6lpdk8d4blyogbta.jpeg"><br><br>   ,      !          : bobx@rot26.net. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/9Sgaq6OYLX8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10 GB DDR4 240 GB SSD de 1 Gbps at√© dezembro de gra√ßa</b> quando pagar por um per√≠odo de seis meses, voc√™ pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt430936/">https://habr.com/ru/post/pt430936/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt430926/index.html">O tempo √© fragmentado; um pouco sobre a semelhan√ßa de sistemas distribu√≠dos e um modelo de mem√≥ria fraca</a></li>
<li><a href="../pt430928/index.html">Apenas sobre a "casa inteligente": como criar uma luz de fundo "inteligente"</a></li>
<li><a href="../pt430930/index.html">Sobre gr√°ficos 3D em palavras simples</a></li>
<li><a href="../pt430932/index.html">Hackers roubaram mais de 21 milh√µes de rublos de um banco russo</a></li>
<li><a href="../pt430934/index.html">Asterisk dialplan extension mask generator</a></li>
<li><a href="../pt430938/index.html">Como obter os primeiros pedidos em design quando n√£o h√° portf√≥lio e experi√™ncia</a></li>
<li><a href="../pt430940/index.html">SDK para voc√™, SDK para mim, SDK para todos! Como criar um SDK e por que √© necess√°rio</a></li>
<li><a href="../pt430942/index.html">Julia. Scripts e argumentos de linha de comando de an√°lise</a></li>
<li><a href="../pt430944/index.html">A NASA decidiu os participantes para sua competi√ß√£o de mini-moon rover</a></li>
<li><a href="../pt430948/index.html">Minist√©rio das Comunica√ß√µes prop√µe refor√ßar o controle sobre dados pessoais</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>