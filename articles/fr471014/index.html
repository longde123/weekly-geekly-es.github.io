<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ó üë∏üèø üòÉ Nous fabriquons un drone aquatique autonome, ou comme je r√™vais d'aider le Ba√Økal, mais je ne suis pas Gazprom. Partie 1 üë≠ üìô üèÇüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 J'habite pr√®s du Ba√Økal et j'y suis all√© plusieurs fois. C'est un beau lac avec de l'air pur. Il y a quelques ann√©es, le lac a comme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous fabriquons un drone aquatique autonome, ou comme je r√™vais d'aider le Ba√Økal, mais je ne suis pas Gazprom. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471014/">  Bonjour, Habr! <br><br>  J'habite pr√®s du Ba√Økal et j'y suis all√© plusieurs fois.  C'est un beau lac avec de l'air pur.  Il y a quelques ann√©es, le lac a commenc√© √† devenir pollu√©.  Et donc j'ai pens√©, pourquoi ne pas faire un drone avec des panneaux solaires, y mettre un moteur, un ordinateur neuronal avec YoloV3 (un r√©seau neuronal qui fournit la vision par ordinateur) avec une cam√©ra st√©r√©o, ajouter du GPS et lui apprendre √† nettoyer le Ba√Økal hors ligne. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/28d/ced/4dc/28dced4dc8249ebd72d5e86d4b0f774f.jpg" alt="image"><br><a name="habracut"></a><br>  Sur Google, j'ai d√©couvert qu'il y a deux raisons principales: les eaux us√©es sales et mal nettoy√©es de la ville d'Oulan-Oude et les vacanciers qui utilisent des d√©tergents, qui √† leur tour cr√©ent une forte concentration de nitrates et de phosphates sur la rive du lac Ba√Økal.  Apr√®s une autre recherche sur Google, il s'est av√©r√© que pour sauver le lac Ba√Økal, il fallait juste le nettoyer.  Je pensais que je pouvais g√©rer une chose aussi d√©licate.  J'ai donc commenc√© mon voyage en tant que constructeur de drones) <br>  Le processus de nettoyage consiste √† pomper l'eau √† travers un filtre √† eau conventionnel, qui est install√© dans un syst√®me d'alimentation en eau courante.  Le filtre consistera en un <br>  oxyde d'aluminium.  Sorbent est autoris√© √† utiliser dans le traitement de l'eau en F√©d√©ration de Russie.  Cela filtrera les phosphates, ce qui permettra de faire pousser du spirogyre (l'algue qui submerge les plans d'eau).  L'utilisation de ce sorbant permettra de changer uniquement le contenu du filtre et non du filtre lui-m√™me, ce qui conduira √† un processus de nettoyage moins cher.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien vers un article sur l'utilisation de l'alumine active.</a> <br><br>  Le premier √† qui j'ai parl√© de mon id√©e √©tait mon patron.  C'√©tait au printemps 2018. Il a aim√© l'id√©e et donc en quelques jours il a dessin√© un dessin 3D du drone.  C'est la seule photo qui a √©t√© conserv√©e.  Sur la photo, un drone avec une batterie solaire et une bou√©e inf√©rieure retir√©s. <br><br><img src="https://habrastorage.org/webt/nk/59/wa/nk59wanthoyv0x98b0asbifvupk.jpeg" alt="image"><br><br>  Ensuite, nous avons trouv√© un sponsor, mais il a re√ßu les dessins imm√©diatement tomb√©s.  De plus, le patron s'est √©galement calm√© lorsque j'ai propos√© de le r√©cup√©rer pour mon argent. <br><br>  Janvier 2019 est arriv√© et a quand m√™me d√©cid√© de le faire.  Mon oncle a accept√© de m'aider.  La premi√®re chose que j'ai achet√©e √©tait des tuyaux en plastique ordinaires (pourquoi sont-ils si chers !!!) ainsi que des raccords, des revers, des pinces et des couvercles.  Ensuite, nous avons pris une vieille baguette, perc√© des trous pour chaque manche et y avons viss√© une feuille de contreplaqu√©.  Les tuyaux ont pris un m√®tre avec un diam√®tre de 110 mm.  Nous ne savions pas lesquels conviendraient √† notre navire, nous les avons donc pris et, √† l'avenir, nous devions d√©j√† ajuster la capacit√© de charge n√©cessaire. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8b6/a3b/8d9/8b6a3b8d927dd5502e1cc0452e83ffdd.jpg" alt="image"><br><br>  Ensuite, nous avons soud√© un cadre m√©tallique pour le moteur √† partir de vieux morceaux de fer ordinaires qui tra√Ænaient dans le jardin.  Un oncle a donn√© un moteur cass√© du refroidissement du moteur Volga-3110.  Apr√®s l'autopsie, il s'est av√©r√© qu'un conder extincteur y avait √©t√© bris√©.  Apr√®s l'avoir remplac√©, le moteur a fonctionn√©.  Et notre radeau s'est transform√© en bateau. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99b/cf7/4d1/99bcf74d1a5ee70b4c07518584065cff.jpg" alt="image"><br><br>  Le printemps est d√©j√† arriv√© et j'ai d√©couvert le concours IT Start.  Je me suis demand√© pourquoi je ne devrais pas aller avec mon projet.  Mais l√†, au d√©but, les Moscovites m'ont dit que le drone qui nettoie le lac Ba√Økal n'est pas n√©cessaire, une sorte de but commercial est n√©cessaire, puis les habitants n'ont pas appr√©ci√© mon initiative.  Le dernier jour du lancement informatique, nous avions d√©j√† r√©ussi √† fabriquer une carrosserie pour l'√©lectronique et un volant.  La veille de la comp√©tition, j'ai r√©ussi √† terminer un simple contr√¥le de vaisseau sur esp8266 sans retour.  J'ai montr√© cette vid√©o au concours: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/U9ibNuAEGvk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Alors il a regard√© √† l'int√©rieur: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/27a/14e/54a/27a14e54a04fb595de0a4a681413e192.jpg" alt="image"><br><br>  La batterie du syst√®me sans coupure a √©t√© pr√©sent√©e par une peseuse famili√®re.  Le moteur de direction a √©t√© trouv√© quelque part par un oncle.  J'ai d√ª acheter un filtre et une pompe (une pompe submersible donc situ√©e sous le navire dans le ¬´nez¬ª) pour mon argent.  Relais de voiture √† 40 amp√®res. <br><br>  Apr√®s la comp√©tition, l'enthousiasme a diminu√©.  Et en √©t√©, j'√©tudiais pas plus de 2 heures par semaine.  La gestion collect√©e sur esp8266 avait un inconv√©nient: tout fonctionnait √† travers une requ√™te get dans une fonction similaire √† une interruption, et si √† ce moment une autre commande √©tait envoy√©e, le pourcentage √©chouait et red√©marrait, ce qui √©tait visible √† partir des donn√©es envoy√©es sur le port com.  Et le pourcentage lui-m√™me tombait constamment.  Apr√®s avoir fouill√© les sources Arduino et n'y avoir trouv√© aucun registre (il s'av√®re que j'ai appris plus tard que les Chinois ont imm√©diatement √©crit les fonctions de contr√¥le pour tous les mod√®les esp8266), j'ai d√©cid√© d'aller le plus simplement possible, √† savoir acheter un trousseau de radio et √©crire tous les contr√¥les sur atmega-88pa.  La r√©troaction de la position du gouvernail de direction a √©t√© effectu√©e sur deux ressorts, tir√©s par une r√©sistance de 560 ohms √† 5 V.Lorsque la barre en aluminium attach√©e au guide-moteur √©tait dans la bonne position, a touch√© le ressort le plus proche, puis le sol est venu √† la pin1 micron, tandis que la plus √©loign√©e √† la pin2. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3ea/835/263/3ea8352634bee01b1063ac422a6a4a5a.jpg" alt="image"><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/D3jtW8pAQqg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><div class="spoiler">  <b class="spoiler_title">Code source du firmware Atmega</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* * korabl.cpp * * Created: 24.07.2019 21:59:04 * Author :  */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;avr/io.h&gt; #include "util/delay.h" # define F_CPU 8000000UL int p=0; int polozhenue = 0; void init_port(void) { DDRD|=(1&lt;&lt;2)|(1&lt;&lt;3); ///DDRB|=1&lt;&lt;1; } void po_4asovoi_on(void) { PORTD|=(1&lt;&lt;2)|(1&lt;&lt;3); } void po_4asovoi_off(void) { PORTD&amp;=0b11110011; } void init_polozhenie(void) { po_4asovoi_on(); while(PIND&amp;0x10); po_4asovoi_off(); p = 0; polozhenue = 0; } int main(void) { init_port(); p=0; /* Replace with your application code */ while (1) { if(PIND&amp;0x10) { if ((p==1)||(p==2))///if(GPIOB-&gt;IDR&amp;(1&lt;&lt;9)) { po_4asovoi_on(); _delay_ms(200); // HAL_TIM_Base_Stop_IT(&amp;htim3); po_4asovoi_off(); p=0; } while(PIND&amp;0x10) { PORTD|=(1&lt;&lt;1); _delay_ms(100); } } PORTB&amp;=0xfc; if(PIND&amp;0x20) { if ((p==2)||(p==0))///if(GPIOB-&gt;IDR&amp;(1&lt;&lt;8)) { po_4asovoi_on(); while(PIND&amp;0x80) { } //HAL_TIM_Base_Stop_IT(&amp;htim3); po_4asovoi_off(); p=1; } } if(PIND&amp;0x40) { if ((p==1)||(p==0))///if(GPIOB-&gt;IDR&amp;(1&lt;&lt;7)) { po_4asovoi_on(); while(PINB&amp;0x02) { } /// HAL_TIM_Base_Stop_IT(&amp;htim3); po_4asovoi_off(); p=2; } } } }</span></span></span></span></code> </pre> </div></div><br>  J'ai √©galement d√©cid√© d'assembler le conducteur du moteur du moteur de direction sur 4 transistors (sur la photo, c'est un morceau brillant de phoners), mais apr√®s assemblage et test, il s'est av√©r√© que le moteur ne se soucie pas du type de polarit√© qui lui vient, et j'ai abandonn√© cette id√©e. <br><br>  Et maintenant fin septembre.  Apr√®s les vacances, nous sommes all√©s l'ex√©cuter.  √Ä la premi√®re tentative, il a commenc√© √† couler.  L'arri√®re du navire √©tait lourd, et le scellant fuyait et de l'eau y √©tait entr√©e.  Le module radio est mort.  Le lendemain, ils en ont achet√© un nouveau et ont augment√© les tuyaux.  Le navire a cess√© de couler, mais dans des conditions de combat, le module radio n'a pris qu'un demi-m√®tre.  J'ai d√ª faire une troisi√®me tentative.  Je google sources pour esp8266 et un programme pour smartphone ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">gr√¢ce √† une personne gentille</a> ) et √† la troisi√®me tentative √ßa a valu <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/DN4GX1ghxZI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  La batterie n'a dur√© que quelques minutes, il n'a donc pas √©t√© possible de la tirer sur le rivage. <br><br>  C‚Äôest tout.  Le code source final pour ESP8266 et refait pour atmega se trouve <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr471014/">https://habr.com/ru/post/fr471014/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr471004/index.html">Jouets en bois - un √©pilogue qui reste clou√© au plafond</a></li>
<li><a href="../fr471006/index.html">500 $ par mois: sur quoi les b√©n√©ficiaires d'un revenu de base inconditionnel d√©pensent-ils leur argent?</a></li>
<li><a href="../fr471008/index.html">Parlons de surveillance: enregistrement en direct du podcast Devops Deflope avec New Relic lors de la r√©union du 23 octobre</a></li>
<li><a href="../fr471010/index.html">Algorithme Grover et recherche de donn√©es</a></li>
<li><a href="../fr471012/index.html">Approche d'ing√©nierie du d√©veloppement logiciel. De la th√©orie √† la pratique</a></li>
<li><a href="../fr471016/index.html">Conception de base de donn√©es. Meilleures pratiques</a></li>
<li><a href="../fr471018/index.html">Comparaison des performances du PC et du smartphone, y compris l'iPhone 11</a></li>
<li><a href="../fr471020/index.html">Comment trouver un bug dans un microprocesseur sorti il ‚Äã‚Äãy a trente-cinq ans</a></li>
<li><a href="../fr471022/index.html">R√©v√©ler un secret de 140 ans en physique</a></li>
<li><a href="../fr471024/index.html">Analyse: que sont les futures et comment les utiliser pour des investissements en devises</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>