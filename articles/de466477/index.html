<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∏ üò∂ üôéüèº PVS-Studio-Verwendung beim √úberpr√ºfen von Unreal Engine-Projekten unter Windows üëßüèΩ üë©üèº‚Äçüéì üîà</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel konzentriert sich auf die Besonderheiten der √úberpr√ºfung von Unreal Engine-Projekten mit dem statischen Analysator PVS-Studio unter dem...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PVS-Studio-Verwendung beim √úberpr√ºfen von Unreal Engine-Projekten unter Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/466477/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/977/529/b80/977529b809b96ad36c8f2c766610263a.png" alt="Bild 2"></div><br>  Dieser Artikel konzentriert sich auf die Besonderheiten der √úberpr√ºfung von Unreal Engine-Projekten mit dem statischen Analysator PVS-Studio unter dem Windows-Betriebssystem: Installieren des Analysators, √úberpr√ºfen eines Projekts, Wo und Anzeigen eines Fehlerberichts. <br><a name="habracut"></a><br>  Ein wesentlicher Bestandteil der Reihe unserer Artikel sind Themen aus der Spielebranche.  √úberpr√ºfen Sie eine aktuelle Engine, die in AAA-Spielen verwendet wird - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie sind willkommen</a> , lassen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie sich</a> die h√§ufigsten Fehler in der Spielebranche einfallen - finden Sie Fehler in einer der beliebtesten Spiele-Engines Unreal Engine (UE) - ganz <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einfach</a> .  Bei der Spieleentwicklung sowie bei jeder anderen Anwendung spielt die Qualit√§t des Codes eine Rolle.  Fehler werden am besten so fr√ºh wie m√∂glich gefunden und am besten automatisch ausgef√ºhrt - hier helfen statische Codeanalysatoren Programmierern. <br><br>  In diesem Artikel werde ich versuchen, kurz dar√ºber zu sprechen, wie Sie den statischen Analysator PVS-Studio verwenden k√∂nnen, um in UE erstellte Projekte zu √ºberpr√ºfen.  PVS-Studio kann Ihnen dabei helfen, den Code Ihres Projekts zu verbessern, indem es Fehler darin findet, wodurch Sie den Zeitaufwand f√ºr die Code√ºberpr√ºfung reduzieren k√∂nnen. <br><br>  Bitte beachten Sie, dass dieser Artikel eine Erg√§nzung zur vorhandenen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> zur Analyse von UE-Projekten darstellt und nicht dazu dient, diese zu ersetzen, sondern den Inhalt der Dokumentation weitgehend zu entlehnen. <br><br><h2>  PVS-Studio Installation </h2><br>  Der PVS-Studio-Analysator l√§sst sich am einfachsten installieren, indem Sie seine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Installationsdatei</a> herunterladen.  Um in UE erstellte Projekte analysieren zu k√∂nnen, m√ºssen Sie bei der Installation von PVS-Studio die folgenden Komponenten ausw√§hlen: "C- und C ++ - Compiler-√úberwachung" und "Integration mit Microsoft Visual Studio (Visual C ++ / C #)".  Der letzte Punkt ist f√ºr die Integration des PVS-Studio-Plugins in die Visual Studio-IDE verantwortlich, √ºber die bequem mit dem Fehlerprotokoll und den allgemeinen Einstellungen des Analysators selbst gearbeitet werden kann. <br><br>  Um vollst√§ndig mit PVS-Studio arbeiten zu k√∂nnen, m√ºssen Sie eine Lizenz eingeben.  Sie k√∂nnen dies tun, indem Sie die Visual Studio (VS) -IDE √∂ffnen und die Lizenz unter "PVS-Studio | Optionen ... | Registrierung" eingeben.  In VS 2019 wurde das PVS-Studio-Men√º in das Men√º 'Erweiterungen' verschoben. Der Pfad zum Lizenzeintragsfenster sieht folgenderma√üen aus: 'Erweiterungen' | 'PVS-Studio | Optionen ... | Registrierung'.  Die Lizenz ist auf unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Website</a> verf√ºgbar. <br><br>  Zum Erstellen von UE-Projekten wird ein benutzerdefiniertes UnrealBuildTool (UBT) -Programm von Epic Games verwendet, kein Standard-Build-System, das in VS (MSBuild) verwendet wird.  In dieser Hinsicht kann das PVS-Studio-Plugin kein √ºbliches Szenario zum √úberpr√ºfen von C ++ / C # -Projekten implementieren, das in VS erstellt wurde: "PVS-Studio -&gt; √úberpr√ºfen -&gt; Aktuelles Projekt".  Es gibt verschiedene L√∂sungen, um diese Einschr√§nkung zu vermeiden. <br><br><h2>  Durchf√ºhren einer Analyse mit dem Kompilierungs√ºberwachungssystem </h2><br>  Der erste und einfachste Weg, ein UE-Projekt zu √ºberpr√ºfen, ist die Verwendung des Programms C und C ++ Compiler Monitoring (Standalone.exe) im PVS-Studio-Installationsverzeichnis.  Das Prinzip seiner Arbeit besteht darin, dass es Compilerprozesse √ºberwacht, die dem Zielcompiler (in diesem Fall cl.exe) entsprechen, und alle erforderlichen Informationen f√ºr die Vorverarbeitung und weitere Analyse von Quelldateien sammelt.  Nachdem Sie C und C ++ Compiler Monitoring ge√∂ffnet haben, verwenden Sie das Men√º "Extras" und w√§hlen Sie die Option "Analysieren Sie Ihre Dateien (C und C ++) ...".  Klicken Sie auf "√úberwachung starten". Das Fenster in der unteren linken Ecke zeigt an, dass die √úberwachung von Compileraufrufen ausgef√ºhrt wird: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/c56/21a/d04c5621a3674d9003777275c3698398.png" alt="Bild 1"></div><br>  Erstellen Sie als N√§chstes Ihr UE-Projekt und klicken Sie auf "√úberwachung beenden". <br><br>  Danach beginnt die Analyse der kompilierten Quelldateien.  Der Bericht √ºber die gefundenen Warnungen wird im Fenster "Analyzer-Ausgabe" des Programms C und C ++ Compiler Monitoring angezeigt. <br><br>  Die √úberwachung √§hnlicher Compileraufrufe und die anschlie√üende Analyse erkannter Dateien k√∂nnen mit dem Konsolenprogramm CLMonitor.exe durchgef√ºhrt werden, das sich in demselben Ordner befindet, in dem PVS-Studio installiert wurde.  CLMonitor.exe verf√ºgt √ºber zwei Betriebsmodi: einen Servermodus, in dem Starts von Prozessen (entsprechend dem Zielcompiler) √ºberwacht werden, und einen Clientmodus (wenn Quelldateien, die in der √úberwachungsphase erkannt wurden, analysiert werden, gefolgt von einem Bericht √ºber die Analyseergebnisse). .  F√ºhren Sie den folgenden Befehl aus, um CLMonitor.exe im Servermodus auszuf√ºhren: <br><br><pre><code class="cpp hljs">CLMonitor.exe monitor</code> </pre> <br>  Erstellen Sie danach Ihr UE-Projekt und f√ºhren Sie den folgenden Befehl aus: <br><br><pre> <code class="cpp hljs">CLMonitor.exe analyze -l <span class="hljs-string"><span class="hljs-string">"c:\ptest.plog"</span></span></code> </pre> <br>  Der Befehl "analyse" f√ºhrt CLMonitor.exe im Client-Modus aus und schlie√üt die laufende Instanz dieses Programms, die im Server-Modus arbeitet.  Nach Ausf√ºhrung dieses Befehls beginnt CLMonitor.exe mit der Ausf√ºhrung der Dateianalyse.  Ein Parameter f√ºr die Option "- l" ist ein Pfad zu der Datei, in die die Ergebnisse des Analysators geschrieben werden. <br><br><h2>  Durchf√ºhren einer Analyse mit dem Schl√ºssel -StaticAnalyzer = PVSStudio </h2><br>  Ein anderer und bequemerer Ansatz zur Analyse von UE-Projekten ist die direkte Integration in das von UBT erstellte System.  √ñffnen Sie dazu das Eigenschaftsfenster Ihres UE-Projekts in VS und w√§hlen Sie "NMake" in der Liste "Konfigurationseigenschaften".  F√ºgen Sie das -StaticAnalyzer = PVSStudio in das Textfeld der Eigenschaft "Build Command Line" ein.  Der Wert des Felds "Befehlszeile erstellen" k√∂nnte beispielsweise wie folgt aussehen: <br><br><pre> <code class="cpp hljs">C:\Program Files\Epic Games\UE_4<span class="hljs-number"><span class="hljs-number">.22</span></span>\Engine\Build\BatchFiles\Build.bat<span class="hljs-string"><span class="hljs-string">" MyProject Win64 DebugGame -Project="</span></span>$(SolutionDir)$(ProjectName).uproject<span class="hljs-string"><span class="hljs-string">" -WaitMutex -FromMsBuild -StaticAnalyzer=PVSStudio</span></span></code> </pre> <br>  Es sollte ber√ºcksichtigt werden, dass ein Projektaufbau nur analysiert und nicht erstellt wird.  Das Szenario, in dem ein Projekt sowohl erstellt als auch analysiert wird, wird nachfolgend beschrieben.  Es sollte auch beachtet werden, dass nur die Quelldateien analysiert werden, die seit dem letzten Projektaufbau ge√§ndert wurden.  Das √Ñndern einer enthaltenen .h-Datei ist kein Grund, die Analyse beim n√§chsten Build durchzuf√ºhren.  Um eine vollst√§ndige Analyse durchzuf√ºhren, m√ºssen Sie dasselbe Flag in das Textfeld der Eigenschaft "Alle Befehlszeilen neu erstellen" einf√ºgen.  Wenn Sie das Projekt neu erstellen, erhalten Sie das Ergebnis der Analyse des gesamten Projekts. <br><br><h2>  Durchf√ºhren der Analyse durch √Ñndern von Paketdateien </h2><br>  Betrachten wir nun ein anderes Szenario, in dem der PVS-Studio-Analysator in das UBT-Build-System integriert wird.  W√§hrenddessen beginnt die Analyse direkt nach dem Durchf√ºhren eines Projekterbaus / -neubildens.  Mit anderen Worten, Sie erhalten sowohl ein erstelltes Projekt als auch eine Datei mit Analyseergebnissen.  M√∂glicherweise haben Sie bemerkt, dass das Feld Build Command Line den Pfad zur Batchdatei Build.bat enth√§lt, die wiederum Anweisungen zum Ausf√ºhren von UBT mit den erforderlichen Argumenten enth√§lt.  Build.bat wird am Anfang des Builds ausgef√ºhrt. <br><br>  Der Punkt besteht darin, die Batch-Datei so zu √§ndern, dass sie zuerst UBT mit Standard-Build-Argumenten ausf√ºhren und dann, wenn ein Build erfolgreich abgeschlossen wird, dasselbe UBT ausf√ºhrt, jedoch bereits mit einem zus√§tzlichen Flag -StaticAnalyzer = PVSStudio.  Um das obige Szenario zu implementieren, k√∂nnen Sie die Batchdatei Build.bat √§ndern.  Es ist sogar noch besser, eine Kopie mit dem Namen BuildAndAnalyze.bat zu erstellen.  Folgendes m√ºssen Sie tun, um das beschriebene Szenario zu implementieren.  F√ºgen Sie direkt nach dem Befehl popd die folgenden Anweisungen ein: <br><br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS"</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> )</code> </pre> <br>  Wenn das Flag -StaticAnalyzer = PVSStudio zuvor im Feld Build Command Line in den Projekteinstellungen 'Eigenschaften | Konfigurationseigenschaften | NMake' installiert wurde, muss es entfernt werden. <br><br>  Das Problem bei diesem Ansatz ist, dass nur Dateien analysiert werden, die w√§hrend der Erstellung kompiliert wurden.  Das hei√üt, Sie erhalten keine Berichtsdatei mit einer vollst√§ndigen √úberpr√ºfung Ihres Projekts.  Dar√ºber hinaus werden √Ñnderungen an enthaltenen .h-Dateien nicht ber√ºcksichtigt.  Daher k√∂nnen wir diese Analyse nicht als inkrementell bezeichnen, da √Ñnderungen in den Header-Dateien die Analyse beim n√§chsten Build nicht ausl√∂sen.  In diesem Fall k√∂nnen Sie das Projekt neu erstellen und das Ergebnis der Analyse f√ºr das gesamte Projekt abrufen.  Die vollst√§ndige Erstellung kann jedoch lange dauern, sodass Sie diesem Szenario folgen k√∂nnen: Erstellen Sie eine Erstellung, l√∂schen Sie die Cache-Datei ActionHistory.bin, f√ºhren Sie die Erstellung mit dem Flag -StaticAnalyzer = PVSStudio aus und stellen Sie die Cache-Datei wieder her.  Die Datei ActionHistory.bin enth√§lt Informationen, die zum Ausf√ºhren eines inkrementellen Builds erforderlich sind, sowie den Verlauf der Ausf√ºhrung des Analysators f√ºr √ºberpr√ºfte Dateien. <br><br>  Auf den ersten Blick scheint dieses Szenario nicht das einfachste zu sein. Daher bieten wir eine vollst√§ndige Anleitung, wie Sie die urspr√ºngliche Build.bat-Datei √§ndern k√∂nnen.  Es ist anzumerken, dass solche √Ñnderungen nur f√ºr Unreal Engine Version 4.21 und h√∂her relevant sind.  Deklarieren Sie nach dem Befehl setlocal enabledelayedexpansion die folgenden Variablen: <br><br><pre> <code class="cpp hljs">SET PROJECT_NAME=%<span class="hljs-number"><span class="hljs-number">1</span></span>% SET PLATFORM=%<span class="hljs-number"><span class="hljs-number">2</span></span>% SET UPROJECT_FILE=%~<span class="hljs-number"><span class="hljs-number">5</span></span> SET ACTIONHISTORY_FOLDER= %UPROJECT_FILE%\..\Intermediate\Build\%PLATFORM%\%PROJECT_NAME% SET ACTION_HISTORY=ActionHistory.bin SET ACTION_HISTORY_BAC=%ACTION_HISTORY%.bac SET ACTIONHISTORY_PATH=<span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY%"</span></span> SET ACTIONHISTORY_BAC_PATH= <span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY_BAC%"</span></span></code> </pre> <br>  F√ºgen Sie direkt nach der Anweisung popd die folgenden Befehle ein: <br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS="</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis IF EXIST %ACTIONHISTORY_PATH% ( ECHO Copying %ACTION_HISTORY% to %ACTION_HISTORY_BAC% COPY %ACTIONHISTORY_PATH% %ACTIONHISTORY_BAC_PATH% ECHO Removing %ACTION_HISTORY%: %ACTIONHISTORY_PATH% DEL %ACTIONHISTORY_PATH% ) ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> IF EXIST %ACTIONHISTORY_BAC_PATH% ( ECHO Recovering %ACTION_HISTORY% COPY %ACTIONHISTORY_BAC_PATH% %ACTIONHISTORY_PATH% ECHO Removing %ACTION_HISTORY_BAC%: %ACTIONHISTORY_BAC_PATH% DEL %ACTIONHISTORY_BAC_PATH% ) )</code> </pre> <br>  Beachten Sie, dass die Variablen PROJECT_NAME, PLATFORM und UPROJECT_FILE, die f√ºr die korrekte Bestimmung des Pfads zur Cache-Datei ben√∂tigt werden, ihre Werte aus den Argumenten der Befehlszeile von Build.bat abrufen.  Wenn Sie eine andere Reihenfolge dieser Argumente haben, m√ºssen Sie die Initialisierung der drei oben beschriebenen Variablen entsprechend √§ndern. <br><br><h2>  Inkrementelle Projektanalyse √ºber UBT-Modifikation </h2><br>  PVS-Studio kann im inkrementellen Analysemodus arbeiten.  Inkrementelle Analyse soll nur die Dateien √ºberpr√ºfen, die seit dem letzten Build ge√§ndert wurden.  Im inkrementellen Analysemodus wird PVS-Studio direkt nach der Codekompilierung automatisch auf dem Computer eines Entwicklers im Hintergrundmodus ausgef√ºhrt und analysiert alle ge√§nderten Dateien.  Eine ausf√ºhrlichere Anleitung zur Verwendung von PVS-Studio im inkrementellen Analysemodus finden Sie in unserer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> . <br><br>  Mit der Implementierung des inkrementellen Analysemodus f√ºr UE-Projekte ist alles wieder etwas komplizierter als in einem Standardszenario.  In diesem Fall m√ºssen Sie √Ñnderungen am Build-UBT-System selbst vornehmen, um die inkrementelle Analyse durchf√ºhren zu k√∂nnen (unter Ber√ºcksichtigung von √Ñnderungen in den enthaltenen .h-Dateien).  Erhalten Sie dazu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zugriff</a> auf das UE-Repository auf github.com und klonen Sie es auf Ihren Computer.  Um das geklonte Repository weiter anzupassen, m√ºssen Sie die Schritte ausf√ºhren, die im Abschnitt "Inbetriebnahme", Unterabschnitt "Windows" aufgef√ºhrt sind.  Sie finden diesen Abschnitt auf der Startseite des offiziellen UE-Repositorys.  Sobald Sie Ihr Repository eingerichtet haben, k√∂nnen Sie √Ñnderungen in UBT vornehmen.  Folgen Sie dazu diesem Pfad zum geklonten Repository: \ UnrealEngine \ Engine \ Source \ Programs \ UnrealBuildTool.  √ñffnen Sie die L√∂sung UnrealBuildTool.sln und suchen Sie die Datei PVSToolChain.cs im Projektmappen-Explorer.  F√ºgen Sie in dieser Datei die folgenden Codezeilen in die Klasse PVSApplicationSettings ein: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Whether need incremental analysis or not /// &lt;/summary&gt; public bool IncrementalAnalysis;</span></span></code> </pre> <br>  Mit dieser Codezeile kann die Option IncrementalAnalysis aus den PVS-Studio-Einstellungsdateien deserialisiert werden.  Vergessen Sie nicht, den inkrementellen Analysemodus PVS-Studio selbst zu aktivieren.  √ñffnen Sie dazu in VS "Erweiterungen" im Hauptmen√º, Untermen√º "PVS-Studio", "Analyse nach dem Erstellen (nur ge√§nderte Dateien)", "Aktiviert".  F√ºgen Sie nun direkt nach der Deklaration der Variablen BaseFileName die folgenden Codezeilen hinzu: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Get pvslog file FileReference OutputFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".pvslog"); FileItem OutputFileItem = FileItem.GetItemByFileReference(OutputFileLocation); if (ApplicationSettings.IncrementalAnalysis &amp;&amp; OutputFileItem.Exists) { // Get object file FileReference ObjectFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".obj"); FileItem ObjectFileItem = FileItem.GetItemByFileReference(ObjectFileLocation); if (ObjectFileItem.Exists &amp;&amp; (ObjectFileItem.LastWriteTimeUtc &lt; OutputFileItem.LastWriteTimeUtc)) { continue; } }</span></span></code> </pre> <br>  Entfernen Sie dann die vorherigen Deklarationen der Variablen OutputFileLocation und OutputFileItem. <br><br>  Beim Erstellen des UE-Projekts wird f√ºr jede .cpp-Quelldatei eine Objekt-OBJ-Datei generiert.  Bei dieser inkrementellen Analyse geht es darum, nur die CPP-Quelldateien zu √ºberpr√ºfen, f√ºr die das Erstellungs- / √Ñnderungsdatum der Objektdatei nach dem der Pvslog-Berichtsdatei liegt.  F√ºr jede Quelldatei wird eine separate .pvslog-Datei generiert. In Zukunft werden alle .pvslog-Dateien in einem endg√ºltigen .pvslog zusammengef√ºhrt.  Wenn Sie die obigen √Ñnderungen vorgenommen haben, erstellen Sie UBT und kopieren Sie die neu erstellte Bin√§rdatei an den Speicherort des urspr√ºnglichen UBT. <br><br>  Jetzt ist alles fertig. Beim Erstellen Ihres UE-Projekts erhalten Sie ein Berichtsprotokoll, das die Ergebnisse des Analysators nur f√ºr kompilierte Quelldateien enth√§lt.  Beachten Sie, dass eine solche √Ñnderung von UBT nur dann sinnvoll ist, wenn Sie die Datei Build.bat so ge√§ndert haben, dass die Cache-Datei ActionHistory.bin entfernt wurde (eine detaillierte Beschreibung dieses Szenarios wurde oben angegeben).  Um den inkrementellen Analysemodus zu deaktivieren, installieren Sie einfach die oben im Modus "Deaktiviert" beschriebene Option "Analyse nach dem Erstellen (nur ge√§nderte Dateien)". <br><br>  Ich m√∂chte Sie noch einmal daran erinnern: Wenn Sie das Flag -StaticAnalyzer = PVSStudio im Feld Build Command Line in den Einstellungen des Projekts 'Eigenschaften | Konfigurationseigenschaften | NMake' installiert haben, muss es in diesem Szenario entfernt werden. <br><br><h2>  √ñffnen der Analyzer-Berichtsdatei und deren automatisches Laden in Visual Studio </h2><br>  Standardm√§√üig wird bei der Durchf√ºhrung der UE-Projektanalyse keine Berichtsdatei im PVS-Studio-Fenster in VS angezeigt.  Es wird nur relativ zum Projektordner unter folgendem Pfad gespeichert: \ YouProject \ Saved \ PVS-Studio \.  Um diese Datei in VS zu √∂ffnen, m√ºssen Sie den folgenden Befehl verwenden: 'PVS-Studio | √ñffnen / Speichern | Analysebericht √∂ffnen' und den Dateityp 'Nicht analysierte Ausgabe' ausw√§hlen.  Sie k√∂nnen den Dateibericht auch im Programm C und C ++ Compiler Monitoring mit dem folgenden Befehl √∂ffnen: 'Datei | PVS-Studio-Protokoll √∂ffnen' und den Dateityp 'Nicht analysierte Ausgabe' ausw√§hlen. <br><br>  Es gibt eine weitere bequemere Option zum √ñffnen des Analyseberichtsprotokolls, n√§mlich das automatische Laden in VS.  Damit es nach Abschluss der Analyse automatisch in das PVS-Studio-Fenster in VS geladen wird, m√ºssen Sie die entsprechende Option aktivieren: 'PVS-Studio | Optionen | Spezifische Analyzer-Einstellungen | Speichern / Laden (Analyzer-Bericht) | AutoloadUnrealEngineLog' . <br><br><h2>  Laden Sie PVS-Studio herunter und testen Sie es </h2><br>  Als Autor dieses Artikels sowie als einer derjenigen, die direkt an der Implementierung und Unterst√ºtzung der Funktionen von PVS-Studio im Zusammenhang mit der Analyse von Projekten arbeiten, die auf der Basis der UE-Engine erstellt wurden, bin ich bereit, den Lesern zu helfen .  Wenn Sie Probleme mit der Verwendung von PVS-Studio mit Ihrem UE-Projekt haben oder nach dem Lesen dieses Artikels Fragen haben, w√ºrde ich mich freuen, mit Ihnen zu chatten.  Schreiben Sie an unseren Support, ich erhalte E-Mails zu UE und verwandten Themen.  Vielen Dank f√ºr Ihre Aufmerksamkeit. <br><br><h2>  Zus√§tzliche Links </h2><br><ol><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eine lang erwartete √úberpr√ºfung der unwirklichen Engine 4</a> .  (14. April 2014) </li><li>  Paul Eremeev, Svyatoslav Razmyslov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie das PVS-Studio-Team den Code der Unreal Engine verbesserte</a> .  (20. Juni 2015) </li><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Statische Analyse als Teil des Entwicklungsprozesses in Unreal Engine</a> .  (27. Juni 2017) </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de466477/">https://habr.com/ru/post/de466477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de466463/index.html">Wie wir einen Prototyp f√ºr eine Stop-Repair-Anwendung erstellt haben</a></li>
<li><a href="../de466465/index.html">Summ3r 0f h4ck 2019: Forschungsergebnisse</a></li>
<li><a href="../de466467/index.html">Unterst√ºtzung f√ºr anonyme JWT-Token in IdentityServer4 mithilfe von AnonymousIdentity</a></li>
<li><a href="../de466473/index.html">Wie wir ein IoT-System zur Steuerung des Solarenergieverbrauchs geschaffen haben</a></li>
<li><a href="../de466475/index.html">So verwandeln Sie Traffic mithilfe von Site-Benutzerdaten in Verk√§ufe</a></li>
<li><a href="../de466479/index.html">Verwenden von PVS-Studio beim √úberpr√ºfen von Unreal Engine-Projekten unter dem Windows-Betriebssystem</a></li>
<li><a href="../de466485/index.html">Elektroautos aus den 90ern. Teil 1. Br√ºder Citroen und Peugeot</a></li>
<li><a href="../de466489/index.html">Koreanische Ingenieure schlagen vor, Hololens als Alternative zu Office-Partitionen zu verwenden</a></li>
<li><a href="../de466491/index.html">Trainingsprojekt bei Godot - Pong (Teil 2) Erstellen und Aufstellen des Balls</a></li>
<li><a href="../de466493/index.html">Docker: Zum Starten. Achtung Bereitstellen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>