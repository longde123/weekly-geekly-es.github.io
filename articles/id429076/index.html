<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¬ ğŸ‘‰ğŸ¼ ğŸ§‘ Evolusi pencarian - cara membeli piano dalam tiga klik ğŸ‘¨ğŸ¼â€âœˆï¸ ğŸ”® ğŸˆ¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sebelumnya, di Avito, Anda dapat menemukan produk yang tepat menggunakan pemfilteran kata kunci atau navigasi pohon kategori. Metode ini, meskipun tam...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Evolusi pencarian - cara membeli piano dalam tiga klik</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/avito/blog/429076/"><p>  Sebelumnya, di Avito, Anda dapat menemukan produk yang tepat menggunakan pemfilteran kata kunci atau navigasi pohon kategori.  Metode ini, meskipun tampaknya akrab, tidak selalu nyaman - untuk menemukan produk atau layanan, perlu dilakukan sejumlah besar klik.  Lebih dari setahun yang lalu, kami mendapatkan relevansi, berkat pencarian yang menjadi lebih baik, dan sekarang lebih mudah dan lebih nyaman untuk menemukan produk atau layanan bahkan di halaman utama.  Dengan inovasi ini, barang-barang "sampah" yang tidak sesuai, tidak lagi menjadi masalah.  Dan ini hanyalah salah satu langkah untuk membuat pencarian Anda lebih baik.  Kami secara bertahap mengubah infrastruktur, yang memungkinkan kami untuk mengerjakan kualitas pencarian secara lebih intensif, meningkatkannya lebih cepat, dan meluncurkan fitur-fitur baru yang menguntungkan penjual dan pembeli di Avito. </p><br><p>  Dalam artikel ini saya akan memberi tahu Anda bagaimana pencarian di Avito telah berubah: di mana kami memulai dan bagaimana kami sekarang bergerak menuju peningkatan kehidupan pengguna kami, saya akan membagikan inovasi kami baik dalam produk maupun dalam pengisiannya - bagian teknis.  Tidak akan ada daging keras di sini, tapi saya harap Anda menikmatinya. </p><br><img src="https://habrastorage.org/webt/19/zx/he/19zxhesvegeiygbo4haapoe4mic.png"><a name="habracut"></a><br><p>  Beberapa catatan pengantar: Avito adalah layanan iklan paling populer di Rusia.  Kami memiliki lebih dari 450 ribu iklan setiap hari, dan jumlah pengunjung unik setiap bulan mencapai 35 juta, yang menghasilkan lebih dari 140 juta pencarian setiap hari. </p><br><h1 id="tipichnyy-scenariy-poiska-ranshe">  Skenario pencarian khas sebelumnya </h1><br><p>  Mari kita lihat contoh sederhana tentang bagaimana pencarian bekerja lebih dari setahun yang lalu.  Misalkan Anda membutuhkan piano (yah, mengapa tidak?).  Kami pergi ke halaman utama, kami mengetik "piano". </p><br><img src="https://habrastorage.org/webt/yh/jq/di/yhjqdiamdihyfnkermrcwkhwzpq.png"><br><p>  Dalam ekstradisi, Anda kemungkinan besar akan menerima penggerak, layanan transportasi piano atau yang serupa, tetapi bukan alat musik. </p><br><img src="https://habrastorage.org/webt/wy/dp/rm/wydprmf6to16xbqxq6mfkpfqlno.png"><br><p>  Ini terjadi karena kami akan mengurutkan berdasarkan tanggal penempatan - dan layanan ini paling sering ditempatkan. </p><br><img src="https://habrastorage.org/webt/bt/m8/rz/btm8rzqberfol38jrn2uln1ipju.jpeg"><br><p>  Untuk melihat piano, Anda perlu menentukan kategorinya.  Kami klik pada judul "Hobi dan Kenyamanan", turun pohon kategori ke "Alat Musik", lalu "Instrumen Keyboard". </p><br><img src="https://habrastorage.org/webt/d1/h2/oq/d1h2oqqqz5gv9snlihpiu51yzau.png"><br><img src="https://habrastorage.org/webt/be/c2/zf/bec2zflrha8wktusuudqo1w3o08.png"><br><p>  Dan hanya setelah itu kita melihat piano yang kita cari. </p><br><img src="https://habrastorage.org/webt/-c/wz/71/-cwz71ifodfnrcda86qj03u__5y.png"><br><p>  Ternyata, untuk menemukan iklan yang diinginkan, ada opsi berikut: </p><br><ul><li>  penyempurnaan kategori saat mencari dengan kata kunci, </li><li>  mengurutkan berdasarkan kesegaran dan harga, </li><li>  filter </li><li>  cari hanya dengan nama. </li></ul><br><h1 id="chto-izmenilos-blagodarya-relevantnosti">  Apa yang berubah karena relevansi </h1><br><p>  Karena relevansi, iklan yang tidak cocok sama sekali tidak lagi dimasukkan dalam penerbitan.  Sekarang, jika Anda mencari piano dari halaman utama, kemungkinan besar Anda tidak akan melihat layanan loader yang membantu Anda mengangkutnya, tetapi Anda akan segera melihat alat musik yang Anda inginkan.  Pada saat yang sama, penyortiran baru ditambahkan - "Secara default".  Ini dibentuk oleh dua indikator: relevansi iklan dengan kueri dan kesegaran teks. </p><br><img src="https://habrastorage.org/webt/oc/p_/ry/ocp_rycbztfxg1fdvec-3usu0cm.png"><br><p>  Di atas Anda melihat yang paling segar dari yang relevan. </p><br><img src="https://habrastorage.org/webt/cg/md/pq/cgmdpq3ogawjuoqf4cr66l17gr0.png"><br><p>  Di Avito, dengan biaya tambahan, Anda dapat menaikkan iklan.  Dan dengan diperkenalkannya relevansi, peningkatan gaji bekerja lebih efisien.  Mereka akan bekerja, pertama-tama, jika iklan Anda relevan dengan permintaan teks. </p><br><p>  Pengenalan relevansi tidak berarti bahwa kami sepenuhnya meninggalkan transisi ke pohon kategori.  Hanya untuk sebagian besar kasus, kami mengurangi jumlah klik ke iklan yang diinginkan ketika mencari dari halaman utama.  Jika Anda masih membutuhkan layanan transportasi, meskipun Anda baru saja mengetik "piano" dalam pencarian, buka pohon kategori dan Anda akan menemukan iklan ini.  Pencarian juga mulai bekerja lebih efisien dan dalam kategori, misalnya, "Barang-barang pribadi" dan "Peralatan rumah tangga". </p><br><h1 id="kak-nayti-nuzhnyy-tovar-v-tri-klika">  Cara menemukan produk yang tepat dalam tiga klik </h1><br><p>  Pencarian menjadi lebih nyaman bagi pengguna tidak hanya karena kualitas hasil pencarian.  Ada cara lain untuk memperbaikinya.  Salah satunya adalah meneruskan ke kategori.  Sebagai contoh, kami mencari Lamborghini Gayardo (ya, Anda suka bermain piano dan ingin mengendarai Lamborghini).  Untuk masuk ke kategori mobil model tertentu, Anda perlu membuat dua klik tambahan.  Dengan relevansi, kemungkinan besar Anda akan mendapatkan apa yang Anda inginkan. </p><br><img src="https://habrastorage.org/webt/vd/d0/-y/vdd0-ymtzuq15oeaxe_bdikffne.png"><br><p>  Tetapi ada metode tambahan yang akan segera melemparkan Anda ke dalam mobil.  Penerbitan akan dipersempit, mobil yang tepat akan dipilih di filter, dan Anda akan benar-benar menerima mobil dalam penerbitan. </p><br><img src="https://habrastorage.org/webt/xq/b_/7v/xqb_7v4xa6vmvo4rtt88h8yvttk.png"><br><img src="https://habrastorage.org/webt/vo/lk/yo/volkyo_aktkx5cemgpd9fvy2hp4.png"><br><p>  Cara lain adalah dengan memperluas tag.  Misalnya, ketika Anda memasukkan kata "jaket", Anda akan mendapatkan petunjuk. </p><br><img src="https://habrastorage.org/webt/mv/7q/si/mv7qsiygsxehsjbl0pkctnhykjo.png"><br><p>  Tangkapan layar di atas menunjukkan tip: jenis jaket - perempuan, laki-laki, perempuan, laki-laki.  Jika Anda mengklik "Untuk Anak Perempuan", Anda akan segera jatuh ke dalam kategori di mana filter yang sesuai akan dipilih.  Satu set tag tambahan yang diperluas juga akan muncul di sini: jaket musim dingin, kulit, baru dan sebagainya.  Jika Anda turun pohon kategori secara manual ke produk yang diinginkan, maka Anda perlu melakukan lebih banyak tindakan. </p><br><img src="https://habrastorage.org/webt/4k/hq/vg/4khqvgdpjs1sgxhb_icjrxl__v0.png"><br><h1 id="v-chem-raznica-mezhdu-poiskom-i-filtrami">  Apa perbedaan antara pencarian dan filter </h1><br><p>  Ketika saya berbicara di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">RIT ++</a> , audiens memiliki pertanyaan: apa perbedaan antara pencarian teks dan filter?  Semuanya cukup sederhana.  Anda juga dapat menemukan iklan yang diinginkan tanpa permintaan teks dengan turun ke pohon kategori.  Dalam hal ini, pencarian masih akan menemukan barang dan jasa, bukan oleh teks yang diberikan, tetapi oleh serangkaian parameter yang dilewatkan dari filter yang sesuai dari kategori yang dipilih. </p><br><p>  Setiap kategori memiliki set filternya sendiri.  Misalnya, dalam kategori "Mobil" - beberapa filter, dalam kategori "Hal-hal pribadi" - filter lainnya.  Yaitu, filter terikat secara kaku ke suatu kategori. </p><br><h1 id="razmeschenie-obyavleniya-za-dve-minuty">  Penempatan pengumuman dalam dua menit </h1><br><p>  Sebuah inovasi penting telah muncul untuk penjual yang mereka rasakan ketika mengirimkan iklan mereka.  Jika iklan Anda tidak mengandung "dilarang" atau bukan duplikat - iklan bagus yang biasa - Anda akan segera melihatnya dalam penerbitan.  Sebenarnya penundaan ini berlangsung sekitar dua menit, tetapi dalam kasus yang jarang terjadi, dapat diperpanjang hingga 30 menit.  Sebelumnya, sebuah iklan selalu muncul di situs hanya setelah setengah jam. </p><br><h1 id="avito-pomoschnik">  Asisten Avito </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Avito Helper</a> adalah ekstensi untuk Chrome yang menampilkan harga produk serupa di Avito di situs pihak ketiga.  Dalam ekstensi, Anda dapat membandingkan harga di banyak toko online dengan harga untuk Avito, atau cukup mencari barang dan layanan yang diperlukan dalam layanan kami, tanpa langsung ke situs web atau aplikasi.  Kami dapat menerapkan "Asisten", termasuk berkat perubahan infrastruktur baru. </p><br><img src="https://habrastorage.org/webt/d5/hv/cw/d5hvcwkpl7-npnqilrei9wfcz80.png"><br><h1 id="arhitektura">  Arsitektur </h1><br><h2 id="pilim-monolit">  Menggergaji monolit </h2><br><p>  Avito memiliki monolit dalam PHP.  Setahun yang lalu, semua fungsi pencarian yang berfungsi di Avito ada di monolith ini.  Pencarian di monolith bekerja dengan empat platform: Android, iOS, versi mobile di browser dan desktop.  Untuk memberikan output, query SQL yang sesuai dihasilkan dalam Sphinx di dalam kode ini, pemrosesan sedang berlangsung, dan output dikirim dalam format JSON atau HTML.  Kemudian pengguna melihat apa yang mereka cari. </p><br><img src="https://habrastorage.org/webt/cw/l_/rn/cwl_rnema8zlhzfu4gnrrgrz1jq.jpeg"><br><h2 id="chto-u-nas-seychas">  Apa yang kita miliki sekarang </h2><br><p>  Jika Anda menerapkan fitur baru, sangat sulit untuk diintegrasikan dengan monolith ini.  Karena itu, kami memutuskan untuk mengembangkan layanan pencarian, yang kami sebut "Dicari."  Sekarang monolit menuju ke layanan pencarian ini, dan layanan tersebut menuju ke Sphinx. </p><br><img src="https://habrastorage.org/webt/wk/rf/up/wkrfupfza_kexfbo_yiafhq-lz4.jpeg"><br><h2 id="prichiny-sozdaniya-poiskovogo-servisa">  Alasan untuk membuat layanan pencarian </h2><br><p>  Saat mengembangkan layanan, Anda selalu perlu memahami mengapa Anda melakukan ini.  Plus jelas pertama adalah penghapusan logika tingkat rendah.  Dalam kasus kami, ini menyembunyikan dapur untuk memproses permintaan SphinxQL.  Selain itu, kami dapat lebih mudah menyediakan fungsionalitas pencarian ke sistem pihak ketiga. </p><br><p>  Eksekusi query tidak sinkron.  Keuntungan ini cukup jelas dan tergantung pada implementasinya, satu atau lain keberhasilan dapat dicapai.  Layanan kami diimplementasikan pada Golang, dan ada fungsi yang dapat diparalelkan - tiga permintaan di Sphinx, yang memberikan hasil yang baik. </p><br><p>  Penyebaran cepat.  Kami telah mengidentifikasi fungsional terpisah dengan kode lebih sedikit, tes tambahan (monolith memiliki banyak tes, tidak hanya fungsi pencarian), dan lebih mudah untuk diluncurkan.  Yang paling penting, karena pendekatan yang berhasil dalam implementasi layanan ini, kami dapat mengurangi hal-hal menarik dan menerapkan algoritma peringkat lanjutan - untuk melakukan pemrosesan yang agak rumit yang tidak dapat kami lakukan dalam monolit.  Ini memberi kami dasar yang sangat baik untuk bereksperimen dengan kualitas pencarian. </p><br><p>  Sebagai bonus, kami memiliki kesempatan untuk beralih dari Sphinx ke Elastic, karena logika level rendah sekarang disembunyikan. </p><br><p>  Diagram ini sudah menunjukkan kasus ketika ada monolit, layanan "Dicari" dan layanan pihak ketiga "Avito Assistant". </p><br><img src="https://habrastorage.org/webt/ed/3s/ws/ed3swsgnqulgqx9lokpg6l4po8g.jpeg"><br><h2 id="kak-rabotaet-poiskovyy-servis">  Bagaimana cara kerja layanan pencarian? </h2><br><p>  Ini memiliki seperangkat agregator.  Setiap agregator melakukan logika bisnis tertentu terkait dengan pemrosesan penerbitan.  Ia dapat membentuk masalah ini dengan cara tertentu. </p><br><p>  Permintaan tiba di penjadwal.  Penjadwal memilih agregator sesuai dengan kriteria kueri dalam hal parameternya (atau jika agregator yang diinginkan ditentukan dalam permintaan itu sendiri).  Agregator pergi ke Sphinx.  Setelah menerima respons dari Sphinx, itu menghasilkan output dan memberikan jawaban kepada klien. </p><br><img src="https://habrastorage.org/webt/f9/56/lj/f956ljoot6y6pas3k94vkb8bo3k.gif"><br><p>  Dalam hal ini, permintaan berada di luar, bukan dari cloud tempat layanan pencarian kami bekerja.  Tetapi opsi lain juga dimungkinkan: beberapa layanan kami yang lain, di dalam cloud, misalnya, Avito Assistant, beralih ke layanan pencarian.  Permintaan ini sudah masuk ke agregator lain - ada logika bisnis lain.  Begini cara kerjanya: </p><br><img src="https://habrastorage.org/webt/vb/gb/yu/vbgbyukk8a5yynkv5kupow23s6y.gif"><br><h2 id="kak-rabotaet-asinhronnoe-vypolnenie-zaprosov-na-agregatore">  Bagaimana eksekusi query tidak sinkron pada agregator bekerja </h2><br><p>  Agregator terdiri dari beberapa profil.  Sebuah profil, secara kasar, adalah entitas di mana Anda bisa mendapatkan pengumuman dari beberapa jenis atau dengan cara tertentu.  Misalnya, ini dapat dijelaskan melalui analogi: ada "Premium", "VIP" dan iklan reguler di Avito.  Agregator menerima permintaan dari penjadwal, sementara permintaan paralel dijalankan untuk sekumpulan profil yang dikenal dalam agregator.  Profil memiliki driver di dalamnya yang secara fisik mengakses level yang mendasarinya, dalam hal ini di Sphinx, tetapi dapat berupa sumber data lainnya </p><br><img src="https://habrastorage.org/webt/la/np/ic/lanpiclts0oo-uhfktoxszkxl3g.jpeg"><br><p>  Agregator dapat dengan mudah memberikan scheduler hasil query ke profil, dan itu juga dapat melakukan tindakan yang lebih kompleks, misalnya, mencampur hasil ini menggunakan satu atau algoritma lain. </p><br><img src="https://habrastorage.org/webt/zy/_o/ji/zy_ojiffyfpbt4h9vmkcyciqsuy.jpeg"><br><h2 id="hranenie-poiskovogo-indeksa">  Penyimpanan indeks pencarian </h2><br><p>  Karena kami menggunakan Kubernetes di arsitektur, di RIT ++ saya ditanya pertanyaan tentang menyimpan indeks pencarian - apakah disimpan di Kubernetes?  Tidak, kami memiliki Sphinx yang hidup di mesin fisik.  Di Kubernetes, kami menggunakan layanan pencarian yang memproses logika pencarian.  Cloud juga berisi indeks pencarian sampel untuk lingkungan pengembangan tempat pengujian dijalankan, tetapi tidak diinginkan untuk menempatkan indeks pertempuran di sana, karena layanan yang bekerja di Kubernetes, pertama-tama, layanan tanpa kewarganegaraan. </p><br><h2 id="nagruzka-na-poiskovyy-servis">  Cari Beban Layanan </h2><br><p>  Sekarang layanan ini dalam pertempuran, melayani 100% dari beban dengan beberapa pengecualian.  Beban yang dipegangnya sekitar 200 krpm.  Keterlambatan: median - hingga 17 ms, 95 persentil - hingga 120 ms, 99 persentil - hingga 320 ms. </p><br><img src="https://habrastorage.org/webt/bt/46/ny/bt46nyowpcuqysikxjcpp2weov8.png"><br><img src="https://habrastorage.org/webt/bn/fj/hx/bnfjhx1hqse5b4lfok8cgv3ez04.png"><br><h2 id="itogo-po-poiskovomu-servisu">  Layanan Pencarian Total </h2><br><p>  Layanan pencarian ditulis dalam Golang, digunakan untuk Kubernetes, agregator secara asinkron bekerja dengan beberapa profil.  Profil berfungsi dengan driver yang ditentukan, driver mengakses sumber data yang ditentukan, misalnya, Sphinx.  Jumlah permintaan yang dilayani oleh layanan kami hingga 200 krpm saat ini.  Keterlambatan: median - hingga 17 ms, 95 persentil - hingga 120 ms, 99 persentil - hingga 320 ms. </p><br><h2 id="vnedrenie-servisa-v-rabochuyu-sistemu">  Implementasi layanan dalam sistem kerja </h2><br><p>  Masalah fungsi ganda cukup jelas, kita harus mendukung dua basis kode yang harus melakukan tugas yang sama.  Kita perlu mundur.  Kami menyebutnya "Sedotan" - kami ingat tentang "sedotan".  Selain itu, kita perlu kontrol lalu lintas, itu diharapkan cepat, melalui dashboard. </p><br><h2 id="kak-rabotaet-solomka">  Bagaimana "sedotan" </h2><br><p>  Permintaan pencarian datang ke "Straw", yang bekerja di dalam monolith dan dapat membuat panggilan lebih lanjut baik untuk pencarian baru atau lama.  Dia membuat panggilan ke pencarian baru, dia memenuhinya, dan jika berhasil, kita hanya mendapatkan hasil dari pencarian baru. </p><br><img src="https://habrastorage.org/webt/y1/xa/wm/y1xawmqms1bxqtotevfsl7bfatu.gif"><br><p>  Ada situasi ketika beberapa permintaan untuk layanan pencarian gagal: misalnya, dan sampai beberapa jenis fungsi diimplementasikan di dalam layanan pencarian.  Maka kita harus berjanji permintaan semacam itu - "The Straw" akan menjalankannya dalam pencarian lama.  Pencarian lama dari monolith akan beralih ke Sphinx, dan jawabannya akan jatuh ke klien.  Klien tidak akan merasakan apa pun. </p><br><img src="https://habrastorage.org/webt/cr/zu/za/crzuzaufpka6dvpjsjy_m5qq0jc.gif"><br><p>  Skema yang cukup andal, dan selalu menarik untuk melihat apa yang terjadi dalam praktik.  Departemen Arsitektur Avito terus meningkatkan cloud kami, menyetel, menjadikannya lebih andal dan produktif.  Pada tahap tertentu, ada masalah ketika melayani salah satu node dengan intensitas yang cukup tinggi, kesalahan berasal dari monolith (100 kesalahan per detik). </p><br><img src="https://habrastorage.org/webt/tu/zv/wm/tuzvwmgmpzid5objz-4bmvl157y.png"><br><p>  Pada saat yang sama, penundaan layanan meningkat tajam - pada gambar di bawah ini Anda dapat melihat puncak. </p><br><img src="https://habrastorage.org/webt/pq/of/z5/pqofz5fynz2bsibynewd3gro2cw.png"><br><p>  "Jerami" berhasil situasi ini sangat, dan kesalahan HTTP yang dihasilkan berada pada tingkat yang sama - unit kesalahan untuk seluruh Avito.  Pengunjung kami tidak melihat apa pun. </p><br><img src="https://habrastorage.org/webt/wx/ya/ij/wxyaij2xka5dhghoa74ovncverq.png"><br><h2 id="avtomatizaciya-eksperimentov">  Otomasi Eksperimen </h2><br><p>  Kami ingin pencarian berkembang dengan cepat, dan meluncurkan fitur baru ke dalamnya lebih mudah.  Untuk ini, infrastruktur yang tepat diperlukan.  Kami telah mengonfigurasi otomatisasi pengujian A / B.  Dengan menggunakan dasbor, kita dapat memulai eksperimen baru, mengonfigurasinya berdasarkan inovasi yang ditambahkan, dan, karenanya, menjalankan eksperimen tanpa menggulirkan monolith. </p><br><p>  Pada kondisi awal, saat tidak ada satu percobaan pun yang diluncurkan, semua pengunjung melihat fungsi pencarian yang biasa. </p><br><img src="https://habrastorage.org/webt/go/rz/qp/gorzqpca1whra33-df1c6ss18yk.jpeg"><br><p>  Dalam eksperimen yang khas, pengguna dibagi menjadi beberapa kelompok.  Grup kontrol - dengan fungsi yang biasa untuk pengunjung kami.  Ada beberapa kelompok uji - dengan inovasi.  Saat kami perlu membuat eksperimen baru, di layanan pencarian kami menerapkan fungsi pencarian baru (menambahkan agregator baru) dan melalui dasbor kami mengatur percobaan dengan grup yang diperlukan, menghubungkannya dengan agregator baru. </p><br><p>  Saat menganalisis eksperimen, kami membandingkan perilaku pengunjung dalam kelompok kontrol dengan yang diuji dan, berdasarkan ini, menarik kesimpulan tentang keberhasilan percobaan. </p><br><img src="https://habrastorage.org/webt/gd/g5/r2/gdg5r20saoh4inq46d5jggjcxee.gif"><br><p>  Misalkan kita telah mengembangkan formula peringkat baru.  Apa yang perlu kita lakukan untuk bereksperimen dengannya? </p><br><ol><li>  Di layanan pencarian, gulir agregator yang sesuai (biarlah "Aggregator 2"). </li><li>  Buat percobaan melalui dasbor dan hubungkan salah satu grup dalam percobaan ini dengan agregator ini. </li><li>  Sekarang, jika sebuah pertanyaan datang dalam pencarian yang termasuk dalam kelompok uji, ia pergi ke layanan pencarian di "Aggregator 2". </li></ol><br><p>  Kami dapat terus membuat eksperimen baru dan mengaitkan grup uji mereka dengan agregator baru. </p><br><h1 id="itogo-po-infrastrukture-poiska">  Infrastruktur Pencarian Total </h1><br><p>  Ada sekelompok server Sphinx 3. Ia menampung 13 krps kueri SphinxQL, dan memiliki lebih dari 45 juta iklan aktif. </p><br><p>  Sphinx 3.0 stabil dan menyenangkan dengan kinerjanya.  Omong-omong, binari berada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dalam domain publik</a> .  Selain itu, berkat Avito, fitur-fitur baru difilmkan dalam Sphinx 3, misalnya, pengoperasian produk skalar vektor, dan bug yang ditemukan diperbaiki. </p><br><p>  Kami menggunakan arsitektur layanan.  Kami memiliki layanan pencarian "Iskalo" dan layanan "Avito Assistant".  Sebagian dari fungsi tetap ada di monolith, tetapi kami terus berupaya memotongnya. </p><br><h1 id="vyvody">  Kesimpulan </h1><br><p>  Selama setahun terakhir, sistem pengembangan fungsionalitas pencarian lanjutan telah diterima.  Kami mendapat kesempatan untuk melakukan eksperimen cepat dan fleksibel.  Dan sekarang pencarian untuk pengguna menjadi lebih mudah, lebih cepat dan lebih baik membantu menyelesaikan masalah mereka. </p><br><h1 id="chto-dalshe">  Apa selanjutnya </h1><br><p>  Selanjutnya, kami akan terus menghapus dari monolith apa yang tersisa: rendering, filter.  Kami akan bekerja untuk meningkatkan kualitas pencarian, terus menyenangkan pengunjung kami.  Semoga kamu juga. </p><br><p>  Jika Anda memiliki pertanyaan tentang pekerjaan pencarian kami, kami ingin mengetahui lebih banyak detail teknis, tulis di komentar.  Saya akan menjawab dengan senang hati.  Ngomong-ngomong, baru-baru ini, Andrey Drozdov berbicara di Highload ++ 2018 dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">laporan tentang optimasi multi-kriteria dari hasil pencarian</a> , inilah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">presentasinya</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id429076/">https://habr.com/ru/post/id429076/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id429066/index.html">Bagaimana kru pesawat mempersiapkan keberangkatan</a></li>
<li><a href="../id429068/index.html">Pos yang sangat korporat: dibuka di Moskow atau mengapa 10 dan 11 November adalah hari yang baik untuk membeli elektronik</a></li>
<li><a href="../id429070/index.html">Linux tidak dapat dimuat di MacBook baru karena chip T2</a></li>
<li><a href="../id429072/index.html">Mengapa Kodak meninggal dan Fujifilm berkembang: kisah dua pembuat film</a></li>
<li><a href="../id429074/index.html">Perbuatan Baik untuk Uang Google: Tantangan Dampak AI Baru</a></li>
<li><a href="../id429078/index.html">Cara membuat seni prosedural dalam kurang dari 100 baris kode</a></li>
<li><a href="../id429082/index.html">Thailand tanpa stereotip</a></li>
<li><a href="../id429084/index.html">Kehidupan kedua dari oven listrik "Kharkov"</a></li>
<li><a href="../id429086/index.html">Pesta bir cadangan</a></li>
<li><a href="../id429088/index.html">Menjalankan Permintaan GraphQL dengan OdataToEntity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>