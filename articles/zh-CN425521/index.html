<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‚ğŸ½ ğŸ™†ğŸ» ğŸ¯ JavaScript ES5ä¸­çš„å—ä¿æŠ¤æ–¹æ³• ğŸŒ€ ğŸ ğŸ¤¡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å…³äºJavaScriptä¸­çš„å¯¹è±¡æ¨¡å‹ï¼Œå·²ç»æœ‰å¾ˆå¤šå¾ˆæ£’çš„æ–‡ç« ã€‚ å…³äºåœ¨Internetä¸Šåˆ›å»ºç§äººç­çº§æˆå‘˜çš„å„ç§æ–¹æ³•å……æ»¡äº†å€¼å¾—æè¿°ã€‚ ä½†æ˜¯å…³äºå—ä¿æŠ¤çš„æ–¹æ³•-æ•°æ®å¾ˆå°‘ã€‚ æˆ‘æƒ³å¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œå¹¶å‘Šè¯‰æ‚¨å¦‚ä½•åœ¨æ²¡æœ‰JavaScriptçº¯ECMAScript 5åº“çš„æƒ…å†µä¸‹åˆ›å»ºå—ä¿æŠ¤çš„æ–¹æ³•ã€‚ 

 åœ¨æœ¬æ–‡ä¸­ï¼š 


...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JavaScript ES5ä¸­çš„å—ä¿æŠ¤æ–¹æ³•</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425521/"> å…³äºJavaScriptä¸­çš„å¯¹è±¡æ¨¡å‹ï¼Œå·²ç»æœ‰å¾ˆå¤šå¾ˆæ£’çš„æ–‡ç« ã€‚ å…³äºåœ¨Internetä¸Šåˆ›å»ºç§äººç­çº§æˆå‘˜çš„å„ç§æ–¹æ³•å……æ»¡äº†å€¼å¾—æè¿°ã€‚ ä½†æ˜¯å…³äºå—ä¿æŠ¤çš„æ–¹æ³•-æ•°æ®å¾ˆå°‘ã€‚ æˆ‘æƒ³å¡«è¡¥è¿™ä¸€ç©ºç™½ï¼Œå¹¶å‘Šè¯‰æ‚¨å¦‚ä½•åœ¨æ²¡æœ‰JavaScriptçº¯ECMAScript 5åº“çš„æƒ…å†µä¸‹åˆ›å»ºå—ä¿æŠ¤çš„æ–¹æ³•ã€‚ <br><br> åœ¨æœ¬æ–‡ä¸­ï¼š <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸ºä»€ä¹ˆéœ€è¦å—ä¿æŠ¤çš„ç­çº§æˆå‘˜</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‚¨éœ€è¦äº†è§£æ‰€ä»‹ç»çš„æ–¹æ³•</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŠ©æ‰‹ç±»ProtectedError</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å£°æ˜ä¸ºå‡½æ•°çš„ç±»çš„å—ä¿æŠ¤æˆå‘˜ï¼ˆæ–¹æ³•å’Œå±æ€§ï¼‰çš„å®ç°ï¼ˆECMAScript 5ï¼‰</a> </li></ul><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥åˆ°å¸¦æœ‰æºä»£ç å’Œæµ‹è¯•çš„git-hubå­˜å‚¨åº“ã€‚</a> <a name="habracut"></a><br><br><h2> ä¸ºä»€ä¹ˆéœ€è¦å—ä¿æŠ¤çš„ç­çº§æˆå‘˜ </h2><br> ç®€è€Œè¨€ä¹‹ <br><br><ul><li> å¯ä»¥æ›´è½»æ¾åœ°äº†è§£è¯¾ç¨‹çš„æ“ä½œå¹¶æŸ¥æ‰¾å…¶ä¸­çš„é”™è¯¯ã€‚  ï¼ˆæ‚¨å¯ä»¥ç«‹å³çœ‹åˆ°åœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨äº†ç±»æˆå‘˜ã€‚å¦‚æœæ˜¯ç§æœ‰çš„ï¼Œåˆ™åªéœ€è¦åˆ†æè¯¥ç±»ï¼Œå¦‚æœæ˜¯å—ä¿æŠ¤çš„ï¼Œåˆ™åªéœ€åˆ†ææ­¤ç±»å’Œæ´¾ç”Ÿç±»ã€‚ï¼‰ </li><li> æ›´å®¹æ˜“ç®¡ç†å˜æ›´ã€‚  ï¼ˆä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åˆ é™¤ç§äººæˆå‘˜ï¼Œè€Œä¸å¿…æ‹…å¿ƒå¯ç¼–è¾‘ç±»ä¹‹å¤–çš„å†…å®¹ä¼šä¸­æ–­ã€‚ï¼‰ </li><li>é”™è¯¯è·Ÿè¸ªå™¨ä¸­çš„åº”ç”¨ç¨‹åºæ•°é‡å‡å°‘äº†ï¼Œå› ä¸º åº“æˆ–æ§ä»¶çš„ç”¨æˆ·å¯ä»¥â€œç¼åˆ¶â€æˆ‘ä»¬çš„â€œç§æœ‰â€æˆå‘˜ï¼Œæˆ‘ä»¬å†³å®šåœ¨æ–°ç‰ˆæœ¬çš„ç±»ä¸­å°†å…¶åˆ é™¤ï¼Œæˆ–æ›´æ”¹å…¶å·¥ä½œé€»è¾‘ã€‚ </li><li> é€šå¸¸ï¼Œå—ä¿æŠ¤çš„ç±»æˆå‘˜æ˜¯ä¸€ç§è®¾è®¡å·¥å…·ã€‚ æ–¹ä¾¿å¹¶ç»è¿‡è‰¯å¥½æµ‹è¯•æ˜¯å¾ˆå¥½çš„ã€‚ </li></ul><br> è®©æˆ‘æé†’æ‚¨ï¼Œå—ä¿æŠ¤æˆå‘˜çš„ä¸»è¦æ€æƒ³æ˜¯å‘ç±»å®ä¾‹çš„ç”¨æˆ·éšè—æ–¹æ³•å’Œå±æ€§ï¼Œä½†åŒæ—¶å…è®¸æ´¾ç”Ÿç±»å¯ä»¥è®¿é—®å®ƒä»¬ã€‚ <br><br> ä½¿ç”¨TypeScriptä¸å…è®¸è°ƒç”¨å—ä¿æŠ¤çš„æ–¹æ³•ï¼Œä½†æ˜¯ï¼Œä½¿ç”¨JavaScriptç¼–è¯‘åï¼Œæ‰€æœ‰ç§æœ‰æˆå‘˜å’Œå—ä¿æŠ¤æˆå‘˜éƒ½å°†å˜ä¸ºå…¬å…±æˆå‘˜ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªæ§ä»¶æˆ–åº“ï¼Œç”¨æˆ·å¯ä»¥å°†å…¶å®‰è£…åœ¨å…¶ç«™ç‚¹æˆ–åº”ç”¨ç¨‹åºä¸Šã€‚ è¿™äº›ç”¨æˆ·å°†èƒ½å¤Ÿå¯¹å—ä¿æŠ¤çš„æˆå‘˜æ‰§è¡Œä»»ä½•ä»–ä»¬æƒ³åšçš„äº‹æƒ…ï¼Œä»è€Œç ´åäº†ç±»çš„å®Œæ•´æ€§ã€‚ ç»“æœï¼Œæˆ‘ä»¬çš„é”™è¯¯è·Ÿè¸ªå™¨çˆ†æ»¡äº†å…³äºæˆ‘ä»¬çš„åº“æˆ–æ§ä»¶æ— æ³•æ­£å¸¸å·¥ä½œçš„æŠ±æ€¨ã€‚ æˆ‘ä»¬èŠ±è´¹æ—¶é—´å’Œç²¾åŠ›è¿›è¡Œæ•´ç†- <i>â€œå¯¹è±¡åœ¨å®¢æˆ·ç«¯çš„è¿™ç§çŠ¶æ€ä¸‹æ˜¯å¦ä¼šè¿™æ ·ï¼Œä»è€Œå¯¼è‡´é”™è¯¯ï¼Ÿï¼â€</i>  ã€‚ å› æ­¤ï¼Œä¸ºäº†ä½¿æ‰€æœ‰äººçš„ç”Ÿæ´»æ›´åŠ è½»æ¾ï¼Œéœ€è¦è¿™ç§ä¿æŠ¤ï¼Œè€Œè¿™å°†æ— æ³•æ”¹å˜ç§äººå’Œå—ä¿æŠ¤é˜¶çº§æˆå‘˜çš„å«ä¹‰ã€‚ <br><br><h2> éœ€è¦ä»€ä¹ˆæ‰èƒ½ç†è§£æ‰€è®¨è®ºçš„æ–¹æ³• </h2><br> è¦äº†è§£å£°æ˜å—ä¿æŠ¤çš„ç±»æˆå‘˜çš„æ–¹æ³•ï¼Œæ‚¨éœ€è¦ä¸°å¯Œçš„çŸ¥è¯†ï¼š <br><br><ul><li>  JavaScriptä¸­çš„è®¾å¤‡ç±»å’Œå¯¹è±¡ã€‚ </li><li> åˆ›å»ºç§æœ‰ç±»æˆå‘˜çš„æ–¹æ³•ï¼ˆè‡³å°‘é€šè¿‡é—­åŒ…ï¼‰ã€‚ </li><li> æ–¹æ³•Object.definePropertyå’ŒObject.getOwnPropertyDescriptor </li></ul><br> å…³äºJavaScriptä¸­çš„è®¾å¤‡æ¨¡å‹ï¼Œä¾‹å¦‚ï¼Œæˆ‘å¯ä»¥æ¨èAndrey Akinshinï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">DreamWalker</a> ï¼‰ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=" class="user_link">æ’°å†™</a>çš„å‡ºè‰²æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œäº†è§£JSä¸­çš„OOP [Part No.1]â€</a> ã€‚ <br> å…³äºç§æœ‰è´¢äº§ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œåœ¨MDNç½‘ç«™ä¸Šæœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¤šè¾¾4ç§ä¸åŒçš„åˆ›å»ºç§æœ‰ç±»æˆå‘˜çš„æ–¹å¼</a>çš„ä¸é”™çš„ï¼Œç›¸å½“å®Œæ•´çš„æè¿°ã€‚ <br><br> è‡³äºObject.definePropertyæ–¹æ³•ï¼Œå®ƒå°†å…è®¸æˆ‘ä»¬åœ¨for-inå¾ªç¯ä»¥åŠåºåˆ—åŒ–ç®—æ³•ä¸­éšè—å±æ€§å’Œæ–¹æ³•ï¼š <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyClass</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(MyClass.prototype, <span class="hljs-string"><span class="hljs-string">'protectedNumber'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-attr"><span class="hljs-attr">enumerable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.publicNumber = <span class="hljs-number"><span class="hljs-number">25</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyClass(); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> prop <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> obj1){ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'property:'</span></span> prop); <span class="hljs-comment"><span class="hljs-comment">//prop     'protectedNumber' } console.log(JSON.stringify(obj1)); //  { 'publicNumber': 25 }</span></span></code> </pre> <br> å¿…é¡»æ‰§è¡Œè¿™ç§éšè—ï¼Œä½†è¿™å½“ç„¶æ˜¯ä¸å¤Ÿçš„ï¼Œå› ä¸º è¿˜æœ‰å¯èƒ½ç›´æ¥è°ƒç”¨æ–¹æ³•/å±æ€§ï¼š <br><br><pre> <code class="javascript hljs"> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(obj1.protectedNumber); <span class="hljs-comment"><span class="hljs-comment">//  12.</span></span></code> </pre><br><h2> åŠ©æ‰‹ç±»ProtectedError </h2><br> é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ProtectedErrorç±»ï¼Œè¯¥ç±»ç»§æ‰¿è‡ªErrorï¼Œå¦‚æœæ— æ³•è®¿é—®å—ä¿æŠ¤çš„æ–¹æ³•æˆ–å±æ€§ï¼Œåˆ™å°†æŠ›å‡ºè¯¥ç±»ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProtectedError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.message = <span class="hljs-string"><span class="hljs-string">"Encapsulation error, the object member you are trying to address is protected."</span></span>; } ProtectedError.prototype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(); ProtectedError.prototype.constructor = ProtectedError;</code> </pre><br><h2> åœ¨ES5ä¸­å®æ–½å—ä¿æŠ¤çš„ç­çº§æˆå‘˜ </h2><br> ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰äº†ProtectedErrorç±»ï¼Œå¹¶ä¸”æˆ‘ä»¬äº†è§£äº†Object.definePropertyä½¿ç”¨å¯æšä¸¾çš„å€¼æ˜¯ä»€ä¹ˆï¼šfalseï¼Œè®©æˆ‘ä»¬åˆ†æä¸€ä¸ªåŸºç±»çš„åˆ›å»ºï¼Œè¯¥åŸºç±»å¸Œæœ›ä¸å…¶æ‰€æœ‰æ´¾ç”Ÿç±»å…±äº«protectedMethodæ–¹æ³•ï¼Œä½†å¯¹å…¶ä»–æ‰€æœ‰äººéšè—å®ƒï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BaseClass</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> BaseClass)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseClass(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   ,        /** @summary       */ function checkAccess() { if (!(this instanceof BaseClass)) throw new ProtectedError(); if (this.constructor === BaseClass) throw new ProtectedError() } Object.defineProperty(_self, 'protectedMethod', { enumerable: false, //    for-in  configurable:false, //     value: function(){ //   , ,          Base,     checkAccess.call(this); //  . protectedMethod(); } }); function protectedMethod(){ //       , //       this,   _self return 'example value'; } this.method = function (){ protectedMethod(); //          BaseClass //this.protectedMethod(); //   , ..      ProtectedError } }</span></span></code> </pre><br><h3>  BaseClassç±»æ„é€ å‡½æ•°çš„æè¿° </h3><br> æ”¯ç¥¨å¯èƒ½ä¼šè®©æ‚¨æ„Ÿåˆ°å›°æƒ‘ï¼š <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> BaseClass)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseClass();</code> </pre> è¯¥æµ‹è¯•æ˜¯â€œä¸šä½™â€ã€‚ æ‚¨å¯ä»¥åˆ é™¤å®ƒï¼›å®ƒä¸å—ä¿æŠ¤çš„æ–¹æ³•æ— å…³ã€‚ ä½†æ˜¯ï¼Œæˆ‘ä¸ªäººå°†å…¶ä¿ç•™åœ¨ä»£ç ä¸­ï¼Œå› ä¸º åœ¨ç±»å®ä¾‹æœªæ­£ç¡®åˆ›å»ºçš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ æ²¡æœ‰å…³é”®å­—newã€‚ ä¾‹å¦‚ï¼Œåƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> obj1 = BaseClass(); <span class="hljs-comment"><span class="hljs-comment">//  : var obj2 = BaseClass.call({});</span></span></code> </pre><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·æŒ‰ç…§æ‚¨çš„æ„æ„¿è¿›è¡Œæ“ä½œã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç”Ÿæˆé”™è¯¯ï¼š <br><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> BaseClass)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'Wrong instance creation. Maybe operator "new" was forgotten'</span></span>);</code> </pre><br> æˆ–è€…ï¼Œæ‚¨å¯ä»¥åƒåœ¨BaseClassä¸­é‚£æ ·ç®€å•åœ°æ­£ç¡®å®ä¾‹åŒ–ã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ–°å®ä¾‹ä¿å­˜åœ¨_selfå˜é‡ä¸­ï¼ˆä¸ºä»€ä¹ˆæˆ‘ä»¥åéœ€è¦å¯¹æ­¤è¿›è¡Œè§£é‡Šï¼‰ã€‚ <br><br><h3> åä¸ºprotectedMethodçš„å…¬å…±å±æ€§çš„æè¿° </h3><br> è¾“å…¥è¯¥æ–¹æ³•ï¼Œæˆ‘ä»¬å°†è°ƒç”¨è¢«è°ƒç”¨çš„ä¸Šä¸‹æ–‡æ£€æŸ¥ã€‚ æœ€å¥½ä½¿ç”¨å•ç‹¬çš„æ–¹æ³•ï¼ˆä¾‹å¦‚ï¼ŒcheckAccessï¼‰ç­¾å‡ºï¼Œå› ä¸º æ‰€æœ‰å—ä¿æŠ¤çš„æ–¹æ³•å’Œç±»çš„å±æ€§éƒ½éœ€è¦è¿›è¡Œç›¸åŒçš„æ£€æŸ¥ã€‚ å› æ­¤ï¼Œé¦–å…ˆï¼Œæ£€æŸ¥å¯¹æ­¤çš„è°ƒç”¨çš„ä¸Šä¸‹æ–‡ç±»å‹ã€‚ å¦‚æœå®ƒçš„ç±»å‹ä¸æ˜¯BaseClassï¼Œåˆ™è¯¥ç±»å‹æ—¢ä¸æ˜¯BaseClassæœ¬èº«ï¼Œä¹Ÿä¸æ˜¯å…¶æ´¾ç”Ÿç±»ã€‚ æˆ‘ä»¬ç¦æ­¢æ­¤ç±»ç”µè¯ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> BaseClass)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProtectedError();</code> </pre><br> æ€ä¹ˆä¼šè¿™æ · ä¾‹å¦‚ï¼Œåƒè¿™æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseClass(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> someObject = {}; b.protectedMethod.call(someObject); <span class="hljs-comment"><span class="hljs-comment">//   ,  protectedMethod this   someObject    , .. someObject instanceof BaseClass  </span></span></code> </pre><br> å¯¹äºæ´¾ç”Ÿç±»ï¼ŒBaseClassçš„æ­¤instanceçš„è¡¨è¾¾å¼å°†ä¸ºtrueã€‚ ä½†æ˜¯å¯¹äºBaseClasså®ä¾‹ï¼Œæ­¤BaseClassè¡¨è¾¾å¼çš„å®ä¾‹å°†ä¸ºtrueã€‚ å› æ­¤ï¼Œä¸ºäº†åŒºåˆ†BaseClassç±»çš„å®ä¾‹å’Œæ´¾ç”Ÿç±»çš„å®ä¾‹ï¼Œæˆ‘ä»¬æ£€æŸ¥æ„é€ å‡½æ•°ã€‚ å¦‚æœæ„é€ å‡½æ•°ä¸BaseClassç›¸åŒ¹é…ï¼Œåˆ™åœ¨BaseClasså®ä¾‹ä¸Šè°ƒç”¨æˆ‘ä»¬çš„protectedMethodï¼Œå°±åƒå¸¸è§„çš„å…¬å…±æ–¹æ³•ä¸€æ ·ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseClass(); b.protectedMethod();</code> </pre><br> æˆ‘ä»¬ç¦æ­¢æ­¤ç±»å‘¼å«ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constructor === BaseClass) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProtectedError();</code> </pre><br> æ¥ä¸‹æ¥æ˜¯protectedMethodå°é—­æ–¹æ³•çš„è°ƒç”¨ï¼Œè¯¥æ–¹æ³•å®é™…ä¸Šæ˜¯æˆ‘ä»¬ä¿æŠ¤çš„æ–¹æ³•ã€‚ åœ¨æ–¹æ³•å†…éƒ¨ï¼Œå¦‚æœæ‚¨éœ€è¦å¼•ç”¨BaseClassç±»çš„æˆå‘˜ï¼Œåˆ™å¯ä»¥ä½¿ç”¨_selfçš„å­˜å‚¨å®ä¾‹è¿›è¡Œæ­¤æ“ä½œã€‚ æ­£æ˜¯_selfè¢«åˆ›å»ºä¸ºå¯ä»¥ä»æ‰€æœ‰ç§æœ‰æ–¹æ³•/ç§æœ‰æ–¹æ³•è®¿é—®ç±»æˆå‘˜çš„ã€‚ å› æ­¤ï¼Œå¦‚æœæ‚¨ä¸éœ€è¦åœ¨å—ä¿æŠ¤çš„æ–¹æ³•æˆ–å±æ€§ä¸­è®¿é—®ç±»æˆå‘˜ï¼Œåˆ™ä¸èƒ½åˆ›å»º_selfå˜é‡ã€‚ <br><br><h3> åœ¨BaseClassç±»ä¸­è°ƒç”¨å—ä¿æŠ¤çš„æ–¹æ³• </h3><br> åœ¨BaseClassç±»å†…éƒ¨ï¼ŒprotectedMethodå¿…é¡»ä»…é€šè¿‡åç§°è®¿é—®ï¼Œè€Œä¸èƒ½é€šè¿‡æ­¤åç§°è®¿é—®ã€‚ å¦åˆ™ï¼Œåœ¨protectedMethodå†…éƒ¨ï¼Œæˆ‘ä»¬æ— æ³•åŒºåˆ†æ˜¯ä½œä¸ºå…¬å…±æ–¹æ³•è°ƒç”¨è¿˜æ˜¯ä»ç±»å†…éƒ¨è°ƒç”¨ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé—­åŒ…å¯ä»¥èŠ‚çœæˆ‘ä»¬çš„æ—¶é—´-protectedMethodçš„è¡Œä¸ºç±»ä¼¼äºå¸¸è§„çš„ç§æœ‰æ–¹æ³•ï¼Œåœ¨ç±»å†…éƒ¨æ˜¯å°é—­çš„ï¼Œå¹¶ä¸”ä»…åœ¨BaseClasså‡½æ•°çš„èŒƒå›´å†…å¯è§ã€‚ <br><br><h3>  DerivedClassæ´¾ç”Ÿç±»è¯´æ˜ </h3><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹æ´¾ç”Ÿç±»ï¼Œä»¥åŠå¦‚ä½•ä½¿å®ƒå¯è¢«åŸºç±»çš„å—ä¿æŠ¤æ–¹æ³•è®¿é—®ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DerivedClass</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _base = { <span class="hljs-attr"><span class="hljs-attr">protectedMethod</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.protectedMethod.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) }; <span class="hljs-comment"><span class="hljs-comment">/** @summary       */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAccess</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constructor === DerivedClass) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProtectedError(); } <span class="hljs-comment"><span class="hljs-comment">//     Object.defineProperty(this, 'protectedMethod', { enumerable: false, // ..       this configurable: false,//         for-in  //      value: function(){ checkAccess.call(_self); return _base.protectedMethod(); } }); //        this.someMethod = function(){ console.log(_base.protectedMethod()); } } DerivedClass.prototype = new BaseClass(); Object.defineProperty(DerivedClass.prototype, 'constructor', { value : DerivedClass, configurable: false });</span></span></code> </pre><br><h3> æ´¾ç”Ÿç±»æ„é€ å‡½æ•°æè¿° </h3><br> åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª_baseå¯¹è±¡ï¼Œåœ¨å…¶ä¸­æ”¾ç½®å¯¹åŸºç±»çš„protectedMethodæ–¹æ³•çš„å¼•ç”¨ï¼Œå¹¶é€šè¿‡æ ‡å‡†bindæ–¹æ³•å°†å…¶ä¸æ´¾ç”Ÿç±»çš„ä¸Šä¸‹æ–‡éš”ç¦»ã€‚ è¿™æ„å‘³ç€è°ƒç”¨_base.protectedMethodï¼ˆï¼‰;ã€‚ åœ¨protectedMethodå†…éƒ¨ï¼Œè¿™ä¸æ˜¯_baseå¯¹è±¡ï¼Œè€Œæ˜¯DerivedClassç±»çš„å®ä¾‹ã€‚ <br><br><h3>  ProtectedMethodæ–¹æ³•è¯´æ˜DerivedClasså†…éƒ¨ </h3><br> åœ¨DerivedClassç±»ä¸­ï¼Œæœ‰å¿…è¦ä»¥ä¸é€šè¿‡Object.definePropertyåœ¨åŸºç±»ä¸­ç›¸åŒçš„æ–¹å¼å£°æ˜protectedMethodå…¬å…±æ–¹æ³•ï¼Œå¹¶é€šè¿‡è°ƒç”¨checkAccessæ–¹æ³•æˆ–ç›´æ¥åœ¨è¯¥æ–¹æ³•ä¸­è¿›è¡Œæ£€æŸ¥æ¥æ£€æŸ¥å¯¹å…¶çš„è®¿é—®ï¼š <br><br><pre> <code class="javascript hljs"> <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(DerivedClass.prototype, <span class="hljs-string"><span class="hljs-string">'protectedMethod'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">enumerable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">configurable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.constructor === DerivedClass) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ProtectedError() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _base.protectedMethod(); } });</code> </pre><br> æˆ‘ä»¬æ£€æŸ¥- <i>â€œä½†æ˜¯æˆ‘ä»¬æ˜¯å¦è¢«ç§°ä¸ºç®€å•çš„å…¬å…±æ–¹æ³•ï¼Ÿâ€</i> å¯¹äºDerivedClassç±»çš„å®ä¾‹ï¼Œæ„é€ å‡½æ•°å°†ç­‰äºDerivedClassã€‚ å¦‚æœæ˜¯è¿™æ ·ï¼Œåˆ™äº§ç”Ÿä¸€ä¸ªé”™è¯¯ã€‚ å¦åˆ™ï¼Œæˆ‘ä»¬å°†å…¶å‘é€ç»™åŸºç±»ï¼Œå¹¶ä¸”å®ƒå°†è¿›è¡Œæ‰€æœ‰å…¶ä»–æ£€æŸ¥ã€‚ <br><br> å› æ­¤ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªåŠŸèƒ½ã€‚ ä¸€ä¸ªé€šè¿‡Object.definePropertyå£°æ˜ï¼Œå¹¶ä¸”å¯¹äºDerivedClassæ´¾ç”Ÿçš„ç±»æ˜¯å¿…éœ€çš„ã€‚ å®ƒæ˜¯å…¬å¼€çš„ï¼Œå› æ­¤å…·æœ‰ç¦æ­¢å…¬å¼€å‘¼å«çš„æ”¯ç¥¨ã€‚ ç¬¬äºŒä¸ªæ–¹æ³•ä½äº_baseå¯¹è±¡ä¸­ï¼Œè¯¥å¯¹è±¡åœ¨DerivedClassç±»å†…éƒ¨å…³é—­ï¼Œå› æ­¤å¯¹ä»»ä½•äººéƒ½ä¸å¯è§ï¼Œå®ƒæ˜¯ç”¨æ¥ä»æ‰€æœ‰DerivedClassæ–¹æ³•è®¿é—®å—ä¿æŠ¤çš„æ–¹æ³•çš„ã€‚ <br><br><h3> è´¢äº§ä¿æŠ¤ </h3><br> ä½¿ç”¨å±æ€§ï¼Œå·¥ä½œå‘ç”Ÿçš„æ–¹å¼ç•¥æœ‰ä¸åŒã€‚ é€šå¸¸é€šè¿‡Object.definePropertyå®šä¹‰BaseClassä¸­çš„å±æ€§ï¼Œä»…åœ¨é¦–å…ˆéœ€è¦æ·»åŠ æ£€æŸ¥çš„getterå’Œsetterä¸­ï¼Œå³ è‡´ç”µcheckAccessï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BaseClass</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAccess</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _protectedProperty; <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">'protectedProperty'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">get</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ checkAccess.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _protectedProperty; }, <span class="hljs-attr"><span class="hljs-attr">set</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ checkAccess.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); _protectedProperty = value; }, <span class="hljs-attr"><span class="hljs-attr">enumerable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">configurable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }); }</code> </pre><br> åœ¨BaseClassç±»å†…éƒ¨ï¼Œä¸æ˜¯é€šè¿‡æ­¤æ–¹æ³•è®¿é—®protectedå±æ€§ï¼Œè€Œæ˜¯é€šè¿‡å°é—­å˜é‡_protectedPropertyè®¿é—®è¯¥å±æ€§ã€‚ å¦‚æœåœ¨ä½¿ç”¨BaseClassç±»ä¸­çš„å±æ€§æ—¶å¯¹getterå’Œsetterèµ·ä½œç”¨å¯¹æˆ‘ä»¬å¾ˆé‡è¦ï¼Œåˆ™æˆ‘ä»¬éœ€è¦åˆ›å»ºç§æœ‰æ–¹æ³•getProtectedPropetyå’ŒsetProtectedPropertyï¼Œåœ¨å…¶ä¸­å°†ä¸è¿›è¡Œæ£€æŸ¥ï¼Œå¹¶ä¸”å®ƒä»¬åº”è¯¥å·²ç»è¢«è°ƒç”¨ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BaseClass</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAccess</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _protectedProperty; <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">'protectedProperty'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">get</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ checkAccess.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getProtectedProperty(); }, <span class="hljs-attr"><span class="hljs-attr">set</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">value</span></span></span><span class="hljs-function">) </span></span>{ checkAccess.call(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); setProtectedProperty(value); }, <span class="hljs-attr"><span class="hljs-attr">enumerable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">configurable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getProtectedProperty</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    return _protectedProperty; } function setProtectedProperty(value){ //    _protectedProperty = value; } }</span></span></code> </pre><br> åœ¨æ´¾ç”Ÿç±»ä¸­ï¼Œä½¿ç”¨å±æ€§ä¼šæ›´åŠ å¤æ‚ï¼Œå› ä¸º å±æ€§ä¸èƒ½è¢«ä¸Šä¸‹æ–‡æ›¿æ¢ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ ‡å‡†çš„Object.getOwnPropertyDescriptoræ–¹æ³•æ¥ä»åŸºç±»çš„å±æ€§è·å–getterå’Œsetterï¼Œå› ä¸ºå®ƒä»¬å·²ç»å¯ä»¥æ›´æ”¹è°ƒç”¨ä¸Šä¸‹æ–‡ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DerivedClass</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkAccess</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _base = { <span class="hljs-attr"><span class="hljs-attr">protectedMethod</span></span>: _self.protectedMethod.bind(_self), }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _baseProtectedPropertyDescriptor = <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.getOwnPropertyDescriptor(_self, <span class="hljs-string"><span class="hljs-string">'protectedProperty'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      _base //    DerivedClass     Object.defineProperty(_base, 'protectedProperty', { get: function() { return _baseProtectedPropertyDescriptor.get.call(_self); }, set: function(value){ _baseProtectedPropertyDescriptor.set.call(_self, value); } }) //      ,      DerivedClass      . Object.defineProperty(_self, 'protectedProperty', { get: function () { checkAccess.call(_self); return base.protectedProperty; }, set: function (value) { checkAccess.call(_self); _base.protectedProperty = value; }, enumerable: false, configurable: false }); }</span></span></code> </pre><br><h3> ç»§æ‰¿è¯´æ˜ </h3><br> æœ€åæˆ‘è¦è¯„è®ºçš„æ˜¯ä»BaseClassç»§æ‰¿DerivedClassã€‚ å¦‚æ‚¨æ‰€çŸ¥ï¼ŒDerivedClass.prototype = new BaseClassï¼ˆï¼‰; ä¸ä»…åˆ›å»ºåŸå‹ï¼Œè¿˜é‡å†™å…¶æ„é€ å‡½æ•°å±æ€§ã€‚ å› æ­¤ï¼Œå¯¹äºDerivedClassçš„æ¯ä¸ªå®ä¾‹ï¼Œæ„é€ å‡½æ•°çš„å±æ€§éƒ½ç­‰äºBaseClassã€‚ è¦è§£å†³æ­¤é—®é¢˜ï¼Œé€šå¸¸åœ¨åˆ›å»ºåŸå‹åï¼Œé‡å†™Constructorå±æ€§ï¼š <br><br><pre> <code class="javascript hljs">DerivedClass.prototype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseClass(); DerivedClass.prototype.constructor = DerivedClass;</code> </pre><br> ä½†æ˜¯ï¼Œä¸ºäº†ä½¿æˆ‘ä»¬ä¹‹åæ²¡æœ‰äººé‡å†™æ­¤å±æ€§ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„Object.definePropertyã€‚ å¯é…ç½®çš„ï¼šfalseå±æ€§å¯é˜²æ­¢å†æ¬¡è¦†ç›–è¯¥å±æ€§ï¼š <br><br><pre> <code class="javascript hljs">DerivedClass.prototype = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseClass(); <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(DerivedClass.prototype, <span class="hljs-string"><span class="hljs-string">'constructor'</span></span>, { <span class="hljs-attr"><span class="hljs-attr">value</span></span> : DerivedClass, <span class="hljs-attr"><span class="hljs-attr">configurable</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> });</code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN425521/">https://habr.com/ru/post/zh-CN425521/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN425505/index.html">Linuxå†…æ ¸å¯åŠ¨è¿‡ç¨‹åˆ†æ</a></li>
<li><a href="../zh-CN425507/index.html">Parsim Wikipediaè´Ÿè´£4ä¸ªå›¢é˜Ÿçš„NLPä»»åŠ¡</a></li>
<li><a href="../zh-CN425511/index.html">Rotativaåº”ç”¨ç¨‹åºçš„éæ˜¾è€Œæ˜“è§çš„åŠŸèƒ½ï¼Œç”¨äºåœ¨ASP.NET MVCåº”ç”¨ç¨‹åºä¸­ç”ŸæˆPDF</a></li>
<li><a href="../zh-CN425515/index.html">Appleé˜»æ­¢å¯¹æ–°MacBookå‹å·è¿›è¡Œç‹¬ç«‹ç»´ä¿®</a></li>
<li><a href="../zh-CN425517/index.html">Yandexå¦‚ä½•ä½¿ç”¨é›·è¾¾å’Œå«æ˜Ÿåˆ›å»ºå…¨çƒé™æ°´é¢„æŠ¥</a></li>
<li><a href="../zh-CN425525/index.html">è’‚å§†Â·ä¼¯çº³æ–¯Â·æï¼ˆTim Berners-Leeï¼‰èµ°ä¸Šäº†æˆ˜äº‰çš„é“è·¯ï¼šâ€œç½‘ç»œçš„ç¬¬ä¸€æ­¥...â€</a></li>
<li><a href="../zh-CN425527/index.html">åœ¨Kotlinåˆ—å‡ºã€‚ Haskellæ–¹æ³•</a></li>
<li><a href="../zh-CN425529/index.html">Sans Forgeticaï¼šä¸€ç§å­—ä½“ï¼Œå¯ä»¥è®©æ‚¨æ›´å¥½åœ°è®°ä½é˜…è¯»çš„å†…å®¹</a></li>
<li><a href="../zh-CN425531/index.html">æ¶²åˆ¶åŠ¨å†·å´ã€‚ ç³»ç»Ÿå¼€å‘é€‰é¡¹</a></li>
<li><a href="../zh-CN425533/index.html">å¦‚ä½•åœ¨äº‘ä¸­å·¥ä½œï¼šä»æ£€æŸ¥æ•°æ®ä¸­å¿ƒçš„å¯é æ€§åˆ°ç®¡ç†è™šæ‹ŸåŸºç¡€æ¶æ„</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>