<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👏🏿 🏕️ 🚶🏿 Respon Kecelakaan: Membentang cluster terhadap situs DR 👩🏻‍🤝‍👨🏽 🔌 👨🏽‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kami memiliki dua pendekatan untuk Disaster Recovery: cluster "stretched" (instalasi aktif-aktif) dan platform dengan mesin virtual (replika) dimatika...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Respon Kecelakaan: Membentang cluster terhadap situs DR</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/technoserv/blog/420971/"><img src="https://habrastorage.org/webt/vq/4b/8b/vq4b8bziie3zsdalswgid3zjmd8.jpeg"><br><br>  Kami memiliki dua pendekatan untuk Disaster Recovery: cluster "stretched" (instalasi aktif-aktif) dan platform dengan mesin virtual (replika) dimatikan.  Mereka memiliki beberapa poin untuk menyimpan foto. <br><br>  Ada permintaan untuk toleransi bencana, dan banyak klien kami sangat membutuhkannya.  Oleh karena itu, kami mulai mengerjakan kedua skema tersebut sebagai bagian dari produksi kami. <br><br>  Metode memiliki pro dan kontra, sekarang saya akan memberi tahu Anda tentang mereka. <br><a name="habracut"></a><br><h3>  Cluster Peregangan </h3><br><img src="https://habrastorage.org/webt/oe/au/pz/oeaupzuepknnmkaax9h1gsssvso.png"><br><br>  Seperti yang Anda lihat, ini adalah kisah standar metro cluster.  Dalam pro - downtime hampir nol, berhenti hanya pada saat memulai mesin virtual.  Fitur ini berfungsi - VMware High Availability (HA).  Dia melihat bahwa host hilang, dan segera restart VM di situs jarak jauh. <br><br>  Peluncuran dilakukan segera dari penyimpanan, yang terletak di cluster. <br><br>  Penyimpanan dengan cluster yang didistribusikan secara geografis adalah fitur pemasaran NetApp.  Pabrikan lain memiliki sesuatu dengan nama yang mirip.  Intinya, ini adalah replikasi asinkron yang dipikirkan dari satu sisi ke sisi lain.  Kami menulis ke satu node di jaringan lokal dan menyinkronkan melalui saluran komunikasi khusus dengan yang lain. <br><br>  Dalam hal terjadi kegagalan dari salah satu sistem penyimpanan, sisanya (di situs lain) menyajikan jalur ke disk ke host yang tersisa.  VM yang telah mati dihidupkan ulang pada mereka.  Semuanya terjadi secara otomatis - pusat data macet, semuanya reboot, penyimpanan berfungsi, VMware berfungsi.  Klien melihat bahwa semuanya berkedip dan mulai lagi. <br><br>  Satu-satunya cache dari RAM VM bisa hilang.  Tetapi jika database membuangnya, maka kerugiannya adalah nol dalam waktu. <br><br>  Jika kami kehilangan komunikasi antara situs, maka semuanya terus berfungsi di tempatnya dan, segera setelah koneksi dipulihkan, ia mulai menyinkronkan. <br><br>  Kelemahannya adalah harga tinggi.  Karena Anda benar-benar membutuhkan SHD ganda (terlebih lagi, serupa dalam jenis, kecepatan dan volume disk SHD pertama di situs utama), yang tidak dapat digunakan entah bagaimana, kecuali sebagai cadangan.  Ditambah lagi mengikat penyimpanan untuk cluster metro, ini adalah jembatan FC, jaringan FC dan banyak lagi. <br><br>  Kami memiliki dua DPC, di antaranya bundel FC sepanjang dua balok (empat garis optik gelap dan DWDM).  Ini adalah dua potong besi, masing-masing menyediakan bandwidth 200 Gbps untuk FC dan Ethernet. <br><br><h3>  Alternatif dengan DR </h3><br><img src="https://habrastorage.org/webt/90/zb/pk/90zbpkhak2hyp6hfmmt4afea1mo.png"><br><br>  Ada perangkat lunak dengan nama yang mudah diingat - VMware vCloud Availability untuk Cloud-to-Cloud DR. <br><br>  Ini adalah sistem untuk membuat VM identik di situs jarak jauh satu kali, secara relatif, dalam 15 menit.  Sebuah sistem untuk menyajikan semua ini dengan cara yang tepat ke mekanisme kontrol cloud melekat padanya pada pita listrik. <br><br>  Artinya, teknologi Replikasi VMware ada di backend.  Jika terjadi kegagalan, kami meluncurkan paket DR di situs kedua secara manual, secara otomatis berhenti mencoba mereplikasi, kemudian mendaftarkan VM di vCloud Director, menyesuaikan alamat IP (sehingga tidak harus diubah ke VM) dan memulai VM dalam urutan yang diperlukan.  Dalam solusi kami, tidak perlu mengubah pengalamatan, kami merentangkan jaringan ke kedua pusat data. <br><br>  Mesin terus-menerus direplikasi, tetapi bukan seluruh pusat data, tetapi hanya yang terpilih yang merupakan proses kritis.  Ini direplikasi sesekali, interval minimum adalah 15 menit (ini adalah kasus yang ideal ketika semuanya terbang dan ada server replikasi khusus dan minimum perubahan ke VM).  Dalam praktiknya, Anda memiliki salinan setengah jam atau satu jam yang lalu.  Jika ada yang salah, maka data yang jatuh ke interval hilang.  15 menit adalah pertanyaan agen yang mengumpulkan replikasi baru.  Veeam mengatakan bahwa mereka bisa memakan waktu kurang dari 15 menit, tetapi pada kenyataannya itu juga lebih lama dalam praktik jika mereka tidak menggunakan fitur penyimpanan.  Saya tidak melihat pada mesin industri (bukan pada tes) bahwa itu akan menjadi sebaliknya. <br><br>  Untuk waktu yang lama, NetApp, seperti banyak produsen sistem penyimpanan lainnya, memiliki teknologi SnapMirror, yang memungkinkan Anda mengubah pekerjaan replikasi dari hypervisor ke sistem penyimpanan, dan Replikasi VMware dapat menggunakannya. <br><br>  Saat layanan replikasi berjalan, kereta berjalan jauh.  Tapi itu murah. <br><br>  Mengapa masih murah - karena Anda dapat menggunakan penyimpanan apa pun di sisi mana pun (dari produsen yang berbeda, kelas yang berbeda), Anda tidak perlu mengalokasikan sejumlah besar disk sebelumnya. <br><br>  Tidak perlu mengalokasikan grup disk besar, di dalamnya bulan dipotong.  Ini hanya terjadi pada penyimpanan lokal dan diterapkan pada kenyataan ketersediaan catatan dari mesin virtual.  Karena ini, tempat pada sistem penyimpanan ditempati secara optimal, jika digunakan untuk tugas-tugas lain.  Dan itu digunakan, karena kami tidak memberikan layanan seperti itu kepada semua pelanggan. <br><br>  Minus - Anda perlu mengkonfigurasi replikasi di tingkat VM, yaitu, kontrol bahwa semuanya sudah dikonfigurasi dengan benar, bahwa ini adalah mesin, pastikan replikasi melewati, bahwa tidak ada kesalahan.  Buat rencana DR untuk setiap klien, lakukan tes mereka. <br><br>  Dalam kasus pertama, penyimpanan diambil, secara kondisional, infrastruktur, hampir berdasarkan sektor (lebih tepatnya, oleh objek).  Dan di sini satu mesin dapat jatuh karena tugas jatuh karena beberapa alasan perangkat lunak terkait dengan bug di tingkat tinggi, atau karena masalah aksesibilitas.  Ini terjadi sedikit lebih sering daripada jika Anda hanya mengambil level rendah. <br><br>  Dalam plus - DR menyimpan beberapa poin.  Anda dapat memutar kembali beberapa foto. <br><br>  Di luar OS tamu, Anda memerlukan perangkat lunak tambahan. <br><br>  Untuk mendapatkan semua jaringan yang diperlukan ke Vcloud Director, kami membutuhkan pekerjaan administrator kami.  Secara umum, semua konektivitas jaringan dalam versi ini tetap dengan administrator kami.  Untuk klien cloud, ini berarti aplikasi, yang juga membutuhkan waktu. <br><br>  Replikasi juga dikonfigurasi melalui aplikasi.  VM yang ditambahkan - Anda harus mengirim permintaan yang perlu Anda tiru.  Itu tidak termasuk dalam tugas replikasi secara otomatis.  Perlu memperhatikan administrator. <br><br><h3>  Perbedaannya </h3><br>  Akibatnya, harga mungkin berbeda lebih dari dua kali.  Replikasi akan menggandakan biaya ruang disk dengan dua atau lebih (dua salinan lengkap + riwayat perubahan), ditambah sesuatu untuk layanan dan reservasi sumber daya komputasi.  Dalam kasus cluster metro, biaya ruang akan dikalikan dua, tetapi ruang itu sendiri akan lebih mahal secara signifikan, ditambah Anda perlu secara ketat memesan node di situs terpencil.  Artinya, sumber daya komputasi harus dikalikan dua, kita tidak bisa menggunakannya untuk hal lain. <br><br>  Dalam kasus metro cluster, kita hanya bisa menggunakan disk yang sama sehingga ada mirror penuh.  Jika pada pusat data utama beberapa drive cepat, beberapa lambat pada 10 ribu putaran per menit, maka konfigurasi yang sama diperlukan.  Dalam kasus replika, disk yang lebih lambat di situs cadangan dimungkinkan, yang lebih murah karena penyimpanan.  Tetapi ketika beralih ke cadangan, itu akan berubah menjadi kurang dalam kinerja.  Yaitu, jika ia menyimpan sesuatu pada SSD di cluster utama, dan direplikasi ke disk biasa, maka penyimpanan akan jauh lebih murah dengan biaya memperlambat infrastruktur cadangan. <br><br>  Saat ini kami sedang memilih apa yang akan dimasukkan dalam rilis sebelumnya, jadi kami ingin berkonsultasi: dapatkah Anda memberi tahu kami secara singkat bagaimana Anda mengatur situs DR Anda dan apa yang ingin Anda lakukan secara umum? </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id420971/">https://habr.com/ru/post/id420971/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id420959/index.html">Sistem AI mengoptimalkan pendinginan pusat data</a></li>
<li><a href="../id420963/index.html">Analisis bisnis: cara meninggalkan Excel tanpa meninggalkannya</a></li>
<li><a href="../id420965/index.html">Enam laporan paling berguna dengan Frontend Conf 2018</a></li>
<li><a href="../id420967/index.html">Membantu berenang: bagaimana memperkenalkan pendatang baru ke proyek yang kompleks</a></li>
<li><a href="../id420969/index.html">Majalah Berita Cosmonautics tidak ada lagi</a></li>
<li><a href="../id420973/index.html">Mengkonfigurasi UFW di Ubuntu Server 16.04 dengan Contoh BigBlueButton</a></li>
<li><a href="../id420975/index.html">Jangan lakukan itu dalam produksi</a></li>
<li><a href="../id420977/index.html">Trik QComboBox + QTreeView</a></li>
<li><a href="../id420979/index.html">Redux Basics (buku teks, edisi ke-2)</a></li>
<li><a href="../id420981/index.html">“Saya dapat memberi tahu Anda tentang rasa sakit yang umum dari semua pengembang iOS” - 10 pertanyaan untuk programmer, edisi 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>