<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüéì üì≠ üë®‚ÄçüöÄ Nous d√©veloppons un firmware de p√©dale pour apprendre √† jouer de la balala√Øka üñ•Ô∏è ‚¨ÖÔ∏è üé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'adore vraiment les didacticiels vid√©o. Pour une raison quelconque, je per√ßois personnellement tr√®s mal les informations contenues dans le texte. Mai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Nous d√©veloppons un firmware de p√©dale pour apprendre √† jouer de la balala√Øka</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445160/"> J'adore vraiment les didacticiels vid√©o.  Pour une raison quelconque, je per√ßois personnellement tr√®s mal les informations contenues dans le texte.  Mais il y a des choses sur lesquelles il n'y a pas beaucoup d'informations sur papier.  Prenez, par exemple, les le√ßons de la balala√Øka: sur YouTube, il y a de merveilleuses discussions sur la fa√ßon de jouer telle ou telle m√©lodie (qui sont int√©ress√©s, nous recherchons "Sergey Vorontsov"), mais il est difficile de r√©p√©ter et de m√©moriser la s√©quence de la vid√©o en streaming.  Il faut soit √©crire sur papier (√† en juger par les commentaires sous les cours, certains le font), soit acheter du mat√©riel suppl√©mentaire (mais je ne suis pas gourmand, mais simple). <br><br><img src="https://habrastorage.org/webt/g5/_m/ax/g5_maxwworsrjbxqh3n08jytdj4.png"><br><br>  En g√©n√©ral, dans mon cas de balala√Øka, et avec beaucoup d'autres, je dois faire comme ceci: j'ai regard√© le fragment, je l'ai mis en pause, je l'ai r√©p√©t√© plusieurs fois derri√®re l'auteur et j'ai continu√© √† regarder.  Si quelque chose n'est pas clair - rembobin√©, regard√© de plus pr√®s.  Mais comment remonter le tout si vos mains sont occup√©es?  De plus, dans mon cas, ils sont occup√©s, sinon avec un √©norme accord√©on √† boutons, mais encore certains, mais avec une balala√Øka.  Donc, vous devez travailler avec vos jambes. <br><a name="habracut"></a><br>  Il y a de nombreuses ann√©es, lorsque toute l'humanit√© progressive utilisait des claviers PS / 2, ils nous ont apport√© des dizaines de claviers USB pour le projet.  Bien s√ªr, nous les avons connect√©s √† une machine, avons appuy√© sur Ctrl sur l'une d'elles, Alt sur la seconde et Del sur la troisi√®me.  L'effet est atteint.  Depuis lors, je sais que les claviers USB fonctionnent compl√®tement en parall√®le, vous pouvez donc en connecter un autre pour aider le principal, qui enverra des codes √† la place. <br><br>  L'id√©e est donc n√©e de faire une p√©dale qui se fait passer pour un clavier et envoie des codes de contr√¥le aux joueurs.  En tant que joueur, j'ai d'abord choisi VLC Player, car il poss√®de des boutons de contr√¥le bien document√©s, mais il s'est av√©r√© plus tard que les codes que j'avais s√©lectionn√©s avaient exactement le m√™me objectif lorsque je regardais des vid√©os sur YouTube en mode plein √©cran.  C'est bien, car avec plusieurs vues en ligne, pour les impressions de la publicit√©, quelque chose semble tomber dans l'esprit de l'auteur.  Regarder t√©l√©charg√© ne serait pas aussi √©thique. <br><br>  Nous commen√ßons donc √† concevoir l'appareil. <br><br><h2>  Logique de travail </h2><br>  Au d√©but, je voulais cr√©er plusieurs p√©dales, chacune pour sa propre fonction.  Au d√©part, je comptais 3-4 de ces fonctions: marche, arr√™t, vent l√†-bas, retour en arri√®re.  Mais alors j'ai compris combien de plastique cela prendrait, plus - comment je comprendrais les p√©dales au toucher, et j'√©tais triste.  Par cons√©quent, il a √©t√© d√©cid√© de r√©viser radicalement toute la logique.  Quelles fonctionnalit√©s sont n√©cessaires du tout?  Start-stop, mais il se bloque souvent sur la m√™me cl√©, g√©n√©ralement sur un espace.  Et rembobinage.  VLC Player a "Shift + Left".  YouTube, il s'est av√©r√© √©galement.  Et, si vous le pensez, il n'y a plus de fonctions. <br><br>  Super!  Faisons en sorte que la p√©dale utilise bri√®vement la fonction "Start-Stop", et longtemps - par la fonction "Rewind". <br><br>  √Ä l'avenir, vous pourrez √©tendre la fonctionnalit√©.  Vous pouvez entra√Æner la p√©dale √† reconna√Ætre le code morse.  Ma femme, ayant appris l'id√©e, a sugg√©r√© de coder les impulsions de contr√¥le en utilisant des √©l√©ments de danses irlandaises ... En g√©n√©ral, vous pouvez √©tendre les fonctionnalit√©s √† votre guise.  Mais une chose est claire: une p√©dale suffit.  Eh bien, nous allons maintenant reconna√Ætre les presses longues et courtes. <br><br><h2>  La m√©canique </h2><br>  Pour ceux qui marchent chez eux en pantoufles, il existe une solution tr√®s simple (je l'ai trouv√©e sur le site Thingiverse).  On prend un bouton d'un diam√®tre de plus d'un centim√®tre, on le visse dans n'importe quel objet en forme de bo√Æte, on obtient une p√©dale.  Le probl√®me est que je n'aime pas les chaussons, donc cette option ne me convient pas personnellement.  J'ai besoin d'une surface plus grande pour que le pied ne fasse pas mal. <br><br>  Des p√©dales en grandes quantit√©s sont vendues sur Ali Express, vous devez rechercher le mot Foot Switch.  Les prix commencent √† 30 roubles, mais √† ce prix, le co√ªt de livraison peut √™tre d'environ quatre cents roubles.  Apr√®s avoir cherch√©, j'ai trouv√© qu'il √©tait tout √† fait possible de trouver une p√©dale pour laquelle la somme ¬´prix plus livraison¬ª serait de 150 roubles.  Mais vous devrez attendre en moyenne quelques mois (je suis ici r√©cemment pour une carte SD depuis trois mois). <br><br>  Je suis donc all√© plus vite: j'ai fait une p√©dale sur une imprimante 3D.  L'exp√©rience personnelle (et toutes les options avec Thingiverse) montre que l'axe doit √™tre en m√©tal, sinon tout se cassera rapidement.  J'ai pris le boulon de meuble M6x60 que j'avais avec l'√©crou attach√©, ainsi que le bouton (PSW-13), qui √©tait dans les pi√®ces radio voisines, et je les ai encercl√©s aussi plastique que possible.  Voici √† quoi ressemblaient les documents sources: <br><br><img src="https://habrastorage.org/webt/fx/h9/fl/fxh9fljxy-gcfvlvf5s2ovu5sis.jpeg"><br><br>  Les voici, ins√©r√©s dans la moiti√© inf√©rieure.  Comme vous pouvez le voir, la principale caract√©ristique de conception est les murs, d'au moins quatre millim√®tres d'√©paisseur.  Avec ces param√®tres, m√™me un proto-typer doux devient assez durable.  Le bouton est install√© sans √©crou, car tout vide en dessous entra√Ænera la rupture du plastique et il se conserve assez bien. <br><br><img src="https://habrastorage.org/webt/xn/6h/zq/xn6hzqfjerkxrderg2kvpnad30o.jpeg"><br><br>  Voici une version presque compil√©e: <br><br><img src="https://habrastorage.org/webt/qs/ya/gb/qsyagb0p-qbpgmwwc78tvtj7vcc.jpeg"><br><br>  Et voici le p√©dalier: <br><br><img src="https://habrastorage.org/webt/fc/as/fu/fcasfu9dy0rvteff4oyskczhvq0.jpeg"><br><br>  En principe, je vais joindre les fichiers STL, mais la solution n'√©tait pas parfaite.  N√©anmoins, n'importe qui peut le r√©p√©ter (s'il trouve le boulon M6x60 avec l'√©crou correspondant et le bouton PSW-13).  Assez pour la premi√®re fois, puis - vous pouvez tamponner la m√©canique et commander avec ALI. <br><br><h2>  P√©riph√©rique USB </h2><br>  Bien que je fasse activement la promotion du PSoC ces derniers temps, son utilisation sur les p√©dales est un gaspillage sans pr√©c√©dent.  Je consid√®re que la meilleure solution est une planche √† pain bas√©e sur STM32F103C8T6, qui peut maintenant √™tre command√©e sur ALI Express pour environ 120 roubles (livraison incluse). <br><br><img src="https://habrastorage.org/webt/db/ku/er/dbkuerxaai9tfg8t6bjymx2s9xc.jpeg"><br><br>  Bien s√ªr, nous pouvons sp√©culer qu'il existe des cartes moins ch√®res bas√©es sur AVR, mais la diff√©rence de prix n'est pas significative l√†-bas, et STM32 a beaucoup moins de temps de d√©veloppement en raison du d√©bogage via JTAG.  Une heure de temps (m√™me √† la maison) - cela co√ªte aussi quelque chose.  Ainsi, selon le crit√®re total ¬´prix de l'appareil + co√ªts de main-d'≈ìuvre¬ª, STM32F103 est la meilleure option pour cette t√¢che.  De plus, j'ai une douzaine et demie de telles maquettes en magasin pour un tel cas, donc le d√©lai d'attente de livraison est d√©sormais √©gal √† z√©ro pour moi. <br><br>  J'ai surf√© sur le net pour des claviers USB pr√™ts √† l'emploi bas√©s sur cette puce.  J'ai trouv√© un article sur Habr comment fabriquer une souris USB.  Mais j'ai besoin d'un clavier.  Sur le sujet des claviers, j'ai trouv√© beaucoup de conseils intelligents sur les forums (mais je voulais quelque chose de pr√™t) et quelques projets pr√™ts √† l'emploi, mais complexes sur GitHub (mais je voulais quelque chose de clair).  Mais celui qui cherche trouvera toujours.  Voici un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">merveilleux article</a> dans lequel il y a tout ce qui est n√©cessaire (bien qu'il y en ait un dans le code, je n'ai pas peur de ce mot non russe, un DeadLock potentiel, mais j'√©crirai mon propre code).  L'essentiel est que toutes les √©tapes y soient clairement d√©crites, comment obtenir un clavier USB √† partir d'un ¬´poisson¬ª fini fabriqu√© en Cube MX.  La seule chose que l'auteur n'a pas faite, c'est de ne pas publier les codes cl√©s.  Ajoutez-les ici: <br><br><img src="https://habrastorage.org/webt/ij/0b/kw/ij0bkwmzj94ve2cqynqsn25ms3y.jpeg"><br><br>  La mouche dans la pommade est que dans la version moderne de Cube MX, les noms des fichiers, des fonctions et m√™me des constantes sont l√©g√®rement diff√©rents de ceux sp√©cifi√©s dans cet article, mais par analogie, tout est rapidement trouv√©.  Je pourrais √©crire une nouvelle version du texte, mais o√π est la garantie que les d√©veloppeurs ne changeront plus tout?  Ils aiment le faire.  En g√©n√©ral, vous pouvez voir les analogues dans mon exemple. <br><br>  Alors.  J'ai cr√©√© un projet de base dans Cube MX, effectu√© toutes les modifications recommand√©es par l'article mentionn√© ci-dessus.  Et ensuite?  Ensuite, ajoutez une description du port du bouton.  J'ai choisi PB12 (uniquement parce que le contact correspondant est situ√© sur le coin de la planche √† pain).  √âtant donn√© que je travaille toujours avec le fer via la biblioth√®que mcucpp de Konstantin Chizhov, nous supprimons la d√©finition de macro ¬´-C99¬ª dans les propri√©t√©s du projet, <b>renommons</b> <b>main.c</b> en <b>main.cpp</b> , puis ajoutons la d√©claration: <br><br><pre><code class="plaintext hljs">typedef Mcucpp::IO::Pb12 pedal1;</code> </pre> <br>  Nous ajoutons l'initialisation du port √† la fonction <b>main ()</b> (activation de la synchronisation du port, d√©finition de la direction de la jambe, activation de la bretelle): <br><br><pre> <code class="plaintext hljs">pedal1::ConfigPort::Enable(); pedal1::SetDirRead(); pedal1::SetPullUp (pedal1::Port::PullUp);</code> </pre><br>  En fait, tout est initialis√©.  J'ai d√©cid√© de construire le corps principal √† l'image du processus Verilog.  Je ne sais pas pourquoi, je voulais juste.  Le processus est g√©n√©ralement appel√© sur des impulsions d'horloge.  J'ai d√©cid√© que les ticks du syst√®me sont parfaitement pris comme des ticks.  Par cons√©quent, la fonction r√©guli√®re du gestionnaire de <b>ticks</b> syst√®me dans le fichier <b>stm32f1xx_it.c a √©t√©</b> ajout√©e comme suit: <br><br><img src="https://habrastorage.org/webt/-h/qy/rk/-hqyrk8ex2a6vmby9pa16sqgwdi.png"><br><br><div class="spoiler">  <b class="spoiler_title">M√™me texte:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">void SysTick_Handler(void) { /* USER CODE BEGIN SysTick_IRQn 0 */ /* USER CODE END SysTick_IRQn 0 */ HAL_IncTick(); HAL_SYSTICK_IRQHandler(); /* USER CODE BEGIN SysTick_IRQn 1 */ TickProcess(); /* USER CODE END SysTick_IRQn 1 */ }</code> </pre><br></div></div><br>  J'ai mis la fonction <b>TickProcess () elle-m√™me</b> en <b>principal.</b>  <b>cpp</b> .  Consid√©rez-le d'abord dans son int√©gralit√©, puis en partie. <br><br><div class="spoiler">  <b class="spoiler_title">Voici la fonction compl√®te:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">uint8_t report [8] = {0,0,0,0,0,0,0,0}; uint32_t* pReport = (uint32_t*)report; extern "C" void TickProcess() { //      20!!! static const int shortTime = 700; //      static const int longTime = 2000; //    static int localTick = 0; static int tickDuringButton = 0; static bool bButtonStatePrev; bool bButtonState = pedal1::IsSet(); //     if ((!bButtonState) &amp;&amp; bButtonStatePrev) { tickDuringButton = 0; } //     if (bButtonState &amp;&amp; (!bButtonStatePrev)) { //       //  ,  50  () if ((tickDuringButton &gt;100)&amp;&amp;(tickDuringButton &lt; shortTime)) { //    report [2] = 0x2C; } } //    if ((!bButtonState) &amp;&amp; (!bButtonStatePrev)) { if ((tickDuringButton == shortTime)||(tickDuringButton &gt; longTime)) { //  Shift+ report [0] = 2; // Shift report [2] = 0x50; //  } } //    bButtonStatePrev = bButtonState; tickDuringButton += 1; if (localTick++ % 20 == 0) { USBD_HID_SendReport (&amp;hUsbDeviceFS,report,sizeof(report)); pReport [0] = 0; pReport [1] = 0; } }</code> </pre><br></div></div><br>  La premi√®re t√¢che impl√©ment√©e dans ce gestionnaire est simple.  Toutes les 20 millisecondes, nous envoyons un rapport contenant des informations sur les boutons enfonc√©s (s'il n'y a pas de boutons, nous envoyons quand m√™me, juste avec des z√©ros).  √âtant donn√© que la fonction est appel√©e toutes les millisecondes, le rapport doit √™tre envoy√© √† l'un de ses vingt appels.  Pour ce faire, il existe une variable au d√©but de la fonction: <br><br><pre> <code class="plaintext hljs"> static int localTick = 0;</code> </pre><br>  et le code √† la fin (nous envoyons les donn√©es, apr√®s quoi nous effa√ßons le tampon pour commencer √† envoyer des z√©ros √† la prochaine session): <br><br><pre> <code class="plaintext hljs"> if (localTick++ % 20 == 0) { USBD_HID_SendReport (&amp;hUsbDeviceFS,report,sizeof(report)); pReport [0] = 0; pReport [1] = 0; }</code> </pre><br>  La deuxi√®me t√¢che est plus compliqu√©e.  Il suit la nature de la pression sur la p√©dale et remplit le rapport pour une soumission ult√©rieure.  Pourquoi ai-je dit que l'id√©ologie est comme Verilog?  Parce que j'attrape toujours des diff√©rences dans cette langue: j'ai une variable dans laquelle l'√©tat actuel du bouton est plac√©: <br><br><pre> <code class="plaintext hljs"> bool bButtonState = pedal1::IsSet();</code> </pre><br>  et il y a une variable dans laquelle son √©tat pr√©c√©dent est stock√© (comme nous nous en souvenons, l'√©tat pr√©c√©dent est l'√©tat du bouton lors du traitement d'interruption pr√©c√©dent du temporisateur de 1 ms): <br><br><pre> <code class="plaintext hljs"> static bool bButtonStatePrev;</code> </pre><br>  Le bouton enfonc√© donne la valeur <b>false</b> , le bouton enfonc√© - <b>vrai</b> .  Ainsi, nous pouvons toujours conclure sur l'√©tat dynamique du bouton: <br><br><div class="scrollable-table"><table><tbody><tr><th>  bButtonState </th><th>  bButtonStatePrev </th><th>  Condition </th></tr><tr><td>  vrai </td><td>  vrai </td><td>  Lib√©r√© depuis longtemps </td></tr><tr><td>  vrai </td><td>  faux </td><td>  Lib√©r√© sur la mesure pr√©c√©dente </td></tr><tr><td>  faux </td><td>  vrai </td><td>  Press√© sur la mesure pr√©c√©dente </td></tr><tr><td>  faux </td><td>  faux </td><td>  Longue pression </td></tr></tbody></table></div><br>  Nous introduisons deux constantes.  On r√®gle le temps de pressage court.  Si la presse a dur√© moins de 700 ms, elle est de courte dur√©e.  La seconde d√©finit l'heure √† laquelle la r√©p√©tition automatique est activ√©e.  Si, juste apr√®s sept cents millisecondes, vous commencez √† envoyer le code cl√©, le lecteur commencera √† tourner trop brusquement.  Ceci est identifi√© empiriquement.  Par cons√©quent, la logique de travail est la suivante: apr√®s 700 ms, un seul code "Shift + Left" est envoy√©, apr√®s quoi l'utilisateur a la possibilit√© de rel√¢cher la p√©dale.  Si la p√©dale continue d'√™tre maintenue, √† partir de la seconde, l'envoi constant de ce code commence d√©j√† jusqu'√† ce que la p√©dale soit rel√¢ch√©e. <br><br><pre> <code class="plaintext hljs"> const int shortTime = 700; //      const int longTime = 2000; //   </code> </pre><br>  Le temps pendant lequel le bouton est enfonc√© est stock√© dans une variable: <br><br><pre> <code class="plaintext hljs"> static int tickDuringButton = 0;</code> </pre><br>  Si le bouton vient d'√™tre press√©, on remet √† z√©ro cette variable, en commen√ßant √† mesurer une nouvelle p√©riode: <br><br><pre> <code class="plaintext hljs"> //     if ((!bButtonState) &amp;&amp; bButtonStatePrev) { tickDuringButton = 0; }</code> </pre><br>  Si le bouton vient d'√™tre rel√¢ch√©, on v√©rifie alors combien de fois il a √©t√© enfonc√©.  Si juste un peu (maintenant il dit "moins de 100 ms") - c'est un bavardage.  Cela ne compte pas.  Ignorez ce clic.  Si nous ne faisons rien de plus que la dur√©e de la pression courte, les pressions longues sont trait√©es ci-dessous.  Si, en quelques secondes, nous cr√©ons un rapport dans le buffer avec un espace (qui sera envoy√© le moment venu): <br><br><pre> <code class="plaintext hljs"> //     if (bButtonState &amp;&amp; (!bButtonStatePrev)) { //       //  ,  100  () if ((tickDuringButton &gt;100)&amp;&amp;(tickDuringButton &lt; shortTime)) { //    report [2] = 0x2C; } }</code> </pre><br>  Si le bouton est maintenu enfonc√© depuis longtemps, alors nous envoyons ¬´Maj + Gauche¬ª dans deux cas: <br><br><ul><li>  le bouton est maintenu exactement 700 ms (paquet unique); </li><li>  le bouton est maintenu enfonc√© pendant plus de 2 secondes (envoi de chaque rapport suivant jusqu'√† ce que le bouton soit rel√¢ch√©). </li></ul><br><pre> <code class="plaintext hljs"> //    if ((!bButtonState) &amp;&amp; (!bButtonStatePrev)) { if ((tickDuringButton == shortTime)||(tickDuringButton &gt; longTime)) { //  Shift+ report [0] = 2; // Shift report [2] = 0x50; //  } }</code> </pre><br>  En fait, c'est tout.  Ce code n'est pas plus diff√©rent du ¬´poisson¬ª que Cube MX nous a fait.  Nous assemblons, flashons ... Non, c'est impossible sans erreurs (ici ils sont tous pris, mais je ne pourrais pas m'en passer au d√©part), nous les identifions en 10 minutes via le d√©bogage JTAG (bonjour √† AVR), nous cousons, nous sommes heureux ... <br><br><h2>  Conception alternative </h2><br>  En g√©n√©ral, de telles choses sont utiles sans balala√Øka (ou autre visualisation de didacticiels vid√©o).  En particulier, j'aime lire les nouvelles, allong√© sur le lit, avec un ordinateur portable sur le ventre.  Pour faire d√©filer le texte, vous devez toujours garder la main droite pli√©e, ce qui entra√Æne des douleurs au coude.  Par cons√©quent, j'ai longtemps r√™v√© d'un gros bouton rouge qui pourrait faire d√©filer les pages sans plier le bras.  En fait, il peut √™tre fabriqu√© √† partir des m√™mes composants que la p√©dale, en rempla√ßant le boulon du meuble par une petite quantit√© de colle chaude.  Total: bouton PSW13, plaque d'essai STM32F103C8T6, plastique pour imprimante 3D, adh√©sif thermofusible.  Eh bien, dans le ¬´firmware¬ª, j'ai remplac√© les codes par ¬´PgDn¬ª par une courte pression et ¬´Up¬ª par une longue. <br><br><img src="https://habrastorage.org/webt/t-/pk/ll/t-pkllvtvpapghfjaulfjgzevcw.jpeg"><br><br><img src="https://habrastorage.org/webt/ma/rc/qa/marcqa0tmbl5iypd5sb3al1zvlw.png"><br><br><h2>  Conclusion </h2><br>  Vous pouvez utiliser vos jambes pour contr√¥ler l'affichage des didacticiels vid√©o lorsque vos mains sont occup√©es.  Pour ce faire, une seule p√©dale simule le fonctionnement du clavier USB.  Une p√©dale peut envoyer plusieurs codes cl√©s, en les s√©lectionnant en fonction de diff√©rents types de frappes.  L'article consid√®re une p√©dale qui analyse deux types (appui court et appui long). <br><br>  La m√©canique se trouve sur Ali Express sous le mot Foot Switch ou peut √™tre imprim√©e sur une imprimante 3D.  En tant qu'√©lectronique, la planche √† pain STM32F103C8T6 peut √™tre utilis√©e.  Le "Firmware" se fait en moins d'une heure sur la base du "poisson" cr√©√© par Cube MX du fabricant des contr√¥leurs STM32.  Le code suppl√©mentaire occupe plusieurs √©crans de texte (pour une r√©solution de 2K - un √©cran). <br><br>  En g√©n√©ral, l'ensemble du dispositif (m√©canique + ¬´firmware¬ª) a √©t√© enti√®rement con√ßu en une soir√©e, et il a fallu environ quatre heures pour imprimer la m√©canique sur une imprimante 3D. <br><br>  Les fichiers STL pr√™ts pour l'impression √† p√©dales peuvent √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charg√©s ici</a> (il est souhaitable d'abaisser l'√©l√©ment sup√©rieur de 0,4 mm pour √©viter un grand nombre de supports: la surface s'est av√©r√©e l√©g√®rement arrondie, en abaissant le mod√®le, nous rendrons la partie imprim√©e plate). <br><br>  Les fichiers STL du "gros bouton rouge" peuvent √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charg√©s ici</a> . <br><br>  Les fichiers source pr√™ts √† l'emploi pour le projet et le fichier HEX pour le firmware peuvent √™tre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">t√©l√©charg√©s ici</a> . <br><br>  La date de publication de cet article n'a pas √©t√© choisie par hasard.  Le conseil a d√©cid√© qu'il valait mieux publier un article sur de telles choses sur un site s√©rieux ce jour-l√†.  Mais en fait, si vous regardez les vid√©os trouv√©es sur les phrases "Alexey Arkhipovsky", "Dmitry Kalinin", "Cranberry Show", "Alexey Kodenko", il devient clair que la balala√Øka acad√©mique est comme un assembleur.  L√† et l√†, se conjuguent simplicit√© absolue et puissance expressive fr√©n√©tique.  Et par la phrase "Sergey Vorontsov", vous pouvez comprendre comment apprendre √† utiliser cet outil. <br><br><h2>  Addition </h2><br>  Apr√®s 8 mois de fonctionnement, le bouton PSW-13 a commenc√© √† fonctionner une fois sur plusieurs, et seulement avec une tr√®s forte pression.  En essayant de remplacer, il s'est av√©r√© un d√©tail tr√®s int√©ressant.  Le nouveau bouton, achet√© en m√™me temps que le pr√©c√©dent, a une r√©serve de marche compl√®tement diff√©rente et fonctionne dans une position compl√®tement diff√©rente.  En cons√©quence, elle √©tait toujours enfonc√©e sur ma p√©dale.  J'ai d√ª le broyer avec un dremel.  Qui va r√©p√©ter ma m√©canique - gardez √† l'esprit.  Vous devrez peut-√™tre modifier le bouton avec un fichier ou vice versa - sculptez un ruban √©lectrique dessus pour l'augmenter.  La r√©p√©tabilit√© de la partie plastique de ce bouton n'√©tait pas tr√®s grande.  Mais en g√©n√©ral - apr√®s une telle r√©vision, tout fonctionne √† nouveau. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445160/">https://habr.com/ru/post/fr445160/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445150/index.html">Upwork est enregistr√© en F√©d√©ration de Russie</a></li>
<li><a href="../fr445152/index.html">Que peut-on faire d'autre dans la recherche? Rapport Yandex</a></li>
<li><a href="../fr445154/index.html">√âv√©nements num√©riques √† Moscou du 25 au 31 mars</a></li>
<li><a href="../fr445156/index.html">N√©buliseur compact Glenmark: une chose utile dans la vie quotidienne</a></li>
<li><a href="../fr445158/index.html">Orientation optimale des pi√®ces et configuration de prise en charge dans l'imprimante 3D</a></li>
<li><a href="../fr445162/index.html">Terraform Provider Selectel</a></li>
<li><a href="../fr445164/index.html">Performance du site √©quilibr√©e. Partie 5: Facilit√© d'utilisation</a></li>
<li><a href="../fr445166/index.html">Tout ce que vous devez savoir sur la c√©sure automatique CSS</a></li>
<li><a href="../fr445168/index.html">Un CV id√©al qui sera accueilli par un recruteur et un employeur</a></li>
<li><a href="../fr445170/index.html">Trois grands mensonges sur JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>