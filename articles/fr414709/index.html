<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üè¢ üë©üèΩ‚Äçüéì üè• Lions du d√©sert et introspection üêß üï≥Ô∏è üëê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probablement, presque tous les habitants de Habr savent ce qu'est une dichotomie et comment l'utiliser pour attraper un lion dans le d√©sert. Les erreu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lions du d√©sert et introspection</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/414709/"> Probablement, presque tous les habitants de Habr savent ce qu'est une dichotomie et comment l'utiliser pour attraper un lion dans le d√©sert.  Les erreurs dans les programmes peuvent √©galement √™tre d√©tect√©es par une dichotomie, en particulier en l'absence d'informations de diagnostic sens√©es. <br><br><img src="https://habrastorage.org/webt/u1/qd/_g/u1qd_gu5cngqcpjf-yhrm0voibw.jpeg" alt="image"><br><br>  Une fois le d√©bogage de mon projet en PHP / Laravel, j'ai vu cette erreur dans le navigateur: <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/fp/_h/m1/fp_hm11ul4heugsx1hkolssviwk.png" alt="image"><br><br>  C'√©tait, au moins, √©trange, car, √† en juger par la description de la RFC 2616, une erreur 502 signifie que ¬´le serveur, agissant comme passerelle ou proxy, a re√ßu une r√©ponse incorrecte du serveur en amont¬ª.  Dans mon cas, il n'y avait pas de passerelles, il n'y avait pas de proxy entre le serveur Web et le navigateur, le serveur Web fonctionnait sous nginx sous virtualbox et livrait directement du contenu Web, sans aucun interm√©diaire.  Les journaux nginx avaient ceci: <br><br> <code>2018/06/20 13:42:41 [error] 2791#2791: *2206 recv() failed (104: Connection reset by peer) while reading response header from upstream, client: 192.168.10.1, server: colg.test, request: "GET / HTTP/1.1", upstream: "fastcgi://unix:/var/run/php/php7.1-fpm.sock:", host: "colg.test" <br></code> <br>  Les mots ¬´serveur en amont¬ª dans la description de l'erreur 502 (¬´serveur en amont¬ª dans la version anglaise originale de la RFC) sugg√©raient des serveurs r√©seau suppl√©mentaires sur le chemin de demande du navigateur √† nginx, mais, apparemment, dans ce cas, celui mentionn√© dans le message le module PHP-FPM, √©tant un programme serveur, agit comme ce serveur tr√®s en amont.  Dans les journaux PHP, c'√©tait: <br><br> <code>[20-Jun-2018 13:42:41] WARNING: [pool www] child 26098 exited on signal 11 (SIGSEGV - core dumped) after 102247.908379 seconds from start <br></code> <br>  Il est maintenant clair o√π le probl√®me se pose, mais sa cause n'est pas claire.  PHP vient de tomber dans le vidage de m√©moire, n'affichant aucune information sur le moment o√π dans l'interpr√©tation du programme PHP une erreur s'est produite.  Le moment est donc venu d'attraper un lion dans le d√©sert - d'utiliser ma m√©thode pr√©f√©r√©e de d√©bogage par dichotomie dans de tels cas.  Anticipant les objections dans les commentaires, je constate que l'on pourrait utiliser ici un d√©bogueur, par exemple le m√™me XDebug, mais la dichotomie √©tait plus int√©ressante.  De plus, ce sera le tour de XDebug. <br><br>  Ainsi, dans la mani√®re de traiter la requ√™te Web, j'ai d√©fini la sortie de diagnostic la plus simple, avec la poursuite de l'ex√©cution du programme, pour m'assurer qu'aucune erreur ne se produit au lieu de son installation: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> ‚ÄúI am here‚Äù; <span class="hljs-keyword"><span class="hljs-keyword">die</span></span>();</code> </pre> <br>  Maintenant, la mauvaise page ressemblait √† ceci: <br><br><img src="https://habrastorage.org/webt/jb/ry/7m/jbry7mof_l2w7vm0kbygrgkdfs0.png" alt="image"><br><br>  Apr√®s avoir mis la commande √©crite ci-dessus, d'abord au d√©but, puis √† la fin du chemin de traitement des demandes Web, j'ai d√©couvert qu'une erreur (qui en douterait!) Se produit quelque part entre ces deux points.  Apr√®s avoir d√©fini les diagnostics au milieu du chemin de demande Web, j'ai d√©couvert que l'erreur appara√Æt quelque part vers la fin.  Apr√®s quelques it√©rations, j'ai r√©alis√© que l'erreur ne se produit pas dans le contr√¥leur de l'architecture Laravel MVC elle-m√™me, mais d√©j√† √† la sortie de celle-ci, lors du rendu de la vue, qui est la plus simple ici, dans cet esprit: <br><br><pre> <code class="php hljs">@extends(<span class="hljs-string"><span class="hljs-string">'layouts.app'</span></span>) @section(<span class="hljs-string"><span class="hljs-string">'content'</span></span>) &lt;div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">panel</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">heading</span></span></span><span class="hljs-class">"&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Myservice</span></span></span><span class="hljs-class">&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">panel</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">body</span></span></span><span class="hljs-class">"&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">endsection</span></span></span></span></code> </pre>  Comme vous pouvez le voir, le mod√®le de vue ne contient pas de code PHP (le moteur de mod√®le Laravel vous permet d'utiliser du code PHP en vue), et les probl√®mes ne sont certainement pas l√†.  Mais ci-dessus, nous voyons que cette vue h√©rite du mod√®le layouts.app, alors regardez-le.  C'est d√©j√† plus compliqu√©: il y a des √©l√©ments de navigation, des formulaires de connexion et d'autres choses communes √† toutes les pages du service.  En omettant tout ce qui est l√†, je ne donnerai qu'une ligne, √† cause de laquelle un √©chec est survenu, on a trouv√© tout de m√™me la dichotomie.  Voici la ligne: <br><br><pre> <code class="javascript hljs">&lt;script&gt; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.bkConst = {!! (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> App\Src\Helpers\UtilsHelper())-&gt;loadBackendConstantsAsJSData() !!}; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Ici, juste dans le code du mod√®le de vue, PHP a √©t√© utilis√©.  C'√©tait mon ¬´charme¬ª - la d√©rivation de constantes backend, sous forme de code JS, pour les utiliser sur le frontend, au nom du principe DRY.  La m√©thode loadBackendConstantsAsJSData r√©pertorie plusieurs classes avec les constantes n√©cessaires sur le frontend.  L'erreur s'est produite dans la m√©thode addClassConstants utilis√©e par lui, o√π l'introspection PHP a √©t√© utilis√©e pour obtenir une liste des constantes de classe: <br><br><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * add all class constants to resulted JSON * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> string $classFullName */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addClassConstants</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(string $classFullName, array &amp;$constantsArray)</span></span></span><span class="hljs-function"> </span></span>{ $r = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReflectionClass($classFullName); $result = []; $className = $r-&gt;getShortName(); $classConstants = $r-&gt;getConstants(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span>($classConstants <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $name =&gt; $value) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_array($value) || is_object($value)) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } $result[<span class="hljs-string"><span class="hljs-string">"$className::$name"</span></span>] = $value; } $constantsArray = array_merge($constantsArray, $result); }</code> </pre><br>  Apr√®s avoir recherch√© parmi les classes avec des constantes pass√©es √† cette m√©thode, il s'est av√©r√© que la raison de tout - cette classe avec des constantes - est le chemin vers les m√©thodes de l'API REST. <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">APIPath</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> API_BASE_PATH = <span class="hljs-string"><span class="hljs-string">'/api/v1'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DATA_API = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::API_BASE_PATH . <span class="hljs-string"><span class="hljs-string">"/data"</span></span>; ... <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> DATA_ADDITIONAL_API = DATA_API . <span class="hljs-string"><span class="hljs-string">"/additional"</span></span>; }</code> </pre><br>  Il y a pas mal de lignes et pour trouver la bonne, une dichotomie a de nouveau √©t√© utile.  Maintenant, j'esp√®re que tout le monde a remarqu√© que self :: manque dans la d√©finition de la constante devant le nom constant DATA_API.  Apr√®s l'avoir ajout√© √† sa place l√©gitime, tout a fonctionn√©. <br><br>  Ayant d√©cid√© que le probl√®me est dans le m√©canisme d'introspection, j'ai commenc√© √† √©crire un exemple minimal pour reproduire un bug: <br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeConstants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SOME_CONSTANT = SOME_NONSENSE; } $r = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \ReflectionClass(SomeConstants::class); $r-&gt;getConstants();</code> </pre><br>  Cependant, lors de l'ex√©cution de ce script, PHP n'allait pas planter, mais a √©mis un avertissement compl√®tement sain d'esprit. <br><br> <code>PHP Warning: Use of undefined constant SOME_NONSENSE - assumed 'SOME_NONSENSE' (this will throw an Error in a future version of PHP) in /home/vagrant/code/colg/_tmp/1.php on line 17</code> <br> <br>  √Ä ce stade, j'√©tais d√©j√† convaincu que le probl√®me se manifeste non seulement lors du chargement du site, mais √©galement lors de l'ex√©cution du code √©crit ci-dessus via la ligne de commande.  La seule diff√©rence entre le runtime et le script minimal √©tait la pr√©sence du contexte Laravel: le code du probl√®me a √©t√© ex√©cut√© via son utilitaire artisan.  Donc sous Laravel il y avait une sorte de diff√©rence.  Pour comprendre ce que c'est, il est temps d'utiliser le d√©bogueur.  En ex√©cutant le code sous xdebug, j'ai vu que le crash se produit apr√®s avoir appel√© la m√©thode ReflectionClass :: getConstants dans la m√©thode Illuminate \ Foundation \ Bootstrap \ HandleExceptions :: handleError, qui semble tr√®s simple: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($level, $message, $file = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, $line = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, $context = [])</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (error_reporting() &amp; $level) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorException($message, <span class="hljs-number"><span class="hljs-number">0</span></span>, $level, $file, $line); } }</code> </pre><br>  Le thread d'ex√©cution est arriv√© apr√®s avoir lev√© une exception en raison de l'erreur m√™me dans la description de la constante √† partir de laquelle tout a commenc√©, et PHP s'est √©cras√© lors de la tentative de lancer une exception ErrorException.  Une exception dans le gestionnaire d'exceptions ... Je me suis imm√©diatement souvenu de la fameuse <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Double faute</a> .  Donc, pour provoquer un √©chec, vous devez installer des gestionnaires d'exceptions similaires √† ceux de Laravel.  Un peu plus haut dans le code √©tait juste la m√©thode de bootstrap qui faisait cela: <br><br>  Maintenant, l'exemple minimal finalis√© ressemblait √† ceci: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SomeConstants</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SOME_CONSTANT = SOME_NONSENSE; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">handleError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ErrorException(); } set_error_handler(<span class="hljs-string"><span class="hljs-string">'handleError'</span></span>); set_exception_handler(<span class="hljs-string"><span class="hljs-string">'handleError'</span></span>); $r = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \ReflectionClass(SomeConstants::class); $r-&gt;getConstants();</code> </pre><br>  et son lancement a r√©guli√®rement empaquet√© l'interpr√©teur PHP version 7.2.4 dans le vidage de m√©moire. <br><br>  Il semble qu'il y ait une r√©cursivit√© sans fin ici - lors de la gestion d'une exception de l'erreur d'origine, l'exception suivante est lev√©e dans handleException, g√©r√©e √† nouveau dans handleException, et ainsi de suite √† l'infini.  De plus, pour reproduire l'√©chec, vous devez d√©finir √† la fois error_handler et exception_handler, si un seul d'entre eux est d√©fini, le probl√®me ne se produit pas.  Il a √©galement √©chou√© √† simplement lancer une exception, au lieu de lancer une erreur, il semble que ce ne soit pas une r√©cursion tout √† fait ordinaire, mais quelque chose comme une d√©pendance circulaire. <br><br>  Apr√®s cela, j'ai recherch√© un probl√®me sous diff√©rentes versions de PHP (merci, Docker!).  Il s'est av√©r√© que l'√©chec ne se manifeste que, √† partir de la version de PHP 7.1, les versions ant√©rieures de PHP fonctionnent correctement - elles ne jurent que par l'exception ErrorException non intercept√©e. <br><br>  Quelles conclusions peut-on tirer de tout cela? <br><br><ol><li>  D√©bogage par dichotomie, bien que ce soit une m√©thode ant√©diluvienne de d√©bogage, mais parfois elle peut √™tre n√©cessaire, surtout en cas de manque d'informations diagnostiques </li><li>  √Ä mon avis, les erreurs 502 sont inintelligibles, √† la fois le message √† ce sujet (¬´Bad gateway¬ª) et son d√©codage dans le RFC sur la ¬´r√©ponse incorrecte du serveur en amont¬ª.  Bien que, si vous consid√©rez les modules connect√©s au serveur Web comme des programmes serveur, vous pouvez comprendre la signification du d√©codage d'erreur dans RFC.  Cependant, disons que le m√™me PHP-FPM dans la documentation est appel√© un module et non un serveur. </li><li>  L'analyseur statique entra√Æne, il signalerait imm√©diatement une erreur dans la description de la constante.  Mais alors le bug ne serait pas d√©tect√©. </li></ol><br>  Permettez-moi de terminer sur ce point, merci √† tous pour votre attention! <br><br>  Bagreport - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">envoy√©</a> . <br>  UPD: le bug est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">corrig√©</a> .  A en juger par le code, il s'est n√©anmoins retrouv√© dans le m√©canisme de r√©flexion - dans la gestion des erreurs de la m√©thode ReflectionClass :: getConstants </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr414709/">https://habr.com/ru/post/fr414709/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr414699/index.html">Carreaux irr√©guliers √† la surface des plan√®tes g√©n√©r√©es de mani√®re proc√©durale</a></li>
<li><a href="../fr414701/index.html">Utilisation de l'API KOMPAS-3D ‚Üí Le√ßon 10 ‚Üí Caract√®res sp√©ciaux, y compris une cha√Æne</a></li>
<li><a href="../fr414703/index.html">(Presque) six mois plus tard - une coupe d'opinions sur les projecteurs √† domicile √©conomiques Epson EH-TW610 et Epson EH-TW650. Et un autre sondage</a></li>
<li><a href="../fr414705/index.html">Chefs-d'≈ìuvre de la construction mondiale d'enceintes: la voie innovante de Monitor Audio du tissu au m√©tal et aux mat√©riaux composites</a></li>
<li><a href="../fr414707/index.html">Analyse de la blockchain, ou pourquoi le m√©langeur s'est-il cass√©?</a></li>
<li><a href="../fr414711/index.html">L'application de football espagnole La Liga a rendu ses utilisateurs fraudeurs involontaires</a></li>
<li><a href="../fr414713/index.html">Semaine de r√©troaction crois√©e</a></li>
<li><a href="../fr414715/index.html">Annotations √† la compilation en utilisant @Implement comme exemple</a></li>
<li><a href="../fr414717/index.html">T√©l√©viseur 4K 2018: recommandations pour le meilleur choix</a></li>
<li><a href="../fr414719/index.html">Quatre roues c'est bien, deux c'est mieux</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>