<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯджЁЯП╛ ЁЯФЫ ЁЯРб RxVMS рдореВрд▓ рдмрд╛рддреЗрдВ: RxCommand рдФрд░ GetIt ЁЯП╛ ЁЯНз ЁЯЧ│я╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣ рдореЗрд░реА рд╕реНрдкрдВрджрди рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рдЪреМрдерд╛ рднрд╛рдЧ рд╣реИ: 


- рдкрд░рд┐рдЪрдп 
- рдбрд╛рд░реНрдЯ рд╕реНрдЯреНрд░реАрдо рдмреЗрд╕рд┐рдХреНрд╕ 
- RxDart: рдкреНрд░рд╡рд╛рд╣ рдХреЗ рдЬрд╛рджреБрдИ рд░реВрдкрд╛рдВрддрд░рдг 
- RxVMS рдореВрд▓ рдмрд╛рддреЗрдВ: RxComman...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RxVMS рдореВрд▓ рдмрд╛рддреЗрдВ: RxCommand рдФрд░ GetIt</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449872/"><p>  рдпрд╣ рдореЗрд░реА рд╕реНрдкрдВрджрди рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХрд╛ рдЪреМрдерд╛ рднрд╛рдЧ рд╣реИ: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░рд┐рдЪрдп</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбрд╛рд░реНрдЯ рд╕реНрдЯреНрд░реАрдо рдмреЗрд╕рд┐рдХреНрд╕</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">RxDart: рдкреНрд░рд╡рд╛рд╣ рдХреЗ рдЬрд╛рджреБрдИ рд░реВрдкрд╛рдВрддрд░рдг</a> </li><li>  <strong>RxVMS рдореВрд▓ рдмрд╛рддреЗрдВ: RxCommand рдФрд░ GetIt (рдпрд╣ рдкреЛрд╕реНрдЯ)</strong> </li><li>  RxVMS: рд╕реЗрд╡рд╛рдПрдВ рдФрд░ рдкреНрд░рдмрдВрдзрдХ </li><li>  RxVMS: рд╕реНрд╡-рдирд┐рд╣рд┐рдд рд╡рд┐рдЬреЗрдЯ </li><li>  RxVMS рдХреЗ рд╕рд╛рде рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░рдорд╛рдгреАрдХрд░рдг </li></ul><br><p>  рд╣рд╛рд▓рд╛рдВрдХрд┐ рдкрд┐рдЫрд▓реЗ 2 рднрд╛рдЧ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ RxVMS рдкреИрдЯрд░реНрди рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд╣реАрдВ рдереЗ, рд╡реЗ рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреА рд╕реНрдкрд╖реНрдЯ рд╕рдордЭ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдереЗред  рдЕрдм рд╣рдо рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдкреИрдХреЗрдЬреЛрдВ рдХреА рдУрд░ рдореБрдбрд╝рддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдкрдХреЛ рдЕрдкрдиреЗ рдЖрд╡реЗрджрди рдореЗрдВ рдЖрд░рдПрдХреНрд╕рд╡реАрдПрдордПрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </p><a name="habracut"></a><br><h2 id="getit-bystryy-servicelocator">  рдЧреЗрдЯ рдЗрдЯ: рдлрд╛рд╕реНрдЯ рд╕рд░реНрд╡рд┐рд╕рд▓реЙрдХрд░ </h2><br><p>  рдЬрдм рдЖрдк рдХрд┐рд╕реА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди RxVMS рддрддреНрд╡реЛрдВ рдХреЛ рджрд┐рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЖрд░реЗрдЦ рдХреЛ рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ ... </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/9cf/f8a/7c1/9cff8a7c191e44a7f4f269c3b0ee97cd.png" alt="рдЫрд╡рд┐"></p><br><p> ... рд╢рд╛рдпрдж рдЖрдк рд╕реЛрдЪ рд░рд╣реЗ рд╣реИрдВ рдХрд┐ рд╡рд┐рднрд┐рдиреНрди рдореИрдкрд┐рдВрдЧ, рдкреНрд░рдмрдВрдзрдХ рдФрд░ рд╕реЗрд╡рд╛рдПрдВ рдПрдХ-рджреВрд╕рд░реЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреИрд╕реЗ рдкрддрд╛ рд▓рдЧрд╛рддреА рд╣реИрдВред  рдЗрд╕рд╕реЗ рднреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд, рдЖрдк рд╕реЛрдЪ рд░рд╣реЗ рд╣реЛрдВрдЧреЗ рдХрд┐ рдПрдХ рддрддреНрд╡ рджреВрд╕рд░реЗ рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рддрдХ рдХреИрд╕реЗ рдкрд╣реБрдВрдЪ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЗрддрдиреЗ рд╕рд╛рд░реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ рддрд░реАрдХреЛрдВ (рдЬреИрд╕реЗ рдЗрдирд╣реЗрд░рд┐рдЯреЗрдб рд╡рд┐рдЬреЗрдЯ, рдЖрдИрдУрд╕реА рдХрдВрдЯреЗрдирд░, рдбреАрдЖрдИ ...) рдХреЗ рд╕рд╛рде, рдореИрдВ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ рд╕рд░реНрд╡рд┐рд╕ рд▓реЛрдХреЗрдЯрд░ рдХреЛ рдкрд╕рдВрдж рдХрд░рддрд╛ рд╣реВрдВред  рдЗрд╕ рд╕рдВрдмрдВрдз рдореЗрдВ, рдореЗрд░реЗ рдкрд╛рд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GetIt рдХреЗ</a> рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рд╢реЗрд╖ рд▓реЗрдЦ</a> рд╣реИ - рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛ рдореЗрд░рд╛ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди, рд▓реЗрдХрд┐рди рдпрд╣рд╛рдВ рдореИрдВ рдЗрд╕ рд╡рд┐рд╖рдп рдкрд░ рдереЛрдбрд╝рд╛ рд╕реНрдкрд░реНрд╢ рдХрд░реВрдВрдЧрд╛ред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЖрдк рдПрдХ рдмрд╛рд░ рдЗрд╕ рд╕реЗрд╡рд╛ рдореЗрдВ рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЖрдкрдХреЗ рдкрд╛рд╕ рдкреВрд░реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рддрдХ рдЙрдирдХреА рдкрд╣реБрдВрдЪ рд╣реЛрддреА рд╣реИред  рдпрд╣ рд╕рд┐рдВрдЧрд▓рдЯрди рдХреА рддрд░рд╣ рд╣реИ ... рд▓реЗрдХрд┐рди рдЕрдзрд┐рдХ рд▓рдЪреАрд▓реЗрдкрди рдХреЗ рд╕рд╛рдеред </p><br><h2 id="ispolzovanie">  рдХреЗ рдЙрдкрдпреЛрдЧ </h2><br><p>  GetIt рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдмрд╣реБрдд рд╕реНрдкрд╖реНрдЯ рд╣реИред  рдЖрд╡реЗрджрди рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ, рдЖрдк рд╕реЗрд╡рд╛рдУрдВ рдФрд░ / рдпрд╛ рдкреНрд░рдмрдВрдзрдХреЛрдВ рдХреЛ рдкрдВрдЬреАрдХреГрдд рдХрд░рддреЗ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рдЖрдк рдмрд╛рдж рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдпреЛрдЬрдирд╛ рдмрдирд╛рддреЗ рд╣реИрдВред  рднрд╡рд┐рд╖реНрдп рдореЗрдВ, рдкрдВрдЬреАрдХреГрдд рдХрдХреНрд╖рд╛рдУрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдгреЛрдВ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╕ рдЧреЗрдЯ рдЗрдЯ рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рдХреЙрд▓ рдХрд░реЗрдВред </p><br><p>  рдПрдХ рдЕрдЪреНрдЫреА рд╡рд┐рд╢реЗрд╖рддрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдЖрдк рдХрдВрдХреНрд░реАрдЯ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рддрд░рд╣ рд╣реА рдЗрдВрдЯрд░рдлреЗрд╕ рдпрд╛ рдЕрдореВрд░реНрдд рдХрдХреНрд╖рд╛рдПрдВ рдкрдВрдЬреАрдХреГрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдПрдХ рдЙрджрд╛рд╣рд░рдг рддрдХ рдкрд╣реБрдБрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╕ рдЗрдВрдЯрд░рдлреЗрд╕ / рдЕрдореВрд░реНрдд рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ, рдЖрд╕рд╛рдиреА рд╕реЗ рдкрдВрдЬреАрдХрд░рдг рдХреЗ рджреМрд░рд╛рди рдЖрд╡рд╢реНрдпрдХ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреА рдЬрдЧрд╣ред  рдЗрд╕рд╕реЗ рдЖрдк рдЖрд╕рд╛рдиреА рд╕реЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕реЗрд╡рд╛ рдХреЛ рдореЙрдХрд╕реЗрд╡рд╛ рдореЗрдВ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред </p><br><h2 id="nemnogo-praktiki">  рдереЛрдбрд╝рд╛ рд╕рд╛ рдЕрднреНрдпрд╛рд╕ </h2><br><p>  рдореИрдВ рдЖрдорддреМрд░ рдкрд░ рдПрдХ рд╕реЗрд╡рд╛ рдореЗрдВ рдЕрдкрдиреЗ рд╕реЗрд╡рд┐рд╕рд▓реЛрдХреЗрдЯрд░ рдХреЛ рдПрдХ рд╡реИрд░рд┐рдПрдмрд▓ рд╡реИрд░рд┐рдПрдмрд▓ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ service_locator.dart рдирд╛рдо рд╕реЗ рдЖрд░рдВрдн рдХрд░рддрд╛ рд╣реВрдВред  рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдкреВрд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рдЪрд░ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред </p><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    GetIt sl = new GetIt(); void setUpServiceLocator(ErrorReporter reporter) { //  // [registerSingleton]  -  . //   . // sl.get&lt;ErrorReporter&gt;.get()    . sl.registerSingleton&lt;ErrorReporter&gt;(reporter); // [registerLazySingleton]   ,       // sl.get&lt;ImageService&gt;.get()            . sl.registerLazySingleton&lt;ImageService&gt;(() =&gt; new ImageServiceImplementation()); sl.registerLazySingleton&lt;MapService&gt;(() =&gt; new MapServiceImplementation()); //  sl.registerSingleton&lt;UserManager&gt;(new UserManagerImplementation()); sl.registerLazySingleton&lt;EventManager&gt;(() =&gt; new EvenManagerImplementation()); sl.registerLazySingleton&lt;ImageManager&gt;(() =&gt; new ImageManagerImplementation()); sl.registerLazySingleton&lt;AppManager&gt;(() =&gt; new AppManagerImplementation());</span></span></code> </pre> <br><p>  рдЬрдм рднреА рдЖрдк рдкрд╣реБрдВрдЪрдирд╛ рдЪрд╛рд╣реЗрдВ, рдмрд╕ рдХреЙрд▓ рдХрд░реЗрдВ </p><br><pre> <code class="cpp hljs">RegistrationType object = sl.get&lt;RegistrationType&gt;(); <span class="hljs-comment"><span class="hljs-comment">//  GetIt  `callable`,   : RegistrationType object2 = sl&lt;RegistrationType&gt;();</span></span></code> </pre> <br><p>  <strong>рдЕрддреНрдпрдзрд┐рдХ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдиреЛрдЯ:</strong> GetIt рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, ALWAYS рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдЖрдпрд╛рдд рдХрд░рддреЗ рд╕рдордп рдПрдХ рд╣реА рд╢реИрд▓реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ - рдпрд╛ рддреЛ рдкреИрдХреЗрдЬ (рдЕрдиреБрд╢рдВрд╕рд┐рдд) рдпрд╛ рд░рд┐рд╢реНрддреЗрджрд╛рд░ рдкрде, рд▓реЗрдХрд┐рди рджреЛрдиреЛрдВ рдПрдХ рд╕рд╛рде рдирд╣реАрдВ рдЖрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдбрд╛рд░реНрдЯ рдЕрдкрдиреА рдкрд╣рдЪрд╛рди рдХреЗ рдмрд╛рд╡рдЬреВрдж рдРрд╕реА рдлрд╛рдЗрд▓реЛрдВ рдХреЛ рдЕрд▓рдЧ рдорд╛рдирддреЗ рд╣реИрдВред </p><br><p>  рдпрджрд┐ рдпрд╣ рдЖрдкрдХреЗ рд▓рд┐рдП рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рддреЛ рдХреГрдкрдпрд╛ рд╡рд┐рд╡рд░рдг рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрд░реЗ рдмреНрд▓реЙрдЧ рдкрд░ рдЬрд╛рдПрдВ</a> ред </p><br><h2 id="rxcommand">  RxCommand </h2><br><p>  рдЕрдм рдЬрдм рд╣рдо GetIt рдХрд╛ рдЙрдкрдпреЛрдЧ рдЕрдкрдиреА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рд╣рд░ рдЬрдЧрд╣ (рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд╕рд╣рд┐рдд) рддрдХ рдкрд╣реБрдВрдЪрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдореИрдВ рдпрд╣ рд╡рд░реНрдгрди рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рд╣рдо UI рдШрдЯрдирд╛рдУрдВ рдХреЗ рд▓рд┐рдП рд╣реИрдВрдбрд▓рд░ рдлрд╝рдВрдХреНрд╢рди рдХреИрд╕реЗ рд▓рд╛рдЧреВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╕рдмрд╕реЗ рдЖрд╕рд╛рди рддрд░реАрдХрд╛ рдкреНрд░рдмрдВрдзрдХреЛрдВ рдХреЛ рдлрд╝рдВрдХреНрд╢рди рдЬреЛрдбрд╝рдирд╛ рдФрд░ рдЙрдиреНрд╣реЗрдВ рд╡рд┐рдЬреЗрдЯ рдореЗрдВ рдХреЙрд▓ рдХрд░рдирд╛ рд╣реЛрдЧрд╛: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookUpZip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String zip)</span></span></span></span>; }</code> </pre> <br><p>  рдФрд░ рдлрд┐рд░ UI рдореЗрдВ </p><br><pre> <code class="cpp hljs">TextField(onChanged: sl.get&lt;SearchManager&gt;().lookUpZip,)</code> </pre> <br><p>  рдпрд╣ <code>TextField</code> рдореЗрдВ рд╣рд░ рдмрджрд▓рд╛рд╡ рдкрд░ <code>lookUpZip</code> рдХреЛ <code>lookUpZip</code> рдХрд░реЗрдЧрд╛ред  рд▓реЗрдХрд┐рди рд╣рдо рднрд╡рд┐рд╖реНрдп рдореЗрдВ рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдо рдХреИрд╕реЗ рдкрд╛рд╕ рдХрд░реЗрдВрдЧреЗ?  рдЪреВрдБрдХрд┐ рд╣рдо рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рд╣реЛрдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рд╣рдо рдЕрдкрдиреЗ <code>SearchManager</code> рдПрдХ <code>StreamController</code> рдЬреЛрдбрд╝реЗрдВрдЧреЗ: </p><br><pre> <code class="cpp hljs">abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class"> {</span></span> Stream&lt;String&gt; get nameOfCity; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lookUpZip</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String zip)</span></span></span></span>; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManagerImplementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class">{</span></span> @override Stream&lt;String&gt; get nameOfCity =&gt; cityController.stream; StreamController&lt;String&gt; cityController = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamController(); @override Future&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; lookUpZip(String zip) async { var cityName = await sl.get&lt;ZipApiService&gt;().lookUpZip(zip); cityController.add(cityName); } }</code> </pre> <br><p>  рдФрд░ UI рдореЗрдВ: </p><br><pre> <code class="cpp hljs">StreamBuilder&lt;String&gt;( initialData:<span class="hljs-string"><span class="hljs-string">'', stream: sl.get&lt;SearchManager&gt;().nameOfCity, builder: (context, snapshot) =&gt; Text(snapShot.data);</span></span></code> </pre> <br><p>  рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдЗрд╖реНрдЯрддрдо рдирд╣реАрдВ рд╣реИред  рдпрд╣рд╛рдВ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реИрдВ: </p><br><ul><li>  рдирд┐рд░рд░реНрдердХ рдХреЛрдб - рд╣рдореЗрдВ рд╣рдореЗрд╢рд╛ рдПрдХ рд╡рд┐рдзрд┐, рд╕реНрдЯреНрд░реАрдордХрдВрдЯреНрд░реЛрд▓рд░ рдФрд░ рдЕрдкрдиреА рд╕реНрдЯреНрд░реАрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдЧреЗрдЯрд░ рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛, рдЕрдЧрд░ рд╣рдо рдЗрд╕реЗ рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ рдбреЛрдореЗрди рдореЗрдВ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ </li><li>  рд╡реНрдпрд╕реНрдд рдЕрд╡рд╕реНрдерд╛ - рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдпрджрд┐ рд╣рдо рд╕реНрдкрд┐рдирд░ рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬрдмрдХрд┐ рдлрд╝рдВрдХреНрд╢рди рдЕрдкрдирд╛ рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИ? </li><li>  рддреНрд░реБрдЯрд┐ рд╕реЗ рдирд┐рдкрдЯрдиреЗ - рдХреНрдпрд╛ рд╣реЛрддрд╛ рд╣реИ рдпрджрд┐ рдХреЛрдИ рдлрд╝рдВрдХреНрд╢рди рдЕрдкрд╡рд╛рдж рдлреЗрдВрдХрддрд╛ рд╣реИ? </li></ul><br><p>  рдмреЗрд╢рдХ, рд╣рдо рд░рд╛рдЬреНрдпреЛрдВ рдФрд░ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ StreamControllers рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВ ... рд▓реЗрдХрд┐рди рдЬрд▓реНрдж рд╣реА рдпрд╣ рдердХрд╛рдК рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">rx_command</a> рдкреИрдХреЗрдЬ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдХрд╛рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЖрддрд╛ рд╣реИ</a> ред </p><br><p>  <code>RxCommand</code> рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХрд╛ рд╣рд▓ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдмрд╣реБрдд рдХреБрдЫред  <code>RxCommand</code> рдПрдХ рдлрд╝рдВрдХреНрд╢рди (рд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдпрд╛ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕) рдХреЛ <code>RxCommand</code> рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╕реНрдЯреНрд░реАрдо рдореЗрдВ рдЗрд╕рдХреЗ рдкрд░рд┐рдгрд╛рдо рдкреЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИред </p><br><p>  RxCommand рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рдЕрдкрдиреЗ рдкреНрд░рдмрдВрдзрдХ рдХреЛ рдЗрд╕ рддрд░рд╣ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="cpp hljs">abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class"> {</span></span> RxCommand&lt;String,String&gt; lookUpZipCommand; } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManagerImplementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchManager</span></span></span><span class="hljs-class">{</span></span> @override RxCommand&lt;String,String&gt; lookUpZipCommand; SearchManagerImplementation() { lookUpZipCommand = RxCommand.createAsync((zip) =&gt; sl.get&lt;ZipApiService&gt;().lookUpZip(zip)); } }</code> </pre> <br><p>  рдФрд░ UI рдореЗрдВ: </p><br><pre> <code class="cpp hljs">TextField(onChanged: sl.get&lt;SearchManager&gt;().lookUpZipCommand,) ... StreamBuilder&lt;String&gt;( initialData:<span class="hljs-string"><span class="hljs-string">'', stream: sl.get&lt;SearchManager&gt;().lookUpZipCommand, builder: (context, snapshot) =&gt; Text(snapShot.data);</span></span></code> </pre> <br><p>  рдЬреЛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдФрд░ рдкрдардиреАрдп рд╣реИред </p><br><h2 id="rxcommand-v-detalyah">  RxCommand рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ </h2><br><p><img src="https://habrastorage.org/getpro/habr/post_images/0aa/485/a85/0aa485a85b55c760e32b482a6c00b758.png"></p><br><p>  RxCommand рдореЗрдВ рдПрдХ рдЗрдирдкреБрдЯ рдФрд░ рдкрд╛рдВрдЪ рдЖрдЙрдЯрдкреБрдЯ рд╡реЗрдзрд╢рд╛рд▓рд╛рдПрдБ рд╣реИрдВ: </p><br><ul><li><p>  <strong>canExecuteInput</strong> рдПрдХ рд╡реИрдХрд▓реНрдкрд┐рдХ <strong>рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓</strong> <code>Observable&lt;bool&gt;</code> рдЬрд┐рд╕реЗ рдЖрдк RxCommand рдмрдирд╛рддреЗ рд╕рдордп рдлреИрдХреНрдЯреНрд░реА рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ RxCommand рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреНрдпрд╛ рдЗрд╕реЗ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдпрд╣ рдкреНрд░рд╛рдкреНрдд рдЕрдВрддрд┐рдо рдореВрд▓реНрдп рдХреЗ рдЖрдзрд╛рд░ рдкрд░ред </p><br></li><li><p>  <strong>isExecuting</strong> рдПрдХ <code>Observable&lt;bool&gt;</code> рдЬреЛ рд╕рдВрдХреЗрдд рджреЗрддрд╛ рд╣реИ рдХрд┐ рдХрдорд╛рдВрдб рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЕрдкрдирд╛ рдХрд╛рд░реНрдп рдХрд░ рд░рд╣рд╛ рд╣реИ рдпрд╛ рдирд╣реАрдВред  рдЬрдм рдХреЛрдИ рдЯреАрдо рд╡реНрдпрд╕реНрдд рд╣реЛрддреА рд╣реИ, рддреЛ рдЙрд╕реЗ рдлрд┐рд░ рд╕реЗ рдирд╣реАрдВ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рд╕реНрдкрд┐рдирд░ рдХреЛ рд░рдирдЯрд╛рдЗрдо рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ <code>isExecuting</code> рдХреЛ <code>isExecuting</code> </p><br></li><li><p>  <strong>canExecute</strong> рдПрдХ <strong>рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓</strong> <code>Observable&lt;bool&gt;</code> рдЬреЛ рдПрдХ рдХрдорд╛рдВрдб рдХреЛ рдирд┐рд╖реНрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдХрд╛ рд╕рдВрдХреЗрдд рджреЗрддрд╛ рд╣реИред  рдпрд╣, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЪрд╛рд▓реВ / рдмрдВрдж рд░рд╛рдЬреНрдп рдХреЗ рдмреАрдЪ рдПрдХ рдмрдЯрди рдХреЗ рд░реВрдк рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреНрд░реАрдордмреНрдпреВрд▓рд░ рдХреЗ рд╕рд╛рде рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдЪрд▓рд╛ рдЬрд╛рддрд╛ рд╣реИред <br>  <em>рдЗрд╕рдХрд╛ рдЕрд░реНрде рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ:</em> </p><br><pre> <code class="cpp hljs">Observable&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; canExecute = Observable.combineLatest2&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt;(canExecuteInput,isExecuting) =&gt; canExecuteInput &amp;&amp; !isExecuting).distinct.</code> </pre> <br><p>  <em>рдЬрд┐рд╕рдХрд╛ рдорддрд▓рдм рд╣реИ</em> </p><br><ul><li>  рдЕрдЧрд░ рд╕рд╣реА рд░рд┐рдЯрд░реНрди рдХрд╛ рдирд┐рд╖реНрдкрд╛рджрди рд╣реЛ рддреЛ <code>false</code> рд╣реЛрдЧрд╛ </li><li>  рдпрд╣ рддрднреА <code>true</code> рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрдм рд╡рд┐рджреЗрд╢реА рд░рд┐рдЯрд░реНрди <code>false</code> ред </li></ul><br></li><li><p>  <strong>thrownException</strong> рдПрдХ <strong>рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓</strong> <code>Observable&lt;Exception&gt;</code> ред  рд╕рднреА рдЕрдкрд╡рд╛рдж рдЬреЛ рдПрдХ рдкреИрдХреЗрдЬреНрдб рдлрдВрдХреНрд╢рди рдлреЗрдВрдХ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрдиреНрд╣реЗрдВ рдкрдХрдбрд╝рдХрд░ рдЗрд╕ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛ред  рдпрджрд┐ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рд╣реЛрддреА рд╣реИ, рддреЛ рдЙрд╕реЗ рд╕реБрдирдирд╛ рдФрд░ рдПрдХ рд╕рдВрд╡рд╛рдж рдмреЙрдХреНрд╕ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред </p><br></li><li><p>  <strong>(рдЯреАрдо рд╣реА)</strong> рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп рднреА рд╣реИред  рд╡рд░реНрдХрд┐рдВрдЧ рдлрдВрдХреНрд╢рди рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдорд╛рдиреЛрдВ рдХреЛ рдЗрд╕ рдЪреИрдирд▓ рдкрд░ рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рддрд╛рдХрд┐ рдЖрдк рд╕реАрдзреЗ RxCommand рдХреЛ рд╕реНрдЯреНрд░реАрдорд▓рд╛рдЗрдирд░ рдореЗрдВ рд╕реНрдЯреНрд░реАрдо рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд▓рд┐рдП рдкрд╛рд╕ рдХрд░ рд╕рдХреЗрдВ </p><br></li><li><p>  <strong>рдкрд░рд┐рдгрд╛рдореЛрдВ</strong> рдореЗрдВ рд╕рднреА рдХрдорд╛рдВрдб <code>Observable&lt;CommandResult&gt;</code> рдПрдХ <code>Observable&lt;CommandResult&gt;</code> , рдЬрд╣рд╛рдБ <code>CommandResult</code> рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ </p><br></li></ul><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// Combined execution state of an `RxCommand` /// Will be issued for any state change of any of the fields /// During normal command execution, you will get this item's listening at the command's [.results] observable. /// 1. If the command was just newly created, you will get `null, false, false` (data, error, isExecuting) /// 2. When calling execute: `null, false, true` /// 3. When exceution finishes: `result, false, false` class CommandResult&lt;T&gt; { final T data; final Exception error; final bool isExecuting; const CommandResult(this.data, this.error, this.isExecuting); bool get hasData =&gt; data != null; bool get hasError =&gt; error != null; @override bool operator ==(Object other) =&gt; other is CommandResult&lt;T&gt; &amp;&amp; other.data == data &amp;&amp; other.error == error &amp;&amp; other.isExecuting == isExecuting; @override int get hashCode =&gt; hash3(data.hashCode, error.hashCode, isExecuting.hashCode); @override String toString() { return 'Data: $data - HasError: $hasError - IsExecuting: $isExecuting'; } }</span></span></code> </pre> <br><p>  <code>.results</code> рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧреА рд╣реИ рдпрджрд┐ рдЖрдк рд╕реАрдзреЗ рд╕реНрдЯреНрд░реАрдордмреНрдпреВрд▓рд░ рдкрд░ рдХрдорд╛рдВрдб рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдкрд╛рд╕ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдпрд╣ рдХрдорд╛рдВрдб рдХреА рд╕реНрдерд┐рддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд┐рднрд┐рдиреНрди рд╕рд╛рдордЧреНрд░реА рдХреЛ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░реЗрдЧрд╛, рдФрд░ рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">rx_widgets</a> рдкреИрдХреЗрдЬ рд╕реЗ <code>RxLoader</code> рд╕рд╛рде рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдпрд╣рд╛рдБ рдПрдХ рдЙрджрд╛рд╣рд░рдг RxLoader рд╡рд┐рдЬреЗрдЯ рд╣реИ рдЬреЛ <code>.results</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs">Expanded( <span class="hljs-comment"><span class="hljs-comment">/// RxLoader      ///    Stream&lt;CommandResult&gt; child: RxLoader&lt;List&lt;WeatherEntry&gt;&gt;( spinnerKey: AppKeys.loadingSpinner, radius: 25.0, commandResults: sl.get&lt;AppManager&gt;().updateWeatherCommand.results, /// ,  .hasData == true dataBuilder: (context, data) =&gt; WeatherListView(data, key: AppKeys.weatherList), /// ,  .isExceuting == true placeHolderBuilder: (context) =&gt; Center( key: AppKeys.loaderPlaceHolder, child: Text("No Data")), /// ,  .hasError == true errorBuilder: (context, ex) =&gt; Center( key: AppKeys.loaderError, child: Text("Error: ${ex.toString()}")), ), ),</span></span></code> </pre><br><h2 id="sozdanie-rxcommands">  RxCommands рдмрдирд╛рдирд╛ </h2><br><p>  RxCommands рддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдФрд░ рдЕрддреБрд▓реНрдпрдХрд╛рд▓рд┐рдХ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ: </p><br><ul><li>  рдЙрдирдХреЗ рдкрд╛рд╕ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдирд╣реАрдВ рд╣реИ рдФрд░ рдПрдХ рдкрд░рд┐рдгрд╛рдо рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ; </li><li>  рдЙрдирдХреЗ рдкрд╛рд╕ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИ рдФрд░ рдкрд░рд┐рдгрд╛рдо рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ; </li><li>  рдЙрдирдХреЗ рдкрд╛рд╕ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдирд╣реАрдВ рд╣реИ рдФрд░ рдПрдХ рдкрд░рд┐рдгрд╛рдо рд▓реМрдЯрд╛рддрд╛ рд╣реИ; </li><li>  рдЙрдирдХреЗ рдкрд╛рд╕ рдПрдХ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИ рдФрд░ рдПрдХ рдкрд░рд┐рдгрд╛рдо рд▓реМрдЯрд╛рддрд╛ рд╣реИ; </li></ul><br><p>  рд╕рднреА рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд▓рд┐рдП, RxCommand рд╕рд┐рдВрдХреНрд░реЛрдирд╕ рдФрд░ рдПрд╕рд┐рдВрдХреНрд░реЛрдирд╕ рд╣реИрдВрдбрд▓рд░реНрд╕ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП рдХрдИ рдлреИрдХреНрдЯреНрд░реА рд╡рд┐рдзрд┐рдпрд╛рдБ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, TResult&gt; createSync&lt;TParam, TResult&gt;(Func1&lt;TParam, TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, TResult&gt; createSyncNoParam&lt;TResult&gt;(Func&lt;TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createSyncNoResult&lt;TParam&gt;(Action1&lt;TParam&gt; action,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createSyncNoParamNoResult(Action action,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, TResult&gt; createAsync&lt;TParam, TResult&gt;(AsyncFunc1&lt;TParam, TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, TResult&gt; createAsyncNoParam&lt;TResult&gt;(AsyncFunc&lt;TResult&gt; func,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;TParam, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createAsyncNoResult&lt;TParam&gt;(AsyncAction1&lt;TParam&gt; action,... <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createAsyncNoParamNoResult(AsyncAction action,...</code> </pre> <br><p>  <strong>рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЕрдЧрд░ рдЖрдкрдХрд╛ рдкреИрдХ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдлрд╝рдВрдХреНрд╢рди рдорд╛рди рд╡рд╛рдкрд╕ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдлрд╝рдВрдХреНрд╢рди рдирд┐рд╖реНрдкрд╛рджрд┐рдд рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж RxCommand рдПрдХ рдЦрд╛рд▓реА рдорд╛рди рд▓реМрдЯрд╛рдПрдЧрд╛ред</strong>  <strong>рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЖрдк рд╢реНрд░реЛрддрд╛ рдХреЛ рдРрд╕реА рдХрдорд╛рдВрдб рдкрд░ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдкреВрд░рд╛ рд╣реЛрдиреЗ рдкрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░реЗред</strong> </p><br><h2 id="dostup-k-poslednemu-rezultatu">  рдирд╡реАрдирддрдо рдкрд░рд┐рдгрд╛рдо рдХреЗ рд▓рд┐рдП рдкреНрд░рд╡реЗрд╢ </h2><br><p>  <code>RxCommand.lastResult</code> рдЖрдкрдХреЛ рдХрдорд╛рдВрдб рдирд┐рд╖реНрдкрд╛рджрди рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЗ рдЕрдВрддрд┐рдо рд╕рдлрд▓ рдореВрд▓реНрдп рддрдХ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ <code>initialData</code> рдореЗрдВ рдЖрд░рдВрднрд┐рдХ <code>initialData</code> рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдк рд░рди рдЯрд╛рдЗрдо рдореЗрдВ рдпрд╛ рддреНрд░реБрдЯрд┐ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ CommandResult рдЗрд╡реЗрдВрдЯреНрд╕ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдХрдорд╛рдВрдб рдмрдирд╛рддреЗ рд╕рдордп рдЖрдк <code>emitInitialCommandResult = true</code> рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдпрджрд┐ рдЖрдк <code>.lastResult</code> рд▓рд┐рдП рдПрдХ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдорд╛рди рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдЗрд╕реЗ <code>initialData</code> рдореЗрдВ initialData рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдХрдорд╛рдВрдб рдмрдирд╛рддреЗ рд╕рдордп рдЗрд╕реЗ <code>initialLastResult</code> рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд╕рд╛рде рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><h2 id="primer---delaem-flutter-reaktivnym">  рдЙрджрд╛рд╣рд░рдг - рд╕реНрдкрдВрджрди рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛рд╢реАрд▓ рдмрдирд╛рдирд╛ </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрджрд╛рд╣рд░рдг рдХреЗ</a> рдирд╡реАрдирддрдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрд╕реНрдХрд░рдг рдХреЛ</a> <strong>RxVMS рдХреЗ</strong> рд▓рд┐рдП рдкреБрдирд░реНрдЧрдард┐рдд <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд┐рдпрд╛</a> рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдЕрдм рдЖрдкрдХреЗ рдкрд╛рд╕ рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЪреВрдВрдХрд┐ рдпрд╣ рдПрдХ рдмрд╣реБрдд рд╣реА рд╕рд░рд▓ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╣реИ, рд╣рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рдкреНрд░рдмрдВрдзрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppManager</span></span></span><span class="hljs-class"> {</span></span> RxCommand&lt;String, List&lt;WeatherEntry&gt;&gt; updateWeatherCommand; RxCommand&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; switchChangedCommand; RxCommand&lt;String, String&gt; textChangedCommand; AppManager() { <span class="hljs-comment"><span class="hljs-comment">//    bool         //   Observable switchChangedCommand = RxCommand.createSync&lt;bool, bool&gt;((b) =&gt; b); //    switchChangedCommand  canExecute Observable  // updateWeatherCommand updateWeatherCommand = RxCommand.createAsync&lt;String, List&lt;WeatherEntry&gt;&gt;( sl.get&lt;WeatherService&gt;().getWeatherEntriesForCity, canExecute: switchChangedCommand, ); //         textChangedCommand = RxCommand.createSync&lt;String, String&gt;((s) =&gt; s); //    ... textChangedCommand //     500ms... .debounce(new Duration(milliseconds: 500)) // ...   updateWeatherCommand .listen(updateWeatherCommand); //     updateWeatherCommand(''); } }</span></span></code> </pre> <br><p>  рдЖрдк рд╡рд┐рднрд┐рдиреНрди RxCommands рдХреЛ рдПрдХ рд╕рд╛рде рдЬреЛрдбрд╝ рд╕рдХрддреЗ рд╣реИрдВред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ <code>switchedChangedCommand</code> рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ <strong>updateWeatherCommand рдХреЗ</strong> рд▓рд┐рдП рдПрдХ <strong>рдЕрд╡рд▓реЛрдХрди рдпреЛрдЧреНрдп рд╣реИ</strong> ред </p><br><p>  рдЕрдм рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдореЗрдВ рдкреНрд░рдмрдВрдзрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Scaffold( appBar: AppBar(title: Text(<span class="hljs-string"><span class="hljs-string">"WeatherDemo"</span></span>)), resizeToAvoidBottomPadding: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, body: Column( children: &lt;Widget&gt;[ Padding( padding: <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> EdgeInsets.all(<span class="hljs-number"><span class="hljs-number">16.0</span></span>), child: TextField( key: AppKeys.textField, autocorrect: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, controller: _controller, decoration: InputDecoration( hintText: <span class="hljs-string"><span class="hljs-string">"Filter cities"</span></span>, ), style: TextStyle( fontSize: <span class="hljs-number"><span class="hljs-number">20.0</span></span>, ), <span class="hljs-comment"><span class="hljs-comment">//    textChangedCommand! onChanged: sl.get&lt;AppManager&gt;().textChangedCommand, ), ), Expanded( /// RxLoader   builders   ///   Stream&lt;CommandResult&gt; child: RxLoader&lt;List&lt;WeatherEntry&gt;&gt;( spinnerKey: AppKeys.loadingSpinner, radius: 25.0, commandResults: sl.get&lt;AppManager&gt;().updateWeatherCommand.results, dataBuilder: (context, data) =&gt; WeatherListView(data, key: AppKeys.weatherList), placeHolderBuilder: (context) =&gt; Center(key: AppKeys.loaderPlaceHolder, child: Text("No Data")), errorBuilder: (context, ex) =&gt; Center(key: AppKeys.loaderError, child: Text("Error: ${ex.toString()}")), ), ), Padding( padding: const EdgeInsets.all(8.0), child: Row( children: &lt;Widget&gt;[ ///  Updatebutton    updateWeatherCommand.canExecute Expanded( //        Streambuilder, //      WidgetSelector child: WidgetSelector( buildEvents: sl .get&lt;AppManager&gt;() .updateWeatherCommand .canExecute, onTrue: RaisedButton( key: AppKeys.updateButtonEnabled, child: Text("Update"), onPressed: () { _controller.clear(); sl.get&lt;AppManager&gt;().updateWeatherCommand(); }, ), onFalse: RaisedButton( key: AppKeys.updateButtonDisabled, child: Text("Please Wait"), onPressed: null, ), ), ), //    canExecuteInput StateFullSwitch( state: true, onChanged: sl.get&lt;AppManager&gt;().switchChangedCommand, ), ], ), ), ], ), );</span></span></code> </pre> <br><h2 id="tipovye-shablony-ispolzovaniya">  рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрдкрдпреЛрдЧ рдкреИрдЯрд░реНрди </h2><br><p>  рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <strong>CommandResults</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдПрдХ рдХрдорд╛рдВрдб рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд░рд╛рдЬреНрдпреЛрдВ рдХреЛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рджреЗрдЦрд╛ рд╣реИред  рдЙрди рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЬрд╣рд╛рдВ рд╣рдо рдпрд╣ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдХреНрдпрд╛ рдХрдорд╛рдВрдб рд╕рдлрд▓ рдерд╛ (рд▓реЗрдХрд┐рди рдкрд░рд┐рдгрд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ), рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рдкреИрдЯрд░реНрди <code>initState</code> рд╕реНрдЯреЗрдЯрдлреБрд▓рд╡рд┐рдЯрдЧреЗрдЯ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <code>initState</code> рдХреЛ рд╕реБрдирдиреЗ рдХреЗ рд▓рд┐рдП рд╣реИред  рдпрд╣рд╛рдБ рдПрдХ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИред </p><br><p>  <code>createEventCommand</code> рд▓рд┐рдП рдкрд░рд┐рднрд╛рд╖рд╛: </p><br><pre> <code class="cpp hljs"> RxCommand&lt;Event, <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>&gt; createEventCommand;</code> </pre> <br><p>  рдпрд╣ рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ <strong>рдИрд╡реЗрдВрдЯ</strong> рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдЧрд╛ рдФрд░ рдХреЛрдИ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдорд╛рди рдирд╣реАрдВ рд▓реМрдЯрд╛рдПрдЧрд╛ред  рд▓реЗрдХрд┐рди, рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╕реАрдЦрд╛ рдерд╛, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдПрдХ RxCommand рдПрдХ рд╡рд╛рдкрд╕реА рдкреНрд░рдХрд╛рд░ рдХреЗ <code>void</code> рд╕рд╛рде рдкреВрд░рд╛ рд╣реЛрдиреЗ рдкрд░ рдПрдХ рдПрдХрд▓ рдбреЗрдЯрд╛ рдЖрдЗрдЯрдо рд▓реМрдЯрд╛рдПрдЧрд╛ред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдХрдорд╛рдВрдб рдкреВрд░рд╛ рд╣реЛрддреЗ рд╣реА рд╣рдо рдЕрдкрдиреЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЛ рдЯреНрд░рд┐рдЧрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕ рд╡реНрдпрд╡рд╣рд╛рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initState</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      ,        _eventCommandSubscription = _createCommand.listen((_) async { Navigator.pop(context); await showToast('Event saved'); }); //        _errorSubscription = _createEventCommand.thrownExceptions.listen((ex) async { await sl.get&lt;ErrorReporter&gt;().logException(ex); await showMessageDialog(context, 'There was a problem saving event', ex.toString()); }); }</span></span></code> </pre> <br><p>  <strong>рдорд╣рддреНрд╡рдкреВрд░реНрдг</strong> : рдЬрдм рд╣рдорд╛рд░реА рдЕрдм рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ рд╕рджрд╕реНрдпрддрд╛ рдХреЛ рдкреВрд░рд╛ рдХрд░рдирд╛ рди рднреВрд▓реЗрдВ: </p><br><pre> <code class="cpp hljs">@<span class="hljs-function"><span class="hljs-function">override </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dispose</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ _eventCommandSubscription?.cancel(); _errorSubscription?.cancel(); super.dispose(); }</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрджрд┐ рдЖрдк рд╡реНрдпрд╕реНрдд рдХрд╛рдЙрдВрдЯрд░ рдбрд┐рд╕реНрдкреНрд▓реЗ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><ul><li>  <code>initState</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <code>isExecuting</code> рдпреЛрдЧреНрдп рдЖрджреЗрд╢реЛрдВ рдХреЛ <code>isExecuting</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реБрдиреЛ; </li><li>  рд╕рджрд╕реНрдпрддрд╛ рдореЗрдВ рдХрд╛рдЙрдВрдЯрд░ рдХреЛ рджрд┐рдЦрд╛рдирд╛ / рдЫрд┐рдкрд╛рдирд╛;  рд╕рд╛рде рд╣реА </li><li>  <strong>StreamBuilder рдХреЗ</strong> рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕реНрд░реЛрдд рдХреЗ рд░реВрдк рдореЗрдВ рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ </li></ul><br><h2 id="oblegchenie-zhizni-s-rxcommandlisteners">  RxCommandListeners рдХреЗ рд╕рд╛рде рдЬреАрд╡рди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рдирд╛ </h2><br><p>  рдпрджрд┐ рдЖрдк рдХрдИ рдЕрд╡рд▓реЛрдХрдиреАрдп рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рд╕рдВрднрд╡рддрдГ рдХрдИ рд╕рджрд╕реНрдпрддрд╛ рдХрд╛ рдкреНрд░рдмрдВрдзрди рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рдПрдХ рд╕рдореВрд╣ рдХреЛ рд╕реБрдирдиреЗ рдФрд░ рдЬрд╛рд░реА рдХрд░рдиреЗ рдХрд╛ рдкреНрд░рддреНрдпрдХреНрд╖ рдирд┐рдпрдВрддреНрд░рдг рдореБрд╢реНрдХрд┐рд▓ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рдХреЛрдб рдХреЛ рдХрдо рдкрдардиреАрдп рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рдЬреЛрдЦрд┐рдо рдореЗрдВ рдбрд╛рд▓рддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдкреВрд░реНрдг рд╣реЛрдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ <code>cancel</code> рднреВрд▓ рдЬрд╛рддрд╛ рд╣реИ)ред </p><br><p>  <strong>Rx_command</strong> рдХрд╛ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рд╕рд╣рд╛рдпрдХ рд╡рд░реНрдЧ <strong>RxCommandListener рдХреЛ</strong> рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдЬрд┐рд╕реЗ рдЗрд╕ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдирд┐рд░реНрдорд╛рддрд╛ рд╡рд┐рднрд┐рдиреНрди рд░рд╛рдЬреНрдп рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдХрдорд╛рдВрдб рдФрд░ рд╣реИрдВрдбрд▓рд░ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RxCommandListener</span></span></span><span class="hljs-class">&lt;TParam, TResult&gt; {</span></span> final RxCommand&lt;TParam, TResult&gt; command; <span class="hljs-comment"><span class="hljs-comment">//       final void Function(TResult value) onValue; //    isExecuting final void Function(bool isBusy) onIsBusyChange; //       final void Function(Exception ex) onError; //    canExecute final void Function(bool state) onCanExecuteChange; //    .results Observable  final void Function(CommandResult&lt;TResult&gt; result) onResult; //     /  final void Function() onIsBusy; final void Function() onNotBusy; //     final Duration debounceDuration; RxCommandListener(this.command,{ this.onValue, this.onIsBusyChange, this.onIsBusy, this.onNotBusy, this.onError, this.onCanExecuteChange, this.onResult, this.debounceDuration,} ) void dispose();</span></span></code> </pre> <br><p>  рдЖрдкрдХреЛ рд╕рднреА рд╣реИрдВрдбрд▓рд░ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд╛рд╕ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  рдЙрдирдореЗрдВ рд╕реЗ рд╕рднреА рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЖрдк рдХреЗрд╡рд▓ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рдирдХреА рдЖрдкрдХреЛ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдЖрдкрдХреЛ рдЕрдкрдиреЗ <code>RxCommandListener</code> рдХреЛ рдЕрдкрдиреЗ <code>RxCommandListener</code> рдореЗрдВ рдХреЙрд▓ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдФрд░ рдпрд╣ рд╕рдм рд╕рджрд╕реНрдпрддрд╛ рдХреЗ рдЕрдВрджрд░ рдЙрдкрдпреЛрдЧ рдХреЛ рд░рджреНрдж рдХрд░ рджреЗрдЧрд╛ред </p><br><p>  рдЖрдЗрдП рдПрдХ рдФрд░ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ <code>RxCommandListener</code> рдХреЗ рд╕рд╛рде рдФрд░ рдмрд┐рдирд╛ рд╕рдорд╛рди рдХреЛрдб рдХреА рддреБрд▓рдирд╛ рдХрд░реЗрдВред  <code>selectAndUploadImageCommand</code> рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдпрд╣рд╛рдБ рдЪреИрдЯ рд╕реНрдХреНрд░реАрди рдкрд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд╣рд╛рдБ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЪрд┐рддреНрд░ рдЕрдкрд▓реЛрдб рдХрд░ рд╕рдХрддрд╛ рд╣реИред  рдЬрдм рдЖрджреЗрд╢ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ: </p><br><ul><li>  <strong>ImagePicker</strong> рд╕рдВрд╡рд╛рдж <strong>рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛</strong> рдЬрд╛рддрд╛ <strong>рд╣реИред</strong> </li><li>  рдЫрд╡рд┐ рдХрд╛ рдЪрдпрди рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рд▓реЛрдб рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ </li><li>  рдбрд╛рдЙрдирд▓реЛрдб рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж, рдХрдорд╛рдВрдб рдЗрдореЗрдЬ рд╕реНрдЯреЛрд░реЗрдЬ рдПрдбреНрд░реЗрд╕ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рддрд╛ рд╣реИ рддрд╛рдХрд┐ рдЖрдк рдПрдХ рдирдИ рдЪреИрдЯ рдПрдВрдЯреНрд░реА рдмрдирд╛ рд╕рдХреЗрдВред </li></ul><br><p>  <strong>RxCommandListener рдХреЗ</strong> рдмрд┐рдирд╛: </p><br><pre> <code class="cpp hljs">_selectImageCommandSubscription = sl .get&lt;ImageManager&gt;() .selectAndUploadImageCommand .listen((imageLocation) async { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (imageLocation == null) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    sl.get&lt;EventManager&gt;().createChatEntryCommand(new ChatEntry( event: widget.event, isImage: true, content: imageLocation.downloadUrl, )); }); _selectImageIsExecutingSubscription = sl .get&lt;ImageManager&gt;() .selectAndUploadImageCommand .isExecuting .listen((busy) { if (busy) { MySpinner.show(context); } else { MySpinner.hide(); } }); _selectImageErrorSubscription = sl .get&lt;ImageManager&gt;() .selectAndUploadImageCommand .thrownExceptions .listen((ex) =&gt; showMessageDialog(context, 'Upload problem', "We cannot upload your selected image at the moment. Please check your internet connection"));</span></span></code> </pre> <br><p>  <strong>RxCommandListener</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛: </p><br><pre> <code class="cpp hljs">selectImageListener = RxCommandListener( command: sl.get&lt;ImageManager&gt;().selectAndUploadImageCommand, onValue: (imageLocation) async { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (imageLocation == null) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; sl.get&lt;EventManager&gt;().createChatEntryCommand(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ChatEntry( event: widget.event, isImage: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, content: imageLocation.downloadUrl, )); }, onIsBusy: () =&gt; MySpinner.show(context), onNotBusy: MySpinner.hide, onError: (ex) =&gt; showMessageDialog(context, <span class="hljs-string"><span class="hljs-string">'Upload problem'</span></span>, <span class="hljs-string"><span class="hljs-string">"We cannot upload your selected image at the moment. Please check your internet connection"</span></span>));</code> </pre> <br><p>  рдЖрдо рддреМрд░ рдкрд░, рдореИрдВ рд╣рдореЗрд╢рд╛ рдПрдХ RxCommandListener рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реВрдВрдЧрд╛ рдпрджрд┐ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдСрдмреНрдЬрд░реНрд╡реЗрдмрд▓ рд╣реЛред </p><br><p>  <strong>RxCommands</strong> рдЖрдЬрд╝рдорд╛рдПрдВ рдФрд░ рджреЗрдЦреЗрдВ рдХрд┐ рдпрд╣ рдЖрдкрдХреЗ рдЬреАрд╡рди рдХреЛ рдХреИрд╕реЗ рдЖрд╕рд╛рди рдмрдирд╛ рд╕рдХрддрд╛ рд╣реИред <br>  <em>рд╡реИрд╕реЗ, рдЖрдкрдХреЛ <strong>RxCommands</strong> рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреЗ рд▓рд┐рдП <strong>RxVMS</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред</em> </p><br><p>  <code>RxCommand</code> рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП <code>RxCommand</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">readme</a> рдкреИрдХреЗрдЬ рдкрдврд╝реЗрдВред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi449872/">https://habr.com/ru/post/hi449872/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi449862/index.html">рдореЛрдмрд╛рдЗрд▓ # 296 рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рджрд┐рд▓рдЪрд╕реНрдк рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдкрд╛рдЪрди (22 рдЕрдкреНрд░реИрд▓ - 26 рдЕрдкреНрд░реИрд▓ рдХреЛ)</a></li>
<li><a href="../hi449864/index.html">ResNet50ред рдЦреБрдж рдХреЗ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди</a></li>
<li><a href="../hi449866/index.html">HTTPS рдкрд░ рд╕рдВрднрд╛рд╡рд┐рдд рд╣рдорд▓реЗ рдФрд░ рдЙрдирдХреЗ рдЦрд┐рд▓рд╛рдл рдмрдЪрд╛рд╡ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
<li><a href="../hi449868/index.html">GIT рдбреЗрдЯрд╛рдмреЗрд╕ рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг рддрдВрддреНрд░ (MySQL рдбрдВрдк рдкреНрд░рдмрдВрдзрди)</a></li>
<li><a href="../hi449870/index.html">рдЬреЗрдиреЗрд░рд┐рдХ JDDecoder</a></li>
<li><a href="../hi449876/index.html">рдирд╡рд╛рдЪрд╛рд░ SSI-2001: рдЖрдИрдмреАрдПрдо рдкреАрд╕реА (рдФрд░ рдЗрд╕рдХреА рдкреНрд░рддрд┐рдХреГрддрд┐) рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рджреБрд░реНрд▓рдн рд╕рд╛рдЙрдВрдб рдХрд╛рд░реНрдбреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХреА рдХрд╣рд╛рдиреА</a></li>
<li><a href="../hi449878/index.html">рдЖрдИрдЯреА рдореЗрдВ рдкреЗрдЯреЗрдВрдЯ рдЕрдиреБрд╕рдВрдзрд╛рдиред рдпреБрд╡рд╛ рд▓рдбрд╝рд╛рдХреВ рдХрд╛ рдХреЛрд░реНрд╕ред рднрд╛рдЧ I рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЛ рдХреИрд╕реЗ рд╕рдордЭреЗрдВ рдФрд░ рдПрдХ рд░рд┐рдкреЛрд░реНрдЯ рдЯреЗрдореНрдкрд▓реЗрдЯ рддреИрдпрд╛рд░ рдХрд░реЗрдВ</a></li>
<li><a href="../hi449880/index.html">рдПрдЬрд╛рдЗрд▓ рд▓рд╛рдЗрдЯ: рдмрд░реНрдирдЖрдЙрдЯ рдХреЗ рдЦрд┐рд▓рд╛рдл рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ</a></li>
<li><a href="../hi449884/index.html">рдИрдПрд╕рдкреА 8266 рдкрд░ 8008 рдорд╛рдЗрдХреНрд░реЛрдкреНрд░реЛрд╕реЗрд╕рд░ рдЙрддреНрд╕рд░реНрдЬрди</a></li>
<li><a href="../hi449886/index.html">рдпрд╣ рдмрд╛рдЗрдХ рдЪрд▓рд╛рдиреЗ рдЬреИрд╕рд╛ рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>