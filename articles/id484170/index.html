<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌪️ 🙍🏻 👩‍🎓 Perbarui Titik Periksa dari R77.30 hingga 80.20 👩‍❤️‍💋‍👨 👴🏽 🌊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada musim gugur 2019, Check Point berhenti mendukung versi R77.XX, dan perlu diperbarui. Banyak yang telah dikatakan tentang perbedaan antara versi, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Perbarui Titik Periksa dari R77.30 hingga 80.20</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/484170/"><img src="https://habrastorage.org/webt/iz/bu/-j/izbu-j4fcyoxpsga-spzdz-rujc.png"><br><br>  Pada musim gugur 2019, Check Point berhenti mendukung versi R77.XX, dan perlu diperbarui.  Banyak yang telah dikatakan tentang perbedaan antara versi, pro dan kontra dari transisi ke R80.  Mari kita bicara tentang cara untuk benar-benar meningkatkan Titik Periksa alat virtual (CloudGuard untuk VMware ESXi, Hyper-V, KVM Gateway NGTP) dan apa yang salah. <br><br>  Jadi, kami memiliki 2 insinyur CCSE, lebih dari selusin cluster virtual Check Point R77.30, beberapa awan, sedikit perbaikan terbaru dan seluruh lautan berbagai bug, gangguan dan semua itu, semua warna dan ukuran, dan tenggat waktu yang sangat ketat.  Ayo pergi! <br><blockquote>  <b>Konten:</b> <br><br>  <a href="https://habr.com/ru/company/dataline/blog/484170/">Persiapan</a> <br>  <a href="https://habr.com/ru/company/dataline/blog/484170/">Memperbarui server manajemen</a> <br>  <a href="https://habr.com/ru/company/dataline/blog/484170/">Memperbarui cluster</a> <br></blockquote><br><img src="https://habrastorage.org/webt/ng/ow/ye/ngowyegpn17chzucgvdx_afc2ag.png"><br><br>  <i>Inilah infrastruktur infrastruktur klien tipikal dengan virtual Check Point</i> <br><a name="habracut"></a><br><a name="ONE"></a><h2>  Persiapan </h2><br>  Pertama-tama, Anda perlu memeriksa kecukupan sumber daya untuk pembaruan.  Persyaratan minimum yang disarankan untuk R80.20 sekarang terlihat seperti ini: <br><br><div class="scrollable-table"><table><tbody><tr><td>  Perangkat <br></td><td>  CPU <br></td><td>  RAM <br></td><td>  HDD <br></td></tr><tr><td>  Gerbang keamanan <br></td><td>  2 inti <br></td><td>  4 gb <br></td><td>  Mulai 15 GB <br></td></tr><tr><td>  SMS <br></td><td>  2 inti <br></td><td>  6 gb <br></td><td>  - </td></tr></tbody></table></div><br>  <i>Rekomendasi dijelaskan dalam <a href="https://sc1.checkpoint.com/documents/R80.20_GA/WebAdminGuides/EN/CP_R80.20_RN/html_frameset.htm">CP_R80.20_GA_Release_Notes</a> .</i> <br><br>  Tapi kami akan realistis.  Jika ini cukup dalam konfigurasi paling minimal, maka, seperti yang ditunjukkan oleh praktik, biasanya kami mengaktifkan https inspeksi, SmartEvent berfungsi untuk SMS, dll., Yang, tentu saja, membutuhkan kapasitas yang sama sekali berbeda.  Namun secara keseluruhan tidak lebih besar dari untuk R77.30. <br><br>  Namun ada nuansa.  Dan mereka memperhatikan, pertama-tama, ukuran memori fisik.  Banyak operasi langsung selama proses peningkatan akan membutuhkan ruang hard disk. <br><br>  Untuk server manajemen, jumlah ruang disk kosong akan sangat tergantung pada volume log saat ini (jika kami ingin menyimpannya) dan pada jumlah Revisi Basis Data yang disimpan, walaupun kami tidak akan membutuhkannya dalam jumlah besar.  Tentu saja, untuk node cluster (kecuali Anda menyimpan log secara lokal juga) semua ini tidak masalah.  Berikut cara memeriksa apakah Anda memiliki ruang yang tepat: <br><br><ol><li>  Kami terhubung ke Smart Management Server melalui ssh, masuk ke mode ahli dan masukkan perintah: <br><br>  <b>[Ahli @ cp-sms: 0] # df -h</b> </li><li>  Pada output, kita akan melihat sesuatu seperti konfigurasi ini: <br><br>  <b>Ukuran Sistem File yang Digunakan Penggunaan yang Tersedia% Dipasang di</b> <b><br></b>  <b>/ dev / mapper / vg_splat-lv_current 30G 7.4G 21G 27% /</b> <b><br></b>  <b>/ dev / sda1 289M 24M 251M 9% / boot</b> <b><br></b>  <b>tmpfs 2.0G 0 2.0G 0% / dev / shm</b> <b><br></b>  <b>/ dev / mapper / vg_splat-lv_log 243G 177G 53G 78% / var / log</b> </li><li>  Kami saat ini tertarik pada bagian <b>/ var / log</b> </li></ol><br>  Perlu diingat bahwa tergantung pada kebijakan menyimpan dan menghapus file log lama, serta ukuran database yang diekspor, lebih banyak ruang mungkin diperlukan.  Jika saat membuat arsip, ruang kosong menjadi kurang dari yang ditentukan dalam kebijakan untuk menyimpan file log, sistem akan mulai menghapus log lama dan TIDAK akan memasukkannya ke dalam arsip. <br><br>  Selain itu, untuk proses pembaruan itu sendiri, sistem akan membutuhkan ruang kosong minimum 13 GB pada hard drive.  Anda dapat memeriksa keberadaannya dengan perintah: <br><br>  <b>[Ahli @ cp-sms: 0] # pvs</b> <br><br>  Kita akan melihat kira-kira kesimpulan berikut: <br><br>  <b>PV VG Fmt Attr PSize PFree</b> <b><br></b>  <b>/ dev / sda3 vg_splat lvm2 a- 141.69G 43.69G</b> <br><br>  Dalam hal ini, kami memiliki 43 GB.  Ada sumber daya yang cukup.  Anda dapat mulai memperbarui. <br><br><a name="TWO"></a><h2>  Memperbarui Titik Periksa Server Manajemen SMS </h2><br>  Sebelum mulai bekerja, lakukan hal berikut: <br><br><ol><li>  Instal paket Alat Migrasi di server manajemen.  Untuk melakukan ini, Anda harus mengunggah gambar dari portal <a href="https://supportcenter.checkpoint.com/supportcenter/portal/role/supportcenterUser/page/default.psml/media-type/html%3Faction%3Dportlets.DCFileAction%255E_%255Eamp%255E_%255EeventSubmit_doGetdcdetails%3D%255E_%255Eamp%255E_%255Efileid%3D72085">Check Point</a> . </li><li>  Unduh arsip ke server manajemen melalui WinSCP di folder <b>/var/log/UpgradeR77.30_R80.20</b> (jika perlu, buat folder terlebih dahulu). </li><li>  Kami terhubung ke server manajemen melalui SSH dan pergi ke folder arsip: <b>cd /var/log/UpgradeR77.30_R80.20/</b> </li><li>  Buka zip file: <b>tar -zxvf ./ &lt;nama file&gt; .tgz</b> </li><li>  Kami memulai utilitas pre_upgrade_verifier dengan perintah: <b>./pre_upgrade_verifier -p $ FWDIR -c R77 -t R80.20</b> </li><li>  Setelah menyelesaikan perintah, laporan tentang pengaturan yang tidak kompatibel akan dihasilkan.  Ini tersedia di <b>/opt/CPsuite-R77/fw1/log/pre_upgrade_verification_report.(xls, html, txt).</b>  Lebih mudah membongkar melalui SCP dan menonton melalui browser. <br>  Untuk menghilangkan semua pengaturan yang tidak kompatibel, gunakan <a href="https://supportcenter.checkpoint.com/supportcenter/portal%3FeventSubmit_doGoviewsolutiondetails%3D%255E_%255Eamp%255E_%255Esolutionid%3Dsk117237">SK117237</a> . </li><li>  Kemudian jalankan kembali utilitas pre_upgrade_verifier untuk memverifikasi bahwa semua penyebab ketidakcocokan telah diselesaikan. </li><li>  Selanjutnya, kami mengumpulkan informasi tentang antarmuka jaringan, tabel perutean, dan mengunggah konfigurasi GAIA: <br>  <b>ip a&gt; /var/log/UpgradeR77.30_R80.20/cp-sms-config.txt</b> <b><br></b>  <b>ip r&gt; /var/log/UpgradeR77.30_R80.20/cp-sms-config.txt</b> <b><br></b>  <b>clish -c "tampilkan konfigurasi"&gt; /var/log/UpgradeR77.30_R80.20/cp-sms-config.txt</b> </li><li>  Unggah file yang diterima melalui SCP. </li><li>  Kami melakukan snapshot di tingkat virtualisasi. </li><li>  Kami meningkatkan batas waktu sesi SSH menjadi 8 jam.  Begini beruntungnya: tergantung pada ukuran pangkalan yang diekspor, ini bisa bertahan dari beberapa menit hingga beberapa jam.  Untuk melakukan ini: <br>  <b>[Expert @ HostName] # clish -c "tampilkan tidak aktif-batas waktu"</b> tonton clish batas waktu saat ini, <br><br>  <b>[Expert @ HostName] # clish -c "set tidak aktif-timeout 720"</b> tentukan clish batas waktu baru (dalam menit), <br><br>  <b>[Expert @ HostName] # echo $ TMOUT</b> lihat mode pakar timeout saat ini, <br><br>  <b>[Expert @ HostName] # export TMOUT = 3600</b> tentukan mode pakar batas waktu baru (dalam detik), jika Anda menetapkan nilainya ke 0, maka batas waktu akan dimatikan. </li><li>  Kami memuat dan memasang gambar instalasi SMS.iso ke mesin virtual. <br><br>  Sebelum langkah berikutnya, pastikan untuk memeriksa lagi bahwa Anda memiliki cukup ruang yang tidak terisi pada hard drive Anda (saya ingatkan Anda membutuhkan 13 GB). <br></li><li>  Sebelum memulai ekspor konfigurasi, kami mengubah file log dengan perintah: <b>fw logswitch</b> </li></ol><br>  <b>Konfigurasi ekspor dan log</b> <br><br><ol><li>  Jalankan utilitas migrate_export untuk membongkar konfigurasi.  Untuk melakukan ini, buka folder yang dibuat sebelumnya: <b>cd /var/log/UpgradeR77.30_R80.20/</b> dan gunakan perintah: <b>./migrate export -l /var/log/UpgradeR77.30_R80.20/SMS_w_logs_export_r77_r80.tgz</b> <br><br>  juga <br><br>  buka folder: <b>cd $ FWDIR / bin / upgrade_tools /</b> dan <br>  jalankan perintah dari sana: <b>./migrate export -l /var/log/UpgradeR77.30_R80.20/SMS_w_logs_export_r77_r80.tgz</b> <br><br>  Jika basis yang diekspor besar, maka prosedur mungkin memakan waktu beberapa jam. <br>  JANGAN PUTUSKAN SESI SSH selama prosedur. <br><br>  Dalam prosesnya, GAIA akan menampilkan pesan ini: <br><img src="https://habrastorage.org/webt/ca/za/b-/cazab-404a0urgpqe7g1vejfjta.png"><br>  Anda dapat minum kopi dan makan siang dengan aman. <br><br>  Setelah kami melihat pesan kesalahan seperti ini: <br><br><img src="https://habrastorage.org/webt/k0/v9/20/k0v920a3j-8z2pciapocj0bzhnk.png"><br><br>  Atau pesan tentang keberhasilan penyelesaian operasi: <br><br><img src="https://habrastorage.org/webt/jf/aj/nd/jfajnd1gn41wnuk-ipg2-vitgqe.png"><br><br>  Jika proses telah berlangsung selama beberapa jam, maka Anda dapat memeriksanya.  Tanpa memutuskan sesi saat ini, atur sesi paralel melalui ssh dan masukkan perintah <b>atas.</b>  Di antara proses tersebut, proses <b>migrasi</b> harus ditampilkan <b>.</b> <br><br>  Jika tanpa memutuskan sesi SSH dengan cara apa pun, gunakan: <b>ya |</b>  <b>nohup ./migrate export -l /var/log/UpgradeR77.30_R80.20/SMS_w_logs_export_r77_r80.tgz</b> <br><br>  Dalam hal ini, Anda dapat memutuskan sesi, tetapi akan tidak nyaman untuk memantau kemajuan: Anda harus memeriksa penyelesaian proses dengan perintah teratas, dan jika ada masalah tidak akan ada pesan kesalahan.  Karena itu, kami sangat merekomendasikan opsi ini. </li><li>  Hapus checksum dari arsip: <b>md5sum /var/log/UpgradeR77.30_R80.20/SMS_w_logs_export_r77_r80.tgz</b> </li><li>  Kami menyimpan nilai yang diterima dalam buku catatan. </li><li>  Kami terhubung ke SMS melalui SCP dan mengunggah arsip dengan konfigurasi ke workstation.  Pastikan untuk menggunakan transfer file dalam format Biner. </li></ol><br>  <b>Ekspor SmartEvent Database</b> <br><br>  Di sini kita memerlukan versi SMS pra-instal R80.  Tes apa pun akan dilakukan. <br><br><ol><li>  Dari SMS, kita memerlukan skrip yang terletak di sini: <b>$ RTDIR / bin / eva_db_backup.csh</b> </li><li>  Melalui SCP, muat skrip <b>eva_db_backup.csh</b> ke folder: <b>/var/log/UpgradeR77.30_R80.20/</b> </li><li>  Kami terhubung melalui SSH ke SMS.  Salin file ke folder: <b>cp /var/log/UpgradeR77.30_R80.20/eva_db_backup.csh</b> <b><br></b>  <b>$ RTDIR / bin / eva_db_backup.csh</b> <br></li><li>  <b>Ubah</b> pengkodean: <b>dos2unix $ RTDIR / bin / eva_db_backup.csh</b> </li><li>  Tambahkan pemilik: <b>chown -v admin: root $ RTDIR / bin / eva_db_backup.csh</b> </li><li>  Tambahkan izin: <b>chmod -v 0755 $ RTDIR / bin / eva_db_backup.csh</b> </li><li>  Kami mulai mengekspor basis SmartEvent: <b>$ RTDIR / bin / eva_db_backup.csh</b> </li><li>  Kami mengunggah file yang diterima melalui SCP: <b>$ RTDIR / bin / &lt;date&gt; -db-backup.backup</b> dan <b>$ RTDIR / bin / eventiaUpgrade.tar</b> ke workstation. </li></ol><br>  <b>Perbarui</b> <br><br><ol><li>  Buka <b>WebUI GAIA SMS → CPUSE → Tampilkan semua paket.</b> </li><li>  Jika CPUSE menghasilkan kesalahan koneksi cloud Connect Point, kami memeriksa pengaturan DGW, DNS, dan Proxy. </li><li>  Jika semuanya benar, tetapi kesalahan tetap ada, maka Anda perlu memperbarui CPUSE secara manual, dipandu oleh <a href="https://supportcenter.checkpoint.com/supportcenter/portal%3FeventSubmit_doGoviewsolutiondetails%3D%255E_%255Eamp%255E_%255Esolutionid%3Dsk92449%255E_%255Eamp%255E_%255Epartition%3DGeneral%255E_%255Eamp%255E_%255Eproduct%3DAll%2522">sk92449</a> . </li><li>  Unduh gambar dan buka <b>Verifier.</b>  Jika perlu, hilangkan ketidakkonsistenan. <br><br>  Akibatnya, Anda akan melihat pesan ini: <br><br><img src="https://habrastorage.org/webt/w3/ai/_w/w3ai_wdfusghwng1pwxls5l4aek.png"></li><li>  Pilih <b>R80.20 Instalasi Baru dan Tingkatkan untuk Manajemen Keamanan.</b> </li><li>  Saat menginstal pembaruan, pilih Bersihkan Instal.  Setelah instalasi, sistem akan reboot. </li><li>  Kami melewati <b>Wisaya</b> Pertama Kali <b>.</b> </li><li>  Setelah mendapatkan akses, kami memverifikasi akun. </li><li>  Kami terhubung ke SMS melalui SSH dan mengubah shell pengguna kami ke / bin / bash /: <br><br>  <b>setel pengguna &lt;username&gt; shell / bin / bash /</b> <br><br>  <b>save config</b> (jika kita ingin meninggalkan bin / bash / sebagai shell default dan setelah reboot). </li><li>  Selanjutnya, kami terhubung ke SMS melalui SCP dan dalam mode Biner kami mentransfer arsip dengan konfigurasi <b>SMS_w_logs_export_r77_r80.tgz</b> ke folder <b>/var/log/UpgradeR77.30_R80.20/</b> <b><br></b> </li><li>  Kami menghapus checksum dari arsip: <b>md5sum /var/log/UpgradeR77.30_R80.20/SMS_w_logs_export_r77_r80.tgz</b> dan membandingkannya dengan nilai sebelumnya.  Checksum harus cocok. </li><li>  Kami meningkatkan batas waktu sesi SSH menjadi 8 jam.  Untuk melakukan ini: <br><br>  <b>[Expert @ HostName] # clish -c "tampilkan tidak aktif-batas waktu"</b> tonton clish batas waktu saat ini, <br><br>  <b>[Expert @ HostName] # clish -c "set tidak aktif-timeout 720"</b> tentukan clish batas waktu baru (dalam menit), <br><br>  <b>[Expert @ HostName] # echo $ TMOUT</b> lihat mode pakar timeout saat ini, <br><br>  <b>[Expert @ HostName] # export TMOUT = 3600</b> tentukan mode pakar timeout baru (dalam detik).  Jika Anda menetapkan nilai ke 0, maka batas waktu akan dimatikan. </li><li>  Untuk mengimpor pengaturan, jalankan utilitas impor migrasi.  Untuk melakukan ini, buka folder: <b>cd $ FWDIR / bin / upgrade_tools /</b> dan jalankan import: <b>./migrate imp</b> <b><br></b>  <b>ort-l /var/log/UpgradeR77.30_R80.20/SMS_w_logs_export_r77_r80.tgz</b> </li></ol><br>  Nikmati hidup selama beberapa jam ke depan.  JANGAN PUTUSKAN SESI SSH selama prosedur.  Pada akhirnya, proses migrasi akan mengembalikan pesan sukses atau kesalahan. <br><br>  <b>Daftar periksa setelah pembaruan</b> <br><br><ol><li>  Ketersediaan sumber daya. </li><li>  SIC dengan GW. </li><li>  Lisensi  Jika lisensi ditampilkan secara salah atau tidak ditampilkan pada SMS, jalankan perintah <b>vsec_central_licence</b> untuk mendistribusikan lisensi. </li><li>  Pengaturan kebijakan. </li></ol><br>  <b>Impor SmartEvent Database</b> <br><br><ol><li>  Aktifkan Blade SmartEvent. </li><li>  Kami terhubung melalui WinSCP ke SMS dan dalam mode biner mentransfer file <b>&lt;date&gt; -db-backup.backup yang</b> telah diunduh sebelumnya dan <b>file eventiaUpgrade.tar</b> ke folder <b>/var/log/UpgradeR77.30_R80.20/</b> </li><li>  Kami memulai skrip dengan perintah: <b>$ RTDIR / bin / eventiaUpgrade.sh -upgrade /var/log/UpgradeR77.30_R80.20/eventiaUpgrade.tar</b> </li><li>  Memeriksa status: <b>watch -n 10 eventiaUpgrade.sh</b> </li><li>  Periksa log di SmartEvent.  <b>MIMPI!</b> </li></ol><br><a name="THREE"></a><h2>  Perbarui Cluster Check Point GW (Aktif / Cadangan) </h2><br>  <b>Sebelum mulai bekerja</b> <br><br><ol><li>  Kami menyimpan konfigurasi GAIA dari setiap node cluster ke file. Untuk melakukan ini, gunakan perintah: <b>clish -c "show configuration"&gt; ./ &lt;File name&gt; .txt</b> </li><li>  Kami mengunggah file menggunakan WinSCP. </li><li>  Kami terhubung ke WebUI dari kedua node dan pergi ke <b>CPUSE → Tampilkan semua</b> tab <b>paket.</b> </li><li>  Kami menemukan paket layanan untuk versi <b>R80.20 Fresh Install</b> , klik <b>Unduh.</b> </li><li>  Kami memeriksa bahwa protokol CCP bekerja dalam mode <b>Broadcast</b> , untuk ini kita masukkan perintah: <b>cphaprob -a if</b> <br>  Jika mode <b>Multicast</b> dipilih, ubahlah dengan perintah: <b>cphaconf set_ccp broadcast</b> (perintah dijalankan pada setiap node). </li><li>  Set Downtime untuk node yang terlibat dalam sistem pemantauan Anda. </li><li>  Kami memverifikasi bahwa pada tingkat virtualisasi, parameter <b>Perubahan Alamat MAC</b> dan <b>Transmisi yang Dipalsukan</b> untuk jaringan sinkronisasi diaktifkan. </li></ol><br>  <b>Perbarui</b> <br><br><ol><li>  Kami terhubung melalui ssh ke simpul aktif dan menjalankan perintah untuk memantau status cluster: <b>watch -n 2 cphaprob stat</b> </li><li>  Kami kembali ke node <b>Stan</b> WebUI pada tab <b>CPUSE</b> dan menjalankan <b>Verifier</b> untuk paket <b>Instalasi Segar R80.20 yang</b> dipilih <b>.</b> </li><li>  Kami menganalisis laporan Verifier.  Jika instalasi diizinkan, lanjutkan. </li><li>  Pilih paket <b>R80.20 Instalasi Baru</b> dan jalankan <b>Peningkatan</b> .  Selama proses peningkatan, sistem akan reboot.  Pengaturan GAIA disimpan.  Pada saat reboot, kami memantau keadaan cluster.  Setelah memuat, status node yang diperbarui harus berubah menjadi SIAP.  Dalam beberapa kasus, kami memiliki momen ketika simpul yang belum diperbarui masuk ke status Perhatian Aktif dan berhenti menampilkan status simpul yang diperbarui.  Jangan khawatir - opsi ini juga valid. </li><li>  Setelah menyelesaikan pembaruan, buka <b>SmartDashboard.</b> </li><li>  Buka objek kluster dan ubah versi klaster dari R77.30 ke R80.20.  Klik OK.  Jika terjadi kesalahan saat menyimpan perubahan: <br>  <i>Kesalahan internal telah terjadi.</i>  <i>(Kode: 0x8003001D, Tidak dapat mengakses file untuk operasi penulisan),</i> <br>  ikuti <a href="https://supportcenter.checkpoint.com/supportcenter/portal%3FeventSubmit_doGoviewsolutiondetails%3D%255E_%255Eamp%255E_%255Esolutionid%3Dsk119973">SK119973</a> .  Setelah itu, simpan perubahan dan klik <b>Instal Kebijakan.</b> </li><li>  Di pengaturan, hapus centang parameter <b>Untuk gateway cluster, jika instalasi pada anggota cluster gagal, jangan instal pada cluster itu.</b> </li><li>  Kami menetapkan kebijakan.  Sistem akan memberikan kesalahan untuk simpul Aktif, yang belum diperbarui. </li><li>  Kami terhubung ke node yang diperbarui melalui ssh dan menjalankan perintah untuk memantau status cluster: <b>watch -n 2 cphaprob stat</b> </li><li>  Kami terhubung ke node Aktif WebUI dan pergi ke <b>CPUSE → Tampilkan semua</b> tab <b>paket.</b>  Kami menemukan paket layanan untuk versi <b>R80.20 Fresh Install</b> , klik <b>Unduh.</b> </li><li>  Set Downtime untuk node yang terlibat dalam sistem pemantauan Anda. </li><li>  Kami kembali ke node Aktif WebUI pada tab <b>CPUSE</b> dan menjalankan <b>Verifier</b> untuk paket <b>Instalasi Segar R80.20 yang</b> dipilih <b>.</b> </li><li>  Kami menganalisis laporan Verifier.  Jika instalasi diizinkan, lanjutkan. </li><li>  Pilih paket <b>R80.20 Instalasi Baru</b> dan jalankan <b>Peningkatan.</b>  Selama proses peningkatan, sistem akan reboot.  Pengaturan GAIA disimpan.  Pada saat reboot, kami memantau keadaan cluster pada node yang sudah diperbarui.  Setelah reboot, status gugus pada simpul yang diperbarui akan berubah dari SIAP ke AKTIF. </li><li>  Ketika proses Upgrade selesai, luncurkan SmartDashboard dan instal kebijakan. </li></ol><br>  <b>Daftar periksa setelah pembaruan</b> <br><br><ul><li>  Log peristiwa di SmartLog, status terowongan VPN. </li><li>  Pengaturan GAIA. </li><li>  Pemulihan cluster setelah kegagalan uji. </li><li>  Lisensi dan kontrak.  Jika lisensi ditampilkan salah atau tidak ditampilkan pada SMS, jalankan perintah.  vsec_central_licence untuk distribusi lisensi. </li><li>  CoreXL. </li><li>  SecureXL. </li><li>  Perbaikan terbaru dan CPinfo pada dua node. </li></ul><br>  <b>Kesimpulan</b> <br><br>  Secara umum, pada titik ini, semuanya - Anda telah diperbarui. <br><br>  Seluruh proses kami memakan waktu rata-rata 6 hingga 12 jam, tergantung pada ukuran basis data yang diekspor.  Pekerjaan itu dilakukan selama dua malam: satu untuk memperbarui SMS, yang kedua untuk cluster. <br><br>  Tidak ada downtime lalu lintas, meskipun kami memeriksa sendiri semua kesalahan di atas. <br><br>  Tentu saja, kadang-kadang kesulitan yang sama sekali baru mungkin muncul selama proses pembaruan, tetapi ini adalah Titik Periksa, dan, seperti yang kita semua tahu, selalu ada perbaikan terbaru! <br><br>  Semoga berhasil dengan malam dan pembaruan pink dan pink Anda! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id484170/">https://habr.com/ru/post/id484170/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id484154/index.html">Metode untuk memecahkan sistem persamaan diophantine</a></li>
<li><a href="../id484160/index.html">Bakat Elusif: Rusia Kehilangan Profesional TI Terbaik</a></li>
<li><a href="../id484164/index.html">Sejarah buku dan masa depan perpustakaan</a></li>
<li><a href="../id484166/index.html">VVVVVV ??? VVVVVV !!! :)</a></li>
<li><a href="../id484168/index.html">Kami menulis strategi kami untuk pengguliran virtual dari Angular CDK</a></li>
<li><a href="../id484172/index.html">Integrasi berkelanjutan di Unity: cara mengurangi waktu perakitan dan menghemat sumber daya + payline sebagai hadiah</a></li>
<li><a href="../id484174/index.html">Castle minum dalam kondisi "ekstrim" atau bagaimana kami mengambil bagian dalam acara "DOZOR"</a></li>
<li><a href="../id484176/index.html">Menerapkan Template Status dalam Persatuan</a></li>
<li><a href="../id484178/index.html">Saklar Ethernet Cerdas untuk Planet Bumi</a></li>
<li><a href="../id484180/index.html">Rostelecom virtual PBX: apa dan bagaimana bisa dilakukan melalui API</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>