<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì≤ ‚öïÔ∏è ‚öæÔ∏è Sauvegardez le cloud, amis üë©‚Äçüé§ üë®üèº‚Äçüè≠ ü§æüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, je voudrais recommencer la sauvegarde sauvegard√©e dans le cloud. Je ne discuterai pas si c'est bon ou mauvais, mais je veux partager des ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Sauvegardez le cloud, amis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pc-administrator/blog/468559/"><p><img src="https://habrastorage.org/getpro/habr/post_images/1cb/e6e/0bb/1cbe6e0bb1b9af5edcab8fd07f2cc296.jpg"></p><br><p>  Aujourd'hui, je voudrais recommencer la sauvegarde sauvegard√©e dans le cloud.  Je ne discuterai pas si c'est bon ou mauvais, mais je veux partager des exemples d'impl√©mentations de solutions pour cette sauvegarde la plus bas√©e sur le cloud - du logiciel fini aux b√©quilles sur les v√©los. </p><br><p>  Vous ne sauvegardez pas encore dans le cloud ou vous ne souhaitez pas en savoir plus sur les options de solution?  Je demande un chat. </p><a name="habracut"></a><br><h1 id="3-2-1-poehali">  3-2-1, c'est parti </h1><br><p>  On pense que l'histoire de la r√®gle de sauvegarde 3-2-1 commence avec Peter Krogh, qui l'a d√©crite dans son livre Digital Asset Management for Photographers.  Je rappelle bri√®vement ce principe: </p><br><ul><li>  Il doit y avoir au moins 3 copies des donn√©es. </li><li>  Au moins 2 copies doivent √™tre sur des supports physiques de types diff√©rents.  Par exemple, une copie travaille des donn√©es sur une matrice de disques, la deuxi√®me copie est des donn√©es sur bande magn√©tique. </li><li>  Au moins une sauvegarde doit √™tre stock√©e en dehors du bureau. </li></ul><br><p>  Personnellement, j'utilise le plus souvent des r√®gles l√©g√®rement diff√©rentes pour cr√©er des sauvegardes. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/93f/afc/2e5/93fafc2e559d39740c0bb3934ba45b90.jpg"></p><br><p>  <em>Le circuit classique 3-2-1.</em> </p><br><p> Premi√®rement, je prends les sauvegardes comme donn√©es initiales, et deuxi√®mement, il n'est pas toujours pratique et √©conomique de les stocker sur diff√©rents types de supports - en particulier pour les petites et moyennes entreprises.  Ma strat√©gie de stockage de sauvegarde habituelle est la suivante: </p><br><ul><li>  Sauvegardes en ligne.  Leur objectif principal est d'assurer la r√©cup√©ration la plus rapide en cas de petite panne.  Selon l'infrastructure, ces sauvegardes peuvent m√™me √™tre stock√©es sur le serveur en cours de sauvegarde, uniquement sur un disque s√©par√©. </li><li>  Sauvegardes d'archives.  Ils sont toujours stock√©s au moins sur un autre serveur et avec un historique (le plus souvent - 6 sauvegardes quotidiennes, 4 hebdomadaires et 4 trimestrielles). </li><li>  Sauvegardes √† distance.  Les sauvegardes sont n√©cessairement stock√©es dans un autre endroit - sur un serveur dans un centre de donn√©es distant ou dans le cloud.  Une bonne option consiste √† synchroniser le r√©pertoire de sauvegarde des archives avec le stockage distant, si possible. </li></ul><br><p>  Avec les sauvegardes op√©rationnelles et d'archivage, tout est g√©n√©ralement assez simple, sauf que vous devez respecter certaines recommandations.  L'une des options pour de telles recommandations est sous le spoiler. </p><br><div class="spoiler">  <b class="spoiler_title">Recommandations:</b> <div class="spoiler_text"><ul><li>  Un serveur avec des sauvegardes √† l'amiable devrait √™tre en quelque sorte isol√© du r√©seau de production au cas o√π un chiffreur serait soudainement d√©marr√©. </li><li>  C‚Äôest une bonne option lorsque le serveur prend des sauvegardes, mais ne les re√ßoit pas - au cas o√π le serveur archiv√© serait compromis. </li><li>  Histoire des archives - doit avoir.  Souvent, je rencontrais des infrastructures o√π une seule copie de sauvegarde des donn√©es importantes √©tait stock√©e, et dans le cas d'une attaque de chiffrement ou d'une perte de donn√©es avant-hier, les donn√©es de la sauvegarde √©taient d√©j√† corrompues ou pas ce dont nous avions besoin. </li><li>  N'oubliez pas de copier non seulement les donn√©es, mais aussi le syst√®me d'exploitation. </li><li>  Les clich√©s instantan√©s et autres instantan√©s sont tr√®s bons et excellents, mais ce n'est pas une sauvegarde.  Vous pouvez les utiliser en remplacement des sauvegardes op√©rationnelles, mais il est pr√©f√©rable de les combiner. </li><li>  Les archives avec l'extension .exe ou .dll sont une bonne option pour tromper un so-so-ransomware. </li><li>  RAID ne concerne pas du tout les sauvegardes.  Absolument. </li></ul></div></div><br><p>  Mais avec les sauvegardes √† distance, de nombreuses questions se posent.  En particulier, il faut choisir o√π stocker ces m√™mes copies et comment les y jeter.  Je vais d'abord donner quelques exemples de ¬´o√π¬ª. </p><br><h1 id="vybiraem-uyutnoe-oblako">  Choisissez un nuage confortable </h1><br><p>  Une option serait de simplement <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">louer un</a> serveur d√©di√© ou d'installer votre serveur dans un centre de donn√©es sur une colocalisation. </p><br><p>  En effet, le ¬´cloud¬ª qu'il a lui-m√™me construit donne plus de contr√¥le sur ce qui se passe, et le choix d'une solution de stockage et de sauvegarde directe appartient √† l'administrateur syst√®me.  Vous pouvez m√™me inclure le serveur dans le domaine ¬´sur le terrain¬ª, comme je l'ai d√©crit dans l'article ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment j'ai cach√© la base 1C en Allemagne</a> ¬ª. </p><br><p>  D'un autre c√¥t√©, le contr√¥le signifie √©galement la responsabilit√© - il sera n√©cessaire de surveiller l'√©tat du serveur en cas de probl√®mes mat√©riels et logiciels, tandis que le manque de nuages ‚Äã‚Äãsous forme de d√©pendance √† Internet et la question de la confiance des √©trangers n'ont pas √©t√© annul√©s. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/9a4/480/38a/9a448038ae023fff983c1d81ebfa9a03.jpg"></p><br><p>  <em>Mais est-ce votre serveur lou√© aupr√®s d'un h√¥te bon march√©?</em> </p><br><p>  Une autre option serait d'utiliser des services sp√©cialis√©s cr√©√©s uniquement pour le stockage des sauvegardes.  L'exemple le plus c√©l√®bre est celui des services d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amazon Glacier</a> .  Ils sont entour√©s de l√©gendes sur la technologie utilis√©e - des cassettes √† ruban aux disques Blu-ray et aux bras robotiques.  Mais officiellement, c'est un disque dur peu co√ªteux. </p><br><p>  Contrairement √† un serveur lou√©, la solution commence d√©j√† √† sentir comme une entreprise sanglante avec de nombreux ¬´neuf de fiabilit√©¬ª apr√®s la virgule d√©cimale.  Certes, comme de nombreux services Web d'Amazon, sa formule de calcul des co√ªts est complexe.  Si vous le simplifiez franchement, le t√©l√©chargement des donn√©es sur le service est gratuit, le stockage est tr√®s peu co√ªteux (1 $ pour 1 To par mois), mais vous devrez payer pour recevoir les donn√©es.  Comme dans les anciennes foires - "l'entr√©e est gratuite, la sortie est de 15 kopecks". </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/4fe/223/897/4fe223897842c665aa44fe91e374005a.jpg"></p><br><p>  Les services de stockage classiques comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Amazon S3</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex Object Storage</a> peuvent √©galement √™tre utilis√©s pour les sauvegardes, mais le prix dans ce cas sera moins humain - ~ 10 $ \ mois pour 1 To pour Yandex.  De plus, on ne peut pas ne pas mentionner les solutions tout compris des fabricants de syst√®mes de sauvegarde, car seuls les paresseux b√©n√©ficient d√©sormais de leur cloud.  Par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Acronis Cloud Storage en</a> tant qu'addition aux produits Acronis litt√©ralement pour 299 $ par an donnera 250 Go sur ses serveurs. </p><br><p>  La troisi√®me option consisterait √† utiliser le stockage cloud, qui n'est pas tr√®s con√ßu pour stocker les sauvegardes de l'entreprise, mais est plus ax√© sur les utilisateurs ordinaires.  En voici quelques-unes qui ont √©t√© entendues: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dropbox</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OneDrive</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Drive</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mega</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Yandex.Disk</a> . </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cloud Mail.Ru.</a> </li></ul><br><p>  Maintenant, je ne comparerai pas les plates-formes cloud, je donnerai cela √† la merci de nombreux mat√©riaux sur le r√©seau.  Par exemple, l'article ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Stockage dans le cloud pour les particuliers: que choisir et pourquoi</a> ¬ª.  Personnellement, je me suis install√© sur Yandex.Disk pour mes besoins, car il est l'un des rares √† pouvoir utiliser WebDAV, des API et des instantan√©s (historique) de fichiers sur disque sur des plans gratuits.  Eh bien, bien s√ªr, j'ai accumul√© une certaine quantit√© de gigaoctets gratuits dessus. </p><br><p>  Bien s√ªr, lors du choix, vous devez faire attention non seulement au nombre gratuit et au co√ªt des gigaoctets, mais √©galement au contrat de licence, car la sauvegarde de bases de donn√©es 1C conditionnelles peut le violer.  S√©par√©ment, il convient de noter les points sur lesquels le fournisseur de cloud n'assume aucune responsabilit√©, peut supprimer tous les fichiers √† tout moment et il n'y aura rien pour cela.  Mais presque tous ces services ont un logiciel qui vous permet de t√©l√©charger des fichiers sur le service, ce qui nous am√®ne au point suivant de l'histoire d'aujourd'hui. </p><br><h1 id="chem-gruzit-na-uyutnoe-oblako">  Comment exp√©dier vers un nuage confortable </h1><br><p>  Personnellement, je n'aime pas vraiment utiliser le logiciel fourni par les services (√† moins, bien s√ªr, que nous parlions d'un service sp√©cialis√© comme Acronis): il n'est pas toujours possible de d√©finir le calendrier de synchronisation, et l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">histoire est</a> toujours vivante lorsque Yandex.Disk a organis√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le correctif de Barmin</a> lors de la mise √† jour syst√®me d'exploitation.  Heureusement, il existe des logiciels sp√©ciaux prenant en charge divers fournisseurs.  Comme d'habitude, je vais donner quelques exemples de solutions pour la plupart gratuites et quasi libres. </p><br><p>  <strong>Sauvegarde pratique</strong> .  Il est √©mis sur la premi√®re page de Google pour la requ√™te "sauvegarde sur le cloud".  Il existe des versions payantes de diverses fonctionnalit√©s, des plugins s√©par√©s (par exemple, pour Exchange et 1C).  Il y a m√™me un cloud - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HBDrive</a> .  Mais le plus important, il existe toujours une version gratuite qui ne peut que sauvegarder sur le cloud - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Handy Backup Free for Cloud</a> .  Malheureusement, dans le cadre des tests, je n'ai pas pu le faire fonctionner de mani√®re stable avec Yandex.Disk - la t√¢che planifi√©e p√©riodiquement n'a pas fonctionn√©.  Il est difficile de vouloir quelque chose d'une solution gratuite, mais j'ai refus√© d'utiliser ce logiciel. </p><br><p>  <strong>Sauvegarde CloudBerry</strong>  Le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">produit</a> est bon pour tout le monde, il existe m√™me des solutions pour r√©cup√©rer des objets Exchange individuels, il existe un support pour de nombreux fournisseurs diff√©rents.  L'utilisation a √©t√© stopp√©e par l'absence de version gratuite et de prise en charge de l'habituel Yandex.Disk, uniquement le stockage d'objets Yandex compatible S3. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/307/2a4/7f0/3072a47f01fe864d71615a1a362b51cf.jpg"></p><br><p>  Liste des fournisseurs de solutions pris en charge de CloudBerry Lab. </p><br><p>  <strong>Duplicati 2</strong> .  D√©j√† un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">produit</a> enti√®rement gratuit, m√™me pour un usage commercial.  Il existe toutes les plates-formes populaires de Windows √† GNU \ Linux, vous pouvez travailler √† la fois via l'interface Web et via la ligne de commande, il y a aussi le cryptage des sauvegardes hors de la bo√Æte. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c90/102/958/c90102958dc63532a2dc1239070666f2.jpg"></p><br><p>  Interface Duplicati, fournisseurs pris en charge. </p><br><p>  Malheureusement, Yandex.Disk n'est pas pris en charge ¬´pr√™t √† l'emploi¬ª - uniquement en mode WebDAV.  Dans ce mode, la solution de Yandex ne fonctionne pas parfaitement - il y a des probl√®mes avec les gros fichiers.  Mais il y en a un sur la liste des destinations valides qui r√©sout ce probl√®me.  Il est l√†. </p><br><p>  <strong>Rclone</strong>  C'est peut-√™tre mon leader incontest√© parmi les autres logiciels.  Un utilitaire de ligne de commande pour de nombreuses plates-formes, sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">site officiel</a> , des t√©l√©chargements sont √©galement disponibles pour les syst√®mes d'exploitation rares comme Plan9 et Solaris.  La liste des fournisseurs de cloud pris en charge est √©galement impressionnante - elle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prend</a> m√™me en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">charge Cephs</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OwnCloud</a> .  Et oui, Yandex.Disk est r√©pertori√©.  Jusqu'√† r√©cemment, la configuration √©tait effectu√©e uniquement via le menu de la console interactive, mais relativement r√©cemment, il √©tait possible de lancer l'interface Web et de la configurer via celle-ci. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c2e/a92/e1a/c2ea92e1a0ea404677a6ee3fd224d74a.jpg"></p><br><p>  <em>Interface Web Rclone.</em> </p><br><p>  Les inconv√©nients incluent le manque de planificateurs int√©gr√©s.  L'utilitaire fonctionne exclusivement comme un transport vers / depuis les nuages, mais ne n√©cessite pas d'installation.  Y compris √† cause de cela, je l'utilise en conjonction avec Yandex.Disk pour transf√©rer des informations d'un serveur distant √† un autre - il s'est av√©r√© que les gros fichiers sont plus rapides √† t√©l√©charger vers le cloud et √† t√©l√©charger depuis le cloud que pour organiser le partage de fichiers direct.  Oui, et t√©l√©charger des sauvegardes est un plaisir.  Par exemple, pour copier uniquement des fichiers r√©cents dans le cloud, vous pouvez utiliser la commande: </p><br><pre><code class="bash hljs">rclone copy --max-age 24h --no-traverse D:\backups yandex:backups</code> </pre> <br><p>  O√π yandex est le nom de la configuration cr√©√©e √† l'avance et les sauvegardes sont le dossier avec les sauvegardes. </p><br><p>  Pour plus de d√©tails sur le fonctionnement de rclone, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">documentation officielle</a> et l'article ¬´ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rclone: ‚Äã‚Äãrsync pour les clouds</a> ¬ª. </p><br><p>  En principe, en tant que solution de sauvegarde compl√®te, rclone peut √™tre utilis√© avec Duplicati, en choisissant rclone comme type de stockage.  Ensuite, Duplicati cr√©era des sauvegardes √† l'aide de vss (instantan√©s) selon le planificateur, et le premier sera responsable du t√©l√©chargement des sauvegardes dans le cloud dont nous avons besoin.  Bien s√ªr, vous pouvez utiliser n'importe quelle autre solution comme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cobian</a> ou m√™me cr√©er des instantan√©s <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vss</a> avec la commande <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">diskshadow</a> , archiver et t√©l√©charger sur le cloud √† l'aide de rclone.  Certes, si vous r√©inventez vraiment la roue, aucun rclone n'est n√©cessaire. </p><br><h1 id="sozdaem-svoy-velosipedo-skript">  Cr√©ez votre script de v√©lo </h1><br><p>  Bien s√ªr, si le fournisseur de cloud fournit un acc√®s WebDAV, le t√©l√©chargement des donn√©es sera simple.  Exemple pour cmd et Yandex.Disk: </p><br><pre> <code class="bash hljs">net use Z: <span class="hljs-string"><span class="hljs-string">"https://webdav.yandex.ru/backup/"</span></span> /User:login@yandex.ru password rem     net use Z: /delete</code> </pre><br><p>  Mais tous les fournisseurs ne sont pas bons √† WebDAV, et il y a des questions sur la vitesse et la stabilit√©.  Par cons√©quent, vous pouvez utiliser l'API si, bien s√ªr, le fournisseur fournit un tel acc√®s.  Analysons un exemple avec le m√™me Yandex. </p><br><p>  Yandex utilise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OAuth</a> pour l'autorisation, donc pour notre script, nous devons obtenir un jeton sp√©cial.  Vous devez d'abord cr√©er une application dans la section " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cr√©er une application</a> " du site. </p><br><p>  Vous ne devez pas oublier de donner acc√®s √† l'application sur Yandex.Disk: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/352/f59/f28/352f59f28575fddc90a19778b66a1444.jpg"></p><br><p>  Acc√®s par script √† l'API Yandex.Disk. </p><br><p>  Et remplacez l'URL de d√©veloppement dans l'URI de rappel (elle sera disponible apr√®s avoir coch√© la case ¬´Services Web¬ª sur les plates-formes disponibles): </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/2d9/d56/f30/2d9d56f302c545b0ff42d1b89efb0c75.jpg"></p><br><p>  <em>Configuration de l'URI de rappel.</em> </p><br><p>  Apr√®s avoir re√ßu l'ID de l'application, suivez le lien: </p><br><pre> <code class="plaintext hljs">https://oauth.yandex.ru/authorize?response_type=token&amp;client_id=12345678&amp;display=popup</code> </pre> <br><p>  O√π 12345678 est l'ID re√ßu.  Apr√®s avoir accord√© l'acc√®s √† l'application, nous recevrons le jeton OAuth convoit√©, qui peut d√©j√† √™tre utilis√© dans les scripts.  Ici, par exemple, le t√©l√©chargement d'un fichier vers Yandex.Disk √† l'aide de PowerShell: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#   $filepath = "D:\backup.zip" $headers = New-Object "System.Collections.Generic.Dictionary[[String],[String]]" $headers.Add("Authorization" ,'OAuth Oauth') $headers.Add("Content-Type","application/json") #   URL    $UploadUrl= (Invoke-RestMethod -method GET -URI ("https://cloud-api.yandex.net:443/v1/disk/resources/upload?path=backup.zip") -Headers $headers).href #   Invoke-WebRequest -uri $UploadUrl -Method Put -Infile $filepath -ContentType 'application/zip'</span></span></code> </pre><br><p>  Il est propos√© d'organiser la rotation des fichiers, le contr√¥le des t√©l√©chargements et autres ¬´kit¬ª, l'avantage de l'API Yandex est bien <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">document√©</a> .  Mais personnellement, je pr√©f√®re ne pas r√©inventer la roue, mais utiliser rclone. </p><br><p>  Eh bien, lors de la sauvegarde sur le cloud, je recommande fortement de chiffrer les archives, afin de ne pas √™tre dans la situation de h√©ros d'un po√®me du c√©l√®bre po√®te Aiklaud Von Browser dans certains cercles, dont la ligne dont cet article est nomm√©. </p><br><p>  Dans les commentaires, je propose de ne pas √©lever un holivar sur la rationalit√© de la sauvegarde cloud, mais de partager mon outil de sauvegarde pr√©f√©r√©. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468559/">https://habr.com/ru/post/fr468559/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468547/index.html">Parlant anglais, CSS, grille et accessibilit√© √† FrontendConf</a></li>
<li><a href="../fr468549/index.html">GPU Bound. Comment tout transf√©rer sur la carte vid√©o et un peu plus. Des animations</a></li>
<li><a href="../fr468553/index.html">Gestion des param√®tres dans les applications m√©tier similaire √† un syst√®me de contr√¥le de version</a></li>
<li><a href="../fr468555/index.html">Introduction aux assemblages d√©terministes en C / C ++. 2e partie</a></li>
<li><a href="../fr468557/index.html">WEB 3.0 - la deuxi√®me approche du projectile</a></li>
<li><a href="../fr468561/index.html">Semaine de la s√©curit√© 39: erreurs de s√©curit√© et banales</a></li>
<li><a href="../fr468563/index.html">Watchmen Watch: L'√©tat actuel des installations de suivi spatial</a></li>
<li><a href="../fr468565/index.html">Compteur Geiger fait maison sur ESP8266 avec √©cran tactile</a></li>
<li><a href="../fr468573/index.html">postgres_exporter et surveillance des instances PostgreSQL avec plusieurs bases de donn√©es</a></li>
<li><a href="../fr468577/index.html">Patch'ti - ne compte pas: l'histoire de la gestion des patchs dans les visages et les couleurs</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>