<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗜️ 🧑🏾‍🤝‍🧑🏻 🚴🏿 Wie wir den WD ActiveScale P100 für unseren S3-Speicher getestet haben 😮 🥝 ⛹🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wir testen regelmäßig neue Hard- und Software zur Verwendung in unseren Diensten. Sie möchten immer mehr Funktionen zu einem vernünftigen Preis. Heute...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie wir den WD ActiveScale P100 für unseren S3-Speicher getestet haben</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dataline/blog/477836/">  Wir testen regelmäßig neue Hard- und Software zur Verwendung in unseren Diensten.  Sie möchten immer mehr Funktionen zu einem vernünftigen Preis.  Heute werde ich Ihnen erzählen, wie wir das Western Digital ActiveScale P100-Gerät verstanden und es für unseren S3-Speicher anprobiert haben. <br><br>  Ab sofort ein kleiner Haftungsausschluss: Wir haben das Produkt auf seine Verwendung im öffentlichen Dienst getestet.  Vielleicht blieben einige Funktionen übrig, die für den privaten Gebrauch interessant und wichtig sind. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gv/3r/w8/gv3rw8w72ap3doe1cynul2fb_rw.jpeg"></div><br>  <i>Dies ist ActiveScale P100 im April 2019 vor der Installation im OST-Rechenzentrum.</i> <br><br>  Jetzt läuft unser <a href="https://www.dtln.ru/uslugi/datamanagement/odw">S3</a> auf Cloudian HyperStore 7.1.5.  Diese Version bietet 98% Kompatibilität mit Amazon APIs.  Die aktuelle Lösung bietet alles, was wir als Dienstleister und für unsere Kunden benötigen. Deshalb haben wir nicht weniger nach Alternativen gesucht. <a name="habracut"></a><br><br>  Diesmal fiel uns die Software- und Hardwarelösung Western Digital ActiveScale in die Hände.  Der Anbieter positioniert es als Lösung für die Organisation eines S3-Clusters. <br><br>  So sieht es aus: <br><br><img src="https://habrastorage.org/webt/g3/6g/cb/g36gcb-oacoww2pa1zqifnxjrti.png"><br>  <i>ActiveScale P100 ist in einer der Hallen des OST-Rechenzentrums installiert.</i> <br><br>  Die drei obersten Einheiten sind Steuerknoten.  Die folgenden sechs Einheiten sind Knoten zum Speichern von Daten.  Jeder der sechs Knoten enthält 12 Festplatten mit jeweils 10 TB.  Insgesamt 720 TB "rohe" Kapazität.  Der Komplex umfasst auch 2 Netzwerkgeräte.  Für jeden Knoten - 2 Links von 10G.  Insgesamt sind für diese Entscheidung 11 Einheiten im Rack erforderlich. <br><br>  Wir haben ActiveScale durch Auslastungstests geführt: Ein Skript hat eine andere Anzahl von Dateien unterschiedlicher Größe generiert, versucht, sie im Singlethread- und Multithread-Modus hochzuladen, und die Ausführungszeit von Befehlen zum Hochladen und Löschen von Dateien aufgezeichnet.  Dieser Test war künstlich: Er wurde von einem Computer mit einem SSD-Laufwerk, viel Speicher und einem Prozessor mit einer Frequenz von 3,2 GHz mit einer begrenzten Kanalbreite von 100 Mbit / s durchgeführt.  Trotzdem haben wir die Ergebnisse eines ähnlichen Tests für die aktuelle Lösung und die erzielten Ergebnisse lagen über unseren Erwartungen. <br><br><div class="scrollable-table"><table><tbody><tr><td>  Test <br></td><td>  Objektgröße <br></td><td>  Anzahl der Objekte <br></td><td>  Anzahl der Threads <br></td><td>  Durchschnittsgeschwindigkeit <br></td><td>  Ladezeit <br></td><td>  Entfernungszeit * <br></td></tr><tr><td>  1 <br></td><td>  10 Kb <br></td><td>  100.000 <br></td><td>  1 <br></td><td>  104 kb / s <br></td><td>  2 h 40 m <br></td><td>  6 m 58 s <br></td></tr><tr><td>  2 <br></td><td>  10 Kb <br></td><td>  100.000 <br></td><td>  20 <br></td><td>  11 MB / s <br></td><td>  35 m 4 s <br></td><td>  11 m 38 s <br></td></tr><tr><td>  3 <br></td><td>  1 Mb <br></td><td>  100.000 <br></td><td>  1 <br></td><td>  5 MB / s <br></td><td>  5 h 55 m <br></td><td>  7 m 16 s <br></td></tr><tr><td>  4 <br></td><td>  1 Mb <br></td><td>  100.000 <br></td><td>  20 <br></td><td>  11 MB / s <br></td><td>  2 h 31 min <br></td><td>  7 m 26 s <br></td></tr><tr><td>  5 <br></td><td>  10 GB <br></td><td>  1 <br></td><td>  1 <br></td><td>  10 MB / s <br></td><td>  16 m 5 s <br></td><td>  3 s <br></td></tr><tr><td>  6 <br></td><td>  10 GB <br></td><td>  1 <br></td><td>  20 <br></td><td>  10 MB / s <br></td><td>  16 m 2 s <br></td><td>  3 s <br></td></tr></tbody></table></div>  <i>Stresstestergebnisse.</i> <i><br><br></i>  <i>* Beim Löschen wird ein Objekt nur zum Löschen markiert.</i>  <i>Die Entfernung selbst erfolgt einmal täglich.</i>  <i>Wenn der Cluster fast voll ist, kann dies das Kapazitätsmanagement erschweren, da keine aktuellen Informationen zu den verwendeten Ressourcen vorliegen.</i> <br><br>  Die Amazon S3-Kompatibilität wurde auf standardmäßige Weise getestet.  <a href="">Hier ist</a> einer der Tests, die ich verwendet habe. <br><br>  Zum Zeitpunkt des Tests verfügten wir über die grundlegendste Dokumentation, sodass wir uns unabhängig voneinander mit dem Gerät dieser „Black Box“ befassten - über die Admin-Weboberfläche, die API und den physischen Zugriff. <br><br><h3>  Was wurde in gefunden </h3><br>  <b>Admin-Oberfläche</b>  Auf der Hauptseite finden Sie zusammenfassende Informationen zu Clustergrößen und Arbeitsmetriken, Statistiken zu Objekten, Benutzern, Buckets und Speicherrichtlinien. <br><br><img src="https://habrastorage.org/webt/nv/kk/yc/nvkkycjcqzdkpmxwj4sdxpufolq.png"><br><br>  <b>Benutzeroberfläche</b>  Im S3-Dienst ist dies erforderlich, damit der Administrator auf der Clientseite Benutzer hinzufügen / entfernen, Zugriffsschlüssel für sie generieren, Benutzer zitieren usw. Der P100 verfügt nicht über diese, aber nach unserem Feedback plant der Anbieter, sie zu implementieren. <br><br>  <b>Benutzer- / Rollenverwaltung.</b>  Um einen öffentlichen Dienst zu organisieren, müssen wir Benutzer mit unterschiedlichen Zugriffsrechten erstellen können.  P100 weist diesbezüglich erhebliche Einschränkungen auf: <br><br><ul><li>  Sie können nur einen Systembenutzer erstellen, dh einen Cluster-Administrator.  Mehr - nur durch Integration mit Active Directory. </li><li>  Benutzer können nicht gruppiert und einem Administrator zugewiesen werden.  Dies macht es uns unmöglich, eine öffentliche Dienstleistung zu erbringen. </li><li>  Der Benutzer kann nicht dauerhaft gelöscht werden. Wenn der neue Benutzer denselben Benutzernamen hat, müssen Sie kreativ sein. </li><li>  Das Festlegen von Kontingenten für Benutzer (Volumen, Anzahl der Transaktionen usw.) ist nur über die CLI möglich. </li></ul><br>  <b>Abrechnung.</b>  Der P100 ist sofort einsatzbereit, und dies ist der größte Nachteil für uns als Dienstleister.  Wir haben ein kommerzielles Produkt, und wir müssen Kunden irgendwie in Rechnung stellen.  P100 verfügt über Statistikprotokolle, die stündlich über das Admin-Panel entfernt werden können.  Theoretisch können Sie sie analysieren, die erforderlichen Daten herausnehmen und eine Berechnung für sie durchführen.  Diese Protokolle werden jedoch nur 30 Tage gespeichert.  Was in Situationen zu tun ist, in denen der Kunde bittet, das Konto für die vorherigen Monate zu überprüfen, ist nicht klar. <br><br>  <b>Festlegen eigener Regeln zum Speichern von Objekten.</b>  Der P100 hat bereits die folgenden Einstellungen erhalten: Dateien, die kleiner als der Block (20 KB) sind, werden im <a href="https://habr.com/ru/post/141487/">Löschcode (EC)</a> 6 + 2-Modus gespeichert.  Dateien, die größer als Chunk sind, werden im EC 13 + 4-Modus gespeichert.  Der P100 bestimmt selbst die Dateigröße und wählt den entsprechenden Modus aus. <br><br>  Zum einen hat der P100 mehr Möglichkeiten.  Auf der anderen Seite sind alle Einstellungen für Speicherregeln für den Replikationsfaktor und den Löschcode nur in der Phase der Clusterbereitstellung möglich.  Später im laufenden Betrieb ist es nicht mehr möglich, neue Datenspeicherregeln hinzuzufügen oder bestehende zu ändern.  Dies muss beim Erweitern des Clusters erfolgen, damit die Effizienz und Zuverlässigkeit des Speichers optimal ist. <br><br><img src="https://habrastorage.org/webt/ri/f0/kv/rif0kvhc-ajofhymolphcme1psg.png"><br>  <i>Erasure Code Speicherleistungstabelle.</i> <br><br>  <b>Native CLI \ AdminAPI.</b>  Zur Verwaltung des Clusters verfügt der P100 über eine CLI, die jedoch nur für Ubuntu (wir verwenden Red Hat) geschrieben und getestet wurde.  Es bietet keine wesentlichen Vorteile gegenüber der Interaktion durch Curl-Anforderungen (put, get, post), es gibt jedoch einige Funktionen zum Verwalten des Clusters. <br><br>  <b>Unterstützung für die grundlegende AWS S3-API und AWS CLI.</b>  Dies ist nur ein Indikator für die Kompatibilität mit der Amazon API.  Einfach ausgedrückt, ist es in dieser Lösung möglich, die Befehle für Amazon S3 zu verwenden.  Erfahrungsgemäß schwankt dieser Indikator im Durchschnitt zwischen 50 und 70%. <br><br>  P100 erreichte laut Testergebnis 58%.  Es war nicht möglich, Kompatibilitätstests für das Zuweisen von Zugriffsrechten zu einzelnen Objekten durchzuführen, da Sie in der P100-Lösung den allgemeinen Zugriff nur einem Bucket und nicht einem separaten Objekt zuweisen können.  Es gibt auch kein IAM (Identity and Access Management).  Infolgedessen liegt die Kompatibilität näher bei 50%. <br><br><img src="https://habrastorage.org/webt/xy/-q/d6/xy-qd6ev4kzjd4znhvtsr3snvck.png"><br>  <i>Aus den Testergebnissen.</i> <br><br>  <b>Betriebssystemverwaltung.</b>  Entsprechend der Spezifikation erscheint ActiveScale OS 5.x.Anhand der Protokolle und Ordner, die über die Weboberfläche verfügbar sind, habe ich herausgefunden, dass es höchstwahrscheinlich auf einer Debian-Distribution basiert.  Während des Tests konnten keine Methoden zur Selbstverwaltung von Updates, zur Installation kritischer Sicherheitsupdates, Ihrer Überwachungsagenten usw. gefunden werden.  Muss unbedingt den technischen Support von P100 kontaktieren, wenn eine speziell geschulte Person abreist. <br><br>  <b>Die Anzahl der Bucket pro Benutzer.</b>  In solchen Diensten kann der Benutzer normalerweise bis zu 100 Buckets erstellen, eine Art „Ordner“ zum Speichern von Dateien.  Im Allgemeinen reicht dies aus, aber die Praxis zeigt, dass es nicht viele Eimer gibt.  Beim P100 sind 100 Eimer das Maximum.  In unserer aktuellen Lösung kann der Benutzer 1000 Eimer erstellen. <br><br>  <b>Festlegen von Zugriffsrechten für Bucket und Objekte.</b>  In P100 können Sie Zugriff auf einen bestimmten Bereich, aber nicht auf ein bestimmtes Objekt gewähren.  Letzteres wird häufig von Benutzern verwendet, da Sie damit die Anzahl der Downloads und den Zeitpunkt des Herunterladens begrenzen können. <br><br>  <b>Cluster- / Benutzer- / Bucket-Statistiken.</b>  Wir benötigen diese Informationen, um die Clusterauslastung zu verfolgen und nicht den Moment zu verpassen, in dem wir durch Ressourcen an die Obergrenze gelangen. <br><br>  In der Benutzeroberfläche können Sie Statistiken zu Benutzern und Buckets in nahezu Echtzeit anzeigen (die Informationen werden einmal pro Stunde aktualisiert). <br><br><img src="https://habrastorage.org/webt/xj/ai/bq/xjaibqqw9gdv07yzza2kzjeaok4.png"><br><br>  Es kann über einen speziellen System-Bucket heruntergeladen werden, aber in der heruntergeladenen Form wird anstelle von E-Mail oder Benutzernamen eine UUID angezeigt. Sie müssen also irgendwie vergleichen, welche Art von Benutzer sich hinter bestimmten UUIDs versteckt.  Dies ist kein Problem, wenn es 10 Benutzer gibt, aber wenn mehr? <br><br>  <b>Selbstdiagnose.</b>  Der P100 kann über SNMP den gesamten Eisenteil des Clusters abfragen und auf einem Dashboard anzeigen.  Beispielsweise können Sie die Fülle und Temperatur von Festplatten, die Speichernutzung usw. anzeigen. <br><br><img src="https://habrastorage.org/webt/pd/qa/vl/pdqavlm376zmqdizh6izrlvjax4.png"><br>  <i>Informationen zum Status des Systemknotens.</i> <br><br><img src="https://habrastorage.org/webt/h8/t1/hz/h8t1hzlznyaquktbmfrd1gbqdvs.png"><br>  <i>Informationen zum Status von Festplatten.</i>  <i>Wenn ein Laufwerk ausfällt, können Sie die Hintergrundbeleuchtung einschalten, um es schnell zu finden und zu ersetzen.</i> <br><br><img src="https://habrastorage.org/webt/gc/82/1v/gc821vydlpzudaueudlaushnuu4.png"><br>  <i>Parameter zum Laden der CPU und des Speichers im Cluster.</i> <br><br>  <b>Benutzeraktionen protokollieren.</b>  Es ist nicht da, was bedeutet, dass es nicht einfach ist, die Situationen zu verstehen, in denen "wer die Datei gelöscht und sie gelöscht hat". <br><br>  <b>Unterstützt SSE / SSE-C.</b>  P100 unterstützt die Verschlüsselung, aber mit Einschränkungen: Sie müssen einen separaten Lizenzschlüssel anfordern, und das ist zusätzliches Geld. <br><br>  <b>Load Balancer.</b>  Es ist eingebaut, vermutlich HAProxy wert.  Sie müssen es auf ein Minimum konfigurieren: Geben Sie einfach die eingehenden und ausgehenden IP-Adressen an. <br><br>  <b>Automatisierung von Eingabe- / Ausgabeprozessen von Knoten oder Platten auf Knoten.</b>  Dies ist hilfreich, wenn ein Knoten in einem Cluster unterbrochen wird und außer Betrieb genommen werden muss.  Jetzt haben wir für solche Situationen eine vorgefertigte Lösung.  Ich habe im P100 keinen solchen Mechanismus gefunden. Sie können einen separaten Knoten nur über die Admin-Weboberfläche deaktivieren.  Höchstwahrscheinlich müssen Sie den Ingenieur des Anbieters einladen. <br><br>  <b>S3 Gate Appliance.</b>  Mit dieser Softwarelösung können Sie ftp / nfs / samba-gate auf der Clientseite bereitstellen und die Dateien, die in S3 enthalten sein sollen, dort ablegen.  Eine praktische Sache, wenn der Endbenutzer nicht weiß, wie man S3 benutzt.  Leider hat die P100 dies nicht an Bord. <br><br>  <b>Arbeitsanwendung Ports.</b>  Beim P100 sind nur die Standardports für S3 verfügbar - 80, 443. <br><br>  <b>Benutzerdokumentation.</b>  Es gibt nur API-Dokumentation. <br><br>  <b>Administrative Dokumentation.</b>  Vom Verkäufer auf Anfrage zur Verfügung gestellt. <br><br><h3>  Nicht getestet, aber vom Verkäufer deklariert </h3><br>  <b>Mehrere Endpunkte.</b>  Wir kamen mit einer fertigen Installation an, bei der nur ein Endpunkt pro Cluster bereits konfiguriert war.  Änderung fehlgeschlagen. <br><br>  <b>Geo-Reservierung.</b>  Mit dieser Option können Daten an drei Standorten repliziert und Kunden zu Sicherungsstandorten gewechselt werden.  Wir hatten nur einen Cluster, daher war ein Test nicht möglich. <br><br>  <b>Integration mit AD.</b>  Deklariert, aber wir verwenden kein AD in Bezug auf S3, daher haben wir nicht getestet. <br><br><h3>  Schlussfolgerungen </h3><br>  Generell hat der WD ActiveScale P100 einen positiven Eindruck hinterlassen: Er funktioniert „out of the box“, schnell und ist gleichzeitig sehr akzeptabel.  Dies ist jedoch eine private Lösung, mit der noch kein öffentlicher S3-Dienst erstellt werden kann.  Hier ist die Hauptsache, dass wir nicht genug hatten: <br><br><ul><li>  Es gibt keine Möglichkeit, Benutzergruppen zu erstellen und einen Administrator für diese einzurichten. </li><li>  keine grafische Benutzeroberfläche; </li><li>  keine Abrechnung; </li><li>  Aufnahme zusätzlicher Funktionen nur durch Aufruf an den Verkäufer; </li><li>  Die Unfähigkeit, unterschiedliche Speicherrichtlinien beizubehalten und sie in Abhängigkeit von den aktuellen Aufgaben verschiedenen Benutzergruppen innerhalb desselben Clusters zuzuweisen. </li></ul><br>  Der Verkäufer nahm alle Wünsche auf der Grundlage von Tests an.  Vielleicht wird in naher Zukunft einer von ihnen realisiert. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de477836/">https://habr.com/ru/post/de477836/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de477822/index.html">PHP 7.4 veröffentlicht! Wie Badoo Upgrades</a></li>
<li><a href="../de477824/index.html">Lass uns bis Montag leben oder wie man den schwarzen Freitag überlebt</a></li>
<li><a href="../de477826/index.html">Übersicht und Vergleich der V2X-Technologien</a></li>
<li><a href="../de477832/index.html">Wie komme ich mit der Generation Z zurecht?</a></li>
<li><a href="../de477834/index.html">Prinzipien zum Aufbau von Streaming-Analytics-Systemen</a></li>
<li><a href="../de477838/index.html">PVS-Studio Static Analyzer als Tool zum Schutz vor Zero-Day-Schwachstellen</a></li>
<li><a href="../de477840/index.html">Static Code Analyzer von PVS-Studio zum Schutz vor Zero-Day-Schwachstellen</a></li>
<li><a href="../de477842/index.html">Geschichten von Gennady Zelenko und Sergey Popov - Technologie-Popularisatoren in der UdSSR</a></li>
<li><a href="../de477844/index.html">5 Schritte von der Idee bis zur praktischen Anwendung des maschinellen Lernens mit SAP Data Intelligence</a></li>
<li><a href="../de477846/index.html">Die Zusammenfassung der Ereignisse für HR-Experten in der IT für Dezember 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>