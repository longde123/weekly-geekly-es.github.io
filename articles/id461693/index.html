<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêµ ‚óºÔ∏è üëÇüèæ OpenCV 4 kompilasi silang untuk Raspberry Pi dan BeagleBone Black üë®üèª‚Äçüéì üê¥ ‚ò∫Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. 

 Ketika saya ingin menginstal OpenCV pada raspberry saya untuk satu proyek, saya sangat kecewa dengan hasilnya. Ternyata untuk versi ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenCV 4 kompilasi silang untuk Raspberry Pi dan BeagleBone Black</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461693/"> Halo semuanya. <br><br>  Ketika saya ingin menginstal OpenCV pada raspberry saya untuk satu proyek, saya sangat kecewa dengan hasilnya.  Ternyata untuk versi baru gambar Raspbian yang mendukung Python3.7 tidak mungkin untuk menginstal perpustakaan dari repositori dengan perintah instal pip yang sudah dikenal. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Alasan</b> <div class="spoiler_text">  pip install opencv-python memberi saya hasil yang tidak terduga: "Tidak dapat menemukan versi yang memenuhi persyaratan ...".  Baru-baru ini, dengan cara ini saya menginstal perpustakaan ini di komputer utama saya, dan hasilnya positif. <br><br>  Ketika saya mengecek diri saya untuk kelengkungan dan memastikan bahwa saya masih dapat mengetik perintah 25 karakter dengan benar tanpa kesalahan ketik, sudah waktunya untuk mencari tahu apa lagi yang dapat mempengaruhi hasil. <br><br>  Halaman opencv-python resmi di pypi.org telah banyak menjelaskan: <br><blockquote>  ... Perhatikan bahwa format roda (terutama manylinux) saat ini tidak mendukung arsitektur ARM dengan benar sehingga tidak ada paket untuk platform berbasis ARM di PyPI.  Namun, paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">opencv</a> -python untuk Raspberry Pi dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.piwheels.org</a> . <br><br>  <i>... Harap dicatat bahwa format roda (terutama manylinux) saat ini tidak mendukung arsitektur ARM, sehingga PyPI tidak memiliki paket untuk platform berbasis ARM.</i>  <i>Namun, paket <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">opencv</a> -python untuk Raspberry Pi dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">www.piwheels.org</a> .</i> <br></blockquote>  Ok ... <br><br>  Saya memeriksa apakah raspberry menarik paket-paket dari sumber yang benar, tetapi blok terakhir dari situs meletakkan semuanya di tempatnya: <br><blockquote>  Roda yang disediakan mendukung semua model Raspberry Pi (Pi 3, Pi 2, Pi 1 dan Pi Zero).  Roda disediakan untuk Raspbian Jessie (Python 3.4) dan Raspbian Stretch (Python 3.5).  Kami berencana untuk menambahkan dukungan untuk Raspbian Buster (Python 3.7) pada waktunya. <br><br>  <i>Roda yang disediakan mendukung semua model Raspberry Pi (Pi 3, Pi 2, Pi 1 dan Pi Zero. Roda mendukung Raspbian Jessie (Python 3.4) dan Raspbian Stretch (Python 3.5). Kami berencana untuk menambahkan dukungan untuk Raspbian Buster (Python 3.7) pada waktunya.</i> <br></blockquote>  Saya sudah siap untuk malam tanpa tidur dengan kompilasi OpenCV pada raspberry, tetapi saya ingat tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel</a> tentang kompilasi silang perpustakaan (bukan apa-apa yang disarankan oleh para guru di institut bahwa kami melakukan laboratorium alih-alih manual).  Setelah sedikit mengubah parameter dari artikel (perlu menambahkan impor untuk python3 dan memeriksa apakah semua pustaka adalah untuk OpenCV 4.1.0), saya dapat mencapai hasil yang saya inginkan. <br><br>  Namun, kemalasan mulai muncul, dan saya mulai mencari solusi yang siap pakai untuk masalah seperti itu.  Jadi saya menemukan artikel ini.  Mengikutinya, saya mengumpulkan semuanya pertama kali tanpa menari dengan rebana dan ritual perdukunan lainnya.  Saya pikir artikel ini akan bermanfaat bagi orang lain. <br></div></div><br>  Saya menyajikan terjemahan bebas saya dari artikel " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cross kompilasi OpenCV 4 untuk Raspberry Pi dan BeagleBone Black</a> " oleh Paul Silisteanu.  Mungkin seseorang akan menghemat menit atau jam yang dapat dihabiskan untuk pelajaran yang lebih menarik daripada memainkan cerita detektif. <br><br>  Dari diri saya sendiri, saya menambahkan beberapa catatan ke terjemahan, yang saya anggap penting: [ <i>mereka disorot dalam teks</i> ]. <br><br>  Selamat membaca! <br><br><h3>  OpenCV 4 kompilasi silang untuk Raspberry Pi dan BeagleBone Black </h3><br>  Pada artikel ini, saya akan menunjukkan kepada Anda bagaimana menginstal versi terbaru <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">OpenCV</a> untuk Raspberry Pi dan BeagleBone Black menggunakan lintas-kompilasi.  Pada saat penulisan artikel ini [ <i>pembaruannya pada saat terjemahan adalah 17 Juli 2019</i> ], versi terbaru dari OpenCV adalah 4.1.0, dan versi yang dikirimkan dengan OS standar adalah 3.2.0.  Tentu saja, dimungkinkan untuk mengkompilasi OpenCV dari sumber langsung ke Raspberry atau BeagleBone Black, tetapi ini bisa memakan waktu beberapa jam.  Dan kompilasi silang OpenCV untuk armhf adalah proses yang berlangsung 20-30 menit.  Dan, tergantung pada kecepatan komputer Anda, mungkin bahkan lebih cepat. <br><br>  Saya sarankan membangun di mesin virtual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Debian Buster</a> atau dalam wadah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Docker</a> , agar tidak mengacaukan OS utama Anda.  Jika Anda memutuskan untuk menginstal Buster pada mesin virtual, pastikan untuk menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">build minimum</a> [ <i>Saya sarankan melakukan hal itu - saya memeriksanya di kulit saya sendiri</i> ].  Sangatlah penting untuk memulai dengan sistem yang sederhana, karena kita perlu menginstal binari dan pustaka armhf.  Menggunakan sistem minimal, kami menghindari potensi konflik dengan versi x86-64 asli. <br><br>  Artikel ini menjelaskan bekerja hanya pada Raspberry PI dengan sistem Raspbian, tetapi jika Anda menggunakan BeagleBone Black, semuanya harus bekerja persis sama. <br><br>  Saya berasumsi bahwa Anda sudah menginstal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Raspbian yang</a> bersih.  Saya menggunakan gambar versi desktop terbaru yang tersedia.  Sebenarnya, Anda dapat mengikuti artikel tentang Raspbian Lite, tetapi saya melakukan semua tes saya menggunakan versi GUI. <br><br>  Pertama, mari pastikan mesin atau wadah virtual kami diperbarui: <br><br><pre><code class="bash hljs">sudo apt update sudo apt upgrade</code> </pre> <br>  Selanjutnya, Anda perlu menghubungkan arsitektur armhf. <br><br><pre> <code class="bash hljs">sudo dpkg --add-architecture armhf sudo apt update sudo apt install qemu-user-static</code> </pre><br>  Pada titik ini, Anda dapat menginstal pustaka dan aplikasi untuk armhf di sistem Anda dan menjalankannya. <br><br>  Kami akan membangun OpenCV dengan dukungan untuk Python dan C ++.  Mari kita instal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Python2 dan Python3</a> , serta pakta <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">NumPy</a> untuk mereka: <br><br><pre> <code class="bash hljs">sudo apt-get install python3-dev sudo apt-get install python3-numpy sudo apt-get install python-dev sudo apt-get install python-numpy</code> </pre><br>  Kami juga membutuhkan libpython untuk arsitektur armhf: <br><br><pre> <code class="bash hljs">sudo apt-get install libpython2-dev:armhf sudo apt-get install libpython3-dev:armhf</code> </pre><br>  Selanjutnya, kita akan menginstal libgtk-3 untuk dapat menulis program sederhana dengan antarmuka grafis.  Jika Anda berencana untuk menggunakan OpenCV secara eksklusif dalam mode offline, Anda dapat dengan aman mengabaikan dua pustaka berikut: <br><br><pre> <code class="bash hljs">$ sudo apt install libgtk-3-dev:armhf libcanberra-gtk3-dev:armhf</code> </pre><br>  Kita juga perlu menginstal beberapa perpustakaan lain yang diperlukan untuk OpenCV (dukungan untuk berbagai format gambar dan video): <br><br><pre> <code class="bash hljs">sudo apt install libtiff-dev:armhf zlib1g-dev:armhf sudo apt install libjpeg-dev:armhf libpng-dev:armhf sudo apt install libavcodec-dev:armhf libavformat-dev:armhf libswscale-dev:armhf libv4l-dev:armhf sudo apt-get install libxvidcore-dev:armhf libx264-dev:armhf</code> </pre><br>  Selanjutnya, kita akan menginstal cross-compiler untuk Debian, yang dapat digunakan untuk membuat binari armhf untuk Raspberry Pi: <br><br><pre> <code class="bash hljs">sudo apt install crossbuild-essential-armhf sudo apt install gfortran-arm-linux-gnueabihf</code> </pre><br>  Pada saat penulisan ini, toolkit di atas didasarkan pada GCC versi 8.3, yang sama dengan di Raspbian. <br><br>  Akhirnya, kita akan menginstal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cmake</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">git</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pkg-config</a> dan wget: <br><br><pre> <code class="bash hljs">sudo apt install cmake git pkg-config wget</code> </pre><br>  Selanjutnya, kita dapat mengunduh versi OpenCV saat ini.  Saya akan menunjukkan kepada Anda cara menginstal versi lengkap OpenCV (perpustakaan default dan contrib): <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ mkdir opencv_all &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv_all wget -O opencv.tar.gz https://github.com/opencv/opencv/archive/4.1.0.tar.gz tar xf opencv.tar.gz wget -O opencv_contrib.tar.gz https://github.com/opencv/opencv_contrib/archive/4.1.0.tar.gz tar xf opencv_contrib.tar.gz rm *.tar.gz</code> </pre><br>  Kita perlu mengubah sementara dua variabel sistem yang diperlukan untuk berhasil membangun dukungan GTK +: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PKG_CONFIG_PATH=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PKG_CONFIG_LIBDIR=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig</code> </pre><br>  Saat ini, kita dapat menggunakan Cmake untuk membuat skrip build OpenCV: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv-4.1.0 mkdir build &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> build cmake -D CMAKE_BUILD_TYPE=RELEASE \ -D CMAKE_INSTALL_PREFIX=/opt/opencv-4.1.0 \ -D CMAKE_TOOLCHAIN_FILE=../platforms/linux/arm-gnueabi.toolchain.cmake \ -D OPENCV_EXTRA_MODULES_PATH=~/opencv_all/opencv_contrib-4.1.0/modules \ -D OPENCV_ENABLE_NONFREE=ON \ -D ENABLE_NEON=ON \ -D ENABLE_VFPV3=ON \ -D BUILD_TESTS=OFF \ -D BUILD_DOCS=OFF \ -D PYTHON2_INCLUDE_PATH=/usr/include/python2.7 \ -D PYTHON2_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython2.7.so \ -D PYTHON2_NUMPY_INCLUDE_DIRS=/usr/lib/python2/dist-packages/numpy/core/include \ -D PYTHON3_INCLUDE_PATH=/usr/include/python3.7m \ -D PYTHON3_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython3.7m.so \ -D PYTHON3_NUMPY_INCLUDE_DIRS=/usr/lib/python3/dist-packages/numpy/core/include \ -D BUILD_OPENCV_PYTHON2=ON \ -D BUILD_OPENCV_PYTHON3=ON \ -D BUILD_EXAMPLES=OFF ..</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Deskripsi parameter</b> <div class="spoiler_text">  CMAKE_INSTALL_PREFIX - Direktori tempat data yang dikumpulkan akan ditemukan <br>  CMAKE_TOOLCHAIN_FILE - Parameter yang menunjukkan Cmake cross-compilation nantinya <br>  OPENCV_EXTRA_MODULES_PATH - Jalur ke modul OpenCV tambahan <br>  OPENCV_ENABLE_NONFREE = ON - Sertakan algoritma yang dipatenkan dalam perakitan <br>  Harap dicatat bahwa pembatasan paten berlaku untuk penggunaan algoritma SIFT dan SURF.  Dan jika Anda berencana perakitan untuk penggunaan komersial, pikirkan apakah Anda membutuhkannya dan periksa batasannya. <br>  ENABLE_NEON = ON - Aktifkan instruksi NEON untuk optimisasi untuk ARM <br>  ENABLE_VFPV3 = ON - Mengaktifkan instruksi VFPv3-D32 untuk optimisasi untuk ARM <br>  BUILD_TESTS = OFF - Nonaktifkan aturan untuk membuat tes (akan lebih cepat) <br>  BUILD_DOCS = OFF - Nonaktifkan aturan untuk membuat dokumentasi <br>  PYTHON2_INCLUDE_PATH - Jalan ke python2.7 <br>  PYTHON2_LIBRARY - Jalan ke perpustakaan libpython2 yang diunduh sebelumnya <br>  PYTHON2_NUMPY_INCLUDE_DIRS - Jalan ke NumPy untuk python2.7 <br>  PYTHON3_INCLUDE_PATH - Jalan ke python3 <br>  PYTHON3_LIBRARY - Jalan ke perpustakaan libpython3 yang diunduh sebelumnya <br>  PYTHON3_NUMPY_INCLUDE_DIRS - Jalan ke NumPy untuk python3 <br>  BUILD_OPENCV_PYTHON2 = ON - Sertakan aturan untuk python2 dalam majelis <br>  BUILD_OPENCV_PYTHON3 = ON - Sertakan aturan untuk python4 dalam majelis <br>  BUILD_EXAMPLES = OFF - Nonaktifkan aturan untuk mengumpulkan semua contoh <br></div></div><br>  Jika Anda tidak memiliki kesalahan, maka sebagai hasilnya Anda akan menerima Makefile di folder assembly.  Sekarang kita dapat memulai build aktual: <br><br><pre> <code class="bash hljs">make -j16</code> </pre><br>  [ <i>Artikel ini mengindikasikan 16 proses paralel selama perakitan, tetapi parameter ini harus dipilih untuk OS host Anda</i> ] <br><br>  Setelah fase build selesai, kita dapat menginstal perpustakaan: <br><br><pre> <code class="bash hljs">sudo make install/strip</code> </pre><br>  Maka kita perlu mengubah nama pustaka, yang oleh installer keliru disebut pustaka x86_64, meskipun sebenarnya itu adalah armhf: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/opencv-4.1.0/lib/python3.7/dist-packages/cv2/python-3.7/ sudo cp cv2.cpython-37m-x86_64-linux-gnu.so cv2.so</code> </pre><br>  Mari kompres folder instalasi dan simpan arsip di direktori home: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt tar -cjvf ~/opencv-4.1.0-armhf.tar.bz2 opencv-4.1.0 <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~</code> </pre><br>  Untuk membuat hidup kita lebih mudah, saya juga menyiapkan file pengaturan pkg-config sederhana yang disebut opencv.pc.  Anda dapat mengunduhnya dengan cara ini: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://gist.github.com/sol-prog/ed383474872958081985de733eaf352d opencv_cpp_compile_settings <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv_cpp_compile_settings cp opencv.pc ~ <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~</code> </pre><br>  [ <i>Sebenarnya, ini tidak perlu dilakukan di mesin host.</i>  <i>Anda dapat mengunduh file langsung ke Raspberry.</i>  <i>Tetapi penulis ingin melakukannya dalam urutan ini</i> ] <br><br><div class="spoiler">  <b class="spoiler_title">opencv.pc</b> <div class="spoiler_text">  <i>Karena file ini relatif kecil, izinkan saya memasukkannya ke dalam teks artikel:</i> <br><br><pre> <code class="plaintext hljs">libdir = /opt/opencv-4.1.0/lib includedir = /opt/opencv-4.1.0/include/opencv4 Name: OpenCV Description: OpenCV (Open Source Computer Vision Library) is an open source computer vision and machine learning software library. Version: 4.1.0 Libs: -L${libdir} -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc -lopencv_line_descriptor -lopencv_ml -lopencv_objdetect -lopencv_optflow -lopencv_phase_unwrapping -lopencv_photo -lopencv_plot -lopencv_quality -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect -lopencv_xphoto Cflags: -I${includedir}</code> -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc <code class="plaintext hljs">libdir = /opt/opencv-4.1.0/lib includedir = /opt/opencv-4.1.0/include/opencv4 Name: OpenCV Description: OpenCV (Open Source Computer Vision Library) is an open source computer vision and machine learning software library. Version: 4.1.0 Libs: -L${libdir} -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc -lopencv_line_descriptor -lopencv_ml -lopencv_objdetect -lopencv_optflow -lopencv_phase_unwrapping -lopencv_photo -lopencv_plot -lopencv_quality -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect -lopencv_xphoto Cflags: -I${includedir}</code> -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect <code class="plaintext hljs">libdir = /opt/opencv-4.1.0/lib includedir = /opt/opencv-4.1.0/include/opencv4 Name: OpenCV Description: OpenCV (Open Source Computer Vision Library) is an open source computer vision and machine learning software library. Version: 4.1.0 Libs: -L${libdir} -lopencv_aruco -lopencv_bgsegm -lopencv_bioinspired -lopencv_calib3d -lopencv_ccalib -lopencv_core -lopencv_datasets -lopencv_dnn_objdetect -lopencv_dnn -lopencv_dpm -lopencv_face -lopencv_features2d -lopencv_flann -lopencv_freetype -lopencv_fuzzy -lopencv_gapi -lopencv_hfs -lopencv_highgui -lopencv_imgcodecs -lopencv_img_hash -lopencv_imgproc -lopencv_line_descriptor -lopencv_ml -lopencv_objdetect -lopencv_optflow -lopencv_phase_unwrapping -lopencv_photo -lopencv_plot -lopencv_quality -lopencv_reg -lopencv_rgbd -lopencv_saliency -lopencv_shape -lopencv_stereo -lopencv_stitching -lopencv_structured_light -lopencv_superres -lopencv_surface_matching -lopencv_text -lopencv_tracking -lopencv_videoio -lopencv_video -lopencv_videostab -lopencv_xfeatures2d -lopencv_ximgproc -lopencv_xobjdetect -lopencv_xphoto Cflags: -I${includedir}</code> </pre><br></div></div><br>  Salin opencv-4.1.0-armhf.tar.bz2 dan opencv.pc dari folder rumah Anda ke dalam RPi. <br><br>  Pada bagian selanjutnya dari artikel ini, saya berasumsi bahwa Anda <b>sudah melakukan</b> segalanya <b>pada Raspberry Pi Anda</b> . <br><br>  Pastikan RPi Anda memiliki semua pustaka pengembangan yang kami gunakan.  Seperti sebelumnya, jika Anda tidak berencana menggunakan GTK +, abaikan baris pertama dari perintah berikut.  Sebagian besar perpustakaan ini harus sudah diinstal jika Anda menggunakan versi lengkap Raspbian: <br><br><pre> <code class="bash hljs">sudo apt install libgtk-3-dev libcanberra-gtk3-dev sudo apt install libtiff-dev zlib1g-dev sudo apt install libjpeg-dev libpng-dev sudo apt install libavcodec-dev libavformat-dev libswscale-dev libv4l-dev sudo apt-get install libxvidcore-dev libx264-dev</code> </pre><br>  Buka zip dan pindahkan perpustakaan ke folder / opt RPi Anda: <br><br><pre> <code class="bash hljs">tar xfv opencv-4.1.0-armhf.tar.bz2 sudo mv opencv-4.1.0 /opt</code> </pre><br>  Jika mau, Anda dapat menghapus arsip: <br><br><pre> <code class="bash hljs">rm opencv-4.1.0-armhf.tar.bz2</code> </pre><br>  Selanjutnya, mari kita juga pindahkan opencv.pc ke folder tempat pkg-config dapat menemukannya: <br><br><pre> <code class="bash hljs">sudo mv opencv.pc /usr/lib/arm-linux-gnueabihf/pkgconfig</code> </pre><br>  Agar sistem operasi dapat menemukan pustaka OpenCV, kita perlu menambahkannya ke jalur pustaka: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'export LD_LIBRARY_PATH=/opt/opencv-4.1.0/lib:$LD_LIBRARY_PATH'</span></span> &gt;&gt; .bashrc <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> .bashrc</code> </pre><br>  Logout dan log in atau restart Terminal. <br><br>  Selanjutnya, buat beberapa tautan simbolis yang memungkinkan Python memuat pustaka yang baru dibuat: <br><br><pre> <code class="bash hljs">sudo ln -s /opt/opencv-4.1.0/lib/python2.7/dist-packages/cv2 /usr/lib/python2.7/dist-packages/cv2 sudo ln -s /opt/opencv-4.1.0/lib/python3.7/dist-packages/cv2 /usr/lib/python3/dist-packages/cv2</code> </pre><br>  Pada titik ini, Anda dapat menggunakan pustaka OpenCV dari C ++ atau Python. <br>  Di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori</a> untuk artikel ini, Anda bisa menemukan beberapa program pengujian dalam C ++ dan Python.  Anda dapat mengunduh kode pada Pi Anda menggunakan perintah: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/sol-prog/raspberry-pi-opencv.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> raspberry-pi-opencv/tests</code> </pre><br>  Ada dua tes mandiri yang dapat Anda gunakan bahkan jika Anda tidak memiliki layar yang terhubung ke RPi Anda: cli_cpp_test.cpp dan cli_python_test.py.  Saya juga menyertakan dua tes grafis yang memerlukan tampilan: gui_cpp_test.cpp dan gui_python_test.py. <br><br>  Anda dapat membuat dan menjalankan tes C ++ sebagai berikut: <br><br><pre> <code class="bash hljs">g++ cli_cpp_test.cpp -o cli_cpp_test `pkg-config --cflags --libs opencv` ./cli_cpp_test</code> </pre><br>  Dan, jika Anda memiliki layar yang terhubung ke RPi Anda: <br><br><pre> <code class="bash hljs">g++ gui_cpp_test.cpp -o gui_cpp_test `pkg-config --cflags --libs opencv` ./gui_cpp_test</code> </pre><br>  Berikut adalah screenshot dari tes C ++ GUI yang berjalan di Pi saya: <br><br><img src="https://habrastorage.org/webt/wu/fx/jt/wufxjtxgrqa-mymc6evbxj1jbx4.jpeg"><br><br>  Untuk pengujian Python, gunakan: <br><br><pre> <code class="bash hljs">python3 cli_python_test.py</code> </pre><br>  atau <br><br><pre> <code class="bash hljs">python3 gui_python_test.py</code> </pre><br>  Sebagai catatan, Anda juga dapat melakukan kompilasi silang program C ++ menggunakan OpenCV pada sistem Debian x86-64 Anda dan menjalankan kode biner pada RPi Anda. <br><br>  [ <i>Lebih lanjut dalam artikel ini, penulis merekomendasikan untuk membaca buku Derek Molloy tentang pemrograman untuk RaspberryPi.</i>  <i>Anda dapat menemukan tautan rujukan ke buku di artikel asli</i> ]. <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Tautan ke artikel asli</a> <br><br><div class="spoiler">  <b class="spoiler_title">Tambahan kecil dari diriku sendiri</b> <div class="spoiler_text">  Saya menyiapkan Dockerfile yang akan memungkinkan Anda untuk melakukan semua langkah dari artikel tanpa harus menggunakan mesin virtual. <br><br>  Proses instalasi: <br>  Buat Dockerfile. <br><br><pre> <code class="bash hljs">mkdir opencv &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opencv &amp;&amp; mkdir armhf_opencv touch armhf_opencv/Dockerfile nano armhf_opencv/Dockerfile</code> </pre><br>  Selanjutnya, masukkan kode ke Dockerfile dan setelah itu kita mulai perakitan gambar. <br><br><pre> <code class="bash hljs">docker image build armhf_opencv/</code> </pre><br>  Setelah build selesai, Anda akan melihat pengenal gambar yang dirakit: <br><br><pre> <code class="bash hljs">&gt;&gt;&gt; Successfully built babdc99ba2d8</code> </pre><br>  Kami menggunakan pengidentifikasi ini untuk menetapkan tag untuk gambar dan menjalankannya: <br><br><pre> <code class="bash hljs">docker tag babdc99ba2d8 armhf_opencv:latest docker run armhf_opencv</code> </pre><br>  Setelah memulai wadah, Anda perlu memompa arsip yang sudah dirakit dan file opencv.pc darinya.  Untuk melakukan ini, kita memerlukan pengenalnya: <br><br><pre> <code class="bash hljs">docker container ls --all &gt;&gt;&gt; CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES &gt;&gt;&gt; 369dff5a0a9b armhf_opencv <span class="hljs-string"><span class="hljs-string">"bash"</span></span> 9 seconds ago Exited (0) 7 seconds ago affectionate_wu</code> </pre><br>  Salin file yang kita butuhkan ke direktori saat ini: <br><br><pre> <code class="bash hljs">docker cp 369dff5a0a9b:/root/opencv-4.1.0-armhf.tar.bz2 ./ docker cp 369dff5a0a9b:/root/opencv.pc ./</code> </pre><br>  Setelah itu, saya sarankan menghapus gambar, karena membutuhkan ruang 2,5GB. <br><br>  Membangun melalui buruh pelabuhan di i59600K saya dengan 16GB membutuhkan waktu sekitar 30-40 menit, dan banyak waktu dihabiskan untuk mengunduh data dari repositori. <br><br>  Lebih lanjut, proses instalasi pada Raspberry Pi tidak berbeda dengan yang dijelaskan dalam artikel. <br><br>  Dockerfile sendiri: <br><br><pre> <code class="plaintext hljs">FROM debian:buster USER root RUN apt update &amp;&amp; apt upgrade RUN dpkg --add-architecture armhf &amp;&amp; \ apt update &amp;&amp; apt install -y qemu-user-static RUN apt install -y python3-dev python3-numpy python-dev python-numpy RUN apt install -y libpython2-dev:armhf libpython3-dev:armhf \ libgtk-3-dev:armhf libcanberra-gtk3-dev:armhf \ libtiff-dev:armhf zlib1g-dev:armhf \ libjpeg-dev:armhf libpng-dev:armhf \ libavcodec-dev:armhf libavformat-dev:armhf \ libswscale-dev:armhf libv4l-dev:armhf \ libxvidcore-dev:armhf libx264-dev:armhf RUN apt install -y crossbuild-essential-armhf gfortran-arm-linux-gnueabihf RUN apt install -y cmake git pkg-config wget RUN mkdir opencv_all &amp;&amp; cd opencv_all &amp;&amp; \ wget -O opencv.tar.gz https://github.com/opencv/opencv/archive/4.1.0.tar.gz &amp;&amp; \ tar -xf opencv.tar.gz -C /tmp &amp;&amp; \ wget -O opencv_contrib.tar.gz https://github.com/opencv/opencv_contrib/archive/4.1.0.tar.gz &amp;&amp; \ tar -xf opencv_contrib.tar.gz -C /tmp &amp;&amp; \ rm *.tar.gz &amp;&amp; \ export PKG_CONFIG_PATH=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig &amp;&amp; \ export PKG_CONFIG_LIBDIR=/usr/lib/arm-linux-gnueabihf/pkgconfig:/usr/share/pkgconfig &amp;&amp; \ cd /tmp/opencv-4.1.0 &amp;&amp; mkdir build &amp;&amp; cd build &amp;&amp; \ cmake -D CMAKE_BUILD_TYPE=RELEASE \ -D CMAKE_INSTALL_PREFIX=/opt/opencv-4.1.0 \ -D CMAKE_TOOLCHAIN_FILE=../platforms/linux/arm-gnueabi.toolchain.cmake \ -D OPENCV_EXTRA_MODULES_PATH=/tmp/opencv_contrib-4.1.0/modules \ -D OPENCV_ENABLE_NONFREE=ON \ -D ENABLE_NEON=ON \ -D ENABLE_VFPV3=ON \ -D BUILD_TESTS=OFF \ -D BUILD_DOCS=OFF \ -D PYTHON2_INCLUDE_PATH=/usr/include/python2.7 \ -D PYTHON2_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython2.7.so \ -D PYTHON2_NUMPY_INCLUDE_DIRS=/usr/lib/python2/dist-packages/numpy/core/include \ -D PYTHON3_INCLUDE_PATH=/usr/include/python3.7m \ -D PYTHON3_LIBRARIES=/usr/lib/arm-linux-gnueabihf/libpython3.7m.so \ -D PYTHON3_NUMPY_INCLUDE_DIRS=/usr/lib/python3/dist-packages/numpy/core/include \ -D BUILD_OPENCV_PYTHON2=ON \ -D BUILD_OPENCV_PYTHON3=ON \ -D BUILD_EXAMPLES=OFF .. &amp;&amp; \ make -j6 &amp;&amp; make install/strip RUN cd /opt/opencv-4.1.0/lib/python3.7/dist-packages/cv2/python-3.7/ &amp;&amp; \ cp cv2.cpython-37m-x86_64-linux-gnu.so cv2.so RUN cd /opt &amp;&amp; tar -cjvf /root/opencv-4.1.0-armhf.tar.bz2 opencv-4.1.0 RUN git clone https://gist.github.com/sol-prog/ed383474872958081985de733eaf352d opencv_cpp_compile_settings &amp;&amp; \ cd opencv_cpp_compile_settings &amp;&amp; \ cp opencv.pc /root/</code> </pre><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461693/">https://habr.com/ru/post/id461693/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461679/index.html">Perpustakaan Seni Elektronik yang Kualitasnya Hampir Baik</a></li>
<li><a href="../id461685/index.html">Terapi LED, atau "apel muda" abad ke-21</a></li>
<li><a href="../id461687/index.html">Docker + Laravel + RoadRunner = ‚ù§</a></li>
<li><a href="../id461689/index.html">Identifikasi IoT Pengembang</a></li>
<li><a href="../id461691/index.html">Bagaimana kami menutup kerentanan di OS Astra Linux Edisi Khusus</a></li>
<li><a href="../id461695/index.html">Magang VFX</a></li>
<li><a href="../id461697/index.html">Kecerdasan Bir</a></li>
<li><a href="../id461699/index.html">Piglet Gunung Berapi, atau SQL do-it-yourself</a></li>
<li><a href="../id461703/index.html">Pelaporan microstepping dalam pekerjaan seorang programmer</a></li>
<li><a href="../id461707/index.html">The Adventures of the Elusive Malvari, Bagian V: Lebih Banyak DDE dan COM Scriptlets</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>