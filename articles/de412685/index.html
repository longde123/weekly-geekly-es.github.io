<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥨 👷🏼 👩🏿‍💻 Unity GPU Path Tracing - Teil 2 👩‍❤️‍💋‍👩 🚵🏾 💘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""Es gibt nichts Schlimmeres als ein klares Bild eines verschwommenen Konzepts." - Fotograf Ansel Adams 
 Im ersten Teil des Artikels haben wir einen W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unity GPU Path Tracing - Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412685/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/209/d23/f12/209d23f129b3a20b6bf0f9c2e06d9633.png" alt="Bild"></div><br><blockquote>  <em>"Es gibt nichts Schlimmeres als ein klares Bild eines verschwommenen Konzepts."</em>  <em>- Fotograf Ansel Adams</em> </blockquote><br>  Im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten Teil des Artikels haben</a> wir einen Whited Ray Tracer erstellt, der perfekte Reflexionen und scharfe Schatten nachzeichnen kann.  Uns fehlen jedoch die Auswirkungen von Unschärfe: diffuse Reflexion, glänzende Reflexionen und weiche Schatten. <br><br>  Basierend auf dem <a href="">Code, den</a> wir <a href="">bereits haben</a> , werden wir die 1986 von James Cajia formulierte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rendering-Gleichung</a> iterativ lösen und unseren Renderer in einen <em>Pfad-Tracer</em> verwandeln, der die oben genannten Effekte übertragen kann.  Wir werden wieder C # für Skripte und HLSL für Shader verwenden.  Der Code wird auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Bitbucket</a> hochgeladen. <br><a name="habracut"></a><br>  Dieser Artikel ist viel mathematischer als der vorherige, aber seien Sie nicht beunruhigt.  Ich werde versuchen, jede Formel so klar wie möglich zu erklären.  Die Formeln werden hier benötigt, um zu sehen, was passiert und <em>warum</em> unser Renderer funktioniert. Ich empfehle daher, sie zu verstehen. Wenn etwas nicht klar ist, stellen Sie Fragen in den Kommentaren zum Originalartikel. <br><cut></cut><br>  Das Bild unten wird mithilfe der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Graffiti Shelter-</a> Karte von der HDRI Haven-Website gerendert.  Andere Bilder in diesem Artikel wurden mit der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kiara 9 Dusk-</a> Karte gerendert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/927/3c6/10d/9273c610dca750b85f8c3ad9a6655897.jpg" alt="Bild"></div><br><h1>  Rendering-Gleichung </h1><br>  Aus formaler Sicht besteht die Aufgabe des fotorealistischen Renderers darin, die Rendering-Gleichung zu lösen, die wie folgt geschrieben ist: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L </font></font></span><span class="MJXp-mo" id="MJXp-Span-3" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x </font></font></span><span class="MJXp-mo" id="MJXp-Span-5" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">,</font></font></span><span class="MJXp-mspace" id="MJXp-Span-6" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-7">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;">o </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;">g </font></span><span class="MJXp-msubsup" id="MJXp-Span-16"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-16"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-18" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;">o</font></span></span></span><span class="MJXp-mo" id="MJXp-Span-20" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> ) </font></span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span><span class="MJXp-msubsup" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">L </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-24" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">e</font></span></span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> ( </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26"><font style="vertical-align: inherit;">x </font></span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">,</font></span></font><span class="MJXp-mtext" id="MJXp-Span-11">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-12"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-16"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-17" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-18" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-19"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-20" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-21" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-22"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-24" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mo" id="MJXp-Span-25" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-27" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mspace" id="MJXp-Span-28" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-29">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-30"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34"><font style="vertical-align: inherit;">o </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;">g </font></span><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41"><font style="vertical-align: inherit;">o</font></span></span></span><span class="MJXp-mo" id="MJXp-Span-42" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> ) </font></span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;">+ </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;">i </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;">n </font></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">t </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-49" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;">O </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-49" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52"><font style="vertical-align: inherit;">m </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-49" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53"><font style="vertical-align: inherit;">e </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-49" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54"><font style="vertical-align: inherit;">g </font></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-49" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55"><font style="vertical-align: inherit;">a </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-56"><span class="MJXp-msubsup" id="MJXp-Span-57"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">f </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-56"><span class="MJXp-msubsup" id="MJXp-Span-57"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-59" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">r</font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-56"><span class="MJXp-mo" id="MJXp-Span-60" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> ( </font></span></span><span class="MJXp-mrow" id="MJXp-Span-56"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61"><font style="vertical-align: inherit;">x </font></span></span><span class="MJXp-mrow" id="MJXp-Span-56"><span class="MJXp-mo" id="MJXp-Span-62" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;">,</font></span></span></font><span class="MJXp-mtext" id="MJXp-Span-33">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-34"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-36"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-38"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-40" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-42" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-43" style="margin-left: 0.267em; margin-right: 0.267em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-44">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-46"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-47"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-49" style="vertical-align: -0.4em;"><span class="MJXp-mtext" id="MJXp-Span-50">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-52"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-56"><span class="MJXp-msubsup" id="MJXp-Span-57"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-59" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mo" id="MJXp-Span-60" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-62" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mspace" id="MJXp-Span-63" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-64">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-67"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69"><font style="vertical-align: inherit;">o </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72"><font style="vertical-align: inherit;">g </font></span><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-75" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76"><font style="vertical-align: inherit;">i</font></span></span></span><span class="MJXp-mo" id="MJXp-Span-77" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"> ,</font></span></font><span class="MJXp-mtext" id="MJXp-Span-68">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-70"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-73"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-74" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-75" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-76"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-77" style="margin-left: 0em; margin-right: 0.222em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mspace" id="MJXp-Span-78" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-79">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e </font></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">c </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84"><font style="vertical-align: inherit;">o </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87"><font style="vertical-align: inherit;">g </font></span><span class="MJXp-msubsup" id="MJXp-Span-88"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-88"><span class="MJXp-mrow MJXp-script" id="MJXp-Span-90" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91"><font style="vertical-align: inherit;">o</font></span></span></span><span class="MJXp-mo" id="MJXp-Span-92" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> )</font></span></font><span class="MJXp-mtext" id="MJXp-Span-83">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-85"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-87"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-88"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-90" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-91"><font style="vertical-align: inherit;"></font></span></span></span><span class="MJXp-mo" id="MJXp-Span-92" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mspace" id="MJXp-Span-93" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-94" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-95">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">c</span><span class="MJXp-mtext" id="MJXp-Span-99">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">g</span><span class="MJXp-msubsup" id="MJXp-Span-104"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-106" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-108">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-111">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-112">t</span><span class="MJXp-mtext" id="MJXp-Span-113">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">n</span><span class="MJXp-mo" id="MJXp-Span-118" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-119" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120">L</span><span class="MJXp-mo" id="MJXp-Span-121" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-122">x</span><span class="MJXp-mo" id="MJXp-Span-123" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-124" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-125">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-126">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-127">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">c</span><span class="MJXp-mtext" id="MJXp-Span-129">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">g</span><span class="MJXp-msubsup" id="MJXp-Span-134"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-135" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-136" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-138" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-139" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-140">d</span><span class="MJXp-mtext" id="MJXp-Span-141">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-144">c</span><span class="MJXp-mtext" id="MJXp-Span-145">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-146">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-147">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">g</span><span class="MJXp-msubsup" id="MJXp-Span-150"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-152" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">i</span></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="140.286ex" height="2.78ex" viewBox="0 -832 60400.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-28" x="681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-78" x="1071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2C" x="1643" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="2505" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="2990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="3457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="4140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="4626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="5504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="5971" y="0"></use><g transform="translate(6451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-29" x="7424" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-3D" x="8091" y="0"></use><g transform="translate(9148,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-28" x="10259" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-78" x="10649" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2C" x="11221" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="12083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="12568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="13035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="13718" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="14204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="15082" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="15549" y="0"></use><g transform="translate(16029,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-29" x="17002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2B" x="17614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-69" x="18865" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6E" x="19210" y="0"></use><g transform="translate(19811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="2942" y="0"></use></g></g><g transform="translate(22727,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-66" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-72" x="693" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-28" x="909" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-78" x="1299" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2C" x="1871" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="2733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="3219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="3685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="4369" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="4854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="5733" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="6199" y="0"></use><g transform="translate(6680,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2C" x="7553" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="8415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="8901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="9367" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="10051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="10536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="11415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="11881" y="0"></use><g transform="translate(12362,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-29" x="13335" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-28" x="13891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="14530" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="15016" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="15482" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="16166" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="16651" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="17530" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="17996" y="0"></use><g transform="translate(18477,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="19601" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-64" x="20034" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="20558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-74" x="21043" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="21655" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="22140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="22607" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6E" x="23040" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-29" x="23641" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-4C" x="24197" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-28" x="24878" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-78" x="25268" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2C" x="25840" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="26702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="27188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="27654" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="28338" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="28823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="29702" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="30168" y="0"></use><g transform="translate(30649,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-29" x="31522" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-64" x="32078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="32852" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="33337" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="33804" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="34487" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="34973" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="35851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="36318" y="0"></use><g transform="translate(36798,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-69" x="748" y="-213"></use></g></g></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L (x, \, \ vec \ omega_ {o}) = L_e (x, \, \ vec \ omega_ {o}) + \ int _ {\ Omega} {f_r (x, \, \ vec \ omega_ {i }, \, \ vec \ omega_ {o}) \, (\ vec \ omega_ {i} \ cdot \ vec n) \, L (x, \, \ vec \ omega_ {i}) \, d \ vec \ omega_ {i}} </script></p><br>  Lassen Sie es uns analysieren.  Unser oberstes Ziel ist es, die Helligkeit des Bildschirmpixels zu bestimmen.  Die Rendering-Gleichung gibt uns die Beleuchtungsstärke an <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-154"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155">L</span><span class="MJXp-mo" id="MJXp-Span-156" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-157">x</span><span class="MJXp-mo" id="MJXp-Span-158" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-159" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-160">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">c</span><span class="MJXp-mtext" id="MJXp-Span-164">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-166">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">g</span><span class="MJXp-msubsup" id="MJXp-Span-169"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-171" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-173" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.149ex" height="2.66ex" viewBox="0 -832 7814.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-4C" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-28" x="681" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-78" x="1071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2C" x="1643" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="2505" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="2990" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="3457" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="4140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="4626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="5504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="5971" y="0"></use><g transform="translate(6451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-29" x="7424" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-2"> L (x, \, \ vec \ omega_ {o}) </script>  von einem Punkt kommen <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-174"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-78" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-3"> x </script>  (Einfallspunkt des Strahls) in Richtung <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-176"><span class="MJXp-mtext" id="MJXp-Span-177">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-178">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-180">c</span><span class="MJXp-mtext" id="MJXp-Span-181">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-185">g</span><span class="MJXp-msubsup" id="MJXp-Span-186"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-188" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">o</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.006ex" height="1.817ex" viewBox="0 -520.7 5169.3 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="1202" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="1885" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="2371" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="3249" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="3716" y="0"></use><g transform="translate(4196,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="748" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-4"> \ vec \ omega_ {o} </script>  (die Richtung, in die der Strahl fällt).  Die Oberfläche selbst kann eine Lichtquelle sein, die Licht emittiert <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-190"><span class="MJXp-msubsup" id="MJXp-Span-191"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-193" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-194" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">x</span><span class="MJXp-mo" id="MJXp-Span-196" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-197" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-198">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-199">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">c</span><span class="MJXp-mtext" id="MJXp-Span-202">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-204">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">g</span><span class="MJXp-msubsup" id="MJXp-Span-207"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-208" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-209" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-210">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-211" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.147ex" height="2.66ex" viewBox="0 -832 8244 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-28" x="1111" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-78" x="1500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-2C" x="2073" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-76" x="2935" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="3420" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-63" x="3887" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="4570" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6D" x="5056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-65" x="5934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-67" x="6401" y="0"></use><g transform="translate(6881,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/post/412685/&amp;usg=ALkJrhgvXUsqitvdprqLO0kviPjREKl9FQ#MJMAIN-29" x="7854" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-5"> L_e (x, \, \ vec \ omega_ {o}) </script>  in unsere Richtung.  Die meisten Oberflächen tun dies nicht, daher reflektieren sie nur Licht von außen.  Deshalb wird das Integral verwendet.  Es sammelt Licht aus allen möglichen Richtungen der Hemisphäre. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-212"><span class="MJXp-mtext" id="MJXp-Span-213">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">O</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-216">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-217">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-6"> \ Omega </script>  um das Normale herum (daher berücksichtigen wir dabei die Beleuchtung, die <em>von oben</em> auf die Oberfläche fällt und nicht <em>von innen</em> , was für durchscheinende Materialien erforderlich sein kann). <br><br>  Der erste Teil ist <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-219"><span class="MJXp-msubsup" id="MJXp-Span-220"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-222" style="vertical-align: -0.4em;">r</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-7"> f_r </script>  wird als bidirektionale Reflexionsverteilungsfunktion (BRDF) bezeichnet.  Diese Funktion beschreibt visuell die Art des Materials, mit dem wir es zu tun haben: Metall oder Dielektrikum, dunkel oder hell, glänzend oder matt.  BRDF bestimmt den Anteil der Beleuchtung <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-223"><span class="MJXp-mtext" id="MJXp-Span-224">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-226">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">c</span><span class="MJXp-mtext" id="MJXp-Span-228">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-231">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">g</span><span class="MJXp-msubsup" id="MJXp-Span-233"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-235" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">i</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> \ vec \ omega_ {i} </script>  was sich in der Richtung widerspiegelt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-237"><span class="MJXp-mtext" id="MJXp-Span-238">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-239">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241">c</span><span class="MJXp-mtext" id="MJXp-Span-242">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-243">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">g</span><span class="MJXp-msubsup" id="MJXp-Span-247"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-249" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">o</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> \ vec \ omega_ {o} </script>  .  In der Praxis wird dies unter Verwendung eines Dreikomponentenvektors mit Werten von Rot, Grün und Blau im Intervall implementiert <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-251"><span class="MJXp-mo" id="MJXp-Span-252" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-253">0</span><span class="MJXp-mo" id="MJXp-Span-254" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-255">1</span><span class="MJXp-mo" id="MJXp-Span-256" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> [0,1] </script>  . <br><br>  Zweiter Teil - <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-257"><span class="MJXp-mo" id="MJXp-Span-258" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-259">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-261">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262">c</span><span class="MJXp-mtext" id="MJXp-Span-263">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-265">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-266">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-267">g</span><span class="MJXp-msubsup" id="MJXp-Span-268"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-269" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-270" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-271">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-272">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-275">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">t</span><span class="MJXp-mtext" id="MJXp-Span-277">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">n</span><span class="MJXp-mo" id="MJXp-Span-282" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-11"> (\ vec \ omega_ {i} \ cdot \ vec n) </script>  Ist das Äquivalent von <sup>1</sup> <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-285">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-286">s</span><span class="MJXp-mtext" id="MJXp-Span-287">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-289">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-291">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-292">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> cos \ theta </script>  wo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-293"><span class="MJXp-mtext" id="MJXp-Span-294">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-296">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-297">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-298">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-299">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> \ theta </script>  - Winkel zwischen einfallendem Licht und Oberflächennormale <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-300"><span class="MJXp-mtext" id="MJXp-Span-301">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-302">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-303">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-305">n</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> \ vec n </script>  .  Stellen Sie sich eine Säule paralleler Lichtstrahlen vor, die senkrecht auf die Oberfläche fallen.  Stellen Sie sich nun denselben Strahl vor, der in einem flachen Winkel auf die Oberfläche fällt.  Das Licht wird über einen größeren Bereich verteilt, aber es bedeutet auch, dass jeder Punkt dieses Bereichs dunkler aussieht.  Cosine wird benötigt, um dies zu berücksichtigen. <br><br>  Schließlich wird die Beleuchtung selbst von erhalten <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-306"><span class="MJXp-mtext" id="MJXp-Span-307">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-309">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">c</span><span class="MJXp-mtext" id="MJXp-Span-311">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-312">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-313">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-314">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315">g</span><span class="MJXp-msubsup" id="MJXp-Span-316"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-317" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-318" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319">i</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> \ vec \ omega_ {i} </script>  wird rekursiv unter Verwendung der gleichen Gleichung bestimmt.  Das heißt, die Beleuchtung am Punkt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-320"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-321">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> x </script>  Hängt vom einfallenden Licht aus allen möglichen Richtungen in der oberen Hemisphäre ab.  In jede dieser Richtungen von einem Punkt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-322"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323">x</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> x </script>  Es gibt noch einen anderen Punkt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-324"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-325">x</span><span class="MJXp-mtext" id="MJXp-Span-326">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-328">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-329">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-330">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331">e</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> x \ prime </script>  deren Helligkeit wiederum von dem Licht abhängt, das aus allen möglichen Richtungen der oberen Hemisphäre dieses Punktes fällt.  Alle Berechnungen werden wiederholt. <br><br>  Hier ist, was hier passiert: Dies ist eine unendlich rekursive Integralgleichung mit einer unendlichen Anzahl von halbkugelförmigen Integrationsbereichen.  Wir können diese Gleichung nicht direkt lösen, aber es gibt eine ziemlich einfache Lösung. <br><br><hr><br>  <sup>1</sup> Vergiss es nicht!  Wir werden oft über Kosinus sprechen und immer das Skalarprodukt im Auge behalten.  Als <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-332"><span class="MJXp-mtext" id="MJXp-Span-333">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-334">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-335">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-336">c</span><span class="MJXp-mrow" id="MJXp-Span-337"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338">a</span></span><span class="MJXp-mtext" id="MJXp-Span-339">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-340">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-341">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-342">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-343">t</span><span class="MJXp-mtext" id="MJXp-Span-344">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-345">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-347">c</span><span class="MJXp-mrow" id="MJXp-Span-348"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-349">b</span></span><span class="MJXp-mo" id="MJXp-Span-350" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-351">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-352"><span class="MJXp-mo" id="MJXp-Span-353" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-354">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-355">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-356">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-357">c</span><span class="MJXp-mrow" id="MJXp-Span-358"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-359">a</span></span><span class="MJXp-mtext" id="MJXp-Span-360">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-361"><span class="MJXp-mo" id="MJXp-Span-362" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-363">&nbsp;</span><span class="MJXp-mtext" id="MJXp-Span-364">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-365"><span class="MJXp-mo" id="MJXp-Span-366" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-367">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-369">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-370">c</span><span class="MJXp-mrow" id="MJXp-Span-371"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-372">b</span></span><span class="MJXp-mtext" id="MJXp-Span-373">&nbsp;</span><span class="MJXp-mrow" id="MJXp-Span-374"><span class="MJXp-mo" id="MJXp-Span-375" style="margin-left: 0.167em; margin-right: 0.167em;">|</span></span><span class="MJXp-mtext" id="MJXp-Span-376">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-378">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-379">s</span><span class="MJXp-mo" id="MJXp-Span-380" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-381">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-382">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-384">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-385">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-386">a</span><span class="MJXp-mo" id="MJXp-Span-387" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> \ vec {a} \ cdot \ vec {b} = \ | \ vec {a} \ | \ \ | \ vec {b} \ | \ cos (\ theta) </script>  und wir haben es mit <em>Richtungen</em> (Einheitsvektoren) zu tun, dann ist das Skalarprodukt <em>der</em> Kosinus bei den meisten Computergrafikaufgaben. <br><br><h2>  Monte Carlo kommt zur Rettung </h2><br>  Die Monte-Carlo-Integration ist eine numerische Integrationstechnik, mit der wir jedes Integral anhand einer endlichen Anzahl von Zufallsstichproben näherungsweise berechnen können.  Darüber hinaus garantiert Monte Carlo die Konvergenz zur richtigen Entscheidung - je mehr Proben wir nehmen, desto besser.  Hier ist seine verallgemeinerte Form: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-388"><span class="MJXp-msubsup" id="MJXp-Span-389"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-391" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N</font></font></span></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393"><font style="vertical-align: inherit;"> a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394"><font style="vertical-align: inherit;">p </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395"><font style="vertical-align: inherit;">p </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397"><font style="vertical-align: inherit;">o </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398"><font style="vertical-align: inherit;">x </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400"><font style="vertical-align: inherit;">f </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402"><font style="vertical-align: inherit;">ein </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403"><font style="vertical-align: inherit;">C </font></span><span class="MJXp-mrow" id="MJXp-Span-404"><span class="MJXp-mn" id="MJXp-Span-405"><font style="vertical-align: inherit;">1 </font></span></span><span class="MJXp-mrow" id="MJXp-Span-406"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407"><font style="vertical-align: inherit;">N</font></span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409"><font style="vertical-align: inherit;"> s </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410"><font style="vertical-align: inherit;">u </font></span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">m </font></span></span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-417"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418"><font style="vertical-align: inherit;">N </font></span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-413"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414"><font style="vertical-align: inherit;">n </font></span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-413"><span class="MJXp-mo" id="MJXp-Span-415"><font style="vertical-align: inherit;">= </font></span></span></span></span></span></span></span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-413"><span class="MJXp-mn" id="MJXp-Span-416"><font style="vertical-align: inherit;">0</font></span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421"><font style="vertical-align: inherit;"> f </font></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422"><font style="vertical-align: inherit;">r </font></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423"><font style="vertical-align: inherit;">a </font></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424"><font style="vertical-align: inherit;">c </font></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-425"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426"><font style="vertical-align: inherit;">f </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-425"><span class="MJXp-mo" id="MJXp-Span-427" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">( </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-425"><span class="MJXp-msubsup" id="MJXp-Span-428"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">x </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-425"><span class="MJXp-msubsup" id="MJXp-Span-428"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-430" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">n</font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-425"><span class="MJXp-mo" id="MJXp-Span-431" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> ) , </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433"><font style="vertical-align: inherit;">p </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-432"><span class="MJXp-mo" id="MJXp-Span-434" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">( </font></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-432"><span class="MJXp-msubsup" id="MJXp-Span-435"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436" style="margin-right: 0.05em;"><font style="vertical-align: inherit;">x </font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-432"><span class="MJXp-msubsup" id="MJXp-Span-435"><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-437" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;">n</font></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mrow" id="MJXp-Span-432"><span class="MJXp-mo" id="MJXp-Span-438" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"> )</font></span></span></span></font><span class="MJXp-mtext" id="MJXp-Span-392">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-393"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-394"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-395"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-396"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-398"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-399">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-401"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-403"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-404"><span class="MJXp-mn" id="MJXp-Span-405"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-406"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-407"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mtext" id="MJXp-Span-408">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-409"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-410"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-411"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-412" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-417"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-418"><font style="vertical-align: inherit;"></font></span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-413"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-414"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-415"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mn" id="MJXp-Span-416"><font style="vertical-align: inherit;"></font></span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-419"><span class="MJXp-mtext" id="MJXp-Span-420">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-421"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-422"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-423"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-425"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-427" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-428"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-430" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mo" id="MJXp-Span-431" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-434" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-msubsup" id="MJXp-Span-435"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-436" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-437" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mo" id="MJXp-Span-438" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-20"> F_N \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {\ frac {f (x_n)} {p (x_n)}} </script></p><br>  Daher das Integral der Funktion <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-439"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-440"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f </font></font></span><span class="MJXp-mo" id="MJXp-Span-441" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-442"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-444" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-445" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-21"> f (x_n) </script>  kann ungefähr berechnet werden, indem Zufallsstichproben in der Integrationsdomäne gemittelt werden.  Jede Stichprobe wird durch die Wahrscheinlichkeit ihrer Auswahl geteilt. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-446"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-448" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><span class="MJXp-msubsup" id="MJXp-Span-449"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-450" style="margin-right: 0.05em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x </font></font></span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-451" style="vertical-align: -0.4em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n</font></font></span></span><span class="MJXp-mo" id="MJXp-Span-452" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-22"> p (x_n) </script>  .  Aus diesem Grund hat die am häufigsten ausgewählte Probe mehr Gewicht als die am seltensten ausgewählte. <br><br>  Bei einheitlichen Proben in der Hemisphäre (jede Richtung hat die gleiche Wahrscheinlichkeit, ausgewählt zu werden) ist die Wahrscheinlichkeit von Proben konstant: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-453"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-454"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">p </font></font></span><span class="MJXp-mo" id="MJXp-Span-455" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">( </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457"><font style="vertical-align: inherit;">o </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458"><font style="vertical-align: inherit;">m </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459"><font style="vertical-align: inherit;">e </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460"><font style="vertical-align: inherit;">g </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mo" id="MJXp-Span-462" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;">) </font></span><span class="MJXp-mo" id="MJXp-Span-463" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;">= </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465"><font style="vertical-align: inherit;">f </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466"><font style="vertical-align: inherit;">r </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467"><font style="vertical-align: inherit;">a </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468"><font style="vertical-align: inherit;">c </font></span><span class="MJXp-mrow" id="MJXp-Span-469"><span class="MJXp-mn" id="MJXp-Span-470"><font style="vertical-align: inherit;">1 </font></span></span><span class="MJXp-mrow" id="MJXp-Span-471"><span class="MJXp-mn" id="MJXp-Span-472"><font style="vertical-align: inherit;">2 </font></span></span><span class="MJXp-mrow" id="MJXp-Span-471"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474"><font style="vertical-align: inherit;">p </font></span></span><span class="MJXp-mrow" id="MJXp-Span-471"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475"><font style="vertical-align: inherit;">i</font></span></span></font><span class="MJXp-mtext" id="MJXp-Span-456">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-458"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-459"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-460"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-461"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-462" style="margin-left: 0em; margin-right: 0em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mo" id="MJXp-Span-463" style="margin-left: 0.333em; margin-right: 0.333em;"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-464">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-465"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-466"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-468"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mrow" id="MJXp-Span-469"><span class="MJXp-mn" id="MJXp-Span-470"><font style="vertical-align: inherit;"></font></span></span><span class="MJXp-mrow" id="MJXp-Span-471"><span class="MJXp-mn" id="MJXp-Span-472"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mtext" id="MJXp-Span-473">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-474"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475"><font style="vertical-align: inherit;"></font></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-23"> p (\ omega) = \ frac {1} {2 \ pi} </script>  (weil <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-476"><span class="MJXp-mn" id="MJXp-Span-477"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 </font></font></span><font style="vertical-align: inherit;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479"><font style="vertical-align: inherit;">p </font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480"><font style="vertical-align: inherit;">i</font></span></font><span class="MJXp-mtext" id="MJXp-Span-478">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-479"><font style="vertical-align: inherit;"></font></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-480"><font style="vertical-align: inherit;"></font></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-24-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-24"> 2 \ pi </script>  Ist die Oberfläche einer einzelnen Hemisphäre).  Wenn wir das alles zusammenfügen, erhalten wir Folgendes: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-481"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-482">L</span><span class="MJXp-mo" id="MJXp-Span-483" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-484">x</span><span class="MJXp-mo" id="MJXp-Span-485" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-486" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-487">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-489">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-490">c</span><span class="MJXp-mtext" id="MJXp-Span-491">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-492">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-494">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495">g</span><span class="MJXp-msubsup" id="MJXp-Span-496"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-497" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-498" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-499">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-500" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-501">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-502">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-503">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-504">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-505">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-506">f</span><span class="MJXp-mrow" id="MJXp-Span-507"><span class="MJXp-mo" id="MJXp-Span-508" style="margin-left: 0em; margin-right: 0em;">ä</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-510">r</span><span class="MJXp-msubsup" id="MJXp-Span-511"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-512" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-513" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-514" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-515">x</span><span class="MJXp-mo" id="MJXp-Span-516" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-517" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-518">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-519">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-520">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521">c</span><span class="MJXp-mtext" id="MJXp-Span-522">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-524">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-525">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-526">g</span><span class="MJXp-msubsup" id="MJXp-Span-527"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-528" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-529" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-530">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-531" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-532" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-533">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-534">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-537">c</span><span class="MJXp-mrow" id="MJXp-Span-538"><span class="MJXp-mn" id="MJXp-Span-539">1</span></span><span class="MJXp-mrow" id="MJXp-Span-540"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541">N</span></span><span class="MJXp-mtext" id="MJXp-Span-542">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-544">u</span><span class="MJXp-msubsup" id="MJXp-Span-545"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-551"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552">N</span><span class="MJXp-mo" id="MJXp-Span-553">.</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-547"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-548">n</span><span class="MJXp-mo" id="MJXp-Span-549">=</span><span class="MJXp-mn" id="MJXp-Span-550">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-554"><span class="MJXp-mtext" id="MJXp-Span-555">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-556">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-557">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-558">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-560">r</span><span class="MJXp-mrow" id="MJXp-Span-561"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-562">G</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-563">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-564">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-565">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-566">n</span></span><span class="MJXp-mrow" id="MJXp-Span-567"><span class="MJXp-mn" id="MJXp-Span-568">2</span><span class="MJXp-mtext" id="MJXp-Span-569">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-571">i</span><span class="MJXp-mspace" id="MJXp-Span-572" style="width: 0.167em; height: 0em;"></span><span class="MJXp-msubsup" id="MJXp-Span-573"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-574" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-575" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-576" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-577">x</span><span class="MJXp-mo" id="MJXp-Span-578" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-579" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-580">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-582">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583">c</span><span class="MJXp-mtext" id="MJXp-Span-584">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-586">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-587">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-588">g</span><span class="MJXp-msubsup" id="MJXp-Span-589"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-591" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-592">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-593" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-594" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-595">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-596">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-597">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598">c</span><span class="MJXp-mtext" id="MJXp-Span-599">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-601">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-602">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-603">g</span><span class="MJXp-msubsup" id="MJXp-Span-604"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-605" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-606" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-608" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-609" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-610" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-611">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-612">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-613">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">c</span><span class="MJXp-mtext" id="MJXp-Span-615">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-616">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-618">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">g</span><span class="MJXp-msubsup" id="MJXp-Span-620"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-621" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-622" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-624">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-625">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-626">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-628">t</span><span class="MJXp-mtext" id="MJXp-Span-629">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-630">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-632">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633">n</span><span class="MJXp-mo" id="MJXp-Span-634" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mspace" id="MJXp-Span-635" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-636">L</span><span class="MJXp-mo" id="MJXp-Span-637" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638">x</span><span class="MJXp-mo" id="MJXp-Span-639" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-640" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-641">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-642">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-643">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-644">c</span><span class="MJXp-mtext" id="MJXp-Span-645">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-646">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-647">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-648">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649">g</span><span class="MJXp-msubsup" id="MJXp-Span-650"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-651" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-652" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-654" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-25"> L (x, \, \ vec \ omega_ {o}) \ ungefähr L_e (x, \, \ vec \ omega_ {o}) + \ frac {1} {N} \ sum_ {n = 0} ^ {N. } {\ color {Green} {2 \ pi \, f_r (x, \, \ vec \ omega_ {i}, \, \ vec \ omega_ {o}) \, (\ vec \ omega_ {i} \ cdot \ vec n)} \, L (x, \, \ vec \ omega_ {i})} </script></p><br>  Strahlung <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-655"><span class="MJXp-msubsup" id="MJXp-Span-656"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657" style="margin-right: 0.05em;">L</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-658" style="vertical-align: -0.4em;">e</span></span><span class="MJXp-mo" id="MJXp-Span-659" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-660">x</span><span class="MJXp-mo" id="MJXp-Span-661" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-662" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-663">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-665">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-666">c</span><span class="MJXp-mtext" id="MJXp-Span-667">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-668">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-669">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-670">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-671">g</span><span class="MJXp-msubsup" id="MJXp-Span-672"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-673" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-674" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-675">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-676" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-26"> L_e (x, \, \ vec \ omega_ {o}) </script>  Ist nur der Wert, der von unserer <code>Shade</code> Funktion zurückgegeben wird. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-677"><span class="MJXp-mtext" id="MJXp-Span-678">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-680">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-682">c</span><span class="MJXp-mrow" id="MJXp-Span-683"><span class="MJXp-mn" id="MJXp-Span-684">1</span></span><span class="MJXp-mrow" id="MJXp-Span-685"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-686">N</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-27"> \ frac {1} {N} </script>  läuft bereits in unserer <code>AddShader</code> Funktion.  Multiplikation mit <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-687"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-688">L</span><span class="MJXp-mo" id="MJXp-Span-689" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">x</span><span class="MJXp-mo" id="MJXp-Span-691" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-692" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-693">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696">c</span><span class="MJXp-mtext" id="MJXp-Span-697">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-698">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-699">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-700">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-701">g</span><span class="MJXp-msubsup" id="MJXp-Span-702"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-703" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-704" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-705">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-706" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-28"> L (x, \, \ vec \ omega_ {i}) </script>  passiert, wenn wir den Strahl reflektieren und weiter verfolgen.  Unsere Aufgabe ist es, dem grünen Teil der Gleichung Leben einzuhauchen. <br><br><h1>  Voraussetzungen </h1><br>  Bevor wir uns auf eine Reise begeben, kümmern wir uns um einige Aspekte: Sammeln von Samples, deterministische Szenen und Shader-Zufälligkeit. <br><br><h2>  Akkumulation </h2><br>  Aus irgendeinem Grund <code>OnRenderImage</code> mir Unity die HDR-Textur nicht als <code>destination</code> in <code>OnRenderImage</code> .  Das Format <code>R8G8B8A8_Typeless</code> hat bei mir funktioniert, sodass die Genauigkeit schnell zu niedrig wird, um eine große Anzahl von Samples zu akkumulieren.  Um dies zu handhaben, fügen <code>private RenderTexture _converged</code> zum <code>private RenderTexture _converged</code> C # <code>private RenderTexture _converged</code> .  Dies ist unser Puffer, der die Ergebnisse mit hoher Genauigkeit sammelt, bevor sie auf dem Bildschirm angezeigt werden.  Wir initialisieren / geben die Textur auf die gleiche Weise wie <code>_target</code> in der <code>InitRenderTexture</code> Funktion frei.  Verdoppeln Sie in der <code>Render</code> Funktion das Blitting: <br><br><pre> <code class="cs hljs">Graphics.Blit(_target, _converged, _addMaterial); Graphics.Blit(_converged, destination);</code> </pre> <br><h2>  Deterministische Szenen </h2><br>  Wenn Sie Änderungen am Rendering vornehmen, um den Effekt zu bewerten, ist es hilfreich, diese mit früheren Ergebnissen zu vergleichen.  Bisher erhalten wir mit jedem Neustart des Wiedergabemodus oder jeder Neukompilierung des Skripts eine neue zufällige Szene.  Um dies zu vermeiden, fügen Sie das <code>public int SphereSeed</code> dem <code>public int SphereSeed</code> C # <code>public int SphereSeed</code> und der folgenden Zeile am Anfang von <code>SetUpScene</code> : <br><br><pre> <code class="cs hljs">Random.InitState(SphereSeed);</code> </pre> <br>  Jetzt können wir die Seed-Szenen manuell einstellen.  Geben Sie eine beliebige Zahl ein und schalten Sie <code>RayTracingMaster</code> / wieder ein, bis Sie die richtige Szene erhalten. <br><br>  Die folgenden Parameter wurden für Beispielbilder verwendet: Sphere Seed 1223832719, Sphere Radius [5, 30], Spheres Max 10000, Sphere Placement Radius 100. <br><br><h2>  Shader Zufälligkeit </h2><br>  Bevor wir mit der stochastischen Abtastung beginnen, müssen wir dem Shader Zufälligkeit hinzufügen.  Ich werde die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kanonische Zeichenfolge verwenden, die</a> ich im Netzwerk gefunden habe und die der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einfachheit halber</a> geändert wurde: <br><br><pre> <code class="cs hljs">float2 _Pixel; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _Seed; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">rand</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> result = frac(sin(_Seed / <span class="hljs-number"><span class="hljs-number">100.0f</span></span> * dot(_Pixel, float2(<span class="hljs-number"><span class="hljs-number">12.9898f</span></span>, <span class="hljs-number"><span class="hljs-number">78.233f</span></span>))) * <span class="hljs-number"><span class="hljs-number">43758.5453f</span></span>); _Seed += <span class="hljs-number"><span class="hljs-number">1.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br>  Initialisieren Sie <code>_Pixel</code> direkt in <code>CSMain</code> als <code>_Pixel = id.xy</code> damit jedes Pixel unterschiedliche Zufallswerte verwenden kann.  <code>_Seed</code> in der Funktion <code>_Seed</code> von C # aus initialisiert. <br><br><pre> <code class="cs hljs">RayTracingShader.SetFloat(<span class="hljs-string"><span class="hljs-string">"_Seed"</span></span>, Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>);</code> </pre> <br>  Die Qualität der hier erzeugten Zufallszahlen ist instabil.  In Zukunft lohnt es sich, diese Funktion zu untersuchen und zu testen, indem der Einfluss von Parametern analysiert und mit anderen Ansätzen verglichen wird.  Aber im Moment werden wir es einfach benutzen und auf das Beste hoffen. <br><br><h1>  Probenahme auf der Hemisphäre </h1><br>  Fangen wir noch einmal an: Wir brauchen zufällige Richtungen, die gleichmäßig in der Hemisphäre verteilt sind.  Diese nicht triviale Aufgabe für den gesamten Umfang wird in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diesem Artikel von</a> Corey Simon ausführlich beschrieben.  Es ist leicht, sich an die Hemisphäre anzupassen.  So sieht der Shader-Code aus: <br><br><pre> <code class="hljs pgsql">float3 SampleHemisphere(float3 normal) { //     <span class="hljs-type"><span class="hljs-type">float</span></span> cosTheta = rand(); <span class="hljs-type"><span class="hljs-type">float</span></span> sinTheta = sqrt(max(<span class="hljs-number"><span class="hljs-number">0.0</span></span>f, <span class="hljs-number"><span class="hljs-number">1.0</span></span>f - cosTheta * cosTheta)); <span class="hljs-type"><span class="hljs-type">float</span></span> phi = <span class="hljs-number"><span class="hljs-number">2</span></span> * PI * rand(); float3 tangentSpaceDir = float3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta); //      <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mul(tangentSpaceDir, GetTangentSpace(normal)); }</code> </pre> <br>  Richtungen werden für eine auf der positiven Z-Achse zentrierte Halbkugel erzeugt, daher müssen wir sie so transformieren, dass sie auf der gewünschten Normalen zentriert sind.  Wir erzeugen eine Tangente und eine Binormale (zwei Vektoren orthogonal zur Normalen und orthogonal zueinander).  Zuerst wählen wir einen Hilfsvektor aus, um die Tangente zu erzeugen.  Dazu nehmen wir die positive X-Achse und kehren nur dann zum positiven Z zurück, wenn es normalerweise (ungefähr) mit der X-Achse ausgerichtet ist. Dann können wir das Vektorprodukt verwenden, um die Tangente und dann die Binormale zu erzeugen. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">float3x3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetTangentSpace</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">float3 normal</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//       float3 helper = float3(1, 0, 0); if (abs(normal.x) &gt; 0.99f) helper = float3(0, 0, 1); //   float3 tangent = normalize(cross(normal, helper)); float3 binormal = normalize(cross(normal, tangent)); return float3x3(tangent, binormal, normal); }</span></span></code> </pre> <br><h1>  Lambert-Streuung </h1><br>  Nachdem wir nun einheitliche zufällige Richtungen haben, können wir mit der Implementierung des ersten BRDF fortfahren.  Für die diffuse Reflexion wird am häufigsten das Lambert BRDF verwendet, das überraschend einfach ist: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-707"><span class="MJXp-msubsup" id="MJXp-Span-708"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-709" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-710" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-711" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-712">x</span><span class="MJXp-mo" id="MJXp-Span-713" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-714" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-715">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-716">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-718">c</span><span class="MJXp-mtext" id="MJXp-Span-719">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-720">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-721">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-722">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">g</span><span class="MJXp-msubsup" id="MJXp-Span-724"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-725" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-726" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-728" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-729" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-730">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-732">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-733">c</span><span class="MJXp-mtext" id="MJXp-Span-734">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-736">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-738">g</span><span class="MJXp-msubsup" id="MJXp-Span-739"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-740" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-741" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-742">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-743" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-744" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-745">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-748">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-749">c</span><span class="MJXp-mrow" id="MJXp-Span-750"><span class="MJXp-msubsup" id="MJXp-Span-751"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-752" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-753" style="vertical-align: -0.4em;">d</span></span></span><span class="MJXp-mrow" id="MJXp-Span-754"><span class="MJXp-mtext" id="MJXp-Span-755">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-29"> f_r (x, \, \ vec \ omega_ {i}, \, \ vec \ omega_ {o}) = \ frac {k_d} {\ pi} </script>  wo <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-758"><span class="MJXp-msubsup" id="MJXp-Span-759"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-760" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-761" style="vertical-align: -0.4em;">d</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-30"> k_d </script>  - Dies ist Albedo-Oberfläche.  Fügen wir es in unsere Monte-Carlo-Rendering-Gleichung ein (ich werde den Emissionsgrad noch nicht berücksichtigen) und sehen, was passiert: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-762"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-763">L</span><span class="MJXp-mo" id="MJXp-Span-764" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-765">x</span><span class="MJXp-mo" id="MJXp-Span-766" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-767" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-768">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-769">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-770">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-771">c</span><span class="MJXp-mtext" id="MJXp-Span-772">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-773">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-774">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-776">g</span><span class="MJXp-msubsup" id="MJXp-Span-777"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-778" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-779" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-780">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-781" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-782">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-783">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-784">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-785">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-787">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788">x</span><span class="MJXp-mtext" id="MJXp-Span-789">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-790">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-791">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-792">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-793">c</span><span class="MJXp-mrow" id="MJXp-Span-794"><span class="MJXp-mn" id="MJXp-Span-795">1</span></span><span class="MJXp-mrow" id="MJXp-Span-796"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-797">N</span></span><span class="MJXp-mtext" id="MJXp-Span-798">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-799">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-800">u</span><span class="MJXp-msubsup" id="MJXp-Span-801"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-802" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-807"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808">N</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-803"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-804">n</span><span class="MJXp-mo" id="MJXp-Span-805">=</span><span class="MJXp-mn" id="MJXp-Span-806">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-809"><span class="MJXp-mtext" id="MJXp-Span-810">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-811">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-812">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-813">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-814">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815">r</span><span class="MJXp-mrow" id="MJXp-Span-816"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-817">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-818">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-819">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-820">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-821">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-822">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-823">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-824">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-825">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-826">t</span></span><span class="MJXp-mrow" id="MJXp-Span-827"><span class="MJXp-mn" id="MJXp-Span-828">2</span><span class="MJXp-msubsup" id="MJXp-Span-829"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-830" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-831" style="vertical-align: -0.4em;">d</span></span></span><span class="MJXp-mspace" id="MJXp-Span-832" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-833" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-834">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-835">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-836">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-837">c</span><span class="MJXp-mtext" id="MJXp-Span-838">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-840">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-841">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-842">g</span><span class="MJXp-msubsup" id="MJXp-Span-843"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-844" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-845" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-847">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-848">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-849">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-850">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-851">t</span><span class="MJXp-mtext" id="MJXp-Span-852">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-853">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-854">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-855">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-856">n</span><span class="MJXp-mo" id="MJXp-Span-857" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-858" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-859">L</span><span class="MJXp-mo" id="MJXp-Span-860" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-861">x</span><span class="MJXp-mo" id="MJXp-Span-862" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-863" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-864">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-865">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-866">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-867">c</span><span class="MJXp-mtext" id="MJXp-Span-868">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-869">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-870">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-871">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-872">g</span><span class="MJXp-msubsup" id="MJXp-Span-873"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-874" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-875" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-876">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-877" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-31"> L (x, \, \ vec \ omega_ {o}) \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {\ color {BlueViolet} {2 k_d} \, (\ vec \ omega_ {i} \ cdot \ vec n) \, L (x, \, \ vec \ omega_ {i})} </script></p><br>  Fügen wir diese Gleichung sofort in den Shader ein.  Ersetzen Sie in der <code>Shade</code> Funktion den Code im <code>if (hit.distance &lt; 1.#INF)</code> durch die folgenden Zeilen: <br><br><pre> <code class="hljs markdown">//   ray.origin = hit.position + hit.normal <span class="hljs-bullet"><span class="hljs-bullet">* 0.001f; ray.direction = SampleHemisphere(hit.normal); ray.energy *</span></span>= 2 <span class="hljs-bullet"><span class="hljs-bullet">* hit.albedo *</span></span> sdot(hit.normal, ray.direction); return 0.0f;</code> </pre> <br>  Die neue Richtung des reflektierten Strahls wird unter Verwendung unserer Funktion homogener Halbkugelproben bestimmt.  Die Energie des Strahls wird mit dem entsprechenden Teil der oben gezeigten Gleichung multipliziert.  Da die Oberfläche keine Beleuchtung <code>AddShader</code> (sie reflektiert nur direkt oder indirekt vom Himmel empfangenes Licht), geben wir 0 zurück. Vergessen Sie hier nicht, dass <code>AddShader</code> die Proben mittelt, sodass wir uns keine Sorgen machen müssen <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-878"><span class="MJXp-mtext" id="MJXp-Span-879">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-880">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-881">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-882">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-883">c</span><span class="MJXp-mrow" id="MJXp-Span-884"><span class="MJXp-mn" id="MJXp-Span-885">1</span></span><span class="MJXp-mrow" id="MJXp-Span-886"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-887">N</span></span><span class="MJXp-mtext" id="MJXp-Span-888">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-889">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-890">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-891">m</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-32-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-32"> \ frac {1} {N} \ sum </script>  .  <code>CSMain</code> enthält bereits eine Multiplikation mit <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-892"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-893">L</span><span class="MJXp-mo" id="MJXp-Span-894" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-895">x</span><span class="MJXp-mo" id="MJXp-Span-896" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-897" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-898">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-899">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-900">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-901">c</span><span class="MJXp-mtext" id="MJXp-Span-902">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-903">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-904">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-905">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-906">g</span><span class="MJXp-msubsup" id="MJXp-Span-907"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-908" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-909" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-910">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-911" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-33-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-33"> L (x, \, \ vec \ omega_ {i}) </script>  (der nächste reflektierte Strahl), so dass wir nicht mehr viel Arbeit haben. <br><br>  <code>sdot</code> ist eine <code>sdot</code> , die ich für mich selbst definiert habe.  Es gibt einfach das Ergebnis des Skalarprodukts mit einem zusätzlichen Koeffizienten zurück und begrenzt es dann auf das Intervall <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-912"><span class="MJXp-mo" id="MJXp-Span-913" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-914">0</span><span class="MJXp-mo" id="MJXp-Span-915" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mn" id="MJXp-Span-916">1</span><span class="MJXp-mo" id="MJXp-Span-917" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-34-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-34"> [0,1] </script>  :: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sdot</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">float3 x, float3 y, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> f = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1.0f</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> saturate(dot(x, y) * f); }</code> </pre> <br>  Lassen Sie uns zusammenfassen, was unser Code bisher tut.  <code>CSMain</code> erzeugt die Primärstrahlen der Kamera und ruft <code>Shade</code> .  Beim Überqueren der Oberfläche erzeugt diese Funktion wiederum einen neuen Strahl (gleichmäßig zufällig in der Halbkugel um die Normalen) und berücksichtigt den BRDF des Materials und den Kosinus in der Energie des Strahls.  Am Schnittpunkt des Strahls mit dem Himmel nehmen wir HDRI (unsere einzige Beleuchtungsquelle) auf und geben die Beleuchtung zurück, die mit der Energie des Strahls multipliziert wird (d. H. Das Ergebnis aller vorherigen Schnittpunkte, beginnend mit der Kamera).  Dies ist eine einfache Stichprobe, die sich mit einem konvergenten Ergebnis mischt.  Infolgedessen wird die Auswirkung in jeder Probe berücksichtigt. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-918"><span class="MJXp-mtext" id="MJXp-Span-919">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-921">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-923">c</span><span class="MJXp-mrow" id="MJXp-Span-924"><span class="MJXp-mn" id="MJXp-Span-925">1</span></span><span class="MJXp-mrow" id="MJXp-Span-926"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-927">N</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-35-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-35"> \ frac {1} {N} </script>  . <br><br>  Es ist Zeit, alles in Arbeit zu überprüfen.  Da Metalle keine diffuse Reflexion haben, <code>SetUpScene</code> wir sie zunächst in der <code>SetUpScene</code> Funktion eines C # <code>Random.value</code> (rufen <code>Random.value</code> hier jedoch <code>Random.value</code> auf, um den Determinismus der Szene <code>Random.value</code> ): <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> metal = Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt; <span class="hljs-number"><span class="hljs-number">0.0f</span></span>;</code> </pre> <br>  Starten Sie den Wiedergabemodus und sehen Sie, wie das anfänglich verrauschte Bild gelöscht wird und zu einem schönen Rendering konvergiert: <br><br><h1>  Phong Spiegelbild </h1><br>  Nicht schlecht für nur ein paar Codezeilen (und einen kleinen Teil der Mathematik).  Lassen Sie uns das Bild verfeinern, indem wir Spiegelreflexionen mit Phongs BRDF hinzufügen.  Fongs ursprüngliche Formulierung hatte ihre Probleme (mangelnde Beziehungen und Energieeinsparung), aber glücklicherweise haben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">andere Menschen sie beseitigt</a> .  Das erweiterte BRDF wird unten gezeigt. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-928"><span class="MJXp-mtext" id="MJXp-Span-929">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-930">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-931">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-932">c</span><span class="MJXp-mtext" id="MJXp-Span-933">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-934">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-935">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-936">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-937">g</span><span class="MJXp-msubsup" id="MJXp-Span-938"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-939" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-940" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-941">r</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-36-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-36"> \ vec \ omega_ {r} </script>  Ist die Richtung des perfekt reflektierten Lichts und <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-942"><span class="MJXp-mtext" id="MJXp-Span-943">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-944">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-945">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-946">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-947">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-948">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-37-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-37"> \ alpha </script>  Ist ein Phong-Indikator, der die Rauheit steuert: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-949"><span class="MJXp-msubsup" id="MJXp-Span-950"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-951" style="margin-right: 0.05em;">f</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-952" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-953" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-954">x</span><span class="MJXp-mo" id="MJXp-Span-955" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-956" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-957">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-958">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-959">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-960">c</span><span class="MJXp-mtext" id="MJXp-Span-961">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-962">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-963">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-964">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-965">g</span><span class="MJXp-msubsup" id="MJXp-Span-966"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-967" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-968" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-969">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-970" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-971" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-972">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-973">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-974">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-975">c</span><span class="MJXp-mtext" id="MJXp-Span-976">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-977">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-978">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-979">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-980">g</span><span class="MJXp-msubsup" id="MJXp-Span-981"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-982" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-983" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-984">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-985" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-986" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-987"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-988" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-989" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mspace" id="MJXp-Span-990" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-991">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-992">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-993">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-994">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-995">c</span><span class="MJXp-mrow" id="MJXp-Span-996"><span class="MJXp-mtext" id="MJXp-Span-997">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-998">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-999">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1000">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1001">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1002">a</span><span class="MJXp-mo" id="MJXp-Span-1003" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1004">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1005"><span class="MJXp-mn" id="MJXp-Span-1006">2</span><span class="MJXp-mtext" id="MJXp-Span-1007">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1008">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1009">i</span></span><span class="MJXp-mspace" id="MJXp-Span-1010" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1011" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1012">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1013">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1014">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1015">c</span><span class="MJXp-mtext" id="MJXp-Span-1016">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1017">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1018">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1019">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1020">g</span><span class="MJXp-msubsup" id="MJXp-Span-1021"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1022" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1023" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1024">r</span></span></span><span class="MJXp-mtext" id="MJXp-Span-1025">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1026">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1027">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1028">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1029">t</span><span class="MJXp-mtext" id="MJXp-Span-1030">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1031">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1033">c</span><span class="MJXp-mtext" id="MJXp-Span-1034">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1035">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1036">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1037">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1038">g</span><span class="MJXp-msubsup" id="MJXp-Span-1039"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1040" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1041" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1042">o</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-1043"><span class="MJXp-mo" id="MJXp-Span-1044" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-1045" style="vertical-align: 0.5em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1046">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1047">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1048">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1049">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1050">a</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-38-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-38"> f_r (x, \, \ vec \ omega_ {i}, \, \ vec \ omega_ {o}) = k_s \, \ frac {\ alpha + 2} {2 \ pi} \, (\ vec \ omega_ { r} \ cdot \ vec \ omega_ {o}) ^ \ alpha </script></p><br>  Ein interaktives zweidimensionales <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Diagramm</a> zeigt, wie das BRDF für Phong wann aussieht <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1051"><span class="MJXp-mtext" id="MJXp-Span-1052">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1053">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1054">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1055">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1056">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1057">a</span><span class="MJXp-mo" id="MJXp-Span-1058" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1059">15</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-39-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-39"> \ alpha = 15 </script>  für einen in einem Winkel von 45 ° einfallenden Strahl.  Versuchen Sie, den Wert zu ändern. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1060"><span class="MJXp-mtext" id="MJXp-Span-1061">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1062">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1063">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1064">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1065">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1066">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-40-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-40"> \ alpha </script>  . <br><br>  Fügen Sie dies in unsere Monte-Carlo-Rendering-Gleichung ein: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1067"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1068">L</span><span class="MJXp-mo" id="MJXp-Span-1069" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1070">x</span><span class="MJXp-mo" id="MJXp-Span-1071" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1072" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1073">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1074">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1075">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1076">c</span><span class="MJXp-mtext" id="MJXp-Span-1077">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1078">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1079">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1080">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1081">g</span><span class="MJXp-msubsup" id="MJXp-Span-1082"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1083" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1084" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1085">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-1086" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-1087">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1088">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1089">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1090">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1091">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1092">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1093">x</span><span class="MJXp-mtext" id="MJXp-Span-1094">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1095">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1096">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1097">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1098">c</span><span class="MJXp-mrow" id="MJXp-Span-1099"><span class="MJXp-mn" id="MJXp-Span-1100">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1101"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1102">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1103">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1104">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1105">u</span><span class="MJXp-msubsup" id="MJXp-Span-1106"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1107" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-1112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1113">N</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-1108"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1109">n</span><span class="MJXp-mo" id="MJXp-Span-1110">=</span><span class="MJXp-mn" id="MJXp-Span-1111">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1114"><span class="MJXp-mtext" id="MJXp-Span-1115">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1116">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1117">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1118">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1119">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1120">r</span><span class="MJXp-mrow" id="MJXp-Span-1121"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1122">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1123">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1124">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1125">w</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1126">n</span></span><span class="MJXp-mrow" id="MJXp-Span-1127"><span class="MJXp-msubsup" id="MJXp-Span-1128"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1129" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1130" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mspace" id="MJXp-Span-1131" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1132" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1133">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1134">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1135">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1136">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1137">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1138">a</span><span class="MJXp-mo" id="MJXp-Span-1139" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1140">2</span><span class="MJXp-mo" id="MJXp-Span-1141" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-1142" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1143" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1144">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1145">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1146">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1147">c</span><span class="MJXp-mtext" id="MJXp-Span-1148">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1149">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1150">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1151">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1152">g</span><span class="MJXp-msubsup" id="MJXp-Span-1153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1154" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1155" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1156">r</span></span></span><span class="MJXp-mtext" id="MJXp-Span-1157">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1158">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1159">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1160">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1161">t</span><span class="MJXp-mtext" id="MJXp-Span-1162">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1163">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1164">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1165">c</span><span class="MJXp-mtext" id="MJXp-Span-1166">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1167">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1168">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1169">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1170">g</span><span class="MJXp-msubsup" id="MJXp-Span-1171"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1172" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1173" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1174">o</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-1175"><span class="MJXp-mo" id="MJXp-Span-1176" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-1177" style="vertical-align: 0.5em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1178">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1179">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1180">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1181">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1182">a</span></span><span class="MJXp-mspace" id="MJXp-Span-1183" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1184" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1185">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1186">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1187">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1188">c</span><span class="MJXp-mtext" id="MJXp-Span-1189">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1190">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1191">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1192">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1193">g</span><span class="MJXp-msubsup" id="MJXp-Span-1194"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1195" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1196" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1197">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-1198">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1199">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1200">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1201">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1202">t</span><span class="MJXp-mtext" id="MJXp-Span-1203">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1204">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1205">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1206">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1207">n</span><span class="MJXp-mo" id="MJXp-Span-1208" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-1209" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1210">L</span><span class="MJXp-mo" id="MJXp-Span-1211" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1212">x</span><span class="MJXp-mo" id="MJXp-Span-1213" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1214" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1215">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1216">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1217">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1218">c</span><span class="MJXp-mtext" id="MJXp-Span-1219">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1220">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1221">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1222">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1223">g</span><span class="MJXp-msubsup" id="MJXp-Span-1224"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1225" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1226" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1227">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-1228" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-41-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-41"> L (x, \, \ vec \ omega_ {o}) \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {\ color {brown} {k_s \, (\ alpha + 2) \, (\ vec \ omega_ {r} \ cdot \ vec \ omega_ {o}) ^ \ alpha} \, (\ vec \ omega_ {i} \ cdot \ vec n) \, L (x, \, \ vec \ omega_ {i})} </script></p><br>  Und zum Schluss fügen wir dies dem bestehenden Lambert BRDF hinzu: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1229"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1230">L</span><span class="MJXp-mo" id="MJXp-Span-1231" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1232">x</span><span class="MJXp-mo" id="MJXp-Span-1233" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1234" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1235">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1236">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1237">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1238">c</span><span class="MJXp-mtext" id="MJXp-Span-1239">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1240">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1241">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1242">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1243">g</span><span class="MJXp-msubsup" id="MJXp-Span-1244"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1245" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1246" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1247">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-1248" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-1249">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1250">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1251">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1252">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1253">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1254">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1255">x</span><span class="MJXp-mtext" id="MJXp-Span-1256">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1257">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1258">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1259">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1260">c</span><span class="MJXp-mrow" id="MJXp-Span-1261"><span class="MJXp-mn" id="MJXp-Span-1262">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1263"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1264">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1265">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1266">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1267">u</span><span class="MJXp-msubsup" id="MJXp-Span-1268"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1269" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-1274"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1275">N</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-1270"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1271">n</span><span class="MJXp-mo" id="MJXp-Span-1272">=</span><span class="MJXp-mn" id="MJXp-Span-1273">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1276"><span class="MJXp-mo" id="MJXp-Span-1277" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mtext" id="MJXp-Span-1278">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1279">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1280">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1281">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1282">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1283">r</span><span class="MJXp-mrow" id="MJXp-Span-1284"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1285">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1286">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1287">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1288">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1289">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1290">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1291">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1292">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1293">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1294">t</span></span><span class="MJXp-mrow" id="MJXp-Span-1295"><span class="MJXp-mn" id="MJXp-Span-1296">2</span><span class="MJXp-msubsup" id="MJXp-Span-1297"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1298" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1299" style="vertical-align: -0.4em;">d</span></span></span><span class="MJXp-mo" id="MJXp-Span-1300" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mtext" id="MJXp-Span-1301">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1302">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1303">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1304">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1305">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1306">r</span><span class="MJXp-mrow" id="MJXp-Span-1307"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1308">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1309">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1310">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1311">w</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1312">n</span></span><span class="MJXp-mrow" id="MJXp-Span-1313"><span class="MJXp-msubsup" id="MJXp-Span-1314"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1315" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1316" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mspace" id="MJXp-Span-1317" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1318" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1319">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1320">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1321">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1322">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1323">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1324">a</span><span class="MJXp-mo" id="MJXp-Span-1325" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1326">2</span><span class="MJXp-mo" id="MJXp-Span-1327" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-1328" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1329" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1330">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1331">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1332">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1333">c</span><span class="MJXp-mtext" id="MJXp-Span-1334">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1335">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1336">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1337">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1338">g</span><span class="MJXp-msubsup" id="MJXp-Span-1339"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1340" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1341" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1342">r</span></span></span><span class="MJXp-mtext" id="MJXp-Span-1343">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1344">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1345">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1346">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1347">t</span><span class="MJXp-mtext" id="MJXp-Span-1348">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1349">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1350">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1351">c</span><span class="MJXp-mtext" id="MJXp-Span-1352">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1353">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1354">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1355">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1356">g</span><span class="MJXp-msubsup" id="MJXp-Span-1357"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1358" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1359" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1360">o</span></span></span><span class="MJXp-msubsup" id="MJXp-Span-1361"><span class="MJXp-mo" id="MJXp-Span-1362" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-1363" style="vertical-align: 0.5em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1364">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1365">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1366">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1367">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1368">a</span></span><span class="MJXp-mo" id="MJXp-Span-1369" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mspace" id="MJXp-Span-1370" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1371" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1372">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1373">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1374">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1375">c</span><span class="MJXp-mtext" id="MJXp-Span-1376">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1377">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1378">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1379">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1380">g</span><span class="MJXp-msubsup" id="MJXp-Span-1381"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1382" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1383" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1384">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-1385">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1386">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1387">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1388">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1389">t</span><span class="MJXp-mtext" id="MJXp-Span-1390">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1391">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1392">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1393">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1394">n</span><span class="MJXp-mo" id="MJXp-Span-1395" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-1396" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1397">L</span><span class="MJXp-mo" id="MJXp-Span-1398" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1399">x</span><span class="MJXp-mo" id="MJXp-Span-1400" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1401" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1402">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1403">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1404">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1405">c</span><span class="MJXp-mtext" id="MJXp-Span-1406">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1407">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1408">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1409">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1410">g</span><span class="MJXp-msubsup" id="MJXp-Span-1411"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1412" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1413" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1414">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-1415" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-42-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-42"> L (x, \, \ vec \ omega_ {o}) \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {[\ color {BlueViolet} {2 k_d} + \ color {brown} {k_s \, (\ alpha + 2) \, (\ vec \ omega_ {r} \ cdot \ vec \ omega_ {o}) ^ \ alpha}] \, (\ vec \ omega_ {i} \ cdot \ vec n) \, L (x, \, \ vec \ omega_ {i})} </script></p><br>  Und so sehen sie im Code zusammen mit Lambert-Streuung aus: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//    ray.origin = hit.position + hit.normal * 0.001f; float3 reflected = reflect(ray.direction, hit.normal); ray.direction = SampleHemisphere(hit.normal); float3 diffuse = 2 * min(1.0f - hit.specular, hit.albedo); float alpha = 15.0f; float3 specular = hit.specular * (alpha + 2) * pow(sdot(ray.direction, reflected), alpha); ray.energy *= (diffuse + specular) * sdot(hit.normal, ray.direction); return 0.0f;</span></span></code> </pre> <br>  Beachten Sie, dass wir das Skalarprodukt durch ein etwas anderes, aber äquivalentes (reflektiertes) Produkt ersetzt haben <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1416"><span class="MJXp-mtext" id="MJXp-Span-1417">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1418">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1419">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1420">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1421">g</span><span class="MJXp-msubsup" id="MJXp-Span-1422"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1423" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1424" style="vertical-align: -0.4em;">o</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-43-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-43"> \ omega_o </script>  statt <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1425"><span class="MJXp-mtext" id="MJXp-Span-1426">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1427">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1428">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1429">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1430">g</span><span class="MJXp-msubsup" id="MJXp-Span-1431"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1432" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1433" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-44-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-44"> \ omega_i </script>  )  <code>SetUpScene</code> nun Metallmaterialien wieder in die <code>SetUpScene</code> Funktionen und überprüfen Sie, wie es funktioniert. <br><br>  Experimentieren mit verschiedenen Werten <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1434"><span class="MJXp-mtext" id="MJXp-Span-1435">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1436">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1437">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1438">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1439">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1440">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-45-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-45"> \ alpha </script>  Möglicherweise stellen Sie ein Problem fest: Selbst eine geringe Leistung erfordert viel Zeit für die Konvergenz, und bei hoher Leistung ist das Rauschen besonders auffällig.  Selbst nach ein paar Minuten Wartezeit ist das Ergebnis alles andere als ideal, was für eine so einfache Szene nicht akzeptabel ist. <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1441"><span class="MJXp-mtext" id="MJXp-Span-1442">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1443">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1444">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1445">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1446">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1447">a</span><span class="MJXp-mo" id="MJXp-Span-1448" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1449">15</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-46-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-46"> \ alpha = 15 </script>  und <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1450"><span class="MJXp-mtext" id="MJXp-Span-1451">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1452">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1453">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1454">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1455">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1456">a</span><span class="MJXp-mo" id="MJXp-Span-1457" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1458">300</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-47-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-47"> \ alpha = 300 </script>  mit 8192 Beispielen sieht das so aus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09e/966/17e/09e96617eb6f924b6b5d8e99dea941e4.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b6/689/981/1b668998123fb62dba1a3f110e2603f9.png"></div><br>  Warum ist das passiert?  Immerhin hatten wir vorher so schöne ideale Reflexionen ( <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1459"><span class="MJXp-mtext" id="MJXp-Span-1460">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1461">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1462">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1463">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1464">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1465">a</span><span class="MJXp-mo" id="MJXp-Span-1466" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-1467">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1468">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1469">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1470">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1471">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1472">y</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-48-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-48"> \ alpha = \ infty </script>  )! .. Das Problem ist, dass wir <em>homogene</em> Proben erzeugen und diese nach BRDF gewichten.  Mit hohen Phong-Werten ist der BRDF für alle klein, aber diese Richtungen kommen einer perfekten Reflexion sehr nahe, und es ist sehr unwahrscheinlich, dass wir sie anhand unserer <em>homogenen</em> Proben zufällig auswählen.  <em>Wenn</em> wir dagegen tatsächlich eine dieser Richtungen kreuzen, ist der BRDF riesig, um alle anderen kleinen Stichproben zu kompensieren.  Das Ergebnis ist eine sehr große Dispersion.  Pfade mit mehreren Spiegelreflexionen sind noch schlechter und führen zu Rauschen, das in den Bildern sichtbar ist. <br><br><h1>  Verbesserte Probenahme </h1><br>  Um unseren Pfad-Tracer praktisch zu machen, müssen wir das Paradigma ändern.  Anstatt wertvolle Proben in Bereichen zu verschwenden, in denen sie unwichtig sind (da sie einen sehr niedrigen BRDF- und / oder Kosinuswert erhalten), lassen Sie uns <em>wichtige Proben generieren</em> . <br><br>  In einem ersten Schritt werden wir unsere idealen Überlegungen zurückgeben und dann sehen, wie diese Idee verallgemeinert werden kann.  Dazu unterteilen wir die Schattierungslogik in diffuse und spiegelnde Reflexion.  Für jede Stichprobe wählen wir zufällig die eine oder andere aus (abhängig vom Verhältnis <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1473"><span class="MJXp-msubsup" id="MJXp-Span-1474"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1475" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1476" style="vertical-align: -0.4em;">d</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-49-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-49"> k_d </script>  und <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1477"><span class="MJXp-msubsup" id="MJXp-Span-1478"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1479" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1480" style="vertical-align: -0.4em;">s</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-50-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-50"> k_s </script>  )  Im Falle einer diffusen Reflexion werden wir an homogenen Proben haften, aber für das Spiegelbild werden wir den Strahl explizit in die einzig wichtige Richtung reflektieren.  Da jetzt weniger Proben für jede Art von Reflexion ausgegeben werden, müssen wir den Einfluss entsprechend erhöhen, um den gleichen Gesamtwert zu erhalten: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//       hit.albedo = min(1.0f - hit.specular, hit.albedo); float specChance = energy(hit.specular); float diffChance = energy(hit.albedo); float sum = specChance + diffChance; specChance /= sum; diffChance /= sum; //     float roulette = rand(); if (roulette &lt; specChance) { //   ray.origin = hit.position + hit.normal * 0.001f; ray.direction = reflect(ray.direction, hit.normal); ray.energy *= (1.0f / specChance) * hit.specular * sdot(hit.normal, ray.direction); } else { //   ray.origin = hit.position + hit.normal * 0.001f; ray.direction = SampleHemisphere(hit.normal); ray.energy *= (1.0f / diffChance) * 2 * hit.albedo * sdot(hit.normal, ray.direction); } return 0.0f;</span></span></code> </pre> <br>  <code>energy</code> ist eine kleine Hilfsfunktion, die Farbkanäle mittelt: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">energy</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">float3 color</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dot(color, <span class="hljs-number"><span class="hljs-number">1.0f</span></span> / <span class="hljs-number"><span class="hljs-number">3.0f</span></span>); }</code> </pre> <br>  Also haben wir einen schöneren Whited Ray Tracer aus dem vorherigen Teil erstellt, aber jetzt mit wirklich diffuser Schattierung (was weiche Schatten, Umgebungsokklusion und diffuse globale Beleuchtung impliziert): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/674/f18/ee0/674f18ee0fdf1d734ba6272771e65b86.png" alt="Bild"></div><br><h1>  Wichtigkeitsbeispiel </h1><br>  Schauen wir uns noch einmal die grundlegende Monte-Carlo-Formel an: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1481"><span class="MJXp-msubsup" id="MJXp-Span-1482"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1483" style="margin-right: 0.05em;">F</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1484" style="vertical-align: -0.4em;">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1485">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1486">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1487">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1488">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1489">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1490">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1491">x</span><span class="MJXp-mtext" id="MJXp-Span-1492">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1493">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1494">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1495">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1496">c</span><span class="MJXp-mrow" id="MJXp-Span-1497"><span class="MJXp-mn" id="MJXp-Span-1498">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1499"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1500">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1501">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1502">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1503">u</span><span class="MJXp-msubsup" id="MJXp-Span-1504"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1505" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-1510"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1511">N</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-1506"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1507">n</span><span class="MJXp-mo" id="MJXp-Span-1508">=</span><span class="MJXp-mn" id="MJXp-Span-1509">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1512"><span class="MJXp-mtext" id="MJXp-Span-1513">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1514">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1515">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1516">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1517">c</span><span class="MJXp-mrow" id="MJXp-Span-1518"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1519">f</span><span class="MJXp-mo" id="MJXp-Span-1520" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1521"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1522" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1523" style="vertical-align: -0.4em;">n</span></span><span class="MJXp-mo" id="MJXp-Span-1524" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-1525"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1526">p</span><span class="MJXp-mo" id="MJXp-Span-1527" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-1528"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1529" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1530" style="vertical-align: -0.4em;">n</span></span><span class="MJXp-mo" id="MJXp-Span-1531" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-51-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-51"> F_N \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {\ frac {f (x_n)} {p (x_n)}} </script></p><br>  Wie Sie sehen können, teilen wir den Einfluss jeder Stichprobe (Stichprobe) auf die Wahrscheinlichkeit der Auswahl dieser bestimmten Stichprobe.  Bisher haben wir homogene Hemisphärenproben verwendet, also hatten wir eine Konstante <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1532"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1533">p</span><span class="MJXp-mo" id="MJXp-Span-1534" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1535">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1536">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1537">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1538">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1539">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1540">a</span><span class="MJXp-mo" id="MJXp-Span-1541" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1542" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-1543">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1544">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1545">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1546">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1547">c</span><span class="MJXp-mrow" id="MJXp-Span-1548"><span class="MJXp-mn" id="MJXp-Span-1549">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1550"><span class="MJXp-mn" id="MJXp-Span-1551">2</span><span class="MJXp-mtext" id="MJXp-Span-1552">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1553">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1554">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-52-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-52"> p (\ omega) = \ frac {1} {2 \ pi} </script>  .  Wie wir oben gesehen haben, ist dies beispielsweise beim Phong BRDF, der in einer sehr kleinen Anzahl von Richtungen groß ist, alles andere als optimal. <br><br>  Stellen Sie sich vor, wir könnten eine Wahrscheinlichkeitsverteilung finden, die genau zur integrierbaren Funktion passt: <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1555"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1556">p</span><span class="MJXp-mo" id="MJXp-Span-1557" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1558">x</span><span class="MJXp-mo" id="MJXp-Span-1559" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1560" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1561">f</span><span class="MJXp-mo" id="MJXp-Span-1562" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1563">x</span><span class="MJXp-mo" id="MJXp-Span-1564" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-53-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-53"> p (x) = f (x) </script>  .  Dann passiert folgendes: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1565"><span class="MJXp-msubsup" id="MJXp-Span-1566"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1567" style="margin-right: 0.05em;">F</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1568" style="vertical-align: -0.4em;">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1569">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1570">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1571">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1572">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1573">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1574">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1575">x</span><span class="MJXp-mtext" id="MJXp-Span-1576">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1577">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1578">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1579">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1580">c</span><span class="MJXp-mrow" id="MJXp-Span-1581"><span class="MJXp-mn" id="MJXp-Span-1582">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1583"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1584">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1585">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1586">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1587">u</span><span class="MJXp-msubsup" id="MJXp-Span-1588"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1589" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-1594"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1595">N</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-1590"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1591">n</span><span class="MJXp-mo" id="MJXp-Span-1592">=</span><span class="MJXp-mn" id="MJXp-Span-1593">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1596"><span class="MJXp-mn" id="MJXp-Span-1597">1</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-54-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-54"> F_N \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {1} </script></p><br>  Jetzt haben wir keine Proben, die sehr wenig dazu beitragen.  Es ist weniger wahrscheinlich, dass diese Stichproben ausgewählt werden.  Dies verringert die Varianz des Ergebnisses erheblich und beschleunigt die Konvergenz des Renderings. <br><br>  In der Praxis ist es unmöglich, eine solche ideale Verteilung zu finden, da einige Teile der integrierbaren Funktion (in unserem Fall BRDF × Kosinus × einfallendes Licht) unbekannt sind (dies ist am offensichtlichsten für einfallendes Licht), aber die Verteilung der Proben nach BRDF × Kosinus oder sogar nur nach BRDF hilft uns.  Dieses Prinzip nennt man Stichproben nach Wichtigkeit. <br><br><h2>  Kosinusprobe </h2><br>  In den folgenden Schritten müssen wir unsere homogene Verteilung der Proben durch die Verteilung gemäß der Kosinusregel ersetzen.  Vergessen Sie nicht, anstatt homogene Proben mit Kosinus zu multiplizieren <em>und</em> ihren Einfluss zu <em>verringern</em> , möchten wir eine proportional <em>geringere</em> Anzahl von Proben erzeugen. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dieser Artikel von</a> Thomas Poole beschreibt, wie das geht.  Wir werden den <code>alpha</code> Parameter zu unserer <code>SampleHemisphere</code> Funktion <code>SampleHemisphere</code> .  Die Funktion bestimmt den Index der Cosinusauswahl: 0 für eine einheitliche Stichprobe, 1 für die Cosinusauswahl oder höher für höhere Phong-Werte.  Im Code sieht es so aus: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-function">float3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SampleHemisphere</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">float3 normal, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> alpha</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  ,      float cosTheta = pow(rand(), 1.0f / (alpha + 1.0f)); float sinTheta = sqrt(1.0f - cosTheta * cosTheta); float phi = 2 * PI * rand(); float3 tangentSpaceDir = float3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta); //      return mul(tangentSpaceDir, GetTangentSpace(normal)); }</span></span></code> </pre> <br>  Jetzt ist die Wahrscheinlichkeit jeder Probe gleich <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1598"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1599">p</span><span class="MJXp-mo" id="MJXp-Span-1600" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1601">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1602">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1603">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1604">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1605">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1606">a</span><span class="MJXp-mo" id="MJXp-Span-1607" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-1608" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mtext" id="MJXp-Span-1609">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1610">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1611">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1612">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1613">c</span><span class="MJXp-mrow" id="MJXp-Span-1614"><span class="MJXp-mtext" id="MJXp-Span-1615">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1616">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1617">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1618">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1619">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1620">a</span><span class="MJXp-mo" id="MJXp-Span-1621" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1622">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1623"><span class="MJXp-mn" id="MJXp-Span-1624">2</span><span class="MJXp-mtext" id="MJXp-Span-1625">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1626">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1627">i</span></span><span class="MJXp-mspace" id="MJXp-Span-1628" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1629" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1630">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1631">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1632">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1633">c</span><span class="MJXp-mtext" id="MJXp-Span-1634">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1635">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1636">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1637">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1638">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1639">a</span><span class="MJXp-mtext" id="MJXp-Span-1640">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1641">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1642">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1643">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1644">t</span><span class="MJXp-mtext" id="MJXp-Span-1645">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1646">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1647">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1648">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1649">n</span><span class="MJXp-msubsup" id="MJXp-Span-1650"><span class="MJXp-mo" id="MJXp-Span-1651" style="margin-left: 0em; margin-right: 0.05em;">)</span><span class="MJXp-mtext MJXp-script" id="MJXp-Span-1652" style="vertical-align: 0.5em;">&nbsp;</span></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1653">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1654">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1655">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1656">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1657">a</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-55-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-55"> p (\ omega) = \ frac {\ alpha + 1} {2 \ pi} \, (\ vec \ omega \ cdot \ vec n) ^ \ alpha </script>  .  Die Schönheit dieser Gleichung mag nicht sofort offensichtlich erscheinen, aber wenig später werden Sie sie verstehen. <br><br><h2>  Lambert-Probe nach Bedeutung </h2><br>  Für den Anfang werden wir das Rendering der diffusen Reflexion verfeinern.  In unserer homogenen Verteilung wird bereits die Lambert-Konstante BRDF verwendet, die wir jedoch durch Hinzufügen des Kosinus verbessern können.  Die Wahrscheinlichkeitsverteilung der Stichprobe nach Kosinus (wobei <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1658"><span class="MJXp-mtext" id="MJXp-Span-1659">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1660">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1661">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1662">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1663">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1664">a</span><span class="MJXp-mo" id="MJXp-Span-1665" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1666">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-56-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-56"> \ alpha = 1 </script>  ) ist gleich <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1667"><span class="MJXp-mtext" id="MJXp-Span-1668">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1669">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1670">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1671">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1672">c</span><span class="MJXp-mrow" id="MJXp-Span-1673"><span class="MJXp-mo" id="MJXp-Span-1674" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1675">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1676">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1677">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1678">c</span><span class="MJXp-mtext" id="MJXp-Span-1679">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1680">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1681">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1682">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1683">g</span><span class="MJXp-msubsup" id="MJXp-Span-1684"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1685" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1686" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1687">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-1688">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1689">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1690">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1691">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1692">t</span><span class="MJXp-mtext" id="MJXp-Span-1693">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1694">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1695">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1696">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1697">n</span><span class="MJXp-mo" id="MJXp-Span-1698" style="margin-left: 0em; margin-right: 0em;">)</span></span><span class="MJXp-mrow" id="MJXp-Span-1699"><span class="MJXp-mtext" id="MJXp-Span-1700">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1701">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1702">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-57-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-57"> \ frac {(\ vec \ omega_ {i} \ cdot \ vec n)} {\ pi} </script>  , was unsere Monte-Carlo-Formel für diffuse Reflexion vereinfacht: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1703"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1704">L</span><span class="MJXp-mo" id="MJXp-Span-1705" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1706">x</span><span class="MJXp-mo" id="MJXp-Span-1707" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1708" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1709">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1710">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1711">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1712">c</span><span class="MJXp-mtext" id="MJXp-Span-1713">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1714">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1715">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1716">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1717">g</span><span class="MJXp-msubsup" id="MJXp-Span-1718"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1719" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1720" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1721">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-1722" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-1723">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1724">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1725">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1726">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1727">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1728">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1729">x</span><span class="MJXp-mtext" id="MJXp-Span-1730">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1731">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1732">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1733">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1734">c</span><span class="MJXp-mrow" id="MJXp-Span-1735"><span class="MJXp-mn" id="MJXp-Span-1736">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1737"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1738">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1739">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1740">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1741">u</span><span class="MJXp-msubsup" id="MJXp-Span-1742"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1743" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-1748"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1749">N</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-1744"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1745">n</span><span class="MJXp-mo" id="MJXp-Span-1746">=</span><span class="MJXp-mn" id="MJXp-Span-1747">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1750"><span class="MJXp-mtext" id="MJXp-Span-1751">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1752">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1753">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1754">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1755">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1756">r</span><span class="MJXp-mrow" id="MJXp-Span-1757"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1758">B</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1759">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1760">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1761">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1762">V</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1763">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1764">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1765">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1766">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1767">t</span></span><span class="MJXp-mrow" id="MJXp-Span-1768"><span class="MJXp-msubsup" id="MJXp-Span-1769"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1770" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1771" style="vertical-align: -0.4em;">d</span></span></span><span class="MJXp-mspace" id="MJXp-Span-1772" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1773">L</span><span class="MJXp-mo" id="MJXp-Span-1774" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1775">x</span><span class="MJXp-mo" id="MJXp-Span-1776" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1777" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1778">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1779">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1780">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1781">c</span><span class="MJXp-mtext" id="MJXp-Span-1782">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1783">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1784">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1785">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1786">g</span><span class="MJXp-msubsup" id="MJXp-Span-1787"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1788" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1789" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1790">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-1791" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-58-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-58"> L (x, \, \ vec \ omega_ {o}) \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {\ color {BlueViolet} {k_d} \, L (x , \, \ vec \ omega_ {i})} </script></p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   ray.origin = hit.position + hit.normal * 0.001f; ray.direction = SampleHemisphere(hit.normal, 1.0f); ray.energy *= (1.0f / diffChance) * hit.albedo;</span></span></code> </pre> <br>  Dies wird unsere diffuse Schattierung etwas beschleunigen.  Kommen wir nun zum eigentlichen Thema. <br><br><h2>  Fongov-Probenahme nach Wichtigkeit </h2><br>  Für Phong BRDF ist das Verfahren ähnlich.  Diesmal haben wir das Produkt zweier Kosinusse: den Standardkosinus aus der Rendering-Gleichung (wie im Fall der diffusen Reflexion), multipliziert mit dem BRDF-Eigenkosinus.  Wir werden uns nur mit dem letzten befassen. <br><br>  Fügen wir die Wahrscheinlichkeitsverteilung aus den obigen Beispielen in die Phong-Gleichung ein.  Eine detaillierte Schlussfolgerung findet sich in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lafortune und Willems: Verwendung des modifizierten Phong-Reflexionsmodells für physikalisch basiertes Rendering (1994)</a> : <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-1792"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1793">L</span><span class="MJXp-mo" id="MJXp-Span-1794" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1795">x</span><span class="MJXp-mo" id="MJXp-Span-1796" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1797" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1798">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1799">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1800">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1801">c</span><span class="MJXp-mtext" id="MJXp-Span-1802">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1803">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1804">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1805">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1806">g</span><span class="MJXp-msubsup" id="MJXp-Span-1807"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1808" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1809" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1810">o</span></span></span><span class="MJXp-mo" id="MJXp-Span-1811" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-1812">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1813">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1814">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1815">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1816">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1817">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1818">x</span><span class="MJXp-mtext" id="MJXp-Span-1819">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1820">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1821">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1822">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1823">c</span><span class="MJXp-mrow" id="MJXp-Span-1824"><span class="MJXp-mn" id="MJXp-Span-1825">1</span></span><span class="MJXp-mrow" id="MJXp-Span-1826"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1827">N</span></span><span class="MJXp-mtext" id="MJXp-Span-1828">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1829">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1830">u</span><span class="MJXp-msubsup" id="MJXp-Span-1831"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1832" style="margin-right: 0.05em;">m</span><span class="MJXp-script-box" style="height: 1.86em; vertical-align: -0.64em;"><span class=" MJXp-script"><span><span style="margin-bottom: -0.25em;"><span class="MJXp-mrow" id="MJXp-Span-1837"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1838">N</span></span></span></span></span><span class=" MJXp-script"><span><span style="margin-top: -0.85em;"><span class="MJXp-mrow" id="MJXp-Span-1833"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1834">n</span><span class="MJXp-mo" id="MJXp-Span-1835">=</span><span class="MJXp-mn" id="MJXp-Span-1836">0</span></span></span></span></span></span></span><span class="MJXp-mrow" id="MJXp-Span-1839"><span class="MJXp-mtext" id="MJXp-Span-1840">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1841">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1842">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1843">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1844">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1845">r</span><span class="MJXp-mrow" id="MJXp-Span-1846"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1847">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1848">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1849">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1850">w</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1851">n</span></span><span class="MJXp-mrow" id="MJXp-Span-1852"><span class="MJXp-msubsup" id="MJXp-Span-1853"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1854" style="margin-right: 0.05em;">k</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-1855" style="vertical-align: -0.4em;">s</span></span><span class="MJXp-mspace" id="MJXp-Span-1856" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1857">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1858">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1859">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1860">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1861">c</span><span class="MJXp-mrow" id="MJXp-Span-1862"><span class="MJXp-mtext" id="MJXp-Span-1863">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1864">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1865">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1866">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1867">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1868">a</span><span class="MJXp-mo" id="MJXp-Span-1869" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1870">2</span></span><span class="MJXp-mrow" id="MJXp-Span-1871"><span class="MJXp-mtext" id="MJXp-Span-1872">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1873">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1874">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1875">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1876">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1877">a</span><span class="MJXp-mo" id="MJXp-Span-1878" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-1879">1</span></span></span><span class="MJXp-mspace" id="MJXp-Span-1880" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-1881" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mtext" id="MJXp-Span-1882">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1883">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1884">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1885">c</span><span class="MJXp-mtext" id="MJXp-Span-1886">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1887">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1888">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1889">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1890">g</span><span class="MJXp-msubsup" id="MJXp-Span-1891"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1892" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1893" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1894">i</span></span></span><span class="MJXp-mtext" id="MJXp-Span-1895">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1896">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1897">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1898">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1899">t</span><span class="MJXp-mtext" id="MJXp-Span-1900">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1901">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1902">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1903">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1904">n</span><span class="MJXp-mo" id="MJXp-Span-1905" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mspace" id="MJXp-Span-1906" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1907">L</span><span class="MJXp-mo" id="MJXp-Span-1908" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1909">x</span><span class="MJXp-mo" id="MJXp-Span-1910" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mspace" id="MJXp-Span-1911" style="width: 0.167em; height: 0em;"></span><span class="MJXp-mtext" id="MJXp-Span-1912">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1913">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1914">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1915">c</span><span class="MJXp-mtext" id="MJXp-Span-1916">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1917">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1918">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1919">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1920">g</span><span class="MJXp-msubsup" id="MJXp-Span-1921"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1922" style="margin-right: 0.05em;">a</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-1923" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1924">i</span></span></span><span class="MJXp-mo" id="MJXp-Span-1925" style="margin-left: 0em; margin-right: 0em;">)</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-59-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-59"> L (x, \, \ vec \ omega_ {o}) \ approx \ frac {1} {N} \ sum_ {n = 0} ^ {N} {\ color {brown} {k_s \, \ frac {\ alpha + 2} {\ alpha + 1}} \, (\ vec \ omega_ {i} \ cdot \ vec n) \, L (x, \, \ vec \ omega_ {i})} </script></p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   float alpha = 15.0f; ray.origin = hit.position + hit.normal * 0.001f; ray.direction = SampleHemisphere(reflect(ray.direction, hit.normal), alpha); float f = (alpha + 2) / (alpha + 1); ray.energy *= (1.0f / specChance) * hit.specular * sdot(hit.normal, ray.direction, f);</span></span></code> </pre> <br>  Diese Änderungen reichen aus, um Probleme mit der hohen Leistung in Phong zu beseitigen und unser Rendering in einer viel vernünftigeren Zeit zu konvergieren. <br><br><h1>  Material </h1><br>  Lassen Sie uns abschließend unsere Szenengenerierung erweitern, um sich ändernde Werte für die Glätte und das Emissionsvermögen der Kugeln zu schaffen!  <code>public Vector3 emission</code> in <code>struct Sphere</code> aus einem C # <code>public Vector3 emission</code> <code>public float smoothness</code> <code>public Vector3 emission</code> und die <code>public Vector3 emission</code> .  Da wir die Größe der Struktur geändert haben, müssen wir den Schritt beim Erstellen des Rechenpuffers ändern (4 × die Anzahl der Gleitkommazahlen, erinnerst du dich?).  <code>SetUpScene</code> Sie die <code>SetUpScene</code> Funktion Werte für Glätte und <code>SetUpScene</code> einfügen. <br><br>  <code>struct RayHit</code> im Shader beide Variablen zu <code>struct Sphere</code> und <code>struct RayHit</code> und initialisieren Sie sie dann in <code>CreateRayHit</code> .  Und schließlich legen Sie beide Werte in <code>IntersectGroundPlane</code> (fest codiert, fügen Sie alle Werte ein) und <code>IntersectSphere</code> (Abrufen von Werten aus <code>Sphere</code> ) fest. <br><br>  Ich möchte Glättungswerte auf die gleiche Weise wie im Standard-Unity-Shader verwenden, der sich von einem eher willkürlichen Fong-Exponenten unterscheidet.  Hier ist eine gute Konvertierung, die in der <code>Shade</code> Funktion verwendet werden kann: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SmoothnessToPhongAlpha</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> s</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> pow(<span class="hljs-number"><span class="hljs-number">1000.0f</span></span>, s * s); }</code> </pre> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> alpha = SmoothnessToPhongAlpha(hit.smoothness);</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa9/7f8/88a/aa97f888aba1c109fdee1d2aa333672c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9f8/874/761/9f8874761f5433acdfdaebcf08d59a2e.png"></div><br>  Die Verwendung des Emissionsvermögens erfolgt durch Rückgabe eines Werts in <code>Shade</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> hit.emission;</code> </pre> <br><h1>  Ergebnisse </h1><br>  Atme tief ein.  Entspannen Sie sich und warten Sie, bis das Bild zu einem so schönen Bild wird: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/209/d23/f12/209d23f129b3a20b6bf0f9c2e06d9633.png" alt="Bild"></div><br>  <strong>Glückwunsch!</strong>  Sie haben es geschafft, durch das Dickicht mathematischer Ausdrücke zu kommen.  Wir haben einen Pfad-Tracer implementiert, der diffuse und gespiegelte Schattierungen durchführt, die Stichproben nach Wichtigkeit kennenlernen und dieses Konzept sofort anwenden, sodass das Rendering in Minuten und nicht in Stunden oder Tagen konvergiert. <br><br>  Im Vergleich zum vorherigen Artikel war dieser Artikel ein großer Schritt in Bezug auf die Komplexität, verbesserte aber auch die Qualität des Ergebnisses erheblich.  Das Arbeiten mit mathematischen Berechnungen braucht Zeit, rechtfertigt sich jedoch, da es Ihr Verständnis für das Geschehen erheblich vertiefen kann und es Ihnen ermöglicht, den Algorithmus zu erweitern, ohne die physikalische Zuverlässigkeit zu beeinträchtigen. <br><br>  Danke fürs Lesen!  Im dritten Teil werden wir (für eine Weile) den Dschungel der Probenahme und Beschattung verlassen und in die Zivilisation zurückkehren, um die Herren Möller und Trumbor zu treffen.  Wir müssen mit ihnen über Dreiecke sprechen. <br><br>  <b>Über den Autor:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">David Curie</a> ist Entwickler von Three Eyed Games, Volkswagen Virtual Engineering Lab-Programmierer, Computergrafikforscher und Heavy-Metal-Musiker. <br><br><div style="text-align:center;"><img width="20%" height="20%" src="https://habrastorage.org/getpro/habr/post_images/def/4d6/b93/def4d6b933ae1e274ee1c8c511fc0e7b.png" alt="Bild"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de412685/">https://habr.com/ru/post/de412685/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de412675/index.html">Multisig-Verträge und -Adressen in Bitcoin und Ethereum</a></li>
<li><a href="../de412677/index.html">Rückverfolgbarkeitsmatrix</a></li>
<li><a href="../de412679/index.html">Erstellen einer Android-Anwendung zur Texterkennung in 10 Minuten. Mobile Vision CodeLab</a></li>
<li><a href="../de412681/index.html">Binäre Berechnungen für die Dezimalarithmetik</a></li>
<li><a href="../de412683/index.html">Wo und wie lernt man maschinelles Lernen?</a></li>
<li><a href="../de412687/index.html">Implementieren Sie IdM. Verfahren und technische Mittel - von Basic bis IdM</a></li>
<li><a href="../de412689/index.html">Predictive IT Analytics optimieren die verteilte Anwendungsüberwachung</a></li>
<li><a href="../de412691/index.html">5 Jahre Witz auf Facebook oder forensische Geschichte</a></li>
<li><a href="../de412693/index.html">Schreiben Sie Code, der leicht zu entfernen und zu debuggen ist</a></li>
<li><a href="../de412695/index.html">Das Gesamtbild der Unit-Tests</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>