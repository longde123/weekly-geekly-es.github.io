<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌠 🤚🏼 👼🏾 عامل الميناء و Kubernetes في بيئات تتطلب الأمان 🐭 👩🏽‍🌾 👩‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ملاحظة perev. : كتب المقال الأصلي مهندس من السويد - كريستيان عبد المسيح ، وهو مولع بالهندسة المعمارية على مستوى المؤسسات ، وأمن تكنولوجيا المعلومات ، ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>عامل الميناء و Kubernetes في بيئات تتطلب الأمان</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/440504/" style=";text-align:right;direction:rtl">  <i><b>ملاحظة</b></i>  <i><b>perev.</b></i>  <i>: كتب المقال الأصلي مهندس من السويد - كريستيان عبد المسيح ، وهو مولع بالهندسة المعمارية على مستوى المؤسسات ، وأمن تكنولوجيا المعلومات ، والحوسبة السحابية.</i>  <i>في الآونة الأخيرة ، حصل على درجة الماجستير في علوم الكمبيوتر وهو في عجلة من أمره لمشاركة عمله - أطروحة الماجستير ، أو بالأحرى ، جزء منه ، مكرس لمشاكل عزل تطبيق حاويات [وأطلق في Kubernetes].</i>  <i>بصفته "العميل" الذي تم إعداد هذا العمل البحثي له ، فإنه يتصرف على الأقل في شرطة وطنه.</i> <br><br><img src="https://habrastorage.org/webt/_8/ys/gr/_8ysgrs-atvkocc6r8jpzyzzu1g.jpeg"><br><br>  أصبحت تزامن الحاويات والحوسبة السحابية شائعة للغاية في السنوات الأخيرة.  لقد بلغ تكيفهم هذا المستوى لدرجة أن المؤسسات المالية والبنوك والقطاع العام أبدت اهتمامًا بها.  مقارنة بالشركات الأخرى ، فهي تتميز بمتطلبات واسعة في مجال أمن المعلومات وتكنولوجيا المعلومات. <a name="habracut"></a><br><br>  أحد الجوانب المهمة هو كيف يمكن استخدام الحاويات في بيئات الإنتاج وفي الوقت نفسه ، يمكن الحفاظ على فصل النظام بين التطبيقات.  نظرًا لأن مثل هذه المؤسسات تستخدم بيئات السحابة الخاصة القائمة على المحاكاة الافتراضية أعلى المعدن العاري ، فإن فقدان مثل هذه العزلة عند الترحيل إلى بيئة مع الحاويات المدبرة أمر غير مقبول.  نظرًا لهذه القيود ، تمت كتابة رسالتي ، وتعتبر الشرطة السويدية عميلًا مستهدفًا. <br><br>  القضية المحددة للدراسة التي تم بحثها في الأطروحة هي: <br><br><blockquote style=";text-align:right;direction:rtl">  كيف يتم دعم ترسيم التطبيق في Docker و Kubernetes مقارنة بالأجهزة الافتراضية التي تعمل على برنامج Hypervisor ESXi المعدني العاري؟ </blockquote><br>  هذه القضية تتطلب دراسة متأنية.  لتبدأ بشيء ما ، انظر إلى القاسم المشترك - التطبيقات. <br><br><h2 style=";text-align:right;direction:rtl">  تطبيقات الويب مربكة </h2><br>  نقاط الضعف في تطبيقات الويب - حديقة حيوانات حقيقية لمتجهات الهجوم.  يتم عرض أهم المخاطر في OWASP Top 10 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2013</a> ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2017</a> ).  تساعد هذه الموارد في تثقيف المطورين في تقليل المخاطر النموذجية.  ومع ذلك ، حتى إذا قام المطورون بكتابة تعليمات برمجية خالية من العيوب ، فإن التطبيق لا يزال عرضة للتأثر - على سبيل المثال ، من خلال تبعيات الحزمة. <br><br>  كتب David Gilbertson <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">قصة رائعة</a> عن كيفية حقن الشفرة من خلال حزمة ضارة موزعة ، على سبيل المثال ، كجزء من NPM للتطبيقات المستندة إلى Node.js.  للكشف عن الثغرات الأمنية ، يمكنك استخدام ماسحات التبعية ، ولكنها <i>تقلل من</i> المخاطر فقط ، ولكنها لا تقضي عليها تمامًا. <br><br>  حتى إذا قمت بإنشاء تطبيقات بدون تبعية تابعة لجهات خارجية ، فلا يزال من غير الواقعي الاعتقاد بأن التطبيق لن يصبح عرضة للخطر أبدًا. <br><br>  <b>بسبب هذه المخاطر ، لا يمكننا القول أن تطبيقات الويب آمنة.</b> <br><br>  بدلاً من ذلك ، التمسك باستراتيجية <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b>الدفاع</b></a> (DID) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><b>العميقة</b></a> .  دعونا نلقي نظرة على المستوى التالي: الحاويات والأجهزة الافتراضية. <br><br><h2 style=";text-align:right;direction:rtl">  حاويات مقابل الأجهزة الافتراضية - قصة العزلة </h2><br>  الحاوية هي بيئة معزولة للمستخدم - الفضاء والتي يتم تنفيذها في كثير من الأحيان باستخدام قدرات النواة.  على سبيل المثال ، يستخدم <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Docker</a> مساحات أسماء Linux ومجموعات cg والقدرات الخاصة بذلك.  وبهذا المعنى ، <b>يختلف</b> عزل حاويات Docker <b>اختلافًا كبيرًا</b> عن الأجهزة الافتراضية التي يتم تشغيلها بواسطة برامج Hypervisor من النوع 1 <i>(أي ، تعمل مباشرة على الأجهزة ؛ أجهزة مراقبة الأجهزة الفائقة العارية)</i> . <br><br>  يمكن تنفيذ التمييز بين هذه الأجهزة الافتراضية عند مستوى منخفض كما هو الحال في الأجهزة الحقيقية ، على سبيل المثال ، من خلال <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Intel VT</a> .  حاويات الإرساء ، بدورها ، تعتمد على نواة لينكس للترسيم.  من المهم جدًا مراعاة هذا الاختلاف عندما يتعلق الأمر <i>بهجمات الطبقات السفلية</i> . <br><br>  إذا كان المهاجم قادرًا على تنفيذ تعليمات برمجية في جهاز أو حاوية افتراضية ، فمن المحتمل أن يصل إلى مستوى أدنى من خلال تنفيذ <i>هجوم هروب</i> . <br><br><img src="https://habrastorage.org/webt/36/hl/_c/36hl_cjove9e7ufmr4g7f3vcq5q.png"><br>  <i>اعتمادًا على استخدام الحاويات أو الأجهزة الافتراضية على الأجهزة ، يتم تطبيق التمايز على مستويات مختلفة من البنية التحتية.</i> <br><br>  تم إثبات إمكانية حدوث مثل هذه الهجمات لبرنامج <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">VMware ESXi</a> hypervisor خلال مسابقة Pwn2Own 2017 للقراصنة ، وكذلك GeekPwn2018.  وكانت النتيجة هي زوج من <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CVEs</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CVE-2017–4902</a> ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CVE-2018–1981</a> ) والتي يمكن استخدامها في هجمات الطبقة السفلية <b>للخروج من الأجهزة</b> <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الظاهرية</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الهروب الظاهري من الماكينة</a> )</i> .  لا تضمن الأجهزة الافتراضية على خوادم الحديد الأمان المطلق ، على الرغم من أنها تستخدم التكنولوجيا للتمييز بين مستوى الحديد. <br><br>  من ناحية أخرى ، إذا نظرنا إلى متجهات الهجوم على برنامج Hypervisor المعدني مقابل Linux kernel ، فمن الواضح أن هذا الأخير له سطح هجوم أكبر بكثير - بسبب حجمه [kernel Linux] ومجموعة من إمكانياته.  يتضمن السطح الأكبر للهجوم المزيد من متجهات الهجوم المحتملة للبيئات السحابية باستخدام عزل الحاوية.  يتجلى ذلك في الاهتمام المتزايد <i>بهجمات هروب الحاويات</i> ، والتي أصبحت ممكنة بفضل عمليات استغلال kernel (على سبيل المثال ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CVE-2016–5195</a> <i>[أي</i> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">DOW</a> <i>COW - تقريبا. ترجمة.]</i> ، <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CVE-2017–1000405</a> ) <br><br>  يمكن استخدام وحدات مثل <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">SELinux</a> أو <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">AppArmor</a> لزيادة العزل <b>داخل</b> الحاوية.  لسوء الحظ ، فإن مثل هذه الآليات الأمنية في النواة لا تمنع هجمات الهروب على النواة نفسها.  سيقومون فقط بتحديد الإجراءات المحتملة للمهاجم إذا كان تجاوز الحدود غير <i>ممكن</i> .  إذا كنا نريد التعامل مع المخارج خارج الحاوية ، فإن هناك حاجة إلى آلية عزل <b>خارج</b> الحاوية أو حتى القلب.  على سبيل المثال ، رمل <i>(رمل)</i> ! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">gVisor</a> عبارة عن صندوق رمل لوقت <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">تشغيل</a> الحاوية ، تم فتح الكود الخاص به بواسطة Google ويضيف نواة إضافية بين الحاوية ونواة نظام التشغيل.  يمكن لهذا النوع من صندوق الحماية تحسين الموقف من خلال هجمات الحاويات خارج الحدود التي تحدث <i>على مستوى kernel</i> .  ومع ذلك ، فإن مآثر أساسية هي مجرد واحدة من أدوات المهاجم. <br><br>  لمعرفة كيف يمكن للهجمات الأخرى أن تؤدي إلى نتائج مماثلة ، تحتاج إلى إلقاء نظرة على صورة أكثر عمومية عن كيفية استخدام الحاويات في عصر السحابة الأصلي. <br><br><h2 style=";text-align:right;direction:rtl">  تأثير تزامن الحاوية على العزلة </h2><br>  لإدارة الحاويات التي تعمل في بيئات مع العديد من العقد ، فإنها تقدم تزامن ، والتي Kubernetes إعطاء الدور الريادي.  كما اتضح ، يمكن أن تؤثر حشرات الأوركسترا على عزل الحاوية. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">قدم</a> تيم Allclair عرضًا رائعًا في KubeCon 2018 ، حيث لاحظ بعض أسطح الهجوم.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ويذكر</a> في تقريره مثالاً ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CVE-2017-1002101</a> ) ، كيف يمكن أن تؤثر أخطاء التنسيق في العزلة - في هذه الحالة ، من خلال القدرة على تحميل مساحة على القرص خارج الحافظة.  نقاط الضعف من هذا النوع إشكالية للغاية ، لأنه  يمكن تجاوز صندوق الرمل الذي يتم فيه تغليف الحاوية. <br><br>  من خلال تقديم Kubernetes ، قمنا بتوسيع سطح الهجوم.  ويشمل النظم التي يتم استضافتها على سيد Kubernetes.  أحدهم هو خادم Kubernetes API ، حيث اكتشفوا مؤخرًا ثغرة أمنية قد تسمح بامتيازات <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مفرطة</a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CVE-2018–1002105</a> ).  نظرًا لأن سطح هجوم Kubernetes master خارج نطاق رسالتي ، فلا يتم مراعاة مشكلة عدم الحصانة هذه. <br><br>  لماذا تعتبر هجمات الهروب مهمة جدًا؟  قدمت الحاويات القدرة على تشغيل العديد من التطبيقات التي تستضيفها نفس نظام التشغيل.  لذلك كان هناك خطر يرتبط بعزل التطبيق.  إذا كان هناك تطبيق حرج للأعمال وتطبيق آخر عرضة للتأثر يعمل على نفس المضيف ، يمكن للمهاجم الوصول إلى تطبيق حرج من خلال هجوم على تطبيق ضعيف. <br><br>  اعتمادًا على نوع البيانات التي تعمل معها المنظمة ، يمكن أن يتسبب تسربها في إلحاق الضرر ليس فقط بالمنظمة نفسها ، ولكن أيضًا بالأفراد والبلد بأكمله.  كما تتذكر ، نحن نتحدث عن القطاع العام والمالية والبنوك ... - يمكن أن يؤثر التسرب بشكل خطير على حياة الناس. <br><br>  إذن هل يمكن استخدام تزامن الحاويات في مثل هذه البيئات؟  قبل الشروع في مزيد من التفكير ، يجب إجراء تقييم للمخاطر. <br><br><h2 style=";text-align:right;direction:rtl">  ما الخطر مقبول؟ </h2><br>  قبل تقديم تدابير الأمان ، من المهم التفكير في نوع المعلومات التي تحاول المنظمة حمايتها بالفعل.  يعتمد القرار بشأن ما إذا كانت هناك حاجة إلى مزيد من الخطوات لمنع هجمات الهروب المحتملة على الحاويات على البيانات التي تعمل معها المؤسسة والخدمات التي تقدمها. <br><br>  على المدى الطويل ، يعني هذا أنه من أجل تحقيق إمكانية الخروج من الحاوية على مضيف تم <i>تكوينه بشكل صحيح</i> ومحمي بواسطة صندوق الحماية للحاوية ، يجب على المهاجم: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  تنفيذ التعليمات البرمجية في الحاوية ، على سبيل المثال ، من خلال حقن الكود أو استخدام الثغرات الأمنية في كود التطبيق ؛ </li><li style=";text-align:right;direction:rtl">  استفد من ثغرة أخرى ، اليوم صفر ، أو التي لم يتم تطبيق التصحيح عليها حتى الآن للخروج من الحاوية على <i>الرغم من وجود صندوق رمل</i> . </li></ol><br>  كما قد تتخيل ، يجب على المنظمة التي لا تعتبر هذا السيناريو مقبولاً أن تعمل مع البيانات أو تقدم خدمات تتطلب الكثير من <b>السرية</b> <b>والنزاهة</b> و / أو <b>إمكانية الوصول</b> . <br><br>  نظرًا لأن الرسالة مكرسة لمثل هؤلاء العملاء فقط ، فإن فقدان عزل النظام عن طريق الخروج من الحاوية أمر غير مسموح به ، لأن  عواقبه كبيرة جدا.  ما هي الخطوات التي يمكن اتخاذها لتحسين العزلة؟  لرفع المستوى في سلم العزل ، يجب عليك أيضًا النظر في صناديق الرمل التي يتم لف نواة نظام التشغيل عليها ، أي  آلات افتراضية! <br><br>  ستعمل تقنيات المحاكاة الافتراضية التي تستخدم برامج Hypervisor المستضافة على تحسين الموقف ، لكننا نرغب في الحد من سطح الهجوم <i>بدرجة أكبر</i> .  لذلك ، دعونا نفحص برامج Hypervisor المثبتة على الحديد ونرى ما الذي سيؤدي بنا إليه. <br><br><h2 style=";text-align:right;direction:rtl">  المشرفين على الحديد </h2><br>  بحثت <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">دراسة أجرتها</a> وكالة أبحاث الدفاع السويدية السويدية مخاطر الافتراضية فيما يتعلق بالقوات المسلحة السويدية.  تحدث خاتمته عن فوائد هذه التقنيات للجيش ، حتى مع المتطلبات الأمنية الصارمة والمخاطر التي تجلبها الافتراضية. <br><br>  في هذا الصدد ، يمكننا القول أن المحاكاة الافتراضية تستخدم (إلى حد ما) في صناعة الدفاع ، لأنها تنطوي على <b>مخاطر مقبولة</b> .  نظرًا لأن الوكالات والمؤسسات العاملة في صناعة الدفاع هي واحدة من أكثر العملاء تطلبًا لأمن تكنولوجيا المعلومات ، يمكننا أيضًا القول بأن الخطر المقبول بالنسبة لهم يعني قبوله للعملاء الذين تم بحثهم في الرسالة.  وكل هذا - على الرغم من المخارج المحتملة وراء الجهاز الظاهري ، التي نوقشت أعلاه. <br><br>  إذا قررنا استخدام هذا النوع من الصندوق الرملي للحاويات ، فهناك بعض الأشياء التي يجب مراعاتها في سياق التفاصيل الخاصة بالسحابة الأصلية. <br><br><h2 style=";text-align:right;direction:rtl">  عقد الصندوق الرمل للأجهزة الافتراضية </h2><br>  الفكرة هي أن عقد نظام Kubernetes هي أجهزة افتراضية تستخدم محاكاة الأجهزة الافتراضية.  نظرًا لأن الأجهزة الافتراضية ستلعب دور الصناديق الرملية للحاويات التي تعمل في القرون ، يمكن اعتبار كل عقدة بيئة محمية بالرمل. <br><br>  ملاحظة مهمة حول صناديق الرمل هذه في سياق صناديق رمل الحاوية التي سبق ذكرها: تتيح لك هذه الطريقة وضع العديد من الحاويات في صندوق رمل واحد.  تتيح لك هذه المرونة تقليل الحمل عند مقارنتها بالحالة عندما يكون لكل حاوية صندوق رمل خاص بها.  نظرًا لأن كل صندوق رمل يجلب نظام التشغيل الخاص به ، فإننا نريد تقليل عددهم مع الحفاظ على العزلة. <br><br><img src="https://habrastorage.org/webt/wg/2t/jr/wg2tjra8xh9y_i7vlyygm7vulzy.png"><br>  <i>الأجهزة الظاهرية المثبتة على الأجهزة - العقد العنقودية - بمثابة صناديق الرمل للحاويات.</i>  <i>يتم تحديد حاويات التشغيل في أجهزة VM مختلفة بمستوى مقبول من المخاطرة.</i>  <i>ومع ذلك ، لا ينطبق هذا على الحاويات التي تعمل على نفس VM.</i> <br><br>  ومع ذلك ، نظرًا لأن Kubernetes قادر على تغيير موضع القرون لأسباب مختلفة ، والتي يمكن أن <b>تدمر فكرة صناديق الرمل المستخدمة</b> ، فسيكون من الضروري إضافة قيود على آلية مشاركة القرون.  يمكنك تحقيق المطلوب في نواح كثيرة. <br><br>  في وقت كتابة هذا التقرير ، كان Kubernetes (الإصدار 1.11) يدعم ثلاث طرق رئيسية للتحكم في تخطيط و / أو إطلاق السنفات: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">NodeSelector</a> &amp; <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">NodeAffinity</a> ؛ </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">الدهانات والتسامح</a> . </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">PodAffinity و PodAntiAffinity</a> . </li></ul><br>  تعتمد الطريقة (الطرق) التي يجب استخدامها على تطبيق المؤسسة.  ومع ذلك ، من المهم ملاحظة أن الطرق تختلف في قدرتها على تجاهل السنفات بعد دخولها مرحلة التنفيذ.  الآن فقط taints قادرة على ذلك - من خلال الإجراء <code>NoExecute</code> .  إذا لم تقم بمعالجة هذه اللحظة بأي شكل من الأشكال وتغيرت بعض الملصقات ، فقد يؤدي كل شيء إلى موقع مشترك غير مرغوب فيه. <br><br><h2 style=";text-align:right;direction:rtl">  الامتثال لمتطلبات الموقع المشترك </h2><br>  تقترح الأطروحة فكرة استخدام نظام تصنيف يوضح كيف تنعكس الحساسية في الموقع المشترك.  تتمثل الفكرة في استخدام العلاقة 1: 1 بين الحاوية والقرنة وتحديد الموقع المشترك للقرون بناءً على تصنيف التطبيقات الحاوية. <br><br>  من أجل البساطة وإعادة الاستخدام ، يتم استخدام نظام التصنيف ثلاثي الخطوات التالي: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>الفئة O</b> : التطبيق غير حساس ولا يحتوي على متطلبات العزل.  يمكن وضعها على أي عقد لا تنتمي إلى فصول أخرى. </li><li style=";text-align:right;direction:rtl">  <b>فئة PG</b> <i>(مجموعة خاصة)</i> : يشكل التطبيق ، مع مجموعة من التطبيقات الأخرى ، مجموعة خاصة تتطلب عقدة مخصصة لها.  لا يمكن استضافة التطبيق إلا على عقد فئة PG التي لها معرف مجموعة خاصة مناظرة. </li><li style=";text-align:right;direction:rtl">  <b>الفئة P</b> <i>(خاصة)</i> : يتطلب التطبيق عقدة خاصة ومنفصلة ولا يمكن وضعه إلا على عقد فارغة من فئته (P). </li></ul><br>  للوفاء بمتطلبات الموقع المشترك للعديد من التطبيقات المصنفة ، يتم استخدام مواد التشويش والتحمل ، حيث يتم تعيين فئة لكل عقدة ، و PodAffinity لتطبيق قيود إضافية على القرون مع تطبيقات الفئة P أو PG. <br><br>  يوضح هذا المثال المبسط كيف يمكن استخدام مواد التحمل والتسامح لتطبيق التحكم في الموقع المشترك: <br><br><img src="https://habrastorage.org/webt/ul/qj/ec/ulqjecbgz60kuw7upls5jyrxpik.gif"><br><br>  <i>تحتوي السنتان 2 و 3 على تطبيقات من مجموعة خاصة واحدة ، والتطبيق على السلك 1 أكثر حساسية ويتطلب عقدة مخصصة.</i> <br><br>  ومع ذلك ، ستتطلب فئتي P و PG قواعد تقارب إضافية لضمان تنفيذ طلبات الترسيم مع نمو الكتلة والتطبيقات المستضافة.  دعونا نرى كيف يمكنك تطبيق <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">هذه القواعد</a> لفئات مختلفة: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># Class P affinity: podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" namespaces: ["default"] labelSelector: matchExpressions: - key: non-existing-key operator: DoesNotExist</code> </pre> <br>  تتطلب قواعد التقارب لتطبيقات الفئة P عقدًا مخصصة.  في هذه الحالة ، لن يتم تحديد الجدول في حالة خروج البود بدون <code>non-existing-key</code> .  كل شيء سوف يعمل حتى جراب واحد لديه هذا المفتاح. <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"># Class PG affinity: podAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchLabels: class-pg-group-1: foobar podAntiAffinity: requiredDuringSchedulingIgnoredDuringExecution: - topologyKey: "kubernetes.io/hostname" labelSelector: matchExpressions: - key: class-pg-group-1 operator: DoesNotExist</code> </pre> <br>  بالنسبة للتطبيقات من فئة PG ، ستشارك قواعد التقارب في المضيفات التي لها معرف مجموعة من <code>class-pg-group-1</code> وعلى العقد التي لها حاضن بدون معرف. <br><br>  سيسمح لنا هذا النهج باستخدام نظام تصنيف لتحديد الحاويات استنادًا إلى المتطلبات ذات الصلة للتطبيق الذي تم حاوياته. <br><br>  ماذا حصلنا عليه؟ <br><br><h2 style=";text-align:right;direction:rtl">  الخاتمة </h2><br>  لقد نظرنا في طريقة لتنفيذ صناديق الرمل استنادًا إلى برنامج Hypervisor من النوع الأول (أي ، الذي تم إطلاقه على المعدن العاري) لإنشاء عقد في مجموعات Kubernetes وقدمنا ​​نظام تصنيف يحدد متطلبات تحديد التطبيقات في حاويات.  إذا قارنا هذا النهج مع الحلول الأخرى التي تم أخذها في الاعتبار ، فسيكون لها مزايا من حيث ضمان عزل النظام. <br><br>  الاستنتاج المهم هو أن استراتيجية العزل <i>تقيد انتشار</i> هجمات الهروب إلى الحاوية.  <b>بمعنى آخر ، لا يتم منع ترك الحاوية بمفردها ، ولكن يتم تخفيف آثارها.</b>  من الواضح ، إلى جانب ذلك ، تأتي صعوبات إضافية يجب مراعاتها عند إجراء مقارنات مماثلة. <br><br>  لاستخدام الطريقة المحددة في بيئة سحابية وتوفير قابلية التوسع ، سيتم فرض متطلبات إضافية على التشغيل الآلي.  على سبيل المثال ، لأتمتة إنشاء أجهزة افتراضية واستخدامها في نظام Kubernetes.  الشيء الأكثر أهمية هو تنفيذ والتحقق من التصنيف <b>الواسع</b> للتطبيقات. <br><br>  هذا جزء من رسالتي حول <b>عزل التطبيق ذي الحاوية</b> . <br><br>  لمنع احتمال قيام أحد المهاجمين بالخروج من الحاوية على عقدة لمهاجمة خدمات العقد الأخرى ، من الضروري مراعاة <i>الهجمات التي يتم نشرها عبر الشبكة</i> .  لأخذ هذه المخاطر في الاعتبار ، تقترح <b><i>أطروحتي تجزئة شبكة نظام المجموعة</i></b> ويقدم تصميمات سحابية ، إحداها <b>مزودة بجدار حماية للأجهزة</b> . <br><br>  يمكن لأولئك الذين يرغبون في الاطلاع على الوثيقة كاملة - نص الرسالة في متناول الجمهور: " <a href="">تزامن الحاويات في البيئات التي تتطلب الأمن في هيئة الشرطة السويدية</a> ". <br><br><h2 style=";text-align:right;direction:rtl">  PS من المترجم </h2><br>  اقرأ أيضًا في مدونتنا: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">مشكلة عدم الحصانة CVE-2019-5736 في runc ، مما يسمح باكتساب امتيازات الجذر على المضيف</a> " ؛ </li><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">9 أفضل الممارسات الأمنية في Kubernetes</a> " ؛ </li><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">11 طريقة (لا) تصبح ضحية لقرصنة Kubernetes</a> " ؛ </li><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">فهم RBAC في Kubernetes</a> " ؛ </li><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">OPA و SPIFFE - مشروعان جديدان في CNCF لأمان التطبيقات السحابية</a> " ؛ </li><li style=";text-align:right;direction:rtl">  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Vulnerable Docker VM - لعبة ألغاز افتراضية من Docker و pentesting</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar440504/">https://habr.com/ru/post/ar440504/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar440490/index.html">وحدة بيولوجية 1-2</a></li>
<li><a href="../ar440492/index.html">ستتخلى كوريا الجنوبية عن السيارات الكهربائية وبناء محطات طاقة نووية جديدة</a></li>
<li><a href="../ar440498/index.html">سوف تحصل شرطة موسكو على نقاط مع التعرف على الوجوه</a></li>
<li><a href="../ar440500/index.html">اولا</a></li>
<li><a href="../ar440502/index.html">كيفية إطلاق بودكاست الخاص بك ، دليل المبتدئين</a></li>
<li><a href="../ar440506/index.html">التقط المسبار المداري حول القمر التابع لناسا صورا جديدة لمحطة تشانجي - 4 الصينية - أقرب وأكثر وضوحا</a></li>
<li><a href="../ar440508/index.html">كيف تخسر هوايتك وتجعلها ناجحة على الإنترنت في الولايات المتحدة الأمريكية</a></li>
<li><a href="../ar440510/index.html">الذي يطور 400 جيجابت إيثرنت لمراكز البيانات</a></li>
<li><a href="../ar440512/index.html">الفصائل القابلة للقسمة</a></li>
<li><a href="../ar440514/index.html">من سيملأ أرض سايبورغ؟ تحدث وضع التطوير لشركة Motorika عن الوضع المستقبلي لجزيرة Russky</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>