<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëßüèª üôé üç≠ BlessRNG oder RNG pr√ºfen auf Ehrlichkeit üç• ‚úÇÔ∏è üêÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Gamedev m√ºssen Sie h√§ufig etwas an ein zuf√§lliges Haus binden: Unity hat daf√ºr einen eigenen Zufall, und System.Random existiert parallel dazu. Es ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>BlessRNG oder RNG pr√ºfen auf Ehrlichkeit</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playgendary/blog/473880/"><img src="https://habrastorage.org/webt/l7/la/vl/l7lavlbtdajd-exhq5l43oeur6i.png"><br><br>  In Gamedev m√ºssen Sie h√§ufig etwas an ein zuf√§lliges Haus binden: Unity hat daf√ºr einen eigenen Zufall, und System.Random existiert parallel dazu.  Es war einmal bei einem der Projekte, als ob beide unterschiedlich funktionieren k√∂nnten (obwohl sie eine gleichm√§√üige Verteilung haben sollten). <br><br>  Dann gingen sie nicht ins Detail - es war genug, dass der √úbergang zu System.Random alle Probleme behebte.  Jetzt haben wir uns entschlossen, genauer zu verstehen und ein wenig zu recherchieren: wie ‚Äûvoreingenommen‚Äú oder vorhersehbar RNGs sind und welche wir w√§hlen sollen.  Au√üerdem habe ich oft widerspr√ºchliche Meinungen √ºber ihre "Ehrlichkeit" geh√∂rt - versuchen wir herauszufinden, wie sich die tats√§chlichen Ergebnisse auf die angegebenen beziehen. <br><a name="habracut"></a><br><h2>  Ein kurzes Bildungsprogramm oder RNG ist eigentlich ein PRNG </h2><br>  <i>Wenn Sie bereits mit Zufallszahlengeneratoren vertraut sind, k√∂nnen Sie sofort mit dem Abschnitt "Testen" fortfahren.</i> <br><br>  Zufallszahlen (MF) sind eine Folge von Zahlen, die mit einem zuf√§lligen (chaotischen) Prozess, einer Entropiequelle, erzeugt werden.  Das hei√üt, dies ist eine solche Sequenz, deren Elemente durch kein mathematisches Gesetz verbunden sind - sie haben keinen kausalen Zusammenhang. <br><br>  Was einen Mitteltonbereich erzeugt, wird als Zufallszahlengenerator (RNG) bezeichnet.  Es scheint, dass alles elementar ist, aber wenn wir von der Theorie zur Praxis √ºbergehen, ist die Implementierung eines Softwarealgorithmus zur Erzeugung einer solchen Sequenz nicht so einfach. <br><br>  Der Grund liegt in der Abwesenheit der Zuf√§lligkeit in der modernen Unterhaltungselektronik.  Ohne sie h√∂ren Zufallszahlen auf, zuf√§llig zu sein, und ihr Generator wird zu einer gew√∂hnlichen Funktion absichtlich bestimmter Argumente.  F√ºr eine Reihe von Fachgebieten im IT-Bereich ist dies ein ernstes Problem (z. B. f√ºr die Kryptografie), f√ºr den Rest gibt es eine durchaus akzeptable L√∂sung. <br><br>  Wir m√ºssen einen Algorithmus schreiben, der zur√ºckgibt, auch wenn es sich nicht wirklich um Zufallszahlen handelt, sondern ihnen so nahe wie m√∂glich kommt - die sogenannten Pseudozufallszahlen (PSNs).  Der Algorithmus wird in diesem Fall als Pseudozufallszahlengenerator (PRNG) bezeichnet. <br><br>  Es gibt verschiedene Optionen zum Erstellen eines PRNG, aber f√ºr alle ist Folgendes relevant: <br><br><ol><li>  Die Notwendigkeit einer Vorinitialisierung. <br><br>  Dem PRNG fehlt eine Entropiequelle, daher muss vor seiner Verwendung der Ausgangszustand angegeben werden.  Es wird als Zahl (oder Vektor) angegeben und als Startwert (Startwert, zuf√§lliger Startwert) bezeichnet.  Oft wird ein Prozessortaktz√§hler oder das numerische √Ñquivalent der Systemzeit als Startwert verwendet. </li><li> Reproduzierbarkeit der Sequenz. <br><br>  Das PRNG ist vollst√§ndig deterministisch, sodass der w√§hrend der Initialisierung angegebene Startwert eindeutig die gesamte zuk√ºnftige Zahlenfolge bestimmt.  Dies bedeutet, dass ein einzelner PRSP, der mit demselben Startwert (zu unterschiedlichen Zeiten, in unterschiedlichen Programmen, auf unterschiedlichen Ger√§ten) initialisiert wurde, dieselbe Sequenz generiert. </li></ol><br>  Sie m√ºssen auch die Wahrscheinlichkeitsverteilung kennen, die das PRNG kennzeichnet - welche Zahlen es mit welcher Wahrscheinlichkeit generiert.  Meistens ist dies entweder eine Normalverteilung oder eine Gleichverteilung. <br><img src="https://habrastorage.org/webt/f7/2x/j9/f72xj9mz2s52w-ahiwp5uiuqzs0.png"><br>  <i>Normalverteilung (links) und Gleichverteilung (rechts)</i> <br><br>  Nehmen wir an, wir haben einen ehrlichen W√ºrfel mit 24 Gesichtern.  Wenn Sie es fallen lassen, betr√§gt die Wahrscheinlichkeit, dass eine Einheit herausf√§llt, 1/24 (sowie die Wahrscheinlichkeit, dass eine andere Zahl herausf√§llt).  Wenn Sie viele W√ºrfe ausf√ºhren und die Ergebnisse aufzeichnen, werden Sie feststellen, dass alle Gesichter ungef√§hr mit der gleichen H√§ufigkeit herausfallen.  Tats√§chlich kann dieser W√ºrfel als RNG mit einer gleichm√§√üigen Verteilung betrachtet werden. <br><br>  Und wenn Sie sofort 10 solcher Knochen werfen und die Gesamtpunktzahl z√§hlen?  Wird die Einheitlichkeit f√ºr sie gewahrt bleiben?  Nein.  Meistens liegt der Betrag nahe bei 125 Punkten, dh bei einem Durchschnittswert.  Und als Ergebnis - noch bevor Sie einen Wurf machen - k√∂nnen Sie das zuk√ºnftige Ergebnis grob absch√§tzen. <br><br>  Der Grund ist, dass es die gr√∂√üte Anzahl von Kombinationen gibt, um die durchschnittliche Anzahl von Punkten zu erhalten.  Je weiter davon entfernt, desto weniger Kombinationen - und dementsprechend auch die Wahrscheinlichkeit eines Verlusts.  Wenn Sie diese Daten visualisieren, √§hneln sie aus der Ferne der Form einer Glocke.  Daher kann mit einer gewissen Dehnung ein System von 10 Knochen als RNG mit einer Normalverteilung bezeichnet werden. <br><br>  Ein weiteres Beispiel, nur schon im Flugzeug - Zielschie√üen.  Der Sch√ºtze ist der RNG, der ein Zahlenpaar (x, y) generiert, das in der Grafik angezeigt wird. <br><img src="https://habrastorage.org/webt/hs/o8/t3/hso8t3u11xkoyrp2slwjo4jvpic.png"><br>  Stimmen Sie zu, dass die Option auf der linken Seite n√§her am wirklichen Leben liegt - dies ist ein RNG mit einer Normalverteilung.  Wenn Sie jedoch Sterne an einem dunklen Himmel streuen m√ºssen, ist die richtige Option, die mit Hilfe eines RNG mit gleichm√§√üiger Verteilung erzielt wird, besser.  W√§hlen Sie im Allgemeinen je nach Aufgabe einen Generator. <br><br>  Lassen Sie uns nun √ºber die Entropie der PSP-Sequenz sprechen.  Zum Beispiel gibt es eine Sequenz, die so beginnt: <br><br>  89, 93, 33, 32, 82, 21, 4, 42, 11, 8, 60, 95, 53, 30, 42, 19, 34, 35, 62, 23, 44, 38, 74, 36, 52, 18, 58, 79, 65, 45, 99, 90, 82, 20, 41, 13, 88, 76, 82, 24, 5, 54, 72, 19, 80, 2, 74, 36, 71, 9, ... <br><br>  Wie zuf√§llig sind diese Zahlen auf den ersten Blick?  Beginnen wir mit der √úberpr√ºfung der Verteilung. <br><img src="https://habrastorage.org/webt/pg/6h/nw/pg6hnwtyc2v9e8xx2-zurotlnsq.png"><br>  Es sieht fast wie eine Uniform aus, aber wenn Sie die Folge von zwei Zahlen lesen und sie als Koordinaten in der Ebene interpretieren, erhalten Sie Folgendes: <br><img src="https://habrastorage.org/webt/vd/3_/y2/vd3_y2eijwkjq47tbjsut-els-y.png"><br>  Muster sind deutlich sichtbar.  Und da die Daten in der Sequenz auf eine bestimmte Weise geordnet sind (dh sie haben eine niedrige Entropie), kann dies zu einer sehr ‚ÄûVerzerrung‚Äú f√ºhren.  Zumindest ist ein solches PRNG nicht sehr geeignet, um Koordinaten in einer Ebene zu erzeugen. <br><br>  Eine andere Sequenz: <br><br>  42, 72, 17, 0, 30, 0, 15, 9, 47, 19, 35, 86, 40, 54, 97, 42, 69, 19, 20, 88, 4, 3, 67, 27, 42, 56, 17, 14, 20, 40, 80, 97, 1, 31, 69, 13, 88, 89, 76, 9, 4, 85, 17, 88, 70, 10, 42, 98, 96, 53, ... <br><br>  Auch im Flugzeug scheint hier alles in Ordnung zu sein: <br><img src="https://habrastorage.org/webt/ou/kh/ec/oukhecshx_b1qwjmt73micdukry.png"><br>  Mal sehen in Band (wir lesen jeweils drei Zahlen): <br><img src="https://habrastorage.org/webt/ly/sy/08/lysy08ezn_tfyljmvlgjygp_xks.gif"><br>  Und wieder die Muster.  Build-Visualisierung in vier Dimensionen funktioniert nicht.  Muster k√∂nnen jedoch sowohl in dieser als auch in gro√üen Dimensionen existieren. <br><br>  In derselben Kryptographie, in der die strengsten Anforderungen an das PRNG gestellt werden, ist eine solche Situation kategorisch inakzeptabel.  Um ihre Qualit√§t zu bewerten, wurden daher spezielle Algorithmen entwickelt, auf die wir jetzt nicht eingehen werden.  Das Thema ist umfangreich und st√ºtzt sich auf einen separaten Artikel. <br><br><h2>  Testen </h2><br>  Wenn wir etwas nicht genau wissen, wie soll man dann damit arbeiten?  Lohnt es sich, die Stra√üe zu √ºberqueren, wenn Sie nicht wissen, welche Verkehrsampel es zul√§sst?  Die Folgen k√∂nnen unterschiedlich sein. <br><br>  Gleiches gilt f√ºr die ber√ºchtigte Zuf√§lligkeit in der Einheit.  Nun, wenn die Dokumentation die notwendigen Details enth√ºllt, aber die am Anfang des Artikels erw√§hnte Geschichte nur wegen des Mangels an gew√ºnschten Einzelheiten passiert ist. <br><br>  Und ohne zu wissen, wie das Tool funktioniert, k√∂nnen Sie es nicht richtig anwenden.  Im Allgemeinen ist es an der Zeit, ein Experiment zu √ºberpr√ºfen und durchzuf√ºhren, um schlie√ülich zumindest auf Kosten der Verteilung sicherzustellen. <br><br>  Die L√∂sung war einfach und effektiv - Statistiken zu sammeln, objektive Daten zu erhalten und die Ergebnisse zu betrachten. <br><br><h3>  Forschungsgegenstand </h3><br>  Es gibt verschiedene M√∂glichkeiten, in Unity Zufallszahlen zu generieren - wir haben f√ºnf getestet. <br><br><ol><li>  System.Random.Next ().  Erzeugt Ganzzahlen in einem bestimmten Wertebereich. </li><li>  System.Random.NextDouble ().  Erzeugt Zahlen mit doppelter Genauigkeit (double) im Bereich von [0;  1). </li><li>  UnityEngine.Random.Range ().  Erzeugt Zahlen mit einfacher Genauigkeit (float) in einem bestimmten Wertebereich. </li><li>  UnityEngine.Random.value.  Erzeugt Zahlen mit einfacher Genauigkeit (float) im Bereich von [0;  1). </li><li>  Unity.Mathematics.Random.NextFloat ().  Teil der neuen Unity.Mathematics-Bibliothek.  Erzeugt Zahlen mit einfacher Genauigkeit (float) in einem bestimmten Wertebereich. </li></ol><br>  Fast √ºberall in der Dokumentation wurde eine gleichm√§√üige Verteilung angegeben, mit Ausnahme von UnityEngine.Random.value (wo die Verteilung nicht angegeben ist, aber √§hnlich wie bei UnityEngine.Random.Range () wurde auch erwartet, dass sie einheitlich ist) und Unity.Mathematics.Random.NextFloat () (wo in Grundlage ist der Xorshift-Algorithmus, dh Sie m√ºssen erneut auf eine gleichm√§√üige Verteilung warten. <br><br>  Standardm√§√üig wurden die in der Dokumentation erwarteten Werte f√ºr die erwarteten Ergebnisse verwendet. <br><br><h3>  Methodik </h3><br>  Wir haben eine kleine Anwendung geschrieben, die in jeder der vorgestellten Methoden Folgen von Zufallszahlen generiert und die Ergebnisse f√ºr die weitere Verarbeitung gespeichert hat. <br><br>  Die L√§nge jeder Sequenz betr√§gt 100.000 Zahlen. <br>  Der Bereich der Zufallszahlen ist [0, 100]. <br><br>  Daten wurden von mehreren Zielplattformen gesammelt: <br><br><ul><li>  Windows <br>  - Unity v2018.3.14f1, Editor-Modus, Mono, .NET Standard 2.0 </li><li>  macOS <br>  - Unity v2018.3.14f1, Editor-Modus, Mono, .NET Standard 2.0 <br>  - Unity v5.6.4p4, Editor-Modus, Mono, .NET Standard 2.0 </li><li>  Android <br>  - Unity v2018.3.14f1, Assembly auf dem Ger√§t, Mono, .NET Standard 2.0 </li><li>  iOS <br>  - Unity v2018.3.14f1, Build to Device, il2cpp, .NET Standard 2.0 </li></ul><br><h3>  Implementierung </h3><br>  Wir haben verschiedene M√∂glichkeiten, Zufallszahlen zu generieren.  F√ºr jeden von ihnen schreiben wir eine separate Wrapper-Klasse, die Folgendes bereitstellen sollte: <br><br><ol><li>  M√∂glichkeit zum Einstellen des Wertebereichs [min / max].  Es wird √ºber den Konstruktor festgelegt. </li><li>  Methode, die den mittleren Bereich zur√ºckgibt.  Wir werden float als allgemeineren Typ w√§hlen. </li><li>  Der Name der Generierungsmethode zum Markieren der Ergebnisse.  Der Einfachheit halber geben wir den vollst√§ndigen Klassennamen + den Namen der Methode zur√ºck, mit der der Mitteltonbereich als Wert generiert wurde. </li></ol><br>  Deklarieren Sie zun√§chst eine Abstraktion, die von der IRandomGenerator-Schnittstelle dargestellt wird: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; } }</code> </pre> <br><h4>  Implementierung von System.Random.Next () </h4><br>  Mit dieser Methode k√∂nnen Sie einen Wertebereich angeben, es werden jedoch Ganzzahlen zur√ºckgegeben, und es wird ein Gleitkommawert ben√∂tigt.  Sie k√∂nnen Integer einfach als Float interpretieren oder den Wertebereich um mehrere Gr√∂√üenordnungen erweitern und diese bei jeder Generierung des Mittelt√∂ners kompensieren.  Es wird sich so etwas wie ein Festpunkt mit der angegebenen Genauigkeit herausstellen.  Wir werden diese Option verwenden, da sie n√§her am realen Float-Wert liegt. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SystemIntegerRandomGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> DefaultFactor = <span class="hljs-number"><span class="hljs-number">100000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Random _generator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _max; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _factor; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"System.Random.Next()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SystemIntegerRandomGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> factor = DefaultFactor</span></span></span><span class="hljs-function">)</span></span> { _min = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)min * factor; _max = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)max * factor; _factor = factor; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)_generator.Next(_min, _max) / _factor; } }</code> </pre> <br><h4>  Implementierung von System.Random.NextDouble () </h4><br>  Hier ein fester Wertebereich [0;  1).  Um es auf das im Konstruktor angegebene zu projizieren, verwenden wir eine einfache Arithmetik: X * (max - min) + min. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SystemDoubleRandomGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Random _generator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> _factor; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"System.Random.NextDouble()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SystemDoubleRandomGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _factor = max - min; _min = min; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(_generator.NextDouble() * _factor) + _min; } }</code> </pre> <br><h4>  Implementierung von UnityEngine.Random.Range () </h4><br>  Mit dieser Methode der statischen Klasse UnityEngine.Random k√∂nnen Sie einen Wertebereich angeben und einen mittleren Bereich vom Typ float zur√ºckgeben.  Es sind keine zus√§tzlichen Transformationen erforderlich. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UnityRandomRangeGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _max; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"UnityEngine.Random.Range()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnityRandomRangeGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _min = min; _max = max; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; Random.Range(_min, _max); } }</code> </pre> <br><h4>  Implementierung von UnityEngine.Random.value </h4><br>  Die value-Eigenschaft der statischen Klasse UnityEngine.Random gibt einen mittleren Bereich vom Typ float aus einem festen Wertebereich zur√ºck [0;  1).  Wir projizieren es auf die gleiche Weise wie bei der Implementierung von System.Random.NextDouble () auf einen bestimmten Bereich. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UnityRandomValueGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _factor; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"UnityEngine.Random.value"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnityRandomValueGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _factor = max - min; _min = min; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> * _factor) + _min; } }</code> </pre> <br><h4>  Implementierung von Unity.Mathematics.Random.NextFloat () </h4><br>  Die NextFloat () -Methode der Unity.Mathematics.Random-Klasse gibt einen mittleren Bereich vom Typ float zur√ºck und erm√∂glicht die Angabe eines Wertebereichs.  Die einzige Nuance ist, dass jede Instanz von Unity.Mathematics.Random mit einem Startwert initialisiert werden muss - auf diese Weise vermeiden wir, dass wiederholte Sequenzen generiert werden. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Unity.Mathematics; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UnityMathematicsRandomValueGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Random _generator; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _max; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"Unity.Mathematics.Random.NextFloat()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnityMathematicsRandomValueGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _min = min; _max = max; _generator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); _generator.InitState(<span class="hljs-keyword"><span class="hljs-keyword">unchecked</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">uint</span></span>)System.DateTime.Now.Ticks)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; _generator.NextFloat(_min, _max); } }</code> </pre> <br><h4>  MainController-Implementierung </h4><br>  Mehrere IRandomGenerator-Implementierungen sind bereit.  Als N√§chstes m√ºssen Sie Sequenzen generieren und den resultierenden Datensatz zur Verarbeitung speichern.  Erstellen Sie dazu eine Szene in Unity und ein kleines Skript MainController, das alle erforderlichen Arbeiten ausf√ºhrt und gleichzeitig f√ºr die Interaktion mit der Benutzeroberfl√§che verantwortlich ist. <br><br>  Wir legen die Gr√∂√üe des Datasets und den Bereich der Mittelbereichswerte fest und erhalten eine Methode, die ein Array von optimierten und gebrauchsfertigen Generatoren zur√ºckgibt. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainController</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> DefaultDatasetSize = <span class="hljs-number"><span class="hljs-number">100000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> MinValue = <span class="hljs-number"><span class="hljs-number">0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> MaxValue = <span class="hljs-number"><span class="hljs-number">100f</span></span>; ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IRandomGenerator[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRandomGenerators</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IRandomGenerator[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SystemIntegerRandomGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SystemDoubleRandomGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityRandomRangeGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityRandomValueGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityMathematicsRandomValueGenerator(MinValue, MaxValue) }; } ... } }</code> </pre> <br>  Und jetzt bilden wir einen Datensatz.  In diesem Fall wird die Datengenerierung mit der Aufzeichnung der Ergebnisse in einem Textstrom (im CSV-Format) kombiniert.  Um die Werte jedes IRandomGenerators zu speichern, wird eine separate Spalte zugewiesen, und die erste Zeile enth√§lt den Namen des Generators. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainController</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateCsvDataSet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TextWriter writer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dataSetSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IRandomGenerator[] generators</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> separator = <span class="hljs-string"><span class="hljs-string">','</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastIdx = generators.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// write header for (int j = 0; j &lt;= lastIdx; j++) { writer.Write(generators[j].Name); if (j != lastIdx) writer.Write(separator); } writer.WriteLine(); // write data for (int i = 0; i &lt;= dataSetSize; i++) { for (int j = 0; j &lt;= lastIdx; j++) { writer.Write(generators[j].Generate()); if (j != lastIdx) writer.Write(separator); } if (i != dataSetSize) writer.WriteLine(); } } ... } }</span></span></code> </pre> <br>  Es bleibt, die GenerateCsvDataSet-Methode aufzurufen und das Ergebnis in einer Datei zu speichern oder Daten sofort √ºber das Netzwerk vom Endger√§t zum empfangenden Server zu √ºbertragen. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainController</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateCsvDataSet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dataSetSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IRandomGenerator[] generators</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> writer = File.CreateText(path)) { GenerateCsvDataSet(writer, dataSetSize, generators); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateCsvDataSet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dataSetSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IRandomGenerator[] generators</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (StringWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringWriter(CultureInfo.InvariantCulture)) { GenerateCsvDataSet(writer, dataSetSize, generators); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> writer.ToString(); } } ... } }</code> </pre> <br>  Die Projektquellen befinden sich auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitLab</a> . <br><br><h2>  Ergebnisse </h2><br>  Es geschah kein Wunder.  Was sie erwartet hatten, bekamen sie - in allen F√§llen eine gleichm√§√üige Verteilung ohne einen Hinweis auf Verschw√∂rungen.  Ich sehe keinen Sinn darin, separate Grafiken auf den Plattformen anzuwenden - alle zeigen ungef√§hr die gleichen Ergebnisse. <br><br>  Die Realit√§t ist: <br><img src="https://habrastorage.org/webt/yr/cb/io/yrcbio95sz22zrzhszi1syge7o8.gif"><br><br>  Visualisierung von Sequenzen in einer Ebene aus allen f√ºnf Generierungsmethoden: <br><img src="https://habrastorage.org/webt/zk/0s/lf/zk0slfejixlez-fp2x9prd19u_c.gif"><br><br>  Und Visualisierung in 3D.  Ich werde nur das Ergebnis von System.Random.Next () belassen, um nicht den gleichen Inhalt zu erzeugen. <br><img src="https://habrastorage.org/webt/ao/pw/ud/aopwud2ll4sjvtcpj69p-v8or8s.gif"><br><br>  Die in der Einleitung erz√§hlte Geschichte √ºber die Normalverteilung von UnityEngine.Random wiederholte sich nicht: Entweder war sie anfangs fehlerhaft oder seitdem hat sich etwas an der Engine ge√§ndert.  Aber jetzt sind wir sicher. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de473880/">https://habr.com/ru/post/de473880/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de473862/index.html">Neuer Netologiekurs - Deep Learning: Maschinelles Lernen</a></li>
<li><a href="../de473864/index.html">Generierung von OpenAPI-Spezifikationen basierend auf Funktionstests</a></li>
<li><a href="../de473868/index.html">Wir schauen uns den chinesischen Chip Novatek NT78820 an</a></li>
<li><a href="../de473872/index.html">Vorbereitungsplan f√ºr das Java Developer Interview</a></li>
<li><a href="../de473874/index.html">Die Zusammenfassung der IT-Ereignisse im November (Teil 1)</a></li>
<li><a href="../de473882/index.html">Einf√ºhrung in funktionale Abh√§ngigkeiten</a></li>
<li><a href="../de473884/index.html">So entladen Sie Daten mit einer verschachtelten Struktur aus Google BigQuery am Beispiel der benutzerdefinierten Parameter von Google Analytics</a></li>
<li><a href="../de473886/index.html">Kryptografische Workstation basierend auf Public-Key-Standards. Funktionen zum Parsen und Anzeigen der ASN1-Struktur</a></li>
<li><a href="../de473888/index.html">Nachrichten aus der Welt von OpenStreetMap Nr. 483 (15.10.2019 - 21.10.2019)</a></li>
<li><a href="../de473890/index.html">Operation Calypso: Neue APT-Gruppe greift Regierungsb√ºros weltweit an</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>