<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👌🏽 💇🏾 👎🏿 Bela estrutura de componentes na nuvem do Microsoft Azure 🗻 👂🏿 😎</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="O Microsoft Azure é uma das maiores plataformas de nuvem do mundo. Mesmo apesar da minha falta de simpatia pela corporação que a criou, devo admitir q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bela estrutura de componentes na nuvem do Microsoft Azure</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422211/"> O Microsoft Azure é uma das maiores plataformas de nuvem do mundo.  Mesmo apesar da minha falta de simpatia pela corporação que a criou, devo admitir que a plataforma possui várias comodidades em comparação com seus concorrentes.  Mas não há barril de mel sem uma mosca na pomada, e essa colher no Microsoft Azure é o nome dos componentes do sistema.  Se mudar o nome de um componente na AWS com apenas dois cliques, os nomes do Azure estão fortemente vinculados aos componentes e, às vezes, é impossível alterá-los sem dançar com um pandeiro.  Portanto, é muito importante ao trabalhar com o Azure criar inicialmente a estrutura correta. <br><br><img src="https://habrastorage.org/webt/z4/vq/s_/z4vqs_yvjajdgawbz1vlyu2wyyy.png" alt="imagem"><br><a name="habracut"></a><br>  Então, vamos tentar no Microsoft Azure criar uma máquina virtual com o nome server-01 e configurações padrão.  A figura a seguir mostra claramente a bagunça que temos no final. <br><br><img src="https://habrastorage.org/webt/1o/ey/ne/1oeynexzzy9v_u33ghyjqd2gt0c.png" alt="imagem"><br><br>  Se tudo lhe convier aqui, você não poderá ler mais.  Bem, se você, como eu, gosta da ordem total na economia administrada, arrisco-me a propor um belo esquema de nomeação para componentes do Microsoft Azure, que venho usando nos últimos anos. <br><br>  Esse esquema permite trazer todo o sistema para o seguinte formato unificado: <br>  <b>{Grupo de componentes} __ {Elemento}</b> <br>  <b>{Componente} - {Número} __ {Elemento} - {Número}</b> <br><br>  Então, vamos começar ... <br><br>  <b>Adicionar um grupo de recursos</b> <br><br><pre><code class="hljs pgsql">Resource <span class="hljs-keyword"><span class="hljs-keyword">groups</span></span> &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> Resource <span class="hljs-keyword"><span class="hljs-keyword">group</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>: servers</code> </pre> <br>  <b>Crie uma rede virtual e sub-rede</b> <br><br>  Por padrão, o Microsoft Azure expande a sub-rede por toda a rede virtual.  Isso não é muito conveniente, pois, se necessário, será muito difícil adicionar novas sub-redes (por exemplo, uma sub-rede VPN).  Portanto, geralmente dou os dois últimos octetos (máscara 16) para a rede virtual e para a sub-rede - o último octeto (máscara 24). <br><br><pre> <code class="hljs delphi"><span class="hljs-keyword"><span class="hljs-keyword">Virtual</span></span> networks &gt;&gt; +Add <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: servers__network Address space: <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> Subnet: <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Address range: <span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.0</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span> Network interfaces: +Add <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>: server-<span class="hljs-number"><span class="hljs-number">01</span></span>__ip-<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>-<span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Virtual</span></span> network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Private</span></span> IP address: <span class="hljs-keyword"><span class="hljs-keyword">Static</span></span>/<span class="hljs-number"><span class="hljs-number">10.0</span></span>.<span class="hljs-number"><span class="hljs-number">0.101</span></span></code> </pre> <br>  Os primeiros endereços da sub-rede (10.0.0.01 ... 03) são usados ​​pelo Azure para atender às suas necessidades, então mudei os endereços de trabalho para um intervalo acima de 100. Portanto, o número do servidor corresponderá ao último dígito do endereço IP: server-01 = 10.0.0.101, servidor-02 = 10.0.0.102, servidor-43 = 10.0.0.143, etc. <br><br>  <b>Endereço externo e grupo de segurança</b> <br><br>  Se for planejado que a máquina virtual olhe para fora, crie um endereço público e um grupo de segurança. <br><br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP addresses: +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-<span class="hljs-built_in"><span class="hljs-built_in">public</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> IP address assignment: Static <span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP addresses &gt;&gt;  <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-<span class="hljs-built_in"><span class="hljs-built_in">public</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; Associate: Resource <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> &gt;&gt; Network interface: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-private<span class="hljs-number"><span class="hljs-number">-01</span></span></code> </pre> <br>  No Azure, um grupo de segurança pode ser criado para uma única máquina e a sub-rede como um todo.  Dependendo da variante, os nomes variam. <br><br><pre> <code class="hljs pgsql">Network <span class="hljs-keyword"><span class="hljs-keyword">security</span></span> <span class="hljs-keyword"><span class="hljs-keyword">groups</span></span> &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span></code> </pre> <br>  Opção de grupo de segurança para um único host: <br><br><pre> <code class="hljs powershell"> Name: server<span class="hljs-literal"><span class="hljs-literal">-01__security</span></span><span class="hljs-literal"><span class="hljs-literal">-group</span></span> Network interfaces &gt;&gt; +Associate: server<span class="hljs-literal"><span class="hljs-literal">-01__ip</span></span><span class="hljs-literal"><span class="hljs-literal">-private</span></span><span class="hljs-literal"><span class="hljs-literal">-01</span></span></code> </pre> <br>  Grupo de segurança para sub-rede: <br><br><pre> <code class="hljs pgsql"> <span class="hljs-type"><span class="hljs-type">Name</span></span>: servers__network-<span class="hljs-keyword"><span class="hljs-keyword">security</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">group</span></span> Subnets &gt;&gt; +Associate: Virtual network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span></code> </pre> <br>  <b>Drive</b> <br><br>  Infelizmente, o Azure não permite que você crie discos com nomes arbitrários; portanto, você precisará executar uma solução alternativa através da criação de uma máquina virtual fictícia e, em seguida, usar seu disco como um espaço em branco para criar uma máquina em funcionamento. <br><br>  <b>Crie uma máquina virtual fictícia</b> <br><br><pre> <code class="hljs pgsql">Virtual machines &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> Basics: <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>-raw VM disk <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: Premium SSD Username: your-<span class="hljs-type"><span class="hljs-type">name</span></span> SSH <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> key: your-<span class="hljs-built_in"><span class="hljs-built_in">public</span></span>-key Settings: Availability <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> Network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP address: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports: <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports Monitoring: Disabled</code> </pre> <br>  Após criar uma máquina fictícia, você pode remover todos os componentes (incluindo a própria máquina) marcados com o sufixo bruto, exceto o disco. <br><br>  <b>Removemos um instantâneo de um disco</b> <br><br><pre> <code class="hljs powershell">Disks &gt;&gt;  disk server<span class="hljs-literal"><span class="hljs-literal">-01</span></span><span class="hljs-literal"><span class="hljs-literal">-raw_OsDisk_</span></span>... &gt;&gt; +Create snapshot Name: server<span class="hljs-literal"><span class="hljs-literal">-01</span></span><span class="hljs-literal"><span class="hljs-literal">-raw</span></span><span class="hljs-literal"><span class="hljs-literal">-snapshot</span></span></code> </pre> <br>  Com base no instantâneo, crie um novo disco de trabalho: <br><br><pre> <code class="hljs pgsql">Disks &gt;&gt; +<span class="hljs-keyword"><span class="hljs-keyword">Add</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__disk<span class="hljs-number"><span class="hljs-number">-01</span></span> Source <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Snapshot</span></span> Source <span class="hljs-keyword"><span class="hljs-keyword">snapshot</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>-raw-<span class="hljs-keyword"><span class="hljs-keyword">snapshot</span></span></code> </pre> <br>  <b>Implementamos a máquina de trabalho com base em um novo disco</b> <br><br><pre> <code class="hljs pgsql">Disks &gt;&gt;  <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__disk<span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; + <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> VM Basics: <span class="hljs-type"><span class="hljs-type">Name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> Settings: Availability <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> Network: servers__network Subnet: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Public</span></span> IP address: <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Select</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports: <span class="hljs-keyword"><span class="hljs-keyword">No</span></span> <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> inbound ports Monitoring: Disabled</code> </pre> <br>  <b>Interfaces de rede</b> <br><br>  Outra omissão da Microsoft - ao criar uma máquina virtual a partir de um disco na GUI, não há como conectar a interface de rede criada anteriormente a ela.  Portanto, paramos a máquina, excluímos a interface de rede e anexamos a que criamos acima a ela. <br><br><pre> <code class="hljs vbscript">Virtual machines &gt;&gt;  VM <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">Stop</span></span> Virtual machines &gt;&gt;  VM <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> &gt;&gt; Networking: Attach network interface &gt;&gt; <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span>__ip-<span class="hljs-keyword"><span class="hljs-keyword">private</span></span><span class="hljs-number"><span class="hljs-number">-01</span></span> Detach network interface &gt;&gt; <span class="hljs-built_in"><span class="hljs-built_in">server</span></span><span class="hljs-number"><span class="hljs-number">-01982</span></span></code> </pre> <br>  <b>Triturador de lixo</b> <br><br>  O toque final é a remoção de detritos que sobraram das manipulações que fizemos. <br><br>  Excluir: <br><br>  interface de rede server-01982, <br>  grupo de segurança server-01-nsg, <br>  dirigir de uma máquina fictícia: server-01-raw_OsDisk ... <br>  snapshot server-01-raw-snapshot <br><br>  Aqui está o resultado: <br><br><img src="https://habrastorage.org/webt/qa/au/bk/qaaubkmvk11pebmibguxh6mgtea.png" alt="imagem"><br><br><h2>  CLI </h2><br>  Você provavelmente já percebeu que trazer beleza ao Azure é uma tarefa bastante problemática.  Mas tudo é bastante simplificado se você usar a linha de comando (CLI).  O Microsoft Azure fornece a CLI para seu console nativo do PowerShell e Linux.  A última opção será descrita abaixo. <br><br>  Login: <br><br><pre> <code class="bash hljs">az login -u AzureUserName</code> </pre> <br>  Obtenha uma lista dos locais disponíveis <br><br><pre> <code class="bash hljs">az account list-locations</code> </pre> <br>  Obtenha uma lista de tamanhos de máquinas virtuais: <br><br><pre> <code class="bash hljs">az vm list-sizes --location locationName</code> </pre> <br>  Definimos a lista de parâmetros de rede e máquina virtual (em todos os comandos subseqüentes, esses dados serão transmitidos por meio de variáveis): <br><br><pre> <code class="bash hljs">location=<span class="hljs-string"><span class="hljs-string">"westindia"</span></span> resource_group=<span class="hljs-string"><span class="hljs-string">"servers"</span></span> virt_network=<span class="hljs-string"><span class="hljs-string">"servers__network"</span></span> virt_network_range=<span class="hljs-string"><span class="hljs-string">"10.0.0.0/16"</span></span> subnet=<span class="hljs-string"><span class="hljs-string">"default"</span></span> subnet_range=<span class="hljs-string"><span class="hljs-string">"10.0.0.0/24"</span></span> user=<span class="hljs-string"><span class="hljs-string">"username"</span></span> ssh_key=<span class="hljs-string"><span class="hljs-string">"ssh-public-key"</span></span> name=<span class="hljs-string"><span class="hljs-string">"server-01"</span></span> image=<span class="hljs-string"><span class="hljs-string">"UbuntuLTS"</span></span> ip=<span class="hljs-string"><span class="hljs-string">"10.0.0.101"</span></span> interface_suffix=<span class="hljs-string"><span class="hljs-string">"__ip-private-01"</span></span> disk_suffix=<span class="hljs-string"><span class="hljs-string">"__disk-01"</span></span> size=<span class="hljs-string"><span class="hljs-string">"Standard_B1s"</span></span> <span class="hljs-comment"><span class="hljs-comment">### SSD = "Premium_LRS"; HDD = "Standard_LRS" storage_type="Premium_LRS"</span></span></code> </pre> <br>  Crie um grupo de recursos: <br><br><pre> <code class="bash hljs">az group create --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span></code> </pre> <br>  Crie uma rede virtual e sub-rede: <br><br><pre> <code class="bash hljs">az network vnet create --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${virt_network}</span></span> --address-prefixes <span class="hljs-variable"><span class="hljs-variable">${virt_network_range}</span></span></code> </pre> <br><pre> <code class="bash hljs">az network vnet subnet create --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --vnet-name <span class="hljs-variable"><span class="hljs-variable">${virt_network}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${subnet}</span></span> --address-prefix <span class="hljs-variable"><span class="hljs-variable">${subnet_range}</span></span></code> </pre> <br>  Crie uma interface de rede: <br><br><pre> <code class="bash hljs">az network nic create --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${interface_suffix}</span></span> --subnet <span class="hljs-variable"><span class="hljs-variable">${subnet}</span></span> --vnet-name <span class="hljs-variable"><span class="hljs-variable">${virt_network}</span></span> --private-ip-address <span class="hljs-variable"><span class="hljs-variable">${ip}</span></span></code> </pre> <br>  Crie uma máquina virtual fictícia: <br><br><pre> <code class="bash hljs">az vm create --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --admin-username <span class="hljs-variable"><span class="hljs-variable">${user}</span></span> --ssh-key-value <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${ssh_key}</span></span></span><span class="hljs-string">"</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --image <span class="hljs-variable"><span class="hljs-variable">${image}</span></span> --size <span class="hljs-variable"><span class="hljs-variable">${size}</span></span> --nics <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${interface_suffix}</span></span> --storage-sku <span class="hljs-variable"><span class="hljs-variable">${storage_type}</span></span></code> </pre> <br>  Normalize o disco: <br><br><pre> <code class="bash hljs">az vm stop --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> disk_old=$(az vm get-instance-view --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> | grep -o <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">${name}</span></span></span><span class="hljs-string">_OsDisk[0-9a-z\_]\{1,\}"</span></span> | head -1) az disk create --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${disk_suffix}</span></span> --<span class="hljs-built_in"><span class="hljs-built_in">source</span></span> <span class="hljs-variable"><span class="hljs-variable">${disk_old}</span></span> --sku <span class="hljs-variable"><span class="hljs-variable">${storage_type}</span></span></code> </pre> <br>  Removemos a máquina fictícia e implantamos a que está funcionando: <br><br><pre> <code class="bash hljs">az vm delete --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --yes az vm create --name <span class="hljs-variable"><span class="hljs-variable">${name}</span></span> --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --location <span class="hljs-variable"><span class="hljs-variable">${location}</span></span> --size <span class="hljs-variable"><span class="hljs-variable">${size}</span></span> --nics <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${interface_suffix}</span></span> --attach-os-disk <span class="hljs-variable"><span class="hljs-variable">${name}</span></span><span class="hljs-variable"><span class="hljs-variable">${disk_suffix}</span></span> --os-type Linux <span class="hljs-variable"><span class="hljs-variable">${availability_set_as_option}</span></span></code> </pre> <br>  Exclua o disco fictício: <br><br><pre> <code class="bash hljs">az disk delete --resource-group <span class="hljs-variable"><span class="hljs-variable">${resource_group}</span></span> --name <span class="hljs-variable"><span class="hljs-variable">${disk_old}</span></span> --yes</code> </pre> <br><h2>  Automação </h2><br>  Para automatizar o processo de implantação de máquinas virtuais na nuvem do Microsoft Azure, combinei todos os comandos acima em um script bash azure-create-vm.sh, que pode ser obtido no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Github</a> .  Abra o script em qualquer editor de texto, insira seus dados e você poderá implantar máquinas virtuais com nomes bonitos pressionando algumas teclas. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt422211/">https://habr.com/ru/post/pt422211/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt422201/index.html">China, deixe-me escrever?</a></li>
<li><a href="../pt422203/index.html">Clicker DIY</a></li>
<li><a href="../pt422205/index.html">Richard Hamming: Capítulo 13. Teoria da Informação</a></li>
<li><a href="../pt422207/index.html">Monstros após as férias: AMD Threadripper 2990WX 32-Core e 2950X 16-Core (parte 4)</a></li>
<li><a href="../pt422209/index.html">Monstros após as férias: AMD Threadripper 2990WX 32-Core e 2950X 16-Core (parte 5)</a></li>
<li><a href="../pt422213/index.html">Um dia sem JavaScript: o que poderia dar errado?</a></li>
<li><a href="../pt422217/index.html">Não é realmente sério sobre hospedagem ou como verificar a adequação do host</a></li>
<li><a href="../pt422219/index.html">Ao contratar grandes empresas internacionais recusam diplomas</a></li>
<li><a href="../pt422221/index.html">Enxofre</a></li>
<li><a href="../pt422223/index.html">Escolha um no-break e não fique desapontado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>