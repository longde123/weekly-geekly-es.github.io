<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîö üì™ üßòüèª Reflexionen √ºber OOP und den Zustand von Objekten ‚õÑÔ∏è üòä üíÜüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Programmcode wird von oben nach unten geschrieben. Anweisungen werden in derselben Reihenfolge gelesen und ausgef√ºhrt. Das ist logisch und jeder h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Reflexionen √ºber OOP und den Zustand von Objekten</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/478826/"><p>  Der Programmcode wird von oben nach unten geschrieben.  Anweisungen werden in derselben Reihenfolge gelesen und ausgef√ºhrt.  Das ist logisch und jeder hat sich lange daran gew√∂hnt.  In einigen F√§llen k√∂nnen Sie die Reihenfolge der Vorg√§nge √§ndern.  Aber manchmal ist die Reihenfolge der Funktionsaufrufe wichtig, obwohl dies syntaktisch nicht offensichtlich ist.  Es stellt sich heraus, dass der Code auch nach der Neuanordnung der Anrufe noch funktioniert und das Ergebnis unerwartet ist. </p><br><p>  Einmal fiel mir ein √§hnlicher Code auf. <a name="habracut"></a></p><br><h2 id="problema">  Das problem </h2><br><p>  Als ich einmal in einem gemeinsamen Projekt im Code einer anderen Person herumstocherte, entdeckte ich eine Funktion wie: </p><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Product product, Images images, Prices prices, Availabilities availabilities)</span></span></span></span>{ priceFiller.fill(product, prices); <span class="hljs-comment"><span class="hljs-comment">//do not move this line below availabilityFiller call, availabilities require prices availabilityFiller.fill(product, availabilities); imageFiller.fill(product, images); return product; }</span></span></code> </pre> <br><p>  Nat√ºrlich f√§llt nicht der ‚Äûeleganteste‚Äú Stil auf: Klassen speichern Daten (POJO), Funktionen √§ndern eingehende Objekte ... </p><br><p>  Im Allgemeinen scheint es nichts zu sein.  Wir haben ein Objekt, in dem nicht gen√ºgend Daten vorhanden sind, und es gibt Daten selbst, die aus anderen Quellen (Diensten) stammen, die wir jetzt in dieses Objekt einf√ºgen, um es zu vervollst√§ndigen. </p><br><p>  Aber es gibt einige Nuancen. </p><br><ol><li>  Mir gef√§llt die Tatsache nicht, dass keine einzige Funktion im Stil von FP geschrieben ist und das als Argument √ºbergebene Objekt modifiziert. <br><ul><li>  Angenommen, dies wurde durchgef√ºhrt, um die Verarbeitungszeit und die Anzahl der erstellten Objekte zu verringern. </li></ul></li><li>  Nur ein Kommentar im Code besagt, dass die Reihenfolge der Aufrufe wichtig ist, und Sie sollten beim Einbetten des neuen <code>Filler</code> vorsichtig sein <br><ul><li>  Aber die Anzahl der Personen, die an dem Projekt arbeiten, betr√§gt mehr als 1 und nicht jeder kennt diesen Trick.  Besonders neue Leute im Team (nicht unbedingt im Unternehmen). </li></ul></li></ol><br><p>  Der letzte Punkt hat mich besonders besch√ºtzt.  Immerhin ist die API so aufgebaut, dass wir nach dem Aufruf dieser Funktion nicht wissen, was sich im Objekt ge√§ndert hat.  Zum Beispiel haben wir vor und nach <code>Product::getImages</code> Methode, die vor dem Aufrufen der <code>Product::getImages</code> eine leere Liste und dann eine Liste mit Bildern zu unserem Produkt erstellt. </p><br><p>  Mit <code>Filler</code> sieht es noch schlimmer aus.  <code>AvailabilityFiller</code> macht nicht deutlich, dass es erwartet, dass Informationen √ºber den Preis der Ware bereits in das √ºbertragene Objekt eingebettet sind. </p><br><p>  Und so habe ich mir √ºberlegt, wie ich meine Kollegen vor der fehlerhaften Nutzung von Funktionen sch√ºtzen kann. </p><br><h2 id="predlozhennye-resheniya">  Vorgeschlagene L√∂sungen </h2><br><p>  Zuerst habe ich beschlossen, diesen Fall mit meinen Kollegen zu besprechen.  Leider schienen mir alle von ihnen vorgeschlagenen L√∂sungen nicht der richtige Ansatz zu sein. </p><br><h3 id="runtimeexception">  Laufzeitausnahme </h3><br><p>  Eine der vorgeschlagenen Optionen war: und Sie schreiben in den <code>AvailabilityFiller</code> am Anfang der Funktion <code>Objects.requireNonNull(product.getPrices)</code> und dann wird jeder Programmierer bereits w√§hrend lokaler Tests einen Fehler erhalten. </p><br><ul><li>  Aber der Preis ist m√∂glicherweise nicht vorhanden. Wenn der Service nicht verf√ºgbar war oder ein anderer Fehler aufgetreten ist, sollte das Produkt den Status "Nicht vorr√§tig" erhalten.  Wir m√ºssen alle Arten von Flags oder irgendetwas zuordnen, um "keine Daten" von "nicht einmal angefordert" zu unterscheiden. <br><ul><li>  Wenn Sie eine Ausnahme in <code>getPrices</code> selbst <code>getPrices</code> , verursachen wir dieselben Probleme wie modernes Java mit Listen <br><ul><li>  Angenommen, eine Liste wird an eine Funktion √ºbergeben, die die get-Methode in ihrer API anbietet. Ich wei√ü, dass Sie die √ºbertragenen Objekte nicht √§ndern, sondern neue erstellen m√ºssen.  Im Endeffekt bietet uns die API eine solche Methode, aber zur Laufzeit kann ein Fehler auftreten, wenn es sich um eine unver√§nderliche Liste handelt, wie sie beispielsweise von Collectors.toList () bezogen wird. </li></ul></li></ul></li><li>  Wenn <code>AvailabilityFiller</code> von einer anderen Person verwendet wird, kann der Programmierer, der den Aufruf geschrieben hat, das Problem nicht sofort erkennen.  Erst nach dem Start und Debuggen.  Dann muss er noch den Code verstehen, um herauszufinden, woher die Daten stammen. </li></ul><br><h3 id="test">  Test </h3><br><p>  "Und Sie schreiben einen Test, der abbricht, wenn Sie die Reihenfolge der Anrufe √§ndern."  d.h.  Wenn alle <code>Filler</code> ein ‚Äûneues‚Äú Produkt zur√ºckgeben, stellt sich Folgendes heraus: </p><br><pre> <code class="java hljs">given(priceFillerMock.fill(eq(productMock), any())).willReturn(productWithPricesMock); given(availabilityFillerMock.fill(eq(productMockWithPrices), any())).willReturn(productMockWithAvailabilities); given(imageFillerMock.fill(eq(productMockWithAvailabilities), any())).willReturn(productMockWithImages); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = productFiller.fill(productMock, p1, p2, p3); assertThat(<span class="hljs-string"><span class="hljs-string">"unexpected return value"</span></span>, result, is(productMockWithImages));</code> </pre> <br><ul><li>  Ich mag keine Tests, die so "White-Box" sind </li><li>  Bricht mit jedem neuen <code>Filler</code> </li><li>  Es bricht ab, wenn die Reihenfolge der unabh√§ngigen Anrufe ge√§ndert wird </li><li>  Auch hier wird das Problem der Wiederverwendung von <code>AvailabilityFiller</code> selbst nicht gel√∂st </li></ul><br><h2 id="sobstvennye-popytki-resheniya-problemy">  Eigene Versuche, das Problem zu l√∂sen </h2><br><h3 id="ideya">  Idee </h3><br><p>  Ich denke, Sie haben bereits vermutet, dass ich das Problem auf der Kompilierungsebene l√∂sen m√∂chte.  Nun, warum brauche ich eine kompilierte Sprache mit starker Typisierung, wenn ich den Fehler nicht verhindern kann? </p><br><p>  Und ich fragte mich, ob ein Objekt ohne zus√§tzliche Daten und ein "erweitertes" Objekt zur selben Klasse geh√∂ren? </p><br><p>  W√§re es nicht richtig, die verschiedenen m√∂glichen Zust√§nde eines Objekts als separate Klassen oder Schnittstellen zu beschreiben? </p><br><p>  Meine Idee war also: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct&gt; product, Images images, Prices prices, Availabilities availabilities)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p1 = priceFiller.fill(product, prices); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> p2 = availabilityFiller.fill(p1, availabilities); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> imageFiller.fill(p2, images); } <span class="hljs-function"><span class="hljs-function">PriceFiller </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductWithPrices </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct&gt; product, Prices prices)</span></span></span><span class="hljs-function"> AvailabilityFiller </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductWithAvailabilities </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends ProductWithPrices&gt; product, Prices prices)</span></span></span><span class="hljs-function">  </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> &lt;BaseProduct &amp; PriceAware &amp; AvailabilityAware&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct &amp; PriceAware&gt; product, Prices prices)</span></span></span></span></code> </pre> <br><p>  Das hei√üt  Das urspr√ºnglich definierte Produkt ist eine Instanz einer anderen als der zur√ºckgegebenen Klasse, die bereits Daten√§nderungen anzeigt. </p><br><p>  <code>Filler</code> in ihren APIs genau an, welche Daten sie ben√∂tigen und was sie zur√ºckgeben. </p><br><p>  Auf diese Weise k√∂nnen Sie die falsche Anrufreihenfolge verhindern. </p><br><h3 id="realizaciya">  Implementierung </h3><br><p>  Wie kann man dies in Java in die Realit√§t umsetzen?  (Denken Sie daran, dass das Erben von mehreren Klassen in Java nicht m√∂glich ist.) </p><br><p>  Komplexit√§t wird durch unabh√§ngige Operationen hinzugef√ºgt.  Beispielsweise k√∂nnen Bilder vor und nach dem Hinzuf√ºgen von Preisen sowie ganz am Ende der Funktion hinzugef√ºgt werden. <br>  Dann vielleicht </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithImages</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithImagesAndPrices</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityAware</span></span></span></span>{}</code> </pre> <br><p>  Wie soll man das alles beschreiben? </p><br><p>  Adapter erstellen? </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProductWithImagesAndPrices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct &amp; PriceAware&gt; base)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base = base; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = Collections.emptyList(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base.getId(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Price </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base.getPrice(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Image&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images; }</code> </pre> <br><p>  Daten / Links kopieren? </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ProductWithImagesAndPrices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&lt;? extends BaseProduct &amp; PriceAware&gt; base)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = base.getId(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.prices = base.getPrices(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = Collections.emptyList(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;Image&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images; }</code> </pre> <br><p>  Wie bereits bemerkt, l√§uft alles auf eine riesige Menge Code hinaus.  Und das trotz der Tatsache, dass ich im Beispiel nur 3 Arten von Eingabedaten hinterlassen habe.  In der realen Welt kann es noch viel mehr geben. </p><br><p>  Es stellt sich heraus, dass sich die Kosten f√ºr das Schreiben und Verwalten eines solchen Codes nicht rechtfertigen, obwohl mir die Idee, den Staat in getrennte Klassen aufzuteilen, sehr attraktiv erschien. </p><br><p>  <em>R√ºckzug</em> </p><br><blockquote>  Wenn Sie sich andere Sprachen ansehen, ist dieses Problem irgendwo leichter zu l√∂sen, aber irgendwo nicht. <br>  In Go k√∂nnen Sie beispielsweise einen Verweis auf eine erweiterbare Klasse schreiben, ohne die Methoden "kopieren" oder "√ºberladen" zu m√ºssen.  Aber es geht nicht um Go </blockquote><p>  <em>Ein weiterer Exkurs</em> </p><br><blockquote>  W√§hrend des Schreibens dieses Artikels kam eine andere m√∂gliche L√∂sung mit <code>Proxy</code> , bei der nur neue Methoden geschrieben werden mussten, die jedoch eine Hierarchie von Schnittstellen erforderten.  Im Allgemeinen unheimlich, w√ºtend und nicht geeignet.  Wenn jemand pl√∂tzlich interessiert ist: </blockquote><br><div class="spoiler">  <b class="spoiler_title">Vor dem Zubettgehen und Essen ist es nicht empfehlenswert, sich das anzuschauen</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> baseProduct = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseProductProxy().create(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> BaseProductImpl(<span class="hljs-number"><span class="hljs-number">100L</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productWithPrices = fillPrices(baseProduct, BigDecimal.TEN); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productWithAvailabilities = fillAvailabilities(productWithPrices, <span class="hljs-string"><span class="hljs-string">"available"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> productWithImages = fillImages(productWithAvailabilities, List.of(<span class="hljs-string"><span class="hljs-string">"url1, url2"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> product = productWithImages; System.out.println(product.getId()); System.out.println(product.getPrice()); System.out.println(product.getAvailability()); System.out.println(product.getImages()); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T extends BaseProduct&gt; <span class="hljs-function"><span class="hljs-function">ImageAware </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T base, List&lt;String&gt; images)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (ImageAware) Proxy.newProxyInstance(base.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{ImageAware.class, BaseProduct.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageAware() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> images; } })); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> &lt;T extends BaseProduct&gt; <span class="hljs-function"><span class="hljs-function">PriceAware </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillPrices</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T base, BigDecimal price)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (PriceAware) Proxy.newProxyInstance(base.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{PriceAware.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PriceAware() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> BigDecimal </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> price; } })); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> AvailabilityAware </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillAvailabilities</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PriceAware base, String availability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (AvailabilityAware) Proxy.newProxyInstance(base.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{AvailabilityAware.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AvailabilityAware() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> base.getPrice().intValue() &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? availability : <span class="hljs-string"><span class="hljs-string">"sold out"</span></span>; } })); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProductImpl</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; BaseProductImpl(<span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id; } } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProductProxy</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">BaseProduct </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BaseProduct base)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (BaseProduct) Proxy.newProxyInstance(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getClass().getClassLoader(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Class[]{BaseProduct.class}, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyInvocationHandler&lt;&gt;(base, base)); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -<span class="hljs-number"><span class="hljs-number">1L</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> BigDecimal </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BigDecimal.ZERO; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityAware</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PriceAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"sold out"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ImageAware</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AvailabilityAware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Collections.emptyList(); } } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyInvocationHandler</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">U</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseProduct</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">InvocationHandler</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> U additional; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> T base; MyInvocationHandler(T base, U additional) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.additional = additional; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.base = base; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object proxy, Method method, Object[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Arrays.stream(additional.getClass().getInterfaces()).anyMatch(i -&gt; i == method.getDeclaringClass())) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> method.invoke(additional, args); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> baseMethod = Arrays.stream(base.getClass().getMethods()).filter(m -&gt; m.getName().equals(method.getName())).findFirst(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (baseMethod.isPresent()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> baseMethod.get().invoke(base, args); } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NoSuchMethodException(method.getName()); } } }</code> </pre> </div></div><br><h2 id="vyvod">  Fazit </h2><br><p>  Was f√§llt aus?  Einerseits gibt es einen interessanten Ansatz, der unterschiedliche Klassen auf ein "Objekt" in verschiedenen Zust√§nden anwendet und die Verhinderung von Fehlern garantiert, die durch eine falsche Abfolge von Aufrufen von Methoden verursacht werden, die dieses Objekt modifizieren. </p><br><p>  Auf der anderen Seite l√§sst dieser Ansatz Sie so viel Code schreiben, dass Sie ihn sofort ablehnen m√∂chten.  Ein Haufen von Interfaces und Klassen erschwert nur das Verst√§ndnis des Projekts. </p><br><p>  In meinem anderen Projekt habe ich immer noch versucht, diesen Ansatz zu verwenden.  Und zuerst auf der Interface-Ebene war alles in Ordnung.  Ich habe die Funktionen geschrieben: </p><br><pre> <code class="java hljs">&lt;T extends Foo&gt; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">firstStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;T&gt; ts)</span></span></span></span>{} &lt;T extends Foo &amp; Bar&gt; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;T&gt; ts)</span></span></span></span>{} &lt;T extends Foo&gt; <span class="hljs-function"><span class="hljs-function">List&lt;T&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finalStep</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;T&gt; ts)</span></span></span></span>{}</code> </pre> <br><p>  Nachdem somit angezeigt wurde, dass ein bestimmter Datenverarbeitungsschritt zus√§tzliche Informationen erfordert, die weder zu Beginn der Verarbeitung noch zu deren Ende ben√∂tigt werden. </p><br><p>  Mit <code>mock</code> 'und habe ich es geschafft, den Code zu testen.  Aber als es um die Implementierung ging und die Datenmenge und die verschiedenen Quellen zu wachsen begannen, gab ich schnell auf und ver√§nderte alles zu einem ‚Äûnormalen‚Äú Aussehen.  Alles funktioniert und niemand beschwert sich.  Es stellt sich heraus, dass die Effizienz und Einfachheit des Codes √ºber die "Verhinderung" von Fehlern siegt und Sie die richtige Abfolge von Aufrufen manuell nachverfolgen k√∂nnen, auch wenn der Fehler nur in der manuellen Testphase auftritt. </p><br><p>  Vielleicht h√§tte ich ganz andere L√∂sungen, wenn ich einen Schritt zur√ºckgetreten w√§re und mir den Code von der anderen Seite angesehen h√§tte.  Aber so kam es, dass ich mich f√ºr diese bestimmte kommentierte Zeile interessierte. </p><br><p>  Bereits am Ende des Artikels k√∂nnen Sie sich vorstellen, wie Produktdaten in Form eines <code>Builder</code> , der nach dem Hinzuf√ºgen der definierten Daten eine andere Schnittstelle zur√ºckgibt, da es nicht sch√∂n ist, Setter in Interfaces zu beschreiben.  Auch hier h√§ngt alles von der Komplexit√§t der Logik zum Erstellen von Objekten ab.  Wenn Sie mit Spring Security gearbeitet haben, sind Sie mit dieser Art von L√∂sung vertraut. </p><br><p>  F√ºr mein Beispiel gilt: </p><br><div class="spoiler">  <b class="spoiler_title">Builder-Pattern-basierte L√∂sung</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application_2</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> product = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product.Builder() .id(<span class="hljs-number"><span class="hljs-number">1000</span></span>) .price(<span class="hljs-number"><span class="hljs-number">20</span></span>) .availability(<span class="hljs-string"><span class="hljs-string">"available"</span></span>) .images(List.of(<span class="hljs-string"><span class="hljs-string">"url1, url2"</span></span>)) .build(); System.out.println(product.getId()); System.out.println(product.getAvailability()); System.out.println(product.getPrice()); System.out.println(product.getImages()); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Product</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> price; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String availability; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> List&lt;String&gt; images; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Product</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> price, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id, String availability, List&lt;String&gt; images)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.price = price; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.availability = availability; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = images; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPrice</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> price; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getId</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> id; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAvailability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> availability; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> List&lt;String&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getImages</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> images; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Builder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductBuilder</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithPriceBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> price; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> id; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String availability; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;String&gt; images; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.id = id; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductWithPriceBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">price</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> price)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.price = price; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">availability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String availability)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.availability = availability; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">images</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; images)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.images = images; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> av = price &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; availability != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> ? availability : <span class="hljs-string"><span class="hljs-string">"sold out"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Product(price, id, av, images); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductBuilder</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> id)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">images</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;String&gt; images)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">ProductWithPriceBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">price</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> price)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Product </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProductWithPriceBuilder</span></span></span></span>{ <span class="hljs-function"><span class="hljs-function">ProductBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">availability</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String availability)</span></span></span></span>; } } }</code> </pre> </div></div><br><p>  Also das: </p><br><ul><li>  Schreiben Sie saubere Funktionen </li><li>  Schreiben Sie sch√∂nen und klaren Code </li><li>  Denken Sie daran, dass K√ºrze eine Schwester ist und vor allem, dass der Code funktioniert </li><li>  Sie k√∂nnen Fragen stellen, nach anderen Wegen suchen und sogar alternative L√∂sungen finden </li><li>  Sei nicht still!  Wenn Sie anderen ein Problem erkl√§ren, entstehen bessere L√∂sungen (Rubber Duck Driven Developent) </li></ul><br><h2 id="spasibo-za-vnimanie">  Vielen Dank f√ºr Ihre Aufmerksamkeit </h2></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de478826/">https://habr.com/ru/post/de478826/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de478814/index.html">Wie Marketing es schneller macht, Ihre Smartphones aufzuladen</a></li>
<li><a href="../de478816/index.html">Testen von Android-Anwendungen mit Selenoid. Suchen Sie den Ort in einer mobilen App mit Appium</a></li>
<li><a href="../de478820/index.html">Vivaldi f√ºr Android: Eine Beta ist gut und die zweite ist besser</a></li>
<li><a href="../de478822/index.html">KI-Robotisierung mit InterSystems IRIS Data Platform</a></li>
<li><a href="../de478824/index.html">Unity, ECS, Actors: So erh√∂hen Sie die FPS in Ihrem Spiel zehnmal, wenn Sie nichts zu optimieren haben [mit √Ñnderungen]</a></li>
<li><a href="../de478830/index.html">Plesk, cPanel oder ISPmanager: Was soll man w√§hlen?</a></li>
<li><a href="../de478832/index.html">Verkehrsknotenpunkt: Von den Anf√§ngen bis zur Schaffung eines eigenen IX</a></li>
<li><a href="../de478834/index.html">Warum wir vor Angst wie bet√§ubt sind: Die Wirkung von Serotonin auf die Fortbewegung</a></li>
<li><a href="../de478836/index.html">Was ist √ºblich zwischen einem Revolver, Unterlegscheiben und einem autonomen Roboter</a></li>
<li><a href="../de478838/index.html">Der erste Tod auf einem Jetpack</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>