<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤷🏿 👨🏻‍🚀 🤤 Manipulasi Real-time dari Meshes on Unity ➿ 📎 🖐🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salah satu keunggulan Unity sebagai platform untuk pengembangan game adalah mesin 3D-nya yang kuat. Dalam tutorial ini, Anda akan belajar tentang duni...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Manipulasi Real-time dari Meshes on Unity</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/428796/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce5/532/c83/ce5532c83ff152100775d62091370bf2.gif" alt="gambar"></div><br>  Salah satu keunggulan Unity sebagai platform untuk pengembangan game adalah mesin 3D-nya yang kuat.  Dalam tutorial ini, Anda akan belajar tentang dunia objek 3D dan manipulasi mesh. <br><br>  Karena pertumbuhan teknologi virtual dan augmented reality (VR / AR), sebagian besar pengembang dihadapkan dengan konsep kompleks grafis 3D.  Biarkan tutorial ini menjadi titik awal bagi mereka.  Jangan khawatir, tidak akan ada matematika 3D yang rumit - hanya hati, gambar, panah, dan banyak hal menarik! <br><a name="habracut"></a><br><blockquote>  <em>Catatan:</em> tutorial ini ditujukan untuk pengguna yang terbiasa dengan Unity IDE dan memiliki beberapa pengalaman pemrograman dalam C #.  Jika Anda tidak memiliki pengetahuan seperti itu, maka pertama-tama pelajari tutorial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noopener">Pengantar UI Unity</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noopener">Pengantar Script Unity</a> . <br><br>  Anda membutuhkan versi Unity tidak lebih rendah dari 2017.3.1.  Versi terbaru dari Unity dapat diunduh di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noopener">sini</a> .  Tutorial ini menggunakan editor khusus, dan Anda dapat mempelajari lebih lanjut tentang mereka dari tutorial <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noopener">Memperluas Editor Persatuan</a> . </blockquote><br><h2>  Mulai bekerja </h2><br>  Untuk memulai, berkenalanlah dengan istilah dasar grafik 3D, yang akan memungkinkan Anda untuk lebih memahami tutorial. <br><br>  Persyaratan teknis dasar grafik 3D: <br><br><ul><li>  <em>Verteks</em> : Setiap titik adalah titik dalam ruang 3D. </li><li>  <em>Mesh</em> : berisi semua simpul, tepi, segitiga, normal, dan data UV model. </li><li>  <em>Filter Mesh</em> : menyimpan data model mesh. </li><li>  <em>Mesh Renderer</em> : Membuat data mesh dalam adegan. </li><li>  <em>Normals</em> : Vektor dari suatu vertex atau permukaan.  Ini diarahkan ke luar, tegak lurus ke permukaan mesh. </li><li>  <em>Garis / Tepi</em> : Garis tak terlihat yang menghubungkan simpul satu sama lain. </li><li>  <em>Segitiga</em> : dibentuk dengan menghubungkan tiga puncak. </li><li>  <em>Peta UV</em> : Melampirkan material ke suatu objek, menciptakan tekstur dan warna untuknya. </li></ul><br>  Anatomi objek 3D dimulai dengan mesh-nya.  Penciptaan jala ini dimulai pada puncaknya.  Garis tak terlihat yang menghubungkan simpul-simpul ini membentuk segitiga yang menentukan bentuk dasar objek. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5a7/83a/4c2/5a783a4c2ed2c144ccd0d7eb97369370.gif"></div><br>  Kemudian data normals dan UV mengatur naungan, warna dan tekstur.  Data mesh disimpan dalam filter mesh, dan mesh renderer menggunakan data ini untuk menggambar objek di tempat kejadian. <br><br>  Artinya, pseudocode untuk membuat model 3D terlihat seperti ini: <br><br><ul><li>  Buat jaring baru yang disebut "myMesh". </li><li>  Tambahkan data ke properti verteks dan segitiga myMesh. </li><li>  Buat filter mesh baru yang disebut "myMeshFilter". </li><li>  Atur properti mesh myMeshFilter ke myMesh. </li></ul><br>  Setelah Anda menguasai dasar-dasarnya, unduh <a href="">proyek</a> , unzip file, dan jalankan benda kerja proyek di Unity.  Lihatlah struktur folder di jendela <em>Proyek</em> : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/690/2d6/c2e/6902d6c2e14a98284c8af39055242bc7.png"></div><br>  Deskripsi folder: <br><br><ul><li>  <em>Rak itan</em> : berisi prefab Sphere yang akan digunakan untuk menyimpan jala 3D selama eksekusi aplikasi. </li><li>  <em>Adegan</em> : berisi tiga adegan yang kami gunakan dalam tutorial ini. </li><li>  <em>Editor</em> : skrip di dalam folder ini memberi kami fitur super di editor yang kami gunakan dalam pengembangan. </li><li>  <em>Skrip</em> : di sini adalah skrip run-time yang melampirkan GameObject dan mengeksekusi ketika Anda mengklik <em>Play</em> . </li><li>  <em>Bahan</em> : folder ini berisi materi untuk mesh. </li></ul><br>  Di bagian selanjutnya, kita akan membuat editor khusus untuk memvisualisasikan pembuatan jala 3D. <br><br><h2>  Ubah jala dengan Editor Kustom </h2><br>  Buka <em>Demo Studi 01 Mesh yang</em> terletak di folder <em>Adegan</em> .  Di jendela <em>adegan</em> , Anda akan melihat kubus 3D: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d5/ed2/812/6d5ed28123a0c65bb083c67efab702c7.gif"></div><br>  Sebelum kita masuk ke mesh, mari kita lihat skrip editor khusus. <br><br><h3>  Mengedit skrip editor </h3><br>  Pilih folder <em>Editor</em> di jendela <em>Proyek</em> .  Skrip dalam folder ini menambahkan fungsionalitas ke editor (Editor) selama pengembangan dan tidak tersedia dalam mode Build. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/442/653/b41/442653b41ca755b67d3a1ce42ae1ec5a.png"></div><br>  Buka <em>MeshInspector.cs</em> dan lihat kode sumber.  Semua skrip Editor harus mengimplementasikan kelas <code>Editor</code> , atribut <code>CustomEditor</code> memberi tahu kelas <code>Editor</code> untuk objek apa objek itu.  <code>OnSceneGUI()</code> adalah metode acara yang memungkinkan rendering di jendela Scene;  <code>OnInspectorGUI()</code> memungkinkan Anda untuk menambahkan elemen GUI tambahan ke Inspektur. <br><br>  Di <em>MeshInspector.cs,</em> sebelum memulai kelas <code>MeshInspector</code> tambahkan berikut ini: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CustomEditor(typeof(MeshStudy))</span></span>]</code> </pre> <br>  Penjelasan Kode: Atribut <code>CustomEditor</code> memberi tahu Unity jenis objek yang dapat diubah oleh kelas editor kustom. <br><br>  Di <code>OnSceneGUI()</code> sebelum <code>EditMesh()</code> tambahkan berikut ini: <br><br><pre> <code class="cs hljs">mesh = target <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> MeshStudy; Debug.Log(<span class="hljs-string"><span class="hljs-string">"Custom editor is running"</span></span>);</code> </pre> <br>  Penjelasan kode: Kelas <code>Editor</code> memiliki variabel <code>target</code> standar.  Di sini, <code>target</code> adalah konversi ke <code>MeshStudy</code> .  Sekarang editor khusus akan menggambar semua GameObjects di jendela Scene dan <em>MeshStudy.cs</em> terlampir.  Menambahkan pesan debug memungkinkan Anda memverifikasi di konsol bahwa editor khusus benar-benar berjalan. <br><br>  Simpan file dan kembali ke Unity.  Buka folder <em>Script</em> dan seret <em>MeshStudy.cs</em> ke GameObject <em>Cube</em> di <em>Hierarchy</em> untuk melampirkannya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aa6/b8a/ee4/aa6b8aee48eacb8421eff3c4e1ef4be3.png"></div><br>  Sekarang pesan "Editor kustom sedang berjalan" harus ditampilkan di konsol, dan ini berarti bahwa kami melakukan semuanya dengan benar!  Anda dapat menghapus pesan debug agar tidak mengganggu kami di konsol. <br><br><h3>  Mengkloning dan membuang mesh </h3><br>  Saat bekerja dengan jala 3D dalam mode Edit menggunakan editor khusus, berhati-hatilah untuk tidak menimpa jala Unity default.  Jika ini terjadi, Anda harus memulai ulang Unity. <br><br>  Untuk mengkloning jala dengan aman tanpa menimpa bentuk asli, buat salinan jala dari properti <code>MeshFilter.sharedmesh</code> dan tetapkan ke filter jala lagi. <br><br>  Untuk melakukan ini, klik dua kali pada <em>MeshStudy.cs</em> di folder <em>Scripts</em> untuk membuka file di editor kode.  Script ini mewarisi dari kelas <code>MonoBehaviour</code> , dan fungsi <code>Start()</code> tidak dijalankan dalam mode Edit. <br><br>  Di <em>MeshStudy.cs,</em> sebelum memulai kelas <code>MeshStudy</code> tambahkan berikut ini: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">ExecuteInEditMode</span></span>]</code> </pre> <br>  Penjelasan kode: setelah menambahkan atribut ini, fungsi <code>Start()</code> akan dieksekusi baik dalam mode Putar dan dalam mode Edit.  Sekarang kita dapat instantiate objek mesh pertama dan mengkloningnya. <br><br>  Di <code>InitMesh()</code> tambahkan kode berikut: <br><br><pre> <code class="cs hljs">oMeshFilter = GetComponent&lt;MeshFilter&gt;(); oMesh = oMeshFilter.sharedMesh; <span class="hljs-comment"><span class="hljs-comment">//1 cMesh = new Mesh(); //2 cMesh.name = "clone"; cMesh.vertices = oMesh.vertices; cMesh.triangles = oMesh.triangles; cMesh.normals = oMesh.normals; cMesh.uv = oMesh.uv; oMeshFilter.mesh = cMesh; //3 vertices = cMesh.vertices; //4 triangles = cMesh.triangles; isCloned = true; Debug.Log("Init &amp; Cloned");</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Mendapat jala <code>oMesh</code> asli dari komponen <code>MeshFilter</code> . </li><li>  Salin <code>cMesh</code> ke <code>cMesh</code> mesh baru. </li><li>  Menetapkan filter jala yang disalin lagi. </li><li>  Memperbarui variabel lokal. </li></ol><br>  Simpan file dan kembali ke Unity.  Pesan "Init &amp; Kloning" harus ditampilkan di konsol debug.  Pilih GameObject <code>Cube</code> di <em>Hierarchy</em> dan periksa propertinya di <em>Inspektur</em> .  <em>Filter Mesh</em> harus menampilkan aset mesh yang disebut <em>clone</em> .  Hebat!  Ini berarti bahwa kami telah berhasil mengkloning jala. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6c/2da/3e0/c6c2da3e0e29703888bad5e50bb608a6.png"></div><br>  Di folder Editor, navigasikan ke <em>MeshInspector.cs</em> .  Di <code>OnInspectorGUI()</code> , setelah baris kode kedua, tambahkan berikut ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUILayout.Button(<span class="hljs-string"><span class="hljs-string">"Reset"</span></span>)) <span class="hljs-comment"><span class="hljs-comment">//1 { mesh.Reset(); //2 }</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Kode ini menarik tombol Reset di <em>Inspektur</em> . </li><li>  Saat ditekan, ia memanggil fungsi <code>Reset()</code> di <em>MeshStudy.cs</em> . </li></ol><br>  Simpan file, buka <em>MeshStudy.cs</em> dan tambahkan kode berikut ke fungsi <code>Reset()</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cMesh != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; oMesh != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-comment"><span class="hljs-comment">//1 { cMesh.vertices = oMesh.vertices; //2 cMesh.triangles = oMesh.triangles; cMesh.normals = oMesh.normals; cMesh.uv = oMesh.uv; oMeshFilter.mesh = cMesh; //3 vertices = cMesh.vertices; //4 triangles = cMesh.triangles; }</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Memverifikasi keberadaan sumber dan kloning jala. </li><li>  Setel ulang <code>cMesh</code> ke mesh asli. </li><li>  Tugas untuk <code>cMesh</code> <code>oMeshFilter</code> . </li><li>  Memperbarui variabel lokal. </li></ol><br>  Simpan file dan kembali ke Unity.  Di <em>Inspektur,</em> klik tombol <em>Edit Tes</em> untuk mendistorsi jaring kubus.  Selanjutnya, klik <em>tombolReset</em> ;  kubus harus kembali ke bentuk aslinya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0c3/a8a/e22/0c3a8ae22c8f8382dd46ee652b4b6eea.gif"></div><br><h3>  Penjelasan simpul dan segitiga di Unity </h3><br>  Jaring terdiri dari simpul-simpul yang dihubungkan oleh tepi-tepi dalam segitiga.  Segitiga menentukan bentuk dasar objek. <br><br><blockquote>  <em>Kelas Jala:</em> <br><br><ul><li>  Verteks disimpan sebagai array nilai <code>Vector3</code> . </li><li>  Segitiga disimpan sebagai array integer yang sesuai dengan indeks array verteks. </li></ul><br>  Yaitu, dalam Quad mesh sederhana, yang terdiri dari empat simpul dan dua segitiga, data mesh akan terlihat seperti ini: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56c/56d/794/56c56d794628ff20592f801340308790.gif"></div></blockquote><br><h3>  Pemetaan vertex </h3><br>  Di sini kita ingin menampilkan simpul kubus sebagai titik biru. <br><br>  Di <em>MeshInspector.cs</em> kita <em>akan</em> masuk ke fungsi <code>EditMesh()</code> dan tambahkan yang berikut: <br><br><pre> <code class="cs hljs">handleTransform = mesh.transform; <span class="hljs-comment"><span class="hljs-comment">//1 handleRotation = Tools.pivotRotation == PivotRotation.Local ? handleTransform.rotation : Quaternion.identity; //2 for (int i = 0; i &lt; mesh.vertices.Length; i++) //3 { ShowPoint(i); }</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  <code>handleTransform</code> mendapat nilai Transform dari <code>mesh</code> . </li><li>  <code>handleRotation</code> mendapatkan mode Rotasi dari sambungan saat ini. </li><li>  <code>ShowPoint()</code> simpul jaring dan gambar titik menggunakan <code>ShowPoint()</code> . </li></ol><br>  Dalam fungsi <code>ShowPoint()</code> , segera setelah <code>//draw dot</code> comment, tambahkan berikut ini: <br><br><pre> <code class="cs hljs">Vector3 point = handleTransform.TransformPoint(mesh.vertices[index]);</code> </pre> <br>  Penjelasan Kode: Baris ini mengubah posisi lokal titik menjadi koordinat di ruang dunia. <br><br>  Dalam fungsi yang sama, di blok <code>if</code> , segera setelah baris kode baru saja ditambahkan, tambahkan berikut ini: <br><br><pre> <code class="cs hljs">Handles.color = Color.blue; point = Handles.FreeMoveHandle(point, handleRotation, mesh.handleSize, Vector3.zero, Handles.DotHandleCap);</code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Mengatur warna, ukuran, dan posisi suatu titik menggunakan kelas Penolong <code>Handles</code> . </li><li>  <code>Handles.FreeMoveHandle()</code> menciptakan manipulator gerakan tanpa batas yang menyederhanakan operasi seret dan lepas, yang berguna bagi kita di bagian selanjutnya. </li></ol><br>  Simpan file dan kembali ke Unity.  Periksa properti kubus di <em>Inspektur</em> dan pastikan opsi <em>Pindahkan Titik Titik</em> diaktifkan.  Anda sekarang harus melihat bahwa jala di layar ditandai dengan beberapa titik biru.  Inilah mereka - bagian atas jala kubus!  Coba lakukan ini dengan objek 3D lainnya dan amati hasilnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d78/3aa/205/d783aa2054dd9ca81ee7a6c948c7c00a.gif"></div><br><h3>  Pindahkan satu titik </h3><br>  Mari kita mulai dengan langkah paling sederhana memanipulasi mesh - memindahkan satu titik. <br><br>  Pergi ke <em>MeshInspector.cs</em> .  Di dalam fungsi <code>ShowPoint()</code> , tepat setelah <code>//drag</code> comment dan tepat sebelum tanda kurung blok <code>if</code> , tambahkan berikut ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUI.changed) <span class="hljs-comment"><span class="hljs-comment">//1 { mesh.DoAction(index, handleTransform.InverseTransformPoint(point)); //2 }</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  <code>GUI.changed</code> melacak semua perubahan yang terjadi dengan titik, dan bekerja dengan baik bersama dengan <code>Handles.FreeMoveHandle()</code> untuk mengenali operasi seret dan lepas. </li><li>  Untuk simpul yang dapat diseret, fungsi <code>mesh.DoAction()</code> menerima indeks dan nilai Transform sebagai parameter.  Karena nilai Transform dari vertex berada di ruang dunia, kami mengonversinya ke ruang lokal menggunakan <code>InverseTransformPoint()</code> . </li></ol><br>  Simpan file skrip dan pergi ke <em>MeshStudy.cs</em> .  Di <code>DoAction()</code> , setelah tanda kurung buka, tambahkan berikut ini: <br><br><pre> <code class="cs hljs">PullOneVertex(index, localPos);</code> </pre> <br>  Kemudian tambahkan berikut ini ke fungsi <code>PullOneVertex()</code> : <br><br><pre> <code class="cs hljs">vertices[index] = newPos; <span class="hljs-comment"><span class="hljs-comment">//1 cMesh.vertices = vertices; //2 cMesh.RecalculateNormals(); //3</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Kami memperbarui vertex target dengan nilai <code>newPos</code> . </li><li>  <code>cMesh.vertices</code> nilai titik yang diperbarui kembali ke <code>cMesh.vertices</code> . </li><li>  Di <code>RecalculateNormals()</code> menghitung ulang dan menggambar ulang jala sehingga cocok dengan perubahan. </li></ol><br>  Simpan file dan kembali ke Unity.  Coba seret poin pada kubus;  apakah Anda melihat jala yang rusak? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fca/ccf/c86/fcaccfc865e30b3c922e6cabcf9f79d7.gif"></div><br>  Tampaknya beberapa simpul memiliki posisi yang sama, jadi ketika kita menyeret hanya satu, simpul yang tersisa tetap berada di belakangnya, dan jala putus.  Di bagian selanjutnya, kami akan memperbaiki masalah ini. <br><br><h3>  Menemukan semua simpul serupa </h3><br>  Secara visual, mesh kubus terdiri dari delapan simpul, enam sisi, dan 12 segitiga.  Mari kita periksa apakah ini benar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/253/a30/b3f/253a30b3fcca7b0d9028d92b4c4149c2.gif"></div><br>  Buka <em>MeshStudy.cs</em> , lihat di depan fungsi <code>Start()</code> dan cari variabel <code>vertices</code> .  Kita akan melihat yang berikut ini: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">HideInInspector</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Vector3[] vertices;</code> </pre> <br>  Penjelasan Kode: <code>[HideInInspector]</code> menyembunyikan variabel yang dibagi dari jendela <em>Inspektur</em> . <br><br>  Komentar atribut ini: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//[HideInInspector] public Vector3[] vertices;</span></span></code> </pre> <br><blockquote>  <em>Catatan:</em> menyembunyikan nilai titik membantu <code>[HideInInspector]</code> dengan jerat 3D yang lebih kompleks.  Karena ukuran array vertex dapat mencapai ribuan elemen, ini dapat menyebabkan penghambatan Persatuan ketika mencoba untuk melihat nilai array di Inspektur. </blockquote><br>  Simpan file dan kembali ke Unity.  Pergi ke <em>Inspektur</em> .  Sekarang, di bawah komponen skrip <em>Studi Mesh</em> , properti <em>simpul</em> telah muncul.  Klik ikon panah di sebelahnya;  sehingga Anda <code>Vector3</code> array elemen <code>Vector3</code> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/feb/f83/fd0/febf83fd02d469734b73910b1769d670.gif"></div><br>  Anda dapat melihat bahwa ukuran array adalah 24, yaitu, ada simpul yang memiliki posisi yang sama!  Sebelum melanjutkan, pastikan untuk <code>[HideInInspector]</code> komentar <code>[HideInInspector]</code> . <br><br><div class="spoiler">  <b class="spoiler_title">Mengapa ada 24 simpul?</b> <div class="spoiler_text">  Ada banyak teori tentang hal ini.  Tetapi jawaban yang paling sederhana adalah: kubus memiliki enam sisi, dan setiap sisi terdiri dari empat simpul yang membentuk sebuah bidang. <br><br>  Oleh karena itu, perhitungannya adalah sebagai berikut: 6 x 4 = 24 simpul. <br><br>  Anda dapat mencari jawaban lain.  Tetapi untuk sekarang, cukup sederhana untuk mengetahui bahwa beberapa jerat akan memiliki simpul yang memiliki posisi yang sama. </div></div><br>  Di <em>MeshStudy.cs,</em> ganti <em>semua</em> kode di dalam fungsi <code>DoAction()</code> dengan yang berikut: <br><br><pre> <code class="cs hljs">PullSimilarVertices(index, localPos);</code> </pre> <br>  Mari kita <code>PullSimilarVertices()</code> ke fungsi <code>PullSimilarVertices()</code> dan tambahkan yang berikut: <br><br><pre> <code class="cs hljs">Vector3 targetVertexPos = vertices[index]; <span class="hljs-comment"><span class="hljs-comment">//1 List&lt;int&gt; relatedVertices = FindRelatedVertices(targetVertexPos, false); //2 foreach (int i in relatedVertices) //3 { vertices[i] = newPos; } cMesh.vertices = vertices; //4 cMesh.RecalculateNormals();</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  kita mendapatkan posisi vertex target, yang akan digunakan sebagai argumen ke metode <code>FindRelatedVertices()</code> . </li><li>  Metode ini mengembalikan daftar indeks (sesuai dengan simpul) yang memiliki posisi yang sama dengan simpul target. </li><li>  Loop melewati seluruh daftar dan mengatur simpul yang sesuai ke <code>newPos</code> . </li><li>  <code>cMesh.vertices</code> <code>vertices</code> diperbarui kembali ke <code>cMesh.vertices</code> .  Lalu kami memanggil <code>RecalculateNormals()</code> untuk menggambar ulang jala dengan nilai-nilai baru. </li></ol><br>  Simpan file dan kembali ke Unity.  Seret salah satu simpul;  sekarang mesh harus mempertahankan bentuknya dan tidak runtuh. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1b/66d/bcc/b1b66dbccb73ac3a8ad8c56594611919.gif"></div><br>  Sekarang kita telah menyelesaikan langkah pertama dalam memanipulasi jerat, simpan adegan dan lanjutkan ke bagian selanjutnya. <br><br><h2>  Manipulasi jala </h2><br>  Di bagian ini, Anda akan belajar tentang memanipulasi jerat secara real time.  Ada banyak cara, tetapi dalam tutorial ini kita akan melihat jenis manipulasi mesh paling sederhana, yaitu memindahkan simpul mesh yang sebelumnya dibuat. <br><br><h3>  Mengumpulkan indeks yang dipilih </h3><br>  Mari kita mulai dengan memilih simpul yang akan kita gerakkan secara real time. <br><br>  Buka Adegan <em>02 Buat Heart Mesh</em> dari folder <em>Adegan</em> .  Di jendela Adegan, Anda akan melihat bola merah.  Pilih <em>Sphere</em> di <em>Hirarki</em> dan pergi ke <em>Inspektur</em> .  Anda akan melihat bahwa komponen skrip <em>Heart Mesh</em> terpasang ke objek. <br><br>  Sekarang kita perlu skrip Editor untuk objek ini untuk menampilkan simpul dari mesh di jendela Scene.  Buka folder <em>Editor</em> dan klik dua kali pada <em>HeartMeshInspector.cs</em> . <br><br>  Dalam fungsi <code>ShowHandle()</code> , di dalam blok <code>if</code> , tambahkan berikut ini: <br><br><pre> <code class="cs hljs">Handles.color = Color.blue; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Handles.Button(point, handleRotation, mesh.pickSize, mesh.pickSize, Handles.DotHandleCap)) <span class="hljs-comment"><span class="hljs-comment">//1 { mesh.selectedIndices.Add(index); //2 }</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Mengatur dan menampilkan simpul dari mesh sebagai tipe <code>Handles.Button</code> . <code>Handles.Button</code> . </li><li>  Ketika diklik, itu menambah indeks yang dipilih ke daftar indeks ditekan, <code>mesh.selectedIndices</code> . </li></ol><br>  Di <code>OnInspectorGUI()</code> , sebelum braket penutup, tambahkan berikut ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (GUILayout.Button(<span class="hljs-string"><span class="hljs-string">"Clear Selected Vertices"</span></span>)) { mesh.ClearAllData(); }</code> </pre> <br>  Penjelasan kode: ini adalah bagaimana kami menambahkan tombol Reset ke <em>Inspektur</em> untuk memanggil <code>mesh.ClearAllData()</code> . <br><br>  Simpan file dan buka <em>HeartMesh.cs</em> dari folder <em>Scripts</em> .  Dalam fungsi <code>ClearAllData()</code> , tambahkan berikut ini: <br><br><pre> <code class="cs hljs">selectedIndices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); targetIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>; targetVertex = Vector3.zero;</code> </pre> <br>  Penjelasan Kode: Kode ini membersihkan nilai dalam <code>targetIndex</code> dan <code>targetIndex</code> <code>selectedIndices</code> .  Ini juga mengatur ulang <code>targetVertex</code> . <br><br>  Simpan file dan kembali ke Unity.  Pilih <em>Sphere</em> dan pergi ke <em>Inspektur</em> untuk <em>komponen</em> skrip <em>HeartMesh</em> .  Luaskan <em>Indeks yang Dipilih</em> dengan mengklik ikon panah di sebelahnya.  Ini akan memungkinkan kita untuk melacak setiap titik yang ditambahkan ke daftar. <br><br>  Enable <em>Is Edit Mode</em> menggunakan kotak centang di sebelahnya.  Karena ini, simpul dari mesh akan ditarik di jendela Scene.  Mengklik pada titik biru di <em>Indeks yang Dipilih</em> harus mengubah nilai yang sesuai.  Juga uji tombol <em>Hapus Seleksi Verteks</em> untuk memastikannya menghapus semua nilai. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17a/271/dea/17a271dea970e9c3ade451773b87eb65.gif"></div><br>  <em>Catatan:</em> di <em>Inspektur</em> kustom yang dimodifikasi, kami memiliki opsi untuk menampilkan / menyembunyikan manipulator transform menggunakan <em>Show Transform Handle</em> .  Jadi, jangan panik jika Anda tidak menemukan manipulator Transform di adegan lain!  Nyalakan sebelum keluar. <br><br><h3>  Mengubah bola menjadi hati </h3><br>  Mengubah simpul jala secara real time pada dasarnya terdiri dari tiga langkah: <br><br><ol><li>  Salin simpul mesh saat ini (sebelum animasi) ke <code>mVertices</code> . </li><li>  <code>mVertices</code> perhitungan dan mengubah nilai dalam <code>mVertices</code> . </li><li>  Perbarui simpul mesh saat ini dengan <code>mVertices</code> ketika mengubah pada setiap langkah dan biarkan Unity secara otomatis menghitung normals. </li></ol><br>  Buka <em>HeartMesh.cs</em> dan variabel berikut ini sebelum fungsi <code>Start()</code> : <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> radiusofeffect = <span class="hljs-number"><span class="hljs-number">0.3f</span></span>; <span class="hljs-comment"><span class="hljs-comment">//1 public float pullvalue = 0.3f; //2 public float duration = 1.2f; //3 int currentIndex = 0; //4 bool isAnimate = false; float starttime = 0f; float runtime = 0f;</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Jari-jari area dipengaruhi oleh vertex target. </li><li>  Seret kekuatan. </li><li>  Durasi animasi. </li><li>  Indeks saat ini dari daftarIndeks yang <code>selectedIndices</code> . </li></ol><br>  Dalam fungsi <code>Init()</code> , sebelum blok <code>if</code> , tambahkan berikut ini: <br><br><pre> <code class="cs hljs">currentIndex = <span class="hljs-number"><span class="hljs-number">0</span></span>;</code> </pre> <br>  Penjelasan kode: pada awal permainan, <code>currentIndex</code> ke 0, indeks pertama dari daftarIndeks yang <code>selectedIndices</code> . <br><br>  Dalam fungsi <code>Init()</code> sama, sebelum braket penutup blok <code>else</code> , tambahkan berikut ini: <br><br><pre> <code class="cs hljs">StartDisplacement();</code> </pre> <br>  Penjelasan kode: jalankan fungsi <code>StartDisplacement()</code> jika <code>isEditMode</code> salah. <br><br>  Di dalam fungsi <code>StartDisplacement()</code> , tambahkan berikut ini: <br><br><pre> <code class="cs hljs">targetVertex = oVertices[selectedIndices[currentIndex]]; <span class="hljs-comment"><span class="hljs-comment">//1 starttime = Time.time; //2 isAnimate = true;</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Pilih <code>targetVertex</code> untuk memulai animasi. </li><li>  Tetapkan waktu mulai dan ubah nilai <code>isAnimate</code> menjadi true. </li></ol><br>  Setelah fungsi <code>StartDisplacement()</code> , buat fungsi <code>FixedUpdate()</code> dengan kode berikut: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FixedUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">//1 { if (!isAnimate) //2 { return; } runtime = Time.time - starttime; //3 if (runtime &lt; duration) //4 { Vector3 targetVertexPos = oFilter.transform.InverseTransformPoint(targetVertex); DisplaceVertices(targetVertexPos, pullvalue, radiusofeffect); } else //5 { currentIndex++; if (currentIndex &lt; selectedIndices.Count) //6 { StartDisplacement(); } else //7 { oMesh = GetComponent&lt;MeshFilter&gt;().mesh; isAnimate = false; isMeshReady = true; } } }</span></span></span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Fungsi <code>FixedUpdate()</code> dijalankan dalam loop FPS tetap. </li><li>  Jika <code>isAnimate</code> salah, maka lewati kode berikut. </li><li>  Ubah animasi <code>runtime</code> . </li><li>  Jika <code>runtime</code> berada dalam <code>duration</code> , maka kita mendapatkan koordinat dunia <code>targetVertex</code> dan <code>DisplaceVertices()</code> , yang mencakup vertex target dengan <code>radiusofeffect</code> dan <code>radiusofeffect</code> . </li><li>  Kalau tidak, waktu sudah habis.  Tambahkan satu <code>currentIndex</code> . </li><li>  Periksa apakah <code>currentIndex</code> di <code>currentIndex</code> <code>selectedIndices</code> .  Pergi ke simpul berikutnya dalam daftar menggunakan <code>StartDisplacement()</code> . </li><li>  Jika tidak, di akhir daftar, ubah data <code>oMesh</code> ke mesh saat ini dan <code>isAnimate</code> to false untuk menghentikan animasi. </li></ol><br>  Di <code>DisplaceVertices()</code> tambahkan berikut ini: <br><br><pre> <code class="cs hljs">Vector3 currentVertexPos = Vector3.zero; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sqrRadius = radius * radius; <span class="hljs-comment"><span class="hljs-comment">//1 for (int i = 0; i &lt; mVertices.Length; i++) //2 { currentVertexPos = mVertices[i]; float sqrMagnitute = (currentVertexPos - targetVertexPos).sqrMagnitude; //3 if (sqrMagnitute &gt; sqrRadius) { continue; //4 } float distance = Mathf.Sqrt(sqrMagnitute); //5 float falloff = GaussFalloff(distance, radius); Vector3 translate = (currentVertexPos * force) * falloff; //6 translate.z = 0f; Quaternion rotation = Quaternion.Euler(translate); Matrix4x4 m = Matrix4x4.TRS(translate, rotation, Vector3.one); mVertices[i] = m.MultiplyPoint3x4(currentVertexPos); } oMesh.vertices = mVertices; //7 oMesh.RecalculateNormals();</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Kuadrat dari jari-jari. </li><li>  Kami loop melalui setiap simpul mesh. </li><li>  <code>sqrMagnitude</code> antara <code>currentVertexPos</code> dan <code>targetVertexPos</code> . </li><li>  Jika <code>sqrMagnitude</code> melebihi <code>sqrRadius</code> , maka pergi ke simpul berikutnya. </li><li>  Jika tidak, lanjutkan dengan menentukan nilai <code>falloff</code> , yang tergantung pada <code>distance</code> simpul saat ini dari titik pusat lingkup. </li><li>  <code>Vector3</code> posisi <code>Vector3</code> baru dan terapkan Transform ke vertex saat ini. </li><li>  Saat Anda keluar dari loop, kami menetapkan nilai <code>mVertices</code> diubah ke <code>mVertices</code> , dan memaksa Unity untuk menghitung ulang normals. </li></ol><br><blockquote>  <em>Sumber Teknologi Falloff</em> <br>  Rumus asli diambil dari file paket aset <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noopener">Contoh Prosedural</a> , yang dapat diunduh secara gratis dari Unity Asset Store. </blockquote><br>  Simpan file dan kembali ke Unity.  Pilih <em>Sphere</em> , buka komponen <em>HeartMesh</em> dan coba tambahkan beberapa simpul ke properti <em>Indeks Pilihan</em> .  Nonaktifkan <em>Apakah Edit mode</em> dan klik <em>Mainkan</em> untuk melihat hasil pekerjaan Anda. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e1e/527/23b/e1e52723b08453591da6d10a28dbe13d.gif"></div><br>  Eksperimen dengan nilai <em>Radiusofeffect</em> , <em>Pullvalue,</em> dan <em>Duration</em> untuk mendapatkan hasil yang berbeda.  Saat Anda siap, ubah pengaturan sesuai dengan tangkapan layar di bawah ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a63/c44/082/a63c44082183529e737f287cb746dfd6.png"></div><br>  Klik <em>Play</em> .  Apakah bola Anda berubah menjadi hati? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ce5/532/c83/ce5532c83ff152100775d62091370bf2.gif"></div><br>  Selamat!  Di bagian selanjutnya, kami akan menyimpan jaring sebagai cetakan untuk penggunaan di masa depan. <br><br><h3>  Menyimpan jala secara real time </h3><br>  Untuk menyimpan mesh prosedural berbentuk hati dalam mode Play, Anda harus menyiapkan prefab yang anaknya akan menjadi objek 3D, dan kemudian ganti aset mesh-nya dengan yang baru menggunakan skrip. <br><br>  Di jendela <em>Proyek,</em> cari <em>CustomHeart</em> di folder <em>Rak itan</em> .  Klik ikon panah untuk memperluas isinya dan pilih <em>Anak</em> .  Anda sekarang melihat objek Sphere di jendela pratinjau <em>Inspektur</em> .  Ini adalah cetakan yang akan menyimpan data untuk mesh baru. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a3/f07/048/9a3f070486f3a66ee56304dae5bd2b12.png"></div><br>  Buka <em>HeartMeshInspector.cs</em> .  Di dalam fungsi <code>OnInspectorGUI()</code> , sebelum braket penutup, tambahkan berikut ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!mesh.isEditMode &amp;&amp; mesh.isMeshReady) { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> path = <span class="hljs-string"><span class="hljs-string">"Assets/Prefabs/CustomHeart.prefab"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//1 if (GUILayout.Button("Save Mesh")) { mesh.isMeshReady = false; Object pfObj = AssetDatabase.LoadAssetAtPath(path, typeof(GameObject)); //2 Object pfRef = AssetDatabase.LoadAssetAtPath (path, typeof(GameObject)); GameObject gameObj = (GameObject)PrefabUtility.InstantiatePrefab(pfObj); Mesh pfMesh = (Mesh)AssetDatabase.LoadAssetAtPath(path, typeof(Mesh)); //3 if (!pfMesh) { pfMesh = new Mesh(); } else { pfMesh.Clear(); } pfMesh = mesh.SaveMesh(); //4 AssetDatabase.AddObjectToAsset(pfMesh, path); gameObj.GetComponentInChildren&lt;MeshFilter&gt;().mesh = pfMesh; //5 PrefabUtility.ReplacePrefab(gameObj, pfRef, ReplacePrefabOptions.Default); //6 Object.DestroyImmediate(gameObj); //7 } }</span></span></code> </pre> <br>  Penjelasan Kode: <br><br><ol><li>  Menyetel <code>path</code> ke jalur ke objek pabrikan CustomHeart. </li><li>  Membuat dua objek dari <em>prefab</em> CustomHeart, satu untuk membuat instance sebagai GameObject ( <code>pfObj</code> ), dan yang kedua sebagai tautan ( <code>pfRef</code> ). </li><li>  Membuat instance <code>pfMesh</code> pfMesh mesh <code>pfMesh</code> .  Jika tidak ditemukan, buat mesh baru, jika tidak maka bersihkan data yang ada. </li><li>  <code>pfMesh</code> dengan data mesh baru, dan kemudian menambahkannya sebagai aset ke <em>CustomHeart</em> . <br></li><li>  Mengisi aset jala di <code>gameObj</code> nilai <code>pfMesh</code> . </li><li>  Mengganti <em>CustomHeart</em> dengan <code>gameObj</code> mencocokkan koneksi yang sudah ada sebelumnya. </li><li>  Seketika menghancurkan <code>gameObj</code> . </li></ol><br>  Simpan file dan pergi ke <em>HeartMesh.cs</em> .  Dalam metode <code>SaveMesh()</code> umum, setelah membuat instance <code>nMesh</code> tambahkan berikut ini: <br><br><pre> <code class="cs hljs">nMesh.name = <span class="hljs-string"><span class="hljs-string">"HeartMesh"</span></span>; nMesh.vertices = oMesh.vertices; nMesh.triangles = oMesh.triangles; nMesh.normals = oMesh.normals;</code> </pre> <br>  Penjelasan Kode: Mengembalikan aset mesh dengan nilai dari mesh berbentuk hati. <br><br>  Simpan file dan kembali ke Unity.  Klik <em>Mainkan</em> .  Setelah animasi selesai, tombol <em>Save Mesh</em> akan muncul di <em>Inspektur</em> .  Klik tombol untuk menyimpan jala baru, dan kemudian hentikan pemain. <br><br>  Buka folder <em>Rak itan</em> dan lihat <em>prefab</em> CustomHeart.  Anda harus melihat bahwa sekarang di objek pabrikan CustomHeart terdapat jaring berbentuk hati yang benar-benar baru. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/126/dee/103/126dee103ce798611d2dc2e94013c23c.png"></div><br>  <i>Kerja bagus!</i> <br><br><h2>  Menyatukan semuanya </h2><br>  Dalam adegan sebelumnya, fungsi <code>DisplaceVertices()</code> menggunakan rumus Falloff untuk menentukan gaya seret yang diterapkan ke setiap titik dalam radius yang diberikan.  Titik "jatuh", di mana gaya drag mulai berkurang, tergantung pada jenis Falloff yang digunakan: Linear, Gaussian atau Needle.  Setiap jenis menghasilkan hasil yang berbeda di jala. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ff/284/9c0/9ff2849c0d0fe5f9d496d641c07e35d8.png"></div><br>  Di bagian ini, kita akan melihat cara lain untuk memanipulasi simpul: menggunakan kurva yang diberikan.  Mengambil aturan bahwa kecepatan sama dengan jarak yang dibagi oleh waktu (d = (v / t)), kita dapat menentukan posisi vektor, mengacu pada jaraknya dibagi dengan waktu. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b8/2d6/13c/3b82d613cedaf85e12db66beb6349201.gif"></div><br><h3>  Menggunakan Metode Kurva </h3><br>  Simpan adegan saat ini dan buka <em>03 Customize Heart Mesh</em> dari folder <em>Scenes</em> .  Anda akan melihat contoh <em>Hirarki</em> dari <em>prefab</em> CustomHeart.  Klik ikon panah di sebelahnya untuk membuka kontennya dan pilih <em>Child</em> . <br><br>  Lihat propertinya di <em>Inspektur</em> .<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda akan melihat komponen </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Filter Mesh</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dengan Aset </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heart Mesh</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Lampirkan </font><font style="vertical-align: inherit;">skrip </font><em><font style="vertical-align: inherit;">Custom Heart</font></em><font style="vertical-align: inherit;"> ke </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Child</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sebagai komponen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Sekarang aset tersebut harus berubah dari </font><em><font style="vertical-align: inherit;">HeartMesh</font></em><font style="vertical-align: inherit;"> ke </font><em><font style="vertical-align: inherit;">clone</font></em><font style="vertical-align: inherit;"> .</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/954/27f/89d/95427f89d17410e26893a0ec27dff51d.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Selanjutnya, buka </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CustomHeart.cs</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari folder </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scripts</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sebelum fungsi, </font></font><code>Start()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tambahkan berikut ini:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> CurveType { Curve1, Curve2 } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> CurveType curveType; Curve curve;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penjelasan kode: di sini enum umum dibuat dengan nama </font></font><code>CurveType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, setelah itu tersedia dari </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inspektur</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergi ke </font></font><code>CurveType1()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan tambahkan berikut ini:</font></font><br><br><pre> <code class="cs hljs">Vector3[] curvepoints = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3[<span class="hljs-number"><span class="hljs-number">3</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//1 curvepoints[0] = new Vector3(0, 1, 0); curvepoints[1] = new Vector3(0.5f, 0.5f, 0); curvepoints[2] = new Vector3(1, 0, 0); curve = new Curve(curvepoints[0], curvepoints[1], curvepoints[2], false); //2</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Penjelasan Kode: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kurva sederhana terdiri dari tiga titik. </font><font style="vertical-align: inherit;">Tetapkan poin untuk kurva pertama.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menghasilkan kurva pertama dengan bantuan </font></font><code>Curve()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan menetapkan nilainya </font></font><code>curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kurva yang ditarik dapat ditampilkan dalam pratinjau jika Anda menentukan true sebagai parameter terakhir.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pergi ke </font></font><code>CurveType2()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan tambahkan berikut ini:</font></font><br><br><pre> <code class="cs hljs">Vector3[] curvepoints = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3[<span class="hljs-number"><span class="hljs-number">3</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//1 curvepoints[0] = new Vector3(0, 0, 0); curvepoints[1] = new Vector3(0.5f, 1, 0); curvepoints[2] = new Vector3(1, 0, 0); curve = new Curve(curvepoints[0], curvepoints[1], curvepoints[2], false); //2</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Penjelasan Kode: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Tetapkan poin untuk kurva kedua. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami menghasilkan kurva kedua dengan </font></font><code>Curve()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan menetapkan nilainya </font></font><code>curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Kurva yang ditarik dapat ditampilkan dalam pratinjau jika Anda menentukan true sebagai parameter terakhir.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font><code>StartDisplacement()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sebelum braket penutup, tambahkan yang berikut:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (curveType == CurveType.Curve1) { CurveType1(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (curveType == CurveType.Curve2) { CurveType2(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Penjelasan kode: di sini kami memeriksa opsi yang dipilih oleh pengguna </font></font><code>curveType</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan menghasilkannya sesuai </font></font><code>curve</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">B </font></font><code>DisplaceVertices()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, di dalam pernyataan loop </font></font><code>for</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sebelum tanda kurung tutup, tambahkan berikut ini:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> increment = curve.GetPoint(distance).y * force; <span class="hljs-comment"><span class="hljs-comment">//1 Vector3 translate = (vert * increment) * Time.deltaTime; //2 Quaternion rotation = Quaternion.Euler(translate); Matrix4x4 m = Matrix4x4.TRS(translate, rotation, Vector3.one); mVertices[i] = m.MultiplyPoint3x4(mVertices[i]);</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Penjelasan Kode: </font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami </font><font style="vertical-align: inherit;">mendapatkan </font><font style="vertical-align: inherit;">posisi kurva pada yang diberikan </font></font><code>distance</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dan kalikan nilainya </font></font><code>y</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dengan </font></font><code>force</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk mendapatkan </font></font><code>increment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat tipe data baru </font></font><code>Vector3</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">untuk menyimpan posisi baru dari vertex saat ini dan terapkan Transformasinya.</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Simpan file dan kembali ke Unity. </font><font style="vertical-align: inherit;">Periksa sifat-sifat komponen </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CustomHeart</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> permainan objek </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anak</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Anda akan melihat daftar drop-down di mana Anda dapat memilih </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis Kurva</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dari daftar turun bawah </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Edit Type</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">pilih </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Add Indices</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> atau </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Remove Indices</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk memperbarui daftar simpul dan bereksperimen dengan pengaturan yang berbeda.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/792/1a7/3b6/7921a73b676b205bd33ec1db076cd4a6.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Untuk melihat hasil terperinci untuk berbagai jenis kurva, masukkan nilai sesuai dengan tangkapan layar: </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e06/ab3/e5d/e06ab3e5d0bfc950be0c6dbc82d36f6e.gif"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk daftar </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis Kurva</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">pilih </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Curve1</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pastikan </font><em><font style="vertical-align: inherit;">Tidak Ada yang</font></em><font style="vertical-align: inherit;"> dipilih </font><font style="vertical-align: inherit;">untuk </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jenis Edit,</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan klik </font><em><font style="vertical-align: inherit;">Mainkan</font></em><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Anda harus melihat jala yang menyimpang ke dalam pola. </font><font style="vertical-align: inherit;">Gulung model untuk melihatnya dalam tampilan samping dan bandingkan hasilnya untuk kedua jenis kurva. </font><font style="vertical-align: inherit;">Di sini Anda melihat bagaimana </font><em><font style="vertical-align: inherit;">Jenis Kurva yang</font></em><font style="vertical-align: inherit;"> dipilih </font><font style="vertical-align: inherit;">memengaruhi offset jala.</font></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><em><font style="vertical-align: inherit;"></font></em><font style="vertical-align: inherit;"></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8e1/f90/4d5/8e1f904d50987247014011ac32261134.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da0/e1a/df4/da0e1adf49f8503188f47826c4079cf1.png"></div><br>  Itu saja!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anda dapat mengklik </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bersihkan Verteks yang Dipilih</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk mereset </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Indeks yang Dipilih</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan bereksperimen dengan pola Anda sendiri. </font><font style="vertical-align: inherit;">Namun jangan lupa bahwa ada faktor lain yang akan mempengaruhi hasil akhir mesh, yaitu:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nilai jari-jari. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Distribusi simpul di daerah tersebut. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Posisi pola dari simpul yang dipilih. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Metode yang dipilih untuk offset. </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ke mana harus pergi selanjutnya? </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">File dari proyek yang sudah selesai ada di </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arsip proyek</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tutorial. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jangan berhenti di situ! </font><font style="vertical-align: inherit;">Cobalah teknik yang lebih canggih yang digunakan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dalam</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tutorial </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">Generasi Prosedural Labirin</font></a><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya harap Anda menikmati tutorial ini dan menemukan informasinya bermanfaat. </font><font style="vertical-align: inherit;">Terima kasih khusus saya mengucapkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jasper Flick</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noopener"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seperti kucing Coding</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> untuk tutorial yang sangat baik nya yang membantu saya merakit sebuah demo untuk proyek saya.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/190/e37/362/190e3736241796c39eac74bbe3ddc86e.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id428796/">https://habr.com/ru/post/id428796/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id428786/index.html">Prosesor kuantum berdasarkan resonansi putaran dan manipulasi dengan sistem singlet-triplet</a></li>
<li><a href="../id428788/index.html">Di bawah naungan Bitfury Clarke - cara kerja chip penambangan baru kami</a></li>
<li><a href="../id428790/index.html">Kami menulis obrolan bot untuk VKontakte di python menggunakan longpoll. Bagian Dua Loop ganda, pengecualian, dan ajaran sesat lainnya</a></li>
<li><a href="../id428792/index.html">Chip Apple T2 baru membuatnya sulit untuk mendengarkan melalui mikrofon bawaan laptop</a></li>
<li><a href="../id428794/index.html">Tinjauan umum tentang metode dasar optimasi matematis untuk masalah dengan kendala</a></li>
<li><a href="../id428798/index.html">Bagaimana cara bertahan hidup pengembang indie. Bagian 2</a></li>
<li><a href="../id428800/index.html">Memasak CSS Sempurna</a></li>
<li><a href="../id428806/index.html">Analisis Cek Konsumen: Apa yang Mereka Beli di Amazon</a></li>
<li><a href="../id428808/index.html">Sedikit kenyamanan dalam kehidupan siswa</a></li>
<li><a href="../id428810/index.html">18 materi tentang teknologi digital dalam audio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>