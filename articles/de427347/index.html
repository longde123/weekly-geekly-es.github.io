<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñïüèø üç® üë©‚Äç‚öñÔ∏è Migration auf die Google Cloud Platform (Google Cloud Platform - GCP) üôÇ üíã üë©üèº‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="[Teil 1 von 2] 





 Der Hike-Blog erschien am 12. Dezember 2012 und es gab damals nur sehr wenige Leser. Bis 2016 haben wir 100 Millionen registrier...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Migration auf die Google Cloud Platform (Google Cloud Platform - GCP)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/427347/"><h2 id="chast-1-iz-2">  [Teil 1 von 2] </h2><br><p><img src="https://habrastorage.org/webt/04/4u/ln/044ulnnljy4wed43fimnnnux-c4.png"></p><br><p>  <i>Der Hike-Blog erschien am 12. Dezember 2012 und es gab damals nur sehr wenige Leser.</i>  <i>Bis 2016 haben wir 100 Millionen registrierte Benutzer und 40 Milliarden monatliche Beitr√§ge erreicht.</i>  <i>Dieses Wachstum hat jedoch das Problem der Vergr√∂√üerung unserer Infrastruktur deutlich gemacht.</i>  <i>Um dies zu vermeiden, brauchten wir eine Hochleistungsplattform zu einem erschwinglichen Preis.</i>  <i>In den Jahren 2016 und 2017 waren wir mit zahlreichen Arbeitsunterbrechungen konfrontiert. Wir mussten dringend etwas dagegen unternehmen, sodass wir verschiedene Optionen in Betracht zogen.</i> <i><br></i> </p><a name="habracut"></a><br><p>  Wir brauchten eine Cloud-Plattform, mit der Anwendungen in einer skalierbaren und zuverl√§ssigen Cloud-Umgebung schnell erstellt, getestet und bereitgestellt werden k√∂nnen.  Auf den ersten Blick scheint es, dass alle wichtigen Cloud-Plattformen in vielerlei Hinsicht √§hnlich sind, aber sie weisen mehrere grundlegende Unterschiede auf. </p><br><p>  Wir werden diese Ver√∂ffentlichung in zwei Teile teilen: </p><br><ol><li>  Grund f√ºr die Wahl von GCP </li><li>  Wechseln Sie ohne Ausfallzeit zu GCP </li></ol><br><h3 id="podtverzhdenie-koncepcii">  Proof of Concept </h3><br><p>  Wir haben zun√§chst die Richtigkeit des Konzepts bewiesen, in dem wir die Kompatibilit√§t der vorhandenen Infrastruktur mit den von der Google Cloud Cloud-Plattform angebotenen Diensten untersucht und Elemente f√ºr die zuk√ºnftige Entwicklung geplant haben. </p><br><h3 id="klyuchevye-oblasti-v-ramkah-podtverzhdeniya-koncepcii">  Schl√ºsselbereiche f√ºr die Konzeptvalidierung: </h3><br><p>  ‚äπ Load Balancer <br>  ‚äπ Rechenmaschine <br>  ‚äπ Netzwerk und Firewalls <br>  ‚äπ Sicherheit <br>  ‚äπ Cloud-Verf√ºgbarkeit <br>  ‚äπ Big Data <br>  ‚äπ Abrechnung </p><br><p>  Die Best√§tigung des Konzepts umfasste das Testen und √úberpr√ºfen der Bandbreite von virtuellen Maschinen / Netzwerk / Load Balancer sowie die Dienste f√ºr Stabilit√§t, Skalierbarkeit, Sicherheit, √úberwachung, Aufladung, Big Data und maschinelles Lernen.  Im Juni 2017 haben wir eine wichtige Entscheidung getroffen, die gesamte Infrastruktur auf die Google Cloud Cloud-Plattform zu migrieren. </p><br><p>  Wir wollten eine Cloud-Plattform w√§hlen, die die unz√§hligen Herausforderungen bew√§ltigen kann: </p><br><h3 id="-balansirovschik-nagruzki">  ‚äπ Load Balancer: </h3><br><p>  Wir hatten viele Probleme mit der Verwaltung lokaler HAProxy-Cluster, um t√§glich zig Millionen aktiver Benutzerverbindungen zu verwalten.  Der Global Load Balancer (GLB) hat viele unserer Probleme gel√∂st. </p><br><p><img src="https://habrastorage.org/webt/ul/y4/ud/uly4udj_yvhdisb_l3yx0gtprry.jpeg"></p><br><p>  Bei Verwendung des globalen GCP-Lastausgleichs kann eine einzelne Anycast-IP-Adresse bis zu 1 Million Anforderungen pro Sekunde an verschiedene GCP-Server wie die Managed Instance Groups (MIG) weiterleiten. Dies erfordert keine Vorw√§rmung.  Unsere Gesamtantwortzeit hat sich um das 1,7- bis 2-fache verbessert, da GLB eine Pool-Implementierung verwendet, mit der Sie den Datenverkehr auf mehrere Quellen verteilen k√∂nnen. </p><br><p><img src="https://habrastorage.org/webt/t-/r0/v1/t-r0v19aon676yqa_8v7j8ijrig.png"></p><br><h3 id="-vychislitelnaya-mashina">  ‚äπ Rechenmaschine: </h3><br><p>  Es gab keine gro√üen Probleme mit den Computern selbst, aber wir brauchten eine Hochleistungsplattform zu einem erschwinglichen Preis.  Der Gesamtdurchsatz von virtuellen Google-Maschinen erh√∂hte sich um das 1,3-1,5-fache, wodurch die Gesamtzahl der ausgef√ºhrten Instanzen virtueller Maschinen verringert werden konnte. </p><br><p>  Redis-Tests wurden mit einem Cluster von 6 Kopien (8 Kerne, jeweils 30 GB) durchgef√ºhrt.  Basierend auf den folgenden Ergebnissen schlie√üen wir, dass GCP f√ºr die meisten REDIS-Operationen bis zu 48% (durchschnittliche) Leistungsverbesserungen und f√ºr bestimmte REDIS-Operationen bis zu 77% bietet. </p><br><p>  Redis-Benchmark -h -p 6379 -d 2048 -r 15 -q -n 10000000 -c 100 <br></p><p><img src="https://habrastorage.org/webt/p1/dy/st/p1dystsrk-udgmr0sm7zrw2hre8.png"></p><br><p>  Der Cloud-Computing-Dienst der Google Compute Engine (GCE) bietet zus√§tzliche Vorteile bei der Verwaltung unserer Infrastruktur, indem er Folgendes verwendet: </p><br><p>  ‚óè <b>Managed Instance Group (MIG):</b> MIG hilft uns, Anwendungsdienste in einer robusten Umgebung mit Mehrzonenfunktionen zu verwalten, anstatt Ressourcen f√ºr jede Zone zuzuweisen.  MIG identifiziert und korrigiert automatisch nicht betriebsbereite Instanzen in einer Gruppe, um einen optimalen Betrieb aller Instanzen sicherzustellen. </p><br><p>  ‚óè <b>Dynamische Migration: Die</b> dynamische Migration hilft bei der Verwaltung von Instanzen virtueller Maschinen, selbst wenn ein Hostsystem ausf√§llt, z. B. beim Aktualisieren von Software oder Hardware.  In Zusammenarbeit mit unserem vorherigen Cloud-Partner erhielten wir eine Benachrichtigung √ºber ein geplantes Wartungsereignis und mussten die virtuelle Maschine stoppen und starten, um zu einer funktionierenden virtuellen Maschine zu wechseln. </p><br><p>  ‚óè <b>Benutzerdefinierte virtuelle Maschinen:</b> Im Rahmen von GCP k√∂nnen wir unsere eigenen virtuellen Maschinen mit der Verarbeitungsleistung des Prozessors und der f√ºr bestimmte Workloads erforderlichen Speichermenge erstellen. </p><br><h3 id="-rabota-v-seti-i-brandmauery">  ‚äπ Netzwerk und Firewalls: </h3><br><p>  Das Verwalten mehrerer Netzwerke und Firewall-Regeln ist nicht einfach und kann riskant sein.  GCP-Netzwerk-VPC ist standardm√§√üig global und bietet interregionale Kommunikation ohne zus√§tzliche Konfiguration und ohne √Ñnderung der Netzwerkbandbreite.  Firewall-Regeln bieten VPC-Flexibilit√§t f√ºr Projekte, die den Namen der Tag-Regel verwenden. </p><br><p>  F√ºr ein Netzwerk mit geringer Latenz und h√∂herer Bandbreite mussten wir teure Instanzen mit einer Bandbreite von 10 Gbit / s ausw√§hlen und erweiterte Netzwerke f√ºr diese Instanzen aktivieren. </p><br><p><img src="https://habrastorage.org/webt/-a/_d/l6/-a_dl6cmk2ty4py7xut5pukhuqy.png"></p><br><h3 id="-bezopasnost">  ‚äπ Sicherheit: </h3><br><p>  Sicherheit ist der wichtigste Aspekt f√ºr jeden Cloud-Dienstanbieter.  In der Vergangenheit war die Sicherheit f√ºr die meisten Dienste entweder nicht verf√ºgbar oder nur eine zus√§tzliche Option. </p><br><p>  Google Cloud-Dienste werden standardm√§√üig verschl√ºsselt.  GCP verwendet mehrere Verschl√ºsselungsstufen, um Daten zu sch√ºtzen.  Die Verwendung mehrerer Verschl√ºsselungsstufen bietet Schutz f√ºr Sicherungsdaten und erm√∂glicht Ihnen die Auswahl des besten Ansatzes basierend auf den Anwendungsanforderungen, z. B. mithilfe des Identity-Aware Proxy-Dienstes und standardm√§√üiger Verschl√ºsselung inaktiver Daten. </p><br><p>  Dar√ºber hinaus schlie√üt GCP die j√ºngsten katastrophalen Ausf√ºhrungsl√ºcken in der √ºberwiegenden Mehrheit der modernen Prozessoren (Meltdown, Spectre).  Google hat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine neue Methode zur bin√§ren √Ñnderung namens Retpoline entwickelt</a> , mit der Sie dieses Problem umgehen und f√ºr Benutzer unsichtbar √Ñnderungen an der gesamten Arbeitsinfrastruktur vornehmen k√∂nnen. </p><br><h3 id="-dostupnost-oblachnyh-resursov">  ‚äπ Cloud-Verf√ºgbarkeit: </h3><br><p>  Die Verf√ºgbarkeit von GCP-Ressourcen unterscheidet sich von der anderer Anbieter von Cloud-L√∂sungen, da die meisten GCP-Ressourcen, einschlie√ülich des Control Panels, entweder zonal oder regional sind.  Wir mussten mehrere VPCs f√ºr einzelne Projekte von separaten Konten aus verwalten, die eine VPC- oder VPN-Verbindung f√ºr eine private Verbindung miteinander verbinden mussten.  Wir mussten auch eine Kopie des Bildes in einem separaten Konto aufbewahren. </p><br><p>  In Google Cloud sind die meisten Ressourcen entweder global oder regional.  Zu diesen Ressourcen geh√∂ren das Control Panel (in dem wir alle virtuellen Maschinen unseres Projekts auf einem Bildschirm sehen k√∂nnen), Disk-Images, Container zum Speichern von Daten (mehrere Regionen innerhalb des Kontinents), VPC (aber separate Subnetze sind regional), globaler Lastausgleich und Ver√∂ffentlichung und Abonnement usw. </p><br><p><img src="https://habrastorage.org/webt/fd/7z/5b/fd7z5ba1snpw1q0emcf_a-se61g.png"></p><br><h3 id="-bolshie-dannye">  ‚äπ Big Data: </h3><br><p>  Wir sind von einer monolithischen, schwer zu verwaltenden Analysekonfiguration zu einem vollst√§ndig verwalteten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">BQ-</a> System <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">√ºbergegangen</a> , was zu Verbesserungen in drei Bereichen f√ºhrte: </p><br><p>  ‚óè Die Abfrageverarbeitungsgeschwindigkeit wurde um das 50-fache erh√∂ht. </p><br><p>  ‚óè Vollst√§ndig verwaltete Datenverarbeitungssysteme mit automatischer Skalierung. </p><br><p>  ‚óè Die Datenverarbeitungszeit wurde von Stunden auf 15 Minuten reduziert. </p><br><h3 id="-tarifikaciya">  ‚äπ Aufladen: </h3><br><p>  Es war schwierig, verschiedene Cloud-Dienstanbieter zu vergleichen, da viele Dienste nicht √§hnlich oder vergleichbar waren, sich f√ºr verschiedene Nutzungsszenarien unterschieden und von bestimmten Nutzungsszenarien abhingen. </p><br><h3 id="preimuschestva-gcp">  GCP-Vorteile: </h3><br><p>  ‚óè <b>Rabatte f√ºr die langfristige Nutzung:</b> Wird mit zunehmender Nutzung virtueller Maschinen angewendet, wenn bestimmte Schwellenwerte erreicht werden.  Wir k√∂nnen automatisch einen Rabatt von bis zu 30% auf Workloads erhalten, die w√§hrend des gr√∂√üten Teils des Abrechnungsmonats ausgef√ºhrt werden. </p><br><p>  ‚óè <b>Abrechnung pro Minute:</b> Bei der Zuweisung einer virtuellen Maschine in GCE wird eine Geb√ºhr f√ºr einen Zeitraum von mindestens 10 Minuten erhoben. Danach beginnt eine Abrechnung pro Minute f√ºr die tats√§chliche Nutzung der virtuellen Maschine.  Dies f√ºhrt zu einer erheblichen Kostenreduzierung, da wir keine volle Stunde bezahlen m√ºssen, selbst wenn die Maschineninstanz weniger als eine Stunde l√§uft. </p><br><p>  ‚óè <b>√úberlegene Hardware, weniger Instanzen:</b> Wir haben festgestellt, dass Sie mit GCP f√ºr fast alle Ebenen und Anwendungen dieselbe Arbeitslast mit derselben Leistung, aber weniger Instanzen ausf√ºhren k√∂nnen. </p><br><p>  ‚óè <b>Engagement statt Redundanz:</b> Ein weiterer Faktor ist der Ansatz von GCP zum Preis von Instanzen virtueller Maschinen.  In AWS besteht die prim√§re M√∂glichkeit, die Kosten einer Instanz einer virtuellen Maschine zu senken, darin, reservierte Instanzen f√ºr einen Zeitraum von 1 bis 3 Jahren zu erwerben.  Wenn die Arbeitslast eine √Ñnderung der Konfiguration der virtuellen Maschine erforderte oder wir diese Instanz nicht ben√∂tigten, mussten wir sie f√ºr reservierte Instanzen zu einem niedrigeren Preis auf dem Markt verkaufen.  GCP verf√ºgt √ºber einen "Commitment Commitment Discount", der f√ºr die Reservierung von Prozessorressourcen und Speicher gilt. Dabei spielt es keine Rolle, welche Instanzen der virtuellen Maschine wir verwenden. </p><br><h3 id="zaklyuchenie">  Fazit: </h3><br><p>  Basierend auf dieser detaillierten Analyse haben wir uns f√ºr den Wechsel zu GCP entschieden und begonnen, an dem √úbergangsschema und den Checklisten zu arbeiten.  Im n√§chsten Artikel werden wir dar√ºber sprechen, was wir bei der Umsetzung dieses Projekts gelernt haben. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de427347/">https://habr.com/ru/post/de427347/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de427337/index.html">Joker-R√§tsel 2018</a></li>
<li><a href="../de427339/index.html">Warum G√∂dels Unvollst√§ndigkeitssatz schwer zu beweisen ist: Die Sache liegt in den Formulierungen und nicht nur im Wesentlichen</a></li>
<li><a href="../de427341/index.html">Lernen Sie, sich zu bedanken: Dies ist das Beste, was Sie anderen geben k√∂nnen, und der beste Weg, um ‚Äûn√ºtzliche soziale Verbindungen‚Äú aufzubauen.</a></li>
<li><a href="../de427343/index.html">VK Mobile Challenge 2018</a></li>
<li><a href="../de427345/index.html">Probleme des modernen Schreibens mathematischer Texte</a></li>
<li><a href="../de427349/index.html">Programmierer f√ºr die neue tinyAVR-Familie basierend auf dem billigen chinesischen Konverter CH340</a></li>
<li><a href="../de427351/index.html">Sicherheitswoche 40: Sicherheitsl√ºcken in CMS Drupal und mehr</a></li>
<li><a href="../de427353/index.html">Drohnen zeigen: wie wir einen Schwarm tanzender Hubschrauber koordiniert haben</a></li>
<li><a href="../de427355/index.html">CJM-Zusammenstellung, wichtige Art Director-F√§higkeiten und Benutzerverst√§ndnis</a></li>
<li><a href="../de427357/index.html">Shader in Unity schreiben. GrabPass, PerRendererData</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>