<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฆ ๐ ๐๏ธ ููุงุณ ุงูููุช ุจุฏูุฉ ุงููุงูู ุซุงููุฉ ๐ ๐ฉ๐ผโ๐ ๐๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุจู ุดูุฑูู ุฌุงุกุช ูุญุธุฉ ุชุงุฑูุฎูุฉ ุจุงููุณุจุฉ ูู. ูู ุชุนุฏ ุฃุฏูุงุช ูุธุงู ุงูุชุดุบูู ุงูููุงุณูุฉ ูููุงุณ ุงูููุช ูุงููุฉ ุจุงููุณุจุฉ ูู. ุงุณุชุบุฑู ุงูุฃูุฑ ููุชูุง ูููุงุณ ุงูุฏูุฉ ุงููุงูููุฉ ูุงูุซุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุงุณ ุงูููุช ุจุฏูุฉ ุงููุงูู ุซุงููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425237/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zx/xf/se/zxxfse_sd5ma4wwfy0u6rilcai8.jpeg" alt="ุงูุตูุฑุฉ"><br><br>  ูุจู ุดูุฑูู ุฌุงุกุช ูุญุธุฉ ุชุงุฑูุฎูุฉ ุจุงููุณุจุฉ ูู.  ูู ุชุนุฏ ุฃุฏูุงุช ูุธุงู ุงูุชุดุบูู ุงูููุงุณูุฉ ูููุงุณ ุงูููุช ูุงููุฉ ุจุงููุณุจุฉ ูู.  ุงุณุชุบุฑู ุงูุฃูุฑ ููุชูุง ูููุงุณ ุงูุฏูุฉ ุงููุงูููุฉ ูุงูุซุงูููุฉ. <br><br>  ูุฑุฑุช ุฃู ุฃูุชุจ ููุชุจุฉ ูุญู ูุฐู ุงููุดููุฉ.  ูููููุฉ ุงูุฃููู ุ ุจุฏุง ุฃูู ูุง ููุฌุฏ ุดูุก ุฎุงุต ููููุงู ุจู.  ูููู ุนูุฏ ุงููุญุต ุงูุฏููู ุ ููุง ูู ุงูุญุงู ุฏุงุฆููุง ุ ุงุชุถุญ ุฃู ููุงู ุงูุนุฏูุฏ ูู ุงููุดุงูู ุงููุซูุฑุฉ ููุงูุชูุงู ุงูุชู ูุฌุจ ูุนุงูุฌุชูุง.  ูู ูุฐู ุงูููุงูุฉ ุ ุณุฃุชุญุฏุซ ุนู ุงููุดุงูู ูููู ุชู ุญููุง. <br><br>  ูุธุฑูุง ูุฃูู ููููู ููุงุณ ุงูุนุฏูุฏ ูู ุฃููุงุน ุงูููุช ุงููุฎุชููุฉ ุนูู ุฌูุงุฒ ุงูููุจููุชุฑ ุ ูุณุฃูุถุญ ุนูู ุงูููุฑ ุฃููุง ุณูุชุญุฏุซ ููุง ุนู "ุงูููุช ุจูุงุณุทุฉ ุณุงุนุฉ ุงูุฅููุงู".  ุฃู ููุช ุณุงุนุฉ ุงูุญุงุฆุท.  ุฅูู ุงูููุช ุงููุนูู ุ ุงูููุช ุงููููุถู ุ ุฅูุฎ.  ุฃู ููุช "ุจุดุฑู" ุจุณูุท ููุชุดูู ูู ุจุฏุงูุฉ ุงููููุฉ ููุชููู ุนูุฏ ุงูููุงูุฉ. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ูููุฑูุซุงููุฉ - ุฅูู ุงูุฃุจุฏ ุชูุฑูุจุง </h3><br>  ุงุนุชุงุฏ ูุทูุฑู ุงูุฃูุธูุฉ ุนุงููุฉ ุงูุฃุฏุงุก ุนูู ูุฏู ุงูุณููุงุช ุงูููููุฉ ุงููุงุถูุฉ ุนูู ุงููุทุงู ุงูุฒููู ูููููุฑูุซุงููุฉ.  ุจุงููููุฑูุซุงููุฉ ุ ููููู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ูุญุฑู ุฃูุฑุงุต NVMe.  ุจุงููููุฑูุซุงููุฉ ุ ูููู ุฅุฑุณุงู ุงูุจูุงูุงุช ุนุจุฑ ุงูุดุจูุฉ.  ููุณ ููุฌููุน ุจุงูุทุจุน ุ ูููู ูุดุจูุฉ InifiniBand - ุจุณูููุฉ. <br><br>  ูู ุงูููุช ููุณู ุ ูุงู ูููููุฑูุซุงููุฉ ุฃูุถูุง ุจููุฉ.  ูุชููู ููุฏุณ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุงููุงูู ูู ุงูุนุฏูุฏ ูู ููููุงุช ุงูุจุฑุงูุฌ ูุงูุฃุฌูุฒุฉ.  ุงูุชุฃุฎูุฑ ุงูุฐู ูุญุฏุซู ุงูุจุนุถ ูููู ููุน ุนูู ูุณุชูู ูุง ุฏูู ุงูุซุงููุฉ. <br><br>  ูููุงุณ ุงูุชุฃุฎูุฑุงุช ุจูุฐุง ุงูุญุฌู ุ ูู ุชุนุฏ ุฏูุฉ ุงููููุฑูุซุงููุฉ ูุงููุฉ.  ููุน ุฐูู ุ ููุณุช ุงูุฏูุฉ ููุท ูููุฉ ุ ูููู ุฃูุถูุง ุงููููุงุช ุงูุนุงูุฉ ูููุงุณ ุงูููุช.  ุฅุฑุฌุงุน ุงุณุชุฏุนุงุก ูุธุงู clock_gettime () Linux ุงูููุช ุจุฏูุฉ nanosecond.  ุนูู ุฌูุงุฒ ููุฌูุฏ ูู ูุชูุงูู ูุฏู (Intelยฎ Xeonยฎ CPU E5-2630 v2 @ 2.60GHz) ุ ุชูุชูู ูุฐู ุงูููุงููุฉ ูู ุญูุงูู 120 ูุงูู ุซุงููุฉ.  ุดุฎุตูุฉ ุฌูุฏุฉ ุฌุฏุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุชุนูู clock_gettime () ุจุดูู ูุชููุน.  ูุฐุง ูุณูุญ ูู ุฃู ุชุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุงููููุงุช ุงูุนุงูุฉ ูุฏุนูุชู ูุฃุฎุฐ ุงูููุงุณุงุช ูู ุงููุงูุน ุจุฏูุฉ ุชุฑุชูุจ ุนุดุฑุงุช ุนุดุฑุงุช ุงููุงูู ุซุงููุฉ.  ููุน ุฐูู ุ ุฏุนููุง ููุชุจู ุงูุขู ูุฐูู.  ูููุงุณ ุงููุงุตู ุงูุฒููู ุ ุชุญุชุงุฌ ุฅูู ุฅุฌุฑุงุก ููุงููุชูู ูู ูุฐุง ุงููุจูู: ูู ุงูุจุฏุงูุฉ ููู ุงูููุงูุฉ.  ุนูู ุณุจูู ุงููุซุงู  ูุถุงุก 240 ูุงููุซุงููุฉ.  ุฅุฐุง ุชู ููุงุณ ูุชุฑุงุช ุฒูููุฉ ูุชุจุงุนุฏุฉ ุจุดูู ููุซู ุจุชุฑุชูุจ 1-10 ูููุฑููุชุฑ ุ ูุฅู ุนูููุฉ ุงูููุงุณ ููุณูุง ูู ุจุนุถ ุงูุญุงูุงุช ุณุชุดูู ุงูุนูููุฉ ุงููุฑุตูุฏุฉ ุจุดูู ูุจูุฑ. <br><br>  ููุฏ ุจุฏุฃุช ูุฐุง ุงููุณู ุจููููุฉ ุชุณุงุฑุน ููุฏุณ IO ูู ุงูุณููุงุช ุงูุฃุฎูุฑุฉ.  ูุฐุง ุฌุฏูุฏ ุ ููููู ุจุนูุฏ ุนู ุงูุณุจุจ ุงููุญูุฏ ูุฑุบุจุชู ูู ููุงุณ ุงูููุช ุจุณุฑุนุฉ ูุจุฏูุฉ.  ูุงูุช ูุซู ูุฐู ุงูุญุงุฌุฉ ุฏุงุฆูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ูุงู ููุงู ุฏุงุฆููุง ุฑูุฒ ุฃุฑุฏุช ุชุณุฑูุน ุฏูุฑุฉ ุณุงุนุฉ ูุงุญุฏุฉ ุนูู ุงูุฃูู ูู ุงููุนุงูุฌ.  ุฃู ูุซุงู ุขุฎุฑ ุ ูู ุงูููุงูุฉ ุงูุฃุตููุฉ ุญูู ุซุบุฑุฉ Spectre ุงููุซูุฑุฉ: <br><br><img src="https://habrastorage.org/webt/db/5a/7o/db5a7oldvzrcqfi_ymamg4qzscu.jpeg" alt="ุงูุตูุฑุฉ"><br><br>  ููุง ุ ุชููุณ ุงูุฃุณุทุฑ 72-74 ููุช ุชูููุฐ ุนูููุฉ ูุตูู ูุงุญุฏุฉ ููุฐุงูุฑุฉ.  ุตุญูุญ ุฃู ุณุจููุชุฑ ูุง ููุชู ุจุงูุซูุงูู ุงููุงูููุฉ.  ูููู ููุงุณ ุงูููุช ุจู "ุงูุจุจุบุงูุงุช".  ุณูุนูุฏ ุฅูู ุงูุจุจุบุงูุงุช ูุงูุซูุงูู. <br><br><h3 style=";text-align:right;direction:rtl">  ุนุฏุงุฏ ุทุงุจุน ุฒููู </h3><br>  ููุชุงุญ ููุงุณ ุงูููุช ุงูุณุฑูุน ูุงูุฏููู ูู ุนุฏุงุฏ ูุนุงูุฌ ุฏููู ุฎุงุต.  ุนุงุฏุฉ ูุง ูุชู ุชุฎุฒูู ูููุฉ ูุฐุง ุงูุนุฏุงุฏ ูู ุณุฌู ูููุตู ููููู ุงููุตูู ุฅููู ุนุงุฏุฉู - ูููู ููุณ ุฏุงุฆููุง - ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู.  ูู ุงูุจูู ุงููุฎุชููุฉ ุ ูุณูู ุงูุนุฏุงุฏ ุจุดูู ูุฎุชูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  x86 ุนุฏุงุฏ ุฎุชู ุงูููุช </li><li style=";text-align:right;direction:rtl">  ุชุณุฌูู ูุงุนุฏุฉ ุฒูููุฉ ุนูู PowerPC </li><li style=";text-align:right;direction:rtl">  ุนุฏุงุฏ ุงูููุช ุงููุงุตู ุนูู Itanium </li><li style=";text-align:right;direction:rtl">  ุงูุฎ. </li></ol><br>  ุฃุฏูุงู ุณุฃุณุชุฎุฏู ุฏุงุฆููุง ุงุณู "ุนุฏุงุฏ ุงูุทุงุจุน ุงูุฒููู" ุฃู TSC ุ ุนูู ุงูุฑุบู ูู ุฃููู ูู ุงููุงูุน ุณุฃุถุน ูู ุงุนุชุจุงุฑู ุฃู ุนุฏุงุฏ ูู ูุฐุง ุงููุจูู ุ ุจุบุถ ุงููุธุฑ ุนู ุงูููุฏุณุฉ ุงููุนูุงุฑูุฉ. <br><br>  ูุฑุงุกุฉ ูููุฉ TSC ุนุงุฏุฉ - ูููู ูุฑุฉ ุฃุฎุฑู ููุณ ุฏุงุฆููุง - ูููู ูุน ุชุนูููุงุช ูุงุญุฏุฉ.  ููุง ูุซุงู ูู x86.  ุจุงููุนูู ุงูุฏููู ูููููุฉ ุ ูุฐู ููุณุช ุชุนูููุงุช ุชุฌููุน ูููุฉ ุ ููู ูุฌูุน ุบูู ุงููุถููู: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> eax, edx; __asm__ __volatile__( <span class="hljs-string"><span class="hljs-string">"rdtsc"</span></span> : <span class="hljs-string"><span class="hljs-string">"=a"</span></span> (eax), <span class="hljs-string"><span class="hljs-string">"=d"</span></span> (edx));</code> </pre> <br>  ุชุถุน ุชุนูููุงุช rdtsc ูุตููู 32 ุจุช ูู ุณุฌู TSC ูู ุณุฌูุงุช eax ู edx.  ูู ุจูููุง ุ ููููู "ูุตู" ูููุฉ ูุงุญุฏุฉ 64 ุจุช. <br><br>  ุฃูุงุญุธ ูุฑุฉ ุฃุฎุฑู: ูููู ุงุณุชุฏุนุงุก ูุฐู ุงูุชุนูููุงุช (ููุง ุดุงุจู) ูู ูุนุธู ุงูุญุงูุงุช ูุจุงุดุฑุฉ ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู.  ูุง ุชูุฌุฏ ููุงููุงุช ูุธุงู.  ุงููููุงุช ุงูุนุงูุฉ ุงูุฏููุง. <br><br>  ูุง ุงูุฐู ูุฌุจ ูุนูู ุงูุขู ูููุงุณ ุงูููุชุ <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชูููุฐ ุฃุญุฏ ูุฐู ุงูุชุนูููุงุช ูู ุจุฏุงูุฉ ุงููุชุฑุฉ ุงูุฒูููุฉ ุงูุชู ุชูููุง.  ุชุฐูุฑ ูููุฉ ุงูุนุฏุงุฏ </li><li style=";text-align:right;direction:rtl">  ุชูููุฐ ุชุนูููุงุช ูู ูุฐุง ุงููุจูู ูู ุงูููุงูุฉ.  ูุนุชูุฏ ุฃู ูููุฉ ุงูุนุฏุงุฏ ูู ุงูุชุนูููุงุช ุงูุฃููู ุฅูู ุงูุซุงููุฉ ุณุชุฒุฏุงุฏ.  ุฎูุงู ุฐูู ุ ููุงุฐุง ูู ูุทููุจุ  ุชุฐูุฑ ุงููููุฉ ุงูุซุงููุฉ </li><li style=";text-align:right;direction:rtl">  ูุญู ูุนุชุจุฑ ุงููุฑู ุจูู ุงููููุชูู ุงููุฎุฒูุชูู.  ูุฐุง ููุชูุง </li></ol><br>  ูุจุฏู ุจุณูุทุง ุ ูููู ... <br><br>  ูุชู ุงูุชุนุจูุฑ ุนู ุงูููุช ุงูุฐู ุชู ููุงุณู ุจูุงุณุทุฉ ุงูุฅุฌุฑุงุก ุงูููุถุญ ูู "ุงูุจุจุบุงูุงุช".  ููุณ ูู ุซูุงู.  ููู ูู ุจุนุถ ุงูุฃุญูุงู ุชููู ุงูุจุจุบุงูุงุช ุจุงูุถุจุท ูุง ุชุญุชุงุฌู.  ููุงู ุญุงูุงุช ุนูุฏูุง ูุง ุชููู ุงูููู ุงููุทููุฉ ูููุชุฑุงุช ุงูุฒูููุฉ ูููุฉ ุ ูููู ููู ุชุฑุชุจุท ุงููุชุฑุงุช ุงูุฒูููุฉ ุงููุฎุชููุฉ ุจุจุนุถูุง ุงูุจุนุถ.  ููุถุญ ูุซุงู ุณุจููุชุฑ ุฃุนูุงู ูุฐุง ุงููููู ุจุงูุถุจุท.  ูุง ููู ูุฏุฉ ูู ุงููุตูู ุฅูู ุงูุฐุงูุฑุฉ ุงููุฑุฏูุฉ.  ูู ุงูููู ููุท ุฃู ูุชู ุชูููุฐ ุงูููุงููุงุช ุฅูู ุจุนุถ ุงูุนูุงููู ุจุดูู ุฃุณุฑุน ุจูุซูุฑ ูู ุบูุฑูุง (ุงุนุชูุงุฏูุง ุนูู ูุง ุฅุฐุง ูุงูุช ุงูุจูุงูุงุช ูุฎุฒูุฉ ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฃู ุงูุฐุงูุฑุฉ ุงูุฑุฆูุณูุฉ). <br><br>  ูููู ูุงุฐุง ูู ูู ุชูู ููุงู ุญุงุฌุฉ ุฅูู ุงูุจุจุบุงูุงุช ุ ููู ุงูุซูุงูู / ุงููููุฑูุซุงููุฉ / ุงููุงูู ุซุงููุฉ ุ ููุง ุฅูู ุฐููุ  ูููู ุชูููุฒ ุญุงูุชูู ูุฎุชููุชูู ุฌููุฑููุง ููุง: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงููุซุงููุฉ ูุทููุจุฉ ุ ูููู ุจุนุฏ ุฐูู.  ุฃู ุฃูู ูุฌูุฒ ุฃููุงู ุฅุฌุฑุงุก ุฌููุน ุงูููุงุณุงุช ุงููุงุฒูุฉ ูู ุงูุจุจุบุงูุงุช ูุชุฎุฒูููุง ูู ููุงู ูุง ููุฒูุฏ ูู ุงููุนุงูุฌุฉ (ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูุฐุงูุฑุฉ).  ูููุท ุจุนุฏ ุงูุชูุงู ุงูููุงุณุงุช ุ ูุชู ุชุญููู ุงูุจุจุบุงูุงุช ุงููุฌูุนุฉ ุจุจุทุก ุฅูู ุซูุงูู </li><li style=";text-align:right;direction:rtl">  ูุงููุซุงููุฉ ูุทููุจุฉ "ุนูู ุงูุทุงูุฑ".  ุนูู ุณุจูู ุงููุซุงู ุ ุชุญุชูู ุนูููุฉ ุงูููุงุณ ุงูุฎุงุตุฉ ุจู ุนูู ููุน ูู "ุงููุณุชููู" ุงูุฐู ูุง ุชุชุญูู ููู ูุงูุฐู ูุชููุน ููุชูุง ุจุชูุณูู "ุจุดุฑู" </li></ol><br>  ุงูุญุงูุฉ ุงูุฃููู ุจุณูุทุฉ ุ ูุงูุซุงููุฉ - ุชุชุทูุจ ุงูุญููุฉ.  ูุฌุจ ุฃู ูููู ุงูุชุญููู ูุนุงูุงู ูุฏุฑ ุงูุฅููุงู.  ุฅุฐุง ูุงูุช ุชุณุชููู ุงููุซูุฑ ูู ุงูููุงุฑุฏ ุ ูููู ุฃู ุชุดูู ุฅูู ุญุฏ ูุจูุฑ ุนูููุฉ ุงูููุงุณ.  ุณูุชุญุฏุซ ุนู ุงูุชุญููู ุงููุนุงู ุฃุฏูุงู.  ููุง ูููุง ุญุชู ุงูุขู ุจุชุญุฏูุฏ ูุฐู ุงููุดููุฉ ูุงูุงูุชูุงู ุฅูู ูุดููุฉ ุฃุฎุฑู. <br><br>  ุนุฏุงุฏุงุช ุงูุทุงุจุน ุงูุฒููู ููุณุช ุจุณูุทุฉ ููุง ููุฏ.  ูู ุจุนุถ ุงูุจูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุณ ูู ุงููุถููู ุฃู ูุชู ุชุญุฏูุซ TSC ุนูู ุชุฑุฏุฏ ุนุงู.  ุฅุฐุง ุชู ุชุญุฏูุซ TSC ุ ุนูู ุณุจูู ุงููุซุงู ุ ุจูุฌุฑุฏ ูู ูููุฑูุซุงููุฉ ุ ููู ูููู ูู ุงููููู ุฅุตูุงุญ ุงููุงูู ุซุงููุฉ ูุนู. </li><li style=";text-align:right;direction:rtl">  ูุฏ ูุฎุชูู ุชูุฑุงุฑ ุชุญุฏูุซ TSC ุจูุฑูุฑ ุงูููุช </li><li style=";text-align:right;direction:rtl">  ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ ุงูููุฌูุฏุฉ ูู ุงููุธุงู ุ ูููู ุชุญุฏูุซ TSC ุจุชุฑุฏุฏุงุช ูุฎุชููุฉ </li><li style=";text-align:right;direction:rtl">  ูุฏ ูููู ููุงู ุชุญูู ุจูู TSCs ููููุชุฉ ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ </li></ol><br>  ููุง ูุซุงู ููุถุญ ุงููุดููุฉ ุงูุฃุฎูุฑุฉ.  ูููุชุฑุถ ุฃู ูุฏููุง ูุธุงููุง ูุญุชูู ุนูู ูุญุฏุชู CPU: CPU1 ู CPU2.  ุงูุชุฑุถ ุฃู TSC ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุฃููู ูุฑุงุก ุงูุซุงููุฉ ุจูุงุณุทุฉ ุนุฏุฏ ุนูุงูุงุช ุงูุชุฌุฒุฆุฉ ุ ููู ูุง ูุนุงุฏู 5 ุซูุงู.  ุงูุชุฑุถ ุฃูุถูุง ุฃูู ุชู ุฅุทูุงู ุชูุงุฑ ูู ุงููุธุงู ุงูุฐู ูููุณ ููุช ุงูุญุณุงุจุงุช ุ ููู ูุง ูููู ุจู ูู ููุณู.  ููููุงู ุจุฐูู ุ ููุฑุฃ ุงูุฏูู ุฃููุงู ูููุฉ TSC ุ ุซู ูููู ุจุงูุญุณุงุจ ุ ุซู ููุฑุฃ ูููุฉ TSC ุงูุซุงููุฉ.  ุฅุฐุง ุจูู ูุคุดุฑ ุงูุชุฑุงุจุท ุทูุงู ุญูุงุชู ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุงุญุฏุฉ ููุท - ุนูู ุฃู - ููุง ุชูุฌุฏ ูุดุงูู.  ูููู ูุงุฐุง ูู ุจุฏุฃ ูุคุดุฑ ุงูุชุฑุงุจุท ุนูู CPU1 ุ ูููุงุณ ูููุฉ TSC ุงูุฃููู ููุงู ุ ุซู ูู ููุชุตู ุงูุญุณุงุจุงุช ุชู ูููู ุจูุงุณุทุฉ ูุธุงู ุงูุชุดุบูู ุฅูู CPU2 ุ ุญูุซ ูุฑุฃ ูููุฉ TSC ุงูุซุงููุฉุ  ูู ูุฐู ุงูุญุงูุฉ ุ ุณุชุจุฏู ุงูุญุณุงุจุงุช ุฃุทูู ุจุฎูุณ ุซูุงูู ููุง ูู ุนููู ุจุงููุนู. <br><br>  ูุธุฑูุง ูููุดููุงุช ุงููุฐููุฑุฉ ุฃุนูุงู ุ ูุง ูููู ูู TSC ุฃู ูุนูู ููุตุฏุฑ ููุซูู ููููุช ูู ุจุนุถ ุงูุฃูุธูุฉ.  ููุน ุฐูู ุ ูู ุฃูุธูุฉ ุฃุฎุฑู "ุชุนุงูู" ูู ููุณ ุงููุดุงูู ุ ูุง ูุฒุงู ูู ุงููููู ุงุณุชุฎุฏุงู TSC.  ุฃุตุจุญ ุฐูู ููููุงู ุจูุถู ุงูููุฒุงุช ุงููุนูุงุฑูุฉ ุงูุฎุงุตุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ููุฌูุงุฒ ุชูููุฏ ููุงุทุนุฉ ุฎุงุตุฉ ูู ูู ูุฑุฉ ูุชุบูุฑ ูููุง ุงูุชุฑุฏุฏ ุงูุฐู ูุชู ููู ุชุญุฏูุซ TSC.  ูู ููุณ ุงูููุช ุ ุชููุฑ ุงููุนุฏุงุช ุงููุฑุตุฉ ููุนุฑูุฉ ุงูุชุฑุฏุฏ ุงูุญุงูู.  ุจุฏูุงู ูู ุฐูู ุ ูููู ูุถุน ูุนุฏู ุชุญุฏูุซ TSC ุชุญุช ุณูุทุฑุฉ ูุธุงู ุงูุชุดุบูู (ุฑุงุฌุน "Power ISA ุงูุฅุตุฏุงุฑ 2.06 ุงููุฑุงุฌุนุฉ B ุ ุงููุชุงุจ ุงูุซุงูู ุ ุงููุตู 5") </li><li style=";text-align:right;direction:rtl">  ุฅูู ุฌุงูุจ ูููุฉ TSC ุ ูููู ููุฌูุงุฒ ุฃูุถูุง ุชูููุฑ ูุนุฑู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุชู ุชุชู ูุฑุงุกุฉ ูุฐู ุงููููุฉ ุนูููุง (ุฑุงุฌุน ุชุนูููุงุช Intel RDTSCP ุ "ุฏููู ูุทูุฑู ุจุฑุงูุฌ Intel 64 ู IA-32 ูููุนูุงุฑููู" ุ ุงููุฌูุฏ 2) </li><li style=";text-align:right;direction:rtl">  ูู ุจุนุถ ุงูุฃูุธูุฉ ุ ููููู ุถุจุท ูููุฉ TSC ููู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ (ุงูุธุฑ ุชุนูููุงุช Intel WRMSR ูุชุณุฌูู IA32_TIME_STAMP_COUNTER ุ "ุฏููู ูุทูุฑู ุจุฑุงูุฌ Intel 64 ู IA-32 ูููุนูุงุฑููู" ุ ุงููุฌูุฏ 3) </li></ol><br>  ุจุดูู ุนุงู ุ ูุฅู ููุถูุน ููููุฉ ุชูููุฐ ุนุฏุงุฏุงุช ุงูููุช ุนูู ุงูููุงูู ุงููุฎุชููุฉ ูู ุฃูุฑ ุฑุงุฆุน ููุงุณุน ุงููุทุงู.  ุฅุฐุง ูุงู ูุฏูู ููุช ูุงูุชูุงู ุ ุฃูุตู ุจุงูุบูุต.  ูู ุจูู ุฃููุฑ ุฃุฎุฑู ุ ุณุชุชุนูู ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฃู ุจุนุถ ุงูุฃูุธูุฉ ุชุณูุญ ูู ุจุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู TSC ูููู ุฃู ูุนูู ููุตุฏุฑ ููุซูู ููููุช ุจุฑูุฌูุงู. <br><br>  ูุฐุง ุ ููุงู ุงูุนุฏูุฏ ูู ุงูุชุทุจููุงุช ุงููุนูุงุฑูุฉ ูู TSC ุ ููู ูููุง ุฎุตุงุฆุตู ุงูุฎุงุตุฉ.  ูููู ูู ุงููุซูุฑ ููุงูุชูุงู ุฃูู ุชู ุชุฃุณูุณ ุงุชุฌุงู ุนุงู ูู ูู ุญุฏููุฉ ุงูุญููุงูุงุช ูุฐู.  <b>ุชุณุนู ุงูุฃุฌูุฒุฉ ูุฃูุธูุฉ ุงูุชุดุบูู ุงูุญุฏูุซุฉ ูุถูุงู ูุง</b> ููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููู ุจุฑูุงูุฌ TSC ุจุชุญุฏูุฏ ููุณ ุงูุชุฑุฏุฏ ุนูู ูู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูู ุงููุธุงู </li><li style=";text-align:right;direction:rtl">  ูุง ูุชุบูุฑ ูุฐุง ุงูุชุฑุฏุฏ ูู ุงูููุช ุงูููุงุณุจ </li><li style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ุชุญูู ุจูู TSCs ููููุชุฉ ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ </li></ol><br>  ุนูุฏ ุชุตููู ููุชุจุชู ุ ูุฑุฑุช ุงููุถู ูุฏููุง ูู ูุฐู ุงููุฑุถูุฉ ุ ูููุณ ูู ุฎููุต ุชุทุจููุงุช ุงูุฃุฌูุฒุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงูููุชุจุฉ </h3><br>  ูู ุฃุจุฏุฃ ูู ูุถุน ุดุฑุงุฆุญ ุงูุฃุฌูุฒุฉ ููุฌููุนุฉ ูู ุงูููุงูู ุงููุฎุชููุฉ.  ุจุฏูุงู ูู ุฐูู ุ ูุฑุฑุช ุฃู ููุชุจุชู ุณุชููู ููุฌูุฉ ูุญู ุงูุงุชุฌุงู.  ูุฏููุง ุชุฑููุฒ ุชุฌุฑูุจู ุจุญุช: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุณูุญ ุจุงูุชุญูู ุงูุชุฌุฑูุจู ูู ููุซูููุฉ TSC ููุตุฏุฑ ุฒููู </li><li style=";text-align:right;direction:rtl">  ูุณูุญ ูู ุฃูุถูุง ุจุญุณุงุจ ุงููุนููุงุช ุงููุทููุจุฉ ุชุฌุฑูุจููุง ูุชุญููู ุงููุฑุงุฏ ุจุณุฑุนุฉ ุฅูู ูุงูู ุซุงููุฉ </li><li style=";text-align:right;direction:rtl">  ุจุทุจูุนุฉ ุงูุญุงู ุ ุชููุฑ ุงูููุชุจุฉ ูุงุฌูุงุช ููุงุฆูุฉ ููุฑุงุกุฉ TSC ูุชุญููู ุงููุฑุงุฏ ุฅูู ูุงูู ุซุงููุฉ "ุนูู ุงูุทุงูุฑ" </li></ol><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุฏ ุงูููุชุจุฉ ูุชุงุญ ููุง.</a>  ุณูุชู ุชุฌููุนู ูุชูููุฐู ููุท ุนูู Linux. <br><br>  ูู ุงูููุฏ ุ ููููู ุงูุงุทูุงุน ุนูู ุชูุงุตูู ุชูููุฐ ุฌููุน ุงูุทุฑู ุ ูุงูุชู ุณูุชู ููุงูุดุชูุง ูุงุญููุง. <br><br><h3 style=";text-align:right;direction:rtl">  ุชูููู ููุซูููุฉ TSC </h3><br>  ุชููุฑ ุงูููุชุจุฉ ูุงุฌูุฉ ุชุนูุฏ ุชุตููููู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃูุตู ุชุญูู ุจูู ุงูุนุฏุงุฏุงุช ุงูุชู ุชูุชูู ุฅูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ.  ุชุนุชุจุฑ ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุชุงุญุฉ ููุนูููุฉ ููุท.  ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฐุง ูุงูุช ุงูุนูููุฉ ุชุญุชูู ุนูู ุซูุงุซุฉ ูุญุฏุงุช ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุชุงุญุฉ ุ ููู ููุณ ุงูููุช ูููู TSC ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุฐู 50 ุ 150 ุ 20 ุ ูุฅู ุงูุญุฏ ุงูุฃูุตู ููุชุญูู ุณูููู 150-20 = 130.  ุจุทุจูุนุฉ ุงูุญุงู ุ ูู ุชุชููู ุงูููุชุจุฉ ูู ุงูุญุตูู ุนูู ูููุฉ ุญููููุฉ ุญููููุฉ ุชุฌุฑูุจููุง ุ ูููููุง ุณุชุนุทู ุชูุฏูุฑูุง ููุงุณุจ ูุฐุง ุงูุชุญูู.  ูุงุฐุง ุชูุนู ุจุนุฏ ุฐูู ูุน ุงูุชููููุ  ููู ุชุณุชุนููุ  ูุฐุง ูุญู ุจุงููุนู ุฑูุฒ ุงูุนููู.  ููู ุงููุนูู ูู ุชูุฑูุจุง ูุง ููู.  ุงูุญุฏ ุงูุฃูุตู ููุชุญูู ูู ุงููููุฉ ุงููุตูู ุงูุชู ูููู ูู ุฎูุงููุง ุชุดููู ุงูุจุนุฏ ุงูุฐู ูููู ุจู ุฑูุฒ ุงูุนููู.  ูููุชุฑุถ ุ ูู ูุซุงููุง ูุน ุซูุงุซุฉ ูุญุฏุงุช ูุนุงูุฌุฉ ูุฑูุฒูุฉ ุ ุฃู ููุฏ ุงูุนููู ุจุฏุฃ ูู ููุงุณ ุงูููุช ุนูู CPU3 (ุญูุซ ูุงู TSC 20) ุ ูุงูุชูู ุนูู CPU2 (ุญูุซ ูุงู TSC 150).  ุงุชุถุญ ุฃู 130 ุนูุงูุฉ ุฅุถุงููุฉ ุณูู ุชุชุณูู ุฅูู ุงููุชุฑุฉ ุงูุฒูููุฉ ุงูููุงุณุฉ.  ูุฃุจุฏุง ูุฑุฉ ุฃุฎุฑู.  ุงููุฑู ุจูู CPU1 ู CPU2 ุณูููู 100 ุนูุงูุฉ ููุท.  ุจุนุฏ ุชูุฏูุฑ 130 ุนูุงูุฉ (ูู ุงููุงูุน ุ ุณูููู ุฃูุซุฑ ุชุญูุธูุง) ุ ูููู ููุนููู ุฃู ููุฑุฑ ูุง ุฅุฐุง ูุงูุช ูููุฉ ุงูุชุดููู ูุฐู ุชูุงุณุจู ุฃู ูุง </li><li style=";text-align:right;direction:rtl">  ูู ููู TSC ุชูุงุณ ุจุงูุชุณูุณู ุนูู ููุณ ุฃู ุฒูุงุฏุฉ ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ.  ูุง ูู ุงูููุฑุฉ.  ูููุชุฑุถ ุฃู ูุฏููุง ุงูุนุฏูุฏ ูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ุงูุชุฑุถ ุฃู ุณุงุนุชูู ูุชุฒุงููุฉ ูุชุฏู ูู ููุณ ุงูุชุฑุฏุฏ.  ุซู ุฅุฐุง ููุช ุจููุงุณ ุงูููุช ูุฃูู ูุฑุฉ ุนูู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ูุงุญุฏุฉ ุ ุซู ูู ุจููุงุณูุง ูุฑุฉ ุฃุฎุฑู - ุจุงููุนู ุนูู ุฃู ูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุชุงุญุฉ - ููุฌุจ ุฃู ูููู ุงูุฑูู ุงูุซุงูู ุฃูุจุฑ ูู ุงูุฑูู ุงูุฃูู. <br><br>  ุณุฃุฏุนู ูุฐุง ุงูุชูุฏูุฑ ุฃุฏูุงู ุชูุฏูุฑ ุฑุชุงุจุฉ TSC <br></li></ol><br>  ุงูุขู ุฏุนููุง ูุฑู ููู ูููููุง ุงูุญุตูู ุนูู ุงูุชูุฏูุฑ ุงูุฃูู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃุญุฏ ุงููุนุงูุฌุงุช ุงููุชุงุญุฉ ููุนูููุฉ "ุฃุณุงุณู" </li><li style=";text-align:right;direction:rtl">  ุซู ูุชู ูุฑุฒ ุฌููุน ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุฃุฎุฑู ุ ููุชู ุญุณุงุจ ุงูุชุญูู ููู ูููุง: <code>TSC___CPU โ TSC___CPU</code> .  ูุชู ุฐูู ุนูู ุงููุญู ุงูุชุงูู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃ) ูุชู ุฃุฎุฐ ุซูุงุซ ููู ููุงุณุฉ ุจุงูุชุณูุณู (ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู!): <code>TSC_base_1, TSC_current, TSC_base_2</code> .  ููุง ุ ูุดูุฑ ุงูุชูุงุฑ ุฅูู ุฃู ุงููููุฉ ุชู ููุงุณูุง ุนูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงูุญุงููุฉ ุ ูุงููุงุนุฏุฉ ุนูู ุงููุงุนุฏุฉ </li><li style=";text-align:right;direction:rtl">  ุจ) ูุฌุจ ุฃู ูููู ุงูุชุญูู <code>TSC___CPU โ TSC___CPU</code> ูู ุงููุงุตู ุงูุฒููู <code>[TSC_current โ TSC_base_2, TSC_current โ TSC_base_1]</code> .  ูุฐุง ุนูู ุงูุชุฑุงุถ ุฃู TSC ุชุฏู ุนูู ููุณ ุงูุชุฑุฏุฏ ุนูู ูู ูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ. </li><li style=";text-align:right;direction:rtl">  ุฌ) ูุชู ุชูุฑุงุฑ ุงูุฎุทูุงุช ุฃ) -ุจ) ุนุฏุฉ ูุฑุงุช.  ูุชู ุญุณุงุจ ุชูุงุทุน ุฌููุน ุงูููุงุตู ุงูุฒูููุฉ ุงูุชู ุชู ุงูุญุตูู ุนูููุง ูู ุงูุฎุทูุฉ ุจ).  ูุคุฎุฐ ุงููุงุตู ุงูุฒููู ุงููุงุชุฌ <code>TSC___CPU โ TSC___CPU</code> ููุชุญูู <code>TSC___CPU โ TSC___CPU</code> </li></ul><br></li><li style=";text-align:right;direction:rtl">  ุจุนุฏ ุงูุญุตูู ุนูู ุชูุฏูุฑ ุงูุชุญูู ููู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ุจุงููุณุจุฉ ูููุงุนุฏุฉ ุ ูู ุงูุณูู ุงูุญุตูู ุนูู ุชูุฏูุฑ ูุฃูุตู ุชุญูู ุจูู ุฌููุน ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุชุงุญุฉ: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃ) ูุชู ุญุณุงุจ ุงูุญุฏ ุงูุฃุฏูู ูููุงุตู ุงูุฒููู ุ ูุงูุฐู ูุดูู ุฌููุน ุงููุชุฑุงุช ุงููุงุชุฌุฉ ุงููุงุชุฌุฉ ูู ุงูุฎุทูุฉ 2 </li><li style=";text-align:right;direction:rtl">  ุจ) ูุคุฎุฐ ุนุฑุถ ูุฐุง ุงููุงุตู ุงูุฒููู ูุชูุฏูุฑ ุงูุญุฏ ุงูุฃูุตู ููุชุญูู ุจูู TSC ููููุชุฉ ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ </li></ul><br></li></ol><br>  ูุชูููู ุงูุฑุชุงุจุฉ ูู ุงูููุชุจุฉ ุ ูุชู ุชูููุฐ ุงูุฎูุงุฑุฒููุฉ ุงูุชุงููุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุชุฑุถ ุฃู ุงูุนูููุฉ ุชุญุชูู ุนูู N CPU ูุชุงุญุฉ </li><li style=";text-align:right;direction:rtl">  ููุงุณ TSC ุนูู CPU1 </li><li style=";text-align:right;direction:rtl">  ููุงุณ TSC ุนูู CPU2 </li><li style=";text-align:right;direction:rtl">  ... </li><li style=";text-align:right;direction:rtl">  ููุงุณ TSC ุนูู CPUN </li><li style=";text-align:right;direction:rtl">  ููุงุณ TSC ูุฑุฉ ุฃุฎุฑู ุนูู CPU1 </li><li style=";text-align:right;direction:rtl">  ูุชุญูู ูู ุฃู ุงูููู ุงูููุงุณุฉ ุชุฒุฏุงุฏ ุจุดูู ุฑุชูุจ ูู ุงูุฃูู ุฅูู ุงูุฃุฎูุฑ </li></ol><br>  ูู ุงูููู ููุง ุฃู ูุชู ููุงุณ ุงููููุชูู ุงูุฃููู ูุงูุฃุฎูุฑุฉ ุนูู ููุณ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ููุง ูู ุงูุณุจุจ.  ูููุชุฑุถ ุฃู ูุฏููุง 3 ูุญุฏุงุช ูุนุงูุฌุฉ ูุฑูุฒูุฉ.  ุงูุชุฑุถ ุฃู TSC ุนูู CPU2 ูุฏ ุชู ุฅุฒุงูุชู ุจูุงุณุทุฉ +100 ูู ุงูุนูุงูุงุช ุงููุณุจูุฉ ูู TSC ุนูู CPU1.  ุงูุชุฑุถ ุฃูุถูุง ุฃู TSC ุนูู CPU3 ูุชู ุฅุฒุงูุชู ุจูุงุณุทุฉ +100 ุนูุงูุฉ ูุณุจุฉ ุฅูู TSC ุนูู CPU2.  ุชุฃูู ุณูุณูุฉ ุงูุฃุญุฏุงุซ ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฑุฃ TSC ุนูู CPU1.  ูููุญุตู ุนูู ูููุฉ 10 </li><li style=";text-align:right;direction:rtl">  ูุฑุช 2 ุงููุฑุงุฏ </li><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ TSC ุนูู CPU2.  ูุฌุจ ุฃู ูููู 112 </li><li style=";text-align:right;direction:rtl">  ูุฑุช 2 ุงููุฑุงุฏ </li><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ TSC ุนูู CPU3.  ูุฌุจ ุฃู ูููู 214 </li></ul><br>  ุญุชู ุงูุขู ุ ุชุจุฏู ุงูุณุงุนุฉ ูุชุฒุงููุฉ.  ูููู ุฏุนูุง ูููุณ TSC ุนูู CPU1 ูุฑุฉ ุฃุฎุฑู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฑุช 2 ุงููุฑุงุฏ </li><li style=";text-align:right;direction:rtl">  ุงูุฑุฃ TSC ุนูู CPU1.  ูุฌุจ ุฃู ูููู 16 </li></ul><br>  ุนูููุง!  ุชูุฒู ุงูุฑุชุงุจุฉ.  ุงุชุถุญ ุฃู ููุงุณ ุงูููู ุงูุฃููู ูุงูุฃุฎูุฑุฉ ุนูู ููุณ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุณูุญ ูู ุจุงูุชุดุงู ุงูุชุญููุงุช ุงููุจูุฑุฉ ุฃูุซุฑ ุฃู ุฃูู ุจูู ุงูุณุงุนุงุช.  ุงูุณุคุงู ุงูุชุงูู ุจุงูุทุจุน: "ูุง ุญุฌู ุงูุชุญููุงุชุ"  ูุนุชูุฏ ููุฏุงุฑ ุงูุชุญูู ุงูุฐู ูููู ุงูุชุดุงูู ุนูู ุงูููุช ุงููููุถู ุจูู ููุงุณุงุช TSC ุงููุชุชุงููุฉ.  ูู ุงููุซุงู ุงููุญุฏุฏ ุ ูุฐู ููุณุช ุณูู 2 ุนูุงูุงุช.  ุณูุชู ุงููุดู ุนู ุงูุชุญููุงุช ุจูู ุณุงุนุงุช ุชุชุฌุงูุฒ 2 ุงููุฑุงุฏ.  ุจุดูู ุนุงู ุ ูู ูุชู ุงููุดู ุนู ุงูุชุญููุงุช ุงูุชู ุชูู ุนู ุงูููุช ุงููููุถู ุจูู ุงูููุงุณุงุช ุงููุชุนุงูุจุฉ.  ูุฐูู ุ ูููุง ูุงูุช ุงูููุงุณุงุช ุฃูุซุฑ ูุซุงูุฉ ูู ุงูููุช ุงูููุงุณุจ ุ ูุงู ุฐูู ุฃูุถู.  ุชุนุชูุฏ ุฏูุฉ ููุง ุงูุชูุฏูุฑุงุช ุนูู ูุฐุง.  ูููุง ูุงูุช ุงูููุงุณุงุช ุฃูุซุฑ ูุซุงูุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุง ุงูุฎูุถ ุชูุฏูุฑ ุงูุชุญูู ุงูุฃูุตู </li><li style=";text-align:right;direction:rtl">  ูููุง ุฒุงุฏุช ุงูุซูุฉ ูู ุชูููู ุงูุฑุชุงุจุฉ </li></ul><br>  ูู ุงููุณู ุงูุชุงูู ุ ุณูุชุญุฏุซ ุนู ููููุฉ ุฃุฎุฐ ููุงุณุงุช ุถููุฉ.  ุณุฃุถูู ููุง ุฃูู ุฃุซูุงุก ุญุณุงุจ ุชูุฏูุฑุงุช ููุซูููุฉ TSC ุ ุชููู ุงูููุชุจุฉ ุจุฅุฌุฑุงุก ุงูุนุฏูุฏ ูู ุนูููุงุช ุงููุญุต "ุงูููู" ุงูุฃูุซุฑ ุจุณุงุทุฉ ุ ุนูู ุณุจูู ุงููุซุงู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุญูู ุงููุญุฏูุฏ ูู ุฃู TSCs ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ ุชุฏู ุจููุณ ุงูุณุฑุนุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ุฃู ุงูุนุฏุงุฏุงุช ุชุชุบูุฑ ุญููุง ุจูุฑูุฑ ุงูููุช ุ ูููุณ ููุท ุฅุธูุงุฑ ุงููููุฉ ููุณูุง </li></ul><br><h3 style=";text-align:right;direction:rtl">  ุทุฑููุชุงู ูุฌูุน ููู ุงูุนุฏุงุฏ </h3><br>  ูู ุงูููุชุจุฉ ุ ุทุจูุช ุทุฑููุชูู ูุฌูุน ููู TSC: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุงูุชุจุฏูู ุจูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ</b> .  ูู ูุฐู ุงูุทุฑููุฉ ุ ูุชู ุฌูุน ุฌููุน ุงูุจูุงูุงุช ุงููุงุฒูุฉ ูุชูููู ููุซูููุฉ TSC ุจูุงุณุทุฉ ุฎูุท ูุงุญุฏ "ูููุฒ" ูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุฅูู ุฃุฎุฑู.  ููุชุง ุงูุฎูุงุฑุฒููุชูู ุงูููุตููุชูู ูู ุงููุณู ุงูุณุงุจู ููุงุณุจุชุงู ููุฐู ุงูุทุฑููุฉ ูุบูุฑ ููุงุณุจุชูู ููุขุฎุฑ. <br>  "ุงูุชุจุฏูู ุจูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ" ููุณ ูู ุงุณุชุฎุฏุงู ุนููู.  ุชู ุชูููุฐ ุงูุทุฑููุฉ ููุท ูู ุฃุฌู "ุงููุนุจ".  ุชููู ุงููุดููุฉ ูู ุงูุทุฑููุฉ ูู ุฃู ุงูููุช ุงููุทููุจ "ูุณุญุจ" ุฏูู ูู ูุญุฏุฉ ูุนุงูุฌุฉ ูุฑูุฒูุฉ ุฅูู ุฃุฎุฑู ูุจูุฑ ุฌุฏูุง.  ููููุง ูุฐูู ุ ููุฑ ุงููุซูุฑ ูู ุงูููุช ุจูู ููุงุณุงุช TSC ุงููุชุชุงููุฉ ุ ูุฏูุฉ ุงูุชูุฏูุฑุงุช ููุฎูุถุฉ ุฌุฏูุง.  ุนูู ุณุจูู ุงููุซุงู ุ ูุชู ุงูุญุตูู ุนูู ุชูุฏูุฑ ูููุฐุฌู ููุชุญูู ุงูุฃูุตู ุจูู TSC ูู ููุทูุฉ 23000 ุนูุงูุฉ. <br><br>  ููุน ุฐูู ุ ูุฅู ุงูุทุฑููุฉ ููุง ููุฒุชุงู: <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฃููุง ุญุชููุฉ ุชูุงูุง.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ููุงุณ TSC ุจุงูุชุชุงุจุน ุนูู CPU1 ุ CPU2 ุ CPU3 ุ ูุฅููุง ูุฃุฎุฐูุง ูููุนููุง: ูู ุจุงูุชุจุฏูู ุฅูู CPU1 ุ ุงูุฑุฃ TSC ุ ุงูุชูู ุฅูู CPU2 ุ ุงูุฑุฃ TSC ุ ูุฃุฎูุฑูุง ุ ุงูุชูู ุฅูู CPU3 ุ ุงูุฑุฃ TSC </li><li style=";text-align:right;direction:rtl">  ูู ุงูููุชุฑุถ ุ ุฅุฐุง ูุงู ุนุฏุฏ ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูู ุงููุธุงู ูููู ุจุณุฑุนุฉ ูุจูุฑุฉ ุ ููุฌุจ ุฃู ูููู ููุช ุงูุชุจุฏูู ุจูููุง ุจุดูู ุฃุจุทุฃ ุจูุซูุฑ.  ูุฐูู ุ ูุธุฑููุง ุ ุนูู ูุง ูุจุฏู ุ ูููู ุฃู ููุฌุฏ ูุธุงู - ูุธุงู ูุจูุฑ ุฌุฏูุง!  - ูุชู ููู ุชุจุฑูุฑ ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ.  ูููู ูุง ูุฒุงู ูุฐุง ุบูุฑ ูุฑุฌุญ </li></ul><br></li><li style=";text-align:right;direction:rtl">  <b>ุงูููุงุณุงุช ุงููุทููุจุฉ ุจุงุณุชุฎุฏุงู CAS</b> .  ูู ูุฐู ุงูุทุฑููุฉ ุ ูุชู ุฌูุน ุงูุจูุงูุงุช ุจุงูุชูุงุฒู ูู ุฎูุงู ูุคุดุฑุงุช ุชุฑุงุจุท ูุชุนุฏุฏุฉ.  ูุจุฏุฃ ูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุชููุฑุฉ ูุคุดุฑ ุชุฑุงุจุท ูุงุญุฏ.  ูุชู ุชุฑุชูุจ ุงูููุงุณุงุช ุงูุชู ูุชู ุฅุฌุฑุงุคูุง ุจูุงุณุทุฉ ุฎููุท ูุฎุชููุฉ ูู ุชุณูุณู ูุงุญุฏ ุจุงุณุชุฎุฏุงู ุนูููุฉ "ุงูููุงุฑูุฉ ูุงูุชุจุฏูู".  ููุฌุฏ ุฃุฏูุงู ุฌุฒุก ูู ุงูููุฏ ููุถุญ ููููุฉ ุงูููุงู ุจุฐูู. <br>  ุชู ุงุณุชุนุงุฑุฉ ููุฑุฉ ุงูุทุฑููุฉ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">fio</a> ุ ููู ุฃุฏุงุฉ ุดุงุฆุนุฉ ูุชูููุฏ ุฃุญูุงู ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ. <br><br>  ุชุจุฏู ุชูุฏูุฑุงุช ุงูููุซูููุฉ ุงูุชู ุชู ุงูุญุตูู ุนูููุง ุจุงุณุชุฎุฏุงู ูุฐู ุงูุทุฑููุฉ ุฌูุฏุฉ ุจุงููุนู.  ุนูู ุณุจูู ุงููุซุงู ุ ุชู ุจุงููุนู ุงูุญุตูู ุนูู ุชูุฏูุฑ ููุญุฏ ุงูุฃูุตู ููุชุญูู ุนูู ูุณุชูู ุนุฏุฉ ูุฆุงุช ูู ุงููุฑุงุฏ.  ูุชูุญ ูู ูุญุต ุงูุฑุชุงุจุฉ ุงูุชูุงุท ุงูุณุงุนุฉ ุฎุงุฑุฌ ุงููุฒุงููุฉ ุถูู ูุฆุงุช ุงูุนูุงูุงุช. <br><br>  ููุน ุฐูู ุ ูุฅู ุงูุฎูุงุฑุฒููุงุช ุงููุงุฑุฏุฉ ูู ุงููุณู ุงูุณุงุจู ููุณุช ููุงุณุจุฉ ููุฐู ุงูุทุฑููุฉ.  ูู ุงูููู ุจุงููุณุจุฉ ููู ุฃู ูุชู ููุงุณ ููู TSC ุจุชุฑุชูุจ ูุญุฏุฏ ูุณุจููุง.  ุทุฑููุฉ "ุงูููุงุณุงุช ุงูุชู ุทูุจุชูุง CAS" ูุง ุชุณูุญ ุจุฐูู.  ุจุฏูุงู ูู ุฐูู ุ ูุชู ุฃููุงู ุฌูุน ุณูุณูุฉ ุทูููุฉ ูู ุงูููุงุณุงุช ุงูุนุดูุงุฆูุฉ ุ ุซู ุชุญุงูู ุงูุฎูุงุฑุฒููุงุช (ุงููุฎุชููุฉ ุจุงููุนู) ุงูุนุซูุฑ ุนูู ุงูููู ุงูููุฑูุกุฉ ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ "ุงูููุงุณุจุฉ" ูู ูุฐุง ุงูุชุณูุณู. <br><br>  ูู ุฃุนุทู ูุฐู ุงูุฎูุงุฑุฒููุงุช ููุง ุ ุญุชู ูุง ุชุณูุก ุงูุชุจุงูู.  ููููู ุฑุคูุชูุง ูู ุงูููุฏ.  ููุงู ุงูุนุฏูุฏ ูู ุงูุชุนูููุงุช.  ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูุฐู ุงูุฎูุงุฑุฒููุงุช ูู ููุณูุง.  ููุทุฉ ุฌุฏูุฏุฉ ูู ุงูุฃุณุงุณ ูู ุงูุชุญูู ูู ููููุฉ ุฃู ุชููู ุชุณูุณูุงุช TSC ุงูููุชูุจุฉ ุนุดูุงุฆููุง "ููุนูุฉ" ุฅุญุตุงุฆููุง.  ูู ุงููููู ุฃูุถูุง ุชุญุฏูุฏ ุงูุญุฏ ุงูุฃุฏูู ุงูููุจูู ูู ุงูุฃูููุฉ ุงูุฅุญุตุงุฆูุฉ ูุชูุฏูุฑุงุช ููุซูููุฉ TSC. <br><br>  ูุธุฑููุง ุ ูู ุงูุฃูุธูุฉ ุงููุจูุฑุฉ ุฌุฏูุง ุ ูููู ุฃู ุชุนุทู ุทุฑููุฉ "ุทูุจ CAS" ูุชุงุฆุฌ ุถุนููุฉ.  ุชุชุทูุจ ุงูุทุฑููุฉ ูุนุงูุฌุงุช ููุชูุงูุณ ูููุตูู ุฅูู ูููุน ุฐุงูุฑุฉ ูุดุชุฑู.  ุฅุฐุง ูุงู ููุงู ุงููุซูุฑ ูู ุงููุนุงูุฌุงุช ุ ูููู ุฃู ุชุตุจุญ ุงูููุงูุณุฉ ุดุฏูุฏุฉ ููุบุงูุฉ.  ููุชูุฌุฉ ูุฐูู ุ ุณูููู ูู ุงูุตุนุจ ุฅูุดุงุก ุชุณูุณู ููุงุณ ุจุฎุตุงุฆุต ุฅุญุตุงุฆูุฉ ุฌูุฏุฉ.  ููุน ุฐูู ุ ูู ุงูููุช ุงูุญุงูู ุ ูุจุฏู ูุฐุง ุงููุถุน ุบูุฑ ูุฑุฌุญ. <br></li></ol><br>  ููุฏ ูุนุฏุช ุจุนุถ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ.  ุฅููู ูุง ูุจุฏู ูุจูุงุก ููุงุณุงุช ูู ุณูุณูุฉ ูุงุญุฏุฉ ุจุงุณุชุฎุฏุงู CAS. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; arg-&gt;probes_count; i++ ) { <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> seq_num = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> tsc_val = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { __atomic_load( seq_counter, &amp;seq_num, __ATOMIC_ACQUIRE); __sync_synchronize(); tsc_val = WTMLIB_GET_TSC(); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ( !__atomic_compare_exchange_n( seq_counter, &amp;seq_num, seq_num + <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, __ATOMIC_ACQ_REL, __ATOMIC_RELAXED)); arg-&gt;tsc_probes[i].seq_num = seq_num; arg-&gt;tsc_probes[i].tsc_val = tsc_val; }</code> </pre><br>  ูุชู ุชูููุฐ ูุฐุง ุงูุฑูุฒ ุนูู ูู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุชุงุญุฉ.  ุฌููุน ุงูููุงุถูุน ูุฏููุง ุญู ุงููุตูู ุฅูู ุงููุชุบูุฑ ุงููุดุชุฑู <code>seq_counter</code> .  ูุจู ูุฑุงุกุฉ TSC ุ ููุฑุฃ ุงูุฏูู ูููุฉ ูุฐุง ุงููุชุบูุฑ ููุฎุฒูู ูู ุงููุชุบูุฑ <code>seq_num</code> .  ุซู ููุฑุฃ TSC.  ุซู ุชุญุงูู ุฒูุงุฏุฉ seq_counter ุชููุงุฆููุง ุจููุฏุงุฑ ูุงุญุฏ ุ ูููู ููุท ุฅุฐุง ูู ุชุชุบูุฑ ูููุฉ ุงููุชุบูุฑ ููุฐ ูุฑุงุกุชู.  ุฅุฐุง ูุงูุช ุงูุนูููุฉ ูุงุฌุญุฉ ุ ููุฐุง ูุนูู ุฃู ุงูุฎูุท ุชููู ูู " <code>seq_num</code> " ุนูู ุฑูู ุงูุชุณูุณู ุงููุฎุฒู ูู <code>seq_num</code> ุฎูู ูููุฉ TSC ุงูููุงุณุฉ.  ุงูุฑูู ุงูุชุณูุณูู ุงูุชุงูู ุ ุงูุฐู ุณูููู ูุงุฏุฑูุง ุนูู ุงูุชูููุน ุงููุณุงุญู ูู (ุฑุจูุง ูู ููุถูุน ุขุฎุฑ) ุณูููู ุฑูููุง ุขุฎุฑ.  ููุฐุง ุงูุฑูู ูุฃุฎูุฐ ูู ูุชุบูุฑ <code>seq_counter</code> ุ ููู ุงุณุชุฏุนุงุก ูุงุฌุญ ูู <code>__atomic_compare_exchange_n()</code> ูุฒูุฏ ูุฐุง ุงููุชุบูุฑ ุจููุฏุงุฑ ูุงุญุฏ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">__ ุงูุฐุฑูุฉ ูุน __ ุณููู ุุุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ูู ุฃุฌู <code>__atomic</code> ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุงุณุชุฎุฏุงู ุงููุธุงุฆู <code>__atomic</code> ููุนุงุฆูุฉ <code>__atomic</code> ุฌูุจูุง ุฅูู ุฌูุจ ูุน ูุธููุฉ ูู ุนุงุฆูุฉ <code>__sync</code> ุงููุฏููุฉ ุชุจุฏู ูุจูุญุฉ.  <code>__sync_synchronize()</code> ุงุณุชุฎุฏุงู <code>__sync_synchronize()</code> ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูุชุฌูุจ ุฅุนุงุฏุฉ ุชุฑุชูุจ ุนูููุฉ ูุฑุงุกุฉ TSC ูุน ุนูููุฉ ุงูููุจุน.  ูุฐุง ูุชุทูุจ ุญุงุฌุฒ ุฐุงูุฑุฉ ูุงูู.  ูุง <code>__atomic</code> ุงูุฃุณุฑุฉ <code>__atomic</code> ุฑุณูู ูุธููุฉ ููุง ุฎุตุงุฆุต ููุงุจูุฉ.  ุนูู ุงูุฑุบู ูู ูุฌูุฏ: <code>__atomic_signal_fence()</code> .  ุชูุธู ูุฐู ุงููุธููุฉ ุญุณุงุจุงุช ุงูุฏูู ุจุงุณุชุฎุฏุงู ูุนุงูุฌุงุช ุงูุฅุดุงุฑุฉ ุงูุชู ูุชู ุชูููุฐูุง ุนูู ููุณ ุงูุฏูู.  ูู ุงููุงูุน ุ ูุฐุง ุญุงุฌุฒ ูุงูู.  ููุน ุฐูู ุ ูู ูุชู ุฐูุฑ ุฐูู ุตุฑุงุญุฉ.  ูุฃูุง ุฃูุถู ุงูุดูุฑุฉ ุงูุชู ูุง ุชุญุชูู ุนูู ุฏูุงูุงุช ุฎููุฉ.  ููู ุซู ูุฅู <code>__sync_synchronize()</code> ุญุงุฌุฒ ุฐุงูุฑุฉ ููุชูุฆ. <br></div></div><br>  ููุทุฉ ุฃุฎุฑู ุฌุฏูุฑุฉ ุจุงูุฐูุฑ ููุง ูู ุงูุงูุชูุงู ุจุฃู ุฌููุน ุงูุชุฏููุงุช ุงูุชู ุชูุทูู ุนูููุง ุงูููุงุณุงุช ุชุจุฏุฃ ุจุดูู ุฃู ุจุขุฎุฑ ูู ููุณ ุงูููุช.  ูุญู ููุชููู ุจุญูููุฉ ุฃู ููู TSC ุงูุชู ุชุชู ูุฑุงุกุชูุง ุนูู ูุญุฏุงุช ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุงููุฎุชููุฉ ูุฎุชูุทุฉ ูุฏุฑ ุงูุฅููุงู.  ูุญู ุบูุฑ ุฑุงุถูู ุนู ุงููุถุน ุนูุฏูุง ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุจุฏุฃ ุฎูุท ูุงุญุฏ ุฃููุงู ุ ูููุชูู ุนููู ุ ูุนูุฏูุง ููุท ูุจุฏุฃ ุฌููุน ุงูุฎูุท ุงูุขุฎุฑ.  ุณูููู ุชุณูุณู TSC ุงููุงุชุฌ ุฎุตุงุฆุต ุนุฏููุฉ ุงููุงุฆุฏุฉ.  ูุง ูููู ุงุณุชุฎูุงุต ุชูุฏูุฑุงุช ููู.  ุฅู ุงูุจุฏุก ุงููุชุฒุงูู ูุฌููุน ุงูุฎููุท ููู - ูููุฐุง ุงูุณุจุจ ุชู ุงุชุฎุงุฐ ุชุฏุงุจูุฑ ูู ุงูููุชุจุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุญููู ุงููุฑุงุฏ ุฅูู ูุงูู ุซุงููุฉ ุนูู ุงูุทุงูุฑ </h3><br>  ุจุนุฏ ุงูุชุญูู ูู ููุซูููุฉ TSC ุ ูุฅู ุงูุบุฑุถ ุงูุฑุฆูุณู ุงูุซุงูู ููููุชุจุฉ ูู ุชุญููู ุงููุฑุงุฏ ุฅูู ูุงูู ุซุงููุฉ ุนูู ุงูุทุงูุฑ.  ููุฏ ุงุณุชุนุฑุช ููุฑุฉ ูุฐุง ุงูุชุญููู ูู ุงููุนูููุงุช ุงููุฐููุฑุฉ ุฃุนูุงู.  ููุน ุฐูู ุ ูุงู ุนููู ุฅุฌุฑุงุก ุจุนุถ ุงูุชุญุณููุงุช ุงููููุฉ ุ ูุฃูู ููุง ุฃุธูุฑ ุชุญูููู ุ ูุง ูุนูู ุฅุฌุฑุงุก ุงูุชุญููู ุจุดูู ุฌูุฏ ุจูุง ููู ุงูููุงูุฉ.  ููุงู ุชุญุตู ุนูู ุฏูุฉ ููุฎูุถุฉ. <br><br>  ุณุฃุจุฏุฃ ุจูุซุงู. <br><br>  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ุฃูุฏ ุชุญููู ุงููุฑุงุฏ ุฅูู ูุงูู ุซุงููุฉ ูุซู ูุฐุง: <br> <code>ns_time = tsc_ticks / tsc_per_ns</code> <br>  ูุฑูุฏ ุฃู ูููู ุงูููุช ุงููููุถู ูู ุงูุชุญููู ุถุฆููุงู.  ูุฐูู ุ ููุฏู ุฅูู ุงุณุชุฎุฏุงู ุงูุญุณุงุจ ุงูุตุญูุญ ุจุดูู ุญุตุฑู.  ุฏุนููุง ูุฑู ููู ูููู ุฃู ููุฏุฏูุง ูุฐุง. <br><br>  ุฅุฐุง ูุงูุช <code>tsc_per_ns = 3</code> ุ ูุฅู ุงููุณูุฉ ุงูุตุญูุญุฉ ุงูุจุณูุทุฉ ุ ูู ูุฌูุฉ ูุธุฑ ุงูุฏูุฉ ุ ุชุนูู ุจุดูู ุฌูุฏ: <code>ns_time = tsc_ticks / 3</code> . <br><br>  ูููู ูุงุฐุง ูู <code>tsc_per_ns = 3.333</code> ุ<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ุชู ุชูุฑูุจ ูุฐุง ุงูุฑูู ุฅูู 3 ุ ูุณุชููู ุฏูุฉ ุงูุชุญููู ููุฎูุถุฉ ุฌุฏูุง. ููุชุบูุจ ุนูู ูุฐู ุงููุดููุฉ ุนูู ุงููุญู ุงูุชุงูู: </font></font><br> <code>ns_time = (tsc_ticks * factor) / (3.333 * factor)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูุงู ุงูุนุงูู </font></font><code>factor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจูุฑูุง ุจูุง ูููู ุ ูุณุชููู ุงูุฏูุฉ ุฌูุฏุฉ. ููู ุดูุฆูุง ุณูุจูู ุณูุฆูุง. ููู ุงูุชุญููู ุงูุฒุงุฆุฏ. ุงููุณูุฉ ุงูุตุญูุญุฉ ูู ุนูููุฉ ููููุฉ ููุบุงูุฉ. ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงูุฅุตุฏุงุฑ x86 ุ ูุชุทูุจ ุงูุฃูุฑ 10 ุฏูุฑุงุช ุณุงุนุฉ. ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุง ูุชู ุฏุงุฆููุง ุชูููุฐ ุนูููุงุช ุงููุณูุฉ ุงูุตุญูุญุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุนูุฏ ูุชุงุจุฉ ุตูุบุฉ ูุฏููุง ูู ุดูู ูุนุงุฏู </font></font><br> <code>ns_time = (tsc_ticks * factor / 3.333) / factor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงููุณู ุงูุฃูู ููุณ ูุดููุฉ. ูููููุง ุฅุฌุฑุงุก ุญุณุงุจ </font></font><code>(factor / 3.333)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุจู. ููู ุงูุงููุณุงู ุงูุซุงูู ูุง ูุฒุงู ุงูุฃูู. ููุชุฎูุต ูููุง ุ ุฏุนูุง ูุฎุชุงุฑ</font></font><code>factor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุณุงูู ููุฉ ุงุซููู. ุจุนุฏ ุฐูู ุ ูููู ุงุณุชุจุฏุงู ุงููุณู ุงูุซุงูู ุจุชุบููุฑ ุตุบูุฑ - ุนูููุฉ ุจุณูุทุฉ ูุณุฑูุนุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ููููู ุงุฎุชูุงุฑ ุญุฌู ูุจูุฑ </font></font><code>factor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุณูุก ุงูุญุธ ุ </font></font><code>factor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูููู ุฃู ูููู ูุจูุฑูุง ุจุดูู ุชุนุณูู. ููู ูุญุฏูุฏุฉ ุจุดุฑุท ุฃูุง ูุคุฏู ุงูุถุฑุจ ูู ุงูุจุณุท ุฅูู ุชุฌุงูุฒ ููุน 64 ุจุช. ูุนู ุ ูุฑูุฏ ุงุณุชุฎุฏุงู ุฃููุงุน "ุฃุตููุฉ" ููุท. ูุฑุฉ ุฃุฎุฑู ุ ููุญูุงุธ ุนูู ุงููููุงุช ุงูุนุงูุฉ ููุชุญููู ุฅูู ุงูุญุฏ ุงูุฃุฏูู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฑ ุงูุขู ููู ูููู ุฃู ุชููู ูุจูุฑุฉ </font></font><code>factor</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุซุงููุง ุงููุญุฏุฏ. ุงูุชุฑุถ ุฃููุง ูุฑูุฏ ุงูุนูู ุจูุชุฑุงุช ุฒูููุฉ ุชุตู ุฅูู ุณูุฉ ูุงุญุฏุฉ. ุฎูุงู ุงูุนุงูุ tiknet TSC ุงูุฃููุงุช ุงูุชุงููุฉ: </font></font><code>3.333 * 1000000000 * 60 * 60 * 24 * 365 = 105109488000000000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุชูุณูู ูููุฉ ุงูุญุฏ ุงูุฃูุตู ูู ุนุฏุฏ ูู ููุน 64 ุจุช ูู: </font></font><code>18446744073709551615 / 105109488000000000 ~ 175.5</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุฐุง ุงูุชุนุจูุฑ</font></font><code>(factor / 3.333)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูุฌุจ ุฃู ุชููู ุฃูุซุฑ ูู ูุฐู ุงููููุฉ. ุซู ูุฏููุง </font></font><code>factor &lt;= 175.5 * 3.333 ~ 584.9</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฃูุจุฑ ููุฉ ูุงุซููู ูุง ุชุชุฌุงูุฒ ูุฐุง ุงูุฑูู ูู 512. ูุฐูู ุ ุชุฃุฎุฐ ุตูุบุฉ ุงูุชุญููู ูุฏููุง ุงูุดูู: </font></font><br><br> <code>ns_time = (tsc_ticks * 512 / 3.333) / 512</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู: </font></font><br><br> <code>ns_time = tsc_ticks * 153 / 512</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌูุฏ. ุฏุนููุง ูุฑู ุงูุขู ูุง ุชุญุชููู ูุฐู ุงูุตูุบุฉ ุจุฏูุฉ. ุณูุฉ ูุงุญุฏุฉ ุชุญุชูู ุนูู </font></font><code>1000000000 * 60 * 60 * 24 * 365 = 31536000000000000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุงูู ุซุงููุฉ. ูุฏููุง ุตูุบุฉ ุชุนุทู: </font></font><code>105109488000000000 * 153 / 512 = 31409671218750000</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุงููุฑู ูุน ุงููููุฉ ุงูุญุงููุฉ ูู 126328781250000 ูุงูู ุซุงููุฉ ุ ุฃู </font></font><code>126328781250000 / 1000000000 / 60 / 60 ~ 35</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุงุนุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฐุง ุฎุทุฃ ูุจูุฑ. ูุฑูุฏ ุฏูุฉ ุฃูุถู. ูุงุฐุง ูู ูููุง ุจููุงุณ ูุชุฑุงุช ุฒูููุฉ ูุง ุชุฒูุฏ ุนู ุณุงุนุฉุ ุณุฃุญุฐู ุงูุญุณุงุจุงุช. ุฅููุง ูุทุงุจูุฉ ุชูุงููุง ูุชูู ุงูุชู ุชู ุงูููุงู ุจูุง ููุชู. ุณุชููู ุงูุตูุบุฉ ุงูููุงุฆูุฉ: </font></font><br><br> <code>ns_time = tsc_ticks * 1258417 / 4194304</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(1)</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณูููู ุฎุทุฃ ุงูุชุญููู 119305 ูุงููุซุงููุฉ ูู ุงูุณุงุนุฉ ุงููุงุญุฏุฉ (ููู ุฃูู ูู 0.2 ูููู ุซุงููุฉ). ุฌูุฏ ุฌุฏุง. ุฅุฐุง ูุงูุช ุงููููุฉ ุงููุตูู ุงููุงุจูุฉ ููุชุญููู ุฃูู ูู ุณุงุนุฉ ุ ูุณุชููู ุงูุฏูุฉ ุฃูุถู. ููู ููู ูุณุชุฎุฏู ูุฐุงุ ูุง ุชุญุฏุฏ ุงูููุงุณุงุช ุงูุฒูููุฉ ูุณุงุนุฉ ูุงุญุฏุฉุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฏุนููุง ููุชุจู ุฅูู ุงููุญุธุฉ ุงูุชุงููุฉ: </font></font><br><br> <code>tsc_ticks = (tsc_ticks_per_1_hour * number_of_hours) + tsc_ticks_remainder</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ูููุง ุจุงูุญุณุงุจ </font></font><code>tsc_ticks_per_1_hour</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ููููููุง ุงูุงุณุชุฎุฑุงุฌ </font></font><code>number_of_hours</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุง </font></font><code>tsc_ticks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุจุนุฏ ุฐูู ุ ูุนุฑู ุนุฏุฏ ุงููุงูู ุซุงููุฉ ุงููุชุถููุฉ ูู ุณุงุนุฉ ูุงุญุฏุฉ. ูุฐูู ุ ูู ูููู ูู ุงูุตุนุจ ุนูููุง ุฃู ูุชุฑุฌู ุจุงูุซูุงูู ุงููุงูููุฉ ุฐูู ุงูุฌุฒุก </font></font><code>tsc_ticks</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฐู ูุชูุงูู ูุน ุนุฏุฏ ูุงูู ูู ุงูุณุงุนุงุช. ูุฅููุงู ุงูุชุญููู ุ ุณูุญุชุงุฌ ุฅูู ุงูุชุฑุฌูุฉ ูู ูุงูู ุซุงููุฉ</font></font><code>tsc_ticks_remainder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ููุน ุฐูู ุ ูุฅููุง ูุนูู ุฃู ูุฐุง ุงูุนุฏุฏ ูู ุงููุฑุงุฏ ุฌุงุก ูู ุฃูู ูู ุณุงุนุฉ. ูุฐุง ุ ูุชุญููููุง ุฅูู ูุงูู ุซุงููุฉ ุ ูููููุง ุงุณุชุฎุฏุงู ุงูุตูุบุฉ (1).</font></font><br><br>  ุชู.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขููุฉ ุงูุชุญููู ูุฐู ุชูุงุณุจูุง. ุฏุนููุง ููุฎุตูุง ููุญุณููุง ุงูุขู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุฑูุฏ ุฃู ูููู ูุฏููุง ุชุญูู ูุฑู ูู ุฃุฎุทุงุก ุงูุชุญููู. ูุง ูุฑูุฏ ุฑุจุท ูุนููุงุช ุงูุชุญููู ุจูุงุตู ุฒููู ูุฏุชู ุณุงุนุฉ ูุงุญุฏุฉ. ููููู ูุงุตู ุฒููู ุชุนุณูู: </font></font><br><br> <code>tsc_ticks = modulus * number_of_moduli_periods + tsc_ticks_remainder</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุฑุฉ ุฃุฎุฑู ุ ุชุฐูุฑ ููููุฉ ุชุญููู ุงูุจุงูู ุฅูู ูุงูู ุซุงููุฉ: </font></font><br><br> <code>ns_per_remainder = (tsc_ticks_remainder * factor / tsc_per_nsec) / factor</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุญุณุจ ูุนููุงุช ุงูุชุญููู (ูุญู ูุนูู ุฐูู </font></font><code>tsc_ticks_remainder &lt; modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">): </font><font style="vertical-align: inherit;">ูู ุฃุฌู ุงูุชุนุจ ุ ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ุนุฏู ุงููุณุงูุงุฉ ุงูุฃุฎูุฑ ูุง ูุนุงุฏู ุงูุฃูู ูู ุฅุทุงุฑ ุงูุญุณุงุจ ุงูุตุญูุญ. ููููู ูู ุฃุทูู ูู ุงูุญุฏูุซ ุนู ูุฐุง ููุชุฑุฉ ุทูููุฉ. ูุง ูุณุนูู ุฅูุง ุฃู ุฃููู ุฃู ุงูุชูุงูุช ุงูุฃุฎูุฑ ุฃูุซุฑ ุญุฏุฉ ูู ุงูุฃูู ุ ูุจุงูุชุงูู ุขูู ููุงุณุชุฎุฏุงู. </font><font style="vertical-align: inherit;">ุจูุฌุฑุฏ ุงูุญุตูู ุนูููุง ูู ุงูุชูุงูุช ุงูุฃุฎูุฑ </font><font style="vertical-align: inherit;">ุ ูุญุณุจ:</font></font><br><br> <code>modulus * (factor / tsc_per_nsec) &lt;= UINT64_MAX <br> factor &lt;= (UINT64_MAX / modulus) * tsc_per_nsec <br> 2 ^ shift &lt;= (UINT64_MAX / modulus) * tsc_per_nsec <br></code> <br><br><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"></font><code>shift</code><font style="vertical-align: inherit;"></font><br><br> <code>factor = 2 ^ shift <br> mult = factor / tsc_per_nsec <br></code> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุซู ูุชู ุงุณุชุฎุฏุงู ูุฐู ุงููุนููุงุช ูุชุญููู ุงูุจุงูู ุฅูู ูุงูู ุซุงููุฉ: </font><font style="vertical-align: inherit;">ูุฐุง ุ ุงูุชุดููุง ุชุญููู ุงูุจุงูู. ุงููุดููุฉ ุงููุงุฏูุฉ ุงูุชู ูุชุนูู ุญููุง - ูู ุฅุฒุงูุฉ </font><font style="vertical-align: inherit;">ู </font><font style="vertical-align: inherit;">ูู </font><font style="vertical-align: inherit;">. ูุงูุนุงุฏุฉ ุ ูุฑูุฏ ุฃู ููุนู ุฐูู ุจุณุฑุนุฉ. ูุงูุนุงุฏุฉ ุ ูุง ูุฑูุฏ ุงุณุชุฎุฏุงู ุงููุณูุฉ. ูุฐูู ุ ูุฎุชุงุฑ ุจุจุณุงุทุฉ </font><font style="vertical-align: inherit;">ูุณุงูู ููุฉ ุงุซููู: </font><font style="vertical-align: inherit;">ุซู:</font></font><br><br> <code>ns_per_remainder = (tsc_ticks_remainder * mult) &gt;&gt; shift <br></code> <br><br><font style="vertical-align: inherit;"></font><code>tsc_ticks_remainder</code><font style="vertical-align: inherit;"></font><code>number_of_moduli_periods</code><font style="vertical-align: inherit;"></font><code>tsc_ticks</code><font style="vertical-align: inherit;"></font><code>modulus</code><font style="vertical-align: inherit;"></font><br><br> <code>modulus = 2 ^ remainder_bit_length</code> <br> <br><font style="vertical-align: inherit;"></font><br><br> <code>number_of_moduli_periods = tsc_ticks &gt;&gt; remainder_bit_length <br> tsc_ticks_remainder = tsc_ticks &amp; (modulus - 1)</code> <br> <br>  ุนุธูู.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญู ูุนุฑู ุงูุขู ููููุฉ ุงูุงุณุชุฎุฑุงุฌ ูู </font></font><code>tsc_ticks</code> <code>number_of_moduli_periods</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>tsc_ticks_remainder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุนุฑู ููููุฉ ุงูุชุญููู </font></font><code>tsc_ticks_remainder</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅูู ูุงูู ุซุงููุฉ. </font><font style="vertical-align: inherit;">ูุจูู ุฃู ูููู ููููุฉ ุชุญููู ูุฐุง ุงูุฌุฒุก ูู ุงููุฑุงุฏ ุ ุงูุฐู ูู ูุชุนุฏุฏ ุ ุฅูู ูุงูู ุซุงููุฉ </font></font><code>modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููู ูู ุดูุก ุจุณูุท: </font></font><br><br> <code>ns_per_moduli = ns_per_modulus * number_of_moduli_periods</code> <br> <br> <code>ns_per_modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููููู ุงูุญุณุงุจ ููุฏููุง. </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ููููุง ูููุณ ุงูุตูุบุฉ ุงูุชู ูุญูู ุจูุง ุงูุจุงูู. </font><font style="vertical-align: inherit;">ูููู ุงุณุชุฎุฏุงู ูุฐู ุงูุตูุบุฉ ููุชุฑุงุช ุฒูููุฉ ูู ุชุนุฏ </font></font><code>modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ููุณู </font></font><code>modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ุจุงูุทุจุน ุ ูู ูุนุฏ </font></font><code>modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br> <code>ns_per_modulus = (modulus * mult) &gt;&gt; shift</code> <br> <br>  ูุฐุง ูู ุดูุก!<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูููุง ูู ุญุณุงุจ ุฌููุน ุงููุนููุงุช ุงููุงุฒูุฉ ูุชุญููู ุงููุฑุงุฏ ุฅูู ูุงูู ุซุงููุฉ ุนูู ุงูุทุงูุฑ. </font><font style="vertical-align: inherit;">ุงูุขู ุชูุฎูุต ุฅุฌุฑุงุก ุงูุชุญููู ุจุฅูุฌุงุฒ:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฏููุง </font></font><code>tsc_ticks</code> </li><li style=";text-align:right;direction:rtl"> <code>number_of_moduli_periods = tsc_ticks &gt;&gt; remainder_bit_length</code> </li> <li style=";text-align:right;direction:rtl"> <code>tsc_ticks_remainder = tsc_ticks &amp; (modulus - 1)</code> </li> <li style=";text-align:right;direction:rtl"> <code>ns = ns_per_modulus * number_of_moduli_periods + (tsc_ticks_remainder * mult) &gt;&gt; shift</code> </li> </ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ูุฐุง ุงูุฅุฌุฑุงุกุ ุงููุนููุงุช </font></font><code>remainder_bit_length</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>modulus, ns_per_modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><code>mult</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>shift</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชูุฏู precalculation. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฅุฐุง ููุช ูุง ุชุฒุงู ุชูุฑุฃ ูุฐุง ุงูููุดูุฑ ุ ูุฃูุช ุนุธูู ุฃู ุนุธูู. </font><font style="vertical-align: inherit;">ูู ุงููููู ุฃู ุชููู ูุญูู ุฃุฏุงุก ุฃู ูุทูุฑูุง ูุจุฑุงูุฌ ุนุงููุฉ ุงูุฃุฏุงุก.</font></font><br><br>  ุญุชู ููุง.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุชุถุญ ุฃููุง ูู ููุชูู ุจุนุฏ :) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุฐูุฑ ููู ูููุง ุจุญุณุงุจ ุงููุนููุฉ </font></font><code>mult</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font><font style="vertical-align: inherit;">ูุงู ููุฐุง: </font></font><br><br> <code>mult = factor / tsc_per_nsec</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุคุงู: ูู ุฃูู ุฃุชุช </font></font><code>tsc_per_nsec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุฏุฏ ุงููุฑุงุฏ ูู ูุงูู ุซุงููุฉ ูู ูููุฉ ุตุบูุฑุฉ ุฌุฏูุง. </font><font style="vertical-align: inherit;">ูู ุงููุงูุน ุ ูุชู </font></font><code>tsc_per_nsec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงุณุชุฎุฏุงู </font><font style="vertical-align: inherit;">ููุชุจุชู ุจุฏูุงู ูู ุฐูู </font></font><code>(tsc_per_sec / 1000000000)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ูู: </font></font><br><br> <code>mult = factor * 1000000000 / tsc_per_sec</code> <br> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุงู ุณุคุงูุงู ูุซูุฑุงู ููุงูุชูุงู:</font></font><br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุงุฐุง </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููุณ </font></font><code>tsc_per_msec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนูู ุณุจูู ุงููุซุงูุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุฃูู ุชุญุตู ุนูู ูุฐู </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ</font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุจุฏุฃ ุจุงูุฃูู. ูุณุชุฎุฏู Fio ุงูุขู ูุนูููุง ุนุฏุฏ ุนูุงูุงุช ุงูุชุฌุฒุฆุฉ ููู ูููู ุซุงููุฉ. ูููุงู ูุดุงูู ูู ุฐูู. ุนูู ุงูุฌูุงุฒุ ุงููุนููุงุช ุงูุชู ููุช ุงููุฐููุฑูู ุฃุนูุงู </font></font><code>tsc_per_msec = 2599998</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุจูููุง </font></font><code>tsc_per_sec = 2599998971</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุฅุฐุง ุฌูุจูุง ูุฐู ุงูุฃุฑูุงู ุฅูู ูููุงุณ ูุงุญุฏ ุ ูุณุชููู ูุณุจุชูุง ูุฑูุจุฉ ุฌุฏูุง ูู ุงููุญุฏุฉ: 0.999999626. ูููู ุฅุฐุง ุงุณุชุฎุฏููุง ุงูุฃูู ูููุณ ุงูุซุงูู ุ ูุณูููู ูุฏููุง 374 ุฎุทุฃ ูุงูู ุซุงููุฉ ููู ุซุงููุฉ. ูุฐูู - </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุจุนุฏ ... ููู ูุญุณุจ </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชู ุฐูู ุนูู ุฃุณุงุณ ุงูููุงุณ ุงููุจุงุดุฑ: </font><font style="vertical-align: inherit;">"ุจุนุถ ุงูููุช" ูู ูุนููุฉ ูุงุจูุฉ ููุชูููู. ูููู ุฃู ุชููู ุฃูุจุฑ ุฃู ุฃุตุบุฑ ุฃู ุชุณุงูู ุซุงููุฉ ูุงุญุฏุฉ. ูููุชุฑุถ ุฃููุง ูุตู ุซุงููุฉ. ุชุญูู ุงููุฒูุฏ ูู ุฃู ุงููุฑู ุงูุญูููู ุจูู </font><font style="vertical-align: inherit;">ุ ู </font><font style="vertical-align: inherit;">ูุงู ูุณุงูู 0.6 ุซูุงูู. ุซู </font><font style="vertical-align: inherit;">.</font></font><br><br> <code>start_sytem_time = clock_gettime() <br> start_tsc = WTMLIB_GET_TSC() <br>  -  <br> end_system_time = clock_gettime() <br> end_tsc = WTMLIB_GET_TSC() <br></code> <br><br><font style="vertical-align: inherit;"></font><code>end_system_time</code><font style="vertical-align: inherit;"></font><code>start_system_time</code><font style="vertical-align: inherit;"></font><code>tsc_per_sec = (end_tsc โ start_tsc) / 0,6</code><font style="vertical-align: inherit;"></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุนุชุจุฑ ุงูููุชุจุฉ ุนุฏุฉ ููู ุจูุฐู ุงูุทุฑููุฉ </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูุจุนุฏ ุฐูู ุ ุจุงุณุชุฎุฏุงู ุงูุทุฑู ุงูููุงุณูุฉ ุ "ุชูุธู" ุงูุถูุถุงุก ุงูุถูุฆูุฉ ูุชุชููู ูููุฉ ูุงุญุฏุฉ </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุงููุซูู ุจูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฏุงุฆุฑุฉ ููุงุณ ุงูููุช ุฃุนูุงูุ ูุฅู ุงููุธุงู ูู ุงูููุงููุงุช ุงููููุฉ </font></font><code>clock_gettime()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>WTMLIB_GET_TSC()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ูู ุงูููู </font></font><code>WTMLIB_GET_TSC()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู ููุฑ ุงูููุช ููุณู ุจูู ููุงููุชูู ููุง ุจูู ููุงููุชูู </font></font><code>clock_gettime()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. ุซู ุณูููู ูู ุงููููู ุฑุจุท ููุช ุงููุธุงู ุจุณูููุฉ ูุน ุนูุงูุงุช TSC. ููู ุซู ูููู ุงุนุชุจุงุฑ ุชูุงุซุฑ ุงูููู </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุนุดูุงุฆููุง ุญููุง. ุจุงุณุชุฎุฏุงู ูุฎุทุท ุงูููุงุณ ูุฐุง ุ </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุณุชูุญุฑู </font><font style="vertical-align: inherit;">ุงูููู </font><font style="vertical-align: inherit;">ุนู ูุชูุณุท โโุงููููุฉ ูู ุฃู ุงุชุฌุงู ุจููุณ ุงูุงุญุชูุงู. ูุณูููู ูู ุงููููู ุชุทุจูู ุทุฑู ุงูุชุตููุฉ ุงูููุงุณูุฉ ุนูููุง.</font></font><br><br><h3 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฑุจูุง ูุฐุง ูู ุดูุก. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ููุถูุน ููุงุณ ุงูููุช ุงููุนุงู ูุง ููุชุตุฑ ุนูู ุฐูู. </font><font style="vertical-align: inherit;">ููุงู ุงูุนุฏูุฏ ูู ุงููุฑูู ุงูุฏูููุฉ. </font><font style="vertical-align: inherit;">ุจุงููุณุจุฉ ููููุชููู ุ ุฃูุชุฑุญ ุงูุนูู ุจุดูู ูุณุชูู ุนูู ุงููุถุงูุง ุงูุชุงููุฉ:</font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุชุฎุฒูู ูุนููุงุช ุงูุชุญููู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุฃู - ุฃูุถู - ุนูู ุงูุชุณุฌููุงุช </font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุง ูู ุงูุญุฏูุฏ ุงูุชู ูููู ุชุฎููุถูุง </font></font><code>modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(ูุจุงูุชุงูู ุฒูุงุฏุฉ ุฏูุฉ ุงูุชุญููู)ุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุฑุฃููุง ุ ูุฅู ุฏูุฉ ุงูุชุญููู ูุง ุชุชุฃุซุฑ ููุท </font></font><code>modulus</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูููู ุฃูุถูุง ุจุญุฌู ุงููุงุตู ุงูุฒููู ุ ูุงูุฐู ูุฑุชุจุท ุจุงููุฑุงุฏ ( </font></font><code>tsc_per_msec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃู </font></font><code>tsc_per_sec</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font><font style="vertical-align: inherit;">ููููุฉ ููุงุฒูุฉ ุชุฃุซูุฑ ููุง ุงูุนุงููููุ</font></font></li><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TSC ูู ุงูุฌูุงุฒ ุงูุธุงูุฑู. </font><font style="vertical-align: inherit;">ูู ูููููู ุงุณุชุฎุฏุงููุ</font></font></li><li style=";text-align:right;direction:rtl">        . , fio        timespec.    : <br><br> <code>tp-&gt;tv_sec = nsecs / 1000000000ULL;</code> <br> <br> ,   TSC          .         ,  ,      <br></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุชุณูุญ ุงูุทุฑู ุงูุชู ุชูุช ููุงูุดุชูุง ูู ูุฐู ุงูููุงูุฉ ุจููุงุณ ููุช ุงููููุงุณ ุงูุซุงูู ุจุฏูุฉ ุชุฑุชูุจ ุนุฏุฉ ุนุดุฑุงุช ูู ุงููุงูู ุซุงููุฉ. </font><font style="vertical-align: inherit;">ูุฐู ูู ุงูุฏูุฉ ุงูุชู ุฃูุงุญุธูุง ุจุงููุนู ุนูุฏ ุงุณุชุฎุฏุงู ููุชุจุชู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููู ุงููุซูุฑ ููุงูุชูุงู ุ ุฃู ููุธูุฉ fio ุ ุงูุชู ุงูุชุฑุถุช ูููุง ุจุนุถ ุงูุฃุณุงููุจ ุ ุชููุฏ ุจุงูุถุจุท 700-900 ูุงูู ุซุงููุฉ ุนูู ูููุงุณ ุซุงูู (ูููุงู ุซูุงุซุฉ ุฃุณุจุงุจ ูุฐูู). </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููุฏ ูู ุณุฑุนุฉ ุงูุชุญููู ุจุณุจุจ ุชุฎุฒูู ุงูููุช ุจุชูุณูู Linux ุงูููุงุณู. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ููุฏ ุณุงุฑุนุช ุฅูู ุทูุฃูุฉ ูุดุฌุนู ูุธุงู ุงููุนูููุงุช. </font><font style="vertical-align: inherit;">ููุฏ ุฃุฑุณูุช ูููุทูุฑูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุตููุง ูุฌููุน ูุดููุงุช ุงูุชุญููู ุงูุชู ุงูุชุดูุชูุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">ูุนูู ุงููุงุณ ุจุงููุนู ุ ูุณูู ูููููู ุจุฅุตูุงุญู ูุฑูุจูุง. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุชููู ูู ุงููุซูุฑ ูู ุงููุงูู ุซุงููุฉ ุงูููุชุนุฉ!</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar425237/">https://habr.com/ru/post/ar425237/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar425227/index.html">ููุฏ ูุฌุฏ ุงูุจุงุญุซูู ุทุฑููุฉ ูุงูุชุดุงู ููุงุชูุญ Honeytoken ูุชุฌุงูุฒูุง ูู ุนุฏุฏ ูู ุฎุฏูุงุช ุฃูุงุฒูู.</a></li>
<li><a href="../ar425229/index.html">ููู ุณุงุนุฏูุง CDN MegaFon.TV ุนูู ุนุฏู ุงููุตูู ุฅูู ูุฃุณ ุงูุนุงูู 2018</a></li>
<li><a href="../ar425231/index.html">ุงูุชุนูููุงุช ุญูู ุนูู ูุถููุฉ</a></li>
<li><a href="../ar425233/index.html">Python 3 ุนูู Facebook</a></li>
<li><a href="../ar425235/index.html">ุงููุฒูุฏ ุนู ุงูุฑุณูู ุงูุจูุงููุฉ ุ ุฃู ููููุฉ ุงูุชุดุงู ุงูุชุจุนูุงุช ุจูู ุชุทุจููุงุชู</a></li>
<li><a href="../ar425241/index.html">ุงููุทูุฑ ุจุนุฏ 20 ุนุงููุง: ูุงุณููู ููุจูุฏูู ุนูู ICRE ุ ุงูุชุนููู ุ ูุชุงุจู ูุงูุจุฑูุฌุฉ</a></li>
<li><a href="../ar425243/index.html">ูุชูุจ ุฌูู ููููุณ</a></li>
<li><a href="../ar425245/index.html">ุงูุฅุนูุงู ุนู ูุงุฆูุฉ RamblerFront & # 6</a></li>
<li><a href="../ar425247/index.html">ุงูุชุนููุฏ ุงูุฌูุงุนู ูู ุงูุงุฎุชุจุงุฑ</a></li>
<li><a href="../ar425249/index.html">ููู ูู ุงูุชุนุงุฑู ูุน LLP ูู ุฌุงูุนุฉ ITMO: ุฏูุฑุฉ "ุงูุจุฑูุฌุฉ ููุฎูุถุฉ ุงููุณุชูู"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>