<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòë ü§æüèΩ üè¥Û†ÅßÛ†Å¢Û†Å∑Û†Å¨Û†Å≥Û†Åø Rollup: Anda sudah dapat membangun aplikasi üçö ü§≥üèø üë©üèΩ‚Äçüíº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rollup adalah aplikasi javascript generasi baru dan pembuat perpustakaan. Banyak yang sudah mengenalnya sejak lama sebagai pembangun yang menjanjikan ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rollup: Anda sudah dapat membangun aplikasi</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440946/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Rollup</a> adalah aplikasi javascript generasi baru dan pembuat perpustakaan.  Banyak yang sudah mengenalnya sejak lama sebagai pembangun yang menjanjikan yang sangat cocok untuk membangun perpustakaan, tetapi tidak cocok untuk membangun aplikasi.  Namun, seiring berjalannya waktu, produk ini aktif berkembang. <br><br>  Saya pertama kali mencobanya di awal 2017.  Saya langsung menyukainya karena mendukung kompilasi di ES2015, treeshaking, kurangnya modul dalam perakitan, dan tentu saja konfigurasi sederhana.  Tapi kemudian itu adalah produk mentah, dengan sejumlah kecil plugin dan fungsi yang sangat terbatas, dan saya memutuskan untuk meninggalkannya untuk nanti dan terus membangun melalui browserify.  Upaya kedua adalah pada tahun 2018, ketika sudah secara signifikan mengungguli komunitas, plugin dan fungsionalitas, tetapi masih kurang kualitas dalam beberapa fungsi, termasuk pengamat.  Dan akhirnya, pada awal 2019, kita dapat dengan aman mengatakan - dengan bantuan Rollup Anda dapat dengan mudah dan mudah membangun aplikasi modern. <br><a name="habracut"></a><br>  Untuk memahami manfaatnya, mari kita lihat fitur-fitur utama dan bandingkan dengan Webpack (situasinya sama untuk Browserify). <br><br><h3>  Konfigurasi sederhana </h3><br>  Segera apa yang menarik perhatian Anda adalah konfigurasi yang sangat sederhana dan mudah dipahami: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-comment"><span class="hljs-comment">// todo:     ], }];</span></span></code> </pre> <br>  Masukkan <i>rollup -c</i> di cosnol dan bundel Anda mulai berkumpul.  Untuk ekspor, Anda dapat memberikan array bundel untuk perakitan, misalnya, jika Anda mengumpulkan polifil secara terpisah, beberapa program, pekerja dan sebagainya.  Sebagai input, Anda dapat mengirimkan berbagai file, kemudian potongan akan dikumpulkan.  Dalam output, Anda dapat memberi makan array file output dan mengumpulkannya ke dalam sistem modular yang berbeda: iife, commonjs, umd. <br><br><h3>  Dukungan Iife </h3><br>  Dukungan untuk perakitan menjadi fungsi itu sendiri yang disebut tanpa modul  Untuk pemahaman, mari kita ambil program yang paling terkenal: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>);</code> </pre><br>  mengendarainya melalui Rollup ke format iife dan lihat hasilnya: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>); }());</code> </pre><br>  Outputnya adalah kode yang sangat kompak, hanya 69 byte.  Jika Anda masih tidak mengerti keuntungannya, Webpack / Browserify akan mengkompilasi kode berikut: <br><br><div class="spoiler">  <b class="spoiler_title">Hasil pembuatan webpack</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/******/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' }); /******/ } /******/ Object.defineProperty(exports, '__esModule', { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, 'default', { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module['default']; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, 'a', getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = ""; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, exports) { console.log("Hello, world!"); /***/ }) /******/ ]);</span></span></code> </pre><br></div></div><br>  Seperti yang Anda lihat, ternyata sedikit lebih karena kenyataan bahwa Webpack / Browserify hanya dapat dibangun di CommonJS.  Keuntungan besar IIFE adalah kekompakan dan tidak adanya konflik antara versi CommonJS yang berbeda.  Tetapi ada satu kelemahan, Anda tidak dapat mengumpulkan bongkahan, untuk itu Anda harus beralih ke CommonJS. <br><br><h3>  Kompilasi dalam ES2015 </h3><br>  Nama "rollup generasi berikutnya" yang diterima pada tahun 2016 diterima karena kemampuan untuk berkumpul di ES2015.  Dan hingga akhir 2018, satu-satunya kolektor yang tahu bagaimana melakukan ini. <br>  Misalnya, jika Anda mengambil kode: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestA</span></span></span><span class="hljs-class"> </span></span>{ getData(){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"A"</span></span>} } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestB().getData());</code> </pre><br>  dan melewati Rollup, lalu pada output kita mendapatkan hal yang sama.  Dan ya!  Pada awal 2019, sudah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">87%</a> browser dapat menjalankannya secara asli. <br><br>  Kemudian pada tahun 2016 itu tampak seperti terobosan, karena ada sejumlah besar aplikasi yang tidak memerlukan dukungan untuk browser lama: admin, kios, bukan aplikasi web, dan tidak ada alat membangun untuk mereka.  Dan sekarang dengan Rollup kita dapat mengumpulkan beberapa bundel dalam satu pass, di es3, es5, es2015, exnext dan tergantung pada unduhan browser yang diperlukan. <br><br>  Keunggulan besar ES2015 adalah ukuran dan kecepatan eksekusi.  Karena kurangnya transpiling ke lapisan bawah, kode ini ternyata jauh lebih ringkas, dan karena kurangnya kode bantu yang dihasilkan oleh transpiler, kode ini juga berfungsi 3 kali lebih cepat (menurut tes subjektif saya). <br><br><h3>  Pohon bergetar </h3><br>  Ini adalah chip Rollup, ia menciptakannya!  Webpack telah mencoba mengimplementasikannya selama bertahun-tahun berturut-turut, tetapi hanya dengan versi 4 sesuatu mulai bekerja.  Browserify melakukannya dengan sangat buruk. <br>  Hewan apa ini?  Mari kita ambil dua file berikut sebagai contoh: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// module.ts export class TestA { getData(){return "A"} } export class TestB { getData(){return "B"} } // index.ts import { TestB } from './module'; const test = new TestB(); console.log("Hello, world!", test.getData());</span></span></code> </pre><br>  jalankan melalui Rollup dan dapatkan: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestB</span></span></span><span class="hljs-class"> </span></span>{ getData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"B"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> test = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestB(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>, test.getData()); }());</code> </pre><br>  Sebagai hasil dari TreeShaking, kode mati dibuang bahkan pada tahap penyelesaian dependensi.  Berkat majelis Rollup ternyata jauh lebih kompak.  Sekarang mari kita lihat apa yang dihasilkan Webpack: <br><br><div class="spoiler">  <b class="spoiler_title">Hasil pembuatan webpack</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/******/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' }); /******/ } /******/ Object.defineProperty(exports, '__esModule', { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, 'default', { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module['default']; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, 'a', getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = ""; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); // CONCATENATED MODULE: ./src/module.ts class TestA { getData() { return "A"; } } class TestB { getData() { return "B"; } } // CONCATENATED MODULE: ./src/index.ts const test = new TestB(); console.log("Hello, world!", test.getData()); /***/ }) /******/ ]);</span></span></code> </pre><br></div></div><br>  Dan di sini kita dapat menarik dua kesimpulan.  Webpack pertama pada akhir 2018 masih belajar untuk memahami dan membangun ES2015.  Yang kedua, benar-benar semua kode termasuk dalam rakitan, tetapi kode mati sudah dihapus menggunakan minifier Terser (fork dan penerus UglifyES).  Sebagai hasil dari pendekatan ini, bundel lebih tebal dari Rollup, pada habr sudah menulis banyak tentang itu, kami tidak akan berhenti di situ. <br><br><h3>  Plugin </h3><br>  Hanya ES2015 + telanjang yang dapat dirakit dari kotak Rollup.  Untuk mengajarinya fungsionalitas tambahan, seperti menghubungkan commonjs, modul naskah, memuat html dan scss, dll., Anda perlu menghubungkan plugin. <br><br>  Ini dilakukan dengan sangat sederhana: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nodeResolve <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-node-resolve'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> commonJs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-commonjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typeScript <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-typescript2'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> postcss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-postcss'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> html <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-html'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> visualizer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-visualizer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {sizeSnapshot} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"rollup-plugin-size-snapshot"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {terser} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-terser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.r.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ nodeResolve(), <span class="hljs-comment"><span class="hljs-comment">//   node commonJs(), //   commonjs postcss(), //   postcc,    scss  less html(), //  html  typeScript({tsconfig: "tsconfig.json"}), //  typescript sizeSnapshot(), //      terser(), //    ES2015+,    UglifyES visualizer() //   ] }];</span></span></code> </pre><br>  Sangat sederhana, satu plug-in terhubung dalam satu kata.  Konfigurasi ini dapat mengumpulkan aplikasi yang kompleks dan bahkan menghasilkan analisis bundel pada output. <br><br><h3>  Ringkasan </h3><br>  Dan sekarang, dipersenjatai dengan pengetahuan baru, mari kita membuat konfigurasi yang akan mengumpulkan polifile secara terpisah, aplikasi terpisah untuk browser lama dan baru, seorang pekerja layanan untuk pwa, dan seorang pekerja web untuk perhitungan kompleks di brounund. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nodeResolve <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-node-resolve'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> commonJs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-commonjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typeScript <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-typescript2'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> postcss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-postcss'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> html <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-html'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> visualizer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-visualizer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { sizeSnapshot } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"rollup-plugin-size-snapshot"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { terser } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-terser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getPlugins = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) =&gt;</span></span> [ nodeResolve(), commonJs(), postcss(), html(), typeScript({ <span class="hljs-attr"><span class="hljs-attr">tsconfig</span></span>: <span class="hljs-string"><span class="hljs-string">"tsconfig.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">tsconfigOverride</span></span>: { <span class="hljs-attr"><span class="hljs-attr">compilerOptions</span></span>: { <span class="hljs-string"><span class="hljs-string">"target"</span></span>: options.target } } }), sizeSnapshot(), terser(), visualizer() ]; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/polyfills.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/polyfills.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.next.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"esnext"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.es5.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.es3.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es3"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/serviceworker.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/serviceworker.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/webworker.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/webworker.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) }];</code> </pre><br><br>  Semua bundel mudah dan aplikasi web cepat! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id440946/">https://habr.com/ru/post/id440946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id440932/index.html">Sedikit tentang intelijen bisnis TI</a></li>
<li><a href="../id440938/index.html">Mengapa Google membutuhkan grafik pengetahuan?</a></li>
<li><a href="../id440940/index.html">Redux - merevisi logika dan tindakan peredam</a></li>
<li><a href="../id440942/index.html">BYD mengumumkan pertumbuhan penjualan untuk kendaraan listrik plug-in</a></li>
<li><a href="../id440944/index.html">Cara cepat menulis situs web atau aplikasi web dan tidak terjebak dalam kolektor</a></li>
<li><a href="../id440948/index.html">Jangan pandai dengan formulir masuk</a></li>
<li><a href="../id440950/index.html">Chrome Audit 500: Bagian 1. Pendaratan</a></li>
<li><a href="../id440954/index.html">Siklus hidup sebuah artikel tentang Habr√©: kami menulis habraparser. Bagian dua</a></li>
<li><a href="../id440956/index.html">Orkestra nomad alternatif di desktop</a></li>
<li><a href="../id440958/index.html">Bagaimana saya mencoba memperbaiki pencarian peta untuk driver. Bagian 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>