<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>  答 Luna procesal   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No hace mucho tiempo, creamos un sistema de creaci贸n de luna. Nuestro objetivo era crear lunas de tama帽o y composici贸n similares a las existentes en n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Luna procesal</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468305/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png" alt="imagen"></div><br>  No hace mucho tiempo, creamos un sistema de creaci贸n de luna.  Nuestro objetivo era crear lunas de tama帽o y composici贸n similares a las existentes en nuestro sistema solar.  La principal dificultad era obtener las vastas superficies de tales lunas y sus interiores, de modo que mientras permanecieran interesantes.  Adem谩s, necesit谩bamos que las lunas se representaran con detalles claros, independientemente de la distancia a ellas. <br><br>  El sistema supone que las lunas tienen una base esf茅rica.  La creaci贸n de una malla geod茅sica se aplica a la esfera base, lo que garantiza la misma 谩rea de todas las partes de la superficie.  El sistema aplica esta estructura solo como una cuadr铆cula computacional para la generaci贸n de procedimientos; la superficie real de la luna ser谩 mucho m谩s lisa que la cuadr铆cula de generaci贸n. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b16/ef1/c39/b16ef1c39e3002d49b6d30ecb2a36a5e.png"></div><br>  <i>Esfera geod茅sica</i> <br><br>  Para obtener peque帽as lunas irregulares, las formas geom茅tricas b谩sicas est谩n distorsionadas por el ruido 3D de baja frecuencia. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/39e/971/5de/39e9715de990094a4c155425d6dd9d0f.jpg"></div><br>  <i>Esfera topogr谩fica distorsionada por ruido</i> <br><br>  Comenzando con esta base, el sistema usa una serie de capas conc茅ntricas.  Cada celda determina las caracter铆sticas volum茅tricas de la capa conc茅ntrica posterior.  La capa m谩s externa define las propiedades de la superficie de la luna. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1ff/e29/a6c/1ffe29a6cb9f66fbcda22b4f1e6d7ac4.jpg"></div><br>  <i>Carcasa conc茅ntrica</i> <br><br>  Cada revestimiento puede estar distorsionado por el ruido 3D de baja frecuencia exclusivo de ese revestimiento.  Si elige esta opci贸n de generaci贸n, entonces el caparaz贸n interno puede ser incluso m谩s grande que el externo. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/064/56f/4ab/06456f4aba57b3eeab4ebbd25a47978a.png"></div><br>  <i>Distorsi贸n de la c谩scara</i> <br><br>  En los diagramas anteriores, la distancia entre los dep贸sitos y la cantidad de distorsi贸n se exageran para mostrar m谩s claramente el proceso de construcci贸n.  En la pr谩ctica, los dep贸sitos estar谩n mucho m谩s cerca uno del otro, y la magnitud de su distorsi贸n ser谩 proporcionalmente menor. <br><br>  A continuaci贸n hablaremos sobre c贸mo crear la capa m谩s externa.  Los mismos principios se aplican al crear capas internas, por lo que no los consideraremos en detalle. <br><br>  Un sistema de luna procesal requiere un componente en tiempo real y un componente fuera de l铆nea.  El componente en tiempo real se ejecuta en la computadora del jugador.  El componente fuera de l铆nea se ejecuta en las computadoras de los desarrolladores de juegos.  El componente de generaci贸n fuera de l铆nea crea informaci贸n que puede complementarse r谩pidamente con un componente en tiempo real. <br><br>  Cada v茅rtice en una concha esf茅rica se clasifica como perteneciente a un bioma separado.  Un bioma es un conjunto de propiedades de superficie, que incluyen: altura, distribuci贸n de materiales, colocaci贸n de muestras y coloraci贸n de materiales. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/292/18d/4d3/29218d4d3fb1e588fc742ccf46d94e61.jpg"></div><br>  <i>Ejemplo de bioma</i> <br><br>  La informaci贸n del bioma contiene propiedades ricas en entrop铆a, como cr谩teres, mares secos, grietas superficiales causadas por mareas gravitacionales. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a10/4cd/a32/a104cda328cc7e51e19a3c321321d64a.jpg"></div><br>  <i>Gran cr谩ter registrado en la informaci贸n del bioma</i> <br><br>  La definici贸n del bioma tambi茅n contiene reglas para la colocaci贸n de objetos que determinan la ubicaci贸n, frecuencia y aleatorizaci贸n de piezas peque帽as: piedras, adoquines, repisas, etc. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a8/3bb/76a/9a83bb76a7843923d8774f2e0d2e3754.jpg"></div><br>  <i>Instancias de rock</i> <br><br>  Cada bioma se crea a partir de elementos colocados por mosaicos (mosaicos) para que el componente en tiempo real pueda aplicar la misma informaci贸n en diferentes partes de la luna, as铆 como en otras lunas.  La informaci贸n del bioma debe generarse de tal manera que sea posible una distorsi贸n y reorganizaci贸n r谩pidas, reduciendo as铆 el n煤mero de patrones ambientales repetidos y predecibles. <br><br>  El sistema utiliza dos tipos de mosaicos de bioma: de transici贸n y aislados. <br><br>  La informaci贸n de transici贸n de los biomas ocurre en 谩reas donde el bioma pasa al bioma vecino.  La informaci贸n aislada del bioma ocurre en 谩reas donde el sistema garantiza la ausencia de biomas vecinos. <br><br>  Estos dos modos separados son necesarios porque algunos elementos de los biomas, por ejemplo, los cr谩teres, solo pueden ubicarse en 谩reas donde el bioma no se transfiere a otro bioma, porque las transiciones entre biomas pueden afectar el perfil de altura y la apariencia de los elementos en relieve. <br><br>  A continuaci贸n se muestra un ejemplo simplificado de la luna, que utiliza tres biomas diferentes: polar, tropical y ecuatorial, coloreados, respectivamente, en rojo, azul y verde. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/d51/35f/f5dd5135fa458abddc2384468f770b11.png"></div><br>  <i>Luna con tres biomas</i> <br><br>  Las 谩reas con un bioma aislado tienen un color uniforme; en 谩reas con biomas de transici贸n, los colores se mezclan. <br><br>  El sistema utiliza un conjunto de ruido precalculado para introducir variabilidad en las zonas de transici贸n entre biomas, creando transiciones interesantes y 煤nicas de un bioma a otro. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abb/a7c/d18/abba7cd18459dccae567bbb832a843fe.png"></div><br>  <i>Ruido procesal aplicado a las transiciones entre biomas</i> <br><br>  En las im谩genes de arriba, el tama帽o de cada parte del bioma se exagera en relaci贸n con el tama帽o de la luna, a fin de mostrar m谩s claramente la t茅cnica para crear biomas.  Un sitio de bioma separado cubrir谩 un 谩rea de aproximadamente 10 por 10 km.  Una luna con un radio de 1,500 km tendr谩 una superficie de 30,000,000 km <sup>2</sup> .  Para cubrir esta superficie se requerir铆an casi 300,000 de esas 谩reas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/707/9d2/f98/7079d2f982a17f506ab76405a96a14c6.png"></div><br>  <i>Resoluci贸n de la red del bioma para la luna con un radio de 1.500 km.</i> <br><br>  La resoluci贸n de la red del bioma puede conducir a una gran cantidad de sitios de bioma.  El sistema no rastrear谩 cada uno de ellos individualmente, porque la ubicaci贸n de cada sitio puede calcularse anal铆ticamente.  Se puede asignar un bioma para la mayor铆a de los sitios desde un mapa de bioma de alto nivel. <br><br>  Los mapas de bioma de alto nivel determinan las caracter铆sticas clave de las lunas cuando se ven desde una gran distancia.  El sistema usa estos mapas para generar detalles adicionales en formas m谩s cercanas, preservando la uniformidad de la definici贸n de la luna cuando se ve desde diferentes distancias. <br><br>  Los mapas de bioma de alto nivel son im谩genes en 2D que se pueden colocar en la superficie de la luna mediante la parametrizaci贸n en 2D.  Cada punto del mapa contiene un identificador num茅rico del bioma que prevalece en la ubicaci贸n correspondiente de la superficie o capa interna. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/214/4a5/682/2144a56825fc99a706f7498ddddf4c54.png"></div><br>  <i>Mapa de bioma 2D</i> <br><br>  La imagen de arriba muestra un mapa con cuatro tipos diferentes de biomas (azul, rojo, amarillo y blanco).  La imagen se superpone a la esfera mediante la parametrizaci贸n 2D.  A continuaci贸n se muestra una posible parametrizaci贸n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97c/b14/da1/97cb14da1a178f0e11e5925bc6997c40.png"></div><br>  <i>Parametrizaci贸n 2D para el mapa de identificaci贸n del bioma</i> <br><br>  Adem谩s del mapa de identificaci贸n del bioma, el sistema permite el uso de otros mapas, por ejemplo, que contienen alturas y colores de superficie. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7a9/3b5/012/7a93b5012ca67394a4ac79ebbcb6a5e1.png"></div><br>  <i>Sombra de luna de larga distancia y renderizado</i> <br><br>  Un p铆xel en cada imagen puede cubrir 4 km <sup>2</sup> , lo que hace que su creaci贸n sea rentable.  Tales mapas de altura y color pueden ser generados por procedimientos o dibujados por artistas.  En un proyecto que usa solo una docena de lunas y donde cada luna debe tener propiedades naturales ricas y 煤nicas, es mejor usar el trabajo de artistas en esta etapa. <br><br>  La siguiente imagen muestra el proceso de generaci贸n de la altura de la superficie de la funda y otras propiedades: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/008/121/e0d/008121e0d8197c4d9d6f6708e536d9ad.png"></div><br>  <i>Tres escalas usadas para construir la luna</i> <br><br>  La luna consistir谩 en al menos un caparaz贸n esf茅rico.  Si hay varias conchas, el sistema extruye las conchas internas sobre la base de su radio m谩ximo y la funci贸n de la altura de la concha, que se obtiene al realizar el proceso con diferentes escalas descritas anteriormente. <br><br>  Para cada caparaz贸n, el dise帽ador de la luna crea un mapa de alto nivel de la distribuci贸n de los biomas, la definici贸n de biomas para los biomas que se encuentran en este mapa y la definici贸n de los materiales que se encuentran en este bioma. <br><br>  El sistema considera que el aire es un material aceptable, por lo que puede usarse para crear cavidades en cualquier caparaz贸n. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/069/94f/db9/06994fdb95020a907fa281bc0e0baf0b.png"></div><br>  <i>Secci贸n transversal del relieve de la luna, en la que son visibles varias conchas</i> <br><br>  Un caparaz贸n separado tambi茅n puede ser un objeto volum茅trico, cuya profundidad se establece mediante una pila de materiales.  La informaci贸n de la pila se almacena en un bioma. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5b/308/002/d5b30800245d119f324fb378ff56d35e.png"></div><br>  <i>Una pila de materiales compuesta de seis materiales.</i> <br><br>  Dado que los materiales subterr谩neos rara vez salen a la superficie, pueden describirse con una resoluci贸n mucho m谩s baja que los materiales de superficie de los biomas, y el uso del ruido de procedimiento local seguir谩 siendo invisible para el jugador. <br><br>  La funcionalidad de la pila de materiales puede ser suficiente para el dise帽o, porque algunos materiales en la pila pueden ser bastante raros.  El dise帽ador de biomas puede personalizar la prevalencia y el patr贸n de cualquier material en la pila. <br><br>  La generaci贸n de procedimientos se realiza mediante sombreadores GPU y algoritmos de CPU voxel. <br><br>  El sombreador calcula el color del fragmento para cada una de las tres escalas y mezcla estas muestras dependiendo de la distancia entre la c谩mara y el fragmento. <br><br>  Todas las partes que son demasiado peque帽as para registrarse en la geometr铆a.  pero a煤n afectando la complejidad percibida de las superficies, se registran en mapas normales generados en tiempo real basados en la determinaci贸n procesal de materiales, biomas o mapas de alto nivel para determinar la luna.  Debido a esto, se mantiene un bajo n煤mero de pol铆gonos en la escena. <br><br>  Debe pagar el precio por esto, siempre que la luna sea visible en la c谩mara, el bioma y los mapas de definici贸n de alto nivel deben almacenarse en la GPU.  Puede usar la carga selectiva solo de las texturas mip que son necesarias para representar la escala actual de la luna.  La cantidad total de memoria de GPU requerida se reduce al m铆nimo debido a la carga y descarga de la GPU al cambiar la posici贸n del observador. <br><br>  Cuando, debido a la proximidad a la c谩mara, los elementos individuales se vuelven lo suficientemente grandes, comienzan a aparecer en la salida de la geometr铆a utilizando la generaci贸n de v贸xeles en tiempo real.  Lo mismo se aplica a todas las partes de la luna terraformadas o excavadas por los jugadores.  Si los cambios son lo suficientemente grandes y pueden observarse desde la 贸rbita, el administrador de escenas adaptativas Voxel Farm aumenta el nivel de detalle (LOD) de todas las 谩reas, cambio que la aplicaci贸n considera importante. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/468305/">https://habr.com/ru/post/468305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../468287/index.html">Atributos de C #: sobre todos los aspectos</a></li>
<li><a href="../468291/index.html">Sinopsis del libro de Mark Gaulston "Puedo escucharte"</a></li>
<li><a href="../468293/index.html">Vive Cosmos: revisi贸n del nuevo juego de realidad virtual de HTC</a></li>
<li><a href="../468295/index.html">50 tonos de matplotlib - The Master Plots (con c贸digo Python completo)</a></li>
<li><a href="../468299/index.html">Qu茅 desarrollar Oracle para un desarrollador en 2019 (y despu茅s)</a></li>
<li><a href="../468307/index.html">Consejos y trucos forenses digitales: Telegram RAT basado en IM - Parte I</a></li>
<li><a href="../468309/index.html">Presentaci贸n de la fuente del c贸digo Cascadia</a></li>
<li><a href="../468311/index.html">Borrar la carpeta de descargas usando un programa Python</a></li>
<li><a href="../468313/index.html">Introduciendo la fuente de Cascadia Code</a></li>
<li><a href="../468315/index.html">C贸mo generar la firma correcta (SIG) en la API OK.RU. Trabajamos con un error 104</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>