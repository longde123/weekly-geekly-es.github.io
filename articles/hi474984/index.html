<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСЦ тЪФя╕П ЁЯНЪ RabbitMQ рдмрдирд╛рдо рдХрд╛рдлреНрдХрд╛: рд╡рд┐рдлрд▓рддрд╛ рдФрд░ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ ЁЯРЫ ЁЯТм ЁЯОТ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рд╣рдордиреЗ рд░рдмреНрдмрд┐рдЯрдордХреНрдпреВ рдХреНрд▓рд╕реНрдЯрд░рд┐рдВрдЧ рдХреЛ рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдФрд░ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪрд╛ред рдЕрдм рдЕрдкрд╛рдЪреЗ рдХрд╛рдлреНрдХрд╛ рдореЗрдВ рдЧрд╣рд░реА рдЦреБрджрд╛рдИ рдХрд░рддреЗ рд╣реИрдВред 

 рдпрд╣рд╛рдВ, рдкреНрд░рддрд┐рдХреГрддрд┐...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RabbitMQ рдмрдирд╛рдо рдХрд╛рдлреНрдХрд╛: рд╡рд┐рдлрд▓рддрд╛ рдФрд░ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/474984/"><img src="https://habrastorage.org/webt/rc/zb/n7/rczbn7bwtp8b5day0whi_wace2e.jpeg"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ,</a> рд╣рдордиреЗ рд░рдмреНрдмрд┐рдЯрдордХреНрдпреВ рдХреНрд▓рд╕реНрдЯрд░рд┐рдВрдЧ рдХреЛ рджреЛрд╖ рд╕рд╣рд┐рд╖реНрдгреБрддрд╛ рдФрд░ рдЙрдЪреНрдЪ рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреЗ рд▓рд┐рдП рдЬрд╛рдВрдЪрд╛ред  рдЕрдм рдЕрдкрд╛рдЪреЗ рдХрд╛рдлреНрдХрд╛ рдореЗрдВ рдЧрд╣рд░реА рдЦреБрджрд╛рдИ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдпрд╣рд╛рдВ, рдкреНрд░рддрд┐рдХреГрддрд┐ рдЗрдХрд╛рдИ рдПрдХ рд╡рд┐рднрд╛рдЬрди рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд╡рд┐рд╖рдп рдореЗрдВ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдЦрдВрдб рд╣реЛрддреЗ рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдпрд╛ рдмрд┐рдирд╛ рдПрдХ рдиреЗрддрд╛ рд╣реЛрддрд╛ рд╣реИред  рд╡рд┐рд╖рдп рдмрдирд╛рддреЗ рд╕рдордп, рд╡рд┐рднрд╛рдЬрди рдХреА рд╕рдВрдЦреНрдпрд╛ рдФрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рджрд░ рдЗрдВрдЧрд┐рдд рдХреА рдЬрд╛рддреА рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рдорд╛рди 3 рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдЕрд░реНрде рд╣реИ рддреАрди рдЯрд┐рдкреНрдкрдгрд┐рдпрд╛рдБ: рдПрдХ рдиреЗрддрд╛ рдФрд░ рджреЛ рдЕрдиреБрдпрд╛рдпреАред <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/ly/hd/ml/lyhdmlstwyv-tf_-ts54gife3cw.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">1. рдЪрд╛рд░ рд╡рд░реНрдЧреЛрдВ рдХреЛ рддреАрди рджрд▓рд╛рд▓реЛрдВ рдХреЗ рдмреАрдЪ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</font></i> <br><br>  рд╕рднреА рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдиреЗрддрд╛ рдХреЗ рдкрд╛рд╕ рдЬрд╛рддреЗ рд╣реИрдВред  рдЕрдиреБрдпрд╛рдпреА рд╕рдордп-рд╕рдордп рдкрд░ рдиреЗрддрд╛ рдХреЛ рдирд╡реАрдирддрдо рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рднреЗрдЬрддреЗ рд╣реИрдВред  рдЙрдкрднреЛрдХреНрддрд╛ рдХрднреА рднреА рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреА рдУрд░ рдирд╣реАрдВ рдореБрдбрд╝рддреЗ рд╣реИрдВ, рдмрд╛рдж рд╡рд╛рд▓реЗ рдХреЗрд╡рд▓ рдЕрддрд┐рд░реЗрдХ рдФрд░ рдЧрд▓рддреА рд╕рд╣рдирд╢реАрд▓рддрд╛ рдХреЗ рд▓рд┐рдП рдореМрдЬреВрдж рд╣реЛрддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/sb/fc/v0/sbfcv0j3mosfzvrb7qktoexl_lg.png"><br><br><h1>  рдзрд╛рд░рд╛ рд╡рд┐рдлрд▓ рд░рд╣реА </h1><br>  рдЬрдм рдПрдХ рджрд▓рд╛рд▓ рдЧрд┐рд░ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХрдИ рд╡рд░реНрдЧреЛрдВ рдХреЗ рдиреЗрддрд╛ рдЕрдХреНрд╕рд░ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВред  рдЙрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рдореЗрдВ, рджреВрд╕рд░реЗ рдиреЛрдб рд╕реЗ рдЕрдиреБрдпрд╛рдпреА рдиреЗрддрд╛ рдмрди рдЬрд╛рддрд╛ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рд╣рдореЗрд╢рд╛ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝реЗрд╢рди рдХрд╛рд░рдХ рднреА рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░рддрд╛ рд╣реИ: рдЪрд╛рд╣реЗ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдЕрдиреБрдпрд╛рдпреА рд╣реЛрдВ, рдФрд░ рдпрджрд┐ рдирд╣реАрдВ, рддреЛ рдПрдХ рдЕрд╕рдВрдмрджреНрдз рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреА рдЕрдиреБрдорддрд┐ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрднреА рдХреЗ рд▓рд┐рдП, рд╣рдо рдЗрд╕реЗ рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдмреНрд░реЛрдХрд░ 3 рдиреЗрдЯрд╡рд░реНрдХ рдЫреЛрдбрд╝ рджреЗрддрд╛ рд╣реИ - рдФрд░ рдзрд╛рд░рд╛ 2 рдХреЗ рд▓рд┐рдП рдмреНрд░реЛрдХрд░ 2 рдкрд░ рдПрдХ рдирдпрд╛ рдиреЗрддрд╛ рдЪреБрдирд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/im/ct/r0/imctr0qotjsjg4_jx3g6p5otk9u.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">2. рдмреНрд░реЛрдХрд░ 3 рдХреА рдореГрддреНрдпреБ рд╣реЛ рдЬрд╛рддреА рд╣реИ рдФрд░ рдмреНрд░реЛрдХрд░ 2 рдкрд░ рдЙрд╕рдХреЗ рдЕрдиреБрдпрд╛рдпреА рдХреЛ рдзрд╛рд░рд╛ 2 рдХреЗ рдирдП рдиреЗрддрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪреБрдирд╛ рдЬрд╛рддрд╛ рд╣реИ</font></i> <br><br>  рдлрд┐рд░ рдмреНрд░реЛрдХрд░ 1 рдкрддреНрддрд┐рдпрд╛рдВ рдФрд░ рд╕реЗрдХреНрд╢рди 1 рднреА рдЕрдкрдирд╛ рд▓реАрдбрд░ рдЦреЛ рджреЗрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреА рднреВрдорд┐рдХрд╛ рдмреНрд░реЛрдХрд░ 2 рдХреЛ рдЬрд╛рддреА рд╣реИред <br><br><img src="https://habrastorage.org/webt/rg/fo/zp/rgfozpk7b_t1odoxso1mvihmccu.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">3. рдХреЗрд╡рд▓ рдПрдХ рджрд▓рд╛рд▓ рдмрдЪрд╛ рд╣реИред</font></i>  <i><font color="gray">рд╕рднреА рдиреЗрддрд╛ рдПрдХ рд╣реА рд╢реВрдиреНрдп рдЕрддрд┐рд░реЗрдХ рджрд▓рд╛рд▓ рдкрд░ рд╣реИрдВред</font></i> <br><br>  рдЬрдм рдмреНрд░реЛрдХрд░ 1 рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд▓реМрдЯрддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЪрд╛рд░ рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реИ, рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдХреЛ рдХреБрдЫ рдЕрддрд┐рд░реЗрдХ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╕рднреА рдиреЗрддрд╛ рдЕрднреА рднреА рджрд▓рд╛рд▓ 2 рдкрд░ рдмрдиреЗ рд░рд╣реЗред <br><br><img src="https://habrastorage.org/webt/mh/lj/2s/mhlj2sn5r6rcjodqnl22450bjn8.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">4. рдиреЗрддрд╛ рджрд▓рд╛рд▓ 2 рдкрд░ рдмрдиреЗ рд░рд╣рддреЗ рд╣реИрдВ</font></i> <br><br>  рдЬрдм рджрд▓рд╛рд▓ 3 рдЙрдЧрддрд╛ рд╣реИ, рддреЛ рд╣рдо рдкреНрд░рддрд┐ рдЕрдиреБрднрд╛рдЧ рддреАрди рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рд╡рд╛рдкрд╕ рдХрд░рддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рд╕рднреА рдиреЗрддрд╛ рдЕрднреА рднреА рдмреНрд░реЛрдХрд░ 2 рдкрд░ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/3u/tb/op/3utbopk0awdg8rg62natyoxqg9o.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">5. рджрд▓рд╛рд▓реЛрдВ 1 рдФрд░ 3 рдХреА рдмрд╣рд╛рд▓реА рдХреЗ рдмрд╛рдж рдиреЗрддрд╛рдУрдВ рдХрд╛ рдЕрд╕рдВрддреБрд▓рд┐рдд рдкреНрд▓реЗрд╕рдореЗрдВрдЯ</font></i> <br><br>  рдХрд╛рдлреНрдХрд╛ рдХреЗ рдкрд╛рд╕ рд░реИрдмрд┐рдЯрдордХреНрдпреВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмреЗрд╣рддрд░ рд░реАрдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рдиреЗрддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрдкрдХрд░рдг рд╣реИред  рд╡рд╣рд╛рдВ рдЖрдкрдХреЛ рдерд░реНрдб-рдкрд╛рд░реНрдЯреА рдкреНрд▓рдЧ-рдЗрди рдпрд╛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдерд╛, рдЬрд┐рд╕рдиреЗ рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди рдЕрддрд┐рд░реЗрдХ рдХреЛ рдХрдо рдХрд░рдХреЗ рдореБрдЦреНрдп рдиреЛрдб рдХреЛ рдорд╛рдЗрдЧреНрд░реЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрддрд┐рдпреЛрдВ рдХреЛ рдмрджрд▓ рджрд┐рдпрд╛ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдмрдбрд╝реА рдХрддрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рддреБрд▓реНрдпрдХрд╛рд▓рди рдХреЗ рджреМрд░рд╛рди рджреБрд░реНрдЧрдорддрд╛ рдХреЗ рд╕рд╛рде рд░рдЦрд╛ рдЬрд╛рдирд╛ рдерд╛ред <br><br>  рдХрдлрд╝реНрдХрд╛ рдХреЗ рдкрд╛рд╕ рдиреЗрддреГрддреНрд╡ рдХреА рднреВрдорд┐рдХрд╛ рдХреЗ рд▓рд┐рдП "рдкрд╕рдВрджреАрджрд╛ рд╕рдВрдХреЗрдд" рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛ рд╣реИред  рдЬрдм рд╡рд┐рд╖рдп рдЕрдиреБрднрд╛рдЧ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рдХрд╛рдлреНрдХрд╛ рдиреЛрдбреНрд╕ рдореЗрдВ рдиреЗрддрд╛рдУрдВ рдХреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрди рдкрд╣рд▓реЗ рдиреЗрддрд╛рдУрдВ рдХреЛ рдкрд╕рдВрджреАрджрд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд░рддрд╛ рд╣реИред  рд╕рдордп рдХреЗ рд╕рд╛рде, рд╕рд░реНрд╡рд░ рд░рд┐рдмреВрдЯ, рд╡рд┐рдлрд▓рддрд╛рдУрдВ рдФрд░ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рд╡рд┐рдлрд▓рддрд╛рдУрдВ рдХреЗ рдХрд╛рд░рдг, рдиреЗрддрд╛ рдЕрдиреНрдп рдиреЛрдбреНрд╕ рдкрд░ рд╕рдорд╛рдкреНрдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рд╡рд░реНрдгрд┐рдд рдЪрд░рдо рдорд╛рдорд▓реЗ рдореЗрдВ рд╣реИред <br><br>  рдЗрд╕реЗ рдареАрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдХрд╛рдлреНрдХрд╛ рджреЛ рд╡рд┐рдХрд▓реНрдк рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ: <br><br><ul><li>  <i>Auto.leader.rebalance.enable = true</i> рд╡рд┐рдХрд▓реНрдк рдирд┐рдпрдВрддреНрд░рдХ рдиреЛрдб рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдиреЗрддрд╛рдУрдВ рдХреЛ рдкрд╕рдВрджреАрджрд╛ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдореЗрдВ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдФрд░ рдЬрд┐рд╕рд╕реЗ рд╕рдорд╛рди рд╡рд┐рддрд░рдг рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИред <br></li><li>  рдХреЛрдИ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдкреБрди: рдЕрд╕рд╛рдЗрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <i>kafka-preferred-replica-election.sh</i> рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛ рд╕рдХрддрд╛ рд╣реИред </li></ul><br><br><img src="https://habrastorage.org/webt/qt/2l/th/qt2lth99rb1fhzq8g4r93uoxh6k.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">6. рдкреБрди: рд╕рдВрддреБрд▓рди рдХреЗ рдмрд╛рдж рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ</font></i> <br><br>  рдпрд╣ рд╡рд┐рдлрд▓рддрд╛ рдХрд╛ рдПрдХ рд╕рд░рд▓реАрдХреГрдд рд╕рдВрд╕реНрдХрд░рдг рдерд╛, рд▓реЗрдХрд┐рди рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдпрд╣рд╛рдВ рдХреБрдЫ рднреА рдЬрдЯрд┐рд▓ рдирд╣реАрдВ рд╣реИред  рдпрд╣ рд╕рдм рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ (рдЗрди-рд╕рд┐рдВрдХ рд░реЗрдкреНрд▓рд┐рдХрд╛, рдЖрдИрдПрд╕рдЖрд░) рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЖрддрд╛ рд╣реИред <br><br><h1>  рд╕рдордиреНрд╡рд┐рдд рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ (ISR) </h1><br>  ISR рдПрдХ рд╡рд┐рднрд╛рдЬрди рдХреЗ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕рдореВрд╣ рд╣реИ рдЬрд┐рд╕реЗ "рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝" (рдЗрди-рд╕рд┐рдВрдХ) рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдПрдХ рдиреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрдиреБрдпрд╛рдпреА рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ <i>рдЕрдиреБрд╡рд░реНрддреА</i> рдХреА рд╕рдорд╛рдкреНрддрд┐ рд╕реЗ рдкрд╣рд▓реЗ рд╕рднреА рдиреЗрддрд╛ рд╕рдВрджреЗрд╢реЛрдВ рдХреА рд╕рдЯреАрдХ рдкреНрд░рддрд┐рдпрд╛рдВ рдмрдирд╛рддреЗ рд╣реИрдВ, рддреЛ рдПрдХ рдЕрдиреБрдпрд╛рдпреА рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЕрдиреБрдпрд╛рдпреА рдХреЛ ISR рд╕реЗрдЯ рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрджрд┐: <br><br><ul><li>  рдЕрдВрддрд░рд╛рд▓ <i>рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЗ</i> рд▓рд┐рдП рдирдореВрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдирд╣реАрдВ рдХрд┐рдпрд╛ рдерд╛ред <i>lag.time.max.ms</i> (рдореГрдд рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ) <br></li><li>  рдЕрдВрддрд░рд╛рд▓ <i>рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЗ</i> рд▓рд┐рдП рдЕрджреНрдпрддрди рдХрд░рдиреЗ рдХрд╛ рд╕рдордп рдирд╣реАрдВ рдерд╛ред <i>lag.time.max.ms</i> (рдзреАрдорд╛ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ) </li></ul><br>  рдлрд╝реЙрд▓реЛрдЕрд░реНрд╕ рдЗрдВрдЯрд░рд╡рд▓ <i>рдкреНрд░рддрд┐рдХреГрддрд┐ рдореЗрдВ рдлрд╝рд╛рдЗрдирд▓ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдмрдирд╛рддреЗ</i> рд╣реИрдВ <i>редfetch.wait.max.ms</i> , рдЬреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ 500 рдПрдордПрд╕ рд╣реИред <br><br>  рдЖрдИрдПрд╕рдЖрд░ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рд╕рдордЭрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирд┐рд░реНрдорд╛рддрд╛ (рдирд┐рд░реНрдорд╛рддрд╛) рдФрд░ рдХреБрдЫ рд╡рд┐рдлрд▓рддрд╛ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреА рдкреБрд╖реНрдЯрд┐ рдХреЛ рджреЗрдЦрдирд╛ рд╣реЛрдЧрд╛ред  рдЬрдм рджрд▓рд╛рд▓ рдПрдХ рдкреБрд╖реНрдЯрд┐рдХрд░рдг рднреЗрдЬрддрд╛ рд╣реИ рддреЛ рдирд┐рд░реНрдорд╛рддрд╛ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ: <br><br><ul><li>  acks = 0, рдкреБрд╖реНрдЯрд┐ рдирд╣реАрдВ рднреЗрдЬреА рдЬрд╛рддреА рд╣реИ <br></li><li>  akes = 1, рдкреБрд╖реНрдЯрд┐рдХрд░рдг рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рдиреЗрддрд╛ рдиреЗ рдЕрдкрдиреЗ рд╕реНрдерд╛рдиреАрдп рд▓реЙрдЧ рдХреЛ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦрд╛ рд╣реИ <br></li><li>  acks = рд╕рднреА, ISR рдореЗрдВ рд╕рднреА рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреЗ рдмрд╛рдж рд╕реНрдерд╛рдиреАрдп рд▓реЙрдЧ рдореЗрдВ рдПрдХ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦреЗ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдкреБрд╖реНрдЯрд┐ рдХреА рдЬрд╛рддреА рд╣реИ </li></ul><br>  рдХрд╛рдлреНрдХрд╛ рд╢рдмреНрджрд╛рд╡рд▓реА рдореЗрдВ, рдпрджрд┐ ISR рдиреЗ рд╕рдВрджреЗрд╢ рд╕рд╣реЗрдЬрд╛ рд╣реИ, рддреЛ рд╡рд╣ "рдкреНрд░рддрд┐рдмрджреНрдз" рд╣реИред  рдЕрдХреНрд╕ = рд╕рднреА рд╕рдмрд╕реЗ рд╕реБрд░рдХреНрд╖рд┐рдд рд╡рд┐рдХрд▓реНрдк рд╣реИ, рд▓реЗрдХрд┐рди рдЕрддрд┐рд░рд┐рдХреНрдд рджреЗрд░реА рднреАред  рдЖрдЗрдП рд╡рд┐рдлрд▓рддрд╛ рдХреЗ рджреЛ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдкрд░ рдЧреМрд░ рдХрд░реЗрдВ рдФрд░ рдХреИрд╕реЗ рдЕрд▓рдЧ-рдЕрд▓рдЧ 'рдРрдХреНрд╕' рд╡рд┐рдХрд▓реНрдк рдЖрдИрдПрд╕рдЖрд░ рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рддреЗ рд╣реИрдВред <br><br><h3>  рдЕрдХреНрд╕ = 1 рдФрд░ рдЖрдИрдПрд╕рдЖрд░ </h3><br>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рд╣рдо рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдпрджрд┐ рдиреЗрддрд╛ рд╕рднреА рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рд╕рдВрджреЗрд╢ рдХреЛ рд╕рд╣реЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдпрджрд┐ рдиреЗрддрд╛ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдбреЗрдЯрд╛ рдЦреЛ рд╕рдХрддрд╛ рд╣реИред  рдПрдХ <i>рдЕрдирдЗрдирдХрдВрд╕реНрдЯреНрд░рд┐рдХреНрдЯреЗрдб рдлреЙрд▓реЛрдЕрд░ рдореЗрдВ рдЬрд╛рдиреЗ рд╕реЗ рдЕрдпреЛрдЧреНрдп</i> рдпрд╛ рдЕрдХреНрд╖рдо рдХрд░рдХреЗ рдЕрдХреНрд╖рдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, рдирд┐рд░реНрдорд╛рддрд╛ acks = 1 рдкрд░ рд╕реЗрдЯ рд╣реИред  рдЕрдиреБрднрд╛рдЧ рд╕рднреА рддреАрди рджрд▓рд╛рд▓реЛрдВ рдореЗрдВ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдмреНрд░реЛрдХрд░ 3 рдкреАрдЫреЗ рд╣реИ, рдпрд╣ рдЖрда рд╕реЗрдХрдВрдб рдкрд╣рд▓реЗ рдиреЗрддрд╛ рдХреЗ рд╕рд╛рде рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рд╣реИ рдФрд░ рдЕрдм 7456 рд╕рдВрджреЗрд╢реЛрдВ рд╕реЗ рдкреАрдЫреЗ рд╣реИред  рдмреНрд░реЛрдХрд░ 1 рдХреЗрд╡рд▓ рдПрдХ рд╕реЗрдХрдВрдб рдкреАрдЫреЗ рд╣реИред  рд╣рдорд╛рд░реЗ рдирд┐рд░реНрдорд╛рддрд╛ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрддреЗ рд╣реИрдВ рдФрд░ рдЬрд▓реНрджреА рд╕реЗ рдкреАрдЫреЗ рд╣рдЯрддреЗ рд╣реИрдВ, рдзреАрдореЗ рдпрд╛ рдореГрдд рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдУрд╡рд░рд╣реЗрдб рдХрд┐рдП рдмрд┐рдирд╛, рдЬреЛ рдХрд┐ рдиреЗрддрд╛ рдХреЛ рдЙрдореНрдореАрдж рдирд╣реАрдВ рд╣реИред <br><br><img src="https://habrastorage.org/webt/ej/bh/g7/ejbhg7svgcphrhpdtzbwuw--wg4.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">7. рддреАрди рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде ISR</font></i> <br><br>  рдмреНрд░реЛрдХрд░ 2 рд╡рд┐рдлрд▓ рд░рд╣рддрд╛ рд╣реИ, рдФрд░ рдирд┐рд░реНрдорд╛рддрд╛ рдХрдиреЗрдХреНрд╢рди рддреНрд░реБрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  рдмреНрд░реЛрдХрд░ 1 рдХреЗ рдиреЗрддреГрддреНрд╡ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рдмрд╛рдж, рд╣рдо 123 рд╕рдВрджреЗрд╢ рдЦреЛ рджреЗрддреЗ рд╣реИрдВред  рдмреНрд░реЛрдХрд░ 1 рдкрд░ рдЕрдиреБрдпрд╛рдпреА рдЖрдИрдПрд╕рдЖрд░ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЬрдм рд╡рд╣ рдЧрд┐рд░ рдЧрдпрд╛ рддреЛ рдиреЗрддрд╛ рдХреЗ рд╕рд╛рде рдкреВрд░реА рддрд░рд╣ рд╕реЗ рд╕рдордиреНрд╡рдп рдирд╣реАрдВ рдХрд┐рдпрд╛ред <br><br><img src="https://habrastorage.org/webt/6y/th/y9/6ythy9olfa5zr2wyqtfqcrq8u5e.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">8. рдЕрд╕рдлрд▓ рд╣реЛрдиреЗ рдкрд░, рд╕рдВрджреЗрд╢ рдЦреЛ рдЬрд╛рддреЗ рд╣реИрдВ</font></i> <br><br>  <i>Bootstrap.servers</i> рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореЗрдВ, рдирд┐рд░реНрдорд╛рддрд╛ рдХрдИ рджрд▓рд╛рд▓реЛрдВ рдХреЛ рд╕реВрдЪреАрдмрджреНрдз рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╡рд╣ рдХрд┐рд╕реА рдЕрдиреНрдп рдмреНрд░реЛрдХрд░ рд╕реЗ рдкреВрдЫ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдЕрдиреБрднрд╛рдЧ рдХрд╛ рдирдпрд╛ рдиреЗрддрд╛ рдмрди рдЧрдпрд╛ред  рд╡рд╣ рдлрд┐рд░ рдмреНрд░реЛрдХрд░ 1 рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрдмрдВрдз рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╕рдВрджреЗрд╢ рднреЗрдЬрдирд╛ рдЬрд╛рд░реА рд░рдЦрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/br/o6/jr/bro6jrn5nt-a0wzvg_yt0csmdgg.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">9. рд╕рдВрджреЗрд╢ рднреЗрдЬрдирд╛ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рдмреНрд░реЗрдХ рдХреЗ рдмрд╛рдж рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ</font></i> <br><br>  рдмреНрд░реЛрдХрд░ 3 рд╕реЗ рднреА рдЖрдЧреЗред  рдпрд╣ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ред  рдпрд╣ рджрд▓рд╛рд▓реЛрдВ рдХреЗ рдмреАрдЪ рдзреАрдореЗ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди, рднрдВрдбрд╛рд░рдг рд╕рдорд╕реНрдпрд╛ рдЖрджрд┐ рдХреЗ рдХрд╛рд░рдг рд╣реЛ рд╕рдХрддрд╛ рд╣реИред рдЗрд╕реЗ ISR рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЕрдм ISR рдореЗрдВ рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╣реИ - рдиреЗрддрд╛!  рдирд┐рд░реНрдорд╛рддрд╛ рд╕рдВрджреЗрд╢ рднреЗрдЬрдирд╛ рдФрд░ рдкреБрд╖реНрдЯрд┐ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/b2/qj/aj/b2qjaj5g_yx2wfb-jdkalxr9074.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">10. рдмреНрд░реЛрдХрд░ 3 рдкрд░ рдлреЙрд▓реЛрдЕрд░ рдХреЛ ISR рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</font></i> <br><br>  рдмреНрд░реЛрдХрд░ 1 рдЧрд┐рд░рддрд╛ рд╣реИ, рдФрд░ 15286 рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдиреБрдХрд╕рд╛рди рдХреЗ рд╕рд╛рде рдиреЗрддрд╛ рдХреА рднреВрдорд┐рдХрд╛ рджрд▓рд╛рд▓ 3 рдХреЛ рдЬрд╛рддреА рд╣реИ!  рдирд┐рд░реНрдорд╛рддрд╛ рдХрдиреЗрдХреНрд╢рди рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИред  ISR рдХреЗ рдмрд╛рд╣рд░ рдиреЗрддрд╛ рдХреЗ рдкрд╛рд╕ рдЬрд╛рдирд╛ рдХреЗрд╡рд▓ рд╕реЗрдЯрд┐рдВрдЧ <i>рдЕрд╢реБрджреНрдз рдХреЗ</i> рдХрд╛рд░рдг рд╕рдВрднрд╡ рдерд╛ред  рдпрджрд┐ рдпрд╣ <i>рдЧрд▓рдд рдкрд░</i> рд╕реЗрдЯ рд╣реИ, рддреЛ рд╕рдВрдХреНрд░рдордг рдирд╣реАрдВ рд╣реБрдЖ рд╣реЛрдЧрд╛, рдФрд░ рд╕рднреА рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рдЕрдиреБрд░реЛрдз рдХреЛ рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдкреНрд░рддрд┐рдХреГрддрд┐ рдореЗрдВ рдЕрдкрдиреЗ рдЕрдирдЫреБрдП рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдмреНрд░реЛрдХрд░ 1 рдХреА рд╡рд╛рдкрд╕реА рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рдЬреЛ рдлрд┐рд░ рд╕реЗ рдмрдврд╝рдд рд▓реЗрдЧрд╛ред <br><br><img src="https://habrastorage.org/webt/rr/n1/-n/rrn1-nekmhjtro9pxeueciytb50.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">11. рдмреНрд░реЛрдХрд░ 1 рдмреВрдБрджред</font></i>  <i><font color="gray">рдпрджрд┐ рд╡рд┐рдлрд▓рддрд╛ рд╣реЛрддреА рд╣реИ, рддреЛ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╕рдВрджреЗрд╢ рдЦреЛ рдЬрд╛рддреЗ рд╣реИрдВ</font></i> <br><br>  рдирд┐рд░реНрдорд╛рддрд╛ рдЕрдВрддрд┐рдо рдмреНрд░реЛрдХрд░ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рдВрдмрдВрдз рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рджреЗрдЦрддрд╛ рд╣реИ рдХрд┐ рд╡рд╣ рдЕрдм рдЕрдиреБрднрд╛рдЧ рдХрд╛ рдиреЗрддрд╛ рд╣реИред  рд╡рд╣ рджрд▓рд╛рд▓ 3 рдХреЛ рд╕рдВрджреЗрд╢ рднреЗрдЬрдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/qj/qq/go/qjqqgoevfafcmcxtidd_bvjw9wi.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">12. рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд░рд╛рдо рдХреЗ рдмрд╛рдж, рд╕рдВрджреЗрд╢ рдлрд┐рд░ рд╕реЗ рдЕрдиреБрднрд╛рдЧ 0 рдореЗрдВ рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ</font></i> <br><br>  рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рдирдП рдХрдиреЗрдХреНрд╢рди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдФрд░ рдПрдХ рдирдП рдиреЗрддрд╛ рдХреА рдЦреЛрдЬ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд░реБрдХрд╛рд╡рдЯреЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдирд┐рд░реНрдорд╛рддрд╛ рдиреЗ рд▓рдЧрд╛рддрд╛рд░ рд╕рдВрджреЗрд╢ рднреЗрдЬреЗред  рдпрд╣ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реНрдерд┐рд░рддрд╛ (рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛) рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрд╣реБрдВрдЪ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдХрд╛рдлреНрдХрд╛ рдиреЗ рд╣рдЬрд╛рд░реЛрдВ рд╕рдВрджреЗрд╢ рдЦреЛ рджрд┐рдП, рд▓реЗрдХрд┐рди рдирдИ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐рдпреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦрд╛ред <br><br><h3>  рдЕрдХреНрд╕ = рд╕рднреА рдФрд░ рдЖрдИрдПрд╕рдЖрд░ </h3><br>  рдЖрдЗрдП рдЗрд╕ рдкрд░рд┐рджреГрд╢реНрдп рдХреЛ рдлрд┐рд░ рд╕реЗ рджреЛрд╣рд░рд╛рдПрдВ, рд▓реЗрдХрд┐рди <i>acks = рд╕рднреА рдХреЗ рд╕рд╛рде</i> ред  рджреЗрд░реА рджрд▓рд╛рд▓ 3 рдЪрд╛рд░ рд╕реЗрдХрдВрдб рдХреА рдПрдХ рдФрд╕рддред  рдирд┐рд░реНрдорд╛рддрд╛ <i>acks = рд╕рднреА рдХреЗ</i> рд╕рд╛рде рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИ, рдФрд░ рдЕрдм рдПрдХ рддреНрд╡рд░рд┐рдд рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдиреЗрддрд╛ рддрдм рддрдХ рдЗрдВрддрдЬрд╛рд░ рдХрд░рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ ISR рдХреЗ рд╕рднреА рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рдХрд░ рджреЗрддрд╛ред <br><br><img src="https://habrastorage.org/webt/3c/6j/a5/3c6ja5msoncfx1s-xbyjpmujtdo.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">13. рддреАрди рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде ISRред</font></i>  <i><font color="gray">рдПрдХ рдзреАрдореА рд╣реИ, рдЬрд┐рд╕рд╕реЗ рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдореЗрдВ рджреЗрд░реА рд╣реЛ рд░рд╣реА рд╣реИ</font></i> <br><br>  рдЪрд╛рд░ рд╕реЗрдХрдВрдб рдХреЗ рдЕрддрд┐рд░рд┐рдХреНрдд рд╡рд┐рд▓рдВрдм рдХреЗ рдмрд╛рдж, рдмреНрд░реЛрдХрд░ 2 рдХреЛ рдПрд╕реАрд╕реА рднреЗрдЬрддрд╛ рд╣реИред  рд╕рднреА рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рдЕрдм рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдкрдбреЗрдЯ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/ol/eg/y6/olegy6unibvup0tlza6cbd4gqic.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">14. рд╕рднреА рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдмрдЪрд╛рддреА рд╣реИрдВ рдФрд░ ack рдХреЛ рднреЗрдЬрд╛ рдЬрд╛рддрд╛ рд╣реИ</font></i> <br><br>  рдмреНрд░реЛрдХрд░ 3 рдЕрдм рдФрд░ рднреА рдкреАрдЫреЗ рд╣реИ рдФрд░ рдЙрд╕реЗ ISR рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред  рджреЗрд░реА рдХрд╛рдлреА рдХрдо рд╣реЛ рдЧрдИ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЖрдИрдПрд╕рдЖрд░ рдореЗрдВ рдХреЛрдИ рдзреАрдореА рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рдирд╣реАрдВ рдмрдЪреА рд╣реИрдВред  рдмреНрд░реЛрдХрд░ 2 рдЕрдм рдХреЗрд╡рд▓ рдмреНрд░реЛрдХрд░ 1 рдХрд╛ рдЗрдВрддрдЬрд╛рд░ рдХрд░ рд░рд╣рд╛ рд╣реИ, рдФрд░ рдЙрд╕рдХреЗ рдкрд╛рд╕ рдФрд╕рддрди 500 рдПрдордПрд╕ рд╣реИред <br><br><img src="https://habrastorage.org/webt/ub/0e/7j/ub0e7jm1siaa9dvcmxyldti1ify.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">15. рджрд▓рд╛рд▓ 3 рдкрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ ISR рд╕реЗ рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИ</font></i> <br><br>  рддрдм рдмреНрд░реЛрдХрд░ 2 рдЧрд┐рд░рддрд╛ рд╣реИ, рдФрд░ рд▓реАрдбрд░ рдореИрд╕реЗрдЬ рдЦреЛрдП рдмрд┐рдирд╛ рдмреНрд░реЛрдХрд░ 1 рдХреЛ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/a7/ts/8m/a7ts8mywsvuowiof5jp6f6eszlq.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">16. рдмреНрд░реЛрдХрд░ 2 рдЧрд┐рд░ рд░рд╣рд╛ рд╣реИ</font></i> <br><br>  рдирд┐рд░реНрдорд╛рддрд╛ рдПрдХ рдирдпрд╛ рдиреЗрддрд╛ рдкрд╛рддрд╛ рд╣реИ рдФрд░ рдЙрд╕реЗ рд╕рдВрджреЗрд╢ рднреЗрдЬрдиреЗ рд▓рдЧрддрд╛ рд╣реИред  рджреЗрд░реА рдЕрднреА рднреА рдХрдо рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдм ISR рдореЗрдВ рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╢рд╛рдорд┐рд▓ рд╣реИ!  рдЗрд╕рд▓рд┐рдП, <i>acks = рд╕рднреА</i> рд╡рд┐рдХрд▓реНрдк рдЕрддрд┐рд░реЗрдХ рдирд╣реАрдВ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред <br><br><img src="https://habrastorage.org/webt/-z/i_/od/-zi_odb0nc-nf0xe1tsxmzlr-uq.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">17. рдмреНрд░реЛрдХрд░ 1 рдкрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рдЦреЛрдП рдмрд┐рдирд╛ рд▓реАрдб рд▓реЗрддрд╛ рд╣реИ</font></i> <br><br>  рддрдм рдмреНрд░реЛрдХрд░ 1 рдЧрд┐рд░рддрд╛ рд╣реИ, рдФрд░ рд▓реАрдбрд░ рдмреНрд░реЛрдХрд░ 3 рдХреЛ 14,238 рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдиреБрдХрд╕рд╛рди рдХреЗ рд╕рд╛рде рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИ! <br><br><img src="https://habrastorage.org/webt/sr/x5/1m/srx51mjemyxnksoewy6n91_lgqy.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">18. рдмреНрд░реЛрдХрд░ 1 рдХреА рдореГрддреНрдпреБ рд╣реЛ рдЬрд╛рддреА рд╣реИ, рдФрд░ рдЕрд╢реБрджреНрдз рд╕реЗрдЯрдЕрдк рдХреЗ рд╕рд╛рде рдиреЗрддреГрддреНрд╡ рдкрд░рд┐рд╡рд░реНрддрди рд╕реЗ рд╡реНрдпрд╛рдкрдХ рдбреЗрдЯрд╛ рд╣рд╛рдирд┐ рд╣реЛрддреА рд╣реИ</font></i> <br><br>  рд╣рдо <i>рдЕрд╢реБрджреНрдз</i> рдХреЛ <i>рдкрд░рд┐рднрд╛рд╖рд┐рдд</i> рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдереЗред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдпрд╣ <i>рдЧрд▓рдд рд╣реИ</i> ред  <i>рд╕рднреА</i> рдЕрддрд┐рд░рд┐рдХреНрдд <i>рдЕрд╢реБрджреНрдз</i> рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд╕рд╛рде <i>рдПрдХреНрд╕реЗрд╕рд░реАрдЬрд╝</i> рд╕реЗрдЯ рдХрд░рдирд╛ред  рд▓реЗрдХрд┐рди, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ, рд╣рдо рдЕрднреА рднреА рд╕рдВрджреЗрд╢ рдЦреЛ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣реЛрдЧрд╛ рдЕрдЧрд░ рд╣рдо рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдмрдврд╝рд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?  рдЖрдк <i>рдЕрд╕реНрд╡рдЪреНрдЫрддрд╛</i> рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рдиреЗрддрд╛ рдореБрд╢реНрдХрд┐рд▓ рд╕реЗ рдЧрд┐рд░рддрд╛ рд╣реИ рдФрд░ рдбреЗрдЯрд╛ рдХреЛ рдЕрдкрдиреЗ рд╕рд╛рде рд▓реЗ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕рдВрджреЗрд╢ рдЕрднреА рднреА рдЦреЛ рдЧрдП рд╣реИрдВ, рдкреНрд▓рд╕ рдПрдХреНрд╕реЗрд╕рд┐рдмрд┐рд▓рд┐рдЯреА рддрдм рддрдХ рдЦреЛ рдЬрд╛рддреА рд╣реИ рдЬрдм рддрдХ рдХрд┐ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдХ рд╕реНрдерд┐рддрд┐ рдареАрдХ рдирд╣реАрдВ рдХрд░ рд▓реЗрддрд╛ред <br><br>  рд╕рднреА рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдЕрддрд┐рд░реЗрдХ рдХреА рдЧрд╛рд░рдВрдЯреА рджреЗрдирд╛ рдмреЗрд╣рддрд░ рд╣реИ, рдФрд░ рдЕрдиреНрдпрдерд╛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рд╕реЗ рдЗрдирдХрд╛рд░ рдХрд░рдирд╛ред  рдлрд┐рд░, рдХрдо рд╕реЗ рдХрдо рдмреНрд░реЛрдХрд░ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, рдбреЗрдЯрд╛ рд╣рд╛рдирд┐ рдХреЗрд╡рд▓ рджреЛ рдпрд╛ рдЕрдзрд┐рдХ рдПрдХ рд╕рд╛рде рд╡рд┐рдлрд▓рддрд╛рдУрдВ рд╕реЗ рд╕рдВрднрд╡ рд╣реИред <br><br><h3>  рдЕрдХреНрд╕ = рд╕рднреА, min.insync.replicas рдФрд░ ISR </h3><br>  <i>Min.insync.replicas</i> рд╡рд┐рд╖рдп <i>рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде,</i> рд╣рдо рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдмрдврд╝рд╛рддреЗ рд╣реИрдВред  рдЖрдЗрдП рдПрдХ рдмрд╛рд░ рдлрд┐рд░ рд╕реЗ рдЖрдЦрд┐рд░реА рдкрд░рд┐рджреГрд╢реНрдп рдХреЗ рдЕрдВрддрд┐рдо рднрд╛рдЧ рдкрд░ рдЬрд╛рдПрдВ, рд▓реЗрдХрд┐рди рдЗрд╕ рдмрд╛рд░ <i>min.insync.replicas = 2 рдХреЗ рд╕рд╛рде</i> ред <br><br>  рддреЛ, рдмреНрд░реЛрдХрд░ 2 рдореЗрдВ рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рдиреЗрддрд╛ рд╣реИ, рдФрд░ рдмреНрд░реЛрдХрд░ 3 рдкрд░ рдЕрдиреБрдпрд╛рдпреА рдХреЛ ISR рд╕реЗ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/5g/ij/ls/5gijlstkvqxo4ojr6wfxxwn719m.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">19. рджреЛ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХрд╛ ISR</font></i> <br><br>  рдмреНрд░реЛрдХрд░ 2 рдЧрд┐рд░рддрд╛ рд╣реИ, рдФрд░ рд▓реАрдбрд░ рдореИрд╕реЗрдЬ рдЦреЛрдП рдмрд┐рдирд╛ рдмреНрд░реЛрдХрд░ 1 рдХреЛ рдкрд╛рд╕ рдХрд░рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдм ISR рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рд╣реИред  рдпрд╣ рд░рд┐рдХреЙрд░реНрдб рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдиреНрдпреВрдирддрдо рд╕рдВрдЦреНрдпрд╛ рдХреЗ рдЕрдиреБрд░реВрдк рдирд╣реАрдВ рд╣реИ, рдФрд░ рдЗрд╕рд▓рд┐рдП рдмреНрд░реЛрдХрд░ <i>NotEnoughReplicas</i> рддреНрд░реБрдЯрд┐ рдХреЗ рд╕рд╛рде рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреЗ рдкреНрд░рдпрд╛рд╕ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/ng/p5/fj/ngp5fjym6nvykpohj8brnl8bvxc.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">20. ISR рдХреА рд╕рдВрдЦреНрдпрд╛ min.insync.replicas рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдПрдХ рдХрдо рд╣реИ</font></i> <br><br>  рдпрд╣ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реНрдерд┐рд░рддрд╛ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдзрддрд╛ рдХрд╛ рдмрд▓рд┐рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдПрдХ рд╕рдВрджреЗрд╢ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдЧрд╛рд░рдВрдЯреА рджреЗрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рдХрдо рд╕реЗ рдХрдо рджреЛ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдкрд░ рджрд░реНрдЬ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ рдирд┐рд░реНрдорд╛рддрд╛ рдХреЛ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдЖрддреНрдорд╡рд┐рд╢реНрд╡рд╛рд╕ рджреЗрддрд╛ рд╣реИред  рдпрд╣рд╛рдВ, рд╕рдВрджреЗрд╢ рдХрд╛ рдиреБрдХрд╕рд╛рди рддрднреА рд╕рдВрднрд╡ рд╣реИ рдЬрдм рджреЛ рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рдПрдХ рд╕рд╛рде рдПрдХ рдЫреЛрдЯреЗ рдЕрдВрддрд░рд╛рд▓ рдореЗрдВ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рдПрдВ, рдЬрдм рддрдХ рдХрд┐ рд╕рдВрджреЗрд╢ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рдЕрдиреБрдпрд╛рдпреА рдХреЛ рджреЛрд╣рд░рд╛рдпрд╛ рди рдЬрд╛рдП, рдЬреЛ рдХрд┐ рд╕рдВрднрд╛рд╡рдирд╛ рдирд╣реАрдВ рд╣реИред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдк рдПрдХ рд╕реБрдкрд░рдкрд░рд╛рдиреЙрдпрдб рд╣реИрдВ, рддреЛ рдЖрдк рдкреНрд░рддрд┐рдХреГрддрд┐ рдЕрдиреБрдкрд╛рдд рдХреЛ 5 рдкрд░ рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ <i>min.insync.replicas</i> рдХреЛ 3. рдлрд┐рд░ рд░рд┐рдХреЙрд░реНрдб рдЦреЛрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рддреАрди рджрд▓рд╛рд▓реЛрдВ рдХреЛ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдЧрд┐рд░рдирд╛ рд╣реЛрдЧрд╛!  рдмреЗрд╢рдХ, рдЗрд╕ рддрд░рд╣ рдХреА рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреЗ рд▓рд┐рдП рдЖрдк рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рджреЗрд░реА рдХрд╛ рднреБрдЧрддрд╛рди рдХрд░реЗрдВрдЧреЗред <br><br><h1>  рдЬрдм рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдВрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ </h1><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">RabbitMQ рдХреА рддрд░рд╣</a> , рдХрднреА-рдХрднреА рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдХреЗ рд▓рд┐рдП рдкрд╣реБрдБрдЪ рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдЖрдкрдХреЛ рдЗрд╕ рдмрд╛рд░реЗ рдореЗрдВ рд╕реЛрдЪрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ: <br><br><ul><li>  рдХреНрдпрд╛ рдХреЛрдИ рдкреНрд░рдХрд╛рд╢рдХ рдХреЗрд╡рд▓ рдПрдХ рддреНрд░реБрдЯрд┐ рджреЗ рд╕рдХрддрд╛ рд╣реИ, рдФрд░ рдПрдХ рдЙрдЪреНрдЪ рд╕реЗрд╡рд╛ рдпрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдмрд╛рдж рдореЗрдВ рдлрд┐рд░ рд╕реЗ рдХреЛрд╢рд┐рд╢ рдХрд░ рд╕рдХрддрд╛ рд╣реИ? <br></li><li>  рдХреНрдпрд╛ рдПрдХ рдкреНрд░рдХрд╛рд╢рдХ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдпрд╛ рдмрд╛рдж рдореЗрдВ рдкреБрдирдГ рдкреНрд░рдпрд╛рд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛рдмреЗрд╕ рдореЗрдВ рдПрдХ рд╕рдВрджреЗрд╢ рд╕рд╣реЗрдЬ рд╕рдХрддрд╛ рд╣реИ? </li></ul><br>  рдпрджрд┐ рдЙрддреНрддрд░ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЕрдиреБрдХреВрд▓рди рдпреЛрдЧреНрдпрддрд╛ рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдореЗрдВ рд╕реБрдзрд╛рд░ рдХрд░рддреА рд╣реИред  рдпрджрд┐ рдЖрдк рд░рд┐рдХреЙрд░реНрдбрд┐рдВрдЧ рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХреЗ рдмрдЬрд╛рдп рдЙрдкрд▓рдмреНрдзрддрд╛ рдЪреБрдирддреЗ рд╣реИрдВ рддреЛ рдЖрдк рдХрдо рдбреЗрдЯрд╛ рдЦреЛ рджреЗрдВрдЧреЗред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдпрд╣ рд╕рднреА рдПрдХ рд╕рдВрддреБрд▓рди рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдиреАрдЪреЗ рдЖрддрд╛ рд╣реИ, рдФрд░ рдирд┐рд░реНрдгрдп рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд┐рддрд┐ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br><h1>  ISR рдХрд╛ рдЕрд░реНрде </h1><br>  ISR рд╕реБрдЗрдЯ рдЖрдкрдХреЛ рдбреЗрдЯрд╛ рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рд╡рд┐рд▓рдВрдмрддрд╛ рдХреЗ рдмреАрдЪ рдЗрд╖реНрдЯрддрдо рд╕рдВрддреБрд▓рди рдЪреБрдирдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рд╡рд┐рдлрд▓рддрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЕрдзрд┐рдХрд╛рдВрд╢ рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рд╕реБрд▓рдн рд╣реИрдВ, рджреЗрд░реА рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдореГрдд рдпрд╛ рдзреАрдореА рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреЗ рдкреНрд░рднрд╛рд╡ рдХреЛ рдХрдо рдХрд░рдирд╛ред <br><br>  рд╣рдо рд╕реНрд╡рдпрдВ рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ <i>рдкреНрд░рддрд┐рдХреГрддрд┐</i> рдХрд╛ рдорд╛рди рдЪреБрдиреЗрдВред <i>lag.time.max.ms</i>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдЗрд╕ рдкреИрд░рд╛рдореАрдЯрд░ рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рд╣рдо <i>рдПрдХреНрд╕ = рд╕рднреА рдХреЗ</i> рд╕рд╛рде рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рди рджрд╕ рд╕реЗрдХрдВрдб рд╣реИред  рдпрджрд┐ рдпрд╣ рдЖрдкрдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд▓рдВрдмрд╛ рд╣реИ, рддреЛ рдЖрдк рдЗрд╕реЗ рдХрдо рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рддрдм рдЖрдИрдПрд╕рдЖрд░ рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХреА рдЖрд╡реГрддреНрддрд┐ рдмрдврд╝ рдЬрд╛рдПрдЧреА, рдХреНрдпреЛрдВрдХрд┐ рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреЛ рдЕрдзрд┐рдХ рдмрд╛рд░ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдПрдЧрд╛ред <br><br>  RabbitMQ рдХреЗрд╡рд▓ рджрд░реНрдкрдгреЛрдВ рдХрд╛ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рд╣реИ рдЬрд┐рд╕реЗ рджреЛрд╣рд░рд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╕реНрд▓реЛ рдорд┐рд░рд░реНрд╕ рдПрдХ рдЕрддрд┐рд░рд┐рдХреНрдд рджреЗрд░реА рдХрд╛ рдкрд░рд┐рдЪрдп рджреЗрддреЗ рд╣реИрдВ, рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб (рдиреЗрдЯ рдЯрд┐рдХ) рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреИрдХреЗрдЯреЛрдВ рдХреА рд╕рдорд╛рдкреНрддрд┐ рд╕реЗ рдкрд╣рд▓реЗ рдореГрдд рджрд░реНрдкрдгреЛрдВ рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреА рдЙрдореНрдореАрдж рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рдмрдврд╝реЗ рд╣реБрдП рд╡рд┐рд▓рдВрдм рдХреЗ рд╕рд╛рде ISR рдЗрди рд╕рдорд╕реНрдпрд╛рдУрдВ рд╕реЗ рдмрдЪрдиреЗ рдХрд╛ рдПрдХ рджрд┐рд▓рдЪрд╕реНрдк рддрд░реАрдХрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рд╣рдо рдЕрддрд┐рд░реЗрдХ рдЦреЛрдиреЗ рдХрд╛ рдЬреЛрдЦрд┐рдо рдЙрдард╛рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ ISR рдХреЗрд╡рд▓ рдПрдХ рдиреЗрддрд╛ рдХреЛ рдХрдо рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рдЬреЛрдЦрд┐рдо рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, <i>min.insync.replicas</i> рд╕реЗрдЯрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред <br><br><h1>  рдЧреНрд░рд╛рд╣рдХ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдХреА рдЧрд╛рд░рдВрдЯреА </h1><br>  рдирд┐рд░реНрдорд╛рддрд╛ рдФрд░ рдЙрдкрднреЛрдХреНрддрд╛ рдХреЗ <i>рдмреВрдЯрд╕реНрдЯреНрд░реИрдк.рд╕рд░реНрд╡рд░</i> рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдореЗрдВ, рдЖрдк рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рдмреНрд░реЛрдХрд░реЛрдВ рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рд╡рд┐рдЪрд╛рд░ рдпрд╣ рд╣реИ рдХрд┐ рдЬрдм рдЖрдк рдПрдХ рдиреЛрдб рдХреЛ рдбрд┐рд╕реНрдХрдиреЗрдХреНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХрдИ рдЦрд╛рд▓реА рдиреЛрдб рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдиреЗрдХреНрд╢рди рдЦреЛрд▓ рд╕рдХрддрд╛ рд╣реИред  рдпреЗ рдЬрд░реВрд░реА рдирд╣реАрдВ рдХрд┐ рдЕрдиреБрднрд╛рдЧ рдХреЗ рдиреЗрддрд╛ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдмреВрдЯрд╕реНрдЯреНрд░реИрдкрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдмрд╕ рдПрдХ рд╕реНрдкреНрд░рд┐рдВрдЧрдмреЛрд░реНрдб рд╣реИред  рдХреНрд▓рд╛рдЗрдВрдЯ рдЙрдирд╕реЗ рдкреВрдЫ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рд░реАрдб / рд░рд╛рдЗрдЯ рд╕реЗрдХреНрд╢рди рдХрд╛ рд▓реАрдбрд░ рдХрд┐рд╕ рдиреЛрдб рдкрд░ рд╕реНрдерд┐рдд рд╣реИред <br><br>  RabbitMQ рдореЗрдВ, рдХреНрд▓рд╛рдЗрдВрдЯ рдХрд┐рд╕реА рднреА рд╣реЛрд╕реНрдЯ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЖрдВрддрд░рд┐рдХ рд░реВрдЯрд┐рдВрдЧ рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬрддрд╛ рд╣реИ рдЬрд╣рд╛рдВ рдЖрд╡рд╢реНрдпрдХ рд╣реЛред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ рдЖрдк RabbitMQ рдХреЗ рд╕рд╛рдордиреЗ рдПрдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдХрдлрдХрд╛ рдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд┐рднрд╛рдЬрди рдХреЗ рдиреЗрддрд╛ рдХреА рдореЗрдЬрдмрд╛рдиреА рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рд╣реЛрд╕реНрдЯ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреНрд▓рд╛рдЗрдВрдЯреНрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рд╡рд┐рддрд░рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  <i>Bootstrap.servers</i> рд╕реВрдЪреА рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рддрд╛рдХрд┐ рдЧреНрд░рд╛рд╣рдХ рд╕рд╣реА рдиреЛрдбреНрд╕ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗрдВ рдФрд░ рдХреНрд░реИрд╢ рдХреЗ рдмрд╛рдж рдЙрдиреНрд╣реЗрдВ рдвреВрдВрдв рд╕рдХреЗрдВред <br><br><h1>  рдХрд╛рдлреНрдХрд╛ рд╕рд░реНрд╡рд╕рдореНрдорддрд┐ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ </h1><br>  рдЕрдм рддрдХ, рд╣рдордиреЗ рдпрд╣ рдирд╣реАрдВ рд╕реЛрдЪрд╛ рд╣реИ рдХрд┐ рдмреНрд░реЛрдХрд░ рдХреЗ рдкрддрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреИрд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдФрд░ рдПрдХ рдирдпрд╛ рдиреЗрддрд╛ рдХреИрд╕реЗ рдЪреБрдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рд╕рдордЭрдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐ рдХрд╛рдлреНрдХрд╛ рдиреЗрдЯрд╡рд░реНрдХ рд╡рд┐рднрд╛рдЬрди рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЖрдкрдХреЛ рдкрд╣рд▓реЗ рд╕рд░реНрд╡рд╕рдореНрдорддрд┐ рдХреА рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреЛ рд╕рдордЭрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред <br><br>  рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рдлрд╝реНрдХрд╛ рдХреНрд▓рд╕реНрдЯрд░ рдЬрд╝реБрдХреАрдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рддреИрдирд╛рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдпрд╣ рдПрдХ рд╡рд┐рддрд░рд┐рдд рд╕рд░реНрд╡рд╕рдореНрдорддрд┐ рд╕реЗрд╡рд╛ рд╣реИ рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рдХреЛ рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдЖрдо рд╕рд╣рдорддрд┐ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдЙрдкрд▓рдмреНрдзрддрд╛ рдкрд░ рд╕реНрдерд┐рд░рддрд╛ рд╣реЛрддреА рд╣реИред  рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреА рд╕реНрд╡реАрдХреГрддрд┐ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХрд╛рдВрд╢ рдЬрд╝реБрдХреАрдкрд░ рдиреЛрдбреНрд╕ рдХреА рд╕рд╣рдорддрд┐ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br><br>  Zookeeper рд╕реНрдЯреЛрд░ рдХреНрд▓рд╕реНрдЯрд░ рд╕реНрдерд┐рддрд┐: <br><br><ul><li>  рд╡рд┐рд╖рдпреЛрдВ рдХреА рд╕реВрдЪреА, рд╡рд░реНрдЧреЛрдВ, рд╡рд┐рдиреНрдпрд╛рд╕, рд╡рд░реНрддрдорд╛рди рдиреЗрддрд╛ рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ, рдкрд╕рдВрджреАрджрд╛ рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВред <br></li><li>  рдХреНрд▓рд╕реНрдЯрд░ рд╕рджрд╕реНрдпред  рдкреНрд░рддреНрдпреЗрдХ рдмреНрд░реЛрдХрд░ рдПрдХ рдЬрд╝реБрдХреАрдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдкрд┐рдВрдЧ рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рд╡рд╣ рджрд┐рдП рдЧрдП рд╕рдордп рдХреЗ рд▓рд┐рдП рдкрд┐рдВрдЧ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рдЬрд╝реВрдХреАрдкрд░ рдмреНрд░реЛрдХрд░ рдХреЛ рджреБрд░реНрдЧрдо рд▓рд┐рдЦрддрд╛ рд╣реИред <br></li><li>  рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рдердорд┐рдХ рдФрд░ рдорд╛рдзреНрдпрдорд┐рдХ рдиреЛрдбреНрд╕ рдХрд╛ рд╡рд┐рдХрд▓реНрдкред </li></ul><br>  рдирд┐рдпрдВрддреНрд░рдХ рдиреЛрдб рдХрд╛рдлреНрдХрд╛ рджрд▓рд╛рд▓реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИ рдЬреЛ рдкреНрд░рддрд┐рдХреГрддрд┐ рдиреЗрддрд╛рдУрдВ рдХреЗ рдЪреБрдирд╛рд╡ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдЬрд╝реВрдХреЙрдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рд╕рджрд╕реНрдпрддрд╛ рдФрд░ рд╡рд┐рд╖рдп рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреА рдирд┐рдпрдВрддреНрд░рдХ рд╕реВрдЪрдирд╛рдУрдВ рдХреЛ рднреЗрдЬрддрд╛ рд╣реИ, рдФрд░ рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рдЗрди рдкрд░рд┐рд╡рд░реНрддрдиреЛрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХрд╛рд░реНрдп рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рджрд╕ рдЦрдВрдбреЛрдВ рдФрд░ рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рдЧреБрдгрд╛рдВрдХ рдХреЗ рд╕рд╛рде рдПрдХ рдирдпрд╛ рд╡рд┐рд╖рдп рд▓реЗрдВред рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдХреЗ рдиреЗрддрд╛ рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдЬреЛ рджрд▓рд╛рд▓реЛрдВ рдХреЗ рдмреАрдЪ рдиреЗрддрд╛рдУрдВ рдХреЛ рдЖрд╢рд╛рд╡рд╛рджреА рд░реВрдк рд╕реЗ рд╡рд┐рддрд░рд┐рдд рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░ рд░рд╣рд╛ рд╣реИред <br><br>  рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдХреЗ рд▓рд┐рдП, рдирд┐рдпрдВрддреНрд░рдХ: <br><br><ul><li>  ISR рдФрд░ рдиреЗрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╝реБрдХреАрдкрд░ рдореЗрдВ рдЕрджреНрдпрддрди рдЬрд╛рдирдХрд╛рд░реА; <br></li><li>  рдкреНрд░рддреНрдпреЗрдХ рдмреНрд░реЛрдХрд░ рдХреЛ рдПрдХ рд▓реАрдбрд░рдПрдВрдбрдЖрдИрдПрд╕рдЖрд░-рдХреЛрдорд╛рдВрдб рдХрдорд╛рдВрдб рднреЗрдЬрддрд╛ рд╣реИ рдЬреЛ рдЗрд╕ рдЦрдВрдб рдХреА рдкреНрд░рддрд┐рдХреГрддрд┐ рдкреЛрд╕реНрдЯ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рджрд▓рд╛рд▓реЛрдВ рдХреЛ рдЖрдИрдПрд╕рдЖрд░ рдФрд░ рдиреЗрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред </li></ul><br>  рдЬрдм рдПрдХ рдиреЗрддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рджрд▓рд╛рд▓ рдЧрд┐рд░ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЬрд╝реВрдХреАрдкрд░ рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рдПрдХ рдЕрдзрд┐рд╕реВрдЪрдирд╛ рднреЗрдЬрддрд╛ рд╣реИ, рдФрд░ рд╡рд╣ рдПрдХ рдирдпрд╛ рдиреЗрддрд╛ рдЪреБрдирддрд╛ рд╣реИред  рдлрд┐рд░, рдирд┐рдпрдВрддреНрд░рдХ рдкрд╣рд▓реЗ рдЬрд╝реБрдХреАрдкрд░ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдкреНрд░рддреНрдпреЗрдХ рдмреНрд░реЛрдХрд░ рдХреЛ рдПрдХ рдХрдорд╛рдВрдб рднреЗрдЬрддрд╛ рд╣реИ, рдЬреЛ рдЙрдиреНрд╣реЗрдВ рдиреЗрддреГрддреНрд╡ рдореЗрдВ рдмрджрд▓рд╛рд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╕реВрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИред <br><br>  рдкреНрд░рддреНрдпреЗрдХ рдиреЗрддрд╛ ISRs рдХреА рднрд░реНрддреА рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  <i>рдкреНрд░рддрд┐рдХреГрддрд┐</i> ред <i>Lag.time.max.ms рд╕реЗрдЯрд┐рдВрдЧ</i> рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдХреМрди рд╡рд╣рд╛рдВ рдЬрд╛рдПрдЧрд╛ред  рдЬрдм ISR рдмрджрд▓рддрд╛ рд╣реИ, рддреЛ рдиреЗрддрд╛ Zookeeper рдХреЛ рдирдИ рдЬрд╛рдирдХрд╛рд░реА рджреЗрддрд╛ рд╣реИред <br><br>  рдЬрд╝реБрдХреАрдкрд░ рдХреЛ рд╣рдореЗрд╢рд╛ рдХрд┐рд╕реА рднреА рдмрджрд▓рд╛рд╡ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрддрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддрд╛рдХрд┐ рд╡рд┐рдлрд▓рддрд╛ рдХреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ, рдкреНрд░рдмрдВрдзрди рд╕реБрдЪрд╛рд░реВ рд░реВрдк рд╕реЗ рдирдП рдиреЗрддрд╛ рдХреЗ рдкрд╛рд╕ рдЬрд╛рдПред <br><br><img src="https://habrastorage.org/webt/yi/1v/in/yi1vinwmeg4exdiautqohweg8rq.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">21. рдХрд╛рдлреНрдХрд╛ рдХреА рд╕рд╣рдорддрд┐</font></i> <br><br><h1>  рдкреНрд░рддрд┐рдХреГрддрд┐ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ </h1><br>  рдкреНрд░рддрд┐рдХреГрддрд┐ рд╡рд┐рд╡рд░рдг рдХреЛ рд╕рдордЭрдирд╛ рдЖрдкрдХреЛ рд╕рдВрднрд╛рд╡рд┐рдд рдбреЗрдЯрд╛ рд╣рд╛рдирд┐ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдХреЛ рдмреЗрд╣рддрд░ рдврдВрдЧ рд╕реЗ рд╕рдордЭрдиреЗ рдореЗрдВ рдорджрдж рдХрд░рддрд╛ рд╣реИред <br><br><h3>  рдирдореВрдирд╛ рдЕрдиреБрд░реЛрдз, рд▓реЙрдЧ рдСрдлрд╝ рдСрдлрд╝рд╕реЗрдЯ (LEO) рдФрд░ рд╣рд╛рдИрд╡рд╛рдЪ рдорд╛рд░реНрдХ (HW) </h3><br>  рд╣рдордиреЗ рдорд╛рдирд╛ рд╣реИ рдХрд┐ рдЕрдиреБрдпрд╛рдпреА рд╕рдордп-рд╕рдордп рдкрд░ рдиреЗрддрд╛ рдХреЗ рдкрд╛рд╕ рдЕрдиреБрд░реЛрдз рднреЗрдЬрддреЗ рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЕрдВрддрд░рд╛рд▓ 500 рдПрдордПрд╕ рд╣реИред  рдпрд╣ RabbitMQ рд╕реЗ рднрд┐рдиреНрди рд╣реИ рдХрд┐ RabbitMQ рдореЗрдВ, рдкреНрд░рддрд┐рдХреГрддрд┐ рдХрддрд╛рд░ рджрд░реНрдкрдг рджреНрд╡рд╛рд░рд╛ рдирд╣реАрдВ, рдмрд▓реНрдХрд┐ рд╡рд┐рдЬрд╝рд╛рд░реНрдб рджреНрд╡рд╛рд░рд╛ рд╢реБрд░реВ рдХреА рдЬрд╛рддреА рд╣реИред  рдЧреБрд░реБ рджрд░реНрдкрдг рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рдзрдХреНрдХрд╛ рджреЗрддрд╛ рд╣реИред <br><br>  рдиреЗрддрд╛ рдФрд░ рд╕рднреА рдЕрдиреБрдпрд╛рдпреА рд▓реЙрдЧ рдПрдВрдб рдСрдлрд╝рд╕реЗрдЯ (LEO) рдФрд░ рд╣рд╛рдИрд╡рд╛рдЯрд░ (HW) рд▓реЗрдмрд▓ рдХреЛ рдмрдирд╛рдП рд░рдЦрддреЗ рд╣реИрдВред  LEO рдЪрд┐рд╣реНрди рд╕реНрдерд╛рдиреАрдп рдкреНрд░рддрд┐рдХреГрддрд┐ рдореЗрдВ рдЕрдВрддрд┐рдо рд╕рдВрджреЗрд╢ рдХреА рдСрдлрд╕реЗрдЯ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ HW рдЕрдВрддрд┐рдо рдкреНрд░рддрд┐рдмрджреНрдзрддрд╛ рдХреЗ рдСрдлрд╕реЗрдЯ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИред  рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдкреНрд░рддрд┐рдмрджреНрдз рд╕реНрдерд┐рддрд┐ рдХреЗ рд▓рд┐рдП, рд╕рдВрджреЗрд╢ рдХреЛ рд╕рднреА ISR рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдореЗрдВ рд╕рд╣реЗрдЬрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ LEO рдЖрдорддреМрд░ рдкрд░ HW рд╕реЗ рдереЛрдбрд╝рд╛ рдЖрдЧреЗ рд╣реИред <br><br>  рдЬрдм рдХреЛрдИ рдиреЗрддрд╛ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╡рд╣ рдЗрд╕реЗ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рд╕рд╣реЗрдЬрддрд╛ рд╣реИред  рдЕрдиреБрдпрд╛рдпреА рдЕрдкрдиреЗ рдПрд▓рдИрдУ рдХреЛ рдкрд╛рд╕ рдХрд░рддреЗ рд╣реБрдП, рдПрдХ рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИред  рдиреЗрддрд╛ рддрдм рдЗрд╕ LEO рд╕реЗ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рд╕рдВрджреЗрд╢реЛрдВ рдХрд╛ рдПрдХ рдкреИрдХреЗрдЯ рднреЗрдЬрддрд╛ рд╣реИ, рдФрд░ рд╡рд░реНрддрдорд╛рди HW рдХреЛ рднреА рдкреНрд░рд╕рд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдЬрдм рдиреЗрддрд╛ рдХреЛ рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА рдорд┐рд▓рддреА рд╣реИ рдХрд┐ рд╕рднреА рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдиреЗ рджрд┐рдП рдЧрдП рдСрдлрд╕реЗрдЯ рдкрд░ рд╕рдВрджреЗрд╢ рдХреЛ рд╕рд╣реЗрдЬрд╛ рд╣реИ, рддреЛ рд╡рд╣ HW рдЪрд┐рд╣реНрди рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдХреЗрд╡рд▓ рдиреЗрддрд╛ рд╣реА рдПрдЪрдбрдмреНрд▓реНрдпреВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдЗрд╕рд▓рд┐рдП рд╕рднреА рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреЛ рдЙрдирдХреЗ рдЕрдиреБрд░реЛрдз рдХреЗ рдЬрд╡рд╛рдм рдореЗрдВ рд╡рд░реНрддрдорд╛рди рдореВрд▓реНрдп рдкрддрд╛ рдЪрд▓ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдЕрдиреБрдпрд╛рдпреА рдПрдЪрдбрдмреНрд▓реНрдпреВ рдХреА рд░рд┐рдкреЛрд░реНрдЯрд┐рдВрдЧ рдФрд░ рдЬреНрдЮрд╛рди рджреЛрдиреЛрдВ рдореЗрдВ рдиреЗрддрд╛ рд╕реЗ рдкреАрдЫреЗ рд░рд╣ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрдкрднреЛрдХреНрддрд╛ рдХреЗрд╡рд▓ рд╡рд░реНрддрдорд╛рди HW рддрдХ рд╕рдВрджреЗрд╢ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ "рдирд┐рд░рдВрддрд░" рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдореЗрдореЛрд░реА рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдбрд┐рд╕реНрдХ рдкрд░ рдирд╣реАрдВред  рдкреНрд░рджрд░реНрд╢рди рдХреЗ рд▓рд┐рдП, рдХрд╛рдлреНрдХрд╛ рдПрдХ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЕрдВрддрд░рд╛рд▓ рдкрд░ рдбрд┐рд╕реНрдХ рдХреЛ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдХрд░рддрд╛ рд╣реИред  RabbitMQ рдореЗрдВ рднреА рдРрд╕рд╛ рдЕрдВрддрд░рд╛рд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдорд╛рд╕реНрдЯрд░ рдХреЗ рдмрд╛рдж рд╣реА рдкреНрд░рдХрд╛рд╢рдХ рдХреЛ рдкреБрд╖реНрдЯрд┐ рднреЗрдЬреЗрдЧрд╛ рдФрд░ рд╕рднреА рджрд░реНрдкрдгреЛрдВ рдиреЗ рдбрд┐рд╕реНрдХ рдХреЛ рд╕рдВрджреЗрд╢ рд▓рд┐рдЦрд╛ рд╣реИред  рд╕рдВрджреЗрд╢ рдХреЗ рд▓рд┐рдП рд╕рдВрджреЗрд╢ рд▓рд┐рдЦреЗ рдЬрд╛рдиреЗ рдХреЗ рдмрд╛рдж рдкреНрд░рджрд░реНрд╢рди рдХреЗ рдХрд╛рд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдХрд╛рдлреНрдХрд╛ рдбреЗрд╡рд▓рдкрд░реНрд╕ рдиреЗ рдРрдХ рднреЗрдЬрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛ред  рдХрд╛рдлреНрдХрд╛ рдЗрд╕ рддрдереНрдп рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЕрддрд┐рд░реЗрдХ рдХреЗрд╡рд▓ рд╕реНрдореГрддрд┐ рдореЗрдВ рдкреБрд╖реНрдЯрд┐ рдХрд┐рдП рдЧрдП рд╕рдВрджреЗрд╢реЛрдВ рдХреЗ рдЕрд▓реНрдкрдХрд╛рд▓рд┐рдХ рднрдВрдбрд╛рд░рдг рдХреЗ рдЬреЛрдЦрд┐рдо рдХреА рднрд░рдкрд╛рдИ рдХрд░рддрд╛ рд╣реИред <br><br><h1>  рдиреЗрддрд╛ рдХреА рд╡рд┐рдлрд▓рддрд╛ </h1><br>  рдЬрдм рдХреЛрдИ рдиреЗрддрд╛ рдЧрд┐рд░рддрд╛ рд╣реИ, рдЬрд╝реБрдХреАрдкрд░ рдирд┐рдпрдВрддреНрд░рдХ рдХреЛ рд╕реВрдЪрд┐рдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╡рд╣ рдПрдХ рдирдпрд╛ рдиреЗрддрд╛ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХрд╛ рдЪрдпрди рдХрд░рддрд╛ рд╣реИред  рдирдпрд╛ рдиреЗрддрд╛ рдЕрдкрдиреЗ LEO рдХреЗ рдЕрдиреБрд░реВрдк рдПрдХ рдирдпрд╛ HW рдЪрд┐рд╣реНрди рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИред  рдлрд┐рд░ рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреЛ рдирдП рдиреЗрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдорд┐рд▓рддреА рд╣реИред  рдХрд╛рдлреНрдХрд╛ рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдЕрдиреБрдпрд╛рдпреА рджреЛ рдкрд░рд┐рджреГрд╢реНрдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдХрд╛ рдЪрдпрди рдХрд░реЗрдЧрд╛: <br><br><ol><li>  рдкреНрд░рд╕рд┐рджреНрдз рдПрдЪрдЬреА рдХреЛ рд╕реНрдерд╛рдиреАрдп рд▓реЙрдЧ рдЯреНрд░рдВрдХрдЯ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕ рдирд┐рд╢рд╛рди рдХреЗ рдмрд╛рдж рдирдП рдиреЗрддрд╛ рдХреЛ рдПрдХ рд╕рдВрджреЗрд╢ рднреЗрдЬрддрд╛ рд╣реИред <br></li><li>   ,   HW     ,       .       ,    . </li></ol><br>        : <br><br><ul><li>    ,     ISR,   Zookeeper,     .    ISR,    ┬л┬╗,          .  ,        . Kafka ,     .  ,   ,         HW      .    ,   <i>acks=all</i>    . <br></li><li>     .      ,        .  ,       ,  ,   ,    ,        . </li></ul><br><h3>  c  </h3><br>        ,     :          HW (  ).  , RabbitMQ       .        .    ,             ┬л    ┬╗.            .       . <br><br> Kafka тАФ   ,       ,   RabbitMQ,        .      .  Kafka тАФ      ,        .            .    Kafka      HW  (   )   ,     .    ,    ,       ,     LEO. <br><br>        ISR     .      ,    ,  ,         ISR.          . <br><br><h1>   </h1><br>  Kafka  ,   RabbitMQ,      ,     .  Kafka    ,      . <br><br>      : <br><br><ul><li>  1.    ,     Zookeeper. <br></li><li>  2.      ,     Zookeeper. <br></li><li>  3.   ,    Zookeeper. <br></li><li>  4.   ,    Zookeeper. <br></li><li>  5.        Kafka,   Zookeeper. <br></li><li>  6.        Kafka,   Zookeeper. <br></li><li>  7.   Kafka     Kafka. <br></li><li>  8.  Kafka   Zookeeper. </li></ul><br>      . <br><br><h3>  1.    ,     Zookeeper </h3><br><img src="https://habrastorage.org/webt/je/cd/f1/jecdf1kc9y8gc8ej5sfmuelo30a.png"><br> <i><font color="gray">. 22.  1. ISR   </font></i> <br><br>     3   1  2,    Zookeeper.  3       .    <i>replica.lag.time.max.ms</i>    ISR      .    ,         ISR,   . Zookeeper     ,     . <br><br><img src="https://habrastorage.org/webt/ir/tq/ir/irtqir6cr8whigmvfqo1t-bbsso.png"><br> <i><font color="gray">. 23.  1.    ISR,            replica.lag.time.max.ms</font></i> <br><br>     (split-brain)   ,   RabbitMQ.    . <br><br><h3>  2.      ,     Zookeeper </h3><br><img src="https://habrastorage.org/webt/ri/fy/q6/rifyq652am8lmbhlgpfvfq-pjnm.png"><br> <i><font color="gray">. 24.  2.    </font></i> <br><br>       ,      Zookeeper.     , ISR ,       ,        .  ,    .        ,    . Zookeeper     ,     . <br><br><img src="https://habrastorage.org/webt/hj/8g/-1/hj8g-1veu8rkisccp7t6c9bxq7k.png"><br> <i><font color="gray">. 25.  2. ISR    </font></i> <br><br><h3>  3.   ,    Zookeeper </h3><br>    Zookeeper,      .           ISR. Zookeeper        ,     ,     . <br><br><img src="https://habrastorage.org/webt/cv/tb/gj/cvtbgjgw7ub1w8dmii46aql3bhc.png"><br> <i><font color="gray">. 26.  3.       </font></i> <br><br><h3>  4.   ,    Zookeeper </h3><br><img src="https://habrastorage.org/webt/zw/k4/8o/zwk48obscffldqgdhpyl0dvvipc.png"><br> <i><font color="gray">. 27.  4.    </font></i> <br><br>    Zookeeper,      . <br><br><img src="https://habrastorage.org/webt/eh/s1/hx/ehs1hxu4sako2udflhmhhbqhtsu.png"><br> <i><font color="gray">. 28.  4.    Zookeeper</font></i> <br><br>    Zookeeper        .      .      ,           <i>acks=1</i> .        ,         ISR   .        Zookeeper,     ,         . <br><br>  <i>acks=all</i>   ,    ISR   ,      .        ISR,          - . <br><br>            .    ,   ,     ,       HW,        ,    .         .     ,    .     ,        ,    . <br><br><img src="https://habrastorage.org/webt/pt/z_/pn/ptz_pnhoyrwvw4v-l9re3ffjzcg.png"><br> <i><font color="gray">. 29.  4.    1     </font></i> <br><br><h3>  5.        Kafka,   Zookeeper </h3><br>        Kafka,   Zookeeper.     ISR,    ,    . <br><br><img src="https://habrastorage.org/webt/ik/aj/a1/ikaja1i4z3fnodbcmam8sp2jbjc.png"><br> <i><font color="gray">. 30.  5.     ISR</font></i> <br><br><h3>  6.        Kafka,   Zookeeper </h3><br><img src="https://habrastorage.org/webt/cz/5h/2m/cz5h2mnqelpalxozp-jv4yv23rc.png"><br> <i><font color="gray">. 31.  6.    </font></i> <br><br>      ,   Zookeeper.          <i>acks=1</i> . <br><br><img src="https://habrastorage.org/webt/pj/pi/vj/pjpivjf1bsnvowntmkjqxdzipfe.png"><br> <i><font color="gray">. 32.  6.      Kafka  Zookeeper</font></i> <br><br>      <i>replica.lag.time.max.ms</i> ,    ISR   ,     ,     Zookeeper,     . <br><br>  , Zookeeper     ,     . <br><br><img src="https://habrastorage.org/webt/g8/rg/wo/g8rgwol3elzkz8dwxojtclogyns.png"><br> <i><font color="gray">. 33.  6.  </font></i> <br><br>         ,      .    60    .            . <br><br><img src="https://habrastorage.org/webt/zu/zl/dh/zuzldhf62qbynz_voxil-25roxe.png"><br> <i><font color="gray">. 34.  6.     </font></i> <br><br>     ,       .    ,    Zookeeper ,     .      HW           . <br><br><img src="https://habrastorage.org/webt/zj/5e/vd/zj5evdyqhphl9uupogfvbjx7zjk.png"><br> <i><font color="gray">. 35.  6.        </font></i> <br><br>           ,    <i>acks=1</i>  <i>min.insync.replicas</i>  1.        ,    ,     ,     ,         тАФ    ,   .       ,    <i>acks=1</i> . <br><br>     ,       ,    ISR   .    -  .   ,      ,  <i>acks=all</i> ,    ISR    .       .      тАФ <i>min.insync.replicas = 2</i> . <br><br><h3>  7.   Kafka     Kafka </h3><br>  ,      Kafka          .         ,    6.             . <br><br><h3>  8.  Kafka   Zookeeper </h3><br>    Zookeeper         Kafka.       ,       Zookeeper,         .    ,  ,     ,     Kafka. <br><br><h3>    </h3><br>  ,         ,     ,    . , ,     ,      . <br><br>  -      Zookeeper,        <i>acks=1</i> .    Zookeeper       .     <i>acks=all</i> . <br><br>  <i>min.insync.replicas</i>        ,         ,    6. <br><br><h1>     </h1><br>   ,      Kafka: <br><br><ul><li>   ,      <i>acks=1</i> <br></li><li>   (unclean)  ,       ISR,   <i>acks=all</i> <br></li><li>    Zookeeper,      <i>acks=1</i> <br></li><li>   ,     ISR   .    ,  <i>acks=all</i> .      ,  <i>min.insync.replicas=1</i> . <br></li><li>     .     ,       .        . </li></ul><br>     ,   ,      .    тАФ   <i>acks=all</i>  <i>min.insync.replicas</i>  1. <br><br><h1>    RabbitMQ  Kafka </h1><br>              .   RabbitMQ   .        ,   .           RabbitMQ.       ,    .       .    ,         ( )       . <br><br>  Kafka   .          .    .  ,    .    ,     ,           . , -  ,       .     ,      . <br><br> RabbitMQ  Kafka         .    , RabbitMQ              .        : <br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> fsync рд╣рд░ рдХреБрдЫ рд╕реМ рдорд┐рд▓реАрд╕реЗрдХрдВрдб </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд░реНрдкрдг рдХрд╛ рдкрддрд╛ рдЬреАрд╡рди рднрд░ рдХреЗ рдмрд╛рдж рд╣реА рд▓рдЧрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдЬреЛ рдкреНрд░рддреНрдпреЗрдХ рдиреЛрдб (рдиреЗрдЯ рдЯрд┐рдХ) рдХреА рдЙрдкрд▓рдмреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдпрджрд┐ рджрд░реНрдкрдг рдзреАрдорд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ рдпрд╛ рдЧрд┐рд░ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдореЗрдВ рджреЗрд░реА рд╣реЛрддреА рд╣реИред</font></font></li></ul><br>  рдХрд╛рдлрд╝реНрдХрд╛ рдЗрд╕ рддрдереНрдп рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдпрджрд┐ рд╕рдВрджреЗрд╢ рдХрдИ рдиреЛрдбреНрд╕ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИ, рддреЛ рдЖрдк рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕реНрдореГрддрд┐ рдореЗрдВ рд╣реЛрддреЗ рд╣реА рдкреБрд╖реНрдЯрд┐ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ, рдПрдХ рд╕рд╛рде рд╡рд┐рдлрд▓рддрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХрд┐рд╕реА рднреА рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рдВрджреЗрд╢ (рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ <i>akes =</i> <i>all</i> , <i>min.insync.replies = 2</i> ) рдЦреЛрдиреЗ рдХрд╛ рдЦрддрд░рд╛ рд╣реИред <br><br>  рдХреБрд▓ рдорд┐рд▓рд╛рдХрд░, рдХрд╛рдлреНрдХрд╛ рдмреЗрд╣рддрд░ рдкреНрд░рджрд░реНрд╢рди рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдореВрд▓ рд░реВрдк рд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд▓рд┐рдП рдбрд┐рдЬрд╝рд╛рдЗрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдпрджрд┐ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЕрдиреБрдпрд╛рдпрд┐рдпреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ 11 рд╣реЛ рд╕рдХрддреА рд╣реИред  5 рдХреА рдПрдХ рдкреНрд░рддрд┐рдХреГрддрд┐ рдХрд╛рд░рдХ рдФрд░ <i>min.insync.replicas = 3</i> рдХреА рдПрдХ рд╕рд┐рдВрдХреНрд░рдирд╛рдЗрдЬрд╝ рдЕрд╡рд╕реНрдерд╛ рдореЗрдВ рдкреНрд░рддрд┐рдХреГрддрд┐рдпреЛрдВ рдХреА рдиреНрдпреВрдирддрдо рд╕рдВрдЦреНрдпрд╛ рд╕рдВрджреЗрд╢ рд╣рд╛рдирд┐ рдХреЛ рдПрдХ рдмрд╣реБрдд рд╣реА рджреБрд░реНрд▓рдн рдШрдЯрдирд╛ рдмрдирд╛ рджреЗрдЧреАред  рдпрджрд┐ рдЖрдкрдХрд╛ рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рдРрд╕реА рдкреНрд░рддрд┐рдХреГрддрд┐ рджрд░ рдФрд░ рдЕрддрд┐рд░реЗрдХ рдХрд╛ рд╕реНрддрд░ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реИ, рддреЛ рдЖрдк рдЗрд╕ рд╡рд┐рдХрд▓реНрдк рдХреЛ рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВред <br><br>  RabbitMQ рдХреНрд▓рд╕реНрдЯрд░рд┐рдВрдЧ рдЫреЛрдЯреА рдХрддрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЙрдЪреНрдЪ рдпрд╛рддрд╛рдпрд╛рдд рдХреЗ рд╕рд╛рде рднреА рдЫреЛрдЯреА рдХрддрд╛рд░реЗрдВ рдЬрд▓реНрджреА рд╕реЗ рдмрдврд╝ рд╕рдХрддреА рд╣реИрдВред  рдПрдХ рдмрд╛рд░ рдЬрдм рдХрддрд╛рд░реЗрдВ рдмрдбрд╝реА рд╣реЛ рдЬрд╛рддреА рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдЙрдкрд▓рдмреНрдзрддрд╛ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдХреЗ рдмреАрдЪ рдПрдХ рдХрдард┐рди рд╡рд┐рдХрд▓реНрдк рдмрдирд╛рдирд╛ рд╣реЛрдЧрд╛ред  RabbitMQ рдХреНрд▓рд╕реНрдЯрд░рд┐рдВрдЧ рдЧреИрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЙрдкрдпреБрдХреНрдд рд╣реИ, рдЬрд╣рд╛рдВ RabbitMQ рдХреЗ рд▓рдЪреАрд▓реЗрдкрди рдХреЗ рдлрд╛рдпрджреЗ рдЗрд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ рдХрд░рдиреЗ рдХреЗ рдХрд┐рд╕реА рднреА рдиреБрдХрд╕рд╛рди рд╕реЗ рдЖрдЧреЗ рдирд┐рдХрд▓ рдЬрд╛рддреЗ рд╣реИрдВред <br><br>  RabbitMQ рдХреА рдмрдбрд╝реА рдХрддрд╛рд░ рднреЗрджреНрдпрддрд╛ рдХреЗ рд▓рд┐рдП рдорд╛рд░рдХ рдореЗрдВ рд╕реЗ рдПрдХ рдЙрдиреНрд╣реЗрдВ рдХрдИ рдЫреЛрдЯреЗ рд▓реЛрдЧреЛрдВ рдореЗрдВ рддреЛрдбрд╝ рд░рд╣рд╛ рд╣реИред  рдпрджрд┐ рдЖрдкрдХреЛ рдкреВрд░реА рдХрддрд╛рд░ рдХреЗ рдкреВрд░реНрдг рдЖрджреЗрд╢ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рд╕рдВрджреЗрд╢ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЧреНрд░рд╛рд╣рдХ рдХреЗ рд╕рдВрджреЗрд╢), рдпрд╛ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИ, рддреЛ рдпрд╣ рд╡рд┐рдХрд▓реНрдк рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╣реИ: рдХрддрд╛рд░ рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореЗрд░реЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░реЗрдмрд▓реЗрдВрд╕рд░</a> рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛ рджреЗрдЦреЗрдВ (рдкрд░рд┐рдпреЛрдЬрдирд╛ рдЕрднреА рднреА рдПрдХ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЪрд░рдг рдореЗрдВ рд╣реИ)ред <br><br>  рдЕрдВрдд рдореЗрдВ, RabbitMQ рдФрд░ Kafka рджреЛрдиреЛрдВ рдХреЗ рдХреНрд▓рд╕реНрдЯрд░рд┐рдВрдЧ рдФрд░ рдкреНрд░рддрд┐рдХреГрддрд┐ рддрдВрддреНрд░ рдореЗрдВ рдХрдИ рдмрдЧреЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдордд рднреВрд▓рдирд╛ред  рд╕рдордп рдХреЗ рд╕рд╛рде, рд╕рд┐рд╕реНрдЯрдо рдЕрдзрд┐рдХ рдкрд░рд┐рдкрдХреНрд╡ рдФрд░ рд╕реНрдерд┐рд░ рд╣реЛ рдЧрдП рд╣реИрдВ, рд▓реЗрдХрд┐рди рдПрдХ рднреА рд╕рдВрджреЗрд╢ рдХрднреА рднреА рдиреБрдХрд╕рд╛рди рд╕реЗ 100% рд╕реБрд░рдХреНрд╖рд┐рдд рдирд╣реАрдВ рд╣реЛрдЧрд╛!  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдбреЗрдЯрд╛ рдХреЗрдВрджреНрд░реЛрдВ рдореЗрдВ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рджреБрд░реНрдШрдЯрдирд╛рдПрдВ рд╣реЛрддреА рд╣реИрдВ! <br><br>  рдЕрдЧрд░ рдореИрдВрдиреЗ рдХреБрдЫ рдпрд╛рдж рдХрд┐рдпрд╛, рддреЛ рдЧрд▓рддреА рд╣реБрдИ рдпрд╛ рдЖрдк рдХрд┐рд╕реА рднреА рдмрд┐рдВрджреБ рд╕реЗ рд╕рд╣рдордд рдирд╣реАрдВ рд╣реИрдВ, рдмреЗрдЭрд┐рдЭрдХ рдЯрд┐рдкреНрдкрдгреА рд▓рд┐рдЦреЗрдВ рдпрд╛ рдореБрдЭрд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░реЗрдВред <br><br>  рд▓реЛрдЧ рдЕрдХреНрд╕рд░ рдореБрдЭрд╕реЗ рдкреВрдЫрддреЗ рд╣реИрдВ: "рдХреНрдпрд╛ рдЪреБрдирдирд╛ рд╣реИ, рдХрд╛рдлреНрдХрд╛ рдпрд╛ рд░реИрдмрд┐рдЯрдПрдордХреНрдпреВ?", "рдХреМрди рд╕рд╛ рдордВрдЪ рдмреЗрд╣рддрд░ рд╣реИ?"ред  рд╕рдЪреНрдЪрд╛рдИ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЖрдкрдХреА рд╕реНрдерд┐рддрд┐, рд╡рд░реНрддрдорд╛рди рдЕрдиреБрднрд╡ рдЖрджрд┐ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред рдореИрдВ рдЕрдкрдиреА рд░рд╛рдп рд╡реНрдпрдХреНрдд рдХрд░рдиреЗ рдХреА рд╣рд┐рдореНрдордд рдирд╣реАрдВ рдХрд░рддрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рд╕рднреА рдЙрдкрдпреЛрдЧ рдХреЗ рдорд╛рдорд▓реЛрдВ рдФрд░ рд╕рдВрднрд╛рд╡рд┐рдд рд╕реАрдорд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рд╕реА рдПрдХ рдордВрдЪ рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рд░рд▓ рд╣реЛрдЧрд╛ред  рдореИрдВрдиреЗ рд▓реЗрдЦреЛрдВ рдХреА рдпрд╣ рд╢реНрд░реГрдВрдЦрд▓рд╛ рд▓рд┐рдЦреА рд╣реИ рддрд╛рдХрд┐ рдЖрдк рдЕрдкрдиреА рд░рд╛рдп рдмрдирд╛ рд╕рдХреЗрдВред <br><br>  рдореИрдВ рдХрд╣рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реВрдВ рдХрд┐ рджреЛрдиреЛрдВ рдкреНрд░рдгрд╛рд▓рд┐рдпрд╛рдВ рдЗрд╕ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдЕрдЧреНрд░рдгреА рд╣реИрдВред  рд╢рд╛рдпрдж рдореИрдВ рдереЛрдбрд╝рд╛ рдкрдХреНрд╖рдкрд╛рддреА рд╣реВрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЕрдкрдиреА рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рдЕрдиреБрднрд╡ рд╕реЗ рдореИрдВ рдЗрд╕ рддрд░рд╣ рдХреА рдЪреАрдЬреЛрдВ рдХреА рд╕рд░рд╛рд╣рдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрдЪреНрдЫреБрдХ рд╣реВрдВ рдЬреИрд╕реЗ рдХрд┐ рдЧрд╛рд░рдВрдЯреА рд╕рдВрджреЗрд╢ рдЖрджреЗрд╢ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ред <br><br>  рдореИрдВ рдЕрдиреНрдп рддрдХрдиреАрдХреЛрдВ рдХреЛ рджреЗрдЦрддрд╛ рд╣реВрдВ рдЬрд┐рдирдореЗрдВ рдЗрд╕ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдпрддрд╛ рдФрд░ рдЧрд╛рд░рдВрдЯреАрдХреГрдд рдСрд░реНрдбрд░ рдХреА рдХрдореА рд╣реИ, рдлрд┐рд░ RabbitMQ рдФрд░ рдХрд╛рдлреНрдХрд╛ рдХреЛ рджреЗрдЦреЗрдВ - рдФрд░ рдореИрдВ рдЗрди рджреЛрдиреЛрдВ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рдЕрд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рдореВрд▓реНрдп рдХреЛ рд╕рдордЭрддрд╛ рд╣реВрдВред </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi474984/">https://habr.com/ru/post/hi474984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi474968/index.html">RxDart рд╕рдмрд╕реЗ рдЫреЛрдЯреА ... рдкрд░рд┐рдпреЛрдЬрдирд╛рдУрдВ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi474970/index.html">рдУрдиреНрдЯреЛрд▓реЙрдЬреА рдкрд░ рдкрд╛рдпрдерди рдХреЗ рд╕рд╛рде рдПрдХ рд╕реНрдорд╛рд░реНрдЯ рдЕрдиреБрдмрдВрдз рдХреИрд╕реЗ рд▓рд┐рдЦреЗрдВ? рднрд╛рдЧ 5: рдореВрд▓ рдирд┐рд╡рд╛рд╕реА рдПрдкреАрдЖрдИ</a></li>
<li><a href="../hi474976/index.html">рдмреЛрдЯрд┐рдВрдЧ рд╕рд┐рдЯреА: рд╡реЗрдирд┐рд╕ рдХрд╛рд░реЛрдВ рдХреЗ рдмрд┐рдирд╛ рдХреИрд╕реЗ рдЪрд▓рддреА рд╣реИ</a></li>
<li><a href="../hi474978/index.html">рдЖрдИрдмреАрдПрдо рд╡рд╛рдЯрд╕рди рд╡рд┐рдЬреБрдЕрд▓ рд░рд┐рдХреЙрдЧреНрдирд┐рд╢рди: рдЖрдИрдмреАрдПрдо рдХреНрд▓рд╛рдЙрдб рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╡рд╕реНрддреБ рдорд╛рдиреНрдпрддрд╛</a></li>
<li><a href="../hi474982/index.html">JavaFX рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓: FXML рдФрд░ рджреГрд╢реНрдп</a></li>
<li><a href="../hi474988/index.html">рдорд┐рддрд╛рдк рдореЗрдВ рдЖрдкрдХрд╛ рд╕реНрд╡рд╛рдЧрдд рд╣реИ: рд╢реБрд░реБрдЖрддреА рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕рд╛рдЗрдВрд╕ рдореЗрдВ рдХрд░рд┐рдпрд░</a></li>
<li><a href="../hi474990/index.html">рдХрдард┐рди рдЕрднреНрдпрд╛рд╕: рд╢рд╣рд░ рдХреЗ рдкрд╛рд░реНрдХ рдореЗрдВ рд╡рд╛рдИ-рдлрд╛рдИ рдиреЗрдЯрд╡рд░реНрдХ рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдП</a></li>
<li><a href="../hi474992/index.html">рджреЛрд╖рдкреВрд░реНрдг рд▓реИрдкрдЯреЙрдк рдмреИрдЯрд░реА рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдгред рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдмрд╛рдЗрдХрд░ рдиреЛрдЯреНрд╕</a></li>
<li><a href="../hi474994/index.html">рдПрдХ рдореЛрдиреЛрд▓рд┐рде рдХреЛ рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рдХреИрд╕реЗ рдХрд╛рдЯреЗрдВ рдФрд░ рдирд┐рд░рдВрддрд░рддрд╛ рдЦреЛрдП рдмрд┐рдирд╛ рдЗрди-рдореЗрдореЛрд░реА рдХреИрд╢ рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдмрдирд╛рдП рд░рдЦреЗрдВ</a></li>
<li><a href="../hi474996/index.html">рдирд╡рдВрдмрд░ рдореЗрдВ рдЖрдИрдЯреА рдШрдЯрдирд╛рдУрдВ рдХрд╛ рдкрд╛рдЪрди (рднрд╛рдЧ рджреЛ)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>