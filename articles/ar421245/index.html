<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ฟ ๐ C #: ุญุงูุฉ ุงุณุชุฎุฏุงู ูุงุญุฏุฉ ูุฃู ูููุฉ ๐ โต๏ธ ๐ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! ููุงุตู ุงูุญุฏูุซ ุนู ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู C #. ุณูุชุญุฏุซ ุงูููู ุนู ุญุงูุฉ ุงุณุชุฎุฏุงู ูุงุญุฏุฉ ุฃู ุณููุงุฑูู ุฎุงุต ุจุงููุณุชุฎุฏู ููุงุณุจ ูุฃูุฉ ููุงู ูู ุฅุทุงุฑ ุงูุจุฑูุฌ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C #: ุญุงูุฉ ุงุณุชุฎุฏุงู ูุงุญุฏุฉ ูุฃู ูููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/421245/" style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ!  ููุงุตู ุงูุญุฏูุซ ุนู ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู C #.  ุณูุชุญุฏุซ ุงูููู ุนู ุญุงูุฉ ุงุณุชุฎุฏุงู ูุงุญุฏุฉ ุฃู ุณููุงุฑูู ุฎุงุต ุจุงููุณุชุฎุฏู ููุงุณุจ ูุฃูุฉ ููุงู ูู ุฅุทุงุฑ ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ.  ุณูุชุทุฑู ุฅูู ููุงุถูุน ุงููุฒุงููุฉ ุ ูุงููุขุฒู ุ ูุฅุนุฏุงุฏุงุช ุงููุดุบู ุ ููุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช ุ ูุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ.  ุงูุถู ุงูุขู! <br><br><img src="https://habrastorage.org/webt/fn/3y/w8/fn3yw8b2lmo8cbbziqaiogmvsxy.jpeg"><a name="habracut"></a><br><br><blockquote style=";text-align:right;direction:rtl">  <b>ุงูููุงูุงุช ุงูุณุงุจูุฉ ุฐุงุช ุงูุตูุฉ</b> <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ C #: ููู ุญุงูู ูุน ุงูุฃุฏุงุกุ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฌุงูุฒ ูุณุงูู ู GetHashCode.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููู ูู ูู ุถุฑูุฑูุ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ุงูุฐู ูููู ุงูุนุซูุฑ ุนููู ูู ููุฏ ุดุฎุต ุขุฎุฑุ</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฌููุนุฉ ูุฎุชุงุฑุฉ ูู ุงูููุงุฏ ุงููููุฏุฉ ูู .NET</a> </li></ul></blockquote><br>  ูููู ุชูุณูุฑ ุฃู ุณููู ุบูุฑ ููุงุณู ุชูุฑูุจูุง ููุทุฑู ุบูุฑ ุงููุชุฒุงููุฉ ูู C # ุนูู ุฃุณุงุณ ุณููุงุฑูู ูุณุชุฎุฏู ูุงุญุฏ: ูุฌุจ ุฃู ูููู ุชุญููู ุฑูุฒ ูุชุฒุงูู ููุฌูุฏ ุฅูู ุบูุฑ ูุชุฒุงูู ุจุณูุทูุง ูุฏุฑ ุงูุฅููุงู.  ูุฌุจ ุฃู ุชููู ูุงุฏุฑูุง ุนูู ุฅุถุงูุฉ ุงููููุฉ ุงูุฃุณุงุณูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูุจู ููุน ุงูุฅุฑุฌุงุน ููุทุฑููุฉ ุ ูุฅุถุงูุฉ ูุงุญูุฉ ุบูุฑ ูุชุฒุงููุฉ ุฅูู ุงุณู ูุฐู ุงูุทุฑููุฉ ุ ูุฅุถุงูุฉ ุงููููุฉ ุงูุฑุฆูุณูุฉ ุงูููุชุธุฑุฉ ููุง ููู ููุทูุฉ ุงููุต ูู ุงูุทุฑููุฉ ููุญุตูู ุนูู ุทุฑููุฉ ุบูุฑ ูุชุฒุงููุฉ ุชุนูู ุจูุงูู ุทุงูุชูุง. <br><br><img width="550" src="https://habrastorage.org/webt/di/uw/i8/diuwi85jehdfov_iozovmreg59s.png"><br><br>  ูุบูุฑ ุงูุณููุงุฑูู "ุงูุจุณูุท" ุจุดูู ูุจูุฑ ุงูุนุฏูุฏ ูู ุฌูุงูุจ ุณููู ุงูุทุฑู ุบูุฑ ุงููุชุฒุงููุฉ: ูู ุชุฎุทูุท ูุฏุฉ ุงููููุฉ ุฅูู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช.  ูุจุฏู ุงููุต ูููุนูุง ูููููุง ุ ูููู ูู ุณูุงูู ุ ุชุตุจุญ ุจุณุงุทุฉ ุงูุทุฑู ุบูุฑ ุงููุชุฒุงููุฉ ูุถููุฉ ููุบุงูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุณูุงู ุงููุฒุงููุฉ </h2><br>  ุชุทููุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู (UI) ูู ุฃุญุฏ ุงููุฌุงูุงุช ุญูุซ ูููู ุงูุณููุงุฑูู ุฃุนูุงู ููููุง ุจุดูู ุฎุงุต.  ูุธุฑูุง ููุนูููุงุช ุงูุทูููุฉ ูู ุณูุณูุฉ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ูุฒุฏุงุฏ ููุช ุงุณุชุฌุงุจุฉ ุงูุชุทุจููุงุช ุ ููู ูุฐู ุงูุญุงูุฉ ุชุนุชุจุฑ ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุฏุงุฆููุง ุฃุฏุงุฉ ูุนุงูุฉ ููุบุงูุฉ. <br><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonOk_ClickAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs args</span></span></span><span class="hljs-function">)</span></span> { textBox.Text = <span class="hljs-string"><span class="hljs-string">"Running.."</span></span>; <span class="hljs-comment"><span class="hljs-comment">// 1 -- UI Thread var result = await _stockPrices.GetStockPricesForAsync("MSFT"); // 2 -- Usually non-UI Thread textBox.Text = "Result is: " + result; //3 -- Should be UI Thread }</span></span></code> </pre> <br>  ูุจุฏู ุงูุฑูุฒ ุจุณูุทูุง ุฌุฏูุง ุ ูููู ููุงู ูุดููุฉ ูุงุญุฏุฉ.  ููุงู ูููุฏ ุนูู ูุนุธู ูุงุฌูุงุช ุงููุณุชุฎุฏู: ูุง ูููู ุชุบููุฑ ุนูุงุตุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุฅูุง ูู ุฎูุงู ุณูุงุณู ุงููุญุงุฏุซุงุช ุงูุฎุงุตุฉ.  ุฃู ุ ูู ุงูุณุทุฑ 3 ุ ูุญุฏุซ ุฎุทุฃ ุฅุฐุง ุชูุช ุฌุฏููุฉ ูุฏุฉ ุงููููุฉ ูู ูุคุดุฑ ุงูุชุฑุงุจุท ูู ุชุฌูุน ูุคุดุฑ ุงูุชุฑุงุจุท.  ูุญุณู ุงูุญุธ ุ ูุฐู ุงููุดููุฉ ูุนุฑููุฉ ููุฐ ููุช ุทููู ุ ูุธูุฑ ููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุงู ุงููุฒุงููุฉ</a> ูู .NET Framework 2.0. <br><br>  ุชููุฑ ูู ูุงุฌูุฉ ูุณุชุฎุฏู ุฃุฏูุงุช ูุณุงุนุฏุฉ ุฎุงุตุฉ ูุชูุธูู ุงูููุงู ูู ูุงุญุฏ ุฃู ุฃูุซุฑ ูู ุณูุงุณู ุนูููุงุช ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงููุชุฎุตุตุฉ.  ุชุณุชุฎุฏู ููุงุฐุฌ Windows ุทุฑููุฉ <code>Control.Invoke</code> ุ <code>Control.Invoke</code> WPF ุฃุณููุจ Dispatcher.Invoke ุ ููููู ููุฃูุธูุฉ ุงูุฃุฎุฑู ุงููุตูู ุฅูู ุทุฑู ุฃุฎุฑู.  ุงููุฎุทุทุงุช ุงููุณุชุฎุฏูุฉ ูู ูู ูุฐู ุงูุญุงูุงุช ูุชุดุงุจูุฉ ุฅูู ุญุฏ ูุจูุฑ ุ ูููููุง ุชุฎุชูู ูู ุงูุชูุงุตูู.  ูุณูุญ ูู ุณูุงู ุงููุฒุงููุฉ ุจุงูุชุฌุฑูุฏ ูู ุงูุงุฎุชูุงูุงุช ูู ุฎูุงู ุชูููุฑ ูุงุฌูุฉ ุจุฑูุฌุฉ ุชุทุจููุงุช ูุชุดุบูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุณูุงู "ุฎุงุต" ูููุฑ ูุนุงูุฌุฉ ุงูุชูุงุตูู ุงูุซุงูููุฉ ุจูุงุณุทุฉ ุฃููุงุน ูุดุชูุฉ ูุซู <code>WindowsFormsSynchronizationContext</code> ู <code>DispatcherSynchronizationContext</code> ุ ุฅูุฎ. <br><br>  ูุญู ูุดููุฉ ุชูุงุฑุจ ูุคุดุฑ ุงูุชุฑุงุจุท ุ ูุฑุฑ ุงููุจุฑูุฌูู C # ุฅุฏุฎุงู ุณูุงู ุงููุฒุงููุฉ ุงูุญุงูู ูู ุงููุฑุญูุฉ ุงูุฃูููุฉ ูู ุชูููุฐ ุงูุฃุณุงููุจ ุบูุฑ ุงููุชุฒุงููุฉ ูุชุฎุทูุท ุฌููุน ุงูุนูููุงุช ุงููุงุญูุฉ ูู ูุฐุง ุงูุณูุงู.  ุงูุขู ุ ูุชู ุชูููุฐ ูู ูู ุงููุชู ุจูู ุงูุจูุงูุงุช ุงูููุชุธุฑุฉ ูู ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ููุง ูุฌุนู ูู ุงููููู ุชูููุฐ ุงูุจุฑูุงูุฌ ุงููุตู ุงูุฑุฆูุณู.  ููุน ุฐูู ุ ุฃุฏู ูุฐุง ุงูุญู ุฅูู ุธููุฑ ุนุฏุฏ ูู ุงููุดุงูู ุงูุฌุฏูุฏุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุฌููุฏ </h2><br>  ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ุฑูุฒ ุตุบูุฑ ูุจุณูุท ูุณุจููุง.  ูู ููุงู ูุดุงูู ููุงุ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// UI code private void buttonOk_Click(object sender, EventArgs args) { textBox.Text = "Running.."; var result = _stockPrices.GetStockPricesForAsync("MSFT").Result; textBox.Text = "Result is: " + result; } // StockPrices.dll public Task&lt;decimal&gt; GetStockPricesForAsync(string symbol) { await Task.Yield(); return 42; }</span></span></code> </pre> <br>  ูุคุฏู ูุฐุง ุงูุฑูุฒ ุฅูู <b>ุทุฑูู ูุณุฏูุฏ</b> .  ูุจุฏุฃ ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุนูููุฉ ุบูุฑ ูุชุฒุงููุฉ ูููุชุธุฑ ุงููุชูุฌุฉ ุจุดูู ูุชุฒุงูู.  ููุน ุฐูู ุ ูุง ูููู ุฅุชูุงู ุงูุฃุณููุจ ุบูุฑ ุงููุชุฒุงูู ูุฃูู ูุฌุจ ุชูููุฐ ุงูุณุทุฑ ุงูุซุงูู ูู <code>GetStockPricesForAsync</code> ูู ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุงูุฐู ูุคุฏู ุฅูู ุญุงูุฉ ุชููู ุชุงู. <br><br>  ุณุชุนุชุฑุถ ุนูู ุฃู ุญู ูุฐู ุงููุดููุฉ ุณูู ููุบุงูุฉ.  ูุนู ุจุงููุนู.  ูุฌุจ ุญุธุฑ ุฌููุน ุงูููุงููุงุช ุฅูู <code>Task.Wait</code> ุฃู <code>Task.Wait</code> ูู ุฑูุฒ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ููุน ุฐูู ุ ูููู ุฃู ุชุญุฏุซ ุงููุดููุฉ ุฅุฐุง ูุงู ุงููููู ุงููุณุชุฎุฏู ุจูุงุณุทุฉ ูุฐุง ุงูุฑูุฒ ููุชุธุฑ ูุชูุฌุฉ ุนูููุฉ ุงููุณุชุฎุฏู ุจุดูู ูุชุฒุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// UI code private void buttonOk_Click(object sender, EventArgs args) { textBox.Text = "Running.."; var result = _stockPrices.GetStockPricesForAsync("MSFT").Result; textBox.Text = "Result is: " + result; } // StockPrices.dll public Task&lt;decimal&gt; GetStockPricesForAsync(string symbol) { // We know that the initialization step is very fast, // and completes synchronously in most cases, // let's wait for the result synchronously for "performance reasons". InitializeIfNeededAsync().Wait(); return Task.FromResult((decimal)42); } // StockPrices.dll private async Task InitializeIfNeededAsync() =&gt; await Task.Delay(1);</span></span></code> </pre> <br>  ูุคุฏู ูุฐุง ุงูุฑูุฒ ูุฑุฉ ุฃุฎุฑู ุฅูู ุทุฑูู ูุณุฏูุฏ.  ููููุฉ ุญููุง: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฌุจ ุนุฏู ุญุธุฑ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุจุงุณุชุฎุฏุงู <code>Task.Wait()</code> ุฃู <code>Task.Result</code> ู </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏู <code>ConfigureAwait(false)</code> ูู ููุฏ ุงูููุชุจุฉ. </li></ul><br>  ูุนูู ุงูุชูุตูุฉ ุงูุฃููู ูุงุถุญ ุ ูุงูุซุงููุฉ ุงูุชู ุณููุถุญูุง ุฃุฏูุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ุชูููู ุงูุจูุงูุงุช ุงูููุชุธุฑุฉ </h2><br>  ููุงู ุณุจุจุงู <code>Task.Wait()</code> ุญุงูุฉ ุชููู ุชุงู ูู ุงููุซุงู ุงูุฃุฎูุฑ: <code>Task.Wait()</code> ูู <code>Task.Wait()</code> ูุงูุงุณุชุฎุฏุงู ุบูุฑ ุงููุจุงุดุฑ ูุณูุงู ุงููุฒุงููุฉ ูู ุงูุฎุทูุงุช ุงููุงุญูุฉ ูู InitializeIfNeededAsync.  ุนูู ุงูุฑุบู ูู ุฃู ูุจุฑูุฌู C # ูุง ููุตูู ุจุญุธุฑ ุงูููุงููุงุช ุจุงูุทุฑู ุบูุฑ ุงููุชุฒุงููุฉ ุ ููู ุงููุงุถุญ ุฃูู ูู ูุนุธู ุงูุญุงูุงุช ูุง ูุฒุงู ูุฐุง ุงูุญุธุฑ ููุฏ ุงูุงุณุชุฎุฏุงู.  ููุฏู ูุจุฑูุฌู C # ุงูุญู ุงูุชุงูู ููุดููุฉ ุงูุฌููุฏ: <code>Task.ConfigureAwait(continueOnCapturedContext:false)</code> . <br><br>  ุนูู ุงูุฑุบู ูู ุงููุธูุฑ ุงูุบุฑูุจ (ุฅุฐุง ุชู ุชูููุฐ ุงุณุชุฏุนุงุก ุงูุฃุณููุจ ุจุฏูู ูุณูุทุฉ ูุณูุงุฉ ุ ูุฅู ูุฐุง ูุง ูุนูู ุฃู ุดูุก ุนูู ุงูุฅุทูุงู) ุ ูุฅู ูุฐุง ุงูุญู ูุคุฏู ูุธููุชู: ููู ูููุฑ ุงุณุชูุฑุงุฑูุง ูุณุฑููุง ููุชูููุฐ ุฏูู ุณูุงู ุงูุชุฒุงูู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">decimal</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetStockPricesForAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> symbol</span></span></span><span class="hljs-function">)</span></span> { InitializeIfNeededAsync().Wait(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Task.FromResult((<span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span>)<span class="hljs-number"><span class="hljs-number">42</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeIfNeededAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> Task.Delay(<span class="hljs-number"><span class="hljs-number">1</span></span>).ConfigureAwait(<span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre> <br>  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู <code>Task.Delay(1</code> ูุงุณุชูุฑุงุฑ ูููุฉ <code>Task.Delay(1</code> ) (ููุง ุนุจุงุฑุฉ ูุงุฑุบุฉ) ูู ูุคุดุฑ ุงูุชุฑุงุจุท ูู ุชุฌูุน ูุคุดุฑ ุงูุชุฑุงุจุท ุ ูููุณ ูู ูุคุดุฑ ุชุฑุงุจุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ููุง ููุบู ุญุงูุฉ ุงูุฌููุฏ. <br><br><h2 style=";text-align:right;direction:rtl">  ุชุนุทูู ุณูุงู ุงููุฒุงููุฉ </h2><br>  ุฃุนูู ุฃู <code>ConfigureAwait</code> ูุญู ูุฐู ุงููุดููุฉ ุจุงููุนู ุ ููููู ููุฑุฒ ุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ.  ููุง ูุซุงู ุตุบูุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">decimal</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetStockPricesForAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> symbol</span></span></span><span class="hljs-function">)</span></span> { InitializeIfNeededAsync().Wait(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Task.FromResult((<span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span>)<span class="hljs-number"><span class="hljs-number">42</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeIfNeededAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Initialize the cache field first await _cache.InitializeAsync().ConfigureAwait(false); // Do some work await Task.Delay(1); }</span></span></code> </pre> <br>  ูู ุชุฑู ุงููุดููุฉุ  ุงุณุชุฎุฏููุง <code>ConfigureAwait(false)</code> ุ ูุฐุง ูุฌุจ ุฃู ูููู ูู ุดูุก ุนูู ูุง ูุฑุงู.  ููู ููุณ ุญูููุฉ. <br><br>  <code>ConfigureAwait(false)</code> ุจุฅุฑุฌุงุน ูุงุฆู <code>ConfiguredTaskAwaitable</code> ูุฎุตุต ููุงูุชุธุงุฑ ุ ููุนูู ุฃูู ูุณุชุฎุฏู ููุท ุฅุฐุง ูู ุชูุชูู ุงููููุฉ ุจุดูู ูุชุฒุงูู.  ุจูุนูู ุฃูู ูู ุญุงูุฉ ุงูุชูุงุก <code>_cache.InitializeAsync()</code> ุจุดูู ูุชุฒุงูู ุ ูุฅู ุญุงูุฉ ุชููู ุชุงู ูุง ุฒุงูุช ููููุฉ. <br><br>  ููุชุฎูุต ูู ุญุงูุงุช ุงูุฌููุฏ ุ ูุฌุจ "ุชุฒููู" ุฌููุน ุงูููุงู ุงูุชู ุชูุชุธุฑ ุงูุงูุชูุงุก ุจุงุณุชุฏุนุงุก ุงูุฃุณููุจ <code>ConfigureAwait(false)</code> .  ูู ูุฐุง ูุฒุนุฌ ููููุฏ ุฃุฎุทุงุก. <br><br>  ุจุฏูุงู ูู ุฐูู ุ ููููู ุงุณุชุฎุฏุงู ุงููุงุฆู ุงููุฎุตุต ููุงูุชุธุงุฑ ูู ุฌููุน ุงูุทุฑู ุงูุนุงูุฉ ูุชุนุทูู ุณูุงู ุงููุฒุงููุฉ ูู ุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonOk_Click</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs args</span></span></span><span class="hljs-function">)</span></span> { textBox.Text = <span class="hljs-string"><span class="hljs-string">"Running.."</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = _stockPrices.GetStockPricesForAsync(<span class="hljs-string"><span class="hljs-string">"MSFT"</span></span>).Result; textBox.Text = <span class="hljs-string"><span class="hljs-string">"Result is: "</span></span> + result; } <span class="hljs-comment"><span class="hljs-comment">// StockPrices.dll public async Task&lt;decimal&gt; GetStockPricesForAsync(string symbol) { // The rest of the method is guarantee won't have a current sync context. await Awaiters.DetachCurrentSyncContext(); // We can wait synchronously here and we won't have a deadlock. InitializeIfNeededAsync().Wait(); return 42; }</span></span></code> </pre> <br>  <code>Awaiters.DetachCurrentSyncContext</code> ุจุฅุฑุฌุงุน ูุงุฆู ุงูุงูุชุธุงุฑ ุงููุฎุตุต ุงูุชุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> DetachSynchronizationContextAwaiter : ICriticalNotifyCompletion { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> Returns true if a current synchronization context is null. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> It means that the continuation is called only when a current context </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> is presented. </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> public bool IsCompleted =&gt; SynchronizationContext.Current == null; public void OnCompleted(Action continuation) { ThreadPool.QueueUserWorkItem(state =&gt; continuation()); } public void UnsafeOnCompleted(Action continuation) { ThreadPool.UnsafeQueueUserWorkItem(state =&gt; continuation(), null); } public void GetResult() { } public DetachSynchronizationContextAwaiter GetAwaiter() =&gt; this; } public static class Awaiters { public static DetachSynchronizationContextAwaiter DetachCurrentSyncContext() { return new DetachSynchronizationContextAwaiter(); } }</span></span></code> </pre> <br>  ูููู <code>DetachSynchronizationContextAwaiter</code> ุจูุง ููู: ูุนูู ุฃุณููุจ ุงููุฒุงููุฉ ูุน ุณูุงู ูุฒุงููุฉ ุบูุฑ ุตูุฑู.  ูููู ุฅุฐุง ูุงูุช ุงูุทุฑููุฉ ุงููุชุฒุงููุฉ ุชุนูู ุจุฏูู ุณูุงู ุงูุชุฒุงูู ุ ูุฅู ุงูุฎุงุตูุฉ <code>IsCompleted</code> ุชุฑุฌุน ุฅูู true ุ ููุชู ุชูููุฐ ุงูุฃุณููุจ ุจุดูู ูุชุฒุงูู. <br><br>  ููุฐุง ูุนูู ุฃู ุจูุงูุงุช ุงูุฎุฏูุฉ ุชูุชุฑุจ ูู ุงูุตูุฑ ุนูุฏ ุชูููุฐ ุงูุทุฑููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู ุฎูุท ูู ุชุฌูุน ุฎูุท ุ ููุชู ุงูุฏูุน ูุฑุฉ ูุงุญุฏุฉ ูููู ุงูุชูููุฐ ูู ุฎูุท ูุงุฌูุฉ ุงููุณุชุฎุฏู ุฅูู ุฎูุท ูู ุฎูุท ุงูุฎูุท. <br><br>  ุชู ุณุฑุฏ ุงูููุงุฆุฏ ุงูุฃุฎุฑู ููุฐุง ุงูููุฌ ุฃุฏูุงู. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ูุชู ุชูููู ุงุญุชูุงู ุงูุฎุทุฃ.</b>  <code>ConfigureAwait(false)</code> ููุท ุฅุฐุง ุชู ุชุทุจููู ุนูู ุฌููุน ุงูููุงู ุงูุชู ุชูุชุธุฑ ุงูุงูุชูุงุก.  ูุฌุฏุฑ ูุณูุงู ุดูุก ูุงุญุฏ ุนูู ุงูุฃูู - ููุฏ ูุญุฏุซ ุทุฑูู ูุณุฏูุฏ.  ูู ุญุงูุฉ ูุฌูุฏ ูุงุฆู ุงูุชุธุงุฑ ูุฎุตุต ุ ุชุฐูุฑ ุฃู ุฌููุน ุทุฑู ุงูููุชุจุฉ ุงูุนุงูุฉ ูุฌุจ ุฃู ุชุจุฏุฃ ุจู <code>Awaiters.DetachCurrentSyncContext()</code> .  ุงูุฃุฎุทุงุก ููููุฉ ููุง ุ ูููู ุงุญุชูุงููุง ุฃูู ุจูุซูุฑ. </li><li style=";text-align:right;direction:rtl">  <b>ุงูููุฏ ุงููุงุชุฌ ูู ุฃูุซุฑ ูุถูุญุง ููุงุถุญุง.</b>  ุชุจุฏู ุทุฑููุฉ <code>ConfigureAwait</code> ูุน ุงูุนุฏูุฏ ูู ุงูููุงููุงุช ุฃูู ูุฑุงุกุฉ ุจุงููุณุจุฉ ูู (ุจุณุจุจ ุนูุงุตุฑ ุฅุถุงููุฉ) ูููุณุช ูููุฏุฉ ุจูุง ูููู ูููุจุชุฏุฆูู. </li></ul><br><h2 style=";text-align:right;direction:rtl">  ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุก </h2><br>  ูุง ุงููุฑู ุจูู ูุฐูู ุงูุฎูุงุฑูู: <br><br>  Task mayFail = Task.FromException (new ArgumentNullException ())ุ <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Case 1 try { await mayFail; } catch (ArgumentException e) { // Handle the error } // Case 2 try { mayFail.Wait(); } catch (ArgumentException e) { // Handle the error }</span></span></code> </pre> <br>  ูู ุงูุญุงูุฉ ุงูุฃููู ุ ูู ุดูุก ููุจู ุงูุชููุนุงุช - ูุชู ุชูููุฐ ูุนุงูุฌุฉ ุงูุฎุทุฃ ุ ูููู ูู ุงูุญุงูุฉ ุงูุซุงููุฉ ูุง ูุญุฏุซ ูุฐุง.  ุชู ุชุตููู ููุชุจุฉ ุงูููุงู ุงููุชูุงุฒูุฉ TPL ููุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูุงููุชูุงุฒูุฉ ุ ููููู ุฃู ุชูุซู ุงููููุฉ / ุงููููุฉ ูุชูุฌุฉ ุนุฏุฉ ุนูููุงุช.  ูุฐุง ูู ุงูุณุจุจ ูู ููุงู <code>Task.Result</code> ู <code>Task.Wait()</code> ุฏุงุฆููุง ุจุฅููุงุก <code>AggregateException</code> ุ ูุงูุชู ูุฏ ุชุญุชูู ุนูู ุงูุนุฏูุฏ ูู ุงูุฃุฎุทุงุก. <br><br>  ููุน ุฐูู ุ ูุฅู ุงูุณููุงุฑูู ุงูุฑุฆูุณู ูุฏููุง ูุบูุฑ ูู ุดูุก: ูุฌุจ ุฃู ูููู ุงููุณุชุฎุฏู ูุงุฏุฑูุง ุนูู ุฅุถุงูุฉ ุนุงูู ุงูุชุดุบูู ุบูุฑ ุงููุชุฒุงูู / ุงูุงูุชุธุงุฑ ุฏูู ููุณ ููุทู ูุนุงูุฌุฉ ุงูุฎุทุฃ.  ุจูุนูู ุ ูุฌุจ ุฃู ูููู ุงูุจูุงู ูู ุงูุชุธุงุฑู ูุฎุชูููุง ุนู <code>Task.Result</code> / <code>Task.Wait()</code> : ูุฌุจ ุฃู <code>Task.Wait()</code> ุงูุบูุงู ูู ุงุณุชุซูุงุก ูุงุญุฏ ูู ูุซูู <code>AggregateException</code> .  ุงูููู ุณูุฎุชุงุฑ ุงูุงุณุชุซูุงุก ุงูุฃูู. <br><br>  ูู ุดูุก ุนูู ูุง ูุฑุงู ุฅุฐุง ูุงูุช ุฌููุน ุงูุทุฑู ุงููุงุฆูุฉ ุนูู ุงููููุฉ ุบูุฑ ูุชุฒุงููุฉ ููุง ูุชู ุงุณุชุฎุฏุงู ุงูุญุณุงุจุงุช ุงููุชูุงุฒูุฉ ูุฃุฏุงุก ุงูููุงู.  ููู ูู ุจุนุถ ุงูุญุงูุงุช ุ ูู ุดูุก ูุฎุชูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Task&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; task1 = Task.FromException&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException()); Task&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; task2 = Task.FromException&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException()); <span class="hljs-comment"><span class="hljs-comment">// await will rethrow the first exception await Task.WhenAll(task1, task2); } catch (Exception e) { // ArgumentNullException. The second error is lost! Console.WriteLine(e.GetType()); }</span></span></code> </pre> <br>  <code>Task.WhenAll</code> ุจุฅุฑุฌุงุน ูููุฉ ุจูุง ุฎุทุฃูู ุ ููุน ุฐูู ุ ูุฅู ุนุจุงุฑุฉ ุงูุงูุชุธุงุฑ ุชูุชุธุฑ ูุชููุฃ ุงูุฃููู ููุท. <br><br>  ููุงู ุทุฑููุชุงู ูุญู ูุฐู ุงููุดููุฉ: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุนุฑุถ ุงูููุงู ูุฏูููุง ุฅุฐุง ูุงู ูุฏููู ุญู ุงููุตูู ุ ุฃู </li><li style=";text-align:right;direction:rtl">  ุชูููู ููุชุจุฉ TPL ููุฑุถ ุงูุชูุงู ุงูุงุณุชุซูุงุก ูู <code>AggregateException</code> ุขุฎุฑ. </li></ol><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Task&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; task1 = Task.FromException&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException()); Task&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; task2 = Task.FromException&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InvalidOperationException()); <span class="hljs-comment"><span class="hljs-comment">// t.Result forces TPL to wrap the exception into AggregateException await Task.WhenAll(task1, task2).ContinueWith(t =&gt; t.Result); } catch(Exception e) { // AggregateException Console.WriteLine(e.GetType()); }</span></span></code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุทุฑููุฉ ูุฑุงุบ ุบูุฑ ูุชุฒุงูู </h2><br>  ุชูุฑุฌุน ุงูุทุฑููุฉ ุงููุงุฆูุฉ ุนูู ุงูููุงู ุฑูุฒูุง ูููุฒูุง ูููู ุงุณุชุฎุฏุงูู ููุนุงูุฌุฉ ุงููุชุงุฆุฌ ูู ุงููุณุชูุจู.  ุฅุฐุง ููุฏุช ุงููููุฉ ุ ูุตุจุญ ุงูุฑูุฒ ุงููููุฒ ุบูุฑ ูุงุจู ูููุฑุงุกุฉ ุจูุงุณุทุฉ ุฑูุฒ ุงููุณุชุฎุฏู.  ุชุคุฏู ุงูุนูููุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุงูุชู ุชูุฑุฌุน ุฃุณููุจ ุงููุฑุงุบ ุฅูู ุญุฏูุซ ุฎุทุฃ ูุง ูููู ูุนุงูุฌุชู ูู ุฑูุฒ ุงููุณุชุฎุฏู.  ุจูุฐุง ุงููุนูู ุ ูุฅู ุงูุฑููุฒ ุนุฏููุฉ ุงููุงุฆุฏุฉ ุจู ูุฎุทูุฑุฉ - ุงูุขู ุณูุฑุงูุง.  ููุน ุฐูู ุ ููุชุฑุถ ุงูุณููุงุฑูู ุงูุฑุฆูุณู ูุฏููุง ุงุณุชุฎุฏุงููุง ุงูุฅูุฒุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buttonOk_ClickAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, EventArgs args</span></span></span><span class="hljs-function">)</span></span> { textBox.Text = <span class="hljs-string"><span class="hljs-string">"Running.."</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _stockPrices.GetStockPricesForAsync(<span class="hljs-string"><span class="hljs-string">"MSFT"</span></span>); textBox.Text = <span class="hljs-string"><span class="hljs-string">"Result is: "</span></span> + result; }</code> </pre> <br>  ูููู ูุงุฐุง ูู ุชุณุจุจ <code>GetStockPricesForAsync</code> ุญุฏูุซ ุฎุทุฃุ  ูุชู ุชูุธูู ุงุณุชุซูุงุก ุฃุณููุจ ุนุฏู ุงูุชุฒุงูู ุบูุฑ ูุชุฒุงูู ูู ุณูุงู ุงููุฒุงููุฉ ุงูุญุงูู ุ ููุง ูุคุฏู ุฅูู ููุณ ุงูุณููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุชุจุน</a> ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุชุฒุงููุฉ (ููุฒูุฏ ูู ุงููุนูููุงุช ุ ุฑุงุฌุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุทุฑููุฉ ThrowAsync</a> ุนูู ุตูุญุฉ ุงูููุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">AsyncMethodBuilder.cs</a> ).  ูู ููุงุฐุฌ Windows ุ ูุคุฏู ุงุณุชุซูุงุก ุบูุฑ ูุนุงูุฌ ูู ูุนุงูุฌ ุงูุฃุญุฏุงุซ ุฅูู ุฅุทูุงู ุญุฏุซ <code>Application.ThreadException</code> ุ ุจุงููุณุจุฉ ุฅูู WPF ุ ูุญุฏุซ ุญุฏุซ <code>Application.DispatcherUnhandledException</code> ุ ููุง ุฅูู ุฐูู. <br><br>  ูุงุฐุง ูู ูู ุชุญุตู ุทุฑููุฉ ุนุฏู ุงูุชุฒุงูู ุนูู ุณูุงู ุงููุฒุงููุฉุ  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชุณุจุจ ุงูุงุณุชุซูุงุก ุบูุฑ ุงููุนุงูุฌ ูู ุญุฏูุซ ุนุทู ูุงุฏุญ ูู ุงูุชุทุจูู.  ูู ูุชู ุฅุทูุงู ุญุฏุซ [ <code>TaskScheduler.UnobservedTaskException</code> ] ุงูุฐู ูุชู ุงุณุชุนุงุฏุชู ุ ูููู ุณูุชู ุฅุทูุงู ุญุฏุซ <code>AppDomain.UnhandledException</code> ุงูุฐู ูู ูุชู ุงุณุชุนุงุฏุชู ุซู ุฅุบูุงู ุงูุชุทุจูู.  ูุญุฏุซ ูุฐุง ุนู ูุตุฏ ุ ููุฐู ูู ุงููุชูุฌุฉ ุงูุชู ูุญุชุงุฌูุง ุจุงูุถุจุท. <br><br>  ููููู ูุธุฑุฉ ุงูุขู ุนูู ุทุฑููุฉ ุฃุฎุฑู ูุนุฑููุฉ: ุงุณุชุฎุฏุงู ุทุฑู ุงููุฑุงุบ ุบูุฑ ุงููุชุฒุงููุฉ ููุท ููุนุงูุฌุงุช ุฃุญุฏุงุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู. <br><br>  ูุณูุก ุงูุญุธ ุ ูู ุงูุณูู ุงุณุชุฏุนุงุก ุทุฑููุฉ ุงููุฑุงุบ ุบูุฑ ุงููุชุฒุงูู ุนู ุทุฑูู ุงูุตุฏูุฉ. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Task&lt;T&gt; ActionWithRetry&lt;T&gt;(Func&lt;Task&lt;T&gt;&gt; provider, Action&lt;Exception&gt; onError) { <span class="hljs-comment"><span class="hljs-comment">// Calls 'provider' N times and calls 'onError' in case of an error. } public async Task&lt;string&gt; AccidentalAsyncVoid(string fileName) { return await ActionWithRetry( provider: () =&gt; { return File.ReadAllTextAsync(fileName); }, // Can you spot the issue? onError: async e =&gt; { await File.WriteAllTextAsync(errorLogFile, e.ToString()); }); }</span></span></code> </pre> <br>  ูููููุฉ ุงูุฃููู ุ ูู ุงูุตุนุจ ููู ุชุนุจูุฑ ูุงูุฏุง ูุง ุฅุฐุง ูุงูุช ุงููุธููุฉ ูู ุทุฑููุฉ ูุงุฆูุฉ ุนูู ุงูููุงู ุฃู ุทุฑููุฉ ุจุงุทูุฉ ุบูุฑ ูุชุฒุงููุฉ ุ ูุจุงูุชุงูู ูุฏ ูุชุณูู ุฎุทุฃ ุฅูู ูุงุนุฏุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงูุฎุงุตุฉ ุจู ุ ุนูู ุงูุฑุบู ูู ุงููุญุต ุงูุฃูุซุฑ ุฏูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูุฎูุงุตุฉ </h2><br>  ุชุฃุซุฑุช ุงูุนุฏูุฏ ูู ุฌูุงูุจ ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู C # ุจุณููุงุฑูู ูุณุชุฎุฏู ูุงุญุฏ - ุจุจุณุงุทุฉ ุชุญููู ุงูุดูุฑุฉ ุงููุชุฒุงููุฉ ูุชุทุจูู ูุงุฌูุฉ ูุณุชุฎุฏู ููุฌูุฏ ุฅูู ุบูุฑ ูุชุฒุงูู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชูุช ุฌุฏููุฉ ุงูุชูููุฐ ุงููุงุญู ููุฃุณุงููุจ ุบูุฑ ุงููุชุฒุงููุฉ ูู ุณูุงู ุงููุฒุงููุฉ ุงููุงุชุฌ ุ ููุง ูุฏ ูุชุณุจุจ ูู ุญุงูุงุช ุชููู ุชุงู. </li><li style=";text-align:right;direction:rtl">  ูููุนูุง ุ ูู ุงูุถุฑูุฑู ุฅุฌุฑุงุก ููุงููุงุช <code>ConfigureAwait(false)</code> ูู ูู ููุงู ูู ุฑูุฒ ุงูููุชุจุฉ ุบูุฑ ุงููุชุฒุงููุฉ. </li><li style=";text-align:right;direction:rtl">  ุชูุชุธุฑ ุงููููุฉ ุ  ููุชุฌ ุงูุฎุทุฃ ุงูุฃูู ุ ููุฐุง ูุนููุฏ ุฅูุดุงุก ุงุณุชุซูุงุก ูุนุงูุฌุฉ ููุจุฑูุฌุฉ ุงููุชูุงุฒูุฉ. </li><li style=";text-align:right;direction:rtl">  ุชู ุชูุฏูู ุทุฑู ุบูุฑ ูุชุฒุงููุฉ ููุชุนุงูู ูุน ุฃุญุฏุงุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู ุ ูููู ูู ุงูุณูู ุชูููุฐูุง ุนู ุทุฑูู ุงูุตุฏูุฉ ุ ููุง ุณูุคุฏู ุฅูู ุชุนุทู ุงูุชุทุจูู ุฅุฐุง ุชู ุทุฑุญ ุงุณุชุซูุงุก. </li></ul><br>  ูุญุฏุซ ุงูุฌุจู ุงูุญุฑ ููุท ูู ูุตูุฏุฉ ูุฆุฑุงู.  ูููู ุฃู ูุคุฏู ุณูููุฉ ุงูุงุณุชุฎุฏุงู ูู ุจุนุถ ุงูุฃุญูุงู ุฅูู ุตุนูุจุงุช ูุจูุฑุฉ ูู ูุฌุงูุงุช ุฃุฎุฑู.  ุฅุฐุง ููุช ูุนุชุงุฏูุง ุนูู ุชุงุฑูุฎ ุงูุจุฑูุฌุฉ ุบูุฑ ุงููุชุฒุงููุฉ ูู C # ุ ูุฅู ุงูุณููู ุงูุบุฑูุจ ูู ูุนุฏ ูุจุฏู ุบุฑูุจูุง ุฌุฏูุง ุ ููุชู ุชูููู ุงุญุชูุงู ุญุฏูุซ ุฃุฎุทุงุก ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุบูุฑ ุงููุชุฒุงููุฉ ุจุดูู ูุจูุฑ. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar421245/">https://habr.com/ru/post/ar421245/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar421227/index.html">ูุธุฑุฉ ุนุงูุฉ ุนูู ุฃุทุฑ ุชุทููุฑ ุงูุฃุฌูุฒุฉ ุงููุญูููุฉ ุนุจุฑ ุงูุฃูุธูุฉ ุงูุฃุณุงุณูุฉ</a></li>
<li><a href="../ar421229/index.html">ูุตุฉ ุตุฏุงุนู</a></li>
<li><a href="../ar421235/index.html">ูุธุงุฑุงุช Magic Leap One - ูุธุงุฑุงุช ุจุณุนุฑ 2295 ุฏููุงุฑูุง ูุน ุฅููุงููุฉ ุงูุตูุงูุฉ 3 ูู ุฃุตู 10</a></li>
<li><a href="../ar421241/index.html">ุงูุจูู ุงููุฑูุฒู ูุทูุจ ุญุธุฑ ุงูููุงูุน ุงูุฎุจูุซุฉ ูุจู ุงููุญุงููุฉ</a></li>
<li><a href="../ar421243/index.html">ุงูุฌุฒุก ุงูุซุงูู ูู LLTR: ุฎูุงุฑุฒููุฉ ูุชุญุฏูุฏ ูููู ุงูุดุจูุฉ ูู ุงูุฅุญุตุงุฆูุงุช ุงููุฌูุนุฉ</a></li>
<li><a href="../ar421247/index.html">ููููุฉ ุชุญููู ุงูุฑุณููุงุช ุฅูู ุตูุช ูููุงุฐุง ุชุญุชุงุฌูุง</a></li>
<li><a href="../ar421249/index.html">ููุงุฐุง ูุนูู ููููู ููู ุณุชุฑูุช ุฃูุซุฑ ูู ุงููุงุฒู ููููู ุฅุตูุงุญู</a></li>
<li><a href="../ar421251/index.html">ูุธุงู ุงููุณุฎ ุงูุงุญุชูุงุทู</a></li>
<li><a href="../ar421253/index.html">ููุงุฐุง ูุญุชุงุฌ ุงูุณูุงุฑุงุช ุงูุฐููุ</a></li>
<li><a href="../ar421255/index.html">ุชุฎูู Elon Musk ุนู ุฎุทุท ูุชุญููู ุดุฑูุฉ Tesla ุฅูู ุดุฑูุฉ ุฎุงุตุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>