<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧕🏻 🍶 🧝🏼 Tela Hyperledger para Dummies 👨‍🚀 🧒🏿 🤘🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una plataforma Blockchain para la empresa 





 Buenas tardes, queridos lectores, mi nombre es Nikolai Nefedov, soy consultor técnico en IBM, en este...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tela Hyperledger para Dummies</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ibm/blog/444874/"><h2 id="a-blockchain-platform-for-the-enterprise">  Una plataforma Blockchain para la empresa </h2><br><p><img src="https://habrastorage.org/webt/qn/hb/p7/qnhbp7fep6rj8xhtahqvmo_ofjw.png"></p><br><p>  Buenas tardes, queridos lectores, mi nombre es Nikolai Nefedov, soy consultor técnico en IBM, en este artículo me gustaría presentarles la plataforma blockchain: Hyperledger Fabric.  La plataforma está diseñada para crear aplicaciones empresariales a nivel empresarial (clase empresarial).  Nivel de artículo: para lectores no capacitados con conocimientos básicos de tecnología de TI. </p><a name="habracut"></a><br><p>  Hyperledger Fabric es un proyecto de código abierto, una de las ramas del proyecto de código abierto Hyperledger, un consorcio de la Fundación Linux.  Hyperledger Fabric fue lanzado originalmente por Digital Assets e IBM.  La característica principal de la plataforma Hyperledger Fabric es su enfoque en aplicaciones corporativas.  Por lo tanto, la plataforma se desarrolló teniendo en cuenta la alta velocidad de las transacciones y su bajo costo, así como la identificación de todos los participantes.  Estas ventajas se logran mediante la separación del servicio de verificación de transacciones y la formación de nuevos bloques del registro distribuido, así como el uso de una autoridad de certificación y la autorización de los participantes. </p><br><p>  Mi artículo es parte de una serie de artículos sobre Hyperledger Fabric en el marco del cual describimos el diseño de un sistema de contabilidad para los estudiantes que ingresan a la universidad. </p><br><h3 id="obschaya-arhitektura-hyperledger-fabric">  Arquitectura general de la tela Hyperledger </h3><br><p> Hyperledger Fabric es una red de blockchain distribuida que consta de varios componentes funcionales que se instalan en los nodos de la red.  Los componentes de Hyperledger Fabric son contenedores Docker que se pueden descargar libremente desde DockerHub.  Hyperledger Fabric también se puede ejecutar en entornos Kubernetes. </p><br><p>  Para escribir contratos inteligentes (chaincode en el contexto de Hyperledger Fabric) utilizamos Golang (aunque Hyperledger Fabric le permite usar otros idiomas).  En nuestro caso, Node.js con el correspondiente SDK de Hyperledger Fabric se utilizó para desarrollar una aplicación personalizada. </p><br><p>  Los nodos ejecutan lógica de negocios (contrato inteligente): chaincode, almacenan el estado del registro distribuido (datos contables) y ejecutan otros servicios del sistema de la plataforma.  Un nodo es solo una unidad lógica, pueden existir diferentes nodos en el mismo servidor físico.  Mucho más importante es cómo se agrupan los nodos (dominio de confianza) y con qué funciones de la red blockchain están asociados. </p><br><p>  La arquitectura general es la siguiente: </p><br><p><img src="https://habrastorage.org/webt/s7/qb/ms/s7qbms0zfwhx0qnl7xxl27yzbvu.png"></p><br><p>  <em>Imagen 1. Arquitectura general del tejido Hyperledger</em> </p><br><p>  Aplicación de usuario (Submitting Client): una aplicación con la que los usuarios trabajan con la red blockchain.  Para trabajar, debe estar autorizado y tener los derechos apropiados para varios tipos de acciones en la red. </p><br><p>  Los compañeros tienen varios roles: </p><br><ul><li>  Endorsing Peer: un nodo que simula la ejecución de una transacción (ejecuta un código de contrato inteligente).  Después de verificar y ejecutar el contrato inteligente, el nodo devuelve los resultados de la aplicación del cliente junto con su firma. </li><li>  Servicio de pedidos: un servicio distribuido en varios nodos, sirve para formar nuevos bloques de un registro distribuido y crear una secuencia de transacciones.  El Servicio de pedidos no agrega nuevos bloques al registro (para mejorar el rendimiento, esta función se ha movido a Comprometer pares). </li><li>  Par de confirmación: un nodo que contiene un registro distribuido y agrega nuevos bloques al registro (que formó el Servicio de pedidos).  Todos los pares comprometidos contienen una copia local del registro distribuido.  El par que se compromete, antes de agregar localmente un nuevo bloque, verifica la validez de todas las transacciones dentro del bloque. </li></ul><br><p>  La Política de respaldo es una política de validación de transacciones.  Estas políticas determinan el conjunto necesario de nodos en los que se debe ejecutar un contrato inteligente para que la transacción se reconozca como válida. </p><br><p>  Registro distribuido - Lerger - consta de dos partes: WolrldState (también llamado - State DataBase) y BlockChain. </p><br><p>  BlockChain es una cadena de bloques que almacena registros de todos los cambios que se han producido con objetos de registro distribuidos. </p><br><p>  WolrldState es un componente de un registro distribuido que almacena los valores actuales (extremos) de todos los objetos en un registro distribuido. </p><br><p>  WorldState es una base de datos, en la versión básica - LevelDB o más compleja - CouchDB, que contiene pares clave-valor, por ejemplo: Nombre - Ivan, Apellido - Ivanov, fecha de registro en el sistema - 12/12/21, fecha de nacimiento - 17/12/1961, etc.  WorldState y el registro distribuido deben ser coherentes con todos los miembros de este canal. </p><br><p>  Dado que Hyperledger Fabric es una red en la que todos los participantes son conocidos y autenticados, aquí se utiliza una autoridad de certificación dedicada: CA (Autoridad de certificación).  CA opera sobre la base de la infraestructura de clave pública y estándar X.509: PKI. </p><br><p>  El Servicio de Membresía es un servicio a través del cual los participantes verifican la propiedad de un objeto en una organización o canal en particular. </p><br><p>  Una transacción es, en la mayoría de los casos, un registro de datos nuevos en un registro distribuido. <br>  También hay transacciones para crear canales o contratos inteligentes.  La aplicación de usuario inicia la transacción y finaliza con un registro en el registro distribuido. </p><br><p>  Un canal es una subred cerrada que consta de dos o más participantes en una red blockchain, diseñada para realizar transacciones confidenciales dentro de un círculo limitado pero conocido de participantes.  El canal está definido por los participantes, su registro distribuido, contratos inteligentes, Servicio de pedidos, WorldState.  Cada miembro del canal debe estar autorizado para acceder al canal y tener derecho a realizar varios tipos de transacciones.  La autorización se realiza utilizando el Servicio de Membresía. </p><br><h3 id="tipovoy-scenariy-ispolneniya-tranzakcii">  Escenario típico de ejecución de transacciones </h3><br><p>  A continuación, me gustaría hablar sobre un escenario típico de ejecución de transacción utilizando nuestro proyecto como ejemplo. </p><br><p>  Como parte de nuestro proyecto interno, creamos la red Hyperledger Fabric, que está diseñada para registrar y registrar a los estudiantes que ingresan a las universidades.  Nuestra red consta de dos organizaciones que pertenecen a la Universidad A y a la Universidad B. Cada organización contiene una aplicación de cliente, así como su Par de Compromiso y Endoso.  También utilizamos los servicios comunes Servicio de pedidos, Servicio de memebership y Autoridad de certificación. </p><br><h4 id="1-iniciaciya-tranzakcii">  1) Iniciación de transacción </h4><br><p>  La aplicación de usuario, utilizando el SDK de Hyperledger Fabric, inicia una solicitud de transacción y envía una solicitud a los nodos con contratos inteligentes.  La solicitud puede ser para modificación o lectura de un registro distribuido (Ledger).  Si consideramos un ejemplo de nuestra configuración de prueba de un sistema para estudiantes universitarios de contabilidad, la aplicación del cliente envía una solicitud de transacción a los nodos de las universidades A y B, que están incluidos en la política de aprobación del contrato inteligente llamado.  El nodo A es un nodo que está en una universidad que registra a un estudiante entrante, y el nodo B es un nodo que está en otra universidad.  Para que una transacción se almacene en un registro distribuido, es necesario que todos los nodos que, de acuerdo con la lógica empresarial, deben aprobar la transacción, ejecuten con éxito contratos inteligentes con el mismo resultado.  La aplicación de usuario del nodo A, que utiliza las herramientas del SDK de Hyperledger Fabric, recibe una política de aprobación y descubre a qué nodos deben enviar una solicitud de transacción.  Esta es una solicitud para invocar un contrato inteligente específico (función chaincode) para leer o escribir ciertos datos en un registro distribuido.  Técnicamente, el SDK del cliente utiliza la función correspondiente, la API de la cual pasa un objeto con parámetros de transacción, y también agrega la firma del cliente y envía estos datos a través del búfer de protocolo a través de gRPC a los nodos correspondientes (homólogos de respaldo). </p><br><p><img src="https://habrastorage.org/webt/cr/ey/97/crey97gyuageyhchm1dk5ybbgxi.png"><br>  <em>Cuadro 2. Iniciación de la transacción</em> </p><br><h4 id="2-vypolnenie-smart-kontrakta">  2) Cumplimiento de un contrato inteligente </h4><br><p>  Los nodos (Endorsing Peers), después de recibir una solicitud de transacción, verifican la firma del cliente y, si todo está en orden, toman un objeto con los datos de la solicitud e inician la simulación de la ejecución del contrato inteligente (función chaincode) con estos datos.  Un contrato inteligente es una lógica comercial de una transacción, un cierto conjunto de condiciones e instrucciones (en nuestro caso, es la verificación de un estudiante, este es un estudiante nuevo o ya está registrado, verificación de edad, etc.).  Para ejecutar un contrato inteligente, también necesitará datos de WorldState.  Como resultado de la simulación del contrato inteligente en el endoso par, se obtienen dos conjuntos de datos: conjunto de lectura y conjunto de escritura.  El conjunto de lectura y el conjunto de escritura son los valores originales y nuevos de WorldState.  (nuevo: en el sentido obtenido durante la simulación de un contrato inteligente). </p><br><p><img src="https://habrastorage.org/webt/my/_a/k6/my_ak6-vqamxqbdxa0dohcw4jua.png"><br>  <em>Cuadro 3. Ejecución de un contrato inteligente</em> </p><br><h4 id="3-vozvrat-dannyh-klientskomu-prilozheniyu">  3) Devolución de datos a la aplicación del cliente </h4><br><p>  Después de la simulación del contrato inteligente, Endorsing Peers devuelve los datos iniciales y el resultado de la simulación, así como el RW Set, firmado con su certificado, a la aplicación del cliente.  En esta etapa, no se realizan cambios en el registro distribuido.  La aplicación del cliente verifica la firma del Endorsing Peer y también compara los datos de origen de la transacción que se envió y los datos que se devolvieron (es decir, verifica si los datos de origen en los que se simuló la transacción estaban distorsionados).  Si la transacción fue solo para leer datos del registro, entonces la aplicación cliente recibe el conjunto de lectura necesario y esto generalmente completa la transacción con éxito sin cambiar el registro distribuido.  En el caso de una transacción que se supone que cambia los datos en el registro, la aplicación del cliente verifica adicionalmente la implementación de la política de aprobación.  Es posible que la aplicación cliente no verifique el resultado de la Política de aprobación, pero la plataforma Hyperledger Fabric en este caso proporciona políticas de verificación en los nodos (Comitting Peers) en la etapa de agregar una transacción al registro. </p><br><p><img src="https://habrastorage.org/webt/jv/8z/bl/jv8zbla4eudtvw222jqecbndeik.png"><br>  <em>Imagen 4. Devolución de datos a la aplicación cliente</em> </p><br><h4 id="4-otpravka-rw-sets-na-ordering-peers">  4) Envío de conjuntos RW a pares de pedidos </h4><br><p>  La aplicación cliente envía la transacción junto con los datos asociados al servicio de pedidos.  Esto incluye el conjunto RW, los pares de respaldo y la ID del canal. </p><br><p>  Servicio de pedidos: según el nombre, la función principal de este servicio es crear transacciones entrantes en el orden correcto.  Además de la formación de un nuevo bloque del registro distribuido y la entrega garantizada de nuevos bloques formados a todos los nodos de Compromiso, asegurando así la consistencia de los datos en todos los nodos que contienen el registro distribuido (pares de Compromiso).  Al mismo tiempo, el servicio de pedidos en sí no cambia el registro.  Ordering Service es un componente vital del sistema, por lo que es un clúster de varios nodos.  El Servicio de pedidos no verifica la validez de la transacción, simplemente acepta una transacción con un identificador de canal específico, organiza las transacciones entrantes en un cierto orden y forma nuevos bloques del registro distribuido a partir de ellas.  Un servicio de pedidos puede servir varios canales simultáneamente.  El Servicio de pedidos incluye un clúster de Kafka, que admite la cola de transacciones correcta (sin cambios) (ver Cláusula 7). </p><br><p><img src="https://habrastorage.org/webt/ig/mv/1l/igmv1ll-f-jxt9ifjwraarbpnuk.png"><br>  <em>Imagen 5. Envío de conjuntos RW a pares de pedidos</em> </p><br><h5 id="5-otpravka-sformirovannyh-blokov-na-committing-peer">  5) Enviar bloques formados a Comprometerse entre pares </h5><br><p>  Los bloques formados en el Servicio de pedidos se transmiten a todos los nodos de la red.  Cada nodo, después de haber recibido un nuevo bloque, verifica su cumplimiento con la Política de aprobación, verifica que todos los Pares de aprobación hayan recibido el mismo resultado (Conjunto de escritura) como resultado de simular un contrato inteligente, y también verifica si los valores iniciales han cambiado (es decir, Conjunto de lectura) datos leídos por un contrato inteligente de WorldState) desde que se inició la transacción.  Si se cumplen todas las condiciones, la transacción se marca como válida; de lo contrario, la transacción recibe un estado que no es válido. </p><br><p><img src="https://habrastorage.org/webt/83/g0/ih/83g0ih05dpwo1jimfqjbqhqwcg0.png"><br>  <em>Imagen 6. Envío de bloques formados a Comprometerse entre pares</em> </p><br><h4 id="6-dobavleniya-bloka-v-reestr">  6) Agregar un bloque al registro </h4><br><p>  Cada nodo agrega una transacción a su copia local del registro distribuido, y si la transacción es válida, el conjunto de escritura se aplica a WorldState (estado actual), en consecuencia, se registran nuevos valores de los objetos que fueron afectados por la transacción.  Si la transacción recibió un marcador, no válido (por ejemplo, dos transacciones ocurrieron con los mismos objetos dentro del mismo bloque, entonces una de las transacciones resultará inválida, ya que los valores iniciales ya han sido cambiados por la otra transacción).  Esta transacción también se agrega al registro distribuido con un token que no es válido, pero el conjunto de escritura de esta transacción no se aplica al estado actual de WorldState y, en consecuencia, no modifica los objetos que participan en la transacción.  Después de esto, se envía una notificación a la aplicación del usuario de que la transacción se agrega para siempre al registro distribuido, así como el estado de la transacción, es decir, si es válida o no ... </p><br><p><img src="https://habrastorage.org/webt/u0/n1/xi/u0n1xixwimb5yfgmvuoezwtkjhy.png"><br>  <em>Imagen 7. Agregar un bloque al registro</em> </p><br><h3 id="ordering-service">  SERVICIO DE PEDIDO </h3><br><p>  El servicio de pedidos consta de un clúster de Kafka con los nodos ZooKeeper correspondientes y los nodos del servicio de pedidos (OSN), que se encuentran entre los clientes del servicio de pedidos y el clúster de Kafka.  Kafka Cluster es una plataforma de administración de flujo (mensajería) distribuida y tolerante a fallas.  Cada canal (tema) en Kafka es una secuencia inmutable de registros que solo admite agregar un nuevo registro (no es posible eliminar uno existente).  A continuación se muestra una ilustración de la estructura del tema.  Es esta propiedad de Kafka la que se usa para construir la plataforma blockchain. </p><br><p><img src="https://habrastorage.org/webt/by/_h/hu/by_hhufpjkkd3isye8ng5if3mj8.png"><br>  tomado de kafka.apache.org <br>  <em>Imagen 8. Estructura del tema del servicio de pedidos</em> </p><br><h4 id="polezny-ssylki">  Enlaces utiles </h4><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Youtube - Construyendo una blockchain para negocios con el Proyecto Hyperledger</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Documentos de tela de Hyperledger</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hyperledger fabric: un sistema operativo distribuido para blockchains con permiso</a> </p><br><h4 id="blagodarnosti">  Agradecimientos </h4><br><p>  Expreso mi profunda gratitud por la ayuda en la preparación del artículo a mis colegas: <br>  Nikolay Marina <br>  Igor Hapov <br>  Dmitry Gorbachev <br>  Alexander Zemtsov <br>  Ekaterina Kurdenkova <br>  Ekaterina Guseva </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/444874/">https://habr.com/ru/post/444874/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../444864/index.html">Máquina de escribir USB</a></li>
<li><a href="../444866/index.html">Mi camino de Python a Go: compartir consejos y recursos</a></li>
<li><a href="../444868/index.html">Cómo crear una paleta cómoda para todos</a></li>
<li><a href="../444870/index.html">Estructura empresarial corporativa 2019</a></li>
<li><a href="../444872/index.html">¿Cómo fue la apertura de Zabbix en Rusia?</a></li>
<li><a href="../444876/index.html">El arte de analizar 2 o transliterar tu propio marcado</a></li>
<li><a href="../444878/index.html">SpaceX ha anunciado un rediseño de los satélites Starlink para que se quemen por completo en la atmósfera cuando caen</a></li>
<li><a href="../444880/index.html">Una interpretación multimundo de la mecánica cuántica.</a></li>
<li><a href="../444882/index.html">Los bancos comenzaron a bloquear cuentas independientes</a></li>
<li><a href="../444884/index.html">Groovy dejó a Cédric Champeau</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>