<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏻‍🔧 🎨 🐐 Quoi de neuf dans Swift 5? 👁‍🗨 💅🏾 ⚗️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut, je m'appelle Ilya. Je suis développeur iOS sur Tinkoff.ru. Dans cet article, je donnerai un bref aperçu des principales modifications de Swift ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Quoi de neuf dans Swift 5?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/437942/">  Salut, je m'appelle Ilya.  Je suis développeur iOS sur Tinkoff.ru.  Dans cet article, je donnerai un bref aperçu des principales modifications de Swift 5. Ces modifications sont décrites dans les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">notes de publication</a> .  Pour ceux qui ne se sont pas encore familiarisés, bienvenue au chat! <br><br><img src="https://habrastorage.org/webt/q4/3j/s8/q43js8q_hzcqksv1pxzrd53ykug.png"><br><a name="habracut"></a><br><h4>  La taille de l'application va diminuer! </h4><br>  Les applications écrites dans Swift 5 et compilées pour iOS 12.2, watchOS 5.2, tvOS 12.2 n'incluront pas de bibliothèques dynamiques pour la bibliothèque standard Swift et le SDK Swift.  Et cela signifie que la taille de l'application ne diminuera cependant pas de beaucoup.  Si vous croyez <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ce tweet</a> , la taille du projet vide a été réduite de 2,4 Mo à 24 Ko.  Un bon résultat pour les petites applications, mais pour les grandes applications il n'y aura pas beaucoup de différence. <br><br><h4>  @dynamicCallable ( <a href="">SE-0216</a> ) </h4><br>  L'attribut <i>@dynamicCallable vous</i> permet de travailler avec un objet en tant que fonction.  Ces objets sont appelés objets fonctionnels ou foncteurs (plus de détails peuvent être trouvés <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  Les objets fonctionnels sont en C ++, Python, JavaScript et dans d'autres langages, et dans Swift ils ont été ajoutés pour des raisons de compatibilité avec ces langages.  Le fait est que Swift interagit désormais bien avec l'API C et Objective-C, et les développeurs de langage veulent ajouter une interaction avec les langages dynamiques - Python, JavaScript, Ruby et autres. <br><br>  Pour faire d'un type un foncteur, vous devez ajouter l'attribut <i>@dynamicCallable</i> à sa déclaration.  Prenons un exemple de structure de <i>réducteur</i> qui peut être utilisée pour ajouter des nombres dans un tableau: <br><br><pre><code class="swift hljs">@dynamicCallable <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reducer</span></span></span><span class="hljs-class"> </span></span>{ ... }</code> </pre> <br>  Ensuite, vous devez implémenter une ou les deux méthodes suivantes: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dynamicallyCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(withArguments: ExpressibleByArrayLiteral)</span></span></span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dynamicallyCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(withKeywordArguments: ExpressibleByDictionaryLiteral)</span></span></span></span></code> </pre><br>  La première fonction vous permet d'accéder à l'objet en passant un tableau comme arguments.  La deuxième fonction vous permet d'accéder à l'objet, en passant le même tableau que les arguments, mais en utilisant les noms des arguments. <br><br>  Par exemple, une implémentation de la première fonction d'une structure <i>Reducer</i> ressemblerait à ceci: <br><br><pre> <code class="swift hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dynamicallyCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(withArguments arguments: [Int])</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> arguments.<span class="hljs-built_in"><span class="hljs-built_in">reduce</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>, +) }</code> </pre><br>  Ensuite, appliquez une telle structure comme suit: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> reducer = <span class="hljs-type"><span class="hljs-type">Reducer</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> sum = reducer(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) <span class="hljs-comment"><span class="hljs-comment">// sum = 6</span></span></code> </pre><br>  Nous considérerons l'implémentation de la deuxième méthode en utilisant l'exemple de la structure <i>Comparateur</i> , avec laquelle nous pouvons comparer deux nombres: <br><br><pre> <code class="swift hljs">@dynamicCallable <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Comparator</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dynamicallyCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(withKeywordArguments arguments: KeValuePairs&lt;String, Int&gt;)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">ComparisonResult</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">guard</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> lhs = arguments[<span class="hljs-string"><span class="hljs-string">"lhs"</span></span>], <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> rhs = arguments[<span class="hljs-string"><span class="hljs-string">"rhs"</span></span>], lhs != rhs <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> .orderedSame } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> lhs &gt; rhs ? .orderedDescending : .orderedAscending } }</code> </pre><br>  Vous pouvez utiliser cette structure comme suit: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> comparator = <span class="hljs-type"><span class="hljs-type">Comparator</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> comparisionResult = comparator(lhs: <span class="hljs-number"><span class="hljs-number">1</span></span>, rhs: <span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-comment"><span class="hljs-comment">// comparisionResult = .orderedAscending</span></span></code> </pre><br><h4>  Attribut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">inconnu</a> dans le commutateur ( <a href="">SE-0192</a> ) </h4><br>  Beaucoup de gens savent que lors du traitement des valeurs d'énumération, il est nécessaire de décrire tous les cas et d'essayer de ne pas utiliser la valeur par défaut.  Bien que cette exigence ajoute une pincée de sécurité, elle présente également un inconvénient, car lorsque vous modifiez des valeurs dans l'énumération, vous devez ajouter leur traitement.  Il est toujours possible que la structure du système modifie l'une des énumérations, mais cela n'a pas été traité dans votre application (il en était ainsi, par exemple, avec <i>LABiometryType</i> ). <br><br>  Swift 5 ajoutera l'attribut <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">inconnu</a></i> , ce qui vous permettra de séparer 2 scénarios différents lors du traitement d'une énumération: <br><br><ul><li>  Le code par défaut doit être exécuté pour tous les cas non traités dans le commutateur </li><li>  Tous les cas sont traités dans switch, et si de nouveaux sont ajoutés, vous devez utiliser le code par défaut </li></ul><br>  Regardons un exemple: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTTPMethod</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> post, <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>, put } <span class="hljs-comment"><span class="hljs-comment">//  @unknown switch httpMethod { case .post: print("Post") case .get: print("Get") default: print("Put") } //  @unknown switch httpMethod { case .post: print("Post") case .get: print("Get") @unknown default: print("Unknown HTTP method") }</span></span></code> </pre><br><h4>  Se débarrasser du double facultatif à la suite de l'appel d'une fonction avec try?  ( <a href="">SE-0230</a> ) </h4><br>  Beaucoup ont sûrement découvert que lors de l'appel de la fonction jetable, qui renvoie <i>Facultatif</i> , en utilisant <i>try?</i>  , le résultat est un type encapsulé dans deux <i>Facultatif</i> .  Ce n'est pas très pratique, et donc dans Swift 5, appelez <i>essayer?</i>  dans ce cas, renvoie un type enveloppé dans un seul <i>Facultatif</i> . <br><br>  Voici comment c'était avant Swift 5: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? optionalObject?.foo() <span class="hljs-comment"><span class="hljs-comment">// type(of: result) = SomeType??</span></span></code> </pre><br>  Et il en sera de même dans Swift 5: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>? optionalObject?.foo() <span class="hljs-comment"><span class="hljs-comment">// type(of: result) = SomeType?</span></span></code> </pre><br><h4>  Contrôle de multiplicité ( <a href="">SE-0225</a> ) </h4><br>  Pour vérifier la multiplicité d'un nombre à un autre, vous pouvez utiliser la fonction <i>isMultiple (of :)</i> , au lieu du reste de la division (%): <br><br><pre> <code class="swift hljs"><span class="hljs-comment"><span class="hljs-comment">//   let isEven = 4 % 2 == 0 //   let isEvent = 4.isMultiple(of: 2)</span></span></code> </pre><br>  Le changement est mineur, mais il rend le code un peu plus clair et simplifie la recherche par code. <br><br><h4>  Comptage du nombre d'éléments dans une séquence avec une condition ( <a href="">SE-0220</a> ) </h4><br>  Dans Swift 5, le type Sequence ajoutera la méthode <i>count (où: (Element) -&gt; Bool) -&gt; Int</i> , qui vous permettra de compter le nombre d'éléments dans une séquence qui satisfont une condition donnée en une seule passe.  Avant cela, je devais utiliser le <i>filtre</i> en conjonction avec le <i>comptage</i> .  Cette méthode économisera la mémoire allouée lors de la création d'un nouveau tableau dans la méthode de <i>filtrage</i> . <br><br>  Un exemple: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> countOfZeroes = [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>].<span class="hljs-built_in"><span class="hljs-built_in">count</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">where</span></span>: { $<span class="hljs-number"><span class="hljs-number">0</span></span> == <span class="hljs-number"><span class="hljs-number">0</span></span> }) <span class="hljs-comment"><span class="hljs-comment">// countOfZeroes = 2</span></span></code> </pre><br><h4>  Méthode CompactMapValues ​​dans le dictionnaire ( <a href="">SE-0218</a> ) </h4><br>  Cette méthode combine <i>compactMap</i> from <i>Array</i> et <i>mapValues</i> from <i>Dictionary</i> .  Suite à l'appel de cette méthode, un dictionnaire avec des valeurs transformées est créé dans lequel il n'y a pas de valeurs égales à <i>zéro</i> . <br><br>  Un exemple: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dictionary = [<span class="hljs-string"><span class="hljs-string">"a"</span></span>: <span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"b"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>, <span class="hljs-string"><span class="hljs-string">"c"</span></span>: <span class="hljs-string"><span class="hljs-string">"Number"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> resultDictionary = dictionary.compactMapValues { <span class="hljs-type"><span class="hljs-type">Int</span></span>($<span class="hljs-number"><span class="hljs-number">0</span></span>) } <span class="hljs-comment"><span class="hljs-comment">// resultDictionary = ["a": 1, "b": 2]</span></span></code> </pre><br><h4>  Chaînes brutes ( <a href="">SE-0200</a> ) </h4><br>  Ajout de la possibilité d'écrire des lignes dans lesquelles les guillemets et les barres obliques inverses sont utilisés comme caractères normaux et non comme caractères spéciaux.  Pour ce faire, ajoutez le caractère # au début et à la fin de la ligne. <br><br>  Un exemple: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> string1 = #<span class="hljs-string"><span class="hljs-string">"   "</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span># <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> string2 = #<span class="hljs-string"><span class="hljs-string">"  \ "</span></span>#</code> </pre><br>  Si vous insérez une variable lors de la création d'une ligne, après la barre oblique inverse, vous devez ajouter le signe #: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> string = #<span class="hljs-string"><span class="hljs-string">"   \#(variable)"</span></span>#</code> </pre><br>  Si la ligne a un signe #, au début et à la fin de la ligne, vous devez ajouter deux signes ##: <br><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> string = ##<span class="hljs-string"><span class="hljs-string">"   #"</span></span>##</code> </pre><br><h4>  Le protocole de séquence ne contient plus de sous-séquence de type associé ( <a href="">SE-0234</a> ) </h4><br>  Le type associatif <i>SubSequence a</i> été déplacé du protocole <i>Sequence</i> vers <i>Collection.</i> <i>Désormais,</i> toutes les méthodes de <i>Sequence</i> qui ont renvoyé <i>SubSequence</i> renvoient un type spécifique.  Par exemple, la méthode du <i>suffixe</i> renvoie désormais un <i>tableau</i> .  Voici la liste complète des méthodes affectées par ce changement: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Sequence</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dropFirst</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> k: Int = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">DropFirstSequence</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Self</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dropLast</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> k: Int = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">1</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Element</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">suffix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxLength: Int)</span></span></span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Element</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prefix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">_</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxLength: Int)</span></span></span></span> -&gt; <span class="hljs-type"><span class="hljs-type">PrefixSequence</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Self</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">while</span></span></span></span><span class="hljs-function"><span class="hljs-params"> predicate: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(Element)</span></span></span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">rethrows</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">DropWhileSequence</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Self</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">prefix</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">while</span></span></span></span><span class="hljs-function"><span class="hljs-params"> predicate: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(Element)</span></span></span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">rethrows</span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">Element</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">split</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( maxSplits: Int = Int.</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">max</span></span></span></span><span class="hljs-function"><span class="hljs-params">, omittingEmptySubsequences: Bool = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">true</span></span></span></span><span class="hljs-function"><span class="hljs-params">, whereSeparator isSeparator: </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(Element)</span></span></span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">throws</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Bool</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">rethrows</span></span> -&gt; [<span class="hljs-type"><span class="hljs-type">ArraySlice</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Element</span></span>&gt;] }</code> </pre><br>  Maintenant, travailler avec ces méthodes deviendra plus facile. <br><br><h4>  Restrictions de protocole </h4><br>  Les protocoles prennent désormais en charge la restriction sous la forme de classes qui implémentent ce protocole.  En d'autres termes, vous pouvez désormais indiquer qu'un protocole ne peut être implémenté que par une classe spécifique.  Par exemple: <br><br><pre> <code class="swift hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Viewable</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIView</span></span></span><span class="hljs-class"> </span></span>{} <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Viewable</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Self</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIView</span></span></span><span class="hljs-class"> </span></span>{}</code> </pre><br>  La deuxième option d'enregistrement est prise en charge dans Swift 4.2, mais peut provoquer une erreur de compilation ou d'exécution.  Dans Swift 5, cette erreur ne se produira pas. <br><br><h3>  Conclusion </h3><br>  Il ne s'agit pas d'une liste complète des modifications dans Swift 5; seules les principales modifications sont collectées ici.  En général, les changements présentés sont positifs et rendent le langage plus compréhensible et flexible.  L'essentiel est que «Convertir en syntaxe Swift actuelle» devrait être indolore. <br><br>  C'est tout, merci d'avoir lu. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr437942/">https://habr.com/ru/post/fr437942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr437932/index.html">Intel Optane Memory H10: Cache Optane + QLC 3D NAND</a></li>
<li><a href="../fr437934/index.html">La gestion du temps dans la vraie vie</a></li>
<li><a href="../fr437936/index.html">Sa plate-forme vidéo est de qualité ffmpeg et d'encodage vidéo. 2e partie</a></li>
<li><a href="../fr437938/index.html">Douze façons de comprendre que vous êtes en réalité virtuelle</a></li>
<li><a href="../fr437940/index.html">Un autre GitHub: des référentiels sur la science des données, la visualisation des données et le Deep Learning</a></li>
<li><a href="../fr437944/index.html">Mathématiques de la peau: croissance de l'épiderme basée sur la modélisation mathématique</a></li>
<li><a href="../fr437946/index.html">Un compte Admin@kremlin.ru trouvé dans des milliers de bases de données MongoDB</a></li>
<li><a href="../fr437948/index.html">«J'étais très négatif envers les coroutines»: Artyom Zinnatullin sur le développement Android</a></li>
<li><a href="../fr437950/index.html">"Préparez" correctement le prototype. Technologies de prototypage de cas</a></li>
<li><a href="../fr437952/index.html">Comment tester dans AutoCar: MindMap, analyse de code statique et MockServer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>