<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•à üèïÔ∏è ü§üüèø Ejecutar programas de un solo archivo en Java 11 sin compilaci√≥n üßùüèæ üëàüèΩ üßë</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Deje que el archivo fuente HelloUniverse.java contenga una definici√≥n de clase y un m√©todo main est√°tico que genere una sola l√≠nea de texto al termina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ejecutar programas de un solo archivo en Java 11 sin compilaci√≥n</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/nix/blog/483888/"><img src="https://habrastorage.org/webt/mr/ie/ii/mrieiilbpca6armxtc_yym5nqc0.jpeg"><br><br>  Deje que el archivo fuente HelloUniverse.java contenga una definici√≥n de clase y un m√©todo <code>main</code> est√°tico que genere una sola l√≠nea de texto al terminal: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloUniverse</span></span></span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ System.out.println(<span class="hljs-string"><span class="hljs-string">"Hello InfoQ Universe"</span></span>); } }</code> </pre> <br>  Por lo general, para ejecutar esta clase, primero debe compilarla utilizando el compilador de Java (javac), que crea el archivo HelloUniverse.class: <br><br><pre> <code class="java hljs">mohamed_taman$ javac HelloUniverse.java</code> </pre> <br>  Luego, debe ejecutar el archivo resultante con el comando de m√°quina virtual Java (int√©rprete): <br><br><pre> <code class="java hljs">mohamed_taman$ java HelloUniverse Hello InfoQ Universe</code> </pre> <br>  Luego, el virtualka comenzar√° primero, lo que cargar√° la clase y ejecutar√° el c√≥digo. <br><br>  ¬øY si necesita verificar r√°pidamente un c√≥digo?  ¬øO eres nuevo en Java ( <i>en este caso, un punto clave</i> ) y quieres experimentar con el lenguaje?  Los dos pasos descritos pueden complicar las cosas. <br><br>  En Java SE 11, puede ejecutar directamente archivos de origen √∫nico sin compilaci√≥n intermedia. <br><a name="habracut"></a><br>  Esta caracter√≠stica es especialmente √∫til para principiantes que desean trabajar con programas simples.  En combinaci√≥n con jshell, obtienes un gran conjunto de herramientas para ense√±ar a principiantes. <br><br>  Los profesionales pueden usar estas herramientas para aprender innovaciones en el lenguaje o probar API desconocidas.  En nuestra opini√≥n, es mejor automatizar muchas tareas, como escribir programas Java en forma de scripts con posterior ejecuci√≥n desde el shell del sistema operativo.  Como resultado, podemos trabajar de manera flexible con scripts de shell y usar todas las caracter√≠sticas de Java.  Hablemos de esto con m√°s detalle en la segunda parte del art√≠culo. <br><br>  Esta gran caracter√≠stica de Java 11 le permite ejecutar directamente un solo archivo fuente sin compilaci√≥n.  Hablemos <br><br><h3>  Que necesitas </h3><br>  Para ejecutar el c√≥digo provisto en el art√≠culo, necesita una versi√≥n de Java no inferior a 11. En el momento de la escritura, la versi√≥n actual era Java SE Development Kit 12.0.1: la versi√≥n final est√° <a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk12-downloads-5295953.html">aqu√≠</a> , solo acepte los t√©rminos de la licencia y haga clic en el enlace de su sistema operativo.  Si desea experimentar con las √∫ltimas funciones, puede <a href="https://jdk.java.net/13/">descargar el</a> acceso anticipado JDK 13. <br><br>  Tenga en cuenta que las versiones de varios proveedores de OpenJDK ahora tambi√©n est√°n disponibles, incluido <a href="https://adoptopenjdk.net/">AdoptOpenJDK</a> . <br><br>  En este art√≠culo, utilizaremos un editor de texto sin formato en lugar del IDE de Java para evitar toda la magia del IDE, y utilizaremos la l√≠nea de comandos de Java directamente en el terminal. <br><br><h2>  Ejecute .java con Java </h2><br>  La funci√≥n <a href="https://openjdk.java.net/jeps/330">JEP 330</a> (ejecutar programas de un solo archivo con c√≥digo fuente) apareci√≥ en JDK 11. Le permite ejecutar directamente archivos fuente con c√≥digo fuente Java, sin usar un int√©rprete.  El c√≥digo fuente se compila en la memoria y luego el int√©rprete lo ejecuta sin crear un archivo .class en el disco. <br><br>  Sin embargo, esta funci√≥n est√° limitada al c√≥digo que se almacena en un solo archivo.  No puede ejecutar varios archivos fuente a la vez. <br><br>  Para evitar esta limitaci√≥n, todas las clases deben definirse en un solo archivo.  No hay restricciones en su n√∫mero.  Adem√°s, mientras est√°n en el mismo archivo, no importa si son p√∫blicos o privados. <br><br>  La primera clase definida en el archivo se considerar√° la principal, y el m√©todo principal debe colocarse en ella.  Es decir, el orden es importante. <br><br><h3>  Primer ejemplo </h3><br>  Comencemos con el ejemplo cl√°sico m√°s simple: ¬°Hola Universo! <br><br>  Demostraremos la caracter√≠stica descrita con varios ejemplos para que tenga una idea de c√≥mo se puede usar en la programaci√≥n diaria. <br><br>  Cree un archivo HelloUniverse.java con el c√≥digo desde el principio del art√≠culo, compile y ejecute el archivo de clase resultante.  Luego b√≥rrelo, ahora comprender√° por qu√©: <br><br><pre> <code class="java hljs">mohamed_taman$ rm HelloUniverse.class</code> </pre> <br>  Si ahora usa el int√©rprete de Java, ejecuta el archivo de clase sin compilaci√≥n: <br><br><pre> <code class="java hljs">mohamed_taman$ java HelloUniverse.java Hello InfoQ Universe</code> </pre> <br>  ver√° el mismo resultado: se ejecutar√° el archivo. <br><br>  Esto significa que ahora puede ejecutar <code>java HelloUniverse.java</code> .  Transferimos el c√≥digo fuente en s√≠, y no el archivo de clase: el sistema dentro de s√≠ mismo lo compila, lo inicia y muestra un mensaje en la consola. <br><br>  Es decir, la compilaci√≥n todav√≠a se realiza bajo el cap√≥.  Y en caso de su error, recibiremos una notificaci√≥n al respecto.  Puede verificar la estructura del directorio y asegurarse de que el archivo de clase no se genera, la compilaci√≥n se realiza en la memoria. <br><br>  Ahora veamos c√≥mo funciona todo. <br><br><h3>  C√≥mo el int√©rprete de Java ejecuta el programa HelloUniverse </h3><br>  En JDK 10, el iniciador de Java puede funcionar en tres modos: <br><br><ol><li>  Ejecuci√≥n del archivo de clase. <br></li><li>  Ejecuci√≥n de la clase principal desde un archivo JAR. <br></li><li>  Ejecuci√≥n de la clase principal del m√≥dulo. <br></li></ol><br>  Y en Java 11, apareci√≥ un cuarto modo: <br><br><ol><li>  Ejecuci√≥n de la clase declarada en el archivo fuente. <br></li></ol><br>  En este modo, el archivo fuente se compila en la memoria y luego se ejecuta la primera clase de este archivo. <br><br>  El sistema determina su intenci√≥n de ingresar el archivo fuente de acuerdo con dos criterios: <br><br><ol><li>  El primer elemento en la l√≠nea de comando no es una opci√≥n ni es parte de una opci√≥n. <br></li><li>  La l√≠nea puede contener la <code>--source &lt;vrsion&gt;</code> . <br></li></ol><br>  En el primer caso, Java primero descubrir√° si el primer elemento del comando es una opci√≥n o parte de √©l.  Si este es un nombre de archivo que termina en .java, el sistema lo considerar√° el c√≥digo fuente que debe compilarse y ejecutarse.  Tambi√©n puede agregar opciones al comando Java antes del nombre del archivo fuente.  <i>Por ejemplo, si desea establecer la ruta de clase cuando el archivo fuente utiliza dependencias externas.</i> <br><br>  En el segundo caso, se selecciona el modo de trabajar con el archivo fuente y el primer elemento en la l√≠nea de comando, que no es una opci√≥n, se considera el archivo fuente que debe compilarse y ejecutarse. <br><br>  Si el archivo no tiene la extensi√≥n .java, debe usar la opci√≥n <code>--source</code> para forzarlo a ingresar al modo de trabajar con el archivo fuente. <br><br>  Esto es importante en los casos en que el archivo fuente es un "script" que necesita ser ejecutado, y el nombre del archivo no cumple con las convenciones usuales para nombrar los archivos fuente con c√≥digo Java. <br><br>  Usando la opci√≥n <code>--source</code> , puede determinar la versi√≥n del idioma fuente.  Hablaremos de esto a continuaci√≥n. <br><br><h3>  ¬øPuedo pasar argumentos en la l√≠nea de comando? </h3><br>  Expandamos nuestro programa Hello Universe para que muestre un saludo personal a cualquier usuario que visite InfoQ Universe: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloUniverse2</span></span></span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( args == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || args.length&lt; <span class="hljs-number"><span class="hljs-number">1</span></span> ){ System.err.println(<span class="hljs-string"><span class="hljs-string">"Name required"</span></span>); System.exit(<span class="hljs-number"><span class="hljs-number">1</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = args[<span class="hljs-number"><span class="hljs-number">0</span></span>]; System.out.printf(<span class="hljs-string"><span class="hljs-string">"Hello, %s to InfoQ Universe!! %n"</span></span>, name); } }</code> </pre> <br>  Guarde el c√≥digo en el archivo Greater.java.  Tenga en cuenta que el nombre del archivo no coincide con el nombre de la clase p√∫blica.  Esto viola las reglas de la especificaci√≥n Java. <br><br>  Ejecuta el c√≥digo: <br><br><pre> <code class="java hljs">mohamed_taman$ java Greater.java <span class="hljs-string"><span class="hljs-string">"Mo. Taman"</span></span> Hello, Mo. Taman to InfoQ universe!!</code> </pre> <br>  Como puede ver, no importa en absoluto que la clase y los nombres de los archivos no coincidan.  Un lector atento tambi√©n puede notar que pasamos argumentos al c√≥digo despu√©s de procesar el nombre del archivo.  Esto significa que cualquier argumento en la l√≠nea de comando que sigue al nombre del archivo se pasa al m√©todo principal est√°ndar. <br><br><h3>  Determine el nivel del c√≥digo fuente usando la opci√≥n --source </h3><br>  Hay dos escenarios para usar la opci√≥n <code>--source</code> : <br><br><ol><li>  Determinaci√≥n del nivel de c√≥digo fuente. <br></li><li>  Forzar el tiempo de ejecuci√≥n de Java al modo fuente. <br></li></ol><br>  En el primer caso, si no especific√≥ el nivel del c√≥digo fuente, se toma la versi√≥n actual del JDK.  Y en el segundo caso, los archivos con extensiones distintas a .java se pueden transferir para su compilaci√≥n y ejecuci√≥n sobre la marcha. <br><br>  Veamos primero el segundo escenario.  Cambie el nombre de Greater.java simplemente a mayor sin extensi√≥n e intente ejecutar: <br><br><pre> <code class="java hljs">mohamed_taman$ java greater <span class="hljs-string"><span class="hljs-string">"Mo. Taman"</span></span> Error: Could not find or load main <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">greater</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Caused</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">by</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lang</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClassNotFoundException</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">greater</span></span></span></span></code> </pre> <br>  En ausencia de la extensi√≥n .java, el int√©rprete de comandos busca la clase compilada por el nombre que se pasa como argumento; este es el primer modo de funcionamiento del iniciador de Java.  Para evitar que esto suceda, use la opci√≥n <code>--source</code> para forzar el cambio al modo de archivo fuente: <br><br><pre> <code class="java hljs">mohamed_taman$ java --source <span class="hljs-number"><span class="hljs-number">11</span></span> greater <span class="hljs-string"><span class="hljs-string">"Mo. Taman"</span></span> Hello, Mo. Taman to InfoQ universe!!</code> </pre> <br>  Ahora pasemos al primer escenario.  La clase Greater.java es compatible con JDK 10 porque contiene la palabra clave <code>var</code> , pero no es compatible con JDK 9. Cambie la <code>source</code> a <code>10</code> : <br><br><pre> <code class="java hljs">mohamed_taman$ java --source <span class="hljs-number"><span class="hljs-number">10</span></span> Greater.java <span class="hljs-string"><span class="hljs-string">"Mo. Taman"</span></span> Hello Mo. Taman to InfoQ universe!!</code> </pre> <br>  Ejecute el comando anterior nuevamente, pero esta vez pase <code>--source 9</code> lugar de <code>10</code> : <br><br><pre> <code class="java hljs">mohamed_taman$ java --source <span class="hljs-number"><span class="hljs-number">9</span></span> Greater.java <span class="hljs-string"><span class="hljs-string">"Mo. Taman"</span></span> Greater.java:<span class="hljs-number"><span class="hljs-number">8</span></span>: warning: as of release <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-string"><span class="hljs-string">'var'</span></span> is a restricted local variable type and cannot be used <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> type declarations or as the element type of an array <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = args[<span class="hljs-number"><span class="hljs-number">0</span></span>]; ^ Greater.java:<span class="hljs-number"><span class="hljs-number">8</span></span>: error: cannot find symbol <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = args[<span class="hljs-number"><span class="hljs-number">0</span></span>]; ^ symbol: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">var</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">location</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloWorld</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class"> 1 </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">warning</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">error</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">compilation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">failed</span></span></span></span></code> </pre> <br>  Nota: el compilador advierte que <code>var</code> ha convertido en un nombre de tipo restringido en JDK 10.  Pero como tenemos un lenguaje de nivel 10, la compilaci√≥n contin√∫a.  Sin embargo, se produce un bloqueo porque el archivo de origen no tiene un tipo denominado <code>var</code> . <br><br>  Todo es simple  Ahora considere el uso de varias clases. <br><br><h3>  ¬øEste enfoque funciona con m√∫ltiples clases? </h3><br>  Si lo hace <br><br>  Considere un ejemplo con dos clases.  El c√≥digo verifica si el valor de cadena dado es un <a href="https://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B0%25D0%25BB%25D0%25B8%25D0%25BD%25D0%25B4%25D1%2580%25D0%25BE%25D0%25BC">pal√≠ndromo</a> . <br><br>  Aqu√≠ est√° el c√≥digo guardado en el archivo PalindromeChecker.java: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> java.lang.System.*; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PalindromeChecker</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( args == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || args.length&lt; <span class="hljs-number"><span class="hljs-number">1</span></span> ){ err.println(<span class="hljs-string"><span class="hljs-string">"String is required!!"</span></span>); exit(<span class="hljs-number"><span class="hljs-number">1</span></span>); } out.printf(<span class="hljs-string"><span class="hljs-string">"The string {%s} is a Palindrome!! %b %n"</span></span>, args[<span class="hljs-number"><span class="hljs-number">0</span></span>], StringUtils .isPalindrome(args[<span class="hljs-number"><span class="hljs-number">0</span></span>])); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringUtils</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isPalindrome</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String word)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuilder(word)) .reverse() .toString() .equalsIgnoreCase(word); } }</code> </pre> <br>  Ejecute el archivo <br><br><pre> <code class="java hljs">mohamed_taman:code$ java PalindromeChecker.java RediVidEr The string {RediVidEr} is a Palindrome!! True</code> </pre> <br>  Ejec√∫telo nuevamente, sustituyendo "RaceCar" en lugar de "MadAm": <br><br><pre> <code class="java hljs">mohamed_taman:code$ java PalindromeChecker.java RaceCar The string {RaceCar} is a Palindrome!! True</code> </pre> <br>  Ahora sustituya "Mohamed" en lugar de "RaceCar": <br><br><pre> <code class="java hljs">mohamed_taman:code$ java PalindromeChecker.java Taman The string {Taman} is a Palindrome!! <span class="hljs-keyword"><span class="hljs-keyword">false</span></span></code> </pre> <br>  Como puede ver, puede agregar tantas clases p√∫blicas como desee a un archivo fuente.  Aseg√∫rese de que el m√©todo principal se define primero.  El int√©rprete usar√° la primera clase como punto de partida para iniciar el programa despu√©s de compilar el c√≥digo en la memoria. <br><br><h3>  ¬øPuedo usar m√≥dulos? </h3><br>  Si, sin limites.  El c√≥digo compilado en memoria se ejecuta como parte de un m√≥dulo sin nombre con la <code>--add-modules=ALL-DEFAULT</code> , que da acceso a todos los m√≥dulos enviados con el JDK. <br><br>  Es decir, el c√≥digo puede usar diferentes m√≥dulos sin la necesidad de definir expl√≠citamente dependencias usando module-info.java. <br><br>  Veamos el c√≥digo que realiza una llamada HTTP utilizando la nueva API de cliente HTTP introducida en JDK 11. Tenga en cuenta que estas API se introdujeron en Java SE 9 como una caracter√≠stica experimental, pero ahora tienen el estado de una funci√≥n completa del m√≥dulo java.net.http . <br><br>  En este ejemplo, llamaremos a una API REST simple usando el m√©todo GET para obtener una lista de usuarios.  Pasamos al servicio p√∫blico <a href="https://reqres.in/api/users%3Fpage%3D2">reqres.in/api/users?page=2</a> .  Guardamos el c√≥digo en un archivo llamado UsersHttpClient.java: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> java.lang.System.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.http.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.http.HttpResponse.BodyHandlers; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UsersHttpClient</span></span></span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> client = HttpClient.newBuilder().build(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> request = HttpRequest.newBuilder() .GET() .uri(URI.create(<span class="hljs-string"><span class="hljs-string">"https://reqres.in/api/users?page=2"</span></span>)) .build(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> response = client.send(request, BodyHandlers.ofString()); out.printf(<span class="hljs-string"><span class="hljs-string">"Response code is: %d %n"</span></span>,response.statusCode()); out.printf(<span class="hljs-string"><span class="hljs-string">"The response body is:%n %s %n"</span></span>, response.body()); } }</code> </pre> <br>  Ejecute el programa y obtenga el resultado: <br><br><pre> <code class="java hljs">mohamed_taman:code$ java UsersHttpClient.java Response code is: <span class="hljs-number"><span class="hljs-number">200</span></span> The response body is: {<span class="hljs-string"><span class="hljs-string">"page"</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-string"><span class="hljs-string">"per_page"</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-string"><span class="hljs-string">"total"</span></span>:<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-string"><span class="hljs-string">"total_pages"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-string"><span class="hljs-string">"data"</span></span>:[{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-string"><span class="hljs-string">"first_name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Eve"</span></span>,<span class="hljs-string"><span class="hljs-string">"last_name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Holt"</span></span>,<span class="hljs-string"><span class="hljs-string">"avatar"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://s3.amazonaws.com/uifaces/faces/twitter/marcoramires/128.jpg"</span></span>},{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>,<span class="hljs-string"><span class="hljs-string">"first_name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Charles"</span></span>,<span class="hljs-string"><span class="hljs-string">"last_name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Morris"</span></span>,<span class="hljs-string"><span class="hljs-string">"avatar"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://s3.amazonaws.com/uifaces/faces/twitter/stephenmoon/128.jpg"</span></span>},{<span class="hljs-string"><span class="hljs-string">"id"</span></span>:<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-string"><span class="hljs-string">"first_name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Tracey"</span></span>,<span class="hljs-string"><span class="hljs-string">"last_name"</span></span>:<span class="hljs-string"><span class="hljs-string">"Ramos"</span></span>,<span class="hljs-string"><span class="hljs-string">"avatar"</span></span>:<span class="hljs-string"><span class="hljs-string">"https://s3.amazonaws.com/uifaces/faces/twitter/bigmancho/128.jpg"</span></span>}]}</code> </pre> <br>  Ahora puede probar r√°pidamente las nuevas funciones proporcionadas por diferentes m√≥dulos sin crear su propio m√≥dulo. <br><br><h2>  ¬øPor qu√© son importantes los scripts en Java? </h2><br>  Primero, recordemos qu√© scripts son: <br><br><blockquote>  Un script es un programa escrito para un entorno de tiempo de ejecuci√≥n espec√≠fico que automatiza la ejecuci√≥n de tareas o comandos que una persona puede ejecutar a su vez. </blockquote><br>  A partir de esta definici√≥n general, podemos derivar una definici√≥n simple de un lenguaje de programaci√≥n: es un lenguaje de programaci√≥n que utiliza construcciones de alto nivel para interpretar y ejecutar un comando (o comandos) a la vez. <br><br>  El lenguaje de secuencias de comandos utiliza una serie de comandos escritos en un archivo.  A menudo, estos lenguajes se interpretan (en lugar de compilarse) y se adhieren a un estilo de programaci√≥n procesal (aunque algunos lenguajes de secuencias de comandos tambi√©n tienen las propiedades de los lenguajes orientados a objetos). <br><br>  En general, los lenguajes de secuencias de comandos son m√°s f√°ciles de aprender y m√°s r√°pidos de escribir que los lenguajes compilados m√°s estructurados como Java, C y C ++.  Los lenguajes de secuencias de comandos del lado del servidor incluyen Perl, PHP y Python, y en el <i>lado</i> del <i>cliente</i> , JavaScript. <br><br>  Durante mucho tiempo, Java se consider√≥ un lenguaje compilado bien estructurado y altamente tipado que es interpretado por una m√°quina virtual para ejecutarse en cualquier arquitectura inform√°tica.  Sin embargo, Java no es tan f√°cil de aprender y crear prototipos en comparaci√≥n con otros lenguajes de secuencias de comandos. <br><br>  Sin embargo, Java ya cumpli√≥ 24 a√±os, es utilizado por unos 10 millones de desarrolladores en todo el mundo.  Los lanzamientos recientes han agregado una serie de nuevas caracter√≠sticas para facilitar a los programadores j√≥venes aprender este idioma, as√≠ como para usar las funciones del lenguaje y la API sin compilaci√≥n e IDE.  Por ejemplo, Java SE 9 introdujo la herramienta JShell (REPL), que admite programaci√≥n interactiva. <br><br>  Y con el lanzamiento de JDK 11, este lenguaje tiene la capacidad de admitir scripts, ¬°porque ahora puede ejecutar c√≥digo con una simple llamada al comando <code>java</code> ! <br><br>  Hay dos formas principales de usar scripts en Java 11: <br><br><ol><li>  Llamada directa al comando <code>java</code> . <br></li><li>  Usando * nix scripts para la l√≠nea de comando, similar a los scripts Bash. <br></li></ol><br>  Ya hemos considerado la primera opci√≥n, ahora nos ocuparemos de la segunda.  Nos abre muchas posibilidades. <br><br><h3>  Archivos Shebang: ejecute Java como un script de shell </h3><br>  Entonces, en Java SE 11, apareci√≥ soporte para scripts, incluidos los archivos shebang tradicionales del mundo * nix.  Para apoyarlos, no se requer√≠a una especificaci√≥n de idioma. <br><br>  En el archivo shebang, los dos primeros bytes deben ser 0x23 y 0x21.  Esta es la codificaci√≥n de caracteres ASCII #! .. Todos los bytes posteriores en el archivo se leen seg√∫n el sistema de codificaci√≥n predeterminado en esta plataforma. <br><br>  Por lo tanto, para que el archivo se ejecute utilizando el mecanismo shebang incorporado en el sistema operativo, solo hay un requisito: la primera l√≠nea comienza con #! .. Esto significa que no necesitamos ninguna primera l√≠nea especial cuando se utiliza expl√≠citamente el iniciador de Java para ejecutar el c√≥digo desde el archivo fuente, como es el caso de HelloUniverse.java. <br><br>  Ejecute el siguiente ejemplo en un terminal que ejecute <i>macOS Mojave 10.14.5</i> .  Pero primero, definiremos reglas importantes a seguir al crear un archivo shebang: <br><br><ul><li>  No mezcle el c√≥digo Java con el c√≥digo del lenguaje de script de su script de shell del sistema operativo. <br></li><li>  Si necesita agregar opciones de m√°quina virtual, debe especificar <code>--source</code> primera opci√≥n despu√©s del nombre del archivo ejecutable en el archivo shebang.  Las opciones de m√°quina virtual incluyen: <code>--class-path</code> , <code>--module-path</code> , <code>--add-exports</code> , <code>--add-modules</code> , <code>--limit-modules</code> , <code>--patch-module</code> , <code>--upgrade-module-path</code> , as√≠ como cualquier variaci√≥n de los mismos.  Tambi√©n se incluye en esta lista la nueva opci√≥n <code>--enable-preview</code> , descrita en <a href="https://openjdk.java.net/jeps/12">JEP 12</a> . <br></li><li>  Debe especificar la versi√≥n de Java que se utiliza en el archivo fuente. <br></li><li>  La primera l√≠nea del archivo debe comenzar con caracteres shebang (#!).  Por ejemplo: <br> <code>#!/path/to/java --source &lt;vrsion&gt;</code> </li> <li>  Para archivos fuente Java, NO use el mecanismo shebang para ejecutar archivos que cumplan con la convenci√≥n de nomenclatura est√°ndar (finalice en .java) <br></li><li>  Debe marcar el archivo como ejecutable con el comando: <br>  <code>chmod +x &lt;Filname&gt;.&lt;Extnsion&gt;</code> . <br></li></ul><br>  Creemos un archivo shebang (programa de script), que enumerar√° el contenido del directorio cuyo nombre se pasar√° como par√°metro.  Si no se pasan par√°metros, el directorio actual se tomar√° por defecto. <br><br><pre> <code class="java hljs">#!/usr/bin/java --source <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.file.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> java.lang.System.*; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DirectoryLister</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ vardirName = <span class="hljs-string"><span class="hljs-string">"."</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( args == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || args.length&lt; <span class="hljs-number"><span class="hljs-number">1</span></span> ){ err.println(<span class="hljs-string"><span class="hljs-string">"Will list the current directory"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { dirName = args[<span class="hljs-number"><span class="hljs-number">0</span></span>]; } Files .walk(Paths.get(dirName)) .forEach(out::println); } }</code> </pre> <br>  Guarde el c√≥digo en un archivo llamado dirlist sin la extensi√≥n y luego <code>mohamed_taman:code$ chmod +x dirlist</code> como ejecutable: <code>mohamed_taman:code$ chmod +x dirlist</code> . <br><br>  Ejecute el archivo <br><br><pre> <code class="java hljs">mohamed_taman:code$ ./dirlist Will list the current directory . ./PalindromeChecker.java ./greater ./UsersHttpClient.java ./HelloWorld.java ./Greater.java ./dirlist</code> </pre> <br>  Ejec√∫telo nuevamente utilizando el comando que pasa el directorio principal y verifique el resultado. <br><br><pre> <code class="java hljs">mohamed_taman:code$ ./dirlist ../</code> </pre> <br>  Nota: al evaluar el c√≥digo fuente, el int√©rprete ignora la l√≠nea shebang (primera l√≠nea).  Por lo tanto, el archivo shebang se puede llamar expl√≠citamente usando el iniciador, por ejemplo, con opciones adicionales: <br><br><pre> <code class="java hljs">$ java -Dtrace=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> --source <span class="hljs-number"><span class="hljs-number">11</span></span> dirlist</code> </pre> <br>  Tambi√©n debe tenerse en cuenta: si el archivo de secuencia de comandos est√° en el directorio actual, puede ejecutarlo as√≠: <br><br><pre> <code class="java hljs">$ ./dirlist</code> </pre> <br>  Y si el script se encuentra en un directorio cuya ruta se especifica en la RUTA del usuario, puede ejecutarlo as√≠: <br><br><pre> <code class="java hljs">$ dirlist</code> </pre> <br>  Y, por √∫ltimo, te dar√© algunos consejos para tener en cuenta al usar scripts. <br><br><h2>  Consejos </h2><br><ol><li>  Algunas opciones que pasar√° a javac pueden no pasarse (o no reconocerse) a <code>java</code> , por ejemplo, las opciones <code>-processor</code> o <code>-Werror</code> . <br></li><li>  Si hay archivos .class y .java en classpath, entonces el iniciador lo obligar√° a usar el archivo de clase. <br><br><pre> <code class="java hljs">mohamed_taman:code$ javac HelloUniverse.java mohamed_taman:code$ java HelloUniverse.java error: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">found</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">on</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">application</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">path</span></span></span><span class="hljs-class">: </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HelloUniverse</span></span></span></span></code> </pre> <br></li><li>  Tenga en cuenta la posibilidad de un conflicto entre los nombres de clase y paquete.  Eche un vistazo a esta estructura de directorios: <br><br><pre> <code class="java hljs">mohamed_taman:code$ tree . ‚îú‚îÄ‚îÄ Greater.java ‚îú‚îÄ‚îÄ HelloUniverse ‚îÇ ‚îú‚îÄ‚îÄ java.class ‚îÇ ‚îî‚îÄ‚îÄ java.java ‚îú‚îÄ‚îÄ HelloUniverse.java ‚îú‚îÄ‚îÄ PalindromeChecker.java ‚îú‚îÄ‚îÄ UsersHttpClient.java ‚îú‚îÄ‚îÄ dirlist ‚îî‚îÄ‚îÄ greater</code> </pre> <br>  Observe los dos <code>java.java</code> en el paquete HelloUniverse y el archivo HelloUniverse.java en el mismo directorio.  Si intentas correr: <br><br><pre> <code class="java hljs">mohamed_taman:code$ java HelloUniverse.java</code> </pre> <br>  entonces, ¬øqu√© archivo se ejecutar√° primero y qu√© segundo?  El iniciador ya no hace referencia al archivo de clase en el paquete HelloUniverse.  En su lugar, cargar√° y ejecutar√° el archivo original HelloUniverse.java, es decir, el archivo se iniciar√° en el directorio actual. <br></li></ol><br>  Los archivos Shebang abren muchas posibilidades para crear scripts para automatizar todo tipo de tareas utilizando herramientas Java. <br><br><h2>  Resumen </h2><br>  Comenzando con Java SE 11 y por primera vez en el historial de programaci√≥n, puede ejecutar directamente scripts con c√≥digo Java sin compilaci√≥n.  Esto le permite escribir scripts Java y ejecutarlos desde la l√≠nea de comando * nix. <br><br>  Experimente con esta funci√≥n y comparta sus conocimientos con otros. <br><br><h2>  Fuentes utiles </h2><br><ul><li>  <a href="https://openjdk.java.net/jeps/330">JEP 330: Lanzar programas de c√≥digo fuente de un solo archivo</a> <br></li><li>  <a href="https://openjdk.java.net/jeps/12">JEP 12: Lenguaje de vista previa y caracter√≠sticas de VM</a> <br></li><li>  <a href="https://docs.oracle.com/en/java/javase/11/">Documentaci√≥n de JDK 11</a> <br></li><li>  <a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk12-downloads-5295953.html">Kit de desarrollo Java SE 12.0.1</a> <br></li><li>  <a href="https://reqres.in/">Pon a prueba tu interfaz con una API real</a> <br></li></ul></div></div><p>Source: <a href="https://habr.com/ru/post/483888/">https://habr.com/ru/post/483888/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../483876/index.html">La cultura corporativa roja es el principal problema de los negocios rusos (Parte 1)</a></li>
<li><a href="../483878/index.html">C√≥mo hablar sobre los principales componentes de Android en 15 minutos.</a></li>
<li><a href="../483880/index.html">¬øEn qu√© se diferencia la programaci√≥n actual de la programaci√≥n hace 20 a√±os?</a></li>
<li><a href="../483882/index.html">Pruebas unitarias en arquitectura Clean Swift</a></li>
<li><a href="../483886/index.html">Decodificador Movix Pro: del software a la √∫ltima tuerca</a></li>
<li><a href="../483896/index.html">C√≥mo lanzar un producto solo si es desarrollador: Consejos del creador de Laravel, Taylor Otvel. Parte 2: Encontrar una idea</a></li>
<li><a href="../483898/index.html">¬øDocumentos como c√≥digo contra o en conjunto con Confluence? Descripci√≥n general de varias formas de publicar desde un repositorio a Confluence</a></li>
<li><a href="../483900/index.html">Creaci√≥n de un sistema Embedded Linux tolerante a fallos basado en el m√≥dulo Mars ZX3 de Enclustra</a></li>
<li><a href="../483906/index.html">Terminal m√≥vil en sistemas de control de acceso.</a></li>
<li><a href="../483910/index.html">Teor√≠a de la informaci√≥n visual (Parte 1)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>