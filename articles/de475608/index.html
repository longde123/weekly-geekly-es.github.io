<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôàÔ∏è üêΩ ‚ö°Ô∏è Google Tag Manager: Unscheinbare und n√ºtzliche Trigger-Einstellungen üöç üÜí üèáüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Vermarkter von Otzyvmarketing, Stanislav Romanov, erkl√§rte, wie man mit dem Google Tag Manager (GTM) Analysen einrichtet und Dateidownloads von de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Google Tag Manager: Unscheinbare und n√ºtzliche Trigger-Einstellungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/netologyru/blog/475608/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der Vermarkter von Otzyvmarketing,</a> Stanislav Romanov, erkl√§rte, wie man mit dem Google Tag Manager (GTM) Analysen einrichtet und Dateidownloads von der Website verfolgt.  Dieser Artikel richtet sich an Personen, die die Grundlagen der JavaScript-Sprache kennen und bereits mit GTM gearbeitet haben. <br><a name="habracut"></a><br><h2>  Was ist dataLayer? </h2><br>  DataLayer ist eine regul√§re JavaScript-Variable.  Sie k√∂nnen Daten darauf schreiben und dann an Google-Dienste √ºbertragen: <br><br><img src="https://habrastorage.org/webt/4e/4z/mw/4e4zmwwqanq-tn-xt0x3dfxa-wc.png"><br><br>  Der Variablenname kann ge√§ndert werden - anstelle der <code>dataLayer</code> Variablen wurde der Name <code>dataOlga</code> : <br><br><img src="https://habrastorage.org/webt/0a/qm/vq/0aqmvqoscu2b58-gtlbp_fpumga.png"><br><br><h2>  Unterschied zwischen dataLayer = [] und dataLayer.push () </h2><br>  Wenn Sie <code>dataLayer=[]</code> deklarieren, <code>dataLayer=[]</code> dieser Name im Arbeitsspeicher des Computers auf das gesamte Array.  Wenn Sie also neuen Daten eine Variable zuweisen, m√ºssen Sie lediglich die Werte √ºberschreiben.  Der Zugriff auf Variablen aus dem ersten Array geht verloren. <br><br>  Es sieht ungef√§hr so ‚Äã‚Äãaus: <br><br><img src="https://habrastorage.org/webt/-s/0_/qo/-s0_qo3ikvlvpkwc_9gg7ccpqks.png"><br><br>  Gleichzeitig ist <code>dataLayer.push()</code> weder eine Variable noch ein Array.  Dies ist eine Methode, die auf jedes Array angewendet werden kann und entweder etwas am Ausgang abruft oder das Array selbst irgendwie √§ndert.  Mit anderen Worten, wir nehmen das dataLayer-Array und wenden die <code>push()</code> -Methode darauf an - wir erhalten <code>dataLayer.push()</code> .  <code>Push</code> √ºberschreibt die Daten nicht wie im Fall eines √úberschreibens des Arrays, sondern f√ºgt dem Array neue Werte hinzu. <br><br>  Wenn Sie mit GTM arbeiten, verwenden Sie am besten die folgende <code>push</code> Methode: <br><br><img src="https://habrastorage.org/webt/dy/jp/c-/dyjpc-cpvlfwur8ck_smhl5cli4.png"><br><br>  In diesem Formular muss zus√§tzlich mit <code>push</code> <code>dataLayer</code> werden, ob die Variable <code>dataLayer</code> generell als Array gesetzt wurde.  Das √úberpr√ºfen hilft, unn√∂tige Fehler zu vermeiden, wenn die Site ausgef√ºhrt wird. <br><br><h2>  Konfigurieren der Analyse auf einer Seite </h2><br>  Mit GTM k√∂nnen Sie die Arbeit einer einzelnen Seite einfach mit Google Analytics synchronisieren.  Mit einer einzelnen Seite meine ich eine Site, bei der alle Seiten eine einzige Shell haben und neue Daten dynamisch √ºber AJAX auf der Site angezeigt werden.  Es st√∂rt den normalen Betrieb von GA, so dass auf einen GTM-Trigger nicht verzichtet werden kann: <br><br><img src="https://habrastorage.org/webt/p1/o3/3a/p1o33ay4wdo-u39-mnel361u8um.png"><br><br>  Wenden Sie den Trigger nach dem Erstellen auf Universal Analytics an: <br><br><img src="https://habrastorage.org/webt/cy/9h/ah/cy9hah_src0krc-x75syyhaukmo.png"><br><br>  Jetzt kann GA Daten nicht nur empfangen, wenn der Benutzer die Seite betritt oder verl√§sst, sondern auch in allen anderen F√§llen von dynamischer Daten√ºberlastung. <br><br>  Die oben beschriebene Methode ist zwar nicht f√ºr Sites geeignet, die verschiedene Get-Request-Variablen verwenden und die URL ‚Äûverderben‚Äú.  Bei so komplizierten Adressen m√ºssen Sie GTM schwieriger konfigurieren. <br><br><h3>  1. Richten Sie Variablen ein </h3><br>  Wir gehen in die Einstellungen des Abschnitts "Variablen" und w√§hlen "Neues Verlaufsfragment" und "Verlaufsquelle" aus. Sie werden ben√∂tigt, um die URL zusammen mit Get-Requests zu speichern und zu √ºberpr√ºfen. <br>  Danach m√ºssen Sie mit JavaScript arbeiten und Ihre eigene Variable <code>getPathWithFragment</code> , in die wir die URL schreiben.  Die Adresse wird an GA gesendet und hilft so Google Analytics herauszufinden, wann sich die URL tats√§chlich √§ndert: <br><br><img src="https://habrastorage.org/webt/z3/i9/gb/z3i9gbsboa4r15bdjq-zhtjzvsc.png"><br><br>  Der Code gibt den Pfad, die Zeichenfolge und den Hash der URL zur√ºck. <br><br><h3>  2. Erstellen Sie einen Trigger </h3><br>  W√§hlen Sie nach der Konfiguration des Triggers f√ºr Verlaufsfragment√§nderungen seinen Typ aus.  Hier sollten Sie die Verlaufs√§nderung vornehmen und die Popstate-Aktivierung ausw√§hlen.  Mit all diesen Manipulationen k√∂nnen Sie die √Ñnderung im aktiven Verlaufsdatensatz aufzeichnen: <br><br><img src="https://habrastorage.org/webt/3q/hx/9r/3qhx9rcljd2mvaodkthgqj828qo.png"><br><br><h3>  3. Passen Sie das Tag an </h3><br>  Konfigurieren Sie als N√§chstes Universal Analytics.  <code>getPathWithFragment</code> in den Einstellungen Seite und die <code>getPathWithFragment</code> Variable <code>getPathWithFragment</code> : <br><br><img src="https://habrastorage.org/webt/3q/hx/9r/3qhx9rcljd2mvaodkthgqj828qo.png"><br><br>  Das ist alles, es muss nur noch der Trigger f√ºr den Verlaufsfragmentwechsel hinzugef√ºgt und die Tag-Operation √ºberpr√ºft werden. <br><br><h3>  4. Warum brauche ich ein Tag? </h3><br>  Wenn der Benutzer, der die Site besucht, auf den Link klickt, der zum Laden der neuen Daten der dynamischen Seite erforderlich ist, wird der erstellte Ausl√∂ser und infolgedessen das GA-Tag ausgel√∂st.  Dank dessen gehen die Daten reibungslos in Google Analytics √ºber. <br><br><h2>  So verfolgen Sie ausgehende Links und Dateidownloads </h2><br>  Verfolgen von Links ist sehr n√ºtzlich.  So k√∂nnen Sie herausfinden, wohin der Benutzer von der Website gelangt und wie oft er dies tut.  Das GTM-Setup unterscheidet sich in diesem Fall geringf√ºgig von dem, was oben beschrieben wurde.  F√ºr die Nachverfolgung m√ºssen Sie eine Variable erstellen, in der das System alle f√ºr die Analyse erforderlichen Daten aufzeichnet.  Die Aufzeichnung erfolgt, wenn der Ausl√∂ser ausgel√∂st wird. <br><br><h3>  1. Erstellen Sie eine Variable </h3><br>  Wir m√ºssen eine neue Variable deklarieren, die das Ereignis registriert.  Sie k√∂nnen sie Click_URL_Hostname nennen.  Da die Variable die Adresse enth√§lt, ist ihr Typ die URL.  In diesem Fall ist es besser, www zu entfernen, um eine Verdoppelung der Informationen zu vermeiden: <br><br><img src="https://habrastorage.org/webt/vw/4q/-z/vw4q-zqdmtwjbohbhgae7uaty-w.png"><br><br><h3>  2. Erstellen Sie einen Trigger </h3><br>  W√§hlen Sie den Typ "Nur Links".  W√§hlen Sie als Bedingung die zuvor erstellte Variable Click_URL_Hostname aus: <br><br><img src="https://habrastorage.org/webt/ay/2n/vx/ay2nvxdihdjaduiysqpd0boynfa.png"><br><br><h3>  3. Erstellen Sie ein Tag </h3><br>  Wir erstellen ein Tag, das Benutzeraktionen verfolgt und den oben beschriebenen Algorithmus wiederholt: <br><br><img src="https://habrastorage.org/webt/ah/ym/w7/ahymw7nhrcpu8mtvyhitgdc5aik.png"><br><br>  Wenn alles richtig gemacht ist, sollte das Tag funktionieren.  Nat√ºrlich muss es mit dem Debugger √ºberpr√ºft werden.  Beachten Sie, dass UA eine Konstante ist, in die die Analyse-ID geschrieben wird.  Dies ist ein allgemeiner Trick f√ºr Programmierer: Verwenden Sie Konstanten anstelle von Zahlen, um das Ersetzen von Massen zu vereinfachen. <br><br><h2>  So verfolgen Sie Dateidownloads mit Google Tag Manager </h2><br>  Wenn Sie wissen m√∂chten, wie, wann und mit welcher H√§ufigkeit Benutzer Dateien herunterladen, verwenden Sie eines der Analysesysteme oder konfigurieren Sie GTM. <br><br>  Erstellen Sie einen Trigger und w√§hlen Sie als Typ "Nur Links".  Konfigurieren Sie als N√§chstes die Klick-URL-Aktivierung: <br><br><img src="https://habrastorage.org/webt/g9/g4/cl/g9g4cln-kknm3fjlwo5tqzyvexy.png"><br><br>  Mit einem solchen GTM-Setup k√∂nnen Sie das Herunterladen von Dateien mit der Erweiterung xlsx, pdf, docx, zip und csv korrigieren. <br><br>  Anschlie√üend k√∂nnen Sie eine Variable erstellen, indem Sie den Typ "Ereignis" ausw√§hlen und die Parameter einstellen.  Wir haben oben bereits etwas √Ñhnliches gemacht, als wir ausgehende Links aufgesp√ºrt haben. <br><br><h2>  Expertenmeinungen: Warum Google Tag Manager? </h2><br><img src="https://habrastorage.org/webt/we/hy/bv/wehybvisghcpbtftpk_ljswbhzg.png" align="left">  <b>Dmitry Nichiporov, bezahlter Verkehrsspezialist bei Elama.</b> <br>  ‚ÄûMarketingfachleute sind wichtig, um Werbekampagnen zu √ºberwachen.  Um die vielf√§ltigen Werbeergebnisse zu messen, ben√∂tigen Sie eine umfassende Analyse.  Mit den richtigen Einstellungen k√∂nnen Werbestatistiken das Budget optimieren, die Kampagne effektiver gestalten, die Klickrate erh√∂hen und den Preis f√ºr die Kundengewinnung sogar senken. <br><br>  Meiner Meinung nach ist GTM ein unverzichtbares und sehr komfortables System, das ein flexibles Tag-Management erm√∂glicht.  Es reicht aus, den Code einmal richtig zu konfigurieren und dann problemlos die erforderlichen Daten √ºber die Site und die Clients abzurufen. <br><br>  Normalerweise verwende ich GTM, wenn ich Analysen auf der Site installieren, die Wirksamkeit der Anrufverfolgung und der Chats √ºberpr√ºfen und bestimmte Conversions korrigieren muss.  Oft verwende ich GTM bei der Durchf√ºhrung von Werbekampagnen f√ºr Online-Shops. <br><br>  Es ist klar, dass GTM f√ºr Unternehmen, die keinen Vollzeit-Programmierer haben, ein unverzichtbarer Tag-Manager sein wird.  Schlie√ülich sind keine besonderen Kenntnisse erforderlich, um es zu verwenden.  Ein ziemlich grundlegendes Verst√§ndnis, wie HTML und JS funktionieren. <br><br>  Gleichzeitig wird GTM sowohl f√ºr normale Spezialisten, Vermarkter und Werbetreibende als auch f√ºr gro√üe Unternehmen und Agenturen, die sich mit Online-Werbung befassen, von Nutzen sein. ‚Äú <br><br><img src="https://habrastorage.org/webt/yu/az/x6/yuazx6udymvpht1zvselhujp89s.png" align="left">  <b>Denis Lisogorya, Digital Analyst bei OWOX BI.</b> <br>  ‚ÄûGTM ist eine gro√üartige M√∂glichkeit, Ihre Arbeit mit Analysen auf der Website zu vereinfachen.  Dies ist f√ºr die Verfolgung und Analyse des Benutzerverhaltens unerl√§sslich.  Mit dieser Funktion k√∂nnen Sie den Prozess der Datenerfassung auf der Site einfach steuern, indem Sie Tags bearbeiten und festlegen. <br><br>  Am meisten gef√§llt mir, dass die Teilnahme des Entwicklers normalerweise nur einmal erforderlich ist - um den Code auf der Site zu installieren, und alle anderen Manipulationen k√∂nnen in der GTM-Oberfl√§che vorgenommen werden.  Dies minimiert Ihre Abh√§ngigkeit von Entwicklern.  Mit GTM k√∂nnen Sie auch eine Vielzahl von vorgefertigten Integrationen mit anderen Diensten verwenden. Es verf√ºgt √ºber einen Test- und Debugging-Modus, der es erm√∂glicht, die Tags vor dem Hinzuf√ºgen zur Site zu testen, sowie √ºber viele andere Extras. <br><br>  Ich bin der Meinung, dass Spezialisten, die mit der Datenerfassung befasst sind, die √Ñnderung der Datenanforderungen oder √Ñnderungen auf der Website schnell beeinflussen und das Budget einsparen m√∂chten - es lohnt sich, sich dieses Tool genauer anzusehen.  Es ist wichtig zu wissen, dass es viele verschiedene Informationen zur Arbeit mit GTM gibt, dass es ein offizielles Forum und eine Hilfe gibt, in denen Sie immer die Antwort auf Ihre Frage finden k√∂nnen. <br><br>  Momentan gibt es eine Community-Vorlagengalerie, in der Sie Tag-Vorlagen finden, mit denen Sie nahezu jedes Problem l√∂sen k√∂nnen, z. B. das Konfigurieren der Datenerfassung f√ºr erweiterten E-Commerce.  Kurz gesagt, GTM ist ein Meer von M√∂glichkeiten! ‚Äú <br><br><h2>  Von den Redakteuren </h2><br><ul><li>  Anf√§ngerkurs " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Start in die Programmierung</a> " </li><li>  Beruf des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Python-Entwicklers</a> </li><li>  Online-Kurs f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kotlin-Entwickler</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de475608/">https://habr.com/ru/post/de475608/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de475594/index.html">Unterhaltsames JavaScript: Eine fast lineare Gleichung</a></li>
<li><a href="../de475596/index.html">Hypothesen f√ºr gro√üe Primzahlen haben sich f√ºr kleine Zahlensysteme bew√§hrt</a></li>
<li><a href="../de475598/index.html">Organisation einer einfachen Architektur in einer Android-Anwendung mit einer Reihe von ViewModel + LiveData, Retrofit + Coroutines</a></li>
<li><a href="../de475600/index.html">Wie wir Prometheus verbunden haben</a></li>
<li><a href="../de475604/index.html">Konfigurieren der offiziellen PostgreSQL-Vorlage unter Zabbix 4.4</a></li>
<li><a href="../de475610/index.html">Sichere LED-Tischleuchten, die die Sicht behalten</a></li>
<li><a href="../de475612/index.html">Vorausgesetzt, wann, Behauptungen und Vertrauen in die Umsetzung</a></li>
<li><a href="../de475614/index.html">Automatisierung f√ºr die Kleinsten. Zweiter Teil. Netzwerkdesign</a></li>
<li><a href="../de475618/index.html">So erstellen Sie einen Smart Python-Vertrag im Ontology-Netzwerk. Teil 2: Speicher-API</a></li>
<li><a href="../de475624/index.html">PHP-Watcher: Ein Tool, das die Entwicklung langlebiger Anwendungen vereinfacht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>