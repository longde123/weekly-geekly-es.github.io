<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ—ï¸ ğŸ’· ğŸ•¡ ä½¿ç”¨KSQLï¼ŒRaspberry Piå’ŒRadioè¿›è¡Œå™ªå£°æ˜ å°„ ğŸˆ ğŸ‘ğŸ½ ğŸ€</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ä¹ä¸€çœ‹ï¼Œè¿™ä¸ªæ•…äº‹å…·æœ‰åœ¨3æœˆ8æ—¥å‰å¤•è·å¾—æµªæ¼«ç¦é£Ÿçš„æ‰€æœ‰æ¡ä»¶ï¼šé£æœºï¼Œçˆ±æƒ…ï¼Œä¸€äº›é—´è°æ´»åŠ¨ï¼Œæœ€åè¿˜æœ‰ä¸€åªçŒ«ï¼ˆæ›´ç¡®åˆ‡åœ°è¯´æ˜¯ä¸€åªçŒ«ï¼‰ã€‚ å¾ˆéš¾æƒ³è±¡æ‰€æœ‰è¿™äº›éƒ½ä¸å¡å¤«å¡ï¼ŒKSQLå’Œâ€œå¦‚ä½•åˆ©ç”¨å®¶åº­ä¿¡æ¯æŠ€æœ¯æ‰¾åˆ°æœ€åµçš„é£æœºâ€çš„å®éªŒç›´æ¥ç›¸å…³ã€‚ è¿™å¾ˆå›°éš¾ï¼Œä½†æœ‰å¿…è¦ï¼šè¥¿è’™Â·å¥¥ä¼¯é‡Œï¼ˆSimon Oburyï¼‰è¿›è¡Œäº†è¿™æ ·çš„å®éªŒï¼Œæˆ‘ä»¬ç¿»...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨KSQLï¼ŒRaspberry Piå’ŒRadioè¿›è¡Œå™ªå£°æ˜ å°„</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/itsumma/blog/442876/"><img src="https://habrastorage.org/webt/8h/e_/jp/8he_jpuc-mgf_sarxdvkm3n6xsg.png"><br><br> ä¹ä¸€çœ‹ï¼Œè¿™ä¸ªæ•…äº‹å…·æœ‰åœ¨3æœˆ8æ—¥å‰å¤•è·å¾—æµªæ¼«ç¦é£Ÿçš„æ‰€æœ‰æ¡ä»¶ï¼šé£æœºï¼Œçˆ±æƒ…ï¼Œä¸€äº›é—´è°æ´»åŠ¨ï¼Œæœ€åè¿˜æœ‰ä¸€åªçŒ«ï¼ˆæ›´ç¡®åˆ‡åœ°è¯´æ˜¯ä¸€åªçŒ«ï¼‰ã€‚ å¾ˆéš¾æƒ³è±¡æ‰€æœ‰è¿™äº›éƒ½ä¸å¡å¤«å¡ï¼ŒKSQLå’Œâ€œå¦‚ä½•åˆ©ç”¨å®¶åº­ä¿¡æ¯æŠ€æœ¯æ‰¾åˆ°æœ€åµçš„é£æœºâ€çš„å®éªŒç›´æ¥ç›¸å…³ã€‚ è¿™å¾ˆå›°éš¾ï¼Œä½†æœ‰å¿…è¦ï¼šè¥¿è’™Â·å¥¥ä¼¯é‡Œï¼ˆSimon Oburyï¼‰è¿›è¡Œäº†è¿™æ ·çš„å®éªŒï¼Œæˆ‘ä»¬ç¿»è¯‘äº†ä»–çš„è‘—ä½œï¼Œæè¿°äº†è¯¥è¿‡ç¨‹çš„æ‰€æœ‰ç»†èŠ‚ã€‚ <br><a name="habracut"></a><br> æˆ‘ä»¬çš„æ–°çŒ«å«é›ªèŠ±ï¼Œèµ·å¾—å¾ˆæ—©ã€‚ é£æœºé£è¿‡æˆ‘ä»¬å®¶çš„å£°éŸ³å”¤é†’äº†å¥¹ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæˆ‘å¯ä»¥ä½¿ç”¨Apache Kafkaï¼ŒKSQLå’ŒRaspberry Piç¡®å®šå“ªæ¶é£æœºå¯ä»¥ä½¿çŒ«ä¿æŒæ¸…é†’å‘¢ï¼Ÿ æœ€å¥½åˆ›å»ºä¸€ä¸ªæœ‰è¶£çš„è·Ÿè¸ªé¢æ¿ï¼ŒçŒ«å¯ä»¥åœ¨è¯¥é¢æ¿ä¸Šè½¬ç§»æ³¨æ„åŠ›-ç»™æˆ‘æ›´å¤šçš„ç¡çœ ã€‚ <br><br><h3> ä¸€èˆ¬è€Œè¨€ </h3> <br><img src="https://habrastorage.org/webt/f8/df/kg/f8dfkgmmkghrnfhtjecrthwx8j8.png"><br>  <i>æˆ‘ä»¬ä½¿ç”¨Kafkaå’ŒKSQLå°†é£æœºä»å¤©ç©ºè½¬ç§»åˆ°å›¾å½¢</i> <br><br> é£æœºä½¿ç”¨GPSæ¥æ”¶å™¨ç¡®å®šå…¶ä½ç½®ã€‚ è½¦è½½å‘å°„å™¨ä½¿ç”¨çŸ­è·ç¦»æ— çº¿ç”µå‘å°„å®šæœŸæŠ¥å‘Šèˆ¹èˆ¶çš„ä½ç½®ï¼Œè¯†åˆ«å·ï¼Œé«˜åº¦å’Œé€Ÿåº¦ã€‚ å¹¿æ’­è‡ªåŠ¨ç›¸å…³ç›‘è§†ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">AZN-V</a> ï¼‰çš„è¿™äº›å¹¿æ’­æœ¬è´¨ä¸Šæ˜¯å¼€æ”¾ä¾›åœ°é¢ç«™è®¿é—®çš„æ•°æ®åŒ…ã€‚ <br><br> ä»…éœ€è¦ä¸€å°å¾®å‹è®¡ç®—æœºï¼ˆå¦‚Raspberry Piï¼‰å’Œå‡ ä¸ªè¾…åŠ©ç»„ä»¶ï¼Œå°±å¯ä»¥ä»é£æœºçš„æœºä¸Šå‘å°„æœºæ¥æ”¶åœ¨æˆ‘å®¶ä¸­æ è¿‡çš„æ¶ˆæ¯ã€‚ <br><br> é£æœºçš„ç©ºä¸­ä¿¡å·çœ‹èµ·æ¥åƒæ˜¯ä¸€å›¢çº ç»“çš„ä¿¡æ¯ï¼Œéœ€è¦ç³»ç»ŸåŒ–ã€‚ è¯†åˆ«è¿™äº›æ··ä¹±çš„æ•°æ®æµå°±åƒåœ¨å˜ˆæ‚çš„èšä¼šä¸Šå¬è°ˆè¯ã€‚ å› æ­¤ï¼Œä¸ºäº†æ‰¾åˆ°è®©æˆ‘çš„çŒ«æ‹…å¿ƒçš„é£æœºï¼Œæˆ‘å†³å®šä½¿ç”¨Kafkaå’ŒKSQLçš„ç»„åˆã€‚ <br><br><img src="https://habrastorage.org/webt/om/2c/o0/om2co03tws9dxaml4hsmwrgqzsg.png"><br>  <i>å”¤é†’çŒ«å’Œæ ‘è“æ´¾</i> <br><br><h3>  Raspberry Piæ”¶é›†AZN-Bè¯»æ•° </h3><br> ä¸ºäº†æ”¶é›†è½¦è½½ä¼ è¾“ï¼Œæˆ‘ä½¿ç”¨äº†Raspberry Piå’ŒRTL2832Uï¼Œè¿™æ˜¯ä¸€ä¸ªUSBè°ƒåˆ¶è§£è°ƒå™¨ï¼Œæœ€åˆæ˜¯ä½œä¸ºåœ¨è®¡ç®—æœºä¸Šè§‚çœ‹æ•°å­—ç”µè§†çš„è®¾å¤‡è€Œå‡ºå”®çš„ã€‚ åœ¨Raspberry Piä¸Šï¼Œæˆ‘å®‰è£…äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">dump1090-</a>ä¸€ä¸ªä½¿ç”¨å°å¤©çº¿é€šè¿‡RTL2832Uä»AZN-Væ¥æ”¶æ•°â€‹â€‹æ®çš„ç¨‹åºã€‚ <br><br><img src="https://habrastorage.org/webt/_u/dx/rd/_udxrdhg_e8cvqomnkbfkiuvvgm.png"><br>  <i>æˆ‘çš„Raspberry Piå’ŒRTL2832Uè½¯ä»¶æ— çº¿ç”µ</i> <br><br><h3> å°†AZN-Bä¿¡å·è½¬æ¢ä¸ºKafkaä¸»é¢˜ </h3><br> ç°åœ¨ï¼Œæˆ‘å·²ç»æ”¶åˆ°äº†åŸå§‹çš„AZN-Bä¿¡å·æµï¼Œæˆ‘ä»¬åº”è¯¥æ³¨æ„æµé‡ã€‚  Raspberry Piæ²¡æœ‰è¶³å¤Ÿçš„èƒ½åŠ›è¿›è¡Œä¸¥è‚ƒçš„è®¡ç®—ï¼Œå› æ­¤æˆ‘ä¸å¾—ä¸å°†æ•°æ®å¤„ç†è½¬ç§»åˆ°æˆ‘åœ¨Kafkaä¸Šçš„æœ¬åœ°é›†ç¾¤ã€‚ <br><br><img src="https://habrastorage.org/webt/ar/27/xb/ar27xbolmidgiscrmspvto0vgnk.png"><br><br> æ”¶åˆ°çš„æ¶ˆæ¯åˆ†ä¸º<i>ä½ç½®</i> <i>æ¶ˆæ¯</i>æˆ–<i>æœ‰å…³æ¿æ ‡è¯†çš„æ¶ˆæ¯</i> ã€‚ è¯¥ä½ç½®çœ‹èµ·æ¥åƒæ˜¯ä»¥ä¸‹å½¢å¼çš„æ¶ˆæ¯ï¼š <i>â€œ 7c6db8æ¿åœ¨åæ ‡-33.8,151.0å¤„ä»¥6,250è‹±å°ºçš„é«˜åº¦é£è¡Œ</i> ã€‚ <i>â€</i> æœ‰å…³æ¿æ ‡è¯†çš„ä¿¡æ¯çœ‹èµ·æ¥åƒï¼š <i>â€œæ¿7c451cæ²¿ç€QJE1726è·¯çº¿é£è¡Œ</i> ã€‚ <i>â€</i> <br><br> æˆ‘çš„Raspberry Piçš„ä¸€ä¸ªå°å‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Pythonè„šæœ¬</a>å…±äº«æ‰€æœ‰ä¼ å…¥çš„AZN-Bæ¶ˆæ¯ã€‚ æˆ‘ä½¿ç”¨Confluent Rest Proxyä»£ç†å°†Raspberry Piä¸­çš„æ•°æ®åˆ†å‘åˆ°Kafkaä¸Šçš„<b>location-topic</b>å’Œ<b>ident-topic</b>ä¸»é¢˜ã€‚ ä»£ç†æœåŠ¡å™¨ä¸ºKafkaé›†ç¾¤æä¾›äº†RESTfulæ¥å£ï¼Œä½¿ç”¨Piä¸Šçš„ç®€å•RESTè°ƒç”¨å¯ä»¥è½»æ¾åˆ›å»ºæ¶ˆæ¯ã€‚ <br><br><img src="https://habrastorage.org/webt/6d/ox/35/6dox35w1d-qrzyaiowi80kxtglk.png"><br><br> æˆ‘æƒ³äº†è§£å“ªäº›é£æœºé£è¿‡æˆ‘çš„å±‹é¡¶ä»¥åŠå“ªäº›è·¯çº¿ã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">OpenFlights</a>æ•°æ®åº“ä½¿<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‚¨</a>å¯ä»¥å°†æœºåœºä»£ç ï¼ˆä¾‹å¦‚å›½é™…æ°‘èˆªç»„ç»‡ï¼ˆICAOï¼‰åˆ†é…çš„7C6DB8ï¼‰ä¸é£æœºç±»å‹ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºæ³¢éŸ³737ï¼‰è¿›è¡Œæ¯”è¾ƒã€‚ æˆ‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°†</a>åœ°å›¾<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ•°æ®ä¸Šä¼ </a>åˆ°<b>icaoé£æœº</b>ä¸»é¢˜ã€‚ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">KSQL</a>æä¾›äº†ä¸€ä¸ªâ€œ SQLå¼•æ“â€ï¼Œä½¿æ‚¨å¯ä»¥å®æ—¶å¤„ç†Apache Kafkaä¸»é¢˜ä¸Šçš„æ•°æ®ã€‚ ä¾‹å¦‚ï¼Œè¦æ‰¾åˆ°æ¿è½½ä»£ç 7C6DB8ï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä»¥ä¸‹æŸ¥è¯¢ï¼š <br><br><pre><code class="plaintext hljs">CREATE TABLE icao_to_aircraft WITH (KAFKA_TOPIC='ICAO_TO_AIRCRAFT_REKEY', VALUE_FORMAT='AVRO', KEY='ICAO'); ksql&gt; SELECT manufacturer, aircraft, registration \ FROM icao_to_aircraft \ WHERE icao = '7C6DB8'; Boeing | B738 | VH-VYI</code> </pre> <br> åŒæ ·ï¼Œåœ¨<b>å‘¼å·è¯¦ç»†ä¿¡æ¯</b>ä¸»é¢˜ä¸­ï¼Œæˆ‘ä¸Šä¼ äº†å‘¼å·ï¼ˆå³QFA563ï¼Œè¿™æ˜¯æ¾³èˆªä»å¸ƒé‡Œæ–¯ç­é£å¾€æ‚‰å°¼çš„èˆªç­ï¼‰ã€‚ <br><br><pre> <code class="plaintext hljs">CREATE TABLE callsign_details WITH (KAFKA_TOPIC='CALLSIGN_DETAILS_REKEY', VALUE_FORMAT='AVRO', KEY='CALLSIGN'); ksql&gt; SELECT operatorname, fromairport, toairport \ FROM callsign_details \ WHERE callsign = 'QFA563'; Qantas | Brisbane | Sydney</code> </pre> <br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹<b>ä½ç½®ä¸»é¢˜</b>æ•°æ®æµã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°æºæºä¸æ–­çš„æœ‰å…³é£è¡Œé£æœºä½ç½®çš„æ¶ˆæ¯æµã€‚ <br><br><pre> <code class="plaintext hljs">kafka-avro-console-consumer --bootstrap-server localhost:9092 --property --topic location-topic {"ico":"7C6DB8","height":"6250","location":"-33.807724,151.091495"}</code> </pre> <br>  KSQLæŸ¥è¯¢å°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><pre> <code class="plaintext hljs">ksql&gt; SELECT TIMESTAMPTOSTRING(rowtime, 'yyyy-MM-dd HH:mm:ss'), \ ico, height, location \ FROM location_stream \ WHERE ico = '7C6DB8'; 2018-09-19 07:13:33 | 7C6DB8 | 6250.0 | -33.807724,151.091495</code> </pre> <br><h3>  KSQLï¼šæµåè°ƒ... </h3><br>  KSQLçš„çœŸæ­£ä»·å€¼åœ¨äºèƒ½å¤Ÿå°†ä½ç½®æ•°æ®çš„ä¼ å…¥æµä¸ä¸»é¢˜çš„æºæ•°æ®ç›¸ç»“åˆï¼ˆè¯·å‚é˜…<a href="">03_ksql.sql</a> ï¼‰ï¼Œå³åœ¨åŸå§‹æ•°æ®æµä¸­æ·»åŠ æœ‰ç”¨çš„ä¿¡æ¯ã€‚ è¿™éå¸¸ç±»ä¼¼äºä¼ ç»Ÿæ•°æ®åº“ä¸­çš„â€œå·¦è”æ¥â€ã€‚ ç»“æœæ˜¯åˆ›å»ºäº†å¦ä¸€ä¸ªKafkaä¸»é¢˜ï¼Œè€Œæ²¡æœ‰ä¸€è¡ŒJavaä»£ç ï¼ <br><br> æº&gt;åˆ›å»ºæµlocation_and_details_stream AS \ <br> é€‰æ‹©l.icoï¼Œl.heightï¼Œl.locationï¼Œt.aircraft \ <br> ä»location_stream l \ <br> å·¦è”æ¥icao_to_aircraft t ON l.ico = t.icao; <br> æ­¤å¤–ï¼Œæ‚¨è¿˜ä¼šæ”¶åˆ°ä¸€ä¸ªKSQLæŸ¥è¯¢ã€‚ æ•°æ®æµå°†å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="plaintext hljs">ksql&gt; SELECT TIMESTAMPTOSTRING(rowtime, 'yy-MM-dd HH:mm:ss') \ , manufacturer \ , aircraft \ , registration \ , height \ , location \ FROM location_and_details_stream; 18-09-27 09:53:28 | Boeing | B738 | VH-YIA | 7225 | -33.821,151.052 18-09-27 09:53:31 | Boeing | B738 | VH-YIA | 7375 | -33.819,151.049 18-09-27 09:53:32 | Boeing | B738 | VH-YIA | 7425 | -33.818,151.048</code> </pre> <br> æ­¤å¤–ï¼Œæˆ‘ä»¬å¯ä»¥å°†<b>callsign</b>è¾“å…¥æµä¸å›ºå®šçš„<b>callsign_details</b>ä¸»é¢˜ç»“åˆä½¿ç”¨ï¼š <br><br><pre> <code class="plaintext hljs">CREATE STREAM ident_callsign_stream AS \ SELECT i.ico \ , c.operatorname \ , c.callsign \ , c.fromairport \ , c.toairport \ FROM ident_stream i \ LEFT JOIN callsign_details c ON i.indentification = c.callsign; ksql&gt; SELECT TIMESTAMPTOSTRING(rowtime, 'yy-MM-dd HH:mm:ss') \ , operatorname \ , callsign \ , fromairport \ , toairport \ FROM ident_callsign_stream ; 18-09-27 13:33:19 | Qantas | QFA926 | Sydney | Cairns 18-09-27 13:44:11 | China Eastern | CES777 | Kunming | Sydney 18-09-27 14:00:54 | Air New Zealand | ANZ110 | Sydney | Auckland</code> </pre> <br> ç°åœ¨æˆ‘ä»¬æœ‰ä¸¤ä¸ªæœ‰ç”¨çš„ä¸»é¢˜ï¼š <br><br><ol><li>  <b>location_and_details_stream</b> ï¼Œæä¾›æœ‰å…³é£æœºä½ç½®å’Œé€Ÿåº¦çš„æ›´æ–°ä¿¡æ¯æµï¼› </li><li>  <b>ident_callsign_stream</b> ï¼Œå®ƒæè¿°èˆªç­çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬èˆªç©ºå…¬å¸å’Œç›®çš„åœ°ã€‚ </li></ol><br> é€šè¿‡è¿™äº›ä¸æ–­æ›´æ–°çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€äº›å‡ºè‰²çš„æ¦‚è¿°é¢æ¿ã€‚ æˆ‘ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kafka Connectå°†</a> KSQLå¡«å……çš„Kafkaä¸»é¢˜ä¸Šä¼ åˆ°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Elasticsearch</a> ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>ä¸ºå®Œæ•´è„šæœ¬ï¼‰ã€‚ <br><br><h3>  Kibanaä»ªè¡¨æ¿ </h3><br> è¿™æ˜¯ä¸€ä¸ªæ¦‚è§ˆé¢æ¿çš„ç¤ºä¾‹ï¼Œæ˜¾ç¤ºäº†é£æœºåœ¨åœ°å›¾ä¸Šçš„ä½ç½®ã€‚ æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥æŸ¥çœ‹èˆªç©ºå…¬å¸çš„å›¾è¡¨ï¼Œèˆªç­é«˜åº¦çš„å›¾è¡¨ä»¥åŠä¸»è¦ç›®çš„åœ°çš„è¯äº‘ã€‚ çƒ­å›¾æ˜¾ç¤ºäº†é£æœºé›†ä¸­çš„åŒºåŸŸï¼Œå³å™ªå£°æ°´å¹³æœ€é«˜çš„åŒºåŸŸã€‚ <br><br><img src="https://habrastorage.org/webt/mh/fz/sy/mhfzsyskws6uoe5s1-b6m9sudzc.gif"><br><br><h3> å›åˆ°çŒ« </h3><br> ä»Šå¤©çŒ«åœ¨æ—©ä¸Š6ç‚¹å·¦å³æŠŠæˆ‘å«é†’ã€‚  KSQLå¯ä»¥å¸®åŠ©æˆ‘æ‰¾åˆ°è¿™æ¬¡é£è¡Œåœ¨æˆ‘çš„æˆ¿å­ä¸Šæ–¹ï¼Œä¸åˆ°3500è‹±å°ºçš„é«˜åº¦ä¸Šçš„é£æœºå—ï¼Ÿ <br><br><pre> <code class="plaintext hljs">select timestamptostring(rowtime, 'yyyy-MM-dd HH:mm:ss') , manufacturer , aircraft , registration , height from location_and_details_stream where height &lt; 3500 and rowtime &gt; stringtotimestamp('18-09-27 06:10', 'yy-MM-dd HH:mm') and rowtime &lt; stringtotimestamp('18-09-27 06:20', 'yy-MM-dd HH:mm'); 2018-09-27 06:15:39 | Airbus | A388 | A6-EOD | 2100.0 2018-09-27 06:15:58 | Airbus | A388 | A6-EOD | 3050.0</code> </pre> <br> å¤ªæ£’äº†ï¼ æˆ‘å¯ä»¥åœ¨æ—©ä¸Š6:15åœ¨å±‹é¡¶ä¸Šå‘ç°ä¸€æ¶é£æœºã€‚ äº‹å®è¯æ˜ï¼Œé›ªèŠ±å·²è¢«é£å¾€è¿ªæ‹œçš„ç©ºä¸­å®¢è½¦A380ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼Œå·¨å¤§çš„ç­è½®ï¼‰å”¤é†’äº†ã€‚ <br><br> åªéœ€å‡ å¤©çš„æ—¶é—´ï¼Œæ‚¨å°±å¯ä»¥ä½¿ç”¨å¸¦æœ‰KSQLçš„æµå¤„ç†ç³»ç»Ÿã€‚ è€Œä¸”ï¼Œå®ƒä½¿æ‚¨å¯ä»¥å¿«é€Ÿæ‰¾åˆ°æœ‰è¶£çš„æ•°æ®äº‹ä»¶ã€‚ å°½ç®¡Snowflakeå¯èƒ½å¯¹æ­¤è¡¨ç¤ºæ€€ç–‘ã€‚ <br><br><img src="https://habrastorage.org/webt/vs/vf/yp/vsvfypatv-grib-_dstwrco_r2y.png"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442876/">https://habr.com/ru/post/zh-CN442876/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442864/index.html">ä½ çš„ä¸»äººå‡ å²ï¼Ÿ</a></li>
<li><a href="../zh-CN442866/index.html">ç»è¿‡æ•°åå¹´çƒ¹é¥ªå®éªŒè®­ç»ƒçš„AIåˆ›é€ äº†æ–°èœ</a></li>
<li><a href="../zh-CN442868/index.html">ç®€è¦ä»‹ç»æ•°æ®ä¸­å¿ƒçš„å†·å´ç³»ç»Ÿã€‚ åˆ©å¼Š</a></li>
<li><a href="../zh-CN442870/index.html">æœ¬å‘¨æœ€ä½³Angular-æ‘˜è¦2ï¼ˆ1æœˆ26æ—¥è‡³3æœˆ7æ—¥ï¼‰</a></li>
<li><a href="../zh-CN442872/index.html">æˆ‘å¦‚ä½•åœ¨Androidä¿æŠ¤ä¸­æ‰¾åˆ°å¤æ´»èŠ‚å½©è›‹ï¼Œå´æ²¡æœ‰åœ¨Googleæ‰¾åˆ°å·¥ä½œ</a></li>
<li><a href="../zh-CN442880/index.html">è™šæ‹Ÿæ£€æŸ¥ç‚¹ï¼šè®¾ç½®æ£€æŸ¥è¡¨</a></li>
<li><a href="../zh-CN442882/index.html">[è§†é¢‘]â€œä¸éœ€è¦æ–‡å­—â€å’Œå¦å¤–ä¸‰ä¸ªé¡¹ç›®ç®¡ç†æ„æƒ³</a></li>
<li><a href="../zh-CN442884/index.html">æŠ€æœ¯å·²ç»ä½¿æ‚¨å¯ä»¥ä¸æ±½è½¦å¯¹è¯</a></li>
<li><a href="../zh-CN442886/index.html">Sketch + Node.jsï¼šä¸ºè®¸å¤šå¹³å°å’Œå“ç‰Œç”Ÿæˆå›¾æ ‡ã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN442888/index.html">åœ¨çº¯CSSä¸Šè‡ªå®šä¹‰é€‰æ‹©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>