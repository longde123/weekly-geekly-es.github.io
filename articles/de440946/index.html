<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå®Ô∏è üë©üèΩ‚Äçüéì üòú Rollup: Sie k√∂nnen bereits Anwendungen erstellen üë≤üèΩ üïë ü•†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rollup ist eine Javascript-Anwendung und ein Builder f√ºr Bibliotheken der neuen Generation. Viele Leute kennen ihn seit langem als vielversprechenden ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Rollup: Sie k√∂nnen bereits Anwendungen erstellen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440946/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Rollup</a> ist eine Javascript-Anwendung und ein Builder f√ºr Bibliotheken der neuen Generation.  Viele Leute kennen ihn seit langem als vielversprechenden Sammler, der sich gut zum Erstellen von Bibliotheken eignet, aber schlecht zum Erstellen von Anwendungen.  Mit der Zeit entwickelt sich das Produkt jedoch aktiv weiter. <br><br>  Ich habe es zum ersten Mal Anfang 2017 versucht.  Ich mochte es sofort, weil es die Kompilierung in ES2015, das Baumshaking, das Fehlen von Modulen in der Assembly und nat√ºrlich eine einfache Konfiguration unterst√ºtzte.  Aber dann war es ein Rohprodukt mit einer kleinen Anzahl von Plugins und sehr eingeschr√§nkter Funktionalit√§t, und ich entschied mich, es f√ºr sp√§ter zu belassen und baute weiter √ºber browserify.  Der zweite Versuch war im Jahr 2018, als die Community, die Plugins und die Funktionalit√§t bereits deutlich √ºbertroffen wurden, bei einigen Funktionen, einschlie√ülich Watcher, jedoch noch keine Qualit√§t bestand.  Und schlie√ülich k√∂nnen wir Anfang 2019 mit Sicherheit sagen: Mit Hilfe von Rollup k√∂nnen Sie einfach und bequem moderne Anwendungen erstellen. <br><a name="habracut"></a><br>  Um die Vorteile zu verstehen, gehen wir die wichtigsten Funktionen durch und vergleichen sie mit Webpack (bei Browserify ist die Situation dieselbe). <br><br><h3>  Einfache Konfiguration </h3><br>  Was sofort auff√§llt, ist eine sehr einfache und verst√§ndliche Konfiguration: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-comment"><span class="hljs-comment">// todo:     ], }];</span></span></code> </pre> <br>  Geben Sie <i>rollup -c</i> in das cosnol ein und Ihr Bundle beginnt sich zusammenzusetzen.  F√ºr den Export k√∂nnen Sie eine Reihe von Bundles zum Zusammenstellen bereitstellen, z. B. wenn Sie Polyphile, mehrere Programme, Worker usw. separat sammeln.  Bei der Eingabe k√∂nnen Sie ein Array von Dateien senden, dann werden Chunks gesammelt.  In der Ausgabe k√∂nnen Sie ein Array von Ausgabedateien einspeisen und zu verschiedenen modularen Systemen zusammenf√ºgen: iife, commonjs, umd. <br><br><h3>  Iife Unterst√ºtzung </h3><br>  Unterst√ºtzung f√ºr die Montage in die Funktion selbst ohne Module aufgerufen.  Nehmen wir zum Verst√§ndnis das bekannteste Programm: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>);</code> </pre><br>  Fahren Sie es durch Rollup in das iife-Format und sehen Sie das Ergebnis: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>); }());</code> </pre><br>  Die Ausgabe ist ein sehr kompakter Code, nur 69 Bytes.  Wenn Sie den Vorteil immer noch nicht verstehen, kompiliert Webpack / Browserify den folgenden Code: <br><br><div class="spoiler">  <b class="spoiler_title">Webpack-Build-Ergebnis</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/******/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' }); /******/ } /******/ Object.defineProperty(exports, '__esModule', { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, 'default', { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module['default']; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, 'a', getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = ""; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, exports) { console.log("Hello, world!"); /***/ }) /******/ ]);</span></span></code> </pre><br></div></div><br>  Wie Sie sehen, stellte sich heraus, dass Webpack / Browserify nur in CommonJS erstellt werden kann.  Der gro√üe Vorteil von IIFE ist seine Kompaktheit und das Fehlen von Konflikten zwischen verschiedenen Versionen von CommonJS.  Es gibt jedoch einen Nachteil: Sie k√∂nnen keine Chunks sammeln. F√ºr diese m√ºssen Sie zu CommonJS wechseln. <br><br><h3>  Zusammenstellung in ES2015 </h3><br>  Das Rollup "Sammler der n√§chsten Generation" wurde 2016 f√ºr die Montage in ES2015 erhalten.  Und bis Ende 2018 war es der einzige Sammler, der wusste, wie man das macht. <br>  Zum Beispiel, wenn Sie den Code nehmen: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestA</span></span></span><span class="hljs-class"> </span></span>{ getData(){<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"A"</span></span>} } <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestB().getData());</code> </pre><br>  und durch Rollup fahren, dann bekommen wir am Ausgang das gleiche.  Und ja!  Zu Beginn des Jahres 2019 k√∂nnen bereits <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">87% der</a> Browser es nativ ausf√ºhren. <br><br>  Im Jahr 2016 sah es dann nach einem Durchbruch aus, da es eine gro√üe Anzahl von Anwendungen gab, die keine Unterst√ºtzung f√ºr alte Browser ben√∂tigten: Administratoren, Kioske, keine Webanwendungen, und es gab keine Build-Tools f√ºr sie.  Und jetzt k√∂nnen wir mit Rollup mehrere Bundles in einem Durchgang sammeln, in es3, es5, es2015, exnext und je nach Browser das erforderliche herunterladen. <br><br>  Ein gro√üer Vorteil von ES2015 ist auch die Gr√∂√üe und Ausf√ºhrungsgeschwindigkeit.  Aufgrund des Fehlens der Transpilierung in eine niedrigere Schicht erweist sich der Code als viel kompakter, und aufgrund des Fehlens eines von Transpilern erzeugten Hilfscodes funktioniert dieser Code auch dreimal schneller (gem√§√ü meinen subjektiven Tests). <br><br><h3>  Baum zittern </h3><br>  Dies ist ein Rollup-Chip, er hat ihn erfunden!  Webpack hat viele Jahre hintereinander versucht, es zu implementieren, aber erst mit Version 4 begann etwas zu funktionieren.  Browserify geht es sehr schlecht. <br>  Was f√ºr ein Tier ist das?  Nehmen wir als Beispiel die folgenden zwei Dateien: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// module.ts export class TestA { getData(){return "A"} } export class TestB { getData(){return "B"} } // index.ts import { TestB } from './module'; const test = new TestB(); console.log("Hello, world!", test.getData());</span></span></code> </pre><br>  Laufen Sie durch Rollup und erhalten Sie: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestB</span></span></span><span class="hljs-class"> </span></span>{ getData() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"B"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> test = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestB(); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">"Hello, world!"</span></span>, test.getData()); }());</code> </pre><br>  Infolge von TreeShaking wurde toter Code bereits beim Aufl√∂sen von Abh√§ngigkeiten verworfen.  Dank dessen, was Rollup-Baugruppen viel kompakter werden.  Nun wollen wir sehen, was Webpack generiert: <br><br><div class="spoiler">  <b class="spoiler_title">Webpack-Build-Ergebnis</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/******/</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">modules</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// webpackBootstrap /******/ // The module cache /******/ var installedModules = {}; /******/ /******/ // The require function /******/ function __webpack_require__(moduleId) { /******/ /******/ // Check if module is in cache /******/ if(installedModules[moduleId]) { /******/ return installedModules[moduleId].exports; /******/ } /******/ // Create a new module (and put it into the cache) /******/ var module = installedModules[moduleId] = { /******/ i: moduleId, /******/ l: false, /******/ exports: {} /******/ }; /******/ /******/ // Execute the module function /******/ modules[moduleId].call(module.exports, module, module.exports, __webpack_require__); /******/ /******/ // Flag the module as loaded /******/ module.l = true; /******/ /******/ // Return the exports of the module /******/ return module.exports; /******/ } /******/ /******/ /******/ // expose the modules object (__webpack_modules__) /******/ __webpack_require__.m = modules; /******/ /******/ // expose the module cache /******/ __webpack_require__.c = installedModules; /******/ /******/ // define getter function for harmony exports /******/ __webpack_require__.d = function(exports, name, getter) { /******/ if(!__webpack_require__.o(exports, name)) { /******/ Object.defineProperty(exports, name, { enumerable: true, get: getter }); /******/ } /******/ }; /******/ /******/ // define __esModule on exports /******/ __webpack_require__.r = function(exports) { /******/ if(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) { /******/ Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' }); /******/ } /******/ Object.defineProperty(exports, '__esModule', { value: true }); /******/ }; /******/ /******/ // create a fake namespace object /******/ // mode &amp; 1: value is a module id, require it /******/ // mode &amp; 2: merge all properties of value into the ns /******/ // mode &amp; 4: return value when already ns object /******/ // mode &amp; 8|1: behave like require /******/ __webpack_require__.t = function(value, mode) { /******/ if(mode &amp; 1) value = __webpack_require__(value); /******/ if(mode &amp; 8) return value; /******/ if((mode &amp; 4) &amp;&amp; typeof value === 'object' &amp;&amp; value &amp;&amp; value.__esModule) return value; /******/ var ns = Object.create(null); /******/ __webpack_require__.r(ns); /******/ Object.defineProperty(ns, 'default', { enumerable: true, value: value }); /******/ if(mode &amp; 2 &amp;&amp; typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key)); /******/ return ns; /******/ }; /******/ /******/ // getDefaultExport function for compatibility with non-harmony modules /******/ __webpack_require__.n = function(module) { /******/ var getter = module &amp;&amp; module.__esModule ? /******/ function getDefault() { return module['default']; } : /******/ function getModuleExports() { return module; }; /******/ __webpack_require__.d(getter, 'a', getter); /******/ return getter; /******/ }; /******/ /******/ // Object.prototype.hasOwnProperty.call /******/ __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); }; /******/ /******/ // __webpack_public_path__ /******/ __webpack_require__.p = ""; /******/ /******/ /******/ // Load entry module and return exports /******/ return __webpack_require__(__webpack_require__.s = 0); /******/ }) /************************************************************************/ /******/ ([ /* 0 */ /***/ (function(module, __webpack_exports__, __webpack_require__) { "use strict"; __webpack_require__.r(__webpack_exports__); // CONCATENATED MODULE: ./src/module.ts class TestA { getData() { return "A"; } } class TestB { getData() { return "B"; } } // CONCATENATED MODULE: ./src/index.ts const test = new TestB(); console.log("Hello, world!", test.getData()); /***/ }) /******/ ]);</span></span></code> </pre><br></div></div><br>  Und hier k√∂nnen wir zwei Schlussfolgerungen ziehen.  Das erste Webpack Ende 2018 lernte noch, ES2015 zu verstehen und zu bauen.  Der zweite, absolut vollst√§ndige Code f√§llt in die Assembly, aber der tote Code wird bereits mit dem Terser-Minifier (Gabel und Nachfolger von UglifyES) entfernt.  Als Ergebnis dieses Ansatzes, dickere B√ºndel als Rollup, auf einem Habr bereits viel dar√ºber geschrieben, werden wir nicht damit aufh√∂ren. <br><br><h3>  Plugins </h3><br>  Aus einer Rollup-Box kann nur nackter ES2015 + zusammengebaut werden.  Um ihm zus√§tzliche Funktionen beizubringen, z. B. das Verbinden von CommonJs, Typoskript-Modulen, das Laden von HTML und SCSS usw., m√ºssen Sie Plugins verbinden. <br><br>  Dies geschieht ganz einfach: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nodeResolve <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-node-resolve'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> commonJs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-commonjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typeScript <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-typescript2'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> postcss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-postcss'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> html <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-html'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> visualizer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-visualizer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {sizeSnapshot} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"rollup-plugin-size-snapshot"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> {terser} <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-terser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.r.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ nodeResolve(), <span class="hljs-comment"><span class="hljs-comment">//   node commonJs(), //   commonjs postcss(), //   postcc,    scss  less html(), //  html  typeScript({tsconfig: "tsconfig.json"}), //  typescript sizeSnapshot(), //      terser(), //    ES2015+,    UglifyES visualizer() //   ] }];</span></span></code> </pre><br>  So einfach ist ein Plug-In in einem Wort verbunden.  Diese Konfiguration kann jede komplexe Anwendung erfassen und generiert sogar eine Bundle-Analyse am Ausgang. <br><br><h3>  Zusammenfassung </h3><br>  Und jetzt, bewaffnet mit neuem Wissen, erstellen wir eine Konfiguration, die separat Polyphile, eine separate Anwendung f√ºr alte und neue Browser, einen Service-Worker f√ºr pwa und einen Web-Worker f√ºr komplexe Berechnungen im Brounund sammelt. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> nodeResolve <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-node-resolve'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> commonJs <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-commonjs'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typeScript <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-typescript2'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> postcss <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-postcss'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> html <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-html'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> visualizer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-visualizer'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { sizeSnapshot } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">"rollup-plugin-size-snapshot"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { terser } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'rollup-plugin-terser'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> getPlugins = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">options</span></span></span><span class="hljs-function">) =&gt;</span></span> [ nodeResolve(), commonJs(), postcss(), html(), typeScript({ <span class="hljs-attr"><span class="hljs-attr">tsconfig</span></span>: <span class="hljs-string"><span class="hljs-string">"tsconfig.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">tsconfigOverride</span></span>: { <span class="hljs-attr"><span class="hljs-attr">compilerOptions</span></span>: { <span class="hljs-string"><span class="hljs-string">"target"</span></span>: options.target } } }), sizeSnapshot(), terser(), visualizer() ]; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> [{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/polyfills.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/polyfills.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.next.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"esnext"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.es5.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/index.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/index.es3.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es3"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/serviceworker.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/serviceworker.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) },{ <span class="hljs-attr"><span class="hljs-attr">input</span></span>: <span class="hljs-string"><span class="hljs-string">'src/webworker.ts'</span></span>, <span class="hljs-attr"><span class="hljs-attr">output</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">file</span></span>: <span class="hljs-string"><span class="hljs-string">'dist/webworker.min.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">format</span></span>: <span class="hljs-string"><span class="hljs-string">'iife'</span></span> }], <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: getPlugins({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-string"><span class="hljs-string">"es5"</span></span> }) }];</code> </pre><br><br>  Alle einfachen Bundles und schnellen Webanwendungen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440946/">https://habr.com/ru/post/de440946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440932/index.html">Ein bisschen √ºber IT Business Intelligence</a></li>
<li><a href="../de440938/index.html">Warum brauchte Google ein Wissensdiagramm?</a></li>
<li><a href="../de440940/index.html">Redux - √úberarbeitung der Reduzierlogik und -aktionen</a></li>
<li><a href="../de440942/index.html">BYD k√ºndigt Umsatzwachstum f√ºr Plug-in-Elektrofahrzeuge an</a></li>
<li><a href="../de440944/index.html">So schreiben Sie schnell eine Website oder Webanwendung und lassen sich nicht von Sammlern einfangen</a></li>
<li><a href="../de440948/index.html">Machen Sie sich mit Anmeldeformularen nicht schlau</a></li>
<li><a href="../de440950/index.html">Chrome Audit 500: Teil 1. Landung</a></li>
<li><a href="../de440954/index.html">Lebenszyklus eines Artikels √ºber Habr√©: Wir schreiben einen Habraparser. Teil zwei</a></li>
<li><a href="../de440956/index.html">Alternativer Nomaden-Orchestrator auf dem Desktop</a></li>
<li><a href="../de440958/index.html">Wie ich versucht habe, eine Kartensuche nach Treibern zu reparieren. Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>