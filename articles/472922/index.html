<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèπ üßúüèº üë©üèæ‚Äçü§ù‚Äçüë®üèª Programador defensor m√°s fuerte que la entrop√≠a ü§∑ ‚ôìÔ∏è üïß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬© Dragon Ball. Goku 

 El programador defensor en cualquier momento y en cualquier parte del c√≥digo espera la aparici√≥n de posibles problemas y escrib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programador defensor m√°s fuerte que la entrop√≠a</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/472922/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/bu/kn/5n/bukn5ndtci4czpuwtbu3nsihkyi.jpeg"></div>  <i>¬© Dragon Ball.</i>  <i>Goku</i> <br><br>  El programador defensor en cualquier momento y en cualquier parte del c√≥digo espera la aparici√≥n de posibles problemas y escribe el c√≥digo de tal manera que se proteja de ellos por adelantado.  Y si el problema no se puede defender, al menos aseg√∫rese de que sus consecuencias e impacto en los usuarios sean m√≠nimos. <br><br>  Recuerdo el efecto <i>FlashForward</i> de los √©xitos de taquilla de Hollywood cuando el protagonista ve la cat√°strofe inminente y se mantiene extremadamente tranquilo, porque sabe de antemano que suceder√° y tiene protecci√≥n contra √©l.  La idea detr√°s de la programaci√≥n defensiva es protegerse de los problemas que son dif√≠ciles o imposibles de prever.  Un programador de seguridad espera que se produzcan errores en cualquier parte del sistema y en cualquier momento para evitarlos antes de que causen da√±os.  Sin embargo, el objetivo no es crear un sistema que nunca falle, sigue siendo imposible.  El objetivo es crear un sistema que se <b>bloquee con gracia</b> en caso de <b>cualquier</b> problema imprevisto. <br><br>  Comprendamos con m√°s detalle lo que se incluye en el concepto de "caer con gracia". <br><br><ul><li>  <b>Cae r√°pido.</b>  En caso de un error inesperado, todas las operaciones deben completarse de inmediato, especialmente si los c√°lculos posteriores son dif√≠ciles o pueden conducir a la corrupci√≥n de datos. </li><li>  <b>Caer prolijamente.</b>  Si se produce un error, el programa debe liberar todos los recursos, eliminar bloqueos, eliminar archivos temporales y medio grabados, cerrar conexiones.  Espere a que se completen las operaciones cr√≠ticas, cuya interrupci√≥n puede conducir a resultados impredecibles.  O una forma segura de bloquear estas operaciones. </li><li>  <b>Cayendo clara y bellamente.</b>  Si algo se rompe, el mensaje de error debe ser simple, conciso y contener detalles importantes del contexto del sistema donde ocurri√≥ el error.  Esto ayudar√° al equipo responsable del sistema a resolver el problema lo m√°s r√°pido posible y solucionarlo. </li></ul><a name="habracut"></a><br>  Pero puede que tengas una pregunta. <br><br>  ¬øPor qu√© perder el tiempo en los problemas que puedan surgir en el futuro?  <b>Ahora</b> no est√°n all√≠, el c√≥digo funciona simplemente perfecto.  Adem√°s, es posible que nunca ocurran problemas.  Despu√©s de todo, ¬°los profesionales no hacen ingenier√≠a por el bien de la ingenier√≠a ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">YAGNI</a> - ¬°No la necesitar√°s!) <br><br><h2>  Lo principal es el pragmatismo. </h2><br>  Andrew Hunt en el libro "Programador-pragm√°tico" da la siguiente definici√≥n de programaci√≥n defensiva: " <b>paranoia pragm√°tica</b> ". <br><br>  Protege tu c√≥digo de: <br><br><ul><li>  errores propios </li><li>  errores de otras personas; </li><li>  errores y fallas en otros sistemas con los cuales est√° integrado; </li><li>  errores de hierro, entornos y plataformas en los que funciona su aplicaci√≥n. </li></ul><br>  Analicemos varios m√©todos t√°cticos y estrat√©gicos de programaci√≥n defensiva, los cuales crear√°n un sistema confiable y predecible que sea resistente a fallas arbitrarias. <br><br>  Algunos consejos pueden parecer "capitanes", pero en la pr√°ctica, muchos desarrolladores ni siquiera los siguen.  Pero si se adhiere a pr√°cticas y enfoques simples, esto aumentar√° significativamente la estabilidad de su sistema. <br><br><h2>  No conf√≠es en nadie </h2><br>  Los datos del usuario no son confiables por defecto.  Los usuarios a menudo malinterpretan lo que nos parece obvio (como desarrolladores de sistemas).  Espere una entrada incorrecta y siempre verif√≠quela. <br><br>  Tambi√©n verifique la cantidad de entrada.  Puede ser que el usuario env√≠e demasiados.  Al mismo tiempo, desde el punto de vista de la l√≥gica empresarial, este es el escenario correcto.  Pero puede conducir a un procesamiento demasiado largo.  ¬øQu√© se puede hacer con esto?  Por ejemplo, ejec√∫telo de forma as√≠ncrona, si la cantidad de datos de entrada excede un cierto umbral y los detalles de la empresa le permiten procesar los datos en segundo plano. <br><br>  La configuraci√≥n de la aplicaci√≥n (por ejemplo, los archivos de configuraci√≥n) tambi√©n est√° sujeta a la aparici√≥n de datos incorrectos en ellos.  A menudo, la configuraci√≥n del programa se almacena en JSON, YAML, XML, INI y otros formatos.  Dado que todos estos son archivos de texto, uno deber√≠a esperar que tarde o temprano alguien cambie algo en ellos, y su programa comenzar√° a funcionar incorrectamente.  Puede ser un usuario final o alguien de su equipo. <br><br>  Bases de datos, archivos, almacenamientos centralizados de configuraciones, registro: todas estas personas pueden acceder a todos estos lugares y, tarde o temprano, cambiar√°n algo all√≠ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ley de Murphy</a> ). <br><br><h2>  Entrada de basura ‚Üí entrada de basura </h2><br>  Las entradas que pasan la validaci√≥n y comienzan a procesarse deben estar limpias si desea que su c√≥digo haga exactamente lo que espera de √©l. <br><br>  Sin embargo, es una buena pr√°ctica hacer verificaciones de validaci√≥n de datos adicionales, incluso cuando ya han comenzado a procesarse.  En lugares cr√≠ticos (facturaci√≥n, autorizaci√≥n, datos personales y confidenciales, etc.) esto es casi un requisito obligatorio.  Esto es necesario para que, en caso de errores en el c√≥digo o problemas con el validador de datos de entrada, detenga el flujo de ejecuci√≥n lo m√°s r√°pido posible.  Es dif√≠cil hacer una validaci√≥n de calidad con la comprobaci√≥n de todos los posibles escenarios de error, por lo que puede utilizar m√©todos m√°s simples para validar que el programa todav√≠a se est√° ejecutando correctamente: afirmaciones y excepciones. <br><br>  La paranoia saludable es un rasgo caracter√≠stico de todos los desarrolladores profesionales.  Pero es muy importante buscar el equilibrio √≥ptimo y comprender cu√°ndo la soluci√≥n ya es lo suficientemente buena. <br><br><h2>  Configuraciones separadas alrededor de los entornos. </h2><br>  Una causa com√∫n de problemas es la separaci√≥n insuficiente de configuraciones entre entornos o la ausencia de dicha separaci√≥n. <br><br>  Esto puede conducir a muchos problemas, por ejemplo: <br><br><ul><li>  el entorno de prueba comienza a leer y / o escribir datos de producci√≥n, bases de datos, colas y otros recursos; </li><li>  el entorno de prueba utiliza integraciones y servicios externos con una cuenta de producci√≥n; <br></li><li>  mezcla de estad√≠sticas, m√©tricas, errores de diferentes entornos; <br></li><li>  violaci√≥n de seguridad (desarrolladores, probadores y otros miembros del equipo obtienen acceso a recursos de producci√≥n); </li><li>  errores dif√≠ciles de investigar en la producci√≥n (por ejemplo, parte de los mensajes en la cola se pierden debido a que el entorno de prueba comienza a leerlo). </li></ul><br>  Estos son solo ejemplos, una lista completa de problemas que pueden ser causados ‚Äã‚Äãpor una separaci√≥n insuficientemente responsable de las configuraciones es casi interminable y depende de los detalles del proyecto. <br><br>  La separaci√≥n responsable de los datos de configuraci√≥n por entorno puede reducir significativamente la probabilidad de que se presente inmediatamente toda una clase de problemas asociados con: <br><br><ul><li>  seguridad </li><li>  fiabilidad </li><li>  soporte e implementaci√≥n (los ingenieros de DevOps se lo agradecer√°n). </li></ul><br>  Adem√°s, es una buena pr√°ctica almacenar datos secretos (claves, tokens, contrase√±as) en un lugar separado especialmente dise√±ado para almacenar y procesar secretos.  Dichos sistemas cifran datos de manera segura, tienen medios flexibles para administrar los derechos de acceso y tambi√©n le permiten cambiar r√°pidamente las claves si se han visto comprometidas.  En este caso, no necesita realizar cambios en el c√≥digo y volver a implementar la aplicaci√≥n.  Esto es especialmente importante para sistemas que trabajan con transacciones financieras, datos confidenciales o personales. <br><br><h2>  Recuerda el efecto en cascada </h2><br>  Una causa com√∫n de la ca√≠da de sistemas grandes y complejos es el efecto en cascada.  Se produce el colapso o la degradaci√≥n de la funcionalidad de una de las partes del sistema, y ‚Äã‚Äãuno por uno los otros subsistemas asociados con √©l comienzan a fallar.  En cascada hasta que todo el sistema se vuelva completamente inaccesible. <br><br>  Algunos trucos protectores: <br><br><ul><li>  usar tiempos de espera progresivos (exponenciales) con un elemento aleatorio; </li><li>  establecer valores razonables para el tiempo de espera de conexi√≥n y el tiempo de espera del socket; </li><li>  prever un retroceso por adelantado en caso de falla de los servicios individuales.  Es mejor degradar temporalmente algunas de las funciones, deshabilitar los servicios por completo, pero no arriesgarse a romper todo el sistema.  Pero imagine que en este caso el usuario ve un mensaje comprensible y no aterrador, y el equipo de soporte y desarrollo lo antes posible se entera del problema. </li></ul><br><h2>  Informar problemas r√°pidamente </h2><br>  Todos los sistemas fallan.  A veces sucede algo extra√±o en ellos que los creadores esperan "una vez cada 10 a√±os".  Las integraciones y las API externas no est√°n disponibles peri√≥dicamente o responden incorrectamente.  Hacer una reserva para todos estos casos suele ser dif√≠cil, largo o simplemente imposible.  Anticipe esta situaci√≥n con anticipaci√≥n e inf√≥rmela lo m√°s r√°pido posible.  Iniciar sesi√≥n en el nivel ERROR o en el sistema de monitoreo, por supuesto.  Agregar validaci√≥n adicional al chequeo de salud es a√∫n mejor.  Enviar un mensaje desde el c√≥digo a Slack, Telegram, PagerDuty u otro servicio que notifique instant√°neamente a su equipo sobre el problema es ideal. <br><br>  Pero es importante comprender claramente cu√°ndo tiene sentido enviar mensajes directamente.  Solo si hay un error, una situaci√≥n sospechosa o at√≠pica est√° asociada con los procesos comerciales y es importante que una persona o grupo de personas en un equipo reciba una notificaci√≥n lo m√°s r√°pido posible y pueda responder. <br><br>  Todos los dem√°s problemas t√©cnicos y desviaciones deben manejarse por medios est√°ndar: monitoreo, alertas, registro. <br><br><h2>  Cach√© de uso frecuente y / o datos recientes </h2><br>  Los programas y las personas tienen una cosa en com√∫n: tienden a reutilizar datos que a menudo se usan o se encuentran recientemente.  En sistemas muy cargados, siempre debe recordar esto y almacenar en cach√© los datos en los lugares m√°s calientes del sistema. <br><br>  La estrategia de almacenamiento en cach√© depende en gran medida de los detalles del proyecto y los datos.  Si los datos son mutables, es necesario invalidar la memoria cach√©.  Por lo tanto, considere de antemano c√≥mo lo har√°.  Y tambi√©n piense en los riesgos que pueden existir si los datos obsoletos aparecen en la memoria cach√©, la memoria cach√© se descompone, etc. <br><br><h2>  Reemplazar operaciones costosas por operaciones baratas </h2><br>  Trabajar con cadenas es una de las operaciones m√°s comunes en cualquier programa.  Y si esto no se hace de manera √≥ptima, puede ser una operaci√≥n costosa.  En diferentes lenguajes de programaci√≥n, los detalles del trabajo con cadenas pueden variar, pero siempre debe recordarlo. <br><br>  En aplicaciones grandes con una gran base de c√≥digo, a menudo se encuentra c√≥digo escrito hace muchos a√±os que funciona sin errores, pero no es √≥ptimo en t√©rminos de rendimiento.  A menudo, un cambio banal en la estructura de datos de una matriz / lista a una tabla hash da un gran impulso (incluso si solo est√° en un lugar local en el c√≥digo). <br><br>  A veces puede mejorar el rendimiento reescribiendo el algoritmo para usar operaciones bit a bit.  Pero incluso en esos casos raros cuando est√° justificado, el c√≥digo es muy complejo.  Por lo tanto, al tomar una decisi√≥n, tenga en cuenta la legibilidad del c√≥digo y el hecho de que deber√° ser compatible.  Lo mismo ocurre con otras optimizaciones dif√≠ciles: casi siempre, dicho c√≥digo se vuelve dif√≠cil de leer y muy dif√≠cil de mantener.  Si a√∫n decide optimizaciones complicadas, no olvide escribir comentarios que describan <b>lo</b> que desea que haga este c√≥digo y <b>por qu√©</b> est√° escrito de esa manera. <br><br>  Al mismo tiempo, la optimizaci√≥n debe tratarse con un pragmatismo saludable: <br><br><ul><li>  si te lleva, como desarrollador, unos segundos o minutos, tiene sentido hacerlo de inmediato; </li><li>  si es m√°s, es razonable hacerlo de inmediato solo cuando est√© 100% seguro de su necesidad.  En todos los dem√°s casos, tiene sentido posponerlo, escribir el c√≥digo TODO, recopilar m√°s informaci√≥n, consultar con colegas, etc. </li></ul><br><blockquote>  La optimizaci√≥n prematura es la ra√≠z de todo mal (Donald Knuth) <br></blockquote><br><h2>  Reescribe en un idioma de nivel inferior </h2><br>  Esta es una medida extrema.  Los idiomas de bajo nivel son casi siempre m√°s r√°pidos en comparaci√≥n con los idiomas de alto nivel.  Pero esta soluci√≥n tiene un precio: desarrollar dicho programa es m√°s largo y m√°s dif√≠cil.  A veces, al reescribir partes cr√≠ticas del sistema en un lenguaje de bajo nivel, puede lograr un aumento considerable de la productividad.  Pero hay efectos secundarios: por lo general, tales soluciones pierden en plataformas cruzadas y su soporte es m√°s costoso.  Por lo tanto, tome una decisi√≥n con cuidado. <br><br><h2>  Solo en el campo no es un guerrero. </h2><br>  En conclusi√≥n, me gustar√≠a se√±alar una cosa m√°s importante, quiz√°s la m√°s importante.  Las medidas que consideramos en los p√°rrafos anteriores funcionar√°n solo si todos los miembros del equipo se adhieren a ellas y todos comprenden qui√©n es responsable de qu√© y qu√© se debe hacer en caso de una situaci√≥n cr√≠tica.  Despu√©s de solucionar el problema, es importante celebrar una reuni√≥n (Post Mortem) con todas las personas interesadas y averiguar por qu√© surgi√≥ este problema y qu√© se puede hacer para evitar que ocurra en el futuro.  En muchos casos, se requieren cambios tanto t√©cnicos como de proceso.  Con cada nuevo Post Mortem, su sistema ser√° m√°s confiable, el equipo tendr√° m√°s experiencia y cohesi√≥n, y la entrop√≠a en el universo ser√° un poco menor;) <br><br>  <i>El art√≠culo utiliza parcialmente materiales de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Por qu√© la programaci√≥n defensiva es la mejor forma de codificaci√≥n robusta</a> (Ravi Shankar Rajan).</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/472922/">https://habr.com/ru/post/472922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../472910/index.html">Encuentra texto en carteles y paquetes usando un tel√©fono inteligente</a></li>
<li><a href="../472912/index.html">Base de datos ClickHouse para humanos, o Alien Technology</a></li>
<li><a href="../472914/index.html">Wolfram Function Repository: plataforma de acceso abierto para extensiones de lenguaje Wolfram</a></li>
<li><a href="../472916/index.html">Backend, machine learning y serverless son los m√°s interesantes de la conferencia de julio Habr</a></li>
<li><a href="../472918/index.html">ZX Spectrum en Rusia y la CEI: c√≥mo se transform√≥ la b√∫squeda en l√≠nea fuera de l√≠nea</a></li>
<li><a href="../472926/index.html">La ley de los retornos acelerados (parte 1)</a></li>
<li><a href="../472928/index.html">Servicio inform√°tico de GPU altamente cargado</a></li>
<li><a href="../472930/index.html">Astrof√≠sicos de Silicon Valley cuantificando la moda</a></li>
<li><a href="../472932/index.html">IntelliJ IDEA An√°lisis est√°tico vs mente humana</a></li>
<li><a href="../472934/index.html">¬øQu√© es un fideicomiso cero? Modelo de seguridad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>