<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèº‚Äçüç≥ ‚ÜòÔ∏è üëµüèø Konfigurieren Sie BGP so, dass Sperren, Version 3, ohne VPS umgangen werden üêú üíè üë©‚Äç‚ù§Ô∏è‚Äçüë©</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Warum dies alles im Prinzip geschieht und wie es logisch angeordnet ist, wird im ersten und zweiten Artikel beschrieben. 


 Nach ihrer Ver√∂ffentlichu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Konfigurieren Sie BGP so, dass Sperren, Version 3, ohne VPS umgangen werden</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/413049/"><p>  Warum dies alles im Prinzip geschieht und wie es logisch angeordnet ist, wird im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ersten</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zweiten</a> Artikel beschrieben. </p><br><p>  Nach ihrer Ver√∂ffentlichung erhielt ich mehrere Fragen von Personen, die VPN aus Ressourcen verwenden, die ihnen nicht geh√∂ren (z. B. Kauf eines kommerziellen VPN-Dienstes).  Ich habe diesen Leuten zuvor geraten, einen VPS zu beauftragen, einen BGP-Dienst bereitzustellen oder auf andere Weise auf einen Server unter Linux zuzugreifen. </p><br><p>  Ab heute gibt es f√ºr sie (und f√ºr alle anderen) eine bequemere Option: Mit dem kostenlosen Dienst <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">antifilter.download konnte</a> eine BGP-Sitzung automatisch mit Ihrem Router konfiguriert werden. </p><a name="habracut"></a><br><p>  Um es zu benutzen, m√ºssen Sie nur haben: </p><br><ul><li><del>  feste routingf√§hige IP-Adresse (sogenanntes "Wei√ü". Sie kann dynamisch zugewiesen werden, muss aber immer gleich sein); </del>  UPD  Es spielt keine Rolle mehr, siehe unten f√ºr den Text. </li><li>  ein Router mit Unterst√ºtzung f√ºr das BGP-Protokoll (in dem Artikel wird das Beispiel traditionell auf der Basis von RouterOS-Routern Mikrotik erstellt); </li><li>  bereits konfigurierter VPN-Tunnel von diesem Router. </li></ul><br><h2 id="umolchaniya-v-tekste-stati">  Standard im Text des Artikels </h2><br><ul><li>  Der Name der Tunnelschnittstelle auf dem Router lautet gre-tunnel1 </li><li>  Die Nummer Ihres autonomen Systems lautet 64512 (w√§hlen Sie sich gem√§√ü RFC6996 - aus dem Bereich 64512-65534 einschlie√ülich). </li><li>  Die externe IP-Adresse Ihres Routers lautet 81.117.103.94 </li></ul><br><h2 id="posledovatelnost-deystviy-esli-vy-hotite-upravlyat-servisom-i-u-vas-est-fiksirovannyy-marshrutiziruemyy-ip-adres">  Die Reihenfolge der Aktionen, wenn Sie den Dienst verwalten m√∂chten und eine feste routbare IP-Adresse haben </h2><br><h3 id="delaem-raz">  Mach es einmal </h3><br><p>  Wir gehen <u>von Ihrem Netzwerk</u> (dies ist wichtig) zur Website <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">antifilter.download</a> , scrollen zum Abschnitt BGP und klicken auf "BGP-Verwaltung aktivieren". </p><br><h3 id="delaem-dva">  Mach zwei </h3><br><p>  Wir √ºberpr√ºfen, ob auf der Site unsere IP angezeigt wird, geben die ausgew√§hlte Nummer unseres autonomen Systems ein, markieren die Kontrollk√§stchen, welche Routen angegeben werden sollen, best√§tigen das Captcha und klicken auf "Peering erstellen".  Danach zeigt die Site an, dass Einstellungen f√ºr Ihre Adresse vorhanden sind.  Die Zeit zum Anwenden der Einstellungen im Dienst betr√§gt nicht mehr als 5 Minuten. </p><br><h3 id="delaem-tri">  Mach drei </h3><br><p>  Gehen Sie zu Ihrem Mikrotik-Router und konfigurieren Sie BGP-Peering mit dem darauf befindlichen Dienst: </p><br><pre><code class="plaintext hljs">/ip route add dst-address=163.172.210.8/32 gateway=gre-tunnel1 /routing bgp instance set default as=64512 ignore-as-path-len=yes router-id=81.117.103.94 /routing bgp peer add hold-time=4m in-filter=bgp_in keepalive-time=1m multihop=yes name=antifilter remote-address=163.172.210.8 remote-as=65432 ttl=default /routing filter add action=accept chain=bgp_in comment="Set nexthop to VPN" set-in-nexthop-direct=gre-tunnel1</code> </pre> <br><p>  Vergessen Sie nicht, den Standardnamen f√ºr AS, IP und Schnittstelle in Ihren zu √§ndern.  <strong>In</strong> den obigen Befehlen m√ºssen <strong>vier</strong> Ersetzungen vorgenommen werden - nicht mehr und nicht weniger. </p><br><h3 id="-i-vsyo-rabotaet">  ... und alles funktioniert </h3><br><p>  Wenn seit dem Klicken auf die Schaltfl√§che "Peering erstellen" mehr als 5 Minuten vergangen sind und Sie alles richtig konfiguriert haben, funktioniert bereits alles f√ºr Sie. </p><br><p>  Wenn Sie die Liste der auf Ihre Seite hochgeladenen Pr√§fixe √§ndern m√∂chten, m√ºssen Sie zum Gl√ºck die Einstellungen auf der Webseite l√∂schen und zum Gl√ºck erneut erstellen. In den Einstellungen befinden sich eine Nummer und drei H√§kchen. </p><br><p>  Servicepr√§fixe sind mit der entsprechenden Community gekennzeichnet. Wenn Sie also komplexere Verarbeitungsregeln erstellen m√∂chten, liegt alles in Ihren H√§nden. </p><br><p>  <strong>Ich empfehle dringend, keine</strong> Liste einzelner IPs anzuschlie√üen - selbst die Top-SOHO-Router von Mikrotik sind nicht sehr gut, und mittlere wie hAP lite verhalten sich √§u√üerst unvorhersehbar. </p><br><h2 id="upd-posledovatelnost-deystviy-esli-u-vas-net-fiksirovannogo-ip-ili-vas-ustraivayut-nastroyki-po-umolchaniyu">  UPD  Die Reihenfolge der Aktionen, wenn Sie keine feste IP haben oder mit den Standardeinstellungen zufrieden sind </h2><br><h3 id="delaem-raz-1">  Mach es einmal </h3><br><p>  Gehen Sie zu Ihrem Mikrotik-Router und konfigurieren Sie BGP-Peering mit dem darauf befindlichen Dienst: </p><br><pre> <code class="plaintext hljs">/ip route add dst-address=163.172.210.8/32 gateway=gre-tunnel1 /routing bgp instance set default as=64999 ignore-as-path-len=yes router-id=81.117.103.94 /routing bgp peer add hold-time=4m in-filter=bgp_in keepalive-time=1m multihop=yes name=antifilter remote-address=163.172.210.8 remote-as=65432 ttl=default /routing filter add action=accept chain=bgp_in comment="Set nexthop to VPN" set-in-nexthop-direct=gre-tunnel1</code> </pre> <br><p>  Vergessen Sie nicht, die Standard-Router-ID und den Schnittstellennamen in Ihre zu √§ndern.  In den obigen Befehlen m√ºssen <strong>drei</strong> Ersetzungen vorgenommen werden - nicht mehr und nicht weniger.  Als Router-ID k√∂nnen Sie grunds√§tzlich jede 32-Bit-Nummer im Format einer IP-Adresse schreiben. Um jedoch keine Spezialeffekte zu erzielen, w√ºrde ich die Verwendung Ihrer aktuellen externen IP-Adresse empfehlen.  Mit seinen √Ñnderungen wird es nicht notwendig sein, es zu √§ndern. <br>  Die AS-Nummer in diesem Fall ist fest, <strong>64999</strong> , sowie die angek√ºndigten Pr√§fixe (ipsum + Subnetz). Wenn jemand zu viel davon hat, k√∂nnen Sie jederzeit nach Community filtern oder Ank√ºndigungen auf andere Weise empfangen. </p><br><h3 id="-i-vsyo-rabotaet-1">  ... und alles funktioniert </h3><br><p>  Wenn nach dem Aktivieren der Einstellungen auf Ihrem Router mehr als 5 Minuten vergangen sind und Sie alles richtig konfiguriert haben, funktioniert alles bereits f√ºr Sie. <br>  Wenn Sie die IP-Adresse √§ndern, wird die Sitzung ungef√§hr innerhalb von 5 Minuten wiederhergestellt. </p><br><h2 id="zaklyuchenie">  Fazit </h2><br><p>  Ja, ich verstehe, dass es bereits ein "Topf, koche nicht" ist, und ich hoffe, dass f√ºr mich das Thema der Umgehung von Schl√∂ssern hier geschlossen ist. </p><br><p>  Ich werde die Fragen in den Kommentaren beantworten, traditionell werde ich bei der Einstellung helfen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de413049/">https://habr.com/ru/post/de413049/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de413027/index.html">Sowjetisches HI-FI und seine Sch√∂pfer: Laser-Video-Discs in der UdSSR</a></li>
<li><a href="../de413029/index.html">Die erste Managed OpenShift-L√∂sung in der Cloud</a></li>
<li><a href="../de413033/index.html">Aubrey de Grey Pionier der Verj√ºngung: ‚ÄûMenschen mittleren Alters haben gute Chancen‚Äú</a></li>
<li><a href="../de413041/index.html">Der W√§chter: "Du wirst kein Jetpack haben, lebe damit"</a></li>
<li><a href="../de413045/index.html">macOS + Windows 10 auf einem externen Laufwerk</a></li>
<li><a href="../de413051/index.html">Spaltenbasiertes DBMS im Vergleich zu Kleinbuchstaben. Wie w√§re es mit einem Kompromiss?</a></li>
<li><a href="../de413055/index.html">So erstellen Sie eine globale Startup-Community rund um IT-Inhalte: Eine Techstars Startup Digest Story</a></li>
<li><a href="../de413059/index.html">So bauen Sie den Schutz vor Unternehmensbetrug auf Vortrag auf der YaC 2018</a></li>
<li><a href="../de413061/index.html">Wie fange ich an, Lisp-Code zu schreiben?</a></li>
<li><a href="../de413063/index.html">Testen eines hausgemachten Thermobechers an einem Phasen√ºbergang</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>