<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∏üèø üë∏ üë≤üèº Programa√ß√£o moderna: um olhar ap√≥s 25 anos de pausa ou como escrevi o bot para Telegram üç† ü§∞üèø üõÇ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A tarefa parece simples quando voc√™ n√£o sabe nada sobre isso e quando decide. 

 Em um dia "maravilhoso", percebi que n√£o estou interessado em partici...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Programa√ß√£o moderna: um olhar ap√≥s 25 anos de pausa ou como escrevi o bot para Telegram</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477178/"> A tarefa parece simples quando voc√™ n√£o sabe nada sobre isso e quando decide. <br><br>  Em um dia "maravilhoso", percebi que n√£o estou interessado em participar de v√°rios f√≥runs, mas quero criar meu pr√≥prio canal e compartilhar "sabedoria". <br><br>  Eu gosto dos recursos do Telegram incorporados, incluindo bots, ent√£o o canal na forma de um blog foi criado l√°.  Ele come√ßou a procurar bots para ajudar a escrever mensagens ....  e desde que eu n√£o quero encontr√°-lo.  Bem, escreva voc√™ mesmo.  As pessoas inteligentes s√£o aconselhadas a escrever em Python. <br><br>  Eu li o primeiro tutorial na Internet em 149 p√°ginas.  Eu estou familiarizado com Pascal, FoxPro, Interbase e at√© (ha ha 3 vezes) h√° 20 anos que vendi meus programas e, de alguma forma, n√£o deu certo, entrei no com√©rcio.  Trabalhar como programador me ajudou bastante na defini√ß√£o de tarefas para codificadores.  Mas, voltando ao Python, parece nada complicado, porque tamb√©m era poss√≠vel programar no BASIC, e este n√£o √© o meu diploma de faculdade com um complexo de software e hardware do gerador de verifica√ß√£o MIG no Assembler.  Um problema, j√° fazia muito tempo, retornando ao t√≠tulo - parece que √© simples, porque ainda n√£o sei nada sobre a tarefa, mas vale a pena tentar. <br><br>  Decidi que √© mais conveniente fazer um projeto de um smartphone para Android, porque est√° sempre √† m√£o.  Ent√£o coloque: <br><br><ol><li>  Pydroid 3 - IDE para Python 3 Na verdade, Python para Android. </li><li>  @BotFather, No Telegram, instalamos o pai de todos os bots - voc√™ precisar√° dele para obter o identificador do seu bot e fazer configura√ß√µes b√°sicas. </li><li>  Reinicie o aplicativo para iniciar um projeto no heroku. </li><li>  <a href="http://pocketgit.com/">GIT</a> Um aplicativo para hospedagem online de reposit√≥rios. </li><li>  Windscribe Sem VPN em qualquer lugar? </li><li>  Emulador do Terminal Termux e ambiente Linux. </li></ol><br>  E qual √© o resultado final?  A programa√ß√£o em um smartphone √© poss√≠vel em teoria, mas imposs√≠vel na pr√°tica.  Verifique o c√≥digo o m√°ximo poss√≠vel, corrija o erro, investigue o desempenho. <br><a name="habracut"></a><br>  Uma introdu√ß√£o t√£o longa e o que eu queria obter do meu bot.  A princ√≠pio, pareceu-me o suficiente adicionar um hashtag no final da mensagem.  Em seguida, o pensamento veio para "cobri-lo" com um link para o meu canal; portanto, com a repostagem, haver√° uma atra√ß√£o adicional √† fonte do canal.  Em seguida, ele adicionou a automa√ß√£o do link de origem, de onde recebo a mensagem.  A seguir, farei uma digress√£o.  A publicidade, √© claro, √© o motor do progresso.  Mas, √†s vezes, sua quantidade passa pelo telhado.  O telegrama foi escolhido por mim, entre outras coisas, porque h√° uma oportunidade de lutar contra o √∫ltimo.  Eu respeito os leitores do meu canal e, portanto, limpo as not√≠cias interessantes encontradas no Ineta da publicidade e as envio ao canal.  Ao mesmo tempo, respeito os autores e quase sempre dou um link para a fonte na forma de "Leia mais ...".  Devido √† avers√£o √† publicidade, fa√ßo o download do conte√∫do do YouTube e o carrego no meu canal como um arquivo de v√≠deo.  Em um determinado momento, o bot que baixou o v√≠deo ficou louco e come√ßou a me enviar an√∫ncios a cada hora.  Ent√£o, no meu bot, houve uma oportunidade de baixar v√≠deos do YouTube.  Recentemente, a prop√≥sito, eu conheci o autor deste bot, ele ficou muito surpreso, porque  Segundo ele, ele envia "apenas" an√∫ncios 20 vezes por m√™s.  O mesmo aconteceu com o bot que faz a marca d'√°gua - ela foi enviada ao forno e tive a oportunidade de fazer uma marca d'√°gua. <br><br>  Para escrever um programa do zero, tive que pesquisar muitas informa√ß√µes na Internet.  Espero que aqueles que seguem meus passos ajudem.  Ent√£o, de onde obtive as informa√ß√µes e o que usei: <br><br><ol><li>  Os artigos sobre Habrr realmente me ajudaram.  Portanto, n√£o vou reescrever como e o que instalar.  Est√° tudo l√°.  A prop√≥sito, entrei em contato com os autores de maneira pessoal e eles nunca recusaram minha ajuda. </li><li>  <a href="https://github.com/">github Um servi√ßo de hospedagem de reposit√≥rio online com todos os recursos do controle de vers√£o distribu√≠do e da funcionalidade de controle de origem.</a>  <a href="https://git-scm.com/book/ru/v2">Primer</a> </li><li>  <a href="http://heroku.com/">O heroku √© uma plataforma PaaS baseada em nuvem que suporta v√°rias linguagens de programa√ß√£o.</a>  Rapidamente o abandonou. </li><li>  <a href="https://github.com/eternnoir/pyTelegramBotAPI/">pyTelegramBotAPI</a> - Uma das principais bibliotecas ao escrever um bot para Telegrams. </li><li>  <a href="https://mastergroosha.github.io/telegram-tutorial/">Tutorial de ortografia bot</a> </li><li>  <a href="https://pythonworld.ru/samouchitel-python">Python 3 para iniciantes</a> </li><li>  <a href="https://tlgrm.ru/docs/bots">Bots: informa√ß√µes para desenvolvedores</a> </li><li>  <a href="http://htmlbook.ru/">Refer√™ncia HTML</a> </li><li>  <a href="https://rus.windscribe.com/">Em nenhum lugar sem uma VPN?</a> </li></ol><br>  Uma segunda digress√£o ou plano de guerra ser√° exibida.  Quando comecei a escrever o bot, a primeira coisa que vi foram os c√≥digos de outra pessoa.  Se n√£o h√° kamenty, dificilmente se pode entender: <br><br>  A terra tremeu como nossos seios <br>  Cavalos misturados em um monte, pessoas, <br>  E voleios de mil armas <br>  Fundido em um longo uivo ... <br><br>  Lermontov escreveu sobre o c√≥digo.  A pilha cont√©m fun√ß√µes, decoradores.  N√£o h√° c√≥digo de beleza, ningu√©m se importa com recursos.  Embora a beleza seja mais prov√°vel de ser vista pelo masoquista esquisito.  O significado da frase de um programador familiar "Veja o programa, talvez voc√™ possa descobrir" rapidamente me alcan√ßou.  A explos√£o cerebral mais importante que tive foi quando finalmente percebi que o c√≥digo √© orientado a eventos, n√£o seq√ºencial.  Este √© um n√≠vel diferente. <br><br>  O segundo problema √© a falta de boa documenta√ß√£o.  Mesmo em Basurm.  Eu darei um exemplo  Envio uma foto para os telegramas, e ele a sacode sem vergonha.  Aconteceu que um argumento inv√°lido foi escrito na linha: <br><br><pre><code class="python hljs">file_info = bot.get_file(message.photo[<span class="hljs-number"><span class="hljs-number">-1</span></span>].file_id)</code> </pre> <br>  E qual √© a documenta√ß√£o?  N√≥s vamos para a fonte <br><br><img src="https://habrastorage.org/webt/48/gb/af/48gbafdmsf45na582-lmnjbyqzc.jpeg" alt="imagem"><br><br><img src="https://habrastorage.org/webt/tr/mg/xh/trmgxho4oumofemn6yqfkzh33g0.jpeg" alt="imagem"><br><br>  Esta √© uma matriz.  Voc√™ pode caminhar por ela, estudar onde o tamanho volta.  Obrigado, pessoas inteligentes sugeriram o que prescrever.  <a href="https://habr.com/ru/post/472970/">Embora do que estou falando, mesmo que os gurus estejam perdidos.</a> <a href="https://habr.com/ru/post/472970/"><br></a> <br>  Quando escrevi o c√≥digo da marca d'√°gua, usei uma fonte livre e, para torn√°-la em negrito, apliquei a solu√ß√£o para exibir a mensagem tr√™s vezes com deslocamento de pixel, n√£o sei qu√£o bonita √© a solu√ß√£o, mas funciona. <br><br><pre> <code class="python hljs">font = ImageFont.truetype(<span class="hljs-string"><span class="hljs-string">"Pillow/Tests/fonts/FreeMono.ttf"</span></span>, width//<span class="hljs-number"><span class="hljs-number">20</span></span>) pos = (width//<span class="hljs-number"><span class="hljs-number">4</span></span>, height - height//<span class="hljs-number"><span class="hljs-number">10</span></span>) text = skanal drawing.text(pos, text, fill=black, font=font) pos = (<span class="hljs-number"><span class="hljs-number">1</span></span> + width // <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> + height - height // <span class="hljs-number"><span class="hljs-number">10</span></span>) drawing.text(pos, text, fill=black, font=font) pos = (<span class="hljs-number"><span class="hljs-number">2</span></span> + width // <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> + height - height // <span class="hljs-number"><span class="hljs-number">10</span></span>) drawing.text(pos, text, fill=black, font=font)</code> </pre><br>  A posi√ß√£o, como voc√™ pode ver, √© selecionada dependendo do tamanho da imagem e da altura da fonte tamb√©m.  Imediatamente me deparei com um ponto interessante: embora a fonte seja parte integrante da biblioteca PIL, j√° que a primeira linha diz que funciona localmente, mas no Docker, n√£o.  A sa√≠da √© fazer o download para o reposit√≥rio, adicionar o caminho ao arquivo de ambiente e escrever outro caminho no programa. <br><br>  Outra coisa incompreens√≠vel para mim aconteceu com a imagem ap√≥s o processamento usando a biblioteca PIL (imediatamente ap√≥s a marca d'√°gua).  Eu envio para o meu bot: <br><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(photo_path, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> fi: bot.send_photo(message.chat.id, fi)</code> </pre> <br>  Est√° tudo √≥timo, eu gosto da foto.  Ent√£o eu preciso adicionar um coment√°rio √† imagem e ver se tudo fica bonito juntos?  Escrevemos: <br><br><pre> <code class="python hljs">bot.send_photo(message.chat.id, message.photo[<span class="hljs-number"><span class="hljs-number">-1</span></span>].file_id, caption=<span class="hljs-string"><span class="hljs-string">' '</span></span>)</code> </pre> <br>  Por alguma raz√£o, a imagem original, n√£o processada, entra no bot.  Bem, vamos tentar enganar: getupdates.offset -1, n√£o faz sentido, o Telegram tem certeza de que esta √© a mesma foto.  Ok, fazemos isso: <br><br><pre> <code class="python hljs"> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(photo_path, <span class="hljs-string"><span class="hljs-string">'rb'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> fi: info = bot.send_photo(message.chat.id, fi)</code> </pre> <br>  Reescrever: <br><br><pre> <code class="python hljs">bot.send_photo(message.chat.id, info.photo[<span class="hljs-number"><span class="hljs-number">-1</span></span>].file_id, caption=<span class="hljs-string"><span class="hljs-string">' '</span></span>)</code> </pre> <br>  O resultado √© o mesmo - a imagem original √© exibida.  E apenas substituir a mensagem no primeiro argumento por informa√ß√£o deu o resultado desejado. <br><br>  Tamb√©m fornecerei um c√≥digo interessante de n√≠vel de entrada do YouTube (NB: sem verifica√ß√£o de erro): <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> message.entities: <span class="hljs-comment"><span class="hljs-comment">#    pkanal = 6 for item in message.entities: if item.type == "url" and message.text.find(' ') == -1: if 'youtube.com' in message.text or 'youtu.be' in message.text: #    ydl_opts = {'outtmpl': '/tmp/f.mp3', 'preferredcodec': 'mp3', 'max_filesize': 60000000} link_of_the_video = message.text with youtube_dl.YoutubeDL(ydl_opts) as ydl: ydl.download([link_of_the_video]) bot.delete_message(message.chat.id, message.message_id) if os.path.exists('/tmp/f.mp3'): #   video = open('/tmp/f.mp3', 'rb') bot.send_video(message.chat.id, video) os.remove('/tmp/f.mp3') pkanal = 6 else: #   bot.send_message(message.chat.id, '  ', parse_mode='html', disable_web_page_preview=True)</span></span></code> </pre> <br>  Para mim, o obst√°culo era que as entidades s√£o uma matriz de matrizes e voc√™ precisa "revisar" toda a matriz para que o bot entenda que estamos trabalhando com um link.  Tamb√©m descobriu-se que os usu√°rios enviam o link para o bot como "Compartilhar" no YouTube, de modo que "youtu.be" tamb√©m est√° escrito no exemplo.  Eu n√£o encontrei uma maneira de enviar imediatamente um arquivo para o Telegram, ent√£o n√≥s o salvamos, enviamos e exclu√≠mos.  Durante o teste, fui imediatamente informado de que as pessoas come√ßariam a baixar arquivos gigantes - mais tarde, tive que introduzir uma restri√ß√£o. <br><br>  Antes do lan√ßamento do bot, ficou repentinamente claro que eu n√£o tinha uma verifica√ß√£o dos direitos de acesso ao canal.  Por exemplo, conhecendo meu canal, qualquer usu√°rio de bot poderia enviar uma mensagem para l√°, porque  O bot √© um administrador.  Eu tive que fazer uma verifica√ß√£o urgente: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> message.from_user.id <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [adm_obj.user.id <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> adm_obj <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bot.get_chat_administrators(chat_id)]:</code> </pre><br>  Aqui, obtemos a lista de administradores do canal e veremos se o autor da mensagem tamb√©m √© um administrador. <br><br>  Algumas palavras sobre como voc√™ teve que lutar com Roskomnadzor.  Como o acesso √† API est√° bloqueado, para desenvolver o bot localmente, voc√™ precisa, de alguma forma, passar o tr√°fego por nossos valentes defensores.  Voc√™ pode fazer isso de duas maneiras - por meio de uma VPN ou de um proxy.  A maneira mais simples, r√°pida e "normal" √© o t√∫nel ssh: estabelecemos uma conex√£o entre o cliente e o servidor proxy, obtemos uma porta no host local onde o tr√°fego pode ser enviado do nosso lado e ele sai do outro lado (j√° em algum lugar na Alemanha).  Por conveni√™ncia, voc√™ pode adicionar um pouco de automa√ß√£o dessa conex√£o - um script e um atalho na √°rea de trabalho, que o iniciar√°, se necess√°rio.  Pelo m√©todo "normal", quero dizer aqui a situa√ß√£o em que controlamos os pontos de entrada e sa√≠da - √† esquerda est√° o nosso laptop, √† direita est√° o VPS na Alemanha.  no meio, o tr√°fego pode ser interceptado, tanto quanto desejado, √© criptografado e, na sa√≠da, nos encontramos na jurisdi√ß√£o de outro estado, e as leis da Federa√ß√£o Russa n√£o se aplicam a ele.  Como vantagem, temos uma garantia adicional de que o servidor proxy n√£o ser√° alterado ou desligado at√© que fa√ßamos isso sozinhos.  I.e.  diferente de qualquer VPN de tio, temos tranquilidade e confian√ßa no futuro. <br><br>  Script <br><br><pre> <code class="bash hljs">/home/user/proxy.sh</code> </pre> <br>  C√≥digo de script <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash ssh -f -D 1080 user@12.34.56.78 sleep 72000</span></span></code> </pre> <br>  Depois de estabelecermos uma conex√£o com o servidor e a porta estar aberta, precisamos direcionar o tr√°fego para l√°.  Percorrendo o caminho de menor resist√™ncia e para n√£o pensar em como configurar o proxy no IDE \ docker \ python, voc√™ pode fazer uma configura√ß√£o para todos, proxychains ser√° uma configura√ß√£o dessas.  Se voc√™ executar qualquer software usando este utilit√°rio, ele redirecionar√° o tr√°fego atrav√©s da cadeia de proxy registrada na configura√ß√£o. <br><br><pre> <code class="bash hljs">/etc/proxychains.conf</code> </pre> <br>  No nosso caso, essa √© uma cadeia e escrever n√£o √© dif√≠cil. <br><br><pre> <code class="bash hljs">socks5 127.0.0.1 1080</code> </pre> <br>  e outra muleta usada para n√£o configurar a VPN (sarcasmo) √© uma maneira de iniciar um aplicativo Python a partir do PyCharm.  No caso simples, para executar o aplicativo atrav√©s de proxychains, basta escrever proxychains app.py e pronto.  Mas o IDE sempre exige um int√©rprete.  √â f√°cil contornar isso - crie uma nova "configura√ß√£o de execu√ß√£o", selecione um script de shell.  e preencha os campos <br><br><img src="https://habrastorage.org/webt/av/mr/7e/avmr7ezwd6bfnlegmfelx5kaof4.png" alt="imagem"><br><br>  Depois disso, o lan√ßamento do ponto de vista do IDE assume este formato: proxychains python3 app.py - √© exatamente isso que precisamos.  Assim, quando queremos iniciar um projeto, tudo o que precisamos fazer √© executar o script na √°rea de trabalho e clicar no bot√£o "play" no ide para iniciar o bot.Todo o resto da m√°gica ser√° feito por proxychains e ssh. <br><br>  Finalmente, o bot √© escrito, testado.  O que vem a seguir?  Por um lado, quero me declarar, por outro, acho que pode ser realmente √∫til para algu√©m.  E aqui estamos diante de outro problema do telegrama;  n√£o possui um √∫nico cat√°logo de canais e bots.  √â bem poss√≠vel que exista um bot semelhante ao meu, mas repito que n√£o o encontrei.  E em algum lugar do bonde um homem senta e sofre, que quer organizar uma mensagem lindamente no canal e ele faz tudo com canetas. <br><br>  Se voc√™ j√° executou meu bot, viu que existe uma hashtag #Advertising.  Como assim?  - voc√™ pergunta.  E aqui discuti o problema com os usu√°rios finais - muitos postaram an√∫ncios em seus canais e rapidamente se acostumaram a escrever mensagens usando o bot, eles me pediram para adicionar.  Voc√™ pode n√£o gostar de publicidade, combat√™-la, mas essas s√£o realidades duras e necess√°rias para os usu√°rios. <br><br>  O projeto √© sem fins lucrativos, ent√£o acho que voc√™ pode chamar o bot em si @SGK_espace_bot. <br><br>  <a href="https://youtu.be/3PkS4VzpBcg">E aqui est√° o v√≠deo como usar</a> <br>  Eu ficaria grato por qualquer cr√≠tica construtiva. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt477178/">https://habr.com/ru/post/pt477178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt477164/index.html">‚ÄúJogos de ritmo que vale a pena conhecer‚Äù: quais projetos colocam som e o fazem parte do g√™nero</a></li>
<li><a href="../pt477166/index.html">Not√≠cias do mundo do OpenStreetMap n¬∫ 486 (11/05/2019 - 11/11/2019)</a></li>
<li><a href="../pt477168/index.html">Anunciamos suporte para os m√≥dulos ECMAScript no Node.js</a></li>
<li><a href="../pt477170/index.html">Como eu fui a uma reuni√£o na Escola 21</a></li>
<li><a href="../pt477176/index.html">Quais ferramentas ajudar√£o a atender o GDPR</a></li>
<li><a href="../pt477180/index.html">Hist√≥rico: o que √© QoE e por que um provedor deve trabalhar com ele</a></li>
<li><a href="../pt477182/index.html">[Pelas docas] Flutter. Parte 2. Para desenvolvedores do iOS</a></li>
<li><a href="../pt477184/index.html">Fil√≥sofo bot para vk.com</a></li>
<li><a href="../pt477186/index.html">10 anos em um site remoto e o que veio dele</a></li>
<li><a href="../pt477190/index.html">Outra maneira - LFS, multiusu√°rio e o progresso atual do Indie Action / RPG</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>