<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üññüèº üë©üèº‚ÄçüöÄ üïã Notes du fournisseur IoT. Technologie et √©conomie LoRaWAN dans l'√©clairage urbain üßôüèæ üßúüèæ üêê</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans la derni√®re s√©rie ... 

 Il y a environ un an, j'ai √©crit sur la gestion de l'√©clairage urbain dans l'une de nos villes. Tout y √©tait tr√®s simple...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Notes du fournisseur IoT. Technologie et √©conomie LoRaWAN dans l'√©clairage urbain</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483790/">  <b>Dans la derni√®re s√©rie ...</b> <br><br>  Il y a environ un an, j'ai <a href="https://habr.com/ru/post/434266/">√©crit</a> sur la gestion de l'√©clairage urbain dans l'une de nos villes.  Tout y √©tait tr√®s simple: selon le planning, l'alimentation des lampes √©tait activ√©e et d√©sactiv√©e via le SHUNO (armoire de commande pour l'√©clairage ext√©rieur).  Il y avait un relais dans le SHUNO, au commandement duquel une cha√Æne de lumi√®res √©tait allum√©e.  De l'int√©ressant, peut-√™tre, seulement que cela a √©t√© fait via LoRaWAN. <br><br>  Comme vous vous en souvenez, au d√©part, nous avons √©t√© construits sur des modules SI-12 (Fig. 1) de Vega.  M√™me au stade pilote, nous avons imm√©diatement eu des probl√®mes. <br><br><img src="https://habrastorage.org/webt/di/d7/so/did7soqe2e7vu1w2rge21geog34.png"><br>  <i>Figure 1. - Module SI-12</i> <br><a name="habracut"></a><br><ol><li>  Nous d√©pendions du r√©seau LoRaWAN.  Interf√©rence grave sur l'air ou crash du serveur et nous avons des probl√®mes avec l'√©clairage de la ville.  Peu probable, mais possible. </li><li>  Le SI-12 n'a qu'une entr√©e d'impulsion.  Vous pouvez y connecter un compteur √©lectrique et y lire les relev√©s actuels.  Mais pendant une courte p√©riode (5-10 minutes), il est impossible de suivre le saut de consommation qui se produit apr√®s avoir allum√© les lumi√®res.  Ci-dessous, je vais expliquer pourquoi c'est important. </li><li>  Le probl√®me est plus grave.  Modules SI-12 suspendus de mani√®re stable.  Environ une fois toutes les 20 courses.  En collaboration avec Vega, nous avons essay√© d'√©liminer la cause.  Au cours du pilote, deux nouveaux micrologiciels de module et une nouvelle version de serveur ont √©t√© publi√©s, o√π ils ont r√©solu plusieurs probl√®mes graves.  √Ä la fin, les modules ont cess√© de se bloquer.  Et pourtant nous nous sommes √©loign√©s d'eux. </li></ol><br>  Et maintenant ... <br><br>  Pour le moment, nous avons construit un projet beaucoup plus avanc√©. <br><br>  Il est bas√© sur des modules IS-Industry (Fig. 2).  Iron a √©t√© d√©velopp√© par notre sous-traitant, ils ont eux-m√™mes √©crit le firmware.  Ceci est un module tr√®s intelligent.  Selon le micrologiciel qui y est charg√©, il peut contr√¥ler l'√©clairage ou interroger les appareils de mesure avec un large ensemble de param√®tres.  Par exemple, des compteurs de chaleur ou des compteurs d'√©lectricit√© triphas√©s. <br>  Quelques mots sur ce qui est mis en ≈ìuvre. <br><br><img src="https://habrastorage.org/webt/_u/x8/cg/_ux8cggabg-ymfw8fcvjyogj2om.png"><br>  <i>Figure 2. - Module IS-Industry</i> <br><br>  1. D√©sormais, IS-Industry a sa propre m√©moire.  Avec le firmware pour la lumi√®re, les soi-disant strat√©gies sont charg√©es √† distance dans cette m√©moire.  En fait, il s'agit d'un programme d'activation / d√©sactivation de SHUNO pendant une certaine p√©riode.  Nous ne d√©pendons plus du canal radio lors de son allumage et extinction.  √Ä l'int√©rieur du module, il y a un calendrier selon lequel cela fonctionne ind√©pendamment de quoi que ce soit.  Chaque pratique est n√©cessairement accompagn√©e d'une commande au serveur.  Le serveur doit savoir que notre √©tat a chang√©. <br><br>  2. Le m√™me module peut interroger le compteur √©lectrique du SHUNO.  Toutes les heures, des paquets viennent de lui avec une consommation et un tas de param√®tres que le compteur peut produire. <br>  Mais ce n'est pas l'essentiel.  Deux minutes apr√®s le changement d'√©tat, une commande extraordinaire est envoy√©e avec des relev√©s de compteur instantan√©s.  D'apr√®s eux, nous pouvons juger que la lumi√®re s'est vraiment allum√©e ou √©teinte.  Ou quelque chose s'est mal pass√©.  Il y a deux indicateurs dans l'interface.  Le commutateur affiche l'√©tat actuel du module.  L'ampoule est li√©e √† l'absence ou √† la pr√©sence de consommation.  Si ces √©tats se contredisent (le module est √©teint, mais la consommation est allum√©e et vice versa), alors la ligne avec le SHUNO est surlign√©e en rouge et une alarme est g√©n√©r√©e (Fig.3).  √Ä l'automne, un tel syst√®me nous a aid√©s √† trouver un relais-d√©marreur coinc√©.  En fait, le probl√®me n'est pas le n√¥tre, notre module fonctionnait correctement.  Mais nous travaillons dans l'int√©r√™t du client.  Par cons√©quent, ils doivent lui montrer tout accident pouvant entra√Æner des probl√®mes d'√©clairage. <br><br><img src="https://habrastorage.org/webt/wr/6m/et/wr6met37vmkagjtz85ttaakgf7w.png"><br>  <i>Figure 3. - La consommation contredit l'√©tat du relais.</i>  <i>Par cons√©quent, la ligne est surlign√©e en rouge</i> <br><br>  Selon les relev√©s horaires, des graphiques sont construits. <br><br>  La logique est la m√™me que la derni√®re fois.  Nous surveillons le fait d'inclure l'augmentation de la consommation d'√©lectricit√©.  Suivez la consommation m√©diane.  Consommation en dessous de la m√©diane - une partie des lampes s'est √©teinte, au-dessus - elles volent l'√©lectricit√© d'un pilier. <br><br>  3. Paquets r√©guliers avec des informations sur la consommation et que le module est en ordre.  Ils viennent √† des moments diff√©rents et ne cr√©ent pas d'√©crasement dans l'air. <br><br>  4. Comme pr√©c√©demment, nous pouvons forcer la mise sous / hors tension du SHUNO √† tout moment.  Il est n√©cessaire, par exemple, de rechercher une lanterne br√ªl√©e dans une cha√Æne par une brigade d'urgence. <br><br>  De telles am√©liorations augmentent parfois la tol√©rance aux pannes. <br>  Ce mod√®le de gestion est aujourd'hui peut-√™tre le plus demand√© en Russie. <br><br>  Et aussi ... <br><br>  Nous sommes all√©s plus loin. <br><br>  Le fait est que vous pouvez g√©n√©ralement vous √©loigner de ShUNO dans le sens classique et contr√¥ler chaque lampe individuellement. <br><br>  Pour ce faire, il est n√©cessaire que la lampe de poche supporte le protocole de gradation (0-10, DALI ou autre) et dispose d'une prise Nemo. <br><br>  La prise Nemo est un connecteur standard √† 7 broches (sur la figure 4), qui est souvent utilis√© dans l'√©clairage public.  De la lampe de poche, les contacts d'alimentation et d'interface sont √©mis vers ce connecteur. <br><br><img src="https://habrastorage.org/webt/lf/yk/rx/lfykrxgs2s31avpkqrd3p1adxgq.jpeg"><br>  <i>Figure 4. - Prise Nemo</i> <br><br>  0-10 est un protocole de contr√¥le d'√©clairage bien connu.  D√©j√† pas jeune, mais bien √©tabli.  Gr√¢ce aux commandes de ce protocole, nous pouvons non seulement allumer ou √©teindre la lampe, mais aussi la mettre en mode de gradation.  Autrement dit, tamisez la lumi√®re sans l'√©teindre compl√®tement.  Nous pouvons couper une certaine valeur en pourcentage.  30 ou 70 ou 43. <br><br>  Cela fonctionne comme √ßa.  En plus de la prise Nemo, notre module de contr√¥le est install√©.  Ce module prend en charge le protocole 0-10.  Les √©quipes passent par LoRaWAN via le canal radio (Fig. 5). <br><br><img src="https://habrastorage.org/webt/ys/il/vp/ysilvp3v7oo3agaazzg4uvkw_q8.jpeg"><br>  <i>Figure 5. - Lampe de poche avec module de commande</i> <br><br>  Que peut faire ce module? <br><br>  Il sait comment allumer et √©teindre la lampe, en l'att√©nuant d'une certaine quantit√©.  Et il sait comment suivre la consommation de la lampe.  En cas de variation, une baisse de la consommation de courant est observ√©e. <br><br>  Maintenant, nous suivons non seulement une cha√Æne de lanternes, nous g√©rons et suivons CHAQUE lanterne.  Et, bien s√ªr, pour chacune des lampes, nous pouvons obtenir une certaine erreur. <br><br>  De plus, vous pouvez consid√©rablement compliquer la logique des strat√©gies. <br><br>  Par exemple.  Nous informons la lampe num√©ro 5 qu'elle doit s'allumer √† 18-00, √† 3-00 gris√©e de 50% √† 4-50, puis rallumer √† cent pour cent et s'√©teindre √† 9-20.  Tout cela se configure facilement dans notre interface et se transforme en une strat√©gie de travail compr√©hensible pour la lampe.  Cette strat√©gie est vers√©e sur la lampe et elle fonctionne jusqu'√† l'arriv√©e d'autres √©quipes. <br><br>  Comme dans le cas du module pour SHUNO, nous n'avons aucun probl√®me avec la perte de communications radio.  M√™me si quelque chose de critique lui arrive, l'√©clairage continuera de fonctionner.  De plus, il n'y a pas d'√©crasement dans l'air au moment o√π vous devez allumer, disons, une centaine de lampes.  Nous pouvons les contourner en toute s√©curit√© √† tour de r√¥le, en lisant et en ajustant les strat√©gies.  De plus, avec une certaine p√©riodicit√©, les paquets de signaux sont configur√©s pour que l'appareil soit vivant et pr√™t √† communiquer. <br>  Une manipulation impr√©vue ne se fera qu'en cas d'accident.  Heureusement, dans ce cas, nous avons un luxe tel que la nourriture constante et nous pouvons nous permettre la classe C. <br><br>  Une question importante que je reviendrai.  Chaque fois que nous pr√©sentons notre syst√®me, ils me demandent - qu'en est-il d'un relais photo?  Peut-on y visser la photocellule? <br><br>  Purement technique - il n'y a aucun probl√®me.  Mais tous les clients avec qui nous discutons maintenant refusent cat√©goriquement de prendre des informations des capteurs photo.  Demandez √† fonctionner uniquement avec le calendrier et les formules astronomiques.  Pourtant, l'√©clairage de la ville est critique et important. <br><br>  Et maintenant, la chose la plus importante.  L'√©conomie. <br><br>  Travailler avec SHUNO via un module radio pr√©sente des avantages √©vidents, un co√ªt relativement faible.  Augmente le contr√¥le des luminaires et simplifie la maintenance.  Tout est clair ici et les avantages √©conomiques sont √©vidents. <br><br>  Mais avec le contr√¥le de chaque lampe, tout est plus compliqu√©. <br><br>  Il existe plusieurs projets similaires mis en ≈ìuvre en Russie.  Leurs int√©grateurs rapportent fi√®rement qu'en raison de la gradation, ils ont r√©ussi √† r√©aliser des √©conomies d'√©nergie et ainsi r√©cup√©rer le projet. <br><br>  Notre exp√©rience montre que tout n'est pas si simple. <br><br>  Ci-dessous, je donne un tableau avec le calcul de la rentabilit√© de la variation en roubles par an et en mois pour une lampe (Fig. 6). <br><br><img src="https://habrastorage.org/webt/-9/y_/qi/-9y_qibht62iebiwwgt9ibdiwei.png"><br>  <i>Figure 6. - Calcul des √©conomies de gradation</i> <br><br>  Il indique le nombre d'heures d'√©clairage par jour, en moyenne sur plusieurs mois.  Nous pensons qu'environ 30% de ce temps, la lampe brille √† 50% de la puissance et 30% √† 30% de la puissance.  Le reste est √† pleine puissance.  Arrondi aux dixi√®mes. <br>  Par souci de simplicit√©, je crois que dans le mode d'alimentation √† 50%, la lampe consomme la moiti√© de ce qu'elle consomme √† 100%.  C'est aussi un peu faux, car il y a une consommation du conducteur, qui est constante.  C'est-√†-dire  les √©conomies r√©elles sortiront moins que dans le tableau.  Mais pour la simplicit√© de la perception, qu'il en soit ainsi. <br><br>  Nous prendrons le prix du kilowatt d'√©lectricit√© √† 5 roubles, le prix moyen pour les personnes morales. <br><br>  Au total, pendant un an sur une lampe, il est vraiment possible d'√©conomiser de 313 roubles √† 1409 roubles.  Comme vous pouvez le voir, sur les appareils √† faible consommation, l'avantage est tr√®s minime, avec des illuminateurs puissants plus int√©ressants. <br><br>  Et les co√ªts? <br><br>  La hausse du prix de chaque lampe, lors de l'ajout du module LoRaWAN, est d'environ 5500 roubles.  L√†, le module lui-m√™me co√ªte environ 3 000, plus le co√ªt de la prise Nemo sur la lampe, 1 500 roubles suppl√©mentaires, plus les travaux d'installation et de configuration.  Cela, je ne tiens toujours pas compte du fait que pour de telles lampes, il est n√©cessaire de payer une redevance mensuelle au propri√©taire du r√©seau. <br><br>  Il s'av√®re que le retour sur investissement du syst√®me est au mieux (avec la lampe la plus puissante) un peu moins de quatre ans.  Retour sur investissement.  Un long moment. <br><br>  Mais m√™me dans ce cas, tout sera annul√© par les frais mensuels.  Et sans cela, le co√ªt devra encore reposer sur la maintenance du r√©seau LoRaWAN, qui n'est pas non plus bon march√©. <br><br>  Il y a encore de petites √©conomies dans le travail des √©quipes d'urgence, qui pr√©voient d√©sormais de travailler de mani√®re beaucoup plus optimale.  Mais elle ne sauvera pas. <br><br>  Il s'av√®re, tout en vain? <br><br>  Non.  En fait, la bonne r√©ponse est la suivante. <br><br>  La gestion de chaque lanterne fait partie d'une ville intelligente.  La partie qui ne sauvegarde pas directement et pour laquelle il faut m√™me payer un petit suppl√©ment.  Mais en retour, nous obtenons une chose importante.  Dans cette architecture, nous avons une alimentation garantie constante sur chaque pilier 24h / 24.  Pas seulement la nuit. <br><br>  Presque tous les fournisseurs ont √©t√© confront√©s √† un probl√®me.  Nous devons faire du wi-fi sur la place principale.  Ou la vid√©osurveillance dans le parc.  L'administration donne le feu vert et apporte son soutien.  Mais le probl√®me est que les poteaux d'√©clairage et l'√©lectricit√© ne sont l√† que la nuit.  Nous devons √™tre sages, tirer plus de puissance le long des supports, mettre des piles et autres choses √©tranges. <br><br>  Dans le cas du contr√¥le de chaque lampe, nous pouvons accrocher calmement quelque chose d'autre sur un poteau avec une lampe et la rendre ¬´intelligente¬ª. <br><br>  Et l√† encore la question de l'√©conomie et de l'applicabilit√©.  Quelque part au fond de la ville, SHUNO suffit aux yeux.  Au centre, il est logique de construire quelque chose de plus complexe et g√©rable. <br><br>  L'essentiel est que dans ces calculs les chiffres r√©els soient indiqu√©s, et non les r√™ves sur l'Internet des objets. <br><br>  <b>PS</b> Pour cette ann√©e j'ai r√©ussi √† √©changer avec de nombreux ing√©nieurs engag√©s dans le domaine de l'√©clairage.  Et certains m'ont fait valoir qu'il y avait encore une √©conomie dans la gestion de chaque lampe.  Je suis ouvert √† la discussion, mes calculs sont donn√©s.  Si vous pouvez prouver le contraire, je vous en parlerai. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr483790/">https://habr.com/ru/post/fr483790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr483778/index.html">Semaine de la s√©curit√© 03: Principes responsables de rapport de bogue</a></li>
<li><a href="../fr483780/index.html">Qu'est-ce que Slack et comment √ßa marche?</a></li>
<li><a href="../fr483784/index.html">Comment faire une application multi-locataire √† partir d'une application non-locataire</a></li>
<li><a href="../fr483786/index.html">Tri hybride</a></li>
<li><a href="../fr483788/index.html">Une petite nation insulaire gagne gr√¢ce √† Twitch</a></li>
<li><a href="../fr483794/index.html">Quitter: pourquoi ne pas prendre Kontroffer</a></li>
<li><a href="../fr483796/index.html">Param√®tres facultatifs dans les r√©f√©rentiels de donn√©es Spring</a></li>
<li><a href="../fr483798/index.html">Comment automatiser la composition d'annonces dans Google Ads</a></li>
<li><a href="../fr483800/index.html">Ne dors pas! Comment nous avons appris √† publier 12 000 offres de billets par nuit</a></li>
<li><a href="../fr483802/index.html">Comment lancer un produit seul si vous √™tes d√©veloppeur: conseils du cr√©ateur de Laravel, Taylor Otvel. Partie 1: Public</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>