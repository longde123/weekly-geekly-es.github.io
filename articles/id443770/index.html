<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üê† üë∏üèº üé≠ Desain Berbasis Domain: Objek Nilai dan Kerangka Entitas Inti dalam Praktek üçÉ üöµüèª ‚úãüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di Habr√© dan tidak hanya sejumlah artikel yang layak telah ditulis tentang Desain Berbasis Domain - keduanya secara umum tentang arsitektur, dan denga...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desain Berbasis Domain: Objek Nilai dan Kerangka Entitas Inti dalam Praktek</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443770/">  Di Habr√© dan tidak hanya sejumlah artikel yang layak telah ditulis tentang Desain Berbasis Domain - keduanya secara umum tentang arsitektur, dan dengan contoh-contoh di .Net.  Tetapi pada saat yang sama, bagian penting dari arsitektur ini sebagai Value Objects sering disebutkan dengan buruk. <br><br>  Pada artikel ini, saya akan mencoba mengungkap nuansa mengimplementasikan Value Objects dalam .Net Core menggunakan Entity Framework Core. <br><br>  Di bawah kucing ada banyak kode. <br><a name="habracut"></a><br><h2>  Sedikit teori </h2><br>  Inti dari arsitektur Desain Didorong Domain adalah <b>Domain</b> - area subjek di mana perangkat lunak yang dikembangkan diterapkan.  Berikut adalah seluruh logika bisnis aplikasi, yang biasanya berinteraksi dengan berbagai data.  Data dapat terdiri dari dua jenis: <br><br><ul><li>  Objek Entitas </li><li>  Objek Nilai (selanjutnya - VO) </li></ul><br>  <b>Objek Entitas</b> mendefinisikan entitas dalam logika bisnis dan selalu memiliki pengidentifikasi yang dengannya Entity dapat ditemukan atau dibandingkan dengan Entitas lain.  Jika dua Entitas memiliki pengidentifikasi yang identik, ini adalah Entitas yang sama.  Hampir selalu berubah. <br>  <b>Nilai Objek</b> adalah tipe yang tidak dapat diubah, nilai yang ditetapkan selama penciptaan dan tidak berubah sepanjang umur objek.  Itu tidak memiliki pengidentifikasi.  Jika dua VO secara struktural identik, mereka setara. <br><br>  Entity dapat berisi Entity dan VO lainnya.  VO mungkin termasuk VO lain, tetapi bukan Entitas. <br><br>  Dengan demikian, logika domain harus bekerja secara eksklusif dengan Entity dan VO - ini menjamin konsistensi.  Tipe data dasar seperti string, int, dll.  seringkali mereka tidak dapat bertindak sebagai VO, karena mereka hanya dapat melanggar keadaan domain - yang hampir merupakan bencana dalam kerangka kerja DDD. <br><br>  Sebuah contoh  Dalam berbagai manual, kelas Person, yang membuat semua orang muak, sering ditampilkan seperti ini: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Person</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Age { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  Sederhana dan jelas - pengidentifikasi, nama dan usia, di mana Anda dapat membuat kesalahan? <br><br>  Dan mungkin ada beberapa kesalahan di sini - misalnya, dari sudut pandang logika bisnis, namanya wajib, tidak boleh panjang nol atau lebih dari 100 karakter dan tidak boleh mengandung karakter khusus, tanda baca, dll.  Dan usia tidak boleh kurang dari 10 atau lebih dari 120 tahun. <br><br>  Dari sudut pandang bahasa pemrograman, 5 adalah integer yang benar-benar normal, sama seperti string kosong.  Tetapi domain sudah dalam kondisi yang salah. <br><br><h2>  Mari kita lanjutkan berlatih </h2><br>  Pada titik ini, kita tahu bahwa VO harus tidak berubah dan mengandung nilai yang valid untuk logika bisnis. <br><br>  Kekebalan dicapai dengan menginisialisasi properti readonly saat membuat objek. <br>  Validasi nilai terjadi di konstruktor (Penjaga klausa).  Sangat diinginkan untuk membuat verifikasi itu sendiri tersedia untuk umum - sehingga lapisan lain dapat memvalidasi data yang diterima dari klien (browser yang sama). <br><br>  Mari kita membuat VO untuk Nama dan Usia.  Selain itu, kami sedikit menyulitkan tugas - menambahkan PersonalName yang menggabungkan FirstName dan LastName, dan menerapkannya pada Orang. <br><br><div class="spoiler">  <b class="spoiler_title">Nama</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Name</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Regex ValidationRegex = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Regex( <span class="hljs-string"><span class="hljs-string">@"^[\p{L}\p{M}\p{N}]{1,100}\z"</span></span>, RegexOptions.Singleline | RegexOptions.Compiled); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Name</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsValid(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-string"><span class="hljs-string">"Name is not valid"</span></span>); } Value = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsValid</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">String </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !String.IsNullOrWhiteSpace(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>) &amp;&amp; ValidationRegex.IsMatch(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Object obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Name other &amp;&amp; StringComparer.Ordinal.Equals(Value, other.Value); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Int32 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetHashCode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> StringComparer.Ordinal.GetHashCode(Value); } }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Nama pribadi</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PersonalName</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PersonalName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PersonalName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Name firstName, Name lastName</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (firstName == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(firstName)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (lastName == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(lastName)); } FirstName = firstName; LastName = lastName; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Name FirstName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Name LastName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> String FullName =&gt; <span class="hljs-string"><span class="hljs-string">$"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{FirstName}</span></span></span><span class="hljs-string"> </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{LastName}</span></span></span><span class="hljs-string">"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Object obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> PersonalName personalName &amp;&amp; EqualityComparer&lt;Name&gt;.Default.Equals(FirstName, personalName.FirstName) &amp;&amp; EqualityComparer&lt;Name&gt;.Default.Equals(LastName, personalName.LastName); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Int32 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetHashCode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> HashCode.Combine(FirstName, LastName); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FullName; } }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Usia</b> <div class="spoiler_text"><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Age</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Age</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Int32 </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!IsValid(<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentException(<span class="hljs-string"><span class="hljs-string">"Age is not valid"</span></span>); } Value = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Int32 Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsValid</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Int32 </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> &lt;= <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> &lt;= <span class="hljs-number"><span class="hljs-number">120</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Boolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Equals</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Object obj</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> obj <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Age other &amp;&amp; Value == other.Value; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> Int32 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetHashCode</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Value.GetHashCode(); } }</code> </pre> <br></div></div><br>  Dan akhirnya Orang: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Person</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Person</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PersonalName personalName, Age age</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (personalName == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(personalName)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (age == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(age)); } Id = Guid.NewGuid(); PersonalName= personalName; Age = age; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Guid Id { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PersonalName PersonalName{ <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Age Age { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre> <br>  Karenanya, kami tidak dapat membuat Orang tanpa nama atau usia lengkap.  Selain itu, kami tidak dapat membuat nama "salah" atau usia "salah".  Seorang programmer yang baik pasti akan memeriksa data yang diterima di controller menggunakan Name.IsValid ("John") dan Age.IsValid (35) metode dan, jika ada data yang salah, akan menginformasikan klien tentang hal ini. <br><br>  Jika kita membuat aturan di mana-mana dalam model untuk menggunakan hanya Entity dan VO, maka kita akan melindungi diri kita dari sejumlah besar kesalahan - data yang salah tidak akan masuk ke model. <br><br><h2>  Ketekunan </h2><br>  Sekarang kita perlu menyimpan data kita di gudang data dan mendapatkannya berdasarkan permintaan.  Kami akan menggunakan Entity Framework Core sebagai ORM, dan data warehouse adalah MS SQL Server. <br><br>  DDD dengan jelas mendefinisikan: Kegigihan adalah subspesies dari lapisan infrastruktur karena menyembunyikan implementasi spesifik dari akses data. <br><br>  Domain tidak perlu tahu apa-apa tentang Kegigihan, ini hanya menentukan antarmuka repositori. <br><br>  Dan Kegigihan berisi implementasi spesifik, konfigurasi pemetaan, serta objek UnitOfWork. <br><br>  Ada dua pendapat apakah perlu membuat repositori dan Unit Kerja. <br><br>  Di satu sisi - tidak, itu tidak perlu, karena di Entity Framework Core ini semua sudah diterapkan.  Jika kita memiliki arsitektur multi-level dari bentuk DAL -&gt; Business Logic -&gt; Presentation, yang didasarkan pada penyimpanan data, lalu mengapa tidak menggunakan kemampuan EF Core secara langsung. <br><br>  Tetapi domain dalam DDD tidak bergantung pada penyimpanan data dan ORM yang digunakan - ini semua adalah seluk-beluk implementasi yang dirangkum dalam Persistence dan tidak lagi menarik minat siapa pun.  Jika kami memberikan DbContext ke lapisan lain, maka kami segera mengungkapkan detail implementasi, mengikat erat ke ORM yang dipilih dan mendapatkan DAL - sebagai dasar dari semua logika bisnis, tetapi seharusnya tidak demikian.  Secara kasar, domain seharusnya tidak melihat perubahan dalam ORM dan bahkan hilangnya Persistence sebagai layer. <br><br>  Jadi, antarmuka repositori Orang, dalam domain: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IPersons</span></span> { <span class="hljs-function"><span class="hljs-function">Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Person person</span></span></span><span class="hljs-function">)</span></span>; Task&lt;IReadOnlyList&lt;Person&gt;&gt; GetList(); }</code> </pre> <br>  dan implementasinya dalam Kegigihan: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">EfPersons</span></span> : <span class="hljs-title"><span class="hljs-title">IPersons</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> PersonsDemoContext _context; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EfPersons</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">UnitOfWork unitOfWork</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (unitOfWork == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(unitOfWork)); } _context = unitOfWork.Context; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Person person</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (person == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(person)); } <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _context.Persons.AddAsync(person); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;IReadOnlyList&lt;Person&gt;&gt; GetList() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _context.Persons.ToListAsync(); } }</code> </pre> <br>  Tampaknya tidak ada yang rumit, tetapi ada masalah.  Entity Framework Core keluar dari kotak hanya bekerja dengan tipe dasar (string, int, DateTime, dll.) Dan tidak tahu apa-apa tentang PersonalName dan Usia.  Ayo ajari EF Core untuk memahami Objek Nilai kita. <br><br><h2>  Konfigurasi </h2><br>  API Lancar paling cocok untuk mengonfigurasi Entitas di DDD.  Atribut tidak cocok, karena domain tidak perlu tahu apa-apa tentang nuansa pemetaan. <br><br>  Buat kelas dengan Kegigihan dengan konfigurasi dasar PersonConfiguration: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PersonConfiguration</span></span> : <span class="hljs-title"><span class="hljs-title">IEntityTypeConfiguration</span></span>&lt;<span class="hljs-title"><span class="hljs-title">Person</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Configure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">EntityTypeBuilder&lt;Person&gt; builder</span></span></span><span class="hljs-function">)</span></span> { builder.ToTable(<span class="hljs-string"><span class="hljs-string">"Persons"</span></span>); builder.HasKey(p =&gt; p.Id); builder.Property(p =&gt; p.Id).ValueGeneratedNever(); } }</code> </pre> <br>  dan hubungkan ke DbContext: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnModelCreating</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ModelBuilder builder</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.OnModelCreating(builder); builder.ApplyConfiguration(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PersonConfiguration()); }</code> </pre> <br><h2>  Pemetaan </h2><br>  Bagian dari mana bahan ini ditulis. <br><br>  Saat ini, ada dua cara yang lebih atau kurang nyaman untuk memetakan kelas non-standar ke tipe dasar - Konversi Nilai dan Jenis Milik. <br><br><h3>  Konversi nilai </h3><br>  Fitur ini muncul di Entity Framework Core 2.1 dan memungkinkan Anda untuk menentukan konversi antara kedua tipe data. <br><br>  Mari kita menulis konverter untuk Umur (di bagian ini semua kode dalam PersonConfiguration): <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ageConverter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ValueConverter&lt;Age, Int32&gt;( v =&gt; v.Value, v =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Age(v)); builder .Property(p =&gt; p.Age) .HasConversion(ageConverter) .HasColumnName(<span class="hljs-string"><span class="hljs-string">"Age"</span></span>) .HasColumnType(<span class="hljs-string"><span class="hljs-string">"int"</span></span>) .IsRequired();</code> </pre><br>  Sintaksis yang sederhana dan ringkas, tetapi bukan tanpa cacat: <br><br><ol><li>  Tidak dapat mengonversi nol; </li><li>  Tidak mungkin untuk mengubah satu properti menjadi beberapa kolom dalam sebuah tabel dan sebaliknya; </li><li>  EF Core tidak dapat mengonversi ekspresi LINQ dengan properti ini ke kueri SQL. </li></ol><br>  Saya akan membahas poin terakhir lebih terinci.  Tambahkan metode ke repositori yang mengembalikan daftar Orang di atas usia yang diberikan: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;IReadOnlyList&lt;Person&gt;&gt; GetOlderThan(Age age) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (age == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(age)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _context.Persons .Where(p =&gt; p.Age.Value &gt; age.Value) .ToListAsync(); }</code> </pre> <br>  Ada kondisi untuk usia, tetapi EF Core tidak akan dapat mengubahnya menjadi query SQL dan, mencapai Where (), itu akan memuat seluruh tabel ke dalam memori aplikasi dan, hanya kemudian, menggunakan LINQ, itu akan memenuhi kondisi p.Age.Value&gt; age.Value . <br><br>  Secara umum, Konversi Nilai adalah opsi pemetaan yang sederhana dan cepat, tetapi Anda perlu mengingat tentang fitur EF Core ini, jika tidak, pada titik tertentu, saat menanyakan tabel besar, memori mungkin habis. <br><br><h3>  Jenis yang dimiliki </h3><br>  Jenis yang Dimiliki muncul di Entity Framework Core 2.0 dan menggantikan Tipe Kompleks dari Entity Framework biasa. <br><br>  Mari jadikan Umur sebagai Jenis Milik: <br><br><pre> <code class="cs hljs">builder.OwnsOne(p =&gt; p.Age, a =&gt; { a.Property(u =&gt; u.Value).HasColumnName(<span class="hljs-string"><span class="hljs-string">"Age"</span></span>); a.Property(u =&gt; u.Value).HasColumnType(<span class="hljs-string"><span class="hljs-string">"int"</span></span>); a.Property(u =&gt; u.Value).IsRequired(); });</code> </pre> <br>  Tidak buruk.  Dan Jenis Milik tidak memiliki beberapa kelemahan dari Konversi Nilai, yaitu poin 2 dan 3. <br><br>  2. <u>Dimungkinkan untuk</u> mengubah satu properti menjadi beberapa kolom dalam tabel dan sebaliknya <br><br>  Apa yang Anda butuhkan untuk PersonalName, meskipun sintaks sudah sedikit kelebihan: <br><br><pre> <code class="cs hljs">builder.OwnsOne(b =&gt; b.PersonalName, pn =&gt; { pn.OwnsOne(p =&gt; p.FirstName, fn =&gt; { fn.Property(x =&gt; x.Value).HasColumnName(<span class="hljs-string"><span class="hljs-string">"FirstName"</span></span>); fn.Property(x =&gt; x.Value).HasColumnType(<span class="hljs-string"><span class="hljs-string">"nvarchar(100)"</span></span>); fn.Property(x =&gt; x.Value).IsRequired(); }); pn.OwnsOne(p =&gt; p.LastName, ln =&gt; { ln.Property(x =&gt; x.Value).HasColumnName(<span class="hljs-string"><span class="hljs-string">"LastName"</span></span>); ln.Property(x =&gt; x.Value).HasColumnType(<span class="hljs-string"><span class="hljs-string">"nvarchar(100)"</span></span>); ln.Property(x =&gt; x.Value).IsRequired(); }); });</code> </pre> <br>  3. EF Core <u>dapat</u> mengubah ekspresi LINQ dengan properti ini menjadi query SQL. <br>  Tambahkan pengurutan menurut LastName dan FirstName saat memuat daftar: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> Task&lt;IReadOnlyList&lt;Person&gt;&gt; GetList() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _context.Persons .OrderBy(p =&gt; p.PersonalName.LastName.Value) .ThenBy(p =&gt; p.PersonalName.FirstName.Value) .ToListAsync(); }</code> </pre> <br>  Ekspresi seperti itu akan dikonversi dengan benar ke query SQL dan penyortiran dilakukan pada sisi server SQL, dan tidak dalam aplikasi. <br><br>  Tentu saja, ada juga kekurangannya. <br><br><ol><li>  Masalah dengan null belum hilang; </li><li>  Bidang Jenis yang Dimiliki tidak dapat dibaca dan harus memiliki setter yang dilindungi atau pribadi. </li><li>  Jenis yang Dimiliki diimplementasikan sebagai Entitas reguler, yang berarti: <br><ul><li>  Mereka memiliki pengidentifikasi (seperti properti bayangan, mis. Itu tidak muncul di kelas domain); </li><li>  EF Core melacak semua perubahan pada Jenis yang Dimiliki, persis sama dengan Entitas reguler. </li></ul></li></ol><br>  Di satu sisi, ini sama sekali bukan apa yang seharusnya menjadi Objek Nilai.  Mereka tidak boleh memiliki pengidentifikasi.  VO tidak boleh dilacak untuk perubahan - karena mereka awalnya tidak dapat diubah, properti Entitas induk harus dilacak, tetapi bukan properti VO. <br><br>  Di sisi lain, ini adalah detail implementasi yang bisa dihilangkan, tapi sekali lagi, jangan lupa.  Perubahan pelacakan mempengaruhi kinerja.  Jika ini tidak terlihat dengan pilihan Entitas tunggal (misalnya, dengan Id) atau daftar kecil, maka dengan sampling daftar besar Entitas "berat" (banyak properti-VO), penurunan kinerja akan sangat terlihat justru karena pelacakan. <br><br><h2>  Presentasi </h2><br>  Kami menemukan cara menerapkan Objek Nilai dalam domain dan repositori.  Saatnya menggunakan semuanya.  Mari kita buat dua halaman sederhana - dengan daftar Person dan formulir untuk menambahkan Person. <br><br>  Kode pengontrol tanpa metode Tindakan terlihat seperti ini: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HomeController</span></span> : <span class="hljs-title"><span class="hljs-title">Controller</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IPersons _persons; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> UnitOfWork _unitOfWork; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HomeController</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IPersons persons, UnitOfWork unitOfWork</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (persons == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(persons)); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (unitOfWork == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(unitOfWork)); } _persons = persons; _unitOfWork = unitOfWork; } <span class="hljs-comment"><span class="hljs-comment">// Actions private static PersonModel CreateModel(Person person) { return new PersonModel { FirstName = person.PersonalName.FirstName.Value, LastName = person.PersonalName.LastName.Value, Age = person.Age.Value }; } }</span></span></code> </pre> <br>  Tambahkan Aksi untuk mendapatkan daftar Orang: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">HttpGet</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> persons = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _persons.GetList(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PersonsListModel { Persons = persons .Select(CreateModel) .ToArray() }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(result); }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Lihat</b> <div class="spoiler_text"><pre> <code class="xml hljs">@model PersonsListModel @{ ViewData["Title"] = "Persons List"; } <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display-4"</span></span></span><span class="hljs-tag">&gt;</span></span>Persons<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>Last name<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>First name<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>Age<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">thead</span></span></span><span class="hljs-tag">&gt;</span></span> @foreach (var p in Model.Persons) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@p.LastName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@p.FirstName<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span>@p.Age<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span> } <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">table</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  Tidak ada yang rumit - kami memuat daftar, membuat Objek Transfer Data (PersonModel) untuk masing-masing <br><br>  Orang dan dikirim ke Tampilan yang sesuai. <br><br><div class="spoiler">  <b class="spoiler_title">Hasil</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/-j/n0/qu/-jn0qugs50smvtry852ljdmedte.png"><br></div></div><br>  Jauh lebih menarik adalah penambahan Person: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">HttpPost</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;IActionResult&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddPerson</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">PersonModel model</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (model == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BadRequest(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Name.IsValid(model.FirstName)) { ModelState.AddModelError(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(model.FirstName), <span class="hljs-string"><span class="hljs-string">"FirstName is invalid"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Name.IsValid(model.LastName)) { ModelState.AddModelError(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(model.LastName), <span class="hljs-string"><span class="hljs-string">"LastName is invalid"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Age.IsValid(model.Age)) { ModelState.AddModelError(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(model.Age), <span class="hljs-string"><span class="hljs-string">"Age is invalid"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ModelState.IsValid) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(); } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstName = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Name(model.FirstName); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastName = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Name(model.LastName); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> person = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Person( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PersonalName(firstName, lastName), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Age(model.Age)); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _persons.Add(person); <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _unitOfWork.Commit(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> persons = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> _persons.GetList(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PersonsListModel { Persons = persons .Select(CreateModel) .ToArray() }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(<span class="hljs-string"><span class="hljs-string">"Index"</span></span>, result); }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Lihat</b> <div class="spoiler_text"><pre> <code class="xml hljs">@model PersonDemo.Models.PersonModel @{ ViewData["Title"] = "Add Person"; } <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"display-4"</span></span></span><span class="hljs-tag">&gt;</span></span>Add Person<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"col-md-4"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AddPerson"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-validation-summary</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ModelOnly"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-danger"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FirstName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"control-label"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FirstName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-validation-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"FirstName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-danger"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LastName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"control-label"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LastName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-validation-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LastName"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-danger"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Age"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"control-label"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Age"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-control"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">asp-validation-for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Age"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-danger"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Create"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> @section Scripts { @{await Html.RenderPartialAsync("_ValidationScriptsPartial");} }</code> </pre> <br></div></div><br>  Ada validasi wajib data yang masuk: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Name.IsValid(model.FirstName)) { ModelState.AddModelError(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(model.FirstName), <span class="hljs-string"><span class="hljs-string">"FirstName is invalid"</span></span>); }</code> </pre> <br>  Jika ini tidak dilakukan, maka saat membuat VO dengan nilai yang salah, ArgumentException akan dilempar (ingat tentang Penjaga Klausul dalam konstruktor VO).  Dengan verifikasi, jauh lebih mudah untuk mengirim pesan kepada pengguna bahwa salah satu nilainya salah. <br><br><div class="spoiler">  <b class="spoiler_title">Hasil</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ej/8m/kr/ej8mkr_4de2x23avg5mezwb6gzg.png"><br></div></div><br>  Di sini Anda perlu melakukan penyimpangan kecil - di Asp Net Core ada cara reguler validasi data - menggunakan atribut.  Namun dalam DDD, metode validasi ini tidak benar karena beberapa alasan: <br><br><ul><li>  Kemampuan atribut mungkin tidak cukup untuk logika validasi; </li><li>  Logika bisnis apa pun, termasuk aturan untuk memvalidasi parameter, ditetapkan secara eksklusif oleh domain.  Dia memonopoli ini dan semua lapisan lain harus memperhitungkan ini.  Atribut dapat digunakan, tetapi Anda tidak harus bergantung padanya.  Jika atribut melewatkan data yang salah, maka kita akan mendapatkan kembali pengecualian saat membuat VO. </li></ul><br>  Kembali ke AddPerson ().  Setelah validasi data, PersonalName, Umur, dan kemudian Person dibuat.  Selanjutnya, tambahkan objek ke repositori dan simpan perubahan (Komit).  Sangat penting bahwa Komit tidak dipanggil dalam repositori EfPersons.  Tugas repositori adalah melakukan beberapa tindakan dengan data, tidak lebih.  Komit dilakukan hanya dari luar, ketika tepatnya - programmer memutuskan.  Kalau tidak, situasi mungkin terjadi ketika kesalahan terjadi di tengah-tengah iterasi bisnis tertentu - beberapa data disimpan dan beberapa tidak.  Kami menerima domain dalam keadaan "rusak".  Jika Komit dilakukan di bagian paling akhir, maka jika kesalahan terjadi, transaksi hanya akan memutar kembali. <br><br><h2>  Kesimpulan </h2><br>  Saya memberikan contoh-contoh implementasi Value Objects secara umum dan nuansa pemetaan di Entity Framework Core.  Saya berharap bahwa materi ini akan berguna dalam memahami bagaimana menerapkan elemen-elemen Desain Didorong Domain dalam praktek. <br><br>  Kode Sumber Proyek PersonsDemo Lengkap - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitHub</a> <br><br>  Materi tidak mengungkapkan masalah berinteraksi dengan Objek Nilai opsional (nullable) - jika PersonalName atau Umur tidak diperlukan properti Person.  Saya ingin menggambarkan ini di artikel ini, tetapi sudah keluar agak kelebihan.  Jika ada minat dalam masalah ini - tulis komentar, kelanjutannya akan. <br><br>  Untuk penggemar "arsitektur yang indah" pada umumnya dan Desain Domain Driven pada khususnya, saya sangat merekomendasikan sumber daya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Enterprise Craftsmanship</a> . <br><br>  Ada banyak artikel bermanfaat tentang konstruksi arsitektur yang benar dan contoh implementasi di .Net.  Beberapa ide dipinjam di sana, berhasil diimplementasikan dalam proyek "pertempuran" dan sebagian tercermin dalam artikel ini. <br><br>  Dokumentasi resmi untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Jenis yang Dimiliki</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Konversi Nilai</a> juga digunakan. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id443770/">https://habr.com/ru/post/id443770/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id443756/index.html">Desain Kelas: Apa yang Baik?</a></li>
<li><a href="../id443758/index.html">Pengenalan Cepat Menggambar Doodle: Cara Mencari Teman R, C ++, dan Neural Grids</a></li>
<li><a href="../id443764/index.html">Apa yang dihisap perancang: senjata api yang tidak biasa</a></li>
<li><a href="../id443766/index.html">Mencoba Pemrograman Kontrak C ++ 20 Sekarang</a></li>
<li><a href="../id443768/index.html">Monolith untuk ratusan versi klien: cara kami menulis dan memelihara tes</a></li>
<li><a href="../id443772/index.html">Antiquities: IBM ThinkPad T40, nirkabel pertama</a></li>
<li><a href="../id443774/index.html">Bagaimana Neurobiologi Mengganggu Pemilihan Presiden AS</a></li>
<li><a href="../id443776/index.html">Tiongkok memperkenalkan sistem pengenalan wajah eksperimental saat membayar metro</a></li>
<li><a href="../id443780/index.html">Proyek MCDM. Bagian 1. Konsep</a></li>
<li><a href="../id443782/index.html">Pengembang sekarang dapat menggunakan API jaringan Valve untuk game Steam mereka</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>