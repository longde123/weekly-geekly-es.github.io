<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§úüèΩ üïù üë©‚Äçüë¶‚Äçüë¶ Seriell, UART und Android als Verbindung zu Mikrocontrollern üë®üèΩ‚Äçüöí üìò ü•ô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unsere Themen: 
 Android 4.1.1 Tablet ‚ÄûDNS AirTab M101w‚Äú und folgende Ger√§te: 
 1. LaunchPad der Tiva C-Serie TM4C123G 
 2. Stellaris LaunchPad EK-LM4...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Seriell, UART und Android als Verbindung zu Mikrocontrollern</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444110/"><img src="http://habrastorage.org/storage3/eb1/8c6/302/eb18c6302120c2b776c37554717a80d2.png" alt="Bild" align="left"><h4>  Unsere Themen: </h4><br>  Android 4.1.1 Tablet ‚ÄûDNS AirTab M101w‚Äú und folgende Ger√§te: <br>  1. LaunchPad der Tiva C-Serie TM4C123G <br>  2. Stellaris LaunchPad EK-LM4F120XL-Karte <br>  3. Arduino MEGA 2560 Board <br>  4. Board MSP430 LaunchPad, M430G2553 <br><br>  Und jetzt werden wir alle diese Karten √ºber USB OTG mit dem Tablet verbinden und versuchen, eine Verbindung mit ihnen herzustellen, ohne auf den Root-Zugriff zur√ºckzugreifen. <br><a name="habracut"></a><br><h4>  Betreff 1. LaunchPad der Tiva C-Serie TM4C123G </h4><br>  Das Board hat einen Micro-USB-DEBUG-Anschluss und eine RGB-LED, mit der wir spielen werden. <br>  Die folgende Skizze wurde mit Energia IDE hochgeladen: <br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">char</span></span> data = <span class="hljs-string"><span class="hljs-string">' '</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    boolean rs, gs, bs = false; //   void setup() { //  pinMode(RED_LED, OUTPUT); pinMode(GREEN_LED, OUTPUT); pinMode(BLUE_LED, OUTPUT); Serial.begin(9600); // Serial    9600 } void loop() { if (Serial.available()){ //    data = Serial.read(); //  switch (data){ //  case '1': rs = !rs; break; case '2': gs = !gs; break; case '3': bs = !bs; break; } //  digitalWrite(RED_LED, rs); digitalWrite(GREEN_LED, gs); digitalWrite(BLUE_LED, bs); //    Serial.print("RGB="); Serial.print(rs); Serial.print(gs); Serial.println(bs); } }</span></span></code> </pre> <br><br>  In meinem Fall wird bei Verbindung mit dem Tablet die Datei tty1-1: 1.0 im Verzeichnis / dev / usb / angezeigt.  Versuchen wir Folgendes im Terminalemulator zu registrieren: <br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 2 &gt; /dev/tty1-1:1.0 $ <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> s &lt; /dev/tty1-1:1.0 $ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$s</span></span> RGB=010</code> </pre><br><br>  Und dann, unerwartet f√ºr mich, geht ein gr√ºnes Licht an und ich sah eine Ausgangsleitung.  Warum unerwartet?  Weil ich es vers√§umt habe, die Verbindung vorab zu konfigurieren, steckte ich meinen Finger in den Himmel, aber wie gut!  Wir werden nicht weiter darauf eingehen.  Aber ich werde sagen, dass in verschiedenen Versionen des Kerns die Boards unterschiedlich definiert sind und Sie sich keine einzige Befehlszeile ohne Kr√ºcken vorstellen k√∂nnen <s>(ja, Linux ist normal)</s> . <br><br>  Nachdem ich ein wenig mit Farben gespielt und verschiedene Zahlen an den sogenannten COM-Port gesendet hatte, suchte ich nach einer universellen Android-L√∂sung.  Bei Google Play gibt es viel f√ºr ‚ÄûSerial UART‚Äú, und die meisten Anwendungen funktionieren wie erwartet mit einem Spielzeug von Texas Instruments.  Aber meine Versuche, einen mit Open Source kompatiblen Thread zu finden, endeten mit fast nichts.  F√ºr Arduino habe ich eine coole Bibliothek gefunden, aber mehr dazu weiter unten ... <br><br><h4>  Thema 2: Stellaris LaunchPad EK-LM4F120XL Board </h4><br>  Soweit ich wei√ü, ist dies die vorherige Version unseres ersten Testobjekts und verh√§lt sich mit dem Android genauso.  Die aktuelle Energia 0101E0010 sieht diese Karte jedoch nicht, wenn sie versucht, die Skizze auszuf√ºllen (Windows 8). <br><pre> <code class="plaintext hljs">No ICDI device with USB VID:PID 1cbe:00fd found! Failed!</code> </pre><br><br>  Daher habe ich gerade die Ausgabe des endg√ºltigen Bin√§rpfads zur Konsole eingeschaltet und sie manuell mit dem LM Flash Programmer geladen. <br><br><h4>  Thema 3: Arduino MEGA 2560 Board </h4><br>  Lassen Sie uns die Skizze ein wenig √§ndern und wir werden nur mit einer LED blinken. <br>  F√ºllen Sie mit der Arduino IDE <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LED 13 char data = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">' '</span></span></span><span class="hljs-meta">; boolean ls = false; void setup() { pinMode(LED, OUTPUT); Serial.begin(9600); } void loop() { </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (Serial.available()){ data = Serial.read(); switch (data){ case </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">'1'</span></span></span><span class="hljs-meta">: ls = !ls; break; } digitalWrite(LED, ls); Serial.print(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"LED="</span></span></span><span class="hljs-meta">); Serial.println(ls); } }</span></span></code> </pre><br><br>  Wir stellen eine Verbindung zum Tablet her. Wieder sehen wir die Datei tty1-1: 1.0 im Verzeichnis / dev / usb /. Wir wiederholen das Experiment: <br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> 1 &gt; /dev/tty1-1:1.0</code> </pre><br>  und dann stelle ich fest, dass die LED 2 Mal mit einer Periode von ungef√§hr 100 ms blinkt und erlischt.  Okay, ich versuche Folgendes: <br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">read</span></span> s &lt; /dev/tty1-1:1.0</code> </pre><br>  Und dann erstarrte das Terminal vor Erwartung ... Okay, Strg + C. <br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">$s</span></span></code> </pre><br>  Es ist logisch, dass die Ausgabe nichts enth√§lt. <br><br>  Aber dies war nur eine Einf√ºhrung, es gibt ein wunderbares Projekt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Physicaloid Library</a> .  √ñffnen Sie zun√§chst die Bibliothek als normales Android-Projekt in Eclipse.  Erstellen Sie nun ein neues Projekt und klicken Sie in seinen Eigenschaften im Element Android auf Bibliothek auf Hinzuf√ºgen ... und w√§hlen Sie Physicaloid Library.  Dr√ºcken Sie nun die Taste, um die Zeichenfolge "1" an das Arduino zu senden: <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// TODO Auto-generated method stub switch (v.getId()) { case R.id.button1: mPhysicaloid = new Physicaloid(this); if(mPhysicaloid.open()) { byte[] buf = "1".getBytes(); mPhysicaloid.write(buf, buf.length); mPhysicaloid.close(); } break; }</span></span></code> </pre><br>  Ich glaube nicht, dass ich sagen muss, wie die empfangenen Daten zu lesen sind, da alles in der Bibliotheksdokumentation enthalten ist. <br><br><h4>  Betreff 4: Board MSP430 LaunchPad, M430G2553. </h4><br>  Dieses Board wollte √ºberhaupt nicht mit meiner Hardware arbeiten.  Es wird einfach nicht vom System bestimmt und die USB-Ger√§teinformationen h√§ngen nur beim Aktualisieren. <br><br><h4>  Das Ergebnis: </h4><br>  Ich h√§tte gerne eine solche Bibliothek f√ºr die Arbeit mit Boards der Tiva C-Serie.  Erstelle dich neu, w√§hrend die F√§higkeit nicht ausreicht. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de444110/">https://habr.com/ru/post/de444110/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de444100/index.html">1. Check Point Erste Schritte R80.20. Einf√ºhrung</a></li>
<li><a href="../de444102/index.html">Die Entwicklung der Lieferkette oder √úberlegungen zu Docker, Deb, Jar und mehr</a></li>
<li><a href="../de444104/index.html">Wie k√∂nnen Sie Ihr Anlageportfolio optimal nutzen?</a></li>
<li><a href="../de444106/index.html">Staffelei f√ºr einen Mikrocontroller-Programmierer</a></li>
<li><a href="../de444108/index.html">Frontend Weekly Digest (11. - 17. M√§rz 2019)</a></li>
<li><a href="../de444112/index.html">Z√§hlen von nachgestellten Nullen von Fakult√§tszahlen in einem beliebigen Zahlensystem</a></li>
<li><a href="../de444114/index.html">Wie personenbezogene Daten von Patienten und √Ñrzten durch die ge√∂ffnete ClickHouse-Datenbank (aktualisiert) beeinflusst werden k√∂nnten</a></li>
<li><a href="../de444116/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends f√ºr die letzte Woche Nr. 356 (11. - 17. M√§rz 2019)</a></li>
<li><a href="../de444124/index.html">Wie aus Irrtum S√ºnde wird</a></li>
<li><a href="../de444126/index.html">In Russland bieten sie an, eingebaute SIM-Karten zu legalisieren</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>