<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõåüèª üë©üèª‚Äçü§ù‚Äçüë®üèº üíÜüèª Akka Streams para simples mortales „Ä∞Ô∏è üêû üë®‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øC√≥mo puedo imprimir un flujo continuo de mensajes de Twitter con unas pocas l√≠neas de c√≥digo agregando datos meteorol√≥gicos a los lugares donde viven...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Akka Streams para simples mortales</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/jugru/blog/418639/">  ¬øC√≥mo puedo imprimir un flujo continuo de mensajes de Twitter con unas pocas l√≠neas de c√≥digo agregando datos meteorol√≥gicos a los lugares donde viven sus autores?  ¬øY c√≥mo puede limitar la velocidad de las solicitudes al proveedor del clima para que no nos incluyan en la lista negra? <br><br>  Hoy le diremos c√≥mo hacerlo, pero primero conoceremos la tecnolog√≠a de Akka Streams, que hace que trabajar con flujos de datos en tiempo real sea tan f√°cil como los programadores que trabajan con expresiones LINQ sin requerir la implementaci√≥n de actores individuales o interfaces de Reactive Streams. . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ibpnza_PCr0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  El art√≠culo se basa en una transcripci√≥n del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">informe de Vagif Abilov</a> de nuestra conferencia de diciembre DotNext 2017 Mosc√∫. <br><a name="habracut"></a><br>  Mi nombre es Vagif, trabajo para la compa√±√≠a noruega Miles.  Hoy hablaremos sobre la biblioteca Akka Streams. <br><br>  Akka y Reactive Streams son la intersecci√≥n de conjuntos bastante estrechos, y uno podr√≠a tener la impresi√≥n de que este es un nicho que necesita tener un gran conocimiento para ingresar, pero todo lo contrario.  Y este art√≠culo pretende mostrar que al usar Akka Streams, puede evitar la programaci√≥n de bajo nivel que se requiere al usar Reactive Streams y Akka.NET.  Mirando hacia el futuro, puedo decir de inmediato: si al comienzo de nuestro proyecto, en el que usamos Akka, supi√©ramos sobre la existencia de Akka Streams, escribir√≠amos de manera muy diferente, ahorrar√≠amos tiempo y c√≥digo. <br><blockquote> <i>"Quiz√°s lo peor que puede hacer es hacer que las personas que no tienen dolor tomen su aspirina".</i> <br>  Max Kreminski <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"Puertas cerradas, dolores de cabeza y necesidades intelectuales"</a> </blockquote>  Antes de entrar en los detalles t√©cnicos, un poco sobre cu√°l puede ser su camino a Akka Streams y qu√© puede llevarlo all√≠.  Un d√≠a me encontr√© con el blog de Max Kreminski, donde hizo una pregunta tan filos√≥fica para los programadores: c√≥mo o por qu√© es imposible para un programador explicar qu√© son las m√≥nadas.  √âl lo explic√≥ de esta manera: muy a menudo las personas recurren de inmediato a los detalles t√©cnicos, explicando cu√°n bellamente funcional es la programaci√≥n y cu√°nto sentido tiene en la m√≥nada, sin molestarse en preguntarse por qu√© el programador podr√≠a necesitarla.  Dibujando una analog√≠a, es como tratar de vender aspirina sin molestarse en averiguar si su paciente tiene dolor. <br><br>  Usando esta analog√≠a, me gustar√≠a hacer la siguiente pregunta: si Akka Streams es aspirina, ¬øcu√°l deber√≠a ser el dolor que te llevar√° a ello? <br><br><h1>  Flujos de datos </h1><br>  Primero, hablemos de los flujos de datos.  El flujo puede ser bastante simple, lineal. <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Su navegador no admite video HTML5. <source src="https://media.giphy.com/media/ZNejul2eTftImnVrsY/giphy.mp4" type="video/mp4"></video></div></div></div><br>  Aqu√≠ tenemos un cierto consumidor de datos (un conejo en el video).  Consume datos a la velocidad que m√°s le convenga.  Esta es la interacci√≥n ideal del consumidor con el flujo: establece el ancho de banda y los datos fluyen silenciosamente hacia √©l.  Este flujo de datos simple puede ser infinito o puede terminar. <br><br>  Pero el flujo puede ser m√°s complejo.  Si planta varios conejos uno al lado del otro, ya tendremos paralelizaci√≥n de flujos.  Lo que Reactive Streams est√° tratando de resolver es precisamente c√≥mo podemos comunicarnos con los flujos a un nivel m√°s conceptual, es decir, independientemente de si estamos hablando de alg√∫n tipo de medici√≥n del sensor de temperatura, donde entran las mediciones lineales. , o tenemos mediciones continuas de miles de sensores de temperatura que ingresan al sistema a trav√©s de las colas RabbitMQ y se almacenan en los registros del sistema.  Todo lo anterior puede considerarse como una secuencia compuesta.  Si va m√°s all√°, la gesti√≥n automatizada de la producci√≥n (por ejemplo, por parte de una tienda en l√≠nea) tambi√©n se puede reducir a un flujo de datos, y ser√≠a excelente si pudi√©ramos hablar sobre la planificaci√≥n de dicho flujo, sin importar lo complicado que sea. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a7c/fa0/3af/a7cfa03af65ad4d88c1ce13d316e272e.jpg"><br><br>  Para proyectos modernos, el soporte de hilos no es muy bueno.  Si no recuerdo mal, Aaron Stannard, cuyo tweet que ves en la imagen, quer√≠a obtener una secuencia de un archivo de varios gigabytes que contenga CSV, es decir.  texto, y result√≥ que no hay nada que puedas tomar y usar de inmediato, sin un mont√≥n de acciones adicionales.  Pero simplemente no pudo obtener una corriente de valores CSV, lo que lo entristeci√≥.  Hay pocas soluciones (con la excepci√≥n de algunas √°reas especiales), los m√©todos antiguos se dan cuenta de mucho, cuando abrimos todo esto, comenzamos a leer, al almacenamiento en b√∫fer, en el peor de los casos, obtenemos algo como un bloc de notas, que dice que el archivo es demasiado grande. <br><br>  A un alto nivel conceptual, todos estamos involucrados en el procesamiento de flujos de datos, y Akka Streams lo ayudar√° si: <br><br><ul><li>  Est√°s familiarizado con Akka, pero quieres ahorrarte los detalles asociados con la escritura del c√≥digo del actor y su coordinaci√≥n; <br></li><li>  Usted est√° familiarizado con las secuencias reactivas y desea utilizar una implementaci√≥n lista para usar de sus especificaciones; <br></li><li>  Los elementos de bloque de Akka Streams para etapas son adecuados para modelar su proceso; <br></li><li>  Desea aprovechar la contrapresi√≥n de Akka Streams (contrapresi√≥n) para administrar y refinar din√°micamente las etapas de rendimiento de su flujo de trabajo. <br></li></ul><br><h1>  De actores a Akka Streams </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/9e2/067/5d1/9e20675d1a251ffc62b578eba2e7167d.jpg"><br><br>  La primera forma es desde actores hasta Akka Streams, a mi manera. <br><br>  La imagen muestra por qu√© comenzamos a usar el modelo de actor.  Est√°bamos agotados por el control manual de flujos, estado compartido, eso es todo.  Todos los que han trabajado con sistemas grandes, con subprocesos m√∫ltiples, entienden cu√°nto lleva tiempo y lo f√°cil que es cometer un error, lo que puede ser fatal para todo el proceso.  Esto nos llev√≥ al modelo de actores.  No lamentamos la elecci√≥n realizada, pero, por supuesto, cuando comienzas a trabajar y programar m√°s, no es que el entusiasmo inicial ceda el paso a otra cosa, sino que comienzas a darte cuenta de que algo se puede hacer a√∫n m√°s eficazmente. <br><blockquote>  <i>‚ÄúPor defecto, los destinatarios de sus mensajes se ingresan en el c√≥digo de actores.</i>  <i>Si creo un actor A que env√≠a un mensaje al actor B, y desea reemplazar al destinatario con el actor C, en el caso general esto no funcionar√° para usted "</i> <br>  Noel Welch (underscore.io) </blockquote>  Actores criticados por no componer.  Uno de los primeros en escribir sobre esto en su blog fue Noel Welch, uno de los desarrolladores de Underscore.  Se dio cuenta de que el sistema de actores se parece a esto: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d8f/e3b/3dd/d8fe3b3dd378bb187c4a85de3e982960.jpg"><br><br>  Si no utiliza nada adicional, como la inyecci√≥n de dependencia, la direcci√≥n de su destinatario se cose al actor. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3df/62f/78b/3df62f78bf5f64bda875c5f448057427.jpg"><br><br>  Cuando comienzan a enviarse mensajes entre s√≠, todo esto lo establece de antemano, programando actores.  Y sin trucos adicionales, se obtiene un sistema tan r√≠gido. <br>  Uno de los desarrolladores de Akka, Roland Kuhn, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">explic√≥</a> lo que generalmente se entiende por dise√±o deficiente.  El m√©todo del actor se basa en el m√©todo tell, es decir, mensajes unidireccionales: es del tipo nulo, es decir, no devuelve nada (o unidad, dependiendo del idioma).  Por lo tanto, es imposible construir una descripci√≥n del proceso a partir de una cadena de actores.  Entonces enviaste decir, ¬øentonces qu√©?  Para  Nos anulamos.  Puede compararlo, por ejemplo, con expresiones LINQ, donde cada elemento de la expresi√≥n devuelve IQueryable, IEnumerable, y todo esto se puede compilar f√°cilmente.  Los actores no dan esa oportunidad.  Al mismo tiempo, Roland Kuhn se opuso al hecho de que, seg√∫n dicen, no componen en principio, diciendo que, de hecho, se compilan de otras maneras, en el mismo sentido en que la sociedad humana se presta al dise√±o.  Parece un argumento filos√≥fico, pero si lo piensas bien, la analog√≠a tiene sentido: s√≠, los actores se env√≠an mensajes unidireccionales entre s√≠, pero tambi√©n nos comunicamos entre ellos pronunciando mensajes unidireccionales, pero al mismo tiempo interactuamos de manera bastante efectiva, es decir, creamos sistemas complejos.  Sin embargo, existe tal cr√≠tica a los actores. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SampleActor</span></span> : <span class="hljs-title"><span class="hljs-title">ReceiveActor</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SampleActor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Idle(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PreStart</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Idle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Receive&lt;Job&gt;(job =&gt; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Working</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Receive&lt;Cancel&gt;(job =&gt; <span class="hljs-comment"><span class="hljs-comment">/* ... */</span></span>); } }</code> </pre> <br>  Adem√°s, la implementaci√≥n del actor requiere al menos escribir una clase si trabaja en C #, o funciones si trabaja en F #.  En el ejemplo anterior, c√≥digo repetitivo, que debe escribir en cualquier caso.  Aunque no es muy grande, es un cierto n√∫mero de l√≠neas que siempre tendr√° que escribir en este nivel bajo.  Casi todo el c√≥digo que est√° presente aqu√≠ es una especie de ceremonia.  Lo que sucede cuando un actor recibe un mensaje directamente no se muestra aqu√≠ en absoluto.  Y todo esto necesita ser escrito.  Esto, por supuesto, no es mucho, pero es evidencia de que trabajamos con actores de bajo nivel, creando m√©todos tan nulos. <br><br>  ¬øQu√© pasar√≠a si pudi√©ramos pasar a un nivel diferente y superior, hacernos preguntas para modelar nuestro proceso, que incluye el procesamiento de datos de varias fuentes que se mezclan, convierten y transfieren? <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> results = db.Companies .Join(db.People, c =&gt; c.CompanyID, p =&gt; p.PersonID, (c, p) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { c, p }) .Where(z =&gt; zcCreated &gt;= fromDate) .OrderByDescending(z =&gt; zcCreated) .Select(z =&gt; zp) .ToList();</code> </pre> <br>  Un an√°logo de este enfoque puede ser lo que todos hemos estado acostumbrados a trabajar con LINQ durante diez a√±os.  No nos preguntamos c√≥mo funciona la uni√≥n.  Sabemos que existe un proveedor LINQ que har√° todo esto por nosotros, y estamos interesados ‚Äã‚Äãen un nivel superior en cumplir con la solicitud.  Y generalmente podemos mezclar bases de datos aqu√≠, podemos enviar solicitudes distributivas.  ¬øQu√© pasar√≠a si pudieras describir el proceso de esta manera? <br><br><pre> <code class="cs hljs">HttpGet pageUrl |&gt; fun s -&gt; Regex.Replace(s, <span class="hljs-string"><span class="hljs-string">"[^A-Za-z']"</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>) |&gt; fun s -&gt; Regex.Split(s, <span class="hljs-string"><span class="hljs-string">" +"</span></span>) |&gt; Set.ofArray |&gt; Set.filter (fun word -&gt; not (Spellcheck word)) |&gt; Set.iter (fun word -&gt; printfn <span class="hljs-string"><span class="hljs-string">" %s"</span></span> word)</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">(Fuente)</a> <br><br>  O, por ejemplo, transformaciones funcionales.  Lo que a muchas personas les gusta de la programaci√≥n funcional es que puedes pasar datos a trav√©s de una serie de transformaciones, y obtienes un c√≥digo compacto bastante claro, independientemente del idioma en el que lo escribas.  Es lo suficientemente f√°cil de leer.  El c√≥digo en la imagen est√° escrito especialmente en F #, pero en general, probablemente, todos entienden lo que est√° sucediendo aqu√≠. <br><br><pre> <code class="cs hljs">val <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> = Source(<span class="hljs-number"><span class="hljs-number">1</span></span> to <span class="hljs-number"><span class="hljs-number">10</span></span>) val <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> = Sink.ignore val bcast = builder.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(Broadcast[Int](<span class="hljs-number"><span class="hljs-number">2</span></span>)) val merge = builder.<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>(Merge[Int](<span class="hljs-number"><span class="hljs-number">2</span></span>)) val f1,f2,f3,f4 = Flow[Int].map(_ + <span class="hljs-number"><span class="hljs-number">10</span></span>) source ~&gt; f1 ~&gt; bcast ~&gt; f2 ~&gt; merge ~&gt; f3 ~&gt; sink bcast ~&gt; f4 ~&gt; merge ~&gt;</code> </pre> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">(Fuente)</a> <br><br>  ¬øQu√© tal esto entonces?  En el ejemplo anterior, tenemos una fuente de datos fuente, que consiste en enteros del 1 al 10. Este es el llamado DSL gr√°fico (lenguaje espec√≠fico del dominio).  Los elementos del lenguaje de dominio en el ejemplo anterior son s√≠mbolos de flecha unidireccionales; estos son operadores adicionales definidos por herramientas de lenguaje que muestran gr√°ficamente la direcci√≥n de la secuencia.  Pasamos Source a trav√©s de una serie de transformaciones: para facilitar la demostraci√≥n, todos simplemente agregan un diez al n√∫mero.  Luego viene Broadcast: multiplicamos los canales, es decir, cada n√∫mero ingresa a dos canales.  Luego agregamos 10 nuevamente, mezclamos nuestras secuencias de datos, obtenemos una nueva secuencia, agregamos 10 tambi√©n, y todo esto va a nuestra secuencia de datos, en la que no sucede nada.  Este es el c√≥digo real que est√° escrito en Scala, parte de Akka Streams, implementado en este idioma.  Es decir, usted especifica las fases de la transformaci√≥n de sus datos, indica qu√© hacer con ellos, especifica la fuente, el stock, algunos puntos de control y luego forma un gr√°fico usando el DSL gr√°fico.  Todo esto es c√≥digo para un solo programa.  Algunas l√≠neas de c√≥digo muestran lo que est√° sucediendo en el proceso. <br><br>  Olvidemos c√≥mo escribir el c√≥digo de definici√≥n para actores individuales y, en cambio, aprendamos las primitivas de dise√±o de alto nivel que crear√°n y conectar√°n a los actores requeridos dentro de s√≠ mismos.  Cuando ejecutamos un gr√°fico de este tipo, el sistema que proporciona Akka Streams crear√° el actor requerido por s√≠ mismo, enviar√° todos estos datos all√≠, los procesar√° como deber√≠a y finalmente se los entregar√° al destinatario final. <br><br><pre> <code class="hljs pgsql">var runnable = Source .<span class="hljs-keyword"><span class="hljs-keyword">From</span></span>(Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>)) .Via(Flow.<span class="hljs-keyword"><span class="hljs-keyword">Create</span></span>&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Select</span></span>(x =&gt; x * <span class="hljs-number"><span class="hljs-number">2</span></span>) .<span class="hljs-keyword"><span class="hljs-keyword">To</span></span>(Sink.<span class="hljs-keyword"><span class="hljs-keyword">ForEach</span></span>&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;(x =&gt; Console.<span class="hljs-keyword"><span class="hljs-keyword">Write</span></span>(x.ToString));</code> </pre> <br>  El ejemplo anterior muestra c√≥mo se ver√≠a esto en C #.  La forma m√°s simple: tenemos una fuente de datos: estos son n√∫meros del 1 al 1000 (como puede ver, en Akka Streams cualquier IEnumerable puede convertirse en una fuente de flujo de datos, lo cual es muy conveniente).  Hacemos un c√°lculo simple, digamos, multiplicamos por dos, y luego en el flujo de datos, todo esto se muestra en la pantalla. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> graph = GraphDsl.Create(builder =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bcast = builder.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Broadcast&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> merge = builder.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Merge&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> count = Flow.FromFunction(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(x =&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sum = Flow.Create&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;().Sum((x, y) =&gt; x + y); builder.From(bcast.Out(<span class="hljs-number"><span class="hljs-number">0</span></span>)).To(merge.In(<span class="hljs-number"><span class="hljs-number">0</span></span>)); builder.From(bcast.Out(<span class="hljs-number"><span class="hljs-number">1</span></span>)).Via(count).Via(sum).To(merge.In(<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FlowShape&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(bcast.In, merge.Out); });</code> </pre> <br>  Lo que se muestra en el ejemplo anterior se llama "DSL gr√°fico en C #".  De hecho, no hay gr√°ficos aqu√≠, es un puerto con Scala, pero en C # no hay forma de definir operadores de esta manera, por lo que parece un poco m√°s engorroso, pero lo suficientemente compacto como para comprender lo que est√° sucediendo aqu√≠.  Entonces, estamos creando un determinado gr√°fico (hay diferentes tipos de gr√°ficos, aqu√≠ se llama FlowShape) a partir de diferentes componentes, donde hay una fuente de datos y hay algunas transformaciones.  Enviamos datos a un canal en el que generamos conteo, es decir, el n√∫mero de elementos de datos a transmitir, y en el otro generamos la suma y luego lo mezclamos todo.  A continuaci√≥n veremos ejemplos m√°s interesantes que solo el procesamiento de enteros. <br>  Este es el primer camino que puede llevarlo a Akka Streams, si tiene experiencia trabajando con un modelo de actor y ha pensado si debe escribir manualmente cada uno, incluso el actor m√°s simple.  La segunda forma en que Akka Streams llega es a trav√©s de Reactive Streams. <br><br><h1>  De las corrientes reactivas a las corrientes de Akka </h1><br>  ¬øQu√© son las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">corrientes reactivas</a> ?  Esta es una iniciativa conjunta para desarrollar un est√°ndar para el procesamiento asincr√≥nico de flujos de datos.  Define el conjunto m√≠nimo de interfaces, m√©todos y protocolos que describen las operaciones y entidades necesarias para lograr el objetivo: procesamiento asincr√≥nico de datos en tiempo real con contrapresi√≥n (contrapresi√≥n) sin bloqueo.  Permite diversas implementaciones utilizando diferentes lenguajes de programaci√≥n. <br><br>  Reactive Streams le permite procesar un n√∫mero potencialmente ilimitado de elementos en una secuencia y transferir elementos de forma asincr√≥nica entre componentes con contrapresi√≥n sin bloqueo. <br><br>  La lista de iniciadores de la creaci√≥n de Reactive Streams es bastante impresionante: aqu√≠ est√°n Netflix, Oracle y Twitter. <br><br>  La especificaci√≥n es muy simple para hacer que la implementaci√≥n en diferentes idiomas y plataformas sea lo m√°s accesible posible.  Los componentes principales de la API Reactive Streams: <br><br><ol><li>  Editor <br></li><li>  Suscriptor <br></li><li>  Suscripci√≥n <br></li><li>  Procesador <br></li></ol><br>  Esencialmente, esta especificaci√≥n no implica que comenzar√° a implementar manualmente estas interfaces.  Se entiende que hay algunos desarrolladores de bibliotecas que har√°n esto por usted.  Y Akka Streams es una de las implementaciones de esta especificaci√≥n. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IPublisher</span></span>&lt;<span class="hljs-title"><span class="hljs-title">out</span></span> <span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ISubscriber&lt;T&gt; subscriber</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ISubscriber</span></span>&lt;<span class="hljs-title"><span class="hljs-title">in</span></span> <span class="hljs-title"><span class="hljs-title">T</span></span>&gt; { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnSubscribe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ISubscription subscription</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnNext</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T element</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnError</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Exception cause</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnComplete</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; }</code> </pre> <br>  Las interfaces, como puede ver en el ejemplo, son realmente muy simples: por ejemplo, Publisher contiene solo un m√©todo: "suscribirse".  El suscriptor, Suscriptor, contiene solo algunas reacciones al evento. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ISubscription</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Request</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Cancel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IProcessor</span></span>&lt;<span class="hljs-title"><span class="hljs-title">in</span></span> <span class="hljs-title"><span class="hljs-title">T1</span></span>, <span class="hljs-title"><span class="hljs-title">out</span></span> <span class="hljs-title"><span class="hljs-title">T2</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">ISubscriber</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T1</span></span>&gt;, <span class="hljs-title"><span class="hljs-title">IPublisher</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T2</span></span>&gt; { }</code> </pre> <br>  Finalmente, la suscripci√≥n contiene dos m√©todos: "inicio" y "rechazar".  El procesador no define ning√∫n m√©todo nuevo; combina un editor y un suscriptor. <br><br>  ¬øQu√© distingue a Reactive Streams de otras implementaciones de stream?  Reactive Streams combina modelos push y pull.  Para soporte, este es el escenario de rendimiento m√°s eficiente.  Supongamos que tiene un suscriptor de datos lento.  En este caso, presionar por √©l puede ser fatal: si le env√≠a una gran cantidad de datos, no podr√° procesarlos.  Es mejor usar pull para que el suscriptor mismo extraiga los datos del editor.  Pero si el editor es lento, resulta que el suscriptor est√° bloqueado todo el tiempo, esperando todo el tiempo.  Una soluci√≥n intermedia puede ser la configuraci√≥n: tenemos un archivo de configuraci√≥n en el que determinamos cu√°l de ellos es m√°s r√°pido.  ¬øY si cambian sus velocidades? <br><br>  Entonces, la implementaci√≥n m√°s elegante es aquella en la que podemos cambiar din√°micamente los modelos push y pull. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/971/ab6/298/971ab6298b3f313b90503cf6a860e188.png"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">(Fuente (Apache Flink))</a> <br><br>  El diagrama muestra c√≥mo puede suceder esto.  Esta demostraci√≥n utiliza Apache Flink.  Yellow es un editor, productor de datos, se estableci√≥ en aproximadamente el 50% de su capacidad.  El suscriptor trata de elegir la mejor estrategia: resulta ser push.  Luego reiniciamos el suscriptor a una velocidad de aproximadamente 20%, y √©l cambia para tirar.  Luego pasamos al 100%, nuevamente regresamos el 20%, al modelo de extracci√≥n, etc. Todo esto sucede en la din√°mica, no necesita detener el servicio, ingrese algo en la configuraci√≥n.  Esta es una ilustraci√≥n de c√≥mo funciona la contrapresi√≥n en Akka Streams. <br><br><h1>  Principios de las corrientes de Akka </h1><br>  Por supuesto, Akka Streams no ganar√≠a popularidad si no hubiera bloques incorporados que sean muy f√°ciles de usar.  Hay muchos de ellos.  Se dividen en tres grupos principales: <br><br><ol><li>  Fuente de datos (Fuente): etapa de procesamiento con una salida. <br></li><li>  El sumidero es un paso de procesamiento de entrada √∫nica. <br></li><li>  Punto de control (flujo): etapa de procesamiento con una entrada y una salida.  Las transformaciones funcionales tienen lugar aqu√≠, y no necesariamente en la memoria: puede ser, por ejemplo, una llamada a un servicio web, a algunos elementos de paralelismo, multiproceso. <br></li></ol><br>  De estos tres tipos, se pueden formar gr√°ficos.  Estas ya son etapas de procesamiento m√°s complejas, que se crean a partir de fuentes, drenajes y puntos de control.  Pero no todos los gr√°ficos se pueden ejecutar: si hay agujeros en √©l, es decir, entradas y salidas abiertas, entonces este gr√°fico no se ejecuta. <br>  Un gr√°fico es un gr√°fico ejecutable, si est√° cerrado, es decir, hay una salida para cada entrada: si los datos han ingresado, deben haber ido a alguna parte. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/41f/059/a3c/41f059a3cebba7f1e023c8036a29cc8e.jpg"><br><br>  Akka Streams tiene fuentes incorporadas: en la imagen puedes ver cu√°ntas de ellas.  Sus nombres son uno a uno y reflejan lo que Scala o la JVM tienen, con la excepci√≥n de algunas fuentes √∫tiles espec√≠ficas de .NET.  Los dos primeros (FromEnumerator y From) son algunos de los m√°s importantes: cualquier numeraci√≥n, cualquier n√∫mero numerable se puede convertir en una fuente de flujo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/504/3cb/0e7/5043cb0e7cd9fb15e6b00582b5230103.jpg"><br><br>  Hay drenajes integrados: algunos de ellos se parecen a los m√©todos LINQ, por ejemplo, Primero, √öltimo, Primero o Por defecto.  Por supuesto, todo lo que obtienes, puedes volcarlo en archivos, en secuencias, no en secuencias de Akka, sino en secuencias .NET.  Y de nuevo, si tiene actores en su sistema, puede usarlos tanto en la entrada como en la salida del sistema, es decir, si lo desea, incrustar esto en su sistema terminado. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0a6/947/229/0a6947229a7ddbb5577b39634a4b6c11.jpg"><br><br>  Y hay una gran cantidad de puntos de control integrados, que, quiz√°s, recuerdan a√∫n m√°s a LINQ, porque aqu√≠ hay Select, y SelectMany, y GroupBy, es decir, todo con lo que estamos acostumbrados a trabajar en LINQ. <br><br>  Por ejemplo, Select in Scala se llama SelectAsync: es lo suficientemente potente porque toma el nivel de paralelismo como uno de los argumentos.  Es decir, puede indicar que, por ejemplo, Select env√≠a datos a alg√∫n servicio web en paralelo en diez subprocesos, luego todos se recopilan y pasan.  De hecho, usted determina el grado de escala del punto de control con una l√≠nea de c√≥digo. <br><br>  Una declaraci√≥n de flujo es su plan de ejecuci√≥n, es decir, un gr√°fico, incluso uno de ejecuci√≥n, no se puede ejecutar de esa manera: debe materializarse.  Debe haber un sistema instanciado, un sistema de actores, debe darle una secuencia, este plan de ejecuci√≥n y luego se ejecutar√°.  Adem√°s, en tiempo de ejecuci√≥n est√° altamente optimizado, al igual que cuando env√≠a una expresi√≥n LINQ a una base de datos: un proveedor puede optimizar su SQL para una salida de datos m√°s eficiente, esencialmente reemplazando el comando de consulta por otro.  Lo mismo con Akka Streams: a partir de la versi√≥n 2.0, puede establecer un cierto n√∫mero de puntos de control, y el sistema comprender√° que algunos de ellos se pueden combinar para que sean ejecutados por un actor (fusi√≥n de operadores).  Los puntos de control, como regla, mantienen el orden de los elementos de procesamiento. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> results = db.Companies .Join(db.People, c =&gt; c.CompanyID, p =&gt; p.PersonID, (c, p) =&gt; <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { c, p }) .Where(z =&gt; zcCreated &gt;= fromDate) .OrderByDescending(z =&gt; zcCreated) .Select(z =&gt; zp) .ToList();</code> </pre> <br>  La materializaci√≥n de la secuencia se puede comparar con el √∫ltimo elemento ToList en la expresi√≥n LINQ en el ejemplo anterior.  Si no escribimos ToList, obtenemos una expresi√≥n LINQ no materializada que no har√° que los datos se transfieran al servidor SQL u Oracle, ya que la mayor√≠a de los proveedores de LINQ admiten la llamada ejecuci√≥n de consulta diferida (ejecuci√≥n de consulta diferida), t es decir, la solicitud se ejecuta solo cuando se da un comando para dar alg√∫n resultado.  Dependiendo de lo que se solicite, una lista o el primer resultado, se formar√° el equipo m√°s efectivo.  Cuando decimos ToList, le pedimos al proveedor LINQ que nos d√© el resultado final. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> runnable = Source .From(Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>)) .Via(Flow.Create&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;().Select(x =&gt; x * <span class="hljs-number"><span class="hljs-number">2</span></span>) .To(Sink.ForEach&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(x =&gt; Console.Write(x.ToString));</code> </pre> <br>  Akka Streams funciona de la misma manera.  En la imagen est√° nuestro gr√°fico lanzado, que consiste en una fuente de puntos de control y escorrent√≠a, y ahora queremos ejecutarlo. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> runnable = Source .From(Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>)) .Via(Flow.Create&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;().Select(x =&gt; x * <span class="hljs-number"><span class="hljs-number">2</span></span>) .To(Sink.ForEach&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(x =&gt; Console.Write(x.ToString)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> system = ActorSystem.Create(<span class="hljs-string"><span class="hljs-string">"MyActorSystem"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> materializer = ActorMaterializer.Create(system)) { <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> runnable.Run(materializer); }</code> </pre> <br>  Para que esto suceda, necesitamos crear un sistema de actores, en √©l hay un materializador, pasarle nuestro gr√°fico y √©l lo ejecutar√°.  Si lo recreamos, lo ejecutar√° nuevamente y se pueden obtener otros resultados. <br><br>  Adem√°s de la materializaci√≥n del flujo, hablando de la parte material de Akka Streams, vale la pena mencionar los valores materializados. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> output = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> source1 = Source.From(Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sink1 = Sink.ForEach&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(output.Add); IRunnableGraph&lt;NotUsed&gt; runnable1 = source1.To(sink1); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> source2 = Source.From(Enumerable.Range(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1000</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sink2 = Sink.Sum&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;((x,y) =&gt; x + y); IRunnableGraph&lt;Task&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;&gt; runnable2 = source2.ToMaterialized(sink2, Keep.Right);</code> </pre> <br>  Cuando tenemos una secuencia que va desde la fuente a trav√©s de los puntos de control hasta el drenaje, si no solicitamos ning√∫n valor intermedio, no est√°n disponibles para nosotros, ya que se ejecutar√° de la manera m√°s eficiente.  Es como una caja negra.  Pero puede ser interesante para nosotros extraer algunos valores intermedios, porque en cada punto a la izquierda entran algunos valores, salen otros valores a la derecha y puede especificar un gr√°fico para indicar lo que le interesa.  En el ejemplo anterior, un gr√°fico de ejecuci√≥n en el que se indica NotUsed, es decir, no nos interesan valores materializados.  A continuaci√≥n, lo creamos con la indicaci√≥n de que en el lado derecho de la escorrent√≠a, es decir, despu√©s de que se hayan completado todas las transformaciones, necesitamos dar valores materializados.  Obtenemos la Tarea del gr√°fico: una tarea, una vez completada, obtenemos un int, es decir, lo que sucede al final de este gr√°fico.  Puede indicar en cada p√°rrafo que necesita alg√∫n tipo de valores materializados, todo esto se recopilar√° gradualmente. <br><br>  Para transferir datos a los flujos de Akka Streams o sacarlos de all√≠, por supuesto, se necesita alg√∫n tipo de interacci√≥n con el mundo exterior.  Las etapas fuente integradas contienen una amplia gama de flujos de datos reactivos: <br><br><ul><li>  Source.FromEnumerator y Source.From le permiten transferir datos desde cualquier fuente que implemente IEnumerable; <br></li><li>  Unfold y UnfoldAsync generan los resultados de los c√°lculos de la funci√≥n siempre que devuelva valores distintos de cero; <br></li><li>  FromInputStream transforma un flujo; <br></li><li>  FromFile analiza el contenido del archivo en la secuencia reactiva; <br></li><li>  ActorPublisher convierte mensajes de actor. <br></li></ul><br>  Como ya dije, para los desarrolladores de .NET es muy productivo usar Enumerator o IEnumerable, pero a veces es una forma demasiado primitiva y demasiado ineficiente de acceder a los datos.  Las fuentes m√°s complejas que contienen una gran cantidad de datos requieren conectores especiales.  Tales conectores est√°n escritos.  Hay un proyecto de c√≥digo abierto Alpakka, que apareci√≥ originalmente en Scala y ahora est√° en .NET.  Adem√°s, Akka tiene los llamados actores persistentes, y tienen sus propias transmisiones que se pueden usar (por ejemplo, Akka Persistence Query forma el flujo de contenido del Akka Event Journal). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/109/c40/b29/109c40b2934e0a4a4e280b27d2cd1e8b.jpg"><br><br>  Si trabaja con Scala, entonces la forma m√°s f√°cil es para usted: hay una gran cantidad de conectores y seguramente encontrar√° algo a su gusto.  Para informaci√≥n, Kafka es el llamado Kafka Reactivo, no Kafka Streams.  Kafka Streams, hasta donde yo s√©, no admite contrapresi√≥n.  Reactive Kafka es una implementaci√≥n de flujo de Kafka que admite flujos reactivos. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f24/160/09d/f2416009d41f26f08e665b2d510aa7db.jpg"><br><br>  La lista de conectores Alpakka .NET es m√°s modesta, pero se repone y hay un elemento de competencia.  Hay un tweet de seis meses de David Fowler de Microsoft, quien dijo que SignalR ahora puede intercambiar datos con Reactive Extensions, y uno de los desarrolladores de Akka respondi√≥ que realmente hab√≠a estado en Akka Streams durante alg√∫n tiempo.  Akka admite varios servicios de Microsoft Azure.  CSV es el resultado de la frustraci√≥n de Aaron Stannard cuando descubri√≥ que no hay una buena transmisi√≥n para CSV: ahora Akka tiene su propia transmisi√≥n para CSV XML.  Hay AMQP (en realidad, RabbitMQ), est√° en desarrollo, pero est√° disponible para su uso, funciona.  Kafka tambi√©n est√° en desarrollo.  Esta lista continuar√° expandi√©ndose. <br><br>  Algunas palabras sobre las alternativas, ya que si trabaja con flujos de datos, Akka Streams no es, por supuesto, la √∫nica forma de manejar estos flujos.  Lo m√°s probable es que, en su proyecto, la elecci√≥n de c√≥mo implementar hilos depender√° de muchos otros factores que pueden convertirse en clave.  Por ejemplo, si trabaja mucho con Microsoft Azure y Orleans est√° integrado org√°nicamente en las necesidades de su proyecto con su soporte para actores virtuales o, como los llaman, granos, entonces tienen su propia implementaci√≥n que no cumple con la especificaci√≥n de Reactive Streams: Orleans Streams, que ser√° m√°s cercano para ti y tiene sentido que le prestes atenci√≥n.  Si trabaja mucho con TPL, existe TPL DataFlow; esta puede ser la analog√≠a m√°s cercana a Akka Streams: tambi√©n tiene primitivas para componer flujos de datos, as√≠ como herramientas de limitaci√≥n de ancho de banda y almacenamiento en memoria intermedia (BoundedCapacity, MaxMessagePerTask).  Si las ideas del modelo de actor son cercanas a usted, entonces Akka Streams es una forma de abordar esto y ahorrar una cantidad significativa de tiempo sin tener que escribir cada actor manualmente. <br><br><h1>  Ejemplo de implementaci√≥n: secuencia de registro de eventos </h1><br>  Veamos un par de ejemplos de implementaci√≥n.   ‚Äî     ,    .        Akka Streams,   ,        - ,     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43e/de0/51f/43ede051f01ec132e11502f9cebaccaf.png"><br><br>      .     :    15  23 ,   7 .           ‚Äî      .     Kibana Dashboard. <br> Kibana    Elasticsearch ,   Elasticsearch  ,    ,      ,        ,    .     ,      ,    , . .    .      (event journal) Akka,      Microsoft SQL Server.    ,          . <br><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> EventJournal ( Ordering <span class="hljs-built_in"><span class="hljs-built_in">BIGINT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">IDENTITY</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>) PRIMARY <span class="hljs-keyword"><span class="hljs-keyword">KEY</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, PersistenceID <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">255</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, SequenceNr <span class="hljs-built_in"><span class="hljs-built_in">BIGINT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">Timestamp</span></span> <span class="hljs-built_in"><span class="hljs-built_in">BIGINT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, IsDeleted <span class="hljs-built_in"><span class="hljs-built_in">BIT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, Manifest <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">500</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, Payload VARBINARY(<span class="hljs-keyword"><span class="hljs-keyword">MAX</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, Tags <span class="hljs-keyword"><span class="hljs-keyword">NVARCHAR</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>) <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CONSTRAINT</span></span> QU_EventJournal <span class="hljs-keyword"><span class="hljs-keyword">UNIQUE</span></span> (PersistenceID, SequenceNr) )</code> </pre> <br>   ,  ,   ,  ,   SQL Server,     eventstore   Akka, eventJournal.     eventstore. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cae/28e/b8e/cae28eb8efd64485e534c63d90550ce2.jpg"><br><br>    ,     .  ,    ,       ,      ,   -    :     ,  .      ,         . . .  -  .       ,    .       ,   .    ,     Akka  persistence query. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6b2/bb9/08b/6b2bb908be095a552de279cbefad7f1b.jpg"><br><br>          ,   ,          . <br><br>   (persistence queries): <br><br><ul><li> AllPersistencelds </li><li> CurrentPersistencelds </li><li> EventsByPersistenceld </li><li> CurrentEventsByPersistenceld </li><li> EventsByTag </li><li> CurrentEventsByTag </li></ul><br>      ,    , ,   Current ‚Äî  ,      .     ‚Äî    .   EventsByTag. <br><br><pre> <code class="hljs kotlin">let system = mailbox.Context.System let queries = PersistenceQuery.Get(system) .ReadJournalFor&lt;SqlReadJournal&gt;(SqlReadJournal.Identifier) let mat = ActorMaterializer.Create(system) let offset = getCurrentOffset client config let ks = KillSwitches.Shared <span class="hljs-string"><span class="hljs-string">"persistence-elastic"</span></span> let task = queries.EventsByTag(PersistenceUtils.anyEventTag, offset) .Select(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> e -&gt; ElasticTypes.EventEnvelope.FromAkka e) .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GroupedWithin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(config.BatchSize, config.BatchTimeout)</span></span></span></span> .Via(ks.Flow()) .RunForeach((<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> batch -&gt; processItems client batch), mat) .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContinueWith</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(handleStreamError mailbox, TaskContinuationOptions.OnlyOnFaulted)</span></span></span></span> |&gt; Async.AwaitTaskVoid</code> </pre> <br>  ,    .     F#,   C#      .   EventsByTag,    Akka Streams,      ,     Elasticsearch. . .   -   ,       ,   ,    ‚Äî          .        . <br><br>       .   ,       ,    ,       ,  Twitter      ,   ‚Äî  ,   , ,    .     ,   Akka Streams. <br><br><h1>  :   </h1><br>    Akka  Scala,  Akka.NET,      ,      ,        ,      , . .          -  .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tweetinvi</a> ‚Äî   ,     Twitter,         .      Reactive Streams, . .      ,    ,     ,  ,   -  Akka,      ,     . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/acf/ac1/103/acfac11035eee1b69f2eb4c148f2f7f4.jpg"><br><br>       ,      , . .  Broadcast-.        ,     ,       .         :     ,         ,    ,    ,          . <br><br>      GitHub-,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AkkaStreamsDemo</a> .    (      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   </a> ). <br><br>  Comencemos con uno simple.        Twitter:   Program.cs <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> useCachedTweets = <span class="hljs-literal"><span class="hljs-literal">false</span></span></code> </pre> <br>  ,     Twitter,     ,  .      RunnableGraph. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IRunnableGraph&lt;IActorRef&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRunnableGraph</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> tweetSource = Source.ActorRef&lt;ITweet&gt;(<span class="hljs-number"><span class="hljs-number">100</span></span>, OverflowStrategy.DropHead); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> formatFlow = Flow.Create&lt;ITweet&gt;().Select(Utils.FormatTweet); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> writeSink = Sink.ForEach&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(Console.WriteLine); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tweetSource.Via(formatFlow).To(writeSink); }</code> </pre> <br> ( <a href=""></a> ) <br><br>      ,     .   ,      ,  (     )      . <br><br> StartTweetStream ‚Äî      Tweetinvi. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartTweetStream</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IActorRef actor</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stream = Stream.CreateSampleStream(); stream.TweetReceived += (_, arg) =&gt; { arg.Tweet.Text = arg.Tweet.Text.Replace(<span class="hljs-string"><span class="hljs-string">"\r"</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>).Replace(<span class="hljs-string"><span class="hljs-string">"\n"</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> json = JsonConvert.SerializeObject(arg.Tweet); File.AppendAllText(<span class="hljs-string"><span class="hljs-string">"tweets.txt"</span></span>, <span class="hljs-string"><span class="hljs-string">$"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{json}</span></span></span><span class="hljs-string">\r\n"</span></span>); actor.Tell(arg.Tweet); }; stream.StartStream(); }</code> </pre> <br> ( <a href=""></a> ) <br><br>  CreateSampleStream    ,       .      ,   ,    ,  : ¬´  ¬ª.     IEnumerable,       . <br><br>  <a href="">TweetEnumerator</a>   :     ,     Current, MoveNext, Reset,   Dispose,    .    ,      .   ,      .      . <br><br>     useCachedTweets  true,    . CashedTweets ‚Äî    ,       50000 ,     , ,    .    ,         ,   .   ‚Äî    .          ,   . <br><br> TweetsWithBroadcast: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> graph = GraphDsl.Create(b =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> broadcast = b.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Broadcast&lt;ITweet&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> merge = b.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Merge&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); b.From(broadcast.Out(<span class="hljs-number"><span class="hljs-number">0</span></span>)) .Via(Flow.Create&lt;ITweet&gt;().Select(tweet =&gt; tweet.CreatedBy)) .Via(formatUser) .To(merge.In(<span class="hljs-number"><span class="hljs-number">0</span></span>)); b.From(broadcast.Out(<span class="hljs-number"><span class="hljs-number">1</span></span>)) .Via(Flow.Create&lt;ITweet&gt;().Select(tweet =&gt; tweet.Coordinates)) .Via(formatCoordinates) .To(merge.In(<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FlowShape&lt;ITweet, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(broadcast.In, merge.Out); });</code> </pre> <br> ( <a href=""></a> ) <br><br>   Scala,    ,   DSL.    Broadcast    ‚Äî out(0), out(1) ‚Äî      CreatedBy,    ,        .    . <br><br>     ‚Äî   .    . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> graph = GraphDsl.Create(b =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> broadcast = b.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Broadcast&lt;ITweet&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> merge = b.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Merge&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); b.From(broadcast.Out(<span class="hljs-number"><span class="hljs-number">0</span></span>)) .Via(Flow.Create&lt;ITweet&gt;().Select(tweet =&gt; tweet.CreatedBy) .Throttle(<span class="hljs-number"><span class="hljs-number">10</span></span>, TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>, ThrottleMode.Shaping)) .Via(formatUser) .To(merge.In(<span class="hljs-number"><span class="hljs-number">0</span></span>)); b.From(broadcast.Out(<span class="hljs-number"><span class="hljs-number">1</span></span>)) .Via(Flow.Create&lt;ITweet&gt;().Select(tweet =&gt; tweet.Coordinates) .Buffer(<span class="hljs-number"><span class="hljs-number">10</span></span>, OverflowStrategy.DropNew) .Throttle(<span class="hljs-number"><span class="hljs-number">1</span></span>, TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">10</span></span>, ThrottleMode.Shaping)) .Via(formatCoordinates) .To(merge.In(<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FlowShape&lt;ITweet, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(broadcast.In, merge.Out); });}</code> </pre> <br> ( <a href=""></a> ) <br><br>          10   ,               10.    ,    ,  ,    . , ,   Akka Streams   Reactive Streams:     .   ,     ,   ,  ,    -  .    , ,    ,          .    ,      .   ,    ,    .     Buffer(10, OverFlowStrategy.DropHead).      ,         .      10        ,      .  , ,  - ,   ‚Äî      - ,   , ,   , . .          . ,      . <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> graph = GraphDsl.Create(b =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> broadcast = b.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Broadcast&lt;ITweet&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> merge = b.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Merge&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">2</span></span>)); b.From(broadcast.Out(<span class="hljs-number"><span class="hljs-number">0</span></span>)) .Via(Flow.Create&lt;ITweet&gt;().Select(tweet =&gt; tweet.CreatedBy) .Throttle(<span class="hljs-number"><span class="hljs-number">10</span></span>, TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">1</span></span>, ThrottleMode.Shaping)) .Via(formatUser) .To(merge.In(<span class="hljs-number"><span class="hljs-number">0</span></span>)); b.From(broadcast.Out(<span class="hljs-number"><span class="hljs-number">1</span></span>)) .Via(Flow.Create&lt;ITweet&gt;().Select(tweet =&gt; tweet.Coordinates) .Buffer(<span class="hljs-number"><span class="hljs-number">10</span></span>, OverflowStrategy.DropNew) .Throttle(<span class="hljs-number"><span class="hljs-number">1</span></span>, TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">10</span></span>, ThrottleMode.Shaping)) .Via(Flow.Create&lt;ICoordinates&gt;().SelectAsync(<span class="hljs-number"><span class="hljs-number">5</span></span>, Utils.GetWeatherAsync)) .Via(formatTemperature) .To(merge.In(<span class="hljs-number"><span class="hljs-number">1</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FlowShape&lt;ITweet, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(broadcast.In, merge.Out); });</code> </pre> <br> ( <a href=""></a> ) <br><br>     ,    SelectAsync,     .         ,    ,        5:  ,    5  ,     ,       .    ,    ,     . <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">async</span></span></span><span class="hljs-function"> Task&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">decimal</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetWeatherAsync</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ICoordinates coordinates</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> httpClient = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HttpClient(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> requestUrl = <span class="hljs-string"><span class="hljs-string">$"http://api.met.no/weatherapi/locationforecast/1.9/?lat=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{coordinates.Latitude}</span></span></span><span class="hljs-string">;lon=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{coordinates.Latitude}</span></span></span><span class="hljs-string">"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> httpClient.GetStringAsync(requestUrl); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = XDocument.Parse(result); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> temp = doc.Root.Descendants(<span class="hljs-string"><span class="hljs-string">"temperature"</span></span>).First().Attribute(<span class="hljs-string"><span class="hljs-string">"value"</span></span>).Value; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span>.Parse(temp); }</code> </pre> <br> ( <a href=""></a> ) <br><br>    .     -,      ,   -  ,   HttpClient   ,   XML,   ,     . <br><br>  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a> ,      ,      .     10     10    ,          ,   . <br><br>  ,    ‚Äî   ,       .     ,     Akka Streams,   ,    . ,       ,  . <br><br>      , ,  ,       Akka Streams,        .  ,        ,      Akka Streams,       C#      ,      ,        ,    ,    . <br><br><h1>   </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/17a/f2f/c2b/17af2fc2bfbacfc95fbe5bc9504a346e.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© ideas sobre Akka Streams me gustar√≠a que hicieras despu√©s de leer este art√≠culo? En DotNext 2017 Mosc√∫ estuve en una </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentaci√≥n de Alex Thyssen</font></font></a>  Azure Functions.   -     ,      deployment,    ,      (      - ,     ,   ),            .     ,        ,    ,        .        ,      ,    Akka Streams, ..    ,            .                 . <br><br>  Akka Streams       , ,   ,     ,   ,      .    ,         ,     ,      ,    ,           .   Akka Streams ‚Äî  ,     ,          . <br><br>        ,       Akka Streams,  ¬´Akka Stream Rap¬ª.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="></a>  ,    . <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/1Ct3eIQ0Tgc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><blockquote> <i>This is the Akka Stream. <br><br> This is the Source that feeds the Akka Stream. <br><br> This is the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Streams. <br><br> This is the Balance that splits the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is the Zip that combines from the Balance that splits the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is the Drop that removes from the Zip that combines from the Balance that splits the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is TakeWhile that pulls from the Drop that removes from the Zip that combines from the Balance that splits the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is the Throttle that speeds down the TakeWhile that pulls from the Drop that removes from the Zip that combines from the Balance that splits the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream. <br><br> This is the Bidiflow that turns back the Throttle that speeds down the TakeWhile that pulls from the Drop that removes from the Zip that combines from the Balance that splits the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the source that feeds the Akka Streams. <br><br> This is the Sink that is filled from the Bidiflow that turns back the Throttle that speeds down the TakeWhile that pulls from the Drop that removes from the Zip that combines from the Balance that splits the FilterNot that selects from the Merge that collects from the Broadcast that forks the MapAsync that maps from the Source that feeds the Akka Stream.</i> </blockquote> <b> .</b>         ‚Äî 22-23      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DotNext 2018 Moscow</a> ,        .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>    (     ). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es418639/">https://habr.com/ru/post/es418639/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es418629/index.html">C√≥mo verificar independientemente si puede patentar su producto y realizar una b√∫squeda de patente</a></li>
<li><a href="../es418631/index.html">7 pautas de c√≥digo javascript</a></li>
<li><a href="../es418633/index.html">Reactividad de JavaScript: un ejemplo simple e intuitivo</a></li>
<li><a href="../es418635/index.html">Creaci√≥n de una m√°quina arcade emulador. Parte 1</a></li>
<li><a href="../es418637/index.html">Kubernetes a las masas: Slurm comienza el 3 de agosto</a></li>
<li><a href="../es418641/index.html">Un error que impide que un dise√±ador crezca</a></li>
<li><a href="../es418643/index.html">Sentarse frente a pie: ¬øc√≥mo trabajar mejor?</a></li>
<li><a href="../es418645/index.html">Art√≠culos de la conferencia de primavera C ++ Rusia 2018</a></li>
<li><a href="../es418647/index.html">TESS lanza b√∫squeda de exoplanetas</a></li>
<li><a href="../es418649/index.html">La generaci√≥n continua de versiones alternativas de TLS resolver√° el problema de la osificaci√≥n del antiguo protocolo.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>