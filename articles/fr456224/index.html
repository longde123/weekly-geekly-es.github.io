<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ‚óΩÔ∏è ü•¢ Annonce de l'aper√ßu 6 de .NET Core 3.0 üôéüèº üìª üéé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Aujourd'hui, nous annon√ßons .NET Core 3.0 Preview 6 . Il comprend des mises √† jour pour la compilation d'assemblages pour un d√©marrage am√©lior√©, l'opt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Annonce de l'aper√ßu 6 de .NET Core 3.0</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/microsoft/blog/456224/"><p>  Aujourd'hui, nous annon√ßons <a href="" rel="nofollow">.NET Core 3.0 Preview 6</a> .  Il comprend des mises √† jour pour la compilation d'assemblages pour un d√©marrage am√©lior√©, l'optimisation des applications pour la taille avec des am√©liorations de l'√©diteur de liens et EventPipe.  Nous avons √©galement publi√© de nouvelles images Docker pour Alpine sur ARM64. </p><br><ul><li><p>  <a href="" rel="nofollow">T√©l√©chargez</a> d√®s maintenant <a href="" rel="nofollow">.NET Core 3.0 Preview 6</a> sur Windows, macOS et Linux. </p></li><li><p>  <a href="">Les notes de version</a> ont √©t√© publi√©es sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dotnet / core</a> .  Un <a href="">diff API entre Preview 5 et 6</a> est √©galement disponible. </p></li><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ASP.NET Core</a> et EF Core publient √©galement des mises √† jour aujourd'hui. </p></li><li><p>  Si vous l'avez manqu√©, consultez les am√©liorations que nous avons publi√©es dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">.NET Core 3.0 Preview 5</a> , du mois dernier. </p></li></ul><br><img src="https://habrastorage.org/webt/m8/il/ym/m8ilymhs6vkajgs1wfbpnzud3lw.jpeg"><a name="habracut"></a><br><br><h2>  Mise √† jour WPF et Windows Forms </h2><br><p>  L'√©quipe WPF a maintenant termin√© de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publier la plupart de la base de code WPF sur GitHub</a> .  En fait, ils viennent de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">publier la source de quinze assembl√©es</a> .  Pour tous ceux qui connaissent WPF, les noms d'assembly doivent √™tre tr√®s familiers. </p><br><p>  Dans certains cas, les tests sont toujours dans l'arri√©r√© pour √™tre publi√©s au plus tard √† 3.0 GA.  Cela dit, la pr√©sence de tout ce code devrait permettre √† la communaut√© WPF de participer pleinement √† la modification de WPF.  Il est √©vident √† la lecture de certains des probl√®mes de GitHub que la communaut√© a son propre arri√©r√© qu'elle attendait de r√©aliser.  Th√®me sombre, peut-√™tre? </p><br><h2>  Images de docker alpin </h2><br><p>  Les images Docker sont d√©sormais disponibles pour .NET Core et ASP.NET Core sur ARM64.  Ils n'√©taient auparavant disponibles que pour x64. </p><br><p> Les images suivantes peuvent √™tre utilis√©es dans un <code>Dockerfile</code> ou avec un <code>docker pull</code> , comme illustr√© ci-dessous: </p><br><ul><li> <code>docker pull mcr.microsoft.com/dotnet/core/runtime:3.0-alpine-arm64v8</code> </li> <li> <code>docker pull mcr.microsoft.com/dotnet/core/aspnet:3.0-alpine-arm64v8</code> </li> </ul><br><h2>  Am√©liorations du canal d'√©v√©nement </h2><br><p>  Event Pipe prend d√©sormais en charge plusieurs sessions.  Cela signifie que vous pouvez consommer des √©v√©nements avec EventListener in-proc et avoir simultan√©ment des clients de canal d'√©v√©nements hors processus. </p><br><p>  Nouveaux compteurs Perf ajout√©s: </p><br><ul><li>  % Temps en GC </li><li>  Taille de tas Gen 0 </li><li>  Taille de tas de g√©n√©ration 1 </li><li>  Taille de tas Gen 2 </li><li>  Taille du tas LOH </li><li>  Taux d'allocation </li><li>  Nombre d'ensembles charg√©s </li><li>  Nombre de threads ThreadPool </li><li>  Surveiller le taux de conflit de verrouillage </li><li>  File d'attente des √©l√©ments de travail ThreadPool </li><li>  Taux d'√©l√©ments de travail termin√©s ThreadPool </li></ul><br><p>  L'attachement du profileur est d√©sormais impl√©ment√© en utilisant la m√™me infrastructure de canal d'√©v√©nement. </p><br><p>  Voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Jouer avec les compteurs</a> de David Fowler pour avoir une id√©e de ce que vous pouvez faire avec le canal d'√©v√©nement pour effectuer vos propres enqu√™tes de performances ou simplement surveiller l'√©tat de l'application. </p><br><p>  Voir <a href="">dotnet-counters</a> pour installer l'outil dotnet-counters. </p><br><h2>  Optimisez vos applications .NET Core avec des images ReadyToRun </h2><br><p>  Vous pouvez am√©liorer le temps de d√©marrage de votre application .NET Core en compilant vos assemblys d'application au format ReadyToRun (R2R).  R2R est une forme de compilation anticip√©e (AOT). </p><br><p>  Les binaires R2R am√©liorent les performances de d√©marrage en r√©duisant la quantit√© de travail que le JIT doit faire pendant le chargement de votre application.  Les binaires contiennent un code natif similaire √† ce que le JIT produirait, ce qui lui donne un peu de vacances lorsque les performances sont les plus importantes (au d√©marrage).  Les binaires R2R sont plus volumineux car ils contiennent √† la fois du code de langage interm√©diaire (IL), qui est toujours n√©cessaire pour certains sc√©narios, et la version native du m√™me code, pour am√©liorer le d√©marrage. </p><br><p>  R2R est pris en charge avec .NET Core 3.0.  Il ne peut pas √™tre utilis√© avec des versions ant√©rieures de .NET Core. </p><br><h3>  Exemples de num√©ros de performances </h3><br><p>  Les num√©ros de performances suivants sont collect√©s √† l'aide d'un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple d'application WPF</a> .  L'application a √©t√© publi√©e comme autonome et n'a pas utilis√© l'√©diteur de liens d'assemblage (couvert plus loin dans ce post). </p><br><p>  Application IL uniquement: </p><br><ul><li>  Temps de d√©marrage: 1,9 secondes </li><li>  Utilisation de la m√©moire: 69,1 Mo </li><li>  Taille de l'application: 150 Mo </li></ul><br><p>  Avec les images ReadyToRun: </p><br><ul><li>  Temps de d√©marrage: 1,3 seconde. </li><li>  Utilisation de la m√©moire: 55,7 Mo </li><li>  Taille de l'application: 156 Mo </li></ul><br><h2>  Images ReadyToRun, expliqu√©es </h2><br><p>  Vous pouvez R2R compiler les biblioth√®ques et les binaires d'application.  √Ä l'heure actuelle, les biblioth√®ques ne peuvent √™tre compil√©es que R2R dans le cadre d'une application, et non pour √™tre livr√©es en tant que package NuGet.  Nous aimerions avoir plus de commentaires sur l'importance de ce sc√©nario. </p><br><p>  La compilation des assemblages AOT est disponible en tant que concept avec .NET depuis longtemps, remontant au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">.NET Framework et NGEN</a> .  NGEN pr√©sente un inconv√©nient majeur, √† savoir que la compilation doit √™tre effectu√©e sur les machines clientes, √† l'aide de l'outil NGEN.  Il n'est pas possible de g√©n√©rer des images NGEN dans le cadre de la cr√©ation de votre application. </p><br><p>  Entrez .NET Core.  Il est livr√© avec <a href="">crossgen</a> , qui produit des images natives dans un format plus r√©cent appel√© <a href="">ReadyToRun</a> .  Le nom d√©crit sa proposition de valeur principale, √† savoir que ces images natives peuvent √™tre construites dans le cadre de votre g√©n√©ration et sont ¬´pr√™tes √† fonctionner¬ª sans aucun travail suppl√©mentaire sur les machines clientes.  C'est une am√©lioration majeure, et aussi une victoire importante pour le changement climatique. </p><br><p>  En termes de compatibilit√©, les images ReadyToRun sont similaires aux assemblys IL, avec quelques diff√©rences cl√©s. </p><br><ul><li>  Les assemblys IL contiennent uniquement du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">code IL</a> .  Ils peuvent s'ex√©cuter sur n'importe quel runtime qui prend en charge le cadre cible donn√© pour cet assembly.  Par exemple, un assembly <code>netstandard2.0</code> peut s'ex√©cuter sur .NET Framework 4.6+ et .NET Core 2.0+, sur n'importe quel syst√®me d'exploitation pris en charge (Windows, macOS, Linux) et architecture (Intel, ARM, 32 bits, 64 bits). </li><li>  Les assemblys R2R contiennent IL et du code natif.  Ils sont compil√©s pour une version d'ex√©cution et un environnement d'ex√©cution (RID) .NET Core minimum sp√©cifiques.  Par exemple, un assemblage <code>netstandard2.0</code> peut √™tre compil√© R2R pour .NET Core 3.0 et Linux x64.  Il ne sera utilisable que dans cette configuration ou dans une configuration compatible (comme .NET Core 3.1 ou .NET Core 5.0, sous Linux x64), car il contient du code natif qui n'est utilisable que dans cet environnement d'ex√©cution. </li></ul><br><h3>  Instructions </h3><br><p>  La compilation ReadyToRun est une fonctionnalit√© opt-in de publication uniquement.  Nous en avons publi√© une version d'aper√ßu avec .NET Core 3.0 Preview 5. </p><br><p>  Pour activer la compilation ReadyToRun, vous devez: </p><br><ul><li>  D√©finissez la propri√©t√© <code>PublishReadyToRun</code> sur <code>true</code> . </li><li>  Publiez √† l'aide d'un <code>RuntimeIdentifier</code> explicite. </li></ul><br><p>  Remarque: Lorsque les assemblys d'application sont compil√©s, le code natif produit est sp√©cifique √† la plate-forme et √† l'architecture (c'est pourquoi vous devez sp√©cifier un RuntimeIdentifier valide lors de la publication). </p><br><p>  Voici un exemple: </p><br><pre> <code class="cs hljs">&lt;Project Sdk=<span class="hljs-string"><span class="hljs-string">"Microsoft.NET.Sdk"</span></span>&gt; &lt;PropertyGroup&gt; &lt;OutputType&gt;Exe&lt;/OutputType&gt; &lt;TargetFramework&gt;netcoreapp3<span class="hljs-number"><span class="hljs-number">.0</span></span>&lt;/TargetFramework&gt; &lt;PublishReadyToRun&gt;<span class="hljs-literal"><span class="hljs-literal">true</span></span>&lt;/PublishReadyToRun&gt; &lt;/PropertyGroup&gt; &lt;/Project&gt;</code> </pre> <br><p>  Et publiez √† l'aide de la commande suivante: </p><br><pre> <code class="cs hljs">dotnet publish -r win-x64 -c Release</code> </pre> <br><p>  Remarque: Le <code>RuntimeIdentifier</code> peut √©galement √™tre d√©fini dans le fichier de projet. </p><br><p>  Remarque: ReadyToRun n'est actuellement pris en charge que pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">les applications autonomes</a> .  Il sera activ√© pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">les applications d√©pendantes</a> du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">framework</a> dans un aper√ßu ult√©rieur. </p><br><p>  La g√©n√©ration de symboles natifs peut √™tre activ√©e en d√©finissant la propri√©t√© <code>PublishReadyToRunEmitSymbols</code> sur <code>true</code> dans votre projet.  Vous n'avez pas besoin de g√©n√©rer de symboles natifs √† des fins de d√©bogage.  Ces symboles ne sont utiles qu'√† des fins de profilage. </p><br><p>  Le SDK prend actuellement en charge un moyen d'exclure certains assemblys de la compilation en images ReadyToRun.  Cela peut √™tre utile dans les cas o√π certains assemblages n'ont pas vraiment besoin d'√™tre optimis√©s pour les performances.  Cela peut aider √† r√©duire la taille de l'application.  Cela pourrait √©galement √™tre une solution de contournement utile dans les cas o√π le compilateur ReadyToRun ne parvient pas √† compiler un certain assembly.  L'exclusion se fait √† l'aide du groupe d'√©l√©ments PublishReadyToRunExclude.  Exemple: </p><br><pre> <code class="cs hljs">&lt;ItemGroup&gt; &lt;PublishReadyToRunExclude Include=<span class="hljs-string"><span class="hljs-string">"FilenameOfAssemblyToExclude.dll"</span></span> /&gt; &lt;/ItemGroup&gt;</code> </pre> <br><h2>  Compilations multi-plateformes / architectures </h2><br><p>  Le compilateur ReadyToRun ne prend actuellement pas en charge le ciblage crois√©.  Vous devez compiler sur une cible donn√©e.  Par exemple, si vous souhaitez des images R2R pour Windows x64, vous devez ex√©cuter la commande de publication sur cet environnement. </p><br><p>  Exceptions √† cela: </p><br><ul><li>  Windows x64 peut √™tre utilis√© pour compiler des images Windows ARM32, ARM64 et x86. </li><li>  Windows x86 peut √™tre utilis√© pour compiler des images Windows ARM32. </li><li>  Linux x64 peut √™tre utilis√© pour compiler des images Linux ARM32 et ARM64. </li></ul><br><h2>  Liaison d'assemblage </h2><br><p>  Le SDK .NET core 3.0 est fourni avec un outil qui peut r√©duire la taille des applications en analysant IL et en supprimant les assemblages inutilis√©s. </p><br><p>  Avec .NET Core, il a toujours √©t√© possible de publier des applications autonomes qui incluent tout le n√©cessaire pour ex√©cuter votre code, sans n√©cessiter l'installation de .NET sur la cible de d√©ploiement.  Dans certains cas, l'application ne n√©cessite qu'un petit sous-ensemble du cadre pour fonctionner et pourrait potentiellement √™tre beaucoup plus petite en n'incluant que les biblioth√®ques utilis√©es. </p><br><p>  Nous utilisons l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√©diteur</a> de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">liens IL</a> pour analyser l'IL de votre application afin de d√©tecter le code r√©ellement requis, puis supprimer les biblioth√®ques de framework inutilis√©es.  Cela peut r√©duire consid√©rablement la taille de certaines applications.  En r√®gle g√©n√©rale, les petites applications de console de type outil b√©n√©ficient le plus, car elles ont tendance √† utiliser des sous-ensembles assez petits du cadre et sont g√©n√©ralement plus adapt√©es au d√©coupage. </p><br><p>  Pour utiliser cet outil, d√©finissez <code>PublishTrimmed=true</code> dans votre projet et publiez une application autonome: </p><br><pre> <code class="cs hljs">dotnet publish -r &lt;rid&gt; -c Release</code> </pre> <br><p>  La sortie de publication comprendra un sous-ensemble des biblioth√®ques de framework, selon ce que le code d'application appelle.  Pour une application helloworld, l'√©diteur de liens r√©duit la taille de ~ 68 Mo √† ~ 28 Mo. </p><br><p>  Les applications ou les frameworks (y compris ASP.NET Core et WPF) qui utilisent la r√©flexion ou les fonctionnalit√©s dynamiques associ√©es se cassent souvent lorsqu'ils sont coup√©s, car l'√©diteur de liens ne conna√Æt pas ce comportement dynamique et ne peut g√©n√©ralement pas d√©terminer quels types de frameworks seront n√©cessaires pour la r√©flexion. au moment de l'ex√©cution.  Pour couper de telles applications, vous devez indiquer √† l'√©diteur de liens tous les types n√©cessaires √† la r√©flexion dans votre code et dans tous les packages ou frameworks dont vous d√©pendez.  Assurez-vous de tester vos applications apr√®s le d√©coupage. </p><br><p>  Pour plus d'informations sur IL Linker, consultez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">documentation</a> ou visitez le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel mono / linker</a> . </p><br><p>  Remarque: Dans les versions pr√©c√©dentes de .NET Core, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ILLink.Tasks</a> √©tait fourni en tant que package NuGet externe et offrait une grande partie des m√™mes fonctionnalit√©s.  Il n'est plus pris en charge - veuillez mettre √† jour le dernier SDK 3.0 et essayer la nouvelle exp√©rience! </p><br><h2>  Utilisation de l'√©diteur de liens et de ReadToRun ensemble </h2><br><p>  L'√©diteur de liens et le compilateur ReadyToRun peuvent √™tre utilis√©s pour la m√™me application.  En g√©n√©ral, l'√©diteur de liens r√©duit la taille de votre application, puis le compilateur pr√™t √† fonctionner la rendra un peu plus grande, mais avec des gains de performances significatifs.  Il vaut la peine de tester dans diff√©rentes configurations pour comprendre l'impact de chaque option. </p><br><p>  Remarque: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dotnet / sdk # 3257</a> emp√™che le lieur et ReadyToRun d'√™tre utilis√©s ensemble pour les applications WPF et Windows Forms.  Nous travaillons sur la correction de cela dans le cadre de la version .NET Core 3.0. </p><br><h2>  Exemple d'h√©bergement natif </h2><br><p>  L'√©quipe a r√©cemment publi√© un exemple <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d'h√©bergement natif</a> .  Il illustre une approche de meilleures pratiques pour l'h√©bergement de .NET Core dans une application native. </p><br><p>  Dans le cadre de .NET Core 3.0, nous exposons d√©sormais des fonctionnalit√©s g√©n√©rales aux h√¥tes natifs .NET Core qui n'√©taient auparavant disponibles que pour les applications g√©r√©es .NET Core via les h√¥tes .NET Core officiellement fournis.  La fonctionnalit√© est principalement li√©e au chargement de l'assemblage.  Cette fonctionnalit√© devrait faciliter la production d'h√¥tes natifs pouvant tirer parti de l'ensemble des fonctionnalit√©s de .NET Core. </p><br><h2>  Prise en charge HTTP / 2 dans HttpClient </h2><br><p>  HTTP / 2 est une r√©vision majeure du protocole HTTP.  Certaines des caract√©ristiques notables de HTTP / 2 sont la prise en charge de la compression d'en-t√™te et des flux enti√®rement multiplex√©s sur la m√™me connexion.  Bien que HTTP / 2 pr√©serve la s√©mantique de HTTP (en-t√™tes HTTP, m√©thodes, etc.), il s'agit d'un changement par rapport √† HTTP / 1.x dans la fa√ßon dont les donn√©es sont encadr√©es et envoy√©es via le c√¢ble. </p><br><p>  <code>HttpClient</code> ajoute d√©sormais des supports pour effectuer des requ√™tes HTTP / 2.  Bien que la valeur par d√©faut reste HTTP / 1.1, vous pouvez choisir d'utiliser HTTP / 2 en d√©finissant la version sur votre message de demande HTTP. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HttpClient() { BaseAddress = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">"https://localhost:5001"</span></span>) }; <span class="hljs-comment"><span class="hljs-comment">// HTTP/1.1 request using (var response = await client.GetAsync("/")) { Console.WriteLine(response.Content); } // HTTP/2 request using (var request = new HttpRequestMessage(HttpMethod.Get, "/") { Version = new Version(2, 0) }) using (var response = await client.SendAsync(request)) { Console.WriteLine(response.Content); }</span></span></code> </pre> <br><p>  Vous pouvez √©galement envoyer par d√©faut des requ√™tes HTTP / 2 en d√©finissant la propri√©t√© <code>HttpClient</code> sur <code>HttpClient</code> . </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HttpClient() { BaseAddress = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Uri(<span class="hljs-string"><span class="hljs-string">"https://localhost:5001"</span></span>), DefaultRequestVersion = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Version(<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>) }; <span class="hljs-comment"><span class="hljs-comment">// Defaults to HTTP/2 using (var response = await client.GetAsync("/")) { Console.WriteLine(response.Content); }</span></span></code> </pre> <br><p>  En cons√©quence de ce changement de trame, les serveurs et les clients doivent n√©gocier la version de protocole utilis√©e.  ALPN (Application-Layer Protocol Negotiation) est une extension TLS qui permet au serveur et au client de n√©gocier la version du protocole utilis√©e dans le cadre de leur n√©gociation TLS.  Bien qu'il soit possible d'avoir une connaissance pr√©alable entre le serveur et le client sur le protocole, la plupart des serveurs ne prennent en charge ALPN que comme seul moyen d'√©tablir une connexion HTTP / 2.  En tant que tel, HTTP / 2 est n√©goci√© par <code>HttpClient</code> uniquement sur une connexion TLS. </p><br><p>  Dans les sc√©narios de d√©veloppement lorsque le serveur et le client savent a priori que les deux parleront HTTP / 2 non chiffr√©s, vous pouvez √©tablir une connexion HTTP / 2 sur du texte clair en d√©finissant un commutateur <code>AppContext</code> ou une variable d'environnement ( <code>DOTNET_SYSTEM_NET_HTTP_SOCKETSHTTPHANDLER_HTTP2UNENCRYPTEDSUPPORT=1</code> ). </p><br><pre> <code class="cs hljs">AppContext.SetSwitch(<span class="hljs-string"><span class="hljs-string">"System.Net.Http.SocketsHttpHandler.Http2UnencryptedSupport"</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre> <br><h2>  Cl√¥ture </h2><br><p>  Veuillez essayer les nouvelles fonctionnalit√©s.  Veuillez signaler les probl√®mes li√©s aux bogues ou √† toute exp√©rience difficile que vous rencontrez.  Nous voulons la r√©troaction!  Vous pouvez √©galement d√©poser des demandes de fonctionnalit√©s, mais elles devront probablement attendre d'√™tre mises en ≈ìuvre jusqu'√† la prochaine version √† ce stade. </p><br><p>  Nous approchons maintenant de la fin de la fonctionnalit√© compl√®te pour .NET Core 3.0, et nous faisons maintenant la transition de l'attention de l'√©quipe vers la qualit√© de la version.  Nous avons quelques mois de correction de bogues et de travail sur les performances √† venir.  Nous appr√©cierons √©galement vos commentaires tout au long de ce processus. </p><br><p>  Sur cette note, nous allons bient√¥t basculer les branches principales des r√©f√©rentiels .NET Core vers la prochaine version majeure, probablement au moment ou peu apr√®s la version Preview 7 (juillet). </p><br><p>  Merci d'avoir essay√© les aper√ßus .NET Core 3.0.  Nous appr√©cions votre aide.  √Ä ce stade, nous nous concentrons sur l'obtention d'une version finale entre vos mains. </p><br><hr><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Richard Lander</a> <br>  PM, .NET Team </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr456224/">https://habr.com/ru/post/fr456224/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456214/index.html">Utilisez __main__.py</a></li>
<li><a href="../fr456216/index.html">Faire un jeu r√©tro des ann√©es 80 ou comment faire des maquettes pour la d√©coupe laser</a></li>
<li><a href="../fr456218/index.html">Sortie de .NET Core 3.0 (Preview 6)</a></li>
<li><a href="../fr456220/index.html">G√©n√©ralisation du probl√®me Brokar</a></li>
<li><a href="../fr456222/index.html">Le g√©nie g√©n√©tique des embryons humains deviendra s√ªr et efficace dans deux ans</a></li>
<li><a href="../fr456226/index.html">Pr√©diction des r√©sultats du football</a></li>
<li><a href="../fr456230/index.html">Iobroker quest for quests in reality games</a></li>
<li><a href="../fr456232/index.html">Guide: mise √† jour des interfaces avec les membres par d√©faut dans C # 8.0</a></li>
<li><a href="../fr456234/index.html">Pourquoi Cisco n'ach√®te-t-il pas Splunk ou une discussion sur le fonctionnement de la plate-forme Cisco pour la chasse aux menaces</a></li>
<li><a href="../fr456236/index.html">Peter - Insider Dev Tour: Conf√©rence Insider pour les d√©veloppeurs de Microsoft</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>