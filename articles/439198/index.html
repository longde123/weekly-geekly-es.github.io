<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèø‚Äçüç≥ üëÅÔ∏è üë®üèæ‚Äçüè≠ Barrera Island Generation üëÅ‚Äçüó® ü§µüèø üßï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Las noticias de diciembre del hurac√°n Florence a menudo se refer√≠an a los baj√≠os externos , una serie de islas de barrera frente a la costa de Carolin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Barrera Island Generation</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439198/">  Las noticias de diciembre del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hurac√°n Florence a</a> menudo se refer√≠an a los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">baj√≠os externos</a> , una serie de islas de barrera frente a la costa de Carolina del Norte: <br><br><div style="text-align:center;"><img width="50%" height="50%" src="https://habrastorage.org/getpro/habr/post_images/a00/e8c/eef/a00e8ceef5bfbae53ac9a95a42a7cf5e.png"></div><br>  Las islas de barrera son zonas planas o cuadradas de arena formadas por olas y olas paralelas a la costa del continente.  A menudo toman la forma de largas cadenas que pueden estirarse por muchas decenas de millas.  Las islas de barrera generalmente est√°n separadas por peque√±os canales de marea y pueden formar lagunas entre las islas y el continente. <br><br>  Seg√∫n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> , las islas de barrera pueden cubrir hasta el 15% de la costa, por lo que puede esperar verlas en la mayor√≠a de los mapas de fantas√≠a, pero de hecho son bastante raros.  Y debido a la naturaleza del ruido, casi nunca ocurren en mapas generados por procedimientos que usan ruido para crear terreno. <br><br>  Para entender por qu√© esto es as√≠, echemos un vistazo al mapa vainilla de la isla: <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cb8/342/f10/cb8342f1095276e3e7ced43ed57bf688.png"></div><br>  De hecho, es un c√≠rculo distorsionado por una peque√±a cantidad de ruido de baja frecuencia agregado para dividir una forma circular.  Ahora tratemos de usar el ruido para romper la costa y formar islas costeras.  Aqu√≠ est√° la misma isla con la adici√≥n de ruido de baja frecuencia: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e18/658/5b7/e186585b7a15a9287ad56bc13ac61f6d.png"></div><br>  Cuenta con bah√≠as y capas.  Los elementos de relieve son bastante grandes porque utilic√© ruido de baja frecuencia, que cambia lentamente.  Sin embargo, el ruido no es lo suficientemente fuerte como para crear islas.  Vamos a empujarlo un poco: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f9a/e78/c4a/f9ae78c4a84f5e99b2f58821ccade3b0.png"></div><br>  Ahora hemos creado varias islas, pero son esencialmente puntos circulares, que no necesariamente se extienden a lo largo de la costa.  Puede agregar ruido de alta frecuencia: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cab/89f/834/cab89f83445965bbad12d0f95bba1d94.png"></div><br>  Esto puede darnos costas muy rotas y peque√±as islas a lo largo de la costa, pero nada parecido a una isla barrera. <br><br>  La √∫nica raz√≥n para esto es que el ruido no coincide en x e y, por lo tanto, aunque el ruido no es aleatorio en general, las formas que crea son aleatorias: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d2e/4b4/ef6/d2e4b4ef6005d2675d2557f71eb0ce7b.png"></div><br>  Para algunas cosas, esto es bueno, pero no es adecuado para crear una forma espec√≠fica, por ejemplo, islas a lo largo de la costa. <br><br>  Como en otros casos, cuando necesitaba generar una determinada forma o √°rea, era necesario crear una m√°scara de la forma requerida y luego usar el ruido dentro de la m√°scara.  (Tambi√©n puede usar el ruido para distorsionar la m√°scara y darle una forma m√°s natural). Las islas de barrera son, de hecho, √°reas largas y delgadas que est√°n desviadas de la costa.  Entonces, creemos una m√°scara de esta forma. <br><br>  Para empezar, establecemos la parte de la costa en la que se ubicar√° la isla barrera.  Esto se puede hacer seleccionando un punto aleatorio en la costa y un segundo punto inferior, que est√°n marcados en la figura con una l√≠nea roja en la esquina superior derecha: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b45/e88/a41/b45e88a410c47b6832350b02b3215525.png"></div><br>  Para comenzar a crear una isla barrera, puedo tomar una l√≠nea recta entre estos dos puntos y proyectarla un poco hacia afuera, hacia el agua.  Esto me dar√° una isla muy recta y de aspecto poco natural, pero puedes distorsionar su forma para ocultarla.  El verdadero problema es que la isla no seguir√° la costa.  Probablemente se ver√° normal para la mayor√≠a de los tramos directos de la costa, pero parecer√° extra√±o en las costas sinuosas.  Es mejor replicar la costa y convertirla en la base de la forma de la isla. <br><br>  Para hacer esto, necesito crear una copia de la costa y luego proyectarla en el oc√©ano perpendicular a la costa.  Ya tengo un procedimiento para calcular perpendiculares (normales) a l√≠neas discontinuas desde que me di cuenta de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">l√≠neas escritas a mano</a> , y mis costas siempre van en la misma direcci√≥n, por lo que es bastante simple: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/9f1/b1e/0b39f1b1e868bb43d98839614109a3f5.png"></div><br>  O <i>parece</i> simple.  Veamos qu√© sucede si proyecto la costa un poco m√°s hacia afuera (para crear el otro lado de la m√°scara de la isla) en la parte menos lisa de la costa: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3e/99f/5b8/a3e99f5b8bed9f6a0ffd74f5ae7e864a.png"></div><br>  Dos segmentos de la l√≠nea proyectada se cruzan entre s√≠ y crean un aterrador "ocho" en el pol√≠gono.  Este es el llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">problema de la curva paralela</a> .  No podemos simplemente desplazar la costa a cierta distancia, tambi√©n es necesario resolver los problemas que surgen de las esquinas agudas internas y externas. <br><br>  Estaba buscando un c√≥digo Javascript para resolver este problema, pero el √∫nico ejemplo encontrado (a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">partir de aqu√≠</a> ) fue sorprendente incluso en muestras bastante simples.  Entonces escrib√≠ el m√≠o.  En general, la soluci√≥n es desplazar cada punto a lo largo de la normalidad, pero luego verificar si el nuevo punto crea una l√≠nea que interseque cualquiera de las l√≠neas existentes.  Si es as√≠, cortamos el bucle e insertamos una nueva l√≠nea que consiste en el punto de intersecci√≥n y el nuevo punto.  En los casos de prueba que prob√©, este sistema funcion√≥ bastante bien para mis requisitos. <br><br>  Entonces ahora puedo generar m√°scaras simples (sin bucles) para las islas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/599/060/e89/599060e8909fb0d5dda3f01b7ca82806.png"></div><br>  Esto es demasiado parejo, as√≠ que distorsionar√© los contornos: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b00/420/8a9/b004208a92018017e000669848f991ad.png"></div><br>  Los contornos pueden tocar la costa en algunos puntos, pero esto es normal; esto a menudo se encuentra en las islas de barrera. <br><br>  El siguiente paso es llenar el contorno con tierra, pero antes de hacer esto, quiero alargar las islas y agregar la l√≥gica de evitar las islas que se cruzan en caso de crear varias islas de barrera en la misma costa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cee/654/659/cee6546597a3c9a4552344298e07e2ca.png"></div><br>  Ahora intentemos agregar un poco de tierra.  Para hacer esto, elevar√© la altura de cualquier ubicaci√≥n de tierra (que son tri√°ngulos de Delaunay) sobre el nivel del mar: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bf7/206/5d4/bf72065d44a8acc8247d2a1895c5db72.png"></div><br>  Hay un par de aspectos que vale la pena destacar.  En primer lugar, en la esquina superior izquierda hay una isla barrera bastante exitosa.  Sin embargo, la isla no parece llenar bien el vertedero.  Muchos tri√°ngulos terrestres est√°n "encendidos" debido a la presencia de sus centros dentro del pol√≠gono.  Esto agrega aleatoriedad a la forma de la isla.  En segundo lugar, uno puede notar que las otras dos islas estaban tan cerca de la costa que simplemente se fusionaron con ella.  Como quiero crear islas aqu√≠, no necesito que esto suceda con demasiada frecuencia, as√≠ que configurar√© la generaci√≥n para obtener una mayor brecha de agua entre la costa y la isla.  (M√°s adelante agregar√© una marca para evitar que esto suceda). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ca/150/ba5/6ca150ba54c211d1da8fdf4470401a02.png"></div><br>  Una de las cosas buenas de los tri√°ngulos irregulares terrestres es que crean naturalmente conductos de marea t√≠picos de las islas de barrera.  Lo malo de ellos es que generalmente crean islas de puntos que parecen perlas distorsionadas en una cuerda.  No son muy similares a las islas de barrera, y si tomas muchos tri√°ngulos individuales, se ven muy poco naturales. <br><br>  Si aumento el ancho de las islas, ambos efectos desaparecen y obtengo m√°s islas naturales, pero sin canales de marea: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/153/005/e17/153005e17c9d6bf4e464e2e27b77c1c7.png"></div><br>  Pero me gustar√≠a aprender a generar islas muy estrechas.  Otro enfoque es aumentar (significativamente) el n√∫mero de ubicaciones en el mundo para aumentar la resoluci√≥n: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3b6/57c/f04/3b657cf0414f8bcc8cc21da0921d25e6.png"></div><br>  Por lo tanto, podemos obtener islas incre√≠blemente delgadas y detalladas, pero aumenta significativamente el tiempo y la memoria necesarios para crear un mapa. <br><br>  En ambos m√©todos, hay una buena posibilidad de que algunas partes de la isla sean muy desiguales: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a75/32a/edd/a7532aedd16eeeba152ab0ee2e213f4b.png"></div><br>  Esto sucede porque la ruta intersecta los dos lados (y a veces los tres lados) de los tri√°ngulos de Delaunay subyacentes.  Este es un problema inherente al uso de la triangulaci√≥n de Delaunay en la generaci√≥n de mapas, ¬°pero por alguna raz√≥n rara vez lo discuten!  Esto sucede en las costas de mi juego con poca frecuencia, porque para reducir la cantidad de tales casos, agregu√© deliberadamente una fase de suavizado, pero esta fase tiende a destruir islas estrechas.  Una posible soluci√≥n es crear islas un poco m√°s anchas y usar anti-aliasing: si est√° configurado correctamente, puede obtener islas m√°s delgadas sin muchos artefactos triangulares: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/52d/558/3f3/52d5583f3b04c85ddd7f504c3679cc01.png"></div><br>  Sin embargo, con este enfoque, todav√≠a hay limitaciones sobre cu√°n estrechas pueden ser las islas.  Adem√°s, esto significa que nunca obtendremos verdaderas costas fractales. <br><br>  A veces, el algoritmo de suavizado conduce a la divisi√≥n de la isla de barrera larga en varias peque√±as (como en la esquina inferior izquierda de la imagen de arriba), pero ser√≠a conveniente tener una opci√≥n que le permita hacer esto a la fuerza: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/863/e5f/489/863e5f4893bdb0069219c761308b2ff7.png"></div><br>  Lo √∫nico que queda es dar nombres a las islas y mapearlas.  El √∫nico aspecto sutil aqu√≠ es que no quiero dar nombres a todas las islas en la cadena de islas de barrera.  En las cadenas reales de islas de barrera, las islas individuales a menudo tienen nombres, lo que lleva al caos en el mapa: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e15/8b4/b27/e158b4b272c4b55b1d3b128e5e1b9d4c.png"></div><br>  Por lo tanto, al crear una isla de barrera, tomo en cuenta todo el arco y le asigno un nombre, incluso si, como resultado, la generaci√≥n divide el arco en varias islas: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fd/797/070/6fd797070e48a48856b4862892ff3b66.png"></div><br>  Por lo general, las islas de barrera se denominan "bancos" o "ejes" (barras), por lo que estas palabras se encuentran en nombres de variantes. <br><br>  Este ejemplo muestra un problema potencial de isla barrera: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/028/cee/b56/028ceeb56ebe1c5c83ea7e56f02c3a2f.png"></div><br>  Aqu√≠ se cre√≥ la isla barrera dentro de la bah√≠a.  Esto es il√≥gico (adem√°s, conduce a la intersecci√≥n de nombres).  Para evitar esto, puedo usar la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">l√≥gica de reconocimiento de</a> mis <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bah√≠as</a> y omitir estas secciones de la costa.  Probablemente no haya protecci√≥n contra el tonto en este m√©todo, pero funciona bien para esta tarjeta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/086/180/a33/086180a3377f856a818fd9097925a998.png"></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/439198/">https://habr.com/ru/post/439198/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../439186/index.html">UX Editor: historia real, vida rural</a></li>
<li><a href="../439190/index.html">C√≥mo crear una aplicaci√≥n de realidad aumentada usando ARCore</a></li>
<li><a href="../439192/index.html">PC Speaker To Eleven</a></li>
<li><a href="../439194/index.html">Gesti√≥n de personajes con eventos compartidos</a></li>
<li><a href="../439196/index.html">Analistas de JPMorgan: Apple deber√≠a comprar Blizzard, Netflix o Sonos para tranquilizar a los inversores</a></li>
<li><a href="../439200/index.html">Compositor para los m√°s peque√±os.</a></li>
<li><a href="../439202/index.html">Detecci√≥n de ataques web mediante el codificador autom√°tico Seq2Seq</a></li>
<li><a href="../439204/index.html">Mejora de la eficiencia de la fotos√≠ntesis por modificaci√≥n gen√©tica de plantas.</a></li>
<li><a href="../439206/index.html">¬øC√≥mo resolvimos el problema de continuar las listas de reproducci√≥n en RecSys Challenge y obtuvimos el 3er lugar?</a></li>
<li><a href="../439208/index.html">Oh, mi c√≥digo: c√≥mo funciona MAPS.ME</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>