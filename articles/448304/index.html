<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äçüë©‚Äçüë¶‚Äçüë¶ ‚è∞ üñáÔ∏è El libro "Vue.js en acci√≥n" üôåüèæ üìó ‚ô†Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola habrozhiteli! El prop√≥sito de este libro es brindarle el conocimiento con el que no dudar√° en unirse a cualquier proyecto que use esta biblioteca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El libro "Vue.js en acci√≥n"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/448304/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/7u/pn/a0/7upna0knmll01vosthivrjtjhpi.jpeg" align="left" alt="imagen"></a>  Hola habrozhiteli!  El prop√≥sito de este libro es brindarle el conocimiento con el que no dudar√° en unirse a cualquier proyecto que use esta biblioteca.  El libro est√° dirigido a todos los que est√©n interesados ‚Äã‚Äãen aprender Vue.js y tengan experiencia con JavaScript, HTML y CSS.  No es necesario que tenga un conocimiento profundo de esta √°rea, pero comprender los conceptos b√°sicos, como matrices, variables, bucles y elementos HTML, no le har√° da√±o. <br><br>  Debajo del corte hay un pasaje en forma del cap√≠tulo de Vuex, que describe: cu√°l es la condici√≥n;  el uso de captadores;  implementaci√≥n de mutaciones;  agregando acciones;  trabajar con m√©todos de ayuda de Vuex;  m√≥dulos y configuraci√≥n de proyectos. <br><a name="habracut"></a><br><h3>  10.1  ¬øPor qu√© necesitamos Vuex? </h3><br>  La biblioteca Vuex gestiona el estado.  Lo almacena centralmente, lo que facilita el acceso a cualquier componente.  El estado es informaci√≥n o datos que admiten la aplicaci√≥n.  Esto es importante porque necesitamos un mecanismo confiable y comprensible para trabajar con esta informaci√≥n. <br><br>  Si ya tiene experiencia trabajando con otros marcos para crear aplicaciones de una sola p√°gina, algunos de estos conceptos pueden parecerle familiares.  Por ejemplo, React usa un sistema de administraci√≥n de estado similar llamado Redux.  Vuex y Redux est√°n influenciados por el proyecto Flux.  Esta es la arquitectura propuesta por Facebook, que est√° dise√±ada para simplificar la construcci√≥n de aplicaciones web de clientes.  Contribuye al movimiento de datos en una direcci√≥n: desde acciones hasta el despachador, luego al almacenamiento y al final a la vista.  Este enfoque le permite separar el estado del resto de la aplicaci√≥n y fomenta las actualizaciones sincr√≥nicas.  Puede obtener m√°s informaci√≥n sobre Flux en la documentaci√≥n oficial en facebook.github.io/flux/docs/overview.html. <br><br>  Vuex funciona con el mismo principio, ayudando a cambiar el estado de forma predecible y sincr√≥nica.  Los desarrolladores no necesitan preocuparse por las consecuencias de actualizar el estado con funciones s√≠ncronas y as√≠ncronas.  Imagine que estamos interactuando con una API de servidor que devuelve datos en formato JSON.  ¬øQu√© sucede si al mismo tiempo estos datos son modificados por una biblioteca de terceros?  No queremos un resultado impredecible.  Vuex ayuda a evitar tales situaciones al eliminar cualquier cambio asincr√≥nico. <br>  Probablemente se est√© preguntando por qu√© incluso necesitamos la biblioteca Vuex.  Al final, Vue.js le permite pasar informaci√≥n a los componentes.  Como sabe en cap√≠tulos anteriores, los par√°metros de entrada y los eventos de usuario est√°n destinados a esto.  Incluso podr√≠amos crear nuestro propio bus de eventos para la transferencia de datos y la comunicaci√≥n entre componentes.  Un ejemplo de tal mecanismo se presenta en la Fig.  10.1 <br><br>  Esto ser√≠a apropiado para aplicaciones peque√±as con un pu√±ado de componentes.  En este caso, solo necesita transferir informaci√≥n a unos pocos destinatarios.  Pero, ¬øqu√© pasa si la aplicaci√≥n es m√°s grande, m√°s compleja y en capas?  Est√° claro que en un proyecto grande no es tan f√°cil hacer un seguimiento de todas las funciones de devoluci√≥n de llamada, par√°metros de entrada y eventos. <br><br>  Solo para tales situaciones, se cre√≥ la biblioteca Vuex.  Le permite organizar el trabajo con el estado en forma de un repositorio centralizado.  Imagine un escenario que vale la pena pensar en usar Vuex.  Por ejemplo, estamos trabajando en un blog con art√≠culos y comentarios que puede crear, editar y eliminar.  Al mismo tiempo, tenemos un panel de administraci√≥n que le permite bloquear y agregar usuarios. <br><br>  Veamos c√≥mo se implementa esto usando Vuex.  En la fig.  La figura 10.2 muestra que el componente EditBio es un elemento secundario del panel de administraci√≥n.  Necesita acceso a la informaci√≥n del usuario para poder actualizarla.  Al trabajar con Vuex, podemos acceder al repositorio central, modificar los datos y guardar los cambios directamente desde el componente EditBio.  Esto es mucho mejor que pasar informaci√≥n desde la instancia ra√≠z de Vue.js al componente Admin y luego a EditBio usando los par√°metros de entrada.  Ser√≠a dif√≠cil para nosotros hacer un seguimiento de los datos ubicados en diferentes lugares. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xr/0b/03/xr0b03q-1ielejscatrwuawsmfw.png" alt="imagen"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/az/hj/6x/azhj6xybhs1mchcgfshl3ardskq.png" alt="imagen"></div><br>  Sin embargo, el uso de Vuex tiene un precio en forma de c√≥digo adicional y complejidad de la estructura de la aplicaci√≥n.  Como ya se mencion√≥, es mejor no utilizar esta biblioteca en proyectos simples que constan de varios componentes.  Su potencial real se manifiesta en grandes aplicaciones con un estado m√°s complejo. <br><br><h3>  10.2  Estado y mutaci√≥n en Vuex </h3><br>  Vuex almacena el estado de toda la aplicaci√≥n en un solo objeto, que tambi√©n se llama una √∫nica fuente de verdad.  Como su nombre indica, todos los datos se recopilan en un lugar y no se duplican en otras partes del c√≥digo. <br><blockquote>  SUGERENCIA <br><br>  Vale la pena se√±alar que no estamos obligados a almacenar todos nuestros datos en Vuex.  Los componentes individuales pueden tener su propio estado local.  En ciertas situaciones, esto es preferible.  Por ejemplo, su componente tiene una variable que se usa solo dentro de √©l.  Ella debe permanecer local. </blockquote>  Considere un ejemplo simple de trabajar con estado en Vuex.  Todo nuestro c√≥digo se colocar√° en un archivo.  M√°s adelante aprender√° c√≥mo agregar Vuex a un proyecto usando Vue-CLI.  Abra un editor de texto y cree el archivo vuex-state.html.  Mostraremos un mensaje ubicado en el repositorio central y un contador.  El resultado se muestra en la fig.  10.3 <br><br><img src="https://habrastorage.org/webt/iv/4v/tn/iv4vtnbwgbqcbfgp-gmmh1ujhsg.png" align="left" alt="imagen">  Primero, agregue etiquetas de script con enlaces a Vue y Vuex.  Luego cree el marcado HTML.  Utilizaremos las etiquetas H1, H2, H3 y bot√≥n.  La etiqueta h1 muestra el encabezado con una variable local declarada en la instancia de Vue.js.  Los mensajes de bienvenida y de contador se ejecutan como propiedades calculadas basadas en el repositorio de Vuex. <br><br>  El elemento del bot√≥n desencadena una acci√≥n de incremento.  Copie el c√≥digo del Listado 10.1 en el archivo vuex-state.html. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/i8/0x/34/i80x34aujec0yim7ew-xuroqslu.png" alt="imagen"></div><br>  Cuando haya terminado con el marcado HTML, comencemos a crear el repositorio de Vuex.  Contendr√° todos los datos de la aplicaci√≥n, incluidas las propiedades msg y count. <br><br>  Para actualizar el estado, usamos mutaciones.  Esto es algo as√≠ como setters de otros lenguajes de programaci√≥n.  El configurador establece el valor, la mutaci√≥n actualiza el estado del programa.  En Vuex, las mutaciones deben ser sincr√≥nicas.  En nuestro ejemplo, el contador se incrementa solo con el clic de un bot√≥n, por lo que no hay necesidad de preocuparse por el c√≥digo asincr√≥nico (m√°s adelante consideraremos acciones que ayuden a resolver problemas con la asincron√≠a). <br><br>  Cree una funci√≥n de incremento dentro del objeto de mutaciones que incremente el estado.  Tome el c√≥digo en el Listado 10.2 y p√©guelo en la parte inferior del archivo vuex-state.html. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ev/35/cc/ev35cct8d2bymgoqwg47n6loghi.png" alt="imagen"></div><br>  Por lo tanto, hemos preparado el marcado HTML y el repositorio Vuex.  Ahora puede agregar l√≥gica que los conectar√°.  Queremos que la plantilla muestre los valores de mensaje y contador, que son parte del estado de Vuex.  Adem√°s, el contador debe actualizarse. <br><br>  Cree una instancia de Vue.js con una nueva funci√≥n de datos que devolver√° una propiedad de encabezado local con el texto de la aplicaci√≥n Vuex.  En la secci√≥n calculada, agregue las propiedades calculadas de bienvenida y contador.  El primero devolver√° store.state.msg y el segundo - store.state.count. <br><br>  Finalmente, necesita agregar un m√©todo llamado incremento.  Se ha declarado una mutaci√≥n en el repositorio de Vuex, pero no podemos usarla directamente para actualizar el estado.  Se proporciona una funci√≥n de confirmaci√≥n especial para esto.  Le dice a Vuex que actualice el repositorio y, por lo tanto, guarda los cambios.  La expresi√≥n store.commit ('incremento') realiza la mutaci√≥n.  Inserte el siguiente fragmento (Listado 10.3) inmediatamente despu√©s del c√≥digo creado en el Listado 10.2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ou/fr/fx/oufrfxchrwxh0ilabltkow4vl6e.png" alt="imagen"></div><br>  ¬°Esta es una aplicaci√≥n de trabajo completa basada en Vuex!  Intente presionar el bot√≥n; cada vez que presione el contador deber√≠a aumentar en 1. <br><br>  Actualice el c√≥digo para que al presionar el bot√≥n se incremente el contador en 10. Si observa de cerca la mutaci√≥n de incremento, notar√° que solo se necesita un argumento, estado.  Pasemos otro, llam√©moslo carga √∫til.  Se pasar√° por el m√©todo de incremento, que se crea en la instancia ra√≠z de Vue.js. <br><br>  Copie el contenido de vuex-state.html en el nuevo archivo vuex-state-pass.html.  Usando esta aplicaci√≥n como ejemplo, mostramos c√≥mo se pasan los argumentos. <br><br>  Como puede ver en el Listado 10.4, solo el objeto de mutaciones y el m√©todo de incremento deben actualizarse.  Agregue al incremento de mutaci√≥n otro argumento llamado carga √∫til.  Este es el valor por el cual aumentar√° state.count.  Busque la llamada a store.commit dentro del m√©todo de incremento y especifique 10 como segundo argumento.  Actualice el archivo vuex-state.html como se muestra a continuaci√≥n. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lp/ar/lp/lparlpajbodkpiupswhu-5sj814.png" alt="imagen"></div><br>  Guarde el archivo vuex-state-pass.html y √°bralo en un navegador.  Ahora, cuando se presiona el bot√≥n, el contador deber√≠a aumentar en 10, y no en 1. Si algo sali√≥ mal, verifique la consola del navegador y aseg√∫rese de que no haya errores tipogr√°ficos. <br><br><h3>  10.3  Captadores y acciones </h3><br>  En el ejemplo anterior, accedimos a la tienda directamente desde las propiedades calculadas.  Pero, ¬øy si tuvi√©ramos varios componentes que necesitaran el mismo acceso?  Supongamos que queremos mostrar un mensaje de bienvenida en may√∫sculas.  En este caso, los captadores nos ayudar√°n. <br><br>  Getters son parte de Vuex.  Le permiten implementar el acceso unificado al estado en todos los componentes.  Tomemos un ejemplo de la secci√≥n 10.2 y en lugar de acceso directo al almacenamiento a trav√©s de propiedades calculadas, usamos getters.  Adem√°s, hacemos que el captador de la propiedad msg traduzca todas sus letras a may√∫sculas. <br><br>  Copie el contenido del archivo vuex-state-pass.html en vuex-state-getter-action.html.  Para simplificar la tarea, deje el c√≥digo HTML sin cambios.  Al final, deber√≠as obtener algo similar a la fig.  10.4 <br><br><img src="https://habrastorage.org/webt/sw/po/np/swponphqaqcwiinwh-5b-gai7b0.png" align="left" alt="imagen">  Como puede ver, el mensaje de Hello World ahora se muestra en palabras.  Al presionar el bot√≥n Press Me, el contador se incrementa de la misma manera que en el ejemplo anterior. <br><br>  Localice la construcci√≥n Vuex.Store dentro del nuevo archivo vuex-state-getter-action.html inmediatamente debajo de la etiqueta <img src="https://habrastorage.org/webt/ux/wq/hg/uxwqhgjw_hle7zwwssn_a6kylcw.png" alt="imagen">  Agregue un nuevo objeto despu√©s de mutaciones llamadas getters.  Cree los m√©todos msg y count dentro de este objeto, como se muestra en el Listado 10.5.  Ambos m√©todos aceptan el mismo argumento de estado. <br><br>  El captador msg devolver√° state.msg.toUppercase ().  Gracias a esto, el mensaje siempre se muestra en may√∫sculas.  En get getter, devolveremos state.count.  Despu√©s de agregar getters debajo de las mutaciones, el archivo vuex-state-getter-action.html deber√≠a verse as√≠. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lh/17/hg/lh17hghhfqmvinzfxxyvd6kfw10.png" alt="imagen"></div><br>  Las acciones son otra parte integral de Vuex.  Mencion√© anteriormente que las mutaciones deben ser sincr√≥nicas.  Pero, ¬øqu√© pasa si trabajamos con c√≥digo asincr√≥nico?  ¬øC√≥mo hacer llamadas as√≠ncronas capaces de cambiar de estado?  Las acciones de Vuex nos ayudar√°n con esto. <br>  Imagine que la aplicaci√≥n est√° accediendo al servidor y esperando una respuesta.  Este es un ejemplo de una acci√≥n asincr√≥nica.  Desafortunadamente, las mutaciones son as√≠ncronas, por lo que no podemos usarlas aqu√≠.  En su lugar, agregue una operaci√≥n asincr√≥nica basada en la acci√≥n Vuex. <br><br>  Para crear un retraso, use la funci√≥n setTimeout.  Abra el archivo vuex-state-getter-action.html y agregue el objeto de acciones inmediatamente despu√©s de los captadores.  Dentro de este objeto, coloque la acci√≥n de incremento, que toma los argumentos de contexto y carga √∫til.  Usando el contexto, guardaremos los cambios.  Coloque la operaci√≥n context.commit dentro de setTimeout.  De esta forma simulamos un retraso en el servidor.  Tambi√©n podemos pasar el argumento de la carga √∫til a context.commit, que luego entra en la mutaci√≥n.  Actualice el c√≥digo basado en el Listado 10.6. <br><br>  Despu√©s de actualizar Vuex.Store, puede proceder a la instancia ra√≠z de Vue.js.  La propiedad calculada no acceder√° a la tienda directamente, como antes, sino a trav√©s de getters.  Tambi√©n estamos modificando el m√©todo de incremento.  Para acceder a la nueva propiedad Vuex que creamos anteriormente, utilizar√° la llamada store.dispatch ('incremento', 10). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ow/na/tk/ownatktwrqjz5jnedkigjoqbqdg.png" alt="imagen"></div><br>  El primer argumento para la llamada de despacho es el nombre de la acci√≥n, y el segundo argumento siempre contiene datos adicionales que se pasan a esta acci√≥n. <br><blockquote>  CONSEJO <br><br>  Los datos adicionales pueden ser una variable regular o incluso un objeto. <br>  Actualice la instancia de Vue.js en el archivo vuex-state-getter-action.html como se muestra en el Listado 10.7. </blockquote><img src="https://habrastorage.org/webt/9r/m1/b1/9rm1b1-hossqa_axypdxhp47v7q.png" alt="imagen"><br><br>  Descargue la aplicaci√≥n y presione el bot√≥n varias veces.  Deber√≠a notar un retraso, pero el contador aumentar√° en 10 despu√©s de cada presi√≥n. <br><br><h3>  10.4  Usando Vuex en un proyecto de tienda de mascotas usando Vue-CLI </h3><br>  Volvamos al proyecto de la tienda de mascotas en el que est√°bamos trabajando.  Si no lo ha olvidado, decidimos agregar animaciones y transiciones.  Ahora integramos la biblioteca Vuex que conocimos anteriormente. <br><br>  Transferimos los datos de las mercanc√≠as al almac√©n.  Como recordar√° de los cap√≠tulos anteriores, los datos se inicializaron en el enlace creado dentro del componente Principal.  Ahora este enlace deber√≠a generar un nuevo evento que inicialice el repositorio de Vuex.  Tambi√©n agregaremos los productos de propiedad calculados, que recupera productos utilizando el captador (lo crearemos m√°s adelante).  El resultado final se ver√° como en la Fig.  10.5 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-s/6q/nf/-s6qnfzox3qmsvozrfvla8liuqe.png" alt="imagen"></div><br><h3>  10.4.1.  Instale Vuex con Vue-CLI </h3><br>  Primero, instale Vuex!  Este es un proceso simple.  Prepare la √∫ltima versi√≥n de la tienda de mascotas en la que trabajamos en el cap√≠tulo 8. Tambi√©n puede descargar todo el c√≥digo para este cap√≠tulo en GitHub en github.com/ErikCH/VuejsInActionCode. <br><br>  Abra una ventana de terminal y vaya al directorio ra√≠z del proyecto.  Para instalar la √∫ltima versi√≥n de Vuex, ejecute el siguiente comando: <br><br><pre><code class="plaintext hljs">$ npm install vuex</code> </pre> <br>  y guarde el registro al respecto en el archivo package.json de la tienda de mascotas. <br><br>  Ahora debe agregar el almacenamiento al archivo main.js, que se encuentra en la carpeta src.  El repositorio en s√≠ a√∫n no existe, pero lo importamos de todos modos.  Por lo general, est√° en el archivo src / store / store.js, pero puede elegir una ruta diferente: todos los desarrolladores tienen sus propias preferencias.  Deteng√°monos en la opci√≥n generalmente aceptada.  M√°s adelante en este cap√≠tulo discutiremos una estructura de directorio alternativa usando m√≥dulos. <br><br>  Debe agregar almacenamiento a la instancia ra√≠z de Vue.js debajo del enrutador, como se muestra en el Listado 10.8.  Por cierto, utilizamos el est√°ndar ES6, por lo que store: store se puede acortar para almacenar. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/du/gj/ns/dugjnsblenm_dydxirxudmpqbbk.png" alt="imagen"></div><br>  Despu√©s de conectar el almacenamiento a la instancia ra√≠z, podemos acceder a √©l desde cualquier parte de la aplicaci√≥n.  Cree el archivo src / store / store.js.  En √©l colocaremos el repositorio de Vuex con informaci√≥n sobre los productos que ofrece la tienda de mascotas.  En la parte superior, agregue dos declaraciones de importaci√≥n, una para Vue y Vuex.  Luego especifique Vue.use (Vuex) para poner todo junto. <br><br>  Importamos el repositorio en el archivo main.js desde ./store/store.  Ahora necesita exportar el objeto de la tienda dentro de store.js.  Como puede ver en el Listado 10.9, exportamos un valor de tienda constante igual a Vuex.Store. <br><br>  Primero, agregue objetos con estado y mutaciones.  El estado contendr√° un objeto vac√≠o llamado productos.  Pronto lo llenaremos con el m√©todo initStore.  La mutaci√≥n se llama SET_STORE, asignar√° los bienes transferidos a la propiedad state.products.  Pegue el c√≥digo de la siguiente lista en el archivo src / store / store.js que acabamos de crear. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rq/2a/hi/rq2ahigjzyp0u3khuvvkrerrqxk.png" alt="imagen"></div><br>  Necesitamos crear una acci√≥n y captador en el repositorio.  Un getter devolver√° un objeto de productos.  La acci√≥n es un poco m√°s complicada.  Debe transferir el enlace creado, que lee el archivo static / products.json usando Axios, al objeto de acciones dentro de Vuex. <br><br>  Mencion√© anteriormente que las mutaciones deben ser sincr√≥nicas y que solo las acciones dentro de Vuex pueden aceptar c√≥digo asincr√≥nico.  Para evitar esta limitaci√≥n, coloque el c√≥digo Axios en la acci√≥n Vuex. <br><br>  Cree un objeto de acciones en el archivo store.js y agregue el m√©todo initStore.  Copie el contenido del enlace creado del componente / archivo Main.vue en este m√©todo.  En lugar de asignar respuesta.datos.productos al objeto de productos, invocamos la mutaci√≥n utilizando la funci√≥n de confirmaci√≥n.  Pase response.data.products como argumento a SET_STORE.  El c√≥digo resultante deber√≠a tener este aspecto (Listado 10.10). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nj/cp/od/njcpodi_wkiwlkhc5o_0du-1udu.png" alt="imagen"></div><br>  Ya casi hemos terminado, solo tenemos que actualizar el archivo Main.vue y transferir los productos del objeto de productos locales al repositorio de Vuex.  Abra el archivo src / components / Main.vue y busque la funci√≥n de datos.  Elimine la l√≠nea de productos: {}.  Accederemos a los productos desde la propiedad calculada que devuelve la tienda. <br><br>  Encuentre las propiedades calculadas cartItemCount y sortedProducts dentro de Main.vue, deben ir justo despu√©s de la secci√≥n de m√©todos.  Agregue la propiedad de productos y haga que devuelva el captador del mismo nombre. <br><br>  Conectamos el repositorio a la instancia ra√≠z de Vue.js en el archivo main.js, por lo que ya no necesitamos importarlo.  Adem√°s, cuando se utiliza Vue-CLI, el almacenamiento siempre est√° disponible en forma de esto. $ Store.  No olvide el signo $, de lo contrario, se producir√° un error.  Agregue la propiedad de productos calculados, como se muestra en el Listado 10.11. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/1f/nj/ry/1fnjry2y8uanpzheonuljtcbzvi.png" alt="imagen"></div><br>  Busque el enlace creado en el que se inicializa el objeto de productos y elimine su contenido.  En su lugar, inserte la llamada de acci√≥n initStore que creamos anteriormente en el repositorio de Vuex.  Para llamar a una acci√≥n, use la funci√≥n de despacho, como en el ejemplo anterior.  El listado 10.12 muestra c√≥mo deber√≠a verse el enlace creado despu√©s de actualizar el archivo Main.vue. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vn/1b/40/vn1b40pqnqauvsjz-jsh7amutty.png" alt="imagen"></div><br>  Eso deber√≠a ser suficiente.  Ejecute el comando npm run dev en la terminal y aparecer√° una ventana con la aplicaci√≥n de la tienda de mascotas en la pantalla.  Intente poner los productos en la canasta y aseg√∫rese de que todo funcione como deber√≠a.  Si algo sali√≥ mal, busque errores en la consola.  En el archivo src / store / store.js, en lugar de Vuex.store, puede escribir accidentalmente Vuex.Store.  Recuerda esto! <br><br><h3>  10.5  M√©todos de ayuda Vuex </h3><br>  Vuex proporciona m√©todos auxiliares convenientes que hacen que el c√≥digo sea m√°s conciso y eliminan la adici√≥n de los mismos captadores, establecedores, mutaciones y acciones.  Para obtener una lista completa de los m√©todos de ayuda de Vuex, consulte la gu√≠a oficial en vuex.vuejs.org/guide/core-concepts.html.  Veamos c√≥mo funcionan. <br><br>  El m√©todo de ayuda principal que debe conocer se llama mapGetters.  Se utiliza para agregar todos los captadores disponibles a la secci√≥n calculada y no requiere enumerar cada uno de ellos.  Pero antes de usarlo, debe importarlo dentro del componente.  Una vez m√°s, regrese a la tienda de mascotas y agregue el m√©todo mapGetters. <br><br>  Abra el archivo src / components / Main.vue y busque la etiqueta del script.  En alg√∫n lugar dentro de esta etiqueta, se debe importar el componente Encabezado.  Conecte mapGetters inmediatamente despu√©s de esta importaci√≥n, como se muestra en el Listado 10.13. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/df/1a/oy/df1aoyonrmhjh26zev5aehqhtec.png" alt="imagen"></div><br>  Ahora necesita actualizar la propiedad calculada.  Encuentre la funci√≥n de productos en la secci√≥n calculada e inserte el objeto mapGetters en su lugar. <br><br>  mapGetters es un objeto √∫nico, para su correcto funcionamiento es necesario utilizar el operador de propagaci√≥n de ES6; expande la expresi√≥n en una situaci√≥n en la que se esperan argumentos (cero o m√°s).  Puede leer m√°s sobre esta sintaxis en la documentaci√≥n de MDN en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Spread_syntax</a> . <br><br>  mapGetters se asegurar√° de que todos los captadores se agreguen como propiedades calculadas.  Esta es una forma mucho m√°s simple y elegante que escribir una propiedad computada separada para cada captador.  Todos los captadores se enumeran en la matriz mapGetters.  Agregue este m√©todo auxiliar al archivo Main.vue (Listado 10.14). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/w8/uc/4r/w8uc4rzccr0ygnfvoooi_7j8mda.png" alt="imagen"></div><br>  Despu√©s de ejecutar el comando npm run dev, la tienda de mascotas deber√≠a funcionar como antes.  El m√©todo de ayuda mapGetters no parece muy √∫til hasta ahora, pero cuantos m√°s captadores agreguemos, m√°s tiempo ahorrar√°. <br><br>  Hay tres m√©todos auxiliares m√°s que debe conocer: mapState, mapMutations y mapActions.  Todos funcionan de manera similar, reduciendo la cantidad de c√≥digo repetitivo que debe escribir manualmente. <br><br>  Imagine que su repositorio contiene varios datos y el acceso al estado se realiza directamente desde el componente, sin utilizar ning√∫n captador.  En este caso, puede usar el m√©todo mapState dentro de la secci√≥n calculada (Listado 10.15). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/09/yf/2w/09yf2w3fnle9nujbxlsqsdku3g4.png" alt="imagen"></div><br>  Ahora imagine que necesita usar varias mutaciones en un componente.  Para simplificar este proceso, use el m√©todo auxiliar mapMutations (Listado 10.16), como se hace con mapState y mapGetters.  Siguiente mut1 vincula this.mut1 () a esto. $ Store.commit ('mut1'). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6h/7y/py/6h7ypy5x0dsc400qmndzolgzr-m.png" alt="imagen"></div><br>  Finalmente, considere el m√©todo auxiliar mapActions.  Le permite agregar acciones Vuex a la aplicaci√≥n, eliminando la necesidad de crear m√©todos con llamadas de despacho en cada caso.  Volviendo al ejemplo anterior, imagine que la aplicaci√≥n contiene algunas operaciones asincr√≥nicas.  Dado que se excluye el uso de mutaciones, debemos recurrir a la acci√≥n.  Despu√©s de crearlos en Vuex, debe acceder a ellos en el objeto de m√©todos del componente.  Este problema se puede resolver usando mapActions.  act1 vincular√° this.act1 () a esto. $ store.dispatch ('act1'), como se muestra en el Listado 10.17. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6b/lf/e2/6blfe2nzmh7iotgvmia9d8nksto.png" alt="imagen"></div><br>  Finalmente, considere el m√©todo auxiliar mapActions.  Le permite agregar acciones Vuex a la aplicaci√≥n, eliminando la necesidad de crear m√©todos con llamadas de despacho en cada caso.  Volviendo al ejemplo anterior, imagine que la aplicaci√≥n contiene algunas operaciones asincr√≥nicas.  Dado que se excluye el uso de mutaciones, debemos recurrir a la acci√≥n.  Despu√©s de crearlos en Vuex, debe acceder a ellos en el objeto de m√©todos del componente.  Este problema se puede resolver usando mapActions.  act1 vincular√° this.act1 () a esto. $ store.dispatch ('act1'), como se muestra en el Listado 10.17. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ov/5m/jm/ov5mjmyoyymzvr09mtyibqsrhmk.png" alt="imagen"></div><br>  A medida que la aplicaci√≥n crezca, estos m√©todos auxiliares ser√°n cada vez m√°s √∫tiles, reduciendo la cantidad de c√≥digo que debe escribirse.  Tenga en cuenta que debe pensar en los nombres de propiedad en su repositorio, ya que los m√©todos auxiliares le permiten acceder a ellos en componentes. <br><br><h3>  10.6  Breve introducci√≥n a los m√≥dulos </h3><br>  Al comienzo de este cap√≠tulo, creamos el archivo store.js en el directorio src / store.  Para un proyecto peque√±o, este enfoque es bastante apropiado.  Pero, ¬øqu√© pasa si estamos tratando con una aplicaci√≥n mucho m√°s grande?  El archivo store.js crecer√° r√°pidamente y ser√° dif√≠cil hacer un seguimiento de todo lo que sucede en √©l. <br>  Para resolver este problema, Vuex ofrece el concepto de m√≥dulos.  Los m√≥dulos le permiten dividir el almacenamiento en varias partes m√°s peque√±as.  Cada m√≥dulo tiene sus propios estados, mutaciones, acciones y captadores, incluso puede anidarlos entre s√≠. <br><br>  Reescribimos la tienda de mascotas usando m√≥dulos.  El archivo store.js permanecer√° en su lugar, pero al lado debe crear la carpeta de m√≥dulos y colocar el archivo products.js all√≠.  La estructura del directorio debe verse como la de la fig.  10.6 <br><br><img src="https://habrastorage.org/webt/-a/xi/tt/-axittmozbvjtdxsblaraowkbdy.png" align="left" alt="imagen">  Dentro de products.js, debe crear cuatro objetos: estado, captadores, acciones y mutaciones.  El contenido de cada uno de ellos debe copiarse del archivo store.js. <br><br>  Abra el archivo src / store / store.js y comience a copiar el c√≥digo de √©l.  Cuando termine, el archivo products.js deber√≠a verse as√≠ (Listado 10.18). <br><br>  Ahora necesitamos exportar todo el c√≥digo que agregamos al archivo product.js.  Esto lo importar√° a store.js.  En la parte inferior del archivo, agregue la expresi√≥n exportaci√≥n predeterminada.  Esta es una instrucci√≥n de exportaci√≥n en formato ES6 que le permite importar este c√≥digo desde otros archivos (Listado 10.19). <br><br>  El archivo store.js debe actualizarse.  Agregue un objeto de m√≥dulos, dentro del cual puede enumerar todos los m√≥dulos nuevos.  Recuerde importar el archivo de m√≥dulos / productos que creamos anteriormente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qn/t1/mo/qnt1moalahiofswpasrzsw7dsec.png" alt="imagen"></div><br>  Nuestro ejemplo contiene solo un m√≥dulo, as√≠ que agr√©guelo inmediatamente al objeto de m√≥dulos.  Tambi√©n debe eliminar todo lo innecesario de Vuex.Store, como se muestra en el Listado 10.20. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wf/f0/0u/wff00uliblovkw3hhwsr4xfsxni.png" alt="imagen"></div><br>  Al importar los m√≥dulos, completamos el proceso de refactorizaci√≥n.  Despu√©s de actualizar la p√°gina, la aplicaci√≥n deber√≠a funcionar exactamente como antes. <br><blockquote>  Espacios de nombres en Vuex <br><br>  En algunos proyectos grandes, la modularizaci√≥n puede causar ciertos problemas.  A medida que se agregan nuevos m√≥dulos, pueden surgir conflictos con los nombres de acciones, captadores, mutaciones y propiedades de estado.  Por ejemplo, puede asignar accidentalmente el mismo nombre a dos captadores en diferentes archivos.  Y, dado que todo est√° en un espacio de nombres global global en Vuex, se producir√° un error de clave duplicada en la consola. <br>  Para evitar este problema, coloque cada m√≥dulo en un espacio de nombres separado.  Para hacer esto, solo especifique namespaced: true en la parte superior de Vuex.store.  Lea m√°s sobre esta caracter√≠stica en la documentaci√≥n oficial de Vuex en vuex.vuejs.org/en/guide/modules.html. </blockquote>  ¬ªSe puede encontrar m√°s informaci√≥n sobre el libro en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el sitio web del editor</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Contenidos</a> <br>  ¬ª <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Extracto</a> <br><br>  <b>Cup√≥n de</b> 25% de descuento para <b>vendedores ambulantes</b> - <b>Vue.js</b> <br><br>  Tras el pago de la versi√≥n en papel del libro, se env√≠a una versi√≥n electr√≥nica del libro por correo electr√≥nico. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/448304/">https://habr.com/ru/post/448304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../448294/index.html">La ley sobre el aislamiento de los Runet es adoptada por la Duma del Estado en tres lecturas.</a></li>
<li><a href="../448296/index.html">Freelance y finanzas: 5 formas de llegar a un acuerdo entre un cliente y un profesional independiente</a></li>
<li><a href="../448298/index.html">GLTF y GLB Conceptos b√°sicos, Parte 2</a></li>
<li><a href="../448300/index.html">Conferencia mailto: CLOUD - sobre nubes y alrededor</a></li>
<li><a href="../448302/index.html">La vulnerabilidad en los filtros AdBlock y uBlock permite ejecutar c√≥digo arbitrario en el lado del usuario</a></li>
<li><a href="../448308/index.html">Data Science Digest (abril de 2019)</a></li>
<li><a href="../448310/index.html">Escribir un bot de telegramas en python usando la biblioteca telebot parte 1</a></li>
<li><a href="../448316/index.html">Determinaci√≥n de la raza de un perro: un ciclo de desarrollo completo, desde una red neuronal en Python hasta una aplicaci√≥n en Google Play</a></li>
<li><a href="../448320/index.html">¬øPor qu√© silicio y por qu√© CMOS?</a></li>
<li><a href="../448322/index.html">C ++ Rusia 2019: transmisi√≥n gratuita de la primera sala y un poco sobre lo que ser√° en la conferencia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>