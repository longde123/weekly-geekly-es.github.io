<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚤 ✉️ 🧕🏽 Plateformes de test mobiles dans le cloud 🐷 🚖 🌏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Et maintenant, le moment est venu où nos besoins en matière de tests sont devenus trop nombreux sur le bureau du testeur. L'âme a demandé aux nuages. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Plateformes de test mobiles dans le cloud</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464433/"><p>  Et maintenant, le moment est venu où nos besoins en matière de tests sont devenus trop nombreux sur le bureau du testeur.  L'âme a demandé aux nuages.  Pas vraiment.  Pas vraiment. </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2o/7s/ww/2o7swwlml3ipcdpgc8qzmkyfdja.jpeg"></div><a name="habracut"></a><br><h1>  Nos buts et objectifs </h1><br><p>  <i>(lecteur pressé, vous pouvez passer à la section suivante)</i> </p><br><p>  Nous développons une application financière pour le marché étranger, disponible en différents formats: pour les navigateurs de bureau (site Web et extension pour Google Chrome), pour les navigateurs mobiles, ainsi qu'une application hybride pour les téléphones.  En raison des spécificités de l'application, nous accordons une attention particulière au test de l'application sur différentes configurations et différents appareils.  Pour nous, le fonctionnement stable et sûr de l'application est important à la fois sur les navigateurs de bureau de nos clients et sur tous leurs appareils. </p><br><p>  La raison pour laquelle nous avons trouvé une batterie de périphériques basée sur le cloud pour les tests pour nous était un changement dans le format de travail du bureau à complètement distant et distribué (entre les villes et les pays).  Autrement dit, si auparavant, pour les tests, nous pouvions assembler différents appareils dans un groupe (littéralement) et tester manuellement le prochain assemblage dans une même table en même temps, maintenant il est devenu impossible de le faire.  De plus, avec la croissance des fonctionnalités, afin de réduire le travail manuel, nous automatisons les jeux de régression des tests importants, ce qui signifie qu'après l'assemblage, nous devons être en mesure d'appeler des tests sur la configuration et le périphérique souhaités, et il est préférable de le faire dès que l'assemblage passe à la mise en scène. </p><br><p>  Dans ce cas, la solution la plus simple et la plus évidente consiste à utiliser des émulateurs pour Android et des simulateurs pour les appareils iOS dans notre pipeline DevOps.  Cependant, qui est relativement facile à implémenter sur l'ordinateur de travail du développeur, il devient une tâche difficile et coûteuse à utiliser dans le cloud.  Pour que le même émulateur Android fonctionne rapidement, un serveur x86 avec prise en charge HAXVM est requis, et pour un simulateur iOS, seul un appareil MacOS avec xcode est requis.  Mais, malheureusement, même après avoir résolu ce problème, la question demeure avec l'écart entre le comportement du logiciel sur les émulateurs et les vrais appareils.  Par exemple, à chaque seconde, nous détectons d'étranges bugs sur les appareils Samsung qui ne peuvent pas être lus sur les émulateurs.  Eh bien, et, bien sûr, de rares «délices» exotiques «chinois» avec des bogues uniques et que j'aimerais aussi attraper au stade du développement. </p><br><p>  En conséquence, nous avons compris la nécessité d'utiliser une batterie de terminaux mobiles pour le cloud, sur laquelle nous pourrions exécuter rapidement nos tests et, si nécessaire, déboguer manuellement.  Et auquel toute notre équipe aurait accès depuis n'importe où dans le monde (nous aimons travailler même en voyage). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/mv/-3/tkmv-3efjgaskkz1tbveeo0rh-4.jpeg"></div><br><p>  Nos tests sont écrits en Python 3.7 (ce sera important plus tard), comme la pile que nous utilisons tox + pytest + Selenium + Appium, eh bien, un petit ensemble de bibliothèques python utiles.  Nous allons certainement tester des machines sous Windows et MacOS avec les navigateurs Edge, Firefox, Chrome, Safari, ainsi que les appareils Android et iOS avec des navigateurs et une application.  Nous n'avons pas beaucoup de tests pour chaque appareil (moins d'un millier), mais lors d'un test dans un seul thread sur les appareils, un ensemble complet prend quelques heures.  Par conséquent, le critère de choix d'un service pour nous sera: </p><br><ul><li>  Test API (Sélénium / Appium) </li><li>  IOS, appareils Android </li><li>  Prend en charge les tests de navigateur mobile </li><li>  Prise en charge du téléchargement et du test des applications </li><li>  Appareil de référence (GooglePixel (Android 9) et iPhone X (iOS 12+)) </li><li>  Débogage manuel </li><li>  Journalisation (plus captures d'écran, enregistrement d'une séquence vidéo) </li><li>  Parc d'appareils et disponibilité </li><li>  Délai moyen de test </li><li>  Prix </li></ul><br><p>  Souhaitable, mais pas nécessaire: </p><br><ul><li>  Prise en charge de Python au niveau du service (quoi que cela signifie) </li><li>  Prise en charge des appareils de bureau \ navigateurs </li></ul><br><h1>  Résultats des études de marché </h1><br><p>  Pendant une semaine, j'ai surfé sur Internet et essayé une douzaine de services différents.  La plupart d'entre eux offrent du temps libre pour tester les opportunités.  Les résultats de mes recherches, plus les conclusions sont subjectives.  Votre opinion et vos résultats peuvent différer des miens. </p><br><p>  Sur Habré, j'ai trouvé <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">un article pour 2017</a> consacré au même sujet, mais depuis, de nouveaux services sont apparus, et notre tâche est un peu plus stricte.  Ainsi, par exemple, les services «savoureux» comme Samsung Remote Test Lab, Firebase Test Lab, Xamarin Test Cloud, hélas, ne nous conviennent pas. </p><br><h2>  Hors du jeu </h2><br><h3>  Samsung Remote Test Lab </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/jg/ky/hdjgkycr6wiajxi8ucwp6spgasa.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Le service offre la possibilité gratuitement d'essayer de travailler avec divers appareils Samsung, y compris les plus récents, y compris les téléviseurs ou les montres intelligentes sur Tizen (la limitation est d'un maximum de 10 heures par jour, par jour, le service donne 10 crédits gratuitement, ce qui équivaut à 2,5 heures par jour , la session minimale est d'une demi-heure (2 crédits)).  C'est très bon pour le débogage et pour trouver les causes profondes des erreurs sur certains appareils, le service permet même d'accéder au débogage à distance (pont de débogage à distance, accès à la console et aux journaux système), mais, malheureusement, le service ne fournit pas d'accès API aux appareils.  La seule façon d '«automatiser» consiste à enregistrer les actions des utilisateurs, puis à les lire dans votre outil d'automatisation local. </p><br><h3>  Laboratoire de test Firebase </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/4r/t0/ix4rt0ohclapstllgnbyl5726qm.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Un service de Google vous permet de tester votre application sur des appareils fonctionnant sous Android et iOS gratuitement (pas tout à fait).  Mais il y a une mise en garde - le service nécessite l'utilisation soit d'outils d'automatisation natifs (UIAtomator2 et Espresso pour Android et XCTest pour iOS), soit d'utiliser des araignées automatiques (robot) pour Android - Robo Test et Game Loop Test.  Autrement dit, utiliser UIAutomator et Selenium hélas, ne fonctionnera pas.  Quant à la gratuité - le package gratuit est limité à 10 tests sur des émulateurs et cinq sur des appareils réels par jour.  Si vous en avez besoin de plus, vous devrez payer pour chaque heure supplémentaire 1 $ et 5 $ respectivement.  En général, pour nos tâches, ce serait un bon choix si nous écrivions des tests à partir de zéro, mais je ne veux pas vraiment traiter plusieurs centaines de tests - c'est tout simplement cher.  Et il s'avère que nous devrons diverger considérablement dans les tests entre les versions de bureau et les mobiles, ce qui compliquerait considérablement le support. </p><br><h3>  Centre d'applications Visual Studio </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/_o/pr/3g_oprmudubtaulwkgqjahqot74.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Ancien nuage de test Xamarin.  Ce service prend enfin en charge Appium et permet de tester sur des milliers d'appareils différents.  Mais, comme dans le cas d'autres produits Microsoft, il est fermement cloué sur la pile native, ce qui signifie que pour utiliser ce service, vous aurez besoin à la fois de la présence de VisualStudio et de la nécessité d'écrire le projet et les tests exclusivement en Java.  Mais si vous avez soudainement une pile Java (avec MS VS), le prix est de 99 $ par emplacement d'appareil par mois, ce qui est relativement libéral. </p><br><h2>  Services au choix </h2><br><h3>  Batterie de périphériques AWS </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/pb/r9/znpbr9hu4dkgiqjcwoudrviaid8.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Peut-être la batterie de serveurs la plus puissante pour les tests sur des appareils virtuels et réels aujourd'hui (plus de 2500 appareils).  Pour nous, c'était un service prioritaire, car nos services viennent d'être déployés dans le cloud AWS, en plus, les prix par minute de l'appareil à partir de 17 cents.  AWS vous permet de travailler avec des frameworks natifs ainsi qu'avec Appium, Calabash et d'autres frameworks de test automatisés.  En plus des tests automatisés, le service offre la possibilité de déboguer manuellement.  Eh bien, 1000 minutes «d'essayer» sont très tentantes.  Cependant, le diable, comme d'habitude, est dans les détails.  En termes de tests, AWS a plusieurs fonctionnalités. </p><br><p>  Comme je l'ai déjà mentionné, nous utilisons Python 3.7, mais AWS Device Farm fonctionne toujours avec Python 2.7.6 (voir le manuel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  Et hors de la boîte ne sait rien de tox.  Pour nous, cela signifie l'absence d'un certain nombre de capacités et la nécessité de traiter une partie des tests pour assurer la compatibilité descendante, ainsi que la création d'un environnement contournant tox.  De plus, un mécanisme assez étrange pour télécharger un package de test (archive) implique également le téléchargement de l'application pour le test.  Dans notre cas, si nous testons notre service via un navigateur mobile, le téléchargement de l'application est une étape supplémentaire.  Cependant, vous pouvez remplacer l'application par un "stub", et créer un venv avec Python 3.7 dans l'environnement Python 2.7, puis créer un environnement contenant tox, ce qui ... </p><br><div style="text-align:center;"><img src="https://i.gifer.com/embedded/download/S5u.gif"></div><br><p>  Amazon ne serait pas Amazon si tout reposait sur d'anciennes versions.  Comme alternative (et aucun service n'aura une telle opportunité ci-dessous), AWS suggère d'utiliser AWS Device Farm via l'AWS CLI (interface de ligne de commande) (voir le manuel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ).  Autrement dit, nous pouvons connecter l'appareil du cloud en tant que véritable appareil à notre ordinateur en mode de débogage à distance, cependant, après avoir remplacé adb par le correctif (il n'y a pas de binaire pour linux dans la liste des binaires, mais je suis sûr qu'il existe dans la nature).  Autrement dit, lors de la configuration de l'AWS CLI, pour les tests, nous devrons exécuter seulement quelques commandes (car nous n'allons pas utiliser l'interface graphique comme une application AWS Device Farm). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/ln/tv/kalntvkkefpkcemawikixglisfq.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> boto3 <span class="hljs-comment"><span class="hljs-comment">#  AWS SDK https://pypi.org/project/boto3/ aws_client = boto3.client('devicefarm') response = aws_client.list_devices() #     device_arn = '' for phone in response["devices"]: if phone['name'] == "Google Pixel XL": #      (  ) device_arn = phone['arn'] #   Amazon Resource Name break project_arn = aws_client.list_projects()['projects'][0]['arn'] #        #      ,    SSH    response = aws_client.create_remote_access_session(projectArn=project_arn, deviceArn=device_arn, remoteDebugEnabled=True, ssh-public-key=SSH_KEY) #     adb devices     uuid Google Pixel XL  AWS Device Farm,   iOS #     ... RUN_TESTS() ... #    ( )    aws_client.stop-remote-access-session(arn=response['remoteAccessSession']['arn']) aws_client.delete_remote_access_session(arn=response['remoteAccessSession']['arn'])</span></span></code> </pre> </div></div><br><p>  Si nous voulons tester l'application, elle peut également être téléchargée via le SDK AWS. </p><br><p>  Mais je n'ai pas dit une nuance clé ici.  Nous tombons à nouveau sur le diable en détail.  Le fait est que l'option de débogage distant n'est disponible que si nous utilisons le plan Périphériques privés pour AWS.  Premièrement, cette fonctionnalité est disponible uniquement sur demande (vous devez écrire une lettre à Amazon), deuxièmement, l'option est disponible pour la région us-west-2, et troisièmement, en fait, cette option nous renvoie au scénario lorsque nous avons un serveur pour test avec un ensemble (ou au moins un) d'appareils connectés.  Les avantages sont évidents - nous pouvons utiliser cet appareil exclusivement, ce qui est évidemment plus sûr et plus rapide, d'autre part, nous perdons le principal avantage - le choix et la variété des appareils. </p><br><p>  J'ai aimé le service dans son ensemble, mais pour notre équipe, hélas, il contient trop de «mais». </p><br><h3>  Bitbar </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5a/gg/lp/5agglpijttxv29qnnlrgr12ksgu.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Cette ferme mobile basée sur le cloud est la première à tomber sur les moteurs de recherche.  Et pas en vain.  Pour l'avenir, je dirai que ce service propose le meilleur choix d'appareils (uniquement des appareils réels) et les meilleures performances en termes d'un test par rapport aux autres.  Bitbar propose des services de test manuel et automatisé à distance (à l'aide d'Appium et d'autres frameworks) et, si vous le souhaitez, vous permet également d'utiliser quelque chose de similaire au robot du Firebase Test Lab (Robot Test) - AI TestBot.  Le principal avantage de BitBar est un nombre illimité de threads de test (c'est-à-dire que vous pouvez immédiatement tester votre application sur des centaines d'appareils) en sélectionnant à l'avance le pool d'appareils requis.  Si le périphérique est occupé, un autre sera sélectionné de la même manière ou la session sera mise en file d'attente.  À la fin du test, un journal est généré, un enregistrement de test, les résultats sont enregistrés et la notification est envoyée par courrier.  Bien qu'il existe des possibilités de configurer l'interaction avec différents outils CI / CD.  Le service offre également la possibilité de tester les navigateurs de bureau dans différentes résolutions et, si vous le souhaitez, de créer, comme dans AWS, vos appareils privés.  Certes, vous devez payer pour toutes ces puces - chaque minute de test coûtera 0,29 $. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oq/te/_v/oqte_v0jovfktqprbfpjzyt6kbw.jpeg"></div><br><p>  Le processus d'installation est simple, comme l'interaction de deux doigts avec l'asphalte: </p><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://appium.bitbar.com/wd/hub'</span></span> desired_capabilities = { <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Motorola Google Nexus 6'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceId'</span></span>: <span class="hljs-string"><span class="hljs-string">'FA7AN1A00253'</span></span>, <span class="hljs-string"><span class="hljs-string">'newCommandTimeout'</span></span>: <span class="hljs-number"><span class="hljs-number">12000</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-comment"><span class="hljs-comment">#     Chrome,    app 'bitbar_apiKey': 'BITBAR_API_KEY', 'bitbar_project': 'Software Testing', 'bitbar_testrun': 'Test run #N', 'bitbar_device': 'Motorola Google Nexus 6', 'bitbar_app': '23425235' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """</span></span></code> </pre></div></div><br><h3>  Kobiton </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pm/jx/7z/pmjx7zlxb9om476zsp_qd24tqb0.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Un autre service qui fournit des services de test sur des appareils réels.  Le choix des appareils est plus modeste que Bitbar (350+), la disponibilité des appareils est également moindre.  En général, il est très similaire dans sa fonctionnalité de base à BitBar, il permet des tests manuels et automatiques (en utilisant Appium - ici sans choisir de frameworks).  Il n'y a aucun moyen de tester sur les navigateurs de bureau.  Le service vous permet également d'organiser les tests avec un nombre illimité de sessions et d'appareils, mais vous ne pouvez pas créer de pool d'appareils ici.  Le prix du service est très libéral - à partir de 0,10 $ par minute supplémentaire de test, mais pendant la période d'essai, j'ai attiré l'attention sur une certaine instabilité du service - Internet tombait souvent sur les appareils, une fois l'appareil suspendu.  De plus, si l'appareil est occupé ou réservé, tous vos tests en cours échoueront.  Autrement dit, contrairement à Bitbar, il n'y a pas de files d'attente de sessions.  Certes, il peut être organisé à faible coût.  Kobiton possède sa propre petite API. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0b/8n/p9/0b8np9ceky_s0e2schcgitmgi4w.jpeg"></div><br><p>  La configuration est également très simple, contrairement à la bitbar, presque l'Appium d'origine. </p><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> base64 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> <span class="hljs-comment"><span class="hljs-comment">#  base64EncodedBasicAuth = base64.b64encode(bytes(f'{USERNAME}:{API_KEY}', 'utf-8')) headers = { 'Authorization': f'Basic {base64EncodedBasicAuth}' } reply = requests.get(f'https://api.kobiton.com/v1/apps', params={ }, headers = headers) #     deviceId headers = { 'Authorization': base64EncodedBasicAuth, 'Accept': 'application/json' } reply = requests.get(f'https://api.kobiton.com/v1/devices/{deviceId}/status', params={ }, headers = headers) #   ,      while (reply['isOnline'] == False or reply['isBooked'] == True): sleep(60) #   com_executor = f'https://{USERNAME}:{API_KEY}@api.kobiton.com/wd/hub' desired_capabilities = { 'browserName': 'Chrome', # The generated session will be visible to you only. 'sessionName': 'Automation test session', 'sessionDescription': '', 'deviceOrientation': 'portrait', 'captureScreenshots': True, 'deviceGroup': 'KOBITON', # For deviceName, platformVersion Kobiton supports wildcard # character *, with 3 formats: *text, text* and *text* # If there is no *, Kobiton will match the exact text provided 'deviceName': 'Pixel 2', 'platformName': 'Android', 'platformVersion': '9' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """ #   RUN_TESTS() """ ... """ #       ,     (   ) headers = { 'Authorization': {base64EncodedBasicAuth} } requests.delete(f'https://api.kobiton.com/v1/sessions/{sessionId}/terminate', params={ }) """ ... """</span></span></code> </pre></div></div><br><h3>  Browserstack </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ug/zt/ed/ugztedawkg6ed9okmi1htaactgc.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Bon vieux BrowserStack.  Beaucoup de choses ont été écrites sur lui et beaucoup de ceux qui l'utilisent.  Oui, il permet de tester non seulement sur différents navigateurs, mais également sur différents appareils.  Tant en mode manuel qu'en utilisant Selenium / Appium.  Selon vos besoins - sur les navigateurs mobiles ou en utilisant votre application.  En termes de capacités, tout est identique aux deux services en haut, mais contrairement à eux, il y a déjà des restrictions sur le nombre de sessions simultanées.  Certes, au contraire, payez 199 $ par mois et testez pour une durée illimitée.  Il existe des plugins pour Jenkins, Travis CI, TeamCity, sa riche API, d'excellents journaux et une large sélection d'appareils et de navigateurs de bureau sur différentes configurations.  Certes, en fonction de ce que vous testez, les paramètres varient - pour tester les navigateurs (même mobiles), un concentrateur Selenium est utilisé, et pour les applications - un concentrateur Appium.  De plus, pour tester l'application, vous devrez payer séparément.  Autrement dit, pour tester à la fois les navigateurs et les applications mobiles, vous devez payer 199 $ et 159 $ de plus (le prix d'un appareil pour les tests en même temps). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/xv/zz/xixvzzad9ae94ktoao0yzkodra8.png"></div><br><div class="spoiler">  <b class="spoiler_title">Exemple de code pour l'application</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://USERNAME:API_KEY@hub-cloud.browserstack.com/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'app'</span></span>: app_name, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Exemple de code pour un navigateur mobile</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> selenium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'http://USERNAME:API_KEY@hub.browserstack.com:80/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Expérimental </h3><br><img src="https://habrastorage.org/webt/do/7d/uv/do7duvaiufyiok6muyz_zuerya4.png"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Un autre service qui offre la possibilité de tester à la fois manuellement et automatiquement les appareils mobiles et les navigateurs de bureau en utilisant Appium, Selenium et d'autres cadres.  Comme dans le cas de BrowserStack, le nombre de sessions simultanées est limité, mais les prix sont légèrement différents - pour tester les applications mobiles, le service demande 199 $ par mois, et pour les tests multi-navigateurs seulement 39 $ (pour une session simultanée).  De plus, comme Bitbar avec AWS, vous pouvez créer votre propre laboratoire privé avec des appareils qui, cependant, peuvent être mélangés avec un cloud public de milliers d'appareils, d'émulateurs et de navigateurs de différentes versions et plates-formes (MacOS, Windows), si vous le souhaitez.  Parmi les fonctionnalités intéressantes - la disponibilité des extensions pour IntelliJ et Eclipse, son propre outil Appium Studio, qui vous permet d'utiliser les fonctionnalités avancées d'appareils tels que l'interaction avec FaceID, la commande vocale, la numérisation de codes-barres, la définition de la qualité de la communication, la géolocalisation et plus encore.  Parmi les inconvénients, je peux nommer un étrange ensemble d'appareils pour la période d'essai, une tarification draconienne pour la période d'essai, ainsi que l'obligation d'utiliser le courrier d'entreprise (gmail ne fonctionnera pas). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fi/z3/wy/fiz3wy8hud0aa5zd28-86zluljg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">Exemple de code</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://Uhttps://cloud.seetest.io/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">"deviceName"</span></span>: <span class="hljs-string"><span class="hljs-string">"iPhone X"</span></span>, <span class="hljs-string"><span class="hljs-string">"accessKey"</span></span>: API_KEY, <span class="hljs-string"><span class="hljs-string">"platformName"</span></span>: <span class="hljs-string"><span class="hljs-string">"ios"</span></span>, <span class="hljs-string"><span class="hljs-string">"deviceQuery"</span></span>: <span class="hljs-string"><span class="hljs-string">"'@os='ios' and @version='12.1.3' and @category='PHONE'"</span></span>, } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3>  Saucelabs </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/vz/sy/jovzsyon88bmkdxcknin36wro8k.jpeg"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  L'un des plus anciens services de test cloud.  Près de 400 appareils réels différents, une large sélection de simulateurs et d'émulateurs, y compris des émulateurs atypiques d'appareils Samsung, il existe des navigateurs de bureau pour différents systèmes d'exploitation, y compris Linux.  Automatisation sur Appium / Selenium et frameworks natifs.  Le principal avantage du service est la présence d'une vaste collection de configurations, y compris d'anciens systèmes d'exploitation, navigateurs, appareils.  SauceLabs a également une limite sur le nombre de sessions simultanées, mais ici l'option la moins chère comprend non pas une, mais deux sessions simultanées.  Ce qui est inhabituel: les plans tarifaires sur les appareils réels et sur les émulateurs sont différents.  Ainsi, les options les moins chères, qui incluent deux sessions avec 2000 minutes de test par mois sur des émulateurs, coûteront 149 $, et sur des appareils réels déjà 349 $.  Il y a une intégration avec CI / CD, Slack. Malheureusement, je n'ai pas pu essayer SauceLabs en direct, car hélas, l'enregistrement échoue, peut-être à cause de la région, mais je ne peux pas en être sûr. </p><br><h3>  Perfecto </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/bj/h2/plbjh2r1jax9nmtdxkq08sxzfvs.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien</a> </p><br><p>  Le dernier fournisseur de tests cloud est le plus visuellement similaire à Experitest, mais sans fonctionnalité avancée.  Il existe un langage de script simple.  C'est très étrange, mais dans le service pour les tarifs non-entreprise (entreprise), il n'est pas proposé de tester sur les navigateurs de bureau, il est également impossible de surveiller l'exécution des tests en temps réel (uniquement s'il ne s'agit pas de tests manuels).  Une centaine d'appareils différents sont disponibles pour les tests.  Il y a intégration avec Jenkins, et aussi, fait intéressant, avec des outils de gestion de test comme HP ALM, IBM Rational, TFS.  Des plans tarifaires très étranges sont également disponibles, comme 5 heures de test par mois (en termes de minutes autant que 0,33 $ (c'est le service le plus cher)), bien qu'avec la possibilité d'acheter un forfait avec des heures supplémentaires, mais encore une fois, il est étrange qu'il n'y ait pas par minute ou au moins une facturation horaire après coup.  En ce qui concerne la facilité d'utilisation, pendant la période d'essai, seuls des tests manuels sont disponibles, ainsi qu'un laboratoire commun, de sorte que tous les lancements d'utilisateurs différents tombent dans un seul tas.  Il est donc impossible de juger exactement de la commodité et de la rapidité du service.  On peut voir que le service est principalement axé sur les grandes entreprises clientes, alors que, au moins selon les informations disponibles, les capacités de ce fournisseur sont les plus modestes de tous que j'ai testées. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/l_/so/4xl_so-pdliodrvlt7huphfnybe.jpeg"></div><br><br><h2>  Résumé des résultats </h2><br><p>  Selon tous les critères de sélection, les services sont très similaires, la différence entre les services dans leurs performances et leur prix (s'il n'y a pas de fonctionnalités, par exemple, comme dans le cas d'AWS).  Par conséquent, nous résumerons les données de recherche dans un tableau, examiner la vitesse des services (en tenant compte de la connexion via US VPN), ainsi que le prix, pour plus de commodité, en comparant le temps de test mensuel moyen sur les appareils (5 versions par mois, 2 heures de test sur les appareils Android et iOS = 20 heures).  Comme valeurs de référence, j'utilise les données de mon ordinateur local avec un émulateur, me connectant à nouveau pour la pureté de l'expérience via un VPN aux USA). </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m9/1k/ym/m91kymmminidgp5q_ivtq110dqs.png"></div><br><h1>  Conclusions </h1><br><p>  C'était très intéressant pour moi de rechercher et de choisir le bon service pour notre équipe.  En général, il existe des solutions pour tous les goûts et pour toutes les tâches, et les services se sont avérés très similaires en termes de caractéristiques et de mise en œuvre.  Par conséquent, selon vos tâches, je recommanderais le choix suivant: </p><br><p>  <b>Option A</b> : si la vitesse de vérification est importante pour vous et que vous devez vérifier immédiatement des dizaines d'appareils différents - votre choix est <b>Bitbar</b> . </p><br><p>  <b>Option B</b> : si vous avez la priorité sur les résultats des appareils de référence et que les tests de configuration sont secondaires (mais nécessaires) - votre choix est <b>BrowserStack</b> .  C'est juste notre cas, car statistiquement - 90% de toutes les erreurs sont des erreurs de plates-formes et d'appareils de référence (le plus souvent, les bogues sont communs à toutes les plates-formes de référence à la fois).  Les 8% restants sont des erreurs MS IE, avec le refus de la prise en charge IE - 2% d'erreurs MS Edge et 0,5% d'erreurs sur des configurations spécifiques. </p><br><p>  <b>Option B</b> : Si vous souhaitez vérifier des conditions spéciales, telles que des communications de mauvaise qualité, la géolocalisation ou Touch / FaceID, votre choix est <b>Experitest</b> . </p><br><p>  Mais à long terme, si votre entreprise occupe un grand bureau, votre travail est à temps plein, alors, en règle générale, organiser vos propres, même des mini-laboratoires avec un serveur pour émulateurs avec 2-3 appareils connectés, coûtera moins et sera plus pratique que d'utiliser des services spécialisés services. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464433/">https://habr.com/ru/post/fr464433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464415/index.html">Nouveau service d'indices pour rechercher hh.ru</a></li>
<li><a href="../fr464417/index.html">10 frameworks PHP populaires en 2019</a></li>
<li><a href="../fr464421/index.html">Radio Viber - toutes les stations de radio dans le messager en ligne</a></li>
<li><a href="../fr464423/index.html">Comment gérer le temps? Réponse du pigiste</a></li>
<li><a href="../fr464429/index.html">Les 10 erreurs les plus courantes lors de l'utilisation de la plate-forme Spring. Partie 1</a></li>
<li><a href="../fr464435/index.html">Comment ne pas se noyer dans un océan de technologies et d'approches: l'expérience de 50 experts</a></li>
<li><a href="../fr464437/index.html">Comment l'équipe de développement peut gagner plus en créant des sites de trafic [Guide d'implémentation]</a></li>
<li><a href="../fr464443/index.html">Natas Web. Passage de la plateforme CTF visant à exploiter les vulnérabilités du Web. 2e partie</a></li>
<li><a href="../fr464445/index.html">Pourquoi il est vraiment impossible d'être végétarien</a></li>
<li><a href="../fr464447/index.html">Count Scoring de la Fer ou une étude sur la notation du crédit dans le cadre de l'élargissement de ses horizons. Partie 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>