<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§Æ üë©üèø‚Äçüíª ü•• Neuer inl√§ndischer Motorsteuerungs-Mikrocontroller K1921VK01T von OJSC NIIET üöç üë©üèº‚Äçüéì üçü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Irgendwie wurde die Nachricht √ºber das Erscheinen eines neuen Mikrocontrollers K1921VK01T von OJSC NIIET weitergegeben . Wie ist es bemerkenswert? Sei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Neuer inl√§ndischer Motorsteuerungs-Mikrocontroller K1921VK01T von OJSC NIIET</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/npf_vektor/blog/389129/"><img src="https://habrastorage.org/files/a97/a7f/0cf/a97a7f0cf9454cfb9f64cdb540e00f40.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Irgendwie wurde die Nachricht √ºber das Erscheinen eines neuen Mikrocontrollers </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">K1921VK01T von OJSC NIIET</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> weitergegeben </font><font style="vertical-align: inherit;">. Wie ist es bemerkenswert? Seine Peripherieger√§te dienen zur Steuerung von Elektromotoren (Motorsteuerung). Dies sind nicht nur ein paar PWM-Kan√§le. Dies sind neun hochentwickelte Zweikanal-PWM-Module (PWM), von denen drei Module (HRPWM) mit einem Modus mit ‚Äûhoher‚Äú Aufl√∂sung sind. Dies sind sechs separate 32-Bit-CAP-Erfassungsmodule. Vierundzwanzig (!) Kan√§le mit 12-Bit-ADCs mit flexiblem Startmanager, integriertem Mittelwertbildner und digitalen Komparatoren. Zwei Quadraturdecoder (QEP), eine Reihe von Kommunikationsschnittstellen, interner Benutzerspeicher, Uhren - all dies auf dem ARM Cortex-M4F-Kern mit einem Megabyte integriertem Flash-Speicher und einer Leistung von 100 MIPS! Interessant?</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um nicht alle technischen Merkmale des Produkts im Artikel aufzulisten, sende ich es auf die Seite der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Website</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> des </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">Herstellers</font></a><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Es gibt sowohl eine kurze Liste als auch ein vollst√§ndiges Datenblatt (obwohl es sich immer in verschiedenen Ecken der Site versteckt und zum Zeitpunkt des Schreibens kann es heruntergeladen werden ... aus der Tabelle der </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aktuellen Entwicklungen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">Und in dem Artikel erz√§hle ich Ihnen besser etwas, das nicht in Datenbl√§ttern geschrieben ist.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein bisschen Geschichte</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Arbeiten am Mikrocontroller (im Folgenden als MK bezeichnet) wurden 2012 von der Firma </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPP Digital Solutions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> im Auftrag von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OJSC NIIET begonnen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Woronesch). Es wurden Lizenzen f√ºr den ARM Cortex-M4F-Kern und einige Kommunikationsperipheriemodule erworben, und einige der Module wurden von diesem Unternehmen unabh√§ngig entwickelt: PWM-Module, ein ADC-Controller (nicht der ADC selbst, sondern ein Manager f√ºr dessen Verwaltung), ein CAP-Erfassungsmodul und ein QEP-Quadraturdecodermodul. NPP Digital Solutions erstellte zun√§chst ein Mikrocontroller-Modell auf dem Kintex7-FPGA, das die gesamte Logik des zuk√ºnftigen Mikrocontrollers einschlie√ülich des ARM-Kerns implementierte. FPGA ist jedoch ein frei umprogrammierbares Produkt, mit dem Sie Fehler in der MK-Logik korrigieren k√∂nnen, wenn sie nach bestandener Pr√ºfung erkannt werden (dies gilt zus√§tzlich zum Testen auf einem Simulator). Aber wie testet man einen Motorcontrol-Mikrocontroller? Neben synthetischen Tests nat√ºrlich auch die eigentliche Aufgabe der Steuerung eines Elektromotors! Daf√ºr hat sich NPP "Digital Solutions" an uns gewandt</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NPF Vector LLC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , da wir viel Erfahrung auf dem Gebiet der elektrischen Antriebe auf Basis von MK Texas Instruments haben </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, obwohl wir eher in einem benachbarten Geb√§ude sitzen</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In gemeinsamen Diskussionen bei der Entwicklung von Peripherieger√§ten zur Steuerung von Elektromotoren wurde beschlossen, TMS320F28335 Texas Instruments (TI) als Modell zu verwenden, da dieser Mikrocontroller wahrscheinlich √ºber die leistungsst√§rksten und flexibelsten Peripherieger√§te zur Motorsteuerung verf√ºgt, die weltweit verdienterma√üen anerkannt werden. Ausgehend von TI-Datenbl√§ttern erstellte ‚ÄûDigital Solutions‚Äú auf ihrer Grundlage die interne Logik der PWM-, CAP- und QEP-Module f√ºr den K1921VK01T. Aufgrund unserer Erfahrungen mit TI MK haben wir au√üerdem einige Verbesserungen vorgeschlagen, die TI fehlen. Dies ist ein Filter f√ºr kurze Impulse im PWM-Modul (nicht alle Power-Key-Treiber wie das √ñffnen / Schlie√üen f√ºr einen sehr kurzen Zeitraum, IGBT kann in den linearen Modus wechseln). Dies sind einige der Nuancen im Quadratur-Decoder-Modul, mit denen Sie Probleme beim Umschalten von Z√§hlerteilern unterwegs beseitigen k√∂nnen usw.Die ‚Äûdigitalen L√∂sungen‚Äú haben sie ber√ºcksichtigt und die Peripheriefunktionalit√§t im Vergleich zu den TI-Modulen entsprechend erweitert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
W√§hrend NPP Digital Solutions die interne Logik der Module entwickelte, haben wir bei NPF Vector einen Stand zum Testen des zuk√ºnftigen Mikrocontrollers aufgestellt. Es war ein kleiner Frequenzumrichter mit sechs Transistoren (‚ÄûServoverst√§rker‚Äú), der √ºber Steuerkreise mit dem Prototyp-Mikrocontroller des FPGA verbunden war, und der Leistungsteil war mit einem kleinen Servomotor mit Hall-Positionssensoren (zur √úberpr√ºfung des CAP-Moduls) und einem Quadratur-Positionssensor (zur √úberpr√ºfung des QEP-Moduls) verbunden ) Unser Ziel war es, Software f√ºr den Mikrocontroller zu schreiben, um eine vollst√§ndige Vektorsteuerung des Elektromotors mit einem beliebigen Positionssensor Ihrer Wahl oder beidem gleichzeitig zu gew√§hrleisten. Und nat√ºrlich, um alle gefundenen Probleme in der Peripherie an ‚ÄûDigital Solutions‚Äú zu melden.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Trotz vieler eigener Tests von MK bei Digital Solutions wurden bei Tests an einem aktiven Elektromotor viele Fehler festgestellt. Grunds√§tzlich waren sie mit einer ungenauen Implementierung der internen Blocklogik verbunden, die in den Datenbl√§ttern von Texas Instruments nicht explizit beschrieben wurde. Was soll das PWM-Modul beispielsweise erzeugen, wenn der Vergleichssollwert √ºber der Timer-Periode liegt? Oder sollte das Modul eine √Ñnderung der Drehrichtung durch ein geteiltes Signal oder durch den urspr√ºnglichen Eingang erkennen, wenn ein Eingangssignalteiler f√ºr einen Quadraturdecoder enthalten ist? Die Antworten auf diese Fragen sind f√ºr den elektrischen Antrieb offensichtlich, f√ºr den Architekten der Mikrocontroller-Logik jedoch nicht offensichtlich. Soweit wir konnten, haben wir zusammen mit Digital Solutions √§hnliche Fehler festgestellt. Das Laufwerk hat ohne Probleme erfolgreich in der Vektorsteuerung gearbeitet.Nat√ºrlich konnten wir mit solchen Tests nicht alle Fehler abdecken - bei anderen Aufgaben treten die Fehler sicher wieder auf. Daf√ºr gibt es jedoch Errata und neue Revisionen von Mikrocontrollern: Um Fehler zu beheben, m√ºssen Sie diese zuerst sammeln. Nach dem Debuggen der MK-Logik auf dem FPGA mit "Digital Solutions" wurde die "Verkabelung" des MK (oder was auch immer) durchgef√ºhrt</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hei√üt es</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mikrocontroller? </font><font style="vertical-align: inherit;">Topologie?), Danach wurden alle Ergebnisse der Arbeit an NIIET √ºbertragen. </font><font style="vertical-align: inherit;">√úbrigens haben wir bereits nach der Ver√∂ffentlichung von MK im "Stein" einige Fehler gefunden, aber NIIET hielt sie f√ºr kritisch genug, um das MK-Layout zu √§ndern: Sie sammeln sich mehr an - sie werden es beheben.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Titel</font></font></h1><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/086/09f/ff5/08609fff50fd4295ba078743bb8a0811.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich muss auch sagen, dass der Mikrocontroller mehrere Namen √ºberlebt hat. </font><font style="vertical-align: inherit;">W√§hrend der Entwicklung hatte es zun√§chst den Codenamen ‚ÄûMS01‚Äú, dann hie√ü die experimentelle Steincharge NT32M4F1 und wurde dann zu K1921VK01T (au√üerdem sind die Buchstaben an einigen Stellen in russischer Sprache und in anderen englischen Buchstaben geschrieben). </font><font style="vertical-align: inherit;">Seien Sie daher nicht √ºberrascht, wenn Sie diese Namen in fr√ºhen Artikeln und Ver√∂ffentlichungen zu diesem MK sehen.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie teuer?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Derzeit (Anfang 2016) ist das NIIET bereit, die erste Charge von Mikrocontrollern zu verkaufen, die bereits bei den Kunden angekommen ist. Die Kristalle sind </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">teilweise</font></a><font style="vertical-align: inherit;"> in Kunststoff, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">teilweise</font></a><font style="vertical-align: inherit;"> in Keramik eingeschlossen (so dass es bei kritischen Anwendungen nicht funktioniert, wie Sie </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">selbst wissen</font></a><font style="vertical-align: inherit;"> , was Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tun)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Der Preis f√ºr Stein in Kunststoff lag Ende 2015 anscheinend etwas unter 3 tr, was h√∂her ist als der Preis f√ºr TI TMS320F28335 beim Kauf in Russland (zum Zeitpunkt des Schreibens betrug der Koeffizient f√ºr die Umrechnung ‚Äûihrer‚Äú Preise in ‚Äûunsere‚Äú 76). In TMS320F28335 gibt es jedoch keinen Benutzerspeicher und keine Stunden. Sie m√ºssen externe festlegen, wodurch die Kosten am Ende vergleichbar werden. Dies macht K1921VK01T nicht nur hinsichtlich der Importsubstitution vielversprechend, sondern auch hinsichtlich einfacher ‚ÄûHandelsinteressen‚Äú. Obwohl dieser Vergleich nat√ºrlich nicht ganz richtig ist, finden Sie auf dem Cortex-M4F eine Reihe von Beispielen f√ºr billigere Kristalle mit einer h√∂heren Taktfrequenz, aber mit weniger Peripherieger√§ten. Daher ist der K1921VK01T f√ºr einfache Aufgaben √ºberm√§√üig gro√ü und teuer. Aber f√ºr die Hauptanwendung (Steuerung von Elektromotoren und komplexer Leistungselektronik) ist es wettbewerbsf√§hig.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was haben wir mit Leistung?</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 Wir haben vor einem Jahr eine Pr√§sentation auf der Ausstellung dar√ºber gehalten. Die Pr√§sentation finden Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Unsere Tests geben nat√ºrlich nicht vor, besonders genau zu sein - schlie√ülich haben wir keine echten Benchmarks durchgef√ºhrt, sondern dasselbe Vektorsteuerungssystem in den Test ‚Äûaufgerollt‚Äú (und was kann elektrische Antriebe sonst noch anregen?). Eine kurze Nacherz√§hlung der Pr√§sentation lautet jedoch wie folgt: Die ARM Cortex-M4F-Architektur bleibt in den f√ºr Laufwerksaufgaben erforderlichen Durchschnittsberechnungen hinter dem C28 TI-Kern-DSP zur√ºck. Wenn Sie die Genauigkeit der Berechnungen nach M√∂glichkeit mithilfe von approximierten trigonometrischen Funktionen usw. verringern, k√∂nnen Sie diese L√ºcke auf etwa 15% reduzieren. Gleichzeitig betr√§gt die Taktfrequenz der oberen C28-Kerne (der gleiche TMS320F28335) 150 MHz und die Frequenz von K1921VK01T 100 MHz. Daher entspricht der K1921VK01T bei allen Bibliotheksoptimierungen in seiner Rechenleistung irgendwo der TI Piccolo MK-Serie mit einer Frequenz von 90 MHz. Was kann als ... sehr gut interpretiert werden, unserer Meinung nach,Denn wenn Sie alle Hardware-Schnickschnack des neuen MK wie DMA und selbstfilternde ADC-Messungen richtig verwenden, k√∂nnen Sie viel Zeit sparen. Auf die eine oder andere Weise haben wir es geschafft, in K1921VK01T unser anspruchsvollstes Projekt f√ºr Leistung zu ‚Äûstopfen‚Äú, basierend auf dem TMS320F2810 (150 MHz, C28-Kern), der bereits in denselben 2810 st√ºrzt.</font></font><br>
<br>
<h1>     ?</h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und was k√∂nnte mit ihnen falsch sein, es ist ARM! Normal, ohne "aber". Nehmen Sie eine JTAG, eine Entwicklungsumgebung, aber ... nein, schlie√ülich wird keine funktionieren. "Aber" ist die Flash-Speicher-Firmware. Trotz der Tatsache, dass der ARM-Kern selbst standardisiert ist und jeder JTAG und jede Umgebung eine Verbindung zu K1921VK01T herstellen, ist dies mit der Flash-Firmware nicht so einfach. Es scheint, dass jeder Hersteller von Mikrocontrollern es f√ºr seine Pflicht h√§lt, eigene Register f√ºr die Arbeit mit der Firmware seines Flash-Speichers zu erstellen. Daher werden die Entwickler von Entwicklungstools mit der Unterst√ºtzung dieses ganzen Zoos gequ√§lt. Auch in dieser Hinsicht liegt K1921VK01T nicht weit zur√ºck - es gibt dort auch Methoden, mit Blitzlicht zu arbeiten. Aber wenn f√ºr namhafte Hersteller Flash-Speicherprogrammierer (Treiber, Blinker oder wie soll ich das nennen?) In Entwicklungsumgebungen geschrieben werden und sofort funktionieren, dann funktioniert f√ºr K1921VK01T alles nur f√ºr diese Umgebungenf√ºr die Programmierer bei NIIET geschrieben haben. Gl√ºcklicherweise ist f√ºr IAR und Keil alles fertig und Beispiele f√ºr Projekte mit Firmware-Anweisungen finden Sie unter</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIIET-Forum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sowie im offenen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Repository auf Bitbucket</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , das von NIIET verwaltet wird. Dar√ºber hinaus haben wir bei NPF Vector Unterst√ºtzung f√ºr die Programmierung von Flash K1921VK01T f√ºr </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OpenOCD geschrieben</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(√ñffnen Sie den On-Chip-Debugger). Dies ist eine solche Schicht zwischen dem GDB-Debugger und dem Eisen in Form verschiedener JTAG-Emulatoren und verschiedener Steine. Aber w√§hrend wir die "Code√ºberpr√ºfung" im OpenOCD-Repository mit Konfliktl√∂sung abriefen, haben die NIIET-Entwickler dasselbe geschrieben, aber ihre war besser (sie haben zus√§tzlich zum Brennen des Haupt-Flash-Speichers auch die Benutzerbrennfunktion hinzugef√ºgt), aber ... das sind alle Texte. Was gibt diese OpenOCD? Dies ist eine Art Eisenabstraktionsschicht, mit der Sie Ihre eigene kostenlose und kostenlose Entwicklungsumgebung f√ºr K1921VK01T basierend auf einer g√§ngigen IDE erstellen k√∂nnen. Wir im ‚ÄûVector‚Äú lieben Eclipse (da die TI Code Composer Studio-Umgebung, beginnend mit v4, darauf basiert, sind wir daran gew√∂hnt </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und im Allgemeinen gibt es keine bessere IDE auf der Welt als Eclipse</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) Und die Entwickler von NIIET haben eine Entwicklungsumgebung f√ºr Qt Creator erstellt. Aber im Allgemeinen ist die Bedeutung hier und da dieselbe: Sie nehmen die Umgebung, nehmen die kostenlosen Cross-Development-Tools f√ºr GCC, nehmen das Plug-In f√ºr die Arbeit mit OpenOCD, OpenOCD selbst, ein paar Konfigurationen, ein bisschen Magie ... und arbeiten bereits vollst√§ndig mit K1921VK01T, vergessen IAR und Keil. Zum Zeitpunkt des Schreibens haben wir unsere Eclipse-Assembly (wir haben sie VectorIDE genannt) f√ºr K1921VK01T </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf unserer Website</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ver√∂ffentlicht. Das Rezept f√ºr Qt Creator finden Sie im </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NIIET-Forum</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Pers√∂nlich f√ºhren wir alle Projekte f√ºr K1921VK01T in einer kostenlosen Umgebung durch und wir beraten Sie - die GCC-Compiler bleiben nicht wirklich hinter den Marken-IARs zur√ºck (siehe unsere gleiche </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√§sentation)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), aber wenn Sie ein seri√∂ses Unternehmen sind, m√ºssen Sie keine teure importierte Software kaufen (bereits mit einem Umrechnungsfaktor von </font></font><strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">76, Karl!</font></font></strike><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 78!). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Oh ja. Es gibt noch eine Sache. Es hei√üt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codemaster ++ [ARM]</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dies ist eine 100% ige inl√§ndische Entwicklungsumgebung, einschlie√ülich Compiler, und auch f√ºr K1921VK01T konzipiert. Wir haben die ersten Versionen vor einem Jahr untersucht, aber festgestellt, dass sie noch nicht fertig sind, ein wenig in Bezug auf Compiler und viel in Bezug auf die einfache Bearbeitung von Code (obwohl sie in dieser Hinsicht mit der IAR konkurrieren kann, wer wei√ü, was ich meine). Aber es ist klein und schnell und auf der Oberfl√§che √§hnelt es einer Art "Hacker" -Debugger wie OllyDbg (vergleiche: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">eins</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zwei</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Im Allgemeinen wird vielleicht jemand interessiert sein. Ich muss sagen, dass die Entwickler (Firma</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Fiton"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) hat sich sehr bem√ºht und sogar einmal unseren Benchmark a la "Vector Engine Control" angefordert, um seine Compiler zu optimieren.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was haben wir mit Debugging-Kits?</font></font></h1><br>
<img src="https://habrastorage.org/files/8ec/122/5f7/8ec1225f7ca24599a4a47bb25091e9f1.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zu Beginn des Jahres 2016 sind vier Debug-Boards auf K1921VK01T bekannt. Dies ist unsere </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VectorCARD K1921BK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und andere ... von Mitbewerbern. Ok, so sei es, hier sind die Links </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LDM-HELPER-K1921BK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MBS-K1921VK01T</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Es scheint auch, dass das NIIET selbst ein eigenes Board NIIET_1921BK01T hat, aber auf seiner Website versteckt es sich anscheinend vor mir - wenn jemand einen Link findet, werde ich den Artikel gerne erg√§nzen. Was ist der Unterschied zwischen ihnen? Wir verkaufen kein nacktes Board, sondern ein Kit mit Wechselrichter, Elektromotor, Vektorsteuerung in C-Quellcodes (basierend auf dem, was wir damals f√ºr Digital Solutions geschrieben haben) sowie ein Top-Level-Programm und einen CANopen-Treiber zur √úberwachung aller Prozesse im Laufwerk - siehe unseren </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ersten Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wenn Sie also nur mit dem neuen MK spielen, eine LED blinken oder Daten √ºber verschiedene Kommunikationsschnittstellen senden m√∂chten, ist es am besten, Debug-Boards von Mitbewerbern zu kaufen (obwohl wir auch eine Bare-Board-Option f√ºr 15 tr haben, aber es ist v√∂llig "blank" - einige Schlussfolgerungen). Wenn Sie jedoch einen elektrischen Antrieb auf dem neuen MK erstellen m√∂chten, k√∂nnen Sie mit unserem Debugging-Kit und unserer Debugging-Software ein halbes oder ein Jahr Entwicklungszeit sparen (oder mehr, je nachdem, ob Sie die Theorie des elektrischen Antriebs kennen und √ºber eigene Debugging- und Oszillographie-Tools verf√ºgen √§hnlich wie bei uns). Wenn Sie den </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">ersten Artikel</font></a><font style="vertical-align: inherit;"> sorgf√§ltig gelesen haben</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Denken Sie dann wahrscheinlich daran, dass das Debuggen eines Steuerungssystems f√ºr einen elektrischen Antrieb ohne Visualisierung der darin enthaltenen Prozesse unm√∂glich ist. Und wenn die Entwicklungsumgebung bei Texas Instruments in der Lage ist, "out of the box" -Oszillogramme basierend auf den Daten des Speicherarrays von MK anzuzeigen, wurde f√ºr ARM in universellen Entwicklungsumgebungen (nicht von einem bestimmten Hersteller von MK) eine solche Funktion noch nicht beobachtet (wenn die Fiton-Entwickler sie gelesen haben) - M√∂chten Sie Ihren Codemaster ++ [ARM] mit dem Oszilloskop-Builder √§ndern? Das ist ganz einfach!). In unserem Debugging-Kit sind solche Mittel zur Visualisierung von Wellenformen vorhanden, sodass Sie sofort alles sehen k√∂nnen, was Elektromotoren steuern soll: die Form von Phasenstr√∂men, Spannungen, Ein- / Ausg√§ngen aller Regler usw. Der Preis f√ºr unser Kit ist gro√ü, ca. 130 tr.(Nur ein Elektromotor mit allen Positionssensoren kostet derzeit ca. 30 tr). F√ºr ein Unternehmen, das ein neues Produkt erlernen m√∂chte, sollte dies jedoch nicht kritisch sein - eine kommerzielle Entwicklungsumgebung f√ºr ARM allein kann mehr kosten.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nachteile von K1921VK01T</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was sind die Hauptnachteile des neuen K1921VK01T, die jetzt festgestellt werden k√∂nnen? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Erstens ist dies zweifellos ein Rohprodukt, da es bisher wirklich von 10 bis 20 Personen programmiert wurde. </font><font style="vertical-align: inherit;">Wenn mehr Entwickler darauf sitzen, werden Fehler erkannt - neue Revisionen werden ver√∂ffentlicht. </font><font style="vertical-align: inherit;">Also mach dich bereit. </font><font style="vertical-align: inherit;">Trotzdem k√∂nnen sie die Motoren verdrehen - pers√∂nlich verdreht. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Im Moment ist die Dokumentation auch feucht. </font><font style="vertical-align: inherit;">Es gibt nur wenige Fehler, aber einige Dinge werden erkl√§rt ... es ist nicht ganz klar. </font><font style="vertical-align: inherit;">Man k√∂nnte etwas detaillierter malen, Beispiele nennen. </font><font style="vertical-align: inherit;">Ich denke, im Laufe der Zeit wird es abgeschlossen sein.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Der Mikrocontroller ist sehr gro√ü und hoch entwickelt. Dies ist f√ºr jemanden ein Plus, f√ºr jemanden ein Minus. Nur sehr wenige Anwendungen decken den gesamten Funktionsumfang ab. NIIET denkt bereits an eine Reihe von MK, die darauf basieren, mit verschiedenen Geb√§uden und einer Reihe von Peripherieger√§ten. Aber im Moment gibt es nur K1921VK01T.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Er hat einen bestimmten ADC. H√§ufig installieren MK-Hersteller ein schnelles ADC-Modul (12 MS / s) und multiplexen es √ºber mehrere Kan√§le. Dies wurde beispielsweise von Texas Instruments in der C2000-Serie durchgef√ºhrt. In K1921VK01T arbeiten jedoch 12 langsame Zweikanal-ADC-Module (1,7 MS / s) parallel. Warum ist es schlecht, au√üer der Unf√§higkeit, etwas sehr schnell zu messen? Wenn sich im MK ein ADC befindet, k√∂nnen Sie auf der Steuerplatine kalibrierte Referenzsignale, z. B. 1 V und 2 V, an zwei nicht verwendete Kan√§le senden und diese zur Berechnung und Kompensation des Multiplikationsfehlers und des Offsetfehlers dieses einen ADC verwenden, wodurch die Korrektur auf alle Kan√§le ausgedehnt wird (der ADC ist einer ) Wenn es in MK viele ADCs gibt, funktioniert ein solcher Trick nicht - sie haben alle ihre eigenen pers√∂nlichen Fehler. Wir haben den Kalibrierungstrick beim Texas Instruments MK Typ TMS320F2810 verwendet (dies wird im Datenblatt beschrieben und empfohlen).Hier in K1921VK01T ohne Kalibrierung haben wir eine geringere Genauigkeit des ADC im Vergleich zum kalibrierten TMS320F2810. Wir mussten einen speziellen Stand f√ºr die unabh√§ngige Kalibrierung jedes K1921VK01T ADC-Moduls erstellen und die Kalibrierungstabelle in den integrierten Benutzerspeicher sticken. Dann stellte sich heraus, dass die Genauigkeit der analogen Messungen vergleichbar war (die Kalibrierung schwebt fast nicht von der Temperatur weg - sie wurde √ºberpr√ºft). Wahrscheinlich sollte NIIET eine solche Tabelle im Werk flashen, es w√§re praktisch. Aber solange der Blitz leer ist.Dann stellte sich heraus, dass die Genauigkeit der analogen Messungen vergleichbar war (die Kalibrierung schwebt fast nicht von der Temperatur weg - sie wurde √ºberpr√ºft). Wahrscheinlich sollte NIIET eine solche Tabelle im Werk flashen, es w√§re praktisch. Aber solange der Blitz leer ist.Dann stellte sich heraus, dass die Genauigkeit der analogen Messungen vergleichbar war (die Kalibrierung schwebt fast nicht von der Temperatur weg - sie wurde √ºberpr√ºft). Wahrscheinlich sollte NIIET eine solche Tabelle im Werk flashen, es w√§re praktisch. Aber solange der Blitz leer ist.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Die Frequenz von 100 MHz ist nat√ºrlich eher niedrig, ich m√∂chte es schneller. Aber das hei√üt, das ist. Obwohl an einigen Stellen die Frequenz von 125 MHz geschrieben wird, h√§ngt alles von der Umgebungstemperatur ab. "Digital Solutions" berichtete √ºber solche inoffiziellen Informationen: Das Innere des Kristalls ist f√ºr maximal 125 Grad ausgelegt. Die Temperatur ist etwa 15 Grad h√∂her als die Umgebung. Gem√§√ü dem Projekt sollte K1921VK01T bei 85 Grad der Umgebung + Reserve arbeiten, was garantiert bei 100 MHz erreicht wird. Tats√§chlich kann MK √ºber 100 MHz beschleunigt werden, wobei einzelne Abtastwerte bei 140-170 MHz arbeiten, dies h√§ngt jedoch von der Abtastung ab. Wenn der Kristall nicht √ºberhitzt ist, kann er dispergiert werden, wenn jemand ihn ben√∂tigt. Wenn es in Ihrer Anwendung jedoch hei√ü ist (+85), ist es besser, nicht √ºber 100 MHz zu schikanieren.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
‚Ä¢ Es gibt keinen offiziellen Bootloader (Programmierer) √ºber Kommunikationsschnittstellen (CAN, RS). </font><font style="vertical-align: inherit;">Das N√§hen von MK ist nur √ºber JTAG / SWD m√∂glich. </font><font style="vertical-align: inherit;">Wenn sich der Produktcontroller in einem geschlossenen Fall befindet, m√ºssen Sie Ihren Bootloader f√ºr die gew√ºnschte Kommunikationsschnittstelle schreiben. </font><font style="vertical-align: inherit;">Oder warten Sie, bis NIIET schreibt. </font><font style="vertical-align: inherit;">Bisher nein, aber ich denke, es wird erscheinen.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fazit</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obwohl, was ist die Schlussfolgerung noch? </font><font style="vertical-align: inherit;">Alles f√§ngt gerade erst an! </font><font style="vertical-align: inherit;">Schlie√ülich gibt es einen Haushalts-Mikrocontroller, mit dem Sie wirklich einen elektrischen Antrieb machen k√∂nnen! </font><font style="vertical-align: inherit;">Zuvor waren alle vorhandenen inl√§ndischen MKs entweder durch den Kern oder durch die Peripherie schwach, um die Aufgaben der Motorsteuerung zu bew√§ltigen. </font><font style="vertical-align: inherit;">Aber jetzt - v√∂llige Freiheit f√ºr die komplexesten Steuerungsstrukturen und das komplexeste Aggregat. </font><font style="vertical-align: inherit;">Ich m√∂chte besonders die Aussichten dieses Mikrocontrollers f√ºr Maschinenservoantriebe erw√§hnen. </font><font style="vertical-align: inherit;">Bisher war es in Russland nicht m√∂glich, eine vollst√§ndig inl√§ndische mehrachsige Pr√§zisionsmaschine herzustellen, da (einer der Gr√ºnde) nichts f√ºr einen hochwertigen Servoantrieb vorhanden war. </font><font style="vertical-align: inherit;">Jetzt gibt es so einen Mikrocontroller.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de389129/">https://habr.com/ru/post/de389129/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de389119/index.html">Hinzuf√ºgen und Konfigurieren der 1C-Datenbank zum Server</a></li>
<li><a href="../de389121/index.html">Firefox 46 unterst√ºtzt mehrere Monitore mit unterschiedlichen Pixeldichten</a></li>
<li><a href="../de389123/index.html">Methoden zum Debuggen von Mikrocontroller-Software in einem elektrischen Laufwerk</a></li>
<li><a href="../de389125/index.html">Galaktoseismologie: Wie Zwerggalaxien aus dunkler Materie Spuren im interstellaren Gas hinterlassen</a></li>
<li><a href="../de389127/index.html">Aggressives Marketing oder wie unterscheidet sich die Motivation eines hellen Bogens am Handgelenk ("Kugeln") von der Motivation eines Fitnessarmbandes?</a></li>
<li><a href="../de389133/index.html">Hunde erkennen menschliche Gef√ºhle mit mehreren Sinnen</a></li>
<li><a href="../de389139/index.html">Drinky ist ein Trinkkumpel, der immer da ist</a></li>
<li><a href="../de389141/index.html">Diskussion: Musikliebhaber und Audiophile, Netzwerkplayer und eingebaute Akustik</a></li>
<li><a href="../de389143/index.html">Google Street View erreicht Miniaturwunderland</a></li>
<li><a href="../de389145/index.html">–ö–∞–∫ –ø–æ–º–µ—à–∞—Ç—å —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∞–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–µ—Å–ø–∏–ª–æ—Ç–Ω–∏–∫–∏</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>