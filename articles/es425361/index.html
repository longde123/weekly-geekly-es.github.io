<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>   Bloqueo de contenido, extensi贸n para navegadores de cromo   </title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La tendencia principal de este a帽o de "bloqueo", la extensi贸n que se describe a continuaci贸n, le permite sentir el poder sobre el contenido en el nave...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bloqueo de contenido, extensi贸n para navegadores de cromo</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425361/">  La tendencia principal de este a帽o de "bloqueo", la extensi贸n que se describe a continuaci贸n, le permite sentir el poder sobre el contenido en el navegador. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5z/xa/qt/5zxaqtw2ht7fmiwgbaqfjeuiswq.png"></div><br>  Recuerdo durante mucho tiempo, en la infancia, cuando ve铆a la televisi贸n, durante los bloques de anuncios, siempre hab铆a un descanso como un receso escolar, ir a la cocina o una letrina, cambiar a otros canales, se agregaba un descanso para fumar con la edad. <br><br>  Ahora rara vez veo televisi贸n, leo noticias en Internet, uso bloqueadores de anuncios.  En el tel茅fono cuando llaman e intentan imponer servicios financieros o un asistente de ventana, cuelgo.  A veces, con raras excepciones, hay comerciales interesantes o divertidos, pero incluso esos videos despu茅s de la segunda visualizaci贸n se convierten en publicidad regular. <br><br>  Hace un par de a帽os, not茅 que en todos los sitios de noticias, se puede decir que no pas贸 un d铆a sin noticias sobre los bloggers: tales y otros bloggers tienen un conflicto o bloggers en la Duma del Estado.  Un blogger es un "nombre nuevo" y, como de costumbre, el blogger "m谩s, m谩s" de todos los dem谩s bloggers.  Al mismo tiempo, es raro cuando escriben criterios de por qu茅 茅l es "el m谩s, el m谩s" para que el lector pueda ver videos o buscar en Internet, que se encuentra en el pr贸ximo blogger de "茅l mismo".  Los bloggers introducen la nueva palabra "zashkvar", los bloggers se han alzado contra esto, los bloggers est谩n haciendo su propio show. <br><br>  El 煤ltimo a帽o sobre blogueros de noticias se ha vuelto menos, el l铆der ahora es "B ... va", no lo menciono espec铆ficamente, existe el riesgo de convertir el art铆culo en las pr贸ximas noticias sobre "B ... va", por lo que cada d铆a hay noticias nuevas.  Los periodistas a menudo se ven obligados a seguir el enlace con un juego de palabras en el titular. <br><a name="habracut"></a><br>  Escribir铆a algunos ejemplos m谩s, pero no lo har茅, porque el descrito anteriormente no es un intento de ser bueno yo mismo con la ayuda de la cr铆tica de los dem谩s.  Con cualquier cosa, puede haber una explosi贸n o una sobredosis.  Estoy m谩s que seguro de que todos tienen sus propios "l铆deres" en las noticias, que preferir铆an no ver, sin ellos su d铆a habr铆a mejorado. <br><br>  Los ejemplos anteriores son esencialmente un tipo de publicidad, pero cuando se distribuyen en forma de noticias, no entran en ning煤n bloqueador de anuncios.  Muchos navegadores tienen bloqueo de anuncios incorporado, pero desafortunadamente, no hay forma de bloquear el contenido por palabras en el contenido.  Intent茅 buscar en las extensiones, pero no lo encontr茅 con la descripci贸n necesaria, los bloqueadores de anuncios me llamaron la atenci贸n, parec铆an poder bloquear seg煤n las palabras, pero no intent茅 apostar.  Recientemente vi varios art铆culos que no todas las extensiones son seguras, y es m谩s interesante escribir el suyo, simple, solo con la funci贸n necesaria de cortar contenido. <br><br>  Hay muchos art铆culos sobre la creaci贸n de extensiones, pero este art铆culo no es una instrucci贸n para crear. <br>  La primera versi贸n de la extensi贸n result贸 en solo un par de horas, el algoritmo de corte es simple y universal.  La desventaja de la universalidad es que el algoritmo puede no ser adecuado para todos los sitios.  Pero para que la extensi贸n funcionara, tuve que escribir mucho c贸digo para mostrar los contadores, el contenido oculto de cada p谩gina. <br><br>  La parte content_script.js es la l贸gica principal para bloquear el contenido: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> search = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.evaluate(<span class="hljs-string"><span class="hljs-string">'/html/body//*[contains(., "...") and count(child::node())&lt;childsLimit]'</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, XPathResult.ORDERED_NODE_ITERATOR_TYPE, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> thisHeading = search.iterateNext(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (thisHeading) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (thisHeading.tagName !== <span class="hljs-string"><span class="hljs-string">'script'</span></span> &amp;&amp; thisHeading.style.display != <span class="hljs-string"><span class="hljs-string">'none'</span></span>) { thisHeading.style.display = <span class="hljs-string"><span class="hljs-string">'none'</span></span>; } thisHeading = search.iterateNext(); }</code> </pre> <br>  El fragmento anterior muestra que se utiliza el m茅todo "document.evaluate".  Al buscar texto en las etiquetas, los elementos ra铆z tambi茅n se incluyen en los resultados.  Por ejemplo, el texto de toda la p谩gina, el texto del bloque de noticias, etc.  Para eliminar elementos innecesarios, se utiliza la segunda condici贸n sobre el n煤mero de hijos anidados.  En mi caso, apareci贸 el n煤mero 9. En tres sitios, lo superfluo se esconde de forma r谩pida y sencilla, aunque a veces en uno de los sitios de un determinado bloque hay una foto, pero sin un enlace a las noticias y enlaces a la imagen. <br><br>  Originalmente era un deseo de hacer tambi茅n una p谩gina de configuraci贸n de extensi贸n, tal vez lo har茅 m谩s tarde.  Mientras tanto, la configuraci贸n b谩sica se realiza directamente en el c贸digo. <br><br>  Parte de background.js es la configuraci贸n de bloqueo de contenido: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> childsLimit = <span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blockString = <span class="hljs-string"><span class="hljs-string">'[contains(., "...") and count(child::node())&lt;childsLimit]'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blockOnlyUrlOpt = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> urlOptions = [{<span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">'https://exampleSite.com'</span></span>, <span class="hljs-attr"><span class="hljs-attr">unBlock</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">childsLimit</span></span>: <span class="hljs-number"><span class="hljs-number">4</span></span>}];</code> </pre><br>  La primera variable "childsLimit" le permite establecer el nivel general de anidamiento de los elementos bloqueados. <br><br>  La segunda variable "blockString" contiene la condici贸n xpath, al agregar una nueva palabra, debe copiar todo junto con corchetes y agregar al final con la palabra "o" y luego reemplazar la palabra de b煤squeda entre comillas. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> blockString = <span class="hljs-string"><span class="hljs-string">'[contains(., "1") and count(.//*)&lt;childsLimit] or [contains(., "2") and count(.//*)&lt;childsLimit]'</span></span>;</code> </pre><br>  La tercera variable "urlOptions" le permite ajustar la configuraci贸n de diferentes sitios. <br>  Propiedad "url": contiene la direcci贸n para la que se aplicar谩 la configuraci贸n. <br>  La propiedad "desbloquear": el valor booleano verdadero permite no bloquear el contenido en el sitio especificado en la "url" <br>  La propiedad "childsLimit" es el nivel de anidaci贸n del elemento de contenido bloqueado. <br>  La cuarta variable "blockOnlyUrlOpt" le permite definir una l贸gica com煤n.  Si el valor es verdadero, el bloqueo solo funciona en los sitios enumerados en la matriz variable urlOptions, donde la propiedad de desbloqueo es falsa. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los archivos de extensi贸n est谩n disponibles aqu铆.</a> <br><br>  Para instalar, debes: <br><br><ul><li>  Descargue todos los archivos a cualquier carpeta que sea conveniente para usted. </li><li>  En el navegador, vaya a extensiones y active el modo desarrollador. </li><li>  En el bot贸n "Descargar extensi贸n desempaquetada ..." especifique la carpeta desde el punto uno. </li></ul><br>  Desarrollado y probado en el navegador Opera, otros navegadores de cromo tambi茅n deber铆an funcionar. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es425361/">https://habr.com/ru/post/es425361/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es425351/index.html">Los programadores de bricolaje pierden sus trabajos</a></li>
<li><a href="../es425353/index.html">Toda la verdad sobre RTOS. Art铆culo 13. Estructuras de datos de tareas y llamadas de API no compatibles</a></li>
<li><a href="../es425355/index.html">Calificaci贸n de seguridad del proyecto ICO</a></li>
<li><a href="../es425357/index.html">C贸mo armamos una pila tecnol贸gica de 12 pisos y no nos volvimos locos</a></li>
<li><a href="../es425359/index.html">Los chinos usaron un microchip para controlar las computadoras estadounidenses</a></li>
<li><a href="../es425363/index.html">Consejos para estudiantes programadores.</a></li>
<li><a href="../es425367/index.html">El juego Arduino m谩s simple con una pantalla 1602 - Parte # 2</a></li>
<li><a href="../es425369/index.html">KTRU (Cat谩logo de bienes, obras, servicios) o la muerte de la contrataci贸n p煤blica de TI</a></li>
<li><a href="../es425371/index.html">Node.JS: biblioteca para modificar respuestas http</a></li>
<li><a href="../es425373/index.html">QA Fest 2018: revisi贸n de la principal conferencia de QA de Ucrania</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>