<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéπ üåì üö∏ Arduino unter Linux: Konfigurieren von Qt Creator als Entwicklungsumgebung üö§ ‚òÉÔ∏è ü§µ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Arduino-Plattform ist beliebt, unabh√§ngig davon, ob sie gescholten oder gelobt wird. Seine Sch√∂pfer haben es geschafft, die Eintrittsschwelle auf ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Arduino unter Linux: Konfigurieren von Qt Creator als Entwicklungsumgebung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/408261/">  Die Arduino-Plattform ist beliebt, unabh√§ngig davon, ob sie gescholten oder gelobt wird.  Seine Sch√∂pfer haben es geschafft, die Eintrittsschwelle auf ein paar Mausklicks + ein paar Zeilen Code und Voila zu senken - hier haben Sie eine blinkende LED.  Und im Allgemeinen ist das Arduino-Ding f√ºr das Rapid Prototyping von Handwerken auf AVR √§u√üerst praktisch.  Das einzige, was fehlschlug, war die IDE, die von der IDE nur schwer aufgerufen werden kann.  Unter den Funktionen der IDE bietet sie nur eines - die Automatisierung der Erstellung und Montage eines Projekts. <br><br>  F√ºr Windows-Benutzer gibt es eine Alternative: MS Visual Studio Community + <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vMicro-</a> Plugin, mit dem Sie Skizzen schreiben k√∂nnen, jedoch mit allen von der IDE bereitgestellten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Extras</a> .  Das Plug-In schwingt problemlos im Studio selbst √ºber das Men√º "Extras" und funktioniert in der Testversion so oft, wie Sie m√∂chten.  Die kostenpflichtige Version unterst√ºtzt theoretisch das schrittweise Debuggen, war jedoch als Eigent√ºmer der lizenzierten Kopie von vMicro nicht sehr beeindruckt. <br><br>  F√ºr Linux-Benutzer ist alles wie immer: Wir wollen eine gute IDE - w√§hlen Sie das ‚ÄûOpfer‚Äú aus und versuchen Sie, die erforderlichen Funktionen daran zu befestigen.  Es gibt L√∂sungen, die auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eclipse</a> basieren, aber ich mag <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eclipse</a> nicht, √ºber das ich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereits einmal geschrieben habe</a> .  Ich ertrage ihn als unvermeidliches √úbel, wenn √ºberhaupt nichts Passendes zur Hand ist.  Von allen kostenlosen IDEs respektiere ich am meisten den m√§chtigen und wunderbaren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Qt Creator</a> , in dem ich und mein Team seit mehr als einem Jahr arbeiten.  Daher werde ich dar√ºber sprechen, wie man daraus eine Entwicklungsumgebung f√ºr Arduino macht. <br><a name="habracut"></a><br><h1>  1. Bodenvorbereitung </h1><br>  Qt Creator ist in den Repositorys jeder mehr oder weniger selbstbewussten Linux-Distribution verf√ºgbar.  Zum Beispiel in Archa bekommen Sie es so <br><br><pre><code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> sudo pacman <span class="hljs-literal"><span class="hljs-literal">-S</span></span> qtcreator</code> </pre> <br>  Au√üerdem ben√∂tigen wir Pakete zum Arduino selbst. <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> sudo pacman <span class="hljs-literal"><span class="hljs-literal">-S</span></span> arduino arduino<span class="hljs-literal"><span class="hljs-literal">-avr</span></span><span class="hljs-literal"><span class="hljs-literal">-core</span></span></code> </pre><br>  An dem Tag, an dem wir Arduino endlich vergessen, werden wir einen weiteren Compiler, Assembler, Linker und eine Standard-C-Bibliothek f√ºr AVR ben√∂tigen, also setzen wir sie ein <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> sudo pacman <span class="hljs-literal"><span class="hljs-literal">-S</span></span> avr<span class="hljs-literal"><span class="hljs-literal">-gcc</span></span> avr<span class="hljs-literal"><span class="hljs-literal">-binutils</span></span> avr<span class="hljs-literal"><span class="hljs-literal">-libc</span></span></code> </pre><br>  Wir werden den Debugger und den Emulator in diesem Artikel testen, also werden wir solche Pakete installieren <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> sudo pacman <span class="hljs-literal"><span class="hljs-literal">-S</span></span> avr<span class="hljs-literal"><span class="hljs-literal">-gdb</span></span> simavr</code> </pre><br><h1>  2. Erstellen Sie ein Projekt in Qt Creator </h1><br>  F√ºhren Sie Qt Creator aus und erstellen Sie ein neues Projekt ohne Qt in C ++ <br><br><img src="https://habrastorage.org/webt/nz/um/6m/nzum6m6rpcsv4l5izgncuqe528y.png"><br><br>  W√§hlen Sie einen Ort f√ºr das Projekt und geben Sie ihm einen Namen <br><br><img src="https://habrastorage.org/webt/jk/m_/ak/jkm_akr6uwywb4whvqwbolina7g.png"><br><br>  Nehmen Sie als Build-System ein regelm√§√üiges qmake <br><br><img src="https://habrastorage.org/webt/ci/2c/2v/ci2c2v8nbynsag3lmijyfuqh6yg.png"><br><br>  Wir belassen den Arbeitssatz standardm√§√üig und beheben ihn sp√§ter <br><br><img src="https://habrastorage.org/webt/9a/b2/qp/9ab2qpaz4pdz8oq9geu4kqsmkpa.png"><br><br>  F√ºgen Sie unter Versionskontrolle das Projekt wie gew√ºnscht hinzu <br><br><img src="https://habrastorage.org/webt/zl/y6/td/zly6tdyneajhywibopatkr-3bfs.png"><br><br>  Wir bekommen das Standard C ++ Projekt <br><br><img src="https://habrastorage.org/webt/oi/xz/vu/oixzvuontcomii78urykevl1nkm.png"><br><br>  Das Projekt enth√§lt nur zwei Dateien: main.cpp und led-blink.pro.  Der erste wird gel√∂scht, der zweite wird von allem gel√∂scht, was dort geschrieben steht, und es wird ein vollst√§ndig leeres Projekt erstellt <br><br><img src="https://habrastorage.org/webt/no/ll/es/nollestvtwrb2g5bx5vxjbwp-8q.png"><br><br>  Jetzt beginnen wir mit Stiften, Text in eine * .pro-Datei zu schreiben, die die Projektstruktur f√ºr Arduino bildet <br><br><pre> <code class="hljs vala"><span class="hljs-meta"><span class="hljs-meta">#     #    Arduino Core ARDUINO_DIR=/usr/share/arduino/hardware/archlinux-arduino/avr/ #    (Arduino Uno, Nano, Mini) ARDUINO_MCU=atmega328p #    ARDUINO_FCPU = 16000000L</span></span></code> </pre><br>  Wir schlie√üen alles, was mit Qt zu tun hat, aus dem Projekt aus und w√§hlen die Projektvorlage aus <br><br><pre> <code class="hljs 1c"><span class="hljs-meta"><span class="hljs-meta">#  ,   Qt  </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> ! QT -= gui core CONFIG -= qt #   - ,      ELF TEMPLATE = app</span></span></code> </pre><br>  Wir legen das Verzeichnis f√ºr die zusammengestellte Bin√§rdatei und ihren Namen fest <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">DESTDIR</span></span> = ../bin TARGET = led-blink</code> </pre><br>  Verbinden Sie als N√§chstes die Header-Suchverzeichnisse <br><br><pre> <code class="hljs pgsql">#    INCLUDEPATH += $$<span class="ruby"><span class="ruby">ARDUINO_DIR/cores/arduino INCLUDEPATH += $$</span></span>ARDUINO_DIR/variants/standard INCLUDEPATH += $$<span class="pgsql"><span class="pgsql">ARDUINO_DIR/libraries INCLUDEPATH += /usr/avr/</span><span class="hljs-keyword"><span class="pgsql"><span class="hljs-keyword">include</span></span></span></span></code> </pre><br>  Definieren Sie den C-Compiler und seine Schl√ºssel <br><br><pre> <code class="hljs powershell">QMAKE_CC = /usr/bin/avr<span class="hljs-literal"><span class="hljs-literal">-gcc</span></span> QMAKE_CFLAGS += <span class="hljs-literal"><span class="hljs-literal">-c</span></span> <span class="hljs-literal"><span class="hljs-literal">-g</span></span> <span class="hljs-literal"><span class="hljs-literal">-Os</span></span> <span class="hljs-literal"><span class="hljs-literal">-w</span></span> <span class="hljs-literal"><span class="hljs-literal">-ffunction</span></span><span class="hljs-literal"><span class="hljs-literal">-sections</span></span> <span class="hljs-literal"><span class="hljs-literal">-fdata</span></span><span class="hljs-literal"><span class="hljs-literal">-sections</span></span> QMAKE_CFLAGS += <span class="hljs-literal"><span class="hljs-literal">-MMD</span></span> <span class="hljs-literal"><span class="hljs-literal">-mmcu</span></span>=<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_MCU</span></span> <span class="hljs-literal"><span class="hljs-literal">-DF_CPU</span></span>=<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_FCPU</span></span> QMAKE_CFLAGS += <span class="hljs-literal"><span class="hljs-literal">-DARDUINO_AVR_UNO</span></span> <span class="hljs-literal"><span class="hljs-literal">-DARDUINO_ARCH_AVR</span></span></code> </pre><br>  und der C ++ - Compiler und seine Schl√ºssel <br><br><pre> <code class="hljs powershell">QMAKE_CXX = /usr/bin/avr<span class="hljs-literal"><span class="hljs-literal">-g</span></span>++ QMAKE_CXXFLAGS += <span class="hljs-literal"><span class="hljs-literal">-c</span></span> <span class="hljs-literal"><span class="hljs-literal">-g</span></span> <span class="hljs-literal"><span class="hljs-literal">-Os</span></span> <span class="hljs-literal"><span class="hljs-literal">-w</span></span> <span class="hljs-literal"><span class="hljs-literal">-ffunction</span></span><span class="hljs-literal"><span class="hljs-literal">-sections</span></span> <span class="hljs-literal"><span class="hljs-literal">-fdata</span></span><span class="hljs-literal"><span class="hljs-literal">-sections</span></span> QMAKE_CXXFLAGS += <span class="hljs-literal"><span class="hljs-literal">-fno</span></span><span class="hljs-literal"><span class="hljs-literal">-exceptions</span></span> <span class="hljs-literal"><span class="hljs-literal">-fno</span></span><span class="hljs-literal"><span class="hljs-literal">-threadsafe</span></span><span class="hljs-literal"><span class="hljs-literal">-statics</span></span> QMAKE_CXXFLAGS += <span class="hljs-literal"><span class="hljs-literal">-MMD</span></span> <span class="hljs-literal"><span class="hljs-literal">-mmcu</span></span>=<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_MCU</span></span> <span class="hljs-literal"><span class="hljs-literal">-DF_CPU</span></span>=<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_FCPU</span></span> QMAKE_CXXFLAGS += <span class="hljs-literal"><span class="hljs-literal">-DARDUINO_AVR_UNO</span></span> <span class="hljs-literal"><span class="hljs-literal">-DARDUINO_ARCH_AVR</span></span></code> </pre><br>  Setzen Sie den Linker und seine Schl√ºssel <br><br><pre> <code class="hljs powershell">QMAKE_LINK = /usr/bin/avr<span class="hljs-literal"><span class="hljs-literal">-gcc</span></span> QMAKE_LFLAGS = <span class="hljs-literal"><span class="hljs-literal">-w</span></span> <span class="hljs-literal"><span class="hljs-literal">-Os</span></span> <span class="hljs-literal"><span class="hljs-literal">-Wl</span></span>,-<span class="hljs-literal"><span class="hljs-literal">-gc</span></span><span class="hljs-literal"><span class="hljs-literal">-sections</span></span> <span class="hljs-literal"><span class="hljs-literal">-mmcu</span></span>=<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_MCU</span></span> QMAKE_LIBS = <span class="hljs-literal"><span class="hljs-literal">-lm</span></span></code> </pre><br>  Wir konfigurieren die Nachbearbeitung der ELF-Datei, um sie f√ºr die nachfolgende Firmware auf der Karte in Intel HEX umzuwandeln <br><br><pre> <code class="hljs powershell">QMAKE_POST_LINK += /usr/bin/avr<span class="hljs-literal"><span class="hljs-literal">-objcopy</span></span> <span class="hljs-literal"><span class="hljs-literal">-O</span></span> ihex <span class="hljs-literal"><span class="hljs-literal">-j</span></span> .text <span class="hljs-literal"><span class="hljs-literal">-j</span></span> .data <span class="hljs-literal"><span class="hljs-literal">-S</span></span> <span class="hljs-variable"><span class="hljs-variable">$</span></span>{TARGET} <span class="hljs-variable"><span class="hljs-variable">$</span></span>{TARGET}.hex</code> </pre><br>  Geben Sie an, welche Header-Dateien im Projekt enthalten sind. <br><br><pre> <code class="hljs powershell">HEADERS += <span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$files</span></span>(<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_DIR</span></span>/cores/arduino/*.h) HEADERS += <span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$files</span></span>(<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_DIR</span></span>/variants/standard/*.h)</code> </pre><br>  Definieren Sie Arduino Core-Quelldateien <br><br><pre> <code class="hljs powershell">SOURCES += <span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$files</span></span>(<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_DIR</span></span>/cores/arduino/*.c) SOURCES += <span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$files</span></span>(<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_DIR</span></span>/cores/arduino/*.cpp)</code> </pre><br>  Also, wann werden wir tats√§chlich mit dem Skizzieren beginnen?  Fangen wir jetzt an, aber was wir getan haben, edle Dons, ist das notwendige Minimum, damit der Skizzencode funktioniert. <br><br>  F√ºgen Sie nun die Skizzenquelle zum Projekt hinzu.  Klicken Sie mit der rechten Maustaste auf das Projekt in der Baumstruktur und w√§hlen Sie "Neu hinzuf√ºgen ...". F√ºgen Sie die C ++ - Quelldatei hinzu <br><br><img src="https://habrastorage.org/webt/6k/la/0q/6kla0qpfzoqfsc9fopgiuqemgp0.png"><br><br>  So organisieren Sie die Quellen innerhalb des Projekts im n√§chsten Fenster <br><br><img src="https://habrastorage.org/webt/m7/ir/km/m7irkmvajjuso6zf907z5vttot8.png"><br><br>  Klicken Sie auf "Durchsuchen" und erstellen Sie den src-Ordner f√ºr * .cpp-Dateien <br><br><img src="https://habrastorage.org/webt/m_/dc/ai/m_dcaifkzi5on256d51fghsmev0.png"><br><br>  Geben Sie der Datei nun einen Namen <br><br><img src="https://habrastorage.org/webt/e-/zj/yw/e-zjywi7fu13rxcozoeor8tf5mo.png"><br><br>  Klicken Sie auf das n√§chste Fenster "Fertig stellen".  Wir bekommen so ein Bild <br><br><img src="https://habrastorage.org/webt/yi/--/gr/yi--gr36m4qeisoz4ltnt8fy8yg.png"><br><br>  Die IDE f√ºgt diese Datei dem Build-Skript led-blink.pro hinzu <br><br><pre> <code class="hljs powershell">HEADERS += <span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$files</span></span>(<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_DIR</span></span>/cores/arduino/*.h) HEADERS += <span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$files</span></span>(<span class="hljs-variable"><span class="hljs-variable">$</span></span><span class="hljs-variable"><span class="hljs-variable">$ARDUINO_DIR</span></span>/variants/standard/*.h) <span class="hljs-comment"><span class="hljs-comment">#  Arduino Core SOURCES += $$files($$ARDUINO_DIR/cores/arduino/*.c) \ src/led-blink.cpp SOURCES += $$files($$ARDUINO_DIR/cores/arduino/*.cpp)</span></span></code> </pre><br>  Aber um keine langen Quellenlisten zu erstellen, mag ich das normalerweise <br><br><pre> <code class="hljs smalltalk">#  <span class="hljs-type"><span class="hljs-type">Arduino</span></span> <span class="hljs-type"><span class="hljs-type">Core</span></span> <span class="hljs-type"><span class="hljs-type">HEADERS</span></span> += <span class="hljs-string"><span class="hljs-string">$$</span></span>files(<span class="hljs-string"><span class="hljs-string">$$</span></span><span class="hljs-type"><span class="hljs-type">ARDUINO_DIR</span></span>/cores/arduino/*.h) <span class="hljs-type"><span class="hljs-type">HEADERS</span></span> += <span class="hljs-string"><span class="hljs-string">$$</span></span>files(<span class="hljs-string"><span class="hljs-string">$$</span></span><span class="hljs-type"><span class="hljs-type">ARDUINO_DIR</span></span>/variants/standard/*.h) #  <span class="hljs-type"><span class="hljs-type">Arduino</span></span> <span class="hljs-type"><span class="hljs-type">Core</span></span> <span class="hljs-type"><span class="hljs-type">SOURCES</span></span> += <span class="hljs-string"><span class="hljs-string">$$</span></span>files(<span class="hljs-string"><span class="hljs-string">$$</span></span><span class="hljs-type"><span class="hljs-type">ARDUINO_DIR</span></span>/cores/arduino/*.c) <span class="hljs-type"><span class="hljs-type">SOURCES</span></span> += <span class="hljs-string"><span class="hljs-string">$$</span></span>files(<span class="hljs-string"><span class="hljs-string">$$</span></span><span class="hljs-type"><span class="hljs-type">ARDUINO_DIR</span></span>/cores/arduino/*.cpp) #   <span class="hljs-type"><span class="hljs-type">SOURCES</span></span> += <span class="hljs-string"><span class="hljs-string">$$</span></span>files(./src/*.cpp)</code> </pre><br>  Jetzt werden wir das tun, was die Arduino-IDE niemals bereitstellen wird: F√ºgen Sie der Skizze eine Header-Datei hinzu, und f√ºhren Sie dabei die gleichen Schritte wie oben aus <br><br><img src="https://habrastorage.org/webt/jq/qi/6r/jqqi6rurkb3sxnc5rgqcxc0becs.png"><br><br>  F√ºgen Sie in dieser Datei die erforderlichen Header f√ºr das Projekt hinzu. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifndef</span></span></span><span class="hljs-meta"> LED_BLINK_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LED_BLINK_H #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Arduino.h&gt; #endif // LED_BLINK_H</span></span></span></span></code> </pre><br>  Konfigurieren Sie die Pfade zu den Headern und Quellen <br><br><pre> <code class="hljs pgsql">#  INCLUDEPATH += ./<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> HEADERS += $$<span class="ruby"><span class="ruby">files(./</span><span class="hljs-keyword"><span class="ruby"><span class="hljs-keyword">include</span></span></span><span class="ruby">/*.h) </span><span class="hljs-comment"><span class="ruby"><span class="hljs-comment">#   SOURCES += $$</span></span></span></span>files(./src<span class="hljs-comment"><span class="hljs-comment">/*.cpp)</span></span></code> </pre><br>  und jetzt endlich eine skizze schreiben <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"led-blink.h"</span></span></span><span class="hljs-meta"> </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ void setup() { } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ void loop() { }</span></span></span></span></code> </pre><br>  Jetzt klicken wir mit der rechten Maustaste auf den Projektbaum und w√§hlen "Zusammenstellen". <br><br><img src="https://habrastorage.org/webt/tz/ou/ky/tzoukybm5989venm11vkijatfrc.png"><br><br>  Wir gehen zum Projektordner.  Wir haben jetzt das Verzeichnis bin /, das die Compiler-Arbeitsprodukte enth√§lt <br><br><img src="https://habrastorage.org/webt/gf/6y/d-/gf6yd-r8ddnpboia1j5jzh86x4c.png"><br><br>  Alles ist in Ordnung, es gibt ELF, was beim Debuggen und Hex f√ºr Firmware im Controller n√ºtzlich ist.  Schreiben wir nun einen weiteren Blinker mit LED an Pin 13 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"led-blink.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> LED_STAND_PIN 13 unsigned long time = 0; unsigned long DELAY = 500000; bool on = false; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ void setup() { pinMode(LED_STAND_PIN, OUTPUT); } //------------------------------------------------------------------------------ // //------------------------------------------------------------------------------ void loop() { if ( micros() &gt;= time + DELAY ) { time = micros(); on = !on; } uint8_t state = on ? HIGH : LOW; digitalWrite(LED_STAND_PIN, state); }</span></span></span></span></code> </pre><br>  Wir sammeln das Projekt, gehen zu bin /.  Wir stecken in Ihrem USB-Board.  In meinem Fall ist es Uno, auf meinem System wird ein Port mit dem Namen / dev / ttyACM0 f√ºr die Programmierung eingerichtet.  F√ºhren Sie den Befehl aus <br><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> avrdude <span class="hljs-literal"><span class="hljs-literal">-c</span></span> arduino <span class="hljs-literal"><span class="hljs-literal">-p</span></span> m328p <span class="hljs-literal"><span class="hljs-literal">-P</span></span> /dev/ttyACM0 <span class="hljs-literal"><span class="hljs-literal">-b</span></span> <span class="hljs-number"><span class="hljs-number">115200</span></span> <span class="hljs-literal"><span class="hljs-literal">-U</span></span> flash:w:led<span class="hljs-literal"><span class="hljs-literal">-blink</span></span>.hex:i</code> </pre><br>  Hier <br><br><ul><li>  -P / dev / ttyACM0 - Programmiererport <br></li><li>  -p m328p - Controller-Modell <br></li><li>  -c arduino - Programmierertyp: in die Uno-Karte integriert <br></li><li>  -b 115200 - Portgeschwindigkeit <br></li><li>  -U flash: w: led-blink.hex: i - Geben Sie den Bereich der Firmware, die Art des Vorgangs (Schreiben) und die Firmware-Datei an <br></li></ul><br>  Ein √§hnlicher Auspuff <br><br><pre> <code class="hljs coffeescript">avrdude: AVR device initialized <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ready to accept instructions Reading | <span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">######</span></span><span class="hljs-comment"><span class="hljs-comment">## | 100% 0.00s avrdude: Device signature = 0x1e950f (probably m328p) avrdude: </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">NOTE:</span></span></span><span class="hljs-comment"> "flash" memory has been specified, an erase cycle will be performed To disable this feature, specify the -D option. avrdude: erasing chip avrdude: reading input file "led-blink.hex" avrdude: writing flash (2838 bytes): Writing | ################################################## | 100% 0.47s avrdude: 2838 bytes of flash written avrdude: verifying flash memory against led-blink.hex: avrdude: load data flash data from input file led-blink.hex: avrdude: input file led-blink.hex contains 2838 bytes avrdude: reading on-chip flash data: Reading | ################################################## | 100% 0.38s avrdude: verifying ... avrdude: 2838 bytes of flash verified avrdude: safemode: Fuses OK (E:00, H:00, L:00) avrdude done. Thank you.</span></span></code> </pre><br>  sagt uns, dass der Prozess gut gelaufen ist.  Die LED blinkt mit einer Frequenz von 2 Hz. <br><br>  Grunds√§tzlich k√∂nnen Sie die Firmware in der IDE konfigurieren.  Nehmen Sie dazu die Starteinstellungen wie z <br><br><img src="https://habrastorage.org/webt/as/wu/fo/aswufovej_kbodu76teq4fnnxvi.png"><br><br>  Wenn Sie das Projekt starten (durch Dr√ºcken von Strg + R), f√ºhren wir die Firmware aus und starten sie genauso wie die Arduino IDE. <br><br><h1>  Schlussfolgerungen </h1><br>  Der beschriebene Einrichtungsprozess ist ziemlich zeitaufw√§ndig.  Im Gegenzug erhalten wir jedoch die volle Leistung einer der bemerkenswertesten IDEs, die auf Systemen existieren, die auf dem Linux-Kernel basieren (und Windows gilt auch).  Autodescription, Refactoring, bequeme Code-Navigation - all dies kann jetzt erfolgreich genutzt werden. <br><br>  Dieses Beispiel wird, wie sie sagen, "in die Stirn" gemacht.  Tats√§chlich kompiliert die Arduino IDE den Arduino Core in eine separate statische core.a-Bibliothek und verkn√ºpft sie mit der ausf√ºhrbaren Datei.  Infolgedessen ist die in der Standardumgebung gesammelte Firmware kleiner als bei der im Artikel beschriebenen Methode.  Ich muss diese Nuancen noch herausfinden.  Gleichzeitig werden wir im folgenden Artikel zu diesem Thema dar√ºber sprechen: <br><br><ul><li>  Finden Sie in der Struktur des Projekts heraus, wo sich die main () - Funktion befindet, und zeigen Sie, warum √ºberm√§√üige Schleifen auf dem Arduino schlecht sind <br></li><li>  Schritt-f√ºr-Schritt-Debugging mit Emulatoren <br></li><li>  Wir werden uns mit den in der Assembly verwendeten Compileroptionen befassen <br></li></ul><br>  Im Allgemeinen werden wir versuchen, viele Probleme zu kl√§ren, die f√ºr das Verst√§ndnis der laufenden Prozesse n√ºtzlich sind, ohne die es in Zukunft schwierig sein wird, von Arduino auf etwas Fortgeschritteneres umzusteigen. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de408261/">https://habr.com/ru/post/de408261/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de408247/index.html">KI-Rechenschaftspflicht: Die Rolle der Erl√§uterung</a></li>
<li><a href="../de408249/index.html">Auf der Autobahn I-94 in Wisconsin ist eine eigene Spur f√ºr Robomobile geplant</a></li>
<li><a href="../de408251/index.html">Nutzung der beleuchteten Atmosph√§re von Planeten zur Suche nach au√üerirdischem Leben</a></li>
<li><a href="../de408253/index.html">Das venusianische Sondenprojekt wird von der Wissenschaftsagentur finanziert</a></li>
<li><a href="../de408255/index.html">√úberpr√ºfen Sie m√∂gliche Senolitiken selbst</a></li>
<li><a href="../de408265/index.html">Updates von Boston Dynamics</a></li>
<li><a href="../de408269/index.html">Wie Synchronschauspieler funktionieren: zweiteilige Rezension</a></li>
<li><a href="../de408271/index.html">Intel Data Center Blocks - bestellt, empfangen, gebaut</a></li>
<li><a href="../de408273/index.html">Blockchain auf der Hut vor kleinen Unternehmen: So sch√ºtzen Sie sich vor Piraten und gef√§lschten Herstellern</a></li>
<li><a href="../de408275/index.html">Fantastische Indie-Spiele: Odyssey, Kerbal Space Program, ChromaGun und andere</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>