<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💆🏿 🤱🏿 💇🏽 Verwenden der HTMS-API zum Arbeiten mit einer relationalen Netzwerkdatenbank 💇🏼 🤴🏻 🧖🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Einführung 


 In dem Artikel „Relationales Netzwerkdatenmodell“ wurde ein neues Konzept der HTMS-Datenmodellierung vorgeschlagen, das eine Entwicklun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Verwenden der HTMS-API zum Arbeiten mit einer relationalen Netzwerkdatenbank</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463515/"><h2>  Einführung </h2><br><p> In dem Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„Relationales Netzwerkdatenmodell“ wurde</a> ein neues Konzept der HTMS-Datenmodellierung vorgeschlagen, das eine Entwicklung des kanonischen relationalen Modells darstellt.  Dieser Artikel zeigt Beispiele, wie es mit der Logik-Level-API praktisch verwendet werden kann. <br><br>  Die Beispiele sind an die bekannte pädagogische und methodische Lösung zum Erstellen von Websites gebunden - eine Vorlage für ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">webbasiertes Umfrageprojekt zum Django-Framework in MS Visual Studio</a> . <br><br>  Das Verständnis dieses Artikels erfordert ein grundlegendes Verständnis der Python-Sprache und des Django-Frameworks. </p><a name="habracut"></a><br><h2>  Datenbankbeschreibung </h2><br><i></i><p>  Das konzeptionelle Datenschema besteht aus vier Tabellen und einer Beschreibung der Abhängigkeiten zwischen ihnen: </p><br><img src="https://habrastorage.org/webt/wl/mq/zr/wlmqzryrnafsutb9tjyfnvsctkg.jpeg"><br><br><i></i><p>  Anmerkungen: <br><br></p><ul><li>  Sequenznummer der Antwort in der Umfrage - wird nur verwendet, um ein Abfrageset zu bilden, wenn die Seite mit der Umfrage angezeigt wird </li><li>  Der Name des auf der Website registrierten Umfrageteilnehmers wird nur für registrierte Benutzer ausgefüllt (nicht registrierte Benutzer können abstimmen und kommentieren).  Registrierte Benutzer schlagen möglicherweise vor, neue Umfragen zu erstellen. In diesem Artikel werden solche Feinheiten jedoch nicht berücksichtigt. </li></ul><br><p>  Abhängigkeiten: <br><br></p><ol><li>  Jede Umfrage (Zeile in der <b>Umfragetabelle</b> ) entspricht 2 oder mehr Antworten, d. H.  Zeilen in der Tabelle " <b>Antworten"</b> </li><li>  Jede Antwort (eine Zeile in der Antworttabelle) entspricht 0 oder mehr Kommentaren, d. H.  Zeilen in der <b>Kommentartabelle</b> </li><li>  Wenn der Site-Besucher zum ersten Mal abgestimmt hat, wird in der <b>Visiters-</b> Tabelle eine neue Zeile für ihn <b>erstellt</b> .  Benutzer werden durch die IP-Adresse identifiziert </li><li>  Nach jeder Abstimmung erhöht sich die Anzahl der abgegebenen Stimmen für die ausgewählte Antwort in der Umfrage um 1 </li><li>  Die Site sollte sich merken, welche Antworten jeder Besucher gegeben hat und welche Kommentare er hinterlassen hat: Jeder Benutzerkommentar wird in eine neue Zeile der <b>Kommentartabelle geschrieben</b> </li></ol><br><h3>  Formalisierung einer Datenbank mit ORM Django </h3><br><p>  Zunächst zeigen wir, wie die Datenbank traditionell beschrieben wird - unter Verwendung der Klassen des <b>Modells</b> Django-Paket. </p><br><img src="https://habrastorage.org/webt/dl/gq/sp/dlgqspqb1bhhf_kmpyldzgdpefu.jpeg"><br><i></i><p>  Anmerkungen: <br><br></p><ul><li>  Das Attribut "Umfragen" scheint redundant zu sein, da es möglich ist, eine Liste von Umfragen über eine Liste von Antworten abzurufen. Dies geschieht jedoch, um die Tatsache der Teilnahme an der Umfrage nicht zu verlieren, wenn die Antwort aus der Umfrage entfernt wird </li><li>  Django erstellt (oder ändert) die Datenbank physisch vor dem ersten Start des Site-Programms basierend auf den benutzerdefinierten Unterklassen von Modellen. Modell mit den Befehlen python manage.py migrate und makemigrations, die im Anwendungskontext ausgeführt werden </li></ul><br><h3>  Formalisieren einer Datenbank mit HTMS </h3><br><p>  Um eine Datenbankbeschreibung zu erstellen, müssen Sie ihre Klassen definieren: </p><br><img src="https://habrastorage.org/webt/fh/qr/qu/fhqrqugszcwxiw_gqncsw6csfae.jpeg"><br><p>  <b>Polls_db</b> ist die Hauptdatenbankklasse für die Umfragesite-Anwendung.  Die Hauptdatenbankklasse ist als Unterklasse von <b>HTdb definiert</b> , die in HTMS als Oberklasse für Anwendungsdatenbanken dient (es können mehrere vorhanden sein). </p><br><p>  <b>Umfragen, Antworten, Kommentare, Besucher</b> - Klassen für Datenbanktabellen.  <b>Tabelle</b> - eine der Hauptklassen von HTMS, dient als Oberklasse für Klassen bestimmter Tabellen. </p><br><p>  HTMS erstellt (oder öffnet eine vorhandene) Datenbank direkt während der Ausführung des Site-Programms.  Relevante Optionen: <br><br></p><ol><li>  <i>Erstellen Sie eine neue Datenbank</i> mit dem Namen "polls": <br>  <b>my_db</b> = <b>Polls_db</b> (db_name = "polls", new = <i>True</i> ) <br><ul><li>  Die Hauptdatenbankdateien ("leer") werden physisch erstellt. </li><li>  Im OP wird das Hauptdatenbankobjekt <b>my_db</b> erstellt - eine Instanz der Klasse <b>Polls_db</b> . </li></ul><br></li><li>  <i>Öffnen Sie eine Datenbank</i> mit dem Namen "polls": <br>  <b>my_db</b> = <b>Polls_db</b> (db_name = "polls") <br><ul><li>  Die Hauptdateien der vorhandenen Datenbank werden physisch geöffnet. </li><li>  Das Objekt <b>my_db</b> wird im OP erstellt, dessen Attribute die grundlegenden Informationen über die aus ihren Dateien gelesene Datenbank enthalten. </li></ul></li></ol><br><p>  Wenn während der Initialisierung einer Instanz der <b>HTdb-</b> Unterklasse eine <i>neue</i> Datenbank erstellt wird, muss die tatsächliche Struktur (Schema) auf logischer Ebene ermittelt werden.  Dies erfolgt einmal beim ersten Start der Site, jedoch im Gegensatz zur ORM-Technologie im Programmcode der Site selbst. </p><br><ol><li>  Definieren Sie alle Datenbankattribute - ihre Namen und Datentypen: <br><img src="https://habrastorage.org/webt/2b/dl/ri/2bdlrimbu1jnngm2kxemt5wgda4.jpeg"><br></li><li>  Definieren Sie Attributtypen mit Links (der Rest ist standardmäßig vom Typ 'Ursache'): <br><img src="https://habrastorage.org/webt/ko/wd/bh/kowdbh_ottrns8agjrki1eghnao.jpeg"><br></li><li>  Definieren Sie Tabellenobjekte und wählen Sie Attribute (Spalten) für sie aus der Menge aller Attribute des GT aus: <br><img src="https://habrastorage.org/webt/ya/j6/kq/yaj6kqntsytgh8y7bc6y3vqhcas.jpeg"><br></li></ol><br><p>  Die Ausführung dieses Codes führt zur Bildung der Datenbankstruktur und zur Erstellung der entsprechenden Dateien auf dem Server, wenn die Datenbank neu ist. </p><br><p>  Wenn die Datenbank bereits erstellt wurde, müssen Sie zum Arbeiten damit nur Instanzen der Tabellenklassen erstellen: <br><img src="https://habrastorage.org/webt/rt/hl/to/rthltoiqj-gyxszjm3rbfb4fyhe.jpeg"><br></p><br><h3>  Vergleich von HTMS und ORM </h3><br><p>  Offensichtlich ist die Formalisierung des Datenschemas auf logischer Ebene in HTMS und ORM ähnlich, aber es gibt eine Reihe grundlegender Unterschiede. </p><br><p>  In HTMS werden Attribute und Datentypen als ein einzelnes Leerzeichen definiert, in ORM sind sie an separate Tabellen gebunden. </p><br><p>  Der gesamte Satz von Datenbankattributen in ORM wird "additiv" erstellt, da Modelle definiert sind, können sie nicht programmgesteuert geändert werden, sondern in HTMS für die gesamte Datenbank als Ganzes, und Sie können sie in der Anwendung ohne Migration hinzufügen oder entfernen. </p><br><p>  Die Attribute für jedes einzelne Modell im ORM sind statisch, während sie im HTMS dynamisch sind.  Tabellenstrukturen in HTMS werden als Projektionen eines einzelnen Attributraums definiert - sie sind einfacher und klarer als in ORM. HTMS-Website-Algorithmen können Optionen zum Ändern der ursprünglichen Datenbankstruktur bereitstellen, z. B. Hinzufügen neuer Attribute oder Löschen vorhandener Attribute, was in der ORM-Technologie im Prinzip unmöglich ist . </p><br><p>  Beachten Sie, dass die HTMS-Technologie, wenn sie im Django-Framework angewendet wird, nur ihre Funktionen erweitert und nicht auf die Verwendung von ORM verzichtet.  Beispielsweise kann das gesamte hervorragende Authentifizierungssystem von Django verwendet werden, das auf den Modellen und der <b>Benutzerklasse</b> (aus dem Modul django.contrib.auth.models) basiert.  In der Realität ist eine Django-basierte Site mit HTMS normalerweise ein "Multimodell", dh ein Teil der Gesamtdatenbank ist rein relational, der andere relationales Netzwerk. </p><br><h3>  HTMS-Verwendungsbeispiele auf logischer Ebene für Umfragedatenbanken </h3><br><p>  <u>Dienstprogrammfunktion zum erstmaligen Füllen einer Datenbank aus einer JSON-Datei</u> <br><img src="https://habrastorage.org/webt/gd/0f/yz/gd0fyzhrekn_qinsraeguw9pjom.jpeg"></p><br><p>  <u>Die Funktion zum Bilden einer Reihe von Objekten mit Abfragen (Abfragesatz für klassenbasierte Ansicht - CBV-Abfragen)</u> <br><img src="https://habrastorage.org/webt/lm/dx/rv/lmdxrv7vkt0cyk3idff_c9jhwue.jpeg"></p><br><p>  <u>Die Funktion zum Bilden einer Reihe von Objekten mit Umfrageantworten (Abfragesatz für CBV-Umfrageantworten)</u> <br><img src="https://habrastorage.org/webt/ll/xt/cb/llxtcbw3dwy4j71iskv_lexlm28.jpeg"></p><br><p>  <u>Die Funktion der Bildung einer Reihe von Objekten mit den Ergebnissen der Abstimmung über eine Umfrage (Queryset für CBV)</u> <br><img src="https://habrastorage.org/webt/nr/yy/7x/nryy7xeexio1otakqqqihcat_3m.jpeg"></p><br><u></u><p>  Funktion zum Aufzeichnen des Abstimmungsergebnisses in der Datenbank (über URL aus dem Abstimmungsformular aufgerufen) </p><br><img src="https://habrastorage.org/webt/cv/ak/8m/cvak8myruqftvsvaspcjiuudbxs.jpeg"><br><hr>  Wir hoffen, dass die Leser die Einfachheit und Natürlichkeit der Arbeit mit Daten in HTMS zu schätzen wissen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463515/">https://habr.com/ru/post/de463515/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463503/index.html">Warum ist moderne Webentwicklung so kompliziert? Teil 1</a></li>
<li><a href="../de463505/index.html">Warum Systemadministratoren DevOps-Ingenieure werden sollten</a></li>
<li><a href="../de463507/index.html">Die Nieren sind der Ausweg</a></li>
<li><a href="../de463511/index.html">"Brennen, brennen Sie deutlich, bis es ausgeht" oder Was ist die Gefahr des emotionalen Burnouts Ihrer Mitarbeiter?</a></li>
<li><a href="../de463513/index.html">Beste Webentwicklungs-Frameworks im Jahr 2019</a></li>
<li><a href="../de463525/index.html">Selen, Selenoid, Selenid, Selendroid ... Was bedeutet das alles?</a></li>
<li><a href="../de463527/index.html">Pop up! Transkribiert auf iOS</a></li>
<li><a href="../de463533/index.html">Was jeder Entwickler von Anfang an wissen sollte</a></li>
<li><a href="../de463535/index.html">Überprüfen des Quellcodes der .NET Core Libraries mit dem PVS-Studio Static Analyzer</a></li>
<li><a href="../de463537/index.html">Überprüfung des Quellcodes von .NET Core-Bibliotheken durch den statischen Analysator PVS-Studio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>