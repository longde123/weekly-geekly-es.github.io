<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📬 👇🏿 🕷️ Relationale Programmierung: Schmerz, Interesse und wieder Schmerz 🐥 😔 🍋</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im vorherigen Beitrag haben wir ausführlich erklärt, was wir Studenten im Bereich "Industrielle Programmierung" beibringen. Für diejenigen, deren Inte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Relationale Programmierung: Schmerz, Interesse und wieder Schmerz</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/hsespb/blog/441114/"> Im vorherigen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beitrag haben</a> wir ausführlich erklärt, was wir Studenten im Bereich "Industrielle Programmierung" beibringen.  Für diejenigen, deren Interessengebiet in einem eher theoretischen Bereich liegt, beispielsweise durch neue Programmierparadigmen oder abstrakte Mathematik, die in der theoretischen Programmierforschung verwendet werden, gibt es eine weitere Spezialisierung - „Programmiersprachen“. <br><br>  Heute werde ich über meine Forschung auf dem Gebiet der relationalen Programmierung sprechen, die ich an der Universität und als studentischer Forscher im Labor für Sprachwerkzeuge JetBrains Research mache. <br><br>  Was ist relationale Programmierung?  Normalerweise führen wir eine Funktion mit Argumenten aus und erhalten das Ergebnis.  Und im relationalen Fall können Sie das Gegenteil tun: Korrigieren Sie das Ergebnis und ein Argument und erhalten Sie das zweite Argument.  Die Hauptsache ist, den Code richtig zu schreiben, geduldig zu sein und einen guten Cluster zu haben. <br><br><img src="https://habrastorage.org/webt/_u/8b/t2/_u8bt2bceznm8e2ujbrvhwn8awy.jpeg"><br><a name="habracut"></a><br><h2>  Über mich </h2><br>  Mein Name ist Dmitry Rozplokhas, ich bin ein Erstsemester der HSE in St. Petersburg und habe letztes Jahr das Bachelor-Programm der Akademischen Universität im Bereich „Programmiersprachen“ abgeschlossen.  Seit dem dritten Studienjahr bin ich auch Forschungsstudent im JetBrains Research-Labor für Sprachwerkzeuge. <br><br><h2>  Relationale Programmierung </h2><br><h3>  Allgemeine Fakten </h3><br>  Relationale Programmierung ist, wenn Sie anstelle von Funktionen die Beziehung zwischen Argumenten und dem Ergebnis beschreiben.  Wenn die Sprache dafür geschärft ist, können Sie bestimmte Boni erhalten, z. B. die Möglichkeit, die Funktion in die entgegengesetzte Richtung auszuführen (stellen Sie dadurch die möglichen Werte der Argumente wieder her). <br><br>  Im Allgemeinen kann dies in jeder logischen Sprache erfolgen, aber das Interesse an relationaler Programmierung entstand gleichzeitig mit dem Aufkommen einer minimalistischen rein logischen Sprache <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">miniKanren vor</a> etwa zehn Jahren, die es ermöglichte, solche Beziehungen bequem zu beschreiben und zu verwenden. <br><br>  Hier sind einige der fortschrittlichsten Anwendungsfälle: Sie können einen Proof Checker schreiben und ihn verwenden, um Beweise zu finden ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Near et al., 2008</a> ) oder einen Interpreter für eine bestimmte Sprache erstellen und damit Testsuite-Programme generieren ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Byrd et al., 2017</a> ). <br><br><h3>  Syntax- und Spielzeugbeispiel </h3><br>  miniKanren ist eine kleine Sprache, zur Beschreibung von Beziehungen werden nur grundlegende mathematische Konstruktionen verwendet.  Dies ist eine eingebettete Sprache, ihre Grundelemente sind eine Bibliothek für eine externe Sprache, und kleine miniKanren-Programme können innerhalb eines Programms in einer anderen Sprache verwendet werden. <br><br>  Fremdsprachen geeignet für miniKanren, eine ganze Reihe.  Ursprünglich gab es Schema, wir arbeiten mit der Version für Ocaml ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OCanren</a> ), und die vollständige Liste kann auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">minikanren.org</a> eingesehen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> .  Beispiele in diesem Artikel beziehen sich auch auf OCanren.  Viele Implementierungen fügen Hilfsfunktionen hinzu, aber wir werden uns nur auf die Kernsprache konzentrieren. <br><br>  Beginnen wir mit den Datentypen.  Herkömmlicherweise können sie in zwei Typen unterteilt werden: <br><br><ul><li>  Konstanten sind einige Daten aus der Sprache, in die wir eingebettet sind.  Zeichenfolgen, Zahlen, sogar Arrays.  Für die grundlegenden miniKanren ist dies jedoch alles eine Blackbox. Konstanten können nur auf Gleichheit überprüft werden. <br></li><li>  Ein "Begriff" ist ein Tupel aus mehreren Elementen.  Wird häufig wie Datenkonstruktoren in Haskell verwendet: Datenkonstruktor (Zeichenfolge) plus null oder mehr Parameter.  OCanren verwendet reguläre Datenkonstruktoren von OCaml. <br></li></ul><br>  Wenn wir beispielsweise mit Arrays in miniKanren selbst arbeiten möchten, muss dies in Begriffen beschrieben werden, die funktionalen Sprachen ähnlich sind - als einfach verknüpfte Liste.  Eine Liste ist entweder eine leere Liste (angezeigt durch einen einfachen Begriff) oder ein Paar aus dem ersten Element der Liste („Kopf“) und den verbleibenden Elementen („Schwanz“). <br><br><pre><code class="plaintext hljs">let emptyList = Nil let list_123 = Cons (1, Cons (2, Cons (3, Nil)))</code> </pre> <br>  Ein miniKanren-Programm ist die Beziehung zwischen einigen Variablen.  Beim Start gibt das Programm alle möglichen Werte der Variablen in allgemeiner Form an.  Bei Implementierungen können Sie häufig die Anzahl der Antworten in der Ausgabe begrenzen, z. B. nur die erste finden. Die Suche wird nicht immer beendet, nachdem alle Lösungen gefunden wurden. <br><br>  Sie können mehrere Beziehungen schreiben, die durch einander definiert und sogar rekursiv als Funktionen aufgerufen werden.  Zum Beispiel unten wir statt Funktion <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mi>m</mi><mi>i</mi><mi>t</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.63ex" height="2.66ex" viewBox="0 -832 8451.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-28" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="3516" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-2C" x="4046" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-62" x="4491" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-29" x="4920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-2192" x="5587" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-6D" x="6866" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-69" x="7744" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-74" x="8090" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy="false">(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">)</mo><mo stretchy="false">→</mo><mi>m</mi><mi>i</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> append (a, b) → mit </script>  Definieren Sie die Beziehung <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>o</mi><mo stretchy=&quot;false&quot;>(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="15.502ex" height="2.66ex" viewBox="0 -832 6674.3 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-70" x="529" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-70" x="1033" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-65" x="1536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-6E" x="2003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-64" x="2603" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-6F" x="3127" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-28" x="3612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="4002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-2C" x="4531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-62" x="4976" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-2C" x="5406" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-63" x="5851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-29" x="6284" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mi>o</mi><mo stretchy="false">(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>c</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> appendo (a, b, c) </script>  : Liste <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>c</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.007ex" height="1.455ex" viewBox="0 -520.7 433.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-63" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>c</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> c </script>  ist eine Verkettung von Listen <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> a </script>  und <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> b </script>  .  Funktionen, die Beziehungen zurückgeben, enden traditionell mit einem „o“, um sie von normalen Funktionen zu unterscheiden. <br><br>  Eine Beziehung wird als eine Aussage bezüglich ihrer Argumente geschrieben.  Wir haben <b>vier grundlegende Operationen</b> : <br><br><ul><li>  Vereinheitlichung oder Gleichheit (===) zweier Begriffe, Begriffe können Variablen enthalten.  Sie können beispielsweise die Relationsliste schreiben <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>l</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.693ex" height="2.057ex" viewBox="0 -780.1 298.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-6C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>l</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> l </script>  besteht aus einem Element <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> x </script>  ": <br><br><pre> <code class="plaintext hljs">let isSingletono xl = l === Cons (x, Nil)</code> </pre></li><li>  Konjunktion (logisches „und“) und Disjunktion (logisches „oder“) - wie in der normalen Logik.  OCanren werden als &amp;&amp;&amp; und ||| bezeichnet.  Grundsätzlich gibt es in MiniKanren keine logische Ablehnung. <br></li><li>  Neue Variablen hinzufügen.  In der Logik ist es ein Quantifizierer der Existenz.  Um beispielsweise die Liste auf Nicht-Leere zu überprüfen, müssen Sie überprüfen, ob die Liste aus einem Kopf und einem Schwanz besteht.  Sie sind keine Argumente der Beziehung, daher müssen Sie neue Variablen erstellen: <br><br><pre> <code class="plaintext hljs">let nonEmptyo l = fresh (ht) (l === Cons (h, t))</code> </pre></li></ul><br>  Eine Beziehung kann sich rekursiv aufrufen.  Beispielsweise müssen Sie das Element "Beziehung" definieren <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> x </script>  liegt auf der Liste. "  Wir werden dieses Problem lösen, indem wir triviale Fälle wie in funktionalen Sprachen analysieren: <br><br><ol><li>  Oder der Kopf der Liste ist <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-9"> x </script><br></li><li>  Entweder <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.33ex" height="1.455ex" viewBox="0 -520.7 572.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-78" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> x </script>  liegt im Schwanz <br></li></ol><br><pre> <code class="plaintext hljs">let membero lx = fresh (ht) ( (l === Cons (h, t)) &amp;&amp;&amp; (x === h ||| membero tx) )</code> </pre><br>  Die Basisversion der Sprache basiert auf diesen vier Operationen.  Es gibt auch Erweiterungen, mit denen Sie andere Vorgänge verwenden können.  Am nützlichsten ist die Ungleichheitsbeschränkung zum Festlegen der Ungleichung zweier Terme (= / =). <br><br>  Trotz des Minimalismus ist miniKanren eine sehr ausdrucksstarke Sprache.  Betrachten Sie beispielsweise die relationale Verkettung zweier Listen.  Die Funktion zweier Argumente wird zu einer dreifachen Beziehung " <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.227ex" height="2.057ex" viewBox="0 -780.1 959 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-62" x="529" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> ab </script>  ist eine Verkettung von Listen <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> a </script>  und <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>b</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.998ex" height="2.057ex" viewBox="0 -780.1 429.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-62" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> b </script>  ". <br><br><pre> <code class="plaintext hljs">let appendo ab ab = (a === Nil &amp;&amp;&amp; ab === b) ||| (fresh (ht tb) (*  :  fresh   &amp;&amp;&amp; *) (a = Cons (h, t)) (appendo tb tb) (ab === Cons (h, tb)))</code> </pre><br>  Die Lösung unterscheidet sich strukturell nicht davon, wie wir sie in einer funktionalen Sprache schreiben würden.  Wir analysieren zwei Fälle, die durch eine Klausel vereint sind: <br><br><ol><li>  Wenn die erste Liste leer ist, sind die zweite Liste und das Ergebnis der Verkettung gleich. <br></li><li>  Wenn die erste Liste nicht leer ist, analysieren wir sie in Kopf und Schwanz und konstruieren das Ergebnis mithilfe eines rekursiven Aufrufs der Beziehung. <br></li></ol><br>  Wir können eine Anfrage zu dieser Beziehung stellen und das erste und zweite Argument korrigieren - wir erhalten die Verkettung von Listen: <br><br><pre> <code class="plaintext hljs">run 1 (λ q -&gt; appendo (Cons (1, Cons (2, Nil))) (Cons (3, Cons (4, Nil))) q)</code> </pre> <br>  ⇒ <br><pre> <code class="plaintext hljs">q = Cons (1, Cons (2, Cons (3, Cons (4, Nil))))</code> </pre> <br>  Wir können das letzte Argument beheben - wir teilen alle Partitionen dieser Liste in zwei Teile. <br><br><pre> <code class="plaintext hljs">run 4 (λ qr -&gt; appendo qr (Cons (1, Cons (2, Cons (3, Nil)))))</code> </pre> <br>  ⇒ <br><pre> <code class="plaintext hljs">q = Nil, r = Cons (1, Cons (2, Cons (3, Nil))) | q = Cons (1, Nil), r = Cons (2, Cons (3, Nil)) | q = Cons (1, Cons (2, Nil)), r = Cons (3, Nil) | q = Cons (1, Cons (2, Cons (3, Nil))), r = Nil</code> </pre><br>  Sie können alles andere tun.  Ein etwas ungewöhnlicheres Beispiel, in dem wir nur einen Teil der Argumente korrigieren: <br><br><pre> <code class="plaintext hljs">run 1 (λ qr -&gt; appendo (Cons (1, Cons (q, Nil))) r (Cons (1, Cons (2, Cons (3, Cons (4, Nil))))))</code> </pre> <br>  ⇒ <br><pre> <code class="plaintext hljs">q = 2, r = Cons (3, Cons (4, Nil))</code> </pre> <br><br><h3>  Wie funktioniert es? </h3><br>  Aus theoretischer Sicht gibt es hier nichts Beeindruckendes: Sie können jederzeit alle möglichen Optionen nach allen Argumenten durchsuchen und für jede Menge prüfen, ob sie sich in Bezug auf eine bestimmte Funktion / Beziehung so verhalten, wie wir es möchten (siehe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Der Algorithmus des British Museum"</a> ). .  Von Interesse ist die Tatsache, dass hier die Suche (mit anderen Worten die Suche nach einer Lösung) nur die Struktur der beschriebenen Beziehung verwendet, wodurch sie in der Praxis relativ effektiv sein kann. <br><br>  Die Suche bezieht sich auf das Sammeln von Informationen über verschiedene Variablen im aktuellen Zustand.  Wir wissen entweder nichts über jede Variable oder wir wissen, wie sie in Begriffen, Werten und anderen Variablen ausgedrückt wird.  Zum Beispiel: <br><br> <code>b = Cons (x, y) <br> c = Cons (10, z) <br> x = ? <br> y = ? <br> z = ? <br></code> <br>  Während der Vereinheitlichung betrachten wir zwei Begriffe unter Berücksichtigung dieser Informationen und aktualisieren entweder den Status oder beenden die Suche, wenn zwei Begriffe nicht vereinheitlicht werden können.  Wenn Sie beispielsweise die Vereinigung b = c abschließen, erhalten Sie neue Informationen: x = 10, y = z.  Aber die Vereinigung b = Nil wird einen Widerspruch verursachen. <br><br>  Wir suchen nacheinander in Konjunktionen (so dass sich Informationen ansammeln), und in einer Disjunktion teilen wir die Suche in zwei parallele Zweige auf und gehen abwechselnd in diesen Schritten weiter - dies ist die sogenannte Interleaving-Suche.  Dank dieser Abwechslung ist die Suche abgeschlossen - jede geeignete Lösung wird nach einer begrenzten Zeit gefunden.  In der Prolog-Sprache ist dies beispielsweise nicht der Fall.  Es macht so etwas wie ein tiefes Crawlen (das an einem unendlichen Zweig hängen kann), und das Verschachteln der Suche ist im Wesentlichen eine knifflige Modifikation des breiten Crawls. <br><br>  Lassen Sie uns nun sehen, wie die erste Abfrage aus dem vorherigen Abschnitt funktioniert.  Da Appendo rekursive Aufrufe hat, fügen wir Variablen Indizes hinzu, um sie zu unterscheiden.  Die folgende Abbildung zeigt den Aufzählungsbaum.  Pfeile geben die Richtung der Verbreitung von Informationen an (mit Ausnahme der Rückkehr von der Rekursion).  Zwischen Disjunktionen werden Informationen nicht verteilt, und zwischen Konjunktionen wird von links nach rechts verteilt. <br><br><img src="https://habrastorage.org/webt/3j/np/fg/3jnpfgkkgbyyf5-or5g_noicxg4.png"><br><br><ol><li>  Wir beginnen mit einem externen Anruf bei Appendo.  Der linke Zweig der Disjunktion stirbt aufgrund von Kontroversen: Liste <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.23ex" height="1.455ex" viewBox="0 -520.7 529.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-14"> a </script>  nicht leer. <br></li><li>  Im rechten Zweig werden Hilfsvariablen eingeführt, die dann zum „Parsen“ der Liste verwendet werden <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.284ex" height="1.696ex" viewBox="0 -520.7 983.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-31" x="748" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-15"> a_1 </script>  an Kopf und Schwanz. <br></li><li>  Danach erfolgt der Appendo-Rekursionsaufruf für a = [2], b = [3, 4], ab =?, In denen ähnliche Operationen auftreten. <br></li><li>  Aber im dritten Appendo-Aufruf haben wir bereits a = [], b = [3,4], ab =?, Und dann funktioniert die linke Disjunktion einfach, wonach wir die Informationen ab = b erhalten.  Aber im rechten Zweig gibt es einen Widerspruch. <br></li><li>  Jetzt können wir alle verfügbaren Informationen aufschreiben und die Antwort wiederherstellen, indem wir die Werte der Variablen ersetzen: <br><br> <code>a_1 = [1, 2] <br> b_1 = [3, 4] <br> ab_1 = Cons h_1 tb_1 <br> h_1 = 1 <br> a_2 = t_1 = [2] <br> b_2 = b_1 = [3, 4] <br> ab_2 = tb_1 = Cons h_2 tb_2 <br> h_2 = 2 <br> a_3 = t_2 = Nil <br> b_3 = b_2 = b_1 = [3, 4] <br> ab_3 = tb_2 = b_3 = [3, 4] <br></code> <br></li><li>  Daraus folgt <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>a</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.282ex" height="2.298ex" viewBox="0 -780.1 1412.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-61" x="0" y="0"></use><g transform="translate(529,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><msub><mi>b</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-16"> ab_1 </script>  = Nachteile (1, Nachteile (2, [3, 4])) = [1, 2, 3, 4] nach Bedarf. <br></li></ol><br><br><h2>  Was ich im Grundstudium gemacht habe </h2><br><h3>  Alles verlangsamt sich </h3><br>  Wie immer: Sie versprechen Ihnen, dass alles sehr aussagekräftig sein wird, aber in Wirklichkeit müssen Sie sich an die Sprache anpassen und alles auf besondere Weise schreiben (unter Berücksichtigung der Art und Weise, wie alles ausgeführt wird), damit zumindest etwas funktioniert, mit Ausnahme der einfachsten Beispiele.  Das ist enttäuschend. <br><br>  Eines der ersten Probleme, mit denen ein unerfahrener miniKanren-Programmierer konfrontiert ist, besteht darin, dass es sehr stark von der Reihenfolge abhängt, in der Sie die Bedingungen (Konjunktionen) im Programm beschreiben.  Mit einer Bestellung ist alles in Ordnung, aber zwei Konjunktionen wurden getauscht und alles begann sehr langsam zu arbeiten oder endete überhaupt nicht.  Das ist unerwartet. <br><br>  Selbst im Beispiel mit Appendo endet das Starten in die entgegengesetzte Richtung (Generieren der Aufteilung der Liste in zwei) nur, wenn Sie explizit angeben, wie viele Antworten Sie möchten (die Suche wird beendet, nachdem die erforderliche Anzahl gefunden wurde). <br><br>  Angenommen, wir fixieren die ursprünglichen Variablen wie folgt: a =?, B =?, Ab = [1, 2, 3] (siehe Abbildung unten). Im zweiten Zweig werden diese Informationen während des rekursiven Aufrufs in keiner Weise verwendet (die Variable ab und Einschränkungen für <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>h</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.393ex" height="2.298ex" viewBox="0 -780.1 1030.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-68" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-31" x="815" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>h</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> h_1 </script>  und <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>t</mi><msub><mi>b</mi><mn>1</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.891ex" height="2.298ex" viewBox="0 -780.1 1244.9 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-74" x="0" y="0"></use><g transform="translate(361,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-31" x="607" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi><msub><mi>b</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-18"> tb_1 </script>  erscheinen erst nach diesem Aufruf).  Daher sind beim ersten rekursiven Aufruf alle Argumente freie Variablen.  Dieser Aufruf generiert alle Arten von Tripeln aus zwei Listen und deren Verkettung (und diese Generation wird niemals enden), und dann werden unter ihnen diejenigen ausgewählt, für die das dritte Element genau so ausfiel, wie wir es brauchen. <br><br><img src="https://habrastorage.org/webt/pg/gn/jg/pggnjghrld84iyiybo9au0nyilk.png"><br><br>  Alles ist nicht so schlimm, wie es auf den ersten Blick scheinen mag, weil wir diese Dreiergruppen in großen Gruppen sortieren werden.  Listen mit der gleichen Länge, aber unterschiedlichen Elementen unterscheiden sich nicht vom Standpunkt der Funktion, daher fallen sie in eine Lösung - anstelle der Elemente gibt es freie Variablen.  Trotzdem werden wir weiterhin alle möglichen Listenlängen sortieren, obwohl wir nur eine benötigen und wissen, welche.  Dies ist eine sehr irrationale Verwendung (Nichtverwendung) von Informationen bei der Suche. <br><br>  Dieses spezielle Beispiel lässt sich leicht beheben: Sie müssen nur den rekursiven Aufruf an das Ende verschieben, und alles funktioniert ordnungsgemäß.  Vor dem rekursiven Aufruf findet eine Vereinigung mit der Variablen ab statt, und der rekursive Aufruf erfolgt vom Ende der angegebenen Liste aus (als normale rekursive Funktion).  Diese Definition mit einem rekursiven Aufruf am Ende funktioniert in alle Richtungen: Für den rekursiven Aufruf schaffen wir es, alle möglichen Informationen über die Argumente zu sammeln. <br><br>  In einem etwas komplexeren Beispiel existiert jedoch bei mehreren sinnvollen Aufrufen nicht eine bestimmte Reihenfolge, für die alles in Ordnung ist.  Das einfachste Beispiel: Erweitern einer Liste mithilfe von Verkettung.  Wir korrigieren das erste Argument - wir brauchen diese bestimmte Reihenfolge, wir korrigieren das zweite - wir müssen die Anrufe tauschen.  Andernfalls wird lange gesucht und die Suche wird nicht beendet. <br><br><pre> <code class="plaintext hljs">reverso x xr = (x === Nil &amp;&amp;&amp; xr == Nil) ||| (fresh (ht tr) (x === Cons (h, t)) (reverso t tr) (appendo tr (Cons (h, Nil)) xr))</code> </pre><br>  Dies liegt daran, dass sich verschachtelte Suchprozesse nacheinander verbinden und niemand darüber nachdenken kann, wie dies anders gemacht werden kann, ohne die akzeptable Effizienz zu verlieren, obwohl sie es versucht haben.  Natürlich werden eines Tages alle Lösungen gefunden, aber mit der falschen Reihenfolge werden sie so unrealistisch lange gesucht, dass dies keinen praktischen Sinn hat. <br><br>  Es gibt Techniken zum Schreiben von Programmen, um dieses Problem zu vermeiden.  Viele von ihnen erfordern jedoch besondere Fähigkeiten und Vorstellungskraft, und das Ergebnis sind sehr große Programme.  Ein Beispiel ist der Begriff Größenbegrenzungstechnik und die Definition der binären Division mit Rest durch Multiplikation mit ihrer Hilfe.  Anstatt dumm eine mathematische Definition zu schreiben <br><br><pre> <code class="plaintext hljs">divo nmqr = (fresh (mq) (multo mq mq) (pluso mq rn) (lto rm))</code> </pre><br>  Ich muss eine rekursive Definition von 20 Zeilen + eine große Hilfsfunktion schreiben, deren Lesen unrealistisch ist (ich verstehe immer noch nicht, was dort getan wird).  Es ist in Will Birds <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dissertation</a> im Abschnitt Pure Binary Arithmetic zu finden. <br><br>  In Anbetracht des Vorstehenden möchte ich eine Art Suchmodifikation entwickeln, damit auch einfache und natürlich geschriebene Programme funktionieren. <br><br><h3>  Optimieren </h3><br>  Wir haben festgestellt, dass die Suche nicht beendet wird, wenn alles schlecht ist, es sei denn, Sie geben explizit die Anzahl der Antworten an und brechen sie ab.  Deshalb haben sie beschlossen, genau mit der Unvollständigkeit der Suche zu kämpfen - es ist viel einfacher zu konkretisieren als „es funktioniert lange“.  Im Allgemeinen möchte ich natürlich nur die Suche beschleunigen, aber die Formalisierung ist viel schwieriger, daher haben wir mit einer weniger ehrgeizigen Aufgabe begonnen. <br><br>  In den meisten Fällen tritt bei divergierenden Suchvorgängen eine Situation auf, die leicht zu verfolgen ist.  Wenn eine Funktion rekursiv aufgerufen wird und bei einem rekursiven Aufruf die Argumente gleich oder weniger spezifisch sind, wird beim rekursiven Aufruf erneut eine solche Unteraufgabe generiert und es tritt eine unendliche Rekursion auf.  Formal klingt es so: Es gibt eine Substitution, bei der auf die neuen Argumente die alten angewendet werden.  In der folgenden Abbildung ist ein rekursiver Aufruf beispielsweise eine Verallgemeinerung des Originals: Sie können ihn ersetzen <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>c</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.061ex" height="1.696ex" viewBox="0 -520.7 887.4 730.2" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-32" x="613" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>c</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-19"> c_2 </script>  = [x, 3], <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>d</mi><mn>2</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.263ex" height="2.298ex" viewBox="0 -780.1 974.4 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMATHI-64" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/hsespb/blog/441114/&amp;usg=ALkJrhhWt3ei0H6SrPXiSv_NvNhb43rMlw#MJMAIN-32" x="736" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>d</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-20"> d_2 </script>  = x und erhalte den ursprünglichen Aufruf. <br><br><img src="https://habrastorage.org/webt/kh/22/mk/kh22mkjyiwzn3as3manr6jftdrm.png"><br><br>  Es kann festgestellt werden, dass diese Situation auch in den Divergenzbeispielen auftritt, die wir bereits getroffen haben.  Wie ich bereits geschrieben habe, wird beim Ausführen von Appendo in die entgegengesetzte Richtung ein rekursiver Aufruf mit freien Variablen anstelle aller Variablen ausgeführt, was natürlich weniger spezifisch ist als der ursprüngliche Aufruf, in dem das dritte Argument festgelegt wurde. <br><br>  Wenn wir mit x =?  und xr = [1, 2, 3] ist ersichtlich, dass der erste rekursive Aufruf erneut mit zwei freien Variablen erfolgt, so dass offensichtlich wieder neue Argumente auf die vorherigen übertragen werden können. <br><br><pre> <code class="plaintext hljs">reverso x x_r  (* x = ?, x_r = [1, 2, 3] *) fresh (ht t_r) (x === Cons (h, t)) (* x_r = [1, 2, 3] = Cons 1 (Cons 2 (Cons 3 Nil))) x = Cons (h, t) *) (reverso t t_r) (* :   t=x, t_r=[1,2,3],    *)</code> </pre><br>  Anhand dieses Kriteriums können wir Abweichungen im Prozess der Programmausführung erkennen, verstehen, dass bei dieser Reihenfolge alles schlecht ist, und sie dynamisch in eine andere ändern.  Dadurch wird im Idealfall für jeden Anruf genau die richtige Reihenfolge ausgewählt. <br>  Sie können es naiv tun: Wenn im Konjunkt Divergenz festgestellt wird, hämmern wir alle Antworten ein, die er bereits gefunden hat, und verschieben die Ausführung auf später, wobei wir den nächsten Konjunkt „überspringen“.  Wenn wir es dann weiter ausführen, sind möglicherweise bereits mehr Informationen bekannt, und es treten keine Abweichungen auf.  In unseren Beispielen führt dies zu den gewünschten Swap-Konjunktionen. <br><br>  Es gibt weniger naive Möglichkeiten, um beispielsweise die bereits geleistete Arbeit nicht zu verlieren und die Leistung zu verschieben.  Bereits mit der dümmsten Variante der Änderung der Reihenfolge ist die Divergenz in allen einfachen Beispielen verschwunden, die unter der Nichtkommutativität der Konjunktion leiden, die wir kennen, einschließlich: <br><br><ul><li>  Sortieren der Liste der Zahlen (es ist auch die Erzeugung aller Permutationen der Liste), <br></li><li>  Peano-Arithmetik und binäre Arithmetik, <br></li><li>  Erzeugung von Binärbäumen einer bestimmten Größe. <br></li></ul><br>  Dies war eine unerwartete Überraschung für uns.  Neben der Divergenz kämpft die Optimierung auch gegen Programmverlangsamungen.  Die folgenden Diagramme zeigen die Ausführungszeit von Programmen mit zwei unterschiedlichen Ordnungen in Konjunktionen (relativ gesehen eine der besten und eine von vielen schlechten).  Es wurde auf einem Computer mit der Konfiguration von Intel Core i7 CPU M 620, 2,67 GHz x 4, 8 GB RAM mit dem Betriebssystem Ubuntu 16.04 gestartet. <br><br>  Wenn die <b>Reihenfolge bereits optimal ist</b> (wir wählen sie von Hand aus), verlangsamt die Optimierung die Ausführung ein wenig, ist jedoch nicht kritisch <br><img src="https://habrastorage.org/webt/3a/si/4z/3asi4zevbggj_7hmjk6j2lilk0u.png"><br><br>  Wenn die <b>Reihenfolge jedoch nicht optimal ist</b> (z. B. nur zum Starten in die entgegengesetzte Richtung geeignet), wird sie bei der Optimierung viel schneller ausgeführt.  Die Kreuze bedeuten, dass wir einfach nicht auf das Ende warten konnten, es funktioniert viel länger <br><img src="https://habrastorage.org/webt/yw/-_/sn/yw-_snesnrnadqet8zmgbbpk3la.png"><br><br><h3>  Wie man nichts kaputt macht </h3><br>  All dies beruhte ausschließlich auf Intuition und wir wollten es streng beweisen.  Theorie doch. <br><br>  Um etwas zu beweisen, brauchen wir eine formale Semantik der Sprache.  Wir haben die operative Semantik für miniKanren beschrieben.  Dies ist eine vereinfachte und mathematisierte Version einer realen Sprachimplementierung.  Es wird eine sehr eingeschränkte (daher einfach zu verwendende) Version verwendet, in der Sie nur die endgültige Ausführung von Programmen angeben können (die Suche sollte endgültig sein).  Für unsere Zwecke ist dies genau das, was benötigt wird. <br><br>  Um das Kriterium zu beweisen, wird zunächst das Lemma formuliert: Die Programmausführung aus einem allgemeineren Zustand wird länger funktionieren.  Formal: Der Ausgabebaum in der Semantik hat eine große Höhe.  Dies wird durch Induktion bewiesen, aber die Aussage muss sehr sorgfältig verallgemeinert werden, sonst ist die induktive Hypothese nicht stark genug.  Aus diesem Lemma folgt, dass der Ausgabebaum einen eigenen Teilbaum mit größerer oder gleicher Höhe hat, wenn ein Kriterium während der Programmausführung funktioniert hat.  Dies ergibt einen Widerspruch, da für eine induktiv gegebene Semantik alle Bäume endlich sind.  Dies bedeutet, dass in unserer Semantik die Ausführung dieses Programms unaussprechlich ist, was bedeutet, dass die Suche darin nicht endet. <br><br>  Die vorgeschlagene Methode ist konservativ: Wir ändern etwas nur, wenn wir davon überzeugt sind, dass alles bereits völlig schlecht und unmöglich schlechter zu machen ist, und brechen daher nichts in Bezug auf den Programmabschluss. <br><br>  Der Hauptbeweis enthält viele Details, daher wollten wir ihn formell überprüfen, indem wir an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Coq</a> schreiben.  Es stellte sich jedoch als technisch ziemlich schwierig heraus, so dass wir unsere Begeisterung abkühlten und uns ernsthaft mit der automatischen Überprüfung nur in der Magistratur befassten. <br><br><h3>  Posting </h3><br>  In der Mitte der Arbeit präsentierten wir diese Studie auf der Postersitzung des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ICFP-2017 beim Studentenforschungswettbewerb</a> .  Dort haben wir uns mit den Machern der Sprache getroffen - Will Bird und Daniel Friedman - und sie sagten, dass es sinnvoll ist und wir es uns genauer ansehen müssen.  Will ist übrigens generell mit unserem Labor bei JetBrains Research befreundet.  Alle unsere Forschungen zu miniKanren begannen, als Will 2015 in St. Petersburg eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sommerschule</a> für relationale Programmierung abhielt. <br><br>  Ein Jahr später brachten wir unsere Arbeit in eine mehr oder weniger vollständige Form und präsentierten den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> in den Grundsätzen und der Praxis der deklarativen Programmierung 2018. <br><br><h2>  Was mache ich in der Graduiertenschule? </h2><br>  Wir wollten uns weiterhin mit formaler Semantik für miniKanren und dem strengen Nachweis aller seiner Eigenschaften befassen.  In der Literatur werden Eigenschaften (oft alles andere als offensichtlich) einfach postuliert und anhand von Beispielen demonstriert, aber niemand beweist etwas.  Zum Beispiel ist das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hauptbuch</a> über relationale Programmierung eine Liste von Fragen und Antworten, von denen jede einem bestimmten Code gewidmet ist.  Selbst für die Vollständigkeit der Interleaving-Suche (und dies ist einer der wichtigsten Vorteile von miniKanren gegenüber Standard-Prolog) ist es unmöglich, einen strengen Wortlaut zu finden.  Du kannst nicht so leben, beschlossen wir, und nachdem wir einen Segen von Will erhalten hatten, machten wir uns an die Arbeit. <br><br>  Ich möchte Sie daran erinnern, dass die Semantik, die wir in der vorherigen Phase entwickelt haben, eine erhebliche Einschränkung aufwies: Es wurden nur Programme mit endlicher Suche beschrieben.  In miniKanren sind laufende Programme auch deshalb interessant, weil sie unendlich viele Antworten auflisten können.  Deshalb brauchten wir mehr coole Semantik. <br><br>  Es gibt viele verschiedene Standardmethoden, um die Semantik einer Programmiersprache zu definieren. Wir mussten nur eine davon auswählen und an einen bestimmten Fall anpassen.  Wir haben die Semantik als ein gekennzeichnetes Übergangssystem beschrieben - eine Reihe möglicher Zustände im Suchprozess und Übergänge zwischen diesen Zuständen, von denen einige markiert sind, was bedeutet, dass in dieser Phase der Suche eine andere Antwort gefunden wurde.  Die Ausführung eines bestimmten Programms wird somit durch die Reihenfolge solcher Übergänge bestimmt.  Diese Sequenzen können endlich (in einen Endzustand) oder endlos sein und gleichzeitig das Beenden und Nichtabschließen von Programmen beschreiben.  Um ein solches Objekt mathematisch vollständig zu spezifizieren, muss eine koinduktive Definition verwendet werden. <br><br>     <b></b> —     .      <b></b> ,            (,          ,  —     ..).          ,   miniKanren'      (   ). <br><br>      ,    ,        —        .    .  (  ),       ,       . <br>            (    ):        , ,        ,      . <br><br>           , ,  /     . <br><br>             Coq'a.        ,             ,      «. Qed».      . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de441114/">https://habr.com/ru/post/de441114/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de441098/index.html">SIEM-Tiefen: Out-of-Box-Korrelationen. Teil 4. Systemmodell als Kontext von Korrelationsregeln</a></li>
<li><a href="../de441102/index.html">Kaspersky Mobile Talks - ein Treffen für fortgeschrittene Entwickler</a></li>
<li><a href="../de441104/index.html">Abrufen von Informationen und Umgehen der Zwei-Faktor-Authentifizierung auf Bankkarten von TOP-10 (Ukraine)</a></li>
<li><a href="../de441108/index.html">Schon kein Konzept: Samsung stellte das Galaxy Fold Falttelefon für 1980 US-Dollar vor</a></li>
<li><a href="../de441112/index.html">Wir verbinden die LDAP-Autorisierung mit Kubernetes</a></li>
<li><a href="../de441116/index.html">KubeSail und sein kostenloser Kubernetes-Cluster für Entwickler</a></li>
<li><a href="../de441118/index.html">Die Ergebnisse des Experiments mit einer viertägigen Arbeitswoche für Büroangestellte in Neuseeland</a></li>
<li><a href="../de441122/index.html">Magento 2 EAV: Überblick über Datenstrukturen</a></li>
<li><a href="../de441124/index.html">False Positives in PVS-Studio: Wie tief das Kaninchenloch geht</a></li>
<li><a href="../de441126/index.html">False Positives in PVS-Studio: Wie tief das Kaninchenloch ist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>