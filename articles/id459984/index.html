<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍧 👨‍🍳 🗳️ Membangun infrastruktur sebagai kode dengan GitLab dan Ansible 🖐🏾 👨🏻‍⚕️ 🈹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seluruh kekuatan GitLab CI dalam menunjukkan buku pedoman yang dimungkinkan dengan infrastruktur sebagai pendekatan kode. 


 GitLab CI adalah alat ya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Membangun infrastruktur sebagai kode dengan GitLab dan Ansible</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/459984/"><p><img src="https://habrastorage.org/webt/k1/nd/9x/k1nd9xwkakzlxpmrfbteljd-dv8.jpeg"></p><br><h2 id="vsya-mosch-gitlab-ci-v-demonstracii-pleybukov-ansible-pri-podhode-infrastruktura-kak-kod">  Seluruh kekuatan GitLab CI dalam menunjukkan buku pedoman yang dimungkinkan dengan infrastruktur sebagai pendekatan kode. </h2><br><p>  GitLab CI adalah alat yang efektif untuk berbagai skenario, termasuk infrastruktur sebagai kode.  GitLab dapat digunakan dengan alat yang berbeda, tetapi dalam demo ini kita akan mengambil Ansible, karena justru itulah yang paling sering digunakan pengembang ketika mendekati "infrastruktur sebagai kode".  Berikut ini adalah <a href="">demo dengan dua router</a> dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kursus di jaringan Ansible</a> . </p><a name="habracut"></a><br><p> Keindahan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitLab CI</a> adalah bahwa kode dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">buku pedoman Ansible</a> dapat dimodifikasi dan dikirim tanpa menginstal dependensi apa pun secara lokal.  Sebuah proyek demo yang menyebabkan string SNMP diperbarui pada semua perangkat setiap bulan sesuai dengan kebijakan keamanan kami dapat sepenuhnya diselesaikan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitLab.com</a> , layanan hosting kode kami. </p><br><p>  Untuk memulai, buka buku pedoman Ansible, di mana ada 4 tugas: </p><br><ul><li>  Kumpulkan fakta router - mengumpulkan fakta tentang router. </li><li>  Versi tampilan - versi tampilan </li><li>  Tampilkan nomor seri </li><li>  Configure SNMP - Configure SNMP. </li></ul><br><p>  Dalam demo ini, kami akan fokus pada mengonfigurasi string SNMP, yang harus Anda ikuti beberapa langkah sederhana. </p><br><h3 id="nachinaem-s-doski-zadach">  Mulai dari papan tugas </h3><br><p>  Semua rencana di GitLab dimulai dengan cara yang sama: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dengan sebuah tugas</a> .  Jadi, langkah pertama dari alur kerja GitLab adalah memeriksa papan tugas di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proyek ansible-demo</a> .  Pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">papan tugas demo-mungkin,</a> kita sudah melihat tugas: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengubah jalur SNMP pada semua router</a> .  Tugas ini memiliki tautan ke halaman wiki kebijakan keamanan GitLab, yang mengatakan bahwa jalur SNMP harus diperbarui setiap bulan, dan untuk operasi baca-saja dan baca-tulis, harus ada baris yang berbeda. </p><br><p><img src="https://habrastorage.org/webt/y3/3q/ts/y33qtsiyjxyaylvuyuapm3vcsge.png"><br>  <em>Kebijakan keamanan GitLab mengatur pembaruan string SNMP setiap bulan.</em> </p><br><p>  Kemudian Anda perlu memverifikasi bahwa perintah untuk mengonfigurasi string SNMP dalam <a href="">demo dengan dua router</a> tidak melanggar kebijakan keamanan GitLab yang dijelaskan dalam tugas. </p><br><p><img src="https://habrastorage.org/webt/aq/n1/j2/aqn1j264ipqglox7ri0dvptyn8s.png"><br>  <em>Perintah untuk mengonfigurasi string SNMP tersedia di buku pedoman Ansible.</em> </p><br><p> Kemudian kembali ke tugas, tetapkan untuk diri sendiri dan ubah pintasan dari yang <code>to-do</code> menjadi yang <code>doing</code> di panel kanan atau cukup seret tugas di papan dari satu kolom ke yang lain. </p><br><h3 id="sozdanie-merdzh-rekvesta">  Membuat permintaan penggabungan </h3><br><p>  Sekarang Anda perlu membuat permintaan penggabungan dari tugas.  Pastikan permintaan gabungan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">memiliki bendera Work in Progress (WIP)</a> sehingga tidak masuk ke wisaya secara prematur.  Alih-alih menghubungkan secara lokal, kami menggunakan GitLab <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Web IDE</a> karena perubahan pada jalur SNMP kecil. </p><br><ul><li>  Buka bagian demo CI / CD. </li><li>  Buka Buku pedoman yang memungkinkan. </li><li>  Ubah bagian SNMP sebagai berikut: </li><li>  Harap dicatat bahwa saluran yang berbeda dikonfigurasi untuk RO dan RW sesuai dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kebijakan keamanan GitLab yang</a> dijelaskan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tugas</a> . </li></ul><br><h3 id="kommit-izmeneniy">  Berkomit berkomitmen </h3><br><p>  Anda memperbarui jalur SNMP sesuai dengan instruksi, dan sekarang Anda perlu melakukan perubahan.  Buka perbandingan perubahan paralel untuk memastikan permintaan gabungan berisi komit terbaru. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ty/mu/tl/tymutlrb0j3nuqyzfwxoqc2th4w.png"></a> <br>  <em>Alat perbandingan paralel secara visual menunjukkan perubahan.</em> </p><br><h3 id="rezultaty">  Hasil </h3><br><p>  Perubahan yang dilakukan akan secara otomatis meluncurkan pipa GitLab CI.  Dia akan melakukan tugas-tugas berikut: </p><br><ul><li>  Pemeriksaan sintaksis </li><li>  Tes berjalan. </li><li>  Menguji perubahan di lingkungan laboratorium / buatan. </li></ul><br><p>  Kami melihat kemajuan dan output setiap pekerjaan di pipa GitLab CI yang memperbarui SNMP. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/lj/rs/j-/ljrsj-pjvo3nt9lium7i8hteppw.png"></a> <br>  <em>Output dari tugas Anda menunjukkan bahwa pembaruan SNMP di lingkungan buatan berhasil.</em> </p><br><p>  Semua tugas ini akan diluncurkan dan didokumentasikan dalam permintaan penggabungan. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/ti/bw/th/tibwthey3l5eh4y8ptkhmbatvnk.png"></a> <br>  <em>Tanda centang menunjukkan bahwa tugas dalam pipa GitLab CI telah selesai.</em> </p><br><p>  Kemudian masuk ke router untuk demo dan lihat perubahannya. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/4p/aw/gk/4pawgkkbstl7zabuhx8rvkptw3i.png"></a> <br>  <em>Perubahan pada SNMP RO dan RW ditunjukkan pada router.</em> </p><br><h3 id="revyu-merdzh-rekvesta">  Gabungkan Ulasan Permintaan </h3><br><p>  Anda dapat melakukan langkah tambahan - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">menyetujui permintaan penggabungan</a> .  Jika Anda menetapkan persetujuan, beberapa pengguna akan dapat memverifikasi perubahan sebelum mereka mulai diproduksi. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/he/9r/ao/he9raoggmoodfpympqay18gq4sq.png"></a> <br>  <em>Permintaan penggabungan dapat dikonfigurasikan agar pengguna lain memeriksa karya Anda sebelum muncul di wizard.</em> </p><br><h3 id="peredacha-v-master">  Pindah ke master </h3><br><p>  Perubahan dapat dikirimkan ke wizard segera setelah pengujian.  Wizard adalah cabang utama yang berisi kode ruang kerja. </p><br><p>  Saat siap, klik tombol <code>Resolve Work In Progress</code> .  Kemudian klik <code>Merge</code> . </p><br><p>  Saat Anda mengaktifkan status WIP, permintaan penggabungan dapat dikirim ke panduan, dan tugas dapat ditutup. </p><br><p>  Pipa baru akan menjalankan semua tes yang Anda lakukan pada langkah tambahan meluncurkan playbook dalam produksi. </p><br><p>  Melacak kemajuan dan mencatat di layar pipa.  Ketika proses selesai, masuk ke router yang berfungsi dan verifikasi bahwa jalur SNMP telah berubah. </p><br><h3 id="magiya-gitlab-ci">  Magic GitLab CI </h3><br><p>  Semua ini dimungkinkan berkat keajaiban GitLab CI.  Pipa GitLab CI adalah serangkaian tugas berurutan yang melakukan semua yang diperlukan untuk menguji dan menerapkan kode yang mungkin. </p><br><p>  Seluruh konfigurasi GitLab CI cocok dengan file YAML sederhana, yang disimpan dalam <code>.gitlab-ci.yml</code> . </p><br><p>  Dalam demo ini, file <code>.gitlab-ci.yml</code> berisi 3 langkah. </p><br><ol><li>  Deploy (Deployment): Membuat jaringan yang disimulasikan dengan dua router di AWS menggunakan Ansible. </li><li>  Demo: Melakukan buku pedoman yang akan mengubah jalur SNMP. </li><li>  Hancurkan: Hancurkan jaringan yang disimulasikan dengan dua router. </li></ol><br><p>  GitLab CI dimulai dengan gambar dasar.  Dalam hal ini, kami menggunakan gambar Docker, yang berisi semua kode yang diperlukan dan dependensi yang dimungkinkan.  Tunjukkan perintah yang akan dieksekusi pada setiap tahap, dan dependensi. </p><br><p><img src="https://habrastorage.org/webt/s_/ud/vj/s_udvjdum23ahe7xhvaerhl3pkw.png"><br>  <em>File YAML sederhana berisi tiga tahap GitLab CI.</em> </p><br><p><img src="https://habrastorage.org/webt/fy/_5/ik/fy_5ikzv77w5g5rpjpvcccyc0zo.png"><br>  <em>Fase demonstrasi GitLab CI, yang menjalankan playbook Ansible.</em> </p><br><p>  Kami melihat ke dalam pipa dan melihat bagaimana Anda dapat menggunakan GitLab CI untuk membuat infrastruktur sebagai kode tanpa harus menginstal dependensi yang mungkin pada komputer Anda.  Ini hanyalah salah satu contoh bagaimana GitLab CI dapat digunakan untuk mengimplementasikan infrastruktur sebagai kode.  Lihat video untuk panduan lengkap: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/M-SgRTKSeOg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id459984/">https://habr.com/ru/post/id459984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id459972/index.html">Pengembangan untuk Docker. Lingkungan lokal. Bagian 1</a></li>
<li><a href="../id459976/index.html">Nemesida WAF Free Build Baru untuk NGINX</a></li>
<li><a href="../id459978/index.html">Alat pengembang Node.js. Panggilan prosedur jarak jauh pada soket web</a></li>
<li><a href="../id459980/index.html">Huruf Nigeria berteknologi tinggi</a></li>
<li><a href="../id459982/index.html">Analisis Roslyn. Cara menulis kode dengan cepat dan akurat</a></li>
<li><a href="../id459988/index.html">Anjing itu makan di jaringan saraf</a></li>
<li><a href="../id459990/index.html">Immersion in Move - Bahasa pemrograman blockchain Libra Facebook</a></li>
<li><a href="../id459992/index.html">GOST R 57100-2016. Apa itu tadi</a></li>
<li><a href="../id459994/index.html">Penelitian: Linux masih OS paling populer di cloud</a></li>
<li><a href="../id459996/index.html">Jerman Munich Panduan imigrasi tingkat lanjut</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>