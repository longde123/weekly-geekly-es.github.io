<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßë‚Äçü§ù‚Äçüßë ‚úàÔ∏è ü§° Des millions de binaires plus tard. Comment Linux a √©t√© renforc√© üë®‚Äçüë©‚Äçüëß‚Äçüë¶ üê∫ ‚úçüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="TL; DR . Dans cet article, nous explorons les sch√©mas de renforcement qui fonctionnent d√®s le d√©part sur cinq distributions Linux populaires. Pour cha...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Des millions de binaires plus tard. Comment Linux a √©t√© renforc√©</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/444418/"><img src="https://habrastorage.org/getpro/habr/post_images/43f/b35/8ca/43fb358cac8e2bec978126698b7d2ece.png" align="left" width="340">  <b>TL; DR</b> .  Dans cet article, nous explorons les sch√©mas de renforcement qui fonctionnent d√®s le d√©part sur cinq distributions Linux populaires.  Pour chacun, nous avons pris la configuration par d√©faut du noyau, t√©l√©charg√© tous les packages et analys√© les sch√©mas de protection dans les fichiers binaires joints.  Nous consid√©rons les distributions d'OpenSUSE 12.4, Debian 9, CentOS, RHEL 6.10 et 7, ainsi que Ubuntu 14.04, 12.04 et 18.04 LTS. <br><br>  Les r√©sultats confirment que m√™me les sch√©mas de base, tels que les canaris de pile et le code ind√©pendant de la position, ne sont pas encore utilis√©s par tout le monde.  La situation est encore pire pour les compilateurs lorsqu'il s'agit de se prot√©ger contre des vuln√©rabilit√©s comme le choc des piles, qui ont √©t√© mises √† l'honneur en janvier apr√®s la publication d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">informations sur les vuln√©rabilit√©s dans systemd</a> .  Mais tout n'est pas si d√©sesp√©r√©.  Dans une partie importante des binaires, des m√©thodes de protection de base sont impl√©ment√©es et leur nombre augmente de version en version. <br><br>  La v√©rification a montr√© que le plus grand nombre de m√©thodes de protection est impl√©ment√© dans Ubuntu 18.04 au niveau du syst√®me d'exploitation et de l'application, suivi de Debian 9. D'autre part, dans OpenSUSE 12.4, CentOS 7 et RHEL 7, des sch√©mas de protection de base sont √©galement mis en ≈ìuvre et la protection contre les collisions de pile est appliqu√©e encore plus largement. avec un ensemble de packages beaucoup plus dense par d√©faut. <br><a name="habracut"></a><br><h1>  Pr√©sentation </h1><br>  Il est difficile de fournir un logiciel de haute qualit√©.  Malgr√© le grand nombre d'outils avanc√©s pour l'analyse de code statique et l'analyse dynamique √† l'ex√©cution, ainsi que des progr√®s significatifs dans le d√©veloppement de compilateurs et de langages de programmation, les logiciels modernes souffrent toujours de vuln√©rabilit√©s qui sont constamment exploit√©es par les cybercriminels.  La situation est encore pire dans les √©cosyst√®mes qui incluent un code h√©rit√©.  Dans de tels cas, nous sommes non seulement confront√©s au probl√®me √©ternel de trouver d'√©ventuelles erreurs exploit√©es, mais nous sommes √©galement limit√©s par des cadres de compatibilit√© descendante rigides, qui n√©cessitent souvent de maintenir un code limit√©, voire pire, vuln√©rable ou bogu√©. <br><br>  C'est l√† que les m√©thodes de durcissement entrent en jeu.  Nous ne pouvons pas emp√™cher certains types d'erreurs, mais nous pouvons rendre la vie d'un attaquant plus difficile et r√©soudre partiellement le probl√®me en emp√™chant ou en emp√™chant le <i>fonctionnement de</i> ces erreurs.  Une telle protection est utilis√©e dans tous les syst√®mes d'exploitation modernes, cependant, les m√©thodes varient consid√©rablement en complexit√©, efficacit√© et performances: des canaris de pile et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ASLR</a> aux protections <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CFI</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ROP √†</a> part enti√®re.  Dans cet article, nous examinerons les m√©thodes de protection utilis√©es dans les distributions Linux les plus populaires dans la configuration par d√©faut, et √©tudierons √©galement les propri√©t√©s des binaires distribu√©s via les syst√®mes de gestion de packages de chaque distribution. <br><br><h3>  CVE et s√©curit√© </h3><br>  Nous avons tous vu des articles avec des titres comme ¬´Applications les plus vuln√©rables de l'ann√©e¬ª ou ¬´Syst√®mes d'exploitation les plus vuln√©rables¬ª.  G√©n√©ralement, ils fournissent des statistiques sur le nombre total d'enregistrements de vuln√©rabilit√© tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">CVE (Common Vulnerability and Exposures)</a> obtenus √† partir de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">National Vulnerability Database (NVD)</a> du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NIST</a> et d'autres sources.  Par la suite, ces applications ou syst√®mes d'exploitation sont class√©s selon le nombre de CVE.  Malheureusement, bien que les CVE soient tr√®s utiles pour suivre les probl√®mes et informer les fournisseurs et les utilisateurs, ils en disent peu sur la v√©ritable s√©curit√© des logiciels. <br><br>  Par exemple, consid√©rons le nombre total de CVE au cours des quatre derni√®res ann√©es pour le noyau Linux et les cinq distributions de serveurs les plus populaires, √† savoir Ubuntu, Debian, Red Hat Enterprise Linux et OpenSUSE. <br><br><img src="https://habrastorage.org/webt/3_/pt/md/3_ptmdzx313ayxw3xpi0udnlbdq.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">1</font></i> <br><br>  Que nous apprend ce tableau?  Est-ce que plus de CVE signifie qu'une distribution est plus vuln√©rable qu'une autre?  Il n'y a pas de r√©ponse.  Par exemple, dans cet article, vous verrez que Debian impl√©mente des m√©canismes de s√©curit√© plus rigoureux que, disons, OpenSUSE ou RedHat Linux, et pourtant Debian a plus de CVE.  Cependant, ils ne signifient pas n√©cessairement une s√©curit√© affaiblie: m√™me avoir un CVE ne dit pas si la vuln√©rabilit√© est <i>exploitable</i> .  Les scores de gravit√© donnent une id√©e de la <i>probabilit√© d'</i> exploitation de la vuln√©rabilit√©, mais en fin de compte, l'exploitabilit√© d√©pend en grande partie de la protection pr√©sente dans les syst√®mes affect√©s, ainsi que des ressources et des capacit√©s des attaquants.  De plus, le manque de rapports CVE ne dit rien sur les autres vuln√©rabilit√©s <i>non enregistr√©es ou inconnues</i> .  La diff√©rence de CVE peut s'expliquer non par la qualit√© du logiciel, mais par d'autres facteurs, notamment les ressources allou√©es aux tests ou la taille de la base d'utilisateurs.  Dans notre exemple, plus de CVE Debian peuvent simplement indiquer que Debian fournit plus de packages logiciels. <br><br>  Bien s√ªr, le syst√®me CVE fournit des informations utiles qui vous permettent de cr√©er des protections appropri√©es.  Mieux nous comprenons les raisons de l'√©chec du programme, plus il est facile d'identifier les modes de fonctionnement possibles et de d√©velopper des m√©canismes de <i>d√©tection et de r√©ponse</i> appropri√©s.  Dans la fig.  La figure 2 montre les cat√©gories de vuln√©rabilit√© pour toutes les distributions au cours des quatre derni√®res ann√©es ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">source</a> ).  Il est imm√©diatement √©vident que la plupart des CVE appartiennent aux cat√©gories suivantes: d√©ni de service (DoS), ex√©cution de code, d√©bordement, corruption de m√©moire, fuite d'informations (exfiltration) et √©l√©vation de privil√®ges.  Bien que de nombreux CVE soient couverts plusieurs fois dans diff√©rentes cat√©gories, en g√©n√©ral, les m√™mes probl√®mes persistent d'ann√©e en ann√©e.  Dans la prochaine partie de l'article, nous √©valuerons l'utilisation de diff√©rents sch√©mas de protection pour emp√™cher l'exploitation de ces vuln√©rabilit√©s. <br><br><img src="https://habrastorage.org/webt/tr/92/pc/tr92pcngbl1y4qxt3shouu6wdi8.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">2</font></i> <br><br><h3>  Les t√¢ches </h3><br>  Dans cet article, nous avons l'intention de r√©pondre aux questions suivantes: <br><br><ul><li>  Quelle est la s√©curit√© de diverses distributions Linux?  Quels m√©canismes de d√©fense existent dans le noyau et les applications de l'espace utilisateur? <br></li><li>  Comment l'adoption de m√©canismes de protection pour diverses distributions a-t-elle √©volu√© au fil du temps? <br></li><li>  Quelles sont les d√©pendances moyennes des packages et des biblioth√®ques pour chaque distribution? <br></li><li>  Quelles protections sont mises en ≈ìuvre pour chaque binaire? </li></ul><br><h3>  Choix des distributions </h3><br>  Il s'av√®re qu'il est difficile de trouver des statistiques pr√©cises sur les installations de distribution, car dans la plupart des cas, le nombre de t√©l√©chargements n'indique pas le nombre d'installations r√©elles.  Cependant, les variantes Unix constituent la majorit√© des syst√®mes de serveurs (69,2% sur les serveurs Web, selon les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">statistiques de</a> W3techs et d'autres sources), et leur part est en constante augmentation.  Ainsi, pour notre √©tude, nous nous sommes concentr√©s sur les distributions pr√™tes √† l'emploi sur la plateforme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Google Cloud</a> .  En particulier, nous avons choisi le syst√®me d'exploitation suivant: <br><br><table><tbody><tr><th>  Distribution / version </th><th>  Le noyau </th><th>  Construire </th></tr><tr><td>  OpenSUSE 12.4 </td><td>  4.12.14-95.3-d√©faut </td><td>  # 1 SMP mer. 5 d√©c. 06:00:48 UTC 2018 (63a8d29) </td></tr><tr><td>  Debian 9 (√©tirement) </td><td>  4.9.0-8-amd64 </td><td>  # 1 SMP Debian 4.9.130-2 (2018-10-27) </td></tr><tr><td>  CentOS 6.10 </td><td>  2.6.32-754.10.1.el6.x86_64 </td><td>  # 1 SMP mar 15 janv.17: 07: 28 UTC 2019 </td></tr><tr><td>  CentOS 7 </td><td>  3.10.0-957.5.1.el7.x86_64 </td><td>  # 1 SMP ven. 1 f√©vr 14:54:57 UTC 2019 </td></tr><tr><td>  Red Hat Enterprise Linux Server 6.10 (Santiago) </td><td>  2.6.32-754.9.1.el6.x86_64 </td><td>  # 1 SMP mer 21 nov 15:08:21 EST 2018 </td></tr><tr><td>  Red Hat Enterprise Linux Server 7.6 (Maipo) </td><td>  3.10.0-957.1.3.el7.x86_64 </td><td>  # 1 SMP jeu. 15 nov. 17:36:42 UTC 2018 </td></tr><tr><td>  Ubuntu 14.04 (Trusty Tahr) </td><td>  4.4.0‚Äì140-g√©n√©rique </td><td><br>  # 166 ~ 04/14/1-Ubuntu SMP sam 17 nov 01:52:43 UTC 20 ... </td></tr><tr><td>  Ubuntu 16.04 (Xenial Xerus) </td><td>  4.15.0-1026-gcp </td><td>  # 27 ~ 16.04.1-Ubuntu SMP ven. 7 d√©c. 09:59:47 UTC 2018 </td></tr><tr><td>  Ubuntu 18.04 (Bionic Beaver) </td><td>  4.15.0-1026-gcp </td><td>  # 27-Ubuntu SMP jeu 6 d√©c 18:27:01 UTC 2018 </td></tr></tbody></table>  <i><font color="gray">Tableau 1</font></i> <br><br><h1>  Analyse </h1><br>  Nous examinerons la configuration du noyau par d√©faut, ainsi que les propri√©t√©s des packages disponibles via le gestionnaire de packages de chaque package de distribution pr√™t √† l'emploi.  Ainsi, nous ne consid√©rons que les packages des miroirs par d√©faut de chaque distribution, en ignorant les packages des r√©f√©rentiels instables (par exemple, 'tester' les miroirs dans Debian) et les packages tiers (par exemple, les packages Nvidia des miroirs standard).  De plus, nous ne consid√©rons pas les compilations de noyau personnalis√©es ou les configurations de s√©curit√© avanc√©es. <br><br><h3>  Analyse de configuration du noyau </h3><br>  Nous avons utilis√© un script d'analyse bas√© sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">v√©rificateur gratuit kconfig</a> .  Nous consid√©rons les options de protection pr√™tes √† l'emploi pour les distributions nomm√©es et les comparons avec la liste du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Kernel Self-Defense Project</a> (KSPP).  Pour chaque param√®tre de configuration, le tableau 2 d√©crit le param√®tre souhait√©: une coche est destin√©e aux distributions conformes aux recommandations KSSP (pour une explication des termes, voir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> ; dans les prochains articles, nous vous dirons combien de ces m√©thodes de protection sont apparues et comment pirater le syst√®me en leur absence). <br><br> <a href=""><img src="https://habrastorage.org/webt/dx/oh/o0/dxoho0z-lifjcybajszqb-aiirq.png"></a> <br><br><img src="https://habrastorage.org/webt/rm/or/h1/rmorh1jx8aswaj98ts0-7jptjmk.png"><br><br>  En g√©n√©ral, les noyaux les plus r√©cents ont des param√®tres plus rigoureux pr√™ts √† l'emploi.  Par exemple, CentOS 6.10 et RHEL 6.10 sur le noyau 2.6.32 n'ont pas la plupart des fonctions critiques impl√©ment√©es dans les nouveaux noyaux, telles que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SMAP</a> , les autorisations RWX fortes, la randomisation des adresses ou la protection contre la copie2.  Il convient de noter que de nombreuses options de configuration du tableau sont absentes dans les anciennes versions du noyau et ne sont pas applicables en r√©alit√© - cela est toujours indiqu√© dans le tableau comme le manque de protection appropri√©e.  De m√™me, si le param√®tre de configuration n'est pas disponible dans cette version, et pour des raisons de s√©curit√©, ce param√®tre doit √™tre d√©sactiv√©, cela est consid√©r√© comme une configuration raisonnable. <br><br>  Autre point d'interpr√©tation des r√©sultats: certaines configurations de noyau qui augmentent la surface d'attaque peuvent √™tre utilis√©es simultan√©ment pour la s√©curit√©.  Ces exemples incluent les uprobes et kprobes, les modules du noyau et BPF / eBPF.  Notre recommandation est d'utiliser les m√©canismes ci-dessus pour fournir une r√©elle protection, car ils ne sont pas triviaux √† utiliser, et leur fonctionnement suppose que les acteurs malveillants sont d√©j√† ancr√©s dans le syst√®me.  Mais si ces options sont activ√©es, l'administrateur syst√®me doit surveiller activement l'abus. <br><br>  En √©tudiant plus en d√©tail les entr√©es du tableau 2, nous constatons que les noyaux modernes offrent plusieurs options de protection contre l'exploitation de vuln√©rabilit√©s telles que la fuite d'informations et le d√©bordement de pile / tas.  Cependant, nous remarquons que m√™me les distributions populaires les plus r√©centes n'ont pas encore impl√©ment√© une protection plus sophistiqu√©e (par exemple, avec des correctifs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">grsecurity</a> ) ou une protection moderne contre les attaques de r√©utilisation de code (par exemple, en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">combinant la randomisation avec des sch√©mas comme R ^ X pour le code</a> ).  Pire encore, m√™me ces d√©fenses plus avanc√©es ne prot√®gent pas contre une gamme compl√®te d'attaques.  Ainsi, il est crucial pour les administrateurs syst√®me de compl√©ter les configurations intelligentes avec des solutions qui offrent la d√©tection et la pr√©vention des exploits lors de l'ex√©cution. <br><br><h3>  Analyse d'application </h3><br>  Il n'est pas surprenant que diff√©rentes distributions aient des caract√©ristiques diff√©rentes des packages, des options de compilation, des d√©pendances de biblioth√®que, etc. Des diff√©rences existent m√™me pour <a href="">les</a> distributions et les packages <a href="">li√©s</a> avec un petit nombre de d√©pendances (par exemple, coreutils dans Ubuntu ou Debian).  Pour √©valuer les diff√©rences, nous avons t√©l√©charg√© tous les packages disponibles, extrait leur contenu et analys√© les fichiers binaires et les d√©pendances.  Pour chaque package, nous avons suivi les autres packages dont il d√©pend, et pour chaque binaire, nous avons suivi ses d√©pendances.  Cette section r√©sume les r√©sultats. <br><br><h4>  Distributions </h4><br>  Au total, nous avons t√©l√©charg√© 361 556 packages pour toutes les distributions, en extrayant uniquement les packages des miroirs par d√©faut.  Nous avons ignor√© les packages sans fichiers ex√©cutables ELF, tels que les codes source, les polices, etc. Apr√®s le filtrage, 129 569 packages restaient contenant un total de 584 457 fichiers binaires.  La distribution des packages et des fichiers entre les distributions est illustr√©e √† la fig.  3. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f9d/8fc/bbf/f9d8fcbbf2ac0887f4948e1e49446e9a.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">3</font></i> <br><br>  Vous remarquerez peut-√™tre que plus la distribution est moderne, plus elle contient de packages et de fichiers binaires, ce qui est logique.  Dans le m√™me temps, les packages Ubuntu et Debian incluent beaucoup plus de fichiers binaires (modules ex√©cutables et dynamiques et biblioth√®ques) que CentOS, SUSE et RHEL, ce qui affecte potentiellement la surface d'attaque d'Ubuntu et Debian (il convient de noter que les chiffres refl√®tent tous les binaires de toutes les versions). package, c'est-√†-dire que certains fichiers sont analys√©s plusieurs fois).  Ceci est particuli√®rement important lorsque l'on consid√®re les d√©pendances entre les packages.  Ainsi, une vuln√©rabilit√© dans le binaire d'un m√™me package peut affecter de nombreuses parties de l'√©cosyst√®me, tout comme une biblioth√®que vuln√©rable peut affecter tous les fichiers binaires qui l'importent.  Comme point de r√©f√©rence, regardons la distribution du nombre de d√©pendances entre les packages dans diff√©rents OS: <br><br> <a href=""><img src="https://habrastorage.org/webt/ii/e3/e5/iie3e5-ei26ezg5yvcyvtzqzl80.png"></a> <br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">4</font></i> <br><br>  Dans presque toutes les distributions, 60% des packages ont au moins 10 d√©pendances.  De plus, certains packages ont plus de d√©pendances (plus de 100).  La m√™me chose s'applique aux d√©pendances de packages inverses: comme pr√©vu, plusieurs packages sont utilis√©s par de nombreux autres packages dans la distribution, de sorte que les vuln√©rabilit√©s de ces quelques favoris pr√©sentent un risque √©lev√©.  √Ä titre d'exemple, le tableau suivant r√©pertorie les 20 packages avec le nombre maximal de d√©pendances inverses dans SLES, Centos 7, Debian 9 et Ubuntu 18.04 (chaque case indique le package et le nombre de d√©pendances inverses). <br><br><img src="https://habrastorage.org/webt/0g/hl/w0/0ghlw0dtmbb3vswp-xgtx1zs-lu.png"><br>  <i><font color="gray">Tableau 3</font></i> <br><br>  Un fait int√©ressant.  Bien que tous les syst√®mes d'exploitation analys√©s soient con√ßus pour l'architecture x86_64 et pour la plupart des packages, l'architecture est d√©finie comme x86_64 et x86, mais les packages contiennent souvent des fichiers binaires pour d'autres architectures, comme le montre la Fig.  5. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c4e/899/601/c4e899601e6fc711b224aba6b204c02a.png"><br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">5</font></i> <br><br>  Dans la section suivante, nous allons approfondir les caract√©ristiques des binaires analys√©s. <br><br><h4>  Statistiques de protection binaire </h4><br>  Au minimum, vous devez √©tudier l'ensemble de base des options de protection pour les fichiers binaires existants.  Plusieurs distributions Linux sont livr√©es avec des scripts qui effectuent de telles v√©rifications.  Par exemple, dans Debian / Ubuntu, il existe un tel script.  Voici un exemple de son travail: <br><br><pre><code class="bash hljs">$ hardening-check $(<span class="hljs-built_in"><span class="hljs-built_in">which</span></span> docker) /usr/bin/docker: Position Independent Executable: yes Stack protected: yes Fortify Source <span class="hljs-built_in"><span class="hljs-built_in">functions</span></span>: no, only unprotected <span class="hljs-built_in"><span class="hljs-built_in">functions</span></span> found! Read-only relocations: yes Immediate binding: yes</code> </pre> <br>  Le script v√©rifie cinq <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">fonctions de protection</a> : <br><br><ul><li>  Position Independent Executable (PIE): indique si la section de texte du programme peut √™tre d√©plac√©e en m√©moire pour obtenir une randomisation si ASLR est activ√© dans le noyau. <br></li><li>  Stack Protected: si les canaris de pile sont inclus pour se prot√©ger contre les attaques par collision de pile. <br></li><li>  Fortifier la source: si les fonctions non s√©curis√©es (par exemple strcpy) sont remplac√©es par leurs homologues plus s√ªres, et les appels v√©rifi√©s lors de l'ex√©cution sont remplac√©s par leurs homologues non v√©rifi√©s (par exemple memcpy au lieu de __memcpy_chk). <br></li><li>  Relocations en lecture seule (RELRO): Indique si les entr√©es de la table des mouvements sont marqu√©es en lecture seule si elles ont fonctionn√© avant le d√©but de l'ex√©cution. <br></li><li>  Liaison imm√©diate: si l'√©diteur de liens d'ex√©cution autorise tous les mouvements avant de d√©marrer le programme (cela √©quivaut √† une RELRO compl√®te). </li></ul><br>  Les m√©canismes ci-dessus sont-ils suffisants?  Malheureusement non.  Il existe des moyens connus de contourner toutes les d√©fenses ci-dessus, mais plus la d√©fense est stricte, plus la barre de l'attaquant est √©lev√©e.  Par exemple, les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">solutions de contournement RELRO sont</a> plus difficiles √† appliquer si PIE et la liaison imm√©diate sont en vigueur.  De m√™me, un ASLR complet n√©cessite un travail suppl√©mentaire pour cr√©er un exploit fonctionnel.  Cependant, des attaquants sophistiqu√©s sont pr√™ts √† affronter de telles d√©fenses: leur absence va essentiellement acc√©l√©rer le piratage.  Par cons√©quent, il est imp√©ratif que ces mesures soient consid√©r√©es comme le <i>minimum</i> n√©cessaire. <br><br>  Nous voulions √©tudier combien de fichiers binaires dans les distributions en question sont prot√©g√©s par ceux-ci, ainsi que trois autres m√©thodes: <br><br><ul><li>  Un bit non ex√©cutable ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NX</a> ) emp√™che l'ex√©cution dans toute r√©gion qui ne devrait pas √™tre ex√©cutable, comme un tas de pile, etc. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RPATH / RUNPATH</a> indique le chemin d'ex√©cution utilis√© par le chargeur dynamique pour trouver les biblioth√®ques appropri√©es.  Le premier est <i>obligatoire</i> pour tout syst√®me moderne: son absence permet aux attaquants d'√©crire arbitrairement la charge utile en m√©moire et de l'ex√©cuter telle quelle.  Pour la seconde, des configurations incorrectes du chemin d'ex√©cution aident √† l'introduction de code non fiable, ce qui peut entra√Æner un certain nombre de probl√®mes (par exemple, une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">escalade de privil√®ges</a> , ainsi que d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">autres probl√®mes</a> ). </li><li>  La protection contre les collisions de pile offre une protection contre les attaques qui font chevaucher la pile avec d'autres zones de m√©moire (comme un tas).  √âtant donn√© les r√©cents exploits abusant des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vuln√©rabilit√©s de collision de tas dans systemd</a> , nous avons jug√© appropri√© d'inclure ce m√©canisme dans notre ensemble de donn√©es. </li></ul><br>  Alors, sans plus tarder, passons aux chiffres.  Les tableaux 4 et 5 contiennent respectivement une analyse des fichiers ex√©cutables et des biblioth√®ques de diverses distributions. <br><br><ul><li>  Comme vous pouvez le voir, la protection NX est impl√©ment√©e partout, √† de rares exceptions pr√®s.  En particulier, son utilisation plus faible dans les distributions Ubuntu et Debian peut √™tre not√©e par rapport √† CentOS, RHEL et OpenSUSE. <br></li><li>  Les canaris empil√©s ne sont pas disponibles dans de nombreux endroits, en particulier dans les distributions avec de vieux noyaux.  Des progr√®s ont √©t√© constat√©s dans les r√©centes distributions de Centos, RHEL, Debian et Ubuntu. <br></li><li>  √Ä l'exception de Debian et Ubuntu 18.04, la plupart des distributions ont un mauvais support PIE. <br></li><li>  La protection contre les collisions de pile est mal impl√©ment√©e dans OpenSUSE, Centos 7 et RHEL 7 et est pratiquement absente du reste. <br></li><li>  Toutes les distributions avec des noyaux modernes ont un support RELRO, Ubuntu 18.04 ouvrant la voie, Debian occupant la deuxi√®me place. </li></ul><br>  Comme d√©j√† mentionn√©, les m√©triques de ce tableau sont moyennes sur toutes les versions du fichier binaire.  Si vous ne regardez que les derni√®res versions des fichiers, les nombres seront diff√©rents (par exemple, voyez la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">progression de Debian avec l'impl√©mentation de PIE</a> ).  De plus, la plupart des distributions, g√©n√©ralement lors du calcul des statistiques, v√©rifient la protection de seulement quelques fonctions en code binaire, et dans notre analyse, le pourcentage r√©el de fonctions renforc√©es est indiqu√©.  Par cons√©quent, si 5 des 50 fonctions sont prot√©g√©es dans le binaire, nous lui donnerons une note de 0,1, ce qui correspond √† 10% des fonctions renforc√©es. <br><br><img src="https://habrastorage.org/webt/m-/fn/1l/m-fn1l_i9vp3-gh8sicmbnkintc.png"><br>  <i><font color="gray">Tableau 4. Caract√©ristiques de protection des fichiers ex√©cutables illustr√©s √† la fig.</font></i>  <i><font color="gray">3 (impl√©mentation des fonctions correspondantes en pourcentage du nombre total de fichiers ex√©cutables)</font></i> <br><br><img src="https://habrastorage.org/webt/yt/y1/sa/yty1saotef9aqmxkik36r8iijus.png"><br>  <i><font color="gray">Tableau 5. Caract√©ristiques de protection des biblioth√®ques illustr√©es √† la Fig.</font></i>  <i><font color="gray">3 (impl√©mentation des fonctions correspondantes en pourcentage du nombre total de biblioth√®ques)</font></i> <br><br>  Y a-t-il donc des progr√®s?  Il y en a certainement: cela peut √™tre vu √† partir des statistiques des distributions individuelles (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Debian</a> ), ainsi que des tableaux ci-dessus.  Comme exemple sur la fig.  La figure 6 montre l'impl√©mentation de m√©canismes de d√©fense dans trois distributions Ubuntu LTS 5 cons√©cutives (nous avons omis les statistiques de protection contre les collisions de pile).  Nous remarquons que de version en version, de plus en plus de fichiers prennent en charge les canaris empil√©s, et √©galement de plus en plus de fichiers binaires sont fournis avec une protection RELRO compl√®te. <br><br> <a href=""><img src="https://habrastorage.org/webt/d1/ni/or/d1niordj1hmiklmg2-w5rsk6dla.png"></a> <br>  <i><font color="gray">Fig.</font></i>  <i><font color="gray">6</font></i> <br><br>  Malheureusement, un certain nombre de fichiers ex√©cutables dans diff√©rentes distributions ne disposent toujours d'aucune des protections ci-dessus.  Par exemple, en regardant Ubuntu 18.04, vous pouvez voir le binaire ngetty (remplacement de getty), ainsi que les shells mksh et lksh, l'interpr√©teur picolisp, les packages nvidia-cuda-toolkit (un package populaire pour les applications acc√©l√©r√©es par GPU telles que les frameworks d'apprentissage machine) et klibc -utils.  De m√™me, le binaire mandos-client (un outil d'administration qui vous permet de red√©marrer automatiquement les machines avec des syst√®mes de fichiers crypt√©s), ainsi que rsh-redone-client (r√©-impl√©mentation de rsh et rlogin) sont livr√©s sans protection NX, bien qu'ils aient des droits SUID :(. En outre, Plusieurs binaires suid n'ont pas de protection de base, tels que les canaris de pile (par exemple, le binaire Xorg.wrap du package Xorg). <br><br><h1>  R√©sum√© et remarques finales </h1><br>  Dans cet article, nous avons mis en √©vidence plusieurs fonctionnalit√©s de s√©curit√© des distributions Linux modernes.  L'analyse a montr√© que la derni√®re distribution Ubuntu LTS (18.04) impl√©mentait en moyenne la meilleure protection au niveau du syst√®me d'exploitation et des applications parmi les distributions avec des noyaux relativement nouveaux, tels que Ubuntu 14.04, 12.04 et Debian 9. Cependant, les distributions CentOS, RHEL et OpenSUSE discut√©es dans notre kit par d√©faut, un ensemble plus dense de packages est publi√© et les derni√®res versions (CentOS et RHEL) ont un pourcentage plus √©lev√© de protection contre les collisions de pile par rapport aux concurrents bas√©s sur Debian (Debian et Ubuntu).  En comparant les versions CentOS et RedHat, nous remarquons de grandes am√©liorations dans la mise en ≈ìuvre des canaries de pile et RELRO des versions 6 √† 7, mais en moyenne CentOS a plus de fonctionnalit√©s que RHEL.  En g√©n√©ral, toutes les distributions doivent accorder une attention particuli√®re √† la protection PIE, qui, √† l'exception de Debian 9 et Ubuntu 18.04, est impl√©ment√©e dans moins de 10% des fichiers binaires de notre ensemble de donn√©es. <br><br>  Enfin, il convient de noter: bien que nous ayons fait la recherche manuellement, il existe de nombreux outils de s√©curit√© (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lynis</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tiger</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Hubble</a> ) qui effectuent des analyses et aident √† √©viter les configurations dangereuses.  Malheureusement, m√™me une protection forte dans des configurations raisonnables ne garantit pas l'absence d'exploits.  C'est pourquoi nous sommes fermement convaincus qu'il est essentiel d'assurer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une surveillance et une pr√©vention fiables des attaques en temps r√©el</a> , en se concentrant sur les mod√®les op√©rationnels et en les pr√©venant. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr444418/">https://habr.com/ru/post/fr444418/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr444406/index.html">Italie num√©rique. Quoi et comment √ßa marche</a></li>
<li><a href="../fr444408/index.html">Apple a sorti hier de nouveaux iPads et a des questions.</a></li>
<li><a href="../fr444410/index.html">Cartes r√©seau. Un bref aper√ßu des logiciels de cr√©ation de cartes r√©seau</a></li>
<li><a href="../fr444414/index.html">Snapdragon 8cx: plate-forme PC 7 nm</a></li>
<li><a href="../fr444416/index.html">HyperX Alloy CORE - quand la membrane peut jouer √† des jeux</a></li>
<li><a href="../fr444420/index.html">Comment rouler sur deux roues pour travailler</a></li>
<li><a href="../fr444422/index.html">Tel qu'il √©tait en 2018: l'impression FDM industrielle √† Top 3D Expo</a></li>
<li><a href="../fr444424/index.html">AMD Radeon VII: puce haut de gamme (partie 2)</a></li>
<li><a href="../fr444426/index.html">Lyft et Uber sont introduits en bourse. Pourquoi investir dans Lyft?</a></li>
<li><a href="../fr444428/index.html">Mountain Car: R√©soudre le d√©fi classique avec une formation de renforcement</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>