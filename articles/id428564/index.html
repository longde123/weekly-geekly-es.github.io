<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ğŸ¿ ğŸ‘©â€ğŸ‘©â€ğŸ‘§ ğŸ¤½ Pencarian MapKit: Kiat & Trik ğŸ¸ ğŸ¤œğŸ½ ğŸ‘¨ğŸ¼â€ğŸ’¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="MapKit adalah pustaka perangkat lunak yang memungkinkan Anda untuk menggunakan data peta dan teknologi Yandex dalam aplikasi seluler. Dia memiliki dok...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pencarian MapKit: Kiat & Trik</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/428564/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/_i/jl/dq_ijlbhgproad1ydyfpsill35e.png" width="480"></div><br><p>  MapKit adalah pustaka perangkat lunak yang memungkinkan Anda untuk menggunakan data peta dan teknologi Yandex dalam aplikasi seluler.  Dia memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi resmi</a> yang sudah berisi deskripsi terperinci tentang metode API, jadi hari ini kita akan membicarakan hal lain. </p><br><p>  Dalam posting ini, saya akan memberi tahu pembaca Habr tentang fitur pencarian di MapKit dan berbagi rekomendasi dan trik yang mungkin berguna bagi Anda. </p><br><p>  <strong>TL; DR</strong> Jika Anda tidak ingin membaca seluruh artikel, berikut adalah dua poin paling berguna sebagai kompensasi untuk membaca kata pengantar: </p><br><ul><li>  Jangan lupa untuk menyimpan sesi, jika tidak pencarian tidak akan berfungsi. </li><li>  Semua informasi yang paling menarik disimpan dalam metadata objek.  Jika Anda ingin mengetahui alamat lengkap, jam buka, atau berapa harga cappuccino di kafe tertentu, maka Anda perlu metadata. </li></ul><br><p>  Tautan ke dokumentasi dalam teks akan untuk Android, kelas dan metode untuk iOS disebut dengan cara yang sama. </p><a name="habracut"></a><br><h2 id="chto-umeet-poisk">  Apa yang bisa dicari </h2><br><p>  Pertama-tama, mari kita bicara tentang apa yang dapat dilakukan pencarian di MapKit.  Pencarian dapat melakukan apa yang Anda harapkan dari aplikasi peta ketika Anda ingin menemukan sesuatu di sana. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m0/1g/wv/m01gwvpktgpsipyacy4rj5pi3yw.jpeg" width="720"></div><br><p>  Saat Anda mengetik di bilah pencarian "cafe", "Lev Tolstoy street, 16" atau "trem 3", maka <strong>pencarian teks</strong> berfungsi.  Ini adalah jenis pencarian yang paling canggih.  Ditimbun dalam arti mendukung set parameter maksimum untuk penyesuaian.  Anda dapat mencoba segera mencari di sepanjang rute atau jalan yang Anda minati, mengklarifikasi jumlah hasil yang diinginkan, mengatur posisi pengguna, dan sebagainya.  Jika setelah pencarian pertama Anda ingin memindahkan peta atau menerapkan filter pada permintaan ("apotek dengan kumpulan"), ini adalah <strong>permintaan ulang</strong> . </p><br><p>  <strong>Pencarian sebaliknya</strong> akrab bagi sebagian besar pengguna pada pertanyaan "Apa yang ada di sini?".  Ini memungkinkan Anda mengklik peta untuk menentukan jalan atau rumah mana yang "di bawah kursor" atau organisasi mana yang dekat dengan titik ini.  <strong>Pencarian oleh URI</strong> diperlukan ketika Anda ingin menemukan objek tertentu.  Ini dapat digunakan, misalnya, untuk membuat bookmark dalam suatu aplikasi.  Kami menemukan kedai kopi favorit kami, menandainya dengan tanda bintang - lain kali mungkin untuk menemukan organisasi ini oleh URI, di mana pun jendela peta berada.  Baik pencarian balik maupun pencarian URI mendukung permintaan ulang, karena tidak ada yang ditentukan untuk mereka. </p><br><p>  Peluang lain yang ada dalam pencarian adalah <strong>petunjuk pencarian</strong> , yang memungkinkan Anda untuk secara otomatis melengkapi kueri saat Anda mengetiknya.  Tapi kami akan menunda cerita rinci tentang mereka untuk lain waktu. </p><br><h2 id="kak-ustroen-zapros">  Bagaimana permintaannya diatur </h2><br><p> Pencarian, seperti banyak bagian MapKit, berfungsi secara sinkron.  Objek utama untuk bekerja dengan sinkronisasi ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sesi pencarian</a> .  Mari kita lihat contoh kecil. </p><br><div class="spoiler">  <b class="spoiler_title">Sedikit tentang contoh</b> <div class="spoiler_text"><p> Contoh dalam artikel ini ada di Kotlin untuk membuatnya lebih mudah untuk bekerja dengan nilai opsional dan kode boilerplate lebih sedikit.  MapKit memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">aplikasi demo</a> .  Ini dapat digunakan untuk menguji contoh, tetapi untuk ini, <a href=""><code>SearchActivity</code></a> harus dikonversi dari Jawa ke Kotlin.  <code>showMessage</code> , yang dari waktu ke waktu muncul dalam kode, adalah cara mudah bagi Anda untuk menampilkan satu baris teks pada layar atau dalam log. </p></div></div><br><pre> <code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">// `searchManager`  `searchSession` â€“  .    //    ,     . searchManager = SearchFactory.getInstance().createSearchManager( SearchManagerType.ONLINE ) val point = Geometry.fromPoint(Point(59.95, 30.32)) searchSession = searchManager!!.submit("", point, SearchOptions(), object: Session.SearchListener { override fun onSearchError(p0: Error) { showMessage("Error") } override fun onSearchResponse(p0: Response) { showMessage("Success") } } )</span></span></code> </pre> <br><p>  Segera setelah panggilan <code>submit</code> kontrol akan kembali ke kode Anda, dan ketika MapKit menerima respons dari server, SearchListener akan dipanggil. </p><br><p>  Sesi pencarian memungkinkan Anda untuk: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Batalkan permintaan</a> .  Misalnya, jika pengguna menutup layar pencarian. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ulangi permintaan</a> jika terjadi kesalahan.  Misalnya, jika ada masalah dengan jaringan. </li><li>  Lanjutkan interaksi dengan pencarian setelah respons diterima.  <strong>Permintaan ulang</strong> dilakukan melalui sesi. </li></ul><br><p>  Sesi setelah pembatalan secara otomatis dibatalkan.  Ini berarti bahwa jika tidak disimpan di sisi kode klien, pencarian tidak akan berfungsi. <br>  <strong>Jangan lupa untuk menyimpan sesi, sesi adalah teman Anda!</strong> </p><br><h3 id="search-options">  Opsi Pencarian </h3><br><p>  Cara umum untuk mengonfigurasi kueri penelusuran adalah melalui kelas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>SearchOptions</code></a> , yang memungkinkan Anda mengubah parameter kueri. </p><br><ul><li>  Parameter utama dari ini adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>SearchType</code></a> .  Ini memungkinkan Anda untuk menentukan apakah Anda ingin melihat toponim, organisasi, atau transportasi dalam jawabannya (kemungkinan besar Anda tidak akan memerlukan jenis lain). </li><li>  Parameter kueri penting lainnya adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">cuplikan</a> .  Kami akan membicarakannya secara lebih rinci di bagian perangkat tanggapan. </li><li>  Jika Anda ingin mendapatkan geometri toponim (misalnya, jalan atau area), maka Anda perlu memesannya melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>setGeometry(true)</code></a> .  Perlu diingat bahwa geometri cukup "berat" dalam hal data yang dikirim. </li><li>  Secara default, pencarian tidak mengembalikan organisasi yang ditutup (sementara atau permanen), tetapi jika Anda membutuhkannya, Anda perlu mengatur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>setSearchClosed(true)</code></a> . </li></ul><br><p>  Selain parameter yang tercantum, ada beberapa lagi yang mungkin berguna bagi Anda, mereka dapat ditemukan dalam dokumentasi untuk kelas.  Perhatikan bahwa tidak semua kueri mendukung semua kombinasi parameter.  Dokumentasi untuk setiap metode <code>SearchManager</code> atau <code>Session</code> menunjukkan parameter mana dari <code>SearchOptions</code> yang dimengerti. </p><br><h2 id="kak-ustroen-otvet">  Bagaimana jawabannya diatur </h2><br><p>  Dilihat oleh pertanyaan-pertanyaan yang mendukung, sebagian besar semua pengguna bingung dengan format respons pencarian.  Jika Anda melihat kelas respons, tampilannya cukup sederhana (setidaknya, bagian yang menarik bagi kami): </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Response</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">synchronized</span></span></span><span class="hljs-function"> SearchMetadata </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMetadata</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">synchronized</span></span></span><span class="hljs-function"> GeoObjectCollection </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCollection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  Di sini <code>getCollection()</code> mengembalikan objek dalam respons, dan <code>getMetadata()</code> adalah beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">data tambahan</a> yang berisi, misalnya, informasi tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jendela respons</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jenis peringkat</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jumlah hasil yang ditemukan</a> .  Jika Anda melihat ke dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>GeoObjectCollection</code></a> Anda dapat melihat bahwa itu berisi beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>Item</code></a> yang bisa berupa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>GeoObjectCollection</code></a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>GeoObject</code></a> . </p><br><p>  Tidak ada koleksi di dalam koleksi dalam pencarian (setidaknya belum), jadi mari kita lihat <code>GeoObject</code> .  Di dalam objek ada nama ( <code>getName()</code> ), deskripsi ( <code>getDescriptionText()</code> ), bingkai ( <code>getBoundingBox()</code> ), satu set geometri ( <code>getGeometry()</code> ), dan beberapa metode lain yang tidak terlalu jelas.  Di mana nomor telepon organisasi?  Bagaimana memahami kota mana yang dimaksud dengan toponiminya? </p><br><p>  Menurut metode objek, ini tidak begitu jelas. </p><br><h3 id="geoobject">  Geoobject </h3><br><p>  Sudah waktunya untuk berbicara lebih banyak tentang <code>GeoObject</code> . </p><br><p>  <code>GeoObject</code> adalah objek "kartu" dasar.  Di dalamnya dapat berupa acara jalan, objek yang terpisah dari hasil pencarian, manuver di rute atau objek di peta (POI), seperti monumen atau organisasi terkenal. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_l/ut/15/_lut15ur4w70yz88v1127swd6wg.png"></div><br><p>  Semua yang paling menarik tentang objek disimpan dalam metadata.  Mereka dapat diakses menggunakan metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>getMetadataContainer()</code></a> .  Kunci dalam wadah ini adalah tipe metadata.  Jika Anda melihat sesuatu dalam dokumentasi yang diakhiri dengan kata <code>Metadata</code> , maka kemungkinan besar Anda ada di sini.  Dalam mencari berbagai potongan "metadata" 15. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gd/we/00/gdwe00tnfbshuzugslvjssupja4.png"></div><br><p>  Metadata dapat dibagi menjadi beberapa jenis.  Tipe pertama adalah metadata yang menentukan jenis objek milik: toponim ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>ToponymObjectMetadata</code></a> ), organisasi ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>BusinessObjectMetadata</code></a> ) atau transportasi ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>TransitObjectMetadata</code></a> ).  Dalam metadata untuk toponim, Anda dapat menemukan alamat terstruktur dan geometri terperinci.  Metadata untuk organisasi adalah jam operasi atau situs perusahaan.  Metadata ini ditentukan oleh jenis pencarian dalam permintaan - jika Anda hanya mencari toponim, maka setiap objek dalam respons harus memiliki metadata yang sesuai.  Jika Anda mencari nama tempat atau organisasi, maka setiap objek akan memiliki setidaknya satu dari dua "metadata". </p><br><p>  Berikut cara menemukan nomor telepon perusahaan: </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> phones = response.collection.children.firstOrNull()?.obj ?.metadataContainer ?.getItem(<span class="hljs-type"><span class="hljs-type">BusinessObjectMetadata</span></span>::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">?</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">phones</span></span></span></span></code> </pre> <br><p>  Dan inilah cara menemukan kota di alamat terstruktur: </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> city = response.collection.children.firstOrNull()?.obj ?.metadataContainer ?.getItem(<span class="hljs-type"><span class="hljs-type">ToponymObjectMetadata</span></span>::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">java</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">?</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">address</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">?</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">components</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">?</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">firstOrNull</span></span></span><span class="hljs-class"> </span></span>{ it.kinds.contains(<span class="hljs-type"><span class="hljs-type">Address</span></span>.<span class="hljs-type"><span class="hljs-type">Component</span></span>.<span class="hljs-type"><span class="hljs-type">Kind</span></span>.<span class="hljs-type"><span class="hljs-type">LOCALITY</span></span>) } ?.name</code> </pre> <br><p>  Tipe kedua adalah metadata yang datang dengan objek, meskipun Anda tidak bertanya tentangnya.  Jenis utama yang perlu Anda ketahui adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>URIObjectMetadata</code></a> .  Di dalam <code>URIObjectMetadata</code> pengidentifikasi unik objek disimpan, yang harus dilewatkan dalam <strong>pencarian oleh URI</strong> . </p><br><pre> <code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">//       Â«Â»,     //     val uri = response.collection.children.firstOrNull()?.obj ?.metadataContainer ?.getItem(UriObjectMetadata::class.java) ?.uris ?.firstOrNull() ?.value</span></span></code> </pre> <br><p>  Dan tipe ketiga adalah metadata, yang akan muncul dalam jawaban hanya jika Anda secara khusus meminta pencarian tentang itu.  Dengan cara yang berbeda, metadata ini disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">snippet</a> .  Cuplikan adalah potongan kecil data tambahan yang berubah lebih sering daripada data "referensi" dasar, atau yang tidak dibutuhkan semua orang.  Ini bisa berupa peringkat, tautan ke foto atau panorama, nilai tukar atau harga bahan bakar di pompa bensin.  Daftar cuplikan harus ditetapkan menggunakan opsi pencarian.  Jika server memiliki potongan yang dipesan, maka itu akan menambahkannya ke objek yang sesuai. </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = <span class="hljs-type"><span class="hljs-type">Geometry</span></span>.fromPoint(<span class="hljs-type"><span class="hljs-type">Point</span></span>(<span class="hljs-number"><span class="hljs-number">59.95</span></span>, <span class="hljs-number"><span class="hljs-number">30.32</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> options = <span class="hljs-type"><span class="hljs-type">SearchOptions</span></span>() options.snippets = <span class="hljs-type"><span class="hljs-type">Snippet</span></span>.<span class="hljs-type"><span class="hljs-type">FUEL</span></span>.value searchSession = searchManager!!.submit(<span class="hljs-string"><span class="hljs-string">""</span></span>, point, options, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) ... <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> fun onSearchResponse(response: <span class="hljs-type"><span class="hljs-type">Response</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//         showMessage(response.collection.children.firstOrNull()?.obj ?.metadataContainer ?.getItem(FuelMetadata::class.java) ?.fuels ?.joinToString("\n") { "Fuel(name=${it.name}, price=${it.price?.text})" } ?: "No fuel" ) }</span></span></code> </pre> <br><p>  Semua metadata yang tercantum di atas ditambahkan ke objek individual dalam respons.  Ada juga metadata yang ditambahkan ke seluruh respons.  Tetapi mereka dibawa dalam metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>SearchMetadata</code></a> dan mereka tidak perlu diekstraksi dari koleksi khusus apa pun. </p><br><pre> <code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">//            response.metadata.businessResultMetadata?.categories //     (  )     response.metadata.toponymResultMetadata?.responseInfo?.mode</span></span></code> </pre> <br><h2 id="primery-ispolzovaniya">  Contoh Penggunaan </h2><br><p>  Sekarang mari kita melihat metode utama dari kelas pencarian, lihat contoh penggunaan dan pada beberapa poin yang tidak jelas terkait dengan mereka. </p><br><h3 id="poisk-po-tekstu">  Pencarian Teks </h3><br><p>  Metode utama untuk pencarian teks (dan untuk seluruh pencarian, mungkin) adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>submit</code></a> : </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Session </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">submit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( String text, Geometry geometry, SearchOptions searchOptions, SearchListener searchListener )</span></span></span></span>;</code> </pre> <br><ul><li>  Parameter <code>text</code> diharapkan berisi teks yang ingin Anda cari. </li><li>  Parameter <code>geometry</code> agak sulit.  Bergantung pada jenis geometri yang ditransfer, pencarian akan berperilaku berbeda: <br><ul><li>  Jika Anda melewati suatu titik, maka pencarian akan dilakukan di jendela kecil di sebelah titik ini. </li><li>  Jika Anda melewati jendela persegi panjang ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>BoundingBox</code></a> ) atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">poligon</a> empat titik, maka itu akan digunakan sebagai kotak pencarian.  Contoh sederhana dari jendela semacam itu adalah area peta yang terlihat. </li><li>  Akhirnya, jika Anda melewati <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">polyline</a> , maka jendela yang menggambarkannya akan digunakan sebagai jendela pencarian, dan peringkat akan dilakukan dengan mempertimbangkan polyline ini. </li></ul></li><li>  Kami sudah berbicara tentang <code>SearchOptions</code> dan <code>SearchOptions</code> atas. </li></ul><br><p>  Server dapat mempertimbangkan bahwa jawaban yang benar tidak ada di jendela di mana pencarian awal dilakukan (â€œwarnet di Vladivostokâ€ ketika jendela pencarian berada di Moskow).  Dalam hal ini, Anda perlu mengambil jendela respons dan memindahkan kartu ke sana sehingga hasilnya terlihat di layar (permintaan ulang tidak mengizinkannya dan mereka tidak meminta untuk memindahkan kartu). </p><br><p>  Metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>submit</code></a> memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>submit</code></a> kembar: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Session </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">submit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( String text, Polyline polyline, Geometry geometry, SearchOptions searchOptions, SearchListener searchListener )</span></span></span></span>;</code> </pre> <br><p>  dengan satu parameter tambahan.  Parameter ini dapat digunakan untuk mentransfer polyline besar (misalnya, rute ke kota lain) dan jendela pencarian kecil.  Kemudian pencarian itu sendiri akan memotong bagian yang diperlukan dari polyline yang ditransfer dan hanya akan menggunakannya untuk permintaan. </p><br><h3 id="perezaprosy">  Permintaan ulang </h3><br><p>  Permintaan ulang, tidak seperti jenis permintaan lainnya, dilakukan dengan bantuan sesi pencarian, yang mengembalikan kiriman yang sama dan saudara kembarnya.  Bagian dari metode sesi ini sederhana dan mudah: </p><br><ul><li>  Anda dapat mengubah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jendela permintaan</a> (ketika pengguna, misalnya, memindahkan kartu) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">opsi pencarian</a> dapat diperbarui (misalnya, untuk memperbarui posisi pengguna) </li><li>  Anda dapat mengubah jenis peringkat - berdasarkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jarak</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">peringkat</a> . </li></ul><br><p>  Untuk melakukan pencarian yang disempurnakan, Anda perlu menggunakan metode <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>resubmit</code></a> .  Ia menerima <code>SearchListener</code> sama dengan pencarian biasa.  Sebelum memanggilnya, Anda dapat mengubah beberapa parameter sesi.  Misalnya, secara bersamaan ubah jenis peringkat dan terapkan filter. </p><br><h4 id="filtry">  Filter </h4><br><p>  Karena kita berbicara tentang filter.  Filter adalah saat Wi-Fi dan masakan Italia.  Mereka mungkin memiliki sintaks yang paling membingungkan dari semua antarmuka pencarian di MapKit.  Ini disebabkan oleh fakta bahwa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">struktur data yang</a> sama digunakan untuk memperoleh filter dari respons pencarian dan untuk menentukan filter dalam permintaan ulang. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7m/51/ky/7m51ky9gytyd1rlubljviboun5k.jpeg" width="360"></div><br><p>  Filter datang dalam dua jenis.  Filter Boolean hanya mengasumsikan dua nilai yang saling eksklusif - ya atau tidak.  Ini mungkin kehadiran Wi-Fi di kafe, toilet di pompa bensin atau parkir di dekat organisasi.  Filter Enum mengasumsikan banyak nilai yang dapat diminta bersama.  Ini, misalnya, adalah jenis dapur untuk kafe atau jenis bahan bakar di pompa bensin. </p><br><p>  Pertama, mari kita lihat cara mendapatkan filter yang tersedia untuk reboot saat ini: </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> fun filters(response: <span class="hljs-type"><span class="hljs-type">Response</span></span>): <span class="hljs-type"><span class="hljs-type">String</span></span>? { fun enumValues(filter: <span class="hljs-type"><span class="hljs-type">BusinessFilter</span></span>) = filter .values .enums ?.joinToString(prefix = <span class="hljs-string"><span class="hljs-string">" -&gt; "</span></span>) { e -&gt; e.value.id } ?: <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response .metadata .businessResultMetadata ?.businessFilters ?.joinToString(separator = <span class="hljs-string"><span class="hljs-string">"\n"</span></span>) { f -&gt; <span class="hljs-string"><span class="hljs-string">"${f.id}${enumValues(f)}"</span></span> } }</code> </pre> <br><p>  Pada baris yang dihasilkan, untuk filter boolean, hanya pengidentifikasi yang akan ditampilkan, dan untuk filter enum, pengidentifikasi filter itu sendiri dan pengidentifikasi nilai yang tersedia.  Sekarang, dengan berbekal pengetahuan tentang pengidentifikasi yang tersedia, kami akan mencari kafe-kafe masakan Italia yang memiliki Wi-Fi.  Pertama-tama tambahkan filter boolean: </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> boolFilter = <span class="hljs-type"><span class="hljs-type">BusinessFilter</span></span>( <span class="hljs-comment"><span class="hljs-comment">/* id= */</span></span> <span class="hljs-string"><span class="hljs-string">"wi_fi"</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* name= */</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* disabled= */</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* values= */</span></span> <span class="hljs-type"><span class="hljs-type">BusinessFilter</span></span>.<span class="hljs-type"><span class="hljs-type">Values</span></span>.fromBooleans( listOf(<span class="hljs-type"><span class="hljs-type">BusinessFilter</span></span>.<span class="hljs-type"><span class="hljs-type">BooleanValue</span></span>(<span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)) ) )</code> </pre> <br><p>  Sekarang enum filter: </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> enumFilter = <span class="hljs-type"><span class="hljs-type">BusinessFilter</span></span>( <span class="hljs-comment"><span class="hljs-comment">/* id= */</span></span> <span class="hljs-string"><span class="hljs-string">"type_cuisine"</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* name= */</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* disabled= */</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* values= */</span></span> <span class="hljs-type"><span class="hljs-type">BusinessFilter</span></span>.<span class="hljs-type"><span class="hljs-type">Values</span></span>.fromEnums( listOf(<span class="hljs-type"><span class="hljs-type">BusinessFilter</span></span>.<span class="hljs-type"><span class="hljs-type">EnumValue</span></span>( <span class="hljs-type"><span class="hljs-type">Feature</span></span>.<span class="hljs-type"><span class="hljs-type">FeatureEnumValue</span></span>( <span class="hljs-comment"><span class="hljs-comment">/* id= */</span></span> <span class="hljs-string"><span class="hljs-string">"italian_cuisine"</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* name= */</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-comment"><span class="hljs-comment">/* imageUrlTemplate= */</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> ), <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span> )) ) )</code> </pre> <br><p>  Terakhir, Anda dapat menambahkan filter ke sesi dan <code>resubmit()</code> panggilan <code>resubmit()</code> : </p><br><pre> <code class="scala hljs">searchSession!!.setFilters(listOf(boolFilter, enumFilter)) searchSession!!.resubmit(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre> <br><p>  Harap perhatikan bahwa Anda tidak dapat menetapkan filter untuk kueri pertama.  Pertama, Anda perlu mendapatkan respons pencarian yang mencantumkan filter yang tersedia.  Dan hanya kemudian membentuk reboot. </p><br><h5 id="dopolnitelnye-rezultaty">  Hasil tambahan </h5><br><p>  Sesi lain memungkinkan Anda memeriksa apakah ada hasil pencarian tambahan untuk permintaan Anda.  Dan, jika benar, dapatkan mereka.  Misalnya, ketika Anda mencari kafe di kota Anda, kemungkinan besar semuanya tidak akan muat di satu halaman jawaban pencarian.  Beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>fetchNextPage</code></a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>fetchNextPage</code></a> diperlukan untuk melihat halaman-halaman berikut dalam daftar.  Di sini Anda perlu tahu bahwa pertama-tama, memanggil <code>fetchNextPage</code> akan mengeluarkan pengecualian jika metode <code>hasNextPage</code> mengembalikan <code>false</code> .  Dan kedua, penggunaan metode ini menyiratkan bahwa parameter yang tersisa tidak berubah.  Yaitu, sesi digunakan baik untuk memperbaiki permintaan ( <code>resubmit()</code> ), atau untuk mengambil halaman berikut ( <code>fetchNextPage()</code> ).  Menggabungkan mode-mode ini tidak perlu. </p><br><h4 id="obratnyy-poisk">  Pencarian terbalik </h4><br><p>  Pencarian sebaliknya untuk kenyamanan juga disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>submit</code></a> : </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Session </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">submit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Point point, Integer zoom, SearchOptions searchOptions, SearchListener searchListener )</span></span></span></span></code> </pre> <br><p>  Ini berbeda dari jenis kueri lain karena hanya <em>membutuhkan</em> satu jenis pencarian untuk masuk.  Anda melewati tipe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>GEO</code></a> dan mencari nama tempat, atau tipe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><code>BIZ</code></a> dan mencari organisasi.  Tidak ada yang ketiga. </p><br><p>  Saat mencari kembali dengan tipe <code>GEO</code> , ada poin yang perlu diklarifikasi.  Harap dicatat bahwa jawabannya akan berisi beberapa objek dalam hierarki (yaitu, jawabannya akan mencakup rumah, jalan, kota, dan sebagainya).  Dalam kasus sederhana, Anda dapat mengambil objek pertama saja.  Di yang lebih kompleks, cari melalui hierarki yang Anda inginkan. </p><br><p>  Level zoom diperlukan untuk menghasilkan hasil yang memadai tergantung pada apa yang dilihat pengguna di peta.  Bayangkan pengguna melihat peta secara nasional.  Maka akan aneh baginya untuk mengklik pada jalan atau rumah yang terpisah jika pengguna tidak sengaja berhasil masuk ke mereka.  Cukup banyak kota.  Inilah yang menjadi parameter <code>zoom</code> . </p><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> point = <span class="hljs-type"><span class="hljs-type">Point</span></span>(<span class="hljs-number"><span class="hljs-number">55.734</span></span>, <span class="hljs-number"><span class="hljs-number">37.588</span></span>) <span class="hljs-comment"><span class="hljs-comment">//         Â«  , 16Â» searchSession = searchManager!!.submit(point, 16, SearchOptions(), this) //    â€“  " " searchSession = searchManager!!.submit(point, 14, SearchOptions(), this)</span></span></code> </pre> <br><h4 id="poisk-po-uri">  Cari oleh URI </h4><br><p>  Semuanya cukup jelas di sini - kita mengambil URI dari <code>URIObjectMetadata</code> , ingatlah, setelah beberapa saat kita mencari dan dengan URI ini kita mendapatkan objek yang kita ingat dengan tepat. </p><br><pre> <code class="scala hljs">searchSession = searchManager!!.resolveURI(uri, <span class="hljs-type"><span class="hljs-type">SearchOptions</span></span>(), <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>)</code> </pre> <br><p>  Entah bagaimana, bahkan membosankan. </p><br><h2 id="poiskovyy-sloy-i-svetloe-buduschee">  Lapisan Pencarian dan Masa Depan yang Cerah </h2><br><p>  Di sebelah <code>SearchManager</code> masih ada sesuatu yang disebut <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lapisan pencarian</a> .  Lapisan itu disusun untuk menggabungkan pencarian dengan peta.  Dia sendiri tahu cara menambahkan hasil ke dalamnya, memindahkan peta sehingga hasil ini ditampilkan dan melakukan kueri ulang saat pengguna memindahkan peta.  Dalam banyak hal, ini mirip dengan <code>SearchManager</code> dan <code>Session</code> gabungan, tetapi pekerjaan yang terintegrasi dengan peta menambahkan fitur-fitur baru.  Dan berbicara tentang mereka berada di luar cakupan artikel ini.  Pada saat rilis MapKit 3.1, kami telah menjalankan lapisan pencarian di aplikasi nyata, sehingga Anda dapat mencoba menggunakannya di rumah Anda.  Mungkin itu akan membuat pekerjaan pencarian Anda lebih mudah. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ct/tg/g4/cttgg4rh3iffabd5xfm8fc6s_ha.jpeg" width="480"></div><br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  Saya harap setelah membaca artikel Anda akan memiliki pemahaman tentang bagaimana bekerja dengan pencarian di MapKit dengan kekuatan penuh.  Tentunya masih ada beberapa momen halus dan non-sepele (misalnya, kami hampir tidak berbicara tentang tips dan lapisan pencarian).  Sesuatu dapat ditemukan dalam dokumentasi, sesuatu untuk diklarifikasi dalam proyek-proyek tentang GitHub atau meminta dukungan kami. </p><br><p>  Coba MapKit, gunakan pencarian di dalamnya dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">datang ke Maps</a> untuk membuatnya lebih baik! </p><br><p>  <strong>PS</strong> Dan juga datang mengunjungi kami pada tanggal 29 November untuk mendengarkan tentang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bagaimana pengaturan rute otomotif diatur</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ngomong</a> -ngomong, bisa juga digunakan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">MapKit</a> , tapi ini adalah cerita yang sama sekali berbeda. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id428564/">https://habr.com/ru/post/id428564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id428552/index.html">Algoritma: Cara menemukan permutasi leksikografis berikutnya</a></li>
<li><a href="../id428556/index.html">"Lingkungan produksi berada di luar kendali Anda": Rian Lewis menguji proyek-proyek blockchain</a></li>
<li><a href="../id428558/index.html">Bagaimana saya membuat wizard untuk WordPress dari kemalasan saya yang dalam</a></li>
<li><a href="../id428560/index.html">Pengumuman hari Jumat yang tidak dijadwalkan</a></li>
<li><a href="../id428562/index.html">Droidcon London. Bagaimana itu?</a></li>
<li><a href="../id428566/index.html">Fungsi tanda panah JavaScript: mengapa diperlukan, cara menanganinya, kapan menggunakannya, dan kapan tidak</a></li>
<li><a href="../id428568/index.html">Bereaksi Panduan Pengembangan Aplikasi Web Asli</a></li>
<li><a href="../id428570/index.html">Fungsi Tingkat Tinggi dalam JavaScript</a></li>
<li><a href="../id428572/index.html">Komponen Orde Tinggi dalam Bereaksi</a></li>
<li><a href="../id428574/index.html">Bawa komunikasi korporat ke tingkat selanjutnya dengan Zextras Chat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>