<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äç‚öïÔ∏è üíÄ üë®üèº‚Äçüî¨ Comparaci√≥n de c√≥decs HEVC de MSU. ¬øC√≥mo mejorar los resultados? üë∂üèø ‚õΩÔ∏è ü§≥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En octubre de 2015, se public√≥ otro informe de comparaci√≥n de c√≥decs en el VMiK de la Universidad Estatal de Mosc√∫, esta vez que inclu√≠a varios c√≥decs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comparaci√≥n de c√≥decs HEVC de MSU. ¬øC√≥mo mejorar los resultados?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/388423/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En octubre de 2015, se public√≥ otro </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informe de comparaci√≥n de c√≥decs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el VMiK de la Universidad Estatal de Mosc√∫, esta vez que inclu√≠a varios c√≥decs HEVC. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El punto de partida para el estudio fue que notamos una diferencia en los ajustes preestablecidos en las pruebas para AVC y HEVC: para AVC, se utiliz√≥ un perfil r√°pido no modificado con un GOP, y para HEVC, se utiliz√≥ uno modificado con varios GOP. Al mismo tiempo, para el √∫nico archivo "Apple Tree" descrito en el informe abierto, el codificador x264 result√≥ ser mejor que x265 cuando se transcodific√≥ r√°pidamente en los gr√°ficos de la dependencia de SSIM de la velocidad de bits sin importar la velocidad de codificaci√≥n. La pregunta surgi√≥ de inmediato: tal vez estas opciones u otras obvias pueden cambiar esta imagen.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El informe compara los ajustes preestablecidos, pero no proporciona recomendaciones para corregirlos. </font><font style="vertical-align: inherit;">En este art√≠culo, hicimos una comparaci√≥n similar e hicimos recomendaciones para modificar los preajustes del codificador x265. </font><font style="vertical-align: inherit;">Para una secuencia de video similar a la estudiada en la versi√≥n gratuita del informe, los cambios propuestos a los par√°metros de codificaci√≥n pueden mejorar la eficiencia de la compresi√≥n, mientras rehabilitan el codificador x265 al trazar el informe. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los presets modificados no reclaman universalidad, las pruebas en una gran cantidad de secuencias de video est√°n m√°s all√° del alcance de este estudio. </font><font style="vertical-align: inherit;">Sin embargo, pueden recomendarse como punto de partida cuando se buscan oportunidades para aumentar la eficiencia de codificaci√≥n de x265.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sobre el proyecto</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La tarea de la codificaci√≥n de video en el procesamiento multimedia, ya sea transmisi√≥n, edici√≥n o edici√≥n, almacenamiento, surge constantemente al desarrollar aplicaciones y servicios, y al configurarlos en el momento del uso. Debido a la gran cantidad de c√≥decs de video populares, incluso a menudo del mismo tipo, no es f√°cil elegir el √≥ptimo de ellos y luego establecer la configuraci√≥n correcta. Probablemente, guiado por tales consideraciones, en el laboratorio de gr√°ficos por computadora y multimedia en la facultad de matem√°tica computacional y cibern√©tica (VMiK) de la Universidad Estatal de Mosc√∫ desde la d√©cada de 2000, se ha trabajado en un proyecto para comparar c√≥decs de video.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En octubre de 2015, se public√≥ un informe de comparaci√≥n de c√≥decs que inclu√≠a algunos c√≥decs en el formato HEVC, as√≠ como varios otros que est√°n actualmente en desarrollo activo. </font><font style="vertical-align: inherit;">Como "referencia" adopt√≥ el compresor x264. </font><font style="vertical-align: inherit;">Uno de los interesantes en el informe es el compresor x265, y lo estudiaremos. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como herramienta de an√°lisis, utilizaremos SolveigMM Zond 265, el analizador de archivos HEVC / H.265 y AVC / H.264.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0d9/39c/b29/0d939cb290d31812d91d9a2747360002.png" alt="imagen"><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">M√©todos para comparar c√≥decs y seleccionar par√°metros</font></font></h3><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Describimos la t√©cnica. </font><font style="vertical-align: inherit;">La comparaci√≥n en el informe se lleva a cabo seg√∫n los criterios de velocidad de velocidad de bits (SSIM, PSNR). El procedimiento descrito en el informe para comparar la relaci√≥n de velocidad de bits / m√©trica de calidad (p√°rrafo C.4) es el siguiente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccionamos varios valores de velocidad de bits (por ejemplo, 7 valores: 1, 2, 4, 6, 8, 10 y 12 Mbps), para ellos consideramos las m√©tricas de calidad necesarias para cada c√≥dec. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Marcamos los valores obtenidos en el gr√°fico: m√©trica de calidad (eje de abscisas) - velocidad de bits (eje de ordenadas).</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interpolar linealmente.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Seleccionamos el rango m√°s amplio en el que se definen todos los gr√°ficos, y encontramos el √°rea debajo de todos los gr√°ficos en √©l.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">medida de la calidad de un</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> c√≥dec particular (o preajuste), tomamos la relaci√≥n de su √°rea al √°rea para el c√≥dec de referencia. </font><font style="vertical-align: inherit;">Cuanto m√°s bajo es el n√∫mero, m√°s eficiente es el c√≥dec.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para la referencia, seleccione x265 con el preajuste seleccionado en el informe (tabla 1). </font><font style="vertical-align: inherit;">El informe no utiliza la √∫ltima versi√≥n del compresor, se puede encontrar aqu√≠: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x265 1.5 + 460-ac85c775620f</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Sin embargo, cuando se usa la √∫ltima versi√≥n, nada cambia fundamentalmente. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Los ajustes predeterminados del compresor utilizados se muestran en la tabla 1 (para la plataforma de escritorio).</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rasgadura</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x265 -p veryslow --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --input-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Codificaci√≥n universal</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x265 -p medio --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --input-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recodificaci√≥n r√°pida</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> x265 -p ultrarr√°pido --ref 3 --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --input-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabla 1. Configuraci√≥n del compresor x265 del informe "Comparaci√≥n de c√≥dec de video HEVC de MSU". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para obtener recomendaciones para modificar los ajustes preestablecidos, probamos todas las configuraciones en las que consisten: qu√© contribuci√≥n hace cada componente a la calidad y la velocidad. </font><font style="vertical-align: inherit;">El plan aqu√≠ es el siguiente.</font></font><br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Codificamos el archivo, cambiando cada par√°metro del preajuste: de transcodificaci√≥n r√°pida a universal, de universal a "extracci√≥n". </font><font style="vertical-align: inherit;">Al mismo tiempo, guardamos el tiempo de codificaci√≥n.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Calculamos la medida de calidad (como el √°rea indicada anteriormente) y el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tiempo de codificaci√≥n relativo</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (el valor m√≠nimo de codificaci√≥n FPS para el archivo de "par√°metro modificado previamente" en relaci√≥n con todos los valores de velocidad de bits seleccionados).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De la tabla que consiste en un par√°metro variable, medida de calidad, FPS m√≠nimo, seleccionamos los par√°metros que se pueden usar para mejorar los ajustes preestablecidos.</font></font></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nos restringimos a los par√°metros de los ajustes preestablecidos para la codificaci√≥n universal y para "extraer" (Tabla 2), revelando los par√°metros "-p medio" y "-p ultrarr√°pido". </font><font style="vertical-align: inherit;">Agregue a ellos dos m√°s que faltan en el informe: "--keyint -1 --tune ssim". </font><font style="vertical-align: inherit;">Complementaremos los par√°metros enumerados con ajustes preestablecidos para una transcodificaci√≥n r√°pida y universal, respectivamente.</font></font><br>
<table border="1">
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Codificaci√≥n universal</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --rc-lookahead 20 --scenecut 40 --ctu 64 --min-cu-size 8 --bframes 4 --b-adapt 2 --subme 1 --me hex --early-skip --sao - signhide --weightp --rd 3 --aq-strength 1.0 --aq-mode 1 --cutree --no-fast-intra</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rasgadura</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --weightb --amp --rect --rc-lookahead 40 --bframes 8 --tu-inter-depth 3 --tu-intra-depth 3 --rd 6 --rdoq 2 --psy-rdoq 1.0 - -subme 4 --max-merge 4 --me star --ref 5 --b-intra --lookahead-slices 0</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabla 2. Par√°metros candidatos para modificar los ajustes preestablecidos del informe de comparaci√≥n de c√≥dec de video HEVC de MSU </font></font><br>
<br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prueba</font></font></h3><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
No se especifica el enlace de descarga para la secuencia de prueba de Apple Tree (Fig. 1), utilizado en la versi√≥n gratuita del informe. </font><font style="vertical-align: inherit;">Elegiremos uno similar, utilizando su funci√≥n clave: un primer plano, una gran cantidad de peque√±os detalles. </font><font style="vertical-align: inherit;">Por ejemplo, " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=http://download.blender.org/peach/bigbuckbunny_movies/big_buck_bunny_1080p_h264.mov"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">big_buck_bunny_1080p_h264.mov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", un intervalo de 338 fotogramas desde 24 segundos: </font></font><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ffmpeg -i big_buck_bunny_1080p_h264.mov -ss 00:00:24 -frames: v 338 -c: v rawvideo -pix_fmt yuv420p sample.yuv </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/fce/39d/479/fce39d4793eb54f88cff9eac8dfdf7cd.png" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 1. Caracter√≠sticas de la secuencia de la </font><font style="vertical-align: inherit;">muestra .uvv </font><font style="vertical-align: inherit;">. Apple Tree " </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para no perder mucho tiempo escribiendo los n√∫meros necesarios de la interfaz Zond 265 al implementar los tres pasos del plan indicado anteriormente, es conveniente usar su capacidad para trabajar en la l√≠nea de comando (tabla 3):</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
zond265_x64% COMPRESSED_FILE% -iref% REFERENCE_420P_FILE% -nowait -report t = quality, statstream qm = SSIM o =% TARGET_CSV_FILE% Puede encontrar </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
una lista de todos los par√°metros y su descripci√≥n detallada en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">la p√°gina de documentaci√≥n de Zond 265</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Par√°metro</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Descripci√≥n</font></font></b><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -iref</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Establecer el archivo YUV de referencia</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -informe</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Especificaci√≥n del modo operativo Zond 265 en la l√≠nea de comando</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> t = calidad, flujo de datos</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aqu√≠, se selecciona la generaci√≥n de dos informes: calidad y estad√≠sticas en la transmisi√≥n de video</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qm = SSIM</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> M√©trica de calidad para el c√°lculo</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> o</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ruta al archivo de informe CSV</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -ahora</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sin pausas, el Zond 265 debe ir de archivo en archivo sin demora</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabla 3. Par√°metros de la l√≠nea de comandos de Zond 265 necesarios para compilar un script </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ hay dos scripts para Python 2.7: uno para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">codificar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 266 archivos (20 configuraciones para el primero, 18 configuraciones para el segundo preset, para 7 bitrates: 1, 2, 4, 6, 8, 10, 12 Mbps), el segundo para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">informar en formato CSV</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (archivo - la relaci√≥n de codificaci√≥n FPS a la configuraci√≥n de referencia - la relaci√≥n de la m√©trica SSIM a la configuraci√≥n de referencia). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como se puede ver en las tablas de informes para el fragmento de archivo " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">big_buck_bunny_1080p_h264.mov</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " (tablas 5 y 6), puede modificar la configuraci√≥n, por ejemplo, como se muestra en la tabla 4. Recupere para mejorar la eficiencia</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el valor de la medida de calidad debe ser menor que uno y el valor del tiempo de codificaci√≥n relativo debe ser m√°s de uno. </font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prueba se realiz√≥ en una computadora con la siguiente configuraci√≥n: Intel Core i7-2600@3.4 GHz, 16 GB de RAM. </font><font style="vertical-align: inherit;">El par√°metro "--min-cu-size 8" proporciona una gran mejora en la calidad para configuraciones de codificaci√≥n r√°pida, para codificaci√≥n universal: el par√°metro "--rdoq-nivel 2" (pero tambi√©n ralentiza la codificaci√≥n sobre todo).</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Recodificaci√≥n r√°pida</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x265 -p ultrarr√°pido --ref 3 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--rc-lookahead 20 --min-cu-size 8 --bframes 4 --early-skip --cutree --tune ssim</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --bitrate% BITRATE_KBPS %% SOURCE_FILE% -o% TARGET_FILE% --input-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Codificaci√≥n universal</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x265 -p medio </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">--weightb --bframes 8 --tu-intra-depth 3 --psy-rdoq 1.0 --b-intra --lookahead-slices 0 --tune ssim</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> --bitrate% BITRATE_KBPS %% SOURCE_FILE% - o% TARGET_FILE% --input-res% WIDTH% x% HEIGHT% --fps% FPS%</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabla 4. Modificaci√≥n de preajustes de informe de comparaci√≥n de c√≥dec de video HEVC de MSU para aumentar la eficiencia de codificaci√≥n a la misma velocidad de codificaci√≥n</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabla 5. Informe sobre la modificaci√≥n del preajuste de recodificaci√≥n r√°pida</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/cd2/c6c/693/cd2c6c6931161d0287d11906ed36079f.png" alt="image"><br>
 5.      <br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabla 6. Informe sobre la modificaci√≥n del preajuste de codificaci√≥n universal</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/537/4cd/30b/5374cd30b05c3e7b1ecb2b7440595213.png" alt="image"><br>
 6.      <br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La elecci√≥n correcta de opciones es f√°cil de verificar ejecutando </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el script de codificaci√≥n con los presets modificados</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (tabla 7).</font></font><br>
<br>
<table border="1">
<tbody>
<tr>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuracion</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Medida de calidad</font></font></b><br>
 </td>
<td> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tiempo de codificaci√≥n relativo</font></font></b><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodificaci√≥n r√°pida (referencia)</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodificaci√≥n r√°pida, modificada</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,69</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,97</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodificaci√≥n universal (referencia)</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 1</font></font><br>
 </td>
</tr>
<tr>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transcodificaci√≥n universal, modificada</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,85</font></font><br>
 </td>
<td><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 0,94</font></font><br>
 </td>
</tr>
</tbody>
</table><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabla 7. Eficiencia de codificaci√≥n usando preajustes modificados en relaci√≥n con los preajustes del informe ‚ÄúComparaci√≥n de c√≥dec de video HEVC de MSU‚Äù </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Intentemos ver en qu√© influy√≥ el cambio en las opciones: abra el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo codificado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en el Zond 265 con el </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">preajuste modificado cuando transcodifique r√°pidamente</font></a><font style="vertical-align: inherit;"> para la tasa de bits de 8 Mbps y comp√°relo con el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">archivo, preestablecido codificado sin cambios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. El tama√±o de la unidad de codificaci√≥n m√°xima sigue siendo el mismo y es 32x32 (√°rea "--ctu 32"). Pero el tama√±o del bloque m√≠nimo disminuy√≥ de 16 a 8 (el √°rea ‚Äú--min-cu-size 8‚Äù), fue este par√°metro el que mejor√≥ la calidad. El n√∫mero de cuadros B aument√≥ de 3 a 4 (√°rea "- cuadros 4"), pero el n√∫mero m√°ximo de cuadros "de referencia" aument√≥ (√°rea "--ref 4"). El √°rea SSIM muestra los gr√°ficos m√°ximos de SSIM / PSNR para tres componentes: brillo (Luma) y dos componentes de color (Cb, Cr). Aumentaron de 0.9623-0.9966 a 0.9771-0.9991. Los par√°metros adicionales restantes (--rc-lookahead 20 --early-skip --cutree) afectan el algoritmo de codificaci√≥n, y no el tipo de video resultante, esto se refleja principalmente en la velocidad de codificaci√≥n (ver Tabla 5). Debe tenerse en cuentavisualmente, la imagen del cuadro decodificado ha cambiado: los artefactos de codificaci√≥n ahora no son visibles.</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/f83/d2d/cde/f83d2dcde165b09e33f3245131682ce2.png" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 2. Captura de pantalla del archivo Zond 265 codificado utilizando la configuraci√≥n corregida de codificaci√≥n r√°pida.De </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
manera similar, puede verificar los par√°metros del archivo codificado con el </font><font style="vertical-align: inherit;">preajuste de codificaci√≥n universal </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modificado</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sin cambios</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (Figura 3). El tama√±o de las particiones TU m√≠nimas no cambi√≥ y permaneci√≥ igual a 4x4 (√°rea ‚Äú--tu-intra-profundidad 3‚Äù), el n√∫mero de tramas B permaneci√≥ sin cambios e igual a 3 (√°rea ‚Äú--bframes 3‚Äù). SSIM aument√≥ de 0.9789-0.9994 a 0.9811-0.9992. En comparaci√≥n con la configuraci√≥n de transcodificaci√≥n r√°pida, el tama√±o m√°ximo de bloque aumentado, lleg√≥ a ser igual a 64x64 (√°rea "--ctu 64"), se agreg√≥ un filtro SAO (√°rea "--sao").</font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/52b/042/875/52b0428750f30b018f10aa48187e42f3.png" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Figura 3. Captura de pantalla del archivo Zond 265 codificado utilizando la configuraci√≥n de codificaci√≥n universal corregida. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, en base a las pruebas, se propone una lista de opciones para mejorar la eficiencia de codificaci√≥n (mejorando la m√©trica SSIM con la misma velocidad de bits y velocidad de codificaci√≥n) para configuraciones de codificaci√≥n r√°pidas y universales. </font><font style="vertical-align: inherit;">Utilizando los cambios propuestos para un archivo con una gran cantidad de peque√±os detalles, el valor de la "medida de calidad" integral del informe "Comparaci√≥n de c√≥dec de video HEVC de MSU" mejor√≥ en un 31% para la conversi√≥n r√°pida, y en un 15% con la conversi√≥n universal, y la velocidad de codificaci√≥n no cambi√≥ significativamente. </font><font style="vertical-align: inherit;">Porque </font><font style="vertical-align: inherit;">Dado que las pruebas se llevaron a cabo para cada opci√≥n por separado, en la pr√°ctica, puede seleccionar y usar solo algunas opciones convenientes, y no toda la lista propuesta.</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Referencias</font></font></h3><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HEVC Video Codecs Comparison</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Blender Foundation | www.blender.org</a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Zond 265 home page</a></li>
</ol></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es388423/">https://habr.com/ru/post/es388423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es388413/index.html">Bombillas LED X-Flash</a></li>
<li><a href="../es388415/index.html">MP8036multi: ejemplo de termostato</a></li>
<li><a href="../es388417/index.html">Sport vs fitness: Fitbit Charge HR y Polar M400</a></li>
<li><a href="../es388419/index.html">Fusar: c√≥mo convertir tu casco en un casco inteligente</a></li>
<li><a href="../es388421/index.html">OpenCL en tareas cotidianas</a></li>
<li><a href="../es388425/index.html">NX 1 es la impresora 3D m√°s r√°pida. Resumen de lo revolucionario en el mundo de la impresi√≥n 3D</a></li>
<li><a href="../es388429/index.html">Peter Malkin: "Quer√≠a que no se avergonzara de los √∫ltimos a√±os"</a></li>
<li><a href="../es388431/index.html">BitNotarize sugiere usar blockchain en lugar de notario p√∫blico</a></li>
<li><a href="../es388433/index.html">Los f√≠sicos han propuesto una forma de extraer informaci√≥n de un agujero negro</a></li>
<li><a href="../es388435/index.html">C√≥mo hicimos un an√°logo de Oculus Rift</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>