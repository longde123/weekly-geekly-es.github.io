<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩‍🚒 🆘 🍆 Adicionar Furigan à macro Kanji Python para LibreOffice 🔉 🏘️ 🖖🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Senhoras e senhores, o plano é este:
 
 

- tudo o que você queria saber sobre a escrita japonesa, mas tinha medo de perguntar
- O que é texto em rubi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Adicionar Furigan à macro Kanji Python para LibreOffice</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395153/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Senhoras e senhores, o plano é este:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tudo o que você queria saber sobre a escrita japonesa, mas tinha medo de perguntar</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> O que é texto em rubi </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como escrever addons para libreoffice em python</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> como gerar leitura para o kanzi</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Juntando tudo em um furiganizer!</font></font></li>
</ul><br>
<img src="https://habrastorage.org/files/cc5/24f/513/cc524f513715442397b9e3abaff3612f.png"><br>
<br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O japonês moderno usa principalmente três sistemas de escrita. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em primeiro lugar, esses são dois alfabetos de sílabas: hiragana e katakana. O hiragana é mais arredondado, tem algo parecido com isto: こ れ は ひ ら な で す e é, por assim dizer, o alfabeto principal. Além disso, chamaremos tudo isso simplesmente de "kana". "Alfabeto silábico" significa que, em vez de nossas vogais e consoantes "a", "b" e "c" - apenas sílabas inteiras, como "ka", "sa" e "aquilo". Existem também vogais, no entanto, existem cinco peças ("a", "e", "y", "e", "o" + "i", "u" e "e") e apenas uma consoante "n" em ordem de exceção.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
É por isso que é muito difícil para os japoneses pronunciar palavras com consoantes sucessivas - elas simplesmente não estão acostumadas, mas isso não é importante para nós agora. Com um cana, em princípio, você pode escrever qualquer frase em japonês. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Outro sistema são os caracteres emprestados da China, que continuaremos chamando de </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kanji</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , depois o que são chamados. Depois de tomar emprestado, os japoneses, sim, sobsno e os chineses também mudaram significativamente, e agora eles são bem diferentes, embora, é claro, por outro lado, sejam bastante similares. Digamos que, olhando para um texto em chinês, um japonês possa entender mais ou menos do que está falando. Os kanji são mais ou menos assim: 友 達 、 日本 、 世界。 Sim, em japonês, é um ponto redondo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está um ponto chave para a compreensão: japonês e chinês no nível gramatical geralmente não estão relacionados. Assim, era impossível pegar caracteres chineses e começar a escrevê-los. Na verdade, com a ajuda do kanji, você pode escrever palavras individuais, e até o básico das palavras, e o kana ainda é usado para indicar formas gramaticais e a conexão das palavras entre si. É algo parecido com isto: 送 り が な は と っ も も で で. Se você olhar atentamente, poderá ver que o primeiro caractere é kanji, seguido de vários sinais de kana, etc. Esse truque facilita a distinção visual entre texto em japonês e chinês, que parecem graficamente mais "densos" porque existe apenas kanji. Esse kana, que é anexado ao kanji para indicar a forma gramatical, é chamado de "okurigan".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui, e finalmente ... O número de kanji é bastante grande e, se você não é um robô, lembrar de tudo é difícil. Se a palavra é escrita por kanji, geralmente não é óbvio como lê-la pessoalmente, apesar do fato de que, na linguagem falada, a palavra pode ser encontrada e a pessoa a conhece. Para ajudar nessa situação, especialmente para kanji raro ou quando o texto é destinado a crianças, estrangeiros ou outras categorias de cidadãos com mentalidade limitada - a leitura de um kanji é assinada de cima com um kana. Isso é chamado de " </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">furigana</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ". Parece na foto no início do post. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fuh, vá para o próximo item. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para adicionar anotações sobre o texto, o chamado ruby ​​é usado. Não tem nada a ver com a linguagem de programação. Como aprendi na Wikipedia, em russo é chamado de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"ágata"</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
O suporte a Ruby está disponível em html usando a tag ruby:</font></font><br>
<pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ruby</span></span></span><span class="hljs-tag">&gt;</span></span><font></font>
 <font></font>
 <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rt</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rt</span></span></span><span class="hljs-tag">&gt;</span></span>
<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ruby</span></span></span><span class="hljs-tag">&gt;</span></span>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mas agora estamos interessados ​​no LibreOffice. </font><font style="vertical-align: inherit;">No modo manual, você pode adicionar anotações ruby ​​ao texto através do menu Formato -&gt; Guia fonético asiático. </font><font style="vertical-align: inherit;">Isso é um tanto estranho, porque você pode usar o campo esfregar não apenas para fonética, mas também com eles. </font><font style="vertical-align: inherit;">Se isso não estiver no menu, você pode tentar adicionar suporte para idiomas asiáticos em Ferramentas -&gt; Opções -&gt; Configurações de idioma. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Em seguida, queremos fazer isso automaticamente para o texto selecionado. </font><font style="vertical-align: inherit;">O LibreOffice é maravilhoso, pois você pode escrever macros em Python. </font><font style="vertical-align: inherit;">Para fazer isso, o módulo libreoffice-script-provider-python deve ser instalado (instalado via apt-get), que não vale o padrão. </font><font style="vertical-align: inherit;">Ah, sim, eu faço tudo no Ubuntu, se você tiver um sistema operacional diferente, poderá compartilhar a receita nos comentários :)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A macro em si é escrita como uma função regular em um Python. O documento é visível através de uma variável global com uma instância da classe correspondente e, de fato, nela todos os métodos necessários. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqui está um exemplo simples:</font></font><br>
 <pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">HelloWorldPython</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span><font></font>
    desktop = XSCRIPTCONTEXT.getDesktop()<font></font>
    model = desktop.getCurrentComponent()<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(model, <span class="hljs-string"><span class="hljs-string">"Text"</span></span>):<font></font>
        model = desktop.loadComponentFromURL(<span class="hljs-string"><span class="hljs-string">"private:factory/swriter"</span></span>,<span class="hljs-string"><span class="hljs-string">"_blank"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, () )<font></font>
    text = model.Text<font></font>
    tRange = text.End<font></font>
    tRange.String = <span class="hljs-string"><span class="hljs-string">"Hello World (in Python)"</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span><font></font>
g_exportedScripts = HelloWorldPython,<font></font>
</code></pre> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nós salvamos em um arquivo, colocamos ou criamos um link simbólico na pasta em que o LibreOffice mantém scripts. No meu caso, é "~ / .config / libreoffice / 4 / user / Scripts / python". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Abra o LibreOffice Writer (o OpenOffice também deve funcionar), vá em Ferramentas -&gt; Macros -&gt; Executar macro e veja nosso script lá, se tudo der certo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Resta escrever um script que retire o kanji do documento e adicione suas leituras em rublos dos caracteres correspondentes. Tudo é simples: existem programas especiais para a geração de leitura, apenas os executamos em nosso script de macro, através de entrada / saída padrão, rodamos texto em japonês e inserimos a saída no documento.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Um programa chamado kakasi pega texto em japonês e fornece uma leitura completa, mas não é exatamente isso que você precisa, porque </font><font style="vertical-align: inherit;">Quero distribuir fragmentos de pistas fonéticas entre os campos de rubi dos caracteres correspondentes. </font><font style="vertical-align: inherit;">Para fazer isso, usando o mecab, você pode tokenizar o texto em japonês e, portanto, já o alimentar kakasi em partes. </font><font style="vertical-align: inherit;">De fato, a precisão da geração de leitura a partir disso está se deteriorando levemente, mas o layout do documento está melhorando. </font><font style="vertical-align: inherit;">Algumas falhas podem ser corrigidas manualmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Isso é sobsno e é isso, coloque apt-get install kakasi, mecab, </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
vá para </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">github.com/undertherain/furiganize</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , faça o download do script desajeitado que eu escrevi de lá e que soluça - mas faz tudo isso. </font><font style="vertical-align: inherit;">Coloque-o na pasta desejada e divirta-se. </font><font style="vertical-align: inherit;">Se alguém compartilhar sua experiência com outros sistemas operacionais, geralmente será maravilhoso.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt395153/">https://habr.com/ru/post/pt395153/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt395143/index.html">É possível introduzir ética no algoritmo dos robomobiles?</a></li>
<li><a href="../pt395145/index.html">Pergunte a Ethan No. 59: O que é energia escura?</a></li>
<li><a href="../pt395147/index.html">Mitsubishi Outlander SUV entra facilmente através de Wi-Fi</a></li>
<li><a href="../pt395149/index.html">Uma nova explicação do princípio do mecanismo "impossível" EmDrive: todos esses são fótons</a></li>
<li><a href="../pt395151/index.html">Clima em sua casa. Anúncio MagicAir da TION</a></li>
<li><a href="../pt395155/index.html">Smart Light: Recursos de controle de iluminação</a></li>
<li><a href="../pt395157/index.html">Progresso dos DVRs do carro e compará-los com as câmeras de ação</a></li>
<li><a href="../pt395159/index.html">Projeto especial: Central solar em um campista. Parte 1</a></li>
<li><a href="../pt395161/index.html">Robôs da Amazon fazem seu trabalho 4 vezes mais rápido que humanos</a></li>
<li><a href="../pt395163/index.html">Seleção: mais de 50 materiais para entender o mercado de ações</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>