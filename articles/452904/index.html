<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úãüèø ü•Å ü¶Ç C√≥mo se comunican las m√°quinas: protocolo MQTT üë©üèº‚Äçüî¨ üöÄ üé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En un art√≠culo anterior, analizamos el protocolo Modbus , que es el est√°ndar de facto de la industria para la interacci√≥n M2M . Desarrollado en 1979, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo se comunican las m√°quinas: protocolo MQTT</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/advantech/blog/452904/"><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/nb/fv/om/nbfvom_zwqoyqg4e4bcxwl1ax7a.png"></div><br>  En un art√≠culo anterior, analizamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el protocolo Modbus</a> , que es el est√°ndar de facto de la industria para la interacci√≥n <abbr title="M√°quina a m√°quina">M2M</abbr> .  Desarrollado en 1979, tiene una serie de inconvenientes importantes que MQTT resuelve. <br><br>  El protocolo MQTT es bastante joven (estandarizado solo en 2016), pero ya ha logrado ser ampliamente utilizado en la industria e IoT.  Fue especialmente dise√±ado para ser lo m√°s compacto posible, para canales de Internet inestables y dispositivos de baja potencia, y le permite garantizar la entrega de mensajes en caso de p√©rdida y desconexi√≥n de paquetes. <br><br>  Caracter√≠sticas clave del protocolo MQTT: <br><br><ul><li>  <b>Compacto y liviano</b> : sobrecarga m√≠nima de transferencia de datos para ahorrar tr√°fico. </li><li>  <b>Resistencia a las p√©rdidas</b> : entrega garantizada en condiciones de conexiones de red inestables. </li><li>  <b>As√≠ncrono</b> : le permite atender una gran cantidad de dispositivos y no depende de los retrasos de la red. </li><li>  <b>Soporte de QoS</b> : la capacidad de controlar la prioridad del mensaje y garantizar la entrega del mensaje al destinatario. </li><li>  <b>Configuraci√≥n din√°mica</b> : no requiere coordinaci√≥n previa de campos y formatos de datos, se puede configurar sobre la marcha. </li><li>  <b>Funciona para NAT</b> : los clientes pueden estar detr√°s de NAT, solo el servidor (intermediario) debe tener una IP real.  Le permite prescindir de VPN y reenv√≠o de puertos. </li><li>  <b>Direccionamiento conveniente</b> : los campos de datos tienen nombres de texto que los humanos pueden entender.  No es necesario recordar direcciones digitales y compensaciones de bits. </li></ul><a name="habracut"></a><br>  En el art√≠culo, compararemos MQTT y Modbus, analizaremos la estructura del protocolo, los conceptos b√°sicos e intentaremos usar el broker MQTT en la nube como ejemplo en una conexi√≥n a Internet inestable. <br><br><h2>  Historial de protocolo MQTT </h2><br>  MQTT fue desarrollado por IBM en 1999, y inicialmente se us√≥ internamente para sus soluciones. <br><br>  En noviembre de 2011, IBM y Eurotech anunciaron su participaci√≥n en el grupo de trabajo Eclipse M2M y la transferencia del c√≥digo MQTT al proyecto Eclipse Paho. <br><br>  En 2013, el consorcio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OASIS</a> (Organizaci√≥n para el Avance de los Est√°ndares de Informaci√≥n Estructurada) comenz√≥ el proceso de estandarizaci√≥n del protocolo MQTT.  Hasta este momento, la especificaci√≥n del protocolo se ha publicado bajo una licencia gratuita, y compa√±√≠as como Eurotech (anteriormente conocida como Arcom) ya utilizan el protocolo en sus productos. <br><br>  En octubre de 2014, OASIS public√≥ el primer est√°ndar oficial de protocolo MQTT. <br><br>  En 2016, el protocolo fue estandarizado por la Organizaci√≥n Internacional de Normalizaci√≥n ISO y recibi√≥ el n√∫mero ISO / IEC 20922. <br><br>  Desde 2014, el inter√©s en el protocolo comienza a crecer r√°pidamente y, a juzgar por el calendario de Google Trends, hoy supera el inter√©s en Modbus. <br><br><img src="https://habrastorage.org/webt/ia/6q/cw/ia6qcwyvn9p6yi_10xrdgkwbcqu.png"><br>  <font color="999999">Benchmark de tendencias de Google</font> <br><br><h2>  Conceptos basicos </h2><br>  MQTT tiene una arquitectura cliente-servidor.  La mensajer√≠a se realiza a trav√©s de un servidor central llamado intermediario.  En condiciones normales, los clientes no pueden comunicarse directamente entre s√≠, y todo el intercambio de datos se realiza a trav√©s de un intermediario. <br><br>  Los clientes pueden actuar como proveedores de datos (Editor) y como destinatarios de datos (Suscriptor).  En una traducci√≥n al ruso, estos t√©rminos a menudo se traducen como editor y suscriptor, pero para evitar confusiones, usaremos solo la terminolog√≠a original. <br><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/ex/ri/7r/exri7rw8067vln4jiqq5ma9dine.png"></div><br>  <font color="999999">En el protocolo MQTT, los clientes se comunican entre s√≠ a trav√©s de un nodo central</font> <br><br>  A nivel de aplicaci√≥n, el protocolo se ejecuta sobre TCP / IP y puede conectar f√°cilmente objetos remotos directamente a trav√©s de Internet, sin la necesidad de t√∫neles VPN.  Es suficiente para el corredor tener una direcci√≥n IP real y todos los clientes pueden conectarse a ella.  En este caso, los clientes pueden estar ubicados detr√°s de NAT.  Dado que los clientes inician la conexi√≥n en el protocolo MQTT, no se requiere el reenv√≠o de puertos para establecer una conexi√≥n, mientras que en Modbus / TCP el servidor inicia una conexi√≥n (maestra), que requiere accesibilidad directa a la red. <br><br>  El puerto de agente MQTT est√°ndar para las conexiones TCP entrantes es <b>1883</b> .  Cuando se usa una conexi√≥n SSL segura, <b>se usa el</b> puerto <b>8883</b> . <br><br><h4>  Corredor </h4><br>  Un corredor es el centro central de MQTT para la interacci√≥n con el cliente.  El intercambio de datos entre clientes ocurre solo a trav√©s de un corredor.  El corredor puede ser un software de servidor o un controlador.  Sus tareas incluyen recibir datos de clientes, procesar y almacenar datos, entregar datos a clientes y monitorear la entrega de mensajes. <br><br><h4>  Editor / suscriptor </h4><br>  Para comprender la diferencia entre el editor y el suscriptor, tomemos un ejemplo simple: un sensor de humedad mide la humedad en una habitaci√≥n y, si cae por debajo de cierto nivel, el humidificador se enciende. <br><br>  En este caso, el sensor de humedad act√∫a como un <b>editor</b> : su tarea es solo publicar datos en el agente.  El humidificador act√∫a como un <b>Suscriptor</b> : se suscribe a las actualizaciones de los datos de humedad y recibe datos actualizados del agente, mientras que el humidificador puede decidir en qu√© punto encender la humidificaci√≥n. <br><br>  En este esquema, los clientes MQTT, es decir, el sensor y el humidificador, no son conscientes de la existencia de los dem√°s y no interact√∫an directamente.  El agente puede recibir datos de varias fuentes, manipularlos, por ejemplo, calcular el valor promedio de varios sensores y devolver los datos procesados ‚Äã‚Äãal suscriptor. <br><br><img src="https://habrastorage.org/webt/xc/pb/t8/xcpbt8th_jxzdzfglqwxt4wnpwo.png"><br>  <font color="9999999">El editor env√≠a datos al agente, el suscriptor se suscribe a las actualizaciones de estos datos</font> <br><br>  Al mismo tiempo, el asincronismo del protocolo MQTT establece que el sensor y el humidificador pueden estar en l√≠nea en diferentes momentos, perder paquetes y ser inaccesibles.  El corredor se encargar√° de almacenar los √∫ltimos datos recibidos del sensor en la memoria y garantizar√° su entrega al humidificador. <br><br><h4>  Tema </h4><br>  MQTT utiliza temas para identificar entidades, en la traducci√≥n al ruso tambi√©n se denominan canales.  Los temas consisten en caracteres UTF8 y tienen una estructura de √°rbol similar a un sistema de archivos UNIX.  Este es un mecanismo conveniente para nombrar entidades en una forma legible para humanos. <br><br>  Un ejemplo de temas en MQTT <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#     home/kitchen/temperature #     home/sleeping-room/temperature #     home/outdoor/light</span></span></code> </pre> <br>  Este enfoque le permite ver visualmente qu√© datos se transmiten, y es conveniente desarrollar y depurar el c√≥digo sin tener que memorizar la direcci√≥n digital de la ubicaci√≥n de los datos, como se hace en Modbus. <br><br>  Los temas tambi√©n incluyen la sintaxis comod√≠n, familiar para aquellos que han trabajado con el sistema de archivos UNIX.  El comod√≠n puede ser de un solo nivel y de varios niveles. <br><br>  Un comod√≠n de un solo nivel se indica con un <b>+</b> . <br><br>  Por ejemplo, para recibir datos de sensores de temperatura en todas las habitaciones de la casa, el suscriptor debe suscribirse a dicho tema: <br><br><pre> <code class="plaintext hljs">home/+/temperature</code> </pre><br>  Como resultado, se suscribir√° para recibir datos de dichos sensores: <br><br><pre> <code class="plaintext hljs">home/kitchen/temperature home/sleeping-room/temperature home/living-room/temperature home/outdoor/temperature</code> </pre><br>  Un comod√≠n multinivel se indica con el s√≠mbolo " <b>#</b> ". <br>  Un ejemplo de obtenci√≥n de datos de todos los sensores en todas las habitaciones de la casa: <br><br><pre> <code class="plaintext hljs">home/#</code> </pre><br>  Suscribirse a dicho tema le permitir√° recibir datos de dichos sensores: <br><br><pre> <code class="plaintext hljs">home/kitchen/temperature home/kitchen/humidity home/kitchen/light home/sleeping-room/temperature home/sleeping-room/humidity home/sleeping-room/light ....</code> </pre><br><h3>  Identificaci√≥n del cliente </h3><br>  Para el control de acceso, MQTT proporciona autenticaci√≥n de cliente, a diferencia del protocolo Modbus, que no tiene dicha funci√≥n.  Los siguientes campos se utilizan para el control de acceso: <br><br>  <b>ClientId</b> : (campo obligatorio) identificador √∫nico del cliente.  Debe ser √∫nico para cada cliente.  La versi√≥n actual del est√°ndar MQTT 3.1.1 le permite usar el campo ClientId vac√≠o si no necesita guardar el estado de la conexi√≥n. <br><br>  <b>Nombre de usuario</b> : inicio de sesi√≥n (campo opcional) para autenticaci√≥n, en formato UTF-8.  Puede que no sea √∫nico.  Por ejemplo, un grupo de clientes puede iniciar sesi√≥n con el mismo nombre de usuario / contrase√±a. <br><br>  <b>Contrase√±a</b> : (campo opcional) solo se puede enviar junto con el campo Nombre de usuario, mientras que el Nombre de usuario se puede transmitir sin el campo Contrase√±a.  M√°ximo 65535 bytes.  Es importante saber que el nombre y la contrase√±a se transmiten de forma clara, por lo tanto, si los datos se transmiten a trav√©s de redes p√∫blicas, debe usar SSL para cifrar la conexi√≥n. <br><br><h3>  Estructura del paquete </h3><br>  Como se mencion√≥ anteriormente, en el protocolo MQTT, los clientes siempre inician una conexi√≥n, independientemente de si son destinatarios (Suscriptor) o proveedores (Editor) de datos.  Analizaremos el paquete con la conexi√≥n que fue interceptada usando el programa Wireshark. <br><br><img src="https://habrastorage.org/webt/ep/0t/hv/ep0thv6e3zsvyzgizw89gpxgytg.png"><br>  <font color="999999">Paquete MQTT transmitido por un canal no encriptado</font> <br><br>  El encabezado TCP muestra que el paquete se transmiti√≥ en el puerto 1883, es decir, no se utiliza el cifrado, lo que significa que todos los datos est√°n disponibles en forma clara, incluidos el inicio de sesi√≥n y la contrase√±a. <br><br><h4>  Titular </h4><br>  <b>El tipo de mensaje</b> es Conectar (comando 0x0001), estableciendo una conexi√≥n con el intermediario.  Equipos principales: conectar, desconectar, publicar, suscribir, cancelar suscripci√≥n.  Tambi√©n hay comandos de reconocimiento, mantener vivo, etc. <br><br>  <b>DUP de marca</b> : significa que el mensaje se retransmite, se usa solo en los tipos de mensaje PUBLISH, SUBSCRIBE, UNSUBSCRIBE, PUBREL, para los casos en que el corredor no recibi√≥ la confirmaci√≥n de la recepci√≥n del mensaje anterior. <br>  <b>Nivel</b> de calidad del servicio: indicador de calidad de servicio.  Discutiremos este tema con m√°s detalle m√°s adelante. <br>  <b>Retener</b> : los datos publicados con el indicador de retenci√≥n se almacenan en el intermediario.  Tras la subsiguiente suscripci√≥n a este tema, el agente enviar√° inmediatamente un mensaje con esta bandera.  Se usa solo en mensajes de tipo Publicar. <br><br><h2>  Uso pr√°ctico </h2><br><img width="100" src="https://habrastorage.org/webt/v9/m9/2k/v9m92kvqrkibu8zt9pfsdjkngg8.png"><br><br>  Ahora, habi√©ndonos familiarizado con la teor√≠a, intentemos trabajar con MQTT en la pr√°ctica.  Para esto, utilizaremos el programa abierto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mosquitto</a> , que puede funcionar tanto en modo cliente como en modo servidor (intermediario).  Funciona en Windows, macOS, Linux.  El programa es muy conveniente para depurar y estudiar el protocolo MQTT, mientras que tambi√©n es ampliamente utilizado en operaciones industriales.  Lo utilizaremos como cliente para enviar y recibir datos de un agente de nube remoto. <br><br>  Muchos proveedores de la nube brindan servicios de agente MQTT, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Microsoft Azure IoT Hub</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Amazon AWS IoT</a> y otros.  En este ejemplo, utilizaremos el servicio Cloudmqtt.com, ya que tiene el registro m√°s simple y una tarifa gratuita es suficiente para la capacitaci√≥n. <br><br>  Despu√©s del registro, los detalles para conectarse a un corredor est√°n disponibles en su cuenta.  Como nos conectamos al servidor a trav√©s de redes p√∫blicas de Internet, es razonable usar un puerto SSL para encriptar el tr√°fico. <br><br><img src="https://habrastorage.org/webt/gh/rq/t5/ghrqt5ady8x8twccmfrtngm-htu.png"><br>  <font color="999999">Detalles de acceso del agente MQTT en la cuenta personal del proveedor de la nube</font> <br><br>  La flexibilidad del protocolo MQTT permite al cliente transferir datos no definidos previamente en el intermediario.  Es decir, no es necesario crear previamente los temas necesarios en los que Publisher puede escribir datos.  Usando los datos recibidos de su cuenta personal, intentaremos redactar manualmente una solicitud para publicar datos en el tema <i>habr / test / random</i> y leerlos. <br><br>  <b>mosquitto_sub</b> - utilidad de cliente de suscriptor <br>  <b>mosquitto_pub</b> - utilidad del cliente editor <br><br>  Primero, con√©ctese al corredor como suscriptor y suscr√≠base para recibir datos del tema <br>  <i>habr / prueba / aleatorio</i> . <br><br><pre> <code class="plaintext hljs">mosquitto_sub -d --capath /etc/ssl/certs/ --url mqtts://hwjspxxt:7oYugN7Fa5Aa@postman.cloudmqtt.com:27529/habr/test/random Client mosq/zEPZz0glUiR4aEipZA sending CONNECT Client mosq/zEPZz0glUiR4aEipZA received CONNACK (0) Client mosq/zEPZz0glUiR4aEipZA sending SUBSCRIBE (Mid: 1, Topic: habr/test/random, QoS: 0, Options: 0x00) Client mosq/zEPZz0glUiR4aEipZA received SUBACK</code> </pre><br>  Se puede ver que la conexi√≥n fue exitosa, y nos suscribimos al tema <b>habr / test / random</b> , y ahora estamos esperando datos del broker sobre este tema. <br><blockquote>  Como se utiliza una conexi√≥n SSL, para verificar el certificado, debe especificar la ruta por la cual el programa buscar√° los certificados de cifrado ra√≠z.  Dado que el servicio en nuestro ejemplo usa un certificado emitido por una autoridad de certificaci√≥n confiable, indicamos la ruta al almac√©n del sistema para los certificados ra√≠z: <i><b>--capath / etc / ssl / certs /</b></i> <br><br>  En el caso de un certificado autofirmado, debe especificar la ruta a la CA deseada.  Tambi√©n es importante considerar la diferencia en el formato URI para las conexiones SSL - mqtt <b>s</b> : //, y las conexiones no encriptadas - mqtt: //.  En el caso de un error de verificaci√≥n del certificado, el programa finaliza sin un mensaje de error.  Para una salida m√°s detallada, puede usar el modificador --debug </blockquote>  Ahora intentemos publicar los datos en el tema sin interrumpir el primer programa. <br><br><pre> <code class="plaintext hljs">mosquitto_pub -d --capath /etc/ssl/certs/ --url mqtt://hwjspxxt:7oYugN7Fa5Aa@postman.cloudmqtt.com:27529/habr/test/random -m " !" Client mosq/sWjh9gf8DRASrRZjk6 sending CONNECT Client mosq/sWjh9gf8DRASrRZjk6 received CONNACK (0) Client mosq/sWjh9gf8DRASrRZjk6 sending PUBLISH (d0, q0, r0, m1, 'habr/test/random', ... (22 bytes)) Client mosq/sWjh9gf8DRASrRZjk6 sending DISCONNECT</code> </pre><br>  Se puede ver que los datos fueron recibidos con √©xito por el servidor y publicados en el tema deseado.  Al mismo tiempo, en la primera ventana en la que se ejecuta el programa mosquitto_sub, vemos c√≥mo se recibi√≥ el mensaje, mientras que incluso Unicode funciona, puede ver el mensaje en ruso. <br><br><pre> <code class="plaintext hljs">Client mosq/zEPZz0glUiR4aEipZA received PUBLISH (d0, q0, r0, m0, 'habr/test/random', ... (22 bytes))  !</code> </pre><br><h2>  QoS y garant√≠a de entrega </h2><br>  Sin embargo, enviar un mensaje en tiempo real no sorprender√° a nadie, porque lo mismo se puede hacer incluso con la utilidad banal <b>nc</b> .  Por lo tanto, intentaremos simular una conexi√≥n inestable entre el suscriptor y el remitente.  Imagine que ambos clientes trabajan a trav√©s de GPRS, con una gran p√©rdida de paquetes, e incluso una conexi√≥n TCP exitosa es rara, y debe asegurarse de que el suscriptor tenga la garant√≠a de recibir un mensaje del remitente.  En este caso, las opciones de QoS vienen al rescate. <br><br>  De manera predeterminada, el indicador de <b>QoS</b> se establece <b>en 0</b> para los mensajes, lo que significa "Activar y olvidar": el editor publica el mensaje en el intermediario, pero no requiere que se garantice que el mensaje se entregue al suscriptor.  Esto es adecuado para datos cuya p√©rdida no es cr√≠tica, por ejemplo, para mediciones regulares de humedad o temperatura. <br><br>  <b>QoS 1: al menos una vez, al menos uno</b> .  Este indicador significa que hasta que el editor reciba la confirmaci√≥n de entrega al suscriptor, esta publicaci√≥n se enviar√° al intermediario y luego al suscriptor.  Por lo tanto, el suscriptor debe recibir este mensaje al menos una vez. <br><br>  <b>QoS 2: Exactamente una vez, uno garantizado</b> .  El indicador QoS, que proporciona la m√°xima garant√≠a de entrega de mensajes mediante el uso de procedimientos adicionales para la confirmaci√≥n y finalizaci√≥n de la publicaci√≥n (PUBREC, PUBREL, PUBCOMP).  Aplicable a situaciones en las que es necesario excluir cualquier p√©rdida y duplicaci√≥n de datos de los sensores.  Por ejemplo, cuando se activa una alarma desde un mensaje recibido, se realiza una llamada de emergencia. <br><br>  Para simular una comunicaci√≥n deficiente, desactive ambos clientes e intente enviar un mensaje con la mayor prioridad de QoS, y tambi√©n agregue la opci√≥n Retener para que el mensaje enviado se guarde en el intermediario. <br><br><pre> <code class="plaintext hljs">mosquitto_pub --retain --qos 2 -d --capath /etc/ssl/certs/ --url mqtt://hwjspxxt:7oYugN7Fa5Aa@postman.cloudmqtt.com:27529/habr/test/random -m "  !" Client mosq/Xwhua3GAyyY9mMd05V sending CONNECT Client mosq/Xwhua3GAyyY9mMd05V received CONNACK (0) Client mosq/Xwhua3GAyyY9mMd05V sending PUBLISH (d0, q2, r1, m1, 'habr/test/random', ... (37 bytes)) Client mosq/Xwhua3GAyyY9mMd05V received PUBREC (Mid: 1) Client mosq/Xwhua3GAyyY9mMd05V sending PUBREL (m1) Client mosq/Xwhua3GAyyY9mMd05V received PUBCOMP (Mid: 1, RC:0) Client mosq/Xwhua3GAyyY9mMd05V sending DISCONNECT</code> </pre><br>  Ahora, despu√©s de un tiempo, nuestro destinatario finalmente pudo establecer una conexi√≥n a Internet y conectarse al corredor: <br><br><pre> <code class="plaintext hljs">mosquitto_sub -d --capath /etc/ssl/certs/ -d --url mqtts://hwjspxxt:7oYugN7Fa5Aa@postman.cloudmqtt.com:27529/habr/test/random Client mosq/VAzcLVMB1MiWhYxoJS sending CONNECT Client mosq/VAzcLVMB1MiWhYxoJS received CONNACK (0) Client mosq/VAzcLVMB1MiWhYxoJS sending SUBSCRIBE (Mid: 1, Topic: habr/test/random, QoS: 0, Options: 0x00) Client mosq/VAzcLVMB1MiWhYxoJS received SUBACK Subscribed (mid: 1): 0 Client mosq/r6UwPnDvx8aNInpPF6 received PUBLISH (d0, q0, r1, m0, 'habr/test/random', ... (37 bytes))   !</code> </pre><br><h2>  Conclusi√≥n </h2><br>  MQTT es un protocolo moderno y avanzado, desprovisto de muchos de los inconvenientes de sus predecesores.  Su flexibilidad le permite agregar dispositivos cliente sin configurar un corredor, lo que ahorra mucho tiempo.  El umbral de entrada para comprender y configurar el protocolo es bastante bajo, y la presencia de bibliotecas para muchos lenguajes de programaci√≥n le permite elegir cualquier pila de tecnolog√≠a para el desarrollo.  La garant√≠a de entrega de mensajes distingue significativamente a MQTT de sus predecesores y le permite no perder tiempo desarrollando innecesariamente sus propios mecanismos de control de integridad a nivel de red. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/452904/">https://habr.com/ru/post/452904/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452890/index.html">23 de mayo, 18:30 - transmisi√≥n en vivo de QIWI Kitchen</a></li>
<li><a href="../452892/index.html">¬øC√≥mo puede un no programador mudarse a los Estados Unidos? Instrucciones paso a paso.</a></li>
<li><a href="../452894/index.html">Face Anti-Spoofing o tecnol√≥gicamente reconoce a un tramposo de mil por cara</a></li>
<li><a href="../452900/index.html">√çndices en PostgreSQL - 9 (BRIN)</a></li>
<li><a href="../452902/index.html">Terminando 4 a√±os de entrenamiento como programador, entiendo que estoy lejos de ser un programador</a></li>
<li><a href="../452906/index.html">Motores JavaScript: ¬øc√≥mo funcionan? Desde la pila de llamadas hasta las promesas, (casi) todo lo que necesita saber</a></li>
<li><a href="../452908/index.html">Selenium WebDriver: m√©trica de prueba en tiempo real con Grafana e InfluxDB</a></li>
<li><a href="../452910/index.html">Hola Habr! Hola tercon</a></li>
<li><a href="../452914/index.html">ML en Scala con una sonrisa, para aquellos que no tienen miedo a la experimentaci√≥n</a></li>
<li><a href="../452916/index.html">Lev√°ntate y vete. Cirug√≠a de columna: cu√°ndo hacer, qu√© es peligroso</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>