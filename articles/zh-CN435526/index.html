<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘¨ğŸ¼â€ğŸ”§ ğŸˆ ğŸ¤¾ğŸ¿ Kuberneteså®¶åº­é›†ç¾¤çš„å†’é™© ğŸ¥˜ ğŸ‘©ğŸ¿â€ğŸ”§ ğŸ‘¯</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="æ³¨æ„äº‹é¡¹ ä½©é›·å¤« ï¼šæœ¬æ–‡çš„ä½œè€…Marshall Brekkaåœ¨Fair.comä¸Šæ‹…ä»»ç³»ç»Ÿè®¾è®¡ä¸»ç®¡çš„èŒä½ï¼Œè¯¥ç³»ç»Ÿå°†å…¶åº”ç”¨äºæ±½è½¦ç§Ÿèµã€‚ åœ¨ä¸šä½™æ—¶é—´ï¼Œä»–å–œæ¬¢åˆ©ç”¨ä»–ä¸°å¯Œçš„ç»éªŒæ¥è§£å†³â€œå®¶åº­â€é—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä¸å¯èƒ½ä½¿ä»»ä½•æ€ªèƒéƒ½æ„Ÿåˆ°æƒŠè®¶ï¼ˆå› æ­¤ï¼Œå°±ä»¥ä¸‹æ‰€è¿°çš„åŠ¨ä½œè€Œè¨€ï¼Œâ€œä¸ºä»€ä¹ˆï¼Ÿâ€è¿™ä¸ªé—®é¢˜æ˜¯å…ˆéªŒçš„ï¼‰ã€‚ å› æ­¤ï¼Œé©¬æ­‡å°”ï¼ˆM...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kuberneteså®¶åº­é›†ç¾¤çš„å†’é™©</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/435526/">  <i><b>æ³¨æ„äº‹é¡¹</b></i>  <i><b>ä½©é›·å¤«</b></i>  <i>ï¼šæœ¬æ–‡çš„ä½œè€…Marshall Brekkaåœ¨Fair.comä¸Šæ‹…ä»»ç³»ç»Ÿè®¾è®¡ä¸»ç®¡çš„èŒä½ï¼Œè¯¥ç³»ç»Ÿå°†å…¶åº”ç”¨äºæ±½è½¦ç§Ÿèµã€‚</i>  <i>åœ¨ä¸šä½™æ—¶é—´ï¼Œä»–å–œæ¬¢åˆ©ç”¨ä»–ä¸°å¯Œçš„ç»éªŒæ¥è§£å†³â€œå®¶åº­â€é—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä¸å¯èƒ½ä½¿ä»»ä½•æ€ªèƒéƒ½æ„Ÿåˆ°æƒŠè®¶ï¼ˆå› æ­¤ï¼Œå°±ä»¥ä¸‹æ‰€è¿°çš„åŠ¨ä½œè€Œè¨€ï¼Œâ€œä¸ºä»€ä¹ˆï¼Ÿâ€è¿™ä¸ªé—®é¢˜æ˜¯å…ˆéªŒçš„ï¼‰ã€‚</i>  <i>å› æ­¤ï¼Œé©¬æ­‡å°”ï¼ˆMarshallï¼‰åœ¨ä»–çš„å‡ºç‰ˆç‰©ä¸­åˆ†äº«äº†æœ€è¿‘åœ¨... ARMæ¿ä¸Šéƒ¨ç½²Kubernetesçš„ç»“æœã€‚</i> <br><br><img src="https://habrastorage.org/webt/ul/nj/do/ulnjdoyysctwv-34jhuyn-wvsp8.png"><br><br> åƒè®¸å¤šå…¶ä»–æ€ªèƒä¸€æ ·ï¼Œè¿™äº›å¹´æ¥ï¼Œæˆ‘ç§¯ç´¯äº†å„ç§å¼€å‘æ¿ï¼Œä¾‹å¦‚Raspberry Piã€‚ å°±åƒè®¸å¤šæå®¢ä¸€æ ·ï¼Œä»–ä»¬ä»¥ä¸ºæœ‰ä¸€å¤©ä¼šæ´¾ä¸Šç”¨åœºè€Œåœ¨æ¶å­ä¸Šæ’’æ»¡ç°å°˜ã€‚ ç°åœ¨å¯¹æˆ‘è€Œè¨€ï¼Œè¿™ä¸€å¤©ç»ˆäºåˆ°äº†ï¼ <a name="habracut"></a><br><br> åœ¨å¯’å‡æœŸé—´ï¼Œå‡ºç°äº†å‡ å‘¨çš„å·¥ä½œæ—¶é—´ï¼Œåœ¨è¿™æ®µæ—¶é—´å†…æœ‰è¶³å¤Ÿçš„æ—¶é—´ç›˜ç‚¹æ‰€æœ‰ç§¯èšçš„é“å¹¶å†³å®šå¦‚ä½•å¤„ç†ã€‚ è¿™æ˜¯æˆ‘æ‰€æ‹¥æœ‰çš„ï¼š <br><br><ul><li> å…·æœ‰USB3è¿æ¥çš„5é©±åŠ¨å™¨RAIDæœºç®±ï¼› </li><li>  Raspberry Piæ¨¡å‹Bï¼ˆOGæ¨¡å‹ï¼‰ï¼› </li><li>  CubbieBoard 1; </li><li> é¦™è•‰æ´¾M1; </li><li>  HPä¸Šç½‘æœ¬ï¼ˆ2012ï¼Ÿï¼‰ã€‚ </li></ul><br> åœ¨åˆ—å‡ºçš„5ä¸ªé“ç»„ä»¶ä¸­ï¼Œé™¤éRAIDå’Œä¸Šç½‘æœ¬ç”¨ä½œä¸´æ—¶NASï¼Œå¦åˆ™æˆ‘å°†ä½¿ç”¨è¯¥ç»„ä»¶ã€‚ ä½†æ˜¯ï¼Œç”±äºä¸Šç½‘æœ¬ä¸­ç¼ºå°‘USB3æ”¯æŒï¼Œå› æ­¤RAIDæ— æ³•å……åˆ†å‘æŒ¥é€Ÿåº¦çš„æ½œåŠ›ã€‚ <br><br><h2> äººç”Ÿç›®æ ‡ </h2><br> ç”±äºä½¿ç”¨ä¸Šç½‘æœ¬æ—¶ä½¿ç”¨RAIDå¹¶ä¸æ˜¯æœ€ä½³é€‰æ‹©ï¼Œå› æ­¤æˆ‘åˆ¶å®šäº†ä»¥ä¸‹ç›®æ ‡ä»¥è·å¾—æœ€ä½³é…ç½®ï¼š <br><br><ol><li> å¸¦æœ‰USB3å’Œåƒå…†ä»¥å¤ªç½‘çš„NASï¼› </li><li> åœ¨è®¾å¤‡ä¸Šç®¡ç†è½¯ä»¶çš„æœ€ä½³æ–¹æ³• </li><li>  ï¼ˆå¥–åŠ±ï¼‰å°†å¤šåª’ä½“å†…å®¹ä»RAIDæµä¼ è¾“åˆ°Fire TVçš„èƒ½åŠ›ã€‚ </li></ol><br> ä¸å¹¸çš„æ˜¯ï¼Œç”±äºæ²¡æœ‰å¯ç”¨çš„è®¾å¤‡æ”¯æŒUSB3å’Œåƒå…†ä»¥å¤ªç½‘ï¼Œå› æ­¤ï¼Œæˆ‘ä¸å¾—ä¸é¢å¤–è´­ä¹°ã€‚ é€‰æ‹©æƒåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ROC-RK3328-CCä¸Š</a> ã€‚ å¥¹æ‹¥æœ‰æ‰€æœ‰å¿…è¦çš„è§„æ ¼ä»¥åŠå¯¹æ“ä½œç³»ç»Ÿçš„å……åˆ†æ”¯æŒã€‚ <br><br> è§£å†³äº†æˆ‘çš„ç¡¬ä»¶éœ€æ±‚ï¼ˆå¹¶ç­‰å¾…è¯¥è§£å†³æ–¹æ¡ˆçš„åˆ°æ¥ï¼‰ä¹‹åï¼Œæˆ‘è½¬å‘äº†ç¬¬äºŒä¸ªç›®æ ‡ã€‚ <br><br><h2> ç®¡ç†è®¾å¤‡ä¸Šçš„è½¯ä»¶ </h2><br> éƒ¨åˆ†åŸå› æ˜¯æˆ‘è¿‡å»ä¸å¼€å‘å§”å‘˜ä¼šæœ‰å…³çš„é¡¹ç›®å¤±è´¥äº†ï¼ŒåŸå› æ˜¯å¯¹å¯é‡å¤æ€§å’Œæ–‡æ¡£é—®é¢˜çš„å…³æ³¨ä¸è¶³ã€‚ å½“åˆ›å»ºæ»¡è¶³å½“å‰éœ€æ±‚çš„ä¸‹ä¸€ä¸ªé…ç½®æ—¶ï¼Œæˆ‘ä¸å¿…è´¹å¿ƒå†™ä¸‹æ‰€é‡‡å–çš„æ­¥éª¤æˆ–æ‰€å…³æ³¨åšå®¢æ–‡ç« çš„é“¾æ¥ã€‚ å‡ ä¸ªæœˆæˆ–å‡ å¹´åï¼Œå½“å‡ºç°é—®é¢˜å¹¶å°è¯•è§£å†³é—®é¢˜æ—¶ï¼Œæˆ‘å¯¹æ‰€æœ‰å†…å®¹çš„æœ€åˆå®‰æ’éƒ½ä¸äº†è§£ã€‚ <br><br> æ‰€ä»¥æˆ‘å‘Šè¯‰è‡ªå·±ï¼Œè¿™æ¬¡ä¸€åˆ‡éƒ½ä¼šæœ‰æ‰€ä¸åŒï¼ <br><br><img src="https://habrastorage.org/webt/dm/vb/iv/dmvbivkoa65wfd1ve5mo5wh5jdc.jpeg"><br><br> ä»–è½¬å‘æˆ‘å¯¹Kubernetesè¶³å¤Ÿäº†è§£çš„äº‹å®ã€‚ <br><br> å°½ç®¡K8så¾ˆéš¾è§£å†³ä¸€ä¸ªç›¸å½“ç®€å•çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨ä¸»è¦å·¥ä½œä¸­ä½¿ç”¨å„ç§å·¥å…·ï¼ˆæˆ‘è‡ªå·±çš„ï¼Œkopsç­‰ï¼‰ç®¡ç†é›†ç¾¤è¿‘ä¸‰å¹´ä¹‹åï¼Œæˆ‘å¯¹è¿™ä¸ªç³»ç»Ÿéå¸¸ç†Ÿæ‚‰ã€‚ æ­¤å¤–ï¼Œåœ¨äº‘ç¯å¢ƒä¹‹å¤–ç”šè‡³åœ¨ARMè®¾å¤‡ä¸Šéƒ¨ç½²K8ä¼¼ä¹æ˜¯ä¸€é¡¹æœ‰è¶£çš„ä»»åŠ¡ã€‚ <br><br> æˆ‘è¿˜è®¤ä¸ºï¼Œç”±äºå¯ç”¨çš„ç¡¬ä»¶ä¸æ»¡è¶³NASçš„å¿…è¦è¦æ±‚ï¼Œå› æ­¤æˆ‘å°†å°è¯•è‡³å°‘ä»ä¸­ç»„è£…ä¸€ä¸ªé›†ç¾¤ï¼Œå¹¶ä¸”å¯èƒ½æŸäº›èµ„æºè¦æ±‚ä¸é«˜çš„è½¯ä»¶å°†èƒ½å¤Ÿåœ¨è¾ƒæ—§çš„è®¾å¤‡ä¸Šè¿è¡Œã€‚ <br><br><h2>  Kubernetesåœ¨ARMä¸Š </h2><br> åœ¨å·¥ä½œä¸­ï¼Œæˆ‘æ²¡æœ‰æœºä¼šä½¿ç”¨<code>kubeadm</code>å®ç”¨ç¨‹åºæ¥éƒ¨ç½²é›†ç¾¤ï¼Œæ‰€ä»¥æˆ‘å†³å®šç°åœ¨è¯¥è¿›è¡Œå®é™…æ“ä½œäº†ã€‚ <br><br> é€‰æ‹©Raspbianä½œä¸ºæ“ä½œç³»ç»Ÿæ˜¯å› ä¸ºå®ƒä»¥å¯¹æˆ‘çš„ä¸»æ¿çš„æœ€ä½³æ”¯æŒè€Œé—»åã€‚ <br><br> æˆ‘æ‰¾åˆ°äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸€ç¯‡å¾ˆå¥½çš„æ–‡ç« </a> ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨HypriotOSåœ¨Raspberry Piä¸Šè®¾ç½®Kubernetesã€‚ ç”±äºæˆ‘ä¸ç¡®å®šæˆ‘æ‰€æœ‰ä¸»æ¿çš„HypriotOSæ˜¯å¦å¯ç”¨ï¼Œå› æ­¤æˆ‘é’ˆå¯¹Debian / Raspbianä¿®æ”¹äº†è¿™äº›è¯´æ˜ã€‚ <br><br><h3> æ‰€éœ€ç»„ä»¶ </h3><br> é¦–å…ˆï¼Œéœ€è¦å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š <br><br><ul><li> ç å¤´å·¥äºº </li><li>  kubelet </li><li> åº“è´é˜¿å§† </li><li>  kubectlã€‚ </li></ul><br> å¿…é¡»ä½¿ç”¨ç‰¹æ®Šè„šæœ¬ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¾¿æ·è„šæœ¬ï¼‰</a>å®‰è£…Dockerï¼ˆå¦‚ä½¿ç”¨Raspbianæ—¶æ‰€ç¤ºï¼‰ã€‚ <br><br><pre> <code class="bash hljs">curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.sh</code> </pre> <br> ä¹‹åï¼Œæˆ‘æ ¹æ®Hypriotåšå®¢ä¸Šçš„è¯´æ˜å®‰è£…äº†Kubernetesç»„ä»¶ï¼Œå¹¶å¯¹å®ƒä»¬è¿›è¡Œäº†ä¿®æ”¹ï¼Œä»¥ä¾¿å°†ç‰¹å®šç‰ˆæœ¬ç”¨äºæ‰€æœ‰ä¾èµ–é¡¹ï¼š <br><br><pre> <code class="bash hljs">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"deb http://apt.kubernetes.io/ kubernetes-xenial main"</span></span> &gt; /etc/apt/sources.list.d/kubernetes.list apt-get update apt-get install -y kubelet=1.13.1-00 kubectl=1.13.1-00 kubeadm=1.13.1-00</code> </pre> <br><h3> æ ‘è“æ´¾ </h3><br> å°è¯•åœ¨Raspberry Pi Bä¸Šå¼•å¯¼é›†ç¾¤æ—¶å‡ºç°äº†ç¬¬ä¸€ä¸ªå›°éš¾ï¼š <br><br><pre> <code class="bash hljs">$ kubeadm init Illegal instruction</code> </pre> <br> äº‹å®è¯æ˜ï¼ŒKubernetes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åˆ é™¤äº†å¯¹ARMv6çš„æ”¯æŒ</a> ã€‚ å¥½å§ï¼Œæˆ‘ä¹Ÿæœ‰CubbieBoardå’ŒBanana Piã€‚ <br><br><h3> é¦™è•‰çš® </h3><br> æœ€åˆï¼ŒBanana Piçš„ç›¸åŒæ“ä½œé¡ºåºä¼¼ä¹æ›´ä¸ºæˆåŠŸï¼Œä½†æ˜¯ï¼Œ <code>kubeadm init</code>å‘½ä»¤åœ¨å°è¯•ç­‰å¾…æ§åˆ¶å¹³é¢å·¥ä½œæ—¶<code>kubeadm init</code> ï¼š <br><br><pre> <code class="plaintext hljs">error execution phase wait-control-plane: couldn't initialize a Kubernetes cluster</code> </pre> <br> ä¸<code>docker ps</code>äº†è§£äº†å®¹å™¨çš„æƒ…å†µåï¼Œæˆ‘çœ‹åˆ°<code>kube-controller-manager</code>å’Œ<code>kube-scheduler</code>éƒ½å·¥ä½œäº†è‡³å°‘4-5åˆ†é’Ÿï¼Œä½†æ˜¯<code>kube-api-server</code>æ‰åœ¨1-2åˆ†é’Ÿå‰èµ·åºŠï¼š <br><br><pre> <code class="bash hljs">$ docker ps CONTAINER ID COMMAND CREATED STATUS de22427ad594 <span class="hljs-string"><span class="hljs-string">"kube-apiserver --auâ€¦"</span></span> About a minute ago Up About a minute dc2b70dd803e <span class="hljs-string"><span class="hljs-string">"kube-scheduler --adâ€¦"</span></span> 5 minutes ago Up 5 minutes 60b6cc418a66 <span class="hljs-string"><span class="hljs-string">"kube-controller-manâ€¦"</span></span> 5 minutes ago Up 5 minutes 1e1362a9787c <span class="hljs-string"><span class="hljs-string">"etcd --advertise-clâ€¦"</span></span> 5 minutes ago Up 5 minutes</code> </pre> <br> æ˜¾ç„¶ï¼Œ <code>api-server</code>å¿«è¦æ­»äº†ï¼Œæˆ–è€…é”¶è¿›ç¨‹æ­£åœ¨æ€æ­»å®ƒå¹¶é‡æ–°å¯åŠ¨å®ƒã€‚ <br><br> åœ¨æ£€æŸ¥æ—¥å¿—æ—¶ï¼Œæˆ‘çœ‹åˆ°äº†éå¸¸æ ‡å‡†çš„å¯åŠ¨è¿‡ç¨‹-åœ¨TLSæ¡æ‰‹ä¸­å‡ºç°è®¸å¤šé”™è¯¯ä¹‹å‰ï¼Œæœ‰è®°å½•å¼€å§‹ç›‘å¬å®‰å…¨ç«¯å£ï¼Œå¹¶ä¸”æš‚åœäº†å¾ˆé•¿æ—¶é—´ï¼š <br><br><pre> <code class="plaintext hljs">20:06:48.604881 naming_controller.go:284] Starting NamingConditionController 20:06:48.605031 establishing_controller.go:73] Starting EstablishingController 20:06:50.791098 log.go:172] http: TLS handshake error from 192.168.1.155:50280: EOF 20:06:51.797710 log.go:172] http: TLS handshake error from 192.168.1.155:50286: EOF 20:06:51.971690 log.go:172] http: TLS handshake error from 192.168.1.155:50288: EOF 20:06:51.990556 log.go:172] http: TLS handshake error from 192.168.1.155:50284: EOF 20:06:52.374947 log.go:172] http: TLS handshake error from 192.168.1.155:50486: EOF 20:06:52.612617 log.go:172] http: TLS handshake error from 192.168.1.155:50298: EOF 20:06:52.748668 log.go:172] http: TLS handshake error from 192.168.1.155:50290: EOF</code> </pre> <br> æ­¤åä¸ä¹…ï¼ŒæœåŠ¡å™¨ç»“æŸäº†å·¥ä½œã€‚ è°·æ­Œæœç´¢å¯¼è‡´äº†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™æ ·çš„é—®é¢˜</a> ï¼Œè¡¨æ˜åœ¨æŸäº›ARMè®¾å¤‡ä¸ŠåŠ å¯†ç®—æ³•è¿è¡Œç¼“æ…¢çš„å¯èƒ½åŸå› ã€‚ <br><br> æˆ‘èµ°å¾—æ›´è¿œï¼Œä»¥ä¸º<code>api-server</code>å¯èƒ½ä»<code>scheduler</code>å’Œ<code>controller-manager</code>æ”¶åˆ°å¤ªå¤šé‡å¤è¯·æ±‚ã€‚ <br><br> ä»æ¸…å•ç›®å½•ä¸­åˆ é™¤è¿™äº›æ–‡ä»¶å°†å‘Šè¯‰kubeletåœæ­¢æ‰§è¡Œç›¸åº”çš„podï¼š <br><br><pre> <code class="bash hljs">mkdir /etc/kubernetes/manifests.bak mv /etc/kubernetes/manifests/kube-scheduler.yaml /etc/kubernetes/manifests.bak/ mv /etc/kubernetes/manifests/kube-controller-mananger.yaml /etc/kubernetes/manifests.bak/</code> </pre> <br> æŸ¥çœ‹æœ€æ–°çš„<code>api-server</code>æ—¥å¿—æ˜¾ç¤ºï¼Œç°åœ¨è¯¥è¿‡ç¨‹è¿›ä¸€æ­¥è¿›è¡Œäº†ï¼Œä½†æ˜¯ï¼Œå¤§çº¦2åˆ†é’Ÿåå®ƒä»ç„¶æ­»äº†ã€‚ ç„¶åæˆ‘æƒ³èµ·äº†æ¸…å•å¯èƒ½åŒ…å«ä¸€ä¸ªæ´»åŠ¨æ ·æœ¬ï¼Œå¯¹äºè¿™æ ·ä¸€ä¸ªç¼“æ…¢çš„è®¾å¤‡ï¼Œå…¶è¶…æ—¶å€¼å¤ªä½ã€‚ <br><br> å› æ­¤ï¼Œæˆ‘æ£€æŸ¥äº†<code>/etc/kubernetes/manifests/kube-api-server.yaml</code>å½“ç„¶ï¼Œåœ¨å…¶ä¸­... <br><br><pre> <code class="plaintext hljs">livenessProbe: failureThreshold: 8 httpGet: host: 192.168.1.155 path: /healthz port: 6443 scheme: HTTPS initialDelaySeconds: 15 timeoutSeconds: 15</code> </pre> <br>  Podåœ¨135ç§’åè¢«æ€æ­»ï¼ˆ <code>initialDelaySeconds</code> + <code>timeoutSeconds</code> * <code>timeoutSeconds</code> ï¼‰ã€‚ å°†<code>initialDelaySeconds</code>å¢åŠ åˆ°120 ... <br><br>  <b>æˆåŠŸï¼</b> å¥½å§ï¼Œæ¡æ‰‹é”™è¯¯ä»ç„¶ä¼šå‘ç”Ÿï¼ˆå¤§æ¦‚æ˜¯æ¥è‡ªkubeletï¼‰ï¼Œä½†æ˜¯å¯åŠ¨ä»ç„¶å‘ç”Ÿäº†ï¼š <br><br><pre> <code class="plaintext hljs">20:06:54.957236 log.go:172] http: TLS handshake error from 192.168.1.155:50538: EOF 20:06:55.004865 log.go:172] http: TLS handshake error from 192.168.1.155:50384: EOF 20:06:55.118343 log.go:172] http: TLS handshake error from 192.168.1.155:50292: EOF 20:06:55.252586 cache.go:39] Caches are synced for autoregister controller 20:06:55.253907 cache.go:39] Caches are synced for APIServiceRegistrationController controller 20:06:55.545881 controller_utils.go:1034] Caches are synced for crd-autoregister controller ... 20:06:58.921689 storage_rbac.go:187] created clusterrole.rbac.authorization.k8s.io/cluster-admin 20:06:59.049373 storage_rbac.go:187] created clusterrole.rbac.authorization.k8s.io/system:discovery 20:06:59.214321 storage_rbac.go:187] created clusterrole.rbac.authorization.k8s.io/system:basic-user</code> </pre> <br> å½“<code>api-server</code>å¯åŠ¨æ—¶ï¼Œæˆ‘å°†æ§åˆ¶å™¨å’Œè°ƒåº¦ç¨‹åºçš„YAMLæ–‡ä»¶ç§»å›äº†æ¸…å•ç›®å½•ï¼Œç„¶åå®ƒä»¬ä¹Ÿæ­£å¸¸å¯åŠ¨ã€‚ <br><br> ç°åœ¨ï¼Œå¦‚æœæ‚¨å°†æ‰€æœ‰æ–‡ä»¶éƒ½ä¿ç•™åœ¨æºç›®å½•ä¸­ï¼Œå°±å¯ä»¥ç¡®ä¿ä¸‹è½½æˆåŠŸï¼šæ˜¯å¦è¶³ä»¥æ›´æ”¹<code>livenessProbe</code>åˆå§‹åŒ–çš„å…è®¸å»¶è¿Ÿï¼Ÿ <br><br><pre> <code class="plaintext hljs">20:29:33.306983 reflector.go:134] k8s.io/client-go/informers/factory.go:132: Failed to list *v1.Service: Get https://192.168.1.155:6443/api/v1/services?limit=500&amp;resourceVersion=0: dial tcp 192.168.1.155:6443: i/o timeout 20:29:33.434541 reflector.go:134] k8s.io/client-go/informers/factory.go:132: Failed to list *v1.ReplicationController: Get https://192.168.1.155:6443/api/v1/replicationcontrollers?limit=500&amp;resourceVersion=0: dial tcp 192.168.1.155:6443: i/o timeout 20:29:33.435799 reflector.go:134] k8s.io/client-go/informers/factory.go:132: Failed to list *v1.PersistentVolume: Get https://192.168.1.155:6443/api/v1/persistentvolumes?limit=500&amp;resourceVersion=0: dial tcp 192.168.1.155:6443: i/o timeout 20:29:33.477405 reflector.go:134] k8s.io/client-go/informers/factory.go:132: Failed to list *v1beta1.PodDisruptionBudget: Get https://192.168.1.155:6443/apis/policy/v1beta1/poddisruptionbudgets?limit=500&amp;resourceVersion=0: dial tcp 192.168.1.155:6443: i/o timeout 20:29:33.493660 reflector.go:134] k8s.io/client-go/informers/factory.go:132: Failed to list *v1.PersistentVolumeClaim: Get https://192.168.1.155:6443/api/v1/persistentvolumeclaims?limit=500&amp;resourceVersion=0: dial tcp 192.168.1.155:6443: i/o timeout 20:29:37.974938 controller_utils.go:1027] Waiting for caches to sync for scheduler controller 20:29:38.078558 controller_utils.go:1034] Caches are synced for scheduler controller 20:29:38.078867 leaderelection.go:205] attempting to acquire leader lease kube-system/kube-scheduler 20:29:38.291875 leaderelection.go:214] successfully acquired lease kube-system/kube-scheduler</code> </pre> <br> æ˜¯çš„ï¼Œä¸€åˆ‡æ­£å¸¸ï¼Œå°½ç®¡è¿™äº›æ—§è®¾å¤‡æ˜¾ç„¶ä¸æ‰“ç®—å¯åŠ¨æ§åˆ¶å¹³é¢ï¼Œå› ä¸ºé‡å¤çš„TLSè¿æ¥ä¼šå¯¼è‡´ä¸¥é‡çš„åˆ¹è½¦ã€‚ ä¸€ç§æˆ–å¦ä¸€ç§æ–¹å¼-å¯ä»¥åœ¨ARMä¸Šæ­£å¸¸å®‰è£…K8ï¼ è®©æˆ‘ä»¬æ›´è¿›ä¸€æ­¥... <br><br><h3>  RAIDæŒ‚è½½ </h3><br> ç”±äºSDå¡ä»é•¿è¿œæ¥çœ‹ä¸é€‚åˆè®°å½•ï¼Œå› æ­¤æˆ‘å†³å®šå¯¹æ–‡ä»¶ç³»ç»Ÿä¸­æœ€æ˜“å¤±çš„éƒ¨åˆ†ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºRAIDï¼‰ä½¿ç”¨æ›´å¯é çš„å­˜å‚¨ã€‚ å…¶ä¸­çªå‡ºæ˜¾ç¤ºäº†4ä¸ªéƒ¨åˆ†ï¼š <br><br><ul><li>  50 GBï¼› </li><li>  2Ã—20 GBï¼› </li><li>  3.9ç£… </li></ul><br> å¯¹äº20 GBçš„åˆ†åŒºï¼Œæˆ‘å°šæœªæå‡ºå…·ä½“çš„ç”¨é€”ï¼Œä½†æˆ‘æƒ³ä¸ºå°†æ¥ç•™ä¸‹æ›´å¤šçš„æœºä¼šã€‚ <br><br> åœ¨<code>/etc/fstab</code>å¯¹äº50 GBåˆ†åŒºï¼ŒæŒ‚è½½ç‚¹æŒ‡å®šä¸º<code>/mnt/root</code> ï¼Œå¯¹äº3.9 TB- <code>/mnt/raid</code> ã€‚ ä¹‹åï¼Œæˆ‘å°†å¸¦æœ‰etcdå’Œdockerçš„ç›®å½•å®‰è£…åˆ°50 GBåˆ†åŒºï¼š <br><br><pre> <code class="plaintext hljs">UUID=655a39e8-9a5d-45f3-ae14-73b4c5ed50c3 /mnt/root ext4 defaults,rw,user,auto,exec 0 0 UUID=0633df91-017c-4b98-9b2e-4a0d27989a5c /mnt/raid ext4 defaults,rw,user,auto 0 0 /mnt/root/var/lib/etcd /var/lib/etcd none defaults,bind 0 0 /mnt/root/var/lib/docker /var/lib/docker none defaults,bind 0 0</code> </pre> <br><h3> åˆ°è´§ROC-RK3328-CC </h3><br> æ–°æ¿äº¤ä»˜æ—¶ï¼Œæˆ‘åœ¨å…¶ä¸Šå®‰è£…äº†K8çš„å¿…è¦ç»„ä»¶<i>ï¼ˆè¯·å‚é˜…æœ¬æ–‡çš„å¼€å¤´ï¼‰ï¼Œ</i>å¹¶å¯åŠ¨äº†<code>kubeadm init</code> ã€‚ å‡ åˆ†é’Ÿçš„ç­‰å¾…å°±æ˜¯<code>join</code>å‘½ä»¤çš„æˆåŠŸä»¥åŠåœ¨å…¶ä»–èŠ‚ç‚¹ä¸Šè¿è¡Œçš„è¾“å‡ºã€‚ <br><br> å¤ªå¥½äº†ï¼ ä¸ç”¨å¤§æƒŠå°æ€ªçš„è¶…æ—¶ã€‚ <br><br> è€Œä¸”ç”±äºRAIDä¹Ÿå°†åœ¨æ­¤æ¿ä¸Šä½¿ç”¨ï¼Œå› æ­¤éœ€è¦é‡æ–°é…ç½®å®‰è£…åº§ã€‚ æ€»ç»“æ‰€æœ‰æ­¥éª¤ï¼š <br><br><h4>  1.åœ¨/ etc / fstabä¸­æŒ‚è½½ç£ç›˜ </h4><br><pre> <code class="plaintext hljs">UUID=655a39e8-9a5d-45f3-ae14-73b4c5ed50c3 /mnt/root ext4 defaults,rw,user,auto,exec 0 0 UUID=0633df91-017c-4b98-9b2e-4a0d27989a5c /mnt/raid ext4 defaults,rw,user,auto 0 0 /mnt/root/var/lib/etcd /var/lib/etcd none defaults,bind 0 0 /mnt/root/var/lib/docker /var/lib/docker none defaults,bind 0 0</code> </pre> <br><h4>  2.å®‰è£…Dockerå’ŒK8säºŒè¿›åˆ¶æ–‡ä»¶ </h4><br><pre> <code class="bash hljs">curl -fsSL https://get.docker.com -o get-docker.sh sudo sh get-docker.sh</code> </pre> <br><pre> <code class="bash hljs">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add - <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"deb http://apt.kubernetes.io/ kubernetes-xenial main"</span></span> &gt; /etc/apt/sources.list.d/kubernetes.list apt-get update apt-get install -y kubelet=1.13.1-00 kubectl=1.13.1-00 kubeadm=1.13.1-00</code> </pre> <br><h4>  3.é…ç½®å”¯ä¸€çš„ä¸»æœºåï¼ˆé‡è¦çš„æ˜¯æ·»åŠ äº†è®¸å¤šèŠ‚ç‚¹ï¼‰ </h4><br><pre> <code class="bash hljs">hostnamectl <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>-hostname k8s-master-1</code> </pre> <br><h4>  4. Kubernetesåˆå§‹åŒ– </h4><br> æˆ‘çœç•¥äº†ä¸æ§åˆ¶å¹³é¢çš„ç›¸ä½ï¼Œå› ä¸ºæˆ‘å¸Œæœ›èƒ½å¤Ÿåœ¨æ­¤èŠ‚ç‚¹ä¸Šè®¡åˆ’æ™®é€šåŠèˆ±ï¼š <br><br><pre> <code class="bash hljs">kubeadm init --skip-phases mark-control-plane</code> </pre> <br><h4>  5.å®‰è£…ç½‘ç»œæ’ä»¶ </h4><br>  Hypriotæ–‡ç« ä¸­æœ‰å…³æ­¤ä¿¡æ¯çš„ä¿¡æ¯è¿‡æ—¶äº†ï¼Œå› ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ARM</a>ç°åœ¨è¿˜<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ”¯æŒ</a> Weaveç½‘ç»œæ’ä»¶ï¼š <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> KUBECONFIG=/etc/kubernetes/admin.conf kubectl apply -f <span class="hljs-string"><span class="hljs-string">"https://cloud.weave.works/k8s/net?k8s-version=</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(kubectl version | base64 | tr -d '\n')</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><h4>  6.æ·»åŠ ä¸»æœºæ ‡ç­¾ </h4><br> åœ¨æ­¤èŠ‚ç‚¹ä¸Šï¼Œæˆ‘å°†å¯åŠ¨NASæœåŠ¡å™¨ï¼Œå› æ­¤æˆ‘å°†åœ¨å…¶ä¸Šæ ‡è®°æ ‡ç­¾ä»¥å¤‡å°†æ¥åœ¨è°ƒåº¦ç¨‹åºä¸­ä½¿ç”¨ï¼š <br><br><pre> <code class="bash hljs">kubectl label nodes k8s-master-1 marshallbrekka.raid=<span class="hljs-literal"><span class="hljs-literal">true</span></span> kubectl label nodes k8s-master-1 marshallbrekka.network=gigabit</code> </pre> <br><h3> å°†å…¶ä»–èŠ‚ç‚¹è¿æ¥åˆ°é›†ç¾¤ </h3><br> è®¾ç½®å…¶ä»–è®¾å¤‡ï¼ˆBanana Piï¼ŒCubbieBoardï¼‰ä¹Ÿå¾ˆå®¹æ˜“ã€‚ å¯¹äºå®ƒä»¬ï¼Œæ‚¨éœ€è¦é‡å¤å‰ä¸‰ä¸ªæ­¥éª¤ï¼ˆæ ¹æ®å…¶å¯ç”¨æ€§æ›´æ”¹å®‰è£…ç£ç›˜/é—ªå­˜ä»‹è´¨çš„è®¾ç½®ï¼‰ï¼Œç„¶åè¿è¡Œ<code>kubeadm join</code>å‘½ä»¤è€Œä¸æ˜¯<code>kubeadm init</code> ã€‚ <br><br><h2> æŸ¥æ‰¾é€‚ç”¨äºARMçš„Dockerå®¹å™¨ </h2><br> å¤§å¤šæ•°å¿…è¦çš„Dockerå®¹å™¨é€šå¸¸æ˜¯åœ¨Macä¸Šæ„å»ºçš„ï¼Œä½†æ˜¯å¯¹äºARMæ¥è¯´ï¼Œè¦å¤æ‚ä¸€äº›ã€‚ åœ¨æ‰¾åˆ°äº†è®¸å¤šæœ‰å…³å¦‚ä½•ä½¿ç”¨QEMUè¾¾åˆ°è¿™äº›ç›®çš„çš„æ–‡ç« ä¹‹åï¼Œæˆ‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¾—å‡ºçš„ç»“è®º</a>æ˜¯ï¼Œæˆ‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰€éœ€çš„</a>å¤§å¤šæ•°åº”ç”¨ç¨‹åºå·²ç»ç»„è£…å¥½äº†ï¼Œå…¶ä¸­è®¸å¤šå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">linuxserver</a>ä¸Š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨</a> ã€‚ <br><br><h2> åç»­æ­¥éª¤ </h2><br> ä»ç„¶æ²¡æœ‰ä»¥æˆ‘æƒ³è¦çš„è‡ªåŠ¨åŒ–/è„šæœ¬å½¢å¼è·å¾—è®¾å¤‡çš„åˆå§‹é…ç½®ï¼Œæˆ‘è‡³å°‘ç¼–å†™äº†ä¸€ç»„åŸºæœ¬å‘½ä»¤ï¼ˆmountsï¼Œ <code>kubeadm</code>å’Œ<code>kubeadm</code> ï¼‰å¹¶å°†å®ƒä»¬è®°å½•åœ¨Gitå­˜å‚¨åº“ä¸­ã€‚ å…¶ä½™ä½¿ç”¨çš„åº”ç”¨ç¨‹åºè¿˜æ”¶åˆ°äº†å­˜å‚¨åœ¨åŒä¸€å­˜å‚¨åº“ä¸­çš„K8çš„YAMLé…ç½®ï¼Œå› æ­¤ç°åœ¨å¾ˆå®¹æ˜“ä»å¤´å¼€å§‹è·å¾—å¿…è¦çš„é…ç½®ã€‚ <br><br> å°†æ¥ï¼Œæˆ‘å¸Œæœ›å®ç°ä»¥ä¸‹ç›®æ ‡ï¼š <br><br><ol><li> ä½¿ä¸»ç«™ç‚¹é«˜åº¦å¯ç”¨ </li><li> æ·»åŠ ç›‘è§†/é€šçŸ¥ä»¥äº†è§£ä»»ä½•ç»„ä»¶çš„æ•…éšœï¼› </li><li> æ›´æ”¹è·¯ç”±å™¨çš„DCHPè®¾ç½®ä»¥ä½¿ç”¨ç¾¤é›†ä¸­çš„DNSæœåŠ¡å™¨ï¼Œä»¥ç®€åŒ–å‘ç°åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ï¼ˆè°æƒ³è¦è®°ä½å†…éƒ¨IPåœ°å€ï¼Ÿï¼‰ï¼› </li><li> è¿è¡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MetalLB</a>å°†ç¾¤é›†æœåŠ¡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è½¬å‘</a>åˆ°ä¸“ç”¨ç½‘ç»œï¼ˆDNSç­‰ï¼‰ã€‚ </li></ol><br><br><h2> è¯‘è€…çš„PS </h2><br> å¦è¯·å‚é˜…æˆ‘ä»¬çš„åšå®¢ï¼š <br><br><ul><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">KubernetesæŠ€å·§ï¼šåœ¨èŠ‚ç‚¹åˆ†é…å’ŒWebåº”ç”¨ç¨‹åºä¸Šçš„è´Ÿè½½</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetesæç¤ºå’ŒæŠ€å·§ï¼šè®¿é—®å¼€å‘ç«™ç‚¹</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Kubernetesæç¤ºå’ŒæŠ€å·§ï¼šåŠ å¿«å¤§å‹æ•°æ®åº“çš„å¼•å¯¼é€Ÿåº¦</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">11ç§ï¼ˆä¸ï¼‰æˆä¸ºKubernetesé»‘å®¢çš„å—å®³è€…çš„æ–¹æ³•</a> â€ï¼› </li><li>  â€œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Kubernetesä¸€èµ·ç©æ˜¯ä¸€ç§åœ¨å®è·µä¸­è®¤è¯†K8çš„æœåŠ¡</a> ã€‚â€ </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN435526/">https://habr.com/ru/post/zh-CN435526/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN435510/index.html">å¾®ç”µå­å­¦ï¼Œç¥ç»ç”Ÿç†å­¦å’Œæœºå™¨å­¦ä¹ ï¼Œæ‘‡ä½†ä¸èƒ½æ··åˆ</a></li>
<li><a href="../zh-CN435512/index.html">Royoleå¼€å‘äººå‘˜å±•ç¤ºå¯æŠ˜å çš„çµæ´»æ™ºèƒ½æ‰‹æœº</a></li>
<li><a href="../zh-CN435514/index.html">åœ¨ä¿„ç½—æ–¯ï¼Œä»–ä»¬æ­£åœ¨å¼€å‘å¤„ç†å™¨æ¥åŠ é€Ÿç¥ç»ç½‘ç»œ</a></li>
<li><a href="../zh-CN435520/index.html">æˆ‘ä»¬ç¼–å†™ç¼–ç¨‹è¯­è¨€ï¼Œç¬¬3éƒ¨åˆ†ï¼šè½¬æ¢å™¨æ¶æ„ã€‚ è¯­è¨€ç»“æ„å’Œæ•°å­¦è¡¨è¾¾å¼çš„åˆ†æ</a></li>
<li><a href="../zh-CN435522/index.html">Axonframework 3ä¸­çš„äº‹ä»¶å¿«ç…§ï¼Œæé«˜äº†æ€§èƒ½</a></li>
<li><a href="../zh-CN435528/index.html">æˆåŠŸçš„5ä¸ªç†ç”±ï¼šä¸ºä½•äºšé©¬é€Šæˆä¸ºå…¨çƒæœ€æ˜‚è´µçš„å…¬å¸</a></li>
<li><a href="../zh-CN435530/index.html">ä»˜è´¹è®¢é˜…-ç§»åŠ¨è®¾å¤‡ä¸Šè‡ªåŠ¨è¿æ¥çš„ä¾èµ–æ€§</a></li>
<li><a href="../zh-CN435532/index.html">Tornado vs Aiohttpï¼šæ·±å…¥äº†è§£å¼‚æ­¥æ¡†æ¶</a></li>
<li><a href="../zh-CN435534/index.html">æ•°æ®ç§‘å­¦ï¼šå…¥é—¨çº§ä¹¦ç±</a></li>
<li><a href="../zh-CN435536/index.html">äººå½¢æœºå™¨äººï¼šæ‹ŸäººåŒ–æœºåˆ¶çš„ä¼˜ç‚¹å’Œé—®é¢˜</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>