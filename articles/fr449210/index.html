<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèê üë©üèº‚Äçüè≠ üçê Fonctionnement de HPE SimpliVity 380 pour VDI: tests de charge difficile üîê üßöüèø üç∏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le client voulait VDI. J'ai regard√© de tr√®s pr√®s le bouquet de SimpliVity + VDI Citrix Virtual Desktop. Pour tous les op√©rateurs, employ√©s de bureau d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fonctionnement de HPE SimpliVity 380 pour VDI: tests de charge difficile</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croc/blog/449210/"><img src="https://habrastorage.org/webt/_c/-f/ze/_c-fze90jo2wiz1tnxiharmlfde.jpeg" alt="image"><br><br>  Le client voulait VDI.  J'ai regard√© de tr√®s pr√®s le bouquet de SimpliVity + VDI Citrix Virtual Desktop.  Pour tous les op√©rateurs, employ√©s de bureau dans les villes, etc.  Il n'y a que cinq mille utilisateurs seulement dans la premi√®re vague de migration, et ils ont donc insist√© sur les tests de r√©sistance.  Le VDI peut commencer √† ralentir, il peut se coucher calmement - et cela ne se produit pas toujours en raison de probl√®mes avec le canal.  Nous avons achet√© un package de test tr√®s puissant sp√©cialement pour VDI et charg√© l'infrastructure jusqu'√† ce qu'elle tombe sur les disques et le processeur. <br><br>  Nous avons donc besoin d'une bouteille en plastique, du logiciel LoginVSI pour des tests VDI sophistiqu√©s.  Nous l'avons avec des licences pour 300 utilisateurs.  Ils ont ensuite pris le mat√©riel HPE SimpliVity 380 dans un emballage adapt√© √† la t√¢che de densit√© maximale d'utilisateurs sur un serveur, coup√© des machines virtuelles avec une bonne surabonnement, mis des logiciels de bureau sur Win10 et commenc√© les tests. <br><br>  <b>C'est parti!</b> <a name="habracut"></a><br><br><h2>  Le syst√®me </h2><br>  Deux n≈ìuds (serveurs) HPE SimpliVity 380 Gen10.  Sur chacun: <br><br><ul><li>  2 x Intel Xeon Platinum 8170 26c 2,1 GHz. </li><li>  RAM: 768 Go, 12 x 64 Go de LRDIMM DDR4 2666 MHz. </li><li>  Contr√¥leur de disque principal: HPE Smart Array P816i-a SR Gen10. </li><li>  Disques durs: SSD 9 x 1,92 To SATA 6 Gb / s (en configuration RAID6 7 + 2, c'est-√†-dire qu'il s'agit d'un mod√®le moyen en termes de HPE SimpliVity). </li><li>  Cartes r√©seau: 4 x Eth 1Gb (donn√©es utilisateur), 2 x Eth 10Gb (backend SimpliVity et vMotion). </li><li>  Cartes FPGA sp√©ciales int√©gr√©es dans chaque n≈ìud pour la d√©duplication / compression. </li></ul><br>  Les n≈ìuds sont connect√©s les uns aux autres par une interconnexion Ethernet 10 Gb directement sans commutateur externe, qui est utilis√© comme backend SimpliVity et pour transmettre des donn√©es de machine virtuelle via NFS.  Les donn√©es de la machine virtuelle dans un cluster sont toujours mises en miroir entre deux n≈ìuds. <br><br>  Les n≈ìuds sont regroup√©s dans un cluster Vmware vSphere ex√©cutant vCenter. <br><br>  Pour les tests, un contr√¥leur de domaine et un courtier de connexion Citrix sont d√©ploy√©s.  Le contr√¥leur de domaine, le courtier et vCenter sont plac√©s sur un cluster distinct. <br><img src="https://habrastorage.org/webt/iy/2f/cm/iy2fcmya1kwnjrngq2hsdg-0dcs.png" alt="image"><br><img src="https://habrastorage.org/webt/_w/wm/uw/_wwmuwksqxifn3xvsjqxqg8mbj0.png" alt="image"><br>  En tant qu'infrastructure de test, 300 bureaux virtuels sont d√©ploy√©s dans la configuration D√©di√©e - Copie compl√®te, c'est-√†-dire que chaque bureau est une copie compl√®te de l'image d'origine de la machine virtuelle et enregistre toutes les modifications apport√©es par les utilisateurs. <br><br>  Chaque machine virtuelle a 2vCPU et 4 Go de RAM: <br><br><img src="https://habrastorage.org/webt/6s/un/ru/6sunrupu_e3qtrv0ozkzjhdz1ti.png" alt="image"><br><br><img src="https://habrastorage.org/webt/3z/tp/cg/3ztpcgbgkwhbjqiypygrcvq7t9o.png" alt="image"><br><br>  Le logiciel suivant requis pour les tests a √©t√© install√© sur les machines virtuelles: <br><br><ul><li>  Windows 10 (64 bits), version 1809. </li><li>  Adobe Reader XI. </li><li>  Citrix Virtual Delivery Agent 1811.1. </li><li>  Doro PDF 1.82. </li><li>  Mise √† jour Java 7 13. </li><li>  Microsoft Office Professionnel Plus 2016. </li></ul><br>  Entre les n≈ìuds - r√©plication synchrone.  Chaque bloc de donn√©es du cluster a deux copies.  Autrement dit, maintenant un ensemble complet de donn√©es sur chacun des n≈ìuds.  Avec un cluster de trois n≈ìuds ou plus - des copies de blocs √† deux endroits diff√©rents.  Lors de la cr√©ation d'une nouvelle machine virtuelle, une copie suppl√©mentaire est cr√©√©e sur l'un des n≈ìuds de cluster.  Si un n≈ìud tombe en panne, toutes les machines virtuelles pr√©c√©demment ex√©cut√©es sur celui-ci red√©marrent automatiquement sur les autres n≈ìuds o√π elles ont des r√©pliques.  Si le n≈ìud tombe en panne pendant une longue p√©riode, une reprise progressive de la redondance commence et le cluster retourne √† nouveau √† la redondance N + 1. <br><br>  L'√©quilibrage et le stockage des donn√©es se produisent au niveau du stockage logiciel de SimpliVity lui-m√™me. <br><br>  Les machines virtuelles ex√©cutent un cluster de virtualisation; il les h√©berge √©galement sur le stockage logiciel.  Les ordinateurs de bureau eux-m√™mes ont √©t√© pris selon le mod√®le standard: les tableaux des financiers et des op√©rationnels ont conduit pour un test (ce sont deux mod√®les diff√©rents). <br><br><h3>  Test </h3><br>  Pour les tests, le complexe de test du logiciel LoginVSI 4.1 a √©t√© utilis√©.  Le complexe LoginVSI faisant partie du serveur de gestion et 12 machines pour les connexions de test ont √©t√© d√©ploy√©s sur un h√¥te physique distinct. <br><img src="https://habrastorage.org/webt/a9/tg/a8/a9tga8ijvirliv42fkcqld9yvma.png" alt="image"><br><br>  Les tests ont √©t√© effectu√©s en trois modes: <br><br>  Mode Benchmark - options de chargement pour 300 travailleurs du savoir et 300 travailleurs du stockage. <br><br>  Le mode standard est l'option de charge 300 Power Workers. <br><br>  Pour permettre aux travailleurs de Power de travailler et d'augmenter la diversit√© de charge, une biblioth√®que de fichiers Power Library suppl√©mentaires a √©t√© ajout√©e au complexe LoginVSI.  Pour garantir la r√©p√©tabilit√© des r√©sultats, tous les param√®tres du banc de test ont √©t√© laiss√©s √† Par d√©faut. <br><br>  Les tests des travailleurs Knowledge et Power simulent la charge r√©elle des utilisateurs travaillant sur des postes de travail virtuels. <br><br>  Le test des travailleurs du stockage a √©t√© cr√©√© sp√©cifiquement pour tester les syst√®mes de stockage, loin des charges de travail r√©elles et consiste en grande partie dans le travail de l'utilisateur avec un grand nombre de fichiers de tailles diff√©rentes. <br><br>  Pendant les tests, les utilisateurs se connectent aux postes de travail pendant 48 minutes, soit environ un utilisateur toutes les 10 secondes. <br><br><h2>  R√©sultats </h2><br>  Le r√©sultat principal des tests LoginVSI est la m√©trique VSImax, qui est compil√©e √† partir du temps d'ex√©cution de diverses t√¢ches ex√©cut√©es par l'utilisateur.  Par exemple: temps d'ouverture des fichiers dans le bloc-notes, temps de compression des fichiers dans 7-Zip, etc. <br><br>  Une description d√©taill√©e du calcul des m√©triques est disponible dans la documentation officielle sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> . <br><br>  En d'autres termes, LoginVSI r√©p√®te un mod√®le de charge typique, simulant les actions de l'utilisateur dans une suite bureautique, lisant des fichiers PDF, etc., et mesure divers retards.  Il existe un niveau critique de retards ¬´tout ralentit, il est impossible de travailler¬ª), avant lequel on consid√®re que le maximum d'utilisateurs n'est pas atteint.  Si le temps de r√©ponse est 1 000 ms plus rapide que cet √©tat ¬´tout ralentit¬ª, le syst√®me est consid√©r√© comme fonctionnant correctement et vous pouvez ajouter plus d'utilisateurs. <br><br>  Voici les m√©triques de base: <br><table><tbody><tr><td width="78"><p>  <b>M√©trique</b> </p><br></td><td width="191"><p>  <b>Mesures prises</b> </p><br></td><td width="301"><p>  <b>Description</b> <b>d√©taill√©e</b> </p><br></td><td width="142"><p>  <b>Composants chargeables</b> </p><br></td></tr><tr><td width="78"><p>  <b>NSLD</b> </p><br></td><td width="191"><p>  Heure d'ouverture du texte <br>  fichier pesant 1 500 ko </p><br></td><td width="301"><p>  Le bloc-notes d√©marre et <br>  ouvre un document al√©atoire pesant 1 500 kilo-octets, qui est copi√© √† partir du pool <br>  des ressources </p><br></td><td width="142"><p>  CPU et E / S </p><br></td></tr><tr><td width="78"><p>  <b>Nfo</b> </p><br></td><td width="191"><p>  Heure d'ouverture du dialogue <br>  fen√™tres du bloc-notes </p><br></td><td width="301"><p>  Ouverture d'un fichier du bloc-notes VSI [Ctrl + O] </p><br></td><td width="142"><p>  CPU, RAM et E / S </p><br><p></p><br></td></tr><tr><td width="78"><p>  <b>ZHC *</b> </p><br></td><td width="191"><p>  Temps de cr√©ation du fichier Zip de compression forte </p><br></td><td width="301"><p>  Compression locale <br>  taille de fichier .pst al√©atoire de 5 Mo, qui est copi√©e de <br>  pool de ressources </p><br></td><td width="142"><p>  CPU et E / S </p><br></td></tr><tr><td width="78"><p>  <b>ZLC *</b> </p><br></td><td width="191"><p>  Temps de cr√©ation du fichier Zip √† faible compression </p><br></td><td width="301"><p>  Compression locale <br>  taille de fichier .pst al√©atoire de 5 Mo, qui est copi√©e de <br>  pool de ressources </p><br></td><td width="142"><p>  E / S </p><br><p></p><br></td></tr><tr><td width="78"><p>  <b>CPU</b> </p><br></td><td width="191"><p>  Calculer grand <br>  tableau de donn√©es al√©atoires </p><br></td><td width="301"><p>  Cr√©er un grand tableau <br>  donn√©es al√©atoires √† utiliser dans le temporisateur d'E / S (temporisateur d'E / S) </p><br></td><td width="142"><p>  CPU </p><br></td></tr></tbody></table><br>  Lors de l'ex√©cution du test, la m√©trique de base VSIbase est initialement calcul√©e, ce qui montre la vitesse des t√¢ches sans la charge du syst√®me.  Sur cette base, le seuil VSImax est d√©termin√©, ce qui est √©gal √† VSIbase + 1000 ms. <br><br>  Les conclusions sur les performances du syst√®me sont bas√©es sur deux mesures: VSIbase, qui d√©termine la vitesse du syst√®me, et VSImax seuil, qui d√©termine le nombre maximal d'utilisateurs que le syst√®me peut supporter sans d√©gradation significative. <br><br><h3>  300 benchmark des travailleurs du savoir </h3><br>  Les travailleurs du savoir sont des utilisateurs qui chargent r√©guli√®rement la m√©moire, le processeur et les E / S avec divers petits pics.  Le logiciel √©mule la charge des utilisateurs bureautiques exigeants, comme s'ils poussaient constamment quelque chose (PDF, Java, suite bureautique, visualisation de photos, 7-Zip).  Au fur et √† mesure que les utilisateurs sont ajout√©s de z√©ro √† 300, le d√©lai de chacun augmente progressivement. <br><br>  Donn√©es statistiques VSImax: <br><img src="https://habrastorage.org/webt/yr/pg/u-/yrpgu-lqswmvwsxousflbpiid0e.png" alt="image"><br>  VSIbase = 986 ms, le seuil VSI n'a pas √©t√© atteint. <br><br>  Statistiques de la charge sur le syst√®me de stockage √† partir de la surveillance SimpliVity: <br><img src="https://habrastorage.org/webt/hi/ki/x4/hikix4jqp5ujbqkeff-taxzp_z0.png" alt="image"><br><br>  Avec ce type de charge, le syst√®me peut supporter une charge accrue avec peu ou pas de d√©gradation des performances.  Le temps d'ex√©cution des t√¢ches utilisateur cro√Æt en douceur, le temps de r√©ponse du syst√®me ne change pas pendant les tests et peut aller jusqu'√† 3 ms pour l'√©criture et jusqu'√† 1 ms pour la lecture. <br><br>  <b>Conclusion:</b> 300 connaissances des utilisateurs sans aucun probl√®me fonctionnent sur le cluster actuel et n'interf√®rent pas les uns avec les autres, atteignant une sursouscription pCPU / vCPU 1 √† 6. Les d√©lais g√©n√©raux augmentent de mani√®re √©gale, mais la limite conditionnelle n'a pas √©t√© atteinte. <br><br><h3>  300 benchmark des travailleurs du stockage </h3><br>  Ce sont des utilisateurs qui √©crivent et lisent constamment dans un rapport de 30 √† 70, respectivement.  Ce test a √©t√© effectu√© davantage dans un souci d'exp√©rience.  Donn√©es statistiques VSImax: <br><img src="https://habrastorage.org/webt/ib/2h/ga/ib2hgacipsoa5r2w2qk-giyd_74.png" alt="image"><br><br>  VSIbase = 1673, seuil VSI atteint sur 240 utilisateurs. <br><br>  Statistiques de la charge sur le syst√®me de stockage √† partir de la surveillance SimpliVity: <br><img src="https://habrastorage.org/webt/h3/5e/dl/h35edlal4qoqlm50xovdrm0skjm.png" alt="image"><br>  Ce type de charge est en fait un test de r√©sistance du syst√®me de stockage.  Lorsqu'il est ex√©cut√©, chaque utilisateur √©crit sur le disque de nombreux fichiers al√©atoires de tailles diff√©rentes.  Dans ce cas, on peut voir que lorsqu'un certain seuil de chargement est d√©pass√©, certains utilisateurs augmentent le temps n√©cessaire pour terminer les t√¢ches d'enregistrement de fichier.  Dans le m√™me temps, la charge sur le syst√®me de stockage, le processeur et la m√©moire h√¥te ne change pas de mani√®re significative, par cons√©quent, il est actuellement impossible de d√©terminer exactement √† quoi les retards sont associ√©s. <br><br>  Des conclusions sur les performances du syst√®me √† l'aide de ce test ne peuvent √™tre tir√©es qu'en comparaison avec les r√©sultats des tests sur d'autres syst√®mes, car ces charges sont synth√©tiques, irr√©alistes.  Cependant, en g√©n√©ral, le test s'est bien pass√©.  Jusqu'√† 210 sessions, tout s'est bien pass√©, puis des r√©ponses incompr√©hensibles ont commenc√©, qui n'ont √©t√© suivies nulle part, sauf Login VSI. <br><br><h3>  300 travailleurs de l'√©lectricit√© </h3><br>  Ce sont des utilisateurs qui aiment le processeur, la m√©moire et les E / S √©lev√©es.  Ces ¬´utilisateurs avanc√©s¬ª ex√©cutent r√©guli√®rement des t√¢ches complexes avec de longs pics comme l'installation de nouveaux logiciels et le d√©ballage de grandes archives.  Donn√©es statistiques VSImax: <br><img src="https://habrastorage.org/webt/ai/v4/m0/aiv4m093szu4euojw1le0djqqvg.png" alt="image"><br><br>  VSIbase = 970, le seuil VSI n'a pas √©t√© atteint. <br><br>  Statistiques de la charge sur le syst√®me de stockage √† partir de la surveillance SimpliVity: <br><img src="https://habrastorage.org/webt/01/61/tj/0161tj6hzex9d4yfjqati65jb8q.png" alt="image"><br><br>  Pendant les tests, le seuil de charge du processeur a √©t√© atteint sur l'un des n≈ìuds du syst√®me, mais cela n'a pas eu d'impact significatif sur son fonctionnement: <br><br><img src="https://habrastorage.org/webt/s0/2q/z3/s02qz3amd1xazzhdk8hmh12rdpk.png" alt="image"><br><br><img src="https://habrastorage.org/webt/wn/yf/6s/wnyf6swpmuwerwvw6xxu881scni.png" alt="image"><br><br>  Dans ce cas, le syst√®me peut supporter une charge accrue sans d√©gradation significative des performances.  Le temps d'ex√©cution des t√¢ches utilisateur cro√Æt en douceur, le temps de r√©ponse du syst√®me ne change pas pendant les tests et peut aller jusqu'√† 3 ms pour l'√©criture et jusqu'√† 1 ms pour la lecture. <br><br>  Les tests habituels pour le client n'√©taient pas suffisants, et nous sommes all√©s plus loin: augmentation des caract√©ristiques de la VM (le nombre de vCPU afin d'√©valuer l'augmentation de la surabonnement et de la taille du disque) et ajout de charge suppl√©mentaire. <br><br>  Lors de tests suppl√©mentaires, la configuration de stand suivante a √©t√© utilis√©e: <br>  D√©ploiement de 300 bureaux virtuels dans la configuration de 4vCPU, 4 Go de RAM, 80 Go de disque dur. <br><br>  Configuration de l'une des machines de test: <br><img src="https://habrastorage.org/webt/qf/ws/mj/qfwsmjptnkubxctz0-1gcx9u0si.png" alt="image"><br><br>  Les machines sont d√©ploy√©es dans l'option D√©di√© - Copie compl√®te: <br><br><img src="https://habrastorage.org/webt/tm/jz/0u/tmjz0uxhrw_adxqzttt2rgcboh8.png" alt="image"><br><br><img src="https://habrastorage.org/webt/qp/zz/iw/qpzziw9qrafmmvz5aeqs4aa26ru.png" alt="image"><br><br><h3>  300 travailleurs du savoir rep√®rent 12 sursouscriptions </h3><br>  Donn√©es statistiques VSImax: <br><img src="https://habrastorage.org/webt/1f/wq/kg/1fwqkg1fm42iqsjuvmll4cym7p4.png" alt="image"><br><br>  VSIbase = 921 ms, le seuil VSI n'a pas √©t√© atteint. <br><br>  Statistiques de la charge sur le syst√®me de stockage √† partir de la surveillance SimpliVity: <br><img src="https://habrastorage.org/webt/v8/d1/ko/v8d1kocafexbhemlivrcfog9cy8.png" alt="image"><br><br>  Les r√©sultats sont similaires au test de la configuration VM pr√©c√©dente. <br><br><h3>  300 travailleurs de l'√©nergie sursouscrits 12 </h3><br>  Donn√©es statistiques VSImax: <br><img src="https://habrastorage.org/webt/dv/tz/gk/dvtzgkj-bpuanvk5ffguz65qmr0.png" alt="image"><br><br>  VSIbase = 933, le seuil VSI n'a pas √©t√© atteint. <br><br>  Statistiques de la charge sur le syst√®me de stockage √† partir de la surveillance SimpliVity: <br><img src="https://habrastorage.org/webt/gw/gi/bo/gwgibojmbld7r6ztpoe6ss0y8bo.png" alt="image"><br><br>  Dans ce test, le seuil de charge du processeur a √©galement √©t√© atteint, mais cela n'a pas eu d'impact significatif sur les performances: <br><br><img src="https://habrastorage.org/webt/5m/ny/te/5mnyteugxst3_7osvcklrg2adxi.png" alt="image"><br><br><img src="https://habrastorage.org/webt/60/ha/eu/60haeutmt3k6bn2ywn70e7_d6bu.png" alt="image"><br><br>  Les r√©sultats sont similaires au test de la configuration pr√©c√©dente. <br><br><h3>  Que se passe-t-il si vous d√©marrez la charge pendant 10 heures? </h3><br>  Nous allons maintenant voir s'il y aura un "effet d'accumulation" et ex√©cuter des tests pendant 10 heures d'affil√©e. <br><br>  De longs tests et une description de la section devraient viser le fait que nous voulions v√©rifier s'il y aurait des probl√®mes avec la ferme avec une longue charge. <br><br><h3>  300 benchmark des travailleurs du savoir + 10 heures </h3><br>  En outre, le test de la variante de charge de 300 travailleurs du savoir a √©t√© effectu√© avec le travail ult√©rieur des utilisateurs pendant 10 heures. <br><br>  Donn√©es statistiques VSImax: <br><img src="https://habrastorage.org/webt/1m/bk/jc/1mbkjcthbgggrycwnjrqu56rwww.png" alt="image"><br><br>  VSIbase = 919 ms, le seuil VSI n'a pas √©t√© atteint. <br><br>  VSImax Donn√©es statistiques d√©taill√©es: <br><img src="https://habrastorage.org/webt/wy/lb/cs/wylbcstsir7bxiw9lua3m7xi2_c.png" alt="image"><br><br>  Le graphique montre que pendant tout le test, il n'y a pas de d√©gradation des performances. <br><br>  Statistiques de la charge sur le syst√®me de stockage √† partir de la surveillance SimpliVity: <br><img src="https://habrastorage.org/webt/gl/r4/g0/glr4g0s7zaeev1k1zq5turro40k.png" alt="image"><br><br>  Les performances du syst√®me de stockage restent au m√™me niveau tout au long du test. <br><br><h3>  Tests suppl√©mentaires avec charge synth√©tique ajout√©e </h3><br>  Le client a demand√© d'ajouter une charge sauvage au disque.  Pour ce faire, une t√¢che a √©t√© ajout√©e au syst√®me de stockage dans chacune des machines virtuelles de l'utilisateur pour lancer une charge synth√©tique sur le disque lorsque l'utilisateur se connecte au syst√®me.  La charge a √©t√© fournie par l'utilitaire fio, qui permet de limiter la charge sur le disque par le nombre d'IOPS.  Dans chaque machine, une t√¢che a √©t√© lanc√©e pour d√©marrer une charge suppl√©mentaire d'un montant de 22 IOPS 70% / 30% lecture / √©criture al√©atoire. <br><br><h3>  300 benchmark des travailleurs du savoir + 22 IOPS par utilisateur </h3><br>  Lors des tests initiaux, il a √©t√© d√©couvert que fio cr√©e une charge suppl√©mentaire importante sur le processeur des machines virtuelles.  Cela a entra√Æn√© une surcharge rapide de l'h√¥te sur le processeur et a consid√©rablement affect√© le fonctionnement du syst√®me dans son ensemble. <br><br>  Charge CPU des h√¥tes: <br><img src="https://habrastorage.org/webt/w6/gz/wt/w6gzwt7zok77j_mrtclbzur7sfc.png" alt="image"><br><br><img src="https://habrastorage.org/webt/_m/n7/dw/_mn7dwrbhicgrgllc9cnb_gzxkm.png" alt="image"><br><br>  Les retards du syst√®me de stockage ont √©galement naturellement augment√©: <br><img src="https://habrastorage.org/webt/vp/uz/e7/vpuze7bmzsbvpsskg_3rcsyxlrk.png" alt="image"><br><br>  Le manque de puissance de calcul est devenu critique pour environ 240 utilisateurs: <br><img src="https://habrastorage.org/webt/uq/nr/e7/uqnre7iobieo2zcqosxmadyl7ca.png" alt="image"><br><br>  En raison des r√©sultats, il a √©t√© d√©cid√© de r√©aliser un test moins gourmand en ressources processeur. <br><br><h3>  230 benchmark des employ√©s de bureau + 22 IOPS par utilisateur </h3><br>  Pour r√©duire la charge sur le processeur, le type de charge des employ√©s Office a √©t√© s√©lectionn√© et 22 IOPS de charge synth√©tique ont √©t√© ajout√©s √† chaque session. <br><br>  Le test a √©t√© limit√© √† 230 sessions afin de ne pas d√©passer la charge maximale sur le CPU. <br><br>  Le test a √©t√© lanc√© avec le travail ult√©rieur des utilisateurs pendant 10 heures pour v√©rifier la stabilit√© du syst√®me lors d'un fonctionnement prolong√© √† une charge proche du maximum. <br><br>  Donn√©es statistiques VSImax: <br><img src="https://habrastorage.org/webt/ne/vz/nh/nevznhbzamx-9idqqcsmkaip6j4.png" alt="image"><br><br>  VSIbase = 918 ms, le seuil VSI n'a pas √©t√© atteint. <br><br>  VSImax Donn√©es statistiques d√©taill√©es: <br><img src="https://habrastorage.org/webt/e6/3b/2g/e63b2g_qhey5o9vmzuanqfidqhe.png" alt="image"><br><br>  Le graphique montre que pendant tout le test, il n'y a pas de d√©gradation des performances. <br><br>  Statistiques CPU: <br><img src="https://habrastorage.org/webt/mt/tn/jo/mttnjo09trs9shnvuelmutmkjaw.png" alt="image"><br><br><img src="https://habrastorage.org/webt/at/bv/im/atbvim4noi3ehoqwcpw_nkuk5hu.png" alt="image"><br><br>  Lors de l'ex√©cution de ce test, la charge sur le processeur des h√¥tes √©tait presque maximale. <br><br>  Statistiques de la charge sur le syst√®me de stockage √† partir de la surveillance SimpliVity: <br><img src="https://habrastorage.org/webt/qc/_z/bd/qc_zbdfztexr5yw6s2xh2pe_evy.png" alt="image"><br><br>  Les performances du syst√®me de stockage restent au m√™me niveau tout au long du test. <br><br>  La charge sur le syst√®me de stockage pendant le test √©tait d'environ 6 500 IOPS dans un rapport 60/40 (3 900 IOPS pour la lecture, 2 600 IOPS pour l'√©criture), soit environ 28 IOPS par poste de travail. <br><br>  Le temps de r√©ponse √©tait en moyenne de 3 ms pour l'√©criture et jusqu'√† 1 ms pour la lecture. <br><br><h2>  R√©sum√© </h2><br>  Lors de la simulation de charges r√©elles sur l'infrastructure HPE SimpliVity, des r√©sultats ont √©t√© obtenus confirmant la capacit√© du syst√®me √† fournir des bureaux virtuels d'au moins 300 machines Full Clone sur une paire de n≈ìuds SimpliVity.  Dans le m√™me temps, le temps de r√©ponse du syst√®me de stockage a √©t√© maintenu √† un niveau optimal tout au long du test. <br><br>  Nous sommes tr√®s impressionn√©s par l'approche concernant les longs tests et la comparaison des solutions avant la mise en ≈ìuvre.  Nous pouvons tester les performances de vos charges de travail si vous le souhaitez.  Y compris d'autres solutions hyperconverg√©es.  Le client mentionn√© effectue actuellement des tests sur une autre solution en parall√®le.  Son infrastructure actuelle n'est qu'un parc de PC, un domaine et des logiciels sur chaque lieu de travail.  Passer √† VDI sans tests est, bien s√ªr, assez difficile.  Plus pr√©cis√©ment, il est difficile de comprendre les capacit√©s r√©elles de la batterie VDI sans migrer de vrais utilisateurs vers celle-ci.  Et ces tests vous permettent d'√©valuer rapidement les capacit√©s r√©elles d'un syst√®me particulier sans avoir besoin d'attirer des utilisateurs ordinaires.  Par cons√©quent, une telle √©tude est n√©e. <br><br>  La deuxi√®me approche importante - le client s'est imm√©diatement fix√© sur la mise √† l'√©chelle correcte.  Ici, vous pouvez acheter un serveur et ajouter une ferme, par exemple, pour 100 utilisateurs, tout est pr√©visible au prix de l'utilisateur.  Par exemple, lorsqu'ils doivent ajouter 300 autres utilisateurs, ils sauront qu'ils ont besoin de deux serveurs dans une configuration d√©j√† d√©finie, et ne reconsid√©reront pas les possibilit√©s de mise √† niveau de leur infrastructure dans son ensemble. <br><br>  Fonctionnalit√©s int√©ressantes de la F√©d√©ration HPE SimpliVity.  Les affaires sont g√©ographiquement divis√©es, il est donc logique de placer votre propre morceau de fer VDI s√©par√© dans un bureau √©loign√©.  Dans la F√©d√©ration SimpliVity, chaque machine virtuelle est r√©pliqu√©e selon un calendrier avec la possibilit√© de faire entre des clusters g√©ographiquement distants tr√®s rapidement et sans charge sur le canal - c'est une tr√®s bonne sauvegarde int√©gr√©e.  Lors de la r√©plication de VM entre sites, le canal est utilis√© le moins possible, ce qui permet de construire des architectures DR tr√®s int√©ressantes avec un seul centre de contr√¥le et un tas de sites de stockage d√©centralis√©s. <br><img src="https://habrastorage.org/webt/iu/zm/mo/iuzmmojtdcsyhteccn2fvq4bxbi.png" alt="image"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">F√©d√©ration</a> <br><br>  L'ensemble de ces √©l√©ments permet d'√©valuer en d√©tail l'aspect financier, d'imposer les co√ªts de VDI aux plans de croissance de l'entreprise et de comprendre √† quelle vitesse la solution sera rentable et comment elle fonctionnera.  Parce que tout VDI est une solution qui √©conomise finalement une tonne de ressources, mais en m√™me temps, tr√®s probablement, sans possibilit√© rentable de le changer dans les 5-7 ans d'utilisation. <br><br>  En g√©n√©ral, si vous avez des questions autres que des commentaires, veuillez m'√©crire √† mk@croc.ru. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr449210/">https://habr.com/ru/post/fr449210/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr449196/index.html">Flexiant Cloud Orchestrator: ce qu'il mange avec</a></li>
<li><a href="../fr449198/index.html">FFmpeg pour d√©marrer avec Visual Studio</a></li>
<li><a href="../fr449200/index.html">Faits saillants du pass√© Moscou Python Conf ++ 2019: transformation en une plate-forme de communication</a></li>
<li><a href="../fr449204/index.html">Comme nous consid√©rons les m√©triques pour le d√©veloppement et le support de la documentation. Rapport Yandex</a></li>
<li><a href="../fr449208/index.html">Comment cr√©er et g√©rer des √©quipes performantes</a></li>
<li><a href="../fr449214/index.html">Klusterkit</a></li>
<li><a href="../fr449216/index.html">Des cam√©ras de surveillance automatis√©es infid√®les</a></li>
<li><a href="../fr449218/index.html">10 comp√©tences essentielles pour chaque ing√©nieur DevOps</a></li>
<li><a href="../fr449220/index.html">DrumHero: Comment j'ai cr√©√© le premier jeu de ma vie</a></li>
<li><a href="../fr449224/index.html">√Ä propos du biais de l'intelligence artificielle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>