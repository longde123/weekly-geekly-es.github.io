<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèáüèæ üî• üï¥üèª R√©plication de cha√Æne: cr√©ation d'un r√©f√©rentiel KV efficace (partie 1/2) üíü ü•á üí™üèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans cet article, nous examinerons l'architecture d'un stockage KV simple et efficace utilisant la r√©plication de cha√Æne, qui est activement √©tudi√©e e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>R√©plication de cha√Æne: cr√©ation d'un r√©f√©rentiel KV efficace (partie 1/2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/430396/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ih/tl/pc/ihtlpc8zbpq3lsjsqarrkaitufm.png"></div><br>  Dans cet article, nous examinerons l'architecture d'un stockage KV simple et efficace utilisant la r√©plication de cha√Æne, qui est activement √©tudi√©e et utilis√©e avec succ√®s dans divers syst√®mes. <br><a name="habracut"></a><br>  Il s'agit de la premi√®re moiti√© d'un article de r√©plication de cha√Æne.  La deuxi√®me partie est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> .  Il y aura d'abord un peu de th√©orie, puis quelques exemples d'utilisation avec diverses modifications. <br><br><ol><li>  L'objectif est l'√©nonc√© du probl√®me et la comparaison avec le protocole principal / de sauvegarde. </li><li>  La r√©plication de cha√Æne est une approche de base. </li><li>  R√©plication de cha√Æne - demandes distribu√©es. </li><li>  FAWN: un tableau rapide de n≈ìuds Wimpy. </li></ol><br><h1>  1. Introduction </h1><br><h3>  1.1 Objet </h3><br>  Supposons que nous voulons concevoir un magasin de valeurs-cl√©s simple.  Le r√©f√©rentiel aura une interface tr√®s minimale: <br><br><ol><li>  √©criture (cl√©, objet): sauvegarde / mise √† jour de la valeur par cl√© cl√©. </li><li>  lecture (cl√©): retourne la valeur stock√©e par cl√© cl√©. </li></ol><br>  Nous savons √©galement que la taille des donn√©es est relativement petite (tout tient sur un seul serveur, il n'y a pas besoin de partitionnement), mais il peut y avoir beaucoup de demandes d'√©criture / lecture. <br><br>  <u>Notre objectif est de r√©sister √† un grand nombre de demandes ( <b>haut d√©bit, HT</b> ), d'avoir une haute disponibilit√© ( <b>HA</b> ) et une forte coh√©rence ( <b>SC</b> ).</u> <br><br>  Dans de nombreux syst√®mes, SC est sacrifi√© pour HA + HT, car remplir les trois propri√©t√©s est une t√¢che non triviale.  Amazon Dynamo a √©t√© un √©norme bond en avant et a engendr√© un certain nombre de bases de donn√©es de style Dynamo, telles que Cassandra, Riak, Voldemort, etc. <br><br><h3>  1.2 Primaire / sauvegarde </h3><br>  L'une des approches les plus courantes et les plus simples pour cr√©er un tel syst√®me de stockage consiste √† utiliser la r√©plication principale / de sauvegarde. <br>  Nous avons 1 serveur principal, plusieurs serveurs de sauvegarde, les op√©rations d'√©criture / lecture passent uniquement par le serveur principal. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/r4/ai/nor4aiw440squuwrlqwfrnn3l9c.png"></div><br>  Ici, l'image montre l'un des protocoles d'interaction possibles (le principal attend un accus√© de r√©ception de toutes les sauvegardes avant d'envoyer un accus√© de r√©ception au client), il existe d'autres options (non mutuellement exclusives), par exemple: <br><br><ul><li>  Le primaire organise strictement les demandes d'√©criture. </li><li>  Le primaire envoie un accus√© de r√©ception d√®s que l'une des sauvegardes r√©pond par un accus√© de r√©ception. </li><li>  Quorum b√¢cl√© et transfert sugg√©r√©. </li><li>  Etc. </li></ul><br>  Un processus distinct est √©galement n√©cessaire qui surveille l'√©tat du cluster (distribue la configuration aux participants) et, lorsque le serveur h√¥te tombe en panne, fait (initie) l'√©lection d'un nouveau, et d√©termine √©galement ce qu'il faut faire en cas de division du cerveau.  Encore une fois, selon les exigences, une partie de cette logique peut √™tre ex√©cut√©e dans le cadre de l'algorithme de r√©plication, une partie en tant qu'application tierce (par exemple, un gardien pour stocker la configuration), etc. <br><br>  √âvidemment, t√¥t ou tard, les performances de la r√©plication primaire / de sauvegarde seront limit√©es par deux goulots d'√©tranglement: <br><br><ul><li>  Performances du serveur principal. </li><li>  Nombre de serveurs de sauvegarde. </li></ul><br>  Plus les exigences de fiabilit√© / coh√©rence sont pr√©sent√©es √† un cluster, plus ce moment sera rapide. <br><br>  Existe-t-il d'autres moyens d'atteindre notre objectif? <br><br><h3>  1.3 R√©plication de cha√Æne </h3><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/4y/oc/fe/4yocfe_ajv79tln3txv8chnm0_w.png"></div><br>  En g√©n√©ral, la r√©plication de cha√Æne consiste en une s√©quence (cha√Æne) de serveurs, avec des r√¥les sp√©ciaux HEAD (le serveur avec lequel le client communique) et TAIL (fin de cha√Æne, garantie SC).  Une cha√Æne a au moins les propri√©t√©s suivantes: <br><br><ol><li>  R√©siste √† la chute sur n - 1 serveurs. </li><li>  La vitesse d'√©criture n'est pas significativement diff√©rente de la vitesse de SC Primary / Backup. </li><li>  La reconfiguration du cluster en cas de crash HEAD se produit beaucoup plus rapidement que Primary, les autres serveurs sont comparativement ou plus rapidement que dans Primary / Backup. </li></ol><br>  Un petit point important: une <b>connexion FIFO fiable entre les serveurs</b> est requise <b>.</b> <br><br>  Examinons plus en d√©tail les diff√©rentes m√©thodes de construction de la r√©plication de cha√Æne. <br><br><h1>  2. L'approche de base </h1><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/dg/fm/sz/dgfmszrolw1uxuayalgzhltuhyi.png"></div><br><h3>  2.1 Algorithme op√©rationnel </h3><br>  Les clients envoient des demandes d'√©criture au n≈ìud principal et les demandes de lecture sont envoy√©es au n≈ìud arri√®re.  La r√©ponse vient toujours de la queue.  Head, ayant re√ßu une demande de changement, calcule le changement d'√©tat n√©cessaire, l'applique et l'envoie au n≈ìud suivant.  D√®s que la queue le traite, une r√©ponse ACK est renvoy√©e dans la cha√Æne.  √âvidemment, si une demande de lecture renvoie une valeur de x, elle est stock√©e sur tous les n≈ìuds. <br><br><h3>  2.2 Protocole de r√©plication </h3><br>  Nous num√©rotons les serveurs de la t√™te √† la queue, puis sur chaque n≈ìud <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">i</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.802ex" height="1.937ex" viewBox="0 -728.2 345.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="0" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-1"> i </script>  nous stockerons en outre: <br><br><ul><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-5">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-7">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-8">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9">n</span><span class="MJXp-msubsup" id="MJXp-Span-10"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-11" style="margin-right: 0.05em;">g</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-12" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="9.545ex" height="2.419ex" viewBox="0 -780.1 4109.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-50" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-65" x="751" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6E" x="1218" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-64" x="1818" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="2342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6E" x="2687" y="0"></use><g transform="translate(3288,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="675" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-2"> Pending_i </script>  - une liste des requ√™tes re√ßues par le n≈ìud qui n'ont pas encore √©t√© trait√©es par tail. </li><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-13"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-14">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-15">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-16">n</span><span class="MJXp-msubsup" id="MJXp-Span-17"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-19" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.617ex" height="2.419ex" viewBox="0 -780.1 2418.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-53" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-65" x="645" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6E" x="1112" y="0"></use><g transform="translate(1712,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-74" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="511" y="-213"></use></g></g></svg></span><script type="math/tex" id="MathJax-Element-3"> Sent_i </script>  - une liste des requ√™tes envoy√©es par le serveur √† son successeur qui n'ont pas encore √©t√© trait√©es par tail. </li><li><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-20"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-21">H</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-23">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-24">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-26">r</span><span class="MJXp-msubsup" id="MJXp-Span-27"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-29" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-30" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-32">l</span><span class="MJXp-mrow" id="MJXp-Span-33"><span class="MJXp-mo" id="MJXp-Span-34" style="margin-left: 0em; margin-right: 0em;">√©</span></span><span class="MJXp-mo" id="MJXp-Span-35" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><span class="MathJax_SVG MathJax_SVG_Processed" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="13.277ex" height="2.66ex" viewBox="0 -832 5716.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-73" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-74" x="1703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6F" x="2065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-72" x="2550" y="0"></use><g transform="translate(3002,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-28" x="3836" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-63" x="4226" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6C" x="4659" y="0"></use><g transform="translate(4958,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">√©</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-29" x="5327" y="0"></use></g></svg></span><script type="math/tex" id="MathJax-Element-4"> History_i (cl√©) </script>  - l'historique des modifications de la valeur cl√© (vous pouvez stocker √† la fois l'historique et uniquement la valeur totale).  Notez que: <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-36"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-37">H</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-38">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-40">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-42">r</span><span class="MJXp-msubsup" id="MJXp-Span-43"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-44" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-45" style="vertical-align: -0.4em;">j</span></span><span class="MJXp-mo" id="MJXp-Span-46" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-47">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-48">l</span><span class="MJXp-mrow" id="MJXp-Span-49"><span class="MJXp-mo" id="MJXp-Span-50" style="margin-left: 0em; margin-right: 0em;">√©</span></span><span class="MJXp-mo" id="MJXp-Span-51" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-52">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-53">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-55">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-57">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-59">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-61">H</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-63">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-64">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-66">r</span><span class="MJXp-msubsup" id="MJXp-Span-67"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-68" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-69" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-70" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-71">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-72">l</span><span class="MJXp-mrow" id="MJXp-Span-73"><span class="MJXp-mo" id="MJXp-Span-74" style="margin-left: 0em; margin-right: 0em;">√©</span></span><span class="MJXp-mo" id="MJXp-Span-75" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-76" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mtext" id="MJXp-Span-77">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-78">f</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-80">r</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-82">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-83">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">j</span><span class="MJXp-mo" id="MJXp-Span-85" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-86">i</span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processed" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="48.374ex" height="2.78ex" viewBox="0 -832 20827.8 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-48" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="888" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-73" x="1234" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-74" x="1703" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6F" x="2065" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-72" x="2550" y="0"></use><g transform="translate(3002,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6A" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-28" x="3884" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-63" x="4273" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6C" x="4707" y="0"></use><g transform="translate(5005,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">√©</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-29" x="5374" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-73" x="6013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-75" x="6483" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-62" x="7055" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-73" x="7485" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-65" x="7954" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-74" x="8421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-65" x="8782" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-71" x="9249" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-48" x="9709" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="10598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-73" x="10943" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-74" x="11413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6F" x="11774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-72" x="12260" y="0"></use><g transform="translate(12711,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-79" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="693" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-28" x="13546" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-63" x="13936" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6C" x="14369" y="0"></use><g transform="translate(14668,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">√©</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-29" x="15037" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-2C" x="15426" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-66" x="16121" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6F" x="16672" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-72" x="17157" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-61" x="17609" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6C" x="18138" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6C" x="18437" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-6A" x="18735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMAIN-3E" x="19426" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/430396/&amp;usg=ALkJrhgRGQA7RV6A2T0ZWq8D0i4JbGKXlw#MJMATHI-69" x="20482" y="0"></use></g></svg></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> History_j (cl√©) \ subseteq History_i (cl√©), \ forall j> i </script></p><br></li><li>  Et aussi: <p></p><p><math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math MJXp-display" id="MJXp-Span-87"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-88">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-90">n</span><span class="MJXp-msubsup" id="MJXp-Span-91"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-92" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-93" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mtext" id="MJXp-Span-94">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-96">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-97">b</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-98">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-100">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-101">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-102">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-104">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-105">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-106">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-107">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-108">n</span><span class="MJXp-msubsup" id="MJXp-Span-109"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-110" style="margin-right: 0.05em;">g</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-111" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mspace" id="MJXp-Span-112" style="width: 0em; height: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113">H</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-114">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-115">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-116">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-118">r</span><span class="MJXp-msubsup" id="MJXp-Span-119"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-120" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-121" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-122" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-123">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-124">l</span><span class="MJXp-mrow" id="MJXp-Span-125"><span class="MJXp-mo" id="MJXp-Span-126" style="margin-left: 0em; margin-right: 0em;">√©</span></span><span class="MJXp-mo" id="MJXp-Span-127" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-128" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-129">H</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-131">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-133">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">r</span><span class="MJXp-msubsup" id="MJXp-Span-135"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-136" style="margin-right: 0.05em;">y</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-137" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-138">i</span><span class="MJXp-mo" id="MJXp-Span-139">+</span><span class="MJXp-mn" id="MJXp-Span-140">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-141" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-142">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143">l</span><span class="MJXp-mrow" id="MJXp-Span-144"><span class="MJXp-mo" id="MJXp-Span-145" style="margin-left: 0em; margin-right: 0em;">√©</span></span><span class="MJXp-mo" id="MJXp-Span-146" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mtext" id="MJXp-Span-147">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">c</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-149">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">p</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-151">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-153">n</span><span class="MJXp-msubsup" id="MJXp-Span-154"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-155" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-156" style="vertical-align: -0.4em;">i</span></span></span></span><div class="MathJax_SVG_Display MathJax_SVG_Processing"><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span></div><script type="math/tex;mode=display" id="MathJax-Element-6"> Sent_i \ subseteq Pending_i \\ History_i (cl√©) = History_ {i + 1} (cl√©) \ cup Sent_i </script></p><br></li></ul><br><h3>  2.3 Basculement du serveur </h3><br>  Comme mentionn√© dans l'introduction, nous avons besoin d'une sorte de processus ma√Ætre qui: <br><br><ul><li>  Identifie un serveur d√©faillant. </li><li>  Avertit son pr√©d√©cesseur et son successeur des modifications du circuit. </li><li>  Si le serveur est en queue ou en t√™te, il informe les clients de leur changement. </li></ul><br>  Nous pensons que le processus ma√Ætre est stable et ne se bloque jamais.  Le choix d'un tel processus d√©passe le cadre de cet article. <br><br>  La deuxi√®me hypoth√®se tr√®s importante est que nous supposons que les serveurs sont √† √©chec: <br><br><ul><li>  En cas de d√©faillance (interne), le serveur cesse de fonctionner et ne donne pas de r√©sultat incorrect. </li><li>  La d√©faillance du serveur est toujours d√©termin√©e par le processus ma√Ætre. </li></ul><br>  Voyons comment un nouveau serveur est ajout√©: <br>  Th√©oriquement, un nouveau serveur peut √™tre ajout√© √† n'importe quel endroit de la cha√Æne, l'ajout √† la queue semble le moins difficile - il vous suffit de copier le statut de la queue actuelle sur le nouveau serveur, d'informer l'assistant de la modification de la cha√Æne et d'informer l'ancienne queue que les demandes doivent maintenant √™tre envoy√©es plus loin. <br><br>  Enfin, envisagez trois sc√©narios de d√©faillance possibles: <br><br>  <u>2.3.1 Chute de t√™te</u> <br>  Retirez simplement le serveur de la cha√Æne et affectez la nouvelle t√™te suivante.  Seule la perte de ces demandes de <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-157"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-159">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-160">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-162">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-163">n</span><span class="MJXp-msubsup" id="MJXp-Span-164"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-165" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-166" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-167">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-168">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-169">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-170">d</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-7"> Pending_ {head} </script>  qui n'ont pas √©t√© envoy√©s plus loin - <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-171"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-172">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-173">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-174">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-175">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-176">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-177">n</span><span class="MJXp-msubsup" id="MJXp-Span-178"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-179" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-180" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-181">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-182">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-183">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-184">d</span></span></span><span class="MJXp-mtext" id="MJXp-Span-185">&nbsp;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-186">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-187">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-188">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-189">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-190">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-191">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-192">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-193">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-194">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-195">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-196">n</span><span class="MJXp-msubsup" id="MJXp-Span-197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-199" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-200">h</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-202">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-203">d</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-8"> Pending_ {head} \ setminus Sent_ {head} </script><br><br>  <u>2.3.2 Queue d'automne</u> <br>  Nous supprimons le serveur de la cha√Æne et affectons le pr√©c√©dent √† la nouvelle queue, avant cela <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-204"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-206">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-207">n</span><span class="MJXp-msubsup" id="MJXp-Span-208"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-210" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-212">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-213">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-214">l</span><span class="MJXp-mo" id="MJXp-Span-215">‚àí</span><span class="MJXp-mn" id="MJXp-Span-216">1</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-9"> Sent_ {tail - 1} </script>  effac√©es (toutes ces op√©rations sont marqu√©es comme queue trait√©e), respectivement <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-217"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-218">P</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-220">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-221">d</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-223">n</span><span class="MJXp-msubsup" id="MJXp-Span-224"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225" style="margin-right: 0.05em;">g</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-226" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-227">t</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-229">i</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-230">l</span><span class="MJXp-mo" id="MJXp-Span-231">‚àí</span><span class="MJXp-mn" id="MJXp-Span-232">1</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-10"> Pending_ {tail - 1} </script>  diminue. <br><br>  <u>2.3.3 Noeud interm√©diaire tombant</u> <math> </math><u><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-233"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-11"> k </script></u> <br>  L'assistant informe les n≈ìuds <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-235"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-236">k</span><span class="MJXp-mo" id="MJXp-Span-237" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-238">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-12"> k-1 </script>  et <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-239"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-240">k</span><span class="MJXp-mo" id="MJXp-Span-241" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-242">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-13"> k + 1 </script>  sur la r√©organisation dans une cha√Æne. <br>  Perte possible <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-243"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-245">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">n</span><span class="MJXp-msubsup" id="MJXp-Span-247"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-248" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-249" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-250">k</span><span class="MJXp-mo" id="MJXp-Span-251">‚àí</span><span class="MJXp-mn" id="MJXp-Span-252">1</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-14"> Sent_ {k-1} </script>  si le n≈ìud <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-253"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-254">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-15"> k </script>  Je n'ai pas r√©ussi √† les envoyer plus loin √† mon successeur, donc, apr√®s avoir supprim√© le n≈ìud <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">k</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-16"> k </script>  de la cha√Æne, la premi√®re chose est envoy√©e √† nouveau <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-257"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-259">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260">n</span><span class="MJXp-msubsup" id="MJXp-Span-261"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-262" style="margin-right: 0.05em;">t</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-263" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">k</span><span class="MJXp-mo" id="MJXp-Span-265">‚àí</span><span class="MJXp-mn" id="MJXp-Span-266">1</span></span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-17"> Sent_ {k - 1} </script>  et seulement apr√®s ce n≈ìud <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-267"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">k</span><span class="MJXp-mo" id="MJXp-Span-269" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-270">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-18"> k - 1 </script>  continue de traiter les nouvelles demandes. <br><br><h3>  2.4 Comparaison avec le protocole de sauvegarde / principal </h3><br><ul><li>  Dans la r√©plication de cha√Æne, un seul serveur (queue) est impliqu√© dans l'ex√©cution des demandes de lecture, et il donne une r√©ponse imm√©diatement, tandis qu'en P / B primaire, il peut attendre la confirmation de la fin des demandes d'√©criture. </li><li>  Dans les deux approches, la demande d'√©criture est ex√©cut√©e sur tous les serveurs, P / B le fait plus rapidement en raison de l'ex√©cution parall√®le. </li></ul><br>  D√©lais de r√©plication de la cha√Æne d'√©chec: <br><br><ul><li>  T√™te: l'ex√©cution des demandes de lecture n'est pas interrompue, les demandes d'√©criture sont retard√©es de 2 messages - du ma√Ætre √† tous les serveurs sur la nouvelle t√™te et du ma√Ætre √† tous les clients sur la nouvelle t√™te. </li><li>  Serveur interm√©diaire: les requ√™tes de lecture ne sont pas interrompues.  L'enregistrement des demandes peut √™tre retard√© √† l'ex√©cution <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-271"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-272">S</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-273">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-274">n</span><span class="MJXp-msubsup" id="MJXp-Span-275"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276" style="margin-right: 0.05em;">t</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-277" style="vertical-align: -0.4em;">i</span></span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-19"> Sent_i </script>  Il n'y a aucune perte de mise √† jour. </li><li>  Queue: retard des demandes de lecture et d'√©criture pour deux messages - notification <math></math><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-278"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-279">q</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-281">e</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-282">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-283">e</span><span class="MJXp-mo" id="MJXp-Span-284" style="margin-left: 0.267em; margin-right: 0.267em;">‚àí</span><span class="MJXp-mn" id="MJXp-Span-285">1</span></span></span><span class="MathJax_SVG MathJax_SVG_Processing" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block;"></span><script type="math/tex" id="MathJax-Element-20"> queue - 1 </script>  sur la nouvelle queue et alerter les clients sur la nouvelle queue. </li></ul><br>  Retards d'√©chec P / B: <br><br><ul><li>  Primaire: d√©lai de 5 messages pour s√©lectionner un nouvel √©tat primaire et synchroniser. </li><li>  Sauvegarde: il n'y a pas de d√©lais de lecture s'il n'y a pas de demandes d'√©criture.  Lorsqu'une demande d'enregistrement appara√Æt, un d√©lai de 1 message est possible. </li></ul><br>  Comme vous pouvez le voir, la pire d√©faillance de queue pour la r√©plication de cha√Æne est plus rapide que la pire pour P / B (primaire). <br><br>  Les auteurs de cette approche ont effectu√© des tests de charge, qui ont montr√© des performances comparables avec le protocole P / B. <br><br><h1>  3. Requ√™tes distribu√©es (r√©plication en cha√Æne avec requ√™tes r√©parties - CRAQ) </h1><br>  L'approche de base a une faiblesse √©vidente - queue, qui g√®re toutes les demandes de lecture.  Cela peut entra√Æner deux probl√®mes: <br><br><ul><li>  La queue devient un point chaud, c'est-√†-dire  un serveur qui g√®re bien plus de demandes que tout autre n≈ìud. </li><li>  Lorsque vous placez une cha√Æne dans plusieurs centres de donn√©es, la queue peut √™tre tr√®s √©loign√©e, ce qui ralentit les demandes d'√©criture. </li></ul><br>  L'id√©e de CRAQ est assez simple - laissez les requ√™tes de lecture arriver √† tous les serveurs sauf tail, et pour assurer la coh√©rence, nous stockons le vecteur des versions d'objet pour les requ√™tes d'√©criture, et en cas d'ambigu√Øt√©, les n≈ìuds feront une requ√™te de tail pour obtenir la derni√®re version fixe. <br><br><h3>  3.1 CRAQ </h3><br>  Nous formalisons l'architecture CRAQ: <br>  Chaque n≈ìud, √† l'exception de tail, traite les requ√™tes de lecture et renvoie une r√©ponse, et head renvoie une r√©ponse √† partir des requ√™tes d'√©criture (comparer avec l'approche de base). <br><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/gj/6t/41/gj6t41wctfj90oqeqwyzmxzmlum.png"></div><br>  Sur chaque n≈ìud non-queue, plusieurs versions du m√™me objet peuvent √™tre stock√©es et les versions forment une s√©quence strictement monotone croissante.  Pour chaque version, un attribut suppl√©mentaire est ajout√© ¬´propre¬ª ou ¬´sale¬ª.  Au d√©part, toutes les versions sont propres. <br><br>  D√®s que le n≈ìud re√ßoit une demande d'√©criture, il ajoute la version re√ßue √† la liste des versions, puis: <br><br><ul><li>  Si le n≈ìud est queue, il marque la version comme propre, √† ce moment la version est consid√©r√©e comme fixe et envoie une confirmation en aval de la cha√Æne. </li><li>  Sinon, il marque la version comme sale et envoie la demande plus loin dans la cha√Æne. </li></ul><br>  D√®s que le n≈ìud re√ßoit la confirmation du successeur, il marque la version comme propre et supprime toutes les versions pr√©c√©dentes. <br><br>  D√®s que le n≈ìud re√ßoit une demande de lecture: <br><br><ul><li>  Si la derni√®re version de l'objet connue du n≈ìud est propre, elle la renvoie. </li><li>  Sinon, il fait une demande de queue pour obtenir la derni√®re version fixe de l'objet, qu'il retourne au client.  (Par construction, une telle version sera toujours sur le n≈ìud). </li></ul><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/ov/m9/ij/ovm9ijvqtmutvnc96zey0lti9os.png"></div><br>  Pour les applications avec une pr√©dominance de demandes de lecture, les performances du CRAQ <b>croissent lin√©airement avec la croissance des n≈ìuds</b> , dans le cas d'une pr√©dominance des demandes d'√©criture, les performances ne seront pas pires que l'approche de base. <br><br>  CRAQ peut √™tre situ√© √† la fois dans un ou plusieurs centres de donn√©es.  Cela permet aux clients de s√©lectionner les n≈ìuds les plus proches pour augmenter la vitesse des demandes de lecture. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b4/mt/yv/b4mtyvanehrdfjdsp8iomlqz5x8.png"></div><br><br><h3>  3.2 Coh√©rence dans le CRAQ </h3><br>  CRAQ fournit une forte coh√©rence, sauf dans un cas: lorsque le n≈ìud re√ßoit la derni√®re version valid√©e de tail, tail peut valider la nouvelle version avant que le n≈ìud ne r√©ponde au client.  Dans cette situation, le CRAQ assure une <b>lecture monotone</b> (les demandes de lecture s√©quentielle ne seront plus du pass√©, mais peuvent renvoyer d'anciennes donn√©es) <b>sur l'ensemble de la cha√Æne</b> . <br><br>  Une faible coh√©rence est √©galement possible: <br><br><ul><li>  Coh√©rence √©ventuelle: le n≈ìud ne demandera pas la derni√®re version valid√©e √† tail.  Cela perturbera la lecture monotone sur toute la cha√Æne, mais gardera la <b>lecture monotone sur le m√™me n≈ìud</b> .  De plus, il peut r√©sister √† la <b>tol√©rance de partitionnement du r√©seau</b> . </li><li>  Coh√©rence √©ventuelle born√©e: renvoyer une version sale uniquement jusqu'√† un certain point.  Par exemple, la diff√©rence entre les versions sales et propres ne doit pas d√©passer N r√©visions.  Ou un d√©lai. </li></ul><br><h3>  3.3 Basculement du serveur </h3><br>  Similaire √† l'approche de base. <br><br><h3>  3.4 Facultatif </h3><br>  CRAQ a une fonctionnalit√© int√©ressante - vous pouvez utiliser la multidiffusion pendant l'op√©ration d'enregistrement.  Supposons que la t√™te envoie la modification avec une multidiffusion et envoie vers le bas de la cha√Æne uniquement un identifiant pour cet √©v√©nement.  Si la mise √† jour elle-m√™me n'est pas arriv√©e au n≈ìud, elle peut attendre et la recevoir du n≈ìud suivant lorsque Tail envoie un message de confirmation du changement.  De m√™me, la queue peut envoyer une confirmation de fixation avec la multidiffusion. <br><br><h1>  4. FAWN: une matrice rapide de n≈ìuds Wimpy </h1><br>  Une √©tude tr√®s int√©ressante, pas directement li√©e au sujet de cet article, mais sert d'exemple de l'utilisation de la r√©plication de cha√Æne. <br><br>  Les stockages de valeurs-cl√©s hautes performances (Dynamo, memcached, Voldemort) ont des caract√©ristiques communes - ils n√©cessitent des E / S, un minimum de calcul, un acc√®s ind√©pendant parall√®le √† des cl√©s al√©atoires en grandes quantit√©s et de petites valeurs de cl√©s jusqu'√† 1 Ko. <br><br>  Les serveurs avec disques durs ne conviennent pas √† ces clusters en raison de la longue op√©ration de recherche (temps d'acc√®s al√©atoire), et les serveurs avec un grand nombre de DRAM consomment une quantit√© √©tonnamment grande d'√©nergie - 2 Go de DRAM √©quivalent √† 1 To de disque dur. <br><br>  La construction d'un cluster efficace (bande passante) avec une consommation √©lectrique minimale est l'objectif de l'√©tude originale.  50% des co√ªts du serveur sur trois ans sont des co√ªts d'√©lectricit√©, et les modes d'√©conomie d'√©nergie modernes ne sont pas aussi efficaces qu'ils sont annonc√©s - dans les tests √† 20% de charge, la consommation du processeur est rest√©e √† 50%, et les autres composants du serveur n'ont pas du tout de modes d'√©conomie d'√©nergie ( La DRAM, par exemple, fonctionne d√©j√† au minimum).  Il est important de noter que dans de tels clusters, l'√©cart entre le processeur et les E / S s'√©largit - un processeur puissant est oblig√© d'attendre la fin des op√©rations d'E / S. <br><br><h3>  4.1 Architecture </h3><br>  Le cluster FAWN est construit sur d'anciens serveurs pour 250 $ (prix 2009), avec un processeur 500 MHz int√©gr√©, 512 Mo de RAM, SSD 32 Go.  Si vous √™tes familier avec l'architecture Amazon Dynamo ou le hachage coh√©rent, alors vous serez familier avec l'architecture FAWN: <br><br><ol><li>  Chaque serveur physique contient plusieurs n≈ìuds virtuels, chacun a son propre VID. </li><li>  Les VID forment un anneau, chaque VID est responsable de la plage ¬´derri√®re lui¬ª (par exemple, A1 est responsable des cl√©s de la plage R1). </li><li>  Pour augmenter la fiabilit√©, les donn√©es sont r√©pliqu√©es dans R des n≈ìuds suivants dans le sens horaire.  (par exemple, avec R = 2, la cl√© sur A1 est r√©pliqu√©e sur B1 et C1), nous obtenons donc une r√©plication de cha√Æne (approche de base). </li><li>  Les demandes de lecture vont √† la cha√Æne de queue, c'est-√†-dire  La lecture de la cl√© de A1 ira √† C1. </li><li>  Les demandes d'√©criture vont √† la cha√Æne principale et vont jusqu'√† la fin. </li></ol><br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/2c/ha/ju/2chajuapsbnk62bkoezfjqbx_sg.png"></div><br>  La mappe de serveur est stock√©e sur un cluster de serveurs frontaux, chacun √©tant responsable de sa liste VID sp√©cifique, et peut rediriger la demande vers un autre serveur frontal. <br><br><h3>  4.2 R√©sultats des tests </h3><br>  Dans les tests de charge, le FAWN atteint un QPS (requ√™tes par seconde) de 90% du QPS sur un lecteur flash √† lecture al√©atoire. <br><br>  Le tableau suivant compare le co√ªt total de possession (TCO) de diverses configurations, o√π la base de Traditional est un serveur de 1 000 $ avec une consommation de 200 W (prix de 2009): <br><div style="text-align:center;"><img width="500" src="https://habrastorage.org/webt/vj/ki/kw/vjkikw3uwpxdhslspdiobfaosm0.png"></div><br>  Ainsi, si: <br><br><ul><li>  Big data, quelques requ√™tes: FAWN + 2 To 7200 RPM </li><li>  Une petite quantit√© de donn√©es, beaucoup de demandes: FAWN + 2GB DRAM </li><li>  Valeurs moyennes: FAWN + 32GB SSD </li></ul><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/dl/ge/om/dlgeom_ymwwtheb8vdugkpgv23a.png"></div><br><h1>  Les r√©f√©rences </h1><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">R√©plication de cha√Æne pour prendre en charge un d√©bit et une disponibilit√© √©lev√©s</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Stockage d'objets sur CRAQ: r√©plication de cha√Æne √† haut d√©bit pour les charges de travail en lecture seule</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">FAWN: Un tableau rapide de n≈ìuds Wimpy</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430396/">https://habr.com/ru/post/fr430396/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430384/index.html">Cr√©ation de cartes √† partir d'entit√©s de bruit</a></li>
<li><a href="../fr430386/index.html">Construction d'une centrale de stockage √† semi-conducteurs en Inde</a></li>
<li><a href="../fr430388/index.html">Conf√©rence Web Summit</a></li>
<li><a href="../fr430392/index.html">Comment d√©velopper et tester des API avec mon ¬´v√©lo¬ª PieceofScript</a></li>
<li><a href="../fr430394/index.html">Impl√©mentation de la recherche instantan√©e dans Android √† l'aide de RxJava</a></li>
<li><a href="../fr430398/index.html">Comment comprendre que vous n'√™tes pas le bienvenu ou discuter des m√©thodes de retrait des travailleurs de l'entreprise</a></li>
<li><a href="../fr430400/index.html">Exp√©rience de l'utilisation d'un hybride clavier et souris dans la programmation</a></li>
<li><a href="../fr430402/index.html">Qu'est-ce que developer.android.com ne dit rien sur RecyclerView?</a></li>
<li><a href="../fr430404/index.html">Nous collectons des donn√©es sur le comportement des clients sur le site</a></li>
<li><a href="../fr430406/index.html">C ++ 20 et modules, mise en r√©seau, coroutines, gammes, graphiques. R√©sultats de la r√©union √† San Diego</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>