<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💲 🛷 ✊🏻 Vue d'ensemble et tests comparatifs du PC "Elbrus 401 - PC". Troisième partie - Outils de développement 🌞 👦🏿 💍</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nous continuons d'examiner le nouvel ordinateur national. Après une brève connaissance des fonctionnalités de l'architecture Elbrus, nous considéreron...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vue d'ensemble et tests comparatifs du PC "Elbrus 401 - PC". Troisième partie - Outils de développement</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/389927/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nous continuons d'examiner le nouvel ordinateur national. </font><font style="vertical-align: inherit;">Après une brève connaissance des fonctionnalités de l'architecture Elbrus, nous considérerons les outils de développement logiciel qui nous sont proposés.</font></font><br>
<br>
<img src="https://habrastorage.org/files/6c3/e5f/5a6/6c3e5f5a6ffa4c3a84e7513fdeadb231.jpeg" alt="Vue avant et latérale de l'unité centrale Elbrus 401-PC" title="Elbrus 401-PC.  Unité système  Vue avant et latérale" width="288" height="288"><img src="https://habrastorage.org/files/9d3/6bd/204/9d36bd20497345beb64a7062a9362a0b.png" alt="Exemple de programme de langage machine E2K" title="Elbrus 401-PC.  Langage machine E2K.  Exemple de programme" width="400" height="288"><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Rappelons la structure de l'article:</font></font><br>
<br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">examen du matériel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">processus d'acquisition;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">matériel</font></font></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">revue du logiciel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lancement du système d'exploitation;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">logiciel ordinaire;</font></font></li>
</ul></li>
<li><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aperçu des outils de développement:</font></font></strong><ul>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">caractéristiques de l'architecture</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">langage machine</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">outils de développement</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ;</font></font></li>
</ul></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">analyse comparative des performances</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Description des ordinateurs concurrents</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résultats de référence;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">résumant.</font></font></li>
</ul></li>
</ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonne lecture!</font></font><br>
<br>
<h1><a name="arch"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Caractéristiques de l'architecture</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essence de l'architecture E2K en une phrase peut être formulée comme suit: registres 64 bits, parallélisme explicite de l'exécution des instructions et accès mémoire strictement contrôlé. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par exemple, les processeurs d'architecture x86 ou SPARC qui sont capables d'exécuter plus d'une instruction par cycle (superscalaire), et parfois aussi hors service, sont </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">implicites</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parallélisme: le processeur analyse directement en temps réel les dépendances entre instructions sur une petite section de code et, s'il le juge possible, charge en même temps certains actionneurs. Parfois, il agit trop optimiste, - de manière spéculative, en rejetant le résultat ou en annulant la transaction en cas de prédiction infructueuse. Parfois, au contraire, c'est trop pessimiste - en supposant des dépendances entre les valeurs des registres ou des parties des registres, qui ne sont en fait pas du point de vue du programme exécutable. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si&nbsp; </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">explicite</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parallélisme (explicitement instruction parallèle calcul, EPIC) la même analyse a lieu au stade de la compilation, et toutes les instructions machine définies pour une exécution parallèle sont écrites dans un très grand mot d'instruction (VLIW), et Elbrus a la longueur de cette Les «mots» ne sont pas fixes et peuvent aller de 1 à 8 mots doubles (dans ce contexte, un seul mot a une capacité de 32 bits).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sans aucun doute, le compilateur a des capacités beaucoup plus importantes en termes de quantité de code couvert, de temps et de mémoire dépensés, et lors de l'écriture manuelle du code machine, le programmeur peut effectuer une optimisation encore plus intelligente. Mais c'est en théorie, et dans la pratique, il est peu probable que vous utilisiez l'assembleur, et donc tout dépend de la qualité du compilateur d'optimisation, et en écrire un n'est pas une tâche facile, c'est le moins qu'on puisse dire. De plus, si, avec un parallélisme implicite, des instructions «lentes» peuvent continuer à fonctionner sans bloquer la réception des instructions suivantes sur d'autres actionneurs, alors avec un parallélisme explicite, la commande Wide entière attendra l'achèvement complet. Enfin, un compilateur d'optimisation aidera peu à interpréter les langages dynamiques.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tout cela est bien compris au MCST, bien sûr, et par conséquent, Elbrus implémente également des technologies d'exécution spéculative, du code et des données préchargés et des opérations de calcul combinées. </font><font style="vertical-align: inherit;">Par conséquent, au lieu de théoriser et de se demander infiniment combien de gigaflops hypothétiques telle ou telle plate-forme peut donner dans un ensemble de circonstances réussies, dans la quatrième partie de l'article, nous prenons et évaluons simplement les performances réelles de programmes réels - appliqués et synthétiques.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VLIW: une percée ou une impasse?</font></font></b><div class="spoiler_text"> ,   VLIW   &nbsp;  : , &nbsp; ‑ Transmeta Crusoe&nbsp;— &nbsp;«».     , &nbsp;        &nbsp; Efficeon (   &nbsp; ) &nbsp;&nbsp;  .  &nbsp;,  &nbsp;   x86- &nbsp; ,  &nbsp;  . ,  &nbsp;Pentium&nbsp;M  &nbsp;,   &nbsp; Pentium&nbsp;4 ,      . &nbsp;&nbsp;   &nbsp;  VIA&nbsp;C3,    x86.<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En raison de son caractère exotique, la technologie d'exécution protégée de programmes en langages C / C ++, où l'utilisation de pointeurs offre une large gamme de possibilités de se tirer une balle dans le pied, n'est pas moins intéressante. Le concept de protection contextuelle, implémenté conjointement par le compilateur au stade de l'assemblage et le processeur au moment de l'exécution, ainsi que le système d'exploitation en termes de gestion de la mémoire, ne permettront pas de violer la portée des variables - qu'il s'agisse d'accéder à une variable de classe privée, aux données privées d'un autre module, aux variables locales de la fonction appelante . Toute manipulation avec modification du niveau d'accès n'est autorisée que dans le sens d'une réduction des droits. L'enregistrement des liens vers des objets à vie courte dans des structures à vie longue est bloqué. Les tentatives sont également empêchées d'utiliser des liens morts: si l'objet auquel le lien a été reçu une fois a déjà été supprimé,même l'emplacement d'une autre nouvelle installation à la même adresse ne sera pas considéré comme une excuse pour accéder à son contenu. Encouragé à utiliser les données comme code et à contrôler les transferts n'importe où.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En effet, dès que l'on passe des idiomes de haut niveau à des pointeurs de bas niveau, tous ces domaines de visibilité se révèlent n'être rien de plus que du sel syntaxique. Certains cas (les plus simples) de mauvaise utilisation des pointeurs peuvent parfois aider à détecter les analyseurs de code source statiques. Mais lorsque le programme est déjà traduit en instructions machine x86 ou SPARC, rien ne l'empêchera de lire ou d'écrire la valeur à partir de la mauvaise cellule de mémoire ou de la mauvaise taille, ce qui entraînera un plantage dans un endroit complètement différent - et vous êtes ici, en regardant la pile endommagée et vous ne savez pas par où commencer le débogage, car sur l'autre machine, le même code fonctionne correctement. Et le débordement de pile et les vulnérabilités qui en résultent ne sont que le fléau des plates-formes populaires. Il est gratifiant que nos développeurs abordent systématiquement ces problèmes,et ne se limite pas à disposer de plus en plus de béquilles, dont l'effet ressemble plutôt à un râteau. Après tout, personne ne se soucie de la vitesse à laquelle votre programme fonctionne s'il ne fonctionne pas correctement. En outre, un contrôle plus strict par le compilateur vous oblige à réécrire le code "odeur nauséabonde" et intolérable, ce qui signifie qu'il améliore indirectement la culture de programmation.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'ordre des octets lors du stockage des nombres dans la mémoire d'Elbrus, contrairement à SPARC, est peu endian (l'octet inférieur vient en premier), c'est-à-dire, comme sur x86. </font><font style="vertical-align: inherit;">De même, étant donné que la plate-forme vise à prendre en charge le code x86, il n'y a aucune restriction sur l'alignement des données en mémoire.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ordre, alignement et portabilité</font></font></b><div class="spoiler_text">&nbsp;,    Intel,   ,  &nbsp;    &nbsp; &nbsp; (,  32‑  &nbsp; <em>0x0400000<strong>5</strong></em>)&nbsp;—  &nbsp;  ,   , &nbsp; ,  &nbsp; .    - ,   &nbsp; ,  &nbsp;    &nbsp;,&nbsp;—   ,    &nbsp;  ( &nbsp; ,  UTF‑16),  &nbsp;  ,  , &nbsp;   , &nbsp;&nbsp;    ‑. ,         &nbsp; ,&nbsp;— , SPARC,&nbsp;—    &nbsp; .<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous pouvez en savoir plus sur la conception des ordinateurs MCST sur les architectures SPARC et E2K dans le livre «Microprocessors and Computing Complexes of the Elbrus Family», qui a été </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">publié par la Peter Publishing House</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans un&nbsp; </font><font style="vertical-align: inherit;">tirage minimal et a longtemps été vendu, mais est disponible gratuitement en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format PDF</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6 Mo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) et pour une somme modique sur&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Google Play</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dans le contexte de l'absence d'autres informations détaillées dans le domaine public, cette publication n'est qu'un réservoir de connaissances. </font><font style="vertical-align: inherit;">Mais le texte se concentre principalement sur le matériel, les algorithmes de fonctionnement des tampons et des pipelines, les caches et les dispositifs arithmétiques et logiques - le sujet de l'écriture de programmes [efficaces] n'est complètement pas abordé, et même la simple mention d'instructions machine peut être comptée sur les doigts.</font></font><br>
<br>
<h1><a name="asm"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langage machine</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En plus de compiler les langages de haut niveau C, C ++, Fortran, la documentation à chaque occasion n'oublie pas de mentionner la possibilité d'écrire des programmes directement dans Assembler, mais nulle part il n'est spécifié comment exactement vous pouvez vous impliquer dans cet art en filigrane, où au moins vous pouvez obtenir une référence aux instructions de la machine. </font><font style="vertical-align: inherit;">Heureusement, le système dispose d'un débogueur GDB qui peut désassembler le code des programmes précédemment compilés. </font><font style="vertical-align: inherit;">Afin de ne pas aller au-delà de la portée de l'article, nous écrivons une fonction arithmétique simple qui a un bon retard de parallélisation.</font></font><br>
<br>
<pre><code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> CalcParallel(
	<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> a,
	<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> b,
	<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> c,
	<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> d,
	<span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> e,
	<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> f,
	<span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> g,
	<span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> h<font></font>
) {<font></font>
	<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (a * b) + (c * d) - (e * f) + (g / h);<font></font>
}<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Voici à quoi cela se traduit lors de la compilation en mode </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-O3</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> :</font></font><br>
<br>
<pre><code class="hljs perl"><span class="hljs-number"><span class="hljs-number">0x0000000000010490</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">0</span></span>&gt;:<font></font>
	muld,<span class="hljs-number"><span class="hljs-number">1</span></span> %dr0, %dr1, %dg20<font></font>
	sxt,<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>, %r3, %dg19<font></font>
	getfs,<span class="hljs-number"><span class="hljs-number">3</span></span> %r6, _f32,_lts2 <span class="hljs-number"><span class="hljs-number">0x2400</span></span>, %g17<font></font>
	getfs,<span class="hljs-number"><span class="hljs-number">4</span></span> %r5, _lit32_ref, _lts2 <span class="hljs-number"><span class="hljs-number">0x00002400</span></span>, %g18<font></font>
	getfs,<span class="hljs-number"><span class="hljs-number">5</span></span> %r7, _f32,_lts3 <span class="hljs-number"><span class="hljs-number">0x200</span></span>, %g16
	<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> %ctpr3<font></font>
	setwd wsz = <span class="hljs-number"><span class="hljs-number">0x5</span></span>, nfx = <span class="hljs-number"><span class="hljs-number">0x1</span></span>
	setbp psz = <span class="hljs-number"><span class="hljs-number">0x0</span></span>
<span class="hljs-number"><span class="hljs-number">0x00000000000104c8</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">56</span></span>&gt;:<font></font>
	nop <span class="hljs-number"><span class="hljs-number">5</span></span>
	muld,<span class="hljs-number"><span class="hljs-number">0</span></span> %dr2, %dg19, %dg18<font></font>
	muls,<span class="hljs-number"><span class="hljs-number">3</span></span> %r4, %g18, %g17<font></font>
	sdivs,<span class="hljs-number"><span class="hljs-number">5</span></span> %g17, %g16, %g16
<span class="hljs-number"><span class="hljs-number">0x00000000000104e0</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">80</span></span>&gt;:<font></font>
	sxt,<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>, %g17, %dg17<font></font>
	addd,<span class="hljs-number"><span class="hljs-number">1</span></span> %dg20, %dg18, %dg18
<span class="hljs-number"><span class="hljs-number">0x00000000000104f0</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">96</span></span>&gt;:<font></font>
	nop <span class="hljs-number"><span class="hljs-number">5</span></span>
	subd,<span class="hljs-number"><span class="hljs-number">0</span></span> %dg18, %dg17, %dg17
<span class="hljs-number"><span class="hljs-number">0x00000000000104f8</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">104</span></span>&gt;:<font></font>
	sxt,<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>, %g16, %dg16
<span class="hljs-number"><span class="hljs-number">0x0000000000010500</span></span> &lt;+<span class="hljs-number"><span class="hljs-number">112</span></span>&gt;:<font></font>
	ct %ctpr3<font></font>
	ipd <span class="hljs-number"><span class="hljs-number">3</span></span>
	addd,<span class="hljs-number"><span class="hljs-number">0</span></span> %dg17, %dg16, %dr0
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La première chose qui attire votre attention est que chaque commande est décodée immédiatement en plusieurs instructions exécutées en parallèle. La désignation mnémonique des instructions est généralement intuitive, bien que certains noms semblent inhabituels après Intel: par exemple, une instruction d'extension non signée s'appelle ici </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sxt</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , pas&nbsp; </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">movzx</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Le paramètre de nombreuses commandes de calcul, en plus des opérandes eux-mêmes, est le numéro du dispositif exécutif - ce n'est pas sans raison que ELBRUS signifie une planification explicite d'utilisation des ressources de base, c'est-à-dire une «planification explicite pour l'utilisation des ressources de base». </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour accéder à la valeur de registre 64 bits complète, le préfixe « </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"; en théorie, il est également possible d'accéder aux 16 et 8 bits inférieurs de la valeur. La désignation des registres mondiaux à usage général, dont 32 pièces sont préfixées par « </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">g</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> » </font><font style="vertical-align: inherit;">devant le numéro </font><font style="vertical-align: inherit;">, et les registres de procédures locales par le préfixe « </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">r</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ». La taille de la fenêtre des registres locaux demandés par l'instruction </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">setwd</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> peut atteindre 224, et la </font><em><font style="vertical-align: inherit;">pompe est poussée</font></em><font style="vertical-align: inherit;"> automatiquement </font><em><font style="vertical-align: inherit;">sur la</font></em><font style="vertical-align: inherit;"> pile selon les besoins. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La façon dont vous appliquez certaines instructions est déroutante: par exemple, </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">retourner</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme vous pouvez le deviner, sert à retourner le contrôle de la procédure d'appel, cependant, dans tous les exemples de code étudiés, cette instruction se produit bien avant la dernière commande (où une sorte de manipulation de contexte est également présente), parfois même dans le tout premier mot de commande, comme ici. Bien que le livre susmentionné consacre un paragraphe entier à ce problème, il n'est pas encore devenu clair pour nous. </font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mise à jour au 9 février 2016:</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> les commentaires suggèrent que l' </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">instruction return</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ne prépare que la voie pour le retour du sous-programme et permet au processeur de commencer à charger les commandes suivantes de la procédure d'appel, et le contrôle lui-même revient lorsque l'exécution atteint l'instruction&nbsp; </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ct</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, «code facile à lire» et «code efficace» sont loin d'être les mêmes en matière d'instructions machine. </font><font style="vertical-align: inherit;">Si vous compilez sans optimisation, le code est plus cohérent et similaire au calcul du front, mais au prix d'un allongement: au lieu de 6 mots de commande saturés, 8 mots clairsemés sont générés. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Séance révélatrice sur le marc de café pour la simulation, finissons avant de fantasmer sur des hypothèses complètement ridicules. </font><font style="vertical-align: inherit;">Espérons qu'un jour la référence de la commande et le guide de programmation et d'optimisation seront rendus publics.</font></font><br>
<br>
<h1><a name="devel"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Outils de développement</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le compilateur de langage C / C ++ standard dans le système d'exploitation Elbrus est LCC, un développement propriétaire de la société MCST, compatible avec GCC. </font><font style="vertical-align: inherit;">Des informations détaillées sur la structure et les principes de ce compilateur ne sont pas publiées, mais selon </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">un entretien avec un ancien développeur de l'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> une des nombreuses sous-espèces développées du compilateur, </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">Edison Design Group</font></a><font style="vertical-align: inherit;"> utilise une interface pour une analyse de haut niveau des codes source&nbsp;</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et la traduction de bas niveau en instructions machine peut être effectuée de différentes manières - sans optimisation ou avec optimisation. </font><font style="vertical-align: inherit;">C'est le compilateur d'optimisation qui est fourni aux utilisateurs finaux, non seulement sur la plate-forme E2K, pour laquelle il n'y a tout simplement pas de générateurs de code machine alternatifs, mais également sur la famille de plates-formes SPARC, où le GCC habituel faisant partie du système d'exploitation MSVS est également disponible.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Compte tenu des caractéristiques architecturales répertoriées ci-dessus - concurrence évidente, exécution sécurisée des programmes - le compilateur LCC implémente évidemment de nombreuses solutions uniques dignes des études et tests les plus rigoureux dans la pratique. Malheureusement, au moment de la rédaction de ces lignes, l'auteur n'a ni qualifications suffisantes ni temps pour de telles études; J'espère que tôt ou tard cette question sera abordée par un cercle beaucoup plus large de représentants de la communauté informatique, y compris des plus compétents.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'après ce que vous avez réussi à remarquer à l'œil nu lors de la création de programmes pour tester les performances, LCC sur E2K donne plus souvent que d'autres des avertissements sur les erreurs possibles, les constructions illettrées ou simplement les endroits suspects dans le code. Certes, l'auteur n'est pas si familier avec GCC pour garantir la distinction entre les messages LCC uniques en russe et les messages simplement traduits (de plus, la traduction est sélective), et je ne suis pas sûr qu'un flux d'avertissements plus intense ne soit pas le résultat d'une configuration d'assemblage automatiquement terminée. De plus, ne connaissant pas la sémantique d'une section particulière de code, il est parfois difficile de comprendre à quel point le compilateur est intelligent pour trouver des bogues cachés ou déclencher une fausse alarme. Par exemple, dans le code Postgresql, la même construction se retrouve quatre fois dans le même fichier avec de légères variations:</font></font><br>
<br>
<pre><code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>, ptr = cont-&gt;cells; *ptr; i++, ptr++) {<font></font>
<font></font>
	<span class="hljs-comment"><span class="hljs-comment">//....//</span></span><font></font>
<font></font>
	<span class="hljs-comment"><span class="hljs-comment">/* is string only whitespace? */</span></span>
	<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((*ptr)[<span class="hljs-built_in"><span class="hljs-built_in">strspn</span></span>(*ptr, <span class="hljs-string"><span class="hljs-string">" \t"</span></span>)] == <span class="hljs-string"><span class="hljs-string">'\0'</span></span>)
		<span class="hljs-built_in"><span class="hljs-built_in">fputs</span></span>(<span class="hljs-string"><span class="hljs-string">"&amp;nbsp; "</span></span>, fout);
	<span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
		html_escaped_print(*ptr, fout);<font></font>
<font></font>
	<span class="hljs-comment"><span class="hljs-comment">//....//</span></span><font></font>
}<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le compilateur prédit une sortie possible du tableau unidimensionnel dans la chaîne avec l'appel de la fonction </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">strspn</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Dans quelles circonstances cela peut arriver, l'auteur ne comprend pas (et il n'y a pas eu un tel avertissement sur d'autres plateformes, bien que le mode de vérification soit </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lié à Warray</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">est standard pour GCC), cependant, il convient de noter que plusieurs réplications du même design non trivial (car il était nécessaire d'expliquer son objectif dans le commentaire), au lieu de le mettre dans une fonction distincte avec un nom éloquent qui ne nécessite pas d'explication. Même si l'alarme s'est révélée fausse, la détection d'un code malodorant est un effet utile; les auteurs de l'analyseur statique PVS - Studio seront laissés sans travail. Mais sérieusement, il serait amusant et utile de comparer les erreurs supplémentaires dans le code que le LCC est vraiment capable de détecter en raison des caractéristiques uniques de l'architecture E2K - en même temps, le monde du logiciel libre pourrait obtenir un autre lot de rapports de bogues.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un autre résultat d'une connaissance curieuse avec LCC loquaces était l'auteur de l' </font><font style="vertical-align: inherit;">éducation, et ses collègues plus expérimentés, sur ce trigraphs ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trigraphes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) dans les langues de C / C, et pourquoi ils ne sont pas pris en </font><font style="vertical-align: inherit;">charge par défaut, heureusement. Vous vivez comme ça et ne vous doutez pas que la combinaison apparemment inoffensive de signes de ponctuation dans les littéraux de texte ou les commentaires peut se révéler être une bombe à retardement - ou un excellent matériel pour un signet de programme, selon le côté de la barricade sur laquelle vous vous trouvez.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une conséquence désagréable de l'autosuffisance de LCC est que son format de message est différent de celui de GCC, et lorsqu'ils sont compilés à partir d'un environnement de développement (par exemple, Qt Creator), ces messages tombent uniquement dans le journal général du travail, mais pas dans la liste des problèmes reconnus. Peut-être que cela peut être personnalisé d'une manière ou d'une autre, soit du côté du compilateur, soit dans l'environnement de développement, mais au moins prêt à l'emploi, il ne se comprend pas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Traditionnellement aiguë pour les plates-formes nationales, compte tenu de leurs performances relativement faibles, il y a le problème de la compilation croisée, c'est-à-dire l'assemblage de programmes pour l'architecture cible et un ensemble spécifique de bibliothèques système, en utilisant les ressources d'ordinateurs plus puissants, avec une architecture différente et d'autres logiciels. </font><font style="vertical-align: inherit;">À en juger par les lignes d'identification dans le cœur du système Elbrus et dans le compilateur LCC lui-même, ils sont assemblés sur Linux i386, mais cette boîte à outils pour x86, bien sûr, n'est pas incluse dans le package de distribution du système lui-même. </font><font style="vertical-align: inherit;">C’est intéressant, mais est-il possible de faire le contraire: sur Elbrus pour collecter des programmes pour d’autres plateformes? </font><font style="vertical-align: inherit;">(L'auteur n'a pas réussi plus loin que la première phase de l'assemblage GCC pour i386.) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Versions des packages les plus importants pour le développeur:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">compilateurs: lcc 1.19.18 (compatible gcc 4.4.0);</font></font></li>
<li>: erlang&nbsp;15.b.1, gawk&nbsp;4.0.2, lua&nbsp;5.1.4, openjdk&nbsp;1.6.0_27 (jvm&nbsp;20.0‑b12), perl&nbsp;5.16.3, php&nbsp;5.4.11, python&nbsp;2.7.3, slang&nbsp;2.2.4, tcl&nbsp;8.6.1;</li>
<li> : autoconf&nbsp;2.69, automake&nbsp;1.13.1, cmake&nbsp;2.8.10.2, distcc&nbsp;3.1, m4&nbsp;1.4.16, make&nbsp;3.81, makedepend&nbsp;1.0.4, pkgtools&nbsp;13.1, pmake&nbsp;1.45;</li>
<li> : binutils&nbsp;2.23.1, elfutils&nbsp;0.153, patchelf&nbsp;0.6;</li>
<li>: boost&nbsp;1.53.0, qt&nbsp;4.8.4, qt&nbsp;5.2.1;</li>
<li>: expat&nbsp;2.1.0, ffi&nbsp;3.0.10, gettext&nbsp;0.18.2, glib&nbsp;2.36.3, glibc&nbsp;2.16.0, gmp&nbsp;4.3.1, gtk+&nbsp;2.24.17, mesa&nbsp;10.0.4, ncurses&nbsp;5.9, opencv&nbsp;2.4.8, pcap&nbsp;1.3.0, popt&nbsp;1.7, protobuf&nbsp;2.4.1, sdl&nbsp;1.2.13, sqlite&nbsp;3.6.13, tk&nbsp;8.6.0, usb&nbsp;1.0.9, wxgtk&nbsp;2.8.12, xml‑parser&nbsp;2.41, zlib&nbsp;1.2.7;</li>
<li>  &nbsp;: cppunit&nbsp;1.12.1, dprof&nbsp;1.3, gdb&nbsp;7.2, perf&nbsp;3.5.7;</li>
<li> : anjuta&nbsp;2.32.1.1, glade&nbsp;2.12.0, glade&nbsp;3.5.1, qt‑creator&nbsp;2.7.1;</li>
<li>  : bzr&nbsp;2.2.4, cvs&nbsp;1.11.22, git&nbsp;1.8.0, patch&nbsp;2.7, subversion&nbsp;1.7.7.</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Encore une fois, si vous vous attendiez à GCC 5, PHP 7 et Java 9, ce sont vos problèmes, comme le dit un footballeur célèbre. Dans ce cas, je dois également dire merci du moins pas GCC 3.4.6 (LCC 1.16.12), comme dans les versions précédentes du système Elbrus, ou GCC 3.3.6 dans la composition du MSVS 3.0; Par ailleurs, le compilateur principal dans MSVS 3.0 est toujours GCC 2.95.4 (et pourquoi être surpris quand il y a un noyau à partir d'une branche 2.4?). Par rapport à la situation précédente, lorsqu'il était possible de tomber sur un bogue GCC corrigé en amont il y a dix ans, le nouveau système a des conditions presque paradisiaques - vous pouvez même le faire glisser en C ++ 11 si vous ne souhaitez pas conserver la compatibilité descendante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'émergence d'OpenJDK, au moins sous une certaine forme, peut déjà être qualifiée de grande percée, car l'aversion pour Java et&nbsp; </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mono</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans de tels systèmes est connue depuis longtemps; et cette aversion peut être comprise lorsque même les programmes natifs bougent à peine. Puisqu'il y a beaucoup de Javistes parmi les collègues de l'auteur, en raison des circonstances ci-dessus, obligés de restreindre les merveilleuses impulsions de l'âme, il a été décidé de consacrer une série distincte de tests de performance pour consacrer Java. Pour l'avenir, nous notons que les résultats ont été décourageants même en termes relatifs: avec le même succès, vous pouvez probablement écrire des scripts interprétés en PHP ou en Python. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La prise en charge de C et C ++ seul n'est pas limitée à la compatibilité avec la collection de compilateurs GNU: le système a toujours un traducteur Fortran. Comme l'auteur ne connaît que le professeur Fortran, toute personne intéressée peut recommander le </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">sujet de</font></a><font style="vertical-align: inherit;"> décembre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sur «Made with Us»</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, où les commentaires portent sur l'utilisation de cette langue comme référence. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour le dessert, nous avons stocké les plus délicieux: la </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dernière partie de l'article est</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> consacrée à l'étude des performances d'Elbrus en comparaison avec une variété de plateformes matérielles et logicielles, y compris domestiques.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr389927/">https://habr.com/ru/post/fr389927/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr389915/index.html">RandomRace.ru - radiogoniométrie pour les nuls (début)</a></li>
<li><a href="../fr389917/index.html">Clé électronique multifonction Power-flash</a></li>
<li><a href="../fr389919/index.html">eReader Prestigio: unité et lutte des contraires d'un lecteur</a></li>
<li><a href="../fr389921/index.html">Elon Musk a refusé de vendre la Model X au client après avoir critiqué</a></li>
<li><a href="../fr389923/index.html">Vol vers Mars en 2025, visite de l'ISS et du camion Tesla: ce qu'Elon Musk a promis à StartmeupHK 2016</a></li>
<li><a href="../fr389929/index.html">Aspirateur robot: 10 critères de sélection clés</a></li>
<li><a href="../fr389931/index.html">L'équipe de football américaine a perdu parce que les tablettes Microsoft Surface se sont brisées</a></li>
<li><a href="../fr389935/index.html">Elon Musk: «La réalité virtuelle peut réduire l'activité physique»</a></li>
<li><a href="../fr389943/index.html">Видеообзор 3D-сканера RangeVision Advanced</a></li>
<li><a href="../fr389945/index.html">Vinyle: le neuf est bien oublié l'ancien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>