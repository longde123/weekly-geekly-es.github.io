<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฅข ๐๐ฝ ๐ค ุงูุชูููุฐ ุงูุฃุตูู ูููุชุจุฉ ECS ๐ฉ๐พโ๐จ ๐ฆ๐ผ ๐ง๏ธ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุจุฏุฃุช ูุฐุง ุงูุฃุณุจูุน ุงูุนูู ุนูู ูุญุฑู Vagabond ุงูุฎุงุต ุจู ูุจุฏุฃุช ูู ุชูููุฐ ูุงูุจ ูุธุงู ุงูููุงู ุงููููู . 

 ูู ูุฐู ุงูููุงูุฉ ุฃุฑูุฏ ุฃู ุฃุชุญุฏุซ ุนู ุชูููุฐู ุ ูุงูุฐู ูุชููุฑ ูุฌุง...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุชูููุฐ ุงูุฃุตูู ูููุชุจุฉ ECS</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459288/" style=";text-align:right;direction:rtl"><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4c9/fc6/23e/4c9fc623e0787518bde7823317b0e6af.png" alt="ุตูุฑุฉ"></div><br>  ุจุฏุฃุช ูุฐุง ุงูุฃุณุจูุน ุงูุนูู ุนูู ูุญุฑู Vagabond ุงูุฎุงุต ุจู ูุจุฏุฃุช ูู ุชูููุฐ ูุงูุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุธุงู ุงูููุงู ุงููููู</a> . <br><br>  ูู ูุฐู ุงูููุงูุฉ ุฃุฑูุฏ ุฃู ุฃุชุญุฏุซ ุนู ุชูููุฐู ุ ูุงูุฐู ูุชููุฑ ูุฌุงููุง ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GitHub</a> .  ููู ุจุฏูุงู ูู ูุฌุฑุฏ ุงูุชุนููู ุนูู ุงูููุฏ ุ ุฃุฑูุฏ ุฃู ุฃูุถุญ ููู ุชู ุชุตููู ูููููุง.  ูุฐูู ุ ุณุฃุจุฏุฃ ุจุงูุชูููุฐ ุงูุฃูู ุงูุฐู ูุชุจุชู ุ ููุญูู ููุงุท ููุชู ูุถุนูู ุ ุซู ุฃุธูุฑ ููู ููุช ุจุชุญุณููู.  ูู ุงูููุงูุฉ ุณุฃุฐูุฑ ูุงุฆูุฉ ุจุงูุฌูุงูุจ ุงูุชู ูููู ุชุญุณูููุง ุฃูุถูุง. <br><br><h1 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br><h2 style=";text-align:right;direction:rtl">  ุญุงูุฒ </h2><br>  ูู ุฃุชุญุฏุซ ุนู ููุงุฆุฏ ECS ุนูู ุงูููุฌ ุงูููุฌู ูููุงุฆูุงุช ุ ูุฃู ุงููุซูุฑ ูู ุงููุงุณ ูุจูู ูุนููุง ูุฐุง ุฌูุฏูุง.  ูุงู Scott Bilas ูู ุฃูุงุฆู ูู ุชุญุฏุซูุง ุนู ECS ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://web.archive.org/web/20101011021902/">GDC 2002</a> .  ูู ุจูู ุงูููุฏูุงุช ุงูุดููุฑุฉ ุงูุฃุฎุฑู ููุฐุง ุงูููุถูุน: ูุงูู ููุณุช ุ "ุฅูููููู ููุฑ ููุฑููุฑู" ุ ููุตู " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููููุงุช"</a> ูู ูุชุงุจ " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃููุงุท ุจุฑูุฌุฉ ุงูุฃูุนุงุจ"</a> ุงููุฐูู ูุฑูุจุฑุช ููุณุชุฑูู. <br><br>  ุจุงุฎุชุตุงุฑ ุ ุณุฃููู ุฅู ูููุฉ ECS ูู ุฅูุดุงุก ููุฌ ููุฌู ูุญู ุงูุจูุงูุงุช ุฅูู ููุงูุงุช ุงููุนุจุฉ ููุตู ููุงุณุจ ููุจูุงูุงุช ูุงูููุทู.  ุงูููุงูุงุช ุชุชููู ูู ููููุงุช ุชุญุชูู ุนูู ุจูุงูุงุช.  ูุงูุฃูุธูุฉ ุงูุชู ุชุญุชูู ุนูู ููุทู ุนูููุฉ ูุฐู ุงูููููุงุช. <br><br>  ุฅุฐุง ุฐูุจุช ุฅูู ุงูุชูุงุตูู ุ ุจุฏูุงู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุฑุงุซ</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชู</a> ุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุชูููู</a> ูู ECS.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู ูุฐุง ุงูููุฌ ุงูููุฌู ูุญู ุงูุจูุงูุงุช ูุณุชููุฏ ุจุดูู ุฃูุถู ูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ููุง ูุนูู ุฃูู ูุญูู ุฃุฏุงุกู ููุชุงุฒูุง. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ุฃูุซูุฉ </h2><br>  ูุจู ุงูุฎูุถ ูู ุงูููุฏ ุ ุฃูุฏ ุฃู ุฃูุถุญ ูู ูุง ุณูููู ุจุชุตูููู. <br><br>  ุชุนููู ุงูููููุงุช ุจุณูุท ููุบุงูุฉ: <br><br><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Position</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Component&lt;Position&gt; { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y; }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Velocity</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Component&lt;Velocity&gt; { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y; };</code> </pre> <br>  ููุง ุชุฑูู ุ ุณูู ูุณุชุฎุฏู ูุงูุจ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">CRTP</a> . <br><br>  ุจุนุฏ ุฐูู ุ ููุฃุณุจุงุจ ูููุฉ ุ ูุงูุชู ุณุฃุดุฑุญูุง ูุงุญููุง ุ ูุญุชุงุฌ ุฅูู ุฅุตูุงุญ ุนุฏุฏ ุงูููููุงุช ูุนุฏุฏ ุงูุฃูุธูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> ComponentCount = <span class="hljs-number"><span class="hljs-number">32</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> SystemCount = <span class="hljs-number"><span class="hljs-number">8</span></span>;</code> </pre> <br>  ุจุนุฏ ุฐูู ุ ููููู ุชุญุฏูุฏ ูุธุงู ุณูุฃุฎุฐ ุฌููุน ุงูููุงูุงุช ุงูุชู ุชุญุชูู ุนูู ูู ูู ุงูููููุงุช ูุชุญุฏูุซ ููุงูุนูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PhysicsSystem</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> System&lt;ComponentCount, SystemCount&gt; { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: PhysicsSystem(EntityManager&lt;ComponentCount, SystemCount&gt;&amp; entityManager) : mEntityManager(entityManager) { setRequirements&lt;Position, Velocity&gt;(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dt)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; entity : getManagedEntities()) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [position, velocity] = mEntityManager.getComponents&lt;Position, Velocity&gt;(entity); position.x += velocity.x * dt; position.y += velocity.y * dt; } } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: EntityManager&lt;ComponentCount, SystemCount&gt;&amp; mEntityManager; };</code> </pre> <br>  ูุณุชุฎุฏู ุงููุธุงู ุจุจุณุงุทุฉ ุทุฑููุฉ <code>setRequirements</code> ุนู ููููุงุช <code>setRequirements</code> .  ุจุนุฏ ุฐูู ุ ูู ุทุฑููุฉ <code>update</code> ุ ููููู ุงุณุชุฏุนุงุก <code>getManagedEntities</code> ูู ุงูููุงูุงุช ุงูุชู ุชูู ุจุงููุชุทูุจุงุช. <br><br>  ุฃุฎูุฑูุง ุ ูููู ุจุฅูุดุงุก ูุฏูุฑ ููุงู ุ ูุชุณุฌูู ุงูููููุงุช ุ ูุฅูุดุงุก ูุธุงู ูุงูุนุฏูุฏ ูู ุงูููุงูุงุช ุ ุซู ุชุญุฏูุซ ููุงุถุนูุง ุจุงุณุชุฎุฏุงู ุงููุธุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> manager = EntityManager&lt;ComponentCount, SystemCount&gt;(); manager.registerComponent&lt;Position&gt;(); manager.registerComponent&lt;Velocity&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> system = manager.createSystem&lt;PhysicsSystem&gt;(manager); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> entity = manager.createEntity(); manager.addComponent&lt;Position&gt;(entity); manager.addComponent&lt;Velocity&gt;(entity); } <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> dt = <span class="hljs-number"><span class="hljs-number">1.0f</span></span> / <span class="hljs-number"><span class="hljs-number">60.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) system-&gt;update(dt);</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงููุนุงููุฑ </h3><br>  ูู ุฃุฏุนู ุฃู ุฅูุดุงุก ููุชุจุฉ ECS ุฃูุถู.  ุฃุฑุฏุช ููุท ุฃู ุฃูุชุจูุง ุจููุณู.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุนููุช ููุท ููุฏุฉ ุฃุณุจูุน. <br><br>  ููุน ุฐูู ุ ูุฐุง ููุณ ุณุจุจุง ูุฎูู ุดูุก ุบูุฑ ูุนุงู ุชูุงูุง.  ูุฐูู ุฏุนููุง ุชุซุจูุช ุงููุนุงููุฑ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฃูู ุณูุฎูู ููุงูุงุช. </li><li style=";text-align:right;direction:rtl">  ูุงูุซุงูู ุณูุณุชุฎุฏู ุงููุธุงู ูุงุฌุชูุงุฒ ุงูููุงูุงุช ุชูุฑุงุฑุง ุ </li><li style=";text-align:right;direction:rtl">  ูุฐุง ุงูุฃุฎูุฑ ุณูู ูุฎูู ููุฏูุฑ ุงูููุงูุงุช ุ </li></ul><br>  ูุนููุงุช ูู ูุฐู ุงููุนุงููุฑ ูู ุนุฏุฏ ุงูููุงูุงุช ุ ูุนุฏุฏ ุงูููููุงุช ููู ููุงู ุ ูุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูููููุงุช ูุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูุฃูุธูุฉ.  ูุจูุฐู ุงูุทุฑููุฉ ุ ูููููุง ุฃู ูุฑู ูุฏู ุฌูุฏุฉ ุชูููุฐูุง.  ุนูู ูุฌู ุงูุฎุตูุต ุ ุณุฃุนุฑุถ ูุชุงุฆุฌ ุซูุงุซุฉ ูููุงุช ุชุนุฑูู ูุฎุชููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูููู ุงูุดุฎุตู A: 32 ููููุงุช ู 16 ุฃูุธูุฉ ุ </li><li style=";text-align:right;direction:rtl">  ููู ุชุนุฑูู AA: 128 ูููููุง ู 32 ูุธุงููุง ุ </li><li style=";text-align:right;direction:rtl">  ููู ุชุนุฑูู AAA: 512 ูููููุง ู 64 ูุธุงููุง. </li></ul><br>  ุนูู ุงูุฑุบู ูู ุฃู ูุฐู ุงููุนุงููุฑ ุณุชุนุทููุง ููุฑุฉ ุนู ุฌูุฏุฉ ุงูุชูููุฐ ุ ููู ุจุณูุทุฉ ููุบุงูุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ูุฐู ุงููุนุงููุฑ ุ ูุณุชุฎุฏู ุงูููุงูุงุช ุงููุชุฌุงูุณุฉ ููุท ุ ูููููุงุชูุง ุตุบูุฑุฉ. <br><br><h1 style=";text-align:right;direction:rtl">  ุชุทุจูู </h1><br><h2 style=";text-align:right;direction:rtl">  ุฌููุฑ </h2><br>  ูู ุชุทุจููู ุ ุงูููุงู ูู ูุฌุฑุฏ ูุนุฑู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Entity = <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>;</code> </pre> <br>  ุนูุงูุฉ ุนูู ุฐูู ุ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Entity.h</a> ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุณูุญุฏุฏ</a> ุฃูุถูุง <code>Index</code> ุงูุงุณู ุงููุณุชุนุงุฑ ุ ูุงูุฐู ุณูููู ูููุฏูุง ูู ููุช ูุงุญู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Index = <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> InvalidIndex = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::numeric_limits&lt;Index&gt;::max();</code> </pre> <br>  ูุฑุฑุช ุงุณุชุฎุฏุงู <code>uint32_t</code> ุจุฏูุงู ูู ููุน 64 ุจุช ุฃู <code>std::size_t</code> ูุชูููุฑ ูุณุงุญุฉ ูุชุญุณูู ุชุญุณูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช.  ูู ูุฎุณุฑ ุงููุซูุฑ: ูู ุบูุฑ ุงููุฑุฌุญ ุฃู ูููู ูุฏู ุดุฎุต ูุง ูููุงุฑุงุช ุงูููุงูุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุนูุตุฑ </h2><br>  ุงูุขู ุฏุนููุง ูุญุฏุฏ ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ููููููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> Type&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">constexpr</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> type = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;(Type); };</code> </pre> <br>  ูุฆุฉ ุงููุงูุจ ุจุณูุทุฉ ุฌุฏูุง ุ ุญูุซ ุชููู ููุท ุจุชุฎุฒูู ูุนุฑู ุงูููุน ุ ูุงูุฐู ุณูุณุชุฎุฏูู ูุงุญููุง ูููุฑุณุฉ ููุงูู ุงูุจูุงูุงุช ุญุณุจ ููุน ุงูููููุงุช. <br><br>  ุงููุนููุฉ ุงููุงูุจ ุงูุฃูู ูู ููุน ุงููููู.  ูุงูุซุงูู ูู ุงููููุฉ ุงููุญููุฉ ุฅูู <code>std::size_t</code> ุ ูุงูุชู ุณุชููู ุจูุซุงุจุฉ ูุนุฑู ููุน ุงููููู. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ูููููุง ุชุนุฑูู ูููู <code>Position</code> ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Positon</span></span></span><span class="hljs-class"> :</span></span> Component&lt;Position, <span class="hljs-number"><span class="hljs-number">0</span></span>&gt; { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y; };</code> </pre> <br>  ููุน ุฐูู ุ ูุฏ ูููู ุงูุชุนุฏุงุฏ ุฃูุซุฑ ููุงุกูุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ComponentType</span></span></span><span class="hljs-class"> {</span></span> Position }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Positon</span></span></span><span class="hljs-class"> :</span></span> Component&lt;Position, ComponentType::Position&gt; { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y; };</code> </pre> <br>  ูู ุงููุซุงู ุงูุชูููุฏู ุ ููุงู ูุนููุฉ ูุงูุจ ูุงุญุฏ ููุท: ูุง ูุญุชุงุฌ ุฅูู ุชุญุฏูุฏ ูุนุฑู ุงูููุน ูุฏูููุง.  ุณูุฑู ูุงุญููุง ููููุฉ ุชุญุณูู ุงููููู ูุฅูุดุงุก ูุนุฑูุงุช ุงูุฃููุงุน ุชููุงุฆููุง. <br><br><h2 style=";text-align:right;direction:rtl">  EntityContainer </h2><br>  ุณุชููู ูุฆุฉ <code>EntityContainer</code> ูุณุคููุฉ ุนู ุฅุฏุงุฑุฉ ุงูููุงูุงุช ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>std::bitset</code></a> ููู ูููุง.  ุณุชุดูุฑ ูุฌููุนุฉ ุงูุจุชุงุช ูุฐู ุฅูู ุงูููููุงุช ุงูุชู ููุชูููุง ุงูููุงู. <br><br>  ูุธุฑูุง ูุฃููุง ุณูุณุชุฎุฏู ุงูููุงูุงุช ูููุฑุณุฉ ุงูุญุงููุงุช ุ ูุฎุงุตุฉ <code>std::vector</code> ุ ูุฅููุง ูุญุชุงุฌ ุฅูู ุฃู ูููู ุงููุนุฑู ุฃุตุบุฑ ุญุฌู ูููู ููุณุชููู ุฐุงูุฑุฉ ุฃูู.  ูุฐูู ุ ุณูู ูุนูุฏ ุงุณุชุฎุฏุงู ูููุฉ ุงูููุงูุงุช ุงููุฏูุฑุฉ.  ููููุงู ุจุฐูู ุ ุณูุชู ุชุฎุฒูู ูุนุฑู ูุฌุงูู ูู ุญุงููุฉ ุชุณูู <code>mFreeEntities</code> . <br><br>  ููุง ูู <code>EntityContainer</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ComponentCount, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SystemCount&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityContainer</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reserve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&gt;&amp; getEntityToBitset(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&amp; getBitset(Entity entity) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>; <span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&gt; mEntityToBitset; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Entity&gt; mFreeEntities; };</code> </pre> <br>  ุฏุนููุง ูุฑู ููู ูุชู ุชูููุฐ ุงูุฃุณุงููุจ. <br><br>  <code>getEntityToBitset</code> ู <code>getBitset</code> ูู <code>getBitset</code> ุงูุตุบูุฑุฉ ุงููุนุชุงุฏุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&gt;&amp; getEntityToBitset() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mEntityToBitset; } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&amp; getBitset(Entity entity) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mEntityToBitset[entity]; }</code> </pre> <br>  ุทุฑููุฉ <code>create</code> ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> entity = Entity(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mFreeEntities.empty()) { entity = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Entity&gt;(mEntityToBitset.size()); mEntityToBitset.emplace_back(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { entity = mFreeEntities.back(); mFreeEntities.pop_back(); mEntityToBitset[entity].reset(); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> entity; }</code> </pre> <br>  ุฅุฐุง ูุงู ููุงู ููุงู ุญุฑ ุ ูุฅูู ูุนูุฏ ุงุณุชุฎุฏุงูู.  ุฎูุงู ุฐูู ุ ุชููู ุงูุทุฑููุฉ ุจุฅูุดุงุก ููุงู ุฌุฏูุฏ. <br><br>  ุชููู ุทุฑููุฉ <code>remove</code> ุจุจุณุงุทุฉ ุจุฅุถุงูุฉ ุงูููุงู ุงููุฑุงุฏ ุฅุฒุงูุชู ูู <code>mFreeEntities</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>{ mFreeEntities.push_back(entity); }</code> </pre> <br>  ุงูุทุฑููุฉ ุงูุฃุฎูุฑุฉ ูู <code>reserve</code> .  ูุชุชูุซู ูููุชูุง ูู ุญุฌุฒ ุงูุฐุงูุฑุฉ ููุฎุชูู ุงูุญุงููุงุช.  ููุง ูุนูู ุ ูุฅู ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูู ุนูููุฉ ููููุฉ ุ ูุฐูู ุฅุฐุง ููุง ูุนุฑู ุชูุฑูุจูุง ุนุฏุฏ ุงูููุงูุงุช ุงููุณุชูุจููุฉ ูู ุงููุนุจุฉ ุ ูุฅู ุงูุฐุงูุฑุฉ ุงูุงุญุชูุงุทูุฉ ุณุชุณุฑุน ุงูุนูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reserve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ mFreeEntities.resize(size); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::iota(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::begin(mFreeEntities), <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::end(mFreeEntities), <span class="hljs-number"><span class="hljs-number">0</span></span>); mEntityToBitset.resize(size); }</code> </pre> <br>  ุจุงูุฅุถุงูุฉ ุฅูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุจุณูุทุฉ ููุฐุงูุฑุฉ ุ ูุฅูู ูููุฃ <code>mFreeEntities</code> ุฃูุถูุง. <br><br><h2 style=";text-align:right;direction:rtl">  ComponentContainer </h2><br>  ุณุชููู ูุฆุฉ <code>ComponentContainer</code> ูุณุคููุฉ ุนู ุชุฎุฒูู ุฌููุน ููููุงุช ุงูููุน ุงููุญุฏุฏ. <br><br>  ูู ุจูุงุฆู ุ ูุชู ุชุฎุฒูู ุฌููุน ููููุงุช ููุน ูุนูู ูุนูุง.  ุจูุนูู ุ ููุฌุฏ ุตููู ูุงุญุฏ ูุจูุฑ ููู ููุน ูููู ูุณูู <code>mComponents</code> . <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ููู ูุชููู ูู ุฅุถุงูุฉ ุฃู ุงุณุชูุงู ุฃู ุฅุฒุงูุฉ ูููู ูู ููุงู ูู ููุช ุซุงุจุช ุ ูุญุชุงุฌ ุฅูู ุทุฑููุฉ ููุงูุชูุงู ูู ููุงู ุฅูู ูููู ููู ูููู ุฅูู ููุงู.  ููููุงู ุจุฐูู ุ ูุญุชุงุฌ ุฅูู <code>mComponentToEntity</code> ุงูุจูุงูุงุช ุชุณูู <code>mComponentToEntity</code> ู <code>mEntityToComponent</code> . <br><br>  ููุง ูู ุฅุนูุงู <code>ComponentContainer</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ComponentCount, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SystemCount&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ComponentContainer</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> BaseComponentContainer { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: ComponentContainer(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&gt;&amp; entityToBitset); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reserve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> override</span></span>; <span class="hljs-function"><span class="hljs-function">T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tryRemove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> override</span></span>; <span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOwner</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; component)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;T&gt; mComponents; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Entity&gt; mComponentToEntity; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;Entity, Index&gt; mEntityToComponent; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&gt;&amp; mEntityToBitset; };</code> </pre> <br>  ููููู ุฃู ุชุฑู ุฃูู ูุฑุซ ูู <code>BaseComponentContainer</code> ุ ูุงูุฐู ุชู ุชุนูููู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseComponentContainer</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~BaseComponentContainer() = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reserve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tryRemove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; };</code> </pre> <br>  ุงูุบุฑุถ ุงููุญูุฏ ูู ูุฐู ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ูู ุฃู ุชููู ูุงุฏุฑุงู ุนูู ุชุฎุฒูู ูุงูุฉ ูุซููุงุช <code>ComponentContainer</code> ูู ุญุงููุฉ. <br><br>  ุฏุนููุง ุงูุขู ูููู ูุธุฑุฉ ุนูู ุชุนุฑูู ุงูุฃุณุงููุจ. <br><br>  ุฃููุงู ุ ููุฑ ูู ุงููููุดุฆ: ุฅูู ูุญุตู ุนูู ุฅุดุงุฑุฉ ุฅูู ุญุงููุฉ ุชุญุชูู ุนูู ูุฌููุนุงุช ูู ูุญุฏุงุช ุจุช ุงูููุงู.  ุณุชุณุชุฎุฏู ูุฐู ุงููุฆุฉ ููุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุงู ูุญุชูู ุนูู ูููู ููุชุญุฏูุซ ูุฌููุนุฉ ุงูุจุชุงุช ููููุงู ุนูุฏ ุฅุถุงูุฉ ูููู ุฃู ุฅุฒุงูุชู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">ComponentContainer(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;&gt;&amp; entityToBitset) : mEntityToBitset(entityToBitset) { }</code> </pre> <br>  ุทุฑููุฉ <code>get</code> ุจุณูุทุฉ ุ ูุญู ููุท ูุณุชุฎุฏู <code>mEntityToComponent</code> ููุนุซูุฑ ุนูู ููุฑุณ ูููู ุงูููุงู ูู <code>mComponents</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mComponents[mEntityToComponent[entity]]; }</code> </pre> <br>  ุชุณุชุฎุฏู ุทุฑููุฉ <code>add</code> ุงููุณูุทุงุช ุงูุฎุงุตุฉ ุจูุง ูุฅุฏุฑุงุฌ ูููู ุฌุฏูุฏ ูู ููุงูุฉ <code>mComponents</code> ุ ุซู ุชูุนุฏ ุงูุฑูุงุจุท ููุงูุชูุงู ูู ููุงู ุฅูู ูููู ููู ูููู ุฅูู ููุงู.  ูู ุงูููุงูุฉ ุ ูููู ุจุชุนููู ุจุช ุจุช ูุฌููุนุฉ <code>entity</code> ุงูุฐู ูุทุงุจู ุงููููู ุจู <code>true</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> index = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Index&gt;(mComponents.size()); mComponents.emplace_back(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Args&gt;(args)...); mComponentToEntity.emplace_back(entity); mEntityToComponent[entity] = index; mEntityToBitset[entity][T::type] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  ุชููู ุทุฑููุฉ <code>remove</code> ุจุชุนููู ูููู ุงูุจุช ุงูููุงุจู ุนูู <code>false</code> ุ ุซู ุชุญุฑูู ุขุฎุฑ ูููู ูู ุงูููููุงุช ุงูููููุฉ <code>mComponents</code> ูู ููุฑุณ ุงููููู ุงูุฐู ูุฑูุฏ ุฅุฒุงูุชู.  ูููู ุจุชุญุฏูุซ ุงูุฑูุงุจุท ูููููู ุงูุฐู ูููุง ุจูููู ููุชู ุ ููุฒูู ุฃุญุฏ ุงูููููุงุช ุงูุชู ูุฑูุฏ ุชุฏููุฑูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>{ mEntityToBitset[entity][T::type] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> index = mEntityToComponent[entity]; <span class="hljs-comment"><span class="hljs-comment">// Update mComponents mComponents[index] = std::move(mComponents.back()); mComponents.pop_back(); // Update mEntityToComponent mEntityToComponent[mComponentToEntity.back()] = index; mEntityToComponent.erase(entity); // Update mComponentToEntity mComponentToEntity[index] = mComponentToEntity.back(); mComponentToEntity.pop_back(); }</span></span></code> </pre> <br>  ูููููุง ุงูููุงู ุจุญุฑูุฉ ุฒูููุฉ ุซุงุจุชุฉ ุนู ุทุฑูู ุชุญุฑูู ุงูุนูุตุฑ ุงูุฃุฎูุฑ ูู ุงูููุฑุณ ุงูุฐู ูุฑูุฏ ุชุฏููุฑู.  ููู ุงููุงูุน ุ ูุญุชุงุฌ ููุท ุฅูู ุฅุฒุงูุฉ ุงููููู ุงูุฃุฎูุฑ ุ ูุงูุฐู ูููู ุงูููุงู ุจู ูู <code>std::vector</code> ูู ููุช ุซุงุจุช. <br><br>  ูุชุญูู ุฃุณููุจ <code>tryRemove</code> ููุนุฑูุฉ ูุง ุฅุฐุง ูุงู ุฃุญุฏ ุงูุนูุงุตุฑ ูุญุชูู ุนูู ูููู ูุจู ูุญุงููุฉ ุฅุฒุงูุชู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tryRemove</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mEntityToBitset[entity][T::type]) { remove(entity); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }</code> </pre> <br>  ุชูุฑุฌุน ุทุฑููุฉ <code>getOwner</code> ุงูููุงู ุงูุฐู ููุชูู ุงููููู ุ ูุฐูู ูุณุชุฎุฏู ุงููุคุดุฑ ุงูุญุณุงุจู ู <code>mComponentToEntity</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOwner</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; component)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> begin = mComponents.data(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> index = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;(&amp;component - begin); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mComponentToEntity[index]; }</code> </pre> <br>  ุงูุทุฑููุฉ ุงูุฃุฎูุฑุฉ ูู <code>reserve</code> ุ ูููุง ููุณ ุงูุบุฑุถ ูู ุงูุทุฑููุฉ ุงูููุงุซูุฉ ูู <code>EntityContainer</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reserve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> override </span></span>{ mComponents.reserve(size); mComponentToEntity.reserve(size); mEntityToComponent.reserve(size); }</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุงููุธุงู </h2><br>  ุงูุขู ุฏุนููุง ูููู ูุธุฑุฉ ุนูู ูุฆุฉ <code>System</code> . <br><br>  ูุญุชูู ูู ูุธุงู ุนูู ูุฌููุนุฉ ูู ูุญุฏุงุช ุจุช <code>mRequirements</code> ุงูุชู ุชุตู ุงูููููุงุช ุงูุชู ูุญุชุงุฌูุง.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูููู ุจุชุฎุฒูู ูุฌููุนุฉ ูู ููุงูุงุช <code>mManagedEntities</code> ุงูุชู ุชูู ุจูุฐู ุงููุชุทูุจุงุช.  ุฃูุฑุฑ ุ ููู ูุชููู ูู ุชูููุฐ ุฌููุน ุงูุนูููุงุช ูู ููุช ุซุงุจุช ุ ูุญุชุงุฌ ุฅูู ุทุฑููุฉ ููุงูุชูุงู ูู ููุงู ุฅูู ููุฑุณู ูู <code>mManagedEntities</code> .  ููููุงู ุจุฐูู ุ ุณูู ูุณุชุฎุฏู <code>std::unordered_map</code> ุชุณูู <code>mEntityToManagedEntity</code> . <br><br>  ุฅููู ูุง ูุจุฏู ุนููู ุฅุนูุงู <code>System</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ComponentCount, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SystemCount&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">System</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~System() = <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setRequirements</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Entity&gt;&amp; getManagedEntities() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onManagedEntityAdded</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([[maybe_unused]] Entity entity)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onManagedEntityRemoved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([[maybe_unused]] Entity entity)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">friend</span></span> EntityManager&lt;ComponentCount, SystemCount&gt;; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt; mRequirements; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> mType; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Entity&gt; mManagedEntities; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unordered_map</span></span>&lt;Entity, Index&gt; mEntityToManagedEntity; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEntityUpdated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">bitset</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;ComponentCount&gt;&amp; components)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEntityRemoved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; };</code> </pre> <br>  ูุณุชุฎุฏู <code>setRequirements</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุนุจูุฑ ุชุญููู</a> ูุถุจุท ููู ุงูุจุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setRequirements</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ (mRequirements.<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(Ts::type), ...); }</code> </pre> <br>  <code>getManagedEntities</code> ุนุจุงุฑุฉ ุนู <code>getManagedEntities</code> ุงููุฆุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ูููุตูู ุฅูู ุงูููุงูุงุช ุงูุชู ุชุชู ูุนุงูุฌุชูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Entity&gt;&amp; getManagedEntities() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mManagedEntities; }</code> </pre> <br>  ุชููู ุจุฅุฑุฌุงุน ูุฑุฌุน ุซุงุจุช ุจุญูุซ ูุง ุชุญุงูู ุงููุฆุงุช ุงูุชู ุชู ุฅูุดุงุคูุง ุชุนุฏูู <code>mManagedEntities</code> . <br><br>  <code>onManagedEntityAdded</code> ู <code>onManagedEntityRemoved</code> ูุงุฑุบุฉ.  ุณูุชู ุฅุนุงุฏุฉ ุชุนุฑูููุง ูุงุญููุง.  ุณูุชู ุงุณุชุฏุนุงุก ูุฐู ุงูุทุฑู ุนูุฏ ุฅุถุงูุฉ ููุงู ุฅูู <code>mManagedEntities</code> ุฃู ุญุฐูู. <br><br>  ุณุชููู ุงูุทุฑู ุงูุชุงููุฉ ุฎุงุตุฉ ููููู ุงููุตูู ุฅูููุง ููุท ูู <code>EntityManager</code> ุ ูุงูุชู ุชู ุฅุนูุงููุง <code>EntityManager</code> . <br><br>  ุณูุชู ุงุณุชุฏุนุงุก <code>setUp</code> ุจูุงุณุทุฉ ูุฏูุฑ ุงูููุงู ูุชุนููู ูุนุฑู ูููุธุงู.  ุซู ูููู ุงุณุชุฎุฏุงูู ูููุฑุณุฉ ุงููุตูููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> type)</span></span></span><span class="hljs-function"> </span></span>{ mType = type; }</code> </pre> <br>  ูุชู ุงุณุชุฏุนุงุก <code>onEntityUpdated</code> ุนูุฏูุง ูุชุบูุฑ ุงูููุงู ุ ุฃู  ุนูุฏ ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ูููู.  ูุชุญูู ุงููุธุงู ูู ุชูุจูุฉ ุงููุชุทูุจุงุช ููุง ุฅุฐุง ูุงู ุงูููุงู ูุฏ ุชูุช ูุนุงูุฌุชู ุจุงููุนู.  ุฅุฐุง ูุงู ููู ุจุงููุชุทูุจุงุช ููู ุชุชู ูุนุงูุฌุชู ุจุนุฏ ุ ูุณูุถููู ุงููุธุงู.  ููุน ุฐูู ุ ุฅุฐุง ูู ูุณุชูู ุงูููุงู ุงููุชุทูุจุงุช ูุชูุช ูุนุงูุฌุชู ุจุงููุนู ุ ูุณูุญุฐูู ุงููุธุงู.  ูู ุฌููุน ุงูุญุงูุงุช ุงูุฃุฎุฑู ุ ูุง ูููู ุงููุธุงู ุจุฃู ุดูุก: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEntityUpdated</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">bitset</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;ComponentCount&gt;&amp; components)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> satisfied = (mRequirements &amp; components) == mRequirements; <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> managed = mEntityToManagedEntity.find(entity) != <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::end(mEntityToManagedEntity); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (satisfied &amp;&amp; !managed) addEntity(entity); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!satisfied &amp;&amp; managed) removeEntity(entity); }</code> </pre> <br>  ูุชู ุงุณุชุฏุนุงุก <code>onEntityRemoved</code> ุจูุงุณุทุฉ ูุฏูุฑ ุงูููุงู ุนูุฏ ุญุฐู ุงูููุงู.  ุฅุฐุง ุชูุช ูุนุงูุฌุฉ ุงูููุงู ุจูุงุณุทุฉ ุงููุธุงู ุ ูุณูุญุฐูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onEntityRemoved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mEntityToManagedEntity.find(entity) != <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::end(mEntityToManagedEntity)) removeEntity(entity); }</code> </pre> <br>  <code>addEntity</code> ู <code>removeEntity</code> ููุง ููุท ุทุฑู ูุณุงุนุฏ. <br><br>  <code>addEntity</code> ุจุชุนููู ุงูุฑุงุจุท ููุงูุชูุงู ูู ุงูููุงู ุงูููุถุงู ุจูุงุณุทุฉ ููุฑุณู ูู <code>mManagedEntities</code> ุ ููุถูู ุงูููุงู ููุณุชุฏุนู <code>onManagedEntityAdded</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>{ mEntityToManagedEntity[entity] = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;Index&gt;(mManagedEntities.size()); mManagedEntities.emplace_back(entity); onManagedEntityAdded(entity); }</code> </pre> <br>  <code>removeEntity</code> ุฃููุงู ูุณุชุฏุนู <code>onManagedEntityRemoved</code> .  ุซู ูููู ุขุฎุฑ ููุงู ูุนุงูุฌ ูู ููุฑุณ ุงูููุงู ุงูุฐู ูุชู ุญุฐูู.  ูููู ุจุชุญุฏูุซ ุงููุฑุฌุน ุฅูู ุงูููุงู ุงูููููู.  ูู ุงูููุงูุฉ ุ ูุญุฐู ุงูููุงู ุงููุฑุงุฏ ุญุฐูู ูู <code>mManagedEntities</code> ู <code>mEntityToManagedEntity</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>{ onManagedEntityRemoved(entity); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> index = mEntityToManagedEntity[entity]; mEntityToManagedEntity[mManagedEntities.back()] = index; mEntityToManagedEntity.erase(entity); mManagedEntities[index] = mManagedEntities.back(); mManagedEntities.pop_back(); }</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  EntityManager </h2><br>  ูู ุงูููุทู ุงูููู ูู ูู ุงููุตูู ุงูุฃุฎุฑู.  ูุฏูุฑ ุงูููุงู ุจุจุณุงุทุฉ ูุฑุจุท ูู ุดูุก ูุนุง. <br><br>  ุฏุนูุง ูููู ูุธุฑุฉ ุนูู ุฅุนูุงูู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> ComponentCount, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> SystemCount&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">EntityManager</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Args&gt; <span class="hljs-function"><span class="hljs-function">T* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createSystem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Args&amp;&amp; ...args)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reserve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasComponents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-function">T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::tuple&lt;Ts&amp;...&gt; getComponents(Entity entity); <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::tuple&lt;<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Ts&amp;...&gt; getComponents(Entity entity) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOwner</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; component)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">array</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;BaseComponentContainer&gt;, ComponentCount&gt; mComponentContainers; EntityContainer&lt;ComponentCount, SystemCount&gt; mEntities; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;System&lt;ComponentCount, SystemCount&gt;&gt;&gt; mSystems; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkComponentType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkComponentTypes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getComponentContainer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getComponentContainer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; };</code> </pre> <br>  <code>EntityManager</code> ูุฆุฉ <code>EntityManager</code> ุนูู ุซูุงุซุฉ ูุชุบูุฑุงุช <code>mComponentContainers</code> : <code>mComponentContainers</code> ุ ุงูุฐู ูุฎุฒู <code>std::unique_ptr</code> ุฅูู <code>BaseComponentContainer</code> ุ <code>mEntities</code> ุ ุงูุชู ูู ูุฌุฑุฏ ูุซูู <code>mSystems</code> ุ ู <code>mSystems</code> ุ ุงูุชู ุชุฎุฒูู ูุคุดุฑุงุช <code>unique_ptr</code> ุฅูู <code>System</code> . <br><br>  ููุชูู ุงููุตู ุงูุนุฏูุฏ ูู ุงูุทุฑู ุ ููู ูู ุงูุญูููุฉ ูููุง ุจุณูุทุฉ ููุบุงูุฉ. <br><br>  ุฏุนูุง ุฃููุงู ูููู ูุธุฑุฉ ุนูู <code>getComponentContainer</code> ุ ูุงูุชู ุชูุฑุฌุน ูุคุดุฑูุง ุฅูู ุญุงููุฉ ูููู ุชุนุงูุฌ ููููุงุช ุงูููุน <code>T</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">auto</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getComponentContainer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;ComponentContainer&lt;T, ComponentCount, SystemCount&gt;*&gt;(mComponentContainers[T::type].get()); }</code> </pre> <br>  ูุธููุฉ ุงููุณุงุนุฏ ุงูุฃุฎุฑู ูู <code>checkComponentType</code> ุ ูุงูุฐู ูุชุญูู ุจุจุณุงุทุฉ ูู ุฃู ูุนุฑู ููุน ุงููููู ุฃูู ูู ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงูููููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkComponentType</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static_assert</span></span>(T::type &lt; ComponentCount); }</code> </pre> <br>  ูุณุชุฎุฏู <code>checkComponentTypes</code> ูุฅุฌุฑุงุก ุนุฏุฉ ุฃููุงุน ูู ุงูุงุฎุชุจุงุฑุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">checkComponentTypes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ (checkComponentType&lt;Ts&gt;(), ...); }</code> </pre> <br>  <code>registerComponent</code> ููุดุฆ ุญุงููุฉ ุฌุฏูุฏุฉ ูู ุงูููููุงุช ูู ุงูููุน ุงููุญุฏุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ checkComponentType&lt;T&gt;(); mComponentContainers[T::type] = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;ComponentContainer&lt;T, ComponentCount, SystemCount&gt;&gt;( mEntities.getEntityToBitset()); }</code> </pre> <br>  <code>createSystem</code> ููุดุฆ ูุธุงููุง ุฌุฏูุฏูุง ูู ุงูููุน ุงููุญุฏุฏ ููุญุฏุฏ ููุนู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Args&gt; <span class="hljs-function"><span class="hljs-function">T* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createSystem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Args&amp;&amp; ...args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> type = mSystems.size(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; system = mSystems.emplace_back(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;T&gt;(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Args&gt;(args)...)); system-&gt;setUp(type); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T*&gt;(system.get()); }</code> </pre> <br>  ูุณุชุฏุนู ุงูุฃุณููุจ <code>reserve</code> ุงูุฃุณุงููุจ <code>reserve</code> <code>EntityContainer</code> <code>ComponentContainer</code> ู <code>EntityContainer</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reserve</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> size)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> i = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>); i &lt; ComponentCount; ++i) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mComponentContainers[i]) mComponentContainers[i]-&gt;reserve(size); } mEntities.reserve(size); }</code> </pre> <br>  ุชููู ุทุฑููุฉ <code>createEntity</code> ุจุฅุฑุฌุงุน ูุชูุฌุฉ ุทุฑููุฉ <code>create</code> ูุฏูุฑ <code>EntityManager</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createEntity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mEntities.create(); }</code> </pre> <br>  ูุณุชุฎุฏู <code>hasComponent</code> ูุฌููุนุฉ ูู ูุญุฏุงุช ุจุช ุงูููุงูุงุช ููุชุญูู ุจุณุฑุนุฉ ูู ุฃู ูุฐุง ุงูููุงู ูุญุชูู ุนูู ูููู ูู ุงูููุน ุงููุญุฏุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ checkComponentType&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> mEntities.getBitset(entity)[T::type]; }</code> </pre> <br>  ูุณุชุฎุฏู <code>hasComponents</code> ุชุนุจูุฑ ุชุญููู ููููู ูุฅูุดุงุก ูุฌููุนุฉ ูู ุงูุจุชุงุช ุชุดูุฑ ุฅูู ุงูููููุงุช ุงููุทููุจุฉ ุ ุซู ูุณุชุฎุฏูู ูุน ูุฌููุนุฉ ูู ูุญุฏุงุช ุจุช ุงูููุงู ููุชุญูู ููุง ุฅุฐุง ูุงู ุงูููุงู ูุญุชูู ุนูู ุฌููุน ุงูููููุงุช ุงููุทููุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasComponents</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ checkComponentTypes&lt;Ts...&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> requirements = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">bitset</span></span>&lt;ComponentCount&gt;(); (requirements.<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(Ts::type), ...); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (requirements &amp; mEntities.getBitset(entity)) == requirements; }</code> </pre> <br>  ูุนูุฏ <code>getComponent</code> ุชูุฌูู ุงูุทูุจ ุฅูู ุญุงููุฉ ุงููููู ุงููุทููุจุฉ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-function">T&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity)</span></span></span><span class="hljs-function"> </span></span>{ checkComponentType&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getComponentContainer&lt;T&gt;()-&gt;get(entity); }</code> </pre> <br>  ุฅุฑุฌุงุน <code>getComponents</code> tuple ูู ุงูุงุฑุชุจุงุทุงุช ุฅูู ุงูููููุงุช ุงููุทููุจุฉ.  ููููุงู ุจุฐูู ุ ูุณุชุฎุฏู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><code>std::tie</code></a> ูุชุนุจูุฑ ุงูุฅูุชูุงุก: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> ...Ts&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::tuple&lt;Ts&amp;...&gt; getComponents(Entity entity) { checkComponentTypes&lt;Ts...&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::tie(getComponentContainer&lt;Ts&gt;()-&gt;get(entity)...); }</code> </pre> <br>  <code>addComponent</code> ู <code>removeComponent</code> ุฅุนุงุฏุฉ ุชูุฌูู ุงูุทูุจ ุฅูู ุญุงููุฉ ุงููููู ุงููุทููุจ ุ ููู ุซู ุงุณุชุฏุนุงุก <code>onEntityUpdated</code> ุงููุธุงู <code>onEntityUpdated</code> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addComponent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Entity entity, Args&amp;&amp;... args)</span></span></span><span class="hljs-function"> </span></span>{ checkComponentType&lt;T&gt;(); getComponentContainer&lt;T&gt;()-&gt;add(entity, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Args&gt;(args)...); <span class="hljs-comment"><span class="hljs-comment">// Send message to systems const auto&amp; bitset = mEntities.getBitset(entity); for (auto&amp; system : mSystems) system-&gt;onEntityUpdated(entity, bitset); } template&lt;typename T&gt; void removeComponent(Entity entity) { checkComponentType&lt;T&gt;(); getComponentContainer&lt;T&gt;()-&gt;remove(entity); // Send message to systems const auto&amp; bitset = mEntities.getBitset(entity); for (auto&amp; system : mSystems) system-&gt;onEntityUpdated(entity, bitset); }</span></span></code> </pre> <br>  ุฃุฎูุฑูุง ุ ูุนูุฏ <code>getOwner</code> ุชูุฌูู ุงูุทูุจ ุฅูู ูููู ุงูุญุงููุฉ ุงููุทููุจ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-function">Entity </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOwner</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> T&amp; component)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ checkComponentType&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getComponentContainer&lt;T&gt;()-&gt;getOwner(component); }</code> </pre> <br>  ูุงู ูุฐุง ุฃูู ุชุทุจูู ูู.  ูุชููู ูู 357 ุณุทุฑ ููุท ูู ุงูููุฏ.  ูู ุฑูุฒ ูููู ุงูุนุซูุฑ ุนูููุง ูู ูุฐุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูููุถูุน</a> . <br><br><h1 style=";text-align:right;direction:rtl">  ุงูุชูููุท ูุงููุนุงููุฑ </h1><br><h2 style=";text-align:right;direction:rtl">  ุงููุนุงููุฑ </h2><br>  ููุฏ ุญุงู ุงูููุช ูุชูููู ุฃูู ุชุทุจูู ECS! <br><br>  ูููุง ุงููุชุงุฆุฌ: <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/4c9/fc6/23e/4c9fc623e0787518bde7823317b0e6af.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/bb0/323/9a9/bb03239a90cccf5f95ab47ecf94e3a4d.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/679/e54/f0e/679e54f0e32260a9f62621838b51a15e.png"></div><br>  ุงููุงูุจ ุฌุฏุงูู ุฌูุฏุง ุจูุง ููู ุงูููุงูุฉ!  ูุชุดุงุจู ุนุฏุฏ ุงููุนุงูุฌุงุช ูู ุงูุซุงููุฉ ุชูุฑูุจูุง ุนูุฏ ุฒูุงุฏุฉ ุนุฏุฏ ุงูููุงูุงุช ูุชุบููุฑ ุงูุชูุตููุงุช (A ู AA ู AAA). <br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฅูู ูุชุทูุฑ ุจุดูู ุฌูุฏ ูุน ุฒูุงุฏุฉ ุนุฏุฏ ุงูููููุงุช ูู ุงูููุงูุงุช.  ุนูุฏูุง ูููู ุจุงูุชูุฑุงุฑ ูู ุฎูุงู ุงูููุงูุงุช ุงูุชู ุชุญุชูู ุนูู ุซูุงุซุฉ ููููุงุช ุ ุชุญุฏุซ ุจุดูู ุฃุจุทุฃ ุซูุงุซ ูุฑุงุช ูู ุงูุชูุฑุงุฑ ูู ุฎูุงู ุงูููุงูุงุช ุฐุงุช ุงููููู ุงููุงุญุฏ.  ูุฐุง ูุชููุน ูุฃููุง ุจุญุงุฌุฉ ุฅูู ุงูุญุตูู ุนูู ุซูุงุซุฉ ููููุงุช. <br><br><h2 style=";text-align:right;direction:rtl">  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ูุฎุทุฆ </h2><br>  ููุชุญูู ูู ุนุฏุฏ ุฃุฎุทุงุก ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุ ููุช ุจุชุดุบูู ูุซุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">cachegrind</a> ูุฃุฎูุฐ <a href="">ูู ููุง</a> . <br><br>  ูุฐู ูู ุงููุชูุฌุฉ ูู 10000 ููุงู: <br><br> <code>==1652== D refs: 277,577,353 (254,775,159 rd + 22,802,194 wr) <br> ==1652== D1 misses: 20,814,368 ( 20,759,914 rd + 54,454 wr) <br> ==1652== LLd misses: 43,483 ( 7,847 rd + 35,636 wr) <br> ==1652== D1 miss rate: 7.5% ( 8.1% + 0.2% ) <br> ==1652== LLd miss rate: 0.0% ( 0.0% + 0.2% )</code> <br> <br>  ูุฐู ูู ุงููุชูุฌุฉ ูู 100000 ููุงู: <br><br> <code>==1738== D refs: 2,762,879,670 (2,539,368,564 rd + 223,511,106 wr) <br> ==1738== D1 misses: 207,415,181 ( 206,902,072 rd + 513,109 wr) <br> ==1738== LLd misses: 207,274,328 ( 206,789,289 rd + 485,039 wr) <br> ==1738== D1 miss rate: 7.5% ( 8.1% + 0.2% ) <br> ==1738== LLd miss rate: 7.5% ( 8.1% + 0.2% )</code> <br> <br>  ุงููุชุงุฆุฌ ุฌูุฏุฉ ุฌุฏุง.  ุฅูู ุฃูุฑ ุบุฑูุจ ุจุนุถ ุงูุดูุก ุฃู ููุงู ุงููุซูุฑ ูู LLd ููุชูุฏ ุฅูู 100000 ููุงู. <br><br><h2 style=";text-align:right;direction:rtl">  ุฌุงูุจู </h2><br>  ูููู ุฃุฌุฒุงุก ุงูุชูููุฐ ุงูุญุงูู ุงูุชู ุชุณุชุบุฑู ููุชูุง ุฃุทูู ุ ููุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุชูุถูุญ</a> ุงููุซุงู ุจุงุณุชุฎุฏุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">gprof</a> . <br><br>  ูุฐู ูู ุงููุชูุฌุฉ: <br><br> <code>Flat profile: <br> <br> Each sample counts as 0.01 seconds. <br> % cumulative self self total <br> time seconds seconds calls ms/call ms/call name <br> 57.45 1.16 1.16 200300000 0.00 0.00 std::__detail::_Map_base&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt;, true&gt;::operator[](unsigned int const&amp;) <br> 19.31 1.55 0.39 main <br> 16.34 1.88 0.33 200500000 0.00 0.00 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::_M_find_before_node(unsigned long, unsigned int const&amp;, unsigned long) const <br> 3.96 1.96 0.08 300000 0.00 0.00 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::_M_insert_unique_node(unsigned long, unsigned long, std::__detail::_Hash_node&lt;std::pair&lt;unsigned int const, unsigned int&gt;, false&gt;*) <br> 2.48 2.01 0.05 300000 0.00 0.00 unsigned int&amp; std::vector&lt;unsigned int, std::allocator&lt;unsigned int&gt; &gt;::emplace_back&lt;unsigned int&amp;&gt;(unsigned int&amp;) <br> 0.50 2.02 0.01 3 3.33 3.33 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::~_Hashtable() <br> 0.00 2.02 0.00 200000 0.00 0.00 std::_Hashtable&lt;unsigned int, std::pair&lt;unsigned int const, unsigned int&gt;, std::allocator&lt;std::pair&lt;unsigned int const, unsigned int&gt; &gt;, std::__detail::_Select1st, std::equal_to&lt;unsigned int&gt;, std::hash&lt;unsigned int&gt;, std::__detail::_Mod_range_hashing, std::__detail::_Default_ranged_hash, std::__detail::_Prime_rehash_policy, std::__detail::_Hashtable_traits&lt;false, false, true&gt; &gt;::find(unsigned int const&amp;)</code> <br> <br>  ูุฏ ุชููู ุงููุชุงุฆุฌ ูุดููุฉ ููููุงู ูุฃููู ุฌูุนุช <code>-O1</code> gprof ุดูุฆูุง ุฐุง ูุนูู.  ูุจุฏู ุฃูู ุนูุฏ ุฒูุงุฏุฉ ูุณุชูู ุงูุชุญุณูู ุ ูุจุฏุฃ ุงููุชุฑุฌู ูู ุชุถููู ูู ุดูุก ุจููุฉ ููุง ูููู gprof ุดูุฆูุง ุชูุฑูุจูุง. <br><br>  ููููุง ูู gprof ุ ูุฅู ุนูู ุงูุฒุฌุงุฌุฉ ุงููุงุถุญ ูู ูุฐุง ุงูุชุทุจูู ูู <code>std::unordered_map</code> .  ุฅุฐุง ููุง ูุฑูุฏ ุชุญุณููู ุ ููุฌุจ ุฃู ูุญุงูู ุงูุชุฎูุต ููู. <br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ููุงุฑูุฉ ูุน </font></font><code>std::map</code> </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฃุตุจุญุช ูุถููููุง ุญูู ุงููุฑู ูู ุงูุฃุฏุงุก ุจูู </font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ู </font></font><code>std::map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุ ูุฐูู ุงุณุชุจุฏูุช ูู ุดูุก ูู ุงูููุฏ </font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจู </font></font><code>std::map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ูุฐุง ุงูุชุทุจูู ูุชุงุญ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุง ุ</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุง ุงููุชุงุฆุฌ ุงููุฑุฌุนูุฉ:</font></font><br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/611/50b/3da/61150b3da1ec1cf850a0ed5b761f03a1.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/136/3be/951/1363be95163a3dfb2ab968c1591c7c60.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/d08/b4b/7f1/d08b4b7f1b5b35531bdc32a614ccbb81.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููููุง ุฃู ูุฑู ุฃู ุงูุชูููุฐ ูุฐู ุงููุฑุฉ ูุง ูุชุทูุฑ ุจุดูู ุฌูุฏ ูุน ุฒูุงุฏุฉ ุนุฏุฏ ุงูููุงูุงุช. </font><font style="vertical-align: inherit;">ูุญุชู ูุน ูุฌูุฏ 1000 ููุงู ุ ูููู ุงูุชูุฑุงุฑ ุจุทูุฆูุง ูู ุงูุชูุฑุงุฑ ูุซู ุงูุฅุตุฏุงุฑ c </font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><h1 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฏ ุฃูุดุฃูุง ููุชุจุฉ ุจุณูุทุฉ ูููููุง ุนูููุฉ ุจุงููุนู ููุงูุจ ูุธุงู ุงูููุงู ุงููููู. </font><font style="vertical-align: inherit;">ูู ุงููุณุชูุจู ุ ุณูู ูุณุชุฎุฏููุง ูุฃุณุงุณ ููุชุญุณููุงุช ูุงูุชุญุณููุงุช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุฌุฒุก ุงูุชุงูู ุ ุณูุจูู ููููุฉ ุฒูุงุฏุฉ ุงูุฅูุชุงุฌูุฉ ุนู ุทุฑูู ุงุณุชุจุฏุงู </font></font><code>std::unordered_map</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุจู </font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุณูุจูู ููููุฉ ุชุฎุตูุต ุฃููุงุน ุงููุนุฑูุงุช ุชููุงุฆููุง ููููููุงุช.</font></font><br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุงุณุชุจุฏุงู std :: unordered_map ุจู std :: vector </font></font></h1><br>   , <code>std::unordered_map</code>     .   <code>std::unordered_map</code>    <code>mEntityToComponent</code>  <code>ComponentContainer</code>   <code>mEntityToManagedEntity</code>  <code>System</code>  <code>std::vector</code> . <br><br><h2 style=";text-align:right;direction:rtl">  </h2><br>    ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . <br><br>     ,  <code>vector</code>  <code>mEntityToComponent</code>  <code>mEntityToManagedEntity</code>       .     ,     <code>vector</code>  <code>EntityContainer</code> ,      id .     <code>vector</code>         . <br><br>       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h2><br>  ,     ,  : <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/38a/1df/4bd/38a1df4bd3c8110d3873588854ffc314.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/0f5/897/2ae/0f58972ae408b9726899597fbd774be1.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/22b/3f5/fcd/22b3f5fcd21c8285cc779f46ca3896a4.png"></div><br>  ,            <br> . <br><br>     ,    !     .         .   :      ,        . <br><br>   ,      . <br><br>    cachegrind  10 000 : <br><br> <code>==1374== D refs: 94,563,949 (72,082,880 rd + 22,481,069 wr) <br> ==1374== D1 misses: 4,813,780 ( 4,417,702 rd + 396,078 wr) <br> ==1374== LLd misses: 378,905 ( 9,626 rd + 369,279 wr) <br> ==1374== D1 miss rate: 5.1% ( 6.1% + 1.8% ) <br> ==1374== LLd miss rate: 0.4% ( 0.0% + 1.6% )</code> <br> <br>     100 000 : <br><br> <code>==1307== D refs: 938,405,796 (715,424,940 rd + 222,980,856 wr) <br> ==1307== D1 misses: 51,034,738 ( 44,045,090 rd + 6,989,648 wr) <br> ==1307== LLd misses: 5,866,508 ( 1,997,948 rd + 3,868,560 wr) <br> ==1307== D1 miss rate: 5.4% ( 6.2% + 3.1% ) <br> ==1307== LLd miss rate: 0.6% ( 0.3% + 1.7% )</code> <br> <br>  ,                 . <br><br><h1 style=";text-align:right;direction:rtl">   </h1><br>  ,    ,      . <br><br><h2 style=";text-align:right;direction:rtl">  </h2><br>        id    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . <br><br> ,       id   ,   CRTP     : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> type; }; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> generateComponentType() { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> counter = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> counter++; } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> Component&lt;T&gt;::type = generateComponentType();</code> </pre> <br>  ,  id      ,        . <br><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h2><br>        : <br><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/7bd/112/0da/7bd1120da37daac5e3ef48446776b6e7.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/234/f2f/937/234f2f9377a0f3ad8ea231f91e335ddf.png"></div><br><div style="text-align:center;;text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/101/4f2/ade/1014f2adebd6156bc48c9b6fe5670b43.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ููุฎูู ูุงูุญุฐู ุ ุจููุช ุงููุชุงุฆุฌ ููุง ูู ุชูุฑูุจุง. </font><font style="vertical-align: inherit;">ููุน ุฐูู ุ ููููู ุฃู ุชุฑู ุฃู ุงูุชูุฑุงุฑ ุฃุตุจุญ ุฃุจุทุฃ ููููุงู ุ ุญูุงูู 10 ูช. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูููู ุชูุณูุฑ ูุฐุง ุงูุชุจุงุทุค ูู ุฎูุงู ุญูููุฉ ุฃู ุงููุญูู ุงูุจุฑูุฌู ูุณุชุฎุฏู ููุนุฑูุฉ ูุนุฑูุงุช ุงููุชุงุจุฉ ูู ููุช ุงูุชุฑุฌูุฉ ุ ููุง ูุนูู ุฃูู ูููู ุชุญุณูู ุงูููุฏ ุจุดูู ุฃูุถู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชุนููู ุงููุฏูู ูุฃููุงุน ุงููุนุฑูู ุบูุฑ ูุฑูุญ ุฅูู ุญุฏ ูุง ููููู ุฃู ูุคุฏู ุฅูู ุญุฏูุซ ุฃุฎุทุงุก. </font><font style="vertical-align: inherit;">ูุจุงูุชุงูู ุ ุญุชู ูู ููููุง ุงูุฃุฏุงุก ููููุงู ุ ูุฅูู ูุง ูุฒุงู ุชุญุณูููุง ูู ูุงุจููุฉ ุงุณุชุฎุฏุงู ููุชุจุฉ ECS ุงูุฎุงุตุฉ ุจูุง.</font></font><br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุฃููุงุฑ ููุฒูุฏ ูู ุงูุชุญุณููุงุช </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุจู ุฃู ุฃุฎุชุชู ูุฐู ุงูููุงูุฉ ุ ุฃูุฏ ุฃู ุฃุดุงุฑููู ุฃููุงุฑูุง ูุชุญุณููุงุช ุฃุฎุฑู. </font><font style="vertical-align: inherit;">ูู ุฃูู ุจุชูููุฐูุง ุญุชู ุงูุขู ุ ููู ุฑุจูุง ุณุฃูุนููุง ูู ุงููุณุชูุจู.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุนุฏุฏ ุฏููุงูููู ูู ุงูููููุงุช ูุงูุฃูุธูุฉ </font></font></h2><br>            . ,    <code>std::array</code>  <code>EntityManager</code>  <code>std::vector</code>    . <br><br>  <code>std::bitset</code>       .        <code>std::vector&lt;bitset&lt;ComponentCount&gt;&gt;</code>  <code>EntityContainer</code>  <code>std::vector&lt;char&gt;</code>           .      <code>BitsetView</code> ,            ,        <code>std::bitset</code>    . <br><br>   :          <code>mEntityToComponent</code> ,     . <br><br><h2 style=";text-align:right;direction:rtl">     </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูู ุงูููุช ุงูุญุงูู ุ ุฅุฐุง ูุงู ุงููุธุงู ูุฑูุฏ ุงูุชูุฑุงุฑ ุงูุชูุฑุงุฑู ูููููุงุช ุงูููุงูุงุช ุงูุชู ูุนุงูุฌูุง ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุงูููุงู ุจุฐูู ุนูู ุงููุญู ุงูุชุงูู: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; entity : getManagedEntities()) { <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> [position, velocity] = mEntityManager.getComponents&lt;Position, Velocity&gt;(entity); ... }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุณูููู ุฃุฌูู ูุฃุจุณุท ุฅุฐุง ุงุณุชุทุนูุง ูุนู ุดูุก ูุซู ูุฐุง: </font></font><br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; [position, velocity] : mEntityManager.getComponents&lt;Position, Velocity&gt;(mManagedEntities)) { ... }</code> </pre> <br>        <code>std::view::transform</code>  C++20 <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> ranges</a> . <br><br>  ,   .     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> range</a>  ,     . <br><br>        <code>EntityRangeView</code> ,         ,   ,        <code>std::vector</code> .        <code>begin</code> , <code>end</code>   ,    .    ,     . <br><br><h2 style=";text-align:right;direction:rtl">    </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูู ุงูุชุทุจูู ุงูุญุงูู ุ ุนูุฏ ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ูููู ูู ููุงู ูุง ุ ูุฅููุง ูุฏุนู </font></font><code>onEntityUpdated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุฌููุน ุงูุฃูุธูุฉ. </font><font style="vertical-align: inherit;">ูุฐุง ุบูุฑ ูุนุงู ุฅูู ุญุฏ ูุง ูุฃู ุงูุนุฏูุฏ ูู ุงูุฃูุธูุฉ ููุณุช ููุชูุฉ ุจููุน ุงููููู ุงูุฐู ุชู ุชุบููุฑู ููุชู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชูููู ุงูุถุฑุฑ ุ ูููููุง ุชุฎุฒูู ุงููุคุดุฑุงุช ุนูู ุงูุฃูุธูุฉ ุงูููุชูุฉ ุจููุน ุงูููููุงุช ุงููุญุฏุฏ ูู ุจููุฉ ุงูุจูุงูุงุช ุ ุนูู ุณุจูู ุงููุซุงู </font></font><code>std::array&lt;std::vector&lt;System&lt;ComponentCount, SystemCount&gt;&gt;, ComponentCount&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">ุซู ุ ุนูุฏ ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ูููู ุ ูุฅููุง ุจุจุณุงุทุฉ ูุณูู ุทุฑููุฉ </font></font><code>onEntityUpdated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุฃูุธูุฉ ุงูููุชูุฉ ุจูุฐุง ุงููููู.</font></font><br><br><h2 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฌููุนุงุช ูุฑุนูุฉ ูู ุงูููุงูุงุช ุงูุชู ูุฏูุฑูุง ูุฏูุฑ ุงูููุงู ุจุฏูุงู ูู ุงูุฃูุธูุฉ </font></font></h2><br>            . <br><br>  ,    ,     .      ,         ,     ,   . <br><br>          .         . ,        : <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span>&amp; entity : mEntityManager.getEntitiesWith&lt;Position, Velocity&gt;()) { ... }</code> </pre> <br><h1 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุญุชู ุงูุขู ูุฐู ูู ููุงูุฉ ููุงู ุนู ุชูููุฐ ูุธุงู ุงูููุงู ุงููููู. </font><font style="vertical-align: inherit;">ุฅุฐุง ููุช ุจุฅุฌุฑุงุก ุชุญุณููุงุช ุฃุฎุฑู ุ ููุฏ ุฃูุชุจ ููุงูุงุช ุฌุฏูุฏุฉ ูู ุงููุณุชูุจู. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุงูุชูููุฐ ุงูููุตูู ูู ุงูููุงูุฉ ุจุณูุท ููุบุงูุฉ: ูุชููู ูู ุฃูู ูู 500 ุณุทุฑ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ููุฏูู ุฃุฏุงุก ุฌูุฏ ุฃูุถูุง. </font><font style="vertical-align: inherit;">ุชุชุญูู ุฌููุน ุงููุนุงููุงุช ูููุช ุซุงุจุช (ูุทูุฃ). </font><font style="vertical-align: inherit;">ุนูุงูุฉ ุนูู ุฐูู ุ ูู ุงูููุงุฑุณุฉ ุงูุนูููุฉ ุ ูุฅูู ูุณุชุฎุฏู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุนูู ุงููุญู ุงูุฃูุซู ููุณุชูุจู ุงูููุงูุงุช ูููุฑุฑูุง ุจุณุฑุนุฉ. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ุขูู ุฃู ูููู ูุฐุง ุงูููุงู ูุซูุฑูุง ุฃู ูููุฏูุง ูู.</font></font><br><br><h1 style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูุฑุงุกุฉ ุฅุถุงููุฉ </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ูููุง ููู ุจุนุถ ุงููุตุงุฏุฑ ุงููููุฏุฉ ูุฅุฌุฑุงุก ุฏุฑุงุณุฉ ุฃูุซุฑ ุชุนูููุง ูููุท ูุธุงู ุงูููุงู ุงููููู: </font></font><br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุชุจุช ููุดูู ูููู ุ ูุคููุฉ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ุ ุณูุณูุฉ ูุซูุฑุฉ ููุงูุชูุงู ููุบุงูุฉ ูู ุงูููุงูุงุช ุญูู ูุธุงู ูููู ุงูููุงู ุชุณูู </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ECS ุฐูุงุจูุง ูุฅูุงุจูุง</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li><li style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ูุญุชูู </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><font style="vertical-align: inherit;">Entity Systems Wiki</font></a><font style="vertical-align: inherit;"> ุนูู ูุนูููุงุช ูุฑูุงุจุท ูููุฏุฉ ููุบุงูุฉ.</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar459288/">https://habr.com/ru/post/ar459288/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar459274/index.html">ุนุฏู ุญุตุงูุฉ ููู ุงูุดุงุดุฉ ูู ุฅุตุฏุงุฑ Astra Linux ุงูุฎุงุต (Smolensk)</a></li>
<li><a href="../ar459276/index.html">ููุญูุฉ ุชูุดู ุงูููุงููุฉ 2 ุฃู ููุงุฐุง ูุฌุจ ุฃูุง ุชุชูุฑุท ูู ุงูุฎุตูุตูุฉ ูุน ุฅุถุงูุงุช FireFox</a></li>
<li><a href="../ar459280/index.html">ููุงุฐุง ุงููุทูุฑูู ูุญุจูู ุจูุงุก ุงูุชุทุจูู ุงูุฃุตููุ</a></li>
<li><a href="../ar459284/index.html">ููุฏูุฉ ููุฌุฒุฉ ุนู ุงุณุชุฑุงุชูุฌูุฉ ุงูููุชุฌ ูุงูููุฒุงุช ุงูุฃููููุฉ</a></li>
<li><a href="../ar459286/index.html">ุชูููุฑุงูุฏ ุงูุชูุบุณุชู ุดุจู ุงููุนุฏูู - ุงูุณููู ุงูุณููุณุฑู ูุชูููุฉ ุงููุงูู</a></li>
<li><a href="../ar459292/index.html">ุฃุชูุชุฉ ุงุฎุชุจุงุฑ ุงูุชุทุจููุงุช ุงููุชูููุฉ: ููุงุฑูุฉ ุงูุฃุฏูุงุช</a></li>
<li><a href="../ar459294/index.html">ูุง ูู ุฃูุซุฑ ุฃูููุฉ: ููุนุฑูุฉ ูุบุฉ ุงูุจุฑูุฌุฉ ุฃู ูุชููู ูุงุฏุฑุฉ ุนูู ุญู ูุดููุฉ ุงูุนููุ</a></li>
<li><a href="../ar459296/index.html">ุณุนุฑ ุฌุงูุง ุณูุฑูุจุช 2019</a></li>
<li><a href="../ar459298/index.html">ุงูุฒุงูู: ุงููุถุน ูู ุนุงู 2019</a></li>
<li><a href="../ar459300/index.html">Quasar 1.0: ุฃุฏุงุฉ ูููุฏุฉ ุฌุฏูุฏุฉ ููุทูุฑู Vue ูููุณ ููุท ููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>