<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙋🏻 👇🏼 👨🏿‍🤝‍👨🏻 Mini-interview avec Oleg Anastasiev: tolérance aux fautes dans Apache Cassandra 🌗 👨🏽‍🤝‍👨🏻 😤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Les camarades de classe sont le plus grand utilisateur d'Apache Cassandra dans RuNet et l'un des plus grands au monde. Nous avons commencé à utiliser ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mini-interview avec Oleg Anastasiev: tolérance aux fautes dans Apache Cassandra</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/odnoklassniki/blog/465475/"><img src="https://habrastorage.org/webt/ji/xk/p2/jixkp2_utydos4vvqmk9qloyqcs.jpeg"><br><br>  Les camarades de classe sont le plus grand utilisateur d'Apache Cassandra dans RuNet et l'un des plus grands au monde.  Nous avons commencé à utiliser Cassandra en 2010 pour stocker des estimations de photos, et maintenant Cassandra gère des pétaoctets de données sur des milliers de nœuds, de plus, nous avons même développé notre propre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">base de données transactionnelle NewSQL</a> . <br>  Le 12 septembre, dans notre bureau de Saint-Pétersbourg, nous tiendrons la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deuxième réunion consacrée à Apache Cassandra</a> .  Le principal orateur de l'événement sera l'ingénieur en chef Odnoklassnikov Oleg Anastasiev.  Oleg est un expert dans le domaine des systèmes distribués et tolérants aux pannes, il travaille avec Cassandra depuis plus de 10 ans et a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">parlé à</a> plusieurs reprises <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des caractéristiques de ce produit lors de conférences</a> . <br><br>  La veille de la réunion, nous avons discuté avec Oleg de la tolérance aux pannes des systèmes distribués avec Cassandra, demandé de quoi il parlerait lors de la réunion et pourquoi cela valait la peine d'assister à cet événement. <br><a name="habracut"></a><br>  Oleg a commencé sa carrière comme programmeur en 1995.  Développement de logiciels dans le secteur bancaire, télécom, transport.  Il travaille en tant que développeur principal chez Odnoklassniki depuis 2007 au sein de l'équipe de la plateforme.  Ses responsabilités incluent le développement d'architectures et de solutions pour les systèmes à forte charge, les grands entrepôts de données, la résolution des problèmes de productivité et de fiabilité du portail.  Il est également engagé dans la formation de développeurs au sein de l'entreprise. <br><br>  <b>- Oleg, bonjour!</b>  <b>La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">première réunion</a> consacrée à Apache Cassandra a eu lieu en mai, les participants disent que les discussions se sont poursuivies jusque tard dans la nuit, dites-moi, quelles sont vos impressions sur la première réunion?</b> <br><br>  Des développeurs d'horizons différents de diverses sociétés sont venus avec leur douleur, des solutions inattendues aux problèmes et des histoires incroyables.  Nous avons pu mener la majeure partie de la réunion sous la forme de la discussion, mais il y a eu tellement de discussions que nous n'avons pu aborder qu'un tiers des sujets qui ont été décrits.  Nous avons prêté beaucoup d'attention à la façon et à ce que nous surveillons en utilisant nos services de production réels à titre d'exemple. <br><br>  J'étais intéressé et j'ai vraiment apprécié. <br><br>  <b>- A en juger par l'annonce, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">deuxième mitap</a> sera entièrement consacré à la tolérance aux pannes, pourquoi avoir choisi ce sujet?</b> <br><br>  Cassandra est un système distribué chargé typique avec une énorme quantité de fonctionnalités en plus de servir directement les demandes des utilisateurs: potins, détection de panne, distribution des modifications de schéma, extension / réduction du cluster, anti-entropie, sauvegardes et récupération, etc.  Comme dans tout système distribué, avec une augmentation de la quantité de fer, la probabilité de pannes augmente, donc le fonctionnement de la production des clusters Cassandra nécessite une connaissance approfondie de son appareil pour prédire le comportement en cas de pannes et d'actions de l'opérateur.  Dans le processus d'utilisation de Cassandra depuis de nombreuses années, nous <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avons accumulé une expertise considérable</a> , que nous sommes prêts à partager, et voulons également discuter de la façon dont nos collègues résolvent des problèmes typiques. <br><br>  <b>- En ce qui concerne Cassandra, qu'entendez-vous par tolérance aux fautes?</b> <br><br>  Tout d'abord, bien sûr, la capacité du système à survivre aux défaillances matérielles typiques: perte de machines, de disques ou de connectivité réseau avec les nœuds / centres de données.  Mais le sujet lui-même est beaucoup plus large et, en particulier, comprend la récupération après des pannes, y compris des pannes, pour lesquelles les gens sont rarement préparés, par exemple, les erreurs de l'opérateur. <br><br>  <b>- Pouvez-vous donner un exemple du cluster de données le plus chargé et le plus grand?</b> <br><br>  L'un de nos plus grands clusters est le cluster des cadeaux: plus de 200 nœuds et des centaines de To de données.  Mais ce n'est pas le plus chargé, car il est couvert par un cache distribué.  Nos clusters les plus occupés contiennent des dizaines de milliers de RPS pour l'écriture et des milliers de RPS pour la lecture. <br><br>  <b>- Ouah!</b>  <b>À quelle fréquence quelque chose se casse-t-il?</b> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Oui, constamment</a> !  Au total, nous avons plus de 6 000 serveurs, et chaque semaine, quelques serveurs et plusieurs dizaines de disques sont remplacés (sans prendre en compte les processus de mise à niveau parallèles et l'expansion de la flotte de véhicules).  Pour chaque type de panne, une instruction claire est écrite sur quoi et dans quel ordre faire, tout est automatisé si possible, donc les pannes sont une routine et dans 99% des cas elles surviennent inaperçues par les utilisateurs. <br><br>  <b>- Que luttez-vous avec de tels échecs?</b> <br><br>  Dès le début de l'exploitation de Cassandra et les premiers incidents, nous avons élaboré des mécanismes de sauvegarde et de récupération à partir de ceux-ci, construit des procédures de déploiement qui prennent en compte l'état des clusters Cassandra et, par exemple, empêchent les nœuds de redémarrer si une perte de données est possible.  Nous prévoyons de parler de tout cela lors de la réunion. <br><br>  <b>- Comme vous l'avez dit, il n'existe pas de systèmes absolument fiables.</b>  <b>À quels types d'échecs vous préparez-vous et pouvez-vous survivre?</b> <br><br>  Si nous parlons de nos installations de clusters Cassandra, les utilisateurs ne remarqueront rien si nous perdons plusieurs machines dans un DC ou un DC entier (cela s'est produit).  Avec l'augmentation du nombre de DC, nous envisageons de commencer à assurer l'opérabilité en cas de panne de deux DC. <br><br>  <b>- Que pensez-vous que Cassandra manque en termes de tolérance aux pannes?</b> <br><br>  Cassandra, comme de nombreux autres anciens référentiels NoSQL, nécessite une compréhension approfondie de sa structure interne et des processus dynamiques en cours.  Je dirais qu'elle manque de simplicité, de prévisibilité et d'observabilité.  Mais il sera intéressant d'entendre l'avis des autres participants à la réunion! <br><br>  Oleg, merci beaucoup d'avoir pris le temps de répondre aux questions! <br><br>  Nous attendons tous ceux qui souhaitent discuter avec des experts dans le domaine de l'exploitation d'Apache Cassandra lors d'une réunion le 12 septembre à leur bureau de Saint-Pétersbourg. <br><br>  Venez, ce sera intéressant! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Inscrivez-vous à l'événement.</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr465475/">https://habr.com/ru/post/fr465475/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr465459/index.html">Une brève histoire de la visioconférence: du début à une utilisation commerciale complète</a></li>
<li><a href="../fr465461/index.html">Saisie statique dans une application React</a></li>
<li><a href="../fr465463/index.html">Le bien n'est jamais bon marché. Mais c'est gratuit</a></li>
<li><a href="../fr465467/index.html">Toute la vérité sur RTOS. Article # 32. Migration de Nucleus SE: fonctionnalités et compatibilité non réalisées</a></li>
<li><a href="../fr465471/index.html">Avez-vous essayé d'enregistrer votre site en tant que publication réseau à Roskomnadzor?</a></li>
<li><a href="../fr465477/index.html">Comment j'ai appris à un serpent à se jouer avec Q-Network</a></li>
<li><a href="../fr465479/index.html">Pixel Lo-fi dans Unity</a></li>
<li><a href="../fr465483/index.html">Antiquités: Windows 3.1 et la vie sans bouton de démarrage</a></li>
<li><a href="../fr465485/index.html">Imprimez la tapisserie Game of Thrones sur une imprimante fiscale à l'aide de Python</a></li>
<li><a href="../fr465487/index.html">Créez une plateforme kubernetes sur Pinterest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>