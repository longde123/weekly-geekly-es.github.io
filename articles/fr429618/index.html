<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüëß üë∞üèø üòÅ Jeu √©lectronique XO üé§ üìã ‚õπüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salutations, Habr! 



 Comme vous l'avez peut-√™tre devin√© sur la photo, nous ne parlons pas aujourd'hui de la classification du cognac. Je vais faire...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Jeu √©lectronique XO</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429618/"> Salutations, Habr! <br><br><img src="https://habrastorage.org/webt/je/io/pw/jeiopwm4fks7fxsapgubgf-ztjk.jpeg"><br><br>  Comme vous l'avez peut-√™tre devin√© sur la photo, nous ne parlons pas aujourd'hui de la classification du cognac.  Je vais faire le jeu tic-tac-toe ... Peu importe - je demande une coupe -&gt; <br><a name="habracut"></a><br>  L'id√©e, comme toujours, est n√©e spontan√©ment.  Un soir d'automne tranquille, j'ai dessin√© neuf cellules sur une feuille et invit√© ma fille √† jouer un nouveau jeu pour elle.  Ayant jou√© plusieurs fois, j'ai vu qu'il y avait un v√©ritable int√©r√™t ... et ensuite Ostap a souffert. <br><br>  Il semblerait qu'il soit plus facile de continuer √† dessiner des cellules sur une feuille de papier ou √† t√©l√©charger le programme sur votre t√©l√©phone, mais est-ce int√©ressant?  Non! <br><br>  Ce que je voulais obtenir: <br><br><ol><li>  Appareil compact sur la batterie (toutes sortes d'√©crans capacitifs tachi et MIPI disparaissent imm√©diatement). </li><li>  En cons√©quence, charge depuis USB (de pr√©f√©rence avec une indication). </li><li>  Co√ªts de temps minimum pour la carte et le logiciel (enfin, comme d'habitude, en g√©n√©ral). </li><li>  Boutons tactiles. </li><li>  Appareil intelligent avec la possibilit√© de jouer avec le contr√¥leur (sans deuxi√®me joueur).  Passer √† un et deux joueurs. </li><li>  Allumez / √©teignez avec un bouton et de pr√©f√©rence sans toucher, de sorte que la mise en marche accidentelle ne se produise pas. </li><li>  Imprimez le bo√Ætier sur une imprimante 3D + verre d√©poli pour fermer les LED. </li></ol><br>  Tout d'abord. <br><br>  1. Il a donc √©t√© d√©cid√© de prendre le contr√¥leur STM32F100.  Sur celui-ci, je peux pleinement impl√©menter la logique simple du jeu pour commencer.  Sur le cas avec 48 jambes, tous les GPIO √©taient occup√©s (sans l'utilisation de multiplexeurs et d'extensions).  Pour chaque croix et z√©ro, 8 LED sont utilis√©es (connect√©es en parall√®le), qui sont commut√©es par des agents de terrain (IRLML6401). <br><br>  L'appareil se compose de deux cartes, l'une avec des LED et des boutons tactiles, la seconde avec un contr√¥leur, une charge, une batterie, etc.  Ils sont connect√©s par des connecteurs par incr√©ments de 2 mm, entre les cartes il y a une batterie 1250mA. <br><br><img src="https://habrastorage.org/webt/ae/xt/vf/aextvfq0avfhs5vm4hbqsaowk0c.png"><br>  <i>Fig.</i>  <i>1. Carte contr√¥leur</i> <br><br><img src="https://habrastorage.org/webt/ok/h8/j3/okh8j3lxhyrjpw3wgbv0fpqesmu.png"><br>  <i>Fig.</i>  <i>2. Carte LED</i> <br><br>  Quelques jours plus tard, les planches sont finalement sorties de la production.  J'avais le sentiment que le jeu se r√©v√©lerait inconfortable en raison de la taille ou des boutons tactiles.  Pour l'avenir, je dirai que jouer est tr√®s cool!  Les boutons fonctionnent bien √† travers le plexiglas 1,5-2 mm. <br><br><img src="https://habrastorage.org/webt/re/4j/j9/re4jj9ioicxxzbivdcb8b64ttnu.jpeg"><br>  <i>Fig.</i>  <i>3. C√¥t√© sup√©rieur de la carte contr√¥leur et voyants</i> <br><br><img src="https://habrastorage.org/webt/u5/sh/yc/u5shyc4vlzkiuyocttu9dertm-8.jpeg"><br>  <i>Fig.</i>  <i>4. C√¥t√© INF√âRIEUR de la carte contr√¥leur et des voyants</i> <br><br>  2. Le sch√©ma de charge est le plus simple que j'introduise dans des appareils similaires. <br><br><img src="https://habrastorage.org/webt/kr/wn/-6/krwn-6lafgn-9uowoy0_baufraq.png"><br>  <i>Fig.</i>  <i>5. Le circuit du contr√¥leur de charge.</i> <br><br>  3. Tout irait bien, mais il y avait plus de composants que ce √† quoi je m'attendais, et j'ai √©t√© tourment√© √† souder.  C'est ce qui s'est pass√© apr√®s la soudure. <br><br><img src="https://habrastorage.org/webt/uo/v8/fh/uov8fhx4pq0vewcfa-1j-hh5oz8.jpeg"><br>  <i>Fig.</i>  <i>6. Carte contr√¥leur avec composants</i> <br><br><img src="https://habrastorage.org/webt/k0/xa/tc/k0xatckm5621w5u-ciarlwbsrow.jpeg"><br>  <i>Fig.</i>  <i>7. Carte LED avec composants</i> <br><br><img src="https://habrastorage.org/webt/gz/1f/f9/gz1ff9r5d1hoojav0rpc5sza9qa.jpeg"><br>  <i>Fig.</i>  <i>8. Carte LED avec composants sur le c√¥t√© des boutons tactiles.</i> <br><br>  La premi√®re et jusqu'√† pr√©sent la seule version du logiciel que j'ai cr√©√©e sur ifs et dans une boucle sans fin.  Simple et fonctionne sans bugs.  Lors de la victoire, le champ entier s'√©teint et la combinaison gagnante clignote deux fois. <br><br>  4. J'ai d√©cid√© d'impl√©menter les boutons tactiles sur les microcircuits TTP223, je les ai d√©j√† utilis√©s dans l'un de mes projets.  Ils ne sont pas exigeants pour le c√¢blage et pour la pr√©sence / absence d'un polygone sous le capteur. <br><br><img src="https://habrastorage.org/webt/df/h9/vi/dfh9vipxo2taymxk4qcrn17f4so.png"><br>  <i>Fig.</i>  <i>9. Le sch√©ma d'inclusion des boutons tactiles.</i> <br><br>  J'en avais plus de 9 pi√®ces et j'ai donc d√©cid√© de ne pas utiliser le multiplexeur et d'accrocher chaque bouton sur mon contr√¥leur GPIO. <br><br>  5. Ensuite, je pr√©vois d'int√©grer l'algorithme de jeu avec le contr√¥leur (j'ai d√©j√† trouv√© plusieurs options d√©centes).  Il est pr√©vu de passer jusqu'√† pr√©sent en maintenant le bouton tactile central avant de l'allumer (mais ce n'est pas encore d√©finitif). <br><br>  6. J'ai longuement r√©fl√©chi √† la mani√®re d'allumer / √©teindre simplement avec un bouton de mani√®re simple.  L'option la plus rapide et la plus correcte, √† mon avis, concerne les transistors et l'utilisation de deux contr√¥leurs GPIO, que je n'ai pas.  Par cons√©quent, j'ai mis la puce CD4013BM.  L'allumage se fait en appuyant pendant environ 1 s, en s'√©teignant en appuyant rapidement.  Cela fonctionne tr√®s bien. <br><br><img src="https://habrastorage.org/webt/vo/zi/kt/voziktpmuanjzz8w55jiqnbp9qi.png"><br>  <i>Fig.</i>  <i>10. Sch√©ma de c√¢blage CD4013BM.</i> <br><br>  La broche "OUT_KEY" va au pied de la mise sous tension (EN) du DC / DC AP3418 (il fait du 3V3).  Ainsi, la consommation est minime. <br><br><img src="https://habrastorage.org/webt/6i/mh/mx/6imhmxwcoertybd_670cvwxovgm.jpeg"><br>  <i>Fig.</i>  <i>11. Carte avec microcontr√¥leur et batterie.</i> <br><br>  7. L'affaire est toujours au stade de la conception.  Une petite bo√Æte soign√©e avec un plexiglas mat de 1,5 mm sur le dessus est pr√©vue. <br><br>  Quand j'ai mis quelques feuilles de papier par-dessus pour voir comment la translucidit√© se passe, j'ai r√©alis√© que c'√©tait un fiasco.  Non, cela se voit bien, mais la r√®gle du champ n'est pas visible.  Par cons√©quent, dans la ¬´Fig.  2. "  4 LED suppl√©mentaires sont install√©es dans les coins du carr√© central (elles ne sont pas sur mon circuit imprim√© soud√©).  Si tout fonctionne comme il me semble, alors si vous faites du fraisage √† l'arri√®re sur du plexiglas, ces 4 LED bleues donneront 4 faisceaux minces qui forment le marquage du champ, qui s'allumeront lorsque l'appareil sera allum√©.  Si les rayons ne fonctionnent pas, dans tous les cas, le fraisage sera visible. <br><br>  Il y a un haut-parleur sur la carte, mais avec le g√©n√©rateur int√©gr√©, il ne tient pas en hauteur, et sans le g√©n√©rateur, je ne le fais pas.  Je pense que le vibromoteur du t√©l√©phone tombera √† cet endroit et il y aura une r√©ponse vibro lorsqu'il sera press√© et gagn√©. <br><br>  En cons√©quence, je peux dire que le jouet s'est av√©r√© tr√®s int√©ressant.  La photo ne transmet pas tout l'effet, mais les croix et les z√©ros sont superbes, sans aucun reflet.  Jouer est un plaisir!  Les boutons fonctionnent parfaitement et la taille du champ est tr√®s pratique.  Lorsque l'affaire sera pr√™te, je posterai certainement une photo. <br><br><img src="https://habrastorage.org/webt/uz/bv/xt/uzbvxthrps4myk2ghrfi5xwnkpu.jpeg"><br><br>  A tr√®s bient√¥t! <br><br>  UPD: <br>  Prix ‚Äã‚Äãajout√©s lors de l'achat de composants pour 1 appareil, j'ai peut-√™tre oubli√© quelque chose.  Les conseils et l'assembl√©e ne comptaient pas.  Quelque chose peut √™tre √©chang√© contre un moins cher. <br><br>  1. STM32F100C4T6B - 1 pi√®ce - 130 rub. <br>  2. CD4013BM - 1pc - 16r. <br>  3. LTC4054 - 1pc - 5p. <br>  4. AP3418KTR - 1 pi√®ce - 30 rub. <br>  5. IRLML6401TRPBF (Si2307DS) - 18 pi√®ces - 11r. <br>  6. LP503759 - 1 pi√®ce - 300 rub. <br>  7. C191KRCT / C191KGCT - 148pcs - 436 roubles. <br>  8. TTP223 - 8 pi√®ces - 40r. <br>  9. Bouton, connecteur, passif - un tas - 100 roubles. <br>  10. Droits <br>  11. Assembl√©e <br><br>  Total: 1068 rub. <br><br>  UPD: <br>  Lien vid√©o <br><iframe width="560" height="315" src="https://www.youtube.com/embed/yTMTCbUEIdI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr429618/">https://habr.com/ru/post/fr429618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr429604/index.html">Courte critique du PC portable Lenovo S730-13 (2018): mat√©riel puissant dans un √©l√©gant bo√Ætier en aluminium</a></li>
<li><a href="../fr429606/index.html">La putain de douzaine de PM: une liste de livres pour les chefs de projet</a></li>
<li><a href="../fr429610/index.html">L'histoire de la fa√ßon d'ex√©cuter l'√©mulateur Android ou d'√©conomiser sur le processeur Intel</a></li>
<li><a href="../fr429612/index.html">Les Fulsteks sont des MIDL √©ternels. Ne suivez pas ce chemin si vous ne voulez pas souffrir</a></li>
<li><a href="../fr429616/index.html">Espace de travail num√©rique, partie 1: Citrix</a></li>
<li><a href="../fr429620/index.html">Comment j'ai cr√©√© des cartes des continents pour mon jeu</a></li>
<li><a href="../fr429622/index.html">Les robots ont remplac√© Amazon avec 20 000 employ√©s</a></li>
<li><a href="../fr429624/index.html">Comment la NASA utilisera des robots pour cr√©er du carburant de fus√©e √† partir du sol martien</a></li>
<li><a href="../fr429626/index.html">Les crackers du g√©nome ont montr√© qu'aucun ADN ne sera plus anonyme</a></li>
<li><a href="../fr429628/index.html">Comment cr√©er un bot de chat pour VKontakte en utilisant Python, Django et webhook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>