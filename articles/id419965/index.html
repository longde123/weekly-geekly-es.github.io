<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍍 📬 🛀🏼 Fitur Konfigurasi Sakelar ExtremeXOS 🧝🏻 📻 🆙</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Artikel ini bertujuan untuk mengurangi jumlah waktu yang dibutuhkan untuk memahami prinsip-prinsip bekerja dengan ExtremeXOS (XOS) . Ketika saya mulai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fitur Konfigurasi Sakelar ExtremeXOS</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419965/"><p>  Artikel ini bertujuan untuk mengurangi jumlah waktu yang dibutuhkan untuk memahami prinsip-prinsip bekerja dengan <strong>ExtremeXOS (XOS)</strong> .  Ketika saya mulai berkenalan dengan XOS, saya benar-benar tidak memiliki artikel tentang Habré. </p><br><p>  Di bawah ini saya akan berbicara tentang konfigurasi Extremes dan masalah yang saya temui.  Saya harap ini membantu insinyur jaringan yang baru mulai bekerja dengan XOS.  Terlepas dari model sakelar, sintaksis CLI persis sama. <br><br></p><br><p><img src="https://habrastorage.org/webt/jy/kh/yn/jykhynsiykae3nk7qvyy-3chk-w.jpeg" alt="KDPV"><br>  <em>Extreme Switch Stand</em> </p><a name="habracut"></a><br><h2>  Untuk bisnis </h2><br><p>  Untuk virtualisasi perangkat keras, saya menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Eve-Ng</a> dan gambar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Virtual ExtremeOS ( <u>XOS</u> )</a> .  Anda juga dapat menggunakan GNS3. </p><br><p> Seperti apa konfigurasi switch <abbr title="OS ekstrem">?</abbr> Dalam <abbr title="OS ekstrem">XOS</abbr> tidak perlu beralih mode operasi, semua perintah dimasukkan dari mode normal, ditandai dengan <strong>#</strong> dalam kasus akun admin;  dan <strong>&gt;</strong> dalam hal pengguna. <br>  Untuk mulai dengan, saya ingin menguraikan prinsip-prinsip "dasar" tim di EOS.  Semuanya dibangun di atas tiga perintah dan antonimnya: <strong>buat</strong> , <strong>konfigurasi</strong> , <strong>aktifkan</strong> ( <strong>hapus</strong> , <strong>hapus</strong> <strong>konfigurasi</strong> , <strong>nonaktifkan,</strong> masing-masing).  Yaitu: kita membuat, mengkonfigurasi, mengaktifkan.  Itu terlihat logis. </p><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">create</span></span> vlan <span class="hljs-number"><span class="hljs-number">10</span></span> configure vlan <span class="hljs-number"><span class="hljs-number">10</span></span> ipaddress <span class="hljs-number"><span class="hljs-number">192.168.1.1</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span></code> </pre> <br><p>  Juga harus dipahami bahwa sebagian besar konfigurasi dikonfigurasikan pada <strong>VLAN</strong> .  Artinya, di XOS, hampir semuanya terkait dengan VLAN.  Bahkan penugasan VLAN ke port terjadi dalam konfigurasi VLAN, yaitu port digantung di vlan. <br>  Saya ingin memberikan perhatian khusus pada router virtual ( <em>VR</em> ), yang secara default di saklar.  Ada VR-Default, yang memiliki semua port, dan VR-mgmt, yang memiliki mgmt.  pelabuhan  Di XOS, untuk semua perintah yang mengirim lalu lintas di suatu tempat (ping, ssh, telnet, unduh, dll.), Anda harus menentukan VR. </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">ping</span></span> vr <span class="hljs-string"><span class="hljs-string">"VR-Default"</span></span> <span class="hljs-number"><span class="hljs-number">192.168.1.1</span></span></code> </pre> <br><h2>  XOS Beralih Pembaruan </h2><br><p>  XOS memiliki dua partisi di bawah OS: primer dan sekunder.  Secara fungsional, mereka tidak berbeda dalam apa pun, hanya dalam nama.  Anda dapat menginstal pembaruan hanya di bagian yang saat ini tidak aktif.  Anda dapat menggunakan argumen tidak aktif untuk ini.  Setelah pembaruan, diperlukan boot ulang dan sakelar boot dari partisi lain (yang baru saja diperbarui).  Ini memungkinkan untuk dengan cepat memutar kembali, jika ada masalah, hanya dengan memilih partisi yang berbeda saat boot (yang mana OS lama ditinggalkan).  Saya juga mencatat bahwa semua gambar dengan tambalan mewakili gambar penuh, yaitu, Anda tidak perlu meletakkan versi utama, dan kemudian beberapa yang kecil.  Saat mengunduh, tftp digunakan: </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">download</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">image</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">summitX-21</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4-patch1-3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.xos</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vr</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">VR-Default</span></span>" <span class="hljs-selector-tag"><span class="hljs-selector-tag">inactive</span></span></code> </pre> <br><p>  Untuk mengetahui bagian mana yang sedang digunakan, gunakan: </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">show</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">system</span></span> … <span class="hljs-selector-tag"><span class="hljs-selector-tag">Image</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Selected</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">primary</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Image</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Booted</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">secondary</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Primary</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ver</span></span>: 22<span class="hljs-selector-class"><span class="hljs-selector-class">.3</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Secondary</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ver</span></span>: 21<span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.4</span></span></code> </pre> <br><h2>  Beralih susun </h2><br><p>  Untuk menumpuk sakelar XOS, Anda harus mengaktifkan dukungan susun dan mem-boot ulang sakelar: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> stacking-support reboot</code> </pre> <br><p>  Sangat nyaman bahwa sakelar model yang berbeda dapat digabungkan ke dalam tumpukan, sedangkan sakelar dengan kinerja tertinggi akan menjadi master.  Sebagai contoh, ini mungkin diperlukan untuk tumpukan 10G switch dengan 16 port untuk server, yang ditambahkan switch 1G 48-port, yang mencakup antarmuka mgmt. <br>  Untuk menumpuk, sakelar harus memiliki versi OS yang sama.  Penumpukan dilakukan melalui port Ethernet tertentu, untuk setiap model yang berbeda, yang dapat ditemukan dalam dokumentasi.  Jika Anda memasang switch sesuai dengan skema port 1 in 2, 2 in 1, maka Extreme switch dapat ditumpuk sesuai dengan prosedur stack yang mudah, yang dengan sendirinya akan mengikat alamat mac ke nomor slot dan pengaturan lainnya.  Dalam hal ini, yang pertama akan menjadi saklar yang Anda aktifkan memungkinkan penumpukan, sisanya akan diberikan nomor di sepanjang rantai.  Ini adalah cara yang cukup mudah untuk menghemat banyak waktu.  Setelah menumpuk, port akan terlihat seperti SLOT: PORT (1: 1, 2:35). </p><br><pre> <code class="hljs pgsql">X440G2<span class="hljs-number"><span class="hljs-number">-48</span></span>p<span class="hljs-number"><span class="hljs-number">-10</span></span>G4<span class="hljs-number"><span class="hljs-number">.1</span></span> # <span class="hljs-keyword"><span class="hljs-keyword">show</span></span> stacking Stack Topology <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a Ring This node <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> an Active Topology Node MAC Address Slot Stack State <span class="hljs-keyword"><span class="hljs-keyword">Role</span></span> Flags <span class="hljs-comment"><span class="hljs-comment">------------------ ---- ----------- ------- --- *00:04:96:xx:xx:xx - Disabled Master --- 00:04:96:xx:xx:xx - Disabled Master --- 00:04:96:xx:xx:xx - Disabled Master --- 00:04:96:xx:xx:xx - Disabled Master --- 00:04:96:xx:xx:xx - Disabled Master --- * - Indicates this node Flags: (C) Candidate for this active topology, (A) Active Node (O) node may be in Other active topology X440G2-48p-10G4.2 # enable stacking You have not yet configured all required stacking parameters. Would you like to perform an easy setup for stacking operation? (y/N) Yes Executing "configure stacking easy-setup" command... For every node in the 5-node stack, this command will: - enable stacking - configure a stack MAC address - choose and configure a slot number (this node will be assigned to slot 1) - configure redundancy to minimal (slot 1 will be the master node) - configure the stacking protocol to enhanced Upon completion, the stack will automatically be rebooted into the new configuration. Warning: If stacking is already configured, this command will alter that configuration. Do you wish to proceed? (y/N) Yes Stacking configuration is complete. Rebooting...</span></span></code> </pre> <br><p>  Memperbarui tumpukan adalah bahwa master diperbarui, dan kemudian dia sendiri pada gilirannya menuangkan versi baru ke dalam slot yang tersisa.  <strong>Reboot diperlukan</strong> . </p><br><h2>  Perizinan </h2><br><p>  Setiap sakelar dilengkapi dengan lisensi pra-instal (tepi, tepi lanjut, inti, dll.).  Setiap lisensi memiliki serangkaian fungsi sendiri yang dapat diaktifkan pada sakelar, misalnya, jumlah port yang dapat digunakan dalam OSPF.  Ada juga lisensi untuk fitur individual.  Lebih detail bisa dibaca di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br>  Salah satu lisensi yang paling umum adalah fitur: Lisensi <em>Dual-10GB-Uplink</em> .  Lisensi ini untuk sakelar tepi-1G memungkinkan penggunaan port 2x 10GbE.  Misalnya, pada X440-G2-48p. <br>  Lisensi tersedia di akun pribadi Anda di situs web Extreme, setelah itu diaktifkan (tanpa me-reboot) dan diperiksa oleh tim. </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> license XXXX-XXXX <span class="hljs-keyword"><span class="hljs-keyword">show</span></span> licenses</code> </pre> <br><p>  Jika lisensi yang berbeda digunakan dalam tumpukan switch, yang <u>terkecil</u> akan digunakan. </p><br><h2>  Kustomisasi </h2><br><p>  Penyimpangan kecil: Untuk melihat hasil dari perintah yang akan lebih rendah, serta informasi lainnya, dalam kebanyakan kasus Anda dapat menggunakan show, mengganti create dan mengkonfigurasi.  Misalnya, tampilkan vlan. <br>  Petunjuk: Saat menggunakan show ports - XOS akan membuat tabel yang diperbarui setiap beberapa detik, yang memungkinkan pemantauan waktu-nyata dari status antarmuka.  Untuk mendapatkan output tanpa memperbarui, Anda harus menggunakan "show ports no-refresh". <br>  Hal pertama yang terlintas dalam pikiran adalah mengkonfigurasi <em>nama host</em> ini.  Tampaknya menjadi seperti ini: </p><br><p><del>  konfigurasikan nama host Ex_sw_1 </del></p><br><p>  Tapi tidak semuanya begitu sederhana, sebenarnya itu dilakukan seperti ini: </p><br><pre> <code class="hljs powershell">configure snmp sysName Ex<span class="hljs-literal"><span class="hljs-literal">-sw</span></span><span class="hljs-literal"><span class="hljs-literal">-1</span></span></code> </pre> <br><p>  Buat VLAN: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> vlan My_Vlan_Five tag <span class="hljs-number"><span class="hljs-number">5</span></span></code> </pre> <br><p>  Atau lebih, dan inilah tepatnya yang akan ditampilkan di konfigurasi: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> vlan My_Vlan10 configure vlan My_Vlan10 tag <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  Mempertimbangkan pengalaman praktis dan kenyataan dari output perintah dan pengaturan XOS, saya membuat aturan untuk diri saya sendiri: dalam nama vlan, tambahkan tagnya di bagian akhir, yang membuatnya lebih mudah untuk memahami dan mengonfigurasi: </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> vlan <span class="hljs-keyword"><span class="hljs-keyword">users</span></span><span class="hljs-number"><span class="hljs-number">-10</span></span> tag <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  XOS tidak memiliki trunk dan akses port per se.  Sebagai gantinya, konsep digunakan: lalu lintas yang ditandai dan tidak ditandai pada antarmuka yang terikat vlan.  Mungkin ada satu vlan yang tidak ditandai dan banyak yang ditandai.  Port diberi nomor dalam angka (atau slot: port pada tumpukan), semuanya sangat sederhana. </p><br><pre> <code class="hljs cs">configure vlan My_Vlan<span class="hljs-number"><span class="hljs-number">-5</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> ports <span class="hljs-number"><span class="hljs-number">1</span></span> tagged configure vlan My_Vlan1 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> ports <span class="hljs-number"><span class="hljs-number">1</span></span> untagged</code> </pre> <br><p>  Dengan demikian, semua lalu lintas tanpa tag yang datang ke antarmuka akan ditandai sebagai " <em>My_Vlan1</em> ". <br>  Pada saat yang sama, vlan dapat ditentukan baik melalui &lt; <em>Name</em> &gt; dan melalui &lt; <em>tag</em> &gt;, dan dalam kombinasi apa pun (menggunakan <em>vlan_list</em> , yaitu numerik dengan tag).  Tanpa atribut di akhir, &lt; <em>untagged</em> &gt; digunakan: </p><br><pre> <code class="hljs powershell">onfigure vlan <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">5</span></span><span class="hljs-literal"><span class="hljs-literal">-10</span></span>,<span class="hljs-number"><span class="hljs-number">15</span></span><span class="hljs-literal"><span class="hljs-literal">-20</span></span> add ports <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-literal"><span class="hljs-literal">-8</span></span>, <span class="hljs-number"><span class="hljs-number">48</span></span> tagged configure vlan web<span class="hljs-literal"><span class="hljs-literal">-110</span></span> add ports <span class="hljs-number"><span class="hljs-number">5</span></span> onfigure vlan <span class="hljs-number"><span class="hljs-number">20</span></span> add ports <span class="hljs-number"><span class="hljs-number">30</span></span><span class="hljs-literal"><span class="hljs-literal">-40</span></span>,<span class="hljs-number"><span class="hljs-number">45</span></span> untagged</code> </pre> <br><p>  Karena sebagian besar sakelar seri SummitX adalah sakelar <strong>L3</strong> , beginilah konfigurasi SVI: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">configure</span></span> vlan <span class="hljs-number"><span class="hljs-number">125</span></span> ipaddress <span class="hljs-number"><span class="hljs-number">192.168.125.1</span></span>/<span class="hljs-number"><span class="hljs-number">24</span></span></code> </pre> <br><p>  Setelah itu, Anda perlu menerapkan perintah ini, jika tidak vlan akan tetap non-routable: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> ipforwarding vlan <span class="hljs-number"><span class="hljs-number">125</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> ipforwarding vlan <span class="hljs-number"><span class="hljs-number">10</span></span><span class="hljs-number"><span class="hljs-number">-50</span></span>,<span class="hljs-number"><span class="hljs-number">60</span></span></code> </pre> <br><p>  Untuk melihat apa vlan pada antarmuka, Anda dapat menggunakan perintah: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ports <span class="hljs-number"><span class="hljs-number">2</span></span> vlan</code> </pre> <br><p>  Untuk melihat dan menyimpan konfigurasi, perintah berikut digunakan dan ada file konfigurasi primer dan sekunder: </p><br><pre> <code class="hljs pgsql">save save secondary <span class="hljs-keyword"><span class="hljs-keyword">show</span></span> <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span></code> </pre> <br><h2>  Agregasi Tautan </h2><br><p>  Salah satu momen <u>tidak nyaman</u> yang saya temui adalah agregasi saluran.  (port-channel).  Poin umum adalah ini: Anda menetapkan port master dan hingga tujuh antarmuka sekunder untuk itu.  Selanjutnya, semua pengaturan dibuat hanya pada port master tertentu, tidak ada antarmuka logis dari bentuk <em>po1</em> .  Kelemahannya adalah jika Anda ingin mengubah port master, Anda harus mentransfer semua pengaturan secara manual ke port lain, karena ketika Anda menghapus saluran yang diagregasi, seluruh konfigurasi di dalamnya akan <u>terbang</u> .  Ada solusi untuk ketidaknyamanan ini dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">artikel ini</a> , tetapi masih belum berhasil dengan sempurna.  Dalam XOS, agregasi disebut <strong>berbagi</strong> . <br>  Untuk mengaktifkan port seperti itu, Anda perlu menggunakan perintah dari form: </p><br><pre> <code class="hljs powershell">enable sharing [<span class="hljs-type"><span class="hljs-type">MASTER_PORT</span></span>] grouping [<span class="hljs-type"><span class="hljs-type">PORT_LIST</span></span>] [<span class="hljs-type"><span class="hljs-type">lacp</span></span>] enable sharing <span class="hljs-number"><span class="hljs-number">1</span></span> grouping <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-literal"><span class="hljs-literal">-2</span></span> lacp</code> </pre> <br><p>  Pada versi yang lebih rendah dari 22.X, perlu menambahkan algoritma "balancing": </p><br><pre> <code class="hljs powershell">enable sharing <span class="hljs-number"><span class="hljs-number">1</span></span> grouping <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-literal"><span class="hljs-literal">-2</span></span> algorithm address<span class="hljs-literal"><span class="hljs-literal">-based</span></span> L2 lacp</code> </pre> <br><h2>  Perlindungan Lingkaran 2 Lapisan OSI </h2><br><p>  Pada sakelar Summit-X dalam versi C mayor 22.2, protokol perlindungan loop kedua <strong><u>dinonaktifkan</u></strong> secara default.  (STP dan lainnya).  Pada saat penulisan, perangkat lunak yang direkomendasikan oleh vendor adalah 21.1.5.2. </p><br><h3 id="elrp">  ELRP </h3><br><p>  Dalam salah satu proyek saya, saya menggunakan protokol <abbr title="Protokol Pemulihan Loop Ekstrim">ELRP</abbr> berpemilik, yang dirancang untuk mendeteksi dan mencegah loop.  Selama pengujian, ia menunjukkan hasil yang baik (kecepatan penutupan port dengan loop, dll.).  Protokol ini mengirimkan <abbr title="Unit data protokol">PDU</abbr> multicast, dan jika pengirim menerimanya lagi, maka ada loop. <br>  Interval bertanggung jawab atas frekuensi distribusi PDU, dalam hal ini - 2 detik.  Dalam kasus loop, port akan diblokir selama 180 detik, setelah itu PDU akan dikirim lagi.  Opsi peringatan: log, trap, log-and-trap.  Dalam kasus jebakan, jebakan snmp dikirim sesuai. <br>  Protokol per-vlan ini dikonfigurasi, serta sebagian besar konfigurasi dalam XOS. </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> elrp-client configure elrp-client periodic Buh<span class="hljs-number"><span class="hljs-number">-123</span></span> ports <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> <span class="hljs-type"><span class="hljs-type">interval</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">log</span></span> <span class="hljs-keyword"><span class="hljs-keyword">disable</span></span>-port ingress duration <span class="hljs-number"><span class="hljs-number">180</span></span></code> </pre> <br><p>  Untuk mencegah protokol ELRP dari memblokir uplink switch akses atau koneksi kritis, perintah untuk menghapus port dari pemblokiran digunakan. </p><br><pre> <code class="hljs pgsql">configure elrp-client <span class="hljs-keyword"><span class="hljs-keyword">disable</span></span>-port <span class="hljs-keyword"><span class="hljs-keyword">exclude</span></span> <span class="hljs-number"><span class="hljs-number">35</span></span> configure elrp-client <span class="hljs-keyword"><span class="hljs-keyword">disable</span></span>-port <span class="hljs-keyword"><span class="hljs-keyword">exclude</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><h3 id="stp">  STP </h3><br><p>  STP dikonfigurasi sedikit lebih rumit, tetapi secara umum tidak ada masalah khusus.  Dalam XOS, protokol ini disebut "stpd", di semua perintah untuk mengkonfigurasi STP, digunakan.  Anda dapat melakukannya per-vlan menggunakan berbagai domain STP.  "Domain-id" dan "vlan-id" harus cocok.  Port di STP dapat ditambahkan secara manual atau menggunakan vlan auto-bind.  Segera setelah port ditambahkan ke vlan, port ini secara otomatis ditambahkan ke STP.  Begitulah logikanya.  Pengaturan mode: <abbr title="Standar 802.1d">dot1d</abbr> STP, <abbr title="Standar 802.1w">dot1w</abbr> - RSTP: </p><br><pre> <code class="hljs pgsql">configure stpd "s0" priority <span class="hljs-number"><span class="hljs-number">4096</span></span> configure stpd s0 mode dot1w <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> stpd s0 <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> stpd "s0" auto-bind "VLAN_0005"</code> </pre> <br><h2>  VRRP </h2><br><p>  VRRP adalah jenis <abbr title="Protokol redundansi hop pertama">FHRP</abbr> , analog dari HSRP di Cisco.  Untuk setiap jaringan (vlan) perlu menggunakan vrid, yang bisa dari 1 hingga 255. Saya senang dengan kemampuan untuk mengarahkan lalu lintas dari cadangan-vrrp-L3 menggunakan opsi fabric-routing.  Secara default, prioritasnya adalah 100. Manakah dari switch yang memiliki prioritas lebih tinggi, itu menjadi "Master". </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">create</span></span> vrrp vlan test1 vrid <span class="hljs-number"><span class="hljs-number">125</span></span> configure vrrp vlan test1 vrid <span class="hljs-number"><span class="hljs-number">125</span></span> <span class="hljs-keyword"><span class="hljs-keyword">priority</span></span> <span class="hljs-number"><span class="hljs-number">50</span></span> configure vrrp vlan test1 vrid <span class="hljs-number"><span class="hljs-number">125</span></span> fabric-routing <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> vrrp vlan test1 vrid <span class="hljs-number"><span class="hljs-number">125</span></span></code> </pre> <br><h2>  MLAG </h2><br><p>  Tentang apa itu dan mengapa, itu dijelaskan dengan sangat baik di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> : ini sebenarnya adalah analog dari Cisco VPC.  <abbr title="Koneksi antar-switch"><strong>ISC</strong></abbr> - koneksi antara sakelar pasangan mlag-pair. </p><br><p>  Dalam kasus saya, skema berikut biasanya digunakan: <br><img src="https://habrastorage.org/webt/zc/bu/qf/zcbuqf-hljcoauy1g6tmdlgb0vq.jpeg"></p><br><p>  Penting untuk membuat tetangga (peer) agar dapat menetapkan port tertentu dengan mlag ke tetangga tertentu, karena Extreme mendukung kemampuan untuk menggunakan banyak tetangga.  Untuk ISC, Anda memerlukan vlan yang hanya digunakan untuk ISC dan memiliki alamat IP.  Dengan demikian, peer untuk X670-1 kita akan memiliki X670-2, dan port mlag akan menjadi x440.  Untuk berfungsi, perlu membuat saluran agregasi, dan pada x670 untuk satu port menuju x440, dan saluran agregat menuju X670-2, di mana akan ada <strong>SEMUA</strong> Vlan yang berpartisipasi dalam mlag. <br>  Pada x670: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Enable</span></span> sharing <span class="hljs-number"><span class="hljs-number">1</span></span> grouping <span class="hljs-number"><span class="hljs-number">1</span></span> lacp <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> mlag peer "mlag1" configure mlag peer "mlag1" ipaddress <span class="hljs-number"><span class="hljs-number">10.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> vr VR-<span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> mlag port <span class="hljs-number"><span class="hljs-number">1</span></span> peer "mlag1" id <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Pada x440-stack: </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">enable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">sharing</span></span> 1<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">grouping</span></span> 1<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span>,2<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:51</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">lacp</span></span></code> </pre> <br><h2>  MLAG + VRRP </h2><br><p>  Selama pengujian switchboards di stand, ditemukan masalah bahwa VRRP menghilangkan peran Master sebelum semua antarmuka lainnya naik (ISC berjalan terlebih dahulu) dan protokol, yang menyebabkan jaringan downtime dalam urutan satu menit. <br>  Masalah ini diselesaikan dengan perintah berikut, namun hanya tersedia dengan "EXOS 21.1.3.7-patch1-4" dan "EXOS 22.3": </p><br><pre> <code class="hljs powershell">configure mlag ports reload<span class="hljs-literal"><span class="hljs-literal">-delay</span></span> <span class="hljs-number"><span class="hljs-number">60</span></span> enable mlag port reload<span class="hljs-literal"><span class="hljs-literal">-delay</span></span></code> </pre> <br><h2>  Routing </h2><br><p>  Rute statis didefinisikan sebagai berikut, seharusnya tidak ada masalah.  Anda dapat mengatur topeng di versi apa pun. </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">configure</span></span> iproute add <span class="hljs-number"><span class="hljs-number">10.0.66.0</span></span> <span class="hljs-number"><span class="hljs-number">255.255.255.0</span></span> <span class="hljs-number"><span class="hljs-number">172.16.1.1</span></span> configure iproute add <span class="hljs-number"><span class="hljs-number">10.0.0.1</span></span>/<span class="hljs-number"><span class="hljs-number">32</span></span> <span class="hljs-number"><span class="hljs-number">10.255.255.255</span></span> configure iproute add default <span class="hljs-number"><span class="hljs-number">172.16.0.1</span></span></code> </pre> <br><h3 id="ospf">  OSPF </h3><br><p>  Untuk routing, dalam praktek saya, OSPF dengan zona tunggal digunakan.  Untuk memastikan operabilitas, perlu untuk mengatur router-id, dan juga menambahkan setiap vlan yang perlu diumumkan (mirip dengan di Cisco: network). </p><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">configure</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">routerid</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">enable</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">configure</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">add</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vlan</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">routing-5</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">configure</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ospf</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">add</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">vlan</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Voip-32</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">area</span></span> 0<span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">passive</span></span></code> </pre> <br><h2>  Hal-hal kecil lainnya </h2><br><h3 id="dhcp-relay">  Relay DHCP </h3><br><p>  Dikonfigurasi sebagai berikut: </p><br><pre> <code class="hljs pgsql">configure bootprelay <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.12</span></span><span class="hljs-number"><span class="hljs-number">.5</span></span> vr VR-<span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> bootprelay ipv4 vlan servers<span class="hljs-number"><span class="hljs-number">-500</span></span></code> </pre> <br><p>  Saat membuat vlan baru, Anda harus menambahkannya secara manual ke daftar vlan dengan DHCP Relay. </p><br><h3 id="ssh--acl-dlya-ssh">  SSH + ACL untuk SSH </h3><br><p>  Ssh diaktifkan sebagai berikut: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> ssh2</code> </pre> <br><p>  Untuk membatasi akses ke ssh, Anda perlu membuat file kebijakan terpisah dari formulir NAME.pol dan menggantungnya di SSH. </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">vi</span></span> ssh.pol</code> </pre> <br><p>  Kebijakan: </p><br><pre> <code class="hljs mel">Entry AllowTheseSubnets { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> any { <span class="hljs-keyword"><span class="hljs-keyword">source</span></span>-address <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> /<span class="hljs-number"><span class="hljs-number">16</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">source</span></span>-address <span class="hljs-number"><span class="hljs-number">10.255</span></span><span class="hljs-number"><span class="hljs-number">.255</span></span><span class="hljs-number"><span class="hljs-number">.34</span></span> /<span class="hljs-number"><span class="hljs-number">32</span></span>; } Then { permit; } }</code> </pre> <br><p>  Perintah untuk menerapkan kebijakan: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> ssh2 <span class="hljs-keyword"><span class="hljs-keyword">access</span></span>-profile ssh.pol</code> </pre> <br><h3 id="description--display-string">  Deskripsi + display-string </h3><br><p>  Untuk kemudahan pengaturan dan operasi selanjutnya, Anda dapat mengatur "nama" dan "deskripsi" antarmuka. </p><br><pre> <code class="hljs kotlin">onfigure port <span class="hljs-number"><span class="hljs-number">1</span></span> description “<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> port number one”</code> </pre> <br><p>  Deskripsi antarmuka hanya akan ditampilkan dalam perintah formulir: </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">show</span></span> ports description</code> </pre> <br><p>  Nama antarmuka akan menggantikan hampir semua nomornya di output perintah.  Nama tidak boleh mengandung spasi dan dibatasi hingga 20 karakter. </p><br><pre> <code class="hljs vhdl">onfigure <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> display-<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> UserPort EXOS-VM.<span class="hljs-number"><span class="hljs-number">8</span></span> # sh <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> vlan Untagged <span class="hljs-keyword"><span class="hljs-keyword">Port</span></span> /Tagged VLAN Name(s) <span class="hljs-comment"><span class="hljs-comment">-------- -------- ------------------------------------------------------------ UserPort Untagged Default 2 Untagged Default 3 Untagged Default</span></span></code> </pre> <br><h2 id="zaklyuchenie">  Kesimpulan </h2><br><p>  <strong>XOS</strong> juga memungkinkan Anda untuk mengotomatiskan banyak tindakan dan menyesuaikan sistem dengan kebutuhan Anda, karena secara native mendukung Python dan mekanisme bawaan untuk membuat dan menjalankan skrip menggunakan perintah <em>CLI-Scripting</em> . </p><br><p>  Saya terbuka untuk saran untuk memperbaiki artikel dan memperbaiki ketidakakuratan / kesalahan, serta pertanyaan. </p><br><p>  <strong>UPD</strong> : LLDP untuk telepon IP dikonfigurasi menggunakan perintah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari komentar ini</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id419965/">https://habr.com/ru/post/id419965/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id419951/index.html">Pengalaman menggunakan WebRTC. Kuliah Yandex</a></li>
<li><a href="../id419953/index.html">Saya menulis buku tentang startup “kami” pertama yang menaklukkan dunia: bantuan</a></li>
<li><a href="../id419955/index.html">Fitur buffer FIFO UART di ESP32</a></li>
<li><a href="../id419961/index.html">Intisari materi menarik untuk pengembang seluler # 265 (6 Agustus - 12 Agustus)</a></li>
<li><a href="../id419963/index.html">Kami membuat pengontrol "pintar" untuk AC di ESP8266</a></li>
<li><a href="../id419969/index.html">Penyembunyian di Ruby. Juga sembunyikan kelas dari Top-Level</a></li>
<li><a href="../id419971/index.html">Laboratorium roket memperbaiki, memperluas, dan mempercepat</a></li>
<li><a href="../id419973/index.html">Acara digital di Moskow dari 13 hingga 19 Agustus</a></li>
<li><a href="../id419975/index.html">Bagaimana kami lari dari perusahaan Windows</a></li>
<li><a href="../id419977/index.html">Peneliti: Tidak semua autopilot Level 2 bekerja dengan baik, tetapi kemajuan terbukti</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>