<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>😅 🧝🏾 ⚗️ Lo que aprendí de un programador líder 🤱🏻 👖 📁</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hace un año, comencé a trabajar a tiempo completo en Bloomberg. Y luego decidí escribir este artículo. Pensé que estaría lleno de ideas que podría tir...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Lo que aprendí de un programador líder</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/465561/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cc/m9/v8/ccm9v8yphneof1qcnuaru8peu1e.jpeg"></div><br>  Hace un año, comencé a trabajar a tiempo completo en Bloomberg.  Y luego decidí escribir este artículo.  Pensé que estaría lleno de ideas que podría tirar en papel cuando llegue el momento.  Pero dentro de un mes me di cuenta de que todo no será tan simple: ya he comenzado a olvidar lo que aprendí.  O el conocimiento fue tan bien adquirido que mi mente me hizo creer que siempre lo supe, o simplemente se me escaparon de la cabeza.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup>1</sup></a> <br><br>  Esta es una de las razones por las que empecé a llevar un diario.  Todos los días, entrando en situaciones interesantes, las describía.  Y todo gracias al hecho de que estaba sentado al lado de un programador líder.  Pude observar de cerca su trabajo, y vi cuán diferente era de lo que haría.  Programamos mucho juntos, lo que facilitó aún más mis observaciones.  Además, nuestro equipo no condena el "espionaje" a las personas que escriben código.  Cuando me pareció que algo interesante estaba sucediendo, me di vuelta y miré.  Gracias al constante aumento, siempre fui consciente de lo que estaba sucediendo. <br><br>  Pasé un año al lado de un programador líder.  Esto es lo que aprendí. <br><a name="habracut"></a><br><h1>  Contenido </h1><br><ul><li>  Escritura de código <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo nombrar cosas en código</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Código heredado y el próximo desarrollador</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Documentación y comentarios en código</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Comisiones atómicas</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo eliminar con confianza el código pésimo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Revisión de código</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reducción de riesgos</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Arquitectura</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Creamos arquitectura, sin olvidar el mantenimiento.</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Implementar</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cuando algo sale mal</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bicicleta</a> <br></li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Monitoreo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conclusión</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">De lo que no estoy seguro</a> <br></li></ul><br><h2>  Escritura de código </h2><br><a name="1"></a><h4>  Cómo nombrar cosas en código </h4><br>  Una de mis primeras tareas fue trabajar en React UI.  Teníamos un componente principal que contenía todos los demás componentes.  Me gusta agregar un poco de humor al código, y quería nombrar el componente principal de <code>GodComponent</code> .  Ha llegado el momento de revisar el código, y entendí por qué es tan difícil dar nombres. <br><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="7269997868"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br>  Cada pieza de código que bauticé ha adquirido un propósito implícito.  ¿ <code>GodComponent</code> ?  Este es el componente que obtiene toda la basura que no quiero poner en el lugar correcto.  Contiene todo  <code>LayoutComponent</code> , y en el futuro decidiría que este componente asigna un diseño.  Que no contiene un estado. <br><br>  Otra lección importante que aprendí fue que si algo parece demasiado grande, como un <code>LayoutComponent</code> con un montón de lógica empresarial, entonces es hora de refactorizarlo, porque aquí no debería haber lógica empresarial.  Y en el caso del nombre <code>GodComponent</code> presencia de la lógica empresarial no importará. <br><br>  ¿Necesita nombrar los grupos?  Llamarlos después de los servicios que se ejecutan en ellos será una gran idea hasta que ejecute algo más en estos clústeres.  Les dimos un nombre en honor a nuestro equipo. <br><br>  Lo mismo se aplica a las funciones.  <code>doEverything()</code> es un nombre terrible con muchas consecuencias.  Si la función hace todo, será muy difícil probar sus partes individuales.  No importa cuán grande pueda llegar a ser esta función, nunca te parecerá demasiado extraña, porque debería hacer todo.  Entonces cambia el nombre.  Refact. <br><br>  Un nombre significativo tiene un inconveniente.  ¿De repente el nombre será demasiado significativo y esconderá algún tipo de matiz?  Por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cerrar sesiones</a> no cierra la conexión de la base de datos cuando <code>session.close()</code> llama a session.close <code>session.close()</code> en SQLAlchemy.  Debería haber leído la documentación y haber evitado este error, más sobre esto en la sección de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bicicletas</a> . <br><br>  Desde este punto de vista, nombrar funciones como <code>x</code> , <code>y</code> , <code>z</code> lugar de <code>count()</code> , <code>close()</code> , <code>insertIntoDB()</code> no nos permite ponerles un cierto significado y me hace monitorear cuidadosamente lo que hacen estas funciones.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup>2</sup></a> <br><br>  Nunca pensé que escribiría sobre los principios de nombrar más de una línea de texto. <br><br><a name="2"></a><h4>  Código heredado y el próximo desarrollador </h4><br>  ¿Alguna vez has mirado el código y te parece extraño?  ¿Por qué escribiste eso?  Esto no tiene sentido. <br><br>  Tuve la oportunidad de trabajar con una base de código heredada.  Esto, ya sabes, con comentarios como "Descomenta el código cuando Muhammad comprenda la situación".  Que haces aqui  Quien es Muhammad? <br><br>  Puedo cambiar de roles y pensar en la persona que recibirá mi código, ¿le parecerá extraño?  La revisión parcial de su código ayuda a sus colegas a revisar su código.  Esto me llevó a pensar en el contexto: necesito recordar el contexto en el que trabaja mi equipo. <br><br>  Si olvido este código, vuelvo a él más tarde y no puedo restaurar el contexto, diré: “¿Qué demonios hicieron?  Esto es estúpido ... Ah, espera, lo hice. <br><br>  Y aquí entran en juego la documentación y los comentarios del código. <br><br><a name="3"></a><h4>  Documentación y comentarios en código </h4><br>  Ayudan a mantener el contexto y a transmitir el conocimiento.  Como Lee dijo en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cómo construir un buen software</a> : <br><br><blockquote>  El valor principal del software no está en el código creado, sino en el conocimiento acumulado por las personas que crearon este software. </blockquote><br>  Tiene un punto final de API de cliente abierto que nadie parece haber usado nunca.  ¿Solo necesita ser eliminado?  En términos generales, es un deber técnico.  ¿Y si te digo que en uno de los países 10 periodistas envían sus informes a este punto final una vez al año?  ¿Cómo verificarlo?  Si esto no se menciona en la documentación (lo fue), entonces no hay forma de verificarlo.  No hemos verificado.  Lo quitaron, y unos meses más tarde llegó ese momento muy anual.  Diez periodistas no pudieron enviar sus informes importantes porque el punto final ya no existía.  Y las personas con conocimiento del producto ya han abandonado el equipo.  Por supuesto, ahora en el código hay comentarios que explican por qué esto es necesario. <br><br>  Que yo sepa, cada equipo está luchando con la documentación.  Y con la documentación, no solo por código, sino también por los procesos asociados con él. <br><br>  Todavía no hemos encontrado la solución perfecta.  Personalmente, me gusta la forma en que Antirez dividió los comentarios en código <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">en diferentes tipos de valores</a> . <br><br><a name="4"></a><h4>  Comisiones atómicas </h4><br>  Si necesita retroceder (y lo necesita. Consulte el capítulo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pruebas</a> ), ¿tendrá este compromiso sentido como un solo módulo? <br><br><a name="5"></a><h4>  Cómo eliminar con confianza el código pésimo </h4><br>  Fui muy desagradable para eliminar el código pésimo u obsoleto.  Me pareció que todo lo escrito hace siglos es sagrado.  Pensé: "Tenían algo en mente cuando escribieron así".  Esta es una confrontación entre tradición y cultura, por un lado, y pensar en el estilo del "principio primario" por el otro.  Esto es lo mismo que la eliminación del punto final anual.  Aprendí una lección especial.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup>3</sup></a> <br><br>  Intentaría sortear el código, y los desarrolladores líderes intentarían superarlo.  Bórralo.  ¿Una expresión if a la que no se puede acceder?  Sí, borramos  Que he hecho  Acabo de escribir mi función encima.  No he reducido la deuda técnica.  De todos modos, acabo de aumentar la complejidad del código y el reenvío.  Será aún más difícil para la próxima persona juntar las piezas de la imagen. <br><br>  Empíricamente, llegué a la conclusión: hay un código que no entiendes, pero hay un código que definitivamente nunca contactarás.  Borra el código con el que no contactas y ten cuidado con el código que no entiendes. <br><br><a name="6"></a><h4>  Revisión de código </h4><br>  Una revisión de código es una gran herramienta para la autoeducación.  Este es un ciclo de retroalimentación externo que muestra cómo escribirían el código y cómo lo escribió.  Cual es la diferencia  ¿Una forma mejor que otra?  Me pregunté sobre esto con cada crítica: "¿Por qué escribieron de esa manera?"  Y si no pudo encontrar una respuesta adecuada, fue y preguntó. <br><br>  Después del primer mes, comencé a encontrar errores en el código de mis colegas (como encontraron en el mío).  Fue una especie de locura.  La revisión se ha vuelto mucho más interesante para mí, se convirtió en un juego que me faltaba, un juego que mejoró mi "sentido del código". <br><br>  En mi experiencia, no tiene que aprobar el código hasta que entienda cómo funciona. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/96a/2ad/248/96a2ad248018ff0721f16a262dbb294c.png"><br>  <i>Mis estadísticas de github.</i> <br><br><a name="7"></a><h2>  Prueba </h2><br>  Me enamoré tanto de las pruebas que es desagradable para mí escribir código en una base de código sin pruebas. <br><br>  Si su aplicación solo hace una cosa (como todos los proyectos de mi escuela), aún puede realizar la prueba manualmente.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup>4</sup></a> Eso es exactamente lo que hice.  Pero, ¿qué sucede si una aplicación realiza 100 tareas diferentes?  No quiero pasar media hora probando, y a veces pierdo de vista algo.  Una pesadilla <br><br>  Las pruebas y la automatización de pruebas ayudan aquí. <br><br>  Trato las pruebas como documentación.  Esta es la documentación de mis ideas sobre el código.  Las pruebas me dicen cómo yo (o cualquier otra persona antes que yo) imagino que el código funciona y dónde algo debería salir mal. <br><br>  Hoy, cuando escribo pruebas, intento: <br><br><ol><li>  Muestra cómo usar la clase, función o sistema de prueba. <br></li><li>  Mostrar lo que, en mi opinión, podría salir mal. <br></li></ol><br>  Como resultado, la mayoría de las veces pruebo el comportamiento, pero no la implementación ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aquí hay un ejemplo</a> que elegí durante los descansos en Google). <br><br>  En el párrafo 2, no mencioné las fuentes de errores. <br><br>  Cuando noto un error, me aseguro de que la solución tenga una prueba adecuada (esto se llama prueba de regresión) para documentar la información.  Esta es otra razón por la cual algo puede salir mal.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup>5 5</sup></a> <br><br>  Por supuesto, la calidad de mi código mejora no porque escribo pruebas, sino porque escribo código.  Pero leer las pruebas me ayuda a comprender mejor las situaciones y escribir mejor código. <br><br>  Esta es la situación general con las pruebas. <br><br>  Pero este no es el único tipo de prueba que aplico.  Estoy hablando de entornos de implementación.  Es posible que tenga pruebas unitarias ideales, pero si no tiene pruebas del sistema, puede ocurrir algo como esto: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/905/1c5/bb8/9051c5bb8da5d845cbd0d9c6dcccf236.gif"><br><br>  Esto también se aplica al código bien probado: si no tiene las bibliotecas necesarias en su computadora, entonces todo se bloqueará. <br><br><ul><li>  Hay máquinas en las que está desarrollando (la fuente de todos los memes como "¡Funcionó en mi computadora!"). <br></li><li>  Hay máquinas en las que está probando (pueden coincidir con las anteriores). <br></li><li>  Finalmente, hay máquinas en las que está implementando (no deben coincidir con las máquinas en las que desarrolló). <br></li></ul><br>  Si los entornos de prueba e implementación no coinciden en las máquinas, tendrá problemas.  Los entornos de implementación ayudarán a evitar esto. <br><br>  Estamos haciendo desarrollo local en Docker en nuestra computadora. <br><br>  Tenemos un entorno de desarrollo, estas computadoras están equipadas con un conjunto de bibliotecas (y herramientas de desarrollo), y aquí instalamos el código escrito.  Aquí se puede probar con todos los sistemas necesarios.  También tenemos un entorno beta / provisional que repite completamente el entorno operativo.  Finalmente, tenemos un entorno operativo: máquinas que ejecutan código para nuestros clientes. <br><br>  La idea es detectar errores que no han aparecido durante las pruebas de la unidad y el sistema.  Por ejemplo, la diferencia en API entre los sistemas solicitantes y de respuesta.  Creo que en el caso de un proyecto personal o una pequeña empresa, la situación puede ser completamente diferente.  No todos tienen la oportunidad de crear su propia infraestructura.  Sin embargo, puede recurrir a servicios en la nube como AWS y Azure. <br><br>  Puede configurar clústeres individuales para el desarrollo y la operación.  AWS ECS utiliza imágenes de Docker para la implementación, por lo que los procesos en diferentes entornos serán relativamente consistentes.  Existen matices en términos de integración entre diferentes servicios de AWS.  ¿Está llamando al punto final correcto desde el entorno correcto? <br><br>  Puede ir aún más lejos: descargue imágenes alternativas de contenedores para otros servicios de AWS y configure un entorno local totalmente funcional basado en Docker-Compose.  Esto acelera el ciclo de retroalimentación.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup>6</sup></a> Quizás gane más experiencia cuando cree y lance mi proyecto paralelo. <br><br><a name="8"></a><h2>  Reducción de riesgos </h2><br>  ¿Qué pasos puede tomar para reducir su riesgo de desastre?  Si estamos hablando de un nuevo cambio radical, ¿cómo podemos verificar la duración mínima del tiempo de inactividad, si algo sale mal?  "No necesitamos implementar completamente el sistema debido a todos estos nuevos cambios".  Que realmente  ¡Y por qué no lo pensé! <br><br><a name="9"></a><h2>  Arquitectura </h2><br>  ¿Por qué estoy hablando de arquitectura después de escribir código y probar?  Se puede instalar primero, pero si no hubiera programado y probado en el entorno que utilicé, probablemente no habría logrado crear una arquitectura que tenga en cuenta las características de este entorno.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><sup>7 7</sup></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><br></a> <br>  Debes pensar mucho al crear una arquitectura. <br><br><ul><li>  ¿Cómo se usarán los números? <br></li><li>  ¿Cuántos usuarios habrá?  ¿Cuánto puede aumentar su número (el número de filas en la base de datos depende de esto)? <br></li><li>  ¿Qué arrecifes pueden encontrarse? <br></li></ul><br>  Necesito convertir esto en una lista de verificación llamada "Colección de reclamos".  Todavía no tengo suficiente experiencia, intentaré hacerlo el próximo año en Bloomberg.  Este proceso es en gran medida contrario a Agile: ¿cuánto puede diseñar la arquitectura antes de pasar a la implementación?  Se trata de equilibrio, debe elegir cuándo y qué hará.  ¿Cuándo tiene sentido apresurarse y cuándo retroceder?  Por supuesto, la recopilación de requisitos no equivale a considerar todas las cuestiones.  Creo que vale la pena si incluimos los procesos de desarrollo en el diseño.  Por ejemplo: <br><br><ul><li>  ¿Cómo procederá el desarrollo local? <br></li><li>  ¿Cómo empacaremos y desplegaremos? <br></li><li>  ¿Cómo llevaremos a cabo las pruebas de extremo a extremo? <br></li><li>  ¿Cómo realizaremos pruebas de estrés del nuevo servicio? <br></li><li>  ¿Cómo guardaremos secretos? <br></li><li>  Integración CI / CD? <br></li></ul><br>  Recientemente desarrollamos un nuevo motor de búsqueda para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BNEF</a> .  Fue maravilloso trabajar en ello, organicé un desarrollo local y descubrí DPG (paquetes y su despliegue), recabando el despliegue de secretos. <br><br>  ¿Quién hubiera pensado que desplegar secretos en un producto podría ser tan trivial? <br><br><ol><li>  No se pueden colocar en el código, porque alguien puede notarlos <br></li><li>  ¿Para almacenarlos como una variable de entorno como la especificación ofrece 12 factores de aplicación?  No es una mala idea, pero ¿cómo ponerlos allí?  (Ir al producto para completar las variables de entorno cada vez que el auto arranca es un fastidio) <br></li><li>  ¿Desplegarlos como archivos?  ¿Pero de dónde vendrán y cómo llenarlos? <br></li></ol><br>  No queremos hacer todo manualmente. <br><br>  Como resultado, llegamos a una base de datos con control de acceso basado en roles (solo nosotros y nuestras computadoras podemos comunicarnos con la base de datos).  Nuestro código recibe secretos de la base de datos al inicio.  Este enfoque está bien replicado en el marco de los entornos de desarrollo, preparación y operación; los secretos se almacenan en bases de datos apropiadas. <br><br>  Nuevamente, con servicios en la nube como AWS, la situación puede ser completamente diferente.  No necesita cuidar los secretos de alguna manera.  Obtenga una cuenta para su rol, ingrese los secretos en la interfaz y su código los encontrará cuando sean necesarios.  Esto simplifica enormemente todo, pero me alegro de haber adquirido experiencia, gracias a lo cual puedo apreciar esta simplicidad. <br><br><a name="10"></a><h4>  Creamos arquitectura, sin olvidar el mantenimiento. </h4><br>  El diseño del sistema es inspirador.  ¿Y la escolta?  No demasiado  Mi viaje por el mundo de las escorts me llevó a la pregunta: ¿por qué y cómo se degradan los sistemas?  La primera parte de la respuesta no está relacionada con el desmantelamiento de todos los obsoletos, sino solo con la adición de uno nuevo.  La tendencia a agregar en lugar de eliminar (¿no recuerda nada?).  La segunda parte es diseñar con el objetivo final en mente.  Un sistema que, con el tiempo, comienza a hacer lo que no estaba destinado, no necesariamente funcionará tan bien como un sistema originalmente diseñado para las mismas tareas.  Este es un enfoque de estilo paso atrás, no trucos y trucos. <br><br>  Conozco al menos tres formas de reducir la tasa de degradación. <br><br><ol><li>  Lógica e infraestructura empresarial separadas: la infraestructura generalmente se degrada: la carga aumenta, los marcos se vuelven obsoletos, aparecen vulnerabilidades de día cero, etc. <br></li><li>  Crear procesos para soporte futuro.  Aplique las mismas actualizaciones para bits antiguos y nuevos.  Esto evitará las diferencias entre lo antiguo y lo nuevo y mantendrá todo el código en un estado "moderno". <br></li><li>  Asegúrese de tirar todo lo innecesario y viejo. <br></li></ol><br><a name="11"></a><h2>  Despliegue </h2><br>  ¿Combinaré características o las desplegaré una a la vez?  Dependiendo del proceso actual, si los empaqueta, espere problemas.  Pregúntese por qué quiere agrupar características juntas. <br><br><ul><li>  ¿La implementación lleva mucho tiempo? <br></li><li>  ¿La revisión de código no es demasiado divertida? <br></li></ul><br>  Cualquiera sea la razón, esta situación necesita ser corregida.  Conozco al menos dos problemas asociados con el embalaje: <br><br><ol><li>  Usted mismo bloquea todas las funciones si una de ellas tiene un error. <br></li><li>  Aumenta el riesgo de problemas. <br></li></ol><br>  Independientemente del proceso de implementación que elija, siempre querrá que sus autos sean como ganado, no como mascotas.  No son únicos  Sabes exactamente qué se ejecuta en cada máquina, cómo recrearlos en caso de muerte.  No se enojará si algún automóvil muere, simplemente elija uno nuevo.  Los pastan, no crecen. <br><br><a name="12"></a><h2>  Cuando algo sale mal </h2><br>  En caso de que algo salga mal, y lo hace, hay una regla de oro: minimizar el impacto en los clientes.  En caso de fallas, mi primer deseo siempre fue arreglarlo.  Esto no parece ser la solución óptima.  En lugar de arreglarlo, incluso si se puede hacer en una línea, primero debe retroceder.  Regresar al estado operativo anterior.  Esta es la forma más rápida de devolver a los clientes a una versión que funcione.  Solo entonces descubro cuál es el problema y lo soluciono. <br><br>  Lo mismo se aplica a la máquina "dañada" en su clúster: apáguela, márquela como inaccesible, antes de descubrir qué le sucedió.  Me resulta extraño cuánto mis deseos e instintos naturales contradicen la solución óptima. <br><br>  Creo que este instinto también condujo al hecho de que solucioné errores más tiempo.  A veces me di cuenta de que algo no funcionaba, porque el código que escribí estaba de alguna manera equivocado, y me metí en la naturaleza, mirando cada línea.  Algo así como una búsqueda "primero en profundidad".  Y cuando resultó que el problema surgió debido a un cambio de configuración, es decir, no lo revisé en primer lugar, esta situación me inquietó.  Perdí mucho tiempo buscando un error. <br><br>  Desde entonces, he aprendido a buscar "primero en amplitud" y, por lo tanto, ya "primero en profundidad" para excluir razones de nivel superior.  ¿Qué puedo confirmar exactamente con los recursos actuales? <br><br><ul><li>  ¿Funciona el auto? <br></li><li>  ¿El código está instalado correctamente? <br></li><li>  ¿Hay una configuración? <br></li><li>  &lt;Configuración específica del código&gt;, como si el enrutamiento se explica correctamente. <br></li><li>  ¿Es correcta la versión del esquema? <br></li><li>  Y luego me sumerjo en el código. <br></li></ul><br><blockquote>  Pensamos que nginx se instaló incorrectamente, pero resultó que solo la configuración estaba deshabilitada </blockquote><br>  Por supuesto, no necesito hacer esto todo el tiempo.  A veces, solo un mensaje de error es suficiente para llegar inmediatamente al código.  Cuando no puedo determinar la causa, trato de minimizar el número de cambios en el código para encontrar el motivo.  Cuantos menos cambios, más rápido puedo encontrar la verdadera raíz del problema.  Además, ahora tengo un memo para los errores que me ahorraron más de una hora pensando "¿qué me perdí?"  A veces me olvido de las comprobaciones más simples, como la configuración de enrutamiento, el esquema de coincidencia y las versiones de servicio, etc.  Este es otro paso en el desarrollo de la pila de tecnología que uso, y lo que obtienes solo con experiencia es la intuición para determinar qué es exactamente lo que no funciona. <br><br><a name="13"></a><h4>  Bicicleta </h4><br>  Este artículo no puede estar completo sin una historia.    ,        .      SQLAlchemy.  BNEF   ,     .      .          SQLAlchemy,   ,        Solr.  -   . <br><br>           «MYSQL server has gone away.»     .     ,     ,   . ,      .         ,    .     ,    ? <br><br>  ,      ?     ,      ,       .     ,         ,      <code>__exit__()</code>  <code>session.close()</code> . <br><br>     ,  ,    .             .          .      .    . <br><br> <code>Session.close()</code>  MySQL- SQLAlchemy      ,    NullPool.   . ,      ,           .      :     StackOverflow (,   !)     ,   ,     SQL- .       ,       .  ,        ,     (),     . <br><br>    «»  ,      1   8.   ,   ,       —          . <br><br><blockquote>     ,      . </blockquote><br><a name="14"></a><h2>  </h2><br>  ,       .  ,         ,      .    ,      . <br><br>    ,      ,      ,      .     ,      .  ,      . « <i>  ?!        ,  ?</i> ». <br><br>  ,      : ,   .   ,   ,  .  ,     ,     .     ,       .     —     ? ,   ,   .          .  ,     -,     ,    ,   ,  ,  ..        . <br><br>      .    ,     ,     ?          (,    AWS CloudWatch  Grafana).            . <br><br>        .       ,      ,       50 %,       —   .    ?   .     ,    —      (, ?). <br><br>        .   ,      ,  ,    ,      ?   ?    ,    ? <br><br>    ,   .      ,    .      —    -  . <br><br><a name="15"></a><h2>  Conclusión </h2><br>      .  ,     ,       ,     .   ,      - ! <br><br>        . ,    ! <br><br><blockquote>     ,        .     ,                — <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">How to Build Good Software</a> . </blockquote><br><a name="16"></a><h2>      </h2><br>        .       :     !     ,         . <br><br><ol><li>    ? <br></li><li>          ? ,    ?    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">,   </a> ? <br></li><li>   .       ,      ?    ? <br></li><li>     (utils) (,     ,   ,  )  ,   « »? <br></li><li>         ? <br></li><li>    ,  ,  -  ? <br></li><li>   —      API    ,         ? <br></li><li>    ?  ,     . <br></li><li>     ,   ,  .  ,   ,       . <br></li><li>      PR: «      ,    ,     52 ,  , ,  ,     ,   ».    ? <br></li><li>    .        ? <br></li><li>    ? <br></li><li>     ? <br></li></ol><br><h2>  Notas </h2><br><ol><li><a name="17"></a>     .  ,    ?  - ?    ,    ? <br></li><li><a name="18"></a>    ,        <code>x()</code> , <code>y()</code>  <code>z(),</code>       <code>x()</code> , <code>y()</code>  <code>z()</code> .  ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WYSIATI</a> . <br></li><li><a name="19"></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> .</a> <br></li><li><a name="20"></a>       .      ,   ? <br></li><li><a name="21"></a>  ,    - ,      ,     .   ,   . <br></li><li><a name="22"></a>     ,    ,       Docker-  AWS. <br></li><li><a name="23"></a>         . <br></li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/465561/">https://habr.com/ru/post/465561/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../465547/index.html">Guía SQL: Cómo escribir mejor las consultas (Parte 1)</a></li>
<li><a href="../465551/index.html">Resumen de eventos de TI de septiembre (primera parte)</a></li>
<li><a href="../465553/index.html">Lenguaje de programación Ü. Introducción, motivación para crear, metas</a></li>
<li><a href="../465555/index.html">12 habilidades blandas que hacen que los gerentes de proyectos de TI sean imparables</a></li>
<li><a href="../465557/index.html">Plazos de desarrollo de productos</a></li>
<li><a href="../465567/index.html">Probar el código de SQL Server con tSQLt</a></li>
<li><a href="../465569/index.html">Mapa de desarrollo para desarrolladores móviles</a></li>
<li><a href="../465571/index.html">Cómo vender cigarrillos de hombres para mujeres y hacer que los salvajes se protejan a sí mismos: redactores que podrían</a></li>
<li><a href="../465573/index.html">Todo el poder de IntelliJ IDEA en el ejemplo de un idioma (en imágenes)</a></li>
<li><a href="../465575/index.html">Operaciones de comparación en C ++ 20</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>