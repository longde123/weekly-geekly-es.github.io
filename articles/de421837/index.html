<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐵 🧒🏿 🙅🏿 Erstellen von 1k Intro Chaos für ZX-Spectrum 👩🏽‍🎨 📄 😥</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ursprünglich hatte ich nicht vor, eine Demo bei Chaos Constrictions 2018 zu machen , aber 2-3 Wochen vor cc wurde mir klar, dass man nicht mit leeren ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erstellen von 1k Intro Chaos für ZX-Spectrum</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421837/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/7u/dh/ww/7udhwwjcbgzix5jaxzonykfmcf8.png"></div><br>  Ursprünglich hatte ich nicht vor, eine Demo bei <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Chaos Constrictions 2018 zu machen</a></strong> , aber 2-3 Wochen vor <strong>cc wurde mir</strong> klar, dass man nicht mit leeren Händen zu einer Demo-Party gehen konnte, und <strong>ich</strong> beschloss, eine kurze Demo für <strong>386 / EGA / DOS</strong> zu schreiben. <br><br>  Nachdem ich in <strong>Turbo-C</strong> unter <strong>DOS</strong> meine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">lib AnotherGraphicsLibrary kompiliert hatte</a> , die ideal in die Beat-Plan-Struktur des <strong>EGA-</strong> Modus passte, war ich von den Bremsen, insbesondere den <strong>EGA-</strong> Bremsen, enttäuscht.  Die Demo in der Form, in der ich ihn für diesen sehr begrenzten Zeitraum sehen möchte, war unmöglich zu machen. <br><br>  Ich konnte jedoch nicht aufgeben und nichts tun.  Und dann fiel mir ein, dass ich schon lange an den <strong>ZX-Spectrum-</strong> Demowettbewerben teilnehmen wollte.  Und da ich im letzten Jahr zwei <strong>48k</strong> Reals bekommen habe, könnte es mir Spaß machen, eine Demo zu erstellen.  Übrigens - für mich ist das Wichtigste beim Schreiben einer Demo das Testen im realen Leben. <em>Emulgatoren</em> machen dem Prozess keine solche Freude. Es ist wirklich ein wunderbares Gefühl, wenn Sie nach der nächsten Änderung des Codes die Demo in real hochladen und sehen, wie die reale Hardware die Bytes mischt Speicherzeichnungseffekt. <br><br>  Da ich nur <strong>48k</strong> Real habe, habe ich beschlossen, eine Demo für <strong>48k</strong> zu machen.  Und aufgrund der begrenzten Zeit und des Fehlens jeglicher Entwicklungen fiel die Wahl auf die Erstellung eines <strong>1k-Intro</strong> (Demo von nur 1 Kilobyte oder 1024 Bytes). <br><a name="habracut"></a><br>  Das letzte Mal habe ich den <strong>z80 asm</strong> in <strong>EmuZWin gestoßen</strong> - einem großartigen Emulator mit integriertem Assembler.  Leider <strong>funktioniert EmuZWin</strong> nicht unter <strong>Windows XP</strong> oder ist fehlerhaft. <br>  Nachdem ich verschiedene Optionen geprüft hatte, stoppte ich bei einer Reihe von <strong>Unreal + sjAsm + Notepad ++ -</strong> Programmen, die meiner Meinung nach viel <strong>einfacher als</strong> <strong>EmuZWin</strong> sind, aber im Gegensatz dazu lebendig sind. <br><br>  Während ich dieses Intro schrieb, führte ich direkt in der Quelle ein Entwicklungsprotokoll durch, auf dessen Grundlage der folgende Text geschrieben wurde: <br><br><h5>  Hallo Welt! </h5><br>  Was soll ich zuerst schreiben, wenn ich fast keine Erfahrung mit dem <strong>z80 asm habe</strong> ?  Richtig, die Ausgabe eines 5x5-Sprites ist für einen der Effekte bekannt oder 40x40 Pixel (ironischerweise wurde dieser unvollendete Teil in Zukunft aus dem Intro geworfen, um in 1k zu passen). <br><br>  Erstaunlicherweise war es ziemlich einfach, dies mit dem vorgenerierten Zeilenadressenetikett mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Down HL</a> von Grund auf neu zu tun. <br><br>  Oh, Indexregister, wie bequem sie sind, aber langsamer sind, verbrauchen buchstäblich Balken.  Ich musste ihren Gebrauch aus einer Reihe von Orten werfen. <br><br>  Noch hier bin ich ganz am Anfang auf unglaubliche <strong>sjAsm-</strong> Pannen <strong>gestoßen</strong> , oder besser gesagt auf die neueste Version.  Der Disrealismus in <strong>Unreal</strong> zeigte eine absolut verrückte Folge von Befehlen.  Ich habe die vorletzte Version heruntergeladen - es war schon irgendwie möglich damit zu leben. <br><br><img src="https://habrastorage.org/webt/xh/yh/ot/xhyhotktsbfmg1iqk_gtrbmsvjy.png"><br><br>  Es ist klar, dass Sie nicht genügend zuvor gezeichnete Sprites in 1k einfügen können. Deshalb habe ich beschlossen, sie dynamisch zu generieren.  Und sowieso nicht, sondern mit Polygonen zeichnen. <br><br>  Daher war das zweite Verfahren, das ich geschrieben habe, das Verfahren zum Zeichnen eines Dreiecks.  Zum größten Teil war es eine Portierung ihres eigenen Codes, der in <strong>C</strong> geschrieben wurde <strong>.</strong>  Mit dem einzigen globalen Unterschied zur <strong>C-</strong> Version werden die Polygon-Scanlinien zuerst generiert und erst dann auf diesen Scanlinien gezeichnet. <br><br>  Nach Hochsprachen macht es Ihnen Spaß, <strong>jr aka goto</strong> : <br><br><pre><code class="hljs css"><span class="hljs-selector-class"><span class="hljs-selector-class">.sort_me_please</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">nc</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.skip1</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.skip1</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">nc</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.skip2</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x0</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.sort_me_please</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.skip2</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span>,(<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>) <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">a</span></span>,<span class="hljs-selector-tag"><span class="hljs-selector-tag">d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">b</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">nc</span></span>,<span class="hljs-selector-class"><span class="hljs-selector-class">.skip3</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x2</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">ld</span></span> (<span class="hljs-selector-tag"><span class="hljs-selector-tag">tr_x1</span></span>),<span class="hljs-selector-tag"><span class="hljs-selector-tag">de</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jr</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.sort_me_please</span></span> <span class="hljs-selector-class"><span class="hljs-selector-class">.skip3</span></span>:</code> </pre> <br>  Ich war ein wenig schockiert über die Tatsache, dass es <strong>sich</strong> zu einem angemessenen Zeitpunkt herausstellte, ein funktionierendes <strong>draw_triangle</strong> auf <strong>z80 asm</strong> zu schreiben, das ein Polygon Pixel für Pixel und ohne Löcher beim Verbinden von Polygonen zeichnet. <br><br><img src="https://habrastorage.org/webt/tl/sv/or/tlsvorwso0wpqcrulnaewu23_84.png"><br>  <em>Hallo Dreiecke!</em> <br><br><h5>  Partikel </h5><br><img src="https://habrastorage.org/webt/ng/kx/mq/ngkxmqez4envpqx6-tzzc0wd2ge.png"><br><br>  Aufgrund des Vorhandenseins eines Bildschirmlinien-Etikettengenerators habe ich mit diesem Etikett eine ziemlich gekrümmte und langsame Punktausgabeprozedur geschrieben.  Die Prozedur hat zwei Eintrittspunkte - nur die Umkehrung des Pixels und die Umkehrung des Pixels, indem es mit <strong>INK</strong> + <strong>BRIGHT</strong> + und der in einem der Register angegebenen Farbe <strong>gefüllt wird</strong> . <br><br>  Als ich einen Effekt mit Partikeln erzeugte, stellte ich fest, dass das Beispiel mit den Strukturen aus den Beispielen im <strong>Wiki sjAsm</strong> einfach nicht funktioniert.  Beim Googeln wurde ein Thema von der Website <strong>zx-pk.ru angesprochen</strong> , auf der dieses Problem beschrieben wird, und es gibt keine Lösung - ha, gut - eine weitere Panne. <br><br>  Ich beschloss, alles klar zu machen - die Koordinaten unabhängig vom Rendern durch Unterbrechung zu aktualisieren.  Ja ... plus Bytes zum Generieren einer Interrupt-Tabelle. <br><br>  Zu diesem Zeitpunkt gab es nur wenige Partikel, und sie passen kaum in den Rahmen - dies ist übrigens die Langsamkeit meines Verfahrens zur Ausgabe des% -Punkts.)) Die Verwendung einer gemeinsamen Tabelle mit Sprites ließ mich jedoch nicht herauswerfen und fertig machen, weil  Dies sparte viel Platz, da nur ein Tabellengenerator benötigt wurde.  Und meine Liebe zu Fahrrädern auch :) <br><br>  Zu wenige Partikel ... haben ihre Anzahl erhöht, aber jetzt wurde das Rendering auf zwei Frames gemästet. <br><br><img src="https://habrastorage.org/webt/tb/eu/qq/tbeuqqaoeef05uf04tfe33-t7f4.jpeg"><br>  <em>Testen auf <strong>Peters WS64</strong> , den ich auf dem letzten cc bekommen und diesen Winter repariert habe :)</em> <br><br>  Übrigens haben sich die Punkte bereits zu diesem Zeitpunkt in fette horizontale Punkte <strong>2: 1</strong> verwandelt, wie beim <strong>Commodore 64</strong> .  Dies geschah aufgrund der anfänglich geringen Anzahl von Partikeln und meiner Unzufriedenheit mit der Tatsache, dass sie im realen Leben ziemlich unsichtbar waren.  Das Problem wurde durch Ersetzen der Platte behoben <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">db</span></span> <span class="hljs-number"><span class="hljs-number">128</span></span>,<span class="hljs-number"><span class="hljs-number">64</span></span>,<span class="hljs-number"><span class="hljs-number">32</span></span>,<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br>  auf <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">db</span></span> <span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">192</span></span>,<span class="hljs-number"><span class="hljs-number">96</span></span>,<span class="hljs-number"><span class="hljs-number">24</span></span>,<span class="hljs-number"><span class="hljs-number">12</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> <br>  Dies verschlechterte die Genauigkeit der Positionierung und machte den Flug ein wenig ruckartig, erhöhte aber die Sicht.  Hier spielte es auch in die Hand, dass die Partikel von oben nach unten fielen - ihre Sicht war vertikal verschmiert. <br><br>  Teilchen fallen übrigens jeweils mit ihrer eigenen zufälligen Geschwindigkeit, und zwei Bytes werden zum Speichern von <strong>Y-</strong> Koordinaten verwendet. <br><br><h5>  Sprites </h5><br>  Ich warf das unvollendete Teil des Sprite-Teils weg und stellte fest, dass ich nicht in <strong>1k</strong> damit passen konnte. <br><br>  Außerdem gab es bereits Platzmangel, so dass ich mich an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Introspeks</a> wunderbaren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Artikel</a> über Packer erinnerte. Ich entschied mich für <strong>zx7</strong> als Packer, der etwa 110 Bytes sparte.  Übrigens, vielleicht kennt jemand einen besser geeigneten Packer für ein 1k-Intro? <br><br><h5>  Chaoskonstruktionen </h5><br><img src="https://habrastorage.org/webt/83/xj/h4/83xjh4wggmay449rwrmrfphx62y.png"><br><br>  Da ich bereits ein Verfahren zum Ausgeben eines Polygons hatte, schien es mir eine coole Idee zu sein, das <strong>CC-</strong> Logo in Polygone aufzuteilen und diese einzeln anzuzeigen. <br><br>  Ich habe einen Testcode geschrieben, der mehrere Polygone anzeigt - alles hat wie beabsichtigt funktioniert - in Ordnung. <br><br>  Um zu überprüfen, ob meine Idee in <strong>1k</strong> passt oder nicht, wurde nach Schätzungen eine bestimmte Anzahl zufälliger Polygone generiert, eine ausreichende Anzahl für das Logo, und zur Quelle gefahren.  Kompiliert und sichergestellt, dass - ausgezeichnet - Intro in dieser Form in die Grenze von 1024 Bytes passt. <br><br><img src="https://habrastorage.org/webt/fq/8k/bc/fq8kbcfvtdbdirtysojcd0hix8m.jpeg"><br>  <em>Lebensfoto, erkennen Sie das Gerät auf dem Tisch?</em>  <em>:)))</em> <br><br>  Ich beschloss, das halbfertige Intro noch einmal zu testen, bereits mit Polygonen und einem Packer, der auf real hochgeladen wurde und ... zurückgesetzt wurde.  Zuerst begann ich zu sündigen, dass ich vergessen hatte, den Speicher irgendwo zu initialisieren, von wo aus, wo auf dem <strong>0x00-</strong> Emulator alles gut funktioniert, im wirklichen Leben Müll einen Reset verursacht. <br><br>  Nichts ist besser, um einen Problemort zu finden, als die Halbteilungsmethode und der <strong>Halt, den</strong> ich mir nicht einfallen lassen konnte. <br><br>  Bei einem zweistündigen Reset auf Real gab es keine Möglichkeit, den Fehler zu lokalisieren ... <br>  Wie sich herausstellte, war es nicht in meinem Code enthalten, sondern in dem mitgelieferten Sound <em>Enhancer</em> auf dem Telefon, von dem ich WAVs geladen habe.  Ein Verbesserer aus einem Bitstrom in einer <strong>WAV-</strong> Datei erzeugte einen Deliriumstrom. <br><br>  Sobald ich es ausschaltete, funktionierte alles magisch. <br><br>  Er skizzierte das Logo im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fehlerhaften Greenpixel-</a> Grafikeditor, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zerlegte</a> es in eine Reihe von Dreiecken und fuhr die Koordinaten manuell zur Quelle.  Nachdem ich das <strong>Chaos Constructions-</strong> Logo vollständig ausgefüllt und im wirklichen Leben ausgeführt hatte - ich war froh -, sah es ziemlich gut aus. <br><br><img src="https://habrastorage.org/webt/vy/4m/ul/vy4mul7kzdo_o7qav3wtnvc3oki.jpeg"><br>  <em>Das erste Logo wird auf echt angezeigt</em> <br><br>  Allerdings habe ich zufällige Polygone zu wenig gestopft, und auf dem echten Logo gab es ein Limit von 1 <strong>KB</strong> pro 150 Byte.  Und dies trotz der Tatsache, dass der Partikeleffekt immer noch nicht abgeschlossen war und der Übergang zwischen den Teilen scharf war. <br><br>  An diesem Tag ins Bett zu gehen, stellte sich wegen der Aufregung mit Pannen bereits um 8 Uhr morgens heraus. 8) <br><br>  Und ja, ich habe versucht, die Größe zu optimieren, indem ich die Koordinaten und Scheitelpunktindizes getrennt gespeichert habe, aber der Packer mochte es nicht sehr, was die Größe nur vergrößerte. <br><br><h5>  Finale </h5><br><img src="https://habrastorage.org/webt/qv/h9/is/qvh9ist1fdq9xunbrd4uyejd3gi.png"><br><br>  Ich habe mir überlegt, wie man die Ausgabe des Logos diversifizieren kann. Dafür waren fast zwei weitere Pixel-Labels erforderlich: <br><br><pre> <code class="hljs">fake_points1: db 1,2,4,8,16,32,64,128; 1 ch fake_points2: db 32,8,128,2,16,1,64,4; 2 ch normal_points: db 128,64,32,16,8,4,2,1; 3 ch</code> </pre> <br>  Dies führte zu einem coolen Effekt der Vergrößerung der Details beim Rendern des Logos oder dem anfänglichen Mangel an Details und einer allmählichen Erhöhung der Schärfe. <br><br>  Und schließlich habe ich die endgültige Version mit allen Übergängen erstellt und eine Menge von allem weggeworfen.  Dabei habe ich einen Fehler in der Prozedur zum Zeichnen eines Dreiecks gefunden. Wenn die beiden Scheitelpunkte die gleichen <strong>Y-</strong> Koordinaten haben, wird das Dreieck schief gezeichnet (es sieht so aus, als würde man bei der Berechnung von <strong>dx</strong> durch 0 dividieren) und mit einem temporären Hack umgangen. <br><br><img src="https://habrastorage.org/webt/xo/a3/--/xoa3--9_kt2k-uodr2gabj8ithm.jpeg"><br>  <em>Testen der endgültigen Version auf Leningrad 48</em> <br><br><h5>  Größenoptimierung </h5><br><img src="https://habrastorage.org/webt/-e/ro/l8/-erol8uszgdcler4i9jhp4n-9cu.jpeg"><br>  <em>Zweistellige Zahlen sind „zusätzliche Bytes“.</em> <br><br><h6>  94 zusätzliche Bytes ... </h6><br>  Es ist an der Zeit, die „kulturelle“ Bewahrung / Wiederherstellung von Registern von Eingabe- / Ausgabeverfahren zu unterbinden, weit entfernt von allem, was notwendig ist, aber die Erinnerung frisst. <br><br><h6>  86 Bytes ... </h6><br>  Im wirklichen Leben getestet - es funktioniert!  Er hat etwas mehr Speicherplatz verloren und gleichzeitig einen Fehler behoben, der durch 0 - 63 Bytes geteilt wird! <br><br><h6>  57 Bytes ... </h6><br>  Looping hinzugefügt. <br><br><pre> <code class="hljs sql">random_store: <span class="hljs-keyword"><span class="hljs-keyword">start</span></span>:</code> </pre> <br>  Das Schleifen erfolgt übrigens auf der Auspackebene, wie  Als Entropiequelle für das <strong>RNG</strong> wurden mehrere Bytes aus dem Initialisierungscode verwendet (um Platz zu sparen), die das <strong>RNG</strong> im ersten Teil verdarb.  Daher gibt es zum Schleifen nach dem Ende des Intro <strong>ret</strong> , <strong>na ja</strong> , und dann noch ein Entpacken und Übergang zum entpackten Code ... <br><br>  Es war nicht möglich, die letzten 48 Bytes loszuwerden, ich musste den Interrupt-Handler ausschalten, aber Hurra!  Gefüllt!  Es blieb sogar 1 zusätzliches Byte übrig. <br><br>  Und da es keine Unterbrechungen gibt, kann es für Frames bewertet werden, und es ist schwierig, den Strahlquerschnitt im ersten Effekt bei einem Pixel zu sehen. Daher habe ich die Anzahl der Partikel pro Auge erhöht, wobei ein Kompromiss zwischen Geschwindigkeit und Unterhaltung besteht. <br><br>  Noch härter gestochen, dumm Code und Daten von einem Ort zum anderen verschoben, um dem Packer zu helfen.  Was einige Zeit gedauert hat :) <br><br>  Dies gab ungefähr <strong>10 Bytes frei,</strong> in die ich eine Parodie des Klangs steckte.  Khk, khe, Ton - dies ist an einigen Stellen durch Ohr eingeführt: <br><br><pre> <code class="hljs perl"> ifdef UseSound ld a,d <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-comment"><span class="hljs-comment">#10 out (#FE),a endif</span></span></code> </pre> <br>  Ich habe den Sound nicht "genagelt", sondern eine Definition vorgenommen und so zwei Versionen des Intro mit und ohne Sound erhalten.  In dem ohne Ton, in "zusätzlichen" Bytes vollgestopft <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">db</span></span> <span class="hljs-string"><span class="hljs-string">'e'</span></span>,<span class="hljs-string"><span class="hljs-string">'r'</span></span>,<span class="hljs-string"><span class="hljs-string">'r'</span></span>,<span class="hljs-string"><span class="hljs-string">'o'</span></span>,<span class="hljs-string"><span class="hljs-string">'r'</span></span></code> </pre> <br>  Ich habe <strong>trd</strong> und <strong>tap</strong> gesammelt und alles auf die <strong>cc-</strong> Website hochgeladen. <br><br>  Hurra - ich nehme an Demopati teil! <br><br><h5>  Nachwort </h5><br>  Es stellte sich als lustig mit dem Geräusch heraus, jemand auf dem Patlace sagte "klares Geräusch", jemand sah mich seltsam an und auf <strong>Pouet</strong> fand ich Folgendes: <br><br><img src="https://habrastorage.org/webt/vt/p_/sw/vtp_swwrkskgpqbexsuj1nubn40.png"><br><br>  Und das: <br><br><img src="https://habrastorage.org/webt/og/vh/wc/ogvhwc8p907emey1wk2erb-ejtm.png"><br><br>  Im Allgemeinen habe ich nicht verstanden, ob jemand den 10-Byte-Sound mochte oder nicht :) <br><br>  Und das letzte - es ist eine Schande, dass der 1- <strong>km-</strong> Wettbewerb dieses Jahr nicht stattgefunden hat. Die Arbeit erwies sich meiner Meinung nach als anständig, aber <strong>es ist</strong> schwierig, mit <strong>640 km</strong> zu konkurrieren, aber ich wollte unbedingt antreten. <br><br>  <strong>Schreibe Demos, schreibe 1k!</strong> <br><br>  Und hier ist, was endete (ps, pass auf deine Ohren auf): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/-Q3cD3dx5lY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Stille Version: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2fwdWSiczIE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de421837/">https://habr.com/ru/post/de421837/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de421823/index.html">Wie wir X-Ray x64 eingeführt haben</a></li>
<li><a href="../de421827/index.html">Was kann man jetzt über Java lesen?</a></li>
<li><a href="../de421829/index.html">Frangos Anomalie - eine fantastische Romanze mit echten IT-Leuten</a></li>
<li><a href="../de421833/index.html">Wir schreiben unser einfachstes Programm für ARM Cortex-M3</a></li>
<li><a href="../de421835/index.html">Die Interagency Commission entwickelt neue Technologien zur Blockierung von Telegrammen</a></li>
<li><a href="../de421839/index.html">Funktionale Java-Programmierung mit Vavr</a></li>
<li><a href="../de421841/index.html">Robotaxi Waymo ist nicht ganz bereit für den Zugang zu öffentlichen Straßen</a></li>
<li><a href="../de421845/index.html">Was machen Datenanalysten eigentlich? Ergebnisse aus 35 Interviews</a></li>
<li><a href="../de421847/index.html">Springe in die Wolke. Erstellen einer kostengünstigen IoT-Lösung auf NodeMCU + Azure IoT Hub</a></li>
<li><a href="../de421849/index.html">Veranstaltungen für HR in der IT im September 2018: My Circle Digest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>