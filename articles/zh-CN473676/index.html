<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ğŸ‘©ğŸ½â€âš•ï¸ ğŸ RouterOSä¸­çš„Backportæ¼æ´å±åŠæ•°åä¸‡ä¸ªè®¾å¤‡ ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ ğŸ“ ğŸ“…</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åŸºäºRouterOSï¼ˆMikrotikï¼‰è¿œç¨‹é™çº§è®¾å¤‡çš„èƒ½åŠ›ä½¿æˆåƒä¸Šä¸‡çš„ç½‘ç»œè®¾å¤‡é¢ä¸´é£é™©ã€‚ è¯¥æ¼æ´ä¸Winboxåè®®çš„DNSç¼“å­˜ä¸­æ¯’æœ‰å…³ï¼Œå®ƒä½¿æ‚¨å¯ä»¥ä¸‹è½½è®¾å¤‡ä¸Šè¿‡æ—¶çš„ï¼ˆé»˜è®¤æƒ…å†µä¸‹é‡ç½®å¯†ç ï¼‰æˆ–ä¿®æ”¹çš„å›ºä»¶ã€‚ 



 æ¼æ´è¯¦æƒ… 
 RouterOSç»ˆç«¯æ”¯æŒç”¨äºDNSæŸ¥æ‰¾çš„è§£æå‘½ä»¤ã€‚ 



 è¯¥è¯·æ±‚ç”±åä¸ºâ€œ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>RouterOSä¸­çš„Backportæ¼æ´å±åŠæ•°åä¸‡ä¸ªè®¾å¤‡</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473676/"><img src="https://habrastorage.org/webt/wi/vh/ok/wivhokqdbm9xuyevxjlp7v-smqk.png"><br><br> åŸºäºRouterOSï¼ˆMikrotikï¼‰è¿œç¨‹é™çº§è®¾å¤‡çš„èƒ½åŠ›ä½¿æˆåƒä¸Šä¸‡çš„ç½‘ç»œè®¾å¤‡é¢ä¸´é£é™©ã€‚ è¯¥æ¼æ´ä¸Winboxåè®®çš„DNSç¼“å­˜ä¸­æ¯’æœ‰å…³ï¼Œå®ƒä½¿æ‚¨å¯ä»¥ä¸‹è½½è®¾å¤‡ä¸Šè¿‡æ—¶çš„ï¼ˆé»˜è®¤æƒ…å†µä¸‹é‡ç½®å¯†ç ï¼‰æˆ–ä¿®æ”¹çš„å›ºä»¶ã€‚ <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/6y/ab/ou/6yaboulsoswpqpl8sixarc9jf1o.jpeg"><br><br><h3> æ¼æ´è¯¦æƒ… </h3><br>  RouterOSç»ˆç«¯æ”¯æŒç”¨äºDNSæŸ¥æ‰¾çš„è§£æå‘½ä»¤ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c9b/c23/74b/c9bc2374b57a7aca1ca863e046c0e319.png" alt="å›¾ç‰‡"><br><br> è¯¥è¯·æ±‚ç”±åä¸ºâ€œ resolverâ€çš„äºŒè¿›åˆ¶æ–‡ä»¶å¤„ç†ã€‚ è§£æå™¨æ˜¯è¿æ¥åˆ°RouterOS Winboxåè®®çš„è®¸å¤šäºŒè¿›åˆ¶æ–‡ä»¶ä¹‹ä¸€ã€‚ åœ¨è¾ƒé«˜çº§åˆ«ï¼Œå¯ä»¥åŸºäºåŸºäºæ•°ç»„çš„ç¼–å·æ–¹æ¡ˆå°†å‘é€åˆ°Winboxç«¯å£çš„â€œæ¶ˆæ¯â€è·¯ç”±åˆ°RouterOSä¸­çš„å„ç§äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ <br><br> é»˜è®¤æƒ…å†µä¸‹ï¼ŒRouterOSç¦ç”¨DNSæœåŠ¡å™¨åŠŸèƒ½ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e9c/56c/294/e9c56c2941058027cb838c6932d58fa1.png" alt="å›¾ç‰‡"><br><br> ä½†æ˜¯ï¼Œå³ä½¿ç¦ç”¨äº†æœåŠ¡å™¨åŠŸèƒ½ï¼Œè·¯ç”±å™¨ä¹Ÿä¼šç»´æŠ¤è‡ªå·±çš„DNSç¼“å­˜ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/30b/773/9c8/30b7739c8d3b399da0547555ba6af07d.png" alt="å›¾ç‰‡"><br><br> å½“æˆ‘ä»¬ä½¿ç”¨winbox_dns_requestå‘å‡ºè¯·æ±‚æ—¶ï¼Œä¾‹å¦‚example.comï¼Œè·¯ç”±å™¨å°†ç¼“å­˜ç»“æœã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d0/69e/bc9/1d069ebc967950025a2914b8f4c8f278.png" alt="å›¾ç‰‡"><br><br> ç”±äºæˆ‘ä»¬å¯ä»¥æŒ‡å®šè¯·æ±‚åº”é€šè¿‡çš„DNSæœåŠ¡å™¨ï¼Œå› æ­¤è¾“å…¥é”™è¯¯çš„åœ°å€å¾ˆç®€å•ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é…ç½®æ¥è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Philip Klaus</a>çš„DNSæœåŠ¡å™¨çš„å®ç°ï¼Œä½¿å…¶å§‹ç»ˆä»¥åŒ…å«IPåœ°å€192.168.88.250çš„Aè®°å½•è¿›è¡Œå“åº”ã€‚ <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dns_response</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">: request </span></span>= DNSRecord.parse(data) reply = DNSRecord(DNSHeader( id=request.header.id, qr=<span class="hljs-number"><span class="hljs-number">1</span></span>, aa=<span class="hljs-number"><span class="hljs-number">1</span></span>, ra=<span class="hljs-number"><span class="hljs-number">1</span></span>), q=request.q) qname = request.q.qname qn = str(qname) reply.add_answer(RR(qn,ttl=<span class="hljs-number"><span class="hljs-number">30</span></span>,rdata=A(<span class="hljs-string"><span class="hljs-string">"192.168.88.250"</span></span>))) print(<span class="hljs-string"><span class="hljs-string">"---- Reply:\n"</span></span>, reply) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reply.pack()</code> </pre> <br> ç°åœ¨ï¼Œå¦‚æœæ‚¨ä½¿ç”¨WinboxæŸ¥æ‰¾example.comï¼Œåˆ™å¯ä»¥çœ‹åˆ°è·¯ç”±å™¨çš„DNSç¼“å­˜å·²ä¸­æ¯’ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c13/dba/89a/c13dba89a902e4e4dc91927e52e03b3b.png" alt="å›¾ç‰‡"><br><br> å½“ç„¶ï¼Œä¸­æ¯’example.comå¹¶ä¸æ˜¯å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºè·¯ç”±å™¨å®é™…ä¸Šä¸ä¼šä½¿ç”¨å®ƒã€‚ ä½†æ˜¯ï¼Œè·¯ç”±å™¨éœ€è¦è®¿é—®upgrade.mikrotik.comï¼Œcloud.mikrotik.comï¼Œcloud2.mikrotik.comå’Œdownload.mikrotik.comã€‚ è€Œä¸”ç”±äºå¦ä¸€ä¸ªé”™è¯¯ï¼Œæœ‰å¯èƒ½ç«‹å³å°†å®ƒä»¬å…¨éƒ¨ä¸­æ¯’ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">def </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dns_response</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data)</span></span></span><span class="hljs-function">: request </span></span>= DNSRecord.parse(data) reply = DNSRecord(DNSHeader( id=request.header.id, qr=<span class="hljs-number"><span class="hljs-number">1</span></span>, aa=<span class="hljs-number"><span class="hljs-number">1</span></span>, ra=<span class="hljs-number"><span class="hljs-number">1</span></span>), q=request.q) qname = request.q.qname qn = str(qname) reply.add_answer(RR(qn,ttl=<span class="hljs-number"><span class="hljs-number">30</span></span>,rdata=A(<span class="hljs-string"><span class="hljs-string">"192.168.88.250"</span></span>))) reply.add_answer(RR(<span class="hljs-string"><span class="hljs-string">"upgrade.mikrotik.com"</span></span>,ttl=<span class="hljs-number"><span class="hljs-number">604800</span></span>, rdata=A(<span class="hljs-string"><span class="hljs-string">"192.168.88.250"</span></span>))) reply.add_answer(RR(<span class="hljs-string"><span class="hljs-string">"cloud.mikrotik.com"</span></span>,ttl=<span class="hljs-number"><span class="hljs-number">604800</span></span>, rdata=A(<span class="hljs-string"><span class="hljs-string">"192.168.88.250"</span></span>))) reply.add_answer(RR(<span class="hljs-string"><span class="hljs-string">"cloud2.mikrotik.com"</span></span>,ttl=<span class="hljs-number"><span class="hljs-number">604800</span></span>, rdata=A(<span class="hljs-string"><span class="hljs-string">"192.168.88.250"</span></span>))) reply.add_answer(RR(<span class="hljs-string"><span class="hljs-string">"download.mikrotik.com"</span></span>,ttl=<span class="hljs-number"><span class="hljs-number">604800</span></span>, rdata=A(<span class="hljs-string"><span class="hljs-string">"192.168.88.250"</span></span>))) print(<span class="hljs-string"><span class="hljs-string">"---- Reply:\n"</span></span>, reply) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> reply.pack()</code> </pre> <br> è·¯ç”±å™¨è¯·æ±‚ä¸€é¡¹è®¸å¯ï¼Œæˆ‘ä»¬æä¾›äº”é¡¹è®¸å¯ã€‚ è·¯ç”±å™¨é”™è¯¯åœ°ç¼“å­˜äº†æ‰€æœ‰è¿™äº›å“åº”ã€‚ <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f00/51c/6a4/f0051c6a46726c28036570336a98b6d2.png" alt="å›¾ç‰‡"><br><br> æ˜¾ç„¶ï¼Œå¦‚æœè·¯ç”±å™¨å……å½“DNSæœåŠ¡å™¨ï¼Œæ­¤æ”»å‡»ä¹Ÿå¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸æ”»å‡»è·¯ç”±å™¨çš„å®¢æˆ·ç«¯ã€‚ <br><br> æ­¤æ”»å‡»è¿˜å…è®¸åˆ©ç”¨æ›´ä¸¥é‡çš„æ¼æ´ï¼šé™çº§æˆ–å‘åç§»æ¤RouterOSç‰ˆæœ¬ã€‚ æ”»å‡»è€…é‡æ–°åˆ›å»ºæ›´æ–°æœåŠ¡å™¨çš„é€»è¾‘ï¼ŒåŒ…æ‹¬å˜æ›´æ—¥å¿—ï¼Œå¹¶è¿«ä½¿RouterOSæ¥å—è¿‡æ—¶çš„ï¼ˆæ˜“å—æ”»å‡»çš„ï¼‰ç‰ˆæœ¬ä½œä¸ºå½“å‰ç‰ˆæœ¬ã€‚ è¿™é‡Œçš„å±é™©åœ¨äºï¼Œå½“â€œæ›´æ–°â€ç‰ˆæœ¬æ—¶ï¼Œç®¡ç†å‘˜å¯†ç ä¼šé‡ç½®ä¸ºé»˜è®¤å€¼-æ”»å‡»è€…å¯ä»¥ä½¿ç”¨ç©ºå¯†ç ç™»å½•ç³»ç»Ÿï¼ <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/5SW7z0eUDuA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> å°½ç®¡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½œè€…</a>å®ç°äº†æ›´å¤šçš„å‘é‡ï¼ŒåŒ…æ‹¬ä¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨å›ºä»¶ä¸­åµŒå…¥åé—¨</a>æœ‰å…³çš„å‘é‡ï¼Œä½†è¿™ç§æ”»å‡»è¿˜æ˜¯æœ‰æ•ˆçš„ï¼Œä½†è¿™å·²ç»æ˜¯ä¸€ç§å†—ä½™æŠ€æœ¯ï¼Œå°†å…¶ç”¨äºéæ³•ç›®çš„æ˜¯éæ³•çš„ã€‚ <br><br><h3> é˜²æŠ¤ç­‰çº§ </h3><br> åªéœ€ç¦ç”¨Winboxå³å¯æŠµå¾¡è¿™äº›æ”»å‡»ã€‚ å°½ç®¡é€šè¿‡Winboxè¿›è¡Œç®¡ç†å¾ˆæ–¹ä¾¿ï¼Œä½†æœ€å¥½ä½¿ç”¨SSHåè®®ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN473676/">https://habr.com/ru/post/zh-CN473676/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN473664/index.html">äº²èº«å­¦ä¹ ç»éªŒã€‚ Yandex.Practicum-æ•°æ®åˆ†æå¸ˆ</a></li>
<li><a href="../zh-CN473666/index.html">ä½œä¸ºç§‘å¹»å°è¯´ä½œå®¶ï¼Œäºšç‘ŸÂ·å…‹æ‹‰å…‹ï¼ˆArthur Clarkï¼‰å‡ ä¹å…³é—­äº†ã€Šç§‘æŠ€-é’å¹´ã€‹æ‚å¿—</a></li>
<li><a href="../zh-CN473668/index.html">ä¸ºä»€ä¹ˆé€‰æ‹©Bitrix-Bitrix</a></li>
<li><a href="../zh-CN473670/index.html">Stolotoï¼šå¦‚ä½•å‘å½©ç¥¨ä»‹ç»æ‰‹æœº</a></li>
<li><a href="../zh-CN473672/index.html">ä¸ºä»€ä¹ˆï¼ŒBitrixï¼Ÿ è¿˜æ˜¯ä»™ç•Œ1C</a></li>
<li><a href="../zh-CN473678/index.html">ç”¨äºé€šè¿‡æ— çº¿é€šé“åœ¨è¿è¡ŒAndroidçš„è®¾å¤‡ä¸­æ¥æ”¶å†…å­˜å‰¯æœ¬çš„ç³»ç»Ÿ</a></li>
<li><a href="../zh-CN473680/index.html">ç©ºè°ƒITã€‚ ç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN473684/index.html">ä»éƒé‡‘é¦™ç‹‚æ½®åˆ°ç”µå­äº¤æ˜“ï¼šä»€ä¹ˆæ˜¯æœŸæƒï¼Œä»¥åŠå½“ä»ŠæŠ•èµ„è€…å¦‚ä½•ä½¿ç”¨å®ƒä»¬</a></li>
<li><a href="../zh-CN473692/index.html">Ennoble Phicomm K3C Wi-Fiè·¯ç”±å™¨</a></li>
<li><a href="../zh-CN473694/index.html">ä¿„ç½—æ–¯æ˜¯å…¨çƒCADå¼€å‘ä¸­å¿ƒã€‚ ä½ çŸ¥é“å—</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>