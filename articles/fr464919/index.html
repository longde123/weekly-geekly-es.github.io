<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèø‚Äçüíª üì® üßñüèæ Contr√¥le int√©gr√© des ressources de la RAM utilis√©e dans l'application üìô üèÇüèº ‚¨áÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Contr√¥le int√©gr√© des ressources de la RAM utilis√©e dans l'application 

 D√©crit un outil d'impl√©mentation logicielle assez simple pour contr√¥ler les r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Contr√¥le int√©gr√© des ressources de la RAM utilis√©e dans l'application</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464919/"><h1>  Contr√¥le int√©gr√© des ressources de la RAM utilis√©e dans l'application </h1><br><img src="https://habrastorage.org/webt/ez/cg/lk/ezcglkhvp9ztri9vr5euj3-wwoa.jpeg" width="300" align="right"><br>  <i>D√©crit un outil d'impl√©mentation logicielle assez simple pour contr√¥ler les ressources RAM utilis√©es pendant l'ex√©cution de l'application.</i>  <i>La base de la mise en ≈ìuvre est l'interception et l'enregistrement des demandes d'allocation, de lib√©ration et de r√©utilisation des ressources m√©moire envoy√©es par l'application au syst√®me d'exploitation via les appels <i>malloc (), calloc (), realloc (), free ()</i> .</i>  <i>Toutes les demandes de m√©moire sont enregistr√©es dans un journal sp√©cial et √† la fin de l'application, les informations accumul√©es sont affich√©es sous forme de rapport sur la console ou √©crites dans un fichier texte.</i>  <i>L'analyse du rapport vous permet d'identifier les cas d'utilisation inefficace de la RAM dans l'application.</i>  <i>Ceux-ci incluent des ¬´fuites de m√©moire¬ª lorsque les ressources de m√©moire demand√©es ne sont pas lib√©r√©es et ne sont pas revendiqu√©es par l'application, la fragmentation, lorsque les tailles des sections contigu√´s contamin√©es et lib√©r√©es de la m√©moire sont insuffisantes pour satisfaire de nouvelles demandes, ce qui conduit √† l'allocation de ressources suppl√©mentaires.</i> <i><br><br></i>  <i>L'outil de contr√¥le de m√©moire int√©gr√© peut √™tre activ√© ou d√©sactiv√© (pour enregistrer les demandes de m√©moire), et la possibilit√© de changement d'√©tat programm√© vous permet de contr√¥ler et d'optimiser la quantit√© de donn√©es re√ßues pour les ressources de m√©moire allou√©es.</i> <i><br></i> <a name="habracut"></a><br><h3>  Pr√©sentation </h3><br>  Une proportion importante des syst√®mes logiciels modernes est d√©velopp√©e en utilisant les langages de programmation <i>C #, Java</i> et similaires, o√π la gestion des ressources RAM est effectu√©e au niveau du syst√®me avec une minimisation de la responsabilit√© des d√©veloppeurs de logiciels.  Un exemple de tels syst√®mes logiciels est le syst√®me de conception assist√©e par ordinateur automatis√© de bout en bout de <b><i>Delta Design</i></b> impl√©ment√© en <i>C #</i> dans un environnement <i>.net</i> .  En revanche, les logiciels de syst√®mes d'automatisation ont une ¬´dur√©e de vie¬ª assez longue (jusqu'√† plusieurs dizaines d'ann√©es), ce qui conduit √† la n√©cessit√© de maintenir des technologies de gestion de m√©moire RAM ¬´obsol√®tes¬ª, en particulier, lors de l'int√©gration des deux classes de syst√®mes mentionn√©es dans un sch√©ma de contr√¥le commun. <br><br>  Pour cette raison, jusqu'√† pr√©sent, le probl√®me urgent de la cr√©ation, du d√©veloppement et de la maintenance d'applications logicielles fonctionnellement complexes reste la n√©cessit√© d'optimiser la gestion des ressources RAM qui s'y trouvent.  Parall√®lement √† des m√©thodes efficaces (pointeurs intelligents, ramasse-miettes), un logiciel continue d'√™tre utilis√© pour ex√©cuter les demandes de ressources m√©moire via les appels <i>malloc, calloc, realloc, free.</i> <br>  Cette approche offre aux d√©veloppeurs un contr√¥le total sur la gestion de la RAM dans l'application, tout en lui imposant un haut niveau de responsabilit√© pour la lib√©ration rapide de ces ressources afin d'√©viter les "fuites". <br><br>  En r√®gle g√©n√©rale, aux √©tapes initiales du d√©veloppement logiciel, la t√¢che d'identifier les faits d'une utilisation inefficace des ressources m√©moire n'est pas une priorit√©, car la structure de l'application est assez transparente.  Cependant, des probl√®mes commencent √† √©merger lors de l'int√©gration de divers composants structurels et fonctionnels du syst√®me avec des sch√©mas complexes de contr√¥le distribu√© des ressources RAM et de l'√©change d'informations entre eux.  Le changement de g√©n√©rations de d√©veloppeurs de syst√®mes a √©galement un impact sur la r√©solution des probl√®mes d'optimisation de la gestion des ressources RAM.  Par cons√©quent, les propri√©t√©s n√©gatives suivantes commencent √† appara√Ætre dans l'application: <br><br><ul><li>  un √©cart significatif est trouv√© entre la taille r√©elle de la RAM consomm√©e et les estimations des d√©veloppeurs; </li><li>  Il y a une augmentation lin√©aire de la m√©moire dynamique utilis√©e pendant l'ex√©cution de l'application. </li></ul><br>  Les raisons de l'utilisation inefficace de la RAM dans l'application sont divers facteurs, qui sont des compositions des √©v√©nements √©l√©mentaires suivants: <br><br><ul><li>  inad√©quation des demandes de placement et de lib√©ration de RAM (¬´fuite¬ª); </li><li>  faible niveau de r√©utilisation des zones lib√©r√©es de RAM, ce qui conduit √† des demandes de nouvelles zones (fragmentation). </li></ul><br>  La pratique consistant √† d√©velopper et √† maintenir des applications logicielles avec une architecture complexe et des fonctionnalit√©s d√©velopp√©es montre que le contr√¥le de l'utilisation des ressources RAM en elles doit √™tre d√©marr√© le plus t√¥t possible afin de maintenir le contr√¥le de ce processus.  Vous pouvez contr√¥ler les ressources m√©moire de l'application en acqu√©rant et en utilisant des produits logiciels appropri√©s (par exemple, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b><i>valgrind</i></b></a> ), ou en impl√©mentant et en incorporant des moyens pour intercepter et enregistrer des demandes de ressources RAM dans le code du programme d'application. <br><br>  Vous trouverez ci-dessous un exemple de l'une des impl√©mentations possibles de cette approche. <br><br><h3>  Logiciel de contr√¥le int√©gr√© </h3><br>  La base de la solution pr√©sent√©e est l'interception au moyen du contr√¥le int√©gr√© de toutes les requ√™tes aux ressources de RAM envoy√©es par l'application au syst√®me d'exploitation en cours d'ex√©cution.  Toute la vari√©t√© de ces requ√™tes est impl√©ment√©e via des appels √† <i>malloc (), realloc ()</i> ou <i>free ()</i> .  Un exemple de s√©quence d'√©v√©nements lors du traitement d'une demande d'allocation de RAM malloc () lorsque les commandes int√©gr√©es sont d√©sactiv√©es et activ√©es est illustr√© dans le diagramme ci-dessous (des diagrammes similaires peuvent √™tre <i>cr√©√©s</i> pour les appels <i>realloc ()</i> ou <i>free ()</i> ).  La bande ¬´ <b>A</b> ¬ª comprend une s√©quence d'√©v√©nements lors de l'allocation de m√©moire se produisant √† l'√©tat d√©sactiv√© du mode de contr√¥le int√©gr√©.  L'application envoie une demande au syst√®me d'exploitation pour allouer la taille de m√©moire requise et re√ßoit un pointeur vers l'adresse de d√©but du fragment s√©lectionn√©.  Dans le cas o√π la taille de m√©moire demand√©e n'est pas disponible, un pointeur avec une adresse nulle est renvoy√©, qui doit √™tre g√©r√© par l'application demandeuse en cons√©quence. <br><br><img src="https://habrastorage.org/webt/cy/xx/j0/cyxxj0fffcok3htqqilut1v97mm.jpeg"><br><br>  La bande ¬´ <b>B</b> ¬ª comprend une s√©quence d'√©v√©nements lors de l'allocation de m√©moire qui se produit lorsque le mode de contr√¥le int√©gr√© est activ√©.  Cette s√©quence co√Øncide compl√®tement avec celle d√©crite pr√©c√©demment, √† l'exception qu'apr√®s avoir allou√© la m√©moire demand√©e, le contr√¥le est pass√© √† la fonction register_request (), qui enregistre des informations sur l'adresse et la taille de la m√©moire allou√©e en fonction de la demande effectu√©e. <br><br>  En fait, l'interception et l'enregistrement des requ√™tes dans les ressources RAM sont effectu√©s par l'objet memSupervisor, qui est cr√©√© dans une seule instance en appelant init_memSupervisor () et qui peut ensuite √™tre activ√© ou d√©sactiv√© via des appels √† enable_memSupervisor () ou disable_ memSupervisor (), respectivement. <br>  La technique d'interception des demandes de ressources RAM est bas√©e sur l'utilisation de variables statiques de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><b><i>biblioth√®que GNU,</i></b></a> comme indiqu√© dans les fragments de code suivants. <br><br><img src="https://habrastorage.org/webt/en/st/or/enstorymb_mjykcnzbgqxsm3-vu.jpeg"><br><br><img src="https://habrastorage.org/webt/8y/nj/dx/8ynjdx8cksaikaajfmreemkfwfg.jpeg"><br><br>  Toutes les demandes trait√©es de ressources RAM sont enregistr√©es dans une table sp√©ciale d'enregistrements, dont le contenu est stock√© dans l'attribut memSupervisor.memRegister.  Chaque entr√©e contient les informations suivantes: <br><br><img src="https://habrastorage.org/webt/jl/4n/rx/jl4nrxvw_frtmywye0gyn087tkg.jpeg"><br><br>  Chaque enregistrement de la table est associ√© √† un point de contr√¥le du code programme, apr√®s passage par lequel la m√©moire est allou√©e et la requ√™te est enregistr√©e. <br><br>  Le g√©n√©rateur de rapport texte ( <i>memSupervisor.genReport (nom_fichier)</i> ) g√©n√®re un rapport en utilisant les donn√©es de la table et en √©crivant des informations dans le fichier texte sp√©cifi√© (ou en sortie sur la console d'application).  Le t√©l√©chargement des donn√©es de rapport dans le tableau MS Excel et le r√©glage correspondant de ce dernier vous permettront d'obtenir une repr√©sentation graphique des donn√©es de rapport sur l'utilisation des ressources RAM. <br><br><h3>  Interface avec les commandes int√©gr√©es </h3><br>  La collecte d'informations sur les demandes d'application de ressources RAM peut √™tre impl√©ment√©e en compilant et en pla√ßant dans le code source de l'application des macros qui sont compil√©es uniquement lorsque la variable d'environnement correspondante est d√©finie. <br><br><img src="https://habrastorage.org/webt/nb/6c/ie/nb6ciegyancwouzp4dpof6xze60.jpeg"><br><br>  Vous trouverez ci-dessous un morceau de code de programme qui illustre l'utilisation des contr√¥les int√©gr√©s. <br><br><img src="https://habrastorage.org/webt/sm/rr/yf/smrryftloedlfg34d8xk5prxmdq.jpeg"><br><br><img src="https://habrastorage.org/webt/17/mi/gx/17migxgt1yry9lfuzsgv_w3aqzg.jpeg"><br><br><img src="https://habrastorage.org/webt/7o/b_/4u/7ob_4upu0l2-we8lgy7cmrh7-la.jpeg"><br><br>  Ce qui suit est une illustration de l'utilisation des moyens d√©crits du contr√¥le int√©gr√© des ressources RAM demand√©es par l'application <i>'foo'</i> , qui effectue le tra√ßage automatique des connexions sur les cartes de circuits imprim√©s.  Pour l'analyse, un mod√®le suffisamment clair et pratique du m√©andre a √©t√© s√©lectionn√©, qui affiche les dimensions de la m√©moire vive dynamique demand√©e par l'application en train de poser les connexions sur la carte de circuit imprim√©. <br><br><img src="https://habrastorage.org/webt/av/nk/eq/avnkeqdztb8c3qvdsrxu4jbsmjc.jpeg"><br><br>  Ce mod√®le permet d'identifier les probl√®mes suivants de gestion des ressources RAM: <br><br><ul><li>  aux points <b><i>¬´A¬ª</i></b> et <b><i>¬´D¬ª</i></b> doivent avoir approximativement la m√™me taille que la m√©moire RAM utilis√©e </li><li>  l'augmentation de la taille de la m√©moire demand√©e au stade de la pose de la connexion doit √™tre r√©guli√®re.  Si n√©cessaire, les principales √©tapes de cette √©tape doivent √™tre contr√¥l√©es en d√©finissant des points d'arr√™t dans les fragments de code correspondants.  La suppression forc√©e de toutes les donn√©es sur les connexions √©tablies devrait conduire √† la m√™me taille de m√©moire consomm√©e aux points <b><i>¬´B¬ª</i></b> et <b><i>¬´C¬ª</i></b> </li></ul><br>  Le diagramme ci-dessous montre les probl√®mes de gestion de la m√©moire dans l'application <i>'foo'</i> mentionn√©e. <br><br><img src="https://habrastorage.org/webt/ks/nb/s8/ksnbs8r9h4d9ndyk6gi8nmcoafi.jpeg"><br><br><h3>  Br√®ves conclusions </h3><br>  Les moyens de contr√¥le int√©gr√© des ressources RAM d√©crits peuvent √™tre utilis√©s dans les cas o√π les produits logiciels correspondants ne sont pas disponibles et ne sont applicables pour aucune raison. <br><br><ul><li>  Les outils de contr√¥le int√©gr√©s enregistrent et accumulent des informations sur les ressources de la m√©moire demand√©e avec n'importe quel degr√© de pr√©cision et de d√©tail; </li><li>  La possibilit√© de basculer les contr√¥les int√©gr√©s entre les modes actif et inactif vous permet de les configurer pour extraire et analyser les donn√©es dans des fragments s√©lectionn√©s du code du programme d'application; </li><li>  Les contr√¥les int√©gr√©s permettent leur exclusion compl√®te de l'application lors de l'assemblage de cette derni√®re sans d√©finir le param√®tre de compilation appropri√©; </li><li>  La mise en ≈ìuvre d'un programme d'analyse du contenu des rapports re√ßus sur l'application des ressources RAM utilis√©es lors de l'ex√©cution des applications et de v√©rification de ces derni√®res avec des copies de r√©f√©rence permet de d√©velopper des proc√©dures de tests de r√©gression pour les applications afin de d√©tecter la d√©gradation de leur utilisation de la RAM; </li><li>  Le code de programme de ce type de contr√¥le RAM int√©gr√© est ouvert pour √©tendre ses capacit√©s et s'adapter aux conditions particuli√®res de son utilisation; </li><li>  Le principal inconv√©nient des outils d√©crits est la n√©cessit√© d'inclure le code de contr√¥le de la m√©moire int√©gr√©e dans le code de l'application contr√¥l√©e. </li></ul><br>  En conclusion, il convient de noter que l'approche d√©crite pour la mise en ≈ìuvre du contr√¥le int√©gr√© des ressources RAM dans les applications logicielles ne contient pas de solutions radicalement nouvelles.  L'utilit√© de l'approche r√©side dans la simplicit√© de mise en ≈ìuvre et dans une efficacit√© d'application plut√¥t √©lev√©e. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr464919/">https://habr.com/ru/post/fr464919/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr464901/index.html">D√©veloppement du Helpdesk</a></li>
<li><a href="../fr464909/index.html">¬´Ils nous regardent¬ª: ce qui peut arriver dans une mini-fourgonnette discr√®te juste sous votre fen√™tre</a></li>
<li><a href="../fr464913/index.html">"Know kaizen": quelle est cette philosophie pour am√©liorer les processus de production</a></li>
<li><a href="../fr464915/index.html">Optimisation de la r√©cursivit√© de la queue JavaScript</a></li>
<li><a href="../fr464917/index.html">Apr√®s le cyberpunk: ce que vous devez savoir sur les genres actuels de science-fiction moderne</a></li>
<li><a href="../fr464921/index.html">System.IO.Pipelines - un outil peu connu pour les amateurs de hautes performances</a></li>
<li><a href="../fr464925/index.html">Guide vocal UX: situations, mod√®les, outils (et un peu de soutien moral)</a></li>
<li><a href="../fr464927/index.html">Mineur ASIC d'occasion: risques, v√©rification et hashrate rec√¢bl√©</a></li>
<li><a href="../fr464929/index.html">Chargement d'image de navigateur paresseux (attribut de chargement)</a></li>
<li><a href="../fr464931/index.html">Assembleur ins√®re ... en C #?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>