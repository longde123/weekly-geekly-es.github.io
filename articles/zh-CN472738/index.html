<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤µğŸ» ğŸ‘œ ğŸ›ŒğŸ½ å¦‚ä½•å°†ç°æœ‰é¡¹ç›®ä»ASP.NET MVCå‡çº§åˆ°ASP.NET Coreã€‚ å®ç”¨æŒ‡å— â„¢ï¸ ğŸ’… ğŸ˜®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è¿™ç¯‡æ–‡ç« æ˜¯åŸºäºæˆ‘ä»¬å°†ç°æœ‰é¡¹ç›®ä»ASP.NET MVCè¿ç§»åˆ°ASP.NET Coreçš„ç»éªŒè€Œäº§ç”Ÿçš„ã€‚ æˆ‘ä»¬è¯•å›¾ä»¥ç»“æ„åŒ–çš„å½¢å¼æ±‡æ€»æ•´ä¸ªè¿ç§»è¿‡ç¨‹ï¼Œå¹¶æè¿°å„ç§ç“¶é¢ˆï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥ç»§ç»­ä¾é æ­¤ææ–™å¹¶éµå¾ªè§£å†³æ­¤ç±»é—®é¢˜çš„è·¯çº¿å›¾ã€‚ 

 å…³äºæˆ‘ä»¬çš„é¡¹ç›®çš„å‡ å¥è¯ã€‚ æˆ‘ä»¬æ˜¯ASP.NETä¸Šçš„å¼€æºç”µå­å•†åŠ¡å¹³å°ï¼Œåˆ°è½¬è®©ä¹‹æ—¶...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¦‚ä½•å°†ç°æœ‰é¡¹ç›®ä»ASP.NET MVCå‡çº§åˆ°ASP.NET Coreã€‚ å®ç”¨æŒ‡å—</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472738/"> è¿™ç¯‡æ–‡ç« æ˜¯åŸºäºæˆ‘ä»¬å°†ç°æœ‰é¡¹ç›®ä»ASP.NET MVCè¿ç§»åˆ°ASP.NET Coreçš„ç»éªŒè€Œäº§ç”Ÿçš„ã€‚ æˆ‘ä»¬è¯•å›¾ä»¥ç»“æ„åŒ–çš„å½¢å¼æ±‡æ€»æ•´ä¸ªè¿ç§»è¿‡ç¨‹ï¼Œå¹¶æè¿°å„ç§ç“¶é¢ˆï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥ç»§ç»­ä¾é æ­¤ææ–™å¹¶éµå¾ªè§£å†³æ­¤ç±»é—®é¢˜çš„è·¯çº¿å›¾ã€‚ <br><br> å…³äºæˆ‘ä»¬çš„é¡¹ç›®çš„å‡ å¥è¯ã€‚ æˆ‘ä»¬æ˜¯ASP.NETä¸Šçš„å¼€æºç”µå­å•†åŠ¡å¹³å°ï¼Œåˆ°è½¬è®©ä¹‹æ—¶ï¼Œè¯¥å¹³å°å·²ç»æˆåŠŸå­˜åœ¨äº†9å¹´ã€‚ æˆ‘ä»¬åœ¨2å¹´å‰è¿›è¡Œäº†è¿ç§»-ä½†æ˜¯ç›´åˆ°ç°åœ¨æˆ‘ä»¬æ‰å¼€å§‹å†™æœ‰å…³è¿ç§»çš„æ–‡ç« ã€‚ å½“æ—¶ï¼Œæˆ‘ä»¬æ˜¯å†³å®šé‡‡å–è¿™ä¸€æ­¥éª¤çš„é¦–æ‰¹é‡å¤§é¡¹ç›®ä¹‹ä¸€ã€‚ <br><br><h2> ä¸ºä»€ä¹ˆè¦åˆ‡æ¢åˆ°ASP.NET Coreï¼Ÿ </h2><br> åœ¨ç»§ç»­æ‰§è¡Œä»ASP.NET MVCè¿ç§»åˆ°ASP.NET Coreçš„æ­¥éª¤ä¹‹å‰ï¼Œè¯·å…ˆç®€å•ä»‹ç»ä¸€ä¸‹æ­¤å¹³å°çš„å¥½å¤„ã€‚ <br><br><img src="https://habrastorage.org/webt/wo/xg/ue/woxgueorhrjz_brki1qktunkqhe.png"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">ASP.NET Coreçš„å¥½å¤„</b> <div class="spoiler_text">å› æ­¤ï¼ŒASP.NET Coreå·²ç»æ˜¯ä¸€ä¸ªç›¸å½“çŸ¥åçš„å¼€å‘æ¡†æ¶ï¼Œå®ƒå·²ç»è¿›è¡Œäº†å‡ æ¬¡é‡å¤§æ›´æ–°ï¼Œè¿™æ„å‘³ç€ä»Šå¤©å®ƒå·²ç»ç›¸å½“ç¨³å®šï¼ŒæŠ€æœ¯å…ˆè¿›å¹¶ä¸”å¯ä»¥æŠµæŠ—XSRF / CSRFæ”»å‡»ã€‚ <br><br>  <b>è·¨å¹³å°</b>æ˜¯ä½¿ä»–è·å¾—è¶Šæ¥è¶Šå¤šçŸ¥ååº¦çš„æ ‡å¿—ä¹‹ä¸€ã€‚ ä»ç°åœ¨å¼€å§‹ï¼Œæ‚¨çš„Webåº”ç”¨ç¨‹åºå¯ä»¥åœ¨Windowså’ŒUnixç¯å¢ƒä¸­è¿è¡Œã€‚ <br><br>  <b>æ¨¡å—åŒ–</b> -ASP.NET Coreå®Œå…¨ä»¥NuGetè½¯ä»¶åŒ…çš„å½¢å¼æä¾›ï¼Œè¿™ä½¿æ‚¨å¯ä»¥ä¼˜åŒ–åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬æ‰€é€‰çš„å¿…éœ€è½¯ä»¶åŒ…ã€‚ è¿™æ ·å¯ä»¥æé«˜è§£å†³æ–¹æ¡ˆçš„æ€§èƒ½ï¼Œå¹¶å‡å°‘å‡çº§å•ä¸ªé›¶ä»¶æ‰€éœ€çš„æ—¶é—´ã€‚ è¿™æ˜¯ç¬¬äºŒä¸ªé‡è¦åŠŸèƒ½ï¼Œä½¿å¼€å‘äººå‘˜å¯ä»¥æ›´çµæ´»åœ°å°†æ–°åŠŸèƒ½é›†æˆåˆ°ä»–ä»¬çš„è§£å†³æ–¹æ¡ˆä¸­ã€‚ <br><br>  <b>æ€§èƒ½</b>æ˜¯æ„å»ºé«˜æ€§èƒ½åº”ç”¨ç¨‹åºçš„åˆä¸€æ­¥ï¼ŒASP.NET Coreæ¯ç§’å¤„ç†çš„è¯·æ±‚æ¯”ASP.NET 4.6å¤š2300ï¼…ï¼Œæ¯”node.jsæ¯ç§’å¤š800ï¼…ã€‚ æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>æˆ–<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>è‡ªå·±æ£€æŸ¥è¯¦ç»†çš„æ€§èƒ½æµ‹è¯•ã€‚ <br><br><img src="https://habrastorage.org/webt/wb/vg/oi/wbvgoixwdbcfr0m8l0myjywrlpq.png"><br><br>  <b>ä¸­é—´ä»¶</b>æ˜¯é’ˆå¯¹åº”ç”¨ç¨‹åºå†…è¯·æ±‚çš„æ–°å‹è½»é‡çº§é«˜æ€§èƒ½æ¨¡å—åŒ–ç®¡é“ã€‚ æ¯ä¸ªä¸­é—´ä»¶éƒ½å¤„ç†ä¸€ä¸ªHTTPè¯·æ±‚ï¼Œç„¶åå†³å®šè¿”å›ç»“æœï¼Œæˆ–è€…ä¼ é€’ä¸‹ä¸€ä¸ªä¸­é—´ä»¶ã€‚ è¿™ç§æ–¹æ³•ä½¿å¼€å‘äººå‘˜å¯ä»¥å®Œå…¨æ§åˆ¶HTTPç®¡é“ï¼Œå¹¶æœ‰åŠ©äºå¼€å‘åº”ç”¨ç¨‹åºçš„ç®€å•æ¨¡å—ï¼Œè¿™å¯¹äºä¸æ–­å‘å±•çš„å¼€æºé¡¹ç›®å¾ˆé‡è¦ã€‚ <br><br>  ASP.NET Core MVCæä¾›äº†ç®€åŒ–Webå¼€å‘çš„åŠŸèƒ½ã€‚  NopCommerceå·²ç»ä½¿ç”¨äº†è¯¸å¦‚â€œæ¨¡å‹-è§†å›¾-æ§åˆ¶å™¨â€æ¨¡æ¿ï¼ŒRazorè¯­æ³•ï¼Œæ¨¡å‹ç»‘å®šå’ŒéªŒè¯ä¹‹ç±»çš„åŠŸèƒ½ï¼Œä½†æ˜¯å‡ºç°äº†æ–°å·¥å…·ï¼š <br><br><ul><li> æ ‡è®°åŠ©æ‰‹ã€‚ è¿™æ˜¯æœåŠ¡å™¨ç«¯ä»£ç ï¼Œç”¨äºåœ¨Razoræ–‡ä»¶ä¸­åˆ›å»ºå’Œå‘ˆç°HTMLå…ƒç´ ã€‚ </li><li> æŸ¥çœ‹ç»„ä»¶ã€‚ è¿™æ˜¯ä¸€ä¸ªæ–°å·¥å…·ï¼Œç±»ä¼¼äºå±€éƒ¨è§†å›¾ï¼Œä½†åŠŸèƒ½æ›´å¼ºå¤§ã€‚ å½“éœ€è¦é‡ç”¨æ¸²æŸ“é€»è¾‘å¹¶ä¸”ä»»åŠ¡å¯¹äºéƒ¨åˆ†è§†å›¾è€Œè¨€è¿‡äºå¤æ‚æ—¶ï¼ŒnopCommerceä½¿ç”¨è§†å›¾ç»„ä»¶ã€‚ </li><li>  DIçš„è§‚ç‚¹ã€‚ å°½ç®¡è§†å›¾ä¸­æ˜¾ç¤ºçš„å¤§å¤šæ•°æ•°æ®éƒ½æ˜¯ä»æ§åˆ¶å™¨ä¼ é€’çš„ï¼Œä½†nopCommerceçš„è§†å›¾ä¸­çš„ä¾èµ–é¡¹æ³¨å…¥æ›´ä¸ºæ–¹ä¾¿ã€‚ </li></ul><br> å½“ç„¶ï¼ŒASP.NET Coreå…·æœ‰æ›´å¤šåŠŸèƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬åªæ˜¯ç ”ç©¶äº†æœ€æœ‰è¶£çš„åŠŸèƒ½ã€‚ </div></div><br> ç°åœ¨è®©æˆ‘ä»¬è®¨è®ºå°†åº”ç”¨ç¨‹åºç§»æ¤åˆ°æ–°å¹³å°æ—¶åº”è€ƒè™‘çš„äº‹é¡¹ã€‚ <br><br><h2> è¿ç§» </h2><br> æ–‡æœ¬å°†åŒ…å«å¤§é‡æŒ‡å‘ASP.NET Coreå®˜æ–¹æ–‡æ¡£çš„é“¾æ¥ï¼Œä»¥å¸®åŠ©è·å–æœ‰å…³è¯¥ä¸»é¢˜çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ å¯¹äºé¦–æ¬¡é‡åˆ°ç±»ä¼¼ä»»åŠ¡çš„å¼€å‘äººå‘˜å°¤å…¶é‡è¦ã€‚ <br><br><h3> æ­¥éª¤1.å‡†å¤‡å·¥å…· </h3><br> æ‚¨éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å°†Visual Studio 2017å‡çº§åˆ°15.3ç‰ˆæˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ å¹¶å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„.NET Core SDKã€‚ <br><br> å¼€å§‹è¿ç§»ä¹‹å‰ï¼Œå»ºè®®æ‚¨ä½¿ç”¨.NET <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">.Net Portability Analyzer</a>å¯ç§»æ¤æ€§åˆ†æå·¥å…·ã€‚ è¿™æ˜¯äº†è§£ä»ä¸€ä¸ªå¹³å°åˆ°å¦ä¸€ä¸ªå¹³å°çš„è½¬æ¢è¿‡ç¨‹çš„è‰°å·¨èµ·ç‚¹ã€‚ ä½†æ˜¯ï¼Œå½“ç„¶ï¼Œæ­¤å·¥å…·ä¸èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œå¹¶ä¸”åœ¨æ­¤è¿‡ç¨‹ä¸­ä¼šå­˜åœ¨å¾ˆå¤šé™·é˜±ã€‚ æ¥ä¸‹æ¥ï¼Œå°†æè¿°éœ€è¦é€šè¿‡çš„ä¸»è¦é˜¶æ®µï¼Œå¹¶æ˜¾ç¤ºæœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„è§£å†³æ–¹æ¡ˆã€‚ <br><br> æ‚¨éœ€è¦åšçš„ç¬¬ä¸€ä»¶äº‹å°±æ˜¯æ›´æ–°æŒ‡å‘æ”¯æŒ.NET Standardçš„é¡¹ç›®ä¸­ä½¿ç”¨çš„åº“çš„é“¾æ¥ã€‚ <br><br><h3> æ­¥éª¤2.æ”¯æŒ.Net Standardçš„NuGetè½¯ä»¶åŒ…çš„å…¼å®¹æ€§åˆ†æ </h3><br> å¦‚æœåœ¨é¡¹ç›®ä¸­ä½¿ç”¨NuGetè½¯ä»¶åŒ…ï¼Œåˆ™éœ€è¦æ£€æŸ¥å®ƒä»¬æ˜¯å¦ä¸.NET Coreå…¼å®¹ã€‚ ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">NuGetPackageExplorer</a>å·¥å…·ã€‚ <br><br><h3> æ­¥éª¤3..NET Coreä½¿ç”¨æ–°çš„csprojæ–‡ä»¶æ ¼å¼ </h3><br> ä½¿ç”¨æ–°æ–¹æ³•æ·»åŠ .NET Coreä¸­å¼•å…¥çš„ç¬¬ä¸‰æ–¹é“¾æ¥å¾ˆé‡è¦ï¼šå°†æ–°çš„ç±»åº“æ·»åŠ åˆ°è§£å†³æ–¹æ¡ˆæ—¶ï¼Œæ‚¨åº”è¯¥æ‰“å¼€ä¸»é¡¹ç›®æ–‡ä»¶ï¼Œå¹¶å°†å…¶å†…å®¹æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼š <br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Sdk</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.NET.Sdk"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span>netcoreapp2.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TargetFramework</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PropertyGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">PackageReference</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Include</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Microsoft.AspNetCore.App"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2.2.6"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ItemGroup</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br> æ¥è‡ªè¿æ¥çš„åº“çš„é“¾æ¥å°†è‡ªåŠ¨ä¸‹è½½ã€‚ æœ‰å…³project.jsonå’ŒCSPROJå±æ€§ä¹‹é—´æ˜ å°„çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>çš„å®˜æ–¹æ–‡æ¡£ã€‚ <br><br><h3> æ­¥éª¤4.æ›´æ–°åç§°ç©ºé—´ </h3><br> æ‚¨å¿…é¡»åˆ é™¤å¯¹System.Webçš„æ‰€æœ‰ä½¿ç”¨å¹¶å°†å…¶æ›¿æ¢ä¸ºMicrosoft.AspNetCoreã€‚ <br><br><h3> æ­¥éª¤5.æ‚¨å¿…é¡»é…ç½®Startup.csæ–‡ä»¶ã€‚ è€Œä¸æ˜¯ä½¿ç”¨global.asax </h3><br>  ASP.NET Coreå…·æœ‰åŠ è½½åº”ç”¨ç¨‹åºçš„æ–°æœºåˆ¶ã€‚ è¯¥åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹å˜æˆ<code>Startup</code> ï¼Œå¹¶ä¸”å¯¹<i>Global.asax</i>æ–‡ä»¶çš„ä¾èµ–å…³ç³»æ¶ˆå¤±äº†ã€‚  <code>Startup</code>åœ¨åº”ç”¨ç¨‹åºä¸­æ³¨å†Œä¸­é—´ä»¶å¥—ä»¶ã€‚  <code>Startup</code>å¿…é¡»åŒ…æ‹¬<code>Configure</code>æ–¹æ³•ã€‚ åœ¨â€œ <code>Configure</code>å°†æ‰€éœ€çš„ä¸­é—´ä»¶æ·»åŠ åˆ°ç®¡é“ä¸­ã€‚ <br><br>  <b>Startup.csé—®é¢˜</b> <br><br><ol><li> ä¸ºMVCå’ŒWebAPIè¯·æ±‚é…ç½®ä¸­é—´ä»¶ </li><li> çš„é…ç½®è®¾ç½®ï¼š </li></ol><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼‚å¸¸å¤„ç†</a> <br><p> ç”±äºåœ¨è¿‡æ¸¡è¿‡ç¨‹ä¸­ï¼Œæ‚¨ä¸å¯é¿å…åœ°å¿…é¡»å¤„ç†å„ç§å†²çªï¼Œå› æ­¤æ‚¨å¿…é¡»ç«‹å³åœ¨å¼€å‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¯å¢ƒä¸­</a>å‡†å¤‡å’Œè®¾ç½®å¼‚å¸¸å¤„ç†ã€‚ ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">UseDeveloperExceptionPage</a> ï¼Œæ·»åŠ äº†ä¸­é—´ä»¶æ¥æ•è·å¼‚å¸¸ã€‚ </p></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è·¯ç”±MVC</a> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–°è·¯çº¿çš„æ³¨å†Œ</a>ä¹Ÿå·²æ›´æ”¹ã€‚ ç°åœ¨ä½¿ç”¨IRouteBuilderä»£æ›¿RouteCollectionï¼Œåè€…æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ³¨å†Œçº¦æŸ</a>çš„æ–°æ–¹æ³•ï¼ˆIActionConstraintï¼‰ </p></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MVC / WebAPIç­›é€‰å™¨</a> <br><p> æœ‰å¿…è¦æ ¹æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ASP.NET Core</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–°å®ç°</a>é‡å†™ç­›é€‰å™¨ã€‚ </p></li><li>  MVC / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WebAPIæ ¼å¼åŒ–ç¨‹åº</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»‘å®šæ¨¡å‹</a> </li></ul><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//add basic MVC feature var mvcBuilder = services.AddMvc(); //add custom model binder provider (to the top of the provider list) mvcBuilder.AddMvcOptions(options =&gt; options.ModelBinderProviders.Insert(0, new NopModelBinderProvider())); /// &lt;summary&gt; /// Represents model binder provider for the creating NopModelBinder /// &lt;/summary&gt; public class NopModelBinderProvider : IModelBinderProvider { /// &lt;summary&gt; /// Creates a nop model binder based on passed context /// &lt;/summary&gt; /// &lt;param name="context"&gt;Model binder provider context&lt;/param&gt; /// &lt;returns&gt;Model binder&lt;/returns&gt; public IModelBinder GetBinder(ModelBinderProviderContext context) { if (context == null) throw new ArgumentNullException(nameof(context)); var modelType = context.Metadata.ModelType; if (!typeof(BaseNopModel).IsAssignableFrom(modelType)) return null; //use NopModelBinder as a ComplexTypeModelBinder for BaseNopModel if (context.Metadata.IsComplexType &amp;&amp; !context.Metadata.IsCollectionType) { //create binders for all model properties var propertyBinders = context.Metadata.Properties .ToDictionary(modelProperty =&gt; modelProperty, modelProperty =&gt; context.CreateBinder(modelProperty)); return new NopModelBinder(propertyBinders, EngineContext.Current.Resolve&lt;ILoggerFactory&gt;()); } //or return null to further search for a suitable binder return null; } }</span></span></code> </pre> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ°åŒº</a> </li></ul><br><br><pre> <code class="java hljs">app.UseMvc(routes =&gt; { routes.MapRoute(<span class="hljs-string"><span class="hljs-string">"areaRoute"</span></span>, <span class="hljs-string"><span class="hljs-string">"{area:exists}/{controller=Admin}/{action=Index}/{id?}"</span></span>); routes.MapRoute( name: <span class="hljs-string"><span class="hljs-string">"default"</span></span>, template: <span class="hljs-string"><span class="hljs-string">"{controller=Home}/{action=Index}/{id?}"</span></span>); });</code> </pre> <br> åŒæ—¶ï¼Œåº”å°†åç§°ä¸ºAreaçš„æ–‡ä»¶å¤¹ï¼ˆä½äºAdminæ–‡ä»¶å¤¹æ‰€åœ¨çš„æ–‡ä»¶å¤¹ï¼‰æ”¾ç½®åœ¨åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•ä¸­ã€‚ ç°åœ¨ï¼Œ <code>[Area("Admin")] [Route("admin")]</code>å±æ€§å°†ç”¨äºå°†æ§åˆ¶å™¨ä¸æ­¤åŒºåŸŸè¿æ¥ã€‚ <br> ä»…ä¿ç•™ä¸ºæ§åˆ¶å™¨ä¸­æè¿°çš„æ‰€æœ‰æ“ä½œåˆ›å»ºè§†å›¾ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3o/eo/rp/3oeorp_vjlbwlisc1kbavvvaeoe.png"></div><br><pre> <code class="java hljs">[Area(<span class="hljs-string"><span class="hljs-string">"Admin"</span></span>)] [Route(<span class="hljs-string"><span class="hljs-string">"admin"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AdminController</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Controller</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> IActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(); } }</code> </pre> <br>  <b>éªŒè¯æ–¹å¼</b> <br><br> ç°åœ¨ï¼Œæ‚¨æ— éœ€å°†IFormCollectionä¼ é€’ç»™æ§åˆ¶å™¨â€‹â€‹ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œasp.netæœåŠ¡å™¨éªŒè¯å·²ç¦ç”¨-å¦‚æœIFormCollectionä¸ä¸ºnullï¼Œåˆ™MVCå°†ç¦æ­¢è¿›ä¸€æ­¥éªŒè¯ã€‚ è§£å†³é—®é¢˜çš„æ–¹æ³•å¯ä»¥æ˜¯å°†æ­¤å±æ€§æ·»åŠ åˆ°æ¨¡å‹ä¸­ï¼Œè¿™å°†é˜»æ­¢æˆ‘ä»¬ç›´æ¥ä¼ é€’ç»™æ§åˆ¶å™¨â€‹â€‹æ–¹æ³•ã€‚ ä»…å½“å­˜åœ¨æ¨¡å‹æ—¶æ­¤è§„åˆ™æ‰æœ‰æ•ˆï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æ¨¡å‹ï¼Œåˆ™å°†æ²¡æœ‰éªŒè¯ã€‚ <br><br> å­å±æ€§ä¸å†è‡ªåŠ¨éªŒè¯ã€‚ å¿…é¡»æ‰‹åŠ¨æŒ‡å®šã€‚ <br><br><h3> æ­¥éª¤6.å°†HTTPå¤„ç†ç¨‹åºå’ŒHTTPæ¨¡å—ä¼ è¾“åˆ°ä¸­é—´ä»¶ </h3><br>  HTTPå¤„ç†ç¨‹åºå’ŒHTTPæ¨¡å—åœ¨æœ¬è´¨ä¸Šä¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://docs.microsoft.com/ru-ru/aspnet/core/migration/">ASP.NET Coreä¸­</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://docs.microsoft.com/ru-ru/aspnet/core/migration/">ä¸­é—´ä»¶</a>æ¦‚å¿µéå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯ä¸æ¨¡å—ä¸åŒï¼Œä¸­é—´ä»¶é¡ºåºæ˜¯åŸºäºå°†å®ƒä»¬æ’å…¥è¯·æ±‚ç®¡é“çš„é¡ºåºã€‚ åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¨¡å—çš„é¡ºåºåŸºäº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸ</a>äº‹ä»¶ã€‚ ç­”æ¡ˆçš„ä¸­é—´ä»¶é¡ºåºä¸è¯·æ±‚çš„é¡ºåºç›¸åï¼Œè€Œè¯·æ±‚å’Œç­”æ¡ˆçš„æ¨¡å—é¡ºåºç›¸åŒï¼ŒåŸºäºæ­¤ï¼Œæ‚¨å¯ä»¥ç»§ç»­å‡çº§ã€‚ <br><br> å› æ­¤ï¼Œæœ‰å¾…æ›´æ–°çš„å†…å®¹ï¼š <br><br><ul><li> ä¸­é—´ä»¶æ¨¡å—çš„è¿ç§»ï¼ˆAuthenticationMiddlewareï¼ŒCultureMiddlewareç­‰ï¼‰ </li><li> ä¸­é—´ä»¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://docs.microsoft.com/en-us/aspnet/core/migration/">å¤„ç†ç¨‹åº</a> </li><li> ä½¿ç”¨æ–°çš„ä¸­é—´ä»¶ </li></ul><br> æˆ‘ä»¬é¡¹ç›®ä¸­çš„èº«ä»½éªŒè¯æœªä½¿ç”¨å†…ç½®çš„å‡­æ®ç³»ç»Ÿï¼›å‡ºäºè¿™äº›ç›®çš„ï¼Œä½¿ç”¨äº†æ ¹æ®æ–°ASP.NET Coreç»“æ„å¼€å‘çš„ä¸­é—´ä»¶AuthenticationMiddlewareã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AuthenticationMiddleware</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> readonly RequestDelegate _next; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AuthenticationMiddleware</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(IAuthenticationSchemeProvider schemes, RequestDelegate next)</span></span></span><span class="hljs-function"> </span></span>{ Schemes = schemes ?? <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(nameof(schemes)); _next = next ?? <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(nameof(next)); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IAuthenticationSchemeProvider Schemes { get; set; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> async Task </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Invoke</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(HttpContext context)</span></span></span><span class="hljs-function"> </span></span>{ context.Features.Set&lt;IAuthenticationFeature&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AuthenticationFeature { OriginalPath = context.Request.Path, OriginalPathBase = context.Request.PathBase }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> handlers = context.RequestServices.GetRequiredService&lt;IAuthenticationHandlerProvider&gt;(); foreach (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scheme in await Schemes.GetRequestHandlerSchemesAsync()) { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (await handlers.GetHandlerAsync(context, scheme.Name) is IAuthenticationRequestHandler handler &amp;&amp; await handler.HandleRequestAsync()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> { <span class="hljs-comment"><span class="hljs-comment">// ignored } } var defaultAuthenticate = await Schemes.GetDefaultAuthenticateSchemeAsync(); if (defaultAuthenticate != null) { var result = await context.AuthenticateAsync(defaultAuthenticate.Name); if (result?.Principal != null) { context.User = result.Principal; } } await _next(context); } }</span></span></code> </pre> <br>  ASP.NETæä¾›äº†è®¸å¤šåµŒå…¥å¼ä¸­é—´ä»¶ï¼Œæ‚¨å¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒä»¬ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼Œå¼€å‘äººå‘˜<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¯ä»¥åˆ›å»ºè‡ªå·±çš„ä¸­é—´ä»¶</a>å¹¶å°†å…¶æ·»åŠ åˆ°HTTPè¯·æ±‚ç®¡é“ä¸­ã€‚ ä¸ºäº†ç®€åŒ–æ­¤æœºåˆ¶ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªç‰¹æ®Šçš„æ¥å£ï¼Œç°åœ¨è¶³ä»¥åˆ›å»ºä¸€ä¸ªå®ç°è¯¥æ¥å£çš„ç±»ã€‚ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">INopStartup</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Add and configure any of the middleware /// &lt;/summary&gt; /// &lt;param name="services"&gt;Collection of service descriptors&lt;/param&gt; /// &lt;param name="configuration"&gt;Configuration of the application&lt;/param&gt; void ConfigureServices(IServiceCollection services, IConfiguration configuration); /// &lt;summary&gt; /// Configure the using of added middleware /// &lt;/summary&gt; /// &lt;param name="application"&gt;Builder for configuring an application's request pipeline&lt;/param&gt; void Configure(IApplicationBuilder application); /// &lt;summary&gt; /// Gets order of this startup configuration implementation /// &lt;/summary&gt; int Order { get; } }</span></span></code> </pre> <br> æ‚¨å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ å’Œé…ç½®ä¸­é—´ä»¶ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Represents object for the configuring authentication middleware on application startup /// &lt;/summary&gt; public class AuthenticationStartup : INopStartup { /// &lt;summary&gt; /// Add and configure any of the middleware /// &lt;/summary&gt; /// &lt;param name="services"&gt;Collection of service descriptors&lt;/param&gt; /// &lt;param name="configuration"&gt;Configuration of the application&lt;/param&gt; public void ConfigureServices(IServiceCollection services, IConfiguration configuration) { //add data protection services.AddNopDataProtection(); //add authentication services.AddNopAuthentication(); } /// &lt;summary&gt; /// Configure the using of added middleware /// &lt;/summary&gt; /// &lt;param name="application"&gt;Builder for configuring an application's request pipeline&lt;/param&gt; public void Configure(IApplicationBuilder application) { //configure authentication application.UseNopAuthentication(); } /// &lt;summary&gt; /// Gets order of this startup configuration implementation /// &lt;/summary&gt; public int Order =&gt; 500; //authentication should be loaded before MVC }</span></span></code> </pre> <br><h3> æ­¥éª¤7.ä½¿ç”¨é›†æˆDI </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¾èµ–</a>æ³¨å…¥æ˜¯ASP.NET Coreåº”ç”¨ç¨‹åºè®¾è®¡è¿‡ç¨‹ä¸­çš„å…³é”®åŠŸèƒ½ä¹‹ä¸€ã€‚ å®ƒä½¿æ‚¨å¯ä»¥åˆ›å»ºæ¾æ•£è€¦åˆçš„åº”ç”¨ç¨‹åºï¼Œè¿™äº›åº”ç”¨ç¨‹åºæ›´æ˜“äºæµ‹è¯•ï¼Œæ¨¡å—åŒ–å¹¶ä¸”å› æ­¤æ›´æ˜“äºç»´æŠ¤ã€‚ é€šè¿‡éµå¾ªä¾èµ–å€’ç½®çš„åŸç†ï¼Œå¯ä»¥å®ç°è¿™ä¸€ç‚¹ã€‚ è¦å®‰è£…ä¾èµ–é¡¹ï¼Œè¯·ä½¿ç”¨IoCå®¹å™¨ï¼ˆæ§åˆ¶åè½¬ï¼‰ã€‚ åœ¨ASP.NET Coreä¸­ï¼Œè¿™æ ·çš„å®¹å™¨ç”±IServiceProvideræ¥å£è¡¨ç¤ºã€‚ æœåŠ¡é€šè¿‡<code>Startup.ConfigureServices()</code>æ–¹æ³•å®‰è£…åœ¨åº”ç”¨ç¨‹åºä¸­ã€‚ <br><br> ä»»ä½•æ³¨å†Œçš„æœåŠ¡éƒ½å¯ä»¥é…ç½®ä¸‰ä¸ªèŒƒå›´ï¼š <br><br><ul><li> ç¬æ€çš„ </li><li> èŒƒå›´ </li><li> å•èº«äººå£« </li></ul><br><pre> <code class="java hljs">services.AddDbContext&lt;ApplicationDbContext&gt;(options =&gt; options.UseSqlServer(Configuration.GetConnectionString(<span class="hljs-string"><span class="hljs-string">"DefaultConnection"</span></span>))); services.AddSingleton&lt;Isingleton,MySingleton&gt;();</code> </pre> <br><h3> æ­¥éª¤8.ä½¿ç”¨WebAPIé¡¹ç›®å…¼å®¹æ€§Shellï¼ˆShimï¼‰ </h3><br> ä¸ºäº†ç®€åŒ–ç°æœ‰Web APIå®ç°çš„è¿ç§»ï¼Œå»ºè®®ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Microsoft.AspNetCore.Mvc.WebApiCompatShim</a> NuGetåŒ…ã€‚ æ”¯æŒä»¥ä¸‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…¼å®¹åŠŸèƒ½</a> ï¼š <br><br><ul><li> æ·»åŠ ApiControllerç±»å‹ </li><li> å¯ç”¨Web APIæ ·å¼æ¨¡å‹ç»‘å®š </li><li> æ‰©å±•æ¨¡å‹ç»‘å®šï¼Œä»¥ä¾¿æ§åˆ¶å™¨æ“ä½œå¯ä»¥æ¥å—HttpRequestMessageç±»å‹çš„å‚æ•°ã€‚ </li><li> æ·»åŠ æ¶ˆæ¯æ ¼å¼åŒ–ç¨‹åºï¼Œè¯¥æ¶ˆæ¯æ ¼å¼åŒ–ç¨‹åºå…è®¸æ“ä½œè¿”å›HttpResponseMessageç±»å‹çš„ç»“æœ </li></ul><br><pre> <code class="java hljs">services.AddMvc().AddWebApiConventions(); routes.MapWebApiRoute(name: <span class="hljs-string"><span class="hljs-string">"DefaultApi"</span></span>, template: <span class="hljs-string"><span class="hljs-string">"api/{controller}/{id?}"</span></span> );</code> </pre> <br><h3> æ­¥éª¤9.ä¼ è¾“åº”ç”¨ç¨‹åºé…ç½® </h3><br> ä»¥å‰ï¼Œä¸€äº›è®¾ç½®ä¿å­˜åœ¨web.configæ–‡ä»¶ä¸­ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬æ­£åœ¨åŸºäº<i>é…ç½®æä¾›è€…</i>å»ºç«‹çš„é”®å€¼å¯¹é‡‡å–ä¸€ç§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–°æ–¹æ³•</a> ã€‚ è¿™æ˜¯ASP.NET Coreä¸­æ¨èçš„æœºåˆ¶ï¼Œæˆ‘ä»¬ä½¿ç”¨appsettings.jsonæ–‡ä»¶ã€‚ <br><br> å¦‚æœå‡ºäºæŸäº›åŸå› è¦ç»§ç»­ä½¿ç”¨* .configï¼Œåˆ™ä¹Ÿå¯ä»¥ä½¿ç”¨NuGetåŒ…<code>System.Configuration.ConfigurationManager</code> ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å°†ä¸å¾—ä¸æ”¾å¼ƒåœ¨Unixå¹³å°ä¸Šè¿è¡Œè¯¥åº”ç”¨ç¨‹åºçš„åŠŸèƒ½ï¼Œè€Œåªèƒ½åœ¨IISä¸‹è¿è¡Œå®ƒã€‚ <br><br> å¦‚æœè¦ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Azure Key Vault</a>é…ç½®æä¾›ç¨‹åºï¼Œåˆ™åº”å‚è€ƒâ€œå†…å®¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿ç§»åˆ°Azure Key Valutå†…å®¹â€</a> ã€‚ åœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œè¿™ä¸æ˜¯ä»»åŠ¡ã€‚ <br><br><h3> æ­¥éª¤10.å°†é™æ€å†…å®¹ä¼ è¾“åˆ°wwwroot </h3><br> è¦æä¾›<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é™æ€å†…å®¹ï¼Œ</a>æ‚¨å¿…é¡»å‘Šè¯‰Webä¸»æœºå½“å‰ç›®å½•å†…å®¹çš„æ ¹ã€‚ é»˜è®¤å€¼ä¸ºwwwrootã€‚ æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®ä¸­é—´ä»¶æ¥è‡ªå®šä¹‰ç›®å½•ä»¥å­˜å‚¨é™æ€æ–‡ä»¶ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/b7/z1/s7/b7z1s7pkzbd2yrkqukxcfholuus.png"></div><br><br><h3> æ­¥éª¤11.å°†EntityFrameworkç§»æ¤åˆ°EF Core </h3><br> å¦‚æœé¡¹ç›®ä½¿ç”¨äº†<code>EF Core</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸æ”¯æŒ</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çš„Entity Framework 6çš„</a>æŸäº›ç‰¹å®š<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åŠŸèƒ½</a> ï¼Œåˆ™å¯ä»¥åœ¨<code>NET Framework</code>ä¸Šè¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚ ä½†æ˜¯ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨å¿…é¡»ç‰ºç‰²å¤šå¹³å°ã€‚ è¯¥åº”ç”¨ç¨‹åºåªèƒ½åœ¨Windowså’ŒIISä¸‹è¿è¡Œã€‚ <br><br>  <b>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¦è€ƒè™‘çš„ä¸»è¦å˜åŒ–ï¼š</b> <br><br><ul><li>  System.Data.Entityå‘½åç©ºé—´æ›¿æ¢ä¸ºMicrosoft.EntityFrameworkCore </li><li>  DbContextæ„é€ å‡½æ•°çš„ç­¾åå·²æ›´æ”¹ã€‚ ç°åœ¨æ‚¨éœ€è¦æ³¨å…¥DbContextOptions </li><li>  HasDatabaseGeneratedOptionï¼ˆDatabaseGeneratedOption.Noneï¼‰æ–¹æ³•æ›¿æ¢ä¸ºValueGeneratedNeverï¼ˆï¼‰ </li><li>  WillCascadeOnDeleteï¼ˆfalseï¼‰æ–¹æ³•æ›¿æ¢ä¸ºOnDeleteï¼ˆDeleteBehavior.Restrictï¼‰ </li><li> è¢«OnModelCreatingï¼ˆModelBuilder modelBuilderï¼‰å–ä»£çš„OnModelCreatingï¼ˆDbModelBuilder modelBuilderï¼‰æ–¹æ³• </li><li>  HasOptionalæ–¹æ³•ä¸å†å¯ç”¨ </li><li> å¯¹è±¡çš„é…ç½®å·²æ›´æ”¹ï¼Œç°åœ¨æ‚¨éœ€è¦ä½¿ç”¨OnModelCreatingï¼Œå› ä¸º  EntityTypeConfigurationä¸å†å¯ç”¨ </li><li>  ComplexTypeå±æ€§ä¸å†å¯ç”¨ </li><li> ç”¨DbSetæ›¿æ¢IDbSetæ¥å£ </li><li>  ComplexType-å¤æ‚ç±»å‹æ”¯æŒåœ¨EF Core 2ä¸­ä»¥æ‹¥æœ‰çš„å®ä½“ç±»å‹ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://docs.microsoft.com/en-us/ef/core/modeling/owned-entities</a> ï¼‰å‡ºç°ï¼Œå¹¶ä¸”åœ¨EF Coreä¸­æ²¡æœ‰å¸¦æœ‰QueryTypeçš„ä¸»é”®çš„è¡¨2.1ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">https://docs.microsoft.com/zh-cn/ef/core/modeling/query-types</a> ï¼‰ </li><li> ä¸ä½¿ç”¨[Entity] _Idæ¨¡å¼çš„EF6ä¸åŒï¼ŒEF Coreä¸­çš„å¤–é”®ä½¿ç”¨[Entity] IDæ¨¡å¼ç”Ÿæˆ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é˜´å½±å±æ€§</a> ã€‚ å› æ­¤ï¼Œé¦–å…ˆå°†å¤–é”®ä½œä¸ºå¸¸è§„å±æ€§æ·»åŠ åˆ°å®ä½“ã€‚ </li><li> è¦ä¸ºDbContextæ”¯æŒDIï¼Œè¯·åœ¨<code>ConfigureServices</code>ä¸­<code>ConfigureServices</code> DbContex </li></ul><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Register base object context /// &lt;/summary&gt; /// &lt;param name="services"&gt;Collection of service descriptors&lt;/param&gt; public static void AddNopObjectContext(this IServiceCollection services) { services.AddDbContextPool&lt;NopObjectContext&gt;(optionsBuilder =&gt; { optionsBuilder.UseSqlServerWithLazyLoading(services); }); } /// &lt;summary&gt; /// SQL Server specific extension method for Microsoft.EntityFrameworkCore.DbContextOptionsBuilder /// &lt;/summary&gt; /// &lt;param name="optionsBuilder"&gt;Database context options builder&lt;/param&gt; /// &lt;param name="services"&gt;Collection of service descriptors&lt;/param&gt; public static void UseSqlServerWithLazyLoading(this DbContextOptionsBuilder optionsBuilder, IServiceCollection services) { var nopConfig = services.BuildServiceProvider().GetRequiredService&lt;NopConfig&gt;(); var dataSettings = DataSettingsManager.LoadSettings(); if (!dataSettings?.IsValid ?? true) return; var dbContextOptionsBuilder = optionsBuilder.UseLazyLoadingProxies(); if (nopConfig.UseRowNumberForPaging) dbContextOptionsBuilder.UseSqlServer(dataSettings.DataConnectionString, option =&gt; option.UseRowNumberForPaging()); else dbContextOptionsBuilder.UseSqlServer(dataSettings.DataConnectionString); }</span></span></code> </pre><br> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SQLæ¯”è¾ƒ</a>å·¥å…·æ¥éªŒè¯<code>EF Core</code>åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿ç§»</a>æœŸé—´æ˜¯å¦ç”Ÿæˆäº†ä¸<code>Entity Framework</code>ç±»ä¼¼çš„æ•°æ®åº“æ¶æ„ã€‚ <br><br><h3> æ­¥éª¤12.åˆ é™¤æ‰€æœ‰HttpContextå¼•ç”¨ï¼Œæ›¿æ¢è¿‡æ—¶çš„ç±»ï¼Œå¹¶æ›´æ”¹åç§°ç©ºé—´ </h3><br> åœ¨é¡¹ç›®è¿ç§»æœŸé—´ï¼Œæ‚¨ä¼šå‘ç°å·²é‡å‘½åæˆ–ç§»åŠ¨äº†è¶³å¤Ÿå¤šçš„ç±»ï¼Œç°åœ¨æ‚¨éœ€è¦ä½¿æ‰€æœ‰å†…å®¹ä¸æ–°è¦æ±‚ä¿æŒä¸€è‡´ã€‚ è¿™æ˜¯æ‚¨å¯èƒ½ä¼šé‡åˆ°çš„ä¸»è¦è¿‡æ¸¡çš„åˆ—è¡¨ï¼š <br><br><ul><li>  HttpPostedFileBase-&gt; IFormFile </li><li> ç°åœ¨å¯ä»¥é€šè¿‡IHttpContextAccessorè®¿é—®HttpContextã€‚ </li><li>  HtmlHelper-&gt; IHtmlHelper </li><li>  ActionResult-&gt; IActionResult </li><li>  HttpUtility-&gt; WebUtility </li><li> å¯ä»¥ä»HttpContext.Sessionè®¿é—®ISessionè€Œä¸æ˜¯HttpSessionStateBaseã€‚ æ¥è‡ªMicrosoft.AspNetCore.Http </li><li>  Request.Cookiesè¿”å›IRequestCookieCollectionï¼šIEnumerable &lt;KeyValuePair &lt;å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²&gt;&gt;ï¼Œæ‰€ä»¥ä¸æ˜¯Microsoft.AspNetCore.Httpçš„HttpCookieï¼ŒKeyValuePair &lt;å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²&gt; </li></ul><br> å‘½åç©ºé—´æ›¿æ¢ï¼š <br><br><ul><li>  SelectList-&gt; Microsoft.AspNetCore.Mvc.Rendering </li><li>  UrlHelper-&gt; WebUtitlity </li><li>  MimeMapping-&gt; FileExtensionContentTypeProvider </li><li>  MvcHtmlString-&gt; IHtmlStringå’ŒHtmlString </li><li>  ModelStateï¼ŒModelStateDictionaryï¼ŒModelError-&gt; Microsoft.AspNetCore.Mvc.ModelBinding </li><li>  FormCollection-&gt; IFormCollection </li><li>  Request.Url.Scheme-&gt; this.Url.ActionContext.HttpContext.Request.Scheme </li></ul><br> å…¶ä»–ï¼š <br><br><ul><li>  MvcHtmlString.IsNullOrEmptyï¼ˆIHtmlStringï¼‰-&gt; String.IsNullOrEmptyï¼ˆvariable.ToHtmlStringï¼ˆï¼‰ï¼‰ </li><li>  [ValidateInputï¼ˆfalseï¼‰]-é€šå¸¸ä¸å†ä½¿ç”¨ï¼Œä¸éœ€è¦ </li><li>  HttpUnauthorizedResult-&gt; UnauthorizedResult </li><li>  [AllowHtml]-æ²¡æœ‰æ›´å¤šçš„æŒ‡ä»¤ï¼Œä¹Ÿä¸éœ€è¦ </li><li>  TagBuilder.SetInnerTextæ–¹æ³•å·²æ›¿æ¢-ç°åœ¨æ˜¯InnerHtml.AppendHtml </li><li> è¿”å›Jsonæ—¶ä¸å†éœ€è¦JsonRequestBehavior.AllowGet </li><li>  HttpUtility.JavaScriptStringEncodeã€‚  -&gt; JavaScriptEncoder.Default.Encode </li><li>  Request.RawUrlã€‚ æœ‰å¿…è¦åˆ†åˆ«è¿æ¥Request.Path + Request.QueryString </li><li>  AllowHtmlAttribute-æ²¡æœ‰æ›´å¤šçš„ç±» </li><li>  XmlDownloadResult-ç°åœ¨æ‚¨å¯ä»¥ä½¿ç”¨è¿”å›çš„æ–‡ä»¶ï¼ˆEncoding.UTF8.GetBytesï¼ˆxmlï¼‰ï¼Œâ€œ application / xmlâ€ï¼Œâ€œ filename.xmlâ€ï¼‰ï¼› </li><li>  [ValidateInputï¼ˆfalseï¼‰]-ä¸å†æœ‰æŒ‡ä»¤ï¼Œå› æ­¤ä¸éœ€è¦ </li></ul><br><h3> æ­¥éª¤13.æ›´æ–°èº«ä»½éªŒè¯å’Œæˆæƒ </h3><br> æˆ‘å·²ç»åœ¨ä¸Šé¢å†™è¿‡ï¼Œåœ¨æˆ‘ä»¬çš„é¡¹ç›®ä¸­ï¼Œèº«ä»½éªŒè¯ä¸æ˜¯ä½¿ç”¨å†…ç½®çš„èº«ä»½ç³»ç»Ÿæ¥å®ç°çš„ï¼Œè€Œæ˜¯åœ¨å•ç‹¬çš„ä¸­é—´ä»¶å±‚ä¸­è¿›è¡Œçš„ã€‚ ä½†æ˜¯ï¼ŒASP.NET Coreå…·æœ‰è‡ªå·±çš„æä¾›å‡­æ®çš„æœºåˆ¶ã€‚ å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ­¤å¤„</a>çš„æ–‡æ¡£ä¸­æ‰¾åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ <br><br> è‡³äºæ•°æ®ä¿æŠ¤-æˆ‘ä»¬ä¸å†ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">MachineKey</a> ã€‚ ç›¸åï¼Œæˆ‘ä»¬ä½¿ç”¨å†…ç½®çš„æ•°æ®ä¿æŠ¤åŠŸèƒ½ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œå¯åŠ¨åº”ç”¨ç¨‹åºæ—¶ä¼šç”Ÿæˆå¯†é’¥ã€‚ æ•°æ®ä»“åº“å¯ä»¥æ˜¯ï¼š <br><br><ul><li> æ–‡ä»¶ç³»ç»Ÿ-åŸºäºæ–‡ä»¶ç³»ç»Ÿçš„å¯†é’¥åº“ </li><li>  Azureå­˜å‚¨-Azure Blobå­˜å‚¨ä¸­çš„æ•°æ®ä¿æŠ¤å¯†é’¥ </li><li>  Redis-Redisç¼“å­˜ä¸­çš„æ•°æ®ä¿æŠ¤å¯†é’¥ </li><li> æ³¨å†Œè¡¨-å¦‚æœåº”ç”¨ç¨‹åºæ— æƒè®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œåˆ™å¿…é¡»ä½¿ç”¨æ³¨å†Œè¡¨ </li><li>  EF Core-å¯†é’¥å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ </li></ul><br> å¦‚æœå†…ç½®æœºåˆ¶ä¸åˆé€‚ï¼Œåˆ™å¯ä»¥é€šè¿‡æä¾›è‡ªå®šä¹‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IXmlRepository</a>æ¥æŒ‡å®šè‡ªå·±çš„å¯†é’¥å­˜å‚¨æœºåˆ¶ã€‚ <br><br><h3> æ­¥éª¤14.æ›´æ–°JS / CSS </h3><br> é™æ€èµ„æºçš„ä½¿ç”¨æ–¹å¼å·²æ›´æ”¹ï¼šç°åœ¨ï¼Œæ‰€æœ‰è¿™äº›èµ„æºéƒ½åº”å­˜å‚¨åœ¨<i>wwwroot</i>é¡¹ç›®çš„æ ¹æ–‡ä»¶å¤¹ä¸­ï¼Œé™¤éæŒ‡å®šäº†å…¶ä»–è®¾ç½®ã€‚ <br><br> ä½¿ç”¨javascriptå†…ç½®å—æ—¶ï¼Œå»ºè®®å°†å…¶ç§»è‡³é¡µé¢æœ«å°¾ã€‚ åªéœ€å¯¹æ ‡ç­¾ä½¿ç”¨asp-location =â€œ Footerâ€å±æ€§ã€‚ ç›¸åŒçš„è§„åˆ™é€‚ç”¨äºjsæ–‡ä»¶ã€‚ <br><br> ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">BundlerMinifier</a>æ‰©å±•åæ›¿ä»£System.Web.Optimization-è¿™å°†ä½¿æ‚¨åœ¨æ„å»ºé¡¹ç›®æ—¶ç»‘å®šå¹¶æœ€å°åŒ–JavaScriptå’ŒCSSã€‚  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥</a>åˆ°æ–‡æ¡£ã€‚ <br><br><h3> æ­¥éª¤15.è¿ç§»è§†å›¾ </h3><br> ä¸å†ä½¿ç”¨å­æ“ä½œã€‚ ç›¸åï¼ŒASP.NET Coreæä¾›äº†ä¸€ä¸ªæ–°çš„å¼ºå¤§å·¥å…·<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">-ViewComponents</a> ï¼Œè¯¥å·¥å…·è¢«å¼‚æ­¥è°ƒç”¨ã€‚ <br><br> å¦‚ä½•ä»ViewComponentè·å–å­—ç¬¦ä¸²ï¼š <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Render component to string /// &lt;/summary&gt; /// &lt;param name="componentName"&gt;Component name&lt;/param&gt; /// &lt;param name="arguments"&gt;Arguments&lt;/param&gt; /// &lt;returns&gt;Result&lt;/returns&gt; protected virtual string RenderViewComponentToString(string componentName, object arguments = null) { if (string.IsNullOrEmpty(componentName)) throw new ArgumentNullException(nameof(componentName)); var actionContextAccessor = HttpContext.RequestServices.GetService(typeof(IActionContextAccessor)) as IActionContextAccessor; if (actionContextAccessor == null) throw new Exception("IActionContextAccessor cannot be resolved"); var context = actionContextAccessor.ActionContext; var viewComponentResult = ViewComponent(componentName, arguments); var viewData = ViewData; if (viewData == null) { throw new NotImplementedException(); } var tempData = TempData; if (tempData == null) { throw new NotImplementedException(); } using (var writer = new StringWriter()) { var viewContext = new ViewContext( context, NullView.Instance, viewData, tempData, writer, new HtmlHelperOptions()); // IViewComponentHelper is stateful, we want to make sure to retrieve it every time we need it. var viewComponentHelper = context.HttpContext.RequestServices.GetRequiredService&lt;IViewComponentHelper&gt;(); (viewComponentHelper as IViewContextAware)?.Contextualize(viewContext); var result = viewComponentResult.ViewComponentType == null ? viewComponentHelper.InvokeAsync(viewComponentResult.ViewComponentName, viewComponentResult.Arguments): viewComponentHelper.InvokeAsync(viewComponentResult.ViewComponentType, viewComponentResult.Arguments); result.Result.WriteTo(writer, HtmlEncoder.Default); return writer.ToString(); } }</span></span></code> </pre> <br> ä¸å†éœ€è¦ä½¿ç”¨HtmlHelper-ASP.NET Coreå…·æœ‰å¤§é‡å†…ç½®çš„å¸®åŠ©ç¨‹åºæ ‡è®°åŠŸèƒ½ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Tag Helpers</a> ï¼‰ã€‚ å½“åº”ç”¨ç¨‹åºè¿è¡Œæ—¶ï¼Œå®ƒä»¬ç”±æœåŠ¡å™¨ç«¯çš„Razorå¼•æ“å¤„ç†ï¼Œå¹¶æœ€ç»ˆè½¬æ¢ä¸ºæ ‡å‡†htmlå…ƒç´ ã€‚ è¿™å¤§å¤§ç®€åŒ–äº†åº”ç”¨ç¨‹åºå¼€å‘ã€‚ è€Œä¸”ï¼Œå½“ç„¶ï¼Œæ‚¨å¯ä»¥å®ç°è‡ªå·±çš„æ ‡è®°åŠ©æ‰‹ã€‚ <br><br> æˆ‘ä»¬å¼€å§‹åœ¨è§†å›¾ä¸­ä½¿ç”¨ä¾èµ–é¡¹æ³¨å…¥ï¼Œè€Œä¸æ˜¯ä½¿ç”¨<code>EngineContext</code>å…è®¸è®¾ç½®å’ŒæœåŠ¡ã€‚ <br><br> å› æ­¤ï¼Œå…³äºè§†å›¾è¿ç§»çš„è¦ç‚¹ï¼š <br><br><ul><li> å°†<code>Views/web.config  Views/_ViewImports.cshtml</code>è½¬æ¢<code>Views/web.config  Views/_ViewImports.cshtml</code>ç”¨äºå¯¼å…¥åç§°ç©ºé—´å’Œ<code>Views/web.config  Views/_ViewImports.cshtml</code>ä¾èµ–é¡¹ã€‚ è¯¥æ–‡ä»¶ä¸æ”¯æŒå…¶ä»–<code>Razor</code>åŠŸèƒ½ï¼Œä¾‹å¦‚åŠŸèƒ½å’ŒèŠ‚å®šä¹‰ã€‚ </li><li> å°†<code>namespaces.add</code>è½¬æ¢ä¸º<code>@using</code> </li><li> å°†æ‰€æœ‰è®¾ç½®è½¬ç§»åˆ°ä¸»åº”ç”¨ç¨‹åºé…ç½® </li><li>  <code>Scripts.Render</code>å’Œ<code>Styles.Render</code>ä¸å­˜åœ¨ã€‚ ç”¨è¾“å‡ºé“¾æ¥æ›¿æ¢<code>libman</code>æˆ–<code>BundlerMinifier</code> </li></ul><br><h2> æ€»ç»“ </h2><br> ä»æˆ‘ä»¬çš„ç»éªŒä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿ç§»å¤§å‹Webåº”ç”¨ç¨‹åºçš„è¿‡ç¨‹éå¸¸è€—æ—¶ï¼Œå¦‚æœæ²¡æœ‰é™·é˜±å°±å¾ˆéš¾æ‰§è¡Œã€‚ æˆ‘ä»¬è®¡åˆ’åœ¨ç¬¬ä¸€ä¸ªç¨³å®šç‰ˆæœ¬å‘å¸ƒåç«‹å³åˆ‡æ¢åˆ°æ–°æ¡†æ¶ï¼Œä½†æ˜¯æˆ‘ä»¬æ— æ³•ç«‹å³å®Œæˆå®ƒï¼šåˆ°é‚£æ—¶ï¼Œä¸€äº›å…³é”®åŠŸèƒ½å°šæœªè½¬ç§»åˆ°.NET Coreï¼Œå°¤å…¶æ˜¯ä¸EntityFrameworkç›¸å…³çš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆä½¿ç”¨æ··åˆæ–¹æ³•å‘å¸ƒä¸‹ä¸€ä¸ªç‰ˆæœ¬-å…·æœ‰.NET Frameworkä¾èµ–é¡¹çš„.NET Coreä½“ç³»ç»“æ„ã€‚ <br><br>  .NET Core 2.1å‘è¡Œåï¼Œæˆ‘ä»¬èƒ½å¤Ÿå®Œå…¨é€‚åº”è¯¥é¡¹ç›®ï¼Œå½“æ—¶æœ‰ä¸€ä¸ªç¨³å®šçš„è§£å†³æ–¹æ¡ˆå·²åœ¨æ–°æ¶æ„ä¸Šå·¥ä½œ-å‰©ä¸‹çš„å°±æ˜¯æ›¿æ¢ä¸€äº›è½¯ä»¶åŒ…å¹¶ç”¨EF Coreé‡å†™å·¥ä½œã€‚ å› æ­¤ï¼Œå®Œå…¨è¿ç§»åˆ°æ–°æ¡†æ¶éœ€è¦èŠ±è´¹å‡ ä¸ªæœˆçš„æ—¶é—´ã€‚ <br><br> æ‚¨å¯ä»¥ä»<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">GitHubä¸Š</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å­˜å‚¨åº“ä¸­</a>äº†è§£æœ‰å…³æˆ‘ä»¬é¡¹ç›®çš„æ›´å¤šä¿¡æ¯ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN472738/">https://habr.com/ru/post/zh-CN472738/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN472720/index.html">ERPä¸èµ·ä½œç”¨...æœ‰ä»€ä¹ˆæ›¿ä»£æ–¹æ³•ï¼Ÿ æˆ–å‡†æ—¶ã€‚ å¯¹äºä¿„ç½—æ–¯ï¼Ÿ</a></li>
<li><a href="../zh-CN472724/index.html">skydive.networkç®€ä»‹</a></li>
<li><a href="../zh-CN472726/index.html">Arduinoå™ªå£°æŠ—æ‰°åº¦å¢å¼º</a></li>
<li><a href="../zh-CN472730/index.html">ä¼Šå‡¡è¯ºæ²ƒï¼ Mitapçºªå¿µNode.jsåå‘¨å¹´</a></li>
<li><a href="../zh-CN472736/index.html">å¼€æ”¾å¼ç½‘ç»œç ”è®¨ä¼šâ€œåœ¨Seleniumå’ŒAppiumä¸Šæµ‹è¯•ç§»åŠ¨åº”ç”¨ç¨‹åºè‡ªåŠ¨åŒ–çš„ç®€ä»‹â€</a></li>
<li><a href="../zh-CN472744/index.html">MRPä¸èµ·ä½œç”¨...æœ‰ä»€ä¹ˆæ›¿ä»£æ–¹æ³•ï¼Ÿ</a></li>
<li><a href="../zh-CN472746/index.html">ç®¡ç†å‘˜ç»ˆç«¯æœåŠ¡å™¨ï¼› SSHå·®è·ä¸å¤§</a></li>
<li><a href="../zh-CN472748/index.html">è¯­ä¹‰æµè§ˆå™¨æˆ–æ²¡æœ‰ç½‘ç«™çš„ç”Ÿæ´»</a></li>
<li><a href="../zh-CN472750/index.html">å¥½å§ï¼Œæˆ‘çœŸçš„éœ€è¦Kuberneteså—ï¼Ÿ</a></li>
<li><a href="../zh-CN472752/index.html">CSEï¼šé€‚ç”¨äºvCloudä¸­ä»»ä½•äººçš„Kubernetes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>