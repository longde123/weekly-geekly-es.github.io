<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëéüèΩ üßôüèΩ üë®‚Äçüë®‚Äçüëß‚Äçüëß Multimodularit√© et poignard 2. Conf√©rence Yandex üéÖ üîÄ üë®üèΩ‚Äçüéì</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lorsque votre application est construite sur une architecture multi-modules, vous devez consacrer beaucoup de temps √† vous assurer que toutes les comm...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Multimodularit√© et poignard 2. Conf√©rence Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/419295/">  Lorsque votre application est construite sur une architecture multi-modules, vous devez consacrer beaucoup de temps √† vous assurer que toutes les communications entre les modules sont correctement √©crites dans le code.  La moiti√© de ce travail peut √™tre confi√©e au framework Dagger 2. Le chef du groupe Yandex.Map pour Android, Vladimir Tagakov <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Noxa, a</a> parl√© des avantages et des inconv√©nients de la multi- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">modularit√©</a> et de l'organisation pratique de la DI √† l'int√©rieur des modules √† l'aide de Dagger 2. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/pMEAD6jjbaI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Je m'appelle Vladimir, je d√©veloppe Yandex.Maps et aujourd'hui je vais vous parler de la modularit√© et du second Dagger. <a name="habracut"></a><br><br>  J'ai compris la partie la plus longue lorsque je l'ai √©tudi√©e moi-m√™me, la plus rapide.  La deuxi√®me partie, sur laquelle j'ai si√©g√© pendant plusieurs semaines, je vais vous en parler tr√®s rapidement et de mani√®re concise. <br><br><img src="https://habrastorage.org/webt/t5/2r/s5/t52rs5gcestw_7jvexuardxaaus.jpeg"><br><br>  Pourquoi avons-nous commenc√© un processus difficile de division en modules dans Maps?  Nous voulions juste augmenter la vitesse de construction, tout le monde le sait. <br><br>  Le deuxi√®me point de l'objectif est de r√©duire l'accrochage au code.  J'ai pris l'√©quipement de Wikip√©dia.  Cela signifie que nous voulions r√©duire les interconnexions entre les modules afin que les modules soient s√©par√©s et puissent √™tre utilis√©s en dehors de l'application.  √ânonc√© initial du probl√®me: les autres projets Yandex devraient pouvoir utiliser une partie des fonctionnalit√©s de Maps exactement comme nous.  Et pour d√©velopper cette fonctionnalit√©, nous nous sommes engag√©s dans le d√©veloppement du projet. <br><br>  Je veux lancer une pantoufle br√ªlante vers [k] apt, ce qui ralentit la vitesse d'assemblage.  Je ne le d√©teste pas beaucoup, mais je l'aime beaucoup.  Il me laisse utiliser Dagger. <br><br><img src="https://habrastorage.org/webt/9c/bz/iv/9cbzivba2osslltalebrdwqfsre.jpeg"><br><br>  Le principal inconv√©nient du processus de s√©paration des modules est, paradoxalement, le ralentissement de la vitesse d'assemblage.  Surtout au tout d√©but, lorsque vous retirez les deux premiers modules, Common et certaines de vos fonctionnalit√©s, la vitesse de construction globale du projet diminue, peu importe comment vous essayez.  Au final, comme il reste moins de code dans votre module principal, la vitesse de construction augmentera.  Et encore, cela ne signifie pas que tout est tr√®s mauvais, il existe des moyens de contourner cela et m√™me de tirer profit du premier module. <br><br>  Le deuxi√®me inconv√©nient est qu'il est difficile de s√©parer le code en modules.  Qui a essay√©, sait que vous commencez √† tirer une sorte de d√©pendances, quelques classiques, et tout cela finit par copier votre module principal entier dans un autre module et recommencer.  Par cons√©quent, vous devez comprendre clairement le moment o√π vous devez arr√™ter et rompre la connexion √† l'aide d'une sorte d'abstraction.  L'inconv√©nient est plus d'abstractions.  Plus d'abstractions - conception plus complexe - plus d'abstractions. <br><br>  Il est difficile d'ajouter de nouveaux modules Gradle.  Pourquoi?  Par exemple, un d√©veloppeur arrive, prend une nouvelle fonctionnalit√© en d√©veloppement, fait imm√©diatement bien, cr√©e un module s√©par√©.  Quel est le probl√®me?  Il doit se souvenir de tout le code disponible, qui se trouve dans le module principal, afin que, le cas √©ch√©ant, le r√©utiliser et le mettre en commun.  Parce que le processus de retrait d'un module en commun est constant jusqu'√† ce que votre module d'application principal se transforme en une couche mince. <br><br>  Modules, modules, modules ... Les modules Gradle, les modules Dagger, les modules d'interface sont horribles. <br><br><img src="https://habrastorage.org/webt/2b/nj/x2/2bnjx25ooi8xw2exdinm5yfmmys.jpeg"><br><br>  Le rapport comprendra trois parties: petite, grande et complexe.  Tout d'abord, la diff√©rence entre l'impl√©mentation et l'API dans AGP.  Android Gradle Plugin 3.0 est apparu relativement r√©cemment.  Comment √©tait tout avant lui? <br><br><img src="https://habrastorage.org/webt/qc/oa/fw/qcoafwzux6royjdv11tr0sqvmug.jpeg"><br><br>  Voici un projet typique d'un d√©veloppeur sain, compos√© de trois modules: le module App, qui est le principal, est assembl√© et install√© dans l'application, et deux modules Feature. <br><br>  Parlez imm√©diatement des fl√®ches.  C'est une grande douleur, tout le monde dessine dans la direction dans laquelle il lui convient de dessiner.  Pour moi, cela signifie que depuis Core, il y a une fl√®che vers Feature.  Donc, Feature conna√Æt Core, peut utiliser des classes de Core.  Comme vous pouvez le voir, il n'y a pas de fl√®che entre le Core et l'application, ce qui signifie que l'application ne semble pas utiliser Core.  Le noyau n'est pas un module commun, il l'est, tout le monde en d√©pend, il est s√©par√©, il contient peu de code.  Bien que nous n'en tiendrons pas compte. <br><br>  Notre module principal a chang√©, nous devons le refaire en quelque sorte.  Nous y changeons le code.  Couleur jaune - changement de code. <br><br><img src="https://habrastorage.org/webt/l4/b1/5w/l4b15wdqsgukdttudzee9vbxne0.jpeg"><br><br>  Apr√®s avoir remont√© le projet.  Il est clair qu'apr√®s avoir chang√© un module, il devra √™tre reconstruit, recompil√©.  Ok <br><br><img src="https://habrastorage.org/webt/_q/jo/mh/_qjomhp4-vkpioy_0ai112zuam0.jpeg"><br><br>  Une fois que le module Feature est √©galement assembl√©, cela en d√©pend.  C'est aussi clair, sa d√©pendance s'est r√©assembl√©e, et vous devez vous mettre √† jour.  Qui sait ce qui a chang√© l√†-bas. <br><br>  Et ici, la chose la plus d√©sagr√©able se produit.  Le module App va, mais on ne sait pas pourquoi.  Je sais avec certitude que je n'utilise Core d'aucune fa√ßon, et pourquoi l'appli est en cours de reconstruction n'est pas claire.  Et il est tr√®s grand, car au tout d√©but du chemin, et c'est une tr√®s grosse douleur. <br><br><img src="https://habrastorage.org/webt/hu/j8/la/huj8larhnqmhr6dq7qhp2etnkc8.jpeg"><br><br>  De plus, si plusieurs fonctionnalit√©s, de nombreux modules d√©pendent du Core, alors le monde entier sera remont√©, cela prend tr√®s longtemps. <br><br>  Passons √† la nouvelle version d'AGP et rempla√ßons, comme le dit le manuel, tous compilent avec l'API, et non avec l'impl√©mentation, comme vous le pensiez.  Rien ne change.  Les sch√©mas sont identiques.  Quelle est la nouvelle fa√ßon de sp√©cifier les d√©pendances d'impl√©mentation?  Imaginez le m√™me sch√©ma en utilisant uniquement ce mot-cl√©, sans API?  Cela ressemblera √† ceci. <br><br><img src="https://habrastorage.org/webt/nj/ns/fg/njnsfgghg9om12lpwlu5yh21hmu.jpeg"><br><br>  Ici, dans l'impl√©mentation, on voit clairement qu'il existe une connexion entre Core et App.  Ici, nous pouvons clairement comprendre que nous n'en avons pas besoin, nous voulons nous en d√©barrasser, alors supprimez-le.  Tout devient plus facile. <br><br><img src="https://habrastorage.org/webt/rp/lx/xr/rplxxrfrsee28vucqevngre8xq4.jpeg"><br><br>  Maintenant, presque tout va bien, encore plus.  Si nous changeons certaines API dans Core, ajoutons une nouvelle classe, une nouvelle m√©thode publique ou un package priv√©, Core et Feature seront reconstruits.  Si vous modifiez l'impl√©mentation √† l'int√©rieur de la m√©thode ou ajoutez une m√©thode priv√©e, alors la reconstruction th√©orique de Feature ne devrait pas se produire du tout, car rien n'a chang√©. <br><br><img src="https://habrastorage.org/webt/mk/ub/1e/mkub1ect0enydqitlermncinoyk.jpeg"><br><br>  Allons plus loin.  Il se trouve que beaucoup d√©pendent de notre Core.  Le noyau est probablement une sorte de traitement de donn√©es r√©seau ou utilisateur.  Parce que c'est Network, tout change assez souvent, tout est reconstruit, et nous avons eu la m√™me douleur dont nous avons soigneusement fui. <br>  Examinons deux fa√ßons de g√©rer cela. <br><br><img src="https://habrastorage.org/webt/um/_d/c-/um_dc-9rumfh-vyvlqdavr6zvgg.jpeg"><br><br>  Nous pouvons uniquement transf√©rer les API de notre module Core vers un module distinct, son API, que nous utilisons.  Et dans un module s√©par√©, nous pouvons retirer l'impl√©mentation de ces interfaces. <br><br><img src="https://habrastorage.org/webt/eu/o8/0-/euo80-48enzm_rvppcwmb1qbjca.jpeg"><br><br>  Vous pouvez regarder la connexion √† l'√©cran.  Core Impl ne sera pas disponible pour les fonctionnalit√©s.  Autrement dit, il n'y aura aucun lien entre les fonctionnalit√©s et l'impl√©mentation de Core.  Et le module, surlign√© en jaune, ne fournira que des usines qui fourniront une sorte d'impl√©mentation de vos interfaces inconnue de personne. <br><br>  Apr√®s une telle conversion, je tiens √† attirer l'attention sur le fait que l'API Core, du fait que le mot cl√© API est debout, sera disponible de mani√®re transitoire pour toutes les fonctionnalit√©s. <br><br><img src="https://habrastorage.org/webt/7a/lq/iu/7alqiukvhfpie8_olsuekuczfgi.jpeg"><br><br>  Apr√®s ces transformations, nous changeons quelque chose dans l'impl√©mentation que vous faites le plus souvent, et seul le module avec les usines sera reconstruit, il est tr√®s l√©ger, petit, vous n'avez m√™me pas √† consid√©rer le temps qu'il faut. <br><br><img src="https://habrastorage.org/webt/8p/ri/ah/8priahixb3prj9of3cqpzqjxaeg.jpeg"><br><br>  Une autre option ne fonctionne pas toujours.  Par exemple, s'il s'agit d'une sorte de r√©seau, je peux √† peine imaginer comment cela peut se produire, mais s'il s'agit d'une sorte d'√©cran de connexion utilisateur, alors il se pourrait bien que ce soit le cas. <br><br><img src="https://habrastorage.org/webt/eu/rf/cs/eurfcs3tlrk9jasm6fqphr5lb4y.jpeg"><br><br>  Nous pouvons cr√©er Sample, le m√™me module racine √† part enti√®re qu'App, et ne collecter qu'une seule fonctionnalit√©, ce sera tr√®s rapide et il pourra √™tre d√©velopp√© rapidement de mani√®re it√©rative.  √Ä la fin de la pr√©sentation, je vais vous montrer combien de temps il faut pour cr√©er et cr√©er un exemple. <br><br>  Avec la premi√®re partie termin√©e.  Quels modules sont l√†? <br><br><img src="https://habrastorage.org/webt/sv/jm/xk/svjmxkqxazeydcsinvypfuh_-24.jpeg"><br><br>  Il existe trois types de modules.  Bien entendu, les √©l√©ments communs doivent √™tre aussi l√©gers que possible et ne doivent contenir aucune fonctionnalit√©, mais uniquement les fonctionnalit√©s utilis√©es par tout le monde.  Pour nous, dans notre √©quipe, cela est particuli√®rement important.  Si nous fournissons nos modules de fonctionnalit√©s √† d'autres applications, nous les forcerons √† faire glisser Common dans tous les cas.  S'il est tr√®s gros, personne ne nous aimera. <br><br><img src="https://habrastorage.org/webt/bd/n-/1s/bdn-1si0fx1fxre86gldhgepx34.jpeg"><br><br>  Si vous avez un projet plus petit, alors avec Common, vous pouvez vous sentir plus d√©tendu, vous n'avez pas non plus √† √™tre tr√®s z√©l√©. <br><br><img src="https://habrastorage.org/webt/ah/jj/fi/ahjjfiyfzltnadyswlalhsoeh-u.jpeg"><br><br>  Le type de module suivant est autonome.  Le module le plus courant et intuitif qui contient une fonctionnalit√© sp√©cifique: une sorte d'√©cran, une sorte de script utilisateur et ainsi de suite.  Elle doit √™tre aussi ind√©pendante que possible, et pour cela, vous pouvez le plus souvent cr√©er un exemple d'application et la d√©velopper.  L'exemple d'application est tr√®s important au d√©but du processus de fractionnement, car tout se construit encore lentement et vous souhaitez obtenir des b√©n√©fices le plus rapidement possible.  Au final, quand tout est battu en modules, vous pouvez tout reconstruire, ce sera rapide.  Parce qu'il ne sera pas reconstruit une fois de plus. <br><br><img src="https://habrastorage.org/webt/sz/la/p5/szlap5ot3jnjdtvsj5roegwlboy.jpeg"><br><br>  Modules de c√©l√©brit√©s.  J'ai moi-m√™me trouv√© le mot.  Le fait est qu'il est tr√®s c√©l√®bre pour tout le monde, et beaucoup d√©pendent de lui.  Le m√™me r√©seau.  J'ai d√©j√† dit, si vous le r√©assemblez souvent, comment √©viter le fait que tout soit remont√© de vous.  Il existe un autre moyen qui peut √™tre utilis√© pour de petits projets pour lesquels cela ne vaut pas la peine de tout donner comme une d√©pendance distincte, un artefact s√©par√©. <br><br><img src="https://habrastorage.org/webt/pk/yq/u8/pkyqu8xflbfu40ufwly3wr4rgzi.jpeg"><br><br>  √Ä quoi √ßa ressemble?  Nous r√©p√©tons que retirer l'API de Celebrity, retirer son impl√©mentation, et maintenant surveiller vos mains, faites attention aux fl√®ches de Feature √† Celebrity.  Cela arrive.  L'API de votre module est devenue Common, l'impl√©mentation y est rest√©e et l'usine qui fournit l'impl√©mentation de cette API est apparue dans votre module principal.  Si quelqu'un regardait Mobius, Denis Neklyudov en parlait.  Sch√©ma tr√®s similaire. <br><br>  Nous utilisons Dagger dans le projet, nous l'aimons et nous voulions tirer le meilleur parti de cet avantage dans le cadre de diff√©rents modules. <br><br><img src="https://habrastorage.org/webt/kr/ak/xu/krakxunqnjjjoinel9yk0sfbemc.jpeg"><br><br>  Nous voulions que chaque module ait un graphe de d√©pendances ind√©pendant, un composant racine sp√©cifique √† partir duquel vous pouvez faire n'importe quoi, nous voulions avoir notre propre code g√©n√©r√© pour chaque module Gradle.  Nous ne voulions pas que le code g√©n√©r√© se glisse dans le code principal.  Nous voulions autant de validation √† la compilation que possible.  Nous souffrons de [k] apt, au moins nous devrions tirer un profit de ce que Dagger donne.  Et avec tout cela, nous ne voulions forcer personne √† utiliser Dagger.  Ni celui qui impl√©mente le nouveau module de fonctionnalit√©s s√©par√©ment, ni celui qui le consomme ensuite, ne sont nos coll√®gues qui demandent des fonctionnalit√©s pour eux-m√™mes. <br><br>  Comment organiser un graphe de d√©pendance distinct dans notre module de fonctionnalit√©s? <br><br><img src="https://habrastorage.org/webt/9p/-u/im/9p-uimpq3hakpiwmedw-kinrsai.jpeg"><br><br>  Vous pouvez essayer d'utiliser Subcomponent, et cela fonctionnera m√™me.  Mais cela a pas mal de d√©fauts.  Vous pouvez voir que dans Subcomponent, il n'est pas clair quelles d√©pendances il utilise depuis Component.  Pour comprendre cela, vous devez remonter le projet de mani√®re longue et douloureuse, regarder ce que Dagger jure et l'ajouter. <br>  De plus, les sous-composants sont organis√©s de mani√®re √† obliger les autres √† utiliser Dagger, et cela ne fonctionnera pas facilement pour vos clients et vous-m√™me si vous d√©cidez de refuser dans un module. <br><br><img src="https://habrastorage.org/webt/d3/wz/vj/d3wzvj5_hjyy31e9rl-6hlo36ck.jpeg"><br><br>  L'une des choses les plus d√©go√ªtantes est que lorsque vous utilisez Subcomponent, toutes les d√©pendances sont tir√©es dans le module principal.  La dague est con√ßue pour que les sous-composants soient g√©n√©r√©s par une classe incorpor√©e de leurs composants de cadrage, le parent.  Peut-√™tre que quelqu'un regardait le code g√©n√©r√© et sa taille sur leurs composants g√©n√©r√©s?  Nous avons 20 000 lignes dedans.  √âtant donn√© que les sous-composants sont toujours des classes imbriqu√©es pour les composants, il s'av√®re que les sous-composants des sous-composants sont √©galement imbriqu√©s, et tout le code g√©n√©r√© tombe dans le module principal, ce fichier de vingt lignes qui doit √™tre compil√© et doit √™tre refactoris√©, Studio commence √† ralentir - douleur. <br><br>  Mais il y a une solution.  Vous pouvez utiliser uniquement Component. <br><br><img src="https://habrastorage.org/webt/dr/1b/lc/dr1blc8pj2qzzhxs3pnnu7lbqui.jpeg"><br><br>  Dans Dagger, un composant peut sp√©cifier des d√©pendances.  Ceci est montr√© dans le code et montr√© dans l'image.  D√©pendances o√π vous sp√©cifiez des m√©thodes de provisionnement, des m√©thodes de fabrique qui montrent de quelles entit√©s d√©pend votre composant.  Il les veut au moment de la cr√©ation. <br>  Avant, j'ai toujours pens√© que seuls d'autres composants pouvaient √™tre sp√©cifi√©s dans ces d√©pendances, et c'est pourquoi - la documentation le dit. <br><br><img src="https://habrastorage.org/webt/gk/us/45/gkus45n1uhs0jhqjojmciaa3y48.jpeg"><br><br>  Maintenant, je comprends ce que cela signifie d'utiliser l'interface de composant, mais avant je pensais que c'√©tait juste un composant.  En fait, vous devez utiliser une interface compos√©e selon les r√®gles de cr√©ation d'une interface pour un composant.  En bref, approvisionnez simplement les m√©thodes, lorsque vous n'avez que des getters pour certaines sortes de d√©pendances.  Vous pouvez √©galement trouver un exemple de code dans la documentation de Dagger. <br><br><img src="https://habrastorage.org/webt/ry/jo/63/ryjo63y8bfqo1a5kfkgeff4iv10.jpeg"><br><br>  OtherComponent y est √©galement √©crit, et cela pr√™te √† confusion, car en fait, vous pouvez non seulement y ins√©rer des composants. <br><br>  Comment aimerions-nous utiliser cette entreprise en r√©alit√©? <br><br><img src="https://habrastorage.org/webt/sy/v1/r_/syv1r_5jzsr7i8vkniesru582gg.jpeg"><br><br>  En r√©alit√©, il y a un module Feature, il a un package API visible, situ√© pr√®s de la racine de tous les packages, et il dit qu'il y a un point d'entr√©e - FeatureActivity.  Il n'est pas n√©cessaire d'utiliser des typealias, juste pour √™tre clair.  √áa peut √™tre un fragment, √ßa peut √™tre un ViewController - √ßa n'a pas d'importance.  Et il y a ses d√©pendances, FeatureDeps, o√π il est indiqu√© qu'il a besoin d'un contexte, d'un service r√©seau, de Common, d'une sorte de chose que vous voulez obtenir de l'application, et tout client est oblig√© de le satisfaire.  Quand il le fera, tout fonctionnera. <br><br><img src="https://habrastorage.org/webt/tu/rl/yk/turlykyi-zrmheakatdmpasqqr4.jpeg"><br><br>  Comment utilisons-nous tout cela dans le module Fonctionnalit√©?  Ici, j'utilise Activity, c'est facultatif.  Comme d'habitude, nous cr√©ons notre propre composant racine Dagger et utilisons la m√©thode magique findComponentDependencies, il est tr√®s similaire √† Dagger pour Android, mais nous ne pouvons pas l'utiliser principalement parce que nous ne voulons pas faire glisser les sous-composants.  Sinon, nous pouvons leur retirer toute la logique. <br><br>  Au d√©but, j'ai essay√© de dire comment cela fonctionne, mais vous pouvez le voir dans l'exemple de projet vendredi.  Comment cela devrait-il √™tre utilis√© par vos clients de biblioth√®que dans votre module principal? <br><br><img src="https://habrastorage.org/webt/ui/nk/mj/uinkmj6kxqhr3218cfbo_y8v9uk.jpeg"><br><br>  Tout d'abord, ce ne sont que des typealias.  En fait, il a un nom diff√©rent, mais pour √™tre bref, il l'est.  La classe d'interface MapOfDepth by Dependency vous donne son impl√©mentation.  Dans l'application, nous disons que nous pouvons cr√©er des d√©pendances de la m√™me mani√®re que dans Dagger pour Android, et il est tr√®s important que le composant h√©rite de cette interface et re√ßoive automatiquement les m√©thodes de provisionnement.  La dague de ce moment commence √† nous forcer √† fournir cette d√©pendance.  Tant que vous ne l'avez pas fourni, il ne sera pas compil√©.  C'est la principale commodit√©: vous avez d√©cid√© d'arranger une fonctionnalit√©, d√©velopp√© votre composant avec cette interface - tout jusqu'√† ce que vous fassiez le reste, il ne se contentera pas de compiler, mais produira des messages d'erreur clairs.  Le module est simple, le fait est qu'il lie votre composant √† l'impl√©mentation de l'interface.  √Ä peu pr√®s les m√™mes que dans Dagger pour Android. <br><br>  Passons aux r√©sultats. <br><br><img src="https://habrastorage.org/webt/hs/gv/0o/hsgv0oyk_v-jbzjk8lono2uepju.jpeg"><br><br>  J'ai v√©rifi√© sur notre ordinateur central et sur mon ordinateur portable local, avant de d√©sactiver tout ce qui √©tait possible.  Si nous ajoutons une m√©thode publique √† Feature, le temps de construction est consid√©rablement diff√©rent.  Ici, je montre les diff√©rences lorsque je cr√©e un exemple de projet.  Cela fait 16 secondes.  Ou quand je r√©cup√®re toutes les cartes - cela signifie deux minutes pour s'asseoir et attendre chaque changement, m√™me minime.  Par cons√©quent, de nombreuses fonctionnalit√©s que nous d√©veloppons et d√©velopperons dans des exemples de projets.  Sur le mainframe, le temps est comparable. <br><br><img src="https://habrastorage.org/webt/ey/ou/va/eyouvaxzp3kw8cl0eb3jznokvpe.jpeg"><br><br>  Un autre r√©sultat important.  Avant de mettre en √©vidence le module Feature, il ressemblait √† ceci: sur le mainframe, c'√©tait 28 secondes, maintenant c'est 49 secondes.  Nous avons allou√© le premier module, et d√©j√† re√ßu une d√©c√©l√©ration de montage presque deux fois. <br><br><img src="https://habrastorage.org/webt/f2/px/_o/f2px_oqd8uktolgh3-f2ae8j6to.jpeg"><br><br>  Et une autre option est un simple assemblage incr√©mental de notre module, pas une fonctionnalit√©, comme dans le pr√©c√©dent.  28 secondes se sont √©coul√©es jusqu'√† l'allocation du module.  Lorsque nous avons allou√© un code qui n'avait pas besoin d'√™tre reconstruit √† chaque fois, et [k] apt, qui n'avait pas besoin d'√™tre ex√©cut√© √† chaque fois, nous avons gagn√© trois secondes.  Dieu sait quoi, mais j'esp√®re qu'√† chaque nouveau module, le temps ne fera que diminuer. <br><br>  Voici des liens utiles vers des articles: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">API versus impl√©mentation</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article avec des mesures de temps de construction</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">exemple de module</a> .  La pr√©sentation sera <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">disponible</a> .  Je vous remercie </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr419295/">https://habr.com/ru/post/fr419295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr419279/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 264 (30 juillet - 5 ao√ªt)</a></li>
<li><a href="../fr419281/index.html">rcm - gestionnaire de fichiers rc: r√©glage et utilisation</a></li>
<li><a href="../fr419283/index.html">Bezos jette de l'argent et des ing√©nieurs pour d√©velopper une fus√©e en lien avec l'acc√©l√©ration de la course √† l'espace</a></li>
<li><a href="../fr419289/index.html">√âcoutez et parlez: annonce de HolyJS 2018 √† Moscou</a></li>
<li><a href="../fr419291/index.html">Annonce de Heisenbug 2018 Moscou: r√©ponses √† toutes les questions</a></li>
<li><a href="../fr419297/index.html">Affichage des commentaires sur Habr√© dans l'ordre d'ajout</a></li>
<li><a href="../fr419299/index.html">Une lampe intelligente qui montre l'ambiance de votre ville</a></li>
<li><a href="../fr419303/index.html">Le rapport Tesla a montr√© des pertes et des revenus plus √©lev√©s que pr√©vu par les investisseurs</a></li>
<li><a href="../fr419305/index.html">Jouet espion ou trouvaille: machine √† √©crire Barbie ‚Ñ¢</a></li>
<li><a href="../fr419307/index.html">Roskomnadzor s'int√©resse aux relations d'affaires Facebook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>