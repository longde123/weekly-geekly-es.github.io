<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíâ üïó üéÖüèø SDL 2.0-Unterrichtszyklus: Lektion 4 - Behandeln von Ereignissen ‚ö∞Ô∏è üåì üêß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vom √úbersetzer: 

 Dies ist eine Fortsetzung einer Reihe von √úbersetzungen von Twinklebear-Tutorials, die urspr√ºnglich hier verf√ºgbar waren . Die √úber...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SDL 2.0-Unterrichtszyklus: Lektion 4 - Behandeln von Ereignissen</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/437308/"><img src="https://habrastorage.org/getpro/habr/post_images/f5d/0d7/06a/f5d0d706a7ba63af9b903584ea96e187.png" alt="SDL2"><br><br>  <i>Vom √úbersetzer:</i> <i><br><br></i>  <i>Dies ist eine Fortsetzung einer Reihe von √úbersetzungen von Twinklebear-Tutorials, die urspr√ºnglich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> verf√ºgbar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">waren</a> .</i>  <i>Die √úbersetzung ist teilweise kostenlos und kann geringf√ºgige √Ñnderungen oder Erg√§nzungen des √úbersetzers enthalten.</i>  <i>Die √úbersetzung der ersten beiden Lektionen wurde von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">InvalidPointer</a> verfasst.</i>  <i>Bilder aus dem Originalartikel werden unter maximaler Wahrung des Stils des Autors lokalisiert.</i> <br><a name="habracut"></a><br>  <b>Liste der Lektionen:</b> <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lektion 1. Hallo Welt!</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lektion 2. F√ºllen Sie nicht alles in der Hauptsache</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lektion 3. SDL-Erweiterungsbibliotheken</a> </li><li>  <b>Lektion 4. Ereignisbehandlung</b> </li><li>  Lektionen 5-6 - Fortsetzung folgt </li></ul><br><br><h2>  Ereignisbehandlung </h2><br>  In dieser Lektion lernen wir die Grundlagen des Abrufens von Benutzereingaben kennen. Zur Vereinfachung des Beispiels wird jede Benutzeraktion als <strike>Fluchtversuch</strike> zum Beenden des Programms wahrgenommen.  SDL verwendet die Struktur- und Ereignisextraktionsfunktionen von SDL_Event aus der Ereigniswarteschlange, z. B. SDL_PollEvent, um Informationen zu Ereignissen abzurufen.  Der im Rahmen dieser Lektion geschriebene Code basiert auf den Ergebnissen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">vorherigen Lektion</a> . <br><br>  Aber zuerst √§ndern wir das Bild in der Mitte des Bildschirms, damit der Benutzer, der Ihr Programm zum ersten Mal gesehen hat, versteht, was es tut und was von ihm verlangt wird. <br><br><img src="https://habrastorage.org/webt/1_/k7/na/1_k7naqu695aypcoqghnlegv3ws.png"><br>  <i><font color="gray">Author Man gespeichert</font></i> <br><br><h3>  Die einfachste Hauptschleife </h3><br>  Wir werden die <b>Hauptschleife</b> zum Programm hinzuf√ºgen, wodurch das Programm funktioniert, bis der Benutzer das Programm beenden m√∂chte (und das Programm nat√ºrlich in zug√§nglicher Form dar√ºber benachrichtigen m√∂chte), anstatt wie in fr√ºheren Lektionen eine feste Verz√∂gerung.  Hier ist eine ungef√§hre Struktur dieses Zyklus: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!quit) <span class="hljs-comment"><span class="hljs-comment">//   ,  : { //       //  -   }</span></span></code> </pre> <br><br><h3>  SDL-Ereigniswarteschlange </h3><br>  Um das SDL-Ereignissystem ordnungsgem√§√ü zu verwenden, ben√∂tigen wir mindestens ein minimales Verst√§ndnis seiner Funktionsweise.  Wenn die SDL ein Ereignis vom Betriebssystem empf√§ngt, stellt sie es nach allen anderen Ereignissen, die zuvor empfangen, aber noch nicht aus dem Programm extrahiert wurden, am Ende der Warteschlange ab.  Wenn wir nach dem Starten des Programms die Gr√∂√üe des Fensters abwechselnd √§ndern, darauf klicken und auf einen Schl√ºssel klicken, sieht die Ereigniswarteschlange folgenderma√üen aus: <br><img src="https://habrastorage.org/webt/af/ry/zd/afryzdfjn3xxwb40fmovvcyhp7m.png"><br><br>  Wenn wir SDL_PollEvent aufrufen, erhalten wir am Anfang der Warteschlange ein Ereignis, das √§lteste der verbleibenden.  Wenn Sie Ereignisse mit SDL_PollEvent aus der Warteschlange empfangen, werden sie von dort entfernt. Um dies zu vermeiden, k√∂nnen Sie das Ereignis mithilfe der Funktion SDL_PeepEvents mit gesetztem Flag SDL_PEEKEVENT ‚Äûsnoop‚Äú.  Weitere Informationen zu dieser Funktion finden Sie in der Dokumentation. Sie wird im Rahmen dieses Artikels nicht ben√∂tigt (und h√∂chstwahrscheinlich auch) und wird daher nicht ber√ºcksichtigt. <br><br><h3>  Ereignisbehandlung </h3><br>  In der Hauptschleife m√∂chten wir alle verf√ºgbaren Ereignisse empfangen, die nach dem Zeichnen des vorherigen Frames aufgetreten sind, und diese verarbeiten.  Setzen Sie dazu einfach SDL_PollEvent in den Zustand der while-Schleife, da es 1 zur√ºckgibt, wenn es das Ereignis empfangen hat, und 0, wenn nichts zu empfangen ist.  Da das Programm nur seine Arbeit an bestimmten Ereignissen abschlie√üt, reicht es aus, eine boolesche Variable (bool quit) zu verwenden, die angibt, ob das Programm beendet werden soll oder nicht, und seinen Wert auf true setzt, wenn diese Ereignisse empfangen werden. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// e -    SDL_Event,       while (SDL_PollEvent(&amp;e)) { //      if (e.type == SDL_QUIT) { quit = true; } //       if (e.type == SDL_KEYDOWN) { quit = true; } //     if (e.type == SDL_MOUSEBUTTONDOWN) { quit = true; } }</span></span></code> </pre><br><br>  Diese Schleife sollte innerhalb der Hauptschleife der Anwendung platziert werden. <br>  Ein Ereignis vom Typ SDL_QUIT tritt auf, wenn der Benutzer das Fenster schlie√üt, SDL_KEYDOWN, wenn die Taste auf der Tastatur gedr√ºckt wird (und tritt viele Male auf, √§hnlich wie Buchstaben wiederholt werden, w√§hrend die Taste beim Drucken von Text gehalten wird), und ein Ereignis vom Typ SDL_MOUSEBUTTONDOWN, wenn Mausklick.  Dies sind nur einige der Ereignisse, die Ihre Anwendung empfangen kann - und insgesamt kann die SDL mehr als 20 Arten von Ereignissen empfangen, die in diesem Artikel nat√ºrlich nicht behandelt werden k√∂nnen. Lesen Sie sie daher in der Dokumentation zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SDL_Event</a> <br><br><h3>  Abschluss des Hauptzyklus </h3><br>  Wir haben die Ereignisverarbeitung abgeschlossen, aber in der Hauptschleife fehlt ein weiterer Teil - die Szenenanzeige.  Wir haben dieses Thema bereits in fr√ºheren Lektionen behandelt, es bleibt nur, dieses Wissen anzuwenden, und der Hauptzyklus wird die folgende Form annehmen: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//   SDL_Event e; //   bool quit = false; while (!quit) { //   while (SDL_PollEvent(&amp;e)) { if (e.type == SDL_QUIT) { quit = true; } if (e.type == SDL_KEYDOWN) { quit = true; } if (e.type == SDL_MOUSEBUTTONDOWN) { quit = true; } } //   SDL_RenderClear(renderer); renderTexture(image, renderer, x, y); SDL_RenderPresent(renderer); }</span></span></code> </pre><br><br>  Dieses Programm wird f√ºr immer funktionieren.  Nun, oder zumindest bis der Benutzer sie <strike>h√∂flich</strike> auffordert aufzuh√∂ren.  Nach dem Starten des Programms sollte das Dr√ºcken der Taste mit einem Kreuz, das Dr√ºcken einer beliebigen Taste auf der Tastatur oder das Klicken mit der Maus im Fenster zum Abschluss der Arbeit f√ºhren.  Und bis zu diesem Moment wird sie den Inhalt des Fensters st√§ndig neu zeichnen. <br><br>  <i>Erg√§nzung durch den √úbersetzer: Das Programm in der Form, in der es sich befindet, verbraucht h√∂chstwahrscheinlich alle verf√ºgbaren Prozessorressourcen und l√§dt einen Kern vollst√§ndig.</i>  <i>Es ist sinnvoll, am Ende des Hauptzyklus mit SDL_Delay eine kleine Verz√∂gerung (1-5 ms) hinzuzuf√ºgen, damit das Programm den Prozessor f√ºr andere Programme freigibt, wenn keine Ereignisse vorliegen.</i>  <i>Dies gilt nicht f√ºr schwere Spiele, f√ºr die bereits alle verf√ºgbaren Ressourcen erforderlich sind, wenn es bei 100 fps ein unzul√§ssiger Luxus ist, 100 ms pro Sekunde f√ºr das Warten aufzuwenden.</i> <br><br><h3>  Das Ende der vierten Lektion </h3><br>  So ging die n√§chste Lektion zu Ende.  Wir sehen uns alle in Lektion 5: Probenahme aus einem Texturatlas <br><br>  <b>Hausaufgaben:</b> Versuchen Sie, <b>Bildbewegungen</b> hinzuzuf√ºgen, indem Sie beispielsweise die Pfeile verwenden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de437308/">https://habr.com/ru/post/de437308/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de437296/index.html">Warum wenden die Menschen keine formalen Methoden an?</a></li>
<li><a href="../de437298/index.html">√úber einen Kerl</a></li>
<li><a href="../de437300/index.html">10 F√§higkeiten und Kenntnisse, die f√ºr einen iOS-Anf√§nger erforderlich sind</a></li>
<li><a href="../de437304/index.html">Wie man Kartoffeln kauft, wenn man farbenblind ist</a></li>
<li><a href="../de437306/index.html">Nicht offensichtliche F√§higkeiten, die der Produktmanager ben√∂tigt</a></li>
<li><a href="../de437310/index.html">CSS-Verlaufsgrenzen</a></li>
<li><a href="../de437312/index.html">Implementierung eines Hot-Reloads von C ++ - Code unter Linux und MacOS: tiefer gehen</a></li>
<li><a href="../de437314/index.html">Italienisches R√§tsel: OMI-Kryptografiemaschinen</a></li>
<li><a href="../de437316/index.html">Das Internet Development Institute hat Websites benannt, die seit dem 1. Februar m√∂glicherweise nicht mehr mit RuNet verbunden sind</a></li>
<li><a href="../de437318/index.html">Nahtlose (fast) Migration zwischen wichtigen PostgreSQL-Versionen mithilfe der logischen Replikation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>