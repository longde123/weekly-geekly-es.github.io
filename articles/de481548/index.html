<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>✍🏽 🤴🏿 😪 Symbol.iterator in Javascript 👩🏿‍🔬 🔂 ✉️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist ein kurzer, aber nützlicher Artikel für zukünftige Entwickler von Javascript-Iteratoren. 





 Bevor wir uns mit Iteratoren in js befassen, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Symbol.iterator in Javascript</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481548/"><p>  Dies ist ein kurzer, aber nützlicher Artikel für zukünftige Entwickler von Javascript-Iteratoren. </p><br><p><img src="https://habrastorage.org/webt/il/o4/ez/ilo4ezpcedeun_3-bnluvs_41ey.png" alt="Bild"></p><a name="habracut"></a><br><p>  Bevor wir uns mit Iteratoren in js befassen, sollten Sie sich merken, was <u>Symbol ist</u> : </p><br><blockquote>  Das Symbol ist eine eindeutige und unveränderliche Kennung.  Mit <strong>der Funktion</strong> Symbol () erstellt, kann sie auch als Symbol ('foo') bezeichnet werden.  Symbole mit denselben Bezeichnungen sind <strong>nicht gleich</strong> und im Allgemeinen sind Symbole nicht gleich (denken Sie an die Eindeutigkeit). </blockquote><p>  Es gibt <em>Systemsymbole</em> wie <em>Symbol.iterator</em> , <em>Symbol.toPrimitive</em> und andere.  Systemzeichen werden von der Sprache selbst verwendet, aber wir können sie auch verwenden, um das Standardverhalten einiger Objekte zu ändern. </p><br><p>  Symbole sind Teil der es6-Spezifikation, daher werden sie in ie überhaupt nicht unterstützt ( <a href="https://caniuse.com/" rel="nofollow">caniuse</a> ). </p><br><h3 id="pro-symboliterator">  Über Symbol.iterator </h3><br><p>  Grundsätzlich wird dieses Symbol von der Sprache in einer <em>for ... of-</em> Schleife verwendet, wenn die Eigenschaften eines Objekts durchlaufen werden.  Es kann auch direkt mit integrierten Datentypen verwendet werden: </p><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rangeIterator = <span class="hljs-string"><span class="hljs-string">'0123456789'</span></span>[<span class="hljs-built_in"><span class="hljs-built_in">Symbol</span></span>.iterator](); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(rangeIterator.next()); <span class="hljs-comment"><span class="hljs-comment">// {value: "0", done: false} console.log(rangeIterator.next()); // {value: "1", done: false} console.log(rangeIterator.next()); // {value: "2", done: false} ... console.log(rangeIterator.next()); // {value: "9", done: false} console.log(rangeIterator.next()); // {done: true}</span></span></code> </pre> <br><p>  Dieses Beispiel funktioniert mit einer Zeichenfolge, da <em>String.prototype</em> einen eigenen Iterator ( <a href="https://www.ecma-international.org/ecma-262/10.0/index.html" rel="nofollow">spec</a> ) hat.  Liste der iterierbaren Typen in js: <em>String, Array, TypedArray, Map, Set.</em> <br>  Zusätzlich zur Schleife verwendet Javascript <em>Symbol.iterator</em> in den folgenden Konstruktionen: <em>Spread-Operator, Yield</em> , <em>Destructuring-Zuweisung</em> . </p><br><p>  Das Aufrufen von <em>[Symbol.iterator] ()</em> gibt eine Iterator-Schnittstelle zurück, die folgendermaßen aussieht: </p><br><pre> <code class="javascript hljs">Iterator { next(); <span class="hljs-comment"><span class="hljs-comment">//    return(); //   throw(); //   }</span></span></code> </pre> <br><p>  Die <em>Methoden .next (), .return (), .throw ()</em> bereiten ein Objekt der Form vor (dann sehen wir wie) und geben es zurück: </p><br><pre> <code class="javascript hljs">{ value - ,   done -    }</code> </pre> <br><p>  Die <em>Methoden .return () und .throw ()</em> werden beispielsweise verwendet, wenn die Iteration vorzeitig beendet wird.  Sie können mehr über sie in der <a href="https://www.ecma-international.org/ecma-262/10.0/index.html" rel="nofollow">ecmascript-</a> Spezifikation lesen. </p><br><h3 id="primenenie-symboliterator-v-svoih-strukturah">  Verwenden von Symbol.iterator in seinen Strukturen </h3><br><p>  Als Beispiel erstellen wir eine eigene Struktur, die mit <em>for ...</em> iteriert werden kann, und betrachten die Verwendung von <em>Symbol.iterator</em> mit den oben genannten Sprachkonstrukten. </p><br><p>  Stellen Sie sich vor, wir haben eine Route durch mehrere Stationen gelegt und möchten die Route abfahren und mit jeder Station etwas unternehmen, z. B. sie in der Konsole anzeigen. </p><br><p>  Erstellen Sie eine <em>Routenklasse</em> : </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Route</span></span></span><span class="hljs-class"> </span></span>{ stations; <span class="hljs-comment"><span class="hljs-comment">//      constructor(stations) { this.stations = stations; } //     id get(idx) { return this.stations[idx]; } //   [Symbol.iterator]() { return new RouteIterator(this); //   } }</span></span></code> </pre> <br><p>  Wie Sie sehen, implementiert unsere <em>Route</em> die <em>Symbol.iterator-</em> Methode, sodass <em>Route</em> eine <u>iterierbare</u> Entität ( <a href="https://www.ecma-international.org/ecma-262/10.0/index.html" rel="nofollow">spec</a> ) ist. <em>Dies</em> bedeutet, dass wir sie mit <em>for ... of</em> durchgehen können (nachdem wir uns die Implementierung von <em>RouteIterator angesehen haben</em> ). </p><br><p>  Die Methode <em>[Symbol.iterator] ()</em> wird so oft aufgerufen, wie sie aufgerufen wurde.  Das heißt, wenn mehrere Zyklen versuchen, die <em>Route</em> nacheinander zu durchlaufen, wird <em>[Symbol.iterator] ()</em> für jeden Zyklus aufgerufen, sodass wir für jeden Aufruf eine neue Instanz von <em>RouteIterator erstellen</em> . </p><br><p>  <em>Lernen</em> wir nun <em>RouteIterator</em> selbst kennen.  Diese Klasse implementiert eine Iteratorschnittstelle für eine <em>Route-</em> Entität.  Schauen wir es uns an: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RouteIterator</span></span></span><span class="hljs-class"> </span></span>{ _route; <span class="hljs-comment"><span class="hljs-comment">//     _nextIdx; //    constructor(route) { this._route = route; this._nextIdx = 0; } next() { if (this._nextIdx === this._route.stations.length) { return { done: true } //     } const result = { value: this._route.get(this._nextIdx), done: false } this._nextIdx++; return result; } }</span></span></code> </pre> <br><p>  In dieser Klasse haben wir Zugriff auf die iterable-Auflistung ( <em>route-</em> Eigenschaft) und <em>nextIdx</em> ist ein Zeiger auf den nächsten Wert in unserer Auflistung. </p><br><p>  Die <em>next ()</em> -Methode prüft zunächst, ob die Route vollständig ist, und gibt dann zurück, dass die Iterationen vollständig sind.  Andernfalls nehmen wir den nächsten Wert in der Routensammlung, sagen, dass die Iterationen nicht abgeschlossen sind, bewegen den Zeiger und geben das Ergebnis zurück. </p><br><p>  Jetzt können wir die Routensammlung durchgehen <em>für ... von</em> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> route = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Route([<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> item <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> route) { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(item); }</code> </pre> <br><p>  Dieser Code listet die Stationen auf, die wir an <em>Route übergeben haben</em> . </p><br><p>  Jetzt werden wir die Stationen mit den Funktionsgeneratoren durchgehen: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gen</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span>* route; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'x'</span></span>; <span class="hljs-comment"><span class="hljs-comment">//        .next() } const g = gen(); g.next() // {value: "", done: false} g.next() // {value: "", done: false} g.next() // {value: "", done: false} g.next() // {value: 'x', done: true} g.next() // {value: undefined, done: true}</span></span></code> </pre> <br><p>  <em>Symbol.iterator wird</em> für die <em>Restrukturierung verwendet</em> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [a, b, c] = route; <span class="hljs-comment"><span class="hljs-comment">// a - "" // b - "" //  - ""</span></span></code> </pre> <br><p>  und mit <em>Spread</em> Operator: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">a, b, c</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(a, b, c) } test(…route) <span class="hljs-comment"><span class="hljs-comment">// "" "" ""</span></span></code> </pre> <br><h3 id="rezultaty">  Ergebnisse </h3><br><p>  Wir haben unsere Klasse erstellt, iterativ gemacht und mit Javascript-Konstrukten verwendet.  Vielen Dank für Ihre Aufmerksamkeit =). </p><br><h3 id="materialy">  Material </h3><br><p>  Es ist unmöglich, das neue Material in nur einem Artikel vollständig zu beherrschen. Hier sind einige zusätzliche: <br>  Über das <a href="https://refactoring.guru/ru/design-patterns/iterator" rel="nofollow">Iteratormuster</a> aus dem Guru Refactoring-Buch <br>  Über Symbol aus dem Buch von <a href="https://learn.javascript.ru/symbol" rel="nofollow">Ilja Kantor</a> und auf <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol" rel="nofollow">MDN</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481548/">https://habr.com/ru/post/de481548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481538/index.html">20 SEO-Mythen, die 2020 sterben werden</a></li>
<li><a href="../de481540/index.html">OpenGLESv2-Texturen über DMABUF neu laden</a></li>
<li><a href="../de481542/index.html">Überprüfung von digitalen Schaltkreisen. Rückblick</a></li>
<li><a href="../de481544/index.html">Verwenden eines neuronalen Faltungsnetzwerks zum Spielen von Life (auf Keras)</a></li>
<li><a href="../de481546/index.html">Die Geschichte des Mikroprozessors und des Personalcomputers: 1947-1974</a></li>
<li><a href="../de481550/index.html">Inmarsat: Empfang und Dekodierung eines Satellitensignals zu Hause</a></li>
<li><a href="../de481552/index.html">PGConf.Russia 2020 erscheint in Kürze</a></li>
<li><a href="../de481554/index.html">Wie gehe ich durch den Online-Master of Science in Informatik, und für wen passt dies möglicherweise nicht?</a></li>
<li><a href="../de481556/index.html">PostgreSQL-Task-Warteschlange</a></li>
<li><a href="../de481560/index.html">Die Verdauung von frischen Materialien aus der Welt des Frontends für die letzte Woche Nr. 394 (15. - 22. Dezember 2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>