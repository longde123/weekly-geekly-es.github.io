<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤑 ◀️ 🤽🏿 Wie ich die LED HEART Box entworfen habe 🙍🏾 🛐 👨🏻‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Grüße, Habr! 

 Ich möchte eine Geschichte über die Schaffung einer Spieluhr mit Elementen der Lichtbeleuchtung erzählen - ein schönes Geschenk mit de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wie ich die LED HEART Box entworfen habe</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/456366/">  Grüße, Habr! <br><br>  Ich möchte eine Geschichte über die Schaffung einer Spieluhr mit Elementen der Lichtbeleuchtung erzählen - ein schönes Geschenk mit der Möglichkeit der individuellen Auswahl von Lichteffekten und musikalischer Begleitung.  Die Box hieß Plain - LED HEART.  Nachdem alle Arbeiten erledigt wurden, möchte ich eine kurze Geschichte über die Arbeit an diesem "Hobby" -Projekt erzählen. <br><br>  Es ist kein Geheimnis, dass Sie im Netzwerk (einschließlich Habré) viele Projekte zur Erstellung von LED-Valentinsgrüßen, Herzen usw. durchführen können.  Demonstrationsvideos mit ihnen sammeln oft schmeichelhafte und begeisterte Kritiken in den Kommentaren.  Gleichzeitig ist die Möglichkeit, ein so interessantes Geschenk zu machen, bisher vielen Ingenieuren, Schinken usw. geblieben, d.h.  Personen mit ausreichenden Qualifikationen, um das Projekt einer Person zu wiederholen oder ihr eigenes zu erstellen.  Außerdem brauchen Sie dafür viel Freizeit.  Ich habe keine Serienproduktion eines solchen Geschenks gesehen.  Am nächsten sind die einfachsten Amateur-Lötkits von zwei inländischen Unternehmen und ähnliche Optionen, die auf chinesischen Websites angeboten werden. <br>  Diese Idee führte zunächst zu einem Projekt zur Schaffung eines LED-Herzens, das nicht nur für diejenigen verfügbar sein wird, die mit Elektronik „bei Ihnen“ sind. <br><br>  Ich werde ein wenig von weitem beginnen, mit einem Hintergrund.  Es dauerte alle mehrere Jahre ... <a name="habracut"></a><br><br><h3>  Hintergrund </h3><br>  Das erste Video mit einem Herz aus LEDs, das ich 2010 auf einem der Youtube-Kanäle gesehen habe.  Das Projekt war beeindruckend.  Und 2011 stellte er als Student für ein paar Wochen Arbeit am Abend, heimlich von seiner Freundin, eine einfache Version des LED-Herzens zusammen und präsentierte sie am 8. März.  Das Projekt wurde von mir selbst entwickelt - sowohl Hardware als auch Firmware - studierte, erfand Fahrräder. <br><br>  Es sah ... im Allgemeinen so aus: <br><br><img src="https://habrastorage.org/webt/aa/ii/gz/aaiigzidhcvjjne9-iys01aj3_g.png" alt="Bild"><br><br><img src="https://habrastorage.org/webt/3g/w7/wk/3gw7wk6ohmy_mfadpdkomtq2aqw.jpeg" alt="Bild"><br><br>  Leider wird kein Foto den Grad der Exklusivität von Geschenken vollständig vermitteln, der mir vor 9 Jahren an einigen Stellen unübertroffen erschien.  In der Dose befand sich eine Leiterplatte mit Attiny13A aus der Dose (MK ist auf dem Foto nicht sichtbar, sie wurde von außen mit Drähten verlötet - ein Bündel von Drähten, die über den oberen Rand des Fotos hinausragen), mit Schieberegistern und hellen LEDs, die entlang des Umrisses des Herzsymbols verlötet waren.  Auf der Außenseite des Deckels der Blechdose befindet sich eine Inschrift: "In Ihren Händen ist alles voller Liebe ... und sogar ..." und auf der Innenseite "... Makrele.  Seit dem 8. März! ”  Auf Knopfdruck begannen die Lichter zu laufen, die LEDs blinkten und schimmerten entsprechend dem, was in 1 Kilobyte Mikrocontroller-Speicher gelangt war.  Kreativität und Romantik spritzten über den Rand, wie Sie sehen können.  Wie ich mich jetzt erinnere, wandere ich zwischen den Reihen des Supermarkts umher und überlege, welchen Koffer ich für ein „herzhaftes Geschenk“ wählen soll ... plötzlich werden meine Augen auf ein Regal mit Konserven gerichtet ... und hier ist es ... Einsicht ... <br><br>  Nun, ein wenig abgelenkt werde ich weitermachen. <br><br><h3>  Die Geschichte selbst </h3><br>  Nachdem er die gewünschte Antwort von seiner zukünftigen Frau erhalten hatte, kam ihm der Gedanke, dass die Herstellung und der Verkauf derart interessanter Geschenke grundsätzlich sinnvoll sein könnten.  Ein solches Souvenir ruft positive Emotionen hervor und symbolisiert die warmen Gefühle der Person, die es gibt.  Aber Studium, Diplom, Arbeit, Routine und Privatleben ließen nicht genug Zeit, um sich auf solche Abenteuer einzulassen - alles endete, bevor es begann. <br><br>  3 Jahre vergingen ... 2014 kam ... Irgendwann stolperte ich wieder über ähnliche Projekte im Internet - einige davon waren bereits fortgeschrittener und interessanter - die Idee, meine eigene einzigartige Version des Herzens zu entwickeln und an seiner Produktion teilzunehmen, entzündete sich mit neuer Kraft. es gab vorher nichts Vergleichbares.  Gleichzeitig zeigten die Leute offensichtlich Interesse.  Nachdem er bereits technische Erfahrung gesammelt hatte, begann er, sich diesem Problem systematischer zu nähern.  Die Arbeit an diesem Herzen fand jedoch im Hobby-Modus statt - einige Abende und, wenn möglich, am Wochenende parallel zu anderen "Hobby" -Projekten und der Hauptarbeit, die bei allen Arbeiten an erster Stelle stand.  Daher stellte sich am Ende heraus, dass der Zeitrahmen für ein solches Projekt unglaublich aufgebläht war. <br><br>  Wie hat die Studie begonnen? <br><br>  Zunächst wurden die Mängel in den gesehenen Amateurkonstruktionen identifiziert und bewertet.  Das Wichtigste, was damals bemerkt wurde: <br><br><ul><li>  Mangel an Vielfalt von Elementen der Lichtbeleuchtung. </li><li>  Die Einfachheit und Ungeschicklichkeit von Designs, die immer den ersten Eindruck schmieren und möglicherweise nicht zu der richtigen Wirkung beim Geben führen.  Die überwiegende Mehrheit der untersuchten Geräte sah aus wie Amateurhandwerk, nichts weiter (wie das, das ich 2010 gemacht habe) - solide, nicht ernst, langweilig ... Die meisten der betrachteten Designs von Herzen haben entweder überhaupt keinen Körper oder dieser Körper ist schrecklich - Ala eine Bundsäge aus morschem Sperrholz, eine selbstschneidende Schraube in ein Brett, Fenster von org.  Glas usw.  Ein bestimmtes Optimum ist erforderlich - der Gerätetyp sollte die Menschen nicht zumindest abschrecken, im Gegenteil - er sollte die gesamte Bandbreite der Gefühle desjenigen, der es gibt, maximal vermitteln, und gleichzeitig - das Gerät sollte nicht zu dimensional, superkomplex usw. sein. . </li><li>  Das Fehlen von Soundeffekten von Lichteffekten in Projekten von Herzen (mit sehr seltenen Ausnahmen), obwohl es meiner Meinung nach für sich selbst bittet.  Nur die LED-Matrix zu blinken reicht nicht aus.  Musik sollte den Effekt verstärken und zum Zeitpunkt des Gebens Romantik hinzufügen.  Musik kann sogar ein individuelles Merkmal eines solchen Geschenks sein, sie „erwärmt“ die richtige Atmosphäre für die entsprechende Situation - romantisch / feierlich / lustig und jede andere.  Es wurde angenommen, dass, wenn die Beleuchtungseffekte für alles andere auch mit der Hintergrundmelodie synchron sind, dies sehr cool, überzeugend und cool sein wird. </li><li>  Da es laut vorherigem Absatz Musik geben sollte - die Idee, eine Spieluhr herzustellen, kam von selbst - Sie öffnen sie - sie spielt und funkelt - Sie schließen sie - sie verstummt und verblasst. </li></ul><br>  All diese Gedanken stürmte das Gehirn für eine Weile.  Zuerst musste ich mich für die spezifische Funktionalität der Box entscheiden.  Im Allgemeinen wurde es wie folgt gesehen: <br><br><ul><li>  Das Herz sollte eine LED-Matrix mit ausreichender Auflösung haben, damit Sie eine Lauflinie ausführen können. Führen Sie die einfachste Animation aus.  Es sollte möglich sein, die LEDs sanft auszublenden und zu beleuchten. </li><li>  Es sollte möglich sein, Lichteffekte für die schnelle Umstrukturierung des Beleuchtungsprogramms für einen bestimmten Kunden schnell zu erstellen und zu korrigieren.  Es sollte klargestellt werden, dass das Modell der Interaktion mit Kunden Folgendes impliziert.  Dem Kunden wird zunächst ein grundlegender Satz von Beleuchtungsprogrammen mit vordefinierten Melodien zur Verfügung gestellt, aus denen er eines auswählt, das für seine Wünsche am besten geeignet ist. Außerdem werden wir seinerseits das Beleuchtungsprogramm anpassen und es an diese bestimmte Person, seinen Anlass / Feiertag (Text der Lauflinie) anpassen andere Frames).  In Zukunft war geplant, die Basis der verfügbaren Musik und Lichteffekte schrittweise zu erweitern.  Außerdem kann ich meinerseits nach der Kommunikation mit dem Kunden anhand der Eingabedaten immer die beste Option empfehlen.  Die Möglichkeit eines völlig individuellen Studiums der Melodie und Beleuchtung, jedoch zu erhöhten Kosten, ist nicht vollständig ausgeschlossen.  Der Prozess der Erstellung eines Programms mit Lichteffekten für eine neue Melodie ist in jedem Fall wesentlich länger als andere Prozesse zur Vorbereitung des Geräts für den Verkauf. </li><li>  Ein spezieller Fall (während Sie sich im Prototypenstadium nur auf Ihren Geschmack verlassen). </li><li>  Autonomie der Macht, als  Das Gerät ist im Wesentlichen ein Souvenir. Es macht keinen Sinn, es stationär an eine externe Quelle anzuschließen. </li></ul><br>  Darüber hinaus wurden diese Anforderungen in spezifische technische Aufgaben formalisiert und nacheinander schrittweise gelöst.  Dabei wurden verschiedene Materialien untersucht, Arten von Designs, Schaltkreise überlegt, das Schreiben der Software, die Realisierung der Fähigkeit, Lichteffekte schnell hinzuzufügen / zu entfernen / zu bearbeiten usw., machten den Löwenanteil der Zeit aus. <br>  Als Beispiel für solche Transformationen kann ich eine Demonstration der Zwischenversion der 2015 hergestellten Prototyp-Box anbieten - sie kann bedingt als Ergebnis von Iteration 1 betrachtet werden (die Videoqualität ist schrecklich, der Ton wurde getrennt von der MP3-Datei überlagert, konnte dann nicht angemessen aufgezeichnet werden): <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/F8leTFH6pFw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Und schon die endgültige Version, zusammengestellt im Jahr 2017: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/0MPJeOb9aJI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Es mag den Anschein haben, dass die LEDs hier dunkler leuchten als in der Version 2015, aber das ist nicht so - es war nur so, dass die externe Quelle beim Aufnehmen zu stark war.  Der Sound hier ist schon echt. <br><br>  Zum Zeitpunkt des Erscheinens dieses Beispiels hatte sich sowohl außerhalb als auch innerhalb des Geräts und in seinem Softwareteil viel geändert. <br><br><h3>  Kurz über HW </h3><br>  Die Elektronikbox befindet sich auf drei Leiterplatten.  Auf einer - LEDs, Transistoren und Widerstände, die für die Matrixaufnahme von LEDs erforderlich sind, der Atmega32A-Steuermikrocontroller und seine Verkabelung.  Die zweite Karte implementiert eine Einschaltsteuerung, wenn die Box geöffnet wird, eine Ausschaltschaltung mit einem inakzeptablen Abfall der Versorgungsspannung.  Das dritte Board verfügt über einen MP3-Player (gekauftes Modul). <br><br>  Der Fall ist eine gekaufte Metallbox.  Im Inneren basiert die gesamte Struktur auf einem Kunststoffrahmen, der auf einem 3D-Drucker gedruckt ist.  Einige Elemente werden durch Klebeverbindungen gehalten, die Hauptplatine wird auf Magneten gehalten, die auf einer Kunststoffbasis montiert sind. <br>  Die Box wird mit drei AAA-Batterien betrieben. <br><br><h3>  Kurz über SW </h3><br>  Für den PC wurde ein Programm entwickelt - ein Codegenerator mit grafischer Oberfläche, mit dem Sie schnell Lichteffekte erstellen und bearbeiten, alle erforderlichen Zeitintervalle (zur Synchronisation mit der Hintergrundmelodie) steuern und sofort einen Code zum Flashen des auf der Herzplatine befindlichen Mikrocontrollers generieren können.  Für die Aufzeichnung von Effektparametern in Datenfeldern wurde ein bestimmtes Format entwickelt.  Auf der MK-Seite analysiert die Firmware diese Arrays und wandelt sie zum richtigen Zeitpunkt in das Leuchten der richtigen LEDs um.  Das Format für die Aufzeichnung von Effekten in den Codetabellen ist recht sparsam - der interne Speicher der Mikrocontroller-Programme reicht für den Firmware-Code und für Tabellen mit Parametern für Lichteffekte völlig aus. <br><br>  Es kann ein separater Artikel zur Lösung technischer Probleme und Probleme während der Entwicklung verfasst werden.  Natürlich ist dies keine „Raketenwissenschaft“ und das Kauen solcher Fragen kann für die Öffentlichkeit langweilig sein, aber wenn jemand interessiert ist, kann man definitiv verwirrt werden. <br><br><h3>  Zusammenfassung </h3><br>  Was ist das Ergebnis?  Das Sargprojekt kann immer noch geleckt und endlos aktualisiert, in völlig andere Richtungen verbessert, zusätzliche Funktionen usw. hinzugefügt werden.  Aber in der Form, in der die Box konzipiert wurde - es wurde getan, wurde das Entwicklungsprojekt abgeschlossen.  Für die (kleine) Serienproduktion muss noch etwas Arbeit geleistet werden, aber dies ist eine Frage der Technologie, wie sie sagen. <br><br>  Irgendwann mitten auf der Reise wurde mir klar, dass der Versuch, die kommerzielle Komponente des Projekts unabhängig zu entwickeln, für mich nicht sehr interessant war, es gab weder Zeit noch viel Verlangen danach.  Es gab keine Person, die den größten Teil der Organisation des Verkaufs, der Arbeit mit Melodien und Lichteffekten in meiner Umgebung übernehmen würde.  Mit einer solchen potenziellen Partnerschaft erklärte ich mich bereit, alle technischen Probleme, Produktion, Beschaffung und Logistik zu schließen.  Aber es hat nicht geklappt.  Und die Zeit ist ständig mit anderen Aufgaben beschäftigt - entweder interessanter oder einfach notwendig / Haushalt. <br><br>  Daher halte ich das Projekt derzeit für abgeschlossen.  Insgesamt wurden 3 Exemplare der neuesten Version angefertigt - zwei für Geschenke an Angehörige und ein Exemplar auf Bestellung.  Es kann vorkommen, dass irgendwann eine Art Geschichte weitergeht, das verspreche ich nicht, aber im Moment ist der Status so.  Im Allgemeinen hat mich das Ergebnis der Arbeit zufriedengestellt.  Am wertvollsten ist jedoch die Reaktion der Angehörigen, für die die ersten Herzproben bestimmt waren. Dafür wäre es nicht schade, so viel Zeit zu verbringen, wie Sie möchten! <br><br>  Nun, in Bezug auf die Rationalität der Durchführung eines solchen Projekts wurden objektive Schlussfolgerungen gezogen und Lehren gezogen, die mir sicherlich bei zukünftigen Taten und Erfolgen dienen werden! <br><br>  Vielen Dank für das Lesen, ich freue mich immer, in den Kommentaren zu sprechen, wenn Sie Fragen, Kommentare, Vorschläge haben. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de456366/">https://habr.com/ru/post/de456366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de456350/index.html">Digitale Veranstaltungen in Moskau vom 17. bis 23. Juni</a></li>
<li><a href="../de456352/index.html">Drahtloses Objektkommunikationsmodul WISE-4000</a></li>
<li><a href="../de456354/index.html">Wie sammeln wir TV-Boxen?</a></li>
<li><a href="../de456358/index.html">Die 13 berüchtigtsten Artikel des vergangenen Jahres</a></li>
<li><a href="../de456362/index.html">Level 6 Designer: Wie wir Designer motivieren und entwickeln</a></li>
<li><a href="../de456368/index.html">Durchführen öffentlicher und privater Transaktionen in der JPMorgan Quorum-Blockchain mit Web3</a></li>
<li><a href="../de456370/index.html">Implementieren Sie QoS in Qsan Storage</a></li>
<li><a href="../de456372/index.html">SimbirSoft lädt IT-Experten zum Intensivsommer 2019 ein</a></li>
<li><a href="../de456374/index.html">Plasma Cash Blockchain State Datenstrukturen</a></li>
<li><a href="../de456376/index.html">Not One Spring Boot: Ein Überblick über Alternativen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>