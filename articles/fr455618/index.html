<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ù§Ô∏è üì™ üèÄ DevOps LEGO: comment nous avons con√ßu un pipeline sur des cubes üë®üèæ‚Äçüöí üè¨ üíî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="D'une mani√®re ou d'une autre, nous avons mis le client sur un syst√®me de gestion √©lectronique de documents √† un seul objet. Et puis √† un autre objet. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DevOps LEGO: comment nous avons con√ßu un pipeline sur des cubes</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/croc/blog/455618/"> D'une mani√®re ou d'une autre, nous avons mis le client sur un syst√®me de gestion √©lectronique de documents √† un seul objet.  Et puis √† un autre objet.  Et un de plus.  Et les quatri√®me et cinqui√®me.  Ils ont √©t√© tellement emport√©s qu'ils ont atteint 10 objets distribu√©s.  Puissant s'est produit ... surtout quand nous sommes arriv√©s √† la livraison des changements.  Dans le cadre de l'approvisionnement du circuit de production pour 5 sc√©narios de syst√®me de test, cela a pris 10 heures et 6-7 employ√©s.  Ces co√ªts nous ont oblig√©s √† livrer le moins possible.  Apr√®s trois ans de fonctionnement, nous n'avons pas pu le supporter et avons d√©cid√© d'assaisonner le projet avec une pinc√©e de DevOps. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9a2/c38/f3a/9a2c38f3ac8462e17e19955d93e148a5.png"><br><br>  Maintenant, tous les tests passent en 3 heures, et 3 personnes y participent: un ing√©nieur et deux testeurs.  Les am√©liorations sont clairement exprim√©es en chiffres et conduisent √† une r√©duction du TTM bien-aim√©.  D'apr√®s notre exp√©rience, DevOps peut aider beaucoup plus de clients que ceux qui le savent m√™me.  Par cons√©quent, pour rapprocher DevOps des personnes, nous avons d√©velopp√© un constructeur simple, dont nous parlerons plus en d√©tail dans cet article. <br><a name="habracut"></a><br>  Maintenant, nous allons dire plus en d√©tail.  Dans une entreprise √©nerg√©tique de 10 grandes installations, un syst√®me de gestion des documents techniques est en cours de d√©ploiement.  Il n‚Äôest pas facile de trouver des projets de cette envergure sans DevOps, car une grande partie du travail manuel retarde consid√©rablement le travail et r√©duit √©galement la qualit√© - tout le travail manuel est sem√© d‚Äôerreurs.  D'autre part, il y a des projets o√π l'installation est une, mais il faut que tout fonctionne automatiquement, en permanence et sans √©chec - par exemple, les m√™mes syst√®mes de gestion de documents dans les grandes organisations monolithiques.  Sinon, quelqu'un effectuera le r√©glage manuellement, oubliera les instructions de d√©ploiement - et en cons√©quence, les param√®tres seront perdus sur le prod et tout plantera. <br><br>  Habituellement, nous travaillons avec le client via un contrat, auquel cas nos int√©r√™ts divergent un peu.  Le client regarde le projet strictement dans le cadre du budget et des savoirs traditionnels.  Il peut √™tre difficile de lui expliquer les avantages des diff√©rentes pratiques DevOps qui ne font pas partie des savoirs traditionnels.  Et s'il s'int√©resse aux releases rapides √† valeur ajout√©e pour l'entreprise, √† la construction d'un pipeline d'automatisation? <br><br>  H√©las, en travaillant avec une valeur pr√©-approuv√©e, cet int√©r√™t n'est pas toujours possible √† trouver.  Dans notre pratique, il y avait un cas o√π nous devions reprendre le d√©veloppement pour un entrepreneur sans scrupules et b√¢cl√©.  C'√©tait une horreur: il n'y a pas de codes source r√©els, la base de code du m√™me syst√®me sur diff√©rentes installations est diff√©rente, la documentation manquait en partie, en partie d'une qualit√© terrible.  Bien s√ªr, le client n'avait pas de contr√¥le de source, d'assemblage, de versions, etc. <br><br>  Jusqu'√† pr√©sent, tout le monde ne conna√Æt pas DevOps, mais cela vaut la peine de parler de ses avantages, de la v√©ritable √©conomie de ressources, les yeux s'illuminent pour tous les clients.  Il y a donc de plus en plus de demandes impliquant DevOps au fil du temps.  Ici, afin de parler facilement la m√™me langue avec les clients, nous devons connecter rapidement les probl√®mes commerciaux et les pratiques DevOps, ce qui aidera √† construire un pipeline de d√©veloppement appropri√©. <br><br>  Donc, nous avons un ensemble de probl√®mes d'une part, il y a des connaissances, des pratiques et des outils DevOps d'autre part.  Pourquoi ne pas partager l'exp√©rience avec tout le monde? <br><br><h2>  Cr√©er un constructeur DevOps </h2><br>  Agile a son propre manifeste.  ITIL a sa propre m√©thodologie.  DevOps a moins de chance - il n'a pas encore acquis de mod√®les et de normes.  Bien que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">certains</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">tentent de</a> d√©terminer le degr√© de maturit√© des entreprises sur la base d'une √©valuation de leurs modes de d√©veloppement et de fonctionnement. <br><br>  Heureusement, la c√©l√®bre entreprise Gartner a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">collect√©</a> et analys√© en 2014 les principales pratiques DevOps et les relations entre elles.  Sur cette base, j'ai publi√© l'infographie: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f0e/46a/83f/f0e46a83ff3be045521227b82b741854.png"><br><br>  Nous l'avons pris comme base de notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">constructeur</a> .  Dans chacun des quatre domaines, il existe un ensemble d'outils - nous les avons collect√©s dans la base de donn√©es, identifi√© les points d'int√©gration les plus populaires et identifi√©s et les m√©canismes d'optimisation appropri√©s.  Au total, <i>36 pratiques et 115 outils</i> se sont r√©v√©l√©s, dont un quart sont des logiciels libres ou ouverts.  Ensuite, nous parlerons de ce que nous avons fait dans chaque domaine et, par exemple, de la fa√ßon dont il a √©t√© mis en ≈ìuvre dans le projet pour cr√©er un flux de travail technique √† partir duquel nous avons commenc√© la publication. <br><br><h2>  Les processus </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/f2b/44d/6ff/f2b44d6ff8965d50a1b3fb4d91d40b1f.png"><br><br>  Dans le fameux projet EDMS, le syst√®me de gestion de la documentation technique a √©t√© d√©ploy√© selon le m√™me sch√©ma dans chacune des 10 installations.  L'installation comprend 4 serveurs: un serveur de base de donn√©es, un serveur d'applications, l'indexation de texte int√©gral et la gestion de contenu.  Dans l'installation, ils fonctionnent au sein d'un seul n≈ìud, sont situ√©s dans le centre de donn√©es des installations.  Tous les objets varient l√©g√®rement dans l'infrastructure, mais cela n'interf√®re pas avec l'interaction globale. <br><br>  Premi√®rement, selon les pratiques DevOps, nous avons automatis√© les infrastructures localement, puis nous avons apport√© la livraison au circuit de test, puis √† la productivit√© du client.  Chaque processus s'est d√©roul√© √©tape par √©tape.  Les param√®tres d'environnement sont fix√©s dans le syst√®me de code source, en tenant compte du fait que la distribution est collect√©e pour les mises √† jour automatiques.  Dans le cas de modifications de la configuration, les ing√©nieurs doivent simplement apporter les modifications appropri√©es au syst√®me de contr√¥le de version - puis la mise √† jour automatique se passera sans probl√®me. <br><br>  Gr√¢ce √† cette approche, le processus de test a √©t√© consid√©rablement simplifi√©.  Auparavant, il y avait des testeurs dans le projet qui ne faisaient que mettre √† jour manuellement les stands.  Maintenant, ils viennent de voir que tout a fonctionn√© et sont engag√©s dans des choses plus utiles.  Chaque mise √† jour est test√©e automatiquement - du niveau de la surface √† l'automatisation du sc√©nario d'entreprise.  Les r√©sultats sont pr√©sent√©s sous forme de rapports distincts dans TestRail. <br><br><h2>  La culture </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/624/0dc/ee4/6240dcee46bc810e2df585b97a27003f.png"><br><br>  L'exp√©rimentation continue s'explique mieux par la conception des tests.  Tester un syst√®me qui n'existe pas encore est un travail cr√©atif.  Lors de la r√©daction d'un plan de test, vous devez comprendre comment tester correctement, quelles branches passer.  Et aussi trouver un √©quilibre entre le temps et le budget afin de d√©terminer le nombre optimal de contr√¥les.  Il est important de choisir exactement les tests n√©cessaires, de consid√©rer comment l'utilisateur va interagir avec le syst√®me, de prendre en compte l'environnement et les √©ventuels facteurs externes.  Vous ne pouvez pas vous passer d‚Äôexp√©rimentation continue. <br><br>  Maintenant sur la culture de l'interaction.  Il y avait autrefois deux parties bellig√©rantes - ing√©nieurs et d√©veloppeurs.  Les d√©veloppeurs ont d√©clar√©: <i>¬´Peu importe comment cela commence.</i>  <i>Vous √™tes des ing√©nieurs, vous √™tes intelligent, faites-le fonctionner sans interruption</i> . <i>¬ª</i>  Les ing√©nieurs ont r√©pondu: <i>¬´Vous, les d√©veloppeurs, √™tes trop t√©m√©raires.</i>  <i>Soyons plus prudents et nous mettrons vos sorties moins souvent.</i>  <i>Parce que chaque fois que vous nous mettez un code troubl√©, et comment nous interagissons n'est pas clair</i> . <i>"</i>  Il s'agit d'un probl√®me d'interaction culturelle qui, du point de vue de DevOps, est structur√© diff√©remment.  Ici, vous avez √† la fois des ing√©nieurs et des d√©veloppeurs qui font partie d'une seule √©quipe qui vise √† changer constamment, mais en m√™me temps un logiciel fiable. <br><br>  √Ä l'√©chelle d'une √©quipe, les sp√©cialistes sont pr√™ts √† s'entraider.  Comment c'√©tait avant?  Par exemple, une sorte de manuel de d√©ploiement √©pais √©tait en cours de pr√©paration, pages √† 50. L'ing√©nieur l'a lu, n'a pas compris quelque chose, a jur√© et a demand√© au d√©veloppeur de commenter √† trois heures du matin.  Le d√©veloppeur a √©galement comment√© et jur√© - √† la fin, personne n'√©tait heureux.  De plus, naturellement, il y a eu quelques erreurs, car vous ne vous souviendrez pas de tout dans les instructions.  Et maintenant, l'ing√©nieur et le d√©veloppeur r√©digent un script pour le d√©ploiement automatis√© de l'infrastructure logicielle de l'application.  Et ils se parlent dans presque la m√™me langue. <br><br><h2>  Les gens </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/b13/130/fbb/b13130fbb1a0ad016e562ad8c3703970.png"><br><br>  La taille de l'√©quipe est d√©termin√©e par l'√©tendue de la mise √† jour.  L'√©quipe est recrut√©e lors de la formation de l'offre, elle comprend ceux qui le souhaitent de l'√©quipe g√©n√©rale du projet.  Ensuite, un plan de mise √† jour est r√©dig√© avec la responsabilit√© de chaque √©tape, au fur et √† mesure de l'ex√©cution de l'√©quipe, rapporte-t-il.  Tous les membres de l'√©quipe sont interchangeables.  En tant que membre de l'√©quipe, nous avons √©galement un d√©veloppeur de s√©curit√©, mais il n'a presque jamais √† se connecter. <br><br><h2>  La technologie </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/70d/41a/ece/70d41aece549035d4e87ec61b29e0a8b.png"><br><br>  Dans le sch√©ma de la technologie, quelques points sont mis en √©vidence, mais sous eux se trouve un tas de technologies - avec leurs descriptions, vous pouvez publier un livre entier.  Nous allons donc mettre en √©vidence les plus int√©ressants. <br><br><h3>  L'infrastructure comme code </h3><br>  Maintenant, probablement, vous ne surprendrez personne avec ce concept, mais avant la description des infrastructures laissait beaucoup √† d√©sirer.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les ing√©nieurs ont regard√© avec horreur les instructions</a> , les environnements de test √©taient uniques, ils √©taient soign√©s et ch√©ris, des particules de poussi√®re leur √©taient souffl√©es. <br><br>  Maintenant, personne n'a peur d'exp√©rimenter.  Il existe des images de base de machines virtuelles, il existe des sc√©narios pr√™ts √† l'emploi pour le d√©ploiement d'environnements.  Tous les mod√®les et scripts sont stock√©s dans le syst√®me de contr√¥le de version et sont mis √† jour rapidement.  Auparavant, lorsqu'il √©tait n√©cessaire de livrer un package sur un stand, une lacune de configuration apparaissait.  Il ne vous reste plus qu'√† ajouter une ligne dans le code source. <br><br>  Outre les sc√©narios d'infrastructure et les pipelines, l'approche Documentation as a Code est √©galement utilis√©e pour la documentation.  Gr√¢ce √† cela, il est facile de connecter de nouvelles personnes au projet, de les introduire dans le syst√®me par les fonctions d√©crites, par exemple, dans le plan de test, et √©galement de r√©utiliser des cas de test. <br><br><h3>  Livraison et surveillance continues </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Dans notre dernier article</a> sur DevOps, nous avons expliqu√© comment nous avons choisi des outils pour impl√©menter la livraison et la surveillance continues.  Souvent, il n'est pas n√©cessaire de r√©√©crire quoi que ce soit - il suffit d'utiliser des scripts pr√©c√©demment √©crits, de construire correctement l'int√©gration entre les composants et de cr√©er une console de gestion commune.  Et tous les processus peuvent √™tre d√©marr√©s avec un seul bouton ou programme. <br><br>  Il existe diff√©rents concepts en anglais, la livraison continue et le d√©ploiement continu.  Les deux peuvent √™tre traduits par ¬´livraison continue¬ª, mais en fait il y a une l√©g√®re diff√©rence entre eux.  Dans notre projet de gestion des documents techniques d'une entreprise d'√©nergie distribu√©e, la livraison est plut√¥t utilis√©e lorsque l'installation pour la vente est effectu√©e sur commande.  Dans le d√©ploiement, l'installation est automatique.  La livraison continue dans ce projet est g√©n√©ralement devenue un <i>√©l√©ment central de DevOps</i> . <br><br>  En g√©n√©ral, en collectant certains param√®tres, vous pouvez clairement comprendre pourquoi les pratiques DevOps sont utiles.  Et √† transmettre √† la direction, qui aime beaucoup les chiffres.  Le nombre total de lancements, le temps d'ex√©cution des √©tapes du script, la part des lancements r√©ussis - tout cela affecte directement le d√©lai de mise sur le march√© pr√©f√©r√© de tous, c'est-√†-dire le temps entre la validation du syst√®me de contr√¥le de version et la sortie de la version sur un environnement productif.  Avec l'introduction des outils n√©cessaires, les ing√©nieurs re√ßoivent par courrier des indicateurs pr√©cieux et le chef de projet les voit sur un tableau de bord.  Ainsi, vous pouvez imm√©diatement appr√©cier les avantages des nouveaux outils.  Et vous pouvez les essayer sur votre infrastructure √† l'aide du constructeur DevOps. <br><br><h2>  Qui a besoin de notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">constructeur DevOps</a> ? </h2><br>  Nous ne tricherons pas: pour commencer, il nous est devenu utile.  Comme nous l'avons d√©j√† dit, le client doit parler le m√™me langage, et avec l'aide du constructeur DevOps, nous pouvons rapidement d√©finir les bases d'une telle conversation.  Les professionnels pourront √©valuer eux-m√™mes ce dont ils ont besoin et ainsi se d√©velopper plus rapidement.  Nous avons essay√© de rendre le constructeur aussi d√©taill√© que possible, avons ajout√© un tas de descriptions pour que tout utilisateur comprenne ce qu'il choisit. <br><br>  Le format du concepteur vous permet de prendre en compte l'exp√©rience existante de l'entreprise dans les processus de construction et l'automatisation.  Vous n'avez pas √† tout d√©composer et reconstruire si vous ne pouvez choisir que des solutions qui s'int√®grent normalement dans les processus existants et qui peuvent simplement combler les lacunes. <br><br>  Peut-√™tre que votre d√©veloppement est d√©j√† pass√© √† un niveau sup√©rieur et que notre outil vous semblera trop ¬´capitaine¬ª.  Mais nous le trouvons utile pour nous-m√™mes et esp√©rons qu'il sera utile √† certains lecteurs.  Nous vous rappelons le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">lien</a> vers le constructeur - vous obtenez le circuit imm√©diatement apr√®s avoir entr√© les donn√©es source.  Nous serons reconnaissants pour les commentaires et ajouts. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr455618/">https://habr.com/ru/post/fr455618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr455608/index.html">Index bitmap dans Go: vitesse de recherche incroyable</a></li>
<li><a href="../fr455610/index.html">Intel Core i7-2600K l√©gendaire: test de Sandy Bridge en 2019 (partie 1)</a></li>
<li><a href="../fr455612/index.html">Nous r√©fl√©chissons aux personnages de jeux et dialogues sur les conseils d'√©crivains et sur l'exemple des partisans de la th√©orie d'une Terre plate</a></li>
<li><a href="../fr455614/index.html">FFI: √©crire en Rust dans un programme PHP</a></li>
<li><a href="../fr455616/index.html">Pourquoi aller √† "Programmation industrielle" au HSE de Saint-P√©tersbourg?</a></li>
<li><a href="../fr455620/index.html">CAN ou pas CAN? Ou pourquoi ai-je besoin d'un r√©seau de microcontr√¥leurs?</a></li>
<li><a href="../fr455622/index.html">Intel Core i7-2600K l√©gendaire: test de Sandy Bridge en 2019 (partie 2)</a></li>
<li><a href="../fr455624/index.html">Hyper-victimes et ce que les concepteurs de jeux peuvent en tirer</a></li>
<li><a href="../fr455626/index.html">Wallarm Offzone2019 HackQuest</a></li>
<li><a href="../fr455630/index.html">√âv√©nements num√©riques √† Moscou du 11 au 16 juin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>