<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÉüèø üë®üèº‚Äçüé® ü•Ö Castlevania Bot üò¶ ‚úåÔ∏è üå†</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Qu'est ce que c'est 
 CastlevaniaBot est un plugin pour l'√©mulateur NES Nintaco qui joue dans Castlevania. Si vous l'ex√©cutez sur l'√©cran de d√©marrage...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Castlevania Bot</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432784/"><h1>  Qu'est ce que c'est </h1><br>  CastlevaniaBot est un plugin pour <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'√©mulateur NES Nintaco</a> qui joue dans Castlevania.  Si vous l'ex√©cutez sur l'√©cran de d√©marrage, le plugin parcourra tout le jeu du d√©but √† la fin.  Ou vous pouvez l'ex√©cuter n'importe o√π dans le jeu afin qu'il passe par une partie de celui-ci. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/UrtgTGmv1GQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Dans cet article, je vais vous expliquer comment cr√©er un bot capable de passer Castlevania et comment cr√©er quelque chose de similaire pour n'importe quel jeu sur NES. <br><a name="habracut"></a><br><hr><br><h1>  Structure bas√©e sur les connaissances </h1><br>  Ce projet n'a pas utilis√© d'apprentissage automatique.  Le d√©veloppement peut plut√¥t √™tre appel√© ¬´apprentissage automatique¬ª.  Je sais passer Castlevania.  La difficult√© √©tait d'√©crire mes connaissances dans un programme informatique.  Le r√©sultat a √©t√© un syst√®me qui simule le m√™me processus de prise de d√©cision que j'effectue avec le contr√¥leur entre mes mains.  Pour le cr√©er, il √©tait n√©cessaire d'√©noncer clairement les d√©tails d√©taill√©s de la physique qui contr√¥le le monde de bits de Simon Belmont, et toutes les tactiques n√©cessaires √† un chasseur de vampires exp√©riment√©. <br><br>  CastlevaniaBot a acc√®s √† un ensemble de strat√©gies pour faire face √† un large √©ventail de situations.  La plupart d'entre eux sont con√ßus pour fonctionner avec un type sp√©cifique d'objets de jeu.  Par exemple, il existe une strat√©gie de contr√¥le du squelette, une autre pour les poissons, pour briser les bougies, pour rassembler les c≈ìurs, etc. <br><br>  CastlevaniaBot surveille en permanence l'√©tat du jeu et, si n√©cessaire, bascule entre diff√©rentes strat√©gies.  Dans le processus de prise de d√©cision, la fonction fitness est utilis√©e, classant tous les objets du jeu √† l'√©cran.  En haut de la liste se trouve l'objectif principal, et lorsqu'il change, le bot change de strat√©gie.  Par exemple, CastlevaniaBot pourrait se pr√©parer √† frapper les bougies lorsqu'une chauve-souris vole dans le cadre.  Selon la distance par rapport √† la chauve-souris, CastlevaniaBot peut r√©agir en passant d'une strat√©gie de bougie √† une strat√©gie de chauve-souris.  D√©truisant la chauve-souris, il continuera de travailler avec des bougies. <br><br>  Avant de d√©cider de passer, CastlevaniaBot passe en revue son objectif et sa strat√©gie actuels.  S'il ne r√©ussit pas, il peut √™tre coinc√© dans un cycle sans fin, alternant entre deux buts avec une priorit√© √©gale ou presque √©gale.  Pour √©viter cela, lorsqu'un nouvel objectif principal appara√Æt, qui n'est que l√©g√®rement plus √©lev√© en priorit√© de l'objectif actuel, CastlevaniaBot peut d√©cider de poursuivre la strat√©gie actuelle. <br><br>  Certaines strat√©gies sont lanc√©es automatiquement lorsqu'elles tombent dans une certaine zone.  Habituellement, ils sont destin√©s au traitement simultan√© de plusieurs objets de jeu.  Par exemple, dans un couloir avec un tas de t√™tes de m√©duses volantes, il est pr√©f√©rable d'aller de l'avant et de ne pas viser chaque t√™te individuellement. <br><br>  Certaines strat√©gies peuvent varier en fonction de l'arme secondaire actuelle et du nombre de c≈ìurs collect√©s, notamment dans les combats de boss.  CastlevaniaBot essaie de prendre la meilleure d√©cision en fonction des outils dont il dispose et de la situation actuelle. <br><br><hr><br><h1>  Planifier un monde 8 bits </h1><br>  Lorsque je travaille sur de tels projets, je cherche principalement √† simplifier la t√¢che.  J'ai imagin√© √† quoi ressemblerait Castlevania s'il n'y avait pas d'ennemis, de bougies ou d'objets √† collecter sur les niveaux.  Dans ce cas, il suffirait simplement de passer du d√©but √† la fin du niveau.  Je me suis demand√© - si je peux apprendre au bot comment faire cela, √† quel point sera-t-il difficile de d√©truire plusieurs ennemis en cours de route? <br><br>  Pour apprendre au bot √† se d√©placer, j'avais besoin de cartes d'arri√®re-plan et de comprendre comment les niveaux sont organis√©s.  Le jeu se compose de six niveaux, chacun se terminant par un boss. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09b/644/665/09b644665551ebb424b3813af0205173.png"></div><br>  Chaque niveau est divis√© en 3 ou 4 √©tapes.  Les sc√®nes sont g√©n√©ralement s√©par√©es par des portes en bois qui s'ouvrent avec un grincement et claquent derri√®re le dos du joueur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/207/5fb/a46/2075fba46c9ef8ccd9a496df6aadcf07.png"></div><br>  Les portes sont des points de contr√¥le (points de contr√¥le).  Si un joueur est tu√©, il retourne au d√©but de l'√©tape, mais seulement s'il n'a pas mis fin √† sa vie.  Si vous continuez le jeu apr√®s la fin de la partie, le joueur est renvoy√© au tout d√©but du niveau. <br><br>  Le num√©ro de l'√©tape indique le nombre total de points de contr√¥le termin√©s depuis le d√©but de la partie.  La derni√®re √©tape est le num√©ro 18. Mais si vous tuez Dracula, le jeu commence d√®s le d√©but en mode difficile, et le nombre d'√©tapes continue d'augmenter jusqu'√† 19 et au-del√†.  Si vous passez par le mode difficile, le troisi√®me cycle du jeu ne devient pas plus difficile, mais le nombre d'√©tapes continue d'augmenter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/447/6a5/3c5/4476a53c571dc062a4bc2287f5e02587.png"></div><br>  Chaque √©tape consiste en une ou plusieurs barres de d√©filement horizontales de l'arri√®re-plan, que j'appelle des ¬´sous-√©tapes¬ª.  Si vous quittez l'√©cran le long des escaliers menant vers le haut ou vers le bas, le jeu passe d'une sous-√©tape √† l'autre et ne d√©file pas verticalement. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/760/751/5d8/7607515d8da99df95877d7eef8214f3f.png"></div><br>  Le jeu utilise 3 octets pour suivre le num√©ro de cycle de jeu, le num√©ro d'√©tape et le num√©ro de sous-√©tape.  Le cycle de jeu en mode normal (mode normal) a une valeur de 0;  les valeurs de 1 et plus indiquent le mode difficile.  Quel que soit le cycle de jeu, les √©tapes ont toujours une num√©rotation de 0 √† 18. Et les sous-√©tapes ont toujours une valeur de 0 ou 1, car les √©tapes ne contiennent jamais plus de 2 bandes horizontales.  CastlevaniaBot suit ces octets pour savoir o√π il se trouve. <br><br>  Pour ma commodit√©, j'ai enregistr√© la bande de fond de chaque sous-√©tape dans un fichier graphique distinct.  Si j'avais besoin de trouver les coordonn√©es exactes d'un objet, je pourrais les trouver rapidement √† l'aide d'un √©diteur graphique.  J'ai enregistr√© les fichiers √† l'aide de l'outil Map Maker int√©gr√© √† Nintaco.  Je l'ai allum√© puis j'ai parcouru tout le match.  Certaines des images r√©sultantes contenaient plusieurs sous-√©tapes reli√©es entre elles, qui √©taient faciles √† s√©parer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a53/3de/57e/a533de57e49c26f55eea024465dd3cf6.png" alt="Cartographe de Nintaco"></div><br>  Apr√®s avoir examin√© les images d'arri√®re-plan, j'ai r√©alis√© que les seules tuiles importantes sont les plates-formes et les escaliers.  Tout le reste peut √™tre consid√©r√© comme un espace vide.  Les escaliers sont de deux types: menant vers l'avant ou vers l'arri√®re (ils peuvent √™tre repr√©sent√©s comme les bords gauche et droit d'un triangle isoc√®le).  Parfois, les escaliers se terminent par une plate-forme sur laquelle le joueur peut marcher. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6e/6fa/76b/c6e6fa76bcd6d6c3457060763eb6f993.png"></div><br>  Il n'y a que 5 types de tuiles importantes, et √† chaque niveau, elles ont une apparence diff√©rente.  Je les ai copi√©s et coll√©s dans des fichiers image 16 √ó 16 s√©par√©s.  Ensuite, j'ai √©crit un programme comparant chaque tuile dans chaque sous-√©tape avec l'ensemble d'images correspondant.  J'ai donc obtenu les types de matrice de tuiles pour toutes les sous-√©tapes. <br><br>  Les matrices pourraient √™tre extraites directement de la ROM, mais je n'ai pas pu trouver la documentation sur comment et o√π les donn√©es sont stock√©es.  L'espace ROM √©tant limit√©, les donn√©es de niveau sont g√©n√©ralement pr√©sent√©es sous une forme compress√©e ressemblant √† un format graphique vectoriel.  Chaque jeu utilise son propre format, je n'ai donc pas jug√© n√©cessaire de mener des recherches, car j'avais Map Maker.  De plus, j'avais toujours besoin d'images graphiques des sous-√©tapes.  Si je n'avais pas captur√© les bandes d'arri√®re-plans, alors je devrais √©crire un programme qui g√©n√®re des images √† partir de matrices. <br><br><hr><br><h1>  Recherche de chemin </h1><br>  Apr√®s avoir cr√©√© les matrices, j'ai voulu appliquer l'algorithme de recherche de chemin, √† savoir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'algorithme Floyd-Warshall</a> , qui donne le tableau de sortie contenant les chemins les plus courts entre chacune des paires de sommets du graphique dirig√© avec des bords pond√©r√©s.  L'id√©e √©tait de pr√©-calculer les tables et de les √©crire dans des fichiers, puis de les charger pendant le jeu.  Ayant des tables en m√©moire, le bot peut rechercher et trouver instantan√©ment le chemin le plus court entre deux tuiles de plateforme. <br><br>  Le graphique se compose d'ar√™tes et de sommets.  Si les tuiles de plate-forme sont des sommets, les ar√™tes ne sont que les op√©rations que Simon peut effectuer pour passer d'une plate-forme √† une autre.  Les op√©rations effectu√©es dans une seule tuile sont interdites.  Par exemple, dans un plan √† partir de tuiles, Simon ne peut d√©placer qu'une seule tuile vers la gauche ou une seule tuile vers la droite. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fe2/fa3/03d/fe2fa303d199d5c1cb826da8003acd3a.png"></div><br>  De m√™me, si Simon est dans les escaliers, il peut d√©placer une tuile dans l'une des deux directions possibles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a68/f17/502/a68f175026f789811cf3c7b032f76898.png"></div><br>  Ce sont des op√©rations valides.  Mais des actions telles que le d√©placement du point central de la tuile au bord de la tuile sont trop fractionnaires, car elles ne correspondent pas √† la transition d'un sommet du graphique √† un autre. <br><br>  En plus de marcher √† gauche et √† droite, de descendre et de monter des escaliers, Simon peut sauter sur une autre tuile.  Et il peut sauter √† gauche ou √† droite, √† partir de n'importe lequel des 16 pixels de la surface de la tuile.  Pour r√©duire le nombre d'ar√™tes dans le graphique (et la taille de la table de recherche), je n'ai consid√©r√© que cinq points de r√©pulsion possibles: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/012/37d/aab/01237daabc08e79e6ccd6de83b6a1c0e.png"></div><br>  En ajoutant l'op√©ration "ne rien faire", j'ai eu 15 op√©rations.  Tous sont assez simples pour que le bot puisse facilement d√©terminer la s√©quence d'appuis sur les boutons n√©cessaires √† leur ex√©cution pendant l'ex√©cution du jeu. <br><br>  Pour construire un graphe complet, j'ai cr√©√© une simulation tr√®s simple de la physique du monde de Simon.  Dans cette simulation, les 15 op√©rations sont effectu√©es √† partir de chaque tuile de plate-forme.  Le graphique est construit en observant simplement o√π se trouve Simon.  Plus pr√©cis√©ment, lors de la sp√©cification des coordonn√©es initiales et du fonctionnement, la simulation donne les coordonn√©es finales en sortie.  S'il n'y a pas de coordonn√©es finales, par exemple, lorsque Simon essaie de p√©n√©trer dans un mur ou dans un trou, le programme retourne que l'op√©ration n'est pas valide et ce bord ne fait pas partie du graphique. <br><br>  Pour cr√©er cette simulation, une √©tude approfondie de Simon Belmont √©tait n√©cessaire.  Contrairement aux autres plateformes classiques, o√π le joueur peut passer de la marche √† la course, Simon, lorsqu'il se d√©place horizontalement, se d√©place toujours exactement de 1 pixel par image.  Cela est vrai pour marcher, sauter, monter des escaliers, et m√™me lors du recul lorsque vous attaquez des ennemis. <br><br>  La limitation de la vitesse horizontale simplifie consid√©rablement la reconnaissance des barri√®res.  Le jeu v√©rifie s'il y a un mur √† un pixel devant le personnage, et si n√©cessaire arr√™te le mouvement.  Le contr√¥le est effectu√© en dessous du niveau de la t√™te, ce qui permet √† la t√™te de passer sous des plafonds bas sans interf√©rence avec le mouvement horizontal. <br><br>  Le mouvement vertical est un peu plus compliqu√©.  Si Simon sort du bord de la plateforme, au lieu d'une acc√©l√©ration progressive, il tombe instantan√©ment √† une vitesse de 8 pixels par image.  √âtant donn√© que chaque tuile a une hauteur de 16 pixels (ce qui est un multiple de 8), la reconnaissance du sol est simplifi√©e.  Dans le m√™me temps, le joueur maintient une vitesse horizontale de 1 pixel par image dans la direction obtenue imm√©diatement avant la chute. <br><br>  Le sprite de Simon a une largeur de 16 pixels, et pourtant il peut survoler le bloc par un maximum de ¬± 4 pixels √† partir de son milieu.  Si vous bougez un peu plus, il tombera en dessous. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fd8/b2a/0a4/fd8b2a0a48035271fc78e7209d980dd5.png"></div><br>  Il est int√©ressant de noter que s'il quitte la plate-forme et tombe exactement 1 tuile √† une vitesse de 1 horizontal et 8 pixels verticaux par image, alors il ne se tiendra pas exactement sur le bloc √† l'atterrissage.  L'une de ses jambes restera √† l'int√©rieur du mur jusqu'√† une profondeur de 2 pixels. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/da0/a27/458/da0a274588a45b4e448fbe46ef9e48ca.png"></div><br>  Apr√®s cela, il pourra sortir du mur, mais pas y entrer. <br><br>  Simon ne peut pas changer de direction pendant le saut.  Apr√®s avoir appuy√© sur le bouton A, il fait un chemin fixe le long de la parabole. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/041/db3/a4a/041db3a4afa0f0f93e0533f0ee1dbd48.png"></div><br>  Au sommet, Simon monte de 36 pixels, ce qui lui permet de sauter sur les plateformes √† 2 tuiles de haut.  Et le sommet de la "parabole" est √©tonnamment plat.  Il semble qu'il g√®le dans l'espace pour 9 images compl√®tes, peut-√™tre afin de simplifier les coups de fouet dans l'air.  Si Simon n'a rien sur quoi atterrir, le mouvement de parabole continue jusqu'√† ce qu'il revienne √† sa hauteur d'origine.  Apr√®s cela, il commence √† tomber √† une vitesse de 8 pixels par image, c'est-√†-dire avec la m√™me vitesse constante de chute de la plate-forme. <br><br>  Lorsqu'il y a une plateforme directement au-dessus de la t√™te du personnage, le saut n'est pas autoris√©. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e06/358/0ba/e063580bac81a0ec963336e2886c0e2a.png"></div><br>  Sinon, il ¬´saute¬ª partiellement dans les tuiles de la plate-forme. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/651/56a/f41/65156af41893e3c9008a4836d67efca1.png"></div><br>  Comme indiqu√© pr√©c√©demment, si Simon touche plus que le haut de sa t√™te, il cesse de se d√©placer horizontalement.  C'est assez ennuyeux √† la fin de la premi√®re √©tape du niveau 4, lorsque le joueur essaie de sortir de la grotte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c6/d41/331/1c6d413312f17f67d6247f9a33000499.png"></div><br>  Les escaliers vous permettent de vous d√©placer librement verticalement entre les plates-formes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/05c/5e1/2fc/05c5e12fc0bd66681054052354e13a14.png"></div><br>  Dans un cas, Simon monte les escaliers en passant par la tuile de la plate-forme.  √âtant dans les escaliers, il peut passer librement √† travers le mur. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/522/872/438/5228724383d3d908b5298c62dc73e015.png"></div><br>  Sur les plates-formes mobiles de niveau 4, le joueur est g√©n√©ralement accroupi sous des stalactites basses.  Cependant, vous pouvez vous lever et vous reposer contre eux.  Dans une telle situation, le jeu restreint les mouvements horizontaux, entra√Ænant rapidement Simon dans un pi√®ge √† eau. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/feb/dcd/85f/febdcd85f8f47c08806d00343a74fc02.png"></div><br>  Un simulateur physique qui g√©n√®re des graphiques orient√©s consid√®re Simon comme un rectangle.  Le mouvement de ce rectangle est limit√© par les r√®gles de mouvement d√©crites ci-dessus.  Pour que le bot ne saute pas d'un endroit √† l'autre comme un lapin, les bords des sauts du comte ont √©t√© affect√©s √† un co√ªt plus √©lev√© que les bords de la marche et du d√©placement le long des escaliers. <br><br>  Le tableau g√©n√©r√© par l'algorithme de recherche de chemin contient la distance la plus courte pour chaque tuile de d√©but et de fin (co√ªt total du chemin) et une description de la premi√®re √©tape du chemin.  Cette description comprend la premi√®re op√©ration qui doit √™tre effectu√©e sur ce chemin, et la tuile sur laquelle le personnage se trouvera une fois termin√©e.  Le chemin entier peut √™tre recr√©√© par des recherches r√©p√©t√©es dans le tableau, chacune donnant l'√©tape suivante dans la direction de la tuile finale. <br><br>  Dans certaines sous-√©tapes, les colonnes ne sont pas enti√®rement connect√©es.  Par exemple, au niveau 4, les plateformes sont le seul moyen de traverser l'ab√Æme.  Dans ces sous-√©tapes, le tableau contient des m√©thodes pour se d√©placer dans chacune des √Æles, mais pas entre elles. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e0f/098/f72/e0f098f72ffb3a91bb86d2cf5fa1921b.png"></div><br>  Certains blocs destructibles contiennent des objets cach√©s.  Et la destruction des blocs change ce graphique.  Pour contourner ce probl√®me, un algorithme de recherche de chemins avec et sans blocs fractionn√©s a √©t√© appliqu√© aux sous-√©tapes.  Au moment de l'ex√©cution, CastlevaniaBot surveille les √©tats des blocs √† diviser et utilise la table de recherche appropri√©e. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aca/ac4/8a1/acaac48a1c7f4acd0849f06dab3a9d0a.png"></div><br><hr><br><h1>  √âtat du jeu </h1><br>  CastlevaniaBot s'int√®gre √† Nintaco via <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">son API</a> .  Il enregistre l'impl√©mentation de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code>FrameListener</code></a> pour recevoir un retour dans chaque trame.  √âtant donn√© que l'√©mulateur fonctionne √† environ 60 images par seconde, cet √©couteur doit √™tre renvoy√© √† temps;  de longs calculs ou des temps d'arr√™t ralentiront ou bloqueront l'√©mulateur.  Dans un court laps de temps, CastlevaniaBot lit l'√©tat du jeu, d√©termine son objectif principal, change de strat√©gie si l'objectif a chang√© et remplit la strat√©gie actuelle. <br><br>  CastlevaniaBot lit l'√©tat actuel de Simon Belmont directement √† partir de la RAM du processeur.  Mais je ne peux pas d√©terminer comment les autres objets du jeu sont repr√©sent√©s en m√©moire.  Par cons√©quent, CastlevaniaBot lit directement √† partir de la m√©moire des attributs des objets (Object Attribute Memory, OAM) - une zone qui stocke une liste des sprites affich√©s. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/296/b58/46a/296b5846a26530aa657294d619e5ad63.png"></div><br>  Cette technique fonctionne et est g√©n√©ralement applicable √† d'autres jeux, mais pr√©sente de nombreux inconv√©nients.  L'ordre des sprites dans OAM est en constante √©volution.  S'il y a plusieurs instances du m√™me type d'ennemi sur l'√©cran en m√™me temps, alors la seule fa√ßon de les suivre est de d√©terminer leur proximit√©, de comparer les derni√®res coordonn√©es du sprite avec les coordonn√©es de l'image pr√©c√©dente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46d/236/258/46d23625808baf3abb91916e4f80baed.png"></div><br>  Certains objets de jeu consistent en des sprites r√©p√©titifs, tels que des tours en os. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1b7/49a/dcb/1b749adcb05680e5a22247c783d8bac2.png"></div><br>  Les plates-formes mobiles se composent d'un sprite se r√©p√©tant 4 fois. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e0/f85/ea8/7e0f85ea889b5e824a010d04e26f03d2.png"></div><br>  Le tri de ces deux cas n√©cessite une logique suppl√©mentaire, facile √† mettre en ≈ìuvre.  Les am√©liorations d'armes secondaires et certains types d'armes secondaires utilisent eux-m√™mes les m√™mes sprites.  Pire, au niveau 5, les Chevaliers empruntent les sprites d'armes secondaires de Simon. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/44c/cd1/08e/44ccd108ea9b25c442a5653d79f0c49e.png"></div><br>  Heureusement, √† l'exception de l'eau b√©nite, CastlevaniaBot n'utilise que des armes secondaires o√π les am√©liorations ne sont g√©n√©ralement pas disponibles, comme dans les combats de boss.  Et le sprite de mise √† niveau de l'eau b√©nite est diff√©rent du sprite utilis√© lors de son lancement. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/014/1d2/faf/0141d2faf5e0168ae8d4046cdbfbe278.png"></div><br>  Certains objets de jeu clignotent lors de la cr√©ation, par exemple, des boules de cristal √† la fin des combats de boss, des tresses de mort et le corps de Dracula.  Les sprites clignotants apparaissent et disparaissent de OAM, donc une logique suppl√©mentaire est n√©cessaire pour suivre ces objets. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b80/5f1/f8b/b805f1f8bf89efb9c021b716a0d39e25.png"></div><br>  Il convient √©galement de noter qu'en raison des limitations mat√©rielles, NES ne peut afficher que 8 images-objets par ligne raster.  √âtant donn√© que la priorit√© des sprites d√©pend en partie de leurs indices dans OAM, l'ordre dans chaque image est m√©lang√© de mani√®re al√©atoire pour √©viter un d√©calage qui rend un sprite invisible en permanence.  Plusieurs sprites clignotent √† leur tour, changeant progressivement leur priorit√©.  Ce clignotement n'affecte pas la lecture des sprites d'OAM.  Les donn√©es restent l√†, mais le mat√©riel √©mul√© ne les affiche pas.  Cela diff√®re de la situation d√©crite ci-dessus avec un clignotement lors de la cr√©ation de sprites.  De plus, Nintaco dispose d'une option qui r√©duit consid√©rablement le clignotement du mat√©riel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b9/527/fe6/6b9527fe61e614012f1fd50d1ad0625e.png"></div><br>  Et enfin, une petite partie de l'√©tat du jeu est lue √† partir des tables de noms PPU - une zone de m√©moire contenant toutes les donn√©es d'arri√®re-plan.  Cela comprend la v√©rification des blocs destructibles et le suivi des positions de ¬´l'√©crasement¬ª au niveau 2. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d35/f3c/378/d35f3c378b284474c8d2b5386a78fb57.png"></div><br><hr><br><h1>  Machines √† √©tats heuristiques </h1><br>  Les strat√©gies sont des machines √† √©tats.  CastlevaniaBot les d√©finit comme une classe abstraite avec des m√©thodes <code>init</code> et <code>step</code> .  La m√©thode <code>init</code> est appel√©e lorsque CastlevaniaBot passe √† la strat√©gie appropri√©e, permettant √† la machine d'√©tat de se r√©initialiser.  Et la m√©thode <code>step</code> ex√©cute la strat√©gie.  Par exemple, la m√©thode de strat√©gie par <code>step</code> pour les poissons v√©rifie si un poisson est √† port√©e d'un fouet, et si c'est le cas, le bot frappe avec un fouet.  Sinon, il v√©rifie s'il est possible d'atteindre la distance de frappe par un saut, et si c'est le cas, le bot saute.  Et enfin, si le bot est trop proche de l'ennemi, il s'en √©loigne.  Avec ces r√®gles simples, CastlevaniaBot bat le poisson humain. <br><br>  Pour simplifier au maximum les strat√©gies d'√©criture, j'ai cr√©√© une biblioth√®que d'actions possibles √† r√©aliser.  Par exemple, au lieu d'appuyer et de rel√¢cher le bouton A pour sauter, le bot appelle simplement la m√©thode de saut depuis la biblioth√®que.  Et avant cela, il demande √† la biblioth√®que si Simon est sur la plate-forme et peut sauter. <br><br>  L'approche et l'√©loignement de la cible sont des actions standard effectu√©es √† l'aide des op√©rations de la table cr√©√©e par l'algorithme de recherche de chemin.  Par exemple, la strat√©gie de bougie utilise la m√©thode de biblioth√®que <code>routeAndFace</code> , qui non seulement dirige Simon vers certaines coordonn√©es sp√©cifi√©es, mais la fait √©galement pivoter vers la gauche ou la droite apr√®s les avoir frapp√©es.  De plus, selon la hauteur des bougies, la strat√©gie effectue un saut ou un squat avant de frapper un fouet.  Un objet qui est tomb√© des bougies sera cr√©√© dans l'air et tombera ou tombera lentement au sol.  Une strat√©gie de ramassage dirige Simon vers la tuile la plus proche juste en dessous de lui avant que l'objet ne touche le sol. <br><br>  Pour s'√©loigner des ennemis, la biblioth√®que doit savoir comment se d√©placer √† gauche ou √† droite sans tomber dans les stands.  En g√©n√©ral, cela est accompli en recherchant des chemins vers les bords gauche ou droit du sous-√©tage.  Mais dans certaines r√©gions, le chemin le plus court vers le bord gauche n√©cessite initialement de se d√©placer vers la droite, et vice versa.  Lorsque de tels probl√®mes sont apparus, j'ai ajout√© une logique sp√©cifiquement pour les sous-√©tapes, en dirigeant Simon vers les bords gauche et droit de la plate-forme actuelle. <br><br><hr><br><h1>  Proc√©dure pas √† pas </h1><br>  Dans cette section, je d√©crirai en d√©tail les strat√©gies utilis√©es par CastlevaniaBot, en commentant la proc√©dure pas √† pas. <br><br>  Le jeu commence dans la cour devant le ch√¢teau.  Les objets dans le cadre sont dispos√©s pour s√©lectionner la cible principale, qui dans ce cas est une colonne avec une flamme.  La strat√©gie de colonne indique au bot d'approcher la colonne et d'utiliser le fouet lorsqu'il est √† port√©e de main. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14c/647/750/14c6477507cee1d822e6cadbcafbda5a.png"></div><br>  Apr√®s avoir frapp√© le fouet et d√©truit la colonne, un √©l√©ment est cr√©√©.  La priorit√© de tous les articles est sup√©rieure √† celle des colonnes de flammes.  Par cons√©quent, CastlevaniaBot r√©agit √† cela en utilisant une strat√©gie pour collecter l'√©l√©ment qui appara√Æt avant de passer aux colonnes suivantes. <br><br>  Lors du classement des objets, CastlevaniaBot prend toujours en compte un objectif √† long terme: terminer un niveau avant la fin du temps imparti.  Lors de la cr√©ation d'une liste d'objectifs potentiels, une porte vers le niveau suivant y est toujours ajout√©e.  La porte se voit attribuer une faible priorit√©, mais apr√®s la destruction de toutes les colonnes et la collecte de tous les objets, elle devient une priorit√©.  √Ä une seule exception pr√®s: CastlevaniaBot sait d√©couvrir tous les tr√©sors cach√©s et saute par-dessus l'entr√©e du ch√¢teau pour cr√©er un sac d'argent clignotant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/200/7f5/eaa/2007f5eaa4405bd611bd8711017fbe24.png"></div><br>  Apr√®s √™tre entr√© dans le ch√¢teau, CastlevaniaBot voit des fant√¥mes et des bougies.  Les bougies et les objets fabriqu√©s ont priorit√© jusqu'√† ce que les fant√¥mes se rapprochent. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8a7/9ab/843/8a79ab84345e6a16a9231c5a7f45ceae.png"></div><br>  Il semble souvent que le fouet d√©truit les ennemis sans les toucher.  J'ai trouv√© une table de rectangle de collision dans la ROM du jeu, donc CastlevaniaBot sait exactement quand quelque chose est √† port√©e de fouet.  Et comme les rectangles de collision d√©passent souvent l√©g√®rement au-del√† des limites des sprites, le fouet peut frapper la ¬´partie invisible¬ª. <br><br>  Dans la plupart des cas, lors de la destruction de bougies, CastlevaniaBot saute verticalement, plut√¥t que vers l'avant.  Il s'agit d'une tactique d'√©vitement des risques.  √âtant donn√© qu'il est en l'air, il est impossible de changer la direction du mouvement, une foule d'ennemis en approche peut compliquer un atterrissage en toute s√©curit√© ou le rendre impossible.  De plus, avec un saut vertical, CastlevaniaBot reste sur le m√™me bloc;  il n'a pas besoin de v√©rifier si le saut entra√Ænera une chute sur la plate-forme inf√©rieure ou au fond de la fosse. <br><br>  Lorsqu'il n'y a pas de bougies √† d√©truire ou d'objets √† collecter, CastlevaniaBot commence √† chasser les fant√¥mes.  Mais la ¬´strat√©gie Panther¬ª lui ordonne de rester immobile, en attendant que l'ennemi tombe dans les limites d'un coup de fouet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/434/9a0/bd5/4349a0bd58a7078c6b0d1951845bfea2.png"></div><br>  En plus du fait que les bougies servent de sources de coeurs et d'autres objets, elles guident le joueur tout au long de la sc√®ne.  Par exemple, dans l'image ci-dessous, les bougies dans le coin sup√©rieur droit ¬´invitent¬ª le joueur √† monter les escaliers.  Cependant, pour monter les escaliers, le joueur doit d'abord aller √† gauche, c'est pourquoi les bougies disparaissent de l'√©cran.  √âtant donn√© que les solutions CastlevaniaBot sont bas√©es sur la hi√©rarchisation des objets visibles √† l'√©cran, cette situation peut conduire √† un cycle sans fin o√π le bot s√©lectionne alternativement le chemin le plus court vers les bougies (√† gauche) ou le chemin le plus court vers la porte de sortie (√† droite). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/309/d1a/8e7/309d1a8e7f1f5a39a8b34411108b94b8.png"></div><br>  Des probl√®mes similaires peuvent √™tre r√©solus de plusieurs mani√®res.  Par exemple, CastlevaniaBot peut √™tre √©quip√© de stockage d'objets, sachant que les objets continuent d'exister, m√™me s'ils ne sont pas visibles.  Mais pour cela, il faut tout de m√™me les voir d√®s le d√©but.  Si les bougies √©taient encore plus √† droite, alors apr√®s leur d√©tection, il faudrait remonter encore plus loin. <br><br>  Dans cet esprit, j'ai ajout√© des incitations qui poussent CastlevaniaBot √† explorer des zones de la sc√®ne qu'il ignorerait normalement.  Ces incitations fonctionnent de la m√™me mani√®re que les portes de sortie, entra√Ænant CastlevaniaBot l√† o√π il doit aller.  De plus, j'ai ajout√© des r√®gles qui lui font ignorer les bougies et les objets trop √©loign√©s (en termes de distance parcourue, et non en ligne droite). <br><br>  Apr√®s avoir mont√© les escaliers et d√©truit les bougies, de l'eau b√©nite est cr√©√©e - la plus pr√©cieuse de toutes les armes secondaires.  CastlevaniaBot le s√©lectionne en lui √©changeant un poignard. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c5/575/00a/4c557500adad3a899c43ea80b983d6fb.png"></div><br>  Comme avec le sac d'argent au d√©but du jeu, CastlevaniaBot conna√Æt tous les blocs destructibles avec des objets cach√©s, et pour utiliser le fouet pour d√©truire les blocs, il utilise une strat√©gie similaire √† la strat√©gie des bougies. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1eb/007/d43/1eb007d4384996127451979738a3c6ea.png"></div><br>  Avec un mouvement suppl√©mentaire de CastlevaniaBot, vous remarquerez qu'il commence √† utiliser de l'eau b√©nite pour d√©truire les fant√¥mes et les bougies.  Cela peut sembler redondant, mais sert un objectif important.  Castlevania r√©compense les joueurs pour l'utilisation d'armes secondaires avec double et triple exposition.  En d'autres termes, CastlevaniaBot <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">broie</a> les am√©liorations d'armes secondaires. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a7/186/be0/6a7186be0588f46012a241cc9745d586.png"></div><br>  Apr√®s avoir appuy√© sur le bouton B, il y a un d√©lai de 16 images avant de frapper un fouet.  Le fouet reste long pendant 10 images suppl√©mentaires, mais n'est valable que dans la premi√®re de ces dix.  CastlevaniaBot utilise ce fait pour am√©liorer la vis√©e.  En particulier, il suit la vitesse de tous les objets dans le cadre, en supposant que la cible principale continuera de se d√©placer le long d'un chemin lin√©aire.  Il appuie ensuite sur le bouton B 16 images avant que la cible ne rencontre un fouet.  L'ennemi peut toujours changer de direction pendant ces 16 images, mais g√©n√©ralement cette simple op√©ration heuristique fonctionne. <br><br>  Cependant, apr√®s avoir franchi la porte, CastlevaniaBot rencontre des chauves-souris rouges.  Comme les t√™tes de m√©duses, les chauves-souris rouges volent √† travers l'√©cran, traversant une sinuso√Øde √† travers des plates-formes et des escaliers.  Pour pr√©dire o√π sera la chauve-souris rouge apr√®s 16 images, j'ai enregistr√© le mouvement de l'une d'elles dans un tableau.  Pendant l'ex√©cution du jeu, CastlevaniaBot suit les chauves-souris et attend les pics ou les creux de la trajectoire o√π la vitesse verticale change de signe.  Ensuite, il est capable de comparer les coordonn√©es avec les valeurs d'une table pr√©-cr√©√©e.  Cela permet √† la strat√©gie appropri√©e de frapper la batte rouge avec un fouet, de se pencher ou de rebondir dessus. <br><br>  Lors du passage (speedrana) de Castlevania, les joueurs effectuent des man≈ìuvres qui rendent le jeu aussi d√©terministe que possible.  Par exemple, ils ont constat√© que si √† la fin du niveau 1 pour d√©truire le bloc et ramasser une am√©lioration d'arme dans une certaine s√©quence de temps, le boss se comporterait conform√©ment au sch√©ma souhait√©, lui permettant de vaincre rapidement. <br><br>  Peu importe le niveau d'exp√©rience, ils ne peuvent pas apprivoiser compl√®tement le g√©n√©rateur de nombres al√©atoires.  N√©anmoins, √©tant donn√© que CastlevaniaBot peut contr√¥ler les pressions sur les boutons avec une pr√©cision image par image, il peut amener le concept de passage de vitesse √† sa limite, en passant chaque fois le jeu d'une mani√®re absolument identique.  S'il le faisait, ce ne serait pas mieux que de passer le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TAS</a> .  Par cons√©quent, CastlevaniaBot ajoute arbitrairement des erreurs et des retards √† ses actions en utilisant un g√©n√©rateur de nombres al√©atoires externe pour √©viter un gameplay d√©terministe.  Par exemple, quand il frappe avec un fouet une bougie plac√©e haut, il ajoute d√©lib√©r√©ment un d√©lai pour un nombre al√©atoire d'images au saut et √† la frappe.  Ces petits changements affectent consid√©rablement la progression du jeu. <br><br>  Bien que CastlevaniaBot cherche √† √©viter le d√©terminisme, il a n√©anmoins emprunt√© un concept √† speedrunning: les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">d√©g√¢ts augmentent</a> .  Dans 50% des cas, CastlevaniaBot √©vite compl√®tement le passage du donjon de poissons humains en sautant sur la chauve-souris rouge, qui la jette sur une plate-forme autrement inaccessible. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/375/733/1ed/3757331edfa439d3ed9eb1ef3be8443e.png"></div><br>  Dans l'autre moiti√© des cas, CastlevaniaBot choisit de se battre avec des poissons humains.  Leurs boules de feu ont une priorit√© √©lev√©e et CastlevaniaBot les frappe avec un fouet, esquive ou rebondit selon la situation. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e4/f51/077/6e4f51077f42c471bc0484e64aaa14b6.png"></div><br>  En raison de l'impr√©visibilit√© de cr√©er des ennemis et leurs boules de feu, la plupart des joueurs ex√©cutent g√©n√©ralement une partie avec des poissons humains.  Mais CastlevaniaBot passe du temps sur eux, recueille tous les c≈ìurs et m√™me un tr√©sor cach√© dans le bord tr√®s droit.  Le bot sait exactement quels objets sont contenus dans chaque bougie, et comme il pr√©f√®re utiliser de l'eau b√©nite, il saute les bougies dans lesquelles les chronom√®tres sont cach√©s.  Cependant, si vous restez dans cette partie et que vous vous battez avec des poissons, vous pouvez parfois in√©vitablement prendre un chronom√®tre. <br><br>  Les √©tapes se terminent souvent par des croix d√©truisant tous les ennemis √† l'√©cran.  Si vous √™tes curieux, je dirai que les croix ne peuvent pas tuer les boss √† la fin d'un niveau.  En fait, des croix sont parfois cr√©√©es m√™me pendant les combats de boss.  Par exemple, dans la bataille avec M√©duse, des croix apparaissent parfois lors de la mort de serpents.  Mais ces croix ne peuvent tuer que d'autres serpents. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c3e/328/e31/c3e328e311c90509ffc2450e4b991436.png"></div><br>  Apr√®s avoir franchi la porte, CastlevaniaBot rencontre √† nouveau des fant√¥mes.  Dans la capture d'√©cran ci-dessous, il veut sauter sur la plate-forme inf√©rieure, mais les fant√¥mes l'emp√™chent de bouger.  Lorsqu'une table cr√©√©e par un algorithme de recherche de chemin indique √† CastlevaniaBot de sauter, il examine l'espace autour de la plate-forme cible.  S'il s'av√®re qu'il atterrit sur des ennemis, le saut n'est pas effectu√©.  Dans ce cas, ce m√©canisme oblige CastlevaniaBot √† attendre que les fant√¥mes lib√®rent sa place. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c3b/2ef/817/c3b2ef81726485f94f1f391efa1ab2e6.png"></div><br>  Cette r√®gle ¬´v√©rifier les ennemis avant de sauter¬ª illustre l'un des principes de la structure CastlevaniaBot: elle doit √™tre r√©gie par des r√®gles simples et aussi g√©n√©ralis√©es que possible.  Dans certaines parties du jeu, il est n√©cessaire d'utiliser des strat√©gies ponctuelles qui r√©solvent des probl√®mes tr√®s sp√©cifiques.  Mais dans la plupart du jeu, les actions des bots sont motiv√©es par des heuristiques r√©utilisables.  Je n'ai pas √©crit une √©quipe qui l'a fait s'arr√™ter √† ce point particulier et attendre que les fant√¥mes se d√©placent.  Ce comportement r√©sulte de l'heuristique. <br><br>  CastlevaniaBot compl√®te le niveau en tuant la chauve-souris fant√¥me avec une triple eau b√©nite.  Mais sa strat√©gie d'attaque est d√©termin√©e par son arme secondaire.  En fait, s'il n'avait pas d'arme secondaire, il √©tait pr√™t √† tuer le boss avec un seul fouet.  Un cas particuli√®rement int√©ressant est le meurtre d'une chauve-souris fant√¥me avec une hache.  Comme dans le cas de la chauve-souris rouge, j'ai enregistr√© dans le tableau le mouvement de la hache le long de la parabole.  Pendant l'ex√©cution du jeu, CastlevaniaBot effectue un d√©calage de table en l'associant √† chacune des tuiles de sol.  Cela vous permet de calculer le point optimal pour tuer le boss avec une hache. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0c/480/2de/d0c4802de26d9629ca4376a67513106f.png"></div><br>  Juste avant de ramasser la boule de cristal, CastlevaniaBot lance l'arme secondaire dans diff√©rentes directions, sachant qu'elle g√®lera dans l'air apr√®s avoir touch√© la balle.  Puis il saute au hasard √† plusieurs reprises et frappe avec un fouet, esp√©rant se figer dans une pose √©trange. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f90/83b/d56/f9083bd561d92261d581128157bdf205.png"></div><br>  Au d√©but du niveau 2, CastlevaniaBot √©vite les premi√®res bougies dans lesquelles le boomerang est cach√©.  La strat√©gie de travailler avec un chevalier-lancier est une campagne contre les strat√©gies des fant√¥mes ou des poissons, mais c'est le premier ennemi √† tuer qui a besoin de deux coups.  La chauve-souris noire sommeille jusqu'√† ce que vous vous en approchiez, apr√®s quoi elle d√©colle et se d√©place suffisamment lin√©airement pour √™tre tu√©e avec un fouet en utilisant les heuristiques simples mentionn√©es ci-dessus. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3e/d23/01e/a3ed2301ee4a6689ef64648439eb1939.png"></div><br>  Ayant d√©truit les briques du mur, dans 50% des cas, CastlevaniaBot semble quitter la pi√®ce sans lever sa couronne.  Mais en est-il ainsi?  En fait, dans de tels cas, il ramasse la couronne en utilisant le bug du jeu.  Puisque l'extr√©mit√© de l'√©chelle sup√©rieure co√Øncide horizontalement avec l'emplacement de la couronne, le joueur, en passant devant et derri√®re l'√©cran, est momentan√©ment baiss√©.  Si vous √©coutez le son ou regardez les lunettes, vous pouvez voir que le bot prend r√©ellement la couronne. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/348/459/ef8/348459ef8dc72330b2d1bf99c63eb07d.png"></div><br>  Au niveau 2, les ennemis n'attaquent pas le joueur lorsqu'il se trouve sur une plate-forme mobile.  CastlevaniaBot doit simplement attendre que la plate-forme approche, entrer dans la plate-forme, attendre qu'elle atteigne l'autre c√¥t√©, puis descendre.  Il existe une l√©g√®re variation pour les plates-formes qui ne touchent pas les carreaux d'autre part.  Dans de tels cas, CastlevaniaBot ne descend pas, mais saute de la plate-forme. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/161/7e3/f4c/1617e3f4c2b0f50832dba59992438aa7.png"></div><br>  Une porte m√®ne dans un couloir rempli de t√™tes volantes, et CastlevaniaBot r√©agit √† cela en avan√ßant.  Comme c'est le cas avec les plateformes mobiles, CastlevaniaBot sait que cette strat√©gie doit √™tre appliqu√©e en fonction de sa position, et non en fonction de la priorit√© des objets de jeu √† l'√©cran.  Cependant, d√®s que toutes les t√™tes de m√©duses passent, il revient √† cette technique pour choisir la strat√©gie qui sera utilis√©e plus loin. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c33/0ce/dd8/c330cedd8cdb3748b08988787e1b58df.png"></div><br>  Une autre strat√©gie, en fonction de la position, est d√©clench√©e apr√®s avoir gravi l'√©chelle suivante menant √† la zone remplie de t√™tes de m√©duses.  Dans 50% des cas, CastlevaniaBot saute intentionnellement sur la t√™te d'une m√©duse pour obtenir un boost de d√©g√¢ts, le poussant vers la plate-forme sup√©rieure √† c√¥t√© de la porte menant √† l'√©tape suivante.  Ce sont les deux seuls bonus de d√©g√¢ts que CastlevaniaBot conna√Æt.  Contrairement aux coureurs de vitesse, il ne l'ex√©cute pas pour gagner du temps, c'est juste une autre contribution au non-d√©terminisme du passage. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ea/e45/c5c/0eae45c5c564301aa03fa376b85f43f2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Passer √† travers l'√©crasement est une strat√©gie bas√©e sur la position int√©ressante, r√©p√©t√©e trois fois. </font><font style="vertical-align: inherit;">CastlevaniaBot attend que le ¬´crush¬ª le plus proche √† gauche de celui-ci atteigne la position souhait√©e, apr√®s quoi il le traverse. </font><font style="vertical-align: inherit;">Apr√®s l'avoir d√©pass√©, il s'arr√™te, se retourne, frappe les bougies avec un fouet, ramasse l'objet cr√©√© et r√©p√®te l'op√©ration avec le ¬´coup de c≈ìur¬ª ult√©rieur. </font><font style="vertical-align: inherit;">L'un des objets pourrait potentiellement √™tre de l'eau b√©nite, donc il d√©truit toujours ces bougies.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7d2/2b4/303/7d22b4303c14e5f460b4b090918ef1fb.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s ¬´l'√©crasement¬ª, les fant√¥mes et les tours d'os apparaissent pour la premi√®re fois. </font><font style="vertical-align: inherit;">Les fant√¥mes sont tr√®s faciles √† viser, mais pour les tuer, vous avez besoin de quelques coups. </font><font style="vertical-align: inherit;">Il est encore plus facile de viser les tours en os car elles ne bougent pas. </font><font style="vertical-align: inherit;">La m√™me strat√©gie est utilis√©e pour leurs boules de feu que pour les boules poissons-humains.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b1/0ad/931/7b10ad9316ab8e0ef3f53007740ffd4a.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le niveau 2 se termine g√©n√©ralement avec CastlevaniaBot tuant instantan√©ment Medusa avec un flux infini d'eau b√©nite. </font><font style="vertical-align: inherit;">Cependant, il est pr√™t √† travailler avec tout autre type d'arme secondaire.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46a/02c/a28/46a02ca28233821148bd64afcf43ef65.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au niveau 3, des cavaliers apparaissent. </font><font style="vertical-align: inherit;">CastlevaniaBot r√©agit √† eux en attendant qu'ils sautent dans les limites du fouet. </font><font style="vertical-align: inherit;">Si les sauteurs sautent le joueur, alors CastlevaniaBot se d√©place dans la direction oppos√©e et les frappe avec un fouet avant qu'ils ne touchent le sol.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/863/ec4/58e/863ec458ebc43b8c3959750018c9952e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, des squelettes blancs apparaissent. </font><font style="vertical-align: inherit;">Ils ont un sch√©ma tr√®s al√©atoire. </font><font style="vertical-align: inherit;">De plus, ils jettent des os. </font><font style="vertical-align: inherit;">Au niveau 3, CastlevaniaBot essaie d'√©viter d'√™tre touch√©. </font><font style="vertical-align: inherit;">Mais j'ai trouv√© qu'aux niveaux suivants, les os ne font que distraire, et il sera plus efficace de simplement les ignorer. </font><font style="vertical-align: inherit;">La strat√©gie de CastlevaniaBot pour les squelettes blancs consiste simplement √† les battre.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c4d/eaf/9e4/c4deaf9e44458c08487d89d22b5a9618.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot attend que les corbeaux s'envolent. </font><font style="vertical-align: inherit;">Ensuite, en fonction de la hauteur du corbeau par rapport au joueur, il calcule avec pr√©cision quand frapper avec un fouet apr√®s le saut.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d0b/7ce/78c/d0b7ce78cf8ea65a6001ca63a0a1d087.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s √™tre pass√© √† l'√©tape suivante, CastlevaniaBot frappe ind√©pendamment les bougies d'o√π le chronom√®tre appara√Æt, puis attend jusqu'√† ce qu'il disparaisse. </font><font style="vertical-align: inherit;">Un peu devant et derri√®re l'√©cran est un corbeau. </font><font style="vertical-align: inherit;">Le bot d√©truit des bougies avant un combat de corbeau afin de r√©duire le risque de les toucher accidentellement et d'obtenir des armes secondaires ind√©sirables.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fb3/a6a/c85/fb3a6ac852c7633a530ea2666f3cf3c0.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Juste en face de l'emplacement des momies, CastlevaniaBot va √† gauche sur la plate-forme pour d√©clencher l'apparition d'un sac d'argent cach√©. </font><font style="vertical-align: inherit;">Il le fait simplement par int√©r√™t, car il ne peut le soulever d'aucune fa√ßon.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f4/62d/ebe/2f462debef355d502ee9969489c0fa9b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ensuite, CastlevaniaBot frappe intentionnellement les bougies d'o√π tombe la dague. </font><font style="vertical-align: inherit;">Comme dans le cas du chronom√®tre, il le fait pour ne pas le reprendre par hasard lors des actions suivantes.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/094/9c7/0fa/0949c70faa3fcc414107b04ae8e1be68.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Et enfin, les momies sont vaincues par la pluie de l'eau b√©nite. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee4/0a6/75a/ee40a675a2432df6a4a3c24d2681c682.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot est pr√™t √† utiliser n'importe quelle arme secondaire pour combattre tous les boss. </font><font style="vertical-align: inherit;">En fait, les strat√©gies d'utilisation des armes secondaires changent compl√®tement si, pour une raison quelconque, un bloc contenant un morceau de porc est d√©truit. </font><font style="vertical-align: inherit;">Sans ce bloc, il est impossible de monter sur la plate-forme sup√©rieure, c'est pourquoi vous devez vous battre au niveau inf√©rieur.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au niveau 4, les plateformes mobiles reviennent. </font><font style="vertical-align: inherit;">Et cette fois, il y a une chance que des chauves-souris rouges apparaissent sur le chemin. </font><font style="vertical-align: inherit;">Pour r√©duire la probabilit√© de leur attaque, il s'attend √† ce que l'arriv√©e de la plate-forme co√Øncide avec la destruction de la chauve-souris rouge. </font><font style="vertical-align: inherit;">√âtant donn√© que les souris rouges apparaissent √† intervalles fixes, cela donne √† CastlevaniaBot suffisamment de temps pour traverser la fosse d'eau sans chauves-souris. </font><font style="vertical-align: inherit;">Il est pr√™t √† faire face aux chauves-souris et aux poissons apparaissant au hasard sur la plate-forme, mais cela rend tr√®s dangereux de sauter sur et depuis la plate-forme. </font><font style="vertical-align: inherit;">La strat√©gie utilis√©e par CastlevaniaBot augmente les chances de succ√®s.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f4a/cb3/35b/f4acb335ba2cf17e29d42dfffe51d689.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La m√™me strat√©gie se r√©p√®te au milieu de la sc√®ne. </font><font style="vertical-align: inherit;">Cette fois, le saut vers la plate-forme mobile est beaucoup plus long, il est donc essentiel de d√©truire la chauve-souris rouge avant le saut.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b0/42c/e0d/6b042ce0d1ee7845c83d5ff1ea5c65cf.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Comme le montre la capture d'√©cran ci-dessus, les bougies sont toujours situ√©es √† une distance de 64 pixels les unes des autres. C'est peut-√™tre un artefact du fait que les donn√©es de niveau sont pr√©sent√©es dans la ROM dans un format similaire aux graphiques vectoriels, √©conomisant de l'espace. Mais pour une raison quelconque, les concepteurs ont d√©cid√© d'aligner les bougies non pas avec les centres, mais avec les bords des carreaux. Dans ce cas, les bougies sont align√©es avec les deux extr√©mit√©s de la plate-forme. Par cons√©quent, apr√®s les avoir touch√©s, un objet qui appara√Æt peut tomber directement dans l'ab√Æme sous eux.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Je pense qu'√† un moment donn√©, les concepteurs ont r√©alis√© ce probl√®me. Mais d'ici l√†, d√©placer toute la s√©rie de bougies √† tous les niveaux finis pour les aligner avec le centre des carreaux pourrait causer d'autres probl√®mes. Au lieu de cela, ils ont d√©cid√© de d√©placer au hasard les bougies d'un pixel vers la droite ou la gauche de l'endroit o√π elles ont √©t√© cr√©√©es. Par cons√©quent, apr√®s avoir frapp√© les bougies du c√¥t√© droit de la capture d'√©cran, il y a 50% de chances que l'eau b√©nite qu'ils contiennent tombe sur la plate-forme. Dans la moiti√© restante des cas, il tombe √† l'eau. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot √©vite g√©n√©ralement compl√®tement ces bougies car il conserve avec succ√®s l'eau b√©nite. Mais s'il en a besoin, il se rapproche de ces bougies pour garantir la s√©lection de l'eau b√©nite qui en est tomb√©e.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot rencontre un tas de cavaliers. </font><font style="vertical-align: inherit;">Dans cette zone, apr√®s avoir tu√© des cavaliers, des haches apparaissent souvent. </font><font style="vertical-align: inherit;">CastlevaniaBot les √©vite, car l'eau b√©nite est particuli√®rement utile pour combattre le boss.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50e/182/f5f/50e182f5fe39bc3e3145bb68aae819d7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lors du passage √† la derni√®re √©tape du niveau, CastlevaniaBot ignore compl√®tement le dragon osseux. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/093/45e/a6c/09345ea6ca0024888d7be0f8d25785f6.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mais il se d√©barrasse des deux suivants avec des coups de fouet rapides. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5f/0e5/d57/d5f0e5d5706307c36d5d9dd9c19052e7.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le monstre de Frankenstein et Igor sont d√©truits par un flux constant de coups avec un fouet et de l'eau b√©nite. </font><font style="vertical-align: inherit;">Comme avec d'autres patrons, CastlevaniaBot peut √©galement g√©rer d'autres armes secondaires, ou sans elles. </font><font style="vertical-align: inherit;">Cependant, les chances de survie sans eau b√©nite sont r√©duites.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/23f/606/220/23f6062203ce695c2a38c9d2d170926e.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au niveau 5, CastlevaniaBot s'occupe √† nouveau des squelettes blancs. </font><font style="vertical-align: inherit;">Mais cette fois, il utilise des variations de strat√©gie rarement vues au niveau 3. Selon l'endroit o√π elles apparaissent, CastlevaniaBot jette de l'eau b√©nite puis recule pour attirer les squelettes en flammes. </font><font style="vertical-align: inherit;">Pr√®s des escaliers, il passe sous les squelettes pour les diriger l√† o√π ils devraient √™tre.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/64e/c6c/610/64ec6c6100a72265aab1f024c6561718.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Au niveau 5, les squelettes rouges renaissent d'abord. </font><font style="vertical-align: inherit;">CastlevaniaBot suit l'heure du dernier coup sur eux, afin de savoir quand il est s√ªr de passer par les os rouges.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8b6/628/54c/8b662854cf5582b93cf299b0852964c9.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La premi√®re salle de l'√©tape 14 est enti√®rement trait√©e par une √©norme strat√©gie. CastlevaniaBot tue d'abord le cavalier. Il attend ensuite que le chevalier inf√©rieur lance la hache, frappe la hache avec un fouet et monte lentement les escaliers inf√©rieurs. Cela pousse le chevalier inf√©rieur derri√®re l'√©cran, ce qui entra√Æne sa disparition. Il attend ensuite que la zone sup√©rieure soit libre d'axes, frappe les bougies et r√©cup√®re les objets qui sont apparus. Puis il s'approche de la base des escaliers menant au chevalier sup√©rieur. Lorsque le haut chevalier lance la hache haut, CastlevaniaBot court apr√®s lui. Cela pousse le chevalier sup√©rieur vers la gauche et presque compl√®tement de l'√©cran, mais ne le d√©truit pas. CastlevaniaBot se penche sous la hache de retour, et peut-√™tre sous la deuxi√®me hache abandonn√©e, puis s'approche enfin des escaliers vers la sous-√©tape suivante.</font></font> Hourra! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93a/727/488/93a727488c3cd37cd381668415c1261b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Apr√®s avoir pass√© plusieurs escaliers, CastlevaniaBot rencontre √† nouveau un chevalier avec une hache. </font><font style="vertical-align: inherit;">Il utilise de l'eau b√©nite pour l'√©tourdir, puis le termine avec un fouet. </font><font style="vertical-align: inherit;">S'il n'y a pas d'eau b√©nite, il continue de battre avec un fouet, pourchassant le chevalier jusqu'√† sa mort.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/81c/992/8d6/81c9928d6a77554910fb989df1fd4932.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En montant les escaliers du niveau 5, CastlevaniaBot doit souvent attendre que le squelette rouge s'√©loigne du haut ou du bas des escaliers. </font><font style="vertical-align: inherit;">Vers la fin du niveau, la tour d'os rend cette t√¢che encore plus difficile. </font><font style="vertical-align: inherit;">Selon la fa√ßon dont les squelettes d√©cident de se d√©placer, CastlevaniaBot descend et monte les escaliers jusqu'√† ce qu'il puisse passer.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/65a/cd8/ed8/65acd8ed8ae89e882702cb9387b8c432.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour traiter des groupes de squelettes rouges, une logique suppl√©mentaire est requise afin que le bot ne tombe pas dans une boucle sans fin. Si CastlevaniaBot les battra s√©par√©ment avec un fouet, avec un intervalle tel que le premier coup a le temps de revivre, alors il tombera dans un cycle o√π il continuera √† d√©truire des squelettes ressuscitant sans fin. Pour √©viter cela, CastlevaniaBot ne frappera pas avec un fouet d'un squelette rouge debout √† c√¥t√© d'un tas d'os rouges. Cette r√®gle permet aux os rouges de rena√Ætre √† c√¥t√© du squelette rouge encore vivant, ce qui permet de les toucher tous les deux en m√™me temps. Sans un intervalle entre leur destruction, aucun cycle ne sera cr√©√©.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/446/82b/18d/44682b18de7a81b58d01dd734e4f57f3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour √©viter les t√™tes de m√©duses dans le long couloir menant √† la mort, le bot ne s'arr√™te jamais, √©tourdissant les chevaliers qui apparaissent g√©n√©ralement sur le chemin. </font><font style="vertical-align: inherit;">Il profite du fait que le joueur peut traverser des ennemis √©tourdis par l'eau b√©nite sans subir de d√©g√¢ts.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cab/d68/587/cabd685876fb241b8362a9f2f83482d5.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">S'il n'y a pas d'eau b√©nite, alors juste en face du couloir CastlevaniaBot peut prendre un boomerang. </font><font style="vertical-align: inherit;">Avec un ensemble de circonstances r√©ussi, il l'utilise pour d√©truire les chevaliers, ainsi que pour obtenir des am√©liorations d'armes.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/444/738/a60/444738a60282b741af01e775ebfe70b2.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot √©tourdit la mort avec de l'eau b√©nite avant qu'elle ne commence √† lancer des tresses, la tuant rapidement. </font><font style="vertical-align: inherit;">Il peut √©galement vaincre Death avec un triple boomerang, mais cela n√©cessite g√©n√©ralement plusieurs tentatives.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72a/fdb/57a/72afdb57a40c4f9613a71c6edd5beb17.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La strat√©gie principale de CastlevaniaBot en passant le pont au d√©but du niveau 6 est de continuer √† bouger. </font><font style="vertical-align: inherit;">Il frappe un fouet d'√©normes chauves-souris d'en haut pour les √©tourdir, puis rebondit sur les √©normes chauves-souris apparaissant d'en bas. </font><font style="vertical-align: inherit;">De plus, de temps en temps, il doit √©viter les boules de feu lanc√©es par les chauves-souris ou les battre avec un fouet.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/507/fa3/c82/507fa3c822d5a767e6b6a4916d1d2857.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le passage sur le pont n'est pas garanti. </font><font style="vertical-align: inherit;">Tout d√©pend de la convivialit√© des √©normes chauves-souris. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dans la sous-√©tape suivante, CastlevaniaBot utilise le chronographe du pont deux fois ou plus pour passer par des aigles et des cavaliers. </font><font style="vertical-align: inherit;">Sans chronographe, il essaie de se frayer un chemin avec un fouet.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d06/4fd/3f3/d064fd3f3b249a76112632c100b34ccd.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lorsque CastlevaniaBot atteint la tour de Dracula, il peut monter et descendre les escaliers plusieurs fois pour cr√©er √† nouveau des bougies, ce qui vous permet de collecter au moins 20 c≈ìurs. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/338/cf3/525/338cf3525c8b5c0361cb98c23681f8b3.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Les bougies les plus √† droite dans les chambres de Dracula donnent de l'eau b√©nite, ce qui est n√©cessaire pour combattre la deuxi√®me forme de Dracula. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour vaincre la premi√®re forme de Dracula, il faut 16 coups √† la t√™te. </font><font style="vertical-align: inherit;">CastlevaniaBot s'approche de Dracula plusieurs fois, attend qu'il tire avec des boules de feu, puis saute par-dessus les balles et frappe la t√™te de Dracula avec un fouet.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ad/47e/af9/8ad47eaf9a2a962288480bbf49b844fc.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La deuxi√®me forme de Dracula, appel√©e Cookie Monster, est assomm√©e par l'eau b√©nite par le bot et frappe plusieurs fois la t√™te avec un fouet. </font><font style="vertical-align: inherit;">De temps en temps, Cookie Monster saute sur le joueur, tandis que CastlevaniaBot esquive. </font><font style="vertical-align: inherit;">Cookie Monster lance √©galement des boules de feu, qui peuvent g√©n√©ralement √™tre d√©truites avec de l'eau b√©nite et un fouet. </font><font style="vertical-align: inherit;">Parfois, vous pouvez obtenir une mise √† niveau d'arme. </font><font style="vertical-align: inherit;">Et l'eau b√©nite double attrape Cookie Monster dans un cycle d'√©tourdissement constant menant √† une victoire rapide.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bdf/05b/266/bdf05b2661aff44a2b0804865013b95b.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot n'est pas en mesure de passer par le mode difficile, qui commence apr√®s le g√©n√©rique final. </font><font style="vertical-align: inherit;">Cependant, apr√®s avoir red√©marr√© le jeu dans la cour du ch√¢teau, il remet √† z√©ro l'octet du cycle de jeu, le basculant en mode normal. </font><font style="vertical-align: inherit;">Cela permet √† CastlevaniaBot de jouer sans fin.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c6/3a6/c4a/4c63a6c4ad709d26e0256a6ecdf07a61.png"></div><br><hr><br><h1>  Fichiers </h1><br> <a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CastlevaniaBot_2018-12-09.zip</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Le fichier </font></font><code>.zip</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contient:</font></font><br><br><ul><li> <code>src</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - arbre source. </font></font></li><li> <code>CastlevaniaBot.jar</code> ‚Äî   . </li><li> <code>lgpl-2.1.txt</code> ‚Äî    . </li></ul><br><hr><br><h1>  Lancement </h1><br><h2>   </h2><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nintaco</a> ‚Äî  NES. </li><li> <code>Castlevania (U) (PRG1) [!].nes</code> ‚Äî ROM . </li></ul><br><h2>   </h2><br><ol><li>  Nintaco   <code>Castlevania (U) (PRG1) [!].nes</code> . </li><li>  <code>CastlevaniaBot.jar</code>   <code>.zip</code> . </li><li>   Run Program,  Tools | Run Program... </li><li>       JAR   ,    Find JAR.... </li><li>  Load JAR,   . </li><li>  Run. </li></ol><hr><table><tbody><tr><td> Copyright ¬© 2018 meatfighter.com <br><br>      .     /      LGPLv2.1. </td></tr></tbody></table></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr432784/">https://habr.com/ru/post/fr432784/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr432774/index.html">Frontend DevDay. Enregistrement de rapport</a></li>
<li><a href="../fr432776/index.html">Le livre "R√©agissez en action"</a></li>
<li><a href="../fr432778/index.html">D√©veloppement d'un convertisseur abaisseur sur STM32F334: principe de fonctionnement, calculs, prototypage</a></li>
<li><a href="../fr432780/index.html">Pourquoi l'empathie est n√©cessaire dans le monde de la technologie</a></li>
<li><a href="../fr432782/index.html">Installation multi-serveurs Zimbra Collaboration Suite</a></li>
<li><a href="../fr432786/index.html">.NET - localisation sans douleur. (N) gettext + poedit</a></li>
<li><a href="../fr432788/index.html">Prototypes: comment cr√©er un produit r√©ussi et √©conomiser</a></li>
<li><a href="../fr432790/index.html">Supraconducteur + ferromagnet: l'√©tude des paires de triplets Cooper</a></li>
<li><a href="../fr432794/index.html">Bret Victor: Quelques mots sur Douglas Engelbart</a></li>
<li><a href="../fr432796/index.html">Module de calcul, mod√®les 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>