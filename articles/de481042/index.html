<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¶ ü¶â üè• Der Geschmack von uns Django regt an und zieht an üå´Ô∏è üöÑ üíÜ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Seit der offiziellen Ver√∂ffentlichung von Version 3 von Django sind mehrere Wochen vergangen. Ich habe mit dieser Version bereits vor der Ver√∂ffentlic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Der Geschmack von uns Django regt an und zieht an</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481042/"><img src="https://habrastorage.org/webt/97/5s/xh/975sxhi3n81qsvs2rmothgwiq3s.jpeg" alt="Essen Sie Kaktus"><br><br>  Seit der offiziellen Ver√∂ffentlichung von Version 3 von Django sind mehrere Wochen vergangen.  Ich habe mit dieser Version bereits vor der Ver√∂ffentlichung des offiziellen Releases gearbeitet und leider festgestellt, dass sich die Entwicklung von Django erheblich verlangsamt hat.  Version 1.3 unterscheidet sich zeitweise von Version 1.7, Version 3 enth√§lt jedoch kosmetische √Ñnderungen an Zweig 2 und nicht mehr. <br><br>  Mein winePad-Projekt begann mit Django 1.3 und hat inzwischen etwa 12% des internen Codes von Django neu definiert. <br><br>  Wenn ich den Code f√ºr die neue Version sehe, verstehe ich, dass die √Ñnderungen, die ich oder meine Kollegen w√§hrend der Arbeit mit fr√ºheren Versionen vorgenommen haben, noch weiter gehen werden.  Wenn Sie sich die Roadmap und die schleppenden √Ñnderungen im offiziellen Repository ansehen, m√ºssen Sie nicht darauf warten, dass Fehler in zuk√ºnftigen Versionen behoben werden. <br><br>  Dies ist, was ich √ºber die Arbeit an Fehlern sprechen m√∂chte: <br><a name="habracut"></a><br><h3>  Methode holen </h3><br>  Nur wenigen ist klar, dass es von Anfang an einen Fehler in der Standardmethode get django gab.  Die get-Methode sollte entweder ein Objekt an Sie zur√ºckgeben oder warnen, dass mehrere Objekte gefunden wurden, oder melden, dass keine Objekte vorhanden sind. <br><br><pre><code class="python hljs"><span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> clone = self._chain() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.query.combinator <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> self.filter(*args, **kwargs) <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> self.query.can_filter() <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> self.query.distinct_fields: <span class="hljs-number"><span class="hljs-number">4</span></span> clone = clone.order_by() <span class="hljs-number"><span class="hljs-number">5</span></span> limit = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> clone.query.select_for_update <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> connections[clone.db].features.supports_select_for_update_with_limit: <span class="hljs-number"><span class="hljs-number">7</span></span> limit = MAX_GET_RESULTS <span class="hljs-number"><span class="hljs-number">8</span></span> clone.query.set_limits(high=limit) <span class="hljs-number"><span class="hljs-number">9</span></span> num = len(clone) <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> num == <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> clone._result_cache[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-number"><span class="hljs-number">12</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> num: <span class="hljs-number"><span class="hljs-number">13</span></span> <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> self.model.DoesNotExist() <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> self.model.MultipleObjectsReturned()</code> </pre> <br>  Zeile 9 empf√§ngt Daten f√ºr ALLE Datens√§tze, die im Abfragesatz angegeben sind, und √ºbersetzt sie in einen Satz von Objekten.  In der Dokumentation wird diesbez√ºglich eine Warnung angezeigt. <br><br>  Vor Version 3 war die Anzahl der angeforderten Objekte nicht begrenzt.  Dies bedeutet, dass alle Daten empfangen und in Objekte umgewandelt werden, bevor eine Warnung ausgegeben wird, dass viele Objekte vorhanden sind. <br><br>  Infolgedessen konnten Sie mehrere Millionen Objekte im Speicher abrufen, nur um festzustellen, dass mehr als 1 Objekt gefunden wurde.  Jetzt gibt es die Zeilen 5,7,8.  Und jetzt erhalten Sie stolz nur MAX_GET_RESULTS = 21 Objekte, bevor Sie wissen, dass es mehr als 1 Objekte gibt. <br>  Bei starkem "__init__" ist die Verz√∂gerung erheblich.  Wie zu behandeln: <br>  √úberschreiben Sie MAX_GET_RESULTS in django.db.models.query.py <br>  GET √ºberschreiben oder vor dem Aufruf von GET verwenden: <br><br><pre> <code class="python hljs">vars(queryset.query).update({<span class="hljs-string"><span class="hljs-string">'high_mark'</span></span>:<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-string"><span class="hljs-string">'low_mark'</span></span>:<span class="hljs-number"><span class="hljs-number">0</span></span>})  queryset.query.set_limits(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre><br><h3>  __Init__-Methode von Django-Modellen </h3><br>  Die Deklaration im Code der integrierten Methode __init__ ist nicht ganz klar <br><br><pre> <code class="python hljs">_setattr=setattr</code> </pre> <br>  Dies dient wahrscheinlich dazu, den Code durch die √úbertragung einer Funktionsreferenz in ein lokales W√∂rterbuch zu beschleunigen, aber darum geht es nicht.  Es gibt verschiedene Probleme: <br><br>  1. Wenn Sie im __init__-Modell zus√§tzliche Attribut = Wert-Paare √ºbergeben, erhalten Sie "ein unerwartetes Schl√ºsselwortargument". <br><br>  In diesem Fall empfehle ich, die Methode __init__ nicht zu belasten, sondern nach der Initialisierung Attribute hinzuzuf√ºgen: <br><br><pre> <code class="python hljs">obj = MyClass() vars(obj).update({<span class="hljs-string"><span class="hljs-string">'attr'</span></span>:val, <span class="hljs-string"><span class="hljs-string">'attr2'</span></span>:val2 ...})</code> </pre><br>  2. Der neue Django bietet die M√∂glichkeit, Deskriptoren f√ºr jedes Feld des Modells neu zu definieren (Field.descriptor_class).  Aber kein einziger Deskriptor wei√ü, ob das Objekt initialisiert ist oder nicht.  Dies ist beispielsweise erforderlich, wenn der Deskriptor Daten von Prefetch-bezogenen Objekten verwendet, die erst nach der Initialisierung des Hauptobjekts angezeigt werden. <br><br>  Ich m√∂chte das Signal zum Ende der Initialisierung nicht verwenden, da es viele Abonnenten geben kann. <br><br>  In diesem Fall habe ich nichts Kl√ºgeres gefunden, als __init__ zu √ºberschreiben und ein Attribut hinzuzuf√ºgen, um die Initialisierung zu beenden. <br><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, *args, **kwargs)</span></span></span><span class="hljs-function">:</span></span> super().__init__(*args, **kwargs) self._end_init = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre><br><h3>  Querysets </h3><br>  Das fest codierte EmptyQuerySet / DateQuerySet wurde entfernt. Es ist bereits in Ordnung.  Allerdings gef√§llt mir die Situation mit queryset als Manager ideologisch nicht. <br><br>  Wenn ich die von Managern erstellte QuerySet-Klasse √ºberschreiben m√∂chte, f√ºge ich das _queryset_class-Attribut hinzu <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyManager</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Manager)</span></span></span><span class="hljs-class">:</span></span> _queryset_class = MyQuerySet</code> </pre><br>  Achtung, bei √§lteren Versionen funktioniert dies nicht, zum Beispiel k√∂nnen Sie dies tun: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyManager</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(models.Manager)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_query_set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> response = super(MyManager, self).get_query_set() response.__class__ = MyQuerySet <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response</code> </pre><br><h3>  inlineFormset Admin Panel </h3><br>  Es gibt verschiedene Probleme: <br><br>  1. Es ist nicht m√∂glich, Standard-InlineFormset-Datens√§tze anzuzeigen, die keine direkte Verbindung zum Hauptformularobjekt haben.  Zum Beispiel: Ein Formular zum Bearbeiten von Produktpreisen.  In der Mitte liegt die tabellarische Referenzform der Gro√ühandelspreise f√ºr ‚Äû√§hnliche‚Äú Waren. <br><br>  Dies wird gel√∂st, indem Sie die Inline-Modellmethode get_formset √ºberschreiben und Ihr eigenes MyFormSet erstellen, das von BaseInlineFormSet geerbt wurde <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_formset</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, request, obj=None, **kwargs)</span></span></span><span class="hljs-function">:</span></span> kwargs[<span class="hljs-string"><span class="hljs-string">'formset'</span></span>] = MyFormSet super().get_formset(request, obj, **kwargs) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFormSet</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(BaseInlineFormSet)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">pass</span></span></code> </pre><br>  2. Wenn Sie ein Objekt mit einem Inlineformset im Admin-Bereich bearbeiten und zu diesem Zeitpunkt jemand einen der Objektdatens√§tze im Inlineformset √ºber einen anderen Mechanismus l√∂scht, wird eine Fehlermeldung angezeigt und Sie k√∂nnen das Objekt nicht speichern.  Nur durch Kopieren einf√ºgen in einem neuen Browserfenster. <br><br>  Ich habe bisher nur eine L√∂sung gefunden - benutze kein Inlineformset. <br><br><h3>  Admin Panel </h3><br>  Das "Killer-Feature" von Django ist der gr√∂√üte Kaktus des Projekts: <br><br>  1. Die Aktion "Objekte l√∂schen" in Modelladministratoren ist standardm√§√üig sichtbar, es spielt keine Rolle, ob der Benutzer zum L√∂schen berechtigt ist oder nicht. <br><br>  Es wird gel√∂st, indem diese Aktion standardm√§√üig deaktiviert wird: <br><br><pre> <code class="python hljs">admin.site.disable_action(<span class="hljs-string"><span class="hljs-string">'delete_selected'</span></span>)</code> </pre><br>  2. Das Erstellen zus√§tzlicher Benutzerrechte √ºber das Admin-Bedienfeld ist erst m√∂glich, wenn Sie den Modelladministrator aktivieren. Berechtigungen: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.auth.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Permission <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PermissionsAdmin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(admin.ModelAdmin)</span></span></span><span class="hljs-class">:</span></span> search_fields = (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'codename'</span></span>,<span class="hljs-string"><span class="hljs-string">'content_type__app_label'</span></span>, <span class="hljs-string"><span class="hljs-string">'content_type__model'</span></span>) list_display = (<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'codename'</span></span>,) actions = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> admin.site.register(Permission, PermissionsAdmin)</code> </pre><br>  3. Das Recht, nur auf bestimmte Objekte in Django zuzugreifen, besteht leider nicht. <br><br>  Dies kann gel√∂st werden, indem ein Eintrag in djangoAdminLog mit einem speziellen Flag geschrieben wird. <br>  Und dann nach der Flagge suchen: <br><br><pre> <code class="python hljs">user.logentry_set.filter(action_flag=ENABLED, .....).exists()</code> </pre><br>  4. Wenn Sie Administratoraktionen wie in der Dokumentation beschrieben erstellen, beachten Sie, dass diese nicht automatisch in djangoAdminLog protokolliert werden. <br><br>  5. Ein weiterer Nachteil dieses Teils der Dokumentation ist, dass sich alle Beispiele nur auf Funktionen beziehen.  Aber was ist mit GCBV?  In meinen Projekten werden alle Aktionen von Modelladministratoren an GCBV √ºbertragen.  <a href="https://bitbucket.org/danilovmy/actions">Repository.</a> <br><br>  Die Aktionsverbindung ist Standard: <br><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAdmin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(admin.ModelAdmin)</span></span></span><span class="hljs-class">:</span></span> actions = (MyActionBasedOnActionView.as_view(),)</code> </pre><br><h3>  ContentType - Django Model Registry </h3><br>  50% Genialit√§t / 50% Mattheit. <br>  Keines der Modelle hat Zugriff auf die Standardmodellregistrierung. <br>  In unseren Projekten wird dies durch Hinzuf√ºgen eines Mixins zu allen Klassen gel√∂st: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.contenttypes.models <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ContentType <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExportMixin</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_ct'</span></span>): cls._ct, create = ContentType.objects.get_or_create(**cls.get_app_model_dict()) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> create: cls._ct.name = cls._ct.model._meta.verbose_name cls._ct.save() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._ct @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_model_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_model_name'</span></span>): cls._model_name = cls.__name__.lower() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._model_name @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_app_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_app_name'</span></span>): cls._app_name = cls._meta.app_label.lower() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._app_name @classmethod <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_app_model_dict</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cls)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> hasattr(cls, <span class="hljs-string"><span class="hljs-string">'_format_kwargs'</span></span>): cls._format_kwargs = {<span class="hljs-string"><span class="hljs-string">'app_label'</span></span>: cls.get_app_name(), <span class="hljs-string"><span class="hljs-string">'model'</span></span>: cls.get_model_name()} <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> cls._format_kwargs</code> </pre><br>  jetzt k√∂nnen wir bei Bedarf obj.ct () aufrufen. <br><br><h3>  Usermodel </h3><br>  Die M√∂glichkeit, das Benutzermodell zu √ºberschreiben, wurde in Version 1.5 eingef√ºhrt. <br><br>  In Version 3 wurde jedoch model = User in der Standard-UserCreationForm / UserChangeForm nicht behoben. <br>  Es ist gel√∂st: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.auth.forms <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> UserCreationForm <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> django.contrib.auth <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> get_user_model <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyUserCreationForm</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(UserCreationForm)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> model= get_user_model()</code> </pre><br><h3>  √úbersetzungssystem </h3><br>  Tags, die f√ºr den Benutzer sichtbar sind, werden markiert <br><br><pre> <code class="python hljs">{% trans %}</code> </pre> <br>  oder in Code durch <br><br><pre> <code class="python hljs">gettext_lazy</code> </pre> <br>  Es gibt jedoch keine Verwaltung dieser Ressourcen im Admin-Bereich.  Im Allgemeinen. <br><br>  Es gibt externe L√∂sungen, die alle irgendwie funktionieren. <br><br>  Zum Beispiel verliert Rosetta systematisch Texte und die Benutzeroberfl√§che funktioniert fehlerhaft.  Es gibt nirgendwo eine √úberpr√ºfung der Zugriffsrechte auf √úbersetzungen.  Systematische Makemessages / Compilemessages sind erforderlich, um zu arbeiten ... <br><br>  In winePad wurden die Tags trans, blocktrans und gettext_lazy neu definiert und es wurde begonnen, Texte aus dem Cache zu empfangen.  Wenn es keinen Cache gibt, hat uns die zwischengespeicherte Anforderung von der get_or_create-Basis auch vor Makemessages bewahrt. <br><br>  Das Thema Mehrsprachigkeit ist in der Regel kompliziert.  Die integrierte L√∂sung von Django funktioniert nur f√ºr statische Texte.  Diese Modelle m√ºssen jedoch noch √ºbersetzt werden.  Ich habe auf meine eigene Weise versucht, das Problem der √úbersetzung dynamischer Texte im <a href="https://github.com/mom1/django-tof">Django-TOF-</a> Projekt zu l√∂sen, in dem ich die F√§higkeiten der Modell√ºbersetzung und Parler / Hvad kombiniert habe.  Wahrscheinlich wird sich jemand f√ºr das Sp√§hen interessieren. <br><br>  Im Moment werde ich die Erz√§hlung stoppen, da der Artikel zur Fehlerbehebung in Django leicht zu einem Longread werden k√∂nnte. <br><br>  Bitte sagen Sie mir, wie Sie Ihren Django verbessern.  Wenn es eine Fortsetzung gibt, systematisiere ich die Ideen, die entstanden sind. <br><br>  <b>ps</b> Einige Codes sind in der alten Notation geschrieben, ich hoffe auf Verst√§ndnis, der Zeit- oder Personalaufwand f√ºr das Refactoring wird nicht immer gefunden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481042/">https://habr.com/ru/post/de481042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481030/index.html">Was f√ºr eine Art von Cyberdec w√ºrde ich gerne f√ºr mich tun</a></li>
<li><a href="../de481032/index.html">Warum war es m√∂glich zu hacken? Wahrscheinlich weil der Angreifer</a></li>
<li><a href="../de481034/index.html">Direkter VPN-Tunnel zwischen Computern √ºber NAT-Anbieter (ohne VPS, mit einem STUN-Server und Yandex.Disk)</a></li>
<li><a href="../de481036/index.html">30 Dienstprogramme f√ºr Firefox Developer Tools</a></li>
<li><a href="../de481038/index.html">Gest√§ndnis eines Design-S√ºchtigen. Wie wir das Spiel "IT Alchemy" in einem Monat gemacht haben</a></li>
<li><a href="../de481044/index.html">Was f√ºr 2020 zu pr√§sentieren: Neujahrsf√ºhrer Madrobots</a></li>
<li><a href="../de481048/index.html">Erkennung von digitalen Schaltkreisen. Verallgemeinertes C-Element</a></li>
<li><a href="../de481052/index.html">Erstellen Sie ein privates Netzwerk mit Ethereum Geth in Docker-Containern</a></li>
<li><a href="../de481054/index.html">YouTrack 2019.3: aktualisierte Aufgabenliste und vieles mehr</a></li>
<li><a href="../de481056/index.html">Die Haupttechnologien des Jahrzehnts laut Habr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>