<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤´ğŸ¾ ğŸ‘©ğŸ¼â€ğŸ³ ğŸ‘©ğŸ¾â€ğŸ’» Ù‚Ø¨Ù„Ùƒ - ØªÙØ§Ø¹Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ« ğŸ–Šï¸ ğŸ‘‰ğŸ½ ğŸ‘¬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù…Ù† Ø§Ù„ØµÙØ± ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ« ØŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø¹Ø±ÙØ© Ù…Ø§ Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ«ØŸ 


 ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ« (MWA) Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ ÙŠÙ„ØªØ²Ù… Ø¨Ø¬Ù…ÙŠØ¹ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ù‚Ø¨Ù„Ùƒ - ØªÙØ§Ø¹Ù„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ«</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432368/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  Ù‚Ø¨Ù„ Ø§Ù„Ø¨Ø¯Ø¡ ÙÙŠ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ù…Ù† Ø§Ù„ØµÙØ± <strong>ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ« ØŒ</strong> ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø¹Ø±ÙØ© Ù…Ø§ Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ«ØŸ </p><br><p style=";text-align:right;direction:rtl"> ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ« (MWA) Ù‡Ùˆ ØªØ·Ø¨ÙŠÙ‚ ÙŠÙ„ØªØ²Ù… Ø¨Ø¬Ù…ÙŠØ¹ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø­Ø¯ÙŠØ«Ø©.  Ù…Ù† Ø¨ÙŠÙ†Ù‡Ø§ ØŒ ÙŠØ¹Ø¯ ØªØ·Ø¨ÙŠÙ‚ Progressive Web App Ø§Ù„Ù‚Ø¯Ø±Ø© Ø¹Ù„Ù‰ ØªÙ†Ø²ÙŠÙ„ Ø¥ØµØ¯Ø§Ø± Ù…Ø³ØªØ¹Ø±Ø¶ Ù…Ø­Ù…ÙˆÙ„ Ø¹Ù„Ù‰ Ù‡Ø§ØªÙÙƒ ÙˆØ§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙƒØªØ·Ø¨ÙŠÙ‚ ÙƒØ§Ù…Ù„.  Ø¥Ù†Ù‡Ø§ Ø£ÙŠØ¶Ù‹Ø§ ÙØ±ØµØ© Ù„ØªÙ…Ø±ÙŠØ± Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ ÙˆØ¶Ø¹ Ø¹Ø¯Ù… Ø§Ù„Ø§ØªØµØ§Ù„ Ù…Ù† Ø¬Ù‡Ø§Ø² Ù…Ø­Ù…ÙˆÙ„ ÙˆÙ…Ù† ÙƒÙ…Ø¨ÙŠÙˆØªØ± Ø›  ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø­Ø¯ÙŠØ«Ø©.  Ø§Ù„Ø£Ù…Ø«Ù„ Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« Ø§Ù„Ø£Ù…Ø«Ù„.  ÙˆØ¨Ø·Ø¨ÙŠØ¹Ø© Ø§Ù„Ø­Ø§Ù„ - Ø³Ø±Ø¹Ø© ØªÙ†Ø²ÙŠÙ„ Ø¹Ø§Ù„ÙŠØ©. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/cp/p4/sr/cpp4srk-it2nhotgkfg5q6kczqi.png"></p><br><p style=";text-align:right;direction:rtl">  Ø¥Ù„ÙŠÙƒ Ù…Ø§ Ø³ÙŠØ­Ø¯Ø« ÙÙŠ MWA Ù„Ø¯ÙŠÙ†Ø§ (Ø£Ù†ØµØ­Ùƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ø§ Ø§Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„Ù…Ù‚Ø§Ù„Ø©): </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø±Ù…Ø²</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù†Ø³Ø®Ø© Ø§Ù„Ø¬ÙˆØ§Ù„</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„ØªØ¯Ø±ÙŠØ¬ÙŠ</a> </li><li style=";text-align:right;direction:rtl">  Ø¨Ø§Ø¨Ù„ 7 ØŒ Webpack ÙˆØ£ÙƒØ«Ø± Ù…Ù† Ø°Ù„Ùƒ </li></ul><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø£Ø´Ø®Ø§Øµ ÙÙŠ HabrÃ© Ù‡Ù… Ù…Ù† Ø±Ø¬Ø§Ù„ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„ ØŒ Ù„Ø°Ù„Ùƒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¹Ù„Ù‰ Ø§Ù„ÙÙˆØ± <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¨Ù…Ø®Ø²Ù† GitHub</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ÙˆØ£Ø±Ø´ÙŠÙ</a> Ù…Ù† ÙƒÙ„ Ù…Ø±Ø­Ù„Ø© Ù…Ù† Ù…Ø±Ø§Ø­Ù„ Ø§Ù„ØªØ·ÙˆÙŠØ± ÙˆØ§Ù„Ø¹Ø±Ø¶ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ</a> .  Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‚Ø§Ù„Ø© Ù…Ø®ØµØµØ© Ù„Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ø§Ù„Ø°ÙŠÙ† Ù„Ø¯ÙŠÙ‡Ù… Ø¯Ø±Ø§ÙŠØ© Ø¨Ù€ node.js ÙˆÙŠØªÙØ§Ø¹Ù„ÙˆÙ†.  ÙŠØªÙ… ØªÙ‚Ø¯ÙŠÙ… ÙƒÙ„ Ø§Ù„Ù†Ø¸Ø±ÙŠØ© Ø§Ù„Ù„Ø§Ø²Ù…Ø© ÙÙŠ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ.  ØªÙˆØ³ÙŠØ¹ Ø¢ÙØ§Ù‚Ùƒ Ù…Ù† Ø®Ù„Ø§Ù„ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·. </p><br><p style=";text-align:right;direction:rtl">  Ù„Ù†Ø¨Ø¯Ø£! </p><a name="habracut"></a><br><a name="ssr"></a><br><h3 id="1-universal" style=";text-align:right;direction:rtl">  1. Ø¹Ø§Ù„Ù…ÙŠ </h3><br><p style=";text-align:right;direction:rtl"> Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„Ù‚ÙŠØ§Ø³ÙŠØ©: Ù‚Ù… Ø¨Ø¥Ù†Ø´Ø§Ø¡ Ø¯Ù„ÙŠÙ„ Ø¹Ù…Ù„ ÙˆØªÙ†ÙÙŠØ° <code>git init</code> .  Ø§ÙØªØ­ <em>package.json</em> ÙˆØ£Ø¶Ù Ø¨Ø¶Ø¹Ø© Ø£Ø³Ø·Ø±: </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"dependencies"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"@babel/cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.5"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/core"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.6"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/preset-env"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.1.6"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/preset-react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"@babel/register"</span></span>: <span class="hljs-string"><span class="hljs-string">"^7.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"babel-loader"</span></span>: <span class="hljs-string"><span class="hljs-string">"^8.0.4"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"babel-plugin-root-import"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.1.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"express"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.16.4"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.6.3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^16.6.3"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-helmet"</span></span>: <span class="hljs-string"><span class="hljs-string">"^5.2.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-router"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.3.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"react-router-dom"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.3.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"webpack"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.26.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"webpack-cli"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.1.2"</span></span> }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†Ø­Ù† Ù†Ù†ÙØ° <code>npm install</code> ØŒ ÙˆØ¨ÙŠÙ†Ù…Ø§ ÙŠØªÙ… ØªØ«Ø¨ÙŠØªÙ‡ ØŒ ÙØ¥Ù†Ù†Ø§ Ù†ÙÙ‡Ù…. </p><br><p style=";text-align:right;direction:rtl">  Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù†Ù†Ø§ ÙˆØµÙ„Ù†Ø§ ÙÙŠ Ù†Ù‡Ø§ÙŠØ© Ø¹Ø§Ù… 2018 Ùˆ 2019 ØŒ ÙØ³ÙŠÙƒÙˆÙ† ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø§Ù„Ø®Ø§Øµ Ø¨Ù†Ø§ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø¹Ø§Ù„Ù…ÙŠÙ‹Ø§ (Ø£Ùˆ Ù…ØªÙ…Ø§Ø«Ù„Ù‹Ø§)</a> ØŒ ÙˆØ³ØªØ¸Ù‡Ø± Ù†Ø³Ø®Ø© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ECMAScript</a> Ù„Ø§ ØªÙ‚Ù„ Ø¹Ù† ES2017 ØŒ Ø³ÙˆØ§Ø¡ ÙÙŠ Ø§Ù„Ø®Ù„Ù Ø£Ùˆ ÙÙŠ Ø§Ù„Ù…Ù‚Ø¯Ù…Ø©.  Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ ØŒ ÙŠÙ‚ÙˆÙ… <em>index.js</em> (Ù…Ù„Ù Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚) Ø¨Ø±Ø¨Ø· babel / register ØŒ ÙˆÙŠÙ‚ÙˆÙ… <strong>Ø¨Ø§Ø¨Ù„</strong> Ø£Ø«Ù†Ø§Ø¡ <strong>Ø§Ù„ØªÙ†Ù‚Ù„</strong> Ø¨ØªØ­ÙˆÙŠÙ„ Ø¬Ù…ÙŠØ¹ ÙƒÙˆØ¯ ES Ø¨Ø¹Ø¯Ù‡ Ø¥Ù„Ù‰ JavaScript Ø§Ù„ØµØ¯ÙŠÙ‚Ø© Ù„Ù„Ù…Ø³ØªØ¹Ø±Ø¶ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… babel / preset-env Ùˆ babel / preset-react.  Ù„ØªØ³Ù‡ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„ØªØ·ÙˆÙŠØ± ØŒ Ø¹Ø§Ø¯Ø©Ù‹ Ù…Ø§ Ø£Ø³ØªØ®Ø¯Ù… Ù…Ù„Ø­Ù‚ Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø¨Ø§Ø¨Ù„-Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯-Ø§Ù„Ø¬Ø°Ø± ØŒ ÙˆØ§Ù„Ø°ÙŠ Ø³ØªØ¨Ø¯Ùˆ Ø¹Ù„ÙŠÙ‡ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ§Ø±Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¬Ø°Ø± "~ /" ØŒ ÙˆÙ…Ù† src / - '&amp; /'.  Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø°Ù„Ùƒ ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ÙƒØªØ§Ø¨Ø© Ù…Ø³Ø§Ø±Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø£Ùˆ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø³Ù… Ù…Ø³ØªØ¹Ø§Ø± Ù…Ù† webpack. </p><br><p style=";text-align:right;direction:rtl">  <em>index.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"@babel/register"</span></span>)(); <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./app"</span></span>);</code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>.babelrc</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"presets"</span></span>: [ [ <span class="hljs-string"><span class="hljs-string">"@babel/preset-env"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">"targets"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"node"</span></span>: <span class="hljs-string"><span class="hljs-string">"current"</span></span> } } ], <span class="hljs-string"><span class="hljs-string">"@babel/preset-react"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"plugins"</span></span>: [ [<span class="hljs-string"><span class="hljs-string">"babel-plugin-root-import"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">"paths"</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">"rootPathPrefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"~"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"rootPathSuffix"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"rootPathPrefix"</span></span>: <span class="hljs-string"><span class="hljs-string">"&amp;"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"rootPathSuffix"</span></span>: <span class="hljs-string"><span class="hljs-string">"src/"</span></span> }] }] ] }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„ÙˆÙ‚Øª Ù„Ø¥Ø¹Ø¯Ø§Ø¯ <strong>Webpack</strong> .  Ù†Ù†Ø´Ø¦ <em>webpack.config.js</em> ÙˆÙ†Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙˆØ¯ (ÙŠÙØ´Ø§Ø± Ø¥Ù„ÙŠÙ‡ ÙÙŠÙ…Ø§ ÙŠÙ„ÙŠ Ø¨Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯). </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-comment"><span class="hljs-comment">// ,      Universal web app entry: { client: './src/client.js' }, // ,      webpack' output: { path: path.resolve(__dirname, 'public'), publicPath: '/' }, module: { //  babel-loader     ECMAScript    // JavaScript.       /public rules: [ { test: /\.js$/, exclude: /node_modules/, loader: "babel-loader" } ] } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù…Ù† Ù‡Ø°Ù‡ Ø§Ù„Ù„Ø­Ø¸Ø© ØŒ ØªØ¨Ø¯Ø£ Ø§Ù„Ù…ØªØ¹Ø©.  Ø­Ø§Ù† Ø§Ù„ÙˆÙ‚Øª Ù„ØªØ·ÙˆÙŠØ± Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„ØªØ·Ø¨ÙŠÙ‚.  <strong>Ø§Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…Ù† Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø®Ø§Ø¯Ù…</strong> (SSR) Ø¹Ø¨Ø§Ø±Ø© Ø¹Ù† ØªÙ‚Ù†ÙŠØ© Ù…ØµÙ…Ù…Ø© Ù„ØªØ³Ø±ÙŠØ¹ ØªØ­Ù…ÙŠÙ„ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ ÙÙŠ Ø¨Ø¹Ø¶ Ø§Ù„Ø£Ø­ÙŠØ§Ù† ÙˆØ­Ù„ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„Ù†Ù‚Ø§Ø´ Ø§Ù„Ø£Ø¨Ø¯ÙŠ</a> Ø­ÙˆÙ„ ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±Ùƒ Ø§Ù„Ø¨Ø­Ø« ÙÙŠ ØªØ·Ø¨ÙŠÙ‚ ØµÙØ­Ø© ÙˆØ§Ø­Ø¯Ø© (SEO ÙÙŠ SPA).  Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ ØŒ Ù†Ø£Ø®Ø° Ù‚Ø§Ù„Ø¨ HTML ØŒ ÙˆÙ†Ø¶Ø¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙÙŠÙ‡ ÙˆÙ†Ø±Ø³Ù„Ù‡ Ø¥Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù….  ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨Ù‡Ø°Ø§ Ø¨Ø³Ø±Ø¹Ø© ÙƒØ¨ÙŠØ±Ø© - ÙŠØªÙ… Ø±Ø³Ù… Ø§Ù„ØµÙØ­Ø© ÙÙŠ ØºØ¶ÙˆÙ† Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ©.  ÙˆÙ…Ø¹ Ø°Ù„Ùƒ ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ø±ÙŠÙ‚Ø© Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ DOM Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… ØŒ Ù„Ø°Ù„Ùƒ ÙŠÙ‚ÙˆÙ… Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø© ØŒ ÙˆÙŠØµØ¨Ø­ ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© ØªÙØ§Ø¹Ù„ÙŠ.  Ø­Ø³Ù†Ø§ØŸ  Ù†Ø­Ù† Ù†Ø·ÙˆØ±! </p><br><p style=";text-align:right;direction:rtl">  <em>app.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> express <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'express'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> path <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'path'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> stateRoutes <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server/stateRoutes'</span></span> <span class="hljs-comment"><span class="hljs-comment">//   Express     Node.js const app = express() //    app.use(express.static('public')) app.use('/assets', express.static(path.resolve(__dirname, 'assets'))) //    3000 ,      const PORT = process.env.PORT || 3000 app.listen(PORT, '0.0.0.0', () =&gt; { console.log(`The app is running in PORT ${PORT}`) }) //   -  GET-   state  -  //    ,     . stateRoutes(app)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / stateRoutes.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ssr <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//        // ssr - ,   HTML app.get('*', (req, res) =&gt; { const response = ssr(req.url) res.send(response) }) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙŠÙ‚ÙˆÙ… <em>Ù…Ù„Ù server / server.js</em> Ø¨ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© Ø±Ø¯ Ø§Ù„ÙØ¹Ù„ <em>ÙˆÙ†Ù‚Ù„Ù‡</em> Ø¥Ù„Ù‰ Ù‚Ø§Ù„Ø¨ HTML - <em>/server/template.js</em> .  ØªØ¬Ø¯Ø± Ø§Ù„Ø¥Ø´Ø§Ø±Ø© Ø¥Ù„Ù‰ Ø£Ù† Ø§Ù„Ø®Ø§Ø¯Ù… ÙŠØ³ØªØ®Ø¯Ù… Ø¬Ù‡Ø§Ø² ØªÙˆØ¬ÙŠÙ‡ Ø«Ø§Ø¨Øª ØŒ Ù„Ø£Ù†Ù†Ø§ Ù„Ø§ Ù†Ø±ÙŠØ¯ ØªØºÙŠÙŠØ± Ø¹Ù†ÙˆØ§Ù† URL Ù„Ù„ØµÙØ­Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„.  Ùˆ <strong>react-helmet</strong> Ù‡ÙŠ Ù…ÙƒØªØ¨Ø© ØªØ¹Ù…Ù„ Ø¹Ù„Ù‰ ØªØ¨Ø³ÙŠØ· Ø§Ù„Ø¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ± Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ¹Ø±ÙŠÙ (ÙˆØ¨Ø§Ù„ÙØ¹Ù„ Ù…Ø¹ Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø±Ø£Ø³). </p><br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / server.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { renderToString } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom/server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { StaticRouter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/app/App'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> template <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./template'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      const reactRouterContext = {} //     HTML let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;App/&gt; &lt;/StaticRouter&gt; ) //  &lt;head&gt;  HTML- const helmet = Helmet.renderStatic() //   HTML-     return template(helmet, content) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙÙŠ <em>server / template.js ØŒ</em> ÙÙŠ Ø§Ù„Ø±Ø£Ø³ Ù†Ù‚ÙˆÙ… Ø¨Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø®ÙˆØ°Ø© ØŒ Ù‚Ù… Ø¨ØªÙˆØµÙŠÙ„ ÙØ§ÙÙŠÙƒÙˆÙ† ØŒ ÙˆØ£Ù†Ù…Ø§Ø· Ù…Ù† Ø§Ù„Ø¯Ù„ÙŠÙ„ / Ø§Ù„Ø£ØµÙˆÙ„ Ø§Ù„Ø«Ø§Ø¨ØªØ©.  ÙÙŠ Ø§Ù„Ù†Øµ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ ØŒ ØªÙˆØ¬Ø¯ Ø­Ø²Ù…Ø© client.js Ù„Ù„Ù…Ø­ØªÙˆÙ‰ Ùˆ webpack ÙÙŠ Ø§Ù„Ù…Ø¬Ù„Ø¯ / public ØŒ ÙˆÙ„ÙƒÙ† Ù†Ø¸Ø±Ù‹Ø§ Ù„Ø£Ù†Ù‡ Ø«Ø§Ø¨Øª ØŒ ÙØ¥Ù†Ù†Ø§ Ù†Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¬Ø°Ø± - /client.js. </p><br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / Ø§Ù„Ù‚Ø§Ù„Ø¨</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// HTML- export default function template(helmet, content = '') { const scripts = `&lt;script src="/client.js"&gt;&lt;/script&gt;` const page = `&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; ${helmet.title.toString()} ${helmet.meta.toString()} ${helmet.link.toString()} &lt;meta charset="utf-8"&gt; &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt; &lt;meta name="theme-color" content="#810051"&gt; &lt;link rel="shortcut icon" href="/assets/logos/favicon.ico" type="image/x-icon"&gt; &lt;link rel="icon" href="/assets/logos/favicon.ico" type="image/x-icon"&gt; &lt;link rel="stylesheet" href="/assets/global.css"&gt; &lt;/head&gt; &lt;body&gt; &lt;div class="content"&gt; &lt;div id="app" class="wrap-inner"&gt; &lt;!--- magic happens here --&gt; ${content} &lt;/div&gt; &lt;/div&gt; ${scripts} &lt;/body&gt; ` return page }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†Ù†ØªÙ‚Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø³Ø§Ø·Ø© - Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„.  ÙŠÙ‚ÙˆÙ… <em>Ù…Ù„Ù src / client.js</em> Ø¨Ø§Ø³ØªØ¹Ø§Ø¯Ø© HTML Ø§Ù„Ø°ÙŠ ØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø®Ø§Ø¯Ù… Ø¯ÙˆÙ† ØªØ­Ø¯ÙŠØ« DOM ØŒ ÙˆÙŠØ¬Ø¹Ù„Ù‡ ØªÙØ§Ø¹Ù„ÙŠ.  (Ø§Ù„Ù…Ø²ÙŠØ¯ Ø­ÙˆÙ„ Ù‡Ø°Ø§ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù‡Ù†Ø§</a> ).  Ø±Ø¯ ÙØ¹Ù„ ÙˆØ¸ÙŠÙØ© <strong>Ù‡ÙŠØ¯Ø±Ø§Øª</strong> ÙŠÙØ¹Ù„ Ù‡Ø°Ø§.  ÙˆØ§Ù„Ø¢Ù† Ù„ÙŠØ³ Ù„Ø¯ÙŠÙ†Ø§ Ø£ÙŠ Ø¹Ù„Ø§Ù‚Ø© Ø¨Ø¬Ù‡Ø§Ø² Ø§Ù„ØªÙˆØ¬ÙŠÙ‡ Ø§Ù„Ø«Ø§Ø¨Øª.  Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø¹ØªØ§Ø¯ ÙˆØ§Ø­Ø¯ - BrowserRouter. </p><br><p style=";text-align:right;direction:rtl">  <em>src / client.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { hydrate } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { BrowserRouter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./app/App'</span></span> hydrate( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#app'</span></span>) )</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¨Ø§Ù„ÙØ¹Ù„ ÙÙŠ Ù…Ù„ÙÙŠÙ† ØªÙ…ÙƒÙ† Ø¹Ù†ØµØ± Ø±Ø¯ Ø§Ù„ÙØ¹Ù„ Ù…Ù† Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù„ØªØ¶ÙŠØ¡.  Ù‡Ø°Ø§ Ù‡Ùˆ Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ Ù„ØªØ·Ø¨ÙŠÙ‚ Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ Ø§Ù„Ø°ÙŠ ÙŠØ¤Ø¯ÙŠ Ø§Ù„ØªÙˆØ¬ÙŠÙ‡.  Ø±Ù…Ø²Ù‡Ø§ Ø´Ø§Ø¦Ø¹ Ø¬Ø¯Ù‹Ø§: </p><br><p style=";text-align:right;direction:rtl">  <em>src / app / App.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Switch, Route } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Home <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Home'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">exact</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{Home}/</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø­Ø³Ù†Ù‹Ø§ ØŒ <em>src / app / Home.js.</em>  Ù„Ø§Ø­Ø¸ ÙƒÙŠÙ ØªØ¹Ù…Ù„ Ø§Ù„Ø®ÙˆØ°Ø© - ØºÙ„Ø§Ù Ø¹Ù„Ø§Ù…Ø© Ø§Ù„Ø±Ø£Ø³ Ø§Ù„Ù…Ø¹ØªØ§Ø¯. </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Home</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Helmet</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Universal Page</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">title</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"Modern Web App - Home Page"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Helmet</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Welcome to the page of Universal Web App </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù…Ø¨Ø±ÙˆÙƒ!  Ø£Ø®Ø°Ù†Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† ØªØ·ÙˆÙŠØ± MWA!  Ø¨Ù‚ÙŠ Ø³ÙˆÙ‰ Ø§Ù„Ù‚Ù„ÙŠÙ„ Ù…Ù† Ø§Ù„Ù„Ù…Ø³Ø§Øª Ù…Ù† Ø£Ø¬Ù„ Ø§Ø®ØªØ¨Ø§Ø± ÙƒÙ„ Ø´ÙŠØ¡.  Ù…Ù† Ø§Ù„Ù†Ø§Ø­ÙŠØ© Ø§Ù„Ù…Ø«Ø§Ù„ÙŠØ© ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ù…Ù„Ø¡ Ù…Ø¬Ù„Ø¯ <em>/ Ø§Ù„Ø£ØµÙˆÙ„</em> Ø¨Ù…Ù„ÙØ§Øª Ù†Ù…Ø· Ø¹Ù…ÙˆÙ…ÙŠ ÙˆÙØ§ÙÙŠÙƒÙˆÙ† ÙˆÙÙ‚Ù‹Ø§ Ù„Ù„Ù‚Ø§Ù„Ø¨ - server / template.js.  Ù„ÙŠØ³ Ù„Ø¯ÙŠÙ†Ø§ Ø£ÙŠØ¶Ù‹Ø§ Ø£ÙˆØ§Ù…Ø± Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.  Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ <em>package.json</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"start"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run pack &amp;&amp; npm run startProd"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startProd"</span></span>: <span class="hljs-string"><span class="hljs-string">"NODE_ENV=production node index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"pack"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack --mode production --config webpack.config.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"startDev"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run packDev &amp;&amp; node index.js"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"packDev"</span></span>: <span class="hljs-string"><span class="hljs-string">"webpack --mode development --config webpack.config.js"</span></span> }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù‚Ø¯ ØªÙ„Ø§Ø­Ø¸ ÙØ¦ØªÙŠÙ† Ù…Ù† Ø§Ù„Ø£ÙˆØ§Ù…Ø± - Prod Ùˆ Dev.  Ø¥Ù†Ù‡Ø§ ØªØ®ØªÙ„Ù ÙÙŠ ØªÙƒÙˆÙŠÙ† webpack v4.  Ø­ÙˆÙ„ - <code>--mode</code> ÙŠØ³ØªØ­Ù‚ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù‡Ù†Ø§</a> . <br>  ØªØ£ÙƒØ¯ Ù…Ù† ØªØ¬Ø±Ø¨Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø§Ù„Ù†Ø§ØªØ¬ ÙÙŠ <strong>Ø§Ù„Ù…Ø¶ÙŠÙ Ø§Ù„Ù…Ø­Ù„ÙŠ: 3000</strong> </p><br><a name="material"></a><br><h3 id="2-material-ui" style=";text-align:right;direction:rtl">  2. Ø§Ù„Ù…ÙˆØ§Ø¯ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… </h3><br><p style=";text-align:right;direction:rtl">  Ø³ÙŠØ±ÙƒØ² Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø²Ø¡ Ù…Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆÙŠØ¨ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… SSR Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…ÙˆØ§Ø¯.  Ù„Ù…Ø§Ø°Ø§ Ø¨Ø§Ù„Ø¶Ø¨Ø· Ù„Ù‡Ø§ØŸ  ÙƒÙ„ Ø´ÙŠØ¡ Ø¨Ø³ÙŠØ· - Ø§Ù„Ù…ÙƒØªØ¨Ø© ØªØ¹Ù…Ù„ Ø¨Ù†Ø´Ø§Ø· Ø¹Ù„Ù‰ ØªØ·ÙˆÙŠØ± ÙˆØµÙŠØ§Ù†Ø© ÙˆØªÙˆØ«ÙŠÙ‚ ÙˆØ§Ø³Ø¹ Ø§Ù„Ù†Ø·Ø§Ù‚.  Ù…Ø¹ Ø°Ù„Ùƒ ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø¨Ù†Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ù…ÙŠÙ„Ø© Ù„Ù…Ø¬Ø±Ø¯ Ø§Ù„Ø¨ØµÙ‚. </p><br><p style=";text-align:right;direction:rtl">  ÙˆÙŠØ±Ø¯ ÙˆØµÙ Ù…Ø®Ø·Ø· Ø§Ù„Ø§ØªØµØ§Ù„ Ù†ÙØ³Ù‡ ØŒ ÙˆÙ…Ù†Ø§Ø³Ø¨Ø© Ù„ØªØ·Ø¨ÙŠÙ‚Ù†Ø§ ØŒ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ù‡Ù†Ø§</a> .  Ø­Ø³Ù†Ø§ ØŒ Ø¯Ø¹Ù†Ø§ Ù†ÙØ¹Ù„ Ø°Ù„Ùƒ. </p><br><p style=";text-align:right;direction:rtl">  ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª Ø§Ù„Ù„Ø§Ø²Ù…Ø©: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">npm i @material-ui/core jss react-jss</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„ØªØ§Ù„ÙŠ Ø¹Ù„ÙŠÙ†Ø§ Ø¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø©.  ÙÙŠ <em>server / server.js ØŒ Ù†Ù„ØªÙ</em> ØªØ·Ø¨ÙŠÙ‚Ù†Ø§ ÙÙŠ JssProvider Ùˆ MuiThemeProvider ØŒ ÙˆØ§Ù„Ø°ÙŠ Ø³ÙŠÙˆÙØ± Ù…ÙƒÙˆÙ†Ø§Øª ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ø§Ø¯ÙŠØ© ØŒ ÙˆØ§Ù„Ø£Ù‡Ù… Ù…Ù† Ø°Ù„Ùƒ ØŒ ÙƒØ§Ø¦Ù† sheetRegistry - css ØŒ Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ ÙˆØ¶Ø¹Ù‡ ÙÙŠ Ù‚Ø§Ù„Ø¨ HTML.  Ù…Ù† Ø¬Ø§Ù†Ø¨ Ø§Ù„Ø¹Ù…ÙŠÙ„ ØŒ Ù†Ø³ØªØ®Ø¯Ù… MuiThemeProvider ÙÙ‚Ø· ØŒ ÙˆÙ†Ø²ÙˆØ¯Ù‡ Ø¨ÙƒØ§Ø¦Ù† Ù…ÙˆØ¶ÙˆØ¹. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø§Ù„Ø®Ø§Ø¯Ù… ØŒ Ø§Ù„Ù‚Ø§Ù„Ø¨ ÙˆØ§Ù„Ø¹Ù…ÙŠÙ„</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / server.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { renderToString } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-dom/server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { StaticRouter } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router-dom'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-comment"><span class="hljs-comment">//     material-ui import { SheetsRegistry } from 'react-jss/lib/jss' import JssProvider from 'react-jss/lib/JssProvider' import { MuiThemeProvider, createMuiTheme, createGenerateClassName, } from '@material-ui/core/styles' import purple from '@material-ui/core/colors/purple' import App from '&amp;/app/App' import template from './template' export default function render(url) { const reactRouterContext = {} //  sheetsRegistry -    const sheetsRegistry = new SheetsRegistry() const sheetsManager = new Map() //   -        const theme = createMuiTheme({ palette: { primary: purple, secondary: { main: '#f44336', }, }, //      3.*.*.   v4 -  typography: { useNextVariants: true, }, }) const generateClassName = createGenerateClassName() //     let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;App/&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/StaticRouter&gt; ) const helmet = Helmet.renderStatic() //  sheetsRegistry        html return template(helmet, content, sheetsRegistry) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / Ø§Ù„Ù‚Ø§Ù„Ø¨</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> css = sheetsRegistry.toString() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scripts = <span class="hljs-string"><span class="hljs-string">`&lt;script src="/client.js"&gt;&lt;/script&gt;`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> page = <span class="hljs-string"><span class="hljs-string">`&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; ... &lt;/head&gt; &lt;body&gt; &lt;div class="content"&gt;...&lt;/div&gt; &lt;style id="jss-server-side"&gt;</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${css}</span></span></span><span class="hljs-string">&lt;/style&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${scripts}</span></span></span><span class="hljs-string"> &lt;/body&gt; `</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>src / client.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">... import MuiThemeProvider <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/styles/MuiThemeProvider'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> createMuiTheme <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/styles/createMuiTheme'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> purple <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/colors/purple'</span></span> <span class="hljs-comment"><span class="hljs-comment">//       ,     //         const theme = createMuiTheme({ palette: { primary: purple, secondary: { main: '#f44336', }, }, typography: { useNextVariants: true, }, }) //     hydrate( &lt;MuiThemeProvider theme={theme}&gt; &lt;BrowserRouter&gt; &lt;App/&gt; &lt;/BrowserRouter&gt; &lt;/MuiThemeProvider&gt;, document.querySelector('#app') )</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† Ø£Ù‚ØªØ±Ø­ Ø¥Ø¶Ø§ÙØ© ØªØµÙ…ÙŠÙ… Ø£Ù†ÙŠÙ‚ Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ø¥Ù„Ù‰ Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.  ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù„Ù‚Ø§Ø¡ Ù†Ø¸Ø±Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ù…ÙƒÙˆÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø¯ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹Ù‡ Ø§Ù„Ø±Ø³Ù…ÙŠ Ø¹Ù„Ù‰ Ø§Ù„ÙˆÙŠØ¨ ØŒ ÙˆÙ‡Ù†Ø§ ÙŠÙƒÙÙŠ Ø§Ù„ÙˆØ±Ù‚ ÙˆØ§Ù„Ø²Ø± Ùˆ AppBar ÙˆØ´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª ÙˆØ§Ù„Ø·Ø¨Ø§Ø¹Ø©. </p><br><p style=";text-align:right;direction:rtl">  <em>src / app / Home.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Paper <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Paper'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Button'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Header <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Header'</span></span> <span class="hljs-comment"><span class="hljs-comment">// Inline styles -       css  react const styles = { paper: { margin: "auto", marginTop: 200, width: "40%", padding: 15 }, btn: { marginRight: 20 } } export default function Home() { return( &lt;div&gt; &lt;Helmet&gt; &lt;title&gt;Universal Material Page&lt;/title&gt; &lt;/Helmet&gt; &lt;Header/&gt; &lt;Paper elevation={4} style={styles.paper} align="center"&gt; &lt;Typography variant="h5"&gt;Universal Web App with Material-ui&lt;/Typography&gt; &lt;br/&gt; &lt;Button variant="contained" color="primary" style={styles.btn}&gt;I like it!&lt;/Button&gt; &lt;/Paper&gt; &lt;/div&gt; ) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>src / app / Header.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> AppBar <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/AppBar'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Toolbar <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Toolbar'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Header</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppBar</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">position</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"static"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Toolbar</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">variant</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"h5"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"inherit"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> Modern Web App </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Typography</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Toolbar</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">AppBar</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ­ÙˆÙ„ Ø´ÙŠØ¡ Ù…Ø«Ù„ Ù‡Ø°Ø§: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hw/sz/tz/hwsztzwymykxqtpq09zvrriozvy.png"></p><br><a name="splitting"></a><br><h3 id="3-code-splitting" style=";text-align:right;direction:rtl">  3. Ø±Ù…Ø² ØªÙ‚Ø³ÙŠÙ… </h3><br><p style=";text-align:right;direction:rtl">  Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ®Ø·Ø· Ù„ÙƒØªØ§Ø¨Ø© Ø´ÙŠØ¡ Ø£ÙƒØ«Ø± Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© TODO ØŒ ÙØ³ÙˆÙ ÙŠØ²Ø¯Ø§Ø¯ Ø·Ù„Ø¨Ùƒ Ø¨Ù…Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø­Ø²Ù…Ø© client.js.  Ù„ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·ÙˆÙŠÙ„ Ù„Ù„ØµÙØ­Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØŒ ØªÙ… Ø§Ø®ØªØ±Ø§Ø¹ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´ÙØ±Ø© Ù„ÙØªØ±Ø© Ø·ÙˆÙŠÙ„Ø©.  ÙˆÙ…Ø¹ Ø°Ù„Ùƒ ØŒ Ø¨Ù…Ø¬Ø±Ø¯ Ø£Ù† Ø±Ø§ÙŠØ§Ù† ÙÙ„ÙˆØ±Ù†Ø³ ØŒ Ø£Ø­Ø¯ Ø§Ù„Ù…Ø¨Ø¯Ø¹ÙŠÙ† ÙÙŠ React-router ØŒ Ø£Ø®Ø§Ù Ø§Ù„Ù…Ø·ÙˆØ±ÙŠÙ† Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙŠÙ† Ø¨Ø¹Ø¨Ø§Ø±Ø©: </p><br><blockquote style=";text-align:right;direction:rtl">  Ø§Ù„ØªÙˆÙÙŠÙ‚ Ù„Ø£ÙˆÙ„Ø¦Ùƒ Ø§Ù„Ø°ÙŠÙ† ÙŠØ­Ø§ÙˆÙ„ÙˆÙ† Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© ØŒ Ø®Ø§Ø¯Ù… ØªÙ‚Ø³ÙŠÙ… Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª. </blockquote><p style=";text-align:right;direction:rtl">  <em>Ø­Ø¸ Ø³Ø¹ÙŠØ¯ Ù„ÙƒÙ„ Ù…Ù† ÙŠÙ‚Ø±Ø± Ø¥Ù†Ø´Ø§Ø¡ ØªØ·Ø¨ÙŠÙ‚Ø§Øª ssr Ù…Ø¹ ØªÙ‚Ø³ÙŠÙ… Ø§Ù„Ø´ÙØ±Ø©</em> </p><br><p style=";text-align:right;direction:rtl">  ØªÙ… ØµØ¯Ù†Ø§ - Ø³Ù†ÙØ¹Ù„ Ø°Ù„Ùƒ!  ØªØ«Ø¨ÙŠØª Ø§Ù„Ø¶Ø±ÙˆØ±ÙŠ: <cut></cut></p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">npm i @babel/plugin-syntax-dynamic-import babel-plugin-dynamic-import-node react-loadable</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ù‡ÙŠ ÙˆØ¸ÙŠÙØ© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· - Ø§Ø³ØªÙŠØ±Ø§Ø¯.  ÙŠØ¯Ø¹Ù… Webpack ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© ØºÙŠØ± Ø§Ù„Ù…ØªØ²Ø§Ù…Ù†Ø© Ù‡Ø°Ù‡ ØŒ ÙˆÙ„ÙƒÙ† ØªØ¬Ù…ÙŠØ¹ Ø¨Ø§Ø¨Ù„ Ø³ÙŠÙƒÙˆÙ† Ù…Ø´ÙƒÙ„Ø© ÙƒØ¨ÙŠØ±Ø©.  Ù„Ø­Ø³Ù† Ø§Ù„Ø­Ø¸ ØŒ Ø¨Ø­Ù„ÙˆÙ„ Ø¹Ø§Ù… 2018 ØŒ ÙˆØµÙ„Øª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ÙÙŠ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ù‡Ø°Ø§.  babel / plugin-syntax-dynamic-import Ùˆ babel-plugin-dynamic-import-node Ø³ÙˆÙ ÙŠÙ†Ù‚Ø°Ù†Ø§ Ù…Ù† Ø§Ù„Ø®Ø·Ø£ <code>"Unexpected token when using import()"</code> .  Ù„Ù…Ø§Ø°Ø§ Ù…ÙƒØªØ¨ØªØ§Ù† Ù„Ù…Ù‡Ù…Ø© ÙˆØ§Ø­Ø¯Ø©ØŸ  Ù‡Ù†Ø§Ùƒ Ø­Ø§Ø¬Ø© Ù„Ø¹Ù‚Ø¯Ø© Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© Ø®ØµÙŠØµÙ‹Ø§ Ù„ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ø®Ø§Ø¯Ù… ØŒ ÙˆØ³ÙˆÙ ØªÙ„ØªÙ‚Ø· Ø§Ù„ÙˆØ§Ø±Ø¯Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙ†Ù‚Ù„: </p><br><p style=";text-align:right;direction:rtl">  <em>index.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"@babel/register"</span></span>)({ <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [<span class="hljs-string"><span class="hljs-string">"@babel/plugin-syntax-dynamic-import"</span></span>, <span class="hljs-string"><span class="hljs-string">"dynamic-import-node"</span></span>] }); <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./app"</span></span>);</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ù†ÙØ³Ù‡ ØŒ Ù†Ù‚ÙˆÙ… Ø¨ØªØ¹Ø¯ÙŠÙ„ <em>Ù…Ù„Ù</em> ØªÙƒÙˆÙŠÙ† Ø¨Ø§Ø¨Ù„ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ <em>.babelrc</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"plugins"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"@babel/plugin-syntax-dynamic-import"</span></span>, <span class="hljs-string"><span class="hljs-string">"react-loadable/babel"</span></span>, ... ]</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø¸Ù‡Ø±Øª Ù‡Ù†Ø§ <strong>Ø±Ø¯ Ø§Ù„ÙØ¹Ù„ Ù„Ù„ØªØ­Ù…ÙŠÙ„</strong> .  Ø³ØªØ¬Ù…Ø¹ Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø°Ø§Øª Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ù…Ù…ØªØ§Ø²Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù…Ø¹Ø·Ù„Ø© Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ø³ØªÙŠØ±Ø§Ø¯ webpack Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… ØŒ ÙˆØ³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ø³ØªÙ„Ø§Ù…Ù‡Ø§ Ø¨Ù†ÙØ³ Ø§Ù„Ø³Ù‡ÙˆÙ„Ø©.  Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ ØŒ ÙŠØ­ØªØ§Ø¬ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¥Ù„Ù‰ ØªÙ†Ø²ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù†Ù…Ø·ÙŠØ©: </p><br><p style=";text-align:right;direction:rtl">  <em>app.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> ... Loadable.preloadAll().then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> app.listen(PORT, <span class="hljs-string"><span class="hljs-string">'0.0.0.0'</span></span>, () =&gt; { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">`The app is running in PORT </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${PORT}</span></span></span><span class="hljs-string">`</span></span>) })) ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù†Ù…Ø·ÙŠØ© Ù†ÙØ³Ù‡Ø§ Ø³Ù‡Ù„Ø© Ù„Ù„ØºØ§ÙŠØ© Ù„Ù„Ø§ØªØµØ§Ù„.  Ø£Ù„Ù‚Ù Ù†Ø¸Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯: </p><br><p style=";text-align:right;direction:rtl">  <em>src / app / App.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Switch, Route } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-router'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loading <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/Loading'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AsyncHome = Loadable({ <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-comment"><span class="hljs-comment">/* webpackChunkName: "Home" */</span></span> <span class="hljs-string"><span class="hljs-string">'./Home'</span></span>), <span class="hljs-attr"><span class="hljs-attr">loading</span></span>: Loading, <span class="hljs-attr"><span class="hljs-attr">delay</span></span>: <span class="hljs-number"><span class="hljs-number">300</span></span>, }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">App</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Route</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">exact</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">path</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">component</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{AsyncHome}/</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Switch</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ† Home Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù† Ø¨Ø´ÙƒÙ„ ØºÙŠØ± Ù…ØªØ²Ø§Ù…Ù† ØŒ Ù…Ù…Ø§ ÙŠÙˆØ¶Ø­ Ù„Ø­Ø²Ù…Ø© Ø§Ù„ÙˆÙŠØ¨ Ø£Ù†Ù‡ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ³Ù…Ù‰ Home (Ù†Ø¹Ù… ØŒ Ù‡Ø°Ù‡ Ø­Ø§Ù„Ø© Ù†Ø§Ø¯Ø±Ø© Ø¹Ù†Ø¯Ù…Ø§ ØªÙƒÙˆÙ† Ø§Ù„ØªØ¹Ù„ÙŠÙ‚Ø§Øª Ù…Ù†Ø·Ù‚ÙŠØ©).  <code>delay: 300</code> ÙŠØ¹Ù†ÙŠ Ø£Ù†Ù‡ Ø¨Ø¹Ø¯ <code>delay: 300</code> Ù…Ù„Ù„ÙŠ Ø«Ø§Ù†ÙŠØ© Ù…Ù† Ø¹Ø¯Ù… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ÙƒÙˆÙ† ØŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¥Ø¸Ù‡Ø§Ø± Ø£Ù† Ø§Ù„ØªÙ†Ø²ÙŠÙ„ Ù…Ø§ Ø²Ø§Ù„ Ù…Ø³ØªÙ…Ø±Ø§Ù‹.  Ø¥Ù†Ù‡ ÙŠØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„ØªØ­Ù…ÙŠÙ„: </p><br><p style=";text-align:right;direction:rtl">  <em>src / Loading.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> CircularProgress <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/CircularProgress'</span></span> <span class="hljs-comment"><span class="hljs-comment">//        .   const styles = { div: { width: '20%', margin: 'auto', transition: 'margin 1s', backgroundColor: 'lightgreen', color: 'white', cursor: 'pointer', borderRadius: '3px' } } export default function Loading(props) { if (props.error) { //      (  PWA  ),  //  ,      return &lt;div style={styles.div} onClick={ () =&gt; window.location.reload(true) } align="center"&gt; &lt;h3&gt; Please, click here or reload the page. New content is ready. &lt;/h3&gt; &lt;/div&gt; } else if (props.pastDelay) { //     300,    return &lt;CircularProgress color="primary"/&gt; } else { //    Loading  return null } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ø®Ø§Ø¯Ù… Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø³ØªÙˆØ±Ø¯Ù‡Ø§ ØŒ Ø³Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø§Ù„ØªØ³Ø¬ÙŠÙ„: </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">Loadable({ <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span>(<span class="hljs-string"><span class="hljs-string">'./Bar'</span></span>), <span class="hljs-attr"><span class="hljs-attr">modules</span></span>: [<span class="hljs-string"><span class="hljs-string">'./Bar'</span></span>], <span class="hljs-attr"><span class="hljs-attr">webpack</span></span>: <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> [<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>.resolveWeak(<span class="hljs-string"><span class="hljs-string">'./Bar'</span></span>)], });</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙˆÙ„ÙƒÙ† Ø­ØªÙ‰ Ù„Ø§ Ù†ÙƒØ±Ø± Ù†ÙØ³ Ø§Ù„ÙƒÙˆØ¯ ØŒ ÙŠÙˆØ¬Ø¯ Ù…Ù„Ø­Ù‚ Ø¥Ø¶Ø§ÙÙŠ Ù‚Ø§Ø¨Ù„ Ù„Ù„ØªØ­Ù…ÙŠÙ„ / babel <em>ÙˆØµÙ„Ù†Ø§Ù‡</em> Ø¨Ø§Ù„ÙØ¹Ù„ Ø¨Ù€ <em>.babelrc</em> .  Ø§Ù„Ø¢Ù† ÙˆØ¨Ø¹Ø¯ Ø£Ù† Ø¹Ø±Ù Ø§Ù„Ø®Ø§Ø¯Ù… Ù…Ø§ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ø³ØªÙŠØ±Ø§Ø¯Ù‡ ØŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ù…Ø¹Ø±ÙØ© Ù…Ø§ Ø³ÙŠØªÙ… ØªÙ‚Ø¯ÙŠÙ…Ù‡.  Ø³ÙŠØ± Ø§Ù„Ø¹Ù…Ù„ ÙŠØ´Ø¨Ù‡ Ù‚Ù„ÙŠÙ„Ø§ Ø®ÙˆØ°Ø©: </p><br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / server.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { getBundles } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable/webpack'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> stats <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'~/public/react-loadable.json'</span></span> ... let modules = [] <span class="hljs-comment"><span class="hljs-comment">//      modules let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;Loadable.Capture report={moduleName =&gt; modules.push(moduleName)}&gt; &lt;App/&gt; &lt;/Loadable.Capture&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/StaticRouter&gt; ) ... //     ( ) let bundles = getBundles(stats, modules) //    HTML- return template(helmet, content, sheetsRegistry, bundles)</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ù‚ÙŠØ§Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù†Ù…Ø·ÙŠØ© Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… ØŒ Ù†Ø­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø±Ø¨Ø·Ù‡Ø§ Ù…Ø¹ Ø§Ù„Ø­Ø²Ù… Ø§Ù„ØªÙŠ Ø£Ù†Ø´Ø£ØªÙ‡Ø§ webpack.  Ù„Ù„Ù‚ÙŠØ§Ù… Ø¨Ø°Ù„Ùƒ ØŒ Ù‚Ù… Ø¨Ø¥Ø¬Ø±Ø§Ø¡ ØªØºÙŠÙŠØ±Ø§Øª Ø¹Ù„Ù‰ ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù…Ø¬Ù…Ø¹.  Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ù„Ù„Ø±Ø¯ - Ù„Ù„ØªØ­Ù…ÙŠÙ„ / webpack ÙŠÙƒØªØ¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø¥Ù„Ù‰ Ù…Ù„Ù Ù…Ù†ÙØµÙ„.  ÙŠØ¬Ø¨ Ø£ÙŠØ¶Ù‹Ø§ Ø¥Ø®Ø¨Ø§Ø± webpack Ø¨Ø­ÙØ¸ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ø¨Ø¹Ø¯ Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ - ÙÙŠ ÙƒØ§Ø¦Ù† Ø§Ù„Ø¥Ø®Ø±Ø§Ø¬. </p><br><p style=";text-align:right;direction:rtl">  <em>webpack.config.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ReactLoadablePlugin = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'react-loadable/webpack'</span></span>).ReactLoadablePlugin; ... output: { <span class="hljs-attr"><span class="hljs-attr">path</span></span>: path.resolve(__dirname, <span class="hljs-string"><span class="hljs-string">'public'</span></span>), <span class="hljs-attr"><span class="hljs-attr">publicPath</span></span>: <span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-attr"><span class="hljs-attr">chunkFilename</span></span>: <span class="hljs-string"><span class="hljs-string">'[name].bundle.js'</span></span>, <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">"[name].js"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">plugins</span></span>: [ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ReactLoadablePlugin({ <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'./public/react-loadable.json'</span></span>, }) ]</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†ÙƒØªØ¨ ÙˆØ­Ø¯Ø§Øª ÙÙŠ Ø§Ù„Ù‚Ø§Ù„Ø¨ ØŒ ÙˆØªØ­Ù…ÙŠÙ„Ù‡Ø§ Ø¨Ø¯ÙˆØ±Ù‡: </p><br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / Ø§Ù„Ù‚Ø§Ù„Ø¨</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry, bundles</span></span></span><span class="hljs-function">) </span></span>{ ... const page = <span class="hljs-string"><span class="hljs-string">`&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt;...&lt;/head&gt; &lt;body&gt; &lt;div class="content"&gt; &lt;div id="app" class="wrap-inner"&gt; &lt;!--- magic happens here --&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${content}</span></span></span><span class="hljs-string"> &lt;/div&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bundles.map(bundle =&gt; </span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">`&lt;script src='/</span></span></span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${bundle.file}</span></span></span></span></span><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'&gt;&lt;/script&gt;`</span></span></span></span><span class="hljs-string"><span class="hljs-subst">).join(</span></span><span class="hljs-string"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-string">'\n'</span></span></span></span><span class="hljs-string"><span class="hljs-subst">)}</span></span></span><span class="hljs-string"> &lt;/div&gt; &lt;style id="jss-server-side"&gt;</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${css}</span></span></span><span class="hljs-string">&lt;/style&gt; </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${scripts}</span></span></span><span class="hljs-string"> &lt;/body&gt; `</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ÙŠØ¨Ù‚Ù‰ ÙÙ‚Ø· Ù„Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¬Ø²Ø¡ Ø§Ù„Ø¹Ù…ÙŠÙ„.  ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø£Ø³Ù„ÙˆØ¨ <code>Loadable.preloadReady()</code> Ø¨ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ­Ø¯Ø§Øª Ø§Ù„Ù†Ù…Ø·ÙŠØ© Ø§Ù„ØªÙŠ Ù‚Ø¯Ù…Ù‡Ø§ Ø§Ù„Ø®Ø§Ø¯Ù… Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ù‚Ø¯Ù…Ù‹Ø§. </p><br><p style=";text-align:right;direction:rtl">  <em>src / client.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> Loadable.preloadReady().then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { hydrate( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MuiThemeProvider</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">theme</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{theme}</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">App</span></span></span></span><span class="xml"><span class="hljs-tag">/&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">BrowserRouter</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">MuiThemeProvider</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'#app'</span></span>) ) })</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù†ØªÙ‡Ù‰  Ù†Ø¨Ø¯Ø£ ÙˆÙ†Ù†Ø¸Ø± Ø¥Ù„Ù‰ Ø§Ù„Ù†ØªÙŠØ¬Ø© - ÙÙŠ Ø§Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£Ø®ÙŠØ± ÙƒØ§Ù†Øª Ø§Ù„Ø­Ø²Ù…Ø© Ù…Ù„ÙÙ‹Ø§ ÙˆØ§Ø­Ø¯Ù‹Ø§ ÙÙ‚Ø· - client.js ÙŠØ²Ù† 265 ÙƒÙŠÙ„Ùˆ Ø¨Ø§ÙŠØª ØŒ ÙˆØ§Ù„Ø¢Ù† ÙŠÙˆØ¬Ø¯ 3 Ù…Ù„ÙØ§Øª ØŒ Ø£ÙƒØ¨Ø±Ù‡Ø§ Ø¨ÙˆØ²Ù† 215 ÙƒÙŠÙ„Ùˆ Ø¨Ø§ÙŠØª.  ÙˆØºÙ†ÙŠ Ø¹Ù† Ø§Ù„Ù‚ÙˆÙ„ ØŒ Ø³ÙˆÙ ØªØ²ÙŠØ¯ Ø³Ø±Ø¹Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø´ÙƒÙ„ Ù…Ù„Ø­ÙˆØ¸ Ø¹Ù†Ø¯ ØªÙˆØ³ÙŠØ¹ Ù†Ø·Ø§Ù‚ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŸ </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/a-/-t/k_/a--tk_6dxr4zzvg-7z8zys_cas4.png"></p><br><a name="redux"></a><br><h3 id="4-redux-schetchik" style=";text-align:right;direction:rtl">  4. Ù…Ø³ØªØ±Ø¬Ø¹ Ø§Ù„Ø¹Ø¯Ø§Ø¯ </h3><br><p style=";text-align:right;direction:rtl">  Ø§Ù„Ø¢Ù† Ø³Ù†Ø¨Ø¯Ø£ ÙÙŠ Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©.  ÙƒÙŠÙÙŠØ© Ø­Ù„ Ø§Ù„Ù…Ø¹Ø¶Ù„Ø© Ø¹Ù†Ø¯Ù…Ø§ ÙŠÙƒÙˆÙ† Ù„Ø¯Ù‰ Ø§Ù„Ø®Ø§Ø¯Ù… Ø¨ÙŠØ§Ù†Ø§Øª (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ ØŒ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª) ØŒ ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¹Ø±Ø¶Ù‡Ø§ Ø­ØªÙ‰ ØªØªÙ…ÙƒÙ† Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù…Ù† Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ØŒ Ø«Ù… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„. </p><br><p style=";text-align:right;direction:rtl">  Ù‡Ù†Ø§Ùƒ Ø­Ù„.  ÙŠØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡ ÙÙŠ ÙƒÙ„ Ù…Ù‚Ø§Ù„ SSR ØªÙ‚Ø±ÙŠØ¨Ù‹Ø§ ØŒ ÙˆÙ„ÙƒÙ† Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙŠ ÙŠØªÙ… ØªÙ†ÙÙŠØ°Ù‡Ø§ Ø¨Ù‡Ø§ Ø¨Ø¹ÙŠØ¯Ø© ÙƒÙ„ Ø§Ù„Ø¨Ø¹Ø¯ Ø¹Ù† Ø§Ù„Ù‚Ø§Ø¨Ù„ÙŠØ© Ù„Ù„ØªÙˆØ³Ø¹Ø© Ø¨Ø´ÙƒÙ„ Ø¬ÙŠØ¯.  Ø¨Ø¹Ø¨Ø§Ø±Ø© Ø¨Ø³ÙŠØ·Ø© ØŒ Ø¨Ø¹Ø¯ Ù…Ø¹Ø¸Ù… Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ØŒ Ù„Ù† ØªÙƒÙˆÙ† Ù‚Ø§Ø¯Ø±Ù‹Ø§ Ø¹Ù„Ù‰ Ø¥Ù†Ø´Ø§Ø¡ Ù…ÙˆÙ‚Ø¹ Ø­Ù‚ÙŠÙ‚ÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… SSR ÙˆÙÙ‚Ù‹Ø§ Ù„Ù…Ø¨Ø¯Ø£ "ÙˆØ§Ø­Ø¯ ØŒ Ø§Ø«Ù†Ø§Ù† ØŒ ÙˆØ¥Ù†ØªØ§Ø¬".  Ø§Ù„Ø¢Ù† Ø³Ø£Ø­Ø§ÙˆÙ„ Ø£Ù† Ø£ÙƒÙˆÙ† Ù†Ù‚Ø·Ø©. </p><br><p style=";text-align:right;direction:rtl">  Ù†Ø­Ù† Ø¨Ø­Ø§Ø¬Ø© ÙÙ‚Ø· <strong>Ø§Ù„ØªÙƒØ±Ø§Ø±</strong> .  Ø§Ù„Ø­Ù‚ÙŠÙ‚Ø© Ù‡ÙŠ Ø£Ù† Ø§Ù„Ø¥Ø¹Ø§Ø¯Ø© Ù„Ø¯ÙŠÙ‡Ø§ Ù…ØªØ¬Ø± Ø¹Ø§Ù„Ù…ÙŠ ØŒ ÙŠÙ…ÙƒÙ†Ù†Ø§ Ù†Ù‚Ù„Ù‡ Ù…Ù† Ø§Ù„Ø®Ø§Ø¯Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ù†Ù‚Ø±Ø© Ø¥ØµØ¨Ø¹. <br>  Ø§Ù„Ù…Ù‡Ù… Ø§Ù„Ø¢Ù† (!): Ù„Ø¯ÙŠÙ†Ø§ Ø³Ø¨Ø¨ <em>Ù„ÙˆØ¬ÙˆØ¯ Ù…Ù„Ù server / stateRoutes</em> .  ÙŠØ¯ÙŠØ± ÙƒØ§Ø¦Ù† <strong>initialState</strong> Ø§Ù„Ø°ÙŠ ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¤Ù‡ Ù‡Ù†Ø§Ùƒ ØŒ ÙˆÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…ØªØ¬Ø± Ù…Ù†Ù‡ ØŒ Ø«Ù… ÙŠØªÙ… ØªÙ…Ø±ÙŠØ±Ù‡ Ø¥Ù„Ù‰ Ù‚Ø§Ù„Ø¨ HTML.  ÙŠØ³ØªØ±Ø¯ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„ÙƒØ§Ø¦Ù† Ù…Ù† <code>window.__STATE__</code> ØŒ <code>window.__STATE__</code> Ø§Ù„Ù…ØªØ¬Ø± ØŒ ÙˆÙ‡Ø°Ø§ ÙƒÙ„ Ø´ÙŠØ¡.  ÙŠØ¨Ø¯Ùˆ Ø³Ù‡Ù„Ø§. </p><cut></cut><br><p style=";text-align:right;direction:rtl">  ØªØ«Ø¨ÙŠØª: </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">npm i redux react-redux</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§ØªØ¨Ø¹ Ø§Ù„Ø®Ø·ÙˆØ§Øª Ø§Ù„Ù…Ø°ÙƒÙˆØ±Ø© Ø£Ø¹Ù„Ø§Ù‡.  Ù‡Ù†Ø§ ØŒ Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø¬Ø²Ø¡ Ø§Ù„Ø£ÙƒØ¨Ø± ØŒ ØªÙƒØ±Ø§Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© Ø³Ø§Ø¨Ù‚Ø§. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ø®Ø§Ø¯Ù… ÙˆØ¹Ù…ÙŠÙ„ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¹Ø¯Ø§Ø¯</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / stateRoutes.js</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ssr <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server'</span></span> <span class="hljs-comment"><span class="hljs-comment">//   -  = 5 const initialState = { count: 5 } export default function (app) { app.get('*', (req, res) =&gt; { //  initialState  const response = ssr(req.url, initialState) res.send(response) }) }</span></span></code> </pre><br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / server.js</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> configureStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/redux/configureStore'</span></span> ... export <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url, initialState</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   const store = configureStore(initialState) ... // Redux Provider    . let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;Provider store={store} &gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;Loadable.Capture report={moduleName =&gt; modules.push(moduleName)}&gt; &lt;App/&gt; &lt;/Loadable.Capture&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/Provider&gt; &lt;/StaticRouter&gt; ) ... //  initialState  HTML- return template(helmet, content, sheetsRegistry, bundles, initialState) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>Ø§Ù„Ø®Ø§Ø¯Ù… / Ø§Ù„Ù‚Ø§Ù„Ø¨</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry, bundles, initialState = {}</span></span></span><span class="hljs-function">) </span></span>{ ... <span class="hljs-comment"><span class="hljs-comment">//   initialState       const scripts = `&lt;script&gt; window.__STATE__ = ${JSON.stringify(initialState)} &lt;/script&gt; &lt;script src="/client.js"&gt;&lt;/script&gt;` const page = `&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt;...&lt;/head&gt; &lt;body&gt; ... ${scripts} &lt;/body&gt; ` return page }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  Ù†Ø­ØµÙ„ Ø¹Ù„Ù‰ Ù…ØªØ¬Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙŠÙ„.  <em>src / client.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Loadable <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-loadable'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Provider } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> configureStore <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./redux/configureStore'</span></span> ... <span class="hljs-comment"><span class="hljs-comment">//   initialState  ""     const state = window.__STATE__ const store = configureStore(state) Loadable.preloadReady().then(() =&gt; { hydrate( &lt;Provider store={store} &gt; &lt;MuiThemeProvider theme={theme}&gt; &lt;BrowserRouter&gt; &lt;App/&gt; &lt;/BrowserRouter&gt; &lt;/MuiThemeProvider&gt; &lt;/Provider&gt;, document.querySelector('#app') ) })</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  Ù…Ù†Ø·Ù‚ Ø§Ù„ØªÙƒØ±Ø§Ø± ÙÙŠ SSR Ù‚Ø¯ Ø§Ù†ØªÙ‡Ù‰.  Ø§Ù„Ø¢Ù† ØŒ Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…Ø¹ØªØ§Ø¯ Ù…Ø¹ Ø§Ù„Ø¥Ø¹Ø§Ø¯Ø© Ù‡Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ù…ØªØ¬Ø± ØŒ ÙˆØ¥Ø¬Ø±Ø§Ø¡Ø§Øª ØŒ ÙˆÙ…Ø®ÙØ¶Ø§Øª ØŒ ÙˆØ§Ù„Ø§ØªØµØ§Ù„ ØŒ ÙˆØ£ÙƒØ«Ø± Ù…Ù† Ø°Ù„Ùƒ.  Ø¢Ù…Ù„ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‡Ø°Ø§ ÙˆØ§Ø¶Ø­Ù‹Ø§ Ø¯ÙˆÙ† ØªÙˆØ¶ÙŠØ­ ÙƒØ«ÙŠØ±.  Ø¥Ù† Ù„Ù… ÙŠÙƒÙ† ØŒ ÙˆÙ‚Ø±Ø§Ø¡Ø© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚</a> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">Ù…Ø³ØªØ±Ø¬Ø¹ ÙƒÙ„Ù‡ Ù‡Ù†Ø§</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  <em>src / redux /igureStore.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { createStore } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> rootReducer <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./reducers'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureStore</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">preloadedState</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createStore( rootReducer, preloadedState ) }</code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>src / redux / Actions.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// actions export const INCREASE = 'INCREASE' export const DECREASE = 'DECREASE' //  action creators export function increase() { return { type: INCREASE } } export function decrease() { return { type: DECREASE } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>src / Ù…Ø³ØªØ±Ø¬Ø¹ / Ù…Ø®ÙØ¶Ø§Øª</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { INCREASE, DECREASE } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./actions'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">count</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state, action</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (action.type) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> INCREASE: <span class="hljs-comment"><span class="hljs-comment">//   action = INCREASE -  state.count  1 return Object.assign({}, state, { count: state.count + 1 }) case DECREASE: //  DECREASE -   1.    return Object.assign({}, state, { count: state.count - 1 }) default: //      return state } }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>src / app / Home.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { Helmet } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-helmet'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { bindActionCreators } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { connect } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react-redux'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> Actions <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/redux/actions'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Header <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Header'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Paper <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Paper'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Typography <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Typography'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Button <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'@material-ui/core/Button'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> styles = { <span class="hljs-attr"><span class="hljs-attr">paper</span></span>: { <span class="hljs-attr"><span class="hljs-attr">margin</span></span>: <span class="hljs-string"><span class="hljs-string">'auto'</span></span>, <span class="hljs-attr"><span class="hljs-attr">marginTop</span></span>: <span class="hljs-string"><span class="hljs-string">'10%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">width</span></span>: <span class="hljs-string"><span class="hljs-string">'40%'</span></span>, <span class="hljs-attr"><span class="hljs-attr">padding</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span> }, <span class="hljs-attr"><span class="hljs-attr">btn</span></span>: { <span class="hljs-attr"><span class="hljs-attr">marginRight</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span> } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Home</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">React</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(){ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.increase = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.increase.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decrease = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.decrease.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) } <span class="hljs-comment"><span class="hljs-comment">//   dispatch   increase  decrease increase(){ this.props.actions.increase() } decrease(){ this.props.actions.decrease() } render(){ return ( &lt;div&gt; &lt;Helmet&gt; &lt;title&gt;MWA - Home&lt;/title&gt; &lt;meta name="description" content="Modern Web App - Home Page" /&gt; &lt;/Helmet&gt; &lt;Header/&gt; &lt;Paper elevation={4} style={styles.paper} align="center"&gt; &lt;Typography variant="h5"&gt;Redux-Counter&lt;/Typography&gt; &lt;Typography variant="subtitle1"&gt;Counter: {this.props.count}&lt;/Typography&gt; &lt;br/&gt; &lt;Button variant="contained" color="primary" onClick={this.increase} style={styles.btn}&gt;Increase&lt;/Button&gt; &lt;Button variant="contained" color="primary" onClick={this.decrease}&gt;Decrease&lt;/Button&gt; &lt;/Paper&gt; &lt;/div&gt; ) } } //   props  const mapStateToProps = (state) =&gt; ({ count: state.count }) //  actions  this.props const mapDispatchToProps = (dispatch) =&gt; ({ actions: bindActionCreators(Actions, dispatch) }) //  react-redux connect     export default connect( mapStateToProps, mapDispatchToProps )(Home)</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">    : </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/jx/hl/yn/jxhlynjixnl5i0r-g7zygxuax4y.gif"></p><br><a name="mobile"></a><br><h3 id="5-mobilnaya-versiya" style=";text-align:right;direction:rtl"> 5.   </h3><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ek/3a/on/ek3aonmzc8w0atrngq6zjngea_g.gif" align="left">     ,         â€”  .       .        ,    ,        <strong>initialState</strong> ,      . </p><br><p style=";text-align:right;direction:rtl">     : </p><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">npm i mobile-detect</code> </pre> <br><p style=";text-align:right;direction:rtl"> <strong>mobile detect</strong>      user-agent,  null             . <br><br clear="left"></p><br><p style=";text-align:right;direction:rtl">   : </p><br><p style=";text-align:right;direction:rtl"> <em>server/stateRoutes.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ssr <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./server'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MobileDetect <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'mobile-detect'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = { <span class="hljs-attr"><span class="hljs-attr">count</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-attr"><span class="hljs-attr">mobile</span></span>: <span class="hljs-literal"><span class="hljs-literal">null</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ app.get(<span class="hljs-string"><span class="hljs-string">'*'</span></span>, (req, res) =&gt; { <span class="hljs-comment"><span class="hljs-comment">// md == null,  ,    const md = new MobileDetect(req.headers['user-agent']) const response = ssr(req.url, initialState, md.mobile()) res.send(response) }) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">           â€”  : </p><br><div class="spoiler" style=";text-align:right;direction:rtl"> <b class="spoiler_title">     </b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ø§Ù„Ø®Ø§Ø¯Ù… / server.js</font></font></em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">... import App <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/app/App'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> MobileApp <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'&amp;/mobileApp/App'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">render</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">url, initialState, mobile</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    -    let content = renderToString( &lt;StaticRouter location={url} context={reactRouterContext}&gt; &lt;Provider store={store} &gt; &lt;JssProvider registry={sheetsRegistry} generateClassName={generateClassName}&gt; &lt;MuiThemeProvider theme={theme} sheetsManager={sheetsManager}&gt; &lt;Loadable.Capture report={moduleName =&gt; modules.push(moduleName)}&gt; {mobile === null ? &lt;App/&gt; : &lt;MobileApp/&gt; } &lt;/Loadable.Capture&gt; &lt;/MuiThemeProvider&gt; &lt;/JssProvider&gt; &lt;/Provider&gt; &lt;/StaticRouter&gt; ) //       initialState.mobile = mobile return template(helmet, content, sheetsRegistry, bundles, initialState) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl"> <em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">src / client.js</font></font></em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs">... const state = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.__STATE__ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> store = configureStore(state) <span class="hljs-comment"><span class="hljs-comment">//       state Loadable.preloadReady().then(() =&gt; { hydrate( &lt;Provider store={store} &gt; &lt;MuiThemeProvider theme={theme}&gt; &lt;BrowserRouter&gt; {state.mobile === null ? &lt;App/&gt; : &lt;MobileApp/&gt; } &lt;/BrowserRouter&gt; &lt;/MuiThemeProvider&gt; &lt;/Provider&gt;, document.querySelector('#app') ) })</span></span></code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">         react-,     .    ,     .       <em>src/mobileApp</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . </p><br><a name="pwa"></a><br><h3 id="6-progressivnoe-prilozhenie" style=";text-align:right;direction:rtl"> 6.   </h3><br><p style=";text-align:right;direction:rtl"> <em>Progressive Web App</em> (PWA), <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  Google</a> â€”  ,    ,    ,   . </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/6g/iw/x_/6giwx_0fwzwfcppxqp1kfvsle_a.gif" align="left">      .         :  Chrome, Opera  Samsung Internet     ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a> .  iOS             Safari,       .  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a> .      PWA:  Windows  Chrome v70, Linux  v70, ChromeOS  v67.  PWA  macOS â€”         2019    Chrome v72. </p><br><p style=";text-align:right;direction:rtl">       : PWA        .  ,       ,   ,  . <br><br clear="left"></p><br><p style=";text-align:right;direction:rtl"> 2  â€” manifest.json  service-worker.js â€”  . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> â€”  json , ,     ,  . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Service-worker</a>   :    push-,        . </p><br><p style=";text-align:right;direction:rtl">   .      ,     : </p><br><p style=";text-align:right;direction:rtl"> <em>public/manifest.json</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"MWA"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Modern Web App"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Modern app built with React SSR, PWA, material-ui, code splitting and much more"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"icons"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"/assets/logos/yellow 192.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"192x192"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"/assets/logos/yellow 512.png"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"512x512"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/png"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"start_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"display"</span></span>: <span class="hljs-string"><span class="hljs-string">"standalone"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"theme_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#810051"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#FFFFFF"</span></span> }</code> </pre> <br><p style=";text-align:right;direction:rtl">    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a>   service-worker',        .    ,  ,   : </p><br><p style=";text-align:right;direction:rtl"> <em>public/service-worker.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   -       var CACHE = 'cache' //     self.addEventListener('install', function(evt) { evt.waitUntil(precache()) }) //   fetch  ,       self.addEventListener('fetch', function(evt) { console.log('The service worker is serving the asset.') evt.respondWith(fromCache(evt.request)) evt.waitUntil(update(evt.request)) }) // ,      function precache() { return caches.open(CACHE).then(function (cache) { return cache.addAll([ './', '/assets/MWA.png', '/assets/global.css', '/assets/logos/favicon.ico', '/assets/logos/yellow 192.png', '/assets/logos/yellow 512.png', '/robots.txt' ]) }) } //   ,      .  ,   function fromCache(request) { return caches.open(CACHE).then(function (cache) { return cache.match(request).then(function (matching) { return matching || null }) }) } //     ,    //     function update(request) { return caches.open(CACHE).then(function (cache) { return fetch(request).then(function (response) { return cache.put(request, response) }) }) }</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">    PWA ,      -  html-: </p><br><p style=";text-align:right;direction:rtl"> <em>server/template.js</em> </p><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">template</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">helmet, content = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">, sheetsRegistry, bundles, initialState = {}</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> scripts = <span class="hljs-string"><span class="hljs-string">`... &lt;script&gt; //    service-worker -  if ('serviceWorker' in navigator) { window.addEventListener('load', () =&gt; { navigator.serviceWorker.register('/service-worker.js') .then(registration =&gt; { console.log('Service Worker is registered! '); }) .catch(err =&gt; { console.log('Registration failed ', err); }); }); } &lt;/script&gt;`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> page = <span class="hljs-string"><span class="hljs-string">`&lt;!DOCTYPE html&gt; &lt;html lang="en"&gt; &lt;head&gt; ... &lt;link rel="manifest" href="/manifest.json"&gt; &lt;/head&gt; &lt;body&gt; ... </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${scripts}</span></span></span><span class="hljs-string"> &lt;/body&gt; `</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page }</code> </pre> <br><p style=";text-align:right;direction:rtl">  Ø§Ù†ØªÙ‡Ù‰     https,     ,     gif     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">demo</a> . </p><br><h3 id="7-konec" style=";text-align:right;direction:rtl"> 7.  </h3><br><p style=";text-align:right;direction:rtl">        MWA.      ,     ,    .      ,     SSR  Code Splitting,      PWA           . </p><br><p style=";text-align:right;direction:rtl"> ,     MWA    - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">web.dev</a> : </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/wh/xx/tr/whxxtrgl_djujcsj8rvhzatf8sg.png"></p><br><p style=";text-align:right;direction:rtl">      ,  â€” .  ,    ,     â€”     . </p><br><p style=";text-align:right;direction:rtl"> , MWA â€” opensource . , , ! </p><br><p style=";text-align:right;direction:rtl">  Ø­Ø¸Ø§ Ø³Ø¹ÙŠØ¯Ø§ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar432368/">https://habr.com/ru/post/ar432368/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar432356/index.html">ÙƒÙŠÙ ØªÙƒØªØ¨ ØªØºØ°ÙŠØ© Ø£Ø®Ø¨Ø§Ø± ÙÙƒÙˆÙ†ØªØ§ÙƒØªÙŠ Ù…Ù…ØªØ§Ø²Ø© ÙÙŠ 20 Ø³Ø§Ø¹Ø©</a></li>
<li><a href="../ar432360/index.html">"Ø£Ø­ÙØ§Ø¯" AlphaGo ØªØ¹Ù„Ù…Øª Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ‚Ù„ Ø£Ù† ØªÙ„Ø¹Ø¨ Ù„Ø¹Ø¨Ø© Ø§Ù„Ø´Ø·Ø±Ù†Ø¬ ÙˆØ§Ù„Ø´ÙˆØºÙŠ ÙˆØªØ°Ù‡Ø¨</a></li>
<li><a href="../ar432362/index.html">Chang'e 4 - ØªØ¨Ø¯Ø£ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¥Ù„Ù‰ Ø£Ù‚ØµÙ‰ Ø³Ø·Ø­ Ø§Ù„Ù‚Ù…Ø± Ø§Ù„ÙŠÙˆÙ…</a></li>
<li><a href="../ar432364/index.html">Ø§Ù„Ø£Ø¨Ø¬Ø¯ÙŠØ© Ø§Ù„ØµÙˆØªÙŠØ©: ÙƒÙŠÙ ÙŠØ³Ø§Ø¹Ø¯ Ø­Ù„ Ø§Ù„Ø·ÙŠØ±Ø§Ù† ÙÙŠ Ù†Ù‚Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¹Ø¨Ø± Ø§Ù„Ù‡Ø§ØªÙ</a></li>
<li><a href="../ar432366/index.html">ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª SSD ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† QSAN XCubeSAN</a></li>
<li><a href="../ar432370/index.html">Ù‡Ø²Ù… AlphaZero Stockfish ÙÙŠ Ù…Ø¨Ø§Ø±Ø§Ø© Ù…Ù† 1000 Ù„Ø¹Ø¨Ø©</a></li>
<li><a href="../ar432372/index.html">Ø£ÙƒØ¯Øª Microsoft Ø±Ø³Ù…ÙŠÙ‹Ø§ Ø£Ù† Edge ÙŠØªØ­ÙˆÙ„ Ø¥Ù„Ù‰ Ù…Ø­Ø±Ùƒ Chromium</a></li>
<li><a href="../ar432374/index.html">ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ø¥Ù„ÙŠÙ‡Ø§ Ø¨Ø´ÙƒÙ„ ÙƒØ¨ÙŠØ± ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ·ÙˆÙŠØ± Elasticsearch ÙÙŠ Kubernetes</a></li>
<li><a href="../ar432378/index.html">ÙŠØ±ÙŠØ¯ Ø·Ø§Ù„Ø¨ ÙÙŠ Ø§Ù„ØµÙ Ø§Ù„Ø¹Ø§Ø´Ø± Ù…Ù† Ø³ÙŠØ¨ÙŠØ±ÙŠØ§ Ø£Ù† ÙŠØµØ¨Ø­ Ù…ØµÙ…Ù…Ù‹Ø§ Ù„Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§Øª. Ù„Ù…Ø§Ø°Ø§ Ù„Ø§ ØªØ¬Ø¹Ù„ Ù…Ø³Ø±Ø¹ Ø§Ù„Ø¹ØµØ¨ÙŠØ© FPGAØŸ</a></li>
<li><a href="../ar432380/index.html">Ø³Øª Ø³Ù†ÙˆØ§Øª Ù…Ù† Ø§Ù„Ø¹Ù…Ø± Ù…Ø¹ iPhone Ù„Ø§ ÙŠØµØ±Ù Ø§Ù†ØªØ¨Ø§Ù‡ÙŠ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>