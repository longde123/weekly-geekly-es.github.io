<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëÖ ‚è™ üèì AERODISK ENGINE N2 Tests de crash de stockage, test de r√©sistance üèè üõ≥Ô∏è ‚úäüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous! Avec cet article, AERODISK ouvre un blog sur Habr√©. Hourra, camarades! 


 Dans des articles pr√©c√©dents sur Habr, des questions sur l'...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>AERODISK ENGINE N2 Tests de crash de stockage, test de r√©sistance</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/aerodisk/blog/447070/"><p><img src="https://habrastorage.org/webt/vw/lz/ss/vwlzssiugbxwzzvjzgil6jm6nhu.jpeg"></p><br><p>  Bonjour √† tous!  Avec cet article, AERODISK ouvre un blog sur Habr√©.  Hourra, camarades! </p><br><p>  Dans des articles pr√©c√©dents sur Habr, des questions sur l'architecture et la configuration de base des syst√®mes de stockage ont √©t√© examin√©es.  Dans cet article, nous examinerons une question qui n'√©tait pas abord√©e auparavant, mais qui a souvent √©t√© pos√©e - concernant la tol√©rance aux pannes des syst√®mes de stockage AERODISK ENGINE.  Notre √©quipe fera tout pour que le syst√®me de stockage AERODISK cesse de fonctionner, c'est-√†-dire  la briser. </p><a name="habracut"></a><br><p>  Il se trouve que des articles sur l'histoire de notre entreprise, sur nos produits, ainsi qu'un exemple de mise en ≈ìuvre r√©ussie s'accrochent d√©j√† √† Habr√©, dont un <u>grand merci √† nos partenaires - les soci√©t√©s TS Solution et Softline.</u> </p><br><p>  Par cons√©quent, je ne formerai pas les comp√©tences de gestion du copier-coller ici, mais je donnerai simplement des liens vers les originaux de ces articles: </p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Article n ¬∞ 1.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>A propos de l'histoire de l'entreprise et de l'architecture du syst√®me de stockage AERODISK ENGINE</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Article n ¬∞ 2.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>√Ä propos de la configuration rapide du stockage AERODISK ENGINE</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Article n ¬∞ 3.</strong></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><strong>Un projet int√©ressant sur la mise en place d'une grande surveillance vid√©o dans le cadre de la Coupe du monde 2018 dans le cadre du projet Safe City</strong></a> </li></ul><br><p>  Je veux √©galement partager la bonne nouvelle.  Mais je vais bien s√ªr commencer par le probl√®me.  Nous, en tant que jeune fournisseur, entre autres co√ªts, sommes constamment confront√©s au fait que de nombreux ing√©nieurs et administrateurs ne savent pas comment faire fonctionner correctement nos syst√®mes de stockage. <br>  Il est clair que la gestion de la plupart des syst√®mes de stockage est √† peu pr√®s la m√™me du point de vue de l'administrateur, mais chaque fabricant a ses propres caract√©ristiques.  Et nous ne faisons pas exception. </p><br><p>  Par cons√©quent, afin de simplifier la t√¢che de formation des professionnels de l'informatique, nous avons d√©cid√© de consacrer cette ann√©e √† l'enseignement gratuit.  Pour ce faire, dans de nombreuses grandes villes de Russie, nous ouvrons un r√©seau de Centres de Comp√©tence AERODISK dans lequel tout sp√©cialiste technique int√©ress√© pourra suivre un cours tout √† fait gratuitement et recevoir un certificat d'administration de stockage AERODISK ENGINE. </p><br><p>  Dans chaque centre de comp√©tence, nous installerons un stand de d√©monstration √† part enti√®re du syst√®me de stockage AERODISK et un serveur physique sur lequel notre professeur dispensera une formation √† temps plein.  Le calendrier de travail des centres de comp√©tence sera publi√© d√®s leur apparition, mais nous avons maintenant ouvert un centre √† Nijni Novgorod et la ville de Krasnodar est la prochaine en ligne.  Vous pouvez vous inscrire √† la formation en utilisant les liens ci-dessous.  J'apporte les informations actuellement connues sur les villes et les dates: </p><br><ul><li>  <strong>Nizhny Novgorod</strong> (D√âJ√Ä TRAVAILL√â - vous pouvez vous inscrire ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://aerodisk.promo/nn/</a> ); <br>  Jusqu'au 16 avril 2019, vous pouvez visiter le centre √† toute heure de travail, et le 16 avril 2019 une grande formation sera organis√©e. </li><li>  <strong>Krasnodar</strong> (COMING SOON - inscrivez-vous ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://aerodisk.promo/krsnd/</a> ); <br>  Du 9 avril au 25 avril 2019, vous pouvez visiter le centre √† tout moment et, le 25 avril 2019, une grande formation sera organis√©e. </li><li>  <strong>Iekaterinbourg</strong> (√Ä VENIR, suivez les informations sur notre site Internet ou sur Habr√©); <br>  Mai-juin 2019. </li><li>  <strong>Novossibirsk</strong> (suivez les informations sur notre site Internet ou sur Habr√©); <br>  Octobre 2019 </li><li>  <strong>Krasnoyarsk</strong> (suivez les informations sur notre site Internet ou sur Habr√©); <br>  Novembre 2019 </li></ul><br><p>  Et, bien s√ªr, si Moscou n'est pas loin de vous, vous pouvez √† tout moment visiter notre bureau √† Moscou et suivre une formation similaire. </p><br><p>  C‚Äôest tout.  Li√© au marketing, passez √† la technique! </p><br><p>  Sur Habr√©, nous publierons r√©guli√®rement des articles techniques sur nos produits, des tests de r√©sistance, des comparaisons, des fonctionnalit√©s d'utilisation et des impl√©mentations int√©ressantes. </p><br><h2>  AERODISK ENGINE N2 Tests de crash de stockage, test de r√©sistance </h2><br><p>  <b>ACHTUNG!</b>  <em>Apr√®s avoir lu l'article, vous pouvez dire: eh bien, bien s√ªr, le vendeur va v√©rifier lui-m√™me pour que tout se passe "avec fracas", les conditions de serre, etc.</em>  <em>Je r√©pondrai: rien de tel!</em>  <em>Contrairement √† nos concurrents √©trangers, nous sommes ici, pr√®s de vous, et vous pouvez toujours venir chez nous (√† Moscou ou tout autre comit√© central) et tester notre syst√®me de stockage de quelque mani√®re que ce soit.</em>  <em>Ainsi, il n'est pas tr√®s logique d'ajuster les r√©sultats √† l'image id√©ale du monde, car</em>  <em>nous sommes tr√®s faciles √† v√©rifier.</em>  <em>Pour ceux <s>qui sont trop paresseux pour marcher</s> et qui n'ont pas le temps, nous pouvons organiser des tests √† distance.</em>  <em>Nous avons un laboratoire sp√©cial pour cela.</em>  <em>Contact.</em> </p><br><p>  <strong>ACHTUNG-2!</strong>  <em>Ce test n'est pas un test de charge car</em>  <em>ici, nous ne nous pr√©occupons que de la tol√©rance aux pannes.</em>  <em>Dans quelques semaines, nous pr√©parerons un stand plus puissant et effectuerons des tests de charge des syst√®mes de stockage, en publiant les r√©sultats ici (au fait, les souhaits de tests sont accept√©s).</em> </p><br><p>  Alors, allons faire une pause. </p><br><h3>  Banc d'essai </h3><br><p>  Notre stand se compose du fer suivant: </p><br><ul><li>  1 x stockage Aerodisk Engine N2 (2 contr√¥leurs, 64 Go de cache, 8 ports CF 8 Gbit / s, 4 ports Ethernet 10 Gbit / s SFP +, 4 ports Ethernet 1 Gbit / s);  Les disques suivants sont install√©s dans le syst√®me de stockage: </li><li>  4 disques SAS SSD 900 Go; </li><li>  12 disques SAS 10k de 1,2 To; </li><li>  1 x serveur physique avec Windows Server 2016 (2xXeon E5 2667 v3, 96 Go de RAM, 2x ports CF 8 Gbit / s, 2x ports Ethernet 10 Gbit / s SFP +); </li><li>  2 x commutateur SAN 8G; </li><li>  2 x commutateur LAN 10G; </li></ul><br><p>  Nous avons connect√© le serveur au stockage via des commutateurs via FC et Ethernet 10G.  Sch√©ma du stand ci-dessous. </p><br><img src="https://habrastorage.org/webt/vd/b7/lb/vdb7lbehpksnfqj0ssv46rwfcta.png" alt="image"><br><p>  Les composants n√©cessaires, tels que MPIO et initiateur iSCSI, sont install√©s sur Windows Server. <br>  Les zones sont configur√©es sur les commutateurs FC, les VLAN correspondants sont configur√©s sur les commutateurs LAN et MTU 9000 est install√© sur les ports de stockage, les commutateurs et l'h√¥te (comment faire tout cela est d√©crit dans notre documentation, nous ne d√©crirons donc pas ce processus ici). </p><br><h3>  M√©thodologie de test </h3><br><p>  Le plan de crash test est le suivant: </p><br><ul><li>  V√©rification des d√©faillances des ports FC et Ethernet. </li><li>  V√©rification de panne de courant. </li><li>  V√©rification de l'√©chec du contr√¥leur. </li><li>  V√©rifiez l'√©chec du disque dans un groupe / pool. </li></ul><br><p>  Tous les tests seront effectu√©s dans des conditions de charge synth√©tique, que nous g√©n√©rerons avec IOMETER.  En parall√®le, nous effectuerons les m√™mes tests, mais dans des conditions de copie de gros fichiers sur le syst√®me de stockage. </p><br><p>  La configuration IOmeter est la suivante: </p><br><ul><li>  Lecture / √©criture - 70/30 </li><li>  Block - 128k (nous avons d√©cid√© de mouiller le syst√®me de stockage avec de gros blocs) </li><li>  Le nombre de threads est de 128 (ce qui est tr√®s similaire √† la charge de travail) </li><li>  Plein al√©atoire </li><li>  Nombre de travailleurs - 4 (2 pour FC, 2 pour iSCSI) </li></ul><br><img src="https://habrastorage.org/webt/th/p7/94/thp7947ybxy0k63hkq4_b-o7bnc.png"><br><img src="https://habrastorage.org/webt/jz/pm/wl/jzpmwldtif_cvydlavihoj2muby.png"><br><br>  <b>Le test a les t√¢ches suivantes:</b> <br><ol><li>  Assurez-vous que la charge synth√©tique et le processus de copie ne seront pas interrompus et ne provoqueront pas d'erreurs avec diff√©rents modes de d√©faillance. </li><li>  Assurez-vous que le processus de commutation des ports, des contr√¥leurs, etc., est suffisamment automatis√© et ne n√©cessite pas d'actions d'administrateur en cas de d√©faillance (c'est-√†-dire qu'avec le basculement, bien s√ªr, il n'est pas question de r√©tablissement). </li><li>  Assurez-vous que les informations s'affichent correctement dans les journaux. </li></ol><br><h3>  Pr√©paration de l'h√¥te et du stockage </h3><br><p>  Nous avons configur√© l'acc√®s par blocs sur le stockage √† l'aide des ports FC et Ethernet (FC et iSCSI, respectivement).  Comment faire cela, les gars de TS Solution ont d√©crit en d√©tail dans un article pr√©c√©dent ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://habr.com/en/company/tssolution/blog/432876/</a> ).  Et bien s√ªr, personne n'a annul√© les manuels et les cours. </p><br><p>  Nous avons mis en place un groupe hybride en utilisant tous les disques que nous avons.  2 disques SSD sont ajout√©s au cache, 2 disques SSD sont ajout√©s comme niveau de stockage suppl√©mentaire (niveau en ligne).  Nous avons regroup√© 12 disques SAS10k en RAID-60P (triple parit√©) afin de v√©rifier la d√©faillance de trois disques dans un groupe √† la fois.  Un disque a √©t√© laiss√© pour la correction automatique. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/zq/9i/yp/zq9iyp63dnbgws4d6tljrqdauao.png"></a> </p><br><p>  Nous avons connect√© deux LUN (un sur FC, un sur iSCSI). </p><br><img src="https://habrastorage.org/webt/au/ep/3o/auep3oxzc5aye2vvimnopowk0mk.png"><br><p>  Les deux LUN appartiennent au contr√¥leur Engine-0. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/zb/bc/up/zbbcupqx0qx2khjxkftflnpxb14.png"></a> </p><br><h3>  Lancer le test </h3><br><p>  Allumez IOMETER avec la configuration ci-dessus. </p><br><img src="https://habrastorage.org/webt/sv/tq/zm/svtqzmxa23agepb4llmphniye2y.png"><br><p>  Nous fixons la bande passante de 1,8 Go / s et un retard de 3 millisecondes.  Il n'y a aucune erreur (Total Error Count). </p><br><p>  Dans le m√™me temps, √† partir du lecteur local "C" de notre h√¥te, nous commen√ßons simultan√©ment √† copier deux gros fichiers de 100 Go vers les LUN FC et iSCSI du syst√®me de stockage (disques E et G sous Windows) en utilisant d'autres interfaces. </p><br><p>  Ci-dessus est le processus de copie vers LUN FC, ci-dessous est iSCSI. </p><br><img src="https://habrastorage.org/webt/uy/en/hs/uyenhsu8kfolew7ys9zdxytixds.png"><br><br><h3>  Test n ¬∞ 1. D√©sactivation des ports d'E / S </h3><br><p>  Nous approchons de l'arri√®re du syst√®me de stockage))) et d'un coup de poignet, nous retirons tous les c√¢bles FC et Ethernet 10G du contr√¥leur Engine-0.  Comme si une femme de m√©nage avec une vadrouille passait et d√©cidait de laver le sol l√† o√π <del>  morve couch√©e </del>  les c√¢bles √©taient allong√©s (c'est-√†-dire que le contr√¥leur fonctionne toujours, mais les ports d'E / S sont morts). </p><br><img src="https://habrastorage.org/webt/sw/ok/56/swok56qvdezrj1c13dmwibj2miu.jpeg"><br><p>  Nous regardons IOMETER et la copie de fichiers.  La bande passante a chut√© √† 0,5 Go / s, mais est rapidement revenue √† son niveau pr√©c√©dent (en environ 4-5 secondes).  Il n'y a aucune erreur. </p><br><img src="https://habrastorage.org/webt/es/7f/ng/es7fngm-y2jgf2alxdzbmqcmg8y.png"><br><p>  La copie des fichiers ne s'est pas arr√™t√©e, il y a un ralentissement de la vitesse, mais cela n'est absolument pas critique (de 840 Mo / s il est tomb√© √† 720 Mo / s).  La copie ne s'est pas arr√™t√©e. </p><br><p>  Nous regardons dans les journaux du syst√®me de stockage et nous voyons un message sur l'indisponibilit√© des ports et le d√©placement automatique du groupe. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/i0/z7/pv/i0z7pvkfpnjjzs3itnkertzq58c.png"></a> </p><br><p>  De plus, le tableau de bord nous dit que tout n'est pas tr√®s bon avec les ports FC. </p><br><img src="https://habrastorage.org/webt/rs/h_/ev/rsh_evhm1pt0nzbwtoyselmpcv4.png"><br><p>  Les ports d'E / S de stockage ont √©chou√© <strong>.</strong> </p><br><h3 id="test--2-otklyuchenie-kontrollera-shd">  Num√©ro de test 2. D√©sactivation du contr√¥leur de stockage </h3><br><p>  Presque imm√©diatement (apr√®s avoir rebranch√© les c√¢bles dans le syst√®me de stockage), nous avons d√©cid√© de terminer le stockage en retirant le contr√¥leur du ch√¢ssis. </p><br><p>  Encore une fois, nous approchons le syst√®me de stockage par derri√®re (nous l'avons aim√©))) et cette fois, nous retirons le contr√¥leur Engine-1, qui est actuellement le propri√©taire de RDG (vers lequel le groupe a d√©m√©nag√©). </p><br><p>  La situation dans IOmeter est la suivante.  La sortie d'entr√©e s'est arr√™t√©e pendant environ 5 secondes.  Les erreurs ne s'accumulent pas. </p><br><img src="https://habrastorage.org/webt/bz/ve/gr/bzvegryvez7_ba9vegtf3f9fdbc.png"><br><p>  Apr√®s 5 secondes, les E / S ont repris, avec √† peu pr√®s les m√™mes d√©bits, mais avec des retards de 35 millisecondes (les retards ont √©t√© corrig√©s au bout de quelques minutes environ).  Comme le montrent les captures d'√©cran, la valeur du nombre total d'erreurs est 0, c'est-√†-dire qu'il n'y a eu aucune erreur d'√©criture ou de lecture. </p><br><img src="https://habrastorage.org/webt/kr/-_/ym/kr-_ymrz1ri4ihrlvzq-ggdzuqw.png"><br><p>  Nous envisageons de copier nos fichiers.  Comme vous pouvez le voir, cela n'a pas interrompu, il y a eu un petit ralentissement des performances, mais en g√©n√©ral, tout est revenu √† la m√™me ~ 800 Mo / s. </p><br><img src="https://habrastorage.org/webt/aw/3v/-2/aw3v-2qgghdkeurdw69fb1gzpas.png"><br><p>  Nous allons au syst√®me de stockage et voyons des abus dans le panneau d'informations que le contr√¥leur Engine-1 n'est pas disponible (bien s√ªr, nous l'avons frapp√©). </p><br><img src="https://habrastorage.org/webt/8a/-a/th/8a-athpryrmgg972g0us7zpcrbc.png"><br><p>  Nous voyons √©galement une entr√©e similaire dans les journaux. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/20/3c/j_/203cj_pltjuab6nqituqfooel8s.png"></a> </p><br><p>  L'√©chec du contr√¥leur de stockage a √©galement surv√©cu <strong>avec succ√®s.</strong> </p><br><h3 id="test--3-otklyuchenie-bloka-pitaniya">  Num√©ro de test 3. D√©connexion de l'alimentation. </h3><br><p>  Juste au cas o√π, nous avons recommenc√© √† copier les fichiers, mais IOMETER ne s'est pas arr√™t√©. <br>  Nous tirons le BP-Schnick. </p><br><img src="https://habrastorage.org/webt/vm/ze/_o/vmze_okexjlv5n-voldjt0mik-s.jpeg"><br><p>  Une autre alerte a √©t√© ajout√©e au stockage dans le panneau d'informations. </p><br><img src="https://habrastorage.org/webt/8o/ym/lr/8oymlratdbsngvztm2z52cv3v4g.png"><br><p>  Nous voyons √©galement dans le menu des capteurs que les capteurs associ√©s √† l'alimentation retir√©e deviennent rouges. </p><br><img src="https://habrastorage.org/webt/m_/rr/zw/m_rrzwbyfqjd3-eeo9mgawbm8kq.png"><br><p>  SHD continue de fonctionner.  La d√©faillance du BP-Schnick n'affecte en rien le fonctionnement du syst√®me de stockage, du point de vue de l'h√¥te, la vitesse de copie et les indicateurs IOMETER sont rest√©s inchang√©s. </p><br><p>  Le test de panne de courant s'est termin√© <strong>avec succ√®s.</strong> </p><br><p>  Avant le test final, nous avons d√©cid√© de ramener un peu le SHD √† la vie, de remettre le contr√¥leur et le BP-shnik sous tension, et √©galement de mettre les choses en ordre avec les c√¢bles, que le SHD nous a joyeusement inform√©s avec des ic√¥nes vertes dans son panneau de sant√©. </p><br><img src="https://habrastorage.org/webt/zp/gm/fp/zpgmfpl2_rwhn6iowq5sriglb2a.png"><br><br><h3 id="test--4-otkaz-tryoh-diskov-v-gruppe">  Test num√©ro 4. √âchec de trois disques dans le groupe </h3><br><p>  Avant ce test, nous avons effectu√© une √©tape pr√©paratoire suppl√©mentaire.  Le fait est que le stockage ENGINE fournit une chose tr√®s utile - diff√©rentes politiques de reconstruction (reconstruction).  Auparavant, TS Solution a √©crit sur cette fonctionnalit√©, mais rappelle son essence.  L'administrateur de stockage peut sp√©cifier la priorit√© d'allocation des ressources lors de la reconstruction.  Ou dans le sens des performances d'E / S, c'est-√†-dire une reconstruction plus longue, mais il n'y a pas de baisse des performances.  Ou dans le sens de la vitesse de reconstruction, mais les performances seront r√©duites.  Ou une option √©quilibr√©e.  √âtant donn√© que les performances de stockage lors d'une reconstruction d'un groupe de disques sont toujours un casse-t√™te pour l'administrateur, nous testerons la strat√©gie avec un biais dans le sens des performances d'E / S et au d√©triment de la vitesse de la reconstruction. </p><br><img src="https://habrastorage.org/webt/8k/zn/kw/8kznkwmg0cwy_2bde0jafjknsbw.png"><br><p>  <strong>V√©rifiez maintenant la panne des disques.</strong>  Nous permettons √©galement l'enregistrement sur des LUN (fichiers et IOMETER).  √âtant donn√© que nous avons un groupe √† triple parit√© (RAID-60P), cela signifie que le syst√®me doit r√©sister √† la d√©faillance de trois disques, et apr√®s la d√©faillance, il doit fonctionner en remplacement automatique, un disque doit se tenir dans le RDG √† la place de l'un des √©checs, et la reconstruction doit commencer sur celui-ci. </p><br><p>  Nous commen√ßons.  Tout d'abord, via l'interface de stockage, mettez en surbrillance les disques que nous voulons retirer (afin de ne pas manquer et de ne pas tirer le disque √† remplacement automatique). </p><br><p> <a href=""><img src="https://habrastorage.org/webt/65/uw/jm/65uwjm8dhk9hw2znrqwwendgrse.png"></a> </p><br><p>  V√©rifiez l'indication sur le fer.  Tout va bien, nous voyons les trois disques en surbrillance. </p><br><img src="https://habrastorage.org/webt/da/-h/tc/da-htc08d-p2gjbx6ewbq_itfay.jpeg"><br><p>  Et sortez ces trois disques. </p><br><img src="https://habrastorage.org/webt/om/l0/vn/oml0vntroubzlzesyecekjzdxy4.jpeg"><br><p>  Nous regardons l'h√¥te.  Et l√† ... rien de sp√©cial n'est arriv√©. </p><br><img src="https://habrastorage.org/webt/6n/yt/dt/6nytdttcprx0vdzzy4pac6aq87g.png"><br><img src="https://habrastorage.org/webt/9n/_8/nv/9n_8nvme4niskzv2ej2snvvjs0o.png"><br><p>  Les indicateurs de copie (ils sont plus √©lev√©s qu'au d√©but, car le cache s'est r√©chauff√©) et l'IOM√àTRE ne changent pas beaucoup lors de l'extraction des disques et du d√©marrage de la reconstruction (dans un d√©lai de 5 √† 10%). </p><br><p>  Nous regardons le stockage. </p><br><img src="https://habrastorage.org/webt/my/px/e3/mypxe3hllsk-w3kp_pimqivdbnu.png"><br><p>  Dans le statut du groupe, nous voyons que le processus de reconstruction a commenc√© et qu'il est presque termin√©. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/jr/on/o5/jrono5wwt7mxpxmznkrmhqugzim.png"></a> </p><br><p>  Le squelette RDG montre que 2 disques sont en statut rouge et qu'un a d√©j√† √©t√© remplac√©.  Le disque de correction automatique n'est plus l√†, il a remplac√© le 3√®me disque d√©fectueux.  Rebild a √©t√© ex√©cut√© pendant plusieurs minutes, l'enregistrement de fichiers n'a pas √©t√© interrompu lorsque 3 disques ont √©chou√©, les performances d'E / S n'ont pas beaucoup chang√©. </p><br><p> <a href=""><img src="https://habrastorage.org/webt/_u/gj/-i/_ugj-izftgd1ka7nuyd4bph8miw.png"></a> </p><br><img src="https://habrastorage.org/webt/xw/2i/af/xw2iafiq60i63kvrd6aecyxzg0i.png"><br><p>  Le test de panne du lecteur a d√©finitivement <strong>r√©ussi.</strong> </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p>  Sur ce point, nous avons d√©cid√© de mettre fin √† l'abus des syst√®mes de stockage.  Pour r√©sumer: </p><br><ul><li>  V√©rification d'√©chec du port FC - R√©ussi </li><li>  V√©rification d'√©chec du port Ethernet - r√©ussie </li><li>  V√©rification des √©checs du contr√¥leur - r√©ussie </li><li>  V√©rification de panne de courant - r√©ussie </li><li>  V√©rifier l'√©chec du disque dans le groupe \ pool - avec succ√®s </li></ul><br><p>  Aucun des √©checs n'a arr√™t√© l'enregistrement et n'a pas caus√© d'erreurs de charge synth√©tiques, le ralentissement des performances, bien s√ªr, a √©t√© (et nous savons comment le vaincre, ce que nous ferons bient√¥t), mais, √©tant donn√© qu'il s'agit de quelques secondes, il est tout √† fait acceptable.  Conclusion: la tol√©rance aux pannes de tous les composants de stockage AERODISK fonctionnait au niveau, il n'y a pas de points de d√©faillance. </p><br><p>  √âvidemment, dans le cadre d'un article, nous ne pouvons pas tester tous les sc√©narios de d√©faillance, mais nous avons essay√© de couvrir les plus populaires.  Par cons√©quent, veuillez envoyer vos commentaires, souhaits pour les publications suivantes et, bien s√ªr, les critiques ad√©quates.  Nous serons heureux de discuter (et de mieux venir √† la formation, juste au cas o√π, dupliquer le calendrier)!  Jusqu'√† de nouveaux tests! </p><br><ul><li>  <strong>Nizhny Novgorod</strong> (D√âJ√Ä TRAVAILL√â - vous pouvez vous inscrire ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://aerodisk.promo/nn/</a> ); <br>  Jusqu'au 16 avril 2019, vous pouvez visiter le centre √† toute heure de travail, et le 16 avril 2019 une grande formation sera organis√©e. </li><li>  <strong>Krasnodar</strong> (COMING SOON - inscrivez-vous ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://aerodisk.promo/krsnd/</a> ); <br>  Du 9 avril au 25 avril 2019, vous pouvez visiter le centre √† tout moment et, le 25 avril 2019, une grande formation sera organis√©e. </li><li>  <strong>Ekaterinbourg</strong> (OUVERTURE BIEN, suivez les informations sur notre site ou sur Habr√©); <br>  Mai-juin 2019. </li><li>  <strong>Novossibirsk</strong> (suivez les informations sur notre site Internet ou sur Habr√©); <br>  Octobre 2019 </li><li>  <strong>Krasnoyarsk</strong> (suivez les informations sur notre site Internet ou sur Habr√©); <br>  Novembre 2019 </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr447070/">https://habr.com/ru/post/fr447070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr447056/index.html">Comment les hommes fous sont calcul√©s - 2: l'√©clat et la pauvret√© du diagnostic pathopsychologique</a></li>
<li><a href="../fr447058/index.html">Nouvel √©quilibreur de charge CPU MIT</a></li>
<li><a href="../fr447062/index.html">Histoire de la technologie audio: synth√©tiseurs et √©chantillonneurs</a></li>
<li><a href="../fr447064/index.html">D√©couvrez le manuel de conformit√© des licences Open Source</a></li>
<li><a href="../fr447068/index.html">Comparer des cha√Ænes similaires</a></li>
<li><a href="../fr447072/index.html">¬´J'ai tout fait - c'√©tait une histoire dr√¥le¬ª: un podcast sur le marketing de contenu et une carri√®re dans les m√©dias informatiques</a></li>
<li><a href="../fr447074/index.html">Nous √©crivons le premier microservice sur Node.js avec communication via RabbitMQ</a></li>
<li><a href="../fr447076/index.html">Meetup OWASP Russie - Enregistrement des performances</a></li>
<li><a href="../fr447078/index.html">Flightradar24 - comment √ßa marche? Partie 2, protocole ADS-B</a></li>
<li><a href="../fr447080/index.html">Des r√©seaux pour les plus petits. Oh partie c'est tout</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>