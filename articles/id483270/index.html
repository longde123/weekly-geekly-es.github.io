<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ½ ğŸ•¯ï¸ ğŸ³ Evolusi aplikasi HighLoad pada contoh portal regional layanan publik ğŸ›°ï¸ ğŸ‘©ğŸ½â€âœˆï¸ ğŸ‘©ğŸ¼â€ğŸ¤â€ğŸ‘¨ğŸ»</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="â€œBesok adalah tanggal 20, yang berarti akan ada badai lagi. Tidak mungkin untuk menghentikannya, hanya bersiap dan berharap bahwa kali ini akan meleda...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Evolusi aplikasi HighLoad pada contoh portal regional layanan publik</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/barsgroup/blog/483270/"><img src="https://habrastorage.org/webt/pw/35/s8/pw35s8b3dvmle-d83_fvjpjtyqm.jpeg" alt="gambar"><br><br>  <i>â€œBesok adalah tanggal 20, yang berarti akan ada badai lagi.</i>  <i>Tidak mungkin untuk menghentikannya, hanya bersiap dan berharap bahwa kali ini akan meledak, keajaiban akan terjadi, dan feri danau kita akan menaklukkan lautan</i> . <i>"</i>  Pemikiran seperti itu mengalahkan tim yang terlibat dalam mendukung portal layanan kota beberapa tahun yang lalu.  Bagaimana kita masuk ke dalam situasi ini dan bagaimana kita menemukan jalan keluar akan dijelaskan di bawah ini. <br><a name="habracut"></a><br><h4>  Bagaimana semuanya dimulai </h4><br>  Pada tahun 1990-an yang jauh, sektor perumahan dan utilitas mengalami booming dalam pengembangan, teknologi baru diperkenalkan, sistem informasi otomatis, dan peralatan baru dibeli.  Tetapi sesuatu tetap untuk waktu yang lama praktis tidak berubah, yaitu pembayaran untuk apartemen.  Ya, kwitansi yang sama untuk apartemen itu, setelah diubah menjadi dokumen pembayaran, setelah mendapatkan barcode, dekripsi terperinci, tetap sebagai potongan kertas.  Skema khas pekerjaan pusat penyelesaian perumahan dan perusahaan jasa komunal atau perusahaan penyedia sumber daya adalah sebagai berikut: <br><br><img src="https://habrastorage.org/webt/io/5n/lt/io5nltxbpzxgm4bnegn5vcqagtg.png" alt="gambar"><br><br>  Secara bertahap, Internet modem digantikan oleh akses broadband, timbul pemikiran - mengapa tidak menerima dokumen pembayaran online dalam bentuk elektronik?  Pada saat yang sama, sektor layanan perumahan dan komunal berguncang dalam bentuk organisasi, MPP perumahan dan layanan komunal (perusahaan produksi kota layanan perumahan dan komunal) digantikan oleh perusahaan unit kota (perusahaan unit kota), DEZs (direktorat dari satu pelanggan).  Sebagai hasil dari semua transformasi, departemen TI dari perusahaan perumahan dan layanan komunal teralienasi, dan berbagai pusat pemukiman lahir berdasarkan basis mereka.  Inti dari pusat permukiman adalah, pada kenyataannya, perhitungan sewa dan dukungan informasi dari populasi. <br><br><h4>  Tahap Pertumbuhan, 00-an </h4><br>  Saat itulah portal informasi pertama lahir yang menyediakan populasi dengan layanan elektronik.  Jumlah pengguna pertama diukur dalam lusinan, tidak semua orang memercayai dokumen pembayaran elektronik, yang lain belum pernah mendengar inovasi, aplikasi mobile di bidang layanan publik jarang.  Pekerjaan portal informasi tidak jauh berbeda dari pekerjaan sistem informasi yang sudah dikenal dan, tentu saja, tidak pernah menjadi arsitektur yang tinggi. <br><br><img src="https://habrastorage.org/webt/w9/fd/be/w9fdbe1gdey2ksdrxulkuoo4ely.jpeg" alt="gambar"><br><br>  Tahun-tahun berlalu, portal membaik, ada peluang untuk mengambil pembacaan perangkat pengukuran, menghasilkan sertifikat, dll.  Pada saat itulah "awan" pertama muncul di cakrawala, semakin banyak pengguna mulai mendaftar di portal dan meminta data.  Di kejauhan, gelombang pertama dari beban yang mendekat muncul. <br><br>  <b>Tim (selanjutnya disebut Tim 1)</b> mengambil langkah-langkah optimasi berikut: <br><br><ul><li>  Mengubah ukuran dokumen pembayaran dalam PDF dari 0,5MB menjadi 0,2MB </li><li>  Membuat antrian untuk pembentukan dokumen pembayaran </li><li>  Penyimpanan dokumen pembayaran yang dihasilkan untuk permintaan berulang </li><li>  Membuat replika database utama, hanya untuk kebutuhan portal </li></ul><br>  Selama beberapa tahun, situasinya tampak stabil, jumlah pengguna portal individu diukur dalam ribuan, belum menyerbu, tetapi mengguncang secara signifikan, desentralisasi pusat kliring memainkan ke tangan pengembang. <br><br><img src="https://habrastorage.org/webt/op/ef/cv/opefcv4fzv1gytn3vfm_lq70zwk.jpeg" alt="gambar"><br><br><h4>  Tahap Lompat Besar </h4><br>  Tonggak baru dalam sejarah adalah pengembangan portal layanan kota di tingkat regional.  Dimasukkannya satu titik masuk tunggal untuk setiap penduduk republik adalah ide yang menggoda, di samping itu, ini akan meningkatkan peringkat situs negara ke tingkat situs komersial atau perbankan terbaik, di mana setiap penduduk wilayah akan menerima berbagai jenis layanan.  Salah satu yang paling populer adalah pembayaran perumahan dan layanan komunal dan dimasukkannya pembacaan meter. <br><br>  Dengan demikian, langkah selanjutnya adalah pemisahan informasi operasional pusat penyelesaian dari informasi yang ditampilkan dalam dokumen pembayaran.  Untuk ini, format transfer data sederhana dan database untuk menyimpan informasi dikembangkan, dan perhitungan ruang yang diperlukan untuk penyimpanan selama 5 tahun operasi dilakukan. <br><br>  Keputusan penting yang dibuat pada tahap ini: <br><br><ul><li>  Bagian informasi departemen dari basis data operasional; </li><li>  Pengembangan database untuk menyimpan format ini; </li><li>  Menggabungkan data pusat-pusat pemukiman di daerah-daerah ke dalam satu basis data tunggal; </li><li>  Integrasi dengan proses portal, pengembangan layanan. </li></ul><br>  Pada tahap ini, solusinya berubah dari full-fledged menjadi backend, karena portal menyediakan pengguna dengan satu antarmuka.  Portal memiliki timnya sendiri, yang mengembangkannya terlepas dari solusi saat ini dari pusat pemukiman.  Dalam sejarah kami, <b>tim kedua</b> muncul <b>(selanjutnya disebut Tim 2)</b> dan vendor baru.  Seperti yang akan kita lihat nanti, ini telah secara signifikan mempengaruhi pengembangan dan penyelesaian masalah.  Inti dari solusi desain adalah sebagai berikut: <br><br><img src="https://habrastorage.org/webt/lc/a5/rs/lca5rsydzjr_mk7bcrp9jjt38pg.jpeg" alt="gambar"><br><br>  Ketika merancang basis data, pemetaan sederhana format ke basis data diterima, PostgreSQL 9.3 dipilih sebagai DBMS (pada waktu itu versi yang sangat terkini).  Format ini terdiri dari 9 file datar, yang masing-masing dimuat dengan perintah COPY (kita baca - sangat cepat) ke dalam banyak tabel pusat penyelesaian tertentu (setiap pusat penyelesaian memiliki nomor registrasi sendiri) dari database portal.  Di beberapa pusat penyelesaian, jumlah catatan yang diperlukan untuk pembentukan dokumen pembayaran mencapai 1.000.000. Dalam setahun ini berjumlah 12.000.000, lebih dari 5 tahun -60.000.000. Jumlah permintaan ke basis data ini meningkat menjadi jumlah semua pengguna portal distrik dan dapat membuat puluhan ribu.  Ada sesuatu untuk dipikirkan. <br><br>  Karena tidak memiliki pengalaman seperti itu, <b>Tim 1</b> mengambil langkah-langkah berikut untuk mengurangi potensi muatan: <br><br><ul><li>  Tabel dibagi oleh pusat pemukiman dan bulan partisi; </li><li>  Proses pemuatan data diberi jarak waktu untuk berbagai pusat penagihan. </li></ul><br><h4>  Masalah pertumbuhan </h4><br>  Portal diluncurkan, dan rencana yang disiapkan dihadapkan dengan kenyataan: <br><br><ul><li>  Jumlah pengguna melebihi perkiraan dengan sangat cepat. </li><li>  Kueri pergi ke tabel master, tetapi DBMS masih mensurvei semua tabel </li><li>  Pemuatan palsu di server database.  Di server ini ada yang lain, basis data yang sangat besar, informasi yang datang secara acak, memuatnya mengambil semua sumber daya yang tersedia </li><li>  Layanan pembentukan dokumen pembayaran melambat karena implementasi yang tidak efisien </li><li>  Beban dari pengguna tidak didistribusikan secara merata sepanjang bulan, tetapi terkonsentrasi dalam dua periode: <br><br><img src="https://habrastorage.org/webt/5c/ka/fz/5ckafzdlpqf2m_wnf_uweesaoow.jpeg" alt="gambar"></li></ul><br>  Momen ini dideskripsikan di awal tulisan.  Sulit untuk mendiagnosis masalahnya, karena masalah itu tampak di semua tempat sekaligus.  Tim 1 dan Tim 2, yang sama-sama dicintai oleh kepemimpinan mereka, mengambil langkah untuk keluar dari situasi ini, tetapi praktis tidak ada komunikasi di antara mereka sendiri: <br><br><img src="https://habrastorage.org/webt/1g/r6/jq/1gr6jqqezi8np7zzmmt6gdg-dvu.jpeg" alt="gambar"><br><br>  <b>Tim 2</b> , tampaknya, mengambil langkah logis dan berguna: pembentukan dokumen pembayaran mulai diminta segera setelah pengguna memasuki sistem, dengan harapan bahwa ketika ia mencapai halaman di halaman, AP sudah terbentuk, dan dokumen yang sudah selesai dapat ditarik dengan cepat. <br><br>  Pada saat ini, <b>Tim 1 secara</b> heroik menyelesaikan satu masalah per bulan setiap bulan, setiap kali meyakinkan pelanggan bahwa di sanalah akar masalah bersembunyi: <br><br><ul><li>  SQL yang Dioptimalkan (menerima peningkatan kinerja sewaktu-waktu); </li><li>  Memisahkan server basis data untuk portal dari sisa basis data; </li><li>  Kami melakukan pembentukan dokumen pembayaran dalam aplikasi terpisah dan juga mengoptimalkannya; </li><li>  Kami merevisi banding ke tabel utama, mengubah versi PostgreSQL; </li><li>  Sekali lagi, kami merevisi banding (sekarang hanya 1 partisi tertentu yang diminta dari tabel utama - bahkan akselerasi kadang-kadang). </li></ul><br>  Upaya heroik dari tim-tim tersebut membawa keberhasilan lokal (selama 2-3 bulan tampaknya masalahnya telah terpecahkan).  Namun kenyataan selalu memunculkan catatan pengantar baru: <br><br><ul><li>  Basis data telah berisi beberapa tahun dan telah berkembang lebih dari 1 TB; </li><li>  Jumlah pengguna sudah ratusan ribu. </li></ul><br>  Sementara perjuangan sedang berlangsung, <b>Tim 2</b> menyiapkan tes layanan otomatis, sehingga masalah kinerja diketahui dalam hitungan menit dan masalah tersebut meningkat ke tingkat kontrol tertinggi secara otomatis melalui email. <br><br>  Saat ini di <b>Tim 1</b> : <br><br><ul><li>  Waktu pengarsipan basis data mulai melampaui batas yang diizinkan (layanan menjadi tidak tersedia); </li><li>  Satu panggilan ke layanan segera mempengaruhi berbulan-bulan, masing-masing, menghasilkan banyak permintaan; </li><li>  DBMS menjadi lebih buruk dalam memenuhi permintaan karena peningkatan jumlah tabel (partisi); </li><li>  Pengguna yang hanya ingin melakukan pembacaan instrumen masih meminta pembentukan dokumen pembayaran (ingat keputusan Tim 2). </li></ul><br>  Menjadi jelas bahwa, dari sudut pandang teknis, solusi telah mencapai batasnya dan sudah waktunya untuk mulai menganalisis perilaku pengguna untuk mengoptimalkan proses atau mengubah teknologi secara radikal. <br><br>  Sebagai hasil dari analisis (di sini adalah topik untuk artikel terpisah), tindakan berikut diambil: <br><br><ul><li>  Data terputus hingga 3 tahun terakhir, karena tidak ada panggilan pada periode sebelumnya;  sejak itu periode lama telah terputus setiap tahun; </li><li>  Kami mengembalikan banding ke tabel master untuk merujuk ke partisi tertentu secara langsung (mengurangi beban pada DBMS). </li></ul><br><h4>  Hadir </h4><br>  Sekarang sistem ini cukup stabil, sesuai dengan kerangka waktu pengaturan dan persyaratan untuk karakteristik non-fungsional, tetapi awan kembali muncul di cakrawala: <br><br><ul><li>  Peningkatan lebih lanjut dalam jumlah pengguna; </li><li>  Pertumbuhan jumlah rumah tangga yang dilayani; </li><li>  Meningkatkan kompleksitas layanan yang disediakan; </li><li>  Peningkatan granularitas data tersedia bagi pengguna. </li></ul><br>  Oleh karena itu, sebuah rencana disusun dan implementasi dari langkah-langkah berikut sedang dipersiapkan: <br><br><ul><li>  Analisis perilaku pengguna: berapa banyak dari mereka yang benar-benar melihat dokumen pembayaran, dan berapa banyak yang membayar jumlahnya, seperti untuk ponsel; </li><li>  Pembentukan awal dokumen pembayaran untuk pengguna yang biasanya melihat dokumen pembayaran pada saat pemuatan terendah; </li><li>  Transisi ke teknologi alternatif (ya, banyak dari mereka yang mencapai titik ini memiliki solusi yang jauh lebih maju yang menyelesaikan semua masalah pada awalnya, pada sumber daya ponsel). </li></ul><br><img src="https://habrastorage.org/webt/dy/il/mz/dyilmzkj1tcr4uxt8dgm3buixhe.jpeg" alt="gambar"><br><br>  Tampaknya ini dapat menempatkan titik optimis yang besar.  Semua dilakukan dengan baik: mereka yang melakukannya dan mereka yang akan melakukannya dengan lebih baik segera.  Tapi besok akan ada proyek Highload baru, masalah asing baru.  Bagaimana mempersiapkan mereka sekarang, apa yang bisa dipertimbangkan ketika belum ada data? <br><br><h4>  Pendekatan sistematis untuk memecahkan masalah </h4><br>  Bisakah kita mengubah pengalaman menjadi metodologi untuk mendekati masalah dalam proyek-proyek Highload?  Anehnya, jawabannya adalah YA, semuanya telah ditemukan untuk kita dan berada dalam kerangka kerja <b>Theory of Constraint TOC</b> .  Hanya 5 langkah sederhana: <br><blockquote><ol><li>  Temukan batasan sistem. </li><li>  Putuskan bagaimana memanfaatkan batasan sistem secara maksimal. </li><li>  Bawalah segala hal lainnya ke keputusan ini. </li><li>  Perluas batasan sistem. </li><li>  PERHATIAN!  Jika pembatasan telah dihapus dalam 4 langkah sebelumnya, kembali ke langkah 1, tetapi jangan biarkan inersia menyebabkan pembatasan sistem. </li></ol></blockquote><br>  Deskripsi teori ini dan esensi langkah-langkahnya dijelaskan dengan sangat baik dalam literatur di akhir artikel, tetapi saya akan menulis visi saya dalam kerangka proses saat ini: <br><br><ol><li>  Pembatasan: waktu pembentukan dokumen pembayaran. </li><li>  Solusi: Hasilkan semua dokumen pembayaran di muka, saat mengunduh data. </li><li>  Bawahan keputusan: Saat menghubungi pengguna, terbitkan dokumen yang sudah jadi. </li><li>  Perpanjang pembatasan: Optimalkan waktu untuk pembentukan dokumen pembayaran. </li><li>  Abaikan sistem pra-formasi untuk SEMUA rumah tangga, tentukan batasan baru. </li></ol><br>  Pendekatan semacam itu akan mengurangi waktu solusi beberapa tahun, dengan biaya tenaga kerja minimum untuk programmer.  Pos menunjukkan jauh dari semua masalah yang muncul dan tidak ada beberapa detail dari solusi, karena mereka tidak begitu signifikan dalam pendekatan yang diusulkan. <br><br><h4>  Apa yang harus dibaca pada topik: </h4><br><ol><li>  <a href="https://www.litres.ru/eliyahu-goldratt/cel-process-nepreryvnogo-sovershenstvovaniya/">â€œTujuannya.</a>  <a href="https://www.litres.ru/eliyahu-goldratt/cel-process-nepreryvnogo-sovershenstvovaniya/">Proses Peningkatan Berkesinambungan, â€</a> Eliyahu Goldratt </li><li>  <a href="https://www.litres.ru/dmitriy-egorov-17914/teoriya-ogranicheniy-osnovnye-podhody-instrumenty-i-r/">"Teori Kendala.</a>  <a href="https://www.litres.ru/dmitriy-egorov-17914/teoriya-ogranicheniy-osnovnye-podhody-instrumenty-i-r/">Pendekatan dasar, alat, dan solusi â€</a> , Dmitry Egorov </li><li>  <a href="https://www.litres.ru/uilyam-detmer/teoriya-ogranicheniy-goldratta-sistemnyy-podhod-k-nepreryvnomu-sovershenstvovaniu-6136463/">â€œTeori Kendala Goldratt.</a>  <a href="https://www.litres.ru/uilyam-detmer/teoriya-ogranicheniy-goldratta-sistemnyy-podhod-k-nepreryvnomu-sovershenstvovaniu-6136463/">Pendekatan Sistem untuk Peningkatan Berkesinambungan, â€</a> William Detmer </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id483270/">https://habr.com/ru/post/id483270/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id483260/index.html">Cara membuat keputusan dan memprioritaskan tugas saat membuat produk</a></li>
<li><a href="../id483262/index.html">Istio Circuit Breaker: Putuskan Kontainer Rusak</a></li>
<li><a href="../id483264/index.html">Dijkstra: Kemenangan terbesar Barat dalam Perang Dingin atas Uni Soviet adalah transisi ke IBM - mitos pecah</a></li>
<li><a href="../id483266/index.html">Kemandirian finansial. Apa yang telah berubah sepanjang tahun</a></li>
<li><a href="../id483268/index.html">Buku "Mode, Iman, Fantasi, dan Fisika Baru Semesta"</a></li>
<li><a href="../id483272/index.html">Jalannya dari bisnis restoran ke perusahaan IT</a></li>
<li><a href="../id483276/index.html">Fitur-fitur baru Python 3.8 dan saatnya untuk meningkatkan ke Python 2</a></li>
<li><a href="../id483278/index.html">Perjanjian kemitraan atau bagaimana tidak merusak bisnis pada awalnya</a></li>
<li><a href="../id483280/index.html">Sistem File ESP32 dan SPIFFS</a></li>
<li><a href="../id483284/index.html">Bagaimana saya menguraikan jadwal</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>