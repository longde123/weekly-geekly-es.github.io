<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§æüèΩ ‚è¨ üïµüèª Uhren auf ATtiny13 üññüèº üíáüèø üêî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich liebe die leuchtende Uhr, und als ich eine andere brauchte, baute ich sie schnell auf einem Steckbrett aus ATtiny85, der Sieben-Segment-Anzeige TM...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Uhren auf ATtiny13</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448764/">  Ich liebe die leuchtende Uhr, und als ich eine andere brauchte, baute ich sie schnell auf einem Steckbrett aus ATtiny85, der Sieben-Segment-Anzeige TM1637 und der Echtzeituhr DS1307 zusammen.  W√§hrend der Montage lie√ü mich jedoch das Gef√ºhl nicht los, dass auf eine einfachere Steuerung verzichtet werden k√∂nnte.  Und das stellte sich als wahr heraus. <br><a name="habracut"></a><br><blockquote>  <b>Haftungsausschluss</b> <br><br>  Der Autor hat keinen technischen Hintergrund und die Arbeit bezieht sich nicht auf Mikrocontroller, denn mit Sicherheit ist alles so lala.  Au√üerdem gibt es keine Optimierung des Energieverbrauchs - wir, das Arduino, haben es nicht akzeptiert! <br></blockquote><br><h4>  Hardware </h4><br>  Zun√§chst habe ich die verf√ºgbaren L√∂sungen untersucht und keine vorgefertigten Beispiele f√ºr den Anschluss eines Zweidraht-DS1307 an ATtiny13 gefunden.  Weil <abbr title="Echtzeituhr">RTC</abbr> durch einen Dreileiter-DS1302 ersetzt wurde.  Zwei weitere Beine nahmen die Displayverbindung auf.  Auf dem verbleibenden halben Fu√ü des Zur√ºcksetzens befand sich eine Schaltfl√§che zum Einstellen der Zeit mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">StackOverflow</a> und zwei Widerst√§nden. <br><br><img src="https://habrastorage.org/webt/ec/bd/tc/ecbdtcgswgzo0xlxxipe3yhvm6a.jpeg"><br>  <i>Endg√ºltige Verbindung der Elemente</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/43e/89a/e89/43e89ae898d3d967da928ca1c5d57ec4.png"><br>  <i>Anschlussplan (von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">staticmain</a> )</i> <br><br>  F√ºr immer ben√∂tigen Sie noch 4,7-10K-Widerst√§nde von den Beinen des PB1- und PB2-Mikrocontrollers (obere Mitte) zum Plus und einen 0,1ŒºF-Kondensator zwischen Plus und Minus, aber es funktioniert ohne sie. <br><br><h4>  Software-Teil </h4><br>  Die Anzahl der Beine des ATtiny13 ist nicht das einzige Problem.  Der verf√ºgbare Speicher ist ebenfalls klein - nur 1 KB, weshalb vorgefertigte Bibliotheken nicht geeignet sind.  Die L√∂sung besteht darin, das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MicroCore-</a> Paket und die kompakte Bibliothek f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TM1637 zu verwenden</a> .  F√ºr den DS1302 wurde nichts gefunden, daher musste ich ihn auf der Grundlage <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dieses</a> Repositorys selbst erstellen.  Der resultierende √úberwachungscode ist auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><b>GitHub</b></a> verf√ºgbar. <br><br><h4>  Schritt-f√ºr-Schritt-Anleitung f√ºr diejenigen, die wiederholen m√∂chten </h4><br><ol><li><div class="spoiler">  <b class="spoiler_title">Teileliste</b> <div class="spoiler_text"><ul><li>  Mikrocontroller ATtiny13 </li><li>  Anzeige auf TM1637 </li><li>  Echtzeituhr DS1302 </li><li>  Quarz bei 32768Hz </li><li>  Knopf </li><li>  Ein Widerstandspaar auf 1K und 10K </li><li>  3 Volt Batteriehalter </li><li>  Steckbrett und Jumper oder Leiterplatte </li></ul><br></div></div>  Wenn Sie Ali-Express verwenden, dauert alles ungef√§hr 100 Rubel. </li><li>  Als Programmierer - Arduino mit der in den Beispielen gelieferten ArduinoISP-Skizze, die darauf hochgeladen wurde.  Wenn Sie wie ich Arduino Nano und die Pins 10-13 zum Verbinden verwenden, m√ºssen Sie die Zeile 81 auskommentieren <br><br><pre><code class="plaintext hljs">#define USE_OLD_STYLE_WIRING</code> </pre> <br>  Nachdem Sie die Skizze zwischen die Beine des Bodens geladen und den Arduino abgeladen haben, m√ºssen Sie einen Kondensator auf 10 mF setzen, obwohl einige ohne ihn gen√§ht werden. <br><br><img src="https://habrastorage.org/webt/-b/bz/as/-bbzasdsuupgvjq3d03lu062srm.jpeg"><br>  <i>ATtiny13 Firmware-Prozess durch ein leicht staubiges Arduino</i> <br></li><li>  Damit die Arduino IDE mit ATtiny13 arbeiten kann, wird der Inhalt von MicroCore dem Ordner% Program Files (x86)% / Arduino / hardware hinzugef√ºgt.  Danach wird in der IDE im Abschnitt Tools die ATtiny13-Karte mit den folgenden Einstellungen ausgew√§hlt: BOD deaktiviert, LBO aktiviert, Clock 9.6 interner Osc. <br><br><img src="https://habrastorage.org/webt/cb/pg/lv/cbpglvgttknxn8wg9_6jfpe5lcg.jpeg"><br><br><img src="https://habrastorage.org/webt/b9/qt/le/b9qtlefqfwybqwavfrdoeyoprqg.jpeg"><br></li><li>  Git-Quellen enthalten bereits die f√ºr die Arbeit mit ds1302 und TM1637 erforderlichen Bibliotheken, die f√ºr die Arbeit mit den Pins (siehe Bibliotheksheaderdateien) bzw. dem Verbindungsbild konfiguriert sind. Laden Sie also einfach das Repository herunter und laden Sie clock.ino auf ATtiny13 hoch.  Die Firmware nimmt fast den gesamten verf√ºgbaren Speicherplatz ein. <br><br><img src="https://habrastorage.org/webt/vt/1t/zz/vt1tzzrye20srf3kw1ksqe6q1tg.jpeg"><br>  <i>Zusammengebautes Ger√§t auf einem Steckbrett.</i>  <i>Gr√ºne Punkte zeigen den Installationsort von ATtiny f√ºr Firmware an (das orangefarbene Plus-Stromkabel ist sehr schlecht sichtbar).</i> <br></li><li>  Aufgrund der Besonderheit des Anschlusses der Taste, der ungenauen Widerstandswerte und der Versorgungsspannung kann es erforderlich sein, die Ansprechschwelle von analogRead in clock.ino (26. Zeile) zu √§ndern. </li><li>  Es war geplant, die Karte nach der LUT-Methode herzustellen, aber der Drucker fiel dabei aus, sodass die √úberpr√ºfung der resultierenden <a href=""><b>Karte</b></a> auf unbestimmte Zeit verschoben wurde, bis sie repariert wurde. <br></li></ol><br><h4>  Anstelle einer Schlussfolgerung </h4><br>  Die TM1637-Mikroschaltung, die eine Sieben-Segment-Anzeige steuert, verf√ºgt √ºber zweipolige Ausg√§nge, deren Status √ºber die Schnittstelle gesendet werden kann.  Sie werden jedoch auf dem Anzeigemodul nicht getrennt, und die verwendete Bibliothek unterst√ºtzt sie nicht. <br><br>  Es w√§re m√∂glich, eine Platine f√ºr einen gr√∂√üeren Indikator zu z√ºchten, indem Mikroschaltungen und ein Mikrocontroller auf einer Leiterplatte platziert werden, aber es schien mir, dass es in diesem Fall einfacher ist, eine fertige zu kaufen.  Obwohl dies f√ºr mich ein guter Radiodesigner sein k√∂nnte. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de448764/">https://habr.com/ru/post/de448764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de448754/index.html">Wer ist wer in Open Source: Geek-Biografien</a></li>
<li><a href="../de448756/index.html">Hintergrund: Warum Apple und Qualcomm sich stritten und sich dann vers√∂hnten</a></li>
<li><a href="../de448758/index.html">Smartwatch mit BASIC auf physischem 6502</a></li>
<li><a href="../de448760/index.html">Entwicklung in der Cloud, Informationssicherheit und personenbezogene Daten: Zusammenfassung zum Lesen an Wochenenden von 1cloud</a></li>
<li><a href="../de448762/index.html">Aufstand auf der Picaba. Benutzer gehen massiv zu Reddit</a></li>
<li><a href="../de448766/index.html">Erstellen Sie ein Monorepository mit Lernbereichen f√ºr Herna und Garn</a></li>
<li><a href="../de448768/index.html">Mehrebenen-Lichtsteuerung: Ausfallsicherheit von L√∂sungen und Produkten</a></li>
<li><a href="../de448770/index.html">Aktualisierte Razor-Unterst√ºtzung in Visual Studio Code. Jetzt mit Blazor</a></li>
<li><a href="../de448774/index.html">SQL zu CSV mit DBMS_SQL</a></li>
<li><a href="../de448776/index.html">RxVMS - Eine praktische Architektur f√ºr Flatteranwendungen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>