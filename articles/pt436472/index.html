<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì® üéÖüèø üíó Confer√™ncia DEFCON 20. Capture em 60 segundos: de uma conta de convidado a um administrador de dom√≠nio do Windows. Parte 1 ü§≤ ‚õ∫Ô∏è üï∫üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ol√°, sou Zach Feysel, falo r√°pido, se for r√°pido demais, voc√™ pode me atrasar. Durante o dia, sou penteado, √† noite sou DJ e fot√≥grafo, posso ser enco...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Confer√™ncia DEFCON 20. Capture em 60 segundos: de uma conta de convidado a um administrador de dom√≠nio do Windows. Parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/436472/"> Ol√°, sou Zach Feysel, falo r√°pido, se for r√°pido demais, voc√™ pode me atrasar.  Durante o dia, sou penteado, √† noite sou DJ e fot√≥grafo, posso ser encontrado no Twitter usando o apelido @zfazel.  As pessoas sempre me perguntam sobre diplomas.  Eu n√£o sou uma dessas pessoas que listam v√°rios diplomas, ent√£o √© melhor voc√™ me julgar com base nesta apresenta√ß√£o, e n√£o pelo n√∫mero de certificados que tenho. <br><br><img src="https://habrastorage.org/webt/l3/kp/2g/l3kp2gz0xpfmgdk12en8bqyi4yq.jpeg"><br><br>  Um coment√°rio sem vergonha: temos pouca concorr√™ncia aqui, agora os caras de Chicago est√£o na pista 4, somos todos de Chicago, levante rapidamente suas m√£os que est√° aqui de Chicago.  Ent√£o, acho que perdi a aposta.  Estarei como DJ esta noite na piscina. Se voc√™ estiver livre, seja bem-vindo √† batalha com Kate Myers. Depois disso, voltarei a Chicago para outra confer√™ncia sobre hackers.  No ano passado, 500 pessoas compareceram, este ano esperamos que haja mais convidados.  Meus 312 funcion√°rios tamb√©m estar√£o l√°, mais informa√ß√µes sobre esta confer√™ncia podem ser encontradas em thotcon.org. <br><br>  Portanto, para n√£o perder tempo: falaremos sobre uma alternativa ao ataque Pass-the-hash chamado NTLM-Relay, sobre um novo conjunto de ferramentas para transmiss√£o entre protocolos de retransmiss√£o de protocolo cruzado para solicita√ß√µes de autentica√ß√£o NTLM, sobre novos m√©todos de autentica√ß√£o autom√°tica de clientes e sobre novos fins para os quais voc√™ pode usar o Pass-the-hash. <br>  Vamos come√ßar com o NTLM, para aqueles que n√£o sabem o que √© o NTLM 101, o ponto todo pode ser declarado em menos de 10 minutos.  Ent√£o, o que √© LM / NTLM?  √â um reposit√≥rio de senhas e um protocolo de autentica√ß√£o de rede desenvolvido pela Microsoft para uso no Windows.  Porra, meus slides est√£o fora de ordem!  Portanto, o hash LM √© um formato para armazenar senhas de usu√°rio com menos de 15 caracteres, a senha √© dividida em 2 partes de 7 bytes e √© convertida em mai√∫sculas.  Espero que voc√™ possa ver como s√£o os hashes LM e NTLM.  N√£o vou perder tempo dizendo como o LM √© ruim e fraco, todos voc√™s sabem disso e, se n√£o, pesquisam no Google. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/jl/rk/ge/jlrkge7x_ler-llqlbl4chy6jn8.jpeg"><br><br>  Um hash NTLM geralmente diferencia mai√∫sculas de min√∫sculas, tem um comprimento ilimitado, n√£o √© dividido em grupos de caracteres e √© um pouco mais forte que o LM, mas tamb√©m n√£o √© sem problemas.  Agora vou falar sobre eles.  A primeira vulnerabilidade √© a possibilidade de um ataque Pass-the-hash, que permite que um hacker efetue login em um servidor remoto que usa autentica√ß√£o de cliente com base nos protocolos NTLM / LM.  Desculpe, pessoal, eu misturei os slides, eu os fiz 5 minutos atr√°s, em suma, LM √© uma porcaria. <br><br>  Ent√£o, o que √© autentica√ß√£o NTLM?  Esta √© a autentica√ß√£o de rede para servi√ßos remotos.  Ela √© necess√°ria para provar que voc√™ realmente √© o que voc√™ se chama.  O servi√ßo geralmente √© executado em um computador separado, onde voc√™ deseja acessar os recursos oferecidos pelo servi√ßo, por exemplo, um servidor de arquivos √© um servi√ßo e arquivos s√£o recursos.  Em um minuto, veremos quais s√£o esses servi√ßos. <br><br>  Podemos ficar confusos quando falamos sobre NTLM v1, v2, NTLM 2, assinado ou n√£o, por isso vamos examinar rapidamente a autentica√ß√£o NTLM.  Durante a autentica√ß√£o, tr√™s tipos de mensagens s√£o enviadas. <br><br><img src="https://habrastorage.org/webt/xr/ub/mp/xrubmplrjtbebui7zomdfqkeuzu.jpeg"><br><br>  O tipo 1 √© a solicita√ß√£o do cliente ao servidor para estabelecer um contato, algo como "Quero me autenticar".  Voc√™ v√™ o pacote em peda√ßos, capturado pelo Wireshark, h√° sinalizadores para dar suporte √† autentica√ß√£o, o nome da esta√ß√£o de trabalho e seu nome de dom√≠nio. <br><br>  A mensagem do tipo 2 √© uma resposta do servidor.  Se voc√™ notou na mensagem do Tipo 1 que ainda n√£o sabemos quem √© esse usu√°rio, ele apenas pediu para se conectar ao servidor e deseja descobrir se a solicita√ß√£o √© suportada. <br><br><img src="https://habrastorage.org/webt/wl/j0/v0/wlj0v0bz-jkpsykoklolampo0x8.jpeg"><br><br>  Voc√™ v√™ aqui a resposta do servidor NTML Challenge como um conjunto de n√∫meros que muda sempre.  A captura de tela mostra uma resposta est√°tica que pode ser usada para criar "tabelas arco-√≠ris".  Ent√£o, o servidor responde com uma mensagem do segundo tipo: ‚Äú√© isso que eu apoio, aqui est√° o meu nome de dom√≠nio, aqui est√° o nome do meu servidor‚Äù.  Esta resposta √© usada para "salgar" o hash da sua senha, portanto, sempre que uma resposta √∫nica for obtida, voc√™ n√£o poder√° repeti-la v√°rias vezes com a mesma solicita√ß√£o. <br><br>  Mensagem do tipo 3 - esta √© a mensagem de autentica√ß√£o do cliente. <br><br><img src="https://habrastorage.org/webt/mg/of/a8/mgofa83tlvbkexds9ksby3d4osu.jpeg"><br><br>  Essa √© a resposta do servidor, que √© o hash da senha do hash NTML, juntamente com o nome de usu√°rio, o nome da esta√ß√£o de trabalho e o nome do dom√≠nio e sua chave de sess√£o, se voc√™ assinar a sess√£o. <br><br>  √â a vers√£o NTML 1. A vers√£o 2 da NTML √© muito semelhante a ela, mas h√° par√¢metros adicionais adicionados na senha de resposta e na chamada do cliente para proteger contra o uso de "tabelas arco-√≠ris", ou seja, o cliente usa um elemento de aleatoriedade contra elas. <br><br>  Outra coisa sobre a qual precisamos falar √© a autentica√ß√£o integrada do Windows.  √â necess√°rio para que cada vez que voc√™ n√£o precise entrar novamente no sistema com uma senha, a fim de usar recursos e servi√ßos.  Se voc√™ estiver conectado a um servidor de dom√≠nio ou a um servidor Web interno, o Windows n√£o solicitar√° a senha, apenas solicitar√° uma API e receber√° informa√ß√µes que o sistema deve usar para autentica√ß√£o. <br>  No contexto da seguran√ßa local, o HTTP protege usando zonas de seguran√ßa confi√°veis, sites confi√°veis ‚Äã‚Äãou sites locais, verificando apenas um nome de dom√≠nio com uma √∫nica palavra.  Vou tentar atualizar rapidamente sua mem√≥ria.  Um dom√≠nio de uma palavra primeiro procura um nome DNS nos servidores DNS, depois verifica seu host ou nome de host DNS e o passa de volta.  Ele verifica a estrutura do seu nome completo e executa o NBNS, que √© a solicita√ß√£o de transmiss√£o para esse nome de dom√≠nio.  De fato, ele pergunta √† rede: ‚Äúei, estou procurando um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nome</a> , voc√™ conhece algu√©m com esse nome?‚Äù, Distribuindo essa solicita√ß√£o pela rede local no modo de transmiss√£o multim√≠dia MBNS. <br><br>  Como eu disse, como usamos o protocolo SMB em todos os lugares, n√£o h√° restri√ß√µes, apenas temos autentica√ß√£o autom√°tica usando SMB.  Isso causa alguns problemas. <br><br>  Considere o m√©todo Pass-the-hash.  Pode ser visto pelos protocolos que o NTML n√£o usa a senha original para autentica√ß√£o, portanto, tudo o que precisamos √© do pr√≥prio hash NTML.  Podemos acessar o hash NTML usando v√°rias ferramentas do Windows, ou seja, extrair esse hash do armazenamento local ou da mem√≥ria.  Tudo isso foi descrito em outros discursos, apenas lembro rapidamente a ess√™ncia da quest√£o para mostrar as diferen√ßas entre os dois m√©todos. <br>  O fato √© que, geralmente, para esse passe-de-hash, voc√™ precisa acessar no n√≠vel de administrador do sistema local, porque com uma conta de convidado, voc√™ n√£o ter√° acesso ao armazenamento local ou √† mem√≥ria local. <br><br>  Ent√£o, o que √© retransmiss√£o NTLM e como ele √© diferente do m√©todo Pass-the-hash?  Eles me dizem constantemente: ‚ÄúAh, voc√™ est√° falando sobre Pass-the-hash!‚Äù, E eu respondo: ‚ÄúN√£o, estou falando sobre a retransmiss√£o NTLM!‚Äù.  A diferen√ßa √© que a retransmiss√£o NTLM n√£o requer privil√©gios de administrador para acessar a rede ou o sistema.  De fato, voc√™ se conecta √† rede de dentro ou de fora e come√ßa a trabalhar como convidado.  N√£o h√° credenciais, n√£o h√° acesso ao sistema, apenas a solicita√ß√£o √© autenticada se voc√™ retornar aos tipos de mensagens acima 1,2,3.  N√£o h√° verifica√ß√£o quando o host responde √† sua solicita√ß√£o e garante que voc√™ √© voc√™. <br>  O que fazemos √© criar um servidor fraudulento para receber solicita√ß√µes de autentica√ß√£o e retransmiti-las ao servidor de destino. <br><br>  Vamos ouvir a hist√≥ria para que voc√™ entenda a ess√™ncia do problema.  Em 1996, quando Dominic Brezinsky descobriu uma vulnerabilidade no processo de autentica√ß√£o usando o protocolo de acesso CIFS, a primeira vers√£o do protocolo SMB.  Depois disso, eles primeiro conversaram sobre a possibilidade de usar o NTLM Relaying.  Em 2001, o NTLM conseguiu encontrar um buraco no SMB.  Primeiro, o funcion√°rio da Veracode, Christian Ryu (tamb√©m conhecido como Dildog) disse isso em uma confer√™ncia da DefCon, e o hacker Josh Bushbinder (tamb√©m conhecido como Sir Dystic) publicou um c√≥digo de explora√ß√£o que funciona com essa vulnerabilidade.  Usamos o protocolo Telnet e a vulnerabilidade do navegador IE, onde voc√™ pode digitar telnet: // ip e se autenticar automaticamente. <br><br><img src="https://habrastorage.org/webt/mn/z5/mc/mnz5mcfwjyklsnbgafwv6rkqtoq.jpeg"><br><br>  Depois disso, o m√©todo de retransmiss√£o NTLM come√ßou a ser usado para redirecionar solicita√ß√µes SMB para outros hosts ou para seu pr√≥prio host.  Isso continuou at√© novembro de 2008, quando o Microsoft Windows corrigiu os furos onde podiam, impedindo que a solicita√ß√£o de autentica√ß√£o NTLM retornasse com o patch MS08-068. <br><br>  Assim, perdemos a capacidade de retornar uma solicita√ß√£o de autentica√ß√£o ao nosso host e s√≥ pod√≠amos encaminh√°-la para outros hosts devido aos recursos de design do protocolo.  Em 2008, um cara sob o apelido Grutz fez uma declara√ß√£o sobre a morte do DefLon NTLM.  Acho que esse foi um dos melhores desempenhos dos √∫ltimos anos, porque teve um enorme impacto no ambiente corporativo. <br><br><img src="https://habrastorage.org/webt/2a/3o/jt/2a3ojthljjqouilw7tkxdyhrkww.jpeg"><br><br>  Ele chamou seu instrumento de nome de Pokemon Squirtle e a tecnologia - "macaco no meio" por analogia com "homem no meio".  Essa ferramenta permitiu que o NTLM Relaying fosse executado via HTTP e tamb√©m funcionou bem com o SMB, recebendo solicita√ß√µes de autentica√ß√£o. <br><br><img src="https://habrastorage.org/webt/zk/vw/0b/zkvw0bevvlrf-tkgcgofh2myqge.jpeg"><br><br>  Esta captura de tela foi tirada h√° dois dias e o desenvolvimento de seu aplicativo Squirtle ainda est√° em andamento.  Decidi que todos voc√™s est√£o familiarizados com essas vulnerabilidades, cujos problemas estamos falando repetidas vezes, porque elas n√£o podem ser consertadas de maneira alguma e se manifestar em todos os lugares.  Eu perten√ßo ao ambiente corporativo, portanto, estou bem ciente do problema sobre o qual sempre reclamo - que os sites n√£o fazem criptografia SSL de solicita√ß√µes de autentica√ß√£o, assim como eles n√£o criptografam seus cookies.  Em 2010, uma extens√£o do navegador Firefox chamada Firesheep foi lan√ßada. <br><br>  Voc√™ provavelmente conhece essa ferramenta para interceptar cookies HTTP n√£o criptografados de sites populares e outras sess√µes de trabalho com sites via Wi-Fi ou sniffing de rede, posando como outros usu√°rios. <br><br><img src="https://habrastorage.org/webt/bq/wp/fk/bqwpfk8n_ufmlqpudkkukju9iqc.jpeg"><br><br>  Perguntei-me, de onde as pessoas tiveram vontade de criar essas ferramentas.  Acontece que tudo se resume √† facilidade de uso.  √â f√°cil criar um aplicativo que permita a representa√ß√£o de outra pessoa.  Decidi come√ßar do mesmo e criar um aplicativo que permitisse o uso do m√©todo NTLM Relaying para mostrar √†s pessoas que √© t√£o simples quanto o Firesheep. <br><br><img src="https://habrastorage.org/webt/rk/we/3g/rkwe3gmeq7t-edqk0jno3qqzwyu.jpeg"><br><br>  Comecei a trabalhar no NTLM Relaying para ver como o suporte a multiprotocolo √© poss√≠vel.  Muitas pessoas falaram sobre a possibilidade te√≥rica de tal apoio, mas ningu√©m a colocou em pr√°tica.  Ent√£o, meu objetivo era criar o Firesheep para NTLM. <br>  Decidi come√ßar a aprender Ruby porque originalmente ia integrar minha explora√ß√£o ao Metasploit.  Em 2012, eu queria abordar esse t√≥pico nas confer√™ncias Black Hat e DefCon, mas meu relat√≥rio foi rejeitado.  Meus discursos n√£o foram apenas rejeitados, recebi um e-mail falso que a DefCon aceitou meu relat√≥rio.  Um amigo achou que seria muito engra√ßado me trollar, ele √© um idiota.  Ele tinha um amigo aqui cuja performance foi aprovada, e meu amigo pegou e me enviou o conte√∫do do email dele.  N√£o prestei aten√ß√£o ao cabe√ßalho, que dizia ‚ÄúDe Nikita‚Äù e entrei em p√¢nico, percebendo que deveria falar na DefCon em uma hora e meia, mas ent√£o recebi uma carta real com uma recusa. <br><br>  Voc√™ acha que isso termina a hist√≥ria?  N√£o, tr√™s semanas depois, Nikita me diz: ‚Äúei, temos uma abertura no domingo, algu√©m se recusou a participar, voc√™ quer falar em seu lugar?‚Äù  Eu pensei que era √≥timo, mas ent√£o percebi que tinha muito pouco tempo antes da apresenta√ß√£o e comecei a codificar como um louco, tentando terminar tudo na hora certa. <br><br>  Ent√£o, quais foram meus problemas?  Em primeiro lugar, as ferramentas estrangeiras n√£o podiam executar o trabalho do Pentester de que eu precisava; faltavam muito v√°rios protocolos que poderiam retornar solicita√ß√µes de autentica√ß√£o.  A maioria dos protocolos estava relacionada ao uso de SMB e HTTP, e nenhum deles suportava LDAP para autentica√ß√£o MySQL, ou pelo menos testava desktops remotos, VPNs e similares. <br><br>  Outro problema foi que todos encaminharam cada solicita√ß√£o para o mesmo destino.  Ou seja, recebemos dados do usu√°rio, contas de computador e enviamos toda a autentica√ß√£o para uma √∫nica finalidade; portanto, n√£o conseguimos identificar os usu√°rios antes da autentica√ß√£o, ou seja, antes de receber uma mensagem do Tipo 3.  Se voc√™ se lembrar dessas mensagens do tipo 1,2,3, a mensagem do Tipo 2 √© a resposta do servidor.  √â exclusivo para cada sess√£o, e eu n√£o sei quem s√£o esses usu√°rios at√© que eles enviem a √∫ltima mensagem do Tipo 3, e n√£o sei qual resposta e de qual servidor o usu√°rio √©.  Eu estava interessado em saber por que n√£o existem ferramentas que fariam isso, ent√£o examinei mais de perto protocolos como SMB e HTTP, depois falaremos sobre isso com mais detalhes. <br><br>  O Windows 8 e o Windows 2012 ainda oferecem suporte ao NTLM por padr√£o.  Isso √© assustador, porque sabemos da vulnerabilidade desses protocolos, mas o NTLM n√£o desapareceu.  Portanto, n√≥s, como manifestantes, informamos √†s organiza√ß√µes que elas devem se proteger de tais ataques. <br>  Ent√£o, eu queria resolver esse problema e criei uma ferramenta chamada ZackAttack.  Eu sei que parece feio, mas n√≥s passamos por v√°rios nomes, eu pessoalmente gostei mais do √∫ltimo - ‚ÄúNTLMv2?  Cadela, por favor ... ". <br><br><img src="https://habrastorage.org/webt/m-/2t/ho/m-2tho0orjti9rj9ytmo0su1jv0.jpeg"><br><br>  O que est√° contido nesta ferramenta?  Analisarei rapidamente esses slides, porque acho que voc√™ j√° se divertiu o suficiente.  O ZackAttack consiste em v√°rios componentes diferentes, falaremos sobre cada um deles e como eles se relacionam. <br><br>  Primeiro de tudo, existe um servidor HTTP SMB - este √© um servidor fraudulento que aceita solicita√ß√µes de autentica√ß√£o.  Portanto, os clientes direcionam esse servidor, autenticam e o servidor os mant√©m autenticados.  Em seguida, temos um conjunto de regras para opera√ß√£o autom√°tica. <br><br>  Temos clientes para essas explora√ß√µes autom√°ticas, bem como APIs que podemos associar a qualquer aplicativo de terceiros que transfira solicita√ß√µes de retransmiss√£o de NTLM. <br><br><img src="https://habrastorage.org/webt/1o/xt/om/1oxtompzqtshvinccoxpb1yfzwe.jpeg"><br><br>  Por fim, temos uma gera√ß√£o de cargas √∫teis que for√ßam os clientes a se autenticarem automaticamente. <br><br>  O que s√£o servidores fraudulentos?  Em primeiro lugar, eles autenticam os usu√°rios e os salvam para n√≥s; depois, mostrarei como os usamos. <br><br><img src="https://habrastorage.org/webt/c2/ik/io/c2ikiockvkztijbnn4e-kcqg6ke.jpeg"><br><br>  Precisamos de todas essas pessoas para manter seu estado de autentica√ß√£o.  Existem muitas ferramentas que desativam os usu√°rios ap√≥s a primeira autentica√ß√£o bem-sucedida, mas nossa ferramenta ZackAttack mant√©m os usu√°rios autenticados pelo maior tempo poss√≠vel.  Na LAN do Windows para SMB, isso √© cerca de 30 vezes antes da conex√£o ser desconectada.  Portanto, precisamos descobrir quem √© esse usu√°rio, mantendo-o autenticado. <br><br>  A primeira solicita√ß√£o de autentica√ß√£o √© uma chamada est√°tica do tipo 112233. Aqueles que est√£o envolvidos no pentesting sabem que esse √© um tipo de tarefa para "tabelas arco-√≠ris".  Como eu disse, precisamos descobrir quem √© esse usu√°rio, mas n√£o sabemos disso at√© chegarmos √† mensagem do Tipo 3, por isso enviamos v√°rias chamadas.  Eu chamo isso de "elemento de Alzheimer" quando o sistema esquece quem √© o usu√°rio e pede que ele se autentique a cada vez para se conectar sem fechar a sess√£o. <br><br>  A raz√£o pela qual fazemos isso √© porque o HTTP, o WPAD e outras solicita√ß√µes nem sempre suportam cookies; al√©m disso, a identifica√ß√£o SMB via IP ou porta de origem A Porta de Origem n√£o funcionar√° se voc√™ tentar fazer isso remotamente pela Internet. <br><br>  Portanto, para o servidor HTTP, usamos um redirecionamento 302 com o par√¢metro Keep-Alive, que nos permite manter a sess√£o aberta enquanto o soquete est√° fechado e, ap√≥s a autentica√ß√£o, sabemos quem eles s√£o e o sabemos at√© o final desta sess√£o. <br><br>  Com o SMB, foi mais dif√≠cil, tive que escrever um servidor SMB personalizado, √© um pouco complicado, mas funciona de qualquer maneira.  N√£o vou me aprofundar no mecanismo de autentica√ß√£o do protocolo SMB, porque levar√° algumas horas, ent√£o explicarei brevemente.  Depois que o servidor recebe a solicita√ß√£o de autentica√ß√£o, parece esquecer quem √© esse usu√°rio e diz: "Oh, ol√°, prazer em conhec√™-lo!"  "Legal, eu quero me conectar!"  "Espere, e quem √© voc√™?" E novamente requer uma solicita√ß√£o de autentica√ß√£o. <br><br>  Portanto, precisamos receber solicita√ß√µes de autentica√ß√£o que chegam aos servidores HTTP e SMB.  Muitas pessoas perguntam como realizamos o ataque do ‚Äúhomem do meio‚Äù.  Existem v√°rias maneiras diferentes de fazer com que as pessoas se autentiquem no nosso servidor e depois as enviem para fazer outras coisas.  Portanto, considere qual √© a carga √∫til em nossa ferramenta. <br><br>  Primeiro de tudo, esse √© o WPAD - um protocolo para configura√ß√£o autom√°tica de proxy, que permite determinar a localiza√ß√£o do arquivo de configura√ß√£o.  No Windows, quando voc√™ tenta conectar, como voc√™ sabe, uma janela aparece com uma pequena marca de sele√ß√£o ‚Äúencontrar automaticamente minhas configura√ß√µes de conex√£o‚Äù que ativa o WPAD.  Esse protocolo envia solicita√ß√µes para verificar as transmiss√µes de DNS e de rede, para que voc√™ possa falsificar essas solicita√ß√µes e responder a elas. <br><br>  Por padr√£o, no Windows, o computador autentica automaticamente o servidor WPAD via HTTP com as credenciais do usu√°rio atual. <br><br>  18:00 min <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Confer√™ncia DEFCON 20. Capture em 60 segundos: de uma conta de convidado a um administrador de dom√≠nio do Windows.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/nHU3ujyw_sQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Obrigado por ficar conosco.  Voc√™ gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usu√°rios da Habr em um an√°logo exclusivo de servidores b√°sicos que inventamos para voc√™:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as op√ß√µes est√£o dispon√≠veis com RAID1 e RAID10, at√© 24 n√∫cleos e at√© 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 n√∫cleos) 10 GB DDR4 240 GB SSD de 1 Gbps at√© a primavera, gratuitamente,</b> ao pagar por meio ano, voc√™ pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente n√≥s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um pr√©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436472/">https://habr.com/ru/post/pt436472/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436458/index.html">Progresso e hype na pesquisa ai</a></li>
<li><a href="../pt436460/index.html">A escolha da tecnologia, arquitetura e design em projetos de software - sem dinheiro</a></li>
<li><a href="../pt436464/index.html">2. An√°lise do log de ponto de verifica√ß√£o: SmartEvent</a></li>
<li><a href="../pt436466/index.html">Electron: desenvolvendo aplicativos de desktop usando HTML, CSS e JavaScript</a></li>
<li><a href="../pt436468/index.html">Experi√™ncia legislativa com inova√ß√£o digital</a></li>
<li><a href="../pt436474/index.html">Confer√™ncia DEFCON 20. Capture em 60 segundos: de uma conta de convidado a um administrador de dom√≠nio do Windows. Parte 2</a></li>
<li><a href="../pt436476/index.html">Nuvem para seguradoras</a></li>
<li><a href="../pt436480/index.html">Eu fiz um bot que se comunica com os recrutadores para mim e eu gostei</a></li>
<li><a href="../pt436482/index.html">Advanced Three.js: materiais de shader e p√≥s-processamento</a></li>
<li><a href="../pt436484/index.html">Onde encontrar configura√ß√µes de DNS no MacOS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>