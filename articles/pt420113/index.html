<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐅 🏳️‍🌈 👩🏿‍🎤 A lenda da estrutura do poder 👨 🔮 ▪️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recentemente, a tendência de “desaparecer estruturas” está ganhando popularidade, cuja locomotiva, sem dúvida, pode ser considerada SvelteJS - uma est...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>A lenda da estrutura do poder</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/420113/"> Recentemente, a tendência de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">“desaparecer estruturas”</a> está ganhando popularidade, cuja locomotiva, sem dúvida, pode ser considerada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">SvelteJS</a> - uma estrutura de construção e um compilador javascript de baunilha. <br><br>  Apesar de conceitualmente o Svelte ser muito simples e ainda mais fácil de usar, muitos desenvolvedores estão se perguntando qual é o recurso essencial dessa estrutura e toda a abordagem?  Por que isso não é um "outro framework javascript"? <br><br>  Neste artigo, falarei sobre uma das muitas superpotências Svelte que podem facilitar seriamente sua vida. <br><br>  Vamos descobrir, mas primeiro vou lhe contar uma lenda ... <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7o/oi/xe/7ooixeqngyip_s7tw9zpxhcvygw.png"></div><br><a name="habracut"></a><br><h2>  A lenda da estrutura do poder </h2><br><blockquote>  <i>Alguns frameworks foram criados pelos caras do Google e do Facebook, outros - caras legais, mas todos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">sob a "atenção" de Rich Harris</a> .</i> <i><br><br></i>  <i>Nove estruturas foram criadas para humanos, sete parecem ser para anões.</i>  <i>Três outras estruturas (react, vue, angular) eram para elfos.</i> <i><br><br></i>  <i>Depois de criar as estruturas e implementá-las em milhares de projetos, Rich Harris criou pessoal e secretamente uma estrutura ...</i> <i><br><br></i>  <i>Uma estrutura para governar todos eles,</i> <i><br></i>  <i>Uma estrutura para encontrá-los,</i> <i><br></i>  <i>Uma estrutura para trazer todos eles</i> <i><br></i>  <i>E juntos ligá-los.</i> <i><br></i> <br>  <b><i>- O Senhor das Estruturas</i></b> <br></blockquote><h2>  O problema </h2><br>  Estou certo de que muitos de vocês que estão engajados com seriedade e há muito tempo no desenvolvimento front-end enfrentaram repetidamente o problema de escolher ferramentas para o seu projeto atual e / ou próximo. <br>  A variedade de todos os tipos de pacotes, utilitários, baleias, estruturas, bibliotecas e outras soluções está fora de escala como nunca antes.  E o mais importante, todo esse movimento continua a acelerar. <br><br>  Tudo isso, de uma maneira ou de outra, se aplica à escolha da estrutura.  Provavelmente não se engane se eu assumir que apenas algumas equipes e empresas modernas iniciam novos projetos sem usar nenhuma estrutura js.  Obviamente, quando se trata de aplicativos da web modernos, não apenas de sites.  E tudo ficaria bem se muito do seu projeto não dependesse disso. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wj/fq/7d/wjfq7dchw2-jmtp1qsiieqgfp9c.jpeg"></div><br>  Julgue por si mesmos, a composição e as características da equipe dependem amplamente da estrutura que você escolher, e todo o processo de caça certamente depende.  Às vezes, o orçamento e os cronogramas dependem disso.  Em suma brrr. <br><br>  Mas os problemas reais começam, se em algum lugar no meio do projeto, você percebe que fez uma escolha incorreta.  Algo não cresceu junto e girou.  A estrutura exigiu um pouco mais de tempo para dominar, uma equipe um pouco maior, que se mostrou um pouco menos rápida, um pouco inadequada para seus objetivos ou estilo de desenvolvimento, etc.  E o mais importante, agora seu projeto está 100% vinculado a essa estrutura e você não pode simplesmente pegar e reescrevê-lo em outra coisa. <br><br>  Ainda mais ofensivamente, quando, no entanto, tendo concluído o projeto com sucesso, você entende que, em geral, não está muito feliz.  E, provavelmente, não gostaríamos de escrever o próximo projeto na mesma estrutura.  Portanto, todas as soluções "reutilizadas" pelas quais estamos nos esforçando podem ser jogadas no cano. <br><br>  Na verdade, o inferno com ele, com um código comercial que implementa uma tarefa comercial específica, funciona bem.  Mas você escreveu um "% insert%% legal com blackjack e meninas com baixa responsabilidade social", e queria usá-lo em seu próximo projeto, mas essa infecção está intimamente ligada à estrutura atual da qual você já está vendo um tipo. <br><br>  Outra variação do mesmo problema - imagine que você é uma empresa grande, como a Yandex.  Você tem um huilion de projetos, mesmo alguns conhecidos apenas por alguns funcionários, e cada projeto já experimentou tudo o que descrevi acima.  O problema é que todos esses projetos se assemelham às diferentes estruturas que eles selecionaram inicialmente. <br><br>  E aqui está sua liderança maravilhosa: decidiu competir com o Google Material Design e enviar-lhe uma cruzada para as interfaces variadas de seus projetos, a fim de levá-las a um denominador comum.  Designers espertos já estão desenhando novos botões e seletores e rabiscando milhares de páginas de diretrizes para o novo kit de interface do usuário único de seus componentes.  Camaradas Hurrah! <br><br>  Não a vida, mas um conto de fadas, certo?  Resta apenas descobrir como extrair todos esses novos componentes em todos os projetos que você já conseguiu escrever em todas as estruturas possíveis.  Se houver realmente muito tempo e dinheiro e houver um desejo estético e, mais importante, a crença de que "tudo precisa ser unificado", você poderá colocar algumas dezenas de equipes para reescrever tudo novamente, por exemplo, no React.  Isso está correto, porque a merda chata em que você escreveu nos últimos 2-3 anos já é moralmente obsoleta, mas o React será para sempre.  Bem, bem) <br><br>  Existe outro caminho.  Você pode escrever um novo e maravilhoso kit de interface do usuário em uma estrutura, criar uma biblioteca de componentes reutilizáveis ​​e, em seguida, simplesmente usar esse kit de interface do usuário em todos os seus projetos.  Parece legal?  Claro, mas ainda resta um problema - o tempo de execução. <br><br>  Se o seu projeto foi escrito em Angular (~ 500Kb) e você decidiu escrever um kit de interface do usuário no React (~ 98Kb), arraste cada projeto em uma estrutura, outra estrutura e mesmo com várias dependências, o próprio kit da UI é direto digamos que não parece ótimo. <br><br><h2>  Solução </h2><br>  Para nos ajudar a criar os próprios quadros "desaparecidos", sem tempo de execução.  A principal condição aqui é que eles sejam o mais isolados possível em termos de seu ecossistema e tenham mecanismos de integração externa e APIs correspondentes. <br><br>  Um ótimo exemplo dessa estrutura é o SvelteJS, sobre o qual <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">alguns</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigos</a> já foram escritos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">em Habré</a> . <br><br>  Então, imagine a situação em que temos um aplicativo no React.  Talvez estejamos cansados ​​e queremos nos livrar dele, mas reescrever tudo de uma vez é um luxo inadmissível.  Ou talvez algumas partes do aplicativo exijam melhorias ou refatoração.  Bem, ou decidimos criar uma biblioteca de componente único, e agora vamos escrever todos os componentes no Svelte e usá-los em todos os projetos.  Apresentado?  Sim, claro que não, ninguém tem essa fantasia.  Vamos dar uma olhada em um exemplo real. <br><br><img src="https://habrastorage.org/webt/h_/br/kr/h_brkrwgnkyf9oqewysg70boexg.png"><br><div class="spoiler">  <b class="spoiler_title">Isenção de responsabilidade</b> <div class="spoiler_text">  Imediatamente, quero chamar sua atenção para o fato de não ser um desenvolvedor do React e da última vez em que "senti" o React em 2015.  Portanto, suponho que a maneira como escrevi parte do exemplo React possa prejudicar os sentimentos de <s>acreditar em</s> reatistas.  Lamento não julgar rigorosamente, especialmente porque o significado do artigo não muda disso. <br></div></div><br><br>  Portanto, a tarefa é implementar o componente Svelte pronto no aplicativo React, sem alterar o próprio componente e sem incluir um tempo de execução adicional no aplicativo.  Por exemplo, utilizarei o componente que pesquisa usuários do GitHub, que escrevi para o artigo anterior <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">"Como pesquisar usuários no GitHub sem o React + RxJS 6 + Recompose"</a> . <br><br>  O código para este componente pode ser exibido no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">REPL</a> e o código de amostra deste artigo para o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">repositório</a> . <br><br><h4>  Criar aplicativo de reação </h4><br>  Primeiro, crie um novo projeto React usando a ferramenta padrão de fato - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">create-react-app</a> : <br><br><pre><code class="bash hljs">npx create-react-app my-app <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> my-app npm start</code> </pre> <br>  Ok, se você for para a porta 3000, ela parece funcionar. <br><br><h4>  Personalizar Svelte </h4><br>  Se você não sabe nada sobre o Svelte, direi isso, no contexto da tarefa Svelte, este é apenas mais um passo do seu coletor (webpack / rollup / gupl / grunt / etc), que permitirá escrever componentes no formato SFC e compilá-los em baunilha javascript. <br><br>  Na comunidade Svelte, o Rollup é mais preferido, o que não é surpreendente, pois eles têm um autor - Rich Harris.  No entanto, como o CRA usa o webpack, configuraremos o Svelte por meio dele.  Para fazer isso, primeiro você precisa transferir as configurações do webpack de react-scripts para o projeto, para que possamos alterá-las.  Isso é feito usando o comando interno: <br><br><pre> <code class="bash hljs">npm run eject</code> </pre> <br><br>  Até onde eu sei, essa não é uma abordagem kosher, mas, por exemplo, esta é a opção mais conveniente. <br><br>  Agora que as configurações do webpack estão na raiz do projeto, você pode instalar o Svelte: <br><br><pre> <code class="bash hljs">npm i --save-dev svelte svelte-loader</code> </pre><br><br>  Preste atenção ao <b>sinalizador --save-dev</b> , lembre-se de que sim, não há tempo de execução.)))) <br><br>  O toque final, você precisa conectar o carregador apropriado nas configurações: <br><br><pre> <code class="javascript hljs"> { <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.svelte$/</span></span>, <span class="hljs-attr"><span class="hljs-attr">use</span></span>: { <span class="hljs-attr"><span class="hljs-attr">loader</span></span>: <span class="hljs-string"><span class="hljs-string">'svelte-loader'</span></span>, } },</code> </pre><br><br>  Em geral, é comum na comunidade Svelte gravar arquivos de componentes com a extensão <b>.html</b> , porque o componente Svelte é um arquivo HTML válido.  No entanto, para evitar possíveis colisões, em alguns casos, é melhor usar o <b>formato de</b> arquivo <b>.svelte</b> personalizado. <br><br>  Assim fizemos, agora todos os arquivos <b>.svelte incluídos</b> no projeto serão interceptados por este carregador e compilados por Svelte. <br><br><h4>  Escrevendo um componente Svelte </h4><br>  Primeiro, é melhor configurar o editor de código, por exemplo, para que aplique a sintaxe html realçada a arquivos com a extensão correspondente.  Algo assim é feito no VS Code: <br><br><pre> <code class="json hljs"> <span class="hljs-string"><span class="hljs-string">"files.associations"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"*.svelte"</span></span>: <span class="hljs-string"><span class="hljs-string">"html"</span></span> }</code> </pre><br>  Agora crie uma pasta ./src/svelte_components/ e lá a pasta do próprio componente.  Depois disso, simplesmente transferimos todos os arquivos do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">exemplo REPL</a> para esta pasta, fornecendo simultaneamente uma nova extensão <b>.svelte</b> e chamamos o arquivo App.html Widget.svelte. <br><br>  O resultado deve ser algo como isto: <br><br><div style="text-align:center;"><img height="300" src="https://habrastorage.org/webt/ke/b7/v9/keb7v9dimbzchwje0xwwn6qevxy.png"></div><br>  No mesmo local, criamos o arquivo index.js no qual teremos o código de integração Svelte e React. <br><br><h4>  Integrar </h4><br>  Talvez agora você queira saber o que é mágica?  A mágica é que já fizemos toda a mágica.  Magicamente, não é? <br><br>  Sério, agora podemos usar os componentes Svelte em nosso aplicativo React como construtores JS completamente comuns, o que significa que o código de integração com o Svelte não será diferente da integração com qualquer outro standalone.  A documentação do React ainda contém uma seção dedicada a isso: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Integração com outras bibliotecas</a> . <br><br>  O código de integração pode ser assim: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { PureComponent } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Widget <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Widget.svelte'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { username } = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.widget = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Widget({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.el, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { username } }); } componentWillUnmount() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.widget.destroy(); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{el</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> this.el = el}&gt;</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre><br>  No total, simplesmente empacotamos o código do nosso componente complexo Svelte em um componente React muito simples, que simplesmente cria uma nova instância do componente Svelte, transferindo o elemento mount e os dados dos acessórios ao criá-lo.  Além disso, não esquecemos de desinstalar o componente Svelte no gancho <b>componentWillUnmount</b> . <br><br>  A única coisa que ainda não fizemos é que eles não sincronizaram os valores do estado do componente.  Ou seja, se o componente pai lançou outros adereços no componente wrapper, eles devem ser aplicados ao componente Svelte.  Por outro lado, se os dados foram alterados dentro do componente Svelte, eles devem ser revertidos. <br><br>  Para fazer isso, assumimos que o componente React de nível superior transmitirá o retorno de chamada onChange, que devemos extrair quando ocorrerem alterações internas, e esperaremos alterações nas propriedades do <b>componente</b> wrapper no gancho <b>componentWillReceiveProps</b> .  Vamos fazer isso: <br><br><pre> <code class="javascript hljs"> componentDidMount() { ... this.widget.on(<span class="hljs-string"><span class="hljs-string">'state'</span></span>, ({ <span class="hljs-attr"><span class="hljs-attr">current</span></span>: { username }, changed }) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (changed.username) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.onChange({ username }); } }); } componentWillReceiveProps({ username }) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.widget.set({ username }); }</code> </pre><br>  Aqui, usamos o evento interno do <b>estado</b> , que é acionado toda vez que o <b>estado do</b> componente Svelte é alterado.  Um objeto que contém o estado atual do componente ( <b>atual</b> ), o estado <b>anterior</b> ( <b>anterior</b> ) e a lista de propriedades <b>alteradas</b> ( <b>alteradas</b> ) é transferido para o retorno de chamada.  Dessa forma, simplesmente verificamos se o nome de usuário foi alterado e, se houver, chamamos o <b>retorno de chamada</b> onChange. <br><br>  No gancho <b>componentWillReceiveProps</b> , configuramos o novo <b>nome de usuário</b> usando o método <b>set ()</b> interno. <br><br>  Além dos componentes internos, o Svelte pode implementar eventos e métodos personalizados.  São esses recursos interessantes que permitem descrever a interface do componente e é bastante conveniente organizar a comunicação com o "mundo exterior". <br><br><h4>  Use </h4><br>  Agora vamos tentar usar nosso widget diretamente no aplicativo React.  Para fazer isso, edite o arquivo App.js gerado pelo iniciador: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { Component } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'./App.css'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> GithubWidget <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./svelte_components/GithubWidget'</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state = { <span class="hljs-attr"><span class="hljs-attr">username</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> }; } handleChange = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ ...state }); } render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"App"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"App-header"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Github Widget for: {this.state.username}</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">GithubWidget</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.handleChange}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">username</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{this.state.username}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">header</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> ); } } export default App;</span></span></code> </pre><br>  Em resumo, nós o usamos como um componente React regular.  E, como resultado, obtemos: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qd/0z/1k/qd0z1khfju_dcx2yxvczi8btoas.gif"></div><br>  Já não é ruim, certo?) Observe que o valor do nome de usuário que inserimos no campo de texto do widget é imediatamente encaminhado para o aplicativo React. <br><br><h4>  Vamos finalizar </h4><br>  Vamos agora ensinar nosso widget a pesquisar e exibir não apenas o cartão de usuário do GitHub, mas também o cartão de repositório. <br><br>  Primeiro, você precisa criar um novo componente Repo.svelte, que irá desenhar a placa do repositório.  Para simplificar, apenas copiei o modelo e os estilos do User.svelte e os adaptei aos dados do repositório.  No entanto, teoricamente, este é um componente separado. <br><br>  Em seguida, você precisa ensinar o componente de controle Widget.svelte a alternar esses dois tipos de cartões rapidamente.  Além disso, você precisa ensiná-lo a receber solicitações diferentes para o usuário e o repositório. <br><br>  Usaremos um campo para entrada e determinaremos o tipo de dados pela presença de "/" no valor.  Ou seja, se você precisar procurar o usuário, insira o nome de usuário e, se o repositório, insira o nome de usuário e, em seguida, "/" e o nome do repositório. <br><br>  À primeira vista, parece bastante confuso, mas no Svelte a solução terá literalmente 5-6 linhas de código.  Primeiro, vamos conectar um novo componente e método de API, que envolvemos em debounce: <br><br><pre> <code class="javascript hljs">... import Repo <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Repo.svelte'</span></span>; ... import { getUserCard, getRepoCard } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./api.js'</span></span>; ... const getRepo = debounce(getRepoCard, <span class="hljs-number"><span class="hljs-number">1000</span></span>);</code> </pre><br>  Em seguida, crie uma propriedade computada que determinará que tipo de cartão devemos mostrar: <br><br><pre> <code class="javascript hljs">computed: { ... repo: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ username }</span></span></span><span class="hljs-function">) =&gt;</span></span> username.includes(<span class="hljs-string"><span class="hljs-string">'/'</span></span>), ... }</code> </pre><br>  Agora adicione a opção de solicitações à API: <br><br><pre> <code class="javascript hljs">computed: { ... card: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ username, repo }</span></span></span><span class="hljs-function">) =&gt;</span></span> username &amp;&amp; (repo ? getRepo : getUser)(username), ... }</code> </pre><br>  E, finalmente, alternando os componentes da placa, dependendo do tipo: <br><br><pre> <code class="javascript hljs">computed: { ... Card: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ repo }</span></span></span><span class="hljs-function">) =&gt;</span></span> repo ? Repo : User, ... }</code> </pre><br>  Além disso, para substituir componentes dinamicamente, precisamos usar uma tag Svelte especial, que desenha o componente cujo valor é passado para <b>este</b> atributo: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svelte:component</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">this</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{Card}</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...card</span></span></span><span class="hljs-tag">} /&gt;</span></span></code> </pre><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nj/lf/ai/njlfaigk7v00mzr6bajdfz8hwai.gif"></div><br>  Isso funciona.  Você já reparou?  Já estamos escrevendo no Svelte dentro do aplicativo React!  ))) <br><br>  Agora vamos ensinar nosso widget a ocultar o campo de entrada e tentar inserir o nome de usuário não dentro do widget, mas dentro do aplicativo React.  Importa como nossa lógica de negócios obterá esse valor. <br><br>  Introduzimos uma nova propriedade de <b>pesquisa</b> cujo valor padrão é false.  Dependendo dessa propriedade, o campo de entrada será exibido ou não.  Por padrão, portanto, não haverá campo. <br><br><pre> <code class="html hljs xml">{#if search} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">username</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"username or username/repo"</span></span></span><span class="hljs-tag">&gt;</span></span> {/if} ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... data() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">username</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">search</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript"> }; }, ... }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Agora no App.js, criaremos um campo de entrada no lado React do aplicativo e escreveremos o processamento correspondente para o evento de entrada: <br><br><pre> <code class="javascript hljs"> ... handleUsername = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({ <span class="hljs-attr"><span class="hljs-attr">username</span></span>: e.target.value }); } ... &lt;h1&gt;Github Widget <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>: {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.username}&lt;<span class="hljs-regexp"><span class="hljs-regexp">/h1&gt; &lt;input value={this.state.username} onChange={this.handleUsername} className="Username" placeholder="username or username/</span></span>repo<span class="hljs-string"><span class="hljs-string">" /&gt;</span></span></code> </pre><br>  E também copie-o para a pasta com o widget aqui, como um girador svg no Svelte: <br><br><pre> <code class="javascript hljs">&lt;svg height={size} width={size} style=<span class="hljs-string"><span class="hljs-string">"animation-duration:{speed}ms;"</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"svelte-spinner"</span></span> viewbox=<span class="hljs-string"><span class="hljs-string">"0 0 32 32"</span></span> &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">circle</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"presentation"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cx</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">cy</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"16"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">r</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{radius}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stroke</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{color}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stroke-width</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{thickness}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stroke-dasharray</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"{dash},100"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">stroke-linecap</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"round"</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;script&gt; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> { data() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { <span class="hljs-attr"><span class="hljs-attr">size</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-attr"><span class="hljs-attr">speed</span></span>: <span class="hljs-number"><span class="hljs-number">750</span></span>, <span class="hljs-attr"><span class="hljs-attr">color</span></span>: <span class="hljs-string"><span class="hljs-string">'rgba(0,0,0,0.4)'</span></span>, <span class="hljs-attr"><span class="hljs-attr">thickness</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">gap</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>, <span class="hljs-attr"><span class="hljs-attr">radius</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> }; }, <span class="hljs-attr"><span class="hljs-attr">computed</span></span>: { <span class="hljs-attr"><span class="hljs-attr">dash</span></span>: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{radius, gap}</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI * radius * (<span class="hljs-number"><span class="hljs-number">100</span></span> - gap) / <span class="hljs-number"><span class="hljs-number">100</span></span> } }; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;style&gt; .svelte-spinner { transition-property: transform; animation-name: svelte-spinner_infinite-spin; animation-iteration-count: infinite; animation-timing-<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">linear</span></span></span><span class="hljs-function">; } @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">keyframes</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">svelte</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">spinner_infinite</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">spin</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> { <span class="hljs-attr"><span class="hljs-attr">transform</span></span>: rotate(<span class="hljs-number"><span class="hljs-number">0</span></span>deg); } to { <span class="hljs-attr"><span class="hljs-attr">transform</span></span>: rotate(<span class="hljs-number"><span class="hljs-number">360</span></span>deg); } } &lt;<span class="hljs-regexp"><span class="hljs-regexp">/style&gt;</span></span></code> </pre><br>  E vamos aplicá-lo no widget para que fique muito bonito: <br><br><pre> <code class="html hljs xml">... {#await card} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Spinner</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">speed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"750"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#38b0ee"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">thickness</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">gap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag"> /&gt;</span></span> {:then card} ...</code> </pre><br>  Na minha opinião, acabou não muito ruim: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/e_/2l/cb/e_2lcbvrci4btwtg6wwhjrf9zic.gif"></div><br>  A cartola com fundo preto e um campo de entrada é um aplicativo React, o bloco branco abaixo é um widget Svelte.  Estas são as tortas.  ))) <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Repositório</a> <br><br><h2>  Conclusões </h2><br>  O Svelte é uma ótima ferramenta para o desenvolvimento de aplicativos da Web modernos baseados em componentes.  Além disso, você pode escrever de forma rápida e conveniente componentes e widgets de interface do usuário autônomos reutilizáveis, que podem ser usados ​​em qualquer aplicativo Web, mesmo em conjunto com outras estruturas.  Também é ótimo para <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">microfrontas</a> . <br><br><h4>  Svelte é perfeito para você se: </h4><br><ol><li>  Você deseja iniciar um novo projeto e não sabe qual estrutura escolher para isso. </li><li>  Você tem um projeto, funciona e é melhor não tocá-lo.  Novos componentes e módulos, você pode escrever no Svelte e integrar-se perfeitamente ao código existente. </li><li>  Você já possui um projeto, mas está parcial ou completamente desatualizado e / ou requer uma refatoração séria, até uma reescrita completa.  Você pode começar a reescrevê-lo em partes.  Nesse caso, você não precisa criar configurações complexas.  Você acabou de pegar um componente, reescrevê-lo no Svelte e envolver o novo componente com o antigo.  No entanto, o restante do aplicativo nem está ciente das alterações. </li><li>  Você tem vários projetos em diferentes bases de código e, ao mesmo tempo, gostaria de ter um único kit de interface do usuário e usá-lo em qualquer um desses projetos.  Escreva um kit de interface do usuário no Svelte e use-o em qualquer lugar.  Isso é legal. </li></ol><br>  Deseja descobrir casos mais interessantes?  Participe do nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">canal Telegram</a> ! <br><br>  <b>ATUALIZAÇÃO:</b> obrigado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">justboris</a> pela <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">pergunta</a> correta.  Continuando o exemplo: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { PureComponent } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Widget <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./Widget.svelte'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PureComponent</span></span></span><span class="hljs-class"> </span></span>{ componentDidMount() { ... this.widget = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Widget({ <span class="hljs-attr"><span class="hljs-attr">target</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.el, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { username }, <span class="hljs-attr"><span class="hljs-attr">slots</span></span>: { <span class="hljs-attr"><span class="hljs-attr">default</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.slot } }); ... } ... render() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{el</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> this.el = el}&gt; </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">ref</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{el</span></span></span></span><span class="xml"><span class="hljs-tag"> =&gt;</span></span></span><span class="xml"> this.slot = el}&gt; {this.props.children} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } }</code> </pre><br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GithubWidget</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onChange</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.handleChange}</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">username</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{this.state.username}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Hello world<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">GithubWidget</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt420113/">https://habr.com/ru/post/pt420113/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt420103/index.html">Os melhores falantes de inglês com o HighLoad ++ 2017</a></li>
<li><a href="../pt420105/index.html">Adaptabilidade máxima com um número mínimo de consultas de mídia ou o método de adaptabilidade reversa</a></li>
<li><a href="../pt420107/index.html">Typegram - Plataforma Zen Blog</a></li>
<li><a href="../pt420109/index.html">Elon Musk disse que a empresa poderia ser vendida a investidores privados. Acabaram por ser um fundo saudita</a></li>
<li><a href="../pt420111/index.html">De zero a herói "Ações no Google": seu código</a></li>
<li><a href="../pt420115/index.html">UE4 Equipamento para Multiplayer # 4 | Criando e conectando um contêiner</a></li>
<li><a href="../pt420117/index.html">Guia de filas simples no Mikrotik</a></li>
<li><a href="../pt420119/index.html">10 frameworks web Python com os quais vale a pena trabalhar em 2018</a></li>
<li><a href="../pt420121/index.html">Teste de força: Cupim LT450, LXI</a></li>
<li><a href="../pt420123/index.html">O que é realmente o Node.js?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>