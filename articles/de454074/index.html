<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéº üôã üïç DynamicData: Dynamische Sammlungen, MVVM-Architektur und reaktive Erweiterungen ü§≤üèª üîµ üë©üèª‚Äçüåæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im Februar 2019 wurde ReactiveUI 9 ver√∂ffentlicht - das plattform√ºbergreifende Framework zum Erstellen von GUI-Anwendungen auf der Microsoft .NET-Plat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>DynamicData: Dynamische Sammlungen, MVVM-Architektur und reaktive Erweiterungen</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454074/"><p>  Im Februar 2019 wurde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ReactiveUI 9 ver√∂ffentlicht</a> - das plattform√ºbergreifende Framework zum Erstellen von GUI-Anwendungen auf der Microsoft .NET-Plattform.  ReactiveUI ist ein Tool zur engen Integration reaktiver Erweiterungen in das MVVM-Entwurfsmuster.  Sie k√∂nnen sich √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eine Reihe von Videos</a> oder <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Begr√º√üungsseite der Dokumentation</a> mit dem Framework vertraut machen.  Das ReactiveUI 9-Update enth√§lt <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zahlreiche Korrekturen und Verbesserungen</a> . Das wahrscheinlich wichtigste und interessanteste ist jedoch die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Integration in das DynamicData-Framework</a> , mit dem Sie auf reaktive Weise mit dynamischen Sammlungen arbeiten k√∂nnen.  Lassen Sie uns herausfinden, wof√ºr wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DynamicData</a> verwenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">k√∂nnen</a> und wie dieses leistungsstarke reaktive Framework unter der Haube funktioniert! </p><a name="habracut"></a><br><h1 id="introduction">  Einf√ºhrung </h1><br><p> Lassen Sie uns zun√§chst die Anwendungsf√§lle f√ºr DynamicData ermitteln und herausfinden, was uns an den Standardwerkzeugen f√ºr die Arbeit mit dynamischen Datasets aus dem <code>System.Collections.ObjectModel</code> Namespace nicht gef√§llt. </p><br><p>  Wie wir wissen, √ºbernimmt die MVVM-Vorlage die Aufteilung der Verantwortung zwischen der Modellebene, der Pr√§sentationsebene und dem App-Pr√§sentationsmodell, auch als Ansichtsmodell bezeichnet.  Die Modellebene wird durch Dom√§nenentit√§ten und -dienste dargestellt und wei√ü nichts √ºber die Ansichtsmodellebene.  Das Modell kapselt die gesamte komplexe Logik der App, w√§hrend das Ansichtsmodell Operationen an das Modell delegiert und den Zugriff auf Informationen zum aktuellen Status der App √ºber beobachtbare Eigenschaften, Befehle und Sammlungen an die Ansicht erm√∂glicht.  Das Standardwerkzeug f√ºr die Arbeit mit dynamischen Eigenschaften ist die <code>INotifyPropertyChanged</code> Schnittstelle, f√ºr die Arbeit mit Benutzeraktionen - <code>ICommand</code> und f√ºr die Arbeit mit Sammlungen - die <code>INotifyCollectionChanged</code> Schnittstelle sowie f√ºr solche Implementierungen wie <code>ObservableCollection&lt;T&gt;</code> und <code>ReadOnlyObservableCollection&lt;T&gt;</code> . </p><br><img width="500" src="https://habrastorage.org/getpro/habr/post_images/504/c83/ab0/504c83ab04fe2e2d1eed037317b8aa2c.jpg"><br><p><br>  Die Implementierung der <code>INotifyPropertyChanged</code> und der <code>ICommand</code> Schnittstelle <code>ICommand</code> normalerweise vom Entwickler und dem verwendeten MVVM-Framework ab. Die Verwendung der Standard- <code>ObservableCollection&lt;T&gt;</code> unterliegt jedoch einer Reihe von Einschr√§nkungen!  Beispielsweise k√∂nnen wir die Auflistung aus einem Hintergrundthread ohne <code>Dispatcher.Invoke</code> oder einen √§hnlichen Aufruf nicht mutieren. <code>Dispatcher.Invoke</code> w√§re sehr n√ºtzlich gewesen, um Datenarrays √ºber eine Hintergrundoperation mit dem Server zu synchronisieren.  Es ist anzumerken, dass die Modellschicht bei Verwendung der sauberen MVVM-Architektur nichts √ºber das verwendete GUI-Framework wissen sollte und mit der Modellschicht in der MVC- oder MVP-Terminologie kompatibel sein sollte.  Aus diesem Grund versto√üen diese zahlreichen <code>Dispatcher.Invoke</code> Aufrufe in Dom√§nendiensten gegen das Prinzip der Verantwortungssegregation. </p><br><p>  Nat√ºrlich k√∂nnten wir ein Ereignis in einem Dom√§nendienst deklarieren und einen Block mit ge√§nderten Elementen als Ereignisargumente √ºbertragen, dann das Ereignis abonnieren und den <code>Dispatcher.Invoke</code> Aufruf hinter einer Schnittstelle kapseln, sodass unsere App nicht von einer GUI abh√§ngt Rufen Sie diese Schnittstelle im Ansichtsmodell auf und √§ndern Sie <code>ObservableCollection&lt;T&gt;</code> entsprechend. Es gibt jedoch eine viel elegantere M√∂glichkeit, mit solchen Problemen umzugehen, ohne das Rad neu erfinden zu m√ºssen.  Worauf warten wir dann noch? </p><br><h1 id="reactive-extensions-managing-observable-data-streams">  Reaktive Erweiterungen.  Verwalten beobachtbarer Datenstr√∂me </h1><br><p>  Um die von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DynamicData</a> eingef√ºhrten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Abstraktionen</a> und das Arbeiten mit sich √§ndernden reaktiven Datens√§tzen vollst√§ndig zu verstehen, erinnern wir uns, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">was reaktive Programmierung ist und wie sie im Kontext der Microsoft .NET-Plattform und des MVVM-Entwurfsmusters verwendet wird</a> .  Die Organisation der Interaktion zwischen Programmkomponenten kann interaktiv oder reaktiv sein.  Beim interaktiven Ansatz empf√§ngt der Verbraucher Daten synchron vom Produzenten (Pull-basiert, T, IEnumerable), und beim reaktiven Ansatz sendet der Produzent Daten asynchron an den Verbraucher (Push-basiert, Task, IObservable). </p><br><img width="500" src="https://habrastorage.org/webt/mb/ts/mj/mbtsmjfyhjqeeb4tv8ynotvkdms.png"><br><p><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reaktive Programmierung</a> ist das Programmieren mit asynchronen Datenstr√∂men, und reaktive Erweiterungen sind die reaktive Programmierimplementierung, die auf den Schnittstellen <code>IObservable</code> und <code>IObserver</code> aus dem System-Namespace <code>IObservable</code> und eine Reihe von LINQ-√§hnlichen Operationen auf der <code>IObservable</code> Schnittstelle definiert, die als LINQ over Observable bezeichnet wird.  Reaktive Erweiterungen unterst√ºtzen .NET Standard und werden √ºberall dort ausgef√ºhrt, wo Microsoft .NET ausgef√ºhrt wird. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/ue/qe/80/ueqe80neq0ufivj-bq5hipdrldo.gif"></a> <br><br>  ReactiveUI bietet Anwendungsentwicklern die <code>ICommand</code> , die reaktiven Implementierungen f√ºr die Schnittstellen <code>ICommand</code> und <code>INotifyPropertyChanged</code> zu nutzen, indem Tools wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>ReactiveCommand&lt;TIn, TOut&gt;</code></a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>WhenAnyValue</code></a> .  <code>WhenAnyValue</code> Sie mit <code>WhenAnyValue</code> eine Eigenschaft einer Klasse konvertieren k√∂nnen, die die <code>INotifyPropertyChanged</code> Schnittstelle in einen Ereignisstrom vom Typ <code>IObservable&lt;T&gt;</code> implementiert, vereinfacht dies die Implementierung abh√§ngiger Eigenschaften. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ExampleViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { [Reactive] <span class="hljs-comment"><span class="hljs-comment">// Attribute from the ReactiveUI.Fody package, // takes care of aspect-oriented INPC implementation // for this particular property. public string Name { get; set; } public ExampleViewModel() { // Here we subscribe to OnPropertyChanged("Name") events. this.WhenAnyValue(x =&gt; x.Name) // IObservable&lt;string&gt; .Subscribe(Console.WriteLine); } }</span></span></code> </pre> <br><p>  <code>ReactiveCommand&lt;TIn, TOut&gt;</code> k√∂nnen Sie mit einem Befehl wie mit <code>IObservable&lt;TOut&gt;</code> , der ver√∂ffentlicht wird, wenn ein Befehl die Ausf√ºhrung abschlie√üt.  Au√üerdem verf√ºgt jeder Befehl √ºber eine <code>ThrownExceptions</code> Eigenschaft vom Typ <code>IObservable&lt;Exception&gt;</code> . </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// ReactiveCommand&lt;Unit, int&gt; var command = ReactiveCommand.Create(() =&gt; 42); command // IObservable&lt;int&gt; .Subscribe(Console.WriteLine); command .ThrownExceptions // IObservable&lt;Exception&gt; .Select(exception =&gt; exception.Message) // IObservable&lt;string&gt; .Subscribe(Console.WriteLine); command.Execute().Subscribe(); // Outputs: 42</span></span></code> </pre> <br><p>  Bis zu diesem Zeitpunkt haben wir mit <code>IObservable&lt;T&gt;</code> , wie mit einem Ereignis, das einen neuen Wert vom Typ <code>T</code> wenn sich der Status des beobachteten Objekts √§ndert.  Einfach ausgedr√ºckt ist <code>IObservable&lt;T&gt;</code> ein Strom von Ereignissen, eine zeitlich gestreckte Sammlung vom Typ <code>T</code> </p><br><p>  Nat√ºrlich k√∂nnen wir genauso einfach und nat√ºrlich mit Sammlungen arbeiten - wenn sich eine Sammlung √§ndert, k√∂nnen wir eine neue Sammlung mit ge√§nderten Elementen ver√∂ffentlichen.  In diesem Fall w√§re der ver√∂ffentlichte Wert vom Typ <code>IEnumerable&lt;T&gt;</code> oder spezialisierter, und der beobachtbare Stream selbst w√§re vom Typ <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> .  Wie ein kritisch denkender Leser jedoch richtig feststellt, ist dies mit kritischen Leistungsproblemen behaftet, insbesondere wenn unsere Sammlung nicht ein Dutzend Elemente enth√§lt, sondern hundert oder sogar einige Tausend! </p><br><h1 id="introduction-to-dynamicdata">  Einf√ºhrung in DynamicData </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DynamicData</a> ist eine Bibliothek, mit der Sie die Leistung reaktiver Erweiterungen bei der Arbeit mit Sammlungen nutzen k√∂nnen.  Rx ist extrem leistungsf√§hig, bietet jedoch <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">keine</a> Unterst√ºtzung bei der Verwaltung von Sammlungen, und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DynamicData</a> behebt dies.  In den meisten Anwendungen m√ºssen Sammlungen dynamisch aktualisiert werden. In der Regel wird eine Sammlung beim Start der Anwendung mit Elementen gef√ºllt. Anschlie√üend wird die Sammlung asynchron aktualisiert, um Informationen mit einem Server oder einer Datenbank zu synchronisieren.  Moderne Anwendungen sind recht komplex und es ist h√§ufig erforderlich, Projektionen von Sammlungen zu erstellen - Elemente filtern, transformieren oder sortieren.  DynamicData wurde entwickelt, um den unglaublich komplexen Code zu beseitigen, den wir zur Verwaltung sich dynamisch √§ndernder Datens√§tze ben√∂tigen w√ºrden.  Das Tool wird aktiv weiterentwickelt und verfeinert. Mittlerweile werden mehr als 60 Bediener f√ºr die Arbeit mit Sammlungen unterst√ºtzt. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/hn/7j/v3/hn7jv3fv1qgfxlhqrd9g6dokkao.gif"></a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DynamicData</a> ist keine alternative Implementierung von <code>ObservableCollection&lt;T&gt;</code> .  Die Architektur von DynamicData basiert haupts√§chlich auf dom√§nengesteuerten Programmierkonzepten.  Die Nutzungsideologie basiert auf der Tatsache, dass Sie eine bestimmte Datenquelle steuern, eine Sammlung, auf die der Code, der f√ºr die Synchronisierung und Mutation von Daten verantwortlich ist, Zugriff hat.  Als N√§chstes wenden Sie eine Reihe von Operatoren auf die Datenquelle an. Mithilfe dieser Operatoren k√∂nnen Sie die Daten deklarativ transformieren, ohne andere Sammlungen manuell erstellen und √§ndern zu m√ºssen.  Tats√§chlich trennen Sie mit DynamicData Lese- und Schreibvorg√§nge und k√∂nnen nur reaktiv lesen. Daher bleiben die geerbten Sammlungen immer mit der Quelle synchronisiert. </p><br><p>  Anstelle des klassischen <code>IObservable&lt;T&gt;</code> definiert DynamicData Operationen f√ºr <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> und <code>IObservable&lt;IChangeSet&lt;TValue, TKey&gt;&gt;</code> , wobei <code>IChangeSet</code> ein <code>IChangeSet</code> ist, der Informationen √ºber die √Ñnderung der Sammlung einschlie√ülich der Art der √Ñnderung enth√§lt und die betroffenen Elemente.  Dieser Ansatz kann die Leistung des Codes f√ºr die Arbeit mit Sammlungen, die auf reaktive Weise geschrieben wurden, erheblich verbessern.  Sie k√∂nnen <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> in <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> , wenn auf alle Elemente einer Sammlung <code>IObservable&lt;IEnumerable&lt;T&gt;&gt;</code> muss.  Wenn dies schwierig klingt - keine Sorge, die folgenden Codebeispiele machen alles klar! </p><br><h1 id="dynamicdata-in-action">  Dynamische Daten in Aktion </h1><br><p>  Schauen wir uns einige Beispiele an, um besser zu verstehen, wie DynamicData funktioniert, wie es sich von System unterscheidet. Reaktiv und welche Aufgaben gew√∂hnliche Entwickler von GUI-Software l√∂sen k√∂nnen.  Beginnen wir mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einem umfassenden Beispiel, das auf GitHub ver√∂ffentlicht wurde</a> .  In diesem Beispiel lautet die Datenquelle <code>SourceCache&lt;Trade, long&gt;</code> enth√§lt eine Sammlung von Transaktionen.  Ziel ist es, nur aktive Transaktionen anzuzeigen, Modelle in Proxy-Objekte umzuwandeln und die Sammlung zu sortieren. </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// The default collection from the System.Collections.ObjectModel // namespace, to which we bind XAML UI controls. ReadOnlyObservableCollection&lt;TradeProxy&gt; list; // The mutable data source, containing the list of transactions. // We can use Add, Remove, Insert and similar methods on it. var source = new SourceCache&lt;Trade, long&gt;(trade =&gt; trade.Id); var cancellation = source // Here we transform the data source to an observable change set. .Connect() // Now we have IObservable&lt;IChangeSet&lt;Trade, long&gt;&gt; here. // Filter only active transactions. .Filter(trade =&gt; trade.Status == TradeStatus.Live) // Transform the models into proxy objects. .Transform(trade =&gt; new TradeProxy(trade)) // No we have IObservable&lt;IChangeSet&lt;TrandeProxy, long&gt;&gt; // Order the trade proxies by timestamp. .Sort(SortExpressionComparer&lt;TradeProxy&gt; .Descending(trade =&gt; trade.Timestamp)) // Use the dispatcher scheduler to update the GUI. .ObserveOnDispatcher() // Bind the sorted objects to the collection from the // System.Collections.ObjectModel namespace. .Bind(out list) // Ensure that when deleting elements from the // collections, the resources will get disposed. .DisposeMany() .Subscribe();</span></span></code> </pre> <br><p>  Im obigen Beispiel √§ndert sich beim √Ñndern von <code>SourceCache</code> , der die Datenquelle darstellt, auch <code>SourceCache</code> entsprechend.  Gleichzeitig wird beim Entfernen von Elementen aus der Sammlung die <code>Dispose</code> Methode aufgerufen. Die Sammlung wird immer nur √ºber den GUI-Thread aktualisiert und bleibt sortiert und gefiltert.  Cool, jetzt haben wir keinen <code>Dispatcher.Invoke</code> Rufen Sie Anrufe auf und der Code ist einfach und lesbar! </p><br><h1 id="data-sources-sourcelist-and-sourcecache">  Datenquellen.  SourceList und SourceCache </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DynamicData</a> bietet zwei spezialisierte Sammlungen, die als ver√§nderbare Datenquelle verwendet werden k√∂nnen.  Diese Sammlungen sind <code>SourceList&lt;TObject&gt;</code> und <code>SourceCache&lt;TObject, TKey&gt;</code> .  Es wird empfohlen, <code>SourceCache</code> zu verwenden, wenn <code>TObject</code> einen eindeutigen Schl√ºssel hat, andernfalls <code>SourceList</code> .  Diese Objekte bieten die f√ºr .NET-Entwickler bekannte API f√ºr die Sammlungsverwaltung - Methoden wie <code>Add</code> , <code>Remove</code> , <code>Insert</code> .  Verwenden Sie den Operator <code>.Connect()</code> um Datenquellen in <code>IObservable&lt;IChangeSet&lt;T&gt;&gt;</code> oder in <code>IObservable&lt;IChangeSet&lt;T, TKey&gt;&gt;</code> <code>.Connect()</code> .  Wenn Sie beispielsweise √ºber einen Dienst verf√ºgen, der eine Sammlung von Elementen im Hintergrund regelm√§√üig aktualisiert, k√∂nnen Sie die Liste dieser Elemente ohne <code>Dispatcher.Invoke</code> und √§hnlichen Code auf einfache Weise mit der GUI synchronisieren: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BackgroundService</span></span> : <span class="hljs-title"><span class="hljs-title">IBackgroundService</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Declare the mutable data source containing trades. private readonly SourceList&lt;Trade&gt; _trades; // Expose the observable change set to the outside world. // If we have more than one subscriber, it is recommended // to use the Publish() operator from reactive extensions. public IObservable&lt;IChangeSet&lt;Trade&gt;&gt; Connect() =&gt; _trades.Connect(); public BackgroundService() { _trades = new SourceList&lt;Trade&gt;(); _trades.Add(new Trade()); // Mutate the source list! // Even from the background thread. } }</span></span></code> </pre> <br><p>  Mithilfe der leistungsstarken DynamicData-Operatoren k√∂nnen wir <code>IObservable&lt;IChangeSet&lt;Trade&gt;&gt;</code> in <code>IObservable&lt;IChangeSet&lt;Trade&gt;&gt;</code> , die in unserem Ansichtsmodell deklariert ist. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TradesViewModel</span></span> : <span class="hljs-title"><span class="hljs-title">ReactiveObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> ReadOnlyObservableCollection&lt;TradeVm&gt; _trades; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ReadOnlyObservableCollection&lt;TradeVm&gt; Trades =&gt; _trades; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TradesViewModel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IBackgroundService background</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Connect to the data source, transform elements, bind // them to the read-only observable collection. background.Connect() .Transform(x =&gt; new TradeVm(x)) .ObserveOn(RxApp.MainThreadScheduler) .Bind(out _trades) .DisposeMany() .Subscribe(); } }</span></span></code> </pre> <br><p>  Zus√§tzlich zu den Operatoren <code>Transform</code> , <code>Filter</code> und <code>Sort</code> unterst√ºtzt DynamicData Gruppierung, logische Operationen, Sammlungsreduzierung, Verwendung von Aggregatfunktionen, Eliminierung identischer Elemente, Elementz√§hlung und sogar Virtualisierung auf Ansichtsmodellebene.  Weitere Informationen zu allen Operatoren finden Sie in <a href="">der README-Datei des Projekts auf GitHub</a> . </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/jy/6-/4a/jy6-4azw__6rou9alucffpjhkrq.gif"></a> <br><br>  Abgesehen von <code>SourceList</code> und <code>SourceCache</code> die DynamicData-Bibliothek eine Single-Threaded-Implementierung f√ºr ver√§nderbare Sammlungen - <code>ObservableCollectionExtended</code> .  Um zwei Sammlungen in Ihrem Ansichtsmodell zu synchronisieren, deklarieren Sie eine als <code>ObservableCollectionExtended</code> und die andere als <code>ReadOnlyObservableCollection</code> und verwenden Sie dann den Operator <code>ToObservableChangeSet</code> , der fast dasselbe wie Connect <code>ToObservableChangeSet</code> , jedoch mit <code>ObservableCollection</code> . </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// Declare the derived collection. ReadOnlyObservableCollection&lt;TradeVm&gt; _derived; // Declare and initialize the source collection. var source = new ObservableCollectionExtended&lt;Trade&gt;(); source.ToObservableChangeSet(trade =&gt; trade.Key) .Transform(trade =&gt; new TradeProxy(trade)) .Filter(proxy =&gt; proxy.IsChecked) .Bind(out _derived) .Subscribe();</span></span></code> </pre> <br><p>  DynamicData unterst√ºtzt auch die √Ñnderungsverfolgung in Klassen, die die <code>INotifyPropertyChanged</code> Schnittstelle implementieren.  Wenn Sie beispielsweise bei jeder √Ñnderung einer Eigenschaft Benachrichtigungen erhalten m√∂chten, verwenden Sie den Operator <code>AutoRefresh</code> und √ºbergeben Sie die erforderliche Eigenschaftsauswahl.  <code>AutoRefresh</code> und anderen DynamicData-Operatoren k√∂nnen Sie m√ºhelos eine gro√üe Anzahl von Formularen und verschachtelten Formularen √ºberpr√ºfen, die auf dem Bildschirm angezeigt werden! </p><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// IObservable&lt;bool&gt; var isValid = databases .ToObservableChangeSet() // Subscribe only to IsValid property changes. .AutoRefresh(database =&gt; database.IsValid) // Materialize the collection. .ToCollection() // Determine if all forms are valid. .Select(x =&gt; x.All(y =&gt; y.IsValid)); // If ReactiveUI is used, you can transform the // IObservable&lt;bool&gt; variable to a property declared // as ObservableAsPropertyHelper&lt;bool&gt;, eg IsValid. _isValid = isValid .ObserveOn(RxApp.MainThreadScheduler) .ToProperty(this, x =&gt; x.IsValid);</span></span></code> </pre> <br><p>  Mit der DynamicData-Funktionalit√§t k√∂nnen Sie komplexe Benutzeroberfl√§chen erstellen. Dies ist besonders relevant f√ºr Systeme, die eine gro√üe Datenmenge in Echtzeit anzeigen, z. B. Instant Messaging-Apps und √úberwachungssysteme. </p><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/98/nh/ws/98nhws7gl4yzk8kgcovbpvvozoi.gif"></a> <br><br></p><br><h1 id="conclusion">  Fazit </h1><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ReactiveX</a> ist ein leistungsstarkes Tool, mit dem Sie mit Ereignisstr√∂men und der Benutzeroberfl√§che arbeiten, tragbaren und wartbaren Code schreiben und komplexe Aufgaben auf einfache und elegante Weise l√∂sen k√∂nnen.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Mit ReactiveUI</a> k√∂nnen .NET-Entwickler reaktive Erweiterungen mithilfe der MVVM-Architektur mit reaktiven Implementierungen von <code>INotifyPropertyChanged</code> und <code>ICommand</code> in ihre Projekte <code>ICommand</code> , w√§hrend DynamicData das Sammlungsmanagement durch die Implementierung von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><code>INotifyCollectionChanged</code></a> und die Funktionen reaktiver Erweiterungen mit Schwerpunkt auf Leistung erweitert. </p><br><p>  ReactiveUI- und DynamicData-Bibliotheken sind vollst√§ndig kompatibel mit allen GUI-Frameworks auf der .NET-Plattform, einschlie√ülich Windows Presentation Foundation, Universal Windows Platform, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Avalonia</a> , Xamarin.Android, Xamarin Forms und Xamarin iOS.  Sie k√∂nnen DynamicData auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der entsprechenden Seite der ReactiveUI-Dokumentation</a> studieren.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Machen Sie</a> sich auch mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DynamicData Snippets-</a> Projekt vertraut, das Codebeispiele f√ºr fast alles enth√§lt, was Sie m√∂glicherweise ben√∂tigen. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454074/">https://habr.com/ru/post/de454074/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454062/index.html">Unternehmenstelefon - wie ein Schweizer Messer: f√ºr Inventar, Chat, Supportanrufe und Anfragen</a></li>
<li><a href="../de454064/index.html">Die unerz√§hlte Geschichte der KI</a></li>
<li><a href="../de454066/index.html">So beenden Sie das Vergessen von Indizes und √ºberpr√ºfen den Ausf√ºhrungsplan in Tests</a></li>
<li><a href="../de454070/index.html">Ein Monorad f√ºr den Pendelverkehr w√§hlen</a></li>
<li><a href="../de454072/index.html">F√ºnf gr√∂√üte Beispiele f√ºr L√ºgen in Bezug auf 5G</a></li>
<li><a href="../de454076/index.html">DotNext 2019 Piter: kleiner Bericht</a></li>
<li><a href="../de454078/index.html">"Mobile Inhalte" kostenlos, ohne SMS und Registrierung. Details zum Megaphonbetrug</a></li>
<li><a href="../de454082/index.html">Plastikwellen: √∂kologische Katastrophe der Ozeane</a></li>
<li><a href="../de454084/index.html">Live-Richtlinien - MDX und andere Frameworks</a></li>
<li><a href="../de454086/index.html">Woran hat sich RIT ++ 2019 erinnert?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>