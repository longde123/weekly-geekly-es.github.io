<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üõÄüèΩ ‚õ¥Ô∏è ‚ô®Ô∏è Corda: Kotlin ‚õΩÔ∏è üë®üèæ‚Äçüîß üïô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando algu√©m olha para o c√≥digo Corda , imediatamente percebe que ele est√° escrito no Kotlin - a nova linguagem de programa√ß√£o do JetBrains, que pode...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Corda: Kotlin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422549/"><p>  Quando algu√©m olha para o c√≥digo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Corda</a> , imediatamente percebe que ele est√° escrito no Kotlin - a nova linguagem de programa√ß√£o do JetBrains, que pode ser compilada para JVM e Javascript.  Foi uma escolha incomum e, neste artigo, quero compartilhar alguns motivos para essa decis√£o e a experi√™ncia do nosso "ano em produ√ß√£o da Kotlin". </p><a name="habracut"></a><br><h3 id="pochemu-kotlin">  Por que Kotlin? </h3><br><p>  Esta solu√ß√£o pode ser dividida em duas partes: </p><br><ol><li>  Qual plataforma usar?  JVM, .NET, N√≥, Python / Ruby, Go, Haskell ou algo compilado (em c√≥digo de m√°quina)? </li><li>  Qual idioma usar se voc√™ escolher a JVM?  Java?  Se n√£o, ent√£o por qu√™?  E se n√£o, ent√£o o que mais: Scala, Ceil√£o, Clojure, Kotlin, Python, Ruby, Javascript ou Haskell (porque todos eles t√™m uma implementa√ß√£o para JVM). </li></ol><br><p> Os motivos para a escolha da JVM como plataforma s√£o bem conhecidos no ambiente de aplicativos corporativos e h√° pouco motivo para isso.  Basta dizer que, se voc√™ precisar de um tempo de execu√ß√£o escal√°vel, seguro para threads e de plataforma cruzada com <em>coleta de lixo</em> e com muitas bibliotecas bem documentadas que resolvem problemas b√°sicos de neg√≥cios, a escolha ser√° reduzida apenas para JVM e .NET. </p><br><p>  No in√≠cio dos trabalhos em Corda, o projeto n√£o tinha nome e era dif√≠cil imaginar que no futuro ele se tornaria um produto.  De fato, quando o projeto, que se tornou Corda, come√ßou em dezembro de 2015 (no meu primeiro dia de trabalho), n√£o havia nenhum plano para criar um novo sistema corporativo de contabilidade distribu√≠da.  Corda come√ßou como um conjunto de prot√≥tipos para explorar novas id√©ias e requisitos nos quais o <em>Grupo de Trabalho de Arquitetura</em> do Cons√≥rcio estava interessado, especialmente aqueles relacionados √† visibilidade limitada dos dados e ao modelo de dados que fornece a escalabilidade do "conjunto de matrizes de sa√≠da transacional UTXO" juntamente com a programabilidade dos contratos inteligentes imperativos da Ethereum em geral. </p><br><p>  Devido ao fato de n√£o estar claro se esses prot√≥tipos se transformariam em algo ou simplesmente serviriam de informa√ß√£o para outros produtos no mercado, enfrentamos uma escolha dif√≠cil.  Por um lado, quer√≠amos explorar r√°pida e produtivamente algoritmos e estruturas de dados.  Por outro lado, deve haver uma oportunidade potencial para criar um grande produto corporativo e contratar pessoas rapidamente para ele. </p><br><p>  Java definitivamente atendeu a esses requisitos, mas a falta de recursos modernos na linguagem reduz significativamente a produtividade e, mais implicitamente, o moral dos desenvolvedores. </p><br><p>  A digita√ß√£o din√¢mica n√£o foi considerada - os benef√≠cios da corre√ß√£o, das ferramentas de desenvolvimento e do desempenho fornecidos pela digita√ß√£o est√°tica s√£o grandes demais para serem negligenciados. </p><br><p>  Idiomas fundamentalmente diferentes dos mais populares tamb√©m n√£o foram considerados, porque  quer√≠amos contratar especialistas financeiros.  E, embora <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">seja inteiramente poss√≠vel</a> criar uma equipe em torno de um idioma como Haskell, encontrar uma pessoa com s√©ria experi√™ncia banc√°ria e idiomas pregui√ßosos (pregui√ßosos) puros (funcionais) que moram aleatoriamente em Londres parecia arriscado.  Al√©m disso, a pr√≥pria natureza do produto implicava que nossos "usu√°rios" s√£o na verdade desenvolvedores de plugins e aplicativos que usam a plataforma, e n√£o faz sentido exigir que eles aprendam paradigmas e ferramentas completamente novos.  Nossa escolha de idioma n√£o deve limitar muito os usu√°rios. </p><br><p>  Como resultado, esses requisitos nos deixaram com Kotlin, Scala e Ceil√£o.  Essas l√≠nguas s√£o bastante semelhantes e bastante interessantes.  Escolhemos o Kotlin pelos seguintes motivos: </p><br><ul><li>  Integra√ß√£o quase <em>perfeita</em> com Java <br><ul><li>  Em particular, os programas Kotlin usam uma vers√£o aprimorada (aprimorada pelo compilador) das cole√ß√µes JDK padr√£o, o que garante que n√£o haja problemas de integra√ß√£o devido ao uso de outras bibliotecas de cole√ß√µes.  N√≥s transmitimos e recebemos cole√ß√µes <em>de</em> e <em>para</em> bibliotecas Java em todos os lugares, por isso √© importante que isso n√£o cause problemas. </li><li> Nas classes Kotlin, obtemos uma API Java de apar√™ncia simples com os m√©todos <code>get</code> / <code>set</code> / <code>is</code> acordo com os tipos.  Nenhuma anota√ß√£o especial ou outras a√ß√µes s√£o necess√°rias para isso.  Pelo motivo que o Corda fornece uma API projetada para uso transparente pelos desenvolvedores Java, esta √© uma grande vantagem: do c√≥digo comum, voc√™ obt√©m uma API que n√£o pode ser distinguida da API Java com apenas algumas ressalvas (por exemplo, a intercepta√ß√£o expl√≠cita de exce√ß√µes verificadas do Java requer expl√≠citas anota√ß√£o de m√©todo) </li></ul></li><li>  A inclus√£o de pequenas fun√ß√µes como <code>map</code> / <code>filter</code> / <code>fold</code> / <code>groupBy</code> (em vez de esperar que a JVM fa√ßa isso sozinha) √© feita pelo compilador.  Infelizmente, o compilador JIT JVM, embora excelente em geral, n√£o elimina em todos os casos a sobrecarga do uso abundante de fun√ß√µes de ordem superior.  O uso do Kotlin compensa isso, al√©m de permitir que voc√™ controle a execu√ß√£o do programa a partir das fun√ß√µes lambda (nota: por exemplo, retorno <em>n√£o local</em> ).  Esse √© um dos recursos pouco conhecidos, mas ao mesmo tempo √∫teis.  Porque  em todos os lugares em que escrevemos c√≥digo com um estilo t√£o funcional, se ele foi mal traduzido em c√≥digo de m√°quina, poder√≠amos criar problemas de desempenho para n√≥s mesmos. </li><li>  Devido ao fato de o c√≥digo no Kotlin ser traduzido em um c√≥digo Java bastante semelhante, quase todas as ferramentas orientadas a Java existentes funcionam imediatamente.  Isso nem sempre √© verdade no caso de outros idiomas.  Por exemplo, o Quasar tem dificuldade em instrumentar o c√≥digo Scala porque precisa de anota√ß√µes de m√©todo, e Scala converte lambdas em m√©todos que n√£o podem ser anotados.  As lambdas Kotlin geralmente s√£o incorporadas (veja acima) ou podem ser anotadas de outra forma. </li><li>  Excelente documenta√ß√£o e uma pequena biblioteca padr√£o tornam o aprendizado muito r√°pido.  N√£o indicamos em nossas vagas a necessidade de experi√™ncia em Kotlin, e contratamos pessoas sem o seu conhecimento, dando de 1 a 3 <em>anos</em> ap√≥s os quais um novo membro da equipe conseguiu escrever c√≥digo idiom√°tico. </li><li>  Com base na sele√ß√£o de candidatos que nos entrevistaram, o IntelliJ √© o IDE mais popular (eles tinham uma escolha livre de ferramentas).  Entre as linguagens p√≥s-Java, o IntelliJ suporta o Kotlin, o melhor de tudo. </li><li>  Eu j√° tinha uma experi√™ncia satisfat√≥ria com ele e, portanto, tinha certeza de que seus novos colegas tamb√©m gostariam dele. </li></ul><br><p>  Se n√£o fosse o Kotlin, provavelmente escolhemos o Scala: o Kotlin √© amplamente inspirado por ele e ambos s√£o bons idiomas. </p><br><h3 id="nash-god-s-kotlin">  Nosso ano com Kotlin </h3><br><p>  Como √© - um ano para trabalhar com um novo idioma no contexto de um aplicativo corporativo? </p><br><p>  O mais importante foi, sem d√∫vida, ouvir dos colegas que eles realmente gostam de trabalhar com ele.  A linguagem de programa√ß√£o √© uma quest√£o pessoal para todos, e as pessoas geralmente t√™m uma opini√£o definida sobre esse assunto.  Se voc√™, como a primeira tarefa de um novo emprego, pedir a algu√©m para aprender um novo idioma e nem avisar sobre isso com anteced√™ncia, sempre haver√° o risco de um colega simplesmente odi√°-lo e consider√°-lo irritante em vez de aumentar sua produtividade.  Mas esse n√£o √© o caso. </p><br><p>  A seguir, est√£o alguns dos problemas que geralmente aparecem em um ambiente de desenvolvimento corporativo p√≥s-Java / C # que n√≥s mesmos encontramos: </p><br><ul><li>  <strong>O c√≥digo parece diferente dependendo de quem o escreveu.</strong>  Em geral, n√£o √© um problema t√£o grande.  Ao contr√°rio do Go, que requer um certo estilo de design, o c√≥digo Kotlin de diferentes autores pode parecer diferente.  Mas o IntelliJ possui uma ferramenta de formata√ß√£o que fornece um estilo de base de c√≥digo unificado.  √â mais limitado do que para Java, mas √© o suficiente.  Um problema mais sutil, especialmente com o c√≥digo Scala, √© a oposi√ß√£o do estilo de codifica√ß√£o Java-OOP e Haskell-FI.  O c√≥digo Scala que usa bibliotecas como o scalaz pode ser <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dif√≠cil de ler</a> para desenvolvedores que esperam ver <em>o</em> Java <em>aprimorado</em> .  Nesse debate, o Kotlin est√° firmemente do lado do Java <em>aprimorado</em> .  E, embora a programa√ß√£o funcional, de certa forma, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">possivelmente</a> em Kotlin, a comunidade (pelo menos por enquanto) n√£o tenha se dividido em campos.  Tivemos casos em que o c√≥digo foi escrito como se fosse Haskell, mas foi elaborado na revis√£o de c√≥digos. </li><li>  <strong>Bibliotecas</strong>  Em Corda, usamos mais de 50 bibliotecas de c√≥digo aberto e n√£o houve problemas com nenhuma.  Nunca escrevemos inv√≥lucros ou camadas de adaptadores.  Como sistemas de constru√ß√£o em projetos no Kotlin, Maven ou Gradle s√£o geralmente usados ‚Äã‚Äã- n√£o h√° substitui√ß√£o oficial espec√≠fica do Kotlin para essas ferramentas (embora a Gradle tenha introduzido o suporte ao Kotlin como uma nova linguagem de script!). </li><li>  <strong>DSL e SQL.</strong>  C # possui LINQ, Java possui JOOQ e Kotlin tem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Exposed</a> .  Essa √© uma das √°reas em que o Kotlin √© um pouco mais fraco que seus concorrentes - Exposed √© um √≥timo exemplo do uso dos recursos do Kotlin na cria√ß√£o de DSL, mas a pr√≥pria biblioteca possui uma API inst√°vel e √© um projeto secund√°rio.  JOOQ, √© claro, pode ser usado com Kotlin e, olhando para tr√°s, essa parece ser a op√ß√£o preferida. </li><li>  <strong>IDE / kit de ferramentas.</strong>  O plugin Kotlin para IntelliJ √©, √© claro, escrito por JetBrains e, em geral, √© √≥timo.  No entanto, √© menos sofisticado quando comparado ao suporte a Java.  Novos recursos do editor, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">uma dica de par√¢metro</a> , devem ser portados manualmente para o Kotlin, e o pr√≥prio suporte, como tal, geralmente fica atr√°s dos plug-ins Java muito mais antigos.  Tamb√©m observamos que o plug-in do IDE frequentemente notifica erros internos, embora a frequ√™ncia das exce√ß√µes do IDE tenha diminu√≠do significativamente durante o ano (e parece que elas n√£o afetam nada).  O uso de outras ferramentas tamb√©m n√£o causa problemas, porque  o que √© escrito para Java geralmente funciona <em>imediatamente</em> .  Uma exce√ß√£o s√£o as ferramentas que funcionam com o c√≥digo-fonte em vez do bytecode e que, obviamente, n√£o podem ser reutilizadas.  Com tudo isso, o compilador Kotlin e o plugin IDE n√£o s√£o t√£o depurados como no caso de Java, mesmo um ano ap√≥s o lan√ßamento da 1.0.  Provavelmente voc√™ nunca encontrar√° erros internos no <code>javac</code> , mas, embora muito raramente, ainda os vemos no Kotlin. </li><li>  <strong>Reconhecimento pelos usu√°rios.</strong>  Os usu√°rios de corda s√£o geralmente institui√ß√µes financeiras grandes e conservadoras.  Essas empresas preferem usar idiomas comuns e bem estabelecidos.  Kotlin, n√£o sendo um nem o outro, claramente causou alguma surpresa no momento em que come√ßamos.  "Por que Kotlin?"  - Essa √© uma pergunta que, no √∫ltimo ano, praticamente desapareceu, porque  as pessoas examinaram mais de perto e perceberam que isso n√£o √© t√£o arriscado quanto √© o caso das novas linguagens de programa√ß√£o.  Tamb√©m tentamos facilitar a ado√ß√£o, fornecendo exemplos de c√≥digo que demonstram que a cria√ß√£o de aplicativos usando a plataforma n√£o requer conhecimento da Kotlin.  Os resultados n√£o foram t√£o bem-sucedidos - muitos desenvolvedores que trabalham pela primeira vez com o Corda ainda come√ßam a explorar o Kotlin.  N√£o est√° muito claro se esse √© o resultado do fato de termos fornecido exemplos e documenta√ß√£o de uso insuficientemente orientados para Java ou se isso √© apenas uma boa desculpa para aprender uma nova ferramenta interessante.  Tamb√©m fomos ajudados pela crescente ado√ß√£o do Kotlin nos principais bancos de investimento.  Ao longo do ano passado, ouvimos de v√°rios membros do cons√≥rcio que suas equipes de desenvolvimento interno come√ßaram a examinar seriamente o Kotlin em busca de seus pr√≥prios produtos: geralmente impulsionados pela disponibilidade de ferramentas que convertem Java em Kotlin, que fornecem uma integra√ß√£o significativamente menos dolorosa √† base de c√≥digo existente. </li><li>  <strong>Suporte comercial.</strong>  O risco de usar linguagens pouco conhecidas √© que elas podem parar de desenvolver ou ter objetivos que n√£o s√£o consistentes com as necessidades formadas em torno do produto, a comunidade de usu√°rios (por exemplo, no caso de linguagens de pesquisa, o principal objetivo dos desenvolvedores √© criar artigos cient√≠ficos).  A principal raz√£o pela qual nos sentimos confiantes com a Kotlin √© que a JetBrains √© uma empresa est√°vel e lucrativa, que est√° no mercado h√° mais de 15 anos.  O JetBrains rapidamente come√ßou <em>a provar</em> sua pr√≥pria ferramenta, introduzindo o Kotlin no c√≥digo dos principais produtos.  Assim, o risco de rescis√£o do suporte √© bastante pequeno.  Al√©m disso, o JetBrains j√° √© uma empresa de meia idade e seu mercado-alvo (IDE e ferramentas de desenvolvedor) deixou de ser novo ou especialmente na moda, o que reduz o risco de uma poss√≠vel aquisi√ß√£o da empresa, o que pode levar a mudan√ßas estrat√©gicas imprevis√≠veis.  E, apesar da falta de um pacote de suporte comercial para Kotlin, na pr√°tica, a equipe corrige rapidamente problemas conhecidos.  No momento, o JetBrains pretende lan√ßar a pr√≥xima atualiza√ß√£o de idioma ap√≥s um ano desde o lan√ßamento 1.0.  Esse ciclo de lan√ßamento √© bastante semelhante ao ciclo de desenvolvimento no ambiente corporativo. </li></ul><br><h3 id="vyvody">  Conclus√µes? </h3><br><p>  N√£o lamentamos: a escolha de um idioma jovem no in√≠cio deste projeto foi, embora um risco, mas equilibrada.  Ele fez um bom trabalho para n√≥s e n√£o mudar√≠amos nossa escolha. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt422549/">https://habr.com/ru/post/pt422549/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt422539/index.html">Sobre a economia digital, inc√™ndios e Internet</a></li>
<li><a href="../pt422541/index.html">O drama dos buracos na Uni√£o se transformou em uma fantasmagoria</a></li>
<li><a href="../pt422543/index.html">Pense como um programador. Tutorial de solu√ß√£o de problemas</a></li>
<li><a href="../pt422545/index.html">Maneiras de sincronizar as guias do navegador</a></li>
<li><a href="../pt422547/index.html">Para eliminar Spectre e Meltdown, voc√™ pode precisar criar um tipo completamente novo de processador</a></li>
<li><a href="../pt422551/index.html">Como roubar dinheiro de um cart√£o sem contato e do Apple Pay</a></li>
<li><a href="../pt422553/index.html">Mega extens√£o oficial do navegador rouba compartilhamento de arquivos e criptomoeda</a></li>
<li><a href="../pt422555/index.html">Arquitetura multi-m√≥dulo Android. A a Z</a></li>
<li><a href="../pt422561/index.html">Como a Yandex aplicou a vis√£o computacional para melhorar a qualidade das transmiss√µes de v√≠deo. Tecnologia DeepHD</a></li>
<li><a href="../pt422565/index.html">Webinars de sexta-feira da Skillbox: tudo para programadores e designers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>