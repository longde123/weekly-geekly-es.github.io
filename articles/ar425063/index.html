<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐๐พ ๐๐ฟ ๐น ุชุฑุญูู ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฏูู ุชููู ุนู ุงูุนูู ูู postgresql ุจุงุณุชุฎุฏุงู django ููุซุงู ๐ค ๐จโ๐ค ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 


 ูุฑุญุจุง ูุง ูุจุฑ! 


 ุฃุฑูุฏ ูุดุงุฑูุฉ ุชุฌุฑุจุฉ ูุชุงุจุฉ ุนูููุงุช ุงูุชุฑุญูู ูู postgres ู django. ุณูููู ูุฐุง ุจุดูู ุฃุณุงุณู ุญูู postgres ุ django ูู ุฅุถุงูุฉ ุฌูุฏุฉ ููุง ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุฑุญูู ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฏูู ุชููู ุนู ุงูุนูู ูู postgresql ุจุงุณุชุฎุฏุงู django ููุซุงู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425063/" style=";text-align:right;direction:rtl"><h1 id="vvedenie" style=";text-align:right;direction:rtl">  ููุฏูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ! </p><br><p style=";text-align:right;direction:rtl">  ุฃุฑูุฏ ูุดุงุฑูุฉ ุชุฌุฑุจุฉ ูุชุงุจุฉ ุนูููุงุช ุงูุชุฑุญูู ูู postgres ู django.  ุณูููู ูุฐุง ุจุดูู ุฃุณุงุณู ุญูู postgres ุ django ูู ุฅุถุงูุฉ ุฌูุฏุฉ ููุง ุ ูุธุฑูุง ูุฃูู ูุญุชูู ุนูู ุชุฑุญูู ุชููุงุฆู ููุฎุทุท ุงูุจูุงูุงุช ูุชุบููุฑุงุช ุงููููุฐุฌ ุฎุงุฑุฌ ุงูุตูุฏูู ุ ุฃู ุฃูู ูุญุชูู ุนูู ูุงุฆูุฉ ูุงููุฉ ุฅูู ุญุฏ ูุง ูู ุนูููุงุช ุงูุนูู ูุชุบููุฑ ุงููุฎุทุท.  ูููู ุงุณุชุจุฏุงู Django ุจุฃู ุฅุทุงุฑ / ููุชุจุฉ ููุถูุฉ - ูู ุงููุฑุฌุญ ุฃู ุชููู ุงูููุงุฑุจุงุช ูุชุดุงุจูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุตู ููู ุฌุฆุช ุฅูู ูุฐุง ุ ูููู ุงูุขู ูุฑุงุกุฉ ุงููุซุงุฆู ุงูุชู ุงูุชูุทุชูุง ุนูู ููุฑุฉ ุฃูู ูุงู ูู ุงูุถุฑูุฑู ุงูููุงู ุจุฐูู ูู ููุช ุณุงุจู ุจูุฒูุฏ ูู ุงูุนูุงูุฉ ูุงููุนู ุ ูุฐูู ุฃูุตู ุจู ุจุดุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุจู ุฃู ุฃุฐูุจ ุฅูู ุฃุจุนุฏ ูู ุฐูู ุ ุงุณูุญูุง ูู ุฃู ุฃูุชุฑุถ ุงูุงูุชุฑุงุถุงุช ุงูุชุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุชูุณูู ููุทู ุงูุนูู ูุน ูุงุนุฏุฉ ุจูุงูุงุช ูุนุธู ุงูุชุทุจููุงุช ุฅูู 3 ุฃุฌุฒุงุก: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> ุนูููุงุช ุงูุชุฑุญูู - ุชุบููุฑ ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงูุฌุฏุงูู) ุ ูููุชุฑุถ ุฃููุง ูุฏูุฑูุง ุฏุงุฆููุง ูู ุณูุณูุฉ ูุญุงุฏุซุงุช ูุงุญุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ููุทู ุงูุฃุนูุงู - ุงูุนูู ุงููุจุงุดุฑ ูุน ุงูุจูุงูุงุช (ูู ุฌุฏุงูู ุงููุณุชุฎุฏู) ุ ูุนูู ุจููุณ ุงูุจูุงูุงุช ุจุดูู ูุณุชูุฑ ูุชูุงูุณู. </li><li style=";text-align:right;direction:rtl">  ุชุฑุญูู ุงูุจูุงูุงุช - ูุง ุชูู ุจุชุบููุฑ ูุฎุทุทุงุช ุงูุจูุงูุงุช ุ ููู ุชุนูู ุจุดูู ุฃุณุงุณู ูุซู ููุทู ุงูุฃุนูุงู ุ ุงูุชุฑุงุถููุง ุ ุนูุฏูุง ูุชุญุฏุซ ุนู ููุทู ุงูุฃุนูุงู ุ ุณูุนูู ุฃูุถูุง ุนูููุงุช ุชุฑุญูู ุงูุจูุงูุงุช. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุชุฑุฉ ุงูุชููู ูู ุญุงูุฉ ุนูุฏูุง ูููู ุฌุฒุก ูู ููุทู ุฃุนูุงููุง ุบูุฑ ูุชุงุญ / ููุน / ูุชู ุชุญูููู ููุชุฑุฉ ููุญูุธุฉ ูููุณุชุฎุฏู ุ ูููุชุฑุถ ุฃู ูุฐู ูู ุจุถุน ุซูุงู. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฃู ูููู ุบูุงุจ ููุช ุงูุชููู ุนู ุงูุนูู ุดุฑุทูุง ุญุฑุฌูุง ููุฃุนูุงู ุงูุชุฌุงุฑูุฉ ุ ูุงูุฐู ูุฌุจ ุงูุงูุชุฒุงู ุจู ูู ุฎูุงู ุฃู ุฌููุฏ. <a name="habracut"></a></p><br><h1 id="process-vykatki" style=";text-align:right;direction:rtl">  ุทุฑุญ ุงูุนูููุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุงููุชุทูุจุงุช ุงูุฑุฆูุณูุฉ ุนูุฏ ุทุฑุญูุง: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุฏููุง ูุงุนุฏุฉ ุนูู ูุงุญุฏุฉ. </li><li style=";text-align:right;direction:rtl">  ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุขูุงุช ุญูุซ ูุฏูุฑ ููุทู ุงูุฃุนูุงู. </li><li style=";text-align:right;direction:rtl">  ุงูุณูุงุฑุงุช ุฐุงุช ููุทู ุงูุฃุนูุงู ูุฎููุฉ ุฎูู ุงูููุงุฒู. </li><li style=";text-align:right;direction:rtl">  ูุนูู ุชุทุจูููุง ุฌูุฏูุง ูุจู ูุฃุซูุงุก ูุจุนุฏ ุงูุชุฑุญูู ุงููุชุฏุงูู (ูุนูู ุงูุฑูุฒ ุงููุฏูู ุจุดูู ุตุญูุญ ูุน ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุฏูู ูุงูุฌุฏูุฏ). </li><li style=";text-align:right;direction:rtl">  ูุนูู ุชุทุจูููุง ุฌูุฏูุง ูุจู ูุฃุซูุงุก ูุจุนุฏ ุชุญุฏูุซ ุงูุฑูุฒ ุนูู ุงูุณูุงุฑุงุช (ูุนูู ุงูุฑูุฒ ุงููุฏูู ูุงูุฌุฏูุฏ ุจุดูู ุตุญูุญ ูุน ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงูู). </li></ol><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุงู ุนุฏุฏ ูุจูุฑ ูู ุงูุชุบููุฑุงุช ูุชููู ุงูุทุฑุญ ุนู ุงุณุชููุงุก ูุฐู ุงูุดุฑูุท ุ ูุณูุชู ุชูุณููู ุฅูู ุงูุนุฏุฏ ุงููุทููุจ ูู ุนูููุงุช ุงูุทุฑุญ ุงูุตุบูุฑุฉ ุงูุชู ุชูุจู ูุฐู ุงูุดุฑูุท ุ ูุฅูุง ุณูููู ูุฏููุง ูุชุฑุฉ ุชููู. </p><br><p style=";text-align:right;direction:rtl">  ุทูุจ ุทุฑุญ ูุจุงุดุฑ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุบูุฑุช ุงููุฌุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุฅุฒุงูุฉ ุฌูุงุฒ ูุงุญุฏ ูู ุงูููุงุฒู ุ ูุชุญุฏูุซ ุงูุฌูุงุฒ ูุฅุนุงุฏุฉ ุชุดุบููู ุ ูุฅุนุงุฏุฉ ุงูุฌูุงุฒ ุฅูู ุงูููุงุฒู ุ </li><li style=";text-align:right;direction:rtl">  ูุฑุฑ ุงูุฎุทูุฉ ุงูุณุงุจูุฉ ูุชุญุฏูุซ ุฌููุน ุงูุณูุงุฑุงุช. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุนุฏ ุชุฑุชูุจ ุงูุนุฑุถ ุงูุนูุณู ููุงุฆููุง ูุญุฐู ุงูุฌุฏุงูู ูุงูุฃุนูุฏุฉ ูู ุงูุฌุฏูู ุ ุนูุฏูุง ูููู ุชููุงุฆููุง ุจุฅูุดุงุก ุนูููุงุช ุงูุชุฑุญูู ููููุง ูููุฎุทุท ุงูุฐู ุชู ุชุบููุฑู ูุงูุชุญูู ูู ูุฌูุฏ ุฌููุน ุนูููุงุช ุงูุชุฑุญูู ุฅูู CI: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฒุงูุฉ ุฌูุงุฒ ูุงุญุฏ ูู ุงูููุงุฒู ุ ูุชุญุฏูุซ ุงูุฌูุงุฒ ูุฅุนุงุฏุฉ ุชุดุบููู ุ ูุฅุนุงุฏุฉ ุงูุฌูุงุฒ ุฅูู ุงูููุงุฒู ุ </li><li style=";text-align:right;direction:rtl">  ูุฑุฑ ุงูุฎุทูุฉ ุงูุณุงุจูุฉ ูุชุญุฏูุซ ุฌููุน ุงูุณูุงุฑุงุช ุ </li><li style=";text-align:right;direction:rtl">  ุบูุฑุช ุงููุฌุฑุฉ. </li></ol><br><h1 id="teoriya" style=";text-align:right;direction:rtl">  ุงููุธุฑูุฉ </h1><br><p style=";text-align:right;direction:rtl">  Postgres ูู ูุงุนุฏุฉ ุจูุงูุงุช ููุชุงุฒุฉ ุ ูููููุง ูุชุงุจุฉ ุชุทุจูู ุณููุชุจ ูููุฑุฃ ููุณ ุงูุจูุงูุงุช ูู ูุฆุงุช ูุขูุงู ุงูุชุฏููุงุช ุ ููุน ุงุญุชูุงููุฉ ุนุงููุฉ ูููููุง ุงูุชุฃูุฏ ูู ุฃู ุจูุงูุงุชูุง ุณุชุจูู ุตุงูุญุฉ ููู ุชุชูู ุจุดูู ุนุงู ุ ACID ุงููุงูู.  ุชุทุจู Postgres ุนุฏุฉ ุขููุงุช ูุชุญููู ุฐูู ุ ุฅุญุฏุงูุง ูู ุงูุญุฌุจ. </p><br><p style=";text-align:right;direction:rtl">  ูุญุชูู Postgres ุนูู ุนุฏุฉ ุฃููุงุน ูู ุงูุฃููุงู ุ ููููู ุงูุนุซูุฑ ุนูู ูุฒูุฏ ูู ุงูุชูุงุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> ุ ูุฌุฒุก ูู ุงูููุถูุน ุ ุณูู ุฃุชุทุฑู ููุท ุฅูู ุฃููุงู ูุณุชูู ุงูุทุงููุฉ ูุงูุชุณุฌูู. </p><br><h2 id="blokirovki-na-urovne-tablicy" style=";text-align:right;direction:rtl">  ุฃููุงู ูุณุชูู ุงูุฌุฏูู </h2><br><p style=";text-align:right;direction:rtl">  ุนูู ูุณุชูู ุงูุฌุฏูู ุ ุชุญุชูู postgres ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุนุฏุฉ ุฃููุงุน ูู ุงูุฃููุงู</a> ุ ูุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ูู ุฃู ูุฏููู ุชุนุงุฑุถุงุช ุ ุฃู ุฃูู ูุง ูููู ุฅุฌุฑุงุก ุนูููุชูู ูุน ุฃููุงู ูุชุถุงุฑุจุฉ ูู ููุช ูุงุญุฏ: </p><br><table style=";text-align:right;direction:rtl"><thead><tr><th></th><th><code>ACCESS SHARE</code> </th> <th> <code>ROW SHARE</code> </th> <th> <code>ROW EXCLUSIVE</code> </th> <th> <code>SHARE UPDATE EXCLUSIVE</code> </th> <th> <code>SHARE</code> </th> <th> <code>SHARE ROW EXCLUSIVE</code> </th> <th> <code>EXCLUSIVE</code> </th> <th> <code>ACCESS EXCLUSIVE</code> </th> </tr></thead><tbody><tr><td> <code>ACCESS SHARE</code> </td> <td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>  X </td></tr><tr><td> <code>ROW SHARE</code> </td> <td></td><td></td><td></td><td></td><td></td><td></td><td>  X </td><td>  X </td></tr><tr><td> <code>ROW EXCLUSIVE</code> </td> <td></td><td></td><td></td><td></td><td>  X </td><td>  X </td><td>  X </td><td>  X </td></tr><tr><td> <code>SHARE UPDATE EXCLUSIVE</code> </td> <td></td><td></td><td></td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td></tr><tr><td> <code>SHARE</code> </td> <td></td><td></td><td>  X </td><td>  X </td><td></td><td>  X </td><td>  X </td><td>  X </td></tr><tr><td> <code>SHARE ROW EXCLUSIVE</code> </td> <td></td><td></td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td></tr><tr><td> <code>EXCLUSIVE</code> </td> <td></td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td></tr><tr><td> <code>ACCESS EXCLUSIVE</code> </td> <td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td><td>  X </td></tr></tbody></table><br><p style=";text-align:right;direction:rtl">  ุนูู ุณุจูู ุงููุซุงู ุ <code>ALTER TABLE tablename ADD COLUMN newcolumn integer</code> ู <code>SELECT COUNT(*) FROM tablename</code> ูุฌุจ ุฃู ูุชู ุชูููุฐููุง ุจุฏูุฉ ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู ุ ูุฅูุง ููู ูุชููู ูู ูุนุฑูุฉ ุงูุฃุนูุฏุฉ ุงูุชู ุณูุชู ุงูุฑุฌูุน ุฅูููุง ุฅูู <code>COUNT(*)</code> . </p><br><p style=";text-align:right;direction:rtl">  ูู ุนูููุงุช ุชุฑุญูู django (ุงููุงุฆูุฉ ุงููุงููุฉ ุฃุฏูุงู) ุ ุชูุฌุฏ ุงูุนูููุงุช ุงูุชุงููุฉ ูุฃููุงููุง ุงูููุงุจูุฉ: </p><br><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุญุฌุจ </th><th>  ุงูุนูููุงุช </th></tr></thead><tbody><tr><td> <code>ACCESS EXCLUSIVE</code> </td> <td>  <code>CREATE SEQUENCE</code> ุ <code>DROP SEQUENCE</code> ุ <code>CREATE TABLE</code> ุ <code>DROP TABLE</code> ุ <code>ALTER TABLE</code> ุ <code>DROP INDEX</code> </td></tr><tr><td> <code>SHARE</code> </td> <td> <code>CREATE INDEX</code> </td> </tr><tr><td> <code>SHARE UPDATE EXCLUSIVE</code> </td> <td>  <code>CREATE INDEX CONCURRENTLY</code> ุ <code>DROP INDEX CONCURRENTLY</code> ุ <code>ALTER TABLE VALIDATE CONSTRAINT</code> </td></tr></tbody></table><br><p style=";text-align:right;direction:rtl">  ูู ุจูู ุงูุชุนูููุงุช ุ ูุง ุชุญุชูู ุฌููุน <code>ALTER TABLE</code> ุนูู ุชุฃููู <code>ACCESS EXCLUSIVE</code> <code>ALTER TABLE</code> ุ ููุง ุฃู ุนูููุงุช ุชุฑุญูู django ูุง ุชุญุชูู ุนูู <code>CREATE INDEX CONCURRENTLY</code> ู <code>ALTER TABLE VALIDATE CONSTRAINT</code> ุ ูููู ุณุชููู ููุงู ุญุงุฌุฉ ุฅูููุง ูุจุฏูู ุฃูุซุฑ ุฃูุงููุง ููุนูููุงุช ุงูููุงุณูุฉ ุจุนุฏ ุฐูู ุจูููู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุชู ุชูููุฐ ุนูููุงุช ุงูุชุฑุญูู ูู ุณูุณูุฉ ูุญุงุฏุซุงุช ูุงุญุฏุฉ ุจุงูุชุชุงุจุน ุ ูุณูุจุฏู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ูุธุฑูุง ูุฃู ุงูุชุฑุญูู ูู ูุชุนุงุฑุถ ูุน ุชุฑุญูู ุขุฎุฑ ุ ูููู ููุทู ุฃุนูุงููุง ุณูุนูู ููุท ุฃุซูุงุก ุงูุชุฑุญูู ูุงูุชุนุงุฑุถ. </p><br><table style=";text-align:right;direction:rtl"><thead><tr><th>  ุญุฌุจ </th><th>  ุงูุนูููุงุช </th><th>  ูุชุนุงุฑุถ ูุน ุงูุฃููุงู </th><th>  ูุชุนุงุฑุถ ูุน ุงูุนูููุงุช </th></tr></thead><tbody><tr><td> <code>ACCESS SHARE</code> </td> <td> <code>SELECT</code> </td> <td> <code>ACCESS EXCLUSIVE</code> </td> <td>  <code>ALTER TABLE</code> <code>DROP INDEX</code> ุ <code>DROP INDEX</code> </td></tr><tr><td> <code>ROW SHARE</code> </td> <td> <code>SELECT FOR UPDATE</code> </td> <td>  <code>ACCESS EXCLUSIVE</code> <code>EXCLUSIVE</code> </td><td>  <code>ALTER TABLE</code> <code>DROP INDEX</code> ุ <code>DROP INDEX</code> </td></tr><tr><td> <code>ROW EXCLUSIVE</code> </td> <td>  <code>INSERT</code> ุ <code>UPDATE</code> ุ <code>DELETE</code> </td><td>  <code>ACCESS EXCLUSIVE</code> <code>EXCLUSIVE</code> <code>SHARE ROW EXCLUSIVE</code> <code>SHARE</code> </td><td>  <code>ALTER TABLE</code> <code>DROP INDEX</code> ุ <code>DROP INDEX</code> ุ <code>CREATE INDEX</code> </td></tr></tbody></table><br><p style=";text-align:right;direction:rtl">  ูููู ุชูุฎูุต ููุทุชูู ููุง: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุงู ุจุฏูู ูุน ููู ุฃุณูู ุ ููููู ุงุณุชุฎุฏุงูู ูู <code>CREATE INDEX</code> ู <code>CREATE INDEX CONCURRENTLY</code> . </li><li style=";text-align:right;direction:rtl">  ุชุชุนุงุฑุถ ูุนุธู ุนูููุงุช ุงูุชุฑุญูู ูุชุบููุฑ ูุฎุทุท ุงูุจูุงูุงุช ูุน ููุทู ุงูุฃุนูุงู ุ ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅููุง ุชุชุนุงุฑุถ ูุน <code>ACCESS EXCLUSIVE</code> ุ ุฃู ุฃููุง ูู ูุชููู ุญุชู ูู ุชุญุฏูุฏ <code>SELECT</code> ุฃุซูุงุก ุงูุถุบุท ุนูู ูุฐุง ุงูููู ููู ุงููุญุชูู ุฃู ูุชููู ุนู ุงูุนูู ููุง ุ ุจุงุณุชุซูุงุก ุงูุญุงูุฉ ุงูุชู ูุง ุชุนูู ูููุง ูุฐู ุงูุนูููุฉ ุนูู ุงูููุฑ ูุณูููู ููุช ุงูุชููู ุจุถุน ุซูุงู. </li></ol><br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูููู ููุงู ุฎูุงุฑ ุ ุฃู ูุชุฌูุจ ุฏุงุฆููุง <code>ACCESS EXCLUSIVE</code> ุ ุฃู ุฃููุง ููุดุฆ ููุญุงุช ุฌุฏูุฏุฉ ูููุณุฎ ุงูุจูุงูุงุช ููุงู - ุจุดูู ููุซูู ุ ูููู ููุชุฑุฉ ุทูููุฉ ููููุฉ ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ุ ุฃู ูุฌุนู <code>ACCESS EXCLUSIVE</code> ุฃุณุฑุน ููุช ูููู ููุตุฏุฑ ุชุญุฐูุฑุงุช ุฅุถุงููุฉ ุถุฏ ุงูุชุนุทู - ููู ุงููุญุชูู ุฃู ูููู ุฎุทุฑูุง ุ ููููู ุณุฑูุน. </p><br><h2 id="blokirovki-na-urovne-zapisi" style=";text-align:right;direction:rtl">  ุฃููุงู ููุงุณูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุนูู ูุณุชูู ุงูุชุณุฌูู ุ ููุงู ุฃูุถูุง ุฃููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://www.postgresql.org/docs/current/static/explicit-locking.html#LOCKING-ROWS</a> ุ ููู ุชุชุนุงุฑุถ ุฃูุถูุง ุ ูููููุง ุชุคุซุฑ ููุท ุนูู ููุทู ุฃุนูุงููุง: </p><br><table style=";text-align:right;direction:rtl"><thead><tr><th></th><th> <code>FOR KEY SHARE</code> </th> <th> <code>FOR SHARE</code> </th> <th> <code>FOR NO KEY UPDATE</code> </th> <th> <code>FOR UPDATE</code> </th> </tr></thead><tbody><tr><td> <code>FOR KEY SHARE</code> </td> <td></td><td></td><td></td><td>  X </td></tr><tr><td> <code>FOR SHARE</code> </td> <td></td><td></td><td>  X </td><td>  X </td></tr><tr><td> <code>FOR NO KEY UPDATE</code> </td> <td></td><td>  X </td><td>  X </td><td>  X </td></tr><tr><td> <code>FOR UPDATE</code> </td> <td>  X </td><td>  X </td><td>  X </td><td>  X </td></tr></tbody></table><br><p style=";text-align:right;direction:rtl">  ูุฐู ูู ุงูููุทุฉ ุงูุฑุฆูุณูุฉ ูู ุนูููุงุช ุชุฑุญูู ุงูุจูุงูุงุช ุ ุฃู ุฅุฐุง ูููุง ุจุชุญุฏูุซ ุงูุจูุงูุงุช ุนูู ุงูููุญุฉ ุจุฃููููุง ุ ูุฅู ุจููุฉ ููุทู ุงูุฃุนูุงู ุ ุงูุฐู ูููู ุจุชุญุฏูุซ ุงูุจูุงูุงุช ุ ุณููุชุธุฑ ุฃู ูุชู ุฅุตุฏุงุฑ ุงูููู ููุฏ ูุชุฌุงูุฒ ุญุฏ ููุช ุงูุชุนุทู ุ ูุจุงูุชุงูู ูู ุงูุฃูุถู ุฅุฌุฑุงุก ุชุญุฏูุซุงุช ูู ุฃุฌุฒุงุก ูุนูููุงุช ุชุฑุญูู ุงูุจูุงูุงุช.  ูู ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ุฃูุถูุง ุฃูู ุนูุฏ ุงุณุชุฎุฏุงู ุงุณุชุนูุงูุงุช sql ุฃูุซุฑ ุชุนููุฏูุง ูุชุฑุญูู ุงูุจูุงูุงุช ุ ูููู ุฃู ูุนูู ุงูุชูุณูู ุฅูู ุฃุฌุฒุงุก ุจุดูู ุฃุณุฑุน ุ ุญูุซ ููููู ุงุณุชุฎุฏุงู ุฎุทุฉ ูููุงุฑุณ ุฃูุถู. </p><br><h2 id="ocheryodnost-vypolneniya-operaciy" style=";text-align:right;direction:rtl">  ุชุฑุชูุจ ุงูุนูููุงุช </h2><br><p style=";text-align:right;direction:rtl">  ูุนุฑูุฉ ูููุฉ ุฃุฎุฑู ูู ููู ุณูุชู ุชูููุฐ ุงูุนูููุงุช ุ ููุชู ูููู ุชุฃุฎุฐ ุงูุฃููุงู ูุชุญุฑุฑูุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/getpro/habr/post_images/889/8f9/adb/8898f9adbf4eab0350517d07177b7257.png" alt="ุงูุตูุฑุฉ"></p><br><p style=";text-align:right;direction:rtl">  ููุง ููููู ุชุณููุท ุงูุถูุก ุนูู ุงูุนูุงุตุฑ ุงูุชุงููุฉ: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุช ุชูููุฐ ุงูุนูููุฉ - ููุชุฑุญูู ูู ููุช ุงูุงุญุชูุงุธ ุจุงูููู ุ ุฅุฐุง ุชู ุชุนููู ุงูููู ุงูุซููู ููุชุฑุฉ ุทูููุฉ ุ ูุณูููู ูุฏููุง ููุช ุชุนุทู ุ ุนูู ุณุจูู ุงููุซุงู ุ ูููู ุฃู ูููู ูุน <code>CREATE INDEX</code> ุฃู <code>ALTER TABLE ADD COLUMN SET DEFAULT</code> (ูู postgres 11 ูุฐุง ุฃูุถู). </li><li style=";text-align:right;direction:rtl">  ููุช ุงูุงูุชุธุงุฑ ูุฃููุงู ูุชุถุงุฑุจุฉ - ุฃู ุฃู ุงูุชุฑุญูู ููุชุธุฑ ุญุชู ุชูุฌุญ ุฌููุน ุงูุทูุจุงุช ุงููุชุถุงุฑุจุฉ ุ ููู ูุฐุง ุงูููุช ุณุชูุชุธุฑ ุงูุทูุจุงุช ุงูุฌุฏูุฏุฉ ุงูุชุฑุญูู ูุฏููุง ุ ูููู ุฃู ุชููู ุงูุทูุจุงุช ุงูุจุทูุฆุฉ ุดุฏูุฏุฉ ุงูุฎุทูุฑุฉ ููุง ุ ุฅูุง ุจุจุณุงุทุฉ ููุณุช ูุซุงููุฉ ุฃู ุชุญููููุฉ ุ ูุฐูู ูุง ููุจุบู ุฃู ุชููู ุงูุทูุจุงุช ุจุทูุฆุฉ ุฃุซูุงุก ุงููุฌุฑุฉ. </li><li style=";text-align:right;direction:rtl">  ุนุฏุฏ ุงูุทูุจุงุช ูู ุงูุซุงููุฉ - ุฅุฐุง ูุงู ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุทูุจุงุช ุงูุชู ุชุนูู ููุชุฑุฉ ุทูููุฉ ุ ุนูุฏูุง ูููู ุฃู ุชูุชูู ุงูุงุชุตุงูุงุช ุงููุฌุงููุฉ ุจุณุฑุนุฉ ูุจุฏูุงู ูู ููุงู ูุงุญุฏ ูุฒุนุฌ ุ ูููู ููุงุนุฏุฉ ุงูุจูุงูุงุช ุจุฃููููุง ุฃู ุชุชููู ุนู ุงูุนูู (ูู ูููู ููุงู ุณูู ุญุฏ ุงุชุตุงู ูููุณุชุฎุฏู ุงูุฎุงุฑู) ุ ููุง ุชุญุชุงุฌ ุฅูู ุชุฌูุจ ุงูุทูุจุงุช ุงูุจุทูุฆุฉ ุ ูุชูููู ุนุฏุฏ ุงูุทูุจุงุช ุนูู ุณุจูู ุงููุซุงู ุ ุงุจุฏุฃ ุนูููุงุช ุงูุชุฑุญูู ุฃุซูุงุก ุงูุญูู ุงูุฃุฏูู ุ ูุงูุตู ุงูููููุงุช ุงููููุฉ ุฅูู ุฎุฏูุงุช ูุฎุชููุฉ ุจุงุณุชุฎุฏุงู ููุงุนุฏ ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจูุง. </li><li style=";text-align:right;direction:rtl">  ููุงู ุงูุนุฏูุฏ ูู ุนูููุงุช ุงูุชุฑุญูู ูู ูุนุงููุฉ ูุงุญุฏุฉ - ููููุง ุฒุงุฏ ุนุฏุฏ ุงูุนูููุงุช ูู ูุนุงููุฉ ูุงุญุฏุฉ ุ ูููุง ุชู ุชุนููู ุงูููู ุงูุซููู ููุชุฑุฉ ุฃุทูู ุ ูุจุงูุชุงูู ูู ุงูุฃูุถู ูุตู ุงูุนูููุงุช ุงูุซูููุฉ ุ ุฃู ุนุฏู ูุฌูุฏ <code>ALTER TABLE VALIDATE CONSTRAINT</code> ุฃู ุชุฑุญูู ุงูุจูุงูุงุช ูู ูุนุงููุฉ ูุงุญุฏุฉ ุจุงุณุชุฎุฏุงู ููู ูุซูู. </li></ol><br><h2 id="taymauty" style=";text-align:right;direction:rtl">  ุงููููุงุช </h2><br><p style=";text-align:right;direction:rtl">  ูุญุชูู <code>lock_timeout</code> ุนูู ุฅุนุฏุงุฏุงุช ูุซู <code>lock_timeout</code> ู <code>statement_timeout</code> ุ ูุงูุชู ูููู ุฃู ุชุญูู ุจุฏุงูุฉ ุนูููุงุช ุงูุชุฑุญูู ุ ุณูุงุก ูู ุงูุชุฑุญูู ุงูููุชูุจ ุจุดูู ุณูุก ุฃู ูู ุงูุธุฑูู ุงูุณูุฆุฉ ุงูุชู ูููู ูููุง ุชุดุบูู ุงูุชุฑุญูู.  ูููู ุชุซุจูุชูุง ุนุงููููุง ูููุงุชุตุงู ุงูุญุงูู. </p><br><p style=";text-align:right;direction:rtl">  <code>SET lock_timeout TO '2s'</code> ุงูุชููู ุนู ุงูุนูู ุนูุฏ ุงูุชุธุงุฑ ุงูุทูุจุงุช / ุงููุนุงููุงุช ุงูุจุทูุฆุฉ ูุจู ุงูุชุฑุญูู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://www.postgresql.org/docs/current/static/runtime-config-client.html#GUC-LOCK-TIMEOUT</a> . </p><br><p style=";text-align:right;direction:rtl">  ุณูุชุฌูุจ <code>SET statement_timeout TO '2s'</code> ุงูุชููู ุนู ุงูุนูู ุนูุฏ ุจุฏุก ุงูุชุฑุญูู ุงูููุซู ุจููู ุซููู: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://www.postgresql.org/docs/current/static/runtime-config-client.html#GUC-STATEMENT-TIMEOUT</a> . </p><br><h2 id="dedloki" style=";text-align:right;direction:rtl">  ุฌููุฏ </h2><br><p style=";text-align:right;direction:rtl">  ุงูุฌููุฏ ูู ุนูููุงุช ุงูุชุฑุญูู ูุง ูุชุนูู ุจููุช ุงูุชููู ุนู ุงูุนูู ุ ููููู ููุณ ูุทูููุง ุนูุฏ ูุชุงุจุฉ ุงูุชุฑุญูู ุ ููู ูุนูู ุจุดูู ุฌูุฏ ูู ุจูุฆุฉ ุงุฎุชุจุงุฑ ุ ููููู ููุชุดู ุงูุฌููุฏ ุนูุฏ ุงูุชุฏุญุฑุฌ ูู ุงูููุชุฌ.  ูููู ุฃู ุชููู ุงููุตุงุฏุฑ ุงูุฑุฆูุณูุฉ ูููุดููุงุช ุนุฏุฏูุง ูุจูุฑูุง ูู ุงูุนูููุงุช ูู ูุนุงููุฉ ูุงุญุฏุฉ ูููุชุงุญูุง ุฎุงุฑุฌููุง ุ ูุธุฑูุง ูุฃููุง ุชุฎูู ุฃููุงููุง ูู ููุง ุงูุฌุฏูููู ุ ูุฐุง ูู ุงูุฃูุถู ูุตู ุนูููุงุช ุงูุชุฑุญูู ุ ูููุง ูุงู ุงูุฐุฑู ุฃูุถู. </p><br><h2 id="hranenie-zapisey" style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงูุชุณุฌููุงุช </h2><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฎุฒู</a> Postgres <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููููุง ูู ุฃููุงุน ูุฎุชููุฉ ุจุทุฑู ูุฎุชููุฉ</a> : ุฅุฐุง ุชู ุชุฎุฒูู ุงูุฃููุงุน ุจุทุฑู ูุฎุชููุฉ ุ ูุฅู ุงูุชุญููู ุจูููุง ุณูุชุทูุจ ุฅุนุงุฏุฉ ูุชุงุจุฉ ูุงููุฉ ูุฌููุน ุงูููู ุ ูุญุณู ุงูุญุธ ูุชู ุชุฎุฒูู ุจุนุถ ุงูุฃููุงุน ุจููุณ ุงูุทุฑููุฉ ููุง ุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ูุชุงุจุชูุง ุนูุฏ ุงูุชุบููุฑ.  ุนูู ุณุจูู ุงููุซุงู ุ ูุชู ุชุฎุฒูู ุงูุตููู ููุณูุง ุจุบุถ ุงููุธุฑ ุนู ุงูุญุฌู ุ ููู ูุชุทูุจ ุชูููู / ุฒูุงุฏุฉ ุจูุนุฏ ุตู ุฅุนุงุฏุฉ ุงููุชุงุจุฉ ุ ูููู ูุชุทูุจ ุงูุชูุงูุต ุงูุชุญูู ูู ุฃู ุฌููุน ุงูุตููู ูุง ุชุชุฌุงูุฒ ุญุฌููุง ุฃุตุบุฑ.  ูููู ุฃูุถูุง ุชุฎุฒูู ุฃููุงุน ุฃุฎุฑู ุจุทุฑููุฉ ููุงุซูุฉ ูููุง ุฎุตุงุฆุต ูุชุดุงุจูุฉ. </p><br><h2 id="multiversion-concurrency-control-mvcc" style=";text-align:right;direction:rtl">  ุงูุชุญูู ูู ุงูุชุฒุงูู ุงููุชุนุฏุฏ (MVCC) </h2><br><p style=";text-align:right;direction:rtl">  ููููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุชูุซูู</a> ุ ูุนุชูุฏ ุชูุงุณู postgres ุนูู ุชุญููู ุงูุจูุงูุงุช ุงููุชุนุฏุฏุฉ ุ ุฃู ุฃู ูู ูุนุงููุฉ ูุนูููุฉ ุชุฑู ูุณุฎุชูุง ุงูุฎุงุตุฉ ูู ุงูุจูุงูุงุช.  ุชุชูุงูู ูุฐู ุงูููุฒุฉ ูุน ุงููุตูู ุงูุชูุงูุณู ุจุดูู ูุซุงูู ุ ููุง ุฃููุง ุชุนุทู ุชุฃุซูุฑูุง ูุซูุฑูุง ููุงูุชูุงู ุนูุฏ ุชุบููุฑ ูุธุงู ูุซู ุฅุถุงูุฉ ุงูุฃุนูุฏุฉ ูุฅุฒุงูุชูุง ูุชุบููุฑ ุงููุธุงู ููุท ุ ุฅุฐุง ูู ุชูู ููุงู ุนูููุงุช ุฅุถุงููุฉ ูุชุบููุฑ ุงูุจูุงูุงุช ุฃู ุงูููุงุฑุณ ุฃู ุงูุซูุงุจุช ุ ูุจุนุฏ ุฐูู ุณุชูุดุฆ ุนูููุงุช ุงูุฅุฏุฑุงุฌ ูุงูุชุญุฏูุซ ุนูู ูุณุชูู ููุฎูุถ ุงูุณุฌูุงุช ูุน ุฌููุน ุงูููู ุงููุงุฒูุฉ ุ ุณูุคุฏู ุงูุญุฐู ุฅูู ูุถุน ุนูุงูุฉ ุนูู ุงูุณุฌู ุงูููุงุจู ุงููุญุฐูู.  VACUUM ุฃู AUTO VACUUM ูู ุงููุณุคููุฉ ุนู ุชูุธูู ุงูุญุทุงู ุงููุชุจูู. </p><br><h1 id="primer-django" style=";text-align:right;direction:rtl">  ูุซุงู ุฌุงูุบู </h1><br><p style=";text-align:right;direction:rtl">  ูุฏููุง ุงูุขู ููุฑุฉ ุนูุง ูุฏ ูุนุชูุฏ ุนููู ููุช ุงูุชููู ูููููุฉ ุชุฌูุจู ุ ูููู ูุจู ุชุทุจูู ุงููุนุฑูุฉ ุ ููููู ุฅููุงุก ูุธุฑุฉ ุนูู ูุง ููุฏูู django ูู ุงูุตูุฏูู ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/django/django/blob/2.1.2/django /db/backends/base/schema.py</a> ู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/django/django/blob/2.1.2/django/db/backends/postgresql/schema.py</a> ): </p><br><table style=";text-align:right;direction:rtl"><thead><tr><th></th><th>  ุงูุนูููุฉ </th></tr></thead><tbody><tr><td>  1 </td><td> <code>CREATE SEQUENCE</code> </td> </tr><tr><td>  2 </td><td> <code>DROP SEQUENCE</code> </td> </tr><tr><td>  3 </td><td> <code>CREATE TABLE</code> </td> </tr><tr><td>  4 </td><td> <code>DROP TABLE</code> </td> </tr><tr><td>  5 </td><td> <code>ALTER TABLE RENAME TO</code> </td> </tr><tr><td>  6 </td><td> <code>ALTER TABLE SET TABLESPACE</code> </td> </tr><tr><td>  7 </td><td> <code>ALTER TABLE ADD COLUMN [SET DEFAULT] [SET NOT NULL] [PRIMARY KEY] [UNIQUE]</code> </td> </tr><tr><td>  8 </td><td> <code>ALTER TABLE ALTER COLUMN [TYPE] [SET NOT NULL|DROP NOT NULL] [SET DEFAULT|DROP DEFAULT]</code> </td> </tr><tr><td>  9 </td><td> <code>ALTER TABLE DROP COLUMN</code> </td> </tr><tr><td>  10 </td><td> <code>ALTER TABLE RENAME COLUMN</code> </td> </tr><tr><td>  11 </td><td> <code>ALTER TABLE ADD CONSTRAINT CHECK</code> </td> </tr><tr><td>  12 </td><td> <code>ALTER TABLE DROP CONSTRAINT CHECK</code> </td> </tr><tr><td>  13 </td><td> <code>ALTER TABLE ADD CONSTRAINT FOREIGN KEY</code> </td> </tr><tr><td>  14 </td><td> <code>ALTER TABLE DROP CONSTRAINT FOREIGN KEY</code> </td> </tr><tr><td>  15 </td><td> <code>ALTER TABLE ADD CONSTRAINT PRIMARY KEY</code> </td> </tr><tr><td>  16 </td><td> <code>ALTER TABLE DROP CONSTRAINT PRIMARY KEY</code> </td> </tr><tr><td>  17 </td><td> <code>ALTER TABLE ADD CONSTRAINT UNIQUE</code> </td> </tr><tr><td>  18 </td><td> <code>ALTER TABLE DROP CONSTRAINT UNIQUE</code> </td> </tr><tr><td>  19 </td><td> <code>CREATE INDEX</code> </td> </tr><tr><td>  20 </td><td> <code>DROP INDEX</code> </td> </tr></tbody></table><br><p style=";text-align:right;direction:rtl">  ูุบุทู Django ุงุญุชูุงุฌุงุช ุงููุฌุฑุฉ ุงูุฎุงุตุฉ ุจู ุจุดูู ุฌูุฏ ููุบุงูุฉ ุ ูุงูุขู ูููููุง ููุงูุดุฉ ุงูุนูููุงุช ุงูุขููุฉ ูุงูุฎุทูุฑุฉ ูุนูููุงุช ุงูุชุฑุญูู ุฏูู ุชููู ุนู ุงูุนูู ุจูุนุฑูุชูุง. </p><br><p style=";text-align:right;direction:rtl">  ุณูุทูู ุนูู ุนูููุงุช ุงูุชุฑุญูู ุงูุฃูุซุฑ ุฃูุงููุง ูู ุฎูุงู <code>SHARE UPDATE EXCLUSIVE</code> locking or <code>ACCESS EXCLUSIVE</code> ุ ูุงูุชู ุชุนูู ุนูู ุงูููุฑ. <br>  ุณูุทูู ุนูู ุนูููุงุช ุงูุชุฑุญูู ุงูุฎุทูุฑุฉ ุจุงุณุชุฎุฏุงู ุฃููุงู <code>SHARE</code> ู <code>ACCESS EXCLUSIVE</code> ุ ูุงูุชู ุชุณุชุบุฑู ููุชูุง ุทูููุงู. </p><br><p style=";text-align:right;direction:rtl">  ุณุฃุชุฑู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุงุจุทูุง</a> ูููุฏูุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููุซุงุฆู</a> ููุฏููุง ูุน ุฃูุซูุฉ ุฑุงุฆุนุฉ. </p><br><h2 id="sozdanie-i-udalenie-tablicy" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุญุฐู ุฌุฏูู </h2><br><p style=";text-align:right;direction:rtl">  <code>CREATE SEQUENCE</code> ุ <code>DROP SEQUENCE</code> ุ <code>CREATE TABLE</code> ุ <code>DROP TABLE</code> ูููู ุชุณููุชู ุขูููุง ุ ูุฃู ููุทู ุงูุฃุนูุงู ุฅูุง ูู ูุนุฏ ูุนูู ูุน ุงูุฌุฏูู ุงูุฐู ุชู ุชุฑุญููู ุจุนุฏ ุงูุขู ุ ูุฅู ุณููู ุญุฐู ุฌุฏูู ุจุงุณุชุฎุฏุงู FOREIGN KEY ุณูููู ุจุนุฏ ุฐูู ุจูููู. </p><br><h2 id="tyazhelo-podderzhivaemye-operacii-na-rabochih-tablicah" style=";text-align:right;direction:rtl">  ุนูููุงุช ูุฑูุฉ ุงูุนูู ุงููุฏุนููุฉ ุจุดูู ูุจูุฑ </h2><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE RENAME TO</code> - ูุง ูููููู ุชุณููุชู ุจุฃูุงู ุ ูุฃูู ูู ุงูุตุนุจ ูุชุงุจุฉ ููุทู ูุนูู ูุน ูุซู ูุฐุง ุงูุฌุฏูู ูุจู ูุจุนุฏ ุงูุชุฑุญูู. </p><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE SET TABLESPACE</code> - ุบูุฑ ุขูู ุ ูุฃูู ูุญุฑู ุงูููุญุฉ ุฌุณุฏููุง ุ ููููู ุฃู ูุณุชุบุฑู ุฐูู ููุชูุง ุทูููุงู ุนูู ุญุฌู ูุจูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฅู ูุฐู ุงูุนูููุงุช ูุงุฏุฑุฉ ููุบุงูุฉ ุ ูุจุฏูู ููููู ุชูุฏูู ุฅูุดุงุก ุฌุฏูู ุฌุฏูุฏ ููุณุฎ ุงูุจูุงูุงุช ุฅููู. </p><br><h2 id="sozdanie-i-udalenie-kolonki" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุญุฐู ุงูุฃุนูุฏุฉ </h2><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE ADD COLUMN</code> ุ <code>ALTER TABLE DROP COLUMN</code> - ูููู ุฃู ูุทูู ุนููู ุขูููุง (ุงูุฅูุดุงุก ุจุฏูู ุงูุงูุชุฑุงุถู / ููุณ ูุงุฑุบูุง / ููุชุงุญ ุฃุณุงุณู / ูุฑูุฏ) ุ ูุฃู ููุทู ุงูุฃุนูุงู ุฅูุง ูู ูุนุฏ ูุนูู ูุน ุนููุฏ ุชู ุชุฑุญููู ุจุนุฏ ุงูุขู ุ ูุฅู ุณููู ุญุฐู ุนููุฏ ุจุงุณุชุฎุฏุงู ููุชุงุญ FOREIGN ุ ุณุชุฃุชู ุงูุซูุงุจุช ูุงูููุงุฑุณ ุงูุฃุฎุฑู ูุงุญููุง. </p><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE ADD COLUMN SET DEFAULT</code> ุ <code>ALTER TABLE ADD COLUMN SET NOT NULL</code> ุ <code>ALTER TABLE ADD COLUMN PRIMARY KEY</code> ุ <code>ALTER TABLE ADD COLUMN UNIQUE</code> - ุนูููุงุช ุบูุฑ ุขููุฉ ุ ูุฃููุง ุชุถูู ุนููุฏูุง ุ ุฏูู ุชุญุฑูุฑ ุงูุฃููุงู ุ ุชุญุฏูุซ ุงูุจูุงูุงุช ูุน ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ุฃู ุฅูุดุงุก ุจูู ูุจุฏุงุฆู ุ ุฃุนูุฏุฉ ูุงุจูุฉ ููุฅูุบุงุก ูุงููุฒูุฏ ูู ุงูุชุบููุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ุฃู <code>SET DEFAULT</code> ุงูุฃุณุฑุน ูู postgres 11 ุ ูููู ุงุนุชุจุงุฑู ุขูููุง ุ ูููู ูุง ูุตุจุญ ูููุฏูุง ุฌุฏูุง ูู django ุ ูุฃู django ูุณุชุฎุฏู <code>SET DEFAULT</code> ููุท ูููุก ุงูุนููุฏ ุซู ูุฌุนู <code>DROP DEFAULT</code> ุ ููู ุงููุงุตู ุงูุฒููู ุจูู ุงูุชุฑุญูู ูุชุญุฏูุซ ุงูุฃุฌูุฒุฉ ูุน ููุทู ุงูุฃุนูุงู ุ ูููู ุฅูุดุงุก ุงูุณุฌูุงุช ุงูุชู ูููู ูููุง ุงูุบูุงุจ ุงูุงูุชุฑุงุถู ุ ุฃู ุ ุซู ูู ููุณ ุ ุงูููุงู ุจุชุฑุญูู ุงูุจูุงูุงุช. </p><br><h2 id="tyazhelo-podderzhivaemye-operacii-na-rabochey-tablice" style=";text-align:right;direction:rtl">  ุงูุนูููุงุช ุงููุฏุนููุฉ ุจุดูู ูุจูุฑ ุนูู ูุฑูุฉ ุนูู </h2><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE RENAME COLUMN</code> - ูุง ูููููู ุฃูุถูุง ุชุณููุชู ุจุฃูุงู ุ ูุฃูู ูู ุงูุตุนุจ ูุชุงุจุฉ ููุทู ูุนูู ูุน ูุซู ูุฐุง ุงูุนููุฏ ูุจู ูุจุนุฏ ุงูุชุฑุญูู.  ุจุฏูุงู ูู ุฐูู ุ ูู ุชููู ูุฐู ุงูุนูููุฉ ูุชูุฑุฑุฉ ุฃูุถูุง ุ ุญูุซ ูููู ุงูุชุฑุงุญ ุจุฏูู ูุฅูุดุงุก ุนููุฏ ุฌุฏูุฏ ููุณุฎ ุงูุจูุงูุงุช ุฅููู. </p><br><h2 id="izmenenie-kolonki" style=";text-align:right;direction:rtl">  ุชุบููุฑ ุงูุนููุฏ </h2><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE ALTER COLUMN TYPE</code> - ูููู ุฃู ุชููู ุงูุนูููุฉ ุฎุทูุฑุฉ ูุขููุฉ.  ุขูู ุฅุฐุง ูุงู postgres ุจุชุบููุฑ ุงููุฎุทุท ููุท ุ ูุชู ุชุฎุฒูู ุงูุจูุงูุงุช ุจุงููุนู ุจุงูุชูุณูู ุงููุทููุจ ููู ุชุนุฏ ููุงู ุญุงุฌุฉ ุฅูู ุนูููุงุช ูุญุต ุฅุถุงููุฉ ููููุน ุ ุนูู ุณุจูู ุงููุซุงู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุชุจ ุงูุชุบููุฑ ูู <code>varchar(LESS)</code> ุฅูู <code>varchar(MORE)</code> ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุจ ุงูุชุบููุฑ ูู <code>varchar(ANY)</code> ุฅูู <code>text</code> ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุจ ุงูุชุบููุฑ ูู <code>numeric(LESS, SAME)</code> ุฅูู <code>numeric(MORE, SAME)</code> . </li></ul><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE ALTER COLUMN SET NOT NULL</code> ุฃูุฑ ุฎุทูุฑ ูุฃูู ููุฑ ุนุจุฑ ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุจุงูุฏุงุฎู ููุชุญูู ูู NULL ุ ูุญุณู ุงูุญุธ ูููู ุงุณุชุจุฏุงู ูุฐุง ุงูุจูุงุก ุจุขุฎุฑ <code>CHECK IS NOT NULL</code> .  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฅูู ุฃู ูุฐุง ุงูุงุณุชุจุฏุงู ุณูุคุฏู ุฅูู ูุฎุทุท ูุฎุชูู ุ ูููู ุจุฎุตุงุฆุต ูุชุทุงุจูุฉ. </p><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE ALTER COLUMN DROP NOT NULL</code> ุ <code>ALTER TABLE ALTER COLUMN SET DEFAULT</code> ุ <code>ALTER TABLE ALTER COLUMN DROP DEFAULT</code> - ุนูููุงุช ุขููุฉ. </p><br><h2 id="sozdanie-i-udalenie-indeksov-i-konstreyntov" style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุญุฐู ุงูููุงุฑุณ ูุงูุซูุงุจุช </h2><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE ADD CONSTRAINT CHECK</code> ู <code>ALTER TABLE ADD CONSTRAINT FOREIGN KEY</code> ุบูุฑ ุขูููู ุ ูููู ูููู <code>NOT VALID</code> ุซู <code>ALTER TABLE VALIDATE CONSTRAINT</code> . </p><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE ADD CONSTRAINT PRIMARY KEY</code> ู <code>ALTER TABLE ADD CONSTRAINT UNIQUE</code> ุบูุฑ ุขูููู ุ ูุฃููู ููุดุฆูู ููุฑุณูุง ูุฑูุฏูุง ุจุงูุฏุงุฎู ุ ูููู ููููู ุฅูุดุงุก ููุฑุณ ูุฑูุฏ ุจุงุณู <code>CONCURRENTLY</code> ุ ุซู ุฅูุดุงุก ุซุงุจุช ูุทุงุจู ุจุงุณุชุฎุฏุงู ููุฑุณ ุฌุงูุฒ ุนุจุฑ <code>USING INDEX</code> . </p><br><p style=";text-align:right;direction:rtl">  <code>CREATE INDEX</code> ูู ุนูููุฉ ุบูุฑ ุขููุฉ ุ ูููู ูููู ุฅูุดุงุก ููุฑุณ ุจุดูู <code>CONCURRENTLY</code> . </p><br><p style=";text-align:right;direction:rtl">  <code>ALTER TABLE DROP CONSTRAINT CHECK</code> ุ <code>ALTER TABLE DROP CONSTRAINT FOREIGN KEY</code> ุ <code>ALTER TABLE DROP CONSTRAINT PRIMARY KEY</code> ุ <code>ALTER TABLE DROP CONSTRAINT UNIQUE</code> ุ <code>DROP INDEX</code> - ุนูููุงุช ุขููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุฌุฏูุฑ ุจุงูุฐูุฑ ุฃู <code>ALTER TABLE ADD CONSTRAINT FOREIGN KEY</code> ู <code>ALTER TABLE DROP CONSTRAINT FOREIGN KEY</code> ุฌุฏูููู ูู ููุช ูุงุญุฏ. </p><br><h2 id="primenyaem-znaniya-v-django" style=";text-align:right;direction:rtl">  ุชุทุจูู ุงููุนุฑูุฉ ูู ุฌุงูุบู </h2><br><p style=";text-align:right;direction:rtl">  ูุฏู Django ุนูููุฉ ูู ุนูููุงุช ุงูุชุฑุญูู ูุชูููุฐ ุฃู SQL: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://docs.djangoproject.com/en/2.1/ref/migration-operations/#django.db.migrations.operations.RunSQL</a> .  ูู ุฎูุงูู ุ ููููู ุชุนููู ุงููููุงุช ุงููุงุฒูุฉ ูุชุทุจูู ุนูููุงุช ุจุฏููุฉ ูุนูููุงุช ุงูุชุฑุญูู ุ ูุน ุงูุฅุดุงุฑุฉ ุฅูู <code>state_operations</code> - ุงูุชุฑุญูู ุงูุฐู <code>state_operations</code> . </p><br><p style=";text-align:right;direction:rtl">  ูุนูู ูุฐุง ุจุดูู ุฌูุฏ ูุฑูุฒู ุ ุนูู ุงูุฑุบู ูู ุฃูู ูุชุทูุจ ูุชุงุจุฉ ุฅุถุงููุฉ ุ ูููู ููููู ุชุฑู ุงูุนูู ุงููุฐุฑ ุนูู ุฎูููุฉ ุฏูุณูุจู ุ ุนูู ุณุจูู ุงููุซุงู ุ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/tbicr/django-pg-zero-downtime-migrations/blob/master/django_zero_downtime_migrations_postgres_backend/schema</a> ูุฌูุน <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">.py</a> ุงูููุงุฑุณุงุช ุงูููุถุญุฉ ููุณุชุจุฏู ุงูุนูููุงุช ุบูุฑ ุงูุขููุฉ ุจูุธุฑุงุก ุขูููู ุ ูุณูุนูู ุฐูู ูุน ููุชุจุงุช ุงูุทุฑู ุงูุซุงูุซ. </p><br><h1 id="naposledok" style=";text-align:right;direction:rtl">  ูู ุงูููุงูุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุณูุญุช ูู ูุฐู ุงูููุงุฑุณุงุช ุจุงูุญุตูู ุนูู ูุฎุทุท ูุชุทุงุจู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ django ุฎุงุฑุฌ ููุทูุฉ ุงูุฌุฒุงุก ุ ุจุงุณุชุซูุงุก ุงุณุชุจุฏุงู <code>CHECK IS NOT NULL</code> ุจุฏูุงู ูู <code>NOT NULL</code> ูุจุนุถ ุฃุณูุงุก ุงูุจูุงุก (ุนูู ุณุจูู ุงููุซุงู ุ ูู <code>ALTER TABLE ADD COLUMN UNIQUE</code> ูุจุฏูู).  ูุฏ ูููู ููุงู ููุงุถูุฉ ุฃุฎุฑู ุชุชูุซู ูู ุนุฏู ูุฌูุฏ ูุนุงููุงุช ูุนูููุงุช ุชุฑุญูู ุจุฏููุฉ ุ ุฎุงุตุฉ ุญูุซ ุชุธูุฑ <code>CREATE INDEX CONCURRENTLY</code> ู <code>ALTER TABLE VALIDATE CONSTRAINT</code> . </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ุชุชุฌุงูุฒ postgres ุ ููุฏ ูููู ููุงู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฑุงุช ูุชุบููุฑ ูุฎุทุท ุงูุจูุงูุงุช ุ ููููู ุฃู ุชุชููุน ูู ุชุฑููุจุฉ ูู ุธู ุธุฑูู ูุญุฏุฏุฉ: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู jsonb ูุญู schamaless </li><li style=";text-align:right;direction:rtl">  ุงููุฑุตุฉ ููุฐูุงุจ ุฅูู ุงูุชููู </li><li style=";text-align:right;direction:rtl">  ุดุฑุท ุงูููุงู ุจุนูููุงุช ุงูุชุฑุญูู ุจุฏูู ููุช ุชุนุทู </li></ul><br><p style=";text-align:right;direction:rtl">  ุนูู ุฃู ุญุงู ุ ุขูู ุฃู ุชููู ุงููุงุฏุฉ ูููุฏุฉ ุฅูุง ูุฒูุงุฏุฉ ููุช ุงูุชุดุบูู ุฃู ูุชูุณูุน ุงููุนู. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar425063/">https://habr.com/ru/post/ar425063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar425053/index.html">SSR: ูุชู ูููุงุฐุง ูููุงุฐุง. ุนูู ูุซุงู Vue</a></li>
<li><a href="../ar425055/index.html">ุงูุณุนู Oculus</a></li>
<li><a href="../ar425057/index.html">ูุฑุถ ููุถู ููุชุนููู ูุฌููุน ุจุฑุงูุฌ GeekUniversity ูู GeekBrains ู Alfa Bank</a></li>
<li><a href="../ar425059/index.html">Hackathon ุฑูู 1 ูู Tinkoff.ru</a></li>
<li><a href="../ar425061/index.html">CodeRainbow: ุงูุชุนูู ูุงูุชูุซูู ุงูุชูุงุนูู</a></li>
<li><a href="../ar425069/index.html">ุงุฎุชุจุงุฑ ููุฏู ุนุฑุถ ุจุงุณุชุฎุฏุงู PromiseKit</a></li>
<li><a href="../ar425071/index.html">ููู ุชุญูู ุถุฏ ุชุฌุงูุฒ ุณุนุฉ ุงูููุฏุณ (ุนูู Cortex M)ุ</a></li>
<li><a href="../ar425073/index.html">ุฅูุดุงุก ูุณุชูุฏุน git ุณูู ุนูู OneDrive</a></li>
<li><a href="../ar425075/index.html">ุฑุคูุฉ ุงููุงูููุฉ: ุชุซุจูุช Google Cloud Vision ูุชููููู ูุงุณุชุฎุฏุงูู ูู PHP</a></li>
<li><a href="../ar425077/index.html">Kotlin ุชุญุช ุบุทุงุก ูุญุฑู ุงูุณูุงุฑุฉ - ุงูุธุฑ ุฑูุฒ ุงูุจุงูุช ุงููุชุฑุงูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>