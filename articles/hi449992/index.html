<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯжЙ ЁЯСитАНЁЯСйтАНЁЯСзтАНЁЯСз ЁЯСиЁЯП╝тАНЁЯдЭтАНЁЯСиЁЯП╗ NodeMCU рд╕рд░рд▓ рдЪрд╛рд▓рдХ рдореЙрдбрд▓ (рдПрд╕рдбреАрдПрдо) рд╢реЛрдХреЗрд╕: рдЧрддрд┐рд╢реАрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ ЁЯФж ЁЯХМ ЁЯЩМЁЯП┐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="NodeMCU рдПрдХ рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рдлрд░реНрдорд╡реЗрдпрд░ рд╣реИ , рдЬреЛ ESP8266 рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ ( ESP32 рд╕рдорд░реНрдерди рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд╣реИ) рдкрд░ Lua рджреБрднрд╛рд╖рд┐рдпрд╛ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред рд╕рднреА рдирд┐рдпрдорд┐рдд рд╣рд╛рд░реНрдбрд╡...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>NodeMCU рд╕рд░рд▓ рдЪрд╛рд▓рдХ рдореЙрдбрд▓ (рдПрд╕рдбреАрдПрдо) рд╢реЛрдХреЗрд╕: рдЧрддрд┐рд╢реАрд▓ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449992/"><p><img src="https://habrastorage.org/webt/45/dq/e8/45dqe8yvyxvpg_kcien-88xslei.jpeg" alt="рдЫрд╡рд┐"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">NodeMCU</a> рдПрдХ <em>рдЗрдВрдЯрд░реИрдХреНрдЯрд┐рд╡ рдлрд░реНрдорд╡реЗрдпрд░ рд╣реИ</em> , рдЬреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ESP8266</a> рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ESP32</a> рд╕рдорд░реНрдерди рд╡рд┐рдХрд╛рд╕ рдореЗрдВ рд╣реИ) рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Lua</a> рджреБрднрд╛рд╖рд┐рдпрд╛ рдЪрд▓рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рд╕рднреА рдирд┐рдпрдорд┐рдд рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рд╕рд╛рде, рдЗрд╕рдореЗрдВ рд╡рд╛рдИрдлрд╛рдИ рдореЙрдбреНрдпреВрд▓ рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">SPIFFS</a> рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реИред </p><br><p>  рдпрд╣ рдЖрд▓реЗрдЦ NodeMCU - sdm рдХреЗ рд▓рд┐рдП рдирдП рдореЙрдбреНрдпреВрд▓ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИред  рдПрд╕рдбреАрдПрдо рд╕рд░рд▓ рдЪрд╛рд▓рдХ рдореЙрдбрд▓ рдХреЗ рд▓рд┐рдП рдЦрдбрд╝рд╛ рд╣реИ рдФрд░ рдпрд╣ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП рдбрд┐рд╡рд╛рдЗрд╕-рдбреНрд░рд╛рдЗрд╡рд░ рдореЙрдбрд▓ рдЕрдореВрд░реНрддрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рд▓реЗрдЦ рдХреЗ рдкрд╣рд▓реЗ рднрд╛рдЧ рдореЗрдВ рд╣рдо рд╕реНрд╡рдпрдВ рдореЙрдбрд▓ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░реЗрдВрдЧреЗ рдФрд░ рджреВрд╕рд░реЗ рднрд╛рдЧ рдореЗрдВ рдХреБрдЫ рдХрдореЗрдВрдЯрд░реА рдХреЗ рд╕рд╛рде sdm рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдирд┐рд░реНрдорд┐рдд рд╡реЗрдм рдпреВрдЬрд░ рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рд╣реЛрдЧрд╛ред </p><a name="habracut"></a><br><h1 id="driver-model-basics">  рдЪрд╛рд▓рдХ рдореЙрдбрд▓ рдореВрд▓ рдмрд╛рддреЗрдВ </h1><br><p>  рдореЙрдбрд▓ рдХреЗ рджреЛ рдкреНрд░рдореБрдЦ рдШрдЯрдХ <em>рдбрд┐рд╡рд╛рдЗрд╕</em> рдФрд░ <em>рдбреНрд░рд╛рдЗрд╡рд░ рд╣реИрдВ</em> ред  рдбрд┐рд╡рд╛рдЗрд╕ рдХреБрдЫ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдпрд╛ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдПрдХ рд╕рд╛рд░ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рд╣реИред  рдпрд╣ рдкреЗрдбрд╝реЛрдВ рдХреЗ рдкрджрд╛рдиреБрдХреНрд░рдо рдореЗрдВ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ, рд╢реАрд░реНрд╖ рдкрд░ рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдХреЗ рд╕рд╛рде, рдмреАрдЪ рдореЗрдВ рдмрд╕реЗрдВ рдФрд░ рдкрддреНрддрд┐рдпреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЗрдВрд╕рд░ред </p><br><pre><code class="plaintext hljs">DEVICES + DRIVERS | +-----+ | +-----+ |1WIRE&lt;----------------------+1WIRE| ++-+-++ | +-----+ | | | | +---------+ | +--------+ | +------+ | | | +------+DS1820| +---v----+ +---v----+ +---v----+ | | +------+ |DS1820|0| |DS1820|1| |DS1822|0| | | +---^----+ +---^----+ +---^----+ | | +------+ | | +--------------+DS1822| | | | | +------+ +-----------+------------------+ +</code> </pre> <br><p>  рдбрд┐рд╡рд╛рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░ рджрд┐рдП рдЧрдП рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рддрд░реНрдХ рдХрд╛ рдПрдХ рдЯреБрдХрдбрд╝рд╛ рд╣реИред  рдЪрд╛рд▓рдХ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдП рдЧрдП рдХрд╛рд░реНрдпреЛрдВ рдХреЛ <em>рд╡рд┐рдзрд┐рдпрд╛рдВ</em> рдХрд╣рд╛ рдЬрд╛рддрд╛ <em>рд╣реИ</em> , рдЪрд╛рд▓рдХ рд╕реЗ рдЬреБрдбрд╝реЗ рдбреЗрдЯрд╛ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЛ <em>рд╡рд┐рд╢реЗрд╖рддрд╛</em> рдХрд╣рд╛ рдЬрд╛рддрд╛ <em>рд╣реИ</em> ред  рджреЛрдиреЛрдВ рд╡рд┐рдзрд┐рдпрд╛рдБ рдФрд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рдЕрдВрджрд░ рд░рд╣рддреА рд╣реИрдВред </p><br><p>  рдЧреБрдг рдЙрдирдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рджреЛ рдХрд╛рд░реНрдп рд╣реИрдВ: <em>рдЧреЗрдЯрдЯрд░</em> рдФрд░ <em>рд╕реЗрдЯрд░</em> рд╣реБрдХред  рддреЛ рд╕реБрдкрд░рд╕реЗрдЯ рд╡рд┐рдзрд┐ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХрд╛ рдЧреБрдг рд╣реИ, рд▓реЗрдХрд┐рди рд╡реЗ рдЕрдзрд┐рдХ рдореЗрдореЛрд░реА рднреА рд▓реЗрддреЗ рд╣реИрдВ (рдорд╛рдЗрдХреНрд░реЛрдХрдВрдЯреНрд░реЛрд▓рд░ рдореЗрдореЛрд░реА рджреБрд░реНрд▓рдн рд╣реИ, рдпрд╛рдж рд░рдЦреЗрдВ?)ред </p><br><pre> <code class="lua hljs">sdm.attr_add(drv, <span class="hljs-comment"><span class="hljs-comment">-- device handle "ref", -- attribute name "Reference voltage", -- attribute description 5, function(dev) -- this is a getter function return sdm.attr_data(sdm.attr_handle(dev, "ref")) end, function(dev, value) -- this is a setter function sdm.attr_set(sdm.attr_handle(dev, "ref"), value) end )</span></span></code> </pre> <br><h2 id="device-binding">  рдбрд┐рд╡рд╛рдЗрд╕ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ </h2><br><p>  рдбреНрд░рд╛рдЗрд╡рд░ рдореЙрдбрд▓ рдХрд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣рд┐рд╕реНрд╕рд╛ рдбрд┐рд╡рд╛рдЗрд╕-рдбреНрд░рд╛рдЗрд╡рд░ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рд╣реИред  рдпрд╣ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдЕрдкрдиреЗ рдЖрдк рдореЗрдВ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ: рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдЙрдкрд▓рдмреНрдз рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рд╕рд╛рде рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ рдорд┐рд▓рд╛рди рддрдм рддрдХ рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рддрдХ рд╡рд╣ рдлрд┐рдЯ рдирд╣реАрдВ рд╣реЛ рдЬрд╛рддрд╛ред  рдХреЗрд╡рд▓ рджреЛ рднрд╛рдЧ рдЧрд╛рдпрдм рд╣реИрдВ - рдорд┐рд▓рд╛рди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддрд░реНрдХ рдФрд░ рдХреБрдЫ рдбреЗрдЯрд╛ред </p><br><p>  <code>_poll()</code> рдорд┐рд▓рд╛рди рддрд░реНрдХ рдореЗрдВ рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рдореЗрдВ <code>_poll()</code> рдирд╛рдо рд╕реЗ <code>_poll()</code> ред  рдпрд╣ рдПрдХ рдирд┐рдпрдорд┐рдд рд╡рд┐рдзрд┐ рд╣реИ рдЬрд┐рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИрдВрдбрд▓ рдХреЗ рд╕рд╛рде рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдпрд╣ <code>true</code> рдпрд╛ <code>false</code> рдЕрдЧрд░ рдбрд┐рд╡рд╛рдЗрд╕ рдХреНрд░рдорд╢рдГ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рд╕рд╛рде рд╕рдВрд▓рдЧреНрди рдпрд╛ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><pre> <code class="lua hljs">sdm.method_add(drv, <span class="hljs-string"><span class="hljs-string">"_poll"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dev, drv, par)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> attr = sdm.attr_data(sdm.local_attr_handle(dev, <span class="hljs-string"><span class="hljs-string">"id"</span></span>)) <span class="hljs-comment"><span class="hljs-comment">-- get device attribute "id" if attr == nil then return false end -- if it does not have one, driver does not match -- parent name must be "ESP8266_1W" and first byte of "id" must be "0x28" return (sdm.device_name(par) == "ESP8266_1W") and (attr:byte(1) == 0x28) end )</span></span></code> </pre> <br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рджрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рджреЗрдЦрд╛ рдЧрдпрд╛ рд╣реИ, рдбреНрд░рд╛рдЗрд╡рд░ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЬреИрд╕рд╛ рдХрд┐ рдКрдкрд░ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ рдХреЗрд╡рд▓ рдЪрд╛рд▓рдХ рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝рддреА рд╣реИрдВред  рдЖрдо рддреМрд░ рдкрд░ рдпрд╣ рд╕рдЪ рд╣реИ, рд▓реЗрдХрд┐рди рдХреБрдЫ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдпреЗ рдЪрд┐рдк рдЖрдИрдбреА, рдкреНрд░рдпреБрдХреНрдд рдкрд┐рди рдЖрджрд┐ рд╣реИрдВред  рдЙрди рд▓реЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╢реЗрд╖ рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЛ sdm - <em>рд╕реНрдерд╛рдиреАрдп рд╡рд┐рд╢реЗрд╖рддрд╛</em> рдореЗрдВ рдЬреЛрдбрд╝рд╛ рдЧрдпрд╛ рдерд╛ред  рдпрд╣ рд╡рд┐рд╢реЗрд╖рддрд╛ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╕реЗ рдЬреБрдбрд╝реА рд╣реЛрддреА рд╣реИ рдФрд░ рдЖрдорддреМрд░ рдкрд░ рдЕрдкрд░рд┐рд╡рд░реНрддрдиреАрдп рд╣реЛрддреА рд╣реИред </p><br><p>  рдбреНрд░рд╛рдЗрд╡рд░ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рд╣реА рдмрд╛рдд рдХрд╣рдирд╛ рдмрд╛рдХреА рд╣реИред  рдЖрдорддреМрд░ рдкрд░ рдЙрдкрдХрд░рдгреЛрдВ рдХреЛ рдЙрдкрдпреЛрдЧ рдХреЗ рдмрд╛рдж рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдФрд░ рдХреНрд▓реАрдирдЕрдк рдкрд░ рдХрд┐рд╕реА рдкреНрд░рдХрд╛рд░ рдХреЗ рдЖрд░рдВрднреАрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдЗрд╕ рдкреНрд░рдпреЛрдЬрди рдХреЗ рд▓рд┐рдП <code>_init()</code> рдФрд░ <code>_free()</code> рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред <br>  рдпрджрд┐ рдбреНрд░рд╛рдЗрд╡рд░ рдореЗрдВ <code>_init()</code> рд╡рд┐рдзрд┐ рд╣реИ рддреЛ рдЗрд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдмрд╛рдЗрдВрдбрд┐рдВрдЧ рдХреЗ рдмрд╛рдж рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдХрд╣рд╛ рдЬрд╛рдПрдЧрд╛ред  <code>_free()</code> ред </p><br><pre> <code class="lua hljs">sdm.method_add(drv, <span class="hljs-string"><span class="hljs-string">"_init"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dev, drv, par)</span></span></span></span> sdm.device_rename(dev, sdm.request_name(<span class="hljs-string"><span class="hljs-string">"DS18B20"</span></span>)) <span class="hljs-comment"><span class="hljs-comment">-- rename device sdm.attr_copy(dev, "temp") -- copy attribute sdm.attr_copy(dev, "precision") -- copy attribute local met = sdm.method_dev_handle(par, "setup") -- get 1Wire bus pin init function .. local func = sdm.method_func(met) -- .. and .. func(par, dev) -- .. call it end ) sdm.method_add(drv, "_free", nil, function(dev, drv, par) local met = sdm.method_dev_handle(par, "free") -- get 1Wire bus pin free function .. local func = sdm.method_func(met) -- .. and .. func(par, dev) -- .. call it end )</span></span></code> </pre> <br><p>  рдЪреМрдХрд╕ рдкрд╛рдардХ рд╢рд╛рдпрдж рдкреВрдЫреЗрдВрдЧреЗ: рдХреНрдпрд╛ рдорддрд▓рдм рдКрдкрд░ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ "рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рд╡рд┐рд╢реЗрд╖рддрд╛" рд╣реИ?  рдФрд░ рд╡рд╣ рд╕рд╣реА рд╣реЛрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рддреАрд╕рд░реЗ рдкреНрд░рдХрд╛рд░ рдХреА рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреЗ рд╕рд╛рде рдХрд░рдирд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдордиреЗ рдЕрднреА рддрдХ рдЪрд░реНрдЪрд╛ рдирд╣реАрдВ рдХреА рд╣реИ - <em>рдирд┐рдЬреА рд╡рд┐рд╢реЗрд╖рддрд╛</em> ред  рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЗ рдмреАрдЪ рд╕рднреА рд╡рд┐рд╢реЗрд╖рддрд╛ рдбреЗрдЯрд╛ рд╕рд╛рдЭрд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдпреЛрдЬрди рдХреЗ рд▓рд┐рдП sdm рдбреНрд░рд╛рдЗрд╡рд░ рд╕реЗ рд╡рд┐рд╢реЗрд╖рддрд╛ рдХреА рдкреНрд░рддрд┐рд▓рд┐рдкрд┐ рдмрдирд╛рдиреЗ рдХрд╛ рддрдВрддреНрд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЗрд╕реЗ рдЙрдкрдХрд░рдг рдХреЗ рд╕рд╛рде рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдпрд╣ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЛ рдПрдХ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдпрд╛ рдЯреЗрдореНрдкрд▓реЗрдЯ рдмрдирд╛рддрд╛ рд╣реИред </p><br><p>  рдПрдХ рддреНрд╡рд░рд┐рдд рд╕рд╛рд░рд╛рдВрд╢: </p><br><ul><li>  <em>рд╕реНрдерд╛рдиреАрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рджреНрд╡рд╛рд░рд╛ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЬреИрд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдЖрдИрдбреА, рдХрдиреЗрдХреНрдЯреЗрдб рдкрд┐рди рдЖрджрд┐ред </li><li>  рдЗрд╕ рдбреНрд░рд╛рдЗрд╡рд░ рд╕реЗ рдЬреБрдбрд╝реЗ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд╕рднреА рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЗ рдмреАрдЪ рд╕рд╛рдЭрд╛ рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП <em>рдбреНрд░рд╛рдЗрд╡рд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <em>рдирд┐рдЬреА рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ</em> рдХреЛ рдбреНрд░рд╛рдЗрд╡рд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рд╕реЗ рдХреЙрдкреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдХреЗрд╡рд▓ рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рд╕реЗ рдЬреБрдбрд╝реЗ рдбреЗрдЯрд╛ рдХреЛ рд╣реЛрд▓реНрдб рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдкреНрд░рдХрд╛рд░ рд╕рдмрд╕реЗ рдЖрдо рд╣реИред </li></ul><br><div class="scrollable-table"><table><thead><tr><th>  рд╕рдВрдкрддреНрддрд┐ </th><th>  рд╕реНрдерд╛рдиреАрдп рд╡рд┐рд╢реЗрд╖рддрд╛ </th><th>  рдирд┐рдЬреА рд╡рд┐рд╢реЗрд╖рддрд╛ </th><th>  рдбреНрд░рд╛рдЗрд╡рд░ (рд╕рд╛рд░реНрд╡рдЬрдирд┐рдХ) рд╡рд┐рд╢реЗрд╖рддрд╛ </th></tr></thead><tbody><tr><td>  рдореЗрдВ рд╕рдВрдЧреНрд░рд╣рд┐рдд рд╣реИ </td><td>  рдпреБрдХреНрддрд┐ </td><td>  рдпреБрдХреНрддрд┐ </td><td>  рдбреНрд░рд╛рдЗрд╡рд░ </td></tr><tr><td>  рдбреНрд░рд╛рдЗрд╡рд░ рд╣реИрдВрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдпреЛрдЧреНрдп </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИрдВрдбрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдпреЛрдЧреНрдп </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдмреАрдЪ рд╕рд╛рдЭрд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  рдЪрд╛рд▓рдХ рдХреЛ рдЕрд▓рдЧ рд░рдЦрдиреЗ рдкрд░ рджреГрдврд╝рддрд╛ </td><td>  + </td><td>  - </td><td>  + </td></tr></tbody></table></div><br><h1 id="web-user-interface-implementation">  рд╡реЗрдм рдпреВрдЬрд░ рдЗрдВрдЯрд░рдлреЗрд╕ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди </h1><br><h2 id="server-code">  рд╕рд░реНрд╡рд░ рдХреЛрдб </h2><br><p>  рд╡рд╣рд╛рдБ рдПрдХ рд╕реБрдВрджрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://github.com/marcoskirsch/nodemcu-">nodemcu-httpserver</a> рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╣реИ рдЬреЛ NudeMCU рдХреЗ рд▓рд┐рдП рд╕рд░реНрд╡рд░ рдХреЛрдб рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред  рдЕрдлрд╕реЛрд╕ рдХреА рдмрд╛рдд рд╣реИ рдХрд┐ рдпрд╣ рдорд░ рдЪреБрдХрд╛ рд╣реИред  рдпрд╣ рд╕рд░реНрд╡рд░ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрдзрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╕рд░реНрд╡рд░ рдлрд╝рдВрдХреНрд╢рди рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://gitlab.com/matsievskiysv/nodemcu-">LFS</a> рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://gitlab.com/matsievskiysv/nodemcu-">рд▓реЗ рдЬрд╛рдпрд╛ рдЧрдпрд╛</a> рдФрд░ рдлрд┐рд░ рд╣рд░ рдХреЙрд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдерд┐рд░ рдкреГрд╖реНрда рдкрд░ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://gitlab.com/matsievskiysv/nodemcu-pseudo">рдереЛрдбрд╝рд╛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд┐рдпрд╛</a> рдЧрдпрд╛ред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Vue.js</a> рдЯреЗрдореНрдкрд▓реЗрдЯ рдЖрдзрд╛рд░рд┐рдд рд╡реЗрдм рдкреГрд╖реНрдареЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЖрджрд░реНрд╢ рд╡рд┐рдХрд▓реНрдк рд╣реИред  рдЗрд╕рд▓рд┐рдП рдЗрд╕рдХрд╛ рдЗрд╕реНрддреЗрдорд╛рд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдлреНрд░рдВрдЯреЗрдВрдб рдХреЗ</a> рд▓рд┐рдП рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ NodeMCU рдЗрдВрдЯрд░рдиреЗрдЯ рд╕реЗ рдЬреБрдбрд╝рд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдЗрд╕ рд╡рдЬрд╣ рд╕реЗ, <code>vue.js</code> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреЛ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдореМрдЬреВрдж рд░рд╣рдиреЗ рдФрд░ NodeMCU рд╕рд░реНрд╡рд░ рджреНрд╡рд╛рд░рд╛ рд╕реЗрд╡рд╛ рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдЪреВрдВрдХрд┐ рд╕рднреА рдЙрдкрдХрд░рдг рдкреЗрдбрд╝ рдХреА рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рд╣реЛрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рдПрдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреА рддрд░рд╣ рдПрдХреНрд╕реЗрд╕ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <code>/ESP8266/ESP8266_1W/DS18S20-0</code> ред  рдпрд╣рд╛рдБ <code>/ESP8266</code> рдПрдХ NodeMCU рдкреЗрдЬ рд╣реИ, <code>/ESP8266/ESP8266_1W</code> <em>рд╡рд╛рдпрд░</em> рдмрд╕ рдкреЗрдЬ рд╣реИ рдФрд░ рдЕрдВрдд рдореЗрдВ <code>/ESP8266/ESP8266_1W/DS18S20-0</code> рддрд╛рдкрдорд╛рди рд╕реЗрдВрд╕рд░ рд╣реИред </p><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдкрд╣рд▓реЗ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рд╕рднреА рдбрд┐рд╡рд╛рдЗрд╕ рдкреГрд╖реНрда рдПрдХ рдЯреЗрдореНрдкрд▓реЗрдЯ рдкреЗрдЬ рд╕реЗ рдирд┐рд░реНрдорд┐рдд рд╣реЛрддреЗ рд╣реИрдВ рдЬреЛ рд╣рд░ рдХреЙрд▓ рдкрд░ рдкрд░реЛрд╕рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕ рдкреГрд╖реНрда рдХреЗ рдЕрдВрджрд░ <em>JS</em> рдХреЛрдб рдЙрд╕реА URL рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рдХрд░рддрд╛ рд╣реИ, рдЬреЛ <code>/api</code> рд╕рд╛рде prepended рд╣реИред  рдКрдкрд░ рджрд┐рдП рдЧрдП рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдХреЙрд▓ URL <code>/api/ESP8266/ESP8266_1W/DS18S20-0</code> ред  рдРрд╕реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдкрд░ рд╕рд░реНрд╡рд░ <em>JSON</em> -encoded рдбрд┐рд╡рд╛рдЗрд╕-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдкреЗрдЬ рдХреЛ рдкреЙрдкреНрдпреБрд▓реЗрдЯ рдХрд░рддрд╛ рд╣реИред  рдмреЗрд╢рдХ, <em>HTML</em> рдкреЗрдЬ рдЕрдиреБрд░реЛрдз рдХреЛ рдЫреЛрдбрд╝ рджрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдпрджрд┐ рдХреЗрд╡рд▓ рдХрдЪреНрдЪреЗ рдбреЗрдЯрд╛ рдХреА рдЬрд░реВрд░рдд рд╣реИред </p><br><h2 id="device-tree">  рдЙрдкрдХрд░рдг рдХрд╛ рдкреЗрдбрд╝ </h2><br><p>  рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди <em>рд╕рд░рд▓ рдбрд┐рд╡рд╛рдЗрд╕ рдЯреНрд░реА</em> рд╕рдВрд░рдЪрдирд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбрд┐рд╡рд╛рдЗрд╕ рдЯреНрд░реА рдХреА</a> рддрд░рд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ</a> , рд▓реЗрдХрд┐рди рд╕рд░рд▓ рд╣реИред  рдпрд╣ рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рд╕реНрдерд╛рдиреАрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рд╕рд╣рд┐рдд рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдХреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдХрд╛ рд╡рд░реНрдгрди рдХрд░рддрд╛ рд╣реИред </p><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> root={ <span class="hljs-comment"><span class="hljs-comment">-- local_attributes={}, children={ { name="ESP8266_1W", -- local_attributes={}, children = { { name="DS18S20-0", -- static declaration alternative to 1Wire poll method local_attributes={ { name="id", desc=nil, -- empty description to save space data=string.char(16) .. string.char(221) .. string.char(109) .. string.char(104) .. string.char(3) .. string.char(8) .. string.char(0) .. string.char(150) -- ugly way to create byte array }, { datapin=2 } } }, } }, { name="ESP8266_SPI", -- local_attributes={}, children = { { name="MCP3208-0" }, } }, } }</span></span></code> </pre> <br><h2 id="hardware-setup">  рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рд╕реЗрдЯрдЕрдк </h2><br><p>  рдпрд╣рд╛рдВ рд╕реЗ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ рдкреНрд░рджрд░реНрд╢рдиред  рдЗрд╕ рдкреНрд░рдпреЛрдЬрди рдХреЗ рд▓рд┐рдП рд╕реЗрдВрд╕рд░ рдХрд╛ рдПрдХ рдЧреБрдЪреНрдЫрд╛ NodeMCU рд╕реЗ рдЬреБрдбрд╝рд╛ рдерд╛: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">DS18B20</a> рддрд╛рдкрдорд╛рди рд╕реЗрдВрд╕рд░ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">DS18S20</a> рддрд╛рдкрдорд╛рди рд╕реЗрдВрд╕рд░ </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">MCP3208</a> ADC </li></ul><br><p>  <em>1рд╡рд╛рдпрд░</em> рд╕реЗрдВрд╕рд░ рдПрдХ рд╣реА рдкрд┐рди рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реЛрддреЗ рд╣реИрдВред </p><br><p> <a href=""><img src="https://habrastorage.org/webt/fb/sw/zi/fbswzi7xav_pj4waz6g19hktrso.jpeg"></a> </p><br><h2 id="web-pages-and-drivers">  рд╡реЗрдм рдкреЗрдЬ рдФрд░ рдбреНрд░рд╛рдЗрд╡рд░ </h2><br><h3 id="root-device">  рд░реВрдЯ рдбрд┐рд╡рд╛рдЗрд╕ </h3><br><p>  рд░реВрдЯ рдбрд┐рд╡рд╛рдЗрд╕ (рдЙрд░реНрдл ESP8266) рдХрд╛ рдореБрдЦреНрдп рдЙрджреНрджреЗрд╢реНрдп рдЕрдкрдиреЗ рдмрдЪреНрдЪреЛрдВ рдХреЛ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрдЧрд╣ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐ рдпрд╣ рдЗрд╕рдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рддрд░реАрдХреЛрдВ рдпрд╛ рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдирд╣реАрдВ рд╣реИред </p><br><p>  рдпрд╣ рдХреЛрдб рд╕реНрдирд┐рдкреЗрдЯ <a href="">рдпрд╣рд╛рдВ</a> рд╕реЗ <a href="">рд╣реИ</a> : </p><br><pre> <code class="lua hljs">sdm.method_add(drv, <span class="hljs-string"><span class="hljs-string">"_init"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dev, drv, par)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> attr = sdm.attr_handle(dev, <span class="hljs-string"><span class="hljs-string">"id"</span></span>) <span class="hljs-comment"><span class="hljs-comment">-- get device "id" attribute sdm.attr_set(attr, node.chipid()) -- set "id" value attr = sdm.attr_handle(dev, "float") -- get device "float" attribute sdm.attr_set(attr, 3 / 2 ~= 1) -- set to true if firmware supports floating point instructions end ) sdm.attr_add(drv, "float", "Floating point build", false, function(drv) -- attribute value is set inside "_init" function local attr = sdm.attr_drv_handle(drv, "float") return sdm.attr_data(attr) -- just return stored value end, nil )</span></span></code> </pre> <br><p>  рдпрд╣ рдХреЛрдб рд╡рд┐рд╢реЗрд╖рддрд╛ <code>float</code> рдЬреЛрдбрд╝рддрд╛ рд╣реИ рдЬреЛ рдлрд░реНрдорд╡реЗрдпрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрд┐рд▓реНрдб рдкреНрд░рдХрд╛рд░</a> рдХреЛ рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорд╛рди <code>_init()</code> рд╣реБрдХ рдореЗрдВ рдЖрд░рдВрднреАрдХреГрдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдЬреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рдХрд╛рд░реНрдп рд╣реИ, рдЬреЛ рдПрдХ рдмрд╛рд░ рддрдм рдЪрд▓рддрд╛ рд╣реИ рдЬрдм рдбреНрд░рд╛рдЗрд╡рд░ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реЗ рдЬреБрдбрд╝рддрд╛ рд╣реИред </p><br><p>  рдпрд╣ рд░реВрдЯ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рдЬрдирд░реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдкреЗрдЬ рд╣реИред </p><br><p> <a href=""><img src="https://habrastorage.org/webt/mg/5q/lo/mg5qlog3-nwjkl6itrfw6ynyvuo.png"></a> </p><br><p>  рдпрд╣рд╛рдВ рд╣рдо рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд░реВрдЯ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдПрдХ рд╡рд┐рдзрд┐ <code>heap</code> , рджреЛ рдбреНрд░рд╛рдЗрд╡рд░ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдБ <code>float</code> рдФрд░ <code>id</code> ред  рдЕрдВрдд рдореЗрдВ, рдЗрд╕рдореЗрдВ рджреЛ рдбрд┐рд╡рд╛рдЗрд╕ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВ - <em>рдПрд╕рдкреАрдЖрдИ</em> рдФрд░ 1 <em>рд╡рд╛рдпрд░</em> рдмрд╕реЗрдВред </p><br><h3 id="spi">  рдПрд╕рдкреАрдЖрдИ </h3><br><p>  <a href=""><em>SPI</em> рдбреНрд░рд╛рдЗрд╡рд░</a> рдмрд╣реБрдд рджрд┐рд▓рдЪрд╕реНрдк рдирд╣реАрдВ рд╣реИред  рдпрд╣ рд╕рд┐рд░реНрдл <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">NodeMCU SPI</a> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдореИрдк рдХрд░рддрд╛ рд╣реИред </p><br><p> <a href=""><img src="https://habrastorage.org/webt/qx/mx/g8/qxmxg8mnkmnl5aglfq7q5zhpnv0.png"></a> </p><br><h3 id="mcp3208">  MCP3208 </h3><br><p>  <em>MCP3208</em> рдПрдХ <em>ADC</em> рдЪрд┐рдк рд╣реИред  рдпрд╣ 12 рдмрд┐рдЯ рдХреЛрдб рдХреЛ <em>рд░реЗрдлрд░реА</em> рдФрд░ рд░рд┐рдЯрд░реНрди рд╢реВрдиреНрдп рд╕реЗ рд╡реЛрд▓реНрдЯреЗрдЬ рдорд╛рдкрддрд╛ рд╣реИред  рдЗрд╕ <a href="">рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ</a> рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рджрд┐рд▓рдЪрд╕реНрдк рдпрд╣ рд╣реИ рдХрд┐ рд╡рд┐рд╢реЗрд╖рддрд╛ <code>ref</code> рдХреЗрд╡рд▓ рддрднреА рдореМрдЬреВрдж рд╣реЛрдЧреА рдЬрдм рдлрд░реНрдорд╡реЗрдпрд░ рдлрд╝реНрд▓реЛрдЯрд┐рдВрдЧ рдкреЙрдЗрдВрдЯ рдЕрдВрдХрдЧрдгрд┐рдд рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдпрд╣ рд╕рдорд░реНрдерд┐рдд рдирд╣реАрдВ рд╣реИ, рддреЛ рдирд┐рд░рдкреЗрдХреНрд╖ рд╡реЛрд▓реНрдЯреЗрдЬ рдХреЗ рдмрдЬрд╛рдп, рд╡реЛрд▓реНрдЯреЗрдЬ рдХреЛрдб <code>single</code> рдФрд░ <code>differential</code> рджреЛрдиреЛрдВ рддрд░реАрдХреЛрдВ рд╕реЗ рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre> <code class="lua hljs">sdm.method_add(drv, <span class="hljs-string"><span class="hljs-string">"single"</span></span>, <span class="hljs-string"><span class="hljs-string">"Single ended measure 0|1|2|3|4|5|6|7"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dev, channel)</span></span></span></span> <span class="hljs-comment"><span class="hljs-comment">-- ... if ref ~= nil then -- this part is executed only if floating point arithmetic is enabled rv = ref * rv / 4096 end return rv end ) if 3/2~=1 then -- other alternative is to access ESP8266 "float" method sdm.attr_add(drv, "ref", "Reference voltage", 5, function(dev) return sdm.attr_data(sdm.attr_handle(dev, "ref")) end, function(dev, value) sdm.attr_set(sdm.attr_handle(dev, "ref"), value) end ) end</span></span></code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/webt/m_/_l/cc/m__lccntxwsrorrujvky3opbm0s.png"></a> </p><br><p>  рдпрд╣ рднреА рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдЗрд╕ рдЙрдкрдХрд░рдг рдореЗрдВ рд╡рд┐рд╢реЗрд╖рддрд╛ <code>ref</code> рдХреЛ <em>рдирд┐рдЬреА</em> рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ рдкреНрд░рддрд┐ рдЙрдкрдХрд░рдг рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </p><br><h3 id="1wire">  1wire </h3><br><p>  <a href=""><em>1</em> рдЪрд╛рд▓рдХ рдЪрд╛рд▓рдХ</a> <code>poll</code> рд╡рд┐рдзрд┐ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИ - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рдЧрддрд┐рд╢реАрд▓ рдЦреЛрдЬ</a> ред </p><br><p>  рдбрд┐рд╡рд╛рдЗрд╕ рдХреА рдЦреЛрдЬ рдХреЗ рдареАрдХ рдмрд╛рдж рдЗрд╕рдХреЗ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдкрддрд╛ рдирд╣реАрдВ рдЪрд▓ рдкрд╛рдпрд╛ рд╣реИред  рддреЛ рдЗрд╕рдХрд╛ 1 <em>рд╡рд╛рдпрд░</em> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрджреНрд╡рд┐рддреАрдп рдкрддрд╛</a> рдПрдХ рдирдП рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдирд╛рдо рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рдмрд╛рдЗрдЯреНрд╕ рдХреЛ <code>_</code> рд╡рд░реНрдг рджреНрд╡рд╛рд░рд╛ рдЕрд▓рдЧ рдХрд┐рдП рдЧрдП рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХреЗ рд░реВрдк рдореЗрдВ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред </p><br><pre> <code class="lua hljs">sdm.method_add(drv, <span class="hljs-string"><span class="hljs-string">"poll"</span></span>, <span class="hljs-string"><span class="hljs-string">"Poll for devices"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(bus, pin)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> children = sdm.device_children(bus) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> {} <span class="hljs-comment"><span class="hljs-comment">-- already attached local ids = {} -- get IDs of attached devices for name, handle in pairs(children) do local dpin = sdm.attr_data(sdm.local_attr_handle(handle, "pin")) if dpin == pin then ids[sdm.attr_data(sdm.local_attr_handle(handle, "id"))] = true end end ow.reset_search(pin) -- reset previous search while true do -- for all found devices local id = ow.search(pin) if id == nil then break end if ids[id] == nil then -- if not already present local name = "" for i=1,#id do name = name .. tostring(id:byte(i)) .. "_" end name = name:sub(1,-2) -- add to system with their ID used as name local device = sdm.device_add(name, bus) -- add "pin" attribute local rv = sdm.local_attr_add(device, "datapin", nil, pin, nil, nil) -- add "id" attribute local rv = sdm.local_attr_add(device, "id", nil, id, nil, nil) -- poll for driver local rv = sdm.device_poll(device) end end end )</span></span></code> </pre> <br><p>  рдпрд╣ <em>1Wire</em> рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рд▓рд┐рдП рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдкреГрд╖реНрда рд╣реИред </p><br><p> <a href=""><img src="https://habrastorage.org/webt/j2/uq/ax/j2uqaxkhqilv0k1fmwaq2hn0iwq.png"></a> </p><br><p>  рддрд░реНрдХ <code>2</code> рдФрд░ рддрд╛рдЬрд╝рд╛ рдкреГрд╖реНрда рдХреЗ рд╕рд╛рде <code>poll</code> рдХреЙрд▓ рдЬрд╛рд░реА рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдмрдЪреНрдЪреЗ рдЕрдиреБрднрд╛рдЧ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдмрдЪреНрдЪреЛрдВ рдХреЗ рдирд╛рдо рдорд╛рдирд╡ рдкрдардиреАрдп рд╣реИрдВред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ <code>device_rename()</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдЙрдирдХреЗ <code>_init</code> рджреМрд░рд╛рди рдмреБрд▓рд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред </p><br><p> <a href=""><img src="https://habrastorage.org/webt/_z/2x/na/_z2xnadqlt_qgyokfxomwivtwkq.png"></a> </p><br><h3 id="ds18s20">  DS18S20 </h3><br><p>  рдкреНрд░рд╛рд░рдВрдн рд╣реЛрдиреЗ рдкрд░, <a href="">DS18S20 рдбреНрд░рд╛рдЗрд╡рд░</a> рдЬрд╛рдБрдЪрддрд╛ рд╣реИ рдХрд┐ рдбрд┐рд╡рд╛рдЗрд╕ <em>ID</em> <code>0x10</code> рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкрд░рд┐рд╡рд╛рд░ рдХреЛрдб рд╣реИред  рдЬрдм рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдбреНрд░рд╛рдЗрд╡рд░ рд╕реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдирд╛рдо рдмрджрд▓рдХрд░ <code>DS18S20-X</code> рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд╣рд╛рдВ <code>DS18S20</code> рдПрдХ <code>DS18S20</code> рд╣реИ рдФрд░ <code>X</code> рдПрдХ рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдирдВрдмрд░ рд╣реИред </p><br><pre> <code class="lua hljs">sdm.method_add(drv, <span class="hljs-string"><span class="hljs-string">"_poll"</span></span>, <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dev, drv, par)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> attr = sdm.attr_data(sdm.local_attr_handle(dev, <span class="hljs-string"><span class="hljs-string">"id"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> attr == <span class="hljs-literal"><span class="hljs-literal">nil</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (sdm.device_name(par) == <span class="hljs-string"><span class="hljs-string">"ESP8266_1W"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (attr:<span class="hljs-built_in"><span class="hljs-built_in">byte</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>) == <span class="hljs-number"><span class="hljs-number">0x10</span></span>) <span class="hljs-comment"><span class="hljs-comment">-- check family ID end ) sdm.method_add(drv, "_init", nil, function(dev, drv, par) sdm.device_rename(dev, sdm.request_name("DS18S20")) -- rename device sdm.attr_copy(dev, "temp") -- copy attribute to device local met = sdm.method_dev_handle(par, "setup") local func = sdm.method_func(met) -- use parent "setup" method on the device func(par, dev) end )</span></span></code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/webt/bm/pk/41/bmpk419dphexm-xlvnxq7hw2jxc.png"></a> </p><br><p>  рд╕реНрдерд╛рдиреАрдп рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ <code>id</code> рдФрд░ <code>datapin</code> рдФрд░ <code>setter</code> рд╣реБрдХ рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдХреЗрд╡рд▓ рдЙрдирдХреЗ рдирд╛рдо рджрд┐рдЦрд╛рдИ рджреЗрддреЗ рд╣реИрдВред </p><br><h3 id="ds18b20">  DS18B20 </h3><br><p>  <a href="">DS18B20 рдбреНрд░рд╛рдЗрд╡рд░</a> рд▓рдЧрднрдЧ <a href="">DS18S20 рдбреНрд░рд╛рдЗрд╡рд░</a> рдХреЗ рд╕рдорд╛рди рд╣реИред  рдПрдХрдорд╛рддреНрд░ рдЕрдВрддрд░ <code>precision</code> рд╡рд┐рдзрд┐ рд╣реИред  рджреЛрдиреЛрдВ <em>DS18; 20</em> рдбреНрд░рд╛рдЗрд╡рд░ рдкреВрд░реНрдгрд╛рдВрдХ рдмрд┐рд▓реНрдб рдорд╛рди рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рдлреНрд▓реЛрдЯрд┐рдВрдЧ рдкреЙрдЗрдВрдЯ рдбрд┐рд╡реАрдЬрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВред </p><br><pre> <code class="lua hljs">sdm.attr_add(drv, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>, <span class="hljs-string"><span class="hljs-string">"Precision (9|10|11|12)"</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dev, precision)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> attr = sdm.attr_dev_handle(dev, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> sdm.attr_data(attr) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dev, precision)</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> par = sdm.device_parent(dev) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> attr = sdm.attr_dev_handle(dev, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> ex = sdm.method_func(sdm.method_dev_handle(par, <span class="hljs-string"><span class="hljs-string">"exchange"</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> modes = {[<span class="hljs-number"><span class="hljs-number">9</span></span>]=<span class="hljs-number"><span class="hljs-number">0x1f</span></span>, [<span class="hljs-number"><span class="hljs-number">10</span></span>]=<span class="hljs-number"><span class="hljs-number">0x3f</span></span>, [<span class="hljs-number"><span class="hljs-number">11</span></span>]=<span class="hljs-number"><span class="hljs-number">0x5f</span></span>, [<span class="hljs-number"><span class="hljs-number">12</span></span>]=<span class="hljs-number"><span class="hljs-number">0x7f</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> modes[precision] ~= <span class="hljs-literal"><span class="hljs-literal">nil</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> ex(par, dev, {<span class="hljs-number"><span class="hljs-number">0x4e</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, modes[precision]}) sdm.attr_set(attr, precision) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> )</code> </pre> <br><p> <a href=""><img src="https://habrastorage.org/webt/er/lj/gb/erljgbs9zby8767izkmsunyhdd8.png"></a> </p><br><h2 id="memory-usage">  рдореЗрдореЛрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ </h2><br><p>  <em>ESP8266</em> рдореБрдлреНрдд рдореЗрдореЛрд░реА рд▓рдЧрднрдЧ <em>40k рд╣реИ</em> ред  рд╕рд░реНрд╡рд░ рдХреЛрдб рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://gitlab.com/matsievskiysv/nodemcu-">LFS</a> рдореЗрдВ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рдЖрд░рдВрднреАрдХрд░рдг рд╕рдордп рдкрд░ рдХреЛрдИ рд░реИрдо рд╕реНрдерд╛рди рдирд╣реАрдВ рд▓реЗрддрд╛ рд╣реИ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=https://github.com/marcoskirsch/nodemcu-">рдореВрд▓ рдХреЛрдб</a> рд▓рдЧрднрдЧ <em>10k</em> рд▓рд┐рдпрд╛ рдЧрдпрд╛)ред </p><br><p>  <em>рдПрд╕рдбреАрдПрдо</em> 5 рдбрд┐рд╡рд╛рдЗрд╕ рдЪрд╛рд▓рдХреЛрдВ рдФрд░ 5 рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП рд▓рдЧрднрдЧ <em>10k</em> рд▓реЗрддрд╛ рд╣реИред  рдЧреИрд░-рдлрд╝реНрд▓реЛрдЯрд┐рдВрдЧ рдлрд╝рд░реНрдорд╡реЗрдпрд░ рдмрд┐рд▓реНрдб рдХреЗ рд▓рд┐рдП рдереЛрдбрд╝рд╛ рдХрдоред  рдЗрд╕рд▓рд┐рдП рд╣рд╛рде рдореЗрдВ рдХрд╛рд░реНрдп рдХреЗ рд▓рд┐рдП рдХреЗрд╡рд▓ рдбреНрд░рд╛рдЗрд╡рд░ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреНрд░рд╛рдЗрд╡рд░</a> рдХрд╛ рдЪрдпрди рдХрд░рдирд╛ рдмреЗрд╣рддрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реЛрддрд╛ рд╣реИ</a> ред  рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕реНрдореГрддрд┐ рд▓реЗрдиреЗ рд╡рд╛рд▓рд╛ рдХрд╛рд░реНрдп <code>vue.js</code> рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХреА рд╕реЗрд╡рд╛ <code>vue.js</code> рд╣реИред </p><br><p> <a href=""><img src="https://habrastorage.org/webt/yy/u-/_i/yyu-_idkp2osapmg3-jy5z2r8ly.png"></a> </p><br><p>  рдХрдЪреНрдЪреЗ <em>JSON</em> -encoded рдбреЗрдЯрд╛ ( <code>curl</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ) рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рд╢рд┐рдЦрд░ рдореЗрдореЛрд░реА рдХреА рдЦрдкрдд рдХрд╛рдлреА рдХрдо рд╣реЛ рд╕рдХрддреА рд╣реИред </p><br><p> <a href=""><img src="https://habrastorage.org/webt/w_/hu/xx/w_huxxzt4w2wszdqq04bgbonbt0.png"></a> </p><br><h2 id="instead-of-an-epilogue">  рдПрдХ рдЙрдкрд╕рдВрд╣рд╛рд░ рдХреЗ рдмрдЬрд╛рдп </h2><br><p>  рдкрд╣рд▓реЗ рддрд░реАрдХреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдЬрд┐рд╕реЗ рдореИрдВрдиреЗ sdm рдХреЗ рд╕рд╛рде рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдерд╛, рдЙрд╕рдХреЗ рд▓рд┐рдП рдмрд╛рдзреНрдпрдХрд╛рд░реА рдерд╛ <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><code>node.restart()</code></a> ред <br>  рд╡реЗрдм рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕реЗ рдЖрдЬрд╝рдорд╛рдиреЗ рд╕реЗ рдПрдХ рдЙрддреНрд╕реБрдХ рдкрд░рд┐рдгрд╛рдо рдЙрддреНрдкрдиреНрди рд╣реБрдЖред  рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рджреНрд╡рд╛рд░рд╛ рдЕрдиреБрд░реЛрдз рдЬрд╛рд░реА рдХрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рдареАрдХ рдмрд╛рдж, рдЪрд┐рдк рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЧрдпрд╛ред  рд▓реЗрдХрд┐рди рдХреНрдпреЛрдВрдХрд┐ NodeMCU рдиреЗ HTTP рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рдХрд╛ рдареАрдХ рд╕реЗ рдЬрд╡рд╛рдм рдирд╣реАрдВ рджрд┐рдпрд╛, рдЗрд╕рд▓рд┐рдП рд╡реЗрдм рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдиреЗ рдлрд┐рд░ рд╕реЗ рд╡рд╣реА рдЕрдиреБрд░реЛрдз рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред  рдЬрдм NodeMCU рд╕рд░реНрд╡рд░ рдкреБрдирдГ рдЖрд░рдВрдн рд╣реБрдЖ рдФрд░ рдлрд┐рд░ рд╕реЗ рдЪрд╛рд▓реВ рд╣реБрдЖ, рддреЛ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЗрд╕рд╕реЗ рдЬреБрдбрд╝рд╛, рдЖрдВрддрд░рд┐рдХ <em>рдкреНрд░рдпрд╛рд╕ рдлрд┐рд░ рд╕реЗ</em> рдХрд╛рдЙрдВрдЯрд░ рдкрд░ рд░реАрд╕реЗрдЯ <em>рдХрд░реЗрдВ</em> рдФрд░ <code>node.restart()</code> рдХрд╣рд▓рд╛рддрд╛ рд╣реИред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi449992/">https://habr.com/ru/post/hi449992/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi449976/index.html">C ++ рдореЗрдВ рдмрд╣реБрдкрд░рдд рд╕рд╣рдпреЛрдЧреА рдХрдВрдЯреЗрдирд░ред рдпреИрдВрдбреЗрдХреНрд╕ рд░рд┐рдкреЛрд░реНрдЯ</a></li>
<li><a href="../hi449978/index.html">рдорд╛рд╕реНрдХреЛ рдЯреЗрд╕реНрд▓рд╛ рдХреНрд▓рдм рдХреЗ рдЗрдЧреЛрд░ рдЕрдиреНрддрд░реЛрд╡ рдиреЗ рдЯреЗрд╕реНрд▓рд╛ рдФрд░ рдЗрд▓реЗрдХреНрдЯреНрд░рд┐рдХ рдХрд╛рд░реЛрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ 20 рдорд┐рдердХреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдШрд░реНрд╖ рдХрд┐рдпрд╛</a></li>
<li><a href="../hi449984/index.html">Google рд╕рдорд╛рдЪрд╛рд░ рдФрд░ рд▓рд┐рдпреЛ рдЯреЙрд▓реНрд╕реНрдЯреЙрдп: Word2Vec рд╢рдмреНрдж рдХреЛ t-SNE рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдореНрдмреЗрдбрд┐рдВрдЧ рд╡рд┐рдЬрд╝реБрдЕрд▓рд╛рдЗрдЬрд╝ рдХрд░рддреЗ рд╣реБрдП</a></li>
<li><a href="../hi449986/index.html">рдмреНрд▓реЙрдХрдЪреЗрди: рд╣рдореЗрдВ рдХреНрдпрд╛ рдорд╛рдорд▓рд╛ рдмрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдП?</a></li>
<li><a href="../hi449990/index.html">рджреЛрд╕реНрддреЛрдВ рд▓реЗрдЯреЗрдХреНрд╕, рдлреЙрд░реНрдореВрд▓реЗ рдФрд░ рд╣реИрдмрд░ рдХреИрд╕реЗ рдмрдирд╛рдпреЗ?</a></li>
<li><a href="../hi449994/index.html">рд╢реНрдирд╛рдЗрдбрд░рдореИрди рдХреЗ рдЖрда рд╕реБрдирд╣рд░реЗ рдирд┐рдпрдо рдЖрдкрдХреЛ рдПрдХ рдмреЗрд╣рддрд░ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдмрдирд╛рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВрдЧреЗ</a></li>
<li><a href="../hi449996/index.html">рдПрдлрдПрдлрдЯреА рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЛ рд╕рдордЭрдирд╛</a></li>
<li><a href="../hi449998/index.html">рдЕрдХреНрд╕рд░ рдкреВрдЫреЗ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рд╢реНрди: рдпрд╛рддреНрд░рд╛ рд╕реЗ рдкрд╣рд▓реЗ рдПрдХ рдпрд╛рддреНрд░реА geek рдХреЛ рдЯреАрдХрд╛рдХрд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рд┐рдП</a></li>
<li><a href="../hi450000/index.html">(рдмрд╛рдПрдВ рд╕реЗ рджрд╛рдПрдВ (рд▓реБрдХрд┐рдВрдЧ рдЧреНрд▓рд╛рд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ)</a></li>
<li><a href="../hi450002/index.html">рдкреАрд╡реАрдПрд╕-рд╕реНрдЯреВрдбрд┐рдпреЛ рдХреЗ рд╕рд╛рде рдПрд▓рдПрд▓рд╡реАрдПрдо 8 рдореЗрдВ рдХреАрдбрд╝реЗ рдвреВрдВрдврдирд╛</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>