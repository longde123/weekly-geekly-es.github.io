<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯПа ЁЯУ░ ЁЯЪ╡ЁЯП╝ рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдпрдерди рдХреЗ рд╕рд╛рде рд░реЛрдорд╛рдВрдЪ рдХрд╛ рд╡рд░реНрд╖ ЁЯРб ЁЯСйтАНтЭдя╕ПтАНЁЯТЛтАНЁЯСй ЁЯНХ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдпрдерди рдХреЗ рд╕рд╛рде рд░реЛрдорд╛рдВрдЪ рдХрд╛ рд╡рд░реНрд╖ 





 рд╣рд╛рдп рд╕рдм, рдореИрдВ рдПрдХ рдЕрдЬрдЧрд░ рдбреЗрд╡рд▓рдкрд░ рд╣реВрдБред рдкрд┐рдЫрд▓реЗ рд╕рд╛рд▓ рдореИрдВрдиреЗ рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдЗрдерди + рдбреАрдЬреЗрдВрдЧреЛ рдУрдЖрд░рдПрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛ рдФрд░ рдЗрд╕ рджреМрд░рд╛рди рдо...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдпрдерди рдХреЗ рд╕рд╛рде рд░реЛрдорд╛рдВрдЪ рдХрд╛ рд╡рд░реНрд╖</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461939/"><h1 id="god-priklyucheniy-s-graphene-python">  рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдпрдерди рдХреЗ рд╕рд╛рде рд░реЛрдорд╛рдВрдЪ рдХрд╛ рд╡рд░реНрд╖ </h1><br><p><img src="https://habrastorage.org/getpro/habr/post_images/c77/e6d/8c3/c77e6d8c390320295743710d11babfac.png" alt="рдЫрд╡рд┐"></p><br><p> рд╣рд╛рдп рд╕рдм, рдореИрдВ рдПрдХ рдЕрдЬрдЧрд░ рдбреЗрд╡рд▓рдкрд░ рд╣реВрдБред  рдкрд┐рдЫрд▓реЗ рд╕рд╛рд▓ рдореИрдВрдиреЗ рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдЗрдерди + рдбреАрдЬреЗрдВрдЧреЛ рдУрдЖрд░рдПрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд┐рдпрд╛ рдФрд░ рдЗрд╕ рджреМрд░рд╛рди рдореИрдВрдиреЗ рдЧреНрд░рд╛рдлреАрди рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХреЗ рдЙрдкрдХрд░рдг рдмрдирд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХреАред  рдирддреАрдЬрддрди, рдореБрдЭреЗ рдПрдХ рдЫреЛрдЯрд╛ рд╕рд╛ <code>graphene-framework</code> рдХреЛрдб рдЖрдзрд╛рд░ рдФрд░ рдХреБрдЫ рдирд┐рдпрдореЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рдорд┐рд▓рд╛, рдЬрд┐рд╕реЗ рдореИрдВ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣реВрдВрдЧрд╛ред </p><a name="habracut"></a><br><p><img src="https://habrastorage.org/getpro/habr/post_images/458/645/f18/458645f180f8fff23bcbd543065d8c11.png" alt="рдЫрд╡рд┐"></p><br><p>  рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдпрдерди рдХреНрдпрд╛ рд╣реИ? </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧреНрд░рд╛рдлреАрди-python.org рдХреЗ</a> рдЕрдиреБрд╕рд╛рд░, рддрдм: </p><br><blockquote>  рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдпрдерди рдЖрд╕рд╛рдиреА рд╕реЗ рдкрд╛рдпрдерди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЧреНрд░рд╛рдлрдХреЙрд▓ рдПрдкреАрдЖрдИ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкреБрд╕реНрддрдХрд╛рд▓рдп рд╣реИред  рдЗрд╕рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп рдПрдХ рд╕рд░рд▓ рд▓реЗрдХрд┐рди рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдПрдХреНрд╕реНрдЯреЗрдВрд╕рд┐рдмрд▓ рдПрдкреАрдЖрдИ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣реИ рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░реНрд╕ рдХреЗ рдЬреАрд╡рди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИред </blockquote><p>  <strong>рдЗрд╕рдХрд╛ рдореБрдЦреНрдп рдХрд╛рд░реНрдп рдПрдХ рд╕рд░рд▓ рд▓реЗрдХрд┐рди рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдПрдХреНрд╕реНрдЯреЗрдВрд╕рд┐рдмрд▓ рдПрдкреАрдЖрдИ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣реИ рдЬреЛ рдкреНрд░реЛрдЧреНрд░рд╛рдорд░реНрд╕ рдХреЗ рдЬреАрд╡рди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИред</strong> </p><br><p>  рд╣рд╛рдВ, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЧреНрд░рд╛рдлреАрди рд╕рд░рд▓ рдФрд░ рдПрдХреНрд╕реНрдЯреЗрдВрд╕рд┐рдмрд▓ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдореБрдЭреЗ рдмрдбрд╝реЗ рдФрд░ рддреЗрдЬреА рд╕реЗ рдмрдврд╝рддреЗ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЗ рд▓рд┐рдП рдмрд╣реБрдд рд╕рд░рд▓ рд▓рдЧрддрд╛ рд╣реИред  рд▓рдШреБ рдкреНрд░рд▓реЗрдЦрди (рдореИрдВрдиреЗ рдЗрд╕рдХреЗ рдмрдЬрд╛рдп рд╕реНрд░реЛрдд рдХреЛрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ - рдпрд╣ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдХреНрд░рд┐рдпрд╛ рд╣реИ), рд╕рд╛рде рд╣реА рдХреЛрдб рд▓рд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рдирдХреЛрдВ рдХреА рдХрдореА рдЗрд╕ рдкреБрд╕реНрддрдХрд╛рд▓рдп рдХреЛ рдЖрдкрдХреЗ рдЕрдЧрд▓реЗ рдПрдкреАрдЖрдИ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╡рд┐рдХрд▓реНрдк рдирд╣реАрдВ рдмрдирд╛рддреА рд╣реИред </p><br><p>  рд╡реИрд╕реЗ рднреА, рдореИрдВрдиреЗ рдЗрд╕реЗ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдФрд░ рдХрдИ рд╕рдорд╕реНрдпрд╛рдУрдВ рдореЗрдВ рднрд╛рдЧ рд▓рд┐рдпрд╛, рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, рдЙрдирдореЗрдВ рд╕реЗ рдЕрдзрд┐рдХрд╛рдВрд╢ рдХреЛ рд╣рд▓ рдХрд░ рджрд┐рдпрд╛ (рдЧреНрд░реЗрдлреАрди рдХреА рд╕рдореГрджреНрдз рдЕрдиреИрдЪреНрдЫрд┐рдХ рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж)ред  рдореЗрд░реЗ рдХреБрдЫ рд╕рдорд╛рдзрд╛рди рд╡рд┐рд╢реБрджреНрдз рд░реВрдк рд╕реЗ рд╡рд╛рд╕реНрддреБрд╢рд┐рд▓реНрдк рд╣реИрдВ рдФрд░ рдореЗрд░реА рд░реВрдкрд░реЗрдЦрд╛ рдХреЗ рдмрд┐рдирд╛, рдмреЙрдХреНрд╕ рд╕реЗ рдмрд╛рд╣рд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЙрдирдореЗрдВ рд╕реЗ рдмрд╛рдХреА рдХреЛ рдЕрднреА рднреА рдХреБрдЫ рдХреЛрдб рдмреЗрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдпрд╣ рд▓реЗрдЦ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝реАрдХрд░рдг рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рддрд░рд╣ рд╕реЗ рдореЗрд░реЗ рджреНрд╡рд╛рд░рд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдорд╛рд░реНрдЧ рдХрд╛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг рдФрд░ рдореЗрд░реА рдкрд╕рдВрдж рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдФрдЪрд┐рддреНрдп рдХреЗ рд╕рд╛рде рдПрдХ рдпрд╛ рджреВрд╕рд░реЗ рддрд░реАрдХреЗ рд╕реЗ рд╣рд▓ рдХреА рдЧрдИ рд╕рдорд╕реНрдпрд╛рдПрдВ рд╣реИрдВред  рдЗрд╕ рднрд╛рдЧ рдореЗрдВ, рдореИрдВрдиреЗ рдореНрдпреВрдЯреЗрд╢рди рдФрд░ рдЙрдирд╕реЗ рдЬреБрдбрд╝реА рдЪреАрдЬреЛрдВ рдкрд░ рдзреНрдпрд╛рди рджрд┐рдпрд╛ред </p><br><p>  рдЗрд╕ рд▓реЗрдЦ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп <strong>рдХрд┐рд╕реА рднреА рд╕рд╛рд░реНрдердХ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛</strong> рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рдЖрд▓реЛрдЪрдирд╛ рдХреА рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реВрдВрдЧрд╛! </p><br><p>  <em>рдиреЛрдЯ: рд▓реЗрдЦ рдХреЛ рдкрдврд╝рдирд╛ рдЬрд╛рд░реА рд░рдЦрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдореИрдВ рджреГрдврд╝рддрд╛ рд╕реЗ рдЕрдиреБрд╢рдВрд╕рд╛ рдХрд░рддрд╛ рд╣реВрдВ рдХрд┐ рдЖрдк рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдкрд░рд┐рдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЧреНрд░рд╛рдлрдХреЙрдХ рдХреНрдпрд╛ рд╣реИред</em> </p><br><hr><br><h2 id="mutacii">  рдореНрдпреВрдЯреЗрд╢рди </h2><br><blockquote>  рдЧреНрд░рд╛рдлрд╝рдХреЙрд▓ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЪрд░реНрдЪрд╛рдПрдБ рдбреЗрдЯрд╛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдкрд░ рдХреЗрдВрджреНрд░рд┐рдд рд╣реЛрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХрд┐рд╕реА рднреА рд╕реНрд╡рд╛рднрд┐рдорд╛рдиреА рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХреЛ рд╕рд░реНрд╡рд░ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рддрд░реАрдХреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред </blockquote><p>  рдореНрдпреВрдЯреЗрд╢рди рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред </p><br><p>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.Mutation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arguments</span></span></span><span class="hljs-class">:</span></span> post_id = graphene.ID(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) title = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) content = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) image_urls = graphene.List(graphene.String, required=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) allow_comments = graphene.Boolean(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) contact_email = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ok = graphene.Boolean(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) errors = graphene.List(graphene.String, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mutate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_, info, post_id, title, content, image_urls, allow_comments, contact_email)</span></span></span><span class="hljs-function">:</span></span> errors = [] <span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: post = get_post_by_id(post_id) <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> PostNotFound: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UpdatePostMutation(ok=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>, errors=[<span class="hljs-string"><span class="hljs-string">'post_not_found'</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> info.context.user.is_authenticated: errors.append(<span class="hljs-string"><span class="hljs-string">'not_authenticated'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(title) &lt; TITLE_MIN_LENGTH: errors.append(<span class="hljs-string"><span class="hljs-string">'title_too_short'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> is_email(contact_email): errors.append(<span class="hljs-string"><span class="hljs-string">'contact_email_not_valid'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> post.owner != info.context.user: errors.append(<span class="hljs-string"><span class="hljs-string">'not_post_owner'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Post.objects.filter(title=title).exists(): errors.append(<span class="hljs-string"><span class="hljs-string">'title_already_taken'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> errors: post = Utils.update_post(post, title, content, image_urls, allow_comments, contact_email) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UpdatePostMutation(ok=bool(errors), errors=errors)</code> </pre> <br><p>  <code>UpdatePostMutation</code> рдХрд┐рдП рдЧрдП рдбреЗрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреЛрд╕реНрдЯ рдХреЛ рдмрджрд▓ рджреЗрддрд╛ рд╣реИ рдФрд░ рдХреБрдЫ рд╢рд░реНрддреЛрдВ рдХреЗ рдкреВрд░рд╛ рди рд╣реЛрдиреЗ рдкрд░ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдХреЗрд╡рд▓ рдЗрд╕ рдХреЛрдб рдХреЛ рджреЗрдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдпрд╣ рдЗрд╕рдХреА рдЧреИрд░-рд╡реНрдпрд╛рдкрдХрддрд╛ рдФрд░ рдЕрд╕рдорд░реНрдерддрд╛ рдХреЗ рдХрд╛рд░рдг рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ: </p><br><ol><li>  <code>mutate</code> рдлрд╝рдВрдХреНрд╢рди рдХреЗ рдмрд╣реБрдд рд╕рд╛рд░реЗ рддрд░реНрдХ, рдЬрд┐рдирдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝ рд╕рдХрддреА рд╣реИ, рднрд▓реЗ рд╣реА рд╣рдо рд╕рдВрдкрд╛рджрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХ рдлрд╝реАрд▓реНрдб рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реЛрдВред </li><li>  рдХреНрд▓рд╛рдЗрдВрдЯ рдкрдХреНрд╖ рдкрд░ рд╕рдорд╛рди рджрд┐рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдореНрдпреВрдЯреЗрд╢рди рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ <code>errors</code> рдФрд░ <code>ok</code> рд▓реМрдЯрдирд╛ рдЪрд╛рд╣рд┐рдП, рддрд╛рдХрд┐ рдЙрдирдХреА рд╕реНрдерд┐рддрд┐ рдФрд░ рдпрд╣ рд╕рдордЭрдирд╛ рд╣рдореЗрд╢рд╛ рд╕рдВрднрд╡ рд╣реЛ рд╕рдХреЗред </li><li>  <code>mutate</code> рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдХрд┐рд╕реА <em>рдСрдмреНрдЬреЗрдХреНрдЯ</em> рдХреЛ рдЦреЛрдЬреЗрдВ рдФрд░ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред  рдореНрдпреВрдЯреЗрд╢рди рдлрд╝рдВрдХреНрд╢рди рдЙрдкрд╡рд╛рд╕ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдпрджрд┐ рдпрд╣ рдирд╣реАрдВ рд╣реИ, рддреЛ рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  рдПрдХ рдореНрдпреВрдЯреЗрд╢рди рдореЗрдВ рдЕрдиреБрдорддрд┐рдпреЛрдВ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдирд╛ред  рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдРрд╕рд╛ рдХрд░рдиреЗ рдХрд╛ рдЕрдзрд┐рдХрд╛рд░ рдирд╣реАрдВ рд╣реИ (рдХреБрдЫ рдкреЛрд╕реНрдЯ рдХреЛ рд╕рдВрдкрд╛рджрд┐рдд рдХрд░реЗрдВ) рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рдирд╣реАрдВ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  рдПрдХ рдмреЗрдХрд╛рд░ рдкрд╣рд▓рд╛ рддрд░реНрдХ (рдПрдХ <em>рдЬрдбрд╝</em> рдЬреЛ рд╣рдореЗрд╢рд╛ рд╢реАрд░реНрд╖ рд╕реНрддрд░ рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЗ рд▓рд┐рдП <code>None</code> , рдЬреЛ рдХрд┐ рд╣рдорд╛рд░рд╛ рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рд╣реИ)ред </li><li>  рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рдЕрдкреНрд░рддреНрдпрд╛рд╢рд┐рдд рд╕реЗрдЯ: рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рд╕реНрд░реЛрдд рдХреЛрдб рдпрд╛ рдкреНрд░рд▓реЗрдЦрди рдирд╣реАрдВ рд╣реИ, рддреЛ рдЖрдкрдХреЛ рдирд╣реАрдВ рдкрддрд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдпрд╣ рдкрд░рд┐рд╡рд░реНрддрди рдХреНрдпрд╛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдпреЛрдЬрдирд╛ рдореЗрдВ рдкреНрд░рддрд┐рдмрд┐рдВрдмрд┐рдд рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред </li><li>  рдХрдИ рдЯреЗрдореНрдкреНрд▓реЗрдЯ рддреНрд░реБрдЯрд┐ рдЬрд╛рдВрдЪ рд╣реИрдВ рдЬреЛ рд╕реАрдзреЗ <code>mutate</code> рдкрджреНрдзрддрд┐ рдореЗрдВ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░ рдХреЗ рдЪреЗрдХ рдХреЗ рдмрдЬрд╛рдп рдбреЗрдЯрд╛ рдХреЛ <code>mutate</code> рд╢рд╛рдорд┐рд▓ рд╣реИред  рдЖрджрд░реНрд╢ <code>mutate</code> рдореЗрдВ рдПрдХ рдкрдВрдХреНрддрд┐ рд╢рд╛рдорд┐рд▓ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП - рдкреЛрд╕реНрдЯ рд╕рдВрдкрд╛рджрди рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЙрд▓ред </li></ol><br><p>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдиреЗ рдФрд░ рдЗрдирдкреБрдЯ рдХреЛ рдорд╛рдиреНрдп рдХрд░рдиреЗ рдЬреИрд╕реЗ рддреГрддреАрдп-рдкрдХреНрд╖ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдзреНрдпрд╛рди рд░рдЦрдиреЗ рдХреЗ рдмрдЬрд╛рдп, <strong><code>mutate</code> рдХреЛ рдбреЗрдЯрд╛ рдХреЛ рд╕рдВрд╢реЛрдзрд┐рдд рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП</strong> ред  рд╣рдорд╛рд░рд╛ рд▓рдХреНрд╖реНрдп рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд╕реЗ рд╣реИ: </p><br><pre> <code class="python hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mutate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(post, info, input)</span></span></span><span class="hljs-function">:</span></span> post = Utils.update_post(post, **input) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UpdatePostMutation(post=post)</code> </pre> <br><p>  рдЕрдм рдКрдкрд░ рдХреЗ рдмрд┐рдВрджреБрдУрдВ рдкрд░ рдЧреМрд░ рдХрд░рддреЗ рд╣реИрдВред </p><br><hr><br><h3 id="polzovatelskie-tipy">  рдХрд╕реНрдЯрдо рдкреНрд░рдХрд╛рд░ </h3><br><p>  <code>email</code> рдлрд╝реАрд▓реНрдб рдХреЛ рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рдпрд╣ <em>рдПрдХ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рд╛рд░реВрдк рдХреА рдПрдХ рд╕реНрдЯреНрд░рд┐рдВрдЧ рд╣реИ</em> ред  рд╣рд░ рдмрд╛рд░ рдПрдкреАрдЖрдИ рдХреЛ рдПрдХ рдИрдореЗрд▓ рдорд┐рд▓рддрд╛ рд╣реИ, рдЙрд╕реЗ рдЗрд╕рдХреА рд╢реБрджреНрдзрддрд╛ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред  рддреЛ рдПрдХ рдХрд╕реНрдЯрдо рдкреНрд░рдХрд╛рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╕рдорд╛рдзрд╛рди рд╣реЛрдЧрд╛ред </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Email</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.String)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># ...</span></span></code> </pre> <br><p>  рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИред </p><br><hr><br><h3 id="vhodnye-tipy">  рдЗрдирдкреБрдЯ рдкреНрд░рдХрд╛рд░ </h3><br><p>  рдЕрдкрдиреЗ рдореНрдпреВрдЯреЗрд╢рди рдХреЗ рд▓рд┐рдП рдЗрдирдкреБрдЯ рдкреНрд░рдХрд╛рд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВред  рднрд▓реЗ рд╣реА рд╡реЗ рдЕрдиреНрдп рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдкреБрди: рдЙрдкрдпреЛрдЧ рдХреЗ рдЕрдзреАрди рди рд╣реЛрдВред  рдЗрдирдкреБрдЯ рдкреНрд░рдХрд╛рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдкреНрд░рд╢реНрди рдЫреЛрдЯреЗ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рдкрдврд╝рдирд╛ рдФрд░ рддреЗрдЬреА рд╕реЗ рд▓рд┐рдЦрдирд╛ рдЖрд╕рд╛рди рд╣реЛрддрд╛ рд╣реИред </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostInput</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.InputObjectType)</span></span></span><span class="hljs-class">:</span></span> title = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) content = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) image_urls = graphene.List(graphene.String, required=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) allow_comments = graphene.Boolean(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) contact_email = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>)</code> </pre> <br><p>  рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: </p><br><pre> <code class="plaintext hljs">mutation( $post_id: ID!, $title: String!, $content: String!, $image_urls: String!, $allow_comments: Boolean!, $contact_email: Email! ) { updatePost( post_id: $post_id, title: $title, content: $content, image_urls: $image_urls, allow_comments: $allow_comments, contact_email: $contact_email, ) { ok } }</code> </pre> <br><p>  рдХреЗ рдмрд╛рдж: </p><br><pre> <code class="plaintext hljs">mutation($id: ID!, $input: UpdatePostInput!) { updatePost(id: $id, input: $input) { ok } }</code> </pre> <br><p>  рдореНрдпреВрдЯреЗрд╢рди рдХреЛрдб рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.Mutation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arguments</span></span></span><span class="hljs-class">:</span></span> input = UpdatePostInput(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) id = graphene.ID(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) ok = graphene.Boolean(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) errors = graphene.List(graphene.String, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mutate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_, info, input, id)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># ... if not errors: post = Utils.update_post(post, **input.__dict__) return UpdatePostMutation(errors=errors)</span></span></code> </pre> <br><hr><br><h3 id="bazovyy-klass-mutaciy">  рдЖрдзрд╛рд░ рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рд╡рд░реНрдЧ </h3><br><p>  рдЬреИрд╕рд╛ рдХрд┐ рдкреИрд░рд╛рдЧреНрд░рд╛рдл 2 рдореЗрдВ рдЙрд▓реНрд▓реЗрдЦ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, <em>рдореНрдпреВрдЯреЗрд╢рди рдореЗрдВ <code>errors</code> рдФрд░ <code>ok</code> рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рддрд╛рдХрд┐ рдЙрдирдХреА рд╕реНрдерд┐рддрд┐ рдФрд░ рдХреНрдпрд╛ рдХрд╛рд░рдг рд╣реЛ, рдЗрд╕реЗ рд╣рдореЗрд╢рд╛ рд╕рдордЭрд╛ рдЬрд╛ рд╕рдХреЗ</em> ред  рдпрд╣ рдХрд╛рдлреА рд╕рд░рд▓ рд╣реИ, рд╣рдо рдПрдХ рдмреЗрд╕ рдХреНрд▓рд╛рд╕ рдмрдирд╛рддреЗ рд╣реИрдВ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MutationPayload</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.ObjectType)</span></span></span><span class="hljs-class">:</span></span> ok = graphene.Boolean(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) errors = graphene.List(graphene.String, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) query = graphene.Field(<span class="hljs-string"><span class="hljs-string">'main.schema.Query'</span></span>, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resolve_ok</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, info)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> len(self.errors <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> []) == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resolve_errors</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, info)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.errors <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> [] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">resolve_query</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, info)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {}</code> </pre> <br><p>  рдХреБрдЫ рдиреЛрдЯ: </p><br><ul><li>  <code>resolve_ok</code> рд╡рд┐рдзрд┐ <code>resolve_ok</code> , рдЗрд╕рд▓рд┐рдП рд╣рдореЗрдВ рд╕реНрд╡рдпрдВ <code>ok</code> рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </li><li>  <code>query</code> рдлрд╝реАрд▓реНрдб рд░реВрдЯ <code>Query</code> , рдЬреЛ рдЖрдкрдХреЛ рдореНрдпреВрдЯреЗрд╢рди рдЕрдиреБрд░реЛрдз рдХреЗ рдЕрдВрджрд░ рд╕реАрдзреЗ рдбреЗрдЯрд╛ рдХреНрд╡реЗрд░реА рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ (рдореНрдпреВрдЯреЗрд╢рди рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рдбреЗрдЯрд╛ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛)ред <br><pre> <code class="plaintext hljs">mutation($id: ID!, $input: PostUpdateInput!) { updatePost(id: $id, input: $input) { ok query { profile { totalPosts } } } }</code> </pre> </li></ul><br><p>  рдпрд╣ рдмрд╣реБрдд рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИ рдЬрдм рдХреНрд▓рд╛рдЗрдВрдЯ рдореНрдпреВрдЯреЗрд╢рди рдкреВрд░рд╛ рд╣реЛрдиреЗ рдХреЗ рдмрд╛рдж рдХреБрдЫ рдбреЗрдЯрд╛ рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдмреИрдХрдпрд░ рд╕реЗ рдЗрд╕ рдкреВрд░реЗ рд╕реЗрдЯ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рдХрд╣рдирд╛ рдЪрд╛рд╣рддрд╛ред  рдЖрдк рдЬрд┐рддрдирд╛ рдХрдо рдХреЛрдб рд▓рд┐рдЦреЗрдВрдЧреЗ, рдЗрд╕реЗ рдмрдирд╛рдП рд░рдЦрдирд╛ рдЙрддрдирд╛ рд╣реА рдЖрд╕рд╛рди рд╣реЛрдЧрд╛ред  рдореИрдВрдиреЗ рдпрд╣ рд╡рд┐рдЪрд╛рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдБ рд╕реЗ</a> рд▓рд┐рдпрд╛ред </p><br><p>  рдмреЗрд╕ рдореНрдпреВрдЯреЗрд╢рди рдХреНрд▓рд╛рд╕ рдХреЗ рд╕рд╛рде, рдХреЛрдб рдореЗрдВ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(MutationPayload, graphene.Mutation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arguments</span></span></span><span class="hljs-class">:</span></span> input = UpdatePostInput(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) id = graphene.ID(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mutate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(_, info, input, id)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># ...</span></span></code> </pre> <br><hr><br><h3 id="kornevye-mutacii">  рд░реВрдЯ рдореНрдпреВрдЯреЗрд╢рди </h3><br><p>  рд╣рдорд╛рд░рд╛ рдореНрдпреВрдЯреЗрд╢рди рдЕрдиреБрд░реЛрдз рдЕрдм рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">mutation($id: ID!, $input: PostUpdateInput!) { updatePost(id: $id, input: $input) { ok } }</code> </pre> <br><p>  рдПрдХ рд╡реИрд╢реНрд╡рд┐рдХ рджрд╛рдпрд░реЗ рдореЗрдВ рд╕рднреА рдореНрдпреВрдЯреЗрд╢рди рдХреЛ рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рдЕрдЪреНрдЫрд╛ рдЕрднреНрдпрд╛рд╕ рдирд╣реАрдВ рд╣реИред  рдпрд╣рд╛рдБ рдХреБрдЫ рдХрд╛рд░рдг рд╣реИрдВ: </p><br><ol><li>  рдореНрдпреВрдЯреЗрд╢рди рдХреА рдмрдврд╝рддреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рде, рдЖрдкрдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдореНрдпреВрдЯреЗрд╢рди рдХреЛ рдвреВрдВрдврдирд╛ рдЕрдзрд┐рдХ рд╕реЗ рдЕрдзрд┐рдХ рдХрдард┐рди рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдПрдХ рдирд╛рдо рд╕реНрдерд╛рди рдХреЗ рдХрд╛рд░рдг, рдореНрдпреВрдЯреЗрд╢рди рдХреЗ рдирд╛рдо рдкрд░ "рдЗрд╕рдХреЗ рдореЙрдбреНрдпреВрд▓ рдХрд╛ рдирд╛рдо" рд╢рд╛рдорд┐рд▓ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП <code>update</code> <strong><code>Post</code></strong> ред </li><li>  рдЖрдкрдХреЛ рдореНрдпреВрдЯреЗрд╢рди рдХреЗ рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ <code>id</code> рдкрд╛рд╕ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред </li></ol><br><p>  рдореИрдВ <em>рд░реВрдЯ рдореНрдпреВрдЯреЗрд╢рди</em> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рд╕реБрдЭрд╛рд╡ рджреЗрддрд╛ рд╣реВрдВред  рдЙрдирдХрд╛ рд▓рдХреНрд╖реНрдп рдореНрдпреВрдЯреЗрд╢рди рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╕реНрдХреЛрдк рдореЗрдВ рдмрджрд▓рдХрд░ рдФрд░ рдореНрдпреВрдЯреЗрд╢рди рдХреЛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рдПрдХреНрд╕реЗрд╕ рд╕реЗ рддрд░реНрдХ рд╕реЗ рдореБрдХреНрдд рдХрд░рдирд╛ рдФрд░ рдЙрди рддрдХ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреЛ рдПрдХреНрд╕реЗрд╕ рдХрд░рдирд╛ рд╣реИред </p><br><p>  рдирдпрд╛ рдЕрдиреБрд░реЛрдз рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">mutation($id: ID!, $input: PostUpdateInput!) { post(id: $id) { update(input: $input) { ok } } }</code> </pre> <br><p>  рдЕрдиреБрд░реЛрдз рддрд░реНрдХ рд╕рдорд╛рди рд░рд╣рддреЗ рд╣реИрдВред  рдЕрдм рдкрд░рд┐рд╡рд░реНрддрди рдлрд╝рдВрдХреНрд╢рди рдХреЛ <code>post</code> рдЕрдВрджрд░ "рдХреЙрд▓" рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрд░реНрдХ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: </p><br><ol><li>  рдпрджрд┐ <code>id</code> <code>post</code> рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╛рд░рд┐рдд рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИ, рддреЛ рдпрд╣ <code>{}</code> рд╡рд╛рдкрд╕ рдЖ рдЬрд╛рддреА рд╣реИ  рдпрд╣ рдЖрдкрдХреЛ рднреАрддрд░ рдореНрдпреВрдЯреЗрд╢рди рдЬрд╛рд░реА рд░рдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЙрди рдореНрдпреВрдЯреЗрд╢рдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрд┐рдиреНрд╣реЗрдВ рд░реВрдЯ рддрддреНрд╡ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдСрдмреНрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП)ред </li><li>  рдпрджрд┐ <code>id</code> рдкрд╛рд░рд┐рдд рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕рдВрдмрдВрдзрд┐рдд рддрддреНрд╡ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдпрджрд┐ рдСрдмреНрдЬреЗрдХреНрдЯ рдирд╣реАрдВ рдорд┐рд▓рд╛ рд╣реИ, рддреЛ <code>None</code> рд╡рд╛рдкрд╕ <code>None</code> , рдФрд░ рдпрд╣ рдЕрдиреБрд░реЛрдз рдкреВрд░рд╛ рдХрд░рддрд╛ рд╣реИ, рдореНрдпреВрдЯреЗрд╢рди рдирд╣реАрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдпрджрд┐ рдСрдмреНрдЬреЗрдХреНрдЯ рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдЙрд╕реЗ рд╣реЗрд░рдлреЗрд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЕрдзрд┐рдХрд╛рд░реЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВред </li><li>  рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдкрд╛рд╕ рдЕрдзрд┐рдХрд╛рд░ рдирд╣реАрдВ рд╣реИрдВ, рддреЛ <code>None</code> рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдЕрдиреБрд░реЛрдз рдкреВрд░рд╛ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рдореНрдпреВрдЯреЗрд╢рди рдирд╣реАрдВ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдпрджрд┐ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рдЕрдзрд┐рдХрд╛рд░ рд╣реИрдВ, рддреЛ рдкрд╛рдпрд╛ рдЧрдпрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рд╡рд╛рдкрд╕ рдЖ рдЧрдпрд╛ рд╣реИ рдФрд░ рдореНрдпреВрдЯреЗрд╢рди рдЗрд╕реЗ рд░реВрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ - рдкрд╣рд▓рд╛ рддрд░реНрдХред </li></ol><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рдХреЛрдб рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрддрд╛ рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(MutationPayload, graphene.Mutation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arguments</span></span></span><span class="hljs-class">:</span></span> input = UpdatePostInput() <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mutate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(post, info, input)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> post <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> errors = [] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> info.context.user.is_authenticated: errors.append(<span class="hljs-string"><span class="hljs-string">'not_authenticated'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(title) &lt; TITLE_MIN_LENGTH: errors.append(<span class="hljs-string"><span class="hljs-string">'title_too_short'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Post.objects.filter(title=title).exists(): errors.append(<span class="hljs-string"><span class="hljs-string">'title_already_taken'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> errors: post = Utils.update_post(post, **input.__dict__) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> UpdatePostMutation(errors=errors)</code> </pre> <br><ul><li>  рдореНрдпреВрдЯреЗрд╢рди рдХреА рдЬрдбрд╝ - рдкрд╣рд▓рд╛ рддрд░реНрдХ - рдЕрдм рдЯрд╛рдЗрдк <code>Post</code> рдХрд╛ рдПрдХ рдСрдмреНрдЬреЗрдХреНрдЯ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдКрдкрд░ рдореНрдпреВрдЯреЗрд╢рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдЪреЗрдХ рд░реВрдЯ рдореНрдпреВрдЯреЗрд╢рди рдХреЛрдб рдореЗрдВ рдЪрд▓рд╛ рдЧрдпрд╛ред </li></ul><br><p>  рд░реВрдЯ рдореНрдпреВрдЯреЗрд╢рди рдХреЛрдб: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostMutationRoot</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(MutationRoot)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> model = Post has_permission = <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> post, user: post.owner == user update = UpdatePostMutation.Field()</code> </pre> <br><hr><br><h3 id="interfeys-oshibok">  рддреНрд░реБрдЯрд┐ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ </h3><br><p>  рдЕрдиреБрдорд╛рдирд┐рдд рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ рдбрд┐рдЬрд╝рд╛рдЗрди рдореЗрдВ рдкрд░рд┐рд▓рдХреНрд╖рд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><ul><li>  рдЪреВрдВрдХрд┐ рдореНрдпреВрдЯреЗрд╢рди рдХрдИ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдПред </li><li>  рдЪреВрдВрдХрд┐ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░рдХрд╛рд░реЛрдВ рджреНрд╡рд╛рд░рд╛ рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ <code>Union</code> рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдЕрд╕реНрддрд┐рддреНрд╡ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдПрдХ-рджреВрд╕рд░реЗ рдХреЗ рд╕рдорд╛рди рдмрдиреЗ рд░рд╣рдиреЗ рдХреЗ рд▓рд┐рдП, рдЙрдиреНрд╣реЗрдВ рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЖрдЗрдП рдЗрд╕реЗ <code>ErrorInterface</code> рдХрд╣рддреЗ рд╣реИрдВред  рдЗрд╕реЗ рджреЛ рдлрд╝реАрд▓реНрдбреНрд╕ рджреЗрдВ: <code>ok</code> рдФрд░ <code>message</code> ред </li></ul><br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рддреНрд░реБрдЯрд┐рдпрд╛рдБ рдЯрд╛рдЗрдк <code>[SomeMutationErrorsUnion]!</code> рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП <code>[SomeMutationErrorsUnion]!</code>  ред  <code>SomeMutationErrorsUnion</code> рд╕рднреА рдЙрдкрдкреНрд░рдХрд╛рд░реЛрдВ рдХреЛ <code>SomeMutationErrorsUnion</code> рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рд╣рдореЗрдВ рдорд┐рд▓рддрд╛ рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotAuthenticated</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.ObjectType)</span></span></span><span class="hljs-class">:</span></span> message = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, default_value=<span class="hljs-string"><span class="hljs-string">'not_authenticated'</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> interfaces = [ErrorInterface, ] <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TitleTooShort</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.ObjectType)</span></span></span><span class="hljs-class">:</span></span> message = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, default_value=<span class="hljs-string"><span class="hljs-string">'title_too_short'</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> interfaces = [ErrorInterface, ] <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TitleAlreadyTaken</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.ObjectType)</span></span></span><span class="hljs-class">:</span></span> message = graphene.String(required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>, default_value=<span class="hljs-string"><span class="hljs-string">'title_already_taken'</span></span>) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> interfaces = [ErrorInterface, ] <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutationErrors</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.Union)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> types = [NotAuthenticated, TitleIsTooShort, TitleAlreadyTaken, ]</code> </pre> <br><p>  рдпрд╣ рдЕрдЪреНрдЫрд╛ рд▓рдЧ рд░рд╣рд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдмрд╣реБрдд рдЕрдзрд┐рдХ рдХреЛрдб рд╣реИред  рд╣рдо рдЗрди рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЛ рдордХреНрдЦреА рдкрд░ рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдореЗрдЯрд╛рдХреНрд▓рд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PostErrors</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(metaclass=ErrorMetaclass)</span></span></span><span class="hljs-class">:</span></span> errors = [ <span class="hljs-string"><span class="hljs-string">'not_authenticated'</span></span>, <span class="hljs-string"><span class="hljs-string">'title_too_short'</span></span>, <span class="hljs-string"><span class="hljs-string">'title_already_taken'</span></span>, ] <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutationErrors</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(graphene.Union)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> types = [PostErrors.not_authenticated, PostErrors.title_too_short, PostErrors.title_already_taken, ]</code> </pre> <br><p>  рдореНрдпреВрдЯреЗрд╢рди рдореЗрдВ рд▓реМрдЯреА рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдШреЛрд╖рдгрд╛ рдЬреЛрдбрд╝реЗрдВ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(MutationPayload, graphene.Mutation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arguments</span></span></span><span class="hljs-class">:</span></span> input = UpdatePostInput() errors = graphene.List(UpdatePostMutationErrors, required=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mutate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(post, info, input)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># ...</span></span></code> </pre> <br><hr><br><h3 id="proverka-na-nalichie-oshibok">  рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреЗ рд▓рд┐рдП рдЬрд╛рдБрдЪ рдХрд░реЗрдВ </h3><br><p>  рдпрд╣ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ <code>mutate</code> рдкрджреНрдзрддрд┐ рдХреЛ <em>рдбреЗрдЯрд╛ рдХреЛ рдореНрдпреВрдЯ рдХрд░рдиреЗ рдХреЗ</em> рдЕрд▓рд╛рд╡рд╛ рдХрд┐рд╕реА рднреА рдЪреАрдЬрд╝ рдХреА рдкрд░рд╡рд╛рд╣ рдирд╣реАрдВ рдХрд░рдиреА рдЪрд╛рд╣рд┐рдПред  рдЗрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЙрдирдХреЗ рдХреЛрдб рдореЗрдВ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </p><br><p>  рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░рддреЗ рд╣реБрдП, рдпрд╣рд╛рдБ рдкрд░рд┐рдгрд╛рдо рд╣реИ: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(DefaultMutation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arguments</span></span></span><span class="hljs-class">:</span></span> input = UpdatePostInput() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> root_required = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> authentication_required = <span class="hljs-keyword"><span class="hljs-keyword">True</span></span> <span class="hljs-comment"><span class="hljs-comment">#   ,    True   # An iterable of tuples (error_class, checker) checks = [ ( PostErrors.title_too_short, lambda post, input: len(input.title) &lt; TITLE_MIN_LENGTH ), ( PostErrors.title_already_taken, lambda post, input: Post.objects.filter(title=input.title).exists() ), ] def mutate(post, info, input): post = Utils.update_post(post, **input.__dict__) return UpdatePostMutation()</span></span></code> </pre> <br><p>  <code>mutate</code> рдлрд╝рдВрдХреНрд╢рди рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдкреНрд░рддреНрдпреЗрдХ <em>рдЪреЗрдХрд░</em> ( <code>checks</code> рд╕рд░рдгреА рдХреЗ рд╕рджрд╕реНрдпреЛрдВ рдХрд╛ рджреВрд╕рд░рд╛ рддрддреНрд╡) рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрджрд┐ <code>True</code> рд▓реМрдЯрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рд╕рдВрдмрдВрдзрд┐рдд рддреНрд░реБрдЯрд┐ рдкрд╛рдИ рдЬрд╛рддреА рд╣реИред  рдпрджрд┐ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдирд╣реАрдВ рдорд┐рд▓рддреА рд╣реИ, рддреЛ <code>mutate</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдореИрдВ рд╕рдордЭрд╛рдКрдВрдЧрд╛: </p><br><ul><li>  рдЪреЗрдХ рдлрд╝рдВрдХреНрд╢рдВрд╕, <code>mutate</code> рдлрд╝рдВрдХреНрд╢рдВрд╕ рдХреА рддрд░рд╣ рд╣реА рддрд░реНрдХ рджреЗрддреЗ рд╣реИрдВред </li><li>  рдпрджрд┐ рдХреЛрдИ рддреНрд░реБрдЯрд┐ рдорд┐рд▓рддреА рд╣реИ, рддреЛ рд╕рддреНрдпрд╛рдкрди рдХрд╛рд░реНрдп <code>True</code> рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li><li>  рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдХреЗ рдЪреЗрдХ рдФрд░ рд░реВрдЯ рддрддреНрд╡ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХрд╛рдлреА рд╕рд╛рдорд╛рдиреНрдп рд╣реИ рдФрд░ <code>Meta</code> рдлреНрд▓реИрдЧ рдореЗрдВ рд╕реВрдЪреАрдмрджреНрдз рд╣реИрдВред </li><li>  <code>True</code> <code>authentication_required</code> рдкреНрд░рд╛рдзрд┐рдХрд░рдг рдЬрд╛рдБрдЪ рдЬреЛрдбрд╝рддрд╛ рд╣реИред </li><li>  <code>root_required</code> " <code>root is not None</code> " рдЪреЗрдХ рдЬреЛрдбрд╝рддрд╛ рд╣реИред </li><li>  <code>UpdatePostMutationErrors</code> рдЕрдм рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред  <code>checks</code> рд╕рд░рдгреА рдХреЗ рддреНрд░реБрдЯрд┐ рд╡рд░реНрдЧреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдлреНрд▓рд╛рдИ рдкрд░ рд╕рдВрднрд╛рд╡рд┐рдд рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕рдВрдШ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li></ul><br><hr><br><h3 id="dzheneriki">  рдЬреЗрдирд░рд┐рдХ </h3><br><p>  рдЕрдВрддрд┐рдо рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП <code>DefaultMutation</code> рдореЗрдВ рдПрдХ <code>pre_mutate</code> рд╡рд┐рдзрд┐ <code>pre_mutate</code> рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ рддреНрд░реБрдЯрд┐рдпреЛрдВ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЗрдирдкреБрдЯ рддрд░реНрдХреЛрдВ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ, рдФрд░ рддрджрдиреБрд╕рд╛рд░, рдЙрддреНрдкрд░рд┐рд╡рд░реНрддрди рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╕реНрдЯрд╛рд░реНрдЯрд░ рдХрд┐рдЯ рднреА рд╣реИ рдЬреЛ рдХреЛрдб рдХреЛ рдЫреЛрдЯрд╛ рдмрдирд╛рддрд╛ рд╣реИ рдФрд░ рдЬреАрд╡рди рдХреЛ рдЖрд╕рд╛рди рдмрдирд╛рддрд╛ рд╣реИред <br>  <em>рдиреЛрдЯ: рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЬреЗрдиреЗрд░рд┐рдХ рдХреЛрдб django ORM рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИ</em> </p><br><h4 id="createmutation">  CreateMutation </h4><br><p>  <code>model</code> рдпрд╛ <code>create_function</code> рдПрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, <code>create_function</code> рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИ: </p><br><pre> <code class="python hljs">model._default_manager.create(**data, owner=user)</code> </pre> <br><p>  рдпрд╣ рдЕрд╕реБрд░рдХреНрд╖рд┐рдд рд▓рдЧ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдордд рднреВрд▓реЛ рдХрд┐ рдЧреНрд░реЗрдлреЗрд▓ рдореЗрдВ рдЕрдВрддрд░реНрдирд┐рд╣рд┐рдд рдкреНрд░рдХрд╛рд░ рдХреА рдЬрд╛рдБрдЪ рд╣реИ, рд╕рд╛рде рд╣реА рдореНрдпреВрдЯреЗрд╢рди рдореЗрдВ рдЪреЗрдХ рднреА рд╣реИред </p><br><p>  рдпрд╣ рдПрдХ <code>post_mutate</code> рд╡рд┐рдзрд┐ рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рддрд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде <code>post_mutate</code> рдмрд╛рдж рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ ( <code>post_mutate</code> <code>(instance_created, user)</code> , рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><h4 id="updatemutation">  UpdateMutation </h4><br><p>  рдЖрдкрдХреЛ <code>update_function</code> рд╕реЗрдЯ рдХрд░рдиреЗ рджреЗрддрд╛ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">default_update_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(instance, user=None, **data)</span></span></span><span class="hljs-function">:</span></span> instance.__dict__.update(data) instance.save() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> instance</code> </pre> <br><p>  <code>root_required</code> рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ <code>True</code> рд╣реИред </p><br><p>  рдпрд╣ рдПрдХ <code>post_mutate</code> рд╡рд┐рдзрд┐ рднреА рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ <code>update_function</code> рдмрд╛рдж рддрд░реНрдХреЛрдВ <code>(instance_updated, user)</code> <code>update_function</code> <code>(instance_updated, user)</code> рд╕рд╛рде рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛ рд╡рд╛рдкрд╕ рдХрд░ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><p>  рдФрд░ рдпрд╣реА рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдП! </p><br><p>  рдЕрдВрддрд┐рдо рдХреЛрдб: </p><br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UpdatePostMutation</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(UpdateMutation)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Arguments</span></span></span><span class="hljs-class">:</span></span> input = UpdatePostInput() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Meta</span></span></span><span class="hljs-class">:</span></span> checks = [ ( PostErrors.title_too_short, <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> post, input: len(input.title) &lt; TITLE_MIN_LENGTH ), ( PostErrors.title_already_taken, <span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> post, input: Post.objects.filter(title=input.title).exists() ), ]</code> </pre> <br><h4 id="deletemutation">  DeleteMutation </h4><br><p>  рдЖрдкрдХреЛ <code>delete_function</code> рд╕реЗрдЯ рдХрд░рдиреЗ рджреЗрддрд╛ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ: </p><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">default_delete_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(instance, user=None, **data)</span></span></span><span class="hljs-function">:</span></span> instance.delete()</code> </pre> <br><hr><br><h3 id="zaklyuchenie">  рдирд┐рд╖реНрдХрд░реНрд╖ </h3><br><p>  рдпрд╣ рд▓реЗрдЦ рдХреЗрд╡рд▓ рдПрдХ рдкрд╣рд▓реВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдореЗрд░реА рд░рд╛рдп рдореЗрдВ рдпрд╣ рд╕рдмрд╕реЗ рдЬрдЯрд┐рд▓ рд╣реИред  рдореЗрд░реЗ рдкрд╛рд╕ рд░рд┐рдЬрд╝реЙрд▓реНрд╡рд░ рдФрд░ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдЧреНрд░рд╛рдлреАрди-рдкрд╛рдпрдерди рдореЗрдВ рд╕рд╛рдорд╛рдиреНрдп рдЪреАрдЬреЗрдВ рд╣реИрдВред </p><br><p>  рдореЗрд░реЗ рд▓рд┐рдП рдЦреБрдж рдХреЛ рдПрдХ рдЕрдиреБрднрд╡реА рдбреЗрд╡рд▓рдкрд░ рдХрд╣рдирд╛ рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореБрдЭреЗ рдХрд┐рд╕реА рднреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рд╕реБрдЭрд╛рд╡ рднреА рдмрд╣реБрдд рдкрд╕рдВрдж рдЖрдПрдВрдЧреЗред </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрд░реЛрдд рдХреЛрдб рдпрд╣рд╛рдВ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ</a> ред </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi461939/">https://habr.com/ru/post/hi461939/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi461923/index.html">рд╕реЗрдВрдЯ рдкреАрдЯрд░реНрд╕рдмрд░реНрдЧ рдореЗрдВ рдЬреЗрдЯрдмреНрд░реЗрдиреНрд╕ рдУрдкрди рдбреЗ: рд╡реАрдбрд┐рдпреЛ</a></li>
<li><a href="../hi461927/index.html">рд╕рдХреНрд░рд┐рдп рд░реИрдВрдХрд┐рдВрдЧ рд╕реАрдЦрдирд╛</a></li>
<li><a href="../hi461929/index.html">рд▓рд┐рдирдХреНрд╕ рдкрд░ рдПрд╕рдПрд╕рдбреА рд╕реНрдерд┐рддрд┐ рдХреА рдирд┐рдЧрд░рд╛рдиреА рдФрд░ рдЬрд╛рдВрдЪ</a></li>
<li><a href="../hi461935/index.html">рдкреЛрд╕реНрдЯрдЧреНрд░реЗрдЬ рдЗрди рдЧреЛ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рдХрд╛рдо рдХрд░реЗрдВ: рдкреНрд░рдерд╛рдУрдВ, рд╕реБрд╡рд┐рдзрд╛рдУрдВ, рдмрд╛рд░реАрдХрд┐рдпреЛрдВ</a></li>
<li><a href="../hi461937/index.html">рдкрд╛рд░реНрдХрд┐рдВрд╕рдВрд╕ рдХрд╛рдиреВрди рдФрд░ рдЗрд╕реЗ рдХреИрд╕реЗ рддреЛрдбрд╝рдирд╛ рд╣реИ</a></li>
<li><a href="../hi461941/index.html">рдЗрд╕рд╕реЗ рдорд╛рд▓рд┐рд╢ рдХрд░реЗрдВ</a></li>
<li><a href="../hi461945/index.html">рдЕрдЧрд╕реНрдд 2019 рдХреЗ рд▓рд┐рдП рдЖрдИрдЯреА рдХреЗ рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдорд╛рдирд╡ рд╕рдВрд╕рд╛рдзрди рдкреЗрд╢реЗрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП рдШрдЯрдирд╛рдУрдВ рдХрд╛ рдкрд╛рдЪрди</a></li>
<li><a href="../hi461949/index.html">AppCode 2019.2: рд╕реНрд╡рд┐рдлреНрдЯ 5.1, рдкрд░реАрдХреНрд╖рдгреЛрдВ рджреНрд╡рд╛рд░рд╛ рдХреЛрдб рдХрд╡рд░реЗрдЬ рдХрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг, рдЕрд╕рдВрддреБрд╖реНрдЯ рдХреЛрдб рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдФрд░ рдмрд╣реБрдд рдХреБрдЫ</a></li>
<li><a href="../hi461951/index.html">рд╡реАрдПрдкреА рдкреНрд▓рдЧ-рдЗрди рдмреИрдХрдЕрдк рдФрд░ рдПрд╕рдПрдкреА рд╣рд╛рдирд╛ рдбреЗрдЯрд╛рдмреЗрд╕ рдХреА рд╡рд╕реВрд▓реА рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi461955/index.html">рдПрдХреНрд╕рдЪреЗрдВрдЬ рдЯреЛрдХрди рдпрд╛ 2019 рдореЗрдВ рдХреНрд░рд┐рдкреНрдЯреЛ рдкреЛрд░реНрдЯрдлреЛрд▓рд┐рдпреЛ рдХреЛ рдХреИрд╕реЗ рдордЬрдмреВрдд рдХрд┐рдпрд╛ рдЬрд╛рдП</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>