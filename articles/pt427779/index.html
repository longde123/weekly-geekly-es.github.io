<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ“” ğŸ–•ğŸ¼ ğŸ‘¨ğŸ»â€ğŸš€ Curso MIT "SeguranÃ§a de sistemas de computadores". Aula 13: Protocolos de Rede, Parte 3 ğŸ•ºğŸ¿ ğŸ‘¨ğŸ¿â€ğŸ”§ ğŸ—ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Instituto de Tecnologia de Massachusetts. Curso de Aula nÂº 6.858. "SeguranÃ§a de sistemas de computador". Nikolai Zeldovich, James Mickens. 2014 ano 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Curso MIT "SeguranÃ§a de sistemas de computadores". Aula 13: Protocolos de Rede, Parte 3</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/427779/"><h3>  Instituto de Tecnologia de Massachusetts.  Curso de Aula nÂº 6.858.  "SeguranÃ§a de sistemas de computador".  Nikolai Zeldovich, James Mickens.  2014 ano </h3><br>  Computer Systems Security Ã© um curso sobre o desenvolvimento e implementaÃ§Ã£o de sistemas de computador seguros.  As palestras abrangem modelos de ameaÃ§as, ataques que comprometem a seguranÃ§a e tÃ©cnicas de seguranÃ§a baseadas em trabalhos cientÃ­ficos recentes.  Os tÃ³picos incluem seguranÃ§a do sistema operacional (SO), recursos, gerenciamento de fluxo de informaÃ§Ãµes, seguranÃ§a de idiomas, protocolos de rede, seguranÃ§a de hardware e seguranÃ§a de aplicativos da web. <br><br>  Palestra 1: â€œIntroduÃ§Ã£o: modelos de ameaÃ§asâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 2: â€œControle de ataques de hackersâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 3: â€œEstouros de Buffer: ExploraÃ§Ãµes e ProteÃ§Ã£oâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 4: â€œSeparaÃ§Ã£o de PrivilÃ©giosâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 5: â€œDe onde vÃªm os sistemas de seguranÃ§a?â€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> <br>  Palestra 6: â€œOportunidadesâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 7: â€œSandbox do Cliente Nativoâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 8: â€œModelo de SeguranÃ§a de Redeâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 9: â€œSeguranÃ§a de aplicativos da Webâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Palestra 10: â€œExecuÃ§Ã£o SimbÃ³licaâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 11: â€œLinguagem de ProgramaÃ§Ã£o Ur / Webâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 12: SeguranÃ§a de rede <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <br>  Aula 13: â€œProtocolos de Redeâ€ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 1</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 2</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Parte 3</a> <a name="habracut"></a><br><br>  Suponha que um cliente emita uma solicitaÃ§Ã£o para receber uma mensagem especÃ­fica, por exemplo, â€œme dÃª a mensagem nÂº 7â€ e criptografe essa coisa com a chave Kc, mail.  Tudo parece maravilhoso. <br>  O servidor de email possui uma chave compartilhada que descriptografarÃ¡ esta mensagem, apÃ³s a qual o servidor enviarÃ¡ de volta ao cliente o corpo dessa mensagem de email, tambÃ©m criptografada com o Kc, mail.  AlguÃ©m vÃª isso como um problema?  Por que isso pode ser ruim? <br><br><img src="https://habrastorage.org/webt/zg/se/x8/zgsex8vs0-rw-ek8lnahdh6zi3c.jpeg"><br><br>  <b>Aluno:</b> existe a possibilidade de um hacker substituir uma mensagem ou falsificÃ¡-la. <br><br>  <b>Professor:</b> sim, isso Ã© preocupante, pois posso enviar qualquer e-mail que desejar.  Suponha que pretendo excluir algumas mensagens da sua caixa de entrada porque nÃ£o quero que vocÃª as leia.  Suponha que esta letra esteja no nÃºmero 23. <br><br>  Portanto, vou lhe enviar uma carta que diz: "apague o nÃºmero 23" e vocÃª a lerÃ¡.  VocÃª o receberÃ¡, e a resposta vinda do servidor de correio com o comando â€œdelete No. 23â€ serÃ¡ criptografada com essa chave Kc, mail.  E atÃ© agora nÃ£o foi enviado para o servidor de correio. <br><br>  Mas se eu digitalizar a rede no momento certo e confirmar esse pacote, posso enviÃ¡-lo de volta ao servidor de email.  SerÃ¡ semelhante Ã  mensagem "delete No. 23", criptografada usando a chave.  Nesse caso, o servidor de correio dirÃ¡: "Ah, sim, claro, vocÃª deseja excluir esta mensagem e eu o farei!" <br><br>  Portanto, hÃ¡ um problema aqui, porque permitimos que o adversÃ¡rio confunda o servidor de correio se nossa mensagem foi gerada por ele ou enviada a ele em primeiro lugar. <br><br>  Ã‰ o que Ã© comumente referido nas descriÃ§Ãµes de criptografia e protocolo como um "ataque de reflexÃ£o".  VocÃª tem alguma sugestÃ£o sobre como evitar esse problema? <br><br>  <b>Aluno: Ã©</b> possÃ­vel simplesmente incluir um cabeÃ§alho de mensagem que fale de sua origem? <br><br>  <b>Professor:</b> sim, como regra, vocÃª deseja ter algum tipo de maneira inequÃ­voca de declarar o que estÃ¡ acontecendo.  Uma maneira Ã© ter um cabeÃ§alho em cada mensagem que diz: â€œdo cliente para o servidorâ€ ou â€œdo servidor para o clienteâ€.  Uma maneira ainda melhor na prÃ¡tica Ã© simplesmente usar duas chaves separadas. <br><br>  Porque vocÃª pode querer ter um fluxo de dados longo que pode nÃ£o ter espaÃ§o para os bits do cabeÃ§alho.  Assim, cada vez que vocÃª estabelece uma conexÃ£o com um serviÃ§o, o Kerberos 5 negocia o uso de duas chaves em vez de uma.  A primeira chave serÃ¡ usada para criptografar dados do cliente para o servidor e a segunda para criptografar dados do servidor de volta para o cliente.  Este Ã© o mÃ©todo de proteÃ§Ã£o mais ideal para uso prÃ¡tico. <br><br>  Vamos falar agora sobre o que estÃ¡ acontecendo com o KDC.  O servidor Kerberos Ã© muito importante para o sistema, mas o que acontece se esse KDC travar?  QuÃ£o ruim Ã© isso para o nosso sistema?  Como a "queda" do KDC afetarÃ¡ sua vida se vocÃª usar o Athena? <br><br>  <b>Aluno: vocÃª</b> provavelmente nÃ£o consegue fazer login? <br><br>  <b>Professor:</b> sim, Ã©.  Em segundo lugar, vocÃª tambÃ©m nÃ£o poderÃ¡ obter tickets para novos pedidos.  Mas o mais interessante Ã© que o KDC estÃ¡ praticamente fora do caminho crÃ­tico para uma conexÃ£o existente.  Portanto, nenhum dado passa pelo KDC.  E se vocÃª jÃ¡ possui um ticket para alguma coisa, pode continuar a usÃ¡-lo e manter a entrada para alguns serviÃ§os de rede.  Isso Ã© realmente muito bem armazenado em cache.  Eu acho que a segunda coisa boa que os desenvolvedores imaginaram Ã© o potencial de replicar o KDC.  Portanto, o sistema possui um servidor Kerberos principal, que armazena a cÃ³pia inicial de todo o banco de dados.  Isso permite que vocÃª leia apenas rÃ©plicas que contÃªm uma cÃ³pia do banco de dados inicial.  Ele nÃ£o permite nenhuma atualizaÃ§Ã£o, como registro do usuÃ¡rio ou atualizaÃ§Ãµes de chave, mas permite responder a solicitaÃ§Ãµes de login e TGS. <br><br>  Portanto, o registro de "clone" do banco de dados Kerberos permite que vocÃª continue efetuando login e se comunique com os serviÃ§os, mesmo se o KDC falhar, atÃ© que seja eliminado e sua funcionalidade completa seja restaurada. <br><br>  <b>Aluno:</b> quÃ£o difÃ­cil Ã© comprometer o servidor KDC e o sistema como um todo? <br><br>  <b>Professor:</b> KDC Ã© a espinha dorsal de qualquer sistema que executa o Kerberos.  Se esse serviÃ§o for comprometido, o invasor obterÃ¡ controle completo sobre o sistema.  Ele poderÃ¡ obter tickets para qualquer serviÃ§o que desejar, fingindo ser o cliente certo, por isso Ã© muito ruim.  NÃ³s realmente queremos manter o KDC seguro, mas Ã© difÃ­cil.  Embora eu nÃ£o conheÃ§a um Ãºnico caso em que o KDC MIT estaria realmente comprometido por cerca de 20 anos.  Mas, aparentemente, o que realmente vale a pena se preocupar Ã© a implementaÃ§Ã£o de software da seguranÃ§a das coisas que esses dois serviÃ§os trocam, Kerberos e TGS.  Como se ocorrer um estouro de buffer ou surgir alguma outra vulnerabilidade semelhante, isso Ã© muito ruim. <br><br><img src="https://habrastorage.org/webt/pg/e4/8_/pge48_xze8liwroytuzamq7p-7k.jpeg"><br><br>  Por exemplo, se um servidor SSH estiver em execuÃ§Ã£o no KDC Kerberos e alguÃ©m adivinhar a senha raiz desse servidor SSH, ele simplesmente farÃ¡ login e copiarÃ¡ o banco de dados.  EntÃ£o, eu acho que vocÃª realmente deseja minimizar a superfÃ­cie de ataque aqui; portanto, tenha muito cuidado ao escrever o cÃ³digo KDC.  NÃ£o permita que ninguÃ©m acesse diretamente este serviÃ§o.  Obviamente, existem alguns lugares em que vocÃª deve ser considerado paranÃ³ico em relaÃ§Ã£o Ã  seguranÃ§a, mas isso nÃ£o Ã© tÃ£o importante para os servidores.  Obviamente, eles armazenam dados, mas se alguÃ©m invadir um servidor de correio ou servidor de impressÃ£o, eles poderÃ£o ser restaurados. <br><br>  Aqui estÃ¡ uma pergunta interessante.  Suponha que alguÃ©m tenha hackeado um servidor de email.  O que vocÃª deve fazer para se recuperar desse ataque?  Por exemplo, se alguÃ©m roubou seu e-mail, isso Ã© ruim.  Mas o que deve ser feito para impedir que um invasor obtenha acesso a seus e-mails no futuro? <br><br>  O Kerberos nÃ£o possui uma operaÃ§Ã£o de cancelamento, mas vocÃª pode gerar uma nova chave para o servidor de correio e colÃ¡-la no banco de dados KDC.  Em seguida, vocÃª instala um novo servidor de email, fornece uma nova chave e, em seguida, algum invasor que possui uma chave antiga do servidor de email nÃ£o pode influenciÃ¡-lo de nenhuma maneira. <br><br>  Por outro lado, suponha que vocÃª nÃ£o altere a chave do servidor de correio, o Kmail.  O que isso levarÃ¡? <br><br><img src="https://habrastorage.org/webt/gk/vs/sk/gkvssk_j0lemoi7eajculgbyrmo.jpeg"><br><br>  <b>Aluno: a</b> chave nÃ£o cabe no novo servidor. <br><br>  <b>Professor:</b> bem, suponha que vocÃª instale um novo servidor de email, corrigindo o erro que o hacker usou.  Mas ele ainda tem uma chave do Kmail.  Talvez a recuperaÃ§Ã£o do servidor tenha demorado um dia inteiro, para que todos os tickets expirassem.  Esse hacker pode fazer algo interessante com o sistema?  Se vocÃª fornecer o Kmail antigo para o novo servidor de email - isso Ã© ruim? <br><br>  <b>Estudante:</b> um invasor pode se infiltrar em um servidor de correio porque pode descriptografar o primeiro ticket. <br><br>  <b>Professor: com</b> certeza, Ã© por isso que o Kmail Ã© realmente muito importante.  VocÃª diz que pode descriptografar tudo o que acontece no servidor de email.  Suponha que o cliente se conecte ao servidor de email apÃ³s corrigi-lo, mas o invasor ainda conhece o Kmail, que permaneceu desde o Ãºltimo hacking do sistema.  Portanto, ele pode descriptografar esse ticket do Kmail, olhar dentro do ticket e obter uma chave de sessÃ£o.  Com ele, ele serÃ¡ capaz de descriptografar todas as mensagens que vocÃª enviar, todas as respostas que vocÃª receber, e assim por diante.  Portanto, apÃ³s restaurar o servidor de email, Ã© muito importante alterar este Kmail. <br><br>  De muitas maneiras, isso Ã© ainda pior do que simplesmente rastrear o trÃ¡fego, porque se um invasor conhece essa chave do Kmail, ele pode sintetizar novos tickets para o servidor de email sem entrar em contato com o KDC.  Suponha que eu conheÃ§a o Kmail e queira ler mensagens de um servidor de mensagens.  Vou apenas emitir esse tÃ­quete, reunirei todos esses cinco campos na ordem correta, gerarei uma nova chave e criptografarei usando o Kmail.  SerÃ¡ semelhante Ã  coisa real gerada pelo KDC. <br><br>  Portanto, basta conectar-me ao servidor de email, ele descriptografarÃ¡ a mensagem corretamente e pensarÃ¡ que Ã© um usuÃ¡rio especÃ­fico, para que vocÃª possa enviar e-mail, compartilhar uma chave compartilhada e assim por diante.  Portanto, Ã© fundamental que ninguÃ©m reconheÃ§a a chave secreta desse serviÃ§o, pois, caso contrÃ¡rio, vocÃª poderÃ¡ nÃ£o apenas tornar o trÃ¡fego descriptografÃ¡vel e visÃ­vel, mas tambÃ©m imitar qualquer pessoa nesse serviÃ§o. <br><br>  <b>Aluno:</b> se o servidor de email for restaurado apÃ³s uma falha, provavelmente vocÃª precisarÃ¡ alterar sua chave no banco de dados? <br><br>  <b>Professor:</b> sim, depois de restaurar o servidor de email apÃ³s a falha, vocÃª precisa ligar para o funcionÃ¡rio que trabalha com este KDC e dizer: "nosso servidor de email foi hackeado, exclua sua chave Ks antiga do banco de dados e insira uma nova!"  Portanto, vocÃª provavelmente desejarÃ¡ ter algum tipo de mecanismo fora do banco de dados para provar que realmente Ã© um servidor de correio. <br><br>  Porque veremos em um segundo como vocÃª altera as chaves, por exemplo, usando o protocolo de alteraÃ§Ã£o de senha.  VocÃª pode senhas no protocolo Kerberos, porque se vocÃª souber a senha antiga, poderÃ¡ alterar a senha do usuÃ¡rio para a nova senha no KDC.  Mas como o hacker pode interceptar a senha enviada pelo correio, vocÃª provavelmente precisarÃ¡ entrar em contato com o escritÃ³rio de registro da conta e solicitar que ele mude sua senha para o servidor de correio.  Eles irÃ£o gerar uma nova chave e entregÃ¡-la para que o hacker nÃ£o possa reconhecÃª-la. <br><br><img src="https://habrastorage.org/webt/qu/hc/g7/quhcg7c1wxo9vslewqzvam_qkl0.jpeg"><br><br>  Caso contrÃ¡rio, se o invasor conhecer essa chave do Kmail, o servidor de email nÃ£o terÃ¡ nada para diferenciar o invasor do cliente correto.  Na realidade, o invasor provavelmente alterou a chave, agora eles conhecem os novos parÃ¢metros e vocÃª nÃ£o estÃ¡ lÃ¡, como se nÃ£o estivesse mais no servidor de email.  Portanto, vocÃª precisa de protocolos externos para os princÃ­pios do registro inicial no banco de dados e para alterar as chaves se vocÃª esqueceu sua senha ou alguÃ©m alterou sua senha para que vocÃª perdesse o acesso. <br><br>  Portanto, hÃ¡ um grupo de pessoas no MIT que ajuda os usuÃ¡rios a registrar contas e alterar suas senhas.  Para fazer isso, vocÃª apresenta seu ID do MIT e, aconteÃ§a o que acontecer, eles poderÃ£o alterar a chave para vocÃª. <br><br>  Portanto, Ã© muito importante fazer o certo.  Porque se a pessoa que permite redefinir a senha estiver errada ao verificar seu ID do MIT, vocÃª poderÃ¡ comprometer o sistema, certo?  Portanto, essas pessoas na Kerberos fazem parte de uma base de computaÃ§Ã£o confiÃ¡vel. <br><br>  Vejamos outro uso interessante do Kerberos.  VocÃª pode usar o Kerberos para efetuar login em um computador remoto via SSH.  E o modo como funciona Ã© muito semelhante ao trabalho com um servidor de correio.  VocÃª recebe um ticket para o servidor SSH e envia o ticket junto com sua conexÃ£o SSH.  Mas e se vocÃª se conectar ao Athena.dial-up e nÃ£o tiver um cliente Kerberos no seu computador?  VocÃª sÃ³ deseja fazer login no Athena.dial-up com sua senha normal. <br><br>  EntÃ£o, como o Dial-up Athena o autentica se vocÃª acabou de se conectar a esta mÃ¡quina com uma senha?  VocÃª nÃ£o tem uma senha para Athena.dial-up, Ã© uma senha para o servidor Kerberos.  EntÃ£o, o que um computador dial-up deve fazer se vocÃª fizer login com uma senha? <br><br>  A discagem dial-up funcionarÃ¡ usando o mesmo protocolo que o logon.  Portanto, ele enviarÃ¡ uma solicitaÃ§Ã£o do cliente ao servidor Kerberos com uma solicitaÃ§Ã£o para fornecer um ticket, por exemplo, ao nome de usuÃ¡rio "Alice".  AlÃ©m disso, o cliente receberÃ¡ uma resposta criptografada com a senha de Alice.  Em seguida, ele tentarÃ¡ aplicar a senha e verificar se ele descriptografa corretamente.  Se descriptografar corretamente, vocÃª poderÃ¡ efetuar login no sistema. <br><br>  <b>Aluno:</b> vocÃª nem precisa enviar sua chave ao servidor SSH, pois, nesse caso, o servidor KDS pode enviar o usuÃ¡rio Kc de volta atravÃ©s da conexÃ£o SSH. <br><br>  <b>Professor:</b> Ã© possÃ­vel que sim, mas requer alguma imaginaÃ§Ã£o do cliente SSH, o que pode nÃ£o ser.  Mas, em princÃ­pio, isso Ã© verdade.  Se vocÃª quiser fazer isso corretamente, provavelmente desejarÃ¡ ter um cliente Kerberos no seu computador e obter um ticket, ou talvez usar um servidor SSH para encaminhar, embora nÃ£o permita que o servidor SSH tenha sua chave. <br><br>  Este Ã© provavelmente um bom plano.  Mas acontece que, de fato, isso Ã© algo bastante perigoso que permite que qualquer pessoa efetue login no servidor SSH.  Anteriormente, falamos sobre um cliente tentando fazer login.  Esse cliente sabia que, ao fornecer uma senha legal, ele recebeu uma resposta do servidor Kerberos correto e, se conseguir descriptografar a resposta, provavelmente a senha funcionarÃ¡ corretamente. <br><br>  No entanto, nÃ£o hÃ¡ nada neste protocolo que confirme o fato de que essa resposta vem do servidor Kerberos correto.  Portanto, se eu tentar fazer login na mÃ¡quina simplesmente digitando uma senha, a mÃ¡quina enviarÃ¡ essa solicitaÃ§Ã£o ao servidor.  Em seguida, a resposta serÃ¡ retornada a essa solicitaÃ§Ã£o, que parece estar criptografada com a senha que eu inseri, mas essa resposta tambÃ©m pode nÃ£o ser do servidor Kerberos. <br><br>  Suponha que eu tenha uma mÃ¡quina com a qual quero fazer login.  Eu digito a senha X e a mÃ¡quina envia essa solicitaÃ§Ã£o de, s para o servidor Kerberos. <br><br><img src="https://habrastorage.org/webt/me/2k/z5/me2kz5r_ewynn9cu1vjdubcx6yo.jpeg"><br><br>  Mas antes que o servidor Kerberos envie a resposta real ao cliente, enviarei minha prÃ³pria resposta, que parece a resposta real, criptografada com minha senha X. E entÃ£o a estaÃ§Ã£o de trabalho na qual estou tentando fazer login ou o servidor SSH tentarÃ¡ descriptografar essa resposta com minha senha falsa.  Isso ficarÃ¡ bem, porque essa resposta foi gerada por mim em vez do servidor Kerberos real.  Portanto, posso efetuar login em vez de vocÃª.  Por que isso estÃ¡ acontecendo? <br><br>  <b>Aluno:</b> porque nÃ£o hÃ¡ autenticaÃ§Ã£o do servidor Kerberos. <br><br>  <b>Professor:</b> sim, nÃ£o hÃ¡ nada aqui que vincule isso a um servidor Kerberos real.  A maneira como o Kerberos corrige esse inconveniente em computadores remotos, como o Athena.dial-up, Ã© que os prÃ³prios computadores dial-up tÃªm um tipo de chave secreta que compartilham com o KDC.  Portanto, para entrar na discagem ou em qualquer estaÃ§Ã£o de trabalho que realmente se preocupe em verificar se vocÃª Ã© realmente o usuÃ¡rio certo, duas coisas sÃ£o feitas. <br><br>  O primeiro logon no Kerberos ocorre como mostrado no diagrama.  Mas ele nÃ£o confiarÃ¡ em ninguÃ©m apenas porque esta resposta foi descriptografada corretamente.  Ele tentarÃ¡ obter uma multa de serviÃ§o usando o TGS, porque esse computador dial-up possui sua prÃ³pria chave secreta.  Na primeira etapa, ele simplesmente registra vocÃª e depois se volta para o TGS, dizendo: "por favor, me dÃª uma multa de serviÃ§o por meu prÃ³prio princÃ­pio, com base na discagem, para esse cliente". <br><br>  Em seguida, ele recebe uma resposta e verifica se pode descriptografÃ¡-la corretamente, porque conhece a tecla de discagem desses Ks.  E se descriptografar, significa que o computador estava conversando com o servidor Kerberos correto.  Porque apenas o servidor Kerberos correto no segundo estÃ¡gio pode me enviar um ticket criptografado com minha chave secreta do Kdial-up. <br><br>  EntÃ£o isso Ã© realmente muito importante.  Normalmente, as estaÃ§Ãµes de trabalho Athena nÃ£o executam essa etapa extra porque as estaÃ§Ãµes de trabalho Athena nÃ£o possuem uma chave secreta armazenada e compartilhada com o KDC.  Por que Ã© considerado normal que as estaÃ§Ãµes de trabalho Athena ofereÃ§am a vocÃª a oportunidade de efetuar login no primeiro estÃ¡gio, mas nÃ£o a oportunidade de acesso discado? <br><br>  <b>Aluno:</b> isso Ã© normal se vocÃª nÃ£o tiver acesso a nenhum serviÃ§o porque o invasor nÃ£o conseguiu falsificar um ticket. <br><br>  <b>Professor:</b> sim, isso Ã© verdade, porque nÃ£o hÃ¡ nada interessante na prÃ³pria estaÃ§Ã£o de trabalho dial-up.  Mesmo se vocÃª tiver acesso root ou entrar em uma estaÃ§Ã£o de trabalho com uma senha falsa, isso nÃ£o incomoda ninguÃ©m.  NÃ£o Ã© como se eles pudessem fazer outra coisa fora da estaÃ§Ã£o de trabalho.  Na discagem, tudo Ã© muito mais interessante.  Talvez vocÃª tenha outros processos em execuÃ§Ã£o em outras sessÃµes na estaÃ§Ã£o de trabalho dial-up, e o fato de estar conectado com um UID especÃ­fico do Unix, e eles realmente querem ter certeza de que vocÃª Ã© a entidade certa, Ã© importante. .  Ã‰ por isso que eles realizam um processo de duas etapas para entrar na mÃ¡quina, que Ã© usada simultaneamente por vÃ¡rios usuÃ¡rios. <br><br>  A Ãºltima coisa que quero falar Ã© sobre como substituÃ­mos as chaves.  Apresentamos a ideia de que vocÃª pode comprometer a chave do servidor de correio.  Mas como usuÃ¡rio, vocÃª provavelmente tambÃ©m deseja alterar a senha.  Por exemplo, vocÃª pensou que sua senha nÃ£o era segura o suficiente, vocÃª a escreveu em um pedaÃ§o de papel e alguÃ©m pode ter espionado, entÃ£o agora vocÃª deseja alterÃ¡-la. <br><br>  Em certo sentido, Ã© bastante simples.  AlÃ©m dos serviÃ§os Kerberos e TGS, a interface do servidor Kerberos possui um serviÃ§o adicional chamado Kpassword, que permite alterar sua senha. <br><br><img src="https://habrastorage.org/webt/zj/y8/gx/zjy8gx7oozfj50360gne0ofsgvm.jpeg"><br><br>  VocÃª recebe um ticket para usar este serviÃ§o, assim como um ticket para um servidor de correio ou qualquer outro servidor.  Depois disso, vocÃª envia sua nova senha para este serviÃ§o Kpassword, criptografada com sua chave de sessÃ£o.  E entÃ£o, se todas as verificaÃ§Ãµes passarem, sua chave no banco de dados serÃ¡ atualizada com uma nova chave. <br><br>  Se vocÃª se lembra, tÃ­nhamos um objetivo: se alguÃ©m roubar seu bilhete, ele nÃ£o deve ser bom o suficiente para dar a oportunidade de capturar completamente sua conta.  Por esse motivo, o serviÃ§o Kpassword nÃ£o aceita nenhum ticket, mas apenas o ticket que vocÃª recebe inicialmente do serviÃ§o Kerberos com sua chave Kc.      :   ,     ,   ,   ,      â€“ Kerberos  TGS â€“    .  :       Kerberos,   ,       TGS,    . <br>  Kpassword,  ,       ,     : Â«,      Kerberos,   .       TGS,  , , ,   - ,       .        Â». <br><br>  , Kpassword ,     ,        ,       Kerberos.  ,     Kpassword  ,         Kerberos  Kpassword. <br><br>      Kpassword,     - . ,     ,          Kerberos.       Kerberos,     ID    ,      Kpassword. <br><br><img src="https://habrastorage.org/webt/x4/c7/h8/x4c7h8z8eixciai6bewebqiw6dk.jpeg"><br><br>    Kerberos   ,          Kpassword,   Kpass,     Kc,kpass     Kpassword,    Kc. <br><br>    ,         â€“     Kpassword,      Tc,kpass,     Kpass,  ,      new pass       Kc,pass,    . <br><br> ,      ,  , ,   .    -     Athena,      ,      ,  ,      .       , ,  Gmail,     ,    . ,        Kerberos   TGS   ,   -   ,          . <br><br> ,  -    Athena  ,     ,     ,   .  ,               .     ,   .     Tc,kpass,      Kpassword,       TGS,    .        ,        Kerberos   Kc. <br><br> <b>:</b>  ,      ? <br><br> <b>:</b>    K   .  Kerberos     ,     .     ,       K.  -  K,      . <br><br> <b>:</b>   ,      ? <br><br> <b>:</b> ,      -  ,          ,        .        . <br><br>   ,      ,    ,     ,    ,        ,     . <br><br> <b>:</b> ,      ,       . <br><br> <b>:</b> ,   ,     .  , , Kerberos      ,   ,       .          ,    .          .     ,   ,        . <br><br> <b>:</b>          K,     ? <br><br> <b>:</b>   ,  K â€“  56-  DES,       , ,  56 , , 7 ,         .           . <br><br>    ,     ,    . ,    ,  ,     ,       .     Kerberos? <br><br><img src="https://habrastorage.org/webt/39/at/mk/39atmkdgs6dxvozlcbkbpjhmpjy.jpeg"><br><br> <b>:</b>      â€¦ <br><br> <b>:</b> , ,  ,      , ,   ,       .         ? <br><br> <b>:</b>     . <br><br> <b>:</b> ,       . <br><br> <b>:</b>  -   ,  , ,    ,      â€¦ <br><br> <b>:</b> ,   ,    Kerberos ,          ,   ,      .      . ,  ,    ,     Â«Â»  -  ,    !    : â€,       Kc,pass,        K.      Kc,pass  ,        KpasswordÂ».     ,    ,     KDC.        ,           . <br>  ,         ,    -    ,  -               .       . <br><br> <b>:</b> ,    Kerberos    ? <br><br> <b>:</b> , .      Â« -Â»,    ,   ,   .         ,       . <br><br> ,         Kerberos 5.   ,         ,    ,         .     ,      . ,      X,   Kpassword  -    Y.  ,     ,     .  ,    g   X  ,      g   Y. <br><br><img src="https://habrastorage.org/webt/5n/au/u6/5nauu6bp5aruxtrgbzdxxidyyz0.jpeg"><br><br>     gy      X,     gxy,     gx      Y       gxy.        gxy     ,   .  ,      ,   gxy.    ,      ,  -     gxy,    .  ,     . <br><br> <b>:</b>   -       G. <br><br> <b>:</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sim claro. </font><font style="vertical-align: inherit;">G Ã© um parÃ¢metro que vocÃª pode enviar no inÃ­cio do protocolo ou colocar com antecedÃªncia no Kerberos, nÃ£o Ã© muito importante. </font><font style="vertical-align: inherit;">De qualquer forma, se vocÃª usar o protocolo de criptografia de troca Diffie-Hellman, o Kerberos 5 farÃ¡ isso corretamente. </font><font style="vertical-align: inherit;">Mas vocÃª precisa saber sobre a existÃªncia desse protocolo se estiver desenvolvendo algum protocolo novo. </font><font style="vertical-align: inherit;">EntÃ£o, era tudo o que eu queria falar sobre o Kerberos e, na segunda-feira, vamos falar sobre SSL.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/QOtA76ga_fY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A versÃ£o completa do curso estÃ¡ disponÃ­vel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br>  Obrigado por ficar conosco.  VocÃª gosta dos nossos artigos?  Deseja ver materiais mais interessantes?  Ajude-nos fazendo um pedido ou recomendando a seus amigos, um <b>desconto de 30% para os usuÃ¡rios da Habr em um anÃ¡logo exclusivo de servidores bÃ¡sicos que inventamos para vocÃª:</b> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Toda a verdade sobre o VPS (KVM) E5-2650 v4 (6 nÃºcleos) 10GB DDR4 240GB SSD 1Gbps da US $ 20 ou como dividir o servidor?</a>  (as opÃ§Ãµes estÃ£o disponÃ­veis com RAID1 e RAID10, atÃ© 24 nÃºcleos e atÃ© 40GB DDR4). <br><br>  <b>VPS (KVM) E5-2650 v4 (6 nÃºcleos) 10GB DDR4 240GB SSD de 1Gbps atÃ© dezembro de graÃ§a</b> quando pagar por um perÃ­odo de seis meses, vocÃª pode fazer o pedido <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> . <br><br>  <b>Dell R730xd 2 vezes mais barato?</b>  Somente nÃ³s temos <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">2 TVs Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 a partir de US $ 249</a> na Holanda e nos EUA!</b>  Leia sobre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como criar um prÃ©dio de infraestrutura.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">classe usando servidores Dell R730xd E5-2650 v4 custando 9.000 euros por um centavo?</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt427779/">https://habr.com/ru/post/pt427779/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt427763/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Aula 13: Protocolos de Rede, Parte 1</a></li>
<li><a href="../pt427767/index.html">SituaÃ§Ã£o: no CanadÃ¡, eles propuseram a introduÃ§Ã£o de um imposto sobre streaming - estamos discutindo qual Ã© o problema.</a></li>
<li><a href="../pt427771/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Aula 13: Protocolos de Rede, Parte 2</a></li>
<li><a href="../pt427773/index.html">Eu escrevi uma extensÃ£o entre navegadores para guias, mas vocÃª nÃ£o faz isso</a></li>
<li><a href="../pt427775/index.html">Um bot disfarÃ§ado de programador corrige erros no cÃ³digo</a></li>
<li><a href="../pt427781/index.html">Por que a ciÃªncia de dados das organizaÃ§Ãµes de crÃ©dito</a></li>
<li><a href="../pt427783/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 14: â€œSSL e HTTPSâ€, parte 1</a></li>
<li><a href="../pt427785/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 14: â€œSSL e HTTPSâ€, parte 2</a></li>
<li><a href="../pt427787/index.html">Curso MIT "SeguranÃ§a de sistemas de computadores". Palestra 14: â€œSSL e HTTPSâ€, parte 3</a></li>
<li><a href="../pt427789/index.html">Exxon Mobil acusada de manipular dados de impacto ambiental da empresa para enganar investidores</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>