<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèº‚Äçüè´ üéÅ üàµ Precio JavaScript 2019 üë©üèª‚Äçü§ù‚Äçüë®üèæ üïï üõåüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En los √∫ltimos a√±os, lo que se llama el " precio de JavaScript " ha visto grandes cambios positivos debido a la mayor velocidad de an√°lisis y la compi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Precio JavaScript 2019</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/459296/">  En los √∫ltimos a√±os, lo que se llama el " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">precio de JavaScript</a> " ha visto grandes cambios positivos debido a la mayor velocidad de an√°lisis y la compilaci√≥n de scripts en el navegador.  Ahora, en 2019, los componentes principales de la carga en los sistemas creados por JavaScript son el tiempo de carga de los scripts y su tiempo de ejecuci√≥n. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/7x/g6/g_/7xg6g_poas_6_4qwu5u4clgjxrs.jpeg"></a> <br><br>  La interacci√≥n del usuario con el sitio puede verse interrumpida temporalmente si el navegador est√° ocupado ejecutando c√≥digo JavaScript.  Como resultado, podemos decir que la optimizaci√≥n de los cuellos de botella asociados con la carga y ejecuci√≥n de scripts puede tener un fuerte impacto positivo en el rendimiento del sitio web. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Pautas pr√°cticas generales para la optimizaci√≥n del sitio web</font> </h2><br>  ¬øQu√© significa lo anterior para los desarrolladores web?  El punto aqu√≠ es que el costo de los recursos para analizar (analizar, analizar) y compilar scripts no es tan grave como antes.  Por lo tanto, al analizar y optimizar paquetes de JavaScript, los desarrolladores deben considerar las siguientes tres recomendaciones: <br><br><ol><li>  Intente reducir el tiempo requerido para descargar scripts. <br><br><ul><li>  Intenta mantener tus paquetes JS peque√±os.  Esto es especialmente importante para los sitios dise√±ados para dispositivos m√≥viles.  El uso de paquetes peque√±os mejora el tiempo de carga del c√≥digo, reduce el nivel de uso de memoria y reduce la carga en el procesador. </li><li>  Intente evitar que todo el c√≥digo del proyecto se presente como un gran paquete.  Si el tama√±o del paquete excede aproximadamente 50-100 Kb, div√≠dalo en fragmentos separados de un tama√±o peque√±o.  Gracias a la multiplexaci√≥n HTTP / 2, se pueden procesar simult√°neamente m√∫ltiples solicitudes de servidor y m√∫ltiples respuestas.  Esto reduce la carga en el sistema asociada con la necesidad de cumplir con solicitudes adicionales de carga de datos. </li><li>  Si est√° trabajando en un proyecto m√≥vil, intente mantener el c√≥digo lo m√°s peque√±o posible.  Esta recomendaci√≥n est√° asociada con bajas tasas de datos a trav√©s de redes m√≥viles.  Adem√°s, luche por el uso econ√≥mico de la memoria. </li></ul></li><li>  Intente reducir el tiempo requerido para ejecutar scripts. <br><br><ul><li> Evite usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tareas largas</a> que puedan cargar el hilo principal durante mucho tiempo y aumente el tiempo que tardan las p√°ginas en estar en un estado en el que los usuarios puedan interactuar con ellas.  En el entorno actual, las secuencias de comandos que se ejecutan despu√©s de cargarse contribuyen de manera importante al "precio de JavaScript". </li></ul></li><li>  No incruste fragmentos de c√≥digo grandes en las p√°ginas. <br><br><ul><li>  Aqu√≠ se debe cumplir la siguiente regla: si el tama√±o del script supera 1 Kb, intente no incrustarlo en el c√≥digo de la p√°gina.  Una de las razones de esta recomendaci√≥n es el hecho de que 1 Kb es el l√≠mite despu√©s del cual el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">almacenamiento</a> en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cach√©</a> del c√≥digo de script externo comienza a funcionar en Chrome.  Adem√°s, tenga en cuenta que el an√°lisis y la compilaci√≥n de scripts incrustados todav√≠a se est√° ejecutando en el hilo principal. </li></ul></li></ol><br><h2>  <font color="#3AC1EF">¬øPor qu√© es tan importante cargar y ejecutar scripts?</font> </h2><br>  ¬øPor qu√© es importante optimizar el tiempo de carga y ejecuci√≥n de los scripts en las condiciones modernas?  Los tiempos de carga de scripts son extremadamente importantes en situaciones donde se accede a los sitios a trav√©s de redes lentas.  A pesar del hecho de que las redes 4G (e incluso 5G) se est√°n extendiendo cada vez m√°s, la propiedad <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NetworkInformation.effectiveType</a> en muchos casos de usar conexiones de Internet m√≥vil muestra indicadores que est√°n en el nivel de las redes 3G o incluso en niveles m√°s bajos. <br><br>  El tiempo requerido para ejecutar el c√≥digo JS es importante para dispositivos m√≥viles con procesadores lentos.  Debido al hecho de que los dispositivos m√≥viles usan diferentes CPU y GPU, debido al hecho de que cuando los dispositivos se sobrecalientan, para protegerlos, el rendimiento de sus componentes disminuye, se puede observar una brecha grave entre el rendimiento de tel√©fonos y tabletas caros y baratos.  Esto afecta en gran medida el rendimiento del c√≥digo JavaScript, ya que la capacidad de ejecutar dicho c√≥digo por un dispositivo est√° limitada por las capacidades del procesador de este dispositivo. <br><br>  De hecho, si analizamos el tiempo total dedicado a cargar y preparar la p√°gina para trabajar en un navegador como Chrome, aproximadamente el 30% de este tiempo puede gastarse ejecutando c√≥digo JS.  A continuaci√≥n se muestra un an√°lisis de la carga de una p√°gina web muy t√≠pica (reddit.com) en una computadora de escritorio de alto rendimiento. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31d/8f6/af0/31d8f6af06d7158ecc9bd17710d216bb.png"></div><br>  <i><font color="#999999">En el proceso de carga de la p√°gina, aproximadamente el 10-30% del tiempo se dedica a la ejecuci√≥n de c√≥digo usando V8</font></i> <br><br>  Si hablamos de dispositivos m√≥viles, en un tel√©fono promedio (Moto G4) se tarda 3-4 veces m√°s en ejecutar reddit.com en un c√≥digo JS que en un dispositivo de alto nivel (Pixel 3).  En un dispositivo d√©bil (Alcatel 1X cuesta menos de $ 100), resolver el mismo problema requiere al menos 6 veces m√°s tiempo que algo como Pixel 3. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/71a/4f0/3a9/71a4f03a9f7d673740c6917f30cee360.png"></div><br>  <i><font color="#999999">El tiempo requerido para procesar el c√≥digo JS en dispositivos m√≥viles de diferentes clases.</font></i> <br><br>  Tenga en cuenta que las versiones m√≥vil y de escritorio de reddit.com son diferentes.  Por lo tanto, no puede comparar los resultados de dispositivos m√≥viles y, por ejemplo, MacBook Pro. <br><br>  Cuando intente optimizar el tiempo de ejecuci√≥n del c√≥digo JavaScript, preste atenci√≥n a las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tareas largas</a> que pueden capturar la transmisi√≥n de la interfaz de usuario durante mucho tiempo.  Estas tareas pueden impedir el cumplimiento de otras tareas extremadamente importantes, incluso cuando la p√°gina parece completamente lista para funcionar.  Las tareas a largo plazo deben dividirse en tareas m√°s peque√±as.  Al dividir el c√≥digo en partes y controlar el orden de carga de estas partes, puede lograr el hecho de que las p√°ginas llegar√°n a un estado interactivo m√°s r√°pido.  Esto, con suerte, llevar√° a los usuarios a tener menos inconvenientes para interactuar con las p√°ginas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/002/eef/32b/002eef32b869be9ae677bc41b41c86c2.png"></div><br>  <i><font color="#999999">Las tareas de larga duraci√≥n capturan el hilo principal.</font></i>  <i><font color="#999999">Deben romperse en pedazos</font></i> <br><br><h2>  <font color="#3AC1EF">¬øC√≥mo aceleran las mejoras de V8 el an√°lisis y la compilaci√≥n de scripts?</font> </h2><br>  La velocidad de analizar el c√≥digo fuente JS en V8, desde la √©poca de Chrome 60, ha aumentado en 2 veces.  Al mismo tiempo, el an√°lisis y la compilaci√≥n ahora contribuyen menos al "precio de JavaScript".  Esto es gracias a otros esfuerzos de optimizaci√≥n de Chrome que llevan a la paralelizaci√≥n de estas tareas. <br><br>  En V8, la cantidad de trabajo en el an√°lisis y compilaci√≥n de c√≥digo producido en el hilo principal se reduce en un promedio del 40%.  Por ejemplo, para Facebook, la mejora de este indicador fue del 46%, para Pinterest: 62%.  El resultado m√°s alto, 81%, se obtuvo para YouTube.  Tales resultados son posibles debido al hecho de que el an√°lisis y la compilaci√≥n se mueven a una secuencia separada.  Y esto se suma a las mejoras existentes con respecto a la soluci√≥n de transmisi√≥n de las mismas tareas fuera de la transmisi√≥n principal. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a7/41e/24c/4a741e24c05a9149d98ee568be74b564.png"></div><br>  <i><font color="#999999">Tiempo de an√°lisis JS en varias versiones de Chrome</font></i> <br><br>  Tambi√©n puede visualizar c√≥mo las optimizaciones V8 producidas en varias versiones de Chrome afectan el tiempo del procesador requerido para procesar el c√≥digo.  Al mismo tiempo que Chrome 61 necesitaba analizar el c√≥digo JS de Facebook, Chrome 75 ahora puede analizar el c√≥digo JS de Facebook y, adem√°s, analizar el c√≥digo de Twitter 6 veces. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/000/0e0/c6b0000e0b2bb98087ff12f8a9eb0d97.png"></div><br>  <i><font color="#999999">En el momento en que Chrome 61 necesitaba procesar el c√≥digo JS de Facebook, Chrome 75 puede procesar tanto el c√≥digo de Facebook como seis veces la cantidad de c√≥digo de Twitter.</font></i> <br><br>  Hablemos de c√≥mo se lograron tales mejoras.  En pocas palabras, los recursos del script se pueden analizar y compilar en modo de transmisi√≥n en el flujo de trabajo.  Esto significa lo siguiente: <br><br><ul><li>  V8 puede analizar y compilar c√≥digo JS sin bloquear el hilo principal. </li><li> El procesamiento continuo del script comienza cuando el analizador HTML universal encuentra la <code>&lt;script&gt;</code> .  Un analizador HTML maneja los scripts que bloquean el an√°lisis de p√°ginas.  Encontr√°ndose con guiones as√≠ncronos, √©l contin√∫a trabajando. </li><li>  En la mayor√≠a de los escenarios del mundo real, caracterizados por ciertas velocidades de conexi√≥n de red, el V8 analiza el c√≥digo m√°s r√°pido de lo que puede cargar.  Como resultado, V8 completa las tareas de analizar y compilar el c√≥digo unos milisegundos despu√©s de cargar los √∫ltimos bytes del script. </li></ul><br>  Si habla de todo esto con un poco m√°s de detalle, entonces el punto aqu√≠ es el siguiente.  En versiones mucho m√°s antiguas de Chrome, el script necesitaba ser descargado en su totalidad antes de analizarlo.  Este enfoque es simple y comprensible, pero cuando se usa, los recursos del procesador se usan irracionalmente.  Chrome, entre las versiones 41 y 68, comienza a analizar en modo as√≠ncrono, inmediatamente despu√©s de que el script comienza a cargar, realizando esta tarea en un hilo separado. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/574/43a/4fd/57443a4fd274a348de26652d006941c3.png"></div><br>  <i><font color="#999999">Las secuencias de comandos se env√≠an al navegador en fragmentos.</font></i>  <i><font color="#999999">V8 comienza a procesar el procesamiento de datos despu√©s de que tiene al menos 30 Kb de c√≥digo.</font></i> <br><br>  En Chrome 71, pasamos a un sistema basado en tareas.  Aqu√≠, el planificador puede iniciar simult√°neamente varias sesiones de procesamiento de scripts as√≠ncronos / retardados.  Debido a este cambio, la carga creada al analizar el hilo principal ha disminuido en aproximadamente un 20%.  Esto condujo a una mejora de aproximadamente 2% en los puntajes de TTI / FID obtenidos en sitios reales. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a3f/161/863/a3f16186348f3773a04f7caccc185592.png"></div><br>  <i><font color="#999999">Chrome 71 utiliza un sistema de procesamiento de c√≥digo basado en tareas.</font></i>  <i><font color="#999999">Con este enfoque, el planificador puede procesar varios scripts as√≠ncronos / pendientes al mismo tiempo.</font></i> <br><br>  En Chrome 72, hicimos que el procesamiento de transmisi√≥n sea la forma principal de analizar los scripts.  Ahora, incluso los scripts s√≠ncronos regulares se manejan de esta manera (aunque esto no se aplica a los scripts integrados).  Adem√°s, dejamos de cancelar las operaciones de an√°lisis basadas en tareas si el hilo principal necesitaba un c√≥digo analizado.  Esto se hace debido al hecho de que esto lleva a la necesidad de volver a realizar parte del trabajo ya realizado. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La versi√≥n anterior de Chrome</a> ten√≠a soporte para an√°lisis de transmisi√≥n y compilaci√≥n de c√≥digo.  Luego, el script descargado de la red primero debe ingresar a la transmisi√≥n principal, y luego se redirigir√° al sistema de procesamiento de secuencias de comandos de transmisi√≥n. <br><br>  Esto a menudo llev√≥ al analizador de flujo a esperar datos que ya se descargaron de la red pero que el flujo principal a√∫n no ha redirigido al procesamiento de flujo.  Esto sucedi√≥ debido al hecho de que el hilo principal podr√≠a estar ocupado con otras tareas (como analizar HTML, crear un dise√±o de p√°gina o ejecutar c√≥digo JS). <br><br>  Ahora estamos experimentando c√≥mo comenzar a analizar el c√≥digo al precargar p√°ginas.  Anteriormente, la implementaci√≥n de dicho mecanismo se ve√≠a obstaculizada por la necesidad de utilizar los recursos del hilo principal para transferir tareas al analizador de transmisi√≥n.  Los detalles sobre el an√°lisis del c√≥digo JS que se ejecuta "instant√°neamente" se pueden encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h2>  <font color="#3AC1EF">¬øC√≥mo han afectado las mejoras a lo que se puede ver en las herramientas del desarrollador?</font> </h2><br>  Adem√°s de lo anterior, se puede observar que antes hab√≠a un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">problema</a> en las herramientas de desarrollador.  Consisti√≥ en el hecho de que la informaci√≥n sobre la tarea de an√°lisis se mostraba como si bloquearan completamente el hilo principal.  Sin embargo, el analizador realiz√≥ operaciones bloqueando el hilo principal solo cuando necesitaba nuevos datos.  Desde que pasamos del esquema de usar una sola secuencia para el procesamiento de datos de transmisi√≥n al esquema en el que se aplican las tareas de procesamiento de transmisi√≥n, esto se ha vuelto bastante obvio.  Esto es lo que puedes ver en Chrome 69. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/87c/b4c/ab0/87cb4cab05a3c00e7b21dfc25524a9c8.png"></div><br>  <i><font color="#999999">El problema est√° en las herramientas del desarrollador, debido a que la informaci√≥n sobre los scripts de an√°lisis se muestra como si bloquearan completamente el hilo principal</font></i> <br><br>  Aqu√≠ puede ver que la tarea Parse Script tarda 1.08 segundos.  ¬°Pero analizar JavaScript, de hecho, no es tan lento!  La mayor parte de este tiempo, no se realiza nada √∫til excepto esperar datos del hilo principal. <br>  En Chrome 76, ya puedes ver una imagen completamente diferente. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef8/874/e37/ef8874e37664a31f03c822c71feb0fa8.png"></div><br>  <i><font color="#999999">En Chrome 76, el an√°lisis se divide en muchas tareas peque√±as</font></i> <br><br>  En general, se puede observar que la pesta√±a Rendimiento de las herramientas del desarrollador es excelente para ver la imagen general de lo que est√° sucediendo en la p√°gina.  Para obtener informaci√≥n m√°s detallada que refleje las caracter√≠sticas de V8, como el tiempo de an√°lisis y el tiempo de compilaci√≥n, puede usar el Rastreo de Chrome con soporte RCS (Estad√≠sticas de llamadas en tiempo de ejecuci√≥n).  En los datos RCS recibidos, puede encontrar los indicadores Parse-Background y Compile-Background.  Pueden informar cu√°nto tiempo les llev√≥ analizar y compilar el c√≥digo JS fuera del hilo principal.  Las m√©tricas de an√°lisis y compilaci√≥n indican cu√°nto tiempo se ha dedicado a actividades relacionadas en el hilo principal. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3a4/200/d26/3a4200d269fe47bedac1d84c27722a2b.png"></div><br>  <i><font color="#999999">An√°lisis de datos RCS usando Google Tracing</font></i> <br><br><h2>  <font color="#3AC1EF">¬øC√≥mo afectaron los cambios al trabajo con sitios reales?</font> </h2><br>  Veamos algunos ejemplos de c√≥mo el procesamiento de secuencias de comandos de transmisi√≥n influy√≥ en la exploraci√≥n de sitios reales. <br><br><h3>  <font color="#3AC1EF">‚ñçReddit</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d77/4ba/270/d774ba2709a772bbcfb26294b67ab385.png"></div><br>  <i><font color="#999999">Ver reddit.com en una MacBook Pro.</font></i>  <i><font color="#999999">Tiempo para analizar y compilar el c√≥digo JS empleado en los subprocesos principales y de trabajo</font></i> <br><br>  Hay varios paquetes JS en el sitio web reddit.com, cada uno de los cuales supera el tama√±o de 100 Kb.  Est√°n envueltos en funciones externas, lo que lleva a la ejecuci√≥n de grandes vol√∫menes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">compilaci√≥n "perezosa"</a> en el hilo principal.  En el diagrama anterior, es crucial el tiempo requerido para procesar los scripts en el hilo principal.  Esto se debe al hecho de que una carga grande en el hilo principal puede aumentar el tiempo que tarda la p√°gina en cambiar al modo interactivo.  Al procesar el c√≥digo del sitio reddit.com, la mayor parte del tiempo se pasa en el hilo principal, y los recursos del trabajo / hilo de fondo se usan al m√≠nimo. <br><br>  Puede optimizar este sitio dividiendo algunos paquetes grandes en partes (aproximadamente 50 Kb cada uno) y sin envolver el c√≥digo en una funci√≥n.  Esto maximizar√≠a el procesamiento paralelo de scripts.  Como resultado, los paquetes podr√≠an analizarse y compilarse al mismo tiempo en modo de transmisi√≥n.  Esto reducir√≠a la carga en el hilo principal al preparar la p√°gina para el trabajo. <br><br><h3>  <font color="#3AC1EF">‚ñçFacebook</font> </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bc2/d83/a53/bc2d83a53f5b73658168e3dba70c9a85.png"></div><br>  <i><font color="#999999">Ver facebook.com en tu MacBook Pro.</font></i>  <i><font color="#999999">Tiempo para analizar y compilar el c√≥digo JS empleado en los subprocesos principales y de trabajo</font></i> <br><br>  Tambi√©n podemos considerar un sitio como facebook.com, que usa alrededor de 6 MB de c√≥digo JS comprimido.  Este c√≥digo se carga utilizando aproximadamente 292 solicitudes.  Algunos de ellos son as√≠ncronos, algunos est√°n destinados a precargar datos, otros tienen baja prioridad.  La mayor√≠a de los scripts de Facebook son peque√±os y tienen un enfoque limitado.  Esto puede tener un buen efecto en el procesamiento de datos en paralelo por medio de flujos de fondo / trabajo.  El hecho es que muchas secuencias de comandos peque√±as se pueden analizar y compilar al mismo tiempo mediante el procesamiento de secuencias de comandos de transmisi√≥n. <br><br>  Tenga en cuenta que su sitio es probablemente diferente del sitio de Facebook.  Probablemente no tenga aplicaciones que se mantengan abiertas durante mucho tiempo (como lo que son un sitio de Facebook o la interfaz de Gmail), y cuando trabaje con ellas, puede estar justificado descargar vol√∫menes tan serios de scripts con un navegador de escritorio.  Pero, a pesar de esto, podemos dar una recomendaci√≥n general que sea justa para cualquier proyecto.  Se basa en el hecho de que vale la pena dividir el c√≥digo de la aplicaci√≥n en paquetes modestos, y que necesita descargar estos paquetes solo cuando sea necesario. <br><br>  Aunque la mayor parte del trabajo de an√°lisis y compilaci√≥n de c√≥digo JS se puede realizar utilizando herramientas de transmisi√≥n en un subproceso en segundo plano, algunas operaciones a√∫n requieren un subproceso principal.  Cuando el hilo principal est√° ocupado con algo, la p√°gina no puede responder a la interacci√≥n del usuario.  Por lo tanto, se recomienda prestar atenci√≥n al impacto en los sitios UX que tiene la carga y ejecuci√≥n del c√≥digo JS. <br><br>  Tenga en cuenta que no todos los motores y navegadores de JavaScript ahora transmiten secuencias de comandos y optimizan su carga.  Pero a pesar de esto, esperamos que los principios generales de optimizaci√≥n descritos anteriormente puedan mejorar la experiencia del usuario al trabajar con sitios visitados en cualquiera de los navegadores existentes. <br><br><h2>  <font color="#3AC1EF">Precio de an√°lisis JSON</font> </h2><br>  Analizar el c√≥digo JSON puede ser mucho m√°s eficiente que analizar el c√≥digo JavaScript.  La cuesti√≥n es que la gram√°tica JSON es mucho m√°s simple que la gram√°tica de JavaScript.  Este conocimiento se puede aplicar para mejorar la velocidad de preparaci√≥n para el trabajo de aplicaciones web que utilizan objetos de configuraci√≥n grandes (como los repositorios de Redux), cuya estructura se asemeja al c√≥digo JSON.  Como resultado, resulta que en lugar de presentar los datos como literales de objetos incrustados en el c√≥digo, puede representarlos como cadenas de objetos JSON y analizar estos objetos en tiempo de ejecuci√≥n. <br><br>  El primer enfoque, usando objetos JS, se ve as√≠: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = { <span class="hljs-attr"><span class="hljs-attr">foo</span></span>: <span class="hljs-number"><span class="hljs-number">42</span></span>, <span class="hljs-attr"><span class="hljs-attr">bar</span></span>: <span class="hljs-number"><span class="hljs-number">1337</span></span> }; <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> <br>  El segundo enfoque, utilizando cadenas JSON, implica el uso de tales construcciones: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> data = <span class="hljs-built_in"><span class="hljs-built_in">JSON</span></span>.parse(<span class="hljs-string"><span class="hljs-string">'{"foo":42,"bar":1337}'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span></code> </pre> <br>  Dado que solo necesita ejecutar el procesamiento de cadenas JSON una vez, el enfoque que usa <code>JSON.parse</code> es mucho m√°s r√°pido que usar literales de objetos JavaScript.  Especialmente - al cargar la p√°gina "en fr√≠o".  Se recomienda que use cadenas JSON para representar objetos que comienzan en 10 Kb.  Sin embargo, como con cualquier consejo de rendimiento, este consejo no debe seguirse sin pensar.  Antes de aplicar esta t√©cnica para presentar datos en producci√≥n, es necesario realizar mediciones y evaluar su impacto real en el proyecto. <br><br>  El uso de literales de objetos como almacenamiento para grandes cantidades de datos plantea otra amenaza.  El punto es que existe el riesgo de que tales literales se puedan procesar dos veces: <br><br><ol><li>  El primer paso de procesamiento se realiza con el an√°lisis preliminar del literal. </li><li>  El segundo enfoque se realiza durante el an√°lisis "perezoso" del literal. </li></ol><br>  No puede deshacerse del primer paso de procesamiento de literales de objeto.  Pero, afortunadamente, el segundo paso se puede evitar colocando literales de objetos en el nivel superior o dentro de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">PIFE</a> . <br><br><h2>  <font color="#3AC1EF">¬øQu√© pasa con el an√°lisis y la compilaci√≥n de c√≥digo en visitas repetidas a sitios?</font> </h2><br>  Es posible optimizar el rendimiento del sitio para aquellos casos en que los usuarios los visitan m√°s de una vez, gracias a las capacidades de V8 para el almacenamiento en cach√© de c√≥digo y bytecode.  Cuando se solicita un script del servidor por primera vez, Chrome lo descarga y pasa el V8 para su compilaci√≥n.  El navegador, adem√°s, guarda el archivo de este script en su cach√© de disco.  Cuando se ejecuta la segunda solicitud para descargar el mismo archivo JS, Chrome lo toma de la memoria cach√© del navegador y nuevamente pasa el V8 para su compilaci√≥n.  Esta vez, sin embargo, el c√≥digo compilado se serializa y se adjunta al archivo de script en cach√© como metadatos. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b78/216/702/b7821670255f45c9ec4a08217b495153.png"></div><br>  <i><font color="#999999">Sistema de almacenamiento en cach√© de c√≥digo en V8</font></i> <br><br>  Cuando se solicita el script por tercera vez, Chrome toma tanto el archivo como sus metadatos del cach√© y luego transfiere el V8.  V8 deserializa los metadatos y, como resultado, puede omitir el paso de compilaci√≥n.  El almacenamiento en cach√© de c√≥digo se activa si las visitas al sitio se realizan dentro de las 72 horas.  Chrome tambi√©n utiliza la estrategia de almacenamiento en cach√© codicioso de c√≥digo cuando se utiliza un trabajador de servicio para almacenar en cach√© los scripts.  Los detalles sobre el almacenamiento en cach√© de c√≥digo se pueden encontrar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h2>  <font color="#3AC1EF">Resumen</font> </h2><br>  En 2019, los principales cuellos de botella de rendimiento para las p√°ginas web son cargar y ejecutar scripts.  Para mejorar la situaci√≥n, trate de utilizar scripts s√≠ncronos (integrados) de tama√±os peque√±os, que son necesarios para organizar la interacci√≥n del usuario con esa parte de la p√°gina que es visible para √©l inmediatamente despu√©s de la carga.  Se recomienda que los scripts utilizados para dar servicio a otras partes de las p√°ginas se carguen en modo diferido.  Rompa los paquetes grandes en pedazos peque√±os.  Esto facilitar√° la implementaci√≥n de una estrategia para trabajar con c√≥digo, en la aplicaci√≥n de la cual el c√≥digo se carga solo cuando es necesario y solo donde es necesario.  Esto maximizar√° las capacidades de V8, dirigido al procesamiento paralelo del c√≥digo. <br><br>  Si est√° desarrollando proyectos m√≥viles, debe esforzarse por asegurarse de que usen el menor c√≥digo JS posible.  Esta recomendaci√≥n se deriva del hecho de que los dispositivos m√≥viles generalmente funcionan en redes bastante lentas.  Dichos dispositivos, adem√°s, pueden estar limitados en t√©rminos de RAM disponible y recursos de procesador disponibles.  Intente encontrar un equilibrio entre el tiempo requerido para preparar los scripts descargados de la red y el uso de la memoria cach√©.  Esto maximizar√° la cantidad de an√°lisis y compilaci√≥n de c√≥digo realizado fuera del hilo principal. <br><br>  <b>Estimados lectores!</b>  ¬øOptimiza sus proyectos web teniendo en cuenta las peculiaridades del procesamiento del c√≥digo JS por parte de los navegadores modernos? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/459296/">https://habr.com/ru/post/459296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../459284/index.html">Breve introducci√≥n a la estrategia del producto y priorizaci√≥n de caracter√≠sticas</a></li>
<li><a href="../459286/index.html">Telururo de tungsteno semimet√°lico: el cuchillo suizo del d√≠a de la nanotecnolog√≠a</a></li>
<li><a href="../459288/index.html">Implementaci√≥n nativa de la biblioteca ECS</a></li>
<li><a href="../459292/index.html">Automatizaci√≥n de pruebas de aplicaciones m√≥viles: comparaci√≥n de herramientas</a></li>
<li><a href="../459294/index.html">¬øQu√© es m√°s importante: conocer un lenguaje de programaci√≥n o poder resolver un problema de negocios?</a></li>
<li><a href="../459298/index.html">Angular: estado en 2019</a></li>
<li><a href="../459300/index.html">Quasar 1.0: una nueva herramienta √∫til para los desarrolladores de Vue y no solo para ellos</a></li>
<li><a href="../459302/index.html">Reintentando solicitudes HTTP fallidas en Angular</a></li>
<li><a href="../459304/index.html">Bypass de trampa angular y ahorro de tiempo</a></li>
<li><a href="../459306/index.html">Representaci√≥n del servidor en un entorno sin servidor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>