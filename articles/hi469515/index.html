<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯШЩ ЁЯСйЁЯП╛тАНтЪЦя╕П ЁЯЪ╕ рдЗрд╕реНрддрд┐рдпреЛ рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рддреИрдпрд╛рд░ рдХрд░рдирд╛ ЁЯЪ╡ЁЯП╗ ЁЯСЛЁЯП╛ тЬИя╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЗрд╕реНрддрд┐рдпреЛ рд╡рд┐рддрд░рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ, рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдЙрдкрдХрд░рдг рд╣реИред рдЗрд╕реНрддрд┐рдпреЛ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдЗрд╕реНрддрд┐рдпреЛ рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рддреИрдпрд╛рд░ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/southbridge/blog/469515/"><p><img src="https://habrastorage.org/webt/qy/yw/v1/qyywv1qmzphh1svbblasrxjc6ym.jpeg"></p><br><p>  рдЗрд╕реНрддрд┐рдпреЛ рд╡рд┐рддрд░рд┐рдд рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ, рд╕реБрд░рдХреНрд╖рд╛ рдФрд░ рдирд┐рдЧрд░рд╛рдиреА рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рдЙрдкрдХрд░рдг рд╣реИред  рдЗрд╕реНрддрд┐рдпреЛ рдмрдбрд╝реЗ рдкреИрдорд╛рдиреЗ рдкрд░ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдФрд░ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ рддрд░рд╣ рдХреА рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рдкреИрдХреЗрдЬрд┐рдВрдЧ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдХреЗ рд▓рд┐рдП рдХрдВрдЯреЗрдирд░ рдФрд░ рддреИрдирд╛рддреА рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрднрд░рддрд╛ рдФрд░ рдЗрди рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдХреБрдмреЗрд░рдиреЗрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдЗрд╕реНрддрд┐рдпреЛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдХреИрд╕реЗ рдЗрди рддрдХрдиреАрдХреЛрдВ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рдХрдИ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЖрд╡реЗрджрди рдЗрд╕реНрддрд┐рдпреЛ рдХреЗ <em>рдмрд┐рдирд╛</em> рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдпрджрд┐ рдЖрдк рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдЗрди рдЙрдкрдХрд░рдгреЛрдВ рдФрд░ рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреЛ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдЗрд╕ рдЧрд╛рдЗрдб рдХреЛ рдЫреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВ рдФрд░ рд╕реАрдзреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Google рдХреБрдмреЗрд░рдиреЗрдЯ рдЗрдВрдЬрди (GKE)</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░ Istio</a> рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GKE</a> рдПрдХреНрд╕рдЯреЗрдВрд╢рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░ Istio</a> рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред </p><br><p>  рдпрд╣ рдПрдХ рдЪрд░рдг-рджрд░-рдЪрд░рдг рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ рд╣реИ рдЬрд╣рд╛рдВ рд╣рдо рд╕реНрд░реЛрдд рдХреЛрдб рд╕реЗ рдкреВрд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ GKE рдкрд░ рдПрдХ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рджреЗрдЦреЗрдВрдЧреЗ рддрд╛рдХрд┐ рдЖрдкрдХреЛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрди рддрдХрдиреАрдХреЛрдВ рдХрд╛ рдПрдХ рдореВрд▓ рд╡рд┐рдЪрд╛рд░ рдкреНрд░рд╛рдкреНрдд рд╣реЛред  рдЖрдк рдпрд╣ рднреА рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдХреИрд╕реЗ рдЗрд╕реНрддрд┐рдпреЛ рдЗрди рддрдХрдиреАрдХреЛрдВ рдХрд╛ рд▓рд╛рдн рдЙрдард╛рддреА рд╣реИред  рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЖрдк рдХрдВрдЯреЗрдирд░, рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕, рд╕реЗрд╡рд╛ рдЬрд╛рд▓ рдпрд╛ рдЗрд╕реНрддрд┐рдпреЛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВред </p><a name="habracut"></a><br><h3 id="zadachi">  рдХрд╛рд░реНрдп </h3><br><p>  рдЗрд╕ рдЧрд╛рдЗрдб рдореЗрдВ, рдЖрдк рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдкреВрд░рд╛ рдХрд░реЗрдВрдЧреЗ: </p><br><ol><li>  рдХрдИ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд╕рд╛рде рдПрдХ рд╕рд░рд▓ рд╣реИрд▓реЛ рд╡рд░реНрд▓реНрдб рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреА рдЦреЛрдЬ рдХрд░рдирд╛ред </li><li> рд╕реНрд░реЛрдд рдХреЛрдб рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЪрд▓рд╛рдирд╛ред </li><li>  рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЖрд╡реЗрджрди рдкреИрдХрд┐рдВрдЧред </li><li>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдирд╛ </li><li>  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдХрдВрдЯреЗрдирд░ рддреИрдирд╛рдд рдХрд░реЗрдВред </li></ol><br><h3 id="prezhde-chem-nachat">  рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ </h3><br><p>  рдХреБрдмреЗрд░рдиреЗрдЯ рдЗрдВрдЬрди API рдХреЛ рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВ: </p><br><ol><li>  Google рдХреНрд▓рд╛рдЙрдб рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХрдВрд╕реЛрд▓ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯ рдЗрдВрдЬрди рдкреГрд╖реНрда рдкрд░</a> рдЬрд╛рдПрдВред </li><li>  рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдПрдВ рдпрд╛ рдЪреБрдиреЗрдВред </li><li>  рдПрдкреАрдЖрдИ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛рдУрдВ рдХреЛ рдЪрд╛рд▓реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рддреАрдХреНрд╖рд╛ рдХрд░реЗрдВред  рдЗрд╕рдореЗрдВ рдХрдИ рдорд┐рдирдЯ рд▓рдЧ рд╕рдХрддреЗ рд╣реИрдВред </li><li>  рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдмрд┐рд▓рд┐рдВрдЧ Google рдХреНрд▓рд╛рдЙрдб рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХреА рдЧрдИ рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмрд┐рд▓рд┐рдВрдЧ рд╕рдХреНрд╖рдо рдХрд░рдирд╛ рд╕реАрдЦреЗрдВ</a> ред </li></ol><br><p>  рдЗрд╕ рдЧрд╛рдЗрдб рдореЗрдВ, рдЖрдк рдХреНрд▓рд╛рдЙрдб рд╢реИрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдбреЗрдмрд┐рдпрди-рдЖрдзрд╛рд░рд┐рдд рд▓рд┐рдирдХреНрд╕ рдпрд╛ рд▓рд┐рдирдХреНрд╕ рдпрд╛ рдореИрдХрдУрдПрд╕ рдХрдВрдкреНрдпреВрдЯрд░ рдХреЗ рд╕рд╛рде <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Google рдХрдВрдкреНрдпреВрдЯ рдЗрдВрдЬрди рдореЗрдВ рдЬреА 1-рдЫреЛрдЯреА</a> рдЖрднрд╛рд╕реА рдорд╢реАрди рддреИрдпрд╛рд░ рдХрд░рддрд╛ рд╣реИред </p><br><h3 id="variant-a-ispolzovanie-cloud-shell">  рд╡рд┐рдХрд▓реНрдк A: рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </h3><br><p>  рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдн: </p><br><ul><li>  рдЕрдЬрдЧрд░ 2 рдФрд░ рдкрд╛рдпрдерди 3 рд╡рд┐рдХрд╛рд╕ рд╡рд╛рддрд╛рд╡рд░рдг ( <strong>рд╡рд░реНрдЪреБрдЕрдирд╡</strong> рд╕рд╣рд┐рдд) рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдЕрдиреБрдХреВрд▓рд┐рдд рд╣реИрдВред </li><li>  <strong>Gcloud</strong> , <strong>docker</strong> , <strong>git</strong> рдФрд░ <strong>kubectl</strong> рдХрдорд╛рдВрдб-рд▓рд╛рдЗрди <strong>рдЯреВрд▓</strong> рдЬреЛ рд╣рдо рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ, рд╡реЗ рдкрд╣рд▓реЗ рд╕реЗ рдЗрдВрд╕реНрдЯреЙрд▓ рд╣реИрдВред </li><li>  рдЖрдкрдХреЗ рдкрд╛рд╕ рдЪреБрдирдиреЗ рдХреЗ рд▓рд┐рдП рдХрдИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╛рда рд╕рдВрдкрд╛рджрдХ</a> рд╣реИрдВ: <br><ol><li>  рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рд╡рд┐рдВрдбреЛ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рдПрдбрд┐рдЯ рдЖрдЗрдХрди рдХреЗ рд╕рд╛рде рдЦреБрд▓рдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд╛рд▓рд╛ рдХреЛрдб рдПрдбрд┐рдЯрд░</a> ред </li><li>  рдПрдордПрд╕реАрдПрд╕, рд╡рд┐рдо, рдпрд╛ рдиреИрдиреЛ рдЬреЛ рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рдореЗрдВ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рд╕реЗ рдЦреБрд▓рддреЗ рд╣реИрдВред </li></ol></li></ul><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП: </p><br><ol><li>  рдЬреАрд╕реАрдкреА рдХрдВрд╕реЛрд▓ рдкрд░ рдЬрд╛рдПрдВред </li><li>  GCP рдХрдВрд╕реЛрд▓ рд╡рд┐рдВрдбреЛ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ <strong>рд╕рдХреНрд░рд┐рдп рдХреНрд▓рд╛рдЙрдб рд╢реИрд▓</strong> рдмрдЯрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред </li></ol><br><p><img src="https://habrastorage.org/webt/yu/sh/9x/yush9xie9_peummad02lgu2n5x8.png"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GCP рдХрдВрд╕реЛрд▓</a> рдХреЗ рдирд┐рдЪрд▓реЗ рднрд╛рдЧ рдореЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">,</a> рдПрдХ рдирдИ рд╡рд┐рдВрдбреЛ рдореЗрдВ, рдПрдХ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдХреЗ рд╕рд╛рде рдХреНрд▓рд╛рдЙрдб рд╢реИрд▓ рд╕рддреНрд░ рдЦреБрд▓рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/yi/no/-q/yino-qj5bwaluwxlo3xtf0yr7ty.png"></p><br><h3 id="variant-b-ispolzovanie-instrumentov-komandnoy-stroki-lokalno">  рд╡рд┐рдХрд▓реНрдк рдмреА: рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </h3><br><p>  рдпрджрд┐ рдЖрдк рд▓рд┐рдирдХреНрд╕ рдпрд╛ macOS рдХреЗ рд╕рд╛рде рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдЖрдкрдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдШрдЯрдХреЛрдВ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: </p><br><ol><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЕрдкрдиреЗ рдкрд╛рдпрдерди 3 рдФрд░ рдкрд╛рдпрдерди 2 рд╡рд┐рдХрд╛рд╕ рдкрд░реНрдпрд╛рд╡рд░рдг рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ</a> ред </p><br></li><li><p>  <strong>Gcloud</strong> рдХрдорд╛рдВрдб рд▓рд╛рдЗрди <strong>рдЯреВрд▓ рдХреЗ</strong> рд╕рд╛рде <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрд▓рд╛рдЙрдб SDK рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ</a> ред </p><br></li><li><p>  <strong>рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ</strong> рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдЯреВрд▓ <strong>рдХреБрдмреЗрдХреЗрд▓</strong> рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред </p><br><pre><code class="plaintext hljs">gcloud components install kubectl</code> </pre> <br></li><li><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреЙрдХрд░ рд╕рд╛рдореБрджрд╛рдпрд┐рдХ рд╕рдВрд╕реНрдХрд░рдг (CE)</a> рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред  рдЖрдк рдирдореВрдирд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд▓рд┐рдП рдХрдВрдЯреЗрдирд░ рдЫрд╡рд┐рдпрд╛рдВ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП <strong>docker</strong> рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдЯреВрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред </p><br></li><li><p>  GitHub рдХреЗ рд╕рд╛рде рдПрдХ рдирдореВрдирд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Git рд╕рдВрд╕реНрдХрд░рдг рдирд┐рдпрдВрддреНрд░рдг</a> рдЙрдкрдХрд░рдг рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред </p><br></li></ol><br><h3 id="zagruzka-primera-koda">  рдирдореВрдирд╛ рдХреЛрдб рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ </h3><br><ol><li><p>  <strong>рд╣реЗрд▓реЛрд╕реЗрд╡рд░</strong> рд╕реНрд░реЛрдд рдХреЛрдб рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">git clone https://github.com/GoogleCloudPlatform/istio-samples</code> </pre> <br></li><li><p>  рдирдореВрдирд╛ рдХреЛрдб рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд░ рдЬрд╛рдПрдВ: </p><br><pre> <code class="plaintext hljs">cd istio-samples/sample-apps/helloserver</code> </pre> <br></li></ol><br><h3 id="izuchenie-prilozheniya-s-neskolkimi-servisami">  рдмрд╣реБ-рд╕реЗрд╡рд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдХреА рдЦреЛрдЬ </h3><br><p>  рдирдореВрдирд╛ рдЖрд╡реЗрджрди рдкрд╛рдпрдерди рдореЗрдВ рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдЗрд╕рдореЗрдВ рджреЛ рдШрдЯрдХ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ рдЬреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">REST</a> рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХрд░рддреЗ рд╣реИрдВ: </p><br><ul><li>  <strong>рд╕рд░реНрд╡рд░</strong> : рдПрдХ <strong>GET</strong> рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ <strong>, / рдХреЗ</strong> рд╕рд╛рде рдПрдХ рд╕рд░рд▓ рд╕рд░реНрд╡рд░, рдЬреЛ рдХрдВрд╕реЛрд▓ рдкрд░ "рд╣реИрд▓реЛ рд╡рд░реНрд▓реНрдб" рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  <strong>loadgen</strong> : рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЬреЛ <strong>рд╕рд░реНрд╡рд░ рдкрд░</strong> рдЯреНрд░реИрдлрд╝рд┐рдХ рднреЗрдЬрддреА <strong>рд╣реИ</strong> , рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб рдХреЗ рд╡рд┐рдиреНрдпрд╛рд╕ рдпреЛрдЧреНрдп рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд╕рд╛рдеред </li></ul><br><p><img src="https://habrastorage.org/webt/b1/ky/lj/b1kyljxdkjdci12qtle2w3dmtjw.png"></p><br><h3 id="zapusk-prilozheniya-iz-ishodnogo-koda">  рд╕реНрд░реЛрдд рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЪрд▓рд╛рдирд╛ </h3><br><p>  рдПрдХ рдирдореВрдирд╛ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕реЗ рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рдпрд╛ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рдЪрд▓рд╛рдПрдВред <br>  1) <strong>istio- рдирдореВрдиреЗ / рдирдореВрдирд╛-рдПрдкреНрд▓рд┐рдХреЗрд╢рди / рд╣реЗрд▓реЛрд╕реЗрд╡рд░</strong> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ, <strong>рд╕рд░реНрд╡рд░</strong> рдЪрд▓рд╛рдПрдВ: </p><br><pre> <code class="plaintext hljs">python3 server/server.py</code> </pre> <br><p>  рдЬрдм <strong>рд╕рд░реНрд╡рд░</strong> рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдирд┐рдореНрди рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛрддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">INFO:root:Starting server...</code> </pre> <br><p>  2) <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдФрд░ рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдЦреЛрд▓реЗрдВред  рдпрджрд┐ рдЖрдк рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ, рддреЛ рдПрдХ рдФрд░ рд╕рддреНрд░ рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдРрдб рдЖрдЗрдХрди рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред <br>  3) <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рд▓рд┐рдП рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬреЗрдВ: </p><br><pre> <code class="plaintext hljs">curl http://localhost:8080</code> </pre> <br><p>  рд╕рд░реНрд╡рд░ рдЙрддреНрддрд░: </p><br><pre> <code class="plaintext hljs">Hello World!</code> </pre> <br><p>  4) рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕реЗ рдЬрд╣рд╛рдВ рдЖрдкрдиреЗ рдирдореВрдирд╛ рдХреЛрдб рдбрд╛рдЙрдирд▓реЛрдб рдХрд┐рдпрд╛ рд╣реИ, рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд░ рдЬрд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ <strong>loadgen рд╣реИ</strong> : </p><br><pre> <code class="plaintext hljs">cd YOUR_WORKING_DIRECTORY/istio-samples/sample-apps/helloserver/loadgen</code> </pre> <br><p>  5) рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдмрдирд╛рдПрдВ: </p><br><pre> <code class="plaintext hljs">export SERVER_ADDR=http://localhost:8080 export REQUESTS_PER_SECOND=5</code> </pre> <br><p>  6) рднрд╛рдЧреЛ <strong>virtualenv</strong> : </p><br><pre> <code class="plaintext hljs">virtualenv --python python3 env</code> </pre> <br><p>  7) рдЖрднрд╛рд╕реА рд╡рд╛рддрд╛рд╡рд░рдг рдХреЛ рд╕рдХреНрд░рд┐рдп рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">source env/bin/activate</code> </pre> <br><p>  8) <strong>рд▓реЛрдбрдЬреЗрди рдХреЗ</strong> рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">pip3 install -r requirements.txt</code> </pre> <br><p>  9) рд░рди <strong>рд▓реЛрдбрдЧреЗрди</strong> : </p><br><pre> <code class="plaintext hljs">python3 loadgen.py</code> </pre> <br><p>  рдЬрдм рдкреНрд░рд╛рд░рдВрдн рдХрд┐рдпрд╛ рдЧрдпрд╛, рддреЛ <strong>рд▓реЛрдбрдЧрди</strong> рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">Starting loadgen: 2019-05-20 10:44:12.448415 5 request(s) complete to http://localhost:8080</code> </pre> <br><p>  рдПрдХ рдЕрдиреНрдп рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдореЗрдВ, <strong>рд╕рд░реНрд╡рд░</strong> рдХрдВрд╕реЛрд▓ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрди рд╕рдВрджреЗрд╢ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">127.0.0.1 - - [21/Jun/2019 14:22:01] "GET / HTTP/1.1" 200 - INFO:root:GET request, Path: / Headers: Host: localhost:8080 User-Agent: python-requests/2.22.0 Accept-Encoding: gzip, deflate Accept: */*</code> </pre> <br><p>  рдПрдХ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░рд┐рдкреНрд░реЗрдХреНрд╖реНрдп рд╕реЗ, рд╕рдВрдкреВрд░реНрдг рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдПрдХ рд╣реА рд╣реЛрд╕реНрдЯ (рд╕реНрдерд╛рдиреАрдп рдХрдВрдкреНрдпреВрдЯрд░ рдпрд╛ рдХреНрд▓рд╛рдЙрдб рд╢реИрд▓ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди) рдкрд░ рдЪрд▓рддрд╛ рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЖрдк <strong>рд╕рд░реНрд╡рд░ рдкрд░</strong> рдЕрдиреБрд░реЛрдз рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП <strong>рд▓реЛрдХрд▓рд╣реЛрд╕реНрдЯ</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br>  10) <strong>рд▓реЛрдбрдЬреЗрди</strong> рдФрд░ <strong>рд╕рд░реНрд╡рд░</strong> рдХреЛ рд░реЛрдХрдиреЗ рдХреЗ рд▓рд┐рдП, рдкреНрд░рддреНрдпреЗрдХ рдЯрд░реНрдорд┐рдирд▓ рд╡рд┐рдВрдбреЛ рдореЗрдВ <strong>Ctrl-c</strong> рдбрд╛рд▓реЗрдВред <br>  11) <strong>рд▓реЛрдбрдЬреЗрди</strong> рдЯрд░реНрдорд┐рдирд▓ <strong>рд╡рд┐рдВрдбреЛ рдореЗрдВ,</strong> рдЖрднрд╛рд╕реА рд╡рд╛рддрд╛рд╡рд░рдг рдХреЛ рдирд┐рд╖реНрдХреНрд░рд┐рдп рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">deactivate</code> </pre> <br><h3 id="upakovka-prilozheniya-v-konteynery">  рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдЖрд╡реЗрджрди рдкреИрдХрд┐рдВрдЧ </h3><br><p>  GKE рдкрд░ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдирдореВрдирд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди - <strong>рд╕рд░реНрд╡рд░</strong> рдФрд░ <strong>рд▓реЛрдбрдЬреЗрди</strong> - рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдВрдЯреЗрдирд░реЛрдВ</a> рдореЗрдВ рдкреИрдХреЗрдЬ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдХрдВрдЯреЗрдирд░ рдкрд░реНрдпрд╛рд╡рд░рдг рд╕реЗ рдЕрд▓рдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдкреИрдХ рдХрд░рдиреЗ рдХрд╛ рдПрдХ рддрд░реАрдХрд╛ рд╣реИред </p><br><p>  рдПрдХ рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рдкреИрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ <strong>рдбреЙрдХрд░рдлрд╛рдЗрд▓ рдХреА</strong> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  <strong>Dockerfile</strong> рдПрдХ рдкрд╛рда рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬреЛ рдХрд┐рд╕реА рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рдФрд░ рдЙрд╕рдХреА рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Docker рдЫрд╡рд┐</a> рдореЗрдВ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрджреЗрд╢реЛрдВ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ред</a>  рдирд┐рд░реНрдорд╛рдг рдХреЗ рдмрд╛рдж, рдЖрдк рдЫрд╡рд┐ рдХреЛ рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдореЗрдВ рдЕрдкрд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдбреЙрдХрд░ рд╣рдм рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА</a> ред </p><br><p>  рдЙрджрд╛рд╣рд░рдг рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рд▓рд┐рдП рдПрдХ <strong>рдбреЙрдХрдлрд╛рдЗрд▓</strong> <strong>рд╣реИ</strong> рдФрд░ рдЫрд╡рд┐рдпреЛрдВ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдЖрджреЗрд╢реЛрдВ рдХреЗ рд╕рд╛рде <strong>рд▓реЛрдбрдЬреЗрди рд╣реИ</strong> ред  рдиреАрдЪреЗ <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рд▓рд┐рдП <strong>Dockerfile</strong> <strong>рд╣реИ</strong> : </p><br><pre> <code class="plaintext hljs">FROM python:3-slim as base FROM base as builder RUN apt-get -qq update \ &amp;&amp; apt-get install -y --no-install-recommends \ g++ \ &amp;&amp; rm -rf /var/lib/apt/lists/* # Enable unbuffered logging FROM base as final ENV PYTHONUNBUFFERED=1 RUN apt-get -qq update \ &amp;&amp; apt-get install -y --no-install-recommends \ wget WORKDIR /helloserver # Grab packages from builder COPY --from=builder /usr/local/lib/python3.7/ /usr/local/lib/python3.7/ # Add the application COPY . . EXPOSE 8080 ENTRYPOINT [ "python", "server.py" ]</code> </pre> <br><ul><li>  <strong>рдлреНрд░реЙрдо рдкрд╛рдпрдерди: рдмреЗрд╕-</strong> рдХрдорд╛рдВрдб рдХреЗ <strong>рд░реВрдк рдореЗрдВ 3-рд╕реНрд▓рд┐рдо</strong> рдбреЙрдХрдЯрд░ рдХреЛ рдирд╡реАрдирддрдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд╛рдпрдерди 3 рдЫрд╡рд┐</a> рдХреЛ рдЖрдзрд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд╣рддрд╛ рд╣реИред </li><li>  <strong>рдкреБрд▓рд┐рд╕</strong> рдЯреАрдо <strong>ред</strong>  <strong>ред</strong>  рдХрдВрдЯреЗрдирд░ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рд╕реНрд░реЛрдд рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╡рд░реНрддрдорд╛рди рдХрд╛рд░реНрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ (рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХреЗрд╡рд▓ <strong>server.py</strong> ) рдореЗрдВ рдХреЙрдкреА рдХрд░рддрд╛ рд╣реИред </li><li>  <strong>ENTRYPOINT</strong> рдЙрд╕ рдХрдорд╛рдВрдб рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрдВрдЯреЗрдирд░ рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рдХрдорд╛рдВрдб рд▓рдЧрднрдЧ рд╡реИрд╕реА рд╣реА рд╣реИ, рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рд╕реЛрд░реНрд╕ рдХреЛрдб рд╕реЗ <strong>рд╕рд░реНрд╡рд░рд╣реЛрдо</strong> рдЪрд▓рд╛рддреЗ рдереЗред </li><li>  <strong>EXPOSE</strong> рдХрдорд╛рдВрдб рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ <strong>рд╕рд░реНрд╡рд░</strong> рдкреЛрд░реНрдЯ <strong>8080</strong> рдкрд░ рд╕реБрди рд░рд╣рд╛ рд╣реИред  рдпрд╣ рдЖрджреЗрд╢ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреЛрд░реНрдЯ рдкреНрд░рджрд╛рди</a> рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдХреБрдЫ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдкреНрд░рд▓реЗрдЦрди рд╣реИ рдЬреЛ рдХрдВрдЯреЗрдирд░ рд╢реБрд░реВ рд╣реЛрдиреЗ рдкрд░ рдкреЛрд░реНрдЯ <strong>8080</strong> рдЦреЛрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред </li></ul><br><h3 id="podgotovka-k-konteynerizacii-prilozheniya">  рдЖрд╡реЗрджрди рдХрдВрдЯреЗрдирд░реАрдХрд░рдг рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░реА рдХрд░ рд░рд╣рд╛ рд╣реИ </h3><br><p>  1) рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рд╕реЗрдЯ рдХрд░реЗрдВред  <strong>PROJECT_ID</strong> рдХреЛ рдЕрдкрдиреЗ GCP рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╕реЗ рдмрджрд▓реЗрдВред </p><br><pre> <code class="plaintext hljs">export PROJECT_ID="PROJECT_ID"</code> </pre> <br><pre> <code class="plaintext hljs">export GCR_REPO="preparing-istio"</code> </pre> <br><p>  <strong>PROJECT_ID</strong> рдФрд░ <strong>GCR_REPO рдорд╛рдиреЛрдВ</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП <strong>,</strong> рдЖрдк рдбреЙрдХрд░ рдЫрд╡рд┐ рдХреЛ рдЯреИрдЧ рдХрд░рддреЗ рд╣реИрдВ рдЬрдм рдЖрдк рдЗрд╕реЗ рдЗрдХрдЯреНрдард╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕реЗ рдирд┐рдЬреА рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдореЗрдВ рднреЗрдЬрддреЗ рд╣реИрдВред </p><br><p>  2) <strong>gcloud</strong> рдХрдорд╛рдВрдб рд▓рд╛рдЗрди <strong>рдЯреВрд▓ рдХреЗ</strong> рд▓рд┐рдП рдбрд┐рдлрд╝реЙрд▓реНрдЯ GCP рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕реЗрдЯ рдХрд░реЗрдВред </p><br><pre> <code class="plaintext hljs">gcloud config set project $PROJECT_ID</code> </pre> <br><p>  3) <strong>gcloud</strong> рдХрдорд╛рдВрдб рд▓рд╛рдЗрди <strong>рдЯреВрд▓ рдХреЗ</strong> рд▓рд┐рдП рдбрд┐рдлреЙрд▓реНрдЯ рдЬреЛрди рд╕реЗрдЯ рдХрд░реЗрдВред </p><br><pre> <code class="plaintext hljs">gcloud config set compute/zone us-central1-b</code> </pre> <br><p>  4) рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рд╕реЗрд╡рд╛ GCP рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИред </p><br><pre> <code class="plaintext hljs">gcloud services enable containerregistry.googleapis.com</code> </pre> <br><h3 id="konteynerizaciya-server">  рдХрдВрдЯреЗрдирд░реАрдХрд░рдг рд╕рд░реНрд╡рд░ </h3><br><ol><li><p>  рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдмрджрд▓реЗрдВ рдЬрд╣рд╛рдБ <strong>рд╕рд░реНрд╡рд░</strong> рдЙрджрд╛рд╣рд░рдг рд╕реНрдерд┐рдд рд╣реИ: </p><br><pre> <code class="plaintext hljs">cd YOUR_WORKING_DIRECTORY/istio-samples/sample-apps/helloserver/server/</code> </pre> <br></li><li><p>  <strong>Dockerfile</strong> рдФрд░ рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЫрд╡рд┐ <strong>рдмрдирд╛рдПрдВ</strong> рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рдкрд╣рд▓реЗ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдерд╛: </p><br><pre> <code class="plaintext hljs">docker build -t gcr.io/$PROJECT_ID/$GCR_REPO/helloserver:v0.0.1 .</code> </pre> <br></li></ol><br><p>  <strong>-T рд╡рд┐рдХрд▓реНрдк</strong> рдбреЙрдХрд░ рдЯреИрдЧ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ рдЙрд╕ рдЫрд╡рд┐ рдХрд╛ рдирд╛рдо рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдЖрдк рдХрдВрдЯреЗрдирд░ рдХреЛ рддреИрдирд╛рдд рдХрд░рддреЗ рд╕рдордп рдХрд░рддреЗ рд╣реИрдВред </p><br><ol><li>  рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдореЗрдВ рдЫрд╡рд┐ рднреЗрдЬреЗрдВ: <br><pre> <code class="plaintext hljs">docker push gcr.io/$PROJECT_ID/$GCR_REPO/helloserver:v0.0.1</code> </pre> </li></ol><br><h3 id="konteynerizaciya-loadgen">  рдХрдВрдЯреЗрдирд░реАрдХрд░рдг рд▓реЛрдбрдЬреЗрди </h3><br><p>  1) рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд░ рдЬрд╛рдПрдВ рдЬрд╣рд╛рдВ <strong>loadgen</strong> рдЙрджрд╛рд╣рд░рдг <strong>рд╕реНрдерд┐рдд рд╣реИ</strong> : </p><br><pre> <code class="plaintext hljs">cd ../loadgen</code> </pre> <br><p>  2) рдЫрд╡рд┐ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">docker build -t gcr.io/$PROJECT_ID/$GCR_REPO/loadgen:v0.0.1 .</code> </pre> <br><p>  3) рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рдореЗрдВ рдЫрд╡рд┐ рднреЗрдЬреЗрдВ: </p><br><pre> <code class="plaintext hljs">docker push gcr.io/$PROJECT_ID/$GCR_REPO/loadgen:v0.0.1</code> </pre> <br><h3 id="prosmotr-spiska-obrazov">  рдЫрд╡рд┐рдпреЛрдВ рдХреА рдПрдХ рд╕реВрдЪреА рджреЗрдЦреЗрдВ </h3><br><p>  рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рдЫрд╡рд┐рдпреЛрдВ рдХреА рд╕реВрдЪреА рдмреНрд░рд╛рдЙрдЬрд╝ рдХрд░реЗрдВ рдФрд░ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЪрд┐рддреНрд░ рднреЗрдЬреЗ рдЧрдП рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">gcloud container images list --repository gcr.io/$PROJECT_ID/preparing-istio</code> </pre> <br><p>  рдХрдорд╛рдВрдб рдХреЗрд╡рд▓ рднреЗрдЬреЗ рдЧрдП рдЪрд┐рддреНрд░реЛрдВ рдХреЗ рдирд╛рдо рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">NAME gcr.io/PROJECT_ID/preparing-istio/helloserver gcr.io/PROJECT_ID/preparing-istio/loadgen</code> </pre> <br><h3 id="sozdanie-klastera-gke">  рдПрдХ рдЬреАрдХреЗрдЖрд░ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдирд╛ </h3><br><p>  рдпреЗ рдХрдВрдЯреЗрдирд░ рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдкрд░ рдпрд╛ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ <strong>рдбреЙрдХ рд░рди рдХрдорд╛рдВрдб рдХреЗ</strong> рд╕рд╛рде рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЙрддреНрдкрд╛рджрди рдХреЗ рдорд╛рд╣реМрд▓ рдореЗрдВ, рдЖрдкрдХреЛ рдХреЗрдВрджреНрд░ рдХреЗ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрдЯ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рд░рд╛рд╕реНрддрд╛ рдЪрд╛рд╣рд┐рдПред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╣рдореЗрдВ рдПрдХ рдРрд╕реА рдкреНрд░рдгрд╛рд▓реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рддреА рд╣реИ рдХрд┐ рдХрдВрдЯреЗрдирд░ рд╣рдореЗрд╢рд╛ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдпрджрд┐ рдЯреНрд░реИрдлрд╝рд┐рдХ рдмрдврд╝рддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдХрдВрдЯреЗрдирд░ рдХреЛ рдЕрддрд┐рд░рд┐рдХреНрдд рд░реВрдк рд╕реЗ рдЬрд╝реВрдо рдЗрди рдХрд░рдиреЗ рдФрд░ рд▓реЙрдиреНрдЪ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рддрд░реАрдХрд╛ рдЪрд╛рд╣рд┐рдПред </p><br><p>  рдЖрдк рдХрдВрдЯреЗрдирд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧреЛрдВ рдХреЛ рдЪрд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GKE</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  GKE рдПрдХ рдХрдВрдЯреЗрдирд░ рдСрд░реНрдХреЗрд╕реНрдЯреНрд░реЗрд╢рди рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рд╣реИ рдЬреЛ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЛ рдХреНрд▓рд╕реНрдЯрд░ рдХрд░рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреЛ рд╣реЛрд╕реНрдЯ рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  GKE рдХреНрд▓рд╕реНрдЯрд░ рдУрдкрди рд╕реЛрд░реНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рдореИрдиреЗрдЬрдореЗрдВрдЯ рд╕рд┐рд╕реНрдЯрдо Kubernetes рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИрдВред  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдХреЗ рд▓рд┐рдП рддрдВрддреНрд░ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </p><br><p>  GKE рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдирд╛: </p><br><p>  1) рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рдПрдБ: </p><br><pre> <code class="plaintext hljs">gcloud container clusters create istioready \ --cluster-version latest \ --machine-type=n1-standard-2 \ --num-nodes 4</code> </pre> <br><p>  <strong>Gcloud</strong> рдХрдорд╛рдВрдб GCP рдкрд░рд┐рдпреЛрдЬрдирд╛ рдФрд░ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЬрд╝реЛрди рдореЗрдВ рдПрдХ <strong>istioready</strong> рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рддрд╛ рд╣реИред  рдЗрд╕реНрддрд┐рдпреЛ рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдЕрдиреБрд╢рдВрд╕рд╛ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдХрдо рд╕реЗ рдХрдо 4 рдиреЛрдбреНрд╕ рдФрд░ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрди 1-рдорд╛рдирдХ -2</a> рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рд╣реЛред </p><br><p>  рдЯреАрдо рдХрдИ рдорд┐рдирдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рддреА рд╣реИред  рдЬрдм рдХреНрд▓рд╕реНрдЯрд░ рддреИрдпрд╛рд░ рд╣реЛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХрдорд╛рдВрдб рдПрдХ рд╕рдорд╛рди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрджреЗрд╢ рдЬрд╛рд░реА рдХрд░рддрд╛ рд╣реИ</a> ред </p><br><p>  2) рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">kubectl</a></strong> рдХрдорд╛рдВрдб-рд▓рд╛рдЗрди <strong><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯреВрд▓</a></strong> рдореЗрдВ рдХреНрд░реЗрдбреЗрдВрд╢рд┐рдпрд▓реНрд╕ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">gcloud container clusters get-credentials istioready</code> </pre> <br><p>  3) рдЕрдм рдЖрдк рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ <strong>рдХреБрдмреЗрдЯреЗрд▓ рдХреЗ</strong> рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рд╕реЗ рдЖрдк рдиреЛрдбреНрд╕ рдХреА рд╕реНрдерд┐рддрд┐ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="plaintext hljs">kubectl get nodes</code> </pre> <br><p>  рдЖрджреЗрд╢ рдиреЛрдбреНрд╕ рдХреА рдПрдХ рд╕реВрдЪреА рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">NAME STATUS ROLES AGE VERSION gke-istoready-default-pool-dbeb23dc-1vg0 Ready &lt;none&gt; 99s v1.13.6-gke.13 gke-istoready-default-pool-dbeb23dc-36z5 Ready &lt;none&gt; 100s v1.13.6-gke.13 gke-istoready-default-pool-dbeb23dc-fj7s Ready &lt;none&gt; 99s v1.13.6-gke.13 gke-istoready-default-pool-dbeb23dc-wbjw Ready &lt;none&gt; 99s v1.13.6-gke.13</code> </pre> <br><h3 id="klyuchevye-ponyatiya-kubernetes">  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреА рдкреНрд░рдореБрдЦ рдЕрд╡рдзрд╛рд░рдгрд╛рдПрдБ </h3><br><p>  рдЖрд░реЗрдЦ GKE рдкрд░ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рджрд┐рдЦрд╛рддрд╛ рд╣реИ: </p><br><p><img src="https://habrastorage.org/webt/-s/x2/uj/-sx2ujtlifvzdtixzdqpnr9jzva.png"></p><br><p>  рдЗрд╕рд╕реЗ рдкрд╣рд▓реЗ рдХрд┐ рдЖрдк GKE рдХреЗ рд▓рд┐рдП рдХрдВрдЯреЗрдирд░ рддреИрдирд╛рдд рдХрд░реЗрдВ, рдХреБрдмреЗрд░рдиреЗрдЯ рдХреА рдкреНрд░рдореБрдЦ рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреЛ рджреЗрдЦреЗрдВред  рдпрджрд┐ рдЖрдк рдЕрдзрд┐рдХ рдЬрд╛рдирдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рддреЛ рдмрд╣реБрдд рд╣реА рдЕрдВрдд рдореЗрдВ рд▓рд┐рдВрдХ рд╣реИрдВред </p><br><ul><li>  <strong>рдиреЛрдбреНрд╕ рдФрд░ рдХреНрд▓рд╕реНрдЯрд░</strong> ред  GKE рдореЗрдВ, рдПрдХ рдиреЛрдб рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рд╣реИред  рдЕрдиреНрдп рдХреБрдмреЗрд░рдиреЗрдЯ рдкреНрд▓реЗрдЯрдлрд╛рд░реНрдореЛрдВ рдкрд░, рдореЗрдЬрдмрд╛рди рдПрдХ рдХрдВрдкреНрдпреВрдЯрд░ рдпрд╛ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдПрдХ рдХреНрд▓рд╕реНрдЯрд░ рдиреЛрдбреНрд╕ рдХрд╛ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рд╣реИ рдЬрд┐рд╕реЗ рдПрдХ рдкреВрд░реЗ рдХреЗ рд░реВрдк рдореЗрдВ рд╕реЛрдЪрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рдФрд░ рдЬрд╣рд╛рдВ рдЖрдк рдПрдХ рдХрдВрдЯреЗрдирд░реАрдХреГрдд рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛ рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВред </li><li>  <strong>рдлрд▓реА</strong> ред  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ, рдлрд▓реА рдореЗрдВ рдХрдВрдЯреЗрдирд░ рдЪрд▓рддреЗ рд╣реИрдВред  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рдПрдХ рдлрд▓реА рдПрдХ рдЕрд╡рд┐рднрд╛рдЬреНрдп рдЗрдХрд╛рдИ рд╣реИред  рдПрдХ рдлрд▓реА рдореЗрдВ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ рдХрдВрдЯреЗрдирд░ рд╣реЛрддреЗ рд╣реИрдВред  рдЖрдк рд╕рд░реНрд╡рд░ рдФрд░ <strong>рд▓реЛрдбрдЬреЗрди рдХрдВрдЯреЗрдирд░реЛрдВ</strong> рдХреЛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдкреЙрдбреНрд╕ рдореЗрдВ рддреИрдирд╛рдд рдХрд░рддреЗ рд╣реИрдВред  рдЬрдм рдПрдХ рдлрд▓реА рдореЗрдВ рдХрдИ рдХрдВрдЯреЗрдирд░ рд╣реЛрддреЗ рд╣реИрдВ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕рд░реНрд╡рд░ рдФрд░ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреНрд░реЙрдХреНрд╕реА рд╕рд░реНрд╡рд░</a> ), рддреЛ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЛ рдПрдХрд▓ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдкреЙрдб рдХреЗ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╕рд╛рдЭрд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <strong>рдкрд░рд┐рдирд┐рдпреЛрдЬрди</strong> ред  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ, рддреИрдирд╛рддреА рдПрдХ рдРрд╕реА рд╡рд╕реНрддреБ рд╣реИ рдЬреЛ рд╕рдорд╛рди рдлрд▓реА рдХрд╛ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рд╣реИред  рддреИрдирд╛рддреА рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдиреЛрдбреНрд╕ рдореЗрдВ рд╡рд┐рддрд░рд┐рдд рдлрд▓реА рдХреЗ рдХрдИ рдкреНрд░рддрд┐рдХреГрддрд┐рдпрд╛рдВ рдЪрд▓рд╛рддрд╛ рд╣реИред  рддреИрдирд╛рддреА рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЙрди рдкреЙрдбреНрд╕ рдХреЛ рдмрджрд▓ рджреЗрддреА рд╣реИ рдЬреЛ рд╡рд┐рдлрд▓ рд╣реЛ рдЬрд╛рддреЗ рд╣реИрдВ рдпрд╛ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВред </li><li>  <strong>рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реЗрд╡рд╛</strong> ред  рдЬрдм рдЖрдк GKE рдореЗрдВ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдЪрд▓рд╛рддреЗ рд╣реИрдВ, рддреЛ <strong>рд▓реЛрдбрдЬреЗрди</strong> рдФрд░ <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рдмреАрдЪ рдХрд╛ рдХрдиреЗрдХреНрд╢рди рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИред  рдЬрдм рдЖрдкрдиреЗ рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдпрд╛ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ рд╕реЗрд╡рд╛рдПрдВ рд╢реБрд░реВ рдХреА рдереАрдВ, рддреЛ рдЖрдкрдиреЗ <strong>рд╕реНрдерд╛рдиреАрдпрд╣реЛрд╕реНрдЯ: 8080</strong> рдкрд░ <strong>рд╕рд░реНрд╡рд░</strong> рдХреЛ рдЕрдиреБрд░реЛрдз рднреЗрдЬрд╛ рдерд╛ред  GKE рдкрд░ рддреИрдирд╛рддреА рдХреЗ рдмрд╛рдж, рдЙрдкрд▓рдмреНрдз рдиреЛрдбреНрд╕ рдкрд░ рдкреЙрдбреНрд╕ рдЪрд▓рддреЗ рд╣реИрдВред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдЖрдк рдпрд╣ рдирд┐рдпрдВрддреНрд░рд┐рдд рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рдХрд┐ рд╣реЛрд╕реНрдЯ рдкреЙрдб рдХрд┐рд╕ рдкрд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреЙрдбреНрд╕ рдХреЗ</a> рдкрд╛рд╕ рд╕реНрдерд╛рдпреА рдЖрдИрдкреА рдкрддреЗ рдирд╣реАрдВ рд╣реИрдВред <br>  <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рд▓рд┐рдП рдЖрдИрдкреА рдПрдбреНрд░реЗрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдкреЙрдбреНрд╕ рдХреЗ рдКрдкрд░ рдиреЗрдЯрд╡рд░реНрдХ рдПрдмреНрд╕реНрдЯреНрд░реИрдХреНрд╢рди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реЗрд╡рд╛ рд╣реИ</a> ред  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реЗрд╡рд╛ рдлрд▓реА рдХреЗ рдПрдХ рд╕реЗрдЯ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдерд╛рдпреА рд╕рдорд╛рдкрди рдмрд┐рдВрджреБ рдкреНрд░рджрд╛рди рдХрд░рддреА рд╣реИред  рдХрдИ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рддрд░рд╣ рдХреА рд╕реЗрд╡рд╛рдПрдВ рд╣реИрдВ</a> ред  <strong>рд╕рд░реНрд╡рд░</strong> рдПрдХ <strong>LoadBalancer</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд╣рд░ рд╕реЗ <strong>рд╕рд░реНрд╡рд░</strong> рд╕реЗ рд╕рдВрдкрд░реНрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдмрд╛рд╣рд░реА рдЖрдИрдкреА рдкрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред <br>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ рдПрдХ рдПрдХреАрдХреГрдд DNS рд╕рд┐рд╕реНрдЯрдо рднреА рд╣реИ рдЬреЛ рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рд▓рд┐рдП DNS рдирд╛рдо (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, <strong>helloserver.default.cluster.local</strong> ) рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХреЗ рд▓рд┐рдП рдзрдиреНрдпрд╡рд╛рдж, рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рднреАрддрд░ рдкреЙрдбреНрд╕ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдкрддреЗ рдкрд░ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЕрдиреНрдп рдкреЙрдбреНрд╕ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рддреЗ рд╣реИрдВред  DNS рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд╣рд░ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдХреНрд▓рд╛рдЙрдб рд╢реЗрд▓ рдпрд╛ рдХрдВрдкреНрдпреВрдЯрд░ рдкрд░ред </li></ul><br><h3 id="manifesty-kubernetes">  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореИрдирд┐рдлреЗрд╕реНрдЯреНрд╕ </h3><br><p>  рдЬрдм рдЖрдкрдиреЗ рд╕реНрд░реЛрдд рдХреЛрдб рд╕реЗ рдЖрд╡реЗрджрди рд╢реБрд░реВ рдХрд┐рдпрд╛ рдерд╛, рддреЛ рдЖрдкрдиреЗ рдЕрдирд┐рд╡рд╛рд░реНрдп <strong>python3</strong> рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдерд╛ </p><br><p>  <strong>server.py</strong> </p><br><p>  рдЕрднрд┐рдкреНрд░рд╛рдп рдХрд╛ рдЕрд░реНрде рдХреНрд░рд┐рдпрд╛ рд╣реИ: "рдпрд╣ рдХрд░реЛред" </p><br><p>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдПрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдШреЛрд╖рдгрд╛рддреНрдордХ рдореЙрдбрд▓</a> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреЛ рдирд╣реАрдВ рдмрддрд╛рддреЗ рдХрд┐ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╡рд╛рдВрдЫрд┐рдд рд░рд╛рдЬреНрдп рдХрд╛ рд╡рд░реНрдгрди рдХрд░реЗрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдЖрд╡рд╢реНрдпрдХ рд░реВрдк рд╕реЗ рдлрд▓реА рдХреЛ рд╢реБрд░реВ рдФрд░ рд░реЛрдХрддрд╛ рд╣реИ, рддрд╛рдХрд┐ рд╕рд┐рд╕реНрдЯрдо рдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕реНрдерд┐рддрд┐ рд╡рд╛рдВрдЫрд┐рдд рд╣реЛред </p><br><p>  рдЖрдк рдореИрдирд┐рдлрд╝реЗрд╕реНрдЯ, рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">YAML</a> рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рд╕реНрдерд┐рддрд┐ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВред  YAML рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдПрдХ рдпрд╛ рдЕрдзрд┐рдХ Kubernetes рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рд╣реЛрддреЗ рд╣реИрдВред </p><br><p>  рдЙрджрд╛рд╣рд░рдг рдореЗрдВ <strong>рд╕рд░реНрд╡рд░</strong> рдФрд░ <strong>рд▓реЛрдбрдЬреЗрди рдХреЗ</strong> рд▓рд┐рдП <strong>YAML</strong> рдлрд╝рд╛рдЗрд▓ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ YAML рдлрд╝рд╛рдЗрд▓ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдСрдмреНрдЬреЗрдХреНрдЯ рдФрд░ Kubernetes рд╕реЗрд╡рд╛ рдХреА рд╡рд╛рдВрдЫрд┐рдд рд╕реНрдерд┐рддрд┐ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br><p>  <strong>server.yaml</strong> </p><br><pre> <code class="plaintext hljs">apiVersion: apps/v1 kind: Deployment metadata: name: helloserver spec: selector: matchLabels: app: helloserver replicas: 1 template: metadata: labels: app: helloserver spec: terminationGracePeriodSeconds: 5 restartPolicy: Always containers: - name: main image: gcr.io/google-samples/istio/helloserver:v0.0.1 imagePullPolicy: Always</code> </pre> <br><ul><li>  <strong>рддрд░рд╣</strong> рд╡рд╕реНрддреБ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  <strong>рдореЗрдЯрд╛рдбреЗрдЯрд╛.рдирд╛рдо</strong> рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдХреЗ рдирд╛рдо рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  рдкрд╣рд▓реЗ рдХреНрд╖реЗрддреНрд░ рдХреА <strong>рдХрд▓реНрдкрдирд╛</strong> рдореЗрдВ рд╡рд╛рдВрдЫрд┐рдд рд░рд╛рдЬреНрдп рдХрд╛ рд╡рд┐рд╡рд░рдг рд╢рд╛рдорд┐рд▓ рд╣реИред </li><li>  <strong>spec.replicas</strong> рдкреЙрдбреНрд╕ рдХреА рд╡рд╛рдВрдЫрд┐рдд рд╕рдВрдЦреНрдпрд╛ рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИред </li><li>  <strong>Spec.template</strong> рдЕрдиреБрднрд╛рдЧ <strong>рдкреЙрдб</strong> рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИред  рдлрд▓реА рдХреЗ рд╡рд┐рдирд┐рд░реНрджреЗрд╢ рдореЗрдВ рдПрдХ <strong>рдЫрд╡рд┐</strong> рдлрд╝реАрд▓реНрдб рд╣реИ рдЬрд╣рд╛рдВ рдХрдВрдЯреЗрдирд░ рд░рдЬрд┐рд╕реНрдЯреНрд░реА рд╕реЗ рдирд┐рдХрд╛рд▓реА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдЫрд╡рд┐ рдХрд╛ рдирд╛рдо рдЗрдВрдЧрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред </li></ul><br><p>  рд╕реЗрд╡рд╛ рдХреЛ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">apiVersion: v1 kind: Service metadata: name: hellosvc spec: type: LoadBalancer selector: app: helloserver ports: - name: http port: 80 targetPort: 8080</code> </pre> <br><ul><li>  <strong>LoadBalancer</strong> : рдЧреНрд░рд╛рд╣рдХ рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд░ рдХреЗ IP рдкрддреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рднреЗрдЬрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд IP рдкрддрд╛ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЬреЛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд╣рд░ рд╕реЗ рдкрд╣реБрдВрдЪ рдпреЛрдЧреНрдп рд╣реЛрддрд╛ рд╣реИред </li><li>  <strong>targetPort</strong> : рдЬреИрд╕рд╛ рдХрд┐ рдЖрдк рдпрд╛рдж рдХрд░рддреЗ рд╣реИрдВ, <strong>Dockerfile</strong> рдореЗрдВ <strong>EXPOSE</strong> <strong>8080</strong> рдХрдорд╛рдВрдб рдкреЛрд░реНрдЯ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЖрдк рдкреЛрд░реНрдЯ <strong>8080</strong> рдкреНрд░рджрд╛рди рдХрд░рддреЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЖрдк рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рдмрд╛рд╣рд░ рд╕реЗ <strong>рд╕рд░реНрд╡рд░</strong> рдХрдВрдЯреЗрдирд░ рддрдХ рдкрд╣реБрдВрдЪ рд╕рдХреЗрдВред  рд╣рдорд╛рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, <strong>hellosvc.default.cluster.local: 80</strong> (рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдирд╛рдо: <strong>Hellosvc</strong> ) <strong>рд╣реЗрд▓реЛрд╕реЛрд╡рд░</strong> рдкреЙрдб <strong>рдХреЗ</strong> рдЖрдИрдкреА тАЛтАЛрдкрддреЗ рдХреЗ <strong>8080</strong> рдкреЛрд░реНрдЯ рд╕реЗ рдореЗрд▓ рдЦрд╛рддреА рд╣реИред </li><li>  <strong>рдкреЛрд░реНрдЯ</strong> : рдпрд╣ рдкреЛрд░реНрдЯ рдирдВрдмрд░ рд╣реИ рдЬрд╣рд╛рдВ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдЕрдиреНрдп рд╕реЗрд╡рд╛рдПрдВ рдЕрдиреБрд░реЛрдз рднреЗрдЬрддреА рд╣реИрдВред </li></ul><br><p>  <strong>loadgen.yaml</strong> </p><br><p>  <strong>Loadgen.yaml</strong> рдореЗрдВ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдСрдмреНрдЬреЗрдХреНрдЯ <strong>server.yaml</strong> рдХреЗ рд╕рдорд╛рди рд╣реИред  рдЕрдВрддрд░ рдпрд╣ рд╣реИ рдХрд┐ рдкрд░рд┐рдирд┐рдпреЛрдЬрди рдСрдмреНрдЬреЗрдХреНрдЯ рдореЗрдВ рдПрдХ <strong>env</strong> рдЕрдиреБрднрд╛рдЧ рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рдЙрди рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддрд╛ рд╣реИ рдЬреЛ <strong>рд▓реЛрдбрдЬреЗрди рдХреА</strong> рдЬрд░реВрд░рдд рд╣реИ рдФрд░ рдЬрд┐рд╕реЗ рдЖрдкрдиреЗ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрдм рдЖрдкрдиреЗ рд╕реНрд░реЛрдд рдХреЛрдб рд╕реЗ рдЖрд╡реЗрджрди рд╢реБрд░реВ рдХрд┐рдпрд╛ рдерд╛ред </p><br><pre> <code class="plaintext hljs">apiVersion: apps/v1 kind: Deployment metadata: name: loadgenerator spec: selector: matchLabels: app: loadgenerator replicas: 1 template: metadata: labels: app: loadgenerator spec: terminationGracePeriodSeconds: 5 restartPolicy: Always containers: - name: main image: gcr.io/google-samples/istio/loadgen:v0.0.1 imagePullPolicy: Always env: - name: SERVER_ADDR value: "http://hellosvc:80/" - name: REQUESTS_PER_SECOND value: "10" resources: requests: cpu: 300m memory: 256Mi limits: cpu: 500m memory: 512Mi</code> </pre> <br><p>  рдЪреВрдВрдХрд┐ <strong>рд▓реЛрдбрдЧреЗрди</strong> рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рд╕реНрд╡реАрдХрд╛рд░ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, <strong>рдХреНрд▓рд╕реНрдЯрд░</strong> <strong>рдкреНрд░рдХрд╛рд░ рдХреЗ</strong> рдХреНрд╖реЗрддреНрд░ рдХреЗ рд▓рд┐рдП рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдпрд╣ рдкреНрд░рдХрд╛рд░ рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд IP рдкрддрд╛ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рд╕реЗрд╡рд╛рдПрдБ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдмрд╛рд╣рд░реА рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЛ рдпрд╣ IP рдкрддрд╛ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><pre> <code class="plaintext hljs">apiVersion: v1 kind: Service metadata: name: loadgensvc spec: type: ClusterIP selector: app: loadgenerator ports: - name: http port: 80 targetPort: 8080</code> </pre> <br><h3 id="razvertyvanie-konteynerov-v-gke">  GKE рдореЗрдВ рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЛ рддреИрдирд╛рдд рдХрд░реЗрдВ </h3><br><p>  1) рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд░ рдЬрд╛рдПрдВ рдЬрд╣рд╛рдВ <strong>рд╕рд░реНрд╡рд░</strong> рдЙрджрд╛рд╣рд░рдг рд╕реНрдерд┐рдд рд╣реИ: </p><br><pre> <code class="plaintext hljs">cd YOUR_WORKING_DIRECTORY/istio-samples/sample-apps/helloserver/server/</code> </pre> <br><p>  2) рдПрдХ рдЯреЗрдХреНрд╕реНрдЯ рдПрдбрд┐рдЯрд░ рдореЗрдВ рдУрдкрди <strong>рд╕рд░реНрд╡рд░</strong> ред <strong>рдУрдПрдордПрд▓</strong> ред <br>  3) <strong>рдЫрд╡рд┐</strong> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдирд╛рдо рдХреЛ рдЕрдкрдиреА рдбреЙрдХрд░ рдЫрд╡рд┐ рдХреЗ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВред </p><br><pre> <code class="plaintext hljs">image: gcr.io/PROJECT_ID/preparing-istio/helloserver:v0.0.1</code> </pre> <br><p>  <strong>PROJECT_ID</strong> рдХреЛ рдЕрдкрдиреЗ GCP рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╕реЗ рдмрджрд▓реЗрдВред <br>  4) рд╕рд╣реЗрдЬреЗрдВ рдФрд░ рдмрдВрдж рдХрд░реЗрдВ <strong>server.yaml</strong> ред <br>  5) рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ YAML рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">kubectl apply -f server.yaml</code> </pre> <br><p>  рд╕рдлрд▓ рд╕рдорд╛рдкрди рдХреЗ рдмрд╛рдж, рдХрдорд╛рдВрдб рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬрд╛рд░реА рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">deployment.apps/helloserver created service/hellosvc created</code> </pre> <br><p>  6) рдЙрд╕ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдкрд░ рдЬрд╛рдПрдВ рдЬрд╣рд╛рдВ <strong>loadgen</strong> рд╕реНрдерд┐рдд рд╣реИ: </p><br><pre> <code class="plaintext hljs">cd ../loadgen</code> </pre> <br><p>  7) рдПрдХ рдЯреЗрдХреНрд╕реНрдЯ рдПрдбрд┐рдЯрд░ рдореЗрдВ <strong>loadgen.yaml</strong> рдЦреЛрд▓реЗрдВред <br>  8) <strong>рдЫрд╡рд┐</strong> рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рдирд╛рдо рдХреЛ рдЕрдкрдиреА рдбреЛрдХрд░ рдЫрд╡рд┐ рдХреЗ рдирд╛рдо рд╕реЗ рдмрджрд▓реЗрдВред </p><br><pre> <code class="plaintext hljs">image: gcr.io/PROJECT_ID/preparing-istio/loadgenv0.0.1</code> </pre> <br><p>  <strong>PROJECT_ID</strong> рдХреЛ рдЕрдкрдиреЗ GCP рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рд╕реЗ рдмрджрд▓реЗрдВред <br>  9) рд╕рд╣реЗрдЬреЗрдВ рдФрд░ <strong>loadgen.yaml</strong> , рдЯреЗрдХреНрд╕реНрдЯ рдПрдбрд┐рдЯрд░ рдХреЛ рдмрдВрдж рдХрд░реЗрдВред <br>  10) рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдореЗрдВ YAML рдлрд╝рд╛рдЗрд▓ рдХрд╛ рд╡рд┐рд╕реНрддрд╛рд░ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">kubectl apply -f loadgen.yaml</code> </pre> <br><p>  рд╕рдлрд▓ рд╕рдорд╛рдкрди рдХреЗ рдмрд╛рдж, рдХрдорд╛рдВрдб рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬрд╛рд░реА рдХрд░рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">deployment.apps/loadgenerator created service/loadgensvc created</code> </pre> <br><p>  11) рдЪреВрд▓реНрд╣реЛрдВ рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдБрдЪ рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">kubectl get pods</code> </pre> <br><p>  рдЖрджреЗрд╢ рд╕реНрдерд┐рддрд┐ рджрд┐рдЦрд╛рддрд╛ рд╣реИ: </p><br><pre> <code class="plaintext hljs">NAME READY STATUS RESTARTS AGE helloserver-69b9576d96-mwtcj 1/1 Running 0 58s loadgenerator-774dbc46fb-gpbrz 1/1 Running 0 57s</code> </pre> <br><p>  12) <strong>рд▓реЛрдбрдЬреЗрди</strong> рдкреЙрдб рд╕реЗ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд▓реЙрдЧ рдирд┐рдХрд╛рд▓реЗрдВред  рдкрд┐рдЫрд▓реЗ рдЙрддреНрддрд░ рд╕реЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рд╕рд╛рде <strong>POD_ID</strong> рдмрджрд▓реЗрдВред </p><br><pre> <code class="plaintext hljs">kubectl logs loadgenerator-POD_ID</code> </pre> <br><p>  13) рдмрд╛рд╣рд░реА <strong>рдирд░реНрдХреЛрд╕рд┐рд▓ рдЖрдИрдкреА</strong> рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ: </p><br><pre> <code class="plaintext hljs">kubectl get service</code> </pre> <br><p>  рдХрдорд╛рдВрдб рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрддреА рд╣реИ: </p><br><pre> <code class="plaintext hljs">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE hellosvc LoadBalancer 10.81.15.158 192.0.2.1 80:31127/TCP 33m kubernetes ClusterIP 10.81.0.1 &lt;none&gt; 443/TCP 93m loadgensvc ClusterIP 10.81.15.155 &lt;none&gt; 80/TCP 4m52s</code> </pre> <br><p>  14) <strong>рд╣реЗрд▓реЛрд╕рд┐рд▓реНрд╡ рдХреЗ</strong> рд▓рд┐рдП рдПрдХ рдЕрдиреБрд░реЛрдз рднреЗрдЬреЗрдВ: <strong>EXTERNAL_IP</strong> рдХреЛ рдмрд╛рд╣рд░реА рдЖрдИрдкреА рдкрддреЗ рд╕реЗ <strong>рдмрджрд▓реЗрдВ</strong> ред </p><br><pre> <code class="plaintext hljs">curl http://EXTERNAL_IP</code> </pre> <br><h3 id="beremsya-za-istio">  рдЯреИрдХрд▓ рдЗрд╕реНрддрд┐рдпреЛ </h3><br><p>  рдЖрдкрдХреЗ рдкрд╛рд╕ GKE рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рддреИрдирд╛рдд рд╣реИред  <strong>loadgen</strong> <strong>рд╕рд░реНрд╡рд░</strong> рдХреЛ рд░рд┐рдХреНрд╡реЗрд╕реНрдЯ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП Kubernetes DNS ( <strong>hellosvc: 80</strong> ) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддрд╛ <strong>рд╣реИ</strong> , рдФрд░ рдЖрдк рдмрд╛рд╣рд░реА IP рдкрддреЗ рдкрд░ <strong>рд╕рд░реНрд╡рд░</strong> рдХреЛ рдЕрдиреБрд░реЛрдз рднреЗрдЬ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рд╛рд▓рд╛рдБрдХрд┐ рдХреБрдмреЗрд░рдиреЗрдЯ рдХреА рдХрдИ рд╡рд┐рд╢реЗрд╖рддрд╛рдПрдВ рд╣реИрдВ, рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдЬрд╛рдирдХрд╛рд░реА рдХреА рдХрдореА рд╣реИ: </p><br><ul><li>  <strong>рд╕реЗрд╡рд╛рдПрдВ рдХреИрд╕реЗ рд╕рд╣рднрд╛рдЧрд┐рддрд╛ рдХрд░рддреА рд╣реИрдВ?</strong>  рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмреАрдЪ рдХреНрдпрд╛ рд╕рдВрдмрдВрдз рд╣реИ?  рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдмреАрдЪ рдЖрд╡рд╛рдЧрдорди рдХреИрд╕рд╛ рд╣реИ?  рдЖрдк рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ <strong>рд▓реЛрдбрдЬреЗрди</strong> <strong>рд╕рд░реНрд╡рд░</strong> рдХреЛ рдЕрдиреБрд░реЛрдз рднреЗрдЬрддрд╛ <strong>рд╣реИ</strong> , рд▓реЗрдХрд┐рди рдХрд▓реНрдкрдирд╛ рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдЖрд╡реЗрджрди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдирд╣реАрдВ рдЬрд╛рдирддреЗ рд╣реИрдВред  рдЗрди рд╕рд╡рд╛рд▓реЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдЬреАрдХреЗрдХреЗ рдореЗрдВ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ рдЪреВрд▓реНрд╣реЛрдВ рдХреА рд╕реВрдЪреА рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВред </li><li>  <strong>рдореЗрдЯреНрд░рд┐рдХреНрд╕</strong> ред  рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдз рдкрд░ <strong>рд╕рд░реНрд╡рд░</strong> рдХрдм рддрдХ рдЬрд╡рд╛рдм рджреЗрддрд╛ рд╣реИ?  рдкреНрд░рддрд┐ рд╕реЗрдХрдВрдб рдХрд┐рддрдиреЗ рдЕрдиреБрд░реЛрдз рд╕рд░реНрд╡рд░ рдкрд░ рдЬрд╛рддреЗ рд╣реИрдВ?  рдХреНрдпрд╛ рдпрд╣ рддреНрд░реБрдЯрд┐ рд╕рдВрджреЗрд╢ рджреЗрддрд╛ рд╣реИ? </li><li>  <strong>рд╕реБрд░рдХреНрд╖рд╛ рдЬрд╛рдирдХрд╛рд░реА</strong> ред  <strong>рдХреНрдпрд╛</strong> рдХреЗрд╡рд▓ <strong>HTTP</strong> рдпрд╛ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">mTLS рдХреЗ</a> рдорд╛рдзреНрдпрдо рд╕реЗ <strong>рд▓реЛрдбрдЬреЗрди</strong> рдФрд░ <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рдмреАрдЪ <strong>рдХрд╛</strong> рдЯреНрд░реИрдлрд╝рд┐рдХ рд╣реИ? </li></ul><br><p>  рдЗрди рд╕рднреА рд╕рд╡рд╛рд▓реЛрдВ рдХрд╛ рдЬрд╡рд╛рдм рдЗрд╕реНрддрд┐рдпреЛ рдиреЗ рджрд┐рдпрд╛ рд╣реИред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕реНрддрд┐рдпреЛ рдкреНрд░рддреНрдпреЗрдХ рдлрд▓реА рдореЗрдВ рдПрдХ рдПрдирд╡реЙрдп рд╕рд╛рдЗрдбрдХрд╛рд░ рдкреНрд░реЙрдХреНрд╕реА рдХреЛ рд░рдЦрддрд╛ рд╣реИред  Envoy рдкреНрд░реЙрдХреНрд╕реА рд╕рднреА рдЖрдиреЗ рд╡рд╛рд▓реЗ рдФрд░ рдмрд╛рд╣рд░ рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рднреЗрдЬрддреА рд╣реИред  рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ рдХрд┐ <strong>рд╕рд░реНрд╡рд░</strong> рдФрд░ <strong>рд▓реЛрдбрдЬреЗрди</strong> рдХреЛ <strong>рдПрдирд╡реЙрдп</strong> рд╕рд╛рдЗрдбрдХрд╛рд░ <strong>рдкреНрд░реЙрдХреНрд╕рд┐рд╕</strong> рдорд┐рд▓рддреЗ рд╣реИрдВ, рдФрд░ <strong>рд▓реЛрдбрдЬреЗрди</strong> рд╕реЗ <strong>рд╕рд░реНрд╡рд░</strong> рддрдХ рдХрд╛ рд╕рд╛рд░рд╛ рдЯреНрд░реИрдлрд┐рдХ <strong>рдПрдирд╡реЙрдп рдкреНрд░реЙрдХреНрд╕рд┐рд╕</strong> рд╕реЗ <strong>рд╣реЛрдХрд░</strong> рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  Envoy рдкрд░рджреЗ рдХреЗ рдкреАрдЫреЗ рдХрдиреЗрдХреНрд╢рди рдПрдХ рд╕реЗрд╡рд╛ рдЬрд╛рд▓ рдХреЗ рд░реВрдк рдореЗрдВред  рд╕реЗрд╡рд╛ рдЬрд╛рд▓ рд╡рд╛рд╕реНрддреБрдХрд▓рд╛ рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рдХреА рдПрдХ рдкрд░рдд рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред </p><br><p><img src="https://habrastorage.org/webt/7n/sk/z-/7nskz-5os2onyoaaf5kz5x38ve4.png"></p><br><p>  рдПрдХ рдмрд╛рд░ рдЬрдм Envoy рдкрд░рджреЗ рдХреЗ рдкреАрдЫреЗ рдЕрдкрдиреЗ рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ Istio GKE рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рд╢реАрд░реНрд╖ рдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓рдЧрднрдЧ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЛрдб рдХреЛ рдмрджрд▓реЗ рдмрд┐рдирд╛ред  рд▓реЗрдХрд┐рди рдЖрдкрдиреЗ рдЗрд╕реНрддрд┐рдпреЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рдмрдВрдзрди рдХреЗ рд▓рд┐рдП рдЖрд╡реЗрджрди рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдХрд╛рдо рдХрд┐рдпрд╛: </p><br><ul><li>  рд╕рднреА рдХрдВрдЯреЗрдирд░реЛрдВ рдХреЗ рд▓рд┐рдП рд╕реЗрд╡рд╛рдПрдБред  <strong>рд╕рд░реНрд╡рд░</strong> рдФрд░ <strong>рд▓реЛрдбрдЬреЗрди рдХреА рддреИрдирд╛рддреА</strong> рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рд╕реЗрд╡рд╛ рджреНрд╡рд╛рд░рд╛ рдЬреБрдбрд╝реА рд╣реБрдИ <strong>рд╣реИрдВ</strong> ред  рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ <strong>рд▓реЛрдбрдЬреЗрди</strong> , рдЬреЛ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдЕрдиреБрд░реЛрдзреЛрдВ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдПрдХ рд╕реЗрд╡рд╛ рд╣реИред </li><li>  рд╕реЗрд╡рд╛рдУрдВ рдореЗрдВ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреЗ рдирд╛рдо рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред  рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╕реЗрд╡рд╛ рдмрдВрджрд░рдЧрд╛рд╣реЛрдВ рдХреЛ GKE рдореЗрдВ рдЕрдирд╛рдо рд░реВрдк рд╕реЗ рдЫреЛрдбрд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдлрд┐рд░ рднреА Istio рдХреЛ рдЗрд╕рдХреЗ рдкреНрд░реЛрдЯреЛрдХреЙрд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреЛрд░реНрдЯ рдирд╛рдо рдХреА</a> рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  YAML рдлрд╝рд╛рдЗрд▓ рдореЗрдВ, <strong>рд╕рд░реНрд╡рд░ рдХреЗ</strong> рд▓рд┐рдП рдкреЛрд░реНрдЯ рдХреЛ <strong>http</strong> рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╕рд░реНрд╡рд░ <strong>HTTP рдкреНрд░реЛрдЯреЛрдХреЙрд▓</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ <strong>рд╣реИ</strong> ред  рдпрджрд┐ <strong>рд╕реЗрд╡рд╛</strong> <strong>gRPC рдХрд╛</strong> рдЙрдкрдпреЛрдЧ <strong>рдХрд░рддреА рд╣реИ</strong> , рддреЛ рдЖрдк рдкреЛрд░реНрдЯ <strong>grpc рдХрд╛</strong> рдирд╛рдо <strong>рд░рдЦреЗрдВрдЧреЗ</strong> ред </li><li>  рдирд┐рдпреБрдХреНрддрд┐рдпрд╛рдБ рдЪрд┐рд╣реНрдирд┐рдд рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдЖрдк Istio рдХреЗ рдЯреНрд░реИрдлрд╝рд┐рдХ рдкреНрд░рдмрдВрдзрди рд╕реБрд╡рд┐рдзрд╛рдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдЙрд╕реА рд╕реЗрд╡рд╛ рдХреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд╝рд┐рдХ рд╕рд╛рдЭрд╛ рдХрд░рдирд╛ред </li></ul><br><h3 id="ustanovka-istio">  рдЗрд╕реНрдЯрд┐рдпреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h3><br><p>  Istio рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЗ рд╣реИрдВред  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GST рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдкрд░ Istio рдХреЛ рд╕рдХреНрд╖рдо</a> рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдпрд╛ рдХрд┐рд╕реА рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Istio рдХреЗ рдУрдкрди рд╕реЛрд░реНрд╕ рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ</a> ред  GKE рдкрд░ Istio рдХреЗ рд╕рд╛рде, рдЖрдк GKE рдХреНрд▓рд╕реНрдЯрд░ рдЬреАрд╡рди рдЪрдХреНрд░ рдХреЗ рднрд╛рдЧ рдХреЗ рд░реВрдк рдореЗрдВ Istio рдХреА рд╕реНрдерд╛рдкрдирд╛ рдФрд░ рдЙрдиреНрдирдпрди рдХреЛ рдЖрд╕рд╛рдиреА рд╕реЗ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рдЖрдкрдХреЛ Istio рдХреЗ рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдпрд╛ Istio рдирд┐рдпрдВрддреНрд░рдг рдХрдХреНрд╖ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкрд░ рдЕрдзрд┐рдХ рдирд┐рдпрдВрддреНрд░рдг рд╣реИ, рддреЛ GKE рдПрдХреНрд╕рдЯреЗрдВрд╢рди рдкрд░ Istio рдХреЗ рдмрдЬрд╛рдп рдЦреБрд▓реЗ рд╕реНрд░реЛрдд рд╕рдВрд╕реНрдХрд░рдг рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред  рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдирд┐рд░реНрдгрдп рд▓реЗрдиреЗ рдХреЗ рд▓рд┐рдП, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрдпрд╛ GKE рдкрд░</a> рдЖрд▓реЗрдЦ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреНрдпрд╛ рдореБрдЭреЗ рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ?</a>  ред </p><br><p>  рдПрдХ рд╡рд┐рдХрд▓реНрдк рдХрд╛ рдЪрдпрди рдХрд░реЗрдВ, рдЙрдЪрд┐рдд рдореИрдиреБрдЕрд▓ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд░реЗрдВ рдФрд░ рдХреНрд▓рд╕реНрдЯрд░ рдкрд░ рдЗрд╕реНрддрд┐рдпреЛ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рдирд┐рд░реНрджреЗрд╢реЛрдВ рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред  рдпрджрд┐ рдЖрдк рдЕрдкрдиреЗ рдирдП рддреИрдирд╛рдд рдЖрд╡реЗрджрди рдХреЗ рд╕рд╛рде рдЗрд╕реНрддрд┐рдпреЛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ, рддреЛ <strong>рдбрд┐рдлрд╝реЙрд▓реНрдЯ</strong> рдирд╛рдо рд╕реНрдерд╛рди рдХреЗ рд▓рд┐рдП <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдЗрдбрдХрд╛рд░ рдПрдореНрдмреЗрдбрд┐рдВрдЧ рд╕рдХреНрд╖рдо рдХрд░реЗрдВ</a> ред </p><br><h3 id="ochistka">  рд╕рдлрд╛рдИ </h3><br><p>  рдЗрд╕ рдЧрд╛рдЗрдб рдореЗрдВ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреЗ Google рдХреНрд▓рд╛рдЙрдб рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдЦрд╛рддреЗ рдХреЛ рдЪрд╛рд░реНрдЬ рдХрд░рдиреЗ рд╕реЗ рдмрдЪрдиреЗ рдХреЗ рд▓рд┐рдП, рдЗрд╕реНрдЯрд┐рдпреЛ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддреЗ рд╕рдордп рдФрд░ рдирдореВрдирд╛ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдХреЗ рд╕рд╛рде рдЦреЗрд▓рдиреЗ рдХреЗ рджреМрд░рд╛рди рдХрдВрдЯреЗрдирд░ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рд╣рдЯрд╛ рджреЗрдВред  рдпрд╣ рд╕рднреА рдХреНрд▓рд╕реНрдЯрд░ рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдЧрд╛, рдЬреИрд╕реЗ рдХрд┐ рдХрдВрдкреНрдпреВрдЯ рдЗрдВрд╕реНрдЯреЗрдВрд╕, рдбрд┐рд╕реНрдХ рдФрд░ рдиреЗрдЯрд╡рд░реНрдХ рд╕рдВрд╕рд╛рдзрдиред </p><br><h3 id="chto-dalshe">  рдЖрдЧреЗ рдХреНрдпрд╛ рд╣реИ? </h3><br><ul><li><p>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рддрдХрдиреАрдХреЛрдВ рдХреЛ рдЬрд╛рдиреЗрдВ: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбрд╛рдХ рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗрд╡рд╛рд▓рд╛ рдордЬрд╝рджреВрд░</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдВрдЯреЗрдирд░</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрдВрдЯреЗрдирд░ рдХреА рд░рдЬрд┐рд╕реНрдЯреНрд░реА</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Kubernetes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">GKE</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗрд╡рд╛ рдЬрд╛рд▓</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Istio</a> </li></ol><br></li><li><p>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЙрдкрдХрд░рдг рдЬрд╛рдиреЗрдВ: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореЗрдШ sdk</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><strong>Gcloud рд╕рдВрджрд░реНрдн</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><strong>kubectl</strong></a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><strong>рдбрд╛рдХ рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗрд╡рд╛рд▓рд╛ рдордЬрд╝рджреВрд░</strong></a> </li></ol><br></li><li><p>  рдХреБрдмреЗрд░рдиреЗрдЯреНрд╕ рдХреА рдЕрд╡рдзрд╛рд░рдгрд╛рдУрдВ рдХреЛ рдЬрд╛рдиреЗрдВ: </p><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдореВрд╣реЛрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдореБрджреНрд░реА рдореАрд▓</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">Pod'y</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реЗрд╡рд╛рдПрдВ</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рддреИрдирд╛рддреА</a> </li></ol><br></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi469515/">https://habr.com/ru/post/hi469515/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi469499/index.html">рд╣рдо рдПрдкреНрдкрд▓ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рд╕рдорд╛рдирддрд╛рдПрдВ рдкрд░ рд╡рд┐рдЬрдп рдкреНрд░рд╛рдкреНрдд рдХреА рд╕рд╛рдЗрди рдЗрди рдХрд░реЗрдВ</a></li>
<li><a href="../hi469503/index.html">рд╕рд╛рдЗрдмрд░ рд╕реБрд░рдХреНрд╖рд╛: рд╣рдо 2019 рдореЗрдВ рдЧреНрд░рд╛рд╣рдХреЛрдВ рдХреЗ рдбреЗрдЯрд╛ рдХреЛ рд▓реАрдХ рд╕реЗ рдмрдЪрд╛рддреЗ рд╣реИрдВ</a></li>
<li><a href="../hi469505/index.html">рд╡рд┐рджреЗрд╢реА рдмрд╛рдЬрд╛рд░реЛрдВ рдореЗрдВ рд╡реНрдпрд╛рдкрд╛рд░ рд▓рд╛рдиреЗ рдХреЗ рд▓рд┐рдП 3 рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рддрд░реАрдХреЗ: рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХрдВрдкрдирд┐рдпреЛрдВ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдФрд░ рддрдХрдиреАрдХ</a></li>
<li><a href="../hi469507/index.html">рддреАрд╕рд░рд╛ рд╕реНрдЯреАрдо рд╡рд┐рдВрдбреЛрдЬ рдХреНрд▓рд╛рдЗрдВрдЯ рднреЗрджреНрдпрддрд╛, рд▓реЗрдХрд┐рди 0day рдирд╣реАрдВ</a></li>
<li><a href="../hi469509/index.html">рдХреЛрдгреАрдп рдпреЛрдЬрдирд╛рдмрджреНрдз, рдпрд╛ рдореИрдВрдиреЗ рдХреЛрдгреАрдп рдХреНрд▓реА рдХреЗ рд▓рд┐рдП рдЕрдкрдирд╛ рдЯреЗрдореНрдкрд▓реЗрдЯ рдХреИрд╕реЗ рд▓рд┐рдЦрд╛</a></li>
<li><a href="../hi469521/index.html">рдореИрдВрдиреЗ рдЧрд┐рд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ, рд╕рд╡рд╛рд░реА рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдореЛрдЯрд░рд╕рд╛рдЗрдХрд┐рд▓ рдЦрд░реАрджреА</a></li>
<li><a href="../hi469523/index.html">рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдЪрд░ рдШреЛрд╖рдгрд╛ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдХреЛрдб рдкреНрд░рджрд░реНрд╢рди рдХреА рдирд┐рд░реНрднрд░рддрд╛</a></li>
<li><a href="../hi469525/index.html">рдЦрдирди рдЙрддреНрдЦрдирди рдХреЗ рд▓рд┐рдП рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдирд┐рдпрдВрддреНрд░рдг рдкреНрд░рдгрд╛рд▓реА</a></li>
<li><a href="../hi469527/index.html">рдХреНрдпрд╛ рдЗрдВрдЯрд░рдХреЙрдо рдПрдХ рдЬрд╛рд╕реВрд╕реА рдХрд╛рди рд╣реИ?</a></li>
<li><a href="../hi469529/index.html">рдЯреЗрдХреНрд╕реНрдЯ рд░реЗрдВрдбрд░рд┐рдВрдЧ рд╕реЗ рдЖрдкрдХреЛ рдирдлрд░рдд рд╣реИ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>