<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëåüèΩ üçÇ üëÉüèæ Desarrollo de un conjunto de datos ac√∫sticos para entrenar una red neuronal. ‚óæÔ∏è üïØÔ∏è üï∫üèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Una vez, en una entrevista, un conocido m√∫sico ruso dijo: "Estamos trabajando en mentir y escupir en el techo". No puedo dejar de estar de acuerdo con...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo de un conjunto de datos ac√∫sticos para entrenar una red neuronal.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/speechpro/blog/427397/"><img src="https://habrastorage.org/webt/n9/ma/ty/n9matyv7rhr8woqlugdb6zw2dea.png"><br><br><p>  Una vez, en una entrevista, un conocido m√∫sico ruso dijo: "Estamos trabajando en mentir y escupir en el techo".  No puedo dejar de estar de acuerdo con esta declaraci√≥n, porque no se puede discutir el hecho de que la pereza es la fuerza impulsora en el desarrollo de la tecnolog√≠a.  De hecho, solo en el siglo pasado hemos pasado de las m√°quinas de vapor a la industrializaci√≥n digital, y ahora la inteligencia artificial, que fue descrita por escritores de ciencia ficci√≥n y futur√≥logos del siglo pasado, se est√° convirtiendo en una realidad cada vez mayor de nuestro mundo cada d√≠a.  Juegos de computadora, dispositivos m√≥viles, relojes inteligentes y mucho m√°s. <a name="habracut"></a>  b√°sicamente utiliza algoritmos asociados con mecanismos de aprendizaje autom√°tico. </p><br><br>  Hoy en d√≠a, debido al crecimiento de las capacidades inform√°ticas de los procesadores gr√°ficos y la gran cantidad de datos que han aparecido, las redes neuronales han ganado popularidad, utilizando las cuales resuelven problemas de clasificaci√≥n y regresi√≥n, capacit√°ndolos en datos preparados.  Ya se han escrito muchos art√≠culos sobre c√≥mo entrenar redes neuronales y qu√© marcos utilizar para esto.  Pero hay una tarea anterior que tambi√©n debe resolverse, y esta es la tarea de formar una matriz de datos, un conjunto de datos, para entrenar a√∫n m√°s la red neuronal.  Esto se discutir√° en este art√≠culo. <br><br><img src="https://habrastorage.org/webt/lv/kp/om/lvkpom8mxglgptwgqorih4jz9zu.png"><br><br>  No hace mucho tiempo, era necesario construir un clasificador ac√∫stico del ruido del autom√≥vil capaz de extraer datos de un flujo de audio com√∫n: vidrios rotos, abrir puertas y operar el motor de un autom√≥vil en varios modos.  El desarrollo del clasificador no fue dif√≠cil, pero ¬ød√≥nde obtener el conjunto de datos para que cumpla con todos los requisitos? <br><br>  Google acudi√≥ al rescate (sin ofender a Yandex; hablar√© de sus ventajas un poco m√°s tarde), con la ayuda de la cual fue posible seleccionar varios grupos principales que contienen los datos necesarios.  Quiero se√±alar de antemano que las fuentes indicadas en este art√≠culo incluyen una gran cantidad de informaci√≥n ac√∫stica, con varias clases, lo que le permite crear un conjunto de datos para diferentes tareas.  Ahora pasamos a una descripci√≥n general de estas fuentes. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><b>Freesound.org</b></a> <br><br><img src="https://habrastorage.org/webt/pf/sz/mj/pfszmjwajssor0c8nask3seztzm.png"><br><br>  Lo m√°s probable es que <i>Freesound.org</i> proporcione el mayor volumen de datos ac√∫sticos, siendo un repositorio conjunto de muestras de m√∫sica con licencia, que actualmente tiene m√°s de 230,000 copias de efectos de sonido.  Cada muestra de sonido se puede distribuir bajo una licencia diferente, por lo tanto, es mejor familiarizarse con el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">acuerdo de licencia por</a> adelantado.  Por ejemplo, la licencia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">cero (cc0)</a> tiene el estado "Sin derechos de autor" y le permite copiar, modificar y distribuir, incluido el uso comercial, y le permite utilizar los datos de manera absolutamente legal. <br><br>  Para la conveniencia de encontrar elementos de informaci√≥n ac√∫stica en una variedad de freesound.org, los desarrolladores han proporcionado una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API</a> dise√±ada para analizar, buscar y descargar datos de los repositorios.  Para trabajar con √©l, debe obtener acceso, para esto debe ir al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">formulario</a> y completar todos los campos necesarios, despu√©s de lo cual se generar√° la clave individual. <br><br><img src="https://habrastorage.org/webt/jo/i3/qr/joi3qrdieypz8db5t8kgf0_xrfk.png"><br><br>  Los desarrolladores de Freesound.org proporcionan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">API</a> para varios lenguajes de programaci√≥n, lo que permite resolver el mismo problema con diferentes herramientas.  La lista de idiomas compatibles y enlaces para acceder a ellos en GitHub se enumeran a continuaci√≥n. <br><br><img src="https://habrastorage.org/webt/m4/mw/8b/m4mw8bp6d82x-oges-p0exzynwm.png"><br><br>  Para lograr el objetivo, se utiliz√≥ python, ya que este hermoso lenguaje de programaci√≥n de tipeo din√°mico gan√≥ popularidad debido a su facilidad de uso, borrando por completo el mito de la complejidad del desarrollo de software.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El m√≥dulo para trabajar con freesound.org</a> para python se puede clonar desde el repositorio github.com. <br><br>  A continuaci√≥n se muestra el c√≥digo de dos partes que demuestra la facilidad de uso de esta API.  La primera parte del c√≥digo del programa realiza la tarea de an√°lisis de datos, cuyo resultado es la densidad de distribuci√≥n de datos para cada clase solicitada, y la segunda parte carga datos de los repositorios de freesound.org para las clases seleccionadas.  La densidad de distribuci√≥n cuando se busca informaci√≥n ac√∫stica con las palabras clave <i>vidrio, motor, puerta</i> se presenta a continuaci√≥n en un gr√°fico circular como ejemplo. <br><br><img src="https://habrastorage.org/webt/uw/io/pm/uwiopmleer-snzvznuzchqsrnvc.png"><br><br>  C√≥digo de muestra de an√°lisis de datos de Freesound.org <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> plotly <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> plotly.graph_objs <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> go <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> freesound <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> termcolor <span class="hljs-comment"><span class="hljs-comment">#      def histogram(data, filename = "tmp_histogram.html"): data = [ go.Histogram( histfunc="count", x=data, name="count",textfont=dict(size=15) ), ] plotly.offline.plot({ "data": data, "layout": go.Layout(title="Histogram") }, auto_open=True, filename=filename) pass #      freesound.org def freesound_analysis(search_tokens, output, lim_page_count = 1, key = None): lim_page_count = int(lim_page_count) try: client = freesound.FreesoundClient() client.set_token(key,"token") print(termcolor.colored("Authorisation successful ", "green")) except: print(termcolor.colored("Authorisation failed ", "red")) classes = list() for token in search_tokens: try: results = client.text_search(query=token,fields="id,name,previews") output_catalog = os.path.normpath(output) if not os.path.exists(output_catalog): os.makedirs(output_catalog) page_count = int(0) while True: for sound in results: try: classes.append(token) info = "Data has been getter: " + str(sound.name) print(termcolor.colored(info, "green")) except: info = "Data has not been getter: " + str(sound.name) print(termcolor.colored(info, "red")) page_count += 1 if (not results.next) or (lim_page_count == page_count): page_count = 0 break results = results.next_page() except: print(termcolor.colored(" Search is failed ", "red")) histogram(classes) pass</span></span></code> </pre> <br>  C√≥digo de muestra para descargar datos de freesound.org <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   def freesound_download(search_tokens, output, lim_page_count = 1, key = None): lim_page_count = int(lim_page_count) #  .     try: client = freesound.FreesoundClient() client.set_token(key,"token") print(termcolor.colored("Authorisation successful ", "green")) except: print(termcolor.colored("Authorisation failed ", "red")) for token in search_tokens: try: results = client.text_search(query=token,fields="id,name,previews") output_catalog = os.path.normpath(output + "\\" + str(token)) if not os.path.exists(output_catalog): os.makedirs(output_catalog) page_count = int(0) while True: for sound in results: try: sound.retrieve_preview(output_catalog) info = "Saved file: " + str(output_catalog) + str(sound.name) print(termcolor.colored(info, "green")) except: info = str("Sound can`t be saved to " + str(output_catalog) + str(sound.name) ) print(termcolor.colored(info, "red")) page_count += 1 if not results.next or lim_page_count == page_count: page_count = 0 break results = results.next_page() except: print(termcolor.colored(" Search is failed ", "red"))</span></span></code> </pre><br>  Una caracter√≠stica de freesound es que el an√°lisis de datos de audio puede llevarse a cabo sin descargar un archivo de audio, lo que le permite obtener MFCC, energ√≠a espectral, centroide espectral y otros coeficientes.  Lea m√°s sobre informaci√≥n de bajo nivel en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n de freesound.ord</a> . <br><br>  Usando la API freesound.org, se minimiza el tiempo dedicado a buscar y descargar datos, lo que le permite ahorrar horas de trabajo estudiando otras fuentes de informaci√≥n, ya que los clasificadores ac√∫sticos de alta precisi√≥n requieren un gran conjunto de datos con gran variabilidad, que representa datos con diferentes arm√≥nicos en uno y la misma clase de eventos <br><br>  <b>YouTube-8M y AudioSet</b> <br><br><img src="https://habrastorage.org/webt/fx/pu/rn/fxpurngrhz_d2b2lvs31fuw0jei.png"><br><br>  Creo que youtube no es particularmente necesario en la presentaci√≥n, pero sin embargo, wikipedia nos dice que youtube es un sitio de alojamiento de video que brinda a los usuarios servicios de visualizaci√≥n de video, olvidando decir que youtube es una gran base de datos, y esta fuente debe usarse en el aprendizaje autom√°tico , y Google Inc nos proporciona un proyecto llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conjunto de datos YouTube-8M</a> . <br><br>  YouTube-8M Dataset es un conjunto de datos que incluye m√°s de un mill√≥n de archivos de video de YouTube en alta calidad, para brindar informaci√≥n m√°s precisa, a partir de mayo de 2018, hab√≠a 6.1 millones de videos con 3862 clases.  Este conjunto de datos est√° licenciado bajo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Creative Commons Attribution 4.0 International (CC BY 4.0)</a> .  Dicha licencia le permite copiar y distribuir material en cualquier medio y formato. <br><br>  Probablemente se pregunte: ¬øde d√≥nde provienen los datos de video cuando se necesita informaci√≥n ac√∫stica para la tarea?  El hecho es que Google proporciona no solo contenido de video, sino que tambi√©n asigna por separado un subproyecto con datos de audio llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AudioSet</a> . <br><br><img src="https://habrastorage.org/webt/fb/de/rh/fbderhx9gvzmjbdlqfbv5mt_hsq.png"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">AudioSet</a> : proporciona un conjunto de datos obtenido de videos de YouTube, donde se presentan muchos datos en una jerarqu√≠a de clases utilizando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un archivo de ontolog√≠a</a> , su representaci√≥n gr√°fica se encuentra a continuaci√≥n. <br><br><img src="https://habrastorage.org/webt/qw/11/r1/qw11r1lissfnhoo39wvvljheyo8.png"><br><br>  Este archivo le permite tener una idea de la anidaci√≥n de clases, as√≠ como el acceso a videos de youtube.  Para cargar datos desde el espacio de Internet, puede usar el m√≥dulo python - youtube-dl, que le permite descargar contenido de audio o video, seg√∫n la tarea requerida. <br><br>  AudioSet representa un grupo dividido en tres conjuntos: conjunto de datos de prueba, entrenamiento (balanceado) y entrenamiento (no balanceado). <br><br>  Miremos este grupo y analicemos cada uno de estos conjuntos por separado para tener una idea de las clases contenidas. <br><br>  <b>Entrenamiento (equilibrado)</b> <br><br>  Seg√∫n la documentaci√≥n, este conjunto de datos consta de <i>22,176 segmentos</i> obtenidos de varios videos seleccionados por palabras clave, lo que proporciona a cada clase al menos 59 copias.  Si observamos la densidad de distribuci√≥n de las clases ra√≠z en la jerarqu√≠a del conjunto, veremos que la clase M√∫sica es el grupo m√°s grande de archivos de audio. <br><br><img src="https://habrastorage.org/webt/ke/fa/2c/kefa2c6njxd2_iy-_vp1hj4wkmq.png"><br><br>  Las clases organizadas se descomponen en subconjuntos de clases, lo que le permite obtener informaci√≥n m√°s detallada al usarla.  Este conjunto de entrenamiento equilibrado tiene una densidad de distribuci√≥n en la que est√° claro que el equilibrio est√° presente, pero tambi√©n las clases individuales se distinguen mucho de la visi√≥n general. <br><br><img src="https://habrastorage.org/webt/er/zu/ba/erzuba4ghfkk9dlrsnrq7gfwlq8.png"><br><br>  La distribuci√≥n de clases cuyo n√∫mero de elementos excede el valor promedio <br><br><img src="https://habrastorage.org/webt/hm/62/-l/hm62-ltqt7_e93u21qfjinyazzy.png"><br><br>  La duraci√≥n promedio de cada uno de los archivos de audio es de 10 segundos, el diagrama de disco presenta informaci√≥n m√°s detallada, que muestra que la duraci√≥n de algunos archivos difiere del conjunto principal.  Este cuadro tambi√©n se presenta. <br><br><img src="https://habrastorage.org/webt/ow/t8/23/owt823euusbns9w2ipjebfjb1tg.png"><br><br>  Diagrama de uno y medio por ciento de duraci√≥n no promedio de un conjunto equilibrado de audioset <br><br><img src="https://habrastorage.org/webt/l2/4q/1n/l24q1nriwiyuec2qf7xaciwablg.png"><br><br>  <b>Entrenamiento (desequilibrado)</b> <br><br>  La ventaja de este conjunto de datos es su tama√±o.  Solo imagine que, seg√∫n la documentaci√≥n, este conjunto incluye 2.042.985 segmentos y, en comparaci√≥n con los conjuntos de datos equilibrados, representa una gran variabilidad, pero la entrop√≠a de este conjunto es mucho mayor. <br><br><img src="https://habrastorage.org/webt/1q/hh/q6/1qhhq6fqowmubsrjy9czj-n_w0u.png"><br><br>  En este conjunto, la duraci√≥n promedio de cada uno de los archivos de audio tambi√©n es igual a 10 segundos, el diagrama de disco para este conjunto de datos se presenta a continuaci√≥n. <br><br><img src="https://habrastorage.org/webt/yh/co/uu/yhcouua6nv6nryg5_qu5bzsrbo0.png"><br><br>  Gr√°fico de duraci√≥n no promedio de un conjunto desequilibrado de audioset <br><br><img src="https://habrastorage.org/webt/lc/ga/gw/lcgagwcbhncmnsxvjrvouvp0bvy.png"><br><br>  <b>Conjunto de prueba</b> <br><br>  Este conjunto es muy similar a un conjunto equilibrado con la ventaja de que los elementos de estos conjuntos no se cruzan.  Su distribuci√≥n se presenta a continuaci√≥n. <br><br><img src="https://habrastorage.org/webt/uz/ep/ek/uzepekdo_ccoh3fjevljpx7vdzg.png"><br><br>  La distribuci√≥n de clases cuyo n√∫mero de elementos excede el valor promedio <br><br><img src="https://habrastorage.org/webt/y1/6b/p0/y16bp0_grna51h4tgd9_500dht8.png"><br><br>  La duraci√≥n promedio de un segmento de este conjunto de datos tambi√©n es igual a 10 segundos <br><br><img src="https://habrastorage.org/webt/wg/i-/jv/wgi-jvqyphgyblijzahtwznpvvm.png"><br><br>  y el resto tiene la duraci√≥n que se muestra en el diagrama del disco <br><br><img src="https://habrastorage.org/webt/lp/z9/jz/lpz9jzkcsfevakvk5rp0lwoex-8.png"><br><br>  C√≥digo de ejemplo para analizar y descargar datos ac√∫sticos de acuerdo con el conjunto de datos seleccionado: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> plotly <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> plotly.graph_objs <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> go <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> collections <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Counter <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> termcolor <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> csv <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> json <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> youtube_dl <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> subprocess <span class="hljs-comment"><span class="hljs-comment">#      def histogram(data,hist_mean= True, filename = "tmp_histogram.html"): if hist_mean == True: cdata = Counter(data) mean_number_classes = np.asarray([cdata[x] for x in cdata]).mean() ldata = list() for name in cdata: if cdata[name] &gt; mean_number_classes: ldata += list(Counter({name:cdata[name]}).elements()) trace_mean_data = go.Histogram(histfunc="count", x=ldata, name="count" ) trace_data = go.Histogram(histfunc="count", x=data, name="count", text="" ) trace = [ trace_data, trace_mean_data] plotly.offline.plot({ "data": trace, "layout": go.Layout(title="stack") }, auto_open=True, filename=filename) pass #       def pie_chart(labels, values = None, filename = "tmp_pie_chart.html", textinfo = 'label+value'): if labels == None: raise Exception("Can not create pie chart, because labels is None") if values == None: data = Counter(labels) labels = list() values = list() for name in data: labels.append(name) values.append(data[name]) trace = go.Pie(labels=labels, values=values,textfont=dict(size=20),hoverinfo='label+percent', textinfo=textinfo, marker=dict(line=dict(color='#000000', width=2)) ) plotly.offline.plot([trace], filename='basic_pie_chart') pass #          def audioset_analysis(audioset_file, inputOntology): if not os.path.exists(inputOntology) or not os.path.exists(audioset_file): raise Exception("Can not found file") with open(audioset_file, 'r') as fe: csv_data = csv.reader(fe) sx = list() with open(inputOntology) as f: data = json.load(f) duration_hist = list() for row in csv_data: if row[0][0] == '#': continue classes = row[3:] try: color = "green" tmp_duration = str(float(row[2]) - float(row[1])) info = str("id: ") + str(row[0]) + str(" duration: ") + tmp_duration duration_hist.append(tmp_duration) for cl in classes: for dt in data: cl = str(cl).strip().replace('"',"") if cl == dt['id'] and len(dt['child_ids']) == 0: sx.append(dt['name']) info += str(" ")+str(dt['name']) + str(",") except: color = "red" info = "File has been pass: " + str(row[0]) continue print(termcolor.colored(info, color)) histogram(sx, filename="audioset_class") pie_chart(duration_hist, textinfo="percent + label", filename="audioset_duration")</span></span></code> </pre><br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   youtube def youtube_download(filepath, ytid): ydl_opts = { 'format': 'bestaudio/best', 'outtmpl': os.path.normpath(filepath), 'postprocessors': [{ 'key': 'FFmpegExtractAudio', 'preferredcodec': 'wav', 'preferredquality': '192', }], } with youtube_dl.YoutubeDL(ydl_opts) as ydl: ydl.download(['https://www.youtube.com/watch?v={}'.format(ytid)]) pass #    ffmpeg def cutOfPartFile(filename,outputFile, start, end, frequency = 44100): duration = float(end) - float(start) command = 'ffmpeg -i ' command += str(filename)+" " command += " -ar " + str(frequency) command += " -ss " + str(start) command += " -t " + str(duration) + " " command += str(outputFile) subprocess.call(command,shell=True) pass #    yotube        def audioset_converter(incatalog,outcatalog, token = "*.wav", frequency = 44100): find_template = os.path.join(incatalog,token) files = glob(find_template); for file in files: _,name = os.path.split(file) name = os.path.splitext(name)[0] duration = str(name).split("_")[1:3] filename = name.split("_")[0] +"."+ token.split(".")[1]; outfile = os.path.join(outcatalog,filename) cutOfPartFile(file,outfile,start=duration[0],end=duration[1]) #    audioset def audioset_download(audioset_file, outputDataset, frequency = 44100): t,h = os.path.split(audioset_file) h = h.split(".") outputDataset_full = os.path.join(outputDataset,str(h[0])+"_full") outputDataset = os.path.join(outputDataset,str(h[0])) if not os.path.exists(outputDataset): os.makedirs(outputDataset) if not os.path.exists(outputDataset_full): os.makedirs(outputDataset_full) with open(audioset_file, 'r') as fe: csv_data = csv.reader(fe) duration_hist = list() for row in csv_data: if row[0][0] == '#': continue try: color = "green" tmp_duration = str(float(row[2]) - float(row[1])) info = str("id: ") + str(row[0]) + str(" duration: ") + tmp_duration duration_hist.append(tmp_duration) save_full_file = str(outputDataset_full) + str("//")+ str(row[0]).lstrip()+str("_") +str(row[1]).lstrip() + str("_").lstrip() + str(row[2]).lstrip() + str('.%(ext)s') youtube_download(save_full_file,row[0]) except: color = "red" info = "File has been pass: " + str(row[0]) continue print(termcolor.colored(info, color)) audioset_converter(outputDataset_full,outputDataset, frequency = frequency)</span></span></code> </pre><br>  Para obtener informaci√≥n m√°s detallada sobre el an√°lisis de los datos del audioset, o para cargar estos datos desde el espacio del yotubo de acuerdo con el <a href="">archivo de ontolog√≠a</a> y el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conjunto</a> seleccionado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de audioset</a> , el c√≥digo del programa est√° disponible gratuitamente en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el repositorio de GitHub</a> . <br><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Urbansound</a></b> <br><br><img src="https://habrastorage.org/webt/sq/me/ww/sqmewwpsn82lf_w5mck-5w8q_ii.png"><br><br>  Urbansound es uno de los conjuntos de datos m√°s grandes con eventos de sonido etiquetados, cuyas clases pertenecen al entorno urbano.  Este conjunto se llama taxon√≥mico (categ√≥rico), es decir  cada clase se divide en sus subclases.  Tal multitud puede ser representada como un √°rbol. <br><br><img src="https://habrastorage.org/webt/tk/5l/jo/tk5ljok89na3nemguyn86yvtmtm.png"><br><br>  Para cargar datos de urbansound para su uso posterior, solo vaya a la p√°gina y haga clic en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">descargar</a> . <br><br>  Dado que la tarea no necesita usar todas las subclases, y solo se necesita una sola clase asociada con el autom√≥vil, primero es necesario filtrar las clases necesarias utilizando el meta archivo ubicado en la ra√≠z del directorio obtenido al descomprimir el archivo descargado. <br><br>  Despu√©s de descargar todos los datos necesarios de las fuentes enumeradas, result√≥ formar un conjunto de datos que contiene m√°s de 15,000 archivos.  Tal volumen de datos nos permite pasar a la tarea de entrenar el clasificador ac√∫stico, pero sigue habiendo un problema sin resolver con respecto a la "pureza" de los datos, es decir.  El conjunto de capacitaci√≥n incluye datos no relacionados con las clases necesarias del problema que se est√° resolviendo.  Por ejemplo, cuando escuchas archivos de la clase "romper cristales", puedes encontrar personas hablando de "c√≥mo no es bueno romper el vidrio".  Por lo tanto, nos enfrentamos a la tarea de filtrar datos y, como herramienta para resolver este tipo de problema, una herramienta es perfectamente adecuada, cuyo n√∫cleo fue desarrollado por muchachos bielorrusos y recibi√≥ el extra√±o nombre "Yandex.Toloka". <br><br>  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Yandex.Toloka</a></b> <br><br><img src="https://habrastorage.org/webt/k0/_1/1n/k0_11n7zzpfxckvcqdbqawyw25i.png"><br><br>  Yandex.Toloka es un proyecto de crowdfunding creado en 2014 para marcar o recopilar una gran cantidad de datos para su uso posterior en el aprendizaje autom√°tico.  De hecho, esta herramienta le permite recopilar, marcar y filtrar datos utilizando un recurso humano.  S√≠, este proyecto no solo le permite resolver problemas, sino que tambi√©n permite que otras personas ganen dinero.  La carga financiera en este caso recae sobre sus hombros, pero debido al hecho de que m√°s de 10,000 trabajadores act√∫an por parte de los artistas, los resultados del trabajo se recibir√°n en el futuro cercano.  Puede encontrar una buena descripci√≥n del funcionamiento de esta herramienta en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">blog de Yandex</a> . <br><br>  En general, el uso del enamoramiento no es particularmente dif√≠cil, ya que la publicaci√≥n de una tarea solo requiere el registro en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> , una cantidad m√≠nima de 10 d√≥lares estadounidenses y una tarea ejecutada correctamente.  C√≥mo formular correctamente una tarea, puede ver la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentaci√≥n de Yandex.Tolok</a> o no hay un mal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">art√≠culo sobre Habr</a> .  De mi parte a este art√≠culo, quiero agregar que incluso si falta una plantilla adecuada para el requisito de su tarea, su desarrollo no tomar√° m√°s de unas pocas horas de trabajo, con un descanso para tomar un caf√© y un cigarrillo, y los resultados de los artistas pueden obtenerse al final de la jornada laboral. <br><br>  <b>Conclusi√≥n</b> <br><br>  En el aprendizaje autom√°tico, al resolver el problema de clasificaci√≥n o regresi√≥n, una de las tareas principales es desarrollar un conjunto de datos confiable: un conjunto de datos.  En este art√≠culo, se consideraron fuentes de informaci√≥n con una gran cantidad de datos ac√∫sticos que permitieron formar y equilibrar el conjunto de datos necesarios para una tarea espec√≠fica.  El c√≥digo del programa presentado nos permite simplificar la operaci√≥n de carga de datos al m√≠nimo, reduciendo as√≠ el tiempo para recibir datos y gastar el resto en el desarrollo de un clasificador. <br><br>  En cuanto a mi tarea, despu√©s de recopilar datos de todas las fuentes presentadas en este art√≠culo y el posterior filtrado de los datos, logr√© formar el conjunto de datos necesario para entrenar el clasificador ac√∫stico, que se basa en una red neuronal.  Espero que este art√≠culo les permita a usted y a su equipo ahorrar tiempo y gastarlo en el desarrollo de nuevas tecnolog√≠as. <br><br>  <b>PS</b> Un m√≥dulo de software desarrollado en python, para an√°lisis y carga de datos ac√∫sticos para cada una de las fuentes presentadas, puede encontrarlo en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el repositorio de github</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es427397/">https://habr.com/ru/post/es427397/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es427387/index.html">Samsung anunci√≥ una pantalla de nueva generaci√≥n</a></li>
<li><a href="../es427389/index.html">Operaci√≥n Vk 2.0. Se ha presentado un proyecto de ley sobre agregadores de noticias. Yandex.News se cerrar√° si el servicio no cambia el propietario</a></li>
<li><a href="../es427391/index.html">Consejos para j√≥venes: construyendo buenos h√°bitos</a></li>
<li><a href="../es427393/index.html">An√°lisis de seguridad inal√°mbrica empresarial</a></li>
<li><a href="../es427395/index.html">"Vamos a explicar: o por qu√© deber√≠a ser un programador matem√°tico". Un libro sobre c√≥mo no perderse las clases de matem√°ticas.</a></li>
<li><a href="../es427399/index.html">Trabajar con datos al construir una API basada en GraphQL</a></li>
<li><a href="../es427401/index.html">Shaders de disoluci√≥n y exploraci√≥n mundial</a></li>
<li><a href="../es427403/index.html">ReportingObserver API: una mirada al c√≥digo de las p√°ginas web desde una nueva perspectiva</a></li>
<li><a href="../es427405/index.html">ES2018 - finalmente promete m√©todo</a></li>
<li><a href="../es427407/index.html">Meta-clustering con minimizaci√≥n de errores, y por qu√© creo que el cerebro funciona de esta manera</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>