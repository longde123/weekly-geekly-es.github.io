<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙇🏻 🗑️ 👏🏼 MPS 2019.2: types de données énumérés, personnalisation des messages d'erreur, transition vers JDK 11 et bien plus 👩🏿‍🤝‍👨🏼 🧗🏼 🎽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans MPS 2019.2, nous avons préparé pour vous de nombreuses nouvelles fonctionnalités dans divers sous-systèmes et corrigé un certain nombre d'erreurs...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>MPS 2019.2: types de données énumérés, personnalisation des messages d'erreur, transition vers JDK 11 et bien plus</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/JetBrains/blog/476806/">  Dans MPS 2019.2, nous avons préparé pour vous de nombreuses nouvelles fonctionnalités dans divers sous-systèmes et <a href="https://youtrack.jetbrains.com/releaseNotes/MPS%3Fq%3D%2523Resolved%2BFix%2Bversions%253A%2B%257B2019.2%2BEAP1%257D%252C%257B2019.2%2BEAP2%257D%2B%252C%257B2019.2%2BEAP3%257D%2B%252C%257B2019.2%2BEAP4%257D%252C%257B2019.2%2BFF%2B%2528EAP5%2529%257D%252C%257B2019.2%2BRC1%257D%26token%3D21ea606a-b9d8-4b04-a954-4878f463f276">corrigé un certain nombre d'erreurs</a> . <br><br><img src="https://habrastorage.org/webt/2a/0k/au/2a0kaurjxax_knjmbnelmksj3sq.png" alt="image"><br><br>  <a href="https://www.jetbrains.com/mps/download/">Télécharger MPS 2019.2</a> <br><br><h4>  Types de données énumérés </h4><br>  Une nouvelle façon de déclarer les types de données énumérés vous permet de définir une liste d'options sous forme compacte en spécifiant une valeur nommée pour chaque option.  Si nécessaire, vous pouvez configurer la façon dont certaines valeurs sont affichées ou sélectionner la valeur par défaut qui sera utilisée si la propriété n'a pas été explicitement définie sur une valeur. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/5m/mi/qo/5mmiqojhdjqode7ck9o1rwd72gw.png" alt="image"><br><br>  Nous avons également amélioré certains aspects du langage SModel concernant l'utilisation des propriétés des types énumérés.  Désormais, lors de la lecture et de l'écriture de propriétés, des instances typées de membres énumérés sont utilisées à la place des valeurs élémentaires initiales, ce qui aide les développeurs à écrire du code avec moins d'erreurs. <br><br><img src="https://habrastorage.org/webt/k9/-k/4h/k9-k4hykno5rjxj8fpnazwh3mqm.png" alt="image"><br><br>  De plus, nous avons repensé toutes les opérations effectuées avec des types énumérés. <br><br><img src="https://habrastorage.org/webt/pc/2e/ib/pc2eibha0ba1f0mxo-fqpx-uviy.png" alt="image"><br><br>  Une instruction Enum Switch a été ajoutée au langage SModel pour la sélection multiple de membres d'énumération.  Il peut également être utilisé comme expression pour calculer diverses valeurs selon le membre de l'énumération qui satisfait aux exigences. <br><br><img src="https://habrastorage.org/webt/jj/cm/tp/jjcmtpxwulxrz3xpyati0bc4wdk.png" alt="image"><br><br><h4>  Personnalisation des messages d'erreur </h4><br>  Depuis un certain temps maintenant, nous avons reçu des demandes pour implémenter la possibilité de configurer certains messages d'erreur dans MPS.  Suite à une demande d'un de nos clients commerciaux, nous avons pu donner à cette fonctionnalité la plus haute priorité.  Vous pouvez maintenant configurer tous les messages d'erreur liés à la vérification des contraintes.  Dans les versions futures, nous allons rendre ces options de personnalisation disponibles pour d'autres types d'erreurs. <br><br>  Dans cette version, nous avons ajouté un nouvel aspect du langage appelé feedback.  Cet aspect peut être utilisé pour personnaliser le texte des messages d'erreur liés à la vérification de la structure, des restrictions de propriété et de la portée. <br><br><img src="https://habrastorage.org/webt/cr/os/zr/croszrb1tfaxrl8qhpds3pfonyq.png" alt="image"><br><br>  Par exemple, ShowMessage définit le texte qui apparaît dans l'info-bulle qui apparaît lorsque vous survolez un nœud problématique. <br><br><img src="https://habrastorage.org/webt/cx/nm/e9/cxnme93zfvv6vrhyi7h9za9rpv8.png" alt="image"><br><br>  Remarque: vous pouvez définir vos commentaires en étendant l'ensemble de langues de commentaires fourni.  Par exemple, vous pouvez décrire les commentaires qui mettront en surbrillance les bords ou les sommets dans l'éditeur de graphique. <br><br>  Pour recevoir des messages d'erreur personnalisés pour les restrictions canBe *, utilisez le langage de restriction basé sur des règles. <br><br><img src="https://habrastorage.org/webt/6s/g6/fp/6sg6fpnmovgslmyds-r1ktwegn0.png" alt="image"><br><br><h4>  Langage de contrainte basé sur des règles </h4><br>  Nous avons créé un langage de restriction basé sur des règles qui remplacera à l'avenir la restriction canBe * actuellement disponible à partir du langage de restriction MPS standard.  Actuellement, le langage de contraintes basé sur des règles est une fonctionnalité expérimentale, il est donc susceptible de changer beaucoup dans les futures versions. <br><br><img src="https://habrastorage.org/webt/ex/r0/g1/exr0g1ecwwujwmlg6ert_nfsj0c.png" alt="image"><br><br>  Pour le moment, la version précédente des restrictions reste une priorité. Par conséquent, pour introduire des restrictions basées sur des règles, les anciennes restrictions canBe * doivent être complètement supprimées.  Le nouveau langage de définition des contraintes est plus déclaratif, il nécessite de spécifier un ensemble de contraintes isolées (règles) au lieu d'un seul bloc conditionnel. <br><br>  Dans la version 2019.2, cela vous permet de recevoir un message d'erreur individuel pour chaque règle individuellement. <br><br><img src="https://habrastorage.org/webt/jn/jv/la/jnjvlazvumgmssrknqbxhlrolly.png" alt="image"><br><br><h4>  Histoire racine </h4><br>  Il y a maintenant une nouvelle action dans le menu Git qui vous permet d'afficher l'historique des changements dans VCS pour une racine spécifique.  L'action est disponible dans le menu contextuel de l'éditeur: <br><br><img src="https://habrastorage.org/webt/bv/bb/gn/bvbbgnj5iuh_htel1l0lnszgzkw.png" alt="image"><br><br>  Notez que la collecte des données d'historique racine, comme toute autre action VCS liée à l'historique, prend du temps.  Il y a une barre de progression dans la barre d'état pour vous aider à évaluer le temps passé. <br><br>  La boîte de dialogue est similaire à la boîte de dialogue Historique de sélection dans IntelliJ IDEA: <br><br><img src="https://habrastorage.org/webt/m7/fp/hh/m7fphhyqifkgrybbpgiwawa4kw4.png" alt="image"><br><br>  Une boîte de dialogue affiche une liste des révisions du fichier modèle dans lequel la racine correspondante a été modifiée. <br><br><h4>  Recherche de données </h4><br>  Une recherche en texte intégral par valeur de propriété est désormais disponible.  L'action Édition–&gt; Rechercher–&gt; Rechercher le texte dans le projet (Ctrl + Alt + Maj + F) vous permet de rechercher des nœuds avec des propriétés dont les valeurs contiennent le texte spécifié. <br><br><img src="https://habrastorage.org/webt/hb/nu/cw/hbnucw_dkoimwd_5j98yfb2lvsw.png" alt="image"><br><br><h4>  Vérifier les erreurs spécifiques </h4><br>  Un cas d'utilisation courant pour l'écriture d'une langue de test est la vérification des nœuds pour les messages d'erreur et les avertissements.  Dans certains cas, le sous-système de test MPS n'a pas fait de distinction entre différents types d'erreurs affectant le même nœud.  Cela peut prêter à confusion: même si l'utilisateur a explicitement indiqué le type d'erreur attendu dans l'annotation de test, d'autres erreurs et avertissements affectant le nœud correspondant n'ont pas généré d'erreurs de test. <br><br>  Gardez à l'esprit que lors de la mise à niveau vers une nouvelle version, certains tests peuvent échouer, car ils ne suppriment désormais que les avertissements et les erreurs que l'utilisateur indique dans l'annotation de l'analyse. <br><br><img src="https://habrastorage.org/webt/je/ns/bd/jensbd7apn0fbjzcgdhpqqlip9s.png" alt="image"><br><br><h4>  Modèles dans les définitions des règles de validation </h4><br>  Si vous définissez une règle de validation pour un concept, elle sera appelée pour chaque nœud qui est une instance de ce concept. <br><br>  Maintenant, au lieu de remplacer chaque règle héritée du concept parent, vous pouvez spécifier explicitement une liste de règles qui doivent être redéfinies.  Nous vous recommandons fortement de revoir toutes vos règles de validation qui utilisent la fonction de remplacement et d'indiquer quelles règles doivent être redéfinies. <br><br>  Auparavant, vous pouviez définir une règle de validation pour un concept à l'aide d'un langage de modèle.  Cette fonctionnalité a permis de limiter les conditions d'applicabilité de la règle (par rapport aux règles définies exclusivement pour le concept), ainsi que de nommer facilement les propriétés, les enfants et les petits-enfants, etc.  Dans les deux cas, l'utilisation du langage de modèle à l'intérieur du corps de la règle convient, en particulier, l'utilisation de l'opérateur de correspondance en haut du bloc do: <br><br><img src="https://habrastorage.org/webt/rx/qv/-u/rxqv-ucvbjvtc2bq_1aarg9m6_4.png" alt="image"><br><br>  À l'avenir, nous ne prévoyons pas de prendre en charge les règles de validation avec des modèles dans les en-têtes, nous vous recommandons donc de rechercher ces cas et de déplacer les modèles vers le corps de la règle à l'aide d'une action spéciale. <br><br><h4>  Java 11 comme runtime </h4><br>  MPS s'exécutera désormais dans JDK 11. Cela affectera le mécanisme de chargement des modèles de stub.  La plupart de votre projet n'aura pas besoin d'être migré, sauf dans les rares cas où certaines classes et certains champs ont été reconditionnés dans JDK 11. <br><br>  Lorsque vous utilisez le plug-in pour IntelliJ IDEA, les modules avec MPS Facet doivent maintenant être associés à JDK version 11. Sinon, la génération de code échouera. <br><br><h4>  Type Facade API Facade </h4><br>  Désormais, la vérification de type ne peut être effectuée qu'avec la nouvelle API de façade. <br><br>  <b>Nouvelle API:</b> voir jetbrains.mps.typechecking.TypecheckingFacade et classes connexes. <br><br>  <b>API</b> obsolète <b>:</b> jetbrains.mps.typesystem. * La hiérarchie des packages est désormais obsolète.  L'utilisation de classes de cette hiérarchie n'est pas recommandée, à l'exception du code généré automatiquement à partir du contenu de l'aspect du système de types. <br><br><h4>  Modifications prévues dans les versions futures </h4><br>  Voici un aperçu préliminaire des modifications affectant la prise en charge du système de type: <br><br><ul><li>  L'aspect responsable de la mise en œuvre du système de types et du langage utilisé dans celui-ci sera déprécié.  Au fil du temps, la langue et son support dans le runtime seront déplacés vers un plugin séparé. </li><li>  Un nouvel aspect sera ajouté qui remplacera efficacement la partie système non type de l'aspect système système.  La migration sera fournie pour extraire les règles de validation de l'ancien aspect du système de types. </li><li>  Un nouveau cadre de vérification de type sera mis en œuvre avec le support du runtime, à la suite de quoi les mécanismes obsolètes seront réécrits à partir de zéro. </li></ul><br><h4>  Assemblage en arrière-plan </h4><br>  Nous avons augmenté la réactivité de l'interface lors de la génération en arrière-plan.  Si le processus de génération a été envoyé en arrière-plan une fois, il sera toujours exécuté en arrière-plan lors des exécutions suivantes.  L'action est enregistrée dans le menu Préférences-&gt; Paramètres du projet-&gt; Effectuer en arrière-plan. <br><br><h4>  Langue de base </h4><br>  L'un des principaux objectifs de cette version était d'améliorer BaseLanguage.  Nous avons corrigé un certain nombre de problèmes affectant les langues BaseLanguage, des bogues aux problèmes affectant la convivialité. <br><br><h4>  Vérification orthographique dans les commentaires BL </h4><br>  La vérification orthographique est désormais disponible pour les commentaires sur une seule ligne, le texte Javadoc et les littéraux de chaîne. <br><br><h4>  Nouvel exemple de projet </h4><br>  Nous avons pris en compte les souhaits de la communauté et ajouté un nouvel exemple de projet avec génération XML. <br><br><h4>  Configuration locale de Git </h4><br>  Maintenant, les paramètres du pilote de fusion ne sont pas globaux, mais locaux (séparés pour chaque référentiel Git), de sorte que chaque copie installée de MPS peut avoir son propre pilote de fusion. <br><br>  Vous pouvez télécharger cette version <a href="https://www.jetbrains.com/mps/download/">ici</a> , nous espérons qu'elle vous plaira.  Veuillez nous signaler tout problème dans <a href="https://youtrack.jetbrains.com/issues/MPS">notre tracker</a> . <br><br>  <i>Votre équipe JetBrains MPS</i> <i><br></i>  <i>La volonté de se développer</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr476806/">https://habr.com/ru/post/fr476806/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr476786/index.html">Certification des systèmes d'enregistrement photo / vidéo des infractions et des systèmes du segment de la sécurité des transports</a></li>
<li><a href="../fr476788/index.html">Pourquoi l'impression 3D changera le monde?</a></li>
<li><a href="../fr476792/index.html">Swift.assert - la vie après la libération</a></li>
<li><a href="../fr476796/index.html">Réflexions sur le corps parfait</a></li>
<li><a href="../fr476798/index.html">Nous étudions l'assemblage de la puce RAM sur l'exemple de Hynix GDDR3 SDRAM</a></li>
<li><a href="../fr476812/index.html">Notes sur tout. Alimentations simples et dangereuses</a></li>
<li><a href="../fr476816/index.html">Dubai Mall dans un smartphone, ou comment ajouter un plan d'étage d'un bâtiment à votre application</a></li>
<li><a href="../fr476824/index.html">McKinsey: repenser l'architecture logicielle et électronique de l'automobile</a></li>
<li><a href="../fr476826/index.html">Expériences multiples: théorie et pratique</a></li>
<li><a href="../fr476828/index.html">Opération "Migration": comment se passe le cloud DataLine</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>