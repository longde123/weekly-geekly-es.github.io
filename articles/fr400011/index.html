<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>♂️ 🤜🏻 👵🏿 Raspberry Prog vs Bricks Internet, ou Raspberry Pi avec graphiques microSD en lecture seule 📒 💇🏼 💇</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lancement du Raspberry Pi avec prise en charge graphique complète sur microSD, restant pour toujours en mode lecture seule après l'installation du sys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Raspberry Prog vs Bricks Internet, ou Raspberry Pi avec graphiques microSD en lecture seule</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400011/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancement du Raspberry Pi avec prise en charge graphique complète sur microSD, restant pour toujours en mode lecture seule après l'installation du système. </font><font style="vertical-align: inherit;">L'absence d'enregistrement de données sur la mémoire flash augmente la fiabilité de l'appareil, le rapprochant de la classe industrielle des produits. </font><font style="vertical-align: inherit;">Instructions étape par étape. </font><font style="vertical-align: inherit;">Un petit théâtre d'ingénierie absurde pour divertir le public.</font></font></blockquote><br>
<br>
<img width="300" height="286" align="left" src="https://habrastorage.org/files/3fe/926/297/3fe9262971804740b78796c19094cd31.jpg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'avais besoin d'un périphérique réseau open source avec sortie HDMI, et j'ai décidé d'essayer Raspberry Prog. Oui, c'est exactement ce que je suggère de traduire </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prog</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Bien sûr, même un payeur unique a besoin d'un système d'exploitation. Et donc, je vais sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site officiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en espérant y trouver un guide détaillé sur la création d'une </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">boîte clé en main</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dure et indestructible </font><font style="vertical-align: inherit;">. Mais les gens, comme si rien ne s'était passé, installent Ubuntu (c'est-à-dire Raspbian Jessie) directement sur microSD, en y plaçant également le swap. Comme un bureau ordinaire, face à la paume.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais ensuite les fleurs. </font><font style="vertical-align: inherit;">Les baies de framboise sont des projets de cadres photo de MalinProg qui nécessitent un arrêt obligatoire avec un bouton. </font><font style="vertical-align: inherit;">Sinon, le cadre photo après une panne de courant peut ne pas fonctionner, au lieu des images proposant d'utiliser fsck. </font><font style="vertical-align: inherit;">Mais ce n'est pas la limite, sous le chat du lecteur, se trouve un véritable chef-d'œuvre d'ingénierie absurde, trouvé par l'auteur dans l'immensité du réseau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, selon les instructions standard, un lecteur à carte unique normal se transforme en un bureau gonflé avec une durée de vie moyenne d'un an et demi, jusqu'à ce qu'un lecteur flash usé meure, transformant un appareil généralement bon en brique. </font><font style="vertical-align: inherit;">Et la plupart des gens semblent être d'accord avec ça. </font><font style="vertical-align: inherit;">Je ne le suis pas.</font></font><a name="habracut"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Où le monde se dirige</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant d'ouvrir le becquet, portez un masque de protection ou saisissez votre tête à l'avance avec vos mains. </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un bon projet qui a ruiné une recommandation</font></font></b><div class="spoiler_text">      -   RPi,      (!)   . ,    Raspbian -   720   . ,   12     ,    ,   «» USB-  4 .   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">   RPi</a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ECIO28P</a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a> .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, je ne nierai pas l'utilité indépendante du rouser matériel: c'est un vrai hack pour ceux qui paient un tarif horaire pour s'asseoir devant le moniteur. </font><font style="vertical-align: inherit;">Ou pour maintenir le ton de certains </font><font style="vertical-align: inherit;">terminaux industriels </font><font style="vertical-align: inherit;">particulièrement </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stupides et</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> durs, sous l'armure anti-vandalisme dont un connecteur de souris sort (pour PS / 2, un adaptateur vert devrait convenir). </font><font style="vertical-align: inherit;">Oui, si vous pressez un bureau gonflé dans un ordinateur à carte unique, alors entre les mains des über-artisans, c'est une arme formidable, en particulier avec la carte MK qui sort brutalement du connecteur. </font><font style="vertical-align: inherit;">C'est immédiatement évident: une personne sait travailler avec ses mains. </font><font style="vertical-align: inherit;">Mais si vous avez besoin d'un écran toujours allumé, sous Linux il y a assez de tête, les résidents de cette ressource en sont bien conscients. </font><font style="vertical-align: inherit;">Pour les invités du portail, je donne toujours des instructions, on ne sait jamais quoi.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désactiver DPMS, économiseur d'écran et en même temps tous les éléments de l'interface graphique</font></font></b><div class="spoiler_text">  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">LightDM</a>,   X- <abbr title="Display Power Management Signaling">DPMS</abbr>   <code><nobr>/etc/lightdm/lightdm.conf</nobr></code>:<br>
<pre><code class="plaintext">...
xserver-command=X -s 0 -dpms -nocursor
...</code></pre><br>
 <code>-nocursor</code>        .            <code><nobr>~/.config/lxsession/LXDE/autostart</nobr></code>.    ,    <code>cron(8)</code>   718   <code><nobr>xscreensaver-command -deactivate</nobr></code> (  ,   ;-)</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est exactement ce que j'ai fait: j'ai accepté LightDM avec saisie automatique, mais je n'ai laissé dans le fichier </font></font><code><nobr>~/.config/lxsession/LXDE/autostart</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'un appel à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">feh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec le préfixe '@' pour redémarrer en cas d'accident et resp. paramètres. C'est-à-dire comme des graphiques normaux, mais sans </font></font><code>lxpanel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sans </font></font><code>pcmanfm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sans </font></font><code>xscreensaver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, avec DPMS désactivé et le curseur caché d'une souris inexistante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est très facile d'obtenir un minimum de graphiques en commandant </font></font><code><nobr>apt-get</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et en éditant le fichier </font></font><code>autostart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et le système aura tout le nécessaire pour la vie des applications standard, y compris le serveur X, le gestionnaire de fenêtres, le gestionnaire de sessions et le gestionnaire d'affichage avec connexion automatique de l'utilisateur. Mais jusqu'à présent, ce n'est pas une chose, mais juste un bureau à carte unique.</font></font><br>
<br>
<blockquote><b>UPD</b><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Jaromir</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">unclutter</a>   ,    .    ,       .<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Spider55</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">LightDM</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">noDM</a>.   ,      .</blockquote><br>
<h4></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plaque simple sphérique dans le vide - c'est ennuyeux. Pas pour ça sur Raspberry Prog un peigne entier de GPIO avec I2C / PWM, ainsi que toutes sortes de CSI-DSI et un chien de garde. Mais comme exemple pratique, j'utilise toujours un démonstrateur réseau avec une sortie HDMI, ajoutant la possibilité pour plusieurs utilisateurs de «capturer» un panneau d'écran commun et de diffuser leur bureau dessus sans se lever d'une chaise. L'écran est tourné pour faire face aux invités, au repos, trier tranquillement et aléatoirement les photos publiées sur le réseau. Si vous devez montrer un produit à un invité, l'un des administrateurs assis au comptoir transforme temporairement le tableau de bord en un «miroir» de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moniteur, mais le libère ensuite pour un autre administrateur. </font><font style="vertical-align: inherit;">Dans mon cas, il s'agit d'un véritable outil commercial suspendu dans un véritable parquet. </font><font style="vertical-align: inherit;">Au fait, merci à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauron</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour son </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, en considérant la taille de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> publication, j'ai décidé de reporter la description de la solution appliquée (c'est-à-dire le module vidéo lui-même) à un article séparé. </font><font style="vertical-align: inherit;">Pour l'instant, permettez-moi de me concentrer sur la tâche initiale: obtenir le Raspberry Pi pour démarrer et travailler avec microSD en mode lecture seule, sans crainte de panne de courant et sans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vider</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la mémoire flash avec des ordures.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Théorie des questions</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Même un système de fichiers journaux très sérieux ne peut finalement pas contrôler les processus qui se produisent à l'intérieur du support SD lorsque l'alimentation est coupée. Par exemple, les SSD sérieux utilisés dans les centres de données ont des condensateurs, dont la décharge est juste suffisante pour fermer la dernière transaction d'écriture, et il en reste encore un peu plus. Qu'en est-il de la mise hors tension en microSD? Je suis sûr qu'il n'y a pas assez de condensateurs là-bas, mais il y a une probabilité non nulle que l'enregistrement de la page de mémoire NAND ne se termine pas. Et puis le pilote du système de fichiers de la lecture deviendra tellement déroutant qu'une intervention manuelle de l'opérateur sera nécessaire. Ici, vous avez un cadre photo avec fsck.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À quel point est-il difficile de transférer le microSD Raspberry Pi en mode lecture seule par Michel-Ange, c'est-à-dire supprimer les services et packages inutiles? Assez simple s'il n'y a pas de graphisme ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Mais il est nécessaire de commencer dans les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec ces gestionnaires dans toute leur nombre, il commence un combat long et fastidieux avec des </font><font style="vertical-align: inherit;">résultats imprévisibles. Ce n'est pas une aiguille dans une botte de foin, vous pouvez même la retirer avec un aimant. Imaginez qu'un </font><font style="vertical-align: inherit;">nombre </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inconnu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d'aiguilles soient cachées dans une boule de fil de fer barbelé, et même abondamment saupoudrées de clous. Quelle recherche d'aiguilles est là, pour ne pas être tué à mort. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lemme:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour exécuter même la nouvelle fonction la plus élémentaire, le système Linux tirera toujours un tas de dépendances inutiles, et même avec des graphiques «légers», la croissance de l'entropie du système est multiple. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Théorème:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans tout ensemble fini de logiciels, il y a toujours un morceau de code infinitésimal qui essaiera d'écrire un bit infiniment inutile dans un système de fichiers en lecture seule, ce qui entraînera une erreur fatale, ruinera le système entier et barrera les nombreuses heures d'efforts de l'opérateur.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution: UnionFS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a quelques années, un Allemand a trouvé une très belle façon de collecter toutes ces aiguilles dans une auge en utilisant UnionFS et de les brûler dans le four à chaque redémarrage. Malheureusement, le message d'origine est déjà mort avec le domaine qui l'a hébergé, mais l'allemand n'est certainement pas seul. Les lecteurs reconnaissants </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ont conservé l'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> idée, je considère qu'il est simplement nécessaire de la publier ici. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essentiel est qu'au-dessus du «support» permanent (système de fichiers en lecture seule sur microSD), chaque fois que vous l'allumez, un «patch» temporaire est créé dans la RAM, qui absorbe toute l'entropie inutile et «brûle» lorsque l'alimentation de l'appareil est coupée. Le système de fichiers sur microSD reste en lecture seule tout le temps, et donc le risque de dommages est réduit à presque zéro, tout comme le risque d'usure prématurée du lecteur flash.</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi pas strictement à zéro? Les connaisseurs d'EXT4, corrigez-moi, mais le pilote du système de fichiers écrit toujours quelque chose sur le support chaque fois que le système de fichiers est monté-démonté, même s'il est monté en lecture seule. Et cela </font></font><code>noatime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'aide pas, vous avez besoin d'une clé matérielle sur microSD. Sinon, comment puis-je expliquer le fait que </font></font><code>/sys/block/mmcblk0/stat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j'ai lu 282612 secteurs et </font><font style="vertical-align: inherit;">que </font><font style="vertical-align: inherit;">j'en ai déjà enregistré 96, et ceci en mode lecture seule? Eh bien, même si le rapport est proche de 3000: 1, sur un </font><font style="vertical-align: inherit;">système </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , il est de 5: 1.</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (coupable, menti, mais cela ne change pas l'essence)</font></font><br>
<br>
<blockquote><b>UPD:</b><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">gattopazzo83</a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Flash Media Kit</a>    - (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>).    100,000  ,   SLC-   microSD.         read-only,          ,   <i></i> («» -  «» ;-)</blockquote><br>
<br>
<blockquote><b>UPD:</b><br>
          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">doga</a>,     «»          SD-     RPi.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">doga</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">   </a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">mmc-utils</a>,     SD-,     Raspbian   . -   , , ,    .<br>
<div class="spoiler"><b class="spoiler_title">SD-</b><div class="spoiler_text">:<pre><code class="bash">udevadm info -a -n /dev/mmcblk0</code></pre><br>
  «»  <code>CID</code>  <code>CSD</code>,     (<code>name</code>),   (<code>serial</code>),   (<code>date</code>),   (<code>hwrev, fwrev, oemid, manfid</code>).      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.sdcard.org</a>    «»  (Simplified Specifications), . Part 1 Simplified, Physical Layer Simplified Specification.<br>
   <code>stat</code>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">kernel.org</a>.     ,           .<br>
  -  ,        <a href="" rel="nofollow">lsmmc.c</a>.<br>
«  »       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">RPi SD cards</a>   Embedded Linux,    .<br>
  —   —   ,   mmc-utils ,      .</div></div></blockquote><br>
<br>
<h4></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels sont les inconvénients outre la «gravure» des journaux? </font><font style="vertical-align: inherit;">Les appareils sans horloge matérielle au démarrage pensent toujours que c'est dans la cour le 1er janvier 1970 et sont dans cette idée fausse jusqu'à augmenter la pile réseau et la disponibilité de NTP. </font><font style="vertical-align: inherit;">Par conséquent, au moment de cette publication, toute une série de «correctifs» d'objets de fichiers auront environ 46 ans de moins qu'ils ne le pensent. </font><font style="vertical-align: inherit;">En revanche, à quelques secondes du début de l'ère n'est plus zéro.</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> horloge en temps réel L' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
utilisateur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st1373</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans les commentaires a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rappelé</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la disponibilité de l'horloge en temps réel compatible I2C DS3231 (coûtant environ un rouleau et demi de papier toilette). </font><font style="vertical-align: inherit;">Il y a une instruction simple en russe: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecter RTC (horloge en temps réel) au Raspberry Pi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La sécurité</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est plutôt gênant d’installer des mises à jour de sécurité sur un tel système. Mais, encore une fois, pirater une telle chose est un peu plus compliqué que d'exploiter la vulnérabilité d'Adobe Flash dans un navigateur de bureau classique. Un code malveillant doit ouvrir le système de fichiers pour l'écriture afin de s'y implanter, sinon il "brûlera" au redémarrage avec les journaux et les ordures. SquashFS mentionné ci-dessous complique encore plus les changements. Cependant, tous ces avantages sont valables jusqu'au moment où la majeure partie du code à écrire est «fermée» dans les zones en lecture seule, c'est-à-dire lorsque le «substrat» protégé ne fait pas d'appels à des commandes situées dans les zones enregistrées: c'est exactement quel (sera-t-il?) le vecteur d'infection prioritaire sur l'Internet des objets. Soyez prudent avec les scripts de démarrage, ils sont exécutés en tant que root,un mauvais mouvement - et il s'agit d'une vulnérabilité critique de l'infrastructure du foyer, constamment connectée à Internet.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instructions étape par étape</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis que j'ai installé Rasbian Jessie pour la première fois de ma vie et surtout que je ne crois pas à la durabilité de la microSD, même en lecture seule, j'ai décidé de noter toutes les étapes en détail. </font><font style="vertical-align: inherit;">Tout à coup, vous devez répéter.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVIS DE NON-RESPONSABILITÉ</font></font></h5><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Désolé pour les sauts de ligne. </font><font style="vertical-align: inherit;">Toutes les commandes sont exécutées avec des autorisations </font></font><code>root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais un bon lecteur peut l'utiliser à chaque fois </font></font><code>sudo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Honnêtement, je ne comprends pas pourquoi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaque commande doit être</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> exécutée </font></font><code>sudo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme si elle protégeait contre quelque chose. </font><font style="vertical-align: inherit;">Dites-moi, à quand remonte la dernière fois * vous n'étiez * pas sûr de vouloir supprimer ce fichier dans la corbeille? </font><font style="vertical-align: inherit;">C'est comme boire cinq verres de bière d'un demi-litre, mais versez 0,33 sur la piste, s'il vous plaît, mais je suis déjà assez ... Je vais donner le mauvais conseil: si vous avez pris ces jouets, sortez en </font></font><code>root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">équipe </font></font><code>sudo bash</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et ne vous trompez pas.</font></font><br>
</blockquote><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Initialisation</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez Raspbian Jessie Lite. </font><font style="vertical-align: inherit;">Utilisez l'utilitaire pour </font></font><code>raspi-config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">définir les paramètres régionaux et le mot de passe utilisateur </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Connectez le réseau, Debian est un enfant du haut débit. </font><font style="vertical-align: inherit;">N'incluez pas encore le chargement dans les graphiques.</font></font><br>
<br>
<pre><code class="bash">apt-key update<font></font>
apt-get update</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Ajouter ou supprimer des programmes</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec graphiques, installation:</font></font><br>
<br>
<pre><code class="bash">apt-get install --no-install-recommends tightvncserver xtightvncviewer xserver-xorg xinit lxde-core lxappearance lightdm feh xprintidle policykit-1 busybox-syslogd ntpdate watchdog unionfs-fuse</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enlèvement:</font></font><br>
<br>
<pre><code class="bash">dpkg --purge rsyslog<font></font>
apt-get remove --purge wolfram-engine triggerhappy cron anacron logrotate dphys-swapfile fake-hwclock<font></font>
apt-get autoremove --purge</code></pre><br>
<br><font style="vertical-align: inherit;"></font><code>tightvncserver, xtightvncviewer, xprintidle  feh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'avais besoin des </font><font style="vertical-align: inherit;">
packages </font><font style="vertical-align: inherit;">pour une tâche particulière, vous pouvez vous en passer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si aucun graphique, vous ne * pas * besoin de: </font></font><code>xserver-xorg xinit lxde-core lxappearance lightdm policykit-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Création d'un environnement graphique</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, l'utilitaire </font></font><code>raspi-config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut activer l'exécution automatique en mode graphique avec connexion automatique, qui sera avec des droits d'utilisateur </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Que de se raccrocher </font></font><code>sudo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, il vaut mieux mettre un mot de passe fort pour l'utilisateur </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et ne pas utiliser </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour entrer automatiquement dans l'interface graphique. Au lieu de cela, créez un utilisateur </font></font><code>pu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et exécutez "X" avec ses droits. De plus, le shell (shell par défaut) de cet utilisateur est préférable de le désactiver complètement (en le définissant </font></font><code><nobr>/usr/sbin/nologin</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ou de le remplacer par un script de type spécial </font></font><code>/usr/local/bin/pu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. J'ai l'intention d'en parler dans une autre publication consacrée aux panneaux vidéo avec télécommande via SSH, pour laquelle un compte séparé avec des droits réduits est créé. Merci encore à </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauron </font></font></a> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et al</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash">adduser --home /home/pu --shell /usr/local/bin/pu --uid 990 --gecos "RPi p-u" --gid 1000 pu<font></font>
mkdir -p /home/pu/.config/lxsession/LXDE<font></font>
cp -p /etc/xdg/lxsession/LXDE/desktop.conf /home/pu/.config/lxsession/LXDE/desktop.conf<font></font>
touch /home/pu/.config/lxsession/LXDE/autostart<font></font>
chown -R pu:pi /home/pu<font></font>
sed -i 's/^#\?xserver-command=.*$/xserver-command=X -s 0 -dpms -nocursor/' /etc/lightdm/lightdm.conf<font></font>
sed -i 's/^#\?autologin-user=.*$/autologin-user=pu/' /etc/lightdm/lightdm.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu des deux dernières commandes, vous pouvez l'ouvrir avec l'éditeur </font></font><code><nobr>/etc/lightdm/lightdm.conf</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et définir les valeurs de deux paramètres, le premier que j'ai mentionné ci-dessus, le second parle de lui-même:</font></font><br>
<br>
<pre><code class="plaintext">...<font></font>
xserver-command=X -s 0 -dpms -nocursor<font></font>
...<font></font>
autologin-user=pu<font></font>
...</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Minuteur de surveillance (facultatif)</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai un Raspberry Pi 3 Model B, donc le module de surveillance du noyau est appelé comme ceci:</font></font><br>
<br>
<pre><code class="bash">modprobe bcm2835_wdt<font></font>
echo "bcm2835_wdt " | sudo tee -a /etc/modules</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez ensuite la ligne suivante à la section </font></font><code>[Install]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">à la fin du fichier </font></font><code><nobr>/lib/systemd/system/watchdog.service</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext">[Install]<font></font>
WantedBy=multi-user.target</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Après cela, activez le service:</font></font><br>
<br>
<pre><code class="bash">systemctl enable watchdog.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le temporisateur du chien de garde dans la configuration minimale devrait fonctionner si le noyau se fige. </font><font style="vertical-align: inherit;">Mais il existe de nombreuses autres options, par exemple, pour une charge excessive sur le système, pour l'expiration de la mémoire, pour une surchauffe du système, pour l'absence d'un fichier de signal, etc. </font><font style="vertical-align: inherit;">Voir. En </font><font style="vertical-align: inherit;">outre </font></font><code>watchdog(8)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et</font></font><code>watchdog.conf(5)</code><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Paramètres de démarrage</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai désactivé l'affichage du logo de framboise et du fichier d'échange, activé le chargement rapide. </font><font style="vertical-align: inherit;">Pour ce faire, j'ai ajouté en </font></font><code><nobr>/boot/cmdline.txt</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seulement trois mots </font></font><code>logo.nologo fastboot noswap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Je me suis retrouvé avec ceci:</font></font><br>
<br>
<pre><code class="plaintext">logo.nologo dwc_otg.lpm_enable=0 console=serial0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait fastboot noswap</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Sceller le système de fichiers racine du Raspberry Pi en lecture seule</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous sommes enfin arrivés à l'essentiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous trouverez ci-dessous un script qui devrait être placé sous un nom </font></font><code>mount_unionfs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quelque part </font></font><code><nobr>/usr/local/bin</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">N'oubliez pas d'activer les bits de faisabilité + x ( </font></font><code>chmod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">755 ou 555). </font><font style="vertical-align: inherit;">Faites attention aux suffixes </font></font><code>.orig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>.rw</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ils doivent coïncider avec la préparation (plus loin):</font></font><br>
<br>
<pre><code class="bash">#!/bin/sh<font></font>
DIR=$1<font></font>
ROOT_MOUNT=$(awk '$2=="/" {print substr($4,1,2)}' &lt; /etc/fstab)<font></font>
if [ $ROOT_MOUNT = "rw" ]; then<font></font>
	/bin/mount --bind ${DIR}.orig ${DIR}<font></font>
else<font></font>
	/bin/mount -t tmpfs ramdisk ${DIR}.rw<font></font>
	/usr/bin/unionfs-fuse -o cow,allow_other,suid,dev,nonempty ${DIR}.rw=RW:${DIR}.orig=RO ${DIR}<font></font>
fi</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
À partir d'autres instructions, j'ai décidé de suivre les conseils et de faire ce qui suit:</font></font><br>
<br>
<pre><code class="bash">insserv -r bootlogs<font></font>
insserv -r alsa-utils<font></font>
<font></font>
rm -rf /var/lib/dhcp/<font></font>
ln -s /tmp /var/lib/dhcp</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les applications graphiques sont très friandes d'écrire </font></font><code>/home</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quelque chose d'inutile, donc en plus </font></font><code>/etc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>/var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j'ai également inclus </font></font><code>/home</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nous allons préparer les sections pour passer en mode UnionFS (attention aux suffixes </font></font><code>.orig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>.rw</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="bash"><font></font>
cp -al /etc /etc.orig<font></font>
mv /var /var.orig<font></font>
mv /home /home.orig<font></font>
mkdir /etc.rw /var /var.rw /home /home.rw</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin fichier </font></font><code>fstab(5)</code><br>
<br>
<pre><code class="plaintext">proc            /proc           proc    defaults        0       0<font></font>
/dev/mmcblk0p1  /boot           vfat    ro              0       2<font></font>
/dev/mmcblk0p2  /               ext4    ro              0       1<font></font>
mount_unionfs   /etc            fuse    defaults        0       0<font></font>
mount_unionfs   /var            fuse    defaults        0       0<font></font>
mount_unionfs   /home           fuse    defaults        0       0<font></font>
none            /tmp            tmpfs   defaults        0       0</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Audit et test du système</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetez un œil au système, nettoyez </font></font><code>.bash_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toutes sortes de fichiers journaux, etc. </font><font style="vertical-align: inherit;">Veuillez noter qu'ils peuvent ne pas être situés là où ils se trouvent habituellement (par exemple, </font></font><code><nobr>/var.orig</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">au lieu de </font></font><code>var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Redémarrez le système et voyez ce qui s'est passé. </font><font style="vertical-align: inherit;">Si une erreur a été commise, il y a de fortes chances que le système quitte en tant </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'utilisateur unique</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et démarre simplement la console </font></font><code>root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si le système de fichiers est intact, le remontage de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lecture seule</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> à </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lecture-écriture est</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> assez simple:</font></font><br>
<br>
<pre><code class="bash">mount -o rw,remount /</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le système a démarré normalement en lecture seule et exécute toutes les fonctions, félicitations! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci est né la chose Internet.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Impression d'un système de fichiers</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous devez imprimer le système, remettez d'abord le système cheval en état de lecture-écriture (voir ci-dessus). </font><font style="vertical-align: inherit;">Ensuite, commentez les </font></font><code>fstab(5)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lignes commençant par le mot </font></font><code>mount_unionfs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, après quoi * assurez-vous * de retourner à la place le répertoire </font></font><code><nobr>/var.orig</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec tout le contenu (et de préférence </font></font><code><nobr>/home.orig</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aussi). </font><font style="vertical-align: inherit;">Si vous ne le restaurez pas </font></font><code>/var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vous perdrez la base de données des packages installés, mais c'est pour installer des mises à jour de sécurité avec l'équipe que </font></font><code>apt-get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous venez d'imprimer le système, non? </font><font style="vertical-align: inherit;">Avant de </font></font><code>apt-get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">redémarrer le système et assurez-vous qu'il est adéquat. </font><font style="vertical-align: inherit;">Comment sceller en arrière, vous savez;)</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternatives</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chers lecteurs qui connaissent des images industrielles prêtes à l'emploi de systèmes d'exploitation (avec prise en charge en lecture seule) pour Raspberry Pi et d'autres ordinateurs à carte unique, je vous invite à partager les commentaires. J'espère qu'avec votre aide, je serai en mesure d'enrichir cette section avec des informations d'autres lecteurs, résidents et invités du portail respecté :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quant aux alternatives matérielles au Raspberry Prog lui-même dans le contexte de l'application (réseau HDMI whistle), je suis tombé accidentellement sur un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui cependant, il peut être discuté séparément. Purement économique, le Raspberry Pi est très rentable, jusqu'à présent l'essentiel :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, allons-y.</font></font><br>
<br>
<blockquote><b>UPD:</b> OverlayFS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ValdikSS</a>   OverlayFS,     Linux  2014,     ,   <code>initramfs</code>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">art_gl</a>     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Raspbian with Read-only Root</a>.<br>
,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Domoticz</a>,         , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a> OverlayFS.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Sauron</a>    Domoticz.</blockquote><br>
<br>
<blockquote><b>UPD:</b> SquashFS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Vooon</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Vcoderlab</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">av_in</a> et al     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">SquashFS</a>.    ,      «» <code>union mount</code>,          .    ,  SquashFS by-design <i></i>  read-only, ..       <i>firmware-</i>,   ()  ,    . <b>  </b>,    ,     .     ,      IoT         .   ,       ,        SquashFS,    -  ? ,     ,         community-      SquashFS,  ..   Raspberry Pi. , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">OpenELEC</a>.</blockquote><br>
<br>
<blockquote><b>UPD:</b> F2FS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">nlykl</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">F2FS</a> aka «Flash-Friendly File System»,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">HOWTO: Replace the micro SD card's ext4 root partition by f2fs on the Raspberry PI</a>. DISCLAIMER:   . .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> F2FS</a>   -.</blockquote> <br>
<br>
<blockquote><b>UPD:</b>   <br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ilmarin77</a>        : <a href="" rel="nofollow">Network booting</a>.    . ,    , ,      ,  (    )   .     USB-Ethernet LAN9514  0..70°C</blockquote><br>
<br>
<blockquote><b>UPD:</b>   USB-<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ilmarin77</a>     USB: <a href="" rel="nofollow">How to boot from a USB Mass Storage Device on a Raspberry Pi 3</a>.      SSD,   USB,   ,  microSD,    USB 2.0 (- 30-40/,     ).      ,       . ,    read-only microSD,       SSD     ,      . USB-     ,   microSD,     .</blockquote><br>
<br>
<blockquote><b>UPD:</b>   (watchdog)<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">homecreate</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a>     <code>systemd</code>, ,   . .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>.</blockquote><br>
<br>
<blockquote><b>UPD:</b><br>
<h4>      ?</h4><br>
       .  ,  -        ,  S.M.A.R.T  HDD  SSD. SanDisk, ,     ,      EXTCSD.     - <i></i>,     Linux    .  , ,   <code>smartd(8)</code>    .<br>
<br>
     «  Linux-   SD-  /»   ,       ,     (..  uptime  ,    10 ). ,        ( sudo  root):<br>
<br>
<pre><code class="bash">uptime<font></font>
cat /sys/block/mmcblk0/stat | awk '{printf "Uptime read: %.3fMiB (%.1f%% I/Os merged) written: %.3f MiB (%.1f%% I/Os merged)\n", $3*512/1048576, $2/$1*100, $7*512/1048576, $6/$5*100}'</code></pre><br>
    ,            ,  ,   «» . ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Meklon</a>       -,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">openELEC</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">KODI</a>.   6     72    66.   /   1:1,      SquashFS (        SD-      ).      /  5:1  10:1,     .    ,  10   —  <i></i>   ,      .<br>
   ,         :        512 ,    ,    erase-  .   <i>Optimizations for Cheap Flash Media</i>  Arnd Bergmann (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>, .)        «» ,  ..    32,  erase- 4..8.       «» ,    512    <s> </s>  erase-, ..       <s>64 </s>  ,   <code>stat</code>.          6/,   microSD-    .<br>
     ,     .</blockquote><br>
<br>
<h4></h4><br>
<blockquote>Make Raspbian System Read-Only<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">blog.pi3g.com/2014/04/make-raspbian-system-read-only</a><br>
()<br>
<br>
How to make RaspberryPi truly read-only, reliable and trouble-free<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">k3a.me/how-to-make-raspberrypi-truly-read-only-reliable-and-trouble-free</a><br>
( )<br>
<br>
Protect your Raspberry PI SD card, use Read-Only filesystem<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">hallard.me/raspberry-pi-read-only</a><br>
( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">sisaenkov</a>,  ,    )<br>
<br>
Stopping SD Card Corruption on Raspberry Pi’s Raspbian<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ideaheap.com/2013/07/stopping-sd-card-corruption-on-a-raspberry-pi</a><br>
( )<br>
<br>
Raspberry Pi    —   VNC  localhost<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">habrahabr.ru/post/212661</a><br>
<br>
 RTC (  )  Raspberry Pi<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">raspberrypi.ru/blog/598.html</a><br>
( I2C-  DS3231)<br>
<br>
How to boot from a USB Mass Storage Device on a Raspberry Pi 3<br>
<a href="" rel="nofollow">www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md</a><br>
<br>
Network booting<br>
<a href="" rel="nofollow">www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md</a><br>
<br>
ECIO(TM), a powerful USB programmable single chip computer based on PICmicro microcontroller technology<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.matrixtsl.com/product.php?Prod=ECIO28P</a><br>
<br>
Easy Raspberry Pi Based Screensaver/Slideshow for Exhibitions/Store Front<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.instructables.com/id/Easy-Raspberry-Pi-Based-ScreensaverSlideshow-for-E</a><br>
(      6)<br>
<br>
Flash memory card design (2013)<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">wiki.linaro.org/WorkingGroups/KernelArchived/Projects/FlashCardSurvey</a><br>
(    ,   ?         FAT;   ;   2013)<br>
<br>
Optimizing Linux with cheap flash drives, Arnd Bergmann, 2011<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">lwn.net/Articles/428584</a><br>
( )<br>
<br>
Optimizations for Cheap Flash Media, Arnd Bergmann, 2011<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">free-electrons.com/blog/elce-2011-videos</a><br>
(   ,  ,  )<br>
<br>
SD Association, Simplified Specifications, Part 1 Simplified: Physical Layer Simplified Specification<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.sdcard.org/downloads/pls/index.html</a><br>
<br>
Block layer statistics in /sys/block/&lt;dev&gt;/stat<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.kernel.org/doc/Documentation/block/stat.txt</a><br>
(   SD-    :  <code>cat /sys/block/mmcblk0/stat</code>    <code>uptime</code>)<br>
</blockquote></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr400011/">https://habr.com/ru/post/fr400011/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr399997/index.html">Генная терапия продлила жизнь мышам на 30%</a></li>
<li><a href="../fr399999/index.html">«Nouveau dans le monde du son»: des phonogrammes au format Dolby Atmos seront enregistrés sur «Mosfilm»</a></li>
<li><a href="../fr400001/index.html">Un tout nouveau monde aux confins du système solaire</a></li>
<li><a href="../fr400005/index.html">Infectez le PC de deux amis et obtenez la clé de déverrouillage de votre propre ordinateur: un nouveau schéma du ransomware crypto</a></li>
<li><a href="../fr400009/index.html">Comment j'ai vécu le phare d'Alfa à Ekaterinbourg</a></li>
<li><a href="../fr400013/index.html">С Земли на Луну. История и математика. Часть 1</a></li>
<li><a href="../fr400015/index.html">Le personnel d'Uber a utilisé le «mode Dieu» pour suivre les ex</a></li>
<li><a href="../fr400017/index.html">La Russie perd du terrain dans le monde spatial en pleine croissance. Ou pas?</a></li>
<li><a href="../fr400019/index.html">Des experts se sont prononcés contre le projet de loi visant à limiter la part du capital étranger dans les services audiovisuels</a></li>
<li><a href="../fr400021/index.html">Courte critique du smartphone Sony Xperia XCompact</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>