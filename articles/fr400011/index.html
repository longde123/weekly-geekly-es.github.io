<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôÇÔ∏è ü§úüèª üëµüèø Raspberry Prog vs Bricks Internet, ou Raspberry Pi avec graphiques microSD en lecture seule üìí üíáüèº üíá</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lancement du Raspberry Pi avec prise en charge graphique compl√®te sur microSD, restant pour toujours en mode lecture seule apr√®s l'installation du sys...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Raspberry Prog vs Bricks Internet, ou Raspberry Pi avec graphiques microSD en lecture seule</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400011/"><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lancement du Raspberry Pi avec prise en charge graphique compl√®te sur microSD, restant pour toujours en mode lecture seule apr√®s l'installation du syst√®me. </font><font style="vertical-align: inherit;">L'absence d'enregistrement de donn√©es sur la m√©moire flash augmente la fiabilit√© de l'appareil, le rapprochant de la classe industrielle des produits. </font><font style="vertical-align: inherit;">Instructions √©tape par √©tape. </font><font style="vertical-align: inherit;">Un petit th√©√¢tre d'ing√©nierie absurde pour divertir le public.</font></font></blockquote><br>
<br>
<img width="300" height="286" align="left" src="https://habrastorage.org/files/3fe/926/297/3fe9262971804740b78796c19094cd31.jpg"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'avais besoin d'un p√©riph√©rique r√©seau open source avec sortie HDMI, et j'ai d√©cid√© d'essayer Raspberry Prog. Oui, c'est exactement ce que je sugg√®re de traduire </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Prog</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Bien s√ªr, m√™me un payeur unique a besoin d'un syst√®me d'exploitation. Et donc, je vais sur le </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">site officiel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , en esp√©rant y trouver un guide d√©taill√© sur la cr√©ation d'une </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bo√Æte cl√© en main</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dure et indestructible </font><font style="vertical-align: inherit;">. Mais les gens, comme si rien ne s'√©tait pass√©, installent Ubuntu (c'est-√†-dire Raspbian Jessie) directement sur microSD, en y pla√ßant √©galement le swap. Comme un bureau ordinaire, face √† la paume.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mais ensuite les fleurs. </font><font style="vertical-align: inherit;">Les baies de framboise sont des projets de cadres photo de MalinProg qui n√©cessitent un arr√™t obligatoire avec un bouton. </font><font style="vertical-align: inherit;">Sinon, le cadre photo apr√®s une panne de courant peut ne pas fonctionner, au lieu des images proposant d'utiliser fsck. </font><font style="vertical-align: inherit;">Mais ce n'est pas la limite, sous le chat du lecteur, se trouve un v√©ritable chef-d'≈ìuvre d'ing√©nierie absurde, trouv√© par l'auteur dans l'immensit√© du r√©seau. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, selon les instructions standard, un lecteur √† carte unique normal se transforme en un bureau gonfl√© avec une dur√©e de vie moyenne d'un an et demi, jusqu'√† ce qu'un lecteur flash us√© meure, transformant un appareil g√©n√©ralement bon en brique. </font><font style="vertical-align: inherit;">Et la plupart des gens semblent √™tre d'accord avec √ßa. </font><font style="vertical-align: inherit;">Je ne le suis pas.</font></font><a name="habracut"></a><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O√π le monde se dirige</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avant d'ouvrir le becquet, portez un masque de protection ou saisissez votre t√™te √† l'avance avec vos mains. </font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un bon projet qui a ruin√© une recommandation</font></font></b><div class="spoiler_text">      -   RPi,      (!)   . ,    Raspbian -   720   . ,   12     ,    ,   ¬´¬ª USB-  4 .   ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">   RPi</a>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ECIO28P</a>,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a> .</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
D'accord, je ne nierai pas l'utilit√© ind√©pendante du rouser mat√©riel: c'est un vrai hack pour ceux qui paient un tarif horaire pour s'asseoir devant le moniteur. </font><font style="vertical-align: inherit;">Ou pour maintenir le ton de certains </font><font style="vertical-align: inherit;">terminaux industriels </font><font style="vertical-align: inherit;">particuli√®rement </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stupides et</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> durs, sous l'armure anti-vandalisme dont un connecteur de souris sort (pour PS / 2, un adaptateur vert devrait convenir). </font><font style="vertical-align: inherit;">Oui, si vous pressez un bureau gonfl√© dans un ordinateur √† carte unique, alors entre les mains des √ºber-artisans, c'est une arme formidable, en particulier avec la carte MK qui sort brutalement du connecteur. </font><font style="vertical-align: inherit;">C'est imm√©diatement √©vident: une personne sait travailler avec ses mains. </font><font style="vertical-align: inherit;">Mais si vous avez besoin d'un √©cran toujours allum√©, sous Linux il y a assez de t√™te, les r√©sidents de cette ressource en sont bien conscients. </font><font style="vertical-align: inherit;">Pour les invit√©s du portail, je donne toujours des instructions, on ne sait jamais quoi.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©sactiver DPMS, √©conomiseur d'√©cran et en m√™me temps tous les √©l√©ments de l'interface graphique</font></font></b><div class="spoiler_text">  ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">LightDM</a>,   X- <abbr title="Display Power Management Signaling">DPMS</abbr>   <code><nobr>/etc/lightdm/lightdm.conf</nobr></code>:<br>
<pre><code class="plaintext">...
xserver-command=X -s 0 -dpms -nocursor
...</code></pre><br>
 <code>-nocursor</code>        .            <code><nobr>~/.config/lxsession/LXDE/autostart</nobr></code>.    ,    <code>cron(8)</code>   718   <code><nobr>xscreensaver-command -deactivate</nobr></code> (  ,   ;-)</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C'est exactement ce que j'ai fait: j'ai accept√© LightDM avec saisie automatique, mais je n'ai laiss√© dans le fichier </font></font><code><nobr>~/.config/lxsession/LXDE/autostart</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'un appel √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">feh</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec le pr√©fixe '@' pour red√©marrer en cas d'accident et resp. param√®tres. C'est-√†-dire comme des graphiques normaux, mais sans </font></font><code>lxpanel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sans </font></font><code>pcmanfm</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, sans </font></font><code>xscreensaver</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, avec DPMS d√©sactiv√© et le curseur cach√© d'une souris inexistante. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est tr√®s facile d'obtenir un minimum de graphiques en commandant </font></font><code><nobr>apt-get</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et en √©ditant le fichier </font></font><code>autostart</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et le syst√®me aura tout le n√©cessaire pour la vie des applications standard, y compris le serveur X, le gestionnaire de fen√™tres, le gestionnaire de sessions et le gestionnaire d'affichage avec connexion automatique de l'utilisateur. Mais jusqu'√† pr√©sent, ce n'est pas une chose, mais juste un bureau √† carte unique.</font></font><br>
<br>
<blockquote><b>UPD</b><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Jaromir</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">unclutter</a>   ,    .    ,       .<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Spider55</a>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">LightDM</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">noDM</a>.   ,      .</blockquote><br>
<h4></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Plaque simple sph√©rique dans le vide - c'est ennuyeux. Pas pour √ßa sur Raspberry Prog un peigne entier de GPIO avec I2C / PWM, ainsi que toutes sortes de CSI-DSI et un chien de garde. Mais comme exemple pratique, j'utilise toujours un d√©monstrateur r√©seau avec une sortie HDMI, ajoutant la possibilit√© pour plusieurs utilisateurs de ¬´capturer¬ª un panneau d'√©cran commun et de diffuser leur bureau dessus sans se lever d'une chaise. L'√©cran est tourn√© pour faire face aux invit√©s, au repos, trier tranquillement et al√©atoirement les photos publi√©es sur le r√©seau. Si vous devez montrer un produit √† un invit√©, l'un des administrateurs assis au comptoir transforme temporairement le tableau de bord en un ¬´miroir¬ª de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">son</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">moniteur, mais le lib√®re ensuite pour un autre administrateur. </font><font style="vertical-align: inherit;">Dans mon cas, il s'agit d'un v√©ritable outil commercial suspendu dans un v√©ritable parquet. </font><font style="vertical-align: inherit;">Au fait, merci √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauron</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pour son </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cependant, en consid√©rant la taille de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cette</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> publication, j'ai d√©cid√© de reporter la description de la solution appliqu√©e (c'est-√†-dire le module vid√©o lui-m√™me) √† un article s√©par√©. </font><font style="vertical-align: inherit;">Pour l'instant, permettez-moi de me concentrer sur la t√¢che initiale: obtenir le Raspberry Pi pour d√©marrer et travailler avec microSD en mode lecture seule, sans crainte de panne de courant et sans </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vider</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la m√©moire flash avec des ordures.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Th√©orie des questions</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
M√™me un syst√®me de fichiers journaux tr√®s s√©rieux ne peut finalement pas contr√¥ler les processus qui se produisent √† l'int√©rieur du support SD lorsque l'alimentation est coup√©e. Par exemple, les SSD s√©rieux utilis√©s dans les centres de donn√©es ont des condensateurs, dont la d√©charge est juste suffisante pour fermer la derni√®re transaction d'√©criture, et il en reste encore un peu plus. Qu'en est-il de la mise hors tension en microSD? Je suis s√ªr qu'il n'y a pas assez de condensateurs l√†-bas, mais il y a une probabilit√© non nulle que l'enregistrement de la page de m√©moire NAND ne se termine pas. Et puis le pilote du syst√®me de fichiers de la lecture deviendra tellement d√©routant qu'une intervention manuelle de l'op√©rateur sera n√©cessaire. Ici, vous avez un cadre photo avec fsck.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä quel point est-il difficile de transf√©rer le microSD Raspberry Pi en mode lecture seule par Michel-Ange, c'est-√†-dire supprimer les services et packages inutiles? Assez simple s'il n'y a pas de graphisme ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lien</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Mais il est n√©cessaire de commencer dans les </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> avec ces gestionnaires dans toute leur nombre, il commence un combat long et fastidieux avec des </font><font style="vertical-align: inherit;">r√©sultats impr√©visibles. Ce n'est pas une aiguille dans une botte de foin, vous pouvez m√™me la retirer avec un aimant. Imaginez qu'un </font><font style="vertical-align: inherit;">nombre </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">inconnu</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> d'aiguilles soient cach√©es dans une boule de fil de fer barbel√©, et m√™me abondamment saupoudr√©es de clous. Quelle recherche d'aiguilles est l√†, pour ne pas √™tre tu√© √† mort. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lemme:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour ex√©cuter m√™me la nouvelle fonction la plus √©l√©mentaire, le syst√®me Linux tirera toujours un tas de d√©pendances inutiles, et m√™me avec des graphiques ¬´l√©gers¬ª, la croissance de l'entropie du syst√®me est multiple. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Th√©or√®me:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans tout ensemble fini de logiciels, il y a toujours un morceau de code infinit√©simal qui essaiera d'√©crire un bit infiniment inutile dans un syst√®me de fichiers en lecture seule, ce qui entra√Ænera une erreur fatale, ruinera le syst√®me entier et barrera les nombreuses heures d'efforts de l'op√©rateur.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Solution: UnionFS</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il y a quelques ann√©es, un Allemand a trouv√© une tr√®s belle fa√ßon de collecter toutes ces aiguilles dans une auge en utilisant UnionFS et de les br√ªler dans le four √† chaque red√©marrage. Malheureusement, le message d'origine est d√©j√† mort avec le domaine qui l'a h√©berg√©, mais l'allemand n'est certainement pas seul. Les lecteurs reconnaissants </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ont conserv√© l'</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> id√©e, je consid√®re qu'il est simplement n√©cessaire de la publier ici. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
L'essentiel est qu'au-dessus du ¬´support¬ª permanent (syst√®me de fichiers en lecture seule sur microSD), chaque fois que vous l'allumez, un ¬´patch¬ª temporaire est cr√©√© dans la RAM, qui absorbe toute l'entropie inutile et ¬´br√ªle¬ª lorsque l'alimentation de l'appareil est coup√©e. Le syst√®me de fichiers sur microSD reste en lecture seule tout le temps, et donc le risque de dommages est r√©duit √† presque z√©ro, tout comme le risque d'usure pr√©matur√©e du lecteur flash.</font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pourquoi pas strictement √† z√©ro? Les connaisseurs d'EXT4, corrigez-moi, mais le pilote du syst√®me de fichiers √©crit toujours quelque chose sur le support chaque fois que le syst√®me de fichiers est mont√©-d√©mont√©, m√™me s'il est mont√© en lecture seule. Et cela </font></font><code>noatime</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n'aide pas, vous avez besoin d'une cl√© mat√©rielle sur microSD. Sinon, comment puis-je expliquer le fait que </font></font><code>/sys/block/mmcblk0/stat</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j'ai lu 282612 secteurs et </font><font style="vertical-align: inherit;">que </font><font style="vertical-align: inherit;">j'en ai d√©j√† enregistr√© 96, et ceci en mode lecture seule? Eh bien, m√™me si le rapport est proche de 3000: 1, sur un </font><font style="vertical-align: inherit;">syst√®me </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">normal</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , il est de 5: 1.</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (coupable, menti, mais cela ne change pas l'essence)</font></font><br>
<br>
<blockquote><b>UPD:</b><br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">gattopazzo83</a>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Flash Media Kit</a>    - (  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>).    100,000  ,   SLC-   microSD.         read-only,          ,   <i></i> (¬´¬ª -  ¬´¬ª ;-)</blockquote><br>
<br>
<blockquote><b>UPD:</b><br>
          <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">doga</a>,     ¬´¬ª          SD-     RPi.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">doga</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">   </a>     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">mmc-utils</a>,     SD-,     Raspbian   . -   , , ,    .<br>
<div class="spoiler"><b class="spoiler_title">SD-</b><div class="spoiler_text">:<pre><code class="bash">udevadm info -a -n /dev/mmcblk0</code></pre><br>
  ¬´¬ª  <code>CID</code>  <code>CSD</code>,     (<code>name</code>),   (<code>serial</code>),   (<code>date</code>),   (<code>hwrev, fwrev, oemid, manfid</code>).      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.sdcard.org</a>    ¬´¬ª  (Simplified Specifications), . Part 1 Simplified, Physical Layer Simplified Specification.<br>
   <code>stat</code>,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">kernel.org</a>.     ,           .<br>
  -  ,        <a href="" rel="nofollow">lsmmc.c</a>.<br>
¬´  ¬ª       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">RPi SD cards</a>   Embedded Linux,    .<br>
  ‚Äî   ‚Äî   ,   mmc-utils ,      .</div></div></blockquote><br>
<br>
<h4></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quels sont les inconv√©nients outre la ¬´gravure¬ª des journaux? </font><font style="vertical-align: inherit;">Les appareils sans horloge mat√©rielle au d√©marrage pensent toujours que c'est dans la cour le 1er janvier 1970 et sont dans cette id√©e fausse jusqu'√† augmenter la pile r√©seau et la disponibilit√© de NTP. </font><font style="vertical-align: inherit;">Par cons√©quent, au moment de cette publication, toute une s√©rie de ¬´correctifs¬ª d'objets de fichiers auront environ 46 ans de moins qu'ils ne le pensent. </font><font style="vertical-align: inherit;">En revanche, √† quelques secondes du d√©but de l'√®re n'est plus z√©ro.</font></font><br>
<br>
<blockquote><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> horloge en temps r√©el L' </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
utilisateur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">st1373</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dans les commentaires a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rappel√©</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> la disponibilit√© de l'horloge en temps r√©el compatible I2C DS3231 (co√ªtant environ un rouleau et demi de papier toilette). </font><font style="vertical-align: inherit;">Il y a une instruction simple en russe: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Connecter RTC (horloge en temps r√©el) au Raspberry Pi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></blockquote><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La s√©curit√©</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il est plut√¥t g√™nant d‚Äôinstaller des mises √† jour de s√©curit√© sur un tel syst√®me. Mais, encore une fois, pirater une telle chose est un peu plus compliqu√© que d'exploiter la vuln√©rabilit√© d'Adobe Flash dans un navigateur de bureau classique. Un code malveillant doit ouvrir le syst√®me de fichiers pour l'√©criture afin de s'y implanter, sinon il "br√ªlera" au red√©marrage avec les journaux et les ordures. SquashFS mentionn√© ci-dessous complique encore plus les changements. Cependant, tous ces avantages sont valables jusqu'au moment o√π la majeure partie du code √† √©crire est ¬´ferm√©e¬ª dans les zones en lecture seule, c'est-√†-dire lorsque le ¬´substrat¬ª prot√©g√© ne fait pas d'appels √† des commandes situ√©es dans les zones enregistr√©es: c'est exactement quel (sera-t-il?) le vecteur d'infection prioritaire sur l'Internet des objets. Soyez prudent avec les scripts de d√©marrage, ils sont ex√©cut√©s en tant que root,un mauvais mouvement - et il s'agit d'une vuln√©rabilit√© critique de l'infrastructure du foyer, constamment connect√©e √† Internet.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instructions √©tape par √©tape</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Depuis que j'ai install√© Rasbian Jessie pour la premi√®re fois de ma vie et surtout que je ne crois pas √† la durabilit√© de la microSD, m√™me en lecture seule, j'ai d√©cid√© de noter toutes les √©tapes en d√©tail. </font><font style="vertical-align: inherit;">Tout √† coup, vous devez r√©p√©ter.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AVIS DE NON-RESPONSABILIT√â</font></font></h5><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">D√©sol√© pour les sauts de ligne. </font><font style="vertical-align: inherit;">Toutes les commandes sont ex√©cut√©es avec des autorisations </font></font><code>root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, mais un bon lecteur peut l'utiliser √† chaque fois </font></font><code>sudo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Honn√™tement, je ne comprends pas pourquoi </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">chaque commande doit √™tre</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ex√©cut√©e </font></font><code>sudo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, comme si elle prot√©geait contre quelque chose. </font><font style="vertical-align: inherit;">Dites-moi, √† quand remonte la derni√®re fois * vous n'√©tiez * pas s√ªr de vouloir supprimer ce fichier dans la corbeille? </font><font style="vertical-align: inherit;">C'est comme boire cinq verres de bi√®re d'un demi-litre, mais versez 0,33 sur la piste, s'il vous pla√Æt, mais je suis d√©j√† assez ... Je vais donner le mauvais conseil: si vous avez pris ces jouets, sortez en </font></font><code>root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√©quipe </font></font><code>sudo bash</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et ne vous trompez pas.</font></font><br>
</blockquote><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1. Initialisation</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez Raspbian Jessie Lite. </font><font style="vertical-align: inherit;">Utilisez l'utilitaire pour </font></font><code>raspi-config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">d√©finir les param√®tres r√©gionaux et le mot de passe utilisateur </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Connectez le r√©seau, Debian est un enfant du haut d√©bit. </font><font style="vertical-align: inherit;">N'incluez pas encore le chargement dans les graphiques.</font></font><br>
<br>
<pre><code class="bash">apt-key update<font></font>
apt-get update</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2. Ajouter ou supprimer des programmes</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Avec graphiques, installation:</font></font><br>
<br>
<pre><code class="bash">apt-get install --no-install-recommends tightvncserver xtightvncviewer xserver-xorg xinit lxde-core lxappearance lightdm feh xprintidle policykit-1 busybox-syslogd ntpdate watchdog unionfs-fuse</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enl√®vement:</font></font><br>
<br>
<pre><code class="bash">dpkg --purge rsyslog<font></font>
apt-get remove --purge wolfram-engine triggerhappy cron anacron logrotate dphys-swapfile fake-hwclock<font></font>
apt-get autoremove --purge</code></pre><br>
<br><font style="vertical-align: inherit;"></font><code>tightvncserver, xtightvncviewer, xprintidle  feh</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">J'avais besoin des </font><font style="vertical-align: inherit;">
packages </font><font style="vertical-align: inherit;">pour une t√¢che particuli√®re, vous pouvez vous en passer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si aucun graphique, vous ne * pas * besoin de: </font></font><code>xserver-xorg xinit lxde-core lxappearance lightdm policykit-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3. Cr√©ation d'un environnement graphique</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, l'utilitaire </font></font><code>raspi-config</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">peut activer l'ex√©cution automatique en mode graphique avec connexion automatique, qui sera avec des droits d'utilisateur </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Que de se raccrocher </font></font><code>sudo</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, il vaut mieux mettre un mot de passe fort pour l'utilisateur </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, et ne pas utiliser </font></font><code>pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pour entrer automatiquement dans l'interface graphique. Au lieu de cela, cr√©ez un utilisateur </font></font><code>pu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et ex√©cutez "X" avec ses droits. De plus, le shell (shell par d√©faut) de cet utilisateur est pr√©f√©rable de le d√©sactiver compl√®tement (en le d√©finissant </font></font><code><nobr>/usr/sbin/nologin</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) ou de le remplacer par un script de type sp√©cial </font></font><code>/usr/local/bin/pu</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. J'ai l'intention d'en parler dans une autre publication consacr√©e aux panneaux vid√©o avec t√©l√©commande via SSH, pour laquelle un compte s√©par√© avec des droits r√©duits est cr√©√©. Merci encore √† </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sauron </font></font></a> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et al</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<pre><code class="bash">adduser --home /home/pu --shell /usr/local/bin/pu --uid 990 --gecos "RPi p-u" --gid 1000 pu<font></font>
mkdir -p /home/pu/.config/lxsession/LXDE<font></font>
cp -p /etc/xdg/lxsession/LXDE/desktop.conf /home/pu/.config/lxsession/LXDE/desktop.conf<font></font>
touch /home/pu/.config/lxsession/LXDE/autostart<font></font>
chown -R pu:pi /home/pu<font></font>
sed -i 's/^#\?xserver-command=.*$/xserver-command=X -s 0 -dpms -nocursor/' /etc/lightdm/lightdm.conf<font></font>
sed -i 's/^#\?autologin-user=.*$/autologin-user=pu/' /etc/lightdm/lightdm.conf</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Au lieu des deux derni√®res commandes, vous pouvez l'ouvrir avec l'√©diteur </font></font><code><nobr>/etc/lightdm/lightdm.conf</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et d√©finir les valeurs de deux param√®tres, le premier que j'ai mentionn√© ci-dessus, le second parle de lui-m√™me:</font></font><br>
<br>
<pre><code class="plaintext">...<font></font>
xserver-command=X -s 0 -dpms -nocursor<font></font>
...<font></font>
autologin-user=pu<font></font>
...</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4. Minuteur de surveillance (facultatif)</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai un Raspberry Pi 3 Model B, donc le module de surveillance du noyau est appel√© comme ceci:</font></font><br>
<br>
<pre><code class="bash">modprobe bcm2835_wdt<font></font>
echo "bcm2835_wdt " | sudo tee -a /etc/modules</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez ensuite la ligne suivante √† la section </font></font><code>[Install]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√† la fin du fichier </font></font><code><nobr>/lib/systemd/system/watchdog.service</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">:</font></font><br>
<br>
<pre><code class="plaintext">[Install]<font></font>
WantedBy=multi-user.target</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apr√®s cela, activez le service:</font></font><br>
<br>
<pre><code class="bash">systemctl enable watchdog.service</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le temporisateur du chien de garde dans la configuration minimale devrait fonctionner si le noyau se fige. </font><font style="vertical-align: inherit;">Mais il existe de nombreuses autres options, par exemple, pour une charge excessive sur le syst√®me, pour l'expiration de la m√©moire, pour une surchauffe du syst√®me, pour l'absence d'un fichier de signal, etc. </font><font style="vertical-align: inherit;">Voir. En </font><font style="vertical-align: inherit;">outre </font></font><code>watchdog(8)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et</font></font><code>watchdog.conf(5)</code><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5. Param√®tres de d√©marrage</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
J'ai d√©sactiv√© l'affichage du logo de framboise et du fichier d'√©change, activ√© le chargement rapide. </font><font style="vertical-align: inherit;">Pour ce faire, j'ai ajout√© en </font></font><code><nobr>/boot/cmdline.txt</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">seulement trois mots </font></font><code>logo.nologo fastboot noswap</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Je me suis retrouv√© avec ceci:</font></font><br>
<br>
<pre><code class="plaintext">logo.nologo dwc_otg.lpm_enable=0 console=serial0,115200 console=tty1 root=/dev/mmcblk0p2 rootfstype=ext4 elevator=deadline fsck.repair=yes rootwait fastboot noswap</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6. Sceller le syst√®me de fichiers racine du Raspberry Pi en lecture seule</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, nous sommes enfin arriv√©s √† l'essentiel. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Vous trouverez ci-dessous un script qui devrait √™tre plac√© sous un nom </font></font><code>mount_unionfs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quelque part </font></font><code><nobr>/usr/local/bin</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">N'oubliez pas d'activer les bits de faisabilit√© + x ( </font></font><code>chmod</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">755 ou 555). </font><font style="vertical-align: inherit;">Faites attention aux suffixes </font></font><code>.orig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>.rw</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ils doivent co√Øncider avec la pr√©paration (plus loin):</font></font><br>
<br>
<pre><code class="bash">#!/bin/sh<font></font>
DIR=$1<font></font>
ROOT_MOUNT=$(awk '$2=="/" {print substr($4,1,2)}' &lt; /etc/fstab)<font></font>
if [ $ROOT_MOUNT = "rw" ]; then<font></font>
	/bin/mount --bind ${DIR}.orig ${DIR}<font></font>
else<font></font>
	/bin/mount -t tmpfs ramdisk ${DIR}.rw<font></font>
	/usr/bin/unionfs-fuse -o cow,allow_other,suid,dev,nonempty ${DIR}.rw=RW:${DIR}.orig=RO ${DIR}<font></font>
fi</code></pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä partir d'autres instructions, j'ai d√©cid√© de suivre les conseils et de faire ce qui suit:</font></font><br>
<br>
<pre><code class="bash">insserv -r bootlogs<font></font>
insserv -r alsa-utils<font></font>
<font></font>
rm -rf /var/lib/dhcp/<font></font>
ln -s /tmp /var/lib/dhcp</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Les applications graphiques sont tr√®s friandes d'√©crire </font></font><code>/home</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">quelque chose d'inutile, donc en plus </font></font><code>/etc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>/var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">j'ai √©galement inclus </font></font><code>/home</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Nous allons pr√©parer les sections pour passer en mode UnionFS (attention aux suffixes </font></font><code>.orig</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">et </font></font><code>.rw</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">):</font></font><br>
<br>
<pre><code class="bash"><font></font>
cp -al /etc /etc.orig<font></font>
mv /var /var.orig<font></font>
mv /home /home.orig<font></font>
mkdir /etc.rw /var /var.rw /home /home.rw</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enfin fichier </font></font><code>fstab(5)</code><br>
<br>
<pre><code class="plaintext">proc            /proc           proc    defaults        0       0<font></font>
/dev/mmcblk0p1  /boot           vfat    ro              0       2<font></font>
/dev/mmcblk0p2  /               ext4    ro              0       1<font></font>
mount_unionfs   /etc            fuse    defaults        0       0<font></font>
mount_unionfs   /var            fuse    defaults        0       0<font></font>
mount_unionfs   /home           fuse    defaults        0       0<font></font>
none            /tmp            tmpfs   defaults        0       0</code></pre><br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7. Audit et test du syst√®me</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetez un ≈ìil au syst√®me, nettoyez </font></font><code>.bash_history</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">toutes sortes de fichiers journaux, etc. </font><font style="vertical-align: inherit;">Veuillez noter qu'ils peuvent ne pas √™tre situ√©s l√† o√π ils se trouvent habituellement (par exemple, </font></font><code><nobr>/var.orig</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">au lieu de </font></font><code>var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Red√©marrez le syst√®me et voyez ce qui s'est pass√©. </font><font style="vertical-align: inherit;">Si une erreur a √©t√© commise, il y a de fortes chances que le syst√®me quitte en tant </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">qu'utilisateur unique</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et d√©marre simplement la console </font></font><code>root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Si le syst√®me de fichiers est intact, le remontage de </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lecture seule</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √† </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lecture-√©criture est</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> assez simple:</font></font><br>
<br>
<pre><code class="bash">mount -o rw,remount /</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le syst√®me a d√©marr√© normalement en lecture seule et ex√©cute toutes les fonctions, f√©licitations! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci est n√© la chose Internet.</font></font><br>
<br>
<h5><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. Impression d'un syst√®me de fichiers</font></font></h5><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si vous devez imprimer le syst√®me, remettez d'abord le syst√®me cheval en √©tat de lecture-√©criture (voir ci-dessus). </font><font style="vertical-align: inherit;">Ensuite, commentez les </font></font><code>fstab(5)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lignes commen√ßant par le mot </font></font><code>mount_unionfs</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, apr√®s quoi * assurez-vous * de retourner √† la place le r√©pertoire </font></font><code><nobr>/var.orig</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avec tout le contenu (et de pr√©f√©rence </font></font><code><nobr>/home.orig</nobr></code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aussi). </font><font style="vertical-align: inherit;">Si vous ne le restaurez pas </font></font><code>/var</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, vous perdrez la base de donn√©es des packages install√©s, mais c'est pour installer des mises √† jour de s√©curit√© avec l'√©quipe que </font></font><code>apt-get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vous venez d'imprimer le syst√®me, non? </font><font style="vertical-align: inherit;">Avant de </font></font><code>apt-get</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">red√©marrer le syst√®me et assurez-vous qu'il est ad√©quat. </font><font style="vertical-align: inherit;">Comment sceller en arri√®re, vous savez;)</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alternatives</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Chers lecteurs qui connaissent des images industrielles pr√™tes √† l'emploi de syst√®mes d'exploitation (avec prise en charge en lecture seule) pour Raspberry Pi et d'autres ordinateurs √† carte unique, je vous invite √† partager les commentaires. J'esp√®re qu'avec votre aide, je serai en mesure d'enrichir cette section avec des informations d'autres lecteurs, r√©sidents et invit√©s du portail respect√© :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quant aux alternatives mat√©rielles au Raspberry Prog lui-m√™me dans le contexte de l'application (r√©seau HDMI whistle), je suis tomb√© accidentellement sur un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">avis</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> qui cependant, il peut √™tre discut√© s√©par√©ment. Purement √©conomique, le Raspberry Pi est tr√®s rentable, jusqu'√† pr√©sent l'essentiel :) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alors, allons-y.</font></font><br>
<br>
<blockquote><b>UPD:</b> OverlayFS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ValdikSS</a>   OverlayFS,     Linux  2014,     ,   <code>initramfs</code>.     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">art_gl</a>     : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Raspbian with Read-only Root</a>.<br>
,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">Domoticz</a>,         , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a> OverlayFS.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Sauron</a>    Domoticz.</blockquote><br>
<br>
<blockquote><b>UPD:</b> SquashFS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Vooon</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Vcoderlab</a>, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">av_in</a> et al     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">SquashFS</a>.    ,      ¬´¬ª <code>union mount</code>,          .    ,  SquashFS by-design <i></i>  read-only, ..       <i>firmware-</i>,   ()  ,    . <b>  </b>,    ,     .     ,      IoT         .   ,       ,        SquashFS,    -  ? ,     ,         community-      SquashFS,  ..   Raspberry Pi. , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">OpenELEC</a>.</blockquote><br>
<br>
<blockquote><b>UPD:</b> F2FS<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">nlykl</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">F2FS</a> aka ¬´Flash-Friendly File System¬ª,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">HOWTO: Replace the micro SD card's ext4 root partition by f2fs on the Raspberry PI</a>. DISCLAIMER:   . .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> F2FS</a>   -.</blockquote> <br>
<br>
<blockquote><b>UPD:</b>   <br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ilmarin77</a>        : <a href="" rel="nofollow">Network booting</a>.    . ,    , ,      ,  (    )   .     USB-Ethernet LAN9514  0..70¬∞C</blockquote><br>
<br>
<blockquote><b>UPD:</b>   USB-<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">ilmarin77</a>     USB: <a href="" rel="nofollow">How to boot from a USB Mass Storage Device on a Raspberry Pi 3</a>.      SSD,   USB,   ,  microSD,    USB 2.0 (- 30-40/,     ).      ,       . ,    read-only microSD,       SSD     ,      . USB-     ,   microSD,     .</blockquote><br>
<br>
<blockquote><b>UPD:</b>   (watchdog)<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">homecreate</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"> </a>     <code>systemd</code>, ,   . .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>.</blockquote><br>
<br>
<blockquote><b>UPD:</b><br>
<h4>      ?</h4><br>
       .  ,  -        ,  S.M.A.R.T  HDD  SSD. SanDisk, ,     ,      EXTCSD.     - <i></i>,     Linux    .  , ,   <code>smartd(8)</code>    .<br>
<br>
     ¬´  Linux-   SD-  /¬ª   ,       ,     (..  uptime  ,    10 ). ,        ( sudo  root):<br>
<br>
<pre><code class="bash">uptime<font></font>
cat /sys/block/mmcblk0/stat | awk '{printf "Uptime read: %.3fMiB (%.1f%% I/Os merged) written: %.3f MiB (%.1f%% I/Os merged)\n", $3*512/1048576, $2/$1*100, $7*512/1048576, $6/$5*100}'</code></pre><br>
    ,            ,  ,   ¬´¬ª . ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">Meklon</a>       -,    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">openELEC</a> / <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">KODI</a>.   6     72    66.   /   1:1,      SquashFS (        SD-      ).      /  5:1  10:1,     .    ,  10   ‚Äî  <i></i>   ,      .<br>
   ,         :        512 ,    ,    erase-  .   <i>Optimizations for Cheap Flash Media</i>  Arnd Bergmann (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow"></a>, .)        ¬´¬ª ,  ..    32,  erase- 4..8.       ¬´¬ª ,    512    <s> </s>  erase-, ..       <s>64 </s>  ,   <code>stat</code>.          6/,   microSD-    .<br>
     ,     .</blockquote><br>
<br>
<h4></h4><br>
<blockquote>Make Raspbian System Read-Only<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">blog.pi3g.com/2014/04/make-raspbian-system-read-only</a><br>
()<br>
<br>
How to make RaspberryPi truly read-only, reliable and trouble-free<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">k3a.me/how-to-make-raspberrypi-truly-read-only-reliable-and-trouble-free</a><br>
( )<br>
<br>
Protect your Raspberry PI SD card, use Read-Only filesystem<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">hallard.me/raspberry-pi-read-only</a><br>
( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">sisaenkov</a>,  ,    )<br>
<br>
Stopping SD Card Corruption on Raspberry Pi‚Äôs Raspbian<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">ideaheap.com/2013/07/stopping-sd-card-corruption-on-a-raspberry-pi</a><br>
( )<br>
<br>
Raspberry Pi    ‚Äî   VNC  localhost<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">habrahabr.ru/post/212661</a><br>
<br>
 RTC (  )  Raspberry Pi<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">raspberrypi.ru/blog/598.html</a><br>
( I2C-  DS3231)<br>
<br>
How to boot from a USB Mass Storage Device on a Raspberry Pi 3<br>
<a href="" rel="nofollow">www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/msd.md</a><br>
<br>
Network booting<br>
<a href="" rel="nofollow">www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md</a><br>
<br>
ECIO(TM), a powerful USB programmable single chip computer based on PICmicro microcontroller technology<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.matrixtsl.com/product.php?Prod=ECIO28P</a><br>
<br>
Easy Raspberry Pi Based Screensaver/Slideshow for Exhibitions/Store Front<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.instructables.com/id/Easy-Raspberry-Pi-Based-ScreensaverSlideshow-for-E</a><br>
(      6)<br>
<br>
Flash memory card design (2013)<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">wiki.linaro.org/WorkingGroups/KernelArchived/Projects/FlashCardSurvey</a><br>
(    ,   ?         FAT;   ;   2013)<br>
<br>
Optimizing Linux with cheap flash drives, Arnd Bergmann, 2011<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">lwn.net/Articles/428584</a><br>
( )<br>
<br>
Optimizations for Cheap Flash Media, Arnd Bergmann, 2011<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">free-electrons.com/blog/elce-2011-videos</a><br>
(   ,  ,  )<br>
<br>
SD Association, Simplified Specifications, Part 1 Simplified: Physical Layer Simplified Specification<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.sdcard.org/downloads/pls/index.html</a><br>
<br>
Block layer statistics in /sys/block/&lt;dev&gt;/stat<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" rel="nofollow">www.kernel.org/doc/Documentation/block/stat.txt</a><br>
(   SD-    :  <code>cat /sys/block/mmcblk0/stat</code>    <code>uptime</code>)<br>
</blockquote></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr400011/">https://habr.com/ru/post/fr400011/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr399997/index.html">–ì–µ–Ω–Ω–∞—è —Ç–µ—Ä–∞–ø–∏—è –ø—Ä–æ–¥–ª–∏–ª–∞ –∂–∏–∑–Ω—å –º—ã—à–∞–º –Ω–∞ 30%</a></li>
<li><a href="../fr399999/index.html">¬´Nouveau dans le monde du son¬ª: des phonogrammes au format Dolby Atmos seront enregistr√©s sur ¬´Mosfilm¬ª</a></li>
<li><a href="../fr400001/index.html">Un tout nouveau monde aux confins du syst√®me solaire</a></li>
<li><a href="../fr400005/index.html">Infectez le PC de deux amis et obtenez la cl√© de d√©verrouillage de votre propre ordinateur: un nouveau sch√©ma du ransomware crypto</a></li>
<li><a href="../fr400009/index.html">Comment j'ai v√©cu le phare d'Alfa √† Ekaterinbourg</a></li>
<li><a href="../fr400013/index.html">–° –ó–µ–º–ª–∏ –Ω–∞ –õ—É–Ω—É. –ò—Å—Ç–æ—Ä–∏—è –∏ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞. –ß–∞—Å—Ç—å 1</a></li>
<li><a href="../fr400015/index.html">Le personnel d'Uber a utilis√© le ¬´mode Dieu¬ª pour suivre les ex</a></li>
<li><a href="../fr400017/index.html">La Russie perd du terrain dans le monde spatial en pleine croissance. Ou pas?</a></li>
<li><a href="../fr400019/index.html">Des experts se sont prononc√©s contre le projet de loi visant √† limiter la part du capital √©tranger dans les services audiovisuels</a></li>
<li><a href="../fr400021/index.html">Courte critique du smartphone Sony Xperia XCompact</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>