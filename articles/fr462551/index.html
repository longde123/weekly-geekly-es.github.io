<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌚 🖇️ 👩🏽‍💼 Questions fréquentes des développeurs sur les tests 🙋🏽 💇🏻 😬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cet article n'est pas un guide théorique pour écrire des tests et non pas comment utiliser les outils dans une pile spécifique, mais une série de ques...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Questions fréquentes des développeurs sur les tests</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462551/"><p>  Cet article n'est pas un guide théorique pour écrire des tests et non pas comment utiliser les outils dans une pile spécifique, mais une série de questions courantes, parfois même nombreuses qui n'ont pas été formées, auxquelles j'essaierai de donner des réponses.  La source de ces questions est les collègues, les personnes des deux côtés dans les entretiens et les connaissances, et les réponses seront subjectives, courtes et non exhaustives, basées sur le matériel des autres et leur expérience.  Le public cible de l'article est les développeurs qui écrivent avec un certain succès, ou du moins essaient d'écrire des tests, mais éprouvent certaines difficultés à les écrire. </p><br><p>  J'ai essayé de ne pas être attaché à un langage spécifique afin d'augmenter la portée des lecteurs, mais je ferai une réserve tout de suite que je travaille dans l'écosystème PHP en utilisant PHPUnit, et donc certaines de mes conclusions peuvent ne pas convenir à d'autres écosystèmes.  Lors de la sélection des questions et de la rédaction, je me suis concentré sur de nombreux rapports et articles et je les ai utilisés comme référence. </p><br><p>  La raison de l'écriture était le récent article « <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PHPUnit.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wretting the Doctrine Entity Manager</a> "par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=" class="user_link">chalut</a> , dont je vais également discuter certains. </p><br><p>  Liste de questions: </p><br><ul><li>  Pour écrire ou ne pas écrire des tests? </li><li>  Et si le temps n'est pas alloué aux tests? </li><li>  Types de tests, comment choisir? </li><li>  Pourquoi est-il difficile pour moi de passer des tests pendant longtemps? </li><li>  Comment tester des méthodes privées? </li><li>  Comment écrire des tests d'intégration?  Comment tester la base? </li><li>  Comment: intégration ou fonctionnel? </li><li>  Que faire des dépendances externes? </li><li>  Comment simplifier la navigation entre les tests et le sujet du test? </li><li>  Dois-je utiliser TDD? </li><li>  Quoi d'autre peut être utilisé pour améliorer le code? </li></ul><a name="habracut"></a><br><h2 id="pisat-ili-ne-pisat-testy">  Pour écrire ou ne pas écrire des tests? </h2><br><p>  J'ai vu beaucoup d'opinions à ce sujet, mais je me suis exprimé: j'ai besoin de me concentrer sur les besoins de l'entreprise. </p><br><p>  Pour un morceau de code fait en quelques heures sur le genou, les tests ne sont pas nécessaires.  D'un autre côté, pour un grand projet d'entreprise pour des centaines de main-d'œuvre, tous les types de tests populaires sont requis.  Et tout ce qui se trouve entre ces pôles doit être considéré comme un cas particulier, en évaluant le coût de certains types de tests: avec des tests, cela devrait être moins que sans eux.  Personnellement, j'écris des tests de fumée même pour un petit projet CRUD d'une durée de quelques semaines, car déjà à une telle distance, ils apportent des avantages et réduisent les coûts de développement. </p><br><p>  Avantages des tests, brièvement et abstraitement: </p><br><ul><li>  Une réduction significative du coût de correction d'un bogue grâce à une détection précoce. </li><li>  Fixation des contrats. </li><li>  Documentation de bas niveau. </li><li>  Détection de problèmes architecturaux. </li></ul><br><p>  Donc, si vos projets ne sont pas des scripts uniques à partir de plusieurs fichiers, je vous recommande vivement d'écrire des tests.  Par conséquent, la question du titre devrait être reformulée: "Dans quelle mesure les tests doivent-ils être écrits et lesquels?"  À ce sujet plus loin. </p><br><h2 id="a-esli-na-testy-ne-vydelyayut-vremya">  Et si le temps n'est pas alloué aux tests? </h2><br><p>  Ceci est une question très controversée, donc je ferai une fois de plus une réserve que je parle exclusivement de mon opinion subjective, tout en essayant de le faire le plus délicatement possible. </p><br><p>  L'écriture de tests est tout autant une tâche que la réflexion, le codage ou le débogage.  Les tests sont le même code que la logique métier ou les contrôleurs.  Mais avez-vous des questions à leur sujet?  Vous ne définissez pas de tâche distincte pour l'écriture d'un contrôleur et ne le coordonnez pas avec les gestionnaires? </p><br><p>  Il n'est pas nécessaire de consacrer plus de temps à l'écriture des tests unitaires et d'intégration.  Les tests sont écrits dans le cadre de la tâche principale.  Le chef technique du projet, en tant que propriétaire du référentiel du projet et personne compétente, décide comment, quoi et avec quels tests de couverture écrire, en se concentrant sur les tâches de l'entreprise, pas en gonflant, mais en réduisant les coûts de développement. </p><br><p>  Cependant, il peut arriver que le client ne croie pas aux tests et pense qu'avec son aide, vous n'économisez pas, mais perdez seulement du temps.  Il paie de l'argent et fixe des conditions, avec le même succès, il peut vous interdire d'utiliser un thème sombre dans votre IDE ou ordonner d'utiliser cinq espaces en retrait.  Et si les conditions ne sont pas discutées ou si la discussion est dans une impasse, alors votre choix est d'accepter ces conditions ou de refuser.  Avec des conséquences avisées. </p><br><p>  Je ferai une réserve que ce dernier n'est vrai que si vous pouvez passer des tests, en évaluer correctement les coûts et le retour sur investissement estimé.  Si vous voulez apprendre à les écrire au détriment de l'employeur sur un projet à court terme, et il est contre, alors je suis de son côté. </p><br><h2 id="vidy-testirovaniya-kak-vybrat">  Types de tests, comment choisir? </h2><br><p><img src="https://habrastorage.org/webt/cl/ht/zi/clhtzij_yx42bnmlrlkqsqff-oi.png" alt="Michael Cohen teste la pyramide"></p><br><p>  Vous pouvez regarder la pyramide des tests de Mike Cohen: en tant que développeurs, nous nous intéressons aux deux niveaux de test les plus bas.  L'effort maximal doit être donné aux tests unitaires, c'est le moins cher (par bon marché, je veux dire le temps consacré au développement et au support), ces tests sont très simples à mettre en œuvre, très simples à exécuter, ils fonctionnent rapidement. </p><br><p>  Mais les tests unitaires sont-ils toujours applicables ou recommandés?  Je crois que pour les CRUD primitifs, de tels tests prendront trop de temps avec peu d'impact et ne garantissent rien.  Essayez de tester le référentiel (référentiel dans DataMapper) puis répondez à la question, qu'est-ce que cela nous a donné.  Mais pour une variété de calculatrices, cette approche sera idéale. </p><br><p>  Essayez toujours d'écrire des tests unitaires lorsque cela est possible, mais ne testez pas ce qui est inutile à tester. </p><br><p>  Comment tester le travail conjoint du backend et du frontend, s'il s'agit de projets différents sur des piles différentes?  Tout comme le backend et l'application mobile: il s'agit de tests système, et cela devrait intéresser les ingénieurs QA et DevOps, pas les développeurs (enfin, seulement si vous n'avez pas une vraie mêlée impitoyable, où le seul rôle disponible est un développeur full stack). </p><br><p>  De plus, les tests système sont les plus coûteux en termes de développement et de support, à la fois en temps et en infrastructure.  La solution des problèmes liés à cela est déjà hors de la compétence des développeurs «linéaires» et la question de son application et des volumes doit être tranchée par le directeur technique et les responsables des domaines en collaboration avec l'entreprise. </p><br><h2 id="pochemu-mne-slozhno-i-dolgo-pisat-testy">  Pourquoi est-il difficile pour moi de passer des tests pendant longtemps? </h2><br><p>  Parfois, il est difficile d'écrire des tests car le code n'est pas prêt pour eux.  Une pile de foules, où certains en donnent d'autres, sont également une conséquence. </p><br><p>  N'utilisez pas de registres, de singletones, de localisateurs, vous compliquez grandement votre vie avec cela.  C'était la principale revendication de l'article auquel j'ai fait référence ci-dessus.  Utilisez DI et implémentez immédiatement les référentiels nécessaires dans les services.  Observez la loi de Déméter pour éviter les chaînes de mokas.  Essayez un peu de travail en utilisant la méthodologie TDD. </p><br><p>  Traitez les tests comme du code de première classe, en respectant le même code de haute qualité que dans la logique métier.  Une mauvaise qualité du code de test réduira la productivité au fil du temps. </p><br><h2 id="kak-testirovat-privatnye-metody">  Comment tester des méthodes privées? </h2><br><p>  Pas question.  Nous testons un contrat - l'interface fournie par le module aux autres modules.  Nous n'avons pas besoin de tester l'implémentation interne, cela peut changer. </p><br><p>  Que se passe-t-il s'il y a une logique compliquée à l'intérieur du test et que le test du contrat se transforme en une grande quantité d'entrée, où quelque chose d'étrange se produit à l'intérieur?  Il est nécessaire de refactoriser le code, de le distribuer dans différentes classes, où ces méthodes privées deviendront publiques, elles écrivent déjà des tests unitaires.  Et s'il n'y avait pas de tests, de tels endroits seraient difficiles à détecter, ce qui augmenterait le coût de la prise en charge d'un tel code. </p><br><h2 id="kak-pisat-integracionnye-testy-kak-testirovat-bazu">  Comment écrire des tests d'intégration?  Comment tester la base? </h2><br><p>  Utilisez des appareils.  Explorez les outils populaires de votre pile. <br>  N'écrivez pas de grands packs universels de luminaires, utilisez leur nombre minimum.  Si vous avez besoin d'un certain état d'objets pour vos tests, ne réutilisez pas de tels appareils dans d'autres endroits où un tel état n'est pas requis, sinon le support de test deviendra plus compliqué: les changer pour certains tests en cassera d'autres et prendra plus de temps. </p><br><p>  Il existe des tests d'intégration qui ne passent pas par un cycle complet de la demande à la réponse, et l'interaction des classes n'est vérifiée qu'à l'intérieur du composant.  S'ils n'ont pas de travail direct avec la base de données, vous pouvez créer un ensemble de données et / ou de mok qui iront dans l'entrée.  Dans de tels cas, vous pouvez éviter l'utilisation de luminaires et réduire la complexité et le temps d'exécution de ces tests d'intégration au niveau modulaire. </p><br><h2 id="kak-pravilno-integracionnye-ili-funkcionalnye">  Comment: intégration ou fonctionnel? </h2><br><p>  Les tests d'intégration sont l'un des niveaux de test en termes d'isolement.  Tests fonctionnels - tests de conformité.  Ces définitions se situent sur des plans différents, et vous ne pouvez pas mettre un signe égal entre elles, mais dans la pratique dans les conversations entre développeurs, elles signifient la même chose, bien que ce ne soit pas correct. </p><br><h2 id="kak-byt-s-vneshnimi-zavisimostyami">  Que faire des dépendances externes? </h2><br><p>  Nous remplaçons les dépendances externes par moki.  Non seulement pour les tests unitaires, mais aussi pour les tests d'intégration. </p><br><p>  Par exemple, nous utilisons le client HTTPS pour accéder à certaines API via la classe Guzzle.  Si vous créez une instance d'une telle classe à l'intérieur de la classe testée, il sera difficile de la remplacer, mais la solution sera très simple: nous implémentons un tel client dans le constructeur, et pendant les tests nous le remplacerons par un moch. </p><br><h2 id="kak-uprostit-navigaciyu-mezhdu-testami-i-predmetom-testirovaniya">  Comment simplifier la navigation entre les tests et le sujet du test? </h2><br><p>  Les outils de développement modernes peuvent suivre l'emplacement des tests ou des classes de test si vous utilisez des normes de dénomination.  Pour faciliter la navigation, vous pouvez utiliser le raccourci clavier Ctrl + Maj + T dans les produits JetBrains, en outre, si le test n'existe pas, vous serez invité à le créer et à créer un filaire. </p><br><p>  Parfois, vous avez besoin de plusieurs classes ou méthodes de test différentes pour le sujet du test, dans ce cas, vous devez aider l'IDE, par exemple, ajouter l'annotation @covers dans le cas de PHPUnit. </p><br><h2 id="dolzhen-li-ya-ispolzovat-tdd">  Dois-je utiliser TDD? </h2><br><p>  TDD est l'une des méthodologies de développement dans lesquelles écrire de manière itérative et nécessairement des tests d'abord, puis du code.  L'essayer en vaut vraiment la peine, il vous apprendra à écrire du code bien testé.  Cependant, cette approche n'a pas été largement utilisée, elle a des problèmes.  L'un de ces problèmes est que vous écrivez des tests que vous n'écririez pas avec l'approche classique.  Et ces tests doivent également être pris en charge, y consacrer du temps, et les avantages qui en découlent sont minimes.  Par exemple, des tests pour les setters ou des tests pour les classes où rien ne se passe, sauf les appels de dépendance.  Ces emplacements sont mieux vérifiés par des tests d'intégration. </p><br><h2 id="chto-esche-mozhno-ispolzovat-dlya-uluchsheniya-koda">  Quoi d'autre peut être utilisé pour améliorer le code? </h2><br><p>  Les outils d'analyse statique sont un autre moyen d'améliorer la qualité de votre code.  Ils se chevauchent partiellement avec les tests par le résultat, mais ils trouvent souvent que les tests n'ont pas été trouvés, en particulier avec une faible couverture.  Leur avantage incontestable - vous voyez le résultat immédiatement dans l'IDE et obtenez des commentaires instantanément. </p><br><p>  Cela ne signifie pas qu'il suffit de les laisser uniquement sur l'IDE, je recommande fortement de les utiliser également sur le CI pour voir les erreurs potentielles et ne pas gâcher un tel code. <br>  Je recommande également d'ajouter la prise en charge de l'outil de vérification du style de code à l'IDE et au CI.  Les erreurs sont souvent cachées dans le code imprudemment écrit, et ces outils vous permettent de trouver de telles zones. </p><br><h2 id="materialy-dlya-dalneyshego-izucheniya">  Matériaux pour étude ultérieure </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test de l'oiseleur pyramidal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Théorie fondamentale</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Antipatterns des tests de logiciels</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Recettes simples pour de bons tests unitaires (Konstantin Zaikin / Yandex Academy)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Pourquoi et comment écrire des tests unitaires de haute qualité (Alexey Solodky / Badoo)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">PREMIERS principes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TDDx2, BDD, DDD, FDD, MDD et PDD, ou tout ce que vous voulez savoir sur le développement piloté</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment calculer le retour sur investissement à partir de l'automatisation des tests avec Selenium?</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462551/">https://habr.com/ru/post/fr462551/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462541/index.html">Utilisation du conditionnel au printemps</a></li>
<li><a href="../fr462543/index.html">Meetup Java à Raiffeisenbank</a></li>
<li><a href="../fr462545/index.html">Blocage des télégrammes, sous-réseau Hetzner / 16, expérience avec ILV</a></li>
<li><a href="../fr462547/index.html">SGX Malvar: comment les méchants exploitent la nouvelle technologie d'Intel à de mauvaises fins</a></li>
<li><a href="../fr462549/index.html">Blockchain Quorum: intégration au code Java</a></li>
<li><a href="../fr462553/index.html">Un peu simple. Conception de test. Partie 1</a></li>
<li><a href="../fr462555/index.html">Discussion: que faire si vous travaillez sans cookies - nous vous disons quelles sont les alternatives</a></li>
<li><a href="../fr462563/index.html">Webinaire «Comment survivre à la conformité?» La meilleure approche pour répondre aux exigences réglementaires »</a></li>
<li><a href="../fr462565/index.html">Comment préparer les données pour SAP Process Mining by Celonis</a></li>
<li><a href="../fr462567/index.html">Sodinokibi Ransomware: une étude détaillée</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>