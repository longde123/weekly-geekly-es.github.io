<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üå´Ô∏è üôáüèæ üßòüèæ C√≥mo rodar con c√≥digo heredado cuando se necesitaba un proyecto ayer üå∑ üåè üë©‚Äçüë¶‚Äçüë¶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Mi nombre es Ivan Melnichuk, soy Jefe del Departamento de Desarrollo en una empresa de TI de Ucrania. En la publicaci√≥n quiero compartir mis enfo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo rodar con c√≥digo heredado cuando se necesitaba un proyecto ayer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431562/">  Hola  Mi nombre es Ivan Melnichuk, soy Jefe del Departamento de Desarrollo en una empresa de TI de Ucrania.  En la publicaci√≥n quiero compartir mis enfoques profesionales personales con respecto a la resoluci√≥n del problema del c√≥digo heredado en el contexto del r√°pido desarrollo del proyecto y contar sobre las t√©cnicas a las que recurre nuestro equipo en los casos "cuando las caracter√≠sticas deben ser entregadas" para ayer ". <br><br><h3>  Nos ocupamos del proyecto </h3><br>  Para transmitir cu√°n preciso, minucioso y minucioso debe ser el trabajo con el legado, har√© una analog√≠a con un castillo de naipes. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbb/e10/658/dbbe10658bed914e04ba9514627493f7.jpg" alt="imagen"></div><br>  As√≠ es como se ve el c√≥digo heredado.  Si decidimos eliminar o reemplazar al menos una carta de este edificio, corremos el riesgo de abrumar a toda la casa y nivelar sus restos con el suelo. <br><br>  Legacy se comporta aproximadamente de la misma manera.  Por lo tanto, el trabajo de un programador que asumi√≥ la tarea de modernizar y "dar una segunda vida" al proyecto deber√≠a ser, en cierta medida, una joyer√≠a.  La mayor√≠a de los programadores intentan evitar y generalmente "saltan del tema" de la deuda t√©cnica.  Incluso compil√≥ un exitoso desfile de las citas m√°s comunes que tuvieron que escuchar los programadores atrapados en condiciones heredadas: <br><a name="habracut"></a><br><ol><li>  <i>Creamos un sitio "simple", y ahora quieres obtener un nuevo "bollo", y necesitamos reescribir todo esto, ya que tenemos un legado ...</i> </li><li>  <i>Nadie sabe c√≥mo funciona esto ...</i> </li><li>  <i>Para agregar un m√≥dulo, debe verificar todo el sitio, solo de esta manera entenderemos qu√© y d√≥nde puede salir ...</i> </li><li>  <i>No voy a ir all√≠ en ning√∫n caso, todo ya est√° mal all√≠ ...</i> </li></ol><br>  Pero la experiencia en programaci√≥n muestra que existe vida despu√©s del legado.  No hay problemas con la programaci√≥n.  Solo hay tareas que deben abordarse.  Y antes de elaborar un plan de acci√≥n "para superar el c√≥digo de herencia", debe comprender qu√© tan mal est√°n las cosas en el proyecto en su conjunto.  En el curso de la pr√°ctica, identific√≥ 6 etapas del problema del proyecto: <br><br><ol><li>  <i>Sin documentaci√≥n t√©cnica.</i>  El umbral m√°s bajo de problemas, porque puede probar y llegar a conjeturas preliminares sobre c√≥mo deber√≠a funcionar esto. </li><li>  <i>Sin documentaci√≥n comercial.</i>  Si falta toda la documentaci√≥n (tanto t√©cnica como comercial), involuntariamente aparece la sensaci√≥n de que "parece que estamos atrapados en la historia".  De hecho, incluso una empresa no recuerda c√≥mo deber√≠a funcionar, lo que significa que el equipo, al menos, no comprende el resultado esperado. </li><li>  <i>No hay nadie que dise√±√≥ esto.</i>  Si, adem√°s de la falta de documentaci√≥n, tampoco hay un desarrollador que pueda explicar c√≥mo deber√≠a funcionar el proyecto, entonces ya huele a frito. </li><li>  <i>No sabemos lo que el usuario deber√≠a obtener en √∫ltima instancia.</i>  Una cosa es cuando surgen preguntas solo en el backend, pero si todav√≠a no tenemos idea de lo que se debe mostrar en el frente, entonces esto ya est√° cerca del estado "el paciente tiene m√°s probabilidades de estar muerto que vivo". </li><li>  <i>M√°s de 200 usos de cada funci√≥n y se llaman getA</i> .  Quinto nivel de dificultad: cuando entras en Legacy, ves el uso de la funci√≥n A y 200, y nadie sabe por qu√© es ... </li><li>  <i>No hay programadores que quisieran / pudieran desarrollar.</i>  No hay comentarios </li></ol><br><h3>  Comprender los negocios </h3><br>  Los negocios cuentan con dinero.  Las empresas no quieren gastar recursos financieros adicionales simplemente en rehacer lo que ya funciona.  Una empresa nunca comprar√° la idea: "Lo har√© de una manera nueva porque no me gusta".  Por lo tanto, siempre ofrece m√°s. <br><br>  A menudo, los desarrolladores empujan a las empresas hacia ideas in√∫tiles.  En esta ocasi√≥n, hay un "fondo de citas de oro" por separado. <br><br><ul><li>  <i>Estamos contratando un nuevo equipo para el "corte" de alta calidad del c√≥digo.</i>  Es decir, necesitamos un equipo de especialistas que har√°n el proyecto en paralelo con el equipo existente.  No es el hecho de que el resultado sea diferente, pero el negocio ya deber√≠a contener dos proyectos. </li><li>  <i>Dejamos de agregar funciones, ¬°ahora solo refactorizamos!</i>  Oficialmente declaras a la empresa: tab√∫ absoluto sobre las caracter√≠sticas, solo es posible "poner las cosas en orden" bajo el cap√≥.  Extraoficialmente, usted dijo que no habr√° mejoras a gran escala y mejoras en el proyecto, solo que las "arreglar√°" localmente. </li><li>  <i>Ya tengo todo lo que necesito en WP, solo necesito migrar la base de datos.</i>  Este es un "s√≠ntoma" de un principiante.  La canci√≥n favorita de June: es un sitio tan simple, solo funciona durante una o dos horas ... </li></ul><br>  Para negociar con el negocio con respecto a la reencarnaci√≥n de un c√≥digo obsoleto, que se sirve bajo la salsa de nuevas caracter√≠sticas rentables, es necesario desde la posici√≥n de abrir nuevos horizontes de negocios.  Sin embargo, antes de las negociaciones, se deben responder las siguientes preguntas: <br><br><ol><li>  <b>¬øEl negocio est√° listo para crecer?</b>  Debe comprender: ¬øla empresa tiene una solicitud para elevar el est√°ndar financiero o simplemente necesita el servicio para trabajar de manera m√°s competente? </li><li>  <b>¬øEtapa prototipo?</b>  A menudo, una empresa solicita un prototipo simple, con el que quiere "probar" el mercado en el momento de la relevancia del producto.  Y solo si comienza a ganar dinero, el negocio est√° listo para desarrollar la funci√≥n en un proyecto m√°s avanzado y completo. </li><li>  <b>Desarrollo completado y ahora solo soporte?</b>  Es importante comprender la gama completa de tareas. </li><li>  <b>¬øHay suficiente fuego en nuestros ojos y no se apagar√°?</b>  El proyecto debe inspirar, no desmotivar.  Es muy importante que su equipo quiera participar en la reencarnaci√≥n de Legacy, de lo contrario, las personas se dispersar√°n gradualmente en proyectos m√°s interesantes para ellos. </li><li>  <b>¬øHay un arquitecto?</b>  Esta es la pregunta m√°s importante: ¬øtiene una persona que pueda hacer la arquitectura correcta y comenzar a escribir un buen c√≥digo ya?  Ni siquiera tiene sentido intentar comenzar si no hay un arquitecto.  De lo contrario, en una semana se convertir√° en el que cre√≥ el legado del problema. </li></ol><br>  Cuando venda ideas a empresas, conc√©ntrese en los mensajes de "nuevo, crear, agregar" ... La empresa responde muy bien a las ofertas de la serie: "Le haremos una nueva funci√≥n y el proyecto X ser√° m√°s r√°pido ..." y "Para aumentar la conversi√≥n, agregue una nueva ... " <br><br><h3>  P - Planificaci√≥n </h3><br>  Para trabajar de manera r√°pida y eficiente con deudas t√©cnicas, necesita un plan. <br><br>  1. <i>Definici√≥n de tareas en las que parasitaremos.</i>  ¬øPor qu√© parasitar?  A menudo sucede: vendimos una funci√≥n, y con ella nos referimos en parte a la refactorizaci√≥n. <br><br>  2. <i>Definici√≥n de requisitos de alto nivel.</i>  Es necesario registrar una solicitud comercial clara para un "alto est√°ndar" a fin de elaborar la documentaci√≥n correcta. <br><br>  3. <i>Definici√≥n de los principales m√≥dulos del sistema, la imposici√≥n de m√≥dulos.</i>  Antes de comenzar la refactorizaci√≥n, debe comprender los m√≥dulos principales del sistema: d√≥nde, c√≥mo, qu√© y con qu√© puede interactuar y delimitar el c√≥digo en secciones. <br><br>  4. <i>Definici√≥n de integraci√≥n.</i>  Al crear un m√≥dulo espec√≠fico, debemos pensar de antemano en la capacidad de montarlo en un legado vecino. <br><br>  5. <i>Definici√≥n del equipo.</i>  Uno en el campo de refactorizaci√≥n no es un guerrero.  El equipo es un elemento muy importante de un resultado exitoso.  Fervor, unidad de equipo y excelente interacci√≥n entre los participantes en el proceso imprescindible. <br><br>  6. <i>¬øC√≥mo vamos a probar?</i>  Si va a tomar un proyecto de alta calidad, debe pensar en el futuro y en las opciones de prueba del producto. <br><br>  Junto con lo anterior, tambi√©n es importante determinar cu√°l deber√≠a ser el resultado final deseado, elaborar un plan de escala y registrar los cuellos de botella del proyecto.  Por ejemplo, en el caso del escalado de c√≥digo, es importante comprender d√≥nde pueden surgir problemas bajo condiciones de alta carga (puede ser una base de datos, consultas pesadas, una cuadr√≠cula o alg√∫n otro enlace intermedio que puede "caer"). <cut></cut><br><br>  Es igualmente importante determinar los l√≠mites del proyecto, d√≥nde estaba el antiguo c√≥digo y d√≥nde habr√° un nuevo nivel de "obra maestra".  Tambi√©n debe considerar enfoques para microservicios, o DDD, o, tal vez, necesita algo m√°s de "nanomagy". <br><br><h3>  T√©cnicas de legado ninja </h3><br>  Despu√©s del "trabajo preparatorio" llegamos a las t√©cnicas que facilitan el proceso de ahorro de la deuda t√©cnica.  No hay una receta universal y una panacea para todos los males en Legacy, pero en el curso del trabajo en proyectos de gran carga, hice una lista de ingredientes con los que puede preparar un c√≥digo realmente "sabroso". <br><br>  1. <b>No reinventar la rueda.</b>  Para m√≠, este es el truco principal para escribir c√≥digo.  Todo ha sido inventado antes que t√∫, no recurras a bailar con panderetas y otros experimentos para resolver problemas con c√≥digo heredado. <br><br>  2. <b>El c√≥digo es est√°ndar.</b>  Sin un solo est√°ndar, cada desarrollador escribir√° a su manera.  El "estilo de autor" contribuir√° al caos y aumentar√° a√∫n m√°s la basura del c√≥digo. <br><br>  3. <b>Revisi√≥n del c√≥digo.</b>  No solo una presencia del c√≥digo est√°ndar.  Tambi√©n es necesario que el equipo sea responsable de verificarlo.  De lo contrario, todo volver√° a la normalidad, es decir, al nivel del c√≥digo anterior. <br><br>  4. <b>Analizadores de c√≥digo est√°tico, detector de mensajes PHP, etc. (en lugar de mil libros)</b> .  Estas y otras t√©cnicas autom√°ticas ser√°n necesarias para acelerar el proceso, en particular con el mismo c√≥digo de revisi√≥n. <br><br>  5. <b>Intentamos microservicios.</b>  Por separado, tambi√©n puede haber m√≥dulos o bibliotecas.  ¬øPor qu√© microservicios?  Su ventaja es aislar la l√≥gica tanto como sea posible y limitarla a una API espec√≠fica.  La ventaja de este √∫ltimo es que la API es una entidad m√°s monol√≠tica en comparaci√≥n con el "adaptador en el c√≥digo que se puede arreglar".  Sin embargo, la API tiene un inconveniente en forma de costos de red adicionales. <cut></cut><br><br>  6. <b>Arquitectura de la base de datos, fuentes de datos.</b>  Es la base de datos que considero el primer cuello de botella de cualquier Legacy.  Pero cada uno dise√±a como quiere, e incluso en SQL, puede encontrar fallas desenfocadas.  Aqu√≠ hay algunos consejos para trabajar con la nueva base de datos: <br><br><ul><li>  <i>No jodas nada, sed de todo.</i>  Si desea cambiar la antigua estructura de datos incorrecta a un nuevo formato de datos, m√°s r√°pido y m√°s productivo, puede hacerlo de dos maneras.  El primero es poner una nueva base, eliminar por completo la anterior, y pase lo que pase.  El segundo: en el caso de un legado duro, introduzca un nuevo formato en paralelo.  Hablando en sentido figurado, plantar uno nuevo cerca de un √°rbol viejo.  ¬øPor qu√© la segunda forma est√° justificada y es m√°s prometedora?  Debido a que todo lo nuevo funcionar√° de manera eficiente, y si surgen problemas durante la implementaci√≥n o en la etapa de integraci√≥n, simplemente puede revertir el c√≥digo, y no hay necesidad de revertir todas las migraciones de bases de datos complejas. </li><li>  <i>Se crea una nueva base de datos en la estructura correcta.</i>  Al crear un nuevo recurso, es importante controlar los lugares en los que escribimos la nueva estructura.  Paralelamente, es necesario crear soporte para la estructura anterior, ya que no es pr√°ctico deshacerse de ella por completo.  Es decir, seguimos escribiendo material nuevo y, al mismo tiempo, apoyamos la plantilla anterior, en la que traducimos todo lo nuevo y, por lo tanto, permitimos que la antigua tambi√©n funcione, como si fuera la antigua, pero apoyando la nueva estructura. </li><li>  <i>Controlamos toda la grabaci√≥n.</i>  No perdemos los detalles del campo de atenci√≥n para garantizar el soporte de la base de datos. </li></ul><br>  7. ¬ø <b>Pero SQL?</b>  Si desde un punto de vista arquitect√≥nico puede operar con entidades, opere.  El concepto de algo definido y finito lo ayudar√° a no crear relaciones innecesarias y duplicadas. <cut></cut><br><br>  8. <b>Decoradores, adaptadores, p√∫as ...</b> Estos patrones son uno de los principales para integrar el nuevo c√≥digo en el antiguo legado. <br><br>  9. <b>Plan B, o plan de reversi√≥n para la integraci√≥n.</b>  Muchos cometen el error de olvidarlo.  Es vital en la situaci√≥n "cuando algo sale mal" cuando se vierte material nuevo.  Es decir, tan pronto como comencemos a construir arquitectura, ya en esta etapa deber√≠amos entender c√≥mo la revertiremos en caso de un error. <br><br>  10. <b>Un nuevo c√≥digo sin pruebas (muelles) se convierte en un legado en una semana.</b>  No importa cu√°n hermoso sea su c√≥digo, sin documentaci√≥n en una semana estar√° en el estado "heredado", debido a su incomprensibilidad. <br><br>  11. <b>Pruebas.</b>  Si las pruebas unitarias son demasiado caras, entonces usamos pruebas de humo, funcionales y de integraci√≥n.  ¬øQu√© tan realista es vender pruebas unitarias a un negocio con salsa "para hacer un trabajo hermoso?"  En nuestras realidades, esto es m√°s bien una rareza que un patr√≥n.  Si por alguna raz√≥n no funciona con "unidades", entonces recurrimos a las pruebas de humo, funcionales o de integraci√≥n, y tambi√©n no olvidamos que podemos delegar la tarea, por ejemplo, a un probador manual. <br><br><h3>  En lugar de un ep√≠logo </h3><br>  Lo m√°s importante en esta historia es hacer el trabajo y no dejar atr√°s el legado de 6 etapas problem√°ticas (enumeradas en orden de simple a m√°s complejo): <br><br><ul><li>  Sin documentaci√≥n t√©cnica </li><li>  Sin documentaci√≥n comercial </li><li>  No hay nadie que haya desarrollado esto. </li><li>  No sabemos qu√© debe recibir el usuario. </li><li>  M√°s de 200 usos de cada funci√≥n y se llaman getA () </li><li>  No hay nadie a quien le gustar√≠a / podr√≠a desarrollar esto. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es431562/">https://habr.com/ru/post/es431562/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es431550/index.html">Moldeo por inyecci√≥n de pel√≠cula (IMD): c√≥mo funciona</a></li>
<li><a href="../es431554/index.html">Facebook como contador de un viejo medidor el√©ctrico</a></li>
<li><a href="../es431556/index.html">Sidenis sobre trabajar con corporaciones de seguros, entrenamiento √°gil y tecnolog√≠as prohibidas</a></li>
<li><a href="../es431558/index.html">Si inventar un lenguaje de programaci√≥n del siglo XXI</a></li>
<li><a href="../es431560/index.html">Acceso a redes de se√±alizaci√≥n SS7 a trav√©s del subsistema de radio: ahora es posible</a></li>
<li><a href="../es431564/index.html">El mayor error en la historia de la f√≠sica.</a></li>
<li><a href="../es431566/index.html">Aceler√≥metros y giroscopios MEMS: comprensi√≥n de las especificaciones</a></li>
<li><a href="../es431568/index.html">Fintech digest: pago por tel√©fono, cajeros autom√°ticos atacan de nuevo, institucionalizaci√≥n de la criptosfera</a></li>
<li><a href="../es431570/index.html">Estudio de seguridad de pago de estacionamiento</a></li>
<li><a href="../es431572/index.html">C√≥mo escribir requisitos funcionales</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>