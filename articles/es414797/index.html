<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ö üò¶ üíî C√≥mo creamos l√≠neas abiertas en Bitrix24 üë≤üèº üò∫ üë©üèª‚Äçüé®</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoy en d√≠a, los usuarios no quieren comunicarse con las empresas por correo electr√≥nico y tel√©fono, sino a trav√©s de sus mensajeros instant√°neos favor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>C√≥mo creamos l√≠neas abiertas en Bitrix24</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/bitrix/blog/414797/">  Hoy en d√≠a, los usuarios no quieren comunicarse con las empresas por correo electr√≥nico y tel√©fono, sino a trav√©s de sus mensajeros instant√°neos favoritos y cuentas de redes sociales. <br><br>  En respuesta, las redes sociales y los mensajeros instant√°neos comenzaron a introducir nuevas funcionalidades.  VKontakte y Facebook lanzaron mensajes privados para grupos y p√°ginas p√∫blicas. <br><br>  Telegram con sus canales y bots se ha convertido en una plataforma para publicar e interactuar con la audiencia.  En Viber, han aparecido cuentas p√∫blicas. <br><br>  Para obtener el m√°ximo beneficio, las empresas deben utilizar todas las capacidades de todas las plataformas sociales. <br><br>  As√≠ naci√≥ Open Lines, una nueva herramienta para la interacci√≥n de los clientes de Bitrix24 con los usuarios finales. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/703/824/144/70382414416e170d5519600c0ee6cc58.png"><br><a name="habracut"></a><br>  El flujo de trabajo de Open Lines es sencillo: <br><br><ol><li>  Recibimos todos los mensajes de los usuarios de mensajeros y redes sociales. </li><li>  Los enrutamos utilizando el mensajero incorporado "Bitrix24".  Distribuimos por operadores </li><li>  Los clientes responden a los mensajes y enviamos las respuestas a los gerentes de las empresas que trabajan en Bitrix24 </li></ol><br>  La principal tarea de desarrollo en este proyecto es simplificar la conexi√≥n de los canales de comunicaci√≥n tanto como sea posible.  Para que cualquier gerente promedio pueda hacer esto.  Para hacer esto, tuve que negociar con los desarrolladores de todas las redes sociales integrables y mensajer√≠a instant√°nea: todo es oficial, sin trucos. <br><br>  Y para garantizar un funcionamiento estable en la nube y las versiones en caja de Bitrix24, hemos creado un servidor de conector centralizado.  Procesa todos los flujos de informaci√≥n. <br><br><h2>  VKontakte </h2><br>  El siguiente paso lo dimos en un dueto cercano con los desarrolladores de VKontakte.  Logramos construir el esquema √≥ptimo para trabajar con el servicio; ahora hicimos un mont√≥n de acciones t√©cnicas para que los usuarios se conectaran. <br><br>  Ahora esta API VKontakte puede usar otros servicios. <br><br>  Aspecto de la conexi√≥n Open Lines para un usuario normal: <br><br><ul><li>  Inicie sesi√≥n en VK. </li><li>  En la secci√≥n de conexi√≥n, seleccione el grupo deseado. </li><li>  Confirmar </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/87c/bbb/e8b/87cbbbe8b671c848012b7bcd48b05c9e.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c29/31b/fcb/c2931bfcb0c36553963f5e75d2427ad0.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/b88/341/b78/b88341b78a35dc771280fbb6d8fbba43.png"><br><br>  Parece simple, pero solo porque escondimos toda la "cocina" debajo del cap√≥, alrededor de diez operaciones, junto con solicitudes de diferentes llaves. <br><br><h2>  Skype </h2><br>  Pero con Microsoft fue dif√≠cil.  Desafortunadamente, est√°n muy enfocados en la gente de TI de la "vieja escuela".  Conectarse a su marco de bot result√≥ ser dif√≠cil.  Ahora para esto necesitas pasar por una b√∫squeda de terror: <br><br><ul><li>  Instala la aplicaci√≥n. </li><li>  Crea una cuenta. </li><li>  En Skype, toma una clave. </li><li>  En Bitrix 24, otro. </li><li>  Para conectar </li></ul><br><h2>  Viber </h2><br>  Hicimos esta integraci√≥n una de las primeras.  Nos comunicamos constantemente con los desarrolladores del messenger.  Y en general, mantuvieron la mano en el pulso.  Ahora Open Lines se puede conectar desde Bitrix24 o desde la aplicaci√≥n m√≥vil Viber. <br><br><h2>  Telegrama </h2><br>  Telegram tiene una API simple: la conexi√≥n es simple.  Y a pesar de todas las cerraduras, ahora todo funciona. <br><br><h2>  Instagram </h2><br>  La integraci√≥n con Instagram es una de las m√°s populares entre nuestros clientes.  Pero debido al esc√°ndalo con la difusi√≥n de datos personales, Instagram redujo en gran medida las capacidades de la API. <br><br>  Tenemos que "entrevistarlo" y determinar nuevos mensajes cada 15 minutos por nuestra cuenta.  Adem√°s, la API le permite recibir no los mensajes en s√≠, sino solo comentarios en las publicaciones.  Tambi√©n hay un l√≠mite en el n√∫mero de respuestas por hora. <br><br>  Los sistemas externos son organismos vivos en los que algo cambia constantemente.  En la API de redes sociales y mensajer√≠a instant√°nea se realizan algunos cambios, a menudo hay algunos errores del lado "otro". <br><br>  Un ejemplo  VKontakte rompi√≥ la codificaci√≥n en los nombres de los productos, resolvieron este problema en un a√±o.  Instagram simplemente no advirti√≥ a nadie acerca de deshabilitar una serie de funciones de API: descubrimos que algunas funciones dejaron de funcionar.  Tuvimos que buscar soluciones en modo de emergencia. <br><br>  Despu√©s de una integraci√≥n exitosa de la red social o messenger, no puede relajarse.  Constantemente tenemos que controlar la correcci√≥n del procesamiento de los mensajes entrantes. <br><br><h2>  Servidor de conector </h2><br>  La arquitectura Open Lines se basa en un servidor de conector.  Este es un punto de entrada √∫nico en el esquema de mensajer√≠a entre el mensajero interno de Bitrix24 y los mensajeros externos y las redes sociales. <br><br>  Hay tres tipos de canales entrantes en l√≠neas abiertas: <br><br><ul><li>  Externos que funcionan a trav√©s del servidor de colas. </li><li>  Chat en vivo que se ejecuta en el portal del cliente.  Tomamos el c√≥digo del widget del portal del cliente.  Y en este caso no se habla de la no entrega de mensajes: si el portal est√° "mintiendo", el widget de chat simplemente no se mostrar√°. </li><li>  Red: un canal que le permite crear una "l√≠nea abierta" y encontrar entre otros portales Bitrix24, incluidos los de caja.  Esto es especialmente cierto para nuestros socios que desean organizar chats de soporte para sus empresas clientes.  Dichos chats funcionan a trav√©s de la plataforma de bot Bitrix24 y no utilizan el servidor de conector; todas las operaciones tienen lugar dentro de nuestra plataforma. </li></ul><br>  Hay un matiz importante en todas las l√≠neas abiertas y conectores de conexi√≥n.  Se supone que el cliente siempre es el primero en tomar la iniciativa.  Solo podemos responder a los mensajes de los usuarios.  Pero no los escribas primero. <br><br>  El servidor est√° en la nube y est√° disponible 24/7.  Acepta mensajes de usuario sin feriados y fines de semana.  Para un cliente con la versi√≥n en caja de Bitrix24, el portal puede no estar disponible temporalmente: el servidor se ha bloqueado o hay problemas con Internet.  En tales casos, los mensajes de los usuarios podr√≠an perderse. <br><br>  El servidor del conector en la nube resuelve este problema. <br><br>  Primero, enruta los mensajes directamente a los portales de destino.  Si un portal no est√° disponible, el servidor del conector acumula mensajes para este portal durante el d√≠a.  Y tratando de entregarlos al portal. <br><br>  Calculamos que 24 horas son suficientes para solucionar cualquier problema y reiniciar el portal de la versi√≥n en caja.  Hicimos un fuerte √©nfasis en el hecho de que el orden de los mensajes no cambia.  Todo el contenido se entregar√° en el orden exacto en que se escribi√≥.  Mensajes personalizados, aunque con retraso, pero ser√°n entregados. <br><br>  Todos los sistemas externos tienen sus propios formatos de mensaje, con sus propios conjuntos de datos.  En alg√∫n lugar puedes intercambiar emojis, im√°genes y otros archivos.  Y en alg√∫n lugar, solo el texto est√° disponible con un conjunto muy limitado de caracter√≠sticas. <br><br>  Servidor de conector: <br><br><ul><li>  Convierte todos los mensajes entrantes a un formato universal que los portales entiendan. </li><li>  Cifra los datos y los firma con una clave de licencia. </li><li>  Los env√≠a a portales. </li></ul><br>  El cifrado es necesario no solo para proteger la correspondencia en s√≠, sino tambi√©n para confirmar la autenticidad de las partes. <br><br>  Despu√©s de unificar el formato del mensaje, se ponen en cola.  Desde all√≠ se dispersan a los destinatarios. <br><br>  Las redes sociales pueden generar mensajes con una frecuencia impresionante, pero no todos los portales de clientes pueden presumir de un hardware potente.  Se pueden realizar otras tareas en paralelo en la misma m√°quina. <br><br>  Y si los mensajes van a "eje", existe la posibilidad de duplicaci√≥n de sesiones.  Para evitar que esto suceda, los mensajes se env√≠an a cada portal en una sola secuencia, en paquetes y con un ligero retraso. <br><br>  Ahora el turno gira en el servidor del conector, pero ya tenemos un servidor escalable separado.  Admite colas de varios tipos: <br><br><ol><li>  Paralelo en m√∫ltiples hilos. </li><li>  Secuencial en un hilo. </li></ol><br>  La entrega puede ser: <br><br><ol><li>  Garantizado  Muchos intentos. </li><li>  Injustificado  Un intento </li></ol><br>  Pronto transferiremos a este servidor los conectores de redes sociales, plataformas bot y mensajer√≠a instant√°nea.  ¬°Hurra! <br><br><h2>  Configurar y procesar mensajes </h2><br>  Intentamos hacer que la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conexi√≥n y configuraci√≥n de</a> Open Lines sea lo m√°s simple posible. <br><br>  Bitrix24 es utilizado por una amplia variedad de empresas, desde grandes representantes del negocio de TI hasta empresarios individuales que venden autopartes.  Es a√∫n m√°s f√°cil para un administrador de TI hacer unos pocos clics.  Y no estudie la documentaci√≥n, registre claves y configuraciones. <br><br>  En "L√≠neas abiertas" hay una serie de configuraciones para la cola del operador, las horas de trabajo, el trabajo con CRM, varios rastreadores de chat y formularios. <br><br>  El sistema tiene en cuenta si la jornada laboral comenz√≥ con un operador en particular, si est√° en l√≠nea o sin conexi√≥n, y una serie de otros par√°metros. <br><br>  Para procesar mensajes, los operadores usan la aplicaci√≥n Bitrix24 o el messenger incorporado.  Existen herramientas de gesti√≥n adicionales: aceptar, omitir, rechazar, completar. <br><br>  Despu√©s de completar la correspondencia con el usuario, el sistema puede pedirle autom√°ticamente que califique. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es414797/">https://habr.com/ru/post/es414797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es414785/index.html">Visualizaci√≥n de datos con Angular y D3</a></li>
<li><a href="../es414787/index.html">El nuevo Android RAT usa el protocolo Telegram</a></li>
<li><a href="../es414789/index.html">Tesla Model S est√° encendido nuevamente, y el sabotaje intencional [seg√∫n Elon Mask] se revela en el taller de ensamblaje de Model 3</a></li>
<li><a href="../es414791/index.html">Seminario "Infraestructura virtual para desarrolladores: oportunidades, aplicaciones y servicios", 28 de junio, San Petersburgo</a></li>
<li><a href="../es414793/index.html">¬øC√≥mo funcionan los canales de pago y la red Lightning en Bitcoin?</a></li>
<li><a href="../es414799/index.html">LLTR Parte 0: detecci√≥n autom√°tica de topolog√≠a de red y conmutadores no administrados. Misi√≥n imposible?</a></li>
<li><a href="../es414801/index.html">Moscow Vue.js Meetup # 2 en Mail.Ru Group</a></li>
<li><a href="../es414803/index.html">C√≥mo vimos los pagos de IoT en un hackathon en Hong Kong</a></li>
<li><a href="../es414805/index.html">Webinar abierto "M√©todos alternativos de reclutamiento"</a></li>
<li><a href="../es414809/index.html">Swift 4.1: por que Apple renombr√≥ flatMap a compactMap</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>