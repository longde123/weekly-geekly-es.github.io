<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëßüèΩ ü§∂üèø üåá Tes Integrasi Flutter - Mudah ‚§¥Ô∏è üé° üìç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya pikir banyak orang sudah terbiasa dengan Flutter dan, setidaknya untuk kepentingan, mereka memulai aplikasi sederhana di atasnya. Sudah waktunya ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Tes Integrasi Flutter - Mudah</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483468/"><p>  Saya pikir banyak orang sudah terbiasa dengan Flutter dan, setidaknya untuk kepentingan, mereka memulai aplikasi sederhana di atasnya.  Sudah waktunya untuk memastikan bahwa semuanya berfungsi sesuai kebutuhan, dan tes integrasi akan membantu kami dalam hal ini. <br><img src="https://habrastorage.org/webt/rc/uh/yo/rcuhyopuvni8ghulnrotc1hfiru.png"></p><a name="habracut"></a><br><p>  Tes integrasi pada Flutter ditulis menggunakan Flutter Driver, di mana ada <a href="https://flutter.dev/docs/cookbook/testing/integration/introduction" rel="nofollow">tutorial yang sederhana dan mudah dipahami di situs web resmi</a> .  Dalam strukturnya, tes semacam itu mirip dengan <a href="https://developer.android.com/training/testing/espresso" rel="nofollow">Espresso</a> dari dunia Android.  Pertama, Anda perlu menemukan elemen UI di layar: </p><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder button = find.byValueKey(<span class="hljs-string"><span class="hljs-string">"button"</span></span>);</code> </pre> <br><p>  kemudian lakukan beberapa tindakan dengan mereka: </p><br><pre> <code class="java hljs">driver = await FlutterDriver.connect(); ... await driver.tap(button);</code> </pre> <br><p>  dan verifikasi bahwa elemen UI yang diperlukan dalam keadaan yang diinginkan: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder text = find.byValueKey(<span class="hljs-string"><span class="hljs-string">"text"</span></span>); expect(await driver.getText(text), <span class="hljs-string"><span class="hljs-string">"some text"</span></span>);</code> </pre> <br><p>  Dengan contoh sederhana, tentu saja, semuanya terlihat elementer.  Tetapi dengan pertumbuhan aplikasi yang sedang diuji dan peningkatan jumlah tes, saya tidak ingin menduplikasi pencarian elemen UI sebelum setiap tes.  Selain itu, Anda perlu menyusun elemen-elemen UI ini, karena mungkin ada banyak layar.  Untuk melakukan ini, buat tes menulis lebih nyaman. </p><br><h2 id="screen-objects">  Objek layar </h2><br><p>  Di Android ( <a href="https://github.com/agoda-com/Kakao" rel="nofollow">Kakao</a> ), masalah ini diselesaikan dengan mengelompokkan elemen UI dari setiap layar ke dalam Layar (Halaman-Objek).  Pendekatan serupa dapat diterapkan di sini, dengan pengecualian di Flutter, untuk melakukan tindakan dengan elemen UI, Anda tidak hanya perlu <code>Finder</code> (untuk mencari elemen UI), tetapi juga <code>FlutterDriver</code> (untuk melakukan suatu tindakan), jadi Anda perlu menyimpan tautan ke <code>FlutterDriver</code> di <code>Screen</code> . </p><br><p>  Untuk mendefinisikan setiap elemen UI, kami menambahkan kelas <a href="" rel="nofollow"><code>DWidget</code></a> (D - dari kata Dart dalam kasus ini).  Untuk membuat <code>DWidget</code> memerlukan <code>FlutterDriver</code> , yang tindakannya akan dilakukan pada elemen UI ini, serta <code>ValueKey</code> , yang bertepatan dengan <code>ValueKey</code> Flutter dari widget dari aplikasi yang ingin kami berinteraksi: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder _finder; DWidget(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._driver, dynamic valueKey) : _finder = find.byValueKey(valueKey); ...</code> </pre> <br><p>  <code>find.byValueKey(‚Ä¶)</code> ketika secara manual membuat setiap <code>DWidget</code> nyaman, oleh karena itu lebih baik meneruskan nilai <code>ValueKey</code> ke <code>ValueKey</code> , dan <code>DWidget</code> itu sendiri akan mendapatkan <code>SerializableFinder</code> diinginkan.  Juga tidak terlalu nyaman untuk melewatkan <code>FlutterDriver</code> secara manual saat membuat setiap <code>DWidget</code> , sehingga Anda dapat menyimpan <code>FlutterDriver</code> di <a href="" rel="nofollow"><code>BaseScreen</code></a> dan mentransfernya ke <code>DWidget</code> , dan menambahkan metode baru untuk <code>BaseScreen</code> untuk membuat <code>BaseScreen</code> : </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; BaseScreen(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._driver); <span class="hljs-function"><span class="hljs-function">DWidget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dWidget</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dynamic key)</span></span></span><span class="hljs-function"> </span></span>=&gt; DWidget(_driver, key); ...</code> </pre> <br><p>  Dengan demikian, membuat kelas Layar dan memasukkan elemen UI di dalamnya akan lebih mudah: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ MainScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get button =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'button'</span></span>); DWidget get textField =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'text_field'</span></span>); ... }</code> </pre> <br><h2 id="izbavlyaemsya-ot-await">  Menyingkirkan <code>await</code> </h2><br><p>  Hal lain yang tidak terlalu nyaman ketika menulis tes dengan <code>FlutterDriver</code> adalah kebutuhan untuk menambahkan <code>await</code> sebelum setiap tindakan: </p><br><pre> <code class="java hljs">await driver.tap(button); await driver.scrollUntilVisible(list, checkBox); await driver.tap(checkBox); await driver.tap(text); await driver.enterText(<span class="hljs-string"><span class="hljs-string">"some text"</span></span>);</code> </pre> <br><p>  Melupakan <code>await</code> itu mudah, dan tanpa itu, tes tidak akan berfungsi dengan benar, karena metode <code>driver</code> mengembalikan <code>Future&lt;void&gt;</code> dan ketika mereka dipanggil tanpa <code>await</code> dieksekusi sampai yang pertama <code>await</code> di dalam metode, dan sisa dari metode ini "ditunda sampai nanti". </p><br><p>  Anda dapat <a href="" rel="nofollow"><code>TestAction</code></a> dengan membuat <a href="" rel="nofollow"><code>TestAction</code></a> yang akan ‚Äúmembungkus‚Äù <code>Future</code> sehingga kami dapat menunggu sampai satu tindakan selesai sebelum melanjutkan ke yang berikutnya: </p><br><pre> <code class="java hljs">typedef TestAction = <span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>;</code> </pre> <br><p>  (pada dasarnya, <code>TestAction</code> adalah fungsi apa pun (atau lambda) yang mengembalikan <code>Future&lt;void&gt;</code> ) </p><br><p>  Sekarang Anda dapat dengan mudah menjalankan urutan <code>TestAction</code> tanpa harus menunggu: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Iterable&lt;TestAction&gt; actions)</span></span></span><span class="hljs-function"> async </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">final</span></span> action in actions) { <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">action</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; } }</code> </pre> <br><h2 id="ispolzuem-testaction-v-dwidget">  Menggunakan <code>TestAction</code> dalam <code>DWidget</code> </h2><br><p>  <code>DWidget</code> digunakan untuk berinteraksi dengan elemen UI, dan akan sangat nyaman jika tindakan ini adalah <code>TestAction</code> sehingga mereka dapat digunakan dalam metode <code>runTestAction</code> .  Untuk melakukan ini, kelas <code>DWidget</code> akan memiliki metode tindakan: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DWidget</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> FlutterDriver _driver; <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SerializableFinder _finder; ... <span class="hljs-function"><span class="hljs-function">TestAction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">({Duration timeout})</span></span></span><span class="hljs-function"> </span></span>=&gt; () =&gt; _driver.tap(_finder, timeout: timeout); <span class="hljs-function"><span class="hljs-function">TestAction </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String text, {Duration timeout})</span></span></span><span class="hljs-function"> </span></span>=&gt; () async { await _driver.tap(_finder, timeout: timeout); await _driver.enterText(text ?? <span class="hljs-string"><span class="hljs-string">""</span></span>, timeout: timeout); }; ... }</code> </pre> <br><p>  Sekarang Anda dapat menulis tes sebagai berikut: </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ MainScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get field_1 =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'field_1'</span></span>); DWidget get field_2 =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'field_2'</span></span>); <span class="hljs-function"><span class="hljs-function">DWidget </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">field2Variant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>=&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'variant_$i'</span></span>); DWidget get result =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">'result'</span></span>); } ‚Ä¶ <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> mainScreen = MainScreen(driver); <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ mainScreen.result.hasText(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, mainScreen.field_1.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"3"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, mainScreen.field_2.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, mainScreen.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">field2Variant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">, mainScreen.result.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 5"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, ])</span></span>;</code> </pre> <br><p>  Jika Anda perlu melakukan beberapa tindakan di <code>runTestActions</code> yang tidak terkait dengan <code>DWidget</code> , maka Anda hanya perlu membuat lambda yang mengembalikan <code>Future&lt;void&gt;</code> : </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ mainScreen.result.hasText(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"summa = 0"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>=&gt; driver.requestData(<span class="hljs-string"><span class="hljs-string">"some_message"</span></span>), () async =&gt; print(<span class="hljs-string"><span class="hljs-string">"some_text"</span></span>), mainScreen.field_1.setText(<span class="hljs-string"><span class="hljs-string">"3"</span></span>), ]);</code> </pre> <br><h2 id="flutterdriverhelper">  FlutterDriverHelper </h2><br><p>  <code>FlutterDriver</code> memiliki beberapa metode untuk berinteraksi dengan elemen UI (menekan, menerima dan memasukkan teks, menggulir, dll.) Dan untuk metode ini <code>DWidget</code> memiliki metode terkait yang mengembalikan <code>TestAction</code> . </p><br><p>  Untuk kenyamanan, semua kode yang dijelaskan dalam artikel ini diterbitkan sebagai pustaka <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow">FlutterDriverHelper di pub.dev</a> . </p><br><p>  Untuk menggulir daftar di mana elemen dibuat secara dinamis (misalnya, <code>ListView.builder</code> ), <code>FlutterDriver</code> memiliki metode <code>scrollUntilVisible</code> : </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">Future&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrollUntilVisible</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( SerializableFinder scrollable, SerializableFinder item, { </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> alignment = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dxScroll = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dyScroll = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Duration timeout, })</span></span></span><span class="hljs-function"> async </span></span>{ ... }</code> </pre> <br><p>  Metode ini menggulir widget yang dapat digulir ke arah yang ditentukan hingga widget <code>item</code> muncul di layar (atau hingga waktu <code>timeout</code> ).  Agar tidak meneruskan <code>scrollable</code> pada setiap scroll, kelas DScrollItem ditambahkan, yang mewarisi <code>DWidget</code> dan mewakili item daftar.  Ini berisi tautan ke <code>scrollable</code> , jadi ketika menggulirnya hanya tinggal menentukan <code>dyScroll</code> atau <code>dxScroll</code> : </p><br><pre> <code class="java hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SecondScreen</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseScreen</span></span></span><span class="hljs-class"> </span></span>{ SecondScreen(FlutterDriver driver) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(driver); DWidget get list =&gt; dWidget(<span class="hljs-string"><span class="hljs-string">"list"</span></span>); <span class="hljs-function"><span class="hljs-function">DScrollItem </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">item</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index)</span></span></span><span class="hljs-function"> </span></span>=&gt; dScrollItem(<span class="hljs-string"><span class="hljs-string">'item_$index'</span></span>, list); } ... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> secondScreen = SecondScreen(driver); <span class="hljs-function"><span class="hljs-function">await </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">runTestActions</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">([ secondScreen.item(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">42</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scrollUntilVisible</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dyScroll: </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">-300</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">, ... ])</span></span>;</code> </pre> <br><p>  Selama pengujian, Anda dapat mengambil tangkapan layar aplikasi, dan <code>FlutterDriverHelper</code> memiliki <a href="" rel="nofollow"><code>Screenshoter</code></a> yang menyimpan tangkapan layar ke folder kanan dengan waktu saat ini dan dapat bekerja dengan <code>TestAction</code> . </p><br><h2 id="drugie-problemy-i-ih-resheniya">  Masalah lain dan solusinya </h2><br><ul><li>  Saya tidak dapat menemukan cara standar untuk mengklik tombol pada dialog waktu / tanggal - Saya harus menggunakan <a href="" rel="nofollow"><code>TestHooks</code></a> .  <code>TestHooks</code> juga dapat berguna untuk mengubah waktu / tanggal saat ini selama tes. </li><li>  Di daftar dropdown untuk <code>DropdownButtonFormField</code> Anda perlu menentukan <code>key</code> bukan untuk <code>DropdownMenuItem</code> , tetapi untuk <code>child</code> <code>DropdownMenuItem</code> ini, jika tidak <code>Flutter Driver</code> tidak akan dapat menemukannya.  Selain itu, menggulir dalam daftar drop-down belum berfungsi ( <a href="https://github.com/flutter/flutter/issues/37903" rel="nofollow">Masalah di github.com</a> ). </li><li>  metode <code>FlutterDriver.getCenter</code> mengembalikan <code>Future&lt;DriverOffset&gt;</code> , tetapi <code>DriverOffset</code> bukan bagian dari API publik ( <a href="https://github.com/flutter/flutter/issues/44367" rel="nofollow">Masalah pada github.com</a> ) </li><li>  Ada beberapa hal yang lebih bermasalah dan tidak jelas yang sudah ada.  Anda dapat membacanya di <a href="https://medium.com/flutter-community/blazingly-fast-flutter-driver-tests-5e375c833aa" rel="nofollow">artikel yang luar biasa</a> .  Yang sangat berguna adalah kemampuan untuk menjalankan tes pada desktop dan mengatur ulang keadaan aplikasi sebelum dimulainya setiap tes. </li><li>  Anda dapat menjalankan tes menggunakan Tindakan Github.  Lebih detail di <a href="https://medium.com/flutter-community/run-flutter-driver-tests-on-github-actions-13c639c7e4ab" rel="nofollow">sini</a> . </li></ul><br><h2 id="todo">  Todo </h2><br><p>  <code>FlutterDriverHelper</code> Masa Depan untuk <code>FlutterDriverHelper</code> meliputi: </p><br><ul><li>  gulir otomatis ke item daftar yang diinginkan jika pada saat mengaksesnya tidak terlihat di layar (seperti yang dilakukan di perpustakaan <a href="https://github.com/KasperskyLab/Kaspresso" rel="nofollow">Kaspresso</a> untuk Android).  Jika memungkinkan, maka bahkan di kedua arah. </li><li>  pencegat untuk tindakan yang dilakukan dengan <code>Dwidget</code> atau <code>DscrollItem</code> . </li></ul><br><p>  <em>Komentar dan umpan balik konstruktif dipersilakan.</em> </p><br><p>  <strong>Pembaruan (15/01/2020)</strong> : dalam versi <a href="https://pub.dev/packages/flutter_driver_helper" rel="nofollow">1.1.0</a> <code>TestAction</code> menjadi kelas, dengan bidang <code>String name</code> .  Dan terima kasih untuk ini, pencatatan semua tindakan yang dilakukan dalam metode <code>runTestActions</code> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id483468/">https://habr.com/ru/post/id483468/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id483454/index.html">Beralih dari Mercurial ke GIT di Atlassian Bitbucket dengan menyimpan file dalam Cyrillic</a></li>
<li><a href="../id483458/index.html">Asisten Basis Data GreenPig</a></li>
<li><a href="../id483460/index.html">SQL HowTo: membangun rantai menggunakan fungsi jendela</a></li>
<li><a href="../id483462/index.html">Diam dan ambil uangku</a></li>
<li><a href="../id483466/index.html">Memperkenalkan metode backpropagation</a></li>
<li><a href="../id483470/index.html">Lay tile secara efisien (Pro CSS, SVG, pola, dan lainnya)</a></li>
<li><a href="../id483472/index.html">Hapus semua: cara menghapus data dan mengembalikan SSD NVMe ke pengaturan pabrik</a></li>
<li><a href="../id483476/index.html">Moral transportasi robot: masalah troli, risiko dan konsekuensi</a></li>
<li><a href="../id483478/index.html">Matahari, angin, dan air ver 0.1</a></li>
<li><a href="../id483480/index.html">Teka-teki silang "Merasa seperti analis SOC"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>