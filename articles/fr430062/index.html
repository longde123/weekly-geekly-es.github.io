<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš± ğŸ¤› ğŸ”ˆ Microservices. ModÃ¨les de dÃ©veloppement et de refactoring avec des exemples Java ğŸš¶ ğŸ‘©â€â¤ï¸â€ğŸ‘¨ ğŸ‰</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Nous commenÃ§ons Ã  traduire le livre Microservices Patterns de Chris Richardson avec des exemples en Java . Cela fait six mois avant ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Microservices. ModÃ¨les de dÃ©veloppement et de refactoring avec des exemples Java</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/430062/">  Bonjour, Habr! <br><br>  Nous commenÃ§ons Ã  traduire le livre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Microservices Patterns de</a> Chris Richardson <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avec des exemples en Java</a> .  Cela fait six mois avant la premiÃ¨re en russe, mais nous aimerions vous offrir une sorte de bande-annonce - une critique lÃ©gÃ¨rement abrÃ©gÃ©e de ce livre de Ben Nadel, qui a lu la version MEAP.  La revue cite activement le texte de la version Kindle de Richardson. <br><br><img src="https://habrastorage.org/webt/uw/yl/ao/uwylaocto8zwc9s9k_roupvabha.jpeg"><br><br>  Bienvenue au chat! <br><a name="habracut"></a><br>  J'ai entendu parler de Chris Richardson lorsque j'ai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dÃ©couvert</a> sa ressource en ligne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Microservices.io</a> .  LÃ  oÃ¹, pour Ãªtre honnÃªte, il y a une quantitÃ© stupÃ©fiante d'informations - que j'ai dÃ©cidÃ© de reporter pour plus tard, car Ã  ce moment-lÃ , je ne savais pas comment l'aborder, d'autant plus que je n'avais pratiquement pas affaire Ã  des microservices.  J'aime en lire plus.  Par consÃ©quent, quand j'ai dÃ©couvert que Chris publiait le livre de l'auteur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Microservices Patterns: With Examples In Java</a> , j'ai Ã©tÃ© simplement inspirÃ©.  Ã€ tel point qu'il ne pouvait pas attendre sa sortie.  J'ai donc acquis et lu la Â«premiÃ¨re versionÂ» de Manning (MEAP).  La semaine derniÃ¨re, je viens de faire ce que j'ai Ã©tudiÃ© ce livre, et je pense que c'est une Ã©tude fascinante, pragmatique et holistique de l'approche microservice du dÃ©veloppement. <br><br>  Le livre entier est construit sous la forme de l'histoire de Mary - CTO (CTO) de Food To Go, Inc (FTGO).  L'entreprise cherche Ã  dÃ©velopper son activitÃ© en lanÃ§ant le refactoring de son ancienne application monolithique et en la transformant en architecture de microservice.  Mary se charge de ce projet, car la vitesse de dÃ©veloppement a diminuÃ©, et les patrons sont de plus en plus ennuyÃ©s que les programmeurs sous la direction de Mary ne soient pas en mesure de produire de nouvelles fonctionnalitÃ©s sous une forme assez de haute qualitÃ©. <br><br>  Bien sÃ»r, le principal problÃ¨me de Mary est ce que lâ€™on appelle Â«lâ€™enfer monolithiqueÂ» dans la terminologie de Richardson.  Alors que le monolithe est une application importante et croissante, Richardson se concentre sur un aspect plutÃ´t subtil de la migration FTGO, de sorte qu'il est plus pratique d'exposer et de transmettre tous les concepts.  En mÃªme temps, le contenu du livre est incroyablement digeste.  La plupart des considÃ©rations d'architecture sont gÃ©nÃ©ralement trop simplifiÃ©es ou trop compliquÃ©es.  Cependant, Richardson a rÃ©ussi Ã  trouver un terrain d'entente en construisant un modÃ¨le de domaine qui s'inscrit (presque) dans la tÃªte, mais est en mÃªme temps suffisamment complexe pour illustrer d'intÃ©ressants flux de tÃ¢ches interservices. <br><br>  Depuis le tout dÃ©but, j'avais hÃ¢te que Richardson soit pragmatique dans les moindres dÃ©tails.  Pas un seul aspect du livre n'est prÃ©sentÃ© comme une Â«solution miracleÂ» ou Â«la seule solutionÂ».  Partout, nous voyons un choix calculÃ©, un ensemble de compromis clairement dÃ©finis.  Par exemple, l'auteur soumet mÃªme l'idÃ©e de microservices dans cette veine: l'architecture de microservices doit toujours Ãªtre Ã©vitÃ©e, sauf dans les cas oÃ¹ cela est absolument nÃ©cessaire: <br><blockquote> Un autre dÃ©fi associÃ© Ã  l'utilisation de l'architecture de microservices est de dÃ©cider Ã  quel moment du cycle de vie de l'application commencer Ã  utiliser cette architecture.  Lors du dÃ©veloppement de la premiÃ¨re version d'une application, vous ne rencontrez souvent toujours pas les problÃ¨mes qu'une telle architecture rÃ©sout.  De plus, l'utilisation d'une architecture distribuÃ©e bien Ã©quilibrÃ©e ne fera que ralentir le dÃ©veloppement.  Un tel dilemme peut survenir dans les startups, oÃ¹ le dÃ©fi le plus important rÃ©side gÃ©nÃ©ralement dans le dÃ©veloppement rapide d'un modÃ¨le d'entreprise et de sa propre application.  Lors de l'utilisation d'une architecture de microservice, il est beaucoup plus difficile d'organiser des itÃ©rations rapides.  Le dÃ©veloppement d'une startup devrait dÃ©finitivement commencer par une application monolithique.  (Version Kindle, adresse 416) </blockquote>  Richardson considÃ¨re Ã©galement les microservices dans une perspective holistique, discutant de la dynamique de l'Ã©quipe comme un cercle de problÃ¨mes complÃ¨tement indÃ©pendant qui est construit sur la partie technologique.  Bien sÃ»r, il considÃ¨re des sujets tels que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conwayâ€™s Law</a> et Â« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Conway</a> â€™s Reverse ManeuverÂ», mais en mÃªme temps, il aborde Ã©galement le fait que les programmeurs sont des personnages pathÃ©tiques Ã©motionnels avec lesquels vous devriez Â«vendreÂ» lâ€™idÃ©e de microservices: <br><blockquote>  En passant au paradigme des microservices, vous Ãªtes obligÃ© de changer votre architecture, votre organisation et vos processus de dÃ©veloppement.  Cependant, en fin de compte, l'environnement de travail change, les conditions dans lesquelles les gens travaillent et les gens, comme nous l'avons dÃ©jÃ  mentionnÃ©, sont Ã©motionnels.  Si les Ã©motions humaines sont ignorÃ©es, l'introduction de microservices dans une organisation peut se transformer en une route escarpÃ©e.  (Version Kindle, adresse 718) </blockquote>  Les stratÃ©gies dÃ©crites par l'auteur concernent l'ensemble de l'entreprise, affectent les managers et les cadres qui n'osent peut-Ãªtre pas entamer une refactorisation d'envergure, en y prenant des ressources prÃ©cieuses, des personnes qui pourraient activement dÃ©velopper de nouvelles fonctionnalitÃ©s: <br><blockquote>  Un avantage significatif du refactoring Ã©tape par Ã©tape vers une architecture de microservices est qu'une telle stratÃ©gie commence immÃ©diatement Ã  porter ses fruits.  Ce n'est pas du tout le cas lors de la Â«refonteÂ» d'un code qui n'apporte aucun bÃ©nÃ©fice tant qu'il n'est pas complÃ¨tement terminÃ© ... <br><br>  Un autre avantage de la situation dans laquelle la valeur de la transition est acquise Ã  un stade prÃ©coce est que nous pouvons attirer le soutien des entreprises pour assurer la migration.  Un tel soutien continu est crucial, car plus la refactorisation est active, moins vous pourrez passer de temps Ã  dÃ©velopper des fonctionnalitÃ©s.  Dans certaines organisations, il est difficile de se dÃ©barrasser de la dette technique, car les tentatives prÃ©cÃ©dentes peuvent s'avÃ©rer trop ambitieuses et n'apportent pas les avantages souhaitÃ©s.  Par consÃ©quent, l'entreprise hÃ©site Ã  continuer d'investir dans le Â«nettoyageÂ».  La nature pas Ã  pas de la refactorisation dans le cas des microservices signifie qu'une Ã©quipe peut afficher trÃ¨s souvent des rÃ©sultats prÃ©cieux.  (Adresse de version Kindle 10769) </blockquote>  D'un point de vue technologique, dans le livre Â«Microservices.  ModÃ¨les de dÃ©veloppement et de refactorisation Â»ont examinÃ© un large Ã©ventail de sujets: des architectures hexagonales, des tests et de l'intÃ©gration continue aux modÃ¨les de messagerie et Ã  la crÃ©ation de systÃ¨mes observables.  Une telle couverture implique que certains sujets du livre sont traitÃ©s plus en dÃ©tail que d'autres.  Cependant, encore une fois, Richardson parvient parfaitement Ã  tout Ã©quilibrer et Ã  donner tellement de dÃ©tails afin que l'on puisse raisonnablement discuter du sujet sans dÃ©courager le lecteur. <br><br>  En fait, le contenu du livre est organisÃ© de telle maniÃ¨re que vous pouvez vous-mÃªme choisir les sujets Ã  approfondir.  Dans chaque chapitre, avant une immersion dÃ©taillÃ©e dans le sujet, une liste de TL; DR est donnÃ©e, qui Ã©numÃ¨re briÃ¨vement tous les avantages et les inconvÃ©nients.  Ainsi, vous parvenez Ã  saisir les points les plus importants du chapitre sans lire tous les mots. <br><br>  HonnÃªtement, je viens de parcourir deux chapitres sur le test des microservices et un chapitre sur le dÃ©ploiement des microservices.  Je suis sÃ»r que l'auteur a parfaitement travaillÃ© ces sujets, mais il me semblait qu'il y avait simplement plus d'informations que je ne pouvais en digÃ©rer.  Le dÃ©ploiement n'est pas une tÃ¢che quotidienne urgente pour moi.  Il a Ã©crit plusieurs tests dans sa vie. <br>  Ainsi, je voulais laisser suffisamment d'espace dans ma conscience de grotte peu claire pour y mettre le matÃ©riel de tous les autres chapitres: sur la conception orientÃ©e sujet (DDD), la communication interprocessus et la synchronisation des donnÃ©es. <br><br>  L'une des sections qui m'a particuliÃ¨rement impressionnÃ© indique quel service doit traiter les demandes d'un type spÃ©cialisÃ©, Ã  savoir: trouver des restaurants appropriÃ©s prÃ¨s de l'emplacement actuel de l'utilisateur: <br><blockquote>  Cependant, il peut Ãªtre difficile de mettre en Å“uvre mÃªme les demandes qui sont locales en termes d'un service particulier.  Cela est possible pour plusieurs raisons.  PremiÃ¨rement, car (comme dÃ©crit ci-dessous), il est parfois dÃ©raisonnable de mettre en Å“uvre une demande dans le service propriÃ©taire des donnÃ©es.  Une autre raison est que parfois la base de donnÃ©es de services (ou le modÃ¨le de donnÃ©es) ne peut pas prendre en charge efficacement la demande (version Kindle, adresse 5659) </blockquote><blockquote> ... Si, dans l'application FTGO, les informations sur les restaurants sont stockÃ©es dans [une autre] base de donnÃ©es, la mise en Å“uvre de la requÃªte <code>findAvailableRestaurant()</code> est beaucoup plus compliquÃ©e.  Une rÃ©plique des donnÃ©es du restaurant doit Ãªtre stockÃ©e sous une forme qui prend en charge les requÃªtes gÃ©ospatiales.  Par exemple, une application peut utiliser la bibliothÃ¨que d'indexation gÃ©ospatiale pour DynamoDB, oÃ¹ la table est utilisÃ©e comme index gÃ©ospatial.  Alternative: l'application peut stocker une rÃ©plique des donnÃ©es du restaurant dans un type de base de donnÃ©es complÃ¨tement diffÃ©rent.  Une situation similaire se produit lorsque nous utilisons des requÃªtes de texte avec une base de donnÃ©es pour la recherche de texte.  (Version Kindle, adresse 5675) </blockquote><blockquote>  ... Dans ce cas, il est conseillÃ© (au moins Ã  premiÃ¨re vue) que l'opÃ©ration de requÃªte soit mise en Å“uvre par le service mÃªme propriÃ©taire des donnÃ©es.  Cependant, en plus de la propriÃ©tÃ© des donnÃ©es, d'autres facteurs doivent Ãªtre pris en compte. <br><br>  Il est Ã©galement nÃ©cessaire de prendre en compte la nÃ©cessitÃ© d'une sÃ©paration des tÃ¢ches et d'Ã©viter de surcharger les services avec trop de fonctionnalitÃ©s.  Par exemple, la principale responsabilitÃ© de l'Ã©quipe qui dÃ©veloppe le service de restauration est d'aider les gÃ©rants de restaurant Ã  servir le travail de l'Ã©tablissement.  Cette tÃ¢che n'est pas du tout du plan que la mise en Å“uvre d'une demande critique pour travailler avec de grandes quantitÃ©s de donnÃ©es.  De plus, si l'Ã©quipe de dÃ©veloppement Ã©tait responsable de l'opÃ©ration <code>findAvailableRestaurants()</code> , elle aurait constamment peur d'introduire de tels changements qui pourraient empÃªcher les consommateurs de passer des commandes.  (Version Kindle, adresse 5675) </blockquote>  Ici, mon cerveau a explosÃ© un peu parce que j'ai vu pour la premiÃ¨re fois un service dont la seule fonction Ã©tait d'optimiser les donnÃ©es d'un autre service pour effectuer une tÃ¢che spÃ©cifique.  Cependant, comme le souligne Richardson, il s'agit simplement d'une abstraction plus gÃ©nÃ©ralisÃ©e de l'idÃ©e mÃªme qui sous-tend la recherche de texte intÃ©gral, par exemple dans Apache Lucene (cet outil fournit une indexation de texte intÃ©gral au-dessus d'un autre entrepÃ´t de donnÃ©es). <br><br>  Je soupÃ§onne - ou plutÃ´t, je veux l'espÃ©rer - qu'ayant vu une telle rÃ©partition des responsabilitÃ©s, le lecteur commencera Ã  tracer une nouvelle ligne entre les services.  Il ne pensera pas seulement Ã  la Â«propriÃ©tÃ© des donnÃ©esÂ», mais commencera Ã©galement Ã  prendre en compte les Â«opportunitÃ©s commercialesÂ» - c'est-Ã -dire un facteur de valeur rÃ©elle afin que la base de donnÃ©es ne semble pas Ãªtre uniquement l'endroit oÃ¹ l'Ã‰tat est stockÃ©. <br><br>  Un autre aspect mis en Ã©vidence dans cette discussion est l'importance absolue de la synchronisation et de la rÃ©plication des donnÃ©es, ainsi que de la messagerie asynchrone dans l'architecture des microservices.  Ce sujet traverse tout le livre de Richardson avec un fil rouge, peu importe de quoi ils parlent: la crÃ©ation d'un microservice Ã  partir de zÃ©ro ou la refactorisation progressive d'un monolithe en microservices (un chapitre sÃ©parÃ© est consacrÃ© Ã  ce sujet).  Il indique trÃ¨s clairement que la synchronisation est cette force de base qui permet vraiment de rÃ©aliser beaucoup de choses. <br><br>  Je pourrais mentionner beaucoup de choses intÃ©ressantes.  Qu'est-ce qui vaut, par exemple, le fait que Richardson parle correctement de l'authentification et de l'autorisation dans un systÃ¨me distribuÃ©? Je pense que ce sujet n'a pas encore Ã©tÃ© complÃ¨tement explorÃ©, pour le dire en douceur.  L'auteur explique la conception orientÃ©e sujet de la maniÃ¨re la plus accessible.  Il dÃ©montre Ã©galement que mÃªme des classes trÃ¨s simples peuvent avoir un comportement. <br><br>  Depuis plus d'un an maintenant, j'essaie de bien comprendre l'architecture des systÃ¨mes distribuÃ©s et les modÃ¨les de microservices (ce qui est particuliÃ¨rement difficile, car mon travail quotidien est liÃ© Ã  l'entretien du monolithe).  Beaucoup de textes que j'ai lus sur ces sujets sont soit excessivement superficiels, soit trop Ã©troits et en mÃªme temps approfondis.  Le livre "Microservices.  ModÃ¨les de dÃ©veloppement et de refactorisation Â»est en effet le juste milieu entre ces deux extrÃªmes.  <b>Je recommande fortement ce livre Ã  tous</b> (nos audacieux) qui essaient (y compris, jusqu'Ã  prÃ©sent sans succÃ¨s) de passer d'une architecture monolithique Ã  un systÃ¨me distribuÃ©. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr430062/">https://habr.com/ru/post/fr430062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr430048/index.html">"Il vous suffit de gÃ©nÃ©rer soigneusement l'IR LLVM." Egor Bogatov Ã  propos de Mono et .NET Core</a></li>
<li><a href="../fr430052/index.html">Pourquoi est-il important pour les dÃ©veloppeurs de matÃ©riel de rÃ©aliser des cusdev de qualitÃ©</a></li>
<li><a href="../fr430054/index.html">HolyJS 2018 Moscou: diffusion en ligne gratuite, fÃªte et rap scientifique et technologique</a></li>
<li><a href="../fr430058/index.html">Processus houlomoteurs dans les conduites hydrauliques. Les bases</a></li>
<li><a href="../fr430060/index.html">Hackspace, Denis Perevalov, Anastasia Krokhaleva - la magie de la programmation</a></li>
<li><a href="../fr430064/index.html">C ++: une session d'archÃ©ologie spontanÃ©e et pourquoi vous ne devriez pas utiliser des fonctions variables dans le style de C</a></li>
<li><a href="../fr430068/index.html">Ordre de la chrysalide</a></li>
<li><a href="../fr430070/index.html">La pile et la file d'attente sont deux mauvais paradigmes et ce qui peut Ãªtre fait Ã  ce sujet</a></li>
<li><a href="../fr430072/index.html">Swift cÃ´tÃ© serveur sous-estimÃ©: entretien avec Paul Hudson</a></li>
<li><a href="../fr430074/index.html">Comment j'ai failli attraper un virus en essayant de vendre des bottes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>