<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ”’ ğŸ” ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©ğŸ» Fitur Rendering di Metro: Exodus c raytracing ğŸ“„ ğŸ˜ ğŸ¥—</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar 
 Setelah game terakhir dari seri Metro dirilis, saya menghabiskan beberapa jam mempelajari pekerjaan internalnya dan memutuskan untuk ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fitur Rendering di Metro: Exodus c raytracing</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447194/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b6c/122/9f2/b6c1229f21aaaefc416b180a41759690.jpg" alt="gambar"></div><br><h3>  Kata Pengantar </h3><br>  Setelah game terakhir dari seri Metro dirilis, saya menghabiskan beberapa jam mempelajari pekerjaan internalnya dan memutuskan untuk berbagi sesuatu yang mungkin tampak menarik dari sudut pandang teknologi.  Saya tidak akan melakukan analisis terperinci atau mempelajari kode shaders yang dibongkar, tetapi saya akan menunjukkan keputusan tingkat tinggi yang dibuat oleh pengembang dalam proses pembuatan game. <br><br>  Saat ini, para pengembang belum berbicara tentang teknik rendering yang digunakan dalam game.  Satu-satunya sumber informasi resmi adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="noreferrer noopener">laporan GDC</a> , yang tidak dapat ditemukan di tempat lain di Internet.  Dan ini menjengkelkan, karena gim ini berjalan pada mesin berpemilik yang sangat menarik yang telah berevolusi dari gim sebelumnya dalam seri Metro.  Ini adalah salah satu game pertama yang menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">DXR</a> . <br><br>  Catatan: artikel ini bukan deskripsi lengkap dan saya akan kembali ke sana jika saya menemukan sesuatu yang layak ditambahkan.  Mungkin saya melewatkan sesuatu, karena beberapa aspek hanya muncul di tahap selanjutnya dalam permainan, atau saya hanya melihat detailnya. <br><br><h3>  Langkah pertama </h3><br>  Butuh beberapa hari untuk menemukan lingkungan yang mampu bekerja dengan game ini.  Setelah menguji beberapa versi RenderDoc dan PIX, saya memutuskan untuk mempelajari hasil penelusuran ray menggunakan Nvidia NSight.  Saya ingin belajar rendering tanpa raytracing, tetapi NSight mengizinkan saya untuk menjelajahi detail fitur ini juga, jadi saya memutuskan untuk membiarkannya.  Untuk rendering lainnya, PIX sangat cocok.  Tangkapan layar diambil menggunakan kedua aplikasi. <br><a name="habracut"></a><br>  NSight memiliki satu kelemahan - tidak mendukung penyimpanan hasil tangkapan ke file, jadi saya tidak bisa kembali ke frame yang saya pelajari. <br><br>  Pada awal pekerjaan saya, saya juga mengalami masalah lain yang tidak ada hubungannya dengan aplikasi debug bingkai: fungsi pelacakan sinar diperlukan menginstal pembaruan Windows terbaru, tetapi permainan memungkinkan mereka untuk dimasukkan dalam opsi tanpa menginstal pembaruan.  Dalam hal ini, masuknya fungsi menyebabkan game mogok saat startup.  Pengalaman GeForce juga tidak mengatakan apa-apa tentang perlunya versi Windows yang benar untuk mengaktifkan fitur-fitur ini.  Masalah ini perlu ditangani di kedua sisi. <br><br>  Demi kelengkapan, saya membuat tangkapan dari game yang berjalan dengan parameter maksimum yang mungkin, tetapi tanpa DLSS. <br><br><h3>  Analisis bingkai </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/541/f12/e34/541f12e34559d73faa7eb743915e5cdd.png"></div><br>  <i>Bingkai jadi</i> <br><br>  Analisis singkat rendering menunjukkan serangkaian fungsi yang cukup standar, dengan pengecualian penerangan global yang dilakukan oleh ray tracing (ray traced GI). <br><br>  Sebelum menampilkan gambar, skala frame sebelumnya dikurangi dalam antrian komputasi dan kecerahan rata-rata dihitung. <br><br>  Antrian grafis dimulai dengan rendering partikel distorsi (tetesan pada kamera), yang diterapkan pada tahap pasca-pemrosesan.  Kemudian lintasan pendahuluan cepat dari kedalaman menciptakan bagian dari kedalaman di depan Gbuffer;  sepertinya hanya membuat lega. <br><br>  Pass GBuffer mengisi 4 target render sesuai dengan diagram di bawah ini, dan juga melengkapi pengisian buffer dalam. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a67/9ef/332/a679ef3320584af81cc4d3c6970fecd1.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/97b/c7d/d77/97bc7dd7753e655aec4a8279851e78be.png"></div><br>  <i>1. Target dalam format RGBA8 dengan Albedo dan, mungkin, Ambient Occlusion di saluran alpha;</i>  <i>Pada beberapa permukaan terlihat sangat gelap.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ff/a5f/972/8ffa5f972989ecb5104c92cf1e56ddc0.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6e1/580/93a/6e158093ac061f9c993fc5d954d3a383.png"></div><br>  <i>2. Target dalam format RGB10A2 dengan normals dan, mungkin, topeng hamburan bawah permukaan di saluran alpha.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aed/cab/600/aedcab600ed86cab9d6fff32d005365b.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d9e/7e8/64e/d9e7e864ecc5794d64a9f0923153f673.png"></div><br>  <i>3. Target dalam format RGBA8 dengan parameter material lainnya, mungkin metalness dan roughness pada alpha channel.</i>  <i>Anehnya, saluran RGB dalam hal ini berisi data yang persis sama.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ae/aaf/aa7/2aeaafaa75ea48daa6c9671ef02024e4.png"></div><br>  <i>4. Target dalam format RG16F dengan vektor gerakan 2D.</i> <br><br>  Setelah kedalaman diisi sepenuhnya, buffer kedalaman linier dibangun dan skalanya menurun.  Semua ini dilakukan dalam compute queue.  Dalam antrian yang sama, buffer diisi dengan sesuatu yang mirip dengan pencahayaan terarah tanpa menggunakan bayangan. <br><br>  Dalam antrian grafis, GPU melacak sinar penerangan global, tetapi saya akan berbicara lebih banyak tentang hal ini di bawah ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/205/368/6b1/2053686b1cb719229dc0ccce1540e5c1.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/879/607/0ab/8796070abae27e9695fb82d6f5789375.png"></div><br>  Komputasi antrian menghitung oklusi ambien, refleksi, dan sesuatu yang mirip dengan pengenalan tepi. <br><br>  Dalam antrian grafis, peta bayangan empat tahap dirender ke dalam peta kedalaman 32-bit ukuran 6k * 6k.  Lebih lanjut tentang ini di bawah ini.  Setelah menyelesaikan peta bayangan diarahkan, resolusi kaskade ketiga untuk alasan yang tidak diketahui berkurang menjadi 768 * 768. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a85/203/3e2/a852033e230487f7be913e94ee87a7fa.png"></div><br>  Di tengah proses rendering bayangan, ada momen aneh: atlas penipu dilengkapi oleh beberapa objek sebelum mengubah bayangan lokal dari pencahayaan (tentang penipu apa yang dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> ).  Baik buffer palsu dan buffer bayangan pencahayaan lokal juga memiliki tekstur 6k * 6k. <br><br>  Setelah semua bayangan selesai, perhitungan pencahayaan dimulai.  Bagian rendering ini agak tidak bisa dipahami, karena ada banyak rendering yang melakukan beberapa tindakan misterius, dan karenanya memerlukan studi tambahan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e07/838/016/e078380165142b63cce7e340155e4aef.png"></div><br>  Rendering adegan berakhir dengan benda-benda yang terang di depan (mata, partikel).  Efek visual dirender ke dalam buffer setengah-resolusi, setelah itu mereka dikomposisi dengan objek buram menggunakan zooming. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d95/88c/66e/d9588c66ecb2dbd09b0386fc481771c1.png"></div><br>  Gambaran akhir dicapai dengan koreksi tonal dan perhitungan bloom (mengurangi dan kemudian meningkatkan resolusi frame dengan koreksi tonal).  Akhirnya, UI dirender ke dalam buffer terpisah dan, bersama dengan bloom compositing, ditumpangkan di atas layar. <br><br>  Saya tidak menemukan bagian di mana smoothing dilakukan, jadi saya akan meninggalkannya untuk nanti. <br><br><h3>  Pelacakan sinar cahaya global </h3><br>  Beberapa informasi tentang penerangan global dilakukan oleh GI yang dilacak.  Struktur percepatan ini mencakup area besar dunia game, mungkin beberapa ratus meter, sambil mempertahankan detail yang sangat tinggi di mana-mana.  Sepertinya mengalir entah bagaimana.  Adegan struktur percepatan tidak sesuai dengan adegan raster, misalnya, bangunan pada gambar di bawah ini tidak terlihat dalam bentuk raster. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e98/f99/6d9/e98f996d9c2ad589d81fb6c5abac1208.png"></div><br>  <i>Tampilan atas</i> <br><br>  Di sini kita dapat melihat empat ubin di sekitar posisi pemain.  Juga jelas adalah kurangnya geometri yang diuji pada saluran alpha.  Pohon memiliki batang, tetapi tidak ada dedaunan, tidak ada rumput, tidak ada semak. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/500/53a/089/50053a0898f262725ade46d2b5dadb88.png"></div><br>  <i>Tutup tampilan</i> <br><br>  Dalam tampilan close-up, detail dan kepadatan objek lebih baik dilihat.  Setiap objek dengan warna yang berbeda memiliki struktur akselerasi dari level yang lebih rendah.  Hanya dalam gambar ini ada beberapa ratus dari mereka. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/83e/5e8/dff/83e5e8dfff1709a0d38b1f4c5d012282.png"></div><br>  <i>Item Pemain Di Bawah Kaki</i> <br><br>  Menariknya, item pemain juga merupakan bagian dari struktur akselerasi, tetapi untuk beberapa alasan terletak di bawah kakinya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/969/c2b/203/969c2b203e8abecbd7718e061db99984.png"></div><br>  <i>Kerusakan kulit?</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/366/620/78d/36662078d0930dfb66fb3bf1d928f022.png"></div><br>  <i>Rusak menguliti lagi?</i> <br><br>  Beberapa objek dengan skinning terlihat rusak dalam struktur percepatan.  Salah satu masalah yang diamati adalah peregangan jala (di kaki anak).  Masalah lain mengarah pada fakta bahwa bagian-bagian berbeda dari karakter dengan skinning berada pada posisi yang berbeda.  Tidak ada peregangan, tetapi bagian-bagiannya terpisah satu sama lain.  Sepertinya tidak ada yang terlihat dalam pencahayaan ray-tracing global, atau setidaknya saya belum bisa melihat ini dalam permainan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/647/c7c/c2b/647c7cc2beab467af7223ed97f80fa08.png"></div><br>  <i>Sejumlah besar objek</i> <br><br>  Pada bidang yang lebih umum, Anda dapat melihat berapa banyak objek berbeda yang ada dalam struktur percepatan.  Sebagian besar dari mereka tidak akan benar-benar berkontribusi pada hasil perhitungan penerangan global.  Juga terlihat di sini bahwa tidak ada skema LOD.  Semua objek ditambahkan dengan detail lengkap.  Akan menarik untuk mengetahui apakah ini memiliki efek pada ray tracing (saya anggap ya). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/64f/11b/0ec/64f11b0ec3d0882a84503875c5a1cb20.png"></div><br>  <i>LOD ultra-tinggi, setiap skala dan sakelar sepenuhnya dimodelkan</i> <br><br>  Tangkapan layar lain menunjukkan detail besar benda bahkan jauh dari pemain.  Setiap saklar dan setiap skala dalam gambar ini dapat dibaca dengan jelas bahkan tanpa tekstur.  Tempat di mana saya memindahkan kamera untuk mengambil tangkapan layar ini terletak puluhan meter dari pemain dan menghilangkan detail ini tidak akan memperburuk kualitas gambar.  Mungkin memperbarui struktur akselerasi menggunakan LOD akan terlalu mahal, tetapi ada kemungkinan besar bahwa pembaruan ini dapat dilakukan secara tidak sinkron.  Poin ini pasti perlu ditelusuri lebih detail. <br><br><h3>  Rendering Directional Shadows </h3><br>  Bagian utama dari rendering shadow adalah sederhana dan tidak memerlukan perhatian khusus, tetapi ada beberapa poin menarik di sini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d16/016/0ea/d160160ea9d4dc571c97440f77d103a0.png"></div><br>  <i>Jerat yang pengecoran bayangannya tidak mungkin</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/369/857/cb1/369857cb17bf6baeaae52295930b4ac5.png"></div><br>  <i>Detail besar di peta bayangan</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0e0/708/9ba/0e07089ba7b63f9c055a95a8ed783f09.png"></div><br>  <i>Jerat yang tampaknya menggunakan buffer indeks yang salah</i> <br><br>  Sepertinya seperti mempercepat struktur, rendering bayangan mencakup segalanya.  Ada objek yang hampir tidak berkontribusi pada peta bayangan, tetapi mereka masih membuat.  Saya ingin tahu apakah ini terjadi karena izin, atau apakah tidak ada cara mudah di mesin untuk mengecualikan mereka? <br><br>  Ada objek yang sulit dilihat bahkan dengan bayangan di ruang layar.  Tidak perlu banyak waktu untuk membuat mereka, tetapi akan menarik untuk melihat apakah mereka dapat dihapus untuk menghemat sedikit waktu. <br><br>  Ketika memeriksa mesh, tampaknya beberapa mesh yang diberikan dalam shadow map telah merusak buffer indeks, tetapi setelah vertex shader mereka terlihat benar (hasilnya sama di PIX dan NSight).  Ini adalah contoh terbaik yang berhasil saya temukan, tetapi itu jauh dari satu-satunya.  Mungkin ini semacam posisi pengemasan khusus? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d9/079/80b/5d907980beab8411086ae95a3cd1069e.png"></div><br>  <i>Jerat tampaknya memiliki skinning yang buruk</i> <br><br>  Menguliti tampaknya menyebabkan masalah tidak hanya dalam mempercepat struktur.  Menariknya, itu tidak mengarah pada artefak yang terlihat di layar. <br><br><h2>  Bagian 2 </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/787/d1c/c6d/787d1cc6d642436ce05542678e27b807.png" alt="gambar"></div><br><h3>  Amandemen minor </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efe/177/37b/efe17737bab902e3b3d1e4ae2a29edbf.png"></div><br>  Pada bagian sebelumnya, saya menulis bahwa target render ketiga buffer GBuffer kemungkinan besar mengandung metalness, tetapi tampaknya itu sebenarnya mengandung warna specular.  Pada awalnya saya tidak melihat warna apa pun dan tidak mengerti mengapa ketiga saluran RGB berisi data yang sama, tapi itu mungkin karena tidak ada pantulan warna di tempat kejadian.  Untuk senjata ini, buffer berisi lebih banyak warna berbeda. <br><br>  Saya juga lupa menambahkan tekstur favorit saya, yang saya temukan dalam proses meneliti rendering game.  Itu pasti layak disebutkan karena menunjukkan sifat kacau pengembangan game ketika itu tidak selalu mungkin untuk membersihkannya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7bb/5b4/288/7bb5b428878a0be20dbe80d599256d80.png"></div><br>  <i>"Tingkatkan aku!"</i> <br><br><h3>  Komposisi transparansi dan anti-aliasing </h3><br>  Mencoba untuk mencari tahu bagaimana resolusi penyangga transparansi setengah ukuran meningkat, dan bagaimana permainan melakukan antialiasing, saya melihat sesuatu yang menarik.  Saya membutuhkan adegan di mana ada lebih banyak kontras sehingga jelas terlihat apa yang terjadi.  Untungnya, saya berhasil menangkap bingkai di mana senjata pemain bergerak sedikit di antara bingkai. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a0c/974/612/a0c9746122e45a19786bdf51521015a9.png"></div><br>  <i>Sebelum memberikan transparansi</i> <br><br>  Tampaknya sebelum mengkomposisikan buffer transparansi, buffer sudah berisi gambar yang dirender sepenuhnya, dan karena tidak ada tepi tajam dalam bingkai ini, logis untuk menganggap bahwa ini adalah data dari frame sebelumnya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c56/bd5/b89/c56bd5b8938a315f97def63dc7b8b214.png"></div><br>  <i>Setelah menyusun transparansi dari frame saat ini</i> <br><br>  Saat menambahkan transparansi ke bingkai saat ini, kami dapat melihat setiap tepian yang rusak.  Itu terjadi karena senjata sedikit bergeser ke kanan.  Beberapa awan dibuat transparan, tetapi mereka terpotong ke cakrawala (yang buram), jadi pengomposisian tidak mengubah dasar, tetapi sudah merender jala senjata dari frame sebelumnya menggunakan penyangga kedalaman dari frame saat ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/64f/7a1/e93/64f7a1e9340dfe180e4807cf7c4da5be.png"></div><br>  <i>Setelah menambahkan opacity ke frame saat ini</i> <br><br>  Setelah beberapa panggilan undian, dilakukan pengomposisian dan sambungan yang tidak jelas.  Tampaknya tidak ada alasan khusus untuk melakukan ini dalam urutan ini.  Adalah logis untuk menyusun buffer transparansi ke dalam data objek buram dari frame saat ini, tetapi ini tidak terjadi, dan akan menarik untuk mengetahui alasannya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/963/bce/f23/963bcef23544573444acf29bf7a83a87.png"></div><br>  <i>Setelah TAA</i> <br><br>  Setelah menyelesaikan bingkai penuh, TAA (Temporal Smoothing) lulus memperhalus tepi.  Saya sudah tertarik dengan ini sebelumnya, karena saya tidak melihat di mana smoothing terjadi.  Tapi saya melewatkan ini karena segera setelah undian ini memanggil downsampling untuk mekar lulus dimulai dan saya melewatkan panggilan undian yang satu ini. <br><br><h3>  Lensa menyala </h3><br>  Biasanya saya tidak ingin menganalisis efek individual, tetapi ada banyak cara untuk menerapkan suar lensa, jadi saya ingin tahu tentang pengembang mana yang memilih. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/787/d1c/c6d/787d1cc6d642436ce05542678e27b807.png"></div><br>  <i>Lensa menyala dalam pengomposisian yang sudah jadi</i> <br><br>  Dalam kebanyakan kasus, suar lensa hampir tidak terlihat, tetapi ini adalah efek yang indah.  Sulit untuk ditampilkan di tangkapan layar, jadi saya tidak akan berusaha keras dalam hal ini. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a32/554/efc/a32554efc67afb79416b6ce2fe337148.png"></div><br>  <i>Lensa menyala dalam buffer mekar</i> <br><br>  Setelah mencari, saya menemukan panggilan draw yang menambahkan efek ini, dan ternyata itu adalah panggilan setelah tahap terakhir meningkatkan resolusi bloom.  Dalam buffer ini, efeknya jauh lebih terlihat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8a3/f38/078/8a3f38078dc5d6c6451030ee3eb5c53b.png"></div><br>  <i>Suar Lensa Geometri</i> <br><br>  Jika Anda melihat geometri, suar lensa cukup sederhana.  Setidaknya 6 quadrangles terlibat dalam menciptakan hasil akhir di layar, tetapi tidak ada serangkaian quadrangles yang lebih kecil yang mendekati posisi matahari.  Kita dapat menyimpulkan bahwa ini adalah solusi yang cukup standar, meskipun beberapa pengembang membuat suar lensa langsung di adegan penargetan, sementara yang lain menghitung efeknya sebagai pasca-pemrosesan. <br><br><h3>  Penguraian medan </h3><br>  Di semua game dunia terbuka, salah satu kesulitan paling menarik adalah merender medan.  Saya memutuskan bahwa mungkin tampak menarik untuk mempelajari aspek ini, tetapi, terus terang, sedikit kecewa. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/125/7a6/89b/1257a689b93f0f7a0239b5514ce911af.png"></div><br>  Pada pandangan pertama, sebuah fragmen relief tampak seperti semacam penghentian yang dilakukan.  Cara bantuan berubah bentuk selama gerakan membuatnya logis untuk menganggap bahwa ada beberapa perpindahan tambahan.  Selain itu, pada PC, gim ini secara aktif menggunakan tessellation, jadi masuk akal jika menggunakannya. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/99d/214/a4d/99d214a4dc8c15862b7e385edda0c25e.png"></div><br>  Mungkin saya memiliki parameter yang salah yang ditetapkan, tetapi permainan membuat semua bagian dari relief tanpa tessellation.  Untuk setiap fragmen relief, ia menggunakan kisi seragam 32 * 32 ini.  Juga tidak ada LOD. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/744/aa8/4bc/744aa84bce83c87e8c2a49338f7c8c13.png"></div><br>  Melihat fragmen relief setelah vertex shader, Anda dapat melihat bahwa sebagian besar pasangan simpul bergabung untuk membentuk grid 16 * 16 yang hampir sempurna, dengan pengecualian beberapa tempat yang membutuhkan akurasi lebih (mungkin karena kelengkungan relief).  Deformasi yang disebutkan di atas mungkin muncul karena membaca tekstur mip dari peta ketinggian relief ketika relief jauh dari kamera. <br><br><h3>  Trik Pelacakan Ray </h3><br>  Dan sekarang tentang apa yang semua orang tunggu. <br><br><h4>  Streaming data </h4><br>  Salah satu aspek yang paling menarik dari implementasi DXR saat ini adalah cara Anda bekerja dengan data.  Yang paling penting adalah bagaimana data dimuat ke dalam struktur yang mempercepat dan bagaimana itu diperbarui.  Untuk menguji ini, saya mengambil dua tangkapan dan membandingkan struktur percepatan di NSight. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3fc/7b7/0d2/3fc7b70d22199c5be429417fd6ed92a9.png"></div><br>  <i>Pemain ada di dalam kapal</i> <br><br>  Pada penangkapan pertama, saya berdiri di dalam kapal yang rusak, yang terlihat di tengah-tengah gambar ini.  Hanya benda terdekat yang dimuat, kecuali batu besar di tepi peta. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc4/e41/2fa/dc4e412fa02b74f7ca4384a53e1b8100.png"></div><br>  <i>Pemain telah pindah ke sudut kiri atas gambar ini.</i> <br><br>  Pada tangkapan kedua, saya menjauh dari tepi peta dan lebih dekat ke tepi kiri atas gambar.  Kapal dan segala sesuatu di sekitarnya masih dimuat, tetapi benda-benda baru juga dimuat.  Menariknya, saya tidak bisa mendefinisikan struktur ubin apa pun.  Objek dapat dimuat / dihapus dari struktur percepatan berdasarkan jarak dan visibilitas (mungkin membatasi jajaran genjang?).  Selain itu, tepi kanan atas terlihat lebih detail, meskipun telah menjauh darinya.  Akan menarik untuk mengetahui lebih banyak tentang ini. <br><br><h4>  Relief dan apa yang ada di bawahnya </h4><br>  Beberapa aspek implementasi DXR di Metro: Keluaran tentang medan dapat disebutkan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e97/386/8bf/e973868bf7b0bd40cfc58c0d94678acf.png"></div><br>  Pertama, menarik bahwa struktur percepatan tidak mengandung jerat relief (dengan pengecualian kasus khusus).  Monster-monster ini benar-benar berjalan dalam game di tanah, tetapi menilai dari data di NSight, Anda mungkin berpikir bahwa mereka terbang.  Ini menimbulkan pertanyaan yang menarik bagi kita: dapatkah penerapan pencahayaan global dengan mempertimbangkan bantuan (mungkin menggunakan peta ketinggian dan bahan bantuan) atau tidak. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a7a/03e/860/a7a03e8601a37c6459eff55cc7dda39f.png"></div><br>  Saat berikutnya saya tidak akan pernah memperhatikan jika bantuan itu ada.  Melihat awal level pada struktur percepatan di NSight, saya perhatikan beberapa jerat di bawah relief. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/458/b77/ec3/458b77ec37a3db2b1d8ca0b3f1694dd8.png"></div><br>  Artis cukup sering, karena berbagai alasan, menempatkan mesh debug di bawah level, tetapi mereka biasanya dihapus sebelum permainan dirilis.  Dalam hal ini, jerat ini tidak hanya bertahan sampai rilis, tetapi juga menjadi bagian dari struktur percepatan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/27d/64a/15d/27d64a15df609c55b8742d77637fca22.png"></div><br>  Selain yang disebutkan di atas, saya menemukan jerat lainnya tersebar di bawah bantuan.  Pada dasarnya, mereka tidak layak untuk disebutkan, tetapi yang ini sangat menarik - ini adalah karakter yang berdiri tepat di bawah titik awal level.  Bahkan memiliki kolam renang sendiri. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/53f/5dd/66c/53f5dd66c2b959793151e3a59d1309a5.png"></div><br>  Akhirnya, elemen penasaran terakhir dari struktur percepatan adalah jerat satu sisi yang melihat keluar dari level.  Kecuali jika mereka dianggap bilateral, sangat kecil kemungkinan mereka memberikan kontribusi pada gambar permainan.  Bahkan jika jerat dua sisi, mereka sangat jauh dari area yang dapat dimainkan sehingga mereka mungkin hanya meregangkan struktur percepatan.  Sangat menarik untuk melihat bahwa mereka tidak disaring.  Gambar ini juga menunjukkan salah satu kasus khusus "relief mesh" di sudut kanan bawah, antara kereta dan bangunan. <br><br><h4>  Tanpa kepala dengan menguliti </h4><br>  Saya sudah berbicara tentang masalah pengait kulit, tetapi pada tingkat ini saya memperhatikan sesuatu yang lain. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d1/0dd/a8c/1d10dda8c75112713b51c32771bb8ecb.png"></div><br>  Pertama, monster ini menunjukkan kedua kesalahan dalam satu gambar, yang saya perhatikan di atas.  Saya masih bertanya-tanya apa yang menyebabkan mereka. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/523/265/dd7/523265dd72a9613800831592706bd510.png"></div><br>  Saya juga memperhatikan bahwa makhluk-makhluk kecil ini, seperti kelelawar, tidak memiliki kepala dalam struktur percepatan. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fd/1a9/801/6fd1a9801d440a719602ab30eb33a88e.png"></div><br>  Contoh lain.  Perhatikan lubang di mana kepala seharusnya berada.  Saya belum melihat satu pun kasus di mana kepala terlihat. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e7f/51e/741/e7f51e74194bf8cccf8e430e6ec8513d.png"></div><br>  Makhluk yang sama dalam mode rasterisasi.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Perhatikan bahwa kepala terlihat jelas. </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ebd/d67/2ea/ebdd672ea50f7717c4b66afeb20b4cf8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Dan di sini adalah kerangka gambar kepala. </font></font><br><br><h3>  Kesimpulannya </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Itu saja untuk hari ini. </font><font style="vertical-align: inherit;">Saya harap Anda menikmati tampilan ini di bagian dalam Metro: Exodus. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Saya akan terus mengeksplorasi rendering game, tetapi saya tidak akan mempublikasikan bagian-bagian baru artikel kecuali saya menemukan beberapa bagian khusus yang akan menarik bagi orang-orang atau menemukan sesuatu yang layak dibagikan.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id447194/">https://habr.com/ru/post/id447194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id447182/index.html">Sistem Operasi: Tiga Potongan Mudah. Bagian 3: API Proses (terjemahan)</a></li>
<li><a href="../id447184/index.html">Apa itu Initial Exchange Offering (IEO) dan bagaimana perbedaannya dengan ICO?</a></li>
<li><a href="../id447186/index.html">Cara meluncurkan prototipe ML dalam satu hari. Laporkan Yandex.Taxi</a></li>
<li><a href="../id447190/index.html">Prediksi dari ahli matematika. Kami menganalisis metode utama untuk mendeteksi anomali</a></li>
<li><a href="../id447192/index.html">Apa peran yang bisa dimainkan oleh teknologi dalam seni kuno pencampuran rempah?</a></li>
<li><a href="../id447196/index.html">7. Periksa Titik Memulai R80.20. Kontrol akses</a></li>
<li><a href="../id447198/index.html">Misi Lunar "Bereshit": pendaratan-kecelakaan-jatuh di bulan</a></li>
<li><a href="../id447204/index.html">17 April: Kuliah terbuka "Lintasan pengembang game: dari ide ke peluncuran" dan perpustakaan game di Sekolah Tinggi Hukum</a></li>
<li><a href="../id447208/index.html">Ulasan SQA Days EU</a></li>
<li><a href="../id447210/index.html">@Pythonetc kompilasi Maret 2019</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>