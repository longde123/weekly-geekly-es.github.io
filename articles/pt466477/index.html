<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíÉ üåñ üëãüèæ Uso do PVS-Studio ao verificar projetos de mecanismo irreal no sistema operacional Windows ‚úäüèª ‚ô®Ô∏è üë£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo aborda as especificidades da verifica√ß√£o de projetos do Unreal Engine com o analisador est√°tico PVS-Studio no sistema operacional Windows:...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Uso do PVS-Studio ao verificar projetos de mecanismo irreal no sistema operacional Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/466477/"><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/977/529/b80/977529b809b96ad36c8f2c766610263a.png" alt="Quadro 2"></div><br>  Este artigo aborda as especificidades da verifica√ß√£o de projetos do Unreal Engine com o analisador est√°tico PVS-Studio no sistema operacional Windows: como instalar o analisador, verificar um projeto, onde e como visualizar um relat√≥rio de erro. <br><a name="habracut"></a><br>  Parte integrante da s√©rie de nossos artigos s√£o t√≥picos relacionados √† ind√∫stria de jogos.  Verifique um mecanismo real usado em jogos AAA - de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nada</a> , encontre os principais erros da ind√∫stria de jogos - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">v√° em frente</a> , encontre bugs em um dos motores de jogos mais populares, o Unreal Engine (UE) - com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">bastante facilidade</a> .  No desenvolvimento de jogos, assim como em qualquer outro aplicativo, a qualidade do c√≥digo √© importante.  Os erros s√£o melhor encontrados o mais cedo poss√≠vel e a melhor op√ß√£o √© faz√™-lo automaticamente - √© aqui que os analisadores de c√≥digo est√°tico ajudam os programadores. <br><br>  Neste artigo, tentarei falar brevemente sobre como voc√™ pode usar o analisador est√°tico PVS-Studio para verificar projetos criados no UE.  O PVS-Studio pode ajud√°-lo a melhorar o c√≥digo do seu projeto, encontrando erros nele, permitindo reduzir o tempo gasto na revis√£o do c√≥digo. <br><br>  Observe que este artigo √© uma adi√ß√£o √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> existente na an√°lise de projetos da UE e n√£o serve para substitu√≠-lo, emprestando amplamente o conte√∫do da documenta√ß√£o. <br><br><h2>  Instala√ß√£o do PVS-Studio </h2><br>  A maneira mais f√°cil de instalar o analisador PVS-Studio √© baixar o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">arquivo de instala√ß√£o</a> .  Para poder analisar os projetos criados no UE, √© necess√°rio selecionar os seguintes componentes ao instalar o PVS-Studio: "Monitoramento do compilador C e C ++" e "Integra√ß√£o com o Microsoft Visual Studio (Visual C ++ / C #)".  O √∫ltimo ponto √© respons√°vel por integrar o plug-in PVS-Studio no Visual Studio IDE, por meio do qual √© conveniente trabalhar com o log de erros e com as configura√ß√µes gerais do pr√≥prio analisador. <br><br>  Para trabalhar totalmente com o PVS-Studio, voc√™ precisa inserir uma licen√ßa.  Voc√™ pode fazer isso abrindo o Visual Studio (VS) IDE e inserindo a licen√ßa no 'PVS-Studio | Op√ß√µes ... | Registro'.  No VS 2019, o menu PVS-Studio foi movido para o menu 'Extens√µes', o caminho para a janela de entrada da licen√ßa √© semelhante a: 'Extens√µes' | 'PVS-Studio | Op√ß√µes ... | Registro'.  A licen√ßa est√° dispon√≠vel em nosso <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site</a> . <br><br>  Para criar projetos UE, √© usado um programa UnrealBuildTool (UBT) personalizado da Epic Games, n√£o um sistema de compila√ß√£o padr√£o, usado no VS (MSBuild).  Nesse sentido, o plug-in PVS-Studio n√£o pode implementar um cen√°rio usual de verifica√ß√£o de projetos C ++ / C #, criados no VS: "PVS-Studio -&gt; Verificar -&gt; Projeto Atual".  Existem v√°rias solu√ß√µes para evitar essa limita√ß√£o. <br><br><h2>  Executando an√°lises com o sistema de monitoramento de compila√ß√£o </h2><br>  A primeira e a maneira mais f√°cil de verificar um projeto UE √© usar o programa C e C ++ Compiler Monitoring (denominado Standalone.exe), localizado no diret√≥rio de instala√ß√£o do PVS-Studio.  O princ√≠pio de seu trabalho √© que ele monitora os processos do compilador que correspondem ao compilador de destino (neste caso, cl.exe) e re√∫ne todas as informa√ß√µes necess√°rias para pr√©-processamento e an√°lise posterior dos arquivos de origem.  Depois de abrir o Monitoramento do compilador C e C ++, use o menu "Ferramentas" e escolha a op√ß√£o "Analisar seus arquivos (C e C ++) ...".  Pressione "Iniciar monitoramento" e voc√™ ver√° a janela no canto inferior esquerdo informando que o monitoramento de chamadas do compilador est√° em andamento: <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d04/c56/21a/d04c5621a3674d9003777275c3698398.png" alt="Quadro 1"></div><br>  Em seguida, construa seu projeto UE e pressione "Stop Monitoring". <br><br>  Depois disso, a an√°lise dos arquivos de origem compilados ser√° iniciada.  O relat√≥rio dos avisos encontrados ser√° mostrado na janela "Sa√≠da do analisador" do programa Monitoramento do compilador C e C ++. <br><br>  O monitoramento de chamadas do compilador semelhante e a an√°lise subsequente dos arquivos detectados podem ser feitos usando o programa do console CLMonitor.exe, localizado na mesma pasta em que o PVS-Studio foi instalado.  O CLMonitor.exe possui dois modos de opera√ß√£o: um modo de servidor quando os lan√ßamentos de processos (correspondentes ao compilador de destino) s√£o monitorados e um modo cliente (quando os arquivos de origem, detectados no est√°gio de monitoramento, s√£o analisados, seguidos por um relat√≥rio dos resultados da an√°lise) .  Para executar o CLMonitor.exe no modo de servidor, execute o seguinte comando: <br><br><pre><code class="cpp hljs">CLMonitor.exe monitor</code> </pre> <br>  Depois disso, construa seu projeto UE e execute o comando abaixo: <br><br><pre> <code class="cpp hljs">CLMonitor.exe analyze -l <span class="hljs-string"><span class="hljs-string">"c:\ptest.plog"</span></span></code> </pre> <br>  O comando "analisar" executa o CLMonitor.exe no modo cliente e fecha a inst√¢ncia em execu√ß√£o deste programa, trabalhando no modo servidor.  Ap√≥s executar este comando, o CLMonitor.exe come√ßar√° a executar a an√°lise de arquivos.  Um par√¢metro para a op√ß√£o "- l" √© um caminho para o arquivo, no qual os resultados do analisador ser√£o gravados. <br><br><h2>  Executando an√°lises com a chave -StaticAnalyzer = PVSStudio </h2><br>  Uma abordagem diferente e mais conveniente para analisar projetos da UE √© uma integra√ß√£o direta com o sistema constru√≠do pela UBT.  Para fazer isso, abra a janela de propriedades do seu projeto UE no VS e escolha "NMake" na lista "Propriedades de configura√ß√£o".  Adicione -StaticAnalyzer = PVSStudio no campo de texto da propriedade "Build Command Line".  Como exemplo, o valor do campo "Criar linha de comando" pode ter a seguinte apar√™ncia: <br><br><pre> <code class="cpp hljs">C:\Program Files\Epic Games\UE_4<span class="hljs-number"><span class="hljs-number">.22</span></span>\Engine\Build\BatchFiles\Build.bat<span class="hljs-string"><span class="hljs-string">" MyProject Win64 DebugGame -Project="</span></span>$(SolutionDir)$(ProjectName).uproject<span class="hljs-string"><span class="hljs-string">" -WaitMutex -FromMsBuild -StaticAnalyzer=PVSStudio</span></span></code> </pre> <br>  Deve-se levar em considera√ß√£o que, ao executar uma constru√ß√£o do projeto, ela ser√° analisada apenas, n√£o constru√≠da.  O cen√°rio em que um projeto √© constru√≠do e analisado ser√° descrito abaixo.  Tamb√©m deve ser observado que apenas os arquivos de origem que foram alterados desde a √∫ltima compila√ß√£o do projeto ser√£o analisados.  A altera√ß√£o de qualquer arquivo .h inclu√≠do n√£o √© um motivo para executar a an√°lise durante a pr√≥xima compila√ß√£o.  Para realizar uma an√°lise completa, voc√™ precisa adicionar o mesmo sinalizador no campo de texto da propriedade "Reconstruir toda a linha de comando".  Agora, ao reconstruir o projeto, voc√™ obter√° o resultado da an√°lise de todo o projeto. <br><br><h2>  Executando a an√°lise por meio da modifica√ß√£o de arquivos do pacote </h2><br>  Agora, vamos considerar outro cen√°rio do analisador PVS-Studio integrado ao sistema de constru√ß√£o UBT.  Enquanto isso, a an√°lise come√ßa logo ap√≥s a execu√ß√£o / constru√ß√£o do projeto.  Em outras palavras, voc√™ obt√©m um projeto constru√≠do e um arquivo com resultados de an√°lise.  Voc√™ pode ter notado que o campo Build Command Line cont√©m o caminho para o arquivo em lotes Build.bat, que, por sua vez, cont√©m instru√ß√µes para executar o UBT com os argumentos necess√°rios.  O Build.bat √© executado no in√≠cio do build. <br><br>  O ponto √© alterar o arquivo em lote para que ele possa executar primeiro o UBT com argumentos de constru√ß√£o padr√£o e, se uma constru√ß√£o for conclu√≠da com √™xito, execute o mesmo UBT, mas j√° com um sinalizador adicional -StaticAnalyzer = PVSStudio.  Para implementar o cen√°rio acima, voc√™ pode alterar o arquivo em lotes Build.bat.  √â ainda melhor criar sua c√≥pia chamada, por exemplo, BuildAndAnalyze.bat.  Aqui est√° o que voc√™ precisa fazer para implementar o cen√°rio descrito.  Logo ap√≥s o comando popd, insira as seguintes instru√ß√µes: <br><br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS"</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> )</code> </pre> <br>  Se o sinalizador -StaticAnalyzer = PVSStudio tiver sido instalado anteriormente no campo Build Command Line nas configura√ß√µes do projeto 'Properties | Configuration Properties | NMake', ele dever√° ser removido. <br><br>  O problema dessa abordagem √© que apenas os arquivos que foram compilados durante a compila√ß√£o ser√£o analisados.  Ou seja, voc√™ n√£o receber√° um arquivo de relat√≥rio com uma verifica√ß√£o completa do seu projeto.  Al√©m disso, quaisquer altera√ß√µes feitas nos arquivos .h inclu√≠dos tamb√©m n√£o ser√£o levadas em considera√ß√£o.  Portanto, n√£o podemos chamar essa an√°lise de incremental, pois as altera√ß√µes nos arquivos de cabe√ßalho n√£o acionar√£o a an√°lise durante a pr√≥xima compila√ß√£o.  Nesse caso, voc√™ pode reconstruir o projeto, obtendo o resultado da an√°lise para todo o projeto.  No entanto, a compila√ß√£o completa pode demorar, portanto, voc√™ pode seguir este cen√°rio: fa√ßa uma compila√ß√£o, exclua o arquivo de cache ActionHistory.bin, execute a compila√ß√£o com o sinalizador -StaticAnalyzer = PVSStudio, restaure o arquivo de cache.  O arquivo ActionHistory.bin cont√©m informa√ß√µes necess√°rias para executar a constru√ß√£o incremental, bem como o hist√≥rico de execu√ß√£o do analisador para arquivos verificados. <br><br>  √Ä primeira vista, esse cen√°rio pode n√£o parecer o mais f√°cil; portanto, forneceremos um conjunto completo de instru√ß√µes sobre como voc√™ pode alterar o arquivo Build.bat original.  Vale ressaltar que essas altera√ß√µes s√£o relevantes apenas para o Unreal Engine vers√£o 4.21 e posterior.  Ap√≥s o comando setlocal enabledelayedexpansion, declare as seguintes vari√°veis: <br><br><pre> <code class="cpp hljs">SET PROJECT_NAME=%<span class="hljs-number"><span class="hljs-number">1</span></span>% SET PLATFORM=%<span class="hljs-number"><span class="hljs-number">2</span></span>% SET UPROJECT_FILE=%~<span class="hljs-number"><span class="hljs-number">5</span></span> SET ACTIONHISTORY_FOLDER= %UPROJECT_FILE%\..\Intermediate\Build\%PLATFORM%\%PROJECT_NAME% SET ACTION_HISTORY=ActionHistory.bin SET ACTION_HISTORY_BAC=%ACTION_HISTORY%.bac SET ACTIONHISTORY_PATH=<span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY%"</span></span> SET ACTIONHISTORY_BAC_PATH= <span class="hljs-string"><span class="hljs-string">"%ACTIONHISTORY_FOLDER%\%ACTION_HISTORY_BAC%"</span></span></code> </pre> <br>  Logo ap√≥s a instru√ß√£o popd, insira estes comandos: <br><pre> <code class="cpp hljs">SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS="</span></span> IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"0"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF <span class="hljs-string"><span class="hljs-string">"!UBT_ERR_LEVEL!"</span></span>==<span class="hljs-string"><span class="hljs-string">"2"</span></span> ( SET <span class="hljs-string"><span class="hljs-string">"NEED_TO_PERFORM_ANALYSIS=TRUE"</span></span> ) IF DEFINED NEED_TO_PERFORM_ANALYSIS ( pushd <span class="hljs-string"><span class="hljs-string">"%~dp0\..\..\Source"</span></span> ECHO Running <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> analysis IF EXIST %ACTIONHISTORY_PATH% ( ECHO Copying %ACTION_HISTORY% to %ACTION_HISTORY_BAC% COPY %ACTIONHISTORY_PATH% %ACTIONHISTORY_BAC_PATH% ECHO Removing %ACTION_HISTORY%: %ACTIONHISTORY_PATH% DEL %ACTIONHISTORY_PATH% ) ..\..\Engine\Binaries\DotNET\UnrealBuildTool.exe %* -StaticAnalyzer=PVSStudio -DEPLOY popd SET <span class="hljs-string"><span class="hljs-string">"UBT_ERR_LEVEL=!ERRORLEVEL!"</span></span> IF EXIST %ACTIONHISTORY_BAC_PATH% ( ECHO Recovering %ACTION_HISTORY% COPY %ACTIONHISTORY_BAC_PATH% %ACTIONHISTORY_PATH% ECHO Removing %ACTION_HISTORY_BAC%: %ACTIONHISTORY_BAC_PATH% DEL %ACTIONHISTORY_BAC_PATH% ) )</code> </pre> <br>  Observe que as vari√°veis ‚Äã‚ÄãPROJECT_NAME, PLATFORM e UPROJECT_FILE, necess√°rias para determinar corretamente o caminho para o arquivo em cache, obt√™m seus valores a partir dos argumentos da linha de comando do Build.bat.  Se voc√™ tiver uma ordem diferente desses argumentos, precisar√° alterar adequadamente a inicializa√ß√£o das tr√™s vari√°veis ‚Äã‚Äãdescritas acima. <br><br><h2>  An√°lise de projeto incremental via modifica√ß√£o UBT </h2><br>  O PVS-Studio pode trabalhar no modo de an√°lise incremental.  A an√°lise incremental destina-se a verificar apenas os arquivos que foram alterados desde a √∫ltima compila√ß√£o.  No modo de an√°lise incremental, o PVS-Studio √© executado automaticamente no computador de um desenvolvedor no modo de segundo plano logo ap√≥s a compila√ß√£o do c√≥digo e analisa todos os arquivos modificados.  Voc√™ pode encontrar um guia mais detalhado sobre o uso do PVS-Studio no modo de an√°lise incremental em nossa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">documenta√ß√£o</a> . <br><br>  Com a implementa√ß√£o do modo de an√°lise incremental para projetos UE, tudo fica um pouco mais complicado do que em um cen√°rio padr√£o.  Nesse caso, para poder executar a an√°lise incremental (levando em considera√ß√£o as altera√ß√µes nos arquivos .h inclu√≠dos), voc√™ dever√° introduzir edi√ß√µes no sistema UBT de constru√ß√£o.  Para fazer isso, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">obtenha acesso</a> ao reposit√≥rio da UE no github.com e clone-o na sua m√°quina.  Para personalizar ainda mais o reposit√≥rio clonado, voc√™ precisar√° concluir as etapas listadas na se√ß√£o "Instalando e executando", subse√ß√£o "Windows".  Voc√™ pode encontrar esta se√ß√£o na primeira p√°gina do reposit√≥rio oficial da UE.  Depois de configurar seu reposit√≥rio, voc√™ poder√° come√ßar a fazer altera√ß√µes no UBT.  Para fazer isso, siga este caminho para o reposit√≥rio clonado: \ UnrealEngine \ Engine \ Source \ Programs \ UnrealBuildTool.  Abra a solu√ß√£o UnrealBuildTool.sln e localize o arquivo PVSToolChain.cs no Solution Explorer.  Nesse arquivo, adicione as seguintes linhas de c√≥digo na classe PVSApplicationSettings: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// &lt;summary&gt; /// Whether need incremental analysis or not /// &lt;/summary&gt; public bool IncrementalAnalysis;</span></span></code> </pre> <br>  Essa linha de c√≥digo permite que a op√ß√£o IncrementalAnalysis seja desserializada dos arquivos de configura√ß√µes do PVS-Studio.  N√£o se esque√ßa de ativar o pr√≥prio modo de an√°lise incremental do PVS-Studio.  Para fazer isso, no VS abra "Extens√µes" no menu principal, submenu "PVS-Studio", "An√°lise ap√≥s compila√ß√£o (somente arquivos modificados)", "Ativado".  Agora adicione as seguintes linhas de c√≥digo logo ap√≥s a declara√ß√£o da vari√°vel BaseFileName: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Get pvslog file FileReference OutputFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".pvslog"); FileItem OutputFileItem = FileItem.GetItemByFileReference(OutputFileLocation); if (ApplicationSettings.IncrementalAnalysis &amp;&amp; OutputFileItem.Exists) { // Get object file FileReference ObjectFileLocation = FileReference. Combine(OutputDir, BaseFileName + ".obj"); FileItem ObjectFileItem = FileItem.GetItemByFileReference(ObjectFileLocation); if (ObjectFileItem.Exists &amp;&amp; (ObjectFileItem.LastWriteTimeUtc &lt; OutputFileItem.LastWriteTimeUtc)) { continue; } }</span></span></code> </pre> <br>  Em seguida, remova as declara√ß√µes anteriores das vari√°veis ‚Äã‚ÄãOutputFileLocation e OutputFileItem abaixo. <br><br>  Durante a constru√ß√£o do projeto UE, um arquivo .obj de objeto √© gerado para cada arquivo .cpp de origem.  Essa an√°lise incremental visa verificar apenas os arquivos .cpp de origem cuja data de cria√ß√£o / modifica√ß√£o do arquivo de objeto seja posterior √† do arquivo de relat√≥rio .pvslog.  Um arquivo .pvslog separado √© gerado para cada arquivo de origem. No futuro, todos os arquivos .pvslog ser√£o mesclados em um .pvslog final).  Depois de fazer as altera√ß√µes acima, crie o UBT e copie o arquivo bin√°rio rec√©m-criado para o local do UBT original. <br><br>  Agora est√° tudo pronto, voc√™ receber√° um log de relat√≥rio ao executar a constru√ß√£o do seu projeto UE, contendo os resultados do analisador apenas para arquivos de origem compilados.  Lembre-se de que essa modifica√ß√£o do UBT s√≥ faz sentido se voc√™ tiver modificado o arquivo Build.bat de forma a executar a remo√ß√£o do arquivo de cache ActionHistory.bin (a descri√ß√£o detalhada desse cen√°rio foi fornecida acima).  Para desativar o modo de an√°lise incremental, basta instalar a op√ß√£o "An√°lise ap√≥s compila√ß√£o (somente arquivos modificados)" descrita acima no modo "Desativado". <br><br>  Deixe-me lembr√°-lo mais uma vez: se voc√™ instalou o sinalizador -StaticAnalyzer = PVSStudio no campo Build Command Line nas configura√ß√µes do projeto 'Properties | Configuration Properties | NMake' ', ele dever√° ser removido neste cen√°rio. <br><br><h2>  Abrindo o arquivo de relat√≥rio do analisador e seu carregamento autom√°tico no Visual Studio </h2><br>  Por padr√£o, ao executar a an√°lise do projeto UE, um arquivo de relat√≥rio n√£o ser√° mostrado na janela PVS-Studio no VS.  Ele √© armazenado relativamente na pasta do projeto pelo seguinte caminho: \ YouProject \ Saved \ PVS-Studio \.  Para abrir esse arquivo no VS, voc√™ precisa usar o seguinte comando: 'PVS-Studio | Abrir / Salvar | Abrir relat√≥rio de an√°lise' e selecione o tipo de arquivo 'Sa√≠da n√£o analisada'.  Voc√™ tamb√©m pode abrir o relat√≥rio de arquivo no programa C and C ++ Compiler Monitoring, usando o seguinte comando: 'File | Open PVS-Studio Log' e tamb√©m escolher o tipo de arquivo 'Unparsed output'. <br><br>  H√° outra op√ß√£o mais conveniente para abrir o log do relat√≥rio de an√°lise, que √© o carregamento autom√°tico no VS.  Para carregar automaticamente na janela do PVS-Studio no VS ap√≥s a conclus√£o da an√°lise, √© necess√°rio ativar a op√ß√£o apropriada: 'PVS-Studio | Op√ß√µes | Configura√ß√µes espec√≠ficas do analisador | Salvar / carregar (relat√≥rio do analisador) | AutoloadUnrealEngineLog' . <br><br><h2>  Fa√ßa o download e experimente o PVS-Studio </h2><br>  Como autor deste artigo, al√©m de uma das pessoas que est√£o trabalhando diretamente na implementa√ß√£o e suporte da funcionalidade do PVS-Studio relacionada √† an√°lise de projetos, constru√≠da com base no mecanismo da UE, estou pronto para ajudar os leitores .  Se voc√™ estiver com problemas para usar o PVS-Studio com seu projeto UE ou tiver alguma d√∫vida depois de ler este artigo, ficarei feliz em conversar com voc√™.  Escreva para o nosso suporte, receberei e-mails no UE e quest√µes relacionadas.  Obrigado pela aten√ß√£o. <br><br><h2>  Links adicionais </h2><br><ol><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Uma verifica√ß√£o h√° muito esperada do mecanismo irreal 4</a> .  (14 de abril de 2014) </li><li>  Paul Eremeev, Svyatoslav Razmyslov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Como a equipe do PVS-Studio aprimorou o c√≥digo da Unreal Engine</a> .  (20 de junho de 2015) </li><li>  Andrey Karpov.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">An√°lise est√°tica como parte do processo de desenvolvimento no Unreal Engine</a> .  (27 de junho de 2017) </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt466477/">https://habr.com/ru/post/pt466477/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt466463/index.html">Como criamos um aplicativo de reparo de parada de prot√≥tipo</a></li>
<li><a href="../pt466465/index.html">Summ3r 0f h4ck 2019: resultados da pesquisa</a></li>
<li><a href="../pt466467/index.html">Suporte para tokens jwt an√¥nimos no IdentityServer4 usando AnonymousIdentity</a></li>
<li><a href="../pt466473/index.html">Como criamos o sistema IoT para gerenciar o uso de energia solar</a></li>
<li><a href="../pt466475/index.html">Como transformar tr√°fego em vendas usando dados do usu√°rio do site</a></li>
<li><a href="../pt466479/index.html">Usando o PVS-Studio ao verificar projetos do Unreal Engine no sistema operacional Windows</a></li>
<li><a href="../pt466485/index.html">Carros el√©tricos dos anos 90. Parte 1. Irm√£os Citroen e Peugeot</a></li>
<li><a href="../pt466489/index.html">Os engenheiros coreanos sugerem o uso da Hololens como alternativa √†s divis√≥rias de escrit√≥rio</a></li>
<li><a href="../pt466491/index.html">Projeto de Treinamento em Godot - Pong (Parte 2) Criando e Configurando a Bola</a></li>
<li><a href="../pt466493/index.html">Docker: Para come√ßar. Aten√ß√£o Implantar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>