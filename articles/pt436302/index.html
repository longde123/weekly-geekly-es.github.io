<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçà ü•¶ üé≥ Experi√™ncia de substitui√ß√£o de importa√ß√£o real usando o sistema de armazenamento russo AERODISK üàØÔ∏è üíù üëü</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Agora, fala-se muito na televis√£o sobre os pr√≥ximos sucessos das empresas russas no campo da substitui√ß√£o de importa√ß√µes. Roteiros s√£o elaborados, reg...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Experi√™ncia de substitui√ß√£o de importa√ß√£o real usando o sistema de armazenamento russo AERODISK</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/softline/blog/436302/">  Agora, fala-se muito na televis√£o sobre os pr√≥ximos sucessos das empresas russas no campo da substitui√ß√£o de importa√ß√µes.  Roteiros s√£o elaborados, registros de desenvolvedores dom√©sticos s√£o criados, f√≥runs s√£o organizados e fundos estatais s√£o investidos.  dinheiro (como de costume, n√£o est√° totalmente claro onde). <br><br>  A televis√£o j√° disse a todos que um futuro brilhante vir√° em breve e que todos n√≥s estamos aguardando sistemas operacionais, bancos de dados e outras coisas necess√°rias na R√∫ssia. <br><br><img src="https://habrastorage.org/webt/zt/nl/kt/ztnlktu7sanbgkvro8vbqqcee7y.jpeg"><br><br>  Na realidade, tudo, como sempre, √© um pouco diferente ... <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/fp/vq/9m/fpvq9mtipnef-mj2u3pscvgrgpg.jpeg"><br><br>  H√° alguns anos, a Softline come√ßou a monitorar ativamente o mercado russo de solu√ß√µes de TI, a fim de satisfazer a demanda das empresas governamentais (e n√£o apenas) por produtos de substitui√ß√£o de importa√ß√µes em TI.  Bem, deve haver algo, certo? <br><br>  Como estamos escrevendo sobre armazenamento hoje, significa que contaremos sobre nossa experi√™ncia ao pesquisar, testar e implementar sistemas de armazenamento do fabricante russo AERODISK. <br><br>  Mas, antes de conhecer esse fornecedor, passamos por <s>sete c√≠rculos do inferno por um</s> longo caminho com os OEMs, que com toda a seriedade personificam os fabricantes nacionais. <br><br>  E agora apenas um momento de aten√ß√£o: <br><br>  Em primeiro lugar, n√£o somos contra o neg√≥cio de OEM, √© normal e praticado em todo o mundo.  Por exemplo, a mesma HP possui armazenamento DotHill OEM longo e bem-sucedido, vendendo-o em todo o mundo como se fosse seu e todos gostando. <br><br>  Em segundo lugar, somos contra apenas um engano total (acho que todos aqui concordar√£o conosco). <br><br>  N√£o daremos aqui os nomes das organiza√ß√µes que se comportam mal, fingindo ser produtoras dom√©sticas.  N√£o queremos criar antipublicidade para ningu√©m, mas, infelizmente, existem essas empresas e todos est√£o ouvindo. <br><br><h3>  <font color="#2e74b5">Tentativa n√∫mero um</font> </h3><br>  Tendo iniciado a pesquisa, deparamos inicialmente com um monte de chamados ‚Äúsistemas de armazenamento russos‚Äù, que para todos os pap√©is e fotos ‚Äúnossos‚Äù s√£o vendidos sob ‚Äúsubstitui√ß√£o de importa√ß√£o‚Äù, mas, na realidade, o equipamento e a intelig√™ncia s√£o chineses ou americanos. <br><br>  Bem, para o inferno com os equipamentos, √© claro que at√© os fabricantes americanos fabricam seu hardware na √Åsia, agora essa √© a norma, mas quem se importa em escrever? <br><br><img src="https://habrastorage.org/webt/io/xu/vh/ioxuvhb6prkj2yuglwkew6ipltm.jpeg"><br><br><h3>  <font color="#2e74b5">Tentativa n√∫mero dois</font> </h3><br>  √â claro que est√°vamos chateados, mas continuamos pesquisando.  Logo descobrimos v√°rias solu√ß√µes russas que foram realmente desenvolvidas por n√≥s, mas testes mostraram que elas sofrem de uma de duas (ou duas de uma vez) doen√ßas. <br><br><ol><li>  Solu√ß√µes brutas </li><li>  As solu√ß√µes n√£o s√£o para tarefas s√©rias (ou para nichos) </li></ol><br>  Obviamente, n√£o poder√≠amos trabalhar seriamente com essas decis√µes.  N√£o √© bom novamente. <br><br><img src="https://habrastorage.org/webt/vs/q0/r8/vsq0r87vcpcqykghc6y3rorvz-c.jpeg"><br><br><h3>  <font color="#2e74b5">Tentativa n√∫mero tr√™s</font> </h3><br>  Frustrados ainda mais, continuamos a comer o cacto.  Nesse momento (era final de 2017), t√≠nhamos um grande projeto federal em que era necess√°rio maximizar o uso da tecnologia russa.  A fase de projeto ainda estava em andamento: as solu√ß√µes t√©cnicas b√°sicas foram estabelecidas.  Isso fazia parte do projeto federal ‚ÄúCidade Segura‚Äù em uma das cidades-sede da Copa do Mundo de 2018. <br><br>  O conceito de "Cidade Segura" implica a unifica√ß√£o de todos os servi√ßos de seguran√ßa respons√°veis ‚Äã‚Äãem uma √∫nica dire√ß√£o, com a forte integra√ß√£o dos sistemas de TI.  Isso ajuda a responder a incidentes muito mais rapidamente e, em alguns casos, at√© evit√°-los. <br>  A ess√™ncia t√©cnica do projeto √© que tudo na cidade √© pendurado com c√¢meras (v√°rios milhares de c√¢meras), e essas c√¢meras, usando um sistema inteligente de vigil√¢ncia por v√≠deo, registram automaticamente eventos perigosos ou potencialmente perigosos e, em boa resolu√ß√£o, gravam dados continuamente no data center.  No modo online, a an√°lise de eventos das c√¢meras √© enviada para os servi√ßos de emerg√™ncia e, al√©m disso, no datacenter, os registros das c√¢meras s√£o armazenados por pelo menos um m√™s. <br><br>  A qualquer momento, um policial pode entrar em contato com o operador do servi√ßo e o mais r√°pido poss√≠vel para receber v√≠deo de qualquer lugar do m√™s passado para an√°lise posterior.  Os requisitos de acessibilidade e desempenho (v√°rios milhares de c√¢meras de boa resolu√ß√£o - isso n√£o √© um quilo de passas, como voc√™ entende) em um projeto como esse s√£o m√°ximos.  Se o v√≠deo desejado for perdido ou n√£o for gravado corretamente, o operador do servi√ßo poder√° sair seriamente para relaxar nos resorts da ensolarada Magadan. <br><br>  O cliente final (operador de servi√ßo) solicitou, sempre que poss√≠vel (sem comprometer a qualidade), o uso de solu√ß√µes russas sempre que poss√≠vel, uma vez que perguntaria posteriormente: ‚ÄúO que voc√™ fez para substituir as importa√ß√µes?‚Äù  Mas ele n√£o queria corar diante dos grandes chefes. <br><br><img src="https://habrastorage.org/webt/lp/mm/_s/lpmm_sezbodpg29lwikpnvbqwm0.jpeg"><br><br>  N√£o houve problemas com os sistemas de videovigil√¢ncia, pois  existem muitas solu√ß√µes russas, a escolha √© grande e, neste caso, uma solu√ß√£o comprovada foi usada.  Mas com o SHD (como nossas pesquisas n√£o tiveram √™xito), est√°vamos determinados a usar uma solu√ß√£o estrangeira conhecida h√° muito tempo.  E ent√£o um de nossos parceiros de projeto sugeriu o uso do sistema de armazenamento russo AERODISK para o n√≠vel de armazenamento. <br><br>  N√≥s (Softline) naquela √©poca, √© claro, sab√≠amos que havia um fabricante e que este n√£o era OEM.  Havia opini√µes diferentes sobre ele: boas e n√£o muito, por isso n√£o tivemos uma impress√£o definitiva.  N√£o conseguimos test√°-lo, porque o teste das solu√ß√µes de outros desenvolvedores russos (consulte a tentativa n√∫mero dois) falhou e suspendemos temporariamente a atividade devido a falhas constantes. <br><br>  Mas a proposta foi feita, o cliente aceitou a ideia com um estrondo.  E fomos descobrir o que o AERODISK faz para armazenamento e decidimos visit√°-los. <br><br>  Ficamos bastante satisfeitos com a visita ao AERODISK.  Foi-nos mostrado um sistema em opera√ß√£o, um centro de demonstra√ß√£o e tamb√©m tivemos a chance de conversar com desenvolvedores que "fazem essas m√£os futuras com essas m√£os". <br><br>  Pedimos √† AERODISK para organizar um laborat√≥rio de testes especificamente para este projeto e, em conjunto com o sistema de vigil√¢ncia por v√≠deo selecionado, emular a carga de trabalho.  A especificidade da tarefa era que, al√©m da grava√ß√£o de v√≠deo em fluxo usual, as tarefas de leitura e reescrita de dados s√£o adicionadas ao fluxo de grava√ß√£o constante com base na an√°lise.  Conhecendo esse perfil de carga, dirigimos os sistemas de armazenamento da AERODISK na cauda e na crina por v√°rias semanas.  Em geral, ficamos satisfeitos com os resultados, em alguns casos o sistema at√© superou os fabricantes estrangeiros, mas tamb√©m houve defici√™ncias.  Mas todos se resumiam principalmente a pequenos bugs na interface, que foram rapidamente corrigidos por eles.  suporte do fabricante. <br><br>  O resultado do teste foi o seguinte: <br><br><ol><li>  Nada quebrou apesar de termos quebrado </li><li>  Durante o teste, o suporte funcionou em um bom n√≠vel. </li><li>  O desempenho da nossa tarefa foi suficiente </li><li>  Percebemos que n√≥s, como integradores de sistemas, podemos suportar o sistema por conta pr√≥pria (para n√≥s, esse √© um crit√©rio importante) </li></ol><br>  Decidimos continuar esse projeto com os sistemas de armazenamento AERODISK e com os servidores x-86 padr√£o conectados aos sistemas de armazenamento via Fibre Channel e Ethernet 10Gbit.  Era necess√°rio montar dois clusters de failover que serviriam simultaneamente para c√¢meras de v√≠deo urbanas. <br><br><h3>  <font color="#2e74b5">Implementa√ß√£o</font> </h3><br>  A solu√ß√£o de design foi desenvolvida do zero e, na verdade, nem n√≥s, nem nosso parceiro ou a operadora de servi√ßos possu√≠am essa experi√™ncia.  √â claro que v√°rias pr√°ticas recomendadas e uma teoria diferente foram usadas, mas, como dizem os militares, "qualquer plano √© bom at√© o primeiro tiro".  O projeto em papel parecia perfeito e foi aprovado.  Foi embara√ßoso o fato de o AERODISK n√£o ter participado do design, devido ao fato de o projeto ter aparecido no √∫ltimo momento e j√° era imposs√≠vel aprovar algo sem adiar os prazos (e n√£o podemos adiar a Copa do Mundo de 2018))). <br><br>  Um conjunto de solu√ß√µes foi entregue, configurado de acordo com os documentos do projeto e colocado em opera√ß√£o de teste, que deveria durar v√°rios meses.  Tudo come√ßou muito bem e os dois sistemas de armazenamento do primeiro m√™s foram preenchidos com dados das c√¢meras de v√≠deo.  O v√¥o foi normal, tudo no papel.  Ficamos muito felizes, mas ainda n√£o sab√≠amos que os problemas reais estavam esperando por n√≥s ainda por vir. <br><br>  N√≥s j√° t√≠nhamos relaxado, mas no final do segundo m√™s de opera√ß√£o do teste, as reclama√ß√µes sobre o desempenho e a instabilidade do sistema como um todo come√ßaram a surgir do operador de servi√ßo. <br><br><img src="https://habrastorage.org/webt/6w/w-/ks/6ww-kswfzzilplsxexx9deik3zc.jpeg"><br><br>  N√≥s contratamos com urg√™ncia um fornecedor de solu√ß√µes de CFTV e a AERODISK para resolver o problema.  Naquele momento, est√°vamos esperando o in√≠cio do "pingue-pongue", como este: <br><br><img src="https://habrastorage.org/webt/di/3v/yw/di3vywgjnr4ax_wx8-nryv3zqam.jpeg"><br><br>  Para nossa surpresa, isso n√£o aconteceu, e os dois fornecedores foram diretamente ao diagn√≥stico do problema.  No dia seguinte, foi emitido um diagn√≥stico.  O motivo dos problemas de desempenho foi a configura√ß√£o incorreta do sistema de armazenamento.  Funcionou que nos confundiu desde o in√≠cio: era fisicamente imposs√≠vel envolver o fabricante do sistema de armazenamento no design, e foi essa √°rea que foi projetada incorretamente, sem levar em considera√ß√£o os recursos do sistema de armazenamento AERODISK.  Ficamos at√© felizes naquele momento, porque "bem, uma vez que est√° configurado de maneira torta, ent√£o vamos reconfigurar, qual √© o problema :)?" <br><br>  Mas l√° estava.  O problema era que o v√≠deo das c√¢meras era gravado principalmente nas esferas de arquivos SMB que eram apresentadas aos servidores de vigil√¢ncia por v√≠deo do sistema de armazenamento, e essa era a raiz do mal e, de acordo com a vigil√¢ncia por v√≠deo correta, voc√™ precisa apresentar dispositivos de bloco e format√°-los j√° no n√≠vel do servidor sistemas de arquivos locais.  Parece, qual √© o problema, crie LUNs e os entregue aos servidores, mas n√£o.  Como todo o volume √∫til de ambos os sistemas de armazenamento j√° estava ocupado no primeiro m√™s de trabalho, os LUNs n√£o s√£o f√°ceis de criar.  N√£o h√° lugar, mas voc√™ n√£o pode excluir v√≠deos antigos para liberar espa√ßo, porque eles "ficam sujos".  Bem, os backups n√£o ajudar√£o aqui, o que √© √≥bvio, mas a replica√ß√£o n√£o foi estabelecida no projeto. <br><br><img src="https://habrastorage.org/webt/mg/xs/76/mgxs76x2rctgrxpf-umiporlppe.jpeg"><br><br>  N√£o havia mais um or√ßamento para comprar a mesma quantidade (meio petabyte) e era imposs√≠vel limpar o espa√ßo em disco atual.  A op√ß√£o de usar espa√ßo tempor√°rio em nossa nuvem n√£o era adequada, porque haver√° muito atraso com esses volumes de grava√ß√£o.  O que come√ßou t√£o bem estava chegando a um fim terr√≠vel. <br><br><img src="https://habrastorage.org/webt/3z/zy/t5/3zzyt5hhkxlsin0kky-o6oslydo.jpeg"><br><br><h3>  <font color="#2e74b5">Negocia√ß√£o</font> </h3><br>  Mas a ajuda veio.  A AERODISK prop√¥s colocar outra matriz de capacidade e desempenho semelhantes no momento da reconfigura√ß√£o do sistema de armazenamento, redirecionar todo o registro para ele e aguardar um m√™s quando os dados dos sistemas de armazenamento configurados incorretamente forem exclu√≠dos automaticamente.  Depois disso, enquanto os dados de v√≠deo est√£o sendo gravados no armazenamento tempor√°rio e o armazenamento permanente √© liberado, voc√™ deve ter configurado corretamente o acesso do bloco ao armazenamento gratuito.  Bem, ent√£o fa√ßa tudo na ordem inversa.  Como voc√™ entende, todas essas opera√ß√µes devem ser executadas ‚Äúsem um √∫nico espa√ßo)))‚Äù, ou seja, sem interromper a grava√ß√£o das c√¢meras de v√≠deo. <br><br>  Independentemente, aumente tal especial.  est√°vamos com um pouco de medo da opera√ß√£o.  Portanto, a AERODISK (pela qual muitos agradecimentos a ele), al√©m do ferro, enviou v√°rias vezes dois engenheiros para realizar esses trabalhos. <br><br>  A mudan√ßa para armazenamento tempor√°rio, reconfigura√ß√£o e comuta√ß√£o reversa foi realizada sem paradas.  O desempenho dos sistemas de armazenamento e do complexo como um todo voltou ao normal.  O operador do servi√ßo brilhou de felicidade, pois quase chegara a um acordo com o fracasso do projeto. <br>  At√© a presente data, o complexo Cidade Segura foi comissionado, adquirimos uma experi√™ncia inestim√°vel e o complexo de hardware e software usado neste projeto √© considerado padr√£o para aplica√ß√µes subsequentes em outras cidades do nosso pa√≠s. <br><br><h3>  <font color="#2e74b5">Conclus√µes</font> </h3><br>  Assim, estudamos o mercado de sistemas de armazenamento russos, analisamos falsifica√ß√µes de OEM, solu√ß√µes brutas e ainda conseguimos encontrar um participante s√©rio nesse mercado - AERODISK, cujo produto no sistema de armazenamento ENGINE N-series pode facilmente competir com a nossa experi√™ncia solu√ß√µes estrangeiras mais famosas.  Sim, a implementa√ß√£o de um projeto grande e complexo n√£o correu bem (e √© diferente?), Mas o resultado foi, em nossa opini√£o, excelente.  Podemos dizer com confian√ßa que a p√°tria pode n√£o se preocupar com a substitui√ß√£o de importa√ß√µes na dire√ß√£o dos sistemas de armazenamento de dados. <br><br><img src="https://habrastorage.org/webt/zf/ee/em/zfeeemqidoq2ewlu8uh9qmqa1vs.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt436302/">https://habr.com/ru/post/pt436302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt436292/index.html">Controlar, modificar, excluir: os 10 principais relat√≥rios do DotNext 2018 Moscow</a></li>
<li><a href="../pt436294/index.html">Modelagem de s√©ries temporais</a></li>
<li><a href="../pt436296/index.html">expl√≠cito em detalhes</a></li>
<li><a href="../pt436298/index.html">Ideias da mesa: vinil virtual</a></li>
<li><a href="../pt436300/index.html">9 principais pr√°ticas de seguran√ßa no Kubernetes</a></li>
<li><a href="../pt436304/index.html">Zimbra Collaboration Suite e a luta contra o phishing</a></li>
<li><a href="../pt436306/index.html">Machine Learning para Vertica</a></li>
<li><a href="../pt436308/index.html">Rostelecom pode se tornar um monopolista no mercado de data centers</a></li>
<li><a href="../pt436310/index.html">Como as m√©tricas de Ivan, o DevOps fez. Objeto de influ√™ncia</a></li>
<li><a href="../pt436312/index.html">S√≠ntese de fala em rede neural usando a arquitetura Tacotron 2, ou "Fa√ßa o alinhamento ou tente morrer"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>