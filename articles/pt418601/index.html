<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëçüèø üññüèª ‚úñÔ∏è Toda a verdade sobre o RTOS. Artigo # 7 N√∫cleo SE: Introdu√ß√£o üõ¢Ô∏è üë®üèæ‚Äçüöí üëÇüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No restante da s√©rie "A verdade sobre o RTOS", examinaremos em detalhes como o RTOS √© implementado e implantado. Para fazer isso, consideraremos um RT...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Toda a verdade sobre o RTOS. Artigo # 7 N√∫cleo SE: Introdu√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418601/"><img src="https://habrastorage.org/webt/s_/59/bp/s_59bpqram112a5-md1svupxnmo.jpeg"><br><br>  No restante da s√©rie "A verdade sobre o RTOS", examinaremos em detalhes como o RTOS √© implementado e implantado.  Para fazer isso, consideraremos um RTOS espec√≠fico: Nucleus SE.  Mesmo se voc√™ n√£o usar esse n√∫cleo espec√≠fico ou outros kernels relacionados a ele, entender como ele funciona fornecer√° uma boa base para trabalhar com qualquer RTOS. <br><a name="habracut"></a><br>  Para entender por que o Nucleus SE foi projetado dessa maneira, √© importante destacar as principais tarefas e objetivos que eu segui no in√≠cio deste projeto. <br><br>  Artigos anteriores da s√©rie: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Outros servi√ßos RTOS</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Intera√ß√£o e sincroniza√ß√£o de tarefas</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tarefas, altern√¢ncia de contexto e interrup√ß√µes</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo # 3</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Tarefas e planejamento</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RTOS: estrutura e modo em tempo real</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Artigo 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">RTOS: introdu√ß√£o.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><br></a> <br><br>  <b>Simplicidade</b> <br><br>  O c√≥digo do kernel deve ser simples, direto, bem comentado e documentado.  O N√∫cleo SE destina-se principalmente ao uso educacional. <br><br>  <b>Tamanho</b> <br><br>  Esse deve ser um kernel pequeno e bem escalon√°vel (j√° que a mem√≥ria, principalmente a mem√≥ria operacional (RAM), pode estar em falta). <br><br>  <b>Funcionalidade</b> <br><br>  O kernel deve ter um alto n√≠vel de funcionalidade que suporte servi√ßos RTOS padr√£o. <br><br>  <b>Suporte de 8/16 bits</b> <br><br>  Ele deve suportar arquiteturas de 8 e 16 bits: na medida do poss√≠vel, use dados do tamanho de um byte;  estruturas de dados n√£o devem exigir m√©todos ex√≥ticos de endere√ßamento;  dados persistentes n√£o devem ser copiados para a RAM desnecessariamente. <br><br>  <b>O futuro</b> <br><br>  Deve haver um caminho de desenvolvimento do Nucleus SE para o Nucleus RTOS.  Os usu√°rios devem poder transferir c√≥digo facilmente entre n√∫cleos.  Mais importante, seu conhecimento tamb√©m deve ser transferido.  A API Nucleus SE efetivamente implementa um subconjunto da API Nucleus RTOS. <br><br>  <b>Custo</b> <br><br>  O modelo de neg√≥cios deve ser atraente para todos os usu√°rios em potencial: desenvolvedores de dispositivos de 8/16 bits, aqueles que primeiro usam o RTOS e aqueles que est√£o apenas estudando a pr√≥pria tecnologia.  Assim, o Nucleus SE est√° dispon√≠vel gratuitamente, totalmente gratuito para fins comerciais e educacionais;  o c√≥digo pode ser usado e modificado. <br><br>  <b>N√∫cleo de p√∫blico-alvo SE</b> <br><br>  O resultado dessa abordagem √© um kernel que pode ser √∫til para tr√™s tipos de desenvolvedores: <br><br><ul><li>  Programadores de dispositivos de 8/16 bits que exigem um simples kernel ou agendador de tarefas.  Isso √© especialmente atraente se os desenvolvedores estiverem interessados ‚Äã‚Äãem adquirir certas habilidades para usar o RTOS ou quando desenvolverem um sistema que use outros dispositivos de 32 bits nos quais o Nucleus RTOS possa ser uma boa op√ß√£o. </li><li>  Desenvolvedores de aplicativos incorporados que usam dispositivos de 32 bits em que a complexidade do software n√£o vale o custo de um RTOS comercial tradicional.  O uso do Nucleus SE pode ser √∫til e permitir√° o desenvolvimento (at√© o Nucleus RTOS) se a complexidade do aplicativo aumentar. </li><li>  Os alunos no processo de aprendizado podem usar o Nucleus SE como base para aprender o RTOS.  As habilidades adquiridas ser√£o √∫teis mais tarde, quando come√ßarem a trabalhar. </li></ul><br>  <b>Decis√µes e trade-offs de design</b> <br><br>  Para alcan√ßar os objetivos acima, v√°rias decis√µes de projeto cuidadosamente pensadas tiveram que ser tomadas.  Os detalhes ser√£o descritos mais adiante quando considerarmos fun√ß√µes espec√≠ficas, mas aqui est√° um breve resumo dos pontos principais. <br><br>  <b>Configura√ß√£o est√°tica</b> <br><br>  O Nucleus SE √© um RTOS est√°tico, o que significa que todas as decis√µes de configura√ß√£o s√£o tomadas no tempo de constru√ß√£o, n√£o dinamicamente no tempo de execu√ß√£o.  Isso tem muitas vantagens, incluindo a simplifica√ß√£o da estrutura de dados e a redu√ß√£o do tamanho do c√≥digo, portanto, n√£o h√° necessidade de chamar as fun√ß√µes de cria√ß√£o e exclus√£o da API.  Para a maioria dos aplicativos, a cria√ß√£o din√¢mica de objetos n√£o √© necess√°ria. <br><br>  <b>N√∫mero de objetos</b> <br><br>  O n√∫mero de objetos de cada tipo √© limitado em um aplicativo baseado no Nucleus SE.  Pode ter de uma a dezesseis tarefas e de zero a dezesseis tipos diferentes de objetos do kernel.  Isso simplifica o endere√ßamento de objetos (veja abaixo).  Essa restri√ß√£o n√£o √© dif√≠cil para aplicativos pequenos para os quais o kernel √© destinado. <br><br>  <b>Endere√ßando objetos</b> <br><br>  Os objetos s√£o endere√ßados usando um "√≠ndice", que pode variar de zero a quinze.  Comparado ao uso usual de ponteiros, isso pode ser mais eficiente em processadores menores e permitir menos mem√≥ria: o √≠ndice requer apenas 4 bits de mem√≥ria;  O endere√ßo √© 16-32 bits. <br><br>  <b>Planejador</b> <br><br>  O agendador pertencia √† √°rea da arquitetura do kernel que foi simplificada.  Em vez de fornecer um mecanismo flex√≠vel com pol√≠ticas de agendamento diferentes, quatro tipos de agendadores separados est√£o dispon√≠veis no kernel;  o planejador espec√≠fico para o aplicativo √© selecionado durante a configura√ß√£o. <br><br>  <b>Funcionalidade limitada</b> <br><br>  Alguns recursos dispon√≠veis no Nucleus RTOS n√£o s√£o implementados no Nucleus SE.  Em alguns casos, isso √© feito para simplificar.  Em outros casos, uma leve perda de funcionalidade em uma √°rea facilita a implementa√ß√£o da outra.  Essas incompatibilidades s√£o destacadas nos artigos relevantes da s√©rie. <br><br>  <b>Uso de mem√≥ria</b> <br><br>  Como o Nucleus SE deve suportar aplicativos de mem√≥ria limitados, aten√ß√£o especial foi dada ao uso de mem√≥ria.  Era para usar a ROM e RAM "cl√°ssicas": a ROM era usada para c√≥digo e dados persistentes;  RAM - para armazenar vari√°veis, uma pilha, etc. Embora um destino espec√≠fico possa ter um esquema diferente, o c√≥digo Nucleus SE √© bastante flex√≠vel;  As defini√ß√µes (#defines) de ROM e RAM s√£o usadas para prefixar todas as estruturas de vari√°veis ‚Äã‚Äãe dados para indicar sua localiza√ß√£o.  Isso pode ser alcan√ßado usando ferramentas. <br><br>  O principal requisito era evitar a c√≥pia desnecess√°ria de dados da ROM para a RAM, pois a RAM pode n√£o ser suficiente.  O mecanismo pelo qual isso √© alcan√ßado √© descrito na se√ß√£o Estruturas de dados do pr√≥ximo artigo. <br><br>  <b>Implementa√ß√£o de API</b> <br><br>  A API do Nucleus SE √© implementada da maneira tradicional: a fun√ß√£o da linguagem C implementa todas as chamadas da API.  Essas chamadas s√£o agrupadas logicamente.  Embora as chamadas de API no Nucleus SE n√£o sejam exatamente as mesmas que no Nucleus RTOS, a funcionalidade geral √© simulada e o mapeamento entre as APIs √© f√°cil.  Detalhes da API Nucleus RTOS ser√£o inclu√≠dos. <br><br>  <b>Se√ß√µes cr√≠ticas</b> <br><br>  O c√≥digo para muitas chamadas de fun√ß√£o da API inclui seq√º√™ncias de instru√ß√µes que manipulam dados do kernel.  Geralmente, os dados podem estar em um estado inv√°lido durante a execu√ß√£o dessas instru√ß√µes, portanto, √© necess√°rio tomar cuidado para evitar interrup√ß√µes.  Ou, pode ser proibido executar c√≥digo de outra tarefa ou interromper o manipulador se puder acessar esses dados (atualmente inv√°lidos).  Tais seq√º√™ncias de instru√ß√µes s√£o chamadas se√ß√µes cr√≠ticas. <br><br>  Um par de macros √© definido chamado NUSE_CS_Enter () e NUSE_CS_Exit ().  Todo o c√≥digo de fun√ß√µes da API Nucleus SE os utiliza para abranger a se√ß√£o cr√≠tica, assim: <br><br>  NUSE_CS_Enter (); <br>  &lt;c√≥digo n√£o interrupt√≠vel&gt; <br>  NUSE_CS_Exit (); <br><br>  Normalmente, essas macros ser√£o expandidas em instru√ß√µes de desativa√ß√£o de instru√ß√µes de interrup√ß√£o e instru√ß√µes de ativa√ß√£o de interrup√ß√£o, respectivamente.  Isso precisar√° ser verificado se o Nucleus SE for implementado em uma arquitetura de processador diferente.  Mais informa√ß√µes sobre como portar o Nucleus SE ser√£o descritas no pr√≥ximo artigo. <br><br>  <b>Escalabilidade</b> <br><br>  Como todos os RTOS modernos, o Nucleus SE √© escal√°vel.  Para garantir que apenas os componentes RTOS usados ‚Äã‚Äãsejam inclu√≠dos, todas as fun√ß√µes da API s√£o apresentadas na forma de uma biblioteca.  Assim, durante a vincula√ß√£o, as fun√ß√µes referenciadas s√£o extra√≠das e inclu√≠das na imagem final do aplicativo.  O Nucleus RTOS usa essa abordagem para o kernel e todos os outros componentes do SO.  O N√∫cleo SE usa uma t√©cnica diferente. <br><br>  Em vez de depender da biblioteca na caixa de ferramentas selecionada, todos os arquivos de origem na distribui√ß√£o do Nucleus SE cont√™m diretivas de compila√ß√£o condicionais.  Para configurar o Nucleus SE para o programa, o desenvolvedor precisa instalar v√°rios caracteres #define (mais sobre isso no pr√≥ximo artigo).  Isso determina quais fun√ß√µes da API s√£o compiladas e, portanto, inclu√≠das no programa. <br><br>  O Nucleus SE aprimora essa abordagem oferecendo um objeto que chamo de "extrema escalabilidade".  V√°rios aspectos da funcionalidade do kernel podem ser ativados e desativados, ou configurados de outras maneiras usando caracteres #define semelhantes.  Assim, o desenvolvedor tem um controle de ponto sobre o uso da mem√≥ria. <br><br>  <b>Qual API?</b> <br><br>  O Nucleus SE possui sua pr√≥pria API, que ser√° descrita em detalhes em artigos futuros.  Para muitos usu√°rios, basta incluir essas chamadas nas fun√ß√µes da API no c√≥digo. <br><br>  Alguns usu√°rios podem preferir usar uma API diferente: padr√£o ou uma que eles estejam familiarizados.  A API do Nucleus SE √© bastante flex√≠vel e permite criar um wrapper que transforma uma interface em outra API. <br><br>  Um dos principais objetivos do desenvolvimento do Nucleus SE √© um alto grau de compatibilidade no n√≠vel do usu√°rio com o Nucleus RTOS.  Embora as APIs sejam diferentes, elas foram projetadas para serem f√°ceis de combinar.  Um wrapper estar√° dispon√≠vel para facilitar o uso da API Nucleus RTOS no Nucleus SE. <br><br>  No pr√≥ximo artigo, continuaremos analisando o Nucleus SE e focando na estrutura interna e na implanta√ß√£o do RTOS. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt418601/">https://habr.com/ru/post/pt418601/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt418589/index.html">O resumo de materiais frescos do mundo do front-end da √∫ltima semana n ¬∞ 324 (23 a 29 de julho de 2018)</a></li>
<li><a href="../pt418591/index.html">Bug Bounty Kyivstar: recompensa pelo acesso de administrador aos servi√ßos Jira, AWS, Apple, Google Developer, Bitbucket - $ 50</a></li>
<li><a href="../pt418593/index.html">Nem todos os fones de ouvido sem fio s√£o igualmente √∫teis ou algumas palavras sobre o problema do codec</a></li>
<li><a href="../pt418597/index.html">Fun√ß√µes para documentar bancos de dados PostgreSQL. Parte tr√™s</a></li>
<li><a href="../pt418599/index.html">5 fontes de dados que transformam dados do APM em an√°lise de desempenho de aplicativos</a></li>
<li><a href="../pt418603/index.html">Smartwatch Matrix PowerWatch que nunca precisa ser carregado</a></li>
<li><a href="../pt418605/index.html">Analistas: capitaliza√ß√£o da Microsoft pode chegar a US $ 1 trilh√£o</a></li>
<li><a href="../pt418607/index.html">Escolhendo um fornecedor no Wi-Fi corporativo</a></li>
<li><a href="../pt418609/index.html">120 kW de energia de reserva ou Como alimentar a propriedade a partir da energia do sol</a></li>
<li><a href="../pt418611/index.html">C√°lculo da pizzaria: Papa Jones, que n√£o se importa com seguran√ßa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>