<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ’€ ğŸ‘‰ğŸ» ğŸ¤˜ğŸ¿ Flightradar24-å¦‚ä½•è¿ä½œï¼Ÿ ç¬¬2éƒ¨åˆ†ï¼ŒADS-Båè®® ğŸ‘©ğŸ¾â€âš–ï¸ ğŸ» ğŸ§œğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å“ˆHa å¯èƒ½æ›¾ç»åœ¨é£æœºä¸Šè®¤è¯†æˆ–é™ªä¼´äº²æˆšæˆ–æœ‹å‹çš„æ¯ä¸ªäººéƒ½ä½¿ç”¨äº†å…è´¹çš„Flightradar24æœåŠ¡ã€‚ è¿™æ˜¯å®æ—¶è·Ÿè¸ªé£æœºä½ç½®çš„éå¸¸æ–¹ä¾¿çš„æ–¹æ³•ã€‚ 



 ç¬¬ä¸€éƒ¨åˆ†æè¿°äº†è¿™ç§åœ¨çº¿æœåŠ¡çš„æ“ä½œåŸç†ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†èµ°å¾—æ›´è¿œï¼Œæ‰¾å‡ºä»é£æœºå‘æ¥æ”¶ç«™å‘é€å’Œæ¥æ”¶çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨Pythonç‹¬ç«‹è§£ç å®ƒä»¬ã€‚ 

 æ•…äº‹ 
 æ˜¾...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Flightradar24-å¦‚ä½•è¿ä½œï¼Ÿ ç¬¬2éƒ¨åˆ†ï¼ŒADS-Båè®®</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443498/"> å“ˆHa å¯èƒ½æ›¾ç»åœ¨é£æœºä¸Šè®¤è¯†æˆ–é™ªä¼´äº²æˆšæˆ–æœ‹å‹çš„æ¯ä¸ªäººéƒ½ä½¿ç”¨äº†å…è´¹çš„Flightradar24æœåŠ¡ã€‚ è¿™æ˜¯å®æ—¶è·Ÿè¸ªé£æœºä½ç½®çš„éå¸¸æ–¹ä¾¿çš„æ–¹æ³•ã€‚ <br><br><img src="https://habrastorage.org/webt/tv/cq/zy/tvcqzyleq96zk-kqmn8p_9cfgey.jpeg" alt="å›¾ç‰‡"><br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†</a>æè¿°äº†è¿™ç§åœ¨çº¿æœåŠ¡çš„æ“ä½œåŸç†ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬å°†èµ°å¾—æ›´è¿œï¼Œæ‰¾å‡ºä»é£æœºå‘æ¥æ”¶ç«™å‘é€å’Œæ¥æ”¶çš„æ•°æ®ï¼Œå¹¶ä½¿ç”¨Pythonç‹¬ç«‹è§£ç å®ƒä»¬ã€‚ <br><a name="habracut"></a><br><h2> æ•…äº‹ </h2><br> æ˜¾ç„¶ï¼Œæœ‰å…³é£æœºçš„æ•°æ®ä¸ä¼šä¼ è¾“ï¼Œå› æ­¤ç”¨æˆ·å¯ä»¥åœ¨æ™ºèƒ½æ‰‹æœºä¸Šçœ‹åˆ°å®ƒä»¬ã€‚ è¯¥ç³»ç»Ÿç§°ä¸ºADS â€“ Bï¼ˆè‡ªåŠ¨ç›¸å…³ç›‘è§†-å¹¿æ’­ï¼‰ï¼Œç”¨äºå°†é£æœºä¿¡æ¯è‡ªåŠ¨ä¼ è¾“åˆ°æ§åˆ¶ä¸­å¿ƒ-ä¼ è¾“å…¶æ ‡è¯†ç¬¦ï¼Œåæ ‡ï¼Œæ–¹å‘ï¼Œé€Ÿåº¦ï¼Œé«˜åº¦å’Œå…¶ä»–æ•°æ®ã€‚ ä»¥å‰ï¼Œåœ¨æ­¤ç±»ç³»ç»Ÿå‡ºç°ä¹‹å‰ï¼Œè°ƒåº¦å‘˜åªèƒ½åœ¨é›·è¾¾ä¸Šçœ‹åˆ°ä¸€ä¸ªç‚¹ã€‚ å½“é£æœºè¿‡å¤šæ—¶ï¼Œè¿™è¿˜ä¸å¤Ÿã€‚ <br><br> ä»æŠ€æœ¯ä¸Šè®²ï¼ŒADS-Bç”±é£æœºä¸Šçš„å‘å°„å™¨ç»„æˆï¼Œè¯¥å‘å°„å™¨ä»¥1090 MHzçš„ç›¸å½“é«˜çš„é¢‘ç‡å®šæœŸå‘é€å¸¦æœ‰ä¿¡æ¯çš„æ•°æ®åŒ…ï¼ˆè¿˜æœ‰å…¶ä»–æ¨¡å¼ï¼Œä½†å®ƒä»¬å¯¹æˆ‘ä»¬è€Œè¨€å¹¶ä¸é‚£ä¹ˆæœ‰è¶£ï¼Œå› ä¸ºåæ ‡ä»…åœ¨æ­¤å¤„ä¼ è¾“ï¼‰ã€‚ å½“ç„¶ï¼Œé™¤äº†å‘å°„å™¨å¤–ï¼Œåœ¨æœºåœºæŸå¤„è¿˜æœ‰ä¸€ä¸ªæ¥æ”¶å™¨ï¼Œä½†æ˜¯å¯¹äºæˆ‘ä»¬å’Œç”¨æˆ·æ¥è¯´ï¼Œæˆ‘ä»¬è‡ªå·±çš„æ¥æ”¶å™¨å¾ˆæœ‰è¶£ã€‚ <br><br> é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä½œä¸ºæ¯”è¾ƒï¼Œç¬¬ä¸€ä¸ªè¿™æ ·çš„ç³»ç»Ÿï¼ŒAirnav Radarboxï¼Œæ˜¯ä¸ºæ™®é€šç”¨æˆ·è®¾è®¡çš„ï¼Œäº2007å¹´é—®ä¸–ï¼Œä»·æ ¼çº¦ä¸º900ç¾å…ƒï¼Œæ¯å¹´çº¦250ç¾å…ƒå€¼å¾—è®¢è´­ç½‘ç»œæœåŠ¡ã€‚ <br><br><img src="https://habrastorage.org/webt/74/dt/np/74dtnpj6jdit1zlt_cr37rq4mju.png"><br><br> æ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">radioscanner</a>è®ºå›ä¸Šé˜…è¯»è¿™äº›ç¬¬ä¸€æ‰¹ä¿„ç½—æ–¯è½¦ä¸»çš„è¯„è®ºã€‚ ç°åœ¨ï¼ŒRTL-SDRæ¥æ”¶å™¨å·²ç»å¹¿æ³›ä½¿ç”¨ï¼Œå¯ä»¥ä»¥30ç¾å…ƒçš„ä»·æ ¼ç»„è£…ç±»ä¼¼çš„è®¾å¤‡ï¼Œæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†</a> ã€‚ æˆ‘ä»¬å°†ç»§ç»­è¿›è¡Œåè®®æœ¬èº«-è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ <br><br><h2> æ¥æ”¶ä¿¡å· </h2><br> é¦–å…ˆï¼Œéœ€è¦è®°å½•ä¿¡å·ã€‚ æ•´ä¸ªä¿¡å·çš„æŒç»­æ—¶é—´ä»…ä¸º120å¾®ç§’ï¼Œå› æ­¤ï¼Œä¸ºäº†èˆ’é€‚åœ°æ‹†å¸å…¶ç»„ä»¶ï¼Œéœ€è¦é‡‡æ ·é¢‘ç‡è‡³å°‘ä¸º5 MHzçš„SDRæ¥æ”¶å™¨ã€‚ <br><br><img src="https://habrastorage.org/webt/mu/ig/uj/muigujxudctclwalfdxl5tzzdam.png" alt="å›¾ç‰‡"><br><br> è®°å½•åï¼Œæˆ‘ä»¬å¾—åˆ°ä¸€ä¸ªWAVæ–‡ä»¶ï¼Œå…¶é‡‡æ ·é¢‘ç‡ä¸º5,000,000ä¸ªæ ·æœ¬/ç§’ï¼Œè¿™æ ·çš„è®°å½•â€œç§°é‡â€ 30ç§’å¤§çº¦éœ€è¦500 MBã€‚ å½“ç„¶ï¼Œç”¨åª’ä½“æ’­æ”¾å™¨æ”¶å¬å®ƒæ˜¯æ²¡æœ‰ç”¨çš„-æ–‡ä»¶ä¸åŒ…å«å£°éŸ³ï¼Œè€Œæ˜¯ç›´æ¥æ•°å­—åŒ–çš„æ— çº¿ç”µä¿¡å·-è¿™å°±æ˜¯è½¯ä»¶æ— çº¿ç”µçš„å·¥ä½œæ–¹å¼ã€‚ <br><br> æˆ‘ä»¬å°†ä½¿ç”¨Pythonæ‰“å¼€å¹¶å¤„ç†æ–‡ä»¶ã€‚ é‚£äº›å¸Œæœ›è‡ªå·±å°è¯•çš„äººå¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä»é“¾æ¥ä¸­</a>ä¸‹è½½æ ·æœ¬è®°å½•ã€‚ <br><br> ä¸‹è½½æ–‡ä»¶ï¼ŒæŸ¥çœ‹å…¶ä¸­çš„å†…å®¹ã€‚ <br><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.io <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> wavfile <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np fs, data = wavfile.read(<span class="hljs-string"><span class="hljs-string">"adsb_20190311_191728Z_1090000kHz_RF.wav"</span></span>) data = data.astype(float) I, Q = data[:, <span class="hljs-number"><span class="hljs-number">0</span></span>], data[:, <span class="hljs-number"><span class="hljs-number">1</span></span>] A = np.sqrt(I*I + Q*Q) plt.plot(A) plt.show()</code> </pre> <br> ç»“æœï¼šåœ¨å™ªå£°èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†æ˜æ˜¾çš„â€œå†²åŠ¨â€ã€‚ <br><br><img src="https://habrastorage.org/webt/ko/v5/ra/kov5rakmt1sysd7yncso6372l70.png"><br><br> å¦‚æœå¢åŠ å›¾å½¢çš„åˆ†è¾¨ç‡ï¼Œåˆ™æ¯ä¸ªâ€œè„‰å†²â€éƒ½æ˜¯ä¸€ä¸ªä¿¡å·ï¼Œå…¶ç»“æ„æ¸…æ™°å¯è§ã€‚ <br><br><img src="https://habrastorage.org/webt/7l/oa/y-/7loay-b4xf16kyy--ik_j4rhh4q.png"><br><br> å¦‚æ‚¨æ‰€è§ï¼Œè¯¥å›¾ç‰‡ä¸ä»¥ä¸Šæè¿°ä¸­æè¿°çš„ä¸€è‡´ã€‚ æ‚¨å¯ä»¥å¼€å§‹å¤„ç†æ•°æ®ã€‚ <br><br><h2> è§£ç æ–¹å¼ </h2><br> é¦–å…ˆï¼Œæ‚¨éœ€è¦è·å¾—ä¸€ä¸ªæ¯”ç‰¹æµã€‚ ä¿¡å·æœ¬èº«ä½¿ç”¨æ›¼å½»æ–¯ç‰¹ç¼–ç è¿›è¡Œç¼–ç ï¼š <br><br><img src="https://habrastorage.org/webt/rh/k3/is/rhk3iskt0btt5s9okaekkaox3w8.png"><br><br> ä»åŠå­—èŠ‚çš„çº§åˆ«å·®å¼‚ä¸­ï¼Œå¾ˆå®¹æ˜“è·å¾—çœŸå®çš„â€œ 0â€å’Œâ€œ 1â€ã€‚ <br><br><pre> <code class="python hljs"> bits_str = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">8</span></span>): pos = start_data + bit_len*p p1, p2 = A[pos: pos + bit_len/<span class="hljs-number"><span class="hljs-number">2</span></span>], A[pos + bit_len/<span class="hljs-number"><span class="hljs-number">2</span></span>: pos + bit_len] avg1, avg2 = np.average(p1), np.average(p2) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> avg1 &lt; avg2: bits_str += <span class="hljs-string"><span class="hljs-string">"0"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">elif</span></span> avg1 &gt; avg2: bits_str += <span class="hljs-string"><span class="hljs-string">"1"</span></span></code> </pre><br> ä¿¡å·æœ¬èº«çš„ç»“æ„å¦‚ä¸‹ï¼š <br><br><img src="https://habrastorage.org/webt/cl/_7/ng/cl_7ngs5clpg97zrplnolcajpcq.png"><br><br> è®©æˆ‘ä»¬æ›´è¯¦ç»†åœ°è€ƒè™‘è¿™äº›å­—æ®µã€‚ <br><br>  <b>DF</b> ï¼ˆä¸‹è¡Œæ ¼å¼ï¼Œ5ä½ï¼‰-å®šä¹‰æ¶ˆæ¯çš„ç±»å‹ã€‚ å®ƒä»¬æœ‰å‡ ç§ç±»å‹ï¼š <br><br><img src="https://habrastorage.org/webt/li/no/dt/linodtcxx6jtskav1aqar14odew.png"><br>  ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¡¨æ¥æº</a> ï¼‰ <br><br> æˆ‘ä»¬åªå¯¹DF17ç±»å‹æ„Ÿå…´è¶£ï¼Œå› ä¸º å®ƒåŒ…å«é£æœºçš„åæ ‡ã€‚ <br><br>  <b>å›½é™…æ°‘èˆªç»„ç»‡</b> ï¼ˆ24ä½ï¼‰æ˜¯å›½é™…ä¸Šå”¯ä¸€çš„é£æœºä»£ç ã€‚ æ‚¨å¯ä»¥é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç½‘ç«™ä¸Šçš„</a>ä»£ç æ£€æŸ¥é£æœºï¼ˆä¸å¹¸çš„æ˜¯ï¼Œä½œè€…å·²åœæ­¢æ›´æ–°æ•°æ®åº“ï¼Œä½†ä»ç„¶æœ‰ç”¨ï¼‰ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºä»£ç 3c5ee2ï¼Œæˆ‘ä»¬å…·æœ‰ä»¥ä¸‹ä¿¡æ¯ï¼š <br><br><img src="https://habrastorage.org/webt/i6/gt/8s/i6gt8sgm9n7zv1u7nspnzsitpk4.png"><br><br> ç¼–è¾‘ï¼šåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡ç« </a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯„è®º</a>ä¸­ï¼Œæ›´è¯¦ç»†åœ°ç»™å‡ºäº†ICAOä»£ç è¯´æ˜ï¼›æˆ‘å»ºè®®æ‚¨ä½¿è‡ªå·±ç†Ÿæ‚‰é‚£äº›äººã€‚ <br><br>  <b>DATA</b> ï¼ˆ56æˆ–112ä½ï¼‰-å®é™…ä¸Šæ˜¯æˆ‘ä»¬å°†è§£ç çš„æ•°æ®ã€‚ æ•°æ®çš„å‰5ä½æ˜¯<b>ç±»å‹ä»£ç </b>å­—æ®µï¼Œå…¶ä¸­åŒ…å«å­˜å‚¨æ•°æ®çš„å­ç±»å‹ï¼ˆä¸è¦ä¸DFæ··æ·†ï¼‰ã€‚ è¿™äº›ç±»å‹æœ‰å¾ˆå¤šï¼š <br><br><img src="https://habrastorage.org/webt/5v/h1/3h/5vh13htes6_pyungnbzkucvqlji.png"><br>  ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¡¨æ¥æº</a> ï¼‰ <br><br> è®©æˆ‘ä»¬çœ‹ä¸€äº›ç¤ºä¾‹åŒ…ã€‚ <br><br>  <b>é£æœºè¯†åˆ«</b> <br><br> äºŒè¿›åˆ¶ç¤ºä¾‹ï¼š <br><br>  00100 011 000101 010111 000111 110111 110001 111000 <br><br> èµ„æ–™æ ä½ï¼š <br><br><pre> <code class="python hljs">+------+------+------+------+------+------+------+------+------+------+ | TC,<span class="hljs-number"><span class="hljs-number">5</span></span> | EC,<span class="hljs-number"><span class="hljs-number">3</span></span> | C1,<span class="hljs-number"><span class="hljs-number">6</span></span> | C2,<span class="hljs-number"><span class="hljs-number">6</span></span> | C3,<span class="hljs-number"><span class="hljs-number">6</span></span> | C4,<span class="hljs-number"><span class="hljs-number">6</span></span> | C5,<span class="hljs-number"><span class="hljs-number">6</span></span> | C6,<span class="hljs-number"><span class="hljs-number">6</span></span> | C7,<span class="hljs-number"><span class="hljs-number">6</span></span> | C8,<span class="hljs-number"><span class="hljs-number">6</span></span> | +------+------+------+------+------+------+------+------+------+------+</code> </pre><br>  TC = 00100b = 4ï¼Œæ¯ä¸ªC1-C8å­—ç¬¦åŒ…å«ä¸å­—ç¬¦ä¸²ä¸­çš„ç´¢å¼•ç›¸å¯¹åº”çš„ä»£ç ï¼š <br>  #ABCDEFGHIJKLMNOPQRSTUVWXYZ ##### _ ################ 0123456789 ###### <br><br> å¯¹çº¿è¿›è¡Œè§£ç åï¼Œå¾ˆå®¹æ˜“è·å¾—å¹³é¢ä»£ç ï¼šEWG7184 <br><br><pre> <code class="python hljs">symbols = <span class="hljs-string"><span class="hljs-string">"#ABCDEFGHIJKLMNOPQRSTUVWXYZ#####_###############0123456789######"</span></span> code_str = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">8</span></span>): c = int(bits_str[<span class="hljs-number"><span class="hljs-number">8</span></span> + <span class="hljs-number"><span class="hljs-number">6</span></span>*p:<span class="hljs-number"><span class="hljs-number">8</span></span> + <span class="hljs-number"><span class="hljs-number">6</span></span>*(p + <span class="hljs-number"><span class="hljs-number">1</span></span>)], <span class="hljs-number"><span class="hljs-number">2</span></span>) code_str += symbols[c] print(<span class="hljs-string"><span class="hljs-string">"Aircraft Identification:"</span></span>, code_str.replace(<span class="hljs-string"><span class="hljs-string">'#'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>))</code> </pre><br>  <b>ç©ºé™ä½ç½®</b> <br><br> å¦‚æœåç§°å¾ˆç®€å•ï¼Œåˆ™åæ ‡ä¼šæ›´å¤æ‚ã€‚ å®ƒä»¬ä»¥2xå¶æ•°å’Œå¥‡æ•°å¸§çš„å½¢å¼ä¼ è¾“ã€‚ åŸŸä»£ç TC = 01011b = 11ã€‚ <br><br><img src="https://habrastorage.org/webt/3i/8h/oj/3i8hojmkecmc0xlnfhkwvf7svk8.png"><br><br> å¶æ•°å’Œå¥‡æ•°åŒ…çš„ç¤ºä¾‹ï¼š <br><br><pre> <code class="python hljs"><span class="hljs-number"><span class="hljs-number">01011</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000101110110</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">10111000111001000</span></span> <span class="hljs-number"><span class="hljs-number">10000110101111001</span></span> <span class="hljs-number"><span class="hljs-number">01011</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000110010000</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">10010011110000110</span></span> <span class="hljs-number"><span class="hljs-number">10000011110001000</span></span></code> </pre><br> åæ ‡çš„è®¡ç®—æ˜¯æ ¹æ®ä¸€ä¸ªç›¸å½“èªæ˜çš„å…¬å¼è¿›è¡Œçš„ï¼š <br><br><img src="https://habrastorage.org/webt/3i/uf/m0/3iufm0e0758rzbjmxmkazgifsqq.png"><br>  ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¥æº</a> ï¼‰ <br><br> æˆ‘ä¸æ˜¯GISä¸“å®¶ï¼Œæ‰€ä»¥æˆ‘ä¸çŸ¥é“å®ƒæ¥è‡ªå“ªé‡Œã€‚ è°åœ¨çŸ¥é“ï¼Œåœ¨è¯„è®ºä¸­å†™ã€‚ <br><br> é«˜åº¦è¢«è®¤ä¸ºæ›´å®¹æ˜“-æ ¹æ®ç‰¹å®šçš„ä½ï¼Œå®ƒå¯ä»¥ä»¥25æˆ–100è‹±å°ºçš„å€æ•°æ˜¾ç¤ºã€‚ <br><br>  <b>ç©ºé™é€Ÿåº¦</b> <br><br>  TC = 19çš„æ•°æ®åŒ… æœ‰è¶£çš„æ˜¯ï¼Œç›¸å¯¹äºåœ°é¢è€Œè¨€ï¼Œé€Ÿåº¦å¯ä»¥æ˜¯å‡†ç¡®çš„ï¼ˆåœ°é¢é€Ÿåº¦ï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”±é£æœºä¼ æ„Ÿå™¨æµ‹å¾—çš„ç›¸å¯¹å‡†ç¡®çš„é€Ÿåº¦ï¼ˆç©ºé€Ÿï¼‰ã€‚ è¿˜ä¼ è¾“è®¸å¤šä¸åŒçš„å­—æ®µï¼š <br><br><img src="https://habrastorage.org/webt/hh/yr/bn/hhyrbnk8nh7qauorxuohetys5fi.png"><br>  ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ¥æº</a> ï¼‰ <br><br><h2> ç»“è®º </h2><br> å¦‚æ‚¨æ‰€è§ï¼Œå½“æ ‡å‡†ä¸ä»…é€‚ç”¨äºä¸“ä¸šäººå‘˜ï¼Œè€Œä¸”é€‚ç”¨äºæ™®é€šç”¨æˆ·æ—¶ï¼ŒADS-BæŠ€æœ¯å·²æˆä¸ºä¸€ç§æœ‰è¶£çš„å…±ç”Ÿæ–¹å¼ã€‚ ä½†æ˜¯ï¼Œå½“ç„¶ï¼Œå…¶ä¸­çš„å…³é”®ä½œç”¨åœ¨äºæ•°å­—SDRæ¥æ”¶å™¨æŠ€æœ¯çš„å»‰ä»·åŒ–ï¼Œè¿™ä½¿å¾—è¯¥è®¾å¤‡èƒ½å¤Ÿä»¥â€œä¸€åˆ†é’±â€çš„ä»·æ ¼æ¥æ”¶è®¾å¤‡ä¸Šé¢‘ç‡é«˜äºåƒå…†èµ«çš„ä¿¡å·ã€‚ <br><br> åœ¨æ ‡å‡†æœ¬èº«ä¸­ï¼Œå½“ç„¶æ¯”ä»€ä¹ˆéƒ½é‡è¦ã€‚ æœ‰å…´è¶£çš„äººå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ICAO</a>é¡µé¢ä¸ŠæŸ¥çœ‹PDFæˆ–è®¿é—®ä¸Šé¢å·²ç»æåˆ°çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç½‘ç«™</a> ã€‚ <br><br> ä¸Šé¢çš„è®¸å¤šå†…å®¹ä¸å¤ªå¯èƒ½æ´¾ä¸Šç”¨åœºï¼Œä½†æˆ‘å¸Œæœ›è‡³å°‘ä»ç„¶æœ‰ä¸€ä¸ªå¤§è‡´çš„æ€è·¯ã€‚ <br><br> é¡ºä¾¿è¯´ä¸€å¥ï¼Œç°æˆçš„Pythonè§£ç å™¨å·²ç»å­˜åœ¨ï¼Œå¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>è¿›è¡Œç ”ç©¶ã€‚  SDRæ¥æ”¶å™¨çš„æ‰€æœ‰è€…å¯ä»¥<a href="">ä»é¡µé¢</a>ç»„è£…å¹¶è¿è¡Œå®Œæˆçš„ADS-Bè§£ç å™¨ï¼Œæœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€éƒ¨åˆ†</a> ã€‚ <br><br> è¿™ç¯‡æ–‡ç« ä¸­æè¿°çš„è§£æå™¨çš„æºä»£ç å·²è¢«åˆ å‡ã€‚ è¿™æ˜¯ä¸€ä¸ªä¸å†’å……ç”Ÿäº§çš„æµ‹è¯•ç¤ºä¾‹ï¼Œä½†æ˜¯å…¶ä¸­èµ·ä½œç”¨äº†ï¼Œæ‚¨å¯ä»¥è§£æä¸Šé¢è®°å½•çš„æ–‡ä»¶ã€‚ <br><div class="spoiler">  <b class="spoiler_title">æºä»£ç ï¼ˆPythonï¼‰</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> __future__ <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> print_function <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy.io <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> wavfile <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> scipy <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> signal <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> math <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sys <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse_message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(data, start, bit_len)</span></span></span><span class="hljs-function">:</span></span> max_len = bit_len*<span class="hljs-number"><span class="hljs-number">128</span></span> A = data[start:start + max_len] A = signal.resample(A, <span class="hljs-number"><span class="hljs-number">10</span></span>*max_len) bits = np.zeros(<span class="hljs-number"><span class="hljs-number">10</span></span>*max_len) bit_len *= <span class="hljs-number"><span class="hljs-number">10</span></span> start_data = bit_len*<span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-comment"><span class="hljs-comment"># Parse first 8 bits bits_str = "" for p in range(8): pos = start_data + bit_len*p p1, p2 = A[pos: pos + bit_len/2], A[pos + bit_len/2: pos + bit_len] avg1, avg2 = np.average(p1), np.average(p2) if avg1 &lt; avg2: bits_str += "0" elif avg1 &gt; avg2: bits_str += "1" df = int(bits_str[0:5], 2) # Aircraft address (db - https://junzis.com/adb/?q=3b1c5c ) bits_str = "" for p in range(8, 32): pos = start_data + bit_len * p p1, p2 = A[pos: pos + bit_len / 2], A[pos + bit_len / 2: pos + bit_len] avg1, avg2 = np.average(p1), np.average(p2) if avg1 &lt; avg2: bits_str += "0" elif avg1 &gt; avg2: bits_str += "1" # print "Aircraft address:", bits_str, hex(int(bits_str, 2)) address = hex(int(bits_str, 2)) # Filter specific aircraft (optional) # if address != "0x3c5ee2": # return if df == 16 or df == 17 or df == 18 or df == 19 or df == 20 or df == 21: # print "Pos:", start, "DF:", msg_type # Data (56bit) bits_str = "" for p in range(32, 88): pos = start_data + bit_len*p p1, p2 = A[pos: pos + bit_len/2], A[pos + bit_len/2: pos + bit_len] avg1, avg2 = np.average(p1), np.average(p2) if avg1 &lt; avg2: bits_str += "0" # bits[pos + bit_len / 2] = 50 elif avg1 &gt; avg2: bits_str += "1" # http://www.lll.lu/~edward/edward/adsb/DecodingADSBposition.html # print "Data:" # print bits_str[:8], bits_str[8:20], bits_str[20:22], bits_str[22:22+17], bits_str[39:39+17] # Type Code: tc, ec = int(bits_str[:5], 2), int(bits_str[5:8], 2) # print("DF:", df, "TC:", tc) # 1 - 4 Aircraft identification # 5 - 8 Surface position # 9 - 18 Airborne position (w/ Baro Altitude) # 19 Airborne velocities if tc &gt;= 1 and tc &lt;= 4: # and (df == 17 or df == 18): print("Aircraft address:", address) print("Data:") print(bits_str[:8], bits_str[8:14], bits_str[14:20], bits_str[20:26], bits_str[26:32], bits_str[32:38], bits_str[38:44]) symbols = "#ABCDEFGHIJKLMNOPQRSTUVWXYZ#####_###############0123456789######" code_str = "" for p in range(8): c = int(bits_str[8 + 6*p:8 + 6*(p + 1)], 2) code_str += symbols[c] print("Aircraft Identification:", code_str.replace('#', '')) print() if tc == 11: print("Aircraft address:", address) print("Data: (11)") print(bits_str[:8], bits_str[8:20], bits_str[20:22], bits_str[22:22+17], bits_str[39:39+17]) # Bit 22 contains the F flag which indicates which CPR format is used (odd or even) # First frame has F flag = 0 so is even and the second frame has F flag = 1 so odd # f = bits_str[21:22] # print("F:", int(f, 2)) # Altitude alt1b = bits_str[8:20] if alt1b[-5] == '1': bits = alt1b[:-5] + alt1b[-4:] n = int(bits, 2) alt_ft = n*25 - 1000 print("Alt (ft)", alt_ft) # lat_dec = int(bits_str[22:22+17], 2) # lon_dec = int(bits_str[39:39+17], 2) # print("Lat/Lon:", lat_dec, lon_dec) # http://airmetar.main.jp/radio/ADS-B%20Decoding%20Guide.pdf print() if tc == 19: print("Aircraft address:", address) print("Data:") # print(bits_str) print(bits_str[:5], bits_str[5:8], bits_str[8:10], bits_str[10:13], bits_str[13] ,bits_str[14:24], bits_str[24], bits_str[25:35], bits_str[35:36], bits_str[36:65]) subtype = int(bits_str[5:8], 2) # https://mode-s.org/decode/adsb/airborne-velocity.html spd, hdg, rocd = -1, -1, -1 if subtype == 1 or subtype == 2: print("Velocity Subtype 1: Ground speed") v_ew_sign = int(bits_str[13], 2) v_ew = int(bits_str[14:24], 2) - 1 # east-west velocity v_ns_sign = int(bits_str[24], 2) v_ns = int(bits_str[25:35], 2) - 1 # north-south velocity v_we = -1*v_ew if v_ew_sign else v_ew v_sn = -1*v_ns if v_ns_sign else v_ns spd = math.sqrt(v_sn*v_sn + v_we*v_we) # unit in kts hdg = math.atan2(v_we, v_sn) hdg = math.degrees(hdg) # convert to degrees hdg = hdg if hdg &gt;= 0 else hdg + 360 # no negative val if subtype == 3: print("Subtype Subtype 3: Airspeed") hdg = int(bits_str[14:24], 2)/1024.0*360.0 spd = int(bits_str[25:35], 2) vr_sign = int(bits_str[36], 2) vr = int(bits_str[36:45], 2) rocd = -1*vr if vr_sign else vr # rate of climb/descend print("Speed (kts):", spd, "Rate:", rocd, "Heading:", hdg) print() # print() def calc_coordinates(): def _cprN(lat, is_odd): nl = _cprNL(lat) - is_odd return nl if nl &gt; 1 else 1 def _cprNL(lat): try: nz = 15 a = 1 - math.cos(math.pi / (2 * nz)) b = math.cos(math.pi / 180.0 * abs(lat)) ** 2 nl = 2 * math.pi / (math.acos(1 - a/b)) return int(math.floor(nl)) except: # happens when latitude is +/-90 degree return 1 def floor_(x): return int(math.floor(x)) lat1b, lon1b, alt1b = "10111000111010011", "10000110111111000", "000101111001" lat2b, lon2b, alt2b = "10010011101011100", "10000011000011011", "000101110111" lat1, lon1, alt1 = int(lat1b, 2), int(lon1b, 2), int(alt1b, 2) lat2, lon2, alt2 = int(lat2b, 2), int(lon2b, 2), int(alt2b, 2) # 131072 is 2^17, since CPR lat and lon are 17 bits each cprlat_even, cprlon_even = lat1/131072.0, lon1/131072.0 cprlat_odd, cprlon_odd = lat2/131072.0, lon2/131072.0 print(cprlat_even, cprlon_even) j = floor_(59*cprlat_even - 60*cprlat_odd) print(j) air_d_lat_even = 360.0 / 60 air_d_lat_odd = 360.0 / 59 # Lat lat_even = float(air_d_lat_even * (j % 60 + cprlat_even)) lat_odd = float(air_d_lat_odd * (j % 59 + cprlat_odd)) if lat_even &gt;= 270: lat_even = lat_even - 360 if lat_odd &gt;= 270: lat_odd = lat_odd - 360 # Lon ni = _cprN(lat_even, 0) m = floor_(cprlon_even * (_cprNL(lat_even)-1) - cprlon_odd * _cprNL(lat_even) + 0.5) lon = (360.0 / ni) * (m % ni + cprlon_even) print("Lat", lat_even, "Lon", lon) # Altitude # Q-bit (bit 48) indicates whether the altitude is encoded in multiples of 25 or 100 ft (0: 100 ft, 1: 25 ft) # The value can represent altitudes from -1000 to +50175 ft. if alt1b[-5] == '1': bits = alt1b[:-5] + alt1b[-4:] n = int(bits, 2) alt_ft = n*25 - 1000 print("Alt (ft)", alt_ft) fs, data = wavfile.read("adsb_20190311_191728Z_1090000kHz_RF.wav") T = 1/fs print("Sample rate %f MS/s" % (fs / 1e6)) print("Cnt samples %d" % len(data)) print("Duration: %fs" % (T * len(data))) data = data.astype(float) cnt = data.shape[0] # Processing only part on file (faster): # cnt = 10000000 # data = data[:cnt] print("Processing I/Q...") I, Q = data[:, 0], data[:, 1] A = np.sqrt(I*I + Q*Q) bits = np.zeros(cnt) # To see scope without any processing, uncomment # plt.plot(A) # plt.show() # sys.exit(0) print("Extracting signals...") pos = 0 avg = 200 msg_start = 0 # Find beginning of each signal while pos &lt; cnt - 16*1024: # P1 - message start while pos &lt; cnt - 16*1024: if A[pos] &lt; avg and A[pos+1] &gt; avg and pos - msg_start &gt; 1000: msg_start = pos bits[pos] = 100 pos += 4 break pos += 1 start1, start2, start3, start4 = msg_start, 0, 0, 0 # P2 while pos &lt; cnt - 16*1024: if A[pos] &lt; avg and A[pos+1] &gt; avg: start2 = pos bits[pos] = 90 pos += 1 break pos += 1 # P3 while pos &lt; cnt - 16*1024: if A[pos] &lt; avg and A[pos+1] &gt; avg: start3 = pos bits[pos] = 80 pos += 1 break pos += 1 # P4 while pos &lt; cnt - 16*1024: if A[pos] &lt; avg and A[pos+1] &gt; avg: start4 = pos bits[pos] = 70 pos += 1 break pos += 1 sig_diff = start4 - start1 if 20 &lt; sig_diff &lt; 25: bits[msg_start] = 500 bit_len = int((start4 - start1) / 4.5) # print(pos, start1, start4, ' - ', bit_len) # start = start1 + 8*bit_len parse_message(A, msg_start, bit_len) pos += 450 # For debugging: check signal start # plt.plot(A) # plt.plot(bits) # plt.show()</span></span></code> </pre><br></div></div><br> å¸Œæœ›æœ‰äººæ„Ÿå…´è¶£ï¼Œæ„Ÿè°¢æ‚¨çš„å…³æ³¨ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN443498/">https://habr.com/ru/post/zh-CN443498/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN443486/index.html">ReLEx SMILEï¼šå¦‚ä½•åœ¨é¢„æµ‹ä¸­ä¸çŠ¯é”™è¯¯</a></li>
<li><a href="../zh-CN443488/index.html">å…·æœ‰React Hooksçš„åŠŸèƒ½ç»„ä»¶ã€‚ ä»–ä»¬ä¸ºä»€ä¹ˆæ›´å¥½ï¼Ÿ</a></li>
<li><a href="../zh-CN443490/index.html">ä¸ºä»€ä¹ˆæˆ‘å‡å°‘åœ¨Debianä¸Šçš„å·¥ä½œ</a></li>
<li><a href="../zh-CN443492/index.html">é¢å‘Linuxçˆ±å¥½è€…å’Œä¸“å®¶çš„æ¸¸æˆ</a></li>
<li><a href="../zh-CN443494/index.html">æŒ‡å—ï¼šå¦‚ä½•åœ¨AppSumoä¸Šå¯åŠ¨SaaSäº§å“-æˆåŠŸå’Œä¸€äº›é”™è¯¯</a></li>
<li><a href="../zh-CN443500/index.html">å…·æœ‰React Hooksçš„åŠŸèƒ½ç»„ä»¶ã€‚ ä¸ºä»€ä¹ˆä¼šæ›´å¥½ï¼Ÿ</a></li>
<li><a href="../zh-CN443502/index.html">ä¸ºä»€ä¹ˆæ­£å¥½4å¹´å‰ï¼ŒNASAç”¨Atlas Vç«ç®­æ‹æ‘„äº†å¡çº³ç»´æ‹‰å°”è§’çš„å¤œç©ºï¼Ÿ</a></li>
<li><a href="../zh-CN443504/index.html">ä¸‡ç»´ç½‘å·²æœ‰ä¸‰åå¹´å†å²äº†-æ¥ä¸‹æ¥ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</a></li>
<li><a href="../zh-CN443506/index.html">Googleè¡¨æ ¼ä¸­YouTubeçš„ç®€å•è§£æå™¨</a></li>
<li><a href="../zh-CN443510/index.html">Compaq Armada 7700ç¬”è®°æœ¬ç”µè„‘-Compaq LTEäº§å“çº¿çš„å‘å±•</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>