<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🏇🏻 👌🏾 Ⓜ️ Livro "Elasticsearch, Kibana, Logstash e próxima geração de mecanismos de pesquisa" 🤑 🖥️ 🐻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oi, habrozhiteli! Publicamos um livro sobre o Elastic Stack, desenvolvido para profissionais que trabalham com grandes volumes de dados e desejam extr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Livro "Elasticsearch, Kibana, Logstash e próxima geração de mecanismos de pesquisa"</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/451750/"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/8k/tg/_2/8ktg_2verqqbx9jltq2fodz8weu.jpeg" align="left" alt="imagem"></a>  Oi, habrozhiteli!  Publicamos um livro sobre o Elastic Stack, desenvolvido para profissionais que trabalham com grandes volumes de dados e desejam extraí-los com segurança de qualquer fonte em qualquer formato, além de pesquisar, analisar e visualizar dados em tempo real.  Este livro é para você, se você precisar de uma compreensão fundamental do trabalho do Elastic Stack nas áreas de computação distribuída e processamento de dados em tempo real. <br><br>  Abaixo será fornecida a estrutura do livro sobre uma passagem sobre agregação. <br><a name="habracut"></a><br><h3>  Estrutura do livro </h3><br>  O capítulo 1, “Introdução ao Elastic Stack”, apresenta os principais componentes do Elastic Stack, explica seu papel na estrutura geral e descreve a finalidade de cada componente.  Este capítulo também discute a necessidade de pesquisa e análise distribuída e escalável que são alcançadas com o Elasticsearch.  No final, há um guia para baixar e instalar o Elasticsearch e o Kibana para que você possa começar a usar essas ferramentas. <br><br>  O capítulo 2, “Introdução ao Elasticsearch”, apresenta os principais princípios do mecanismo de pesquisa do Elasticsearch, que é a base do Elastic Stack.  Você se familiarizará com conceitos como índices, tipos, nós e clusters.  Você também aprenderá como usar a API REST para executar operações básicas. <br><br>  O capítulo 3, “A pesquisa é importante”, enfoca os métodos de pesquisa fornecidos pelo Elasticsearch.  Você aprenderá sobre os conceitos básicos de análise de texto, tokenizadores, analisadores e recursos de pesquisa relevante.  Este capítulo também fornece exemplos práticos de pesquisas relevantes. <br><br>  O capítulo 4, “Analisando dados com o Elasticsearch”, fala sobre os diferentes tipos de agregação.  Inclui exemplos que ajudarão você a entender melhor os princípios da análise de dados.  Você aprenderá como usar diferentes tipos de agregações - do simples ao complexo, para navegar em grandes conjuntos de dados.  Depois de ler este capítulo, você saberá quando e qual opção de agregação é melhor usar. <br><br>  O Capítulo 5, Análise de log, fornece informações sobre a necessidade de usar o Logstash, sua arquitetura, instalação e configuração.  O Elastic 5 fornece uma ferramenta Ingest Node que pode substituir a configuração do Logstash.  Ao ler este capítulo, você aprenderá como criar contêineres usando o Elastic Ingest Node. <br><br>  O Capítulo 6, “Projetando contêineres com Logstash”, fornece um entendimento básico do Logstash, que permite identificar dinamicamente dados de várias fontes e normalizá-los com os filtros selecionados.  Você aprenderá como ter uma ampla variedade de filtros coloca o Logstash em pé de igualdade com outras estruturas de processamento de streaming em tempo real e quase em tempo real sem escrever código.  Você também será apresentado à plataforma Beats e ao componente FileBeat usado para transportar arquivos de log (arquivos de log) de máquinas remotas. <br><br>  O Capítulo 7, “Visualizando dados no Kibana”, mostra como você pode usar o Kibana para visualizar e apresentar seus dados de forma impressionante.  Um exemplo de um conjunto de dados simples descreve a criação de visualizações em alguns cliques. <br><br>  O capítulo 8, Elastic X-Pack, fala sobre a extensão Elasticsearch.  Nesse momento, você já aprenderá o Elasticsearch e seus principais componentes para criar contêineres de dados e poderá conectar extensões para resolver problemas específicos.  Neste capítulo, você lerá como instalar e configurar os componentes do X-Pack no Elastic Stack, aprender o básico de segurança e monitoramento e aprender como adicionar várias notificações. <br><br>  O Capítulo 9, “Colocando a pilha elática em funcionamento”, fornece recomendações para colocar o complexo Elastic Stack em operação comercial.  Você receberá recomendações sobre como implementar seu aplicativo e alterar as configurações padrão de acordo com os requisitos da operação.  Você também aprenderá como usar os serviços de nuvem do Elastic Cloud. <br><br>  O capítulo 10, “Criando um aplicativo para analisar dados de sensores”, descreve a criação de um aplicativo para analisar e processar dados de várias fontes.  Você aprenderá como modelar dados no Elasticsearch, criar contêineres e visualizá-los no Kibana.  Você também aprenderá como usar efetivamente os componentes do X-Pack para garantir a segurança e o monitoramento de seus contêineres, receber notificações de vários eventos. <br><br>  O Capítulo 11, Monitoramento da infraestrutura do servidor, demonstra as possibilidades de usar o Elastic Stack para configurar o monitoramento em tempo real de servidores e aplicativos criados inteiramente no Elastic Stack.  Você se familiarizará com outro componente da plataforma Beats - Metricbeat, que é usado para monitorar servidores / aplicativos. <br><br><h3>  Agregações da soma, média, valor máximo e valor mínimo </h3><br>  Encontrar a soma de um campo, um valor mínimo ou máximo ou uma média é uma operação bastante comum.  No SQL, uma consulta para calcular a soma é a seguinte: <br><br><pre><code class="plaintext hljs">SELECT sum(downloadTotal) FROM usageReport;</code> </pre> <br>  Assim, a soma do campo downloadTotal será calculada para todas as entradas na tabela.  Para fazer isso, percorra todos os registros da tabela ou todos os registros no contexto selecionado e adicione os valores dos campos selecionados. <br><br>  No Elasticsearch, você pode escrever uma consulta semelhante usando a agregação de soma. <br><br><h3>  Agregação de quantidade </h3><br>  Veja como escrever uma agregação simples da quantidade: <br><br><pre> <code class="plaintext hljs">GET bigginsight/_search { "aggregations": { 1 "download_sum": { 2 "sum": { 3 "field": "downloadTotal" 4 } } }, "size": 0 5 }</code> </pre> <br><ol><li>  Os aggs ou agregações no nível superior devem servir como um invólucro para agregação. </li><li>  Atribua um nome à agregação.  Nesse caso, agregamos a quantia no campo downloadTotal e selecionamos o nome apropriado download_sum.  Você pode ligar para ela como quiser.  Este campo é útil quando precisamos encontrar essa agregação específica nos resultados da resposta. </li><li>  Como agregamos a soma, portanto, o elemento soma é aplicado. </li><li>  Queremos agregar termos pelo campo downloadTotal. </li><li>  Especifique size = 0 para impedir que resultados brutos entrem na resposta.  Precisamos apenas de resultados de agregação, não de resultados de pesquisa.  Como não especificamos nenhum elemento de consulta de alto nível, a consulta funcionará com todos os documentos.  Não precisamos de documentos não processados ​​(ou resultados de pesquisa) na resposta. </li></ol><br>  A resposta deve ser assim: <br><br><pre> <code class="plaintext hljs">{ "took": 92, ... "hits": { "total": 242836, 1 "max_score": 0, "hits": [] }, "aggregations": { 2 "download_sum": { 3 "value": 2197438700 4 } } }</code> </pre> <br>  Vamos entender os principais parâmetros da resposta. <br><br><ol><li>  O elemento hits.total mostra o número de documentos que correspondem ao contexto da solicitação.  Se nenhuma consulta ou filtro adicional for especificado, todos os documentos no tipo ou índice serão incluídos. </li><li>  Por analogia com a solicitação, essa resposta é colocada na agregação para apresentação neste formulário. </li><li>  A resposta da agregação solicitada é chamada download_sum, portanto, obtemos nossa resposta da agregação da quantidade dentro do elemento com o mesmo nome. </li><li>  O valor real é exibido após a aplicação da quantidade de agregação. </li></ol><br>  Agregações de valores médios, máximos e mínimos são muito semelhantes.  Vamos considerá-los brevemente. <br><br><h3>  Agregação média </h3><br>  A agregação da média localiza o valor médio para todos os documentos no contexto da solicitação: <br><br><pre> <code class="plaintext hljs">GET bigginsight/_search { "aggregations": { "download_average": { 1 "avg": { 2 "field": "downloadTotal" } } }, "size": 0 }</code> </pre> <br>  As diferenças visíveis da agregação da quantia são as seguintes. <br><br><ol><li>  Escolhemos outro nome, download_average, para que fique claro que essa agregação foi projetada para calcular o valor médio. </li><li>  O tipo de agregação a ser executada é avg em vez de soma, como no exemplo anterior. </li></ol><br>  A estrutura da resposta é idêntica à resposta da subseção anterior, mas no campo valor, veremos o valor médio dos campos solicitados. <br><br>  As agregações dos valores mínimo e máximo são semelhantes. <br><br><h3>  Agregação mínima </h3><br>  Encontre o valor mínimo do campo downloadTotal em todo o índice / tipo: <br><br><pre> <code class="plaintext hljs">GET bigginsight/_search { "aggregations": { "download_min": { "min": { "field": "downloadTotal" } } }, "size": 0 }</code> </pre> <br><h3>  Agregação do valor máximo </h3><br>  Encontre o valor máximo do campo downloadTotal em todo o índice / tipo: <br><br><pre> <code class="plaintext hljs">GET bigginsight/_search { "aggregations": { "download_max": { "max": { "field": "downloadTotal" } } }, "size": 0 }</code> </pre> <br>  Essas são agregações muito simples.  Agora vamos ver agregações mais complicadas de estatísticas e estatísticas avançadas. <br><br><h3>  Agregações de estatísticas e estatísticas avançadas </h3><br>  Essas agregações calculam alguns valores estatísticos comuns em uma única consulta e sem executar consultas adicionais.  Como as estatísticas são calculadas de uma só vez e não solicitadas várias vezes, os recursos do Elasticsearch são salvos.  O código do cliente também se torna mais fácil se você estiver interessado em vários tipos desses dados.  Veja um exemplo de agregação de estatísticas. <br><br><h3>  Agregação de estatísticas </h3><br>  A agregação de estatísticas calcula a quantidade, média, valor máximo, valor mínimo e o número total de documentos em uma execução: <br><br><pre> <code class="plaintext hljs">GET bigginsight/_search { "aggregations": { "download_stats": { "stats": { "field": "downloadTotal" } } }, "size": 0 }</code> </pre> <br>  Solicitar estatísticas na estrutura é semelhante a outras agregações de métricas que você já conhece;  nada de especial acontece aqui. <br><br>  A resposta deve ser assim: <br><br><pre> <code class="plaintext hljs">{ "took": 4, ..., "hits": { "total": 242836, "max_score": 0, "hits": [] }, "aggregations": { "download_stats": { "count": 242835, "min": 0, "max": 241213, "avg": 9049.102065188297, "sum": 2197438700 } } }</code> </pre> <br>  Como você pode ver, a resposta com o elemento download_stats contém o total, o mínimo, o máximo, a média e o total.  Essa conclusão é muito conveniente, pois reduz o número de solicitações e simplifica o código do cliente. <br><br>  Veja a agregação de estatísticas avançadas. <br><br><h3>  Agregação de estatísticas avançadas </h3><br>  A agregação de estatísticas estendidas retorna um pouco mais de estatísticas, além da opção anterior: <br><br><pre> <code class="plaintext hljs">GET bigginsight/_search { "aggregations": { "download_estats": { "extended_stats": { "field": "downloadTotal" } } }, "size": 0 }</code> </pre> <br>  A resposta será assim: <br><br><pre> <code class="plaintext hljs">{ "took": 15, "timed_out": false, ..., "hits": { "total": 242836, "max_score": 0, "hits": [] }, "aggregations": { "download_estats": { "count": 242835, "min": 0, "max": 241213, "avg": 9049.102065188297, "sum": 2197438700, "sum_of_squares": 133545882701698, "variance": 468058704.9782911, "std_deviation": 21634.664429528162, "std_deviation_bounds": { "upper": 52318.43092424462, "lower": -34220.22679386803 } } } }</code> </pre> <br>  Na resposta, você também obtém a soma dos quadrados, a discrepância, o desvio padrão e seus limites. <br><br><h3>  Agregação de potência </h3><br>  A contagem de elementos exclusivos pode ser feita usando agregação de energia.  Isso é semelhante à pesquisa de um resultado da consulta, como mostrado abaixo: <br><br><pre> <code class="plaintext hljs">select count(*) from (select distinct username from usageReport) u;</code> </pre> <br>  Determinar a potência ou o número de valores exclusivos para um campo específico é uma tarefa bastante comum.  Por exemplo, se você tiver um fluxo de cliques (fluxo de cliques) de vários visitantes do seu site, poderá descobrir quantos visitantes únicos existem no site em um dia, semana ou mês selecionado. <br><br>  Vamos descobrir como encontrar o número de visitantes únicos usando os dados de tráfego de rede disponíveis: <br><br><pre> <code class="plaintext hljs">GET bigginsight/_search { "aggregations": { "unique_visitors": { "cardinality": { "field": "username" } } }, "size": 0 }</code> </pre> <br>  A resposta da agregação de energia tem a mesma aparência de outras agregações de métricas: <br><br><pre> <code class="plaintext hljs">{ "took": 110, ..., "hits": { "total": 242836, "max_score": 0, "hits": [] }, "aggregations": { "unique_visitors": { "value": 79 } } }</code> </pre> <br>  Agora que descobrimos os tipos mais simples de agregações, podemos considerar algumas agregações segmentadas. <br><br><h3>  Sobre autores </h3><br>  <b>Pranav Shukla</b> é o fundador e chefe da Valens DataLabs, engenheiro, marido e pai de dois filhos.  Arquiteto de big data e programador profissional usando linguagens de programação baseadas em JVM.  Pranav desenvolve aplicativos corporativos para empresas e startups da Fortune 500 há mais de 14 anos. Sua principal especialização é a criação de aplicativos escaláveis ​​orientados a dados baseados em JVM, Java / Scala, o ecossistema Hadoop, bancos de dados Apache Spark e NoSQL.  Desenvolvimento ativo em áreas relacionadas à organização de big data, análise e aprendizado de máquina. <br><br>  A Pranav fundou o Valens DataLabs para ajudar outras empresas a usar dados para aumentar sua competitividade.  A Valens DataLabs é especializada na criação de uma nova geração de aplicativos em nuvem para trabalhar com big data e tecnologias da web.  O trabalho da empresa é baseado no uso de práticas flexíveis, nos princípios de manufatura enxuta, no desenvolvimento baseado em testes e comportamento, na integração contínua e na implantação contínua de sistemas de software sustentáveis. <br><br>  <b>Sharat Kumar M. N.</b> é mestre em ciência da computação pela Universidade do Texas, Dallas, EUA.  Ele trabalha no setor de TI há mais de dez anos, atualmente ocupa o cargo de desenvolvedor de soluções Oracle da Elasticsearch, é um apoiador da Elastic Stack.  Orador ávido, ele já falou em várias conferências de ciência e tecnologia, incluindo o Oracle Code Event.  Sharat - Elastic Certified Instructor (Elastic Certified Instructor) - um dos poucos especialistas técnicos do mundo que a Elastic Inc.  concedeu o direito oficial de realizar treinamento "dos criadores do Elastic".  Ele também é um entusiasta em aprendizado de máquina e ciência de dados. <br><br><h3>  Sobre o Science Editor </h3><br>  <b>Marcelo Ochoa</b> trabalha no laboratório da Faculdade de Ciências Exatas da Universidade Nacional do Centro de Buenos Aires (Universidade Nacional do Centro de Provincia de Buenos Aires), Argentina.  Ele é CTO da Scotas (www.scotas.com), especialista em soluções em tempo pseudo-real usando as tecnologias Apache Solr e Oracle.  Marcelo consegue trabalhar na universidade e se envolver em projetos relacionados ao Oracle e tecnologias de big data.  Anteriormente, ele trabalhou com bancos de dados, web e tecnologias Java.  No mundo XML, Marcelo é conhecido como desenvolvedor do DB Generator para o projeto Apache Cocoon.  Ele participou da criação de projetos de código aberto, como DBPrism, DBPrism CMS e Restlet.org, onde trabalhou no Oracle XDB Restlet Adapter, que é uma alternativa para gravar serviços Web REST nativos no banco de dados JVM. <br><br>  Desde 2006, ele participa do programa Oracle ACE e ingressou recentemente no projeto Docker Mentor. <br><br>  »Mais informações sobre o livro podem ser encontradas no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site do editor</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Conteúdo</a> <br>  » <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Trecho</a> <br><br>  Cupom de desconto de 25% para <b>vendedores ambulantes</b> - <b>Elasticsearch</b> <br><br>  Após o pagamento da versão em papel do livro, uma versão eletrônica do livro é enviada por e-mail. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt451750/">https://habr.com/ru/post/pt451750/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt451728/index.html">RESTinio é um servidor HTTP assíncrono. Assíncrono</a></li>
<li><a href="../pt451738/index.html">Breve revisão do artigo "DeViSE: Um Modelo de Incorporação Visual-Semântica Profunda"</a></li>
<li><a href="../pt451742/index.html">Um dia antes do DotNext 2019 Piter. Anúncio de transmissão gratuita</a></li>
<li><a href="../pt451746/index.html">MegaSlerm para engenheiros e arquitetos Kubernetes</a></li>
<li><a href="../pt451748/index.html">Monitorando o status do SSD em matrizes Qsan</a></li>
<li><a href="../pt451752/index.html">30º aniversário de insegurança desenfreada</a></li>
<li><a href="../pt451754/index.html">Como encontramos expressões lambda no IntelliJ IDEA</a></li>
<li><a href="../pt451758/index.html">Uplinks adicionais na arquitetura lógica do sistema Intel C620</a></li>
<li><a href="../pt451760/index.html">Usando Golang para criar microsserviços no The Economist: uma retrospectiva</a></li>
<li><a href="../pt451766/index.html">Heisenbug 2019 Piter: o que acontecerá na transmissão gratuita e o que apenas no evento</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>