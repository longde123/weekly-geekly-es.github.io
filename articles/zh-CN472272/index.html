<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§Ÿ ğŸš´ğŸ¼ ğŸœï¸ åœ¨Three.jsä¸Šå…·æœ‰æ—§æ°”æ°›çš„æ–°æ¸¸æˆã€‚ ç¬¬äºŒéƒ¨åˆ† ğŸ”ï¸ ğŸš¿ ğŸ”„</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘è°ˆåˆ°äº†åœ¨ä½¿ç”¨Three.jsä¸ºæµè§ˆå™¨åˆ›å»º3Dæ¸¸æˆçš„è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€‚ ç°åœ¨ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»è§£å†³ç¼–å†™æ¸¸æˆæ—¶é‡åˆ°çš„ä¸€äº›é‡è¦é—®é¢˜ï¼Œä¾‹å¦‚æ„å»ºå…³å¡ï¼Œæ£€æµ‹ç¢°æ’ä»¥åŠå°†å›¾åƒè°ƒæ•´ä¸ºæµè§ˆå™¨çª—å£çš„ä»»ä½•çºµæ¨ªæ¯”ã€‚ 


 æ¶²ä½å›¾ 
 å®é™…ä¸Šï¼Œå…³å¡æœ¬èº«æ˜¯åœ¨3Dç¼–è¾‘å™¨ä¸­åˆ›å»ºçš„ï¼Œå³å®ƒä»¬çš„å‡ ä½•å½¢çŠ¶ï¼Œçº¹ç†è´´å›¾ï¼Œé˜´å½±çƒ˜ç„™ç­‰...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>åœ¨Three.jsä¸Šå…·æœ‰æ—§æ°”æ°›çš„æ–°æ¸¸æˆã€‚ ç¬¬äºŒéƒ¨åˆ†</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/472272/"> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç¬¬ä¸€</a>éƒ¨åˆ†ä¸­ï¼Œæˆ‘è°ˆåˆ°äº†åœ¨ä½¿ç”¨Three.jsä¸ºæµè§ˆå™¨åˆ›å»º3Dæ¸¸æˆçš„è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ã€‚ ç°åœ¨ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»è§£å†³ç¼–å†™æ¸¸æˆæ—¶é‡åˆ°çš„ä¸€äº›é‡è¦é—®é¢˜ï¼Œä¾‹å¦‚æ„å»ºå…³å¡ï¼Œæ£€æµ‹ç¢°æ’ä»¥åŠå°†å›¾åƒè°ƒæ•´ä¸ºæµè§ˆå™¨çª—å£çš„ä»»ä½•çºµæ¨ªæ¯”ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ds/jr/45/dsjr45-khpwum64yaoqvndmfynw.jpeg"></div><br><h3> æ¶²ä½å›¾ </h3><br> å®é™…ä¸Šï¼Œå…³å¡æœ¬èº«æ˜¯åœ¨3Dç¼–è¾‘å™¨ä¸­åˆ›å»ºçš„ï¼Œå³å®ƒä»¬çš„å‡ ä½•å½¢çŠ¶ï¼Œçº¹ç†è´´å›¾ï¼Œé˜´å½±çƒ˜ç„™ç­‰ã€‚ æˆ‘åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­æè¿°äº†æ‰€æœ‰è¿™äº›ã€‚ ä¸ºä»€ä¹ˆè¿˜æœ‰å…¶ä»–è®¡åˆ’ï¼Ÿ äº‹å®æ˜¯Three.jsä¸æä¾›ä»»ä½•ç‰©ç†å¼•æ“ï¼Œå› æ­¤æˆ‘ä½¿ç”¨çº§åˆ«æ–¹æ¡ˆæ¥è¯†åˆ«éšœç¢ã€‚ <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pk/7u/j6/pk7uj6hvp3cyrkehdo_ohagtfnc.jpeg"></div><br> ç”¨äºè§£å†³ç¢°æ’é—®é¢˜çš„Three.jsä»…æä¾›å…‰çº¿è¿½è¸ª-ç¡®å®šå¯¹è±¡å‡ ä½•å½¢çŠ¶ç›¸äº¤çš„æœ€ç®€å•æ–¹æ³•ã€‚ åŸåˆ™ä¸Šï¼Œå®ƒå¯ä»¥ä½¿ç”¨ï¼Œæˆ‘ä»€è‡³åœ¨å…¶ä»–é¡¹ç›®ä¹‹ä¸€ä¸­ä¹Ÿä½¿ç”¨è¿‡ã€‚ å®ƒæ˜¯ç½‘ç«™ä¸Šæµè§ˆå™¨ä¸­çš„è™šæ‹ŸåŸå¸‚ã€‚ æ‚¨å¯ä»¥åœ¨åŸå¸‚å‘¨å›´ç§»åŠ¨ï¼Œè€Œä¸å¿…ç©¿è¿‡å¢™å£ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ud/8y/4s/ud8y4smxvagibioopva3vc1ajoc.jpeg"></div><br> åœ¨ç§»åŠ¨è¿‡ç¨‹ä¸­å‘ç”Ÿç©å®¶ä¸å»ºç­‘ç‰©çš„å‡ ä½•å½¢çŠ¶ç›¸äº¤çš„æƒ…å†µä¸‹ï¼Œæˆ‘åœ¨ä¸å¢™å£ç›¸åçš„æ–¹å‘ä¸Šä»¥ä¸€å®šè·ç¦»å¯¹ç©å®¶è¿›è¡Œäº†æ’æ–¥ã€‚ ä½†æ˜¯ä¸ºæ­¤ï¼Œå¯¹è±¡å¿…é¡»æ˜¯å¹³è¡Œå…­é¢ä½“ã€‚ æˆ‘å›´ç»•ä¸€äº›å¤æ‚çš„å¯¹è±¡åˆ›å»ºäº†å¯¹æ’æœºï¼ˆæˆ‘ä»¬å°†å…¶ç§°ä¸ºéšå½¢å¯¹è±¡ï¼Œå®ƒä»¬èµ·ç€éšœç¢ç‰©çš„ä½œç”¨ï¼Œå¹¶é˜»æ­¢ç©å®¶ç©¿è¿‡å®ƒä»¬ï¼‰ï¼Œé€šè¿‡è¿™äº›å¯¹æ’æœºè¿›è¡Œäº†è®¡ç®—ã€‚ è€Œä¸”æŸäº›å»ºç­‘ç‰©çš„ä¸‹éƒ¨ï¼Œç®€ç§°ä¸ºâ€œç›’å­â€ï¼Œæœ‰æ—¶ä¹Ÿè¢«ç”¨ä½œå¯¹æ’æœºã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fz/on/3e/fzon3eg8bjup0zvzs_cgg81lrmo.jpeg"></div><br> åœ¨å‡ ä½•å½¢çŠ¶å¤æ‚çš„å¯¹è±¡ä¸Šï¼Œå…‰çº¿è·Ÿè¸ªå¯èƒ½ä¸èµ·ä½œç”¨æˆ–è¡Œä¸ºä¸å½“ã€‚ è€Œä¸”ï¼Œä½œä¸ºä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥å°†ç‰©ä½“åµŒå…¥ä¸€ä¸ªç‰©ä½“ä¸­ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªï¼Œè€Œæ˜¯å°†å‡ ä¸ªå°çš„ä¸å¯è§ç¢°æ’ä½“ä»¥å¹³è¡Œå…­é¢ä½“çš„å½¢å¼åµŒå…¥ï¼Œå¹¶ä»¥å½¼æ­¤å¹³è¡Œä¸”å½¼æ­¤é‡å çš„æ–¹å¼ç»˜åˆ¶ï¼Œå¹¶å…·æœ‰100ï¼…çš„é€æ˜åº¦ï¼Œå¤§è‡´é‡å¤ç‰©ä½“çš„å½¢çŠ¶ã€‚ <br><br> åœ¨å…³äºåœ°ç‰¢çš„æ¸¸æˆä¸­ï¼Œå…³å¡æ˜¯ä¸€ä¸ªå¸¦æœ‰åˆ‡å‰²åŠ¨ä½œçš„å•ä¸ªé•¿ç‰©ä½“ï¼Œç”¨äºç§»åŠ¨ç©å®¶ã€‚ å®é™…ä¸Šï¼Œè¦è§£å†³ç¢°æ’é—®é¢˜ï¼Œå¯ä»¥åœ¨å¿…è¦çš„åœ°æ–¹è´´ä¸Šä¸å¯è§çš„ç¢°æ’å™¨å¹¶ä½¿ç”¨å°„çº¿è¿½è¸ªã€‚ ä½†æ˜¯ï¼Œæˆ‘å†³å®šèµ°å¦ä¸€æ¡è·¯ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/rz/ul/ln/rzullnsn4a_befsw71uctfqjyzg.jpeg"></div><br><ul><li> é¦–å…ˆï¼Œæˆ‘æƒ³ä½¿åˆ›å»ºå¯¹æ’æœºé˜µåˆ—çš„è¿‡ç¨‹è‡ªåŠ¨åŒ–ã€‚ </li><li> å…¶æ¬¡ï¼Œæ‚¨åªèƒ½ä½¿ç”¨æœ‰å…³ç¢°æ’å™¨çš„ä¿¡æ¯ï¼Œå³å®ƒä»¬åœ¨ç©ºé—´ä¸­çš„åæ ‡ï¼Œè€Œä¸èƒ½åœ¨3Dåœºæ™¯æœ¬èº«ä¸­åŠ è½½ä¸€äº›å¤šä½™çš„ç©ºå¯¹è±¡ã€‚ </li><li> ç¬¬ä¸‰ï¼Œç”±äºæ¸¸æˆä»…ä½¿ç”¨ä¾§è§†å›¾ï¼Œå¹¶ä¸”å…¶ä¸­ä¸€ä¸ªåæ ‡åœ¨ç§»åŠ¨æ—¶ä¸ä¼šæ”¹å˜ï¼Œå› æ­¤æ‚¨åªèƒ½åœ¨ä¸¤ä¸ªåæ ‡ä¸­ä½¿ç”¨äº¤ç‚¹çš„è®¡ç®—ã€‚ </li><li> ç¬¬å››ï¼Œæ¯•ç«Ÿï¼Œå®é™…ä¸Šä¼šæœ‰ä¸€ä¸ªç­‰çº§è®¡åˆ’ã€‚ è€Œä¸”ï¼Œä»è¿™æ ·çš„æ–¹æ¡ˆå¼€å§‹ï¼Œæå‡ºæ–°çš„æ°´å¹³åªæ˜¯æ–¹ä¾¿ã€‚ æ‚¨å¯ä»¥åœ¨ä»»ä½•å›¾å½¢ç¼–è¾‘å™¨ä¸­ç®€å•åœ°åœ¨å±å¹•ä¸Šæ‹–åŠ¨å—ï¼Œæ„é€ æ–°çš„èµ°å»Šå’Œéšœç¢ç‰©ï¼Œç„¶åè¿è¡Œè„šæœ¬å¹¶è·å–æœ‰å…³å¯¹æ’æœºçš„ä¿¡æ¯ã€‚ å³ï¼Œéƒ¨åˆ†åœ°è§£å†³äº†å…³å¡ç¼–è¾‘å™¨çš„é—®é¢˜ã€‚ </li></ul><br> æˆ‘ç¼–å†™äº†ä¸€ä¸ªè„šæœ¬ï¼Œè¯¥è„šæœ¬é‡‡ç”¨äº†è¯¸å¦‚æ°´å¹³æ–¹æ¡ˆæ–‡ä»¶ï¼ˆpngï¼‰çš„åç§°å’Œé¢œè‰²ä¹‹ç±»çš„è¾“å…¥å‚æ•°ï¼Œå…¶å¡«å……è¢«è§£é‡Šä¸ºéšœç¢ã€‚ é»˜è®¤çš„å¯ç”¨ç©ºé—´é¢œè‰²æ˜¯é»‘è‰²ã€‚ ä¸ºäº†é€šè¿‡è„šæœ¬è¿›è¡Œå¤„ç†ï¼Œæ¯ä¸ªçº§åˆ«çš„æ–¹æ¡ˆå¿…é¡»ä¿å­˜åœ¨å•ç‹¬çš„pngæ–‡ä»¶ä¸­ã€‚ ä¾‹å¦‚ï¼Œå¯¹äºæœ€ä½çº§åˆ«ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ba/rg/kw/bargkw-qc8xqbvpszjia3zvnllq.jpeg"></div><br> æˆ‘åŒæ„ä¸€ä¸ªå—åº”ä¸º80åƒç´ å®½å’Œ48åƒç´ é«˜ã€‚ è¿™ç›¸å½“äº3Dä¸–ç•Œä¸­çš„4 x 2.4ç±³ã€‚ å¯ä»¥åˆ¶ä½œ40 x 24åƒç´ ï¼Œå³åå€ï¼Œä½†åœ¨å›¾ç‰‡ä¸­çœ‹èµ·æ¥å¾ˆå°ã€‚ <br><br> è„šæœ¬åœ¨ç¬¬ä¸€å±‚çš„ç»“æœï¼ˆå›¾åƒè¢«è£å‰ªåˆ°å³ä¾§ï¼‰ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xx/zu/9f/xxzu9fsntacg-giuqubbj75iq5k.jpeg"></div><br> è¯¥è„šæœ¬åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œã€‚ æˆ‘è®¤ä¸ºhtmlæ ‡è®°æ²¡æœ‰æ„ä¹‰ï¼Œå®ƒå¾ˆåŸºæœ¬ï¼šæ•°æ®è¾“å…¥å­—æ®µå’Œå¼€å§‹æŒ‰é’®ã€‚ æ¥ä¸‹æ¥ï¼Œè¯»å–çš„å›¾åƒæ˜¾ç¤ºåœ¨ç”»å¸ƒä¸Šã€‚ ä½œä¸ºè„šæœ¬çš„ç»“æœï¼Œå°†åœ¨3Dä¸–ç•Œæ¯”ä¾‹ä¸‹çš„å›¾ç‰‡ä¸‹æ–¹æ˜¾ç¤ºä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«æ¯ä¸ªå—çš„å·¦ä¸‹è§’å’Œå³ä¸Šè§’åæ ‡ï¼Œå¹¶ä¸ºæ¯ä¸ªçº§åˆ«åœ¨è„šæœ¬ä¸­æŒ‡å®šäº†åç§»é‡ã€‚ å¯ä»¥å°†è¿™ä¸ªæ•°ç»„å¤åˆ¶å¹¶ç²˜è´´åˆ°å¯¹æ’æœºåˆ—è¡¨ä¸­ä»¥åœ¨æ¸¸æˆä¸­ä½¿ç”¨ï¼ˆåœ¨ä¸‹é¢è¿›è¡Œæ›´å¤šä»‹ç»ï¼‰ï¼Œå®ƒå°†ä»¥æŸç§å¸¸é‡å­˜å‚¨ã€‚ åæ ‡ä¹Ÿå‡ºç°åœ¨å›¾ç‰‡æœ¬èº«ä¸Šï¼Œä½†åœ¨2Då›¾åƒçš„å‚è€ƒå¸§ä¸­ã€‚ è¿™äº›æ•°å­—æ˜¾ç¤ºåœ¨æ¯ä¸ªå—çš„ä¸­å¿ƒï¼Œå¯è®©æ‚¨æ£€æŸ¥è®¡ç®—ä¸­æ˜¯å¦åŒ…æ‹¬æ‰€æœ‰å—ã€‚ å°±å…¶æœ¬èº«è€Œè¨€ï¼Œé™¤äº†ç›®è§†æ£€æŸ¥å¤–ï¼Œè¿™äº›æ•°å­—å¯¹äºä»»ä½•å…¶ä»–ç”¨é€”éƒ½ä¸éœ€è¦ã€‚ æŸäº›éšœç¢ç‰©ï¼ˆä¾‹å¦‚ç©å®¶ç»è¿‡çš„æ ï¼‰ä¸åº”è®¡ç®—åœ¨å†…ã€‚ å…³äºä»è®¡ç®—ä¸­æ’é™¤å“ªäº›å¯¹è±¡-ä¸‹æ–‡ã€‚ <br><br> å¦å¤–ï¼Œä¾‹å¦‚ï¼Œåœ¨ç¬¬äºŒå±‚ä¸Šï¼Œç©å®¶å¯ä»¥åœ¨è–„è–„çš„æ°´å¹³æ¿ä¸Šè¡Œèµ°ã€‚ å¿…é¡»è€ƒè™‘å®ƒä»¬ã€‚ å› æ­¤ï¼Œæ‚¨éœ€è¦ç¡®ä¿æ•°å­—ä¹Ÿå‡ºç°åœ¨å®ƒä»¬ä¸Šã€‚ åœ¨å›¾ä¸­ï¼Œä½¿å®ƒä»¬é«˜2ä¸ªåƒç´ ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pq/vm/w1/pqvmw1tghz4brz--t0qh6y-bzek.jpeg"></div><br><br> ç°åœ¨ï¼Œå…³äºè„šæœ¬å¦‚ä½•è€ƒè™‘å—ï¼š <br><br><ul><li> è¯¥æ–¹æ¡ˆç”±80x48å—å¤„ç†ï¼Œåœ¨æ¯ä¸ªå—ä¸­ï¼Œæ°´å¹³ä»ç¬¬2ä¸ªåƒç´ åˆ°ç¬¬79ä¸ªåƒç´ ï¼Œå‚ç›´ä»ç¬¬2ä¸ªåƒç´ åˆ°ç¬¬47ä¸ªåƒç´ å–ä¸€ä¸ªåŒºåŸŸã€‚ ä¸ä½¿ç”¨ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªåƒç´ ï¼Œå› æ­¤æ‚¨å¯ä»¥åœ¨å—å‘¨å›´åˆ›å»ºä¸€ä¸ªå®½åº¦ä¸º1åƒç´ çš„é»‘æ¡†ï¼Œè¿™å¯ä»¥æ”¹å–„ç”µè·¯çš„è§†è§‰æ„ŸçŸ¥å¹¶æœ‰åŠ©äºå…¶åˆ›å»ºã€‚ </li><li> æŸ¥çœ‹å—é¡¶è¡Œçš„æ‰€æœ‰åƒç´ ã€‚ å¦‚æœå…¶ä¸­æœ‰å½©è‰²åƒç´ ï¼Œåˆ™åœ¨æœ€ç»ˆæ•°ç»„ä¸­ï¼Œå—çš„åæ ‡ä»æ°´å¹³ç¬¬ä¸€ä¸ªåƒç´ åˆ°æœ€åä¸€ä¸ªå½©è‰²åƒç´ ï¼Œå‚ç›´åˆ°å—çš„æ•´ä¸ªé«˜åº¦ã€‚ è¿™å°†æ˜¯ä¸€ä¸ªç©ºç™½å—ï¼Œéƒ¨åˆ†æˆ–å…¨éƒ¨å®½åº¦ã€‚ </li><li> æŸ¥çœ‹è¯¥å—åº•è¡Œçš„æ‰€æœ‰åƒç´ ã€‚ å¦‚æœå…¶ä¸­æœ‰å½©è‰²ï¼Œä½†é¡¶è¡Œä¸­æ²¡æœ‰å½©è‰²ï¼Œåˆ™å—çš„åæ ‡ä»æ°´å¹³ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ªå½©è‰²åƒç´ ï¼Œä»åº•éƒ¨åˆ°æœ€åä¸€ä¸ªé˜µåˆ—å‚ç›´ä»3ä¸ªåƒç´ ç§»åŠ¨ã€‚ è¿™å°†æ˜¯ä¸€ä¸ªè¡Œèµ°çš„å¹³å°ã€‚ ä¸€ä¸ªè¡—åŒºå†…å¯ä»¥æœ‰å‡ ä¸ªæ°´å¹³å¹³å°ã€‚ ä»…åœ¨å—çš„åº•éƒ¨è¯†åˆ«å¹³å°ã€‚ å¹³å°çš„åæ ‡â€œä¸‹æ²‰â€åˆ°ä½äºä¸‹æ–¹çš„å—ä¸­ï¼Œå› æ­¤å¹³å°çš„è¡¨é¢ä¸ç›¸é‚»å—ï¼ˆè€Œä¸æ˜¯å¹³å°ï¼‰å¤„äºåŒä¸€æ°´å¹³é¢ã€‚ </li><li> ç”±äºä»…è€ƒè™‘åƒç´ çš„ä¸Šä¸€è¡Œå’Œä¸‹ä¸€è¡Œï¼Œå› æ­¤ä¸å¤„ç†ç©ºç™½å—å†…çš„åˆ—å’Œå…¶ä»–ä¿®é¥°ã€‚ å› æ­¤ï¼Œæ‚¨å¯ä»¥åœ¨å—å†…æ”¾ç½®è£…é¥°ï¼Œå›¾çš„è¯´æ˜ï¼ŒæŒ‡é’ˆï¼Œåˆ—ç­‰ï¼Œè€Œä¸å¿…æ‹…å¿ƒè¿™ä¼šä»¥æŸç§æ–¹å¼å½±å“è„šæœ¬çš„ç»“æœã€‚ </li></ul><br> ç„¶åï¼Œå°†ä»æ•°ç»„ä¸­æ¥æ”¶çš„æ‰€æœ‰åæ ‡è½¬æ¢ä¸º3Dä¸–ç•Œçš„æ¯”ä¾‹ï¼Œå†ä¹˜ä»¥å…¶æ¯”ä¾‹ç³»æ•°ï¼ˆåœ¨åˆ›å»º3Dç¼–è¾‘å™¨æ—¶é€‰æ‹©è¯¥æ¯”ä¾‹ï¼‰ã€‚ è¯¥é˜µåˆ—å·²å‡†å¤‡å¥½åœ¨æ¸¸æˆä¸­ä½¿ç”¨ã€‚ è¯¥è„šæœ¬ä»£ç æ˜¯åŒ†å¿™ç¼–å†™çš„ï¼Œå› æ­¤å®ƒå¹¶ä¸è£…ä½œç²¾ç¾ï¼Œä½†å¯ä»¥æ‰§è¡Œå…¶ä»»åŠ¡ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre><code class="javascript hljs">ap = { <span class="hljs-comment"><span class="hljs-comment">//      (  ),   3D   lvd: { 'lv01.png': { invw: false, invh: true, level_dw: -8.5, level_dh: -1.5 }, 'lv02.png': { invw: true, invh: true, level_dw: -19.5, level_dh: -5.5 } }, blockw: 80, //   2D blockh: 48, //   2D sc3d: 0.05, //,   3D  ex: 100, //  3D (-   ) v: { data: [] }, i: 0, par: {}, datai: [], resi: [], ars: [], fStopEncode: false, blockColor: function(cl) { document.getElementById('input_cl').value = cl; }, startEncode: function() { //      for (var key in ap.lvd) { ap.lvd[key].dw = ap.lvd[key].level_dw * ap.blockw; ap.lvd[key].dh = ap.lvd[key].level_dh * ap.blockh; }; document.getElementById('startbtn').style.display = 'none'; document.getElementById('startmsg').style.display = 'block'; var cl = document.getElementById('input_cl').value; var fld = document.getElementById('input_fld').value; var nm = document.getElementById('input_nm').value; ap.nm = nm; ap.par = { path: [fld + '/', nm], key: [nm], cl: aplib.hexToRgb(cl.substring(1, 7)) }; setTimeout(function() { ap.datai[ap.par.key] = new Image(); ap.datai[ap.par.key].onload = function() { ap.parseData(); }; ap.datai[ap.par.key].src = ap.par.path[0] + ap.par.path[1]; }, 500); }, stopEnode: function(e) { if (typeof ap !== "undefined") { if (e.keyCode == 27) { console.log('stop'); ap.fStopEncode = true; }; }; }, parseData: function() { ap.w = ap.datai[ap.par.key[0]].width, ap.h = ap.datai[ap.par.key[0]].height; aplib.initCanv(ap.w, ap.h); ctx.drawImage(ap.datai[ap.par.key[0]], 0, 0, ap.w, ap.h, 0, 0, ap.w, ap.h); ap.ars = []; ap.i = 0; setTimeout(function() { ap.parseData1(); }, 1000); }, parseData1: function() { if (ap.i &lt; ap.par.key.length) { document.getElementById('info').innerHTML = '' + ap.nm; ap.blocksw = Math.floor(ap.w / ap.blockw); ap.blocksh = Math.floor(ap.h / ap.blockh); ap.ar = []; ap.arv = {}; ap.hi = 0; ctx.fillStyle = '#CCCCCC'; ap.parseData2(); } else { document.getElementById('startbtn').style.display = 'block'; document.getElementById('startmsg').style.display = 'none'; }; }, parseData2: function() { if (ap.hi &lt; ap.blocksh) { ap.ar.push([]); ap.wi = 0; ap.parseData3(); } else { ap.parseData4(); }; }, parseData3: function() { var k = ''; if (ap.wi &lt; ap.blocksw) { var fground = true, fvari = false, fempty = true; var upx1 = 0, upx2 = 0, dnx1 = 0, dnx2 = 0; var upxf = false, dnxf = false; for (var wii = 1; wii &lt; ap.blockw - 2 + 2; wii++) { pixelDatai = ctx.getImageData(ap.wi * ap.blockw + wii, ap.hi * ap.blockh + 1, 1, 1).data; //  pixelDatai2 = ctx.getImageData(ap.wi * ap.blockw + wii, (ap.hi + 1) * ap.blockh - 3, 1, 1).data; //  if ((pixelDatai[0] == ap.par.cl.r) &amp; (pixelDatai[1] == ap.par.cl.g) &amp; (pixelDatai[2] == ap.par.cl.b)) { //   ground    if (upxf == false) { upxf = true; upx1 = wii; }; } else { //    if (upxf == true) { upx2 = wii + 1; upx1--; //   dy = -1; // 3D       1 ap.v.data.push([ap.wi * ap.blockw + upx1, ap.hi * ap.blockh + dy, ap.wi * ap.blockw + upx2, ap.hi * (ap.blockh) + ap.blockh - 1]); upxf = false; upx1 = 0; upx2 = 0; }; }; if ((pixelDatai2[0] == ap.par.cl.r) &amp; (pixelDatai2[1] == ap.par.cl.g) &amp; (pixelDatai2[2] == ap.par.cl.b)) { //   ground     if (upxf == false) { if (dnxf == false) { dnxf = true dnx1 = wii; }; }; } else { if (upxf == false) { if (dnxf == true) { dnx2 = wii + 1; dnx1--; //   dy = 2; // 3D    2 ap.v.data.push([ap.wi * ap.blockw + dnx1, (ap.hi + 1) * ap.blockh - 3 + dy, ap.wi * ap.blockw + dnx2, (ap.hi + 1) * ap.blockh - 3 + 2 + dy]); dnxf = false; dnx1 = 0; dnx2 = 0; }; }; }; }; if (ap.fStopEncode == true) { ap.hi = ap.h, ap.wi = ap.w, i = ap.par.key.length; }; setTimeout(function() { ap.wi++; ap.parseData3(); }, 10); } else { ap.hi++; ap.parseData2(); }; }, parseData4: function() { setTimeout(function() { var t, tw, tx, ty, ar = []; //  for (var i = 0; i &lt; ap.v.data.length; i++) { ar = ap.v.data[i]; t = ar[0] + ';' + (ar[1]+1) + '&lt;br/&gt;' + ar[2] + ';' + (ar[3]+1); tw = ar[2] - ar[0]; tx = ar[0]; ty = ar[1] + Math.floor((ar[3] - ar[1]) / 2) - 0; aplib.Tex2Canvas(ctx, t, 'normal 10px Arial', 10, '#CCCCCC', tx, ty, tw, 0, 'center', 'top'); }; ap.parseData5(); }, 10); }, parseData5: function() { var t, tw, tx, ty, ar = [], n; //   3D var lv = ap.lvd[ap.nm]; for (var i = 0; i &lt; ap.v.data.length; i++) { ar = ap.v.data[i]; ar[0] += lv.dw; ar[1] += lv.dh; ar[2] += lv.dw; ar[3] += lv.dh; if (lv.invh == true) { n = -ar[1]; ar[1] = -ar[3]; ar[3] = n; }; if (lv.invw == true) { n = -ar[0] ar[0] = -ar[2]; ar[2] = n; }; ar[0] = Math.round(ap.sc3d * ar[0] * ap.ex) / ap.ex; ar[1] = Math.round(ap.sc3d * ar[1] * ap.ex) / ap.ex; ar[2] = Math.round(ap.sc3d * ar[2] * ap.ex) / ap.ex; ar[3] = Math.round(ap.sc3d * ar[3] * ap.ex) / ap.ex; }; //    ap.v.data.sort(aplib.sortBy0); console.log(ap.v.data); document.getElementById('divresult').innerHTML = JSON.stringify(ap.v.data); } }; aplib = { hexToRgb: function(hex) { var arrBuff = new ArrayBuffer(4); var vw = new DataView(arrBuff); vw.setUint32(0, parseInt(hex, 16), false); var arrByte = new Uint8Array(arrBuff); return { r: arrByte[1], g: arrByte[2], b: arrByte[3], s: arrByte[1] + "," + arrByte[2] + "," + arrByte[3] }; }, //   canvas Tex2Canvas: function(ctx, t, font, lin, fcolor, x, y, w, h, haln, valn) { //left, right, center, center-lim- ctx.font = font; ctx.fillStyle = fcolor; var l = 0; var tx = x; var ftw = false; var tw = 1; var arr = t.split('&lt;br/&gt;'); for (var i = 0; i &lt; arr.length; i++) { arr[i] = arr[i].split(' '); }; for (var i = 0; i &lt; arr.length; i++) { var s = '', slen = 0, s1 = '', j = 0; while (j &lt; arr[i].length) { var wordcount = 0; while ((slen &lt; w) &amp; (j &lt; arr[i].length)) { s = s1; s1 = s + arr[i][j] + ' '; slen = ctx.measureText(s1).width; if (slen &lt; w) { j++; wordcount++; } else { if (wordcount &gt; 0) { s1 = s; } else { j++; }; }; }; ftw = false; tw = ctx.measureText(s1).width; if (haln == 'center') { tx = x + Math.round((w - tw) / 2); }; if (haln == 'right') { tx = x + Math.round((w - tw)); }; if (haln == 'center-lim') { if (tw &gt; w) { tw = w; }; if (tw &lt; 1) { tw = 1; }; tx = x + Math.round((w - tw) / 2); ftw = true; }; if (ftw == false) { ctx.fillText(s1, tx, l * lin + y); } else { ctx.fillText(s1, tx, l * lin + y, tw); }; if (s1 == '') { j = arr[i].length + 1; }; l++; s1 = ''; slen = 0; }; }; return Math.round(tw); }, // canvas initCanv: function(w, h) { function canvErr() { document.getElementById('divcanv').innerHTML = '&lt;div style="height:130px"&gt;&lt;/div&gt;&lt;div style="width:440px; border:#FFFFFF 1px solid; margin:10px; padding:4px; background-color:#000000"&gt;&lt;p class="txterr"&gt;---&gt; Error&lt;br/&gt;HTML5 Canvas is not supported!&lt;br/&gt;Please, update your browser!&lt;/p&gt;&lt;/div&gt;'; }; if (w == 0) { w = 740; h = 680; }; elcanv = document.getElementById('divcanv'); elcanv.innerHTML = '&lt;canvas id="canv" style="width:' + w + 'px; height:' + h + 'px; display:block;" width="' + w + '" height="' + h + '"&gt;&lt;/canvas&gt;'; canvas1 = document.getElementById('canv'); if (!canvas1) { canvErr(); return 0; } else { if (canvas1.getContext) { ctx = canvas1.getContext('2d'); ctx.clearRect(0, 0, w, h); return 1; } else { canvErr(); }; }; }, sortBy0: function(i, ii) { if (i[0] &gt; ii[0]) return 1; else if (i[0] &lt; ii[0]) return -1; else return 0; } };</span></span></code> </pre> <br></div></div><br> ç°åœ¨-å…³äºæ¸¸æˆå¦‚ä½•ä½¿ç”¨ä¸€ç³»åˆ—å—è¿›è¡Œå·¥ä½œã€‚ æ¸¸æˆä½¿ç”¨ç›¸äº¤çš„èµ°å»Šï¼ˆå…³å¡ï¼‰ã€‚ å½“ç©å®¶è¿›å…¥èµ°å»Šæ—¶ï¼Œå°†è¿æ¥ä¸€ä¸ªæ–°çš„æ–¹å—é˜µåˆ—ï¼šå› æ­¤ï¼Œå¯¹äºæ¯ä¸ªèµ°å»Šï¼Œéƒ½å¯ä»¥ä»å…¶å…³å¡æ–¹æ¡ˆä¸­è·å¾—è‡ªå·±çš„é˜µåˆ—ã€‚ åœ¨ç©å®¶ç§»åŠ¨æœŸé—´ï¼Œå°†æ£€æŸ¥å…¶åæ ‡æ˜¯å¦åœ¨æ¯ä¸ªå—å†…ã€‚ å¦‚æœä»–åœ¨ä»»ä½•è¡—åŒºå†…ï¼Œæˆ‘ä»¬éƒ½ä¼šå‘ç”Ÿç¢°æ’ã€‚ ä½†æ˜¯éšç€ç©å®¶çš„æ¯ä¸€æ¬¡ç§»åŠ¨ï¼Œæˆ‘ä»¬éƒ½ä¸éœ€è¦å¯»æ‰¾ä¸è¯¥å…³å¡çš„æ‰€æœ‰åŒºå—ç›¸äº¤çš„åœ°æ–¹ï¼Œå› ä¸ºå…¶ä¸­å¯èƒ½æœ‰å¾ˆå¤šã€‚ åˆ›å»ºä»…åŒ…å«è·ç¦»æ’­æ”¾å™¨æœ€è¿‘çš„å—çš„æ•°ç»„ã€‚ <br><br><pre> <code class="javascript hljs">collisionsUpdate: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x, y, dw, dh</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> coll = []; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> o; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; ap.v.lv.d.length; i++) { o = ap.v.lv.d[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((o[<span class="hljs-number"><span class="hljs-number">0</span></span>] &gt;= x - ap.v.dw) &amp; (o[<span class="hljs-number"><span class="hljs-number">2</span></span>] &lt;= x + ap.v.dw)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((o[<span class="hljs-number"><span class="hljs-number">1</span></span>] &gt;= y - ap.v.dh) &amp; (o[<span class="hljs-number"><span class="hljs-number">3</span></span>] &lt;= y + ap.v.dh)) { coll.push(o); }; }; }; ap.v.coll = coll; },</code> </pre> <br> æ­¤å¤„ï¼Œåœ¨è¾“å…¥xå¤„ï¼Œyæ˜¯ç©å®¶çš„å½“å‰åæ ‡ï¼Œdwï¼Œdhæ˜¯æ‚¨è¦æ°´å¹³å’Œå‚ç›´æœç´¢å—çš„è·ç¦»ï¼Œä¾‹å¦‚12ç±³å’Œ8ç±³ã€‚ æ¢å¥è¯è¯´ï¼Œå°†æ’­æ”¾å™¨å‘¨å›´çš„æ‰€æœ‰æ–¹å—éƒ½æ”¾åœ¨24x16ç±³çš„æ­£æ–¹å½¢å†…ã€‚ ä»–ä»¬å°†å‚åŠ å†²çªæœç´¢ã€‚  ap.v.lv.d [i]æ˜¯å½“å‰çº§åˆ«çš„å—æ•°ç»„çš„å…ƒç´ ï¼Œå®é™…ä¸Šï¼Œä»–æœ¬äººä¹Ÿæ˜¯å®šä¹‰ä¸€ä¸ªå—çš„è¾¹ç•Œçš„4ä¸ªæ•°å­—çš„æ•°ç»„-[x1ï¼Œy1ï¼Œx2ï¼Œy2]ï¼Œå› æ­¤ï¼Œè¦æ£€æŸ¥å¹³æ–¹åœ¨æ°´å¹³æ–¹å‘ä¸Šï¼Œæˆ‘ä»¬é‡‡ç”¨ç´¢å¼•ä¸º0å’Œ2çš„å…ƒç´ ï¼Œåœ¨å‚ç›´æ–¹å‘ä¸Šä¸º1å’Œ3çš„å…ƒç´ ã€‚å¦‚æœå­˜åœ¨åŒ¹é…é¡¹ï¼Œåˆ™å°†æ­¤å—æ·»åŠ åˆ°ap.v.collç¢°æ’åˆ—è¡¨ä¸­ã€‚ <br><br> å½“æ’­æ”¾å™¨ç§»åŠ¨æ—¶ï¼Œæˆ‘ä»¬å°†æ›´æ–°æ­¤ç¢°æ’åˆ—è¡¨ï¼Œä½†æ˜¯ï¼Œä¸ºäº†èŠ‚çœæ€§èƒ½ï¼Œæˆ‘ä»¬å°†ä¸ä¼šåœ¨æ¯ä¸€æ­¥ï¼ˆæˆ–æ›´ç¡®åˆ‡åœ°è¯´ï¼Œæ¸²æŸ“å¸§ï¼‰æ‰§è¡Œæ­¤æ“ä½œï¼Œè€Œæ˜¯åœ¨æ’­æ”¾å™¨ç¦»å¼€ap.v.collwStepå’Œap.v.collhStepï¼Œä¾‹å¦‚8ç±³å’Œ4ç±³ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç©å®¶ä»å…¶åŸå§‹ä½ç½®æ°´å¹³æˆ–å‚ç›´ç»è¿‡æŸä¸ªè·¯å¾„æ—¶ï¼Œæˆ‘ä»¬å°†é‡æ–°ç»„è£…ç¢°æ’æ•°ç»„ã€‚ åŒæ—¶ï¼Œè®©æˆ‘ä»¬è®°ä½é‡æ–°ç»„è£…æ•°ç»„çš„ä½ç½®ï¼Œä»¥ä¾¿å°†å…¶ç”¨äºä¸‹ä¸€æ¬¡è¿­ä»£ã€‚  pers [ax]-è¿™é‡Œç”¨axè¡¨ç¤ºåæ ‡è½´ï¼ˆaxï¼‰ï¼Œå®ƒå¯ä»¥æ˜¯xæˆ–zï¼Œå…·ä½“å–å†³äºç©å®¶æ‰€èµ°çš„èµ°å»Šçš„æ–¹å‘ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   if ((Math.abs(pers[ax] - ap.v.collw) &gt; ap.v.collwStep) || (Math.abs(pers.y - ap.v.collh) &gt; ap.v.collhStep)) { ap.v.collw = pers[ax]; ap.v.collh = pers.y; ap.collisionsUpdate(pers[ax], pers.y, 12, 8); };</span></span></code> </pre> <br> ä¸ºä»€ä¹ˆä¼šæœ‰è¿™æ ·çš„å›°éš¾ï¼Ÿ ä¸ºä»€ä¹ˆä¸ä½¿ç”¨æ•´ä¸ªç¢°æ’é˜µåˆ—è€Œä¸æ˜¯è’¸æ±½ã€‚ äº‹å®æ˜¯ï¼Œå†²çªæ£€æµ‹æ˜¯æ ¹æ®æ›´åŠ å¤æ‚çš„ç®—æ³•æ‰§è¡Œçš„ï¼Œå¹¶ä¸”åœ¨å¸§çš„æ¯ä¸ªæ¸²æŸ“ä¸­ç»å¯¹ä¸ä½¿ç”¨æœ€æ¥è¿‘çš„çº§åˆ«å—ï¼ˆè€Œä¸æ˜¯æœ€æ¥è¿‘çš„çº§åˆ«å—ï¼‰æ¥æ£€æŸ¥å†²çªæ˜¯æ— æµäºäº‹çš„ã€‚  ï¼ˆå°½ç®¡è¿™ä¸å‡†ç¡®ã€‚ï¼‰ <br><br> ä½¿ç”¨ä¸Šé¢å‡†å¤‡çš„ç¢°æ’æ•°ç»„ï¼Œåœ¨å¸§çš„æ¯ä¸ªæ¸²æŸ“ä¸­å®šä¹‰ç¢°æ’ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="javascript hljs">collisionsDetect: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x, y, xOld, yOld, up</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//up=-1 -  var res = false, o; var collw = false, collh = false, collwi = false, collhi = false, collhsup = false, support = [], supportf = false, fw = false, upb = -1; var bub = -1, bubw = 0; var pw2 = ap.v.player.pw2, ph2 = ap.v.player.ph2, supportd = ap.v.supportd; for (var i = 0; i &lt; ap.v.coll.length; i++) { o = ap.v.coll[i]; collwi = false; collhi = false; collhsup = false; fw = false; if ((x + pw2 &gt;= o[0]) &amp; (x - pw2 &lt;= o[2])) { if ((y + ph2 &gt; o[1]) &amp; (y - ph2 &lt; o[3])) { collwi = true; }; }; //     if ((xOld + pw2 &gt;= o[0]) &amp; (xOld - pw2 &lt;= o[2])) { if ((yOld + ph2 &gt; o[1]) &amp; (yOld - ph2 &lt; o[3])) { bub = i; if (Math.abs(xOld - o[0]) &lt; Math.abs(xOld - o[2])) { bubw = -1; } else { bubw = 1; }; }; }; if ((x &gt;= o[0]) &amp; (x &lt;= o[2])) { fw = true; //  i   }; if ((y + ph2 &gt;= o[1]) &amp; (y - ph2 &lt;= o[3])) { if ((x &gt; o[0]) &amp; (x &lt; o[2])) { collhi = true; //  if (y + ph2 &gt; o[3]) { collhsup = true; supportf = true; support = o; upb = 1; }; //  if (y - ph2 &lt; o[1]) { upb = -1; }; }; }; if ((y - ph2 &gt;= o[3] + supportd - 0.11) &amp; (y - ph2 &lt;= o[3] + supportd + 0.001)) { if (fw == true) { collhi = true; collh = true; res = true; collhsup = true; supportf = true; support = o; }; }; if (collwi &amp; collhi) { res = true; }; if (collwi) { collw = true; }; if (collhi) { collh = true; }; }; return { f: res, w: collw, h: collh, support: support, supportf: supportf, upb: upb, bub: bub, bubw: bubw }; },</span></span></code> </pre> <br></div></div><br> è¿™é‡Œçš„xï¼Œyï¼ŒxOldï¼ŒyOldæ˜¯æ’­æ”¾å™¨çš„æ–°åæ ‡å’Œå½“å‰åæ ‡ã€‚ åªéœ€æŒ‰ä¸€ä¸‹æŒ‰é’®ï¼Œå°±å¯ä»¥æ ¹æ®ç»™å®šçš„é€Ÿåº¦æ¥è®¡ç®—æ–°çš„åæ ‡ï¼Œå³è¿™äº›åæ ‡æ˜¯å¯èƒ½çš„ã€‚ æ£€æŸ¥å®ƒä»¬ä»¥æŸ¥çœ‹å®ƒä»¬æ˜¯å¦è½åœ¨å†²çªåˆ—è¡¨çš„ä»»ä½•å—å†…ã€‚ å¦‚æœå®ƒä»¬æ‰è½ï¼Œåˆ™å®ƒä»¬ä¼šé€€å›æ—§çš„ï¼Œå¹¶ä¸”ç©å®¶ä¸ä¼šè¶Šè¿‡éšœç¢ç‰©ã€‚ å¦‚æœå®ƒä»¬ä¸è·Œå€’ï¼Œå®ƒä»¬å°±ä¼šæˆä¸ºæ½®æµã€‚  pw2å’Œph2æ˜¯ç©å®¶å‡æƒ³å¯¹æ’æœºçš„å®½åº¦å’Œé«˜åº¦çš„ä¸€åŠï¼ˆç©å®¶å®½åº¦/ 2ï¼Œç©å®¶é«˜åº¦/ 2ï¼‰ã€‚ å¦‚æœå‘ç”Ÿæ°´å¹³å’Œå‚ç›´ç¢°æ’ï¼ˆcollwï¼Œcollhï¼‰ï¼Œæ’­æ”¾å™¨ä¸‹æ–¹æ˜¯å¦æœ‰æ”¯æ’‘å—ï¼ˆsupportfï¼‰ï¼Œåˆ™å‘å‡ºè¾“å‡º-è¿™æ ·å¯ä»¥æ¸…æ¥šåœ°ç¡®å®šæ˜¯å¦è¿›ä¸€æ­¥å¼€å§‹è·Œå€’åŠ¨ç”»ï¼Œæˆ–è€…æ’­æ”¾å™¨æ˜¯å¦ç®€å•åœ°åˆ‡æ¢åˆ°ç›¸é‚»çš„å—ç­‰ç­‰ã€‚ åªæ˜¯ä¸è¦é—®ä¸ºä»€ä¹ˆæˆ‘åœ¨é‚£é‡ŒåŠ 0.001å¹¶å‡å»0.11ã€‚ è¿™æ˜¯ä¸€ä¸ªå¯æ€•çš„æ‹æ–ï¼Œå¯ä»¥é˜²æ­¢æ‰è½å—çŠ¶ç‰©ä»¥åŠä¸æ°´å¹³éšœç¢ç‰©ç¢°æ’æ—¶äº§ç”Ÿçš„æŠ–åŠ¨å½±å“ã€‚æ­¤åŠŸèƒ½æœ‰æ•ˆï¼Œä½†éœ€è¦ä»¥æ­£å¸¸æ–¹å¼é‡å†™ã€‚ æ­¤åŠŸèƒ½çš„ä¼˜åŒ–ä¹Ÿç¼ºå¤±ã€‚ <br><br> æˆ‘è®¤ä¸ºé‡åˆ°ç¢°æ’å€¼å¾—åœ¨è¿™é‡Œç»“æŸã€‚ <br><br> å¾ˆéš¾è¯´æˆ‘çš„æ–¹æ³•æ¯”å…‰çº¿è¿½è¸ªå¿«å¤šå°‘ï¼Œæˆ–è€…ä¹Ÿè®¸æ¯”å…‰çº¿è¿½è¸ªæ…¢ï¼Œä½†æ˜¯å¯¹äºåè€…ï¼ŒThree.jsè¿˜å­˜å‚¨äº†ä¸€ç³»åˆ—å‚ä¸ç¢°æ’ç³»ç»Ÿçš„å¯¹è±¡ã€‚ åªæ˜¯ç¢°æ’æ˜¯é€šè¿‡å‘å°„å…‰æŸåŠå…¶ä¸ç‰©ä½“ä¾§é¢å¹³é¢çš„äº¤ç‚¹çš„æ–¹æ³•ç¡®å®šçš„ï¼Œè€Œä¸æˆ‘ä¹‹é—´çš„å†²çªï¼Œæ˜¯é€šè¿‡ç¡®å®šä¸€ä¸ªç‰©ä½“çš„åæ ‡æ˜¯å¦æ²¿ä¸¤ä¸ªè½´çš„æ¯ä¸€ä¸ªéƒ½åœ¨å¦ä¸€ä¸ªç‰©ä½“çš„å†…éƒ¨æ¥ç¡®å®šçš„ã€‚ <br><br> è¯¥æ¸¸æˆè¿˜å…·æœ‰è§¦å‘æŸç§åŠ¨ç”»ï¼ˆä¾‹å¦‚ï¼Œä¸æ°´æ¥è§¦è§¦å‘é²¨é±¼çš„è¿åŠ¨ï¼‰çš„ç§»åŠ¨å¯¹è±¡ï¼ˆé²¨é±¼ï¼‰å’Œæ ‡è®°å¯¹è±¡ã€‚ æ‰€æœ‰è¿™äº›å¯¹è±¡ä¹Ÿéƒ½å‚ä¸ç¢°æ’ï¼Œå…¶ä¸­ä¸€äº›å¯¹è±¡å…·æœ‰éšæ—¶é—´å˜åŒ–çš„åæ ‡ã€‚ å¥‡æ€ªçš„æ˜¯ï¼Œè¿™é‡Œçš„ä¸€åˆ‡éƒ½æ›´åŠ ç®€å•ï¼šåœ¨å¯¹è±¡ç§»åŠ¨æœŸé—´ï¼Œå°†å…¶åæ ‡ä¸ç©å®¶çš„åæ ‡è¿›è¡Œæ¯”è¾ƒã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mj/cx/rz/mjcxrz4m_3fwkm7kep-yrtbp-qa.jpeg"></div><br><h3> æ¸¸æˆæ‰‹æŸ„ </h3><br> é€šå¸¸ï¼Œåœ¨æµè§ˆå™¨ä¸­ç»´æŠ¤javascriptæ¸¸æˆæ‰‹æŸ„å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ã€‚ æ²¡æœ‰æŒ‰é’®æŒ‰ä¸‹å’Œé‡Šæ”¾äº‹ä»¶ã€‚ åªæœ‰è¿æ¥å’Œæ–­å¼€è®¾å¤‡çš„äº‹ä»¶ä»¥åŠå¯ä»¥é€šè¿‡å®šæœŸè½®è¯¢è·å¾—çš„çŠ¶æ€ï¼Œç„¶åå°†å…¶ä¸ä¸Šä¸€ä¸ªäº‹ä»¶è¿›è¡Œæ¯”è¾ƒï¼Œæ‰å¯ä»¥è¿›è¡Œã€‚ <br><br> è¯¥è§†é¢‘æ¼”ç¤ºäº†Windows 8.1å¹³æ¿ç”µè„‘å’ŒWindows 10 PCä¸Šæµè§ˆå™¨ä¸­æ¸¸æˆæ‰‹æŸ„çš„æ“ä½œã€‚è¯¥å¹³æ¿ç”µè„‘æ˜¯æ—§ç‰ˆï¼Œäº2014å¹´å‘å¸ƒï¼Œå› æ­¤åœ¨æ¸¸æˆä¸Šå…³é—­äº†åŠ¨æ€ç…§æ˜ã€‚ <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/knkMKB5uizk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> ä¸ºäº†è½®è¯¢æ¸¸æˆæ‰‹æŸ„ï¼Œä½¿ç”¨äº†æ¯100æ¯«ç§’è°ƒç”¨ä¸€æ¬¡çš„å‡½æ•°ã€‚ ä½¿ç”¨æˆ‘çš„åº“m3d.lib.globalTimer.addEventçš„åŠŸèƒ½è¿›è¡Œè®¾ç½®ã€‚ <br><br><pre> <code class="javascript hljs">m3d.lib.globalTimer.addEvent({ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">'gamepad'</span></span>, <span class="hljs-attr"><span class="hljs-attr">ti</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-attr"><span class="hljs-attr">f</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> st = m3d.gamepad.state(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (st == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contr.gpDownFlag == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { m3d.gamepad.resetH(); }; }; } });</code> </pre> <br> è¿™é‡Œçš„globalTimeræ˜¯æˆ‘ç¼–å†™çš„javascript setIntervalè®¡æ—¶å™¨äº‹ä»¶ç®¡ç†ç³»ç»Ÿã€‚ åœ¨é‚£é‡Œï¼Œåªéœ€å°†ä¸€ç³»åˆ—äº‹ä»¶æ·»åŠ åˆ°éœ€è¦ä»¥ä¸åŒé—´éš”è°ƒç”¨çš„ç‰¹å®šæ•°ç»„ã€‚ ç„¶åï¼Œå°†ä¸€ä¸ªsetIntervalè®¡æ—¶å™¨è®¾ç½®ä¸ºä¸æ‰€æœ‰äº‹ä»¶ä¸­é¢‘ç‡æœ€é«˜çš„äº‹ä»¶å¯¹åº”çš„é¢‘ç‡ã€‚ è®¡æ—¶å™¨è½®è¯¢å‡½æ•°m3d.lib.globalTimer.updateï¼ˆï¼‰ï¼Œè¯¥å‡½æ•°éå†æ‰€æœ‰äº‹ä»¶çš„åˆ—è¡¨ï¼Œå¹¶è¿è¡Œå³å°†æ‰§è¡Œçš„äº‹ä»¶çš„åŠŸèƒ½ã€‚ æ·»åŠ æˆ–åˆ é™¤äº‹ä»¶æ—¶ï¼Œé—´éš”é¢‘ç‡ä¹Ÿå¯ä»¥æ›´æ”¹ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœåˆ é™¤æœ€å¿«çš„äº‹ä»¶ï¼‰ã€‚ <br><br> æ¸¸æˆè¿˜ä¸ºæ¯ä¸ªæ¸¸æˆæ‰‹æŸ„æŒ‰é”®å®šä¹‰äº†å¤„ç†ç¨‹åºï¼šâ€œ aâ€ä»£è¡¨è½´ï¼ˆaxï¼‰ï¼Œâ€œ bâ€ä»£è¡¨æŒ‰é’®ï¼ˆæŒ‰é’®ï¼‰ï¼Œè€Œ11æ˜¯æ²¿ç€åå­—çš„æ°´å¹³è½´çš„å·¦åå·®ï¼ˆå¥½åƒå…¶æŒ‰é’®1ï¼‰ï¼Œ 12-æ²¿åå­—çš„æ°´å¹³è½´ï¼ˆå¦‚å…¶æŒ‰é’®2ï¼‰çš„å³åå·®ï¼Œ21å’Œ22-å‚ç›´è½´ã€‚ ä¾‹å¦‚ï¼š <br><br>  ['a'ï¼Œ11]ï¼Œ <br>  ['b'ï¼Œ3] <br><br> è¡¨ç¤ºå°†åŒæ—¶è®¾ç½®ä¸‹ä¸€ä¸ªåŠŸèƒ½ï¼Œç”¨äºæ²¿æ°´å¹³è½´å‘å·¦åç§»å’ŒæŒ‰é’®3ï¼ˆå‘å·¦ï¼‰åç§»ã€‚ å¥½äº†ï¼Œç„¶åè®¾ç½®äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œè¯¥åŠŸèƒ½å°†åœ¨æŒ‰ä¸‹æŒ‰é’®ç„¶åé‡Šæ”¾æ—¶æ‰§è¡Œã€‚ <br><br><pre> <code class="javascript hljs"> m3d.gamepad.setHandler( [ [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-number"><span class="hljs-number">11</span></span>], [<span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>] ], <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (contr.btState.lt == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { contr.keyDownFlag = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; contr.btState.lt = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; contr.gpDownFlag = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; apcontrolsRenderStart(); }; }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">v</span></span></span><span class="hljs-function">) </span></span>{ contr.btState.lt = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; m3d.contr.controlsCheckBt(); apcontrolsRenderStart(); } );</code> </pre> <br>  apcontrolsRenderStartï¼ˆï¼‰æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœå°šæœªè¿è¡Œæ¸²æŸ“ï¼Œå®ƒå°†å¯åŠ¨å®ƒã€‚ é€šå¸¸ï¼Œå¯¹æ¸¸æˆæ‰‹æŸ„çš„æ”¯æŒä¸æˆ‘çš„m3dåº“ç´§å¯†ç›¸å…³ï¼Œå› æ­¤ï¼Œå¦‚æœæˆ‘ç»§ç»­æè¿°å…¶æ‰€æœ‰åŠŸèƒ½ï¼Œå®ƒå°†æŒç»­å¾ˆé•¿æ—¶é—´... <br><br> æˆ‘åªç»™æ‚¨ä¸€éƒ¨åˆ†-æ¸¸æˆæ‰‹æŸ„ï¼Œå…¶ä¸­æˆ‘ä»¥æœ€ç®€å•çš„æ–¹å¼å®ç°äº†æ¸¸æˆæ‰‹æŸ„çš„åˆå§‹åŒ–ï¼Œå¤„ç†ç¨‹åºçš„å®‰è£…å’ŒçŠ¶æ€è½®è¯¢ã€‚ <br><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="javascript hljs">gamepad: { <span class="hljs-attr"><span class="hljs-attr">connected</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">gamepad</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">gamepadKey</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-attr"><span class="hljs-attr">axesCount</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">buttonsCount</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-attr"><span class="hljs-attr">f</span></span>: [], <span class="hljs-comment"><span class="hljs-comment">//  fup: [], //  fval: [], //      fupCall: [], //   buttons: [], //link to f [0.. ] axes: [], //link to f [0.. ] initCb: function() {}, resetH: function() {}, init: function(gp) { var f = false; for (var key in gp) { if (f == false) { if (gp[key] != null) { if (typeof gp[key].id !== "undefined") { f = true; this.connected = true; this.gamepad = gp[key]; this.gamepadKey = key; }; }; }; }; if (typeof this.gamepad.axes !== "undefined") { this.axesCount = this.gamepad.axes.length; }; if (typeof this.gamepad.buttons !== "undefined") { this.buttonsCount = this.gamepad.buttons.length; }; this.f = []; this.fup = []; this.fval = []; this.fupCall = []; this.axes = []; for (var i = 0; i &lt; this.axesCount * 2; i++) { this.axes.push(-1); }; this.buttons = []; for (var i = 0; i &lt; this.buttonsCount; i++) { this.buttons.push(-1); }; this.initCb(); }, setHandlerReset: function(f) { this.resetH = f; }, setHandler: function(ar, f, fup) { //ar['b',3] ['a',11] var fi, bt, ax, finext, finexta; finexta = false; for (var i = 0; i &lt; ar.length; i++) { if (ar[i][0] == 'a') { ax = Math.floor(ar[i][1] / 10); bt = ar[i][1] - (ax * 10); bt = ax * 2 + bt - 3; fi = this.axes[bt]; if (fi == -1) { //   fi = this.f.length; if (finexta == false) { finexta = true; this.f.push(f); this.fup.push(fup); this.fval.push(0); this.fupCall.push(true); this.axes[bt] = fi; } else { fi--; this.f[fi] = f; this.fup[fi] = fup; this.axes[bt] = fi; }; } else { this.f[fi] = f; this.fup[fi] = fup; }; } else if (ar[i][0] == 'b') { bt = ar[i][1] - 1; fi = this.buttons[bt]; if (fi == -1) { //   fi = this.f.length; if (finexta == false) { finexta = true; this.f.push(f); this.fup.push(fup); this.fval.push(0); this.fupCall.push(true); this.buttons[bt] = fi; } else { fi--; this.f[fi] = f; this.fup[fi] = fup; this.buttons[bt] = fi; }; } else { this.f[fi] = f; this.fup[fi] = fup; }; }; }; }, state: function() { var pressed = false; var fi, fval, axesval; for (var i = 0; i &lt; this.fval.length; i++) { this.fval[i] = 0; }; //   var gp = navigator.getGamepads()[this.gamepadKey]; for (var i = 0; i &lt; this.axesCount; i++) { axesval = Math.round(gp.axes[i]); if (axesval &lt; 0) { pressed = true; fi = this.axes[i * 2]; if (fi != -1) { this.fval[fi] = gp.axes[i]; this.fupCall[fi] = true; }; } else if (axesval &gt; 0) { pressed = true; fi = this.axes[i * 2 + 1]; if (fi != -1) { this.fval[fi] = gp.axes[i]; this.fupCall[fi] = true; }; }; }; for (var i = 0; i &lt; this.buttonsCount; i++) { if (gp.buttons[i].pressed == true) { pressed = true; fi = this.buttons[i]; if (fi != -1) { this.fval[fi] = 1; this.fupCall[fi] = true; }; }; }; for (var i = 0; i &lt; this.fval.length; i++) { fval = this.fval[i]; if (fval != 0) { this.f[i](this.fval[i]); } else { if (this.fupCall[i] == true) { this.fupCall[i] = false; this.fup[i](this.fval[i]); }; }; }; return pressed; } }, //gamepad</span></span></code> </pre> <br></div></div><br> é€šå¸¸ï¼Œæ¸¸æˆä¸­å¯¹æ¸¸æˆæ‰‹æŸ„çš„æ”¯æŒä»ä¸å®Œæ•´ï¼šä»…å®ç°äº†å¯¹æœ€ç®€å•æ¸¸æˆæ‰‹æŸ„çš„æ”¯æŒï¼Œä½†æ²¡æœ‰å®ç°ä¾‹å¦‚åœ¨XBoxä¸­ä½¿ç”¨çš„é‚£ç§ï¼Œå› ä¸ºæˆ‘æ²¡æœ‰ã€‚ å¦‚æœå¾—åˆ°äº†ï¼Œæˆ‘å°†å¯¹å…¶è¿›è¡Œç¼–ç¨‹å¹¶ä½¿ç”¨å®ƒã€‚ å¯ä»¥è°ƒæ•´è§’è‰²çš„é€Ÿåº¦ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨æ­¥è¿›åˆ°è¿è¡Œçš„èŒƒå›´å†…ä»¥ä»»æ„é€Ÿåº¦ç§»åŠ¨ã€‚ è¿™æ˜¯é€šè¿‡ä»è½´è·å–åˆ†æ•°å‚æ•°æ¥å®ç°çš„ã€‚ æˆ‘çš„æ¸¸æˆæ¿ä»…è¿”å›æ•´æ•°-1å’Œ1ã€‚æ­¤å¤–ï¼Œæˆ‘çš„æ¸¸æˆæ¿æœ‰ä¸€ä¸ªä»¤äººè®¨åŒçš„å‰å·ï¼Œå½“å‘å·¦æˆ–å‘å³æŒ‰â€‹â€‹ä¸‹æ—¶ï¼ŒåŒæ—¶å‘ä¸‹æˆ–å‘ä¸ŠæŒ‰ä¸‹ã€‚ å› æ­¤ï¼Œæˆ‘æ²¡æœ‰ä½¿ç”¨åå­—æ¶çš„é¡¶éƒ¨å’Œåº•éƒ¨ï¼Œè€Œæ˜¯ä½¿ç”¨æ¸¸æˆæ‰‹æŸ„å³ä¾§çš„æŒ‰é’®è¿›è¡Œäº†å¤åˆ¶ã€‚...åœ¨æ¸¸æˆå‘è¡Œæ—¶ï¼Œæˆ‘è®¡åˆ’åˆ›å»ºæ¸¸æˆæ‰‹æŸ„çš„å¤šä¸ªé…ç½®æ–‡ä»¶ã€‚ å¦å¤–ï¼Œåœ¨è¿æ¥å¤šä¸ªæ¸¸æˆæ‰‹æŸ„çš„æƒ…å†µä¸‹ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ä»…å°†ä½¿ç”¨åè€…ã€‚ <br><br><h3> å“åº”å¼å±å¹• </h3><br> è¯¥æ¸¸æˆçš„å®½é«˜æ¯”ä¸º16ï¼š9ã€‚ ä½†æ˜¯æˆ‘æ·»åŠ äº†Â±10ï¼…çš„è‡ªåŠ¨æ°´å¹³è°ƒæ•´ï¼Œä»¥ä¾¿åœ¨æ‰©å±•çš„æµè§ˆå™¨çª—å£ä¸­ä¾§é¢æ²¡æœ‰è¿™ç§é»‘æ¡ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ey/bn/a5/eybna55ofeptyziaakgix67heea.jpeg"></div><br> å°±åƒè¿™æ ·ï¼š <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vm/0n/aa/vm0naaertcqacqufxjadz-sdfyu.jpeg"></div><br> åœ¨å…¨å±æ¨¡å¼ä¸‹ï¼Œå°†æœ‰çœŸæ­£çš„16ï¼š9ã€‚ å¯ä»¥ä½¿å›¾åƒæ€»ä½“é€‚åº”æµè§ˆå™¨çª—å£çš„ä»»ä½•çºµæ¨ªæ¯”ï¼Œä½†æ˜¯æˆ‘æ²¡æœ‰è¿™æ ·åšï¼Œå› ä¸ºä½çš„å®½çª—å£ä¼šå¯¼è‡´å¤ªå¤§çš„è§†è§’ï¼Œä»æ¸¸æˆè§’åº¦æ¥çœ‹è¿™æ˜¯ä¸å¥½çš„ï¼šé¥è¿œçš„æ­»è§’ï¼Œç‰©ä½“ï¼Œæ•Œäººå°†ç«‹å³å¯è§ä»¥åŠç©å®¶ä¸éœ€è¦çœ‹åˆ°çš„å…¶ä»–æ‰€æœ‰å†…å®¹ã€‚ å› æ­¤ï¼Œæˆ‘å°†è‡ªå·±é™åˆ¶åœ¨16ï¼š9çš„Â±10ï¼…èŒƒå›´å†…ã€‚ ä½†æ˜¯ï¼Œå¯¹äºç‹­çª„çš„æ˜¾ç¤ºå™¨ï¼ˆ4ï¼š3ï¼‰ï¼Œæˆ‘ä»ç„¶æ„è¯†åˆ°å¯ä»¥é€šè¿‡æŒ‰Yé”®ä»4ï¼š3åˆ‡æ¢åˆ°16ï¼š9åˆ°é€‚åº”æ¨¡å¼ã€‚ ä½†ä¸è¦æ›´å®½-å› æ­¤ï¼ŒåŒæ ·ï¼Œä¸è¦ç ´åæ¸¸æˆç©æ³•ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨å¯ä»¥ä»¥ç»å…¸çš„16ï¼š9æ¯”ä¾‹æ’­æ”¾ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æ°´å¹³è£å‰ªå°†å›¾åƒæ”¾å¤§åˆ°çª—å£çš„é«˜åº¦ã€‚ è™½ç„¶ï¼Œè¿™ä¹Ÿä¸æ˜¯å¾ˆå¥½ï¼Œä¾‹å¦‚åœ¨è¡—æœºæ¸¸æˆä¸­ï¼Œå½“æŸäº›ä¸œè¥¿ä»ä¾§é¢é£å‘ç©å®¶æ—¶ã€‚ ååº”å‡ ä¹æ²¡æœ‰æ—¶é—´äº†ã€‚ ä½†æ˜¯æ‚¨æ€»æ˜¯å¯ä»¥å¿«é€Ÿè¿”å›ç»å…¸æ¨¡å¼ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/re/bp/ci/rebpciy7i7vmap1bwt_ijmub2fk.jpeg"></div><br> ä¸‹é¢çš„è§†é¢‘æ˜¾ç¤ºäº†å±å¹•çš„é€‚åº”æ€§ä»¥åŠæ¸¸æˆä¸­ä½¿ç”¨çš„æ‰€æœ‰çƒ­é”®ï¼š <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/FamXdunFFHY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br> å®é™…ä¸Šï¼Œå®½é«˜æ¯”æ˜¯åœ¨æ¸¸æˆè®¾ç½®ä¸­è®¾ç½®çš„ã€‚ <br><br><pre> <code class="javascript hljs">aspect1:{<span class="hljs-attr"><span class="hljs-attr">w</span></span>:<span class="hljs-number"><span class="hljs-number">1280</span></span>, <span class="hljs-attr"><span class="hljs-attr">h</span></span>:<span class="hljs-number"><span class="hljs-number">720</span></span>, <span class="hljs-attr"><span class="hljs-attr">p</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>}, <span class="hljs-comment"><span class="hljs-comment">//16x9 +- 10% aspect2:{w:960, h:720, p:34}, //4x3 +- 34%</span></span></code> </pre> <br> åœ¨æ¸¸æˆä¸­ï¼Œå½“æ‚¨æŒ‰Yæ—¶ï¼Œå®ƒä¼šåˆ‡æ¢ï¼š <br><br><pre> <code class="javascript hljs">contr.btCodesDn[<span class="hljs-number"><span class="hljs-number">89</span></span>] = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//'y' if (m3dcache.setup.aspect.swch == 1) { m3dcache.setup.aspect = m3dcache.setup.aspect2; m3dcache.setup.aspect.swch = 2; } else { m3dcache.setup.aspect = m3dcache.setup.aspect1; m3dcache.setup.aspect.swch = 1; }; m3d.core.onWindowResize(0); m3d.contr.renderAll(); };</span></span></code> </pre> <br> æˆ‘çš„å›¾ä¹¦é¦†æœ‰ä¸€ä¸ªæŒ‚åœ¨è°ƒæ•´å¤§å°çª—å£ä¸Šçš„äº‹ä»¶ã€‚ è¿™æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="javascript hljs">m3dcache.v.vw = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerWidth; m3dcache.v.vh = <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.innerHeight; m3dcache.v.vclipw = <span class="hljs-number"><span class="hljs-number">0</span></span>; m3dcache.v.vcliph = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> m3dcache.setup.aspect !== <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((m3dcache.setup.aspect.w == <span class="hljs-number"><span class="hljs-number">0</span></span>) || (m3dcache.setup.aspect.h == <span class="hljs-number"><span class="hljs-number">0</span></span>)) {} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> o = m3d.lib.inBlock(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, m3dcache.setup.aspect.w, m3dcache.setup.aspect.h, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, m3dcache.v.vw, m3dcache.v.vh, <span class="hljs-string"><span class="hljs-string">'center'</span></span>, <span class="hljs-string"><span class="hljs-string">'center'</span></span>, <span class="hljs-string"><span class="hljs-string">'resize'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> m3dcache.setup.aspect.p !== <span class="hljs-string"><span class="hljs-string">"undefined"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (o.clipx &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { ow = ow * (m3dcache.setup.aspect.p / <span class="hljs-number"><span class="hljs-number">100</span></span> + <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ow &gt; m3dcache.v.vw) { ow = m3dcache.v.vw; }; o = m3d.lib.inBlock(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, ow, oh, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, m3dcache.v.vw, m3dcache.v.vh, <span class="hljs-string"><span class="hljs-string">'center'</span></span>, <span class="hljs-string"><span class="hljs-string">'center'</span></span>, <span class="hljs-string"><span class="hljs-string">'resize'</span></span>); }; }; m3dcache.v.vclipw = o.clipx; m3dcache.v.vcliph = o.clipy; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> margx = o.clipx + <span class="hljs-string"><span class="hljs-string">'px'</span></span>, margy = o.clipy + <span class="hljs-string"><span class="hljs-string">'px'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'m3dcontainer'</span></span>).style.marginLeft = margx; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'m3dcontainer'</span></span>).style.marginTop = margy; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'renderer'</span></span>) !== <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'renderer'</span></span>).style.marginLeft = margx; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">'renderer'</span></span>).style.marginTop = margy; }; m3dcache.v.vw = ow; m3dcache.v.vh = oh; }; };</code> </pre> <br></div></div><br>  m3d.lib.inBlockä¹Ÿæ˜¯æˆ‘çš„åº“çš„åŠŸèƒ½ï¼Œè¯¥å‡½æ•°å°†ä¸€ä¸ªçŸ©å½¢å†…åˆ‡åˆ°å¦ä¸€ä¸ªçŸ©å½¢ä¸­ï¼Œå¹¶å¸¦æœ‰è¯¸å¦‚å±…ä¸­ï¼Œç¼©æ”¾æˆ–è£åˆ‡ä¹‹ç±»çš„å‚æ•°ï¼Œå¹¶æ˜¾ç¤ºå†…åˆ‡çŸ©å½¢çš„æ–°å°ºå¯¸ä»¥åŠåœ¨æ­¤è¿‡ç¨‹ä¸­å½¢æˆçš„å­—æ®µçš„å¤§å°ã€‚ åŸºäºæ­¤ä¿¡æ¯ï¼Œå°†æ”¾ç½®çª—å£çš„divå®¹å™¨ã€‚  â€œæ¸²æŸ“å™¨â€æ˜¯3Dåœºæ™¯çš„å—ä¸Šä¸‹æ–‡å…ƒç´ ã€‚ ç„¶åæ ¹æ®è·å¾—çš„å‚æ•°åœ¨æ­¤å¤„ç¼©æ”¾ç”»å¸ƒã€‚ <br><br>  UIæ˜¾ç¤ºåœ¨å®¹å™¨ä¸­å•ç‹¬çš„ç”»å¸ƒå…ƒç´ ä¸Šã€‚ é€šå¸¸ï¼Œæ–‡æ¡£æ ‘ç”±ä¸‰ä¸ªå…·æœ‰ç»å¯¹ä½ç½®çš„é€æ˜DIVå—ç»„æˆï¼ˆæˆ–å¤šæˆ–å°‘ï¼Œå–å†³äºæ¸¸æˆçš„éœ€è¦ï¼‰ï¼šåº•éƒ¨æ˜¯3Dåœºæ™¯çš„ç”»å¸ƒï¼Œä¸Šæ–¹æ˜¯IUçš„ç”»å¸ƒï¼Œé¡¶éƒ¨ç”¨äºä¸ºç•Œé¢å…ƒç´ å’Œå…¶ä»–è§†è§‰æ•ˆæœåˆ¶ä½œåŠ¨ç”»ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒUIä¸æ˜¯ä»¥3Då‘ˆç°ï¼Œè€Œæ˜¯åœ¨å…¶knavasæˆ–å›¾å±‚ä¸Šå‘ˆç°ã€‚ å°†å›¾å±‚ç»„åˆæˆä¸€å¼ å›¾ç‰‡çš„ä»»åŠ¡ç•™ç»™æµè§ˆå™¨ã€‚ è¦ä½¿ç”¨UIï¼Œæˆ‘åœ¨åº“ä¸­æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ã€‚ ç®€è¦åœ°-æœ¬è´¨å¦‚ä¸‹ã€‚ åŠ è½½äº†å…·æœ‰UIå…ƒç´ ï¼ˆå‘ˆpngæ ¼å¼ï¼Œå…·æœ‰é€æ˜æ€§ï¼‰çš„Spriteåˆ—è¡¨ã€‚ ä»é‚£é‡Œå¼€å§‹ï¼Œè·å–å¿…è¦çš„å…ƒç´ -èƒŒæ™¯ï¼ŒæŒ‰é’®ã€‚ ç„¶åä½¿ç”¨js drawImageå‡½æ•°ï¼ˆimgï¼Œixï¼Œiyï¼Œiwï¼Œihï¼Œxï¼Œyï¼Œwï¼Œhï¼‰å°†å®ƒä»¬ç»˜åˆ¶åœ¨ä¸­é—´ç”»å¸ƒä¸Šã€‚ å³ï¼Œæ¥è‡ªå›¾åƒçš„å¿…è¦ç‰‡æ®µè¢«æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å¿…è¦ä½ç½®ã€‚ æŒ‰é’®æ˜¾ç¤ºåœ¨é™„åŠ åˆ°å®ƒä»¬çš„èƒŒæ™¯ä¹‹ä¸Š-å®ƒä»¬çš„æ‰€æœ‰ä½ç½®å’Œå¤§å°éƒ½åœ¨UIé…ç½®ä¸­è®¾ç½®ã€‚ è°ƒæ•´çª—å£å¤§å°æ—¶ï¼Œå°†é‡æ–°è®¡ç®—ç›®æ ‡ç”»å¸ƒï¼ˆåœ¨å…¶ä¸Šæ˜¾ç¤ºå…ƒç´ ï¼‰ä¸Šçš„å…ƒç´ ä½ç½®ï¼Œå…·ä½“å–å†³äºè¯¥å…ƒç´ åœ¨æ°´å¹³æˆ–å‚ç›´æ–¹å‘ä¸Šå±…ä¸­è¿˜æ˜¯åœ¨å±å¹•çš„æŸä¸ªè§’æˆ–é¢ä¸Šå¯¹é½ã€‚ è¿™å°†åˆ›å»ºä¸€ä¸ªä¸ä¾èµ–äºå±å¹•çš„çºµæ¨ªæ¯”çš„è‡ªé€‚åº”UIã€‚ ä»…éœ€è¦åœ¨æ°´å¹³å’Œå‚ç›´æ–¹å‘ä¸Šè®¾ç½®æœ€å°å¯èƒ½çš„åˆ†è¾¨ç‡ï¼Œå¹¶ä¸”ä¸ä½äºè¯¥åˆ†è¾¨ç‡ï¼Œä»¥ä½¿å…ƒç´ å½¼æ­¤ä¸é‡å ã€‚ æˆ‘å°†å†æ¬¡è®¨è®ºUIï¼Œå› ä¸ºæ–‡ç« ç¯‡å¹…å¾ˆå¤§ï¼Œè€Œä¸”æˆ‘ä»åœ¨ç ”ç©¶UIï¼Œå› ä¸ºä»ç„¶ç¼ºå°‘å¾ˆå¤šæˆ‘éœ€è¦çš„åŠŸèƒ½ã€‚ ä¾‹å¦‚ï¼Œåœ¨é«˜åˆ†è¾¨ç‡æ˜¾ç¤ºå™¨ä¸Šï¼Œç•Œé¢çœ‹èµ·æ¥ä¼šå¾ˆå°ã€‚ æ‚¨å¯ä»¥å°†å…ƒç´ çš„å¤§å°ä¹˜ä»¥æŸä¸ªç³»æ•°ï¼Œå…·ä½“å–å†³äºå±å¹•åˆ†è¾¨ç‡ã€‚ å¦ä¸€æ–¹é¢ï¼Œä¹Ÿè®¸ä¸éœ€è¦å±å¹•ä¸Šçš„å¤§æŒ‰é’®ï¼Ÿ å¦‚æœå±å¹•åˆ†è¾¨ç‡å¾ˆå¤§ï¼Œé‚£ä¹ˆå±å¹•æœ¬èº«å°±å¾ˆå¤§ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kg/id/am/kgidamgcsszbyxejvyyar7bgave.jpeg"></div><br> æ‚¨å¯ä»¥ç»™ç¨‹åºå‘˜ä¸€ä¸ªé€‰æ‹©-æ˜¯æ ¹æ®çª—å£çš„å¤§å°åŠ¨æ€ç¼©æ”¾IUè¿˜æ˜¯å°†å…ƒç´ åˆ†å¸ƒåœ¨è§’è½ã€‚ åœ¨åŠ¨æ€å°ºå¯¸çš„æƒ…å†µä¸‹ï¼Œè¿˜å­˜åœ¨å…¶è‡ªèº«çš„é—®é¢˜-ä¾‹å¦‚ï¼Œç•Œé¢ä»¥å¤ªå¤§çš„æ¯”ä¾‹æ˜¾ç¤ºæ—¶çš„â€œè‚¥çš‚â€ã€‚ å¦‚æœæ‚¨ä»¥æ•…æ„å¾ˆå¤§çš„åˆ†è¾¨ç‡åˆ¶ä½œç•Œé¢å…ƒç´ çš„ç²¾çµï¼Œé‚£ä¹ˆå®ƒä»¬å°†å ç”¨å¤§é‡ç©ºé—´ï¼Œå¹¶ä¸”å¯èƒ½å¯¹å°å‹è®¾å¤‡ä¹Ÿæ²¡æœ‰ç”¨-å®ƒä»¬ä»ç„¶ä¸éœ€è¦å¤§çš„ç²¾çµï¼Œä½†æ˜¯å®ƒä»¬ä¼šæ¶ˆè€—å†…å­˜ã€‚ <br><br> æˆ‘è®¤ä¸ºä»Šå¤©å°±è¶³å¤Ÿäº†ã€‚ è¿˜æœ‰ä»€ä¹ˆè¦è€ƒè™‘çš„ï¼Œå¦‚ä½•å®ç°è¿™ä¸€ç‚¹æˆ–é‚£ä¸€ç‚¹ã€‚ åŒæ—¶ï¼Œæˆ‘ç¦»å¼€äº†ç¼–ç¨‹ä¸€æ®µæ—¶é—´ï¼Œåšäº†æ™‹å‡ã€‚ æˆ‘è®¡åˆ’å‚åŠ ä¸€å¯¹ç‹¬ç«‹çš„å±•ç¤ºä¼šï¼Œå¹¶ç§¯æå‚ä¸ç¤¾äº¤ç½‘ç»œæ¸¸æˆçš„æ¨å¹¿ï¼Œå› ä¸ºè‡ª11æœˆä»¥æ¥ï¼Œæˆ‘è®¡åˆ’å»ä¼—ç­¹å¹³å°ï¼šæˆ‘å°†éœ€è¦3Då›¾å½¢å’Œéª¨éª¼åŠ¨ç”»é¢†åŸŸçš„ä¸“å®¶æ‰èƒ½å®Œæˆæ¸¸æˆã€‚ <br><br> åœ¨ä»¥ä¸‹æ–‡ç« ä¸­ï¼Œæˆ‘å°†è®¨è®ºç§»åŠ¨è®¾å¤‡æµè§ˆå™¨ä¸­çš„è§¦æ‘¸æ§ä»¶-å¹¶éæ¯ä¸ªäººéƒ½å°†æ¸¸æˆæ‰‹æŸ„æˆ–é”®ç›˜è¿æ¥åˆ°å¹³æ¿ç”µè„‘ï¼Œå…³äºé’ˆå¯¹ä½åŠŸè€—è®¾å¤‡ä¼˜åŒ–3Då›¾å½¢çš„å†…å®¹ç­‰ç­‰ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN472272/">https://habr.com/ru/post/zh-CN472272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN472258/index.html">å¦‚ä½•â€œå­¦ä¼šå­¦ä¹ â€-æé«˜æ­£å¿µ</a></li>
<li><a href="../zh-CN472262/index.html">ï¼ƒ318ç§»åŠ¨å¼€å‘äººå‘˜çš„æœ‰è¶£ææ–™æ‘˜è¦ï¼ˆ10æœˆ14æ—¥è‡³20æ—¥ï¼‰</a></li>
<li><a href="../zh-CN472264/index.html">æ•°å­—è€ƒå¤å­¦å’Œè™šæ‹Ÿç°å®ï¼Œæˆ–è€…æˆ‘å¦‚ä½•å°è¯•é€šè¿‡BIMå’ŒVRç»“è¯†æœ‹å‹</a></li>
<li><a href="../zh-CN472268/index.html">æ”¹å–„Chromiumä¸Šçš„Microsoft Edgeæ§ä»¶</a></li>
<li><a href="../zh-CN472270/index.html">â€œæ‚¨æ— æ³•è·å¾—å½“å‰çš„ç¥ˆç¥·â€ï¼šæ¢µè’‚å†ˆçš„é«˜ç§‘æŠ€ç å­åœ¨15åˆ†é’Ÿå†…è¢«é»‘å®¢å…¥ä¾µ</a></li>
<li><a href="../zh-CN472274/index.html">è¿œç¨‹SSHï¼šæç¤ºå’ŒæŠ€å·§</a></li>
<li><a href="../zh-CN472278/index.html">æˆ‘æœ€å–œæ¬¢çš„git commit</a></li>
<li><a href="../zh-CN472280/index.html">ç¡®å®šé™è„‰æ‰«æä»ªä¸Šæ˜¯å¦å­˜åœ¨æ‰‹æŒçš„ä»»åŠ¡</a></li>
<li><a href="../zh-CN472288/index.html">9æœ‰ç”¨çš„æµè§ˆå™¨æ‰©å±•å¼€å‘äººå‘˜ï¼ˆåå•2020ï¼‰</a></li>
<li><a href="../zh-CN472290/index.html">ç»“æ„ä¸ç±»</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>