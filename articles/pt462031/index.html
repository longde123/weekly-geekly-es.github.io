<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï¥üèæ ‚òùüèª üë©üèº‚Äçü§ù‚Äçüë®üèΩ Por exemplo, se voc√™ ler os logs!: Inicie o Hotspot 2.0 na rede Wi-Fi no metr√¥ ü§¶üèæ üéµ üî°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Compartilhamos nossa experi√™ncia na cria√ß√£o de uma rede Wi-Fi fechada no metr√¥ usando a tecnologia Hotspot 2.0, as primeiras estat√≠sticas e recomenda√ß...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Por exemplo, se voc√™ ler os logs!: Inicie o Hotspot 2.0 na rede Wi-Fi no metr√¥</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/maximatelecom/blog/462031/">  Compartilhamos nossa experi√™ncia na cria√ß√£o de uma rede Wi-Fi fechada no metr√¥ usando a tecnologia Hotspot 2.0, as primeiras estat√≠sticas e recomenda√ß√µes de seguran√ßa.  E tamb√©m convidamos a abrir os testes de uma nova rede. <br><br><img src="https://habrastorage.org/webt/eo/gq/fc/eogqfc7vibf0po_malf2ofbfwra.jpeg"><br><a name="habracut"></a><br>  A partir de meados de fevereiro, no verde, e do final de abril, em todas as linhas do metr√¥ de Moscou, lan√ßou uma nova rede Wi-Fi fechada - <b>MT</b> .  A rede funcionou no modo de teste.  Durante todo esse tempo, realizamos testes internos dos funcion√°rios e tamb√©m observamos a estabilidade dos pontos de acesso e controladores, o poss√≠vel impacto no servi√ßo no SSID MT_FREE aberto. <br><br>  O lan√ßamento desta rede n√£o passou despercebido entre nossos usu√°rios.  Por meio de v√°rios canais, recebemos v√°rias perguntas sobre como obter credenciais.  Mas muitos n√£o abandonaram as tentativas de conex√£o atrav√©s de contas inventadas.  No momento em que esse SSID estava dispon√≠vel, foram registradas 14.488 solicita√ß√µes de autoriza√ß√£o exclusivas.  Al√©m disso, alguns assinantes at√© nos escreveram mensagens usando o formul√°rio para inserir o nome de usu√°rio.  Uma dessas mensagens, a frase ‚ÄúComo se voc√™ ler os logs!‚Äù, Foi especialmente agrad√°vel de ler.  Gosto m√∫tuo! <br><br><img src="https://habrastorage.org/webt/vt/fm/fg/vtfmfgugcsmtd34wt35woq9igp4.png"><br><br>  Vamos dar uma breve olhada nos pr√©-requisitos para iniciar uma rede fechada, as possibilidades e limita√ß√µes e o aspecto t√©cnico da implementa√ß√£o do Hotspot 2.0. <br><br><h3>  Por que precisamos de uma rede MT fechada? </h3><br>  O in√≠cio de uma rede fechada usando credenciais que identificam exclusivamente um dispositivo ou usu√°rio foi discutido por n√≥s v√°rias vezes.  Os drivers de inicializa√ß√£o s√£o principalmente problemas de seguran√ßa.  √â necess√°rio excluir a possibilidade de conectar-se a pontos de phishing com nosso SSID e faz√™-lo de forma transparente, para que nenhuma a√ß√£o adicional seja necess√°ria ao usu√°rio.  Embora quase todo o tr√°fego sens√≠vel da Internet seja criptografado usando TLS, os assinantes consideram as redes Wi-Fi sem criptografia menos confi√°veis. <br><br>  Outro motivo para iniciar uma rede com autoriza√ß√£o de credencial √© a tend√™ncia de randomizar os endere√ßos MAC dos dispositivos quando conectados a redes Wi-Fi.  Essa tend√™ncia √© cada vez mais aparente em dispositivos Android.  Al√©m disso, se endere√ßos MAC anteriormente vari√°veis ‚Äã‚Äãeram um atributo de smartphones baratos (principalmente chineses) e eram usados ‚Äã‚Äãpelos fabricantes simplesmente por causa da falta de conjuntos de endere√ßos MAC oficialmente reservados, recentemente o Google anunciou oficialmente a introdu√ß√£o dessa tecnologia no sistema operacional Android para impedir o rastreamento de assinantes.  Isso cria obst√°culos para o uso total do Wi-Fi p√∫blico na R√∫ssia, uma vez que em cada entrada ser√° necess√°ria uma nova identifica√ß√£o do dispositivo (de acordo com os decretos governamentais 758 e 801).  Assim, o endere√ßo MAC deixa gradualmente de ser um meio aceit√°vel de identificar um dispositivo na rede. <br><br><h3>  Vis√£o geral dos recursos do ponto de acesso </h3><br>  Em busca de uma solu√ß√£o para esses problemas, voltamos nossa aten√ß√£o para a tecnologia Hotspot 2.0, que est√° sendo desenvolvida, incluindo a Wi-Fi Alliance e a Wireless Broadband Alliance.  Na primeira revis√£o, a tecnologia deve fechar todas as necessidades emergentes - uma conex√£o segura com um SSID confi√°vel e uma conex√£o criptografada.  Abaixo est√° uma compara√ß√£o do novo paradigma para a organiza√ß√£o de redes Wi-Fi da operadora e o estado atual. <br><br><img src="https://habrastorage.org/webt/p1/en/fq/p1enfqhqxhc3npbb3rmdadeln04.jpeg"><br>  <i><font color="999999">Compara√ß√£o de abordagens para a organiza√ß√£o de redes Wi-Fi - antes e depois da introdu√ß√£o da tecnologia Hotspot 2.0.</font></i> <br><br>  A pilha do Hotspot 2.0 inclui tr√™s tecnologias principais: <br><br><ul><li>  A capacidade de tomar uma decis√£o sobre a conex√£o √† rede e a conex√£o pelo pr√≥prio dispositivo sem a a√ß√£o do usu√°rio (802.11u), independentemente do SSID; </li></ul><br><ul><li>  Uso seguro e privado da rede - criptografia de tr√°fego na parte de r√°dio (802.11i, ou na terminologia da Wi-Fi Alliance conhecida por todos os WPA2); </li></ul><br><ul><li>  Um conjunto de m√©todos de autentica√ß√£o e autoriza√ß√£o para credenciais e gerenciamento de credenciais (EAP, provisionamento). </li></ul><br>  A tecnologia √© bastante jovem, o primeiro lan√ßamento ocorreu no final de 2012, mas est√° se desenvolvendo bastante ativamente.  No final de fevereiro deste ano, o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">terceiro lan√ßamento</a> foi anunciado.  Vale ressaltar que o ecossistema do Hotspot 2.0 est√° desenvolvendo n√£o apenas a Wi-Fi Alliance. <br><br><img src="https://habrastorage.org/webt/uu/rf/5e/uurf5ef9qhjb5kvipiqn7g0gqpi.jpeg"><br><br>  √â improv√°vel que eu me engane se presumir que muitos leitores associam a tecnologia Hotspot 2.0 √† transfer√™ncia (descarregamento de tr√°fego) de uma rede Wi-Fi para uma m√≥vel. <br><br>  De fato, o maior n√∫mero de implementa√ß√µes do Hotspot 2.0 ocorreu entre as operadoras de telefonia m√≥vel, e a AT&amp;T √© pioneira aqui.  H√° uma explica√ß√£o para isso - um pr√©-requisito para a opera√ß√£o de comunica√ß√µes m√≥veis √© a presen√ßa no dispositivo de um cart√£o SIM f√≠sico ou virtual.  Juntamente com os perfis do operador e a possibilidade de atualiz√°-los ‚Äúover the air‚Äù, essa condi√ß√£o fornece provisionamento transparente para o cliente (no contexto do Hotspot 2.0, transfer√™ncia de credenciais, valida√ß√£o e aplica√ß√£o no sistema operacional). <br><br>  Ao mesmo tempo, a experi√™ncia do cliente na rede Wi-Fi de uma operadora se torna compar√°vel (e, sob certas condi√ß√µes, melhor) do que a experi√™ncia em uma rede m√≥vel.  O caso tamb√©m √© aplic√°vel aos operadores MVNO, mas tudo depende do esquema de trabalho com o operador host.  Para outras operadoras, como n√≥s, o principal desafio √© a quest√£o do provisionamento de dispositivos e tudo relacionado a ele.  Vamos tentar descobrir. <br><br><h3>  √â tudo sobre credenciais </h3><br>  Credenciais s√£o uma entidade que identifica exclusivamente um usu√°rio.  Esses dados devem ser protegidos com seguran√ßa para que um invasor n√£o possa intercept√°-los e reutiliz√°-los.  A presen√ßa de credenciais resolve o problema da autentica√ß√£o MAC, quando voc√™ pode "ouvir" o r√°dio usando um sniffer, descobrir e substituir o endere√ßo MAC do dispositivo de outra pessoa. <br><br>  Os tipos mais comuns de credenciais e m√©todos de autentica√ß√£o s√£o: <br><br><ul><li>  M√©todos de cart√£o SIM, EAP-SIM, EAP-AKA </li></ul><br><ul><li>  Par de login e senha, EAP-PEAP, EAP-TTLS </li></ul><br><ul><li>  Certificado, EAP-TLS </li></ul><br>  As operadoras de celular e MVNO com seus pr√≥prios cart√µes SIM est√£o em uma posi√ß√£o privilegiada - as credenciais adequadas para a rede Wi-Fi j√° est√£o no telefone, s√£o protegidas com seguran√ßa e n√£o s√£o necess√°rias a√ß√µes adicionais do cliente.  O que os outros devem fazer? <br><br>  A configura√ß√£o manual √© um processo complexo, altamente dependente do SO espec√≠fico.  Para assinantes, isso √© extremamente inconveniente.  Transferir credenciais em uma rede com configura√ß√£o autom√°tica de dispositivo pode ser uma boa solu√ß√£o.  Esse processo ser√° chamado de provisionamento e aqui reside a principal limita√ß√£o da tecnologia no est√°gio atual de desenvolvimento. <br><br><h3>  Evolu√ß√£o do Hotspot 2.0 </h3><br>  No momento, foram lan√ßadas tr√™s vers√µes do Hotspot com designa√ß√µes n√£o triviais 1, 2, 3. E a tecnologia ainda √© chamada 2.0.  De fato, o Hotspot 2.0 √© um conjunto de padr√µes que define uma nova abordagem para organizar as redes Wi-Fi da operadora, quando a experi√™ncia de usar essas redes √© compar√°vel √† de uma rede m√≥vel.  E dentro da estrutura de lan√ßamentos (1, 2, 3), os pr√≥prios padr√µes s√£o formados, para os quais os dispositivos s√£o certificados. <br><br>  Portanto, o principal "truque" da primeira vers√£o e da base de tecnologia de meio per√≠odo √© o padr√£o IEEE 802.11u.  O suporte ao 802.11u √© necess√°rio no lado da infraestrutura de rede Wi-Fi (pontos de acesso e controladores) e no lado dos dispositivos clientes.  Na situa√ß√£o do hardware, n√£o h√° problemas especiais: mais e mais fornecedores suportam o padr√£o, porque  em chips mais ou menos modernos, a implementa√ß√£o do protocolo de software.  Mas investigaremos a situa√ß√£o com os dispositivos clientes um pouco mais tarde. <br><br>  A segunda vers√£o padroniza o processo de provisionamento e uma nova infraestrutura espec√≠fica - Online Signup Server (OSU).  Este √© um servidor que realiza a forma√ß√£o e transmiss√£o de configura√ß√µes de rede para dispositivos clientes. <br><br>  A vers√£o 3 publicada recentemente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desenvolve ferramentas de provisionamento</a> .  Em uma varredura superficial, eu n√£o percebi os novos "recursos matadores" e n√£o h√° nenhum dispositivo ou infraestrutura dispon√≠vel para senti-lo na pr√°tica.  Se percebermos o interesse dos leitores, podemos tentar examinar com mais detalhes as fun√ß√µes e diferen√ßas de cada vers√£o em outro artigo. <br><br><h3>  Provisioning </h3><br>  Investigamos o problema da penetra√ß√£o da pilha da tecnologia Hotspot nos dispositivos clientes.  Para isso, usaremos a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ferramenta</a> da Wi-Fi Alliance, onde s√£o apresentados os resultados da certifica√ß√£o dos dispositivos.  A certifica√ß√£o √© um processo volunt√°rio, portanto, os resultados n√£o s√£o para todos os dispositivos.  Por exemplo, apenas alguns dispositivos da Apple foram aprovados na certifica√ß√£o - iPhone 3, iPhone 4, iPad.  No entanto, todos os dispositivos iOS atuais suportam toda a pilha necess√°ria do Hotspot 2.0 e, o mais importante, o fazem quase da mesma maneira, de vers√£o para vers√£o. <br><br>  Assim, analisamos os resultados da certifica√ß√£o, com exce√ß√£o dos dispositivos iOS, para o per√≠odo de 2012 (publica√ß√£o do primeiro lan√ßamento).  Visualizamos as estat√≠sticas obtidas na forma de um diagrama abaixo.  Conclus√£o - apenas todo quinto dispositivo n√£o iOS suporta a primeira vers√£o (802.11u), a cada d√©cimo - possui uma interface de provisionamento padronizada.  Esta situa√ß√£o complica a aplica√ß√£o em massa. <br><br><img src="https://habrastorage.org/webt/ct/rd/ia/ctrdia_5i9rbagh0airfiu_-qk8.jpeg"><br>  <i><font color="999999">Penetra√ß√£o do Hotspot 2.0 em dispositivos clientes (exceto iOS)</font></i> <br><br>  Do ponto de vista t√©cnico, o resultado do provisionamento √© a presen√ßa no dispositivo de credenciais v√°lidas e outras configura√ß√µes necess√°rias para uma rede SSID ou Wi-Fi espec√≠fica.  A segunda vers√£o padronizou a estrutura para representar as configura√ß√µes de rede na forma de documentos XML e os mecanismos para sua transfer√™ncia para os dispositivos.  Um conjunto de configura√ß√µes de rede que cont√©m, em particular, credenciais, √© chamado de perfil de rede.  Inicialmente, uma solu√ß√£o semelhante foi proposta pela Apple, mas no final seu desenvolvimento foi padronizado com mudan√ßas significativas.  A captura de tela abaixo √© um exemplo de perfil para iOS.  Al√©m disso, qualquer usu√°rio do Mac OS pode praticar a cria√ß√£o de perfis usando o utilit√°rio Apple Configurator e seguindo a documenta√ß√£o oficial. <br><br><img src="https://habrastorage.org/webt/zj/f-/qu/zjf-qur4nmgeknxj1t3mimg3yxo.png"><br>  <i><font color="999999">Exemplo de perfil para iOS</font></i> <br><br>  Como √© o processo de provisionamento para o usu√°rio?  Existem v√°rias solu√ß√µes comerciais de OSU no mercado - GlobalReach Odyssys, Ruckus CloudPath, Aruba ClearPass - para que possamos ver o processo usando uma delas como exemplo.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">O link</a> fornece capturas de tela para a solu√ß√£o da GlobalReach Odyssys.  O link precisa ser aberto apenas no navegador Safari, caso contr√°rio, o sistema operacional do smartphone n√£o reconhecer√° o arquivo de perfil (possui a extens√£o mobileconfig) e n√£o oferecer√° a instala√ß√£o. <br><br>  Aqui, a configura√ß√£o do perfil √© mostrada com o n√∫mero m√°ximo de etapas por parte do usu√°rio, por exemplo, quando, al√©m do smartphone, h√° tamb√©m um Apple Watch (sim, voc√™ pode colocar um perfil no rel√≥gio e ele se conectar√° ao Wi-Fi).  O provisionamento da Web de dispositivos iOS √© poss√≠vel apenas atrav√©s do navegador Safari, este √© um requisito do SO.  O provisionamento de dispositivos Android, dependendo da vers√£o, pode ser realizado pelo navegador e pelo aplicativo. <br><br><img src="https://habrastorage.org/webt/sy/ow/__/syow__ffcmqtbevqm3hxxkqtwqg.jpeg"><br><br><img src="https://habrastorage.org/webt/ch/xa/cn/chxacn5hpb1br53nvrk83jwdh4g.jpeg"><br><br>  Em geral, o algoritmo de configura√ß√£o de rede √© o mesmo para todos os dispositivos: <br><br><ul><li>  o usu√°rio se conecta a uma rede Wi-Fi aberta (um cen√°rio de conex√£o com uma rede fechada especial em que apenas o OSU estar√° dispon√≠vel √© poss√≠vel) ou usa a Internet m√≥vel para abrir a p√°gina do OSU; </li></ul><br><ul><li>  na pr√≥xima etapa, identificamos o usu√°rio (confirma√ß√£o por SMS, inser√ß√£o de credenciais em sua conta pessoal, identifica√ß√£o atrav√©s do aplicativo); </li></ul><br><ul><li>  no lado de back-end, geramos credenciais, salvamos e transmitimos ao usu√°rio; </li></ul><br><ul><li>  credenciais e configura√ß√µes de rede s√£o armazenadas no dispositivo do usu√°rio; </li></ul><br><ul><li>  o dispositivo est√° pronto para funcionar na rede Hotspot 2.0, nenhuma a√ß√£o adicional √© necess√°ria, voc√™ s√≥ precisa estar na √°rea de cobertura dessa rede. </li></ul><br>  Do nosso ponto de vista, e acho que o p√∫blico concordar√° com isso, o provisionamento da Web exige muita a√ß√£o do usu√°rio e o processo em si n√£o √© transparente.  Ningu√©m tem uma pergunta, qual senha deve ser inserida no formul√°rio? <br><br>  O uso do aplicativo reduz a necessidade de a√ß√£o ao m√≠nimo, para um ou dois.  Infelizmente, por√©m, a tecnologia est√° se movendo ativamente apenas para o desenvolvimento e padroniza√ß√£o do provisionamento da Web, o Mobile Device Management Protocol (OAM DM), enquanto a possibilidade de usar o aplicativo n√£o se reflete no padr√£o.  No entanto, os fabricantes de sistemas operacionais m√≥veis est√£o apresentando a funcionalidade das configura√ß√µes de software para as configura√ß√µes de rede do Hotspot 2.0, mas as implementa√ß√µes de diferentes fornecedores s√£o significativamente diferentes, n√£o h√° universalidade. <br><br><h3>  Subtotal </h3><br>  Resumindo todas as op√ß√µes acima, resumimos os breves resultados da revis√£o e o estado atual da tecnologia: <br><br><ul><li>  Pode resolver o problema de randomizar endere√ßos MAC; </li></ul><br><ul><li>  Pode excluir a possibilidade de conectar-se ao SSID falso de cibercriminosos para nossos usu√°rios; </li></ul><br><ul><li>  Requer provisionamento de credenciais; </li></ul><br><ul><li>  Baixa penetra√ß√£o de parte da pilha de tecnologia (802.11u, provisionamento) em dispositivos Android; </li></ul><br><ul><li>  Provisionamento padronizado da web; </li></ul><br><ul><li>  As provis√µes usando o protocolo OMA DM s√£o padronizadas, cujo escopo √© limitado √†s redes corporativas; </li></ul><br><ul><li>  Apesar da padroniza√ß√£o, a implementa√ß√£o e a funcionalidade suportada dependem do fornecedor (especialmente relevante para o Android). </li></ul><br>  Dadas as vantagens significativas da tecnologia, bem como o status atual de seu desenvolvimento, decidimos introduzir o Hotspot 2.0 em nossa rede. <br><br><h3>  Implementa√ß√£o do ponto de acesso 2.0 em uma rede de grande escala </h3><br>  Durante o processo de lan√ßamento, foi necess√°rio resolver v√°rios problemas importantes. <br><br>  <b>1. Altera√ß√µes no equipamento de rede sem fio</b> <br><br>  Nossas maiores redes, no metr√¥ de Moscou e S√£o Petersburgo, s√£o constru√≠das com equipamentos da Cisco que suportam a tecnologia Hotspot 2.0.  A tarefa de instalar todos os controladores no material circulante foi provavelmente a mais volumosa.  A configura√ß√£o do controlador de refer√™ncia desenvolvida e testada anteriormente usando o configurador autom√°tico (escrevemos sobre isso em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> separado) foi aplicada a todas as composi√ß√µes.  Aplica√ß√£o estendida em v√°rias etapas.  Primeiro, no ramo verde do metr√¥ de Moscou, para avaliar efeitos e influ√™ncias locais e, depois, em toda a rede.  Agora, o segundo SSID MT est√° implantado em todo o material circulante do metr√¥ de Moscou. <br><br>  <b>2. Refinamento do lado da infraestrutura interna, em particular no servidor RADIUS</b> <b><br></b> <br>  Como temos um servidor RADIUS totalmente desenvolvido, tivemos que implementar o suporte ao EAP e ao m√©todo de autentica√ß√£o interna. <br><br>  <b>3. Escolhendo um tipo de credencial e m√©todo de autentica√ß√£o</b> <b><br></b> <br>  A escolha n√£o deve apenas fornecer autentica√ß√£o e autoriza√ß√£o confi√°veis ‚Äã‚Äãe transparentes para o assinante da rede, mas tamb√©m manter a efici√™ncia de nossos modelos de monetiza√ß√£o atuais e futuros.  Lembramos que a monetiza√ß√£o (por meio de publicidade e servi√ßos adicionais) nos permite fornecer acesso gratuito √† rede. <br><br>  O tipo de credencial √© escolhido entre o par de nome de usu√°rio / senha e o certificado X.509.  √Ä primeira vista, o uso do certificado parece mais confi√°vel, moderno e promissor.  Por exemplo, voc√™ pode organizar o uso do mesmo certificado para autentica√ß√£o em aplicativos (mesmo em nossa pr√≥pria conta pessoal), al√©m disso de forma transparente.  No entanto, a quest√£o do gerenciamento de certificados de usu√°rio em uma grande rede p√∫blica (em vez de em uma rede corporativa limitada quando h√° acesso f√≠sico a dispositivos) parece n√£o-trivial, especialmente devido √†s diferen√ßas nas implementa√ß√µes dos fabricantes. <br><br>  Portanto, escolhemos o par de nome de usu√°rio / senha.  O m√©todo √© TTLS, pois √© amplamente usado para roaming Wi-Fi internacional entre operadores.  Para autenticar o servidor e excluir a possibilidade de conex√£o com SSIDs falsos (h√° nuances, as consideraremos na se√ß√£o sobre seguran√ßa), emitiremos uma chave e um certificado, cuja parte privada ser√° colocada no servidor AAA e a aberta ser√° inclu√≠da no perfil.  Assim, no est√°gio de conex√£o, a autentica√ß√£o do servidor de autoriza√ß√£o ocorrer√°. <br><br>  <b>4. Provid√™ncia</b> <br><br>  A quest√£o mais dif√≠cil, que n√£o est√° completamente fechada.  Precisamos garantir que as credenciais sejam transferidas para os dispositivos do usu√°rio com um m√≠nimo de a√ß√µes por parte do propriet√°rio, e √© melhor ser transparente para ele.  √â necess√°rio garantir o mesmo fluxo para os propriet√°rios de iOS e Android, onde n√£o apenas a vers√£o para a vers√£o do SO, mas tamb√©m para dispositivos de diferentes fabricantes, as configura√ß√µes de credenciais podem diferir drasticamente.  Infelizmente, ainda n√£o existe uma solu√ß√£o universal.  Tivemos ideias para transferir a funcionalidade de provisionamento e gerenciamento da conex√£o Wi-Fi para um aplicativo m√≥vel como uma solu√ß√£o universal, mas encontramos limita√ß√µes das duas plataformas. <br><br>  No momento, continuamos a pesquisa e, possivelmente, na vers√£o final, haver√° altera√ß√µes no procedimento de provisionamento ou parte da funcionalidade.  Ainda consideramos a id√©ia de usar o aplicativo como a mais promissora e f√°cil de usar e continuamos a desenvolv√™-la. <br><br>  Mas voc√™ precisa come√ßar em algum lugar e, como o processo de provisionamento √© unificado em todos os dispositivos iOS, come√ßamos a implementar o Hotspot 2.0 com os gadgets da Apple.  Desenvolvemos um provisionamento de servi√ßo da web.  Convidamos todos a participar dos testes abertos da nova rede, instru√ß√µes detalhadas no final do artigo. <br><br><h3>  Sobre seguran√ßa </h3><br>  Fornecer redes e credenciais Wi-Fi usando perfis iOS √© apenas uma pequena parte da funcionalidade MDM (Mobile Device Management).  Nas m√£os dos atacantes, a funcionalidade pode levar a consequ√™ncias negativas para os usu√°rios, at√© o bloqueio completo do dispositivo ou seu gerenciamento por terceiros.  Em particular, restri√ß√µes √† instala√ß√£o / remo√ß√£o de aplicativos podem ser adicionadas atrav√©s do perfil, um invasor pode controlar a instala√ß√£o de aplicativos, pode direcionar o tr√°fego do usu√°rio atrav√©s de seu proxy, etc.  Portanto, o processo de instala√ß√£o de um perfil requer maior aten√ß√£o do usu√°rio - <b>voc√™ precisa garantir que o perfil seja lan√ßado por uma empresa confi√°vel.</b> <br><br>  Agora, a √∫nica maneira transparente de provisionar dispositivos iOS para trabalhar em redes Hotspot 2.0 √© definir perfis.  Gostar√≠amos de dar algumas recomenda√ß√µes sobre a instala√ß√£o de perfis que ser√£o √∫teis n√£o apenas no contexto das configura√ß√µes de Wi-Fi: <br><br><ul><li>  Instale perfis apenas de uma fonte confi√°vel.  A confiabilidade da fonte √© confirmada por uma assinatura digital v√°lida.  A assinatura v√°lida na janela de instala√ß√£o do perfil √© indicada por uma inscri√ß√£o verde - Verificado ou Verificado.  Voc√™ tamb√©m pode prestar aten√ß√£o ao dom√≠nio para o qual o certificado foi emitido.  No nosso caso, este √© hotspot.wi-fi.ru.  No futuro, pode ser arbitr√°rio no dom√≠nio wi-fi.ru.  N√£o √© recomend√°vel instalar um perfil com uma assinatura inv√°lida. </li></ul><br><br><img src="https://habrastorage.org/webt/6x/qw/u4/6xqwu4wfryik18k81cram30sbbi.jpeg"><br>  <i><font color="999999">Exemplo de um perfil v√°lido e inv√°lido</font></i> <br><br><ul><li>  Antes de instalar o certificado, voc√™ v√™ quais altera√ß√µes e configura√ß√µes ser√£o feitas.  Nosso perfil cont√©m configura√ß√µes de rede Wi-Fi e um certificado intermedi√°rio para autentica√ß√£o de um servidor RADIUS.  Na guia "Mais detalhes", voc√™ pode ver informa√ß√µes detalhadas sobre as configura√ß√µes de rede Wi-Fi e os certificados instalados.  N√£o √© recomend√°vel definir um perfil em que ‚ÄúProxy‚Äù esteja definido nas configura√ß√µes de rede Wi-Fi. </li></ul><br><img src="https://habrastorage.org/webt/ie/am/dz/ieamdznpfqe4g5von4skmvpulio.jpeg"><br><br><ul><li>  √â altamente recomend√°vel n√£o instalar certificados contendo outras configura√ß√µes, especialmente o SCEP - isso permitir√° que os invasores obtenham controle total sobre o dispositivo instalando qualquer perfil sem a sua participa√ß√£o. </li></ul><br><br><img src="https://habrastorage.org/webt/om/fs/3o/omfs3o7g5ti5shzewn6inkck-vi.jpeg"><br>  <i><font color="999999">Exemplo de perfil com v√°rias limita√ß√µes da funcionalidade do dispositivo m√≥vel</font></i> <br><br><ul><li>  Para dispositivos Android, a principal recomenda√ß√£o √© garantir que o certificado do servidor seja usado nas configura√ß√µes de rede Wi-Fi; caso contr√°rio, ser√° poss√≠vel conectar-se a SSIDs falsos.    iOS, Android    ,    ‚Äî   /  .           . </li></ul><br><br><img src="https://habrastorage.org/webt/jy/lz/yf/jylzyfwvfiekmfcyovq1j5coiak.jpeg"><br><br><h3>   </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No momento, o Hotspot 2.0 ainda n√£o atingiu sua maturidade e est√° no est√°gio de desenvolvimento e forma√ß√£o, mas queremos ser uma empresa que dar√° o primeiro passo na promo√ß√£o e implementa√ß√£o desta nova tecnologia na R√∫ssia. Para n√≥s, como operadora de um servi√ßo popular da cidade, essa √© uma maneira de aumentar a seguran√ßa do Wi-Fi p√∫blico. De fato, ao implantar o Hotspot 2.0 na rede MT_FREE no metr√¥ de Moscou, estamos criando a maior rede Wi-Fi p√∫blica da Europa com uma conex√£o criptografada no n√≠vel do r√°dio. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Estamos lan√ßando testes abertos da tecnologia Hotspot 2.0 na rede de metr√¥ para usu√°rios de iOS. Para fazer isso, voc√™ precisa seguir o procedimento de provisionamento clicando no link </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wi-fi.ru/hotspot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">e definindo o perfil. </font><font style="vertical-align: inherit;">Depois disso, a conex√£o a uma rede Wi-Fi e o acesso a um ambiente seguro ocorrer√£o automaticamente assim que o dispositivo aparecer na √°rea de cobertura do MT_FREE (e, como resultado, no MT). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Relataremos os resultados dos testes abertos em um texto separado. </font><font style="vertical-align: inherit;">Portanto, um enorme pedido: participar ativamente dos testes e enviar feedback sobre o trabalho da nova rede para hotspot@maximatelecom.ru.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Instru√ß√µes de instala√ß√£o do perfil </font></font><br></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O link com o servi√ßo de gera√ß√£o de perfil </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wi-fi.ru/hotspot</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> deve ser aberto apenas a partir de dispositivos iOS e no navegador Safari. </font><font style="vertical-align: inherit;">Essa √© uma limita√ß√£o do sistema operacional. </font><font style="vertical-align: inherit;">Usamos esse cen√°rio de provisionamento apenas durante o teste de rede aberta. </font><font style="vertical-align: inherit;">Em um futuro pr√≥ximo, planejamos lan√ßar uma op√ß√£o j√° direcionada usando o aplicativo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As configura√ß√µes de perfil de fluxo para iOS at√© a vers√£o 11, inclusive, e a partir de 12 s√£o diferentes. </font><font style="vertical-align: inherit;">Abaixo est√° o fluxo para vers√µes at√© 11 inclusive: </font></font><br><br><img src="https://habrastorage.org/webt/hh/id/1i/hhid1i3proju1r9me-pf9pqu_mw.jpeg"><br><br><img src="https://habrastorage.org/webt/de/lq/c0/delqc06oo0ab0evbopwrny6rckc.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Diferen√ßas no fluxo de instala√ß√£o de um perfil para iOS a partir da vers√£o 12:</font></font><br><br><img src="https://habrastorage.org/webt/wd/wr/jx/wdwrjxauf2xa1znuiobyvz2iofa.jpeg"><br><br><img src="https://habrastorage.org/webt/3j/xv/y8/3jxvy8esulddfxtqwasghn_q1yu.jpeg"><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Instru√ß√µes para remo√ß√£o de perfil </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um perfil √© gerado com um per√≠odo de validade at√© 30 de novembro de 2019. </font><font style="vertical-align: inherit;">Ap√≥s esse per√≠odo, o perfil √© exclu√≠do automaticamente sem nenhuma a√ß√£o do usu√°rio. </font><font style="vertical-align: inherit;">Se voc√™ precisar excluir um perfil anteriormente, poder√° faz√™-lo manualmente.</font></font><br><br><img src="https://habrastorage.org/webt/aw/mp/kf/awmpkfiqub0wjtjcinozellwm3m.jpeg"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt462031/">https://habr.com/ru/post/pt462031/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt462021/index.html">Como parar de fazer a mesma coisa</a></li>
<li><a href="../pt462023/index.html">Cascadeur: O Futuro da Anima√ß√£o de Jogos</a></li>
<li><a href="../pt462025/index.html">Modelo de dados de rede relacional</a></li>
<li><a href="../pt462027/index.html">Como o Dark implanta c√≥digo de 50ms</a></li>
<li><a href="../pt462029/index.html">19 recursos √∫teis do arquivo .htaccess</a></li>
<li><a href="../pt462033/index.html">A √öltima Ceia dos Desenvolvedores</a></li>
<li><a href="../pt462035/index.html">Python Vs R - Ci√™ncia de Dados</a></li>
<li><a href="../pt462041/index.html">Abordagens de segmenta√ß√£o para celular - tradu√ß√£o</a></li>
<li><a href="../pt462043/index.html">Pesca Inteligente no FishSensor</a></li>
<li><a href="../pt462045/index.html">Outra opini√£o sobre a diferen√ßa entre bin, sbin, usr / bin, usr / sbin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>