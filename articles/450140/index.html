<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¢ üë∞üèΩ üë®üèº‚Äçüé® PUEDE conducir üôã üèÆ ‚è≠Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduccion 
 El veh√≠culo no tripulado StarLine basado en la plataforma Lexus RX 450h es un proyecto de investigaci√≥n lanzado en 2018. El proyecto es...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PUEDE conducir</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/450140/"><h3>  Introduccion </h3><br>  <b>El veh√≠culo no tripulado StarLine</b> basado en la plataforma <b>Lexus RX 450h</b> es un proyecto de investigaci√≥n lanzado en 2018.  El proyecto est√° abierto a profesionales ambiciosos de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">comunidad de c√≥digo abierto</a> .  Ofrecemos a todos participar en el proceso de desarrollo a nivel de c√≥digo, para probar sus algoritmos en un autom√≥vil real equipado con equipo costoso.  Para controlar el autom√≥vil, se decidi√≥ utilizar Apollo, un marco abierto.  Para que Apollo funcione, necesit√°bamos conectar un conjunto de m√≥dulos.  Estos m√≥dulos ayudan al programa a recibir informaci√≥n sobre el autom√≥vil y a controlarlo de acuerdo con los algoritmos especificados. <br><br>  <b>Estos m√≥dulos incluyen:</b> <br><br><ul><li>  m√≥dulo para posicionar un autom√≥vil en el espacio utilizando coordenadas GPS; </li><li>  m√≥dulo para direcci√≥n, aceleraci√≥n y frenado de un autom√≥vil; </li><li>  m√≥dulo del estado de los sistemas del autom√≥vil: velocidad, aceleraci√≥n, posici√≥n del volante, pisar los pedales, etc. </li><li>  M√≥dulo para obtener informaci√≥n sobre el entorno del autom√≥vil.  Los sensores ultras√≥nicos, c√°maras, radares y lidares pueden manejar esto. </li></ul><br>  En primer lugar, nuestro equipo se enfrent√≥ a la tarea de aprender a controlar el volante, la aceleraci√≥n y el frenado del autom√≥vil.  Y tambi√©n recibir informaci√≥n sobre el estado de los sistemas de autom√≥viles.  Para esto, se hizo mucho trabajo para estudiar el bus CAN de Lexus. <br><a name="habracut"></a><br><h3>  Parte te√≥rica </h3><br><h4>  ¬øQu√© es un bus CAN? </h4><br>  En los autom√≥viles modernos, los sistemas electr√≥nicos tomaron el control de todos los sistemas (Fig. 1.).  Los componentes electr√≥nicos son computadoras especializadas, cada una de las cuales tiene todas las interfaces necesarias para la integraci√≥n con un autom√≥vil.  Utilizando interfaces de comunicaci√≥n digital, las unidades se conectan en red para intercambiar informaci√≥n entre ellas.  Las interfaces digitales m√°s comunes en autom√≥viles son CAN, LIN, FLEXRay.  De estos, CAN es el m√°s utilizado. <br><br>  El bus CAN (Controller Area Network) es la red est√°ndar de la industria.  En 1986, esta norma fue desarrollada por Bosch.  Y el primer autom√≥vil con un bus CAN fue el Mercedes-Benz W140, lanzado en 1991.  El est√°ndar fue desarrollado para permitir que los dispositivos se comuniquen entre s√≠ sin un host.  La informaci√≥n se intercambia utilizando mensajes especiales, que consisten en campos de identificaci√≥n, longitud del mensaje y datos.  Cada bloque tiene su propio conjunto de ID.  En este caso, un mensaje con una ID m√°s baja tiene prioridad en el bus.  El campo de datos puede transportar informaci√≥n, por ejemplo, sobre el estado de los sistemas y sensores, comandos para controlar mecanismos, etc. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1e6/109/0a4/1e61090a4149347d85f1b19488b27e94.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>1. Veh√≠culo CAN bus.</i> <br><br>  A nivel f√≠sico, el bus es un par trenzado de conductores de cobre.  La se√±al se transmite diferencial, debido a que se logra una alta inmunidad al ruido. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/288/59d/b2f/28859db2fc4d7f30bb521f4e6c0a3123.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>2. Representaci√≥n f√≠sica de la se√±al en el bus CAN</i> <br><br>  A trav√©s del bus CAN, puede recibir informaci√≥n sobre el estado de varios sensores y sistemas del veh√≠culo.  Tambi√©n a trav√©s de CAN, puede controlar los componentes del autom√≥vil.  Son estas oportunidades las que usamos para nuestro proyecto. <br><br>  Elegimos Lexus RX porque sab√≠amos que pod√≠amos administrar todos los nodos necesarios a trav√©s de CAN.  Dado que lo m√°s dif√≠cil al investigar un autom√≥vil es protocolos cerrados.  Por lo tanto, una de las razones para elegir este modelo de autom√≥vil en particular fue la presencia de una descripci√≥n de la parte del protocolo del bus CAN en el proyecto de c√≥digo abierto Openpilot. <br><br>  Conducir un autom√≥vil correctamente significa comprender c√≥mo funcionan las partes mec√°nicas de los sistemas de un autom√≥vil.  Necesit√°bamos tener una buena comprensi√≥n de c√≥mo trabajar con un amplificador de potencia el√©ctrica o controlar la desaceleraci√≥n de un autom√≥vil.  De hecho, por ejemplo, cuando se giran las ruedas, crean resistencia a la direcci√≥n, lo que introduce restricciones en la direcci√≥n al girar.  Algunos sistemas no se pueden usar sin ingresar al autom√≥vil en modos de operaci√≥n especiales.  Tuvimos que estudiar estos y otros detalles en el proceso. <br><br><h4>  Direcci√≥n asistida el√©ctrica </h4><br>  Direcci√≥n asistida el√©ctrica EPS (Direcci√≥n asistida el√©ctrica) es un sistema dise√±ado para reducir la fuerza de direcci√≥n al girar (Fig. 3).  El prefijo "electro" se refiere al tipo de sistema: el√©ctrico.  Dirigir el volante con este sistema se vuelve c√≥modo, el conductor gira el volante en la direcci√≥n correcta y el motor el√©ctrico ayuda a girarlo al √°ngulo deseado. <br><br>  Se instala un amplificador de potencia el√©ctrica en el eje de direcci√≥n de un autom√≥vil, cuyas partes est√°n interconectadas por un eje de torsi√≥n.  Un sensor de torque (sensor de torque) est√° montado en el eje de torsi√≥n.  Cuando el volante gira, el eje de torsi√≥n gira, lo cual es registrado por el sensor de torque.  Los datos recibidos del sensor de par, los sensores de velocidad y las revoluciones del cig√ºe√±al se env√≠an a la unidad de control electr√≥nico de la ECU.  Y la ECU, a su vez, ya calcula la fuerza de compensaci√≥n necesaria y le da un comando al motor el√©ctrico del amplificador. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b7/b45/063/5b7b4506386956bd872df48432858d8c.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>3. Diagrama esquem√°tico del sistema de direcci√≥n asistida el√©ctrica.</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Fkgp64e-nNQ" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Video: El sistema LKA dirige un autom√≥vil usando el sistema EPS.</i> <br><br><h4>  Pedal de gas electr√≥nico </h4><br>  El acelerador es un mecanismo para ajustar la cantidad de mezcla de combustible que caer√° en el motor.  Cuanta m√°s mezcla tenga, m√°s r√°pido va el auto. <br>  El acelerador electr√≥nico es un sistema que involucra la operaci√≥n de varios componentes electr√≥nicos.  La se√±al sobre la posici√≥n del pedal, cuando se presiona, ingresa a la unidad de control del motor ECM (M√≥dulo de control del motor).  El ECM, en base a esta se√±al, calcula la cantidad requerida de combustible que se debe suministrar al motor.  Dependiendo de la cantidad de combustible necesaria, el ECM ajusta el √°ngulo de apertura del acelerador. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e8/16b/a1b/6e816ba1b6d687c9849321d8aac3f431.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>4. El sistema electr√≥nico de pedal de gas.</i> <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/98brdhB3n04" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Video: El pedal electr√≥nico de gas se usa para operar el control de crucero.</i> <br><br><h4>  Sistemas electr√≥nicos de asistencia al conductor </h4><br>  Compramos un autom√≥vil que est√° equipado con una variedad de unidades digitales y sistemas de asistencia al conductor (ADAS).  En nuestro proyecto utilizamos LKA, ACC y PCS. <br><br>  LKA (Lane Keep Assist) es un sistema de retenci√≥n de banda que consta de una c√°mara frontal y una unidad de computaci√≥n.  LKA mantiene el auto en el carril cuando el conductor, por ejemplo, est√° distra√≠do.  Los algoritmos en la unidad de computaci√≥n reciben datos de la c√°mara y, en funci√≥n de ellos, toman una decisi√≥n sobre el estado del autom√≥vil en la carretera.  El sistema puede comprender que el autom√≥vil se mueve incontrolablemente hacia el carril derecho o izquierdo.  En tales casos, suena un pitido para atraer la atenci√≥n del conductor.  Al cruzar el carril, el propio sistema ajustar√° el √°ngulo de rotaci√≥n de las ruedas para que el autom√≥vil permanezca en el carril.  El sistema solo debe intervenir si se da cuenta de que la maniobra entre los carriles no fue causada por el conductor. <br><br>  ACC (control de crucero adaptativo): un sistema de control de crucero adaptativo que le permite establecer la velocidad deseada.  El autom√≥vil mismo acelera y disminuye la velocidad para mantener la velocidad deseada, mientras que el conductor puede quitar el pie del acelerador y los pedales de freno.  Este modo es conveniente de usar al conducir en autopistas y autopistas.  El control de crucero adaptativo puede ver los obst√°culos en frente del autom√≥vil y reducir la velocidad para evitar colisiones con ellos.  Si otro veh√≠culo a una velocidad menor conduce hacia adelante, el ACC disminuir√° la velocidad y lo seguir√°.  Cuando se detecta un objeto est√°tico, el ACC se ralentizar√° hasta que se detenga.  Para detectar objetos en frente del autom√≥vil, dicho sistema utiliza un radar con un rango de longitud de onda milim√©trica.  Por lo general, estos radares funcionan a una frecuencia de 24-72 GHz y pueden ver objetos con confianza a una distancia de 300 metros.  El radar generalmente se instala detr√°s de la placa frontal en la rejilla. <br><br>  PCS (Pre-Collision System): sistema anticolisi√≥n.  El sistema est√° dise√±ado para evitar una colisi√≥n con un autom√≥vil que se est√° moviendo al frente.  Cuando una colisi√≥n es inevitable, el sistema minimiza el da√±o por colisi√≥n.  Tambi√©n utiliza el radar para estimar la distancia al objeto y una c√°mara frontal para su reconocimiento.  El frente de PCS predice la probabilidad de una colisi√≥n en funci√≥n de la velocidad del veh√≠culo, la distancia al objeto y su velocidad.  T√≠picamente, un sistema tiene dos etapas de operaci√≥n.  La primera etapa: el sistema suena y las pantallas en el tablero notifican al conductor del peligro.  La segunda etapa: el frenado de emergencia se activa mediante el sistema ABS y se activan los pretensores del cintur√≥n de seguridad. <br><br><h3>  Parte pr√°ctica </h3><br><h4>  Volante </h4><br>  Lo primero que nuestro equipo quer√≠a hacer era aprender a conducir.  El volante de un autom√≥vil puede controlarse mediante dos sistemas: el asistente de estacionamiento IPAS (Intelligent Park Assist) y el LKA. <br><br>  IPAS le permite establecer el √°ngulo de direcci√≥n en grados directamente.  Dado que nuestro autom√≥vil no tiene este sistema, es imposible verificar y dominar la direcci√≥n de esta manera. <br><br>  Por lo tanto, estudiamos los circuitos el√©ctricos del autom√≥vil y nos dimos cuenta de qu√© autobuses CAN podr√≠an ser √∫tiles.  Conectamos un analizador de bus CAN.  El registro contiene un archivo de registros de mensajes en el bus en secuencia cronol√≥gica.  Nuestra tarea era encontrar equipos de direcci√≥n asistida de EPS (direcci√≥n asistida el√©ctrica).  Tomamos el registro del volante de lado a lado, en el registro pudimos encontrar las lecturas del √°ngulo de rotaci√≥n y la velocidad de rotaci√≥n del volante.  A continuaci√≥n se muestra un ejemplo de cambio de datos en el bus CAN.  Los datos que nos interesan se resaltan con un marcador. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e9e/2ff/eee/e9e2ffeee019069421b869be9fb6d6d4.gif" alt="imagen"><br>  <i>Direcci√≥n de 360 ‚Äã‚Äãgrados a la izquierda</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3b5/259/583/3b5259583320120b011d47f3c4517dd8.gif" alt="imagen"><br>  <i>Gire el volante 270 grados a la derecha</i> <br><br>  En el siguiente paso, examinamos el sistema de retenci√≥n de carril.  Para hacer esto, fuimos a una calle tranquila y registramos los registros de intercambio entre la unidad de retenci√≥n de carriles y el DSU (Driving Support ECU).  Usando el analizador de bus CAN, pudimos calcular mensajes del sistema LKA.  La Figura 6 muestra el comando de control EPS. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/76f/2a7/159/76f2a7159e1b5b36232ae0702079af45.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>5. Comando de direcci√≥n utilizando el sistema LKA</i> <br><br>  El LKA controla el volante configurando el valor de torque en el eje (STEER_TORQUE_CMD) del volante.  El comando es aceptado por el m√≥dulo EPS.  Cada mensaje contiene un valor de contador (COUNTER) en el encabezado, que se incrementa con cada env√≠o.  El campo LKA_STATE contiene informaci√≥n de estado de LKA.  Para capturar el control, debe establecer el bit STEER_REQUEST. <br><br>  Los mensajes que son responsables de la operaci√≥n de sistemas autom√°ticos importantes est√°n protegidos por una suma de verificaci√≥n (CHECKSUM) para minimizar los riesgos de falsas alarmas.  El autom√≥vil ignorar√° dicho comando si el mensaje contiene una suma de verificaci√≥n o valor de contador incorrectos.  Esta es una protecci√≥n construida por el fabricante contra la interferencia del sistema de terceros y la interferencia en la l√≠nea de comunicaci√≥n. <br><br>  El gr√°fico (Fig. 6.) muestra el diagrama de operaci√≥n de LKA.  Sensor de torque: valor del sensor de torque en el eje de torsi√≥n.  Torque Cmd es un equipo de LKA para la direcci√≥n.  La imagen muestra c√≥mo se dirige el LKA para mantener el autom√≥vil en el carril.  Al cruzar a trav√©s de cero, cambia la direcci√≥n de rotaci√≥n del volante.  Es decir  una se√±al negativa indica un giro a la derecha, un valor positivo a la izquierda.  Mantener el comando en cero indica una falta de control por parte de la LKA.  Con la intervenci√≥n del conductor, el sistema deja de emitir control.  LKA detecta la intervenci√≥n del conductor con un segundo sensor de torque en el eje desde el lado del volante. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2ac/562/2c8/2ac5622c84943c61207d0ac0c17a20fa.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>6. Calendario del sistema LKA</i> <br><br>  Tuvimos que verificar el trabajo del equipo directivo.  Usando el m√≥dulo StarLine Sigma 10, preparamos el firmware para las pruebas de control.  StarLine Sigma 10 debe emitir comandos al volante para girar el volante hacia la izquierda o hacia la derecha.  En ese momento, no ten√≠amos una interfaz gr√°fica para controlar el m√≥dulo, por lo que tuvimos que usar los medios est√°ndar del autom√≥vil.  Encontramos el estado de la posici√≥n de la palanca de control de crucero en el bus CAN y programamos el m√≥dulo de tal manera que la posici√≥n superior de la palanca llev√≥ al volante a girar a la derecha, a la posici√≥n inferior, a girar a la izquierda (Fig.7). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/147/82e/068/14782e068fe5ac6bc3636603d2113cee.gif" alt="imagen"><br>  <i>Fig.</i>  <i>7. Los primeros intentos de dirigir</i> <br><br>  El video muestra que el control se lleva a cabo en secciones cortas.  Esto ocurre por varias razones. <br><br>  La primera raz√≥n es la falta de comentarios.  Si la discrepancia entre la se√±al Cmd de torque y el sensor de torque excede un cierto valor Œî, el sistema autom√°ticamente deja de aceptar comandos (Fig. 8).  Configuramos el algoritmo para ajustar el comando de salida (Torque CMD) dependiendo del valor del par en el eje (Torque Sensor). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3bd/ff5/458/3bdff5458f46a6de9f48598a735db625.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>8. La discrepancia de se√±al conduce a un error del sistema</i> <br><br>  La siguiente restricci√≥n est√° relacionada con el sistema de seguridad integrado en EPS.  El sistema EPS no permite que los equipos de LKA se dirijan en un amplio rango.  Lo cual es bastante l√≥gico, porque  Al conducir en la carretera, las maniobras repentinas no son seguras.  Por lo tanto, cuando se excede el valor umbral del par en el eje, el sistema LKA genera un error y se apaga (Fig. 9). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/360/888/015/3608880153b575b2874efd8db45fe7f8.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>9. Exceder el valor umbral del control de torque en el eje</i> <br><br>  Independientemente de si el sistema LKA est√° activado o no, los mensajes con comandos del mismo est√°n constantemente presentes en el bus.  Le indicamos al m√≥dulo EPS que gire las ruedas con una fuerza espec√≠fica hacia la izquierda o hacia la derecha.  Mientras tanto, LKA interrumpe nuestros paquetes con mensajes "vac√≠os".  Despu√©s de nuestro equipo con el valor del momento, el est√°ndar viene con cero (Fig. 10). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c0a/85b/1a9/c0a85b1a9ad409684dbcb740acfd18ed.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>10. Los mensajes regulares vienen con valores de momento cero e interrumpen nuestro control</i> <br><br>  Luego, utilizando el m√≥dulo StarLine Sigma 10, pudimos filtrar todo el tr√°fico de LKA y bloquear mensajes con ID 2E4 cuando lo necesit√°bamos.  Esto resolvi√≥ el problema, y ‚Äã‚Äãlogramos obtener un control de direcci√≥n suave (Fig. 11). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/712/6ab/cff/7126abcff6446d6a6477c667880747a7.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>11. Ajuste suave del volante sin errores</i> <br><br><h4>  Gesti√≥n de gas </h4><br>  El sistema ACC Adaptive Cruise Control controla el software de aceleraci√≥n y frenado a trav√©s del bus CAN.  La unidad de control del motor de la ECU recibe comandos DSU, si necesita acelerar, activa el pedal de aceleraci√≥n electr√≥nico.  El frenado regenerativo se usa para frenar el autom√≥vil.  En este caso, se usa un comando para frenar y acelerar, solo los valores difieren. <br><br>  El comando de control de aceleraci√≥n o desaceleraci√≥n se muestra en la Figura 12. Consiste en el valor de aceleraci√≥n ACCEL_CMD, un par de bits superiores y una suma de comprobaci√≥n de suma de control.  Para la aceleraci√≥n del veh√≠culo, ACCEL_CMD es positivo; para la desaceleraci√≥n, negativo.  La aceleraci√≥n se establece en el rango de 0 a 3 m / s ^ 2, la desaceleraci√≥n es similar, pero con un signo menos.  Para enviar datos al bus, es necesario volver a calcular la aceleraci√≥n o desaceleraci√≥n deseada con un coeficiente de 0.001.  Por ejemplo, para acelerar 1 m / s ^ 2, ACCEL_CMD = 1000 (0x03E8). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4fc/0a2/042/4fc0a20425a9718cb90eb40f4b5a127f.jpg" alt="imagen"><br>  <i>Fig.</i>  <i>12. El comando para controlar la aceleraci√≥n / desaceleraci√≥n del autom√≥vil.</i> <br><br>  Eliminamos los registros del sistema ACC est√°ndar y analizamos los equipos.  En comparaci√≥n con nuestra descripci√≥n de los equipos y comenz√≥ a probar. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f37/e3d/9a4/f37e3d9a42d8164a6b5e1f21c4fba704.gif" alt="imagen"><br>  <i>Fig.</i>  <i>13. Registro de aceleraci√≥n / desaceleraci√≥n del control de crucero adaptativo ACC (resaltado con un marcador)</i> <br><br>  No fue sin dificultades.  Condujimos por una carretera con mucho tr√°fico para probar el equipo de aceleraci√≥n.  Los comandos de control de aceleraci√≥n o desaceleraci√≥n del veh√≠culo funcionan solo cuando el control de crucero est√° activado, no es suficiente activarlo con el bot√≥n.  Es necesario encontrar el auto en movimiento al frente y encender el siguiente modo. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9e0/4eb/012/9e04eb01233c579da82c01d623c05c40.gif" alt="imagen"><br>  <i>Fig.</i>  <i>14. La activaci√≥n del control de crucero ocurre cuando hay otro veh√≠culo adelante</i> <br><br>  Usando el m√≥dulo StarLine Sigma 10, enviamos un comando de aceleraci√≥n y el autom√≥vil comienza a acelerar.  En este punto, conectamos la interfaz gr√°fica para controlar el m√≥dulo StarLine Sigma 10. Ahora controlamos el volante, la aceleraci√≥n y el frenado utilizando los botones de la aplicaci√≥n. <br><br>  Los equipos trabajaron hasta que perdieron el auto por delante.  El sistema de control de crucero se apag√≥ y, por lo tanto, los comandos de aceleraci√≥n dejaron de funcionar. <br>  Comenzamos a estudiar la posibilidad de utilizar equipos sin control de crucero activo.  Tuve que pasar mucho tiempo analizando los datos en el bus CAN para comprender c√≥mo crear las condiciones para que los equipos trabajen.  Nos interes√≥, en primer lugar, qu√© bloque bloquea la ejecuci√≥n de los comandos ACC para la aceleraci√≥n o desaceleraci√≥n.  Tuve que estudiar qu√© identificaciones provienen de DSU, LKA, radar y c√°mara, sin los datos falsos de varios sensores. <br><br>  La decisi√≥n lleg√≥ 3 semanas despu√©s.  En ese momento, ten√≠amos una idea de c√≥mo interact√∫an los bloques del autom√≥vil, realizamos un estudio del tr√°fico de mensajes e identificamos grupos de mensajes enviados por cada bloque.  Driving Support ECU (DSU) es responsable del control de crucero adaptativo ACC.  El DSU emite comandos para acelerar y desacelerar el autom√≥vil, y es esta unidad la que recibe datos del radar de alcance milim√©trico.  El radar le dice al DSU a qu√© distancia de la m√°quina se mueve el objeto, a qu√© velocidad relativa y determina su posici√≥n horizontal (a la izquierda, derecha o centro). <br><br>  Nuestra idea era reemplazar los datos del radar.  Eliminamos el registro para seguir al autom√≥vil, sacamos los datos del radar al momento de seguirlo.  Ahora, despu√©s de encender el control de crucero, enviamos datos falsos sobre la presencia de un autom√≥vil en el frente.  Resulta enga√±ar a nuestro autom√≥vil, diciendo que otro autom√≥vil en el frente se mueve a una distancia espec√≠fica. <br><br>  a) <img src="https://habrastorage.org/getpro/habr/post_images/18e/762/ed2/18e762ed2cf1f72b3240fe1bc3647048.gif" alt="imagen">  b) <img src="https://habrastorage.org/getpro/habr/post_images/be9/c16/276/be9c162764819ce5e0f733c67506ac4d.gif" alt="imagen"><br>  <i>Fig.</i>  <i>15. Activaci√≥n de crucero: a) intento de activaci√≥n sin reemplazar los datos del radar;</i>  <i>b) activaci√≥n al reemplazar datos del radar.</i> <br><br>  Cuando comenzamos nuestro inconveniente, en el tablero de instrumentos se enciende el √≠cono de presencia del veh√≠culo en la parte delantera.  Ahora podemos probar nuestra gesti√≥n.  Iniciamos el comando de aceleraci√≥n y el autom√≥vil comienza a acelerar r√°pidamente. <br><br>  Como ya aprendimos, el comando de aceleraci√≥n y desaceleraci√≥n es uno.  Por lo tanto, verificaron de inmediato la desaceleraci√≥n.  Fuimos a velocidad con el control de crucero activo, lanzamos un comando de frenado y el autom√≥vil disminuy√≥ la velocidad de inmediato. <br><br>  Como resultado, ahora resulta acelerar y frenar el autom√≥vil exactamente como lo necesit√°bamos. <br><br>  El objetivo se logra. <br><br><h4>  ¬øQu√© m√°s usamos? </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para crear un dron, es necesario controlar los sistemas auxiliares: intermitentes, luces de freno, alarmas, bocina, etc. Todo esto tambi√©n se puede controlar a trav√©s del bus CAN. </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Hardware y software </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Para trabajar con el autom√≥vil hoy usamos un conjunto de varios equipos: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Marathon Bus Analyzer le permite conectar y leer datos de dos buses simult√°neamente. </font><font style="vertical-align: inherit;">El sitio del fabricante del analizador tiene un software de an√°lisis de registro gratuito. </font><font style="vertical-align: inherit;">Pero utilizamos software escrito en nuestra empresa para uso interno.</font></font></li><li>  StarLine  10         .   CAN  LIN .       C,       .       CAN-.    ,  ID         . </li><li>   Toyota/Lexus.          : , -, ,  . </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hoy, se est√° trabajando activamente para desarrollar un veh√≠culo no tripulado, en el futuro cercano, la implementaci√≥n de frenado de emergencia antes de los obst√°culos, su desv√≠o y la reestructuraci√≥n de la ruta del autom√≥vil, dependiendo de la situaci√≥n del tr√°fico y las instrucciones del conductor. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El veh√≠culo no tripulado StarLine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> es una plataforma abierta para combinar las mejores mentes de ingenier√≠a de Rusia y el mundo con el objetivo de crear tecnolog√≠as avanzadas de conducci√≥n no tripulada que har√°n que nuestro futuro sea seguro y c√≥modo. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Proyecto Gitlab</font></font></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/450140/">https://habr.com/ru/post/450140/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../450130/index.html">¬øSobreviven los equipos despu√©s del hackathon?</a></li>
<li><a href="../450132/index.html">Incapaz de explicar m√≥nada</a></li>
<li><a href="../450134/index.html">La segunda vida de los anillos y los broches: c√≥mo recrear r√°pidamente las joyas con tecnolog√≠a 3D</a></li>
<li><a href="../450136/index.html">Cuando las paredes no son suficientes. C√≥mo proteger los puntos finales</a></li>
<li><a href="../450138/index.html">Product Management Digest # 7 (marzo - abril de 2019)</a></li>
<li><a href="../450142/index.html">En mayo: ordenado - para sobrevivir</a></li>
<li><a href="../450144/index.html">¬øC√≥mo acercan las nuevas tecnolog√≠as el sue√±o de la inmortalidad?</a></li>
<li><a href="../450146/index.html">Mi error de mil millones de d√≥lares</a></li>
<li><a href="../450148/index.html">Uno Veeam ONE. Inteligencia, mapas, agentes y mucho m√°s: hoy en los monitores del pa√≠s</a></li>
<li><a href="../450150/index.html">Semana de la seguridad 18: ataque ShadowHammer en detalle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>