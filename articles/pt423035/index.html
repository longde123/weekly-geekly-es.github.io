<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌘 🐞 🧥 O campo de upload de arquivo que merecemos 🐊 👨🏼‍🏫 🧓🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tudo flui, tudo muda, mas apenas input[type=file] , pois estragou os nervos de todos os desenvolvedores da Web iniciantes e continua a fazê-lo até ago...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O campo de upload de arquivo que merecemos</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/423035/"> Tudo flui, tudo muda, mas apenas <code>input[type=file]</code> , pois estragou os nervos de todos os desenvolvedores da Web iniciantes e continua a fazê-lo até agora.  Lembre-se de N anos atrás, quando você estava começando a entender o básico da criação de sites.  Jovem e inexperiente, você ficou realmente surpreso quando o botão de seleção de arquivo se recusou completamente a mudar a cor de fundo para o seu pêssego favorito.  Foi nesse momento que você encontrou pela primeira vez esse iceberg indestrutível chamado "Downloading Files", que até hoje continua a "afogar" desenvolvedores web novatos. <br><br>  Usando o exemplo da criação de um campo de upload de arquivo, mostrarei como ocultar a <code>input[type=file]</code> corretamente, definir o foco em um objeto que não pode ter foco, lidar com eventos de arrastar e soltar e enviar arquivos via AJAX.  E também apresentarei a você alguns bugs do navegador e maneiras de contorná-los.  O artigo foi escrito para iniciantes, mas em alguns momentos pode ser útil e divertido, mesmo para desenvolvedores experientes. <br><a name="habracut"></a><br><h2>  Marcação e estilos principais </h2><br>  Vamos começar com a marcação HTML: <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UTF-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>  ,   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"style.css"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"jquery-3.3.1.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"script.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"upload-container"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"POST"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">action</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"send.php"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"upload-image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"upload.svg"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file-input"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">multiple</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file-input"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>   <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Talvez o principal elemento ao qual você deva prestar atenção seja <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"file-input"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br>  A especificação HTML não nos permite impor propriedades visuais diretamente na <code>input[type=file]</code> , mas temos uma tag <code>label</code> , clicando na qual causa um clique no elemento do formulário ao qual está anexado.  Para nossa alegria, essa marca não tem limitações na estilização: podemos fazer o que quisermos com ela. <br><br>  Um plano de ação emerge: estilizamos o rótulo como desejamos e ocultamos a <code>input[type=file]</code> fora da vista.  Primeiro, configure os estilos gerais de página: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">padding</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: flex; <span class="hljs-attribute"><span class="hljs-attribute">justify-content</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">align-items</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">min-height</span></span>: <span class="hljs-number"><span class="hljs-number">100vh</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: flex; <span class="hljs-attribute"><span class="hljs-attribute">justify-content</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">align-items</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">flex-direction</span></span>: column; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">400px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">400px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: <span class="hljs-number"><span class="hljs-number">2px</span></span> dashed <span class="hljs-number"><span class="hljs-number">#5d5d5d</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">outline-offset</span></span>: -<span class="hljs-number"><span class="hljs-number">12px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-number"><span class="hljs-number">#e0f2f7</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: <span class="hljs-string"><span class="hljs-string">'Segoe UI'</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-number"><span class="hljs-number">#1f3c44</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">img</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">40%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin-bottom</span></span>: <span class="hljs-number"><span class="hljs-number">20px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">user-select</span></span>: none; }</code> </pre><br>  Agora estilize nosso rótulo: <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: bold; } <span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">cursor</span></span>: pointer; <span class="hljs-attribute"><span class="hljs-attribute">text-decoration</span></span>: underline; }</code> </pre><br>  O que estamos buscando ( <code>input[type=file]</code> removido da marcação): <br><img src="https://habrastorage.org/webt/uq/oy/nn/uqoynnkiqozkclwaalgqsxakrys.png"><br>  Obviamente, você pode centralizar o rótulo, adicionar um plano de fundo e uma borda, obtendo um botão completo, mas nossa prioridade é arrastar e soltar. <br><br><h2>  Ocultando entrada </h2><br>  Agora precisamos ocultar a <code>input[type=file]</code> .  A primeira coisa que impressiona é a <code>display: none</code> e <code>visibility: hidden</code> propriedades <code>visibility: hidden</code> .  Mas isso não é tão simples.  Em alguns navegadores antigos, clicar no rótulo não terá mais efeito.  Mas isso não é tudo.  Como você sabe, os elementos invisíveis não podem receber o foco, e não importa o que eles digam, o foco é importante, pois para algumas pessoas essa é a única maneira de interagir com o site.  Portanto, este método não nos convém.  Vamos contornar isso: <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">div</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: relative; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[type=file]</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">0.1px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">0.1px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">z-index</span></span>: -<span class="hljs-number"><span class="hljs-number">10</span></span>; }</code> </pre><br>  Posicionamos absolutamente nossa <code>input[type=file]</code> relação ao seu bloco pai, reduzimos para <code>0.1px</code> , o tornamos transparente e definimos seu <code>z-index</code> menor que o do pai, de modo que é, por assim dizer, com certeza. <br><br>  Parabéns, conseguimos o que queríamos: nosso campo se parece exatamente com a imagem anterior. <br><br><h2>  Ajustar o foco </h2><br>  Como nossa <code>input[type=file]</code> fisicamente presente na página, ela pode receber o foco.  Ou seja, se pressionarmos a tecla <code>Tab</code> na página, em algum momento o foco mudará para a <code>input[type=file]</code> .  Mas o problema é que não veremos isso: o campo que ocultamos se destacará.  Sim, se neste momento pressionarmos <code>Enter</code> , a caixa de diálogo será aberta e tudo funcionará como deveria, mas como entendemos que é hora de pressionar? <br><br>  Nossa tarefa é selecionar uma marca de uma certa maneira no momento em que o foco está no campo de upload de arquivo.  Mas como podemos fazer isso se a tag não pode receber foco?  Os conhecedores do CSS3 pensarão imediatamente na pseudo-classe <code>:focus</code> , que define estilos para elementos em foco, e <code>+</code> ou <code>~</code> seletores que selecionam vizinhos certos: elementos localizados no mesmo nível de aninhamento, após o elemento selecionado.  Considerando que em nossa marcação <code>input[type=file]</code> está localizado diretamente em frente à tag <code>label</code> , ocorre a seguinte entrada: <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[type=file]</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:focus</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span> { <span class="hljs-comment"><span class="hljs-comment">/*  */</span></span> }</code> </pre><br>  Mas, novamente, não é tão simples.  Para começar, vamos discutir como devemos selecionar um rótulo.  Como você sabe, todos os navegadores modernos, ou não, têm propriedades padrão exclusivas para elementos em foco.  Basicamente, essa é a propriedade de <code>outline</code> , que cria um traçado ao redor de um elemento que difere da <code>border</code> , pois não redimensiona o elemento e pode ser movido para longe dele.  Como regra, as pessoas usam apenas um navegador e se acostumam a seus padrões.  Para facilitar a navegação do site, as pessoas devem tentar ajustar o foco para que pareça o mais natural possível para os navegadores modernos mais populares.  Em teoria, usando JavaScript, você pode obter informações sobre em qual navegador o usuário abriu o site e personalizar os estilos de acordo, mas esse tópico é muito complicado e complicado como parte de um artigo destinado principalmente a iniciantes.  Vamos tentar sobreviver com um pouco de sangue. <br><br>  Nos navegadores baseados no mecanismo WebKet (Google Chrome, Opera, Safari), a propriedade padrão para os elementos em foco tem a forma: <br><br><pre> <code class="css hljs"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:focus</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: -webkit-focus-ring-color auto <span class="hljs-number"><span class="hljs-number">5px</span></span>; }</code> </pre><br>  Aqui <code>-webkit-focus-ring-color</code> é a <code>-webkit-focus-ring-color</code> curso do foco específica apenas para esse mecanismo.  Ou seja, esta linha funcionará exclusivamente nos navegadores WebKit, e é exatamente isso que precisamos.  Especifique esta propriedade para o nosso rótulo: <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[type=file]</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:focus</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: -webkit-focus-ring-color auto <span class="hljs-number"><span class="hljs-number">5px</span></span>; }</code> </pre><br>  Abrimos o Google Chrome ou Opera, olhamos.  Tudo funciona como deveria: <br><img src="https://habrastorage.org/webt/se/ay/mq/seaymqj0icne6yzqwcpnn8x1ock.png"><br>  Vamos ver como as coisas estão focadas no Mozilla Firefox e Microsoft Edge.  Para esses navegadores, a propriedade padrão é: <br><br><pre> <code class="css hljs"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:focus</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#0078d7</span></span>; }</code> </pre><br>  e <br><br><pre> <code class="css hljs"><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:focus</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#212121</span></span>; }</code> </pre><br>  em conformidade. <br><br>  Infelizmente, o prefixo <code>-moz-</code> não funcionará com a propriedade de <code>outline</code> .  Portanto, teremos que escolher qual dessas duas propriedades escolheremos.  Como o número de usuários do Firefox é muito maior, é mais racional dar preferência a esse navegador em particular.  Isso não significa que privamos os usuários do Edge e outros navegadores da oportunidade de ver onde o foco está agora, apenas parecerá "diferente" deles.  Bem, você tem que fazer sacrifícios. <br><br>  Adicionamos o estilo do Mozilla Firefox antes do estilo do WebKit: primeiro, todos os navegadores aplicarão a primeira propriedade e, em seguida, os que puderem (Google Chrome, Opera, Safari, etc.) aplicarão a segunda. <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">input</span></span><span class="hljs-selector-attr"><span class="hljs-selector-attr">[type=file]</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:focus</span></span> + <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#0078d7</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: -webkit-focus-ring-color auto <span class="hljs-number"><span class="hljs-number">5px</span></span>; }</code> </pre><br>  E aqui começa o estranho: no Edge tudo funciona bem, mas o Firefox, por algum motivo desconhecido, se recusa a aplicar propriedades ao rótulo com foco na <code>input[type=file]</code> .  E o próprio evento de <code>focus</code> acontece - verificado através do JavaScript.  Além disso, se você forçar o foco no campo de seleção de arquivos por meio das ferramentas do desenvolvedor, a propriedade será aplicada e nosso toque aparecerá!  Aparentemente, isso é um bug do próprio navegador, mas se alguém tiver idéias para isso, escreva nos comentários. <br><br>  Bem, nada, heróis normais sempre andam por aí.  Como eu disse anteriormente, o evento de <code>focus</code> acontece, o que significa que podemos ajustar as propriedades diretamente do JavaScript.  Mas, para isso, teremos que mudar a lógica do nosso seletor: <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">label</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.focus</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: <span class="hljs-number"><span class="hljs-number">1px</span></span> solid <span class="hljs-number"><span class="hljs-number">#0078d7</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">outline</span></span>: -webkit-focus-ring-color auto <span class="hljs-number"><span class="hljs-number">5px</span></span>; }</code> </pre><br>  Nós descreveremos a classe <code>.focus</code> para o nosso rótulo e a adicionaremos sempre que <code>input[type=file]</code> receber o foco e removê-lo quando ele perder. <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#file-input'</span></span>).focus(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'label'</span></span>).addClass(<span class="hljs-string"><span class="hljs-string">'focus'</span></span>); }) .focusout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'label'</span></span>).removeClass(<span class="hljs-string"><span class="hljs-string">'focus'</span></span>); });</code> </pre><br>  Agora tudo funciona como deveria.  Parabéns, descobrimos o foco. <br><br><h2>  Arrastar e soltar </h2><br>  O trabalho com Arrastar e Soltar é realizado rastreando eventos especiais do navegador: <code>drag, dragstart, dragend, dragover, dragenter, dragleave, drop</code> .  Você pode encontrar facilmente uma descrição detalhada de cada um deles na Internet.  Vamos rastrear apenas alguns deles. <br><br>  Primeiro, defina um elemento de arrastar e soltar: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dropZone = $(<span class="hljs-string"><span class="hljs-string">'#upload-container'</span></span>);</code> </pre><br>  Em seguida, descrevemos no CSS uma classe especial que atribuiremos ao <code>dropZone</code> quando o cursor que estiver puxando o arquivo estiver diretamente acima dele.  Isso é necessário para informar visualmente o usuário que o arquivo já pode ser liberado. <br><br><pre> <code class="css hljs"><span class="hljs-selector-id"><span class="hljs-selector-id">#upload-container</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.dragover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-number"><span class="hljs-number">#fafafa</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">outline-offset</span></span>: -<span class="hljs-number"><span class="hljs-number">17px</span></span>; }</code> </pre><br>  Agora vamos para o arquivo JS.  Para começar, precisamos desfazer todas as ações padrão dos eventos de Arrastar e Soltar.  Por exemplo, um desses eventos é a abertura de um arquivo lançado por um navegador.  Como não precisamos disso, escreveremos as seguintes linhas: <br><br><pre> <code class="javascript hljs">dropZone.on(<span class="hljs-string"><span class="hljs-string">'drag dragstart dragend dragover dragenter dragleave drop'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; });</code> </pre><br>  No jQuery, chamar a <code>return false</code> equivalente a chamar duas funções ao mesmo tempo: <code>e.preventDefault()</code> e <code>e.stopPropagation()</code> . <br><br>  Começamos a descrever nosso próprio manipulador de eventos.  Agiremos da mesma maneira que fizemos com o foco, mas desta vez rastrearemos os eventos de <code>dragenter</code> e <code>dragover</code> para adicionar uma classe e o evento <code>dragleave</code> para removê-lo: <br><br><pre> <code class="javascript hljs">dropZone.on(<span class="hljs-string"><span class="hljs-string">'dragover dragenter'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ dropZone.addClass(<span class="hljs-string"><span class="hljs-string">'dragover'</span></span>); }); dropZone.on(<span class="hljs-string"><span class="hljs-string">'dragleave'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ dropZone.removeClass(<span class="hljs-string"><span class="hljs-string">'dragover'</span></span>); });</code> </pre><br>  E, novamente, uma surpresa desagradável nos espera: quando você move o <code>dropZone</code> com o mouse com o arquivo, o campo começa a piscar.  Isso acontece nos navegadores Microsoft Edge e WebKit.  A propósito, a maioria desses navegadores WebKit está atualmente em execução no mecanismo Blink (apreciada a ironia, hein?).  Mas no Mozilla, nada pisca.  Aparentemente, eu decidi corrigi-lo após os bugs do foco. <br><br>  E essa oscilação ocorre devido ao fato de que quando você passa o mouse sobre o <code>dropZone</code> , seja uma imagem ou uma <code>div</code> com um campo de seleção de arquivo e um rótulo, por algum motivo o evento <code>dragleave</code> .  É óbvio para nós que não estamos deixando o campo, mas os navegadores, por algum motivo, não o fazem, e por isso eles <code>.focus</code> removem a classe <code>dropZone</code> do <code>dropZone</code> . <br><br>  E, novamente, temos que sair de alguma forma.  Se o próprio navegador não entender que não estamos deixando o campo, teremos que ajudá-lo.  E faremos isso através de condições adicionais: calculamos as coordenadas do mouse em relação ao <code>dropZone</code> e depois verificamos se o cursor está fora do bloco.  Se deixado, removeremos o estilo: <br><br><pre> <code class="javascript hljs">dropZone.on(<span class="hljs-string"><span class="hljs-string">'dragleave'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dx = e.pageX - dropZone.offset().left; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> dy = e.pageY - dropZone.offset().top; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((dx &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) || (dx &gt; dropZone.width()) || (dy &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) || (dy &gt; dropZone.height())) { dropZone.removeClass(<span class="hljs-string"><span class="hljs-string">'dragover'</span></span>); }; });</code> </pre><br>  E isso é tudo, o problema está resolvido!  É assim que nosso campo com o arquivo interno se parece: <br><img src="https://habrastorage.org/webt/sz/6t/8j/sz6t8jyctde70wiimiz9zwijmi0.png"><br><br>  Vamos passar a manipular o próprio evento <code>drop</code> .  Mas primeiro, lembre-se de que, além do Arrastar e Soltar, <code>input[type=file]</code> e cada um desses métodos é independente em sua essência, mas deve executar as mesmas ações: fazer upload de arquivos.  Portanto, proponho criar uma função separada universal para ambos os métodos, para a qual transferiremos arquivos, e ela já decidirá o que fazer com eles.  Vamos chamá-lo de <code>sendFiles()</code> , mas o descreveremos um pouco mais tarde.  Para começar, manipule o evento <code>drop</code> : <br><br><pre> <code class="javascript hljs">dropZone.on(<span class="hljs-string"><span class="hljs-string">'drop'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">) </span></span>{ dropZone.removeClass(<span class="hljs-string"><span class="hljs-string">'dragover'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> files = e.originalEvent.dataTransfer.files; sendFiles(files); });</code> </pre><br>  Primeiro, <code>.dragover</code> remover a classe <code>dropZone</code> do <code>dropZone</code> .  Então temos uma matriz contendo os arquivos.  Se você usar jQuery, o caminho será <code>e.originalEvent.dataTransfer.files</code> ; se você escrever em JS puro, <code>e.dataTransfer.files</code> .  Bem, então passamos o array para nossa função ainda não realizada. <br><br>  Agora, elaboraremos o método de carregamento via <code>input[type=file]</code> : <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#file-input'</span></span>).change(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> files = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.files; sendFiles(files); });</code> </pre><br>  Nós rastreamos o evento de <code>change</code> no botão de seleção de arquivo, obtemos a matriz por <code>this.files</code> e a enviamos para a função <br><br><h2>  Enviando arquivos via AJAX </h2><br>  O último passo - a descrição da função de processamento de arquivo - é exclusivo para todos.  Isso dependerá diretamente do objetivo que você perseguir.  Por exemplo, mostrarei como enviar arquivos para o servidor através do AJAX. <br><br>  Suponha que criamos um campo para fazer upload de fotos.  Como não queremos que mais nada chegue ao nosso servidor, decidimos os tipos de arquivo: seja PNG e JPEG.  Também vale a pena regular o tamanho máximo de uma foto que um usuário pode enviar.  Limitado a cinco megabytes.  Começamos a descrever nossa função: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendFiles</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">files</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> maxFileSize = <span class="hljs-number"><span class="hljs-number">5242880</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> Data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FormData(); $(files).each(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">index, file</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((file.size &lt;= maxFileSize) &amp;&amp; ((file.type == <span class="hljs-string"><span class="hljs-string">'image/png'</span></span>) || (file.type == <span class="hljs-string"><span class="hljs-string">'image/jpeg'</span></span>))) { Data.append(<span class="hljs-string"><span class="hljs-string">'images[]'</span></span>, file); } }); };</code> </pre><br>  Na variável <code>maxFileSize</code> tamanho máximo do arquivo que enviaremos ao servidor.  <code>FormData()</code> função <code>FormData()</code> , criaremos um novo objeto da classe <code>FormData</code> , que nos permite gerar conjuntos de pares de valores-chave.  Esse objeto pode ser facilmente enviado via AJAX.  Em seguida, usamos a construção <code>.each</code> do jQuery para a matriz de <code>files</code> , que aplicará a função que definimos para cada um de seus elementos.  O número do elemento e o próprio elemento serão passados ​​como argumentos para a função, que processaremos como <code>index</code> e <code>file</code> respectivamente.  Na própria função, verificaremos o arquivo de acordo com nossos critérios: o tamanho é menor que cinco megabytes e o tipo é PNG ou JPEG.  Se o arquivo passar no teste, adicione-o ao nosso objeto <code>FormData</code> chamando a função <code>append()</code> .  A chave é a sequência <code>'photos[]'</code> , cujos colchetes no final indicam que é uma matriz na qual pode haver vários objetos.  O próprio objeto será o <code>file</code> . <br><br>  Agora tudo está pronto para enviar arquivos através do AJAX.  Adicione as seguintes linhas à nossa função: <br><br><pre> <code class="javascript hljs">$.ajax({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: dropZone.attr(<span class="hljs-string"><span class="hljs-string">'action'</span></span>), <span class="hljs-attr"><span class="hljs-attr">type</span></span>: dropZone.attr(<span class="hljs-string"><span class="hljs-string">'method'</span></span>), <span class="hljs-attr"><span class="hljs-attr">data</span></span>: Data, <span class="hljs-attr"><span class="hljs-attr">contentType</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">processData</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">success</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'   '</span></span>); } });</code> </pre><br>  Como parâmetros <code>url</code> e <code>type</code> indicamos os valores dos atributos de <code>action</code> e <code>method</code> de <code>input[type=file]</code> respectivamente.  Para passar pelo AJAX, seremos um objeto <code>Data</code> .  Os parâmetros <code>contentType: false</code> e <code>processData: false</code> são necessários para que o navegador não traduza inadvertidamente nossos arquivos para outro formato.  No parâmetro <code>success</code> , especificamos a função que será executada se os arquivos forem transferidos com sucesso para o servidor.  Seu conteúdo depende da sua imaginação, mas vou me limitar a uma saída modesta de uma mensagem sobre um download bem-sucedido. <br><br>  Parabéns, agora você pode criar seu próprio campo de upload de arquivos!  Obviamente, não posiciono meu método como o único verdadeiro e correto.  Meu objetivo era mostrar o curso geral de solução desse problema, adequado principalmente para iniciantes.  Se você acha que em algum lugar você poderia fazer algo melhor - escreva nos comentários, discutiremos! <br><br>  Só isso.  Obrigado pela atenção! <br><br>  Baixar: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Versão final</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Problema de foco</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Problema de cintilação</a> </li></ol><br>  Toque em: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Versão final</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Problema de foco</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Problema de cintilação</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt423035/">https://habr.com/ru/post/pt423035/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt423023/index.html">Por que os desenvolvedores precisam ensinar</a></li>
<li><a href="../pt423025/index.html">Como um programa de caixa pode economizar em análises?</a></li>
<li><a href="../pt423027/index.html">Transceptor óptico FTDI-POF</a></li>
<li><a href="../pt423029/index.html">Relatório de Clubes 2018, Capítulo 3.2: “Alternativas de Desenvolvimento”</a></li>
<li><a href="../pt423033/index.html">Eles falam demais em CRM: lidando com fofocas</a></li>
<li><a href="../pt423039/index.html">Fazemos autenticação na web através de blockchain</a></li>
<li><a href="../pt423041/index.html">Bizarre Story Super NES CD-ROM</a></li>
<li><a href="../pt423043/index.html">Devido a uma vulnerabilidade no sistema de proteção de veículo elétrico Tesla, um carro pode ser roubado em alguns segundos</a></li>
<li><a href="../pt423045/index.html">Qual impressora 3D escolher? Revisão de vídeo 3Dtool</a></li>
<li><a href="../pt423047/index.html">Reservamos sistemas de TI por dinheiro razoável</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>