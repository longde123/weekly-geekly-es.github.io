<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕊️ 🏇🏿 💱 Petualangan operator pipa di babel @ 7 🦈 ⏪ 🈶</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Rilis babel@7.0.0-beta52 memiliki flag konfigurasi baru yang diperlukan untuk @babel/plugin-proposal-pipeline-operator , yang memecah kompatibilitas m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Petualangan operator pipa di babel @ 7</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/418125/"><img src="https://habrastorage.org/webt/tt/8e/8a/tt8e8alhcx3dtck1h8mebjlihsg.png"><br><p> Rilis <a href="">babel@7.0.0-beta52 memiliki</a> flag <a href="">konfigurasi</a> baru yang diperlukan untuk <code>@babel/plugin-proposal-pipeline-operator</code> , yang memecah kompatibilitas mundur untuk versi plugin sebelumnya.  Pada artikel ini, Anda akan mempelajari apa itu operator <code>pipeline</code> dan mengapa perlu konfigurasi. </p><a name="habracut"></a><br><p>  UPD: saluran pipa pintar muncul di babel@7.2.0: <a href="https://babeljs.io/blog/2018/12/03/7.2.0#smart-pipeline-operator-parsing-8289-">https://babeljs.io/blog/2018/12/03/7.2.0#smart-pipeline-operator-parsing-8289-https-githubcom-babel-babel- tarik-8289</a> </p><br><h2 id="tekuschiy-status">  Status saat ini </h2><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gilbert Garza</a> , yang awalnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengusulkan</a> operator <code>pipeline</code> , berangkat untuk mendapatkan sintaksis sederhana untuk "rantai panggilan fungsi yang dipesan dalam gaya fungsional yang dapat dibaca."  Operator pipa berasal dari bahasa seperti F #, Hack, Elm, Elixir dan lainnya, dan ketika Anda menambahkannya ke JavaScript, dua masalah yang kontroversial muncul: </p><br><ul><li>  Di mana dan bagaimana menggunakan placeholder? </li><li>  Bagaimana seharusnya <code>async / await</code> dalam satu pipeline? </li></ul><br><h3 id="pleysholdery">  Placeholder </h3><br><p>  Pertanyaan pertama diajukan oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Kevin Smith</a> di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tiket ini</a> , di mana ia menyarankan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gaya</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pipa</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari bahasa Hack</a> .  Di Hack, placeholder diperlukan untuk sisi kanan pipeline, misalnya: </p><br><pre> <code class="plaintext hljs">namespace Hack\UserDocumentation\Operators\Pipe\Examples\MapFilterCountPiped; function piped_example(array&lt;int&gt; $arr): int { return $arr |&gt; \array_map($x ==&gt; $x * $x, $$) |&gt; \array_filter($$, $x ==&gt; $x % 2 == 0) |&gt; \count($$); } var_dump(piped_example(range(1, 10)));</code> </pre> <br><p>  Kami mengambil sebagai dasar bahwa placeholder dapat digunakan dalam ekspresi apa pun dan berisi nilai dari langkah pipa terakhir.  Pendekatan ini memberi kita fleksibilitas dan banyak kesempatan untuk menulis ekspresi. </p><br><p>  Sisi lain dari koin adalah kompleksitas bahasa karena penambahan token baru.  Sejauh ini, kami telah memilih hash ( <code>#</code> ), dan meskipun diskusi masih terbuka, token apa pun berpotensi berpotongan dengan penggunaan lainnya.  Sebagai contoh, hash juga digunakan oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bidang privat kelas</a> , sama seperti varian token lainnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">yang digunakan</a> . </p><br><h3 id="async--await">  Async / tunggu </h3><br><p>  Versi pertama dari pernyataan <code>pipeline</code> berisi sintaks ini untuk <code>await</code> : </p><br><pre> <code class="plaintext hljs">x |&gt; await f</code> </pre> <br><p>  apa yang bisa digunakan untuk: </p><br><pre> <code class="plaintext hljs">await f(x)</code> </pre> <br><p>  Sayangnya, pengguna mungkin mengharapkan penyebaran seperti itu: </p><br><pre> <code class="plaintext hljs">(await f)(x)</code> </pre> <br><p>  Sementara gagasan untuk menambahkan <code>async</code> ke <code>pipeline</code> tergelincir, anggota komite berbicara menentang operator <code>pipeline</code> yang tidak mendukung <code>async / await</code> .  Ya, ada opsi untuk cara bekerja dengan fungsi yang mengembalikan Janji tanpa sintaks eksplisit, tetapi semua opsi ini terlalu rumit atau memerlukan fungsi tambahan. </p><br><h2 id="predlagaemye-resheniya">  Solusi yang Disarankan </h2><br><p>  Sebagai hasil dari diskusi, dua proposal dibentuk (selain pilihan minimal): gunakan F # -piplines dan Smart-pipeline.  Mari kita simak saran-saran ini. </p><br><h3 id="minimalnyy-variant-operatorahttpsgithubcomtc39proposal-pipeline-operator">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Opsi operator minimum</a> </h3><br><p>  Penawaran ini hanya berlaku untuk fungsionalitas dasar.  Dalam versi minimal, dukungan untuk sinkronisasi tidak dihapus dan tidak ada placeholder.  Opsi ini sesuai dengan perilaku plugin babel dari versi sebelumnya, sebelum konfigurasi muncul, dan sesuai dengan spesifikasi saat ini untuk operator <code>pipeline</code> dalam repositori.  Ini lebih banyak digunakan sebagai rancangan penyelidikan untuk mengidentifikasi kelebihan dan kekurangan dari proposal lain, dan tidak mungkin diterima tanpa perubahan mendasar yang ada dalam proposal alternatif. </p><br><h3 id="f-payplaynyhttpsgithubcomvaltech-nycproposal-fsharp-pipelines">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">F # Pipa</a> </h3><br><p>  Placeholder untuk jalur pipa F # tidak diperlukan sama sekali.  Dalam versi dasar, fungsi panah mencakup kebutuhan placeholder, yang membutuhkan lebih sedikit coretan, dan didasarkan pada sintaksis ES2015 yang umum bagi semua orang. </p><br><p>  Saat ini (sesuai dengan spesifikasi garis F #) fungsi panah harus dibungkus dengan tanda kurung: </p><br><pre> <code class="plaintext hljs">let person = { score: 25 }; let newScore = person.score |&gt; double |&gt; (_ =&gt; add(7, _)) |&gt; (_ =&gt; boundScore(0, 100, _));</code> </pre> <br><p>  Survei sedang dilakukan untuk menentukan apakah layak menggunakan fungsi panah tanpa tanda kurung, yang terlihat berlebihan secara sintaksis di sini. </p><br><p>  Sedangkan untuk asinkron, <code>await</code> berfungsi sebagai fungsi unary di jalur pipa F #: </p><br><pre> <code class="plaintext hljs">promise |&gt; await</code> </pre> <br><p>  Apa yang terungkap di: </p><br><pre> <code class="plaintext hljs">await promise</code> </pre> <br><p>  dan karenanya <code>await</code> dapat digunakan di tengah rantai panggilan asinkron yang panjang: </p><br><pre> <code class="plaintext hljs">promise |&gt; await |&gt; (x =&gt; doubleSay(x, ', ')) |&gt; capitalize |&gt; (x =&gt; x + '!') |&gt; (x =&gt; new User.Message(x)) |&gt; (x =&gt; stream.write(x)) |&gt; await |&gt; console.log;</code> </pre> <br><p>  Pemrosesan <code>await</code> khusus semacam itu berpotensi membuka kemungkinan untuk menggunakan operator unary lainnya (misalnya, <code>typeof</code> ), tetapi spesifikasi asli pipa F # tidak mengandungnya. </p><br><h3 id="smart-payplaynyhttpsgithubcomjs-choiproposal-smart-pipelines">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Pipa Cerdas</a> </h3><br><p>  Pipa smar membawa ide placeholder ke kesimpulan logis mereka, memungkinkan penggunaan parsial dan ekspresi sewenang-wenang dalam pipa.  Rantai panjang sebelumnya dapat ditulis seperti ini: </p><br><pre> <code class="plaintext hljs">promise |&gt; await # |&gt; doubleSay(#, ', ') |&gt; # || throw new TypeError() |&gt; capitalize |&gt; # + '!' |&gt; new User.Message(#) |&gt; await stream.write(#) |&gt; console.log;</code> </pre> <br><p>  Aturan untuk menggunakan placeholder di jalur pipa cerdas cukup sederhana.  Jika pengidentifikasi tunggal dilewatkan ke langkah pipa, maka tidak ada token tambahan (pengganti) yang diperlukan, ini disebut <a href="">"gaya telanjang"</a> : </p><br><pre> <code class="plaintext hljs">x |&gt; a; x |&gt; fb;</code> </pre> <br><p>  Tidak seperti Hack, fungsi unary tidak memerlukan token pengganti. </p><br><p>  Untuk ekspresi lain, placeholder (disebut "token topik leksikal") diperlukan, dan saluran pipa dianggap berfungsi dalam "gaya tema" - <a href="">"gaya topik"</a> .  Tidak adanya token pengganti dalam kasus ini menyebabkan kesalahan SyntaxError awal: </p><br><pre> <code class="plaintext hljs">10 |&gt; # + 1; promise |&gt; await #;</code> </pre> <br><p>  Jika ada operator, tanda kurung (termasuk untuk memanggil metode), tanda kutip, atau apa pun selain pengidentifikasi dan titik, maka token pengganti diperlukan.  Ini akan membantu untuk menghindari tembakan di kaki dan menghilangkan ketidakpastian. </p><br><p>  Perpipaan pintar memecahkan masalah mendukung asinkron dengan cara yang lebih umum, yang memungkinkan kita untuk menggunakan semua kemungkinan ekspresi dalam perpipaan, tidak hanya <code>await</code> , tetapi juga <code>typeof</code> , <code>yield</code> dan operator lainnya. </p><br><h2 id="na-scenu-vyhodit-babel">  Babel memasuki TKP </h2><br><p>  Segera setelah ketiga proposal dikonkretkan, kami sampai pada kesimpulan bahwa diskusi seperti itu tidak akan mengarah pada resolusi kontradiksi yang mendalam antara proposal.  Kami memutuskan bahwa cara terbaik adalah mengumpulkan umpan balik dari pengembang menggunakan kalimat dalam kode nyata.  Mengingat peran Babel dalam komunitas pengembang, kami memutuskan untuk menambahkan ketiga opsi ke plugin operator <code>pipeline</code> . </p><br><p>  Karena parsing untuk ketiga kalimat sedikit, tetapi berbeda, dukungan mereka pertama-tama harus ditambahkan ke <code>@babel/parser</code> (yang merupakan <code>babylon</code> ), dan parser harus tahu proposal mana yang harus didukung sekarang.  Dengan demikian, plugin operator <code>pipeline</code> memerlukan opsi <code>"proposal"</code> , baik untuk mengkonfigurasi babylon untuk penguraian maupun untuk transformasi selanjutnya. </p><br><p>  Kami mengerjakan ini secara online karena kami harus membuat semua perubahan yang melanggar kompatibilitas sebelum babel @ 7 tidak lagi beta.  Pada akhirnya, kami ingin menjadikan salah satu opsi pipeline default untuk plugin untuk menghilangkan kebutuhan akan opsi konfigurasi. </p><br><p>  Karena keterbatasan ini, kami memutuskan untuk menambahkan opsi ke konfigurasi plugin dan membuatnya wajib, memaksa pengguna untuk memutuskan penawaran mana yang ingin mereka gunakan dalam proyek mereka.  Segera setelah proposal spesifik dipilih sebagai perilaku kanonik operator, kami menandai opsi <code>"proposal"</code> sebagai usang, dan opsi kanonik akan bekerja secara default.  Dukungan untuk penawaran yang dibatalkan akan berfungsi hingga versi utama berikutnya. </p><br><h2 id="prinyat-uchastie">  Ambil bagian </h2><br><p>  Jika Anda ingin berpartisipasi dalam pembahasan proposal, maka semua diskusi bersifat publik dan Anda dapat menemukannya dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">repositori proposal operator pipa</a> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Presentasi dari pertemuan TC39</a> juga siap melayani Anda.  Pada akhirnya, Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mengikuti James DiGioia</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">JS Choi,</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Daniel Ehrenberg</a> di Twitter. </p><br><p>  Tetapi yang lebih penting, segera setelah pekerjaan pada <code>pipeline</code> selesai, cobalah di proyek Anda!  Kami juga berupaya menambahkan fitur baru untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">diganti</a> , sehingga Anda dapat memeriksa kode Anda secara interaktif.  Kami membutuhkan umpan balik, dan menggunakannya dalam kode nyata akan sangat membantu untuk merakitnya.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Posting</a> tweet ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@babeljs</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id418125/">https://habr.com/ru/post/id418125/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id418115/index.html">Geek berada di jalan</a></li>
<li><a href="../id418117/index.html">Pengantar Kerangka Kerja Micronaut</a></li>
<li><a href="../id418119/index.html">Kegagalan epik bulan ini: rsync sebagai "vektor" pada data tarikan</a></li>
<li><a href="../id418121/index.html">Piu-bah-vzhuh: satelit pendeteksi petir juga memperhatikan meteor</a></li>
<li><a href="../id418123/index.html">Memori atom: alfabet 8-bit dan lagu 192-bit dari Mario</a></li>
<li><a href="../id418127/index.html">Kebenaran dan kepalsuan sistem pengenalan wajah</a></li>
<li><a href="../id418131/index.html">Pemrograman Lintas-Cloud dengan Go Cloud</a></li>
<li><a href="../id418133/index.html">Untuk membela PLO. 7 argumen yang tidak bisa dipertahankan dari lawan-lawannya</a></li>
<li><a href="../id418135/index.html">Cara mengatur repositori modul Node.js Anda sendiri dengan blackjack dan versi</a></li>
<li><a href="../id418137/index.html">Bloodlust: Wawancara dengan Pendiri DonorSearch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>