<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>тЭФ ЁЯСВЁЯП┐ ЁЯФг рдХреНрд╖рд┐рддрд┐рдЬ рд╢реВрдиреНрдп рдбреЙрди рдХреЗ рд░реВрдк рдореЗрдВ рд╢рд╛рд░реАрд░рд┐рдХ рд░реВрдк рд╕реЗ рд╕рд╣реА рдмрдбрд╝рд╛ рдмрд╛рджрд▓реЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛ ЁЯзСЁЯП┐тАНЁЯдЭтАНЁЯзСЁЯП┐ ЁЯСйЁЯП╜тАНтЪЦя╕П ЁЯЪб</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдкрд╣рд▓реЗ, рдЧреЗрдореНрд╕ рдореЗрдВ рдмрд╛рджрд▓реЛрдВ рдХреЛ рд╕рд╛рдзрд╛рд░рдг 2 рдбреА рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдЦреАрдВрдЪрд╛ рдЬрд╛рддрд╛ рдерд╛, рдЬреЛ рд╣рдореЗрд╢рд╛ рдХреИрдорд░реЗ рдХреА рджрд┐рд╢рд╛ рдореЗрдВ рдШреБрдорд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рд╛рд▓ рдХреЗ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, рд╡реАрдбрд┐рдпреЛ рдХрд╛рд░реН...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдХреНрд╖рд┐рддрд┐рдЬ рд╢реВрдиреНрдп рдбреЙрди рдХреЗ рд░реВрдк рдореЗрдВ рд╢рд╛рд░реАрд░рд┐рдХ рд░реВрдк рд╕реЗ рд╕рд╣реА рдмрдбрд╝рд╛ рдмрд╛рджрд▓реЛрдВ рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/459948/">  рдкрд╣рд▓реЗ, рдЧреЗрдореНрд╕ рдореЗрдВ рдмрд╛рджрд▓реЛрдВ рдХреЛ рд╕рд╛рдзрд╛рд░рдг 2 рдбреА рд╕реНрдкреНрд░рд╛рдЗрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдЦреАрдВрдЪрд╛ рдЬрд╛рддрд╛ рдерд╛, рдЬреЛ рд╣рдореЗрд╢рд╛ рдХреИрдорд░реЗ рдХреА рджрд┐рд╢рд╛ рдореЗрдВ рдШреБрдорд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рд╛рд▓ рдХреЗ рд╡рд░реНрд╖реЛрдВ рдореЗрдВ, рд╡реАрдбрд┐рдпреЛ рдХрд╛рд░реНрдб рдХреЗ рдирдП рдореЙрдбрд▓ рдЖрдкрдХреЛ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдкреНрд░рджрд░реНрд╢рди рдХреЗ рдиреБрдХрд╕рд╛рди рдХреЗ рдмрд┐рдирд╛ рд╢рд╛рд░реАрд░рд┐рдХ рд░реВрдк рд╕реЗ рд╕рд╣реА рдмрд╛рджрд▓ рдЦреАрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдЗрд╕ рдЦреЗрд▓ рдореЗрдВ рдмрд╛рджрд▓реЛрдВ рдиреЗ рд╕реНрдЯреВрдбрд┐рдпреЛ рдЧреБрд░рд┐рд▓реНрд▓рд╛ рдЧреЗрдореНрд╕ рдХреЛ рдЦреЗрд▓ рдХреНрд╖рд┐рддрд┐рдЬ рдЬреАрд░реЛ рдбреЙрди рдХреЗ рд╕рд╛рде рд▓рд╛рдпрд╛ред  рдмреЗрд╢рдХ, рдРрд╕реЗ рдмрд╛рджрд▓ рдкрд╣рд▓реЗ рд░реЗрдВрдбрд░ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рдереЗ, рд▓реЗрдХрд┐рди рд╕реНрдЯреВрдбрд┐рдпреЛ рдиреЗ рд╕реНрд░реЛрдд рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдПрд▓реНрдЧреЛрд░рд┐рджрдо рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрджреНрдпреЛрдЧ рдорд╛рдирдХ рдЬреИрд╕рд╛ рдХреБрдЫ рдмрдирд╛рдпрд╛, рдФрд░ рдЕрдм рд╡реЙрд▓реНрдпреВрдореЗрдЯреНрд░рд┐рдХ рдмрд╛рджрд▓реЛрдВ рдХрд╛ рдХреЛрдИ рднреА рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдХрд┐рд╕реА рднреА рддрд░рд╣ рдЗрд╕ рдорд╛рдирдХ рдХрд╛ рдЕрдиреБрдкрд╛рд▓рди рдХрд░рддрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/v9/uq/em/v9uqemwtz5ty7x5uvpppsoonmdu.png"><br><a name="habracut"></a><br>  рдмрд╛рджрд▓реЛрдВ рдХреЛ рдкреНрд░рд╕реНрддреБрдд рдХрд░рдиреЗ рдХреА рдкреВрд░реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЪрд░рдгреЛрдВ рдореЗрдВ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдФрд░ рдпрд╣ рдзреНрдпрд╛рди рд░рдЦрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдЙрдирдореЗрдВ рд╕реЗ рдХрд┐рд╕реА рдПрдХ рдкрд░ рднреА рдЧрд▓рдд рддрд░реАрдХреЗ рд╕реЗ рдХреНрд░рд┐рдпрд╛рдиреНрд╡рдпрди рд╕реЗ рдРрд╕реЗ рдкрд░рд┐рдгрд╛рдо рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдпрд╣ рд╕реНрдкрд╖реНрдЯ рдирд╣реАрдВ рд╣реЛрдЧрд╛ рдХрд┐ рддреНрд░реБрдЯрд┐ рдХрд╣рд╛рдБ рд╣реИ рдФрд░ рдЗрд╕реЗ рдХреИрд╕реЗ рдареАрдХ рдХрд┐рдпрд╛ рдЬрд╛рдП, рдЗрд╕рд▓рд┐рдП рд╣рд░ рдмрд╛рд░ рдкрд░рд┐рдгрд╛рдо рдХрд╛ рдПрдХ рдирд┐рдпрдВрддреНрд░рдг рдирд┐рд╖реНрдХрд░реНрд╖ рдмрдирд╛рдирд╛ рдЙрдЪрд┐рдд рд╣реИред <br><br><h2>  рдЯреЛрди рдореИрдкрд┐рдВрдЧ, sRGB </h2><br>  рдкреНрд░рдХрд╛рд╢ рд╡реНрдпрд╡рд╕реНрдерд╛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рд╢реБрд░реВ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рджреЛ рдХрд╛рдо рдХрд░рдирд╛ рдЬрд╝рд░реВрд░реА рд╣реИ: <br><br><ol><li>  рд╕реНрдХреНрд░реАрди рдкрд░ рдЕрдВрддрд┐рдо рдЫрд╡рд┐ рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ, рдХрдо рд╕реЗ рдХрдо рд╕рдмрд╕реЗ рд╕рд░рд▓ рдЯреЛрди рдореИрдкрд┐рдВрдЧ рд▓рд╛рдЧреВ рдХрд░реЗрдВ: <br><br><pre><code class="cpp hljs">tunedColor=color/(<span class="hljs-number"><span class="hljs-number">1</span></span>+color)</code> </pre> <br>  рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдЧрдгрдирд╛ рдХрд┐рдП рдЧрдП рд░рдВрдЧ рдореВрд▓реНрдп рдПрдХрддрд╛ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╣реЛрдВрдЧреЗред <br></li><li>  рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдЖрдк рдЬрд┐рд╕ рдЕрдВрддрд┐рдо рдлреНрд░реЗрдордмрдлрд╝рд░ рдореЗрдВ рдбреНрд░рд╛рдЗрдВрдЧ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рдФрд░ рд╕реНрдХреНрд░реАрди рдкрд░ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реИ рд╡рд╣ sRGB рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╣реИред  рдпрджрд┐ sRGB рдореЛрдб рдХреА рд╕рдХреНрд░рд┐рдпрддрд╛ рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реИ, рддреЛ рд░реВрдкрд╛рдВрддрд░рдг рдХреЛ shader рдореЗрдВ рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs">finalColor=<span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(color, vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>/<span class="hljs-number"><span class="hljs-number">2.2</span></span>))</code> </pre> <br>  рд╕реВрддреНрд░ рдЕрдзрд┐рдХрд╛рдВрд╢ рдорд╛рдорд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╣реИ, рд▓реЗрдХрд┐рди рдореЙрдирд┐рдЯрд░ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ 100% рдирд╣реАрдВред  рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ sRGB рд░реВрдкрд╛рдВрддрд░рдг рд╣рдореЗрд╢рд╛ рдЕрдВрддрд┐рдо рд░реВрдк рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </li></ol><br><h2>  рдкреНрд░рдХрд╛рд╢ рдореЙрдбрд▓ </h2><br>  рд╡рд┐рднрд┐рдиреНрди рдШрдирддреНрд╡реЛрдВ рдХреЗ рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдкрд╛рд░рджрд░реНрд╢реА рдорд╛рдорд▓реЗ рд╕реЗ рднрд░реЗ рд╕реНрдерд╛рди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред  рдЬрдм рдкреНрд░рдХрд╛рд╢ рдХреА рдХрд┐рд░рдг рдЗрд╕ рддрд░рд╣ рдХреЗ рдкрджрд╛рд░реНрде рд╕реЗ рдЧреБрдЬрд░рддреА рд╣реИ, рддреЛ рдпрд╣ рдЪрд╛рд░ рдкреНрд░рднрд╛рд╡реЛрдВ рдХреЗ рд╕рдВрдкрд░реНрдХ рдореЗрдВ рдЖрддреА рд╣реИ: рдЕрд╡рд╢реЛрд╖рдг, рдмрд┐рдЦрд░рдирд╛, рдмрд┐рдЦрд░рдирд╛ рдФрд░ рдЖрддреНрдо-рд╡рд┐рдХрд┐рд░рдгред  рдЙрддреНрддрд░рд╛рд░реНрджреНрдз рдПрдХ рдкрджрд╛рд░реНрде рдореЗрдВ рд░рд╛рд╕рд╛рдпрдирд┐рдХ рдкреНрд░рдХреНрд░рд┐рдпрд╛рдУрдВ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдпрд╣рд╛рдВ рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред <br><br>  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдкреНрд░рдХрд╛рд╢ рдХреА рдХрд┐рд░рдг рд╣реИ рдЬреЛ рдмрд┐рдВрджреБ A рд╕реЗ рдмрд┐рдВрджреБ B рддрдХ рдЧреБрдЬрд░рддреА рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_1/1t/9w/_11t9wizftnmwilerlsi5fvcrm4.png"></div><br>  <b>рддреЗрдЬ</b> <br><br>  рдПрдХ рдкрджрд╛рд░реНрде рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЧреБрдЬрд░рдиреЗ рд╡рд╛рд▓рд╛ рдкреНрд░рдХрд╛рд╢ рдЗрд╕ рдкрджрд╛рд░реНрде рджреНрд╡рд╛рд░рд╛ рдЕрд╡рд╢реЛрд╖рдг рд╕реЗ рдЧреБрдЬрд░рддрд╛ рд╣реИред  рдкреНрд░рдХрд╛рд╢ рдХрд╛ рдЧреИрд░-рдЕрд╡рд╢реЛрд╖рд┐рдд рдЕрдВрд╢ рд╕реВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/567/34c/ec6/56734cec6154e1fab8bb2d1538a8dffa.svg"></div><br>  рдЬрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/a3e/204/11f/a3e20411f145906908c5cd2b53a36dbe.svg">  - рдЕрд╡рд╢реЛрд╖рдг рдХреЗ рдмрд╛рдж рдмрд┐рдВрджреБ рдкрд░ рд╢реЗрд╖ рдкреНрд░рдХрд╛рд╢ <img src="https://habrastorage.org/getpro/habr/post_images/5cc/c8d/80d/5ccc8d80d010abd90b5c546d05856d3a.svg">  ред <img src="https://habrastorage.org/getpro/habr/post_images/5cc/c8d/80d/5ccc8d80d010abd90b5c546d05856d3a.svg">  - рджреВрд░реА рдкрд░ рдЦрдВрдб AB рдкрд░ рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВ <img src="https://habrastorage.org/getpro/habr/post_images/2a3/102/4ea/2a31024ea1803c34a47496e24a53a1ef.svg">  рдП рд╕реЗред <br><br>  <b>рдЕрдкрд╡реНрдпрдп</b> <br><br>  рдкрджрд╛рд░реНрде рдХреЗ рдХрдгреЛрдВ рдХреЗ рдкреНрд░рднрд╛рд╡ рдореЗрдВ рдкреНрд░рдХрд╛рд╢ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдЗрд╕рдХреА рджрд┐рд╢рд╛ рдмрджрд▓ рджреЗрддрд╛ рд╣реИред  рдкреНрд░рдХрд╛рд╢ рдХрд╛ рдЕрдВрд╢ рдЬрд┐рд╕рдиреЗ рдЕрдкрдиреА рджрд┐рд╢рд╛ рдирд╣реАрдВ рдмрджрд▓реА рд╣реИ рд╡рд╣ рд╕реВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04b/c17/2f5/04bc172f53fa572aebf0399275b5009f.svg"></div><br>  рдЬрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/5e3/0b7/bad/5e30b7badd64b9da62be750e48573c7d.svg">  - рдкреНрд░рдХрд╛рд╢ рдХрд╛ рдЕрдВрд╢ рдЬреЛ рдПрдХ рдмрд┐рдВрджреБ рдкрд░ рдмрд┐рдЦрд░рдиреЗ рдХреЗ рдмрд╛рдж рджрд┐рд╢рд╛ рдирд╣реАрдВ рдмрджрд▓рд╛ рд╣реИ <img src="https://habrastorage.org/getpro/habr/post_images/5cc/c8d/80d/5ccc8d80d010abd90b5c546d05856d3a.svg">  ред <br><br>  рдЕрд╡рд╢реЛрд╖рдг рдФрд░ рдлреИрд▓рд╛рд╡ рд╕рдВрдпреБрдХреНрдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8d7/d5a/f1a/8d7d5af1a0506ee776c4c2f850e862a9.svg"></div><br>  рд╕рдорд╛рд░реЛрд╣ <img src="https://habrastorage.org/getpro/habr/post_images/33f/297/4e9/33f2974e9c84331f8b92d8b7ed5aca97.svg">  рдХреНрд╖реАрдгрди рдпрд╛ рд╡рд┐рд▓реЛрдкрди рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИред  рдПрдХ рд╕рдорд╛рд░реЛрд╣ <img src="https://habrastorage.org/getpro/habr/post_images/eea/d4d/0d4/eead4d0d4f08873f9aa49b69a7c46fd8.svg">  - рд╕реНрдерд╛рдирд╛рдВрддрд░рдг рд╕рдорд╛рд░реЛрд╣ред  рдпрд╣ рджрд░реНрд╢рд╛рддрд╛ рд╣реИ рдХрд┐ рдмрд┐рдВрджреБ A рд╕реЗ рдмрд┐рдВрджреБ B рддрдХ рдЧреБрдЬрд░рдиреЗ рдкрд░ рдкреНрд░рдХрд╛рд╢ рдХрд┐рддрдирд╛ рд░рд╣рддрд╛ рд╣реИред <br><br>  рдЬреИрд╕рд╛ рд╕рдВрдмрдВрдз рд╣реИ <img src="https://habrastorage.org/getpro/habr/post_images/610/ddb/ee8/610ddbee8d80f847b44fa75c9a136489.svg">  рдФрд░ <img src="https://habrastorage.org/getpro/habr/post_images/cd1/8c2/405/cd18c240521dcfb71084a340a504e41f.svg">  : <img src="https://habrastorage.org/getpro/habr/post_images/b76/ea9/fd5/b76ea9fd577eb1c2cee545caa4153bd3.svg">  , рдЬрд╣рд╛рдВ C рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕реНрдерд┐рд░рд╛рдВрдХ рд╣реИ, рдЬреЛ RGB рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ рдорд╛рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, <img src="https://habrastorage.org/getpro/habr/post_images/9ee/494/9d2/9ee4949d2897f56ac90e563db1eb96cd.svg">  рдмрд┐рдВрджреБ рдкрд░ рдорд╛рдзреНрдпрдо рдХрд╛ рдШрдирддреНрд╡ рд╣реИ <img src="https://habrastorage.org/getpro/habr/post_images/5cc/c8d/80d/5ccc8d80d010abd90b5c546d05856d3a.svg">  ред <br><br>  рдЕрдм рдХрд╛рд░реНрдп рдХреЛ рдЬрдЯрд┐рд▓ рдХрд░рддреЗ рд╣реИрдВред  рдмрд┐рдВрджреБ A рд╕реЗ рдмрд┐рдВрджреБ B рддрдХ рдкреНрд░рдХрд╛рд╢ рдЪрд▓рддрд╛ рд╣реИ, рдпрд╣ рдЖрдВрджреЛрд▓рди рдХреЗ рджреМрд░рд╛рди рдорд░ рдЬрд╛рддрд╛ рд╣реИред  рдмрд┐рдВрджреБ X рдкрд░, рдкреНрд░рдХрд╛рд╢ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдЕрд▓рдЧ-рдЕрд▓рдЧ рджрд┐рд╢рд╛рдУрдВ рдореЗрдВ рдмрд┐рдЦрд░рд╛ рд╣реБрдЖ рд╣реИ, рджрд┐рд╢рд╛рдУрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдмрд┐рдВрджреБ O рдкрд░ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИред рдЕрдЧрд▓рд╛, рдмрд┐рдЦрд░реЗ рд╣реБрдП рдкреНрд░рдХрд╛рд╢ рдХрд╛ рдПрдХ рднрд╛рдЧ рдмрд┐рдВрджреБ X рд╕реЗ рдмрд┐рдВрджреБ O рддрдХ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдлрд┐рд░ рд╕реЗ рдЦрд░рд╛рдм рд╣реЛ рдЬрд╛рддрд╛ рд╣реИред  рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдПрдХреНрд╕реЛ рд▓рд╛рдЗрдЯ рдСрдл рдЗрдВрдЯрд░реЗрд╕реНрдЯ рдХрд╛ рд░рд╛рд╕реНрддрд╛ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zo/b_/tr/zob_troftvd8-ggp1ga7wesnrlk.png"></div><br>  A рд╕реЗ X рддрдХ рдЬрд╛рдиреЗ рдкрд░ рдкреНрд░рдХрд╛рд╢ рдХреА рд╣рд╛рдирд┐ рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ: <img src="https://habrastorage.org/getpro/habr/post_images/25d/8c9/f76/25d8c9f76986f59eb045b801f19d4e0a.svg">  , рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдПрдХреНрд╕ рд╕реЗ рдУ рддрдХ рдкреНрд░рдХрд╛рд╢ рдХреА рд╣рд╛рдирд┐ - рдпрд╣ <img src="https://habrastorage.org/getpro/habr/post_images/25b/3a9/8e3/25b3a98e370f0a95b734794b74bee57a.svg">  ред  рд▓реЗрдХрд┐рди рдкреНрд░рдХрд╛рд╢ рдХреЗ рдЙрд╕ рдЕрдВрд╢ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреНрдпрд╛ рдЬреЛ рдкреНрд░реЗрдХреНрд╖рдХ рдХреА рджрд┐рд╢рд╛ рдореЗрдВ рдмрд┐рдЦрд░рд╛ рд╣реЛрдЧрд╛? <br><br>  <b>рдкреНрд░рд╡рд░реНрдзрди рдлреИрд▓рд╛рд╡</b> <br><br>  рдпрджрд┐ рд╕рд╛рдзрд╛рд░рдг рдкреНрд░рдХреАрд░реНрдгрди рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдкреНрд░рдХрд╛рд╢ рдХреА рддреАрд╡реНрд░рддрд╛ рдХрдо рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рдмрд┐рдЦрд░рдиреЗ рдХреЗ рдкреНрд░рд╡рд░реНрдзрди рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣ рдкрдбрд╝реЛрд╕реА рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рдХрд╛рд╢ рдХреЗ рдмрд┐рдЦрд░рдиреЗ рдХреЗ рдХрд╛рд░рдг рдмрдврд╝ рдЬрд╛рддрд╛ рд╣реИред  рдкрдбрд╝реЛрд╕реА рдХреНрд╖реЗрддреНрд░реЛрдВ рд╕реЗ рдЖрдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рдХрд╛рд╢ рдХреА рдХреБрд▓ рдорд╛рддреНрд░рд╛ рд╕реВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдкрд╛рдИ рдЬрд╛ рд╕рдХрддреА рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e4/be1/bd9/7e4be1bd9a1d8f05b9d1d47e1bb27ecc.svg"></div><br>  рдЬрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/e63/878/1e4/e638781e456c920d7864e85c8b14a746.svg">  рдХреНрд╖реЗрддреНрд░ рдкрд░ рдЕрднрд┐рдиреНрди рд▓реЗрдиреЗ рдХрд╛ рдорддрд▓рдм рд╣реИ, <img src="https://habrastorage.org/getpro/habr/post_images/1ad/0bb/23e/1ad0bb23eb22871d78d2b5cc67d58292.svg">  - рдЪрд░рдг рд╕рдорд╛рд░реЛрд╣ <img src="https://habrastorage.org/getpro/habr/post_images/da9/7bc/3c5/da97bc3c51ddad728182deecd39ba0d0.svg">  - рджрд┐рд╢рд╛ рд╕реЗ рдЖрдиреЗ рд╡рд╛рд▓реА рд░реЛрд╢рдиреА <img src="https://habrastorage.org/getpro/habr/post_images/9c6/a44/e8e/9c6a44e8ed4cb10046e00346c6b58b15.svg">  ред <br><br>  рд╕рднреА рджрд┐рд╢рд╛рдУрдВ рд╕реЗ рдкреНрд░рдХрд╛рд╢ рдХреА рдЧрдгрдирд╛ рдХрд░рдирд╛ рдХрд╛рдлреА рдореБрд╢реНрдХрд┐рд▓ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╣рдо рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдкреНрд░рдХрд╛рд╢ рдХрд╛ рдореВрд▓ рднрд╛рдЧ рд╣рдорд╛рд░реЗ рдореВрд▓ рдПрдмреА рдмреАрдо рджреНрд╡рд╛рд░рд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕реВрддреНрд░ рдХреЛ рдмрд╣реБрдд рд╕рд░рд▓ рдмрдирд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ef8/4aa/222/ef84aa22259c648ea9925502712250f6.svg"></div><br>  рдЬрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/2cb/bcb/347/2cbbcb347a44c276c1095ac5bb3f8242.svg">  - рдкреНрд░рдХрд╛рд╢ рдХрд┐рд░рдг рдФрд░ рдкреНрд░реЗрдХреНрд╖рдХ рдХрд┐рд░рдг рдХреЗ рдмреАрдЪ рдХрд╛ рдХреЛрдг (рдпрд╛рдиреА, рдХреЛрдг AXO), <img src="https://habrastorage.org/getpro/habr/post_images/309/1ee/38b/3091ee38b2de66a8aa89af86fe87eb65.svg">  - рдкреНрд░рдХрд╛рд╢ рдХреА рддреАрд╡реНрд░рддрд╛ рдХрд╛ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдореВрд▓реНрдпред  рдЙрдкрд░реЛрдХреНрдд рд╕рднреА рдХреЛ рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╣рдо рд╕реВрддреНрд░ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/642/fb7/273/642fb727356c245fc6f053dbc9affde8.svg"></div><br>  рдЬрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/309/1ee/38b/3091ee38b2de66a8aa89af86fe87eb65.svg">  - рдЖрдиреЗ рд╡рд╛рд▓реА рд░реЛрд╢рдиреА <img src="https://habrastorage.org/getpro/habr/post_images/f7a/fbd/138/f7afbd138efabfc5bf5dad3e26e6c0fb.svg">  - рдкреНрд░рдХрд╛рд╢ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рддрдХ рдкрд╣реБрдВрдЪ рд░рд╣рд╛ рд╣реИред <br><br>  рд╣рдо рдХрд╛рд░реНрдп рдХреЛ рдереЛрдбрд╝рд╛ рдФрд░ рдЬрдЯрд┐рд▓ рдХрд░рддреЗ рд╣реИрдВред  рдЪрд▓реЛ рдХрд╣рддреЗ рд╣реИрдВ рдХрд┐ рдкреНрд░рдХрд╛рд╢ рдПрдХ рджрд┐рд╢рд╛рддреНрдордХ рдкреНрд░рдХрд╛рд╢ рджреНрд╡рд╛рд░рд╛ рдЙрддреНрд╕рд░реНрдЬрд┐рдд рд╣реЛрддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддреНред  рд╕реВрд░рдЬ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wz/r2/gg/wzr2ggl_1oshhmhn3kkqalhtkoo.png"></div><br>  рд╕рдм рдХреБрдЫ рдкрд┐рдЫрд▓реЗ рдорд╛рдорд▓реЗ рдХреА рддрд░рд╣ рд╣реА рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХрдИ рдмрд╛рд░ред  рдмрд┐рдВрджреБ A1 рд╕реЗ рдкреНрд░рдХрд╛рд╢ рдмрд┐рдВрджреБ X рдкрд░ рдмрд┐рдЦрд░рд╛ рд╣реБрдЖ рд╣реИ, рдмрд┐рдВрджреБ O рдкрд░ рдкреНрд░реЗрдХреНрд╖рдХ рдХреА рдУрд░, рдмрд┐рдВрджреБ A2 рд╕реЗ рдкреНрд░рдХрд╛рд╢ рдмрд┐рдВрджреБ X2 рдкрд░ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдХреА рдУрд░ рдмрд┐рдВрджреБ X2 рдкрд░ рдмрд┐рдЦрд░рд╛ рд╣реБрдЖ рд╣реИ, рдЖрджрд┐ред  рд╣рдо рджреЗрдЦрддреЗ рд╣реИрдВ рдХрд┐ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рддрдХ рдкрд╣реБрдВрдЪрдиреЗ рд╡рд╛рд▓рд╛ рдкреНрд░рдХрд╛рд╢ рдпреЛрдЧ рдХреЗ рдмрд░рд╛рдмрд░ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/838/191/24f/83819124f0beb6bdd5adc3644a79653b.svg"></div><br>  рдпрд╛ рдЕрдзрд┐рдХ рд╕рдЯреАрдХ рдЕрднрд┐рдиреНрди рдЕрднрд┐рд╡реНрдпрдХреНрддрд┐: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e01/7b0/5d2/e017b05d2026f311f43bc53da48c130e.svg"></div><br>  рдпрд╣ рд╕рдордЭрдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдпрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/e7b/3af/88e/e7b3af88eb6397d1f88774b011fe4cbb.svg">  , рдпрд╛рдиреАред  рдЦрдВрдб рдХреЛ рдЕрдирдВрдд рд▓рдВрдмрд╛рдИ рдХреЗ рд╡рд░реНрдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><h2>  рдЖрдХрд╛рд╢ </h2><br>  рдПрдХ рдорд╛рдореВрд▓реА рд╕рд░рд▓реАрдХрд░рдг рдХреЗ рд╕рд╛рде, рд╡рд╛рддрд╛рд╡рд░рдг рд╕реЗ рдЧреБрдЬрд░рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рдзреВрдк рдХрд╛ рдЪрд╢реНрдорд╛ рдХреЗрд╡рд▓ рдмрд┐рдЦрд░рд╛рд╡ рд╕реЗ рдЧреБрдЬрд░рддрд╛ рд╣реИ, рдЕрд░реНрдерд╛рддред <img src="https://habrastorage.org/getpro/habr/post_images/c79/ce0/055/c79ce005518e112e707da427d7231066.svg">  ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/k0/mm/tz/k0mmtzjcir3wnqxbcjzsouln4yo.png"></div><br>  рдФрд░ рдПрдХ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдкреНрд░рдХреАрд░реНрдгрди рднреА рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рджреЛ: рд░реЗрд▓реЗ рд╕реНрдХреИрдЯрд░рд┐рдВрдЧ рдФрд░ рдПрдордЖрдИ рд╕реНрдХреИрдЯрд░рд┐рдВрдЧред  рдкрд╣рд▓рд╛ рд╣рд╡рд╛ рдХреЗ рдЕрдгреБрдУрдВ рдХреЗ рдХрд╛рд░рдг рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рджреВрд╕рд░рд╛ рдкрд╛рдиреА рдХреЗ рдПрдХ рдПрд░реЛрд╕реЛрд▓ рдХреЗ рдХрд╛рд░рдг рд╣реЛрддрд╛ рд╣реИред <br><br>  рд╣рд╡рд╛ рдХреА рдХреБрд▓ рдШрдирддреНрд╡ (рдпрд╛ рдПрд░реЛрд╕реЛрд▓) рдЬрд┐рд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкреНрд░рдХрд╛рд╢ рдХреА рдХрд┐рд░рдг рдЧреБрдЬрд░рддреА рд╣реИ, рдмрд┐рдВрджреБ A рд╕реЗ рдмрд┐рдВрджреБ B рддрдХ рдЬрд╛рддреА рд╣реИ: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0bc/d80/e5d/0bcd80e5d5b35e43fef8336e6c66cde0.svg"></div>  рдЬрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/14b/01a/bf0/14b01abf043545d56ac10d61e69792e8.svg">  - рд╕реНрдХреЗрд▓рд┐рдВрдЧ рдКрдБрдЪрд╛рдИ, h - рд╡рд░реНрддрдорд╛рди рдКрдБрдЪрд╛рдИред <br><br>  рдПрдХ рд╕рд░рд▓ рдЕрднрд┐рдиреНрди рд╕рдорд╛рдзрд╛рди рд╣реЛрдЧрд╛: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d3f/b07/e75/d3fb07e750a91c2a253fdcf1de74de72.svg"></div><br>  рдЬрд╣рд╛рдБ dh рд╡рд╣ рдЪрд░рдг рдЖрдХрд╛рд░ рд╣реИ рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдКрдБрдЪрд╛рдИ рдХрд╛ рдирдореВрдирд╛ рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЕрдм "рдкреНрд░рдХрд╛рд╢ рдореЙрдбрд▓" рдХреЗ рдкрд┐рдЫрд▓реЗ рднрд╛рдЧ рдореЗрдВ рдкреНрд░рд╛рдкреНрдд рдЖрдХреГрддрд┐ рдФрд░ рдЖрдХреГрддрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gr/n0/fr/grn0fr0f-dly-jjpcjpg_pxof9a.png"></div><br>  рдкреНрд░реЗрдХреНрд╖рдХ рдУ рд╕реЗ рдУ рддрдХ рджрд┐рдЦрддрд╛ рд╣реИред  рд╣рдо рдЙрди рд╕рднреА рдкреНрд░рдХрд╛рд╢ рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬреЛ рдЕрдВрдХ X1, X2, ..., Xn рддрдХ рдкрд╣реБрдБрдЪрддреЗ рд╣реИрдВ, рдЙрдирдореЗрдВ рдмрд┐рдЦрд░реЗ рд╣реБрдП рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рддрдХ рдкрд╣реБрдБрдЪрддреЗ рд╣реИрдВ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/540/c25/470/540c25470466173df2e5cf7880390ff9.svg"></div><br>  рдЬрд╣рд╛рдБ <img src="https://habrastorage.org/getpro/habr/post_images/c87/cb3/ca4/c87cb3ca4e0a0f0fc9d1a9d5c485c116.svg">  рд╕реВрд░реНрдп рджреНрд╡рд╛рд░рд╛ рдЙрддреНрд╕рд░реНрдЬрд┐рдд рдкреНрд░рдХрд╛рд╢ рдХреА рддреАрд╡реНрд░рддрд╛, <img src="https://habrastorage.org/getpro/habr/post_images/6c3/b25/b5f/6c3b25b5f22b9a03c093ef2f25a06339.svg">  - рдмрд┐рдВрджреБ рдкрд░ рдКрдВрдЪрд╛рдИ <img src="https://habrastorage.org/getpro/habr/post_images/ee6/2f8/bed/ee62f8bed8d0d0e9b3d3cd2c81841ded.svg">  ;  рдЖрдХрд╛рд╢ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдирд┐рд░рдВрддрд░ рд╕реА, рдЬреЛ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд╣реИ <img src="https://habrastorage.org/getpro/habr/post_images/cd1/8c2/405/cd18c240521dcfb71084a340a504e41f.svg">  рдХреЗ рд░реВрдк рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд <img src="https://habrastorage.org/getpro/habr/post_images/cea/f36/742/ceaf36742def9a68dbd173a0ac9c9aeb.svg">  ред <br><br>  рдЕрднрд┐рдиреНрди рдХрд╛ рд╕рдорд╛рдзрд╛рди рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5be/44a/9fc/5be44a9fcdb92469fee29b924a957556.svg"></div><br>  рдпрд╣ рд╕реВрддреНрд░ рд░реЗрд▓реЗ рд╕реНрдХреИрдЯрд░рд┐рдВрдЧ рдФрд░ рдорд╛рдЗ рд╕реНрдХреИрдЯрд░рд┐рдВрдЧ рджреЛрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдорд╛рдиреНрдп рд╣реИред  рдирддреАрдЬрддрди, рдкреНрд░рддреНрдпреЗрдХ рдмрд┐рдЦрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдкреНрд░рдХрд╛рд╢ рдорд╛рди рдмрд╕ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/34f/cb4/a91/34fcb4a9100e4b9c60a7c7eca2c489ec.svg"></div><br>  <b>рд░реЗрд▓реЗ рдлреИрд▓рд╛рд╡</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/71e/a55/e80/71ea55e8043a70776eb70f29eb84d877.svg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/679/03f/8e9/67903f8e987346a525fb22e02e718aad.svg">  (рдкреНрд░рддреНрдпреЗрдХ RGB рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рдорд╛рди рд╢рд╛рдорд┐рд▓ рд╣реИрдВ) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c9/02f/384/4c902f3848ae3cb24347ee0b367132d6.svg"><br><br>  рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nk/xs/8z/nkxs8zt8hyh909tjilktrkrrvri.png"></div><br>  <b>рдорд┐ рдмрд┐рдЦреЗрд░рдирд╛</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/72b/94b/cc1/72b94bcc19f99b0e164c6a48e4408b44.svg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c9a/52e/00c/c9a52e00c5e6169a8ad778f902e49595.svg">  (рд╕рднреА RGB рдЪреИрдирд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдорд╛рди рд╕рдорд╛рди рд╣реИрдВ) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/208/fcf/3bf/208fcf3bf216540af2bfa93a186a3a19.svg"><br><br>  рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fu/jv/sb/fujvsbtduq-il-1reylizx1kosa.png"></div><br>  рдкреНрд░рддрд┐ рдЦрдВрдб рдирдореВрдиреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ <img src="https://habrastorage.org/getpro/habr/post_images/2a1/abf/7c3/2a1abf7c35ec6c9a9d35514977d15981.svg">  рдФрд░ рд╕реЗрдЧрдореЗрдВрдЯ рдкрд░ <img src="https://habrastorage.org/getpro/habr/post_images/392/559/f75/392559f75e1c271b8bbfbc6255e70d4d.svg">  рдЖрдк 32 рдФрд░ рдКрдкрд░ рд▓реЗ рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдкреГрдереНрд╡реА рдХреА рддреНрд░рд┐рдЬреНрдпрд╛ 6371000 рдореАрдЯрд░ рд╣реИ, рд╡рд╛рдпреБрдордВрдбрд▓ 100000 рдореАрдЯрд░ рд╣реИред <br><br>  рдпрд╣ рд╕рдм рдХреНрдпрд╛ рдХрд░рдирд╛ рд╣реИ: <br><br><ol><li>  рд╕реНрдХреНрд░реАрди рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдкрд┐рдХреНрд╕реЗрд▓ рдореЗрдВ, рд╣рдо рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рд╡реА рдХреА рджрд┐рд╢рд╛ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ </li><li>  рд╣рдо рдкреНрд░реЗрдХреНрд╖рдХ O рдХреА рд╕реНрдерд┐рддрд┐ рдХреЛ {0, 6371000, 0} рдХреЗ рдмрд░рд╛рдмрд░ рд▓реЗрддреЗ рд╣реИрдВ </li><li>  рд╣рдо рдкрд╛рддреЗ рд╣реИрдВ <img src="https://habrastorage.org/getpro/habr/post_images/28d/cc9/fe7/28dcc9fe786e9216afc4ab3ae2196ebe.svg">  рдмрд┐рдВрджреБ O рдкрд░ рдЙрддреНрдкрдиреНрди рд╣реЛрдиреЗ рд╡рд╛рд▓реА рдХрд┐рд░рдг рдХреЗ рдкреНрд░рддрд┐рдЪреНрдЫреЗрджрди рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк, рдФрд░ V рдХреА рджрд┐рд╢рд╛ рдФрд░ рдмрд┐рдВрджреБ {0,0,0} рдкрд░ рдХреЗрдВрджреНрд░рд┐рдд рд╣реИ рдФрд░ 6471000 рдХрд╛ рддреНрд░рд┐рдЬреНрдпрд╛ </li><li>  рд░реЗрдЦрд╛ рдЦрдВрдб <img src="https://habrastorage.org/getpro/habr/post_images/392/559/f75/392559f75e1c271b8bbfbc6255e70d4d.svg">  рдмрд░рд╛рдмрд░ рд▓рдВрдмрд╛рдИ рдХреЗ 32 рд╡рд░реНрдЧреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░реЗрдВ </li><li>  рдкреНрд░рддреНрдпреЗрдХ рдЕрдиреБрднрд╛рдЧ рдХреЗ рд▓рд┐рдП, рд╣рдо рд░реЗрд▓реЗ рд╕реНрдХреИрдЯрд░рд┐рдВрдЧ рдФрд░ рдорд┐ рд╕реНрдХреИрдЯрд░рд┐рдВрдЧ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рд╕рдм рдХреБрдЫ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <img src="https://habrastorage.org/getpro/habr/post_images/2a1/abf/7c3/2a1abf7c35ec6c9a9d35514977d15981.svg">  рд╣рдореЗрдВ рдЦрдВрдб рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░рдиреЗ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА <img src="https://habrastorage.org/getpro/habr/post_images/0e6/fb0/4e8/0e6fb04e8525f5a3448df984993ab3c4.svg">  рдкреНрд░рддреНрдпреЗрдХ рдорд╛рдорд▓реЗ рдореЗрдВ 32 рдмрд░рд╛рдмрд░ рднреВрдЦрдВрдбред <img src="https://habrastorage.org/getpro/habr/post_images/60e/970/a20/60e970a20b30f36e7c21fe71c3d4dadb.svg">  рдПрдХ рдЪрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдкрдврд╝рд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдореВрд▓реНрдп рдЪрдХреНрд░ рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдкрд░ рдмрдврд╝рддрд╛ рд╣реИред </li></ol><br>  рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/no/gb/tl/nogbtlqbuzffixmq7xmt1w4j_ja.png"></div><br><h2>  рдХреНрд▓рд╛рдЙрдб рдореЙрдбрд▓ </h2><br>  рд╣рдореЗрдВ 3 рдбреА рдореЗрдВ рдХрдИ рдкреНрд░рдХрд╛рд░ рдХреЗ рд╢реЛрд░ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдкрд╣рд▓рд╛ рд╣реИ рдкреЗрд░реНрд▓рд┐рди рдХрд╛ рдЧреБрдкреНрдд рднрдЧреНрди рдмреНрд░рд╛рдЙрдирд┐рдпрди рдЧрддрд┐ (fBm) рд╢реЛрд░: <br><br>  2 рдбреА рд╕реНрд▓рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ld/h6/v6/ldh6v6zglre4jhon_n8qu193o8k.png"></div><br>  рджреВрд╕рд░рд╛ рд╣реИ рд╡реЛрд░реЛрдиреЛрдИ рдХрд╛ рдХреНрд▓реЙрдЬрд┐рдВрдЧ рдПрдлрдмреАрдПрдо рд╢реЛрд░ред <br><br>  2 рдбреА рд╕реНрд▓рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/aa/rc/s2/aarcs2hvles3h89jqfc1lfrufjk.png"></div><br>  рд╡реЛрд░рд▓реЗ рдХреЗ рдХреНрд▓реЛрдХрд┐рдВрдЧ рдПрдлрдмреАрдПрдо рд╢реЛрд░ рдХреЛ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд╡реЛрд░реЛрдиреЛрдЬ рдХреЗ рдХреНрд▓реЛрдХрд┐рдВрдЧ рдПрдлрдмреАрдПрдо рд╢реЛрд░ рдХреЛ рдЙрд▓рдЯрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдБрдХрд┐, рдореИрдВрдиреЗ рдЕрдкрдиреЗ рд╡рд┐рд╡реЗрдХ рд╕реЗ рдореВрд▓реНрдпреЛрдВ рдХреА рд╕реАрдорд╛рдУрдВ рдХреЛ рдереЛрдбрд╝рд╛ рдмрджрд▓ рджрд┐рдпрд╛: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fbmTiledWorley3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(...)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> clamp((<span class="hljs-number"><span class="hljs-number">1.0</span></span>-fbmTiledVoronoi3(...))*<span class="hljs-number"><span class="hljs-number">1.5</span></span><span class="hljs-number"><span class="hljs-number">-0.25</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">1.0</span></span>); }</code> </pre> <br>  рдкрд░рд┐рдгрд╛рдо рддреБрд░рдВрдд рдмрд╛рджрд▓ рд╕рдВрд░рдЪрдирд╛рдУрдВ рдЬреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ha/pf/em/hapfemxrqrxuqfpckajp53j4zxc.png"></div><br>  рдмрд╛рджрд▓реЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рджреЛ рд╡рд┐рд╢реЗрд╖ рдмрдирд╛рд╡рдЯ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рдкрд╣рд▓реЗ рдХрд╛ рдЖрдХрд╛рд░ 128x128x128 рд╣реИ рдФрд░ рдХрдо-рдЖрд╡реГрддреНрддрд┐ рд╢реЛрд░ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ, рджреВрд╕рд░реЗ рдХрд╛ рдЖрдХрд╛рд░ 32x32x32 рд╣реИ рдФрд░ рдЙрдЪреНрдЪ рдЖрд╡реГрддреНрддрд┐ рд╢реЛрд░ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдмрдирд╛рд╡рдЯ R8 рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдХреЗрд╡рд▓ рдПрдХ рдЪреИрдирд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИред  рдХреБрдЫ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдореЗрдВ, R8G8B8A8 рдХреЗ 4 рдЪреИрдирд▓реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдкрд╣рд▓реЗ рдмрдирд╛рд╡рдЯ рдХреЗ рд▓рд┐рдП рдФрд░ рджреВрд╕рд░реЗ рдХреЗ рд▓рд┐рдП R8G8B8 рдХреЗ рддреАрди рдЪреИрдирд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдлрд┐рд░ рдЪреИрдирд▓реЛрдВ рдХреЛ рдПрдХ рдорд┐рд▓рд╛рд╡рдЯ рдореЗрдВ рдорд┐рд▓рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдореИрдВ рдЗрд╕ рдмрд┐рдВрджреБ рдХреЛ рдирд╣реАрдВ рджреЗрдЦрддрд╛, рдХреНрдпреЛрдВрдХрд┐ рдорд┐рд╢реНрд░рдг рдХреЛ рдкрд╣рд▓реЗ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдХреИрд╢ рд╕реБрд╕рдВрдЧрддрддрд╛ рдореЗрдВ рдПрдХ рдмрдбрд╝реА рд╣рд┐рдЯ рд╣реЛ рд╕рдХрддреА рд╣реИред <br><br>  рдорд┐рд╢реНрд░рдг рдХреЗ рд▓рд┐рдП, рдФрд░ рдХреБрдЫ рд╕реНрдерд╛рдиреЛрдВ рдкрд░, рд░реАрдореИрдк () рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬреЛ рдорд╛рдиреЛрдВ рдХреЛ рдПрдХ рд╕реАрдорд╛ рд╕реЗ рджреВрд╕рд░реА рд╕реАрдорд╛ рддрдХ рд▓реЗ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">remap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minValue, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxValue, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newMinValue, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> newMaxValue)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> newMinValue+(value-minValue)/(maxValue-minValue)*(newMaxValue-newMinValue); }</code> </pre> <br>  рдЪрд▓реЛ рдХрдо-рдЖрд╡реГрддреНрддрд┐ рд╢реЛрд░ рдХреЗ рд╕рд╛рде рдмрдирд╛рд╡рдЯ рддреИрдпрд╛рд░ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ: <br>  рдЖрд░-рдЪреИрдирд▓ - рдкреЗрд░рд▓рд┐рди рдХрд╛ fBm рд╢реЛрд░ <br>  рдЬреА-рдЪреИрдирд▓ - tb fBm Vorley рд╢реЛрд░ <br>  рдмреА-рдЪреИрдирд▓ - рдЫреЛрдЯреЗ рдкреИрдорд╛рдиреЗ рдХреЗ рд╕рд╛рде рдЫреЛрдЯреЗ рдПрдлрдмреАрдПрдо рд╡рд░реНрд▓реА рд╢реЛрд░ <br>  рдП-рдЪреИрдирд▓ - рд╡рд░реНрд▓реА рдХреЗ taylable fBm рд╢реЛрд░ рдХреЗ рд╕рд╛рде рдФрд░ рднреА рдЫреЛрдЯреЗ рдкреИрдорд╛рдиреЗ рдкрд░ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ms/_9/z-/ms_9z-hofvyvya5-zuh6vpi6da0.png"></div><br>  рдорд┐рд╢реНрд░рдг рдЗрд╕ рддрд░рд╣ рд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs">finalValue=remap(noise.x, (noise.y * <span class="hljs-number"><span class="hljs-number">0.625</span></span> + noise.z*<span class="hljs-number"><span class="hljs-number">0.25</span></span> + noise.w * <span class="hljs-number"><span class="hljs-number">0.125</span></span>)<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br>  2 рдбреА рд╕реНрд▓рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/64/qh/rl/64qhrl3wl2vrsbedao4fk9zr3xg.png"></div><br>  рдЕрдм рдЙрдЪреНрдЪ рдЖрд╡реГрддреНрддрд┐ рд╢реЛрд░ рдХреЗ рд╕рд╛рде рдмрдирд╛рд╡рдЯ рддреИрдпрд╛рд░ рдХрд░реЗрдВ: <br>  R-channel - tiled fBm Vorley рд╢реЛрд░ <br>  рдЬреА-рдЪреИрдирд▓ - рдЫреЛрдЯрд╛ рд╕реНрдХреЗрд▓ рдПрдлрдмреАрдПрдо рд╡реЙрд░реНрд▓реЗ рд╢реЛрд░ <br>  рдмреА-рдЪреИрдирд▓ - рд╡рд░реНрд▓реЗ taylivaya fBm рд╢реЛрд░ рдФрд░ рднреА рдЫреЛрдЯреЗ рдкреИрдорд╛рдиреЗ рдкрд░ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ox/m6/in/oxm6inosejxwrkx2kdz7zv17eea.png"></div><br><pre> <code class="cpp hljs">finalValue=noise.x * <span class="hljs-number"><span class="hljs-number">0.625</span></span> + noise.y*<span class="hljs-number"><span class="hljs-number">0.25</span></span> + noise.z * <span class="hljs-number"><span class="hljs-number">0.125</span></span>;</code> </pre> <br>  2 рдбреА рд╕реНрд▓рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lg/mr/mc/lgmrmc2ohi3ayicwbji49fdhqb4.png"></div><br>  рд╣рдореЗрдВ рдПрдХ 2 рдбреА рдмрдирд╛рд╡рдЯ-рдореМрд╕рдо рдХрд╛ рдирдХреНрд╢рд╛ рднреА рдЪрд╛рд╣рд┐рдП рдЬреЛ рдЕрдВрддрд░рд┐рдХреНрд╖ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрд╛рджрд▓реЛрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐, рдШрдирддреНрд╡ рдФрд░ рдЖрдХрд╛рд░ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░реЗрдЧрд╛ред  рдЗрд╕реЗ рдХрд▓рд╛рдХрд╛рд░реЛрдВ рдиреЗ рдлрд╛рдЗрди-рдЯреНрдпреВрди рдХреНрд▓рд╛рдЙрдб рдХрд╡рд░ рд╕реЗ рдкреЗрдВрдЯ рдХрд┐рдпрд╛ рд╣реИред  рдореМрд╕рдо рдХреЗ рдирдХреНрд╢реЗ рдХреЗ рд░рдВрдЧ рдЪреИрдирд▓реЛрдВ рдХреА рд╡реНрдпрд╛рдЦреНрдпрд╛ рднрд┐рдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИ, рдЬрд┐рд╕ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдореИрдВрдиреЗ рдЙрдзрд╛рд░ рджрд┐рдпрд╛ рдерд╛, рд╡рд╣ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fu/oi/m8/fuoim8wbtdzgqoc2lma8g6gb0ow.png"></div><br>  рдЖрд░-рдЪреИрдирд▓ - рдХрдо рдКрдВрдЪрд╛рдИ рд╡рд╛рд▓реЗ рдмрд╛рджрд▓ рдХрд╡рд░ <br>  рдЬреА-рдЪреИрдирд▓ - рдЙрдЪреНрдЪ рдКрдВрдЪрд╛рдИ рд╡рд╛рд▓реЗ рдмрд╛рджрд▓ рдХрд╡рд░ <br>  рдмреА-рдЪреИрдирд▓ - рдЕрдзрд┐рдХрддрдо рдмрд╛рджрд▓ рдКрдВрдЪрд╛рдИ <br>  рдП-рдЪреИрдирд▓ - рдХреНрд▓рд╛рдЙрдб рдШрдирддреНрд╡ <br><br>  рдЕрдм рд╣рдо рдПрдХ рдРрд╕рд╛ рд╕рдорд╛рд░реЛрд╣ рддреИрдпрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рддреИрдпрд╛рд░ рд╣реИрдВ рдЬреЛ 3 рдбреА рдЕрдВрддрд░рд┐рдХреНрд╖ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмрд╛рджрд▓реЛрдВ рдХреЗ рдШрдирддреНрд╡ рдХреЛ рд▓реМрдЯрд╛рдПрдЧрд╛ред <br><br>  рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рдкрд░, рдХрд┐рдореА рдореЗрдВ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рд╕рд╛рде рдЕрдВрддрд░рд┐рдХреНрд╖ рдореЗрдВ рдПрдХ рдмрд┐рдВрджреБ <br><br><pre> <code class="cpp hljs">vec3 position</code> </pre> <br>  рддреБрд░рдВрдд рд╣рд╡рд╛ рдореЗрдВ рдСрдлрд╕реЗрдЯ рдЬреЛрдбрд╝реЗрдВ <br><br><pre> <code class="cpp hljs">position.xz+=vec2(<span class="hljs-number"><span class="hljs-number">0.2f</span></span>)*ufmParams.time;</code> </pre> <br>  рдореМрд╕рдо рдорд╛рдирдЪрд┐рддреНрд░ рдорд╛рди рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ <br><br><pre> <code class="cpp hljs">vec4 weather=textureLod(ufmWeatherMap, position.xz/<span class="hljs-number"><span class="hljs-number">4096.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre>  рд╣рдореЗрдВ рдКрдВрдЪрд╛рдИ рдХрд╛ рдкреНрд░рддрд┐рд╢рдд рдорд┐рд▓рддрд╛ рд╣реИ (0 рд╕реЗ 1 рддрдХ) <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> height=cloudGetHeight(position);</code> </pre> <br>  рдиреАрдЪреЗ рдмрд╛рджрд▓реЛрдВ рдХреА рдПрдХ рдЫреЛрдЯреА рдЧреЛрд▓рд╛рдИ рдЬреЛрдбрд╝реЗрдВ: <pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SRb=clamp(remap(height, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.07</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre>  рд╣рдо рдореМрд╕рдо рдХреЗ рдорд╛рдирдЪрд┐рддреНрд░ рдХреЗ рдмреА-рдЪреИрдирд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдмрдврд╝рддреА рдКрдВрдЪрд╛рдИ рдХреЗ рд╕рд╛рде 0 рдореЗрдВ рдШрдирддреНрд╡ рдореЗрдВ рдПрдХ рд░реИрдЦрд┐рдХ рдХрдореА рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SRt=clamp(remap(height, weather.b*<span class="hljs-number"><span class="hljs-number">0.2</span></span>, weather.b, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre>  рдкрд░рд┐рдгрд╛рдо рдХреЛ рдорд┐рд▓рд╛рдПрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SA=SRb*SRt;</code> </pre> <br>  рдиреАрдЪреЗ рдмрд╛рджрд▓реЛрдВ рдХреА рдЧреЛрд▓рд╛рдИ рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DRb=height*clamp(remap(height, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.15</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br>  рд╢реАрд░реНрд╖ рдкрд░ рдмрд╛рджрд▓реЛрдВ рдХреЗ рдЧреЛрд▓рд╛рдИ рдХреЛ рднреА рдЬреЛрдбрд╝реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DRt=height*clamp(remap(height, <span class="hljs-number"><span class="hljs-number">0.9</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre>  рд╣рдо рдкрд░рд┐рдгрд╛рдо рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдпрд╣рд╛рдВ рд╣рдо рдореМрд╕рдо рдХреЗ рдирдХреНрд╢реЗ рд╕реЗ рдШрдирддреНрд╡ рдХреЗ рдкреНрд░рднрд╛рд╡ рдФрд░ рдШрдирддреНрд╡ рдХреЗ рдкреНрд░рднрд╛рд╡ рдХреЛ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ, рдЬреЛ рдЧреБрдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DA=DRb*DRt*weather.a*<span class="hljs-number"><span class="hljs-number">2</span></span>*ufmProperties.density;</code> </pre> <br>  рд╣рдорд╛рд░реЗ рдмрдирд╛рд╡рдЯ рд╕реЗ рдХрдо рдЖрд╡реГрддреНрддрд┐ рдФрд░ рдЙрдЪреНрдЪ рдЖрд╡реГрддреНрддрд┐ рд╡рд╛рд▓реЗ рд╢реЛрд░ рдХреЛ рдорд┐рд▓рд╛рдПрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SNsample=textureLod(ufmLowFreqNoiseTexture, position/<span class="hljs-number"><span class="hljs-number">48.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>).x*<span class="hljs-number"><span class="hljs-number">0.85f</span></span>+textureLod(ufmHighFreqNoiseTexture, position/<span class="hljs-number"><span class="hljs-number">4.8f</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>).x*<span class="hljs-number"><span class="hljs-number">0.15f</span></span>;</code> </pre> <br>  рдореЗрд░реЗ рджреНрд╡рд╛рд░рд╛ рдкрдврд╝реЗ рдЧрдП рд╕рднреА рджрд╕реНрддрд╛рд╡реЗрдЬреЛрдВ рдореЗрдВ, рд╡рд┐рд▓рдп рдПрдХ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рд╣реЛрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдореБрдЭреЗ рдпрд╣ рд╡рд┐рдХрд▓реНрдк рдкрд╕рдВрдж рдЖрдпрд╛ред <br><br>  рд╣рдо рдХрд╡рд░реЗрдЬ рдХреА рдорд╛рддреНрд░рд╛ (рдмрд╛рджрд▓реЛрдВ рдХреЗ рдХрдмреНрдЬреЗ рд╡рд╛рд▓реЗ рдЖрдХрд╛рд╢ рдХрд╛%) рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░рддреЗ рд╣реИрдВ, рдЬрд┐рд╕реЗ рдЧреБрдИ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдореМрд╕рдо рдорд╛рдирдЪрд┐рддреНрд░ рдХреЗ рдЖрд░- рдФрд░ рдЬреА-рдЪреИрдирд▓реЛрдВ рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> WMc=max(weather.r, clamp(ufmProperties.coverage<span class="hljs-number"><span class="hljs-number">-0.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)*weather.g*<span class="hljs-number"><span class="hljs-number">2</span></span>);</code> </pre> <br>  рдЕрдВрддрд┐рдо рдШрдирддреНрд╡ рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> d=clamp(remap(SNsample*SA, <span class="hljs-number"><span class="hljs-number">1</span></span>-ufmProperties.coverage*WMc, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)*DA;</code> </pre> <br>  рд╕рдВрдкреВрд░реНрдг рдХрд╛рд░реНрдп: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cloudSampleDensity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 position)</span></span></span><span class="hljs-function"> </span></span>{ position.xz+=vec2(<span class="hljs-number"><span class="hljs-number">0.2f</span></span>)*ufmParams.time; vec4 weather=textureLod(ufmWeatherMap, position.xz/<span class="hljs-number"><span class="hljs-number">4096.0f</span></span>+vec2(<span class="hljs-number"><span class="hljs-number">0.2</span></span>, <span class="hljs-number"><span class="hljs-number">0.1</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> height=cloudGetHeight(position); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SRb=clamp(remap(height, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.07</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SRt=clamp(remap(height, weather.b*<span class="hljs-number"><span class="hljs-number">0.2</span></span>, weather.b, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SA=SRb*SRt; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DRb=height*clamp(remap(height, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0.15</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DRt=height*clamp(remap(height, <span class="hljs-number"><span class="hljs-number">0.9</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> DA=DRb*DRt*weather.a*<span class="hljs-number"><span class="hljs-number">2</span></span>*ufmProperties.density; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> SNsample=textureLod(ufmLowFreqNoiseTexture, position/<span class="hljs-number"><span class="hljs-number">48.0f</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>).x*<span class="hljs-number"><span class="hljs-number">0.85f</span></span>+textureLod(ufmHighFreqNoiseTexture, position/<span class="hljs-number"><span class="hljs-number">4.8f</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>).x*<span class="hljs-number"><span class="hljs-number">0.15f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> WMc=max(weather.r, clamp(ufmProperties.coverage<span class="hljs-number"><span class="hljs-number">-0.5</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)*weather.g*<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> d=clamp(remap(SNsample*SA, <span class="hljs-number"><span class="hljs-number">1</span></span>-ufmProperties.coverage*WMc, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>)*DA; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> d; }</code> </pre> <br>  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдпрд╣ рдлрд╝рдВрдХреНрд╢рди рдХреНрдпрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдпрд╣ рдПрдХ рдЦреБрд▓рд╛ рдкреНрд░рд╢реНрди рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдорд╛рдирдХреЛрдВ рдХреА рдЕрдирджреЗрдЦреА рдХрд░рддреЗ рд╣реБрдП рдХрд┐ рдорд╛рдирдХреЛрдВ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╕рдордп рдмрд╛рджрд▓ рдорд╛рдирддреЗ рд╣реИрдВ, рдЖрдк рдПрдХ рдмрд╣реБрдд рд╣реА рдЕрд╕рд╛рдорд╛рдиреНрдп рдФрд░ рд╕реБрдВрджрд░ рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рд╕рдм рдЖрд╡реЗрджрди рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tf/nz/bz/tfnzbzvd2oucw2h_oed9pbm_8ku.png"></div><br><h2>  рдПрдХреАрдХрд░рдг </h2><br>  рдкреГрдереНрд╡реА рдХрд╛ рд╡рд╛рдпреБрдордВрдбрд▓ рджреЛ рдкрд░рддреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рд╣реИ: рдЖрдВрддрд░рд┐рдХ рдФрд░ рдмрд╛рд╣рд░реА, рдЬрд┐рд╕рдХреЗ рдмреАрдЪ рдореЗрдВ рдмрд╛рджрд▓ рд╕реНрдерд┐рдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрди рдкрд░рддреЛрдВ рдХреЛ рдЧреЛрд▓реЗ рджреНрд╡рд╛рд░рд╛, рдмрд▓реНрдХрд┐ рд╡рд┐рдорд╛рдиреЛрдВ рджреНрд╡рд╛рд░рд╛ рднреА рджрд░реНрд╢рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдореИрдВ рдЖрдВрдЪрд▓ рдкрд░ рдмрд╕ рдЧрдпрд╛ред  рдкрд╣рд▓реА рдкрд░рдд рдХреЗ рд▓рд┐рдП, рдореИрдВрдиреЗ 6415 рдХрд┐рдореА рдХреЗ рдХреНрд╖реЗрддреНрд░ рдХреЛ рд▓рд┐рдпрд╛, рджреВрд╕рд░реА рдкрд░рдд рдХреЗ рд▓рд┐рдП, 6435 рдХрд┐рдореА рдХреА рддреНрд░рд┐рдЬреНрдпрд╛ред  рдкреГрдереНрд╡реА рдХреА рддреНрд░рд┐рдЬреНрдпрд╛ 6400 рдХрд┐рдореА рддрдХ рдлреИрд▓реА рд╣реБрдИ рд╣реИред  рдХреБрдЫ рдкреИрд░рд╛рдореАрдЯрд░ рд╡рд╛рдпреБрдордВрдбрд▓ рдХреЗ "рдмрд╛рджрд▓" рднрд╛рдЧ (20 рдХрд┐рдореА) рдХреА рд╕рд╢рд░реНрдд рдореЛрдЯрд╛рдИ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░реЗрдВрдЧреЗред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0z/ir/8r/0zir8r9qtvwlh9xk85i-hznhqa0.png"></div><br><br>  рдЖрдХрд╛рд╢ рдХреЗ рд╡рд┐рдкрд░реАрдд, рдмрд╛рджрд▓ рдЕрдкрд╛рд░рджрд░реНрд╢реА рд╣реЛрддреЗ рд╣реИрдВ, рдФрд░ рдПрдХреАрдХрд░рдг рдХреЗ рд▓рд┐рдП рди рдХреЗрд╡рд▓ рд░рдВрдЧ рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдмрд▓реНрдХрд┐ рдЕрд▓реНрдлрд╛ рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рдореВрд▓реНрдп рднреА рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ рд╣реЛрддрд╛ рд╣реИред  рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ рдЬреЛ рдмрд╛рджрд▓ рдХреЗ рдХреБрд▓ рдШрдирддреНрд╡ рдХреЛ рд▓реМрдЯрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕реВрд░реНрдп рд╕реЗ рдкреНрд░рдХрд╛рд╢ рдХреА рдПрдХ рдХрд┐рд░рдг рдЧреБрдЬрд░рддреА рд╣реИред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5k/ne/lj/5kneljw4unaofsxxgbq12ealebw.png"></div><br>  рдХреЛрдИ рднреА рдЗрд╕ рдУрд░ рдзреНрдпрд╛рди рдЖрдХрд░реНрд╖рд┐рдд рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЕрднреНрдпрд╛рд╕ рд╕реЗ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдмреАрдо рдХреЗ рдкреВрд░реЗ рдорд╛рд░реНрдЧ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрдирд╛ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ, рдХреЗрд╡рд▓ рд╕рдмрд╕реЗ рдЪрд░рдо рдЕрдВрддрд░рд╛рд▓ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдПрдХ рдЦрдВрдбрд┐рдд рдЦрдВрдб рдХреЗ рдКрдкрд░ рдмрд╛рджрд▓ рдмрд┐рд▓реНрдХреБрд▓ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИрдВред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ed/sr/ly/edsrlyis3-2or1nztj6q-osmats.png"></div><br>  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╣рдо рдШрдирддреНрд╡ рдирдореВрдиреЗ рдХреА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдмрд╣реБрдд рд╕реАрдорд┐рдд рд╣реИрдВ рдЬреЛ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдорд╛рд░реЗ рдмрд┐рдирд╛ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдЧреБрд░рд┐рд▓реНрд▓рд╛ рдЦреЗрд▓ 6. рдХрд░рддреЗ рд╣реИрдВред рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдкреНрд░рд╕реНрддреБрддрд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рдореЗрдВ, рдбреЗрд╡рд▓рдкрд░ рдиреЗ рдХрд╣рд╛ рдХрд┐ рд╡реЗ рдЗрди рдирдореВрдиреЛрдВ рдХреЛ рд╢рдВрдХреБ рдХреЗ рдЕрдВрджрд░ рдмрд┐рдЦреЗрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЕрдВрддрд┐рдо рдирдореВрдирд╛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЬрд┐рддрдирд╛ рд╕рдВрднрд╡ рд╣реЛ рдЙрддрдирд╛ рдмрд╛рдХреА рдЬрдЧрд╣ рд╕реЗ рдмрд╣реБрдд рджреВрд░ рдмрдирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рдЕрд╢реБрджреНрдзрд┐ рдФрд░ рд╢реЛрд░ рдЕрднреА рднреА рдкрдбрд╝реЛрд╕реА рдирдореВрдиреЛрдВ рдХреА рдкреГрд╖реНрдарднреВрдорд┐ рдХреЗ рдЦрд┐рд▓рд╛рдл рд╕реБрдЪрд╛рд░реВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдпрд╣, рдЗрд╕рдХреЗ рд╡рд┐рдкрд░реАрдд, рдмрдврд╝реА рд╣реБрдИ рд╕рдЯреАрдХрддрд╛ рдореЗрдВ рдмрджрд▓ рдЬрд╛рдПрдЧрд╛ред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5p/rr/df/5prrdfocofvzsjobvawnairijp0.png"></div><br>  рдЕрдВрдд рдореЗрдВ, рдореИрдВ 4 рдирдореВрдиреЛрдВ рдкрд░ рдмрд╕ рдЧрдпрд╛, рдЬреЛ рдПрдХ рд╣реА рдкрдВрдХреНрддрд┐ рдореЗрдВ рдЭреВрда рдмреЛрд▓рддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдмрд╛рдж рд╡рд╛рд▓реЗ рдХреЛ 6 рдЧреБрдирд╛ рдмрдврд╝рд╛рдХрд░ рдПрдХ рдХрджрдо рдХреЗ рд╕рд╛рде рд▓рд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдЪрд░рдг рдХрд╛ рдЖрдХрд╛рд░ 20 рдХрд┐рдореА * 0.01 рд╣реИ, рдЬреЛ 200 рдореАрдЯрд░ рд╣реИред <br><br>  рд╕рдорд╛рд░реЛрд╣ рдмрд╣реБрдд рд╕рд░рд▓ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cloudSampleDirectDensity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 position, vec3 sunDir)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   float avrStep=(6435.0-6415.0)*0.01; float sumDensity=0.0; for(int i=0;i&lt;4;i++) { float step=avrStep; //      6 if(i==3) step=step*6.0; //  position+=sunDir*step; //  ,  ,   //  float density=cloudSampleDensity(position)*step; sumDensity+=density; } return sumDensity; }</span></span></code> </pre> <br>  рдЕрдм рдЖрдк рдЕрдзрд┐рдХ рдХрдард┐рди рднрд╛рдЧ рдкрд░ рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред  рд╣рдо рдмрд┐рдВрджреБ {0, 6400,0} рдкрд░ рдкреГрдереНрд╡реА рдХреА рд╕рддрд╣ рдкрд░ рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЕрд╡рд▓реЛрдХрди рдмреАрдо рдХреЗ рдЪреМрд░рд╛рд╣реЗ рдХреЛ рддреНрд░рд┐рдЬреНрдпрд╛ 6415 рдХрд┐рдореА рдФрд░ рдХреЗрдВрджреНрд░ {0,0,0} рдХреЗ рдЧреЛрд▓реЗ рдХреЗ рд╕рд╛рде рджреЗрдЦрддреЗ рд╣реИрдВ - рд╣рдо рд╢реБрд░реБрдЖрддреА рдмрд┐рдВрджреБ рдПрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/25/je/zj/25jezjeea4j3bl51jneypfjetsi.png"></div><br>  рдиреАрдЪреЗ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдореВрд▓ рд╕рдВрд╕реНрдХрд░рдг рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">vec4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mainMarching</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 viewDir, vec3 sunDir)</span></span></span><span class="hljs-function"> </span></span>{ vec3 position; crossRaySphereOutFar(vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">6400.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>), viewDir, vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>), <span class="hljs-number"><span class="hljs-number">6415.0</span></span>, position); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> avrStep=(<span class="hljs-number"><span class="hljs-number">6435.0</span></span><span class="hljs-number"><span class="hljs-number">-6415.0</span></span>)/<span class="hljs-number"><span class="hljs-number">64.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">128</span></span>;i++) { position+=viewDir*step; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(length(position)&gt;<span class="hljs-number"><span class="hljs-number">6435.0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vec4(<span class="hljs-number"><span class="hljs-number">0.0</span></span>); }</code> </pre> <br>  рдЪрд░рдг рдХрд╛ рдЖрдХрд╛рд░ 20 рдХрд┐рдореА / 64 рдХреЗ рд░реВрдк рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдкрд░реНрдпрд╡реЗрдХреНрд╖рдХ рдХреЗ рдмреАрдо рдХреА рд╕рдЦреНрддреА рд╕реЗ рдКрд░реНрдзреНрд╡рд╛рдзрд░ рджрд┐рд╢рд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо 64 рдирдореВрдиреЗ рдмрдирд╛рдПрдВрдЧреЗред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЬрдм рдпрд╣ рджрд┐рд╢рд╛ рдЕрдзрд┐рдХ рдХреНрд╖реИрддрд┐рдЬ рд╣реЛрдЧреА, рддреЛ рдирдореВрдиреЗ рдереЛрдбрд╝реЗ рдмрдбрд╝реЗ рд╣реЛрдВрдЧреЗ, рдЗрд╕рд▓рд┐рдП рдЪрдХреНрд░ рдореЗрдВ 64 рдЪрд░рдг рдирд╣реАрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдорд╛рд░реНрдЬрд┐рди рдХреЗ рд╕рд╛рде 128 рд╣реИрдВред <br><br>  рд╢реБрд░реБрдЖрдд рдореЗрдВ, рд╣рдо рдорд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдЕрдВрддрд┐рдо рд░рдВрдЧ рдХрд╛рд▓рд╛ рд╣реИ, рдФрд░ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдПрдХрддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдЪрд░рдг рдХреЗ рд╕рд╛рде, рд╣рдо рд░рдВрдЧ рдореВрд▓реНрдп рдмрдврд╝рд╛рдПрдВрдЧреЗ рдФрд░ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдореВрд▓реНрдп рдХрдо рдХрд░реЗрдВрдЧреЗред  рдпрджрд┐ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ 0 рдХреЗ рдХрд░реАрдм рд╣реИ, рддреЛ рдЖрдк рд▓реВрдк рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="cpp hljs">vec3 color=vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> transmittance=<span class="hljs-number"><span class="hljs-number">1.0</span></span>; тАж <span class="hljs-comment"><span class="hljs-comment">//    //      float density=cloudSampleDensity(position)*avrStep; //   ,   //   float sunDensity=cloudSampleDirectDensity(position, sunDir); //      float m2=exp(-ufmProperties.attenuation*sunDensity); float m3=ufmProperties.attenuation2*density; float light=ufmProperties.sunIntensity*m2*m3; //       color+=sunColor*light*transmittance; transmittance*=exp(-ufmProperties.attenuation*density); тАж return vec4(color, 1.0-transmittance);</span></span></code> </pre> <br>  ufmProperties.attenuation - рдЗрд╕рдореЗрдВ C рдХреЗ рдЕрд▓рд╛рд╡рд╛ рдХреБрдЫ рднреА рдирд╣реАрдВ рд╣реИ <img src="https://habrastorage.org/getpro/habr/post_images/610/ddb/ee8/610ddbee8d80f847b44fa75c9a136489.svg">  рдФрд░ ufmProperties.attenuation2 C рдореЗрдВ рд╣реИ <img src="https://habrastorage.org/getpro/habr/post_images/cd1/8c2/405/cd18c240521dcfb71084a340a504e41f.svg">  ред  ufmProperties.sunInt рдШрдирддреНрд╡ - рд╕реВрд░реНрдп рдХреА рд╡рд┐рдХрд┐рд░рдг рддреАрд╡реНрд░рддрд╛ред  sunColor - рд╕реВрд░рдЬ рдХрд╛ рд░рдВрдЧред <br><br>  рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vc/ft/z9/vcftz9vsswkxpqoggirezpfpygm.png"></div><br>  рдПрдХ рджреЛрд╖ рддреБрд░рдВрдд рд╕реНрдкрд╖реНрдЯ рд╣реИ - рдЧрдВрднреАрд░ рдЫрд╛рдпрд╛рдВрдХрдиред  рд▓реЗрдХрд┐рди рдЕрдм рд╣рдо рд╕реВрд░рдЬ рдХреЗ рдкрд╛рд╕ рдкреНрд░рд╡рд░реНрдзрд┐рдд рдкреНрд░рдХрд╛рд╢ рдХреА рдХрдореА рдХреЛ рдареАрдХ рдХрд░реЗрдВрдЧреЗред  рдпрд╣ рдЗрд╕рд▓рд┐рдП рд╣реБрдЖ рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рдПрдХ рдлреЗрдЬ рдлрдВрдХреНрд╢рди рдирд╣реАрдВ рдЬреЛрдбрд╝рд╛ рдерд╛ред  рдмрд╛рджрд▓реЛрдВ рд╕реЗ рдЧреБрдЬрд░рдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рдХрд╛рд╢ рдХреЗ рдкреНрд░рдХреАрд░реНрдгрди рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣реЗрдВрдЧрд┐-рдЧреНрд░реАрдирд╕реНрдЯреАрди рдХреЗ рдЪрд░рдг-рд╕рдорд╛рд░реЛрд╣ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬрд┐рд╕рдиреЗ рдЗрд╕реЗ 1941 рдореЗрдВ рдЕрдВрддрд░рд┐рдХреНрд╖ рдореЗрдВ рдЧреИрд╕ рд╕рдореВрд╣реЛрдВ рдореЗрдВ рд╕рдорд╛рди рдЧрдгрдирд╛ рдХреЗ рд▓рд┐рдП рдЦреЛрд▓рд╛ рдерд╛: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4b0/b2e/33f/4b0b2e33fbd07036b14317d40cb1eac0.svg"></div><br>  рдпрд╣рд╛рдВ рдПрдХ рд╡рд┐рд╖рдпрд╛рдВрддрд░ рдмрдирд╛рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╡рд┐рд╣рд┐рдд рдкреНрд░рдХрд╛рд╢ рдореЙрдбрд▓ рдХреЗ рдЕрдиреБрд╕рд╛рд░, рдЪрд░рдг рдлрд╝рдВрдХреНрд╢рди рдПрдХ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдкреНрд░рд╛рдкреНрдд рдкрд░рд┐рдгрд╛рдо рдХрд┐рд╕реА рдХреЛ рднреА рд╕реВрдЯ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ рдФрд░ рд╣рд░ рдХреЛрдИ рджреЛ рдЪрд░рдг рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдПрдХ рд╡рд┐рд╢реЗрд╖ рддрд░реАрдХреЗ рд╕реЗ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдореИрдВрдиреЗ рджреЛ рдЪрд░рдг рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдкрд░ рднреА рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд┐рдпрд╛, рд▓реЗрдХрд┐рди рдореИрдВ рдХреЗрд╡рд▓ рдЙрдирдХреЗ рдореВрд▓реНрдпреЛрдВ рдХреЛ рдЬреЛрдбрд╝рддрд╛ рд╣реВрдВред  рдкрд╣рд▓реЗ рдЪрд░рдг рдХреЗ рдХрд╛рд░реНрдп рдореЗрдВ 1 рдХреЗ рдХрд░реАрдм рдЬреА рд╣реИ рдФрд░ рдЖрдкрдХреЛ рд╕реВрд░рдЬ рдХреЗ рдкрд╛рд╕ рдЙрдЬреНрдЬреНрд╡рд▓ рдкреНрд░рдХрд╛рд╢ рд╡реНрдпрд╡рд╕реНрдерд╛ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рджреВрд╕рд░реЗ рдЪрд░рдг рдХреЗ рд╕рдорд╛рд░реЛрд╣ рдореЗрдВ 0.5 рдХреЗ рдХрд░реАрдм рдЬреА рд╣реИ рдФрд░ рдЖрдкрдХреЛ рдЖрдХрд╛рд╢реАрдп рдХреНрд╖реЗрддреНрд░ рдореЗрдВ рд░реЛрд╢рдиреА рдореЗрдВ рдХреНрд░рдорд┐рдХ рдХрдореА рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><br>  рдЕрдкрдбреЗрдЯреЗрдб рдХреЛрдб: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// cos(theta) float mu=max(0, dot(viewDir, sunDir)); float m11=ufmProperties.phaseInfluence*cloudPhaseFunction(mu, ufmProperties.eccentrisy); float m12=ufmProperties.phaseInfluence2*cloudPhaseFunction(mu, ufmProperties.eccentrisy2); float m2=exp(-ufmProperties.attenuation*sunDensity); float m3=ufmProperties.attenuation2*density; float light=ufmProperties.sunIntensity*(m11+m12)*m2*m3;</span></span></code> </pre> <br>  ufmProperties.eccentrisy, ufmProperties.eccentrisy2 рдЬреА рдорд╛рди рд╣реИрдВ <br><br>  рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ip/qr/fi/ipqrfivyafyxnmdswnn_nbpvfdk.png"></div><br>  рдЕрдм рдЖрдк рдмрд╣реБрдд рдЕрдзрд┐рдХ рдЫрд╛рдпрд╛рдВрдХрди рдХреЗ рд╕рд╛рде рд▓рдбрд╝рд╛рдИ рд╢реБрд░реВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдпрд╣ рдореМрдЬреВрдж рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╣рдордиреЗ рдЖрд╕рдкрд╛рд╕ рдХреЗ рдмрд╛рджрд▓реЛрдВ рдФрд░ рдЖрдХрд╛рд╢ рд╕реЗ рдкреНрд░рдХрд╛рд╢ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рдирд╣реАрдВ рд░рдЦрд╛, рдЬреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЬреАрд╡рди рдореЗрдВ рд╣реИред <br><br>  рдореИрдВрдиреЗ рдЗрд╕ рд╕рдорд╕реНрдпрд╛ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╣рд▓ рдХрд┐рдпрд╛: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vec4(color+ambientColor*ufmProperties.ambient, <span class="hljs-number"><span class="hljs-number">1.0</span></span>-transmittance);</code> </pre> <br>  рдЬрд╣рд╛рдБ рдПрдВрдмрд┐рдПрдВрдЯрдХреЛрд▓рд░ рдЕрд╡рд▓реЛрдХрди рдмреАрдо рдХреА рджрд┐рд╢рд╛ рдореЗрдВ рдЖрдХрд╛рд╢ рдХрд╛ рд░рдВрдЧ рд╣реИ, ufmProperties.ambient рдЯреНрдпреВрдирд┐рдВрдЧ рдкреИрд░рд╛рдореАрдЯрд░ рд╣реИред <br><br>  рдкрд░рд┐рдгрд╛рдо: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ct/8h/ji/ct8hjiyk7brz5pv8vuwjeji33bc.png"></div><br>  рдпрд╣ рдЕрдВрддрд┐рдо рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдиреА рд╣реБрдИ рд╣реИред  рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдЬреАрд╡рди рдореЗрдВ, рдЬрд┐рддрдирд╛ рдЕрдзрд┐рдХ рдХреНрд╖реИрддрд┐рдЬ рджреГрд╢реНрдп рд╣реЛрддрд╛ рд╣реИ, рдЙрддрдирд╛ рд╣реА рд╣рдо рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рдХреЛрд╣рд░реЗ рдпрд╛ рдзреБрдВрдз рдХреЛ рджреЗрдЦрддреЗ рд╣реИрдВ рдЬреЛ рд╣рдореЗрдВ рдмрд╣реБрдд рджреВрд░ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХреЛ рджреЗрдЦрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред  рдпрд╣ рднреА рдХреЛрдб рдореЗрдВ рдкрд░рд┐рд▓рдХреНрд╖рд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рдореИрдВрдиреЗ рдЯрдХрдЯрдХреА рдХреЛрдг рдХреЗ рд╕рд╛рдорд╛рдиреНрдп рдХреЛрд╕рд╛рдЗрди рдФрд░ рдШрд╛рддреАрдп рдлрд╝рдВрдХреНрд╢рди рдХреЛ рд▓рд┐рдпрд╛ред  рдЗрд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдореНрдорд┐рд╢реНрд░рдг рдЧреБрдгрд╛рдВрдХ рдХреА рдЧрдгрдирд╛ рдХреА рдЬрд╛рддреА рд╣реИ, рдЬреЛ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рд░рдВрдЧ рдФрд░ рдкреГрд╖реНрдарднреВрдорд┐ рд░рдВрдЧ рдХреЗ рдмреАрдЪ рд░реИрдЦрд┐рдХ рдкреНрд░рдХреНрд╖реЗрдк рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> blending=<span class="hljs-number"><span class="hljs-number">1.0</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">exp</span></span>(-max(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, dot(viewDir, vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>,<span class="hljs-number"><span class="hljs-number">1.0</span></span>,<span class="hljs-number"><span class="hljs-number">0.0</span></span>)))*ufmProperties.fog); blending=blending*blending*blending; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vec4(mix(ambientColor, color+ambientColor*ufmProperties.ambient, blending), <span class="hljs-number"><span class="hljs-number">1.0</span></span>-transmittance);</code> </pre> <br>  ufmProperties.fog - рдореИрдиреБрдЕрд▓ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдПред <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/02/td/9h/02td9ho6kelgum68wldvcf-zymu.png"></div><br>  рд╕рд╛рд░рд╛рдВрд╢ рд╕рдорд╛рд░реЛрд╣: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">vec4 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mainMarching</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 viewDir, vec3 sunDir, vec3 sunColor, vec3 ambientColor)</span></span></span><span class="hljs-function"> </span></span>{ vec3 position; crossRaySphereOutFar(vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, <span class="hljs-number"><span class="hljs-number">6400.0</span></span>, <span class="hljs-number"><span class="hljs-number">0.0</span></span>), viewDir, vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>), <span class="hljs-number"><span class="hljs-number">6415.0</span></span>, position); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> avrStep=(<span class="hljs-number"><span class="hljs-number">6435.0</span></span><span class="hljs-number"><span class="hljs-number">-6415.0</span></span>)/<span class="hljs-number"><span class="hljs-number">64.0</span></span>; vec3 color=vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> transmittance=<span class="hljs-number"><span class="hljs-number">1.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">128</span></span>;i++) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> density=cloudSampleDensity(position)*avrStep; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(density&gt;<span class="hljs-number"><span class="hljs-number">0.0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> sunDensity=cloudSampleDirectDensity(position, sunDir); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> mu=max(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, dot(viewDir, sunDir)); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> m11=ufmProperties.phaseInfluence*cloudPhaseFunction(mu, ufmProperties.eccentrisy); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> m12=ufmProperties.phaseInfluence2*cloudPhaseFunction(mu, ufmProperties.eccentrisy2); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> m2=<span class="hljs-built_in"><span class="hljs-built_in">exp</span></span>(-ufmProperties.attenuation*sunDensity); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> m3=ufmProperties.attenuation2*density; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> light=ufmProperties.sunIntensity*(m11+m12)*m2*m3; color+=sunColor*light*transmittance; transmittance*=<span class="hljs-built_in"><span class="hljs-built_in">exp</span></span>(-ufmProperties.attenuation*density); } position+=viewDir*avrStep; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(transmittance&lt;<span class="hljs-number"><span class="hljs-number">0.05</span></span> || length(position)&gt;<span class="hljs-number"><span class="hljs-number">6435.0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> blending=<span class="hljs-number"><span class="hljs-number">1.0</span></span>-<span class="hljs-built_in"><span class="hljs-built_in">exp</span></span>(-max(<span class="hljs-number"><span class="hljs-number">0.0</span></span>, dot(viewDir, vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>,<span class="hljs-number"><span class="hljs-number">1.0</span></span>,<span class="hljs-number"><span class="hljs-number">0.0</span></span>)))*ufmProperties.fog); blending=blending*blending*blending; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> vec4(mix(ambientColor, color+ambientColor*ufmProperties.ambient, blending), <span class="hljs-number"><span class="hljs-number">1.0</span></span>-transmittance); }</code> </pre> <br>  рдбреЗрдореЛ рд╡реАрдбрд┐рдпреЛ: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/uPxVgbwThmI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2>  рдЕрдиреБрдХреВрд▓рди рдФрд░ рд╕рдВрднрд╡ рд╕реБрдзрд╛рд░ </h2><br>  рдмреБрдирд┐рдпрд╛рджреА рдкреНрд░рддрд┐рдкрд╛рджрди рдПрд▓реНрдЧреЛрд░рд┐рдереНрдо рдХреЛ рд▓рд╛рдЧреВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЕрдЧрд▓реА рд╕рдорд╕реНрдпрд╛ рдпрд╣ рд╣реИ рдХрд┐ рдпрд╣ рдмрд╣реБрдд рдзреАрд░реЗ-рдзреАрд░реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдореЗрд░реЗ рд╕рдВрд╕реНрдХрд░рдг рдиреЗ рд░реИрдбреЙрди рдЖрд░рдПрдХреНрд╕ 480 рдкрд░ рдкреВрд░реНрдг рдПрдЪрдбреА рдореЗрдВ 25 рдПрдлрдкреАрдПрд╕ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд┐рдпрд╛ред рд╕рдорд╕реНрдпрд╛ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рджреЛ рджреГрд╖реНрдЯрд┐рдХреЛрдгреЛрдВ рдХрд╛ рд╕реБрдЭрд╛рд╡ рдЦреБрдж рдЧреБрд░реЗрд░рд┐рдпрди рдЧреЗрдореНрд╕ рдиреЗ рджрд┐рдпрд╛ рдерд╛ред <br><br>  <b>рд╣рдо рдЖрдХрд░реНрд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрддрд╛ рд╣реИ</b> <br><br>  рд╕реНрдХреНрд░реАрди рдХреЛ 16x16 рдкрд┐рдХреНрд╕реЗрд▓ рдЖрдХрд╛рд░ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╕рд╛рдорд╛рдиреНрдп 3D рд╡рд╛рддрд╛рд╡рд░рдг рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдкрддрд╛ рдЪрд▓рд╛ рд╣реИ рдХрд┐ рдЕрдзрд┐рдХрд╛рдВрд╢ рдЖрдХрд╛рд╢ рдкрд╣рд╛рдбрд╝реЛрдВ рдпрд╛ рдмрдбрд╝реА рд╡рд╕реНрддреБрдУрдВ рджреНрд╡рд╛рд░рд╛ рдХрд╡рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рддрджрдиреБрд╕рд╛рд░, рдЖрдкрдХреЛ рдХреЗрд╡рд▓ рдЙрди рдЯрд╛рдЗрд▓реЛрдВ рдореЗрдВ рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдмрд╛рджрд▓ рдХрд┐рд╕реА рднреА рдЪреАрдЬ рд╕реЗ рдЕрд╡рд░реБрджреНрдз рдирд╣реАрдВ рд╣реЛрддреЗ рд╣реИрдВред <br><br>  <b>рдкреБрдирдГ рдкреНрд░рдХреНрд╖реЗрдкрдг</b> <br><br>  рдЬрдм рдХреИрдорд░рд╛ рд╕реНрдерд┐рд░ рд╣реЛрддрд╛ рд╣реИ, рддреЛ рдпрд╣ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рд╕рд╛рдорд╛рдиреНрдп рд░реВрдк рд╕реЗ рдмрд╛рджрд▓реЛрдВ рдХреЛ рдЕрдкрдбреЗрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЕрдЧрд░ рдХреИрдорд░рд╛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рд╣реЛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╣рдореЗрдВ рдкреВрд░реА рд╕реНрдХреНрд░реАрди рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╕рдм рдХреБрдЫ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рддреИрдпрд╛рд░ рд╣реИ, рдЖрдкрдХреЛ рдмрд╕ рдирдП рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЫрд╡рд┐ рдХреЛ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред  рд╡рд░реНрддрдорд╛рди рдФрд░ рдкрд┐рдЫрд▓реЗ рдлреНрд░реЗрдо рдХреЗ рдкреНрд░рдХреНрд╖реЗрдкрдг рдФрд░ рджреГрд╢реНрдп рдореИрдЯреНрд░рд┐рд╕реЗрд╕ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдирдП рд▓реЛрдЧреЛрдВ рдкрд░ рдкреБрд░рд╛рдиреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдЦреЛрдЬрдирд╛, рдкреНрд░рдХреНрд╖реЗрдкрдг рдХрд╣рд▓рд╛рддрд╛ рд╣реИред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдПрдХ рдХреИрдорд░рд╛ рд╢рд┐рдлреНрдЯ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╣рдо рдмрд╕ рдирдП рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рд░рдВрдЧреЛрдВ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рддреЗ рд╣реИрдВред  рдРрд╕реЗ рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЬрд╣рд╛рдВ рдпреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдСрдл-рд╕реНрдХреНрд░реАрди рдХреЛ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ, рдмрд╛рджрд▓реЛрдВ рдХреЛ рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ рдкреБрди: рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br><br>  <b>рдЖрдВрд╢рд┐рдХ рдЕрджреНрдпрддрди</b> <br><br>  рдореИрдВ рдкреБрдирд░реБрддреНрдерд╛рди рдХреЗ рд╡рд┐рдЪрд╛рд░ рдХреЛ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд░рддрд╛ рдХреНрдпреЛрдВрдХрд┐ рдХреИрдорд░рд╛ рдХреЗ рдПрдХ рддреАрд╡реНрд░ рдореЛрдбрд╝ рдХреЗ рд╕рд╛рде рдпрд╣ рдкрддрд╛ рдЪрд▓ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ рдмрд╛рджрд▓реЛрдВ рдХреЛ рд╕реНрдХреНрд░реАрди рдХреЗ рдПрдХ рддрд┐рд╣рд╛рдИ рдХреЗ рд▓рд┐рдП рдкреНрд░рджрд╛рди рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ рдЕрдВрддрд░рд╛рд▓ рдХрд╛ рдХрд╛рд░рдг рдмрди рд╕рдХрддрд╛ рд╣реИред  рдореБрдЭреЗ рдирд╣реАрдВ рдкрддрд╛ рдХрд┐ рдЧреБрд░рд┐рд▓реНрд▓рд╛ рдЦреЗрд▓ рдЗрд╕рд╕реЗ рдХреИрд╕реЗ рдирд┐рдкрдЯрддреЗ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдХрдо рд╕реЗ рдХрдо рдХреНрд╖рд┐рддрд┐рдЬ рд╢реВрдиреНрдп рдбреЙрди рдореЗрдВ, рдЬреЙрдпрд╕реНрдЯрд┐рдХ рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рддреЗ рд╕рдордп, рдХреИрдорд░рд╛ рдЖрд╕рд╛рдиреА рд╕реЗ рдЪрд▓рддрд╛ рд╣реИ рдФрд░ рддреЗрдЬ рдХреВрдж рдХреЗ рд╕рд╛рде рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдПрдХ рдкреНрд░рдпреЛрдЧ рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ рдЕрдкрдиреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдХреЗ рд╕рд╛рде рдЖрдпрд╛ред  рдмрд╛рджрд▓ рдПрдХ рдХреНрдпреВрдмрд┐рдХ рдирдХреНрд╢реЗ рдореЗрдВ, 5 рдЪреЗрд╣рд░реЗ рдореЗрдВ рдЦреАрдВрдЪреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐  рдиреАрдЪреЗ рд╣рдореЗрдВ рдХреЛрдИ рджрд┐рд▓рдЪрд╕реНрдкреА рдирд╣реАрдВ рд╣реИред<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрдпреВрдмрд┐рдХ рдореИрдк рдХреЗ рдХрд┐рдирд╛рд░реЗ рдкрд░ рд╕реНрдХреНрд░реАрди рдХреА рдКрдВрдЪрд╛рдИ рдХреЗ рдмрд░рд╛рдмрд░ рдХрдо рд░рд┐рдЬрд╝реЙрд▓реНрдпреВрд╢рди рд╣реЛрддрд╛ рд╣реИред рдХреНрдпреВрдмрд┐рдХ рдореИрдк рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдЪреЗрд╣рд░реЗ рдХреЛ 8x8 рдЯрд╛рдЗрд▓реЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдкреНрд░рддреНрдпреЗрдХ рдЪреЗрд╣рд░реЗ рдкрд░ рдкреНрд░рддреНрдпреЗрдХ рдлреНрд░реЗрдо рдкреНрд░рддреНрдпреЗрдХ рдЯрд╛рдЗрд▓ рдореЗрдВ рдХреЗрд╡рд▓ 64 рдкрд┐рдХреНрд╕реЗрд▓ рдХреЗ рд╕рд╛рде рдЕрджреНрдпрддрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдпрд╣ рдЕрдЪрд╛рдирдХ рдкрд░рд┐рд╡рд░реНрддрди рдХреЗ рджреМрд░рд╛рди рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рдХрд▓рд╛рдХреГрддрд┐рдпрд╛рдВ рджреЗрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрдпреЛрдВрдХрд┐ рдмрд╛рджрд▓ рдХрд╛рдлреА рд╕реНрдерд┐рд░ рд╣реИрдВ, рдлрд┐рд░ рдРрд╕реА рдЪрд╛рд▓ рдЕрджреГрд╢реНрдп рд╣реИред рдирддреАрдЬрддрди, рд░реИрдбреЙрди рдЖрд░рдПрдХреНрд╕ 480 рдЬреНрд╡рд╛рд▓рд╛рдореБрдЦреА рдХреЗ рд▓рд┐рдП рдкреВрд░реНрдг рдПрдЪрдбреА рдореЗрдВ 500 рдПрдлрдкреАрдПрд╕ рдФрд░ рдСрдкреЗрдВрдЧ рдХреЗ рд▓рд┐рдП 330 рдПрдлрдкреАрдПрд╕ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рддрд╛ рд╣реИред Radeon HD 5700 рд╢реНрд░реГрдВрдЦрд▓рд╛ opengl рдХреЗ рддрд╣рдд рдкреВрд░реНрдг рдПрдЪрдбреА рдореЗрдВ 109 рдПрдлрдкреАрдПрд╕ рдХрд╛ рдЙрддреНрдкрд╛рджрди рдХрд░рддреА рд╣реИ (рд╡рд▓реНрдХрди рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ)ред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдордЖрдИрдкреА рд╕реНрддрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЬрдм рд╢реЛрд░ рдХреЗ рд╕рд╛рде рдмрдирд╛рд╡рдЯ рддрдХ рдкрд╣реБрдВрдЪ рд╣реЛрддреА рд╣реИ, рддреЛ рдЖрдк рдХреЗрд╡рд▓ рдкрд╣рд▓реЗ рдирдореВрдиреЛрдВ рдореЗрдВ рд╢реВрдиреНрдп рдПрдордЖрдИрдкреА рд╕реНрддрд░ рд╕реЗ рдбреЗрдЯрд╛ рд▓реЗ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рд╣рдо рдЬрд┐рддрдиреЗ рдирдореВрдиреЗ рдмрдирд╛рддреЗ рд╣реИрдВ, рдЙрддрдирд╛ рдмрдбрд╝рд╛ рдПрдордЖрдИрдкреА рд╕реНрддрд░ рд▓рд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдКрдБрдЪреЗ рдмрд╛рджрд▓</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХреАрдХрд░рдг рдХреЗ рджреМрд░рд╛рди рдЧреБрд░рд┐рд▓реНрд▓рд╛ рдЦреЗрд▓реЛрдВ рдореЗрдВ рд╕рд┐рд░рд╕-рдКрдВрдЪрд╛рдИ рдФрд░ cirrocumulus рдмрд╛рджрд▓реЛрдВ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХрд╛ рдЕрдиреБрдХрд░рдг рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдирд╡реАрдирддрдо рдирдореВрдиреЗ 3D рдмрдирд╛рд╡рдЯ рд╕реЗ рдирд╣реАрдВ рдмрдирд╛рдП рдЬрд╛рддреЗ рд╣реИрдВ рдЬрд┐рдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдореИрдВрдиреЗ рдмрд╛рдд рдХреА рдереА, рд▓реЗрдХрд┐рди рдПрдХ рд╡рд┐рд╢реЗрд╖ 2D рдмрдирд╛рд╡рдЯ рд╕реЗред </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ud/f2/vj/udf2vjpfht0hhpbf9zptwfmadhg.jpeg"></div><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХрд░реНрд▓ рд╢реЛрд░ рдХрд░реНрд▓ рд╢реЛрд░ рдореЗрдВ</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдХрдИ рдЕрддрд┐рд░рд┐рдХреНрдд рдмрдирд╛рд╡рдЯ рд╣рд╡рд╛ рдмрд╣рдиреЗ рд╡рд╛рд▓реЗ рдмрд╛рджрд▓реЛрдВ рдХреЗ рдкреНрд░рднрд╛рд╡ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИрдВред </font><font style="vertical-align: inherit;">рдореВрд▓ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдмрдирд╛рд╡рдЯреЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/-n/qq/pg/-nqqpgmixyogyjxqrdyhm4oxlpc.png"></div><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рджрд┐рд╡реНрдп рдХрд┐рд░рдгреЗрдВ</font></font></b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qd/wq/xv/qdwqxvzveiwuxgu2v84aw5fhjwo.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдРрд╕реА рдХрд┐рд░рдгреЗрдВ, рдирд╛рдЯрдХ рдкрд░ рдкрдХрдбрд╝, рдкреЛрд╕реНрдЯрдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдореЗрдВ рдорд╣рд╕реВрд╕ рдХреА рдЬрд╛рддреА рд╣реИрдВред </font><font style="vertical-align: inherit;">рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╕реВрд░рдЬ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдПрдХ рдЙрдЬреНрдЬреНрд╡рд▓ рд░реЛрд╢рдиреА рдЦреАрдВрдЪреА рдЬрд╛рддреА рд╣реИ, рдЬрд╣рд╛рдВ рдпрд╣ рдмрд╛рджрд▓реЛрдВ рджреНрд╡рд╛рд░рд╛ рдЕрд╡рд░реБрджреНрдз рдирд╣реАрдВ рд╣реЛрддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдлрд┐рд░ рдЗрд╕ рдмреИрдХрд▓рд╛рдЗрдЯ рдХреЛ рд░реЗрдбрд┐рдпрд▓ рд░реВрдк рд╕реЗ рд╕реВрд░реНрдп рд╕реЗ рджреВрд░ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ap/vj/-a/apvj-assr02-vaov3o1k5frfawk.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрдм рдЖрдкрдХреЛ рд░реЗрдбрд┐рдпрд▓ рд╕реНрдореВрджреА рд▓рдЧрд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jd/lg/1h/jdlg1hp7jajzhlbom4ocmn3vl70.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдмрд╣реБрдд рдЕрдзрд┐рдХ рд╕реБрдзрд╛рд░ рдФрд░ рд╕реВрдХреНрд╖реНрдорддрд╛рдПрдВ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдореИрдВрдиреЗ рдЙрди рд╕рднреА рдХреА рдЬрд╛рдВрдЪ рдирд╣реАрдВ рдХреА рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЙрдирдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╡рд┐рд╢реНрд╡рд╛рд╕ рдХреЗ рд╕рд╛рде рдирд╣реАрдВ рдмрддрд╛ рд╕рдХрддрд╛ред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЖрдк рдЦреБрдж рдХреЛ рдЙрдирдХреЗ рд╕рд╛рде рдЦреБрдж рдХреЛ рдкрд░рд┐рдЪрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ рдХрд┐ рд╕рдмрд╕реЗ рдордЬрдмреВрдд рдлреНрд░реЙрд╕реНрдЯрдмрд╛рдЗрдЯ рдЗрдВрдЬрди рд╕реЗ рдХреНрд▓рд╛рдЙрдб рдкреНрд░рд▓реЗрдЦрди рд╣реИред</font></font><br><br><h2>  рдЙрдкрдпреЛрдЧреА рд▓рд┐рдВрдХ </h2><br> <b> Guerrilla Games</b> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">d1z4o56rleaq4j.cloudfront.net/downloads/assets/Nubis-Authoring-Realtime-Volumetric-Cloudscapes-with-the-Decima-Engine-Final.pdf?mtime=20170807141817</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">killzone.dl.playstation.net/killzone/horizonzerodawn/presentations/Siggraph15_Schneider_Real-Time_Volumetric_Cloudscapes_of_Horizon_Zero_Dawn.pdf</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">www.youtube.com/watch?v=-d8qT5-1LOI</a> <br><br> <b>  GPU Pro 7</b> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">vk.com/doc179245989_437393482?hash=a9af5f665eda4edf58&amp;dl=806d4dbdac0f7a761c</a> <br><br> <b></b> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">www.scratchapixel.com/lessons/procedural-generation-virtual-worlds/simulating-sky/simulating-colors-of-the-sky</a> <br><br> <b> Frostbite</b> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">media.contentapi.ea.com/content/dam/eacom/frostbite/files/s2016-pbs-frostbite-sky-clouds-new.pdf</a> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">www.shadertoy.com/view/XlBSRz</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi459948/">https://habr.com/ru/post/hi459948/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi459924/index.html">рдкреВрд░реНрдг рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдкрд░реАрдХреНрд╖рдг рдЪрдХреНрд░ред Auto.ru рд░рд┐рдкреЛрд░реНрдЯ</a></li>
<li><a href="../hi459928/index.html">рдореЛрдмрд╛рдЗрд▓ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╡рд┐рдХрд╛рд╕ рдХреЗ рд▓рд┐рдП рдЫрд╛рддреНрд░ рдХрд╛ рдорд╛рд░реНрдЧ</a></li>
<li><a href="../hi459930/index.html">рдкрд╛рдпрдерди рдЖрдпрд╛рдд рд╕реНрд╡рдЪрд╛рд▓рди</a></li>
<li><a href="../hi459934/index.html">рдореЛрдмрд╛рдЗрд▓ # 306 рдбреЗрд╡рд▓рдкрд░ рдХреЗ рд▓рд┐рдП рджрд┐рд▓рдЪрд╕реНрдк рд╕рд╛рдордЧреНрд░реА рдХрд╛ рдкрд╛рдЪрди (8 рдЬреБрд▓рд╛рдИ - 14 рдХреЛ)</a></li>
<li><a href="../hi459936/index.html">рд╡рд┐рдЬреБрдЕрд▓ рд╕реНрдЯреВрдбрд┐рдпреЛ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП 9 рдФрд░ рдЯреНрд░рд┐рдХреНрд╕</a></li>
<li><a href="../hi459952/index.html">рдмреИрдХрдЕрдк рдФрд░ рд╕реНрдЯреЛрд░реЗрдЬ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рдЕрдиреБрднрд╡</a></li>
<li><a href="../hi459954/index.html">рдХреНрд▓рд╛рдЙрдб рдЗрдиреНрдлреНрд░рд╛рд╕реНрдЯреНрд░рдХреНрдЪрд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реА рдлрдВрдб - рд╕рдмрд╕реЗ рдмрдбрд╝реА рдЖрдИрдЯреА рдХрдВрдкрдирд┐рдпреЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ, рдХреНрдпреВрд╕реАрдПрдл рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реБрдИ</a></li>
<li><a href="../hi459956/index.html">рджрдВрдд рдЪрд┐рдХрд┐рддреНрд╕рдХ рдХреЗ рдЕрд╕рд╛рдордпрд┐рдХ рджреМрд░реЗ рдХреЗ рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк рджрд╛рдВрддреЛрдВ рдХреА рдкреВрд░реНрдг рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВ рдкреНрд░рддреНрдпрд╛рд░реЛрдкрдг</a></li>
<li><a href="../hi459958/index.html">рд╣рд╛рдЗрдбреНрд░рд╛ рд╕рдореНрдореЗрд▓рди рд╕реЗ рдкрд╛рд░реНрд╕рд┐рдВрдЧ рдХрд╛рд░реНрдп - рд▓реЛрдб рдмреИрд▓реЗрдВрд╕рд┐рдВрдЧ рдФрд░ рдЗрди-рдореЗрдореЛрд░реА рд╕реНрдЯреЛрд░реЗрдЬ</a></li>
<li><a href="../hi459960/index.html">рд╡рд┐рдЪрд╛рд░ рд╕реЗ рд╡рд┐рдореЛрдЪрди рддрдХред рд╡рд┐рд╕реНрддреГрдд рдорд╛рд░реНрдХреЗрдЯ рдлреНрд░рдВрдЯреЗрдВрдб рдЕрдиреБрднрд╡</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>