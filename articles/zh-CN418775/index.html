<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚩 👨🏽‍🏫 ⛔️ 如何在DJI Mavic Air上移除和“粘贴”球形全景图 ☎️ ☁️ ⬅️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="随着Dji Mavic Air的发布，制作球形全景图的过程似乎已简化到极限-他按了一个按钮，球体就准备好了。 这就是广告所说的。 老实说，我已经预料到我们的整个球会在销售的头几个月内被射中，但是由于某种原因却没有发生。 


 Paul Oostveen摄 

 最有可能的原因有很多-内置软件非常原...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何在DJI Mavic Air上移除和“粘贴”球形全景图</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/coptertime/blog/418775/"> 随着Dji Mavic Air的发布，制作球形全景图的过程似乎已简化到极限-他按了一个按钮，球体就准备好了。 这就是广告所说的。 老实说，我已经预料到我们的整个球会在销售的头几个月内被射中，但是由于某种原因却没有发生。 <br><br><img src="https://habrastorage.org/webt/jx/h4/lo/jxh4lof5xrcketwjgopnrbsckgq.jpeg"><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Paul Oostveen摄</a></i> <br><a name="habracut"></a><br> 最有可能的原因有很多-内置软件非常原始，如果条件至少与理想情况略有不同，则内置的软件无法制作出像样的全景照片。 在多云的天气中，在水面之上或积雪之上，您可以在地面和其他“美人”身上看到一片大片的天空，嗯，我并不是在说成品jpeg文件的颜色中等，而且绝对没有分辨率。 还有一个问题是物体位于靠近摄像机的位置，例如，要去除球塔，球塔将在前景处，或者机器上的类似物体很可能无法工作。 原因是视差，即直升机在射击过程中的漂移（尽管<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Mavic Air</a> GPS的保持力非常好-十几厘米就足以进入嵌入式系统的木僵自动化）。 <br><br> 在广告中，全景分辨率为32mp，但是当我们以360度拍摄时，以及在分辨率为4K甚至更高的屏幕上到处拍摄时，全景分辨率是否足够？ 另外，固件不知道如何粘上天空，也不了解正确的颜色是什么，这是不可能的。 尽管直升机可以+15度射击，但仍不足以获得“屋顶”。 <br><br><img src="https://habrastorage.org/webt/ih/ov/wu/ihovwufh8nhz3r-d83_9sxaj6vs.png"><br><br> 但是，并非一切都那么糟糕。 如果您决心要获得好的全景-Mavic Air很有可能。 起初，我对25帧的标准拍摄有些怀疑，但是后来我得出结论，这已经足够了。 之前，使用荔枝在DJI Phantom¾或DJI Mavic Pro上拍摄时，我尝试拍摄32张至48张照片。 加号或减号。 我尝试使用荔枝，最初是由Mavic Air提供的25升，对我来说有点像，但没有明显增加。 在培训过程中，我开发了清晰的技术并优化了过程。 现在，对于一块不是很大的电池，我设法组成4-5个球体，并且进行色彩校正的粘合大约需要10-15分钟。 在出口处，我们有一幅全景图，分辨率高达177mp，具有良好的色彩，正常的天空和对所发生情况的完全控制。 <br><br> 那么，要取得好的结果需要什么呢？ <br><br><ul><li> 标准DJI GO 4软件并以DNG Raw格式保存照片 </li><li>  Adobe Lightroom </li><li>  PtGui Pro </li><li>  Adobe Photoshop ... 每个全景图10-20分钟 </li></ul><br> 首先，建议正确删除所有内容以减少处理时间。 当然，在日出/日落拍摄非常漂亮，但是由于太阳光线低和可能产生眩光，因此粘合可能会很困难。 您可以使用附加的遮光罩-这样可以简化工作，但是仍然会有镜框，使阳光直接照射到相机中。 对于第一个实验，请选择接近中午的时钟-然后太阳将无法进入框架。 避免靠近直升机的物体也是值得的。 选择等距对象的计划。 如果没有明显的纹理-湖泊/海洋/雪/沙，大空间很难结合在一起。 我建议关闭相机的自动曝光。 环顾四周，然后选择平均快门速度和光圈（对于DJI Phantom 4 Pro），请固定感光度（ISO）。 即使从某个方向曝光也不理想，从RAW转换时也可以在Lightroom中进行校正。 这比解决自动化错误容易得多，因为如果将相机对准太阳或底部是坚实的森林/水和相似的表面，则可能会发生自动化错误。 <br><br> 确保已打开保存原件。 设置完所有参数后，即可开始拍摄。 在此过程中，建议您监视设备删除的内容。 如果框架中有任何主要物体，则需要确保将其与整个框架一起拍摄，即，它不会落在2个框架的交界处并且离框架的边缘不太近。 尽管如此，如果发生这种情况-最好不要在测量结束时移动直升飞机，仅绕其轴线旋转并倾斜相机即可手动拍摄几帧物体-这样可以大大简化粘贴过程。 要获得美丽的全景，不必太高。 全景看起来很棒，您可以在里面潜入，您可以位于不高的位置，但可以位于拍摄对象之间，但是您需要确保直升飞机能够移除对象的上边界，以免模糊。 <br><br><img src="https://habrastorage.org/webt/r1/12/cu/r112cueigjsmwytgjbde7hggtmc.jpeg"><br>  <i>直升机过低的示例。</i>  <i>全景图与内置的DJI Mavic Air软件粘合在一起。</i>  <i>虽然，如果您采用源代码并将其与外部全景程序粘合在一起，则很有可能可以将其保存。</i> <br><br> 现在-接收到帧-我们继续进行处理。  DJI Go 4将所有来源保存在一个单独的文件夹“全景”中，将所需文件夹的内容复制到硬盘驱动器并将其放入Lightroom。 我们的任务是准备用于粘贴在PTGUI中的单个框架-为此，不仅要处理每个框架的曝光和颜色，而且还要使将来的全景图的所有部分在亮度和对比度上尽可能接近，这一点很重要。 <br><br><img src="https://habrastorage.org/webt/a0/z9/q1/a0z9q16uscbohtlohciwtafqggy.png"><br><br> 如果使用局部亮度校正-拔出任何物体-确保在所有存在的帧处都尽可能近。  PTGUI具有亮度均衡功能，但最好事先做到这一点。 此外，可以导出生成的材料（我建议使用Tiff，将LZW压缩为每通道8/16位，具体取决于您的PC的功率）。 <br><br><img src="https://habrastorage.org/webt/ei/za/h2/eizah2wfiaszg0f1mmbjclpvj1g.png"><br><br> 下一步将是直接组装全景图。 将文件上传到PTGUI PRO，然后单击“对齐图像”。 <br><br><img src="https://habrastorage.org/webt/un/ar/z2/unarz2i0cb4uwldz0rzi3yng_eu.png"><br><br> 系统分析数据并尝试按控制点比较帧。 <br><br> 在某些情况下（水/雪等），程序可能会在某些帧上显示有关不存在匹配项的消息-这意味着您将必须手动设置控制点。 <br><br> 如果不是这种情况，程序将为我们提供一个带有全景扫描的窗口，希望在此设置全景的中心-加载时将显示的位置-全景的脸部，也可以调整水平线。 <br><br><img src="https://habrastorage.org/webt/eh/iu/bh/ehiubhvol5md_hd68rj_kcl9hdk.png"><br><br> 接下来，我们可以打开全景图的预览，可以对其进行扭曲并预先评估结果。 <br><br><img src="https://habrastorage.org/webt/qu/rd/p5/qurdp5vci_el4jhywlvxccueusk.png"><br><br> 在这里您会注意到特别严重的问题，如果有的话，请转到控制点的编辑并尝试进行修复。 <br><br><img src="https://habrastorage.org/webt/yq/sx/4p/yqsx4pdng2errceagbvlie1liiq.png"><br><br> 如果没有特殊问题，则将最后一个选项卡-创建全景-设置为在Lightroom-Tiff中使用LZW压缩。 <br><br><img src="https://habrastorage.org/webt/tw/r3/91/twr391f4kmzgn6w0bxuomof3r04.png"><br><br> 下一步是在Photoshop中进行检查和最终安装。 我们会慢慢观察整个全景图的各个部分是否存在不一致之处-主要对象的视线和问题尤其突出。 好吧，如果关节上的物体没有特殊的质感。 <br><br><img src="https://habrastorage.org/webt/u0/sw/-5/u0sw-5hap33vcbepdtaj0unwits.png"><br><br> 在这里，所有工具都已经很好-首先我们尝试通过多边形选择的发散来进行分配，然后进行变换-失真和其他选项-我们自定义“删除”部分。 可以将选区的阴影设置得较小-1-2像素，有时最好完全保留尖锐的边缘，由于平移，我们通常使用图章或修复笔刷关闭结果区域。 <br><br><img src="https://habrastorage.org/webt/o0/ev/-u/o0ev-us8vs3jrgyfqr85fz4optw.png"><br><br> 当然，还有更复杂的情况-然后我们使用对象打开一个单独的文件，将其复制到新层，调整比例，删除多余的文件-我们得到了补丁。 在使用变形（尤其是木偶变形）的情况下，限制点且不要触摸全景图的边缘非常重要-否则它将不会粘在一起。 <br><br> 现在是时候给全景赋予效果和丰富性了。 现在，我们可以安全地扭曲色阶/曲线/颜色以获得所需的效果。 您可能需要使用躲闪/刻录工具，对单个对象进行处理-实际上，此刻，我们一直导出到Tiff，并容纳了巨大的文件。 <br><br><img src="https://habrastorage.org/webt/su/br/zr/subrzrgwexa9ypzhwz9sv5sidnw.png"><br><br> 最后，您需要拾起天空。 我已经积累了一定数量的储备金+在网络上发现了一些东西。 如果没有库存或没有保存的期权，只需将天空拉长到停靠点即可。 它不会很漂亮，但至少不是黑色的圆顶。 <br><br><img src="https://habrastorage.org/webt/xy/xy/xx/xyxyxxp0vsdvldheoauwfdrxxt0.png"><br><br> 我们插入天空对象，立即对其进行栅格化（如果在此之前您已经正确完成了天空全景，则不需要进行任何更改），然后制作蒙版，使用渐变从天空移动到我们的背景并使用曲线调整插入图层的亮度。 注意天空与全景的交汇处，有时甚至在使用遮罩和渐变色时也是如此-黑暗的物体可以照耀通过，并且您可以轻松地将半透明的山脉升至城市上方。 如果您需要擦除所有可疑的橡皮擦，最好慢慢关闭全景图图层。 <br><br><img src="https://habrastorage.org/webt/nt/nx/l_/ntnxl__-qsve95gnluixnfm2iko.png"><br><br> 可以做到的。 由于大多数服务（Sferika.ru或相同的Google Maps）不会错过体积太大的全景图，因此将功能“减少”胶合到一层中以减小体积，以防万一，保存Tiff，然后将图像缩小到长边下的10,000点。 -是的，并且不需要运送这么大的负载（对于4g的手机来说，通常无法承受）。 我们将工作结果保存为JPEG-质量足够10，输出的全景图为50兆像素，文件大小为10-15 mb（取决于细节）。 <br><br><img src="https://habrastorage.org/webt/ui/ea/vx/uieavxgqssxn5o-rgzc9c_ifpn4.png"><br><br> 我们的全景图已准备就绪-仅能找到发布服务。 <br><img src="https://habrastorage.org/webt/9w/pj/bx/9wpjbx-ml7dzugyjwm-11cdpp-q.png"><br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">这里准备好全景图</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN418775/">https://habr.com/ru/post/zh-CN418775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN418761/index.html">《纯Python。 专业人士编程的精妙之处»</a></li>
<li><a href="../zh-CN418763/index.html">中高级：如何摆脱沼泽？</a></li>
<li><a href="../zh-CN418765/index.html">Dadata提示可帮助您填写任何输入表格。 现在he愈</a></li>
<li><a href="../zh-CN418767/index.html">Adobe Flash的巨大游戏遗产以及我对其进行保存的尝试</a></li>
<li><a href="../zh-CN418769/index.html">计算IT系统的“可用性因子”的示例</a></li>
<li><a href="../zh-CN418777/index.html">“这里没有老板”：关于在Sberbank Technologies中使用开源和Apache Ignite</a></li>
<li><a href="../zh-CN418779/index.html">基于平板电脑的收银员：为什么网络零售商需要它（我们以收银员为例）</a></li>
<li><a href="../zh-CN418781/index.html">将电子邮件加密和电子签名添加到Zimbra</a></li>
<li><a href="../zh-CN418783/index.html">“昨天谁是垄断巨头，明天可能什么都不是。” 来自Biolink.Tech的Evgeny Chereshnev的访谈</a></li>
<li><a href="../zh-CN418785/index.html">朋友一切。 现在是正式的</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>