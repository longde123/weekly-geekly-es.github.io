<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßëüèª ü•ö üï∑Ô∏è [bookmark] 23 recomenda√ß√µes para proteger aplicativos Node.js. üë©üèª‚Äçü§ù‚Äçüë®üèæ ü§ôüèæ üë®üèº‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Atualmente, os servi√ßos da Web s√£o constantemente expostos a uma variedade de ataques. Portanto, a seguran√ßa √© algo a ser lembrado em todas as etapas ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[bookmark] 23 recomenda√ß√µes para proteger aplicativos Node.js.</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/419719/">  Atualmente, os servi√ßos da Web s√£o constantemente expostos a uma variedade de ataques.  Portanto, a seguran√ßa √© algo a ser lembrado em todas as etapas do ciclo de vida do projeto.  Os autores do material, cuja tradu√ß√£o publicamos hoje, mant√™m um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio</a> no GitHub contendo cerca de 80 recomenda√ß√µes para proteger aplicativos em execu√ß√£o na plataforma Node.js.  Este material, com base em muitas publica√ß√µes de seguran√ßa, possui mais de duas d√∫zias de recomenda√ß√µes sobre o Node.js e algumas dicas gerais.  Al√©m disso, este material cobre as 10 principais vulnerabilidades da lista do projeto OWASP. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/un/rv/yq/unrvyqhru9dijyht3zx9k9x4tlg.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">1. Use as regras para o linter, destinadas a verificar a seguran√ßa do c√≥digo</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Durante o desenvolvimento, use um plug-in orientado √† seguran√ßa para o linter, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-plugin-security</a> .  Isso permite que voc√™ identifique vulnerabilidades e problemas de seguran√ßa muito cedo - na hora de escrever o c√≥digo apropriado.  Essa abordagem ajuda a encontrar pontos fracos na seguran√ßa do programa.  Entre eles est√£o o uso do comando <code>eval</code> , a invoca√ß√£o de processos filhos, a importa√ß√£o de m√≥dulos com a transfer√™ncia para o comando correspondente de algo diferente de uma string literal (digamos, uma certa string formada com base nos dados transmitidos ao servidor pelo usu√°rio). <br><br>  ‚Üí <a href="">Aqui est√£o alguns</a> materiais √∫teis sobre regras de linter <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Adam Baldwin</a> diz o seguinte sobre o linting: ‚ÄúO Linter n√£o deve ser apenas uma ferramenta que segue meticulosamente as regras relativas ao n√∫mero de espa√ßos usados, ponto e v√≠rgula e o uso do comando eval.  O ESLint fornece ao desenvolvedor uma plataforma poderosa que pode detectar e eliminar uma ampla variedade de padr√µes potencialmente perigosos no c√≥digo.  Estamos falando, por exemplo, sobre express√µes regulares, sobre como verificar a entrada do usu√°rio e assim por diante.  Acredito que o linter oferece aos desenvolvedores preocupados com quest√µes de seguran√ßa uma nova e poderosa ferramenta que vale a pena prestar aten√ß√£o. ‚Äù <br><br><h3>  Poss√≠veis problemas </h3><br>  O que parece uma falha de seguran√ßa menor durante o desenvolvimento est√° se tornando uma s√©ria vulnerabilidade na produ√ß√£o.  Al√©m disso, se todos os desenvolvedores do projeto n√£o seguirem regras uniformes de seguran√ßa ao trabalhar com c√≥digo, isso poder√° levar a vulnerabilidades ou, por exemplo, √† penetra√ß√£o de dados confidenciais em reposit√≥rios p√∫blicos. <br><br><h2>  <font color="#3AC1EF">2. Limite o n√∫mero de solicita√ß√µes simult√¢neas do servidor</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/49a/a03/c6b49aa0355cb99de053d330a5305b15.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Os ataques de DoS s√£o muito populares entre os cibercriminosos e s√£o relativamente f√°ceis de realizar.  Voc√™ pode implementar um sistema para limitar o n√∫mero de solicita√ß√µes a um aplicativo usando um servi√ßo externo, como um balanceador de carga na nuvem, um firewall na nuvem, um servidor nginx ou, para aplicativos pequenos que n√£o s√£o cr√≠ticos, usando o middleware para limitar o n√∫mero de solicita√ß√µes, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">taxa expressa -limite</a> . <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre a implementa√ß√£o do sistema para limitar a frequ√™ncia de solicita√ß√µes ao servidor <br><br><h3>  Poss√≠veis problemas </h3><br>  Um aplicativo que n√£o fornece um sistema para limitar o n√∫mero de solicita√ß√µes simult√¢neas pode ser atacado, o que levar√° √† falha.  Isso √© expresso no fato de que os usu√°rios de um aplicativo t√™m dificuldade em trabalhar com ele ou n√£o conseguem interagir com ele. <br><br><h2>  <font color="#3AC1EF">3. Remova as informa√ß√µes confidenciais dos arquivos de configura√ß√£o ou criptografe-os</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Nunca armazene dados confidenciais em texto sem formata√ß√£o nos arquivos de configura√ß√£o ou no c√≥digo.  Em vez disso, use sistemas de gerenciamento de dados confidenciais, como produtos Vault ou sistemas Kubernetes / Docker Secrets, ou use vari√°veis ‚Äã‚Äãde ambiente para armazenar esses dados.  Os dados confidenciais armazenados no sistema de controle de vers√£o devem ser criptografados, medidas devem ser tomadas para armazenamento e uso seguros.  Entre essas medidas est√£o o uso de chaves din√¢micas, o uso de datas de expira√ß√£o de senha, auditorias de seguran√ßa e assim por diante.  Use sistemas para verificar o c√≥digo antes de confirmar ou antes de envi√°-lo ao reposit√≥rio para impedir o envio acidental de dados confidenciais ao reposit√≥rio p√∫blico. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre o gerenciamento de dados confidenciais <br><br><h3>  Poss√≠veis problemas </h3><br>  Mesmo se o c√≥digo for armazenado em um reposit√≥rio fechado, um dia, por engano, ele poder√° se tornar dispon√≠vel ao p√∫blico.  Neste ponto, todos os dados confidenciais armazenados nele se tornar√£o de dom√≠nio p√∫blico.  Como resultado, o acesso de terceiros ao reposit√≥rio com o c√≥digo inadvertidamente far√° com que eles obtenham acesso aos sistemas associados a ele (bancos de dados, APIs, servi√ßos e assim por diante). <br><br><h2>  <font color="#3AC1EF">4. Evite vulnerabilidades de inje√ß√£o de c√≥digo</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Para evitar inje√ß√µes de SQL / NoSQL e outros ataques similares, sempre use as bibliotecas ORM / ODM ou mecanismos DBMS para limpeza de dados ou suporte a consultas parametrizadas nomeadas ou indexadas e verifique o que est√° vindo do usu√°rio.  Nunca use, para incorporar certos valores nos textos de consulta, apenas sequ√™ncias JavaScript de modelo ou concatena√ß√£o de sequ√™ncias, pois essa abordagem abre seu aplicativo para uma ampla variedade de vulnerabilidades.  Todas as bibliotecas respeit√°veis ‚Äã‚Äãdo Node.js usadas para trabalhar com dados (por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Sequelize</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Knex</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">mangusto</a> ) cont√™m prote√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">interna</a> contra ataques <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">injetando</a> c√≥digo. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre preven√ß√£o de inje√ß√£o usando bibliotecas ORM / ODM <br><br><h3>  Poss√≠veis problemas </h3><br>  O uso de dados n√£o verificados e n√£o limpos, recebidos do usu√°rio em consultas, pode levar a um ataque ao introduzir um operador ao trabalhar com um banco de dados NoSQL, como o MongoDB.  Se voc√™ n√£o usar um sistema de limpeza de dados ou uma biblioteca ORM ao trabalhar com um banco de dados SQL, isso levar√° √† possibilidade de um ataque por inje√ß√£o SQL, o que cria uma enorme falha de seguran√ßa no aplicativo. <br><br><h2>  <font color="#3AC1EF">5. Evite ataques DoS definindo explicitamente as condi√ß√µes para o t√©rmino anormal do processo</font> </h2><br><h3>  Recomenda√ß√µes </h3><br>  O processo do n√≥ falha quando ocorre um erro n√£o tratado.  Por√©m, em muitas recomenda√ß√µes que refletem as pr√°ticas recomendadas para o N√≥, √© recomend√°vel que os processos sejam finalizados mesmo quando um erro foi interceptado e processado.  Express, por exemplo, falhar√° quando ocorrer algum erro ass√≠ncrono - a menos que as rotas sejam agrupadas em express√µes de <code>catch</code> .  Esse fato oferece aos atacantes uma oportunidade muito atraente.  Eles, tendo descoberto que quando uma certa solicita√ß√£o chega, o processo falha, come√ßam a enviar exatamente essas solicita√ß√µes para ele.  N√£o h√° recomenda√ß√£o que resolva esse problema de uma s√≥ vez; no entanto, alguns truques podem atenu√°-lo.  Portanto, no final do processo devido a um erro n√£o tratado, voc√™ precisa notificar o administrador, dando a essa notifica√ß√£o a maior prioridade de import√¢ncia.  √â necess√°rio verificar o que ocorre com o processo nas solicita√ß√µes e evitar situa√ß√µes de encerramento anormal do processo devido a solicita√ß√µes que, acidental ou intencionalmente, s√£o formadas incorretamente.  Todas as rotas devem ser agrupadas em express√µes de <code>catch</code> e o sistema deve ser configurado para que, se a causa do erro for uma solicita√ß√£o, o processo n√£o travar (ao contr√°rio do que acontece no n√≠vel do aplicativo global). <br><br><h3>  Poss√≠veis problemas </h3><br>  Vamos analisar a seguinte situa√ß√£o.  Existem muitos aplicativos Node.js.  O que acontece se come√ßarmos a enviar solicita√ß√µes POST com JSON vazio como o corpo da solicita√ß√£o?  Isso far√° com que muitos desses aplicativos falhem. <br><br>  Agora, se desempenharmos o papel de cibercriminosos, para impedir que os aplicativos falhem, seria suficiente continuar enviando solicita√ß√µes semelhantes. <br><br><h2>  <font color="#3AC1EF">6. Configure os cabe√ßalhos de resposta HTTP para aumentar a seguran√ßa do projeto</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Um aplicativo deve usar cabe√ßalhos HTTP orientados √† seguran√ßa para impedir que os invasores recorram a t√©cnicas comuns de ataque como XSS (cross-site scripting), clickjacking e outros.  √â f√°cil personalizar os cabe√ßalhos usando m√≥dulos especiais, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">capacete</a> . <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre o uso de cabe√ßalhos seguros <br><br><h3>  Poss√≠veis problemas </h3><br>  Se n√£o forem usados ‚Äã‚Äãcabe√ßalhos HTTP seguros, os invasores poder√£o realizar ataques aos usu√°rios de seus aplicativos, o que gera enormes vulnerabilidades. <br><br><h2>  <font color="#3AC1EF">7. Verifique cont√≠nua e automaticamente seus projetos quanto ao uso de depend√™ncias vulner√°veis.</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/810/c93/fcf/810c93fcf88a0b68e15d345fccc1b597.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  No ecossistema NPM, projetos com muitas depend√™ncias s√£o muito comuns.  As depend√™ncias devem sempre ser controladas, dada a descoberta de novas vulnerabilidades.  Use ferramentas como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">auditoria npm</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">nsp</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">snyk</a> para detectar, monitorar e corrigir depend√™ncias vulner√°veis.  Incorpore essas ferramentas ao seu sistema de integra√ß√£o cont√≠nua.  Isso permitir√° que voc√™ detecte depend√™ncias vulner√°veis ‚Äã‚Äãantes que elas entrem em produ√ß√£o. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre seguran√ßa de depend√™ncia do projeto <br><br><h3>  Poss√≠veis problemas </h3><br>  Um invasor pode determinar a estrutura da web usada no projeto e executar ataques a todas as vulnerabilidades conhecidas. <br><br><h2>  <font color="#3AC1EF">8. Tente n√£o usar o m√≥dulo criptogr√°fico padr√£o Node.js. para processamento de senha, use Bcrypt</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  As senhas ou outros dados confidenciais (chaves de API, por exemplo) devem ser armazenados processando-os com fun√ß√µes criptogr√°ficas usando "salt", como Bcrypt.  Vale a pena usar exatamente algo semelhante, e n√£o o m√≥dulo <code>crypto</code> padr√£o do Node.js. por raz√µes de seguran√ßa e desempenho. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre o Bcrypt <br><br><h3>  Poss√≠veis problemas </h3><br>  As senhas ou alguns dados confidenciais armazenados sem a aplica√ß√£o de medidas apropriadas para proteg√™-los s√£o vulner√°veis ‚Äã‚Äãa ataques de for√ßa bruta e ataques de dicion√°rio, que, como resultado, levam √† divulga√ß√£o desses dados. <br><br><h2>  <font color="#3AC1EF">9. Use sistemas de escape de caracteres em dados HTML, JS e CSS enviados ao usu√°rio</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b7/846/638/0b7846638c9f820198235d61d8a2d0f0.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Se alguns dados s√£o enviados para o navegador do usu√°rio a partir de uma fonte n√£o confi√°vel, mesmo que devam ser exibidos simplesmente, esses dados podem ser um c√≥digo que pode ser executado.  Isso geralmente √© chamado de script entre sites (XSS).  Voc√™ pode reduzir o risco de tais ataques serem poss√≠veis usando bibliotecas especiais que processam dados para que n√£o possam ser executados.  Isso √© chamado de codifica√ß√£o ou prote√ß√£o de dados. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre a prote√ß√£o da sa√≠da <br><br><h3>  Poss√≠veis problemas </h3><br>  Se voc√™ n√£o se importa com a prote√ß√£o de dados, um invasor pode, por exemplo, salvar c√≥digo JavaScript malicioso no banco de dados, que pode ser transmitido aos clientes inalterados e iniciados. <br><br><h2>  <font color="#3AC1EF">10. Verifique os dados JSON que chegam ao servidor</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d5/56d/a15/9d556da155eb3922f32262c33522f797.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Controle o conte√∫do dos corpos das solicita√ß√µes recebidas, verificando se elas correspondem ao que voc√™ espera ver em tais solicita√ß√µes.  Se a solicita√ß√£o n√£o parecer como o esperado, pare rapidamente de process√°-la.  Para evitar a opera√ß√£o demorada do c√≥digo de verifica√ß√£o de solicita√ß√£o de grava√ß√£o para cada rota, voc√™ pode usar ferramentas JSON leves para valida√ß√£o de dados, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jsonschema</a> ou <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">joi</a> . <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre a verifica√ß√£o de dados JSON recebidos <br><br><h3>  Poss√≠veis problemas </h3><br>  Se o servidor aceitar solicita√ß√µes cordialmente sem examin√°-las completamente, isso aumentar√° bastante a superf√≠cie de ataque do aplicativo e inspirar√° os invasores a tentar encontrar muitos deles que causam uma "falha" do sistema. <br><br><h2>  <font color="#3AC1EF">11. Manter tokens JWT na lista negra</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Ao usar tokens JWT (por exemplo, se voc√™ trabalha com <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Passport.js</a> ), por padr√£o, n√£o h√° mecanismo padr√£o para revogar privil√©gios de acesso ao sistema para tokens j√° emitidos.  Mesmo se voc√™ achar que um determinado usu√°rio est√° fazendo algo obviamente anormal, n√£o h√° como, atrav√©s do mecanismo do token, bloquear seu acesso ao sistema, desde que ele tenha um token v√°lido.  Esse problema pode ser atenuado com a implementa√ß√£o de uma lista negra de tokens n√£o confi√°veis, cuja valida√ß√£o √© realizada em cada solicita√ß√£o. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre os tokens JWT na lista negra <br><br><h3>  Poss√≠veis problemas </h3><br>  Tokens que caem nas m√£os erradas podem ser usados ‚Äã‚Äãpor um atacante.  Ele poder√° acessar o aplicativo e se passar por um usu√°rio comum - o propriet√°rio do token. <br><br><h2>  <font color="#3AC1EF">12. Limite o n√∫mero de tentativas de login</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ec/a61/33e/3eca6133e12b7d800906f8585532e9d2.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Em aplicativos baseados em express, para proteger contra ataques de for√ßa bruta e ataques de dicion√°rio, vale a pena usar o middleware apropriado, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">express-brute</a> .  Da mesma forma, voc√™ precisa proteger rotas cr√≠ticas como <code>/admin</code> ou <code>/login</code> .  A prote√ß√£o deve se basear na an√°lise das propriedades da consulta, como o nome de usu√°rio usado na consulta ou outros identificadores, como par√¢metros do corpo da consulta. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material para limitar o n√∫mero de tentativas de login <br><br><h3>  Poss√≠veis problemas </h3><br>  Se o aplicativo n√£o limitar o n√∫mero de tentativas de login, o invasor poder√° enviar automaticamente um n√∫mero ilimitado de solicita√ß√µes de login para o seu sistema, por exemplo, tentando obter acesso a uma conta privilegiada. <br><br><h2>  <font color="#3AC1EF">13. Execute o Node.js como um usu√°rio n√£o raiz</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4c0/dca/b4d/4c0dcab4d9a0d1fce8fcaf8b6abbdcce.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Um cen√°rio extremamente comum √© quando o Node.js √© executado como um usu√°rio root com privil√©gios ilimitados.  Por exemplo, √© assim que tudo √© configurado por padr√£o nos cont√™ineres do Docker.  √â recomend√°vel criar um usu√°rio que n√£o tenha privil√©gios de root e incorpor√°-lo √† imagem do Docker ou iniciar o processo em nome desse usu√°rio chamando o cont√™iner com o sinalizador <code>-u username</code> . <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre o lan√ßamento do Node.js como um usu√°rio n√£o raiz <br><br><h3>  Poss√≠veis problemas </h3><br>  Se o Node.js for executado na conta de usu√°rio raiz, um invasor que foi capaz de executar um script no servidor ter√° possibilidades ilimitadas na m√°quina local.  Digamos que ele possa alterar <code>iptable</code> configura√ß√µes do <code>iptable</code> e redirecionar o tr√°fego para seu pr√≥prio computador. <br><br><h2>  <font color="#3AC1EF">14. Limite a quantidade de dados transmitidos em solicita√ß√µes usando um servidor proxy reverso ou middleware</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9d5/56d/a15/9d556da155eb3922f32262c33522f797.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Quanto maior a quantidade de dados no corpo da solicita√ß√£o, mais dif√≠cil √© para um servidor de thread √∫nico processar tal solicita√ß√£o.  O uso de solicita√ß√µes grandes oferece ao invasor a oportunidade de inundar o servidor com trabalho desnecess√°rio sem enviar a ele um grande n√∫mero de solicita√ß√µes (ou seja, sem executar um ataque DoS / DDoS).  Voc√™ pode reduzir o risco de tais ataques limitando o tamanho dos corpos das solicita√ß√µes recebidas em um determinado sistema de borda (em um firewall ou em um balanceador de carga) ou configurando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">body-parser</a> express para receber apenas pacotes contendo uma pequena quantidade de dados. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre como limitar a quantidade de dados transmitidos nas solicita√ß√µes <br><br><h3>  Poss√≠veis problemas </h3><br>  Se voc√™ n√£o limitar a quantidade de dados transmitidos nas solicita√ß√µes, um invasor poder√° carregar o aplicativo processando solicita√ß√µes grandes.  No momento, ele n√£o poder√° resolver as tarefas para as quais foi projetado.  Isso leva a um desempenho ruim e torna o aplicativo vulner√°vel a ataques de DoS. <br><br><h2>  <font color="#3AC1EF">15. Evite usar a fun√ß√£o eval em JavaScript</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70a/580/560/70a580560fba67e09f87bdd6c5ecda04.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  A fun√ß√£o <code>eval</code> √© inv√°lida porque permite executar c√≥digo JS arbitr√°rio passado a ele durante a execu√ß√£o do programa.  Al√©m disso, est√° longe de ser apenas que esse c√≥digo possa retardar o aplicativo.  Essa fun√ß√£o representa um s√©rio risco √† seguran√ßa, pois o c√≥digo JS mal-intencionado enviado ao servidor por um invasor pode entrar nele. <br><br>  Al√©m disso, voc√™ deve evitar o <code>new Function</code> construtor <code>new Function</code> .  As fun√ß√µes <code>setTimeout</code> e <code>setInterval</code> nunca precisam passar o c√≥digo JS gerado dinamicamente. <br><br>  ‚Üí <a href="">Aqui est√£o as</a> coisas sobre eval <br><br><h3>  Poss√≠veis problemas </h3><br>  Se algu√©m encontrar uma maneira de transferir c√≥digo JS malicioso, na forma de texto, uma fun√ß√£o de avalia√ß√£o ou algum outro mecanismo JS semelhante, ele ter√° acesso total √† p√°gina, a tudo o que pode ser feito usando JavaScript.  Essa vulnerabilidade √© frequentemente associada a ataques XSS. <br><br><h2>  <font color="#3AC1EF">16. N√£o sobrecarregue aplicativos Node.js. de thread √∫nico com express√µes regulares maliciosas</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/49a/a03/c6b49aa0355cb99de053d330a5305b15.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  As express√µes regulares, embora convenientes, representam uma amea√ßa para aplicativos JavaScript em geral, e em particular para a plataforma Node.js.  Processar com express√£o regular o que veio do usu√°rio pode criar uma enorme carga no processador.  Por exemplo, o processamento de express√µes regulares pode ser t√£o ineficiente que a verifica√ß√£o de dez palavras pode bloquear o ciclo de eventos por v√°rios segundos e sobrecarregar o processador.  Portanto, √© melhor usar pacotes de terceiros para verificar os dados da string, como <a href="">validator.js</a> , em vez de escrever suas pr√≥prias express√µes regulares.  Voc√™ pode usar o pacote <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">safe-regex</a> para detectar padr√µes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">regex</a> vulner√°veis. <br><br>  ‚Üí <a href="">Aqui est√°</a> o material regex anti-malware <br><br><h3>  Poss√≠veis problemas </h3><br>  Express√µes regulares mal escritas podem estar sujeitas a um tipo especial de ataques DoS, durante os quais o loop de eventos √© completamente bloqueado.  Por exemplo, em novembro de 2017, foi descoberto que o pacote de <code>moment</code> popular estava vulner√°vel a esses ataques. <br><br><h2>  <font color="#3AC1EF">17. Evite carregar m√≥dulos usando vari√°veis</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  Recomenda√ß√µes </h3><br>  Evite importar arquivos cujo caminho seja especificado como par√¢metro, com base em considera√ß√µes segundo as quais esse par√¢metro pode ser definido com base nos dados do usu√°rio.  Essa regra pode ser expandida para incluir aqui e, em geral, acesso a arquivos (usando <code>fs.readFile()</code> ) e acesso a quaisquer outros recursos importantes usando par√¢metros recebidos do usu√°rio.  O uso de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">eslint-plugin-security</a> torna poss√≠vel detectar esses padr√µes inseguros muito cedo. <br><br>  ‚Üí <a href="">Aqui est√° o</a> material sobre o carregamento seguro do m√≥dulo <br><br><h3>  Poss√≠veis problemas </h3><br>  Os dados enviados ao servidor por um invasor podem estar nas configura√ß√µes respons√°veis ‚Äã‚Äãpela importa√ß√£o de certos arquivos, entre os quais um arquivo malicioso que foi carregado anteriormente no servidor.  Esses dados tamb√©m podem ser usados ‚Äã‚Äãpara acessar arquivos do sistema que j√° est√£o no computador. <br><br><h2> <font color="#3AC1EF">18.     </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/70a/580/560/70a580560fba67e09f87bdd6c5ecda04.png"></div><br><h3>  </h3><br>      ,        (,  ),  ¬´¬ª,         .    ,    ( <code>cluster.fork()</code> ),     npm-,   . <br><br> ‚Üí <a href=""></a>        <br><br><h3>   </h3><br>  ,   ,      .   ‚Äî  ,  ,    ,      . <br><br><h2> <font color="#3AC1EF">19.        </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f6/270/3ce/8f62703ce8563d57d7612400656de168.png"></div><br><h3>  </h3><br> ,   ,   .      ,     ,          ,       .      <code>child_process.execFile</code> , ,  ,    ,        ,  . <br><br> ‚Üí <a href=""></a>    ,       <br><br><h3>   </h3><br>                ,  ,    ,   ,   . <br><br><h2> <font color="#3AC1EF">20.      </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>    express,  ,    . ,   ,       ,    <code>Error</code> (    ).    , ,        ,      -  ,       . <br><br> ‚Üí <a href=""></a>         <br><br><h3>   </h3><br>  ,    , ,      ,            ,    ,      . <br><br><h2> <font color="#3AC1EF">21.     npm  Yarn</font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>     ,      -,      (MFA, multi-factor authentication).   npm  Yarn     ,      .  ,      ,       ,       .        ,      .   , ,  npm,                   . <br><br><h3>   </h3><br>  ,        ? <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>    eslint,     . <br><br><h2> <font color="#3AC1EF">22.   ,   </font> </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54e/d5d/a3b/54ed5da3b50b58f50b8b4150a3c2b258.png"></div><br><h3>  </h3><br>   -       .    ,      ‚Äî     ,   -  .   ,   ,      <code>X-Powered-By</code> ,          ,      .   ,        ( , , Node.js  express). <br><br> ‚Üí <a href=""></a>   -    <br><br><h3>   </h3><br> -     .  ,         ,  -,   ‚Äî    .            . <br><br><h2> <font color="#3AC1EF">23.     </font> </h2><br>           ,      .  ‚Äî  ,     Node.js. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>     ,     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="> OWASP</a> . <br><br><ul><li>      root-      . </li><li>        ( SSH-). </li><li>  ,      ,   ,   . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="></a>  OWASP,  . </li><li>       ,     .  ,      . <br></li><li>       OAuth, OpenID,   .     Basic Authentication. <br></li><li>    .      ,    (   ‚Äî       ),   X   ,  Y . <br></li><li>        ‚Äî     ,    ‚Äî   .     ,      . <br></li><li>    ,  ,    .             ( ‚Äî     GitHub, AWS, Jenkins,   ). <br></li></ul><br><h2>  <font color="#3AC1EF">Sum√°rio</font> </h2><br>      . ,        Node.js-. <br><br>  <b>Caros leitores!</b>       -,        ? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><img src="https://habrastorage.org/webt/ft/qm/bo/ftqmbopklpm88ixbi5vqyx2zcb8.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt419719/">https://habr.com/ru/post/pt419719/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt419707/index.html">Gamifica√ß√£o de aplicativos - 5 coisas para lembrar</a></li>
<li><a href="../pt419711/index.html">A primeira IT Bike Quest em S√£o Petersburgo. Como foi</a></li>
<li><a href="../pt419713/index.html">Mail.Ru Design Conference + Dribbble Meetup 2018</a></li>
<li><a href="../pt419715/index.html">Voc√™ n√£o sabe trabalhar com transa√ß√µes</a></li>
<li><a href="../pt419717/index.html">Projetando uma arquitetura de aplicativo incorporado</a></li>
<li><a href="../pt419721/index.html">Biomarcadores de envelhecimento. Fragilidade do painel. Parte 1</a></li>
<li><a href="../pt419725/index.html">Dardos, dados e moedas: algoritmos de distribui√ß√£o discreta</a></li>
<li><a href="../pt419727/index.html">Harbor - um registro para cont√™ineres Docker prontos para uso</a></li>
<li><a href="../pt419729/index.html">Evento de caridade ‚ÄúD√™ asas √†s crian√ßas‚Äù</a></li>
<li><a href="../pt419731/index.html">Mini-revis√£o da impressora 3D de fotopol√≠mero dent√°rio MoonRay S</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>