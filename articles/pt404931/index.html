<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üôç üí´ üßíüèø Como √© distribu√≠do o Petya? üÜï üåº üîù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Mais uma vez, brevemente sobre a mais recente epidemia 


- Se voc√™ estiver infectado, n√£o pague o resgate - o endere√ßo wowsmith123456@posteo.net est√°...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Como √© distribu√≠do o Petya?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/404931/"><h1 id="esche-raz-korotko-o-posledney-epidemii">  Mais uma vez, brevemente sobre a mais recente epidemia </h1><br><ul><li>  Se voc√™ estiver infectado, n√£o pague o resgate - o endere√ßo wowsmith123456@posteo.net est√° bloqueado pelo provedor, o que impossibilita a obten√ß√£o de uma chave para descriptografia.  <em>(sobre o que o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> j√° trata - aprox. por.)</em> </li><li>  A distribui√ß√£o ocorre em computadores com o sistema Windows mais recente no dom√≠nio. </li><li>  Criar um arquivo em C: \ Windows \ perfc bloqueia o vetor de ataque via WMIC. </li><li>  Se o CHKDSK aparecer na tela ap√≥s a reinicializa√ß√£o do computador, desligue-o imediatamente - neste momento, os arquivos s√£o criptografados. </li></ul><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/e12/10a/b89/e1210ab8950fcd75a15dcdaa250c90a0.png" alt="imagem"></p><br><p>  Assim como no caso do √∫ltimo ataque WannaCry, √© recomend√°vel instalar a atualiza√ß√£o do Microsoft <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MS17-010 o</a> mais r√°pido poss√≠vel.  Se, por algum motivo, for imposs√≠vel instalar um patch, √© recomend√°vel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">desativar o protocolo SMBv1</a> . </p><a name="habracut"></a><br><h1 id="rasprostranenie-virusa">  Propaga√ß√£o de v√≠rus </h1><br><p>  Petya e Mischa, diferentemente do WannaCry, s√£o distribu√≠dos na rede local (por padr√£o, um ambiente seguro).  Nos casos que estudamos, os mecanismos de distribui√ß√£o via Internet n√£o foram integrados. </p><br><p>  Depois de iniciar o ransomware, o computador infectado verifica a sub-rede local (/ 24) em busca de compartilhamentos de rede ADMIN $ para copiar o payloadu para outro computador e execut√°-lo usando o PsExec. </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/db4/ac2/98f/db4ac298f58767c3ceb47e8ac3764871.png" alt="imagem"></p><br><p>  A pr√≥xima etapa foi executar o comando WMIC (chamada de processo criar \ "C: \ Windows \ System32 \ rundll32.exe \\" C: \ Windows \ perfc.dat \) nos computadores encontrados.  Essa conex√£o foi obtida usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Mimikatz</a> . </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/6fb/c0b/770/6fbc0b770c724c08cb108f951590641e.png" alt="imagem"></p><br><p>  O m√©todo de distribui√ß√£o mais recente foi o uso da vulnerabilidade EternalBlue. </p><br><h1 id="kak-rabotaet-virus">  Como o v√≠rus funciona </h1><br><p>  O Ransomware examinou apenas unidades locais.  Unidades de rede e externas n√£o foram o alvo do ataque. </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/930/5ba/bb1/9305babb130104e37e717266bbb09294.png" alt="imagem"></p><br><p>  Arquivos com as seguintes extens√µes foram criptografados: </p><br><p>  <em>.3ds .7z .accdb .ai .asp .aspx .avhd .back .bak .c .cfg .conf .cpp .cs .ctl .dbf .disk .djvu .doc .docx .dwg .eml .fdb .gz .h .hdd .kdbx .mail .mdb .msg .nrg .ora .ost .ova .ovf .pdf .php .pmf .ppt .pptx .pst .pvi .py .pyc .rar .rtf .sln .sql .tar .vbox .vbs .vcb .vdi .vfd .vmc .vmdk .vmsd .vmx .vsdx .vsv .work .xls .xlsx .xvd .zip</em> </p><br><p>  N√£o houve altera√ß√µes significativas no mecanismo de reescrita do setor de inicializa√ß√£o da MBR em compara√ß√£o com a campanha do ano passado.  Ap√≥s a infec√ß√£o, os logs do sistema s√£o limpos (Configura√ß√£o, Sistema, Seguran√ßa, Aplicativo). </p><br><p>  O agendamento de tarefas tamb√©m adiciona um comando para reiniciar o computador <strong>uma hora ap√≥s a infec√ß√£o</strong> .  Petya tamb√©m usa o recurso n√£o documentado da fun√ß√£o WinAPI <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">NtRaiseHardError</a> para reiniciar a m√°quina. </p><br><p><img src="https://habrastorage.org/getpro/geektimes/post_images/037/ed9/71a/037ed971af5b8750037f4a0779668c3f.png" alt="imagem"></p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt404931/">https://habr.com/ru/post/pt404931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt404921/index.html">Instru√ß√µes para contornar o bloqueio do telegrama. Como ativar o SOCKS 5</a></li>
<li><a href="../pt404923/index.html">Como os registradores russos desenvolvem o AdvoCam</a></li>
<li><a href="../pt404925/index.html">Nvidia e ASUS desenvolveram placas de v√≠deo especializadas para minera√ß√£o de criptomoedas</a></li>
<li><a href="../pt404927/index.html">Carros el√©tricos e o "pico do petr√≥leo". Verdade no modelo - 3</a></li>
<li><a href="../pt404929/index.html">Atmotube e Air Quality Monitor experimentam diferentes concentra√ß√µes de CO2</a></li>
<li><a href="../pt404933/index.html">Programa interplanet√°rio SpaceX: uma an√°lise detalhada do motor de foguete Raptor</a></li>
<li><a href="../pt404937/index.html">PaySend: transfer√™ncias de dinheiro de cart√£o para cart√£o em todo o mundo por 49 rublos</a></li>
<li><a href="../pt404939/index.html">Seis regras para escolher um data center</a></li>
<li><a href="../pt404941/index.html">Como os entusiastas restauram fitas magn√©ticas usando torrefa√ß√£o</a></li>
<li><a href="../pt404943/index.html">Fraude de administradores de zona de dom√≠nio .Feedback</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>