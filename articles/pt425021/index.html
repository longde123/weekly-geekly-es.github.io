<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöó üßíüèø ü§µ Estamos procurando uma biblioteca universal r√°pida para trabalhar com arquivos gr√°ficos, entender o benchmark do Google üç£ ‚ôãÔ∏è ‚õπüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hoje em dia, quando as redes neurais exploram a expans√£o do Big Data, e a intelig√™ncia artificial est√° considerando se √© rent√°vel para ele receber um ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Estamos procurando uma biblioteca universal r√°pida para trabalhar com arquivos gr√°ficos, entender o benchmark do Google</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/intel/blog/425021/"><img src="https://habrastorage.org/webt/2_/2t/wx/2_2twxajpekzwruuxeno7ssg3l4.jpeg"><br><br>  Hoje em dia, quando as redes neurais exploram a expans√£o do Big Data, e a intelig√™ncia artificial est√° considerando se √© rent√°vel para ele receber um sal√°rio por seu trabalho no Bitcoin, a tarefa que encontrei na biblioteca multiplataforma aberta mais r√°pida para carregar, salvar e transcodificar arquivos gr√°ficos parecia um verdadeiro anacronismo .  Mas, de fato, essa tarefa √© mais relevante do que nunca - para todas as tecnologias de vis√£o computacional e aprendizado de m√°quina, √© necess√°rio fazer o download de gigabytes de imagens e, √†s vezes, os dados intermedi√°rios devem ser salvos como imagens.  Portanto, fazer isso da maneira mais r√°pida √© muito desej√°vel.  Neste artigo, encontraremos a biblioteca que procuramos e, o mais importante, lidaremos com um produto muito √∫til que simplifica bastante tarefas semelhantes e muitas outras - o Google Benchmark. <br><a name="habracut"></a><br>  Portanto, a declara√ß√£o exata do problema afirma: no aplicativo, os arquivos jpeg e tiff com profundidade de cor de 24 e 8 bits e bmp de 32 bits s√£o carregados na mem√≥ria.  Os tamanhos de imagem variam de pequeno (32x32 pixels) a grande, com uma resolu√ß√£o de 15K.  No processo, os arquivos s√£o modificados, ap√≥s o que precisam ser salvos no disco nos formatos especificados.  E isso deve ser feito por uma biblioteca de c√≥digo aberto de plataforma cruzada que tenha desempenho m√°ximo nos modernos processadores Intel, com suporte para instru√ß√µes de vetores AVX2.  A biblioteca tamb√©m suporta a biblioteca de formatos de textura compactada DirectX DXT1.  O <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Windows Imaging Component</a> √© considerado como refer√™ncia de desempenho - a estrutura padr√£o para trabalhar com imagens no Windows, ou seja, voc√™ precisa encontrar uma biblioteca que funcione em p√© de igualdade ou mais r√°pido que o WIC. <br><br>  Mas o requisito mais importante √© que seja necess√°ria uma solu√ß√£o agora, mas melhor ontem. <br><br><h2>  <font color="#0071c5">Conhe√ßa as bibliotecas para trabalhar com bmp, tiff, jpeg</font> </h2><br>  A solu√ß√£o come√ßa com uma etapa √≥bvia e descomplicada, embora n√£o muito r√°pida - um estudo completo do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">github</a> <s>Wikileaks</s> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">stackoverflow</a> e outro google em busca de candidatos adequados para o papel da biblioteca desejada.  Havia alguns deles: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>FreeImage</b></a> .  Uma concha sobre as famosas bibliotecas LibJPEG, LibPNG, LibTIFF.  O suporte ao DXT1 est√° presente atrav√©s do plug-in.  A desvantagem √© que a qualidade da economia de jpeg na API √© definida com muita discri√ß√£o - 100, 75,50 e 25%.  Para alterar esse par√¢metro, voc√™ precisar√° entender e editar o c√≥digo.  O projeto √© din√¢mico e em desenvolvimento - a vers√£o mais recente 3.18.0 foi lan√ßada em 31 de julho de 2018. A montagem no Windows √© trivial, todos os componentes s√£o criados automaticamente. </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>Cimg Este</b></a> √© um wrapper de arquivo de cabe√ßalho C ++ sobre um pacote de <s>artefato</s> antigo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">ImageMagick</a> .  O pacote requer uma instala√ß√£o de compila√ß√£o separada, tamb√©m √© poss√≠vel us√°-lo diretamente, ignorando o Cimg.  Possui muitas possibilidades para trabalhar com imagens: filtros, transforma√ß√µes, defini√ß√£o de morfologia, etc.  Suporta HDR, n√£o suporta DXT1. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>DevIL</b></a> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Biblioteca de imagens do desenvolvedor</a> ).  Uma biblioteca C muito simples no estilo OpenGL.  Ele cont√©m um shell sobre LibJPEG, LibPNG, LibTIFF, mas tamb√©m possui extensa funcionalidade interna, al√©m de suportar muitos formatos de imagem, incluindo DXT1.  Para montagem, usa o CMake.  A maioria das depend√™ncias, incluindo LibJPEG, LibPNG, LibTIFF, n√£o est√£o inclu√≠das no DevIL e devem ser baixadas e compiladas separadamente.  A atualiza√ß√£o mais recente do DevIL referente ao sistema de compila√ß√£o √© datada de 01/01/2017, e a anterior geralmente ocorreu em 2014, portanto, se houver poss√≠veis problemas com a biblioteca, pode haver problemas com sua solu√ß√£o. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>OpenImageIO</b></a> .  Est√° posicionado como uma ferramenta de desenvolvedor de software profissional para trabalhar com imagens.  Ele suporta, na forma de plug-ins, o trabalho com muitos formatos de foto ex√≥ticos e at√© v√≠deo.  O Build for Windows requer Boost e Qt 4. pr√©-compilados. N√£o existe uma vers√£o montada pronta para teste. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>Boost GIL</b></a> (Biblioteca de Imagens Gen√©ricas) Boost e pronto.  Embora nem todos.  Esta biblioteca tamb√©m cont√©m um wrapper sobre LibJPEG, LibPNG e LibTIFF. </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><b>SDL_image 2.0</b></a> Usado com a biblioteca SDL e, voc√™ vai rir, mas tamb√©m cont√©m um shell sobre LibJPEG, LibPNG e LibTIFF. </li></ul><br>  Todas as bibliotecas encontradas foram compiladas no Windows usando o n√≠vel m√°ximo de otimiza√ß√£o do compilador do Visual Studio e a op√ß√£o / arch: AVX2. <br><br>  O mesmo se aplica √†s bibliotecas LibJPEG, LibPNG e LibTIFF, para acelerar o trabalho retirado do novo pacote da <a href="">biblioteca OpenCV</a> . <br><br><h2>  <font color="#0071c5">Conhe√ßa o Google Benchmark</font> </h2><br>  A pr√≥xima etapa da solu√ß√£o tamb√©m √© √≥bvia - criar uma refer√™ncia para comparar o desempenho das bibliotecas encontradas e o uso da biblioteca de microbenchmarking do Google Benchmark, amplamente conhecida em c√≠rculos estreitos, torna tudo simples e r√°pido. <br>  O Google Benchmark pode medir com precis√£o o desempenho dos trechos de c√≥digo inseridos no corpo do ciclo C ++ 11. <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BM_foo1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(benchmark::State&amp; state)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     Init_your_code(); for (auto _ : state){ //  -  your_code_to_benchmark(); }</span></span></code> </pre> <br>  em fun√ß√µes registradas como refer√™ncia <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//       BENCHMARK(BM_foo1);</span></span></code> </pre><br>  E execute-os: <br><br><pre> <code class="cpp hljs">BENCHMARK_MAIN();</code> </pre> <br>  Em seguida, emita um relat√≥rio no formato especificado - sa√≠da do console, json, csv. <br><br>  O relat√≥rio conter√° dados no sistema de execu√ß√£o (processador, configura√ß√£o de cache), o tempo total operacional global de cada uma das fun√ß√µes medidas, bem como o tempo que eles levam no processador.  Esses tempos geralmente diferem - o primeiro, por exemplo, inclui um atraso de leitura / grava√ß√£o, e o segundo para os benchmarks multithread √© a soma do tempo de opera√ß√£o de todos os n√∫cleos. <br><br>  O √∫ltimo par√¢metro exibido pelo benchmark do Google √© o n√∫mero de itera√ß√µes executadas para a fun√ß√£o, necess√°rias para a corre√ß√£o precisa estatisticamente do tempo de opera√ß√£o.  O sistema seleciona voc√™ mesmo, automaticamente, fazendo medi√ß√µes preliminares. <br><br>  O que √© uma "medida precisa" do tempo de execu√ß√£o?  Voc√™ pode escrever disserta√ß√µes sobre esse t√≥pico, mas, neste caso, basta dizer que: <br><br><ul><li>  Por padr√£o, a medi√ß√£o est√° em clusters de processadores, ou seja, a ordem te√≥rica de precis√£o √© exatamente isso.  A sa√≠da padr√£o √© em nanossegundos; </li><li>  os resultados em todos os testes que vi s√£o muito est√°veis ‚Äã‚Äãde lan√ßamento para lan√ßamento; </li><li>  de acordo com meus dados de intelig√™ncia, o benchmark do Google √© usado e totalmente confi√°vel pelos seus resultados pelos desenvolvedores de software de computador a bordo de uma das maiores preocupa√ß√µes automotivas do mundo.  Ent√£o vamos acreditar. </li></ul><br>  A √∫nica coisa que vale a pena prestar aten√ß√£o: o benchmark do Google n√£o fornece "limpeza" do cache entre o in√≠cio das itera√ß√µes do benchmark.  Se necess√°rio, voc√™ deve cuidar disso. <br><br>  Mas o benchmark do Google pode fazer muitas outras coisas: <br><br><ul><li>  calcular a complexidade assint√≥tica do algoritmo (O); </li><li>  funcione corretamente com benchmarks multithread, medindo sua dura√ß√£o n√£o nos ticks do processador, mas no modo "tempo real" (rel√≥gio de parede); </li><li>  use sua pr√≥pria fun√ß√£o de medi√ß√£o de tempo "manual", que pode ser √∫til, por exemplo, ao medir o trabalho na GPU; </li><li>  definir automaticamente par√¢metros de refer√™ncia com diferentes conjuntos de argumentos para um determinado corpo da fun√ß√£o medida; </li><li>  mostrar o valor m√©dio, mediana e desvio padr√£o para v√°rias partidas do benchmark; </li><li>  Defina seus pr√≥prios contadores e tags que ser√£o refletidos no relat√≥rio de benchmark do Google. </li></ul><br>  O benchmark do Google √© baixado do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">reposit√≥rio github</a> , montado para a plataforma apropriada usando o Cmake (o assembly do Visual Studio est√° dispon√≠vel para Windows), a biblioteca resultante ser√° vinculada ao seu projeto (no caso do Windows, tamb√©m √© necess√°rio um link com a biblioteca shlwapi), o arquivo de cabe√ßalho do benchmark √© adicionado ao seu c√≥digo .h, ap√≥s o qual tudo funciona como descrito acima. <br><br>  Se n√£o funcionar, o √∫nico lugar, al√©m do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">site j√° indicado</a> , onde voc√™ pode obter pelo menos algumas informa√ß√µes e ajuda no benchmark do Google √© um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">f√≥rum especializado sobre produtos</a> . <br><br>  No nosso caso, tudo funcionou sem problemas.  Ap√≥s a comunica√ß√£o com os clientes, foram definidos quatro benchmarks, que s√£o carregados e salvos com um nome diferente: <br><br><ul><li>  Arquivo jpeg de 8 bits com uma resolu√ß√£o de 15k </li><li>  Arquivo jpeg de 24 bits com resolu√ß√£o de 15k </li><li>  Arquivo tiff de 24 bits com resolu√ß√£o de 15k </li><li>  Arquivo bmp de 32 bits com resolu√ß√£o de 32x32 </li></ul><br><h2>  <font color="#0071c5">Conhe√ßa os resultados</font> </h2><br>  Foi originalmente planejado que todas as bibliotecas encontradas, ou seja, FreeImage, Cimg, DevIL, OpenImageIO, Boost GIL e SDL_image 2.0, participariam da compara√ß√£o de testes com o Windows Imaging Component (WIC).  Mas as tr√™s √∫ltimas bibliotecas, dependendo de "monstros" como Boost e SDL, foram solicitadas pelos clientes a deixarem em reserva em caso de emerg√™ncia, se a biblioteca desejada n√£o for encontrada entre as tr√™s primeiras.  E, felizmente, ela foi encontrada.  Embora n√£o imediatamente. <br><br>  A seguir, um relat√≥rio gerado pelo benchmark do Google, que mostra que: <br><br><ul><li>  O FreeImage completamente com uma pontua√ß√£o esmagadora perde o WIC em todos os testes, portanto n√£o pode mais ser considerado. </li><li>  O Cimg perde o WIC de maneira limpa em todos os lugares, exceto no carregamento de tiff, onde √© um pouco (menos de 5%) mais r√°pido.  Infelizmente, ele tamb√©m ter√° que ser exclu√≠do.  Al√©m disso, isso se aplica ao uso direto do pacote ImageMagick. </li></ul><br>  Continua sendo a biblioteca DevIL.  Ele mostra excelentes resultados em casos de carregamento de bmp e tiff (3 e 2,8 vezes maior que o WIC!), Jpeg preto e branco (1,75x melhor que o WIC), mas diminui um pouco o carregamento de um jpeg de 24 bits normal - ele o faz 3 % mais lento que o WIC. <br><table><tbody><tr><td colspan="4"> <code>08/15/18 11:15:44 <br> Running c:\WIC\WIC_test\Release\WIC_test.exe <br> Run on (8 X 4008 MHz CPU s) <br> CPU Caches: <br> L1 Data 32K (x4) <br> L1 Instruction 32K (x4) <br> L2 Unified 262K (x4) <br> L3 Unified 8388K (x1)</code> </td> </tr><tr><td> <code>Benchmark</code> </td> <td> <code>Time</code> </td> <td> <code>CPU</code> </td> <td> <code>Iterations</code> </td> </tr><tr><td> <code><font color="#0000FF">BM_WIC8jpeg</font></code> </td> <td> <code><font color="#0000FF">72 ms</font></code> </td> <td> <code><font color="#0000FF">70 ms</font></code> </td> <td> <code><font color="#0000FF">11</font></code> </td> </tr><tr><td> <code>BM_cimg8jpeg</code> </td> <td> <code>562 ms</code> </td> <td> <code>52 ms</code> </td> <td> <code>10</code> </td> </tr><tr><td> <code>BM_FreeImage8jpeg</code> </td> <td> <code>147 ms</code> </td> <td> <code>144 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL8jpeg</font></code> </td> <td> <code><font color="#FF0000">41 ms</font></code> </td> <td> <code><font color="#FF0000">41 ms</font></code> </td> <td> <code><font color="#FF0000">17</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24jpeg</font></code> </td> <td> <code><font color="#0000FF">266 ms</font></code> </td> <td> <code><font color="#0000FF">260 ms</font></code> </td> <td> <code><font color="#0000FF">3</font></code> </td> </tr><tr><td> <code>BM_cimg24jpeg</code> </td> <td> <code>656 ms</code> </td> <td> <code>128 ms</code> </td> <td> <code>6</code> </td> </tr><tr><td> <code>BM_FreeImage24jpeg</code> </td> <td> <code>594 ms</code> </td> <td> <code>594 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24jpeg</font></code> </td> <td> <code><font color="#FF0000">276 ms</font></code> </td> <td> <code><font color="#FF0000">276 ms</font></code> </td> <td> <code><font color="#FF0000">3</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24tiff</font></code> </td> <td> <code><font color="#0000FF">844 ms</font></code> </td> <td> <code><font color="#0000FF">844 ms</font></code> </td> <td> <code><font color="#0000FF">1</font></code> </td> </tr><tr><td> <code>BM_cimg24tiff</code> </td> <td> <code>808 ms</code> </td> <td> <code>131 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code>BM_FreeImage24tiff</code> </td> <td> <code>953 ms</code> </td> <td> <code>938 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24tiff</font></code> </td> <td> <code><font color="#FF0000">305 ms</font></code> </td> <td> <code><font color="#FF0000">305 ms</font></code> </td> <td> <code><font color="#FF0000">2</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC32</font></code> </td> <td> <code><font color="#0000FF">3 ms</font></code> </td> <td> <code><font color="#0000FF">3 ms</font></code> </td> <td> <code><font color="#0000FF">236</font></code> </td> </tr><tr><td> <code>BM_cimg32</code> </td> <td> <code>71 ms</code> </td> <td> <code>7 ms</code> </td> <td> <code>90</code> </td> </tr><tr><td> <code>BM_FreeImage32</code> </td> <td> <code>6 ms</code> </td> <td> <code>5 ms</code> </td> <td> <code>112</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL32</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">747</font></code> </td> </tr></tbody></table>  Obviamente, o DevIL tamb√©m pode ser rejeitado nesta fase, mas aqui outra biblioteca aparece no quadro - <b>Libjpeg-turbo</b> . <br><br>  Sua sa√≠da pode ser facilmente recebida com aplausos - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Libjpeg-turbo</a> √© uma biblioteca de plataforma cruzada que implementa completamente a funcionalidade libjpeg (API) e adiciona sua pr√≥pria funcionalidade (por exemplo, trabalhando com buffers de 32 bits).  Ao mesmo tempo, para a arquitetura x86, o Libjpeg-turbo usa ativamente instru√ß√µes vetoriais (SSE2, AVX2) e, de acordo com seus criadores, √© 2-6 vezes mais r√°pido que o libjpeg (!) <br><br>  Portanto, o pr√≥ximo passo √© criar o DevIL com Libjpeg-turbo em vez de libjpeg.  O Libjpeg-turbo, com a ajuda do CMake, cria o Visual Studio sem problemas e, quase imediatamente (com a substitui√ß√£o do √∫nico #define, que determina a vers√£o do libjpeg no arquivo de cabe√ßalho do DevIL), ele come√ßa a trabalhar como parte do DevIL. <br><br>  Como resultado, o relat√≥rio de benchmark do Google se parece com o seguinte: <br><table><tbody><tr><td> <code>Benchmark</code> </td> <td> <code>Time</code> </td> <td> <code>CPU</code> </td> <td> <code>Iterations</code> </td> </tr><tr><td> <code><font color="#0000FF">BM_WIC8jpeg</font></code> </td> <td> <code><font color="#0000FF">72 ms</font></code> </td> <td> <code><font color="#0000FF">68 ms</font></code> </td> <td> <code><font color="#0000FF">9</font></code> </td> </tr><tr><td> <code>BM_cimg8jpeg</code> </td> <td> <code>565 ms</code> </td> <td> <code>39 ms</code> </td> <td> <code>10</code> </td> </tr><tr><td> <code>BM_FreeImage8jpeg</code> </td> <td> <code>148 ms</code> </td> <td> <code>141 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL8jpeg</font></code> </td> <td> <code><font color="#FF0000">31 ms</font></code> </td> <td> <code><font color="#FF0000">31 ms</font></code> </td> <td> <code><font color="#FF0000">24</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24jpeg</font></code> </td> <td> <code><font color="#0000FF">269 ms</font></code> </td> <td> <code><font color="#0000FF">266 ms</font></code> </td> <td> <code><font color="#0000FF">2</font></code> </td> </tr><tr><td> <code>BM_cimg24jpeg</code> </td> <td> <code>675 ms</code> </td> <td> <code>131 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code>BM_FreeImage24jpeg</code> </td> <td> <code>604 ms</code> </td> <td> <code>594 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24jpeg</font></code> </td> <td> <code><font color="#FF0000">149 ms</font></code> </td> <td> <code><font color="#FF0000">150 ms</font></code> </td> <td> <code><font color="#FF0000">5</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC24tiff</font></code> </td> <td> <code><font color="#0000FF">833 ms</font></code> </td> <td> <code><font color="#0000FF">828 ms</font></code> </td> <td> <code><font color="#0000FF">1</font></code> </td> </tr><tr><td> <code>BM_cimg24tiff</code> </td> <td> <code>785 ms</code> </td> <td> <code>138 ms</code> </td> <td> <code>5</code> </td> </tr><tr><td> <code>BM_FreeImage24tiff</code> </td> <td> <code>943 ms</code> </td> <td> <code>938 ms</code> </td> <td> <code>1</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL24tiff</font></code> </td> <td> <code><font color="#FF0000">318 ms</font></code> </td> <td> <code><font color="#FF0000">320 ms</font></code> </td> <td> <code><font color="#FF0000">2</font></code> </td> </tr><tr><td colspan="4"></td></tr><tr><td> <code><font color="#0000FF">BM_WIC32</font></code> </td> <td> <code><font color="#0000FF">4 ms</font></code> </td> <td> <code><font color="#0000FF">3 ms</font></code> </td> <td> <code><font color="#0000FF">236</font></code> </td> </tr><tr><td> <code>BM_cimg32</code> </td> <td> <code>74 ms</code> </td> <td> <code>8 ms</code> </td> <td> <code>56</code> </td> </tr><tr><td> <code>BM_FreeImage32</code> </td> <td> <code>6 ms</code> </td> <td> <code>5 ms</code> </td> <td> <code>100</code> </td> </tr><tr><td> <code><font color="#FF0000">BM_devIL32</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">1 ms</font></code> </td> <td> <code><font color="#FF0000">747</font></code> </td> </tr></tbody></table>  Obviamente, as melhorias de desempenho com jpeg nem sequer s√£o o dobro em compara√ß√£o com o libjpeg, mas deve ser assim - porque a superioridade da velocidade se aplica apenas √† codifica√ß√£o / decodifica√ß√£o de jpeg, e o teste inclui a sobrecarga de ler / gravar um arquivo. <br><br>  Mas pode-se ver que, em m√©dia, o DevIL √© mais r√°pido que o WIC no caso de jpeg de 8 bits <b>2,3</b> vezes, jpeg de 24 bits <b>1,8</b> vezes, tiff de 24 bits - <b>2,7</b> vezes, bmp de 32 bits - <b>3,5</b> vezes. <br><br>  O problema est√° resolvido.  Tr√™s dias √∫teis antes do feriado de ver√£o foram completamente gastos na decis√£o.  √â claro que, se houvesse um pouco mais, seria poss√≠vel que houvesse uma biblioteca com resultados ainda mais impressionantes, e se fosse muito mais, ent√£o talvez eu escrevesse a biblioteca que estava procurando por mim mesma. <br><br>  Mas mesmo o que √© impressionante.  Portanto, se voc√™ estiver procurando por uma biblioteca multiplataforma r√°pida e f√°cil para trabalhar com arquivos gr√°ficos em todos os sentidos, preste aten√ß√£o ao <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">DevIL</a> e, se precisar fazer medi√ß√µes comparativas do c√≥digo com rapidez e precis√£o, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o benchmark do Google est√°</a> ao seu dispor. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425021/">https://habr.com/ru/post/pt425021/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425007/index.html">Iridium e Jeff Bezos AWS se uniram para desenvolver projeto global de Internet via sat√©lite para a Internet das coisas</a></li>
<li><a href="../pt425009/index.html">Lisa Alert: volunt√°rios que salvam vidas</a></li>
<li><a href="../pt425011/index.html">Haiku R1 primeiro beta lan√ßado</a></li>
<li><a href="../pt425015/index.html">Venda sem bugs: seguran√ßa digital de plataformas de com√©rcio eletr√¥nico</a></li>
<li><a href="../pt425019/index.html">Voronezh, esperando por voc√™ (e n√£o apenas) + competi√ß√£o</a></li>
<li><a href="../pt425023/index.html">Traduzimos a receita para o idioma multicooker</a></li>
<li><a href="../pt425025/index.html">Testes de Golang fora de Gotour</a></li>
<li><a href="../pt425027/index.html">Desenvolvimento de shaders GLSL no Kotlin</a></li>
<li><a href="../pt425031/index.html">Mais pr√°tica! Vamos ensinar Spring Framework e cria√ß√£o de perfil sem nenhuma confer√™ncia</a></li>
<li><a href="../pt425033/index.html">Construindo um Jetpack: Relat√≥rio Anual da JetPack Aviation 2017</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>