<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçü§ù‚Äçüë©üèª üëπ üé• Android Go es el futuro bill√≥n de dispositivos y un l√≠mite de 50 MB. Conferencia de Yandex üëÉüèø üôçüèª üóª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nuevas direcciones para el desarrollo de una plataforma ya familiar: siempre es interesante. Por un lado, est√° expandiendo la base de clientes, por ot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Android Go es el futuro bill√≥n de dispositivos y un l√≠mite de 50 MB. Conferencia de Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/423493/">  Nuevas direcciones para el desarrollo de una plataforma ya familiar: siempre es interesante.  Por un lado, est√° expandiendo la base de clientes, por otro lado, no est√° invirtiendo en la creaci√≥n de software desde cero, sino que est√° utilizando los desarrollos existentes.  Pero si la direcci√≥n es realmente nueva, con sus propios detalles, entonces no ser√° posible manejarla con muy poca sangre.  En la pr√≥xima reuni√≥n de la comunidad Mosdroid en nuestra oficina, el desarrollador Arthur Vasilov <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Arturka</a> habl√≥ sobre la adaptaci√≥n de la aplicaci√≥n Yandex al sistema Android Go. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/VYcLRPoA4Bk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><blockquote>  En promedio, si no escribe una calculadora, un reloj despertador, etc., entonces est√° muy bien, bien hecho e hizo todo bien, o su aplicaci√≥n toma 150-170 megabytes. </blockquote><br><a name="habracut"></a>  - Mi nombre es Arthur, soy desarrollador de Android, estoy trabajando en la aplicaci√≥n Yandex.  Hoy compartir√© con ustedes una historia sobre c√≥mo nos adaptamos a Android Go.  Te dir√© qu√© tipo de rastrillo nos topamos, qu√© no funcion√≥ para nosotros y c√≥mo funciona todo, por qu√© es necesario. <br><br>  Una peque√±a digresi√≥n sobre de qu√© se trata.  Android Go es una versi√≥n especial de Android dise√±ada para dispositivos de bajo costo.  Cuestan entre 60 y 100 d√≥lares y, por lo tanto, son muy d√©biles, lentos y ralentizados.  Entonces Google decidi√≥ que crearan su propio sistema para que al menos de alguna manera funcionen normalmente.  Se anunci√≥ en Google I / O en 2017, es decir, han pasado un a√±o y varios meses.  Por lo tanto, cuando se anunci√≥ el mitap, se plante√≥ una pregunta l√≥gica: "¬øTodav√≠a est√°s vivo o qu√©?"  Entonces dije que todo est√° bien, todo est√° bien, lo dir√©.  Y ahora, como un h√©roe t√≠pico de Internet, responder√© ex post por qu√© sucedi√≥. <br><br><img src="https://habrastorage.org/webt/h2/qw/6g/h2qw6gttth_hx-niydwklvvcb8u.jpeg"><br>  ¬øQu√© pas√≥ exactamente?  Google dijo: "Estamos haciendo tal sistema".  Luego dijo: "Est√° bien, necesitamos tiempo para finalizar" y todo eso.  Despu√©s de eso, los proveedores siempre tienen alg√∫n tipo de retraso en la adaptaci√≥n de esta versi√≥n.  Y la nueva versi√≥n con nosotros ya se lanz√≥ no antes de un a√±o despu√©s, por lo que no hay nada sorprendente aqu√≠.  Adem√°s, ten√≠an que decidir si hacer algo as√≠: est√°n hablando de dispositivos baratos y no est√° claro si se beneficiar√°n de ellos o no.  Adem√°s, este dispositivo debe ser nuevo, debe hacerse, aprender a vender, comprender c√≥mo funcionar√°. <br><br>  El primer tel√©fono inteligente con Android Go apareci√≥ no hace mucho tiempo.  En alg√∫n momento de abril, probablemente comenzaron las ventas, o tal vez en mayo.  Este es Nokia 1, se vende en todas partes.  Estoy acostada por aqu√≠.  Ahora, en mi opini√≥n, solo hay nueve de esos tel√©fonos inteligentes en el mercado, pero para fin de a√±o prometen m√°s de cien.  Y, en principio, ninguno de los principales actores como Huawei, Samsung y otros han dicho su palabra, por lo que agregar√°n algo m√°s, no podr√°n mantenerse alejados de un mercado tan grande. <br><br>  Antes del informe, fui a la p√°gina de Android Go y vi que hicieron la Edici√≥n de Android Pie Go.  Pero no hicieron nada all√≠, simplemente redujeron la cantidad de aplicaciones instaladas y su peso por adelantado.  Dijeron: "Ahora tienes el doble de espacio libre".  Y las excusas est√°ndar: correcci√≥n de errores, mejora del rendimiento, todo.  Pero al menos llamaron, lo que significa que no olvidaron. <br><br>  ¬øCu√°les son las limitaciones de estos dispositivos, espec√≠ficamente?  En primer lugar, tienen 512 megabytes o 1 gigabyte de RAM, 8 o 16 gigabytes de almacenamiento.  Est√° claro que, en tales condiciones, est√°n extremadamente inhibidos y todas las aplicaciones normales en ellos funcionar√°n aproximadamente de la misma manera.  Para que las aplicaciones funcionen con una adecuaci√≥n m√≠nima, Google dijo: "Presentemos los siguientes requisitos".  Son bastante l√≥gicos, se deducen de lo que estaba en la diapositiva anterior. <br><br><img src="https://habrastorage.org/webt/ci/xm/ht/cixmhtwrdwbu_gkczbo0vk3-k8e.jpeg"><br><br>  En primer lugar, es un buen rendimiento abstracto.  Su aplicaci√≥n debe ejecutarse bien y r√°pidamente en dicho dispositivo.  Somos: "Genial.  Estamos trabajando ". <br><br>  Adem√°s, ya hay n√∫meros espec√≠ficos a los que debemos corresponder.  El espacio ocupado despu√©s de desempacar e instalar el APK no es m√°s de 40 megabytes.  A veces esto es un problema porque alguien y el APK pesa los 80 megabytes.  Doler√°  Adem√°s, esto no se puede tomar y medir adecuadamente.  Es decir, no puede decir: "S√© que mi APK pesa mucho, as√≠ que despu√©s de la instalaci√≥n la aplicaci√≥n tomar√° mucho".  Todo esto depende mucho del proveedor, la versi√≥n del dispositivo, Android, etc. Pero si su APK toma 10 megabytes, entonces, en principio, todo est√° bien y nunca exceder√° este n√∫mero. <br><br>  Y ahora el requisito m√°s divertido y divertido: la RAM consumida mientras se trabaja con la aplicaci√≥n no debe superar los 50 megabytes. <br><br>  ¬øQui√©n sabe cu√°nta RAM toma su aplicaci√≥n en promedio durante la operaci√≥n?  ¬øQui√©n se ha preguntado sobre este tema?  ¬øHay alguien con menos de 100 megabytes?  Guapo  Pero tal vez est√°s mintiendo.  En general, en promedio, si no escribe una calculadora, un reloj despertador, etc., entonces est√° muy bien, bien hecho e hizo todo bien, o su aplicaci√≥n toma 150-170 megabytes.  Ponerlo en 50 megabytes es muy dif√≠cil.  Por lo tanto, el resto del tiempo hablaremos sobre eso, discutiremos c√≥mo poner el globo en un b√∫ho, etc. <br><br><img src="https://habrastorage.org/webt/6k/el/g1/6kelg1qxjmzqgltficsia2dk1p0.jpeg"><br>  ¬øQu√© incluye nuestra conversaci√≥n de memoria?  Es directamente necesario comprender exactamente qu√© estamos midiendo, entonces cu√°l es la mejor manera de medirlo.  Tambi√©n para los dispositivos Android Go hay una especificidad que debe tenerse en cuenta, y tambi√©n hablaremos de ello.  Y tambi√©n le contar√© algunas cosas generales, consejos generales que quiz√°s no haya adivinado, pero que realmente pueden comer mucha memoria de usted. <br><br>  En 2018, despu√©s de que Google I / O pas√≥, debe comenzar la historia sobre la memoria con una referencia a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">este informe</a> .  ¬øQui√©n lo vio? <br><br>  Genial  Las 180 personas restantes saben qu√© hacer en el futuro cercano.  En mi opini√≥n, este es uno de los mejores informes en Google I / O.  Amigo dijo cosas incre√≠blemente geniales.  Lo cont√≥ todo en los estantes, bueno, y con muchos detalles profundos.  Aquellos que lo vieron y lo recuerdan bien probablemente notar√°n que copi√© algunas cosas de all√≠, porque de lo contrario es imposible, √©l lo cont√≥ todo, as√≠ que lo repetir√©. <br><br>  ¬øQu√© medimos?  Hab√≠a una cosa llamada PSS (Tama√±o de conjunto proporcional).  Es decir, la RAM en Android est√° representada por unos bloques de 40 kilobytes, y estos bloques pueden pertenecer por completo a la aplicaci√≥n o revolver entre procesos y aplicaciones. <br><br>  Y la pregunta es: ¬øc√≥mo entender exactamente con qu√© aplicaci√≥n relacionar esta memoria compartida?  Hay varios enfoques, son bastante l√≥gicos.  PSS dice que si la memoria no funciona entre N procesos, entonces asumiremos que su aplicaci√≥n posee 1 / N de esa memoria.  Y exactamente de la misma manera est√° el Tama√±o de conjunto residencial y el Tama√±o de conjunto √∫nico, que dice que "Ninguna de la memoria compartida me pertenece" y "Todo pertenece".  En principio, PSS es el m√°s l√≥gico aqu√≠. <br><br>  ¬øC√≥mo se puede medir exactamente la memoria consumida?  Todo es simple aqu√≠.  O es un generador de perfiles en Android Studio, o es dumpsys.  Existen, por supuesto, otras herramientas.  Pueden darle resultados m√°s detallados, algo m√°s complicado, pero el problema es que para comprender sus resultados, usarlos todo esto es muy, muy dif√≠cil.  A menudo necesita una ra√≠z o una compilaci√≥n personalizada de Android.  Y, en general, no los necesita, las dos primeras herramientas son suficientes. <br><br><img src="https://habrastorage.org/webt/0r/--/pr/0r--prgyak0-hltivshg-dxeuqc.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace desde la diapositiva</a></sup></sub> </h5><br>  No hablar√© sobre el generador de perfiles en Android Studio, creo que mucha gente lo us√≥.  Quien no ha usado, aseg√∫rese de meter.  En particular, proporcion√© el siguiente enlace: solo un buen art√≠culo de la documentaci√≥n con video, c√≥mo usarlo, con demostraciones.  Y, en principio, todo est√° claro.  Muestra d√≥nde va tu memoria, lo muestra en tiempo real.  Lo √∫nico que debe recordar es que, sin embargo, impone ciertos errores que surgen del hecho de que medimos constantemente esta memoria.  Pero est√°n dentro de l√≠mites aceptables. <br><br><img src="https://habrastorage.org/webt/gb/fv/wn/gbfvwnjxm6fcggr66eoyzmcvnni.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace desde la diapositiva</a></sup></sub> </h5><br>  Dumpsys es una consola simple que no requiere nada de usted, solo un tel√©fono conectado y adb.  Y puede ejecutar este comando: llame a dumpsys meminfo, p√°selo y le devolver√° algo como esto.  Y si estamos interesados ‚Äã‚Äãen cu√°nto consume nuestra aplicaci√≥n, podemos ver espec√≠ficamente TOTAL, que dice que "su aplicaci√≥n consume aproximadamente 168 megabytes".  Mucho, pero ¬øqu√© hacer? <br><br><img src="https://habrastorage.org/webt/lm/yo/xw/lmyoxwiahsbeey_ru-3zvdtd8y0.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace desde la diapositiva</a></sup></sub> </h5><br>  Tambi√©n le muestra un desglose de la cantidad exacta de memoria que se consume en esta memoria.  Hay varias secciones aqu√≠, son complejas, hablaremos m√°s sobre ellas, pero por ahora podemos notar lo principal: estos son Java Heap, nuestros objetos Java, y todo lo dem√°s es m√°s complicado. <br><br>  ¬øQu√© m√°s es importante?  La memoria es muy sensible a todo tipo de pruebas y todo tipo de condiciones externas.  Es decir, todas las pruebas que debe realizar tanto como sea posible en las mismas condiciones.  Est√° claro que este deber√≠a ser idealmente un dispositivo, porque la memoria depende de la versi√≥n de Android.  Es suficiente recordar las diferencias entre los cuatro y los cinco.  Depende del tama√±o o la resoluci√≥n de la pantalla, porque cuanto m√°s grande sea el tama√±o de la pantalla, m√°s contenido se filtra, m√°s memoria necesita para dibujarlo todo.  Cuanto mayor sea la resoluci√≥n, m√°s p√≠xeles ocupar√° su mapa de bits y se necesitar√° m√°s memoria para almacenarlos. <br><br>  El escenario de la aplicaci√≥n tambi√©n afecta las pruebas.  Puede leer el texto o puede desplazarse por la galer√≠a con un mont√≥n de im√°genes.  Y est√° claro d√≥nde habr√° m√°s memoria. <br><br>  Otra cosa importante es la carga en el dispositivo.  Es decir, puede tener todo igual, pero en un caso su aplicaci√≥n es la √∫nica que funciona para usted, y en el otro caso tiene un mont√≥n de aplicaciones que hacen algo en segundo plano, descargan algo, lo eliminan, funcionan en primer plano y, al mismo tiempo, su memoria simplemente se exprime, porque necesita d√°rsela a otras aplicaciones.  Por lo tanto, idealmente, es mejor tomar y eliminar todas las dem√°s aplicaciones que funcionan, no la suya.  Todo lo que puedas alcanzar, luego matar.  Solo en este caso, y PSS definitivamente te lo agradecer√°, porque no habr√° necesidad de perder la memoria entre los procesos. <br><br><img src="https://habrastorage.org/webt/lm/yo/xw/lmyoxwiahsbeey_ru-3zvdtd8y0.jpeg"><br>  Puede, por ejemplo, tomar y ver la informaci√≥n actual en la memoria libre, en la memoria ocupada.  Te traer√° algo as√≠ como un letrero que dice: "Aqu√≠ tengo tanta memoria libre, tanta memoria en cach√©, tanta memoria ocupada".  Y si tiene 200-250 megabytes de memoria libre para su amado all√≠, entonces es bueno, lo m√°s probable es que nada afecte sus pruebas. <br><br>  Quiz√°s alguien ahora tiene la pregunta "¬øPor qu√© necesito todo esto?"  Este es un factor decisivo en el que adem√°s dir√© la motivaci√≥n para todo esto. <br><br>  En primer lugar, incluso si no vas a hacer nada con Android Go ahora y piensas que est√° muerto, es posible que se desarrolle, venga a ti, y en alg√∫n momento tendr√°s que lidiar con todo esto. <br><br>  La segunda cosa que considero muy importante es que puedes hacer pruebas de regresi√≥n desde la memoria.  Es decir, simplemente puede escribir una secuencia de comandos que ejecutar√° la aplicaci√≥n, ejecutar√° dumpsys, tomar√° dichas medidas y ver√° c√≥mo cambian estos indicadores entre versiones.  Tal script se puede escribir en un par de horas, la infraestructura se puede configurar por m√°s tiempo, pero me parece que es algo bueno. <br><br>  Si hablamos de los detalles de Android Go, nuestro tercer punto en la lucha contra la memoria, entonces hay buenas noticias.  Primero, nadie realmente requiere que sigas estas restricciones.  Es decir, puede usar la aplicaci√≥n tal como est√°, ponerla en el dispositivo con Android Go, y todo est√° bien.  El problema es que es muy probable que el usuario lo elimine porque est√° ocupando mucho espacio.  Adem√°s, su aplicaci√≥n puede ejecutarse lentamente y tener mucha memoria, s√≠.  Pero hasta ahora nadie lo ha prohibido, porque de lo contrario no habr√≠a habido otra aplicaci√≥n que las aplicaciones de Google en Android Go.  Pero si esto se desarrolla a√∫n m√°s, muchos se adaptar√°n a tales condiciones, entonces, al final, su aplicaci√≥n simplemente puede reducirse en la emisi√≥n de Android Go, o puede mostrar a Alert c√≥mo el usuario instala la aplicaci√≥n en su tel√©fono inteligente Android Go. : "Amigo, la aplicaci√≥n no funciona bien con Android Go.  ¬øQuiz√°s no lo pongas? " <br><br>  Hay otro punto: puede excluir manualmente los dispositivos Android Go de Google Play, es decir, que la aplicaci√≥n no se puede instalar en dispositivos Android Go.  Apareci√≥ no hace mucho tiempo. <br><br>  Y Google tambi√©n es lo suficientemente inteligente, y los 50 megabytes que sonaron en el t√≠tulo del informe no son un n√∫mero fijo, sino que dependen de la resoluci√≥n del dispositivo, del tama√±o de la pantalla y, adem√°s, del tipo de aplicaci√≥n.  Por ejemplo, los juegos se asignan m√°s, en mi opini√≥n, 115 megabytes.  En principio, esto es comprensible. <br><br><img src="https://habrastorage.org/webt/gu/yj/0s/guyj0sbre79wfwrlzgupt009xn0.jpeg"><br><h5>  <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Enlace desde la diapositiva</a></sup></sub> </h5><br>  ¬øQu√© pasa si hablamos directamente sobre esta prueba?  Hay un punto m√°s, que en particular nos preocupa mucho: trabajar con presets.  Cuando los vendedores hacen un nuevo tel√©fono, a menudo ponen all√≠ un conjunto de aplicaciones preinstaladas.  En particular, estamos muy involucrados en esto, y el problema es que all√≠ ejecutan cosas como Compatibility Test Suite.  Estas son pruebas de google, las ejecutan.  Y all√≠, si su aplicaci√≥n no corresponde a estos 50 megabytes, entonces todo est√° mal y su aplicaci√≥n no puede preinstalarse en dicho dispositivo. <br><br>  Desafortunadamente, las pruebas que hace Google no son de c√≥digo abierto, no puedo decirles, est√°n bajo el NDA, pero los buenos desarrolladores de Google escribieron un art√≠culo sobre Android Go, y all√≠, en principio, hay recomendaciones que son lo suficientemente buenas. <br><br>  Es decir, todo es trivial.  Lanzamos la aplicaci√≥n.  Esperamos 5 segundos para que todo se cargue.  Hacemos dumpsys, escribimos el valor TOTAL, ejecutamos varias veces, obtenemos el resultado.  Todo es muy simple y com√∫n. <br><br><img src="https://habrastorage.org/webt/zq/ma/de/zqmadexusg3whja0-dsz0d4w7gk.jpeg"><br>  Lo √∫nico es que no tomaron en cuenta una caracter√≠stica tan peque√±a en su art√≠culo o, tal vez, no hablaron sobre ello; existe la posibilidad de trabajar en otro proceso, y a menudo lo hacen para luchar, incluido el consumo de memoria. <br><br>  ¬øQui√©n cree que esto es bueno para Android Go?  ¬øY qui√©n piensa que esto es malo?  Valientemente <br><br><img src="https://habrastorage.org/webt/_c/4p/h5/_c4ph5f7gcnhakefypwspum8d_y.jpeg"><br>  El problema es que s√≠, esto es malo, porque al final, la memoria de la aplicaci√≥n consumida se cuenta en todos los procesos.  Si hacemos un proceso tan vac√≠o sin nada y tomamos dumpsys de este proceso en particular, veremos que toma 7 megabytes.  5-8 megabytes: esta es una sobrecarga de la creaci√≥n del proceso.  Por lo tanto, cuando luchamos por cada megabyte para exprimirlo todo en 50, tal cosa se nos da muy mal.  En particular, digamos que Yandex tiene la biblioteca Yandex.Metrica m√°s popular, tambi√©n funciona en un proceso diferente, y esto tambi√©n nos puede causar dolor. <br><br><img src="https://habrastorage.org/webt/qu/os/fu/quosfu3kccdztjv7cp6ujn4rxhg.jpeg"><br>  Por lo tanto, si algunas bibliotecas externas vienen a usted, por ejemplo, simplemente puede decir: ‚ÄúAmigo, trabaja, por favor, en el proceso principal.  Estoy de acuerdo en que esto puede ser m√°s lento, pero no consumir√° memoria innecesaria ".  Entonces este tambi√©n es un punto sutil. <br><br><img src="https://habrastorage.org/webt/ci/6b/9c/ci6b9cbpebgounzlbc87xids-xi.jpeg"><br><br>  Si hablamos sobre el consumo de memoria, pasemos a este plato, que est√° all√≠.  Tomamos un proyecto vac√≠o, y ejecutamos este dumpsys, iniciamos este negocio, y vemos que 23 megabytes de 50 ya est√°n ocupados.  Vac√≠o "¬°Hola, mundo!"  sin nada, solo act√≠valo con el texto.  Se est√° poniendo muy triste.  Se vuelve a√∫n m√°s triste al darse cuenta de que podemos influir directamente en un par√°metro como Java Heap, es decir, estos son directamente nuestros objetos Java que podemos rastrear expl√≠citamente, que podemos eliminar, reducir y al menos interactuar de alguna manera. <br><br>  Y es dif√≠cil interactuar normalmente con todo esto, porque este es un c√≥digo de marco y directamente desde Java simplemente no tienes herramientas normales para entender c√≥mo se usa todo esto.  Pero la buena noticia es que podemos influir en todo esto indirectamente, as√≠ que hablemos de lo que hay all√≠. <br><br><img src="https://habrastorage.org/webt/pa/p_/qp/pap_qprhxuqhr59pnjx8kxrqwos.jpeg"><br>  Lo que es Java Heap es comprensible.  Lo que es Native Heap tambi√©n es bastante l√≥gico de suponer.  Estas son las mismas asignaciones, solo las positivas.  Vienen del marco y de sus bibliotecas nativas, archivos .so y m√°s. <br><br>  El c√≥digo est√° directamente relacionado con el almacenamiento de c√≥digo.  Este es el tama√±o de su .dex, este es su .so, estos son los recursos, archivos mmap y todo eso.  Es decir, cuanto menos c√≥digo, mejor.  La verdad m√°s simple que funciona en general sobre todo. <br><br>  Stack es una pila de hilos Java / C ++.  Es decir, cada subproceso tiene su propia pila de llamadas, por lo que cada subproceso crea un √°rea de memoria tan espec√≠fica para almacenar todo esto. <br><br>  Los gr√°ficos son una representaci√≥n de la interfaz de usuario.  Hay mapas de bits parcialmente almacenados que se dibujan y lo que est√° conectado con ellos. <br><br>  Privado otro, Sistema: esto es algo en lo que no podemos influir en absoluto y, de hecho, todo lo dem√°s que no es muy categorizable. <br><br><img src="https://habrastorage.org/webt/ut/mv/ft/utmvfteatf-vvzdda5_a8f-iyvi.jpeg"><br><br>  Si hablamos de bibliotecas nativas, entonces, digamos que puede tomar una aplicaci√≥n vac√≠a ... puede tomar la aplicaci√≥n habitual que tenemos y quitar dumpsys de ella, ver que toma 146 megabytes.  Y si vas y cortas algo ... en particular, tom√© y vi las dos bibliotecas nativas m√°s grandes, que tenemos un total de 15 megabytes, y tomamos dumpsys despu√©s de eso, puedes ver f√°cilmente que hemos perdido el consumo del Native Heap y del c√≥digo  Es decir, con un gesto tan simple, nos ahorramos unos 35 megabytes.  No es lo suficientemente malo. <br><br><img src="https://habrastorage.org/webt/zn/9r/9v/zn9r9v35dja5ndfyz4nwinzshys.jpeg"><br><br>  Corrientes  Hagamos la prueba m√°s f√°cil.  Hay una aplicaci√≥n vac√≠a, y hay la misma aplicaci√≥n vac√≠a, donde tomamos y hacemos un bucle que har√° un nuevo Thread (), dormiremos en √©l durante cinco segundos e iniciaremos este hilo.  Puede ver que en este caso, la pila se repone en gran medida.  Es decir, podemos influir en todo esto, pero indirectamente, reduciendo el n√∫mero de hilos en el c√≥digo Java.  Es decir, a trav√©s de objetos Java, incluida la influencia de todas estas ubicaciones que se encuentran en otros elementos. <br><br><img src="https://habrastorage.org/webt/4i/ed/mo/4iedmo77bys7vs6hv-f65oiuta0.jpeg"><br><br>  Si contin√∫a hablando de subprocesos, puede ver f√°cilmente lo que tiene para los subprocesos, lo que hacen en la aplicaci√≥n.  Hay diferentes herramientas  Puede usar el mismo systrace, solo puede usar la consola para encontrar la identificaci√≥n de su proceso y tomar ps por qu√© hilos est√°n en el sistema. <br><br>  Si lo haces bien y usas todo tipo de ThreadFactory para nombrar tus hilos, entonces puedes entender lo que deber√≠as tener, lo que no deber√≠a ser, y as√≠ reducir todo, porque tener 100 hilos en la aplicaci√≥n carece de sentido. <br><br>  ¬øQu√© m√°s se puede hacer?  Hay un conjunto conocido de consejos de acorde√≥n de botones: est√© atento a fugas, use piscinas, no cree objetos cuando no lo necesite, y todas estas tonter√≠as, todo esto se aplica.  Genial <br><br>  Existe una buena correlaci√≥n entre cu√°nto consume memoria su aplicaci√≥n y qu√© tan grande es.  Es decir, cuanto m√°s grande sea su aplicaci√≥n, m√°s memoria consumir√°, por lo tanto, de una manera simple, reduzca el peso del APK, reduzca el peso de .dex, reduzca .so, elimine todo lo que se pueda eliminar. <br><br>       . ,      ,     ,    .      ,     ?   ‚Äî         ‚Äî    ,      .   ,     ,        .       .   ‚Äî   . <br><br><img src="https://habrastorage.org/webt/3s/mv/wk/3smvwkzryvrsm1klctrsmnxtx4i.jpeg"><br>    dumpsys,   ,      ,    . ,   ,   View,  WebView,  Assets,    . <br><br><img src="https://habrastorage.org/webt/yd/m_/92/ydm_92wzagxi-1a9zpwzkeqbe8o.jpeg"><br>  ,      , , ,     ,    SharedPreference  SQLite  - , , ,   . <br><br><img src="https://habrastorage.org/webt/1f/fs/ct/1ffsctcvhhohxpwiysekmopqwzk.jpeg"><br><br> , ,      Assets.  ,  ,    ‚Äì .     1,5 . -,      ,         .    . <br><br><img src="https://habrastorage.org/webt/q5/7g/ki/q57gkiv47412jj1q9_aye3k_4e8.jpeg"><br>    ‚Äî  WebView.    ,  WebView,   ,  dumpsys,  100 ,  .  , , - ,   ,  300  ‚Äî .    ,  WebView ,    . -. <br><br><img src="https://habrastorage.org/webt/o9/pj/z8/o9pjz8exyayhtg1varn-wtsmw8i.jpeg"><br><br> Google   .    .      WebView,     Google,    - .     WebView. . <br><br><img src="https://habrastorage.org/webt/nt/lp/-q/ntlp-qwbjnysaljhmmahewkcdeq.jpeg"><br><br>    Google Go,    Android Go-.       ,     - layout    ,      .  ,      ,      ,   Chrome Tabs,  Chrome    .   . <br><br>       Android Go,    ?    ,      Android Go,      . <br><br><img src="https://habrastorage.org/webt/rm/jz/cf/rmjzcfwjkfponuuzuljvu0r088q.jpeg"><br>  Hay varias formas -,      ,    ,       Android Go   .     ,    , .         ,   , ,  - build ,  - ,    ,  - .        APK,       ,  ‚Äî  uses-feature ¬´low-memory¬ª,      APK. <br><br>       ,     ,      Android Go.   Google. ,  ,  Go-   . <br><br>   ,   ?  ,      ,      -       ,   : ¬´,  -  .   ¬ª.           .   ,     ,    ,      ,   ,    - ,      ,  -    .     , ,  ,    ,    Google,    Google     ,      .        ,      ,  ,   Android Go  ,       ,       . <br><br>   ,       ,       ,  -.   . <br><br><img src="https://habrastorage.org/webt/6r/wd/i-/6rwdi-8mzeuwfvvw00dh0nmdf48.jpeg"><br><h5> <sub><sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">  </a></sup></sub> </h5><br>       ,    Google I/O:   ,          -    . ,      ,    ,  ,   ,    - ,        .    ,  ¬´       ,      .  ¬ª.     .        ,  .    ,  . <br><br>    ? ,      .  ‚Äî  ,    ,     98% .  ,         , ,    . .       -    Android Go-.  ,  YouTube Go       .    YouTube   , ,  ,   .  No lo se   ,    Android Go    , , ,     ‚Äî    .     ‚Äî Facebook Lite, Twitter Lite,   . Lite,      -   . -,  ,      .    Facebook,    .       ,      ,    . ,    ‚Äî   ,     Android Go. <br><br>    ?  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> </a>  Stack Overflow,    1000 .      .  ,    ,    ,     . ,  ,    ‚Äî  dumpsys. <br><br>      ,  Android    ,   512   ,    Android 4.4.      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="> API</a>     ,     . <br><br>     ,    .    ,        .   ‚Äî   ,    . <br><br>     , : ¬´ ¬ª.  : ¬´¬ª.  .  ‚Äî  ,  .  - 170 .  .  -  .    ?      , ,  ,     ,    - .     -  ‚Äî   .  105 .  . <br><br><img src="https://habrastorage.org/webt/mv/qk/gj/mvqkgjfuippyzhhhcv0tmkosqzw.jpeg"><br>     .   build-   -.  densitySplit,     , resConfig,       .   ,  ,    ‚Äî . ProGuard   .  ,  ProGuard  ,     ,  , ,  ,       stacktraces. <br><br>      .     ,      ,      Android Go-       . <br><br>    - 64 .  : ¬´,   ¬ª.  14 ,  4 ,  60 .     ,   .  .  ,     .         ‚Äî    ,  ,  ,     ,    .     , ,  ,     Android Go,    . 10 , APK     ,  , .   ,    ,      . <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entonces la mejor soluci√≥n es la segunda aplicaci√≥n. </font><font style="vertical-align: inherit;">Sin embargo, pocas personas gastar√°n recursos en √©l, mientras que el beneficio real no est√° claro. </font><font style="vertical-align: inherit;">Quiz√°s tu historia no sea tan triste, porque me quedaba un poco de esfuerzo, habr√≠a escalado, pero ya era insoportable. </font><font style="vertical-align: inherit;">Pero tal historia. </font><font style="vertical-align: inherit;">En esta nota relativamente positiva, probablemente puedas terminarlo. </font><font style="vertical-align: inherit;">Gracias a todos.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es423493/">https://habr.com/ru/post/es423493/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es423483/index.html">Encontrar la manera correcta de separar el contenido del sitio web usando Webpack</a></li>
<li><a href="../es423485/index.html">Im√°genes de carga diferida usando IntersectionObserver</a></li>
<li><a href="../es423487/index.html">Node.js sin node_modules</a></li>
<li><a href="../es423489/index.html">Soy m√©dico de urgencias y quiero hablar sobre el nuevo electrocardiograma Apple Watch.</a></li>
<li><a href="../es423491/index.html">PHP Digest No. 139 (3 al 17 de septiembre de 2018)</a></li>
<li><a href="../es423495/index.html">¬øQu√© hay dentro de XGBoost y qu√© tiene que ver Go con √©l?</a></li>
<li><a href="../es423497/index.html">Tratemos de hablar sobre m√°quinas de estado jer√°rquicas en general y su soporte en SObjectizer-5 en particular</a></li>
<li><a href="../es423499/index.html">DevBoy: c√≥mo cre√© un proyecto de dispositivo de c√≥digo abierto y lanc√© un proyecto en Kickstarter</a></li>
<li><a href="../es423501/index.html">B√∫squeda y creaci√≥n de estilo visual para un proyecto de dise√±o.</a></li>
<li><a href="../es423503/index.html">Mi experiencia de mudarme, vivir y estudiar en Alemania</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>