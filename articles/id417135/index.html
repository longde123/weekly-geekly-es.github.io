<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🖖🏾 🏦 🚣🏿 Unity3D: bagaimana cara mengetahui tingkat iluminasi suatu titik dalam sebuah adegan? 💰 🍷 👨🏽‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salam! 

 Saya tahu, dan pada dasarnya Anda tahu apa yang hilang dari permainan kartu atau permainan tiga-dalam-satu Anda. Sistem siluman! 

 Dan tent...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Unity3D: bagaimana cara mengetahui tingkat iluminasi suatu titik dalam sebuah adegan?</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/417135/">  Salam! <br><br>  Saya tahu, dan pada dasarnya Anda tahu apa yang hilang dari permainan kartu atau permainan tiga-dalam-satu Anda.  Sistem siluman! <br><br>  Dan tentu saja, setiap sistem siluman yang menghargai diri sendiri harus dapat memperhitungkan pencahayaan lingkungan di sekitar pemain.  Saya kagum menggali topik dan menemukan sejumlah kecil informasi.  Karena itu, saya cepat berbagi buah. <br><br>  Hari ini kami tidak akan mengembangkan sistem siluman lengkap untuk pemain, kami akan mempertimbangkan interaksi murni dengan pencahayaan. <br><a name="habracut"></a><br><h3>  Metode 1: Colliders </h3><br>  Cara yang sederhana dan tidak terlalu intensif sumber daya. <br><br>  Kami menambahkan collider bola ke setiap sumber cahaya.  Kami membuatnya menjadi pemicu.  Kami mengatur dimensi kira-kira sama dengan jari-jari cahaya. <br><br>  Sisanya sejelas bayangan.  Kami sedang menulis skrip sederhana, di mana di OnTriggerEnter () kami menempatkan aktivasi perhitungan cahaya (sehingga sumber cahaya tidak bekerja "idle" ketika pemain tidak ada) <br><br>  Perhitungan pencahayaan itu sendiri akan terletak di Pembaruan ().  Intinya, ini adalah Fisika biasa. Tayangan ().  Jika itu mengenai pemain, pemain berada di zona cahaya.  Jika tidak jatuh, itu berarti bahwa pemain berada di belakang rintangan dan, oleh karena itu, dalam bayangan. <br><br>  Anda juga dapat menambahkan perhitungan jarak antara pemain dan sumber cahaya di sini.  Jadi, untuk menentukan iluminasi, kita akan menggunakan pelampung sederhana, yang akan bervariasi tergantung pada jarak ke sumber cahaya.  Dan Anda dapat menggunakannya di mana pun yang diinginkan hati Anda. <br><br><div class="spoiler">  <b class="spoiler_title">Contoh</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/c9/nu/43/c9nu43wv6trcy2hg28eijiq4j_o.png"><br>  <i>Pada poin 1, iluminasi mendekati maksimal.</i>  <i>Pada titik 2, iluminasi minimal - ada penghalang antara cahaya dan titik.</i>  <i>Pada poin 3, iluminasi rata-rata.</i> <br></div></div><br>  Dan itu belum semuanya!  Anda dapat menambahkan collider pemicu ke berbagai "zona bayangan" tempat pemain harus bersembunyi.  Dalam tradisi terbaik Manhunt.  Demikian pula, Anda dapat menandai zona terang dengan collider, mensimulasikan, misalnya, cahaya lampu sorot. <br><br><h4>  Keuntungan: </h4><br><ul><li>  Mudah untuk menyesuaikan lampu Point. </li><li>  Cukup ekonomis dari segi sumber daya, jika Anda tidak mengirim spam sumber cahaya. </li></ul><br><h4>  Kekurangan: </h4><br><ul><li>  Lampu Spot dan lampu Directional sangat dicari.  Jika untuk yang pertama cukup untuk menempatkan collider di bidang cahaya (untuk meningkatkan visibilitas pemain di pintu masuk), maka yang kedua adalah horor nyata.  Anda harus menempatkan collider di setiap bayangan (untuk mengurangi visibilitas pemain di pintu masuk), atau terus-menerus memeriksa menggunakan Physics.Raycast () antara pemain dan "matahari" - terletak di bawah sinar atau di bawah bayangan. </li><li>  Sejumlah besar colliders mengacaukan pemandangan, menyulitkan fisika. </li><li>  Perawatan harus diambil dengan memotong sumber cahaya. </li><li>  Lampu dinamis (bergerak atau mengubah intensitas) perlu ditambahkan secara terpisah melalui skrip. </li></ul><br><h3>  Metode 2: Tekstur Render </h3><br>  Apa yang kita lakukan disini  Bahkan, kami mendapatkan "tangkapan layar" dari kamera, dan tidak harus dari kamera utama.  Lalu kami menganalisis warna tangkapan layar untuk mencari tahu seberapa terang cahaya yang jatuh pada subjek. <br><br>  Untuk memulainya, kita membutuhkan objek dari mana kita akan "membaca" cahaya.  Buat bola atau bidang biasa, buat kecil (skala 0,1), letakkan dekat dengan lantai, buat putih, lepaskan collider: <br><br><div class="spoiler">  <b class="spoiler_title">Teks tersembunyi</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/hb/ri/7o/hbri7op9p5lyq091ia1ozgeiasc.png"><br></div></div><br>  Tambahkan kamera (pastikan untuk menghapus pendengar audio dan periksa apakah tag MainCamera tidak layak).  Ikatkan ke objek kita.  Kami menempatkannya sedikit lebih tinggi, kami mengarahkannya ke bawah.  Kami mengekspos dalam pengaturan bukan tampilan utama.  Melakukannya secara ortografis adalah untuk selera Anda. <br><br>  Pada akhirnya, kita memposisikannya sehingga itu melihat objek kita dan hanya melihatnya. <br><br><div class="spoiler">  <b class="spoiler_title">Teks tersembunyi</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/uv/de/3y/uvde3ygsuysuvuysojxbsvmbml8.png"><br></div></div><br>  Pada akhirnya, konfigurasikan masker Culling dari kamera primer dan sekunder sehingga primer tidak menampilkan objek "ringan" kami, sedangkan yang sekunder hanya melihat mereka, tanpa mengacaukan hal lain. <br><br>  Dan di sini kesenangan dimulai.  Kami melampirkan skrip ke kamera: <br><br><pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">public</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Camera</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">cam</span></span>; //   <span class="hljs-selector-tag"><span class="hljs-selector-tag">RenderTexture</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tex</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">Texture2D</span></span> _<span class="hljs-selector-tag"><span class="hljs-selector-tag">tex</span></span>; <span class="hljs-selector-tag"><span class="hljs-selector-tag">void</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Start</span></span> () { //    "". // ,       -   . // Depth   0   -   . tex = new RenderTexture (1, 1, 8); // RenderTexture "" , //   ,    . _tex = new Texture2D (1, 1, TextureFormat.RGB24, false); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">void</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Update</span></span> () { //   ""  cam.targetTexture = tex; cam.Render (); //     RenderTexture.active = tex; //   Texture2D _tex.ReadPixels (new Rect (0, 0, 1, 1), 0, 0); _tex.Apply (); Color col = _tex.GetPixel (0, 0); float vis = (col.r + col.g + col.b) / 3; }</code> </pre> <br>  Pada output, kita mendapatkan visibilitas, yang, pada dasarnya, adalah representasi numerik dari tingkat insiden pencahayaan pada objek kita.  Jika sumbernya dekat - objeknya putih - vis adalah 1. Jika gelap - objeknya hitam - vis adalah ~ 0. <br><br>  Kami tidak perlu melakukan operasi di atas setiap frame, jadi kami menyematkan timer kedua yang kecil: <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">float</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">interval</span></span> = 0; <span class="hljs-selector-tag"><span class="hljs-selector-tag">void</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Update</span></span> () { interval += Time.deltaTime; if (interval &lt; 1) return; interval = 0; //   }</code> </pre> <br>  Selanjutnya, kami mengikat seluruh sistem kami ke pemain sehingga itu bergerak bersamanya.  Dan variabel vis kami secara otomatis mengembalikan cahaya di sekitar pemain! <br><br>  Sistem ini dapat digunakan tidak hanya bersama dengan pemain.  Anda dapat menempatkannya di mana saja dan sesuka Anda, menciptakan semacam sensor cahaya.  Sebagai aturan, ada cara yang lebih efektif untuk mengimplementasikannya, tetapi apakah selalu baik untuk memiliki alternatif? <br><br>  Keuntungannya jelas, mari kita bicara tentang kerugiannya. <br><br><h4>  Kekurangan </h4><br><ul><li>  Setiap "detektor cahaya" (jika ada lebih dari satu) memerlukan kamera terpisah. </li><li>  Texture2D.ReadPixels () - yah, sangat lambat.  Bahkan jika Anda melakukannya sekali dalam satu detik, dan tidak setiap frame, bahkan jika Anda memecah fungsi menulis dan membaca tekstur menjadi bingkai yang berbeda, masih ada tata letak di 40-110ms. </li><li>  Sistem ini tidak memperhitungkan beberapa kasus langka.  Misalnya, senter bersinar pada karakter.  Karakter menyala dengan baik, tetapi cahaya jatuh pada dirinya dan di belakangnya, dan tidak turun, masing-masing, detektor cahaya kami menunjukkan tingkat pencahayaan yang rendah.  Anda dapat memecahkan masalah, misalnya, dengan menempatkan detektor tidak di lantai, tetapi pada tingkat dada karakter.  Maka Anda perlu meletakkan dua kamera di sisi yang berlawanan untuk membaca cahaya dari kedua sisi.  Apa yang akan memperlambat sistem hingga setengahnya. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id417135/">https://habr.com/ru/post/id417135/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id417123/index.html">Integrasi Spark Streaming dan Kafka</a></li>
<li><a href="../id417125/index.html">Rapat RTC .Net: undang ke pertemuan pertama</a></li>
<li><a href="../id417127/index.html">Tesla Menandatangani Perjanjian untuk Membangun Gigafactory 3 di Cina</a></li>
<li><a href="../id417129/index.html">Alam semesta pikiran</a></li>
<li><a href="../id417131/index.html">Bagaimana merasakan transaksi di MongoDB sekarang</a></li>
<li><a href="../id417137/index.html">Sudut: Membuat beberapa komponen kotak centang yang cocok untuk digunakan kembali</a></li>
<li><a href="../id417139/index.html">Bukti itu menipu para ilmuwan selama beberapa dekade</a></li>
<li><a href="../id417141/index.html">Tidak pernah terlalu dini untuk memikirkan 6G</a></li>
<li><a href="../id417143/index.html">Bukti dalam sains? Mereka bukan</a></li>
<li><a href="../id417145/index.html">Aplikasi Burger King: Mengejek privasi Anda. Apakah kita mengoreksi?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>