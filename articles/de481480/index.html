<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòª üà¥ ü§æüèª Dies ist die Norm: Was sind normale Karten und wie funktionieren sie? üë©‚Äçüîß üôÖ üíå</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ich habe mehrere Jahre lang versucht, die normalen Karten und die Probleme zu verstehen, die normalerweise bei der Arbeit mit ihnen auftreten. 

 Die ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Dies ist die Norm: Was sind normale Karten und wie funktionieren sie?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481480/">  Ich habe mehrere Jahre lang versucht, die normalen Karten und die Probleme zu verstehen, die normalerweise bei der Arbeit mit ihnen auftreten. <br><br>  Die meisten Erkl√§rungen, die ich fand, waren zu technisch, unvollst√§ndig oder zu kompliziert, als dass ich sie h√§tte verstehen k√∂nnen. Deshalb beschloss ich, die von mir gesammelten Informationen zu erkl√§ren.  Ich verstehe, dass diese Erkl√§rungen m√∂glicherweise unvollst√§ndig oder nicht ganz korrekt sind, aber ich werde es trotzdem versuchen. <br><br>  Die ersten von Menschen erstellten 3D-Modelle sahen ungef√§hr so ‚Äã‚Äãaus: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dee/aa7/cfb/deeaa7cfbf5b448d8db6a06b719c1ece.jpg" alt="Bild"></div><br>  Das ist gro√üartig, aber ein solches Modell hat eine offensichtliche Einschr√§nkung: Es sieht zu polygonal aus. <br><br>  Die naheliegendste L√∂sung: F√ºgen Sie mehr Polygone hinzu, um die Oberfl√§che gleichm√§√üiger und glatter zu machen, bis die Polygone als einzelne glatte Oberfl√§che erscheinen.  Es stellt sich jedoch heraus, dass Sie (besonders heute) eine gro√üe Anzahl von Polygonen ben√∂tigen, um Oberfl√§chen wie Kugeln glatt zu machen. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/60a/78a/f86/60a78af862d484ce11d083a1f201adb7.jpg" alt="Bild"></div><br>  Eine andere L√∂sung war n√∂tig, und so wurden die Normalen erfunden.  (Ganz so ist es nicht passiert, aber es ist einfacher zu erkl√§ren und zu verstehen.) <br><br>  Folgen wir der Linie von der Mitte des Polygons senkrecht zu seiner Oberfl√§che.  Wir werden dieser Zeile einen sehr ungew√∂hnlichen Namen geben: normal.  Das Ziel der Normalen besteht darin, zu steuern, wo die Oberfl√§che hinweist, sodass Licht, das von dieser Oberfl√§che reflektiert wird, die Normalen zur Berechnung der resultierenden Reflexion verwenden kann.  Wenn Licht auf das Polygon trifft, vergleichen wir den Winkel des Lichtstrahls mit der Normalen des Polygons.  Der Strahl wird im gleichen Winkel zur Normalenrichtung reflektiert: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/842/b24/bb5/842b24bb518ce0e63a7694cbd0d752e2.jpg" alt="Bild"></div><br>  Mit anderen Worten ist die Lichtreflexion in Bezug auf die Normalen des Polygons symmetrisch.  So funktionieren die meisten Reflexionen in der realen Welt.  Standardm√§√üig werden Lichtstrahlen von allen Polygonen v√∂llig senkrecht zu ihrer Oberfl√§che reflektiert (wie es im wirklichen Leben der Fall sein sollte), da die Polygonnormalen standardm√§√üig senkrecht zur Oberfl√§che des Polygons stehen.  Wenn es L√ºcken in den Normalen gibt, werden wir sie als getrennte Fl√§chen sehen, da das Licht in die eine oder andere Richtung reflektiert wird. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ff7/138/c84/ff7138c843c2d67bfcfc8c061cb1953a.jpg" alt="Bild"></div><br>  Wenn die beiden Fl√§chen verbunden sind, k√∂nnen wir den Computer auffordern, den √úbergang zwischen der Normalen eines Polygons zu einem anderen zu gl√§tten, sodass die Normalen allm√§hlich in √úbereinstimmung mit der n√§chsten Normalen des Polygons ausgerichtet werden.  Wenn das Licht genau auf die Mitte eines Polygons trifft, wird es entsprechend der Richtung der Normalen direkt reflektiert.  Zwischen den Polygonen wird diese normale Richtung gegl√§ttet, wodurch sich die Lichtreflexion √§ndert. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/607/b7e/dc4/607b7edc436e1e47b80ccb2599fdbe22.jpg" alt="Bild"></div><br>  Wir werden den √úbergang als eine einzelne Oberfl√§che wahrnehmen, da das Licht zwischen dem einen und dem anderen Polygon auf sanfte Weise reflektiert wird und es keine L√ºcken zwischen ihnen gibt.  Tats√§chlich wird Licht von diesen Polygonen glatt reflektiert, als h√§tten wir viele Polygone. <br><br>  Dies steuern wir, indem wir Gl√§ttungsgruppen festlegen (3ds Max, Blender) oder Kanten als hart oder glatt festlegen (Modo, Maya): Wir teilen dem Programm mit, welche √úberg√§nge zwischen Fl√§chen glatt und welche hart sein sollen. <br><br>  Hier ist ein Vergleich einer Kugel von 288 Polygonen mit harten und glatten √úberg√§ngen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c20/5b2/5ef/c205b25ef1eb8886ee3e2fc7773f0125.jpg" alt="Bild"></div><br>  Potenziell k√∂nnen wir so etwas wie ein Parallelepiped so spezifizieren, dass alle seine Scheitelpunkte gemittelte Normalen haben.  Der 3D-Editor bem√ºht sich, seine Oberfl√§che so zu gl√§tten, dass sie wie eine einzige glatte Oberfl√§che aussieht.  F√ºr einen 3D-Editor ist dies ziemlich logisch, aber es sieht sehr seltsam aus, da wir ein Objekt haben, das offensichtlich mehrere separate Oberfl√§chen haben sollte (jede Seite der Box). Das Programm versucht jedoch, sie als eine glatte Oberfl√§che anzuzeigen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ec/d6c/1cc/9ecd6c1cc60c2d431065cb9aa6741979.jpg" alt="Bild"></div><br>  Aus diesem Grund haben 3D-Editoren normalerweise einen Parameter zum Gl√§tten von Winkeln: Wenn zwei verbundene Polygone in einem Winkel √ºber dem Gl√§ttungswinkel liegen, ist der √úbergang glatt und die Verbindungspolygone in einem Winkel, der kleiner als der Gl√§ttungswinkel ist, sind steif.  Dadurch werden steile Winkel zwischen Oberfl√§chen wie in der realen Welt als unterschiedliche Oberfl√§chen dargestellt. <br><br>  Wir haben also die Normalen verwendet, um die √úberg√§nge zwischen den Fl√§chen des Modells zu steuern, aber Sie k√∂nnen noch weiter gehen. <br><br>  Da wir die Art und Weise √§ndern, wie Licht von einem Objekt reflektiert wird, k√∂nnen wir auch ein sehr einfaches Objekt dazu bringen, Licht als komplex zu reflektieren.  Dies wird als normale Karte bezeichnet.  Wir verwenden eine Textur, um die Richtung des von einem 3D-Objekt reflektierten Lichts zu √§ndern, sodass es h√§rter aussieht als es wirklich ist. <br><br>  Ein Beispiel aus der realen Welt sind die Hologramme, die bisher beim Kauf von Kartoffelchips (zumindest hier in Spanien) geschenkt wurden.  Sie sind vollst√§ndig flach, reflektieren das Licht jedoch so, wie es ein 3D-Objekt tun w√ºrde, was es schwieriger macht, als es wirklich ist.  In der Welt der 3D-Grafik funktioniert dies noch besser, hat aber immer noch seine Grenzen (da die Oberfl√§che flach bleibt). <br><br>  Obwohl wir die Polygonnormalen verwenden, um eine Art schwarze Magie zu implementieren, steuern wir die Gl√§ttung der Modelloberfl√§che nicht mithilfe der Polygonnormalen.  Wir verwenden Vertexnormalen, um die Gl√§ttung von Normalen zu steuern.  Im Wesentlichen ist die Idee die gleiche, aber etwas komplizierter. <br><br>  Jeder Scheitelpunkt kann einer oder mehreren Normalen zugeordnet werden.  Wenn es eine Normale hat, k√∂nnen wir sie die gemittelte Normale des Scheitelpunkts nennen, und wenn mehrere - dann die geteilte Normale des Scheitelpunkts. <br><br>  Nehmen wir zwei Polygone, die durch eine Kante verbunden sind.  Wenn der √úbergang zwischen zwei Fl√§chen glatt ist (wenn wir ihn in Maya / Modo als glatt angegeben haben oder beide die gleiche Gl√§ttungsgruppe in Max / Blender haben), hat jeder Scheitelpunkt eine Normale, die die Durchschnittsnormale der Polygone ist (weshalb sie als Durchschnittsnormale des Scheitelpunkts bezeichnet wird) )  Wichtiger Hinweis: Bis vor kurzem hat jeder 3D-Editor die Durchschnittsnormalen von Scheitelpunkten auf seine eigene Weise berechnet, d. H. Normale Karten, die in einem Programm in einem anderen berechnet wurden, k√∂nnen v√∂llig anders aussehen.  Im zweiten Teil des Tutorials werde ich Ihnen mehr dar√ºber erz√§hlen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6b/d8d/4bd/e6bd8d4bd97239a2766676bba73a5185.jpg" alt="Bild"></div><br>  Wenn der √úbergang hart ist (harte Kante oder verschiedene Gl√§ttungsgruppen), hat jeder Scheitelpunkt mehrere Normalen: eine f√ºr jeden verbundenen Scheitelpunkt, der entsprechend seiner Normalen ausgerichtet ist.  In diesem Fall entsteht eine L√ºcke zwischen den Normalen, die wie zwei verschiedene Fl√§chen aussieht.  Dies ist das, was als Split Vertex Normal bezeichnet wird. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/05b/9c9/fe5/05b9c9fe5bf8f37e8212f2b25438c9c9.jpg" alt="Bild"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fc/7ed/f7e/6fc7edf7ebada96250b95870ffc4d26c.jpg" alt="Bild"></div><br>  Wie Sie vielleicht erraten haben, ist die normale Kontrolle der Scheitelpunkte sehr wichtig, wenn wir normale Karten kontrollieren m√∂chten.  Gl√ºcklicherweise m√ºssen wir die Normalen nicht direkt √§ndern oder sogar sehen. Wenn Sie jedoch wissen, wie sie funktionieren, k√∂nnen Sie besser verstehen, warum wir diese Arbeit ausf√ºhren, und die Probleme, auf die wir m√∂glicherweise sto√üen, besser verstehen. <br><br>  Beim Backen einer normalen Karte weisen wir das Programm im Wesentlichen an, die Richtung zu √§ndern, in der die Normalen des Lowpoly-Modells verlaufen, sodass sie der Richtung im Highpoly-Modell entsprechen.  Daher reflektiert das Lowpoly-Modell das Licht auf die gleiche Weise wie Highpoly.  Alle diese Informationen werden in einer Textur gespeichert, die als normale Karte bezeichnet wird.  Schauen wir uns ein Beispiel an. <br><br>  Nehmen wir an, wir haben ein solches Low-Poly-Modell (Low-Poly).  Eine flache Oberfl√§che mit vier Eckpunkten und UV-Einstellungen, mit denen das Backprogramm eine normale Karte erstellt. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/262/888/39d/26288839d4eb72924d12407d19352c76.jpg" alt="Bild"></div><br>  Und sie muss Informationen √ºber Normalen von diesem High-Poly-Modell erhalten, dessen Normalen komplizierter sind. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e4e/bbb/b94/e4ebbbb943f8a3ad71016ee396bc55bb.jpg" alt="Bild"></div><br>  Denken Sie daran, dass wir nur Informationen √ºber Normalen √ºbertragen, d. H. UV, Material, Topologie, Transformationen usw.  nicht relevant.  Bew√§hrte Regel: Wenn das Highpoly-Modell gut aussieht, sind auch seine Normalen gut und sollten zum Backen geeignet sein. <br><br>  Das Backprogramm nimmt ein Lowpoly-Modell auf und strahlt Strahlen aus, die den Richtungen der Lowpoly-Normalen folgen (weshalb wir die Lowpoly-Normalen kontrollieren m√ºssen).  Diese Strahlen haben eine begrenzte L√§nge, um keine normalen Informationen von entfernten R√§ndern zu erhalten (normalerweise wird diese Distanz als Backdistanz oder K√§figdistanz bezeichnet).  Wenn diese Strahlen mit HighPoly kollidieren, berechnet das Backprogramm, wie diese Strahlen reflektiert werden, damit sie der Richtung der HighPoly-Normalen folgen, und speichert diese Informationen in der normalen Karte. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/72c/487/534/72c48753443123074b3b0170ee04e7e8.jpg" alt="Bild"></div><br>  Hier ist das Backergebnis f√ºr unser Beispiel: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/256/508/4f3/2565084f33aaafaedfb752e7b5c01b89.jpg" alt="Bild"></div><br>  Wir haben eine Textur, mit der der Motor die Lowpoly-Normalen so √§ndert, dass das Licht von diesem Lowpoly-Modell genauso reflektiert wird wie von der Highpoly-Version.  Vergessen Sie nicht, dass dies nur eine Textur ist, die die Silhouette des Lowpoly-Modells nicht beeinflusst (es ist unm√∂glich, die Art und Weise zu √§ndern, in der das Licht vom Modell reflektiert wird, wenn das Licht nicht auf dieses Modell f√§llt). <br><br>  Obwohl es klar ist, dass man das Erscheinungsbild von HighPoly durch das Erscheinungsbild von normalen Karten ‚Äûz√§hlen‚Äú kann, ist es offensichtlich, dass normale Karten keine gew√∂hnlichen Texturen sind, da sie Informationen nicht √ºber Farben, sondern √ºber Normalen speichern.  Dies bedeutet auch, dass normale Karten nicht als normale Texturen betrachtet werden k√∂nnen.  Dar√ºber hinaus haben sie, wie wir sehen werden, spezielle Kompressions- und Gammakorrekturparameter. <br><br>  Sie k√∂nnen die normale Karte als einen Satz von drei Texturen in Graustufen wahrnehmen, die in einem Bild gespeichert sind: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c4e/f22/2ce/c4ef222ce73d3cd29b0b055cec587c6b.jpg" alt="Bild"></div><br>  Das erste Bild zeigt dem Motor, wie dieses Modell das rechts einfallende Licht reflektieren soll.  Es wird im roten Kanal der normalen Kartentextur gespeichert. <br><br>  Das zweite Bild zeigt dem Motor, wie das Modell das von unten einfallende Licht reflektieren soll *;  Es wird im gr√ºnen Kanal der normalen Kartentextur gespeichert. <br><br>  * In einigen Programmen f√§llt das Licht nicht von unten, sondern von oben, d. H. Es gibt m√∂glicherweise normale Karten auf der linken und rechten Seite.  Wie wir sp√§ter sehen werden, kann dies einige Probleme verursachen. <br><br>  Das dritte Bild zeigt dem Motor, wie das Modell das von vorne einfallende Licht reflektieren soll.  Es wird im blauen Kanal der normalen Kartentextur gespeichert.  Da die meisten Objekte bei Beleuchtung von vorne wei√ü erscheinen, erscheinen normale Karten normalerweise bl√§ulich. <br><br>  Wenn wir alle drei Bilder zu einem kombinieren, erhalten wir eine normale Karte.  Denken Sie daran, dass diese Erkl√§rung nicht ganz richtig ist, aber ich hoffe, dass Sie damit die in der normalen Karte gespeicherten Informationen besser verstehen und verstehen k√∂nnen, was sie bewirkt. <br><br>  Um zusammenzufassen: <br><br>  Normalen sind Vektoren, mit denen bestimmt wird, wie Licht von einer Oberfl√§che reflektiert wird.  Sie k√∂nnen verwendet werden, um den √úbergang zwischen Fl√§chen zu steuern (indem die Normalen verbundener Scheitelpunkte gemittelt werden, um einen glatten √úbergang zu erstellen, oder um sie zu trennen, um einen starren √úbergang zu erstellen). Sie k√∂nnen jedoch auch ihre Richtung √§ndern, sodass das Lowpoly-Modell das Licht auf dieselbe Weise wie ein komplexeres Modell reflektiert. <br><br>  Diese Informationen werden in drei separaten Bildkan√§len gespeichert, und ein 3D-Editor liest sie, um zu verstehen, in welche Richtung die Oberfl√§che des Modells aussehen soll. <br><br>  Im n√§chsten Artikel der Serie wird erl√§utert, wie diese Teile vom High-Poly-Modell in Low-Poly-Teile gebacken werden. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481480/">https://habr.com/ru/post/de481480/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481470/index.html">Smarte Girlande f√ºr das ganze Jahr</a></li>
<li><a href="../de481472/index.html">DNS-Verlauf: Wenn Domainnamen bezahlt werden</a></li>
<li><a href="../de481474/index.html">Wir sind von einem anderen Test - wir testen die Datenbank auf MSTest</a></li>
<li><a href="../de481476/index.html">Wie ich anfing auf Konferenzen zu sprechen und nicht aufh√∂ren kann</a></li>
<li><a href="../de481478/index.html">STM32 + CMSIS + STM32CubeIDE</a></li>
<li><a href="../de481482/index.html">Cross-Posting auf eine Facebook-Seite mit dem PHP-SDK</a></li>
<li><a href="../de481484/index.html">Die KI, die versucht, Probleme zu vermeiden, lernte komplexes Verhalten</a></li>
<li><a href="../de481486/index.html">‚ÄûAm Leben bleiben, am Leben bleiben‚Äú: Das neue Protokoll wird den Radius der m√∂glichen Nutzung von WLAN um 60 Meter vergr√∂√üern</a></li>
<li><a href="../de481488/index.html">Wie die Beamten der Region Moskau die Luftverschmutzung messen</a></li>
<li><a href="../de481490/index.html">Vitamin D. Ein kurzer Ausflug</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>