<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ญ ๐ค๐ป ๐ฒ ุซูุงุซ ุนููู ูุนููุฉ ุนูู ุนููุฏ ุ ุฃู ุญูุงูุฉ ุฃู ุฎูุณุฉ ุฃุฑุฌู ูู ATtiny13 ูุงููุฉ โฌ๏ธ ๐ฉ๐พโ๐คโ๐จ๐ฟ ๐ง๐ผ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="KDPV "ุฃูู ุ ูุฐุง ูู ุดูุก." 


 ููุงู ุงุญุชูุงู ุถุฆูู ูู ุฃู ูุตุจุญ ูุฐุง ุงูุฎุท ุงูุทููู ูุตุฏุฑูุง ููุนููุง ุจุงูุญููุฉ ูููุซูููู ุ ููุชุทูุฑูุง ูู ุฃุณุฑุงุฑ ุงูุนุฑุงูุฉ ุนูู ุจุทุงูุงุช ูุงุฑูู ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุซูุงุซ ุนููู ูุนููุฉ ุนูู ุนููุฏ ุ ุฃู ุญูุงูุฉ ุฃู ุฎูุณุฉ ุฃุฑุฌู ูู ATtiny13 ูุงููุฉ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443188/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/51/tw/-p/51tw-pewtw_nf5txookeohz5qga.jpeg"><br>  <em>KDPV "ุฃูู ุ ูุฐุง ูู ุดูุก."</em> </p><br><p style=";text-align:right;direction:rtl">  ููุงู ุงุญุชูุงู ุถุฆูู ูู ุฃู ูุตุจุญ ูุฐุง ุงูุฎุท ุงูุทููู ูุตุฏุฑูุง ููุนููุง ุจุงูุญููุฉ ูููุซูููู ุ ููุชุทูุฑูุง ูู ุฃุณุฑุงุฑ ุงูุนุฑุงูุฉ ุนูู ุจุทุงูุงุช ูุงุฑูู ููุนุฑูุฉ ุงููุนูู ุงูุณุฑู ูููููุฐุฌ ุงูุนุงุฏู ุงูุซุงูุซ.  ูููู ุฅุฐุง ููุช ูุฏ ููุณุช ููุณุชู ุงุฑุฏูููู ุจูุฏูู ุ ูุณุจุจ ูุง ุ ูุฅู ุงููููุงุฉ ุงูููุญููุฉ ุชุฌูุน ุงูุบุจุงุฑ ูู ุงููุฎุฒู ุ ูุฃูุช ุชููู ุณุจุจ ุงุญุชูุงุก ุงูุจุทุงุฑูุฉ ุนูู ูุงุญุฏ ุฒุงุฆุฏ ุ ุจูููุง ุชุญุชูู C ++ ุนูู ุงุซูุชูู ุ ููู ุชุชุฑูู ุงููุนุฌุฒุงุช ุงูุณุญุฑูุฉ ูุงููุฐููุฉ ุญููุง ุบูุฑ ูุจุงููุฉ.  ูุฐูู ุ ูุณุนุฏูู ุฃู ุฃูุตููู ุจุฃุฑูุงู ุฃุฏุงุก ุงูููู ููุณูุฑู ุงููุชุดุฑุฏ <abbr title="ููุณุช ูุฐู ูู ุฃุณูุงุก ุงูููุงููู ูุงูุทูุจ ุงููุจูู ูู ุงูุทูุจ ูุงูุทูู ูุงูุฃุดูุงุก ุงูุฃุฎุฑู ุ ููู ุฎุดุจ ุงูุจูุณ - ููุน ูู ุงูุฃุดุฌุงุฑ ุงูุซูููุฉ.">"Saman with Boxwood"</abbr> : </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุถููุง RAM ู ROM ุฅูู ATtiny13! </li><li style=";text-align:right;direction:rtl">  ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูู ุงููุนุงูุฌ ุงูุฏููู - ุงููุคูุฏ ููููุชุฑุง ุ ุฃู ุงูุฌูุงู ุงููุงุฆู - ุญุณูุง ุ ูู ูู ููุณุช ุฃุญููุ </li><li style=";text-align:right;direction:rtl">  ุฃู ุฃููุง ูุง ุชุฒุงู dura lex sed lexุ </li><li style=";text-align:right;direction:rtl">  ููููุฉ ุฅุถุงูุฉ ุงูุณุงููู ุฅูู ATtiny13ุ </li><li style=";text-align:right;direction:rtl">  ุจุถุน ูููุงุช ุนู ุงูุจุนุฏ ุงูุฎุงูุณ: ููููุฉ ุญุดุฑ ูุง ูุง ูุทุงูุ </li><li style=";text-align:right;direction:rtl">  ูุดุฑ ูู ูุตู ุบูุฑ ุงูุนุฐุงุฑู ูุน ุฎูุท ูุญุชููุงุช ูุตูู (ูุน ุถูุงู ุงูุงูุชุนุงุด). </li><li style=";text-align:right;direction:rtl">  "ุฅุทุนุงู ุงูููููุจูู" (ุงูุธุฑ ุงูุญุงูุฉ ุงูุณุงุจูุฉ ูุฎูุณุฉ ุขูุงู ุดุฎุต ูุชู ุชุดุจุนูู ูุน ุฎูุณุฉ ุฃุฑุบูุฉ ูู ุงูุดุนูุฑ ูุณููุชูู). </li></ul><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุฅุญุฏู ุงูุญูู ุนูู ุงูุฃูู ูู ูุชูุงูู ูุฏู ูู ูุงุฑุฆ ุนุดุฑูู ูู ุงููุณุชูุจู ุ ูุณูู ุฃููู ุฑุงุถููุง ุนู ุฐูู ุ ูุงูููุงู ููุชูุจูุง ุจูุง ุฌุฏูู. </p><a name="habracut"></a><br><h2 id="svetofor-pervyy-ili-kaa-prinimaet-boy" style=";text-align:right;direction:rtl">  ุฃูู ุฅุดุงุฑุฉ ูุฑูุฑ ุฃู Kaa ุชุฃุฎุฐ ุงููุนุฑูุฉ. </h2><br><p style=";text-align:right;direction:rtl">  ุจุฏุฃุช ุงููุตุฉ ุ ููุง ูู ุงูุญุงู ูู ุดุฑูุท ููุฏูู ููุงุณููู ูุนูุฏ ุงููููุงุฏ ูุจู ุงููููุงุฏ ุ ุนูุฏูุง ุชูุธุฑ ุงููุงููุฑุง ุนุจุฑ ูุงูุฐุฉ ูุชุฌูุฏุฉ ุฅูู ุบุฑูุฉ ุตุบูุฑุฉ ูุฑูุญุฉ: ุดุฌุฑุฉ ุนูุฏ ุงููููุงุฏ ูู ุจูุฑุฌ ุ ุตูู ูู ุงููุทู ููุนุจ ุ ูุฑุงุฆุญุฉ ุงูููุณูู ูุงููุจูุฐ ุงูููุฏูุฑ ุ ูุตุฏูุฉ ุฏุงูุฆุฉ ูู ุธูุงู ุงูุดููุน.  ุนูู ุงูุฃุฑููุฉ ุงููุจูุฑุฉ ุ ุชููู ุจุชุตููุจ ููููุดุฉ ูุชุถุบุท ุจุฑูู ุนูู ุฎุฏู ุ ูุชุณุชูุน ุจุฐููู ุฅูู ุงููุชุงุฉ ุงูุตุบูุฑุฉ ุงูุชู ุชุดุจู ุงูููุงู ุจุญูุงุณ ... </p><br><p style=";text-align:right;direction:rtl">  ุฃููุฆู ุงูุฐูู ูุฏููู ุฎุจุฑุฉ ุฃุจููุฉ ูุนุฑููู ุชูุงู ุงููุนุฑูุฉ ูุง ุงูุฐู ูููู ุฃู ุชุณูุนู ุจุงูุถุจุท ูู ูุฐู ุงููุญุธุฉ.  ุณุฃุดุฑุญ ูุฃููุฆู ุงูุฐูู ูู ููุชุณุจูุง ุจุนุฏ ูุซู ูุฐู ุงูููุงุฑุฉ - ูุน ุฏุฑุฌุฉ ุนุงููุฉ ูู ุงูุงุญุชูุงู ุ ุฃุตุจุญ ุงูุขุจุงุก ุงูุขู ูุตูุฑูู ุฅูู ุดูุก ูุซู: "ุฃุจู!  ูุญู ุบุฏุง!  ุฅูู ุฑูุงุถ ุงูุฃุทูุงู!  ูุฌุจ ุนูู!  ุฌูุจ ุงูุญุฑู ูู ูุณุงุจูุฉ ุดุฌุฑุฉ ุนูุฏ ุงููููุงุฏ!  ูุฃุฑูุฏ ุงูููุงู ุงูุฃูู! " </p><br><p style=";text-align:right;direction:rtl">  ุฅูู ุถุฑูุฑู.  ุบุฏุง  ููุง  ุงูุญุฑู ุงููุฏููุฉ.  ุงูุฃูุถู. </p><br><p style=";text-align:right;direction:rtl">  ุชูุถุญ ุงูููุงุจูุฉ ุงูุชู ุชูุช ูุน ุงูุนููู ุญุฏูุฏ ุจูุงู ุงูุนูู: ูุญู ุจุญุงุฌุฉ ุฅูู ุฅุดุงุฑุฉ ูุฑูุฑ.  ูููู ุชููู ุฌูููุฉ ูุชููุฌ ูุซู ุญูููู.  ุจุงููุนู ูู ูุฐู ุงููุฑุญูุฉ ุ ุชุชูุงูุต ุฃุนุฏุงุฏ ุงููุฑุดุญูู ููุดุฑูุน ISU ุจุดูู ุฏุฑุงูุงุชููู: ุงูุฃุจ ุบูุฑ ูุงุฏุฑ ุนูู ุฅุซุจุงุช ููุฑุฉ ุฃู ุงูุฅุดุงุฑุฉ ุงูุถูุฆูุฉ ุงูุฌูููุฉ ุฃู ุงููุงุนูุฉ ุฃู ุงููุฑูุนุฉ ุฃู ุงููุญุจููุฉ ุฃู ุงููุฑูุดูููุฉ ุชูุซู ุชุฌุณูุฏูุง ูุฃุญูุงู ุงูุนููู: ูุฌุจ ุฃู ุชููู ุฅุดุงุฑุงุช ุงููุฑูุฑ ุบูุฑ ูุงุถุญุฉุ </p><br><p style=";text-align:right;direction:rtl">  ุชุฏุญุฑุฌุช ุงููููุฉ ููู ุงูุจูุงุฏ ูุจุฏุฃ ุงูุนูู ูุบูู ูู ุจูุฏูุง. </p><br><p style=";text-align:right;direction:rtl">  ูุงุฏุฉ ุฌุณู ุฅุดุงุฑุงุช ุงููุฑูุฑ ุนุจุงุฑุฉ ุนู ุบูุงู ูุฑู ุชูุงููุช ูุถุบูุท ูุชุดููู ุตูุฏูู.  ูุงูุช ุงูุนููุฉ ุฐุงุช ุงูุนุดุฑุฉ ุฑูุจู ูุญุงุทุฉ ุจููู ุฑุตุงุต ุ ุซู ุชู ูุทุน ุงูุซููุจ ุจุณููู ูู ุฑุฌุงู ุงูุฏูู ุชุญุช ุฃุถูุงุก ุงูููุจู ุงูุถูุฆู (ูุง ูุซู ุงูุฃุทูุงู ูู ุงูุนูู ุงููุคูู). </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/op/0f/az/op0fazb4pjg1z5mtam3hvudxve4.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ูุชู ูุทุน ุฃุบุทูุฉ ุงูุฌุฒุก ุงูุนููู ูุงูุณููู ูู ุฅุดุงุฑุฉ ุงููุฑูุฑ ูู ุงููุฑู ุงููููู ูู ููุงูู.  ูุงูุช ุงูููู ููู ุงููุตุงุจูุญ ููููุง ููููุท ุงููุตููุน ุ ูุญุงุทุฉ ุจุฏุงุฆุฑุฉ ุนูู ุงููุฑู ุงูุนุงุฏู 80 ุบุฑุงูุงู ูุชู ูุทุนูุง ูุฏูููุง. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/rm/ga/5u/rmga5uloolpi1di2umlqxn9lzmw.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุซู ุชู ูุตููุง ุนูู PVA. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/9x/ql/ff/9xqlfftsq_fphcorsj7nimjlqo8.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุชู ุณุญุจ ุงูููุงูู ุงููุฌูุนุฉ ูู ุงูููุงุก ูุฑุณูุช ุจุทูุงุก ูู ุฑุฐุงุฐ ุงูุฃูุฑูููู: ูุถู ุจุณุฎุงุก ุ ุซู ุฃุณูุฏ ููููุงู ูู ุงูุฃุนูู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/hh/bm/ha/hhbmhaz7bod1ntgplrtyfeu3bgq.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุญุฏูุซ ุถุฑุฑ ูู ุฃู ูุฑุญูุฉ ุ ุชู ุนูู ุซูุงุซ ูุณุฎ ูุฑุฉ ูุงุญุฏุฉ.  ุชู ูุตู ุซูุงุซ ุดุฑุงุฆุญ ูู ุงููุฑู ุงููููู - ุงูุฃุญูุฑ ูุงูุฃุตูุฑ ูุงูุฃุฎุถุฑ - ูุน ูุฑุดุญุงุช ุงูุถูุก ุฏุงุฎู ุงูุฃูุซุฑ ูุฌุงุญูุง. </p><br><p style=";text-align:right;direction:rtl">  ุชู ุชุญุฏูุฏ ุงูุชูููุฒ ูู ุงูุฏุงุฎู ุจูุงุณุทุฉ ุฒูุฌ ูู ุงููุตุงุจูุญ ุงูุจูุถุงุก ูุงุฆูุฉ ุงูุณุทูุน ูู ุณูุงู ุงููุทู ุงูุณุฎูุฉ (SHZR).  ุฑูุถ ุงูุถูุฏุน Kaptershchitskaya ุจุดูู ูุงุทุน ุฃู ููุฏู ุฅูู ูุงูุฏ ูุฌูุฏ ุซูุงุซ ุจุทุงุฑูุงุช ููุซููู ุงูููุญูุฉ SCHR ุ ููู ุชูุงูู ุงููุตุงุจูุญ ุนูู ุชุฃูู ูู ูุงุญุฏุฉ ุ ูุดูุฑุง ุฅูู ุฃููุง ูุงูุช ุจูุถุงุก ููุดุฑูุฉ ุ ููุงู ุงูุฎูุงุถ ุงูุฌูุฏ ุนูููุง ูู 2.8 ุฅูู 3.9 ูููุช.  ูุงู ุงูุญุฏ ุงูุฃูุตู ุงูุฐู ุชูููุง ูู ุงููุณุงููุฉ ูุน ุงูุนูุฌูู ูู ุจุทุงุฑูุฉ AA ูุงุญุฏุฉ ุ ุญููุฉ ุงููุฑูุช ูู ุฎูู ุงูููุญุฉ ุงูุฃู ุงููุญุฑููุฉ ูุงูุชุฑุงูุฒุณุชูุฑ KT315.  ุงูุชูููุฑ ูุงูุบูุบู ุ ููุงู ุฃุจู ููุจูู ุงูุนุฑุถ.  ูุจุงููุธุฑ ุฅูู ุนุฏุฏ ุงูุฃููุงู ุงููุฑุญุฉ ูู ูู ูุฌููุนุฉ ูู ุฑูุงุถ ุงูุฃุทูุงู ุ ูู ุชูู ููุฑุฉ ุจุทุงุฑูุงุช ุงูููุซููู ุฌุฐุงุจุฉ ููุบุงูุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงุณุชุจุฏูุช ุฃุฌุณุงู ุฅุดุงุฑุงุช ุงููุฑูุฑ ุนูู ุงูุจุทุงุฑูุฉ ุฑุงุฆุญุฉ ุงูุฅุจุฑ ูุงูููุณูููู ุจุฑุงุฆุญุฉ ูุงุณูุฉ ูู ุงูุทูุงุก ุ ูุฏุฎู ูุงูุฏู ุจุนูู ูููุงุฉ ูุญุงู ุนูู ุงูุตููุจุฑู ุ ูุฌุฑุญ ุงูุฃุทูุงู ูุญููุงุช ูููุน ุงููููุฏุงุช (ูุณุฎ ูู ุงููุณุฎ) ุ ูู ุดูุก ุณุงุฑ ููููุง ููุฎุทุฉ ... </p><br><p style=";text-align:right;direction:rtl">  ููุง ุ "ูุฌุฃุฉ" ูู ุชุญุฏุซ ุชูู ุงููููุฉ: ูู ุงูุญูู ุนูุฏ ูู ุงููุญูู ูู ุฃู ุชููู ุนูู ุงูููุฑ ุจุชุตููุฉ ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุงูููุนุทูุงุช ุจุงุณุชุฎุฏุงู ุณูู ูุถุงุนู.  ูุง ุชุฎูุท ุจูู ุงูุฃููุฏ ูุงููุงุซูุฏ ูู ุงูุตูุงู ููุญุทุงุช ุงูุชุฑุงูุฒุณุชูุฑ KT315 ูุชูุตูู ููุงูุงุช ุงูููุงุช ุจุดูู ุตุญูุญ (ุฃู ุชุจุฏูููุง ุฅู ูู ููู ูุถุงุกุฉ) ูููุง ููุฎุทุท ุงูุฏุงุฆุฑุฉ.  J1 - ููุชุงุญ ุงูุทุงูุฉ ูู ูุตูุฉ ููุจููุชุฑ ุ ูุชู ุนุฑุถู ูุงุญููุง "ุนูู ุงูุณุทุญ" ูุฅุดุงุฑุฉ ุงููุฑูุฑ. </p><br><p style=";text-align:right;direction:rtl">  ููุฐ ูุชุฑุฉ ุทูููุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุนุฑููุฉ ุนูู ูุทุงู ูุงุณุน</a> ุฏุงุฆุฑุฉ ุจุณูุทุฉ ุชูุงูุง ูุฅูุชุงุฌ ุงูุฌูุฏ ุงููุชุฑุฏุฏ ูุน ููู 3-7V ูู ุจุทุงุฑูุฉ 1.5V G1. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fx/on/h5/fxonh57exbpayjclrpo3k05sazg.png"></p><br><p style=";text-align:right;direction:rtl">  ุฌุณุฏูุง ุ ูุชู ุชุถููู ูุฎุทุท ุงูุฏุงุฆุฑุฉ ุนูู ุงููุญู ุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/tt/aq/4u/ttaq4unttq55rdeg-f0tr0ti3zq.png"></p><br><p style=";text-align:right;direction:rtl">  ุงูุดุฑูุท ุงูุฃุญูุฑ ูุฏูู ุจุทุงุฑูุฉ ููููุฉ AA. </p><br><p style=";text-align:right;direction:rtl">  ูุฅุดุงุฑุฉ ุงููุฑูุฑ ููุณูุง ูู ูู ูุฐุง ุงููุจูู. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/2s/5w/dd/2s5wddfdxjkcl34w1mgj_neduyg.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ูู ุงูุตุจุงุญ ุ ูุงู ุงูุทูู ุงููุฎูุฑ ุจุณุญุจ ุงูููุชุฌ ุฅูู ุฑูุถุฉ ุงูุฃุทูุงู ุ ุญูุซ ุตูุนุช ุงููุนุจุฉ ุฏููุฉ ูุงุญุชูุช ูุฑูุฒ ุงูุตุฏุงุฑุฉ ุนูู ุดุฌุฑุฉ ุงููุฑูุณูุงุณ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/zz/fy/yc/zzfyyckk-i-jdncvaangd1cee8u.jpeg"></p><br><p style=";text-align:right;direction:rtl">  ุตุญูุญ ุ ูู ููุฌุญ ุงูุฃูุฑ ูุน ุงููุฑูุฒ ุงูุฃูู ูู ุงููุณุงุจูุฉ - ูุงู ุงูููุนุฏ ุงูููุงุฆู ูุชูุฏูู ุงููุดุงุฑูุงุช ุ ููุง ุงุชุถุญ ุ ูุจู ุนุฏุฉ ุฃูุงู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุฒู ุ ูุงู ููุงู ูุจูููู ุนูู ุนุชุจุฉ ุงููุงูุฐุฉ ูุนุฏู ุฑุถุง ุฃุจู ุงูุญูู ุนู ุญู ูููุฉ "ุฃุฑูุฏูุง ูุฅุดุงุฑุฉ ูุฑูุฑ ุญููููุฉ".  ููุงูุช ุงูููุฑุฉ ุชุฏูุฑ "ูู ูู ุงููููู ุฃู <abbr title="ุตูุงุฏูู ุณุฎูุฉ ูู ุงููุทู ุงูุฃู ุ ุฃู ุ ุนูู ุญุฏ ุชุนุจูุฑ ุฒูุฌุชู ุ ุชุญุชูุธ ุจูููุดููู.">ููุงุฆู</abbr> ุญูุงู ูุงููุงู ุ ูู ุงูุดูุก ุงูุซุงูุซ ุนุดุฑ ุ ุฃู ุงูุถูุฏุน ูุงู ูุฑูุฏ ูู <abbr title="ุตูุงุฏูู ุณุฎูุฉ ูู ุงููุทู ุงูุฃู ุ ุฃู ุ ุนูู ุญุฏ ุชุนุจูุฑ ุฒูุฌุชู ุ ุชุญุชูุธ ุจูููุดููู.">ShchZR ููุชุฑุฉ</abbr> ุทูููุฉุ ูู ุณูููู ููุงู ูุง ูููู ูู ุฎูุณุฉ ุฃุฑุฌู ุ ููููุจุงูุช ููุฑูุฒ ู 64 ุจุงูุช ูู ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู ููุฐุง ุ ููุง ูู ูุทููุจ ุ ูุซู ุงูุญู ุงูุญููููุ" </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ูู ูุฐุง ูุงู ูุฌุฑุฏ ููู ุ ูุตุฉ ุฎุฑุงููุฉ ุญูู ุงูุญู ุงูููุงุฆู ููุถูุฉ ุฅุดุงุฑุฉ ุงููุฑูุฑ ุงูููุจูุฉ. </p><br><h2 id="svetofor-vtoroy-kak-nastoyaschiy" style=";text-align:right;direction:rtl">  ุฅุดุงุฑุฉ ุงููุฑูุฑ ุงูุซุงููุฉ ุ ูุซู ูุงุญุฏุฉ ุญููููุฉ </h2><br><h3 id="ispolzuemyy-instrumentariy-materialy-i-dokumentaciya" style=";text-align:right;direction:rtl">  ุชุณุชุฎุฏู ุงูุฃุฏูุงุช ูุงูููุงุฏ ูุงููุซุงุฆู </h3><br><p style=";text-align:right;direction:rtl">  <em>ุงููุบุฉ / ุงูุฅุทุงุฑ</em> : C / Arduino 1.6 / 1.8. <br>  <em>IDE</em> : MS Visual Studio 2012 + ุงูุจุฑูุงูุฌ ุงููุณุงุนุฏ Visual Micro + git. <br>  <em>ููุฏู</em> : DipTrace. <br>  <em>HW</em> : ATtiny13 MK ุ ุงุณุชูุณุงุฎ Arduino Nano ุนูู ATmega328 ุ USB-UART ุนูู FT232R ุ ูุจุฑูุฌ USBISP ุจุฏูู ุงุณู ุงูุตูู. <br>  <em>ุชูููููุฌูุง <abbr title="ููุญุฉ ุงูุฏูุงุฆุฑ.">PP</abbr></em> : <abbr title="ุชูููููุฌูุง ุงูููุฒุฑ ูุงูุญุฏูุฏ.">LUT</abbr> . <br>  <em>ุงูุฃุฏูุงุช</em> : ุญุงู ุงูุญุฏูุฏ ุ ูุณุฏุณ ุงูุบุฑุงุก ุ ูุฑู ุงููุทุจุฎ ุ ุงูุณููู ุ ุงูููุต ุ ููุงุทุน ุงูุฃุณูุงู. <br>  <em>ุงูููุงุฏ</em> : ูู <abbr title="ูุณุชูุฏุน ุงูููููุงุช ุงูุฅููุชุฑูููุฉ ุฐุงุช ุงูุฃูุฏุงุฑ ุงูุตุนุจุฉ - ููุญูู ุ ูุณุชุฎุฏู ุ ูุชู ุดุฑุงุคู ูุฑุฉ ูุงุญุฏุฉ ุนูู Aliexpress ุ ุฅูุฎ.">ShchZR</abbr> - 4 ูุตุงุจูุญ LED ููุฅุฎุฑุงุฌ ุจุงูููู ุงูุฃุญูุฑ ูุงูุฃุตูุฑ ูุงูุฃุฎุถุฑ ูู ุนูุงูุฉ ุชุฌุงุฑูุฉ ุจุฏูู ุงุณู ุ ูููุซู ุงูุชูุชุงููู SMD ูุฒูุฌ ูู ุงูููุงููุงุช 0805 ููู 10 ูููู ุ ูุตู ุฏุฒููุฉ ูู ุงููุฎุฑุฌุงุช ุฐุงุช 0.25W ููุงูู ููุชูุงุฑ ุงูุญุงูู ุ MF-25 ุ ููุญูู DC-DC ุตููู ุฐู ุฎุทูุงุช ูุถุงุนูุฉ ูุน ุงูุทูุงุก ุงููุถู ูุงูุฃุณูุฏ ุ ูุฑูุฉ A4 ุ ุทูู ุงูุจููููุฑ ูู ุงูุจูุน. </p><br><p style=";text-align:right;direction:rtl">  <em>ุชุชููุฑ ุงููุตุงุฏุฑ ูุงููุซุงุฆู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Github</a> ุจููุฌุจ ุชุฑุฎูุต MIT ุ ุชูุชุฒู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ ุจุชูุฑุงุฑ ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ุงูููุถุญ ุฃุฏูุงู ุ ุฌููุน ูุณุงุฑุงุช ุงููููุงุช ุงููุฐููุฑุฉ ูุฑุชุจุทุฉ ุจุฌุฐุฑ ุงููุณุชูุฏุน.</em> </p><br><p style=";text-align:right;direction:rtl">  <em>ุงููุซุงุฆู</em> : <br>  ./docs/ATtiny13A datasheet.pdf [ููุงุตูุงุช MK Atmel ATtiny13A] <br>  ./docs/ATmega328 datasheet.pdf [ููุงุตูุงุช Atmel ATmega328 MK] <br>  ./docs/AVR4027 - ูุตุงุฆุญ ูุญูู ูุชุญุณูู ุดูุฑุฉ C ุงูุฎุงุตุฉ ุจู. pdf [Atmel AVR4027: ูุตุงุฆุญ ูุญูู ูุชุญุณูู ุดูุฑุฉ C ุงูุฎุงุตุฉ ุจู ููููุฑูููุชุฑููุฑ AVR 8 ุจุช] <br>  ./docs/AVR4013 - PicoPower basics.pdf [ููุงุญุธุงุช ุนู ุฃูุถุงุน ุชูููุฑ ุงูุทุงูุฉ] </p><br><p style=";text-align:right;direction:rtl">  ูู ุงุฑุฏูููู <abbr title="ุงูุฅูุฌููุฒูุฉ ุจูุฆุฉ ุงูุชุทููุฑ ุงููุชูุงููุฉ">IDE</abbr> ุ ูุซู ุจุทุงููุฉ ูู ุงูุณุญุงุจุฉ.  ุงูุญุฐู ูู ุงูุณุฎุฑูุฉ ุงููุณูุนูุฉ ุงูุฎููุฉ ููู ูุง ูููู ุฃู ูููู ููุฏุณูุง ุจูู ุงููุจุฑูุฌูู ุงููุถูููู.  ููู Arduino ุ ููุธุงู ุจูุฆู ุ ุนุงุด ุ ุณูุนูุด ูุณูุนูุด ุ ูุจุณุจุจ ุจุณุงุทุฉ ุชุซุจูุช ุงูุจูุฆุฉ ุนูู ุฃุฌูุฒุฉ ุงูููุจููุชุฑ ุชุญุช ุฃูุธูุฉ ุชุดุบูู ูุฎุชููุฉ ุ ููุฃููู ูุงููุง ุฃูู ูู ุชููู ุ ุฏูู ุฃู ูููุงุช ุฎุงุตุฉ ููุตุญุญ ุฃุฎุทุงุก ุงูุฃุฌูุฒุฉ ุ ุจุงุณุชุฎุฏุงู ุจูุณ UART ููุญูู ุงูุฅููุงุน ุงูุฎุงุต ุ ุงูุชูููุฉ ูู MK ุญุดู ุฎุทูุฑุฉ ุฅูู ุญุฏ ูุง.  ูููุง ุงูุนู ููุงู ุ ูุณุชุนุฏ ูุจูุน ุญููุฉ ูู ุงูุญููุงูุงุช ุงููุณุชูุณุฎุฉ ุจุณุนุฑ ูุณุฎุฉ ุฃุตููุฉ ูุงุญุฏุฉ.  ุญูููุฉ ุฃูู ูู ูุจุงุฑ Atmegs ููููู ุชุตุญูุญ ููุทู ูุชุดุบูู ุงูุจุฑูุงูุฌ ุ ูุจุนุฏ ุฐูู ูุน ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุชุบููุฑุงุช ูููููุง ุฅูู tinka ููุณู - ููุฐุง ุฃูุถุง ุญุฌุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุฅูู ุฃูุฑ ุทุจูุนู ููุฑูุญ ุจุงููุณุจุฉ ูู ุฃู ุฃุนูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">MS VisualStudio</a> ุ ูููุณ ูุฏู ูุณุงุญุฉ ูุจูุฑุฉ ูู AtmelStudio ุฃู WinAVR ููุง ุฃุฑูุฏ ุฃู ุฃุฌุฏูุง ุ ุจุฏูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตุญุญ ุฃุฎุทุงุก ูู ุงูุฃุฌูุฒุฉ ุ</a> ููุณุช ูุฏูููุง ูุณุงุฆู ุงูุฑุงุญุฉ ุงูููุงุฆูุฉ.  ุญูู ุงููููู ุงูุฅุถุงูู VisualMicro ุ ุงูุฐู ูุถูู ุฏุนู Arduino ุฅูู MS VisualStudio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุ ุชูุช</a> ูุชุงุจุชู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุจุงููุนู</a> ุจุชูุงุตูู ูุงููุฉ ูุชู ูุชุงุจุชู ุจุฐูุงุก ูู Haber. <br>  ุชู ุฃูุถูุง ุงูุชุฑููุฒ ุนูู "Arduino ุนูู ATtiny13" ุนูู ุงููุญูุฑ ููุฐ ูุชุฑุฉ ุทูููุฉ ูุจุดูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุชูุฑุฑ</a> . </p><br><p style=";text-align:right;direction:rtl">  ุจุงุฎุชุตุงุฑ ุ ุฃุถู ูุญุฏุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">MicroCore</a> ุฅูู ุงูุชุซุจูุช ุงููุซุจุช ูุจูุฆุฉ Arduino ุ ูุจุนุฏ ุฐูู ูุตุจุญ ูู ุงููููู ุงุฎุชูุงุฑ ATtiny13 MK ูู ุงูุจุทุงูุงุช ุงููุณุชูุฏูุฉ. </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/9f/rm/fe/9frmfek8wvpfsphvtyhedqiiuoy.png"></p><br><p style=";text-align:right;direction:rtl">  ุจูุงุจุฉ - ูุง ุจุฏูู ูุฃู ุ ุญุชู ุฃูุซุฑ ุงููุดุงุฑูุน ุงูููุฒููุฉ.  ุงูุนุงุฏุฉ ุจุณูุทุฉ ูููููุง ุตุญูุญุฉ: ุนูุฏ ุจุฏุก ุงูุนูู ูู ุฃู ุจุฑูุงูุฌ ุ ุจุจุณุงุทุฉ ุงูุชุจ "git init" ูู ุงูุฏููู ูู ุณุทุฑ ุงูุฃูุงูุฑ.  ุณูููุฑ ุงูุฏุนู ุงููุฏูุฌ ูู MS Visual Studio ูุงูุชุฒุงูุงุช ูู ุงููุณุชูุฏุน ุงููุญูู ุงูููุช ูุงูููุช ุฃูุซุฑ ูู ูุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  DipTrace ุ ูุซู CAD ููุฏุงุฑุงุช ูููุญุฉ ุงูุฏุงุฑุงุช ุงููุทุจูุนุฉ ุ ูุฑูุญุฉ ุ ูุญููุฉ ุ ูุงูุฏุงุฆุฑุฉ ูุงูุฃุณูุงู ุณููุฉ ุงูุงุณุชุฎุฏุงู ุ ููู ุงูุณูู ุฅุถุงูุฉ ููููุงุช ูุฎุตุตุฉ (UGO ุ ุฌูุงุช ุงุชุตุงู) ุ ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ูููู ุฃู ุชููู ููุญุฉ ุงูุฏูุงุฆุฑ ุงููุทุจูุนุฉ ูุน ููููุงุช ููุชููุฉ ูู 3D ุ ูุชู ุชุถููู ุฏุฑูุณ ูุณุงุนุฏุฉ ุนุงููุฉ ุงูุฌูุฏุฉ ูุงูุชุฏุฑูุจ.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ุฃูุนุฌุจุช ุจุณูุงุณุฉ ุงูุชุฑุฎูุต ุงูุฎุงุตุฉ ุจูู: ูููุฏ ุงูุชุฑุฎูุต ุงูููุงุณู ุบูุฑ ุงูุฑุจุญู (1000 ุฏุจุงุจูุณ ุ 4 ุทุจูุงุช ุฅุดุงุฑุฉ) ุ ูุฌุงููุง ูุฑูุณูุง ูุฃููุฑุงููุง ูุฌูููุฑูุฉ ุจููุงุฑูุณูุง ุ ูู 99ูช ูู ุงูุญุงูุงุช ุชููู ููุญุฑู ุงููุฏููุฉ ุงูููุฒููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูู ุฃุชููู ูู ุฌุนู Arduino Nano ูุนูู ุจุดูู ุตุญูุญ ุ ููุจุฑูุฌ ุญูู ุ ูููู ูุน ูุจุฑูุฌ USB ISP ุ ูุชู ุญู ุงููุดููุฉ ุจุณูููุฉ.  ุฑุณู ุณุฑูุน ูููููุงุช ุงูุฏูุนูุฉ ููุชุฌููุน / ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ - ูู ุงูุฏููู ./gcc ูู ุงููุดุฑูุน. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุชุตููู ููู .ino (ูู ุงููุงูุน ูู C / C ++) ุจุดูู ุตุญูุญ ูู ุงูุงุณุชูุฏูู "ุถูู arduino ุถูู ATtiny13" ุ ูุชู ุชูุฏููู ุจุจุณุงุทุฉ ุจูุงุณุทุฉ ูุนููุฉ ููู ุงูุฏููุนุงุช ูุฐุง ูู ุณุทุฑ ุงูุฃูุงูุฑ: </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext">&gt;"./gcc/0_MAKE &amp; upload.cmd" MyArduinoFile.ino</code></pre><br>
<p>     ISP ,     ,      .</p><br>
<pre><code class="plaintext">&gt;"./gcc/0_MAKE &amp; asm.cmd" MyArduinoFile.ino</code></pre><br>
<p>   , ,     โ   ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  AVR</a>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> . <strong></strong>: <em>         ,  </em>.</p><br>
<h3 id="dusha-svetofora"> </h3><br>
<h4 id="upgrade-romram-pod-arduino-dlya-attiny13">Upgrade ROM&amp;RAM  Arduino  ATtiny13</h4><br>
<p> Arduino  ( setup(){...}; loop(){...};)       ""   - int main(){setup(); loop();}, <em></em>        by Arduino. </p><br>
<pre><code class="cpp">uint8_t cnt;
void setup() {
    cnt=0;
}
void loop() {
  cnt++;
}
//Program size: 164 bytes (used 16% of a 1 024 byte maximum) (0,57 secs)
//Minimum Memory Usage: 5 bytes (8% of a 64 byte maximum)</code></pre><br>
<p>    ,       :</p><br>
<pre><code class="cpp">uint8_t cnt;
int main(){
    cnt=0;      // &lt; setup()
    while(1){
        cnt++;  // &lt; loop()
    }
}
//Program size: 60 bytes (used 6% of a 1 024 byte maximum) (1,23 secs)
//Minimum Memory Usage: 1 bytes (2% of a 64 byte maximum)</code></pre><br>
<p>   16%  6%   ,  ,  6%     .                   ,   โ      64  . </p><br>
<h4 id="intellekt-spyaschey-krasavicy">  </h4><br>
<p>  , ,  :       .         ,     ,   ,    ,     .   , ,   ,     .         ,       :  <abbr title="   = -  +      +   + ">CPU</abbr>     ,       .    โ   ,     N  .      ""-CPU     ,       (9.6     /    1024 = 9370 ,      ) 1/9370 = 0.0001067 .      8-   .  ,   ,    ,     " ".      ,   ,  ,           "".      37    (256  0.0001067 = 0.027315; 0.027315  37 = 1.01065 ~= 1s). </p><br>
<p>  :     - (HW ,     1024 ),   8   โ    ,         ,    .</p><br>
<p><strong></strong>: <em> globalTimer   volatile,  ,         ,  ,     CPU        ,           </em>.</p><br>
<pre><code class="cpp">#include &lt;avr/io.h&gt;         //     IDE -  
#include &lt;avr/sleep.h&gt;      // ,  
#include &lt;avr/interrupt.h&gt;          //   
volatile uint16_t  globalTimer;     //     64   
//  -    globalTimer  1/37 
ISR(TIM0_OVF_vect){
    globalTimer++;  //       . , ,  while(1)   .
}
int main() {
    //     "  -". 
    set_sleep_mode(SLEEP_MODE_IDLE);    //   - .
    sleep_enable();                 //    
    TCCR0B = _BV(CS02) | _BV(CS00); //  0 - clock frequency / 1024
    TIMSK0 |= _BV(TOIE0);           //      overflow interrupt
    sei();                          //    
    while(1){
        //.........   
        sleep_cpu();    //     -   .
    }
}
//Program size: 128 bytes (used 13% of a 1 024 byte maximum) (0,86 secs)
//Minimum Memory Usage: 2 bytes (3% of a 64 byte maximum)</code></pre><br>
<h4 id="u-koshki-4-nogi-vhod-vyhod-zemlya-i-pitanies-zhalostlivaya-studencheskaya-pesnya">"  4 : , ,   "()   </h4><br>
<p> , ,       .<br>
   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> </a>,   ,    CPU,   /  /    .     <abbr title="General-Purpose Input/Output,  / (I/O)  ">GPIO</abbr>.</p><br>
<p>      Arduino   :     Arduino  pin_number      ( ):</p><br>
<pre><code class="cpp">pinMode(pin_number, OUTPUT); //   INPUT -   </code></pre><br>
<p>    /     ,   โ       .</p><br>
<pre><code class="cpp">Value = digitalRead(pin_input_number);  //Value -  HIGH  LOW (1  0)
digitalWrite(pin_outpit_number, Value);       //   pin_outpit_number - HIGH  LOW</code></pre><br>
<p> ""  ,   Wiring    ,  ,    Arduino (        )     (  )     (  ) (    ).</p><br>
<p><img src="https://habrastorage.org/webt/fp/di/ni/fpdiniruiiujuodrtyzrcfyljr8.png"></p><br>
<p>..   Arduino 7    11  PD7 โ    D.<br>
  digitalRead, digitalWrite, pinMode  ..,             ,   , ,      Wiring-      ,       .</p><br>
<p>   โ   ,    . ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">DIHALT</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>          .</p><br>
<p><img src="https://habrastorage.org/webt/rk/y8/sj/rky8sjzln3u1k3lndv0inksdxjm.jpeg"></p><br>
<p>   -    (<abbr title=" -  ">GPIO</abbr>)     ,  8-   โ  8    .     ,   6     (. ATtiny13 pinout,   ),  PB0  PB5,      PB5 โ     MK    .    -    : (     "B") <abbr title="Data Direction Register B,   -   ">DDRB</abbr>, <abbr title="Port B Input Pins Register,    0  1  ,  ">PINB</abbr>  <abbr title="Port B Data Register,      ">PORTB</abbr>.    โ  ,    ,   .  PB0, PB1, PB2, PB3, PB4, PB5 โ       B.      #include &lt;avr/io.h&gt; (   iotn13.h  ),      (PB0  0,..., PB5 โ 5)      IDE,        Arduino. </p><br>
<p><strong></strong>: <em>      ,    ,       .  ,  -      , , ,   DDRx GPIO ,   โ .       PORTx โ    ,  "-    ",   ,      โ   ,    PINx.       ,  50       0  1.        ,      </em>.</p><br>
<div class="spoiler"><b class="spoiler_title">, </b><div class="spoiler_text"><p>  PB2   HIGH, +5,   PB3  LOW, 0,    PB0 ,  โ      .<br>
DDRB   ,    PB0,   ( ) = 0 (PB0   ),     = 1 (PB2, PB3 โ ), ..     110,   โ  ,  1  0 โ    . </p><br>
<pre><code class="cpp">DDRB = 12;  //  000001100    - 12
//        (!)
//        pinMode().</code></pre><br>
<p>      โ  PORTB ,    =1 (PB2  HIGH),   โ  (PB3  LOW),  โ  , 01</p><br>
<pre><code class="cpp">PORTB = 8;  //(dec)8 === (bin)000001000
//  -        .</code></pre><br>
<p>             PINB,   ,    โ      .<br>
  ,          โ  .<br>
    3 (PB3)  :   1   ,    3  .<br>
3&lt;&lt;00000001 === PB3&lt;&lt;1 //  โ 00001000<br>
     , _BV(x),      (x&lt;&lt;1), .. _BV(PB3) โ     1.<br>
 _BV(PB3) | _BV(PB2)      00001100 (| โ   ).<br>
<strong></strong>: <em>      ,       ,     </em>.</p><br>
<pre><code class="cpp">PORTB |= _BV(PB3) | _BV(PB2); // 2  3   == 1,     PB2  PB3  HIGH,   PORTB  </code></pre><br>
<p>  0    ,          ,    .     0     1  .       ,  ,  1     ,   0 โ   0 .</p><br>
<pre><code class="cpp">PORTB &amp;= ~(_BV(PB3) | _BV(PB2)); //   PORTB 2  3  -  , LOW,   .</code></pre></div></div><br>
<p>     HW , - 0, Timer0.   GPIO,    ,   ,      datasheet ATtiny13,  -     -,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a> <abbr title="     328,     .">Ilya Ananev</abbr>      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">- 0</a>   ATmega328. </p><br>
<p>   ,    ,   .</p><br>
<pre><code class="cpp">TCCR0B = _BV(CS02) | _BV(CS00);    //    CS02  CS00  1 -   0 = clock frequency / 1024
TIMSK0 |= _BV(TOIE0);           //   TOIE0  1 -     TIM0_OVF
//      TIMSK0 = _BV(TOIE0);</code></pre><br>
<h4 id="gost-ili-zakon-est-zakon">    .</h4><br>
<p>      ,       .    ,    ,          .    -  ,        ,      ,    (!)   . </p><br>
<p>    ,       .           "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">   27.02.13</a>"  7    52289-2004     ,          .<br>
     (  ): ,   , ,  , , .</p><br>
<p>"*    "  "     2 ,    โ 3 . </p><br>
<p>               3        1 /.*"</p><br>
<p>   ,      (    ,      /  โ PERIOD_0  PERIOD_4,    โ  ).</p><br>
<pre><code class="cpp">#define ONE_SECOND  37      //     1 
#define QT_SECOND   9       //  

#define PERIOD_FLASH_GREEN  QT_SECOND           //    ( ) -    
#define PERIOD_FLASH_YELLOW ONE_SECOND * 1      //    -    - 
                                                        //  --- 
#define PERIOD_0    ONE_SECOND * 10 //R G R G   0.  ---   (10 )
#define PERIOD_1    ONE_SECOND * 3  //R g R g   1.  ---   (3 )     
#define PERIOD_2    ONE_SECOND * 1  //R Y R Y   2.  ---  (1 )
#define PERIOD_3    ONE_SECOND * 2  //RY Y RY Y 3. + ---  (2 ) 
#define PERIOD_4    ONE_SECOND * 7  //G R G R   4.  ---   (7 )
#define PERIOD_5    ONE_SECOND * 3  //g R g R   5.   --- (3 )
#define PERIOD_6    ONE_SECOND * 1  //Y R Y R   6.  ---  (1 )
#define PERIOD_7    ONE_SECOND * 2  //Y RY Y RY 7.  --- + (2 )</code></pre><br>
<p>  ,      ,    .</p><br>
<pre><code class="cpp">typedef struct{
    const uint8_t ddr_val_0;    // DDRB value -   
    const uint8_t port_val_0;   // PORTB value   -   
    const uint8_t ddr_val_1;    // DDRB value  -   "",   
    const uint8_t port_val_1;   // PORTB value - 
    const uint16_t flash_period;    // period of flashing -   _val_1  _val_0
    const uint16_t signal_period;   // period of this lighting state
}lightSignalization;            //   , _0  _1 -   , flash_long -   
// flash_period == 0,   ,   _val_0.
// signal_period == 0,         .</code></pre><br>
<p>  ,        128  โ     ,      .</p><br>
<h4 id="kak-nayti-v-attiny13-vosem-ili-devyat-pinov-vvoda-vyvoda">   ATtiny13  ( ?)  -</h4><br>
<p>   ,  ,   -  -     ,  :       6  . -  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">denvo</a>   "<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="> ?  RESET</a>"       5-     ,     ,      ,      ,   -   .</p><br>
<p>   -     :    --, ..      ,  7  .</p><br>
<p>     โ   , ,  ,   8,  ? </p><br>
<p> ,  -,      "reset", PB5,      . </p><br>
<p>   ,  ? , ,   ,    . , , ,  ,   ,  .</p><br>
<p> ,  , 8  9  -  ,    8  โ       .    ,    -,   , , ,   . </p><br>
<p>   โ    .</p><br>
<p>   :           โ         .           .</p><br>
<p>        :</p><br>
<p><img src="https://habrastorage.org/webt/hw/6_/6a/hw6_6aeekqqdlt7a0cqnk9kf2pa.png"></p><br>
<p> 1    PORTB |= _BV(GREEN_PIN) โ    (  ) ,   0 .. PORTB &amp;= ~(_BV(GREEN_PIN)) โ  (  ).<br>
  ,     ,      ?<br>
     (DDRB |= _BV(GREEN_PIN))   , DDRB &amp;= ~(_BV(GREEN_PIN)), GREEN_PIN   Hi-Z      .      (2.2 * 4)    5,   <abbr title=".  ,       ,        .">   </abbr>.</p><br>
<p>          .<br>
            โ ..    ,     ,    .</p><br>
<div class="spoiler"><b class="spoiler_title">, ,      </b><div class="spoiler_text"><p>,               .   ,    โ     ,   37/2=18      ,          ,    . :<br>
)   ,     ,  ,  ,     ;<br>
)   โ        ,      " "       4  ;<br>
)  ,       4 ( PERIOD_2-&gt;PERIOD_3  PERIOD_6-&gt;PERIOD_7);<br>
)  4                 .</p></div></div><br>
<p>  .</p><br>
<p><img src="https://habrastorage.org/webt/35/in/ym/35inymyguij4kl6qnsuckgz_ukq.png"></p><br>
<pre><code class="cpp">// PINB === 0 0 0 g r y0 btt y1
#define RED_PIN     PB3     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 
#define YELLOW0_PIN PB2     // OUT: 1 -  "-" 
#define YELLOW1_PIN PB0     // OUT: 1 -  "-" 
#define GREEN_PIN   PB4     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 

#define RED     _BV(RED_PIN)        // _BV -     (), 1&lt;&lt;VALUE
#define YELL0   _BV(YELLOW0_PIN)        //    -
#define YELL1   _BV(YELLOW1_PIN)
#define GREEN   _BV(GREEN_PIN)      //    - (  0 -   -)  DDRB.GreenPin=1</code></pre><br>
<p> โ  <abbr title=" ,      reset,     ISP "> </abbr> .    ,            ,   โ      ,    .</p><br>
<pre><code class="cpp">#define BUTTON_PIN      PB1
#define BUTTON_ON  !(PINB &amp; _BV(BUTTON_PIN))    //( (PINB &amp; _BV(BUTTON_PIN)) == 0)  //  " " -   LOW
#define BUTTON_OFF (PINB &amp; _BV(BUTTON_PIN))     //  " " -    HIGH, (     )</code></pre><br>
<p><strong><em>       ,   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="></a>,   n   ( ) n(nโ1) = nยฒโn .  4   12  ,         .   <abbr title=" +  + ">ยซ , ยป</abbr>  <abbr title=" + ">ยซ ,   ยป</abbr>        .</em></strong></p><br>
<div class="spoiler"><b class="spoiler_title">    12 LED</b><div class="spoiler_text"><p><img src="https://habrastorage.org/webt/oq/sn/le/oqsnlertvho7jlbhqt5ehp_fcks.png"></p></div></div><br>
<p>*** โ   ,         DDRx|PORTx,       , ..       .          โ   ,        ,         . </p><br>
<p>                     .***</p><br>
<h4 id="paru-slov-o-pyatom-izmerenii-kak-vpihnut-nevpihuemoe">    :   ?</h4><br>
<p>         lightSignalization.    lightSignalization        .    0  7  , 8 โ  ,  9 โ ,   ""   .     ,         0  7,      . ,  ,      .     3    ( 0  7)  8   --             .   if-   ,    .     ,   .</p><br>
<pre><code class="cpp">lightSignalization traffic_signals[] = {//   
 // {DDRB0, PORTB0,   DDRB_when_flashingif, PORTB_when_flasingif (if flashing),   continous of half-period flashing,   continous curr mode runing}
    {RED|GREEN, RED,   0, 0,   0, PERIOD_0},                    // R G R G
    {RED, RED,  RED|GREEN, RED,   QT_SECOND, PERIOD_1},     // R g R g - flash east green
    {RED|YELL1, RED|YELL1,   0, 0,   0, PERIOD_2 },         // R Y1 R Y1
    {RED|YELL0|YELL1, RED|YELL0|YELL1,  0, 0,   0, PERIOD_3 },  // RY0 Y1 RY0 Y1
    {RED|GREEN, GREEN,   0, 0,   0, PERIOD_4},              // G R G R
    {RED|GREEN, GREEN,   RED, 0,    QT_SECOND, PERIOD_5 },  // g R g R - flash nord green
    {RED|YELL0, YELL0,   0, 0,   0, PERIOD_6},                  // Y0 R Y0 R
    {RED|YELL0|YELL1,  YELL0|YELL1,   0, 0,   0, PERIOD_7  },       // Y0 RY1 Y0 RY1

    {YELL0|YELL1, YELL0|YELL1,   YELL0|YELL1, 0,  ONE_SECOND, 0},   // y0 y1 y0 y1 - flash yellows lights 
    {0, 0,   0, 0,   0, 0}          // traffic lights off, DDR in, Hi-Z
};

//       lightSignalization traffic_signals[]
#define LIGHT_NUM_YELLOW_FLASH  8       //       -  - flash yellows lights
#define LIGHT_NUM_STD_START     0       //       
#define LIGHT_NUM_LIGHTS_OFF    9       //      -   - traffic lights off</code></pre><br>
<p>  lightSignalization  8   . ..     traffic_signals[]  10     80  (,  64  ,  2     ).  ,        .</p><br>
<p> ,  , ,          โ    ROM,  ,    RAM   ,     .</p><br>
<p>-     </p><br>
<pre><code class="plaintext">const lightSignalization traffic_signals[] PROGMEM= {...</code></pre><br>
<p> ,           </p><br>
<pre><code class="plaintext">&lt;avr/pgmspace.h&gt; pgm_read_byte_near()  pgm_read_word_near()</code></pre><br>
<p> char  shortint .</p><br>
<p>     3   . </p><br>
<ol>
<li><p> ,   .<br>
   traffic_signals[] โ <strong>LIGHT_NUM_LIGHTS_OFF</strong><br>
{0, 0, 0, 0, 0, 0} // traffic lights off<br>
   โ  lightSignalization  ,     โ ,   lightSignalization.signal_period==0 (.. ),   lightSignalization.flash_period==0, ..   . </p><br>
</li>
<li><p> ,  .<br>
   traffic_signals[] โ <strong>LIGHT_NUM_YELLOW_FLASH</strong><br>
{YELL0|YELL1, YELL0|YELL1, YELL0|YELL1, 0, ONE_SECOND, 0}, // y0 y1 y0 y1 โ flash yellows lights<br>
   : lightSignalization.signal_period==0.      lightSignalization.flash_period=ONE_SECOND,    :</p><br>
<pre><code class="cpp">DDRB = YELL0|YELL1;     // YELL0, YELL1 - 
PORTB = YELL0|YELL1;    // YELL0, YELL1 = HIGH -  </code></pre><br>
<p></p><br>
<pre><code class="cpp">DDRB = YELL0|YELL1;     // // YELL0, YELL1 -   
PORTB = 0;              // YELL0, YELL1 = LOW -  </code></pre><br>
</li>
<li><p> , --.</p><br>
</li>
</ol><br>
<p> ,   . </p><br>
<p>  traffic_signals[]     โ <strong>LIGHT_NUM_STD_START</strong><br>
{RED|GREEN, RED, 0, 0, 0, PERIOD_0}, // R G R G<br>
   : lightSignalization.flash_period==0.<br>
DDRB = RED|GREEN; //RED  GREEN โ  ,  .<br>
PORTB = RED; //  RED โ HIGH (-      )<br>
//   GREEN โ LOW (  ,  - โ  )<br>
      lightSignalization.signal_period==PERIOD_0,       . </p><br>
<p>        current_signal.   2   โ        ,     lightSignalization.</p><br>
<pre><code class="cpp">uint8_t current_signal;     // 1    ,   traffic_signals
uint16_t tl_flash_end;      // 2       ( !0), 
uint16_t tl_signal_end;     // 2            ( !0)</code></pre><br>
<p> tl_signal_end != 0,   globalTimer&gt;tl_signal_end  current_signal.     0   current_signal,  3, .<br>
current_signal = current_signal &amp; B00000111;<br>
  </p><br>
<pre><code class="plaintext">current_signal &amp;= LIGHT_NUM_STD_MASK ;   //current_signal &amp; B00000111;</code></pre><br>
<p>  current_signal  ,       0  7.<br>
   globalTimer โ       . </p><br>
<div class="spoiler"><b class="spoiler_title">   </b><div class="spoiler_text"><pre><code class="cpp">#include &lt;limits.h&gt;         // USHRT_MAX
#include &lt;avr/sleep.h&gt;      // ,  
#include &lt;avr/interrupt.h&gt;  //   
#include &lt;avr/pgmspace.h&gt;   //    

#define ONE_SECOND  37      //     1 
#define QT_SECOND   9       //  
#define MAX_GLOBAL_TIMER_VALUE  (USHRT_MAX / 2)     // uint16_t globalTimer -   . 65535 /2 
//     ,  MAX_GLOBAL_TIMER_VALUE - 1
#define PERIOD_FLASH_GREEN  QT_SECOND           //    ( ) -    
#define PERIOD_FLASH_YELLOW ONE_SECOND * 1      //    -    - 
                                                        //  --- 
#define PERIOD_0        ONE_SECOND * 10     //R G R G   0.  ---   (15 )
#define PERIOD_1        ONE_SECOND * 3      //R g R g   1.  ---   (3 )     
#define PERIOD_2        ONE_SECOND * 1      //R Y R Y   2.  ---  (1 )
#define PERIOD_3        ONE_SECOND * 2      //RY Y RY Y 3. + ---  (2 ) 
#define PERIOD_4        ONE_SECOND * 7      //G R G R   4.  ---   (10 )
#define PERIOD_5        ONE_SECOND * 3      //g R g R   5.   --- (3 )
#define PERIOD_6        ONE_SECOND * 1      //Y R Y R   6.  ---  (1 )
#define PERIOD_7        ONE_SECOND * 2      //Y RY Y RY 7.  --- + (2 )

typedef struct{
    const uint8_t ddr_val_0;    // DDRB value    
    const uint8_t port_val_0;   // PORTB value  
    const uint8_t ddr_val_1;    // DDRB value    
    const uint8_t port_val_1;   // PORTB value
    const uint16_t flash_period;    // period of flashing -   _val_1  _val_0
    const uint16_t signal_period;   // period of this lighting state
}lightSignalization;            //   , _0  _1 -   , flash_long -   

//    (PINS === 0 0 0 g r y0 btt y1):
 //     ""     
#define BUTTON      PB1
#define RED_PIN     PB3     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 
#define YELLOW0_PIN PB2     // OUT: 1 -  "-" 
#define YELLOW1_PIN PB0     // OUT: 1 -  "-" 
#define GREEN_PIN   PB4     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 

#define BUTTON_ON  !(PINB &amp; _BV(BUTTON))    //( (PINB &amp; _BV(BUTTON)) == 0)  //  " "
#define BUTTON_OFF  (PINB &amp; _BV(BUTTON))    // ~(PINB &amp; _BV(BUTTON)) -\\- " "

#define RED     _BV(RED_PIN)            // _BV -     (), 1&lt;&lt;VALUE
#define YELL0   _BV(YELLOW0_PIN)        //
#define YELL1   _BV(YELLOW1_PIN)
#define GREEN   _BV(GREEN_PIN)

//       lightSignalization traffic_signals[]
#define LIGHT_NUM_YELLOW_FLASH  8       //       -  - flash yellows lights
#define LIGHT_NUM_STD_START     0       //       
#define LIGHT_NUM_LIGHTS_OFF    9       //      -   - traffic lights off
#define LIGHT_NUM_STD_MASK      7       // ___++ &amp;LIGHT_NUM_STD_MASK -    0  7   

//....................................  
// 
const lightSignalization traffic_signals[] PROGMEM= {   //   ,  ,   -, PINS === 0 0 0 g r y0 btt y1
 // {DDRB0, PORTB0,   DDRB_flashing, PORTB_flasinf (if flashing),   continuous of half-period flashing,   continuous id mode running}
    {RED|GREEN, RED,   0, 0,   0, PERIOD_0},                    // R G R G
    {RED, RED,  RED|GREEN, RED,   QT_SECOND, PERIOD_1},     // R g R g - flash east green
    {RED|YELL1, RED|YELL1,   0, 0,   0, PERIOD_2 },             // R Y1 R Y1
    {RED|YELL0|YELL1, RED|YELL0|YELL1,  0, 0,   0, PERIOD_3 },  // RY0 Y1 RY0 Y1
    {RED|GREEN, GREEN,   0, 0,   0, PERIOD_4},                  // G R G R
    {RED|GREEN, GREEN,   RED, 0,    QT_SECOND, PERIOD_5 },      // g R g R - flash nord green
    {RED|YELL0, YELL0,   0, 0,   0, PERIOD_6},                  // Y0 R Y0 R
    {RED|YELL0|YELL1,  YELL0|YELL1,   0, 0,   0, PERIOD_7  },   // Y0 RY1 Y0 RY1

    {YELL0|YELL1, YELL0|YELL1,   YELL0|YELL1, 0,  ONE_SECOND, 0},   // y0 y1 y0 y1 - flash yellows lights 
    {0, 0,   0, 0,   0, 0}              //  traffic lights off, 
};

volatile uint16_t  globalTimer;     //     64   
uint8_t current_signal;     // 1    ,   traffic_signals
uint16_t tl_flash_end;      // 2       ( !0), 
uint16_t tl_signal_end;     // 2            ( !0)

//....................................  
void setPeriods(uint8_t num, bool set_both_flash_and_signal);   //  tl_flash_end, tl_signal_end
void setPorts(uint8_t num, bool use_main_values);               //    

//....................................  
//
//  -    globalTimer  1/37 
ISR(TIM0_OVF_vect){
    globalTimer++;  //       . ,   while(1)   .
}

int main() {
//
bool use_main_values = true;            // lightSignalization._val_0 (1)  lightSignalization._val_1 (0)? -  
current_signal = LIGHT_NUM_STD_START;   //   .     .

    //     "  -". 
    set_sleep_mode(SLEEP_MODE_IDLE);    //   - .
    sleep_enable();                 //    

    TCCR0B = _BV(CS02) | _BV(CS00); //  0 - clock frequency / 1024
    TIMSK0 |= _BV(TOIE0);           //      overflow interrupt

    sei();      //    
    while(1){
        //   ? 
        if(globalTimer &gt; MAX_GLOBAL_TIMER_VALUE){
            globalTimer -= MAX_GLOBAL_TIMER_VALUE;          //   
            // 
            if(tl_flash_end){
                tl_flash_end -= MAX_GLOBAL_TIMER_VALUE;     //   ,  
            }
            if(tl_signal_end){
                tl_signal_end -= MAX_GLOBAL_TIMER_VALUE;    // //   ,  
            }
            // setPeriods(currentMode, false); //   12  ,  tl_.._end   ,     
        }

                //      (tl_flash_end !=0 )
        if(tl_flash_end){
            //     
            if(globalTimer &gt; tl_flash_end){
                use_main_values = !use_main_values;             // !use_main_values -      ))
                setPorts(current_signal, use_main_values);      //      
                setPeriods(current_signal, false);              //     ,   
            }
        }

        //         -    operating_std     - --
        if(tl_signal_end){
            //       (use_main_values -       -  )
            if((globalTimer &gt; tl_signal_end)  &amp;&amp; use_main_values){
                current_signal ++;                          //   
                current_signal &amp;= LIGHT_NUM_STD_MASK;       //    3-,        0  7
                use_main_values = true;                     //  -    
                setPorts(current_signal, use_main_values);  //        
                setPeriods(current_signal, true);           //       
            }
        }

        sleep_cpu();    //      -   .
    }
}

    //   
 void setPorts(uint8_t num, bool use_main_values){
    uint8_t val;
    DDRB = 0; PORTB = 0;
    //    () - ddr_val_0, else = ddr_val_1
//  val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0))
//                          : pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_1));

    //   ,  , ,  ,   ,   14 (!!!)   .
    val = pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0)+( (use_main_values) ? 0 : 2) ); 
    val &amp;= ~_BV(BUTTON);    //     - 
    DDRB = val;             //    

    val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].port_val_0)) 
                            : pgm_read_byte_near(&amp;(traffic_signals[num].port_val_1));
    val|= _BV(BUTTON);  //     -  -    
    PORTB = val;        //      
}

 //     ( 
void setPeriods(uint8_t num, bool set_both_flash_and_signal){
//  
    tl_flash_end = pgm_read_word_near (&amp;(traffic_signals[num].flash_period));   //  
    tl_flash_end = (tl_flash_end)? tl_flash_end + globalTimer : 0;  //    -      
    //if(tl_flash_end){         tl_flash_end += globalTimer;    } &lt;-     8  

    //     -    
    if(set_both_flash_and_signal){
        tl_signal_end = pgm_read_word_near(&amp;(traffic_signals[num].signal_period));  
        tl_signal_end = (tl_signal_end)? tl_signal_end + globalTimer : 0;           //     ,    
    }
}

//Program size: 610 bytes (used 60% of a 1 024 byte maximum) (0,58 secs)
//Minimum Memory Usage: 7 bytes (11% of a 64 byte maximum)</code></pre></div></div><br>
<h4 id="slozhnaya-logika-prostoy-knopki">   </h4><br>
<p>     ,          .         โ   btn_cnt (     ),    (        )               .</p><br>
<pre><code class="cpp">#define PERIOD_PRESS_BUTTON_SHORT   QT_SECOND           //      -  
#define PERIOD_PRESS_BUTTON_LONG    QT_SECOND*6         //      - /
uint8_t scan_button_cnt;    //    
        //  
        if(BUTTON_ON){
            if(scan_button_cnt&lt;USHRT_MAX){
                scan_button_cnt++;      //   1/37     
            }
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_SHORT){
                    // ,     
            }
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_LONG){
                    //     
            }
        }
</code></pre><br>
<p>    โ      .</p><br>
<p><img src="https://habrastorage.org/webt/fe/k6/6_/fek66_j4lcziqglnpmyudph1ujc.jpeg"></p><br>
<p>     SLEEP_MODE_IDLE (     CPU),   PwrDown    SLEEP_MODE_PWR_DOWN โ         <del>  </del>   watchdog     INT0,   ,     โ      INT0.</p><br>
<p><img src="https://habrastorage.org/webt/0w/82/0k/0w820klrlwg0enib-pznejydfp0.png"></p><br>
<p> <abbr title=""></abbr>      .   7.Power management and sleep modes   ATtiny13  ,      5-10 ,          . </p><br>
<p>             8- ,    โ 2        . </p><br>
<pre><code class="cpp">//  uint8_t f_button_state_flags;       //        

//      MODES:  wakeup 11 -&gt; work 00 -&gt; tosleep 01 -&gt; pwrdown 11 -&gt; wakeup 11
#define MODE_LBIT 0
#define MODE_HBIT 1
#define FORCE_SET_NEW_SIGNAL_BIT        2   //             current_signal
//    3
#define LIGHT_SIGNAL_ALT_MODE_BIT       4   // =0 (--)  =1 ( )   
#define USE_FIRST_VALUES_LIGHT_BIT      5   //     -  lightSignalization  
#define SHORT_PRESS_FLAG_BIT    6   // , 1       
#define LONG_PRESS_FLAG_BIT     7 // , 1       </code></pre><br>
<p> ,       โ    ,    โ   CPU     .          ,         if-.</p><br>
<div class="spoiler"><b class="spoiler_title">   </b><div class="spoiler_text"><pre><code class="cpp">#include &lt;limits.h&gt;         // USHRT_MAX
#include &lt;avr/io.h&gt;         //     IDE
#include &lt;avr/sleep.h&gt;      // ,     
#include &lt;avr/interrupt.h&gt;  //   
#include &lt;avr/pgmspace.h&gt;   //    

#ifdef GIMSK    //  ATtiny13 -       
#define F_CPU 9600000UL     //      ,   
#define ONE_SECOND  37      //     1 
#define QT_SECOND   9       //  
// GIMSK &amp;= ~_BV(INT0); -   INT0  
#define DISABLE_EXTERNAL_INT0   GIMSK &amp;= ~(_BV(INT0)); GIFR  &amp;= ~(_BV(INTF0))   //EIMSK/EIFR  
//GIMSK |= _BV(INT0) -   INT0
#define ENABLE_EXTERNAL_INT0    GIMSK |= _BV(INT0)  ; GIFR  &amp;= ~(_BV(INTF0))
#else           // 328 -   
#define F_CPU 16000000UL
#define ONE_SECOND  64      //     1  - .   
#define QT_SECOND   16      //  
// 328 INT0 -  PD2...     ,       (,  ),            
#define DISABLE_EXTERNAL_INT0   EIMSK &amp;= ~(_BV(INT0)); EIFR  &amp;= ~(_BV(INTF0)) 
// ,   -  EICRA - ISC00-ISC01 == 00, lo level, EIMSK - INT0, EIFR-INTF0  
#define ENABLE_EXTERNAL_INT0    EIMSK |= _BV(INT0)  ; EIFR  &amp;= ~(_BV(INTF0))
#endif

#define MAX_GLOBAL_TIMER_VALUE  (USHRT_MAX / 2)     // uint16_t globalTimer -   . 65535 /2 
//     ,  MAX_GLOBAL_TIMER_VALUE - 1
#define PERIOD_PRESS_BUTTON_SHORT   QT_SECOND/2         //      ( - ) -  
#define PERIOD_PRESS_BUTTON_LONG    QT_SECOND*4         //      - /
#define PERIOD_FLASH_GREEN          QT_SECOND           //     ( ) -    
#define PERIOD_FLASH_YELLOW         ONE_SECOND * 1      //     -    - 

                                            //  --- 
#define PERIOD_0        ONE_SECOND * 5      // R G R G  0.  ---   (5 )
#define PERIOD_1        ONE_SECOND * 3      //R g R g   1.  ---   (3 )     
#define PERIOD_2        ONE_SECOND * 1      //R Y R Y   2.  ---  (1 )
#define PERIOD_3        ONE_SECOND * 2      //RY Y RY Y 3. + ---  (2 ) 
#define PERIOD_4        ONE_SECOND * 7      // G R G R  4.  ---   (7 )
#define PERIOD_5        ONE_SECOND * 3      //g R g R   5.   --- (3 )
#define PERIOD_6        ONE_SECOND * 1      //Y R Y R   6.  ---  (1 )
#define PERIOD_7        ONE_SECOND * 2      //Y RY Y RY 7.  --- + (2 )

//  /  .     -     
typedef struct{
    const uint8_t ddr_val_0;    // DDRB value    
    const uint8_t port_val_0;   // PORTB value  
    const uint8_t ddr_val_1;    // DDRB value    
    const uint8_t port_val_1;   // PORTB value
    const uint16_t flash_period;    // period of flashing -   _val_1  _val_0 ( =0,  )
    const uint16_t signal_period;   // period of this lighting state ( =0,       )
}lightSignalization;            //   , _0  _1 -   , flash_long -   

//    (PINS === 0 0 0 g r y0 btt y1):
 //     ""     
#define BUTTON_PIN  PB1     // ,   INT0. ,   ,  = LOW
#define RED_PIN     PB3     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 
#define YELLOW0_PIN PB2     // OUT: 1 -  "-" 
#define YELLOW1_PIN PB0     // OUT: 1 -  "-" 
#define GREEN_PIN   PB4     // OUT: 1 - "-" , 0 - "-" , IN -  , ,  (!) 

#define BUTTON_ON  !(PINB &amp; _BV(BUTTON_PIN))    //( (PINB &amp; _BV(BUTTON)) == 0)  //  " "
#define BUTTON_OFF  (PINB &amp; _BV(BUTTON_PIN))    // ~(PINB &amp; _BV(BUTTON)) -\\- " "

#define RED     _BV(RED_PIN)            // _BV -     (), 1&lt;&lt;VALUE
#define YELL0   _BV(YELLOW0_PIN)        //    -
#define YELL1   _BV(YELLOW1_PIN)
#define GREEN   _BV(GREEN_PIN)          //    - (  0 -   -)  DDR=1

//      lightSignalization traffic_signals[]
#define LIGHT_NUM_YELLOW_FLASH  8       //       ( ) -  - flash yellows lights
#define LIGHT_NUM_STD_START     0       //        (--)
#define LIGHT_NUM_LIGHTS_OFF    9       //      -   - traffic lights off
#define LIGHT_NUM_START_SHOW    10      //         
#define LIGHT_NUM_ERR           11      //   -     

#define MASK_LIGHT_NUM_STD      7       // ___++ &amp;= LIGHT_NUM_STD_MASK -    0  7   

//....................................  
// 
const lightSignalization traffic_signals[] PROGMEM= {   //   ,  ,   -, PINS === 0 0 0 g r y0 btt y1
 // {DDRB0, PORTB0,   DDRB_flashing, PORTB_flasinf (if flashing),   continuous of half-period flashing,   continuous id mode running}
    {RED|GREEN, RED,   0, 0,   0, PERIOD_0},                    // R G R G
    {RED, RED,  RED|GREEN, RED,   QT_SECOND, PERIOD_1},         // R g R g - flash east green
    {RED|YELL1, RED|YELL1,   0, 0,   0, PERIOD_2 },             // R Y1 R Y1
    {RED|YELL0|YELL1, RED|YELL0|YELL1,  0, 0,   0, PERIOD_3 },  // RY0 Y1 RY0 Y1
    {RED|GREEN, GREEN,   0, 0,   0, PERIOD_4},                  // G R G R
    {RED|GREEN, GREEN,   RED, 0,    QT_SECOND, PERIOD_5 },      // g R g R - flash nord green
    {RED|YELL0, YELL0,   0, 0,   0, PERIOD_6},                  // Y0 R Y0 R
    {RED|YELL0|YELL1,  YELL0|YELL1,   0, 0,   0, PERIOD_7  },   // Y0 RY1 Y0 RY1

    {YELL0|YELL1, YELL0|YELL1,   YELL0|YELL1, 0,  ONE_SECOND, 0},   // y0 y1 y0 y1 - flash yellows lights 
    {0, 0,   0, 0,   0, 0},             //  traffic lights off, 
    {RED|GREEN|YELL0, RED|YELL0,   RED|GREEN|YELL1, GREEN|YELL1,   1, PERIOD_2},        //  PERIOD_2  -      ,     

    {YELL0|GREEN, YELL0,   YELL1|GREEN, YELL1|GREEN,  1, 0}     //  -     
};

volatile uint16_t  globalTimer; //      64   
uint8_t scan_button_cnt;        //      
uint16_t tl_flash_end;          // 2       ( !0), 
uint16_t tl_signal_end;         // 2            ( !0) 
uint8_t f_button_state_flags;   // 1,        
// , 8    

#pragma region bits_of_f_button_state_flags 
    //      MODES:  wakeup 11 -&gt; work 00 -&gt; tosleep 01 -&gt; pwrdown 11 -&gt; wakeup 11
#define MODE_LBIT 0
#define MODE_HBIT 1
#define MODE_VALUE          ( f_button_state_flags &amp; 3 )    //  -   MODE_
#define SET_MODE_WORK       f_button_state_flags &amp;= ~(_BV(MODE_HBIT) );  f_button_state_flags &amp;= ~(_BV(MODE_LBIT) );// 00 - work
//  f_button_state_flags &amp;= ~( _BV(MODE_HBIT) | _BV(MODE_LBIT) ) -    ,  
#define MODE_WORK_VALUE     0
#define SET_MODE_TOSLEEP    f_button_state_flags &amp;= ~(_BV(MODE_HBIT)); f_button_state_flags |= _BV(MODE_LBIT)   // 01 - tosleep
#define MODE_TOSLEEP_VALUE  1
#define SET_MODE_PWRDOWN    f_button_state_flags |= _BV(MODE_HBIT); f_button_state_flags &amp;= ~(_BV(MODE_LBIT))   // 10 - pwrdown 
#define MODE_PWRDOWN_VALUE  2
#define SET_MODE_WAKEUP     f_button_state_flags |= _BV(MODE_HBIT); f_button_state_flags |= _BV(MODE_LBIT)      // 11 - wakeup  
#define MODE_WAKEUP_VALUE   3

#define FORCE_SET_NEW_SIGNAL_BIT        2   //             current_signal
#define IF_FORCE_SET_SIGNAL_FLAG        ( f_button_state_flags &amp; _BV(FORCE_SET_NEW_SIGNAL_BIT) )    // IF_ -    
#define SET_FORCE_SET_SIGNAL_FLAG       f_button_state_flags |=  _BV(FORCE_SET_NEW_SIGNAL_BIT)      // SET_ -    1
#define RES_FORCE_SET_SIGNAL_FLAG       f_button_state_flags &amp;= ~( _BV(FORCE_SET_NEW_SIGNAL_BIT) )  // RES_ -    0

//  3   

#define LIGHT_SIGNAL_ALT_MODE_BIT       4   // =0 (--)  =1 ( )   
#define IF_LIGHT_SIGNAL_ALT_MODE_FLAG   ( f_button_state_flags &amp; _BV(LIGHT_SIGNAL_ALT_MODE_BIT) )   //1( )  0(--)   ?
#define SET_LIGHT_SIGNAL_ALT_MODE_FLAG  f_button_state_flags |=  _BV(LIGHT_SIGNAL_ALT_MODE_BIT)
#define RES_LIGHT_SIGNAL_ALT_MODE_FLAG  f_button_state_flags &amp;= ~( _BV(LIGHT_SIGNAL_ALT_MODE_BIT) )
#define FLIP_LIGHT_SIGNAL_ALT_MODE_FLAG f_button_state_flags ^= _BV(LIGHT_SIGNAL_ALT_MODE_BIT)

#define USE_FIRST_VALUES_LIGHT_BIT      5   //     -  lightSignalization  
#define IF_USE_FIRST_VALUES_LIGHT_FLAG  (f_button_state_flags &amp; _BV(USE_FIRST_VALUES_LIGHT_BIT)) // lightSignalization._val_0 (1)  lightSignalization._val_1 (0)? -  
#define SET_USE_FIRST_VALUES_LIGHT_FLAG     f_button_state_flags |= _BV(USE_FIRST_VALUES_LIGHT_BIT)
#define RES_USE_FIRST_VALUES_LIGHT_FLAG     f_button_state_flags &amp;= ~( _BV(USE_FIRST_VALUES_LIGHT_BIT))
#define FLIP_USE_FIRST_VALUES_LIGHT_FLAG    f_button_state_flags ^= _BV(USE_FIRST_VALUES_LIGHT_BIT)     //  

#define SHORT_PRESS_FLAG_BIT    6   // , 1       
#define IF_SHORT_PRESS_FLAG     ( f_button_state_flags &amp; _BV(SHORT_PRESS_FLAG_BIT) )        // -   == 1
#define SET_SHORT_PRESS_FLAG    f_button_state_flags |= _BV(SHORT_PRESS_FLAG_BIT)
#define RES_SHORT_PRESS_FLAG    f_button_state_flags &amp;= ~(_BV(SHORT_PRESS_FLAG_BIT))

#define LONG_PRESS_FLAG_BIT     7 // , 1       
#define IF_LONG_PRESS_FLAG      ( f_button_state_flags &amp; _BV(LONG_PRESS_FLAG_BIT) )     // -   == 1
#define SET_LONG_PRESS_FLAG     f_button_state_flags |= _BV(LONG_PRESS_FLAG_BIT)
#define RES_LONG_PRESS_FLAG     f_button_state_flags &amp;= ~(_BV(LONG_PRESS_FLAG_BIT))
#pragma endregion

//....................................  
void setPeriods(uint8_t num, bool set_both_flash_and_signal);   //  tl_flash_end, tl_signal_end
void setPorts(uint8_t num, bool use_main_values);               //    
void inline init_timer_clock(){     //     
#ifdef GIMSK    //  ATtiny13 - 
    TCCR0B = _BV(CS02) | _BV(CS00); //  0 - clock frequency / 1024
    TIMSK0 |= _BV(TOIE0);           //      overflow interrupt
#else           //   , 328/16
    // 100 - prescaler 64; Foverflow = 16M/64*256 ~=976.56Hz,
    TCCR2B = (1&lt;&lt;CS22) | (1&lt;&lt;CS21) | (1&lt;&lt;CS20) ;  // 111 - CLK/1024, 16M/1024*254 - 1/64 
    TIMSK2 |=(1&lt;&lt;TOIE0);  // interrupt ovfl enable
    //Serial.begin(115200);
#endif
}

//....................................  
//
//  -  -    globalTimer  1/37 
#ifdef GIMSK    //  ATtiny13
ISR(TIM0_OVF_vect){
    globalTimer++;  //       . ,   while(1)   .
}
#else
//   0 -     , -   - -     2
ISR(TIMER2_OVF_vect){
    globalTimer++;
}
#endif
//   -    (,  ,    0)
ISR(INT0_vect){
    DISABLE_EXTERNAL_INT0;
    SET_MODE_WAKEUP;        //      POWER DOWN
    globalTimer = 0;        //  -  
    scan_button_cnt = 0;    //   
    RES_SHORT_PRESS_FLAG;   //
    RES_LONG_PRESS_FLAG;    //  
}

/*
//   - 
void inline dbg(){
    DDRB |= YELL0; PORTB ^= YELL0;
}
*/

//....................................  
//
int main() {
    uint8_t current_signal;             // 1    ,   traffic_signals

#pragma region Initialisation&amp;setup
    //     "  -". 
    set_sleep_mode(SLEEP_MODE_IDLE);    //   - .
    sleep_enable();             //    

    init_timer_clock();         //     

    globalTimer = 0;            //  -  
    SET_MODE_WORK;              //    
    SET_USE_FIRST_VALUES_LIGHT_FLAG;    //  
    scan_button_cnt = 0;        //   

    //       
    current_signal = LIGHT_NUM_START_SHOW;  //     -   /
    SET_FORCE_SET_SIGNAL_FLAG;              //    current_signal

    sei();      //    

#pragma endregion
    while(1){

#pragma region TimerOVF
        //   ? 
        if(globalTimer &gt; MAX_GLOBAL_TIMER_VALUE){
            globalTimer -= MAX_GLOBAL_TIMER_VALUE;          //   
            // 
            if(tl_flash_end){
                tl_flash_end -= MAX_GLOBAL_TIMER_VALUE;     //   ,  
            }
            if(tl_signal_end){
                tl_signal_end -= MAX_GLOBAL_TIMER_VALUE;    // //   ,  
            }
            // setPeriods(currentMode, false); //   12  ,  tl_.._end   ,     
        }
#pragma endregion

#pragma region ButtonState
        //  
        if(BUTTON_ON){
            if(scan_button_cnt &lt; USHRT_MAX){
                scan_button_cnt++;              //   1/37     
            }
            //   -  ,    
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_SHORT){
                SET_SHORT_PRESS_FLAG;       // ,     , 
            }
            if(scan_button_cnt &gt; PERIOD_PRESS_BUTTON_LONG){
                SET_LONG_PRESS_FLAG;        //     
            }
        }
#pragma endregion
#pragma region LightWorkLogic
        //      (tl_flash_end !=0 )
        if(tl_flash_end){
            //     
            if(globalTimer &gt; tl_flash_end){
                FLIP_USE_FIRST_VALUES_LIGHT_FLAG;               // !use_main_values -      ))
                setPorts(current_signal, IF_USE_FIRST_VALUES_LIGHT_FLAG);       //      
                setPeriods(current_signal, false);          //     ,   
            }
        }

        //         
        // -    operating_std     - -- 
        //    ,   +1   7
        if(tl_signal_end){
            //       (use_main_values -       -  )
            if((globalTimer &gt; tl_signal_end)  &amp;&amp; IF_USE_FIRST_VALUES_LIGHT_FLAG){
                current_signal ++;                          //   
                current_signal &amp;= MASK_LIGHT_NUM_STD;       //    3-,        0  7
                SET_FORCE_SET_SIGNAL_FLAG;      //    current_signal
            }
        }
#pragma endregion

#pragma region MODE_VALUELogic
        //   , 2  f_button_state_flags
        //? MODE_VALUE === pwrdown -&gt; wakeup -&gt; work -&gt; tosleep -&gt; pwrdown
        switch (MODE_VALUE){
        case (MODE_WAKEUP_VALUE):
            set_sleep_mode(SLEEP_MODE_IDLE);        //  !
            //   ,       - IF_BUTTON_LONG_FLAG
            if(IF_LONG_PRESS_FLAG){
                //      ?   !
                if(current_signal == LIGHT_NUM_LIGHTS_OFF){
                    //          ? LIGHT_NUM_ERR
                    current_signal = (IF_LIGHT_SIGNAL_ALT_MODE_FLAG) ? LIGHT_NUM_YELLOW_FLASH : LIGHT_NUM_STD_START;
                    SET_FORCE_SET_SIGNAL_FLAG;      //    current_signal
                }
            }
            //,  ...
            if(BUTTON_OFF){
                //      ,   
                if(IF_LONG_PRESS_FLAG){
                    SET_MODE_WORK;
                }else{  
                    //  , ,   ,  
                    SET_MODE_PWRDOWN;   //        
                }
                scan_button_cnt = 0;    //       
                RES_SHORT_PRESS_FLAG;   //   , 
                RES_LONG_PRESS_FLAG;
            }
            break;

        case (MODE_WORK_VALUE):
            //  ?
            if(scan_button_cnt &gt; 0){
                //   ?
                if(IF_LONG_PRESS_FLAG){
                    current_signal = LIGHT_NUM_LIGHTS_OFF;      //  
                    SET_FORCE_SET_SIGNAL_FLAG;                  //   -   " "
                    SET_MODE_TOSLEEP;                           //   !
                }
                // ? 
                if(BUTTON_OFF){
                    //     ?
                    if(IF_SHORT_PRESS_FLAG){
                        FLIP_LIGHT_SIGNAL_ALT_MODE_FLAG;    //     
                        current_signal = (IF_LIGHT_SIGNAL_ALT_MODE_FLAG) ? LIGHT_NUM_YELLOW_FLASH : LIGHT_NUM_STD_START; //    . 
                        SET_FORCE_SET_SIGNAL_FLAG;          //      current_signal
                    }
                    scan_button_cnt=0;
                    RES_SHORT_PRESS_FLAG; //    
                    RES_LONG_PRESS_FLAG;
                }
            }
            break;

        case (MODE_TOSLEEP_VALUE):
            //    -    .
            if(BUTTON_OFF){
                SET_MODE_PWRDOWN;       //    
            }
            break;

        case (MODE_PWRDOWN_VALUE):
            // !  , !  ?
            if(BUTTON_ON){
                set_sleep_mode(SLEEP_MODE_IDLE);
                SET_MODE_WAKEUP;
            }else{  
                //  ?  .
                scan_button_cnt = 0;
                RES_LONG_PRESS_FLAG;
                RES_SHORT_PRESS_FLAG;
                current_signal = LIGHT_NUM_LIGHTS_OFF;      // 
                SET_FORCE_SET_SIGNAL_FLAG;
                set_sleep_mode(SLEEP_MODE_PWR_DOWN);    //    -   while(1)
                ENABLE_EXTERNAL_INT0;                   //     
            }
            break;

        default:
            //!       -    .  -      
            current_signal = LIGHT_NUM_ERR;
            SET_FORCE_SET_SIGNAL_FLAG;
            //setPorts(current_signal,true);
            //setPeriods(current_signal,true);
            break;
        }
#pragma endregion

        //   ,      - ?
        if(IF_FORCE_SET_SIGNAL_FLAG){       //       current_signal
            RES_FORCE_SET_SIGNAL_FLAG;      //  
            SET_USE_FIRST_VALUES_LIGHT_FLAG;    //   -   0-   -
            setPorts(current_signal, IF_USE_FIRST_VALUES_LIGHT_FLAG);   //      #current_signal  
            setPeriods(current_signal, true);
        }

        //    1/37 . , ,  .
        sleep_cpu();    //       -   .
        }
}

//.................................... 
//
//    
 void setPorts(uint8_t num, bool  use_main_values){
    uint8_t val;
    DDRB = 0; PORTB = 0;
    //    () - ddr_val_0, else = ddr_val_1
//  val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0))
//                          : pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_1));

    //   ,    ,  ,   ,   14 (!!!)   .
    val = pgm_read_byte_near(&amp;(traffic_signals[num].ddr_val_0)+( (use_main_values) ? 0 : sizeof(uint8_t)*2 ) ); 

    val &amp;= ~_BV(BUTTON_PIN);    //    ,    - 
    DDRB = val;                 //    

    val = (use_main_values) ? pgm_read_byte_near(&amp;(traffic_signals[num].port_val_0)) 
                            : pgm_read_byte_near(&amp;(traffic_signals[num].port_val_1));
    val|= _BV(BUTTON_PIN);  //     -  -    
    PORTB = val;        //      
}

 //     (    )
void setPeriods(uint8_t num, bool set_both_flash_and_signal){
//  
    tl_flash_end = pgm_read_word_near (&amp;(traffic_signals[num].flash_period));   //  
    tl_flash_end = (tl_flash_end)? tl_flash_end + globalTimer : 0;  //    -      
    //if(tl_flash_end){         tl_flash_end += globalTimer;    } &lt;-     8  

    //     -    
    if(set_both_flash_and_signal){
        tl_signal_end = pgm_read_word_near(&amp;(traffic_signals[num].signal_period));  
        tl_signal_end = (tl_signal_end)? tl_signal_end + globalTimer : 0;           //     ,    
    }
}
//Program size: 976 bytes (used 95% of a 1 024 byte maximum) (0,83 secs)
//Minimum Memory Usage: 8 bytes (13% of a 64 byte maximum)</code></pre></div></div><br>
<p><em>Program size: 976 bytes (used 95% of a 1 024 byte maximum) (0,83 secs)<br>
Minimum Memory Usage: 8 bytes (13% of a 64 byte maximum)</em></p><br>
<p>.</p><br>
<p>    <del>  </del>      ATtiny13 .</p><br>
<h3 id="anatomiya--samshitovo-samannogo-svetofora"> - </h3><br>
<p>  (    ?)   .   โ   .           ,    ,  ,   .  ,     ,    .</p><br>
<div class="spoiler"><b class="spoiler_title">,  </b><div class="spoiler_text"><h4 id="mozgi"></h4><br>
<p> DipTrace       ยซยป      ยซPCB Layoutยป,     .        ,    . </p><br>
<p><img src="https://habrastorage.org/webt/0j/vq/ag/0jvqagommqperqd6t4vsqpuywbg.png"></p><br>
<p>   โ       .</p><br>
<p><img src="https://habrastorage.org/webt/ye/zr/b0/yezrb07pnfknal2yrkkkt8z24ew.jpeg"></p><br>
<p>,           ,    .</p><br>
<p>              (      ,      80-    ).</p><br>
<p><img src="https://habrastorage.org/webt/a-/vw/zq/a-vwzqrzc8ttmxfyidyx5gku_e0.jpeg"></p><br>
<p>       CD .</p><br>
<p><img src="https://habrastorage.org/webt/be/84/yr/be84yr9lcf5qr9xmhfubcc0xi-q.jpeg"></p><br>
<p>  , ,  ,  .</p><br>
<p><img src="https://habrastorage.org/webt/4w/4p/ed/4w4pedh-im9ttbm6uhngc24vpge.jpeg"></p><br>
<p>  โ    .</p><br>
<p><strong></strong>: <em>        ,                 </em>.</p><br>
<p> ,  ,             .    โ   ,    .</p><br>
<p><img src="https://habrastorage.org/webt/wd/mv/p_/wdmvp_puf54uysk-0og-9lhogvk.jpeg"></p><br>
<h4 id="vnutrennosti"></h4><br>
<p>       โ  .  -  - "Craft&amp;Clay" 50-     70.    ,        .</p><br>
<p><img src="https://habrastorage.org/webt/v2/jw/q6/v2jwq6mmb4gvxkpljgamjqavhj4.jpeg"></p><br>
<p>          .</p><br>
<p><img src="https://habrastorage.org/webt/w9/jf/8f/w9jf8f1ze2h5lytg9rgy0c4yy8s.jpeg"></p><br>
<p>       15     130   .</p><br>
<p><img src="https://habrastorage.org/webt/a4/uf/n-/a4ufn-djsbpg3386o4pvqqcpjua.jpeg"></p><br>
<p>      โ    .</p><br>
<p><img src="https://habrastorage.org/webt/ud/tf/nz/udtfnznphbnuq_wmaap31rafnuq.jpeg"></p><br>
<p><img src="https://habrastorage.org/webt/ex/7j/xb/ex7jxbgh1bhqsmzbep9t9fnrije.jpeg"></p><br>
<p>   โ    .</p><br>
<p><img src="https://habrastorage.org/webt/5i/qs/1v/5iqs1v1pa6jqhnmjjfyuxmcqhgy.jpeg"></p><br>
<p>  โ     .</p><br>
<p><img src="https://habrastorage.org/webt/8l/hs/8x/8lhs8xpxud7pcd-w9ixy-qg-9a0.jpeg"></p><br>
<p>     .</p><br>
<p><img src="https://habrastorage.org/webt/xj/se/tn/xjsetne6jay2dlqlk_3mgsq4ica.jpeg"></p><br>
<p>  4     ,   2-3  , <br>
  ,      .</p><br>
<p><img src="https://habrastorage.org/webt/xu/6y/pl/xu6yplqtnq8o2yhdtj2cyjcbd3e.jpeg"></p><br>
<p>  .  , ,   ,  "   ". </p><br>
<p><img src="https://habrastorage.org/webt/ck/w7/id/ckw7idpowfs9zlrxpok7gqrhsso.jpeg"></p><br>
<p>,          . </p><br>
<p><img src="https://habrastorage.org/webt/wo/jn/rj/wojnrj1diuqw5hf8h56sxjdxyzs.jpeg"></p><br>
<p>       KSP.        โ    4  LED     5     .</p><br>
<p><img src="https://habrastorage.org/webt/kg/f7/qy/kgf7qyhiebdqb5seavzrvekyqaq.jpeg"></p><br>
<p>                ,    ,   DC-DC 0.9-5  ,     .</p><br>
<p><img src="https://habrastorage.org/webt/ol/5v/bz/ol5vbz1tlc-lmcmuczwf77obixc.jpeg"></p><br>
<p>     .  ,    ,         .</p><br>
<p><img src="https://habrastorage.org/webt/fb/jf/8-/fbjf8-u-p8gjm2u3ccnwfk9wzdk.jpeg"></p><br>
<h4 id="ozhivlenie"></h4><br>
<p>, ,  ,   .</p><br>
<p><img src="https://habrastorage.org/webt/wm/8v/ej/wm8vejbxienobpdzeretpbxp3yi.jpeg"></p><br>
<p>      ISP     10-   .</p><br>
<p><img src="https://habrastorage.org/webt/tn/eu/7u/tneu7uxc7bewhl9g_lfsajgx9ra.png"></p></div></div><br>
<h3 id="izuchenie-zhiznedeyatelnosti-svetofora">  </h3><br>
<p>     , ,  ,  -   .        ,     ,      "  ".      1.5 ,         โ   .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">  </a>     ,      .</p><br>
<table>
<thead>
<tr>
<th> </th>
<th>, </th>
<th>, %/</th>
<th> , </th>
</tr>
</thead>
<tbody>
<tr>
<td>CR1212</td>
<td>18</td>
<td>1</td>
<td>0.250</td>
</tr>
<tr>
<td>CR1620</td>
<td>68</td>
<td>1</td>
<td>0.950</td>
</tr>
<tr>
<td>CR2032</td>
<td>210</td>
<td>1</td>
<td>3</td>
</tr>
<tr>
<td>NiCD AAA</td>
<td>350</td>
<td>20</td>
<td>98</td>
</tr>
<tr>
<td>NiMH AAA</td>
<td>900</td>
<td>30</td>
<td>375</td>
</tr>
<tr>
<td>NiCd AA</td>
<td>1000</td>
<td>20</td>
<td>270</td>
</tr>
<tr>
<td>Alkaline AAA</td>
<td>1250</td>
<td>2</td>
<td>35</td>
</tr>
<tr>
<td>NiMH AA</td>
<td>2400</td>
<td>30</td>
<td>1000</td>
</tr>
<tr>
<td><strong>Alkaline AA</strong></td>
<td><strong>2890</strong></td>
<td><strong>2</strong></td>
<td><strong>80</strong></td>
</tr>
<tr>
<td>Li-Ion</td>
<td>4400</td>
<td>10</td>
<td>600</td>
</tr>
</tbody>
</table><br>
<p>     ,      . ,    ,     (2/100)<em>2890/(24</em>30) = 80 .  ,    2    ,  32      ATtiny13.</p><br>
<p>         :       ,    GPIO,      .    โ ,        ( 4   14   ""),      ,        40 . </p><br>
<p>,        โ    .      ,      .  ,      :      5      DC-DC ,   ,          DC-DC      1.5  -&gt; 5 .        , -       +-20%,   .</p><br>
<p><img src="https://habrastorage.org/webt/ab/3v/sb/ab3vsbnwkhp2rc9tvyzv6ltyypy.png"></p><br>
<p>  ,     ""   4-5 (5 ) ,    , 25 (1.5 ),    </p><br>
<p><img src="https://habrastorage.org/webt/wx/nl/q5/wxnlq5fnsspt1cpgsdpwngtbwos.png"></p><br>
<p>.. 2890       116 ,    .   ATtiny13    POWER DOWN        . ,       โ       .         20-50 ,    , Hi-Z,   1 .  ,   DC-DC      .</p><br>
<p>         2  5 . :         .</p><br>
<h2 id="nekotorye-processy-mozhno-tolko-prekratit-no-ne-zakonchit">    ,   </h2><br>
<p>  ,      :</p><br>
<ul>
<li>   ,   โ ,      R2,       ,    .     .</li>
<li>   .           โ         1/37 ,          .</li>
<li>               ,      ,  .    POWER_DOWN     30 ,      ,     ,         .</li>
<li>  traffic_signals   8   4,   .   4 pin โ  1     DDR  PORTB</li>
<li>  uint16_t  signal_period  flash_period โ  ,     ,   1    .</li>
<li>   โ  ROM    2 ,    โ     -      .</li>
<li>             /UART.</li>
<li>   main   โ      โ  +50   ROM.</li>
<li>       9,6    128 ,       .</li>
</ul><br>
<p>.</p><br>
<p>       :    " ", ,  8 ,   ,    ยซยป    .</p><br>
<p>         .</p><br>
<h2 id="video-raboty"> </h2><br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/23ju4JVKMeA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<p>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Github</a>,   MIT.</p></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar443188/">https://habr.com/ru/post/ar443188/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar443178/index.html">ุชุญูููุงุช Blockchain ุงูุจููุฑูุฉ: ุงูุชุญููู ูู ุญุงูุงุช ุงูุงุฎุชุฑุงู ูุงูุณุฑูุฉ</a></li>
<li><a href="../ar443180/index.html">ูุจูุท ุทุงูู ุงูุชููู ูุชุณุฌูู ููุฏูู ููููููุจ</a></li>
<li><a href="../ar443182/index.html">ุงุณุญุจ YPbPr ูู Commodore 64</a></li>
<li><a href="../ar443184/index.html">ูู ุงูุญุจ ููุณูุทุฑุฉ ุนูู ุฎุทูุฉ ูุงุญุฏุฉ</a></li>
<li><a href="../ar443186/index.html">3CX ุงูุฏุนู ุงูููู ูุณุชุฌูุจ - 5 IP PBX ููุงุนุฏ ุงูุฃูู</a></li>
<li><a href="../ar443190/index.html">ููุฏูุฉ ูุณูุงุณุงุช ุดุจูุฉ Kubernetes ููุชุฎุตุตู ุงูุฃูู</a></li>
<li><a href="../ar443192/index.html">ุทุฑู ุฎุงุตุฉ ุฏูู ุชุณุทูุฑ ููุงุฌูุงุช ูู ุจูุซูู</a></li>
<li><a href="../ar443194/index.html">ุงุจุชูุฑ ูููุฏุณู WFIRM ุทุงุจุนุฉ ุญูููุฉ ุชุทุจุน ุงูุฌูุฏ ูุจุงุดุฑุฉ ุนูู ุงูุฌุฑุญ</a></li>
<li><a href="../ar443196/index.html">ููุณ ุฏูููุฉ ุญุงููุง - ุงุฎุชูุงุฑ ุฌูุงุฒ ุงูุชูุฌูู ุงูุตูุงุนู LTE</a></li>
<li><a href="../ar443198/index.html">ูููู ูุงุฑู ุฒููุฑุจูุฑุฌ ุฅู ูููุน Facebook ูุนูู ุนูู ูุงุฌูุฉ ุนุตุจูุฉ ููุฑุงุกุฉ ุงูุฃููุงุฑ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>