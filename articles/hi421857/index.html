<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯзХ ЁЯП┤єаБзєаБвєаБ│єаБгєаБ┤єаБ┐ ЁЯСиЁЯП╝тАНтЪХя╕П ToFoIn v 1. рдЧреЗрдЯрд╡реЗ рдХрд╛ рдЖрд░рдХреНрд╖рдг рдФрд░ FreeBSD рдореЗрдВ рдмрд╛рд╣рд░реА рдЪреИрдирд▓реЛрдВ рдХреЗ рдмреАрдЪ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ ЁЯзСЁЯП╜тАНЁЯдЭтАНЁЯзСЁЯП╜ ЁЯдЫЁЯП╝ ЁЯСитАНЁЯСитАНЁЯСжтАНЁЯСж</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдЕрдореВрд░реНрдд 
 рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рд▓реИрди рдЧреЗрдЯрд╡реЗ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░реЗрдХ рдХреЗ рд╕рдВрдЧрдарди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред рдПрдХ рд╕рдорд╛рдзрд╛рди рдХреЗ рд░реВрдк рдореЗрдВ, рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рдерд╛ рдХрд┐ рдЙрд╕ рд╕рдордп рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╣...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ToFoIn v 1. рдЧреЗрдЯрд╡реЗ рдХрд╛ рдЖрд░рдХреНрд╖рдг рдФрд░ FreeBSD рдореЗрдВ рдмрд╛рд╣рд░реА рдЪреИрдирд▓реЛрдВ рдХреЗ рдмреАрдЪ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421857/"><h3>  рдЕрдореВрд░реНрдд </h3><br>  рдкрд┐рдЫрд▓реЗ рд▓реЗрдЦ рдореЗрдВ, рд▓реИрди рдЧреЗрдЯрд╡реЗ рдХреЗ рд▓рд┐рдП рдЕрддрд┐рд░реЗрдХ рдХреЗ рд╕рдВрдЧрдарди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдПрдХ рд╕рдорд╛рдзрд╛рди рдХреЗ рд░реВрдк рдореЗрдВ, рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдкреНрд░рд╕реНрддрд╛рд╡ рдерд╛ рдХрд┐ рдЙрд╕ рд╕рдордп рд╕рдорд╕реНрдпрд╛ рдХрд╛ рд╣рд▓ рд╣реЛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЗрд╕рдореЗрдВ рдХрдИ рдХрдорд┐рдпрд╛рдВ рдереАрдВред  рдХреБрдЫ рд╕рдордп рдмрд╛рдж, рдпрд╣ рдЗрди рдХрдорд┐рдпреЛрдВ рдХреЛ рдЦрддреНрдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдХрд▓рд╛, рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдХреЛрдб рдХреЛ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрддрд╛ рд╣реИ рдФрд░ рдЖрдЙрдЯрдкреБрдЯ рдореЗрдВ рдХреБрдЫ рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╣реЛрддрд╛ рд╣реИред  рдЕрдм рд╣рдо рдХрд╣ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рд╕реНрдерд┐рд░ рдХрд╣рд╛ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рд░реВрдк рд╕реЗ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╕рдВрдкреВрд░реНрдг рдкреНрд░рдгрд╛рд▓реА рдХреА рд╕рдордЭ рдХреЛ рд╕рд░рд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдорд╛рдзреНрдпрдорд┐рдХ рд╕реЗрд╡рд╛рдУрдВ (рд▓реЗрдЦ рдХреЗ рд╡рд┐рд╖рдп рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ) рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рдмрд┐рдВрджреБрдУрдВ рдХреЛ рдЖрдВрд╢рд┐рдХ рд░реВрдк рд╕реЗ рдиреАрдЪреЗ рджреЛрд╣рд░рд╛рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдХрд╛рд░рдг рд╕рд░рд▓ рд╣реИ - рдЗрд╕ рд╕рдордп рдХреЗ рджреМрд░рд╛рди ipfw рдирд┐рдпрдореЛрдВ рдХреЛ рднреА рдлрд┐рд░ рд╕реЗ рддреИрдпрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, dns AD рдореЗрдВ Samba4 рдореЗрдВ рдПрдХ рдмрд╛рдЗрдВрдб-рдлреНрд░рдВрдЯреЗрдВрдб рдФрд░ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдП рдЧрдП рд░рд┐рдХреЙрд░реНрдб рдХреЗ рд╕рд╛рде kerberos рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рдЪрд▓рд╛ рдЧрдпрд╛, рд╕рд╛рде рд╣реА рджреНрд╡рд╛рд░ рдкрд░ рдмрд╛рдЗрдВрдб рдХреЗ рд░реВрдк рдореЗрдВ рдорд╛рдзреНрдпрдорд┐рдХ dns рд╕рд░реНрд╡рд░ рднреАред рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ CARP ... рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрд╣ рдмрд╣реБрдд рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛ рдЧрдпрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХреНрдпрд╛ рдФрд░ рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдФрд░ рдиреАрдЪреЗ рд╣реИред  рд╕реНрд░реЛрдд рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рджреА рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реА рд╣рд░ рдЪреАрдЬ рдХреЛ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдбрд┐рдЬрд╛рдЗрди рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рддрд╛рдХрд┐ рд╕рд╛рд░ рдХрд╛ рдЙрддреНрдкрд╛рджрди рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред  рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реНрдерд╛рдиреЛрдВ рд╕реЗ рдХреНрдпрд╛ рд▓рд┐рдпрд╛ рдЧрдпрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдЬреЛ рдЕрдм рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ рд╣реИ, рдкреНрд░рд╛рд╕рдВрдЧрд┐рдХ рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде рдпрд╣рд╛рдВ рджрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br><a name="habracut"></a><br><h3>  рдкрд░рд┐рдЪрдп </h3><br>  рддреЛ, рдЙрдкрднреЛрдХреНрддрд╛ рдХреА рдУрд░ рд╕реЗ рдмрд╛рд╣рд░реА рджреБрдирд┐рдпрд╛ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдЪреИрдирд▓ рдХреА рд╢реЛрд░ рдЙрдиреНрдореБрдХреНрддрд┐ рдХреЛ рдмрдврд╝рд╛рдиреЗ рдХреЗ рджреЛ рддрд░реАрдХреЗ рд╣реИрдВ: рдЧреЗрдЯрд╡реЗ рдХрд╛ рдмреИрдХрдЕрдк рдФрд░ рдХрдиреЗрдХреНрд╢рди рдмрд┐рдВрджреБ рдХрд╛ рдЖрд░рдХреНрд╖рдгред  рджреВрд╕рд░реЗ рд╢рдмреНрджреЛрдВ рдореЗрдВ, рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдПрдХ рджреВрд╕рд░рд╛ рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ рдкрд╣рд▓реЗ рдПрдХ рдХреЗ рд╡рд┐рдлрд▓ рд╣реЛрдиреЗ рдкрд░ рд╕рдХреНрд░рд┐рдп рд╣реЛ рдЬрд╛рдПрдЧрд╛, рджреВрд╕рд░реЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдореБрдЦреНрдп рдПрдХ рдХреЗ рд╕рд╛рде рдХрд┐рд╕реА рднреА рд╕рдорд╕реНрдпрд╛ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдПрдХ рдмреИрдХрдЕрдк рдЗрдВрдЯрд░рдиреЗрдЯ рдЪреИрдирд▓ рдХрд╛ рдЖрдпреЛрдЬрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ рдЖрдЧреЗ рд╡реЗ рдкрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ, рдпрд╣ рдмреЗрд╣рддрд░ рд╣реИ, рдЬрд╛рд╣рд┐рд░ рд╣реИред  рдпрджрд┐ <abbr title="рд╕рд╛рдорд╛рдиреНрдп рдкрддрд╛ рдЕрддрд┐рд░реЗрдХ рдкреНрд░реЛрдЯреЛрдХреЙрд▓">CARP</abbr> FreeBSD рдХреЗ рд▓рд┐рдП рдкрд╣рд▓рд╛ рдХрд╛рд░реНрдп рд╣рд▓ рдХрд░рддрд╛ рд╣реИ, рддреЛ рджреВрд╕рд░рд╛ рдмрд╛рд╣рд░реА рдЪреИрдирд▓ рдХреЗ рдЖрдпреЛрдЬрди рдХреЗ рдмрд╛рдж, рджреВрд╕рд░рд╛, рдХрдИ рддрд░реАрдХреЛрдВ рд╕реЗ рд╣рд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдХрдо рд╕реЗ рдХрдо, рдЖрдк рдЪреИрдирд▓реЛрдВ рдХреЗ рдмреАрдЪ рдЯреНрд░реИрдлрд╝рд┐рдХ рд╕рдВрддреБрд▓рди рдпрд╛ рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдмрд╛рд╣рд░реА рдЪреИрдирд▓реЛрдВ рдХреА рдмреИрдВрдбрд╡рд┐рдбреНрде рдореЗрдВ рдмрдбрд╝реЗ рдЕрдВрддрд░ рдХреЗ рдХрд╛рд░рдг, рдкрд╣рд▓рд╛ рд╡рд┐рдХрд▓реНрдк рдореБрдЭреЗ <abbr title="рдЗрдВрдЯрд░рдиреЗрдЯ рдХрд╛ рдлреЗрд▓реЛрд╡рд░">рд╕реВрдЯ</abbr> рдирд╣реАрдВ рдХрд░рддрд╛ рдерд╛, рдЗрд╕рд▓рд┐рдП рдкреНрд░рдХрд╛рд╢рди рдХрд╛ рдореБрдЦреНрдп рдЕрдкрд░рд╛рдзреА рд▓рд┐рдЦрд╛ рдЧрдпрд╛ рдерд╛: <abbr title="рдЗрдВрдЯрд░рдиреЗрдЯ рдХрд╛ рдлреЗрд▓реЛрд╡рд░">ToFoIn</abbr> - рдПрдХ рдмреИрд╢ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдЙрджреНрджреЗрд╢реНрдп рдЬреЛ рдиреИрджрд╛рдирд┐рдХ тАЛтАЛрд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдФрд░ рдПрдХ рдХрд╛рд░реНрдпрд╢реАрд▓ рдЪреИрдирд▓ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп рд╕реЗ рд╣реИред  рд╢реЛрдзрди рдХреЗ рдмрд╛рдж, рдЗрд╕реЗ рдПрди рдЧреЗрдЯрд╡реЗ рдФрд░ рдПрдо рдЪреИрдирд▓реЛрдВ рдкрд░ рд▓рд╛рдЧреВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╕реНрдерд┐рддрд┐ рдХрдордЬреЛрд░ рд╣реИ, рдЬрд╣рд╛рдВ n рдФрд░ m 2 рд╕реЗ рдЕрдзрд┐рдХ рд╣реИрдВ, рд▓реЗрдХрд┐рди рдиреАрдЪреЗ рдХреА рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ n рдФрд░ m рдХреЗ рдмрдбрд╝реЗ рдорд╛рдиреЛрдВ рддрдХ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рдХреНрдпреЛрдВрдХрд┐  рддрд╛рд░реНрдХрд┐рдХ рд░реВрдк рд╕реЗ, рд╕реАрдорд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдирд╣реАрдВ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдореБрдЭреЗ рд╕рдВрджреЗрд╣ рд╣реИ рдХрд┐ рдЗрди рд▓рд┐рдкрд┐рдпреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрдиреЗрдХреНрд╢рди рдХреА рд╕реНрдерд┐рддрд┐ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдХрд╛рд░реНрдпреЛрдВ рдХреА рдПрдХ рд╡рд┐рд╕реНрддреГрдд рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЛ рд╣рд▓ рдХрд░рдирд╛ рд╕рдВрднрд╡ рд╣реИ, рд╕реАрдорд┐рдд, рд╢рд╛рдпрдж, рдХреЗрд╡рд▓ рдХрд▓реНрдкрдирд╛ рджреНрд╡рд╛рд░рд╛ред <br><br><img src="https://habrastorage.org/webt/2e/yw/s8/2eyws8o9hbu3cxfpo0yja6dm_ea.png" width="500" align="left"><br>  рд▓рдЧрднрдЧ рдРрд╕реА рдиреЗрдЯрд╡рд░реНрдХ рдЯреЛрдкреЛрд▓реЙрдЬреА рд╕рд░рд▓рддрдо рд░реВрдк рдореЗрдВ рдорд╛рдирддреА рд╣реИ рдХрд┐ ToFoIn рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдмреЗрд╢рдХ, рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдПрдХ рдПрдХрд▓ рд░рд╛рдЙрдЯрд░ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП, рд▓реЗрдХрд┐рди рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдкрдХреЛ CARP рд░рд╛рдЬреНрдп рдкрд░ рдХрд╛рд░реНрд░рд╡рд╛рдИ рдХреЗ рдЕрдиреБрдХреНрд░рдо рдХреА рдирд┐рд░реНрднрд░рддрд╛ рдХреЛ рд╣рдЯрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрдорди рдореЙрдбреНрдпреВрд▓ рдХреЛ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛, рдЬреЛ рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдмрд╕ рдЕрдиреБрдкрд╕реНрдерд┐рдд рд░рд╣реЗрдЧрд╛ред  рдЗрди рдФрд░ рдЕрдиреНрдп рдиреЛрдбреНрд╕ рдХрд╛ рдЖрдЧреЗ рдЖрд░рдХреНрд╖рдг рдХреЗрд╡рд▓ рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛рдУрдВ рдХреЗ рдорд╣рддреНрд╡ рдХреА рдбрд┐рдЧреНрд░реА рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред <br><br><h3>  рд▓рдХреНрд╖реНрдп рдФрд░ рдЙрджреНрджреЗрд╢реНрдп </h3><br>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХрд╛ рд▓рдХреНрд╖реНрдп, рдкрд╣рд▓реЗ рдХреА рддрд░рд╣, рдмрд╛рд╣рд░реА рдФрд░ рдЖрдВрддрд░рд┐рдХ рдХрдиреЗрдХреНрд╢рди рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреА рдкрд╣рдЪрд╛рди рдХрд░рдиреЗ рдФрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХрдиреЗрдХреНрд╢рди рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдкрд░ рдХреЗрдВрджреНрд░рд┐рдд рдПрдХ рд╕рд╛рд░реНрд╡рднреМрдорд┐рдХ рдФрд░ рдЖрд╕рд╛рдиреА рд╕реЗ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдкреИрдХреЗрдЬ рдмрдирд╛рдирд╛ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рд╢рдмреНрджреЛрдВ рдореЗрдВ, рддрд░реНрдХ рдЗрд╕ рдкреНрд░рдХрд╛рд░ рд╣реИ: <br><br><ul><li>  рдкреНрд░рддреНрдпреЗрдХ рдкрд░ рдПрдо рдмрд╛рд╣рд░реА рдЪреИрдирд▓реЛрдВ рдХреЗ рд╕рд╛рде n "рд░рд╛рдЙрдЯрд░" рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╕рднреА n "рд░рд╛рдЙрдЯрд░" рдПрдХ рд╕рдЦреНрдд рдкрджрд╛рдиреБрдХреНрд░рдо рдореЗрдВ рд╣реИрдВ рдФрд░ рд╕рднреА рдЖрд╡рд╢реНрдпрдХ рдЗрдВрдЯрд░рдлреЗрд╕ рдкрд░ CARP рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдПрдХ рджреВрд╕рд░реЗ рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВред </li><li>  рдкреНрд░рддреНрдпреЗрдХ рдорд╢реАрди рдкрд░ рдПрдХ рдПрдЬреЗрдВрдЯ рд╕реНрд╡рддрдВрддреНрд░ рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдХрд╛рд░реНрдп рдЙрд╕рдХреА рдорд╢реАрди рдХреА рд╡рд░реНрддрдорд╛рди рд╕реАрдПрдЖрд░рдкреА рд╕реНрдерд┐рддрд┐ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реЛрддрд╛ рд╣реИ: <br><ul><li>  рдпрджрд┐ рдмреИрдХрдЕрдк - рдПрдХ рд░рд╛рдЙрдЯрд░ рдкрд░ рдорд╢реАрди рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдВ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ рдЬреЛ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдорд╛рд╕реНрдЯрд░ рд╣реИ; </li><li>  рдпрджрд┐ рдорд╛рд╕реНрдЯрд░ - рд╡рд░реНрддрдорд╛рди рд╕рдордп рдореЗрдВ рдХрдиреЗрдХреНрд╢рди рдХреА рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХрд░реЗрдВ рдФрд░ рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдмрд╛рд╣рд░реА рдЪреИрдирд▓реЛрдВ рдХреЗ рдмреАрдЪ рд╕реНрд╡рд┐рдЪ рдХрд░реЗрдВред </li></ul></li></ul><br><h3>  рдирд┐рд░реНрдгрдп </h3><br>  рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ CARP рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдмреИрдХрдЕрдк рдЧреЗрдЯрд╡реЗ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЖрдкрдХреЛ рдЪреИрдирд▓ рд╕реНрд╡рд┐рдЪ рдХрд░рддреЗ рд╕рдордп рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдЕрдиреНрдп рдиреЗрдЯрд╡рд░реНрдХ рдЙрдкрдХрд░рдгреЛрдВ рдХреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рджреЗрддрд╛ рд╣реИред <br><br>  Dhcpd рдкреНрд░рд╛рдердорд┐рдХ - рджреНрд╡рд┐рддреАрдпрдХ рдореЛрдб рдореЗрдВ рд╕рдВрдЪрд╛рд▓рд┐рдд рд╣реЛрддрд╛ рд╣реИ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЗрд╕рд╕реЗ рдХреЛрдИ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдЗрд╕рдХреА рдорд╢реАрди рдХреНрдпрд╛ рдЕрдиреНрдп рднреВрдорд┐рдХрд╛рдПрдВ рдирд┐рднрд╛рддреА рд╣реИ - dhcpd рдХрд╛ рдХрдиреЗрдХреНрд╢рди рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдХрд┐ рд░рд╛рдЙрдЯрд░ рд╣рдореЗрд╢рд╛ рджреЗрдЦрддреЗ рд╣реИрдВред <br><br>  рдорд╛рд╕реНрдЯрд░ рдмрд╛рдЗрдВрдб рдХреЛ AD рдореЗрдВ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рдЫрд┐рдкрд╛ рд╣реЛрддрд╛ рд╣реИ, рдЬрдмрдХрд┐ рд╕реЗрдХреЗрдВрдбрд░реА рдмрд╛рдЗрдВрдб рд╕рд░реНрд╡рд░ рдЧреЗрдЯрд╡реЗ рд░рд╛рдЙрдЯрд░ рдкрд░ рдПрдХ рд╕рдорд╛рди рдкрд╛рдпрджрд╛рди рдкрд░ рдХрд╛рдо рдХрд░ рд░рд╣реЗ рд╣реЛрддреЗ рд╣реИрдВред <br><br>  IPfw рдХреЗ рдирд┐рдпрдо рдЕрд▓рдЧ-рдЕрд▓рдЧ рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рд╕рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХрд┐рд╕реА рдирд┐рд╢реНрдЪрд┐рдд рд╕рдордп рдкрд░ рдЪреИрдирд▓ рдХреЛ рдореБрдЦреНрдп рдЪреИрдирд▓ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рднреВрдорд┐рдХрд╛рдПрдБ рдмрджрд▓рддреЗ рд╕рдордп рдбреЗрдореЙрди рдореЙрдбреНрдпреВрд▓ рджреНрд╡рд╛рд░рд╛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЕрдВрдд рдореЗрдВ рдЦреБрдж рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВред  рдЕрдм рдлрд╛рдЗрд▓реЗрдВ рдЙрдЪрд┐рдд рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдореЗрдВ рд╕реНрдерд┐рдд рд╣реИрдВ, рдЙрдирдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ рдФрд░ рдЖрд░.рдИ.рдбреА. рдореЗрдВ рдПрдХ рд╕реНрдЯрд╛рд░реНрдЯ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИред  рд░реВрдЯ рдПрдХреНрд╕реЗрд╕ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╡рд╛рд▓реЗ рдЯрд╛рд╕реНрдХ рд╕реВрдбреЛ рджреНрд╡рд╛рд░рд╛ рд╣рд▓ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред  рдПрдХ рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╣реИ рдЬреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд┐рдП рдЧрдП рд╕рдВрд╕реНрдХрд░рдг рдХреА рд╕рдВрднрд╛рд╡рд┐рдд рдЙрдкрд╕реНрдерд┐рддрд┐, рд╕рд╛рде рд╣реА рд╕рд╛рде рдПрдХ рдХрд╛рдлреА рд╡рд┐рд╕реНрддреГрдд рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдлрд╝рд╛рдЗрд▓ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреА рд╣реИред  рдореЙрдбреНрдпреВрд▓ рдорд╛рдореВрд▓реА рдмрджрд▓рд╛рд╡реЛрдВ рдХреЗ рд╕рд╛рде рд╕рдорд╛рди рд╣реИрдВ, рдХреБрдЫ рд▓рдЧрднрдЧ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдореЗрдВ рдирд╣реАрдВ рдмрджрд▓реЗ: <br><br>  <b>рдбреЗрдорди</b> - рдЬреИрд╕рд╛ рдХрд┐ рдирд╛рдо рдХрд╛ рддрд╛рддреНрдкрд░реНрдп рд╣реИ - рдПрдХ рдореБрдЦреНрдп рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИ рдЬреЛ рдПрдХ рдЯрд╛рдЗрдорд░ рдкрд░ рдкрд░реАрдХреНрд╖рдг рдФрд░ рд╕реНрд╡рд┐рдЪ рдореЙрдбреНрдпреВрд▓ рдЪрд▓рд╛рддрд╛ рд╣реИ, рдФрд░ рд╕реАрдПрдЖрд░рдкреА рдкрд░ рднреА рдирдЬрд╝рд░ рд░рдЦрддрд╛ рд╣реИред <br>  <b>рдкрд░реАрдХреНрд╖рдХ</b> - рдкрд┐рдВрдЧ рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрд╛рд╣рд░реА рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рдЕрднреА рднреА рдкрд░реАрдХреНрд╖рдгред  (рдпрджрд┐ рдпрд╣ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рдпрд╣ рд╕рдордЭрддрд╛ рд╣реИ рдХрд┐ рдорд╢реАрди рдХреЗ рдкрд╛рд╕ рдорд╛рд╕реНрдЯрд░ рд░рд╛рдЬреНрдп рдореЗрдВ CARP рд╣реИ) <br>  <b>рдиреНрдпрд╛рдпрд╛рдзреАрд╢</b> - рдкрд░реАрдХреНрд╖рдг рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕рд╛ рдмрд╛рд╣рд░реА рдЪреИрдирд▓ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдХреНрдпрд╛ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ рдХрд░рддрд╛ рд╣реИ (рдпрджрд┐ рдпрд╣ рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рддреЛ рдпрд╣ рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рдорд╢реАрди рдореЗрдВ рдорд╛рд╕реНрдЯрд░ рд░рд╛рдЬреНрдп рдореЗрдВ CARP рд╣реИ)ред <br>  <b>рд╕реНрдХрд╛рдЙрдЯ</b> рдПрдХ рдирдпрд╛ рдореЙрдбреНрдпреВрд▓ рд╣реИред  рдпрд╣ рддрдм рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ рдЬрдм CARP рдмреИрдХрдЕрдк рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХреМрди рд╕рд╛ рд╢реЗрд╖ рд░рд╛рдЙрдЯрд░ рдореБрдЦреНрдп рд╣реИред <br>  <b>рд▓рдХрдбрд╝рд╣рд╛рд░рд╛</b> - рдЗрд╡реЗрдВрдЯ рд▓реЙрдЧрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ред  рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рддрд╛рдХрд┐ рдШрдЯрдирд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рди рд╣реЛ рдФрд░ рдкрддреНрд░рд┐рдХрд╛ рдХреЛ рдкрдврд╝рдирд╛ рдЖрд╕рд╛рди рд╣реЛред <br>  <b>рд╡реЙрдЪрдбреЙрдЧ</b> - рдХреНрд░реЙрд╕реНрдЯреИрдм рд╕реЗ рдЕрдиреБрд╕реВрдЪреА рдкрд░ рдЪрд▓рддрд╛ рд╣реИред  рдпрд╣ рд╕рднреА рдореЙрдбреНрдпреВрд▓ рдХреЗ "рдлреНрд░реАрдЬ" рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ (рдЬрдм рднреА рд╕рдВрднрд╡ рд╣реЛ) рдЙрди рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддрд╛ рд╣реИ рдЬреЛ рдЙрддреНрдкрдиреНрди рд╣реБрдИ рд╣реИрдВред  рдпрд╛рдиреА  рд╣рд░ рдХреЛрдИ рдирд╛рдЦреВрди, рдмрд╕ рдбрд╛рд▓ рджрд┐рдпрд╛ред <br><br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдпрд╣ рдХреБрдЫ рдФрд░ рдорд╣рддреНрд╡рдкреВрд░реНрдг рдлрд╛рдЗрд▓реЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ: <br><br>  <b>Tofoin.conf</b> - рдПрдХ рдПрдХрд▓ рд╕реЗрдЯрд┐рдВрдЧ рдлрд╝рд╛рдЗрд▓ред <br>  <b>Tofoin.log</b> - рдПрдХ рдПрдХрд▓ рдИрд╡реЗрдВрдЯ рд▓реЙрдЧ рдлрд╝рд╛рдЗрд▓ред <br>  <b>рдкрд░рд┐рдгрд╛рдо_</b> &lt;рдЖрдВрддрд░рд┐рдХ рдЪреИрдирд▓ рдирдВрдмрд░&gt; рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реА рдлрд╝рд╛рдЗрд▓ рд╣реИ, рдкрд░реАрдХреНрд╖рд╛ рдкрд░рд┐рдгрд╛рдо рдпрд╣рд╛рдВ рдЬреЛрдбрд╝реЗ рдЧрдП рд╣реИрдВ, .pid рдФрд░ рдЕрдиреНрдп рдХрд╛рдордХрд╛рдЬреА рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рдмрдЧрд▓ рдореЗрдВ / tmp рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br>  рдореИрдВ рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреНрд░рд╢реНрдиреЛрдВ рдХрд╛ рдЙрддреНрддрд░ рдЦреБрд╢реА рд╕реЗ рджреЗ рд╕рдХрддрд╛ рд╣реВрдВ, рдЯрд┐рдкреНрдкрдгрд┐рдпреЛрдВ рдореЗрдВ рд╕рдорд╛рдзрд╛рди рдмрддрд╛ рд░рд╣рд╛ рд╣реВрдВред <br><br><h3>  рддрдХрдиреАрдХреА рд╣рд┐рд╕реНрд╕рд╛ рд╣реИ </h3><br><h4>  рдЙрдкрдХрд░рдг </h4><br>  рдкрд┐рдЫрд▓реА рдмрд╛рд░ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ, рдЧреЗрдЯрд╡реЗ P4 рдореЗрдВ рдЪрд▓реЗ рдЧрдП, 1536 рдПрдордмреА рд░реИрдо рдФрд░ рддреАрди 40 рдЬреАрдмреА рдПрдЪрдбреАрдбреА (рдорд┐рд░рд░ / рд╕реНрдкреЗрдпрд░) рдкреНрд░рд╛рдкреНрдд рдХрд┐рдПред  рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдб рдЕрднреА рднреА рдкреАрд╕реАрдЖрдИ, рдкреАрдПрд╕рдпреВ рд╕рд╛рдорд╛рдиреНрдп рд╣реИрдВ, рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рдПрдХ рдпреВрдкреАрдПрд╕ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдореЗрдВред <br>  рдХреНрд╖рдорддрд╛ рдореЗрдВ рд╡реГрджреНрдзрд┐ рд╕реНрд░реЛрдд рд╕реЗ рдЬрд╛рд░реА рдХрд┐рдП рдЧрдП рд▓реЛрд╣реЗ рдФрд░ рдЕрддреНрдпрдзрд┐рдХ рдердХрд╛рдК рдЕрджреНрдпрддрди рд╕реЗ рдЬреБрдбрд╝реА рд╣реИ, рд▓реЗрдХрд┐рди рдЬреНрдпрд╛рджрд╛рддрд░ рдкрд╣рд▓реЗ рд╡рд╛рд▓реА рд╣реИред  OS FreeBSD 11.1, FS zfsред <br><br><h4>  рд╕рд┐рд╕реНрдЯрдо рдШрдЯрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ </h4><br><div class="spoiler">  <b class="spoiler_title">рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА</b> <div class="spoiler_text">  рдХрд░реНрдиреЗрд▓ рдХреЛ рдРрд╕реЗ рдЕрддрд┐рд░рд┐рдХреНрдд рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдХрд▓рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ (рд▓реЛрдбрд░ рдореЗрдВ рдХреБрдЫ рднреА рд╕реЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЗрд╕ рддрд░рд╣ рд╕реЗ рдмреЗрд╣рддрд░ рд╣реИ): <br><br><pre><code class="bash hljs">options IPFIREWALL <span class="hljs-comment"><span class="hljs-comment"># ipfw firewall options IPFIREWALL_VERBOSE options IPFIREWALL_VERBOSE_LIMIT=50 options IPFIREWALL_NAT options LIBALIAS options DUMMYNET options HZ=1000 options ROUTETABLES=4 options KSTACK_PAGES=4 options KVA_PAGES=512 device carp</span></span></code> </pre> <br>  рд╕реЗрдЯрд┐рдВрдЧреНрд╕ /boot/loader.conf: <br><pre> <code class="bash hljs">geom_mirror_load=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> zfs_load=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> kern.geom.label.gptid.enable=<span class="hljs-string"><span class="hljs-string">"0"</span></span> vm.kmem_size=<span class="hljs-string"><span class="hljs-string">"1024M"</span></span> vm.kmem_size_max=<span class="hljs-string"><span class="hljs-string">"1024M"</span></span> vfs.zfs.arc_max=<span class="hljs-string"><span class="hljs-string">"512M"</span></span> vfs.zfs.vdev.cache.size=<span class="hljs-string"><span class="hljs-string">"30M"</span></span> vfs.zfs.prefetch_disable=1 kern.vty=vt</code> </pre> <br>  рдкрд╣рд▓реА рдорд╢реАрди рдкрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ /etc/rc.conf (CARP рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреНрд░рд╛рдердорд┐рдХ рд╣рд┐рдд рдХрд╛ рд╣реИ) <br><pre> <code class="bash hljs">ifconfig_eth0=<span class="hljs-string"><span class="hljs-string">"up"</span></span> vlans_eth0=<span class="hljs-string"><span class="hljs-string">"vlan111 vlan222"</span></span> create_args_vlan111=<span class="hljs-string"><span class="hljs-string">"vlan 111"</span></span> create_args_vlan222=<span class="hljs-string"><span class="hljs-string">"vlan 222"</span></span> ifconfig_eth1=<span class="hljs-string"><span class="hljs-string">"up"</span></span> vlans_eth1=<span class="hljs-string"><span class="hljs-string">"vlan333 vlan444 vlan555"</span></span> create_args_vlan333=<span class="hljs-string"><span class="hljs-string">"vlan 333"</span></span> create_args_vlan444=<span class="hljs-string"><span class="hljs-string">"vlan 444"</span></span> create_args_vlan555=<span class="hljs-string"><span class="hljs-string">"vlan 555"</span></span> ifconfig_eth2=<span class="hljs-string"><span class="hljs-string">"up"</span></span> vlans_eth2=<span class="hljs-string"><span class="hljs-string">"vlan666 vlan777 vlan888"</span></span> create_args_vlan666=<span class="hljs-string"><span class="hljs-string">"vlan 666"</span></span> create_args_vlan777=<span class="hljs-string"><span class="hljs-string">"vlan 777"</span></span> create_args_vlan888=<span class="hljs-string"><span class="hljs-string">"vlan 888"</span></span> ifconfig_vlan666=<span class="hljs-string"><span class="hljs-string">"inet 192.168.0.1/24"</span></span> ifconfig_vlan666_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 100 pass MyPassword alias 192.168.0.5/32"</span></span> ifconfig_vlan777=<span class="hljs-string"><span class="hljs-string">"inet 192.168.1.1/24"</span></span> ifconfig_vlan777_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 100 pass MyPassword alias 192.168.1.5/32"</span></span> ifconfig_vlan888=<span class="hljs-string"><span class="hljs-string">"inet 192.168.2.1/24"</span></span> ifconfig_vlan888_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 100 pass MyPassword alias 192.168.2.5/32"</span></span> ifconfig_vlan111=<span class="hljs-string"><span class="hljs-string">"inet 192.168.3.1/30"</span></span> ifconfig_vlan111_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 100 pass MyPassword alias 1.1.1.2/24"</span></span> ifconfig_vlan222=<span class="hljs-string"><span class="hljs-string">"inet 192.168.4.1/30"</span></span> ifconfig_vlan333=<span class="hljs-string"><span class="hljs-string">"inet 192.168.5.1/30"</span></span> ifconfig_vlan333_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 100 pass MyPassword alias 2.2.2.2/30"</span></span> ifconfig_vlan444=<span class="hljs-string"><span class="hljs-string">"inet 192.168.6.1/30"</span></span> ifconfig_vlan444_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 100 pass MyPassword alias 3.3.3.2/30"</span></span> ifconfig_vlan555=<span class="hljs-string"><span class="hljs-string">"inet 192.168.7.1/30"</span></span> defaultrouter=<span class="hljs-string"><span class="hljs-string">"1.1.1.1"</span></span> setfib1_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> setfib1_defaultrouter=<span class="hljs-string"><span class="hljs-string">"3.3.3.1"</span></span> setfib2_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> setfib2_defaultrouter=<span class="hljs-string"><span class="hljs-string">"2.2.2.1"</span></span> zfs_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> named_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> dhcpd_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> firewall_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> firewall_logging=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> firewall_script=<span class="hljs-string"><span class="hljs-string">"/etc/firewall.sh"</span></span> gateway_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> tofoin_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span></code> </pre> <br>  <i>рд▓реАрдЬреЗрдВрдб:</i> <i><br></i>  <i>eth0, eth1, eth2 - рднреМрддрд┐рдХ рдПрдбреЗрдкреНрдЯрд░</i> <i><br></i>  <i>vlan666, vlan777, vlan888 - рд╡рд░реНрдЪреБрдЕрд▓ рд▓реИрди рдПрдбреЗрдкреНрдЯрд░,</i> <i><br></i>  <i>vlan222 рдФрд░ vlan555 - рдмрд╛рд╣рд░реА рдиреЗрдЯрд╡рд░реНрдХ рдХрд╛рд░реНрдб рдХреЗ рдмреАрдЪ рдирд┐рд░рд░реНрдердХ рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рдПрдбреЗрдкреНрдЯрд░ (рдЙрдиреНрд╣реЗрдВ рдЕрдм рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛ рд╕рдХрддреА рд╣реИ, рд╡реЗ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рдкрд╣рд▓реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЧрдП рдереЗ)</i> <i><br></i>  <i>vlan111 - рдореБрдЦреНрдп рдмрд╛рд╣рд░реА рдЪреИрдирд▓</i> <i><br></i>  <i>vlan444 - рдмреИрдХрдЕрдк рдмрд╛рд╣рд░реА рдЪреИрдирд▓</i> <i><br></i>  <i>vlan333 - рдЯреЗрд▓реАрдлреЛрдиреА</i> <br>  рджреВрд╕рд░реА рдорд╢реАрди рдкрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ /etc/rc.conf (CARP рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдореБрдЦреНрдп рд░реБрдЪрд┐ рдХрд╛ рд╣реИ, рдХреБрдЫ рдбреБрдкреНрд▓рд┐рдХреЗрдЯ рд▓рд╛рдЗрдиреЗрдВ рд╣рдЯрд╛ рджреА рдЬрд╛рддреА рд╣реИрдВ): <br><pre> <code class="bash hljs">ifconfig_vlan666=<span class="hljs-string"><span class="hljs-string">"inet 192.168.0.2/24"</span></span> ifconfig_vlan666_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 0 pass MyPassword alias 192.168.0.5/32"</span></span> ifconfig_vlan777=<span class="hljs-string"><span class="hljs-string">"inet 192.168.1.2/24"</span></span> ifconfig_vlan777_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 0 pass MyPassword alias 192.168.1.5/32"</span></span> ifconfig_vlan888=<span class="hljs-string"><span class="hljs-string">"inet 192.168.2.2/24"</span></span> ifconfig_vlan888_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 0 pass MyPassword alias 192.168.2.5/32"</span></span> ifconfig_vlan111=<span class="hljs-string"><span class="hljs-string">"inet 192.168.3.2/30"</span></span> ifconfig_vlan111_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 0 pass MyPassword alias 1.1.1.2/24"</span></span> ifconfig_vlan222=<span class="hljs-string"><span class="hljs-string">"inet 192.168.4.2/30"</span></span> ifconfig_vlan333=<span class="hljs-string"><span class="hljs-string">"inet 192.168.5.2/30"</span></span> ifconfig_vlan333_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 0 pass MyPassword alias 2.2.2.2/30"</span></span> ifconfig_vlan444=<span class="hljs-string"><span class="hljs-string">"inet 192.168.6.2/30"</span></span> ifconfig_vlan444_alias0=<span class="hljs-string"><span class="hljs-string">"vhid 1 advskew 0 pass MyPassword alias 3.3.3.2/30"</span></span> ifconfig_vlan555=<span class="hljs-string"><span class="hljs-string">"inet 192.168.7.2/30"</span></span> defaultrouter=<span class="hljs-string"><span class="hljs-string">"1.1.1.1"</span></span> setfib1_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> setfib1_defaultrouter=<span class="hljs-string"><span class="hljs-string">"3.3.3.1"</span></span> setfib2_enable=<span class="hljs-string"><span class="hljs-string">"YES"</span></span> setfib2_defaultrouter=<span class="hljs-string"><span class="hljs-string">"2.2.2.1"</span></span></code> </pre> <br>  рдХреБрдЫ рдирд┐рдпрдо рдЬреЛ рдЖрдИрдкреАрдПрдлрдбрдмреНрд▓реНрдпреВ (рдПрдирдПрдЯреА) рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╕рдордп рдХрд╛рдо рдЖрддреЗ рд╣реИрдВ: <br>  CARP рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдиреЗ рдХреЗ рд▓рд┐рдП: <br><pre> <code class="bash hljs">/sbin/ipfw -q add allow carp from any to any</code> </pre> <br>  "рдкрд░рдорд╛рдгреБ" рдирдЯ: <br><pre> <code class="bash hljs">/sbin/ipfw -q nat 1 config <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> ip vlan111 reset same_ports deny_in unreg_only /sbin/ipfw -q add nat 1 ip from any to any <span class="hljs-keyword"><span class="hljs-keyword">in</span></span></code> </pre> <br>  рд╡рд┐рд╢рд┐рд╖реНрдЯ рдПрдбреЗрдкреНрдЯрд░ рдХреЗ рд╕рд╛рде рд╡рд┐рд╢рд┐рд╖реНрдЯ рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛: <br><pre> <code class="bash hljs">/sbin/ipfw -q add setfib 0 all from any to any via vlan666</code> </pre> <br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдореИрдВ рдЕрдкрдиреЗ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА ipfw рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ рд▓рд┐рдЦ рд╕рдХрддрд╛ рдерд╛, рд▓реЗрдХрд┐рди рдпрд╣ рдХреБрдЫ рдФрд░ рд╕рдордп рд╣реИред <br></div></div><br><h4>  3 рдкрд╛рд░реНрдЯреА рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ </h4><br><div class="spoiler">  <b class="spoiler_title">рдЕрдзрд┐рдХ рдЬрд╛рдирдХрд╛рд░реА</b> <div class="spoiler_text">  рдЪреВрдВрдХрд┐ рдПрдХ рд╕рд╛рде рджреЛ рдпрд╛ рджреЛ рд╕реЗ рдЕрдзрд┐рдХ рдмрд╛рд╣рд░реА рдЪреИрдирд▓реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЗрд╕рдХреЗ рд▓рд┐рдП рдХрдИ рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓, рдкреНрд░рддреНрдпреЗрдХ рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рдПрдХ рдХреЗ рд▓рд┐рдП рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ рд╣реИред  рдФрд░ рдпрд╣ рдЕрдЪреНрдЫрд╛ рд╣реЛрдЧрд╛ рдпрджрд┐ рдЗрди рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рдЦреБрдж рдмрдирд╛рдпрд╛ рдЬрд╛рдПред  Rdd setfib рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдорджрдж рдХрд░реЗрдЧреАред  ToFoIn рдореЗрдВ рдкреНрд░рдпреБрдХреНрдд рддрд░реНрдХ рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рдлрд╝рд╛рдЗрд▓ рдирд╛рдо (setfib1, setfib2, рдЖрджрд┐) рддрд╛рд▓рд┐рдХрд╛ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдПрдХрд▓ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдПрдХ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рд░реНрдЧ рдЬреЛрдбрд╝рддрд╛ рд╣реИред  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рддрд╛рд▓рд┐рдХрд╛ рдореЗрдВ рдирдВрдмрд░ "0" рд╣реИред <br>  рдореБрдЦреНрдп рднреВрдорд┐рдХрд╛ рдореЗрдВ рдмрд┐рдВрдж рдХреЗ рд╕рд╛рде DNS рд╕рд░реНрд╡рд░ рдорд╛рдзреНрдпрдорд┐рдХ рдореЛрдб рдореЗрдВ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдореБрдЦреНрдп рдПрдХ samba4 + рдмрд╛рдЗрдВрдб рд╣реИ, рдЬреЛ рд╕реНрдерд╛рдиреАрдп рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рдЫрд┐рдкрд╛ рд╣реБрдЖ рд╣реИред  рд╕реЗрдХреЗрдВрдбрд░реА рдмрд╛рдЗрдВрдб рдХреА рд╕реНрдерд╛рдкрдирд╛ рдХреНрд░рд┐рдХреЗрдЯ рд▓реА рдФрд░ рдкреЙрд▓ рдЕрд▓реНрдмрд┐рдЬ рдХреА "рдбреАрдПрдирдПрд╕ рдПрдВрдб рдмрдВрдб" рдкреБрд╕реНрддрдХ рдореЗрдВ рдЦреВрдмрд╕реВрд░рддреА рд╕реЗ рдХреА рдЧрдИ рд╣реИред  рдореБрдЭреЗ рдРрд╕реА рдХреЛрдИ рд╡рд┐рд╢реЗрд╖ рдЖрд╡рд╢реНрдпрдХрддрд╛рдПрдВ рдпрд╛рдж рдирд╣реАрдВ рд╣реИрдВ рдЬреЛ рдорд╛рдзреНрдпрдорд┐рдХ рд╕рд░реНрд╡рд░реЛрдВ рдХреЗ рд▓рд┐рдП samba4 рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреА рд╣реИрдВ, рдФрд░ рдореИрдВ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдЙрдирдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реВрдВред  рдЬрдм рддрдХ рдХрд┐ рдЕрд▓рдЧ-рдЕрд▓рдЧ рдЗрдВрдЯрд░рдиреЗрдЯ рдЪреИрдирд▓реЛрдВ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ 2 рдЕрд▓рдЧ-рдЕрд▓рдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛ рд╕рдХрддреА рд╣реИ, рдЬрд┐рд╕реЗ рдмрд╛рдж рдореЗрдВ ToFoIn рд╕реНрдХреНрд░рд┐рдкреНрдЯ рджреНрд╡рд╛рд░рд╛ рдЙрд╕ рд╕реНрдерд╛рди рдкрд░ рдХреЙрдкреА рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ рдЬрд╣рд╛рдВ рд╕реЗ рдмрд╛рдЗрдВрдб рдЦреБрдж рдЗрд╕реЗ рдкрдврд╝реЗрдЧрд╛ред  рдпрд╣ рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рд╣реИ рдХрд┐ рдЬрдм рдПрдХ рд╣реА рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рджреЛрдиреЛрдВ рдкреНрд░рджрд╛рддрд╛рдУрдВ рдХреЗ DNS рд╕рд░реНрд╡рд░ рдХреЗ рдкрддреЗ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдХреЗрд╡рд▓ рдПрдХ рд░рд╛рдЙрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдмрд╛рдЗрдВрдб рдХреЛ рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрддреЗ рд╣реБрдП, рдПрдХ рдирд┐рд╢реНрдЪрд┐рдд рд╕рдордп рдкрд░ рдЕрдкреНрд░рд╛рдкреНрдп рд╕рд░реНрд╡рд░реЛрдВ рд╕реЗ рдкрддреЗ рдХреЗ рд╕рдорд╛рдзрд╛рди рдХреЗ рд╕рдВрдмрдВрдз рдореЗрдВ рдПрдХ рд╕рдорд╕реНрдпрд╛ рдЙрддреНрдкрдиреНрди рд╣реЛрддреА рд╣реИред <br>  рдлреЗрд▓рдУрд╡рд░ isc-dhcpdред  Dhcpd ToFoIn рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ, рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЗрд╕рдХреА рдЕрдиреБрдкрд╕реНрдерд┐рддрд┐ рд▓рд┐рдкрд┐рдпреЛрдВ рдХреЛ рдмрд┐рд▓реНрдХреБрд▓ рднреА рдкреНрд░рднрд╛рд╡рд┐рдд рдирд╣реАрдВ рдХрд░реЗрдЧреА, рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЬреИрд╕рд╛ рдХрд┐ рдореБрдЭреЗ рд▓рдЧрддрд╛ рд╣реИ, рдЧреЗрдЯрд╡реЗ рдкрд░ dhcp рд╕рд░реНрд╡рд░ рд░рдЦрдирд╛ рдХрд╛рдлреА рддрд░реНрдХрд╕рдВрдЧрдд рд╣реИ рдФрд░ рдлрд┐рд░ рд╡рд┐рдлрд▓рддрд╛ рдХрд╛ рд╕рд╡рд╛рд▓ рдЕрднреА рднреА рдЙрдарддрд╛ рд╣реИред  рдФрд░ рдпрд╣рд╛рдВ, рдкрд┐рдЫрд▓реА рдмрд╛рд░ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ, рдпрд╣ рдЕрдзрд┐рдХ рджрд┐рд▓рдЪрд╕реНрдк рд╣реЛ рдЧрдпрд╛ ... рдЕрд╕рдлрд▓рддрд╛ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЬреЛ рдореИрдВрдиреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓реА рдмрд╛рд░</a> (рдбреНрд░реЙрдк-рдбрд╛рдЙрди рдореЗрдиреВ рдХреЗ рдЕрдВрджрд░ "рдкреНрд░реАрд╕реЗрдЯ" рдЕрдиреБрднрд╛рдЧ рдХреА рд╢реБрд░реБрдЖрдд) рд╡рд░реНрдгрд┐рдд рдХрд┐рдпрд╛ рдерд╛ред <br>  рдЖрдкрдХреЛ samba4 рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ AD рдореЗрдВ рд░рд┐рдХреЙрд░реНрдбреНрд╕ рдХреЛ рд╕реБрд░рдХреНрд╖рд┐рдд рд░реВрдк рд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреА рднреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  Samba4 рд╕рд░реНрд╡рд░ рд╣реА рд╕реНрдерд╛рдкрд┐рдд рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред  рд╕реЗрдЯрдЕрдк рдФрд░ рд▓реЙрдиреНрдЪ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рд╣рдо рдХреЗрд╡рд▓ рдХрд┐рдЯ рдХреЗ рд╕рд╛рде рдЖрдиреЗ рд╡рд╛рд▓реЗ рдкреНрд░рдмрдВрдзрди рдЯреВрд▓ рдореЗрдВ рд░реБрдЪрд┐ рд░рдЦрддреЗ рд╣реИрдВред  рдЬреЛ рд▓реЛрдЧ "рдбрд╛рдпрдиреЗрдорд┐рдХ рдбреАрдПрдирдПрд╕ рдЕрдкрдбреЗрдЯ рдХреЗ рд╕рд╛рде рдбреАрдПрдЪрд╕реАрдкреА" рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдЕрдиреНрдп рдЬрд╛рдирдХрд╛рд░реА рдкрд╛ рд╕рдХрддреЗ рд╣реИрдВред <br>  рдпрд╣ рдбрд░рд╛рд╡рдирд╛ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред <br>  рдЗрд╕ рдкрд░ рддреГрддреАрдп-рдкрдХреНрд╖ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛ рдЧрдпрд╛ рд╣реИред <br></div></div><br><h4>  ToFoIn рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдереЛрдбрд╝рд╛ рд╕рд╛ </h4><br>  рдЗрдВрд╕реНрдЯрд╛рд▓реЗрд╢рди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд╕рд╛рде рд╕рднреА рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдЯреЗрдХреНрд╕реНрдЯ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧрд┐рдЯрд▓реИрдм</a> рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред <br><br><div class="spoiler">  <b class="spoiler_title">рдирд┐рд╖реНрдХрд░реНрд╖ рдореЗрдВ, ToFoIn рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдлрд╝рд╛рдЗрд▓ рдорд╛рдкрджрдВрдбреЛрдВ рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ:</b> <div class="spoiler_text">  рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд░рд╛рдЙрдЯрд░ рдХреА рд╕рдВрдЦреНрдпрд╛: <br><pre> <code class="bash hljs">RNUMBER=2</code> </pre> <br>  рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдмрдиреЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп, рдЖрдкрдХреЛ рд░рд╛рдЙрдЯрд░ рдХреЗ рдкреНрд░рд╛рдердорд┐рдХ рд╣реЛрдиреЗ рдкрд░ рдПрдХ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рд░реНрдЧ рд╕реЗрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдпрд╣рд╛рдВ рдЖрдк рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрдЯрд┐рдлрд╝ рдлрд╝рд╛рдЗрд▓ рдХреА рд╕рдВрдЦреНрдпрд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдЗрд╕ рдЙрджрд╛рд╣рд░рдг рдореЗрдВ, setfib2: <br><pre> <code class="bash hljs">ADDITLAN=2</code> </pre> <br>  рдЖрдВрддрд░рд┐рдХ рдПрдбрд╛рдкреНрдЯрд░ рдирд╛рдо: <br><pre> <code class="bash hljs">INT_IF=vlan666</code> </pre> <br>  рдЕрдиреНрдп рд╕рднреА рдЗрдВрдЯрд░рдлреЗрд╕ рдЬрд┐рд╕ рдкрд░ рд░реВрдЯрд░ рдХрд╛рд░рдк рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЬреБрдбрд╝реЗ рд╣реБрдП рд╣реИрдВред  рд╕рднреА рдЗрдВрдЯрд░рдлреЗрд╕ рдХреЗ рдПрдХ рд╣реА рд░рд╛рдЬреНрдп рдХреЛ рдирд┐рдпрдВрддреНрд░рд┐рдд рдХрд░рдиреЗ рдФрд░ рдмрдирд╛рдП рд░рдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ: <br><pre> <code class="bash hljs">ALL_IF=<span class="hljs-string"><span class="hljs-string">"vlan111 vlan333 vlan444 vlan666 vlan777 vlan888"</span></span></code> </pre> <br>  рдХрд╛рд░ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддреЗ рд╕рдордп рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдиреЗ рд╡рд╛рд▓рд╛ vhid: <br><pre> <code class="bash hljs">CARP_VHID=1</code> </pre> <br>  рдорд╣рддреНрд╡рдкреВрд░реНрдг рдХреЗ рдХреНрд░рдо рдореЗрдВ рдЕрдиреНрдп рд░рд╛рдЙрдЯрд░ рдХреЗ рдЖрдВрддрд░рд┐рдХ рдиреЗрдЯрд╡рд░реНрдХ рдореЗрдВ рдЖрдИрдкреА рдкрддреЗ, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ ASERV_IP_2, ASERV_IP_3, рдЖрджрд┐ рдмрд╕ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВред <br><pre> <code class="bash hljs">ASERV_IP_1=192.168.0.2</code> </pre> <br>  рдмрд╛рд╣рд░реА рдХрдиреЗрдХреНрд╢рди рдЪреИрдирд▓реЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛: <br><pre> <code class="bash hljs">CNUMBER=2</code> </pre> <br>  рдореБрдЦреНрдп рдмрд╛рд╣рд░реА рдХрдиреЗрдХреНрд╢рди рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕: <br>  рдПрдбрд╛рдкреНрдЯрд░ рдХрд╛ рдирд╛рдо: <br><pre> <code class="bash hljs">EXT_0_IF=vlan111</code> </pre> <br>  рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдирдВрдмрд░: <br><pre> <code class="bash hljs">RTABLE_0=0</code> </pre> <br>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЧреЗрдЯрд╡реЗ: <br><pre> <code class="bash hljs">DEFAULT_GATEWAY=2.2.2.1</code> </pre> <br>  рдмреИрдХрдЕрдк рдмрд╛рд╣рд░реА рдХрдиреЗрдХреНрд╢рди рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рд╕реЗрдЯрд┐рдВрдЧреНрд╕: <br>  рдПрдбрд╛рдкреНрдЯрд░ рдХрд╛ рдирд╛рдо: <br><pre> <code class="bash hljs">EXT_1_IF=vlan444</code> </pre> <br>  рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдирдВрдмрд░: <br><pre> <code class="bash hljs">RTABLE_1=1</code> </pre> <br>  рдПрдХ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЧреЗрдЯрд╡реЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рд╕рднреА рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдХреЗ рд▓рд┐рдП, рдореБрдЦреНрдп рдПрдХ рдХреЛ рдЫреЛрдбрд╝рдХрд░, rc.d рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реЗрдЯрдлрд┐рдм &lt;рдЯреЗрдмрд▓ рдирдВрдмрд░&gt; рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЬреЛ рддрд░реНрдХ рдорд╛рди рд▓реЗрддрд╛ рд╣реИ, рдЯреЗрдмрд▓ рдирдВрдмрд░ рд╕реЗ рдореЗрд▓ рдЦрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред <br>  рдкрд░реАрдХреНрд╖рдХ рдореЙрдбреНрдпреВрд▓ рдкреИрд░рд╛рдореАрдЯрд░: <br>  рдЬрд╛рдБрдЪ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рдкрддреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛: <br><pre> <code class="bash hljs">TNUMBER=2</code> </pre> <br>  рдорд╢реАрдиреЛрдВ рдХреЗ рдкрддреЗ рдЬрд┐рдирдХреЗ рджреНрд╡рд╛рд░рд╛ рдкрд┐рдВрдЧ рдЕрдиреБрд░реЛрдз рднреЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВред  рдкрд╣рд▓реЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдбреЛрдореЗрди рдирд╛рдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рд╣реИ, рдФрд░ рдЙрд╕рдХреЗ рдмрд╛рдж рд╣реА рдЖрдИрдкреА рдкрддрд╛: <br><pre> <code class="bash hljs">PTARGET_0=ya.ru PTARGET_1=8.8.8.8</code> </pre> <br>  рдкреНрд░рддрд┐ рд▓рдХреНрд╖реНрдп рднреЗрдЬреЗ рдЧрдП рдкрд┐рдВрдЧ рдкреИрдХреЗрдЯреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛: <br><pre> <code class="bash hljs">PNUMBER=2</code> </pre> <br>  рдЬрдЬ рдореЙрдбреНрдпреВрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ <br>  рдЗрд╕рдореЗрдВ рд▓реМрдЯрдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдореБрдЦреНрдп рдЪреИрдирд▓ рдХреЗ рд╕рдлрд▓ рдкрд░реАрдХреНрд╖рдгреЛрдВ рдХреА рд╕рдВрдЦреНрдпрд╛ред  рдЕрдкрдиреЗ рдСрдкрд░реЗрд╢рди рдХреЛ рдлрд┐рд░ рд╕реЗ рд╢реБрд░реВ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдореБрдЦреНрдп рдЪреИрдирд▓ рдкрд░ рд╡рд╛рдкрд╕реА рдХрд╛ рд╕рдордп рд▓рдЧрднрдЧ рд╕реВрддреНрд░ рджреНрд╡рд╛рд░рд╛ рдЧрдгрдирд╛ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: (WNUMBER + 1) * JUDGEPERIOD рд╕реЗрдХрдВрдбред <br><pre> <code class="bash hljs">WNUMBER=3</code> </pre> <br>  рд▓рдХрдбрд╝рд╣рд╛рд░рд╛ рдореЙрдбреНрдпреВрд▓ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ <br>  рдпреЗ 2 рдкреИрд░рд╛рдореАрдЯрд░ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд▓реЙрдЧрд░ рдХрд┐рддрдиреА рдмрд╛рд░ рдЖрд╡рд░реНрддреА рдШрдЯрдирд╛рдУрдВ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░реЗрдЧрд╛ред  рдШрдЯрдирд╛ рдХреЛ рд░рд┐рдХреЙрд░реНрдб рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рдЕрдЧрд▓реА рдмрд╛рд░ LOGFREQ1 рдирдВрдмрд░ рдХреА рд╕рдВрдЦреНрдпрд╛ рдлрд┐рд░ рд╕реЗ рдмрддрд╛рдИ рдЬрд╛рддреА рд╣реИ, рдлрд┐рд░ LOGFREQ2 рд░рд┐рдЯреНрд░реАрдЯ рдХреА рд╕рдВрдЦреНрдпрд╛ рд╣реИред  рдПрдХ рдкрдВрдХреНрддрд┐ рдореЗрдВ рдХреЗрд╡рд▓ рдШрдЯрдирд╛рдУрдВ рдХреЛ рд╣реА рдзреНрдпрд╛рди рдореЗрдВ рд░рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><pre> <code class="bash hljs">LOGFREQ1=5 LOGFREQ2=20</code> </pre> <br>  рдореЙрдбреНрдпреВрд▓ рд╕реЗрдХрдВрдб рдореЗрдВ рдЯрд╛рдЗрдорд░ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ <br>  рдЯреЗрд╕реНрдЯрд░ рдореЙрдбреНрдпреВрд▓ рдХреА рд▓реЙрдиреНрдЪ рдЕрд╡рдзрд┐ред  рдпрд╣ рд╕рднреА рд▓рдХреНрд╖реНрдпреЛрдВ рдХрд╛ рдкрд░реАрдХреНрд╖рдг рдХрд░рдиреЗ рдХреЗ рдЕрд╕рдлрд▓ рдкреНрд░рдпрд╛рд╕реЛрдВ рдХреЗ рд╕рдордп рдкрд░ рднрд░реЛрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИред <br><pre> <code class="bash hljs">TESTERPERIOD=240</code> </pre> <br>  рдиреНрдпрд╛рдпрд╛рдзреАрд╢ рдореЙрдбреНрдпреВрд▓ рдХреА рд▓реЙрдиреНрдЪ рдЕрд╡рдзрд┐ред  TESTERPERIOD рд╕реЗ рдХрдо рд╕реНрдерд╛рдкрд┐рдд рди рдХрд░реЗрдВред <br><pre> <code class="bash hljs">JUDGEPERIOD=300</code> </pre> <br>  рд╕реНрдХрд╛рдЙрдЯ рдореЙрдбреНрдпреВрд▓ рдХреА рд▓реЙрдиреНрдЪ рдЕрд╡рдзрд┐ред <br><pre> <code class="bash hljs">SCOUTPERIOD=360</code> </pre> <br>  рдкрд░реАрдХреНрд╖рдХ рдФрд░ рдЬрдЬ рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕реНрдЯрд╛рд░реНрдЯ рдЯрд╛рдЗрдорд░ рдХреА рдЬрд╛рдБрдЪ рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдкреНрд░рддреАрдХреНрд╖рд╛ рдЕрд╡рдзрд┐ред  TESTERPERIOD рдХреЗ рдорд╛рди рд╕реЗ рдХрдо рдпрд╛ рдмрд░рд╛рдмрд░ рд╕реЗрдЯ рдХрд░рдирд╛ рддрд░реНрдХрд╕рдВрдЧрдд рд╣реИред <br><pre> <code class="bash hljs">SENSITIVITY=60</code> </pre> <br>  рд╡рд╣ рд╕рдордп рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдПрдХ рдХрд╛рдордХрд╛рдЬреА рдореЙрдбреНрдпреВрд▓ рдХреЛ рд▓рдЯрдХрд╛ рд╣реБрдЖ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИред  рд╡реЙрдЪрдбреЙрдЧ рдореЙрдбреНрдпреВрд▓ рджреНрд╡рд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><pre> <code class="bash hljs">TESTERLIMIT=40 JUDGELIMIT=30 LOGGERLIMIT=20 SCOUTLIMIT=120 WATCHDOGLIMIT=150</code> </pre> <br>  рдлрд╝рд╛рдЗрд▓реЛрдВ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХреЗ рд▓рд┐рдП рдкрде <br>  IPfw рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд▓рд┐рдП рдкрдеред <br><pre> <code class="bash hljs">FIRESCRIPT=/etc/firewall.sh</code> </pre> <br>  Ipfw рд╕реЗрдЯрд┐рдВрдЧреНрд╕ред  рдпрджрд┐ ipfw рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдПрдХ рдЕрд▓рдЧ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд╣реАрдВ рд▓реЗ рдЬрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ FIRESCRIPT = FIRESETDEFред <br><pre> <code class="bash hljs">FIRESETDEF=/etc/firewall/config</code> </pre> <br>  рдореБрдЦреНрдп рдмрд╛рд╣рд░реА рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП ipfw рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд╛ рдкрде: <br><pre> <code class="bash hljs">FIRESET_0=/etc/firewall/config_0</code> </pre> <br>  рдмреИрдХрдЕрдк рдмрд╛рд╣рд░реА рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП ipfw рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХрд╛ рдкрде, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЖрдк рдЖрдЧреЗ FIRESET_2, рдЖрджрд┐ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВ: <br><pre> <code class="bash hljs">FIRESET_1=/etc/firewall/config_1</code> </pre> <br>  рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдмрд╛рдБрдзрдиреЗ рдХреЗ рд▓рд┐рдП рдкрде <br><pre> <code class="bash hljs">BINDSETDEF=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/etc/namedb/named.conf</code> </pre> <br>  рдореБрдЦреНрдп рдмрд╛рд╣рд░реА рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рдмрд╛рдЗрдВрдб рд╕реЗрдЯрд┐рдВрдЧреНрд╕: <br><pre> <code class="bash hljs">BINDSET_0=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/etc/namedb/named.conf.0</code> </pre> <br>  рдмреИрдХрдЕрдк рдмрд╛рд╣рд░реА рдЪреИрдирд▓ рдХреЗ рд▓рд┐рдП рдмрд╛рдЗрдВрдб рд╕реЗрдЯрд┐рдВрдЧреНрд╕, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдЖрдк рдЖрдЧреЗ BINDSET_2, рдЖрджрд┐ рдЬрд╛рд░реА рд░рдЦ рд╕рдХрддреЗ рд╣реИрдВред <br><pre> <code class="bash hljs">BINDSET_1=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/etc/namedb/named.conf.1</code> </pre> <br>  рд╕рднреА ToFoIn рдирд┐рд╖реНрдкрд╛рджрдиреЛрдВ рдХреЗ рд▓рд┐рдП рдкрде: <br><pre> <code class="bash hljs">DAEMON=/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sbin/tofoin/daemon.sh TESTER=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sbin/tofoin/tester.sh JUDGE=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sbin/tofoin/judge.sh LOGGER=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sbin/tofoin/logger.sh SCOUT=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sbin/tofoin/scout.sh WATCHDOG=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/sbin/tofoin/watchdog.sh</code> </pre> <br>  рдЗрд╡реЗрдВрдЯ рд▓реЙрдЧред  рдпрд╣ рдлрд╝рд╛рдЗрд▓ рдЕрднреА рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдкрд░ рдирд╣реАрдВ рдмрдирд╛рдИ рдЧрдИ рд╣реИ: <br><pre> <code class="bash hljs">LOGFILE=/var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/tofoin.log</code> </pre> <br>  рд╕рдВрдмрдВрдзрд┐рдд рдореЙрдбреНрдпреВрд▓ рдЪрд╛рд▓реВ рд╣реЛрдиреЗ рдкрд░ рдЕрд╕реНрдерд╛рдпреА рдлрд╝рд╛рдЗрд▓реЗрдВ рдФрд░ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВ рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИрдВ, рдХреБрдЫ рдХреЛ рд░реЛрдХрдиреЗ рдкрд░ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><pre> <code class="bash hljs">DIR_TMP=/tmp/tofoin DIR_PID=/var/run/tofoin JUDGEMETER=/tmp/tofoin/judgemeter PREVSTATE=/tmp/tofoin/prevstate SCOUTGATE=/tmp/tofoin/scoutgate LOGTMP=/tmp/tofoin/logger.tmp LOGMETER=/tmp/tofoin/logmeter DAEMON_PID=/var/run/tofoin/daemon.pid TESTER_PID=/var/run/tofoin SCOUT_PID=/var/run/tofoin/scout.pid JUDGE_PID=/var/run/tofoin/judge.pid LOGGER_PID=/var/run/tofoin/logger.pid WATCHDOG_PID=/var/run/tofoin_watchdog.pid</code> </pre> <br></div></div><br><h3>  рдкрд░рд┐рдгрд╛рдо </h3><br>  рдпрд╣ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХрд╛ рдПрдХ рдкреВрд░реА рддрд░рд╣ рдХрд╛рд░реНрдпрд╛рддреНрдордХ рдФрд░ рд╡рд┐рд╢реНрд╡рд╕рдиреАрдп рд╕реЗрдЯ рдирд┐рдХрд▓рд╛ рдЬреЛ 2 рдмрд╛рд╣рд░реА рд╕рдВрдЪрд╛рд░ рдЪреИрдирд▓реЛрдВ рдХреЗ рд╕рд╛рде 2 рд░рд╛рдЙрдЯрд░ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдЪреИрдирд▓ рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдХреЗ рдХрд╛рд░реНрдп рдХреЗ рд╕рд╛рде рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рдореБрдХрд╛рдмрд▓рд╛ рдХрд░рддрд╛ рд╣реИред <br><br><h3>  рдпреЛрдЬрдирд╛рдУрдВ </h3><br>  рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдореЗрд░реА рдпреЛрдЬрдирд╛рдПрдВ, рд╢рд╛рдпрдж рд╕рд░реНрд╡рд░ рдкрд░ рдЕрдирд╛рд╡рд╢реНрдпрдХ рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рд╕реЗ рдЫреБрдЯрдХрд╛рд░рд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдмреИрд╢ рд╕реЗ рд╢реБрджреНрдз рд╢ рдореЗрдВ рдлрд┐рд░ рд╕реЗ рд▓рд┐рдЦрдирд╛ рд╣реИред  рджреВрд╕рд░реА рдУрд░, рдЕрдм рд╕рдм рдХреБрдЫ рдЖрд╢реНрдЪрд░реНрдпрдЬрдирдХ рд░реВрдк рд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ рдФрд░ рдореБрдЭреЗ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ рд╣рд╕реНрддрдХреНрд╖реЗрдк рдХрд░рдиреЗ рдХрд╛ рдорди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдПрдХ рд╣реА рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдФрд░ рдЕрдзрд┐рдХ рднрдпрд╛рдирдХ рднрд╛рд╖рд╛ рдирд┐рд░реНрдорд╛рдгреЛрдВ рдХреЗ рд╕рд╛рде sh рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИред <br>  рдмрд╛рдХреА рдХреЗ рд▓рд┐рдП, рд╢рд╛рдпрдж, рдпрд╣ рдкрд░реАрдХреНрд╖рдг рдореЙрдбреНрдпреВрд▓ рдХреЗ рд╕рд░реНрд╡реЛрддреНрддрдо рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдиреЗ рдпреЛрдЧреНрдп рд╣реЛрдЧрд╛ред <br><br><h3>  рд╕рдВрджрд░реНрдн: </h3><br>  тЖР <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд┐рдЫрд▓рд╛ рд▓реЗрдЦ</a> <br>  тЖТ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЯрд┐рдЯреЛрдЗрди рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдкреЗрдЬ рдЬрд┐рддрд╛рд▓рд╛рдм рдкрд░</a> <br><div class="spoiler">  <b class="spoiler_title">рдмрд╛рдХреА</b> <div class="spoiler_text">  DNS 9: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓реА рдХреЗред, рдЕрд▓реНрдмрд┐рддреНрдЬ рдкреАред - рдбреАрдПрдирдПрд╕ рдФрд░ рдмрдВрдб (5 рд╡рд╛рдВ рд╕рдВрд╕реНрдХрд░рдг)</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">DNS рд╕рд░реНрд╡рд░ BIND</a> <br>  рдбреАрдПрдЪрд╕реАрдкреА: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рдлрд▓рддрд╛ dhcp</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЧрддрд┐рд╢реАрд▓ DNS рдЕрдкрдбреЗрдЯ рдХреЗ рд╕рд╛рде рдбреАрдПрдЪрд╕реАрдкреА</a> <br>  <a href="">рд╕рд╛рдореНрдмрд╛-dnsupdate</a> <br>  SETFIB: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдмреАрдЬреАрдкреА рдпрд╛ рдЗрд╕реА рддрд░рд╣ рдХреЗ рдмрд┐рдирд╛ FreeBSD рдореЗрдВ рдХрдИ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рд░реНрдЧ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░рд╛рдЙрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ рдХреЗ рдмреАрдЪ рд╕реЗрдЯрдлрд┐рдм рдФрд░ рд╕реНрд╡рд┐рдЪрд┐рдВрдЧ</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">FreeBSD рджреЛ рдкреНрд░рджрд╛рддрд╛рдУрдВред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">setfib</a> <br>  IPFW + NAT: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рд╕реНрддреГрдд ipfw рдиреЗрдЯ рдореИрдиреБрдЕрд▓</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">FreeBSD 9 + ipfw + ipfw nat</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡рд┐рд╕реНрддреГрдд ipfw рдиреЗрдЯ рдореИрдиреБрдЕрд▓</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">DUMMYNET</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░реНрдиреЗрд▓ рдПрдирдПрдЯреА</a> <br>  рдорд╛рд░: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">BASH рдХреА рдореВрд▓ рдмрд╛рддреЗрдВред</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ реи</a> <br>  <a href="">рдЙрдиреНрдирдд рдмреИрд╢-рд╕реНрдХреНрд░рд┐рдкреНрдЯрд┐рдВрдЧ рдЧрд╛рдЗрдб</a> <br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi421857/">https://habr.com/ru/post/hi421857/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi421845/index.html">рдбреЗрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдХ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреНрдпрд╛ рдХрд░рддреЗ рд╣реИрдВ? 35 рд╕рд╛рдХреНрд╖рд╛рддреНрдХрд╛рд░ рд╕реЗ рдирд┐рд╖реНрдХрд░реНрд╖</a></li>
<li><a href="../hi421847/index.html">рдмрд╛рджрд▓ рдореЗрдВ рдХреВрджреЛред NodeMCU + Azure IoT рд╣рдм рдкрд░ рдПрдХ рдмрдЬрдЯ IoT рд╕рдорд╛рдзрд╛рди рдХрд╛ рдирд┐рд░реНрдорд╛рдг</a></li>
<li><a href="../hi421849/index.html">рд╕рд┐рддрдВрдмрд░ 2018 рдореЗрдВ рдЖрдИрдЯреА рдореЗрдВ рдПрдЪрдЖрд░ рдХреЗ рд▓рд┐рдП рдЗрд╡реЗрдВрдЯ: рдорд╛рдп рд╕рд░реНрдХрд▓ рдбрд╛рдЗрдЬреЗрд╕реНрдЯ</a></li>
<li><a href="../hi421851/index.html">рдЙрд▓реНрд▓реВ рдФрд░ рдЧреНрд▓реЛрдм рдореБрджреНрджреЗ: рджреЛ рд╡рд┐рдзрд╛рдирд╕рднрд╛рдУрдВ рдХреЛ рд╕рдорд╛рди рдирд╛рдорд╕реНрдерд╛рди рдФрд░ рд╡рд░реНрдЧ рдирд╛рдореЛрдВ рд╕реЗ рдЬреЛрдбрд╝рдирд╛</a></li>
<li><a href="../hi421855/index.html">рд╣реЛрдо рдкреНрд░реЛрдЬреЗрдХреНрдЯрд░: рд╕рд░реНрд╡рд╢реНрд░реЗрд╖реНрда "рд╕рдВрд╕реНрдХрд░рдг рдХреЗ рдЕрдиреБрд╕рд╛рд░", рдЕрд▓реНрдЯреНрд░рд╛-рд╢реЙрд░реНрдЯ рдлреЛрдХрд╕, рдЪрдордХ рдФрд░ рдЧрддрд┐ рдореЗрдВ рдЪреИрдВрдкрд┐рдпрди</a></li>
<li><a href="../hi421859/index.html">IoT рдкреНрд░рджрд╛рддрд╛ рдХреЗ рдиреЛрдЯреНрд╕ред рдЙрдкрдХрд░рдг рдФрд░ рдкреНрд░рдХреЛрдк</a></li>
<li><a href="../hi421863/index.html">рдиреИрдиреЛрдЯреНрдпреВрдм рдмрдирд╛рдиреЗ рдХрд╛ рдПрдХ рдирдпрд╛ рддрд░реАрдХрд╛: рдЕрдм рд░рдВрдЧ рдореЗрдВ</a></li>
<li><a href="../hi421867/index.html">рдХреЛрдб рдХреЛ рдкрдардиреАрдп рдХреИрд╕реЗ рдмрдирд╛рдпрд╛ рдЬрд╛рдП</a></li>
<li><a href="../hi421869/index.html">Firebase ML рдХрд┐рдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рд╕рдордп рдореЗрдВ рдЪреЗрд╣рд░реЗ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ Android рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдмрдирд╛рдПрдВ</a></li>
<li><a href="../hi421871/index.html">рдПрдВрдбреНрд░реЙрдЗрдб рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдореЗрдВ рдЬрд╛рд╡рд╛ рд╕реЗ рдХреЛрдЯрд▓рд┐рди рдорд╛рдЗрдЧреНрд░реЗрд╢рди рдХреЛ рдмреБрд░реА рддрд░рд╣ рд╕реЗ рд╡рд┐рдлрд▓ рдХреИрд╕реЗ рдХрд░реЗрдВ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>