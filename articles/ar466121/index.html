<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ ๐ง๐ฝ ๐ ุชูููุฏ ุงูุตูุช ุนูู ูููุฑูููุชุฑููุฑ AVR ุจุงุณุชุฎุฏุงู ุทุฑููุฉ wavetable ูุน ุฏุนู polyphony โ ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูููุฑูููุชุฑููุฑ AVR ูู ุฑุฎูุตุฉ ุฅูู ุญุฏ ูุง ูุนูู ูุทุงู ูุงุณุน. ุฑุจูุง ุ ูุจุฏุฃ ุฃู ูุทูุฑ ูุถูู ุชูุฑูุจูุง ูุนูู. ูุจูู ุงูููุงุฉ ุ ููุงุนุฏ ุงููุฑุฉ ุงุฑุฏูููู ุ ููุจูุง ูู ุนุงุฏุฉ ATmega328...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชูููุฏ ุงูุตูุช ุนูู ูููุฑูููุชุฑููุฑ AVR ุจุงุณุชุฎุฏุงู ุทุฑููุฉ wavetable ูุน ุฏุนู polyphony</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466121/" style=";text-align:right;direction:rtl">  ูููุฑูููุชุฑููุฑ AVR ูู ุฑุฎูุตุฉ ุฅูู ุญุฏ ูุง ูุนูู ูุทุงู ูุงุณุน.  ุฑุจูุง ุ ูุจุฏุฃ ุฃู ูุทูุฑ ูุถูู ุชูุฑูุจูุง ูุนูู.  ูุจูู ุงูููุงุฉ ุ ููุงุนุฏ ุงููุฑุฉ ุงุฑุฏูููู ุ ููุจูุง ูู ุนุงุฏุฉ ATmega328p.  ุจุงูุชุฃููุฏ ุชุณุงุกู ุงููุซูุฑ: ููู ููููู ุฌุนููุง ุณูููุฉุ <br><br>  ุฅุฐุง ูุธุฑุช ุฅูู ุงููุดุงุฑูุน ุงูุญุงููุฉ ุ ููู ูู ุนุฏุฉ ุฃููุงุน: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุฏุงุช ูุจุถ ูุฑุจุน.  ุฅูุดุงุก ุจุงุณุชุฎุฏุงู PWM ุฃู ุฏุจุงุจูุณ ูุงูู ูู ุงูููุงุทุนุงุช.  ูู ุฃู ุญุงู ุ ูุชู ุงูุญุตูู ุนูู ุตูุช ุตุฑูุฑ ูููุฒุฉ ููุบุงูุฉ. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู ุฃุฌูุฒุฉ ุฎุงุฑุฌูุฉ ูุซู ูุญุฏุฉ ูู ุชุฑููุฒ MP3. </li><li style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู PWM ูุฅุฎุฑุงุฌ ุตูุช 8 ุจุช (ุฃุญูุงููุง 16 ุจุช) ุจุชูุณูู PCM ุฃู ADPCM.  ุจูุง ุฃู ุงูุฐุงูุฑุฉ ูู ูููุฑูููุชุฑููุฑ ูู ุงููุงุถุญ ุฃููุง ููุณุช ูุงููุฉ ููุฐุง ุ ูุฅููุง ุนุงุฏุฉ ูุง ุชุณุชุฎุฏู ุจุทุงูุฉ SD. </li><li style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู PWM ูุชูููุฏ ุงูุตูุช ุนูู ุฃุณุงุณ ุงูุฌุฏุงูู ููุฌุฉ ูุซู MIDI. </li></ol><br>  ุงูููุน ุงูุฃุฎูุฑ ูุงู ูุซูุฑุง ููุงูุชูุงู ุจุงููุณุจุฉ ูู ุ ูุฃูู  ุชูุฑูุจุง ูุง ูุชุทูุจ ูุนุฏุงุช ุฅุถุงููุฉ.  ุฃูุฏู ุฎูุงุฑู ูููุฌุชูุน.  ุฃููุงู ุ ุนุฑุถ ุตุบูุฑ: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=https://w.soundcloud.com/player/" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  ููุชูุฉ ุ ุฃุทูุจ ุงููุท. <br><a name="habracut"></a><br>  ูุฐูู ุ ุงููุนุฏุงุช: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ATmega8 ุฃู ATmega328.  ููุณุช ุนูููุฉ ุงูููู ุฅูู ATmega ุงูุฃุฎุฑู ุฃูุฑูุง ุตุนุจูุง.  ูุญุชู ุนูู ATtiny ุ ูููู ุงููุฒูุฏ ุนู ุฐูู ูุงุญููุง ุ </li><li style=";text-align:right;direction:rtl">  ุงูููุงููุ </li><li style=";text-align:right;direction:rtl">  ุงูููุซู. </li><li style=";text-align:right;direction:rtl">  ููุจุฑ ุงูุตูุช ุฃู ุณูุงุนุฉ ุงูุฑุฃุณ ุ </li><li style=";text-align:right;direction:rtl">  ุงูุชุบุฐูุฉุ </li></ul><br>  ูุซู ูู ุดูุก. <br><br>  ูุชู ุชูุตูู ุฏุงุฆุฑุฉ RC ุจุณูุทุฉ ูุน ููุจุฑ ุงูุตูุช ุฅูู ุงูุฅุฎุฑุงุฌ ูู ูุชุญูู.  ุงูุฅุฎุฑุงุฌ ูู ุตูุช 8 ุจุช ูุน ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูู 31250Hz.  ุนูู ุชุฑุฏุฏ ุจููุฑู ูุฏุฑู 8 ููุฌุงูุฑุชุฒ ุ ูููู ุฅูุดุงุก ูุง ูุตู ุฅูู 5 ูููุงุช ุตูุช + ููุงุฉ ุถูุถุงุก ูุงุญุฏุฉ ููุฅููุงุน.  ูู ูุฐู ุงูุญุงูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ููุช ุงููุนุงูุฌ ุชูุฑูุจูุง ุ ูููู ุจุนุฏ ููุก ุงููุฎุฒู ุงููุคูุช ุ ูููู ุดุบู ุงููุนุงูุฌ ุจุดูุก ูููุฏ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุตูุช: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/JwqY7FoxYsk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  ูุชูุงุณุจ ูุฐุง ุงููุซุงู ุชูุงููุง ูุน ุฐุงูุฑุฉ ATmega8 ุ ุญูุซ ุชุชู ูุนุงูุฌุฉ 5 ูููุงุช + ุถุฌูุฌ ุจุชุฑุฏุฏ ูุฑูุณุชุงู ูุจูุบ 8 ููุฌุงูุฑุชุฒ ุ ููุง ููุฌุฏ ููุช ูุงูู ููุฑุณูู ุงููุชุญุฑูุฉ ุนูู ุงูุดุงุดุฉ. <br><br>  ูู ูุฐุง ุงููุซุงู ุ ุฃุฑุฏุช ุฃูุถูุง ุฃู ุฃุซุจุช ุฃูู ูููู ุงุณุชุฎุฏุงู ุงูููุชุจุฉ ููุณ ููุท ูุจุทุงูุฉ ุจุฑูุฏูุฉ ููุณูููุฉ ุนุงุฏูุฉ ุ ูููู ุฃูุถูุง ูุชูุตูู ุงูุตูุช ุจุงููุดุงุฑูุน ุงูุญุงููุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุฅุนูุงูุงุช.  ูุญุชู ุนูุฏ ุงุณุชุฎุฏุงู ููุงุฉ ุตูุชูุฉ ูุงุญุฏุฉ ููุท ุ ูููู ุฃู ุชููู ุงูุฅุนูุงูุงุช ุฃูุซุฑ ุฅุซุงุฑุฉ ููุงูุชูุงู ูู ููุจุฑ ุงูุตูุช ุงูุจุณูุท. <br><br>  ูุงูุขู ุงูุชูุงุตูู ... <br><br><h2 style=";text-align:right;direction:rtl">  ููุฌุฉ ุงูุฌุฏุงูู ุฃู wavetables </h2><br>  ุงูุฑูุงุถูุงุช ุจุณูุทุฉ ููุบุงูุฉ.  ููุงู ูุธููุฉ ููุฌุฉ ุฏูุฑูุฉ ุ ุนูู ุณุจูู ุงููุซุงู <i>ููุฌุฉ (t) = sin (t * freq / (2 * Pi))</i> . <br><br>  ููุงู ุฃูุถูุง ูุธููุฉ ูุชุบููุฑ ุญุฌู ุงููุบูุฉ ุงูุฃุณุงุณูุฉ ุจูุฑูุฑ ุงูููุช ุ ุนูู ุณุจูู ุงููุซุงู <i>volume (t) = e ^ (- t)</i> . <br><br>  ูู ุฃุจุณุท ุงูุญุงูุงุช ุ ูููู ุตูุช ุงูุฃุฏุงุฉ ูู ูุงุชุฌ <i>ุฃุฏุงุฉ</i> ุงููุธุงุฆู ูุฐู <i>(t) = ุงููุบูุฉ (t) * ูุณุชูู ุงูุตูุช (t)</i> : <br><br>  ุนูู ุงูุฑุณู ุงูุจูุงูู ุ ูุจุฏู ูู ุดูุก ูุซู ูุฐุง: <br><br><img src="https://habrastorage.org/webt/pn/dp/pi/pndppihozomu4ep_fxzcho44xx8.png"><br><br>  ุจุนุฏ ุฐูู ุ ูุฃุฎุฐ ุฌููุน ุงูุฃุฏูุงุช ุงูุชู ุชุตุฏุฑ ุตูุชูุง ูู ููุช ูุนูู ูููุฎุตูุง ูุน ุจุนุถ ุนูุงูู ุงูุตูุช (ุงูููุฏ ุงูุฒุงุฆู): <br><br><pre style=";text-align:right;direction:rtl"><code class="cmake hljs">for (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; CHANNELS; i++) { value += channels[i].tone(t) * channels[i].volume(t) * channels[i].volume; }</code> </pre> <br>  ูู ุงูุถุฑูุฑู ููุท ุชุญุฏูุฏ ูุณุชูู ุงูุตูุช ุจุญูุซ ูุง ููุฌุฏ ููุถ.  ููุฐุง ูู ุดูุก ุชูุฑูุจุง. <br><br>  ุชุนูู ููุงุฉ ุงูุถูุถุงุก ุจููุณ ุงูุทุฑููุฉ ุชูุฑูุจูุง ุ ูููู ุจุฏูุงู ูู ูุธููุฉ ุงููุบูุฉ ุ ูุชู ุฅูุดุงุก ูููุฏ ุชุณูุณู ุนุดูุงุฆู ุนุดูุงุฆู. <br><br>  ุงูุฅููุงุน ูู ูุฒูุฌ ูู ููุงุฉ ุงูุถูุถุงุก ูููุฌุฉ ุงูุชุฑุฏุฏ ุงูููุฎูุถ ุ ูู ุญูุงูู 50-70 ูุฑุชุฒ. <br>  ุจุงูุทุจุน ุ ุงูุตูุช ุนุงูู ุงูุฌูุฏุฉ ุจูุฐู ุงูุทุฑููุฉ ูุตุนุจ ุชุญูููู.  ููู ูุฏููุง ููุท 8 ูููู ุจุงูุช ููู ุดูุก.  ุขูู ุฃู ูุบูุฑ ูุฐุง. <br><br><h2 style=";text-align:right;direction:rtl">  ูุงุฐุง ูููููู ุถุบุท ูู 8 ุจุช </h2><br>  ูู ุงูุจุฏุงูุฉ ุ ุฑูุฒุช ุนูู ATmega8.  ุจุฏูู ุงูููุงุฑุชุฒ ุงูุฎุงุฑุฌู ุ ูุนูู ุนูู ุชุฑุฏุฏ 8 ููุฌุงูุฑุชุฒ ููุฏูู PWM 8 ุจุช ุ ูุงูุฐู ูุนุทู ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ุงูุฃุณุงุณู ูู 8000000/256 = 31250 ูุฑุชุฒ.  ูุณุชุฎุฏู ุฌูุงุฒ ุถุจุท ุงูููุช PWM ูุฅุฎุฑุงุฌ ุงูุตูุช ุ ููุชุณุจุจ ูู ุญุฏูุซ ุงููุทุงุน ุฃุซูุงุก ุชุฌุงูุฒ ุงูุณุนุฉ ูุฅุฑุณุงู ุงููููุฉ ุงูุชุงููุฉ ุฅูู ูููุฏ PWM.  ููููุง ูุฐูู ุ ูุฏููุง 256 ุฏูุฑุฉ ุนูู ูุฏุงุฑ ุงูุณุงุนุฉ ูุญุณุงุจ ูููุฉ ุงูุนููุฉ ููู ุดูุก ุ ุจูุง ูู ุฐูู ุงููููุงุช ุงูุนุงูุฉ ุงูููุงุทุนุฉ ูุชุญุฏูุซ ูุนููุงุช ููุงุฉ ุงูุตูุช ูุชุชุจุน ุงูููุช ุงูุฐู ุชุญุชุงุฌ ููู ุฅูู ุชุดุบูู ุงูููุงุญุธุฉ ุงูุชุงููุฉ ุ ุฅูุฎ. <br><br>  ููุชุญุณูู ุ ุณูุณุชุฎุฏู ุจูุดุงุท ุงูุญูู ุงูุชุงููุฉ: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุธุฑูุง ููุฌูุฏ ูุนุงูุฌ ุฐู 8 ุจุช ุ ุณูุญุงูู ุฌุนู ุงููุชุบูุฑุงุช ููุง ูู.  ูู ุจุนุถ ุงูุฃุญูุงู ุณูู ูุณุชุฎุฏู 16 ุจุช. </li><li style=";text-align:right;direction:rtl">  ูุชู ุชูุณูู ุงูุญุณุงุจุงุช ุงููุดุฑูุทุฉ ุฅูู ูุชูุฑุฑุฉ ูููุณ ูุฐูู.  ูุฌุจ ุญุณุงุจ ุงูุนููุงุช ุงูุฃููู ููู ุนููุฉ ุ ูุงูุซุงููุฉ - ุฃูู ูุซูุฑูุง ุ ูุฑุฉ ูุงุญุฏุฉ ูู ุนุฏุฉ ุนุดุฑุงุช / ูุฆุงุช ูู ุงูุนููุงุช. </li><li style=";text-align:right;direction:rtl">  ูุชูุฒูุน ุงูุญูู ุจุงูุชุณุงูู ูุน ูุฑูุฑ ุงูููุช ุ ูุณุชุฎุฏู ูุฎุฒู ูุคูุช ุฏุงุฆุฑู.  ูู ุงูุญููุฉ ุงูุฑุฆูุณูุฉ ูู ุงูุจุฑูุงูุฌ ุ ูููุฃ ุงููุฎุฒู ุงููุคูุช ููุทุฑุญู ูู ุงูููุงุทุนุฉ.  ุฅุฐุง ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ูุณูููุฃ ุงููุฎุฒู ุงููุคูุช ุจุดูู ุฃุณุฑุน ููุง ููุฑุบ ููููู ูุฏููุง ููุช ูุดูุก ุขุฎุฑ. </li><li style=";text-align:right;direction:rtl">  ุฑูุฒ ููุชูุจ ูู C ูุน ุงููุซูุฑ ูู ุงููุถููุฉ.  ุชุฏู ุงูููุงุฑุณุฉ ุนูู ุฃููุง ุฃุณุฑุน ุจูุซูุฑ. </li><li style=";text-align:right;direction:rtl">  ูู ูุง ูููู ุญุณุงุจู ูู ูุจู ุงููุนุงูุฌ ุ ุฎุงุตุฉ ุจูุดุงุฑูุฉ ุงููุณูุฉ ุ ูุชู ุจูุงุณุทุฉ ุงููุนุงูุฌ ุงููุณุจู. </li></ul><br>  ุฃููุงู ุ ูู ุจุชูุณูู ุงูููุช ุฅูู ููุงุตู ุฒูููุฉ ุชุจูุบ 4 ูููู ุซุงููุฉ (ุฏุนูุช ุฅูููุง ุนูุงูุงุช ุงูุชุฌุฒุฆุฉ).  ุนูุฏ ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูุจูุบ 31250 ูุฑุชุฒ ุ ูุญุตู ุนูู 125 ุนููุฉ ููู ุนูุงูุฉ.  ูุฌุจ ุฃู ุชุญุณุจ ุญูููุฉ ุฃู ูู ุนููุฉ ูุฌุจ ุฃู ุชูุฑุฃ ูู ุนููุฉ ุ ูุงูุจุงูู - ูุฑุฉ ูุงุญุฏุฉ ููู ุนูุงูุฉ ุฃู ุฃูู.  ุนูู ุณุจูู ุงููุซุงู ุ ูู ุบุถูู ุนูุงูุฉ ูุงุญุฏุฉ ุ ุณูููู ุญุฌู ุงูุฃุฏุงุฉ ุซุงุจุชูุง: <i>ุงูุฃุฏุงุฉ (t) = ุงููุบูุฉ (t) * currentVolume</i> ุ  ุณูุชู ุฅุนุงุฏุฉ ุญุณุงุจ ุงูุชูุงุฑ ููุญุชููุงุชู ูุฑุฉ ูุงุญุฏุฉ ููู ุนูุงูุฉ ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ูุณุชูู ุงูุตูุช (ุฑ) ููุณุชูู ุงูุตูุช ุงููุญุฏุฏ ูููุงุฉ ุงูุตูุช. <br><br>  ุชู ุงุฎุชูุงุฑ ูุฏุฉ ุนูุงูุฉ ุชุจูุบ 4 ูููู ุซุงููุฉ ุงุณุชูุงุฏูุง ุฅูู ุญุฏ ุจุณูุท ูุจูุบ 8 ุจุช: ูุน ุนุฏุงุฏ ุนููุฉ ูู 8 ุจุช ุ ููููู ุงูุนูู ุจุชุฑุฏุฏ ุฃุฎุฐ ุนููุงุช ูุตู ุฅูู 64 ูููู ูุฑุชุฒ ุ ูุน ุนุฏุงุฏ ุนูุงูุงุช ุจุซูุงููุฉ ุจุช ูููููุง ููุงุณ ุงูููุช ุญุชู ุซุงููุฉ ูุงุญุฏุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุจุนุถ ุงูููุฏ </h2><br>  ุงูููุงุฉ ููุณูุง ููุตููุฉ ุจูุงุณุทุฉ ูุฐุง ุงููููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">typedef struct { // Info about wave const int8_t* waveForm; // Wave table array uint16_t waveSample; // High byte is an index in waveForm array uint16_t waveStep; // Frequency, how waveSample is changed in time // Info about volume envelope const uint8_t* volumeForm; // Array of volume change in time uint8_t volumeFormLength; // Length of volumeForm uint8_t volumeTicksPerSample; // How many ticks should pass before index of volumeForm is changed uint8_t volumeTicksCounter; // Counter for volumeTicksPerSample // Info about volume uint8_t currentVolume; // Precalculated volume for current tick uint8_t instrumentVolume; // Volume of channel } waveChannel;</code> </pre> <br>  ุจุดุฑูุท ุ ูุชู ุชูุณูู ุงูุจูุงูุงุช ููุง ุฅูู 3 ุฃุฌุฒุงุก: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุนูููุงุช ุญูู ุงูููุฌู ุ ุงููุฑุญูุฉ ุ ุงูุชุฑุฏุฏ. <br><br>  waveForm: ูุนูููุงุช ุญูู ูุธููุฉ ุงููุบูุฉ (t): ุฅุดุงุฑุฉ ุฅูู ุตููู ูุจูุบ ุทููู 256 ุจุงูุช.  ุถุจุท ุงููุบูุฉ ุ ุตูุช ุงูุฌูุงุฒ. <br><br>  waveSample: ุงูุจุงูุช ุงูุนุงูู ูุดูุฑ ุฅูู ุงูููุฑุณ ุงูุญุงูู ูุตููู waveForm. <br><br>  waveStep: ูุญุฏุฏ ุงูุชุฑุฏุฏ ุงูุฐู ุณูุชู ุจู ุฒูุงุฏุฉ waveSample ุนูุฏ ุญุณุงุจ ุงูุนููุฉ ุงูุชุงููุฉ. <br><br>  ูู ุนููุฉ ุชุนุชุจุฑ ุดูุฆุง ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">int8_t tone = channelData.waveForm[channelData.waveSample &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>]; channelData.waveSample += channelaData.waveStep; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> tone * channelData.currentVolume;</code> </pre> <br></li><li style=";text-align:right;direction:rtl">  ุญุฌู ุงููุนูููุงุช.  ูุถุจุท ูุธููุฉ ุชุบููุฑ ุงูุญุฌู ุจูุฑูุฑ ุงูููุช.  ูุธุฑูุง ูุฃู ูุณุชูู ุงูุตูุช ูุง ูุชุบูุฑ ูุซูุฑูุง ุ ูููููู ุฅุนุงุฏุฉ ูุฑุฒ ุงูุฃุตูุงุช ุฃูู ูุฑุฉ ูุงุญุฏุฉ ููู ุนูุงูุฉ.  ูุชู ุฐูู ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((channel-&gt;volumeTicksCounter--) == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; channel-&gt;volumeFormLength &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { channel-&gt;volumeTicksCounter = channel-&gt;volumeTicksPerSample; channel-&gt;volumeFormLength--; channel-&gt;volumeForm++; } channel-&gt;currentVolume = channel-&gt;volumeForm * channel-&gt;instrumentVolume &gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>;</code> </pre> <br></li><li style=";text-align:right;direction:rtl">  ูุถุจุท ุญุฌู ุงูููุงุฉ ูุงูุญุฌู ุงูุญุงูู ุงููุญุณูุจ. <br></li></ol><br>  ูุฑุฌู ููุงุญุธุฉ: ุงูุทูู ุงูููุฌู ูู 8 ุจุช ุ ูุญุฌู ูู ุฃูุถุง 8 ุจุช ุ ูุงููุชูุฌุฉ ูู 16 ุจุช.  ูุน ููุฏุงู ุทููู ูู ุงูุฃุฏุงุก ุ ููููู ุฌุนู ุงูุตูุช (ุชูุฑูุจูุง) 16 ุจุช. <br><br>  ูู ุงูุตุฑุงุน ูู ุฃุฌู ุงูุฅูุชุงุฌูุฉ ุ ุงุถุทุฑุฑุช ุฅูู ุงููุฌูุก ุฅูู ุจุนุถ ุงูุณุญุฑ ุงูุฃุณูุฏ. <br><br>  ูุซุงู ุฑูู 1. ููููุฉ ุฅุนุงุฏุฉ ุญุณุงุจ ุญุฌู ุงููููุงุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((tickSampleCounter--) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { //    tickSampleCounter = SAMPLES_PER_TICK โ <span class="hljs-number"><span class="hljs-number">1</span></span>; //   - } // volume recalculation should no be done so often for all channels <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (tickSampleCounter &lt; CHANNELS_SIZE) { recalculateVolume(channels[tickSampleCounter]); }</code> </pre> <br>  ูุจุงูุชุงูู ุ ุชุญุณุจ ุฌููุน ุงููููุงุช ูุณุชูู ุงูุตูุช ูุฑุฉ ูุงุญุฏุฉ ููู ุนูุงูุฉ ุ ูููู ููุณ ูู ููุณ ุงูููุช. <br><br>  ูุซุงู ุฑูู 2. ุงูุญูุงุธ ุนูู ูุนูููุงุช ุงูููุงุฉ ูู ุจููุฉ ุซุงุจุชุฉ ุฃุฑุฎุต ูู ุงูุตููู.  ุฏูู ุงูุฎูุถ ูู ุชูุงุตูู ุชูููุฐ wavechannel.h ุ ุณุฃููู ุฃู ูุฐุง ุงูููู ุชู ุฅุฏุฑุงุฌู ูู ุงูููุฏ ุนุฏุฉ ูุฑุงุช (ูุณุงู ูุนุฏุฏ ุงููููุงุช) ุจุชูุฌููุงุช ูุฎุชููุฉ ูุจู ุงููุนุงูุฌ.  ููุดุฆ ูู ุฅุฏุฑุงุฌ ูุชุบูุฑุงุช ุนููููุฉ ุฌุฏูุฏุฉ ููุธููุฉ ุญุณุงุจ ููุงุฉ ุฌุฏูุฏุฉ ุ ูุงูุชู ูุชู ุชุถููููุง ุจุนุฏ ุฐูู ูู ุงูููุฏ ุงูุฑุฆูุณู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#if CHANNELS_SIZE &gt;= 1 val += channel0NextSample(); #endif #if CHANNELS_SIZE &gt;= 2 val += channel1NextSample(); #endif โฆ</span></span></code> </pre><br>  ูุซุงู ุฑูู 3. ุฅุฐุง ุจุฏุฃูุง ุชุดุบูู ุงูููุงุญุธุฉ ุงูุชุงููุฉ ูู ููุช ูุงุญู ุ ููู ููุงุญุธูุง ุฃุญุฏ.  ุฏุนููุง ูุชุฎูู ุงููููู: ุชูุงูููุง ุงููุนุงูุฌ ุจุดูุก ุ ูุฎูุงู ูุฐุง ุงูููุช ูุงู ุงููุฎุฒู ุงููุคูุช ูุงุฑุบูุง ุชูุฑูุจูุง.  ุซู ูุจุฏุฃ ูู ุชุนุจุฆุชู ููุฌุฃุฉ ุงุชุถุญ ุฃู ููุงู ุฅุฌุฑุงุกู ุฌุฏูุฏูุง ูุงุฏููุง: ูุญุชุงุฌ ุฅูู ุชุญุฏูุซ ุงูููุงุญุธุงุช ุงูุญุงููุฉ ุ ูุงููุฑุงุกุฉ ูู ุงูุตููู ุงูุชุงูู ุ ุฅูุฎ.  ุฅุฐุง ูู ููู ูุฏููุง ููุช ุ ูุณูููู ููุงู ุชูุนุซู ูููุฒ.  ูู ุงูุฃูุถู ุจูุซูุฑ ููุก ุงููุฎุฒู ุงููุคูุช ุจุงูุจูุงูุงุช ุงููุฏููุฉ ุ ูุจุนุฏ ุฐูู ููุท ูุชู ุชุญุฏูุซ ุญุงูุฉ ุงููููุงุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((samplesToWrite) &gt; <span class="hljs-number"><span class="hljs-number">4</span></span>) { //          fillBuffer(SAMPLES_PER_TICK); //     -  updateMusicData(); //    }</code> </pre> <br>  ุจุทุฑููุฉ ุฌูุฏุฉ ุ ุณูููู ูู ุงูุถุฑูุฑู ุฅุนุงุฏุฉ ููุก ุงููุฎุฒู ุงููุคูุช ุจุนุฏ ุงูุญููุฉ ุ ูููู ูุธุฑูุง ูุฃู ูุฏููุง ูู ุดูุก ูุถููู ุชูุฑูุจูุง ุ ูุฅู ุญุฌู ุงูููุฏ ูุถุฎู ุจุดูู ููุญูุธ. <br><br><h2 style=";text-align:right;direction:rtl">  ููุณููู </h2><br>  ูุชู ุงุณุชุฎุฏุงู ุนุฏุงุฏ ุงูุชุฌุฒุฆุฉ ุซูุงููุฉ ุจุช.  ุนูุฏูุง ูุชู ุงููุตูู ุฅูู ุงูุตูุฑ ุ ูุจุฏุฃ ููุงุณ ุฌุฏูุฏ ุ ูุชู ุชุนููู ุงูุนุฏุงุฏ ูุฏุฉ ุงูููุงุณ (ุจุงูุนูุงูุงุช) ุ ูุจุนุฏ ุฐูู ุจูููู ูุชู ุงูุชุญูู ูู ูุฌููุนุฉ ุงูุฃูุงูุฑ ุงูููุณูููุฉ. <br><br>  ูุชู ุชุฎุฒูู ุจูุงูุงุช ุงูููุณููู ูู ูุฌููุนุฉ ูู ูุญุฏุงุช ุงูุจุงูุช.  ูู ููุชูุจ ุดูุก ูุซู ูุฐุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs">const uint8_t demoSample[] PROGMEM = { DATA_TEMPO(<span class="hljs-number"><span class="hljs-number">160</span></span>), // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> beats per minute DATA_INSTRUMENT(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), // Assign instrument <span class="hljs-number"><span class="hljs-number">1</span></span> (see setSample) to channel <span class="hljs-number"><span class="hljs-number">0</span></span> DATA_INSTRUMENT(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>), // Assign instrument <span class="hljs-number"><span class="hljs-number">1</span></span> (see setSample) to channel <span class="hljs-number"><span class="hljs-number">1</span></span> DATA_VOLUME(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>), // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> volume <span class="hljs-number"><span class="hljs-number">128</span></span> to channel <span class="hljs-number"><span class="hljs-number">0</span></span> DATA_VOLUME(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">128</span></span>), // <span class="hljs-keyword"><span class="hljs-keyword">Set</span></span> volume <span class="hljs-number"><span class="hljs-number">128</span></span> to channel <span class="hljs-number"><span class="hljs-number">1</span></span> DATA_PLAY(<span class="hljs-number"><span class="hljs-number">0</span></span>, NOTE_A4, <span class="hljs-number"><span class="hljs-number">1</span></span>), // Play note A4 <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> channel <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> wait <span class="hljs-number"><span class="hljs-number">1</span></span> beat DATA_PLAY(<span class="hljs-number"><span class="hljs-number">1</span></span>, NOTE_A3, <span class="hljs-number"><span class="hljs-number">1</span></span>), // Play note A3 <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> channel <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> wait <span class="hljs-number"><span class="hljs-number">1</span></span> beat DATA_WAIT(<span class="hljs-number"><span class="hljs-number">63</span></span>), // Wait <span class="hljs-number"><span class="hljs-number">63</span></span> beats DATA_END() // End of data stream };</code> </pre> <br>  ูู ูุง ูุจุฏุฃ ุจู DATA_ ูู ูุญุฏุงุช ูุง ูุจู ุงููุนุงูุฌุฉ ุงูุชู ุชุนูู ุนูู ุชูุณูุน ุงููุนููุงุช ุฅูู ุงูุนุฏุฏ ุงููุทููุจ ูู ูุญุฏุงุช ุจุงูุช ุงูุจูุงูุงุช. <br><br>  ุนูู ุณุจูู ุงููุซุงู ุ ูุชู ุชูุณูุน ุฃูุฑ DATA_PLAY ุฅูู ูุญุฏุชู ุจุงูุช ูุชู ุชุฎุฒููููุง: ุนูุงูุฉ ุงูุฃูุฑ (1 ุจุช) ุ ูุงูุฅููุงู ุงููุคูุช ูุจู ุงูุฃูุฑ ุงูุชุงูู (3 ุจุช) ุ ูุฑูู ุงูููุงุฉ ุงูุฐู ุณูุชู ุชุดุบูู ุงูููุงุญุธุฉ ุนููู (4 ุจุชุงุช) ุ ููุนูููุงุช ุญูู ุงูููุงุญุธุฉ (8 ุจุชุงุช).  ุงูููุฏ ุงูุฃูุซุฑ ุฃูููุฉ ูู ุฃูู ูุง ูููู ุงุณุชุฎุฏุงู ูุฐุง ุงูุฃูุฑ ููุฅููุงู ุงููุคูุช ุงูุทููู ุ ุจุญุฏ ุฃูุตู 7 ุฏูุฑุงุช.  ุฅุฐุง ููุช ุจุญุงุฌุฉ ุฅูู ุงููุฒูุฏ ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ุงูุฃูุฑ DATA_WAIT (ุญุชู 63 ููุงุณูุง).  ูุณูุก ุงูุญุธ ุ ูู ุฃุฌุฏ ูุง ุฅุฐุง ูุงู ูููู ุชูุณูุน ุงููุงูุฑู ุฅูู ุนุฏุฏ ูุฎุชูู ูู ูุญุฏุงุช ุงูุจุงูุช ููุตููู ููููุง ููุนููุฉ ุงููุงูุฑู.  ูุญุชู ุชุญุฐูุฑ ุฃูุง ูุง ุฃุนุฑู ููููุฉ ุนุฑุถ.  ุฑุจูุง ุชููู ูู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชุฎุฏุงู </h2><br>  ููุฌุฏ ูู ุงูุฏููู ุงูุชูุถูุญู ุงูุนุฏูุฏ ูู ุงูุฃูุซูุฉ ุนูู ูููุฑูููุชุฑููุฑ ูุฎุชููุฉ.  ูููู ุจุงุฎุชุตุงุฑ ุ ุฅููู ูุทุนุฉ ูู ุงูููู ุงูุชูููุฏู ุ ููุณ ูุฏู ุดูุก ุฃุถููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cmake hljs"><span class="hljs-comment"><span class="hljs-comment">#include "../../microsound/devices/atmega8timer1.h" #include "../../microsound/micromusic.h" // Make some settings #define CHANNELS_SIZE 5 #define SAMPLES_SIZE 16 #define USE_NOISE_CHANNEL initMusic(); // Init music data and sound control sei(); // Enable interrupts, silence sound should be generated setSample(0, instrument1); // Use instrument1 as sample 0 setSample(1, instrument2); // Init all other instrumentsโฆ playMusic(mySong); // Start playing music at pointer mySong while (!isMusicStopped) { fillMusicBuffer(); // Fill music buffer in loop // Do some other stuff }</span></span></code> </pre> <br>  ุฅุฐุง ููุช ุชุฑูุฏ ุงูููุงู ุจุดูุก ุขุฎุฑ ุฅูู ุฌุงูุจ ุงูููุณููู ุ ูููููู ุฒูุงุฏุฉ ุญุฌู ุงููุฎุฒู ุงููุคูุช ุจุงุณุชุฎุฏุงู BUFFER_SIZE.  ูุฌุจ ุฃู ูููู ุญุฌู ุงููุฎุฒู ุงููุคูุช 2 ^ n ุ ูููู ูุน ุงูุฃุณู ุ ุจุญุฌู 256 ุ ูุญุฏุซ ุชุฏููุฑ ุงูุฃุฏุงุก.  ุญุชู ุฃุญุณุจ ุจูุง. <br><br>  ูุฒูุงุฏุฉ ุงูุฅูุชุงุฌูุฉ ุ ููููู ุฒูุงุฏุฉ ุงูุชุฑุฏุฏ ูุน ุงูููุงุฑุชุฒ ุงูุฎุงุฑุฌู ุ ููููู ุชูููู ุนุฏุฏ ุงููููุงุช ุ ููููู ุชูููู ูุชูุฑุฉ ุฃุฎุฐ ุงูุนููุงุช.  ูุน ุงูุฎุฏุนุฉ ุงูุฃุฎูุฑุฉ ุ ููููู ุงุณุชุฎุฏุงู ุงูุงุณุชููุงุก ุงูุฎุทู ุ ูุงูุฐู ูุนูุถ ุฅูู ุญุฏ ูุง ุนู ุงูุฎูุงุถ ุฌูุฏุฉ ุงูุตูุช. <br><br>  ุฃู ุชุฃุฎูุฑ ูุง ููุตุญ ุ ู  ูุถูุน ุงูููุช ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ.  ุจุฏูุงู ูู ุฐูู ุ ูุชู ุชุทุจูู ุงูุฃุณููุจ ุงูุฎุงุต ุจู ูู <i>ููู microsound / delay.h</i> ุ ูุงูุฐู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฅููุงู ุงููุคูุช ููุณู ุ ูุดุงุฑู ูู ููุก ุงููุฎุฒู ุงููุคูุช.  ูุฏ ูุง ุชุนูู ูุฐู ุงูุทุฑููุฉ ุจุฏูุฉ ุดุฏูุฏุฉ ุนูู ูุชุฑุงุช ุชููู ูุตูุฑุฉ ุ ูููู ูู ูุชุฑุงุช ุชููู ุทูููุฉ ุฃูุซุฑ ุฃู ุฃูู ุนููุงููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุตูุน ุงูููุณููู ุงูุฎุงุตุฉ ุจู </h2><br>  ุฅุฐุง ูุชุจุช ุงูุฃูุงูุฑ ูุฏูููุง ุ ูุฃูุช ุจุญุงุฌุฉ ุฅูู ุงูุงุณุชูุงุน ุฅูู ูุง ูุญุฏุซ.  ุตุจ ูู ุชุบููุฑ ูู ูุชุญูู ููุณุช ูุฑูุญุฉ ุ ูุฎุงุตุฉ ุฅุฐุง ูุงู ููุงู ุจุฏูู. <br><br>  ููุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">wavepot.com</a> ุฎุฏูุฉ ูุถุญูุฉ ุฅูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุฏ ูุง</a> - ูุญุฑุฑ JavaScript ุนูู ุงูุฅูุชุฑูุช ุ ุญูุซ ุชุญุชุงุฌ ุฅูู ุถุจุท ูุธููุฉ ุฅุดุงุฑุฉ ุงูุตูุช ูู ููุช ูุขุฎุฑ ุ ููุชู ุฅุฎุฑุงุฌ ูุฐู ุงูุฅุดุงุฑุฉ ุฅูู ุจุทุงูุฉ ุงูุตูุช.  ุฃุจุณุท ูุซุงู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dsp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0.1</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sin(<span class="hljs-number"><span class="hljs-number">2</span></span> * <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.PI * t * <span class="hljs-number"><span class="hljs-number">440</span></span>); }</code> </pre> <br>  ููุช ุจุชุญููู ุงููุญุฑู ุฅูู JavaScript ุ ููู ููุฌูุฏ ูู <i>demos / wavepot.js</i> .  ูุฌุจ ุฅุฏุฑุงุฌ ูุญุชููุงุช ุงูููู ูู ุงููุญุฑุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">wavepot.com</a> ูููููู ุฅุฌุฑุงุก ุชุฌุงุฑุจ.  ููุชุจ ุจูุงูุงุชูุง ุฅูู ูุฌููุนุฉ soundData ุ ูุงูุงุณุชูุงุน ุ ูุง ุชูุณู ุฃู ุญูุธ. <br><br>  ูุฌุจ ุฃู ูุฐูุฑ ุฃูุถูุง ูุชุบูุฑ simulate8bits.  ูู ุ ููููุง ููุงุณู ุ ุชุญุงูู ุตูุชูุง ูู ุซูุงููุฉ ุจุชุงุช.  ุฅุฐุง ุจุฏุง ูุฌุฃุฉ ุฃู ุงูุทุจูู ุชุณูุน ุตูุชูุง ูุถูุถุงุก ูู ุงูุฃุฌูุฒุฉ ุงููุจููุฉ ุจุตูุช ูุงุฏุฆ ุ ููุฐู ูู ุชุดููุดูุง ุตูุชู ูู 8 ุจุชุงุช.  ููููู ูุญุงููุฉ ุชุนุทูู ูุฐุง ุงูุฎูุงุฑ ูุงูุงุณุชูุงุน ุฅูู ุงููุฑู.  ุงููุดููุฉ ุฃูู ุจูุซูุฑ ุฅุฐุง ูู ููู ููุงู ุตูุช ูู ุงูููุณููู. <br><br><h2 style=";text-align:right;direction:rtl">  ุตูุฉ </h2><br>  ูู ุฅุตุฏุงุฑ ุจุณูุท ุ ุชุจุฏู ุงูุฏุงุฆุฑุฉ ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">+5V ^ MCU | +-------+ +---+VC | R1 | Pin+---/\/\--+-----&gt; OUT | | | +---+GN | === C1 | +-------+ | | | --- Grnd --- Grnd</code> </pre> <br>  ุฏุจูุณ ุงูุฅุฎุฑุงุฌ ูุนุชูุฏ ุนูู ูุชุญูู.  ูุฌุจ ุงุฎุชูุงุฑ ุงูููุงูู R1 ูุงูููุซู C1 ุนูู ุฃุณุงุณ ุงูุญูู ุ ููุจุฑ ููุตูุช (ุฅู ูุฌุฏ) ุ ุฅูุฎ.  ุฃูุง ูุณุช ูููุฏุณูุง ุฅููุชุฑููููุง ููู ุฃุนุทู ุงูุตูุบ ุ ููู ุณููุฉ ุงูุงุณุชุฎุฏุงู ุฅูู ุฌุงูุจ ุงูุขูุงุช ุงูุญุงุณุจุฉ ุนุจุฑ ุงูุฅูุชุฑูุช. <br><br>  ูุฏู R1 = 130 ุฃูู ุ C1 = 0.33 ุงูุฌุจูุฉ ุงููุชุญุฏุฉ.  ุฅูู ุงูุฅุฎุฑุงุฌ ุฃููู ุจุชูุตูู ุณูุงุนุงุช ุงูุตูููุฉ ุงูุนุงุฏูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุง ูุงู ููุงู ุญูุงูู 16 ุจุช ุงูุตูุชุ </h2><br>  ููุง ููุช ุฃุนูุงู ุ ุนูุฏูุง ูุถุฑุจ ุฑูููู ูู ุซูุงููุฉ ุจุชุงุช (ุงูุชุฑุฏุฏ ูุงูุญุฌู) ุ ูุญุตู ุนูู ุฑูู 16 ุจุช.  ูุง ููููู ุชูุฑูุจู ุฅูู ุซูุงููุฉ ุจุชุงุช ุ ููู ููููู ุฅุฎุฑุงุฌ ุงูุจุงูุชุงุช ูู ููุงุชูู PWM.  ุฅุฐุง ููุช ุจุฎูุท ูุงุชูู ุงูููุงุชูู ุจูุณุจุฉ 1/256 ุ ููููููุง ุงูุญุตูู ุนูู ุตูุช 16 ุจุช.  ูู ุงูุณูู ุนูู ูุฌู ุงูุฎุตูุต ุงููุฑู ูุน ุงูุซูุงููุฉ ุจุช ุณูุงุน ุงูุฃุตูุงุช ูุงูุจุฑุงููู ุงูุชู ุชุชูุงุดู ุจุณูุงุณุฉ ูู ูุญุธุงุช ุนูุฏูุง ุชุตุฏุฑ ุฃุฏุงุฉ ูุงุญุฏุฉ ููุท. <br><br>  ุงุชุตุงู ุงูุฅุฎุฑุงุฌ 16 ุจุช: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">+5V ^ MCU | +-------+ +---+VCC | R1 | PinH+---/\/\--+-----&gt; OUT | | | | | R2 | | PinL+---/\/\--+ +---+GND | | | +-------+ === C1 | | --- Grnd --- Grnd</code> </pre> <br>  ูู ุงูููู ุฎูุท ุงูููุงุชุฌ 2 ุจุดูู ุตุญูุญ: ูุฌุจ ุฃู ุชููู ููุงููุฉ R2 ุฃูุจุฑ ุจููุฏุงุฑ 256 ูุฑุฉ ูู ููุงููุฉ R1.  ุฃูุซุฑ ุฏูุฉ ุ ูุงู ุฐูู ุฃูุถู.  ูุณูุก ุงูุญุธ ุ ุญุชู ุงูููุงููุงุช ุฐุงุช ุงูุฎุทุฃ 1ูช ูุง ุชุนุทู ุงูุฏูุฉ ุงููุทููุจุฉ.  ููุน ุฐูู ุ ุญุชู ูุน ูุฌูุฏ ูุฌููุนุฉ ุบูุฑ ุฏูููุฉ ููุบุงูุฉ ูู ุงูููุงููุงุช ุ ูููู ุชุฎููู ุงูุชุดูู ุจุดูู ููุญูุธ. <br><br>  ูุณูุก ุงูุญุธ ุ ุนูุฏ ุงุณุชุฎุฏุงู ุงูุตูุช 16 ุจุช ุ ูุฅู ุงูุฃุฏุงุก ุงููุชุฏูู ู 5 ูููุงุช + ุถูุถุงุก ูู ูุนุฏ ูุฏููู ููุช ูููุนุงูุฌุฉ ูู ุฏูุฑุงุช ุงูุณุงุนุฉ ุงููุฎุตุตุฉ 256. <br><br><h2 style=";text-align:right;direction:rtl">  ูู ูู ุงููููู ุนูู ุงุฑุฏููููุ </h2><br>  ูุนู ููููู ุฐูู.  ููุณ ูุฏู ุณูู ุงุณุชูุณุงุฎ ูุงูู ุตููู ุนูู ATmega328p ุ ุฅูู ูุนูู ุนููู.  ุนูู ุงูุฃุฑุฌุญ ุ ูุฌุจ ุฃู ุชุนูู arduins ุงูุฃุฎุฑู ุนูู ATmega328p ุฃูุถูุง.  ูุจุฏู ุฃู ATmega168 ูุฏูู ููุณ ุณุฌูุงุช ุงูุชุญูู ุงููุคูุช.  ุนูู ุงูุฃุฑุฌุญ ุฃููุง ุณุชุนูู ุฏูู ุชุบููุฑ.  ุนูู ูููุฑูููุชุฑููุฑ ุฃุฎุฑู ุชุญุชุงุฌ ุฅูู ุงูุชุญูู ุ ูุฏ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ุจุฑูุงูุฌ ุชุดุบูู. <br><br>  ููุฌุฏ ุฑุณู ุชุฎุทูุทู ูู <i>demos / arduino328p</i> ุ ูููู ุญุชู ูุชู ูุชุญู ุจุดูู ุทุจูุนู ูู <i>IDdu</i> Arduino ุ ุชุญุชุงุฌ ุฅูู ูุณุฎู ุฅูู ุฌุฐุฑ ุงููุดุฑูุน. <br><br>  ูู ุงููุซุงู ุ ูุชู ุฅูุดุงุก ุตูุช 16 ุจุช ููุชู ุงุณุชุฎุฏุงู ุงููุฎุฑุฌุงุช D9 ู D10.  ูุชุจุณูุท ุ ููููู ูุตุฑ ููุณู ุนูู ุตูุช 8 ุจุช ูุงุณุชุฎุฏุงู ุฅุฎุฑุงุฌ D9 ูุงุญุฏ ููุท. <br><br>  ูุธุฑูุง ูุฃู ุฌููุน arduins ุชุนูู ุจุณุฑุนุฉ 16 ููุบุงูุฑุชุฒ ุ ุฅุฐู ุ ุฅุฐุง ุฑุบุจุช ูู ุฐูู ุ ููููู ุฒูุงุฏุฉ ุนุฏุฏ ุงููููุงุช ุฅูู 8. <br><br><h2 style=";text-align:right;direction:rtl">  ูุงุฐุง ุนู ATtinyุ </h2><br>  ATtiny ูุง ููุฌุฏ ูุฏูู ุงูุถุฑุจ ุงูุฃุฌูุฒุฉ.  ูุนุฏ ุชุนุฏุฏ ุงูุจุฑุงูุฌ ุงูุฐู ูุณุชุฎุฏูู ุงููุชุฑุฌู ุจุทูุฆูุง ุจุดูู ูุจูุฑ ููุชู ุชุฌูุจู ุนูู ุฃูุถู ูุฌู.  ุนูุฏ ุงุณุชุฎุฏุงู ุฃุฏุงุฉ ุฅุฏุฑุงุฌ ูุฌููุน ูุญุณููุฉ ุ ููุฎูุถ โโุงูุฃุฏุงุก ุจูุนุฏู ูุฑุชูู ููุงุฑูุฉู ุจู ATmega.  ูุจุฏู ุฃูู ูุง ูุงุฆุฏุฉ ูู ุงุณุชุฎุฏุงู ATtiny ุนูู ุงูุฅุทูุงู ุ ูููู ... <br><br>  ุจุนุถ ATtiny ูุฏููุง ูุถุงุนู ุงูุชุฑุฏุฏ ุ PLL.  ููุฐุง ูุนูู ุฃูู ูู ูุซู ูุฐู ุงููููุฑููููุชุฑููุฑ ุ ููุงู ููุฒุชุงู ูุซูุฑุชุงู ููุงูุชูุงู: <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุฑุฏุฏ ูููุฏ PWM ูู 64 ููุฌุง ูุฑุชุฒ ุ ููุง ูุนุทู ูุชุฑุฉ PWM ูู 250 ูููู ูุฑุชุฒ ุ ููู ุฃูุถู ุจูุซูุฑ ูู 31250 ูุฑุชุฒ ูู 8 ููุฌุง ูุฑุชุฒ ุฃู 62500 ูุฑุชุฒ ูุน ุงูููุงุฑุชุฒ ูู 16 ููุบุงููุฑุชุฒ ุนูู ุฃู ATmega. </li><li style=";text-align:right;direction:rtl">  ูุณูุญ ูุถุงุนู ุงูุชุฑุฏุฏ ููุณู ููุจููุฑ ุจุงูุณุงุนุฉ ุนูุฏ 16 ููุฌุงููุฑุชุฒ ุจุฏูู ููุงุฑุชุฒ. </li></ol><br>  ููู ููุง ุงูุงุณุชูุชุงุฌ: ุจุนุถ ATtiny ูููู ุงุณุชุฎุฏุงููุง ูุชูููุฏ ุงูุตูุช.  ุชููููุง ูู ูุนุงูุฌุฉ ููุณ 5 ุฃุฏูุงุช + ููุงุฉ ุงูุถูุถุงุก ุ ูููู ูู 16 ููุบุงููุฑุชุฒ ูุฃููุง ูุง ุชุญุชุงุฌ ุงูููุงุฑุชุฒ ุงูุฎุงุฑุฌู. <br><br>  ุงูุฌุงูุจ ุงูุณูุจู ูู ุฃูู ูุง ูููู ุฒูุงุฏุฉ ุงูุชุฑุฏุฏ ุจุนุฏ ุงูุขู ุ ูุฃู ุงูุญุณุงุจุงุช ุชุณุชุบุฑู ุชูุฑูุจูุง ูู ุงูููุช.  ูุชุญุฑูุฑ ุงูููุงุฑุฏ ุ ููููู ุชูููู ุนุฏุฏ ุงููููุงุช ุฃู ูุนุฏู ุงูุนููุฉ. <br><br>  ุขุฎุฑ ูุงูุต ูู ุงูุญุงุฌุฉ ุฅูู ุงุณุชุฎุฏุงู ูุคูุชูู ูู ููุช ูุงุญุฏ: ูุงุญุฏ ู PWM ุ ูุงูุซุงูู ููููุงุทุนุฉ.  ูุฐุง ูู ุงูููุงู ุงูุฐู ููุชูู ุนุงุฏุฉ ุงููููุชุงุช. <br><br>  ูู ูููุฑูููุชุฑููุฑ PLL ุงูุชู ุฃุนุฑููุง ุ ูููููู ุฃู ุฃุฐูุฑ ATtiny85 / 45/25 (8 ุฃุฑุฌู) ุ ATtiny861 / 461/261 (20 ุฃุฑุฌู) ุ ATtiny26 (20 ุฃุฑุฌู). <br><br>  ุจุงููุณุจุฉ ููุฐุงูุฑุฉ ุ ูุฅู ุงููุฑู ูุน ATmega ููุณ ุฑุงุฆุนูุง.  ูู 8 ูููู ุจุงูุช ุ ุณุชูุงุณุจ ุงูุนุฏูุฏ ูู ุงูุขูุงุช ูุงูุฃูุญุงู ุจุดูู ูุซุงูู.  ูู 4 ูููู ุจุงูุช ููููู ูุถุน 1-2 ุฃุฏูุงุช ู 1-2 ูุบูุงุช.  ูู ุงูุตุนุจ ูุถุน ุดูุก ูุง ูู 2 ูููู ุจุงูุช ุ ูููู ุฅุฐุง ููุช ุชุฑูุฏ ุญููุง ุ ูููููู ุฐูู.  ูู ุงูุถุฑูุฑู ุงููุตู ุจูู ุงูุทุฑู ูุชุนุทูู ุจุนุถ ุงููุธุงุฆู ูุซู ุงูุชุญูู ูู ูุณุชูู ุงูุตูุช ุนุจุฑ ุงููููุงุช ูุชูููู ุชุฑุฏุฏ ุฃุฎุฐ ุงูุนููุงุช ูุนุฏุฏ ุงููููุงุช.  ุจุดูู ุนุงู ุ ูุฃุญุฏ ุงูููุงุฉ ุ ูููู ููุงู ูุซุงู ุนููู ุนูู ATtiny26. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุดุงูู </h2><br>  ููุงู ูุดุงูู.  ูุงููุดููุฉ ุงูุฃูุจุฑ ูู ุณุฑุนุฉ ุงูุญูุณุจุฉ.  ุชูุช ูุชุงุจุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุจุงููุงูู ูู C ูุน ุฅุฏุฑุงุฌ ุงูุถุฑุจ ุตุบูุฑุฉ ุงููุฌููุน ูู ATtiny.  ูุชู ุฅุนุทุงุก ุงูุฃูุซู ูููุชุฑุฌู ููุชุตุฑู ูู ุจุนุถ ุงูุฃุญูุงู ุจุดูู ุบุฑูุจ.  ูุน ุงูุชุบููุฑุงุช ุงูุตุบูุฑุฉ ุงูุชู ูุง ูุฌุจ ุฃู ุชุคุซุฑ ุนูู ุฃู ุดูุก ุ ููููู ุงูุญุตูู ุนูู ุงูุฎูุงุถ ููุญูุธ ูู ุงูุฃุฏุงุก.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฅู ุงูุชุบููุฑ ูู -Os ุฅูู -O3 ูุง ูุณุงุนุฏ ุฏุงุฆููุง.  ูุซุงู ูุงุญุฏ ูู ุงุณุชุฎุฏุงู ูุฎุฒู ูุคูุช 256 ุจุงูุช.  ูู ุงูุฃููุฑ ุบูุฑ ุงูุณุงุฑุฉ ุจุดูู ุฎุงุต ุนุฏู ูุฌูุฏ ุถูุงู ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฌุฏูุฏุฉ ูู ุงููุญูู ุงูุจุฑูุฌู ุฃููุง ูู ูุญุตู ุนูู ุงูุฎูุงุถ ูู ุงูุฃุฏุงุก ุนูู ููุณ ุงูููุฏ. <br><br>  ูุดููุฉ ุฃุฎุฑู ูู ุฃู ุขููุฉ ุงูุชุฎููู ูุจู ุงูููุงุญุธุฉ ุงูุชุงููุฉ ูู ูุชู ุชูููุฐูุง ุนูู ุงูุฅุทูุงู.  ุฃู  ุนูุฏูุง ูุชู ุงุณุชุจุฏุงู ููุงุญุธุฉ ูุงุญุฏุฉ ุนูู ููุงุฉ ูุงุญุฏุฉ ุจุขุฎุฑ ุ ูุชู ููุงุทุนุฉ ุงูุตูุช ุงููุฏูู ุจุดูู ููุงุฌุฆ ุ ูุฃุญูุงููุง ูุชู ุณูุงุน ููุฑุฉ ุตุบูุฑุฉ.  ุฃุฑุบุจ ูู ุฅูุฌุงุฏ ุทุฑููุฉ ููุชุฎูุต ูู ูุฐุง ุฏูู ุฃู ุชููุฏ ุงูุฃุฏุงุก ุ ููู ุญุชู ุงูุขู. <br><br>  ูุง ุชูุฌุฏ ุฃูุงูุฑ ูุฒูุงุฏุฉ / ุฎูุถ ุญุฌู ุจุณูุงุณุฉ.  ูุนุฏ ูุฐุง ุงูุฃูุฑ ุถุฑูุฑููุง ุจุดูู ุฎุงุต ููุบูุงุช ุฑููู ุงูุฅุฎุทุงุฑ ุงููุตูุฑุฉ ุ ุญูุซ ุชุญุชุงุฌ ูู ุงูููุงูุฉ ุฅูู ุงูุชุฎููู ุงูุณุฑูุน ูู ูุณุชูู ุงูุตูุช ุจุญูุซ ูุง ูููู ููุงู ุงููุทุงุน ุญุงุฏ ูู ุงูุตูุช.  ุฌุฒุก ูู ุงููุดููุฉ ูู ูุชุงุจุฉ ุณูุณูุฉ ูู ุงูุฃูุงูุฑ ูุน ุถุจุท ูุณุชูู ุงูุตูุช ูุฅููุงู ูุคูุช ูุฏูููุง. <br><br>  ุงูููุฌ ุงููุฎุชุงุฑ ุ ูู ุญูุซ ุงููุจุฏุฃ ุ ุบูุฑ ูุงุฏุฑ ุนูู ุชูููุฑ ุตูุช ุทุจูุนู ููุฃุฏูุงุช.  ููุญุตูู ุนูู ุตูุช ุฃูุซุฑ ุทุจูุนูุฉ ุ ุชุญุชุงุฌ ุฅูู ุชูุณูู ุฃุตูุงุช ุงูุฃุฏูุงุช ุฅูู ุฅุทูุงู ููุงุนุชุฏุงุก ุ ูุงุณุชุฎุฏุงู ุงูุฌุฒุกูู ุงูุฃูููู ุนูู ุงูุฃูู ูุน ูุฏุฉ ุฃุทูู ุจูุซูุฑ ูู ูุชุฑุฉ ุงูุชุฐุจุฐุจ.  ูููู ุจุนุฏ ุฐูู ุณุชุญุชุงุฌ ุจูุงูุงุช ุงูุฃุฏุงุฉ ุฅูู ุงููุฒูุฏ.  ูุงูุช ููุงู ููุฑุฉ ูุงุณุชุฎุฏุงู ุฌุฏุงูู ููุฌุงุช ุฃูุตุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู 32 ุจุงูุช ุจุฏูุงู ูู 256 ุ ูููู ุจุฏูู ุงูุงุณุชููุงุก ุ ุชูุฎูุถ ุฌูุฏุฉ ุงูุตูุช ุจุดูู ูุจูุฑ ุ ููุน ุงูุฎูุงุถ ุงูุงุณุชููุงุก ุ ููุฎูุถ โโุงูุฃุฏุงุก.  ููู ุงููุงุถุญ ุฃู 8 ุจุชุงุช ุฃุฎุฑู ูู ุฃุฎุฐ ุงูุนููุงุช ููุณุช ูุงููุฉ ููููุณููู ุ ูููู ูููู ุงูุชุญุงูู ุนูู ุฐูู. <br><br>  ููุชุตุฑ ุญุฌู ุงููุฎุฒู ุงููุคูุช ุนูู 256 ุนููุฉ.  ูุฐุง ูุชูุงูู ูุน ูุง ููุฑุจ ูู 8 ูููู ุซุงููุฉ ุ ููุฐุง ูู ุงูุญุฏ ุงูุฃูุตู ููุชุฑุฉ ุฒูููุฉ ูุง ูุชุฌุฒุฃ ุงูุชู ูููู ุฃู ุชุนุทู ููููุงู ุงูุฃุฎุฑู.  ูู ุงูููุช ููุณู ุ ูุง ูุฒุงู ุชูููุฐ ุงูููุงู ูุนูููุง ุจุดูู ุฏูุฑู ุจุณุจุจ ุงูุงููุทุงุนุงุช. <br><br>  ุงุณุชุจุฏุงู ุงูุชุฃุฎูุฑ ุงูููุงุณู ูุง ูุนูู ุจุดูู ุฏููู ุฌุฏูุง ููุชููู ุงููุคูุช. <br><br>  ุฃูุง ูุชุฃูุฏ ูู ุฃู ูุฐู ููุณุช ูุงุฆูุฉ ูุงููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูุฑุงุฌุน </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุซุจ ูููู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุณุงุจ ูุฑุดุญ PWM</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฃุฎุฐุช ุจุนุถ ุงูุฃููุงุฑ ููุญู ุงูุชุฌุฑูุจู ูู ููุง</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar466121/">https://habr.com/ru/post/ar466121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar466105/index.html">ุฑูุน ุชุฑุฏุฏ ุงูุชุดุบูู Magento Rest API ูุน RoadRunner</a></li>
<li><a href="../ar466107/index.html">ุงูุนู ุฐูู ุจููุณู ูุธุงู ุงูููุฒู ุงูุฐูู</a></li>
<li><a href="../ar466109/index.html">ุญู ุงููุดุงูู ูุน pwnable.kr 22 - brainfuck. ูุฌูู Ret2libc</a></li>
<li><a href="../ar466111/index.html">ุชุฏุฑูุจ Cisco 200-125 CCNA v3.0. ุงูููู 32. ุงุณุชุนุงุฏุฉ ูููุฉ ุงููุฑูุฑ ู XMODEM / TFTPDNLD ูุชูุดูุท ุชุฑุฎูุต ุณูุณูู</a></li>
<li><a href="../ar466113/index.html">ุชุญุฏูุฏ ุชุฑููุฒ ุงููุต ูู PHP ุจุฏูุงู ูู mb_detect_encoding</a></li>
<li><a href="../ar466123/index.html">ุงูููู. ุงููุฒู. ุซูุงุซุฉ ุฌูุฑุงู</a></li>
<li><a href="../ar466127/index.html">ูููุง NPP ุฃู ุงููููู ูู ุงูููุงุนู</a></li>
<li><a href="../ar466129/index.html">ููุงุกุฉ ุงูููู ุนูู ุงูุจูุฒูู ูุงูุจุทุงุฑูุงุช ูุงูููุฏุฑูุฌูู</a></li>
<li><a href="../ar466135/index.html">Megapack: ููู ุชููู ูุทูุฑู Factorio ูู ุญู ุงููุดููุฉ ูุน 200 ูุงุนุจ ูุชุนุฏุฏ ุงููุงุนุจูู</a></li>
<li><a href="../ar466137/index.html">System.IO - ุฎุทูุท ุงูุฃูุงุจูุจ - ุฃุฏุงุฉ ุบูุฑ ูุนุฑููุฉ ููุญุจู ุงูุฃุฏุงุก ุงูุนุงูู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>