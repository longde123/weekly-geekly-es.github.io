<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòø üë®üèæ‚Äçüç≥ ‚ôåÔ∏è Seguran√ßa de aplicativos clientes: dicas pr√°ticas para um desenvolvedor front-end üë®‚Äçüë®‚Äçüëß‚Äçüëß üë©üèΩ‚Äçüåæ üåÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como voc√™ sabe, a maioria dos ataques de hackers do BlackHat visa comprometer os dados do servidor de aplicativos e servi√ßos da web. Ao mesmo tempo, a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Seguran√ßa de aplicativos clientes: dicas pr√°ticas para um desenvolvedor front-end</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445932/"><p>  Como voc√™ sabe, a maioria dos ataques de hackers do BlackHat visa comprometer os dados do servidor de aplicativos e servi√ßos da web.  Ao mesmo tempo, a parte do cliente √© atacada pelo menos hoje.  De acordo com a defini√ß√£o seca, qualquer ataque √© um conjunto de medidas por parte de um hacker direcionado √† rede e transfer√™ncia de dados, dados e sua substitui√ß√£o, infraestrutura e recursos t√©cnicos da implementa√ß√£o do aplicativo da web.  Portanto, empresas internacionais exigem que os engenheiros de desenvolvimento adotem uma abordagem mais respons√°vel e completa da seguran√ßa dos aplicativos clientes. </p><br><p> No exemplo do meu projeto, falarei sobre como os aplicativos clientes est√£o atacando hoje e como voc√™ pode evitar essas amea√ßas. </p><a name="habracut"></a><br><img alt="As 10 principais amea√ßas de 2013 a 2017" src="https://habrastorage.org/webt/ys/zg/d7/yszgd7tqw75npl5bx9pliitikte.jpeg"><br>  <i>As 10 principais amea√ßas para 2013 - 2017.</i> <br><br><p>  Como voc√™ pode ver, entre as principais amea√ßas, inje√ß√£o, acionamento de erros, desvio de autentica√ß√£o e dados confidenciais inseguros est√£o em primeiro lugar.  A amea√ßa de usar componentes com vulnerabilidades conhecidas ainda √© relevante.  Novas amea√ßas tamb√©m apareceram: invas√£o do mecanismo de controle de acesso, desserializa√ß√£o e serializa√ß√£o inseguras de dados, registro e monitoramento insuficientemente detalhados. </p><br><p>  Em 2001, Mark Curfy e Dennis Groves fundaram o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">OWASP</a> (Open Web Application Security Project).  Este √© um projeto internacional de c√≥digo aberto para troca de experi√™ncias no combate a vulnerabilidades em aplicativos clientes, no qual um grande n√∫mero de engenheiros de seguran√ßa de aplicativos participa.  A comunidade da OWASP enche o portal de v√°rios artigos com informa√ß√µes sobre vulnerabilidades, materiais de treinamento, ferramentas para testar e repelir ataques.  Ataques reais s√£o descritos, seus aspectos s√£o revelados e o que precisa ser feito para evitar amea√ßas √© descrito. </p><br><p>  Para entender quais amea√ßas s√£o perigosas para um projeto, voc√™ precisa test√°-lo completamente.  Para fazer isso, a rede possui aplicativos, estruturas e servi√ßos online que identificam automaticamente certas vulnerabilidades.  Para testes locais, recomendo o uso de aplicativos e estruturas e, para testar projetos em opera√ß√£o, √© muito √∫til adicionar servi√ßos online tamb√©m. </p><br><img src="https://habrastorage.org/webt/zh/c7/ll/zhc7lln_b43msp-lkz7ah0iapmw.jpeg"><br><br><p>  Mas mesmo que as ferramentas de teste n√£o tenham informado nos relat√≥rios sobre vulnerabilidades significativas (o que √© improv√°vel), ainda assim, preste aten√ß√£o ao armazenamento de dados confidenciais no sistema de controle de vers√£o, construindo o aplicativo, mecanismo de autentica√ß√£o, algoritmo de hash de senha, criptografia de dados confidenciais e sistemas de registro e monitorar todo o aplicativo da web.  Nesse caso, √© melhor jogar com seguran√ßa e n√£o confiar na automa√ß√£o cega. </p><br><h2>  Git </h2><br><p>  Primeiro, vamos falar sobre dados confidenciais no Git.  Idealmente, um reposit√≥rio separado de segredos √© alocado para armazenar dados confidenciais.  A partir dele, durante a montagem para comissionamento, dados confidenciais s√£o puxados e costurados no aplicativo.  Hoje, Hashicorp Vault, Keywhiz, segredos do Docker, Azure Key Vault e v√°rios outros s√£o populares. </p><br><p>  Mas e se voc√™ n√£o tiver esse armazenamento?  Voc√™ pode usar ferramentas para codificar e ocultar arquivos com segredos que expandir√£o os recursos dos sistemas de controle de vers√£o. </p><br><p> A primeira coisa que vem √† mente √© a solu√ß√£o universal BlackBox.  Pode ser usado com qualquer sistema de controle de vers√£o, por exemplo, Mercurial, Git, etc.  Al√©m disso, existem duas extens√µes para o Git: git-crypt e git-secret.  Eu recomendo usar o segundo, porque me pareceu o mais conveniente de usar e mais compreens√≠vel em termos de descri√ß√£o na documenta√ß√£o oficial.  Ap√≥s instalar o git-secret, voc√™ precisa inicializ√°-lo no reposit√≥rio Git.  Lembre-se de especificar a extens√£o a ser usada no arquivo <b>.gitattributes</b> .  Em seguida, configure a acessibilidade dos segredos: identifique os usu√°rios aos quais voc√™ deseja fornecer acesso a dados confidenciais.  Em seguida, adicione arquivos com dados confidenciais e <code>git-secret-hide</code> os atrav√©s do <code>git-secret-hide</code> .  Voc√™ pode obter arquivos ocultos atrav√©s do <code>git-secret-reveal.</code> </p><br> <code>brew install git-secret              //  <br> git secret init                      //  <br> git secret tell your@gpg.email       &amp;nbsp//   <br> git secret add &lt;files...&gt;             //   <br> git secret hide                      &amp;nbsp//   <br> git secret reveal                    &amp;nbsp//    <br></code> <br><h2>  Webpack </h2><br><p>  Outra maneira de eliminar amea√ßas √© configurar o webpack corretamente.  Para se proteger contra ataques XSS, XEE e similares, considere aderir √†s pol√≠ticas CORS (compartilhamento de recursos de origem cruzada) e CSP (Pol√≠tica de seguran√ßa de conte√∫do).  Nos dois casos, √© importante seguir os cabe√ßalhos para verificar a autenticidade de certos scripts usados ‚Äã‚Äãno projeto.  Os navegadores t√™m mecanismos para verificar a confiabilidade de uma fonte espec√≠fica, por exemplo, o Safari emitir√° avisos a cada etapa se o CORS e o CSP estiverem configurados incorretamente. </p><br><p>  Existem duas maneiras de cumprir o CORS e o CSP.  O primeiro √© configurar os cabe√ßalhos para responder √†s solicita√ß√µes no lado do servidor.  O segundo √© registrar as duas pol√≠ticas por meio de metatags e atributos.  O √∫ltimo m√©todo √© recomendado se voc√™ tiver desenvolvedores de back-end pregui√ßosos, eles sempre est√£o ocupados e n√£o est√£o interessados ‚Äã‚Äãem pol√≠ticas de seguran√ßa.  As meta tags podem ser registradas imediatamente ao criar o aplicativo.  Plug-ins como html-webpack-plugin, html-webpack-exclude-assets-plugin, script-ext-html-webpack-plugin, csp-html-webpack-plugin e crypto nos ajudar√£o com isso.  Al√©m disso, se voc√™ tiver recursos de terceiros em seu projeto (por exemplo, links para fontes externas usadas em CSS; recursos carregados da CDN e assim por diante), recomendo usar tamb√©m o webpack-subresource-integridade-plugin.  Assim, voc√™ informar√° ao navegador que os recursos carregados no script s√£o confi√°veis, n√£o h√° inje√ß√µes neles, s√£o inteiros e intocados.  E mesmo que algu√©m tenha injetado dados maliciosos no recurso e voc√™ o tenha carregado, voc√™ deve estar preparado para isso e proteger seu projeto contra essas amea√ßas. </p><br><p>  Quero prestar <b>especial aten√ß√£o</b> √† ordem em que as inst√¢ncias de classe para os plug-ins s√£o criadas.  A ordem deve ser assim: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SHA256 = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">str</span></span></span><span class="hljs-function">) =&gt;</span></span> CRYPTO.createHash(<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>).update( str, <span class="hljs-string"><span class="hljs-string">'utf8'</span></span>).digest(<span class="hljs-string"><span class="hljs-string">'base64'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> sha256Str = SHA256( <span class="hljs-string"><span class="hljs-string">''</span></span> + <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() ); [‚Ä¶] <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackPlugin({   <span class="hljs-attr"><span class="hljs-attr">filename</span></span>: <span class="hljs-string"><span class="hljs-string">'index.html'</span></span>,   <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'public/index.html'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScriptExtHtmlWebpackPlugin({    <span class="hljs-attr"><span class="hljs-attr">custom</span></span>: [{           <span class="hljs-attr"><span class="hljs-attr">test</span></span>: <span class="hljs-regexp"><span class="hljs-regexp">/\.js$/</span></span>,           <span class="hljs-attr"><span class="hljs-attr">attribute</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce'</span></span>,           <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-string"><span class="hljs-string">'nonce-'</span></span> + sha256Str    }] }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> HtmlWebpackExcludeAssetsPlugin(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CspHtmlWebpackPlugin({    <span class="hljs-string"><span class="hljs-string">'base-uri'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'object-src'</span></span>: <span class="hljs-string"><span class="hljs-string">'\'none\''</span></span>,    <span class="hljs-string"><span class="hljs-string">'script-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'unsafe-eval\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'nonce-'</span></span> + sha256Str + <span class="hljs-string"><span class="hljs-string">'\''</span></span>],    <span class="hljs-string"><span class="hljs-string">'style-src'</span></span>: [<span class="hljs-string"><span class="hljs-string">'\'unsafe-inline\''</span></span>, <span class="hljs-string"><span class="hljs-string">'\'self\''</span></span>] }, {    <span class="hljs-attr"><span class="hljs-attr">devAllowUnsafe</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>,    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>,    <span class="hljs-attr"><span class="hljs-attr">hashingMethod</span></span>: <span class="hljs-string"><span class="hljs-string">'sha256'</span></span> }), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SriPlugin({    <span class="hljs-attr"><span class="hljs-attr">hashFuncNames</span></span>: [<span class="hljs-string"><span class="hljs-string">'sha256'</span></span>, <span class="hljs-string"><span class="hljs-string">'sha384'</span></span>],    <span class="hljs-attr"><span class="hljs-attr">enabled</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }), [‚Ä¶]</code> </pre><br><p>  Em seguida, durante a montagem, a <code>&lt;hed&gt;</code> exibir√° a <code>&lt;hed&gt;</code> <code>http-equiv=content-security-policy</code> .  As diretivas ser√£o escritas no atributo <code>content</code> , que indica quais scripts e recursos podem ser confi√°veis. </p><br><p>  A diretiva <code>base-uri</code> mostra qual URL base √© usado para carregar scripts, CSS, imagens e muito mais. </p><br><p>  Os objetos geralmente n√£o s√£o carregados, portanto, defina <code>none</code> na diretiva <code>object-sr</code> c. </p><br><p>  A diretiva <code>script-src</code> se aplica aos scripts JS. </p><br><p>  N√£o se esque√ßa de registrar um atributo do tipo uma <code>nnce-&lt;hshVlue&gt;</code> cada vez.  Al√©m disso, o hash deve ser calculado usando o algoritmo SHA256 ou SHA512. </p><br><p>  Quanto √† diretiva <code>style-src</code> , nosso projeto tem uma peculiaridade: usamos componentes estilizados para escrever CSS para cada componente e isol√°-los um do outro.  E, portanto, √© necess√°rio especificar que em n√≥s o <code>style-src</code> <code>unsafe-inline</code> e o <code>self</code> s√£o usados ‚Äã‚Äãno <code>style-src</code> , caso contr√°rio, os componentes estilizados cair√£o. </p><br><br><img src="https://habrastorage.org/webt/9x/di/ny/9xdinyh5msrmdszkkdayka1tqya.jpeg"><br><br><p>  A tag de <code>script</code> ser√° automaticamente definida como n√£o <code>nnce-&lt;hshVlue&gt;</code> , <code>integrity</code> e <code>cross-origin</code> .  Eles informam ao navegador que os recursos est√£o sendo extra√≠dos de fontes confi√°veis.  Caso contr√°rio, se o navegador perceber que o recurso n√£o corresponde ao CSP ou ao CORS, ele simplesmente n√£o carregar√° esse script ou arquivo CSS e escrever√° algo no console como: <i>"Preste aten√ß√£o neste script, nesta linha na qual voc√™ inicializa ele.</i>  <i>Olha, voc√™ tem algo errado!</i>  . </p><br><p>  A documenta√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">MDN</a> , OWASP e <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">W3C</a> fornece diretrizes para impor pol√≠ticas CSP e CORS.  Al√©m disso, quaisquer ferramentas de teste de penetra√ß√£o reportar√£o a conformidade com as regras CORS e CSP no projeto.  Qualquer estrutura ou ferramenta que realize testes autom√°ticos de um projeto apontar√° falhas. </p><br><h2>  Autentica√ß√£o de usu√°rio </h2><br><p>  Usamos o OpenID Connect e o protocolo Kerberos.  Um padr√£o OpenID bastante comum √© usado para autenticar usu√°rios externos. </p><br><p>  O Kerberos √© mais adequado para a rede interna, no banco √© usado para autentica√ß√£o autom√°tica de funcion√°rios.  Suponha que exista uma m√°quina local na qual um funcion√°rio da organiza√ß√£o trabalhe.  Ele se autenticou uma vez nesta m√°quina e n√£o precisar√° digitar o login e a senha novamente em nenhum lugar: o funcion√°rio efetua login em qualquer aplicativo e o sistema a autentica imediatamente.  O Kerberos possui configura√ß√µes sutis para a m√°quina local, e isso √© dif√≠cil porque precisa ser configurado para <b>cada computador e cada navegador.</b>  Se o Internet Explorer normalmente puxa as configura√ß√µes padr√£o e o Chrome puxa as configura√ß√µes do IE, o Firefox precisa configur√°-lo separadamente.  O Safari no MacOS X encontrar√° as configura√ß√µes em si, mas para o Safari no Windows voc√™ precisar√° especific√°-las manualmente. </p><br><p>  Voc√™ precisa verificar seu aplicativo em todos os navegadores, independentemente de onde quer que funcione.  Por exemplo, se eu trabalho no Windows, instalo o Safari localmente e testo meu projeto, e se trabalho no Mac, levanto o Windows em uma m√°quina virtual para executar o aplicativo nas vers√µes correspondentes dos navegadores. </p><br><p>  A autentica√ß√£o pode ser implementada em aplicativos modernos usando o Passport.js e pacotes de sess√£o expressa, al√©m do SDK do Auth0. </p><br><p>  Se voc√™ n√£o conseguir desenvolver um servi√ßo de autentica√ß√£o por meio do OpenID Connect ou de qualquer outro protocolo, use uma camada proxy, como Auth0 e similares, para que a autentica√ß√£o ocorra atrav√©s de uma empresa terceirizada especializada em fornecer aos usu√°rios acesso seguro aos recursos da Internet. </p><br><p>  Quando atualizamos alguns aplicativos para o Node.js, recomendamos o uso de pacotes Passport.js, sess√£o expressa etc. no servidor.  Para garantir a seguran√ßa no cliente, aumentamos independentemente o componente para autentica√ß√£o.  N√£o se esque√ßa de especificar o atributo de preenchimento autom√°tico desativado no formul√°rio de autentica√ß√£o para excluir o preenchimento autom√°tico dos campos do formul√°rio. </p><br><h2>  Hash de senha </h2><br><p>  O site da OWASP recomenda que voc√™ n√£o use mecanismos de hash de senha embutidos no banco de dados.  Para isso, √© melhor usar pacotes como Argon2, PBKDF2, ccrypt e bcrypt.  Na minha pr√°tica, eu uso o Argon2 - este √© um inv√≥lucro para algoritmos GCC, PGP / GPG, etc., mas requer que voc√™ instale primeiro o pacote GCC.  Esquema de uso do Argon2: </p><br><br><pre> <code class="bash hljs">1.  GCC &gt;= 4.8 install $ brew install gcc</code> </pre> <br><pre> <code class="bash hljs">2.     - $ npm install -g node-gyp</code> </pre> <br><pre> <code class="bash hljs">3.   Argon2 $ npm install argon2</code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">4.</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ARGON <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'argon2'</span></span>; ARGON.generateSalt().then( <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">salt: string</span></span></span><span class="hljs-function">) =&gt;</span></span> {  ARGON.hash(<span class="hljs-string"><span class="hljs-string">'some-user-password'</span></span>, salt)    .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hash : string</span></span></span><span class="hljs-function">) =&gt;</span></span> {       <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Successfully created Argon2 hash:'</span></span>, hash);       <span class="hljs-comment"><span class="hljs-comment">// </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> store the hash in the user database  }); }); argon2.verify( 'previously-created-argon-hash-here', 'some-user-password').then(() =&gt; {  console.log('Successful password supplied!');  // </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">TODO:</span></span></span><span class="hljs-comment"> log the user in }).catch(() =&gt; {  console.log('Invalid password supplied!'); });</span></span></code> </pre> <br><h2>  Ofusca√ß√£o </h2><br><p>  A ofusca√ß√£o permite modificar o c√≥digo para que ele n√£o possa ser analisado em componentes.  Afinal, os atacantes - e n√£o apenas eles - costumam usar engenharia reversa: o programador pega um arquivo JS e come√ßa a analisar as fontes.  Assim, ele pode aprender os m√©todos usados ‚Äã‚Äãou entender o mecanismo de trabalho de um script espec√≠fico para implementar c√≥digo malicioso.  Ou use esses mecanismos para invadir um aplicativo da Web e realizar um ataque furtivo. </p><br><p>  Os hackers n√£o se metem em problemas.  Primeiro, eles conduzem a explora√ß√£o do recurso, determinam as vulnerabilidades e o vetor de ataque.  Por exemplo, eles manipulam dados ou exploram vulnerabilidades contidas em protocolos de transporte.  O vetor de ataque pode ter como objetivo as vulnerabilidades de um sistema operacional espec√≠fico; existem muitas em qualquer sistema UNIX.  Por√©m, as vulnerabilidades s√≥ podem ser usadas se o administrador tiver configurado pol√≠ticas de seguran√ßa mal configuradas, por exemplo, definir URLs incorretos que saem para fora. </p><br><p>  Assim, para o reconhecimento, a engenharia reversa √© usada.  √â imposs√≠vel exclu√≠-lo completamente, mas pode ser muito dif√≠cil.  Para isso, v√°rios ofuscadores s√£o usados, no meu caso - javascript-obfuscator.  Com base nele, √© feito um plugin para o webpack - webpack-obfuscator.  Tamb√©m para o webpack criado obfuscator-loader.  Este pacote possui configura√ß√µes recomendadas para diferentes n√≠veis de paran√≥ico: baixo, m√©dio e alto, eles podem ser encontrados no site oficial.  Se voc√™ usar esse ofuscador, lembre-se de que ele funciona muito mal com o mecanismo de minifica√ß√£o incorporado ao webpack.  N√£o use minifica√ß√£o e ofusca√ß√£o juntos, caso contr√°rio, o ofuscador pode quebrar completamente o c√≥digo do script. </p><br><p>  Al√©m disso, o ofuscador aumenta o volume do script e seu carregamento.  Aqui voc√™ precisa decidir por si mesmo: ou aprimora a seguran√ßa, estabilidade e confiabilidade, mas perde em conveni√™ncia e velocidade;  se preocupam com a velocidade, mas esquecem a seguran√ßa, seguem as orienta√ß√µes. </p><br><h2>  Registro e monitoramento de amea√ßas </h2><br><p>  Existe uma amea√ßa como o uso de pacotes com vulnerabilidades j√° conhecidas.  Analisadores de amea√ßas como auditoria npm, Snyk e LGTM ajudar√£o nessas situa√ß√µes.  A auditoria Npm √© um utilit√°rio padr√£o incorporado ao npm, mas voc√™ precisa chamar constantemente esse comando ou criar muletas.  Portanto, aconselho voc√™ a usar o Snyk.  Este projeto possui seu pr√≥prio banco de dados com vulnerabilidades.  Quando voc√™ inicia o teste, o Snyk acessa esse banco de dados e faz o upload confidencial do relat√≥rio no seu projeto do Snyk, que n√£o √© acess√≠vel a pessoas de fora.  √â verdade que voc√™ pode verificar seu projeto gratuitamente apenas 300 vezes e, ao verificar cada pr√©-confirma√ß√£o, essas 300 tentativas gratuitas terminam muito rapidamente.  Portanto, √© melhor executar um teste para ganchos de pr√©-push ou pr√©-mesclagem. </p><br><p>  O homem √© a vulnerabilidade mais importante de qualquer sistema.  Portanto, verifique o projeto antes de come√ßar a criar o aplicativo, porque at√© o c√≥digo-fonte pode conter algo malicioso.  √â bom quando apenas uma pessoa tem acesso ao projeto, mas geralmente trabalhamos em equipe.  E se algum tipo de ‚Äúbem-querido‚Äù aparecesse e decidisse deixar a empresa ‚Äúlindamente‚Äù e deixar uma marca?  Isso tamb√©m deve ser lembrado. </p><br><p>  Eu recomendo usar o pacote Snyk desde o in√≠cio do projeto e iniciar a verifica√ß√£o no console.  Tudo √© simples aqui: ap√≥s a instala√ß√£o, defina o login e a senha da conta, e o teste em si pode ser realizado assim: </p><br><ul><li>  Ap√≥s instalar a depend√™ncia npm i snyk ‚ÄîD e especificar ‚Äúsnyk‚Äù: true no package.json, execute: </li></ul><br><pre> <code class="bash hljs">./node_modules/.bin/snyk wizard --dev</code> </pre> <br><ul><li>  No package.json, adicione scripts e configura√ß√µes: </li></ul><br><pre> <code class="javascript hljs">{ ... <span class="hljs-string"><span class="hljs-string">"scripts"</span></span>: {  ...  <span class="hljs-string"><span class="hljs-string">"test"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run test:jest"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"test:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk test --dev"</span></span>,  ...  <span class="hljs-string"><span class="hljs-string">"prepare"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run prepare:snyk"</span></span>,  <span class="hljs-string"><span class="hljs-string">"prepare:snyk"</span></span>: <span class="hljs-string"><span class="hljs-string">"snyk protect"</span></span> }, <span class="hljs-string"><span class="hljs-string">"husky"</span></span>: {  <span class="hljs-string"><span class="hljs-string">"hooks"</span></span>: {   <span class="hljs-string"><span class="hljs-string">"commit-msg"</span></span>: <span class="hljs-string"><span class="hljs-string">"commitlint -E HUSKY_GIT_PARAMS"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-commit"</span></span>: <span class="hljs-string"><span class="hljs-string">"npm run test:snyk &amp;&amp; npm run lint &amp;&amp; npm run test:jest"</span></span>,   <span class="hljs-string"><span class="hljs-string">"pre-push"</span></span>: [    <span class="hljs-string"><span class="hljs-string">"npm run test:snyk"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run lint"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run test:jest"</span></span>,    <span class="hljs-string"><span class="hljs-string">"npm run build:production"</span></span>   ],   ...  } }, <span class="hljs-string"><span class="hljs-string">"snyk"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br><p>  Acima, analisamos uma verifica√ß√£o local em busca de amea√ßas √† seguran√ßa.  Para verificar os pacotes em busca de amea√ßas conhecidas, tamb√©m recomendo o uso do LGTM.  Use este projeto em conjunto com o GitHub ou o Bitbucket (at√© voc√™ tentar, n√£o era necess√°rio), e o c√≥digo ser√° verificado imediatamente a cada push. </p><br><h2>  Monitoramento de aplicativos </h2><br><p>  Na esfera do Front-end, as ferramentas j√° est√£o bem estabelecidas; ferramentas para todos os gostos est√£o dispon√≠veis para registrar e monitorar a parte do cliente.  Os mais famosos s√£o Sentry, TrackJS e InsightOps.  O Sentry Server pode ser implantado em seus servidores f√≠sicos.  Por exemplo, em nossos dois projetos, usamos um servidor separado, que foi totalmente configurado para registrar a opera√ß√£o de aplicativos.  Fomos para o URL e largamos todos os logs l√°.  Se ocorrer um erro no aplicativo, ele ser√° agrupado em um bloco try catch e enviado ao servidor Sentry por meio dos m√©todos do pacote raven.  Tudo √© simples e conveniente.  Se voc√™ v√™ URLs obscuros no Sentry que n√£o registrou, se v√™ incorporamentos ou mensagens obscuras, eles est√£o tentando invadir voc√™.  Na minha pr√°tica, isso acontecia regularmente.  Por exemplo, um dos projetos - um servi√ßo para contornar bloqueadores de an√∫ncios e antiv√≠rus - estava constantemente tentando neutralizar e quebr√°-lo. </p><br><p>  Para o monitoramento, eu tamb√©m recomendo o uso do Grafana.  √â importante considerar um sistema de crit√©rios e indicadores que ser√£o monitorados pelo sistema.  Ativamos o tr√°fego, o retorno da publicidade, o grau de exibi√ß√£o de an√∫ncios, o n√∫mero de banners provenientes do Yandex etc.  (projetos no grupo Rambler).  Precis√°vamos entender como o Yandex trabalha com nossas solicita√ß√µes, porque √© um servi√ßo de terceiros, o que significa que precisa ser monitorado, porque, se falhar, todo o projeto poder√° entrar em colapso completamente. </p><br><p>  Se voc√™ monitorar toda a comunica√ß√£o com servi√ßos de terceiros, encontrar√° rapidamente qualquer erro.  A hist√≥ria √© da minha pr√°tica: vimos que a partir do Yandex, as respostas de publicidade deixaram de aparecer.  Aconteceu que eles tiveram problemas t√©cnicos e toda a rede de publicidade caiu completamente.  E n√£o foi a Yandex quem nos informou primeiro, mas ligamos para eles e pedimos para ver o que estava acontecendo com seus servi√ßos. </p><br><p>  Qual √© a melhor maneira de monitorar?  Pegue uma URL pequena, escreva os par√¢metros GET e envie uma solicita√ß√£o GET para esta URL.  No lado do servidor, processe esse URL, grave o log no banco de dados e aumente o monitoramento para o Grafana.  Tudo √© simples. </p><br><p>  Isso √© tudo.  No futuro, tentarei continuar escrevendo sobre o t√≥pico de proteger aplicativos da Web contra amea√ßas.  Para todos que leram at√© o fim - desejo seguran√ßa aos seus projetos))) </p><br><h3>  Lista de fontes para leitura sobre o t√≥pico: </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">www.owasp.org/index.php/Main_Page</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">tproger.ru/translations/webapp-security</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">S. Hawks.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Aplicativo de p√°gina √∫nica ainda mais r√°pido: seguran√ßa</a> </p><br><p>  Seacord, Robert C. O padr√£o de codifica√ß√£o segura CERT C / Robert C. Seacord.  - 2008 </p><br><p>  Chetan Karande.  Protegendo aplicativos de n√≥ - 2017 </p><br><p>  Steven Palmer.  Vulnerabilidades de aplicativos da Web detectam, exploram e impedem - 2011 </p><br><p>  Robert Shimonski, Sean-Philip Oriyano.  Ataques e defesa do cliente - 2012 </p><br><p>  Marcus Pinto, Dafydd Stuttard.  O manual do hacker de aplicativos da Web: Encontrando e explorando falhas de seguran√ßa, 2¬™ edi√ß√£o - 2011 </p><br><p>  Karl Duuna.  Proteja seu aplicativo da web Node.js. - 2015 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt445932/">https://habr.com/ru/post/pt445932/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt445920/index.html">Live: como restringir o desenvolvimento do iOS em grandes equipes</a></li>
<li><a href="../pt445922/index.html">Por que assistir transmiss√µes online, se voc√™ pode ler Habr</a></li>
<li><a href="../pt445924/index.html">TESOUROS: quando os rel√≥gios inteligentes ficam estranhos</a></li>
<li><a href="../pt445926/index.html">O Programa Secreto de OVNIs dos EUA tamb√©m pesquisou buracos de minhoca e dimens√µes extras.</a></li>
<li><a href="../pt445928/index.html">Como aumentamos a produtividade do servi√ßo em Tensorflow em 70%</a></li>
<li><a href="../pt445936/index.html">Desenvolvimento de eletr√¥nicos. Sobre microcontroladores nos dedos</a></li>
<li><a href="../pt445940/index.html">AMA com Habr, v 7.0. Lim√£o, Rosquinhas e Not√≠cias</a></li>
<li><a href="../pt445946/index.html">MWC: instru√ß√µes de uso</a></li>
<li><a href="../pt445948/index.html">Heran√ßa em C ++: iniciante, intermedi√°rio, avan√ßado</a></li>
<li><a href="../pt445952/index.html">Um trilh√£o de pequenos singles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>