<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®‚Äçüë®‚Äçüëß üò• üßúüèø D√©veloppement du ¬´firmware¬ª le plus simple pour les FPGA install√©s dans Redd. Partie 2. Code de programme üìç üöá „äóÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ainsi, dans le dernier article, nous avons d√©velopp√© le syst√®me de processeur le plus simple, √† l'aide duquel nous pr√©voyons de tester la puce RAM con...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>D√©veloppement du ¬´firmware¬ª le plus simple pour les FPGA install√©s dans Redd. Partie 2. Code de programme</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453682/">  Ainsi, dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dernier article,</a> nous avons d√©velopp√© le syst√®me de processeur le plus simple, √† l'aide duquel nous pr√©voyons de tester la puce RAM connect√©e au FPGA du complexe Redd.  Aujourd'hui, nous allons cr√©er un programme C ++ pour cet environnement mat√©riel, et nous allons √©galement d√©couvrir comment injecter ce programme, et surtout, le d√©boguer. <br><br><img src="https://habrastorage.org/webt/ao/pw/9q/aopw9qsnn52memjdqkmx8zldyec.jpeg"><br><a name="habracut"></a><br>  Le programme est d√©velopp√© dans l'environnement Eclipse.  Pour le d√©marrer, s√©lectionnez l'√©l√©ment de menu <b>Outils-&gt; Outils de cr√©ation de logiciels Nios II pour Eclipse</b> . <br><br><img src="https://habrastorage.org/webt/ye/84/bi/ye84bibxhoqvn0gqdltuhyna8hg.png"><br><br>  Nous devons cr√©er un projet et un BSP pour cela.  Pour ce faire, cliquez avec le bouton droit de la souris dans la zone Explorateur de projets et s√©lectionnez l'√©l√©ment de menu <b>Nouveau-&gt; Application Nios II et BSP dans le mod√®le</b> . <br><br><img src="https://habrastorage.org/webt/7n/tz/kh/7ntzkheuuaqfbg810ub0jai8jmc.png"><br><br>  Le mod√®le de base sur la base duquel le projet sera cr√©√© a √©t√© cr√©√© lors de la g√©n√©ration du syst√®me de processeur.  Par cons√©quent, nous trouvons le fichier qui le contient. <br><br><img src="https://habrastorage.org/webt/z6/iy/sl/z6iysldjqrihweonoril4dkpxeo.png"><br><br>  Nous donnerons √©galement un nom au projet (je l'ai <b>SDRAMtest</b> ) et s√©lectionnerons le type de projet.  J'ai choisi <b>Hello World Small</b> .  Je voudrais choisir <b>Memory Test</b> , nous faisons un test de m√©moire, mais maintenant nous envisageons une mani√®re g√©n√©rale de cr√©er des applications.  Par cons√©quent, nous choisissons l'option g√©n√©rale. <br><br><img src="https://habrastorage.org/webt/nm/kd/rk/nmkdrk66vtd6raj_iyba8zqbhn0.png"><br><br>  Nous avons cr√©√© deux projets.  Le premier est notre projet, le second est BSP (Board Support Package, en gros, des biblioth√®ques pour travailler avec des √©quipements). <br><br><img src="https://habrastorage.org/webt/dl/j-/fv/dlj-fvk-8ctcmbafxyirhxwnjoo.png"><br><br>  La premi√®re chose que je fais habituellement est de modifier les param√®tres BSP.  Pour ce faire, je s√©lectionne le deuxi√®me des projets cr√©√©s, appuie sur le bouton droit de la souris et s√©lectionne l'√©l√©ment de menu <b>Nios II -&gt; BSP Editor</b> . <br><br><img src="https://habrastorage.org/webt/bm/hc/1w/bmhc1w_ocq_qjnjy-2u-wsfruyc.png"><br><br>  Dans l'√©diteur, tout est divis√© en groupes: <br><br><img src="https://habrastorage.org/webt/3s/fp/27/3sfp27xpalx9sctult8smi6mqus.png"><br><br>  Mais pour ne pas les parcourir, je vais s√©lectionner la racine de l'arborescence, l'√©l√©ment <b>Settings</b> , et consid√©rer tout lin√©airement.  Je vais √©num√©rer ce √† quoi vous devez faire attention.  √âcran des param√®tres initiaux: <br><br><img src="https://habrastorage.org/webt/b-/7g/vs/b-7gvsbf8dol4jpg7-coipcdqm8.png"><br><br>  La prise en charge de la sortie et la prise en charge de la suppression lors de la fermeture est d√©sactiv√©e, ce qui √©limine les √©l√©ments inutiles de taille √©norme du code, mais ils sont d√©sactiv√©s au d√©part.  Ces choucas se sont √©teintes, car j'ai choisi l'option minimale <b>Hello, World</b> .  Lors du choix d'autres types de code, il est pr√©f√©rable de supprimer √©galement ces daws.  Je ne peux pas r√©sister et activer le support C ++.  Il est √©galement n√©cessaire de supprimer la v√©rification <b>SysID</b> , sinon rien ne fonctionnera.  Le fait est que lors de la r√©alisation du syst√®me mat√©riel, je n'ai pas ajout√© le bloc correspondant.  Les param√®tres restants sont explicites et n'ont pas √©t√© modifi√©s.  En fait, je n'ai pas encore chang√© d'autres param√®tres.  Un peu plus tard, nous reviendrons ici, mais pour l'instant nous appuyons sur le bouton G√©n√©rer.  Nous cr√©ons une nouvelle version de BSP bas√©e sur les param√®tres d√©finis.  √Ä la fin, cliquez sur Quitter. <br><br>  Maintenant, le plaisir commence.  Comment assembler un projet.  Appuyez sur la <b>touche Ctrl + B</b> habituelle - nous obtenons une erreur.  Erreur de d√©codage no: <br><br><img src="https://habrastorage.org/webt/1i/vo/15/1ivo15ndq_u8-t_2obxebgrwf7y.png"><br><br>  Rien de raisonnable non plus dans la console: <br><br><img src="https://habrastorage.org/webt/fm/by/lz/fmbylzar83wnwwchcjcfys_sjb0.png"><br><br>  S√©lectionnez le <b>projet de construction</b> pour le projet <b>SDRAMtest</b> , nous obtenons une explication raisonnable: <br><br><img src="https://habrastorage.org/webt/cc/tr/_t/cctr_tjdwtd7elwqbfiuws-lxc8.png"><br><br>  En fait, les mod√®les qui ne fonctionnent pas sont l'identit√© d'entreprise de Quartus.  C'est une autre raison pour laquelle je n'ai pas choisi le <b>test de m√©moire</b> .  Il y a de plus en plus de course.  Ici, c'est clair quel est le probl√®me. <br><br>  Cette fonction du fichier <b>alt_putstr.c √©choue</b> : <br><br><pre><code class="plaintext hljs">/* * Uses the ALT_DRIVER_WRITE() macro to call directly to driver if available. * Otherwise, uses newlib provided fputs() routine. */ int alt_putstr(const char* str) { #ifdef ALT_SEMIHOSTING return write(STDOUT_FILENO,str,strlen(str)); #else #ifdef ALT_USE_DIRECT_DRIVERS ALT_DRIVER_WRITE_EXTERNS(ALT_STDOUT_DEV); return ALT_DRIVER_WRITE(ALT_STDOUT_DEV, str, strlen(str), 0); #else return fputs(str, stdout); #endif #endif }</code> </pre> <br>  Nous le corrigerons plus tard (pour cela, nous devons compliquer le syst√®me mat√©riel).  Aujourd'hui, nous n'en avons tout simplement pas besoin.  Remplacez son corps par le <b>retour 0</b> .  Le projet commence √† se monter. <br><br>  Super.  Nous avons d√©j√† un <b>fichier elf</b> pr√™t (m√™me s'il n'effectue aucune fonction utile) et nous avons un √©quipement dans lequel vous pouvez <b>t√©l√©charger le fichier hex</b> (rappelez-vous comment nous avons dit au compilateur Quartus que les donn√©es RAM devraient √™tre charg√©es √† partir de celui-ci en d√©finissant Onchip RAM?).  Comment convertir un <b>elfe</b> en <b>hexagone</b> ?  Tr√®s simple.  Nous abordons le projet de travail, appuyez sur le bouton droit de la souris, s√©lectionnez l'√©l√©ment de menu <b>Make Targets-&gt; Build</b> : <br><br><img src="https://habrastorage.org/webt/0-/as/_n/0-as_nxv3f8acgl0thqxucmwrpk.png"><br><br>  Dans la fen√™tre qui appara√Æt, essayez d'abord de s√©lectionner la premi√®re option ( <b>mem_init_install</b> ): <br><br><img src="https://habrastorage.org/webt/ew/pl/gb/ewplgbs-_lyriekrzkll7-xg2g0.png"><br><br>  Rien ne se passera.  Mais √† partir du message d'erreur qui nous est donn√©, nous apprenons √† finaliser le projet pour Quartus: <br><br><pre> <code class="plaintext hljs">../SDRAMtest_bsp//mem_init.mk:230: *** Deprecated Makefile Target: 'mem_init_install'. Use target 'mem_init_generate' and then add mem_init/meminit.qip to your Quartus II Project. Stop.</code> </pre><br>  Nous <b>allons s√©lectionner la</b> <b>construction</b> dans le but de <b>mem_init_generate</b> , apr√®s quoi (juste apr√®s !!!) nous ajouterons le <b>fichier qip</b> sp√©cifi√© au projet mat√©riel (nous avons d√©j√† appris comment ajouter des fichiers lorsque nous avons ajout√© un syst√®me de processeur au projet). <br><br><img src="https://habrastorage.org/webt/jo/bz/eb/jobzebo0suitvzz6siwy7fqdddg.png"><br><br>  Eh bien, le <b>fichier hexagonal</b> lui-m√™me peut √©galement √™tre ressenti avec vos mains.  Le voici: <br><br><img src="https://habrastorage.org/webt/kb/rv/kj/kbrvkjajtxtk0uf2to-fzl_ec7c.png"><br><br>  Super.  Nous avons tout pour commencer √† remplir le programme avec de vraies fonctionnalit√©s.  Nous allons dans le fichier <b>hello_world_small.c</b> .  Honn√™tement, je suis un peu offens√© de travailler avec du C. pur  Par cons√©quent, je le renommerai cpp.  Et pour que rien ne se passe mal, je vais ajouter un sort magique au texte existant: <br><br><img src="https://habrastorage.org/webt/qu/4a/fp/qu4afpj9nqcdns7fz0yg1qpme28.png"><br><br><div class="spoiler">  <b class="spoiler_title">M√™me texte:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">extern "C" { #include "sys/alt_stdio.h" } int main() { alt_putstr("Hello from Nios II!\n"); /* Event loop never exits. */ while (1); return 0; }</code> </pre><br></div></div><br>  Il est important d'effectuer l'op√©ration <b>Nettoyer le projet</b> apr√®s avoir chang√© le type de fichier, sinon le compilateur affichera des messages d'erreur indiquant que le fichier <b>* .c</b> n'a pas √©t√© trouv√© sur la base de certaines informations mises en cache. <br><br>  Nous rendrons le test de m√©moire simple.  Je n'ai pas pour t√¢che d'apprendre au lecteur √† tester correctement la puce RAM.  Nous nous assurons simplement superficiellement que les bus d'adresses et de donn√©es ne sont pas collants et n'ont pas de coupures.  Autrement dit, nous √©crivons dans chaque cellule tous les z√©ros et l'adresse de la cellule.  Notre t√¢che est de faire du code de travail, et tout le reste (autres constantes de remplissage et de retard pour v√©rifier que les donn√©es sont r√©g√©n√©r√©es) sont des d√©tails d'impl√©mentation qui compliquent le texte mais ne changent pas son essence. <br><br>  Commen√ßons par une question simple et naturelle: "O√π se trouve la SDRAM dans l'espace d'adressage?"  Je me souviens que nous avons appel√© la fonction d'attribution automatique des adresses, mais nous n'avons m√™me pas regard√© quelles adresses √©taient r√©ellement attribu√©es.  En fait, m√™me maintenant, nous n'y regarderons pas.  Toutes les informations n√©cessaires sont dans le dossier: <br>  <b>... \ SDRAMtest_bsp \ system.h</b> . <br><br><div class="spoiler">  <b class="spoiler_title">En cons√©quence, nous obtenons le code suivant:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">extern "C" { #include "sys/alt_stdio.h" #include &lt;stdint.h&gt; #include "../SDRAMtest_bsp/system.h" #include &lt;altera_avalon_pio_regs.h&gt; } int main() { bool bRes = true; volatile static uint32_t* const pSDRAM = (uint32_t*)NEW_SDRAM_CONTROLLER_0_BASE; static const int sizeInDwords = NEW_SDRAM_CONTROLLER_0_SPAN / sizeof (uint32_t); //  for (int i=0;i&lt;sizeInDwords;i++) { pSDRAM [i] = 0; } //   for (int i=0;i&lt;sizeInDwords;i++) { if (pSDRAM [i] != 0) { bRes = false; } } //   for (int i=0;i&lt;sizeInDwords;i++) { pSDRAM [i] = i; } //    for (int i=0;i&lt;sizeInDwords;i++) { if (pSDRAM [i] != i) { bRes = false; } } if (bRes) { IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x01); } else { IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x02); } /* Event loop never exits. */ while (1); return 0; }</code> </pre><br></div></div><br>  Nous collectons le <b>fichier hex</b> (je me souviens qu'√† travers cette bo√Æte de dialogue): <br><br><img src="https://habrastorage.org/webt/ig/qk/az/igqkaztuj29lzpy8oguoehfz16s.png"><br><br>  Apr√®s cela, nous compilons l'√©quipement dans Quartus et entrons dans le programmateur pour charger le ¬´firmware¬ª r√©sultant avec le code de programme initialis√© r√©sultant dans la puce. <br><br><img src="https://habrastorage.org/webt/6a/qr/kb/6aqrkbup6jtuombvl9uhy5z_ozi.png"><br><br>  Versez le ¬´firmware¬ª et obtenez un message indiquant que le syst√®me ne vivra que lorsqu'il sera connect√© √† JTAG (fonctionnalit√©s de la licence du noyau SDRAM dans l'environnement de d√©veloppement gratuit).  En fait, pour le cas de Redd, ce n'est pas critique.  Ce JTAG est l√† tout le temps. <br><br><img src="https://habrastorage.org/webt/mt/gm/7w/mtgm7wkwrrey2b67zwawvdxnxkw.png"><br><br>  Les r√©sultats du test RAM peuvent √™tre vus sur le connecteur, les contacts C21 (r√©ussi) ou B21 (erreur).  Nous nous connectons √† eux avec un oscilloscope. <br><br><img src="https://habrastorage.org/webt/uz/cc/ao/uzccaoobipzc-cccy68lbalfwyc.png"><br><br>  Les deux sorties sont √† z√©ro.  Quelque chose ne va pas ici.  Reste √† comprendre quoi exactement.  En fait, un programme inop√©rant est tout simplement g√©nial, car nous allons maintenant commencer √† apprendre le d√©bogage JTAG.  Nous visons le projet, s√©lectionnez <b>Debug As-&gt; Nios II Hardware</b> . <br><br><img src="https://habrastorage.org/webt/ge/lq/il/gelqilnvpmdgmpmijnbdxrw4p7a.png"><br><br>  La premi√®re fois que le syst√®me ne trouve pas le mat√©riel.  Cela ressemble √† ceci (notez la croix rouge dans l'en-t√™te de l'onglet en surbrillance): <br><br><img src="https://habrastorage.org/webt/wf/ou/-4/wfou-49ykdeytjz3sbkuvepobyo.png"><br><br>  Basculez vers l'onglet <b>Connexion cible</b> et cochez la case <b>Ignorer les ID syst√®me incompatibles</b> .  Au cours des exp√©riences suivantes, j'ai parfois √©galement d√ª d√©finir l' <b>horodatage du syst√®me Ignore Mismatched</b> .  Juste au cas o√π, je le mettrai en √©vidence dans l'image non pas avec un rouge, mais avec un cadre jaune pour souligner qu'il n'est pas n√©cessaire de l'installer maintenant, mais si le bouton <b>Debug</b> n'est pas activ√©, il est peut-√™tre temps de l'installer. <br><br><img src="https://habrastorage.org/webt/h9/bi/be/h9bibeo2ixvlgkwc_ey30-3vow8.png"><br><br>  <b>Appliquer</b> ( <b>Appliquer</b> ), puis cliquez sur <b>Actualiser les connexions</b> (ce bouton est masqu√©, vous devez le faire d√©filer): <br><br><img src="https://habrastorage.org/webt/2r/yu/sa/2ryusa_heconi7hmz4zmmf0pec0.png"><br><br>  Un d√©bogueur appara√Æt dans la liste, vous pouvez cliquer sur <b>D√©boguer</b> ... <br><br><img src="https://habrastorage.org/webt/jx/iz/py/jxizpyxvk1r6efvhgahsx5yxica.png"><br><br>  Nous nous sommes arr√™t√©s √† la fonction <b>main ()</b> .  Si vous le souhaitez, vous pouvez mettre un point d'arr√™t √† la fin de l'algorithme et v√©rifier si le programme l'atteint: <br><br><img src="https://habrastorage.org/webt/dv/yb/4u/dvyb4u8bdirwyd_vsx6mncxjhd4.png"><br><br>  Ex√©cutez le programme: <br><br><img src="https://habrastorage.org/webt/q0/dn/qp/q0dnqpvwdy_ervdrwibehw4wukm.png"><br><br>  Le point d'arr√™t n'a pas fonctionn√©.  Arr√™tons le programme et voyons o√π il s'ex√©cute. <br><br><img src="https://habrastorage.org/webt/mb/gw/aj/mbgwajwypeb5jrbc6pse9zp21tw.png"><br><br>  Tout va mal.  Le programme s'est clairement √©cras√©.  En organisant successivement les points d'arr√™t, puis en arr√™tant (avec le bouton rouge ¬´Stop¬ª) et en red√©marrant le programme (en utilisant le bouton bug), on retrouve la zone √† probl√®me. <br><br>  Tout meurt lorsque cette ligne est ex√©cut√©e pour le tout premier √©l√©ment: <br><br><img src="https://habrastorage.org/webt/jq/oq/fv/jqoqfvwqcfb0vel6ljtj4cg9t2i.png"><br><div class="spoiler">  <b class="spoiler_title">M√™me texte:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> for (int i=0;i&lt;sizeInDwords;i++) { if (pSDRAM [i] != 0) { bRes = false; } }</code> </pre><br></div></div><br>  Du point de vue du C ++, tout est propre ici.  Mais si vous ouvrez le code d√©sassembl√©, vous pouvez voir qu'il y a trop de commandes uniformes l√†-bas.  Il semble que le code se soit effac√©.  Et il pourrait le faire si l'√©diteur de liens le mettait en SDRAM (dont le contenu √©crase ce code). <br><br><img src="https://habrastorage.org/webt/-q/_d/pq/-q_dpqueoo5lvsnz6mq8p3em_ju.png"><br><br>  Nous arr√™tons le d√©bogage, fermons la perspective de d√©bogage. <br><br><img src="https://habrastorage.org/webt/cw/0g/1g/cw0g1gt_n_tinl5izm4pvz6v2hq.png"><br><br>  Nous allons √† l'√©diteur BSP, dans lequel nous √©tions au d√©but de cet article, mais √† l'onglet <b>Script</b> de l'√©diteur de <b>liens</b> .  Si je corrigeais cet onglet au tout d√©but, je ne serais pas en mesure de montrer la technique d'entr√©e du d√©bogage JTAG (et de souligner toute sa puissance par rapport √† la sortie de d√©bogage simple, car le fait du code coinc√© pendant le d√©bogage JTAG a attir√© mon attention).  Il en est ainsi.  Un bon √©diteur de liens met tout en m√©moire, dont la taille est plus grande. <br><br><img src="https://habrastorage.org/webt/uf/ij/li/ufijli2wjemuirgicymujvon-ym.png"><br><br>  Nous redirigeons tout vers <b>onchip_memory</b> ... Maintenant nous avons la SDRAM - c'est juste un morceau de m√©moire, dont les performances ne sont pas encore garanties.  Vous ne pouvez le donner √† aucune action de compilation automatique. <br><br><img src="https://habrastorage.org/webt/1i/11/k8/1i11k8pde4xbyl73v-gutl3rqwm.png"><br><br>  Nous reconstruisons <b>bsp</b> , reconstruisons le projet.  Dois-je recr√©er l'image m√©moire et surcharger le FPGA?  Ensuite, pour un travail semi-autonome, cela sera n√©cessaire, mais pendant que le d√©bogage est en cours - non.  Une nouvelle version du programme sera imm√©diatement charg√©e dans la RAM lorsqu'une nouvelle session de d√©bogage commence.  Mais pour qu'au prochain d√©marrage du FPGA, il ne soit pas n√©cessaire de lancer le d√©bogueur, de faire un nouveau <b>fichier HEX</b> √† la fin du d√©bogage et de collecter avec lui le ¬´firmware¬ª du FPGA. <br><br>  Pour le nouveau code, un point d'arr√™t a √©t√© atteint, le r√©sultat du test est <b>vrai</b> : <br><br><img src="https://habrastorage.org/webt/fo/t6/xh/fot6xhtlgjo0_rs89vzidyjngxw.png"><br><br>  L'oscilloscope s'est amus√©: le rayon jaune a vol√© en bloc. <br><br><img src="https://habrastorage.org/webt/6j/mt/hl/6jmthlphaxtdnzhcmxyooxroxyo.png"><br><br>  Test r√©ussi.  Allons un peu d√©licat et v√©rifions simultan√©ment les performances du syst√®me.  Faisons la finale comme ceci: <br><br><pre> <code class="plaintext hljs"> //    GPIO if (bRes) { while (true) { IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x01); IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x00); } } else { while (true) { IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x02); IOWR_ALTERA_AVALON_PIO_DATA (PIO_0_BASE,0x00); } }</code> </pre><br>  En cons√©quence, nous avons un tel m√©andre sur l'oscilloscope (tout √©tait connect√© via une longue boucle, donc un capteur capacitif est apparu sur la deuxi√®me ligne, ne faites pas attention √† lui): <br><br><img src="https://habrastorage.org/webt/ff/w1/te/ffw1tetcbq252-1bqdhsswrtkl4.png"><br><br>  Le r√©sultat est une fr√©quence d'environ 8,3 MHz √† une fr√©quence d'horloge de 50 MHz sans aucun r√©glage fin du c≈ìur du processeur et optimisation du code de programme.  Autrement dit, l'acc√®s aux ports passe √† une fr√©quence l√©g√®rement sup√©rieure √† 16 MHz, ce qui correspond √† un tiers de la fr√©quence du syst√®me.  Non pas qu'il soit compl√®tement diff√©rent, mais meilleur que 4 MHz √† une fr√©quence d'horloge de 925 MHz pour Cyclone V SoC ... Non, le processeur NIOS II lui-m√™me est plusieurs fois plus lent que le cinqui√®me noyau Cyclone ARM, mais le processeur, comme je l'ai dit , nous avons x64 dans le syst√®me, ici nous avons plus besoin du noyau, qui fournit la logique du fer.  Et cette logique est fournie pr√©cis√©ment par le travail avec les ports.  Si le travail avec les ports est lent, alors tout le reste sera r√©guli√®rement inactif, en attendant que le bus ait fini de fonctionner.  Les caract√©ristiques r√©v√©l√©es sont la limite d‚Äôacc√®s du processeur aux ports, mais pas le mat√©riel dans son ensemble.  Cependant, comment mettre en ≈ìuvre le travail dans son ensemble, nous examinerons dans le prochain article. <br><br><h2>  Conclusion </h2><br>  L'article montre comment cr√©er et configurer un projet en C ++ pour l'environnement de processeur le plus simple d√©velopp√© pour le complexe Redd.  Les m√©thodes d'acc√®s √† l'√©quipement, ainsi que la technique de d√©bogage JTAG sont pr√©sent√©es.  T√©l√©chargez le kit mat√©riel / logiciel obtenu lors de la r√©daction de l'article <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr453682/">https://habr.com/ru/post/fr453682/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr453666/index.html">Comment je conduisais un taxi sans pilote</a></li>
<li><a href="../fr453668/index.html">10 erreurs d'un jeune RO (partie I - trois erreurs)</a></li>
<li><a href="../fr453672/index.html">CardInfo - API pour d√©terminer le logo, les couleurs de la banque et d'autres choses par num√©ro de carte</a></li>
<li><a href="../fr453676/index.html">Connexion √† Windows via SSH comme sous Linux</a></li>
<li><a href="../fr453678/index.html">Comment voir la r√©verb√©ration ou la transmission vid√©o par le son dans l'eau - 2</a></li>
<li><a href="../fr453686/index.html">Semaine de la s√©curit√© 22: statistiques sur les menaces, chevaux de Troie bancaires et exploits populaires</a></li>
<li><a href="../fr453688/index.html">Java n'est pas seulement une entreprise sanglante, mais aussi des applications sensibles √† la latence rapide</a></li>
<li><a href="../fr453692/index.html">Shaders de jeu 3D pour d√©butants: Effets</a></li>
<li><a href="../fr453694/index.html">Connectez-vous √† Windows via SSH comme sous Linux</a></li>
<li><a href="../fr453696/index.html">Reliure angulaire bidirectionnelle, un peu plus de compr√©hension</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>