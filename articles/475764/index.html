<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ì üî© üë¥üèª Cadenas de Markov para la generaci√≥n de edificios procesales üî£ üìñ üö£üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Nota: el c√≥digo fuente completo de este proyecto se puede encontrar [ aqu√≠ ]. Como es parte de un proyecto m√°s grande, recomiendo ver el commit en el ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cadenas de Markov para la generaci√≥n de edificios procesales</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475764/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/152/06b/acc/15206bacc91b6635a0f286fa21998363.gif" alt="imagen"></div><br>  Nota: el c√≥digo fuente completo de este proyecto se puede encontrar [ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> ].  Como es parte de un proyecto m√°s grande, recomiendo ver el commit en el momento en que se lanz√≥ este art√≠culo, o el archivo <code>/source/helpers/arraymath.h</code> , as√≠ como <code>/source/world/blueprint.cpp</code> . <br><br>  En este art√≠culo quiero hablar en detalle sobre los principios del uso de las cadenas de Markov y las estad√≠sticas para la generaci√≥n de procedimientos de edificios 3D y otros sistemas. <br><br>  Explicar√© los fundamentos matem√°ticos del sistema e intentar√© hacer la explicaci√≥n lo m√°s general posible para que puedas aplicar este concepto en otras situaciones, por ejemplo, para generar mazmorras 2D.  La explicaci√≥n ir√° acompa√±ada de im√°genes y c√≥digo fuente. <br><br>  Este m√©todo es un m√©todo generalizado para la generaci√≥n de procedimientos de sistemas que satisfacen ciertos requisitos, por lo que recomiendo leer al menos hasta el final de la primera secci√≥n para que pueda comprender si esta t√©cnica puede ser √∫til en su caso, porque a continuaci√≥n le explico los requisitos necesarios. <br><a name="habracut"></a><br>  Los resultados se usar√°n en mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">motor de v√≥xel</a> para que los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bots de tareas</a> puedan construir edificios y luego ciudades.  ¬°Al final del art√≠culo hay un ejemplo! <br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Su navegador no admite video HTML5. <source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2019/10/buildings.mp4" type="video/mp4"></video></div></div></div><br>  <i>Un par de ejemplos con los resultados.</i> <br><br><h2>  Los fundamentos </h2><br><h3>  Cadenas de Markov </h3><br>  Las cadenas de Markov son una secuencia de estados a lo largo de los cuales se mueve un sistema, descritos por transiciones en el tiempo.  Las transiciones entre estados son estoc√°sticas, es decir, se describen por probabilidades, que son una caracter√≠stica del sistema. <br><br>  El sistema est√° definido por el espacio de estado, que es el espacio de todas las configuraciones posibles del sistema.  Si el sistema se describe correctamente, tambi√©n podemos describir las transiciones entre estados como pasos discretos. <br><br>  Cabe se√±alar que a partir de un estado del sistema a menudo hay varias posibles transiciones discretas, cada una de las cuales conduce a un estado diferente del sistema. <br><br>  La probabilidad de transici√≥n del estado i al estado j es igual a: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.969ex" height="2.66ex" viewBox="0 -780.1 1278.5 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6A" x="345" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> P_ {ij} </script></p><br>  El proceso de Markov es el proceso de estudiar este espacio de estado con la ayuda de las probabilidades transferidas a √©l. <br><br>  Lo importante es que los procesos de Markov "no tienen memoria".  Simplemente significa que las probabilidades de transici√≥n del estado actual al nuevo dependen solo del estado actual y ya no de otras condiciones visitadas anteriormente. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="12.417ex" height="2.78ex" viewBox="0 -832 5346.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6A" x="345" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-3D" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-50" x="2612" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-28" x="3364" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="3753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-2C" x="4099" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6A" x="4544" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-29" x="4956" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-2"> P_ {ij} = P (i, j) </script></p><br><h4>  Ejemplo: generaci√≥n de texto </h4><br>  Un sistema es una secuencia de bits.  El espacio de estado es todas las posibles secuencias de bits.  Una transici√≥n discreta cambiar√° un bit de 0 a 1 o de 1 a 0. Si el sistema tiene n bits, entonces de cada estado tenemos n posibles transiciones a un nuevo estado.  El proceso de Markov consistir√° en el estudio del espacio de estado cambiando los valores de bits en una secuencia usando ciertas probabilidades. <br><br><h4>  Ejemplo: pron√≥stico del tiempo </h4><br>  El sistema es las condiciones clim√°ticas actuales.  El espacio de estado es todos los estados posibles en los que el clima puede ser (por ejemplo, "lluvioso", "nublado", "soleado", etc.).  La transici√≥n ser√° un cambio de cualquier estado a otro estado en el que podamos establecer la probabilidad de la transici√≥n (por ejemplo, "¬øcu√°l es la probabilidad de que si hace sol hoy, ma√±ana llover√°, independientemente del clima de ayer?"). <br><br><h3>  M√©todo de Monte Carlo para las cadenas de Markov </h3><br>  Dado que las transiciones entre estados est√°n determinadas por las probabilidades, tambi√©n podemos establecer la probabilidad de que un "estable" est√© en cualquier estado (o, si el tiempo tiende al infinito, el tiempo promedio que estaremos en un estado particular).  Esta es una distribuci√≥n interna de estados. <br><br>  Entonces, el algoritmo de Monte Carlo para las cadenas de Markov (Markov-Chain Monte-Carlo, MCMC) es una t√©cnica para obtener una muestra del espacio de estados.  El muestreo (muestreo) significa la elecci√≥n del estado en funci√≥n de la probabilidad de selecci√≥n, teniendo en cuenta la distribuci√≥n interna. <br><br>  Dicen que la probabilidad de estar en un estado es proporcional * a una determinada funci√≥n de costo que proporciona una "estimaci√≥n" del estado actual en el que se encuentra el sistema.  Se cree que si los costos son bajos, entonces la probabilidad de estar en este estado es alta, y esta relaci√≥n es mon√≥tona.  La funci√≥n de costo se define de la siguiente manera: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.376ex" height="2.66ex" viewBox="0 -832 1884 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-28" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="1149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-29" x="1494" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-3"> R (i) </script></p><br>  Nota: No estoy seguro si la palabra "proporcional" se usa correctamente, porque la relaci√≥n no es necesariamente lineal. <br><br>  ¬°Entonces una muestra de la distribuci√≥n estatal devolver√° una configuraci√≥n con bajos costos (o una buena "estimaci√≥n") con una mayor probabilidad! <br><br>  Incluso con un espacio de estado extremadamente grande (posiblemente infinito, pero "infinitamente contable"), independientemente de la complejidad del sistema, el algoritmo MCMC encontrar√° una soluci√≥n con bajos costos si le damos suficiente tiempo para converger. <br><br>  Hacer tal estudio del espacio de estado es una t√©cnica est√°ndar de optimizaci√≥n estoc√°stica y tiene muchas aplicaciones en √°reas como el aprendizaje autom√°tico. <br><br><h3>  Distribuci√≥n de Gibbs </h3><br>  Nota: si esta secci√≥n no le resulta clara, puede omitirla de manera segura.  A√∫n puede aprovechar la implementaci√≥n del sistema. <br><br>  Despu√©s de determinar los costos de una posible afecci√≥n, ¬øc√≥mo determinamos la probabilidad de esta afecci√≥n? <br><br>  Soluci√≥n: La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">distribuci√≥n de Gibbs</a> es la distribuci√≥n de la entrop√≠a m√°xima para un conjunto dado de restricciones. <br><br>  En esencia, esto significa que si establecemos muchas restricciones en las probabilidades del sistema, entonces la distribuci√≥n de Gibbs crear√° la "menor cantidad de suposiciones" sobre la forma de la distribuci√≥n. <br><br>  Nota: la distribuci√≥n de Gibbs tambi√©n es la distribuci√≥n con la menor sensibilidad a las variaciones en las restricciones (de acuerdo con la m√©trica de divergencia Kullback-Leibler). <br><br>  La √∫nica restricci√≥n que imponemos a la distribuci√≥n de estados es la funci√≥n de costo, por lo que la usamos en la distribuci√≥n de Gibbs para calcular la probabilidad de transici√≥n entre estados: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo>&amp;#x2212;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>j</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mi>R</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>T</mi></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2217;</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>Z</mi><mi>i</mi></msub></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="43.266ex" height="2.78ex" viewBox="0 -832 18628.2 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6A" x="345" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-3D" x="1556" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-65" x="2862" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-78" x="3329" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-70" x="3901" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-28" x="4405" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-2212" x="4794" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-66" x="5823" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-72" x="6373" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-61" x="6825" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-63" x="7354" y="0"></use><g transform="translate(7788,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-52" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-28" x="759" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6A" x="1149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-29" x="1561" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-2212" x="2173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-52" x="3173" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-28" x="3933" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="4322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-29" x="4668" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-54" x="12845" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-29" x="13550" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-2217" x="14162" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-66" x="15134" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-72" x="15685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-61" x="16136" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-63" x="16666" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-31" x="17099" y="0"></use><g transform="translate(17600,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="966" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo>‚àí</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>R</mi><mo stretchy="false">(</mo><mi>j</mi><mo stretchy="false">)</mo><mo>‚àí</mo><mi>R</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mi>T</mi></mrow><mo stretchy="false">)</mo><mo>‚àó</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><msub><mi>Z</mi><mi>i</mi></msub></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> P_ {ij} = \ exp (- \ frac {R (j) -R (i)} {T}) * \ frac {1} {Z_i} </script></p><br>  Donde Z es la funci√≥n de partici√≥n del conjunto de transiciones del estado i.  Este es un factor de normalizaci√≥n que garantiza que la suma de las probabilidades de transici√≥n de cualquier estado es 1. <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>Z</mi><mi>i</mi></msub><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>P</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="16.215ex" height="2.78ex" viewBox="0 -832 6981.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-5A" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="966" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-3D" x="1305" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-73" x="2611" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-75" x="3081" y="0"></use><g transform="translate(3653,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6A" x="1242" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-28" x="4924" y="0"></use><g transform="translate(5313,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-50" x="0" y="0"></use><g transform="translate(642,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMATHI-6A" x="345" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/475764/&amp;usg=ALkJrhjvXZk6Tnj2jWMUHd9dhtMRqqSBXw#MJMAIN-29" x="6592" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>Z</mi><mi>i</mi></msub><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msub><mi>m</mi><mi>j</mi></msub><mo stretchy="false">(</mo><msub><mi>P</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-5"> Z_i = \ sum_j (P_ {ij}) </script></p><br>  Tenga en cuenta que si decidimos que el siguiente estado ser√° el mismo, entonces los costos relativos son cero, es decir, la probabilidad despu√©s de la normalizaci√≥n ser√° distinta de cero (debido a la forma de la distribuci√≥n con el indicador).  Esto significa que en muchas transiciones es necesario incluir la probabilidad de estados sin cambios. <br><br>  Tambi√©n vale la pena se√±alar que la distribuci√≥n de Gibbs est√° parametrizada por la "temperatura computacional" T. <br><br>  Una de las ventajas clave de usar probabilidades en el estudio del espacio de estado es que el sistema puede realizar transiciones a estados m√°s caros (ya que tienen una probabilidad de transici√≥n distinta de cero), convirtiendo el algoritmo en un m√©todo de optimizaci√≥n "no codicioso". <br><br>  Tenga en cuenta que a medida que la temperatura tiende al infinito, la probabilidad de cualquier transici√≥n individual tiende a la unidad de tal manera que cuando el conjunto de probabilidades de todas las transiciones desde el estado se normaliza, se vuelven igualmente probables (o la distribuci√≥n de Gibbs se aproxima a la distribuci√≥n normal), ¬°a pesar de que sus costos son mayores! <br><br>  A medida que la temperatura computacional se acerca a cero, las transiciones con menores costos se vuelven m√°s probables, es decir, la probabilidad de transiciones preferidas aumenta. <br><br>  Al realizar una investigaci√≥n / optimizaci√≥n del espacio de estado, disminuimos gradualmente la temperatura.  Este proceso se llama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"recocido simulado"</a> .  Gracias a esto, al principio podemos salir f√°cilmente del m√≠nimo local, y al final podemos elegir las mejores soluciones. <br><br>  Cuando la temperatura es lo suficientemente baja, todas las probabilidades tienden a cero, ¬°con la excepci√≥n de la probabilidad de no transici√≥n! <br><br>  Esto se debe a que solo la ausencia de una transici√≥n tiene una diferencia de costo cero, es decir, estar en el mismo estado no depende de la temperatura.  Debido a la forma de la funci√≥n exponencial en T = 0, esta resulta ser la √∫nica probabilidad con un valor distinto de cero, es decir, despu√©s de la normalizaci√≥n, se convierte en unidad.  En consecuencia, nuestro sistema converger√° a un punto estable y ya no ser√° necesario un enfriamiento adicional.  Esta es una propiedad integral de la generaci√≥n de probabilidad utilizando la distribuci√≥n de Gibbs. <br><br>  ¬°El proceso de convergencia del sistema se puede ajustar cambiando la velocidad de enfriamiento! <br><br>  Si el enfriamiento es m√°s lento, entonces, como resultado, generalmente llegamos a una soluci√≥n con costos m√°s bajos (hasta cierto punto), pero a costa de m√°s pasos de convergencia.  Si el enfriamiento ocurre m√°s r√°pido, entonces es m√°s probable que el sistema en las primeras etapas caiga en la trampa de una subregi√≥n con mayores costos, es decir, obtendremos resultados "menos √≥ptimos". <br><br>  En consecuencia, el proceso de Markov no solo genera resultados aleatorios, sino que intenta generar resultados "buenos", ¬°y con alta probabilidad tendr√° √©xito! <br><br>  Por definici√≥n de funciones de costo arbitrarias, no es necesario que exista un √≥ptimo √∫nico.  Este m√©todo de optimizaci√≥n probabil√≠stica genera solo acercarse al √≥ptimo, tratando de minimizar la funci√≥n de costo, y debido al muestreo, generar√° resultados diferentes cada vez (si el generador de n√∫meros aleatorios tiene una semilla diferente). <br><br>  El proceso de muestreo en s√≠ se puede realizar utilizando el m√©todo de transformaci√≥n inversa sobre la funci√≥n de distribuci√≥n de masa de nuestro conjunto discreto de transiciones.  M√°s tarde mostrar√© c√≥mo se hace esto. <br><br><h3>  Generaci√≥n procesal </h3><br>  ¬øC√≥mo es √∫til este m√©todo para la generaci√≥n de procedimientos? <br><br>  En algunos sistemas, a menudo es dif√≠cil definir un algoritmo simple que genere buenos resultados, especialmente en el caso de sistemas complejos. <br><br>  Establecer reglas de generaci√≥n arbitrarias no solo es dif√≠cil, sino que tambi√©n est√° limitado solo por nuestra imaginaci√≥n y el procesamiento de casos l√≠mite. <br><br>  Si el sistema cumple un cierto conjunto de requisitos, entonces el uso de MCMC nos permite no preocuparnos por la selecci√≥n de un algoritmo o reglas.  En su lugar, definimos un m√©todo para generar cualquier resultado posible y elegimos conscientemente uno bueno en funci√≥n de su "evaluaci√≥n". <br><br>  Se presentan los siguientes requisitos: <br><br><ul><li>  El sistema puede estar en una configuraci√≥n de estado discreta (posiblemente infinita). </li><li>  Podemos definir transiciones discretas entre estados. </li><li>  Podemos establecer una funci√≥n de costo que estima el estado actual del sistema. </li></ul><br>  A continuaci√≥n dar√© algunos otros ejemplos en los que, en mi opini√≥n, este m√©todo se puede aplicar. <br><br><h2>  Implementaci√≥n </h2><br><h3>  Pseudoc√≥digo </h3><br>  En nuestra implementaci√≥n, queremos lograr lo siguiente: <br><br><ul><li>  Establece el estado del sistema. </li><li>  Establezca todas las transiciones posibles al siguiente estado. </li><li>  Calcule los costos del estado actual. </li><li>  Calcule los costos de todos los estados siguientes posibles (o un subconjunto de ellos). </li><li>  Usando la distribuci√≥n de Gibbs, calcule la probabilidad de transiciones. </li><li>  Muestra de transiciones (muestra) usando probabilidades. </li><li>  Realice una transici√≥n muestreada. </li><li>  Reduce la temperatura computacional. </li><li>  Repita los pasos hasta obtener resultados satisfactorios. </li></ul><br>  En forma de pseudoc√≥digo, el algoritmo MCMC es el siguiente: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// MCMC    T = 200; //     State s = initialState(); Transitions t[n] = {...} //n   thresh = 0.01; //  ( ) // ,      while(T &gt; thresh){ //    curcost = costfunc(s); newcost[n] = {0}; // newcost   0 probability[n] = {0}; //     0 //  for(i = 0; i &lt; n; i++){ newcost[i] = costfunc(doTransition(s, t[i])); probability[i] = exp(-(newcost[i] - curcost)/T); } //  probability /= sum(probability); //  sampled = sample_transition(t, probability); //  s = doTransition(s, sampled); //  T *= 0.975; }</span></span></code> </pre> <br><h3>  Generaci√≥n de edificios en 3D </h3><br><h4>  Espacio de Estado y Transiciones </h4><br>  Para generar edificios en 3D, genero muchas habitaciones con el volumen especificado por el cuadro delimitador. <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Volume</span></span></span><span class="hljs-class">{</span></span> <span class="hljs-comment"><span class="hljs-comment">//   glm::vec3 a; glm::vec3 b; void translate(glm::vec3 shift); int getVol(); }; //   int Volume::getVol(){ return abs((bx-ax)*(by-ay)*(bz-az)); } //    void Volume::translate(glm::vec3 shift){ a += shift; b += shift; }</span></span></code> </pre> <br>  Si genero n habitaciones, el estado del sistema es la configuraci√≥n de los cuadros delimitadores en el espacio 3D. <br><br>  ¬°Debe tenerse en cuenta que las configuraciones posibles para estos vol√∫menes son infinitas, pero infinitamente infinitas (se pueden enumerar en una cantidad de tiempo infinita)! <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//  (  !) std::vector&lt;Volume&gt; rooms; // N  for(int i = 0; i &lt; n; i++){ //  Volume x; xa = glm::vec3(0); xb = glm::vec3(rand()%4+5); //   //  . rooms.push_back(x); } //...</span></span></code> </pre> <br>  Muchas transiciones posibles ser√°n un cambio de habitaciones en una de las seis direcciones del espacio por un paso, incluida la ausencia de una transici√≥n: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//... //   std::array&lt;glm::vec3, 7&gt; moves = { glm::vec3( 0, 0, 0), //   ! glm::vec3( 1, 0, 0), glm::vec3(-1, 0, 0), glm::vec3( 0, 1, 0), glm::vec3( 0,-1, 0), glm::vec3( 0, 0, 1), glm::vec3( 0, 0,-1), }; //...</span></span></code> </pre> <br>  Nota: ¬°es importante que mantengamos el sistema capaz de permanecer en su estado actual! <br><br><h4>  Funci√≥n de costo </h4><br>  Quer√≠a que los vol√∫menes en el espacio 3D se comportaran como "imanes", es decir: <br><br><ul><li>  Si sus vol√∫menes se cruzan, entonces esto es malo. </li><li>  Si sus superficies se tocan, entonces esto es bueno. </li><li>  Si no se tocan en absoluto, entonces esto es malo. </li><li>  Si tocan el suelo, est√° bien. </li></ul><br>  Para dos cuboides en el espacio 3D, podemos definir f√°cilmente un cuadro delimitador: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">Volume </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">boundingBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Volume v1, Volume v2)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   Volume bb; //   bb.ax = (v1.ax &lt; v2.ax)?v1.ax:v2.ax; bb.ay = (v1.ay &lt; v2.ay)?v1.ay:v2.ay; bb.az = (v1.az &lt; v2.az)?v1.az:v2.az; //   bb.bx = (v1.bx &gt; v2.bx)?v1.bx:v2.bx; bb.by = (v1.by &gt; v2.by)?v1.by:v2.by; bb.bz = (v1.bz &gt; v2.bz)?v1.bz:v2.bz; return bb; }</span></span></code> </pre> <br>  Usando el cuadro delimitador de vol√∫menes, podemos calcular un vector 3D que me da informaci√≥n sobre la intersecci√≥n de dos vol√∫menes. <br><br>  Si la longitud del paralelep√≠pedo a lo largo de un lado es mayor que la suma de las longitudes de dos vol√∫menes a lo largo de este lado, entonces desde este lado no se tocan.  Si son iguales, entonces las superficies se tocan, y si es menor, entonces los vol√∫menes se cruzan. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//    3  glm::vec3 overlapVolumes(Volume v1, Volume v2){ //      Volume bb = boundingBox(v1, v2); //  glm::vec3 ext1 = glm::abs(v1.b - v1.a); // v1  3  glm::vec3 ext2 = glm::abs(v2.b - v2.a); // v2  3  glm::vec3 extbb = glm::abs(bb.b - bb.a); //   //  return ext1 + ext2 - extbb; }</span></span></code> </pre> <br>  Este c√≥digo se usa para calcular la cantidad de cantidades para las que formo una cantidad ponderada, que finalmente se usa como costo. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">volumeCostFunction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;Volume&gt; rooms)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">// int metric[6] = { 0, //   0, //   0, //     0, //     0, // ,   0};//    int weight[6] = {2, 4, -5, -5, -5, 5}; //    for(unsigned int i = 0; i &lt; rooms.size(); i++){ //     for(unsigned int j = 0; j &lt; rooms.size(); j++){ //    ,  . if(i == j) continue; //    . glm::vec3 overlap = overlapVolumes(rooms[i], rooms[j]); //   glm::vec3 posOverlap = glm::clamp(overlap, glm::vec3(0), overlap); metric[0] += glm::abs(posOverlap.x*posOverlap.y*posOverlap.z); //   //   glm::vec3 negOverlap = glm::clamp(overlap, overlap, glm::vec3(0)); metric[1] += glm::abs(negOverlap.x*negOverlap.y*negOverlap.z); //   //   if(overlap.y == 0){ metric[2] += overlap.x*overlap.z; } //   (X) if(overlap.x == 0){ //      0,   , .. overlap.z = 0 metric[3] += overlap.z*overlap.y; } //   (Z) if(overlap.z == 0){ //      0,   , .. overlap.x = 0 metric[4] += overlap.x*overlap.y; } } //  ,   -   . if(rooms[i].ay == 0){ //  ,  ,    . metric[4] += rooms[i].ax*rooms[i].az; } //,     ! if(rooms[i].ay &lt; 0){ //,        if(rooms[i].by &lt; 0){ metric[5] += rooms[i].getVol(); } else{ metric[5] += abs(rooms[i].ay)*(rooms[i].bz-rooms[i].az)*(rooms[i].bx-rooms[i].ax); } } } // Metric * Weights return metric[0]*weight[0] + metric[1]*weight[1] + metric[2]*weight[2] + metric[3]*weight[3] + metric[4]*weight[4] + metric[5]*weight[5]; }</span></span></code> </pre> <br>  Nota: "volumen de intersecci√≥n positiva" significa que los vol√∫menes realmente se cruzan.  "Volumen de intersecci√≥n negativa" significa que no se tocan en absoluto y la intersecci√≥n se define por el volumen en el espacio ubicado entre los dos puntos m√°s cercanos de dos cuboides en el espacio 3D. <br><br>  Los pesos se eligen de manera tal que den prioridad a una cosa y multen a otras.  Por ejemplo, aqu√≠ reduzco severamente las habitaciones ubicadas debajo del piso, y tambi√©n aumento la prioridad de aquellos cuyas superficies se tocan (m√°s de lo que reduzco la intersecci√≥n de vol√∫menes). <br><br>  Genero costos para todos los pares de habitaciones, ignorando las habitaciones que est√°n emparejadas entre s√≠. <br><br><h4>  Encontrar una soluci√≥n de bajo costo </h4><br>  La convergencia se realiza como se describe en el pseudoc√≥digo.  Al hacer la transici√≥n, solo me muevo de una habitaci√≥n a la vez.  Esto significa que con n habitaciones y 7 posibles transiciones, necesito calcular 7 * n probabilidades, y selecciono de todas ellas, moviendo solo esa habitaci√≥n, que es <em>probablemente la</em> m√°s preferible. <br><br><pre> <code class="cpp hljs"> <span class="hljs-comment"><span class="hljs-comment">//  float T = 250; while(T &gt; 0.1){ //   std::vector&lt;std::array&lt;double, moves.size()&gt;&gt; probabilities; //   () int curEnergy = volumeCostFunction(rooms); //      ... for(int i = 0; i &lt; n; i++){ //    std::array&lt;double, moves.size()&gt; probability; //      ,     for(unsigned int m = 0; m &lt; moves.size(); m++){ //        . rooms[i].translate(moves[m]); //      ! probability[m] = exp(-(double)(volumeCostFunction(rooms) - curEnergy)/T); //   rooms[i].translate(-moves[m]); } //       probabilities.push_back(probability); } //  ( ) double Z = 0; for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ Z += probabilities[i][j]; } } //  for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ probabilities[i][j] /= Z; } } //    (CDF) ( ) std::vector&lt;double&gt; cdf; for(unsigned int i = 0; i &lt; probabilities.size(); i++){ for(unsigned int j = 0; j &lt; probabilities[i].size(); j++){ if(cdf.empty()) cdf.push_back(probabilities[i][j]); else cdf.push_back(probabilities[i][j] + cdf.back()); } } //      std::random_device rd; std::mt19937 e2(rd()); std::uniform_real_distribution&lt;&gt; dist(0, 1); double uniform = dist(e2); int sampled_index = 0; //   CDF for(unsigned int i = 0; i &lt; cdf.size(); i++){ //    ,   ... if(cdf[i] &gt; uniform){ sampled_index = i; break; } } //     int _roomindex = sampled_index/moves.size(); int _moveindex = sampled_index%moves.size(); //  rooms[_roomindex].translate(moves[_moveindex]); // T T *= 0.99; // !!! } //!! //...</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El muestreo se realiza mediante la formaci√≥n de una funci√≥n de distribuci√≥n acumulativa sobre la funci√≥n de distribuci√≥n de masa de todas las transiciones posibles; esta operaci√≥n se llama "muestreo de transformaci√≥n inversa". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto se logra al generar la suma acumulativa de las probabilidades de transici√≥n, lo que nos da la funci√≥n de distribuci√≥n acumulativa (CDF). Para el muestreo, generamos una variable aleatoria con una distribuci√≥n uniforme entre 0 y 1. Como el primer elemento del CDF es cero y el √∫ltimo, solo necesitamos encontrar "en qu√© √≠ndice de la matriz CDF est√° nuestra variable muestreada con distribuci√≥n uniforme", y esto ser√° √≠ndice de transici√≥n muestreado. Aqu√≠ hay una ilustraci√≥n:</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/960/9fe/3cd/9609fe3cdc3a514c34ed2d8e128d8629.png"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En lugar de una funci√≥n continua, puede haber pasos discretos. </font><font style="vertical-align: inherit;">M√°s detalles se pueden leer </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Adem√°s, ¬°tengo datos de volumen de sala en espacio 3D! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los uso para generar un "esquema" usando la clase blueprint, aplicando un tema a datos masivos conocidos. </font><font style="vertical-align: inherit;">Entonces las casas tienen su apariencia. </font><font style="vertical-align: inherit;">La clase blueprint se describe en el art√≠culo anterior [ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] ([ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">traducci√≥n</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ] en Habr√©). </font><font style="vertical-align: inherit;">Para la generaci√≥n completa de una casa a partir de estos vol√∫menes, consulte el c√≥digo fuente.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Resultados </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Los resultados para un m√©todo tan generalizado son bastante buenos. </font><font style="vertical-align: inherit;">Lo √∫nico que tuve que configurar fue la prioridad correcta y los pesos de penalizaci√≥n en la funci√≥n de costo.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/152/06b/acc/15206bacc91b6635a0f286fa21998363.gif" width="562" height="562"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algunos ejemplos de generaci√≥n de edificios usando este algoritmo y el tema aplicado a ellos.</font></font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/62d/1ee/92c/62d1ee92c2f422d79c27c14532346855.gif"></div><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vista lateral (otros edificios). </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La convergencia en s√≠ misma es muy r√°pida, especialmente para un peque√±o n√∫mero de habitaciones (3-5), porque calcular cuadros delimitadores y estimar la funci√≥n de costo es muy simple. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En la versi√≥n actual, las casas no tienen puertas y ventanas, pero esto es m√°s una cuesti√≥n de interpretar datos de volumen 3D, en lugar de una tarea para el algoritmo MCMC. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A veces, el m√©todo da resultados feos, ya que este es un proceso estoc√°stico, por lo que antes de colocar un edificio en el mundo, debe verificar su correcci√≥n, especialmente si la funci√≥n de costo no es muy confiable. </font><font style="vertical-align: inherit;">Sospecho que la fealdad ocurre principalmente en los primeros pasos cuando la temperatura es alta. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Por lo general, los defectos aparecen como habitaciones o habitaciones separadas del edificio. </font><font style="vertical-align: inherit;">colgando en el aire (sobre pilotes altos).</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Extensiones y otros sistemas. </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Obviamente, mi t√©cnica con vol√∫menes 3D es f√°cil de transferir al mundo 2D simplemente reduciendo la dimensi√≥n de la tarea en uno. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es decir, se puede usar para tareas como la generaci√≥n de procedimientos de mazmorras o salas en juegos 2D con una vista superior: la conexi√≥n de salas entre s√≠ utiliza una funci√≥n de costo similar a la descrita anteriormente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una posible forma de hacer que la generaci√≥n sea m√°s interesante es generar primero un gr√°fico de habitaciones, cada una de las cuales tiene su propio tipo, y luego establecer una funci√≥n de costo que estimule la conexi√≥n de habitaciones conectadas en el gr√°fico en superficies f√≠sicas.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El gr√°fico en s√≠ se puede generar utilizando el algoritmo MCMC, donde la creaci√≥n y destrucci√≥n de conexiones entre habitaciones se considerar√°n transiciones separadas que estimulan las conexiones entre habitaciones de ciertos tipos (las habitaciones tienen m√°s probabilidades de conectarse a los corredores y menos al medio ambiente, etc.). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Otras posibles aplicaciones:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Generaci√≥n de laberintos; </font><font style="vertical-align: inherit;">los costos se establecen en funci√≥n de la tortuosidad del laberinto, y las transiciones son la colocaci√≥n / eliminaci√≥n de paredes o pasillos.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Redes de carreteras, instalaci√≥n y destrucci√≥n de conexiones entre nodos del gr√°fico en funci√≥n de la distancia, el terreno u otros factores utilizados como costos. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ¬°Probablemente muchos otros! </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Una nota interesante: el recocido simulado y los algoritmos MCMC se pueden usar para tareas como el "problema del vendedor ambulante", el famoso problema NP-hard. </font><font style="vertical-align: inherit;">El estado del sistema es una ruta, las transiciones pueden estar cambiando los nodos de la ruta y los costos pueden ser la distancia total.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Solicitud de bots de tareas </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que gracias a este sistema de tareas, los bots puedan crear su propio conocimiento en el futuro de acuerdo con sus necesidades. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Aqu√≠ hay un video de c√≥mo el bot construye una casa generada por este algoritmo:</font></font><br><br><div class="oembed"><div><div style="left: 0; width: 100%; height: 0; position: relative; padding-bottom: 56.25%;"><video controls="" style="top: 0; left: 0; width: 100%; height: 100%; position: absolute;">  Su navegador no admite video HTML5. <source src="http://weigert.vsos.ethz.ch/wp-content/uploads/2019/10/bot_the_builder3.mp4" type="video/mp4"></video></div></div></div><br> <i>      ( ,     ).    .        (   )     .   ,    .            ,       .    - ,     , .</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/475764/">https://habr.com/ru/post/475764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../475750/index.html">Transferencia de conocimiento y traducci√≥n autom√°tica neuronal en la pr√°ctica</a></li>
<li><a href="../475754/index.html">Pantalones cortos sobre Scrum</a></li>
<li><a href="../475756/index.html">Food Design Digest Octubre 2019</a></li>
<li><a href="../475758/index.html">Niveles de suscripci√≥n renovables autom√°ticamente en la aplicaci√≥n iOS</a></li>
<li><a href="../475760/index.html">Desarrolladores junior: por qu√© los contratamos y c√≥mo trabajamos con ellos</a></li>
<li><a href="../475768/index.html">Kotlin: ¬øC√≥mo es una gran opci√≥n para el desarrollo de aplicaciones de Android?</a></li>
<li><a href="../475770/index.html">Universidad de Stanford - Visita y revisi√≥n</a></li>
<li><a href="../475772/index.html">6 puntos de aplicaci√≥n para el internet industrial de las cosas</a></li>
<li><a href="../475774/index.html">"Estas son reglas est√∫pidas que molestan a todos": discusi√≥n sobre pr√°cticas de campo de contrase√±a</a></li>
<li><a href="../475776/index.html">H√°galo usted mismo para tres guitarras</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>