<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚡 💓 👨‍🏭 La representación de texto te odia 🗓️ 👨🏿‍🤝‍👨🏼 🤞🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tabla de contenidos 

- 1. Terminología 
- 2. ¿El estilo, el diseño y la forma dependen el uno del otro? 
- 3. El texto no es caracteres separados 3.1...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>La representación de texto te odia</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/469529/"><div class="spoiler">  <b class="spoiler_title">Tabla de contenidos</b> <div class="spoiler_text"><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">1. Terminología</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2. ¿El estilo, el diseño y la forma dependen el uno del otro?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">3. El texto no es caracteres separados</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">3.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Texto superpuesto</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">3.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El estilo puede cambiar la ligadura</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">4. Emoji rompe el color y el estilo</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">5. Alisar es el infierno</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">5.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Las compensaciones de subpíxeles rompen la caché de glifos</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">5.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los subpíxeles de suavizado no pueden ser compuestos</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6. Esotérico</a> <br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6.1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Las fuentes pueden contener SVG</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6.2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los personajes pueden ser muy grandes</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6.3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">La selección no es un marco, pero el texto va en todas las direcciones.</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6.4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">¿Cómo escribir lo que es imposible escribir?</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6.5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El estilo es parte de la fuente (a menos que no lo sea)</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">6.6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sin representación de texto perfecta</a> </li></ul></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">7. Enlaces adicionales</a> </li></ul></div></div><br>  Representación de texto: ¿qué tan complicado puede ser?  ¡Resulta ser increíblemente desafiante!  Que yo sepa, literalmente ningún sistema muestra el texto "perfectamente".  En algún lugar mejor, en algún lugar peor. <br><br>  Suponga que desea texto arbitrario con fuentes arbitrarias, colores y estilos, con soporte de ajuste de línea y resaltado de texto.  De hecho, estos son los requisitos mínimos para la visualización correcta de texto complejo, una ventana de terminal, una página web, etc. <br><br>  En general, digamos de inmediato: no hay respuestas correctas consecutivas, todo es mucho más importante de lo que piensas y todo afecta a todo lo demás. <br><br>  Discutiremos temas que no están unidos en un solo concepto, estos son solo problemas que tuve que enfrentar durante varios años de trabajo en la representación de texto en Firefox.  Por ejemplo, no discutiremos con demasiado detalle los problemas de segmentación de texto o la administración de varias bibliotecas de texto para una plataforma en particular, ya que no estoy demasiado interesado en esto. <br><a name="habracut"></a><br><a name="1"></a><h1>  1. Terminología </h1><br>  La naturaleza del texto es compleja, y el inglés transmite mal todos los matices.  Para este documento, intentaré cumplir con los siguientes términos.  Tenga en cuenta que estas palabras no son "correctas", simplemente las encuentro útiles para transmitir conceptos clave a hablantes nativos de inglés que no tienen experiencia en lingüística. <br><br>  Personajes: <br><br><ul><li>  Escalar (escalar): escalar Unicode, la "unidad más pequeña" en Unicode (también es un punto de código). <br></li><li>  Carácter: un grupo de grafemas Unicode extendido (EGC), la "unidad más grande" en Unicode (que podría consistir en varios escalares). <br></li><li>  Glifo (glifo): la unidad atómica de representación dada en una fuente.  Suele tener un identificador único en la fuente. <br></li><li>  Ligadura: un glifo que consta de varios escalares y potencialmente incluso varios caracteres (los hablantes nativos pueden representar una ligadura como varios caracteres, pero para una fuente es solo un carácter). <br></li><li>  Emoji: glifo "a todo color". <img src="https://habrastorage.org/webt/bz/bc/0l/bzbc0lnl6kzkaygl4g6kdufbtpo.png" width="70"></li></ul><br>  Fuentes <br><br><ul><li>  Fuente: un documento que asigna caracteres a glifos. <br></li><li>  Escritura / escritura (script): un conjunto de glifos que componen un determinado idioma (las fuentes, por regla general, implementan ciertos scripts). <br></li><li>  Fuente escrita a mano (escritura cursiva): cualquier fuente en la que los glifos se tocan y fluyen entre sí (por ejemplo, árabe). <br></li><li>  Color: valores RGB y alfa para las fuentes (no es necesario para algunos casos de uso, pero esto es interesante). <br></li><li>  Estilo: modificadores en negrita y cursiva para las fuentes (en implementaciones prácticas, sugerencias, alias y otras configuraciones generalmente también se proporcionan). </li></ul><br><a name="2"></a><h1>  2. ¿El estilo, el diseño y la forma dependen el uno del otro? </h1><br>  Aquí hay un breve resumen para darle una idea de cómo funciona una tubería de representación de texto típica: <br><br><ol><li>  Estilización (marcado de análisis, sistema de consulta para fuentes). <br></li><li>  Diseño (división de texto en líneas). <br></li><li>  Conformación, conformación (cálculo de glifos y sus posiciones). <br></li><li>  Rasterización de los glifos necesarios para el atlas de textura / caché). <br></li><li>  Composición (copia de glifos del atlas a la posición deseada). </li></ol><br>  Desafortunadamente, estos pasos no son tan simples como parecen. <br><br>  La mayoría de las fuentes no producen todos los glifos posibles bajo demanda.  Hay demasiados glifos, por lo que las fuentes generalmente solo implementan una letra específica.  Los usuarios finales generalmente no lo saben o no les importa, por lo que un sistema confiable debería <i>conectarse</i> en <i>cascada</i> a otras fuentes si los caracteres no están disponibles. <br><br>  Por ejemplo, aunque el marcado del siguiente texto no <i>implica</i> múltiples fuentes, es necesario para una representación adecuada en cualquier sistema: hola <img src="https://habrastorage.org/webt/s6/z5/b8/s6z5b8fxd5g525xyirad9asxejk.png" width="22">  मनी ب بسم 好.  ¡Entonces nos acercamos peligrosamente al hecho de que el paso 1 (estilización) comienza a depender del paso 3 (conformación)! <br><br>  (Alternativamente, puede adoptar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enfoque Noto</a> y usar una sola fuente Uber que contenga todos los caracteres. Aunque los usuarios no pueden configurar la fuente y no pueden proporcionar una interfaz de texto "nativa" a los usuarios en todas las plataformas. Pero supongamos que necesitan una fuente más confiable decisión). <br><br>  Del mismo modo, para el diseño debe saber cuánto espacio ocupa cada parte del texto, ¡pero esto solo se conoce después de la configuración!  ¿El paso 2 depende de los resultados del paso 3? <br><br>  Pero para dar forma, debes conocer el diseño y el estilo, por lo que parece que estamos atascados.  Que hacer <br><br>  En primer lugar, la estilización aplica trucos.  Aunque <i>realmente</i> queremos obtener glifos completos, los <i>escalares son</i> suficientes para estilizar.  Si la fuente no admite la escritura adecuada, no alegará saber nada sobre escalares de esa escritura.  Por lo tanto, puede encontrar fácilmente la "mejor" fuente de la siguiente manera: <br><br>  Para cada símbolo (EGC) en nuestro texto, interrogamos a cada fuente en la lista (cascada) si conoce todos los escalares que componen este símbolo.  Si es así, úsalos.  Si llegamos al final de la lista sin resultado, obtenemos tofu ( <img src="https://habrastorage.org/webt/qv/6w/jj/qv6wjjqmos_ob7gzmy_ogneaowy.png" width="20">  , falta indicador de glifo). <br><br>  ¡Probablemente ya hayas visto ese indicador cuando te reuniste con emoji!  Dado que algunos emojis son en realidad ligaduras de varios emojis más simples, una fuente puede indicar la compatibilidad con un personaje emitiendo solo componentes individuales.  De esta manera <img src="https://habrastorage.org/webt/vr/mr/yk/vrmrykt5b5kjdkyj8b4nabjhjac.png" width="22">  literalmente puede parecer <img src="https://habrastorage.org/webt/6m/yv/6n/6myv6nhjem72asbiysa_wzah8t4.png" width="70">  si la fuente es "demasiado antigua" para saber acerca de la nueva ligadura.  Esto también puede suceder si tiene una implementación Unicode "demasiado antigua" que no conoce el nuevo carácter, lo que obliga al sistema de estilo a aceptar una coincidencia tan parcial. <br><br>  Entonces, ahora sabemos exactamente qué fuentes usaremos, sin tener que referirnos al diseño o la forma (aunque la configuración puede cambiar nuestros colores, más sobre eso en las siguientes secciones).  ¿Podemos lidiar de manera similar con la interdependencia del diseño y la forma?  No!  Cosas como los saltos de párrafo le brindan un salto de línea difícil, ¡pero la única forma de dar forma es a través del modelado iterativo! <br><br>  Es necesario suponer que el texto se coloca en una línea y formar esta línea hasta que se agote el espacio.  En este punto, puede realizar operaciones de composición tipográfica y averiguar dónde dividir el texto y comenzar la siguiente línea.  Repita hasta que todo esté hecho. <br><br><a name="3"></a><h1>  3. El texto no es caracteres separados </h1><br>  A juzgar solo por el inglés, entonces podrías pensar que las ligaduras son una especie de absurdo extraño.  Quiero decir, ¿a quién <i>le</i> importa <i>realmente</i> que "æ" se deletrea "ae"?  Pero resulta que algunos idiomas consisten esencialmente en ligaduras.  Por ejemplo, ड् ب بسم consta de los caracteres individuales «ب ب س م.  En cualquier sistema avanzado de representación de texto (es decir, en cualquiera de los principales navegadores), estas dos líneas se verán <i>muy</i> diferentes. <br><br>  Y no: no se trata de la diferencia entre los escalares Unicode y los grupos de grafemas extendidos.  Si le pide a un sistema Unicode confiable (por ejemplo, Swift) que le dé grupos de grafemas extendidos de esta línea, ¡dará estos cinco caracteres! <br><br>  La forma del carácter depende de sus vecinos: el <b>texto no puede mostrar correctamente carácter tras carácter</b> . <br><br>  Es decir, debe usar una biblioteca de modelado.  El estándar de la industria aquí es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HarfBuzz</a> , y estas tareas son extremadamente difíciles de resolver por su cuenta.  Entonces usa HarfBuzz. <br><br><a name="3_1"></a><h3>  3.1.  Texto superpuesto </h3><br>  En las fuentes escritas a mano, los glifos a menudo se superponen para evitar costuras, y esto puede causar problemas. <br><br>  Echemos otro vistazo a मनी م منش.  ¿Se ve normal?  Ahora aumenta: <br><br><img src="https://habrastorage.org/webt/sb/u0/kv/sbu0kvn9ii-lhltb9y7pqnj67pa.png"><br><br>  Todavía parece hermoso, pero hagamos que el texto sea parcialmente transparente.  Si estás en Safari o Edge, ¡el texto puede verse bien!  Pero en Firefox o Chrome, la vista es terrible: <br><br><img src="https://habrastorage.org/webt/0m/rs/fq/0mrsfqxdecmizkckojpww0o0iju.png"><br><br>  El problema es que Chrome y Firefox están tratando de hacer <i>trampa</i> .  Formaron correctamente el texto, pero tan pronto como se encuentran con estos glifos, todavía están tratando de dibujarlos por separado.  Esto generalmente funciona bien, excepto cuando hay transparencia y superposición que produce tal atenuación. <br><br>  Una implementación "correcta" llevará el texto a una superficie temporal <i>sin</i> transparencia, y luego a la escena <i>con</i> transparencia.  Firefox y Chrome no hacen esto porque es costoso y generalmente no es necesario para los principales idiomas occidentales.  Curiosamente, realmente entienden el problema, porque procesan específicamente un script para emoji (pero volveremos a esto más adelante). <br><br><a name="3_1"></a><h3>  3.2.  El estilo puede cambiar la ligadura </h3><br>  Bien, este ejemplo lo estamos analizando <i>principalmente</i> por curiosidad acerca de cómo se puede romper el marcado, aunque no conozco ningún escenario razonable en el que realmente pueda doler.  Aquí hay dos textos con el mismo contenido pero con diferentes colores: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/450/9ef/bcd/4509efbcddabd9a36f7a77372f99a832.png"><br><br>  Así es como se ven en Safari: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cf0/1f5/057/cf01f505710b9a16186cb8671a852a08.png"><br><br>  Así es como se ven en Chrome (cuando se usa su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">nueva implementación de maqueta</a> ): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/efa/a09/2d8/efaa092d8e5df031d1f7efbe0fdc991d.png"><br><br>  Y aquí están en Firefox: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/450/9ef/bcd/4509efbcddabd9a36f7a77372f99a832.png"><br><br>  En resumen: <br><br><ul><li>  Safari es inadecuado <br></li><li>  Chrome analiza los glifos pero deja caer muchos colores <br></li><li>  Firefox analiza simultáneamente glifos y muestra colores </li></ul><br>  Creo que todos deberían estar en Firefox, ¿verdad?  Pero si te acercas, veremos que está haciendo algo muy extraño: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/516/9ce/d38/5169ced3843dcd4ab70e98c58b1929ed.png"><br><br>  ¡Simplemente dividió esta ligadura en cuatro partes iguales con diferentes colores! <br><br>  El problema es que realmente no hay una respuesta razonable sobre lo que <i>debe</i> hacerse aquí.  Dividimos la ligadura en diferentes estilos, y dado que la ligadura es, en cierto sentido, una "unidad" de renderizado, tiene sentido simplemente negarse a soportar tal separación (como la mayoría lo hace). <br><br>  Por alguna razón, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">alguien en Firefox estaba realmente entusiasmado por hacer una implementación más elegante</a> .  Su enfoque es dibujar una ligadura varias veces con máscaras óptimas y colores diferentes, ¡lo que funciona sorprendentemente bien! <br><br>  Es lógico tratar de admitir estas "ligaduras parciales": ¡solo el modelado puede saber si se mostrará una ligadura en particular, y esto depende de las fuentes del sistema, por lo que la ligadura puede aparecer donde nadie la esperaba!  Un ejemplo clásico en inglés es una ligadura æ de una fuente instalada por el usuario en el borde de un hipervínculo. <br><br>  También es bastante extraño que el inglés pueda cambiar en el medio de una palabra, pero ¿no pueden las fuentes escritas a mano? <br><br>  Ni siquiera pregunte por el código que rompe líneas con ligaduras parciales. <br><br><a name="4"></a><h1>  4. Emoji rompe el color y el estilo </h1><br>  Si muestra emojis como lo hace el sistema nativo, debe ignorar la configuración de color del texto (con la excepción de la transparencia): <br><br><img src="https://habrastorage.org/webt/cp/4d/2f/cp4d2fokoxffueesiohd1urszuu.png"><br><br>  Por lo general, los emojis tienen sus propios colores nativos, y este color puede incluso tener un significado semántico, como es el caso de los modificadores del color de la piel.  Además: ¡pueden tener varios colores! <br><br>  Hasta donde puedo decir, no había tal problema antes de los emoji, por lo que las diferentes plataformas tienen diferentes enfoques para resolver.  Algunos muestran emojis como una imagen sólida (Apple), otros como una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">serie de <i>capas</i> monocromas</a> (Microsoft). <br><br>  El último enfoque no es malo, ya que se integra bien con las canalizaciones de representación de texto existentes, "simplemente" dividiendo el glifo en una serie de glifos monocromos con los que todos están acostumbrados a trabajar. <br><br>  Sin embargo, esto significa que cuando dibuja un glifo "único", su estilo puede cambiar <i>repetidamente</i> .  También significa que el glifo "uno" puede superponerse, lo que lleva a los problemas de transparencia mencionados en la sección anterior.  Aún así, los navegadores <i>realmente</i> combinan correctamente la transparencia de las capas en emojis. <br><br>  Esta discrepancia puede explicarse de tres maneras: <br><br><ul><li>  Ya está buscando glifos de colores para procesarlos de una manera especial, por lo que es fácil para ellos elegir una ruta de diseño especial. <br></li><li>  Las fuentes escritas a mano con poca transparencia se ven un poco feas, pero los emojis se descomponen por completo y se convierten en un conjunto de caracteres ilegible, por lo que el trabajo adicional está justificado. <br></li><li>  Los desarrolladores occidentales se preocupan más por los emojis que por idiomas como el árabe y el marathi. </li></ul><br>  Elige la opción a tu gusto. <br><br>  Y, sin embargo, ¿cómo resaltar un emoticón en cursiva o en negrita?  ¿Ignorar estos estilos?  ¿Deben ser sintetizados?  Quien sabe ... <br><br>  Además, ¿estos emojis no parecen extrañamente pequeños? <br><br>  Sí, por alguna razón, un grupo de sistemas aumenta secretamente el tamaño de fuente para los emojis para que se vean mejor. <br><br><a name="5"></a><h1>  5. Alisar es el infierno </h1><br>  Los caracteres en el texto son muy pequeños y detallados.  Es muy importante que el texto sea fácil de leer.  Suena como una tarea de suavizado!  Demonios, 480p es realmente de baja resolución.  Más suavizado !!! <br><br><img src="https://habrastorage.org/webt/m9/8x/qa/m98xqayxjlpla-5bgc2rmktqpd8.png" align="right">  Entonces, hay dos tipos principales: <br><br><ul><li>  Alisado en escala de grises <img src="https://habrastorage.org/webt/sf/xr/qu/sfxrqug5y1yihdid_djblyqhhii.png" width="22"><br></li><li>  Suavizado de subpíxeles <img src="https://habrastorage.org/webt/i7/pt/mk/i7ptmkl9iwj6tve6ly5ch7dv-y0.png" width="22"></li></ul><br>  El suavizado en escala de grises es un enfoque "natural".  La idea básica es que los píxeles parcialmente recubiertos obtienen una transparencia parcial.  Durante la composición, esto hará que el píxel obtenga el tono apropiado, mejorando el detalle general. <br><br>  El término "sombras de gris" se utiliza para el color unidimensional, al igual que nuestra transparencia unidimensional (de lo contrario, los glifos se muestran en un color sólido).  Además, en una situación típica de texto negro sobre fondo blanco, el suavizado literalmente muestra sombras grises a lo largo de los bordes. <br><br>  El suavizado de subpíxeles es un truco que abusa de la colocación normal de píxeles en los monitores.  Es mucho más complicado, por lo que si está realmente interesado, tendrá que leer documentación más detallada, aquí hay una breve descripción del concepto de alto nivel. <br><br>  Los píxeles en su monitor son en realidad tres pequeñas columnas de rojo, verde y azul.  Si quieres ponerte rojo, dices "blanco negro negro".  Del mismo modo, si desea obtener un color azul, especifique "negro negro blanco".  En otras palabras, si juegas con flores, ¡puedes <i>triplicar la</i> resolución horizontal y obtener muchos más detalles! <br><br>  Se podría pensar que tal "arco iris" sería muy feo, pero en la práctica el sistema funciona bastante bien (aunque algunos no están de acuerdo con esto).  El cerebro humano ama reconocer patrones y suavizarlos.  Sin embargo, si toma una captura de pantalla del texto con suavizado de subpíxeles, verá claramente todos los colores adicionales si cambia el tamaño de la imagen o simplemente la mira en el monitor con un diseño de subpíxeles diferente.  Es por eso que las capturas de pantalla con texto a menudo se ven muy extrañas y malas. <br><br>  (En general, este sistema también significa que el color del icono puede cambiar accidentalmente su tamaño y posición percibidos, lo que es realmente molesto). <br><br>  Por lo tanto, el suavizado de subpíxeles es un hack realmente limpio que puede mejorar significativamente la inteligibilidad del texto, ¡genial!  Pero, desafortunadamente, ¡esta también es una gran astilla en el culo! <br><br>  Tenga en cuenta que los <i>cambios de glifo de subpíxeles se</i> producen en cualquier sistema de suavizado.  Siempre desea que sus glifos rasterizados se ajusten a píxeles completos, pero la rasterización en sí está diseñada para un desplazamiento específico de subpíxeles (un valor entre 0 y 1). <br><br>  Para entender esto, imagine un cuadrado negro 1x1 con suavizado en escala de grises: <br><br><ul><li>  Si su desplazamiento de subpíxeles es 0, solo sale un píxel negro durante la rasterización. <br></li><li>  Si el desplazamiento del subpíxel es 0.5, cuando está rasterizado, dos píxeles salen al 50% de gris. </li></ul><br><a name="5_1"></a><h3>  5.1.  Las compensaciones de subpíxeles rompen la caché de glifos </h3><br>  Rasterizar los glifos requiere una cantidad increíble de cálculo, por lo que es mucho mejor almacenarlos en caché en un atlas de texturas.  ¿Pero cómo almacenar en caché las texturas con desplazamientos de subpíxeles?  ¡Cada desplazamiento tiene su propia rasterización única! <br><br>  Aquí debe encontrar un compromiso entre calidad y rendimiento, y esto se puede hacer optimizando las compensaciones de subpíxeles.  Para el texto en inglés, un equilibrio razonable sería la falta de precisión vertical de subpíxeles con el desplazamiento horizontal vinculado a un cuarto de un entero.  Esto deja solo cuatro posiciones de subpíxeles, lo que aún mejora en gran medida la calidad al tiempo que mantiene un tamaño de caché razonable. <br><br><a name="5_2"></a><h3>  5.2.  Los subpíxeles de suavizado no pueden ser compuestos </h3><br>  Una buena característica del suavizado en tonos de gris es que puedes jugar libremente con él y se degrada con gracia.  Por ejemplo, si convierte una textura con texto (escala, rotación o transformación), puede volverse un poco borrosa, pero en general se verá normal. <br><br>  Si haces lo mismo con el suavizado de subpíxeles, se verá horrible.  Toda su idea es manipular los píxeles en la pantalla.  Si los píxeles de la pantalla no coinciden con los píxeles de su textura, ¡los bordes rojo y azul serán claramente visibles! <br><br>  Puede pensar que esto está "arreglado" simplemente por una nueva rasterización de glifos en una nueva ubicación.  Y, de hecho, si la conversión es estática, esto podría funcionar.  Pero si la transformación es una <i>animación</i> , empeorará aún más.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Este es realmente un error muy común del navegador: si no encuentra que la animación está sucediendo con el texto, los caracteres se </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">contraerán</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ya que cada glifo salta entre diferentes enlaces de subpíxeles con sugerencias sobre cada cuadro. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, los navegadores contienen varias heurísticas para detectar tales animaciones con el fin de forzar el suavizado de subpíxeles para esta parte de la página (e idealmente incluso para el posicionamiento de subpíxeles). Es bastante difícil implementarlo de manera confiable, porque una animación puede ser activada por un JS complejo arbitrariamente sin darle al navegador "pistas" claras.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Además, el suavizado de subpíxeles es difícil de usar en presencia de transparencia parcial. De hecho, aquí configuramos nuestros canales R, G y B para codificar tres valores de transparencia (uno para cada subpíxel), pero el texto en sí también tiene un color y un fondo, por lo que la información se pierde fácilmente. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando usamos anti-aliasing en escala de grises, tenemos un canal alfa dedicado, por lo que no se pierde nada. Por lo tanto, los navegadores usualmente usan tonos de gris para trabajar con objetos translúcidos.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">... Excepto Firefox. </font><font style="vertical-align: inherit;">Una vez más, en esta extraña organización, alguien realmente se dejó llevar e hizo algo complicado: un componente alfa. </font><font style="vertical-align: inherit;">Resulta que realmente puede componer correctamente el texto con suavizado de subpíxeles, pero esto requiere tres canales de transparencia adicionales para R, G y B. No es sorprendente que dicho suavizado duplique el consumo de memoria. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Afortunadamente, con los años, el suavizado de subpíxeles se ha vuelto menos relevante:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Las pantallas de retina no lo necesitan en absoluto. </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El diseño de subpíxeles en los teléfonos bloquea este truco (sin un trabajo serio). </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> En las versiones más recientes de MacOS, el texto de subpíxeles está deshabilitado de forma predeterminada en el nivel del sistema operativo. </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Chrome parece ser más agresivo al deshabilitar el suavizado de subpíxeles (no estoy seguro si esta es la política exacta). </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> El nuevo backend gráfico de Firefox (webrender) abandonó el componente Alpha por simplicidad. </font></font></li></ul><br><a name="6"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 6. Esotérico </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Esta parte es solo una colección de pequeñas cosas que no merecen mucha discusión. </font></font><br><br><a name="6_1"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1. </font><font style="vertical-align: inherit;">Las fuentes pueden contener SVG</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eso apesta. </font><font style="vertical-align: inherit;">Estas fuentes son proporcionadas principalmente por Adobe, porque hace algún tiempo entraron en el SVG bastante bien. </font><font style="vertical-align: inherit;">A veces puede simplemente ignorar partes de SVG (creo que la fuente Source Code Pro técnicamente contiene algunos glifos SVG, pero en la práctica en realidad no los usan los sitios web), pero en general tendrá que implementar el soporte SVG para admitir formalmente todas las fuentes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¿Y has oído hablar de las </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fuentes animadas SVG</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ? </font><font style="vertical-align: inherit;">No?</font></font> Bueno<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Creo que están rotos o no se implementan en todas partes (Firefox los apoyó accidentalmente por un tiempo debido a algún tipo de desarrollador entusiasta). </font></font><br><br><a name="6_2"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2. </font><font style="vertical-align: inherit;">Los personajes pueden ser muy grandes</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si desea satisfacer ingenuamente la solicitud de un usuario de una fuente muy grande (o un nivel de zoom muy grande), entonces encontrará problemas extremos de administración de memoria para un atlas de glifos de este tamaño, ya que cada carácter puede ser más grande que toda la pantalla. </font><font style="vertical-align: inherit;">Hay varias formas de manejar esto:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Negarse a dibujar un glifo (usuario triste). </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rasterice el glifo en un tamaño más pequeño y aumente la escala durante la composición (esto es fácil, pero las formas se vuelven borrosas a lo largo de los bordes). </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Rasterice el glifo directamente en la superficie después de la composición (difícil, potencialmente costoso). </font></font></li></ul><br><a name="6_3"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3. </font><font style="vertical-align: inherit;">La selección no es un marco, pero el texto va en todas las direcciones.</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La gente generalmente sabe que la dirección principal del texto puede ser de izquierda a derecha (inglés), de derecha a izquierda (árabe) o de arriba a abajo (japonés). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entonces, aquí hay un texto divertido para ti:</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola a todos </font></font><font color="purple"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">بسم الله لا</font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bip bip !!</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Si selecciona texto en el escritorio con el mouse de izquierda a derecha, entonces la selección se vuelve intermitente y de alguna manera se tuerce extrañamente en el medio. </font><font style="vertical-align: inherit;">Esto se debe a que mezclamos texto en una línea de izquierda a derecha y de derecha a izquierda, lo que sucede todo el tiempo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Primero, la selección a la derecha aumenta la selección, pero luego la disminuye hasta que de repente comienza a aumentar nuevamente. </font><font style="vertical-align: inherit;">Esto es realmente correcto: la selección simplemente permanece continua </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en la línea real</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Por lo tanto, puede copiar correctamente un fragmento de texto. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debe tener esto en cuenta en su código para resaltar el texto, así como en el algoritmo de salto de línea para el diseño. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero eso no es todo. </font></font><br><img src="https://habrastorage.org/webt/h5/vm/ee/h5vmee428zjgkmlcs9syoyhzte0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que no tengas que lidiar con esas cosas.</font></font><br><br><a name="6_4"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4. </font><font style="vertical-align: inherit;">¿Cómo escribir lo que es imposible escribir?</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cuando no hay caracteres en la fuente, sería bueno informar al usuario al respecto. El glifo "tofu" está destinado a esto. Simplemente puede dibujar un tofu (rectángulo) vacío y limitarse a eso. Pero si desea proporcionar información realmente útil, puede escribir el valor del carácter que falta para simplificar la depuración. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pero espera, ¿usamos texto para explicar que no podemos generar el texto?</font></font> Hm. <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Puede decir que debe haber una fuente básica en el sistema que siempre muestre los caracteres 0-9 y AF, pero esto es una suposición para los débiles. </font><font style="vertical-align: inherit;">Si el usuario realmente destruyó sus herramientas con sus herramientas, entonces Firefox ofrece una salida: ¡una micro fuente! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dentro de Firefox hay una pequeña matriz codificada de pixel art de un bit con un pequeño atlas de exactamente estos 16 caracteres. </font><font style="vertical-align: inherit;">Entonces, al dibujar tofu, puede reenviar estos caracteres sin preocuparse por las fuentes.</font></font><br><br><img src="https://habrastorage.org/webt/us/by/n1/usbyn1o8olhyj82uy1b5ljw_pzg.png"><br><br><a name="6_5"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5. </font><font style="vertical-align: inherit;">El estilo es parte de la fuente (a menos que no lo sea)</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Las fuentes de alta calidad vienen inicialmente con estilos como </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cursiva</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> y </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">negrita</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , ya que no existe una forma algorítmica simple para mostrar estos efectos de manera hermosa. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sin embargo, algunas fuentes vienen sin estos estilos, por lo que aún necesita una forma algorítmica simple para hacer estos efectos. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La detección y el procesamiento exactos de los estilos dependen en gran medida del sistema y están fuera de mi área de especialización, por lo que no puedo explicarlo bien. Simplemente profundizaría en </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">el código de manejo de fuentes en Webrender</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">En cualquier caso, necesita un </font><font style="vertical-align: inherit;">respaldo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sintético</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Afortunadamente, la implementación es bastante simple: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cursiva sintética: inclina cada glifo.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Negrita sintética: dibuje cada glifo varias veces con un ligero desplazamiento en la dirección del texto. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Honestamente, ¡estos enfoques funcionan bastante bien! </font><font style="vertical-align: inherit;">Pero los usuarios pueden notar que todo parece "incorrecto". </font><font style="vertical-align: inherit;">Por lo tanto, puede hacerlo mejor si hace un esfuerzo.</font></font><br><br><a name="6_6"></a><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.6. </font><font style="vertical-align: inherit;">Sin representación de texto perfecta</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Cada plataforma ha tenido sus errores, optimizaciones y peculiaridades durante tanto tiempo que se han convertido en estética. </font><font style="vertical-align: inherit;">Por lo tanto, incluso si cree firmemente que ciertas cosas son ideales o importantes, siempre habrá un gran grupo de usuarios con diferentes preferencias. </font><font style="vertical-align: inherit;">Un sistema robusto de visualización de texto admite estas diversas preferencias (al elegir valores predeterminados razonables). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sus configuraciones deben tener en cuenta el sistema del usuario, las fuentes específicas, las aplicaciones específicas y los textos específicos. </font><font style="vertical-align: inherit;">También debe intentar hacer coincidir el "aspecto" nativo de cada plataforma (tales peculiaridades). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esto incluye:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Capacidad para deshabilitar el suavizado de subpíxeles (algunos realmente lo odian). </font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La capacidad de desactivar </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cualquier</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suavizado (sí, la gente hace esto).</font></font><br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Una tonelada de propiedades específicas de plataforma / formato, como sugerencias, suavizado, variaciones, gamma, etc. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">También significa que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">las bibliotecas de texto nativas deben usarse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para que coincida con la estética de cada sistema (Core Text, DirectWrite y FreeType en sus respectivas plataformas).</font></font><br><br><a name="7"></a><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 7. Enlaces adicionales </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Aquí hay algunos artículos más sobre la pesadilla de renderizado de texto: </font></font><br><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Windows tendrá que parchear algunas fuentes TrueType para que funcionen"</font></font></a> <br></li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Hay tantos espacios de coordenadas en Firefox".</font></font></a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/469529/">https://habr.com/ru/post/469529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../469515/index.html">Preparando la aplicación para Istio</a></li>
<li><a href="../469521/index.html">Compré una motocicleta para andar, no para caer</a></li>
<li><a href="../469523/index.html">Dependencia del rendimiento del código en el contexto de la declaración de variables en JavaScript</a></li>
<li><a href="../469525/index.html">Sistema de control automatizado para una excavadora minera.</a></li>
<li><a href="../469527/index.html">¿El intercomunicador es un oído espía?</a></li>
<li><a href="../469531/index.html">"Comparar lenguajes de programación en una base mejor-peor es una ocupación completamente idiota".</a></li>
<li><a href="../469533/index.html">Problemas y amenazas de la identificación biométrica.</a></li>
<li><a href="../469537/index.html">Conociendo a Swift con Snake</a></li>
<li><a href="../469541/index.html">Montaje y despliegue de los mismos microservicios con werf y GitLab CI</a></li>
<li><a href="../469543/index.html">Redis Scaling y Failover para servicios DirectumRX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>