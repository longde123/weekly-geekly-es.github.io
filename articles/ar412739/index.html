<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐ผโ๐ง ๐ฉโ๐ ๐ฒ ููุจ ุงูุฑุงุนู ๐๏ธ ๐ ๐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sheepdog ูู ูุธุงู ูุงุจู ููุชุทููุฑ ูููุฑ ุฃุฌูุฒุฉ ูุชูุฉ ููุฒุนุฉ ููุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ. ุจุฏุฃ ุชุทููุฑู ูู ุนุงู 2009 ูู ูุจู ุงููุทูุฑูู ูู ุดุฑูุฉ Nippon Telegraph and Telephone ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููุจ ุงูุฑุงุนู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412739/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/ru/g3/9i/rug39i1kkn-c4ack--isbvvzjma.jpeg"></p><br><p style=";text-align:right;direction:rtl"> <strong>Sheepdog</strong> ูู ูุธุงู ูุงุจู ููุชุทููุฑ ูููุฑ ุฃุฌูุฒุฉ ูุชูุฉ ููุฒุนุฉ ููุฃุฌูุฒุฉ ุงูุงูุชุฑุงุถูุฉ.  ุจุฏุฃ ุชุทููุฑู ูู ุนุงู 2009 ูู ูุจู ุงููุทูุฑูู ูู ุดุฑูุฉ <em>Nippon Telegraph and Telephone Corporation ุงููุงุจุงููุฉ</em> .  <strong>Sheepdog</strong> ูู ุชุทุจูู ููุชูุญ ุงููุตุฏุฑ ุจููุฌุจ ุชุฑุฎูุต GPL2.  ุณูููู ุงูุฅุตุฏุงุฑ ุงูุฃุญุฏุซ 0.9.3 ุ ุงูุฐู ุชู ุฅุตุฏุงุฑู ูู ููููุจุฑ 2015 ุ ูู ุฅุฑุซ ุงูุฅุตุฏุงุฑ 1.0 ุ ููู ููุงุณุจ ููุงุณุชุฎุฏุงู ุงูุชุฌุงุฑู <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1</a></sup> <sup><a name="cite_ref-1"></a></sup>  .  <em>(ุฃุตุจุญ ุจุงููุนู - ุชูุฑูุจุง ููู.)</em> </p><br><blockquote style=";text-align:right;direction:rtl">  ูู ุฃุฌู ุงูุงูุชูุงู ุ ุชู ุฅุตุฏุงุฑ ุงูุฅุตุฏุงุฑ ุงูุฃูู (0.1.0) ูู ูุจู ุงููุทูุฑูู ูู ุฃุบุณุทุณ 2010 - ููู ุงูููุช ููุณู ุ ุชู ุชุถููู ุฏุนู ููุจ ุงูุฑุงุนู ุนูู ุงูููุฑ ูู ูุฑุน ุชุทููุฑ QEMU ุงูุฑุฆูุณู. <a name="habracut"></a><br>  ุงูุงุฎุชุจุงุฑุงุช ุงูุฃููู ุนูู ููุจ ุงูุฑุงุนู ุงูุฐู ุฃุฌุฑูุชู ูู ููููุจุฑ 2011 <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">2</a></sup> <sup><a name="cite_ref-2"></a></sup>  ููุงูุช ุงููุชุงุฆุฌ ุฌูุฏุฉ ูุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ.  ููุน ุฐูู ุ <strong>ูุง ูุฒุงู</strong> ูุธุงู <strong>ุงูุฑุงุนู</strong> ูุนุงูู ูู ูุดุงูู ูู ุงุณุชุนุงุฏุฉ ุงูุนูุฏุฉ ุงูุณุงูุทุฉ.  ุฑุจูุง ุชู ุญู ูุฐู ุงููุดููุฉ ูุฑูุจูุง ุ ุญูุซ ุฃู ุชุทููุฑ ุงูุชุทุจูู ูุดุท ุฌุฏูุง ุ ูููู ูู ุฐูู ุงูููุช ุงุณุชุฎุฏูุช ุญููุง ูุฎุชูููุง. </blockquote><br><h1 id="vozmozhnosti" style=";text-align:right;direction:rtl">  ุงูุงุญุชูุงูุงุช </h1><br><p style=";text-align:right;direction:rtl">  ุชู ูุตู ูุจุฏุฃ ุนูู <strong>Sheepdog</strong> ุจุดูู ุฌูุฏ ููุบุงูุฉ ูู ุงูุนุฑุถ ุงูุชูุฏููู ุงูููุดูุฑ ุ ูุฐูู ุณุฃูุชุตุฑ ุนูู ูุธุฑุฉ ุนุงูุฉ ููุฌุฒุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฅูู ูุงุจู ููุชุทููุฑ</strong> <br>  ูููู ุฒูุงุฏุฉ ุญุฌู ุงููุชูุฉ ุจุดูู ุชุนุณูู ุนูู ูุณุชูู ุงูุนูุฏุฉ ุ ููุง ูุฒูุฏ ูู ุณุนุฉ ููุณุงุญุฉ ุงูุจูุงูุงุช ุฃุซูุงุก ุงูุชุดุบูู ุ ููู ุฎูุงู ุฒูุงุฏุฉ ุนุฏุฏ ุงูุนูุฏ.  ูููุง ุฒุงุฏ ุนุฏุฏ ุงูุนูุฏ ุ ุฒุงุฏ ุฃุฏุงุก ูุญุฑู VDI I / O. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฅูู ุจุณูุท</strong> <br>  ุนูู ุนูุณ ุงูุฃูุธูุฉ ุงูุฃุฎุฑู ุ ูุซู CEPH ุ ูุง ูุนูู <strong>Sheepdog</strong> ูุจุงุดุฑุฉ ูุน ูุธุงู ุงููููุงุช ููููู ูุนูู ูุน ูุชู ุฐุงุช ุญุฌู ุซุงุจุช ุ ูุจุงูุชุงูู ุ ูุง ูุชุทูุจ ุจุฑุงูุฌ ุชุดุบูู ูููุตูุฉ ูุฎุฏูุฉ ุงูุจูุงูุงุช ุงููุตููุฉ.  ุชุชู ุฌููุน ุนูููุงุช ุงูุชุญูู ุจุงุณุชุฎุฏุงู ุฃุฏุงุฉ <strong>ููุจ</strong> ูุงุญุฏุฉ ุชุชูุงุตู ูุจุงุดุฑุฉ ูุน <strong>ุงูุฃุบูุงู</strong> <br>  <em>(ูุณุชุฎุฏู ceph ุฃูุถูุง ุงูุฃุดูุงุก - ุชูุฑูุจูุง ููู.)</em> </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุญุณุงุจ ุงูุนูุฏุฉ ุงูุณุงูุทุฉ</strong> <br>  ูุชููู ูู VDI ูู ูุฐู ุงููุชู (ุงููุงุฆูุงุช) ุงูุชู ูุชู ูุณุฎูุง ูู ููุช ูุงุญุฏ ุฅูู ุนุฏุฉ ุนูุฏ ุ ูุฐูู ุ ุฅุฐุง ุณูุทุช ุฅุญุฏุงูุง ุ ุชุธู ุงูุจูุงูุงุช ูุชุงุญุฉ ุ ูุชุจุฏุฃ ูุงุฆูุงุช ุงูุนูุฏ ุงููุชุณุงูุทุฉ ูู ุงููุณุฎ ุฅูู ุงูุนูุฏุฉ ุงูุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุฏุนู ููุทุงุช ุงูุฌูุงุฒ ุงููุญุธูุฑุฉ</strong> <br>  ุชุนูู <strong>ููุทุงุช</strong> Sheepdog ูุซู Btrfs.  ูุชู ุญูุธ ูุชู VDI ุงููุฑููุฉ ุ ููุชู ูุชุงุจุฉ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ ุฅูู ูุชู ุฌุฏูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ูุฏ ุชููู ุงููุธุงุฆู ุงูุชุงููุฉ ุฅุดูุงููุฉ ูู ุธุฑูู ูุนููุฉ: </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุฑุงุนู ูุง ูุฏุนู SPOF</strong> <br>  ุฅุฐุง ุชู ุงุณุชุฎุฏุงู VDI ูุฌูุงุฒ ุญุธุฑ ุนุจุฑ QEMU ุ ููุฏ ุชูุดุฃ ูุดููุฉ ุฅุฐุง ูุงู ูุชุตูุงู ูู ููุณ ุงูููุช ูู ุนุฏุฉ ุฃูุงูู.  ูุงู ุจุฅููุงู SPOF <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">3</a></sup> ููุน ูุฐุง. <sup><a name="cite_ref-3"></a></sup>  ุงูุฑุงุนู ููุณ ูุฏูู.  ููุน ุฐูู ุ ูู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ูู Sheepdog ุ ูููู ุญุธุฑ VDI ุจุญูุซ ูุง ูุณูุญ ุจุฃูุซุฑ ูู ุงุชุตุงู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฏูุฑุฉ ุญูุงุฉ ูุงุฆูุงุช ุงูุจูุงูุงุช</strong> <br>  ูุง ูููู ุญุฐู ูุงุฆูุงุช VDI ุฅูุง ุนูุฏูุง ูุชู ุญุฐู ุฌููุน ุงููุณุฎ ูุงูููุทุงุช ุงููุฑุชุจุทุฉ ุจูุง.  ูุฐุง ูู ุจุงูุถุจุท ููุณ Btrfs.  ูุฐูู ุ ูุฏ ูุง ุชููู ุฅุฒุงูุฉ ุงูููุทุงุช ุบูุฑ ุงููุณุชุฎุฏูุฉ ูุงููุฉ ูุฅูุณุงุญ ุงููุฌุงู ููุชุฎุฒูู. </p><br><h1 id="demon-kommunikacii" style=";text-align:right;direction:rtl">  ุจุฑูุงูุฌ ุงูุงุชุตุงูุงุช </h1><br><p style=";text-align:right;direction:rtl">  ุงูุฑุงุนู ุตุบูุฑ ุจุดูู ูุซูุฑ ููุณุฎุฑูุฉ ููุงุฑูุฉ ุจู Ceph ุฃู GlusterFS.  ูุฐุง ูุฃูู ูุง ูุญุงูู ุญู ุฌููุน ุงููุดุงูู ุจููุณู ุ ููููู ูุณุชุฎุฏู ุฅูู ุฃูุตู ุญุฏ ูุง ูุนูู ุจุงููุนู. </p><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุงุจู ุ ูููุฑ ุฌูุงุฒ ูุชูุฉ ูููู ุงุณุชุฎุฏุงูู ููุฑุต ูุนูู ุ ุจุงูุฅุถุงูุฉ ุฅูู ุบุงุฑุฉ ุจุฑุงูุฌ ุ ุฅูุฎ. </p><br><p style=";text-align:right;direction:rtl">  ููุชู ููุท ุจุชูุฒูุน ูุงุฆูุงุช ุงูุจูุงูุงุช ุจูู ุงูุนูุฏ ุงูุชู ุชุนูู ุนูููุง. </p><br><p style=";text-align:right;direction:rtl">  ููุน ุฐูู ุ ููู ูุญุชุงุฌ ุฅูู ุงููุนูููุงุช ุงูุชู ูููุฑูุง ุจุฑูุงูุฌ <strong>ุงูุงุชุตุงูุงุช</strong> - ููู ูููู ุฑุฆูุณู ูู ูุนูู <strong>Shepdog</strong> ุจุฏููู. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุจุฑูุงูุฌ ุงูุงุชุตุงูุงุช</strong> - ูุง ูููุฑ ุงููุฏุฑุฉ ุนูู ุชุจุงุฏู ุงูุจูุงูุงุช ุจูู ุงูุนูุฏ.  ูุฐุง ูุง ุชูุนูู ุดูุงุทูู <strong>ุงูุฃุบูุงู</strong> .  ูู ุฎูุงูู ุ ููุชุดู <strong>ุงูุฃุบูุงู</strong> ููุท ุงูุนูุฏ ุงูุชู ูู ุนูู ููุฏ ุงูุญูุงุฉ ุญุงูููุง. </p><br><h2 id="corosync" style=";text-align:right;direction:rtl">  ูุชุฒุงูู </h2><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ููุชุฑุถ <strong>Sheepdog</strong> ุฃู ุงูุนูุฏ <strong>ุณุชุชูุงุตู</strong> ูุน ุจุนุถูุง ุงูุจุนุถ ูู ุฎูุงู <strong>corosync</strong> .  ูุฏุนู ูุง ูุตู ุฅูู 64 ุนูุฏุฉ ุ ุนูู ุงูุฑุบู ูู ุฃูู ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ูุฌุจ ุฃู ูููู ูุงุฏุฑูุง ุนูู ุชูุฏูู ุงููุฒูุฏ ุ ุฅูุง ุฃู ุงุณุชุฎุฏุงูู ูุซุงูู ููุชุฌูุนุงุช ุงูุตุบูุฑุฉ ุญุชู 16 ุนูุฏุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุนุงุฏุฉ ุ ูุณุชุฎุฏู <strong>corosync</strong> ุฃูุถูุง ุฌูุงุฒ ุชูุธูู ุถุฑุจุงุช ุงูููุจ ุ ูุฐูู ููุณ ููุงู ุญุงุฌุฉ ูุชุซุจูุช ุฃู ุดูุก ุขุฎุฑ. </p><br><h3 id="ustanovka-corosync-na-debian" style=";text-align:right;direction:rtl">  ูู ุจุชุซุจูุช corosync ุนูู ุฏุจูุงู </h3><br><p style=";text-align:right;direction:rtl">  Corosync ููุฌูุฏ ูู ูุณุชูุฏุนุงุช ุงูุชูุฒูุน ุ ูุชุฑููุจู ุจุณูุท: </p><br><pre style=";text-align:right;direction:rtl"><code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> install corosync libcoro<span class="hljs-built_in"><span class="hljs-built_in">sync-common4</span></span></code> </pre> <br><h3 id="nastroyka-corosync" style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ Corosync </h3><br><h2 id="zookeeper" style=";text-align:right;direction:rtl">  ุญุงุฑุณ ุญุฏููุฉ ุงูุญููุงู </h2><br><p style=";text-align:right;direction:rtl">  ููุตู ูุทูุฑู <strong>Sheepdog</strong> ุจุงุณุชุฎุฏุงู <strong>zookeeper</strong> ูููุฌููุนุงุช ุงูุฃูุจุฑ.  ูููุง ูููุทูุฑูู ุ ุชู ุจูุงุก ูุงุฎุชุจุงุฑ ุชุฎุฒูู ุงุฎุชุจุงุฑ <strong>Sheepdog</strong> ูุน 1000 ุนูุฏ <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">4</a></sup> <sup><a name="cite_ref-4"></a></sup>  . </p><br><h3 id="ustanovka-zookeeper-na-debian" style=";text-align:right;direction:rtl">  ูู ุจุชุซุจูุช zookeeper ุนูู ุฏุจูุงู </h3><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> install zookeeper zookeeperd</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูุทูุงู ุงูุดูุทุงู .. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">$ /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/zookeeper/bin/zkServer.sh <span class="hljs-keyword"><span class="hljs-keyword">start</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงููููุฐ ุงูุงูุชุฑุงุถู ุงูุฐู ูุชู ุชุดุบูู zookeeper ุนููู ูู 2181 </p><br><p style=";text-align:right;direction:rtl">  ุชุดุบูู ููุจ ุงูุฑุงุนู ูุน ุฏุนู zookeeper: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> sheep <span class="hljs-literal"><span class="hljs-literal">-c</span></span> zookeeper:IP1:PORT1,IP2:PORT2,IP3:PORT3 ...other...option...</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงูููุงูุฃุฉ ูู <strong>zookeeper</strong> ูู ุฃูู ูู ุญุงูุชูุง ุ ูุฏู <strong>Sheepdog</strong> ุชูููู ุฃูุถุญ ูุฃุณูู ููุนูุฏ ุ ูููู ููุงู ูุดููุฉ ูู ุฃู ุญุฒูุฉ ุชุซุจูุช ุฏุจูุงู ูุง ุชุชุถูู ุฏุนููุง. </p><br><p style=";text-align:right;direction:rtl">  ูุฐูู ุ ููุญุตูู ุนูู Sheepdog ูุน ุฏุนู zookeeper ุ ูุฌุจ ุนููู ุชุฌููุนู ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุงููุตุฏุฑ.  ุนูู ุงูุฑุบู ูู ุฃููู ูุง ุฃุณุชุทูุน ุฃู ุฃุณุชุจุนุฏ ุฃู ุงููุถุน ูุฏ ูููู ูุฎุชูููุง ูู ุงูููุช ุงูุญุงุถุฑ. <br>  <em>(ูุง ูุฒุงู ุฏุนู zookeeper ูุชุทูุจ ุงูุชุฑุฌูุฉ ูู ุงููุตุฏุฑ - ุชูุฑูุจูุง ููู.)</em> </p><br><h1 id="nastroyka-demona-sheep" style=";text-align:right;direction:rtl">  ุฅูุงูุฉ ุดูุทุงู ุงูุฎุฑุงู </h1><br><p style=";text-align:right;direction:rtl">  ุชุตุจุญ ุงูุนูุฏุฉ ุฌุฒุกูุง ูู ููุจ ุงูุฑุงุนู ุนูุฏูุง ูุจุฏุฃ ูุฏูุฑ ุงููุงุฆู ุ ุดูุทุงู <strong>ุงูุฎุฑุงู</strong> .  ูุนูู ุฏุงุฆููุง ูู ูุณุฎุชูู: </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงููุซูู ุงูุฃูู ููุนูููุฉ ูุจูุงุจุฉ ุ ุชุณุชูุจู ุทูุจุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูู ุงูุนููุงุก (ุนูู ุณุจูู ุงููุซุงู ุ ูู ุจุฑุงูุฌ ุชุดุบูู ุฃุฌูุฒุฉ ูุชูุฉ QEMU) ุ ูุชุญุณุจ ุงูุนูุฏ ุงููุณุชูุฏูุฉ ูุชุฑุณู ุทูุจุงุช ููุฒูุฏ ูู ุงููุนุงูุฌุฉ ูููุง ุจูููุง.  ุฃู ุฃูู ููุดุฆ ุงูุนุฏูุฏ ูู ุงุชุตุงูุงุช ุงูุดุจูุฉ. </p><br></li><li style=";text-align:right;direction:rtl">  ูุนูู ุขุฎุฑ ููุฏูุฑ ูุงุฆู ูุญูู ( <strong>ุฅุฏุงุฑุฉ ุงููุงุฆูุงุช</strong> ) </li></ol><br><p style=";text-align:right;direction:rtl">  ูููู ุชูุฑูุฑ ูุนููุงุช ุชูููู ุงูุจุฑูุงูุฌ ุงูุฎูู ููุณูุทุฉ ุณุทุฑ ุงูุฃูุงูุฑ ูู ููุช ุงูุชุดุบูู.  ุฅุฐุง ูู ููู ููุงู ุฃู ุดูุก ุ ูุณูุชู ุงุณุชุฎุฏุงู ุงูููู ุงูุงูุชุฑุงุถูุฉ ุ ูุงูุชู ูุฌุจ ุฃู ุชููู ุญุฐุฑุง ูุนูุง: </p><br><p style=";text-align:right;direction:rtl">  <strong>ุฑูู ุงููููุฐ</strong> <br>  ูุง ูู ูุชู ุชุญุฏูุฏ ุฎูุงู ุฐูู ุ ูุนูู ุจุฑูุงูุฌ ุฎุฑุงู ุงูุฃุบูุงู ุนูู ุงููููุฐ 7000 </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุณุงุฑ ุงููุฏูู</strong> <br>  ูุง ูู ููุต ุนูู ุฎูุงู ุฐูู ุ ูุณุชุฎุฏู ุฏููู shep ุงูุฏููู / var / lib / sheepdog ุ ููุชู ุชุฎุฒูู ูุงุฆูุงุช VDI ูู <code>obj</code> ุงููุฑุนู <code>obj</code> . </p><br><blockquote style=";text-align:right;direction:rtl">  ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูุง ุดูุก ูููุน ุงูุนุฏูุฏ ูู ุญุงูุงุช <strong>ุงูุฃุบูุงู ูู</strong> ุงูุนูู ุนูู ุนูุฏุฉ ูุงุญุฏุฉ - ุงูุดุฑุท ุงูุฑุฆูุณู ูู ุฃู ูุณุชุฎุฏู ุงูุฌููุน ุฑูู ุงููููุฐ ุงูุฎุงุต ุจูู ูุชุฎุฒูููู ุงูุฎุงุต.  ุชู ุญู ูุดููุฉ ุนููุงู IP ููุนูุฏุฉ ุชูุฑูุจูุง.  ูู ูุณุฎุฉ ููุฏ ุงูุชุดุบูู ูู <strong>ุงูุฎุฑุงู ุงูุฎุฑุงู ุงูุชู</strong> ุชุนูู ุนูู ูููุฐ ูุฎุชูู ุณูู ุชุชุตู ุชููุงุฆูุง ุจูุฌููุนุฉ ููุฌูุฏุฉ! <br><br>  ูุนูููุงุช ูุงูุฉ ูู ุฃู ุฑูู ุงููููุฐ ุฌุฒุก ูู ุชูููู ุญุงููุฉ VDI.  ุชุญุชุงุฌ ุฅูู ูุนุฑูุฉ ูุง ุฅุฐุง ููุช ุชุฑูุฏ ุฅุนุงุฏุฉ ุชูููู ุงูุจุฑูุงูุฌ ุงูุฎูู ููุชุดุบูู ุนูู ุงููููุฐ ุงูุขุฎุฑ ูููุชูุฉ ุงูููุฌูุฏุฉ. <br><br>  ูุฐูู ุ ุงุฐุง ููุช ุจุชุดุบูู ูุณุฎุฉ ูู ุจุฑูุงูุฌ <strong>ุฎุฑูู ุงูุบูู</strong> ุจุฑูู ูููุฐ ูุฎุชูู ุ ูููู ุจููุณ ุงููุณุงุฑ ุงูู ููู ุชุฎุฒูู ุงูุนูุงุตุฑ ุ ููุฏ ุชููุฏ ุงููุนูููุงุช ูู ุญุงููุงุช VDI ุงูููุฌูุฏุฉ. </blockquote><br><h1 id="demon-sheep-kak-shlyuz" style=";text-align:right;direction:rtl">  ุฎุฑุงู ุงูุดูุทุงู ูุจูุงุจุฉ </h1><br><p style=";text-align:right;direction:rtl">  ุนูู ุงูุฃุฌูุฒุฉ ุงูุชู ูุง ุชุญุชูู ุนูู ูุณุงุญุฉ ุชุฎุฒูู ููุงุฆูุงุช VDI ุ ูููู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงูุฎูู <strong>ููุฃุบูุงู</strong> ุญุตุฑููุง ูู ูุถุน ุงูุจูุงุจุฉ ุ ูุน ุนูุงูุฉ <code>-G</code> . </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ุนูุฏ ุชูุฒูุน ูุงุฆูุงุช VDI ุ ูู ูุชู ุงุณุชุฎุฏุงู ุงูุชุฎุฒูู ุงููุญูู ุนูู ุงูุฅุทูุงู ุ ูุณูุชู ุชูุฒูุน ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ุนูู ุงูุนูุฏ ุงูุฃุฎุฑู. </p><br><h1 id="demon-sheep-kak-menedzher-obektov" style=";text-align:right;direction:rtl">  ุดูุทุงู ุงูุฃุบูุงู ููุฏูุฑ ูุงุฆู </h1><br><p style=";text-align:right;direction:rtl">  ูุนูู ุงููุซูู ุงูุซุงูู ููุฏูุฑ ูุงุฆู ูุญูู ุ ููุชููู ุทูุจุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูู ูุซูู ูุจุฏุฃ ูุจูุงุจุฉ ุ ููููุฐ ุนูููุงุช r / w ูู ุชุฎุฒูู ุงููุงุฆู ุงููุญูู ( <strong>ุชุฎุฒูู ุงููุงุฆู</strong> ) </p><br><h2 id="hranilische-obektov" style=";text-align:right;direction:rtl">  ุชุฎุฒูู ุงููุงุฆูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุจุดูู ุงูุชุฑุงุถู ุ ูููู ุชุฎุฒูู ูุงุฆูุงุช VDI ูู <strong>Sheepdog</strong> ูู ุงูุฏููู <code>/var/lib/sheepdog/obj</code> ุ ูุงูุฐู ูุณุชุฎุฏูู ุฃูุถูุง ุฎูู <strong>ุงูุฃุบูุงู</strong> ูุฌุฒุก ูู ูููู ุงูุฏููู ุงูุฏุงุฎูู - ูุฐุง ูู ูุณุงุฑ ุงูุชุฎุฒูู ุงูุงูุชุฑุงุถู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑูุฏ ุชุฎุฒูู ูุงุฆูุงุช VDI ูู ููุงู ุขุฎุฑ ุ ููููู ุชูุฑูุฑ ุงููุณุงุฑ ุญูุซ ุชู ุชุฑููุจ ุฌูุงุฒ ูุชูุฉ ุขุฎุฑ ููุนููุฉ ุนูุฏ ุจุฏุก ุงูุชุดุบูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sheep</span></span> ... /cesta_do_pลรญpojnรฉho_bodu</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุงููุฒูุฏ ูู ุงูุทุฑู ููุชุนุจูุฑ.  ูุฏุนู ุงูุฅุตุฏุงุฑ ุงูุฌุฏูุฏ ูู <strong>Sheepdog</strong> ูุง ูุณูู ุจุชูููุฉ ุงูุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉ ุ ูุงูุชู ุชุชูุญ ูู ุฒูุงุฏุฉ ุณุนุฉ ุงูุฐุงูุฑุฉ ุฏููุงูููููุง ุ ุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุฏูู ุงูุญุงุฌุฉ ุฅูู ุฅุนุงุฏุฉ ุชุดุบูู <strong>Sheepdog</strong> .  ุชุนูู ุฒูุงุฏุฉ ุณุนุฉ ุงูุชุฎุฒูู ุจุดูู ูุดุงุจู ูู Btrfs. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sheep</span></span> ... /cesta_do_A,/cesta_do_B,/cesta_do_C</code> </pre> <br><p style=";text-align:right;direction:rtl">  <em>(ุณูุชู ุงุณุชุฎุฏุงู ุงูุฏููู ุงูุฃูู ุงููุญุฏุฏ ููุท ููุจูุงูุงุช ุงููุตููุฉ - ุญูุงูู .per)</em> </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฃูุถูุง ุฅุถุงูุฉ ุชุฎุฒูู ุฅุถุงูู (ุฃู ุฅุฒุงูุชู) ูู ุฎูุงู <strong>ุนูุฏุฉ ุงูููุจ md</strong> </p><br><p style=";text-align:right;direction:rtl">  ... </p><br><p style=";text-align:right;direction:rtl">  ุงููุธุงุฆู ุงูุชู ููุฏููุง ุงูุฌูุงุฒ ุงููุชุนุฏุฏ ูููุฏุฉ ุจุดูู ุฎุงุต ุนูุฏูุง ูุง ูุฏุนู ูุธุงู ูููุงุช ุงูุชุฎุฒูู ูุฐุง "ุญุณุจ ุงูุชุตููู" (ุนูู ุนูุณ Btrfs ุฃู ZFS).  ุจุดูู ุนุงู ุ ูููู ุฃู ูุคุซุฑ ุงุฎุชูุงุฑ ูุธุงู ุงููููุงุช ูุชุฎุฒูู ุงููุงุฆูุงุช ูุฎุตุงุฆุตูุง ููุนููุงุชูุง ูุฅุนุฏุงุฏุงุชูุง ุจุดูู ูุจูุฑ ุนูู ุฃุฏุงุก ูุธุงู ูููุงุช IO ููุฌูุงุฒ ุงูุธุงูุฑู. </p><br><blockquote style=";text-align:right;direction:rtl">  ุชุชุทูุจ ุชูููุฉ ุงูุฃุฌูุฒุฉ ุงููุชุนุฏุฏุฉ ุณูุงุช ูุชูุฏูุฉ ุนูู ุฌุงูุจ ุงูููู ุ ููู ูุง ูุง ููุซู ูุดููุฉ ูุฃูุธูุฉ ุงููููุงุช ุงูุญุฏูุซุฉ ูุซู btrfs <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">5</a></sup> <sup><a name="cite_ref-5"></a></sup>  ุฃู ext4.  ููู ุจุนุถ ุฃูุธูุฉ ุงููููุงุช ุงููุฏููุฉ ูุซู reiserfs ุฃู ext2 <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">6</a></sup> <sup><a name="cite_ref-6"></a></sup>  ูุง ุชุฏุนููู. <br><br>  ุฅุฐุง ููุช ุชุฑุบุจ ูู ุงุณุชุฎุฏุงู ูุธุงู ูููุงุช ูุง ูุฏุนู ุงูุณูุงุช ุงูููุณุนุฉ ูุชุฎุฒูู ุงููุงุฆูุงุช ุ ููุญู ุจุญุงุฌุฉ ุฅูู ุชุฌููุน <strong>Sheepdog</strong> ุจุฏูู ุฏุนู ูุชุนุฏุฏ ุงูุฃุฌูุฒุฉ. </blockquote><br><h2 id="tip-hranilischa---plain-versus-tree" style=";text-align:right;direction:rtl">  ููุน ุงูุชุฎุฒูู - ุนุงุฏู ููุงุจู ุดุฌุฑุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุชูุณูู ูุฌููุนุฉ ุ ูู ุจูู ุฎูุงุฑุงุช ุฃุฎุฑู ุ ููููู ุชุญุฏูุฏ ููุน ุงูุชุฎุฒูู (ุชุฎุฒูู ุงููุงุฌูุฉ ุงูุฎูููุฉ).  ููููู ุถุจุท ุงูููุน ุนูู <strong>ุนุงุฏู</strong> ุฃู <strong>ุดุฌุฑุฉ</strong> .  ุจุงููุณุจุฉ ููููุน <strong>ุงูุนุงุฏู</strong> ุ ุณุชุจุฏู ุจููุฉ ุงูุฏููู ููุง ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby"><span class="hljs-params"><span class="hljs-params">| |</span></span>- obj <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt;id &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|-&lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>-&lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|-&lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>- ... <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt;id  &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> ... <span class="hljs-params"><span class="hljs-params">|- config [] |</span></span>- epoch <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span>- ... <span class="hljs-params"><span class="hljs-params">|- journal \- sheep.log []</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุชู ุฅุฑุณุงู ุฌููุน ูุงุฆูุงุช VDI ูู ุฏููู <code>obj</code> ุฅูู ุฏููู ูุฑุนู ูุนุชูุฏ ุงุณูู ุนูู ูุนุฑู ุงูุนุตุฑ ุงูุญุงูู.  ุฃู ุฃูู ููู ุนุตุฑ ุ ุณูุชู ุชุฎุฒูู ูุงุฆูุงุช VDI ุงูููุงุจูุฉ ุจุดูู ูููุตู.  ููุน ุฐูู ุ ุฎูุงู ุนุตุฑ ูุงุญุฏ ุ ูุฏ ูุธูุฑ ุนุฏุฏ ูุจูุฑ ูู ูุงุฆูุงุช VDI ูู ุงูุฏููู ุ ููุง ูุคุฏู ูุงุญููุง ุฅูู ุฅุจุทุงุก ุงููุตูู ุฅูู ุงููููุงุช.  ูุฐูู ุ ููููู ุงุฎุชูุงุฑ ุงูุฎูุงุฑ ุงูุซุงูู ุ ููู <strong>ุงูุดุฌุฑุฉ</strong> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby"><span class="hljs-params"><span class="hljs-params">|- obj |</span></span> <span class="hljs-params"><span class="hljs-params">|- aa |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>-&lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|-&lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>-&lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|- ... |</span></span> <span class="hljs-params"><span class="hljs-params">|- ab |</span></span> <span class="hljs-params"><span class="hljs-params">| ... |</span></span> <span class="hljs-params"><span class="hljs-params">|- meta |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|- ... |</span></span> <span class="hljs-params"><span class="hljs-params">|- 0a |</span></span> <span class="hljs-params"><span class="hljs-params">| ... |</span></span>- config [] <span class="hljs-params"><span class="hljs-params">|- epoch |</span></span> <span class="hljs-params"><span class="hljs-params">|- &lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">|- &lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">|- ... \- sheep.log []</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูููุน ูู ุงูุชุฎุฒูู ุ ูููุดุฆ ุงูุจุฑูุงูุฌ ุงูุฎูู <strong>ููุฃุบูุงู</strong> ูุฌููุนุฉ ูู 256 ุฏูููุงู ูุฑุนููุง ุจุฃุณูุงุก 0 ุฃ <code>0a, ..., 99</code> ูู ุฏููู <code>obj</code> ุ ุซู ูุจุนุซุฑ ุงููุงุฆูุงุช ุงุณุชูุงุฏูุง ุฅูู ุขุฎุฑ ุญุฑููู ูู <strong>ูุนุฑู VDI</strong> ุ ููู ูุฑูุฏ ููุณ ููุท ููู ุญุงููุฉ VDI ูููู ุฃูุถูุง ูููุทุงุช ุฃู ุงุณุชูุณุงุฎ. </p><br><h2 id="imena-vdi-obektov" style=";text-align:right;direction:rtl">  ุฃุณูุงุก ูุงุฆูุงุช VDI </h2><br><p style=";text-align:right;direction:rtl">  ุนูุฏูุง ูุญูุธ <strong>Sheepdog</strong> ุงูุจูุงูุงุช ูู ุญุงููุฉ VDI ุ ุณุชุจุฏุฃ ุงููููุงุช ูู ุงูุธููุฑ ูู ูุฎุฒู ุจูุงูุงุช <code>obj</code> ุ ูุณูููู ููู ูููุง ุงุณููุง ุงูุฎุงุต ุงูุฐู ูุชููู ูู ุนุฏุฉ ุนูุงุตุฑ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุดูุฑ ุงูุญุฑูุงู ุงูุฃููุงู ุฅูู ููุน ุงููุงุฆู.  ุชุจุฏุฃ ูุงุฆูุงุช ุงูุจูุงูุงุช ุจู <code>00...</code> ูุงูุจูุงูุงุช ุงููุตููุฉ (ุงูุชู ูููู ุชุฎุฒูููุง ูู ุฏููู ุขุฎุฑ) <code>80...</code> </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^^^^^</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุซู ูุฃุชู VDI.  ุฅููุง ูุฑูุฏุฉ ููุณ ููุท ููู ุญุงููุฉ ุ ูููู ุฃูุถูุง ููุทุชูุง ุฃู ุงุณุชูุณุงุฎูุง. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^ ^^</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุดูุฑ ุขุฎุฑ ุฑูููู ูู ูุนุฑู VDI ุ ูู ุญุงูุฉ ููุน ุชุฎุฒูู <strong>ุงูุดุฌุฑุฉ</strong> ุ ุฅูู ุงูุฏููู ุงููุฑุนู ุงูุฐู ููุชูู ุฅููู ุงููุงุฆู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^^^^^^^</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุชุจุน ูุนุฑู ุญุงููุฉ VDI ุจุงููุธุงู ุงูุณุช ุนุดุฑู ุจุงูุฑูู ุงูุชุณูุณูู ูููุงุฆู ูู ุญุงููุฉ VDI </p><br><h2 id="epoha" style=";text-align:right;direction:rtl">  ุนุตุฑ </h2><br><p style=";text-align:right;direction:rtl">  ูุญุชูู ุงูุฏููู ุงููุฑุนู ููุญูุจุฉ ุนูู ููุงุฆู ุซูุงุฆูุฉ ูููุงุฆูุงุช ุงูุชู ุชูุชูู ุฅูู ุงูุนุตุฑ.  ูุฒุฏุงุฏ ุฑูู ุงูุญูุจุฉ ุ ูู ูู ูุฑุฉ ุชุชุบูุฑ ูููุง ูู ูุฌููุนุฉ - ุนูุฏ ุฅุถุงูุฉ ุนูุฏุฉ ุฃู ุฅุฒุงูุชูุง.  ูุจุฏุฃ ูู ุชุบููุฑ ูู ูุฐุง ุงููุจูู ุนูููุฉ <strong>ุงูุงุณุชุฑุฏุงุฏ</strong> ุ ูุงูุชู ุณูุชู ุฎูุงููุง ูุญุต ุงูุญุงูุฉ ุงูุญุงููุฉ ูููุงุฆูุงุช ุงููุญููุฉ ุนูู ุงูุนูุฏ ุ ุชูููุง ุฒูุงุฏุฉ ูู ุงูุนุตุฑ. </p><br><h1 id="kak-optimalno-vybrat-hranilische-vdi-obektov" style=";text-align:right;direction:rtl">  ููููุฉ ุงุฎุชูุงุฑ ุงูุชุฎุฒูู ุงูุฃูุซู ููุงุฆู VDI </h1><br><p style=";text-align:right;direction:rtl">  ูุชู ุญุณุงุจ ุณุนุฉ ุงูุชุฎุฒูู ุงููุชุงุญุฉ ุจูุงุกู ุนูู ุงููุณุงุญุฉ ุงูุฎุงููุฉ ุนูู ุงูุนูุฏ.  ุชุนุชูุฏ ุงููุณุงุญุฉ ุงูุชู ุชุฎุชุงุฑูุง <strong>ุงูุฃุบูุงู</strong> ุฏุงุฆููุง ุนูู ููุฏุงุฑ ุงููุณุงุญุฉ ุงููุชููุฑุฉ ูู ุฌูุงุฒ ุงููุชูุฉ ุญูุซ ูุชู ุชุฎุฒูู ูุงุฆูุงุช VDI. </p><br><p style=";text-align:right;direction:rtl">  ุฅู ุญุฌู ุญุงููุฉ VDI ูู ูุฌุฑุฏ ุดูู ุงูุชุฑุงุถู ูุง ูุฑุชุจุท ุจุฃู ุดูู ุจูููุฉ ุงููุณุงุญุฉ ุงูุชู ุชุดุบููุง ูุงุฆูุงุช VDI.  ูู ุงูููู ูุนุฑูุฉ ููููุฉ ูุนุงูุฌุฉ Sheepdog ููุจูุงูุงุช ูู ูุฌููุนุฉ: </p><br><blockquote style=";text-align:right;direction:rtl">  ูุญุงูู Sheepdog ุฏุงุฆููุง ุชุฎุฒูู ุงูุจูุงูุงุช ุจุงูุชุณุงูู ุจูู ุฌููุน ุขูุงุช ุงูุนุตุฑ. </blockquote><p style=";text-align:right;direction:rtl">  ูุฐุง ูุนูู ุฃูู ุฅุฐุง ุณูุทุช ุฅุญุฏู ุงูุนูุฏ ุ ูุชุบูุฑ ุงูุนุตุฑ ูุจุฏุฃ <strong>Sheepdog ุนูู</strong> ุงูููุฑ ูู ุนูููุฉ ุงูุงุณุชุฑุฏุงุฏ ุ ูุฅูู ุณูููู ุจุฅูุดุงุก ูุงุฆูุงุช VDI ุงูููููุฏุฉ ุนูู ุงูุนูุฏ ุงููุชุจููุฉ ููุชุนููุถ ุนู ุงูุฎุณุงุฑุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุณููุดุฃ ูููู ููุงุซู ุนูุฏ ุฅุถุงูุฉ ุนูุฏุฉ ุฌุฏูุฏุฉ.  ุณูุจุฏุฃ <strong>Sheepdog</strong> ูู ููู ูุงุฆูุงุช VDI ุจุงูุชุณุงูู ูู ุงูุนูุฏ ุงูุฌุฏูุฏุฉ ุฅูู ุงููุณุชูุฏุน ุงูุฎุงุต ุจูุง ุ ุจุญูุซ ุชููู ุงููุณุจุฉ ุงููุฆููุฉ ูููุก ูุณุงุญุฉ ุงูุจูุงูุงุช ุนูู ุงูุนูุฏ ูุชูุงุฒูุฉ ูุฏุฑ ุงูุฅููุงู.  ุงุณุชุฎุฏู ุงูุฃูุฑ ุงูุชุงูู ููุญุตูู ุนูู ูุธุฑุฉ ุนุงูุฉ ุนุงูุฉ ุนู ููุฏุงุฑ ุงููุณุงุญุฉ ุงููุณุชุฎุฏูุฉ ุญุงูููุง ุนูู ุงูุนูุฏ ุงูุฎุงุตุฉ ุจู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs pgsql">nod1 ~ # collie node md <span class="hljs-keyword"><span class="hljs-keyword">info</span></span> -A Id Size Used Avail Use% <span class="hljs-type"><span class="hljs-type">Path</span></span> Node <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.1</span></span> TB <span class="hljs-number"><span class="hljs-number">391</span></span> GB <span class="hljs-number"><span class="hljs-number">720</span></span> GB <span class="hljs-number"><span class="hljs-number">35</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">702</span></span> GB <span class="hljs-number"><span class="hljs-number">394</span></span> GB <span class="hljs-number"><span class="hljs-number">307</span></span> GB <span class="hljs-number"><span class="hljs-number">56</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">794</span></span> GB <span class="hljs-number"><span class="hljs-number">430</span></span> GB <span class="hljs-number"><span class="hljs-number">364</span></span> GB <span class="hljs-number"><span class="hljs-number">54</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.6</span></span> TB <span class="hljs-number"><span class="hljs-number">376</span></span> GB <span class="hljs-number"><span class="hljs-number">1.2</span></span> TB <span class="hljs-number"><span class="hljs-number">22</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.2</span></span> TB <span class="hljs-number"><span class="hljs-number">401</span></span> GB <span class="hljs-number"><span class="hljs-number">838</span></span> GB <span class="hljs-number"><span class="hljs-number">32</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.5</span></span> TB <span class="hljs-number"><span class="hljs-number">370</span></span> GB <span class="hljs-number"><span class="hljs-number">1.1</span></span> TB <span class="hljs-number"><span class="hljs-number">24</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.6</span></span> TB <span class="hljs-number"><span class="hljs-number">388</span></span> GB <span class="hljs-number"><span class="hljs-number">1.2</span></span> TB <span class="hljs-number"><span class="hljs-number">23</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj</code> </pre> <br><h2 id="proizvoditelnost-io" style=";text-align:right;direction:rtl">  ุฃุฏุงุก I / O </h2><br><p style=";text-align:right;direction:rtl">  ูู ุงูููู ุฃู ูููู ููุง ุฃู <strong>Sheepdog</strong> ูุนูู ุจุดูู ูุฎุชูู ุนู Ceph ุ ููุฏูู ุฃููููุงุช ูุฎุชููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ุฅูู Ceph ุ ูุนุฏ "ูุฒู" ุฌูุงุฒ OSD ุฃูุฑูุง ุจุงูุบ ุงูุฃูููุฉ ุนูุฏ ูุถุน ูุงุฆูุงุช ุงูุจูุงูุงุช ุ ุจุงูุฅุถุงูุฉ ุฅูู ุฃุฏุงุก ุฌูุงุฒ ุงูุญุธุฑ ูุงุชุตุงู ุงููุถูู ูุณุฑุนุฉ ุงูุงุณุชุฌุงุจุฉ.  <em>(ูู ุงููุงูุน ูุง - ุชูุฑูุจุง ููู)</em> </p><br><p style=";text-align:right;direction:rtl">  ูุง ููุนู ุดูุจุฑุฏ ุดูุก ูู ูุฐุง ุงููุจูู ุ ูุง ุฃุนุฑู.  ุฑุจูุง.  ุจูุงูุงุชู ุชุฃุชู ุฃููุงู.  ุงูุฃุฏุงุก ูู ุญูุซ ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุซุงููู.  ุจุงูุทุจุน ุ ูุน ุงูุนูุฏ ุงูุฃูุซุฑ ููุฉ ุ ูููู ุฃู ูุชุญุณู ุฃุฏุงุก ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุ ููููู ูุนุชูุฏ ุฏุงุฆููุง ุนูู ุงูุจููุฉ ุงููุญุฏุฏุฉ.  <em>(ููุน ุฐูู ุ ุชุธูุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุงุฎุชุจุงุฑุงุช</a> ุฃุฏุงุก ุฃูุถู ููุฑุนุงุฉ ููุงุฑูุฉ ูุน ceph - ุชูุฑูุจุง ููู)</em> </p><br><blockquote style=";text-align:right;direction:rtl">  ุฃุถูุช ุนูุฏุฉ ุฌุฏูุฏุฉ ุฅูู Sheepdog ูุน ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ุนูู ูุฑุต 2TB SATA II ุฏูุงุฑ.  ุชุจูุบ ุณุฑุนุฉ ุงููุชุงุจุฉ ุงููุตูู ููุฐุง ุงููุฑุต ุญูุงูู 80M / s.  ูู ุงููุงูุน ุ ุฅูู ูุฎุชูู ูุซูุฑูุง ูุฃู ูุญุฑูุงุช SATA ูุง ูููููุง ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ ูู ููุณ ุงูููุช. <br><br>  ูู ุงูุจุฏุงูุฉ ุ ูุงู ูุชูุณุท โโุณุฑุนุฉ ุงููุชุงุจุฉ ุนูู VDI ุนูู ูุฐุง ุงููุฑุต ุญูุงูู 20 ~ 30M / s ุ ุญูุซ ุฃูู ุจุงูุฅุถุงูุฉ ุฅูู ุงูุจูุงูุงุช ูู VDI ุ ุชู ูุณุฎ ุจูุงูุงุช ุญุงููุฉ 392G ูุฌุฒุก ูู ุนูููุฉ ุงูุงุณุชุฑุฏุงุฏ.  ุงุณุชูุฑ ูุฐุง ููุฏุฉ 6.5 ุณุงุนุฉ.  ุชุฑุงูุญุช ุณุฑุนุฉ ุงููุชุงุจุฉ ุจูู 40 ~ 55M / s. <br><br>  ูู ุงููุงุถุญ ุ ูู ูุฐู ุงูุญุงูุฉ ุ ูุงูุช ุณุฑุนุฉ ุงููุชุงุจุฉ ูุญุฏูุฏุฉ ุจุณุจุจ ุฃุฏุงุก ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูุฌูุงุฒ ุงูุญุธุฑ ุงููุญูู. </blockquote><p style=";text-align:right;direction:rtl">  ุจุงููุณุจุฉ ุฅูู Sheepdog ุ ุชูุทุจู ุงููุงุนุฏุฉ ุงูุชุงููุฉ: "ูููุง ุฒุงุฏ ุนุฏุฏ ูุงุฆูุงุช VDI ุงูููุฌูุฏุฉ ุนูู ุงูุนูุฏ ุฐุงุช ุงูุงุชุตุงู ุงูุณุฑูุน ุ ูุงู ุฃุฏุงุก ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุฃูุถู." </p><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุญูููุฉ ุฃู ุชุญุฑูู ูุงุฆูุงุช VDI ูู ุงูุฎูููุฉ ูุนูู ุฃู "ุงูููุช ุงูุณุฑูุน ููุนูุฏุฉ" ุณูุจุทุฆ ูู ุชูุฑุงุฑ ูุงุฆูุงุช ุงูุจูุงูุงุช ุงูุชู ุชุดุบู ุฃูุจุฑ ูุณุงุญุฉ ุ ูุฅู ูุฐุง ุณูุธูุฑ ููุณู ุนูู ุฃูู ุงูุฎูุงุถ ูู ุฃุฏุงุก ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ูุญุงููุฉ VDI </p><br><h2 id="zanimaemoe-prostranstvo" style=";text-align:right;direction:rtl">  ุงุญุชูุช ุงููุถุงุก </h2><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ูุถุน ูุงุฆูุงุช ุงูุจูุงูุงุช ุ ูุฅู ููุฏุงุฑ ุงููุณุงุญุฉ ุงูุฎุงููุฉ ุฃูุฑ ุจุงูุบ ุงูุฃูููุฉ ูุจุฑูุงูุฌ <strong>ุฎุฑุงู ุงูุฃุบูุงู</strong> .  ุชุจุฏู ุงูุขููุฉ ุจุณูุทุฉ.  ูุญุฏุฏ ุจุฑูุงูุฌ <strong>ุงูุฎุฑุงู</strong> ุ ุงูุฐู ูุชู ูู ุฎูุงูู ููู ุงูุจูุงูุงุช ูุน ุญุงููุฉ VDI ุ ูู ููุช ูุขุฎุฑ ุงุณุชุฎุฏุงู ุงููุณุงุญุฉ ุงูุญุฑุฉ ูุงููุญุชูุฉ ุนูู ุงูุนูุฏ ุ ูุงูุชู ุชููู ุจูุฑุฒูุง.  ุซู ูุชู ุชูุฒูุน ุงูุจูุงูุงุช ุจูู ุงูุนูุฏ ุจุฃูู ูุนุฏู ุงุณุชุฎุฏุงู. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุงู ูุณุงุฑ ูุชุงุจุฉ ุณุฑูุน ูู ุงูุบุงูุจ ุ ูุณุชููู ุนูููุฉ ุงููุชุงุจุฉ ุฅูู ุญุงููุฉ VDI ุฃูุถูุง ุณุฑูุนุฉ.  ูุธุฑูุง ูุฃูู ูุชู ุชูููุฐ ุนูููุงุช ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ (I / O) ูุญุงููุฉ VDI ุจุดูู ุฃุณุฑุน ุ ูููู ูู ููุช ูุจูุฑ ูุชุงุจุนุฉ ุจุฑูุงูุฌ <strong>ุงูุฎุฑุงู</strong> ุฅูู ุงูุนูููุฉ ุงูุชุงููุฉ. </p><br><p style=";text-align:right;direction:rtl">  ุงูุดูุก ุงูููู ูู ุฃูู ูุน Sheepdog ูู ูููู ููุงู ุญุงูุฉ ุนูุฏูุง ุชููู ุฅุญุฏู ุงูุนูุฏ ููุชูุฆุฉ ุชูุงููุง.  ุฅุฐุง ุฃุตุจุญ ูุนุฏู ุงูุงุณุชุฎุฏุงู ุนูู ุงูุนูุฏุฉ ุฃุณูุฃ ุจูุซูุฑ ุ ูุฅู ุงูุจุฑูุงูุฌ ุงูุฎูู ูุจุฏุฃ ูู ููู ูุงุฆูุงุช ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจู ุฅูู ูููุน ุขุฎุฑ. </p><br><p style=";text-align:right;direction:rtl">  ูุนูู Sheepdog ุชูุงููุง ูุซู Btrfs - ุจุงุณุชุฎุฏุงู ุงููุณุงุญุฉ ุงููุดุบููุฉ ููุท.  ูุจุงูุชุงูู ุ ููููู ุฅูุดุงุก ุญุงููุฉ VDI ุงูุชุฑุงุถูุฉ ุจุณุนุฉ 1 ุชูุฑุงุจุงูุช ุ ูุงูุชู ุณุชุณุชููู ูุณุงุญุฉ ูุจูุฑุฉ ูุซู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูููุง.  ูู ูุฌูุฉ ุงููุธุฑ ูุฐู ุ ูู ุงููุณุชุญุณู ุงุณุชุฎุฏุงู ูุฐู ุงูุฃุดูุงู ูู ุงูุฃูุฑุงุต ุงูุงูุชุฑุงุถูุฉ ูุฃูุธูุฉ ุงููููุงุช ูู ุญุงููุงุช VDI ุงูุชู ูููู ุชูุธูููุง ุจุนุฏ ุจุนุถูุง ุงูุจุนุถ. </p><br><h1 id="zapusk-klastera" style=";text-align:right;direction:rtl">  ุฅุทูุงู ุงููุชูุฉ </h1><br><blockquote style=";text-align:right;direction:rtl">  ูู ุญูู ูููู ุฅููุงู ุฌููุน ุงูุนูุฏ ูู ููุณ ุงูููุช ุ ูุง ูููู ุจุฏุก ุงูุนูุฏ ูู ููุช ูุงุญุฏ !!!  ูุฌุจ ุชูุตูู ุงูุนูุฏ ุชุฏุฑูุฌููุง.  ุจุฏุกูุง ูู ุงูุนูุฏุฉ ุงูุชู ุชู ุชุญุฏูุฏูุง ูุฃูู ูุฑุฉ ูู ูุงุฆูุฉ ุงูุนูุฏ. <br>  <em>(ูุฐู ุนุจุงุฑุฉ ุบุฑูุจุฉ ููุบุงูุฉ - ุชูุฑูุจูุง ููู.)</em> </blockquote><br><h1 id="vdi" style=";text-align:right;direction:rtl">  Vdi </h1><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุงุฎุชุตุงุฑ ุนุงู ูู <strong>Sheepdog</strong> ูููุฑุต ุงูุงูุชุฑุงุถู ุ ูููุณ ุชูุณููู ุงููุญุฏุฏ <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">.7</a></sup> <sup><a name="cite_ref-7"></a></sup>  .  ุจุดูู ุนุงู ุ ูุฐุง ูุฑุจุน ุงูุชุฑุงุถู ูุญุชูู ุนูู ุญุฌูุฑุงุช ุฐุงุช ุญุฌู ุซุงุจุช ุญูุซ ูููู <strong>Sheepdog</strong> ุจุนุฏ ุฐูู ุจูุถุน ุงูุจูุงูุงุช ุงูุชู ูุฑุณููุง ุงูุนููู. </p><br><h1 id="sozdanie-vdi" style=";text-align:right;direction:rtl">  ุฅูุดุงุก VDI </h1><br><p style=";text-align:right;direction:rtl">  ูุจู ุฅูุดุงุก VDI ุงูุฃูู ุฃู ุงุณุชูุฑุงุฏู ุ ูุญุชุงุฌ ุฅูู ุชูุณูู ุงููุฌููุนุฉ.  ุนูุฏ ุชูุณูู ูุฌููุนุฉ ุ ูุชู ุชุนููู ุงููุนููุงุช ุงูุชู ุณูุชู ุงุณุชุฎุฏุงููุง ุงูุชุฑุงุถููุง ุนูุฏ ุฅูุดุงุก ูู VDI ูุงุญู. </p><br><p style=";text-align:right;direction:rtl">  ูุซุงู ููุถุญ ุฅูุดุงุก VDI ุฌุฏูุฏ ุจุงุณู Disk1 ู 1 GB ูู ุงูุญุฌู </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi create disk1 1G root</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@nod</span></span></span><span class="hljs-comment">1 :~# collie vdi list Name Id Size Used Shared Creation time VDI id Copies Tag Block Size Shift disk1 0 1.0 GB 0.0 MB 0.0 MB 2015-12-04 14:07 e8b18f 2 22</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ูุนุฑู</strong> <br>  ูุนุฑู VDI </p><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุญุฌู</strong> <br>  ุญุฌู VDI ุงูุฐู ูู ูุชู ุชุฎุตูุตู ูุณุจููุง ุนูู ุงูููุฑ. <br>  ุฅุฐุง ูุงู ูุฐุง VDI ุจุชูุณูู ูุชุฒุงูุฏ (qcow2 ููุง ุดุงุจู) ุชู ุฅูุดุงุคู ุจุงุณุชุฎุฏุงู <code>qemu-img convert</code> ุ ููู ูุทุงุจู ุญุฌู ุงููุฑุต ุงูุธุงูุฑู ุ ููููู ุณูููู ุจุงุณุชูุฑุงุฑ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ุชุณุชุฎุฏู</strong> <br>  ูุนูููุงุช ุญูู ููุฏุงุฑ ุงููุณุงุญุฉ ุงูุชู ุชุดุบููุง ูุงุฆูุงุช ุจูุงูุงุช VDI. <br>  ูู ูุดุบู VDI ุ ุงูุฐู ูุง ูุชุทูุจ ุชุฎุตูุต ูุงุฆูุงุช ุงูุจูุงูุงุช ุฃุซูุงุก ุงูุฅูุดุงุก ุ ุดูุฆูุง ุนูู ุงูุฅุทูุงู ุ ุญูุซ ูู ูุชู ุฅูุดุงุก ูุงุฆูุงุช ุงูุจูุงูุงุช ูู ุจุนุฏ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุดุชุฑู</strong> <br>  ุญุฌู ูุงุฆูุงุช ุงูุจูุงูุงุช ุงูุชู ูุชู ูุดุงุฑูุชูุง ุจูุงุณุทุฉ VDIs ุงูุฃุฎุฑู </p><br><p style=";text-align:right;direction:rtl">  <strong>ููุช ุงูุฎูู</strong> <br>  ููุช ุฅูุดุงุก VDI </p><br><p style=";text-align:right;direction:rtl">  <strong>ุญุฌู ุงููุชูุฉ</strong> <br>  ุญุฌู ูุงุฆู VDI.  ุฅูุชุจุงู!  ูู ูุชู ุชุญุฏูุฏู ุจุงูููุบุงุจุงูุช ุ ูููู ูููุฉ ูู ูุญุฏุชู ุจุงูุช.  ูู ุงูุฅุตุฏุงุฑุงุช ุงูุฃูุฏู ุ ุชู ุงุณุชุฎุฏุงู ูุงุฆูุงุช ุฐุงุช ุญุฌู ุซุงุจุช 4 ููุบุง ุจุงูุช ููุท.  ุญุงููุง ุ ูุฏ ูููู VDI ูุงุฆูุงุช ุฃูุจุฑ.  ุงูุญุฌู ุงูุฃูุซู ููุงุฆู VDI ููุฌูุงุฒ ุงูุธุงูุฑู ุงูุนุงุฏู ูุดุจู 64 ููุฌุง ุจุงูุช (26).  ุงูุญุฌู ุงูุงูุชุฑุงุถู 22 (4 ููุบุงุจุงูุช) ูู ุฃูุถูุง ุงูุญุฏ ุงูุฃุฏูู.  ูุง ูููู ุชุซุจูุช ุฃูู.  ูููุง ุตุบุฑ ุญุฌู ุงููุงุฆู ุ ุฒุงุฏ ุนุฏุฏ ุงููููุงุช ุงูุชู ูุฌุจ ุนูู <strong>Sheepdog</strong> ูุนุงูุฌุชูุง <strong>ุฃุซูุงุก</strong> ุงูุนูู ูุน VDI ุ ูุงูุนูู ูุน ุงููููุงุช ููุณุช ูุดููุฉ ุฑุฎูุตุฉ ูู ูุฌูุฉ ูุธุฑ IO.  ูููู ุฃู ูุคุฏู ุนุฏุฏ ูุจูุฑ ูู ุงููููุงุช ุ ุฎุงุตุฉ ูุน ูุญุฏุงุช ุชุญูู SATA ุงูุจุทูุฆุฉ ุ ุฅูู ุชุฏููุฑ ุญุงุฏ ูู ุณุฑุนุงุช ุงููุฑุงุกุฉ ูุงููุชุงุจุฉ.  ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงููุงุฆูุงุช ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูู 31 (2 ุฌูุฌุงุจุงูุช).  ูููู ุฃู ูููู ูุฐุง ูููุฏูุง ุฅุฐุง ูุงู VDI ูุฎุฒู ุจุงุณุชูุฑุงุฑ ูููุฉ ูุจูุฑุฉ ูู ุงูุจูุงูุงุช ุงูุซุงุจุชุฉ ุ ูุซู ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูุนุฑู Vdi</strong> <br>  ูุนุฑู VDI. </p><br><h2 id="chto-soderzhit-vdi" style=";text-align:right;direction:rtl">  ูุงุฐุง ูุญุชูู VDIุ </h2><br><p style=";text-align:right;direction:rtl">  ูุญุชูู VDI ูู ุงูุจูุงูุงุช.  ูุฐุง ุฌูุงุฒ ูุชูุฉ ููุฒุนุฉ ุ ูุฐูู ูุง ูุญู <strong>Sheepdog</strong> ูุฐู ุงูุจูุงูุงุช ุฃู ุงูุจูุงูุงุช ุงูููููุฉ.  ูู ูุฌูุฉ ุงููุธุฑ ูุฐู ุ ูุจุฏู VDI ููุฌูุฏ ููุทูู LVM.  ูุชูุงูู VDI ุงูููุชุธ ูุณุจููุง ูุน ูุณู LV ุงูููุงุณููู ูุน ูุทุงู ูุฎุตุต ุ ุจูููุง ูุดุจู VDI ูุณู LV ุฑููุน ุชู ุฅูุดุงุคู ูู ุชุฌูุน (ุงูุธุฑ LVM (thin_provisioning)) ุ ูููู ูุน ุงุฎุชูุงู ุฃู ูุทุงูุงุช ุงูุจูุงูุงุช (ุงููุงุฆูุงุช) ูุง ูุชู ุชุฎุฒูููุง ูุญูููุง ุญุธุฑ ุงูุฃุฌูุฒุฉ ุ ูุชูุชุดุฑ ุจูู ุงูุนูุฏ. </p><br><blockquote style=";text-align:right;direction:rtl">  ูุนูู ุชูุณูู VDI ูู ูุฐุง ุงูููุงุณ ููุธุงู ูููุงุช.  ูุดุบู ุงูุจุนุถ ูุทุงูุงุช (ูุงุฆูุงุช) ูุญุฌูุฒุฉ ุจุงูุชุณูุณู ุ ููุนูููุง ุงูุจุนุถ ุงูุขุฎุฑ ุนูู ุฃููุง Inodes ุ ุซู ูุฑุณููู ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ุฅูููู.  ูููู ุฃู ูุคุฏู ุงูุฌูุน ุบูุฑ ุงูุตุญูุญ ุจูู ูุธุงู ูููุงุช ุชุฎุฒูู ุงูุนูุฏุฉ ูุชูุณูู VDI ููุธุงู ุงููููุงุช ุงูุฏุงุฎูู ุฅูู ุชุฏููุฑ ูุจูุฑ ูู ุฃุฏุงุก ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ. </blockquote><br><h2 id="kak-poluchit-informaciyu-o-vdi" style=";text-align:right;direction:rtl">  ููููุฉ ุงูุญุตูู ุนูู ูุนูููุงุช ุญูู VDI </h2><br><p style=";text-align:right;direction:rtl">  ููุนุฑูุฉ ุงููุฒูุฏ ุญูู ุชูุณูู VDI ุ ููููู ุงุณุชุฎุฏุงู <strong>qemu-img info</strong> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel">root@nod1 :~# qemu-img info sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:disk1 <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>: sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:test2 <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: qcow2 virtual <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>G (<span class="hljs-number"><span class="hljs-number">12884901888</span></span> bytes) disk <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">4.0</span></span>G cluster_size: <span class="hljs-number"><span class="hljs-number">65536</span></span> Format specific information: compat: <span class="hljs-number"><span class="hljs-number">1.1</span></span> lazy refcounts: false refcount bits: <span class="hljs-number"><span class="hljs-number">16</span></span> corrupt: false</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุฅุฎุฑุงุฌ ุงูุฃูุฑ ุ ููููู ูุนุฑูุฉ ุฃู ุงููุฑุต 1 ูุฏูู ุญุฌู ุงุณูู 12 ุฌูุฌุง.  ุญุงููุง ูุณุชุบุฑู 4G ููุท.  ูุธุฑูุง ูุฃูู ุจุชูุณูู qcow2 ุ ููู ุงููุงุถุญ ุฃูู ุชู ุฅูุดุงุคู ูุฒูุงุฏุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel">root@nod1 :~# collie vdi list Name Id Size Used Shared Creation time VDI id Copies Tag Block Size Shift disk2 <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">4.0</span></span> GB <span class="hljs-number"><span class="hljs-number">4.0</span></span> GB <span class="hljs-number"><span class="hljs-number">0.0</span></span> MB <span class="hljs-number"><span class="hljs-number">2015</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-number"><span class="hljs-number">825</span></span>dc1 <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> root@nod1 :~# qemu-img info sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:disk2 <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>: sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:disk2 <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: raw virtual <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">4.0</span></span>G (<span class="hljs-number"><span class="hljs-number">4294967296</span></span> bytes) disk <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">4.0</span></span>G root@nod1 :~# find /datastore/obj/ | grep <span class="hljs-number"><span class="hljs-number">825</span></span>dc1 /datastore/obj/meta/<span class="hljs-number"><span class="hljs-number">80825</span></span>dc100000000 /datastore/obj/c1/<span class="hljs-number"><span class="hljs-number">00825</span></span>dc100000000 /datastore/obj/c1/<span class="hljs-number"><span class="hljs-number">00825</span></span>dc100000001</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูุฐู ุงูุญุงูุฉ ุ ุชู ุฅูุดุงุก Disk2 ููุญุฑู VDI 4 ุฌูุฌุง ุจุงูุช ููุฎุตุต ูุณุจููุง ุจุชูุณูู ุฎุงู ูุน ุญุฌู ูุชูุฉ 2 ุฌูุฌุง ุจุงูุช ุ ูุงูุฐู ูุง ูุณุชุบุฑู ุณูู 2 ุฌูุฌุง ุจุงูุช ููุท </p><br><h2 id="eksport-vdi-v-fayl" style=";text-align:right;direction:rtl">  ุชุตุฏูุฑ VDI ุฅูู ููู </h2><br><p style=";text-align:right;direction:rtl">  ูููู ุชุตุฏูุฑ ูุญุชูู VDI ูู <strong>Sheepdog</strong> ุจุนุฏุฉ ุทุฑู.  ุฑุจูุง ุฃุณุฑุน ุงุณุชุฎุฏุงู <strong>ุงูููุจ ูุฑุงุกุฉ</strong> .  ุงูุฃูุฑ ูุฑุจู ุจุนุถ ุงูุดูุก ุ ููููู ูุนูู ููุท: "ูู ุจุชุญููู ูุญุชููุงุช VDI ูุฅุฑุณุงููุง ุฅูู STDOUT .." ุ ูุงูุชู ูููู ุฅุนุงุฏุฉ ุชูุฌูููุง ุฅูู ููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi read disk1 &gt; /backups/soubor.raw</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู VDI ูุญุชูู ุนูู 10G ูููู ุชู ุงุณุชุฎุฏุงู 2G ููุท ุ ูุณูููู ุจุฅูุดุงุก ููู ุจุณุนุฉ ูุงููุฉ 10 ุฌูุฌุงุจุงูุช. </p><br><p style=";text-align:right;direction:rtl">  <strong>ูู ูุฐุง ุงูุฃูุฑ ุ ูุง ุชุชุบูุฑ ูุญุชููุงุช VDI</strong> ุ ูุฐูู ุฅุฐุง ูุงู ูููู ุงุณุชุฎุฏุงู ูุญุชููุงุช VDI ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุฑุต ุงูุชุฑุงุถู ุจุชูุณูู qcow2 ุงููุถุบูุท ุ ูุจุงุดุฑุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs mel">.. -drive <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>:/disk1_exportovany_z_vdi,..,<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>=qcow2 ..</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุงู ุทุฑููุฉ ุฃุฎุฑู ููุญุตูู ุนูู ูุญุชููุงุช VDI ูู ููู ููู ุงุณุชุฎุฏุงู <strong>qemu-img convert</strong> .  ุฅูู ููุณ ุณุฑูุนูุง ุฌุฏูุง ุ ููููู ูุณูุญ ูู ุจุชุญููู VDI ุฅูู ุชูุณูู ุขุฎุฑ ุจุงุณุชุฎุฏุงู ุฎูุงุฑุงุช ูุฎุชููุฉ ูุชูุณูู ุงููุฑุต ุงูุธุงูุฑู ุงูููุงุจู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># qemu-img convert -f qcow2 -O file -o preallocation=full,nocow=on sheepdog:localhost:8000:disk1 /disk1_exportovany_z_vdi</span></span></code> </pre> <br><h2 id="inkrementnoe-rezervnoe-kopirovanie" style=";text-align:right;direction:rtl">  ูุณุฎ ุงุญุชูุงุทู ุชุฒุงูุฏู </h2><br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุณุฎ ุงุญุชูุงุทู ุชุฒุงูุฏู </p><br><p style=";text-align:right;direction:rtl">  ุฏูุชุง ุจูู ุงูููุทุฉ ุงูุฃููู ูุงูุซุงููุฉ .. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi backup test -F snap1 -s snap2 /backups/soubor_diff</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงุณุชุนุงุฏุฉ VDI ูู ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุชุฒุงูุฏู </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi restore test -s snap1 /tmp/backup restoring /tmp/backup... done</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุงุณุชูุฑุงุฏ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุชุฒุงูุฏุฉ ุ ูุฌุจ ุฃู ูุญุชูู VDI ุจุงูุทุจุน ุนูู ุงูููุทุฉ ุงูุชู ุชู ุนูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูููุง. </p><br><p style=";text-align:right;direction:rtl">  ุงูุชุญูู ุจูุฑุงุกุฉ ุงููุญุชููุงุช ุงูุฃุตููุฉ ูุงุฎุชุจุงุฑ ุงูุตูุฑุฉ ... </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby"> root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi read test 0 512 -s 3</span></span></code> </pre> <br><h1 id="import-vdi-iz-fayla" style=";text-align:right;direction:rtl">  ุงุณุชูุฑุงุฏ VDI ูู ุงูููู </h1><br><p style=";text-align:right;direction:rtl">  ูููู ุฅุฌุฑุงุก ุงุณุชูุฑุงุฏ ูุฑุต ุงูุชุฑุงุถู ููุฌูุฏ ูููู FS ูุญูู ุจุดูู ูุดุงุจู ููุชุตุฏูุฑ.  ูููู ูุน ุงูุงุฎุชูุงู ุงูุฐู <strong>ุชุณุชุฎุฏูู ูุชุงุจุฉ ุงูููุจ</strong> ("ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู STDIN ูุงููุชุงุจุฉ ุฅูู ููู VDI ..") </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi write disk1 &lt; /backups/soubor.raw</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl"></p><br><blockquote style=";text-align:right;direction:rtl"><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุง ูููู ุงุณุชูุฑุงุฏ ุงููุญุชูู ุฅูุง ุฅูู VDI ููุฌูุฏ. </li><li style=";text-align:right;direction:rtl">  ูุดุบู VDI ุงููุณุชูุฑุฏ ุฏุงุฆููุง ูุณุงุญุฉ ุฃูุจุฑ ูู ุงูููู ุงูุฃุตูู ุ ูุฃู ูุชู ุงูุจูุงูุงุช ุงูุชู ุชุชู ุงุณุชุนุงุฏุฉ VDI ูููุง ุชุญุชูู ุนูู ุจูุงูุงุช ูู ุงูููุทูุฉ ุงููุญุฏุฏุฉ. </li></ul><br></blockquote><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูู ููู VDI ููุฌูุฏูุง ุจุนุฏ ููุง ูุนูู ููุฏุงุฑ ุงููุณุงุญุฉ ุงููุทููุจุฉ ูููุฑุต ุงูุธุงูุฑู ุ ููููููุง ุงุณุชุฎุฏุงู <strong>qemu-img convert</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># qemu-img convert -f file -O qcow2 -o redundancy=2:1 ./disk_ukladany_do_vdi sheepdog:localhost:8000:disk</span></span></code> </pre> <br><blockquote style=";text-align:right;direction:rtl">  ุนูู ุงูุฑุบู ูู ุฃู ุชูุณููุงุช VDI ูุซู qcow2 ู qed ูุบูุฑูุง ูููู ุงุณุชุฎุฏุงููุง ูู VDI.  ูู ุฃุฌู ููุงุกุฉ ุงูุฅุฏุฎุงู / ุงูุฅุฎุฑุงุฌ ุ ูู ุงูุฃูุถู ุฅุฌุฑุงุก ุชุญุฏูุฏ ูุณุจู ููุชู โโุงูุจูุงูุงุช. <br>     ,        <strong>Sheepdog</strong>     VDI. </blockquote><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://www.sheepdog-project.org/doc/vdi_read_and_write.html</a> </p><br><h1 id="proverka-vdi" style=";text-align:right;direction:rtl">  VDI </h1><br><p style=";text-align:right;direction:rtl">    VDI ,      . </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi check disk1</span></span></code> </pre> <br><blockquote style=";text-align:right;direction:rtl">    VDI,     .    Sheepdog    ,      .     ,            . </blockquote><p style=";text-align:right;direction:rtl"> :   'dog node kill'     ,         ethernet ,   sheep    .          (,    Ethernet),         sheep .               . </p><br><h2 id="io-proizvoditelnost-vdi" style=";text-align:right;direction:rtl"> IO  VDI </h2><br><p style=";text-align:right;direction:rtl">  VDI    .          .       ,   IO   VDI. </p><br><p style=";text-align:right;direction:rtl">   <strong>Sheepdog</strong>    SYNC,    .   -,     VFS,   ,       ,       . </p><br><p style=";text-align:right;direction:rtl">       VDI  <strong>Sheepdog</strong>    ,            .              .  <strong>Sheepdog</strong>        VDI-. </p><br><h2 id="ispolzovanie-vfs-kesha-nody" style=";text-align:right;direction:rtl">  VFS-  </h2><br><p style=";text-align:right;direction:rtl">      IO  VDI      <strong>sheep</strong>   <strong>-n</strong> .    SYNC         ,   ,        VFS .     ,   VFS  ,   ,      ! </p><br><p style=";text-align:right;direction:rtl">         .            ,          โ , ,    . </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">sheep</span></span> -n ...</code> </pre> <br><blockquote style=";text-align:right;direction:rtl">   <strong>Sheepdog</strong>      .      <strong>-D</strong> </blockquote><br><h1 id="obektnyy-kesh" style=";text-align:right;direction:rtl">   </h1><br><p style=";text-align:right;direction:rtl">     -   .   <strong>sheep</strong>           -   IO โ  SSD .  ,   VDI,       SYNC   .             . </p><br><p style=";text-align:right;direction:rtl">       ,   VDI     ,         VDI   . ,     ,     ,      VDI. </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs dos">sheep -w size=<span class="hljs-number"><span class="hljs-number">20000</span></span>,directio,<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span>=/<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span> ...</code> </pre> <br><p style=";text-align:right;direction:rtl"> <strong>size</strong> <br>   </p><br><p style=";text-align:right;direction:rtl"> <strong>directio</strong> <br>     <strong>sheep</strong>      ,      .      SSD. </p><br><p style=";text-align:right;direction:rtl"> <strong>dir</strong> </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs erlang">     ,     .</code> </pre> <br><p style=";text-align:right;direction:rtl">       ( )   <strong>dog</strong> . </p><br><blockquote style=";text-align:right;direction:rtl">        VDI          <strong>dog vd cashe flush</strong> ,     VDI! </blockquote><br><h2 id="zhurnal" style=";text-align:right;direction:rtl">  </h2><br><p style=";text-align:right;direction:rtl">   โ  .           VDI,     VFS   ,           (/store_dir/journal/[epoch]/[vdi_object_id]),     ,    . </p><br><p style=";text-align:right;direction:rtl">   IO   ,        (cik, cak),   (sequence). </p><br><p style=";text-align:right;direction:rtl">  , <strong>Sheepdog</strong>        VDI ,           ,  SSD-.     ,       VDI    ,           ,                VDI. </p><br><p style=";text-align:right;direction:rtl">        <strong>sheep</strong>      โ         </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs matlab">$ sheep -<span class="hljs-built_in"><span class="hljs-built_in">j</span></span> <span class="hljs-built_in"><span class="hljs-built_in">size</span></span>=<span class="hljs-number"><span class="hljs-number">256</span></span>M ...</code> </pre> <br><p style=";text-align:right;direction:rtl">       ,  VDI      ,    .        -,   โ   โ         -: </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs matlab">$ sheep -<span class="hljs-built_in"><span class="hljs-built_in">j</span></span> dir=/dir,<span class="hljs-built_in"><span class="hljs-built_in">size</span></span>=<span class="hljs-number"><span class="hljs-number">256</span></span>M ...</code> </pre> <br><p style=";text-align:right;direction:rtl">  dir =      ,          .       ,     SW RAID     SSD. </p><br><p style=";text-align:right;direction:rtl"> <strong>:</strong>    <strong>sheep</strong>     ,    .     ,      skip,   . </p><br><pre style=";text-align:right;direction:rtl"> <code class="hljs matlab">$ sheep -<span class="hljs-built_in"><span class="hljs-built_in">j</span></span> dir=/dir,<span class="hljs-built_in"><span class="hljs-built_in">size</span></span>=<span class="hljs-number"><span class="hljs-number">256</span></span>M,skip ...</code> </pre> <br><hr><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">โ</a> <a name="cite_note-1"></a> .       2015 . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://events.linuxfoundation.jp/sites/events/files/slides/COJ2015_Sheepdog_20150604.pdf</a></sup> </li><li style=";text-align:right;direction:rtl"> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">โ</a> <a name="cite_note-2"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://www.abclinuxu.cz/blog/kenyho_stesky/2011/11/sheepdog-hrajeme-si-v-hampejzu</a></sup> </li><li style=";text-align:right;direction:rtl"> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">โ</a> <a name="cite_note-3"></a> SPOF ( <strong>S</strong> ingle <strong>p</strong> oint <strong>o</strong> f <strong>f</strong> ailure) ,             .  SPOF   VDI   iSCSI  <strong>tgtd</strong></sup> </li><li style=";text-align:right;direction:rtl"> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">โ</a> <a name="cite_note-4"></a></sup>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">1</a></sup> </li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">โ</a> <a name="cite_note-5"></a> Btrfs โ    COW,       ,        .   ,      -,      .      ,     ,              .      ,         ,   .  ,     :</sup> </p><br><p style=";text-align:right;direction:rtl"> <sup>autodefrag โ     ,          .</sup> </p><br><p style=";text-align:right;direction:rtl"> <sup>      </sup> </p><br><p style=";text-align:right;direction:rtl"> <sup>nocow โ           (),      โ           GlusterFS</sup> </p><br><p style=";text-align:right;direction:rtl"> <sup> Btrfs   ,     ,     FS,       <strong>Sheepdog</strong> .</sup> </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl"> <sup>    ,   ,    ,      </sup> </li><li style=";text-align:right;direction:rtl"> <sup>  multipath,                         .</sup> </li></ul><br><p style=";text-align:right;direction:rtl"> <sup>,  ,        ,        Sheepdog.</sup> </p><br></li><li style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">โ</a> <a name="cite_note-6"></a> <strong>Ext2</strong> .     -  FS  Btrfs,    ext2,     inode.    ext3  ext4     .   inode , Sheepdog          . ,      -,   .           ,   <strong>Sheepdog</strong>      ,         <strong>dog vdi check</strong> . ,  ext2  ,            โ    -     <strong>dog vdi md</strong> ,       VDI     .</sup> </p><br></li><li style=";text-align:right;direction:rtl"> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">โ</a> <a name="cite_note-7"></a>    ,   , <strong>vdi</strong>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">QEMU_Block_Disk</a></sup> </li></ol><br><h1 id="ssylki" style=";text-align:right;direction:rtl">  ุงููุฑุงุฌุน </h1><br><p style=";text-align:right;direction:rtl"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://github.com/collie/sheepdog/wiki</a> โ ,        <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://www.osrg.net/sheepdog/</a> โ    Nippon Telegraph and Telephone Corporation <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://www.sheepdog-project.org/doc/index.html</a> โ   Sheepdog   0.8.0;  โ Valerio Pachera <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">http://www.admin-magazine.com/Archive/2014/23/Distributed-storage-with-Sheepdog</a> โ  Udo Seidela   <strong>Sheepdog</strong> ,   23-   Admin   2014  </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar412739/">https://habr.com/ru/post/ar412739/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar412725/index.html">ููููุฉ ุฌุนู ุงูุจููุฉ ุงูุชุญุชูุฉ ูุชูููููุฌูุง ุงููุนูููุงุช ุงูุฎุงุตุฉ ุจู ูููุฉ</a></li>
<li><a href="../ar412727/index.html">ููููุฉ ุงุฎุชูุงุฑ ุฃุฏุงุฉ ููููุงุฐุฌ ุงูุฃูููุฉ ูู 2018ุ</a></li>
<li><a href="../ar412729/index.html">ุงููุงุฆุญุฉ ุงูุนุงูุฉ ูุญูุงูุฉ ุงูุจูุงูุงุช. ูู ูู ุงูุถุฑูุฑู ุงูููุงู ุจู ูู ุฑูุณูุงุ</a></li>
<li><a href="../ar412735/index.html">ุงุชุฑู ูุณุงุจูุฉ ATM ูุญุฏูุง ูู PHDays 8</a></li>
<li><a href="../ar412737/index.html">ุญูุงูุฉ ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ูู 3 ูููุงุฑ ุดุฎุต - ุฃูุฌู ุงูุชุดุงุจู ูุงูุงุฎุชูุงู ูู ุงูุชุดุฑูุนุงุช ูู ุฏูู ุงูุจุฑููุณ</a></li>
<li><a href="../ar412741/index.html">ููู ุชุชููู ุนู ุงูุฎูู ูู ุฃู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุณูุชุฑูู ุจุฏูู ุนูู</a></li>
<li><a href="../ar412743/index.html">ุงููููุฉ: ุงููุฎุจุฑ ุงูุณูุจุฑุงูู</a></li>
<li><a href="../ar412747/index.html">ูุธู ุงููุนูููุงุช ุงูุฅุฏุงุฑูุฉ. ุชุฎุฒูู ุงูุจูุงูุงุช ุงูุทุจูุฉ</a></li>
<li><a href="../ar412749/index.html">ุงูุฅููุชุฑูููุงุช ููู: ุงูุชูุงุฑ ุงูููุฑุจุงุฆู</a></li>
<li><a href="../ar412751/index.html">ุงูุตูุน: ูุธุฑูุฉ ูููุงุฑุณุฉ ุงูุนูุงุฌ ุ ุงูุฌุฒุก ุงูุฃูู "ุจูุฏู ุฏููุฏุฑูุชุณุชูุณุชุฑูู ุ ุนุฏูู"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>