<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì£ üïâÔ∏è üëéüèø Maison intelligente sur roues ... Alice üç∂ ü¶Ä üñï</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Salut Actuellement, j'ai pu r√©aliser l'une des capacit√©s d'une maison intelligente, √† savoir le contr√¥le vocal √† part enti√®re de la lumi√®re via le ser...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Maison intelligente sur roues ... Alice</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/483922/">  Salut  Actuellement, j'ai pu r√©aliser l'une des capacit√©s d'une maison intelligente, √† savoir le contr√¥le vocal √† part enti√®re de la lumi√®re via le service Yandex d'Alice, en particulier via la station Yandex de la colonne Smart et Alice au t√©l√©phone.  Mais tout fonctionnera √©galement sur n'importe quel appareil sur lequel il est install√©.  L'installation lumineuse est bas√©e sur 4 contr√¥leurs RGBWW MiLight FUT039 et le contr√¥leur WiFi MiLight ibox2 (qui tire 4 zones de contr√¥le), les contr√¥leurs MiLight (3 pi√®ces) sont configur√©s en parall√®le et fonctionnent comme contr√¥le de sauvegarde en l'absence d'Internet, mais ils n'ont presque aucun lien avec la commande vocale, par cons√©quent, nous ne les prendrons pas en compte. <br><br>  Quelle est la diff√©rence entre cette impl√©mentation?  Le circuit de contr√¥le est simple √† mettre en ≈ìuvre, ne n√©cessite aucune comp√©tence en programmation et co√ªte environ le co√ªt d'un haut-parleur intelligent et d'un micro-ordinateur Raspberry 3, le logiciel du micro-ordinateur est enti√®rement gratuit.  Et vous n'avez pas besoin de connecter les appareils que vous contr√¥lez aux serveurs des fabricants.  Internet est n√©cessaire pour les services Alice et Yandex, et vous devez le recracher sur le port 443. <br><a name="habracut"></a><br>  Je vais bri√®vement expliquer comment j'en suis arriv√© √† cela.  Initialement, la lumi√®re √©tait contr√¥l√©e par les contr√¥leurs MiLight FUT039 via des t√©l√©commandes suspendues aux points les plus pratiques de l'appartement, puis j'ai achet√© le contr√¥leur iBox2, apr√®s quoi j'ai pu contr√¥ler la lumi√®re √©galement √† partir du t√©l√©phone.  Bient√¥t, sur les conseils d'un coll√®gue, j'ai acquis une mini-station Yandex tr√®s intelligente, j'ai vraiment aim√© la possibilit√© de r√©gler une alarme par la voix, de d√©finir des rappels et d'autres bagatelles.  Apr√®s cela, il s'est av√©r√© que la colonne peut g√©rer les appareils intelligents, m√™me via des comptes sur les sites Web des fabricants. <br><br>  Apr√®s avoir lu les informations sur le fonctionnement du contr√¥le via des ensembles de comptes, l'id√©e est apparue que vous pouvez en quelque sorte donner directement des commandes aux appareils intelligents via le Wi-Fi, car le t√©l√©phone √©tait en mesure de contr√¥ler la lumi√®re via le Wi-Fi.  En r√©alit√©, tout s'est av√©r√© √™tre un peu diff√©rent, j'ai d√ª pelleter et √©liminer de nombreuses options cass√©es comme le transfert de sortie de scripts en python ou pkhp via un module radio, mais en cons√©quence, tout s'est av√©r√©. <br><br>  Je donnerai imm√©diatement des articles avec des liens sur la base desquels il a √©t√© mis en ≈ìuvre et je d√©crirai un peu ce que j'en ai retir√©.  La chose la plus int√©ressante est que chaque article a donn√© sa direction dans la gestion des appareils, mais l'effet a √©t√© de combiner ces fonctionnalit√©s. <br><br>  Alors <br><br><h4>  1. <a href="https://habr.com/ru/post/412261/">"Alice, allume la lumi√®re"</a> </h4><br>  Le premier article, mais pas le principal.  La principale chose que j'ai prise ici est des informations sur l'existence d'Openhab2, l'installation et la connexion du contr√¥leur iBox2 √† celui-ci.  Apr√®s avoir install√© le hub ouvert, j'ai pu contr√¥ler la lumi√®re √©galement depuis l'ordinateur.  Le plus √©l√©mentaire est les 3 premiers chapitres, puis √† mon avis, le non-sens a disparu.  Je m'excuse aupr√®s de l'auteur, mais √ßa l'est.  Connecter davantage de ressources externes (Internet) de gauche pour √©tablir la communication et une sorte de ¬´sorts magiques¬ª est un √©chec. <br><br><h4>  2. <a href="https://habr.com/ru/post/465537/">¬´Yandex: une maison intelligente pour adultes¬ª</a> </h4><br>  Cet article est basique et contraignant.  C'est ici que j'ai r√©alis√© o√π aller et comment tout mettre en ≈ìuvre.  L'auteur donne un sch√©ma g√©n√©ral d'interaction entre les appareils et les services, et d√©monte clairement le syst√®me de commandes et d'appareils dans YandexUD.  Et le plus important est le plugin <a href="https://habr.com/ru/users/munrexio/" class="user_link">yandex2mqtt</a> √©crit par l'auteur de <a href="https://habr.com/ru/users/munrexio/" class="user_link">Munrexio</a> ( <a href="https://sprut.ai/client/plugins/instruction/1821" rel="nofollow">https://sprut.ai/client/plugins/instruction/1821</a> ), sans lequel rien n'aurait fonctionn√©.  En bref, ce que j'ai obtenu d'ici: le plugin yandex2mqtt, l'id√©e d'utiliser un serveur MQTT pour transf√©rer les √©tats et les commandes, le syst√®me de travail avec YandexUnnyDom et Yandex.Dialogs en utilisant des certificats pour l'autorisation et l'enregistrement des comp√©tences.  Il a fallu tout jusqu'√† la t√™te de Node-Red.  En outre, les sp√©cificit√©s associ√©es √† l'utilisation du contr√¥leur Wiren Board par l'auteur, √† savoir  La lecture est principalement destin√©e √† une compr√©hension g√©n√©rale.  Dans mon cas, le module principal est OpenHub, qui prend en charge la gestion des appareils, et le plugin yandex2mqtt et le serveur MQTT sont les √©l√©ments de connexion avec les services Yandex <br><br>  Information compl√©mentaire: <br><br><h4>  3. Raspberry Pi: Configuration / Test du courtier et du client Mosquitto sur le Raspberry Pi </h4><br>  Qu'est-ce que MQTT et pourquoi est-il n√©cessaire dans IIoT?  Description du protocole MQTT <a href="http://wikihandbk.com/wiki/Raspberry_Pi:%25D0%259D%25D0%25B0%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25B9%25D0%25BA%25D0%25B0/%25D0%25A2%25D0%25B5%25D1%2581%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B1%25D1%2580%25D0%25BE%25D0%25BA%25D0%25B5%25D1%2580%25D0%25B0_%25D0%25B8_%25D0%25BA%25D0%25BB%25D0%25B8%25D0%25B5%25D0%25BD%25D1%2582%25D0%25B0_Mosquitto_%25D0%25BD%25D0%25B0_Raspberry_Pi" rel="nofollow">http://wikihandbk.com/wiki/Raspberry_Pi:%D0%9D%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0% B0 /% D0% A2% D0% B5% D1% 81% D1% 82% D0% B8% D1% 80% D0% BE% D0% B2% D0% B0% D0% BD% D0% B8% D0% B5_ % D0% B1% D1% 80% D0% BE% D0% BA% D0% B5% D1% 80% D0% B0_% D0% B8_% D0% BA% D0% BB% D0% B8% D0% B5% D0 % BD% D1% 82% D0% B0_Mosquitto_% D0% BD% D0% B0_Raspberry_Pi # .D0.A2.D0.B5.D1.81.D1.82.D0.B8.D1.80.D0.BE.D0. B2.D0.B0.D0.BD.D0.B8.D0.B5_.D0.B1.D1.80.D0.BE.D0.BA.D0.B5.D1.80.D0.B0_.D0.B8_. D0.BA.D0.BB.D0.B8.D0.B5.D0.BD.D1.82.D0.B0_Mosquitto_.D0.BD.D0.B0_Raspberry_Pi.5B1.5D</a> - partie d'application, installation et travail sur la ligne de commande pour contr√¥les de sant√© <br>  <a href="https://ipc2u.ru/articles/prostye-resheniya/chto-takoe-mqtt/" rel="nofollow">https://ipc2u.ru/articles/prostye-resheniya/chto-takoe-mqtt/</a> - une compr√©hension g√©n√©rale du protocole <br><br><h4>  4. <a href="https://dialogs.yandex.ru/developer/" rel="nofollow">https://dialogs.yandex.ru/developer/</a> , <a href="https://dialogs.yandex.ru/developer/skills/" rel="nofollow">https://dialogs.yandex.ru/developer/skills/</a> plateforme de dialogue pour cr√©er et tester des comp√©tences </h4><br>  L'installation et la configuration sont d√©crites en d√©tail dans les articles d'origine, je vais donc vous donner la proc√©dure.  Dans un avenir proche, je publierai l'image de Raspbian avec un syst√®me de travail, bien s√ªr, je changerai mes mots de passe et supprimerai les certificats de travail, les instructions pour les cr√©er sont dans les articles, et plus tard, au fil du temps, je rel√®verai le syst√®me sur une nouvelle image et j'√©crirai les instructions pour les √©l√©ments avec les commandes d'installation et param√®tres.  Je dois dire tout de suite qu'il y a beaucoup d'exc√®s dans l'image, j'ai essay√© de contr√¥ler Milight dessus via le module radio RF24 et les scripts python que j'ai trouv√©s sur le github.  Mais aucune m√©thode n'a fonctionn√©, j'ai donc marqu√© sur eux, mais je n'ai pas nettoy√© le syst√®me. <br><br>  Allons-y.  Nous mettons en place Raspban Light, naturellement mis √† jour, installons et configurons le moustique (les articles d√©crivent les param√®tres avec acc√®s par login et mot de passe), transmettons les ports sur le routeur, puis sous l'article ¬´Smart home by adult¬ª nous enregistrons le domaine pour recevoir des certificats et obtenir des certificats.  Nous installons le plugin yandex2mqtt, le configurons, lui attribuons des certificats, des connexions et des mots de passe, √©ditons les p√©riph√©riques mqtt et les rubriques.  Nous nous inscrivons dans Yandex.oAuth, y obtenons des jetons pour notre domaine et nous nous inscrivons dans YandexUD, o√π nous prescrivons l'acc√®s et tout le reste.  Apr√®s l'approbation r√©ussie du brouillon par le mod√©rateur, vous pouvez voir les appareils du plugin yandex2mqtt sur le t√©l√©phone dans l'application Yandex ou sur l'ordinateur sur le service <a href="https://dialogs.yandex.ru/developer/skills/" rel="nofollow">https://dialogs.yandex.ru/developer/skills/</a> dans le brouillon dans l'onglet Test. <br><br>  Maintenant, nous d√©finissons et configurons le hub ouvert √† partir de l'article ¬´Alice, allumez la lumi√®re¬ª, vous pouvez √©galement trouver un article sur la configuration du hub ouvert sur d'autres ressources.  Apr√®s avoir ajout√©, configur√© et v√©rifi√© les appareils MiLIght, les appareils mqtt ( <a href="https://robot-on.ru/articles/prostaya-rabota-s-mqtt-v-openhab-2" rel="nofollow">https://robot-on.ru/articles/prostaya-rabota-s-mqtt-v-openhab-2</a> ), les canaux et les adresses de sujet sont configur√©s dans le hub ouvert.  Si je comprends bien, les p√©riph√©riques du plug-in yandex2mqtt re√ßoivent des commandes des services Yandex et les convertissent en vrai / faux (0/1, respectivement) ou au niveau actuel en pourcentage avec une √©tape personnalis√©e.  Le plugin envoie ces donn√©es √† des sujets, c'est-√†-dire qu'il est l'√©diteur, et l'openhub, en tant qu'abonn√© √† des sujets, prend des valeurs des sujets correspondants et les envoie aux √©l√©ments de commutation dans les appareils qui y sont enregistr√©s, √† la suite desquels les appareils sont contr√¥l√©s. <br><br>  Comme toute entreprise qui se fait pour la premi√®re fois, il existe plusieurs nuances. <br><br><ol><li>  J'ai pu installer un openhub sur mon micro-ordinateur de travail, m√™me si je devais le lancer.  Mais il ne pouvait pas le r√©installer sur une nouvelle image propre, et la solution qui a roul√© la derni√®re fois n'a pas aid√©.  Erreur (HTTP ERROR 404 Probl√®me d'acc√®s / d√©marrage / index. Raison: introuvable).  Gardez cela √† l'esprit.  Mais en option, openhub peut √©galement √™tre install√© sur un ordinateur pour les tests. </li><li>  Le certificat de domaine de letsencrypt.org est d√©livr√© pour trois mois.  Je n'ai pas pris la peine d'obtenir un autre certificat plus long </li><li>  Un brouillon de la comp√©tence sur <a href="https://dialogs.yandex.ru/developer/" rel="nofollow">https://dialogs.yandex.ru/developer/</a> a r√©ussi la mod√©ration, mais il n'a pas encore pu le publier.  Erreur (erreurs de validation: - URL du point de terminaison: erreur lors de la mise en ≈ìuvre du protocole de la maison intelligente: user_unlink: introuvable).  Jusqu'√† ce que je comprenne quel est le probl√®me.  Cela n'emp√™che pas le syst√®me de fonctionner, mais je ne me souviens pas s'il y a des restrictions sur la dur√©e de la comp√©tence non publi√©e. </li><li>  J'ai trouv√© une erreur: il s'est av√©r√© que dans les sources yandex2mqtt du fichier app.js dans la ligne "app.post ('/ provider // v1.0 / user / unlink', routes.user.unlink);" est extra oblique.  Corrig√© sur mon micro-ordinateur - la publication a r√©ussi. </li><li>  J'ai √©galement corrig√© la section de changement de canal pour le p√©riph√©rique "TV" dans config.js, celui d'origine ne fonctionnait pas </li></ol><br>  Et enfin, les perspectives de ce tas de hub ouvert, de plug-in et de moustique.  Openhub est le c≈ìur du syst√®me et peut contr√¥ler un grand nombre d'appareils (et ce n'est pas cent pi√®ces de fer), et pas seulement la lumi√®re.  Maintenant, je filme Gnusmas TV pour le contr√¥le vocal.  Puisqu'une telle gestion fonctionne d√©j√†, vous pouvez probablement copier tout ce qui se trouve sur la m√™me Alice, vous pouvez l'imaginer vous-m√™me.  Soit dit en passant, il y a quelques observations d'aujourd'hui.  J'ai trouv√© que la lumi√®re de la maison peut √™tre contr√¥l√©e √† partir de n'importe quel endroit o√π il y a Internet pour Alice, par exemple, √† partir d'un t√©l√©phone de l'autre bout de la ville et m√™me v√©rifi√©e par une cam√©ra domestique.  Et puisque la liste des commandes pour contr√¥ler l'appareil est d√©j√† enregistr√©e dans la comp√©tence, plus les commandes vocales sont reconnues et converties en texte, vous ne pouvez pas vous plaindre dans le t√©l√©phone ¬´Alice, √©teins la lumi√®re dans la chambre¬ª, mais √©cris simplement ¬´√âteins la lumi√®re dans la chambre¬ª et cela fonctionnera <br><br>  Eh bien, la vid√©o elle-m√™me: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/76LgHWx07rs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr483922/">https://habr.com/ru/post/fr483922/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr483912/index.html">Quelles sont les nouveaut√©s √† attendre de YouTrack en 2020?</a></li>
<li><a href="../fr483914/index.html">Nous vous invitons √† DINS JavaScript EVENING: nous parlons de la conception de l'API et r√©solvons les probl√®mes √† l'aide de types de donn√©es alg√©briques</a></li>
<li><a href="../fr483916/index.html">DJI n'a pas √©t√© en mesure de patcher les applications DJI Fly pour Android 10 depuis un mois maintenant</a></li>
<li><a href="../fr483918/index.html">Formation en entreprise: les leaders enseignent aux leaders</a></li>
<li><a href="../fr483920/index.html">Chaos de d√©pendance Python</a></li>
<li><a href="../fr483930/index.html">6 projets de d√©veloppement Web GitHub qui valent le d√©tour</a></li>
<li><a href="../fr483934/index.html">Autorisations de fichiers Linux</a></li>
<li><a href="../fr483936/index.html">Conf√©rence sur le d√©veloppement de jeux</a></li>
<li><a href="../fr483938/index.html">Nakamichi: √† propos des dieux de l'√®re de la cassette et des temps o√π le soleil levant brillait plus fort</a></li>
<li><a href="../fr483940/index.html">70 ans de st√©r√©otypes: comment vaincre la m√©fiance √† l'√©gard de l'Office du logement √† l'aide des technologies informatiques et am√©liorer la qualit√© de service</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>