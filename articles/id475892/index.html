<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🕠 ➖ 👸🏼 Bagaimana kami meningkatkan urutan makan siang di kantor (tanpa akses ke server) 🥉 🔃 😓</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya. 

 Saya bekerja di kantor. Pengembang perangkat lunak. Dan terkadang saya makan. Ya setiap hari. Majikan memberi kita makan siang - pek...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana kami meningkatkan urutan makan siang di kantor (tanpa akses ke server)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475892/">  Halo semuanya. <br><br>  Saya bekerja di kantor.  Pengembang perangkat lunak.  Dan terkadang saya makan.  Ya setiap hari.  Majikan memberi kita makan siang - pekerja memesan makan siang untuk besok, dan besok pemasok makan siang membawakan apa yang dipesan karyawan.  Apa yang diperintahkan dan apa yang dibawa tidak selalu bersamaan, tetapi ini tidak terjadi.  Makan siang dipesan di halaman pesanan makan siang.  Tapi ... <br><a name="habracut"></a><br>  Tapi pertama-tama, tentang bagaimana halaman pesanan makan siang terbentuk: pemasok mengirim file XLS dengan daftar harga selama seminggu. <br><br><img src="https://habrastorage.org/webt/8b/zj/sw/8bzjswumny4twmbde-z_qlxhlx8.png" alt="gambar"><br>  <i>Contoh daftar harga yang dikirim oleh pemasok</i> <br><br>  Orang yang bertanggung jawab untuk makan malam mem-parsing melalui utilitas yang dikembangkan oleh seseorang di perut perusahaan kami, menerjemahkannya ke dalam bentuk yang dapat ditampilkan oleh portal perusahaan kami.  Dan dia menampilkannya ... <br><br><img src="https://habrastorage.org/webt/mj/xe/vm/mjxevmjk1xjpktpmhzsvfqv7-zu.png" alt="gambar"><br>  <i>Tangkapan layar dengan makan malam yang dipesan</i> <br><br><img src="https://habrastorage.org/webt/g_/gv/ur/g_gvurzwytojpckxlvm9ttpk3vu.png" alt="gambar"><br>  <i>Cuplikan layar halaman pemesanan makan siang</i> <br><br>  Posisi dibagi menjadi beberapa kategori.  Informasi tentang nama dan komposisi dalam teks lengkap dan sulit dinavigasi. <br><br>  Saya ingin mengerti bahwa lebih baik tidak memesan, dan apa yang dapat Anda coba, karena orang lain menyukainya.  Artinya, saya ingin peringkat.  Saya juga ingin menerima pesanan saya di Telegram sehingga saya tidak ingat apa yang saya pesan di ruang makan. <br><br>  Jadi tujuannya jelas.  Saya harus mengatakan segera: jalan yang telah diambil oleh rekan saya dan saya jauh dari yang paling benar dan rasional.  Meski begitu: ini adalah permainan yang lengkap dalam hal arsitektur / keamanan / dukungan / toleransi kesalahan.  Tetapi apa yang telah tumbuh telah tumbuh. <br><br>  Kami tidak memiliki akses ke server, jadi Anda hanya dapat mengubah tampilan halaman dengan skrip pengguna.  Tapi bagaimana dengan peringkat?  Tidak ada akses ke database juga.  Kita membutuhkan server untuk pemrosesan pesanan, penilaian, dan interaksi dengan Telegram.  Peran ini diambil oleh server NodeJS. <br><br><h4>  Sisi server </h4><br>  Saya akan mengurus server, dan seorang rekan akan mengurus skrip pengguna yang menambahkan fungsionalitas ke halaman.  Kami mengambil server nodejs, menghubungkan express, tambahkan MySQL.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Letakkan Sequelize di atas</a> .  Dan kami akan berinteraksi dengan Telegram melalui <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">node-telegram-bot-api</a> : <br><br><pre><code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    const app = express(); // ... //   //    app.get("/dinners/user_menu", dinner.getUserMenu); //      app.get("/dinners/r/:id", dinner.getPersonalRatings); //   app.post("/dinners/r/:id", dinner.setRating); //      Telegram app.post("/dinners/resend/:id", dinner.resendMessage); //      app.post("/dinners/order", dinner.order); //  ,      app.post("/dinners/days", dinner.setDinnerDays);</span></span></code> </pre> <br>  Secara singkat tentang fungsionalitas: <br>  Path <i>/ dinners / user_menu</i> mengembalikan skrip pengguna: <br><br><pre> <code class="javascript hljs">res.sendFile(__dirname + <span class="hljs-string"><span class="hljs-string">'/public_html/user_script.js'</span></span>);</code> </pre><br>  Ini dilakukan agar tidak mengganggu kolega yang menggunakannya dengan menginstal versi skrip baru.  Dikoreksi - melemparkannya ke server - semua orang diperbarui. <br><br>  Ya, saya tahu bahwa dari sudut pandang keamanan ini buruk, tetapi fungsi itu sendiri tidak kritis dan kami akan mempertimbangkan server tempat skrip disimpan cukup aman. <br><br>  Selanjutnya, di sepanjang jalur <i>/ makan malam / r /: id,</i> Anda bisa mendapatkan peringkat untuk semua posisi dan menyimpan peringkat, yaitu, memilih hidangan. <br><br>  Path <i>/ dinners / kirim ulang /: id</i> berfungsi untuk mengirim pesan ke Telegram.  Teks pesan dihasilkan pada klien, hanya interaksi dengan Telegram yang terjadi di server: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> parseMode: TelegramBot.SendMessageOptions = {<span class="hljs-attr"><span class="hljs-attr">parse_mode</span></span>: <span class="hljs-string"><span class="hljs-string">"HTML"</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">await</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.bot.sendMessage(telegramId, htmlMessage, {...options, ...parseMode});</code> </pre><br>  Setelah itu, Bot mengirim pesan dengan urutan. <br><br><img src="https://habrastorage.org/webt/wx/rb/uv/wxrbuv4-_nexpcmsavuenefuvwa.png" alt="gambar"><br><br>  Selanjutnya, di sepanjang jalur <i>/ makan malam / pesanan</i> , <i>pesanan</i> disimpan.  Karena permintaan pesanan asli sulit untuk ditentukan (setelah mengklik tombol "Simpan", peringatan muncul dengan tombol konfirmasi pesanan), permintaan ke server dengan pesanan dikirim ketika halaman pesanan dimuat (dan seluruh sistem pesanan di situs dibagi menjadi 2 halaman - halaman pesanan dan halaman menu - Pilihan hidangan untuk hari tertentu - yaitu, pembentukan pesanan).  Sangat tidak rasional untuk mengirim permintaan setiap kali Anda memasuki halaman pesanan, tetapi tidak ada opsi yang lebih baik untuk snap. <br><br>  Akhirnya, jalur <i>/ makan malam / hari</i> menentukan hari untuk memesan makan siang.  Bagian dari fungsi ini telah muncul untuk operasi yang benar dari pengingat tentang pesanan yang belum selesai - Anda perlu tahu apa hari berikutnya dari pesanan itu (ada akhir pekan dan hari libur di tengah minggu).  Alih-alih mengambil penerapan kalender produksi, saya hanya menguraikan tanggal pada halaman pesanan, di mana hari kerja dan non-kerja sudah ditandai (Anda tidak dapat melakukan pemesanan untuk hari yang tidak bekerja).  Hari yang tidak bekerja ditandai di portal dengan kelas isHoliday: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//     const trToday = $(".dinner_today")[0]; const tbodyAllDays = $(trToday).parent(); const dinnerDays = []; $(tbodyAllDays).children().each(async function() { if ($(this).hasClass("isHoliday")) { return; } const itemMenuDate = $(this).find("&gt; td:first-child").text().substring(0, 10); dinnerDays.push(itemMenuDate); // ... }); await sendRequest("POST", `https://****/dinners/days/`, {days: dinnerDays});</span></span></code> </pre><br>  Oh ya, gunakan jquery untuk memetik.  Sangat mudah untuk mempelajari pohon halaman. <br><br><h4>  Bot telegram </h4><br>  Bagian lain dari keseluruhan add-on adalah bot telegram. <br><br><img src="https://habrastorage.org/webt/24/wf/ek/24wfekdwtsuscjixrrguvl55nam.png" alt="gambar"><br>  <i>Dengan fungsi seperti itu</i> <br><br>  Memperoleh ID adalah sistem identifikasi.  Untuk mengaitkan skrip pengguna pada browser tertentu dengan userId di telegram. <br><br>  Lihat pesanan hari ini, lihat daftar pesanan (5 terakhir), tetapkan pengingat. <br>  Makan siang secara otomatis dikirim ke pemasok pada waktu yang sama setiap hari, jadi penting untuk melakukan pemesanan sebelum waktu tertentu, misalnya, 13:00. <br><br>  Setelah itu, kemampuan untuk melakukan pemesanan diblokir. <br><br>  Pengingat: <br><br><img src="https://habrastorage.org/webt/hr/v2/v5/hrv2v5mfkmx7v8ia6aff9ko9jvc.png" alt="gambar"><br>  <i>Bot memberikan kesempatan untuk memilih waktu pengingat: 9, 10 atau 11 jam.</i> <br><br>  Selain itu, jika setelah pengingat Anda tidak melakukan pemesanan, maka setiap 10 menit berikutnya bot akan mengingatkan Anda tentang pesanan sampai Anda memesannya, atau sampai pesanan diblokir. <br><br>  Ini dilakukan oleh tugas cron (menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">node-schedule</a> ): <br><br><pre> <code class="javascript hljs">schedule.scheduleJob(<span class="hljs-string"><span class="hljs-string">'*/10 9-13 * * 1-5'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... });</span></span></code> </pre><br><h4>  Bagian klien.  Menu </h4><br>  Saya ulangi bahwa antarmuka saat ini dalam hubungannya dengan teks dari item menu yang dikirim pemasok hanya mengerikan (lihat layar 2).  Dan pada satu titik, Anda berhenti melihat apa pun dalam banyak teks monoton padat dan sedikit berguna. <br><br>  Setelah mencari melalui Internet yang dapat membantu kami, kami menemukan plugin yang cukup bagus untuk skrip Greasemonkey khusus, dan mereka memutuskan untuk menggunakannya. <br><br>  Pertama-tama, kami membuat skrip pengguna dan memberikan hak untuk berkomunikasi dengan portal dan server perusahaan, di mana peringkat dan kemampuan untuk mengirim permintaan ditingkatkan. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// @include http://****.int/* // @include http://****/* // @grant GM.xmlHttpRequest</span></span></code> </pre><br>  Juga, untuk memodifikasi halaman makan siang itu sendiri, kami menggunakan jQuery, menghubungkannya menggunakan <i>// @require</i> <br><br>  Sekarang mari kita mulai menyekop halaman makan siang.  Setelah melihat kode html halaman, kami menemukan pengidentifikasi tabel makan siang, kami mendapatkan tabel dan memodifikasinya. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> table = $(<span class="hljs-string"><span class="hljs-string">".dinner__innerData"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> categoryList = []; <span class="hljs-comment"><span class="hljs-comment">//      $(table).find(“tbody tr td:nth-child(2})”).each(function () { const text = $(this).text(); //           if (!categoryList.find(name =&gt; name === text)) { $(this).parent().before("&lt;tr&gt;&lt;th colspan='6'&gt;" + text + "&lt;/th&gt;&lt;th style='display:none'&gt;&lt;/th&gt;&lt;th style='display:none'&gt;&lt;/th&gt;&lt;th style='display:none'&gt;0&lt;/th&gt;&lt;th style='display:none'&gt;&lt;span class='dish__amount'&gt;0&lt;/span&gt;&lt;/th&gt;&lt;/tr&gt;"); categoryList.push(text); } }); //      $(table).find(“thead th:nth-child(2)”).remove(); $(table).find("tbody tr td:nth-child(2)”).remove(); //     $(table).find(“tbody tr td:nth-child(2)”).after("&lt;td&gt;&lt;/td&gt;"); $(table).find(“thead th:nth-child(2)”).after("&lt;th class='ui-state-default'&gt;&lt;/th&gt;");</span></span></code> </pre><br>  Saya ingin mencatat bahwa pada halaman pembentukan makan siang, ketika menghitung jumlah pesanan, itu dipertimbangkan pada semua baris tabel, menerima jumlah item yang dipesan dikalikan dengan harga.  Untuk alasan ini, jika Anda menambahkan baris dengan nama kategori, semuanya akan rusak ... Saya harus memasukkan kolom tersembunyi dengan jumlah dan jumlah nol untuk baris ini. <br><br>  Sekarang mari kita lanjutkan untuk membersihkan teks dan menambahkan informasi pada peringkat hidangan.  Pertama, beberapa fungsi pembantu.  Piringan dalam peringkat diidentifikasi dengan nama tanpa sampah dalam bentuk gram, tanda baca dan spasi.  Yaitu, hidangan yang disebut “Kaldu Ayam dengan Telur (kaldu ayam, wortel, bawang, telur, sayuran).  Dalam 100g: protein-3,43;  lemak-2.86;  karbohidrat-1.0;  en.value-43.39kcal (200gr) ”diidentifikasi sebagai“ bouillon curd ”.  Ini disebabkan oleh fakta bahwa pemasok dapat merangkak di ruang ekstra, tanda, dan sesuatu yang lain.  Seperti yang telah ditunjukkan oleh praktik, ini cukup untuk mengidentifikasi piringan secara akurat dalam 90% kasus, dan kami memutuskan untuk tidak repot dan memasukkan pencarian teks lengkap. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** *         * @param items   * @param tdText    * @return   */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">findByName</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">items, tdText</span></span></span><span class="hljs-function">) </span></span>{ tdText = clearTrash(tdText, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> items.find(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{clear_name}</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> clear_name.trim().toLowerCase() === tdText; }); } <span class="hljs-comment"><span class="hljs-comment">/** *     * @param text  * @param clearDescr       * @param clearGrams    * @return    */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearTrash</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">text, clearDescr, clearGrams, clearSymbols</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   ,       }</span></span></code> </pre><br>  Dan ini adalah pembentukan peringkat: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> table = $(<span class="hljs-string"><span class="hljs-string">".dinner__innerData"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nameTd = $(table).find(“tr td:nth-child(<span class="hljs-number"><span class="hljs-number">2</span></span>)”); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">let</span></span> index = <span class="hljs-number"><span class="hljs-number">0</span></span>; index &lt;= nameTd.length; index++) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> tdText = $(nameTd[index]).text(); <span class="hljs-comment"><span class="hljs-comment">//     const item = findByName(items, tdText); if (item) { let ratingTd = $(nameTd[index]).parent().find(“td:nth-child(2)”)[0]; //           let ratingText = "&lt;i&gt;&lt;/i&gt; " + parseFloat(item.avgrating).toFixed(1) + " (: " + item.orders + ", : " + item.ratingsCount + ")"; ratingText = item.persrating ? `&lt;b&gt;&lt;i&gt;&lt;/i&gt; ${parseFloat(item.persrating).toFixed(1)} (: ${item.perscount})&lt;/b&gt;&lt;br&gt;` + ratingText : ratingText; //   $(ratingTd).css({ // getColorRating       background: getColorRating(item.avgrating) }).html(ratingText); } //           //   ,      const grams = getGrams(tdText); //     $(nameTd[index]).html(clearTrash(tdText, false, true, false)); //      ,       $(nameTd[index]).append("&lt;br/&gt;&lt;span&gt;&lt;/span&gt;") .find("span") .append(grams) .css({"font-size": 10}); }</span></span></code> </pre><br>  Dan itulah yang terjadi. <br><br><img src="https://habrastorage.org/webt/2p/hh/i5/2phhi5w3iumlfgvezwl7uqvb-2k.png" alt="gambar"><br>  <i>Setuju, jauh lebih baik dan lebih nyaman?</i> <br><br><h4>  Bagian klien.  Voting </h4><br>  Selanjutnya, kami akan beralih ke menambahkan kemampuan untuk memilih hidangan yang dipesan, serta mengirim pesan dengan pesanan ke telegram. <br><br><img src="https://habrastorage.org/webt/mj/xe/vm/mjxevmjk1xjpktpmhzsvfqv7-zu.png" alt="gambar"><br>  <i>Halaman dengan pesanan tanpa skrip</i> <br><br>  Pada halaman hidangan yang dipesan, tambahkan peringkat: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addRatingForm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> table = $(<span class="hljs-string"><span class="hljs-string">".dinner__innerData"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> nameTd = $(table).find(<span class="hljs-string"><span class="hljs-string">"tr td:nth-child(1)"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   for (let index = 0; index &lt;= nameTd.length; index++) { const tdText = $(nameTd[index]).text(); $(nameTd[index]).html(clearTrash(tdText, false, true, false)); } //       Telegram $(table).append("&lt;tfoot&gt;&lt;tr&gt;&lt;th colspan='6' class='rating-buttons btn-group margT0' style='display: table-cell;'&gt;&lt;/tr&gt;&lt;/tfoot&gt;"); $(".rating-buttons").prepend(`&lt;input type="submit" value="" class="btn_primary rating-button"&gt;`); $(".rating-buttons").prepend(`&lt;input type="submit" value=" Telegram" class="btn_primary send-button"&gt;`); //      await diableButtonByDate(); //      for (let index = 0; index &lt;= table.length; index++) { $(table[index]).find("tbody tr td:nth-child(4)").after("&lt;td class='ratingInputTd'&gt;&lt;input id='horizontal-spinner' class='ui-spinner-input' style='width:20px;'&gt;&lt;/td&gt;"); $(table[index]).find("thead th:nth-child(4)").after("&lt;th class='ui-state-default'&gt;&lt;/th&gt;"); } $(".ui-spinner-input").spinner({ max: 10, min: 1 }); //   $(".rating-button").click(sendRating); $(".send-button").click(sendTelegram); } /** *      ,    */ async function diableButtonByDate() { //             . //              const buttons = $(".rating-button"); for (let index = 0; index &lt;= buttons.length; index++) { const button = $(buttons[index]); const date = button.parent().parent().parent().parent().parent().parent().find("&gt; td:nth-child(1)").text().substring(0, 10); if (await GM.getValue(date)) { button.attr({disabled: "disabled"}); } } } /** *  */ async function sendRating(event) { event.preventDefault(); const items = []; //         $(this).parent().parent().parent().parent().find("tr").each(function () { const tdList = $(this).find("td"); const ratingInput = $(tdList[4]).find("input"); if (!ratingInput.length) { return; } items.push({ count: $(tdList[2]).text(), price: $(tdList[1]).text(), name: $(tdList[0]).text(), rating: ratingInput.val(), }); }); await sendRequest("POST", `https://****/dinners/r/${telegramId}`, items); const menuDate = $(this).parent().parent().parent().parent().parent().parent().find("&gt; td:nth-child(1)").text().substring(0, 10); await GM.setValue(menuDate, true); location.reload(); }</span></span></code> </pre><br>  Dan inilah yang kami dapatkan di output: <br><br><img src="https://habrastorage.org/webt/1k/uq/ef/1kuqefnumbp3k_qu3ugottb5sd0.png" alt="gambar"><br><br>  Ya - kodenya mengerikan.  Ya - tidak dioptimalkan.  Dan ya - di beberapa tempat tidak masuk akal.  Tetapi waktu yang dihabiskan minimum, dan fungsi dan kenyamanan meningkat secara signifikan. <br><br>  Tujuannya adalah membuat memesan makan malam lebih menyenangkan bagi saya dan rekan-rekan saya, dan tujuan ini, menurut pendapat saya, tercapai. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id475892/">https://habr.com/ru/post/id475892/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id475880/index.html">7 Kursus Gratis untuk Arsitek Solusi Microsoft</a></li>
<li><a href="../id475882/index.html">Tutorial JavaFX: Tata Letak Dasar</a></li>
<li><a href="../id475884/index.html">Memecahkan masalah garis bergerigi pada gradien</a></li>
<li><a href="../id475886/index.html">Amazon AI memudahkan untuk menangani konten yang tidak senonoh pengguna</a></li>
<li><a href="../id475888/index.html">Manfaat pengenalan wajah cloud</a></li>
<li><a href="../id475894/index.html">Tiga protokol lulus</a></li>
<li><a href="../id475896/index.html">Reaktor C / I Naked Penuh</a></li>
<li><a href="../id475900/index.html">6 Kursus Azure Terbaru</a></li>
<li><a href="../id475902/index.html">Workflow Core - mesin proses bisnis untuk .Net Core</a></li>
<li><a href="../id475904/index.html">5 catatan untuk manajer baru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>