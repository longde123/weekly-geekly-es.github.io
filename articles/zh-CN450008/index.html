<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™ŒğŸ½ ğŸ‘¨ğŸ½â€ğŸ« ğŸ˜ ä½¿ç”¨PVS-Studioåˆ†æä»ªæŸ¥æ‰¾LLVM 8ä¸­çš„é”™è¯¯ ğŸ•‰ï¸ ğŸ‘©â€ğŸ³ ğŸ¤½ğŸ¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="è‡ªä»ä½¿ç”¨æˆ‘ä»¬çš„PVS-Studioåˆ†æä»ªå¯¹LLVMé¡¹ç›®ä»£ç è¿›è¡Œæœ€åä¸€æ¬¡éªŒè¯ä»¥æ¥ï¼Œå·²ç»è¿‡å»äº†ä¸¤å¹´å¤šçš„æ—¶é—´ã€‚ è®©æˆ‘ä»¬ç¡®ä¿PVS-Studioåˆ†æä»ªä»ç„¶æ˜¯æ£€æµ‹é”™è¯¯å’Œæ½œåœ¨æ¼æ´çš„é¢†å…ˆå·¥å…·ã€‚ ä¸ºæ­¤ï¼Œè¯·æ£€æŸ¥å¹¶æ‰¾åˆ°LLVM 8.0.0å‘è¡Œç‰ˆä¸­çš„æ–°é”™è¯¯ã€‚ 

 è¦å†™çš„æ–‡ç«  
 è€å®è¯´ï¼Œæˆ‘ä¸æƒ³å†™è¿™ç¯‡æ–‡ç« ã€‚ å†™ä¸€ä¸ªæˆ‘ä»¬å·²...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ä½¿ç”¨PVS-Studioåˆ†æä»ªæŸ¥æ‰¾LLVM 8ä¸­çš„é”™è¯¯</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/pvs-studio/blog/450008/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f2/8d4/5bf/2f28d45bf369270d9330bfbe2ea78f00.png" alt="PVS-Studioå’ŒLLVM 8.0.0"></div><br> è‡ªä»ä½¿ç”¨æˆ‘ä»¬çš„PVS-Studioåˆ†æä»ªå¯¹LLVMé¡¹ç›®ä»£ç è¿›è¡Œæœ€åä¸€æ¬¡éªŒè¯ä»¥æ¥ï¼Œå·²ç»è¿‡å»äº†ä¸¤å¹´å¤šçš„æ—¶é—´ã€‚ è®©æˆ‘ä»¬ç¡®ä¿PVS-Studioåˆ†æä»ªä»ç„¶æ˜¯æ£€æµ‹é”™è¯¯å’Œæ½œåœ¨æ¼æ´çš„é¢†å…ˆå·¥å…·ã€‚ ä¸ºæ­¤ï¼Œè¯·æ£€æŸ¥å¹¶æ‰¾åˆ°LLVM 8.0.0å‘è¡Œç‰ˆä¸­çš„æ–°é”™è¯¯ã€‚ <br><a name="habracut"></a><br><h2> è¦å†™çš„æ–‡ç«  </h2><br> è€å®è¯´ï¼Œæˆ‘ä¸æƒ³å†™è¿™ç¯‡æ–‡ç« ã€‚ å†™ä¸€ä¸ªæˆ‘ä»¬å·²ç»åå¤æµ‹è¯•è¿‡çš„é¡¹ç›®ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">1ã€2ã€3</a> ï¼‰æ˜¯æ²¡æœ‰æ„æ€çš„ã€‚ æœ€å¥½å†™äº›æ–°ä¸œè¥¿ï¼Œä½†æˆ‘åˆ«æ— é€‰æ‹©ã€‚ <br><br> æ¯æ¬¡å‘è¡Œæ–°ç‰ˆæœ¬çš„LLVMæˆ–æ›´æ–°<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Clang Static Analyzeræ—¶</a> ï¼Œæˆ‘ä»¬çš„é‚®ä»¶ä¸­éƒ½ä¼šå‡ºç°ä»¥ä¸‹é—®é¢˜ï¼š <br><br>  <i>ç§ï¼Œæ–°ç‰ˆæœ¬çš„Clangé™æ€åˆ†æå™¨å·²å­¦ä¼šæŸ¥æ‰¾æ–°é”™è¯¯ï¼</i>  <i>åœ¨æˆ‘çœ‹æ¥ï¼Œä½¿ç”¨PVS-Studioçš„ç›¸å…³æ€§æ­£åœ¨ä¸‹é™ã€‚</i>  <i>Clangå‘ç°æ¯”ä»¥å¾€æ›´å¤šçš„é”™è¯¯ï¼Œå¹¶è¿½èµ¶äº†PVS-Studioçš„åŠŸèƒ½ã€‚</i>  <i>æ‚¨å¦‚ä½•çœ‹å¾…ï¼Ÿ</i> <br><br> ä¸ºæ­¤ï¼Œæˆ‘ä¸€ç›´æƒ³ä»¥ä¸€ç§ç²¾ç¥æ¥å›ç­”ï¼š <br><br>  <b>æˆ‘ä»¬ä¹Ÿä¸æ˜¯é—²ç€ï¼</b> æˆ‘ä»¬å¤§å¤§æé«˜äº†PVS-Studioåˆ†æä»ªçš„åŠŸèƒ½ã€‚ å› æ­¤ï¼Œè¯·æ”¾å¿ƒï¼Œæˆ‘ä»¬å°†ç»§ç»­ä¿æŒé¢†å…ˆåœ°ä½ã€‚ <br><br> ä¸å¹¸çš„æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªé”™è¯¯çš„ç­”æ¡ˆã€‚ æ²¡æœ‰ä»»ä½•è¯æ®ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ç°åœ¨å†™è¿™ç¯‡æ–‡ç« ã€‚ å› æ­¤ï¼ŒLLVMé¡¹ç›®å†æ¬¡ç»è¿‡æµ‹è¯•ï¼Œå¹¶å‘ç°äº†è®¸å¤šé”™è¯¯ã€‚ æˆ‘ç°åœ¨å°†æ¼”ç¤ºé‚£äº›å¯¹æˆ‘æ¥è¯´ä¼¼ä¹å¾ˆæœ‰è¶£çš„å†…å®¹ã€‚  Clangé™æ€åˆ†æå™¨æ— æ³•æ‰¾åˆ°è¿™äº›é”™è¯¯ï¼ˆæˆ–è€…è¿™æ ·åšéå¸¸ä¸ä¾¿ï¼‰ã€‚ è€Œä¸”æˆ‘ä»¬å¯ä»¥ã€‚ æˆ‘åœ¨ä¸€æ™šä¸Šæ‰¾åˆ°å¹¶å†™ä¸‹äº†æ‰€æœ‰è¿™äº›é”™è¯¯ã€‚ <br><br> ä½†æ˜¯è¿™ç¯‡æ–‡ç« çš„å†™ä½œæ‹–äº†å¥½å‡ ä¸ªæ˜ŸæœŸã€‚ æˆ‘ä¸èƒ½å¼ºè¿«è‡ªå·±ä»¥æ–‡å­—:)æ¥å®‰æ’æ‰€æœ‰è¿™äº›å†…å®¹ã€‚ <br><br> é¡ºä¾¿è¯´ä¸€å¥ï¼Œå¦‚æœæ‚¨å¯¹PVS-Studioåˆ†æä»ªä¸­ä½¿ç”¨å“ªäº›æŠ€æœ¯æ¥æ£€æµ‹é”™è¯¯å’Œæ½œåœ¨çš„æ¼æ´æ„Ÿå…´è¶£ï¼Œé‚£ä¹ˆæˆ‘å»ºè®®æ‚¨ç†Ÿæ‚‰æœ¬<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¯´æ˜</a> ã€‚ <br><br><h2> æ–°æ—§è¯Šæ–­ </h2><br> å¦‚å‰æ‰€è¿°ï¼Œå¤§çº¦ä¸¤å¹´å‰ï¼ŒLLVMé¡¹ç›®å†æ¬¡å¾—åˆ°éªŒè¯ï¼Œå‘ç°çš„é”™è¯¯å·²å¾—åˆ°çº æ­£ã€‚ ç°åœ¨ï¼Œæœ¬æ–‡å°†ä»‹ç»é”™è¯¯çš„æ–°éƒ¨åˆ†ã€‚ ä¸ºä»€ä¹ˆä¼šå‘ç°æ–°çš„é”™è¯¯ï¼Ÿ è¿™æœ‰3ä¸ªåŸå› ï¼š <br><br><ol><li>  LLVMé¡¹ç›®å·²å¼€å‘ï¼Œå…¶ä¸­çš„æ—§ä»£ç å·²æ›´æ”¹ï¼Œç„¶åå‡ºç°äº†æ–°çš„ä»£ç ã€‚ è‡ªç„¶ï¼Œä¿®æ”¹å’Œç¼–å†™çš„ä»£ç ä¸­ä¼šå‡ºç°æ–°çš„é”™è¯¯ã€‚ è¿™å¾ˆå¥½åœ°è¯´æ˜äº†åº”è¯¥å®šæœŸè¿›è¡Œé™æ€åˆ†æï¼Œè€Œä¸æ˜¯é€æ¡ˆè¿›è¡Œã€‚ æˆ‘ä»¬çš„æ–‡ç« å¾ˆå¥½åœ°å±•ç¤ºäº†PVS-Studioåˆ†æä»ªçš„åŠŸèƒ½ï¼Œä½†è¿™ä¸æé«˜ä»£ç è´¨é‡å’Œé™ä½ä¿®å¤é”™è¯¯çš„æˆæœ¬æ— å…³ã€‚ å®šæœŸä½¿ç”¨é™æ€ä»£ç åˆ†æå™¨ï¼ </li><li> æˆ‘ä»¬æ­£åœ¨å®šç¨¿å¹¶æ”¹è¿›ç°æœ‰çš„è¯Šæ–­ç¨‹â€‹â€‹åºã€‚ å› æ­¤ï¼Œåˆ†æä»ªå¯ä»¥æ£€æµ‹åˆ°å…ˆå‰æ£€æŸ¥ä¸­æœªå‘ç°çš„é”™è¯¯ã€‚ </li><li>  PVS-Studioæ¨å‡ºäº†2å¹´å‰è¿˜æ²¡æœ‰çš„æ–°è¯Šæ–­ç¨‹åºã€‚ æˆ‘å†³å®šå°†å®ƒä»¬åˆ†ä¸ºä¸€ä¸ªå•ç‹¬çš„éƒ¨åˆ†ï¼Œä»¥æ¸…æ¥šåœ°å±•ç¤ºPVS-Studioçš„å‘å±•ã€‚ </li></ol><br><h2> é€šè¿‡2å¹´å‰çš„è¯Šæ–­å‘ç°çš„ç¼ºé™· </h2><br>  <b>ç‰‡æ®µN1ï¼šå¤åˆ¶ç²˜è´´</b> <br><br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ShouldUpgradeX86Intrinsic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Function *F, StringRef Name)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Name == <span class="hljs-string"><span class="hljs-string">"addcarryx.u32"</span></span> || <span class="hljs-comment"><span class="hljs-comment">// Added in 8.0 .... Name == "avx512.mask.cvtps2pd.128" || // Added in 7.0 Name == "avx512.mask.cvtps2pd.256" || // Added in 7.0 Name == "avx512.cvtusi2sd" || // Added in 7.0 Name.startswith("avx512.mask.permvar.") || // Added in 7.0 // &lt;= Name.startswith("avx512.mask.permvar.") || // Added in 7.0 // &lt;= Name == "sse2.pmulu.dq" || // Added in 7.0 Name == "sse41.pmuldq" || // Added in 7.0 Name == "avx2.pmulu.dq" || // Added in 7.0 .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V501</a> [CWE-570]åœ¨â€œ ||â€çš„å·¦ä¾§å’Œå³ä¾§æœ‰ç›¸åŒçš„å­è¡¨è¾¾å¼â€œ Name.startswithï¼ˆâ€œ avx512.mask.permvarã€‚â€ï¼‰â€ æ“ä½œå‘˜ã€‚ è‡ªåŠ¨å‡çº§.cpp 73 <br><br> è¯·ä»”ç»†æ£€æŸ¥è¯¥åç§°æ˜¯å¦ä»¥å­å­—ç¬¦ä¸²â€œ avx512.mask.permvarã€‚â€å¼€å¤´ã€‚ åœ¨ç¬¬äºŒä¸ªæµ‹è¯•ä¸­ï¼Œä»–ä»¬æ˜¾ç„¶æƒ³å†™äº›å…¶ä»–ä¸œè¥¿ï¼Œä½†å¿˜è®°ä¿®å¤å¤åˆ¶çš„æ–‡æœ¬ã€‚ <br><br>  <b>ç‰‡æ®µN2ï¼šé”™å­—</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> CXNameRefFlags { CXNameRange_WantQualifier = <span class="hljs-number"><span class="hljs-number">0x1</span></span>, CXNameRange_WantTemplateArgs = <span class="hljs-number"><span class="hljs-number">0x2</span></span>, CXNameRange_WantSinglePiece = <span class="hljs-number"><span class="hljs-number">0x4</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AnnotateTokensWorker::HandlePostPonedChildCursor( CXCursor Cursor, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> StartTokenIndex) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> flags = CXNameRange_WantQualifier | CXNameRange_WantQualifier; .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV501åœ¨â€œ |â€çš„å·¦ä¾§å’Œå³ä¾§æœ‰ç›¸åŒçš„å­è¡¨è¾¾å¼â€œ CXNameRange_WantQualifierâ€ æ“ä½œå‘˜ã€‚  CIndex.cpp 7245 <br><br> ç”±äºè¾“å…¥é”™è¯¯ï¼Œ <i>ä¸¤æ¬¡ä½¿ç”¨</i>äº†ç›¸åŒçš„å‘½åå¸¸é‡<i>CXNameRange_WantQualifier</i> ã€‚ <br><br>  <b>ç‰‡æ®µN3ï¼šå¯¹æ“ä½œå‘˜ä¼˜å…ˆçº§çš„å›°æƒ‘</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> PPCTTIImpl::getVectorInstrCost(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Opcode, Type *Val, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Index) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ISD == ISD::EXTRACT_VECTOR_ELT &amp;&amp; Index == ST-&gt;isLittleEndian() ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V502</a> [CWE-783]ä¹Ÿè®¸'ï¼Ÿï¼š'è¿ç®—ç¬¦çš„å·¥ä½œæ–¹å¼ä¸é¢„æœŸçš„ä¸åŒã€‚  'ï¼Ÿï¼š'è¿ç®—ç¬¦çš„ä¼˜å…ˆçº§ä½äº'=='è¿ç®—ç¬¦ã€‚  PPCTargetTransformInfo.cpp 404 <br><br> æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªéå¸¸ç¾ä¸½çš„é”™è¯¯ã€‚ æ˜¯çš„ï¼Œæˆ‘çŸ¥é“æˆ‘å¯¹ç¾æ„Ÿå¾ˆå¥‡æ€ª:)ã€‚ <br><br> ç°åœ¨ï¼Œæ ¹æ®<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿ç®—ç¬¦</a>çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¼˜å…ˆçº§</a> ï¼Œè¡¨è¾¾å¼è®¡ç®—å¦‚ä¸‹ï¼š <br><br><pre> <code class="cpp hljs">(ISD == ISD::EXTRACT_VECTOR_ELT &amp;&amp; (Index == ST-&gt;isLittleEndian())) ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br> ä»å®é™…çš„è§’åº¦æ¥çœ‹ï¼Œè¿™ç§æƒ…å†µæ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºå¯ä»¥å°†å…¶ç®€åŒ–ä¸ºï¼š <br><br><pre> <code class="cpp hljs">(ISD == ISD::EXTRACT_VECTOR_ELT &amp;&amp; Index == ST-&gt;isLittleEndian())</code> </pre> <br> è¿™æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„é”™è¯¯ã€‚  0/1æœ€æœ‰å¯èƒ½å¸Œæœ›ä¸<i>Index</i>å˜é‡è¿›è¡Œæ¯”è¾ƒã€‚ è¦ä¿®å¤ä»£ç ï¼Œè¯·åœ¨ä¸‰å…ƒè¿ç®—ç¬¦å‘¨å›´æ·»åŠ æ–¹æ‹¬å·ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ISD == ISD::EXTRACT_VECTOR_ELT &amp;&amp; Index == (ST-&gt;isLittleEndian() ? <span class="hljs-number"><span class="hljs-number">1</span></span> : <span class="hljs-number"><span class="hljs-number">0</span></span>))</code> </pre> <br> é¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä¸‰å…ƒè¿ç®—ç¬¦éå¸¸å±é™©å¹¶ä¸”ä¼šå¼•å‘é€»è¾‘é”™è¯¯ã€‚ è¯·éå¸¸å°å¿ƒï¼Œä¸è¦è´ªå©ªåœ°åŠ ä¸Šæ‹¬å·ã€‚ æˆ‘åœ¨â€œå®³æ€•è¿ç®—ç¬¦ï¼Ÿï¼šå¹¶å°†å…¶æ‹¬åœ¨æ‹¬å·ä¸­â€ä¸€ç« ä¸­å¯¹æ­¤ä¸»é¢˜è¿›è¡Œäº†æ›´è¯¦ç»†çš„è®¨è®ºã€‚ <br><br>  <b>ç‰‡æ®µN4ï¼ŒN5ï¼šç©ºæŒ‡é’ˆ</b> <br><br><pre> <code class="cpp hljs">Init *TGParser::ParseValue(Record *CurRec, RecTy *ItemType, IDParseMode Mode) { .... TypedInit *LHS = dyn_cast&lt;TypedInit&gt;(Result); .... LHS = dyn_cast&lt;TypedInit&gt;( UnOpInit::get(UnOpInit::CAST, LHS, StringRecTy::get()) -&gt;Fold(CurRec)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!LHS) { Error(PasteLoc, Twine(<span class="hljs-string"><span class="hljs-string">"can't cast '"</span></span>) + LHS-&gt;getAsString() + <span class="hljs-string"><span class="hljs-string">"' to string"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; } .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V522</a> [CWE-476]å¯èƒ½ä¼šå–æ¶ˆå¼•ç”¨ç©ºæŒ‡é’ˆâ€œ LHSâ€ã€‚  TGParser.cpp 2152 <br><br> å¦‚æœ<i>LHS</i>æŒ‡é’ˆä¸ºç©ºï¼Œåˆ™åº”å‘å‡ºè­¦å‘Šã€‚ ä½†æ˜¯ï¼Œè¿™å°†å–æ¶ˆå¼•ç”¨æ­¤éå¸¸ä¸ºç©ºçš„æŒ‡é’ˆï¼š <i>LHS-&gt; getAsStringï¼ˆï¼‰</i> ã€‚ <br><br> å½“é”™è¯¯éšè—åœ¨é”™è¯¯å¤„ç†ç¨‹åºä¸­æ—¶ï¼Œè¿™æ˜¯ä¸€ç§éå¸¸å…¸å‹çš„æƒ…å†µï¼Œå› ä¸ºæ²¡æœ‰äººåœ¨æµ‹è¯•å®ƒä»¬ã€‚ é™æ€åˆ†æå™¨ä¼šæ£€æŸ¥æ‰€æœ‰å¯è®¿é—®çš„ä»£ç ï¼Œæ— è®ºä½¿ç”¨é¢‘ç‡å¦‚ä½•ã€‚ è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œè¯´æ˜é™æ€åˆ†æå¦‚ä½•è¡¥å……å…¶ä»–æµ‹è¯•å’Œé”™è¯¯ä¿æŠ¤æŠ€æœ¯ã€‚ <br><br> ä¸‹é¢çš„ä»£ç å¯¹<i>RHS</i>æŒ‡é’ˆè¿›è¡Œäº†ç±»ä¼¼çš„å¤„ç†ï¼šV522 [CWE-476]å¯èƒ½ä¼šå–æ¶ˆå¼•ç”¨ç©ºæŒ‡é’ˆâ€œ RHSâ€ã€‚  TGParser.cpp 2186 <br><br>  <b>ç‰‡æ®µN6ï¼šç§»åŠ¨åä½¿ç”¨å…‰æ ‡</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; ExtractBlocks(....) { .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;Module&gt; ProgClone = CloneModule(BD.getProgram(), VMap); .... BD.setNewProgram(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(ProgClone)); <span class="hljs-comment"><span class="hljs-comment">// &lt;= MiscompiledFunctions.clear(); for (unsigned i = 0, e = MisCompFunctions.size(); i != e; ++i) { Function *NewF = ProgClone-&gt;getFunction(MisCompFunctions[i].first); // &lt;= assert(NewF &amp;&amp; "Function not found??"); MiscompiledFunctions.push_back(NewF); } .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV522 [CWE-476]å¯èƒ½ä¼šå–æ¶ˆå¼•ç”¨ç©ºæŒ‡é’ˆâ€œ ProgCloneâ€ã€‚ é”™è¯¯ç¼–è¯‘.cpp 601 <br><br> é¦–å…ˆï¼Œ <i>ProgClone</i>æ™ºèƒ½æŒ‡é’ˆä¸å†æ‹¥æœ‰è¯¥å¯¹è±¡ï¼š <br><br><pre> <code class="cpp hljs">BD.setNewProgram(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(ProgClone));</code> </pre> <br> å®é™…ä¸Šï¼Œç°åœ¨<i>ProgClone</i>æ˜¯ç©ºæŒ‡é’ˆã€‚ å› æ­¤ï¼Œç©ºæŒ‡é’ˆçš„è§£å¼•ç”¨åº”è¯¥åœ¨ä¸‹é¢è¿›è¡Œï¼š <br><br><pre> <code class="cpp hljs">Function *NewF = ProgClone-&gt;getFunction(MisCompFunctions[i].first);</code> </pre> <br> ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œè¿™ä¸ä¼šå‘ç”Ÿï¼ è¯·æ³¨æ„ï¼Œå¾ªç¯å®é™…ä¸Šå¹¶æœªè¿è¡Œã€‚ <br><br> é¦–å…ˆï¼Œå°†æ¸…é™¤<i>MiscompiledFunctions</i>å®¹å™¨ï¼š <br><br><pre> <code class="cpp hljs">MiscompiledFunctions.clear();</code> </pre> <br> æ¥ä¸‹æ¥ï¼Œåœ¨å¾ªç¯æ¡ä»¶ä¸­ä½¿ç”¨æ­¤å®¹å™¨çš„å¤§å°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, e = MisCompFunctions.size(); i != e; ++i) {</code> </pre> <br> å¾ˆå®¹æ˜“çœ‹åˆ°å¾ªç¯æ²¡æœ‰å¼€å§‹ã€‚ æˆ‘è®¤ä¸ºè¿™ä¹Ÿæ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œåº”è¯¥ä»¥ä¸åŒçš„æ–¹å¼ç¼–å†™ä»£ç ã€‚ <br><br> çœ‹æ¥æˆ‘ä»¬é‡åˆ°äº†éå¸¸è‘—åçš„é”™è¯¯æ ¡éªŒï¼ ä¸€ä¸ªé”™è¯¯æ©é¥°äº†å¦ä¸€ä¸ª:)ã€‚ <br><br>  <b>ç‰‡æ®µN7ï¼šç§»åŠ¨åä½¿ç”¨å…‰æ ‡</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>&gt; TestOptimizer(BugDriver &amp;BD, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;Module&gt; Test, <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;Module&gt; Safe) { outs() &lt;&lt; <span class="hljs-string"><span class="hljs-string">" Optimizing functions being tested: "</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;Module&gt; Optimized = BD.runPassesOn(Test.get(), BD.getPassesToRun()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Optimized) { errs() &lt;&lt; <span class="hljs-string"><span class="hljs-string">" Error running this sequence of passes"</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">" on the input program!\n"</span></span>; BD.setNewProgram(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(Test)); <span class="hljs-comment"><span class="hljs-comment">// &lt;= BD.EmitProgressBitcode(*Test, "pass-error", false); // &lt;= if (Error E = BD.debugOptimizerCrash()) return std::move(E); return false; } .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV522 [CWE-476]å¯èƒ½ä¼šå–æ¶ˆå¼•ç”¨ç©ºæŒ‡é’ˆâ€œæµ‹è¯•â€ã€‚ é”™è¯¯ç¼–è¯‘cpp 709 <br><br> åŒæ ·çš„æƒ…å†µã€‚ é¦–å…ˆï¼Œå¯¹è±¡çš„å†…å®¹è¢«ç§»åŠ¨ï¼Œç„¶åå°±å¥½åƒä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿä¸€æ ·è¢«ä½¿ç”¨ã€‚ åœ¨C ++ä¸­å‡ºç°äº†è¿åŠ¨çš„è¯­ä¹‰ä¹‹åï¼Œæˆ‘è¶Šæ¥è¶Šåœ¨ç¨‹åºä»£ç ä¸­çœ‹åˆ°è¿™ç§æƒ…å†µã€‚ ä¸ºæ­¤ï¼Œæˆ‘å–œæ¬¢C ++è¯­è¨€ï¼ å°„å‡»è‡ªå·±çš„è…¿çš„æ–¹æ³•è¶Šæ¥è¶Šå¤šã€‚  PVS-Studioåˆ†æä»ªå°†å§‹ç»ˆå¯ä»¥å·¥ä½œ:)ã€‚ <br><br>  <b>ç‰‡æ®µN8ï¼šç©ºæŒ‡é’ˆ</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> FunctionDumper::dump(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> PDBSymbolTypeFunctionArg &amp;Symbol) { <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> TypeId = Symbol.getTypeId(); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> Type = Symbol.getSession().getSymbolById(TypeId); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Type) Printer &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;unknown-type&gt;"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Type-&gt;dump(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV522 [CWE-476]å¯èƒ½ä¼šå–æ¶ˆå¼•ç”¨ç©ºæŒ‡é’ˆâ€œç±»å‹â€ã€‚  233.ç¬¬233ç«  <br><br> é™¤é”™è¯¯å¤„ç†ç¨‹åºå¤–ï¼Œé€šå¸¸ä¸æµ‹è¯•ç”¨äºè°ƒè¯•æ‰“å°è¾“å‡ºçš„åŠŸèƒ½ã€‚ æ‘†åœ¨æˆ‘ä»¬é¢å‰çš„å°±æ˜¯è¿™ç§æƒ…å†µã€‚ è¯¥åŠŸèƒ½æ­£åœ¨ç­‰å¾…ç”¨æˆ·ï¼Œè€Œä¸æ˜¯è§£å†³ä»–çš„é—®é¢˜ï¼Œè€Œå°†è¢«è¿«å¯¹å…¶è¿›è¡Œä¿®å¤ã€‚ <br><br> æ­£ç¡®åœ°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Type) Type-&gt;dump(*<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Printer &lt;&lt; <span class="hljs-string"><span class="hljs-string">"&lt;unknown-type&gt;"</span></span>;</code> </pre> <br>  <b>ç‰‡æ®µN9ï¼šç©ºæŒ‡é’ˆ</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> SearchableTableEmitter::collectTableEntries( GenericTable &amp;Table, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;Record *&gt; &amp;Items) { .... RecTy *Ty = resolveTypes(Field.RecType, TI-&gt;getType()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Ty) <span class="hljs-comment"><span class="hljs-comment">// &lt;= PrintFatalError(Twine("Field '") + Field.Name + "' of table '" + Table.Name + "' has incompatible type: " + Ty-&gt;getAsString() + " vs. " + // &lt;= TI-&gt;getType()-&gt;getAsString()); .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV522 [CWE-476]å¯èƒ½ä¼šå–æ¶ˆå¼•ç”¨ç©ºæŒ‡é’ˆâ€œ Tyâ€ã€‚  SearchableTableEmitter.cpp 614 <br><br> æˆ‘è®¤ä¸ºï¼Œå› æ­¤ä¸€åˆ‡éƒ½æ¸…æ¥šï¼Œä¸éœ€è¦è§£é‡Šã€‚ <br><br>  <b>ç‰‡æ®µN10ï¼šé”™åˆ«å­—</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> FormatTokenLexer::tryMergeCSharpNullConditionals() { .... <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp;Identifier = *(Tokens.end() - <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp;Question = *(Tokens.end() - <span class="hljs-number"><span class="hljs-number">1</span></span>); .... Identifier-&gt;ColumnWidth += Question-&gt;ColumnWidth; Identifier-&gt;Type = Identifier-&gt;Type; <span class="hljs-comment"><span class="hljs-comment">// &lt;= Tokens.erase(Tokens.end() - 1); return true; }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V570</a>ä¸ºå…¶åˆ†é…äº†â€œæ ‡è¯†ç¬¦-&gt;ç±»å‹â€å˜é‡ã€‚ æ ¼å¼ä»¤ç‰ŒLexer.cpp 249 <br><br> ç»™è‡ªå·±åˆ†é…ä¸€ä¸ªå˜é‡æ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚ ä»–ä»¬æœ€æœ‰å¯èƒ½æƒ³å†™ï¼š <br><br><pre> <code class="cpp hljs">Identifier-&gt;Type = Question-&gt;Type;</code> </pre> <br>  <b>ç‰‡æ®µN11ï¼šå¯ç–‘çš„ä¸­æ–­</b> <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> SystemZOperand::print(raw_ostream &amp;OS) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (Kind) { <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KindToken: OS &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Token:"</span></span> &lt;&lt; getToken(); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> KindReg: OS &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Reg:"</span></span> &lt;&lt; SystemZInstPrinter::getRegisterName(getReg()); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V622</a> [CWE-478]è€ƒè™‘æ£€æŸ¥â€œ switchâ€å£°æ˜ã€‚ ç¬¬ä¸€ä¸ªâ€œ caseâ€è¿ç®—ç¬¦å¯èƒ½ä¼šä¸¢å¤±ã€‚ ç³»ç»ŸZAsmParser.cpp 652 <br><br> å¼€å§‹æ—¶æœ‰ä¸€ä¸ªéå¸¸å¯ç–‘çš„<i>break</i>è¯­å¥ã€‚ ä½ å¿˜äº†åœ¨è¿™é‡Œå†™åˆ«çš„ä¸œè¥¿å—ï¼Ÿ <br><br>  <b>ç‰‡æ®µN12ï¼šè§£å¼•ç”¨åæ£€æŸ¥æŒ‡é’ˆ</b> <br><br><pre> <code class="cpp hljs">InlineCost AMDGPUInliner::getInlineCost(CallSite CS) { Function *Callee = CS.getCalledFunction(); Function *Caller = CS.getCaller(); TargetTransformInfo &amp;TTI = TTIWP-&gt;getTTI(*Callee); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Callee || Callee-&gt;isDeclaration()) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> llvm::InlineCost::getNever(<span class="hljs-string"><span class="hljs-string">"undefined callee"</span></span>); .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V595</a> [CWE-476]åœ¨é’ˆå¯¹nullptrå¯¹å…¶è¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨äº†â€œè¢«<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è°ƒç”¨æ–¹</a> â€æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š172ï¼Œ174ã€‚AMDGPUInline.cpp 172 <br><br>  <i>è°ƒç”¨getTTI</i>å‡½æ•°æ—¶ï¼Œå°†å–æ¶ˆå¼•ç”¨å¼€å¤´çš„<i>Callee</i>æŒ‡é’ˆã€‚ <br><br> ç„¶åå‘ç°åº”è¯¥æ£€æŸ¥æ­¤æŒ‡é’ˆæ˜¯å¦å…·æœ‰<i>nullptr</i>ç›¸ç­‰æ€§ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Callee || Callee-&gt;isDeclaration())</code> </pre> <br> ä½†æ˜¯ä¸ºæ—¶å·²æ™š... <br><br>  <b>ç‰‡æ®µN13-N ...ï¼šå–æ¶ˆå¼•ç”¨åæ£€æŸ¥æŒ‡é’ˆ</b> <br><br> å…ˆå‰ä»£ç ç‰‡æ®µä¸­è®¨è®ºçš„æƒ…å†µå¹¶éå”¯ä¸€ã€‚ å¥¹åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Value *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">optimizeDoubleFP</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(CallInst *CI, IRBuilder&lt;&gt; &amp;B, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isBinary, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> isPrecise = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">false</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ .... Function *CalleeFn = CI-&gt;getCalledFunction(); StringRef CalleeNm = CalleeFn-&gt;getName(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= AttributeList CalleeAt = CalleeFn-&gt;getAttributes(); if (CalleeFn &amp;&amp; !CalleeFn-&gt;isIntrinsic()) { // &lt;= .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV595 [CWE-476]åœ¨é’ˆå¯¹nullptrå¯¹å…¶è¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨äº†'CalleeFn'æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š1079ã€1081ã€‚SimplifyLibCalls.cpp 1079 <br><br> åœ¨è¿™é‡Œï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Sema::InstantiateAttrs(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MultiLevelTemplateArgumentList &amp;TemplateArgs, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Decl *Tmpl, Decl *New, LateInstantiatedAttrVec *LateAttrs, LocalInstantiationScope *OuterMostScope) { .... NamedDecl *ND = dyn_cast&lt;NamedDecl&gt;(New); CXXRecordDecl *ThisContext = dyn_cast_or_null&lt;CXXRecordDecl&gt;(ND-&gt;getDeclContext()); <span class="hljs-comment"><span class="hljs-comment">// &lt;= CXXThisScopeRAII ThisScope(*this, ThisContext, Qualifiers(), ND &amp;&amp; ND-&gt;isCXXInstanceMember()); // &lt;= .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV595 [CWE-476]åœ¨é’ˆå¯¹nullptrå¯¹å…¶è¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨äº†'ND'æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š532ã€534ã€‚SemaTemplateInstantiateDecl.cpp 532 <br><br> åœ¨è¿™é‡Œï¼š <br><br><ul><li>  V595 [CWE-476]åœ¨é’ˆå¯¹nullptrå¯¹å…¶è¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨äº†â€œ Uâ€æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š404ã€407ã€‚DWARFFormValue.cpp 404 </li><li>  V595 [CWE-476]åœ¨é’ˆå¯¹nullptrè¿›è¡ŒéªŒè¯ä¹‹å‰ï¼Œå·²ä½¿ç”¨äº†'ND'æŒ‡é’ˆã€‚ æ£€æŸ¥è¡Œï¼š2149ï¼Œ2151ã€‚SemaTemplateInstantiate.cpp 2149 </li></ul><br> ç„¶åï¼Œç ”ç©¶ç¼–å·ä¸ºV595çš„è­¦å‘Šå¯¹æˆ‘æ¥è¯´å°±æ²¡æœ‰å…´è¶£äº†ã€‚ å› æ­¤ï¼Œé™¤äº†è¿™é‡Œåˆ—å‡ºçš„é”™è¯¯ä¹‹å¤–ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯å¦è¿˜æœ‰å…¶ä»–ç±»ä¼¼çš„é”™è¯¯ã€‚ æœ€æœ‰å¯èƒ½çš„ã€‚ <br><br>  <b>N17ï¼ŒN18ç‰‡æ®µï¼šå¯ç–‘ç§»ä½</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processLogicalImmediate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint64_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Imm, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RegSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint64_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> &amp;Encoding)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Size = RegSize; .... <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> NImms = ~(Size<span class="hljs-number"><span class="hljs-number">-1</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>; .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V629</a> [CWE-190]è€ƒè™‘æ£€æŸ¥'ã€œï¼ˆå¤§å°-1ï¼‰&lt;&lt; 1'è¡¨è¾¾å¼ã€‚  32ä½å€¼çš„ä½ç§»ï¼Œéšåæ‰©å±•ä¸º64ä½ç±»å‹ã€‚  260 AArch64AddressingModes.h <br><br> ä¹Ÿè®¸è¿™ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œå¹¶ä¸”ä»£ç å®Œå…¨æŒ‰é¢„æœŸå·¥ä½œã€‚ ä½†è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªéå¸¸å¯ç–‘çš„åœ°æ–¹ï¼Œéœ€è¦å¯¹å…¶è¿›è¡Œæ£€æŸ¥ã€‚ <br><br> å‡è®¾<i>Size</i>å˜é‡ä¸º16ï¼Œç„¶åè®¡åˆ’ç¼–å†™ä»£ç ä»¥è·å–<i>NImms</i>å˜é‡ä¸­çš„å€¼çš„ä»£ç çš„ä½œè€…ï¼š <br><br>  11111111111111111111111111111111111111111111111111111111111111100000000 <br><br> ä½†æ˜¯ï¼Œå®é™…ä¸Šï¼Œç»“æœæ˜¯ï¼š <br><br>  0000000000000000000000000000000000000000001111111111111111111111111100000 <br><br> äº‹å®æ˜¯æ‰€æœ‰è®¡ç®—éƒ½æ˜¯ä½¿ç”¨32ä½æ— ç¬¦å·ç±»å‹è¿›è¡Œçš„ã€‚ è€Œä¸”åªæœ‰è¿™æ ·ï¼Œæ­¤32ä½æ— ç¬¦å·ç±»å‹æ‰ä¼šéšå¼æ‰©å±•ä¸º<i>uint64_t</i> ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€é«˜æœ‰æ•ˆä½å°†ä¸ºé›¶ã€‚ <br><br> æ‚¨å¯ä»¥è§£å†³è¿™ç§æƒ…å†µï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> NImms = ~<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>&gt;(Size<span class="hljs-number"><span class="hljs-number">-1</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>;</code> </pre> <br> ç›¸ä¼¼çš„æƒ…å†µï¼šV629 [CWE-190]è€ƒè™‘æ£€æŸ¥'Immr &lt;&lt; 6'è¡¨è¾¾å¼ã€‚  32ä½å€¼çš„ä½ç§»ï¼Œéšåæ‰©å±•ä¸º64ä½ç±»å‹ã€‚  AArch64AddressingModes.h 269 <br><br>  <b>ç‰‡æ®µN19ï¼šç¼ºå°‘</b> <b><i>else</i></b> <b>å…³é”®å­—</b> <b>å—ï¼Ÿ</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> AMDGPUAsmParser::cvtDPP(MCInst &amp;Inst, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> OperandVector &amp;Operands) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Op.isReg() &amp;&amp; Op.Reg.RegNo == AMDGPU::VCC) { <span class="hljs-comment"><span class="hljs-comment">// VOP2b (v_add_u32, v_sub_u32 ...) dpp use "vcc" token. // Skip it. continue; } if (isRegOrImmWithInputMods(Desc, Inst.getNumOperands())) { // &lt;= Op.addRegWithFPInputModsOperands(Inst, 2); } else if (Op.isDPPCtrl()) { Op.addImmOperands(Inst, 1); } else if (Op.isImm()) { // Handle optional arguments OptionalIdx[Op.getImmTy()] = I; } else { llvm_unreachable("Invalid operand type"); } .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V646</a> [CWE-670]è€ƒè™‘æ£€æŸ¥åº”ç”¨ç¨‹åºçš„é€»è¾‘ã€‚ å¯èƒ½ç¼ºå°‘â€œ elseâ€å…³é”®å­—ã€‚  AMDGPUAsmParser.cpp 5655 <br><br> è¿™é‡Œæ²¡æœ‰é”™è¯¯ã€‚ ç”±äºç¬¬ä¸€ä¸ª<i>if</i>çš„thenå—ä»¥<i>continue</i>ç»“æŸï¼Œå› æ­¤<i>else</i>å…³é”®å­—æ˜¯å¦å­˜åœ¨å¹¶ä¸é‡è¦ã€‚ åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œä»£ç éƒ½å°†ç›¸åŒã€‚ ä½†æ˜¯ï¼Œç¼ºå°‘<i>å…¶ä»–å…ƒç´ </i>ä¼šä½¿ä»£ç æ›´åŠ æ™¦æ¶©å’Œå±é™©ã€‚ å¦‚æœå°†æ¥<i>ç»§ç»­</i>æ¶ˆå¤±ï¼Œé‚£ä¹ˆä»£ç å°†ä»¥å®Œå…¨ä¸åŒçš„æ–¹å¼å¼€å§‹å·¥ä½œã€‚ æˆ‘è®¤ä¸ºï¼Œæœ€å¥½æ·»åŠ <i>else</i> ã€‚ <br><br>  <b>ç‰‡æ®µN20ï¼šå››ä¸ªç›¸åŒç±»å‹çš„é”™åˆ«å­—</b> <br><br><pre> <code class="cpp hljs">LLVM_DUMP_METHOD <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Symbol::dump(raw_ostream &amp;OS) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">string</span></span> Result; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isUndefined()) Result += <span class="hljs-string"><span class="hljs-string">"(undef) "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isWeakDefined()) Result += <span class="hljs-string"><span class="hljs-string">"(weak-def) "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isWeakReferenced()) Result += <span class="hljs-string"><span class="hljs-string">"(weak-ref) "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isThreadLocalValue()) Result += <span class="hljs-string"><span class="hljs-string">"(tlv) "</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (Kind) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> SymbolKind::GlobalSymbol: Result + Name.str(); <span class="hljs-comment"><span class="hljs-comment">// &lt;= break; case SymbolKind::ObjectiveCClass: Result + "(ObjC Class) " + Name.str(); // &lt;= break; case SymbolKind::ObjectiveCClassEHType: Result + "(ObjC Class EH) " + Name.str(); // &lt;= break; case SymbolKind::ObjectiveCInstanceVariable: Result + "(ObjC IVar) " + Name.str(); // &lt;= break; } OS &lt;&lt; Result; }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <br><br><ul><li>  V655 [CWE-480]å­—ç¬¦ä¸²å·²è¿æ¥ï¼Œä½†æœªä½¿ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥â€œ Result + Name.strï¼ˆï¼‰â€è¡¨è¾¾å¼ã€‚  Symbol.cpp 32 </li><li>  V655 [CWE-480]å­—ç¬¦ä¸²å·²è¿æ¥ï¼Œä½†æœªä½¿ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥'Result +â€œï¼ˆObjC Classï¼‰â€ + Name.strï¼ˆï¼‰'è¡¨è¾¾å¼ã€‚  Symbol.cpp 35 </li><li>  V655 [CWE-480]å­—ç¬¦ä¸²å·²è¿æ¥ï¼Œä½†æœªä½¿ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥'Result +â€œï¼ˆObjC Class EHï¼‰â€ + Name.strï¼ˆï¼‰'è¡¨è¾¾å¼ã€‚  Symbol.cpp 38 </li><li>  V655 [CWE-480]å­—ç¬¦ä¸²å·²è¿æ¥ï¼Œä½†æœªä½¿ç”¨ã€‚ è€ƒè™‘æ£€æŸ¥â€œç»“æœ+â€œï¼ˆObjC IVarï¼‰â€ + Name.strï¼ˆï¼‰â€è¡¨è¾¾å¼ã€‚  Symbol.cpp 41 </li></ul><br> å¶ç„¶åœ°ï¼Œä½¿ç”¨+è¿ç®—ç¬¦ä»£æ›¿+ =è¿ç®—ç¬¦ã€‚ ç»“æœæ˜¯æ¯«æ— æ„ä¹‰çš„è®¾è®¡ã€‚ <br><br>  <b>ç‰‡æ®µN21ï¼šæœªå®šä¹‰çš„è¡Œä¸º</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getReqFeatures</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">map</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;StringRef, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; &amp;FeaturesMap, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">std</span></span></span></span><span class="hljs-function"><span class="hljs-params">::</span></span><span class="hljs-built_in"><span class="hljs-function"><span class="hljs-params"><span class="hljs-built_in">vector</span></span></span></span><span class="hljs-function"><span class="hljs-params">&lt;Record *&gt; &amp;ReqFeatures)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp;R : ReqFeatures) { StringRef AsmCondString = R-&gt;getValueAsString(<span class="hljs-string"><span class="hljs-string">"AssemblerCondString"</span></span>); SmallVector&lt;StringRef, <span class="hljs-number"><span class="hljs-number">4</span></span>&gt; Ops; SplitString(AsmCondString, Ops, <span class="hljs-string"><span class="hljs-string">","</span></span>); assert(!Ops.empty() &amp;&amp; <span class="hljs-string"><span class="hljs-string">"AssemblerCondString cannot be empty"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> &amp;Op : Ops) { assert(!Op.empty() &amp;&amp; <span class="hljs-string"><span class="hljs-string">"Empty operator"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FeaturesMap.find(Op) == FeaturesMap.end()) FeaturesMap[Op] = FeaturesMap.size(); } } }</code> </pre> <br> å°è¯•è‡ªå·±æ‰¾åˆ°å±é™©ä»£ç ã€‚ è¿™æ˜¯ä¸€å¼ åˆ†æ•£æ³¨æ„åŠ›çš„å›¾ç‰‡ï¼Œä»¥ä¾¿ä¸è¦ç«‹å³æŸ¥çœ‹ç­”æ¡ˆï¼š <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d5d/183/d4e/d5d183d4e2d3107bc512e52d893fda25.png" alt="å—¯..."></div><br><br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V708</a> [CWE-758]ä½¿ç”¨äº†å±é™©çš„æ„é€ ï¼š'FeaturesMap [Op] = <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">FeatureMap.size</a> ï¼ˆï¼‰'ï¼Œå…¶ä¸­'FeaturesMap'æ˜¯'map'ç±»ã€‚ è¿™å¯èƒ½å¯¼è‡´ä¸ç¡®å®šçš„è¡Œä¸ºã€‚  RISCVCompressInstEmitter.cpp 490 <br><br> é—®é¢˜è¡Œï¼š <br><br><pre> <code class="cpp hljs">FeaturesMap[Op] = FeaturesMap.size();</code> </pre> <br> å¦‚æœæ‰¾ä¸åˆ°<i>Op</i>å…ƒç´ ï¼Œåˆ™ä¼šåœ¨æ˜ å°„ä¸­åˆ›å»ºä¸€ä¸ªæ–°å…ƒç´ ï¼Œå¹¶å°†è¯¥æ˜ å°„ä¸­çš„å…ƒç´ æ•°é‡å†™å…¥è¯¥æ˜ å°„ä¸­ã€‚ åªæ˜¯ä¸æ¸…æ¥šåœ¨æ·»åŠ æ–°å…ƒç´ ä¹‹å‰è¿˜æ˜¯ä¹‹åå°†è°ƒç”¨<i>size</i>å‡½æ•°ã€‚ <br><br>  <b>ç‰‡æ®µN22-N24ï¼šé‡æ–°åˆ†é…</b> <br><br><pre> <code class="cpp hljs">Error MachOObjectFile::checkSymbolTable() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { MachO::nlist STE = getSymbolTableEntry(SymDRI); NType = STE.n_type; <span class="hljs-comment"><span class="hljs-comment">// &lt;= NType = STE.n_type; // &lt;= NSect = STE.n_sect; NDesc = STE.n_desc; NStrx = STE.n_strx; NValue = STE.n_value; } .... }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V519</a> [CWE-563]è¿ç»­ä¸¤æ¬¡ä¸º'NType'å˜é‡åˆ†é…å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š1663ã€1664ã€‚MachOObjectFile.cpp 1664 <br><br> æˆ‘è®¤ä¸ºè¿™é‡Œæ²¡æœ‰çœŸæ­£çš„é”™è¯¯ã€‚ åªæ˜¯å¤šä½™çš„é‡å¤åˆ†é…ã€‚ ä½†æ˜¯ä»ç„¶æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ <br><br> ç±»ä¼¼åœ°ï¼š <br><br><ul><li>  V519 [CWE-563]è¿ç»­ä¸¤æ¬¡ä¸º'B.NDesc'å˜é‡åˆ†é…å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š1488ã€1489ã€‚llvm-nm.cpp 1489 </li><li>  V519 [CWE-563]è¿ç»­ä¸¤æ¬¡ä¸ºå˜é‡åˆ†é…å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š59ï¼Œ61ã€‚coff2yaml.cpp 61 </li></ul><br>  <b>ç‰‡æ®µN25-N27ï¼šæ›´å¤šé‡æ–°åˆ†é…</b> <br><br> ç°åœ¨è€ƒè™‘ç¨å¾®ä¸åŒçš„é‡æ–°åˆ†é…é€‰é¡¹ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Vectorizer::vectorizeLoadChain( ArrayRef&lt;Instruction *&gt; Chain, SmallPtrSet&lt;Instruction *, <span class="hljs-number"><span class="hljs-number">16</span></span>&gt; *InstructionsProcessed) { .... <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Alignment = getAlignment(L0); .... <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> NewAlign = getOrEnforceKnownAlignment(L0-&gt;getPointerOperand(), StackAdjustedAlignment, DL, L0, <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>, &amp;DT); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (NewAlign != <span class="hljs-number"><span class="hljs-number">0</span></span>) Alignment = NewAlign; Alignment = NewAlign; .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV519 [CWE-563]'Alignment'å˜é‡è¿ç»­ä¸¤æ¬¡è¢«èµ‹å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š1158ã€1160ã€‚LoadStoreVectorizer.cpp 1160 <br><br> è¿™æ˜¯ä¸€ä¸ªéå¸¸å¥‡æ€ªçš„ä»£ç ï¼Œä¼¼ä¹åŒ…å«é€»è¾‘é”™è¯¯ã€‚ é¦–å…ˆï¼Œæ ¹æ®æ¡ä»¶ä¸º<i>Alignment</i>å˜é‡åˆ†é…ä¸€ä¸ªå€¼ã€‚ ç„¶åå†æ¬¡è¿›è¡Œåˆ†é…ï¼Œä½†æ˜¯ç°åœ¨æ²¡æœ‰ä»»ä½•éªŒè¯ã€‚ <br><br> åœ¨è¿™é‡Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼çš„æƒ…å†µï¼š <br><br><ul><li>  V519 [CWE-563]'æ•ˆæœ'å˜é‡è¿ç»­ä¸¤æ¬¡è¢«èµ‹å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š152ï¼Œ165ã€‚WebAssemblyRegStackify.cpp 165 </li><li>  V519 [CWE-563]'ExpectNoDerefChunk'å˜é‡å·²è¿ç»­ä¸¤æ¬¡åˆ†é…å€¼ã€‚ ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ æ£€æŸ¥è¡Œï¼š4970ï¼Œ4973ã€‚SemaType.cpp 4973 </li></ul><br>  <b>ç‰‡æ®µN28ï¼šå§‹ç»ˆä¸ºçœŸå®æ¡ä»¶</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readPrefixes</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct InternalInstruction* insn)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> byte = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> nextByte; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (byte == <span class="hljs-number"><span class="hljs-number">0xf3</span></span> &amp;&amp; (nextByte == <span class="hljs-number"><span class="hljs-number">0x88</span></span> || nextByte == <span class="hljs-number"><span class="hljs-number">0x89</span></span> || nextByte == <span class="hljs-number"><span class="hljs-number">0xc6</span></span> || nextByte == <span class="hljs-number"><span class="hljs-number">0xc7</span></span>)) { insn-&gt;xAcquireRelease = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nextByte != <span class="hljs-number"><span class="hljs-number">0x90</span></span>) <span class="hljs-comment"><span class="hljs-comment">// PAUSE instruction support // &lt;= break; } .... }</span></span></code> </pre> <br>  PVS-Studio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è­¦å‘Š</a> ï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V547</a> [CWE-571]è¡¨è¾¾å¼'nextByteï¼= 0x90'å§‹ç»ˆä¸ºtrueã€‚  X86DisassemblerDecoder.cpp 379 <br><br> éªŒè¯æ²¡æœ‰æ„ä¹‰ã€‚  <i>nextByte</i>å˜é‡å§‹ç»ˆä¸ç­‰äº<i>0x90</i> ï¼Œè¿™æ˜¯ä»ä¸Šä¸€æ¬¡æ£€æŸ¥å¾—å‡ºçš„ã€‚ è¿™æ˜¯æŸç§é€»è¾‘é”™è¯¯ã€‚ <br><br>  <b>ç‰‡æ®µN29-N ...ï¼šå§‹ç»ˆä¸ºçœŸ/å‡æ¡ä»¶</b> <br><br> åˆ†æä»ªå‘å‡ºå¾ˆå¤šè­¦å‘Šï¼Œè¡¨æ˜æ•´ä¸ªæ¡ä»¶ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V547</a> ï¼‰æˆ–éƒ¨åˆ†æ¡ä»¶ï¼ˆ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V560</a> ï¼‰å§‹ç»ˆä¸ºçœŸæˆ–å‡ã€‚ è¿™äº›é€šå¸¸ä¸æ˜¯çœŸæ­£çš„é”™è¯¯ï¼Œè€Œåªæ˜¯è‰ç‡çš„ä»£ç ï¼Œå®éƒ¨ç½²çš„ç»“æœç­‰ã€‚ ä½†æ˜¯ï¼ŒæŸ¥çœ‹æ‰€æœ‰è¿™äº›è­¦å‘Šè¿˜æ˜¯æœ‰é“ç†çš„ï¼Œå› ä¸ºæœ‰æ—¶ä¼šå‡ºç°çœŸæ­£çš„é€»è¾‘é”™è¯¯ã€‚ ä¾‹å¦‚ï¼Œè¿™æ®µä»£ç æ˜¯å¯ç–‘çš„ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> DecodeStatus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DecodeGPRPairRegisterClass</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MCInst &amp;Inst, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RegNo, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint64_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Address, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *Decoder)</span></span></span><span class="hljs-function"> </span></span>{ DecodeStatus S = MCDisassembler::Success; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (RegNo &gt; <span class="hljs-number"><span class="hljs-number">13</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MCDisassembler::Fail; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((RegNo &amp; <span class="hljs-number"><span class="hljs-number">1</span></span>) || RegNo == <span class="hljs-number"><span class="hljs-number">0xe</span></span>) S = MCDisassembler::SoftFail; .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V560</a> [CWE-570]æ¡ä»¶è¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å§‹ç»ˆä¸ºfalseï¼šRegNo == 0xeã€‚  ARMDisassembler.cpp 939 <br><br> å¸¸æ•°0xEæ˜¯â€‹â€‹åè¿›åˆ¶ç³»ç»Ÿä¸­çš„å€¼14ã€‚ æ£€æŸ¥<i>RegNo == 0xe</i>æ²¡æœ‰æ„ä¹‰ï¼Œå› ä¸ºå¦‚æœ<i>RegNo&gt; 13</i> ï¼Œåˆ™è¯¥å‡½æ•°å°†å®Œæˆå…¶æ‰§è¡Œã€‚ <br><br> è¿˜æœ‰è®¸å¤šå…¶ä»–è­¦å‘Šï¼Œå…¶æ ‡è¯†ç¬¦ä¸ºV547å’ŒV560ï¼Œä½†ä¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V595ä¸€æ ·</a> ï¼Œæˆ‘å¯¹ç ”ç©¶è¿™äº›è­¦å‘Šä¸æ„Ÿå…´è¶£ã€‚ å¾ˆæ˜¾ç„¶ï¼Œæˆ‘æœ‰è¶³å¤Ÿçš„ææ–™æ¥æ’°å†™æ–‡ç« ï¼š)ã€‚ å› æ­¤ï¼Œä¸çŸ¥é“ä½¿ç”¨PVS-Studioåœ¨LLVMä¸­å¯ä»¥æ£€æµ‹åˆ°å¤šå°‘è¿™ç§ç±»å‹çš„é”™è¯¯ã€‚ <br><br> æˆ‘å°†ä¸¾ä¸€ä¸ªä¾‹å­æ¥è¯´æ˜ä¸ºä»€ä¹ˆç ”ç©¶è¿™äº›å“åº”å¾ˆæ— èŠã€‚ åˆ†æä»ªå‘å‡ºä»¥ä¸‹ä»£ç è­¦å‘Šæ˜¯ç»å¯¹æ­£ç¡®çš„ã€‚ ä½†è¿™ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> UnwrappedLineParser::parseBracedList(<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> ContinueOnSemicolons, tok::TokenKind ClosingBraceKind) { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> HasError = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; .... HasError = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ContinueOnSemicolons) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> !HasError; .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV547 [CWE-570]è¡¨è¾¾å¼'ï¼HasError'å§‹ç»ˆä¸ºfalseã€‚  UnwrappedLineParser.cpp 1635 <br><br>  <b>ç‰‡æ®µN30ï¼šå¯ç–‘å›æŠ¥</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isImplicitlyDef</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MachineRegisterInfo &amp;MRI, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Reg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (MachineRegisterInfo::def_instr_iterator It = MRI.def_instr_begin(Reg), E = MRI.def_instr_end(); It != E; ++It) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (*It).isImplicitDef(); } .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V612</a> [CWE-670]å¾ªç¯å†…æ— æ¡ä»¶çš„â€œè¿”å›â€ã€‚  R600OptimizeVectorRegisters.cpp 63 <br><br> è¿™è¦ä¹ˆæ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œè¦ä¹ˆæ˜¯ä¸€ä¸ªç‰¹å®šçš„æŠ€å·§ï¼Œæ—¨åœ¨å‘ç¨‹åºå‘˜é˜…è¯»ä»£ç æä¾›è§£é‡Šã€‚ è¿™ç§è®¾è®¡å¯¹æˆ‘æ²¡æœ‰ä»»ä½•è§£é‡Šï¼Œçœ‹èµ·æ¥éå¸¸å¯ç–‘ã€‚ æœ€å¥½ä¸è¦è¿™æ ·å†™ï¼š)ã€‚ <br><br> ä½ ç´¯å— ç„¶åæ—¶é—´åšèŒ¶æˆ–å’–å•¡ã€‚ <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8a2/f86/58f/8a2f8658fdacb0dde918807666d1cd39.png" alt="å’–å•¡"></div><br><br><h2> æ–°è¯Šæ–­ç¨‹åºæ£€æµ‹åˆ°çš„ç¼ºé™· </h2><br> æˆ‘è®¤ä¸º30æ¬¡è§¦å‘æ—§è¯Šæ–­å°±è¶³å¤Ÿäº†ã€‚ ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…ˆå‰</a>æ£€æŸ¥ååœ¨åˆ†æä»ªä¸­å‡ºç°çš„æ–°è¯Šæ–­ç¨‹åºå¯ä»¥å‘ç°æœ‰è¶£çš„äº‹æƒ…ã€‚ åœ¨æ­¤æœŸé—´ï¼Œæ€»å…±å‘C ++åˆ†æå™¨æ·»åŠ äº†66ä¸ªé€šç”¨è¯Šæ–­ç¨‹åºã€‚ <br><br>  <b>ç‰‡æ®µN31ï¼šæ— æ³•è®¿é—®çš„ä»£ç </b> <br><br><pre> <code class="cpp hljs">Error CtorDtorRunner::run() { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> CtorDtorMap = ES.lookup(JITDylibSearchList({{&amp;JD, <span class="hljs-literal"><span class="hljs-literal">true</span></span>}}), <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::move(Names), NoDependenciesToRegister, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)) { .... <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Error::success(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> CtorDtorMap.takeError(); CtorDtorsByPriority.clear(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Error::success(); }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V779</a> [CWE-561]æ£€æµ‹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸åˆ°</a>ä»£ç ã€‚ å¯èƒ½å­˜åœ¨é”™è¯¯ã€‚  ExecutionUtils.cpp 146 <br><br> å¦‚æ‚¨æ‰€è§ï¼Œ <i>ifè¯­å¥çš„</i>ä¸¤ä¸ªåˆ†æ”¯éƒ½ä»¥å¯¹<i>returnè¯­å¥</i>çš„è°ƒç”¨ç»“å°¾ã€‚ å› æ­¤ï¼Œ <i>CtorDtorsByPriority</i>å®¹å™¨<i>å°†</i>æ°¸è¿œä¸ä¼šè¢«<i>æ¸…ç©º</i> ã€‚ <br><br>  <b>ç‰‡æ®µN32ï¼šæ— æ³•è®¿é—®çš„ä»£ç </b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> LLParser::ParseSummaryEntry() { .... <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (Lex.getKind()) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> lltok::kw_gv: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ParseGVEntry(SummaryID); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> lltok::kw_module: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ParseModuleEntry(SummaryID); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> lltok::kw_typeid: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ParseTypeIdEntry(SummaryID); <span class="hljs-comment"><span class="hljs-comment">// &lt;= break; // &lt;= default: return Error(Lex.getLoc(), "unexpected summary kind"); } Lex.setIgnoreColonInIdentifiers(false); // &lt;= return false; }</span></span></code> </pre> <br>  PVS-Studioè­¦å‘Šï¼šV779 [CWE-561]æ£€æµ‹ä¸åˆ°ä»£ç ã€‚ å¯èƒ½å­˜åœ¨é”™è¯¯ã€‚  LLParser.cpp 835 <br><br> ä¸€ä¸ªæœ‰è¶£çš„æƒ…å†µã€‚ è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªåœ°æ–¹çš„å¼€å¤´ï¼š <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ParseTypeIdEntry(SummaryID); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>;</code> </pre> <br> ä¹çœ‹ä¹‹ä¸‹ï¼Œä¼¼ä¹æ²¡æœ‰é”™è¯¯ã€‚ çœ‹æ¥<i>break</i>è¯­å¥åœ¨è¿™é‡Œæ˜¯å¤šä½™çš„ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°å°†å…¶åˆ é™¤ã€‚ ä½†æ˜¯ï¼Œå¹¶éä¸€åˆ‡éƒ½é‚£ä¹ˆç®€å•ã€‚ <br><br> åˆ†æä»ªåœ¨çº¿ä¸Šç”Ÿæˆè­¦å‘Šï¼š <br><br><pre> <code class="cpp hljs">Lex.setIgnoreColonInIdentifiers(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>;</code> </pre> <br> ç¡®å®ï¼Œæ­¤ä»£ç ä¸å¯è®¿é—®ã€‚  <i>switchä¸­çš„</i>æ‰€æœ‰æƒ…å†µéƒ½ä»¥å¯¹<i>returnè¯­å¥</i>çš„è°ƒç”¨ç»“å°¾ã€‚ ç°åœ¨ï¼Œæ¯«æ— æ„ä¹‰çš„å­¤ç‹¬<i>ä¼‘æ¯</i>çœ‹èµ·æ¥å¹¶æ²¡æœ‰é‚£ä¹ˆæœ‰å®³ï¼ ä¹Ÿè®¸å…¶ä¸­ä¸€ä¸ªåˆ†æ”¯åº”è¯¥ä»¥<i>ä¸­æ–­</i>ç»“å°¾ï¼Œè€Œä¸æ˜¯ä»¥<i>è¿”å›</i>ç»“å°¾ï¼Ÿ <br><br>  <b>ç‰‡æ®µN33ï¼šé«˜ä½çš„æ„å¤–åŒ–</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">unsigned</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStubAlignment</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> override </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Arch == Triple::systemz) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } Expected&lt;<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span>&gt; RuntimeDyldImpl::emitSection(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ObjectFile &amp;Obj, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> SectionRef &amp;Section, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsCode) { .... <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> DataSize = Section.getSize(); .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (StubBufSize &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) DataSize &amp;= ~(getStubAlignment() - <span class="hljs-number"><span class="hljs-number">1</span></span>); .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V784</a>ä½æ©ç çš„å¤§å°å°äºç¬¬ä¸€ä¸ªæ“ä½œæ•°çš„å¤§å°ã€‚ è¿™å°†å¯¼è‡´ä¸¢å¤±æ›´é«˜çš„ä½ã€‚ è¿è¡Œç³»ç»ŸDyld.cpp 815 <br><br> è¯·æ³¨æ„ï¼Œ <i>getStubAlignment</i>å‡½æ•°è¿”å›<i>æ— ç¬¦å·</i>ç±»å‹ã€‚ å¦‚æœæˆ‘ä»¬å‡è®¾å‡½æ•°è¿”å›å€¼8ï¼Œåˆ™æˆ‘ä»¬å°†è®¡ç®—è¡¨è¾¾å¼çš„å€¼ï¼š <br><br>  ã€œï¼ˆgetStubAlignmentï¼ˆï¼‰-1ï¼‰ <br><br>  ã€œï¼ˆ8u-1ï¼‰ <br><br>  0xFFFFFFF8u <br><br> ç°åœ¨æ³¨æ„ï¼Œ <i>DataSize</i>å˜é‡å…·æœ‰64ä½æ— ç¬¦å·ç±»å‹ã€‚ äº‹å®è¯æ˜ï¼Œåœ¨æ“ä½œDataSizeï¼†0xFFFFFFF88æ—¶ï¼Œæ‰€æœ‰32ä¸ªé«˜ä½å°†è¢«å¤ä½ã€‚ å¾ˆæœ‰å¯èƒ½ï¼Œè¿™ä¸æ˜¯ç¨‹åºå‘˜æƒ³è¦çš„ã€‚ æˆ‘æ€€ç–‘ä»–æƒ³è®¡ç®—ï¼šDataSizeï¼†0xFFFFFFFFFFFFFFFFFFF8uã€‚ <br><br> è¦è§£å†³è¯¥é”™è¯¯ï¼Œæ‚¨åº”è¯¥è¿™æ ·ç¼–å†™ï¼š <br><br><pre> <code class="cpp hljs">DataSize &amp;= ~(<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span>&gt;(getStubAlignment()) - <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br> å¤§æ¦‚ï¼š <br><br><pre> <code class="cpp hljs">DataSize &amp;= ~(getStubAlignment() - <span class="hljs-number"><span class="hljs-number">1U</span></span>LL);</code> </pre> <br>  <b>ç‰‡æ®µN34ï¼šæ˜¾å¼è½¬æ¢å¤±è´¥</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scaleShuffleMask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Scale, ArrayRef&lt;T&gt; Mask, SmallVectorImpl&lt;T&gt; &amp;ScaledMask)</span></span></span><span class="hljs-function"> </span></span>{ assert(<span class="hljs-number"><span class="hljs-number">0</span></span> &lt; Scale &amp;&amp; <span class="hljs-string"><span class="hljs-string">"Unexpected scaling factor"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> NumElts = Mask.size(); ScaledMask.assign(<span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span>&gt;(NumElts * Scale), <span class="hljs-number"><span class="hljs-number">-1</span></span>); .... }</code> </pre> <br>  PVS-Studioè­¦å‘Šï¼š <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">V1028</a> [CWE-190]å¯èƒ½çš„æº¢å‡ºã€‚ è€ƒè™‘å°†'NumElts * Scale'è¿ç®—ç¬¦çš„æ“ä½œæ•°å¼ºåˆ¶è½¬æ¢ä¸º'size_t'ç±»å‹ï¼Œè€Œä¸æ˜¯ç»“æœã€‚  1577å¹´ <br><br> æ˜¾å¼ç±»å‹è½¬æ¢ç”¨äºåœ¨ä¹˜ä»¥<i>int</i>ç±»å‹çš„å˜é‡æ—¶é˜²æ­¢æº¢å‡ºã€‚ ä½†æ˜¯ï¼Œæ­¤å¤„çš„æ˜¾å¼è½¬æ¢ä¸èƒ½é˜²æ­¢æº¢å‡ºã€‚<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">é¦–å…ˆï¼Œå°†å¯¹å˜é‡è¿›è¡Œä¹˜æ³•è¿ç®—ï¼Œç„¶åæ‰å°†32ä½ä¹˜æ³•ç»“æœæ‰©å±•ä¸º</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">size_t</font></font></i></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç±»å‹</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰‡æ®µN35ï¼šå¤åˆ¶ç²˜è´´å¤±è´¥</font></font></b> <br><br><pre> <code class="cpp hljs">Instruction *InstCombiner::visitFCmpInst(FCmpInst &amp;I) { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!match(Op0, m_PosZeroFP()) &amp;&amp; isKnownNeverNaN(Op0, &amp;TLI)) { I.setOperand(<span class="hljs-number"><span class="hljs-number">0</span></span>, ConstantFP::getNullValue(Op0-&gt;getType())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;I; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!match(Op1, m_PosZeroFP()) &amp;&amp; isKnownNeverNaN(Op1, &amp;TLI)) { I.setOperand(<span class="hljs-number"><span class="hljs-number">1</span></span>, ConstantFP::getNullValue(Op0-&gt;getType())); <span class="hljs-comment"><span class="hljs-comment">// &lt;= return &amp;I; } .... }</span></span></code> </pre> <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V778</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-682]æ‰¾åˆ°äº†ä¸¤ä¸ªç±»ä¼¼çš„ä»£ç ç‰‡æ®µã€‚</font><font style="vertical-align: inherit;">ä¹Ÿè®¸è¿™æ˜¯ä¸€ä¸ªé”™å­—ï¼Œåº”è¯¥ä½¿ç”¨â€œ Op1â€å˜é‡è€Œä¸æ˜¯â€œ Op0â€ã€‚</font><font style="vertical-align: inherit;">InstCombineCompares.cpp 5507 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™ç§æ–°çš„æœ‰è¶£çš„è¯Šæ–­æ–¹æ³•æ­ç¤ºäº†ä»¥ä¸‹æƒ…å†µï¼šå¤åˆ¶äº†ä¸€æ®µä»£ç ï¼Œå¹¶ä¸”å…¶ä¸­çš„ä¸€äº›åç§°å¼€å§‹æ›´æ”¹ï¼Œä½†æ²¡æœ‰åœ¨ä¸€ä¸ªåœ°æ–¹çº æ­£ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯·æ³¨æ„ï¼Œåœ¨ç¬¬äºŒä¸ªå—ä¸­ï¼Œä»–ä»¬å°†</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op0</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ›´æ”¹</font><font style="vertical-align: inherit;">ä¸º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Op1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯åœ¨ä¸€ä¸ªåœ°æ–¹ï¼Œä»–ä»¬æ²¡æœ‰è§£å†³å®ƒã€‚</font><font style="vertical-align: inherit;">æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œå®ƒåº”è¯¥è¿™æ ·å†™ï¼š</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!match(Op1, m_PosZeroFP()) &amp;&amp; isKnownNeverNaN(Op1, &amp;TLI)) { I.setOperand(<span class="hljs-number"><span class="hljs-number">1</span></span>, ConstantFP::getNullValue(Op1-&gt;getType())); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;I; }</code> </pre> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰‡æ®µN36ï¼šå˜é‡æ··ä¹±</font></font></b> <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Status</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Mask; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Mode; Status() : Mask(<span class="hljs-number"><span class="hljs-number">0</span></span>), Mode(<span class="hljs-number"><span class="hljs-number">0</span></span>){}; Status(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Mask, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Mode) : Mask(Mask), Mode(Mode) { Mode &amp;= Mask; }; .... };</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1001</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-563]åˆ†é…äº†'Mode'å˜é‡ï¼Œä½†åœ¨åŠŸèƒ½ç»“æŸæ—¶æœªä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">SIModeRegister.cpp 48 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸ºå‡½æ•°å‚æ•°æä¾›ä¸ç±»æˆå‘˜ç›¸åŒçš„åç§°éå¸¸å±é™©ã€‚</font><font style="vertical-align: inherit;">å¾ˆå®¹æ˜“æ„Ÿåˆ°å›°æƒ‘ã€‚</font><font style="vertical-align: inherit;">æ‘†åœ¨æˆ‘ä»¬é¢å‰çš„å°±æ˜¯è¿™ç§æƒ…å†µã€‚</font><font style="vertical-align: inherit;">æ­¤è¡¨è¾¾å¼æ²¡æœ‰æ„ä¹‰ï¼š</font></font><br><br><pre> <code class="cpp hljs">Mode &amp;= Mask;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å‡½æ•°çš„å‚æ•°ä¼šæ›´æ”¹ã€‚</font><font style="vertical-align: inherit;">å°±æ˜¯è¿™æ ·ã€‚</font><font style="vertical-align: inherit;">è¯¥å‚æ•°ä¸å†ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œå¿…é¡»è¿™æ ·å†™ï¼š</font></font><br><br><pre> <code class="cpp hljs">Status(<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Mask, <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> Mode) : Mask(Mask), Mode(Mode) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Mode &amp;= Mask; };</code> </pre> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰‡æ®µN37ï¼šå˜é‡æ··ä¹±</font></font></b> <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SectionBase</span></span></span><span class="hljs-class"> {</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> Size = <span class="hljs-number"><span class="hljs-number">0</span></span>; .... }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SymbolTableSection</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SectionBase { .... }; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> SymbolTableSection::addSymbol(Twine Name, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> Bind, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> Type, SectionBase *DefinedIn, <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> Value, <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> Visibility, <span class="hljs-keyword"><span class="hljs-keyword">uint16_t</span></span> Shndx, <span class="hljs-keyword"><span class="hljs-keyword">uint64_t</span></span> Size) { .... Sym.Value = Value; Sym.Visibility = Visibility; Sym.Size = Size; Sym.Index = Symbols.size(); Symbols.emplace_back(llvm::make_unique&lt;Symbol&gt;(Sym)); Size += <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;EntrySize; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼šV1001 [CWE-563]åˆ†é…äº†'Size'å˜é‡ï¼Œä½†åœ¨åŠŸèƒ½ç»“æŸæ—¶æœªä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">Object.cpp 424 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æƒ…å†µä¸ä¸Šä¸€ä¸ªç±»ä¼¼ã€‚</font><font style="vertical-align: inherit;">åº”è¯¥å†™æˆï¼š</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;Size += <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>-&gt;EntrySize;</code> </pre> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç‰‡æ®µN38-N47ï¼šæŒ‡é’ˆå¿˜è®°æ£€æŸ¥</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¹‹å‰ï¼Œæˆ‘ä»¬ç ”ç©¶äº†</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V595</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¯Šæ–­</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">è§¦å‘çš„</font></a><font style="vertical-align: inherit;">ç¤ºä¾‹</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">å…¶æœ¬è´¨æ˜¯æŒ‡é’ˆåœ¨å¼€å§‹æ—¶è¢«å–æ¶ˆå¼•ç”¨ï¼Œç„¶åæ‰è¿›è¡Œæ£€æŸ¥ã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1004</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„å¹´è½»è¯Šæ–­åŠŸèƒ½</font><font style="vertical-align: inherit;">ä¸å…¶å«ä¹‰ç›¸åï¼Œä½†ä¹Ÿå¯ä»¥æ£€æµ‹åˆ°å¾ˆå¤šé”™è¯¯ã€‚</font><font style="vertical-align: inherit;">å®ƒæ ‡è¯†äº†åœ¨å¼€å§‹æ—¶æ£€æŸ¥äº†æŒ‡é’ˆï¼Œç„¶ååˆå¿˜è®°äº†æ£€æŸ¥æŒ‡é’ˆçš„æƒ…å†µã€‚</font><font style="vertical-align: inherit;">è€ƒè™‘åœ¨LLVMå†…éƒ¨å‘ç°çš„æ­¤ç±»æƒ…å†µã€‚</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getGEPCost</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Type *PointeeType, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Value *Ptr, ArrayRef&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Value *&gt; Operands)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ptr != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= assert(....); BaseGV = dyn_cast&lt;GlobalValue&gt;(Ptr-&gt;stripPointerCasts()); } bool HasBaseReg = (BaseGV == nullptr); auto PtrSizeBits = DL.getPointerTypeSizeInBits(Ptr-&gt;getType()); // &lt;= .... }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼šV1004 [CWE-476]åœ¨é’ˆå¯¹nullptrè¿›è¡ŒéªŒè¯ä¹‹åï¼Œä¸å®‰å…¨åœ°ä½¿ç”¨äº†'Ptr'æŒ‡é’ˆã€‚</font><font style="vertical-align: inherit;">æ£€æŸ¥è¡Œï¼š729ï¼Œ738ã€‚TargetTransformInfoImpl.h 738 </font><i><font style="vertical-align: inherit;">Ptr</font></i></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å˜é‡</font><font style="vertical-align: inherit;">å¯ä»¥ä¸º</font><i><font style="vertical-align: inherit;">nullptr</font></i><font style="vertical-align: inherit;">ï¼Œå¦‚æ£€æŸ¥æ‰€ç¤ºï¼š</font></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><i><font style="vertical-align: inherit;"></font></i><font style="vertical-align: inherit;"></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Ptr != <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>)</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä½†æ˜¯ï¼Œä¸‹é¢çš„æŒ‡é’ˆåœ¨æ²¡æœ‰äº‹å…ˆéªŒè¯çš„æƒ…å†µä¸‹è¢«å–æ¶ˆå¼•ç”¨ï¼š </font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> PtrSizeBits = DL.getPointerTypeSizeInBits(Ptr-&gt;getType());</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> è€ƒè™‘å¦ä¸€ç§ç±»ä¼¼çš„æƒ…å†µã€‚ </font></font><br><br><pre> <code class="cpp hljs">llvm::DISubprogram *CGDebugInfo::getFunctionFwdDeclOrStub(GlobalDecl GD, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Stub) { .... <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> *FD = dyn_cast&lt;FunctionDecl&gt;(GD.getDecl()); SmallVector&lt;QualType, <span class="hljs-number"><span class="hljs-number">16</span></span>&gt; ArgTypes; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FD) <span class="hljs-comment"><span class="hljs-comment">// &lt;= for (const ParmVarDecl *Parm : FD-&gt;parameters()) ArgTypes.push_back(Parm-&gt;getType()); CallingConv CC = FD-&gt;getType()-&gt;castAs&lt;FunctionType&gt;()-&gt;getCallConv(); // &lt;= .... }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼šV1004 [CWE-476]åœ¨é’ˆå¯¹nullptrå¯¹å…¶è¿›è¡ŒéªŒè¯ä¹‹åï¼Œä¸å®‰å…¨åœ°ä½¿ç”¨äº†â€œ FDâ€æŒ‡é’ˆã€‚</font><font style="vertical-align: inherit;">æ£€æŸ¥è¡Œï¼š3228ã€3231ã€‚CGDebugInfo.cpp 3231 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ³¨æ„æŒ‡é’ˆ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FD</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">æˆ‘ç¡®ä¿¡é—®é¢˜å¾ˆæ˜æ˜¾ï¼Œä¸éœ€è¦ä»»ä½•ç‰¹æ®Šè¯´æ˜ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¹¶ä¸”ï¼š</font></font><br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">computePolynomialFromPointer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Value &amp;Ptr, Polynomial &amp;Result, Value *&amp;BasePtr, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> DataLayout &amp;DL)</span></span></span><span class="hljs-function"> </span></span>{ PointerType *PtrTy = dyn_cast&lt;PointerType&gt;(Ptr.getType()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!PtrTy) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= Result = Polynomial(); BasePtr = nullptr; } unsigned PointerBits = DL.getIndexSizeInBits(PtrTy-&gt;getPointerAddressSpace()); // &lt;= .... }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼šV1004 [CWE-476]åœ¨é’ˆå¯¹nullptrè¿›è¡Œäº†éªŒè¯ä¹‹åï¼Œâ€œ PtrTyâ€æŒ‡é’ˆè¢«ä¸å®‰å…¨åœ°ä½¿ç”¨ã€‚</font><font style="vertical-align: inherit;">æ£€æŸ¥è¡Œï¼š960ã€965ã€‚InterleavedLoadCombinePass.cpp 965 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚ä½•ä¿æŠ¤è‡ªå·±å…å—æ­¤ç±»é”™è¯¯çš„ä¾µå®³ï¼Ÿ</font><font style="vertical-align: inherit;">è¯·ä»”ç»†æ£€æŸ¥ä»£ç ï¼Œå¹¶ä½¿ç”¨PVS-Studioé™æ€åˆ†æå™¨å®šæœŸæ£€æŸ¥ä»£ç ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸¦å…¶ä»–å¸¦æœ‰æ­¤ç±»é”™è¯¯çš„ä»£ç æ®µæ˜¯æ²¡æœ‰æ„ä¹‰çš„ã€‚</font><font style="vertical-align: inherit;">æˆ‘åªä¼šåœ¨æ–‡ç« ä¸­ç•™ä¸‹è­¦å‘Šåˆ—è¡¨ï¼š</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1004 [CWE-476]åœ¨é’ˆå¯¹nullptrè¿›è¡ŒéªŒè¯ä¹‹åï¼Œä¸å®‰å…¨åœ°ä½¿ç”¨äº†â€œ Exprâ€æŒ‡é’ˆã€‚</font><font style="vertical-align: inherit;">æ£€æŸ¥è¡Œï¼š1049ã€1078ã€‚DebugInfoMetadata.cpp 1078</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1004 [CWE-476]åœ¨é’ˆå¯¹nullptrå¯¹å…¶è¿›è¡ŒéªŒè¯ä¹‹åï¼Œä¸å®‰å…¨åœ°ä½¿ç”¨äº†'PI'æŒ‡é’ˆã€‚</font><font style="vertical-align: inherit;">æ£€æŸ¥è¡Œï¼š733ã€753ã€‚LegacyPassManager.cpp 753</font></font></li><li> V1004 [CWE-476] The 'StatepointCall' pointer was used unsafely after it was verified against nullptr. Check lines: 4371, 4379. Verifier.cpp 4379 </li><li> V1004 [CWE-476] The 'RV' pointer was used unsafely after it was verified against nullptr. Check lines: 2263, 2268. TGParser.cpp 2268 </li><li> V1004 [CWE-476] The 'CalleeFn' pointer was used unsafely after it was verified against nullptr. Check lines: 1081, 1096. SimplifyLibCalls.cpp 1096 </li><li> V1004 [CWE-476] The 'TC' pointer was used unsafely after it was verified against nullptr. Check lines: 1819, 1824. Driver.cpp 1824 </li></ul><br> <b> N48-N60:  ,   (  )</b> <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;IRMutator&gt; createISelMutator() { .... <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">vector</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;IRMutationStrategy&gt;&gt; Strategies; Strategies.emplace_back( <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InjectorIRStrategy(InjectorIRStrategy::getDefaultOps())); .... }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PVS-Studioè­¦å‘Šï¼š</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1023</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> [CWE-460]é€šè¿‡â€œ emplace_backâ€æ–¹æ³•å°†æ²¡æœ‰æ‰€æœ‰è€…çš„æŒ‡é’ˆæ·»åŠ åˆ°â€œç­–ç•¥â€å®¹å™¨ä¸­ã€‚å‘ç”Ÿå¼‚å¸¸æ—¶ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚ llvm-isel-fuzzer.cpp 58 </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¦å°†é¡¹æ·»åŠ åˆ°åƒ</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">std :: vector &lt;std :: unique_ptr &lt;X &gt;&gt;</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™æ ·çš„å®¹å™¨çš„æœ«å°¾ï¼Œ</font><font style="vertical-align: inherit;">æ‚¨ä¸èƒ½åªå†™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xxx.push_backï¼ˆæ–°Xï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› ä¸ºæ²¡æœ‰ä»</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">X *</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åˆ°</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">stdçš„</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">éšå¼è½¬æ¢</font><i><font style="vertical-align: inherit;">ï¼š ï¼šunique_ptr &lt;X&gt;</font></i><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ç§å¸¸è§çš„è§£å†³æ–¹æ¡ˆæ˜¯ç¼–å†™</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xxx.emplace_backï¼ˆæ–°Xï¼‰</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå› ä¸ºå®ƒå¯ä»¥ç¼–è¯‘ï¼š</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">emplace_back</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ–¹æ³•</font><font style="vertical-align: inherit;">ç›´æ¥ä»å‚æ•°æ„é€ å…ƒç´ ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨æ˜¾å¼æ„é€ å‡½æ•°ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™ä¸å®‰å…¨ã€‚</font><font style="vertical-align: inherit;">å¦‚æœå‘é‡å·²æ»¡ï¼Œåˆ™åˆ†é…å†…å­˜ã€‚</font><font style="vertical-align: inherit;">å†…å­˜é‡æ–°åˆ†é…æ“ä½œå¯èƒ½ä¼šå¤±è´¥ï¼Œå¯¼è‡´</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æŠ›å‡ºstd :: bad_alloc</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¼‚å¸¸</font><font style="vertical-align: inherit;">ã€‚</font><font style="vertical-align: inherit;">åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŒ‡é’ˆå°†ä¸¢å¤±ï¼Œå¹¶ä¸”åˆ›å»ºçš„å¯¹è±¡å°†æ°¸è¿œä¸ä¼šè¢«åˆ é™¤ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸€ä¸ªå®‰å…¨çš„è§£å†³æ–¹æ¡ˆæ˜¯åˆ›å»º</font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unique_ptr</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ï¼Œå®ƒå°†åœ¨å‘é‡å°è¯•é‡æ–°åˆ†é…å†…å­˜ä¹‹å‰æ‹¥æœ‰æŒ‡é’ˆï¼š</font></font><br><br><pre> <code class="cpp hljs">xxx.push_back(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">unique_ptr</span></span>&lt;X&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> X))</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ä»C ++ 14å¼€å§‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨'std :: make_unique'ï¼š </font></font><br><br><pre> <code class="cpp hljs">xxx.push_back(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::make_unique&lt;X&gt;())</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">è¿™ç§ç±»å‹çš„ç¼ºé™·å¯¹äºLLVMå¹¶ä¸é‡è¦ã€‚</font><font style="vertical-align: inherit;">å¦‚æœæ— æ³•åˆ†é…å†…å­˜ï¼Œåˆ™ç¼–è¯‘å™¨å°†åœæ­¢å·¥ä½œã€‚</font><font style="vertical-align: inherit;">ä½†æ˜¯ï¼Œå¯¹äºå…·æœ‰è¾ƒé•¿</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­£å¸¸è¿è¡Œæ—¶é—´çš„</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åºï¼Œ</font><font style="vertical-align: inherit;">å¦‚æœå†…å­˜åˆ†é…å¤±è´¥ï¼Œè¯¥</font><font style="vertical-align: inherit;">åº”ç”¨ç¨‹åº</font><font style="vertical-align: inherit;">æ— æ³•ç»“æŸï¼Œé‚£ä¹ˆè¿™å¯èƒ½æ˜¯ä¸€ä¸ªä»¤äººè®¨åŒçš„é”™è¯¯ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å› æ­¤ï¼Œå°½ç®¡æ­¤ä»£ç ä¸ä¼šå¯¹LLVMé€ æˆå®é™…å¨èƒï¼Œä½†æˆ‘å‘ç°è°ˆè®ºæ­¤é”™è¯¯æ¨¡å¼å’ŒPVS-Studioåˆ†æä»ªå­¦ä¼šæ£€æµ‹åˆ°å®ƒå¾ˆæœ‰ç”¨ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤ç±»å‹çš„å…¶ä»–è­¦å‘Šï¼š</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1023 [CWE-460]é€šè¿‡'emplace_back'æ–¹æ³•å°†æ²¡æœ‰æ‰€æœ‰è€…çš„æŒ‡é’ˆæ·»åŠ åˆ°'Passes'å®¹å™¨ä¸­ã€‚</font><font style="vertical-align: inherit;">å‘ç”Ÿå¼‚å¸¸æ—¶ä¼šå‘ç”Ÿå†…å­˜æ³„æ¼ã€‚</font><font style="vertical-align: inherit;">PassManager.h 546</font></font></li><li> V1023 [CWE-460] A pointer without owner is added to the 'AAs' container by the 'emplace_back' method. A memory leak will occur in case of an exception. AliasAnalysis.h 324 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Entries' container by the 'emplace_back' method. A memory leak will occur in case of an exception. DWARFDebugFrame.cpp 519 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'AllEdges' container by the 'emplace_back' method. A memory leak will occur in case of an exception. CFGMST.h 268 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'VMaps' container by the 'emplace_back' method. A memory leak will occur in case of an exception. SimpleLoopUnswitch.cpp 2012 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Records' container by the 'emplace_back' method. A memory leak will occur in case of an exception. FDRLogBuilder.h 30 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'PendingSubmodules' container by the 'emplace_back' method. A memory leak will occur in case of an exception. ModuleMap.cpp 810 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Objects' container by the 'emplace_back' method. A memory leak will occur in case of an exception. DebugMap.cpp 88 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Strategies' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-isel-fuzzer.cpp 60 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 685 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 686 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 688 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 689 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 690 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 691 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 692 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 693 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Modifiers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. llvm-stress.cpp 694 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Operands' container by the 'emplace_back' method. A memory leak will occur in case of an exception. GlobalISelEmitter.cpp 1911 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Stash' container by the 'emplace_back' method. A memory leak will occur in case of an exception. GlobalISelEmitter.cpp 2100 </li><li> V1023 [CWE-460] A pointer without owner is added to the 'Matchers' container by the 'emplace_back' method. A memory leak will occur in case of an exception. GlobalISelEmitter.cpp 2702 </li></ul><br><h2> ç»“è®º </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ€»å…±æˆ‘å‘å‡ºäº†60æ¡è­¦å‘Šï¼Œæ­¤åæˆ‘åœäº†ä¸‹æ¥ã€‚ PVS-Studioåˆ†æä»ªåœ¨LLVMä¸­æ˜¯å¦æ£€æµ‹åˆ°å…¶ä»–ä»»ä½•ç¼ºé™·ï¼Ÿæ˜¯çš„ï¼Œæœ‰ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘å†™å‡ºè¿™ç¯‡æ–‡ç« çš„ä»£ç ç‰‡æ®µæ—¶ï¼Œå·²ç»æ˜¯å‚æ™šäº†ï¼Œæˆ–è€…ç”šè‡³æ˜¯æ™šä¸Šï¼Œæˆ‘å†³å®šæ˜¯æ—¶å€™ç»“æŸäº†ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¸Œæœ›æ‚¨å¯¹æ­¤æ„Ÿå…´è¶£ï¼Œå¹¶ä¸”å¸Œæœ›å°è¯•ä½¿ç”¨PVS-Studioåˆ†æä»ªã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ‚¨å¯ä»¥åœ¨</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æ­¤é¡µé¢</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸Šä¸‹è½½åˆ†æä»ªå¹¶è·å¾—è¯•ç”¨ç‰ˆå¯†é’¥</font><font style="vertical-align: inherit;">ã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">æœ€é‡è¦çš„æ˜¯ï¼Œå®šæœŸä½¿ç”¨é™æ€åˆ†æã€‚</font><font style="vertical-align: inherit;">ä¸ºäº†æ™®åŠé™æ€åˆ†ææ–¹æ³•å’ŒPVS-Studioè€Œè¿›è¡Œ</font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">çš„ä¸€æ¬¡æ€§æ£€æŸ¥</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä¸æ˜¯æ­£å¸¸æƒ…å†µã€‚</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ç¥æ‚¨æé«˜ä»£ç çš„è´¨é‡å’Œå¯é æ€§ï¼</font></font><br><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/c78/30f/70c/c7830f70c5577c3d6704f254d7cad6a3.png" align="left"></a> </p><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">å¦‚æœæ‚¨æƒ³ä¸è¯´è‹±è¯­çš„è¯»è€…åˆ†äº«è¿™ç¯‡æ–‡ç« ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹é“¾æ¥ï¼šAndrey Karpovã€‚</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ä½¿ç”¨PVS-Studioåœ¨LLVM 8ä¸­æŸ¥æ‰¾é”™è¯¯</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ã€‚</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN450008/">https://habr.com/ru/post/zh-CN450008/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN449998/index.html">å¸¸è§é—®é¢˜è§£ç­”ï¼šæ—…è¡Œè€…æå®¢åœ¨æ—…è¡Œä¹‹å‰éœ€è¦äº†è§£å“ªäº›ç–«è‹—</a></li>
<li><a href="../zh-CN450000/index.html">ï¼ˆä»å³åˆ°å·¦ï¼ˆé€šè¿‡çª¥é•œ</a></li>
<li><a href="../zh-CN450002/index.html">ä½¿ç”¨PVS-StudioæŸ¥æ‰¾LLVM 8ä¸­çš„é”™è¯¯</a></li>
<li><a href="../zh-CN450004/index.html">å¿«é€Ÿçš„C / C ++ç¼“å­˜ï¼Œçº¿ç¨‹å®‰å…¨</a></li>
<li><a href="../zh-CN450006/index.html">å†·æ°´æœºç»„æ•°æ®ä¸­å¿ƒå†·å´ï¼šé€‰æ‹©å“ªç§å†·å´æ¶²ï¼Ÿ</a></li>
<li><a href="../zh-CN450010/index.html">ç…§ç‰‡çš„å­˜å‚¨ï¼Œå¤‡ä»½å’Œåˆ†ç±»</a></li>
<li><a href="../zh-CN450016/index.html">ä»å¤´å¼€å§‹åˆ›å»ºæ­£å¼çš„éªŒè¯ç³»ç»Ÿã€‚ ç¬¬1éƒ¨åˆ†ï¼šPHPå’ŒPythonä¸­çš„å­—ç¬¦è™šæ‹Ÿæœº</a></li>
<li><a href="../zh-CN450018/index.html">ä¸€ä¸ªæ•°å­¦äºŒäººç»„æ˜ å°„äº†æ— é™çš„æœ€å°è¡¨é¢åŒºåŸŸ</a></li>
<li><a href="../zh-CN450020/index.html">ç¡…è°·æ¥åˆ°å ªè¨æ–¯å·çš„å­¦ç«¥ã€‚ è¿™å¯¼è‡´äº†æŠ—è®®ã€‚</a></li>
<li><a href="../zh-CN450024/index.html">å…³äºGOST R 34.11-2012å“ˆå¸Œå‡½æ•°çš„å¼€æºå®ç°åŠå…¶å¯¹GOST R 34.10-2012ç”µå­ç­¾åçš„å½±å“</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>