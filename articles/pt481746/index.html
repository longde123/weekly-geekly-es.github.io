<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•û üë©üèª‚Äçüéì ‚ôçÔ∏è Configurando o ambiente na CLI. Terminal WSL / Windows ü§µüèª ü§∞üèø üíù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Existem pessoas que passam a maior parte do tempo no console, outras que usam o terminal, se necess√°rio, executando algo de acordo com as instru√ß√µes. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Configurando o ambiente na CLI. Terminal WSL / Windows</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/481746/">  Existem pessoas que passam a maior parte do tempo no console, outras que usam o terminal, se necess√°rio, executando algo de acordo com as instru√ß√µes.  Mas acho que todo especialista em TI, seja ele desenvolvedor, administrador de sistemas, engenheiro de rede ou mesmo desenvolvedor s√™nior do yaml, usa a interface da linha de comando.  Nem todo mundo pensa em melhorar o ambiente de trabalho na CLI e aumentar a produtividade no terminal.  Gostaria de compartilhar minha experi√™ncia na configura√ß√£o do ambiente para trabalhar com o Linux a partir do Windows. <br><br><img src="https://habrastorage.org/webt/4n/ai/g0/4naig074wgv1yxzipkfvxsutlzo.png"><br><br>  No artigo, voc√™ aprender√° quais ferramentas e qual terminal atualmente √© usado para executar aplicativos Linux no Windows 10. Falaremos sobre o <b>WSL 2</b> e o <b>Windows Terminal</b> , que est√£o ganhando cada vez mais popularidade entre os usu√°rios que precisam do Linux para funcionar.  Como a maioria dos meus casos de uso est√° relacionada √† conex√£o remota via SSH, a maioria das informa√ß√µes ser√° relevante para casos de conex√µes remotas, com todos os recursos associados a isso (encaminhamento de chaves ssh via agente ssh, encaminhamento do X-server, gerenciamento de conex√µes etc.) ) <br><br>  <i>Aten√ß√£o!</i>  Sob o recorte, muitas fotos e gif encolhido, mas √†s vezes volumoso, √© recomend√°vel abrir o artigo se voc√™ tiver acesso adequado √† Internet.  Entre em contato com o gato se voc√™ estiver interessado em executar utilit√°rios Linux no Windows, otimizar seu trabalho no ambiente CLI ou se voc√™ gosta de textos t√©cnicos e terminais coloridos.  Tentei alegrar o texto com screencasts e capturas de tela do terminal, para que n√£o fosse chato. <br><a name="habracut"></a><br><h1>  1. Introdu√ß√£o </h1><br>  Tanto no meu laptop de casa como no de trabalho, o √∫nico sistema operacional que tenho atualmente √© o Windows 10 e, neste ano, finalmente passei a usar apenas WSL em vez de VM / dualboot / Cygwin / MinGW.  Agora, meu terminal padr√£o √© o shell WSL local, onde posso executar praticamente qualquer tarefa, como no Linux nativo.  Al√©m disso, o mini servidor Intel NUC √© executado na rede dom√©stica, na qual o Proxmox √© implantado com cont√™ineres LXC e KVM, nos quais o Docker est√° girando.  Eu vou a todas as VMs via SSH, com chaves do diret√≥rio do Windows.  Muito tempo na atividade profissional ocorre na CLI, com o mesmo servidor e rede.  Portanto, sempre h√° um desejo de lidar com ferramentas para um trabalho mais confort√°vel no terminal, e no Windows sempre houve problemas com isso.  Mas agora tudo est√° mudando. <br><br><img src="https://habrastorage.org/webt/kh/tj/fc/khtjfclo949wmznn3as5cjwfdoq.png"><br><br>  Este e os artigos subseq√ºentes est√£o mais focados nos entusiastas que procuram solu√ß√µes novas e desejam bombear sua casca.  Mas para iniciantes, algo deve ser interessante, embora o artigo tenha sido bastante imerso no t√≥pico e sugira que o leitor tenha algum conhecimento fundamental em Linux.  Todas as informa√ß√µes s√£o coletadas com base na experi√™ncia pessoal usando o WSL, um terminal, bem como na intermin√°vel pagina√ß√£o de problemas de Stack Overflow e Github no processo de melhorar constantemente as configura√ß√µes e encontrar ferramentas convenientes para o trabalho. <br><br><h1>  Subsistema Windows para Linux (WSL) 2 </h1><br>  Existem v√°rios artigos normais sobre WSL na Internet e no Habr ( <a href="https://habr.com/ru/post/412633/">uma vez</a> um artigo sobre instala√ß√£o / configura√ß√£o do WSL com um servidor X, <a href="https://habr.com/ru/post/451782/">duas</a> notas sobre o WSL 2, <a href="https://habr.com/ru/post/472202/">tr√™s</a> artigos sobre o desenvolvimento do Python no VSCode com WSL) que descrevem a instala√ß√£o e a configura√ß√£o do sistema.  No entanto, nem todas as a√ß√µes de instala√ß√£o j√° s√£o relevantes, bem como as restri√ß√µes com armadilhas est√£o se tornando menos.  N√£o vou me deter na instala√ß√£o em detalhes, as instru√ß√µes para instalar a (segunda) vers√£o atual da WSL <a href="https://docs.microsoft.com/ru-ru/windows/wsl/wsl2-install" rel="nofollow">est√£o no site da Microsoft</a> e voc√™ tamb√©m pode encontrar breves <a href="" rel="nofollow">tutoriais</a> na Internet. <br><br><img src="https://habrastorage.org/webt/ok/ml/o-/okmlo-allpo4qks8ekwplfsgges.png"><br><br>  Agora, a WSL ainda est√° em desenvolvimento ativo e, recentemente ( <a href="https://habr.com/ru/company/microsoft/blog/456204/"><i>junho de 2019</i></a> ), foi lan√ßada uma nova vers√£o do WSL 2, que atualmente est√° dispon√≠vel apenas para vers√µes novas dos membros do Windows for Windows Insiders.  Se poss√≠vel, recomendo que voc√™ atualize imediatamente o WSL para a vers√£o 2, pois melhorou o trabalho de chamadas do sistema, trabalhando com a rede, o FS e, em geral, √© constru√≠do em uma arquitetura diferente e, segundo alguns relat√≥rios, <a href="https://devblogs.microsoft.com/commandline/announcing-wsl-2/" rel="nofollow">aumenta em 20 vezes a velocidade em</a> compara√ß√£o com a primeira vers√£o. <br><br>  Voc√™ pode ver a vers√£o do Windows 10 e do sistema operacional em <i>Iniciar -&gt; Configura√ß√µes -&gt; Sistema -&gt; Sobre</i> , para instalar o WSL 2, √© necess√°rio o <b>Windows 1903</b> e, pelo menos, a vers√£o <b>18917</b> .  Se voc√™ n√£o √© membro do <a href="https://insider.windows.com/ru-ru/how-to-pc/" rel="nofollow">Programa Windows Insider</a> , provavelmente as atualiza√ß√µes n√£o chegar√£o at√© uma vers√£o est√°vel.  Portanto, se voc√™ deseja atualizar para a vers√£o mais recente, pode ativar o acesso antecipado ( <i>R√°pido</i> ) em <i>Iniciar -&gt; Configura√ß√µes -&gt; Atualiza√ß√£o e seguran√ßa -&gt; Programa Windows Insider</i> , atualizar e desativar outras atualiza√ß√µes.  Vale a pena considerar que ainda n√£o ser√£o instaladas atualiza√ß√µes testadas em massa, o que pode afetar a estabilidade. <br><br>  Lembre-se de que, antes da vers√£o <a href="https://blogs.windows.com/windowsexperience/2019/10/03/announcing-windows-10-insider-preview-build-18995/" rel="nofollow">18995 da compila√ß√£o, o</a> WSL tinha um <a href="https://github.com/microsoft/WSL/issues/4377" rel="nofollow">erro</a> ao trabalhar com arquivos em discos montados do Windows, expressos como um erro de entrada / sa√≠da, apenas reiniciar o WSL ( <i>wsl --shutdown</i> no PowerShell).  Em geral, existem muitos erros corrigidos que ainda est√£o presentes na WSL vers√£o 1 (definida por padr√£o) e nas distribui√ß√µes sem visualiza√ß√£o do Windows.  Se as atualiza√ß√µes do seu sistema operacional forem regulamentadas pelas pol√≠ticas corporativas, provavelmente as atualiza√ß√µes mais recentes n√£o chegar√£o e voc√™ deve ter isso em mente.  Em um dos laptops, eu constru√≠ o 18956 e n√£o h√° atualiza√ß√µes, apesar do fato de a op√ß√£o <i>R√°pida</i> estar selecionada nas configura√ß√µes do Programa Insider.  Um sistema limpo foi instalado em outro laptop h√° alguns meses e as atualiza√ß√µes chegam e s√£o periodicamente instaladas. <br><br><h2>  Instale o WSL 2 </h2><br>  A WSL exige que o Hyper-V seja ativado porque as distribui√ß√µes Linux s√£o executadas em VMs leves usando a virtualiza√ß√£o Hyper-V. <br><br><img src="https://habrastorage.org/webt/vd/im/7a/vdim7aihpbrv6ojfrf1uks51-q0.png"><br><br>  A seguir, darei uma breve instru√ß√£o de instala√ß√£o da distribui√ß√£o do WSL do CLI PowerShell usando o <a href="https://www.kali.org/news/wsl2-and-kali/" rel="nofollow">Kali Linux</a> como exemplo).  Se voc√™ preferir o <a href="https://aka.ms/wsl-ubuntu-1804" rel="nofollow">Ubuntu</a> ou <a href="https://docs.microsoft.com/ru-ru/windows/wsl/install-manual" rel="nofollow">outra</a> distribui√ß√£o <a href="https://docs.microsoft.com/ru-ru/windows/wsl/install-manual" rel="nofollow">Linux</a> dispon√≠vel, substitua o link e os nomes pelos apropriados. <br><br>  Verifique a vers√£o do Windows Build: <br><br> <code>Get-ItemProperty -Path "HKLM:\SOFTWARE\Microsoft\Windows NT\CurrentVersion" | Select CurrentBuild</code> <br> <br>  Ative os componentes <i>VirtualMachinePlatform</i> e <i>Microsoft-Windows-Subsystem-Linux:</i> <br><br> <code>Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux <br> Enable-WindowsOptionalFeature -Online -FeatureName VirtualMachinePlatform</code> <br> <br>  Reiniciar <br>  Em seguida, instale a distribui√ß√£o da Microsoft Store ( <a href="https://aka.ms/wslstore" rel="nofollow">https://aka.ms/wslstore</a> ) ou continue a executar no PowerShell: <br><br> <code>curl.exe -L -o kali.appx https://aka.ms/wsl-kali-linux-new <br> Add-AppxPackage .\kali.appx <br> rm .\kali.appx</code> <br> <br>  Inicie o console da WSL (a distribui√ß√£o deve aparecer no menu Iniciar, procure pelo nome da distribui√ß√£o), aguarde o convite para instalar um novo usu√°rio, feche o console. <br><br>  Agora a distribui√ß√£o deve aparecer na lista se executada no PowerShell: <br><br> <code>wsl -l -v</code> <br> <br>  Se necess√°rio, converta a distribui√ß√£o no formato WSL vers√£o 2: <br><br> <code>wsl --set-version kali-linux 2 <br> wsl --set-default-version 2</code> <br> <br>  Fa√ßa do root o usu√°rio padr√£o (opcional): <br><br> <code>kali config --default-user root</code> <br> <br>  Se voc√™ receber o erro <i>"Uma tentativa de conex√£o falhou porque a parte conectada n√£o respondeu adequadamente ap√≥s um per√≠odo de tempo ou a conex√£o estabelecida falhou porque o host conectado falhou ao responder."</i> , Em seguida, voc√™ tem uma compila√ß√£o na qual a pr√≥xima (j√° corrigida em vers√µes recentes) bug.  Como de costume, h√° uma <a href="https://expertonsomething.com/2019/08/25/fixing-kali-linux-on-windows-wsl2/" rel="nofollow">solu√ß√£o alternativa</a> , ou use a distribui√ß√£o Ubuntu, n√£o tive problemas com ele no mesmo, n√£o na vers√£o mais recente da compila√ß√£o. <br><br>  Se necess√°rio, voc√™ pode mover o disco virtual WSL para outra parti√ß√£o (diferente de C :), de acordo com as <a href="https://github.com/MicrosoftDocs/WSL/issues/412" rel="nofollow">instru√ß√µes</a> .  √â melhor fazer isso imediatamente, pois nem tudo pode correr bem. <br><br>  <i>Isen√ß√£o de responsabilidade sobre seguran√ßa</i> .  Na WSL e em outros servidores Linux na rede dom√©stica, n√£o inicio nenhum sistema cr√≠tico e n√£o h√° outros usu√°rios (exceto eu) na rede, por isso vou fazer root em quase todos os lugares, com autentica√ß√£o ssh por meio de chaves.  Sei que essa n√£o √© a melhor pr√°tica, mas estou falando de um ambiente de desenvolvimento pessoal e n√£o vejo o ponto de criar um usu√°rio n√£o raiz.  Os problemas de seguran√ßa n√£o ser√£o considerados neste artigo, vou escrever sobre isso algum dia (sobre como organizar a intera√ß√£o de servi√ßos por meio do TLS com uma renova√ß√£o centralizada de certificados em uma rede dom√©stica; sobre sincroniza√ß√£o <i>~ / .ssh / config</i> entre servidores, encaminhamento portas e chaves, etc.). <br><br><h2>  Configura√ß√£o WSL </h2><br>  Come√ßando com a compila√ß√£o <b>17093</b> , o arquivo de configura√ß√£o principal da WSL est√° localizado no sistema de distribui√ß√£o FS em <a href="https://devblogs.microsoft.com/commandline/automatically-configuring-wsl/" rel="nofollow">/etc/wsl.conf</a> , descreve as configura√ß√µes que ser√£o aplicadas sempre que a distribui√ß√£o for inicializada: <br><br><ul><li>  Automount - unidades Windows automount </li><li>  Rede - gere arquivos resolv.conf, hosts </li><li>  Interoperabilidade - inicie processos do Windows e adicione Windows $ PATH ao Linux $ PATH </li></ul><br>  Inicialmente, o WSL fica sem essa configura√ß√£o, deve ser registrado manualmente: <br><br> <code>[automount] <br> enabled = true <br> root = /mnt <br> options = "metadata,umask=22,fmask=11" <br> mountFsTab = true <br> <br> [network] <br> generateHosts = true <br> generateResolvConf = true <br> <br> [interop] <br> enabled = true <br> appendWindowsPath = true</code> <br> <br>  Algumas configura√ß√µes s√£o usadas com o valor padr√£o e <i>/etc/wsl.conf</i> vazio, mas para a opera√ß√£o correta com os arquivos, voc√™ precisa registrar pelo menos o par√¢metro <i>options</i> , caso contr√°rio, os arquivos do Windows ter√£o permiss√µes 777 e isso n√£o poder√° ser alterado no Linux. <br><br><img src="https://habrastorage.org/webt/rq/ph/vb/rqphvbavjejp_g8ukkdldxlqklw.png"><br><br>  Voc√™ pode reiniciar a distribui√ß√£o do PowerShell com o comando: <br><br> <code>wsl -t kali-linux</code> <br> <br>  Depois disso, voc√™ pode atualizar os pacotes e ajustar o sistema operacional por conta pr√≥pria.  N√£o tocarei nas configura√ß√µes e no ambiente do shell no Linux, deixarei isso para o pr√≥ximo artigo. <br><br> <code>apt -y update &amp;&amp; apt -y upgrade</code> <br> <br><h2>  Sistema de arquivos WSL 2 e desempenho </h2><br>  Os arquivos dentro da WSL vers√£o 2 s√£o armazenados no disco virtual VHDX, ext4 √© usado como o sistema de arquivos.  Voc√™ pode acessar o WSL rootfs atrav√©s de um caminho neste formato: <br><br> <code>\\wsl$\{DistroName}\</code> <br> <br>  Ou voc√™ pode digitar <i>‚Äúexplorer.exe‚Äù.</i> Na CLI e um navegador do Windows ser√° aberto no diret√≥rio atual. <br><br>  A vers√£o 1 da WSL n√£o usava VHDX e tinha f√°cil acesso ao diret√≥rio em que os arquivos do Linux estavam localizados, e a Microsoft <a href="https://devblogs.microsoft.com/commandline/do-not-change-linux-files-using-windows-apps-and-tools/" rel="nofollow">desencorajou fortemente a</a> altera√ß√£o dos arquivos do Linux no Windows.  Na nova vers√£o do WSL, o acesso ao FS em um disco virtual √© fornecido usando o servidor de <a href="https://en.wikipedia.org/wiki/9P_(protocol)" rel="nofollow">arquivos</a> do <a href="https://en.wikipedia.org/wiki/9P_(protocol)" rel="nofollow">Plan 9 Filesystem Protocol</a> . <br><br><img src="https://habrastorage.org/webt/mr/x8/yh/mrx8yhmxos1hciyocyjn9lz-ki4.png"><br><br>  Nas vers√µes anteriores do WSL, havia problemas de desempenho do sistema de arquivos porque as chamadas do sistema eram emuladas pela API do Windows, o acesso ao arquivo era lento e inst√°vel.  No final de 2019, o WSL 2 mudou sua arquitetura e usou o kernel Linux nativo.  A julgar pelo <a href="" rel="nofollow">slide</a> da <a href="" rel="nofollow">apresenta√ß√£o</a> do youtube de <a href="https://www.youtube.com/watch%3Fv%3DlwhMThePdIo" rel="nofollow">O novo subsistema Windows para arquitetura Linux: um mergulho profundo</a> , o desempenho das opera√ß√µes de disco aumentou de 2 a 5 vezes. <br><br>  A capacidade m√°xima do disco √© limitada a 256 GB; se esse volume for excedido, voc√™ precisar√° redimensionar, as instru√ß√µes est√£o na <a href="https://docs.microsoft.com/en-us/windows/wsl/wsl2-ux-changes" rel="nofollow">documenta√ß√£o</a> . <br><br>  A WSL teve inicialmente problemas ao liberar recursos ap√≥s o uso da RAM.  A vers√£o 19013 resolveu esse problema.  Se voc√™ executar tarefas exigentes (por exemplo, montar um aplicativo enferrujado), notar√° que o processo <a href="https://devblogs.microsoft.com/oldnewthing/20180717-00/%3Fp%3D99265" rel="nofollow">Vmmem</a> estar√° na parte superior do Gerenciador de Tarefas, mas o consumo de mem√≥ria diminuiu significativamente nas vers√µes recentes do WSL. <br><br><img src="https://habrastorage.org/webt/5k/pk/w0/5kpkw0g2rhtlk1sbvagf4o2md7w.gif"><br><br><h2>  Rede </h2><br>  O nome do host (nome do host) no Linux √© obtido do nome do PC no Windows, independentemente do que est√° escrito em <i>/ etc / hostname</i> ou com o comando <i>hostnamectl set-hostname</i> . <br><br>  Diferente da primeira vers√£o, no WSL 2, a rede funciona atrav√©s de um comutador virtual Hyper-V: <br><br> <code>‚ùØ‚ùØ ipconfig.exe | grep IPv4 <br> IPv4 Address. . . . . . . . . . . : 192.168.88.200 <br> IPv4 Address. . . . . . . . . . . : 172.31.160.1 <br> IPv4 Address. . . . . . . . . . . : 172.27.144.1 <br> <br> ‚ùØ‚ùØ ip -br -4 ad show dev eth0 <br> eth0       UP 172.27.150.196/20 <br> ‚ùØ‚ùØ ip ro list default <br> default via 172.27.144.1 dev eth0</code> <br> <br><img src="https://habrastorage.org/webt/jq/9j/wy/jq9jwydv7ac3lacnnqmgxtzajes.png"><br><br>  Nesse caso, a rede <i>172.27.144.0/20 √©</i> usada no WSL, seu primeiro endere√ßo ( <i>172.27.144.1</i> ) √© o sistema host do Windows. <br><br>  No Linux, voc√™ pode acessar os servi√ßos de host (em execu√ß√£o no Windows) pela rede, por exemplo, assim: <br><br> <code>‚ùØ‚ùØ nmap -p 3389 $(cat /etc/resolv.conf | grep nameserver | awk '{print $2}')</code> <br> <br>  O endere√ßo IP do Windows √© obtido em <i>/etc/resolv.conf</i> , onde √© gerado automaticamente de acordo com as configura√ß√µes do <i>wsl.conf</i> . <br><br>  Por outro lado, se voc√™ precisar de uma conex√£o com um soquete Linux a partir de um aplicativo Windows, dever√° acessar o endere√ßo IP da WSL.  H√° uma ressalva - no Linux, o servi√ßo n√£o deve ser executado no <i>host local (127.0.0.1)</i> , mas no endere√ßo <i>0.0.0.0</i> .  Por exemplo, para aumentar rapidamente o proxy SOCKS5 para o seu VPS, √© necess√°rio iniciar o SSH com o par√¢metro de <i>encaminhamento din√¢mico de porta</i> : <br><br> <code>‚ùØ‚ùØ ssh -D 0.0.0.0:2299 -N -f proxy.example.com</code> <br> <br>  Depois disso, no aplicativo Windows, por exemplo, Chrome, como o endere√ßo SOCKS5, registre n√£o o <i>host local</i> , mas o endere√ßo WSL, neste caso <i>172.27.150.196</i> .  A prop√≥sito, de uma maneira t√£o simples de encapsular o tr√°fego atrav√©s do VPS no Chrome, torna-se poss√≠vel usar o acesso aos sites via IPv6. <br><br><img src="https://habrastorage.org/webt/2-/lk/r6/2-lkr6hzsppfvp6siqjjacjiszm.gif"><br><br>  O Linux sempre altera o endere√ßo IP ap√≥s uma reinicializa√ß√£o; portanto, em cen√°rios em que voc√™ precisa ter um encaminhamento de porta funcionando constantemente e iniciando automaticamente, √© necess√°rio procurar uma solu√ß√£o alternativa.  Existem muitas maneiras de resolver esse problema, com graus variados de muletas. Voc√™ pode ler mais nesta <a href="https://github.com/microsoft/WSL/issues/4150" rel="nofollow">edi√ß√£o</a> no github.  Usei o utilit√°rio <a href="https://github.com/shayne/go-wsl2-host" rel="nofollow">go-wsl2-host</a> , que implementa o Servi√ßo Windows, que adiciona automaticamente o endere√ßo IP da WSL ao <i>arquivo de hosts</i> do Windows, para que voc√™ possa registrar um nome de host como <i>ubuntu.wsl</i> no sistema host e acessar o Linux nele.  No entanto, tudo isso muletas e n√£o funciona muito bem, resta esperar a Microsoft para corrigir esses problemas. <br><br><img src="https://habrastorage.org/webt/zj/tx/ow/zjtxowxg6epu4u7vfgoxki16z6k.png"><br><br>  <i>UPD</i>  Enquanto escrevia este artigo, descobri que havia atualiza√ß√µes (compila√ß√£o <a href="https://devblogs.microsoft.com/commandline/whats-new-for-wsl-in-insiders-preview-build-18945/" rel="nofollow">18945</a> ), nas quais era poss√≠vel obter servi√ßos por meio de <i>host local</i> para servi√ßos em execu√ß√£o na WSL.  √â verdade que ocorreu um <a href="https://github.com/microsoft/WSL/issues/4353" rel="nofollow">erro</a> devido ao qual ele ainda n√£o funcionou para todos, a <a href="https://github.com/MicrosoftDocs/WSL/releases/tag/18970" rel="nofollow">corre√ß√£o</a> na compila√ß√£o de agosto √© <b>18970</b> .  Como nem todos recebem atualiza√ß√µes, mesmo se eu fosse um membro do programa Windows Insiders, n√£o ajustei as informa√ß√µes, talvez isso ajude algu√©m a configurar a intera√ß√£o da rede. <br><br><h2>  OpenSSH no Windows e servi√ßos de inicializa√ß√£o autom√°tica </h2><br>  O Windows 10, como o Windows Server 2019, vem com um <a href="https://github.com/PowerShell/openssh-portable" rel="nofollow">fork do OpenSSH</a> , que inclui todos os familiares ssh-keygen, ssh-add, scp e outros utilit√°rios, incluindo ssh-agent e o pr√≥prio servidor sshd.  O cliente e o servidor podem ser <i>instalados</i> em <i>Aplicativos&gt; Aplicativos e recursos&gt; Gerenciar recursos opcionais,</i> mas a vers√£o do cliente ssh n√£o ser√° a mais recente.  Encontrei um bug que n√£o <i>me</i> permitia <i>conectar-</i> se ao host atrav√©s do host de salto com a op√ß√£o <i>ProxyJump</i> e verificou-se que esse problema foi corrigido, mas tive que atualizar manualmente o SSH do cliente.  Voc√™ pode instalar a vers√£o atual do Win32 OpenSSH baixando o zip da se√ß√£o <a href="https://github.com/PowerShell/Win32-OpenSSH/releases/" rel="nofollow">Vers√µes</a> no github e descompactando-a, por exemplo, em <i>C: \ Arquivos de Programas \ OpenSSH</i> .  O software de terceiros ssh.exe (por exemplo, ao usar o modo Desenvolvimento remoto no VSCode) √© chamado de <i>$ PATH</i> ( <i>% SYSTEMROOT% \ System32 \ OpenSSH \</i> ), voc√™ precisa alterar a vari√°vel de ambiente.  As vari√°veis ‚Äã‚Äãde ambiente s√£o alteradas atrav√©s da GUI em <i>Iniciar&gt; Editar as vari√°veis ‚Äã‚Äãde ambiente do sistema</i> ( <i>Iniciar&gt; Alterar vari√°veis ‚Äã‚Äãde ambiente do sistema</i> ); √© necess√°rio colocar uma nova maneira acima da vers√£o antiga. <br><br>  Como o Systemd n√£o funciona na WSL, h√° um problema com a inicializa√ß√£o dos servi√ßos com a inicializa√ß√£o do sistema.  Existem v√°rias maneiras de configurar o in√≠cio autom√°tico do servidor ssh no WSL, a maneira mais f√°cil √© criar uma tarefa no Agendador de Tarefas, onde voc√™ pode especificar o comando de in√≠cio do servidor.  Na Internet, voc√™ pode encontrar diferentes <a href="https://superuser.com/questions/1112007/how-to-run-ubuntu-service-on-windows-at-startup%3Fnoredirect%3D1%26lq%3D1" rel="nofollow">instru√ß√µes de</a> inicializa√ß√£o atrav√©s dos scripts <i>vbs</i> , <i>ps1</i> ou <i>bat</i> .  O problema com quase todos os m√©todos √© que o gatilho √© iniciar o sistema operacional Windows principal, ou seja, se a WSL travar e voc√™ precisar reiniciar o sistema ( <i>wsl -t</i> ), o Linux ser√° iniciado sem a execu√ß√£o de um servi√ßo.  Quando o Windows √© iniciado, a distribui√ß√£o WSL √© iniciada apenas quando √© acessada pela primeira vez. <br><br>  Eu uso o servidor SSH em um laptop dentro da WSL para poder ir remotamente de m√°quina em m√°quina.  E, devido ao fato de eu usar t√©cnicas de encaminhamento de porta ssh e uma configura√ß√£o centralizada bem pensada de clientes SSH, posso ir de forma transparente a todos os meus servidores, inserindo um nome de host em vez de endere√ßos.  Ou seja, mesmo que voc√™ conecte um dos laptops √† rede m√≥vel, o daemon autossh se conectar√° ao host de salto e ainda posso ir ao computador, nenhum NAT ser√° um obst√°culo.  Portanto, √© importante para mim que o sshd esteja sempre ativo. <br><br><img src="https://habrastorage.org/webt/jv/wp/sk/jvwpsk57_p-g780dj2nrk_geutw.png"><br><br>  A √∫nica maneira de trabalhar para acessar o SSH no WSL √© encaminhar a porta SSH.  Isso pode ser feito a partir da pr√≥pria WSL usando o <i>RemoteForward</i> ou de outro servidor na rede dom√©stica.  Poucas pessoas precisam, e este j√° √© um n√≠vel avan√ßado, ent√£o darei um comando de trabalho: <br><br> <code>‚ùØ‚ùØ ssh -R '*:2363:*:22' -N -f mt.example.com</code> <br> <br>  Agora, ao conectar-se ao endere√ßo <i>mt.example.com:2263,</i> voc√™ pode <i>acessar</i> diretamente o WSL. <br><br>  Se voc√™ planeja aumentar o servidor SSH na WSL, lembre-se de configurar os par√¢metros de inicializa√ß√£o do servidor necess√°rios em <i>/ etc / ssh / sshd_config</i> .  Para evitar conflitos com a liga√ß√£o de servi√ßo na porta 22, o servidor OpenSSH no Windows deve ser desativado ou removido completamente se estiver instalado ( <i>Aplicativos&gt; Aplicativos e Recursos&gt; Gerenciar Recursos Opcionais</i> ). <br><br><h2>  Encaminhamento X </h2><br>  Acabou sendo um momento agrad√°vel que no Windows 10 existe um utilit√°rio <i>clip.exe</i> que permite redirecionar o stdout diretamente para a √°rea de transfer√™ncia do Windows.  Isso √© conveniente para usar em programas como o tmux e, gra√ßas ao encaminhamento do servidor X, o texto tamb√©m pode ser copiado de hosts remotos.  Para que tudo funcione, voc√™ sempre deve ter um servidor X em execu√ß√£o no Windows e a vari√°vel <i>$ DISPLAY</i> definida corretamente. <br><br>  Um pouco de teoria chata.  Nos sistemas * nix executando o X, existem diferentes tipos de pranchetas ( <i>prim√°ria, secund√°ria, prancheta</i> ). No contexto deste artigo, isso n√£o √© t√£o importante, mas √© importante para uma compreens√£o geral do mecanismo de trabalho.  Existem dois utilit√°rios (xclip e xsel) para trabalhar com pranchetas no Linux.  Ambos os utilit√°rios t√™m funcionalidade semelhante, no xsel √© um pouco maior, mas a funcionalidade b√°sica necess√°ria para encaminhar o conte√∫do do buffer √© a mesma.  Nos aplicativos X, o texto selecionado cai na sele√ß√£o prim√°ria, √© inserido com o bot√£o do meio do mouse, em xclip e xsel a sele√ß√£o prim√°ria √© usada por padr√£o. <br><br>  Por exemplo, para copiar o conte√∫do de uma vari√°vel para o buffer padr√£o, voc√™ precisa passar stdout para stdin do utilit√°rio xclip, sem par√¢metros adicionais: <br><br> <code>‚ùØ‚ùØ echo -n $DISPLAY | xclip</code> <br> <br>  E para exibir o conte√∫do do buffer padr√£o, execute xclip com a op√ß√£o <i>-o</i> : <br><br> <code>‚ùØ‚ùØ xclip -o <br> 172.20.160.1:0</code> <br> <br>  Para que a √°rea de transfer√™ncia seja redirecionada atrav√©s do servidor X e os aplicativos gr√°ficos sejam executados no servidor X local, √© necess√°rio definir o endere√ßo IP, que √© o gateway padr√£o da WSL, na vari√°vel <i>$ DISPLAY</i> .  At√© agora, nada melhor do que <i>retir√°-</i> lo do <i>resolv.conf</i> (que √© gerado automaticamente pelo Windows) n√£o foi inventado.  Portanto, a maneira mais f√°cil √© registrar a exporta√ß√£o da vari√°vel <i>$ DISPLAY</i> no perfil do shell (por exemplo, <i>~ / .zshrc</i> para zsh). <br><br> <code>‚ùØ‚ùØ echo "export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}'):0" &gt;&gt; ~/.zshrc</code> <br> <br><img src="https://habrastorage.org/webt/wi/gx/yr/wigxyrt3e5yazd256qflh2z6fbu.gif"><br><br>  Como servidor X, escolhi o <a href="https://sourceforge.net/projects/vcxsrv/" rel="nofollow">VcXsrv</a> gratuito, ele pode trabalhar com o buffer, possui diferentes modos de exibi√ß√£o de janela e √© iniciado a partir da linha de comando com as op√ß√µes prescritas.  <a href="https://gist.github.com/stowler/9921780" rel="nofollow">Usando o link para gist,</a> voc√™ pode ver todas as op√ß√µes. <br><br>  Voc√™ pode criar uma tarefa de execu√ß√£o autom√°tica para o servidor X no Agendador de tarefas desta forma: <br><br> <code>Triggers: At startup <br> Actions: Start a program <br> ____Program: "%ProgramFiles%\VcXsrv\vcxsrv.exe" <br> ____Arguments: -wgl -dpi auto -ac -multiwindow</code> <br> <br><h2>  Chaves ssh </h2><br>  Para que os programas do Windows possam usar chaves SSH (por exemplo, um editor ao trabalhar com um reposit√≥rio GitHub remoto) e, ao mesmo tempo, n√£o haja uma segunda c√≥pia de chaves no WSL, √© melhor gerar chaves no Windows <i>% HOMEPATH% /.</i> Ssh e criar links simb√≥licos em casa Diret√≥rios WSL. <br><br> <code>ssh-keygen -f /mnt/c/Users/${WIN_USER}/.ssh/id_rsa -b 4096 <br> ln -sf /mnt/c/Users/${WIN_USER}/.ssh/id_rsa ${HOME}/.ssh/id_rsa <br> ln -sf /mnt/c/Users/${WIN_USER}/.ssh/id_rsa.pub ${HOME}/.ssh/id_rsa.pub</code> <br> <br>  Ou, em <i>~ / .ssh / config,</i> voc√™ pode especificar o par√¢metro <i>IdentityFile</i> especificando o caminho para as chaves no disco do Windows: <br><br> <code>Host * <br> IdentityFile /mnt/c/Users/${WIN_USER}/.ssh/id_rsa</code> <br> <br>  Se as chaves foram copiadas de algum lugar e as permiss√µes de arquivo n√£o est√£o definidas corretamente, corrija as permiss√µes: <br><br> <code>chmod 600 /mnt/c/Users/${WIN_USER}/.ssh/id_rsa <br> chmod 644 /mnt/c/Users/${WIN_USER}/.ssh/id_rsa.pub <br> chmod 700 /mnt/c/Users/${WIN_USER}/.ssh</code> <br> <br><img src="https://habrastorage.org/webt/d0/lf/da/d0lfda3xlur_aq6pphygb_rcvoc.png"><br><br>  Portanto, ao configurar ainda mais o <a href="https://habr.com/ru/post/122445/">acesso por chaves SSH, o</a> usu√°rio √© identificado exclusivamente por um conjunto de chaves em um s√≥ lugar, ao usar aplicativos Windows e Linux.  Agora voc√™ pode adicionar a chave p√∫blica ao servidor / servi√ßos, para onde precisar√° ir deste computador.  Se houver outros dispositivos na rede dom√©stica que exijam acesso SSH, ser√° correto copiar sua chave p√∫blica para esses servidores ( <i>ssh-copy-id</i> ), mas voc√™ n√£o precisar√° copiar as chaves de um servidor para outro.  Como √© poss√≠vel (e necess√°rio) usar o ssh-agent ao trabalhar atrav√©s do SSH, ao conectar de um servidor a outro, o agente cuida para que a autoriza√ß√£o ocorra na chave encaminhada.  Para que tudo funcione corretamente e conforme o esperado, voc√™ precisa cuidar do <a href="https://www.ssh.com/ssh/config/" rel="nofollow"><i>arquivo ~ / .ssh / config</i> ,</a> no qual voc√™ precisa registrar todas as op√ß√µes necess√°rias. <br><br> <code>Host * <br> TCPKeepAlive             yes <br> ServerAliveInterval         30 <br> ServerAliveCountMax         3 <br> ForwardAgent             yes <br> AddKeysToAgent            yes <br> ForwardX11              yes <br> ForwardX11Trusted          yes</code> <br> <br><h1>  Qual terminal escolher trabalhar no Linux no Windows </h1><br>  Primeiro, quero fazer uma pequena revis√£o dos shells de terminal existentes para Windows que podem executar o WSL.  Entre os usu√°rios, o processador <a href="https://mobaxterm.mobatek.net/" rel="nofollow">MobaXterm</a> funcional √© <a href="https://mobaxterm.mobatek.net/" rel="nofollow">popular</a> , o que pode criar v√°rias sess√µes, inclusive gr√°ficas (WSL, bash / zsh, Mosh, RDP, VNC, etc.), permite criar macros e executar scripts, possui muitas configura√ß√µes e recursos, agente ssh, encaminhamento autom√°tico de porta ssh e ainda possui um servidor ftp / tftp / http interno, mas o produto √© de c√≥digo fechado e, al√©m disso, pago.  <a href="https://github.com/zeit/hyper" rel="nofollow">Hyper</a> √© outro emulador de terminal mais moderno que permite executar o shell da WSL, o terminal √© constru√≠do em HTML / JS / CSS e √© expandido usando plug-ins na forma de m√≥dulos node.js. ( <a href="https://github.com/bnb/awesome-hyper" rel="nofollow">lista impressionante</a> ).  Existem outros terminais que permitem executar o WSL com diferentes graus de muletas ( <a href="https://conemu.github.io/en/BashOnWindows.html" rel="nofollow">ConEmu</a> , seu garfo <a href="https://jackwarren.info/blog/cmder" rel="nofollow">Cmder</a> , <a href="https://github.com/mintty/wsltty" rel="nofollow">WSLtty</a> etc.), mas eu os deixarei sem supervis√£o. <br><br><img src="https://habrastorage.org/webt/ur/ih/v9/urihv91z1zuherlcqddg_fkl9q0.png"><br><br>  Mais adiante neste artigo, falaremos sobre o <b>Terminal</b> do <b>Windows</b> , para o qual mudei recentemente, e at√© agora s√≥ estou experimentando emo√ß√µes positivas.  <a href="https://github.com/microsoft/terminal" rel="nofollow">O terminal</a> ainda est√° na vers√£o beta, mas funciona de maneira bastante est√°vel.  Dos recursos atualmente implementados multitab, separa√ß√£o de pain√©is (divis√£o), perfis personalizados de conex√µes de terminais, esquemas de cores, bem, n√£o h√° mais nada a listar.  Mas essa funcionalidade √© suficiente, eu at√© gosto que o software n√£o seja sobrecarregado de sup√©rfluo - como se os desenvolvedores aderissem ao princ√≠pio do <a href="https://en.wikipedia.org/wiki/KISS_principle" rel="nofollow">KISS</a> . <br><br>  O terminal evoluiu do projeto Windows Console (ConPTY), aprendendo a suportar sequ√™ncias ANSI / VT, cores reais RGB de 24 bits e UTF-8.  Seguindo os links ( <a href="https://habr.com/ru/post/417679/">in√≠cio</a> , <a href="https://habr.com/ru/post/420853/">continua√ß√£o</a> ) em Habr√©, uma tradu√ß√£o maravilhosa de uma s√©rie de postagens no blog da <a href="https://devblogs.microsoft.com/commandline/windows-command-line-the-evolution-of-the-windows-command-line/" rel="nofollow">Linha de Comando</a> do <a href="https://devblogs.microsoft.com/commandline/windows-command-line-the-evolution-of-the-windows-command-line/" rel="nofollow">Windows: Inside the Windows Console</a> , que conta sobre a hist√≥ria da cria√ß√£o de terminais, padr√µes relacionados √† transfer√™ncia de seq√º√™ncias de escape, p√°ginas de c√≥digo, unicode, o surgimento de emuladores de terminal e no futuro j√° √© uma evolu√ß√£o da linha de comando do Windows.  Tecn√≥logos podem estar interessados.  A equipe de engenharia que trabalha nesse projeto de c√≥digo-fonte aberto mant√©m o devlog da <a href="https://devblogs.microsoft.com/commandline/" rel="nofollow">Linha de Comandos</a> do <a href="https://devblogs.microsoft.com/commandline/" rel="nofollow">Windows</a> , que √© mais do que totalmente dedicado ao WSL e ao Windows Terminal.  Eu nunca teria acreditado antes naquele momento que estaria assistindo com interesse o desenvolvimento de produtos MS, mas o que eles fazem como parte do desenvolvimento de WSL, Terminal e VSCode realmente merece respeito.  Como o desenvolvimento da WSL come√ßou, √© descrito no <a href="https://medium.com/microsoft-open-source-stories/when-linux-came-to-windows-204cf9abb3d6" rel="nofollow">Microsoft Open Source Stories</a> (h√° uma <a href="https://habr.com/ru/company/ruvds/blog/461663/">tradu√ß√£o</a> em Habr√©).  A prop√≥sito, a Microsoft √© um membro de platina da <a href="https://en.wikipedia.org/wiki/Linux_Foundation" rel="nofollow">Linux Foundation</a> desde 2016. <br><br><h2>  Instale e configure o Terminal do Windows </h2><br>  Voc√™ pode instalar o Windows Terminal na <a href="https://www.microsoft.com/en-us/p/windows-terminal-preview/9n0dx20hk701" rel="nofollow">Windows Store</a> ou baixando o bin√°rio da se√ß√£o <a href="https://github.com/microsoft/terminal" rel="nofollow">Vers√µes</a> no github do projeto, todas as informa√ß√µes, instru√ß√µes e perguntas frequentes relevantes tamb√©m est√£o dispon√≠veis.  O terminal requer pelo menos uma vers√£o do Windows 1903 e compila√ß√£o <b>18362</b> .  √â prefer√≠vel instalar atrav√©s da Windows Store, pois √© mais f√°cil atualizar neste caso, diretamente da loja.  As atualiza√ß√µes s√£o emitidas regularmente; um <a href="" rel="nofollow">roteiro da</a> primeira vers√£o do terminal foi definido no github.  No momento, todos os recursos da vers√£o 1 j√° foram implementados (de acordo com o plano, para implementar todas as melhorias at√© o final de 2019), depois de alguns meses de trabalho na corre√ß√£o de bugs e em abril de 2020 est√° planejado o lan√ßamento oficial do Terminal v1.0.  √â bom que a MS esteja agora no github, seu software aprendeu a mostrar logs, erros intelig√≠veis e quaisquer problemas s√£o facilmente pesquisados ‚Äã‚Äãno Google. <br><br><img src="https://habrastorage.org/webt/7_/cq/fq/7_cqfq2i_s0nos7pbtekj6yfsam.png"><br><br>  Ainda n√£o existem muitas configura√ß√µes no terminal, mas s√£o suficientes para um trabalho confort√°vel, o produto est√° em desenvolvimento ativo, existe no <a href="https://github.com/microsoft/terminal" rel="nofollow">github</a> onde os usu√°rios podem criar uma solicita√ß√£o de recurso ou um relat√≥rio de bug.  Os desenvolvedores participam da discuss√£o de problemas com os usu√°rios, geralmente oferecendo solu√ß√µes alternativas quando um bug √© descoberto. <br><br><img src="https://habrastorage.org/webt/im/7g/wk/im7gwk7y4ow-_wt4heedfu6iovg.png"><br><br>  A configura√ß√£o √© armazenada no formato json, depois de salva, √© aplicada imediatamente.  Isso √© conveniente apenas porque voc√™ pode aplicar boas pr√°ticas para gerenciar a configura√ß√£o do ambiente de trabalho - eu armazeno todas as configura√ß√µes do Linux no reposit√≥rio git, no Windows eu uso apenas o VSCode da ferramenta de trabalho, que pode sincronizar a configura√ß√£o via github gist e salvar a configura√ß√£o da √°rea de trabalho local separadamente em dotfiles .  Portanto, o Terminal se move na mesma dire√ß√£o, usando as mesmas teclas de atalho e o formato de configura√ß√£o que o VSCode.  A prop√≥sito, editar uma configura√ß√£o √© conveniente atrav√©s do VSCode, especialmente se voc√™ j√° usa este excelente editor da MS.  O arquivo de configura√ß√£o do terminal j√° cont√©m muitas configura√ß√µes padr√£o e o editor correto permite que voc√™ veja todas as op√ß√µes com uma descri√ß√£o das op√ß√µes de <i>chave</i> e <i>valor</i> do <a href="" rel="nofollow">esquema</a> (isso √© especialmente conveniente quando o projeto ainda n√£o possui documenta√ß√£o completa).  Al√©m disso, todos os chips IDE est√£o dispon√≠veis na forma de preenchimento autom√°tico, intellisense, verifica√ß√£o de sintaxe, formata√ß√£o, etc. <br><br><img src="https://habrastorage.org/webt/3v/sb/6t/3vsb6tsivv0vahxtqjr608db1pw.gif"><br><br>  A documenta√ß√£o para desenvolvedores est√° dispon√≠vel <a href="https://github.com/microsoft/terminal/tree/master/doc" rel="nofollow">aqui</a> , mas <a href="" rel="nofollow">aqui</a> est√° uma pequena p√°gina de documenta√ß√£o para usu√°rios por enquanto.  Uma <a href="" rel="nofollow">p√°gina</a> separada <a href="" rel="nofollow">√©</a> dedicada √†s configura√ß√µes gravadas no arquivo de configura√ß√£o json.  A partir da√≠, voc√™ pode descobrir que estruturalmente as configura√ß√µes s√£o divididas em: <br><br><ul><li>  Global (perfil padr√£o, tamanho inicial da janela do terminal, tema etc.) </li><li>  Key Bindings </li><li>  Perfis (configura√ß√µes espec√≠ficas para cada terminal) </li><li>  Esquemas (esquemas de cores) </li></ul><br>  Existem perfis din√¢micos, que aparecem automaticamente na configura√ß√£o e t√™m a propriedade de <i>origem</i> .    WSL  Azure Cloud Shell.          WSL (, Ubuntu),  <a href="http://new-guid.com/" rel="nofollow"> GUID</a>     ,  <i>source</i> ,    <i>commandline</i>  <i>wsl -d {DistroName}</i> . <br><br><h2>  </h2><br>   -  ,          .   : <br><br><ul><li> <a href="https://github.com/tonsky/FiraCode" rel="nofollow">Fira Code</a> </li><li> <a href="https://github.com/source-foundry/Hack" rel="nofollow">Hack</a> </li><li> <a href="https://github.com/powerline/fonts" rel="nofollow"></a> <a href="https://github.com/ryanoasis/nerd-fonts" rel="nofollow"></a>   </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu uso a fonte do programador Fira Code no terminal e no editor. Ele suporta a maioria dos caracteres usados ‚Äã‚Äãno design de programas CLI e interfaces de console, ligaduras e tamb√©m n√£o h√° problemas em exibir emojis no terminal. </font></font><br><br><img src="https://habrastorage.org/webt/rc/ol/7e/rcol7evvrk6zvv1bznu8v1e--is.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A fonte √© instalada no Windows usando o instalador de fontes do SO. Para fazer isso, baixe a vers√£o mais recente da fonte que voc√™ gosta do arquivo de vers√µes do github e instale manualmente a fonte no sistema. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode visualizar o nome da fonte (configurando o terminal </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fontFace</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) durante a instala√ß√£o ou posteriormente no aplicativo </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mapa de Caracteres</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tabela de S√≠mbolos</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). Al√©m disso, em </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Iniciar -&gt; Configura√ß√µes -&gt; Personaliza√ß√£o -&gt; Fontes</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voc√™ pode ver como a fonte √© renderizada em modos diferentes e ao mesmo tempo verificar como as ligaduras s√£o desenhadas. </font></font><br><br><img src="https://habrastorage.org/webt/vs/qx/te/vsqxtekvqzfwcrrxstgn9wueycy.png"><br><br><h2>  Conclus√£o </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O resultado foi um artigo muito longo, em um s√≥ lugar, todas as informa√ß√µes relevantes sobre instala√ß√£o, configura√ß√£o e uso do Windows Terminal em conjunto com a WSL s√£o coletadas. </font><font style="vertical-align: inherit;">No futuro, quero escrever artigos sobre ZSH e tmux da mesma maneira e escrever minha experi√™ncia de implanta√ß√£o de configura√ß√µes na VM e sincroniza√ß√£o de arquivos de ponto entre hosts. </font><font style="vertical-align: inherit;">Tudo est√° dentro da estrutura de automa√ß√£o de rede dom√©stica, mas ser√° √∫til para desenvolvedores / devops / engenheiros de sistema. </font><font style="vertical-align: inherit;">Outro t√≥pico n√£o resolvido foi o lan√ßamento do </font></font><a href="https://docs.docker.com/docker-for-windows/wsl-tech-preview/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Docker no WSL 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , mas n√£o preciso executar o Docker em um computador pessoal, pois h√° um servidor dedicado para isso.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Espero que ningu√©m se arrependa de ter lido o artigo e divulgado novos conhecimentos. </font><font style="vertical-align: inherit;">Se algu√©m tiver algo a acrescentar, vamos compartilhar nossos pensamentos nos coment√°rios. </font><font style="vertical-align: inherit;">Se voc√™ tiver algum coment√°rio sobre o texto, escreva para o PM, quero manter este guia atualizado.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Refer√™ncias </font></font></h2><br><ul><li> <a href="https://devblogs.microsoft.com/commandline/announcing-wsl-2/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An√∫ncio do WSL 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="https://devblogs.microsoft.com/commandline/wsl-2-is-now-available-in-windows-insiders/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O WSL 2 j√° est√° dispon√≠vel no Windows Insiders</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="https://devblogs.microsoft.com/commandline/memory-reclaim-in-the-windows-subsystem-for-linux-2/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Recupera√ß√£o de mem√≥ria no subsistema Windows para Linux 2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="https://devblogs.microsoft.com/commandline/automatically-configuring-wsl/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configurando automaticamente o WSL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (devblogs.microsoft.com)</font></font></li><li> <a href="" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wsl2-tutorial</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (github.com)</font></font></li><li> <a href="" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Roteiro do Terminal v1.0</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (github.com)</font></font></li><li> <a href="" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Editando as configura√ß√µes JSON do terminal do Windows</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (github.com)</font></font></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt481746/">https://habr.com/ru/post/pt481746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt481734/index.html">Experi√™ncia com impressoras de cart√µes, parte 1</a></li>
<li><a href="../pt481736/index.html">Em que construir a infraestrutura Wi-Fi 6?</a></li>
<li><a href="../pt481738/index.html">Tarefas de programa√ß√£o - uma maneira ruim de avaliar as qualifica√ß√µes de desenvolvedor s√™nior</a></li>
<li><a href="../pt481740/index.html">A luz azul perturba o biorritmo humano?</a></li>
<li><a href="../pt481742/index.html">Estrat√©gia da Apple. Vinculando o SO ao hardware - vantagem ou desvantagem competitiva?</a></li>
<li><a href="../pt481748/index.html">Pacote de benef√≠cios na Arm√™nia: do seguro e b√¥nus de refer√™ncia √† massagem e empr√©stimos</a></li>
<li><a href="../pt481750/index.html">Tarefa n√∫mero 3. Convers√£o e upload de dados para servi√ßos de terceiros</a></li>
<li><a href="../pt481752/index.html">Resultados da Pesquisa de Idiomas</a></li>
<li><a href="../pt481754/index.html">Me bot e meu furador</a></li>
<li><a href="../pt481756/index.html">Como organizar DDoS para bons prop√≥sitos?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>