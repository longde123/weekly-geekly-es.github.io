<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤› ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ ğŸ‘‹ğŸ¼ Gonkey-å¾®æœåŠ¡æµ‹è¯•å·¥å…· ğŸ‘œ âœ–ï¸ ğŸ•¯ï¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Gonkeyæ­£åœ¨Lamodaä¸­æµ‹è¯•æˆ‘ä»¬çš„å¾®æœåŠ¡ï¼Œæˆ‘ä»¬è®¤ä¸ºä»–ä¹Ÿå¯ä»¥æµ‹è¯•æ‚¨çš„å¾®æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å‘å¸ƒåœ¨å¼€æºä¸­ ã€‚ å¦‚æœæ‚¨çš„æœåŠ¡åŠŸèƒ½ä¸»è¦é€šè¿‡APIå®ç°ï¼Œå¹¶ä¸”ä½¿ç”¨JSONè¿›è¡Œæ•°æ®äº¤æ¢ï¼Œé‚£ä¹ˆGonkeyå‡ ä¹è‚¯å®šé€‚åˆæ‚¨ã€‚ 





 ä¸‹é¢ï¼Œæˆ‘å°†æ›´è¯¦ç»†åœ°è®¨è®ºå®ƒï¼Œå¹¶é€šè¿‡å…·ä½“ç¤ºä¾‹å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒã€‚ 
 åˆšå¥‡æ˜¯å¦‚ä½•å‡ºç”Ÿ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gonkey-å¾®æœåŠ¡æµ‹è¯•å·¥å…·</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lamoda/blog/463301/"><p>  Gonkeyæ­£åœ¨Lamodaä¸­æµ‹è¯•æˆ‘ä»¬çš„å¾®æœåŠ¡ï¼Œæˆ‘ä»¬è®¤ä¸ºä»–ä¹Ÿå¯ä»¥æµ‹è¯•æ‚¨çš„å¾®æœåŠ¡ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å‘å¸ƒåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¼€æºä¸­</a> ã€‚ å¦‚æœæ‚¨çš„æœåŠ¡åŠŸèƒ½ä¸»è¦é€šè¿‡APIå®ç°ï¼Œå¹¶ä¸”ä½¿ç”¨JSONè¿›è¡Œæ•°æ®äº¤æ¢ï¼Œé‚£ä¹ˆGonkeyå‡ ä¹è‚¯å®šé€‚åˆæ‚¨ã€‚ </p><br><p><img src="https://habrastorage.org/webt/dz/ie/4z/dzie4z9vcjyrtf_n3mhfdistusm.jpeg" alt="å›¾ç‰‡"></p><br><p> ä¸‹é¢ï¼Œæˆ‘å°†æ›´è¯¦ç»†åœ°è®¨è®ºå®ƒï¼Œå¹¶é€šè¿‡å…·ä½“ç¤ºä¾‹å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒã€‚ </p><a name="habracut"></a><br><h3 id="kak-rodilsya-gonkey"> åˆšå¥‡æ˜¯å¦‚ä½•å‡ºç”Ÿçš„ </h3><br><p> æˆ‘ä»¬æœ‰ä¸€ç™¾å¤šä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªå¾®æœåŠ¡éƒ½å¯ä»¥è§£å†³ç‰¹å®šçš„ä»»åŠ¡ã€‚ æ‰€æœ‰æœåŠ¡éƒ½æœ‰ä¸€ä¸ªAPIã€‚ å½“ç„¶ï¼Œå®ƒä»¬ä¸­çš„ä¸€äº›ä¹Ÿæ˜¯ç”¨æˆ·ç•Œé¢ï¼Œä½†æ˜¯ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå®ƒä»¬çš„ä¸»è¦ä½œç”¨æ˜¯æˆä¸ºç«™ç‚¹ï¼Œç§»åŠ¨åº”ç”¨ç¨‹åºæˆ–å…¶ä»–å†…éƒ¨æœåŠ¡çš„æ•°æ®æºï¼Œå¹¶å› æ­¤æä¾›<em>è½¯ä»¶ç•Œé¢</em> ã€‚ </p><br><p> å½“æˆ‘ä»¬æ„è¯†åˆ°æœ‰å¾ˆå¤šæœåŠ¡ï¼Œç„¶åä¼šæœ‰æ›´å¤šçš„æœåŠ¡æ—¶ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ªå†…éƒ¨æ–‡æ¡£æ¥æè¿°APIè®¾è®¡çš„æ ‡å‡†æ–¹æ³•ï¼Œå¹¶å°†Swaggerç”¨ä½œæè¿°å·¥å…·ï¼ˆç”šè‡³ç¼–å†™äº†ç”¨äºåŸºäºswaggerè§„èŒƒç”Ÿæˆä»£ç çš„å®ç”¨ç¨‹åºï¼‰ã€‚ å¦‚æœæ‚¨æƒ³äº†è§£æ›´å¤šæœ‰å…³æ­¤çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Andrewå…³äºHighload ++çš„æ¼”è®²ã€‚</a> </p><br><p>  APIè®¾è®¡çš„æ ‡å‡†æ–¹æ³•è‡ªç„¶å¯¼è‡´äº†æ ‡å‡†æµ‹è¯•æ–¹æ³•çš„æƒ³æ³•ã€‚ è¿™æ˜¯æˆ‘æƒ³è¦å®ç°çš„ç›®æ ‡ï¼š </p><br><ol><li>  <em>é€šè¿‡APIæµ‹è¯•æœåŠ¡</em> ï¼Œå› ä¸ºæœåŠ¡çš„å‡ ä¹æ‰€æœ‰åŠŸèƒ½éƒ½æ˜¯<em>é€šè¿‡API</em>å®ç°çš„ </li><li>  <em>èƒ½å¤Ÿè‡ªåŠ¨å¯åŠ¨æµ‹è¯•</em>ä»¥å°†å…¶é›†æˆåˆ°æˆ‘ä»¬çš„CI / CDæµç¨‹ä¸­çš„èƒ½åŠ›ï¼Œæ­£å¦‚ä»–ä»¬æ‰€è¯´çš„ï¼Œâ€œæŒ‰æŒ‰é’®è¿è¡Œâ€ </li><li>  <em>ç¼–å†™æµ‹è¯•åº”è¯¥æ˜¯å¯ç§»æ¤çš„</em> ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä»…ç¨‹åºå‘˜å¯ä»¥ç¼–å†™æµ‹è¯•ï¼Œç†æƒ³æƒ…å†µä¸‹è¿˜å¯ä»¥æ˜¯ä¸ç†Ÿæ‚‰ç¼–ç¨‹çš„äººã€‚ </li></ol><br><p> äºæ˜¯è´¡å¥‡å°±å‡ºç”Ÿäº†ã€‚ </p><br><h3 id="itak-chto-zhe-eto"> é‚£æ˜¯ä»€ä¹ˆ </h3><br><p> Gonkeyæ˜¯ä¸€ä¸ª<em>åº“</em> ï¼ˆé€‚ç”¨äºGolangä¸Šçš„é¡¹ç›®ï¼‰å’Œä¸€ä¸ª<em>æ§åˆ¶å°å®ç”¨ç¨‹åº</em> ï¼ˆé€‚ç”¨äºä»»ä½•è¯­è¨€å’ŒæŠ€æœ¯çš„é¡¹ç›®ï¼‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¯¥å·¥å…·é€šè¿‡æ ¹æ®é¢„å®šä¹‰çš„è„šæœ¬è®¿é—®<em>æœåŠ¡</em>çš„APIæ¥<em>è¿›è¡ŒæœåŠ¡</em>çš„<em>åŠŸèƒ½å’Œå›å½’æµ‹è¯•</em> ã€‚ æµ‹è¯•è„šæœ¬åœ¨YAMLæ–‡ä»¶ä¸­è¿›è¡Œäº†æè¿°ã€‚ </p><br><p> ç®€è€Œè¨€ä¹‹ï¼ŒGonkeyå¯ä»¥ï¼š </p><br><ul><li> ä½¿ç”¨HTTPè¯·æ±‚è½°ç‚¸æ‚¨çš„æœåŠ¡ï¼Œå¹¶ç¡®ä¿å…¶å“åº”ç¬¦åˆé¢„æœŸã€‚ å®ƒå‡å®šåœ¨â€‹â€‹è¯·æ±‚å’Œå“åº”ä¸­ä½¿ç”¨äº†JSONï¼Œä½†æ˜¯æœ€æœ‰å¯èƒ½çš„æ˜¯ï¼Œå®ƒå°†åœ¨å…·æœ‰ä¸åŒæ ¼å¼çš„ç­”æ¡ˆçš„ç®€å•æƒ…å†µä¸‹ä½¿ç”¨ã€‚ </li><li> é€šè¿‡ä½¿ç”¨æ¥è‡ªå¤¹å…·çš„æ•°æ®ï¼ˆä¹Ÿåœ¨YAMLæ–‡ä»¶ä¸­æŒ‡å®šï¼‰å¡«å……æ•°æ®åº“æ¥ä¸ºæµ‹è¯•åšå‡†å¤‡ï¼› </li><li> ä½¿ç”¨æ¨¡æ‹Ÿæ¨¡æ‹Ÿå¤–éƒ¨æœåŠ¡çš„å“åº”ï¼ˆä»…å½“æ‚¨å°†Gonkeyä½œä¸ºåº“è¿æ¥æ—¶ï¼Œæ­¤åŠŸèƒ½æ‰å¯ç”¨ï¼‰ï¼› </li><li> å°†æµ‹è¯•ç»“æœæä¾›ç»™æ§åˆ¶å°æˆ–ç”Ÿæˆâ€œé­…åŠ›â€æŠ¥å‘Šã€‚ </li></ul><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡¹ç›®èµ„æ–™åº“</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Dockeré•œåƒ</a> </p><br><h3 id="primer-testirovaniya-servisa-s-gonkey">  Gonkeyçš„æœåŠ¡æµ‹è¯•ç¤ºä¾‹ </h3><br><p> ä¸ºäº†ä¸ç»™æ‚¨å¢åŠ æ–‡æœ¬è´Ÿæ‹…ï¼Œæˆ‘æƒ³ä»æ–‡å­—åˆ°äº‹è¿¹ï¼Œç„¶ååœ¨æ­¤å¤„æµ‹è¯•ä¸€äº›APIï¼Œå¹¶å‘Šè¯‰å¹¶è¯´æ˜å¦‚ä½•ç¼–å†™æµ‹è¯•è„šæœ¬ã€‚ </p><br><p> è®©æˆ‘ä»¬åœ¨Goä¸Šç”»ä¸€ä¸ªå°æœåŠ¡ï¼Œå®ƒå°†æ¨¡æ‹Ÿäº¤é€šä¿¡å·ç¯çš„å·¥ä½œã€‚ å®ƒå­˜å‚¨å½“å‰ä¿¡å·çš„é¢œè‰²ï¼šçº¢è‰²ï¼Œé»„è‰²æˆ–ç»¿è‰²ã€‚ æ‚¨å¯ä»¥é€šè¿‡APIè·å–å½“å‰çš„ä¿¡å·é¢œè‰²æˆ–è®¾ç½®æ–°çš„ä¿¡å·é¢œè‰²ã€‚ </p><br><pre><code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//    const ( lightRed = "red" lightYellow = "yellow" lightGreen = "green" ) //      type trafficLights struct { currentLight string `json:"currentLight"` mutex sync.RWMutex `json:"-"` } //   var lights = trafficLights{ currentLight: lightRed, } func main() { //       http.HandleFunc("/light/get", func(w http.ResponseWriter, r *http.Request) { lights.mutex.RLock() defer lights.mutex.RUnlock() resp, err := json.Marshal(lights) if err != nil { log.Fatal(err) } w.Write(resp) }) //       http.HandleFunc("/light/set", func(w http.ResponseWriter, r *http.Request) { lights.mutex.Lock() defer lights.mutex.Unlock() request, err := ioutil.ReadAll(r.Body) if err != nil { log.Fatal(err) } var newTrafficLights trafficLights if err := json.Unmarshal(request, &amp;newTrafficLights); err != nil { http.Error(w, err.Error(), http.StatusBadRequest) return } if err := validateRequest(&amp;newTrafficLights); err != nil { http.Error(w, err.Error(), http.StatusBadRequest) return } lights = newTrafficLights }) //   () log.Fatal(http.ListenAndServe(":8080", nil)) } func validateRequest(lights *trafficLights) error { if lights.currentLight != lightRed &amp;&amp; lights.currentLight != lightYellow &amp;&amp; lights.currentLight != lightGreen { return fmt.Errorf("incorrect current light: %s", lights.currentLight) } return nil }</span></span></code> </pre> <br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">main.goçš„å®Œæ•´æºä»£ç åœ¨è¿™é‡Œ</a> ã€‚ </p><br><p> è¿è¡Œç¨‹åºï¼š </p><br><pre> <code class="plaintext hljs">go run .</code> </pre> <br><p>  15åˆ†é’Ÿå†…å³å¯å¿«é€Ÿç»˜åˆ¶è‰å›¾ï¼ å½“ç„¶ï¼Œä»–åœ¨æŸä¸ªåœ°æ–¹å¼„é”™äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¿›è¡Œæµ‹è¯•å¹¶æ£€æŸ¥ã€‚ </p><br><p> ä¸‹è½½å¹¶è¿è¡ŒGonkeyï¼š </p><br><pre> <code class="plaintext hljs">mkdir -p tests/cases docker run -it -v $(pwd)/tests:/tests lamoda/gonkey -tests tests/cases -host host.docker.internal:8080</code> </pre> <br><p> è¯¥å‘½ä»¤é€šè¿‡dockeré€šè¿‡gonkeyå¯åŠ¨æ˜ åƒï¼Œåœ¨å®¹å™¨å†…å®‰è£…tests / casesç›®å½•ï¼Œå¹¶ä½¿ç”¨-tests tests / cases -hostå‚æ•°å¯åŠ¨gonkeyã€‚ </p><br><p> å¦‚æœæ‚¨ä¸å–œæ¬¢dockeræ–¹æ³•ï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›¿ä»£æ–¹æ³•ï¼š </p><br><pre> <code class="plaintext hljs">go get github.com/lamoda/gonkey go run github.com/lamoda/gonkey -tests tests/cases -host localhost:8080</code> </pre> <br><p> å¯åŠ¨å¹¶å¾—åˆ°ç»“æœï¼š </p><br><pre> <code class="plaintext hljs">Failed tests: 0/0</code> </pre> <br><p> æ²¡æœ‰æµ‹è¯•-æ— éœ€æ£€æŸ¥ã€‚ è®©æˆ‘ä»¬ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•ã€‚ ç”¨æœ€å°‘çš„å†…å®¹åˆ›å»ºä¸€ä¸ªæ–‡ä»¶tests / cases / light_get.yamlï¼š </p><br><pre> <code class="plaintext hljs">- name: WHEN currentLight is requested MUST return red method: GET path: /light/get response: 200: &gt; { "currentLight": "red" }</code> </pre> <br><p> åœ¨ç¬¬ä¸€å±‚æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å·²ç»æè¿°äº†ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œä½†æ˜¯æ–‡ä»¶ä¸­å¯èƒ½æœ‰å¾ˆå¤šã€‚ ä»–ä»¬å…±åŒç»„æˆäº†æµ‹è¯•æ–¹æ¡ˆã€‚ å› æ­¤ï¼Œä¸€ä¸ªæ–‡ä»¶-ä¸€ä¸ªè„šæœ¬ã€‚ æ‚¨å¯ä»¥ä½¿ç”¨æµ‹è¯•è„šæœ¬åˆ›å»ºä»»æ„æ•°é‡çš„æ–‡ä»¶ï¼Œå¦‚æœæ–¹ä¾¿çš„è¯ï¼Œå¯ä»¥å°†å®ƒä»¬å®‰æ’åœ¨å­ç›®å½•ä¸­-gonkeyä»ä¼ è¾“çš„ç›®å½•ä¸­è¯»å–æ‰€æœ‰yamlå’Œymlæ–‡ä»¶ï¼Œå¹¶ä¸”å…·æœ‰æ›´æ·±çš„é€’å½’æ€§ã€‚ </p><br><p> ä»¥ä¸‹æ–‡ä»¶æè¿°äº†å°†å‘é€åˆ°æœåŠ¡å™¨çš„è¯·æ±‚çš„è¯¦ç»†ä¿¡æ¯ï¼šæ–¹æ³•ï¼Œè·¯å¾„ã€‚ ç”šè‡³æ›´ä½çš„æ˜¯æˆ‘ä»¬æœŸæœ›æœåŠ¡å™¨æä¾›çš„å“åº”ä»£ç ï¼ˆ200ï¼‰å’Œå“åº”ä¸»ä½“ã€‚ </p><br><p> å®Œæ•´æ–‡ä»¶æ ¼å¼<a href="">åœ¨READMEä¸­</a>æè¿°ã€‚ </p><br><p> å†æ¬¡è¿è¡Œï¼š </p><br><pre> <code class="plaintext hljs">docker run -it -v $(pwd)/tests:/tests lamoda/gonkey -tests tests/cases -host host.docker.internal:8080</code> </pre> <br><p> ç»“æœï¼š </p><br><pre> <code class="plaintext hljs"> Name: WHEN currentlight is requested MUST return red Request: Method: GET Path: /light/get Query: Body: &lt;no body&gt; Response: Status: 200 OK Body: {} Result: ERRORS! Errors: 1) at path $ values do not match: expected: { "currentLight": "red" } actual: {} Failed tests: 1/1</code> </pre> <br><p> é”™äº†ï¼ é¢„æœŸå…·æœ‰currentLightå­—æ®µçš„ç»“æ„ï¼Œå¹¶è¿”å›ç©ºç»“æ„ã€‚ ä¸å¥½ ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ç»“æœè¢«è§£é‡Šä¸ºå­—ç¬¦ä¸²ï¼Œè¿™ä¸€ç‚¹å¯ä»¥é€šè¿‡ä»¥ä¸‹äº‹å®å¾—åˆ°è¯æ˜ï¼šgonkeyåœ¨æ²¡æœ‰é—®é¢˜çš„æƒ…å†µä¸‹çªå‡ºäº†æ•´ä¸ªç­”æ¡ˆï¼š </p><br><pre> <code class="plaintext hljs"> expected: { "currentLight": "red" }</code> </pre> <br><p> åŸå› å¾ˆç®€å•ï¼šæˆ‘å¿˜è®°å†™äº†ï¼Œä»¥ä¾¿å“åº”ä¸­çš„æœåŠ¡æŒ‡ç¤ºå†…å®¹ç±»å‹ä¸ºapplication / jsonã€‚ æˆ‘ä»¬ä¿®å¤ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//       http.HandleFunc("/light/get", func(w http.ResponseWriter, r *http.Request) { lights.mutex.RLock() defer lights.mutex.RUnlock() resp, err := json.Marshal(lights) if err != nil { log.Fatal(err) } w.Header().Add("Content-Type", "application/json") // &lt;--  w.Write(resp) })</span></span></code> </pre> <br><p> æˆ‘ä»¬é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œç„¶åå†æ¬¡è¿è¡Œæµ‹è¯•ï¼š </p><br><pre> <code class="plaintext hljs"> Name: WHEN currentlight is requested MUST return red Request: Method: GET Path: /light/get Query: Body: &lt;no body&gt; Response: Status: 200 OK Body: {} Result: ERRORS! Errors: 1) at path $ key is missing: expected: currentLight actual: &lt;missing&gt;</code> </pre> <br><p> å¤ªå¥½äº†ï¼Œæœ‰è¿›æ­¥ã€‚  Gonkeyç°åœ¨å¯ä»¥è¯†åˆ«è¯¥ç»“æ„ï¼Œä½†æ˜¯ä»ç„¶ä¸æ­£ç¡®ï¼šç­”æ¡ˆä¸ºç©ºã€‚ åŸå› æ˜¯æˆ‘åœ¨ç±»å‹å®šä¹‰ä¸­ä½¿ç”¨äº†ä¸å¯å¯¼å‡ºçš„currentLightå­—æ®µï¼š </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//      type trafficLights struct { currentLight string `json:"currentLight"` mutex sync.RWMutex `json:"-"` }</span></span></code> </pre> <br><p> åœ¨Goä¸­ï¼Œä»¥å°å†™å­—æ¯å‘½åçš„ç»“æ„å­—æ®µè¢«è®¤ä¸ºæ˜¯ä¸å¯å¯¼å‡ºçš„ï¼Œå³æ— æ³•ä»å…¶ä»–åŒ…ä¸­è®¿é—®ã€‚  JSONåºåˆ—åŒ–å™¨çœ‹ä¸åˆ°å®ƒï¼Œå¹¶ä¸”ä¸èƒ½å°†å…¶åŒ…æ‹¬åœ¨å“åº”ä¸­ã€‚ æˆ‘ä»¬çº æ­£ï¼šæˆ‘ä»¬ç”¨å¤§å†™å­—æ¯è¡¨ç¤ºè¯¥å­—æ®µï¼Œè¿™æ„å‘³ç€å®ƒå·²å¯¼å‡ºï¼š </p><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">//      type trafficLights struct { urrentLight string `json:"currentLight"` // &lt;--   mutex sync.RWMutex `json:"-"` }</span></span></code> </pre> <br><p> é‡æ–°å¯åŠ¨æœåŠ¡ã€‚ å†æ¬¡è¿è¡Œæµ‹è¯•ã€‚ </p><br><pre> <code class="plaintext hljs">Failed tests: 0/1</code> </pre> <br><p> æµ‹è¯•é€šè¿‡äº†ï¼ </p><br><p> æˆ‘ä»¬å°†ç¼–å†™å¦ä¸€ä¸ªè„šæœ¬æ¥æµ‹è¯•setæ–¹æ³•ã€‚ ç”¨ä»¥ä¸‹å†…å®¹å¡«å……æ–‡ä»¶tests / cases / light_set.yamlï¼š </p><br><pre> <code class="plaintext hljs">- name: WHEN set is requested MUST return no response method: POST path: /light/set request: &gt; { "currentLight": "green" } response: 200: '' - name: WHEN get is requested MUST return green method: GET path: /light/get response: 200: &gt; { "currentLight": "green" }</code> </pre> <br><p> ç¬¬ä¸€ä¸ªæµ‹è¯•ä¸ºäº¤é€šä¿¡å·ç¯è®¾ç½®ä¸€ä¸ªæ–°å€¼ï¼Œç¬¬äºŒä¸ªæµ‹è¯•æ£€æŸ¥çŠ¶æ€ä»¥ç¡®ä¿å®ƒå·²æ›´æ”¹ã€‚ </p><br><p> ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤è¿è¡Œæµ‹è¯•ï¼š </p><br><pre> <code class="plaintext hljs">docker run -it -v $(pwd)/tests:/tests lamoda/gonkey -tests tests/cases -host host.docker.internal:8080</code> </pre> <br><p> ç»“æœï¼š </p><br><pre> <code class="plaintext hljs">Failed tests: 0/3</code> </pre> <br><p> æˆåŠŸçš„ç»“æœï¼Œä½†æ˜¯æˆ‘ä»¬å¾ˆå¹¸è¿ï¼Œè„šæœ¬ä»¥æ‰€éœ€çš„é¡ºåºæ‰§è¡Œï¼šé¦–å…ˆæ˜¯light_getï¼Œç„¶åæ˜¯light_setã€‚ å¦‚æœä»–ä»¬åšç›¸åçš„äº‹æƒ…ä¼šæ€æ ·ï¼Ÿ è®©æˆ‘ä»¬é‡å‘½åï¼š </p><br><pre> <code class="plaintext hljs">mv tests/cases/light_set.yaml tests/cases/_light_set.yaml</code> </pre> <br><p> å¹¶å†æ¬¡è¿è¡Œï¼š </p><br><pre> <code class="plaintext hljs">Errors: 1) at path $.currentLight values do not match: expected: red actual: green Failed tests: 1/3</code> </pre> <br><p> é¦–å…ˆï¼Œæ‰§è¡Œè®¾ç½®ï¼Œäº¤é€šä¿¡å·ç¯å¤„äºç»¿è‰²çŠ¶æ€ï¼Œå› æ­¤æ¥ä¸‹æ¥çš„get testè¿è¡Œå‘ç°ä¸€ä¸ªé”™è¯¯-ä»–æ­£åœ¨ç­‰å¾…çº¢è‰²ã€‚ </p><br><p> æ‘†è„±æµ‹è¯•ä¾èµ–äºä¸Šä¸‹æ–‡è¿™ä¸€äº‹å®çš„ä¸€ç§æ–¹æ³•æ˜¯åœ¨è„šæœ¬çš„å¼€å¤´ï¼ˆå³æ–‡ä»¶çš„å¼€å¤´ï¼‰åˆå§‹åŒ–æœåŠ¡ï¼Œè¿™é€šå¸¸æ˜¯åœ¨setæµ‹è¯•ä¸­è¿›è¡Œçš„-é¦–å…ˆï¼Œæˆ‘ä»¬è®¾ç½®å·²çŸ¥å€¼ï¼Œè¿™åº”è¯¥ä¼šäº§ç”Ÿå·²çŸ¥çš„æ•ˆæœï¼Œç„¶åæ£€æŸ¥æ•ˆæœæ˜¯å¦æœ‰æ•ˆã€‚ </p><br><p> å¦‚æœæœåŠ¡ä½¿ç”¨æ•°æ®åº“ï¼Œåˆ™å‡†å¤‡æ‰§è¡Œä¸Šä¸‹æ–‡çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¸¦æœ‰åœ¨è„šæœ¬å¼€å§‹æ—¶å·²åŠ è½½åˆ°æ•°æ®åº“ä¸­çš„æ•°æ®çš„å¤¹å…·ï¼Œä»è€Œå½¢æˆå¯ä»¥æ£€æŸ¥çš„æœåŠ¡çš„å¯é¢„æµ‹çŠ¶æ€ã€‚ æˆ‘æƒ³åœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­ä»‹ç»ä½¿ç”¨gonkeyä¸­çš„å¤¹å…·çš„æè¿°å’Œç¤ºä¾‹ã€‚ </p><br><p> åŒæ—¶ï¼Œæˆ‘æå‡ºä»¥ä¸‹è§£å†³æ–¹æ¡ˆã€‚ ç”±äºåœ¨setè„šæœ¬ä¸­æˆ‘ä»¬å®é™…ä¸Šæ­£åœ¨æµ‹è¯•light / setæ–¹æ³•å’Œlight / getæ–¹æ³•ï¼Œå› æ­¤æˆ‘ä»¬æ ¹æœ¬ä¸éœ€è¦ä¸Šä¸‹æ–‡ç›¸å…³çš„light_getè„šæœ¬ã€‚ æˆ‘å°†å…¶åˆ é™¤ï¼Œç„¶åé‡å‘½åå‰©ä½™çš„è„šæœ¬ï¼Œä»¥ä¾¿è¯¥åç§°åæ˜ æœ¬è´¨ã€‚ </p><br><pre> <code class="plaintext hljs">rm tests/cases/light_get.yaml mv tests/cases/_light_set.yaml tests/cases/light_set_get.yaml</code> </pre> <br><p> ä¸‹ä¸€æ­¥ï¼Œæˆ‘æƒ³æ£€æŸ¥ä¸€äº›ä½¿ç”¨æˆ‘ä»¬æœåŠ¡çš„è´Ÿé¢æƒ…å†µï¼Œä¾‹å¦‚ï¼Œå¦‚æœæˆ‘å‘é€ä¸æ­£ç¡®çš„ä¿¡å·é¢œè‰²ï¼Œå®ƒå°†æ­£å¸¸å·¥ä½œå—ï¼Ÿ è¿˜æ˜¯æ ¹æœ¬ä¸å‘é€é¢œè‰²ï¼Ÿ </p><br><p> åˆ›å»ºä¸€ä¸ªæ–°çš„æµ‹è¯•/æ¡ˆä¾‹/light_set_get_negative.yamlè„šæœ¬ï¼š </p><br><pre> <code class="plaintext hljs">- name: WHEN set is requested MUST return no response method: POST path: /light/set request: &gt; { "currentLight": "green" } response: 200: '' - name: WHEN incorrect color is passed MUST return error method: POST path: /light/set request: &gt; { "currentLight": "blue" } response: 400: &gt; incorrect current light: blue - name: WHEN color is missing MUST return error method: POST path: /light/set request: &gt; {} response: 400: &gt; incorrect current light: - name: WHEN get is requested MUST have color untouched method: GET path: /light/get response: 200: &gt; { "currentLight": "green" }</code> </pre> <br><p> ä»–æ£€æŸ¥ï¼š </p><br><ul><li> ä¼ è¾“é”™è¯¯çš„é¢œè‰²æ—¶ï¼Œä¼šå‘ç”Ÿé”™è¯¯ï¼› </li><li> å½“ä¸ä¼ è¾“é¢œè‰²æ—¶ï¼Œå‘ç”Ÿé”™è¯¯ï¼› </li><li> é”™è¯¯çš„é¢œè‰²ä¼ è¾“ä¸ä¼šæ”¹å˜äº¤é€šç¯çš„å†…éƒ¨çŠ¶æ€ã€‚ </li></ul><br><p> è¿è¡Œï¼š </p><br><pre> <code class="plaintext hljs">Failed tests: 0/6</code> </pre> <br><p> ä¸€åˆ‡éƒ½å¾ˆå¥½:) </p><br><h3 id="podklyuchaem-gonkey-kak-biblioteku"> å°†Gonkeyè¿æ¥ä¸ºå›¾ä¹¦é¦† </h3><br><p> å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ä»¬æ­£åœ¨æµ‹è¯•æœåŠ¡APIï¼Œå®Œå…¨ä»ç¼–å†™è¯¥è¯­è¨€çš„è¯­è¨€å’ŒæŠ€æœ¯ä¸­è¿›è¡ŒæŠ½è±¡ã€‚ ä»¥åŒæ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä»»ä½•æˆ‘ä»¬æ— æ³•è®¿é—®æºä»£ç çš„å…¬å…±API-è¶³ä»¥å‘é€è¯·æ±‚å’Œæ¥æ”¶ç­”æ¡ˆã€‚ </p><br><p> ä½†æ˜¯å¯¹äºç”¨goç¼–å†™çš„æˆ‘ä»¬è‡ªå·±çš„åº”ç”¨ç¨‹åºï¼Œæœ‰ä¸€ç§æ›´ä¾¿æ·çš„æ–¹å¼æ¥è¿è¡Œgonkey-å°†å…¶ä½œä¸ºåº“è¿æ¥åˆ°é¡¹ç›®ã€‚ è¿™æ ·ï¼Œæ— éœ€é¢„å…ˆç¼–è¯‘ä»»ä½•å†…å®¹ï¼ˆæ— è®ºæ˜¯gonkeyè¿˜æ˜¯é¡¹ç›®æœ¬èº«ï¼‰ï¼Œéƒ½å¯ä»¥é€šè¿‡ç®€å•åœ°è¿è¡Œ<code>go test</code>æ¥è¿è¡Œ<code>go test</code> ã€‚ </p><br><p> é€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä¼¼ä¹å¼€å§‹ç¼–å†™å•å…ƒæµ‹è¯•ï¼Œå¹¶ä¸”åœ¨æµ‹è¯•ä¸»ä½“ä¸­æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š </p><br><ul><li> ä»¥ä¸æœåŠ¡å¯åŠ¨æ—¶ç›¸åŒçš„æ–¹å¼åˆå§‹åŒ–WebæœåŠ¡å™¨ï¼› </li><li> åœ¨æœ¬åœ°ä¸»æœºå’Œéšæœºç«¯å£ä¸Šè¿è¡Œæµ‹è¯•åº”ç”¨ç¨‹åºæœåŠ¡å™¨ï¼› </li><li> æˆ‘ä»¬ä»gonkeyåº“ä¸­è°ƒç”¨è¯¥å‡½æ•°ï¼Œå¹¶å‘å…¶ä¼ é€’æµ‹è¯•æœåŠ¡å™¨çš„åœ°å€å’Œå…¶ä»–å‚æ•°ã€‚ ä¸‹é¢æˆ‘å°†è¯´æ˜è¿™ä¸€ç‚¹ã€‚ </li></ul><br><p> ä¸ºæ­¤ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå°†éœ€è¦ä¸€äº›é‡æ„ã€‚ å®ƒçš„å…³é”®æ˜¯ä½¿æœåŠ¡å™¨çš„åˆ›å»ºæˆä¸ºä¸€ä¸ªå•ç‹¬çš„åŠŸèƒ½ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨éœ€è¦åœ¨ä¸¤ä¸ªåœ°æ–¹ä½¿ç”¨æ­¤åŠŸèƒ½ï¼šæœåŠ¡å¯åŠ¨æ—¶ä»¥åŠè¿è¡Œgonkeyæµ‹è¯•æ—¶ã€‚ </p><br><p> æˆ‘å°†ä»¥ä¸‹ä»£ç æ”¾åœ¨å•ç‹¬çš„å‡½æ•°ä¸­ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initServer</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">//       http.HandleFunc("/light/get", func(w http.ResponseWriter, r *http.Request) { //   }) //       http.HandleFunc("/light/set", func(w http.ResponseWriter, r *http.Request) { //   }) }</span></span></code> </pre> <br><p> ä¸»è¦åŠŸèƒ½å¦‚ä¸‹ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { initServer() <span class="hljs-comment"><span class="hljs-comment">//   () log.Fatal(http.ListenAndServe(":8080", nil)) }</span></span></code> </pre> <br><p>  <a href="">ä¿®æ”¹åçš„main goæ–‡ä»¶å®Œå…¨</a> ã€‚ </p><br><p> è¿™è§£æ”¾äº†æˆ‘ä»¬çš„åŒæ‰‹ï¼Œè®©æˆ‘ä»¬å¼€å§‹ç¼–å†™æµ‹è¯•ã€‚ æˆ‘åˆ›å»ºä¸€ä¸ªfunc_test.goæ–‡ä»¶ï¼š </p><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Test_API</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t *testing.T)</span></span></span></span> { initServer() srv := httptest.NewServer(<span class="hljs-literal"><span class="hljs-literal">nil</span></span>) runner.RunWithTesting(t, &amp;runner.RunWithTestingParams{ Server: srv, TestsDir: <span class="hljs-string"><span class="hljs-string">"tests/cases"</span></span>, }) }</code> </pre> <br><p>  <a href="">è¿™æ˜¯å®Œæ•´çš„func_test.goæ–‡ä»¶</a> ã€‚ </p><br><p> ä»…æ­¤è€Œå·²ï¼ æˆ‘ä»¬æ£€æŸ¥ï¼š </p><br><pre> <code class="plaintext hljs">go test ./...</code> </pre> <br><p> ç»“æœï¼š </p><br><pre> <code class="plaintext hljs">ok github.com/lamoda/gonkey/examples/traffic-lights-demo 0.018s</code> </pre> <br><p> æµ‹è¯•é€šè¿‡äº†ã€‚ å¦‚æœæˆ‘åŒæ—¶æ‹¥æœ‰å•å…ƒæµ‹è¯•å’Œgonkeyæµ‹è¯•ï¼Œå®ƒä»¬å°†ä¸€èµ·è¿è¡Œ-éå¸¸æ–¹ä¾¿ã€‚ </p><br><h3 id="formiruem-otchet-allure"> ç”Ÿæˆé­…åŠ›æŠ¥å‘Š </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é­…åŠ›</a>æ˜¯ä¸€ç§æµ‹è¯•æŠ¥å‘Šæ ¼å¼ï¼Œç”¨äºä»¥æ¸…æ™°ç¾è§‚çš„æ–¹å¼æ˜¾ç¤ºç»“æœã€‚  Gonkeyå¯ä»¥ä»¥æ­¤æ ¼å¼è®°å½•æµ‹è¯•ç»“æœã€‚ æ¿€æ´»é­…åŠ›éå¸¸ç®€å•ï¼š </p><br><pre> <code class="plaintext hljs">docker run -it -v $(pwd)/tests:/tests -w /tests lamoda/gonkey -tests cases/ -host host.docker.internal:8080 -allure</code> </pre> <br><p> è¯¥æŠ¥å‘Šå°†æ”¾ç½®åœ¨å½“å‰å·¥ä½œç›®å½•çš„allure-resultså­ç›®å½•ä¸­ï¼ˆè¿™å°±æ˜¯æˆ‘æŒ‡å®š-w / testsçš„åŸå› ï¼‰ã€‚ </p><br><p> å½“å°†gonkeyè¿æ¥ä¸ºåº“æ—¶ï¼Œé€šè¿‡è®¾ç½®å…¶ä»–ç¯å¢ƒå˜é‡GONKEY_ALLURE_DIRæ¿€æ´»â€œé­…åŠ›â€æŠ¥å‘Šï¼š </p><br><pre> <code class="plaintext hljs">GONKEY_ALLURE_DIR="tests/allure-results" go test ./â€¦</code> </pre> <br><p> è®°å½•åœ¨æ–‡ä»¶ä¸­çš„æµ‹è¯•ç»“æœé€šè¿‡ä»¥ä¸‹å‘½ä»¤è½¬æ¢ä¸ºäº¤äº’å¼æŠ¥å‘Šï¼š </p><br><pre> <code class="plaintext hljs">allure generate allure serve</code> </pre> <br><p> è¯¥æŠ¥å‘Šå¦‚ä¸‹æ‰€ç¤ºï¼š <br><img src="https://habrastorage.org/webt/bq/z-/ds/bqz-dsu89nodwlzi_im5nxr0t-k.png" alt="å›¾ç‰‡"></p><br><h3 id="zaklyuchenie"> ç»“è®º </h3><br><p> åœ¨ä»¥ä¸‹æ–‡ç« ä¸­ï¼Œæˆ‘å°†è¯¦ç»†ä»‹ç»gonkeyä¸­çš„fixturesçš„ä½¿ç”¨ä»¥åŠä½¿ç”¨æ¨¡æ‹Ÿæ¨¡ä»¿å…¶ä»–æœåŠ¡çš„å“åº”ã€‚ </p><br><p> æˆ‘é‚€è¯·æ‚¨åœ¨é¡¹ç›®ä¸­<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å°è¯•ä½¿ç”¨gonkey</a> ï¼Œå‚ä¸å…¶å¼€å‘ï¼ˆæ¬¢è¿æ± è¯·æ±‚ï¼ï¼‰ï¼Œæˆ–è€…å¦‚æœè¯¥é¡¹ç›®å°†æ¥å¯¹æ‚¨æœ‰ç”¨ï¼Œè¯·åœ¨githubä¸Šç”¨æ˜Ÿå·æ ‡è®°ã€‚ </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN463301/">https://habr.com/ru/post/zh-CN463301/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN463291/index.html">éª°å­æˆ–éª¨å¤´</a></li>
<li><a href="../zh-CN463293/index.html">åƒåœ¾æ”¶é›†å™¨ã€‚ å…¨ç¨‹+ä»BOTRè½¬ç§»</a></li>
<li><a href="../zh-CN463295/index.html">C ++å’ŒCMake-æ°¸è¿œçš„å…„å¼Ÿï¼Œç¬¬äºŒéƒ¨åˆ†</a></li>
<li><a href="../zh-CN463297/index.html">å¿ äºæ‚¨çš„å“å‘³</a></li>
<li><a href="../zh-CN463299/index.html">KubernetesæŠ€å·§å’Œçªé—¨ï¼šå¦‚ä½•æé«˜ç”Ÿäº§åŠ›</a></li>
<li><a href="../zh-CN463303/index.html">Facebookæœ€ç»ˆåœæ­¢ä¸ºäººä»¬è¾“å…¥2FAçš„ç”µè¯å·ç å®šä½å¹¿å‘Š</a></li>
<li><a href="../zh-CN463305/index.html">.NETåº”ç”¨ç¨‹åºåˆ†æå’Œè°ƒè¯•å·¥å…·</a></li>
<li><a href="../zh-CN463307/index.html">ä¸â€œæ²‰é‡â€å®¢æˆ·æ²Ÿé€šçš„æ¡ˆä¾‹ç ”ç©¶</a></li>
<li><a href="../zh-CN463311/index.html">æœåŠ¡å™¨è§£å†³æ–¹æ¡ˆä¸­çš„CTTã€‚ ç¬¬äºŒç‰ˆ+ç¬¬ä¸‰ç‰ˆçš„å…¬å‘Šï¼Œå…·æœ‰è§¦æ‘¸åŠŸèƒ½</a></li>
<li><a href="../zh-CN463313/index.html">è®¢é˜…äº‹ä»¶çš„ä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œè¿˜æ˜¯EventObjectçœŸçš„å¿…è¦å—ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>