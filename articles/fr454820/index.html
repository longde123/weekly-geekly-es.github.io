<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç¢ üôÖüèº üë©üèª‚ÄçüöÄ Recherche Azure üèüÔ∏è üë©üèΩ‚Äç‚öñÔ∏è üòµ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Si l'un de vos projets utilise les donn√©es stock√©es dans la base de donn√©es Azhurov, il est fort possible que vous ayez la possibilit√© d'utiliser la r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Recherche Azure</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454820/"><p><img src="https://habrastorage.org/webt/dd/li/cx/ddlicxgiqvi5vlyllvf2hgklivs.jpeg"></p><br><p>  Si l'un de vos projets utilise les donn√©es stock√©es dans la base de donn√©es Azhurov, il est fort possible que vous ayez la possibilit√© d'utiliser la recherche de donn√©es √† l'aide de la recherche Azure.  Vous pouvez rechercher non seulement par des bases de donn√©es (Azure Cosmos DB, Azure SQL Database, SQL Server h√©berg√© dans une machine virtuelle Azure), mais √©galement par Blob (Azure Blob Storage, Azure Table Storage). </p><br><p>  La recherche a un tarif gratuit, qui vous permet de cr√©er jusqu'√† trois index d'une taille totale allant jusqu'√† 50 Mo.  Le tarif gratuit n'a pas de capacit√© d'√©quilibrage de charge, mais il est tout √† fait adapt√© √† une utilisation. </p><a name="habracut"></a><br><p> G√©rer la recherche m'a sembl√© assez simple (bien que ce ne soit pas toujours √©vident).  Il existe 3 types d'objets: source de donn√©es, index et indexeur.  L'objet principal, peut-√™tre, est l'index.  C'est lui qui est responsable de la recherche et de ce qu'il faut chercher exactement.  La source de donn√©es est une connexion de donn√©es et l'indexeur est un travail qui met √† jour les donn√©es d'index. </p><br><p>  L'interface utilisateur du portail vous permet d'importer des donn√©es et de cr√©er les trois objets.  L'occasion se pr√©sentera au passage et ajoutera des capacit√©s cognitives √† la recherche.  Si la base de donn√©es SQL est dans l'abonnement, vous pouvez la s√©lectionner lors de la cr√©ation de la source de donn√©es.  Bien que le mot de passe pour une raison quelconque, vous devez toujours entrer.  Si vous souhaitez utiliser Cosmos DB, vous devrez entrer la cha√Æne de connexion manuellement.  N'oubliez pas d'indiquer dans la ligne et la base de donn√©es, en ajoutant √† la fin de la ligne Base de donn√©es = YOUR_BASE_NAME </p><br><p>  Apr√®s avoir choisi une source de donn√©es, vous serez invit√© √† utiliser les capacit√©s de recherche cognitive.  L'ensemble des comp√©tences par d√©faut est encore assez petit: vous pouvez d√©finir la langue, extraire les noms, les noms d'organisations, les lieux et les phrases cl√©s.  Il existe √©galement une opportunit√© int√©ressante pour d√©terminer la nature du texte des √©motions positives ou n√©gatives √† l'aide de la d√©tection des sentiments.  Cette comp√©tence devrait √™tre pratique √† utiliser avec les avis sur les produits dans les magasins en ligne.  Il est possible <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">de cr√©er votre propre comp√©tence en</a> utilisant la description de l'API. </p><br><p><img src="https://habrastorage.org/webt/r6/wh/4x/r6wh4xtuxatvapppu0wxw2lh67k.png"></p><br><p>  Pour les fichiers t√©l√©charg√©s sur blob, l'OCR (Optical Character Recognition) est possible.  La reconnaissance des textes manuscrits (jusqu'√† pr√©sent uniquement en anglais) et imprim√©s est possible.  Gr√¢ce aux services cognitifs, il est possible d'identifier divers objets sur la photo.  Par exemple, des lieux c√©l√®bres ou des c√©l√©brit√©s. </p><br><p>  L'√©tape suivante consiste √† cr√©er un index.  La seule option pour le <strong>mode de recherche</strong> ce jour-l√† est ¬´analyse d'InfixMatching¬ª </p><br><p><img src="https://habrastorage.org/webt/aq/qg/6l/aqqg6ln6ptkzoqgpnizcp2cuezu.png"></p><br><p>  √Ä ce stade, vous pouvez cocher les cases en regard des champs de votre table ou ajouter un nouveau champ √† l'index.  Au cas o√π, j'expliquerai les possibilit√©s des champs: </p><br><p>  <strong>R√©cup√©rable</strong> - le champ sera pr√©sent dans les r√©sultats de la recherche <br>  <strong>Filtrable</strong> - la valeur du champ peut √™tre filtr√©e <br>  <strong>Triable</strong> - vous pouvez trier le r√©sultat par ce champ <br>  <strong>Facetable</strong> - une sorte de regroupement selon certaines caract√©ristiques.  Par exemple, en utilisant l'expression facet = listPrice, valeurs: 10 | 25 | 100 | 500 | 1000 | 2500, vous pouvez obtenir la r√©partition suivante des r√©sultats en groupes </p><br><p><img src="https://habrastorage.org/webt/pp/8d/wn/pp8dwnctx7vgllop2h-hsmboqqu.png"></p><br><p>  Recherche - ce champ recherchera </p><br><p>  Le champ <strong>Analyseur</strong> sugg√®re de choisir un analyseur pour diff√©rentes langues.  2 versions sont utilis√©es - <em>Lucene</em> et <em>Microsoft</em> .  Afin de comprendre quelle est la diff√©rence, vous devez comprendre quelle est la diff√©rence entre les deux termes suivants: </p><br><p>  <em>Le stamming</em> est le processus de recherche de la base d'un mot pour un mot source donn√©.  Tige (anglais) - tige, tige, origine.  La tige utilise des algorithmes.  Tronque souvent les mots en supprimant les suffixes et les terminaisons, obtenant ainsi la base du mot. <br>  <em>La lemmatisation</em> est le processus de r√©duction d'une forme verbale en lemme - sa forme normale (vocabulaire).  Le lemme est la forme canonique et fondamentale du mot.  La lemmatisation utilise une recherche par dictionnaire contenant diverses formes de mots. </p><br><p>  L'analyseur Lucene utilise le stemming.  L'analyseur Microsoft utilise la lemmatisation. <br>  Par d√©faut, si rien n'est s√©lectionn√©, Lucene est utilis√©.  Mais si vous recherchez des donn√©es dans une langue particuli√®re, il est sans aucun doute pr√©f√©rable d'utiliser un analyseur pour cette langue. </p><br><p>  <strong>Suggestion</strong> - vous permet de donner des indices avec des documents contenant le texte saisi en utilisant les premi√®res lettres de la recherche. </p><br><p>  Si vous utilisez le probester dans Azure Search dans l'application cliente, vous aurez 2 options pour l'utiliser: l' <em>invite</em> elle-m√™me ou la <em>saisie semi</em> - <em>automatique</em> .  En bref, l'invite sugg√®re compl√®tement la ligne enti√®re du champ de table et la saisie semi-automatique ne propose que de compl√©ter un mot ou une expression √† partir de quelques mots.  Le meilleur article sur les diff√©rences entre les modes d'invite et de saisie semi-automatique est d√©crit dans l'article suivant: La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">saisie semi</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">automatique dans Azure Search maintenant en aper√ßu public</a> Cet article a des gifs tr√®s visuels. </p><br><p>  Au stade de la cr√©ation de l' <strong>indexeur,</strong> vous devez sp√©cifier une <em>colonne de filigrane √©lev√©</em> .  Il s'agit d'un champ qui change chaque fois qu'un enregistrement est modifi√©.  Il s'agit g√©n√©ralement d'un champ contenant la date de la derni√®re modification ou d'un champ _ts dans Cosmos DB.  Pendant l'indexation, si la valeur du champ est modifi√©e, l'index changera √©galement. </p><br><p><img src="https://habrastorage.org/webt/sb/-v/-y/sb-v-yttwlbx9lebmpzm5__wyjc.png"></p><br><p>  <strong>La suppression des pistes</strong> est une option pour supprimer automatiquement les entr√©es de l'index.  Mais pour cela, vous devez avoir configur√© la suppression logicielle dans votre base de donn√©es.  Si vous utilisez la suppression logicielle, lorsque vous supprimez un enregistrement, il n'est pas supprim√©, mais simplement marqu√© comme supprim√©.  L'option standard consiste √† ajouter le champ isDeleted √† la base de donn√©es et √† le d√©finir sur true si l'enregistrement est supprim√©. <br>  Alternativement, chaque fois que vous supprimez une entr√©e de la base de donn√©es, vous pouvez envoyer une demande de suppression de la recherche √† l'API Azure Search.  Dans ce cas, la case √† cocher Suppressions de trak peut √™tre omise.  Mais je n'aime pas vraiment cette option, car si la demande de suppression ne fonctionne pas, l'enregistrement restera dans l'index.  Quant √† moi, il n'y a pas assez de possibilit√© de reconstruire compl√®tement l'indice une fois dans une certaine p√©riode de temps. </p><br><p>  Malgr√© toute la commodit√© du portail, apr√®s la cr√©ation, vous pouvez ajouter de nouveaux champs √† l'index, mais vous ne pouvez pas modifier les champs existants.  Que faire si vous devez changer quelque chose?  Vous pouvez recr√©er l'index.  Supprimez celui existant et cr√©ez-en un nouveau contenant les modifications n√©cessaires.  Utiliser le portail pour ce faire est une t√¢che plut√¥t morne.  J'utilise l'API √† ces fins.  En utilisant une application comme Postman, vous pouvez obtenir l'index JSON et l'utiliser pour √©crire une demande de cr√©ation d'index.  Il suffit de faire de petites modifications (par exemple, supprimez les champs syst√®me "@ odata.context" et "@ odata.etag"). </p><br><p>  Pour travailler avec l'API, vous devez retirer la cl√© du portail, qui doit √™tre ajout√©e √† l'en-t√™te de chaque demande d'API.  La cl√© est prise ici: </p><br><p><img src="https://habrastorage.org/webt/gb/4q/do/gb4qdotcdf2hz3d_busivo1tal4.png"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une requ√™te pour obtenir des donn√©es d'index</a> est: </p><br><pre><code class="plaintext hljs">GET https://[service name].search.windows.net/indexes/[index name]?api-version=[api-version]</code> </pre> <br><p>  <code>api-key: [admin key]</code> doit √™tre ajout√©e √† l'en-t√™te <code>api-key: [admin key]</code> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La cr√©ation d'un index est</a> possible √† l'aide de l'une des deux requ√™tes suivantes: </p><br><pre> <code class="plaintext hljs">POST https://[servicename].search.windows.net/indexes?api-version=[api-version] Content-Type: application/json api-key: [admin key]</code> </pre> <br><p>  ou </p><br><pre> <code class="plaintext hljs">PUT https://[servicename].search.windows.net/indexes/[index name]?api-version=[api-version]</code> </pre> <br><p>  Dans le corps, vous devez sp√©cifier JSON avec le contenu de l'index.  La derni√®re version pour le moment est le 2019-05-06, et avant qu'elle ne soit utilis√©e longtemps 2017-11-11 </p><br><p>  Gr√¢ce √† l'API, vous pouvez utiliser certaines fonctionnalit√©s de recherche qui ne sont pas disponibles sur le portail. </p><br><p>  Afin de donner la priorit√© √† certains champs dans la recherche, vous pouvez utiliser des <strong>profils de notation</strong> . </p><br><p>  Le JSON suivant ajout√© √† la demande donne au champ "titre" un double avantage sur le champ "info": </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"scoringProfiles"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"profileForTitle"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"document"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"weights"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, ‚Äúinfo<span class="hljs-attr"><span class="hljs-attr">": 1 } } ]</span></span></code> </pre> <br><p>  En plus de la possibilit√© de donner la priorit√© √† certains champs √† l'aide de poids, il est possible d'utiliser certaines fonctions pr√©d√©finies: fra√Æcheur, amplitude, distance et √©tiquette. </p><br><p>  <strong>La fra√Æcheur est</strong> utilis√©e uniquement avec les champs DateTime et vous permet d'afficher les derniers enregistrements dans la recherche.  <strong>La magnitude est</strong> utilis√©e avec les champs int et double.  Eh bien et en cons√©quence, cette fonction est bonne √† utiliser avec les champs stockant les prix, le nombre de t√©l√©chargements et d'autres informations num√©riques.  <strong>La distance est</strong> utilis√©e uniquement avec des champs tels que Edm.GeographyPoint et est augment√©e dans une recherche par distance √† partir d'un emplacement sp√©cifique.  Si <strong>balise</strong> est sp√©cifi√©e comme type de fonction, les documents contenant des balises qui apparaissent dans la cha√Æne de recherche seront g√©n√©r√©s lors de la recherche. </p><br><p>  L'une des options les plus populaires consiste √† r√©cup√©rer les derniers documents dans une recherche comme celle-ci: </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"scoringProfiles"</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newDocs"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"functions"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"freshness"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fieldName"</span></span>: <span class="hljs-string"><span class="hljs-string">"documentDate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"interpolation"</span></span>: <span class="hljs-string"><span class="hljs-string">"quadratic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"freshness"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"boostingDuration"</span></span>: <span class="hljs-string"><span class="hljs-string">"P7D"</span></span> } } ] } ]</code> </pre> <br><p>  Les documents dont le champ documentDate contient la date des sept derniers jours ("P7D") seront relev√©s. </p><br><p>  Apr√®s avoir cr√©√© un profil de notation, vous pouvez sp√©cifier son nom dans les demandes.  Ce n'est que dans ce cas que les champs n√©cessaires seront relev√©s lors de la recherche. </p><br><p>  En savoir plus dans la documentation officielle: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ajouter des profils de score √† un index Azure Search</a> </p><br><h3 id="data-change-detection-policy">  Politique de d√©tection des modifications de donn√©es </h3><br><p>  L'API fournit un peu plus de fonctionnalit√©s pour la source de donn√©es.  Comme vous pouvez le lire ci-dessus, lors de la cr√©ation d'une source de donn√©es, vous pouvez sp√©cifier un champ permettant de d√©terminer si les donn√©es ont chang√©.  Sous la forme de JSON, cela ressemble √† ceci: </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"dataChangeDetectionPolicy"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"@odata.type"</span></span> : <span class="hljs-string"><span class="hljs-string">"#Microsoft.Azure.Search.HighWaterMarkChangeDetectionPolicy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"highWaterMarkColumnName"</span></span> : <span class="hljs-string"><span class="hljs-string">"[a rowversion or last_updated column name]"</span></span> }        soft delete     policy: <span class="hljs-string"><span class="hljs-string">"dataDeletionDetectionPolicy"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"@odata.type"</span></span> : <span class="hljs-string"><span class="hljs-string">"#Microsoft.Azure.Search.SoftDeleteColumnDeletionDetectionPolicy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"softDeleteColumnName"</span></span> : <span class="hljs-string"><span class="hljs-string">"IsDeleted"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"softDeleteMarkerValue"</span></span> : <span class="hljs-string"><span class="hljs-string">"true"</span></span> }</code> </pre> <br><p>  Si vous utilisez SQL Server et que votre base de donn√©es prend en charge le suivi des modifications, les enregistrements supprim√©s peuvent √™tre supprim√©s automatiquement de l'index.  La sp√©cification de highWaterMarkColumnName dans ce cas n'est pas requise.  Il suffit de sp√©cifier SqlIntegratedChangeTrackingPolicy au lieu de HighWaterMarkChangeDetectionPolicy </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"dataChangeDetectionPolicy"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"@odata.type"</span></span> : <span class="hljs-string"><span class="hljs-string">"#Microsoft.Azure.Search.SqlIntegratedChangeTrackingPolicy"</span></span> }</code> </pre> <br><p>  C'est tr√®s pratique.  Mais il y a des nuances qui ne permettent pas de profiter pleinement de cette fonctionnalit√©. </p><br><p>  Tout d'abord, SqlIntegratedChangeTrackingPolicy ne peut pas √™tre utilis√© avec des vues.  Deuxi√®mement, la table ne doit pas avoir de cl√©s primaires composites.  Il va sans dire que la version de SQL Server doit √™tre plus ou moins nouvelle.  Enfin, le suivi des modifications doit √™tre activ√© pour la base de donn√©es et les tables utilis√©es par la recherche.  Pour la base de donn√©es, il s'allume comme ceci: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> AdventureWorks2012 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> CHANGE_TRACKING = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> (CHANGE_RETENTION = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DAYS</span></span>, AUTO_CLEANUP = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>)</code> </pre> <br><p>  Et pour la table comme celle-ci: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> Person.Contact <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span> CHANGE_TRACKING <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> (TRACK_COLUMNS_UPDATED = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>)</code> </pre> <br><p>  Mais ce n'est pas tout.  Il est fortement recommand√© d'activer l'isolement de capture instantan√©e pour la base. </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> AdventureWorks2012 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> ALLOW_SNAPSHOT_ISOLATION <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>;</code> </pre> <br><p>  En plus de danser avec un tambourin lors de l'installation de Change Traking pour la base de donn√©es pour moi, l'inconv√©nient est l'impossibilit√© d'utiliser les vues.  Donc je dois toujours utiliser HighWaterMarkChangeDetectionPolicy </p><br><h3 id="poisk-po-dannym">  Recherche de donn√©es </h3><br><p>  Par d√©faut, la recherche Azure utilise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une syntaxe de requ√™te simple</a> .  Cela peut ne pas para√Ætre surprenant, mais c'est assez simple: </p><br><p>  <strong>wifi + luxe</strong> recherche les mots wifi et luxe en m√™me temps <br>  <strong>"h√¥tel de luxe"</strong> cherche la phrase <br>  <strong>wifi |</strong>  <strong>le luxe</strong> recherche le mot wifi ou le mot luxe <br>  <strong>wifi ‚Äìluxury</strong> recherche les textes avec le mot wifi mais sans le mot luxe <br>  <strong>lux</strong> recherche des mots commen√ßant par lux </p><br><p>  Il est possible de combiner des r√®gles de recherche √† l'aide de parenth√®ses.  Par exemple, la r√®gle <strong>motel + (wifi | luxe)</strong> recherche le mot motel et le mot wifi ou le mot luxe </p><br><p>  C'est bien qu'Azure Search puisse utiliser la syntaxe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lucene</a> .  Pour l'utiliser, il est n√©cessaire d'ajouter <strong>queryType = full √† la requ√™te de</strong> recherche </p><br><p>  La diff√©rence entre Azure et la syntaxe Lucene classique ne r√©side qu'en l'absence de plage. </p><br><p>  Ainsi, dans Azure Search, vous ne pouvez pas: <code>mod_date:[20020101 TO 20030101]</code> </p><br><p>  Mais dans Azure Search, vous pouvez utiliser $ filter avec la syntaxe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ODATA</a> .  Voici un exemple de filtre: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Scott"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"filter"</span></span>: <span class="hljs-string"><span class="hljs-string">"(age ge 25 and and lt 50) or surname eq 'Guthrie'"</span></span> }</code> </pre> <br><p>  Les filtres peuvent √©galement √™tre utilis√©s avec une syntaxe de requ√™te simple. </p><br><p>  Dans Lucene, la logique ¬´ou¬ª est impl√©ment√©e en utilisant <strong>OR</strong> ou <strong>||</strong> <br>  Les deux valeurs peuvent √™tre trouv√©es en sp√©cifiant l'instruction ¬´and¬ª avec: <strong>AND</strong> , <strong>&amp;&amp;</strong> or <strong>+</strong> <br>  Pour "non", vous pouvez utiliser l'une des <strong>options</strong> suivantes: <strong>NON,!</strong>  ou <strong>-</strong> </p><br><p>  L'instruction ¬´not¬ª a une caract√©ristique commune √† la fois √† la syntaxe simple et √† Lucene.  Son comportement d√©pend du mode de recherche, qui peut √™tre d√©fini √† la fois dans <strong>searchMode = all</strong> et dans <strong>searchMode = any</strong> (cette valeur est utilis√©e par d√©faut).  Dans n'importe quel mode, la recherche de wifi-luxe trouvera des documents avec le mot wifi ou des documents sans le mot luxe.  Dans le mode tout, par la m√™me demande, il trouvera des quais avec le mot wifi et simultan√©ment sans le mot luxe. </p><br><p>  Voyons quelques fonctionnalit√©s int√©ressantes de Lucene. </p><br><p>  <strong>La recherche floue</strong> vous permet de rechercher des mots qui diff√®rent de la recherche par une ou plusieurs lettres.  Autrement dit, il aide √† faire face aux fautes de frappe.  Par exemple, une recherche de "blue ~" ou "blue ~ 1" vous renverra avec "blue" et "blues" et m√™me "glue".  Mais en m√™me temps, une recherche de "business ~ analyst" signifie business ou analyst <br>  <strong>La proximit√©</strong> vous permet de rechercher des mots √† proximit√©.  Par exemple, "hotel airport" ~ 5 trouvera les mots "hotel" et "airport" qui sont situ√©s dans le texte √† 5 mots l'un de l'autre. <br>  <strong>L'amplification des termes vous</strong> permet de d√©finir la priorit√© d'un mot dans la recherche.  Exemple: "rock ^ 2 electronic" recherche les mots rock et electronic, mais les entr√©es avec le mot rock dans la recherche seront affich√©es ci-dessus. <br>  <strong>Expressions r√©guli√®res</strong> - utilisation d'expressions r√©guli√®res.  Tout ici est conforme √† la documentation officielle de Lucene regex.  Vous pouvez la retrouver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">par le lien suivant</a> .  Lors de la recherche, des expressions r√©guli√®res doivent √™tre plac√©es entre les barres obliques "/".  Par exemple, comme ceci: / [mh] otel / </p><br><p>  Si votre cha√Æne de recherche contient des caract√®res sp√©ciaux, ils doivent √™tre √©chapp√©s avec une barre oblique inverse.  Exemples de caract√®res √† √©chapper: <strong>+ - &amp;&amp; ||!</strong>  <strong>() {} [] ^ "~ *?: \ /</strong> <br>  La recherche peut √™tre effectu√©e √† l'aide d'une demande GET.  L'exemple officiel est le suivant: </p><br><pre> <code class="plaintext hljs">GET /indexes/hotels/docs?search=category:budget AND \"recently renovated\"^3&amp;searchMode=all&amp;api-version=2019-05-06&amp;querytype=full</code> </pre> <br><p>  Mais vous pouvez utiliser une requ√™te POST avec body.  Encore une fois, un exemple officiel: </p><br><pre> <code class="plaintext hljs">POST /indexes/hotels/docs/search?api-version=2019-05-06 { "search": "category:budget AND \"recently renovated\"^3", "queryType": "full", "searchMode": "all" }</code> </pre> <br><p>  Si vous utilisez une demande GET ou POST avec le type de donn√©es application / x-www-form-urlencoded, vous devez coder les caract√®res non s√©curis√©s et r√©serv√©s. </p><br><p>  Symboles  <strong>/?: @ = &amp;</strong> sont r√©serv√©s <br>  Les caract√®res <strong>`` &lt;&gt; #% {} | \ ^ ~ [] ne</strong> sont pas s√ªrs. <br>  Par exemple, le symbole # deviendra% 23 et le symbole?  devient% 3F </p><br><h3 id="para-ssylok-dlya-razrabotchikov">  Quelques liens pour les d√©veloppeurs. </h3><br><p>  Si .NET est un d√©veloppeur, vous pouvez utiliser le package <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Microsoft.Azure.Search</a> NuGet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">.</a> De plus, il existe des exemples dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">NodeJS</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Java</a> . </p><br><p>  Un exemple d'une application simple sur .NET Core que vous pouvez trouver ici <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ASP.NET Core Azure search sample</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454820/">https://habr.com/ru/post/fr454820/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454806/index.html">Formation Cisco 200-125 CCNA v3.0. Jour 9. Le monde physique des interrupteurs. Partie 1</a></li>
<li><a href="../fr454808/index.html">√Ä propos des vaisseaux spatiaux et de l'espace. Comment cr√©er une fonctionnalit√© en modifiant tout le produit en cours de route</a></li>
<li><a href="../fr454810/index.html">De l'air frais sur Mars: pliez une mol√©cule de CO2 et obtenez de l'oxyg√®ne</a></li>
<li><a href="../fr454816/index.html">Configuration de l'ensemble php-fpm + nginx sous WSL</a></li>
<li><a href="../fr454818/index.html">Rekko Challenge - comment prendre la 2e place au concours pour la cr√©ation de syst√®mes de recommandation</a></li>
<li><a href="../fr454824/index.html">L'amplificateur op√©rationnel le plus simple sur des √©l√©ments discrets</a></li>
<li><a href="../fr454826/index.html">R√©duisez les sauvegardes de 99,5% avec le hachage</a></li>
<li><a href="../fr454828/index.html">Cr√©ation d'une image en mosa√Øque</a></li>
<li><a href="../fr454830/index.html">3 qualit√©s cl√©s pour un chef de produit r√©ussi: Alexander Belyaev</a></li>
<li><a href="../fr454832/index.html">Pourquoi une semaine de travail de quatre jours est une mauvaise histoire</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>