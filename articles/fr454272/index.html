<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥈 🐛 👋🏼 Toute la vérité sur RTOS. Article # 27. Heure système 👩🏿‍🚒 👨🏽‍🍳 🧑🏿‍🤝‍🧑🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Le concept de temps dans le contexte de RTOS a été introduit dans l'un des articles précédents , ainsi que l'idée de fonctions liées au temps disponib...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Toute la vérité sur RTOS. Article # 27. Heure système</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454272/">  Le concept de temps dans le contexte de RTOS a été introduit dans l'un des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">articles précédents</a> , ainsi que l'idée de fonctions liées au temps disponibles dans RTOS. <br><br><img src="https://habrastorage.org/webt/u0/4z/bl/u04zbllomewnuxhei-ydrxmaeew.jpeg"><br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Articles précédents de la série:</b> <div class="spoiler_text"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 26.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Canaux: services auxiliaires et structures de données</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 25.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Canaux de données: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 24.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Files d'attente: services auxiliaires et structures de données</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 23.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Files d'attente: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 22.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Boîtes aux lettres: services auxiliaires et structures de données</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 21.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Boîtes aux lettres: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 20.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sémaphores: services auxiliaires et structures de données</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 19.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sémaphores: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 18.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Groupes d'indicateurs d'événements: services d'assistance et structures de données</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 17.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Groupes de drapeaux d'événements: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 16.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Signaux</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 15.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partitions de mémoire: services et structures de données</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 14.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sections de mémoire: introduction et services de base</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 13.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Structures de données de tâche et appels d'API non pris en charge</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 12.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Services pour travailler avec des tâches</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 11.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tâches: configuration et introduction à l'API</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 10.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scheduler: fonctionnalités avancées et préservation du contexte</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 9.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Scheduler: implémentation</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 8.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nucleus SE: conception interne et déploiement</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 7.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nucleus SE: Introduction</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 6.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Autres services RTOS</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 5.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Interaction et synchronisation des tâches</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 4.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tâches, changement de contexte et interruptions</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 3.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tâches et planification</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 2.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTOS: Structure et mode temps réel</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><br></a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Article # 1.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">RTOS: introduction.</a> <br></div></div><br><h3>  Timer timer </h3><br>  Toutes les fonctions liées au temps sont contrôlées par une horloge matérielle.  Il s'agit d'un oscillateur simple qui génère des requêtes d'interruption à intervalles réguliers.  Pour que les numéros d'horloge aient un sens pour les programmes d'application, la fréquence du générateur doit être connue. <br><br><h3>  Gestion des interruptions de minuterie </h3><br>  Les interruptions générées par le temporisateur matériel doivent être traitées d'une certaine manière dans le gestionnaire d'interruptions (Routine de service d'interruption, ISR), qui implémente toutes les fonctions RTOS temporelles.  Les détails du gestionnaire d'interruption du temporisateur dans Nucleus SE seront abordés dans l'un des articles suivants. <br><br><h3>  Fonctions liées au temps </h3><br>  Nucleus RTOS et Nucleus SE contiennent plusieurs mécanismes liés au temps: <br><br><ul><li>  <b>Horloge de pointage système (horloge de pointage)</b> : compteur simple incrémenté à l'aide d'un gestionnaire d'interruption de minuterie.  Nucleus RTOS et Nucleus SE ont un compteur 32 bits et les tâches ont des mécanismes pour lire et écrire sa valeur.  Dans Nucleus SE, une horloge est facultative. </li><li>  Temporisateurs d' <b>application</b> : Nucleus RTOS et Nucleus SE prennent en charge les objets temporisateur.  Leur utilisation et leur implémentation dans Nucleus SE seront discutées plus en détail dans le prochain article. </li><li>  <b>Planification des tranches de temps</b> : dans Nucleus RTOS, les tâches ayant la même priorité sont exécutées à l'aide de l'algorithme Round-robin, mais vous pouvez également utiliser la tranche de temps.  Dans Nucleus SE, un planificateur de découpage temporel est facultatif;  cela a été discuté en détail dans les articles précédents (une <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vue générale de l'ordonnanceur TS (tranche de temps)</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">TS dans Nucleus SE</a> ). </li><li>  <b>Suspendre une tâche (sommeil de tâche)</b> : une tâche peut se suspendre («s'endormir») pendant une période de temps fixe.  Ce mécanisme a déjà été décrit en détail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">précédemment</a> . </li><li>  <b>Délais d'expiration des appels API</b> : dans Nucleus RTOS et Nucleus SE, certains appels API vous permettent de suspendre une tâche en attendant qu'une ressource soit disponible.  La pause peut être indéfinie ou, dans le cas de Nucleus RTOS, un délai d'expiration facultatif (période d'attente) peut être indiqué.  Nucleus SE ne prend pas en charge les délais d'expiration des appels d'API. </li></ul><br><h3>  Précision </h3><br>  Et maintenant, il vaut la peine de parler brièvement de la précision de la minuterie du système. <br><br>  La précision des fonctions temporelles dépend directement de la fréquence du générateur d'horloge.  Par exemple, si des impulsions arrivent toutes les 10 millisecondes et que la tâche d'application a besoin d'un délai de 100 millisecondes, elle a évidemment besoin de 10 impulsions.  Cependant, on ne sait pas quand l'impulsion précédente a été reçue: elle aurait pu se produire il y a juste ou presque 10 millisecondes.  Par conséquent, un délai de 100 millisecondes peut prendre jusqu'à 110 millisecondes. <br><br>  Une façon évidente de résoudre ce problème est d'augmenter la fréquence du générateur.  Si les impulsions suivent à des intervalles de 1 milliseconde, un délai de 100 millisecondes ne prendra jamais plus de cent et une millisecondes.  L'inconvénient de cette solution est que le gestionnaire d'interruption du minuteur prendra 10 fois plus de temps processeur, ce qui sera excessif.  Le concepteur du système doit trouver un équilibre entre la précision nécessaire du temporisateur et la puissance disponible du processeur. <br><br><h2>  Réglage de l'heure système </h2><br>  Comme pour la plupart des objets Nucleus SE, les paramètres d'heure du système sont pour la plupart contrôlés par les directives <b>#define</b> du fichier <b>nuse_config.h</b> .  Le paramètre principal est <b>NUSE_SYSTEM_TIME_SUPPORT</b> , qui active le mécanisme de prise en charge de l'heure système.  Vous n'avez pas besoin de spécifier le nombre d'objets: l'heure système est activée ou non. <br><br>  Le choix d'une valeur non nulle est le principal activateur de l'heure système.  Ce paramètre est utilisé lors de la définition des structures de données, qui seront décrites en détail plus loin dans cet article.  De plus, une valeur différente de zéro active les paramètres de l'API. <br><br><h3>  Activation de l'API </h3><br>  Chaque fonction API (appel d'utilitaire) dans Nucleus SE a une directive d'activation #define dans le fichier nuse_config.h.  Pour l'heure système, ces symboles sont: <br>  <b>NUSE_CLOCK_SET</b> <br>  <b>NUSE_CLOCK_RETRIEVE</b> <br><br>  Par défaut, ils sont définis sur <b>FALSE</b> , donc tous les appels de service sont désactivés, bloquant l'inclusion de code qui les implémente.  Pour configurer l'heure système dans l'application, vous devez sélectionner les appels de service API nécessaires et les définir sur <b>VRAI</b> . <br><br>  Voici un extrait de code du fichier nuse_config.h par défaut. <br><br><pre><code class="plaintext hljs">#define NUSE_SYSTEM_TIME_SUPPORT FALSE /*    */ #define NUSE_CLOCK_SET FALSE /*   */ #define NUSE_CLOCK_RETRIEVE FALSE /*    */</code> </pre> <br>  Si vous essayez d'utiliser l'appel de service API d'heure système lorsque l'activateur d'heure système est désactivé, une erreur de compilation se produit.  Si votre code utilise un appel d'API qui n'a pas été activé, une erreur de mise en page se produira car le code d'implémentation n'a pas été inclus dans l'application. <br><br><h2>  Appels de l'utilitaire d'heure système </h2><br>  Nucleus RTOS prend en charge deux appels d'utilitaires liés à l'heure système et offrant les fonctionnalités suivantes: <br><br><ul><li>  Réglage de la valeur de l'heure système.  Nucleus SE est implémenté dans la fonction <b>NUSE_Clock_Set ()</b> . </li><li>  Obtenir la valeur de l'heure du système.  Nucleus SE est implémenté dans la fonction <b>NUSE_Clock_Retrieve ()</b> . </li></ul><br>  Considérez la mise en œuvre de chacun de ces appels plus en détail. <br><br><h2>  Appels de service pour régler et obtenir l'heure du système </h2><br>  Avec l'heure système, vous ne pouvez effectuer que des opérations de réglage sur une valeur donnée et d'obtention de la valeur actuelle.  Nucleus RTOS et Nucleus SE fournissent deux appels d'API de base pour implémenter ces opérations. <br><br>  L'interprétation de la valeur de temps système dépend de l'application, car il s'agit essentiellement d'un compteur du nombre de "cycles d'horloge" qui se sont produits depuis la dernière réinitialisation du compteur.  Pour utiliser ces informations, la fréquence du générateur doit être connue. <br><br><h3>  Réglage de l'heure </h3><br>  Toute tâche peut définir l'heure système en appelant cette fonction API. <br><br>  <b><i>Appel pour définir l'heure système dans Nucleus RTOS</i></b> <br><br>  Prototype d'appel de service: <br>  <b>VOID NU_Set_Clock (UNSIGNED new_value);</b> <br><br>  Paramètres: <br>  <b>new_value</b> - valeur à affecter à l'heure système <br><br>  Valeur de retour: aucune. <br><br>  <b><i>Appel pour définir l'heure du système dans Nucleus SE</i></b> <br>  Cet appel d'API prend en charge la fonctionnalité principale de l'API Nucleus RTOS. <br><br>  Prototype d'appel de service: <br>  <b>void NUSE_Clock_Set (U32 new_value);</b> <br><br>  Paramètres: <br>  <b>new_value</b> - valeur à affecter à l'heure système <br><br>  Valeur de retour: aucune <br><br>  <b><i>Implémentation de la mise à l'heure dans Nucleus SE</i></b> <br>  Le code est très simple.  La valeur fournie est écrite dans <b>NUSE_Tick_Clock</b> dans la section critique. <br><br><h3>  Obtenir l'heure du système </h3><br>  Une tâche peut obtenir la valeur d'heure système à l'aide de cette fonction API. <br><br>  <b><i>Appel pour obtenir l'heure système dans Nucleus RTOS</i></b> <br><br>  Prototype d'appel de service: <br>  <b>UNSIGNED NU_Retrieve_Clock (VOID);</b> <br><br>  Paramètres: aucun <br><br>  Valeur de retour: valeur actuelle de l'heure système <br><br>  <b><i>Appel pour obtenir l'heure système dans Nucleus SE</i></b> <br>  Prototype d'appel de service: <br>  <b>U32 NUSE_Clock_Retrieve (void);</b> <br><br>  Paramètres: aucun <br><br>  Valeur de retour: valeur actuelle de l'heure système <br><br>  <b><i>Implémentation de l'acquisition de temps dans Nucleus SE</i></b> <br>  Le code est très simple.  La fonction renvoie la valeur <b>NUSE_Tick_Clock</b> obtenue dans la section critique. <br><br><h2>  Structures de données </h2><br>  L'heure système utilise une structure de données (située dans la RAM), qui est un mot de 32 bits. <br><br>  Je recommande fortement que le code d'application n'utilise pas un accès direct à cette structure de données, mais y accède via les fonctions API fournies.  Cela évitera l'incompatibilité avec les futures versions de Nucleus SE et les effets secondaires indésirables, ainsi que simplifiera le portage des applications vers Nucleus RTOS.  Les détails des structures de données sont fournis ci-dessous pour simplifier la compréhension du code d'appel de service et du débogage. <br><br><h3>  Données RAM </h3><br>  Structure des données: <br>  <b>NUSE_Tick_Clock</b> - une variable de type <b>U32</b> , qui stocke le compteur d'horloge de l'heure système. <br><br>  Cette structure de données est initialisée à zéro par la fonction <b>NUSE_Init_Task () au</b> démarrage de Nucleus SE.  L'un des articles suivants contiendra une description complète des procédures de démarrage de Nucleus SE. <br><br><h3>  Données ROM </h3><br>  Il n'y a aucune structure de données associée à l'heure système dans la ROM. <br><br><h3>  La quantité de mémoire pour l'heure système </h3><br>  Comme tous les autres objets Nucleus SE, la quantité de mémoire requise pour le temps système est prévisible. <br><br>  La quantité de mémoire dans la ROM est 0. <br><br>  La quantité de mémoire en RAM (en octets) est toujours de 4. <br><br><h2>  Appels d'API non réalisés </h2><br>  Tous les appels de service de l'API Nucleus RTOS au niveau du système ont un équivalent dans Nucleus SE. <br><br><h3>  Compatible avec Nucleus PLUS </h3><br>  Comme pour tous les autres objets Nucleus SE, mon objectif était de m'assurer que le code d'application est aussi compatible que possible avec Nucleus RTOS.  L'heure système ne fait pas exception et, du point de vue de l'utilisateur, elle est implémentée de la même manière que dans Nucleus RTOS.  Les appels d'API Nucleus RTOS peuvent être directement portés vers Nucleus SE. <br><br>  Dans l'article suivant, nous examinerons les minuteries logicielles. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr454272/">https://habr.com/ru/post/fr454272/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr454256/index.html">Quel est le problème avec notre informatique</a></li>
<li><a href="../fr454260/index.html">Journée des enfants Bad Code</a></li>
<li><a href="../fr454262/index.html">Pourquoi chaque Data Scientist devrait connaître Dask</a></li>
<li><a href="../fr454264/index.html">4 chaînes Youtube sensibles sur les interviews techniques</a></li>
<li><a href="../fr454266/index.html">Dell et Alienware au Computex 2019: parler des principales innovations</a></li>
<li><a href="../fr454274/index.html">Lumière, caméra ... nuage: comment les nuages ​​changent l'industrie du cinéma</a></li>
<li><a href="../fr454278/index.html">La cyberassurance sur le marché russe</a></li>
<li><a href="../fr454280/index.html">Développement à distance dans VS Code: votre vie ne sera plus jamais la même</a></li>
<li><a href="../fr454284/index.html">Désolé, je ne viendrai pas travailler parce que c'est l'hiver</a></li>
<li><a href="../fr454290/index.html">Principe de responsabilité unique. Pas aussi simple qu'il y paraît</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>