<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤹🏾 🌂 💍 PWA es fácil. Hola habr 💮 🚶 👖</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuando con nuestro conocimiento de las aplicaciones web progresivas. Después de la última parte teórica , es hora de pasar a la práctica. 

 Hoy ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PWA es fácil. Hola habr</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419585/">  Continuando con nuestro conocimiento de las aplicaciones web progresivas.  Después de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">última parte</a> teórica <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">,</a> es hora de pasar a la práctica. <br><br>  Hoy construiremos un PWA simple pero completo "Hello Habr". <br><br><img src="https://habrastorage.org/webt/b-/vw/4c/b-vw4cqjk2hjktpz8dxrwsbgkpy.jpeg"><br><br><br>  La aplicación está disponible en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://altrusl.github.io/habr-pwa/hello-habr/</a> .  Cuando se abre en un navegador en un dispositivo móvil, es posible agregar un acceso directo a la pantalla de inicio y comenzar en modo de pantalla completa. <br><a name="habracut"></a><br>  Si alguien quiere probar el ejemplo en cuestión en su computadora, Chrome le permite trabajar localmente con aplicaciones PWA simples sin instalar servidores web de terceros con certificados SSL. <br><div class="spoiler">  <b class="spoiler_title">Instrucciones para ejecutar "Hello Habr" localmente</b> <div class="spoiler_text">  Debe instalar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">esta</a> o una extensión similar desde Chrome Web Store, que es el servidor web local.  Sin soporte PHP, por supuesto. <br><br><img src="https://habrastorage.org/webt/7r/se/s-/7rses-k9ak4df9plysilwhlpxxe.jpeg"><br><br>  Los archivos Hello Habr se pueden tomar de GitHub-a - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://github.com/altrusl/habr-pwa/tree/master/hello-habr</a> <br><br>  Ponga todo en un directorio y apúntelo al servidor web. <br></div></div><br><br>  "Hola Habr" consta de una página.  Él muestra en ella una imagen (logotipo) y una inscripción animada. <br><br><div class="spoiler">  <b class="spoiler_title">Código "Hola Habr"</b> <div class="spoiler_text"><h4>  index.html </h4><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Hello Habr<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hh.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hh.css"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'serviceWorker'</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">in</span></span></span><span class="javascript"> navigator) { navigator.serviceWorker.register(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'/sw.js'</span></span></span><span class="javascript">) .then(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">registration</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Registration successful, scope is:'</span></span></span><span class="javascript">, registration.scope); }) .catch(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">error</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'Service worker registration failed, error:'</span></span></span><span class="javascript">, error); }); } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h4>  hh.css </h4><br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">font-face</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Zaplyv-Heavy; <span class="hljs-attribute"><span class="hljs-attribute">src</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(Zaplyv-Heavy.otf); } <span class="hljs-selector-tag"><span class="hljs-selector-tag">body</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: flex; <span class="hljs-attribute"><span class="hljs-attribute">align-items</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">align-content</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">justify-content</span></span>: center; <span class="hljs-attribute"><span class="hljs-attribute">overflow</span></span>: auto; } <span class="hljs-selector-class"><span class="hljs-selector-class">.center</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: Zaplyv-Heavy; <span class="hljs-attribute"><span class="hljs-attribute">font-size</span></span>: <span class="hljs-number"><span class="hljs-number">8vmax</span></span>; } <span class="hljs-selector-id"><span class="hljs-selector-id">#logo</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-image</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(logo.jpg); <span class="hljs-attribute"><span class="hljs-attribute">background-size</span></span>: <span class="hljs-number"><span class="hljs-number">100%</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">100px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">top</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">right</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">margin</span></span>: <span class="hljs-number"><span class="hljs-number">10px</span></span>; }</code> </pre> <br><h4>  hh.js </h4><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.onload = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ fetch(<span class="hljs-string"><span class="hljs-string">"hh.txt?mode=nocache"</span></span>).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> data.text()).then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function"> =&gt;</span></span> { animateText(data) }); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">animateText</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ele = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"text"</span></span>), txt = data.split(<span class="hljs-string"><span class="hljs-string">""</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> interval = setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!txt[<span class="hljs-number"><span class="hljs-number">0</span></span>]){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> clearInterval(interval); }; ele.innerHTML += txt.shift(); }, <span class="hljs-number"><span class="hljs-number">150</span></span>); }</code> </pre> <br><h4>  hh.txt </h4><br><pre> <code class="java hljs">Hello Hubr</code> </pre> <br></div></div><br>  La fuente personalizada también está presente.  Total: el conjunto completo mínimo de recursos de un sitio web promedio.  Si abre index.html en un navegador, se muestran una imagen y una inscripción.  La inscripción se carga mediante javascript a través de la búsqueda desde el archivo hh.txt, el modelo más simple de una aplicación PWA general. <br><br>  Si abre sin sw.js, este será un sitio web normal.  Agregue Service Worker a nuestros archivos. <br><br><div class="spoiler">  <b class="spoiler_title">sw.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Caches var CURRENT_CACHES = { font: 'font-cache-v1', css:'css-cache-v1', js:'js-cache-v1', site: 'site-cache-v1', image: 'image-cache-v1' }; self.addEventListener('install', (event) =&gt; { self.skipWaiting(); console.log('Service Worker has been installed'); }); self.addEventListener('activate', (event) =&gt; { var expectedCacheNames = Object.keys(CURRENT_CACHES).map(function(key) { return CURRENT_CACHES[key]; }); // Delete out of date caches event.waitUntil( caches.keys().then(function(cacheNames) { return Promise.all( cacheNames.map(function(cacheName) { if (expectedCacheNames.indexOf(cacheName) == -1) { console.log('Deleting out of date cache:', cacheName); return caches.delete(cacheName); } }) ); }) ); console.log('Service Worker has been activated'); }); self.addEventListener('fetch', function(event) { console.log('Fetching:', event.request.url); event.respondWith(async function() { const cachedResponse = await caches.match(event.request); if (cachedResponse) { console.log("\tCached version found: " + event.request.url); return cachedResponse; } else { console.log("\tGetting from the Internet:" + event.request.url); return await fetchAndCache(event.request); } }()); }); function fetchAndCache(request) { return fetch(request) .then(function(response) { // Check if we received a valid response if (!response.ok) { return response; // throw Error(response.statusText); } var url = new URL(request.url); if (response.status &lt; 400 &amp;&amp; response.type === 'basic' &amp;&amp; url.search.indexOf("mode=nocache") == -1 ) { var cur_cache; if (response.headers.get('content-type') &amp;&amp; response.headers.get('content-type').indexOf("application/javascript") &gt;= 0) { cur_cache = CURRENT_CACHES.js; } else if (response.headers.get('content-type') &amp;&amp; response.headers.get('content-type').indexOf("text/css") &gt;= 0) { cur_cache = CURRENT_CACHES.css; } else if (response.headers.get('content-type') &amp;&amp; response.headers.get('content-type').indexOf("font") &gt;= 0) { cur_cache = CURRENT_CACHES.font; } else if (response.headers.get('content-type') &amp;&amp; response.headers.get('content-type').indexOf("image") &gt;= 0) { cur_cache = CURRENT_CACHES.image; } else if (response.headers.get('content-type') &amp;&amp; response.headers.get('content-type').indexOf("text") &gt;= 0) { cur_cache = CURRENT_CACHES.site; } if (cur_cache) { console.log('\tCaching the response to', request.url); return caches.open(cur_cache).then(function(cache) { cache.put(request, response.clone()); return response; }); } } return response; }) .catch(function(error) { console.log('Request failed for: ' + request.url, error); throw error; }); }</span></span></code> </pre> <br></div></div><br>  Como puede ver, creamos cinco cachés para cada tipo de recurso.  La caché del sitio es para archivos html.  Todos los recursos se almacenan en caché, con la excepción de aquellos que tienen "mode = nocache" en la consulta GET, y esta es nuestra solicitud para el archivo hh.txt con una línea para la inscripción. <br><blockquote>  A veces puede ver que el recurso se toma de la memoria caché del disco.  Este es un problema común al desarrollar aplicaciones con Service Worker, por lo que es mejor deshabilitar el caché de disco (caché del navegador).  Y no en mi navegador, sino en el servidor, por ejemplo, en <div class="spoiler">  <b class="spoiler_title">.htaccess</b> <div class="spoiler_text"><pre> <code class="xml hljs"># Cache-Control Headers <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ifModule</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mod_headers.c</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FilesMatch</span></span></span><span class="hljs-tag"> (\</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">.css</span></span></span><span class="hljs-tag">|\</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">.js</span></span></span><span class="hljs-tag">|</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">sprites</span></span></span><span class="hljs-tag">\</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">.png</span></span></span><span class="hljs-tag">)$&gt;</span></span> Header unset ETag Header unset Expires Header set Cache-Control "no-cache" <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">FilesMatch</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">IfModule</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div></blockquote><br>  La lógica detrás de sw.js es simple: "Caché recurriendo a la red".  Primero, el recurso solicitado se verifica en la memoria caché; si está allí, se toma y se devuelve al navegador desde allí.  Si no, se obtiene de la red, se devuelve al navegador y se almacena en caché una copia del recurso. <br><br>  Después de la primera apertura de la página index.html en la consola de Chrom-a, los registros sobre la instalación y activación del Service Worker son visibles.  Después de la segunda apertura, nuestras cachés se crean en el almacenamiento y nuestros recursos se colocan en ellas.  También se ve que durante las aperturas posteriores, solo las solicitudes de hh.txt van al servidor web, todos los demás recursos se toman del Service Worker-a. <br><br><div class="spoiler">  <b class="spoiler_title">Captura de pantalla</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/kd/qp/tz/kdqptzafmxk0tx7xrnauezddwww.jpeg"><br></div></div><br>  Index.html, hh.css, hh.js, hh.otf, logo.jpg almacenados localmente: este es el shell de la aplicación, un shell de recursos y datos estáticos, que actúa como un shell de programa en el cliente.  Toda la información dinámica necesaria para que el sitio funcione se obtiene mediante solicitudes de JavaScript al servidor y la visualización de los datos recibidos en la aplicación shell-e.  En nuestro caso, esta es una solicitud de text.txt. <br><br>  Para ser llamado PWA completamente funcional, "Hello Habr" carece de una cosa: los íconos en la pantalla de inicio de los teléfonos inteligentes y se inician en modo de pantalla completa. <br><br>  Para hacer esto, debe conectar el manifiesto de la aplicación en index.html: <div class="spoiler">  <b class="spoiler_title">manifest.json</b> <div class="spoiler_text"><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"short_name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hello Habr"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hello Habr - PWA example"</span></span>, <span class="hljs-string"><span class="hljs-string">"icons"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"logo3.jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"192x192"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"src"</span></span>: <span class="hljs-string"><span class="hljs-string">"logo2.jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"image/jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"sizes"</span></span>: <span class="hljs-string"><span class="hljs-string">"512x512"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"start_url"</span></span>: <span class="hljs-string"><span class="hljs-string">"index.html"</span></span>, <span class="hljs-string"><span class="hljs-string">"background_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#3367D6"</span></span>, <span class="hljs-string"><span class="hljs-string">"display"</span></span>: <span class="hljs-string"><span class="hljs-string">"standalone"</span></span>, <span class="hljs-string"><span class="hljs-string">"scope"</span></span>: <span class="hljs-string"><span class="hljs-string">"/habr-pwa/hello-habr/"</span></span>, <span class="hljs-string"><span class="hljs-string">"theme_color"</span></span>: <span class="hljs-string"><span class="hljs-string">"#3367D6"</span></span> }</code> </pre> <br>  Está conectado en index.html: <pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"manifest"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"manifest.json"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></div></div><br>  Después de eso, los navegadores móviles (cada uno a su manera) ofrecerán crear un acceso directo para la aplicación en la pantalla de inicio.  Cuando se inicia mediante un acceso directo, la aplicación se abrirá en modo <i>independiente</i> , sin controles del navegador.  Hay más detalles sobre las opciones de manifiesto en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Google Developers</a> . <br><br>  La aplicación Hello Habr posee mínimamente todas las características de PWA y lo es esencialmente.  Como puede ver, para transferir un sitio simple a PWA, solo necesita conectar el manifiesto y el archivo de Service Worker.  Usado por sw.js es bastante universal. <br><br>  La próxima vez transferiremos el sitio terminado a PWA a CMS Joomla (el sitio está "listo para usar" con los datos de demostración iniciales).  Además, sw.js permanecerá casi igual. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es419585/">https://habr.com/ru/post/es419585/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es419575/index.html">Siguiendo el requisito de indicar la velocidad exacta de conexión, los proveedores del Reino Unido redujeron los números de publicidad en un promedio del 41%</a></li>
<li><a href="../es419577/index.html">Diseño de cosas familiares: cómo mejorar la interfaz en el ejemplo de YouTube</a></li>
<li><a href="../es419579/index.html">Implementación del operador in en C ++</a></li>
<li><a href="../es419581/index.html">¿Qué proyectos sin fines de lucro son interesantes para Y Combinator?</a></li>
<li><a href="../es419583/index.html">Cómo Rusia se perdió el apogeo del DVD, pero alcanzó a Occidente con la llegada de Internet de banda ancha</a></li>
<li><a href="../es419587/index.html">Competiciones que cambian el mundo. 1567-2035</a></li>
<li><a href="../es419589/index.html">Usamos AMP como una biblioteca de uso general para crear sitios dinámicos rápidos</a></li>
<li><a href="../es419591/index.html">Cómo hacer correos electrónicos y no desordenar: consejos prácticos</a></li>
<li><a href="../es419593/index.html">Gafas daltónicas: cómo funciona y cuáles son las dificultades de selección</a></li>
<li><a href="../es419599/index.html">Java REST en la Escuela de Programadores HeadHunter</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>