<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©‚Äç‚öïÔ∏è üôåüèæ üî• Placa STM32 barata + Arduino IDE UPD 17/08/2017 ‚óºÔ∏è üëó üé°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="¬øQuieres actualizar tus proyectos Arduino? Haga que funcionen m√°s r√°pido, haga mediciones y ajustes m√°s precisos y agregue errores (son inevitables co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Placa STM32 barata + Arduino IDE UPD 17/08/2017</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/395577/"><img src="https://habrastorage.org/files/c77/812/08e/c7781208e99a4b5ba071204b56d89691.jpg" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
¬øQuieres actualizar tus proyectos Arduino? </font><font style="vertical-align: inherit;">Haga que funcionen m√°s r√°pido, haga mediciones y ajustes m√°s precisos y agregue errores (son inevitables con los nuevos dispositivos). </font><font style="vertical-align: inherit;">Entonces este art√≠culo es para ti. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El tema Arduino captura cada vez m√°s las mentes de la humanidad, pero tarde o temprano nos enfrentamos con el hecho de que nos falta algo, por ejemplo, presupuesto / tama√±os / </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pines de</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> puerto / capacidad de bits / rendimiento ... Como </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dijo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> una </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">persona sabia</font></a><font style="vertical-align: inherit;"> : "Quien quiera, busca oportunidades quien no quiere est√° buscando razones ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las buenas personas entienden esto y lentamente comienzan a adjuntar </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32 al tema arduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , porque los microcontroladores AVR de ocho bits, en los que se basan muchas placas arduino, no siempre pueden hacer frente a las tareas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un resumen de este art√≠culo en formato de video:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/878k4KqF7Xs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
De acuerdo, menos letras y m√°s cerca del tema. </font><font style="vertical-align: inherit;">En este art√≠culo, considerar√© una placa de depuraci√≥n barata, que se basa en el </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">microcontrolador STM32F103C8T6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><br>
<br>
<img src="https://habrastorage.org/files/b41/614/68c/b4161468c90142148c300aaa7e2f846e.JPG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
para empezar, comparemos los par√°metros principales de la placa STM32 y su precio an√°logo: Arduino Nano V3.0:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Frecuencia de operaci√≥n 72 MHz, versus 16 para arduino;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La cantidad de memoria Flash es de 64 Kbytes, contra 32;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM, es RAM (donde se almacenan las variables), el STM32 tiene hasta 20 Kbytes, el arduinka tiene solo 2;</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ADC r√°pido de 12 bits, mientras que las placas Arduino que usan microcontroladores AVR (generalmente es la mayor√≠a) usan 10 bits. </font><font style="vertical-align: inherit;">Esto significa que en el caso de STM32, la funci√≥n es analogRead (*); </font><font style="vertical-align: inherit;">devolver√° 0..4095 versus 0..1023, lo que en el primer caso conduce a mediciones m√°s precisas;</font></font></li>
<li>16-   ,  8-  Arduino ,  ,  <s>analogWrite(*);</s>pwmWrite(*);    0..65535,   0..255.       ,    ,     ;</li>
<li>   USB,       Arduino    2 ;</li>
<li>  ‚Äî  2  3.6(    2 AA ),  2.7...5   ;</li>
<li>     ‚Äî 1.9   1.8().</li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Obviamente, la placa de depuraci√≥n basada en STM32 supera al Arduino Nano en todos los aspectos, excepto por el precio, pero estoy de acuerdo con que 10 centavos es un buen precio para un gran rendimiento, pero sobre los perif√©ricos con los que est√° relleno el STM32, estoy completamente en silencio sobre lo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">que</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vale </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">DMA</font></a><font style="vertical-align: inherit;"> o relojes integrados en tiempo real en el microcontrolador. </font></font><br>
<br>
<img src="https://habrastorage.org/files/2d1/1b1/c4c/2d11b1c4c96342dbb0b7fe9aeedd046c.JPG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Todo esto hace que esta placa sea extremadamente atractiva en todo, excepto en una cosa: para un principiante, como yo, el tema STM32 parece demasiado lento, hay sitios enteros dedicados a la programaci√≥n de estos microcontroladores. Pero si se hace amigo de STM32 con el IDE de Arduino, entonces el umbral de entrada cae a un nivel extremadamente bajo. Aunque, como dicen, "en cada barril de miel, hay una mosca en la pomada", pero m√°s sobre eso a continuaci√≥n.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Comencemos a preparar la placa para trabajar con Arduino IDE. </font><font style="vertical-align: inherit;">Lo primero que debe hacerse es cargar un cargador de arranque especial en el microcontrolador, lo que le permitir√° actualizar la placa a trav√©s del hardware USB y directamente desde el entorno de desarrollo. </font><font style="vertical-align: inherit;">Para hacer esto, mueva el puente superior (tambi√©n conocido como "BOOT0"), a la posici√≥n "1":</font></font><br>
<br>
<img src="https://habrastorage.org/files/198/fd7/ed4/198fd7ed436d475d88bcf52498d474d6.JPG" alt="imagen"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øPara qu√© sirven los puentes BOOT0 y BOOT1?</font></font></b><div class="spoiler_text">  ,   STM32   ,     (system memory),  ,        USB to UART ,       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ST-Link V2</a>.<br>
<br>
<img src="https://habrastorage.org/files/5a4/813/115/5a48131155d249a1b97e5619c133a0af.png" alt="image"><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, necesitamos un adaptador de USB a UART. Vale la pena recordar que </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32 tiene una l√≥gica de 3.3V</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , no se garantiza la compatibilidad con 5V, por lo que se recomienda utilizar USB a UART, que tiene la capacidad de seleccionar modos de operaci√≥n con l√≥gica de 3.3 / 5V. Utilic√© un adaptador barato basado en CH340G: </font></font><br>
<br>
<img src="https://habrastorage.org/files/85c/50b/0cb/85c50b0cbdf442daa01f436e37fd4b9b.jpg" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* como puede ver, el fabricante no se dio la vuelta con un lavado de fundente, por supuesto, no afecta el trabajo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Conect√© la placa al adaptador USB a UART de la siguiente manera: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
G &lt;-&gt; GND; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5V &lt;-&gt; 5V; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PA10 &lt;-&gt; TXD; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PA9 &lt;-&gt; RXD. </font></font><br>
<br>
<img src="https://habrastorage.org/files/fa1/7c6/356/fa17c635681842d6b94add76cf4b2beb.jpg" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* PA10 / PA9 en la placa simplemente se firma como A10 / A9: estos puertos son el primer hardware USART, hay 3 de ellos en la placa, tambi√©n hay 2 I2C de hardware y 2 SPI.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En aras de la conveniencia, alimente la placa desde 5 V, para la alimentaci√≥n desde 3.3 V hay un pin "3.3" en la placa. </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atenci√≥n, 5 V pueden desactivar f√°cilmente el microcontrolador</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , as√≠ que preste la debida atenci√≥n a la conexi√≥n. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Descargue, instale y ejecute </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash Loader Demonstrator</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (disponible en el archivo del art√≠culo): </font></font><br>
<br>
<img src="https://habrastorage.org/files/124/554/93b/12455493b0334429b4f975143717ef88.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
seleccione el n√∫mero de puerto COM de nuestro adaptador, en mi caso es COM43, luego haga clic en "Siguiente": </font></font><br>
<br>
<img src="https://habrastorage.org/files/866/092/649/866092649ba24aaf9db036baa5aa29df.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ya que tengo un nuevo microcontrolador, la </font><s><font style="vertical-align: inherit;">mosca</font></s><font style="vertical-align: inherit;"> todav√≠a </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">no se sent√≥</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nadie le escribi√≥ nada (por supuesto, excepto el propio fabricante), entonces, de forma predeterminada, hay protecci√≥n contra lectura, el programa nos advierte que si hace clic en el bot√≥n "Eliminar protecci√≥n", la memoria Flash se borrar√°, es decir, si hubiera alg√∫n tipo de firmware - Ella se retirar√°. En mi caso, no hay nada √∫til all√≠, as√≠ que presiono audazmente. Luego veo lo siguiente: </font></font><br>
<br>
<img src="https://habrastorage.org/files/faf/937/62f/faf93762f79843ec8bb1989cc5ed2295.PNG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Haga clic en "Aceptar": </font></font><br>
<br>
<img src="https://habrastorage.org/files/132/4ea/aa8/1324eaaa861144bca5619c2703a49b38.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dado que mi placa de depuraci√≥n se basa en el microcontrolador STM32F103 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C8</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : hay 64 Kbytes de memoria Flash, tambi√©n hay un </font><font style="vertical-align: inherit;">microcontrolador </font><font style="vertical-align: inherit;">STM32F103 </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CB</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , donde hay el doble de Flash. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego haga clic en "Siguiente": </font></font><br>
<br>
<img src="https://habrastorage.org/files/021/79d/9e9/02179d9e9acb48fd845b79364cf3765a.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nuevamente, "Siguiente", y veremos la siguiente ventana: </font></font><br>
<br>
<img src="https://habrastorage.org/files/eb8/373/a44/eb8373a444d2489ba2ac37077ebe9093.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Seleccione "Descargar al dispositivo" y haga clic en "...":</font></font><br>
<br>
<img src="https://habrastorage.org/files/cd4/f1e/af6/cd4f1eaf6e4a4557befea62a0d5f91ee.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Cambie el tipo de archivo a * .bin y abra el archivo "generic_boot20_pc13.bin" (tambi√©n presente en el archivo) que puede tomarse del proyecto </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32duino-bootloader</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego hacemos clic en el bot√≥n "Siguiente", despu√©s del firmware del gestor de arranque veremos una luz verde: </font></font><br>
<br>
<img src="https://habrastorage.org/files/694/7e2/a39/6947e2a39b0e4dd2995145f80ec1a1b8.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
luego necesitamos descargar, para el entorno de desarrollo Arduino IDE, un </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">n√∫cleo STM32</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> especial </font><font style="vertical-align: inherit;">(tambi√©n est√° en el archivo del art√≠culo). </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hay un matiz aqu√≠, al momento de escribir, el </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kernel no funciona en versiones del entorno de desarrollo sobre 1.6.5</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , tengo 1.6.5-r5 que </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">descargu√© aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></s> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
El kernel fue probado para funcionar en </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino IDE versi√≥n 1.6.9</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A continuaci√≥n, descomprima el contenido en Mis documentos \ Arduino \ hardware:</font></font><br>
<br>
<img src="https://habrastorage.org/files/98b/ed2/7f9/98bed27f9cf3403d9518307b9d5a9b57.PNG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En mi caso, la ruta completa se ve as√≠: "C: \ Users \ RSK \ Documents \ Arduino \ hardware" </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, el sistema no podr√° identificar el dispositivo, por lo que a√∫n necesita instalar los controladores en la placa. Vamos a la carpeta "Mis documentos \ Arduino \ hardware \ Arduino_STM32 \ drivers \ win" (o "drivers \ win", en el caso de un archivo para el art√≠culo), y ejecutamos el archivo "install_drivers.bat" como administrador: </font></font><br>
<br>
<img src="https://habrastorage.org/files/99a/523/588/99a523588e134d478d0d72988d9b1e6a.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
despu√©s de eso, el puente superior (que ese "BOOT0"), col√≥quelo en la posici√≥n "0" y conecte la placa a la computadora a trav√©s de un cable microUSB: </font></font><br>
<br>
<img src="https://habrastorage.org/files/be6/c72/ff8/be6c72ff836947a382a558c1e6323a60.JPG" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
debe definirse en el administrador de dispositivos como "Maple DFU" o "Maple Serial (COM *)": </font></font><br>
<br>
<img src="https://habrastorage.org/files/97b/154/a3b/97b154a3b891400ca365af6e0c7ef922.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
no est√° claro por qu√© despu√©s de la primera conexi√≥n la placa se define de manera diferente en diferentes computadoras, pero no es el punto, procedemos a configurar el IDE de Arduino.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lanzamos el entorno de desarrollo, luego Herramientas -&gt; </font></font><br>
<br>
<img src="https://habrastorage.org/files/3c6/306/4e1/3c63064e14424feeba0dd583863de356.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tablero </font><font style="vertical-align: inherit;">-&gt; Administrador de Tableros: </font><font style="vertical-align: inherit;">Aqu√≠ debe instalar el n√∫cleo para el tablero Arduino Due. Seleccione la √∫ltima versi√≥n y haga clic en "Instalar": </font></font><br>
<br>
<img src="https://habrastorage.org/files/558/187/594/558187594cfb4bce944089a37d76d7f9.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
luego Herramientas -&gt; Placa -&gt; "STM32F103C gen√©rico", luego Variante: "STM32F103C8 (20k RAM. 64k Flash)", M√©todo de carga: "STM32duino bootloader", Puerto - n√∫mero de puerto COM de la placa , en general, todo es como en la captura de pantalla: </font></font><br>
<br>
<img src="https://habrastorage.org/files/3a3/2a2/ecd/3a32a2ecdfdf4ca2bb9164eeffa9050d.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
todo, la placa est√° lista para el firmware y la programaci√≥n en el entorno de desarrollo Arduino IDE. Cosemos un boceto de los ejemplos que est√°n "cosidos" en el n√∫cleo, vaya a Archivo -&gt; Carpeta con bocetos -&gt; hardware -&gt; Arduino_STM32 -&gt; STM32F1 -&gt; bibliotecas -&gt; A_STM32_Examples -&gt; Digital -&gt; Blink: </font></font><br>
<br>
<img src="https://habrastorage.org/files/fdb/7df/6fb/fdb7df6fb6b64ade9f6c23a031367e4b.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Classic "Hello World" en el mundo de los microcontroladores. Cambiamos PB1 a PC13, ya que el LED en el tableroconectado a este puerto:</font></font><br>
<br>
<img src="https://habrastorage.org/files/a24/e91/2d9/a24e912d93fb42869921f9c9dd985bd5.JPG" alt="imagen"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
* Por cierto, se ilumina a un nivel bajo en la pata PC13. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Presionamos el bot√≥n "Descargar", despu√©s del firmware, el entorno de desarrollo mostrar√° algo como: </font></font><br>
<br>
<img src="https://habrastorage.org/files/ae6/07b/674/ae607b6742f744088bd27b5388dbf31b.png" alt="imagen"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
"¬°Listo! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Restablecimiento del USB para volver al modo de tiempo de ejecuci√≥n. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Error al restablecer despu√©s de la descarga: usb_reset: no se pudo restablecer el dispositivo, error al ganar: no se puede encontrar el archivo especificado ". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero el firmware se carg√≥ con √©xito, aunque no siempre es as√≠, a veces el IDE de Arduino da otros mensajes.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No se pudo encontrar el dispositivo DFU</font></font></b><div class="spoiler_text"> ,  :<br>
<br>
<img src="https://habrastorage.org/files/2f7/9b6/3c3/2f79b63c37dd44f6804f39c83d8ca14c.png" alt="image"><br>
<br>
¬´dfu-util ‚Äî ¬© 2007-2008 by OpenMoko Inc.<br>
Couldn't find the DFU device: [1EAF:0003]<br>
This program is Free Software and has ABSOLUTELY NO WARRANTY¬ª<br>
<br>
 ,     .<br>
</div></div><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buscando el dispositivo DFU [1EAF: 0003] ...</font></font></b><div class="spoiler_text">   :<br>
<br>
<img src="https://habrastorage.org/files/b2f/a3e/a09/b2fa3ea09c004c8caf3175f1053e9d39.png" alt="image"><br>
<br>
¬´Searching for DFU device [1EAF:0003]‚Ä¶<br>
Assuming the board is in perpetual bootloader mode and continuing to attempt dfu programming...¬ª<br>
<br>
    ,         .      Arduino Pro Mini.<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y ahora, sobre la "mosca en la pomada", sobre la cual escrib√≠ al principio del art√≠culo, por alguna raz√≥n no siempre es posible mostrar la pizarra en el entorno de desarrollo, a√∫n m√°s, no siempre est√° determinada por la computadora. </font><font style="vertical-align: inherit;">Decid√≠ esto por m√≠ mismo de la siguiente manera, antes de descargar el firmware (antes de hacer clic en el bot√≥n "Descargar"), hago clic en "Restablecer" en la placa, y despu√©s del firmware, reinicio la placa nuevamente. </font><font style="vertical-align: inherit;">En este caso, el porcentaje de probabilidad de coser el tablero es del 99%. </font><font style="vertical-align: inherit;">No est√° claro por qu√© funciona de esa manera, pero es un hecho. </font><font style="vertical-align: inherit;">Creo que tarde o temprano esta jamba se corregir√° y todo se reiniciar√° autom√°ticamente seg√∫n sea necesario. </font><font style="vertical-align: inherit;">Y para solucionar esto m√°s r√°pido, es necesario que la comunidad de esta maravillosa placa de depuraci√≥n STM32 crezca, as√≠ que comparta este art√≠culo con amigos, especialmente amigos programadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sobre el pinout:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clickable</font></font></b><div class="spoiler_text">    ,    (   ):<br>
<br>
<a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/4b0/def/711/4b0def711af2f6fc049dcb9c2c6c759e.png" alt="image"></a><br>
() <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.stm32duino.com/viewtopic.php?p=11137</a><br>
<br>
      , : <br>
<br>
<i>digitalWrite(PB0, LOW); <br>
<s>analogWrite(PA8, 65535);</s>pwmWrite(PA8, 65535); <br>
analogRead(PA0); <br>
LiquidCrystal lcd(PB0, PA7, PA6, PA5, PA4, PA3);</i><br>
<br>
     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">docs.leaflabs.com/docs.leaflabs.com/index.html</a>          Arduino IDE,    .<br>
<br>
    ,     :<br>
<i>Documents\Arduino\hardware\Arduino_STM32\STM32F1\variants\generic_stm32f103c\board.cpp</i><br>
<br>
   ,  :<br>
<ul>
<li>,    <s>analogWrite();</s>pwmWrite(); ‚Äî PB0, PA7, PA6, PA3, PA2, PA1, PA0, PB7, PB6, PA10, PA9, PA8,     ,     ;</li>
<li>,  analogRead(); ‚Äî PB0, PA7, PA6, PA5, PA4, PA3, PA2, PA1, PA0.</li>
</ul><br>
<br>
    .       ,   1.9 .<br>
<br>
 ,   PA12/PA11   D+/D- USB,       ,   ,    2-     ,    .<br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La placa de circuito:</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Clickable</font></font></b><div class="spoiler_text"><a href=""><img src="https://habrastorage.org/getpro/geektimes/post_images/133/e87/543/133e875430de3f6b647547475f8358af.jpg" alt="image"></a><br>
() <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">www.stm32duino.com/viewtopic.php?p=11464#p11464</a><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, por √∫ltimo:</font></font><br>
<br>
<img src="https://habrastorage.org/files/9cb/14b/562/9cb14b562e7f43b58a156618f171aa84.JPG" alt="imagen"><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hola geektimes.ru</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">//https://github.com/mk90/LiquidCrystalRus</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//STM32  !</span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;LiquidCrystalRus.h&gt;</span></span></span></span><font></font>
<font></font>
<span class="hljs-function"><span class="hljs-function">LiquidCrystalRus </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lcd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PB9, PB8, PB7, PB6, PB5, PB4)</span></span></span></span>;<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  lcd.begin(<span class="hljs-number"><span class="hljs-number">16</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>);<font></font>
  lcd.print(<span class="hljs-string"><span class="hljs-string">""</span></span>);<font></font>
  lcd.setCursor(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  lcd.print(<span class="hljs-string"><span class="hljs-string">"geektimes.ru"</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  lcd.setCursor(<span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);<font></font>
  lcd.print(millis() / <span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
}<font></font>
</code></pre><br>
</div></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enlaces: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Archivo del art√≠culo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Portal de un amigo de Roger Clark dedicado a portar STM32</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , preguntas / sugerencias / gracias, todo all√≠; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/rogerclarkmelbourne/Arduino_STM32</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">http://docs.leaflabs.com/docs.leaflabs.com/index.html</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : fue este proyecto el que Roger tom√≥ como base, por lo que hay muchas cosas √∫tiles, aunque en ingl√©s; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arduino IDE versi√≥n 1.6.5-r5 se puede descargar aqu√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mi art√≠culo, hasta cierto punto, se cruza con el </font><font style="vertical-align: inherit;">amigo </font><font style="vertical-align: inherit;">" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32 vs Arduino</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@RaJa</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hoja de datos sobre </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STM32F103C8T6</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Todas mis publicaciones en geektimes</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UPD 15/07/2016</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El kernel se prob√≥ para funcionar en Arduino IDE versi√≥n 1.6.9: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">geektimes.ru/post/277928/#comment_9532576</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
PS</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">¬øQu√© m√°s olvid√©?</font></font></b><div class="spoiler_text">       :<br>
<br>
<img src="https://habrastorage.org/files/08e/d64/4c5/08ed644c5daf40cb80ef5e2aa9442d51.JPG" alt="image"><br>
<br>
   ,      .<br>
<br>
   ,    microUSB :<br>
<br>
<img src="https://habrastorage.org/files/9fa/27c/f23/9fa27cf2394a446d8411f0b14f77f427.jpg" alt="image"><br>
<br>
      , ,   .<br>
</div></div></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es395577/">https://habr.com/ru/post/es395577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es395565/index.html">Error de bifurcaci√≥n del software Ethereum, reversi√≥n de resultados y crecimiento de Ripple</a></li>
<li><a href="../es395567/index.html">Kingston UV400 480 GB SSD Review - Raisin SSD</a></li>
<li><a href="../es395571/index.html">Preg√∫ntele a Ethan No. 66: ¬øHemos encontrado materia oscura?</a></li>
<li><a href="../es395573/index.html">Los vendedores rusos hacen sonar la alarma: los productos son m√°s baratos en las tiendas en l√≠nea extranjeras</a></li>
<li><a href="../es395575/index.html">SanDisk lanza MicroSDXC de hasta 256 GB</a></li>
<li><a href="../es395579/index.html">¬øCu√°l deber√≠a ser el verdadero gobierno electr√≥nico? Estonia muestra un ejemplo</a></li>
<li><a href="../es395581/index.html">C√≥mo la edici√≥n gen√≥mica cambiar√° la agricultura. Si permitimos ...</a></li>
<li><a href="../es395583/index.html">El roaming anular√° las innovaciones, no las leyes.</a></li>
<li><a href="../es395587/index.html">Tanques reales en el universo del juego.</a></li>
<li><a href="../es395591/index.html">OnePlus 3: la novedad de Android m√°s esperada del verano</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>