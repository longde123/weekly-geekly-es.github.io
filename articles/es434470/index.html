<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üì• ü§òüèª üõÅ Controlador de cebolla. Rompemos las pantallas en partes üë©üèæ‚Äçüé§ üèº üë±</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El dise√±o at√≥mico y el dise√±o del sistema son populares en el dise√±o: esto es cuando todo consiste en componentes, desde controles hasta pantallas. No...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Controlador de cebolla. Rompemos las pantallas en partes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dodopizzadev/blog/434470/"><p>  El dise√±o at√≥mico y el dise√±o del sistema son populares en el dise√±o: esto es cuando todo consiste en componentes, desde controles hasta pantallas.  No es dif√≠cil para un programador escribir controles separados, pero ¬øqu√© hacer con pantallas enteras? </p><br><p>  Echemos un vistazo al ejemplo de A√±o Nuevo: </p><br><ul><li>  peguemos todo junto; </li><li>  dividido en controladores: seleccione navegaci√≥n, plantilla y contenido; </li><li>  reutilizar c√≥digo para otras pantallas. </li></ul><br><p><img src="https://habrastorage.org/webt/_5/-_/tz/_5-_tzispwunqkjevxcprqjnxb0.png"></p><a name="habracut"></a><br><h2 id="vsyo-v-kuchu">  Todo en un mont√≥n </h2><br><p>  La pantalla de este a√±o nuevo habla sobre los horarios especiales de apertura de las pizzer√≠as.  Es bastante simple, por lo que no ser√° un delito convertirlo en un controlador: </p><br><p><img src="https://habrastorage.org/webt/hw/ra/l5/hwral5o1ajc9znvde9tozjf8tbe.png"></p><br><p>  Pero  La pr√≥xima vez, cuando necesitemos una pantalla similar, tendremos que repetirla nuevamente y luego hacer los mismos cambios en todas las pantallas.  Bueno, no sucede sin ediciones. </p><br><p>  Por lo tanto, es m√°s razonable dividirlo en partes y usarlo para otras pantallas.  Destaqu√© tres: </p><br><ul><li>  navegaci√≥n </li><li>  una plantilla con un √°rea para contenido y un lugar para acciones en la parte inferior de la pantalla, </li><li>  Contenido √∫nico en el centro. </li></ul><br><p> Seleccione cada parte en su propio <code>UIViewController</code> . </p><br><h2 id="konteyner-navigaciya">  Navegaci√≥n de contenedores </h2><br><p>  Los ejemplos m√°s llamativos de contenedores de navegaci√≥n son <code>UINavigationController</code> y <code>UITabBarController</code> .  Cada uno ocupa una franja en la pantalla bajo sus propios controles, y deja el espacio restante para otro <code>UIViewController</code> . </p><br><p>  En nuestro caso, habr√° un contenedor para todas las pantallas modales con un solo bot√≥n de cierre. </p><br><div class="spoiler">  <b class="spoiler_title">Cual es el punto?</b> <div class="spoiler_text"><p>  Si queremos mover el bot√≥n hacia la derecha, solo necesitaremos cambiarlo en un controlador. </p><br><p>  O, si decidimos mostrar todas las ventanas modales con una animaci√≥n especial, y cerrar de forma interactiva con un deslizamiento, como en las tarjetas de historia de AppStore.  Entonces, <code>UIViewControllerTransitioningDelegate</code> deber√° configurarse solo para este controlador. </p></div></div><br><p><img src="https://habrastorage.org/webt/uv/hy/sk/uvhyskhr-hvxrbzgwgswlc6ul6c.png"></p><br><p>  Puede usar una <code>container view</code> para separar los controladores: crear√° una <code>UIView</code> en el padre e insertar√° la <code>UIView</code> controlador hijo en √©l. </p><br><p><img src="https://habrastorage.org/webt/xo/pw/ht/xopwhtfz1or0ro86mipsqyfb6y8.png"></p><br><p>  Estire la <code>container view</code> hasta el borde de la pantalla.  <code>Safe area</code> se aplicar√° autom√°ticamente al controlador secundario: </p><br><p><img src="https://habrastorage.org/webt/du/gc/rh/dugcrhatpjzzl1essnh-5j0clrk.png"></p><br><h2 id="shablon-ekrana">  Patr√≥n de pantalla </h2><br><p>  El contenido es obvio en la pantalla: imagen, t√≠tulo, texto.  El bot√≥n parece ser parte de √©l, pero el contenido es din√°mico en diferentes iPhones, y el bot√≥n es fijo.  Son visibles dos sistemas con diferentes tareas: uno muestra el contenido y el otro lo integra y lo alinea.  Deben dividirse en dos controladores. </p><br><p><img src="https://habrastorage.org/webt/sc/qf/cr/scqfcryfeq1ginkhko_ypvzzt6o.jpeg"></p><br><p>  El primero es responsable del dise√±o de la pantalla: el contenido debe estar centrado y el bot√≥n clavado en la parte inferior de la pantalla.  El segundo dibujar√° el contenido. </p><br><p><img src="https://habrastorage.org/webt/gp/dr/qi/gpdrqi4gjxch0scmu7rh3zzrg8g.jpeg"></p><br><blockquote>  Sin una plantilla, todos los controladores son similares, pero los elementos bailan. </blockquote><p>  Los botones en la √∫ltima pantalla son diferentes, depende del contenido.  La delegaci√≥n ayudar√° a resolver el problema: la plantilla del controlador solicitar√° controles del contenido y los mostrar√° en su <code>UIStackView</code> . </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift protocol OnboardingViewControllerDatasource { var supportingViews: [UIView] { get } } // NewYearContentViewController.swift extension NewYearContentViewController: OnboardingViewControllerDatasource { var supportingViews: [UIView] { return [view().doneButton] } }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">¬øPor qu√© ver ()?</b> <div class="spoiler_text"><p>  <code>UIViewController</code> leer acerca de c√≥mo especializarse <code>UIView</code> con <code>UIViewController</code> en mi √∫ltimo art√≠culo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Controlador, ¬°</a> <code>UIView</code> con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">calma!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sacamos el c√≥digo en UIView.</a> </p></div></div><br><p>  Los botones se pueden conectar al controlador a trav√©s de objetos relacionados.  Su <code>IBOutlet</code> e <code>IBAction</code> se almacenan en el controlador de contenido, solo los elementos no se agregan a la jerarqu√≠a. </p><br><p><img src="https://habrastorage.org/webt/7z/se/ub/7zseub0d7hkkc9laghstrr7u8cw.png"></p><br><p>  Puede obtener elementos del contenido y agregarlos a la plantilla en la etapa de preparaci√≥n de <code>UIStoryboardSegue</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift override func prepare(for segue: UIStoryboardSegue, sender: Any?) { if let buttonsDatasource = segue.destination as? OnboardingViewControllerDatasource { view().supportingViews = buttonsDatasource.supportingViews } }</span></span></code> </pre> <br><p>  En el setter, agregamos controles a <code>UIStackView</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingView.swift var supportingViews: [UIView] = [] { didSet { for view in supportingViews { stackView.addArrangedSubview(view) } } }</span></span></code> </pre> <br><p>  Como resultado, nuestro controlador se dividi√≥ en tres partes: navegaci√≥n, plantilla y contenido.  En la imagen, toda la <code>container view</code> muestra en gris: </p><br><p><img src="https://habrastorage.org/webt/yg/71/v1/yg71v1ajukht7pki8alekccwrcy.png"></p><br><h2 id="dinamicheskiy-razmer-kontrollera">  Tama√±o del controlador din√°mico </h2><br><p>  El controlador de contenido tiene su propio tama√±o m√°ximo, est√° limitado por <code>constraints</code> internas. </p><br><p>  <code>Container view</code> agrega constores basados ‚Äã‚Äãen la <code>Autoresizing mask</code> y entran en conflicto con las dimensiones internas del contenido.  El problema se resuelve en el c√≥digo: en el controlador de contenido, debe indicar que no est√° afectado por los constores de la <code>Autoresizing mask</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// NewYearContentViewController.swift override func loadView() { super.loadView() view.translatesAutoresizingMaskIntoConstraints = false }</span></span></code> </pre> <br><p><img src="https://habrastorage.org/webt/je/5q/dp/je5qdpshqbjzke7vbli8vrflpnq.png"></p><br><p>  Hay dos pasos m√°s para Interface Builder: </p><br><p>  <strong>Paso 1.</strong> Especifique el <code>Intrinsic size</code> para la vista <code>UIView</code> .  Los valores reales aparecer√°n despu√©s del lanzamiento, pero por ahora pondremos los adecuados. </p><br><p><img src="https://habrastorage.org/webt/zg/st/lh/zgstlh9ascudcd06z-3c-edpmzi.png"></p><br><p>  <strong>Paso 2.</strong> Para el controlador de contenido, especifique <code>Simulated Size</code> .  Puede que no coincida con el tama√±o pasado. </p><br><div class="spoiler">  <b class="spoiler_title">Hubo errores de dise√±o, ¬øqu√© debo hacer?</b> <div class="spoiler_text"><p>  Se producen errores cuando <code>AutoLayout</code> no puede descubrir c√≥mo descomponer los elementos en el tama√±o actual. </p><br><p>  Muy a menudo, el problema desaparece despu√©s de cambiar las prioridades de la constante.  <code>UIView</code> dejarlos para que uno de los <code>UIView</code> pueda expandirse / contraerse m√°s que los dem√°s. </p></div></div><br><h2 id="razdelyaem-na-chasti-i-pishem-v-kode">  Nos dividimos en partes y escribimos c√≥digo </h2><br><p>  Dividimos el controlador en varias partes, pero hasta ahora no podemos reutilizarlos, la interfaz de <code>UIStoryboard</code> dif√≠cil de extraer en partes.  Si necesitamos transferir algunos datos al contenido, tendremos que acceder a ellos a trav√©s de toda la jerarqu√≠a.  Deber√≠a ser al rev√©s: primero tome el contenido, config√∫relo y luego envu√©lvalo en los contenedores necesarios.  Como una bombilla </p><br><p>  Tres tareas aparecen en nuestro camino: </p><br><ol><li>  Separe cada controlador en su propio <code>UIStoryboard</code> . </li><li>  Rechace la <code>container view</code> , agregue controladores a los contenedores en el c√≥digo. </li><li>  Ata todo de nuevo. </li></ol><br><h3 id="razdelyaem-uistoryboard">  Compartir UIStoryboard </h3><br><p>  <code>UIStoryboard</code> crear dos <code>UIStoryboard</code> adicionales y copiar y pegar el controlador de navegaci√≥n y el controlador de plantilla en ellos.  <code>Embed segue</code> se interrumpir√°, pero la <code>container view</code> del <code>container view</code> con restricciones configuradas se transferir√°.  Las restricciones deben guardarse y la <code>container view</code> del <code>container view</code> debe reemplazarse con una vista de <code>UIView</code> normal. </p><br><div class="spoiler">  <b class="spoiler_title">La forma m√°s f√°cil es cambiar el tipo de vista de Contenedor en el c√≥digo de UIStoryboard.</b> <div class="spoiler_text"><ul><li>  abra <code>UIStoryboard</code> como un c√≥digo (men√∫ contextual del archivo ‚Üí Abrir como ... ‚Üí C√≥digo fuente); </li><li><p>  cambie el tipo de <code>containerView</code> para <code>view</code> .  Es necesario cambiar las etiquetas de apertura y <strong>cierre</strong> . </p><br><p>  Del mismo modo, puede cambiar, por ejemplo, <code>UIView</code> a <code>UIScrollView</code> , si es necesario.  Y viceversa. </p><br></li></ul><br><p><img src="https://habrastorage.org/webt/g8/ae/6d/g8ae6dvzd685hag645eyhc-u__y.png"></p></div></div><br><p>  Configuramos el controlador a la propiedad de <code>is initial view controller</code> , y llamaremos al <code>UIStoryboard</code> como controlador. </p><br><div class="spoiler">  <b class="spoiler_title">Cargamos el controlador desde UIStoryboard.</b> <div class="spoiler_text"><p>  Si el nombre del controlador coincide con el nombre de <code>UIStoryboard</code> , la descarga se puede envolver en un m√©todo que encontrar√° el archivo deseado: </p><br><pre> <code class="objectivec hljs">protocol Storyboardable { } extension Storyboardable where Self: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func instantiateInitialFromStoryboard() -&gt; Self { let controller = storyboard().instantiateInitialViewController() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> controller! as! Self } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> func storyboard(fileName: String? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">UIStoryboard</span></span> { let storyboard = <span class="hljs-built_in"><span class="hljs-built_in">UIStoryboard</span></span>(name: fileName ?? storyboardIdentifier, bundle: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storyboard } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> var storyboardIdentifier: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String(describing: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> var storyboardName: String { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> storyboardIdentifier } }</code> </pre> <br><p>  Si el controlador se describe en <code>.xib</code> , el constructor est√°ndar se cargar√° sin tales bailes.  Por desgracia, <code>.xib</code> puede contener solo un controlador, a menudo esto no es suficiente: en un buen caso, una pantalla consta de varias.  Por lo tanto, usamos <code>UIStoryborad</code> , es f√°cil dividir la pantalla en partes. </p></div></div><br><h3 id="dobavlyaem-kontroller-v-kode">  Agregar un controlador en el c√≥digo </h3><br><p>  Para que el controlador funcione correctamente, necesitamos todos los m√©todos de su ciclo de vida: <code>will/did-appear/disappear</code> . </p><br><p>  Para la visualizaci√≥n correcta, debe llamar a 5 pasos: </p><br><pre> <code class="objectivec hljs"> willMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?) addChild(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) addSubview(_ subivew: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) layout didMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?)</code> </pre> <br><p>  Apple sugiere reducir el c√≥digo a 4 pasos, porque <code>addChild()</code> llamar√° <code>willMove(toParent)</code> .  En resumen: </p><br><pre> <code class="objectivec hljs"> addChild(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) addSubview(_ subivew: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) layout didMove(toParent parent: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>?)</code> </pre> <br><p>  Para simplificar, puede envolverlo todo en <code>extension</code> .  Para nuestro caso, necesitamos una versi√≥n con <code>insertSubview()</code> . </p><br><pre> <code class="objectivec hljs">extension <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span> { func insertFullframeChildController(_ childController: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>, toView: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>? = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, index: Int) { let containerView: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> = toView ?? view addChild(childController) containerView.insertSubview(childController.view, at: index) containerView.pinToBounds(childController.view) childController.didMove(toParent: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) } }</code> </pre> <br><p>  Para eliminar, necesita los mismos pasos, solo que en lugar del controlador principal, debe establecer <code>nil</code> .  Ahora <code>removeFromParent()</code> llama a <code>didMove(toParent: nil)</code> , y el dise√±o no es necesario.  La versi√≥n abreviada es muy diferente: </p><br><pre> <code class="objectivec hljs"> willMove(toParent: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) view.removeFromSuperview() removeFromParent()</code> </pre> <br><h2 id="leyaut">  Dise√±o </h2><br><h3 id="stavim-konstreynty">  Establecer restricciones </h3><br><p>  Para establecer correctamente el tama√±o del controlador, usaremos <code>AutoLayout</code> .  Necesitamos clavar todos los lados a todos los lados: </p><br><pre> <code class="objectivec hljs">extension <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span> { func pinToBounds(_ view: <span class="hljs-built_in"><span class="hljs-built_in">UIView</span></span>) { view.translatesAutoresizingMaskIntoConstraints = <span class="hljs-literal"><span class="hljs-literal">false</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSLayoutConstraint</span></span>.activate([ view.topAnchor.constraint(equalTo: topAnchor), view.bottomAnchor.constraint(equalTo: bottomAnchor), view.leadingAnchor.constraint(equalTo: leadingAnchor), view.trailingAnchor.constraint(equalTo: trailingAnchor) ]) } }</code> </pre> <br><h2 id="dobavlyaem-docherniy-kontroller-v-kode">  Agregar un controlador secundario en el c√≥digo </h2><br><p>  Ahora todo se puede combinar: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// ModalContainerViewController.swift public func embedController(_ controller: UIViewController) { insertFullframeChildController(controller, index: 0) }</span></span></code> </pre> <br><p>  Debido a la frecuencia de uso, podemos envolver todo esto en <code>extension</code> : </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// ModalContainerViewController.swift extension UIViewController { func wrapInModalContainer() -&gt; ModalContainerViewController { let modalController = ModalContainerViewController.instantiateInitialFromStoryboard() modalController.embedController(self) return modalController } }</span></span></code> </pre> <br><p>  Tambi√©n se necesita un m√©todo similar para el controlador de plantilla.  <code>prepare(for segue:)</code> sol√≠a configurarse en <code>prepare(for segue:)</code> , pero ahora puede vincularlo en el m√©todo de <code>prepare(for segue:)</code> del controlador: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// OnboardingViewController.swift public func embedController(_ controller: UIViewController, actionsDatasource: OnboardingViewControllerDatasource) { insertFullframeChildController(controller, toView: view().contentContainerView, index: 0) view().supportingViews = actionsDatasource.supportingViews }</span></span></code> </pre> <br><p>  Crear un controlador se ve as√≠: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// MainViewController.swift @IBAction func showModalControllerDidPress(_ sender: UIButton) { let content = NewYearContentViewController.instantiateInitialFromStoryboard() //     let onboarding = OnboardingViewController.instantiateInitialFromStoryboard() onboarding.embedController(contentController, actionsDatasource: contentController) let modalController = onboarding.wrapInModalContainer() present(modalController, animated: true) }</span></span></code> </pre> <br><p>  Conectar una nueva pantalla a la plantilla es simple: </p><br><ul><li>  eliminar lo que no es relevante para el contenido; </li><li>  especificar botones de acci√≥n implementando el protocolo OnboardingViewControllerDatasource; </li><li>  escriba un m√©todo que vincule una plantilla y contenido. </li></ul><br><h2 id="eschyo-pro-konteynery">  M√°s sobre contenedores </h2><br><h3 id="status-bar">  Barra de estado </h3><br><p>  A menudo es necesario que la visibilidad de la <code>status bar</code> sea ‚Äã‚Äãcontrolada por un controlador con contenido, no un contenedor.  Hay un par de <code>property</code> para esto: </p><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// UIView.swift var childForStatusBarStyle: UIViewController? var childForStatusBarHidden: UIViewController?</span></span></code> </pre> <br><p>  Con estas <code>property</code> puede crear una cadena de controladores, este √∫ltimo ser√° responsable de mostrar la <code>status bar</code> . </p><br><h3 id="safe-area">  Zona segura </h3><br><p>  Si los botones del contenedor se superponen al contenido, entonces debe aumentar la zona <code>safeArea</code> .  Esto se puede hacer en c√≥digo: establezca <code>additinalSafeAreaInsets</code> para controladores secundarios.  Puedes llamarlo desde <code>embedController()</code> : </p><br><pre> <code class="objectivec hljs">private func addSafeArea(to controller: <span class="hljs-built_in"><span class="hljs-built_in">UIViewController</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-meta"><span class="hljs-meta">#available(iOS 11.0, *) { let buttonHeight = CGFloat(30) let topInset = UIEdgeInsets(top: buttonHeight, left: 0, bottom: 0, right: 0) controller.additionalSafeAreaInsets = topInset } }</span></span></code> </pre> <br><p>  Si agrega 30 puntos en la parte superior, el bot√≥n dejar√° de superponer contenido y <code>safeArea</code> ocupar√° el √°rea verde: </p><br><p><img src="https://habrastorage.org/webt/v-/ko/go/v-kogoeqmzsu0gv_x_ugytn5oos.png"></p><br><h3 id="margins-preserve-superview-margins">  M√°rgenes  Preservar los m√°rgenes de supervisi√≥n </h3><br><p>  Los controladores tienen <code>margins</code> est√°ndar.  Por lo general, son iguales a 16 puntos de cada lado de la pantalla y solo en tama√±os Plus son 20 puntos. </p><br><p>  Seg√∫n los <code>margins</code> puede crear constantes, la sangr√≠a en el borde ser√° diferente para diferentes iPhones: </p><br><p><img src="https://habrastorage.org/webt/vn/8y/0w/vn8y0whfciurongx5qmzuhenzq4.png"></p><br><p>  Cuando ponemos una <code>UIView</code> en otra, los <code>margins</code> se reducen a la mitad: a 8 puntos.  Para evitar esto, debe incluir <code>Preserve superview margins</code> .  Luego, los <code>margins</code> <code>UIView</code> secundario ser√°n iguales a los <code>margins</code> padre.  Es adecuado para contenedores de pantalla completa. </p><br><h2 id="konec">  El final </h2><br><p>  Los controladores de contenedores son una herramienta poderosa.  Simplifican el c√≥digo, separan las tareas y pueden reutilizarse.  Puede escribir controladores anidados de cualquier manera: en <code>UIStoryboard</code> , en <code>.xib</code> o simplemente en c√≥digo.  Lo m√°s importante es que son f√°ciles de crear y divertidos de usar. </p><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Un ejemplo de un art√≠culo sobre GitHub</a> </p><br><p>  ¬øTienes pantallas desde las cuales valdr√≠a la pena hacer una plantilla?  ¬°Comparte en los comentarios! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es434470/">https://habr.com/ru/post/es434470/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es434452/index.html">AXIS vs IDIS: la batalla de los fabricantes de videovigilancia</a></li>
<li><a href="../es434456/index.html">¬øD√≥nde conseguimos la botella?</a></li>
<li><a href="../es434460/index.html">My Single Line Dropbox Client para Linux</a></li>
<li><a href="../es434466/index.html">¬øQu√© determina el costo de un vuelo en la pr√°ctica?</a></li>
<li><a href="../es434468/index.html">Guardar contenido Biblioteca de contenido de vCenter</a></li>
<li><a href="../es434474/index.html">Gato verde sobre contenido espacial</a></li>
<li><a href="../es434476/index.html">ChatOps en GitLab estar√° disponible para todos</a></li>
<li><a href="../es434478/index.html">El c√≥digo sin rostro matar√° la programaci√≥n, y no haremos nada al respecto.</a></li>
<li><a href="../es434480/index.html">A√±o nuevo, artilugios, fuego</a></li>
<li><a href="../es434482/index.html">Otro a√±o de nuestro blog: resultados de 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>