<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úåüèª üë©üèº‚Äçüé§ üë∞üèº Entrep√¥t de donn√©es distribu√© dans le concept Data Lake: par o√π commencer üìñ üëª üë®üèø‚Äçüé§</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dans le monde de l'entreprise, il y a eu une sati√©t√© avec des syst√®mes frontaux, des bus de donn√©es et d'autres syst√®mes classiques qui ont √©t√© mis en...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Entrep√¥t de donn√©es distribu√© dans le concept Data Lake: par o√π commencer</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/neoflex/blog/413149/">  Dans le monde de l'entreprise, il y a eu une sati√©t√© avec des syst√®mes frontaux, des bus de donn√©es et d'autres syst√®mes classiques qui ont √©t√© mis en ≈ìuvre par tout le monde au cours des 10 √† 15 derni√®res ann√©es.  Mais il y a un segment, qui jusqu'√† r√©cemment √©tait dans le statut de "tout le monde veut, mais personne ne sait ce que c'est."  Et c'est le Big Data.  Sonne magnifiquement, promu par les meilleures entreprises occidentales - comment ne pas devenir une friandise? <br><br><img src="https://habrastorage.org/webt/im/vq/jd/imvqjd41airg83tkthvkawlnlgw.png"><br><br>  Mais alors que la plupart regardent et demandent, certaines entreprises ont commenc√© √† impl√©menter activement des solutions bas√©es sur cette pile technologique dans leur paysage informatique.  Un r√¥le important √† cet √©gard a √©t√© jou√© par l'√©mergence de distributions commerciales Apache Hadoop, dont les d√©veloppeurs fournissent un support technique √† leurs clients.  Sentant le besoin d'une telle solution, un de nos clients a d√©cid√© d'organiser un entrep√¥t de donn√©es distribu√© dans le concept Data Lake bas√© sur Apache Hadoop. <br><a name="habracut"></a><br><h2>  Objectifs du projet </h2><br><p>  Tout d'abord, optimisez le travail du d√©partement de gestion des risques.  Avant de commencer les travaux, un d√©partement entier √©tait engag√© dans le calcul des facteurs de risque de cr√©dit (FCR), et tous les calculs ont √©t√© effectu√©s manuellement.  Le recalcul a pris environ un mois √† chaque fois, et les donn√©es sur lesquelles il √©tait bas√© ont eu le temps de devenir obsol√®tes.  Par cons√©quent, les t√¢ches de la solution comprenaient le chargement quotidien du delta de donn√©es dans le r√©f√©rentiel, le recalcul du FCD et la construction de data marts dans l'outil BI (la fonctionnalit√© SpagoBI √©tait suffisante pour cette t√¢che) pour les visualiser. </p><br><p>  Deuxi√®mement, fournir des outils d'exploration de donn√©es hautes performances aux employ√©s de banque impliqu√©s dans la science des donn√©es.  Ces outils, tels que Jupyter et Apache Zeppelin, peuvent √™tre install√©s localement et peuvent √©galement √™tre utilis√©s pour explorer des donn√©es et cr√©er des mod√®les.  Mais leur int√©gration avec le cluster Cloudera permet d'utiliser les ressources mat√©rielles des n≈ìuds syst√®me les plus productifs pour les calculs, ce qui acc√©l√®re les t√¢ches d'analyse de donn√©es par dizaines, voire centaines de fois. </p><br><p>  Le rack Oracle Big Data Appliance a √©t√© choisi comme solution mat√©rielle cible, de sorte que la distribution Clachede d'Apache Hadoop a √©t√© prise comme base.  Le rack voyageait depuis un certain temps et, pour acc√©l√©rer le processus, des serveurs dans le cloud priv√© du client ont √©t√© allou√©s √† ce projet.  La solution est raisonnable, mais il y avait un certain nombre de probl√®mes, dont je parlerai ci-dessous. </p><br><p>  Les t√¢ches suivantes ont √©t√© planifi√©es dans le cadre du projet: <br><br></p><ol><li>  D√©ployez le CDH de Cloudera (distribution de Cloudera incluant Apache Hadoop) et les services suppl√©mentaires n√©cessaires au travail. </li><li>  Configurez le logiciel install√©. </li><li>  Mettre en place une int√©gration continue pour acc√©l√©rer le processus de d√©veloppement (sera couvert dans un article s√©par√©). </li><li>  Installez des outils de BI pour cr√©er des outils de cr√©ation de rapports et de d√©couverte de donn√©es pour assurer le travail du centre de donn√©es (sera couvert dans un article s√©par√©). </li><li>  D√©velopper des applications pour t√©l√©charger les donn√©es n√©cessaires depuis les syst√®mes finaux, ainsi que leur mise √† jour r√©guli√®re. </li><li>  D√©velopper des formulaires de reporting pour visualiser les donn√©es dans un outil BI. </li></ol><br><p> Ce n'est pas la premi√®re ann√©e que Neoflex d√©veloppe et impl√©mente des syst√®mes bas√©s sur Apache Hadoop et a m√™me son propre produit pour le d√©veloppement visuel des processus ETL - Neoflex Datagram.  Pendant longtemps, j'ai voulu participer √† l'un des projets de cette classe et j'ai √©t√© heureux d'administrer ce syst√®me.  L'exp√©rience s'est av√©r√©e tr√®s pr√©cieuse et motivante pour approfondir le sujet, alors je m'empresse de la partager avec vous.  J'esp√®re que ce sera int√©ressant. </p><br><h2>  Les ressources </h2><br><p>  Avant de commencer l'installation, il est recommand√© de pr√©parer tout ce dont vous avez besoin. <br>  La quantit√© et la puissance du fer d√©pendent directement du nombre et des supports √† d√©ployer.  √Ä des fins de d√©veloppement, vous pouvez installer tous les composants sur au moins une machine virtuelle fragile, mais cette approche n'est pas la bienvenue. </p><br><p>  Au stade de pilotage du projet et de d√©veloppement actif, lorsque le nombre d'utilisateurs du syst√®me √©tait minimal, un seul environnement principal √©tait suffisant - cela a permis d'acc√©l√©rer en r√©duisant le temps de chargement des donn√©es depuis les syst√®mes finaux (la proc√©dure la plus fr√©quente et la plus longue pour d√©velopper des entrep√¥ts de donn√©es).  Maintenant que le syst√®me s'est stabilis√©, nous sommes arriv√©s √† une configuration avec trois environnements: test, pr√©prod et prod (principal). </p><br><p>  Dans un cloud priv√©, des serveurs ont √©t√© allou√©s pour organiser 2 environnements - le principal et le test.  Les sp√©cifications des supports sont indiqu√©es dans le tableau ci-dessous: <br></p><table><tbody><tr><th>  Rendez-vous </th><th>  La quantit√© </th><th>  vCPU </th><th>  vRAM, Gb </th><th>  Disques, Go </th></tr><tr><td>  Environnement principal, services Cloudera </td><td>  3 </td><td>  8 </td><td>  64 </td><td>  2 200 </td></tr><tr><td>  Environnement principal, HDFS </td><td>  3 </td><td>  22 </td><td>  288 </td><td>  5000 </td></tr><tr><td>  Environnement de base, outils de d√©couverte de donn√©es </td><td>  1 </td><td>  16 </td><td>  128 </td><td>  2200 </td></tr><tr><td>  Environnement de test, services Cloudera </td><td>  1 </td><td>  8 </td><td>  64 </td><td>  2200 </td></tr><tr><td>  Environnement de test, HDFS </td><td>  2 </td><td>  22 </td><td>  256 </td><td>  4000 </td></tr><tr><td>  Environnement de base, outils de d√©couverte de donn√©es </td><td>  1 </td><td>  16 </td><td>  128 </td><td>  2200 </td></tr><tr><td>  Ci </td><td>  2 </td><td>  6 </td><td>  48 </td><td>  1000 </td></tr></tbody></table><br><p>  Plus tard, l'environnement principal a migr√© vers Oracle BDA et les serveurs ont √©t√© utilis√©s pour organiser l'environnement pr√©prod. </p><br><p>  La d√©cision de migration √©tait justifi√©e - les ressources allou√©es aux serveurs HDFS manquaient objectivement.  Les goulots d'√©tranglement √©taient des disques minuscules (qu'est-ce que 5 To pour les Big Data?) Et des processeurs insuffisamment puissants, qui √©taient charg√©s de mani√®re stable √† 95% pendant le travail r√©gulier des t√¢ches de chargement des donn√©es.  Avec d'autres serveurs, la situation est inverse - presque tout le temps, ils sont inactifs et leurs ressources pourraient √™tre utilis√©es de mani√®re tr√®s avantageuse sur d'autres projets. </p><br><p>  Avec les logiciels, les choses n'√©taient pas faciles - du fait que le d√©veloppement se faisait dans un cloud priv√© sans acc√®s √† Internet, tous les fichiers devaient √™tre transf√©r√©s via le service de s√©curit√© et uniquement par accord.  √Ä cet √©gard, j'ai d√ª pr√©charger toutes les distributions, packages et d√©pendances n√©cessaires. </p><br><p>  La d√©finition de keepcache = 1 dans le fichier /etc/yum.conf (RHEL 7.3 a √©t√© utilis√© comme syst√®me d'exploitation) a beaucoup aid√© dans cette t√¢che difficile - l'installation du logiciel n√©cessaire sur une machine avec acc√®s r√©seau est beaucoup plus facile que de le t√©l√©charger manuellement √† partir des r√©f√©rentiels avec les d√©pendances;) <br><br>  Ce que vous devez d√©ployer: <br><br></p><ol><li>  Oracle JDK (pas de Java n'importe o√π). </li><li>  Une base de donn√©es pour stocker les informations cr√©√©es et utilis√©es par les services CDH (par exemple, Hive Metastore).  Dans notre cas, PostgreSQL version 9.2.18 a √©t√© install√©, mais n'importe lequel des services Cloudera pris en charge peut √™tre utilis√© (la liste diff√®re pour les diff√©rentes versions de la distribution, voir la section Exigences et versions prises en charge du site officiel).  Ici, il convient de noter que le choix de la base de donn√©es n'a pas √©t√© enti√®rement r√©ussi - Oracle BDA est livr√© avec la base de donn√©es MySQL (l'un de leurs produits, qui leur est all√© avec l'achat de Sun) et il serait plus logique d'utiliser une base de donn√©es similaire pour d'autres environnements, ce qui simplifierait le processus de migration.  Il est recommand√© de choisir une distribution bas√©e sur la solution mat√©rielle cible. </li><li>  D√©mon Chrony pour la synchronisation de l'heure sur les serveurs. </li><li>  Serveur Cloudera Manager. </li><li>  D√©mons Cloudera Manager. </li></ol><br><h2>  Pr√©paration pour l'installation </h2><br><p>  Avant de commencer l'installation de CDH, un certain nombre de travaux pr√©paratoires doivent √™tre effectu√©s.  Une partie est utile lors de l'installation, l'autre simplifiera le fonctionnement. </p><br><h2>  Installation et configuration du syst√®me d'exploitation </h2><br><p>  Tout d'abord, cela vaut la peine de pr√©parer les machines virtuelles (et r√©elles) qui h√©bergeront le syst√®me: installez la version prise en charge sur chacune d'elles (la liste diff√®re pour les diff√©rentes versions de la distribution, voir la section ¬´Configuration requise et versions prises en charge¬ª du site officiel), attribuez les noms d'h√¥tes sont des noms compr√©hensibles (par exemple, &lt;system_name&gt; master1,2,3 ..., &lt;system_name&gt; slave1,2,3 ...), ainsi que des disques de marquage pour le stockage de fichiers et les fichiers temporaires cr√©√©s pendant le fonctionnement du syst√®me. </p><br><p>  Les recommandations de balisage sont les suivantes: <br><br></p><ul><li>  Sur les serveurs avec HDFS, cr√©ez un volume d'au moins 500 Go pour les fichiers cr√©√©s par YARN au cours des t√¢ches et placez-le dans le r√©pertoire / yarn (o√π ce volume doit √™tre mont√© apr√®s l'installation de CDH).  Un petit volume (environ 100 Go) devrait √™tre allou√© au syst√®me d'exploitation, aux services Cloudera, aux journaux et √† d'autres installations.  Tout l'espace libre qui restera apr√®s ces manipulations doit √™tre combin√© en un seul grand volume et mont√© dans le r√©pertoire / dfs avant de charger les donn√©es dans le stockage.  HDFS stocke les donn√©es sous forme de blocs plut√¥t petits et il vaut mieux ne pas recommencer leur transfert.  De plus, pour la commodit√© d'ajouter des disques plus tard, il est recommand√© d'utiliser LVM - il sera plus facile d'√©tendre le stockage (surtout quand il devient vraiment GRAND). </li><li>  Sur les serveurs avec les services Cloudera, vous pouvez monter tout l'espace disponible dans le r√©pertoire racine - il ne devrait y avoir aucun probl√®me avec de gros volumes de fichiers, surtout si vous nettoyez r√©guli√®rement les journaux.  La seule exception est le serveur avec la base de donn√©es, que les services Cloudera utilisent pour leurs besoins - sur ce serveur, il est logique de marquer un volume s√©par√© sous le r√©pertoire dans lequel les fichiers de cette base de donn√©es sont stock√©s (cela d√©pendra de la distribution s√©lectionn√©e).  Les services √©crivent assez mod√©r√©ment et 500 Go devraient √™tre plus que suffisants.  Pour des raisons de s√©curit√©, vous pouvez √©galement utiliser LVM. </li></ul><br><h2>  Configuration du serveur http et installation hors ligne des packages yum et CDH </h2><br><p>  Le logiciel √©tant install√© sans acc√®s √† Internet, pour simplifier l'installation des packages, il est recommand√© de sur√©lever le serveur HTTP et de l'utiliser pour cr√©er un r√©f√©rentiel local accessible sur le r√©seau.  Vous pouvez installer tous les logiciels localement en utilisant, par exemple, rpm, mais avec un grand nombre de serveurs et l'apparence de plusieurs environnements, il est pratique d'avoir un seul r√©f√©rentiel √† partir duquel vous pouvez installer des packages sans avoir √† les transf√©rer manuellement d'une machine √† l'autre. </p><br><p>  L'installation a √©t√© effectu√©e sur le syst√®me d'exploitation Red Hat 7.3, par cons√©quent, l'article contiendra des commandes sp√©cifiques √† celui-ci et √† d'autres syst√®mes d'exploitation bas√©s sur CentOS.  Lorsqu'il est install√© sur d'autres syst√®mes d'exploitation, la s√©quence sera similaire, seuls les gestionnaires de packages diff√©reront. <br>  Afin de ne pas √©crire partout sudo, nous supposons que l'installation est √† partir de la racine. </p><br><p>  <b>Voici ce que vous devez faire:</b> <br>  <b>1. La</b> machine sur laquelle le serveur HTTP et les distributions seront situ√©s est s√©lectionn√©e. <br>  <b>2.</b> Sur une machine avec un syst√®me d'exploitation similaire, mais connect√© √† Internet, d√©finissez l'indicateur keepcache = 1 dans le fichier /etc/yum.conf et httpd avec toutes les d√©pendances est install√©: <br><br></p><pre><code class="hljs sql">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> httpd</code> </pre> <br>  Si cette commande ne fonctionne pas, vous devez ajouter √† la liste des r√©f√©rentiels yum un r√©f√©rentiel contenant ces packages, par exemple, celui-ci est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">centos.excellmedia.net/7/os/x86_64</a> : <br><br><pre> <code class="hljs tex">echo -e "<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">n</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[centos.excellmedia.net]</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nname</span></span></span><span class="hljs-tag">=</span></span>excellmedia<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nbaseurl</span></span></span><span class="hljs-tag">=</span></span>http://centos.excellmedia.net/7/os/x86_64/<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nenabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-number"><span class="hljs-tag"><span class="hljs-number">1</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ngpgcheck</span></span></span><span class="hljs-tag">=</span><span class="hljs-number"><span class="hljs-tag"><span class="hljs-number">0</span></span></span></span>" &gt; /etc/yum.repos.d/excell.repo</code> </pre> <br>  Apr√®s cela, en <b>utilisant la</b> commande <b>yum repolist</b> , <b>nous</b> v√©rifions que le r√©f√©rentiel est resserr√© - un r√©f√©rentiel ajout√© devrait appara√Ætre dans la liste des r√©f√©rentiels (repo id - centos.excellmedia.net; nom du r√©f√©rentiel - excellmedia). <br>  V√©rifiez maintenant que yum a vu les packages dont nous avons besoin: <br><br><pre> <code class="hljs perl">yum list | <span class="hljs-keyword"><span class="hljs-keyword">grep</span></span> httpd</code> </pre> <br>  Si la sortie contient les packages n√©cessaires, vous pouvez les installer avec la commande ci-dessus. <br><br>  <b>3.</b> Pour cr√©er le r√©f√©rentiel yum, nous avons besoin du package createrepo.  Il se trouve √©galement dans le r√©f√©rentiel ci-dessus et est d√©fini de la m√™me mani√®re: <br><br><pre> <code class="hljs sql">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> createrepo</code> </pre> <br>  <b>4.</b> Comme je l'ai d√©j√† dit, les services CDH n√©cessitent une base de donn√©es pour fonctionner.  Installez PostgreSQL √† ces fins: <br><br><pre> <code class="hljs sql">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> postgresql-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span></code> </pre> <br>  <b>5.</b> L'une des conditions pr√©alables au bon fonctionnement de CDH est la synchronisation de l'heure sur tous les serveurs inclus dans le cluster.  √Ä ces fins, le package <b>chronyd</b> est <b>utilis√©</b> (sur les OS o√π je devais d√©ployer CDH, il √©tait install√© par d√©faut).  V√©rifiez sa disponibilit√©: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">chronyd</span></span> -v</code> </pre> <br>  S'il n'est pas install√©, installez: <br><br><pre> <code class="hljs sql">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> chrony</code> </pre> <br>  S'il est install√©, t√©l√©chargez simplement: <br><br><pre> <code class="hljs javascript">yumdownloader --destdir=<span class="hljs-regexp"><span class="hljs-regexp">/var/</span></span>cache/yum/x86_64/<span class="hljs-number"><span class="hljs-number">7</span></span>Server/<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">repo</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">/packages chrony</span></span></code> </pre> <br>  <b>6.</b> En m√™me temps, t√©l√©chargez imm√©diatement les packages n√©cessaires √† l'installation de CDH.  Ils sont disponibles sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive.cloudera.com</a> - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive.cloudera.com/cm</a> &lt;version principale de CDH&gt; / &lt;nom de votre syst√®me d'exploitation&gt; / &lt;version de votre syst√®me d'exploitation&gt; / x86_64 / cm / &lt;version compl√®te de CDH&gt; / RPMS / x86_64 /.  Vous pouvez t√©l√©charger des packages manuellement (cloudera-manager-server et cloudera-manager-daemons), ou ajouter un r√©f√©rentiel par analogie et les installer: <br><br><pre> <code class="hljs powershell">yum install cloudera<span class="hljs-literal"><span class="hljs-literal">-manager</span></span><span class="hljs-literal"><span class="hljs-literal">-daemons</span></span> cloudera<span class="hljs-literal"><span class="hljs-literal">-manager</span></span><span class="hljs-literal"><span class="hljs-literal">-server</span></span></code> </pre> <br>  <b>7.</b> Apr√®s l'installation, les packages et leurs d√©pendances sont mis en cache dans le dossier / var / cache / yum / x86_64 / 7Server / \ &lt;repo id \&gt; / packages.  Nous les transf√©rons sur la machine s√©lectionn√©e pour le serveur HTTP et les distributions, et installons: <br><br><pre> <code class="hljs xml">rpm -ivh <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name"></span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre> <br>  <b>8.</b> Ex√©cutez httpd, rendez-le visible √† partir d'autres h√¥tes de notre cluster et ajoutez-le √©galement √† la liste des services qui d√©marrent automatiquement apr√®s le chargement: <br><br><pre> <code class="hljs sql">systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> httpd systemctl <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> httpd systemctl <span class="hljs-keyword"><span class="hljs-keyword">stop</span></span> firewalld <span class="hljs-comment"><span class="hljs-comment">#       systemctl disable firewalld #       setenforce 0</span></span></code> </pre> <br>  <b>9.</b> Nous avons maintenant un serveur HTTP fonctionnel.  Son r√©pertoire de travail est <b>/ var / www / html</b> .  Cr√©ez-y 2 dossiers - un pour le r√©f√©rentiel yum, l'autre pour les analyseurs Cloudera (plus √† ce sujet plus tard): <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /var/www/html <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> yum_repo parcels</code> </pre> <br>  <b>10.</b> Pour les services de Cloudera, nous avons besoin de <b>Java</b> .  Toutes les machines n√©cessitent l'installation de la m√™me version du JDK; Cloudera recommande le Hot Spot d'Oracle.  T√©l√©chargez le package de distribution sur le site officiel (http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html) et transf√©rez-le dans le dossier <b>yum_repo</b> . <br><br>  <b>11.</b> Cr√©ez le r√©f√©rentiel yum dans le dossier yum_repo √† l'aide de l'utilitaire createrepo afin que le package JDK soit disponible pour l'installation √† partir des machines du cluster: <br><br><pre> <code class="hljs swift">createrepo -v /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/www/html/yum_repo/</code> </pre> <br>  <b>12.</b> Apr√®s avoir cr√©√© notre r√©f√©rentiel local sur chacun des h√¥tes, vous devez ajouter sa description, similaire au paragraphe 2: <br><br><pre> <code class="hljs tex">echo -e "<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">n</span></span></span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">[yum.local.repo]</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nname</span></span></span><span class="hljs-tag">=</span></span>yum_repo<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nbaseurl</span></span></span><span class="hljs-tag">=</span></span>http://&lt;   httpd&gt;/yum_repo/<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">nenabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-number"><span class="hljs-tag"><span class="hljs-number">1</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ngpgcheck</span></span></span><span class="hljs-tag">=</span><span class="hljs-number"><span class="hljs-tag"><span class="hljs-number">0</span></span></span></span>" &gt; /etc/yum.repos.d/yum_repo.repo</code> </pre> <br>  Vous pouvez √©galement effectuer des v√©rifications similaires au paragraphe 2. <br><br>  <b>13.</b> JDK est disponible, installez: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">yum</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">jdk1</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.8</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0_161</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.x86_64</span></span></code> </pre> <br>  Pour utiliser Java, vous devez d√©finir la variable JAVA_HOME.  Je vous recommande de l'exporter imm√©diatement apr√®s l'installation, ainsi que de l'√©crire dans les <b>fichiers</b> <b>/ etc / environment</b> et <b>/ etc / default / bigtop-utils</b> afin qu'il soit automatiquement export√© apr√®s le red√©marrage des serveurs et que son emplacement soit fourni aux services CDH: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> JAVA_HOME=<span class="hljs-regexp"><span class="hljs-regexp">/usr/</span></span>java/jdk1<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_161 echo <span class="hljs-string"><span class="hljs-string">"JAVA_HOME=/usr/java/jdk1.8.0_161"</span></span> &gt;&gt; <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span>environment <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> JAVA_HOME=<span class="hljs-regexp"><span class="hljs-regexp">/usr/</span></span>java/jdk1<span class="hljs-number"><span class="hljs-number">.8</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span>_144 &gt;&gt; <span class="hljs-regexp"><span class="hljs-regexp">/etc/</span></span><span class="hljs-keyword"><span class="hljs-keyword">default</span></span>/bigtop-utils</code> </pre> <br>  <b>14.</b> De la m√™me mani√®re, installez chronyd sur toutes les machines du cluster (sauf s'il est bien s√ªr absent): <br><br><pre> <code class="hljs sql">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> chrony</code> </pre> <br>  <b>15.</b> S√©lectionnez l'h√¥te sur lequel PostgreSQL fonctionnera et installez-le: <br><br><pre> <code class="hljs sql">yum <span class="hljs-keyword"><span class="hljs-keyword">install</span></span> postgresql-<span class="hljs-keyword"><span class="hljs-keyword">server</span></span></code> </pre> <br>  <b>16.</b> De m√™me, s√©lectionnez l'h√¥te sur lequel Cloudera Manager s'ex√©cutera et installez-le: <br><br><pre> <code class="hljs powershell">yum install cloudera<span class="hljs-literal"><span class="hljs-literal">-manager</span></span><span class="hljs-literal"><span class="hljs-literal">-daemons</span></span> cloudera<span class="hljs-literal"><span class="hljs-literal">-manager</span></span><span class="hljs-literal"><span class="hljs-literal">-server</span></span></code> </pre> <br>  <b>17. Les</b> packages sont install√©s, vous pouvez commencer √† configurer le logiciel avant l'installation. <br><br><h3>  Ajout: </h3><br><p>  Pendant le d√©veloppement et le fonctionnement du syst√®me, vous devrez ajouter des packages au r√©f√©rentiel yum pour les installer sur les h√¥tes du cluster (par exemple, la distribution Anaconda).  Pour ce faire, en plus de transf√©rer les fichiers dans le dossier yum_repo, vous devez effectuer les actions suivantes: <br><br></p><ul><li>  sur la machine avec httpd, ex√©cutez la commande de mise √† jour du r√©f√©rentiel yum: <br><br><pre> <code class="hljs powershell">createrepo <span class="hljs-literal"><span class="hljs-literal">-v</span></span> -<span class="hljs-literal"><span class="hljs-literal">-update</span></span> /var/www/html/yum_repo/</code> </pre> </li><li>  Sur toutes les machines sur lesquelles vous souhaitez installer des packages, effectuez un vidage des caches yum: </li><li><pre> <code class="hljs pgsql">yum clean <span class="hljs-keyword"><span class="hljs-keyword">all</span></span></code> </pre> </li><li><pre> <code class="hljs swift">rm -rf /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/cache/yum</code> </pre> </li></ul><br><h2>  Configuration du logiciel auxiliaire </h2><br><p>  Il est temps de configurer PostgreSQL et de cr√©er des bases de donn√©es pour nos futurs services.  Ces param√®tres sont pertinents pour CDH version 5.12.1, lors de l'installation d'autres versions de la distribution, il est recommand√© de lire la section "Cloudera Manager et Managed Service Datastores" sur le site officiel. </p><br><p>  Pour commencer, initialisons la base de donn√©es: </p><br><pre> <code class="hljs powershell">postgresql<span class="hljs-literal"><span class="hljs-literal">-setup</span></span> initdb</code> </pre> <br>  Maintenant, nous configurons l'interaction r√©seau avec la base de donn√©es.  Dans le fichier <b>/var/lib/pgsql/data/pg_hba.conf</b> de la section des connexions locales IPv4, remplacez la m√©thode de l'adresse 127.0.0.1/32 par la m√©thode md5, ajoutez la m√©thode d'approbation et ajoutez le sous-r√©seau de cluster avec la m√©thode d'approbation : <br><br><pre> <code class="hljs pgsql">vi /var/lib/pgsql/data/pg_hba.conf pg_hba.conf: <span class="hljs-comment"><span class="hljs-comment">----------------------------------------------------------------------- # TYPE DATABASE USER ADDRESS METHOD # "local" is for Unix domain socket connections only local all all peer # IPv4 local connections: host all all 127.0.0.1/32 md5 host all all 127.0.0.1/32 trust host all all &lt;cluster_subnet&gt; trust -----------------------------------------------------------------------</span></span></code> </pre> <br><p>  Ensuite, nous apporterons quelques ajustements au fichier <b>/var/lib/pgsql/data/postgres.conf</b> (je ne donnerai que les lignes qui doivent √™tre modifi√©es ou v√©rifi√©es pour la conformit√©: <br><br></p><pre> <code class="hljs cs">vi /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/lib/pgsql/data/postgres.conf postgres.conf: ----------------------------------------------------------------------- listen_addresses = <span class="hljs-string"><span class="hljs-string">'*'</span></span> max_connections = <span class="hljs-number"><span class="hljs-number">100</span></span> shared_buffers = <span class="hljs-number"><span class="hljs-number">256</span></span>MB checkpoint_segments = <span class="hljs-number"><span class="hljs-number">16</span></span> checkpoint_completion_target = <span class="hljs-number"><span class="hljs-number">0.9</span></span> logging_collector = <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> log_filename = <span class="hljs-string"><span class="hljs-string">'postgresql-%a.log'</span></span> log_truncate_on_rotation = <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> log_rotation_age = <span class="hljs-number"><span class="hljs-number">1</span></span>d log_rotation_size = <span class="hljs-number"><span class="hljs-number">0</span></span> log_timezone = <span class="hljs-string"><span class="hljs-string">'W-SU'</span></span> datestyle = <span class="hljs-string"><span class="hljs-string">'iso, mdy'</span></span> timezone = <span class="hljs-string"><span class="hljs-string">'W-SU'</span></span> lc_messages = <span class="hljs-string"><span class="hljs-string">'en_US.UTF-8'</span></span> lc_monetary = <span class="hljs-string"><span class="hljs-string">'en_US.UTF-8'</span></span> lc_numeric = <span class="hljs-string"><span class="hljs-string">'en_US.UTF-8'</span></span> lc_time = <span class="hljs-string"><span class="hljs-string">'en_US.UTF-8'</span></span> default_text_search_config = <span class="hljs-string"><span class="hljs-string">'pg_catalog.english'</span></span> -----------------------------------------------------------------------</code> </pre> <br><p>  Une fois la configuration termin√©e, vous devez cr√©er des bases de donn√©es (pour ceux qui sont plus proches de la terminologie Oracle - sch√©mas) pour les services que nous installerons.  Dans notre cas, les services suivants ont √©t√© install√©s: Cloudera Management Service, HDFS, Hive, Hue, Impala, Oozie, Yarn et ZooKeeper.  Parmi ceux-ci, Hive, Hue et Oozie ont besoin de bases de donn√©es et 2 bases sont n√©cessaires pour les besoins des services Cloudera - une pour le serveur Cloudera Manager, l'autre pour le gestionnaire de rapports, qui fait partie du service de gestion Cloudera.  Lancez PostgreSQL et ajoutez-le au chargement automatique: <br><br></p><pre> <code class="hljs pgsql">systemctl <span class="hljs-keyword"><span class="hljs-keyword">start</span></span> postgresql systemctl <span class="hljs-keyword"><span class="hljs-keyword">enable</span></span> postgresql</code> </pre> <br><p>  Nous pouvons maintenant nous connecter et cr√©er les bases de donn√©es n√©cessaires: <br><br></p><pre> <code class="hljs pgsql">sudo -u postgres psql &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROLE</span></span> scm <span class="hljs-keyword"><span class="hljs-keyword">LOGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;password&gt;'</span></span>; &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> scm <span class="hljs-keyword"><span class="hljs-keyword">OWNER</span></span> scm <span class="hljs-keyword"><span class="hljs-keyword">ENCODING</span></span> <span class="hljs-string"><span class="hljs-string">'UTF8'</span></span>; #    Cloudera Manager &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROLE</span></span> rman <span class="hljs-keyword"><span class="hljs-keyword">LOGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;password&gt;'</span></span>; &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> rman <span class="hljs-keyword"><span class="hljs-keyword">OWNER</span></span> rman <span class="hljs-keyword"><span class="hljs-keyword">ENCODING</span></span> <span class="hljs-string"><span class="hljs-string">'UTF8'</span></span>; #      &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROLE</span></span> hive <span class="hljs-keyword"><span class="hljs-keyword">LOGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;password&gt;'</span></span>; &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> metastore <span class="hljs-keyword"><span class="hljs-keyword">OWNER</span></span> hive <span class="hljs-keyword"><span class="hljs-keyword">ENCODING</span></span> <span class="hljs-string"><span class="hljs-string">'UTF8'</span></span>; #    Hive Metastore &gt; <span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> metastore <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> standard_conforming_strings = <span class="hljs-keyword"><span class="hljs-keyword">off</span></span>; #   PostgreSQL   <span class="hljs-number"><span class="hljs-number">8.2</span></span><span class="hljs-number"><span class="hljs-number">.23</span></span> &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROLE</span></span> hue_u <span class="hljs-keyword"><span class="hljs-keyword">LOGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;password&gt;'</span></span>; &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> hue_d <span class="hljs-keyword"><span class="hljs-keyword">OWNER</span></span> hue_u <span class="hljs-keyword"><span class="hljs-keyword">ENCODING</span></span> <span class="hljs-string"><span class="hljs-string">'UTF8'</span></span>; #    Hue &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROLE</span></span> oozie <span class="hljs-keyword"><span class="hljs-keyword">LOGIN</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ENCRYPTED</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;password&gt;'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOSUPERUSER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">INHERIT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">CREATEDB</span></span> <span class="hljs-keyword"><span class="hljs-keyword">NOCREATEROLE</span></span>; &gt; <span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> "oozie" <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> OWNER = oozie ENCODING = <span class="hljs-string"><span class="hljs-string">'UTF8'</span></span> TABLESPACE = pg_default LC_COLLATE = <span class="hljs-string"><span class="hljs-string">'en_US.UTF-8'</span></span> LC_CTYPE = <span class="hljs-string"><span class="hljs-string">'en_US.UTF-8'</span></span> CONNECTION LIMIT = <span class="hljs-number"><span class="hljs-number">-1</span></span>; #    Oozie    : &gt; \q</code> </pre> <br><p>  Pour les autres services, les bases de donn√©es sont cr√©√©es de la m√™me mani√®re. </p><br><p>  N'oubliez pas d'ex√©cuter le script pour pr√©parer la base de donn√©es du serveur Cloudera Manager, en lui passant les donn√©es d'entr√©e pour vous connecter √† la base de donn√©es cr√©√©e pour lui: <br><br></p><pre> <code class="hljs pgsql">. /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/cmf/<span class="hljs-keyword"><span class="hljs-keyword">schema</span></span>/scm_prepare_database.sh postgresql scm scm &lt;<span class="hljs-keyword"><span class="hljs-keyword">password</span></span>&gt;</code> </pre> <br><h2>  Cr√©ation d'un r√©f√©rentiel avec des fichiers CDH </h2><br><p>  Cloudera propose 2 fa√ßons d'installer CDH - √† l'aide de packages et √† l'aide de parcelles.  La premi√®re option consiste √† t√©l√©charger un ensemble de packages avec les services des versions requises et leur installation ult√©rieure.  Cette m√©thode offre une grande flexibilit√© dans la configuration du cluster, mais Cloudera ne garantit pas leur compatibilit√©.  Par cons√©quent, la deuxi√®me version de l'installation utilisant des parsels est plus populaire - des ensembles pr√©form√©s de packages de versions compatibles.  Les derni√®res versions sont disponibles sur le lien suivant: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">archive.cloudera.com/cdh5/parcels/latest</a> .  Plus t√¥t, on peut trouver un niveau sup√©rieur.  En plus du parsel de CDH, vous devez t√©l√©charger manifest.json √† partir du m√™me r√©pertoire de r√©f√©rentiel. </p><br><p>  Pour utiliser les fonctionnalit√©s d√©velopp√©es, nous avions √©galement besoin de Spark 2.2, qui n'est pas inclus dans le colis CDH (la premi√®re version de ce service y est disponible).  Pour l'installer, vous devez t√©l√©charger un colis s√©par√© avec ce service et le manifest.json correspondant, √©galement disponible dans <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">l'archive Cloudera</a> . </p><br><p>  Apr√®s avoir charg√© les parsels et manifest.json, vous devez les transf√©rer dans les dossiers appropri√©s de notre r√©f√©rentiel.  Cr√©ez des dossiers s√©par√©s pour les fichiers CDH et Spark: <br><br></p><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /var/www/html/parcels <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> cdh spark</code> </pre> <br><p>  Transf√©rez les fichiers parsels et manifest.json dans les dossiers cr√©√©s.  Pour les rendre disponibles pour l'installation sur le r√©seau, nous √©mettons le dossier d'autorisations d'acc√®s correspondant avec des parsels: <br><br></p><pre> <code class="hljs swift">chmod -<span class="hljs-type"><span class="hljs-type">R</span></span> ugo+rX /<span class="hljs-keyword"><span class="hljs-keyword">var</span></span>/www/html/parcels</code> </pre> <br><p>  Vous pouvez commencer √† installer CDH, dont je parlerai dans le prochain post. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr413149/">https://habr.com/ru/post/fr413149/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr413139/index.html">Voitures √©lectriques: la r√©volution arrive</a></li>
<li><a href="../fr413141/index.html">Classer de grandes quantit√©s de donn√©es sur Apache Spark √† l'aide de mod√®les d'apprentissage automatique arbitraires</a></li>
<li><a href="../fr413143/index.html">Bobby Urban Lite: le nouveau sac √† dos urbain de XD Design</a></li>
<li><a href="../fr413145/index.html">Un analyste aide les entreprises √† gagner de l'argent</a></li>
<li><a href="../fr413147/index.html">Est-il possible d'utiliser Tibero au lieu d'Oracle. Et est-ce n√©cessaire</a></li>
<li><a href="../fr413151/index.html">La NSA a propos√© une norme de chiffrement pour les appareils IoT, mais l'ISO l'a rejet√©e</a></li>
<li><a href="../fr413155/index.html">Google Shell Style Guide (en russe)</a></li>
<li><a href="../fr413157/index.html">√Ä propos du stockage des mots de passe dans la base de donn√©es</a></li>
<li><a href="../fr413159/index.html">Interface sombre ou claire? Conseils pour choisir un jeu de couleurs pour votre interface</a></li>
<li><a href="../fr413161/index.html">Git poem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>