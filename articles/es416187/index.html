<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🐮 🎨 🚣🏻 Después de la reunión "Nuevas características de PostgreSQL 11" (Parte 2) 😈 💊 💇🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la primera parte, hablamos sobre las principales innovaciones y cambios en PostgreSQL 11. Esta vez, discutiremos con más detalle algunos puntos en ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Después de la reunión "Nuevas características de PostgreSQL 11" (Parte 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/416187/">  En la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primera parte,</a> hablamos sobre las principales innovaciones y cambios en PostgreSQL 11. Esta vez, discutiremos con más detalle algunos puntos en el formato de preguntas / respuestas que surgieron en la reunión. <br><a name="habracut"></a><br><h4>  ¿Cuál es la mejor manera de transferir una gran matriz de datos como un conjunto de parámetros de entrada para un procedimiento almacenado en PL / pgSQL? </h4><br>  La forma más conveniente es crear una tabla temporal, hacer copias de los datos allí y luego usarla en el procedimiento. <br><br><h4>  Motores externos (zheap) y el desarrollo de PostgreSQL en memoria </h4><br>  No todas las cargas de trabajo son adecuadas para un modelo con almacenamiento de versiones antiguas de registros en la tabla misma.  En todos los demás subd (versionionniki) se almacenan en un deshacer registro.  Puede discutir sobre la viabilidad, pero la conclusión es que necesita almacenar registros antiguos en algún lugar.  Si tienen una vida útil corta y alguien rara vez se dirige a ellos, entonces el almacenamiento en la tabla en sí es perjudicial.  El motor zheap externo PostgreSQL es un intento de EnterpriseDB de crear un motor de tabla para PostgreSQL con registro de deshacer.  Funciona, aunque todavía hay algo que mejorar. <br><br>  Quien trabaja con la Sra.  SQL en el modo de nivel de aislamiento SNAPSHOT, sabe que tiene tempdb, donde coloca las versiones antiguas, y está equipado con una aspiradora completamente al vacío para limpiar tempdb.  Por otro lado, la comunidad solicita crear tablas en memoria en PostgreSQL.  Esto se puede hacer con bastante facilidad: tmpfs, y eso es todo.  En PostgreSQL Pro incluso lanzó la primera versión piloto, puedes probar. <br><br>  Lo que PostgreSQL nunca tuvo fue motores enchufables.  Había índices conectables que usaban un WAL común.  PostgreSQL tiene mucho que enchufar y poco para reemplazar sobre la marcha.  Por ejemplo, el ejecutor no está deshabilitado, pero ya puede usar nodos personalizados en él que usted mismo programa.  Los optimizadores en PostgreSQL son completamente conectables.  Puede escribir el suyo y usar PostgreSQL como intérprete de sus consultas.  El analizador SQL no se puede conectar. <br><br>  Los motores quieren conectarse en tres direcciones: <br><br><ul><li>  motor con registro de deshacer </li><li>  en memoria </li><li> almacenamiento de columna para consultas OLAP </li></ul><br>  Postgres Pro está en conversaciones con EnterpriseDB sobre cómo hacer una API para conectar todo esto. <br><br><h4>  Sobre clave extranjera </h4><br>  La clave externa dentro de PostgreSQL se implementa mediante disparadores.  Puede escribir su activador que implementará cualquier tipo de funcionalidad.  Todas las restricciones posibles deben hacerse en el disparador.  No es particularmente necesario mantener la lógica en los desencadenantes, pero verifique todo, es necesario. <br><br><h4>  ¿Postgres Pro planea hacer SaaS o PaaS? </h4><br>  Postgres Pro planea hacer que PostgreSQL esté más optimizado para la nube, en particular, para implementar cambios dinámicos en los buffers de recursos compartidos, para reducir la cantidad de parámetros que requieren un reinicio de PostgreSQL.  No van a construir la nube ellos mismos. <br><br><h4>  ¿Cómo configuro una unidad para que la indexación paralela funcione más rápido?  ¿Qué es mejor, múltiples HDD o un SSD? </h4><br>  Mejor unas pocas unidades SSD.  Cuantas más opciones de paralelización proporcione el hardware, mejor.  Si tiene un disco, memoria insuficiente y un procesador, la paralelización no lo ayudará.  Pero los SSD tienen una peculiaridad: comienzan a disminuir si más del 80% del volumen está ocupado.  Por lo tanto, no olvide ajustar el ajuste, de lo contrario, el límite del 80% llegará a alrededor del 50%. <br><br><h4>  Administración de diccionario y agregar palabras en la búsqueda de texto completo </h4><br>  Si usa hechizo o bola de nieve, simplemente cambie el diccionario de palabras de detención.  El problema es que si agregó una palabra de parada, entonces no tiene sentido indexar.  Esto se puede hacer lentamente.  Una palabra de detención se eliminará de una solicitud y nunca se buscará.  Y si eliminó la palabra de detención, entonces en ninguna parte de la colección no está allí y debe reindexarla.  El problema no está en el diccionario, sino en el hecho de que ya lo ha usado y ha guardado su conocimiento. <br><br>  Además, en muchos casos, puede usar la función poco conocida ts_rewrite, que le permite reemplazar una parte de la solicitud con otra solicitud.  Por ejemplo, cuando el submarino Kursk se ahogó, todos se apresuraron a buscar información al respecto.  Fedor Sigaev en ese momento trabajaba en rambler, y a petición de "Kursk" se dio información sobre la ciudad.  Inmediatamente hicieron una sustitución: en esta palabra, dar información sobre el submarino.  Pero entonces los usuarios comenzaron a maldecir, a quienes les interesaba el pueblo.  No sé si se dieron cuenta o no, pero fue necesario presentar la "ciudad de Kursk".  Tales sustituciones permiten hacer ts_rewrite.  Además, la función se puede utilizar para una transición suave durante el período de cambios del diccionario. <br><br>  Por supuesto, cambiar el analizador y los diccionarios son tareas complejas.  Los idiomas con diferentes alfabetos, como el ruso y el inglés, se llevan bien.  Mucho peor ahora son, digamos, textos francés-inglés.  No está claro a qué idioma se refiere una palabra, que se escribe de la misma manera, pero en un idioma es una palabra de parada, y en otro no.  Postgres Pro está trabajando actualmente en el ajuste de diccionarios para describir configuraciones más complejas. <br><br><h4>  Cubriendo índices y actualización en caliente </h4><br>  Es completamente amigos.  Es cierto que si se actualiza al menos un campo en el índice de cobertura, entonces el índice se comportará como de costumbre, todo será reemplazado. <br><br><h4>  Incapacidad para crear tablas temporales al ejecutar consultas en espera </h4><br>  PostgreSQL no almacena el conocimiento de la tabla en el directorio del sistema, pero hay un parche que transfiere el conocimiento al directorio del sistema.  Por lo tanto, con este parche puede usar tablas temporales.  Pero luego surge otro problema: no hay transacciones en espera.  Para trabajar con una tabla temporal, deberá usar el doble de la identificación de transacción virtual, que se aplica solo a las tablas temporales, y no a las principales que provienen del asistente.  Y cuando observa un número de 32 bits, serán dos números diferentes. <br><br>  Postgres Pro también tiene un módulo pg_variables, que también funciona en stand by.  Esta no es una tabla temporal, pero se puede representar la funcionalidad necesaria. <br><br><h4>  Implementar índice de clúster </h4><br>  Postgres Pro tuvo varios intentos de implementarlo.  Ahora puede ingresar el índice de la tabla de clúster y la tabla estará en el mismo orden.  Sufrió cómo mantener una tabla en un estado agrupado.  Intentamos diferentes enfoques, pero invariablemente insertarlo en una tabla de este tipo era muy costoso.  Y esto no es interesante para nadie.  Por lo tanto, hasta ahora se ha concluido que es necesario pasar a Tablas organizadas de índice. <br><br><h4>  Factor de escala de autovacío recomendado </h4><br>  Por lo general, se recomienda configurar 1 - 5%.  Pero esto es completamente opcional.  Para tablas pequeñas, en las que, a pesar de los cambios, en promedio, la misma distribución permanece, se puede establecer un valor grande.  Si la tabla es grande y rara vez se repone, pero adecuadamente, con un fuerte cambio en la distribución, tendrá que inventar algo más.  Todo depende de la distribución de sus datos. <br><br><h4>  Sugerencias en consultas complejas </h4><br>  En Oracle, con consultas complejas, debe ayudar periódicamente con sugerencias, porque se producen escaneos completos repentinos.  Hay sugerencias en Postgres Pro, bastante malhumoradas, pero puedes obtenerlas.  Sin embargo, no hay sugerencias en PostgreSQL regular, y es poco probable que aparezcan.  Si tiene sugerencias incorporadas, los usuarios que se enfrentan a un problema del optimizador insertan sugerencias, se calman y no informan ningún problema.  El desarrollo del optimizador se detiene. <br><br>  Por cierto, el optimizador PostgreSQL tiene un problema.  Cuando estima una muestra de una tabla, incluso por una cantidad más o menos razonable, adivina con algún error.  Luego comienza a conectarse, el resultado se conecta a otra cosa, el error se acumula y en el tercer o cuarto nivel PostgreSQL falla mucho. <br><br>  Existe tal configuración: unirse al límite de colapso.  PostgreSQL clasifica JOIN para un uso más eficiente, pero el límite de clasificación predeterminado es 8. Si hay más de 8 JOINs seguidos, el sistema no los ordenará y habrá una dependencia del orden JOIN en la consulta. <br><br>  También hay un optimizador genético con varios parámetros.  Puede habilitar varias configuraciones en una sesión y describir más o menos cómo se debe ejecutar la solicitud.  Usando este orden, con la ayuda de los corchetes puede configurar el cierre de algunas operaciones, el mismo escaneo de segundos.  Otra opción es insertar ciertos parámetros en las funciones.  En cierto sentido, estos también son pistas.  No es muy conveniente, pero al menos algo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416187/">https://habr.com/ru/post/es416187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416171/index.html">Pruebas de IU codificadas de Visual Studio: teoría y práctica de aplicación en nuestra empresa</a></li>
<li><a href="../es416175/index.html">Resultados de la competencia de jóvenes desarrolladores de aplicaciones AR Epson Moverio BT-300</a></li>
<li><a href="../es416177/index.html">Fórmula Tupper e implementación del algoritmo en Python</a></li>
<li><a href="../es416179/index.html">Una puerta que nos saluda por nombre y se abre solo para los empleados del departamento.</a></li>
<li><a href="../es416183/index.html">Prueba de datos: requisitos y niveles</a></li>
<li><a href="../es416189/index.html">El tratamiento de Scrum "mecánico". Parte 3. Trabaja SM</a></li>
<li><a href="../es416191/index.html">Implementación de bajo nivel del árbol de prefijos trie en PHP</a></li>
<li><a href="../es416193/index.html">Cómo los robots pueden trabajar juntos con humanos (y no en su lugar)</a></li>
<li><a href="../es416195/index.html">Dijkstra para tiempo lineal</a></li>
<li><a href="../es416197/index.html">Los motores para el nuevo programa DARPA pasan con éxito las pruebas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>