<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游냝 游꿛 游뚺游낕 Despu칠s de la reuni칩n "Nuevas caracter칤sticas de PostgreSQL 11" (Parte 2) 游땓 游눍 游눊游</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En la primera parte, hablamos sobre las principales innovaciones y cambios en PostgreSQL 11. Esta vez, discutiremos con m치s detalle algunos puntos en ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Despu칠s de la reuni칩n "Nuevas caracter칤sticas de PostgreSQL 11" (Parte 2)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/raiffeisenbank/blog/416187/">  En la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">primera parte,</a> hablamos sobre las principales innovaciones y cambios en PostgreSQL 11. Esta vez, discutiremos con m치s detalle algunos puntos en el formato de preguntas / respuestas que surgieron en la reuni칩n. <br><a name="habracut"></a><br><h4>  쮺u치l es la mejor manera de transferir una gran matriz de datos como un conjunto de par치metros de entrada para un procedimiento almacenado en PL / pgSQL? </h4><br>  La forma m치s conveniente es crear una tabla temporal, hacer copias de los datos all칤 y luego usarla en el procedimiento. <br><br><h4>  Motores externos (zheap) y el desarrollo de PostgreSQL en memoria </h4><br>  No todas las cargas de trabajo son adecuadas para un modelo con almacenamiento de versiones antiguas de registros en la tabla misma.  En todos los dem치s subd (versionionniki) se almacenan en un deshacer registro.  Puede discutir sobre la viabilidad, pero la conclusi칩n es que necesita almacenar registros antiguos en alg칰n lugar.  Si tienen una vida 칰til corta y alguien rara vez se dirige a ellos, entonces el almacenamiento en la tabla en s칤 es perjudicial.  El motor zheap externo PostgreSQL es un intento de EnterpriseDB de crear un motor de tabla para PostgreSQL con registro de deshacer.  Funciona, aunque todav칤a hay algo que mejorar. <br><br>  Quien trabaja con la Sra.  SQL en el modo de nivel de aislamiento SNAPSHOT, sabe que tiene tempdb, donde coloca las versiones antiguas, y est치 equipado con una aspiradora completamente al vac칤o para limpiar tempdb.  Por otro lado, la comunidad solicita crear tablas en memoria en PostgreSQL.  Esto se puede hacer con bastante facilidad: tmpfs, y eso es todo.  En PostgreSQL Pro incluso lanz칩 la primera versi칩n piloto, puedes probar. <br><br>  Lo que PostgreSQL nunca tuvo fue motores enchufables.  Hab칤a 칤ndices conectables que usaban un WAL com칰n.  PostgreSQL tiene mucho que enchufar y poco para reemplazar sobre la marcha.  Por ejemplo, el ejecutor no est치 deshabilitado, pero ya puede usar nodos personalizados en 칠l que usted mismo programa.  Los optimizadores en PostgreSQL son completamente conectables.  Puede escribir el suyo y usar PostgreSQL como int칠rprete de sus consultas.  El analizador SQL no se puede conectar. <br><br>  Los motores quieren conectarse en tres direcciones: <br><br><ul><li>  motor con registro de deshacer </li><li>  en memoria </li><li> almacenamiento de columna para consultas OLAP </li></ul><br>  Postgres Pro est치 en conversaciones con EnterpriseDB sobre c칩mo hacer una API para conectar todo esto. <br><br><h4>  Sobre clave extranjera </h4><br>  La clave externa dentro de PostgreSQL se implementa mediante disparadores.  Puede escribir su activador que implementar치 cualquier tipo de funcionalidad.  Todas las restricciones posibles deben hacerse en el disparador.  No es particularmente necesario mantener la l칩gica en los desencadenantes, pero verifique todo, es necesario. <br><br><h4>  쯇ostgres Pro planea hacer SaaS o PaaS? </h4><br>  Postgres Pro planea hacer que PostgreSQL est칠 m치s optimizado para la nube, en particular, para implementar cambios din치micos en los buffers de recursos compartidos, para reducir la cantidad de par치metros que requieren un reinicio de PostgreSQL.  No van a construir la nube ellos mismos. <br><br><h4>  쮺칩mo configuro una unidad para que la indexaci칩n paralela funcione m치s r치pido?  쯈u칠 es mejor, m칰ltiples HDD o un SSD? </h4><br>  Mejor unas pocas unidades SSD.  Cuantas m치s opciones de paralelizaci칩n proporcione el hardware, mejor.  Si tiene un disco, memoria insuficiente y un procesador, la paralelizaci칩n no lo ayudar치.  Pero los SSD tienen una peculiaridad: comienzan a disminuir si m치s del 80% del volumen est치 ocupado.  Por lo tanto, no olvide ajustar el ajuste, de lo contrario, el l칤mite del 80% llegar치 a alrededor del 50%. <br><br><h4>  Administraci칩n de diccionario y agregar palabras en la b칰squeda de texto completo </h4><br>  Si usa hechizo o bola de nieve, simplemente cambie el diccionario de palabras de detenci칩n.  El problema es que si agreg칩 una palabra de parada, entonces no tiene sentido indexar.  Esto se puede hacer lentamente.  Una palabra de detenci칩n se eliminar치 de una solicitud y nunca se buscar치.  Y si elimin칩 la palabra de detenci칩n, entonces en ninguna parte de la colecci칩n no est치 all칤 y debe reindexarla.  El problema no est치 en el diccionario, sino en el hecho de que ya lo ha usado y ha guardado su conocimiento. <br><br>  Adem치s, en muchos casos, puede usar la funci칩n poco conocida ts_rewrite, que le permite reemplazar una parte de la solicitud con otra solicitud.  Por ejemplo, cuando el submarino Kursk se ahog칩, todos se apresuraron a buscar informaci칩n al respecto.  Fedor Sigaev en ese momento trabajaba en rambler, y a petici칩n de "Kursk" se dio informaci칩n sobre la ciudad.  Inmediatamente hicieron una sustituci칩n: en esta palabra, dar informaci칩n sobre el submarino.  Pero entonces los usuarios comenzaron a maldecir, a quienes les interesaba el pueblo.  No s칠 si se dieron cuenta o no, pero fue necesario presentar la "ciudad de Kursk".  Tales sustituciones permiten hacer ts_rewrite.  Adem치s, la funci칩n se puede utilizar para una transici칩n suave durante el per칤odo de cambios del diccionario. <br><br>  Por supuesto, cambiar el analizador y los diccionarios son tareas complejas.  Los idiomas con diferentes alfabetos, como el ruso y el ingl칠s, se llevan bien.  Mucho peor ahora son, digamos, textos franc칠s-ingl칠s.  No est치 claro a qu칠 idioma se refiere una palabra, que se escribe de la misma manera, pero en un idioma es una palabra de parada, y en otro no.  Postgres Pro est치 trabajando actualmente en el ajuste de diccionarios para describir configuraciones m치s complejas. <br><br><h4>  Cubriendo 칤ndices y actualizaci칩n en caliente </h4><br>  Es completamente amigos.  Es cierto que si se actualiza al menos un campo en el 칤ndice de cobertura, entonces el 칤ndice se comportar치 como de costumbre, todo ser치 reemplazado. <br><br><h4>  Incapacidad para crear tablas temporales al ejecutar consultas en espera </h4><br>  PostgreSQL no almacena el conocimiento de la tabla en el directorio del sistema, pero hay un parche que transfiere el conocimiento al directorio del sistema.  Por lo tanto, con este parche puede usar tablas temporales.  Pero luego surge otro problema: no hay transacciones en espera.  Para trabajar con una tabla temporal, deber치 usar el doble de la identificaci칩n de transacci칩n virtual, que se aplica solo a las tablas temporales, y no a las principales que provienen del asistente.  Y cuando observa un n칰mero de 32 bits, ser치n dos n칰meros diferentes. <br><br>  Postgres Pro tambi칠n tiene un m칩dulo pg_variables, que tambi칠n funciona en stand by.  Esta no es una tabla temporal, pero se puede representar la funcionalidad necesaria. <br><br><h4>  Implementar 칤ndice de cl칰ster </h4><br>  Postgres Pro tuvo varios intentos de implementarlo.  Ahora puede ingresar el 칤ndice de la tabla de cl칰ster y la tabla estar치 en el mismo orden.  Sufri칩 c칩mo mantener una tabla en un estado agrupado.  Intentamos diferentes enfoques, pero invariablemente insertarlo en una tabla de este tipo era muy costoso.  Y esto no es interesante para nadie.  Por lo tanto, hasta ahora se ha concluido que es necesario pasar a Tablas organizadas de 칤ndice. <br><br><h4>  Factor de escala de autovac칤o recomendado </h4><br>  Por lo general, se recomienda configurar 1 - 5%.  Pero esto es completamente opcional.  Para tablas peque침as, en las que, a pesar de los cambios, en promedio, la misma distribuci칩n permanece, se puede establecer un valor grande.  Si la tabla es grande y rara vez se repone, pero adecuadamente, con un fuerte cambio en la distribuci칩n, tendr치 que inventar algo m치s.  Todo depende de la distribuci칩n de sus datos. <br><br><h4>  Sugerencias en consultas complejas </h4><br>  En Oracle, con consultas complejas, debe ayudar peri칩dicamente con sugerencias, porque se producen escaneos completos repentinos.  Hay sugerencias en Postgres Pro, bastante malhumoradas, pero puedes obtenerlas.  Sin embargo, no hay sugerencias en PostgreSQL regular, y es poco probable que aparezcan.  Si tiene sugerencias incorporadas, los usuarios que se enfrentan a un problema del optimizador insertan sugerencias, se calman y no informan ning칰n problema.  El desarrollo del optimizador se detiene. <br><br>  Por cierto, el optimizador PostgreSQL tiene un problema.  Cuando estima una muestra de una tabla, incluso por una cantidad m치s o menos razonable, adivina con alg칰n error.  Luego comienza a conectarse, el resultado se conecta a otra cosa, el error se acumula y en el tercer o cuarto nivel PostgreSQL falla mucho. <br><br>  Existe tal configuraci칩n: unirse al l칤mite de colapso.  PostgreSQL clasifica JOIN para un uso m치s eficiente, pero el l칤mite de clasificaci칩n predeterminado es 8. Si hay m치s de 8 JOINs seguidos, el sistema no los ordenar치 y habr치 una dependencia del orden JOIN en la consulta. <br><br>  Tambi칠n hay un optimizador gen칠tico con varios par치metros.  Puede habilitar varias configuraciones en una sesi칩n y describir m치s o menos c칩mo se debe ejecutar la solicitud.  Usando este orden, con la ayuda de los corchetes puede configurar el cierre de algunas operaciones, el mismo escaneo de segundos.  Otra opci칩n es insertar ciertos par치metros en las funciones.  En cierto sentido, estos tambi칠n son pistas.  No es muy conveniente, pero al menos algo. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es416187/">https://habr.com/ru/post/es416187/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es416171/index.html">Pruebas de IU codificadas de Visual Studio: teor칤a y pr치ctica de aplicaci칩n en nuestra empresa</a></li>
<li><a href="../es416175/index.html">Resultados de la competencia de j칩venes desarrolladores de aplicaciones AR Epson Moverio BT-300</a></li>
<li><a href="../es416177/index.html">F칩rmula Tupper e implementaci칩n del algoritmo en Python</a></li>
<li><a href="../es416179/index.html">Una puerta que nos saluda por nombre y se abre solo para los empleados del departamento.</a></li>
<li><a href="../es416183/index.html">Prueba de datos: requisitos y niveles</a></li>
<li><a href="../es416189/index.html">El tratamiento de Scrum "mec치nico". Parte 3. Trabaja SM</a></li>
<li><a href="../es416191/index.html">Implementaci칩n de bajo nivel del 치rbol de prefijos trie en PHP</a></li>
<li><a href="../es416193/index.html">C칩mo los robots pueden trabajar juntos con humanos (y no en su lugar)</a></li>
<li><a href="../es416195/index.html">Dijkstra para tiempo lineal</a></li>
<li><a href="../es416197/index.html">Los motores para el nuevo programa DARPA pasan con 칠xito las pruebas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>