<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💇🏾 👩🏿‍🤝‍👩🏻 💛 Was ich verstanden habe und auf welche Probleme ich beim Erstellen eines Hacker News-Klons gestoßen bin 💒 🍱 🎐</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Von einem Übersetzer: Dieser Artikel ist eine gekürzte Übersetzung des ursprünglichen Beitrags des Webentwicklers Jesse Horne. Sein Job und gleichzeit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was ich verstanden habe und auf welche Probleme ich beim Erstellen eines Hacker News-Klons gestoßen bin</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/skillbox/blog/425099/"><img src="https://habrastorage.org/getpro/habr/post_images/9d2/2a8/a7c/9d22a8a7c00b7d82fb381a39ec725b64.jpg"><br><br>  Von einem Übersetzer: Dieser Artikel ist eine gekürzte Übersetzung des ursprünglichen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Beitrags des</a> Webentwicklers Jesse Horne.  Sein Job und gleichzeitig sein Hobby ist Webdesign.  Jesse teilt ihre Best Practices und gewonnenen Erkenntnisse oft mit anderen erfahrenen Programmierern und Anfängern. <br><br>  Vor einiger Zeit schrieb ich einen ziemlich umfangreichen Beitrag über Hacker News, der von den Lesern solide Unterstützung erhielt.  Ich machte auf die Fähigkeiten dieser Ressource aufmerksam und beschloss <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">, einen Klon</a> davon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">zu erstellen</a> , um neue Erfahrungen und Kenntnisse zu sammeln. <br><a name="habracut"></a><br><blockquote>  <b>Skillbox empfiehlt:</b> Einen praktischen einjährigen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PHP-Entwicklerkurs</a> . <br>  <b>Wir erinnern Sie daran:</b> <i>Für alle Leser von „Habr“ - ein Rabatt von 10.000 Rubel bei der Anmeldung für einen Skillbox-Kurs mit dem Aktionscode „Habr“.</i> </blockquote><br>  Anfangs schien mir dies ein großes Ziel zu sein, bei dem die Werkzeuge und Taktiken der Arbeit vorgegeben waren.  Zuvor habe ich an kleineren Aufgaben mit verschiedenen Sprachen und Frameworks gearbeitet.  Das einzige, was es nicht gab, war ein großes Projekt, das es ermöglichen würde, all dies zusammenzubringen. <br><br>  Ich habe mich entschlossen, mit der Crystal-Sprache von Grund auf an einem neuen Projekt zu arbeiten.  Dies ist ein praktisches Werkzeug, das auch neu ist.  Es ist schnell, die Prinzipien der Arbeit damit sind ähnlich wie bei Ruby.  Es ist statistisch typisiert und ist Open Source.  Aber nur eine neue Sprache reicht auch nicht aus, deshalb habe ich beschlossen, meine Aufgabe zu verkomplizieren und keinen Klon von Hacker News zu erstellen, sondern eine verbesserte Version dieser Ressource. <br><br>  Übrigens dachte ich, das Erstellen eines regulären Klons wäre eine einfache Aufgabe.  Und die Tatsache, dass dies nicht so ist, wurde mir etwas später klar, als ich mit der Arbeit begann. <br><br>  <b>Fegen Sie nicht zu hoch</b> <br><br>  Ich möchte nicht sagen, dass Sie sich keine ehrgeizigen Ziele setzen sollten.  Versuche die Sterne mit oder ohne Dornen zu erreichen.  Träumen ist nützlich. Der Versuch, das zu erreichen, was ich vorher nicht konnte, ist notwendig, um auf der professionellen Leiter erfolgreich voranzukommen. <br><br>  Ich sagte, dass Sie nicht versuchen sollten, sofort <s>in die Embrasur</s> einer komplexen und großen Aufgabe zu <s>stürzen</s> .  Wählen Sie aus, was Sie zu einem bestimmten Zeitpunkt benötigen, um die Idee umzusetzen.  Außerdem empfehle ich, wichtige Ziele in kleinere zu zerlegen.  Wenn Sie zu viel Code haben, in dem sich viel „Müll“ befindet, versuchen Sie, alles zu vereinfachen und zu strukturieren. <br><br>  Ich kann nicht einmal in Worte fassen, wie wichtig es ist, eine große Aufgabe in mehrere kleinere aufzuteilen. <br><br>  In meinem Fall stieß ich auf verschiedene neue Probleme, auf die ich zuvor noch nicht gestoßen war.  Erstens habe ich Crystal nur einmal bearbeitet - als ich eine Anwendung erstellt habe, deren Komplexität nicht viel höher war als die Komplexität eines Programms wie „Hallo Welt!“.  In der Vergangenheit habe ich Python, Lua, PHP verwendet.  Die neue Sprache war das erste Hindernis für die Umsetzung des Projekts. <br><br>  <b>Der zweite war der Rahmen</b> .  Crystal ist eine neue Sprache und verfügt immer noch nicht über zu viele Frameworks und Dokumentationen.  Ich habe beschlossen, Kemal für meinen Klon zu verwenden.  Ich hatte gehofft, dass das Framework intuitiv ist, da ich genau das in meiner Arbeit getroffen habe.  Aber hier war ein anderer Fall - einzelne Dinge waren nicht leicht zu verstehen.  Zum Beispiel sahen einige Abschnitte des Codes ganz normal aus, funktionierten aber aus irgendeinem Grund nicht.  Aus demselben Grund war es schwierig, die Ursache des Problems im Internet zu finden - der Neuheit der Sprache und des Frameworks selbst.  In einigen Fällen musste ich lange innehalten und mich mit der Ursache des Problems befassen.  Bis jetzt habe ich mir noch nie die Quelle angesehen, zum Beispiel dieselbe Flasche. <br><br>  <b>Das dritte Hindernis</b> sind die spezifischen Ziele, die ich für das Projekt ausgewählt habe.  Um meinen Klon nützlicher zu machen, habe ich beschlossen, eine Reihe von Funktionsmerkmalen hinzuzufügen.  Ich habe früher mit Hacker News gearbeitet, daher weiß ich viel über die Vor- und Nachteile dieser Ressource.  Mir kam der Gedanke, dass es gut wäre, die von GitHub bereitgestellten Analysen zu nutzen.  Mit ihnen konnte ich Statistiken über die Anzahl der Ansichten und Benutzeraktivitäten auf der Site hinzufügen. <br><br>  Daher habe ich beschlossen, dass mein Klon mindestens Ansichten und Klicks für jeden Beitrag anzeigen soll.  Eine solche Funktion wäre wahrscheinlich für Benutzer nützlich, und ihre Implementierung wäre für mich eine gute Praxis.  Aber ich hätte nicht gedacht, dass es so lange dauern würde!  Jetzt ist das Projekt eher ein Proof-of-Concept als eine fertige Ressource.  Zusätzlich zu Ansichten und Klicks habe ich beschlossen, eine Anzeige der angezeigten Kommentare hinzuzufügen, damit sie in Echtzeit angezeigt werden.  Ohne diese zusätzliche Aufgabe wäre das Projekt viel schneller abgeschlossen worden. <br><br>  Jetzt unterstützt das Projekt die Autorisierung, Veröffentlichung und Sortierung von Beiträgen, die Interaktion mit anderen Benutzern durch Kommentieren und Anzeigen von Profilen usw. <br><br>  <b>Das vierte Problem, mit dem</b> ich konfrontiert bin, ist das Chaos.  Migrationen, Modelle, Ansichten, API-Controller, CSS- und JavaScript-Code häufen sich sehr schnell an.  Und das alles wird zu einem Chaos.  Ich habe versucht, das Problem zu lösen, und es ist mir fast gelungen.  Aber teilweise problematische Stellen im Code meines Projekts treten immer noch auf - Sie können es leicht bemerken.  An vielen Stellen wird der Code wiederholt, Endpunkte sind nicht organisiert, die Benennung ist kompliziert, was zu einer Erhöhung der Codemenge und einer großen Anzahl von Abfragen an die Datenbank führt.  Allmählich löse ich dieses Problem. <br><br>  <b>An vielen Stellen wird der Code wiederholt</b> <br><br>  Als das Projekt begann, löste ich Probleme, wie sie auftraten.  Zum Beispiel musste überprüft werden, ob der Benutzer authentifiziert ist - und ich fand eine ursprüngliche Lösung, die je nach Route etwa drei Zeilen dauerte.  Ich hatte es eilig, die gefundenen Lösungen umzusetzen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/faf/a2b/142/fafa2b142f94d3d413c25c8889938de6.jpg"><br><br>  Im Allgemeinen musste ich von Anfang an den Prinzipien von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">DRY</a> folgen.  Wiederhole dich nicht!  Ich musste ein Zwischenprogramm schreiben, das das Notwendige tat, und dann einfach die Lösung anwenden, die in den Fällen gefunden wurde, in denen es erforderlich war.  In Zukunft werde ich mein Projekt nach diesem Prinzip anpassen. <br><br>  <b>Benennung und Organisation von Endpunkten</b> <br><br>  Ich habe die API im Pioneer-Team entwickelt.  Wir haben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">REST verwendet</a> , einen Architekturstil, den ich als neues Mitglied des Pioneer-Teams geschworen habe.  In diesem Team habe ich an den kleinen Elementen einer großen Anwendung gearbeitet.  Aber in meinem neuen Projekt musste ich alles von Grund auf neu schreiben. <br><br>  Eine "RESTful API" muss eine einheitliche Schnittstelle haben, wie das Wiki sagt.  In meinem Projekt habe ich alles so organisiert, dass die Endpunkte in Quelldateien definiert wurden, die nach Funktion oder Zweck aufgerufen wurden.  Die Registrierung und das Verlassen der Anwendung wurden in "auth.cr" registriert.  Der Benutzername wurde in "user.cr" registriert. <br><br>  Zweifellos muss dieser Teil bearbeitet werden.  In Zukunft werde ich alles so organisieren, dass sich die Aktionen auf den Endpunkt "/ user" beziehen, einfach weil dies alles mit "User" zusammenhängt.  Um beispielsweise die Struktur des Projekts zu verbessern, werde ich den Code in bequemere und verwaltbarere Teile mit einer großen Anzahl von Dateien aufteilen.  Ich werde den Ordner "src / user / auth /" erstellen, der die Funktionen Login, Registrierung und User-Exit aus der Anwendung enthält. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/getpro/habr/post_images/857/b21/861/857b21861b663781c60ea6ae8fb29845.png" alt="1_6dy_OCE7_Cjj_Df7_A0s_Aj_3i_Q"></a> <br><br>  <b>Zu viele Anfragen</b> <br><br>  In diesem Projekt versuche ich meine Ideen zu skalieren.  Derzeit werden zu viele Abfragen an die Datenbank gestellt.  Wenn die Anwendung also hundert Benutzer hätte, würde ich einfach verrückt werden und herausfinden, wie viele Datenbankabfragen alle paar Sekunden ausgeführt werden.  Jetzt aktualisiert der Client den Status von Nachrichten alle 10 Minuten.  Darüber hinaus bestimmt der Beitrag zyklisch, ob er vom Benutzer angezeigt wurde.  Bei jeder Überprüfung erfolgt eine Anforderung an die Datenbank, die gemäß dem aktuellen Filter ausgeführt wird.  Und das alles belastet den Server erheblich. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/270/faf/fe9/270faffe964e6f1e60721f8b9a6d4dc2.jpg"><br><br>  Alles, was oben beschrieben wurde, sind nur Beispiele für Probleme, auf die ich ständig stoße.  Ich kann sie nicht vollständig beschreiben.  Jetzt denke ich jedoch darüber nach, meine Probleme und Lösungen zu dokumentieren.  Ich hoffe, dass all dies anderen Programmierern hilft, meine Fehler zu sehen und zu verstehen und ihre eigenen zu vermeiden.  Ich weiß, dass ich die Ausführung von Abfragen beschleunigen kann, wenn ich eine Kombination aus Redis und MySQL oder Postgres verwende.  Aber jetzt werde ich darauf eingehen. <br><br>  Ich hoffe, Ihnen hat der Artikel gefallen und Sie konnten etwas Nützliches für sich selbst lernen. <br><br><blockquote>  <b>Skillbox empfiehlt:</b> <br><br><ul><li>  Online-Kurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Beruf Frontend-Entwickler</a> . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"</a> </li><li>  Online-Bildungskurs <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Beruf eines Webentwicklers".</a> </li><li>  Praktikum <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"Mobile Developer PRO"</a> . </li></ul></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425099/">https://habr.com/ru/post/de425099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425087/index.html">Openspace Agility: Einführung von Agile im gesamten Unternehmen (jetzt mit Führung!)</a></li>
<li><a href="../de425089/index.html">IT in der Tierwelt: Ant Food Search und TCP / IP</a></li>
<li><a href="../de425091/index.html">Was zum Teufel ist mit den Beliebtheitswerten von Programmiersprachen los?</a></li>
<li><a href="../de425093/index.html">IoT-Lösungen für Wohnungsbau und kommunale Dienste: Was werden intelligente Zähler sein und wer sollte sie warten?</a></li>
<li><a href="../de425095/index.html">Offenes Webinar "Spiel" 2048 "</a></li>
<li><a href="../de425101/index.html">Docker + Laravel = ❤</a></li>
<li><a href="../de425103/index.html">Stoppen Sie Google Predators bei der Verfolgung Ihrer Kinder</a></li>
<li><a href="../de425105/index.html">Intel ME Manufacturing Mode - eine versteckte Bedrohung oder was steckt hinter der Sicherheitsanfälligkeit CVE-2018-4251 im MacBook?</a></li>
<li><a href="../de425107/index.html">Fintech Digest: Probleme der Biometrie auf Mobilgeräten, Leasing von Samsung-Handys, Wertpapiere in der Blockchain</a></li>
<li><a href="../de425109/index.html">Das Buch „Java in der Cloud. Frühlingsstiefel, Frühlingswolke, Wolkengießerei »</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>