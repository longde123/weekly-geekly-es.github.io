<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌲 👹 🕸️ 390k. Websites mit geöffnetem .git-Ordner 🦐 ♐️ 🥊</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im Juli beschloss der Sicherheitsforscher Vladimir Smitka, das Internet auf offene .git Ordner zu überprüfen, nachdem kürzlich ein ähnliches Audit für...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>390k. Websites mit geöffnetem .git-Ordner</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/422725/"><p> Im Juli beschloss der Sicherheitsforscher Vladimir Smitka, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das Internet</a> auf offene <code>.git</code> Ordner zu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">überprüfen,</a> nachdem kürzlich ein ähnliches Audit für tschechische und slowakische Internetdomains durchgeführt worden war. </p><br><p><img src="https://habrastorage.org/webt/n2/8e/z-/n28ez-yrtekgvoihoembcicn4uc.png" alt="Leck"></p><br><p>  Wie das Sprichwort sagt: "Es ist nie passiert, und hier ist es wieder."  Ich möchte Sie daran erinnern, dass vor 9 Jahren <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">genau das gleiche</a> mit dem russischen Segment des Internets zu <code>.svn</code> das vom offenen <code>.svn</code> Syndrom betroffen war.  Das Folgende sind die Ergebnisse der sorgfältigen Arbeit eines tschechischen Forschers, Werkzeuge und Methoden. </p><a name="habracut"></a><br><h1 id="prichiny-nalichiya-uyazvimosti">  Gründe für die Sicherheitslücke </h1><br><p>  Ein Angreifer kann aus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem</a> <code>.git</code> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verzeichnis</a> viele wichtige Informationen für die Sicherheit der Site <code>.git</code> .  So sieht ein typischer Projektbaum aus. </p><br><pre> <code class="diff hljs">├── HEAD ├── branches ├── config ├── description ├── hooks │ ├── pre-commit.sample │ ├── pre-push.sample │ └── ... ├── info │ └── exclude ├── objects │ ├── info │ └── pack └── refs ├── heads └── tags</code> </pre> <br><p>  Dort können Kennwörter und Zugriffsschlüssel für verschiedene APIs, Datenbanken und Cloud-Dienste gespeichert werden. </p><br><p>  Wie es sein sollte, <code>.git</code> ein Versuch, den Ordner <code>.git</code> zu öffnen, häufig einen HTTP 403-Fehler aus. Der Grund ist jedoch nur das Fehlen von <code>index.html / index.php</code> und die Rechte zum automatischen Indizieren des Ordners, solange <strong>einzelne Dateien noch verfügbar sind</strong> .  Um sicherzustellen, dass die Site nicht anfällig ist, sollten Sie die Seite <strong><code>/.git/HEAD</code></strong> öffnen. </p><br><p>  Diese Datei enthält einen Link zum aktuellen Projektzweig. </p><br><pre> <code class="hljs cs">$ cat .git/HEAD <span class="hljs-keyword"><span class="hljs-keyword">ref</span></span>: refs/heads/master</code> </pre> <br><p>  Selbst wenn die automatische Indizierung von Verzeichnissen deaktiviert ist, können <strong>Sie den gesamten</strong> <code>.git</code> <strong>Ordner problemlos wiederherstellen, indem Sie</strong> einzelne Dateien herunterladen und Abhängigkeiten vom Prozessor für reguläre Ausdrücke ermitteln, da die <code>.git</code> Struktur klar definiert ist.  Es gibt auch ein spezielles Tool - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitTools</a> , das automatisch alle erforderlichen Aktionen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ausführt</a> . </p><br><h1 id="sredstva-proizvodstva">  Produktionsmittel </h1><br><p>  Trotz der Komplexität und Ehrgeiz der Aufgabe waren die Kosten in Bezug auf Geld bescheiden.  Für alles, für alles, brauchte es 250 US-Dollar. </p><br><h2 id="servera">  Server </h2><br><p>  Smithka mietete für das Projekt 18 VPS und 4 physische Server.  Ihm zufolge fiel seine Wahl nicht auf AWS, da die vollen Kosten des Dienstes unter Berücksichtigung des erwarteten gigantischen Verkehrsaufkommens, des erheblichen Speicherplatzes und der hohen CPU-Auslastung nicht einfach berechnet werden konnten.  Der Preis für gemietete VPS wurde im Voraus bekannt gegeben. </p><br><h2 id="spisok-domenov">  Liste der Domains </h2><br><p>  Die Liste basiert auf den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Textprotokollen</a> des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">OpenData Rapid7-</a> Projekts im <code>JSON</code> . </p><br><div class="spoiler">  <b class="spoiler_title">DNS-Datenbankschema weiterleiten</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"$id"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://opendata.rapid7.com/sonar.fdns_v2/"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"definitions"</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">"$schema"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://json-schema.org/draft-07/schema#"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"additionalProperties"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"timestamp"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/properties/timestamp"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The time when this response was received in seconds since the epoch"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/properties/name"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The record name"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/properties/type"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The record type"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"value"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"$id"</span></span>: <span class="hljs-string"><span class="hljs-string">"/properties/value"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"The response received for a record of the given name and type"</span></span> } } }</code> </pre> </div></div><br><p>  Nach einigen Filtern von TLDs und Domänen der zweiten Ebene hatte die Liste immer noch <strong>über 230 Millionen Einträge</strong> . </p><br><p>  Als nächstes wurde die Datenbank in Blöcke von 2 Millionen Datensätzen aufgeteilt und die Last wurde unter Verwendung einer PHP-Anwendung auf verschiedene Server verteilt. </p><br><h2 id="soft">  Software </h2><br><p>  Python hing an den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://aio">asynchronen asynchronen</a> Kommunikationsbibliotheken mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://aio">aiohttp</a> als <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://aio">Arbeitstier</a> .  Ein Versuch, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Requests</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Urllib3</a> für diese Zwecke zu verwenden, war erfolglos. Ersteres war möglicherweise geeignet, aber der Forscher verstand die Zeitüberschreitungen in der Dokumentation nicht.  Der zweite hat die Domain-Umleitung nicht bewältigt und hat daher den Speicher auf den Servern ziemlich bald erschöpft. </p><br><p>  Um die Plattform und das Profil anfälliger Websites zu identifizieren, verwendete Smitha das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">WAD-</a> Dienstprogramm, das auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wappalyzer-</a> Datenbank basiert - eine Erweiterung für den Webbrowser, mit der Sie die auf der Seite verwendeten Technologien ermitteln können. </p><br><p>  Einfache Befehlszeilenprogramme wie <code>GNU Parallels</code> wurden ebenfalls verwendet, um die Ausführungszeit des Handlers zu beschleunigen und zu verhindern, dass das Skript aufgrund eines Einfrierens angehalten wird. </p><br><pre> <code class="hljs powershell">cat sites.txt | parallel -<span class="hljs-literal"><span class="hljs-literal">-bar</span></span> -<span class="hljs-literal"><span class="hljs-literal">-tmpdir</span></span> ./wad -<span class="hljs-literal"><span class="hljs-literal">-files</span></span> wad <span class="hljs-literal"><span class="hljs-literal">-u</span></span> {} <span class="hljs-operator"><span class="hljs-operator">-f</span></span> csv</code> </pre> <br><h1 id="rezultaty">  Ergebnisse </h1><br><p>  Der Scan dauerte 2 Wochen, als Ergebnis der Forscher: </p><br><ul><li>  entdeckte 390.000 gefährdete Websites; </li><li>  290 Tausend E-Mail-Adressen gesammelt; </li><li>  90.000 Empfänger über die gefundene Sicherheitsanfälligkeit informiert. </li></ul><br><p>  Als Antwort auf seine Bemühungen erhielt Smithka: </p><br><ul><li>  18 Tausend Fehler bei der Nachrichtenübermittlung; <br><ul><li>  etwa 2000 Dankesbriefe; </li><li>  30 Fehlalarme mit Honeypot-Systemen; </li><li>  1 Drohung, die kanadische Polizei anzurufen; </li></ul></li></ul><br><p><img src="https://habrastorage.org/webt/i9/m8/ur/i9m8urwuwnqdxyctjkf7wwzuyyu.png" alt="Plattform"></p><br><p>  Die beliebteste Programmiersprache war <strong>PHP</strong> .  Wenn Sie das Ergebnis jedoch auf den relativen Anteil eines bestimmten PL normalisieren, weicht PHP dem Vorsprung von Python und Node.js.  Es ist jedoch nicht klar, wie zuverlässig solche Statistiken zur Bestimmung des Marktanteils einer bestimmten Programmiersprache sein können. </p><br><p>  <strong>Apache</strong> steht ganz oben auf der Liste der Beliebtheit von Webservern, wobei Nginx an zweiter Stelle steht und der chinesische Klon Nginx <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Tengine</a> plötzlich an dritter Stelle steht. </p><br><p>  Das beliebteste Betriebssystem war <strong>Ubuntu</strong> , dann Debian und CentOS auf dem dritten Platz. </p><br><p><img src="https://habrastorage.org/webt/0m/0_/c6/0m0_c6twa-m7jul3thwbrsyxyjm.png" alt="Betriebssystem"></p><br><p>  Die CMS-Nominierung stellte sich fast als Einzelschauspieler heraus, und dieser Schauspieler ist <strong>WordPress</strong> mit 85% aller gefundenen Plattformen. </p><br><h1 id="chto-zhe-dalshe">  Was kommt als nächstes? </h1><br><p>  Das Reparieren einer Sicherheitsanfälligkeit ist einfach. </p><br><h2 id="htaccess">  .htaccess </h2><br><pre> <code class="hljs apache"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteRule</span></span></span></span> <span class="hljs-string"><span class="hljs-string">"(^|/)\.(?!well-known\/)"</span></span> -<span class="hljs-meta"><span class="hljs-meta"> [F]</span></span></code> </pre> <br><h2 id="nginx">  .nginx </h2><br><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span> <span class="hljs-regexp"><span class="hljs-regexp">~ /\.(?!well-known\/)</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">deny</span></span> all; }</code> </pre> <br><h2 id="apache22conf">  apache22.conf </h2><br><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;Directory ~ "/\.(?!well-known\/)"&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Order</span></span></span></span> deny,allow Deny from <span class="hljs-literal"><span class="hljs-literal">all</span></span> &lt;/Directory&gt;</code> </pre> <br><h2 id="apache24conf">  apache24.conf </h2><br><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;Directory ~ "/\.(?!well-known\/)"&gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">Require</span></span> <span class="hljs-literal"><span class="hljs-literal">all</span></span> denied &lt;/Directory&gt;</code> </pre> <br><h2 id="caddyfile">  Caddyfile </h2><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">status</span></span> <span class="hljs-number"><span class="hljs-number">403</span></span> /blockdot rewrite { <span class="hljs-attribute"><span class="hljs-attribute">r</span></span> /\.(?!well-known\/) to /blockdot }</code> </pre> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de422725/">https://habr.com/ru/post/de422725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de422715/index.html">Nichtdiskriminierung ist der Kernwert von Open Source</a></li>
<li><a href="../de422717/index.html">Entwicklung eines Chat-Bots mit einer bestimmten Persönlichkeit. Vortrag in Yandex</a></li>
<li><a href="../de422719/index.html">Angreifer haben Tausende von MikroTik-Routern kompromittiert, um ein Botnetz zu erstellen</a></li>
<li><a href="../de422721/index.html">KivyMD - das Leben geht weiter</a></li>
<li><a href="../de422723/index.html">GAN lehrte, Gesichter mit realistischer Textur und Geometrie zu erstellen</a></li>
<li><a href="../de422729/index.html">Wie kann ein Cloud-Anbieter Softwarelizenzen verwalten und welche Blockchain-Lösungen können hier bereitgestellt werden?</a></li>
<li><a href="../de422731/index.html">DEFCON 17. 400.000 Passwörter hacken oder einem Mitbewohner erklären, warum die Stromrechnung gestiegen ist. Teil 1</a></li>
<li><a href="../de422735/index.html">DEFCON 17. 400.000 Passwörter hacken oder einem Mitbewohner erklären, warum die Stromrechnung gestiegen ist. Teil 2</a></li>
<li><a href="../de422737/index.html">Antiquitäten: Audiokassetten, die wir nicht verloren haben</a></li>
<li><a href="../de422739/index.html">Wind- und Solarkraftwerke in der Sahara werden dazu beitragen, das Klima in der Wüste zu verbessern</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>