<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüöí ‚ôãÔ∏è ü§† Projet d'impl√©mentation de l'authentification unique SAP üçñ üôÖüèø ‚õπüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La fin de l'ann√©e, tout le monde fait lentement le point. 


 Pour moi, cette ann√©e a √©t√© marqu√©e par le projet d'impl√©mentation de l'authentification...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Projet d'impl√©mentation de l'authentification unique SAP</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434404/"><p>  La fin de l'ann√©e, tout le monde fait lentement le point. </p><br><p> Pour moi, cette ann√©e a √©t√© marqu√©e par le projet d'impl√©mentation de l'authentification unique (SSO) entre SAP et Windows.  Dans cet article, je parlerai de l'exp√©rience de la mise en ≈ìuvre et de la gestion de projet, des pi√®ges, des constatations et des conclusions. </p><br><p><img src="https://habrastorage.org/webt/cn/to/6k/cnto6kpsemohl4qre396cg74uhs.jpeg"></p><br><p>  L'entreprise est une grande entreprise de transport en Belgique, combinant m√©tro, tramway et bus.  Il y a plus de 10 000 employ√©s, dont pr√®s de 2 000 sont des backoffices, utilisant de nombreux outils: site web d'entreprise, courrier, service applicatif, sharepoint, archiviste et, bien s√ªr, SAP. </p><br><p>  SAP est partout: de la comptabilit√© et des RH √† l'enregistrement des mouvements des unit√©s de transport, la documentation des accidents, l'analyse, l'approvisionnement, l'entreposage, etc. </p><br><p>  <strong>Probl√®me:</strong> </p><br><ul><li>  L'utilisateur SAP pour PC est une application distincte pour laquelle vous avez besoin de votre mot de passe pour entrer </li><li>  Vous devez d'abord demander un mot de passe, puis n'oubliez pas.  Le support technique est oblig√© de recevoir des appels pour cr√©er et modifier des mots de passe. </li><li>  Du point de vue de l'utilisateur, un mot de passe suppl√©mentaire est un probl√®me suppl√©mentaire.  Les gens stockent des mots de passe sur papier ou les rendent trop simples.  La s√©curit√© crie au sujet des violations flagrantes. </li><li>  La configuration minimale requise pour un mot de passe pour un PC ne correspond pas aux param√®tres de mot de passe dans SAP.  Si vous les amenez √† un d√©nominateur commun, il est pr√©f√©rable d'impl√©menter imm√©diatement SSO. </li></ul><br><p>  <strong>Objectif:</strong> impl√©menter un SSO entre Windows et SAP, afin que lors de la connexion √† votre compte PC, l'utilisateur puisse se connecter √† SAP sans entrer de mot de passe. </p><br><p>  Si vous ne traitez pas avec SAP, cet article vous int√©ressera du point de vue de la gestion de projet, car les sapeurs de ces d√©tails vous seront donn√©s (entre parenth√®ses). </p><br><p>  Sous la coupe: </p><br><ol><li>  Port√©e <br>  1.1 Port√©e des personnes <br>  1.2 Syst√®mes de port√©e </li><li>  Composants <br>  2.1 Modification des param√®tres syst√®me <br>  2.2 Windows Active Directory (AD) <br>  2.3 SAP Secure Login Client (SLC) <br>  2.4 Lier un utilisateur SAP √† son AD <br>  2.5 Modification du fichier SAP logon.ini </li><li>  Test </li><li>  SNC est un trou de s√©curit√© </li><li>  Travail d'√©quipe </li><li>  Information commerciale </li><li>  Difficult√©s de traduction </li><li>  R√©sum√© et conclusions </li></ol><a name="habracut"></a><br><h1 id="vvedenie">  Pr√©sentation </h1><br><p>  √Ä l'avenir, si vous n'√™tes pas impatient de remplir des c√¥nes standard, voici une liste de questions que vous devriez clarifier par vous-m√™me au tout d√©but du projet: </p><br><ul><li>  <strong>Port√©e du projet</strong> (syst√®mes, utilisateurs - dans quel ordre mettons-nous en ≈ìuvre, o√π est la priorit√© et ce qui peut √™tre jet√© en cas de probl√®me, quels utilisateurs devraient avoir acc√®s, etc.) </li><li>  <strong>Les principaux services concern√©s par le projet</strong> (M√™me si le projet est tangentiel, il est toujours important que tout le monde soit inform√© √† l'avance) </li><li>  <strong>Vos pouvoirs</strong> (il n'est pas tr√®s facile de s'enfuir ici - dans une entreprise europ√©enne, tout est bas√© sur le consentement et le d√©sir volontaire d'aider. Si le minist√®re dit qu'il n'a pas de ressources, alors il est presque impossible d'appuyer et de ¬´forcer¬ª. Mais vous pouvez appeler un consultant externe pour obtenir de l'aide, par exemple) </li><li>  <strong>Calendrier</strong> (pour l'ensemble du projet dans son ensemble et pour des parties sp√©cifiques) </li><li>  <strong>Proc√©dures d'agr√©ment</strong> (r√©glementations bureaucratiques - dans une grande entreprise, ce n'est pas la derni√®re question) </li><li>  <strong>Difficult√©s possibles</strong> (Toutes. Difficult√©s possibles.) </li></ul><br><p>  Nous avons modifi√© l'appartenance du projet √† plusieurs reprises: au d√©part, il s'agissait uniquement du service des autorisations dans SAP et du service des administrateurs (composants de base).  Puis ils ont √©t√© rejoints par le d√©partement traitant des autorisations sous Windows (Active Directory, AD) et le d√©partement de mise en ≈ìuvre des mises √† jour (Packaging), puis le d√©partement des bases de donn√©es et le d√©partement des applications mobiles, etc. </p><br><p>  Un consultant externe a √©t√© invit√© pour le c√¥t√© technique de la question, et le chef de projet (PM) est devenu moi, en tant que personne impliqu√©e dans l'autorisation dans SAP (par cons√©quent, il y aura plus de d√©tails sur l'autorisation dans SAP dans cet article que dans les autres). </p><br><p>  <em>Une pr√©cision importante:</em> tous les acc√®s que nous donnons dans SAP sont personnalis√©s.  Nous n'utilisons pas les r√¥les standard offerts par le syst√®me, mais nous en cr√©ons de nouveaux, par d√©partement, par poste, par fonction.  √Ä ce jour, nous n'avons pas de synchronisation entre les utilisateurs SAP et Windows AD.  Par exemple, si votre utilisateur dispose de droits d'administrateur sur le r√©seau local, cela ne signifie pas qu'il est √©galement administrateur dans SAP. </p><br><h1 id="1-scope">  1. Port√©e </h1><br><h2 id="11-scope-lyudi">  1.1 Port√©e des personnes </h2><br><p>  Les employ√©s de notre entreprise utilisent SAP via une application sur un ordinateur personnel (client l√©ger - SAP Logon GUI), mais pas seulement.  Comment compter les utilisateurs tombant sous distribution? </p><br><p>  Nous avons pris comme base tous ceux qui se connectent quotidiennement via SAP Logon (SAP user type Dialogue) √† partir d'ordinateurs portables.  Dans cette cat√©gorie, l'ensemble du backoffice - personnel administratif, bukhs, Ichars, d√©veloppeurs, testeurs, logistique, etc. </p><br><p>  Exclus: </p><br><ul><li>  ceux qui ont un ordinateur de bureau, pas un ordinateur portable </li><li>  8 000 utilisateurs qui n'ouvrent jamais la connexion SAP, mais utilisent SAP via le site Web et les applications (type d'utilisateur SAP Communication) </li><li>  tous les utilisateurs externes (pas les employ√©s, mais doivent se connecter au syst√®me via VPN) </li></ul><br><h2 id="12-scope-systems">  1.2 Syst√®mes de port√©e </h2><br><p>  Dans notre entreprise, SAP utilise six paysages actifs ( <strong>ECC, BI, SRM, Netweaver, PI, Solution manager</strong> ), sans compter les bacs √† sable.  Chacun d'eux a ses propres <em>DEV</em> , <em>ACC</em> , <em>PRD</em> - c'est-√†-dire  en fait, c'est 6 * 3 = 18 syst√®mes. </p><br><p>  Par vote vocalique, il a √©t√© d√©cid√© de ne prendre que les quatre premiers paysages.  PI et SM sont utilis√©s par un cercle restreint d'administrateurs et n√©cessitent la mise √† jour du syst√®me lui-m√™me (au moins la mise √† jour du composant SAP_BASIS vers la version 740).  Sinon, la transaction <strong>sncwizard n'est</strong> pas prise en charge et cette op√©ration manuelle est trop g√™nante pour 10 √† 20 personnes. </p><br><h1 id="2-komponenty">  2. Composants </h1><br><p>  Les personnes int√©ress√©es par ces d√©tails trouveront des instructions √©tape par √©tape <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sur le site Web SAP</a> , ainsi que les diff√©rentes m√©thodes disponibles (nous avons choisi l' <em>authentification unique bas√©e sur Kerberos</em> , mais ce n'est pas toujours une option √©vidente). </p><br><p>  D'un point de vue tr√®s simplifi√© (le mien), SSO est un add-on dans SAP qui vous permet de vous connecter en utilisant votre compte Windows.  Vous allumez l'ordinateur, entrez le mot de passe et pour vous connecter √† SAP, il vous suffit de double-cliquer. </p><br><p>  Pour que la magie fonctionne, vous avez besoin de 5 composants: </p><br><p><img src="https://habrastorage.org/webt/9k/ui/9t/9kui9tikv_zq_ki7cam_adhkqfa.jpeg"></p><br><h2 id="21-izmenenie-parametrov-sistemy-instances-sap">  2.1 Modification des param√®tres syst√®me (instances SAP) </h2><br><p>  Dans le syst√®me SAP ( <em>ECC</em> , <em>BI</em> , <em>SRM</em> , <em>Netweaver</em> ), vous devez activer le param√®tre <em>snc</em> / enable = 1.  Cela se fait via <em>sncwizard</em> et comprend les <em>√©tapes de</em> pr√©paration, de red√©marrage du syst√®me et d'activation finale. </p><br><p><img src="https://habrastorage.org/webt/pz/yo/ff/pzyofft_tdqezwdvg74bez13ofy.png"></p><br><p>  Nous avons d√©termin√© les param√®tres avant et apr√®s avec l'aide de ces consultants, l'aide d'autres d√©partements et les essais et erreurs.  La chose la plus difficile ici √©tait de red√©marrer le syst√®me. </p><br><p>  Il est toujours difficile de red√©marrer PRD en production, le travail se poursuit 24h / 24.  Et dans une entreprise de transport, cela est doublement plus compliqu√©: le transport passe de cinq heures du matin √† une heure du matin, m√™me le week-end.  Toute difficult√© avec PRD affecte non seulement les employ√©s de l'entreprise, mais la ville enti√®re et des dizaines de milliers de personnes.  En d'autres termes - vous devez minimiser le temps o√π le syst√®me n'est pas disponible et, si possible, combiner avec d'autres mises √† jour.  Dans le m√™me temps, la bureaucratie ne doit pas √™tre sous-estim√©e: le red√©marrage est une date, une heure, une dur√©e (si les param√®tres ne sont pas enregistr√©s la premi√®re fois) et une notification commerciale. </p><br><p>  <strong>Nous avions quatre syst√®mes SAP PRD: ECC, Netweaver, SRM, BI - pour le red√©marrage</strong> </p><br><p>  <strong>L'ECC</strong> est le plus important, toutes les donn√©es en temps r√©el et le transport principal y sont li√©s: bus, tramways. </p><br><p>  Les donn√©es du syst√®me <strong>Netweaver</strong> (accidents, applications mobiles), ainsi que des syst√®mes ECC, sont utilis√©es m√™me √† 3 heures du matin - si les tramways ne fonctionnent pas, les √©quipes de r√©paration partent. </p><br><p>  Syst√®me <strong>SRM</strong> - principalement utilis√© pour l'approvisionnement et √©tait disponible n'importe quel jour apr√®s 18h00. </p><br><p>  Avec la <strong>BI, la</strong> difficult√© est que le week-end, les flux de donn√©es de l'ECC vont au syst√®me.En outre, les rapports de la BI sont parfois utilis√©s par la direction en dehors des heures ouvrables. </p><br><p>  Au total, il a fallu 2 semaines pour red√©marrer tous les PRD. <br>  PS Le red√©marrage de chacun des syst√®mes PRD a √©t√© pr√©c√©d√© par des red√©marrages de tous les DEV et ACC, qui sont plus faciles √† coordonner, mais n√©cessitent √©galement une planification. </p><br><h2 id="22-windows-active-directory-ad">  2.2 Windows Active Directory (AD) </h2><br><p>  Active Directory n√©cessite la cr√©ation d'un utilisateur technique sp√©cial (SAP Kerberos).  Cet utilisateur contactera Windows pour obtenir une copie du ticket d'entr√©e pour SAP.  Un tel utilisateur du service AD ‚Äã‚Äãsuffit pour tous les syst√®mes SAP. </p><br><p><img src="https://habrastorage.org/webt/tq/hk/fs/tqhkfsq1vqbh3dka2dwhqgltkue.png"></p><br><p>  Cette partie a √©t√© enti√®rement r√©alis√©e par notre consultant externe et l'√©quipe Active Directory, elle comprenait plusieurs it√©rations pour affiner les param√®tres et configurer la biblioth√®que sp√©ciale, mais pour moi elle restait plus une "bo√Æte noire". </p><br><h2 id="23-ustanovka-na-kompyuter-polzovatelya-programmy-sap-secure-login-client-slc">  2.3 Installation de SAP Secure Login Client (SLC) sur l'ordinateur d'un utilisateur </h2><br><p><img src="https://habrastorage.org/webt/0s/uk/ug/0sukugpdet6o952l_cswvaarm8s.jpeg"></p><br><p>  Ce programme en lui-m√™me ne fait rien.  Vous en avez besoin pour stocker un ticket depuis AD qui confirme votre utilisateur lors de la connexion √† une session Windows et, si n√©cessaire, soumettez ce ticket √† SAP pour autorisation.  SLC peut √™tre install√© pour tous les utilisateurs imm√©diatement au d√©but du projet - sans les autres composants SSO, il ne fonctionnera pas de toute fa√ßon. </p><br><h2 id="24-privyazka-polzovatelya-sap-k-ego-polzovatelyu-ad">  2.4 Liaison d'un utilisateur SAP √† son utilisateur AD </h2><br><p>  Comme d√©j√† mentionn√©, dans notre entreprise, il n'y a pas de gestion unique des utilisateurs, l'acc√®s aux diff√©rents syst√®mes est obtenu aupr√®s de diff√©rentes √©quipes.  Dans ce cas, la connexion utilisateur dans SAP est diff√©rente du nom d'utilisateur dans Windows, par exemple, l'utilisateur <strong># 45011</strong> dans AD est Ivan Ivanov ou <strong>IVANOVI</strong> .  C'est ce groupe qui doit √™tre rempli dans SNC (via la transaction SU01, champ SNC, p: CN = ADname @ domain). </p><br><p><img src="https://habrastorage.org/webt/-1/wm/1m/-1wm1mhmz1d8vo_nixlvtp3mvjm.jpeg"></p><br><p>  Notre entreprise ne dispose pas de SAP Identity Management.  Par cons√©quent, il √©tait n√©cessaire de r√©soudre deux probl√®mes: cr√©er de nouveaux utilisateurs et mettre √† jour les param√®tres des utilisateurs existants. </p><br><p>  <strong>Cr√©er de nouveaux utilisateurs</strong> <br>  Dans le syst√®me principal (ECC) chaque jour ouvrable, 4 √† 6 nouvelles connexions sont cr√©√©es, ce qui repr√©sente pr√®s de 1 000 nouveaux utilisateurs par an.  Le processus est automatis√©: lors de la cr√©ation d'un utilisateur, le programme renseigne son adresse, son nom, ses param√®tres de base.  Nous avons d√©cid√© que le programme devrait √©galement remplir le champ SNC au stade de la cr√©ation de l'utilisateur, que la personne ait ou non besoin de l'authentification unique dans SAP par la suite. </p><br><p>  Le hic √©tait que pour chaque utilisateur, vous devez saisir un nom unique dans AD, c'est-√†-dire  ce n'est pas le m√™me param√®tre pour tout le monde - c'est-√†-dire  il est n√©cessaire que le programme lui-m√™me recherche le nom d'utilisateur dans AD et le remplisse dans SAP. </p><br><p>  Le d√©veloppeur a rapidement mis √† jour le programme.  Le code et les tests de base ont pris 2 jours, mais les donn√©es de v√©rification dans ACC ne nous convenaient pas (AD n'√©tait pas mis √† jour), nous avons donc imm√©diatement envoy√© les modifications √† PRD.  Il s'est av√©r√© que tout est plus compliqu√© que nous ne le pensions.  Au cours de l'enqu√™te, nous sommes arriv√©s au sch√©ma suivant: </p><br><p><img src="https://habrastorage.org/webt/wx/ma/7q/wxma7qi0z2cf0ksqmq9i8nbdcoc.jpeg"></p><br><ol><li>  Tout d'abord, les utilisateurs sont cr√©√©s dans le syst√®me RH (dans SAP, ils peuvent √™tre vus dans <strong>PA20</strong> ) </li><li>  Ensuite, ils sont copi√©s dans la table Z, avec les donn√©es sur le d√©partement, la position, la position, s'il s'agit du lien principal, etc. </li><li>  Ensuite, les donn√©es utilisateur sont envoy√©es √† AD et ici le syst√®me cr√©e un utilisateur dans Windows et lui donne un nom dans AD et mail </li><li>  Le flux PI dans ce diagramme consiste simplement √† comprendre qu'il s'agit d'un processus tiers du troisi√®me syst√®me </li><li>  Les donn√©es sont recopi√©es dans SAP (dans la nouvelle table Z), cette fois uniquement les noms AD et les adresses e-mail </li><li>  √Ä la derni√®re √©tape, le programme Z est lanc√©, ce qui cr√©e des utilisateurs dans SAP ( <strong>SU01</strong> ).  Tous les utilisateurs cr√©√©s dans le syst√®me RH ne seront pas cr√©√©s ult√©rieurement dans SAP, nombreux sont ceux qui n'utilisent finalement pas SAP </li></ol><br><p>  Il a fallu pr√®s de deux semaines pour rechercher, coordonner les modifications, convenir d'un calendrier de mise √† jour et de chargement / d√©chargement des tables.  C'√©tait une question de synchronisation - le programme de cr√©ation d'utilisateurs (point 6) devrait √™tre strictement lanc√© apr√®s que tous les autres programmes ont d√©j√† fonctionn√© et que les donn√©es soient copi√©es dans des tableaux.  En cons√©quence, nous avons suivi pendant deux semaines la date et le moment de la fin du programme et le d√©bogage du programme. </p><br><p>  Lorsque les utilisateurs sont cr√©√©s avec le champ SNC rempli, mais sans les noms AD requis, dans SU01, vous pouvez voir tous les utilisateurs-associ√©s malheureux li√©s √† un utilisateur AD inexistant. </p><br><p><img src="https://habrastorage.org/webt/-e/w0/xv/-ew0xv-5cdxzkn-khyyhp5aecb8.jpeg"></p><br><p>  <strong>Mise √† jour des param√®tres utilisateur existants</strong> <br>  Pr√©cis√©ment parce que nos identifiants SAP et Windows ne correspondent pas, nous n'avons pas pu utiliser la solution SAP standard pour le remplissage en masse dans le domaine SNC ( <em>RSUSR300</em> via le <em>programme SNC1</em> ). </p><br><p>  En cons√©quence, j'ai mis √† jour les donn√©es de 10 000 utilisateurs existants √† l'aide d'un script de fortune ( <em>SAP eCATT</em> ), en t√©l√©chargeant manuellement les donn√©es utilisateur et en cr√©ant une variante.  Pour r√©ussir, j'ai d√ª ouvrir pour changer les syst√®mes eCATT en PRD et ACC et promettre aux d√©veloppeurs des millions de cookies. </p><br><h2 id="25-modifikaciya-fayla-sap-logonini">  2.5 Modification du fichier SAP logon.ini </h2><br><p>  Techniquement, c'est 1 minute.  Il suffit de noter dans les propri√©t√©s du fichier que la connexion via <strong>SNC est disponible</strong> . </p><br><p><img src="https://habrastorage.org/webt/rj/ih/d0/rjihd0garduexbu5whx_yeg4jnm.jpeg"></p><br><p>  La difficult√© est que ce fichier se trouve localement sur le PC de l'utilisateur et que deux mille utilisateurs doivent le changer. </p><br><p>  En fait, pour nous, l'impl√©mentation finale √©tait le moment de distribuer le nouveau fichier <strong>sap.logon.ini</strong> entre les utilisateurs, plut√¥t que de changer les param√®tres PRD.  Parce que m√™me si les quatre premiers composants sont d√©j√† termin√©s et que le dernier cinqui√®me ne l'est pas, la magie ne se produira pas. </p><br><p>  Avec le dernier paragraphe est venu un petit incident.  J'ai signal√© √† la direction que nous avons 2 000 utilisateurs qui auront install√© la mise √† jour et quand le moment est venu de l'impl√©menter, ils m'ont envoy√© un √©tat o√π il y en avait 3 500. Je me sentais mal √† l'aise.  En effet, pour ma part, je n'ai vu que des utilisateurs SAP actifs, mais en r√©alit√©, la mise √† jour a √©t√© envoy√©e √† tous les ordinateurs portables personnels, qui sont beaucoup plus dans l'entreprise.  Dieu merci, aucun bug technique n'est survenu. </p><br><h1 id="3-testirovanie">  3. Test </h1><br><p>  Comment tester SSO?  Soit √ßa marche ou pas.  Notre d√©veloppeur a grogn√© et a dit que vous n'aviez besoin de rien tester, et d√®s que tout fonctionne dans le bac √† sable, vous devez l'envoyer en production.  Bien s√ªr.  Personne ne dira qu'il √©crit du code avec des bugs. </p><br><p>  Vous devez v√©rifier: </p><br><ul><li>  La connexion SAP fonctionne-t-elle avec SSO juste apr√®s le red√©marrage </li><li>  les utilisateurs peuvent-ils utiliser l'authentification unique lorsqu'ils sont connect√©s avec un VPN </li><li>  difficult√©s pour les d√©veloppeurs d'autres syst√®mes de modification de la connexion SAP </li></ul><br><p>  SSO n'est pas un programme, il est difficile de l'impl√©menter de mani√®re coh√©rente DEV-ACC-PRD.  N√©anmoins, des tests initiaux sont n√©cessaires pour d√©tecter tout ce qui pourrait potentiellement mal tourner.  Le test dans ce cas est la distribution du nouveau logon.ini SAP lorsque tous les composants sont d√©j√† en cours d'ex√©cution.  Nous avons test√© DEV et ACC avec les d√©veloppeurs et le nouveau SAP logon.ini avec PRD avec une s√©lection d'utilisateurs professionnels. </p><br><p>  Ce qu'ils ont trouv√©: </p><br><ul><li>  parfois (1 cas pour 500) vous devez r√©installer compl√®tement la connexion SAP ou SLC </li><li>  <strong>les utilisateurs cl√©s</strong> qui ont le droit de changer d'autres utilisateurs (plus √† ce sujet dans le paragraphe suivant) </li></ul><br><h1 id="4-snc-eto-dyra-v-bezopasnosti">  4. SNC est un trou de s√©curit√© </h1><br><p>  Qu'en est-il de la modification du champ SNC? <br>  Le fait est qu'en changeant le champ SNC d'un autre utilisateur (dans SU01) en votre propre, vous pouvez vous connecter sous le compte de quelqu'un d'autre sans m√™me changer le mot de passe.  Le syst√®me vous demandera simplement quel utilisateur choisir, le v√¥tre ou celui de quelqu'un d'autre.  Cependant, si vous faites cela, demain personne ne remarquera rien, car le mot de passe est rest√© inchang√©. </p><br><p><img src="https://habrastorage.org/webt/nf/oo/b0/nfoob05hx89xqaum7iwgctub5vq.jpeg"></p><br><p>  Dans toute entreprise, il y a des gens qui s'occupent de <strong>la gestion des utilisateurs</strong> .  En r√®gle g√©n√©rale, ces personnes surveillent la cr√©ation d'utilisateurs ( <strong>SU01</strong> ) et l'acc√®s pour eux ( <strong>PFCG</strong> ), ainsi que les mises √† jour des mots de passe.  Il est logique qu'ils puissent √©galement remplir le champ <em>SNC</em> . </p><br><p>  Le probl√®me survient lorsque l'entreprise doit s√©parer la gestion des utilisateurs et uniquement les utilisateurs cl√©s.  Les administrateurs cr√©ent des utilisateurs, et des utilisateurs cl√©s, si n√©cessaire, modifient leurs donn√©es: param√®tres utilisateur, sa langue, son emplacement, etc. </p><br><p>  Dans SAP, il n'y a pas d'√©tape de contr√¥le distincte pour modifier le champ SNC.  Quiconque a le droit de changer d'utilisateur (objet <strong>S_USER_GRP, ACTVT 02</strong> ) peut √©galement changer le champ SNC (alors que changer le mot de passe n√©cessite le m√™me objet, mais avec <strong>ACTVT 05</strong> ). </p><br><p><img src="https://habrastorage.org/webt/kn/vd/4x/knvd4x9cvj5xiww9cjwdgigoxvw.jpeg"></p><br><p>  Il peut y avoir plusieurs solutions: </p><br><ul><li>  retirer les droits d'acc√®s √† SU01 aux utilisateurs cl√©s, et en r√©ponse donner √† chacun SU2 et SU3, o√π l'utilisateur peut modifier ses propres param√®tres </li><li>  retirer les droits d'acc√®s √† SU01, et en √©change donner une transaction z o√π l'onglet SNC ne sera pas affich√© </li><li>  quitter SU01, mais prot√©ger le champ SNC avec un contr√¥le sp√©cial </li></ul><br><p>  En cons√©quence, nous avons choisi cette derni√®re option en cr√©ant un objet d'autorisation personnalis√© et en liant le programme SU01 dessus.  Cependant, comme il s'est av√©r√© plus tard, SAP a une solution similaire - vous pouvez activer la <em>maintenance √©tendue</em> ( <strong>note 1882254</strong> ) pour les champs SU01 individuels. </p><br><h2 id="5-komandnaya-rabota">  5. Travail d'√©quipe </h2><br><p>  Au cours du projet, j'ai rencontr√© toutes les difficult√©s du travail d'√©quipe et d√©couvert de nombreuses v√©rit√©s de base: </p><br><ul><li>  <em>Il n'y a jamais beaucoup de temps</em> .  La marge de temps est la meilleure que le PM puisse offrir. </li><li>  <em>Il devrait y avoir un plan de projet de base</em> , mais il doit √™tre revu chaque semaine, laissant une grande marge de flexibilit√©.  Quelque part nous nous sommes d√©plac√©s plus vite, quelque part pi√©tin√©s sur place. </li><li>  <em>Les oncles adultes du service informatique ne diff√®rent parfois pas du comportement des filles en mati√®re de comptabilit√©</em> : ils refusent de travailler les uns avec les autres, tout simplement parce qu'ils n'aiment pas la personne.  Et encore une fois, il est n√©cessaire de r√©soudre les probl√®mes de subordination. </li><li>  <em>Souvent, les minist√®res entravent l'approbation du projet</em> , car il n'est pas clair qui est responsable de la mise en ≈ìuvre et dont le budget des heures suppl√©mentaires tombe.  Il est important de laisser les gestionnaires discuter de tout directement. </li><li>  <em>Des situations impr√©vues surviennent de temps en temps</em> .  Le mieux qui puisse √™tre est une communication opportune, une lettre, un appel, un SMS √† <strong>toutes</strong> les personnes impliqu√©es. </li><li>  <em>Il n'y a rien de mieux qu'une rencontre personnelle</em> .  Les questions sont r√©solues plusieurs fois plus rapidement que lorsque discut√©es par courrier.  En revanche, tous les arrangements personnels doivent √™tre imm√©diatement suivis d'une lettre ult√©rieure (afin de fixer et de ne pas oublier) </li><li>  <em>Les PM dans un projet informatique ne peuvent faire confiance qu'aux personnes</em> .  En fait, vous n'avez aucune id√©e du temps qu'il faudra pour telle ou telle action: par exemple, cr√©er un utilisateur dans AD pour Kerberos, 10 minutes ou trois jours?  Et il n'y a aucun moyen de v√©rifier si les tests se sont vraiment arr√™t√©s ou si quelqu'un se moquait.  Il ne reste plus qu'√† faire confiance. </li></ul><br><p>  De plus, beaucoup d√©pend de la pers√©v√©rance du consultant.  Quelqu'un seul, ou consultant en d√©veloppement ou PM, devrait √™tre aussi impudent qu'une balle et frapper √† travers les murs d'une bureaucratie.  Dans ce cas, j'ai √©t√© en partie chanceux, notre consultant invit√© √©tait ennuyeux et parfois insupportable (il √©tait difficile de lui faire entendre quelque chose), mais il connaissait son entreprise: il a signal√© des probl√®mes et s'arr√™te imm√©diatement et ne s'est pas calm√© jusqu'√† ce que le probl√®me soit r√©solu. </p><br><h2 id="6-informaciya-dlya-biznesa">  6. Informations pour les entreprises </h2><br><p>  Dans une grande entreprise, les changements affectant les utilisateurs finaux doivent √™tre opportuns et mieux annonc√©s √† l'avance. </p><br><p>  Dans notre cas, il √©tait n√©cessaire d'informer tous les utilisateurs qu'ils n'avaient d√©sormais plus besoin d'un mot de passe pour acc√©der √† SAP.  De plus, il √©tait n√©cessaire de fournir une documentation technique pour la 1√®re ligne de support avec toutes les erreurs possibles pouvant survenir apr√®s la mise en ≈ìuvre. </p><br><p>  Je dois admettre qu'avec la communication tout ce qui aurait pu mal tourner. </p><br><p>  <em>Premi√®rement</em> , nous avons annonc√© aux utilisateurs √† propos de l'authentification unique sur le site Web de l'entreprise, et non par lettre.  √Ä quelle fr√©quence lisez-vous un site Web d'entreprise?           SAP     . </p><br><p> <em>-</em> , ,    , , ,  ,    ,   (   -   ?)        ,   . </p><br><p> <em>-</em> ,      Go Live,     ,         (    2 ),         .      . </p><br><h2 id="7-trudnosti-perevoda-ili-posledniy-fuck-up"> 7.     fuck-up </h2><br><p>       5-   SSO   SAP,    ,    . </p><br><p>     :   . ,      ‚Äî    .           .     2-   ,  500   -.          . </p><br><p><img src="https://habrastorage.org/webt/dq/rg/lm/dqrglmeighaas0ta0bqcxkkay0a.jpeg"></p><br><p>       .       ‚Äúuse a default language SAP logon‚Äù  ‚Äî     ,      ,       ( <strong>SU01</strong> ,  <strong>Defaults</strong> ).       <em>¬´  SAP¬ª</em> . </p><br><p>       ,       -,       . </p><br><p><img src="https://habrastorage.org/webt/y2/k1/1z/y2k11zgxul7yy70mnjfc_q9jjok.jpeg"></p><br><p>         -        . </p><br><h2 id="8-itogi-i-vyvody"> 8.    </h2><br><p>    SSO ‚Äî  ,           . ,    1-2  ,    3- . </p><br><p>        .                .        ,     , , . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beaucoup de choses sur l'authentification unique peuvent √™tre connues depuis longtemps, du moins Google. </font><font style="vertical-align: inherit;">Par exemple, √† propos d'une demande de serveur √† AD ou du champ SNC. </font><font style="vertical-align: inherit;">Mais il y a une telle chose comme un manque de temps √©ternel. </font><font style="vertical-align: inherit;">En tant que sp√©cialiste, vous devez google, et en tant que chef de projet (surtout si vous ne pouvez pas le comprendre dans la premi√®re demi-heure et que vous n'avez pas de formation sp√©cialis√©e), vous devez trouver le moyen le plus court de trouver une solution.</font></font></p><br><pre><code class="plaintext hljs"> ,     ,   .</code> </pre> <br><p>  Solides: </p><br><ul><li>  Le principal temps en 3 mois a √©t√© consacr√© √† la coordination et √† la coordination des actions </li><li>  Les d√©partements impliqu√©s dans ce projet ont commenc√© √† mieux comprendre le travail de chacun. </li><li>  Pendant les tests, vous devez vous pr√©senter √† la place de l'utilisateur final - ce que vous aimeriez voir dans le message d'information et dans les param√®tres de base. </li><li>  SSO pour SAP est impl√©ment√©.  Les utilisateurs sont satisfaits et ont d√©j√† oubli√© les moments o√π il √©tait n√©cessaire de m√©moriser le mot de passe de SAP.  Appelez le support technique moins souvent, applaudissements. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr434404/">https://habr.com/ru/post/fr434404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr434384/index.html">Sous la responsabilit√© des artistes interpr√®tes ou ex√©cutants</a></li>
<li><a href="../fr434386/index.html">Douglas Engelbart: ¬´Augmenter l'intellect humain: un cadre conceptuel¬ª</a></li>
<li><a href="../fr434394/index.html">Bugatti Automobiles teste avec succ√®s l'√©trier de frein imprim√© en 3D</a></li>
<li><a href="../fr434398/index.html">Vanivar Bush: ¬´Comme nous pouvons le penser¬ª. 2e partie</a></li>
<li><a href="../fr434402/index.html">Solution Veeam pour la sauvegarde et la restauration de machines virtuelles sur la plateforme Nutanix AHV. Partie 1</a></li>
<li><a href="../fr434406/index.html">Notes d'un phytochimiste. Habra Banana Sunset</a></li>
<li><a href="../fr434408/index.html">Projet √† Malte: le stockage d'√©nergie avec du sel fondu atteint un nouveau niveau</a></li>
<li><a href="../fr434410/index.html">Chargeurs jetables. C'est quoi pour nous?</a></li>
<li><a href="../fr434412/index.html">Suppression de la fus√©e avant le lancement sur Vostochny</a></li>
<li><a href="../fr434414/index.html">Iceberg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>