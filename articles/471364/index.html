<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⤵️ 😿 🎺 Gestión automatizada de pruebas con Telegram 🐧 🤱🏼 🧛🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Como ingeniero de control de calidad, desarrollé un sistema de autocomprobación. Enfrenté una serie de problemas: 



- Para cada tipo de prueba, tuve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gestión automatizada de pruebas con Telegram</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/471364/">  Como ingeniero de control de calidad, desarrollé un sistema de autocomprobación.  Enfrenté una serie de problemas: <br><br><ul><li>  Para cada tipo de prueba, tuve que crear mis propios trabajos en CI y ejecutarlos a mano. </li><li>  Los desarrolladores se negaron a ejecutar casos de autocomprobación. </li><li>  La imposibilidad de ejecutar autotests desde cualquier parte del dispositivo. </li><li>  Los ingenieros de pruebas manuales de control de calidad no podían ejecutar las pruebas automáticas ellos mismos. </li></ul><br>  Por lo tanto, decidí crear un pequeño prototipo del bot para ejecutar pruebas automatizadas, que cubrirían la mayoría de los problemas descritos anteriormente. <br><br>  <b>Descripción de la idea:</b> <br><br>  El usuario envía los comandos necesarios al chat, inicia la compilación en el sistema CI, de acuerdo con las reglas especificadas en la configuración.  CI ejecuta pruebas automáticas con marcas pytest.  Después de la ejecución, el script dentro del repositorio de prueba recibe información sobre el estado de compilación, recopila registros y lo envía de vuelta al usuario en el chat de telegramas. <br><a name="habracut"></a><br>  <b>Herramientas:</b> <br><br><div class="spoiler">  <b class="spoiler_title">Las herramientas</b> <div class="spoiler_text"><ul><li>  Lenguaje de programación - Python </li><li>  Marco de prueba - Pytest </li><li>  Cliente HTTP - Solicitudes </li><li>  Base de datos - SQLite3 </li><li>  ORM - Peewee </li><li>  Sistema CI - Travis CI </li></ul><br></div></div><br><br>  <b>Contenido</b> <br><br><ol><li>  Preparación </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Registro de bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Preparando un repositorio de prueba</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pruebas y registro</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Generación de informes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configurar Travis CI</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Configuración de bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Los principios del bot</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Despliegue en Heroku</a> </li></ol><br><a name="1"></a><br><h3>  <b>Registro de bot</b> </h3><br>  En primer lugar, necesitamos registrar el telegrama del bot y obtener su identificación única, que es un token.  Para hacer esto, escriba el mensaje / inicio en el bot @BotFather. <br>  Nuestro equipo principal es / newbot, al ingresar, se nos pedirá que propongamos el nombre del bot. <br>  Pero hay una regla: el nombre debe terminar en bot.  BotFather toma el nombre del bot y devuelve tu token.  Active el bot comenzando a chatear.  A continuación, debe enviar una solicitud de API al método getUpdates. <br><br><pre><code class="python hljs">https://api.telegram.org/bot{_}/getUpdates</code> </pre> <br>  Recuerda el hat_id recibido. <br><br><a name="2"></a><br><h3>  <b>Preparando un repositorio de prueba</b> </h3><br>  A continuación, debe organizar un repositorio con pruebas o utilizar un artículo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">preparado</a> previamente. <br><br><a name="3"></a><br>  <i>Pruebas y registro</i> <br><br>  Cree funciones de prueba y márquelas con la marca pytest: completa, humo y pájaro. <br><br>  Es importante agregar el registro a nuestras pruebas creando un archivo pytest.ini y agregando llamadas al método de información desde la biblioteca de registro en las funciones de prueba. <br>  El archivo pytest.ini contiene plantillas para registros en vivo y un archivo de registro. <br><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de prueba</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pytest <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> logging @pytest.mark.full @pytest.mark.smoke <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_cat_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"cat"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span> @pytest.mark.full @pytest.mark.smoke <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_dog_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"dog"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span> @pytest.mark.full <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_horse_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"horse"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span> @pytest.mark.bird <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test_bird_facts</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> query = {<span class="hljs-string"><span class="hljs-string">"animal_type"</span></span>: <span class="hljs-string"><span class="hljs-string">"bird"</span></span>, <span class="hljs-string"><span class="hljs-string">"amount"</span></span>: <span class="hljs-string"><span class="hljs-string">"2"</span></span>} response = requests.get(<span class="hljs-string"><span class="hljs-string">"https://cat-fact.herokuapp.com/facts/random"</span></span>, params=query) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request url: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.url}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.request.body}</span></span></span><span class="hljs-string">"</span></span>) logging.info(<span class="hljs-string"><span class="hljs-string">f"Request status: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.status_code}</span></span></span><span class="hljs-string">, body: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{response.text}</span></span></span><span class="hljs-string">"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> response.status_code == <span class="hljs-number"><span class="hljs-number">200</span></span></code> </pre> <br></div></div><br><br><div class="spoiler">  <b class="spoiler_title">pytest.ini</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">[pytest] markers = smoke: for smoking testing full: for regression testing bird: facts only bird log_cli = 1 log_cli_level=INFO log_cli_format = %(asctime)s [%(levelname)8s] %(message)s log_cli_date_format='%Y-%m-%d %H:%M:%S' log_file = test_log.log log_file_level=INFO log_file_format= %(asctime)s [%(levelname)8s] %(message)s log_file_date_format='%Y-%m-%d %H:%M:%S'</code> </pre> <br></div></div><br><br><a name="4"></a><br>  <i>Generación de informes</i> <br><br>  Creamos un script que, una vez que se completa el ensamblaje, recopila información del sistema de CI y los envía al chat de telegramas, junto con los registros. <br>  Dentro del script, debe reemplazar los valores TELEGRAM_BOT y CHAT_ID por los valores que recibió anteriormente. <br><br><div class="spoiler">  <b class="spoiler_title">Código de script</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> os TRAVIS_TEST_RESULT = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_TEST_RESULT"</span></span>) TRAVIS_REPO_SLUG = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_REPO_SLUG"</span></span>) TRAVIS_BRANCH = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_BRANCH"</span></span>) TRAVIS_JOB_WEB_URL = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_JOB_WEB_URL"</span></span>) TRAVIS_COMMIT_MESSAGE = os.environ.get(<span class="hljs-string"><span class="hljs-string">"TRAVIS_COMMIT_MESSAGE"</span></span>) TELEGRAM_TOKEN = <span class="hljs-string"><span class="hljs-string">"808619876:GHrtj9zs-KvKhhtWyu1YoxjtIikUYMGVjD8g"</span></span> CHAT_ID = <span class="hljs-string"><span class="hljs-string">"272560060"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> TRAVIS_TEST_RESULT != <span class="hljs-number"><span class="hljs-number">0</span></span>: build_status = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: build_status = <span class="hljs-string"><span class="hljs-string">""</span></span> TEXT = <span class="hljs-string"><span class="hljs-string">f" : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{build_status}</span></span></span><span class="hljs-string"> \n : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_REPO_SLUG}</span></span></span><span class="hljs-string"> \n : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_BRANCH}</span></span></span><span class="hljs-string"> \n Commit : </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_COMMIT_MESSAGE}</span></span></span><span class="hljs-string"> \n -: </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TRAVIS_JOB_WEB_URL}</span></span></span><span class="hljs-string">"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send_message</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> URL = <span class="hljs-string"><span class="hljs-string">f"https://api.telegram.org/bot</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TELEGRAM_TOKEN}</span></span></span><span class="hljs-string">/sendMessage"</span></span> body = {<span class="hljs-string"><span class="hljs-string">'chat_id'</span></span>: CHAT_ID, <span class="hljs-string"><span class="hljs-string">'text'</span></span>: TEXT} response = requests.post(url=URL, json=body) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">send_file</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> URL = <span class="hljs-string"><span class="hljs-string">f"https://api.telegram.org/bot</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{TELEGRAM_TOKEN}</span></span></span><span class="hljs-string">/sendDocument"</span></span> body = {<span class="hljs-string"><span class="hljs-string">'chat_id'</span></span>: CHAT_ID} file = {<span class="hljs-string"><span class="hljs-string">"document"</span></span>: open(<span class="hljs-string"><span class="hljs-string">"test_log.log"</span></span>)} response = requests.post(url=URL, data=body, files=file) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> response send_message() send_file()</code> </pre> <br></div></div><br>  El script usa variables del sistema y recibe valores de Travis CI. <br><br>  Si el valor de TRAVIS_TEST_RESULT no es igual a cero, el valor se establece en "Correcto", primero se procesa la función send_message, que envía información de ensamblaje al chat (nombre del repositorio, rama seleccionada, nombre del compromiso utilizado, enlace al registro web), luego la función send_file que envía archivo de registro <br><br>  En el repositorio de prueba, agregue el archivo de configuración - travis.yml.  En el interior describimos la tubería a través de la cual funcionará el ensamblaje. <br><br><div class="spoiler">  <b class="spoiler_title">travis.yml</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">language: python python: - "3.7" install: - pip install -r requirements.txt script: pytest -m smoke after_script: - python tg_command.py</code> </pre> <br></div></div><br>  A continuación, debemos implementar el repositorio en GitHub para agregarlo a Travis CI. <br><br><a name="5"></a><br><h3>  <b>Configurando TRAVIS_CI</b> </h3><br>  Vamos al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sitio</a> <br>  Inicie sesión con su cuenta de GitHub.  Cambie a la pestaña Panel de control.  Habiendo abierto previamente DevTools (Red), en la subpestaña Repositorios en el sitio opuesto al repositorio de prueba, mueva el control deslizante - active su ensamblaje.  En la pestaña Red (DevTools), llega una solicitud activa, en la vista previa de la cual hay información sobre la identificación del repositorio, el número debe ser recordado (copiar / escribir).  Cambiando al sitio en la pestaña Configuración.  Copiamos o recordamos el token, lo necesitamos. <br><br><a name="6"></a><br><h3>  <b>Configuración de bot</b> </h3><br>  En este artículo no nos detendremos en el análisis del código, puede verlo en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">repositorio</a> .  Ahora es importante que comprendamos los conceptos básicos del tema, así que pasemos a configurar nuestro bot: <br><br>  Dentro del repositorio están los archivos: <br><br><ol><li>  main.py - script de bot; </li><li>  models.py - archivo con modelos para ORM; </li><li>  conf.ini - archivo con variables de configuración; </li><li>  runtime.txt: valores fijos de la versión de Python para Travis CI; </li><li>  procfile - ajuste para gunicorn; </li><li>  wsgi.py: archivo de inicio de la aplicación con gunicorn. </li></ol><br>  Para que su bot funcione, debe reemplazar los datos en conf.ini, a saber: <br><br><ul><li>  travis_token - indica el token recibido a Travis CI; </li><li>  travis_base_url: especifique la dirección de la API de Travis CI; </li><li>  travis_repository_id - especifica la identificación del repositorio con autotest, dentro de Travis CI; </li><li>  telegram_chat_id: especifique la identificación de chat del telegrama donde se enviarán los mensajes del bot; </li><li>  telegram_bot_url - especifica la url al bot. </li></ul><br><div class="spoiler">  <b class="spoiler_title">Ejemplo de Conf.ini</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">[travis] travis_token = token HkjhkjgGKJhjgFGfdgd travis_base_url = https://api.travis-ci.org travis_repository_id = 10898384 [telegram] telegram_chat_id = 24234234 telegram_bot_url = https://api.telegram.org/bot87543366:AAHtj9zs-Kv4zGWyu1eTXegikUYMGVjD8g/</code> </pre> <br></div></div><br><a name="7"></a><br>  <i>Los principios del bot</i> <br><br>  Es importante que cada solicitud dé un estado de respuesta de 200. De lo contrario, el telegrama comenzará a enviar solicitudes cíclicamente hasta que reciba una respuesta válida. <br><br>  El bot tiene un conjunto de comandos: <br><br>  El delimitador puede ser cualquier carácter especial, excepto el guión bajo. <br><br><ul><li>  add_m: agrega un kit de prueba (marcas de python). <br>  Plantilla: * comando * {descripción del kit} {delimitador} {marca de nombre}. <br>  Ejemplo: add_m Prueba de aves / ave. </li><li>  add_b: agrega una rama para probar. <br>  Plantilla: * comando * {descripción de la rama} {delimitador} {nombre de la rama de git}. <br>  Ejemplo: add_b Master. </li><li>  select: le permite seleccionar una rama para probar de forma predeterminada. <br>  Plantilla: * comando *. <br>  Ejemplo: después de ingresar el comando de selección, aparecen botones para seleccionar las ramas que se agregaron a la base de datos con el comando add_b. </li><li>  ejecutar: el comando para iniciar el ensamblaje. <br>  Plantilla: * comando *. <br>  Ejemplo: después de ingresar el comando de ejecución, aparecen los botones para seleccionar los conjuntos de autotests que se agregaron a la base de datos con el comando add_m.  Al inicio, la rama especificada por el comando select se selecciona automáticamente. </li><li>  del_m: elimina un conjunto de pruebas. <br>  Plantilla: * comando * {marcas de nombre}. <br>  Ejemplo: del_m bird. </li><li>  del_b: elimina las ramas ingresadas en la base de datos. <br>  Plantilla: * comando * {branch from git}. <br>  Ejemplo: del_b master. </li></ul><br>  <i>¿Cómo funciona el bot?</i> <br><br>  <b>1. El</b> usuario agrega un conjunto de pruebas (add_m): <br>  El comando divide los datos del usuario en 2 partes: la descripción y el nombre de la rama en git.  El nombre se escribe en la columna mark_name dentro de la base de datos, y la descripción en la columna mark_description. <br><br>  <b>2. El</b> usuario agrega ramas (add_b): <br>  El comando divide los datos del usuario en 2 partes: la descripción y el nombre de la rama en git.  El nombre se escribe en la columna branch_name dentro de la base de datos, y la descripción en la columna branch_description. <br><br>  <b>3. El</b> usuario selecciona la rama predeterminada (seleccionar): <br>  El usuario recibe botones en el chat, formados según los datos de las tablas branch_description y branch_name.  El usuario selecciona un botón con la rama deseada.  Está escrito en la tabla favorite_branch. <br><br>  <b>4. El</b> usuario inicia la inicialización de la compilación (ejecución): <br>  El usuario recibe botones en el chat, formados según los datos de las tablas. <br>  mark_description y mark_name.  El usuario selecciona un botón con un kit para ejecutar pruebas automáticas. <br><br>  Según los datos seleccionados por el usuario, el bot genera una solicitud en el método de activación en la clase TravisCI y la envía a Travis para su ejecución.  Dentro del sistema Travis, se activa el disparador de una opción de construcción.  Esta opción anula el archivo travis.yml, cambiando la sección del script a los datos seleccionados por el usuario. <br><br><a name="8"></a><br><h3>  <b>Despliegue en HEROKU</b> </h3><br>  Para que el bot funcione, debe implementarse en el alojamiento.  Recomiendo usar Heroku, porque esta plataforma tiene una tarifa gratuita, que proporciona la potencia necesaria para que funcione el bot. <br><br>  <i>¿Cómo implementar un bot?</i> <br><br>  Para no describir todo el proceso, dejaré un enlace a la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">documentación</a> oficial para comenzar: <br><br>  Si desea trabajar con Heroku a través de la GUI, complete el código en Github.  Debe registrarse a través de la interfaz web de Heroku.  Después del registro, haga clic en Nuevo -&gt; Crear nueva aplicación -&gt; Ingrese el nombre de la aplicación y seleccione una región.  Vaya a la pestaña Implementar y seleccione la integración con Github en el método de Implementación. <br><br>  Ante nosotros aparece un bloque para buscar en el repositorio.  Ingrese el nombre del repositorio y haga clic en el botón Buscar.  En los resultados de búsqueda, frente al nombre del repositorio, haga clic en el botón Conectar.  En el bloque Implementación manual, seleccione la rama y haga clic en "Implementar". <br><br>  Último momento: debe activar webhooks mediante una solicitud GET: <br><pre> <code class="python hljs">https://api.telegram.org/bot{id_}/setWebhook?url=https://{_}.herokuapp.com/bot</code> </pre> <br><br>  Se puede usar el bot.  Verificamos que todo funcionó para nosotros: <br><br><img src="https://cdn1.radikalno.ru/uploads/2019/10/13/7d55521afbcfd87833197fc0a3ad0c82-full.jpg" alt="imagen"></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/471364/">https://habr.com/ru/post/471364/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../471348/index.html">Aplicaciones TypeScript de pila completa</a></li>
<li><a href="../471350/index.html">Ingeniería inversa de amplificadores operacionales de bajo ruido desde una computadora analógica en 1969</a></li>
<li><a href="../471352/index.html">Escribir presentaciones en LaTeX</a></li>
<li><a href="../471358/index.html">¿Cómo escribir un contrato inteligente con Python en ontología? Parte 4: API nativa</a></li>
<li><a href="../471360/index.html">Método de duplicación 11 ejemplos del diseño de ICE</a></li>
<li><a href="../471366/index.html">El tribunal de la UE se opone a las cookies de forma predeterminada: no debe haber casillas de verificación previamente marcadas</a></li>
<li><a href="../471372/index.html">¿Por qué las empresas deben administrar los teléfonos inteligentes de los empleados?</a></li>
<li><a href="../471374/index.html">Te invitamos a NIXMultiConf # 3 en Jarkov</a></li>
<li><a href="../471378/index.html">¿Dónde comienza la programación?</a></li>
<li><a href="../471380/index.html">Pentesters a la vanguardia de la ciberseguridad</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>