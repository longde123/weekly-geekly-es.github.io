<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëãüèª üèïÔ∏è ü§¨ Keine Minute offline - Auswahl eines industriellen LTE-Routers üéà ü¶Ö ü§õüèº</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In vielen Systemen ist die Verbindung zum Internet von entscheidender Bedeutung, und selbst einige Minuten Ausfallzeit k√∂nnen teuer sein, beispielswei...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Keine Minute offline - Auswahl eines industriellen LTE-Routers</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443196/"><img alt="Industrieller LTE Termit CR41P Router mit Antennen Triad MA-2697" src="https://habrastorage.org/webt/qg/ns/hi/qgnshie5u3t0apgwhslrve0tan8.jpeg"><br><br>  In vielen Systemen ist die Verbindung zum Internet von entscheidender Bedeutung, und selbst einige Minuten Ausfallzeit k√∂nnen teuer sein, beispielsweise bei Geldautomaten, Alarmen, √úberwachungs- und Zugangskontrollsystemen. <br>  Solche Systeme verwenden normalerweise mehrere Internetverbindungen und wechseln automatisch zwischen verschiedenen Kan√§len, wenn der Hauptkanal nicht verf√ºgbar ist. <br><br>  Ich hatte es satt, selbst ein <abbr title="Funktion der automatischen Umschaltung auf den Backup-Kanal bei einem Unfall auf dem Hauptkanal">Failover</abbr> f√ºr USB-Modems zu erfinden, und wollte dies an eine separate intelligente Hardware delegieren.  Ich habe mich entschlossen, mehrere Industrierouter zu vergleichen, um herauszufinden, ob sie ihrem Namen gerecht werden und wie viel besser sie sind als meine Kr√ºcken.  Der Artikel wird Router der Hersteller iRZ, Termit, Robustel vergleichen. <br><br>  Grundvoraussetzungen f√ºr Router: <br><br><ul><li>  <b>2 SIM-Karten und automatisches Umschalten zwischen Betreibern</b> - Der Router sollte automatisch den Kommunikationsverlust eines Betreibers erkennen und zum Backup wechseln.  Dies ist besonders wichtig f√ºr mobile Systeme, wenn die Mobilfunkabdeckung nicht perfekt ist. </li><li>  <b>Ethernet-Verbindung</b> - Das Hauptsystem sollte nur das Standard-Gateway sehen und sollte nichts √ºber das Modem-Subsystem auf der Routerseite und die Kanalvermittlung wissen, daher kein USB. </li><li>  <b>Unterst√ºtzung f√ºr moderne VPN-Protokolle: IKEv2 und OpenVPN</b> - Um die Verwaltung zu vereinfachen und nicht von echten IP-Adressen abh√§ngig zu sein, m√ºssen Router VPN-f√§hig sein.  Gleichzeitig unterst√ºtzen Sie nicht nur veraltetes PPTP und L2TP, sondern auch moderne Protokolle. </li><li>  <b>(Optional) GPS-Unterst√ºtzung, Verf√ºgbarkeit von GPIO, serielle RS-232/485-Schnittstellen</b> - diese Funktionen sind f√ºr unsere Aufgaben nicht erforderlich, werden jedoch auch als Bonus betrachtet, der f√ºr jemanden n√ºtzlich sein kann. </li></ul><a name="habracut"></a><br><h2>  Das Problem der hausgemachten Kr√ºcken </h2><br><img alt="Zyxel-Router mit zwei an der Wand montierten USB-Modems.  Kabel von Parteien Antennen werden ein das Modem entfernen." src="https://habrastorage.org/webt/hx/cs/r7/hxcsr7imx1mue6ba45gotbl1lsq.jpeg">  <font color="99999">WLAN-Router mit zwei USB-Modems (Foto: Dmitry Bevza dgl.ru)</font> <br><br>  <b>Failover</b> - Notfallumschaltung des Internetkanals auf das Backup bei Unzug√§nglichkeit des Hauptkanals. <br><br>  Um Internetkan√§le zu reservieren, habe ich normalerweise einen Haushalts-WLAN-Router mit OpenWRT-Firmware und das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mwan3-</a> Paket verwendet.  Sie k√∂nnen die automatische Sicherung und den Ausgleich zwischen mehreren Internetkan√§len konfigurieren, einschlie√ülich zwischen einer Kabelverbindung und einem USB-Modem. <br><br>  Der Hauptnachteil dieses Ansatzes ist die heterogene Ausstattung und das schwache Design externer USB-Modems.  Ich mochte die Huawei E3372h Modems mit HiLink Firmware (Ethernet Emulation).  Diese Modems sind recht stabil und billig, aber wenn externe Antennen angeschlossen werden, wird die gesamte Struktur sehr schwach.  Die harten Kabel der Antenne bilden einen Hebel, und Modems werden aus dem USB-Anschluss herausgezogen, und der CRC9-Antennenanschluss selbst ist nicht so zuverl√§ssig wie der SMA, da er keine Schraubbefestigung hat. <br><br><img alt="Modem Huawei E3372h.  Der Antennenanschluss in USB-Modems erm√∂glicht keine erweiterteige Befestigung externer Antennen.  Sie sind leicht zu ziehen" src="https://habrastorage.org/webt/ro/xo/0f/roxo0fopuzd4u-7llqo3-zvmqvc.jpeg"><br>  <font color="99999">Baugruppen an externen USB-Modems sind sehr zerbrechlich: Antennenanschl√ºsse sind nicht feststehend, Modems fallen aus den Anschl√ºssen</font> <br><br>  Das Design von zwei USB-Modems mit externen Antennen musste sehr schwer zu reparieren sein, aber physische Sch√§den und Ausfall von Ports waren immer noch das Hauptproblem.  Diese L√∂sung eignet sich f√ºr die statische Installation an schwer zug√§nglichen Stellen, ist jedoch absolut nicht f√ºr die Installation in einem Auto oder in einer Schalttafel auf einer DIN-Schiene geeignet. <br><br>  Manchmal hing das USB-Subsystem in den Routern und Modems waren nicht mehr verf√ºgbar.  Ich musste ein <abbr title="Watchdog - Ein Watchdog-Skript, das das Ger√§t bei einem Hang oder anderen Problemen neu startet">Watchdog-Skript</abbr> schreiben, das die Verf√ºgbarkeit von Modems separat √ºberwacht, zus√§tzlich zu mwan3, das die Verf√ºgbarkeit des Internets √ºberwacht.  Irgendwann hatte ich es satt und suchte nach einer L√∂sung in einer Box, in der alle Probleme bereits f√ºr mich gel√∂st waren. <br><br><h2>  Modellvergleichstabelle </h2><br>  Industrielle Router sind selbst beim separaten Kauf von Modems teurer als Haushaltsrouter.  Daher waren die Kosten das Hauptkriterium f√ºr die Auswahl der Modelle f√ºr die √úberpr√ºfung.  Zus√§tzliche Funktionen wie Wi-Fi, GPIO-Pins und GPS werden in unserem Fall nicht ben√∂tigt, wir werden sie jedoch weiterhin als Optionen vergleichen, die sich auf die Kosten auswirken. <br><br><div class="scrollable-table"><table><tbody><tr><th>  Modell </th><th>  2 SIM </th><th>  Kabelgebundenes WAN </th><th>  LAN-Ports </th><th>  Wifi </th><th>  GPS </th><th>  Preis </th></tr><tr><td>  <b>Termit CR41P</b> <div style="text-align:center;"><img width="70" src="https://habrastorage.org/webt/x9/wg/dw/x9wgdwh45lcy28q7-sdqpfdouv4.jpeg"></div></td><td align="center">  <b><font color="green">‚Å£‚Å£‚Å¢‚Å¢ ‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  4 </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  13 000 ‚âà </td></tr><tr><td>  <b>Robustel r2000</b> <div style="text-align:center;"><img width="70" src="https://habrastorage.org/webt/ut/it/4y/utit4yd9chibkuq-sca7wthlh5w.jpeg"></div></td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  2 </td><td align="center">  <b><font color="red">X.</font></b> </td><td align="center">  <b><font color="red">X.</font></b> </td><td align="center">  12 000 ‚âà </td></tr><tr><td>  <b>iRZ RU22W</b> <div style="text-align:center;"><img width="70" src="https://habrastorage.org/webt/zj/gw/fq/zjgwfqzulchzwdwbxpp3hwnnlg4.jpeg"></div></td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  4 </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  <b><font color="green">‚úì</font></b> </td><td align="center">  ~ 15 000 ‚ÇΩ </td></tr></tbody></table></div><br><h2>  Testmethode </h2><br>  Die Hauptaufgabe der verglichenen Router besteht darin, unter allen Bedingungen ein unterbrechungsfreies Internet bereitzustellen. Daher werden wir vergleichen, wie gut der Router bei Problemen mit dem Hauptkanal auf den Sicherungskanal umschaltet.  Dazu simulieren wir einen Kommunikationsverlust und messen auf der Serverseite, wie schnell der Router die Verbindung wiederherstellen konnte. <br><br>  Als Zielhost wird an jeden getesteten Router ein kleiner TP-Link MR3020-Router angeschlossen, der als Computer mit einer Nutzlast fungiert.  Es wird OpenVPN ausgef√ºhrt, das mit dem Server verbunden ist.  Die √úberwachung wird auf dem Server gestartet und √ºberwacht die Verf√ºgbarkeit der Adresse im VPN-Tunnel. <br><br>  Das hei√üt, auf der Serverseite wird eine feste IP-Adresse √ºberwacht, die mr3020 √ºber einen VPN-Tunnel zugewiesen wird.  Unabh√§ngig davon, welchen Kanal der Datenverkehr auf dem Router durchl√§uft, interagiert der √úberwachungsserver mit einer Adresse.  Wenn die Adresse verf√ºgbar ist, bedeutet dies, dass der Router den Kanal erfolgreich gewechselt hat und sich im Netzwerk hinter NAT Internet befindet. <br>  Um den OpenVPN-Tunnel so schnell wie m√∂glich wiederherzustellen, setzen Sie auf der Serverseite die Keep-Alive-Option auf die Mindestwerte und deaktivieren Sie die Verschl√ºsselung: <br><br><pre><code class="plaintext hljs">cipher none ping 1 ping-restart 4</code> </pre> <br>  Beachten Sie, dass das erneute Verbinden des VPN einige Zeit in Anspruch nimmt und sich das Internet in Wirklichkeit schneller erholt, als in den Grafiken dargestellt.  Ein solcher Test erm√∂glicht jedoch eine ehrlichere Einsch√§tzung der Tatsache der Kanalumschaltung, da er zeigt, dass die Clients hinter dem Router TCP-Verbindungen wiederherstellen und zum normalen Betrieb zur√ºckkehren konnten. <br><br><img alt="Pr√ºftlayout.  Der MR3020-Router wird als Computer mit einem anderen VPN-Client verwendet.  Der Remote-Server unterscheidet die IP-Adresse des VPN-Clients." src="https://habrastorage.org/webt/6r/c3/qg/6rc3qgexexinb7dyzxrn57fva4u.jpeg"><br>  <font color="99999">Mit jedem Router ist ein TP-Link MR3020 verbunden, √ºber den ein VPN-Tunnel ausgef√ºhrt wird.</font>  <font color="99999">Als funktionierendes Internet gilt die Verf√ºgbarkeit der IP-Adresse 10.0.0.1 auf der Serverseite</font> <br><br><h3>  PingPlotter - √úberwachungsprogramm </h3><br>  Das √úberwachungsprogramm und der OpenVPN-Server befinden sich auf demselben physischen Computer wie der VPN-Server.  Ich werde <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">das MultiPing-</a> Dienstprogramm mithilfe regul√§rer ICMP- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Echoanforderungen √ºberwachen</a> .  Das Anforderungsintervall betr√§gt 1 Sekunde - so k√∂nnen Sie in der Grafik auch die kurzfristige Unzug√§nglichkeit des Hosts sehen. <br><br><img alt="PingPlotter-Programm zur √úberwachung der Hostverf√ºgbarkeit.  Analoge Konsole MTR." src="https://habrastorage.org/webt/xl/jo/hr/xljohrfhzsbcqlkvxibmyg9r5oi.jpeg"><br>  <font color="99999">PingPlotter zeichnet praktische Ping-Diagramme, die Verz√∂gerung und Paketverlust anzeigen</font> <br><br>  Ich gebe zu, ich habe lange versucht, ein √úberwachungssystem zu w√§hlen.  Ich habe Zabbix-, Cacti-, Bash + Rrdtool-Skripte ausprobiert, aber f√ºr meine Aufgaben schien alles zu kompliziert.  Als Ergebnis fand ich das ausgezeichnete <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PingPlotter-</a> Programm und seine vereinfachte Version ohne Routenverfolgung - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">MultiPing</a> .  Das Programm erm√∂glicht die Echtzeit√ºberwachung einer Gruppe von Hosts mit einer Aufl√∂sung von bis zu 1 Sekunde und das Zeichnen detaillierter Grafiken. <br><br><h3>  Antenne </h3><br><div style="text-align:center;"><img width="400" src="https://habrastorage.org/webt/rp/zb/-n/rpzb-ng9kxn09dwutarnwi3lke8.jpeg"></div><br>  <font color="99999">Breitbandantenne Triad MA-2697, geeignet f√ºr die Grundbereiche der Mobilfunkkommunikation</font> <br><br>  Um eine unterschiedliche Empfangsqualit√§t aufgrund unterschiedlicher Antennen auszuschlie√üen, werden an alle Router dieselben <b>Triad MA-2697-</b> Antennen angeschlossen.  Laut Hersteller ist die Antenne breitbandig und arbeitet in den B√§ndern GSM-900 \ 1800 MHz, 3G-2100 MHz, Wi-Fi-2400 MHz und 4G WiMAX-2600 MHz.  Ich werde die Qualit√§t der Antenne nicht √ºberpr√ºfen.  Selbst wenn es schlecht ist, arbeiten alle Router unter den gleichen Empfangsbedingungen. <br><br><h3>  Mobilfunkbetreiber </h3><br>  In jedem Router werden MegaFon- und MTS-SIM-Karten mit dem f√ºr Einzelpersonen √ºblichen Tarif installiert.  Das Megaphon wird als Haupt-MTS-Backup ausgew√§hlt.  Es gibt keine Logik in einer solchen Priorit√§t, die Auswahl ist zuf√§llig.  Am Teststandort haben beide Betreiber eine gleich gute LTE-Abdeckung. <br><br><h3>  Nachteile des Pr√ºfstands </h3><br><img alt="Alle Router gleichzeitig auf dem Tisch verbunden.  Eine ganze Reihe von Dr√§hten und Antennen." src="https://habrastorage.org/webt/ws/hh/0x/wshh0xrb4btuvtynh7i1nvgc4tw.jpeg"><br>  <font color="99999">Pr√ºfstand auf einem Tisch aufgestellt</font> <br><br>  Da der Pr√ºfstand in Innenr√§umen station√§r ist, √§ndert sich die Qualit√§t der Abdeckung des Mobilfunknetzes nicht.  Unter solchen Bedingungen ist es unm√∂glich, eine schlechte Abdeckung k√ºnstlich zu simulieren, wenn ein zellulares Netzwerksignal vorliegt, aber die Paketverluste sind zu gro√ü.  In guter Weise war es notwendig, einen St√§nder in einen Zug oder ein Auto zu stellen und ihn an Orte au√üerhalb der Stadt zu tragen.  Dann w√§re es m√∂glich zu vergleichen, wie gut die eingebauten Modems mit einem schlechten Signal funktionieren. <br>  In unserem Fall k√∂nnen wir nur einen vollst√§ndigen Kommunikationsverlust auf dem Hauptkanal wiederherstellen und beobachten, wie schnell der Router auf den Sicherungskanal umschaltet. <br><br><h2>  Termit CR41P </h2><br>  Der Router wird von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Digital Angel (digitalangel.ru) bereitgestellt.</a> <br><img src="https://habrastorage.org/webt/02/jr/46/02jr46l9ppy9zhzhxft4difgzqw.jpeg"><br><br>  <b>SoC</b> : Atheros AR9344 rev.  3 <br>  <b>RAM:</b> 128 MB <br>  <b>Flash-Speicher:</b> 16 MB <br>  <b>Wi-Fi:</b> 802.11n (2,4 GHz) <br>  <b>Modem</b> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Quectel EC25-E</a> (LTE Cat 4) <br>  <b>Firmware</b> : basierend auf OpenWRT 15.05.1 <br>  <b>USB-Host</b> <br>  <b>MicroSD</b> <br>  <b>DIN-Schienenhalterung</b> <br>  <b>GPS / GLONASS:</b> 3V aktive Antenne <br>  <b>Serielle Schnittstellen:</b> RS-232/485 <br>  <b>E / A-Schlussfolgerungen:</b> 2 digitale Eing√§nge (0-3 V / 0-30 V, galvanisch getrennt), 1 analoger Eingang (0-24 V), 1 digitaler Ausgang (30 V, 250 mA offener Kollektor), 1 Relaisausgang (40 V, 4 A SPST) ) <br><br><img src="https://habrastorage.org/webt/ng/xk/nj/ngxknj3_9ngbozqpdctv0toxxiq.jpeg"><br><br>  Um die SIM-Karte zu installieren, m√ºssen Sie die vier Schrauben l√∂sen und die hintere Abdeckung entfernen. <br><br>  Nun, dies ist eine Gelegenheit, die Innenseiten genauer zu betrachten. <br><br> <a href=""><img width="200" src="https://habrastorage.org/webt/ks/9n/gw/ks9ngwqzqrk8cdyteyryts03rps.jpeg"></a> <a href=""><img width="200" src="https://habrastorage.org/webt/sx/fq/xw/sxfqxwf0yj8weghadcmgm2zzzly.jpeg"></a> <a href=""><img width="200" src="https://habrastorage.org/webt/9u/bc/ex/9ubcexugw11vsq7ijtqmf4jh8xa.jpeg"></a> <a href=""><img width="130" src="https://habrastorage.org/webt/fp/uu/r8/fpuur8zzgn5_xr_js_zerdo1bus.jpeg"></a>  <font color="99999">anklickbar</font> <br><br>  Das Modemteil besteht aus einem Schild, das auf der Hauptplatine getragen wird. <br>  In der Ecke sehen Sie das Relais f√ºr eine leistungsstarke Lastausgabe an die E / A-Pins. <br><br>  Der funktionsreichste Router im Test.  Es verf√ºgt √ºber ein kabelgebundenes WAN und erm√∂glicht die Verwendung von Wi-Fi im Stationsmodus (Client-Modus) als separates WAN.  Das hei√üt, es kann vier Backup-Internetkan√§le haben. <br><br><img src="https://habrastorage.org/webt/xg/ct/vx/xgctvxwfg5i2_knyago4zpuxidq.png"><br><br>  Das Webinterface gibt sofort LuCI von OpenWRT aus.  Dies zeigt sich sowohl im Design, das sie nicht zu verschleiern versuchten, als auch in den Pfaden in der URL.  Meiner Meinung nach ist dies eher ein Plus, da es einfach ist, das System selbst fertigzustellen.  Zur Firmware hinzugef√ºgte industrielle Funktionen: Modbus, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">VRRP</a> , MQTT.  √úber Modbus und MQTT k√∂nnen Sie grundlegende Funktionen steuern, den Netzwerkstatus, GPS-Koordinaten, die Temperatur abrufen, Profile wechseln, den Router neu starten und E / A-Pins verwalten. <br><br>  Die √úberwachung der Internetkan√§le erfolgt √ºber das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Multiwan-</a> Paket, das im OpenWRT-Wiki als veraltet bezeichnet wird.  Stattdessen wird mwan3 empfohlen. <br><br><div class="spoiler">  <b class="spoiler_title">√úbersicht √ºber die Weboberfl√§che und zus√§tzliche Funktionen</b> <div class="spoiler_text"><h3>  E / A-Schlussfolgerungen </h3><br>  E / A-Pins werden √ºber die Weboberfl√§che verwaltet. Sie k√∂nnen den Status sofort anzeigen und jeden Pin umbenennen.  Dies ersetzt keinen vollwertigen Mikrocontroller, ist jedoch m√∂glicherweise f√ºr eine einfache Automatisierung geeignet.  √ñffnen Sie beispielsweise die T√ºr oder heben Sie die Barriere per SMS, MQTT oder HTTP an, f√ºhren Sie eine Aktion aus, wenn der Sensor ausgel√∂st wird, und senden Sie eine Benachrichtigung dar√ºber.  Sehr interessante Funktionalit√§t, mit der Sie mit einem Ger√§t auskommen k√∂nnen. <br><br><img width="700" alt="Trigger-Konfigurationsschnittstelle f√ºr den Analogeingang des Termit CR41P-Routers" src="https://habrastorage.org/webt/v6/v6/zg/v6v6zgacpsc0cur47tedyaeppvc.png"><br>  <font color="99999">Trigger-Konfigurationsschnittstelle f√ºr Analogeingang.</font>  <font color="99999">Sie k√∂nnen den Spannungsbereich angeben, in dem der Trigger arbeiten soll, oder ihn so konfigurieren, dass er beim Verlassen des Bereichs ausgel√∂st wird</font> <br><br><h3>  Serielle Schnittstellen RS-232/485 </h3><br>  Die RS-232-Schnittstelle besteht physisch aus einem DB9-Anschluss (COM-Port) und RS-485 aus einem abnehmbaren Klemmenblock.  In der Weboberfl√§che k√∂nnen Sie vier Port-Betriebsmodi ausw√§hlen: <br><br><ul><li>  <b>Systemkonsole</b> - SSH-Zugriff </li><li>  <b>Seriell √ºber IP</b> - Weiterleitung einer seriellen Schnittstelle √ºber das Internet </li><li>  <b>Modbus Gateway</b> - <b>Modbus</b> TCP &lt;-&gt; RTU-Konverter </li><li>  <b>NTRIP-Client</b> - Daten√ºbertragung von GPS </li></ul><br><img alt="Auswahl der Betriebsart der seriellen Schnittstellen im Termit CR41P-Router" src="https://habrastorage.org/webt/gu/3w/sw/gu3wswygt6lcqwfryyxmafu66ps.png"><br>  <font color="99999">Ausw√§hlen eines Betriebsmodus f√ºr die serielle Schnittstelle</font> <br><br><h3>  GPS </h3><br>  Das GPS-Modul ist in den Modemchip integriert und als USB-Ger√§t erh√§ltlich.  Sie k√∂nnen die Koordinaten des Ger√§ts verfolgen und die Systemuhr √ºber GPS synchronisieren, w√§hrend der Router ein NTP-Server sein und auch ohne Internet eine genaue Zeit f√ºr Ger√§te im Netzwerk bereitstellen kann.  Es gibt eine <abbr title="Geografische Zonenfunktion">Geofencing-</abbr> Funktion, mit der Sie ein geografisches Gebiet als Ausl√∂ser festlegen k√∂nnen, der beim Besuch oder Verlassen einer Zone ausgel√∂st wird.  Dies kann beim Roaming hilfreich sein, wenn Sie Ihre Heimatregion verlassen.  Es kann nur eine Zone definiert werden und nur innerhalb eines Radius eines Punkts, dh die Zone ist immer ein Kreis. <br><br><img src="https://habrastorage.org/webt/iu/f5/qu/iuf5qu-jiyfxqoddzb-pnsmkviw.png"><br>  <font color="99999">Festlegen des geografischen Gebiets, in dem der Ausl√∂ser ausgel√∂st werden soll</font> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Dmesg-Ausgabe</b> <div class="spoiler_text">  [0.000000] Linux-Version 3.18.44 (gediminas @ gediminas-H110M-S2H) (gcc-Version 4.8.3 (OpenWrt / Linaro GCC 4.8-2014.04 r40569)) # 14 Fr 25 Mai 15:09:41 EEST 2018 <br>  [0.000000] MyLoader: sysp = 30fe861a, boardp = 21046795, parts = 5c8953fe <br>  [0.000000] Bootconsole [Early0] aktiviert <br>  [0.000000] Die CPU0-Revision lautet: 0001974c (MIPS 74Kc) <br>  [0.000000] SoC: Atheros AR9344 Rev. 3 <br>  [0.000000] Bestimmte physische RAM-Zuordnung: <br>  [0.000000] Speicher: 08000000 @ 00000000 (verwendbar) <br>  [0.000000] Initrd nicht gefunden oder leer - deaktiviert initrd <br>  [0.000000] Zonenbereiche: <br>  [0.000000] Normal [mem 0x00000000-0x07ffffff] <br>  [0.000000] Start der beweglichen Zone f√ºr jeden Knoten <br>  [0.000000] Fr√ºhe Speicherknotenbereiche <br>  [0.000000] Knoten 0: [mem 0x00000000-0x07ffffff] <br>  [0.000000] Initmem-Setup-Knoten 0 [mem 0x00000000-0x07ffffff] <br>  [0.000000] Auf Knoten 0 Gesamtseiten: 32768 <br>  [0.000000] free_area_init_node: Knoten 0, pgdat 803802b0, node_mem_map 81000000 <br>  [0.000000] Normale Zone: 256 Seiten f√ºr Memmap <br>  [0.000000] Normale Zone: 0 Seiten reserviert <br>  [0.000000] Normale Zone: 32768 Seiten, LIFO-Stapel: 7 <br>  [0.000000] Prim√§rer Befehls-Cache 64 KB, VIPT, 4-Wege, Zeilengr√∂√üe 32 Byte. <br>  [0.000000] Prim√§rer Datencache 32 KB, 4-Wege, VIPT, Cache-Aliase, Zeilengr√∂√üe 32 Byte <br>  [0,000000] pcpu-alloc: s0 r0 d32768 u32768 alloc = 1 * 32768 <br>  [0,000000] pcpu-Zuweisung: [0] 0 <br>  [0.000000] 1 Zonelisten in Zonenreihenfolge erstellt, Mobilit√§tsgruppierung aktiviert.  Gesamtseiten: 32512 <br>  [0.000000] Kernel-Befehlszeile: board = TLT-RUT900 console = ttyS0,115200 rootfstype = squashfs, jffs2 noinitrd lpj = 1370112 quiet loglevel = 3 <br>  [0.000000] PID-Hash-Tabelleneintr√§ge: 512 (Reihenfolge: -1, 2048 Byte) <br>  [0.000000] Eintr√§ge in der Dentry-Cache-Hash-Tabelle: 16384 (Reihenfolge: 4, 65536 Byte) <br>  [0.000000] Eintr√§ge in der Inode-Cache-Hash-Tabelle: 8192 (Reihenfolge: 3, 32768 Byte) <br>  [0.000000] ErrCtl-Register schreiben = 00000000 <br>  [0.000000] Readback ErrCtl register = 00000000 <br>  [0.000000] Speicher: 125728K / 131072K verf√ºgbar (2611K-Kernelcode, 155K-RW-Daten, 552K-Rodata, 256K-Init, 189K-BSS, 5344K reserviert) <br>  [0.000000] SLUB: HWalign = 32, Order = 0-3, MinObjects = 0, CPUs = 1, Nodes = 1 <br>  [0,000000] NR_IRQS: 83 <br>  [0.000000] Takte: CPU: 550.000 MHz, DDR: 400.000 MHz, AHB: 200.000 MHz, Ref: 40.000 MHz <br>  [0.000000] Voreinstellungswert der Kalibrierungsverz√∂gerungsschleife (√ºbersprungen) ... 274.02 BogoMIPS (lpj = 1370112) <br>  [0.000000] pid_max: Standard: 32768 Minimum: 301 <br>  [0.000000] Eintr√§ge in der Mount-Cache-Hash-Tabelle: 1024 (Reihenfolge: 0, 4096 Byte) <br>  [0.000000] Eintr√§ge in der Mountpoint-Cache-Hash-Tabelle: 1024 (Reihenfolge: 0, 4096 Byte) <br>  [0.000000] NET: Registrierte Protokollfamilie 16 <br>  [0,000000] MIPS: Maschine ist TELTONIKA TLT-RUT900 <br>  [0.450000] pca953x 0-0074: Interrupt-Unterst√ºtzung nicht kompiliert <br>  [0.450000] i2c-gpio i2c-gpio.0: Verwenden der Pins 17 (SDA) und 16 (SCL) <br>  [0.450000] Auf Clockource MIPS umgestellt <br>  [0.450000] NET: Registrierte Protokollfamilie 2 <br>  [0.450000] TCP hat Hash-Tabelleneintr√§ge eingerichtet: 1024 (Reihenfolge: 0, 4096 Bytes) <br>  [0.450000] TCP-Bindungs-Hash-Tabelleneintr√§ge: 1024 (Reihenfolge: 0, 4096 Byte) <br>  [0.450000] TCP: Hash-Tabellen konfiguriert (etablierte 1024-Bindung 1024) <br>  [0.450000] TCP: Reno registriert <br>  [0.450000] UDP-Hash-Tabelleneintr√§ge: 256 (Reihenfolge: 0, 4096 Byte) <br>  [0.450000] UDP-Lite-Hash-Tabelleneintr√§ge: 256 (Reihenfolge: 0, 4096 Byte) <br>  [0.450000] NET: Registrierte Protokollfamilie 1 <br>  [0.450000] PCI: CLS 0 Bytes, Standard 32 <br>  [0.460000] Futex-Hash-Tabelleneintr√§ge: 256 (Reihenfolge: -1, 3072 Bytes) <br>  [0.460000] squashfs: Version 4.0 (31.01.2009) Phillip Lougher <br>  [0.460000] jffs2: Version 2.2 (NAND) (ZUSAMMENFASSUNG) (LZMA) (RTIME) (CMODE_PRIORITY) ¬© 2001-2006 Red Hat, Inc. <br>  [0.460000] msgmni wurde auf 245 gesetzt <br>  [0.460000] io scheduler noop registriert <br>  [0.460000] io Scheduler-Frist registriert (Standard) <br>  [0.460000] Seriell: 8250/16550 Treiber, 1 Ports, IRQ-Freigabe deaktiviert <br>  [0.460000] Konsole [ttyS0] deaktiviert <br>  [0.480000] serial8250.0: ttyS0 bei MMIO 0x18020000 (irq = 11, base_baud = 2500000) ist ein 16550A <br>  [0.480000] Konsole [ttyS0] aktiviert <br>  [0.480000] Bootconsole [Early0] deaktiviert <br>  [0.480000] ar934x-hs-uart.0: ttyATH0 bei MMIO 0x18500000 (irq = 14, base_baud = 2500000) ist ein AR934X-UART <br>  [0.500000] m25p80 spi0.0: gd25q128 gefunden, erwartet m25p80 <br>  [0.500000] m25p80 spi0.0: gd25q128 (16384 KB) <br>  [0.500000] 7 Teltonika-Partitionen auf MTD-Ger√§t spi0.0 gefunden <br>  [0.500000] Erstellen von 7 MTD-Partitionen auf "spi0.0": <br>  [0.500000] 0x000000000000-0x000000020000: "U-Boot" <br>  [0.500000] 0x000000020000-0x000000030000: "config" <br>  [0.500000] 0x000000030000-0x000000040000: "art" <br>  [0.500000] 0x000000040000-0x0000001630ac: "Kernel" <br>  [0.500000] 0x0000001630ac-0x000000f70000: "rootfs" <br>  [0.500000] mtd: Ger√§t 4 (rootfs) ist als Root-Dateisystem festgelegt <br>  [0.510000] 1 Squashfs-Split-Partitionen auf MTD-Ger√§te-Rootfs gefunden <br>  [0.510000] 0x000000b30000-0x000000f70000: "rootfs_data" <br>  [0.510000] 0x000000040000-0x000000f70000: "Firmware" <br>  [0.510000] 0x000000f70000-0x000001000000: "Ereignisprotokoll" <br>  [0.520000] libphy: ag71xx_mdio: gepr√ºft <br>  [1.110000] ag71xx-mdio.1: Ein integrierter AR934X-Switch wurde gefunden <br>  [1.140000] eth0: Atheros AG71xx bei 0xba000000, IRQ 5, Modus: GMII <br>  [1.730000] ag71xx ag71xx.0: verbunden mit PHY unter ag71xx-mdio.1: 04 [uid = 004dd042, driver = Generic PHY] <br>  [1.730000] eth1: Atheros AG71xx bei 0xb9000000, IRQ 4, Modus: MII <br>  [1.740000] TCP: kubisch registriert <br>  [1.740000] NET: Registrierte Protokollfamilie 17 <br>  [1.740000] Bridge: Die automatische Filterung √ºber arp / ip / ip6tables ist veraltet.  Aktualisieren Sie Ihre Skripte, um br_netfilter zu laden, wenn Sie dies ben√∂tigen. <br>  [1.740000] Bridge-Firewall registriert <br>  [1.740000] 8021q: 802.1Q VLAN Support v1.8 <br>  [1.750000] VFS: Mounted Root (Squashfs-Dateisystem) schreibgesch√ºtzt auf Ger√§t 31: 4. <br>  [1.750000] Freigeben von nicht verwendetem Kernelspeicher: 256 KB (803a0000 - 803e0000) <br>  [5.030000] usbcore: Registrierter neuer Schnittstellentreiber usbfs <br>  [5.030000] usbcore: Registrierter neuer Schnittstellentreiber-Hub <br>  [5.030000] usbcore: registrierter neuer Ger√§tetreiber usb <br>  [5.050000] SCSI-Subsystem initialisiert <br>  [5.050000] ehci_hcd: USB 2.0-Treiber f√ºr 'Enhanced' Host Controller (EHCI) <br>  [5.050000] ehci-Plattform: Generischer EHCI-Plattformtreiber <br>  [5.050000] ehci-Plattform ehci-Plattform: EHCI Host Controller <br>  [5.050000] ehci-Plattform ehci-Plattform: Neuer USB-Bus registriert, Busnummer 1 zugewiesen <br>  [5.060000] ehci-Plattform ehci-Plattform: TX-TX IDP-Fix aktiviert <br>  [5.060000] ehci-Plattform ehci-Plattform: IRQ 3, Io Mem 0x1b000000 <br>  [5.080000] ehci-Plattform ehci-Plattform: USB 2.0 gestartet, EHCI 1.00 <br>  [5.080000] Hub 1-0: 1.0: USB-Hub gefunden <br>  [5.080000] Hub 1-0: 1.0: 1 Port erkannt <br>  [5.080000] uhci_hcd: USB Universal Host Controller-Schnittstellentreiber <br>  [5.090000] usbcore: Registrierter neuer Schnittstellentreiber usb-storage <br>  [5.400000] USB 1-1: Neues Hochgeschwindigkeits-USB-Ger√§t Nummer 2 mit ehci-Plattform <br>  [5.550000] Hub 1-1: 1.0: USB-Hub gefunden <br>  [5.550000] Hub 1-1: 1.0: 3-Ports erkannt <br>  [5.830000] USB 1-1.1: Neues Full-Speed-USB-Ger√§t Nummer 3 mit ehci-Plattform <br>  [6.620000] mount_root: Laden von kmods aus der internen √úberlagerung <br>  [7.080000] jffs2: Hinweis: (339) jffs2_build_xattr_subsystem: Komplettes Build-Xattr-Subsystem, 0 von xdatum (0 nicht markiert, 0 verwaist) und 0 von xref (0 tot, 0 verwaist) gefunden. <br>  Block [7.080000]: Versuch, / tmp / jffs_cfg / Upper / etc / config / fstab zu laden <br>  [7.130000] Block: Extroot: nicht konfiguriert <br>  [7.240000] jffs2: Hinweis: (336) jffs2_build_xattr_subsystem: Komplettes Build-Xattr-Subsystem, 0 von xdatum (0 nicht markiert, 0 verwaist) und 0 von xref (0 tot, 0 verwaist) gefunden. <br>  Block [7.430000]: Versuch, / tmp / jffs_cfg / Upper / etc / config / fstab zu laden <br>  [7.480000] Block: extroot: nicht konfiguriert <br>  [7.480000] mount_root: Umschalten auf jffs2-Overlay <br>  [9.980000] zuf√§llig: ubusd urandom read mit 18 verf√ºgbaren Entropiebits <br>  [11.260000] NET: Registrierte Protokollfamilie 10 <br>  [11.410000] ntfs: Treiber 2.1.31 [Flags: R / O-MODUL]. <br>  [11.430000] Initialisierung des XFRM-Netlink-Sockets <br>  [11.430000] NET: Registrierte Protokollfamilie 15 <br>  [11.440000] tun: Universal TUN / TAP-Ger√§tetreiber, 1.6 <br>  [11.440000] tun: ¬© 1999-2004 Max Krasnyansky &lt;maxk@qualcomm.com&gt; <br>  [11.500000] l2tp_core: L2TP-Kerntreiber, V2.0 <br>  [11.500000] l2tp_netlink: L2TP-Netlink-Schnittstelle <br>  [11.510000] gre: GRE √ºber IPv4-Demultiplexertreiber <br>  [11.510000] ip_gre: GRE √ºber IPv4-Tunneltreiber <br>  [11.540000] ip6_tables: ¬© 2000-2006 Netfilter Core Team <br>  [11.580000] nf_conntrack Version 0.5.0 (1968 Eimer, max. 7872) <br>  [12.110000] lp: Treiber geladen, aber keine Ger√§te gefunden <br>  [12.130000] ppdev: Treiber f√ºr den parallelen Port im Benutzerbereich <br>  [12.290000] u32-Klassifikator <br>  [12.290000] √úberpr√ºfung des Eingabeger√§ts aktiviert <br>  [12.290000] Aktionen konfiguriert <br>  [12.330000] Aktion spiegeln / umleiten ein <br>  [12.460000] cdc_acm 1-1.1: 1.0: Dieses Ger√§t kann keine eigenen Anrufe t√§tigen.  Es ist kein Modem. <br>  [12.460000] cdc_acm 1-1.1: 1.0: ttyACM0: USB ACM-Ger√§t <br>  [12.460000] usbcore: Registrierter neuer Schnittstellentreiber cdc_acm <br>  [12.460000] cdc_acm: USB Abstract Control Model-Treiber f√ºr USB-Modems und ISDN-Adapter <br>  [12.470000] usbcore: Registrierter neuer Schnittstellentreiber cdc_wdm <br>  [12.500000] Laden von Modulen, die von der Linux-Version v4.4-rc5-1913-gc8fdf68 zur√ºckportiert wurden <br>  [12.500000] Von backports.git generierter Backport-20151218-0-g2f58d9d <br>  [12.690000] Ebtables v2.0 registriert <br>  [12.730000] ip_tables: ¬© 2000-2006 Netfilter Core Team <br>  [12.820000] Netfilter-Nachrichten √ºber NETLINK v0.30. <br>  [12.850000] usbcore: Registrierter neuer Schnittstellentreiber usblp <br>  [12.890000] usbcore: Registrierter neuer Schnittstellentreiber usbserial <br>  [12.890000] usbcore: Registrierter neuer Schnittstellentreiber usbserial_generic <br>  [12.890000] usbserial: USB Serial Support f√ºr Generika registriert <br>  [12.960000] xt_coova: bereit <br>  [13.050000] xt_time: Die Kernel-Zeitzone ist -0000 <br>  [13.050000] usbcore: Registrierter neuer Schnittstellentreiber ark3116 <br>  [13.050000] usbserial: F√ºr ark3116 registrierte serielle USB-Unterst√ºtzung <br>  [13.060000] usbcore: Registrierter neuer Schnittstellentreiber belkin_sa <br>  [13.060000] usbserial: USB Serial Support f√ºr Belkin / Peracom / GoHubs USB Serial Adapter registriert <br>  [13.090000] usbcore: Registrierter neuer Schnittstellentreiber cdc_ether <br>  [13.170000] usbcore: Registrierter neuer Schnittstellentreiber cdc_ncm <br>  [13.860000] usbcore: Registrierter neuer Schnittstellentreiber ch341 <br>  [13.860000] usbserial: USB serielle Unterst√ºtzung f√ºr ch341-uart registriert <br>  [13.860000] usbcore: Registrierter neuer Schnittstellentreiber cp210x <br>  [13.860000] usbserial: F√ºr cp210x registrierte serielle USB-Unterst√ºtzung <br>  [13.860000] usbcore: Registrierter neuer Schnittstellentreiber cypress_m8 <br>  [13.860000] usbserial: USB Serielle Unterst√ºtzung f√ºr DeLorme Earthmate USB registriert <br>  [13.860000] usbserial: Serielle USB-Unterst√ºtzung f√ºr HID-&gt; COM RS232-Adapter registriert <br>  [13.860000] usbserial: Serielle USB-Unterst√ºtzung f√ºr Nokia CA-42 V2 Adapter registriert <br>  [13.880000] usbcore: Registrierter neuer Schnittstellentreiber ftdi_sio <br>  [13.880000] usbserial: USB Serial Support f√ºr FTDI USB Serial Device registriert <br>  [13.880000] usbcore: Registrierter neuer Schnittstellentreiber huawei_cdc_ncm <br>  [13.900000] usbcore: Neue Schnittstelle f√ºr den Schnittstellentreiber registriert <br>  [13.900000] usbserial: F√ºr Keyspan registrierte serielle USB-Unterst√ºtzung - (ohne Firmware) <br>  [13.900000] usbserial: Serielle USB-Unterst√ºtzung f√ºr Keyspan 1-Portadapter registriert <br>  [13.900000] usbserial: Serielle USB-Unterst√ºtzung f√ºr Keyspan 2-Portadapter registriert <br>  [13.900000] usbserial: Serielle USB-Unterst√ºtzung f√ºr Keyspan 4-Port-Adapter registriert <br>  [13.990000] ctnetlink v0.93: Registrierung bei nfnetlink. <br>  [14.020000] usbcore: Registrierter neuer Schnittstellentreiber pl2303 <br>  [14.020000] usbserial: USB serielle Unterst√ºtzung f√ºr pl2303 registriert <br>  [14.030000] PPP generischer Treiber Version 2.4.2 <br>  [14.040000] PPP MPPE-Komprimierungsmodul registriert <br>  [14.040000] NET: Registrierte Protokollfamilie 24 <br>  [14.040000] PPTP-Treiberversion 0.8.5 <br>  [14.050000] usbcore: Registrierter neuer Schnittstellentreiber qmi_wwan <br>  [14.140000] l2tp_ppp: PPPoL2TP-Kerneltreiber, V2.0 <br>  [14.140000] usbcore: Neue Schnittstellentreiberoption registriert <br>  [14.140000] usbserial: Serielle USB-Unterst√ºtzung f√ºr GSM-Modem registriert (1 Port) <br>  [14.160000] usbcore: Registrierter neuer Schnittstellentreiber qcserial <br>  [14.160000] usbserial: Serielle USB-Unterst√ºtzung f√ºr Qualcomm USB-Modem registriert <br>  [14.200000] ath: EEPROM-Regdomain: 0x0 <br>  [14.200000] ath: EEPROM gibt an, dass der Standard-L√§ndercode verwendet werden soll <br>  [14.200000] ath: EEPROM-L√§nder-&gt; regdmn-Kartensuche durchf√ºhren <br>  [14.200000] ath: L√§nderkarten zum regdmn-Code: 0x3a <br>  [14.200000] ath: Verwendetes Land alpha2: USA <br>  [14.200000] ath: Regpair verwendet: 0x3a <br>  [14.210000] ieee80211 phy0: Ausgew√§hlter Algorithmus zur Ratensteuerung 'minstrel_ht' <br>  [14.210000] ieee80211 phy0: Atheros AR9340 Rev: 3 mem = 0xb8100000, irq = 47 <br>  [14.280000] mmc_spi spi0.1: ANNAHME einer Steckplatzleistung von 3,2-3,4 V. <br>  [17.330000] mmc_spi spi0.1: SD / MMC-Host mmc0, kein DMA, kein WP, kein Ausschalten <br>  [17.330000] mmc_spi spi0.1: Keine Unterst√ºtzung f√ºr die Volt der Karte <br>  [17.330000] mmc0: Fehler -22 beim Initialisieren der SDIO-Karte <br>  [17.330000] mmc_spi spi0.1: Keine Unterst√ºtzung f√ºr die Volt der Karte <br>  [17.330000] mmc0: Fehler -22 beim Initialisieren der SD-Karte <br>  [17.340000] mmc_spi spi0.1: Keine Unterst√ºtzung f√ºr die Volt der Karte <br>  [17.340000] mmc0: Fehler -22 beim Initialisieren der MMC-Karte <br>  [20.700000] USB 1-1.3: Neues Hochgeschwindigkeits-USB-Ger√§t Nummer 4 mit ehci-Plattform <br>  [20.920000] Option 1-1.3: 1.0: GSM-Modemkonverter (1 Port) erkannt <br>  [20.920000] USB 1-1.3: GSM-Modemkonverter (1 Port) jetzt an ttyUSB0 angeschlossen <br>  [20.930000] Option 1-1.3: 1.1: GSM-Modemkonverter (1 Port) erkannt <br>  [20.940000] USB 1-1.3: GSM-Modemkonverter (1 Port) jetzt an ttyUSB1 angeschlossen <br>  [20.950000] Option 1-1.3: 1.2: GSM-Modemkonverter (1 Port) erkannt <br>  [20.950000] USB 1-1.3: GSM-Modemkonverter (1 Port) jetzt an ttyUSB2 angeschlossen <br>  [20.960000] Option 1-1.3: 1.3: GSM-Modemkonverter (1 Port) erkannt <br>  [20.970000] USB 1-1.3: GSM-Modemkonverter (1 Port) jetzt an ttyUSB3 angeschlossen <br>  [21.000000] qmi_wwan 1-1.3: 1.4: cdc-wdm0: USB-WDM-Ger√§t <br>  [21.000000] qmi_wwan 1-1.3: 1.4: Quectel EC21 &amp; EC25 &amp; EC20 R2.0 arbeiten im RawIP-Modus <br>  [21.010000] qmi_wwan 1-1.3: 1.4 wwan0: Registrieren Sie 'qmi_wwan' bei usb-ehci-platform-1.3, WWAN / QMI-Ger√§t, 3a: a9: 1d: 1a: 9e: d9 <br>  [25.600000] jffs2: Hinweis: (1621) jffs2_build_xattr_subsystem: Komplettes Build-Xattr-Subsystem, 0 von xdatum (0 deaktiviert, 0 verwaist) und 0 von xref (0 tot, 0 verwaist) gefunden. <br>  [28.880000] Ger√§t eth0 ist in den Promiscuous-Modus eingetreten <br>  [28.890000] br-lan: Port 1 (eth0) ist in den Weiterleitungsstatus eingetreten <br>  [28.890000] br-lan: Port 1 (eth0) ist in den Weiterleitungsstatus eingetreten <br>  [30.010000] br-lan: Port 1 (eth0) ist deaktiviert <br>  [34.410000] Ger√§t wlan0 ist in den Promiscuous-Modus eingetreten <br>  [34.420000] br-lan: Port 2 (wlan0) ist in den Weiterleitungsstatus eingetreten <br>  [34.420000] br-lan: Port 2 (wlan0) ist in den Weiterleitungsstatus eingetreten <br>  [34.460000] br-lan: Port 2 (wlan0) ist deaktiviert <br>  [41.530000] br-lan: Port 2 (wlan0) ist in den Weiterleitungsstatus eingetreten <br>  [41.530000] br-lan: Port 2 (wlan0) ist in den Weiterleitungsstatus eingetreten <br>  [43.530000] br-lan: Port 2 (wlan0) ist in den Weiterleitungsstatus eingetreten <br>  [51.350000] Anschl√ºsse LED EIN <br>  [54.390000] zuf√§llig: Der nicht blockierende Pool wird initialisiert <br></div></div><br><h3>  WAN-Setup </h3><br>  Priorit√§tseinstellungsschnittstelle f√ºr Internetkan√§le.  Sie k√∂nnen eine prim√§re und zwei Sicherungen ausw√§hlen.  In unserem Fall wird das Modem als prim√§res und das kabelgebundene WAN als Backup ausgew√§hlt. <br><br><img src="https://habrastorage.org/webt/aw/v-/0f/awv-0fbsj-uhrbujobbdf1ajvju.png"><br>  <font color="99999">Priorisierung von Internetkan√§len.</font>  <font color="99999">Sie k√∂nnen Prim√§r und Backup ausw√§hlen</font> <br><br>  Es ist zu beachten, dass sich nur ein Modem (Funkmodul) im Router befindet und gleichzeitig nur eine SIM-Karte im Netzwerk sein kann.  Das √úberwachungssystem √ºberpr√ºft die Internetverf√ºgbarkeit in jedem Kanal mithilfe von Ping-Anforderungen an einen bestimmten Host.  Gleichzeitig k√∂nnen Sie nicht √ºberpr√ºfen, welche der beiden SIM-Karten √ºber einen Internetzugang verf√ºgt. Sie k√∂nnen nur zu einem anderen Kanal wechseln: Kabel oder WLAN.  Die Bedingungen f√ºr den Wechsel von SIM-Karten werden separat konfiguriert und h√§ngen nicht von der allgemeinen √úberwachung ab. <br><br><img src="https://habrastorage.org/webt/ac/sp/0i/acsp0ir4dzg4nn9scyraczlfx2e.png"><br>  <font color="99999">Einrichten der √úberwachung der Verf√ºgbarkeit des Internetkanals.</font>  <font color="99999">Sie k√∂nnen den zu √ºberpr√ºfenden Host, die Intervalle und die Anzahl der Versuche angeben</font> <br><br>  Da die √úberwachung der Barrierefreiheit (Multiwan-Paket von openwrt) das Modem als eine Schnittstelle wahrnimmt, kann es keine SIM-Umschaltung initiieren, wenn das Internet auf dem Modem nicht verf√ºgbar ist.  Das Multiwan-Paket kann nur die Hauptnetzwerkschnittstelle wechseln.  Die Bedingungen f√ºr das Umschalten der SIM-Karte werden separat festgelegt, und unter den Bedingungen kann nur Folgendes ausgew√§hlt werden: schwaches Signal, Verkehrslimit, Roaming, kein Netzwerk, keine PPP-Verbindung.  In einigen F√§llen kann es sein, dass das Modem die SIM-Karte nicht wechselt, auch wenn es kein Internet hat.  Zum Beispiel, wenn der Betreiber einen Netzwerkfehler hat, w√§hrend das Modem eine IP-Adresse hat, oder wenn der Betreiber den Zugriff auf das Netzwerk wegen Nichtzahlung blockiert und die Anforderung f√ºr einen Stub mit einer Zahlungsschnittstelle umleitet.  In diesem Fall ist keine einzige Bedingung zum Umschalten der SIM-Karte erf√ºllt, da eine formelle Verbindung zum Betreiber besteht. <br><br><img src="https://habrastorage.org/webt/z4/fn/_v/z4fn_v_hkzzwdmtt8v8zbqmstmy.png"><br>  <font color="99999">Das Festlegen der Bedingungen f√ºr das Umschalten zwischen SIM-Karten funktioniert nicht in Verbindung mit der √úberwachung der Verf√ºgbarkeit des Internets</font> <br><br><h3>  Crash-Simulation </h3><br>  Wir konnten keine M√∂glichkeit finden, die Bedingungen f√ºr das Umschalten der SIM-Karte auf die Backup-Karte in diesem Router programmgesteuert zu simulieren. Daher werden wir die Umschaltung auf den Backup-Kabelkanal √ºberpr√ºfen.  Trennen Sie dazu die Antennen vom Router und sehen Sie sich die Grafik an.  Die Umschaltzeit betr√§gt durchschnittlich 12-15 Sekunden, wobei die Wiederherstellung der VPN-Verbindung ber√ºcksichtigt wird.  Sie k√∂nnen diese Zeit verk√ºrzen, indem Sie das Inspektionsintervall und die Anzahl der verlorenen Pakete zum Umschalten von Triggern verringern. Zu aggressive √úberwachungseinstellungen f√ºhren jedoch h√§ufig zu Fehlalarmen, wenn die Verbindung nur einige Sekunden lang unterbrochen wird. <br><br><img src="https://habrastorage.org/webt/ld/x7/ky/ldx7kyt_jneacpbnn7k8bwnbtpm.png"><br>  <font color="99999">Die Umschaltzeit zum Sicherungskanal betr√§gt ca. 15 Sekunden</font> <br><br><h3>  Fazit </h3><br>  Ein Router mit vielen zus√§tzlichen Funktionen.  Mit dem E / A-Modul wurde eine interessante Arbeit geleistet: Es gibt analoge und digitale Ausg√§nge, ein Leistungsrelais.  Sie k√∂nnen Pins fernsteuern und Trigger konfigurieren.  Auf diese Weise k√∂nnen Sie eine einfache Automatisierung mit externen Peripherieger√§ten auf einem einzigen Router erstellen.  Verwalten Sie beispielsweise ein Gew√§chshaus oder eine Raumheizung. <br><br><h3>  Vorteile </h3><br><ul><li>  Viele zus√§tzliche Funktionen </li><li>  OpenWRT-Plattform </li><li>  Unterst√ºtzt LTE Cat 4 </li><li>  Drei Arten von WAN: Modem, Ethernet, WiFi </li></ul><br><h3>  Nachteile </h3><br><ul><li>  Sie k√∂nnen nicht f√ºr jede SIM-Karte unterschiedliche √úberwachungsadressen angeben </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Bedingungen f√ºr den Wechsel zu einer Backup-SIM-Karte sind unabh√§ngig von der √úberwachung der Internetzugang </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Robustel r2000 </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Router wird von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Euromobile (euromobile.ru) bereitgestellt. </font></font></a> <br><br><img src="https://habrastorage.org/webt/n1/qj/yl/n1qjyl7k6qlzchb-xrfvodxmzq8.jpeg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Atheros 533 MHz </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 64 MB </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash-Speicher:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 16 MB </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Huawei ME909s-120 (LTE Cat 4) </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Geschlossener Linux-basierter </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Router mit zwei Ethernet-Ports und einem Minimum an Funktionen. </font><font style="vertical-align: inherit;">Nur einer der LAN-Ports kann als WAN fungieren. </font><font style="vertical-align: inherit;">Die Firmware ist geschlossen, es gibt keinen Root-Zugriff √ºber SSH. </font><font style="vertical-align: inherit;">Die Konsole ist auf ihren Interpreter mit mehreren Befehlen beschr√§nkt (wie Ubiquiti-Ger√§te).</font></font><br><br><img src="https://habrastorage.org/webt/fr/dy/xt/frdyxt3ne19neo2alb3jnlrhaks.png"><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úbersicht √ºber die Web-Benutzeroberfl√§che</font></font></b> <div class="spoiler_text"><h3>  VPN </h3><br>    OpenVPN  IPsec IKEv2. <br><br><img src="https://habrastorage.org/webt/tc/ui/94/tcui94qphqqtsiobuqim33ex75w.png"><br> <font color="99999">  IPsec-</font> <br><br><img src="https://habrastorage.org/webt/wy/5y/tc/wy5ytcup64mukqbx7cwus-s5j2y.png"><br> <font color="99999">  OpenVPN-</font> <br><br><h3>  </h3><br>      syslog <br><br><img src="https://habrastorage.org/webt/qe/bm/wb/qebmwbndt6houxtpz_wmn0ruwiu.png"><br><br>           email  SMS <br><br><img src="https://habrastorage.org/webt/5n/rp/de/5nrpdefpw527-oaiomtkojtdufw.png"><br><br><h3> User LED </h3><br>         . ,   VPN  . <br><br><img src="https://habrastorage.org/webt/yx/or/ds/yxordsyltko7ccvnoryjzllsjmq.png"><br></div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WAN-Setup </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt verschiedene Sicherungs- und Ausgleichsmodi. </font><font style="vertical-align: inherit;">Die zweite Option kann n√ºtzlich sein, um schnell zwischen Kan√§len zu wechseln.</font></font><br><br><ul><li> <b>Cold backup:</b>    ,    </li><li> <b>Warm backup:</b>   ,    (   SIM ) <br></li><li> <b>Load balancing:</b>     </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In den Standardeinstellungen ist aus irgendeinem Grund die R√ºckkehr zum Hauptkanal nach dem Umschalten auf den Sicherungskanal deaktiviert. Dies wird im Wiederherstellungsintervall festgelegt. Wenn der Kanal auf Null gesetzt ist, wird er nach dem Umschalten auf die Sicherung niemals zur√ºckgeschaltet. </font></font><br><br><img src="https://habrastorage.org/webt/l8/mg/q0/l8mgq0me4l9-kuc_s6cnp_xbnca.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Festlegen von WAN-Priorit√§ten und -Modi</font></font></font> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Jede SIM-Karte ist als separate Schnittstelle konfiguriert: WWAN1 und WWAN2. F√ºr jede Schnittstelle k√∂nnen Sie die Adresse separat konfigurieren, um die Verf√ºgbarkeit des Internets und Ihre eigenen Intervalle zu √ºberpr√ºfen. Dies ist der einzige Router in der √úberpr√ºfung, auf dem Sie zwei Hosts gleichzeitig zur √úberpr√ºfung angeben k√∂nnen. Dies ist n√ºtzlich, um sich vor Fehlalarmen zu sch√ºtzen, wenn der Testhost abst√ºrzt, aber ein Internetzugang vorhanden ist. </font></font><br><br><img src="https://habrastorage.org/webt/ib/bq/mw/ibbqmwpnvmirmzjpn24y7w_ri7s.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jede SIM-Karte kann so konfiguriert werden, dass die Internetverf√ºgbarkeit √ºberpr√ºft wird.</font></font></font> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Firmware des Routers impliziert keinen Root-Zugriff auf das System. Ohne das √ñffnen des Geh√§uses konnte ich nicht herausfinden, auf welchem ‚Äã‚ÄãChipsatz das Ger√§t hergestellt wurde. </font><font style="vertical-align: inherit;">Dementsprechend k√∂nnen keine selbst erstellten Skripte und Pakete auf dem Router installiert werden. Alle Funktionen sind streng durch die Funktionen der nativen Firmware eingeschr√§nkt. </font><font style="vertical-align: inherit;">Es ist m√∂glich, mehrere zus√§tzliche Pakete aus dem Repository </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">robustel.com/products/app-center/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zu installieren </font><font style="vertical-align: inherit;">, dies ist jedoch nicht mit den Paketen aus dem OpenWRT-Repository vergleichbar. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andererseits kann ein solches geschlossenes System n√ºtzlich sein, um sich vor unkontrollierten √Ñnderungen in der Firmware zu sch√ºtzen, die dann in der Weboberfl√§che nicht sichtbar sind.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Crash-Simulation </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Da wir verschiedene Hosts angeben k√∂nnen, um die Verf√ºgbarkeit jeder SIM-Karte zu √ºberpr√ºfen und einen Unfall zu simulieren, geben wir unseren kontrollierten Server als erste SIM-Karte an und schalten ihn irgendwann aus. F√ºr die Reinheit des Experiments stellen wir die Testintervalle auf die gleichen Werte wie beim ersten Router in der √úberpr√ºfung ein. </font></font><br><br><img src="https://habrastorage.org/webt/q9/_y/wf/q9_ywfjronuxvlvxfexwleqvnxu.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Umschalten auf die zweite SIM-Karte dauert 15 bis 30 Sekunden.</font></font></font> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Im Durchschnitt wechselt der Router in 15 bis 30 Sekunden auf die zweite SIM-Karte. Ich glaube, dass die Registrierung des Netzes des zweiten Betreibers die meiste Zeit in Anspruch nimmt. Da alle unsere Router ein einziges Modem verwenden, kann sich jeweils nur eine SIM-Karte im Netzwerk befinden. Es gibt Industrierouter mit zwei unabh√§ngigen Modems, die gleichzeitig mit zwei Mobilfunkbetreibern verbunden sind. In diesem Fall ist die Kanalumschaltung schneller.</font></font><br><br><h3>  Fazit </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kompakter und einfacher Router mit einem Minimum an Funktionen, einfach zu konfigurieren. </font><font style="vertical-align: inherit;">Eine geschlossene Plattform und mangelnder Root-Zugriff k√∂nnen jemanden st√∂ren. </font><font style="vertical-align: inherit;">Dies kann f√ºr F√§lle empfohlen werden, in denen eine einfache Einrichtung wichtiger ist.</font></font><br><br><h3>  Vorteile </h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Separate Failover-Einstellungen f√ºr jede SIM-Karte </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Unterst√ºtzt LTE Cat 4 </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Warmer Sicherungsmodus, in dem der Sicherungskanal nicht ausgeschaltet wird </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Einfache Einrichtung </font></font></li></ul><br><h3>  Nachteile </h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Geschlossene Plattform, kein Root-Zugriff </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Abgeschnittene SSH-Konsole </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Nur ein Ethernet-Port kann als WAN betrieben werden </font></font></li></ul><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> iRZ RU22W </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Router wird von </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Digital Angel (digitalangel.ru) bereitgestellt. </font></font></a> <br><br><img src="https://habrastorage.org/webt/fb/9a/9p/fb9a9pe15uw7yi4nat3ubroxjqe.jpeg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SoC</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : MediaTek MT7620A Version: 2 Eco: 6 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 64 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Flash-Speicher:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 16 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wi-Fi:</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 802.11n (2,4 GHz) </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modem</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Huawei MU709s-2 </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MicroSD-Kartenunterst√ºtzung</font></font></b> <br>  <b>GPS</b> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Firmware</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Basierend auf dem OpenWRT 15.05- </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Router ohne LTE-Unterst√ºtzung werden nur die 3G-Standards HSPA + / UMTS (900/2100 MHz) und 2G GSM / GPRS (850/900/1800/1900 MHz) unterst√ºtzt, w√§hrend die teuersten sind. </font><font style="vertical-align: inherit;">GPS, Wi-Fi und serielle Schnittstellen werden unterst√ºtzt. </font><font style="vertical-align: inherit;">Standardm√§√üig werden alle Ethernet-Ports zu einem Switch zusammengefasst. Falls gew√ºnscht, kann jeder Port einem separaten VLAN zugewiesen und als WAN verwendet werden. </font><font style="vertical-align: inherit;">Wi-Fi kann im Stationsmodus (Client) arbeiten und auch WAN sein. </font><font style="vertical-align: inherit;">Insgesamt k√∂nnen Sie mit zwei SIM-Karten 7 WAN-Schnittstellen erhalten.</font></font> Nicht schlecht. <br><br><img src="https://habrastorage.org/webt/ac/i4/as/aci4asvfbkhr1pd7eephyr5vnpe.jpeg"><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√úbersicht √ºber die Web-Benutzeroberfl√§che</font></font></b> <div class="spoiler_text"><h3> - </h3><br><img src="https://habrastorage.org/webt/ba/rt/lg/bartlgh67o5nyeibyrwpecwgesg.png"><br> <i> ,   ,   ,  , IMEI,    .</i> <br><br><img src="https://habrastorage.org/webt/ji/1g/jn/ji1gjnngxube3lbfcbvqhsaj-pg.png"><br> <i>Wi-Fi-       (AP)   (Station).   ,    SSID .</i> <br><br><h3>  VPN </h3><br> OpenVPN  ,   IPSec ‚Äî .   Cisco IPSec,    IKEv2. <br><br><img src="https://habrastorage.org/webt/y1/zq/94/y1zq94hbklflhtuqyflb8atrn-e.png"> <font color="99999">  Cisco IPSec    IKEv2</font> <br><br>   Ethernet over IP <br><br><img src="https://habrastorage.org/webt/v_/ek/vo/v_ekvopdlr-tiqakeuicqi3ktec.png"><br><br><h3> RS-232/485 </h3><br>        serial over ip   modbus TCP&lt;-&gt;RTU.  AT-    . <br><br><img src="https://habrastorage.org/webt/hb/c4/cc/hbc4ccxc66tnvtdtfurop90yxcy.png"><br><br><h2> GPIO </h2><br>  c GPIO  .      -,     ,    . ,  - API,    ,  .     .      . <br><br><img src="https://habrastorage.org/webt/4a/9h/g0/4a9hg0vn4x4mecqxomblllawwi8.png"><br></div></div><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> WAN-Setup </font></font></h3><br><img src="https://habrastorage.org/webt/4u/rn/13/4urn13ydfvfgndltxscieamvkf0.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schnittstellenpriorit√§ten werden im Men√º Routen ausgew√§hlt. </font><font style="vertical-align: inherit;">Sie k√∂nnen zwischen zwei Modi w√§hlen: Failover und Balancing. </font><font style="vertical-align: inherit;">Der erste schaltet den Kanal auf die Sicherungsschnittstelle um, falls die prim√§re nicht verf√ºgbar ist, und der zweite verteilt den Datenverkehr gleichm√§√üig auf die Schnittstellen auf NAT-Ebene. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Verf√ºgbarkeits√ºberwachung und das Failover der Schnittstelle erfolgen mithilfe der hausgemachten Bash-Skripte von iRZ. </font><font style="vertical-align: inherit;">Beispielsweise </font><font style="vertical-align: inherit;">sendet </font><font style="vertical-align: inherit;">der Dienst </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ usr / bin / pinger</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pings, wechselt die Schnittstellen und steuert LEDs. </font><font style="vertical-align: inherit;">Ziemlich harter Baschismus :)</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SIM-Karten-Setup </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr jede SIM-Karte k√∂nnen Sie Ihren eigenen Host f√ºr die Verbindungspr√ºfung festlegen. </font><font style="vertical-align: inherit;">Dies ist praktisch f√ºr F√§lle, in denen wir je nach Dienstanbieter unterschiedliche Server ausw√§hlen m√∂chten. </font><font style="vertical-align: inherit;">Beim Roaming verwenden wir beispielsweise einen Server und in der Heimatregion einen anderen. </font></font><br><br><img src="https://habrastorage.org/webt/-n/in/vj/-ninvjs0j3otmg5b1crc551cct0.png"><br> <font color="99999"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen f√ºr jede SIM-Karte verschiedene Hosts festlegen, zu denen die Kommunikation √ºberpr√ºft wird</font></font></font> <br><br><h2>  GPS </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich habe nicht die M√∂glichkeit gefunden, das GPS-Modul irgendwie zu verwenden, au√üer √ºber gpsctl von der Konsole. </font><font style="vertical-align: inherit;">Das Webinterface erw√§hnt es √ºberhaupt nicht. </font><font style="vertical-align: inherit;">Ich glaube, dass es √ºber native Cloud-Dienste f√ºr die zentrale Verwaltung von Routern aktiviert wird. </font><font style="vertical-align: inherit;">Die Unf√§higkeit, die GPS-API alleine zu verwenden, wird als Nachteil angesehen.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Crash-Simulation </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr jede SIM-Karte haben wir verschiedene Hosts angegeben, um die Internetzugang zu √ºberpr√ºfen, damit wir einen Unfall leicht simulieren k√∂nnen. </font><font style="vertical-align: inherit;">Dazu blockieren wir den Host von der ersten SIM-Karte in der Firewall und sehen, wie der Router darauf reagiert. </font><font style="vertical-align: inherit;">F√ºr die Reinheit des Experiments werden wir die gleichen Testintervalle und die Anzahl der Versuche wie beim ersten Router festlegen. </font></font><br><br><img src="https://habrastorage.org/webt/pa/mz/qr/pamzqr3gicp5tt1rtat2mmyqkdg.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bei mehreren Versuchen betr√§gt die durchschnittliche Schaltzeit 30 Sekunden, manchmal ist die zweite SIM-Karte f√ºr eine lange Zeit registriert und die Umschaltung wird um eine Minute verz√∂gert. </font><font style="vertical-align: inherit;">Ich bin mir nicht sicher, ob dies am Modem oder an den Funktionen des Mobilfunkbetreibers liegt.</font></font><br><br><h2>  Fazit </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ich mochte die M√∂glichkeit, bis zu 4 verkabelte WANs und separate Failover-Einstellungen f√ºr jede SIM-Karte zu erhalten. </font><font style="vertical-align: inherit;">Der Zweck des GPS-Moduls blieb unverst√§ndlich, die Verwendung ohne Software von Drittanbietern funktionierte nicht.</font></font><br><br><h3>  Vorteile </h3><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Offene Plattform basierend auf OpenWRT </font></font></li><li>   failover   SIM- </li><li>  LAN-    WAN </li></ul><br><h3>  Nachteile </h3><br><ul><li>   IPsec IKEv2 </li><li> ,   GPS   GPIO    </li></ul><br><hr><br><h2>  Fazit </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Meiner Meinung nach sind spezialisierte Industriel√∂sungen viel praktischer als hausgemachte Strukturen, die auf einem SOHO-Router basieren. </font><font style="vertical-align: inherit;">Obwohl in den meisten F√§llen dieselbe OpenWRT-Firmware verwendet wird, werden bereits alle Nuancen ber√ºcksichtigt. Bei der Anpassung werden mehrere Parameter in der Weboberfl√§che festgelegt, und Sie m√ºssen keine Kr√ºcken wie Watchdog-Skripte selbst schreiben. Alles ist bereits im Lieferumfang enthalten. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zus√§tzliche Funktionen wie GPIO und GPS-Modul erm√∂glichen in vielen F√§llen die Verwaltung mit einem Ger√§t anstelle von zwei f√ºr einfache Aufgaben der Automatisierung und Datenerfassung. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle drei Hersteller verf√ºgen √ºber eine eigene Software zur zentralen Verwaltung von Routern. </font><font style="vertical-align: inherit;">Im Rahmen dieses Artikels haben wir dies nicht ber√ºcksichtigt. </font><font style="vertical-align: inherit;">Es ist n√ºtzlich f√ºr eine gro√üe Anzahl von Installationen und erm√∂glicht die Verwaltung aller Router √ºber ein Bedienfeld. </font><font style="vertical-align: inherit;">Es k√∂nnte sich auch lohnen, diese Software zu erkunden.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de443196/">https://habr.com/ru/post/de443196/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de443186/index.html">3CX Technical Support antwortet - 5 IP PBX-Sicherheitsregeln</a></li>
<li><a href="../de443188/index.html">Drei Augen h√§ngen an einer S√§ule oder die Geschichte, dass f√ºnf Beine von ATtiny13 ausreichen</a></li>
<li><a href="../de443190/index.html">Einf√ºhrung in die Kubernetes-Netzwerkrichtlinien f√ºr Sicherheitsexperten</a></li>
<li><a href="../de443192/index.html">Private Methoden ohne Unterstriche und Schnittstellen in Python</a></li>
<li><a href="../de443194/index.html">Die WFIRM-Ingenieure haben einen Bioprinter erfunden, der die Haut direkt auf eine Wunde druckt</a></li>
<li><a href="../de443198/index.html">Laut Mark Zuckerberg arbeitet Facebook an einer neuronalen Schnittstelle zum Lesen von Gedanken</a></li>
<li><a href="../de443200/index.html">Iranische Hacker stehlen Terabyte an Daten von Citrix</a></li>
<li><a href="../de443202/index.html">Kundgebung gegen die Isolation von Runet</a></li>
<li><a href="../de443204/index.html">Frontend Weekly Digest (4. - 10. M√§rz 2019)</a></li>
<li><a href="../de443206/index.html">Minen unter Leistung warten in den Fl√ºgeln</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>