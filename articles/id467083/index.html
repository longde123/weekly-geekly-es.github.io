<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🛌 😵 👩🏿‍🤝‍👨🏾 Bagaimana instruksi popcount aneh digunakan dalam prosesor modern 🙌🏼 👽 👨🏾‍🎨</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ini adalah decode semu dari presentasi saya di !! Con 2019 . 

 Sebagian besar arsitektur prosesor yang digunakan saat ini memiliki instruksi yang dis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana instruksi popcount aneh digunakan dalam prosesor modern</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467083/"> <i>Ini adalah decode semu dari <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">presentasi saya di !! Con 2019</a> .</i> <br><br>  Sebagian besar arsitektur prosesor yang digunakan saat ini memiliki instruksi yang disebut <code>popcount</code> , kependekan dari 'jumlah penduduk'.  Dia melakukan yang berikut: menghitung jumlah bit yang diatur dalam kata mesin.  Misalnya (mari kita ambil kata 8-bit untuk kesederhanaan), <code>popcount(00100110)</code> adalah 3, dan <code>popcount(01100000)</code> adalah 2. <br><br>  Ini mungkin akan sangat mengejutkan Anda, sama seperti saya, tetapi hanya itu yang dia lakukan!  Sepertinya tidak terlalu membantu, bukan? <br><a name="habracut"></a><br>  Saya pikir ini adalah beberapa tambahan baru untuk beberapa kasus penggunaan khusus, tetapi sebenarnya sudah ada di arsitektur prosesor sejak setidaknya 1961: <br><br><ul><li>  1961: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">IBM Stretch</a> <br></li><li>  1964: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">CDC 6000</a> <br></li><li>  1975: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cray-1</a> <br></li><li>  2005: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">SPARC</a> <br></li><li>  2005: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ARM NEON</a> <br></li><li>  2007: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">AMD K10</a> <br></li><li>  2008: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Intel Nehalem</a> </li></ul><br>  Jadi apa yang sedang terjadi? <br><h4>  Instruksi NSA </h4><br>  <code>popcount</code> juga dikenal sebagai "instruksi NSA", dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">utas yang sangat menarik tentang comp.arch</a> membahas penggunaannya dalam kriptografi.  Rumor mengatakan bahwa itu awalnya ditambahkan ke set instruksi CPU atas permintaan NSA.  Sebagaimana dinyatakan dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">utas arsip yang diarsipkan ini</a> : <br><br><blockquote>  Hampir merupakan tradisi untuk mengirim satu dari setiap batch mobil CDC yang lebih cepat ke "klien yang baik" - sebuah truk tak dikenal tiba dan tidak pernah terdengar lagi. </blockquote><br>  Legenda yang hebat, tetapi mengapa mereka menggunakannya? <br><br>  Salah satu ukuran konten adalah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bobot Hamming</a> , yang merupakan jumlah karakter bukan nol dalam sebuah string.  Untuk string biner, ini adalah <code>popcount</code> ! <br><br>  Seperti yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dijelaskan di sini</a> , NSA memerlukan cryptanalysis dari pesan yang dicegat, dan karena CDC 6000 bekerja dengan kata-kata 60-bit, satu kata sudah cukup untuk menyimpan sebagian besar huruf yang menarik mereka.  Mereka mampu: <br><br><ol><li>  Membagi pesan menjadi beberapa baris <br></li><li>  Tetapkan sedikit untuk setiap karakter unik dalam string <br></li><li>  Gunakan <code>popcount</code> untuk menghitung jumlah karakter yang berbeda <br></li><li>  Gunakan penghitung sebagai hash untuk kriptanalisis lebih lanjut </li></ol><br>  Anehnya, <code>popcount</code> tampaknya telah menghilang dari set instruksi antara pertengahan 1970-an dan pertengahan 2000-an, sehingga pengembalian harus dijelaskan oleh sesuatu selain aplikasi kriptografi.  Apa lagi yang bisa digunakan untuk itu? <br><br><h4>  Perbaikan bug </h4><br>  Konsep berat Hamming terkait dengan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">jarak Hamming</a> , yang merupakan jumlah posisi yang berbeda antara dua garis dengan panjang yang sama.  Untuk dua string biner <code>x</code> dan <code>y</code> , ini hanya <code>popcount</code> setelah XOR.  Sebagai contoh: <br><br><pre>  00100110
 01100000 ^
 --------
 01000110<font></font>
<font></font>
 popcount (01000110) = 3 </pre><br>  Dalam aplikasi telekomunikasi, ini membantu untuk menghitung jarak sinyal, di mana kata yang dikenal dikirim sepanjang kabel dan jumlah bit yang diubah dihitung untuk memperkirakan kesalahan transmisi. <br><br>  Kemudian kita dapat merancang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kode koreksi kesalahan yang</a> sesuai.  Misalnya, jika suatu transmisi harus tahan hingga dua bit yang dimodifikasi, maka kata-kata kode harus berbeda setidaknya 5 dalam jarak Hamming. <br><br><h4>  Jaringan saraf convolutional biner </h4><br>  Dan sekarang sesuatu yang sama sekali berbeda: jaringan saraf konvolusional biner!  Tapi pertama-tama, apa itu? <br><br><ul><li>  Biner berarti bahwa kita hanya menggunakan matriks dari nilai +1 (disandikan sebagai 1) dan -1 (disandikan sebagai 0), berbeda dengan nilai titik apung 32-bit. <br></li><li>  Apakah konvolusi berarti perkalian matriks? <br></li><li>  Jaringan saraf adalah sistem yang terinspirasi oleh otak hewan (di sini saya sedikit berenang). </li></ul><br>  Jadi, kita harus melakukan penggandaan matriks biner.  Tetapi apa yang spesial dari matriks biner? <br><br>  Penggandaan matriks konvensional dengan nilai 32-bit sangat cocok untuk komputer desktop dengan CPU dan GPU yang kuat, tetapi semakin kami ingin melakukan pekerjaan yang bermanfaat pada perangkat kecil dan sederhana seperti smartphone, router, jam tangan pintar, dll. Kita dapat menguraikan ini matriks yang lebih kompleks untuk lapisan matriks biner, dan lebih mudah untuk bekerja dengannya dan menyimpannya sehingga kami mendapat manfaatnya meskipun ada peningkatan jumlah lapisan. <br><br>  Di <code>popcount</code> berperan.  Ini digunakan untuk menghitung produk skalar dari dua matriks biner: <br><br><pre>  a = xnor (x, y)
 b = popcount (a)
 c = len (a)
 titik (x, y) = 2 × b - c </pre><br>  Lihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> dan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini untuk</a> perincian lebih lanjut. <br><br><h4>  Pemrograman catur </h4><br>  Banyak program catur menyimpan data dalam representasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bitboard</a> , yang cocok dengan kata 64-bit.  Operasi <code>Population Count</code> digunakan untuk operasi yang berarti dengan pandangan ini, seperti menghitung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mobilitas suatu</a> gambar. <br><br><h4>  Sidik jari molekuler </h4><br>  Ini juga terkait dengan jarak Hamming: molekul-molekul itu entah bagaimana di hash dan dibandingkan (menggunakan <code>popcount</code> ) untuk menentukan seberapa miripnya mereka.  Lihat di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini untuk</a> detail lebih lanjut. <br><br><h4>  Mencoba memetakan array Hash (HAMT) </h4><br>  Di sinilah saya pertama kali belajar tentang <code>popcount</code> !  HAMT adalah struktur data ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pertama kali dibuat oleh Phil Bagwell</a> ) yang dapat menyimpan sejumlah besar nilai (biasanya 32 atau 64) dalam sebuah array pada setiap node trie.  Namun, mengalokasikan memori untuk array elemen 32 atau 64 dapat menjadi sangat boros setiap kali, terutama jika array hanya mengandung beberapa elemen.  Solusinya adalah dengan menambahkan bitmask di mana jumlah bit yang ditetapkan sesuai dengan jumlah elemen dalam array, yang memungkinkan array untuk tumbuh dan berkontraksi sesuai kebutuhan.  Perhitungan indeks untuk elemen yang diberikan dapat secara efektif dilakukan menggunakan <code>popcount</code> .  Dalam <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">posting blog saya</a> tentang penerapan struktur HAMT, Anda dapat mempelajari lebih lanjut tentang cara kerjanya. <br><br><h4>  Struktur Data Terkompresi </h4><br>  Ini adalah bidang penelitian baru yang menarik yang berfokus pada cara menyimpan data dalam ruang minimal tanpa membongkar untuk melakukan pekerjaan yang bermanfaat.  Salah satu metode adalah berpikir dalam hal array bit (vektor bit) yang dapat diminta dalam dua operasi: <br><br><ul><li>  <code>rank(i)</code> menghitung jumlah bit yang diberikan hingga indeks ke-i dalam vektor bit <br></li><li>  <code>select(i)</code> menemukan indeks di mana bit ke-i diatur </li></ul><br>  Untuk membuat operasi ini efisien pada vektor bit besar, Anda perlu membuat indeks dan menggunakannya secara efektif, dalam kedua kasus yang melibatkan <code>popcount</code> .  Berikut ini adalah ikhtisar yang baik dari indeks RRR.  Dan, sejauh yang saya tahu, pendekatan modern paling maju dijelaskan dalam artikel <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Space-Efficient, Peringkat Berkinerja Tinggi &amp; Struktur Pilihan pada Sekuen Bit Terkompresi</a></i> . <br><br><h4>  Optimalisasi kompiler </h4><br>  <code>popcount</code> telah menjadi begitu luas sehingga <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GCC</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Clang</a> dapat mendeteksi dan menggantinya dengan instruksi <code>popcount</code> .  Bayangkan ini Clippy: "Oh, saya melihat bahwa Anda mencoba menerapkan <code>popcount</code> , biarkan saya keluar dan memperbaikinya untuk Anda!"  Kode LLVM yang sesuai ada di <a href="">sini</a> .  Daniel Lemyr mengutipnya sebagai contoh pikiran luar biasa dari kompiler modern. <br><br><h4>  Kesimpulan </h4><br>  Terselubung dalam misteri di awal sejarahnya, instruksi <code>popcount</code> digunakan di mana-mana, meskipun tetap sedikit instruksi CPU yang tidak biasa.  Saya suka cara menghubungkan berbagai bidang ilmu komputer, dan saya bertanya-tanya berapa banyak instruksi aneh lainnya yang ada.  Jika Anda memiliki favorit sendiri, saya ingin mendengar tentang dia! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id467083/">https://habr.com/ru/post/id467083/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id467063/index.html">Pemantauan bahan bakar untuk generator diesel pusat data - bagaimana melakukannya dan mengapa begitu penting?</a></li>
<li><a href="../id467065/index.html">Arsip masalah olimpiade dalam fisika untuk anak sekolah</a></li>
<li><a href="../id467073/index.html">“Di Barat, tidak ada direktur seni di bawah usia 40 tahun. Bersama kami itu bisa hingga 30. " Bagaimana rasanya menjadi seorang desainer di bidang TI</a></li>
<li><a href="../id467079/index.html">CSS dan Korsel Ant Javascript</a></li>
<li><a href="../id467081/index.html">Analisis pewarnaan emosional ulasan dari Kinopoisk</a></li>
<li><a href="../id467085/index.html">Dekompilasi C, C ++ dan DotNet adalah dasar dari kebalikannya. Memecahkan masalah untuk membalikkan dengan r0ot-mi. Bagian 1</a></li>
<li><a href="../id467087/index.html">Bagaimana saya mempersiapkan dan lulus Sertifikasi Oracle Database SQL (1Z0-071)</a></li>
<li><a href="../id467089/index.html">Patched Exim - patch lagi. Eksekusi Perintah Remote Baru di Exim 4.92 dalam satu permintaan</a></li>
<li><a href="../id467091/index.html">Pengantar cepat ke Svelte dari perspektif pengembang Angular</a></li>
<li><a href="../id467093/index.html">Memata-matai program Anda dengan Strace</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>