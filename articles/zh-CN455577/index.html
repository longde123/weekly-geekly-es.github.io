<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘— ğŸ¤¶ ğŸ“¦ SDL 2è¯¾ï¼šç¬¬3è¯¾-äº‹ä»¶ ğŸ€„ï¸ ğŸŒ¿ ğŸ‘‚</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¤§å®¶å¥½ï¼ è¿™æ˜¯SDL 2ä¸­çš„ç¬¬ä¸‰è¯¾ã€‚ä¿¡æ¯æ¥è‡ªæ­¤æ¥æºã€‚ æˆ‘ä¸å–œæ¬¢Lasy Fooäº‹ä»¶å¤„ç†æ•™ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä¼šè‡ªå·±ç¼–å†™ï¼Œä½†æ˜¯å¯ä»¥åœ¨è¿™é‡Œå’Œè¿™é‡Œæ‰¾åˆ°èµ„æ–™ã€‚ 

 æˆ‘ä»¬å¼€å§‹ï¼Œæ¬¢è¿ä¸Šè¯¾ 

 å¤§äº‹è®° 
 ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ•™æˆ‘ä»¬çš„ç¨‹åºåœ¨çº¦ç¿°çš„å¸®åŠ©ä¸‹åº”å¯¹äº‹ä»¶ã€‚ 

 å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚ è¿æ¥SDL 2å¹¶åˆ›å»º3ä¸ªå…¨å±€å˜é‡å’Œ2...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>SDL 2è¯¾ï¼šç¬¬3è¯¾-äº‹ä»¶</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/455577/"> å¤§å®¶å¥½ï¼ è¿™æ˜¯SDL 2ä¸­çš„ç¬¬ä¸‰è¯¾ã€‚ä¿¡æ¯æ¥è‡ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=http://">æ­¤</a>æ¥æºã€‚ æˆ‘ä¸å–œæ¬¢Lasy Fooäº‹ä»¶å¤„ç†æ•™ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä¼šè‡ªå·±ç¼–å†™ï¼Œä½†æ˜¯å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=http://">è¿™é‡Œ</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=http://">è¿™é‡Œ</a>æ‰¾åˆ°èµ„æ–™ã€‚ <br><br> æˆ‘ä»¬å¼€å§‹ï¼Œæ¬¢è¿ä¸Šè¯¾ <br><br><h2> å¤§äº‹è®° </h2><a name="habracut"></a><br> ä»Šå¤©ï¼Œæˆ‘ä»¬å°†æ•™æˆ‘ä»¬çš„ç¨‹åºåœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">çº¦ç¿°</a>çš„å¸®åŠ©ä¸‹åº”å¯¹äº‹ä»¶ã€‚ <br><br> å› æ­¤ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚ è¿æ¥SDL 2å¹¶åˆ›å»º3ä¸ªå…¨å±€å˜é‡å’Œ2ä¸ªå¸¸é‡ã€‚ <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL2/SDL.h&gt; const int SCREEN_WIDTH = 640; const int SCREEN_HEIGHT = 480; SDL_Window *win = NULL; SDL_Surface *scr = NULL; SDL_Surface *john = NULL;</span></span></span></span></code> </pre> <br> æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™ä¸Šä¸€è¯¾ä¸­å·²ç»çŸ¥é“çš„3ä¸ªå‡½æ•°ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">åˆå§‹åŒ–</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (SDL_Init(SDL_INIT_VIDEO) != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Can't init: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; system(<span class="hljs-string"><span class="hljs-string">"pause"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } win = SDL_CreateWindow(<span class="hljs-string"><span class="hljs-string">""</span></span>, SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (win == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Can't create window: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; system(<span class="hljs-string"><span class="hljs-string">"pause"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } scr = SDL_GetWindowSurface(win); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">è´Ÿè·</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">load</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ john = SDL_LoadBMP(<span class="hljs-string"><span class="hljs-string">"john.bmp"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (john == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt; <span class="hljs-string"><span class="hljs-string">"Can't load image: "</span></span> &lt;&lt; SDL_GetError() &lt;&lt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">endl</span></span>; system(<span class="hljs-string"><span class="hljs-string">"pause"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">é€€å‡º</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">quit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ SDL_FreeSurface(john); SDL_DestroyWindow(win); SDL_Quit(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br></div></div><br> æ³¨æ„ï¼ˆï¼ï¼‰ï¼Œå¦‚æœæ‚¨å¤åˆ¶ä¸Šä¸€è¯¾çš„ä»£ç ï¼Œè¯·ä¸è¦å¿˜è®°å°†<b>å¾®ç¬‘</b>æ”¹ä¸º<b>john</b> ã€‚ <br><br> åº”è¯¥è¯´çš„ä¸€åˆ‡ï¼šæˆ‘å†³å®šåœ¨åˆå§‹åŒ–å’Œå›¾åƒåŠ è½½é˜¶æ®µæ˜¾ç¤ºé”™è¯¯ã€‚ <br><br> å› æ­¤ï¼Œè®©æˆ‘ä»¬ç»§ç»­ã€‚ æ‰“å¼€<b>main</b>å¹¶è°ƒç”¨<b>Init</b>å’Œ<b>Load</b>å‡½æ•°ã€‚ <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> argc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ** args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (init() == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (load() == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } }</code> </pre><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹ä»»ä½•åº”ç”¨ç¨‹åºå¦‚ä½•å·¥ä½œã€‚ æ‚¨è¿è¡Œçš„ä»»ä½•ç¨‹åºï¼ˆGoogle Chromeï¼ŒPaintï¼ŒMinecraftï¼‰éƒ½å…·æœ‰è¿è¡Œå¤§é‡æ¬¡çš„ä¸»å¾ªç¯ã€‚ è¿™å¯¹äºåŠ¨æ€æ€§æ˜¯å¿…è¦çš„ã€‚ ä»¥å‰ï¼Œæˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªä»…æ˜¾ç¤º2ç§’é’Ÿå¾®ç¬‘çš„ç¨‹åºï¼Œä½†æ˜¯ä¸ºäº†ä½¿è¯¥ç¨‹åºå­¦ä¹ å¦‚ä½•å“åº”ç”¨æˆ·çš„æ“ä½œï¼ˆæˆ–è‡³å°‘æ— ä¼‘æ­¢åœ°æ˜¾ç¤ºå›¾åƒï¼‰ï¼Œå®ƒéœ€è¦ä¸€ä¸ª<b>While</b>å¾ªç¯ã€‚ <br><br> å®ƒä¼šä¸æ–­é‡å¤ï¼Œå¹¶ä¸”åœ¨å…¶ä¸­æˆ‘ä»¬å·²ç»å¯ä»¥åšæˆ‘ä»¬æƒ³è¦çš„äº‹æƒ…ï¼Œä¾‹å¦‚å¤„ç†äº‹ä»¶ã€‚ ä½†æ˜¯åœ¨å¼€å§‹èƒ¶è´¨å¾ªç¯ä¹‹å‰ï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€äº›å˜é‡ã€‚ <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> run = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; SDL_Event e; SDL_Rect r; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y = <span class="hljs-number"><span class="hljs-number">0</span></span>; rx = x; ry = y;</code> </pre><br> ç°åœ¨ï¼Œæˆ‘ä»¬å°†åˆ†ææ‰€æœ‰å†…å®¹ã€‚ é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ª<b>boolean</b>ç±»å‹çš„<b>è¿è¡Œ</b>å˜é‡ã€‚ è¯¥å˜é‡è´Ÿè´£æ‰§è¡Œå¾ªç¯ï¼šç¨‹åºè¿è¡Œæ—¶ï¼Œå®ƒä¸º<b>true</b> ï¼Œå¦‚æœæˆ‘ä»¬è¦åœæ­¢æ‰§è¡Œï¼Œåˆ™å°†è¯¥å˜é‡è®¾ç½®ä¸º<b>false</b> ã€‚ æ¥ä¸‹æ¥ï¼Œåˆ›å»ºç±»<b>SDL_Event</b>çš„<b>e</b>å¯¹è±¡ã€‚ è¯¥å¯¹è±¡çš„å±æ€§å°†åŒ…å«æ¥æ”¶åˆ°çš„äº‹ä»¶çš„æ•°æ®ï¼Œå°†æ›´åŠ è¯¦ç»†ã€‚ ä¹‹åï¼Œæˆ‘ä»¬åˆ›å»º<b>SDL_Rect</b>ç±»çš„å¯¹è±¡<b>r</b> ã€‚ è¿™æ˜¯ç»˜åˆ¶å¸¦æœ‰æˆ‘ä»¬æ‰€éœ€åæ ‡çš„å¯¹è±¡æ‰€éœ€çš„çŸ©å½¢ã€‚ ç„¶åæˆ‘ä»¬åˆ›å»º<b>int</b>ç±»å‹çš„å˜é‡<b>x</b>å’Œ<b>y</b> ã€‚ ç«‹å³å°†å…¶å€¼åˆ†é…ä¸ºé›¶ã€‚ è¿™äº›å°†æ˜¯æˆ‘ä»¬è§’è‰²çš„åæ ‡ã€‚ ä¸‹ä¸€é¡¹ï¼Œæˆ‘ä»¬åˆ†åˆ«ç»™å˜é‡<b>rx</b>å’Œ<b>ry</b>èµ‹å€¼<b>x</b>å’Œ<b>y</b> ã€‚  <b>rx</b>å’Œ<b>ry</b>æ˜¯çŸ©å½¢<b>r</b>çš„åæ ‡ã€‚ <br><br> ç°åœ¨æ˜¯æ—¶å€™æ‰“å¼€ä¸»å¾ªç¯äº†ã€‚ <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (run) { <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(SDL_PollEvent(&amp;e) != <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.type == SDL_QUIT) { run = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.type == SDL_KEYDOWN) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.key.keysym.sym == SDLK_UP) { y -= <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.key.keysym.sym == SDLK_DOWN) { y += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.key.keysym.sym == SDLK_RIGHT) { x += <span class="hljs-number"><span class="hljs-number">1</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.key.keysym.sym == SDLK_LEFT) { x -= <span class="hljs-number"><span class="hljs-number">1</span></span>; } } } rx = x; ry = y; SDL_FillRect(scr, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, SDL_MapRGB(scr -&gt; format, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>)); SDL_BlitSurface(john, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, scr, &amp;r); SDL_UpdateWindowSurface(win); }</code> </pre><br> è®©æˆ‘ä»¬åˆ†æä¸€ä¸‹è¿™æ®µä»£ç ã€‚ æˆ‘ä»¬æœ‰ä¸¤ä¸ªå‘¨æœŸã€‚ å¦‚å‰æ‰€è¿°ï¼Œç¬¬ä¸€ä¸ªä¸»è¦å¯¹è±¡æ˜¯ä¸»è¦å¯¹è±¡ï¼Œå®ƒé€šè¿‡è¿è¡Œå˜é‡å·¥ä½œã€‚ ç¬¬äºŒä¸ªå¾ªç¯è´Ÿè´£å¤„ç†äº‹ä»¶ã€‚ <br><br>  <b>SDL_PollEventï¼ˆï¼‰</b>å‡½æ•°æ‰“å¼€ä¸€æ¬¡æ‰§è¡Œä¸»å¾ªç¯æ—¶æ¥æ”¶åˆ°çš„äº‹ä»¶é˜Ÿåˆ—ï¼Œåˆ é™¤æœ€åä¸€ä¸ªäº‹ä»¶ï¼Œå¹¶å°†æœ‰å…³æ­¤äº‹ä»¶çš„æ•°æ®å†™å…¥ä¼ é€’ç»™æ­¤å‡½æ•°çš„å¯¹è±¡çš„å˜é‡ä¸­ï¼Œå³ä¸º<b>e</b> ã€‚ å¦‚æœå·²åˆ é™¤é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰äº‹ä»¶ï¼Œæ­¤å‡½æ•°å°†è¿”å›0ï¼Œ <b>NULL</b>æˆ–<b>false</b> ï¼Œå› æ­¤æˆ‘ä»¬ç¼–å†™<b>while</b>æ¡ä»¶<b>ï¼ˆSDL_PollEventï¼ˆï¼†eï¼‰ï¼= NULLï¼‰</b> ã€‚ <br><br> æˆ‘ä»¬è¿›ä¸€æ­¥çœ‹ï¼šæˆ‘ä»¬è¦åšçš„ç¬¬ä¸€æ­¥æ˜¯å•å‡»çª—å£æ¡†æ¶ä¸­çš„åå­—ã€‚ å¦‚æœå•å‡»å®ƒï¼Œé‚£ä¹ˆ<b>å°†ä¸º</b>å¯¹è±¡<b>e</b>çš„<b>ç±»å‹</b>å˜é‡åˆ†é…å€¼<b>SDL_QUIT</b> ã€‚ å¦‚æœå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œåˆ™å°†<b>false</b>èµ‹ç»™<b>è¿è¡Œ</b>å˜é‡ï¼Œç„¶åå¾ªç¯ç»“æŸã€‚ <br><br> æ¥ä¸‹æ¥ï¼Œæˆ‘ç¼–å†™äº†ä¸€ä¸ªé”®ç›˜å‡»é”®æµ‹è¯•ã€‚ å¦‚æœæŒ‰ä¸‹æŒ‰é’®ï¼Œåˆ™<b>e.type</b>å˜é‡ç­‰äº<b>SDL_KEYDOWN</b> ã€‚ æ¥ä¸‹æ¥ï¼Œæ£€æŸ¥é”®å€¼ã€‚ å˜é‡<b>e.key.keysym.sym</b>å­˜å‚¨æŒ‰é’®çš„å€¼ã€‚ æˆ‘ä»¬å°†æ­¤å€¼ä¸æ‰€éœ€å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¹¶æ‰§è¡ŒæŸäº›æ“ä½œã€‚ æˆ‘ä»¬å°†æ›´æ”¹çº¦ç¿°çš„åæ ‡ã€‚ å¦‚æœæŒ‰ä¸‹å‘ä¸Šç®­å¤´ï¼Œåˆ™<b>y</b>å‡å°1ï¼Œå¦‚æœå‘ä¸‹ç®­å¤´ï¼Œåˆ™å¢å¤§<b>y</b> ï¼Œä¾æ­¤ç±»æ¨ã€‚ <br><br> å¤„ç†å®Œäº‹ä»¶åï¼Œé‡æ–°åˆ†é…<b>rx</b>å’Œ<b>ry</b>ä»¥æ›´æ–°Mançš„åæ ‡ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ç¼–å†™å·²ç»ç†Ÿæ‚‰çš„å‡½æ•°<b>SDL_FilRect</b> ï¼Œå®ƒçš„ä½œç”¨éå¸¸å¤§ã€‚ å¦‚æœæˆ‘ä»¬æ²¡æœ‰ç¼–å†™ï¼Œé‚£ä¹ˆçº¦ç¿°åœ¨ç§»åŠ¨æ—¶ä¼šç•™ä¸‹éš¾çœ‹çš„ç—•è¿¹ï¼Œå› æ­¤ï¼Œæ¯ä¸€å¸§æˆ‘ä»¬éƒ½ä¼šç»˜åˆ¶ä¸€ä¸ªç™½è‰²èƒŒæ™¯ï¼Œå¹¶åœ¨å…¶ä¸Šæ–¹ç»˜åˆ¶ä¸€ä¸ªç²¾çµã€‚ ä¹‹åï¼Œæˆ‘ä»¬ä½¿ç”¨<b>SDL_BlitSurface</b>å‡½æ•°ç»˜åˆ¶è‹±é›„ã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨çŸ©å½¢<b>r</b>æˆ–å…¶å˜é‡<b>x</b>å’Œ<b>y</b>ä¸ä»…åœ¨å·¦ä¸Šè§’ç»˜åˆ¶ï¼Œè¿˜è¦ç»˜åˆ¶ä¸€äº›å¿…è¦çš„åæ ‡ã€‚ æ¥ä¸‹æ¥ï¼Œåªéœ€æ›´æ–°çª—å£ã€‚ <br><br> åœ¨ä¸»å¾ªç¯ä¹‹åï¼Œå†™<b>return quitï¼ˆï¼‰;</b> å®Œæˆç¨‹åºã€‚ <br><br> ä»…æ­¤è€Œå·²ï¼Œæœ¬è¯¾ç»“æŸäº†ã€‚ è¿™æ˜¯è¿™æ ·çš„ä»£ç ï¼š <br><br><div class="spoiler">  <b class="spoiler_title">ä»£å·</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SDL2/SDL.h&gt; #include &lt;iostream&gt; const int SCREEN_WIDTH = 640; const int SCREEN_HEIGHT = 480; SDL_Window *win = NULL; SDL_Surface *scr = NULL; SDL_Surface *john = NULL; int init() { if (SDL_Init(SDL_INIT_VIDEO) != 0) { std::cout &lt;&lt; "Can't init: " &lt;&lt; SDL_GetError() &lt;&lt; std::endl; system("pause"); return 1; } win = SDL_CreateWindow("", SDL_WINDOWPOS_UNDEFINED, SDL_WINDOWPOS_UNDEFINED, SCREEN_WIDTH, SCREEN_HEIGHT, SDL_WINDOW_SHOWN); if (win == NULL) { std::cout &lt;&lt; "Can't create window: " &lt;&lt; SDL_GetError() &lt;&lt; std::endl; system("pause"); return 1; } scr = SDL_GetWindowSurface(win); return 0; } int load() { john = SDL_LoadBMP("john.bmp"); if (john == NULL) { std::cout &lt;&lt; "Can't load image: " &lt;&lt; SDL_GetError() &lt;&lt; std::endl; system("pause"); return 1; } return 0; } int quit() { SDL_FreeSurface(john); SDL_DestroyWindow(win); SDL_Quit(); return 0; } int main (int argc, char ** args) { if (init() == 1) { return 1; } if (load() == 1) { return 1; } bool run = true; SDL_Event e; SDL_Rect r; int x = 0; int y = 0; rx = x; ry = y; while (run) { while(SDL_PollEvent(&amp;e) != NULL) { if (e.type == SDL_QUIT) { run = false; } if (e.type == SDL_KEYDOWN) { if (e.key.keysym.sym == SDLK_UP) { y -= 1; } if (e.key.keysym.sym == SDLK_DOWN) { y += 1; } if (e.key.keysym.sym == SDLK_RIGHT) { x += 1; } if (e.key.keysym.sym == SDLK_LEFT) { x -= 1; } } } rx = x; ry = y; SDL_FillRect(scr, NULL, SDL_MapRGB(scr -&gt; format, 255, 255, 255)); SDL_BlitSurface(john, NULL, scr, &amp;r); SDL_UpdateWindowSurface(win); } return quit(); }</span></span></span></span></code> </pre><br></div></div><br> æˆ‘è·Ÿä½ è¯´å†è§ï¼Œå†è§ï¼ <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">&lt;&lt;</a>ä¸Šä¸€è¯¾|| ä¸‹ä¸€è¯¾<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">&gt;&gt;</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN455577/">https://habr.com/ru/post/zh-CN455577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN455563/index.html">å°å‹ä¼ä¸šï¼šæ˜¯å¦è‡ªåŠ¨åŒ–ï¼Ÿ</a></li>
<li><a href="../zh-CN455565/index.html">å¿ƒçµå¯ä»¥ä¼ªé€ å®‡å®™å—ï¼Ÿ</a></li>
<li><a href="../zh-CN455569/index.html">æˆ‘ä»¬é‚€è¯·æ‚¨å‚åŠ 6æœˆ17æ—¥çš„Tarantoolä¼šè®®</a></li>
<li><a href="../zh-CN455571/index.html">å­¦è¯´ä¸­çš„æ•°æ®åº“æ¸¸æ ‡</a></li>
<li><a href="../zh-CN455575/index.html">ç¥ç»åŒ¹é…ï¼šå¦‚ä½•ä½¿å†…å®¹é€‚åº”Googleçš„ç°å®</a></li>
<li><a href="../zh-CN455579/index.html">ç‰¹ç™¾æƒ ï¼šFacebookæ€æ‰‹Kubernetesï¼Ÿ</a></li>
<li><a href="../zh-CN455580/index.html">å¿…å¤‡çš„ç§»åŠ¨åº”ç”¨åŠ¨ç”»</a></li>
<li><a href="../zh-CN455582/index.html">å•†åº—ä¸­çš„å¯¼èˆªï¼šé€šè¿‡å¢å¼ºç°å®åˆ°è¾¾æ‰€éœ€çš„è´§æ¶</a></li>
<li><a href="../zh-CN455584/index.html">å¯¹å…¬å¸å†…éƒ¨åŠ›é‡çš„å®šåˆ¶é‡‡è®¿ï¼šä»é”™è¯¯åˆ°å‘ç°</a></li>
<li><a href="../zh-CN455586/index.html">å¾·å›½æ³¢é¸¿ç¥ç»ä¿¡æ¯ç ”ç©¶æ‰€ï¼ˆINIï¼‰æ‰€é•¿GregorSchÃ¶neræ•™æˆä¸¾åŠçš„æœºå™¨äººæŠ€æœ¯è®²åº§ç³»åˆ—</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>