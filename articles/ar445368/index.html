<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐ฟโ๐ค ๐คก ๐จ๐ปโโ๏ธ ุชุญููู ุงุฎุชุจุงุฑ ูุนุจุฉ ูุน ุจุถุน ูุฆุงุช ุงูุขูุงู ูู ุงููุณุชุฎุฏููู ุงูุธุงูุฑู ๐ช ๐ ๐ง๐ผโ๐คโ๐ง๐ป</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ูุฑุญุจุง ูุง ูุจุฑ! 

 ุฃูุง ุฃุนูู ูู ุดุฑูุฉ ุฃูุนุงุจ ุชููู ุจุชุทููุฑ ุงูุฃูุนุงุจ ุนุจุฑ ุงูุฅูุชุฑูุช. ุญุงูููุง ุ ุชููุณู ุฌููุน ุฃูุนุงุจูุง ุฅูู ุงูุนุฏูุฏ ูู "ุงูุฃุณูุงู" ("ุณูู" ูุงุญุฏ ููู ุจูุฏ) ุ ู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุชุญููู ุงุฎุชุจุงุฑ ูุนุจุฉ ูุน ุจุถุน ูุฆุงุช ุงูุขูุงู ูู ุงููุณุชุฎุฏููู ุงูุธุงูุฑู</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445368/" style=";text-align:right;direction:rtl">  ูุฑุญุจุง ูุง ูุจุฑ! <br><br>  ุฃูุง ุฃุนูู ูู ุดุฑูุฉ ุฃูุนุงุจ ุชููู ุจุชุทููุฑ ุงูุฃูุนุงุจ ุนุจุฑ ุงูุฅูุชุฑูุช.  ุญุงูููุง ุ ุชููุณู ุฌููุน ุฃูุนุงุจูุง ุฅูู ุงูุนุฏูุฏ ูู "ุงูุฃุณูุงู" ("ุณูู" ูุงุญุฏ ููู ุจูุฏ) ุ ููู ูู "ุณูู" ููุงู ุนุดุฑุงุช ุงูุนุงููุงุช ุงูุชู ูุชู ุชูุฒูุน ุงููุงุนุจูู ุนูููุง ุฃุซูุงุก ุงูุชุณุฌูู (ุฌูุฏูุง ุ ุฃู ูู ุจุนุถ ุงูุฃุญูุงู ูููููู ุงุฎุชูุงุฑูุง ุจุฃููุณูู).  ูุญุชูู ูู ุนุงูู ุนูู ูุงุนุฏุฉ ุจูุงูุงุช ูุงุญุฏุฉ ูุฎุงุฏู ููุจ / ุชุทุจูู ูุงุญุฏ ุฃู ุฃูุซุฑ.  ูุจุงูุชุงูู ุ ูุชู ุชูุณูู ุงูุญูู ูุชูุฒูุนู ูู ุฌููุน ุฃูุญุงุก ุงูุนุงูู / ุงูุฎูุงุฏู ุจุงูุชุณุงูู ุชูุฑูุจูุง ููุชูุฌุฉ ูุฐูู ุ ูุญุตู ุนูู ุงูุญุฏ ุงูุฃูุตู ุนุจุฑ ุงูุฅูุชุฑูุช ูู ูุดุบูุงุช 6K-8K (ูุฐุง ูู ุงูุญุฏ ุงูุฃูุตู ุ ุนุฏุฉ ูุฑุงุช ูู ุงูุบุงูุจ ุฃูู) ู 200-300 ุทูุจ ููู ููุช "ุฑุฆูุณู" ูุนุงูู ูุงุญุฏ. <br><br>  ูุซู ูุฐุง ุงููููู ูุน ุชูุณูู ุงููุงุนุจูู ุฅูู ุงูุฃุณูุงู ูุงูุนูุงูู ุฃุตุจุญ ุนุชูููุง ุ ุงููุงุนุจูู ูุฑูุฏูู ุดูุฆูุง ุนุงููููุง.  ูู ุงูุฃูุนุงุจ ุงูุฃุฎูุฑุฉ ุ ุชููููุง ุนู ุชูุณูู ุงูุฃุดุฎุงุต ุญุณุจ ุงูุจูุฏ ูุชุฑููุง ุณูููุง ูุงุญุฏูุง / ุณูููู ููุท (ุฃูุฑููุง ูุฃูุฑูุจุง) ุ ูููู ูุน ูุฌูุฏ ุงูุนุฏูุฏ ูู ุงูุนูุงูู ูู ูู ููููุง.  ุณุชููู ุงูุฎุทูุฉ ุงูุชุงููุฉ ูู ุชุทููุฑ ุงูุฃูุนุงุจ ุจุงุณุชุฎุฏุงู ุจููุฉ ุฌุฏูุฏุฉ ูุชูุญูุฏ ุฌููุน ุงููุงุนุจูู ูู ุนุงูู ูุงุญุฏ ูุน <b>ูุงุนุฏุฉ ุจูุงูุงุช ูุงุญุฏุฉ</b> . <br><br>  ุฃุฑุฏุช ุงูููู ุฃู ุฃุชุญุฏุซ ููููุงู ุนู ููู ุชู ุชููููู ุจุงูุชุญูู ููุง ุฅุฐุง ูุงู ุงููู ุนุจุฑ ุงูุฅูุชุฑูุช (ููู ูุง ุจูู 50 ุฅูู 200 ุฃูู ูุณุชุฎุฏู ูู ููุช ูุงุญุฏ) ูุฅุญุฏู ุฃูุนุงุจูุง ุงูุดููุฑุฉ "ุฃุฑุณู" ููุนุจ ุงููุนุจุฉ ุงูุชุงููุฉ ุงููุจููุฉ ุนูู ุงูุจููุฉ ุงูุฌุฏูุฏุฉ ููุง ุฅุฐุง ูุงู ูููู ูููุธุงู ุจุฃูููู ุ ูุฎุงุตุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ( <b>PostgreSQL 11</b> ) ุ ุฃู ูุชุญูู ุนูููุงู ูุซู ูุฐุง ุงูุนุจุก ุ ูุฅุฐุง ูู ููู ุจุฅููุงูู ุฐูู ุ ุงูุชุดู ุฃูู ููุฌุฏ ุงูุญุฏ ุงูุฃูุตู ูุฏููุง.  ุณูู ุฃุฎุจุฑูู ููููุงู ุนู ุงููุดุงูู ุงูุชู ูุดุฃุช ููุฑุงุฑุงุช ุงูุงุณุชุนุฏุงุฏ ูุงุฎุชุจุงุฑ ุงูุนุฏูุฏ ูู ุงููุณุชุฎุฏููู ุ ูุงูุนูููุฉ ููุณูุง ูุงููููู ุนู ุงููุชุงุฆุฌ. <br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h2><br>  ูู ุงููุงุถู ุ ูู <b>InnoGames GmbH ุ</b> ุฃูุดุฃ ูู ูุฑูู ูุนุจุฉ ูุดุฑูุน ูุนุจุฉ ุญุณุจ ุฐูููู ูููููู ุ ูุบุงูุจูุง ูุง ูุณุชุฎุฏู ุชูููุงุช ูุฎุชููุฉ ููุบุงุช ุงูุจุฑูุฌุฉ ูููุงุนุฏ ุงูุจูุงูุงุช.  ุจุงูุฅุถุงูุฉ ุฅูู ุฐูู ุ ูุฏููุง ุงูุนุฏูุฏ ูู ุงูุฃูุธูุฉ ุงูุฎุงุฑุฌูุฉ ุงููุณุคููุฉ ุนู ุงููุฏููุนุงุช ุ ูุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุงูุฏูุน ุ ูุงูุชุณููู ุ ูุฃูุซุฑ ูู ุฐูู.  ููุนูู ูุน ูุฐู ุงูุฃูุธูุฉ ุ ุฃูุดุฃ ุงููุทูุฑูู ุฃูุถูุง ูุงุฌูุงุชูู ุงููุฑูุฏุฉ ูุฏุฑ ุงูุฅููุงู. <br><br>  ููุฌุฏ ุญุงูููุง ุงููุซูุฑ ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุงู</a> ูู ูุฌุงู ุฃูุนุงุจ ุงููุงุชู ุงููุญููู ุ ูุจุงูุชุงูู ููุงูุณุฉ ูุจูุฑุฉ.  ูู ุงูููู ููุบุงูุฉ ููุง ุงุณุชุฑุฌุงุนูุง ูู ูู ุฏููุงุฑ ูุชู ุฅููุงูู ุนูู ุงูุชุณููู ูุฃูุซุฑ ููููุงู ูู ุฃุนูุงู ุ ูุจุงูุชุงูู ูุฅู ุฌููุน ุดุฑูุงุช ุงูุฃูุนุงุจ ุบุงูุจุงู ูุง ุชููู ุฃูุนุงุจ "ูุฑูุจุฉ" ุญุชู ูู ูุฑุญูุฉ ุงูุงุฎุชุจุงุฑ ุงููุบูู ุ ุฅุฐุง ูุงูุช ูุง ุชูู ุจุงูุชููุนุงุช ุงูุชุญููููุฉ.  ููููุง ูุฐูู ุ ูุฅู ุฅุถุงุนุฉ ุงูููุช ูู ุงุฎุชุฑุงุน ุงูุนุฌูุฉ ุงูุชุงููุฉ ุฃูุฑ ุบูุฑ ูุฑุจุญ ุ ูุฐูู ุชูุฑุฑ ุฅูุดุงุก ููุตุฉ ููุญุฏุฉ ุชููุฑ ูููุทูุฑูู ุญูุงู ุฌุงูุฒูุง ููุชูุงูู ูุน ุฌููุน ุงูุฃูุธูุฉ ุงูุฎุงุฑุฌูุฉ ุ ููุงุนุฏุฉ ุจูุงูุงุช ุชุญุชูู ุนูู ูุณุฎ ูุชูุงุซูุฉ ูุฌููุน ุฃูุถู ุงูููุงุฑุณุงุช.  ูู ูุง ูุญุชุงุฌู ุงููุทูุฑูู ูู ุชุทููุฑ ู "ูุถุน" ูุนุจุฉ ุฌูุฏุฉ ุนูู ุฑุฃุณูุง ูุนุฏู ุฅุถุงุนุฉ ุงูููุช ูู ุงูุชุทููุฑ ุบูุฑ ุงููุชุนูู ุจุงููุนุจุฉ ููุณูุง. <br><br>  ุชุณูู ูุฐู ุงูููุตุฉ <b>GameStarter</b> : <br><br><img src="https://habrastorage.org/webt/fz/go/g3/fzgog3jsz4rzjqi0zvbwzysz-po.jpeg" alt="ุตูุฑุฉ"><br><br>  ูุฐูู ุ ุฅูู ูุฐู ุงูููุทุฉ.  ุณูุชู ุจูุงุก ุฌููุน ุฃูุนุงุจ InnoGames ุงููุณุชูุจููุฉ ุนูู ูุฐุง ุงููุธุงู ุงูุฃุณุงุณู ุ ุงูุฐู ูุญุชูู ุนูู ูุงุนุฏุชู ุจูุงูุงุช - ุงููุงุฌุณุชูุฑ ูุงููุนุจุฉ (PostgreSQL 11).  ูููู Master ุจุชุฎุฒูู ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ ุนู ุงููุงุนุจูู (ุชุณุฌูู ุงูุฏุฎูู ููููุฉ ุงููุฑูุฑ ููุง ุฅูู ุฐูู) ููุดุงุฑู ุจุดูู ุฃุณุงุณู ููุท ูู ุนูููุฉ ุชุณุฌูู ุงูุฏุฎูู / ุงูุชุณุฌูู ูู ุงููุนุจุฉ ููุณูุง.  ุงููุนุจุฉ - ูุงุนุฏุฉ ุจูุงูุงุช ุงููุนุจุฉ ููุณูุง ุ ุญูุซ ูุชู ุชุฎุฒูู ุฌููุน ุจูุงูุงุช ุงููุนุจุฉ ูููุงูุงุชูุง ุ ูุงูุชู ูู ุฌููุฑ ุงููุนุจุฉ ุ ุญูุซ ุณุชุฐูุจ ุงูุนุจุก ุจุงููุงูู. <br>  ูุจุงูุชุงูู ุ ูุฅู ุงูุณุคุงู ุงูุฐู ูุทุฑุญ ููุณู ูู ูุง ุฅุฐุง ูุงูุช ูุฐู ุงูุจููุฉ ุจุฃููููุง ูููู ุฃู ุชุตูุฏ ุฃูุงู ูุฐุง ุงูุนุฏุฏ ุงููุญุชูู ูู ุงููุณุชุฎุฏููู ูุณุงูู ููุญุฏ ุงูุฃูุตู ุนุจุฑ ุงูุฅูุชุฑูุช ูู ูุงุญุฏุฉ ูู ุฃูุซุฑ ุฃูุนุงุจูุง ุดุนุจูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ูููุฉ </h2><br>  ูุงูุช ุงููููุฉ ููุณูุง ูู: ุงูุชุญูู ููุง ุฅุฐุง ูุงูุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (PostgreSQL 11) ุ ูุน ุชูููู ุงููุณุฎ ุงููุชูุงุซู ุ ูุงุฏุฑุฉ ุนูู ุชุญูู ุฌููุน ุงูุฃุญูุงู ุงูุชู ููุชูููุง ุญุงูููุง ูู ุงููุนุจุฉ ุงูุฃูุซุฑ ุชุญููููุง ุ ูุน ูุฌูุฏ ุจุฑูุงูุฌ PowerEdge M630 hypervisor ุจุงููุงูู (HV) ุชุญุช ุชุตุฑููุง. <br>  ุณุฃูุถุญ ุฃู ุงููููุฉ ูู ุงูููุช ุงูุญุงูู ูุงูุช <b>ููุท ููุชุญูู</b> ุ ุจุงุณุชุฎุฏุงู ุชููููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุญุงููุฉ ุ ุงูุชู ุดูููุงูุง ูุน ุงูุฃุฎุฐ ูู ุงูุงุนุชุจุงุฑ ุฃูุถู ุงูููุงุฑุณุงุช ูุชุฌุฑุจุชูุง ุงูุฎุงุตุฉ. <br><br>  ุณุฃููู ุนูู ุงูููุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ูุงููุธุงู ุจุฃูููู ุฃุธูุฑ ููุณู ุฌูุฏูุง ุ ุจุงุณุชุซูุงุก ุจุถุน ููุงุท.  ูููู ูุฐุง ุงููุดุฑูุน ุงูุฎุงุต ุจุงูุฃูุนุงุจ ูุงู ูู ูุฑุญูุฉ ุงููููุฐุฌ ุงูุฃููู ููู ุงููุณุชูุจู ุ ูุน ุชุนููุฏ ูููุงูููุง ุงููุนุจุฉ ุ ุณุชุตุจุญ ุทูุจุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฃูุซุฑ ุชุนููุฏูุง ููุฏ ูุฒูุฏ ุงูุญูู ููุณู ุจุดูู ูุจูุฑ ููุฏ ุชุชุบูุฑ ุทุจูุนุชู.  ูููุน ูุฐุง ุ ูู ุงูุถุฑูุฑู ุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ุชูุฑุงุฑู ูููุดุฑูุน ูุน ูู ูุนูู ูุงู ุฃู ุฃูุซุฑ ุฃูููุฉ.  ุฃุตุจุญุช ุฃุชูุชุฉ ุงููุฏุฑุฉ ุนูู ุฅุฌุฑุงุก ูุฐู ุงูุฃููุงุน ูู ุงูุงุฎุชุจุงุฑุงุช ูุน ูุฆุงุช ุงูุขูุงู ูู ุงููุณุชุฎุฏููู ูู ุงููููุฉ ุงูุฑุฆูุณูุฉ ูู ูุฐู ุงููุฑุญูุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงูููู ุงูุดุฎุตู </h2><br>  ูุซู ุฃู ุงุฎุชุจุงุฑ ุงูุญูู ุ ูู ุดูุก ูุจุฏุฃ ูุน ููู ุชุนุฑูู ุงูุญูู. <br>  ุงููููุฉ ุงููุญุชููุฉ CCU60 (CCU ูู ุงูุญุฏ ุงูุฃูุตู ูุนุฏุฏ ุงููุณุชุฎุฏููู ููุชุฑุฉ ูุนููุฉ ูู ุงูููุช ุ ูู ูุฐู ุงูุญุงูุฉ 60 ุฏูููุฉ) ุชุคุฎุฐ ุฅูู <b>250ุ000</b> ูุณุชุฎุฏู.  ุนุฏุฏ ุงููุณุชุฎุฏููู ุงูุธุงูุฑู ุงูุชูุงูุณู (VUs) ุฃูู ูู CCU60 ููุฏ ุงูุชุฑุญ ุงููุญูููู ุฃูู ูููู ุชูุณูููุง ุจุฃูุงู ุฅูู ูุณููู.  ุชูุฑูุจ ููุจูู <b>150ุ000</b> VUs ุชูุงูุณูุฉ. <br><br>  ุชู ุฃุฎุฐ ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุทูุจุงุช ูู ุงูุซุงููุฉ ูู ูุนุจุฉ ูุงุญุฏุฉ ูุญููุฉ ุฅูู ุญุฏ ูุง: <br><br><img src="https://habrastorage.org/webt/lv/te/69/lvte69rifceelurn7r3t7trbgs4.png"><br><br>  ูุจุงูุชุงูู ุ ูุฅู ุญูููุง ุงููุณุชูุฏู ูู ุญูุงูู <b>20.000 ุทูุจ / ุซุงููุฉ</b> ุนูุฏ <b>150ุ000</b> VU. <br><br><h2 style=";text-align:right;direction:rtl">  ูููู </h2><br><h3 style=";text-align:right;direction:rtl">  ุฎุตุงุฆุต "ุงููููู" </h3><br>  ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุงู</a> ุณุงุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุ</a> ุชุญุฏุซุช ุจุงููุนู ุนู ุฃุชูุชุฉ ุงูุนูููุฉ ุงููุงููุฉ ูุงุฎุชุจุงุฑ ุงูุชุญููู.  ุนูุงูุฉ ุนูู ุฐูู ุ ูุฏ ุฃูุฑุฑ ููุณู ููููุงู ุ ููููู ุณุฃุฎุจุฑู ุจุจุนุถ ุงูููุงุท ุจูุฒูุฏ ูู ุงูุชูุงุตูู. <br><br><img src="https://habrastorage.org/webt/zh/hz/eo/zhhzeorw5_gboyuocu9ajmb3ulo.png"><br><br>  ูู ุงููุฎุทุท ุ ุงููุฑุจุนุงุช ุงูุฒุฑูุงุก ูู ุจุฑุงูุฌ Hypervisor (HV) ุงูุฎุงุตุฉ ุจูุง ุ ููู ุณุญุงุจุฉ ุชุชููู ูู ุงูุนุฏูุฏ ูู ุงูุฎูุงุฏู (Dell M620 - M640).  ุนูู ูู ุฌูุฏ ุนุงูู ุ ูุชู ุฅุทูุงู ุนุดุฑุงุช ุงูุฃุฌูุฒุฉ ุงูุธุงูุฑูุฉ (VMs) ุนุจุฑ KVM (ุงูููุจ / ุงูุชุทุจูู ู ุฏูุณูุจู ูู ุงููุฒูุฌ).  ุนูุฏ ุฅูุดุงุก ุฃู VM ุฌุฏูุฏ ุ ูุญุฏุซ ุงูุชูุงุฒู ูุงูุจุญุซ ูู ุฎูุงู ูุฌููุนุฉ ูุนููุงุช HV ุงูููุงุณุจุฉ ูููุณ ูุนุฑูููุง ูุจุฏุฆููุง ุฃู ุฎุงุฏู ุณูููู ุนููู. <br><br><h4 style=";text-align:right;direction:rtl">  ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุนุจุฉ DB): </h4><br>  ููู ูุบุฑุถูุง db1 ุ ูููุง ุจุญุฌุฒ ุฌูุงุฒ HV <b>targer_hypervisor</b> ูููุตู ุนูู ุฃุณุงุณ M630. <br><br>  ุฎุตุงุฆุต ููุฌุฒุฉ ูู targer_hypervisor: <br><br>  Dell M_630 <br>  ุงุณู ุงูููุฏูู: Intelยฎ Xeonยฎ CPU E5-2680 v3 @ 2.50GHz <br>  ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (ู): 48 <br>  ุฎูุท (ู) ูู ุงูุฃุณุงุณูุฉ: 2 <br>  ุงูุฃุณุงุณูุฉ (ู) ูู ุงูููุจุณ: 12 <br>  ุงูููุจุณ (ู): 2 <br>  ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู: 128 ุฌูุฌุงุจุงูุช <br>  ุฏุจูุงู ุฌูู / ููููุณ 9 (ุงูุชุฏุงุฏ) <br>  4.9.0-8-amd64 # 1 SMP Debian 4.9.130-2 (2018-10-27) <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงูููุงุตูุงุช ุงูุชูุตูููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ุฏุจูุงู ุฌูู / ููููุณ 9 (ุงูุชุฏุงุฏ) <br>  4.9.0-8-amd64 # 1 SMP Debian 4.9.130-2 (2018-10-27) <br>  lscpu <br>  ุงูุนูุงุฑุฉ: x86_64 <br>  ูุถุน (ุฃูุถุงุน) ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ: 32 ุจุช ุ 64 ุจุช <br>  ุชุฑุชูุจ ุงูุจุงูุช: Little Endian <br>  ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (ู): 48 <br>  ูุงุฆูุฉ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (CPU) ุนูู ุงูุฅูุชุฑูุช: 0-47 <br>  ุฎูุท (ู) ูู ุงูุฃุณุงุณูุฉ: 2 <br>  ุงูุฃุณุงุณูุฉ (ู) ูู ุงูููุจุณ: 12 <br>  ุงูููุจุณ (ู): 2 <br>  ุนูุฏุฉ (NUMA): 2 <br>  ูุนุฑู ุงูุจุงุฆุน: GenuineIntel <br>  ุนุงุฆูุฉ ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ: 6 <br>  ุงููููุฐุฌ: 63 <br>  ุงุณู ุงูููุฏูู: Intelยฎ Xeonยฎ CPU E5-2680 v3 @ 2.50GHz <br>  ูุฎุทู: 2 <br>  ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ููุบุงููุฑุชุฒ: 1309.356 <br>  ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ูุงูุณ ููุบุงููุฑุชุฒ: 3300.0000 <br>  ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุฏูููุฉ ููุบุงููุฑุชุฒ: 1200.0000 <br>  ุจูุฌููุจุณ: 4988.42 <br>  ุงูุงูุชุฑุงุถูุฉ: VT-x <br>  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช L1d: 32 ูููู <br>  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช L1i: 32 ูููู ุจุงูุช <br>  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช L2: 256 ูููู <br>  ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช L3: 30720K <br>  NUMA node0 CPU (s): 0ุ2ุ4ุ6ุ8ุ10ุ12ุ14ุ16ุ18ุ20ุ22ุ24ุ26ุ28ุ30ุ32ุ34ุ36ุ36ุ40ุ42 ุ 44.46 <br>  NUMA node1 CPU (s): 1ุ3ุ5ุ7ุ9ุ11ุ13ุ15ุ17ุ19ุ21ุ23ุ25ุ27ุ29ุ31ุ33ุ35ุ37ุ39ุ41ุ43 ุ 45.47 <br>  ุงูุฃุนูุงู: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx pdpe1gb rdtscptsts bopts bopts bts SMX ุจุชูููุช ุดุฑู ุงูููุงูุงุช ุงููุชุญุฏุฉ TM2 SSSE3 sdbg FMA CX16 xtpr pdcm PCID DCA sse4_1 sse4_2 x2apic movbe popcnt tsc_deadline_timer AES xsave AVX f16c rdrand lahf_lm ABM EPB invpcid_single ssbd ibrs ibpb stibp ูุงูุฒุฑ tpr_shadow vnmi flexpriority EPT vpid fsgsbase tsc_adjust bmi1 AVX2 smep bmi2 ERMS invpcid CQM xsaveopt cqm_llc cqm_occup_llc dtherm ุงููุคุณุณุฉ ุงูุฏูููุฉ ููุชูููุฉ pts arn flush_l1d <br><br>  / usr / bin / qemu-system-x86_64 - ุงูุฅุตุฏุงุฑ <br>  QEMU emulator version 2.8.1 (Debian 1: 2.8 + dfsg-6 + deb9u5) <br>  ุญููู ุงูุชุฃููู ูุงููุดุฑ ยฉ 2003-2016 ูุงุจุฑูุณ ุจููุงุฑุฏ ููุทูุฑู ูุดุฑูุน QEMU <br></div></div><br>  ุฎุตุงุฆุต ููุฌุฒุฉ ูู db1: <br>  ุงูุนูุงุฑุฉ: x86_64 <br>  ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ (ู): 48 <br>  ุฐุงูุฑุฉ ุงููุตูู ุงูุนุดูุงุฆู: 64 ุฌูุฌุงุจุงูุช <br>  4.9.0-8-amd64 # 1 SMP Debian 4.9.144-3.1 (2019-02-19) x86_64 GNU / Linux <br>  ุฏุจูุงู ุฌูู / ููููุณ 9 (ุงูุชุฏุงุฏ) <br>  psql (PostgreSQL) 11.2 (Debian 11.2-1.pgdg90 + 1) <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">PostgreSQL ุงูุชูููู ูุน ุจุนุถ ุงูุชูุณูุฑุงุช</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  seq_page_cost = 1.0 <br>  random_page_cost = 1.1 # ูุฏููุง SSD <br>  ุชุดูู "/etc/postgresql/11/main/extension.conf" <br>  log_line_prefix = 'ูช t [ูช p-ูช l]ูช qูช u @ูช h' <br>  log_checkpoints = ุนูู <br>  log_lock_waits = ุนูู <br>  log_statement = ddl <br>  log_min_duration_statement = 100 <br>  log_temp_files = 0 <br>  autov Vacuum_max_workers = 5 <br>  autov Vacuum_naptime = 10s <br>  autov Vacuum_vacuum_cost_delay = 20ms <br>  vacuum_cost_limit = 2000 <br>  maintenance_work_mem = 128 ููุฌุงุจุงูุช <br>  ุงูุชุฒุงูู = ุฅููุงู <br>  checkpoint_timeout = 30 ุฏูููุฉ <br>  listen_addresses = '*' <br>  work_mem = 32 ููุบุงุจุงูุช <br>  effect_cache_size = 26214 ููุฌุงุจุงูุช # 50ูช ูู ุงูุฐุงูุฑุฉ ุงููุชููุฑุฉ <br>  Shared_buffers = 16384 ููุฌุงุจุงูุช # 25ูช ูู ุงูุฐุงูุฑุฉ ุงููุชููุฑุฉ <br>  max_wal_size = 15GB <br>  min_wal_size = 80 ููุบุงุจุงูุช <br>  wal_level = hot_standby <br>  max_wal_senders = 10 <br>  wal_compression = ุนูู <br>  archive_mode = ุนูู <br>  archive_command = '/ bin / true' <br>  archive_timeout = 1800 <br>  hot_standby = ุนูู <br>  wal_log_hints = ุนูู <br>  hot_standby_feedback = ุนูู <br></div></div><br>  <b>ุชู</b> ุฅููุงู <b>ุชุดุบูู</b> ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ูู <b>hot_standby_feedback</b> ุ ูููู ุชู ุชุดุบูููุง ูุงุญููุง ุ ูููู ูู ููุช ูุงุญู ุชู ุฅููุงู ุชุดุบูููุง ูุฅุฌุฑุงุก ุงุฎุชุจุงุฑ ูุงุฌุญ.  ุณุงูุถุญ ูุงุญูุง ููุงุฐุง. <br><br>  ูุชู ุชุนุจุฆุฉ ุงูุฌุฏุงูู ุงููุดุทุฉ ุงูุฑุฆูุณูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (ุงูุฅูุดุงุก ุ ุงูุฅูุชุงุฌ ุ game_entity ุ ุงูุฅูุดุงุก ุ core_inventory_player_resource ุ ุงููุงุฌู) ูุณุจููุง ูุน ุงูุจูุงูุงุช (ุญูุงูู 80 ุฌูุฌุงุจุงูุช) ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ ูุตู ููุจุงุด. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">db-fill-script.sh</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash --clean TRUNCATE TABLE production CASCADE; TRUNCATE TABLE construction CASCADE; TRUNCATE TABLE building CASCADE; TRUNCATE TABLE grid CASCADE; TRUNCATE TABLE core_inventory_player_resource CASCADE; TRUNCATE TABLE survivor CASCADE; TRUNCATE TABLE city CASCADE; TRUNCATE TABLE game_entity CASCADE; TRUNCATE TABLE player CASCADE; TRUNCATE TABLE core_player CASCADE; TRUNCATE TABLE core_client_device CASCADE; --core_client_device INSERT INTO core_client_device (id, creation_date, modification_date, device_model, device_name, locale, platform, user_agent, os_type, os_version, network_type, device_type) SELECT (1000000000+generate_series(0,999999)) AS id, now(), now(), 'device model', 'device name', 'en_DK', 'ios', 'ios user agent', 'android', '8.1', 'wlan', 'browser'; --core_player INSERT INTO core_player (id, guest, name, nickname, premium_points, soft_deleted, session_id, tracking_device_data_id) SELECT (1000000000+generate_series(0,999999)) AS id, true, 'guest0000000000000000000', null, 100, false, '00000000-0000-0000-0000-000000000000', (1000000000+generate_series(0,999999)) ; --player INSERT INTO player (id, creation_date, modification_date, core_player_id) SELECT (1000000000+generate_series(0,999999)) , now(), now(), (1000000000+generate_series(0,999999)) ; --city INSERT INTO game_entity (id, type, creation_date, modification_date) SELECT (1000000000+generate_series(0,999999)) , 'city', now(), now(); INSERT INTO city (id, game_design, player_id) SELECT (1000000000+generate_series(0,999999)) , 'city.default', (1000000000+generate_series(0,999999)) ; --survivor INSERT INTO game_entity (id, type, creation_date, modification_date) SELECT (1001000000+generate_series(0,999999)) , 'survivor', now(), now(); INSERT INTO survivor (id, game_design, owning_entity_id, type) SELECT (1001000000+generate_series(0,999999)) , 'survivor.prod_1', (1000000000+generate_series(0,999999)) , 'survivor'; --core_inventory_player_resource INSERT INTO core_inventory_player_resource (id, creation_date, modification_date, amount, player_id, resource_key) SELECT (1000000000+generate_series(0,1999999)) , NOW(), NOW(), 1000, (1000000000+generate_series(0,1999999)/2) , CONCAT('resource_', (1000000000+generate_series(0,1999999)) % 2); --grid DROP INDEX grid_area_idx; INSERT INTO grid (id, creation_date, modification_date, area, city_id) SELECT (1000000000+generate_series(0,19999999)) , NOW(), NOW(), BOX '0,0,4,4', (1000000000+generate_series(0,19999999)/20) ; create index on grid using gist (area box_ops); --building INSERT INTO game_entity (id, type, creation_date, modification_date) SELECT (1002000000+generate_series(0,99999999)) , 'building', now(), now(); INSERT INTO building (id, game_design, owning_entity_id, x, y, rotation, type) SELECT (1002000000+generate_series(0,99999999)) , 'building.building_prod_1', (1000000000+generate_series(0,99999999)/100) , 0, 0, 'DEGREES_0', 'building'; --construction INSERT INTO construction (id, creation_date, modification_date, definition, entity_id, start) SELECT (1000000000+generate_series(0,1999999)) , NOW(), NOW(), 'construction.building_prod_1-construction', (1002000000+generate_series(0,1999999)*50) , NOW(); --production INSERT INTO production (id, creation_date, modification_date, active, definition, entity_id, start_time) SELECT (1000000000+generate_series(0,49999999)) , NOW(), NOW(), true, 'production.building_prod_1_production_1', (1002000000+generate_series(0,49999999)*2) , NOW();</span></span></code> </pre> <br></div></div><br>  ุงููุณุฎ ุงููุชูุงุซู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">SELECT * FROM pg_stat_replication; pid | usesysid | usename | application_name | client_addr | client_hostname | client_port | backend_start | backend_xmin | state | sent_lsn | write_lsn | flush_lsn | replay_lsn | write_lag | flush_lag | replay_lag | sync_priority | sync_state -----+----------+---------+---------------------+--------------+---------------------+-------------+-------------------------------+--------------+-----------+------------+------------+------------+------------+-----------------+-----------------+-----------------+---------------+------------ 759 | 17035 | repmgr | xl1db2 | xxxx | xl1db2 | 51142 | 2019-01-27 08:56:44.581758+00 | | streaming | 18/424A9F0 | 18/424A9F0 | 18/424A9F0 | 18/424A9F0 | 00:00:00.000393 | 00:00:00.001159 | 00:00:00.001313 | 0 | async 977 | 17035 | repmgr | xl1db3 |xxxxx | xl1db3 | 42888 | 2019-01-27 08:57:03.232969+00 | | streaming | 18/424A9F0 | 18/424A9F0 | 18/424A9F0 | 18/424A9F0 | 00:00:00.000373 | 00:00:00.000798 | 00:00:00.000919 | 0 | async</code> </pre><br><h4 style=";text-align:right;direction:rtl">  ุฎุงุฏู ุงูุชุทุจูู </h4><br>  ุซู ุ ุนูู HV ุงูุฅูุชุงุฌูุฉ (prod_hypervisors) ูู ูุฎุชูู ุงูุชููููุงุช ูุงููุฏุฑุงุช ุ ุชู ุฅุทูุงู 15 ุฎุงุฏู ุชุทุจููุงุช: 8 ูุฑุงูุฒ ุ 4 ุฌูุฌุงุจุงูุช.  ุงูุดูุก ุงูุฑุฆูุณู ุงูุฐู ูููู ูููู: openjdk 11.0.1 2018-10-16 ุ ุงูุฑุจูุน ุ ูุงูุชูุงุนู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุนุจุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">hikari</a> (hikari.maximum-pool-size: 50) <br><br><h4 style=";text-align:right;direction:rtl">  ุจูุฆุฉ ุงุฎุชุจุงุฑ ุงูุฅุฌูุงุฏ </h4><br>  ุชุชููู ุจูุฆุฉ ุงุฎุชุจุงุฑ ุงูุชุญููู ุงููุงููุฉ ูู ุฎุงุฏู <b>admin.loadtest</b> ุฑุฆูุณู ูุงุญุฏ ุ ูุงูุนุฏูุฏ ูู ุฎูุงุฏู <b>generatorN.loadtest</b> (ูู ูุฐู ุงูุญุงูุฉ ูุงู ููุงู 14). <br><br>  <b>generatorN.loadtest</b> - "ุงูุนุงุฑูุฉ" VM ุฏูุจูุงู ููููุณ 9 ุ ูุน ุชุซุจูุช Java 8. 32 kernels / 32 ุบูุบุง ุจุงูุช.  ููู ุชูุน ุนูู ุงูุฌูุฏ ุงูุนุงูู "ุบูุฑ ุงูููุชุฌ" ุ ุญุชู ูุง ุชูุชู ุฃุฏุงุก ุงูุฃุฌูุฒุฉ ุงูุธุงูุฑูุฉ ุงููููุฉ ุนู ุทุฑูู ุงูุฎุทุฃ. <br><br>  <b>admin.loadtest</b> - <b>ุงูุฌูุงุฒ ุงูุธุงูุฑู ูู</b> Debian Linux 9 ู 16 <b>ูุฑูุฒูุง</b> / 16 ุงูุนุฑุจุงุช ุ ููุฏูุฑ Jenkins ู JLTC ูุบูุฑูุง ูู ุงูุจุฑุงูุฌ ุบูุฑ ุงููููุฉ. <br><br>  JLTC - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑูุฒ ุงุฎุชุจุงุฑ ุชุญููู jmeter</a> .  ูุธุงู ูู Py / Django ูุชุญูู ูู ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช ูุฃุชูุชุฉ ุ ููุฐูู ุชุญููู ุงููุชุงุฆุฌ. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุฎุชุจุงุฑ ุฅุทูุงู ุงููุฎุทุท </h3><br><img src="https://habrastorage.org/webt/pb/f_/th/pbf_thx7mwuois96bffvbeehtxk.png"><br><br>  ุชุจุฏู ุนูููุฉ ุฅุฌุฑุงุก ุงูุงุฎุชุจุงุฑ ููุง ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชู ุฅุทูุงู ุงูุงุฎุชุจุงุฑ ูู <b>ุฌููููุฒ</b> .  ุญุฏุฏ ุงููุธููุฉ ุงููุทููุจุฉ ุ ุซู ุชุญุชุงุฌ ุฅูู ุฅุฏุฎุงู ูุนููุงุช ุงูุงุฎุชุจุงุฑ ุงููุทููุจุฉ: <ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <b>ุงููุฏุฉ</b> - ูุฏุฉ ุงูุงุฎุชุจุงุฑ </li><li style=";text-align:right;direction:rtl">  <b>RAMPUP</b> - ููุช "ุงูุงุญูุงุก" </li><li style=";text-align:right;direction:rtl">  <b>THREAD_COUNT_TOTAL</b> - ุงูุนุฏุฏ ุงููุทููุจ ูู ุงููุณุชุฎุฏููู ุงูุธุงูุฑููู (VU) ุฃู ุณูุงุณู ุงูุฑุณุงุฆู </li><li style=";text-align:right;direction:rtl">  <b>TARGET_RESPONSE_TIME</b> ูู ูุนููุฉ ูููุฉ ุ ุญุชู ูุง <b>ููุฑุท</b> ูู ุชุญููู ุงููุธุงู ุจุฑูุชู ุจูุณุงุนุฏุชู ุ ููุฏ ุญุฏุฏูุง ููุช ุงูุงุณุชุฌุงุจุฉ ุงููุทููุจ ุ ูุจูุงุกู ุนูู ุฐูู ุ ุณูุจูู ุงูุงุฎุชุจุงุฑ ุงูุญูู ุนูู ูุณุชูู ูุง ูููู ููู ููุช ุงุณุชุฌุงุจุฉ ุงููุธุงู ุจุฃูููู ุฃูุซุฑ ูู ุงููุญุฏุฏ. </li></ul></li><li style=";text-align:right;direction:rtl">  ุฅุทูุงู </li><li style=";text-align:right;direction:rtl">  ุฌูููููุฒ ูุณุชูุณุฎ ุฎุทุฉ ุงูุงุฎุชุจุงุฑ ูู Gitlab ุ ููุฑุณููุง ุฅูู JLTC. </li><li style=";text-align:right;direction:rtl">  ุชุนูู JLTC ููููุงู ูุน ุฎุทุฉ ุงุฎุชุจุงุฑ (ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฏุฑุงุฌ ูุงุชุจ CSV ุจุณูุท). </li><li style=";text-align:right;direction:rtl">  ูุญุณุจ JLTC ุงูุนุฏุฏ ุงููุทููุจ ูู ุฎูุงุฏู Jmeter ูุชุดุบูู ุงูุนุฏุฏ ุงููุฑุบูุจ ูู VUs (THREAD_COUNT_TOTAL). </li><li style=";text-align:right;direction:rtl">  JLTC ูุชุตู ุจูู ูููุฏ loadgeneratorN ููุจุฏุฃ ุฎุงุฏู jmeter. </li></ul><br>  ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ ุ ูููู <b>JMeter-client</b> ุจุฅูุดุงุก ููู CSV ุจุงููุชุงุฆุฌ.  ูุฐุง ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ ูุฒุฏุงุฏ ููุฏุงุฑ ุงูุจูุงูุงุช ูุญุฌู ูุฐุง ุงูููู ุจูุชูุฑุฉ <b>ูุฌูููุฉ</b> ุ ููุง ูููู ุงุณุชุฎุฏุงูู ููุชุญููู ุจุนุฏ ุงูุงุฎุชุจุงุฑ - <b>ุชู</b> ุงุฎุชุฑุงุน ุงูุจุฑูุงูุฌ <b>ุงูุฎูู</b> (ูุชุฌุฑุจุฉ) ุ ุงูุฐู ููุฒุนู <i>"ุณุฑูุนูุง"</i> . <br><br><h3 style=";text-align:right;direction:rtl">  ุฎุทุฉ ุงูุงุฎุชุจุงุฑ </h3><br>  ููููู ุชูุฒูู ุฎุทุฉ ุงูุงุฎุชุจุงุฑ <a href="">ููุง</a> . <br><br>  ุจุนุฏ ุงูุชุณุฌูู / ุชุณุฌูู ุงูุฏุฎูู ุ ูุนูู ุงููุณุชุฎุฏููู ูู ุงููุญุฏุฉ ุงูููุทูุฉ <b>ููุณููู</b> ุ ูุงูุชู ุชุชููู ูู ุนุฏุฉ <b>ูุญุฏุงุช ุชุญูู ูู ุงูุฅูุชุงุฌูุฉ</b> ูุงูุชู ุชุญุฏุฏ ุงุญุชูุงู ูุฌูุฏ ูุธููุฉ ูุนุจุฉ ูุนููุฉ.  ูู ูู ูุญุฏุฉ ุชุญูู ุ ููุฌุฏ <b>ูุญุฏุฉ ุชุญูู</b> ุ ูุงูุชู ุชุดูุฑ ุฅูู ุงููุญุฏุฉ ุงูููุทูุฉ ุงูููุงุจูุฉ ุงูุชู ุชููุฐ ุงููุธููุฉ. <br><br><img src="https://habrastorage.org/webt/t0/ws/qp/t0wsqpbkgo-w6dt55gvxd6aw9pm.png"><br><br><h4 style=";text-align:right;direction:rtl">  ุฎุงุฑุฌ ุงูููุถูุน </h4><br>  ุฃุซูุงุก ุชุทููุฑ ุงูุจุฑูุงูุฌ ุงููุตู ุ ุญุงูููุง ุงุณุชุฎุฏุงู Groovy ุนูู ุฃููู ูุฌู ุ ูุจูุถู ูุจุฑูุฌ Java ุงูุฎุงุต ุจูุง ุ ุงูุชุดูุช ุจุนุถ ุงูุญูู ูููุณู (ุฑุจูุง ุณุชููู ูููุฏุฉ ูุดุฎุต ูุง): <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููู ุงูุฅุนูุงู ุนู ูุธููุฉ ูุง ูู ููุงู ูุง ูู ุจุฏุงูุฉ ุฎุทุฉ ุงูุงุฎุชุจุงุฑ ุ ุซู ุงุณุชุฎุฏุงููุง ูู ูุนุงูุฌุงุช ูุง ูุจู ููุง ุจุนุฏ ุงูุนููุงุช ูุฃุฎุฐ ุงูุนููุงุช.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฎูุฑ</a> ุฃูุซุฑ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุงุฆุน: ุชุญููู ุงูุฃุณุงููุจ ุฅูู ุงูุฅุบูุงู</a> : <br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//     - def sum(Integer x, Integer y) { return x + y } vars.putObject('sum', this.&amp;sum) //      closure.   . //     sampler`       def sum= vars.getObject('sum'); println sum(2, 2);</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">groovy.json.JsonSlurper</a> ูู ูุญูู JSON ุณุฑูุน ููุบุงูุฉ.  ูุชูุญ ูู ูุน groovy ุชุญููู ุงูุจูุงูุงุช ุจุฃูุงูุฉ ููุนุงูุฌุชูุง: <br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> groovy.json.JsonSlurper def canBuild = vars.getObject(canBuild); <span class="hljs-comment"><span class="hljs-comment">// ""       def content = jsonSlurper.parseText(response).content def buildings = content[0].buildings //         //               def constructableBuildingDefs = buildings .collect { k,v -&gt; v } .grep{ it.definitions .grep { it2 -&gt; it2['@type'] == 'type.googleapis.com/ConstructionDefinitionDTO'} .grep { it2 -&gt; canBuild(it2) } //   .size() &gt; 0 } if (!constructableBuildingDefs) { return; } Collections.shuffle(constructableBuildingDefs) //       </span></span></code> </pre></li></ul><br><h3 style=";text-align:right;direction:rtl">  ูู / ุงูููุงุถูุน </h3><br>  ุนูุฏูุง ูููู ุงููุณุชุฎุฏู ุจุฅุฏุฎุงู ุงูุนุฏุฏ ุงููุฑุบูุจ ูู VUs ุจุงุณุชุฎุฏุงู ุงููุนููุฉ THREAD_COUNT_TOTAL ุนูุฏ ุชูููู ุงููููุฉ ูู ุฌููููุฒ ุ ููู ุงูุถุฑูุฑู ุฃู ุชุจุฏุฃ ุจุทุฑููุฉ ูุง ุงูุนุฏุฏ ุงููุทููุจ ูู ุฎูุงุฏู Jmeter ูุชูุฒูุน ุงูุนุฏุฏ ุงูููุงุฆู ูู VUs ุจูููุง.  ูููู ูุฐุง ุงูุฌุฒุก ูู JLTC ูู ุงูุฌุฒุก ุงููุณูู <b>ุชุญูู / ุชูููุฑ</b> . <br><br>  ูู ุงูุฌููุฑ ุ ุงูุฎูุงุฑุฒููุฉ ูู ููุง ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุณู ุงูุนุฏุฏ ุงููุฑุบูุจ ููู ูู <b>ูุคุดุฑุงุช ุชุฑุงุจุท</b> VU <b>Threads_num ุนูู</b> 200-300 ุณูุงุณู ุนูููุงุช ุจูุงุกู ุนูู ุงูุญุฌู ุงูููุงุฆู ุฃูุซุฑ ุฃู ุฃูู <b>-Xmsm -Xmxm</b> ุชุญุฏูุฏ ูููุฉ ุงูุฐุงูุฑุฉ ุงููุทููุจุฉ ููู <i>jmeter-server</i> <b>required_memory_for_jri</b> (JRI - ุฃุฏุนู ูุซูู Jmeter ุนู ุจูุนุฏ ุ ุจุฏูุงู ูู Jmeter-server). </li><li style=";text-align:right;direction:rtl">  ูู Threads_num ู required_memory_for_jri ุ ูุฌุฏ ุงูุนุฏุฏ ุงูุฅุฌูุงูู ูุฎุงุฏู jmeter: <b>target_amount_jri</b> ูุงููููุฉ ุงูุฅุฌูุงููุฉ ููุฐุงูุฑุฉ <b>ุงููุทููุจุฉ</b> : <b>required_memory_total</b> . </li><li style=";text-align:right;direction:rtl">  ูููู ุจุงููุฑุฒ ุจูู ุฌููุน ุงููููุฏุงุช loadgeneratorN ูุงุญุฏูุง ุชูู ุงูุขุฎุฑ ููุจุฏุฃ ุชุดุบูู ุฃูุจุฑ ุนุฏุฏ ูููู ูู ุฎูุงุฏู jmeter ุงุณุชูุงุฏูุง ุฅูู ุงูุฐุงูุฑุฉ ุงููุชููุฑุฉ ุนููู.  ุทุงููุง ุฃู ุนุฏุฏ ูุซููุงุช current_amount_jri ููุฏ ุงูุชุดุบูู <b>ูุง ูุณุงูู</b> target_amount_jri. </li><li style=";text-align:right;direction:rtl">  (ุฅุฐุง ูุงู ุนุฏุฏ ุงููููุฏุงุช ูุฅุฌูุงูู ุงูุฐุงูุฑุฉ ุบูุฑ ูุงูู ุ ูุฃุถู ูุงุญุฏูุง ุฌุฏูุฏูุง ุฅูู ุงููุฌููุนุฉ) </li><li style=";text-align:right;direction:rtl">  ูุญู ูุชุตู ุจูู ูููุฏ ุ ุจุงุณุชุฎุฏุงู <b>ูุชุณุชุช</b> ูุชุฐูุฑ ุฌููุน ุงูููุงูุฐ ุงููุฒุฏุญูุฉ ุ <b>ููุนูู</b> ุนูู ููุงูุฐ ุนุดูุงุฆูุฉ (ุบูุฑ ูุดุบููุฉ) ุจุงูุนุฏุฏ ุงููุทููุจ ูู ุฎูุงุฏู jmeter: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"> netstat_cmd= <span class="hljs-string"><span class="hljs-string">'netstat -tulpn | grep LISTEN'</span></span> stdin, stdout, stderr = ssh.exec_command(cmd1) used_ports = [] netstat_output = str(stdout.readlines()) ports = re.findall(<span class="hljs-string"><span class="hljs-string">'\d+\.\d+\.\d+\.\d+\:(\d+)'</span></span>, netstat_output) ports_ipv6 = re.findall(<span class="hljs-string"><span class="hljs-string">'\:\:\:(\d+)'</span></span>, netstat_output) p.wait() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> port <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ports: used_ports.append(int(port)) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> port <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ports_ipv6: used_ports.append(int(port)) ssh.close() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(<span class="hljs-number"><span class="hljs-number">1</span></span>, possible_jris_on_host + <span class="hljs-number"><span class="hljs-number">1</span></span>): port = int(random.randint(<span class="hljs-number"><span class="hljs-number">10000</span></span>, <span class="hljs-number"><span class="hljs-number">20000</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> port <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> used_ports: port = int(random.randint(<span class="hljs-number"><span class="hljs-number">10000</span></span>, <span class="hljs-number"><span class="hljs-number">20000</span></span>)) <span class="hljs-comment"><span class="hljs-comment"># ...  Jmeter-    </span></span></code> </pre></li><li style=";text-align:right;direction:rtl">  ูููู ุจุชุฌููุน ูุงูุฉ ุฎูุงุฏู jmeter ููุฏ ุงูุชุดุบูู ูู ููุช ูุงุญุฏ ูู ุนููุงู ุงูุชูุณูู: ูููุฐ ุ ุนูู ุณุจูู ุงููุซุงู ุ <b>ูููุฏ 13: 15576 ุ ูููุฏ 9: 14015 ุ ูููุฏ 11: 19152 ุ ูููุฏ 14: 12125 ุ ูููุฏ 2: 17602</b> </li><li style=";text-align:right;direction:rtl">  ูุชู ุฅุฑุณุงู ุงููุงุฆูุฉ ุงููุงุชุฌุฉ ู thread_per_host ุฅูู ุนููู JMeter ุนูุฏ ุจุฏุก ุงูุงุฎุชุจุงุฑ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">REMOTE_TESTING_FLAG=<span class="hljs-string"><span class="hljs-string">" -R </span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$REMOTE_HOSTS_STRING</span></span></span><span class="hljs-string">"</span></span> java -jar -Xms7g -Xmx7g -Xss228k <span class="hljs-variable"><span class="hljs-variable">$JMETER_DIR</span></span>/bin/ApacheJMeter.jar -Jserver.rmi.ssl.disable=<span class="hljs-literal"><span class="hljs-literal">true</span></span> -n -t <span class="hljs-variable"><span class="hljs-variable">$TEST_PLAN</span></span> -j <span class="hljs-variable"><span class="hljs-variable">$WORKSPACE</span></span>/loadtest.log -GTHREAD_COUNT=<span class="hljs-variable"><span class="hljs-variable">$THREADS_PER_HOST</span></span> <span class="hljs-variable"><span class="hljs-variable">$OTHER_VARS</span></span> <span class="hljs-variable"><span class="hljs-variable">$REMOTE_TESTING_FLAG</span></span> -Jjmeter.save.saveservice.default_delimiter=,</code> </pre></li></ul><br>  ูู ุญุงูุชูุง ุ ุชู ุงูุงุฎุชุจุงุฑ ูู ููุช ูุงุญุฏ ูู ุฎูุงุฏู Jmeter 300 ุ 500 ุฎูุท ููู ูููุง ุ ุดูู ุงูุชูุณูู ูุฎุงุฏู Jmeter ูุงุญุฏ ูุน ูุนููุงุช Java ููุง ููู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">nohup java -server -Xms1200m -Xmx1200m -Xss228k -XX:+DisableExplicitGC -XX:+CMSClassUnloadingEnabled -XX:+UseCMSInitiatingOccupancyOnly -XX:CMSInitiatingOccupancyFraction=70 -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark -XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -Djava.net.preferIPv6Addresses=<span class="hljs-literal"><span class="hljs-literal">true</span></span> -Djava.net.preferIPv4Stack=<span class="hljs-literal"><span class="hljs-literal">false</span></span> -jar <span class="hljs-string"><span class="hljs-string">"/tmp/jmeter-JwKse5nY/bin/ApacheJMeter.jar"</span></span> -Jserver.rmi.ssl.disable=<span class="hljs-literal"><span class="hljs-literal">true</span></span> <span class="hljs-string"><span class="hljs-string">"-Djava.rmi.server.hostname=generator12.loadtest.ig.local"</span></span> -Duser.dir=/tmp/jmeter-JwKse5nY/bin/ -Dserver_port=13114 -s -Jpoll=49 &gt; /dev/null 2&gt;&amp;1</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  50ms </h3><br>  ุชุชูุซู ุงููููุฉ ูู ุชุญุฏูุฏ ููุฏุงุฑ ูุฏุฑุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฏููุง ุนูู ุงูุตููุฏ ุ ุจุฏูุงู ูู ุงูุชุญููู ุงูุฒุงุฆุฏ ูุงููุธุงู ุจุฃูููู ููู ูู ุญุงูุฉ ุญุฑุฌุฉ.  ูุน ูุฌูุฏ ุงูุนุฏูุฏ ูู ุฎูุงุฏู Jmeter ุ ุชุญุชุงุฌ ุฅูู ุงูุญูุงุธ ุนูู ุงูุญูู ุจุทุฑููุฉ ุฃู ุจุฃุฎุฑู ุนูู ูุณุชูู ูุนูู ูุนุฏู ูุชู ุงููุธุงู ุจุฃูููู.  ุงููุนููุฉ <b>TARGET_RESPONSE_TIME</b> ุงููุญุฏุฏุฉ ุนูุฏ ุจุฏุก ุงูุงุฎุชุจุงุฑ ูุณุคููุฉ ุนู ุฐูู.  ุงุชูููุง ุนูู ุฃู <b>50 ูููู ุซุงููุฉ</b> ูู ููุช ุงูุงุณุชุฌุงุจุฉ ุงูุฃูุซู ุงูุฐู ูุฌุจ ุฃู ูููู ุงููุธุงู ูุณุคููุงู ุนูู. <br><br>  ูู JMeter ุ ุจุดูู ุงูุชุฑุงุถู ุ ููุงู ุงูุนุฏูุฏ ูู ุฃุฌูุฒุฉ ุถุจุท ุงูููุช ุงููุฎุชููุฉ ุงูุชู ุชุณูุญ ูู ุจุงูุชุญูู ูู ุงูุฅูุชุงุฌูุฉ ุ ูููู ูุง ููุนุฑู ููุงู ุงูุญุตูู ุนูููุง ูู ุญุงูุชูุง.  ูููู ููุงู <b>JSR223-Timer</b> ุงูุชู ููููู ูู ุฎูุงููุง ุงูุชูุตู ุฅูู ุดูุก ุจุงุณุชุฎุฏุงู <b>ููุช ุงุณุชุฌุงุจุฉ</b> ุงููุธุงู <b>ุงูุญุงูู</b> .  ุงููููุช ููุณู ูู ูุชูุฉ <b>ุงูุณููู</b> ุงูุฑุฆูุณูุฉ: <br><br><img src="https://habrastorage.org/webt/uv/o8/rb/uvo8rb9ph7mr1xhxkzxccsfa06a.png"><br><br><pre style=";text-align:right;direction:rtl"> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//      = 0 vars.put('samples', '20'); vars.putObject('respAvg', ${TARGET_RESPONSE_TIME}.0); vars.putObject('sleep', 0.0); //  JSR223-Timer           "" double sleep = vars.getObject('sleep'); double respAvg = vars.getObject('respAvg'); double previous = sleep; double target = ${TARGET_RESPONSE_TIME}; if (respAvg &lt; target) { sleep /= 1.5; } if (respAvg &gt; target) { sleep *= 1.1; } sleep = Math.max(10, sleep); //      sleep = Math.min(20000, sleep); vars.putObject('sleep', sleep); return (int)sleep;</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ุชุญููู ุงููุชุงุฆุฌ (ุงูุฎูู) </h3><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฑุณูู ุงูุจูุงููุฉ ูู Grafana ุ ูุฌุจ ุฃู ูููู ูุฏูู ุฃูุถูุง ูุชุงุฆุฌ ุงุฎุชุจุงุฑ ูุฌูุนุฉ ุจุญูุซ ูููู ููุงุฑูุฉ ุงูุงุฎุชุจุงุฑุงุช ูุงุญููุง ูู JLTC. <br><br>  ูููุฏ ุฃุญุฏ ูุฐู ุงูุงุฎุชุจุงุฑุงุช ุทูุจุงุช ุชุชุฑุงูุญ ูู 16 ุฅูู 20 ูููู ูู ุงูุซุงููุฉ ุ ููู ุงูุณูู ุญุณุงุจ ุฃูู ูู ุบุถูู 4 ุณุงุนุงุช ูููุฏ ููู CSV ูู ุจุถุน ูุฆุงุช ุบูุบุงุจุงูุช ูู ุงูุญุฌู ุ ูุฐูู ูุงู ูู ุงูุถุฑูุฑู ุงูุฎุฑูุฌ ุจูููุฉ ุชููู ุจุชูุฒูุน ุงูุจูุงูุงุช ูู ุฏูููุฉ ุ ูุฅุฑุณุงููุง ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชูุธูู ุงูููู ุงูุฑุฆูุณู. <br><br><img src="https://habrastorage.org/webt/pb/mj/kc/pbmjkcwgjcxupnihgzpzmqd0nvq.png"><br><br>  ุงูุฎูุงุฑุฒููุฉ ูู ููุง ููู: <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููุฑุฃ ุงูุจูุงูุงุช ูู ููู CSV <b>result.jtl ุงูุฐู ุชู</b> ุฅูุดุงุคู ุจูุงุณุทุฉ jmeter-client ุ ูุญูุธู ูุชูุธูู ุงูููู (ุชุญุชุงุฌ ุฅูู ุชูุธููู ุจุดูู ุตุญูุญ ุ ูุฅูุง ูุฅู ุงูููู ุฐู ุงููุธูุฑ ุงููุงุฑุบ ุณูููู ูู ููุณ FD ุจููุณ ุงูุญุฌู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> open(jmeter_results_file, <span class="hljs-string"><span class="hljs-string">'r+'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> f: rows = f.readlines() f.seek(<span class="hljs-number"><span class="hljs-number">0</span></span>) f.truncate(<span class="hljs-number"><span class="hljs-number">0</span></span>) f.writelines(rows[<span class="hljs-number"><span class="hljs-number">-1</span></span>])</code> </pre></li><li style=";text-align:right;direction:rtl">  ููุชุจ ุจูุงูุงุช ุงููุฑุงุกุฉ ุฅูู ุงูููู ุงููุคูุช <b>temp_result.jtl</b> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs">rows_num = len(rows) open(temp_result_filename, <span class="hljs-string"><span class="hljs-string">'w'</span></span>).writelines(rows[<span class="hljs-number"><span class="hljs-number">0</span></span>:rows_num]) <span class="hljs-comment"><span class="hljs-comment"># avoid last line</span></span></code> </pre> </li><li style=";text-align:right;direction:rtl">  ููุฑุฃ ุงูููู <b>temp_result.jtl</b> .  ููุฒุน ุจูุงูุงุช ุงููุฑุงุกุฉ "ุจุงูุฏูุงุฆู": <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> r <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> f.readlines(): row = r.split(<span class="hljs-string"><span class="hljs-string">','</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> len(row[<span class="hljs-number"><span class="hljs-number">0</span></span>]) == <span class="hljs-number"><span class="hljs-number">13</span></span>: ts_c = int(row[<span class="hljs-number"><span class="hljs-number">0</span></span>]) dt_c = datetime.datetime.fromtimestamp(ts_c/<span class="hljs-number"><span class="hljs-number">1000</span></span>) minutes_data.setdefault(dt_c.strftime(<span class="hljs-string"><span class="hljs-string">'%Y_%m_%d_%H_%M'</span></span>), []).append(r)</code> </pre></li><li style=";text-align:right;direction:rtl">  ุชุชู ูุชุงุจุฉ ุงูุจูุงูุงุช ููู ุฏูููุฉ ูู <b>minutes_data</b> ุฅูู ุงูููู ุงูููุงุจู ูู <b>to_parse /</b> folder.  (ูุจุงูุชุงูู ุ ูู ุงูููุช ุงูุญุงูู ุ ูู ุฏูููุฉ ูู ุงูุงุฎุชุจุงุฑ ููุง ููู ุจูุงูุงุช ุฎุงุต ุจูุง ุ ุซู ุฃุซูุงุก ุงูุชุฌููุน <b>ุ ูู</b> ููู ุจุฃู ุชุฑุชูุจ ุฌุงุกุช ุงูุจูุงูุงุช ูู ูู ููู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> key, value <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> minutes_data.iteritems(): <span class="hljs-comment"><span class="hljs-comment">#      timestamp (key) temp_ts_file = os.path.join(temp_to_parse_path, key) open(temp_ts_file, 'a+').writelines(value)</span></span></code> </pre></li><li style=";text-align:right;direction:rtl">  ุนูู ุทูู ุงูุทุฑูู ุ ูููู ุจุชุญููู ุงููููุงุช ูู ูุฌูุฏ to_parse ูุฅุฐุง ูู ูุชุบูุฑ ุฃู ูููุง ุฎูุงู ุฏูููุฉ ูุงุญุฏุฉ ุ ููุฐุง ุงูููู ูุฑุดุญ ูุชุญููู ุงูุจูุงูุงุช ูุชุฌููุนูุง ูุฅุฑุณุงููุง ุฅูู ูุงุนุฏุฉ ุจูุงูุงุช JLTC: <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> filename <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> os.listdir(temp_to_parse_path): data_file = os.path.join(temp_to_parse_path, filename) file_mod_time = os.stat(data_file).st_mtime last_time = (time.time() - file_mod_time) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> last_time &gt; <span class="hljs-number"><span class="hljs-number">60</span></span>: logger.info(<span class="hljs-string"><span class="hljs-string">'[DAEMON] File {} was not modified since 1min, adding to parse list.'</span></span>.format(data_file)) files_to_parse.append(data_file)</code> </pre></li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ููุงู ูุซู ูุฐู ุงููููุงุช (ูุงุญุฏ ุฃู ุนุฏุฉ ูููุงุช) ุ ูุฅููุง ูุฑุณููุง <b>ูุญูููุง ุฅูู</b> ุฏุงูุฉ <b>parse_csv_data</b> (ูู ููู ุจุงูุชูุงุฒู): <br><br><pre style=";text-align:right;direction:rtl"> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> files_to_parse: logger.info(<span class="hljs-string"><span class="hljs-string">'[DAEMON THREAD] Parse {}.'</span></span>.format(f)) t = threading.Thread( target=parse_csv_data, args=( f, jmeter_results_file_fields, test, data_resolution)) t.start() threads.append(t) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> t <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> threads: t.join()</code> </pre></li></ul><br>  ูุจุฏุฃ ุงูุจุฑูุงูุฌ ุงูุฎูู ูู cron.d ูู ุฏูููุฉ: <br><br>  ูุจุฏุฃ ุงูุจุฑูุงูุฌ ุงูุฎูู ูู ุฏูููุฉ ุจุงุณุชุฎุฏุงู cron.d: <br><br><pre style=";text-align:right;direction:rtl"> <code class="bash hljs">* * * * * root sleep 21 &amp;&amp; /usr/bin/python /var/lib/jltc/manage.py daemon</code> </pre> <br>  ูุจุงูุชุงูู ุ ูุง ูุชุถุฎู ุงูููู ุฐู ุงููุชุงุฆุฌ ุฅูู ุฃุญุฌุงู ูุง ูููู ุชุตูุฑู ุ ูููู ูุชู ุชุญูููู <i>ุณุฑูุนูุง</i> ูุฅุฒุงูุชู. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุชุงุฆุฌ </h2><br><h3 style=";text-align:right;direction:rtl">  ุงูุชุทุจูู </h3><br>  ูุฏููุง 150ุ000 ูุงุนุจ ุงูุชุฑุงุถู: <br><br><img src="https://habrastorage.org/webt/sv/ex/ep/svexepi9ikzy0unpxur96mty5q8.png"><br><br>  ูุญุงูู ุงูุงุฎุชุจุงุฑ "ูุทุงุจูุฉ" ุฒูู ุงูุงุณุชุฌุงุจุฉ ุงูุจุงูุบ 50 ูููู ุซุงููุฉ ุ ูุจุงูุชุงูู ูุฅู ุงูุญูููุฉ ููุณูุง ุชููุฒ ุจุงุณุชูุฑุงุฑ ูู ุงูููุทูุฉ ุจูู 16 ุฅูู 18 ุฃูู ุทูุจ / ุฌ: <br><br><img src="https://habrastorage.org/webt/-z/98/oi/-z98oi-_8a41hkqbrmz2rvzmryk.png"><br><br>  ุชุญููู ุฎุงุฏู ุงูุชุทุจูู (15 ุชุทุจูู).  ููุงู ุฎุงุฏูุงู "ุณูุฆ ุงูุญุธ" ูููููุง ุนูู M620 ุฃุจุทุฃ: <br><br><img src="https://habrastorage.org/webt/nc/xy/et/ncxyetqyk_a8mbhjocndd-yxgkm.png"><br><br>  ููุช ุงุณุชุฌุงุจุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช (ูุฎูุงุฏู ุงูุชุทุจููุงุช): <br><br><img src="https://habrastorage.org/webt/zr/a-/gw/zra-gwtq_vqhtfhlrjzzy1osisg.png"><br><br><h3 style=";text-align:right;direction:rtl">  ูุงุนุฏุฉ ุจูุงูุงุช </h3><br>  ุงุณุชุฎุฏุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู db1 (VM): <br><br><img src="https://habrastorage.org/webt/ej/hn/in/ejhnin0jo_7rrzhlj7pqko6udnq.png"><br><br>  ุงุณุชุฎุฏุงู ูุญุฏุฉ ุงููุนุงูุฌุฉ ุงููุฑูุฒูุฉ ุนูู ุจุฑูุงูุฌ hypervisor: <br><br><img src="https://habrastorage.org/webt/uw/ik/tz/uwiktzvcdzydlsjaoexqfbr3tay.png"><br><br>  ุงูุญูู ุนูู ุงูุฌูุงุฒ ุงูุธุงูุฑู ุฃูู ุ ูุฃูู ูุนุชูุฏ ุฃู ูุฏูู 48 ูุฑูุฒูุง ุญูููููุง ุชุญุช ุชุตุฑูู ุ ูู ุงููุงูุน ุ ููุงู 24 <b>ูุฑูุฒูุง</b> ูู ุจุฑูุงูุฌ <b>hyperthreading</b> ุนูู ุจุฑูุงูุฌ hypervisor. <br><br>  ูุชู ุชูุฌูู ูุง <b>ูุตู ุฅูู 250K / ุงุณุชุนูุงูุงุช / ุซูุงูู ูุญุฏ ุฃูุตู</b> ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุ ุงูุชู ุชุชููู ูู (ุชุญุฏูุฏ 83ูช ุ 3ูช - ุฅุฏุฑุงุฌุงุช ุ 11.6ูช - ุชุญุฏูุซุงุช (90ูช HOT) ุ ุญุฐู 1.6ูช): <br><br><img src="https://habrastorage.org/webt/lx/lu/bl/lxlublobhm4nm3c45g9jikcstc4.png"><br><br><img src="https://habrastorage.org/webt/18/jw/gp/18jwgpmebrkyot3ngvarsl_3ysu.png"><br><br>  ูุน ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู <b>autov Vacuum_vacuum_scale_factor</b> = 0.2 ุ ููุง ุนุฏุฏ ุงููุฌููุนุงุช ุงูููุชุฉ ุจุณุฑุนุฉ ูุจูุฑุฉ ูุน ุงูุงุฎุชุจุงุฑ (ูุน ุฒูุงุฏุฉ ุฃุญุฌุงู ุงูุฌุฏูู) ุ ููุง ุฃุฏู ุนุฏุฉ ูุฑุงุช ุฅูู ูุดุงูู ูุตูุฑุฉ ูู ุฃุฏุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุชู ุฏูุฑุช ุงูุงุฎุชุจุงุฑ ุจุฃูููู ุนุฏุฉ ูุฑุงุช.  ุงุถุทุฑุฑุช ุฅูู "ุชุฑููุถ" ูุฐุง ุงูููู ูุจุนุถ ุงูุฌุฏุงูู ูู ุฎูุงู ุชุนููู ููู ุดุฎุตูุฉ ููุฐู ุงููุนููุฉ autov Vacuum_v Vacuum_scale_factor: <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ALTER TABLE ... SET (autov Vacuum_v Vacuum_scale_factor = ...)</b> <div class="spoiler_text" style=";text-align:right;direction:rtl">  ALTER TABLE construction SET (autov Vacuum_vacuum_scale_factor = 0.10)ุ <br>  ALTER TABLE production SET (autov Vacuum_vacuum_scale_factor = 0.01)ุ <br>  ALTER TABLE game_entity SET (autov Vacuum_v Vacuum_scale_factor = 0.01)ุ <br>  ALTER TABLE game_entity SET (autov Vacuum_analyze_scale_factor = 0.01)ุ <br>  ALTER TABLE building SET (autov Vacuum_vacuum_scale_factor = 0.01)ุ <br>  ALTER TABLE building SET (autov Vacuum_analyze_scale_factor = 0.01)ุ <br>  ALTER TABLE core_inventory_player_resource SET (autov Vacuum_v Vacuum_scale_factor = 0.10)ุ <br>  ALTER TABLE ุงููุงุฌู SET (autov Vacuum_v Vacuum_scale_factor = 0.01) ุ <br>  ALTER TABLE ุงููุงุฌู SET (autov Vacuum_analyze_scale_factor = 0.01) ุ <br></div></div><br><img src="https://habrastorage.org/webt/0s/ja/1e/0sja1e1m3-2gitbmhh8j24t2ktu.png"><br><br>  ูู ุงููุงุญูุฉ ุงููุซุงููุฉ ุ ูุฌุจ ุฃู ุชููู ุงูุตููู ุงูุชู ูุชู ุฌูุจูุง ูุฑูุจุฉ ูู ุงูุตููู ุ ูุงูุชู ููุงุญุธูุง ูุญุณู ุงูุญุธ: <br><br><img src="https://habrastorage.org/webt/e4/k6/zo/e4k6zobp25h5asrmxhmficoea3a.png"><br><br><h4 style=";text-align:right;direction:rtl">  hot_standby_feedback </h4><br>  ูุงูุช ุงููุดููุฉ ูู ุงููุนููุฉ <b>hot_standby_feedback</b> ุ ูุงูุชู ูููู ุฃู ุชุคุซุฑ ุจุดูู ูุจูุฑ ุนูู ุฃุฏุงุก ุงูุฎุงุฏู <b>ุงูุฑุฆูุณู</b> ุฅุฐุง ูู ููู ูุฏู ุฎูุงุฏู <b>ุงูุงุณุชุนุฏุงุฏ</b> ูุฏููุง ุงูููุช ูุชุทุจูู ุงูุชุบููุฑุงุช ูู ูููุงุช WAL.  ุชูุต ุงููุซุงุฆู (https://postgrespro.ru/docs/postgrespro/11/runtime-config-replication) ุนูู ุฃูู "ูุญุฏุฏ ูุง ุฅุฐุง ูุงู ุฎุงุฏู ุงูุงุณุชุนุฏุงุฏ ุงูุณุฑูุน ุณูู ูุฎุทุฑ ุงูุณูุฏ ุฃู ุงูุนุจุฏ ุงููุชููู ุจุงูุทูุจุงุช ุงูุชู ูููุฐูุง ุญุงูููุง."  ุจุดูู ุงูุชุฑุงุถู ุ ูุชู ุฅููุงู ุชุดุบููู ุ ูููู ุชู ุชุดุบููู ูู ุงูุชูููู ุงูุฎุงุต ุจูุง.  ููุง ุฃุฏู ุฅูู ุนูุงูุจ ูุฎููุฉ ุ ุฅุฐุง ูุงู ููุงู ุฎุงุฏููุงู ุงุญุชูุงุทูุงู ููุงู ุชุฃุฎุฑ ุงููุณุฎ ุงููุชูุงุซู ุฃุซูุงุก ุงูุชุญููู ูุฎุชูู ุนู ุงูุตูุฑ (ูุฃุณุจุงุจ ูุฎุชููุฉ) ุ ููููู ููุงุญุธุฉ ูุซู ูุฐู ุงูุตูุฑุฉ ุ ูุงูุชู ูููู ุฃู ุชุคุฏู ุฅูู ุงูููุงุฑ ุงูุงุฎุชุจุงุฑ ุจุงููุงูู: <br><br><img src="https://habrastorage.org/webt/vl/1l/jd/vl1ljdockxrjlfsoiybq751vo9y.png"><br><br><img src="https://habrastorage.org/webt/qh/4s/m_/qh4sm_hpnunb2w0axzhk90lmf6u.png"><br><br>  ููุฑุฌุน ุฐูู ุฅูู ุญูููุฉ ุฃูู ุนูุฏ ุชูููู hot_standby_feedback ุ ูุง ุชุฑุบุจ VACUUM ูู ุญุฐู tuples ุฅุฐุง ูุงูุช ุงูุฎูุงุฏู ุงูุงุญุชูุงุทูุฉ ูุชุฃุฎุฑุฉ ูู ูุนุฑู ุงููุนุงููุฉ ุงูุฎุงุต ุจูุง ูููุน ุชุนุงุฑุถ ุงููุณุฎ ุงููุชูุงุซู.  ุงูููุงูุฉ ุงูููุตูุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุง ุงูุฐู ููุนูู hot_standby_feedback ูู PostgreSQL ุญููุง</a> : <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">xl1_game=# VACUUM VERBOSE core_inventory_player_resource; INFO: vacuuming "public.core_inventory_player_resource" INFO: scanned index "core_inventory_player_resource_pkey" to remove 62869 row versions DETAIL: CPU: user: 1.37 s, system: 0.58 s, elapsed: 4.20 s โฆโฆโฆ... INFO: "core_inventory_player_resource": found 13682 removable, 7257082 nonremovable row versions in 71842 out of 650753 pages &lt;b&gt;DETAIL: 3427824 dead row versions cannot be removed yet, oldest xmin: 3810193429&lt;/b&gt; There were 1920498 unused item pointers. Skipped 8 pages due to buffer pins, 520953 frozen pages. 0 pages are entirely empty. CPU: user: 4.55 s, system: 1.46 s, elapsed: 11.74 s.</code> </pre><br>  ูุฐุง ุงูุนุฏุฏ ุงููุจูุฑ ูู tuples ุงูููุช ูุคุฏู ุฅูู ุงูุตูุฑุฉ ุงูููุถุญุฉ ุฃุนูุงู.  ุฅููู ุงุฎุชุจุงุฑุงู ุ ูุน ุฅููุงู ุชุดุบูู hot_standby_feedback ูุฅููุงูู: <br><br><img src="https://habrastorage.org/webt/8f/od/n6/8fodn60lohgzsu-twheqysldjzy.png"><br><br>  ููุฐุง ูู ุชุฃุฎุฑ ุงููุณุฎ ุงููุชูุงุซู ุฃุซูุงุก ุงูุงุฎุชุจุงุฑ ุ ูุงูุฐู ุณูููู ูู ุงูุถุฑูุฑู ุงูููุงู ุจุดูุก ูุง ูู ุงููุณุชูุจู: <br><br><img src="https://habrastorage.org/webt/et/s0/7h/ets07hkl8skkv5wexxjrgi-3x7m.png"><br><br><h2 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br>  ุฃุธูุฑ ูุฐุง ุงูุงุฎุชุจุงุฑ ุ ูุญุณู ุงูุญุธ (ุฃู ูุณูุก ุงูุญุธ ููุญุชูู ุงูููุงู) ุฃูู ูู ูุฐู ุงููุฑุญูุฉ ูู ุงููููุฐุฌ ุงูุฃููู ููุนุจุฉ ุ ูู ุงููููู ุชูุงููุง ุงุณุชูุนุงุจ ุงูุญูู ุงููุฑุบูุจ ูู ุฌุงูุจ ุงููุณุชุฎุฏููู ุ ููู ูุง ูููู ูุฅุนุทุงุก ุถูุก ุฃุฎุถุฑ ููุฒูุฏ ูู ุงูููุงุฐุฌ ุงูุฃูููุฉ ูุงูุชุทููุฑ.  ูู ุงููุฑุงุญู ุงููุงุญูุฉ ูู ุงูุชุทููุฑ ุ ูู ุงูุถุฑูุฑู ุงุชุจุงุน ุงูููุงุนุฏ ุงูุฃุณุงุณูุฉ (ููุญูุงุธ ุนูู ุจุณุงุทุฉ ุงูุงุณุชุนูุงูุงุช ุงููููุฐุฉ ุ ูููุน ููุฑุฉ ูุจูุฑุฉ ูู ุงูููุงุฑุณ ุ ููุฐูู ุงููุฑุงุกุงุช ุบูุฑ ุงููููุฑุณุฉ ุ ููุง ุฅูู ุฐูู) ูุงูุฃูู ูู ุฐูู ุ ุงุฎุชุจุงุฑ ุงููุดุฑูุน ูู ูู ูุฑุญูุฉ ูู ูุฑุงุญู ุงูุชุทููุฑ ุงููููุฉ ูุฅูุฌุงุฏ ุงููุดููุงุช ูุญููุง ููุง ูููู ุฃู ูููู ูู ููุช ุณุงุจู.  ุฑุจูุง ุณุฃูุชุจ ูุฑูุจูุง ููุงููุง ูุฃููุง ุญูููุง ุจุงููุนู ูุดููุงุช ูุญุฏุฏุฉ. <br><br>  ุญุธุง ุณุนูุฏุง ููุฌููุน! <br><br>  ูุฏููุง <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุซุจ</a> ููุท ูู ุญุงูุฉ ุ) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar445368/">https://habr.com/ru/post/ar445368/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar445356/index.html">ูุธุฑุฉ ุนุงูุฉ ุนูู ูุณู ุงููุงุชู ุงููุญููู ูู DUMP-2019: ุงูุญุฏ ุงูุฃูุตู ุงููุทุจู ูุงููููุฏ ูู ุงูุนูู ุงููููู</a></li>
<li><a href="../ar445358/index.html">ุชูุธูู ูุธุงู ุงูุฃุญุฏุงุซ ูู ุงููุญุฏุฉ - ูู ุฎูุงู ุนููู ูุตูู ุงููุนุจุฉ</a></li>
<li><a href="../ar445360/index.html">5 ููุงู ูููุฐุฌูุฉ ูููุงุจูุงุช JavaScript: ุงูุชุญููู ูุงูุญููู</a></li>
<li><a href="../ar445362/index.html">ูุชุงุจ "ุงููุธู ุงูููุฒุนุฉ. ุฃููุงุท ุงูุชุตููู</a></li>
<li><a href="../ar445366/index.html">ููููุฉ ุชุณุฑูุน ุงูุชุดููุฑ ููููุง ูู GOST 28147-89 ุนูู ูุนุงูุฌ Baikal-T1 ูุธุฑูุง ููุชูุฉ SIMD</a></li>
<li><a href="../ar445370/index.html">ุชุญููู TSDB ูู ุจุฑูููุซููุณ 2</a></li>
<li><a href="../ar445372/index.html">ุฑุคูุฉ ุงูุฌูุงุฒ ููุงุจู ุงูุญุฏุณ ุงูุจุดุฑู: ุฎูุงุฑุฒููุงุช ูุชุนุทูู ุชุดุบูู ุจุฑุงูุฌ ุงูุชุนุฑู ุนูู ุงููุงุฆูุงุช</a></li>
<li><a href="../ar445378/index.html">ุงููุชุงูุงุช: ุงูุชุตููู ูุงูุฌูู ูุงูุจุญุซ ุนู ุงูุญููู</a></li>
<li><a href="../ar445380/index.html">PHP ุงูุญุฏูุซุฉ ุฌูููุฉ ููุซูุฑุฉ</a></li>
<li><a href="../ar445384/index.html">ูููุฉ Chang'e-4 - ุงููุนุฏุงุช ุงูุนูููุฉ ุนูู ูุญุฏุฉ ุงููุจูุท ูุงูุฃููุงุฑ ุงูุตูุงุนูุฉ ููุฑุฑ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>