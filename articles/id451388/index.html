<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚆 🏑 👩🏿‍🍳 nanoFOX - kernel RISC-V sederhana yang kompatibel 👎🏾 🤵🏿 🚶🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pengantar kecil: 


 Gagasan untuk menulis inti Anda sendiri muncul setelah melewati seminar sekolah tentang sirkuit digital di kota Tomsk . Pada acar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>nanoFOX - kernel RISC-V sederhana yang kompatibel</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/451388/"><h3 id="nebolshoe-vstuplenie">  Pengantar kecil: </h3><br><p> Gagasan untuk menulis inti Anda sendiri muncul setelah melewati <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">seminar sekolah tentang sirkuit digital di kota Tomsk</a> .  Pada acara ini, pengantar dibuat untuk bahasa deskripsi perangkat keras saat ini (Verilog HDL dan VHDL), serta inti prosesor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">schoolMIPS</a> kecil.  Untuk memahami struktur inti, diputuskan untuk menciptakan sepeda mereka sendiri, mengikuti jalur pengembangan schoolMIPS, tetapi menggunakan sistem komando lain sebagai dasar.  Karena semakin populernya RISC-V dan keterbukaan sistem komandonya (MIPS tidak memiliki sistem perintah terbuka pada saat kernel ditulis), serangkaian instruksi RISC-V, yaitu RV32I, dipilih untuk pengembangan kernel masa depan.  RV32I memiliki sejumlah kecil instruksi dasar (37 tidak termasuk yang khusus) dan dapat diperluas jika diinginkan, misalnya, dengan menambahkan instruksi integer perkalian dan pembagian (RV32M) atau dukungan untuk instruksi singkat (RV32C).  Juga, proyek ini disusun sebagai pendidikan, sehingga diputuskan untuk memaksimalkan visibilitas kernel untuk secara efektif menunjukkan pekerjaannya. </p><br><p>  Dengan analogi dengan schoolMIPS, versi kernel berikut diimplementasikan: </p><br><ol><li>  Versi siklus tunggal (00_simple_risc_v_cpu). </li><li>  Versi siklus tunggal dengan dukungan untuk instruksi lw / sw (memuat kata / kata penyimpanan) (01_simple_risc_v_cpu_lwsw). </li><li>  Versi pipa (konveyor 5-tahap) (02_pipe_risc_v_cpu). </li></ol><br><p>  Saat ini, versi kernel berikutnya dijelaskan (03_pipe_risc_v_cpu_fc) dengan set lengkap perintah RV32I (tanpa mempertimbangkan beberapa yang khusus). </p><a name="habracut"></a><br><h3 id="kratkaya-informaciya">  Informasi singkat: </h3><br><p>  Dalam uraian kernel, cara untuk meningkatkan visibilitas kerja, debugging dan verifikasi dipikirkan.  Saat ini menerapkan metode berikut: </p><br><ol><li><p>  Menambahkan modul VGA teks debug (untuk dua cabang kernel siklus tunggal).  Dimasukkannya modul ini memungkinkan Anda untuk secara bersamaan melacak nilai 32 register pada layar monitor, yang tidak mungkin ketika menggunakan output informasi pada indikator tujuh-segmen.  Pada gambar yang disajikan di bawah ini, kernel menghitung angka Leonardo dan menampilkan informasi pada modul debugging yang sesuai; <br><br></p><br><div class="spoiler">  <b class="spoiler_title">hex_display dan DebugScreenCore</b> <div class="spoiler_text"><p>  Output informasi pada indikator tujuh segmen: <a href=""><img src="https://habrastorage.org/webt/7r/at/zo/7ratzo8oi49q1f_ek3jt-ruzds4.gif" alt="gambar"></a> <br>  Output informasi pada layar VGA: <a href=""><img src="https://habrastorage.org/webt/_z/bf/ya/_zbfyafwvt-iiqcyldocwdejy9u.gif" alt="gambar"></a> </p></div></div><br></li><li><p>  Menambahkan pesan ke terminal simulator tentang status file register dan saat ini menjalankan instruksi.  Metode ini memungkinkan Anda untuk menganalisis operasi kernel dengan lebih baik pada tahap awal pengembangan, tetapi tidak selalu nyaman; <br><br></p><br><div class="spoiler">  <b class="spoiler_title">Terminal</b> <div class="spoiler_text"><p>  Inisialisasi file register: <a href=""><img src="https://habrastorage.org/webt/od/27/en/od27enfo2ibej0nvimcacjcdrco.png" alt="gambar"></a> <br>  Ubah nilai sp: <a href=""><img src="https://habrastorage.org/webt/dx/5v/mo/dx5vmozlintg2jroatbavwu5vm4.png" alt="gambar"></a> </p></div></div><br></li><li><p>  Menambahkan variabel string ke waveform dengan tampilan instruksi yang dapat dieksekusi.  Menggunakan variabel string ini, pengembang dapat melacak pengaturan yang benar dari sinyal kontrol di semua tahap pipa; <br><br></p><br><div class="spoiler">  <b class="spoiler_title">Bentuk gelombang</b> <div class="spoiler_text"><p>  Inisialisasi file register: <a href=""><img src="https://habrastorage.org/webt/4f/u2/qt/4fu2qtvi_h4om4jam78ly4zk-vg.png" alt="gambar"></a> <br>  Ubah nilai sp: <a href=""><img src="https://habrastorage.org/webt/fm/di/fk/fmdifk9sfizk1tdf1rkcwpf_7yu.png" alt="gambar"></a> </p></div></div><br></li><li><p>  Menambah kemampuan untuk menulis informasi debug tentang status kernel dalam file teks.  Status file register disajikan dalam bentuk tabel, dan instruksi / instruksi yang saat ini dijalankan oleh kernel juga ditunjukkan.  Ini adalah analog dari 2 poin, tetapi memungkinkan lebih banyak manipulasi dengan informasi yang diterima; <br><br></p><br><div class="spoiler">  <b class="spoiler_title">File teks</b> <div class="spoiler_text"><p>  Inisialisasi file register: <a href=""><img src="https://habrastorage.org/webt/ob/wp/i_/obwpi_h38heumilss3rumhiau8i.png" alt="gambar"></a> <br>  Ubah nilai sp: <a href=""><img src="https://habrastorage.org/webt/ua/wa/qb/uawaqbhqgb3v_rsn0i9re3hkaas.png" alt="gambar"></a> </p></div></div><br></li><li><p>  Menambah kemampuan untuk menulis informasi debug tentang status kernel dalam file HTML.  Status file register disajikan dalam bentuk tabular dengan catatan tentang mengubah nilai sel, serta instruksi yang saat ini dijalankan oleh kernel ditampilkan.  Ini adalah analog dari paragraf 2 dan 4, tetapi selain itu memungkinkan Anda untuk dengan mudah menunjukkan perubahan data.  Seperti dapat dilihat pada gambar di bawah, jika nilai register tidak ditentukan, maka register disorot dalam warna merah (register s0 / fp - t6).  Pada siklus 17, nilai register s0 / fp berubah dan sel disorot dalam warna hijau. <br>  Pada siklus 41, nilai 0x00010000 dimuat ke register sp. <br><br></p><br><div class="spoiler">  <b class="spoiler_title">File HTML</b> <div class="spoiler_text"><p>  Inisialisasi file register: <a href=""><img src="https://habrastorage.org/webt/d7/96/v4/d796v4kj0t_pcfhbepzqndka8ny.png" alt="gambar"></a> <br>  Ubah nilai sp: <a href=""><img src="https://habrastorage.org/webt/dc/dd/9c/dcdd9c7vu-rd8tkzfjggwffwhe0.png" alt="gambar"></a> </p></div></div><br></li></ol><br><div class="spoiler">  <b class="spoiler_title">Perbandingan cabang kernel:</b> <div class="spoiler_text"><p>  Instruksi kernel yang didukung saat ini untuk cabang yang berbeda: </p><br><div class="scrollable-table"><table><thead><tr><th>  Instruksi manual </th><th>  00_simple_risc_v_cpu </th><th>  01_simple_risc_v_cpu_lwsw </th><th>  02_pipe_risc_v_cpu </th></tr></thead><tbody><tr><td>  tambah </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  dan </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  sll </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  atau </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  addi </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  ori </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  slli </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  lw </td><td>  - </td><td>  + </td><td>  + </td></tr><tr><td>  jalr </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  lui </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  beq </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  dulu </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  sw </td><td>  - </td><td>  + </td><td>  + </td></tr><tr><td>  jal </td><td>  - </td><td>  - </td><td>  + </td></tr><tr><td>  sub </td><td>  + </td><td>  + </td><td>  - </td></tr></tbody></table></div><br><p>  Periferal yang didukung: </p><br><div class="scrollable-table"><table><thead><tr><th>  Periferal </th><th>  00_simple_risc_v_cpu </th><th>  01_simple_risc_v_cpu_lwsw </th><th>  02_pipe_risc_v_cpu </th></tr></thead><tbody><tr><td>  RAM </td><td>  - </td><td>  + </td><td>  + </td></tr><tr><td>  PWM </td><td>  - </td><td>  + </td><td>  + </td></tr><tr><td>  GPIO </td><td>  - </td><td>  + </td><td>  + </td></tr><tr><td>  UART </td><td>  - </td><td>  - </td><td>  + </td></tr></tbody></table></div><br><p>  Bahasa yang didukung untuk program penulisan: </p><br><div class="scrollable-table"><table><thead><tr><th>  Bahasa </th><th>  00_simple_risc_v_cpu </th><th>  01_simple_risc_v_cpu_lwsw </th><th>  02_pipe_risc_v_cpu </th></tr></thead><tbody><tr><td>  Assembler </td><td>  + </td><td>  + </td><td>  + </td></tr><tr><td>  C </td><td>  - </td><td>  - </td><td>  + </td></tr></tbody></table></div><br><p>  Sumber daya FPGA yang diperlukan untuk kernel (nf_cpu): </p><br><p>  EP4CE22F17C6 (de0_nano): </p><br><div class="scrollable-table"><table><thead><tr><th></th><th>  01_simple_risc_v_cpu_lwsw </th><th>  02_pipe_risc_v_cpu </th><th>  03_pipe_risc_v_cpu_fc </th></tr></thead><tbody><tr><td>  Total memori bit </td><td>  0 / 608.256 (0%) </td><td>  2.048 / 608.256 (&lt;1%) </td><td>  2.144 / 608.256 (&lt;1%) </td></tr><tr><td>  Total elemen logika </td><td>  3.645 / 22.320 (16%) </td><td>  1.739 / 22.320 (8%) </td><td>  2.058 / 22.320 (9%) </td></tr><tr><td>  Fungsi kombinasional total </td><td>  2.653 / 22.320 (12%) </td><td>  1,472 / 22,320 (7%) </td><td>  1,838 / 22,320 (8%) </td></tr><tr><td>  Register logika khusus </td><td>  1.055 / 22.320 (5%) </td><td>  575 / 22.320 (3%) </td><td>  606 / 22.320 (3%) </td></tr></tbody></table></div><br><p>  10M50DAF484C7G (de10_lite): </p><br><div class="scrollable-table"><table><thead><tr><th></th><th>  00_simple_risc_v_cpu </th><th>  01_simple_risc_v_cpu_lwsw </th><th>  02_pipe_risc_v_cpu </th><th>  03_pipe_risc_v_cpu_fc </th></tr></thead><tbody><tr><td>  Total memori bit </td><td>  0 / 1,677,312 (0%) </td><td>  0 / 1,677,312 (0%) </td><td>  2.048 / 1.677.312 (&lt;1%) </td><td>  2.144 / 1.677.312 (&lt;1%) </td></tr><tr><td>  Total elemen logika </td><td>  2,851 / 49,760 (6%) </td><td>  2,881 / 49,760 (6%) </td><td>  1.629 / 49.760 (3%) </td><td>  1.927 / 49.760 (4%) </td></tr><tr><td>  Fungsi kombinasional total </td><td>  2.613 / 49.760 (5%) </td><td>  2.653 / 49.760 (5%) </td><td>  1.473 / 49.760 (3%) </td><td>  1,849 / 49,760 (4%) </td></tr><tr><td>  Register logika khusus </td><td>  1.055 / 49.760 (2%) </td><td>  1.055 / 49.760 (2%) </td><td>  575 / 49.760 (1%) </td><td>  606 / 49.760 (1%) </td></tr></tbody></table></div></div></div><br><h3 id="razvitie-proekta">  Pengembangan proyek. </h3><br><p>  Apa yang direncanakan akan dilakukan di masa depan: </p><br><ol><li>  tambahkan semua instruksi RV32I (pada tahap deskripsi); </li><li>  mengimplementasikan debugging; </li><li>  tambahkan pengontrol DMA (DMA); </li><li>  tambahkan dukungan untuk ban lain AXI, Avalon, Wishbone; </li><li>  tambahkan memori cache (cache); </li><li>  mengintegrasikan berbagai periferal (SPI, TWI (I2C), Ethernet (10 base-t)); </li><li>  tambahkan interrupt controller; </li><li>  port versi yang berbeda ke papan debug lain; </li><li>  tambahkan metode lain untuk meningkatkan visibilitas kernel; </li><li>  menjalankan RTOS, misalnya <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">zephyr</a> . </li></ol><br><p>  Rekomendasi dan saran untuk pengembangan kernel juga diterima. </p><br><p>  Tautan ke repositori: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">nanoFOX</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id451388/">https://habr.com/ru/post/id451388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id451378/index.html">Likbez dari ingatan: apa yang terjadi, dan apa yang memberi kita</a></li>
<li><a href="../id451380/index.html">Saya memiliki visi ... Wahyu Nostradamus baru</a></li>
<li><a href="../id451382/index.html">Dua dalam satu: Intel Optane Memory H10 (Bagian 1)</a></li>
<li><a href="../id451384/index.html">Bagian 5. Programmer karier. Tengah Krisis. Rilis pertama</a></li>
<li><a href="../id451386/index.html">Dua dalam satu: Intel Optane Memory H10 (bagian 2)</a></li>
<li><a href="../id451390/index.html">Punah 136 ribu tahun yang lalu, spesies burung "Cuvier shepherdess" hidup kembali di Seychelles</a></li>
<li><a href="../id451392/index.html">Opus tentang Yang Mulia Clay. Bagian Satu - Pendahuluan</a></li>
<li><a href="../id451394/index.html">Mengapa Grafik Vektor 2D Jauh Lebih Kompleks Daripada 3D</a></li>
<li><a href="../id451396/index.html">Bagaimana kita melengkapi sebuah megafon</a></li>
<li><a href="../id451400/index.html">Shine and kemiskinan: bagaimana mencari nafkah jika Anda seorang musisi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>