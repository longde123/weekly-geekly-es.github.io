<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👲 ☯️ 🙇🏻 Didefinisikan atau Tidak Ditentukan? Nuansa membuat array dalam JavaScript 🔏 🍥 📕</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Beberapa bulan yang lalu saya menemukan sebuah pertanyaan menarik tentang stackoverflow , di mana, singkatnya, seseorang ingin membuat matriks 5x5 kos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Didefinisikan atau Tidak Ditentukan? Nuansa membuat array dalam JavaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/463041/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/cf/uz/xt/cfuzxt6gszx356ckhbffnh21g9g.jpeg" alt="gambar"></div><br>  Beberapa bulan yang lalu saya menemukan sebuah pertanyaan menarik tentang <i>stackoverflow</i> , di mana, singkatnya, seseorang ingin membuat matriks <i>5x5</i> kosong, dan menggunakan satu metode yang berhasil, tetapi menggunakan yang lain tidak.  Dalam diskusi berikutnya, pemikiran menarik dikutip tentang hal ini. <br><br>  Benar, orang yang mengajukan pertanyaan, serta orang-orang yang menjawabnya, tidak memperhatikan fakta bahwa sebenarnya matriks tidak dapat dibuat, dan hasil perhitungannya tidak benar.  Semua ini membuat saya tertarik, dan saya memutuskan untuk menggali sedikit lebih dalam, lalu mengambil kesimpulan menarik, yang akan saya bagikan kepada Anda sekarang. <br><a name="habracut"></a><br>  <i>Catatan: Saya juga menjawab di bawah diskusi itu, dengan julukan <i>AndreyGS</i> - di sana saya menjawab agak singkat, di sini saya akan mencoba untuk sepenuhnya menutupi masalahnya.</i> <br><br>  Secara umum, tantangannya adalah membuat array.  Bagaimana kita akan melakukan ini?  Anehnya, ada opsi yang berbeda, tergantung pada apa yang ingin kita dapatkan. <br><br>  Kita tahu bahwa fungsi dalam JavaScript memiliki dua metode internal, <i>Panggil</i> dan <i>Bangun</i> .  Jika kita menggunakan kata kunci <i>baru</i> , metode Bangun digunakan, yang membuat instance objek baru, memberikan referensi <i>ini</i> untuk <i>itu</i> , dan kemudian mengeksekusi tubuh fungsi.  Tidak semua fungsi memiliki metode ini, tetapi bagi kami ini tidak begitu penting saat ini. <br><br>  Saat membuat array, ada satu kekhasan: tidak masalah jika kita menggunakan <i>Array (...)</i> atau <i>Array baru (...)</i> - spesifikasi <i>ECMAScript</i> tidak membuat perbedaan untuk mereka dan, apalagi, menganggapnya setara. <br><br><pre><code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> The Array Constructor The Array constructor is the <span class="hljs-variable"><span class="hljs-variable">%Array%</span></span> intrinsic object and the initial value of the Array property of the global object. When called as a constructor it creates and initializes a new exotic Array object. When Array is called as a function rather than as a constructor, it also creates and initializes a new Array object. Thus the function <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> Array(…) is equivalent to the object creation expression new Array(…) with the same arguments.</code> </pre> <br>  Oleh karena itu, saya tidak akan berfilosofi secara nakal, dan dalam contoh-contoh ini saya hanya akan menggunakan konstruksi <i>Array (...) baru</i> , agar tidak membingungkan siapa pun. <br><br>  Mari kita mulai. <br><br>  Buat sebuah array: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>);</code> </pre> <br>  Apa yang kita dapatkan? <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ &lt;5 empty slots&gt; ] console.log(arr[0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr,"0")); // undefined</span></span></code> </pre> <br>  Hmm ... yah, pada prinsipnya, seharusnya begitu - kita mengatur panjang dan mendapat lima sel kosong, dengan nilai <i>tidak terdefinisi</i> , yang dapat dikerjakan lebih lanjut, bukan?  Benar, ada beberapa poin yang membingungkan saya.  Mari kita periksa. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>); }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ &lt;5 empty slots&gt; ] console.log(arr[0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr,"0")); // undefined console.log(arr[0][0]); // TypeError: arr[0] is undefined</span></span></code> </pre> <br>  Bagaimana mungkin, setelah semua, kami harus mendapatkan matriks, dan di setiap sel, karenanya, harus ada array dari 5 elemen ... <br><br>  Mari kita kembali ke dokumentasi <i>ECMAScript</i> dan melihat apa yang tertulis di dalamnya mengenai metode membuat array dengan satu argumen: <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> Array (len) This description applies <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> and only <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> the Array constructor is called with exactly one argument. <span class="hljs-number"><span class="hljs-number">1</span></span>. Let numberOfArgs be the number of arguments passed to this function <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>. <span class="hljs-number"><span class="hljs-number">2</span></span>. Assert: numberOfArgs = <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">3</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> NewTarget is undefined, let newTarget be the active function object, <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> let newTarget be NewTarget. <span class="hljs-number"><span class="hljs-number">4</span></span>. Let proto be GetPrototypeFromConstructor(newTarget, "<span class="hljs-variable"><span class="hljs-variable">%ArrayPrototype%</span></span>"). <span class="hljs-number"><span class="hljs-number">5</span></span>. ReturnIfAbrupt(proto). <span class="hljs-number"><span class="hljs-number">6</span></span>. Let array be ArrayCreate(<span class="hljs-number"><span class="hljs-number">0</span></span>, proto). <span class="hljs-number"><span class="hljs-number">7</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span>(len) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> Number, then <span class="hljs-number"><span class="hljs-number">1</span></span>. Let defineStatus be CreateDataProperty(array, "<span class="hljs-number"><span class="hljs-number">0</span></span>", len). <span class="hljs-number"><span class="hljs-number">2</span></span>. Assert: defineStatus is true. <span class="hljs-number"><span class="hljs-number">3</span></span>. Let intLen be <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">8</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">Else</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>. Let intLen be ToUint32(len). <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> intLen ≠ len, throw a RangeError exception. <span class="hljs-number"><span class="hljs-number">9</span></span>. Let setStatus be <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span>(array, "length", intLen, true). <span class="hljs-number"><span class="hljs-number">10</span></span>. Assert: setStatus is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> an abrupt completion. <span class="hljs-number"><span class="hljs-number">11</span></span>. Return array.</code> </pre> <br>  Dan, apa yang kita lihat, ternyata objek tersebut dibuat, properti <i>panjang</i> dibuat dalam prosedur ArrayCreate (titik 6), nilai dalam properti <i>panjang</i> diatur (titik 9), dan bagaimana dengan sel?  Terlepas dari kasus khusus ketika argumen yang dilewati bukan angka, dan array dibuat dengan sel tunggal "0" dengan nilai yang sesuai (poin 7), tidak ada sepatah kata pun tentang mereka ... Artinya, panjang == 5 adalah, tetapi tidak ada lima sel.  Ya, kompiler membingungkan kita ketika kita mencoba mengakses sel tunggal, ia memberi tahu bahwa nilainya tidak <i>terdefinisi</i> , padahal sebenarnya tidak. <br><br>  Di sini, untuk perbandingan, metode membuat array dengan beberapa argumen yang dikirim ke konstruktor: <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span> Array (...items ) This description applies <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> and only <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> the Array constructor is called with <span class="hljs-built_in"><span class="hljs-built_in">at</span></span> least two arguments. When the Array function is called the following steps are taken: <span class="hljs-number"><span class="hljs-number">1</span></span>. Let numberOfArgs be the number of arguments passed to this function <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>. <span class="hljs-number"><span class="hljs-number">2</span></span>. Assert: numberOfArgs ≥ <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-number"><span class="hljs-number">3</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> NewTarget is undefined, let newTarget be the active function object, <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> let newTarget be NewTarget. <span class="hljs-number"><span class="hljs-number">4</span></span>. Let proto be GetPrototypeFromConstructor(newTarget, "<span class="hljs-variable"><span class="hljs-variable">%ArrayPrototype%</span></span>"). <span class="hljs-number"><span class="hljs-number">5</span></span>. ReturnIfAbrupt(proto). <span class="hljs-number"><span class="hljs-number">6</span></span>. Let array be ArrayCreate(numberOfArgs, proto). <span class="hljs-number"><span class="hljs-number">7</span></span>. ReturnIfAbrupt(array). <span class="hljs-number"><span class="hljs-number">8</span></span>. Let k be <span class="hljs-number"><span class="hljs-number">0</span></span>. <span class="hljs-number"><span class="hljs-number">9</span></span>. Let items be a zero-origined List containing the argument items <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> order. <span class="hljs-number"><span class="hljs-number">10</span></span>. Repeat, while k &lt; numberOfArgs <span class="hljs-number"><span class="hljs-number">1</span></span>. Let Pk be ToString(k). <span class="hljs-number"><span class="hljs-number">2</span></span>. Let itemK be items[k]. <span class="hljs-number"><span class="hljs-number">3</span></span>. Let defineStatus be CreateDataProperty(array, Pk, itemK). <span class="hljs-number"><span class="hljs-number">4</span></span>. Assert: defineStatus is true. <span class="hljs-number"><span class="hljs-number">5</span></span>. Increase k by <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">11</span></span>. Assert: the value of array's length property is numberOfArgs. <span class="hljs-number"><span class="hljs-number">12</span></span>. Return array.</code> </pre> <br>  Di sini, tolong - 10 poin, pembuatan sel-sel yang sama. <br><br>  Dan sekarang, apa yang dilakukan <i>Array.prototype.map ()</i> selanjutnya? <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">22</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">15</span></span> Array.prototype.map ( callbackfn [ , thisArg ] ) <span class="hljs-number"><span class="hljs-number">1</span></span>. Let O be ToObject(this value). <span class="hljs-number"><span class="hljs-number">2</span></span>. ReturnIfAbrupt(O). <span class="hljs-number"><span class="hljs-number">3</span></span>. Let len be ToLength(Get(O, "length")). <span class="hljs-number"><span class="hljs-number">4</span></span>. ReturnIfAbrupt(len). <span class="hljs-number"><span class="hljs-number">5</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> IsCallable(callbackfn) is false, throw a TypeError exception. <span class="hljs-number"><span class="hljs-number">6</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> thisArg was supplied, let T be thisArg; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> let T be undefined. <span class="hljs-number"><span class="hljs-number">7</span></span>. Let A be ArraySpeciesCreate(O, len). <span class="hljs-number"><span class="hljs-number">8</span></span>. ReturnIfAbrupt(A). <span class="hljs-number"><span class="hljs-number">9</span></span>. Let k be <span class="hljs-number"><span class="hljs-number">0</span></span>. <span class="hljs-number"><span class="hljs-number">10</span></span>. Repeat, while k &lt; len <span class="hljs-number"><span class="hljs-number">1</span></span>. Let Pk be ToString(k). <span class="hljs-number"><span class="hljs-number">2</span></span>. Let kPresent be HasProperty(O, Pk). <span class="hljs-number"><span class="hljs-number">3</span></span>. ReturnIfAbrupt(kPresent). <span class="hljs-number"><span class="hljs-number">4</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> kPresent is true, then <span class="hljs-number"><span class="hljs-number">1</span></span>. Let kValue be Get(O, Pk). <span class="hljs-number"><span class="hljs-number">2</span></span>. ReturnIfAbrupt(kValue). <span class="hljs-number"><span class="hljs-number">3</span></span>. Let mappedValue be <span class="hljs-keyword"><span class="hljs-keyword">Call</span></span>(callbackfn, T, «kValue, k, O»). <span class="hljs-number"><span class="hljs-number">4</span></span>. ReturnIfAbrupt(mappedValue). <span class="hljs-number"><span class="hljs-number">5</span></span>. Let status be CreateDataPropertyOrThrow (A, Pk, mappedValue). <span class="hljs-number"><span class="hljs-number">6</span></span>. ReturnIfAbrupt(status). <span class="hljs-number"><span class="hljs-number">5</span></span>. Increase k by <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">11</span></span>. Return A.</code> </pre> <br>  Klausa 7 - salinan larik asli dibuat, dalam klausa 10 jika iterasi dilakukan pada elemen-elemennya, dan, khususnya, klausa 10.2 memeriksa untuk melihat apakah ada sel tertentu dalam larik sumber, sehingga, jika berhasil, peta (10.4) dan buat sel yang sesuai dalam salinan - 10.4.5.  Karena 10.2 memberikan <i>false</i> untuk masing-masing dari <i>5</i> lintasan, tidak satu sel pun dalam salinan array yang dikembalikan akan dibuat juga. <br><br>  Jadi, bagaimana cara kerja konstruktor array dan metode <i>Array.prototype.map (),</i> kami mengetahuinya, tetapi tugas tetap seperti sebelumnya tidak terpecahkan, karena matriks tidak dibangun.  <i>Function.prototype.apply ()</i> akan datang untuk menyelamatkan! <br>  Mari segera kita periksa beraksi: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ undefined, undefined, undefined, undefined, undefined ] console.log(arr[0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr,"0")); // Object { value: undefined, writable: true, enumerable: true, configurable: true }</span></span></code> </pre> <br>  Hore, kelima sel tersebut diamati dengan jelas di sini, dan juga sel pertama, tes, dengan angka <i>"0"</i> memiliki deskriptor. <br><br>  Dalam hal ini, program ini bekerja sebagai berikut: <br><br><ol><li>  Kami memanggil metode <i>Function.prototype.apply ()</i> dan meneruskan konteks <i>nol</i> ke sana, dan sebagai array <i>Array baru (5)</i> . </li><li>  <i>Array baru (5)</i> membuat array tanpa sel, tetapi dengan panjang <i>5</i> . </li><li>  <i>Function.prototype.apply ()</i> menggunakan metode internal untuk memecah array menjadi argumen yang terpisah, sebagai akibatnya, meneruskan lima argumen dengan nilai yang <i>tidak ditentukan</i> ke konstruktor <i>Array</i> . </li><li>  <i>Array</i> menerima <i>5</i> argumen dengan nilai yang <i>tidak ditentukan</i> , menambahkannya ke sel yang sesuai. </li></ol><br>  Semuanya tampak jelas, kecuali apa metode internal <i>Function.prototype.apply () ini</i> , yang membuat <i>5</i> argumen keluar dari ketiadaan - saya sarankan lagi untuk melihat dokumentasi <i>ECMAScript</i> : <br><br><pre> <code class="dos hljs"><span class="hljs-number"><span class="hljs-number">19</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> Function.prototype.apply <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> IsCallable(func) is false, throw a TypeError exception. <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> argArray is null or undefined, then Return <span class="hljs-keyword"><span class="hljs-keyword">Call</span></span>(func, thisArg). <span class="hljs-number"><span class="hljs-number">3</span></span>. Let argList be CreateListFromArrayLike(argArray). <span class="hljs-number"><span class="hljs-number">7</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">17</span></span> CreateListFromArrayLike (obj [, elementTypes] ) <span class="hljs-number"><span class="hljs-number">1</span></span>. ReturnIfAbrupt(obj). <span class="hljs-number"><span class="hljs-number">2</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> elementTypes was <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> passed, let elementTypes be (Undefined, Null, Boolean, String, Symbol, Number, Object). <span class="hljs-number"><span class="hljs-number">3</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span>(obj) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> Object, throw a TypeError exception. <span class="hljs-number"><span class="hljs-number">4</span></span>. Let len be ToLength(Get(obj, "length")). <span class="hljs-number"><span class="hljs-number">5</span></span>. ReturnIfAbrupt(len). <span class="hljs-number"><span class="hljs-number">6</span></span>. Let list be an empty List. <span class="hljs-number"><span class="hljs-number">7</span></span>. Let index be <span class="hljs-number"><span class="hljs-number">0</span></span>. <span class="hljs-number"><span class="hljs-number">8</span></span>. Repeat while index &lt; len a. Let indexName be ToString(index). b. Let next be Get(obj, indexName). c. ReturnIfAbrupt(next). d. <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span>(next) is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> an element of elementTypes, throw a TypeError exception. e. <span class="hljs-built_in"><span class="hljs-built_in">Append</span></span> next as the last element of list. f. <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span> index to index + <span class="hljs-number"><span class="hljs-number">1</span></span>. <span class="hljs-number"><span class="hljs-number">9</span></span>. Return list.</code> </pre> <br>  Kami melihat poin yang paling menarik: <br><br>  19.2.3.1 - paragraf 3: membuat daftar argumen dari objek yang mirip dengan array (seperti yang kita ingat, objek tersebut harus memiliki properti panjang). <br><br>  7.3.17 - metode pembuatan daftar itu sendiri.  Ia memeriksa apakah objeknya adalah atau tidak, dan, jika demikian, permintaan untuk bidang <i>panjang</i> (paragraf 4).  Kemudian indeks sama dengan <i>"0" dibuat</i> (paragraf 7).  Sebuah loop dibuat dengan kenaikan indeks ke nilai yang diambil dari bidang <i>panjang</i> (paragraf 8).  Dalam siklus ini, kami merujuk pada nilai sel array yang ditransmisikan dengan indeks yang sesuai (klausa 8a dan 8b).  Dan seperti yang kita ingat, ketika mengakses nilai sel tunggal dalam array di mana sebenarnya tidak ada sel, itu masih memberikan nilai - <i>tidak terdefinisi</i> .  Nilai yang dihasilkan ditambahkan ke akhir daftar argumen (paragraf 8e). <br><br>  Nah, sekarang semuanya telah jatuh ke tempatnya, Anda dapat dengan aman membangun matriks yang sangat kosong. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)).map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>.apply(<span class="hljs-literal"><span class="hljs-literal">null</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)); }); <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(arr); <span class="hljs-comment"><span class="hljs-comment">// Array(5) [ (5) […], (5) […], (5) […], (5) […], (5) […] ] console.log(arr[0]); // Array(5) [ undefined, undefined, undefined, undefined, undefined ] console.log(Object.getOwnPropertyDescriptor(arr,"0")); // Object { value: (5) […], writable: true, enumerable: true, configurable: true } console.log(arr[0][0]); // undefined console.log(Object.getOwnPropertyDescriptor(arr[0],"0")); // Object { value: undefined, writable: true, enumerable: true, configurable: true }</span></span></code> </pre> <br>  Sekarang, seperti yang Anda lihat, semuanya menyatu dan terlihat cukup sederhana: kami, dengan cara yang sudah kami ketahui, membuat <i>array</i> kosong yang sederhana. <i>Terapkan array (null, new Array (5))</i> dan kemudian meneruskannya ke metode peta, yang menciptakan array yang sama di masing-masing sel. <br><br>  Selain itu, Anda dapat membuatnya lebih mudah.  Operator <i>spread</i> - <i>...</i> muncul di <i>ECMAScript6</i> , dan, yang tipikal, ia juga secara khusus bekerja dengan array.  Karena itu, kita cukup mengemudi di: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...new <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...new <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(<span class="hljs-number"><span class="hljs-number">5</span></span>)));</code> </pre> <br>  atau kami akan menyederhanakannya sepenuhnya, meskipun sebelumnya saya berjanji baru untuk tidak menyentuh ... <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> arr = <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...Array(<span class="hljs-number"><span class="hljs-number">5</span></span>)).map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Array</span></span>(...Array(<span class="hljs-number"><span class="hljs-number">5</span></span>)));</code> </pre>  <i>Catatan: di sini kami juga menggunakan fungsi panah, karena kami masih berurusan dengan operator spread yang muncul dalam spesifikasi yang sama dengan mereka.</i> <br><br>  Kami tidak akan masuk ke prinsip operator <i>penyebaran</i> , namun, untuk pengembangan umum, saya percaya contoh ini juga berguna. <br><br>  Selain itu, kami, tentu saja, dapat membangun fungsi kami, yang, menggunakan sorting <i>Function.protot.apply ()</i> , akan membuat array normal bagi kami dengan sel kosong, namun, memahami prinsip-prinsip internal JavaScript dan, karenanya, penggunaan yang benar dan memadai fungsi bawaan, adalah dasar untuk menguasai yang merupakan prioritas.  Ya, dan tentu saja, ini sangat sederhana, lebih cepat, dan lebih nyaman. <br><br>  Dan akhirnya, kembali ke pertanyaan yang sama tentang <i>stackoverflow</i> - di sana, saya ingat, orang itu secara keliru menganggap bahwa metode yang diterimanya mengarah ke jawaban yang benar, dan bahwa ia menerima matriks <i>5x5</i> , namun - kesalahan kecil merayap di sana. <br><br>  Dia melaju masuk: <br><br> <code>Array.apply(null, new Array(5)).map(function(){ <br> return new Array(5); <br> });</code> <br> <br>  Menurut Anda apa hasil sebenarnya di sini? <br><br><div class="spoiler">  <b class="spoiler_title">Jawabannya</b> <div class="spoiler_text">  console.log (arr);  // Array (5) [(5) [...], (5) [...], (5) [...], (5) [...], (5) [...]] <br>  console.log (arr [0]);  // Array (5) [&lt;5 slot kosong&gt;] <br>  console.log (Object.getOwnPropertyDescriptor (arr, "0"));  // Objek {nilai: (5) [...], dapat ditulis: true, enumerable: true, dapat dikonfigurasi: true} <br>  console.log (arr [0] [0]);  // tidak terdefinisi <br>  console.log (Object.getOwnPropertyDescriptor (arr [0], "0"));  // tidak terdefinisi <br></div></div><br>  bukan, bukan itu yang dia inginkan ... <br><br>  Referensi: <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Spesifikasi Bahasa ECMAScript 2015</a> <br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Apa yang sebenarnya dilakukan Array</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id463041/">https://habr.com/ru/post/id463041/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id463027/index.html">Ulasan independen tentang PVS-Studio (Linux, C ++)</a></li>
<li><a href="../id463031/index.html">Hidup dan belajar. Bagian 3. Pendidikan berkelanjutan atau usia siswa abadi</a></li>
<li><a href="../id463035/index.html">Berita dari dunia OpenStreetMap No. 471 (07.23.2019-29.07.2019)</a></li>
<li><a href="../id463037/index.html">Mencari inspirasi, atau Cara keluar dari F</a></li>
<li><a href="../id463039/index.html">Pembersih debu manicure sendiri</a></li>
<li><a href="../id463045/index.html">Secara otomatis mendeteksi emosi dalam percakapan teks menggunakan jaringan saraf</a></li>
<li><a href="../id463055/index.html">Tentang admin, devops, kebingungan tanpa akhir dan transformasi DevOps dalam perusahaan</a></li>
<li><a href="../id463057/index.html">Kerangka kerja Yii 2 hak khusus</a></li>
<li><a href="../id463059/index.html">Tiga tinggal di IT dan bukan hanya</a></li>
<li><a href="../id463061/index.html">Aturan untuk menyiapkan tata letak dalam Figma</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>