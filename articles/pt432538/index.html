<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üà≤ üî™ ‚öõÔ∏è Casa inteligente, eu ainda te fiz üñêüèº ü§πüèº üàöÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Casa inteligente, um t√≥pico bastante comum nos dias de hoje, e nesta publica√ß√£o n√£o vou falar sobre novas tecnologias, fabricantes e tend√™ncias modern...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Casa inteligente, eu ainda te fiz</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432538/"><img src="https://habrastorage.org/webt/rc/pi/ap/rcpiaplfihjycjb82knoboywbs4.jpeg"><br><br>  Casa inteligente, um t√≥pico bastante comum nos dias de hoje, e nesta publica√ß√£o n√£o vou falar sobre novas tecnologias, fabricantes e tend√™ncias modernas desse t√≥pico, tudo est√° escrito para mim uma vez em cada cem.  Tentarei descrever brevemente o processo de cria√ß√£o de uma Casa Inteligente (doravante denominada UD) sem narra√ß√µes t√©cnicas profundas.  Se este t√≥pico for interessante para os leitores, apresentarei todas as listagens de programas, firmware MK, circuitos e tudo o necess√°rio para que esse milagre se torne o cora√ß√£o da sua casa. <br><a name="habracut"></a><br>  Os conceitos b√°sicos no desenvolvimento da UD s√£o a completa aus√™ncia de uma "fazenda coletiva", ou seja, o preenchimento eletr√¥nico n√£o deve se destacar esteticamente (soquetes comuns, interruptores, l√¢mpadas) e n√£o sobrecarregar os usu√°rios (duplicando a principal funcionalidade das formas usuais: qualquer fonte de luz pode ser ligada a partir do comutador e pelo telefone, e n√£o como l√¢mpadas inteligentes, qualquer pessoa no assunto entender√°).  Anexarei uma foto para maior clareza: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kj/78/ez/kj78ez2owrbmnv3pesjm1xar1b8.png"></div><br>  A √∫ltima adi√ß√£o e a letra terminar√£o.  Eu podia comprar um sistema dom√©stico inteligente pronto, mas no passado eu tinha um bom entendimento de circuitos, r√°dio eletr√¥nica, programa√ß√£o e tinha um carro antigo, e mesmo naquele momento comecei a construir uma casa de campo que realmente queria dotar meu c√©rebro.  Em geral, √© assim que se pergunta ao pescador por que voc√™ est√° pescando, se voc√™ pode compr√°-lo!  Para o prazer dos rapazes, pelo prazer de entender que voc√™ pode automatizar sua casa e investir sua alma, suas id√©ias e sua l√≥gica nela, realmente torna sua casa meio viva.  Vamos l√°! <br><br>  Primeiro, determinei o funcionamento do UD, o que √© realmente necess√°rio: <br><br><ul><li>  Gerenciamento de todas as fontes de luz, tanto do switch quanto do aplicativo </li><li>  Controle de brilho da l√¢mpada </li><li>  V√°rios modos de ilumina√ß√£o: desligamento autom√°tico, modo de presen√ßa, luz √† noite - eu mesmo criei esse modo, quando voc√™ o liga, ele ilumina seu caminho √† noite para o banheiro.  Se voc√™ n√£o bater nas paredes em busca de um interruptor, poder√° pensar em outra coisa. </li><li>  Gerencie tomadas espec√≠ficas nas quais o ferro, o curling, o secador de cabelo, a placa etc. est√£o conectados.  A ideologia √© a seguinte: esquerda, esqueceu de deslig√°-lo ou n√£o, desligou-o atrav√©s do aplicativo. </li><li>  O par√°grafo anterior implica a necessidade de controlar a casa de qualquer lugar do mundo e permanece leve: <br><br>  -temperatura e umidade em casa, na rua e no por√£o <br>  -Temperatura e press√£o no sistema de aquecimento (casa particular, sem ele em qualquer lugar) <br>  -prote√ß√£o contra vazamentos, fuma√ßa, ainda mais precisamente n√£o prote√ß√£o, mas notifica√ß√£o. </li></ul><br><h2>  Das palavras √†s a√ß√µes </h2><br>  Dividiu o sistema em tr√™s blocos: <br><br><ul><li>  Unidade de controle de carga de ilumina√ß√£o e pot√™ncia </li><li>  Unidade de monitoramento (v√°rios sensores) </li><li>  Mini computador (c√©rebro principal, n√∫cleo do servidor OS, .Net) </li></ul><br>  <b>Unidade de controle de ilumina√ß√£o e carga de 9 canais</b> <br><br>  A base do MK da Atmel atmega1284 n√£o √© arduino, apenas hardcode, apenas C, o m√≥dulo ethernet ENC28J60 foi escolhido como canal de comunica√ß√£o com o c√©rebro (o UART √© chato, a limita√ß√£o do comprimento do fio depende at√© da fuma√ßa), algumas palavras sobre o m√≥dulo ENC28J60, na verdade um microcircuito d√∫bio : errata √© mais do que uma folha de dados, mas em um m√™s de trabalho ela nunca foi interrompida, ent√£o, por enquanto, n√£o tenho queixas.  Ele prometeu sem narrativas t√©cnicas, mas isso n√£o √© limpeza de piso, completamente sem terminologia em lugar algum.  7 interruptores e 7 lumin√°rias est√£o conectados √† unidade, dois canais v√£o para contatores de 25A cada, um para a sa√≠da onde a esposa acaricia minhas cal√ßas para trabalhar e o segundo para o quarto das crian√ßas, dois para tomadas paralelas.  Primeiro, coletei tudo no meu joelho no meu laborat√≥rio <br><br><img src="https://habrastorage.org/webt/j5/ni/bg/j5nibgoaxs10wzoladnb0mejbya.jpeg"><br><br>  Gravou a placa usando o m√©todo LUT <br><br><img src="https://habrastorage.org/webt/rf/bh/yl/rfbhyl53ica3mhfcxva6mdkc2og.jpeg"><br><br><img src="https://habrastorage.org/webt/sm/31/oc/sm31ocrqok26zcj5d_8oig8vexa.jpeg"><br><br>  Depois que a placa foi testada quanto ao desempenho, pedi v√°rias inst√¢ncias de placas de circuito em Novosibirsk <br><br><img src="https://habrastorage.org/webt/mm/03/mj/mm03mjsycbzieajbn9ddir9lbtc.jpeg"><br><br>  Montei duas c√≥pias da unidade de controle, uma para testar cargas, a segunda j√° para instala√ß√£o em uma casa de campo.  √â assustador instalar equipamentos que voc√™ n√£o tem certeza em casa.  Cada canal, em teoria, suporta uma corrente de 12 amperes, mas 2-3A √© suficiente para iluminar ou controlar contatores.  N√£o importava como eu tentasse queimar a placa testada, n√£o funcionou para mim, eu at√© conectei uma pistola de calor de 3 kW, os triacs aqueciam quase vermelhos, mas nenhuma falhou.  Para resumir, o conselho passou no teste da melhor maneira poss√≠vel. <br><br>  Programei e instalei os microcontroladores na placa na casa, a luz j√° podia ser acesa atrav√©s dos interruptores, mas a casa inteligente ainda n√£o cheirava. <br><br>  <b>Mini computador</b> <br><br>  No trabalho, abri um thin client com 1 GB de RAM e 8 GB de ROM, na Amazon custa um pouco mais de 100 d√≥lares.  Eu escolhi o Server Core como sistema operacional, porque sou uma pessoa orientada a C #).  N√£o sei escrever software nativo para Android e Apple e, por muito tempo, decidi por mim mesmo que meu bot na plataforma de Pashka Durov (que n√£o entendeu o telegrama) gerenciar√° a casa inteligente por cerca de uma semana, sentei-me no laptop sob o espa√ßo e o bot est√° pronto.  √â bom trabalhar com pessoas inteligentes, √© sobre telegramas, o bot foi escrito de uma s√≥ vez, documenta√ß√£o compreens√≠vel, bibliotecas de trabalho, sem falhas.  Um ponto triste que todo mundo sabe: Roskomnadzor quer bloquear o carrinho com todo o seu poder e funciona em smartphones, mas a situa√ß√£o dos bots √© um pouco diferente, eles se conectam aos servidores todas as vezes e, para n√£o tentar o destino, levantei o openvpn para a AWS (Amazon Web Services) servidor (e de gra√ßa, na Amazon h√° pagamento pelo tr√°fego, e o tr√°fego atrav√©s do bot √© m√≠nimo).  Ap√≥s o carregamento, o thin client se conecta ao servidor vpn e ignora todos os bloqueios de Roskomnadzor solicita√ß√µes processadas silenciosamente. <br><br><h2>  Sum√°rio </h2><br>  O sistema funciona por um m√™s em condi√ß√µes reais sem uma √∫nica falha.  Nos telegramas no Android, h√° um coque que voc√™ pode levar o bot diretamente para a √°rea de trabalho e abrir como um aplicativo separado.  Sim, estou longe de ser uma pessoa criativa e chamei o bot Jarvis <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l4/ot/tj/l4ottjtc_lwqs6t9jpamdpmq3yc.jpeg" width="350"></div><br>  Estou muito satisfeito com o bot e simplesmente n√£o h√° necessidade de escrever software nativo para dispositivos m√≥veis <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/nx/ap/uk/nxapukjpdt8zilon-2ll2w2nqnq.jpeg" width="350"></div><br>  Algumas informa√ß√µes da unidade de monitoramento <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zm/ty/5i/zmty5i89jgwl7qnjqaczenusasq.jpeg" width="350"></div><br>  Fa√ßa perguntas, repito, se o t√≥pico for interessante, postarei no github todas as fontes do projeto, bem como todos os circuitos, para que voc√™ possa montar todo o KIT e fazer o upload do firmware e trabalhar√° com muita for√ßa sem nenhum conhecimento especial de programa√ß√£o e circuitos. <br><br>  PS.  Existem falhas na placa de circuito (intervalos entre os caminhos de energia, os contatos s√£o muito pequenos, existem caminhos divorciados em √¢ngulos retos).  Vou mudar a taxa, o benef√≠cio de fazer um novo √© um centavo.  Obrigado a todos que apontaram esses erros. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt432538/">https://habr.com/ru/post/pt432538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt432518/index.html">El√©tron e o decl√≠nio de aplicativos nativos</a></li>
<li><a href="../pt432520/index.html">Como alterar a senha de administrador no Atlassian Jira e Confluence no banco de dados incorporado (H2)</a></li>
<li><a href="../pt432524/index.html">Por que voc√™ nunca deve usar o Quora novamente</a></li>
<li><a href="../pt432526/index.html">Avalia√ß√£o de novos projetos</a></li>
<li><a href="../pt432536/index.html">Qualidade do ar na casa no inverno</a></li>
<li><a href="../pt432540/index.html">50 anos depois. A m√£e de todas as demos</a></li>
<li><a href="../pt432542/index.html">Cientistas chineses desenvolveram papel t√©rmico regrav√°vel pr√°tico</a></li>
<li><a href="../pt432544/index.html">A matem√°tica em Gamedev √© simples. Matrizes e transforma√ß√µes afins</a></li>
<li><a href="../pt432546/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel n¬∫ 278 (de 3 a 9 de dezembro)</a></li>
<li><a href="../pt432548/index.html">Um exemplo de uso de uma biblioteca Java para criar um bot de Telegram</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>