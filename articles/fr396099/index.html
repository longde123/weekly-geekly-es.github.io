<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üîÆ üè° üê± Vid√©o surveillance √† domicile. Impl√©mentation avec Zoneminder et Debian 8 üéÇ üï∫üèº üßñüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pr√©sentation
 Bonjour. 
 
 Ayant un NAS domestique qui ex√©cute Debian 8 (j'avais l'habitude d'utiliser Ubuntu Server 12.04 et 14.04), l'id√©e est venue...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Vid√©o surveillance √† domicile. Impl√©mentation avec Zoneminder et Debian 8</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/396099/"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pr√©sentation</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bonjour. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ayant un NAS domestique qui ex√©cute Debian 8 (j'avais l'habitude d'utiliser Ubuntu Server 12.04 et 14.04), l'id√©e est venue de lui assigner, entre autres, le r√¥le de serveur de surveillance. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zoneminder a</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> √©t√© s√©lectionn√© comme partie serveur </font><font style="vertical-align: inherit;">. L'algorithme de vid√©osurveillance doit √™tre le suivant: l'enregistrement 24h / 24 n'est pas n√©cessaire, mais si n√©cessaire, la possibilit√© d'activer l'enregistrement sur la survenance d'un √©v√©nement est requise - d√©clencher un mouvement, puis envoyer une notification par e-mail avec des captures d'√©cran de l'√©v√©nement. Cela est n√©cessaire pour assurer le contr√¥le de l'appartement lorsque quelqu'un est absent. Bien s√ªr, vous devez pouvoir vous connecter √† distance et v√©rifier si tout est en ordre. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sur le site du d√©veloppeur j'ai trouv√© le plus d√©taill√©</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Un wiki</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> sp√©cialement </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">con√ßu</font></a><font style="vertical-align: inherit;"> pour l'installation sur Debian 8 64 bits. </font><font style="vertical-align: inherit;">En cons√©quence, je prendrai les instructions d'installation √† partir de l√†, expliquant certains points avec mes commentaires.</font></font><br>
<a name="habracut"></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Installer Zoneminder</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous avons donc un serveur avec Debian 8 64 bits install√© dans la configuration minimale (j'ai utilis√© netinstall). </font><font style="vertical-align: inherit;">Vous devez d'abord √©diter sources.list, en y ajoutant des backports Jessie:</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /etc/apt/sources.list
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
√Ä la fin du fichier, ajoutez:</font></font><br>
<br>
<pre><code class="bash hljs">deb http://http.debian.net/debian jessie-backports main
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ou d√©commentez cette ligne, si elle est d√©j√† l√†, c'est-√†-dire, supprimez # au d√©but de la ligne. </font><font style="vertical-align: inherit;">Mise √† jour de l'index du package:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Maintenant, tout est pr√™t pour installer Zoneminder, ce que nous allons faire:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get install zoneminder
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de l'installation, Apache, MySQL, PHP seront √©galement install√©s automatiquement. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Une fois l'installation termin√©e, cr√©ez la base de donn√©es MySQL:</font></font><br>
<br>
<pre><code class="bash hljs">sudo mysql -uroot -p &lt; /usr/share/zoneminder/db/zm_create.sql
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lors de la cr√©ation de la base de donn√©es, vous serez invit√© √† s√©lectionner le mot de passe root. </font><font style="vertical-align: inherit;">Ensuite, ex√©cutez les commandes suivantes s√©quentiellement (via sudo), en entrant le mot de passe en cas de demande:</font></font><br>
<br>
<pre><code class="bash hljs">mysql -uroot -p -e <span class="hljs-string"><span class="hljs-string">"grant all on zm.* to 'zmuser'@localhost identified by 'zmpass';"</span></span>
</code></pre><br>
<pre><code class="bash hljs">mysqladmin -uroot -p reload
</code></pre><br>
<pre><code class="bash hljs">chmod 740 /etc/zm/zm.conf
</code></pre><br>
<pre><code class="bash hljs">chown root:www-data /etc/zm/zm.conf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Activez l'ex√©cution automatique de Zoneminder:</font></font><br>
<pre><code class="bash hljs">systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> zoneminder.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous ajoutons l'utilisateur www-data au groupe sudo, cela est n√©cessaire pour acc√©der aux cam√©ras locales:</font></font><br>
<br>
<pre><code class="bash hljs">adduser www-data sudo
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lancez Zoneminder:</font></font><br>
<pre><code class="bash hljs">systemctl start zoneminder.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
V√©rifiez que Zoneminder fonctionne:</font></font><br>
<pre><code class="bash hljs">systemctl status zoneminder.service
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si tout est en ordre, la sortie de la commande devrait ressembler √† ceci:</font></font><br>
<br>
<pre><code class="bash hljs">‚óè zoneminder.service - ZoneMinder CCTV recording and surveillance system<font></font>
   Loaded: loaded (/lib/systemd/system/zoneminder.service; enabled)<font></font>
   Active: active (running) since  2016-07-10 18:48:30 IRKT; 5h 31min ago<font></font>
  Process: 6413 ExecStop=/usr/bin/zmpkg.pl stop (code=exited, status=0/SUCCESS)<font></font>
  Process: 6455 ExecStart=/usr/bin/zmpkg.pl start (code=exited, status=0/SUCCESS)<font></font>
 Main PID: 6474 (zmdc.pl)<font></font>
   CGroup: /system.slice/zoneminder.service<font></font>
           ‚îú‚îÄ6474 /usr/bin/perl -wT /usr/bin/zmdc.pl startup<font></font>
           ‚îú‚îÄ6507 /usr/bin/perl -wT /usr/bin/zmfilter.pl<font></font>
           ‚îú‚îÄ6514 /usr/bin/perl -wT /usr/bin/zmaudit.pl -c<font></font>
           ‚îî‚îÄ6521 /usr/bin/perl -wT /usr/bin/zmwatch.pl<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurer Apache:</font></font><br>
<pre><code class="bash hljs">a2enmod cgi
</code></pre><br>
<pre><code class="bash hljs">a2enmod rewrite
</code></pre><br>
<pre><code class="bash hljs">a2enconf zoneminder
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ajoutez votre fuseau horaire en PHP:</font></font><br>
<pre><code class="bash hljs">sudo nano /etc/php5/apache2/php.ini
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous recherchons la section [Date] et modifions date.timezone √† celle souhait√©e:</font></font><br>
<pre><code class="bash hljs">[Date]<font></font>
; Defines the default timezone used by the date <span class="hljs-built_in"><span class="hljs-built_in">functions</span></span><font></font>
; http://php.net/date.timezone<font></font>
date.timezone = Asia/Irkutsk<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enregistrer - Ctrl + O, quitter - Ctrl + X. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Red√©marrez Apache:</font></font><br>
<pre><code class="bash hljs">service apache2 restart
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour pouvoir contr√¥ler Zoneminder via Internet Explorer, vous devez installer Cambozola:</font></font><br>
<br>
<pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /usr/src &amp;&amp; wget http://www.andywilcock.com/code/cambozola/cambozola-latest.tar.gz
</code></pre><br>
<pre><code class="bash hljs">tar -xzvf cambozola-latest.tar.gz
</code></pre><br>
<pre><code class="bash hljs">replace 936 with cambozola version downloaded
</code></pre><br>
<pre><code class="bash hljs">cp cambozola-0.936/dist/cambozola.jar /usr/share/zoneminder
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ceci termine l'installation de Zoneminder. </font><font style="vertical-align: inherit;">Vous devez maintenant configurer le transport du courrier afin que Zoneminder puisse vous informer des √©v√©nements par e-mail.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Configuration du transport du courrier</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pour envoyer des notifications, Zoneminder peut utiliser ssmtp et l'installer:</font></font><br>
<br>
<pre><code class="bash hljs">sudo apt-get update
</code></pre><br>
<pre><code class="bash hljs">sudo apt-get install ssmtp
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez mailutils en m√™me temps si ce paquet n'est pas d√©j√† install√©:</font></font><br>
<pre><code class="bash hljs">sudo apt-get install mailutils
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurez maintenant les param√®tres de messagerie au nom desquels les notifications seront envoy√©es. </font><font style="vertical-align: inherit;">Supposons que la bo√Æte aux lettres se trouve sur gmail.com. </font><font style="vertical-align: inherit;">Ouvrez ssmtp.conf:</font></font><br>
<pre><code class="bash hljs">sudo nano /etc/ssmtp/ssmtp.conf
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et apporter √† ce formulaire, en indiquant, en cons√©quence, vos donn√©es:</font></font><br>
<pre><code class="bash hljs">root=mymail@gmail.com<font></font>
mailhub=smtp.gmail.com:587<font></font>
hostname=localhost<font></font>
RewriteDomain=gmail.com<font></font>
UseSTARTTLS=YES<font></font>
UseTLS=YES<font></font>
AuthUser=mymail@gmail.com<font></font>
AuthPass=myverystrongpassword<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revalias droit:</font></font><br>
<pre><code class="bash hljs">sudo nano /etc/ssmtp/revaliases
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
nous apportons √† ce formulaire:</font></font><br>
<pre><code class="bash hljs">root:pp@gmail.com:smtp.gmail.com:587<font></font>
www-data:pp@gmail.com:smtp.gmail.com:587<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et nous v√©rifions l'exactitude des param√®tres en envoyant une lettre de test:</font></font><br>
<pre><code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">"Hello, World"</span></span> | mail -s <span class="hljs-string"><span class="hljs-string">"My email check"</span></span> mne@napochtu.ru
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si le test r√©ussit, passez √† l'√©tape suivante - installation de MIME :: Lite et Net :: SMTP. </font><font style="vertical-align: inherit;">V√©rifiez si ces composants sont install√©s:</font></font><br>
<pre><code class="bash hljs">perl -MMIME::Lite -e <span class="hljs-string"><span class="hljs-string">"print \"Module installed.\\n\";"</span></span>
</code></pre><br>
<pre><code class="bash hljs">perl -MNet::SMTP -e <span class="hljs-string"><span class="hljs-string">"print \"Module installed.\\n\";"</span></span>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Installez en allant dans le shell perl:</font></font><br>
<pre><code class="bash hljs">sudo perl -MCPAN -e shell
</code></pre><br>
<pre><code class="perl hljs">install MIME::Lite<font></font>
install Net::SMTP<font></font>
</code></pre><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous devons maintenant apporter des modifications tr√®s importantes, sans lesquelles le transport du courrier de Zoneminder ne fonctionnera pas. </font></font><u><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Veuillez noter que ces modifications ne doivent √™tre effectu√©es que si la version du Zoneminder install√© est de 1,29 ou inf√©rieure. </font><font style="vertical-align: inherit;">√Ä partir de la version 1.30, ces actions ne sont pas n√©cessaires. </font></font></i></u><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ouvrez le fichier zmfilter.pl dans l'√©diteur:</font></font><br>
<br>
<pre><code class="bash hljs">sudo nano /usr/bin/zmfilter.pl
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En allant √† la ligne 1179, nous voyons ce qui suit:</font></font><br>
<pre><code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">### Send the Message</span></span>
MIME::Lite-&gt;<span class="hljs-keyword"><span class="hljs-keyword">send</span></span>( <span class="hljs-string"><span class="hljs-string">"smtp"</span></span>, $Config<span class="hljs-string"><span class="hljs-string">{ZM_EMAIL_HOST}</span></span>, <span class="hljs-string"><span class="hljs-string">Timeout=&gt;</span></span><span class="hljs-number"><span class="hljs-number">60</span></span> );<font></font>
$mail-&gt;<span class="hljs-keyword"><span class="hljs-keyword">send</span></span>();
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Commentez les lignes </font></font><pre><code class="perl hljs">MIME::Lite-&gt;<span class="hljs-keyword"><span class="hljs-keyword">send</span></span>( <span class="hljs-string"><span class="hljs-string">"sendmail"</span></span>, $Config<span class="hljs-string"><span class="hljs-string">{ZM_EMAIL_HOST}</span></span>, <span class="hljs-string"><span class="hljs-string">Timeout=&gt;</span></span><span class="hljs-number"><span class="hljs-number">60</span></span> );</code></pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> et </font></font><pre><code class="perl hljs">$mail-&gt;<span class="hljs-keyword"><span class="hljs-keyword">send</span></span>();</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
et ajoutez une ligne en dessous d'eux</font></font><br>
<pre><code class="perl hljs">$mail-&gt;<span class="hljs-keyword"><span class="hljs-keyword">send</span></span>(<span class="hljs-string"><span class="hljs-string">'sendmail'</span></span>,<span class="hljs-string"><span class="hljs-string">'/usr/sbin/ssmtp'</span></span>,$Config<span class="hljs-string"><span class="hljs-string">{ZM_EMAIL_ADDRESS}</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Par cons√©quent, √† partir de la ligne 1179 (dans mon cas, mais pas exactement ce num√©ro de ligne), le code devrait ressembler √† ceci:</font></font><br>
<pre><code class="perl hljs"><span class="hljs-comment"><span class="hljs-comment">### Send the Message</span></span>
<span class="hljs-comment"><span class="hljs-comment">#MIME::Lite-&gt;send( "sendmail", $Config{ZM_EMAIL_HOST}, Timeout=&gt;60 );</span></span>
<span class="hljs-comment"><span class="hljs-comment">#$mail-&gt;send();</span></span>
$mail-&gt;<span class="hljs-keyword"><span class="hljs-keyword">send</span></span>(<span class="hljs-string"><span class="hljs-string">'sendmail'</span></span>,<span class="hljs-string"><span class="hljs-string">'/usr/sbin/ssmtp'</span></span>,$Config<span class="hljs-string"><span class="hljs-string">{ZM_EMAIL_ADDRESS}</span></span>);
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Enregistrez, quittez. </font><font style="vertical-align: inherit;">Ceci termine le travail avec le terminal.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interface Web Zoneminder</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La gestion est disponible sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ip.adress.servera / zm</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , allez. La premi√®re chose √† faire est d'aller dans Options -&gt; Utilisateurs, et de d√©finir le mot de passe pour l'administrateur: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c89/d15/76e/c89d1576e93e476eaceac351d8cf9adc.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ensuite, allez dans Options -&gt; Syst√®me et cochez la case OPT_USE_AUTH: </font></font><br>
<br>
<img src="https://habrastorage.org/files/c63/40a/fe4/c6340afe4f184314abb5dae0fa45210f.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si cela n'est pas fait, Zoneminder vous permet d'aller sur l'interface Web ou de vous connecter via une application client sans demander de login / mot de passe, ce qui, bien s√ªr, n'est pas s√ªr. Il est √©trange que cette coche tr√®s n√©cessaire ne soit pas coch√©e par d√©faut. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Configurez maintenant l'envoi d'e-mails Allez dans Optons -&gt; Email et configurez par analogie:</font></font><br>
<br>
<img src="https://habrastorage.org/files/a4a/33e/6f9/a4a33e6f928245778132e33b7ebda91a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dans le champ EMAIL_BODY, vous pouvez configurer le format des notifications selon vos besoins. </font><font style="vertical-align: inherit;">Par exemple, si vous ajoutez% EI1% au champ, la premi√®re capture d'√©cran √† partir du moment o√π le d√©tecteur de mouvement est d√©clench√© sera jointe au message. </font><font style="vertical-align: inherit;">Une liste compl√®te des options de notifications est disponible </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ici</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ajout de cam√©ras</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Zoneminder peut fonctionner avec des cam√©ras USB et IP. Pour le moment, mes cam√©ras sont toujours en route, donc en tant que version temporaire de configuration de test de la cam√©ra, j'utilise mon ancien smartphone Android Alcatel Pop C2, sur lequel l'application </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IP Webcam est</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> install√©e </font><font style="vertical-align: inherit;">, qui transforme le smartphone en cam√©ra IP Wi-Fi. Apr√®s avoir install√© et ex√©cut√© l'application (je recommande d'abord de d√©finir la r√©solution du flux vid√©o dans les param√®tres de l'application, j'ai d√©fini 800x480), le smartphone affiche l'IP et le port via lesquels vous pouvez acc√©der √† l'interface Web et voir ce qui est int√©ressant ici:</font></font><br>
<br>
<img src="https://habrastorage.org/files/c6b/011/284/c6b0112847f343b9a2f5c1e568a46054.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, il y a beaucoup de param√®tres, mais nous sommes int√©ress√©s par l'adresse √† laquelle le flux vid√©o est donn√©. Et nous voyons qu'il existe des informations pour configurer Zoneminder, ce qui est une bonne nouvelle. √Ä savoir, le chemin de l'h√¥te distant est indiqu√©, le chemin qui devra √™tre entr√© dans les param√®tres de Zoneminder - apr√®s la cam√©ra IP que vous devez ajouter / vid√©o: </font></font><br>
<br>
<img src="https://habrastorage.org/files/061/07f/348/06107f34875040c3b59c31fdb48be5f6.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Revenez √† l'interface Web de Zoneminder pour ajouter la cam√©ra, s√©lectionnez Ajouter un nouveau moniteur: </font></font><br>
<br>
<img src="https://habrastorage.org/files/1f5/3f5/7f0/1f53f57f0e1e46f98fb744ff561f9bc0.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans le champ Nom, √©crivez le nom souhait√©, Source tapez -&gt; √Ä distance: </font></font><br>
<br>
<img src="https://habrastorage.org/files/fe4/9c3/eb8/fe49c3eb8bff451d868f5717256786f8.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
dans l'onglet Source, remplissez les champs: Nom d'h√¥te distant -&gt; IP du smartphone, Port d'h√¥te distant -&gt; port sur lequel la webcam IP s'ex√©cute, Chemin d'h√¥te distant -&gt; le chemin que nous avons vu dans les param√®tres de la webcam IP, et indiquez √©galement r√©solution du flux vid√©o, qui doit correspondre √† celle que nous avons s√©lectionn√©e pr√©c√©demment dans les param√®tres de la webcam IP:</font></font><br>
<br>
<img src="https://habrastorage.org/files/edb/332/eaa/edb332eaa0af41929a5c001c85ba250c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nous enregistrons les param√®tres -&gt; Enregistrer, et dans le menu principal de Zoneminder, nous voyons la cam√©ra que nous avons ajout√©e: </font></font><br>
<br>
<img src="https://habrastorage.org/files/79b/e8b/134/79be8b13496c4d208c3b7bf71b8f0f78.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En cliquant sur le nom dont nous voyons l'image: Les </font></font><br>
<br>
<img src="https://habrastorage.org/files/658/932/b4b/658932b4bf8e48099191e344fe46a436.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
cam√©ras peuvent fonctionner dans plusieurs modes, qui est d√©termin√© par le param√®tre Fonction dans le menu principal: </font></font><br>
<br>
<img src="https://habrastorage.org/files/f7b/c37/f45/f7bc37f45b0a4b00b91107ff71e2ba86.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Le mode dans lequel l'enregistrement n'est effectu√© que mouvement dans le cadre, appel√© Modect, et s√©lectionnez-le. D√©sormais, le syst√®me n'enregistrera pas le flux vid√©o en continu, mais uniquement s'il y a de bonnes raisons. Mais nous avons encore besoin d'une notification de mouvement dans le cadre. Pour cela, vous devez configurer le filtre. Ouvrez Filtres dans le menu principal de Zoneminder, configurez selon la capture d'√©cran, enregistrez-le sous n'importe quel nom: </font></font><br>
<br>
<img src="https://habrastorage.org/files/e06/f67/7d8/e06f677d87504372b4b2e6a256c2b029.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Et n'oubliez pas de cocher la case √† c√¥t√© de Ex√©cuter le filtre en arri√®re-plan:</font></font><br>
<br>
<img src="https://habrastorage.org/files/fa0/028/000/fa0028000ace4cf09efc533db6c5a89a.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ainsi, si un mouvement est d√©tect√© dans l'image, le syst√®me enregistrera la vid√©o et enverra une notification au courrier.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Applications client</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
S'il y a une IP permanente, rien ne vous emp√™che de rediriger les ports du routeur et de vous connecter depuis le smartphone de l'ext√©rieur via l'interface web, d'autant plus que vous pouvez s√©lectionner la version mobile de l'interface dans les param√®tres de Zoneminder, mais, en plus, j'ai d√©cid√© de chercher une application mobile pour cela objectifs. Apr√®s avoir recherch√© sur Google Play le mot cl√© "zoneminder", je me suis install√© sur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmNinja</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , car La note est assez √©lev√©e et j'ai aim√© les captures d'√©cran. La demande est pay√©e, version d'essai pour √©valuation pr√©liminaire, h√©las, non. La fonctionnalit√© est plus que suffisante - visualisation du flux vid√©o en temps r√©el, visualisation des archives, √©v√©nements enregistr√©s, changement de mode de cam√©ra, etc. </font></font><br>
<br>
<img src="https://habrastorage.org/files/05a/2c6/466/05a2c6466e07423cb4cab1c19441e1ea.png"><br>
<br>
<img src="https://habrastorage.org/files/397/6d7/688/3976d76883e74dd39c5c116dff87704a.png"><br>
<br>
<img src="https://habrastorage.org/files/41b/8bb/080/41b8bb0802794b62927ac27d493e3cae.png"><br>
<br>
<img src="https://habrastorage.org/files/aa0/145/ebd/aa0145ebdc2647d09e10bc9d4b7d8ec3.png"><br>
<br>
<img src="https://habrastorage.org/files/ff9/ecb/aba/ff9ecbaba4f64bb08b606ce1a05fb24c.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Il existe √©galement </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des versions de bureau</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zmNinja pour Linux, Windows, Mac OS X - ils sont distribu√©s gratuitement. </font><font style="vertical-align: inherit;">Voici √† quoi ressemble la version Linux ex√©cut√©e sur mon Mint 18: </font></font><br>
<br>
<img src="https://habrastorage.org/files/951/e22/5dc/951e225dcbf648b692ff07c42dd32a42.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En g√©n√©ral, l'interface est la m√™me pour tous les syst√®mes. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
C‚Äôest tout, merci de votre attention.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr396099/">https://habr.com/ru/post/fr396099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr396087/index.html">Comment la monnaie l√©manique conquiert la Suisse</a></li>
<li><a href="../fr396089/index.html">Comment l'origine humaine se refl√®te-t-elle dans les g√®nes</a></li>
<li><a href="../fr396093/index.html">IBM Blockchain Digest Part 1</a></li>
<li><a href="../fr396095/index.html">Comment l'Estonie applique la blockchain dans tout l'√âtat</a></li>
<li><a href="../fr396097/index.html">Double pi√®ge pour braconniers. Faux ≈ìufs de tortue avec trackers GPS</a></li>
<li><a href="../fr396101/index.html">Artem Astafurov: ¬´Nous avons commenc√© avec des fers √† souder, mais nous nous sommes arr√™t√©s sur un nuage¬ª</a></li>
<li><a href="../fr396103/index.html">Reskin Ingress ou un jeu complet? Pokemon Go Review</a></li>
<li><a href="../fr396105/index.html">√Ä quoi ressembleront les villes du futur?</a></li>
<li><a href="../fr396107/index.html">Le plus grand radiot√©lescope MeerKAT lanc√© en mode test √† une puissance d'un quart</a></li>
<li><a href="../fr396111/index.html">Particules PM2.5: qu'est-ce que c'est, o√π et pourquoi tout le monde en parle</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>