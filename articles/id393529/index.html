<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíè üÉè üõÄ HUD speedometer - dari ide ke hasil üëÉüèæ üïå üíâ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya! 
 Saya belum menulis apa pun untuk waktu yang lama, sekarang ini lebih merupakan sumber berita daripada yang praktis. Saya akan mencoba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HUD speedometer - dari ide ke hasil</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/393529/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halo semuanya! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya belum menulis apa pun untuk waktu yang lama, sekarang ini lebih merupakan sumber berita daripada yang praktis. </font><font style="vertical-align: inherit;">Saya akan mencoba memperbaiki situasinya. </font><font style="vertical-align: inherit;">Saya akan memberi tahu Anda tentang pengembangan speedometer HUD. </font><font style="vertical-align: inherit;">Meskipun bukan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">proyeksi laser</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , namun harganya terjangkau dan ringkas. </font></font><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pendahuluan</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Itu dimulai dengan fakta bahwa saya mendapat indikator tujuh-segmen 3,3 "besar di tangan saya. Saya memesannya untuk arloji yang tidak pernah dilahirkan. Saya punya 4 buah, di Lot 5, orang Cina menempatkan enam. Setelah memperkirakan ukuran, kecerahan, dan pantulan dari kaca depan, saya memutuskan - ini dia. Karena ukurannya, gambar tidak dapat dipisah, dan kecerahan dapat digunakan bahkan di bawah sinar matahari langsung. Saya langsung setuju bahwa orang Cina memiliki barang jadi yang indah yang cukup murah (semua harga pada saat penulisan) - dari 1800 rubel. (tutup mata kita untuk tidak sportif keputusan tersebut): </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1. Hal ini diperlukan untuk lem film pada kaca - meskipun transparan, tetapi semua tinjauan tumpang tindih, tapi aku tidak seperti berada pada kaca yang mencegah Hampir tidak duduk, mendorong kursi - dan film harus, dan bahkan lem Well .. dengan film, hampir tidak ada yang terlihat di hari yang cerah.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2. Anda tidak dapat merekatkan film, maka jumlahnya (cukup kecil) dua kali lipat, dan tidak ada yang terlihat di bawah sinar matahari. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai permulaan, hasilnya adalah tidak ada film di mana pun di kaca dan bahkan pada siang hari: </font></font><br>
<img src="https://habrastorage.org/files/ff6/b22/fc5/ff6b22fc52b64ef1b49e753cf85203ff.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah potongan, saya berjanji banyak gambar, video biasa-biasa saja, kode dan teks - semua dalam tradisi terbaik.</font></font><br>
<a name="habracut"></a><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teori</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Idenya sederhana - untuk jangka waktu tertentu kita menghitung jumlah pulsa dari sensor kecepatan. Sebagai CPU, ATMega8 yang sederhana dan terjangkau. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kesulitan pertama ternyata adalah koordinasi MK 5 V dan indikator 7.5 V. Fantasi menggambar diagram tumpukan transistor dan resistor (7 elemen untuk indikasi dinamis). Dari semua google, hanya satu artikel yang membantu saya mengganti indikator di arloji, maaf saya kehilangan alamatnya. Saya mengambil kesempatan ini untuk mengucapkan terima kasih kepada penulis atas ide untuk menggunakan TD62783 (dari 5 pcs per lot). Sebenarnya, ini adalah driver indikator tujuh segmen, di dalam unit transistor. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Selanjutnya, konverter DC / DC. Dibuat di MC34063, saya punya banyak, saya punya stok. Saya menghitungnya pada kalkulator, memeriksanya dengan tester - 7.5 V. Dalam tes lapangan ternyata sedikit, kecerahannya tidak cukup, meningkat menjadi 10 V.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kecerahan disesuaikan berdasarkan pembacaan sensor cahaya, yang merupakan photoresistor Tiongkok biasa. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hasilnya, rangkaian tersebut berubah sebagai berikut: </font></font><br>
<img src="https://habrastorage.org/files/c2a/f7f/9a8/c2af7f9a87e44b3c8096cb226beff9b1.png"><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Praktik I</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
mencetak papan sirkuit tercetak </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TopoR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Saya menggunakan penempatan otomatis, meskipun saya memperbaiki sebagian besar elemen secara manual. Tetapi kemajuan harus bekerja untuk saya, dan bukan hanya saya untuk kemajuan. Ternyata kecantikan: </font></font><br>
<img src="https://habrastorage.org/files/ff6/75a/f61/ff675af611bb4a16988ef316f5efba70.png"> <img src="https://habrastorage.org/files/920/8e8/1a6/9208e81a60364c3ca3acba4b4041c5c4.png"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan lebar badan, U4 terjawab, saya harus menyelesaikan trek dan tidak menyolder kaki ke-11. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tampilannya dalam kehidupan nyata:</font></font><br>
<img src="https://habrastorage.org/files/30a/758/c18/30a758c18cc64043a5e8eff2bc50df12.jpg"><br>
<img src="https://habrastorage.org/files/5d8/fa2/1cf/5d8fa21cf4c04799878eebdbbd8918d8.jpg"><br>
<img src="https://habrastorage.org/files/a84/745/d1b/a84745d1b01644f0b37b8460c11d094e.jpg"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Orang tak terduga berikutnya merangkak dalam perangkat lunak (saya tidak akan memberi tahu saya lupa mirror 2 dan 5, 4 - tidak ada yang bisa dibanggakan). </font><font style="vertical-align: inherit;">Masalahnya lebih rumit: penghitung menghitung jumlah pulsa yang diperlukan terlalu lama. </font><font style="vertical-align: inherit;">Misalnya, pada 60 km / jam, menghitung 60 pulsa dari sensor kecepatan membutuhkan waktu lebih dari satu detik. </font><font style="vertical-align: inherit;">Pembaruan kesaksian yang jarang seperti itu tidak cocok untuk saya. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya harus mengalikan setiap lantai pengukuran dengan 2. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perubahan linear dalam kecerahan dibandingkan dengan pencahayaan tidak cocok: ketika itu sedikit lebih gelap, kecerahan ternyata tidak cukup, ketika hampir gelap, kecerahannya terlalu banyak. </font><font style="vertical-align: inherit;">Saya meluncurkan Excel, membuat grafik untuk berbagai fungsi matematika. </font><font style="vertical-align: inherit;">Akibatnya, saya memilih kotak. </font></font><br>
<img src="https://habrastorage.org/files/879/6f1/217/8796f12172ba4f0ba9d5cdd77da3e15e.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode Bascom:</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Teks tersembunyi</font></font></b><div class="spoiler_text"><code>'HUD-speedometer<br>
'17/01/2016<br>
'21/01/2016<br>
'v1.1<br>
<br>
$regfile = "m8adef.dat"<br>
$crystal = 4000000<br>
$hwstack = 40<br>
$swstack = 16<br>
$framesize = 32<br>
<br>
Config Portb = Output<br>
Config Portc = Output<br>
Config Portd = Output<br>
Config Portd.4 = Input<br>
Portd.4 = 1<br>
Config Timer0 = Counter , Edge = Falling<br>
Config Timer1 = Pwm , Pwm = 8 , Compare_a_pwm = Clear_up , Compare_b_pwm = Clear_up , Prescale = 8<br>
Config Timer2 = Timer , Prescale = 1024<br>
On Timer2 Mytimer2<br>
Enable Interrupts<br>
Enable Timer2<br>
Config Adc = Single , Prescaler = Auto , Reference = Internal<br>
Start Adc<br>
<br>
Dim I As Byte '   <br>
Dim N As Byte '  <br>
Dim Pwm_value As Integer '<br>
Dim Speed As Integer , Speed_half As Integer , First_symbol As Integer , Second_symbol As Integer<br>
Dim A As Integer ' Speed  Speed_half<br>
Dim R1 As Word<br>
Declare Sub Digit_indication(digit As Integer) ' <br>
<br>
Const P = 500<br>
Const T = 5000 '   <br>
Const T1 = 1000 '    PWM<br>
Pwm_value = 5<br>
Tcnt0 = 0 '<br>
<br>
Do<br>
Incr I<br>
If I = 25 Then '   <br>
R1 = Getadc(7)<br>
R1 = Sqr(r1) ' <br>
R1 = R1 * 8<br>
If R1 &lt; 250 Then<br>
Pwm_value = 250 - R1<br>
Else<br>
Pwm_value = 3 ' <br>
End If<br>
I = 0<br>
End If<br>
Gosub Indication<br>
Loop<br>
<br>
Indication:<br>
If Speed &lt; 3 Then '  0 -  , 3 -   <br>
Pwm_value = 0<br>
End If<br>
While Speed &gt; 99 '..  2 <br>
Speed = Speed - 100<br>
Wend<br>
First_symbol = Speed / 10 ' <br>
Second_symbol = First_symbol * 10 '<br>
Second_symbol = Speed - Second_symbol ' <br>
Pwm1b = 0<br>
Pwm1a = 0<br>
Waitus T1 '  <br>
Call Digit_indication(first_symbol) '  <br>
Pwm1b = Pwm_value<br>
Waitus T<br>
Pwm1b = 0<br>
Pwm1a = 0<br>
Waitus T1 '  <br>
Call Digit_indication(second_symbol)<br>
Pwm1a = Pwm_value<br>
Waitus T<br>
Return<br>
<br>
Sub Digit_indication(digit As Integer)<br>
Select Case Digit<br>
Case 0:<br>
Portd.0 = 0<br>
Portc.0 = 1<br>
Portc.1 = 1<br>
Portc.2 = 1<br>
Portc.3 = 1<br>
Portc.4 = 1<br>
Portc.5 = 1<br>
Case 1:<br>
Portd.0 = 0<br>
Portc.0 = 1<br>
Portc.1 = 0<br>
Portc.2 = 0<br>
Portc.3 = 0<br>
Portc.4 = 0<br>
Portc.5 = 1<br>
Case 2:<br>
Portd.0 = 1<br>
Portc.0 = 0<br>
Portc.1 = 1<br>
Portc.2 = 1<br>
Portc.3 = 0<br>
Portc.4 = 1<br>
Portc.5 = 1<br>
Case 3:<br>
Portd.0 = 1<br>
Portc.0 = 1<br>
Portc.1 = 1<br>
Portc.2 = 0<br>
Portc.3 = 0<br>
Portc.4 = 1<br>
Portc.5 = 1<br>
Case 4:<br>
Portd.0 = 1<br>
Portc.0 = 1<br>
Portc.1 = 0<br>
Portc.2 = 0<br>
Portc.3 = 1<br>
Portc.4 = 0<br>
Portc.5 = 1<br>
Case 5:<br>
Portd.0 = 1<br>
Portc.0 = 1<br>
Portc.1 = 1<br>
Portc.2 = 0<br>
Portc.3 = 1<br>
Portc.4 = 1<br>
Portc.5 = 0<br>
Case 6:<br>
Portd.0 = 1<br>
Portc.0 = 1<br>
Portc.1 = 1<br>
Portc.2 = 1<br>
Portc.3 = 1<br>
Portc.4 = 1<br>
Portc.5 = 0<br>
Case 7:<br>
Portd.0 = 0<br>
Portc.0 = 1<br>
Portc.1 = 0<br>
Portc.2 = 0<br>
Portc.3 = 0<br>
Portc.4 = 1<br>
Portc.5 = 1<br>
Case 8:<br>
Portd.0 = 1<br>
Portc.0 = 1<br>
Portc.1 = 1<br>
Portc.2 = 1<br>
Portc.3 = 1<br>
Portc.4 = 1<br>
Portc.5 = 1<br>
Case 9:<br>
Portd.0 = 1<br>
Portc.0 = 1<br>
Portc.1 = 1<br>
Portc.2 = 0<br>
Portc.3 = 1<br>
Portc.4 = 1<br>
Portc.5 = 1<br>
End Select<br>
End Sub<br>
<br>
Mytimer2:<br>
Incr N<br>
If N = 26 Then<br>
N = 0<br>
Speed = Tcnt0 'Speed =    <br>
Tcnt0 = 0 '  <br>
End If<br>
If N = 13 Then '..      (  )<br>
Speed_half = Tcnt0 * 2 ' <br>
A = Speed - Speed_half<br>
A = A And &amp;B0111111111111111 '<br>
If A &gt; 2 Then<br>
Speed = Speed_half<br>
End If<br>
End If<br>
Timer2 = 135 ' 135 <br>
Return<br>
</code><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada akhir 135 - faktor koreksi, memilihnya untuk setiap mesin secara individual (135 untuk Logan, untuk Solaris lebih sedikit - setiap orang memiliki sensor kecepatan yang berbeda). </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Video yang dijanjikan. Maaf untuk kualitasnya, saya menembak selembar pita listrik biru dengan satu tangan, dengan yang lain saya meluncur:</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/s9eSjLEi_6M" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indikator tidak menyala ketika kecepatan kurang dari 3 km / jam. </font><font style="vertical-align: inherit;">Jika kecepatan lebih besar dari 99, maka ditampilkan tanpa karakter pertama. </font></font><br>
 <br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Anggaran:</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
ATMega8 - 200 gosok untuk 5 pcs - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Indikator 40 gosok - 825 gosok untuk 10 pcs - 165 </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
gosok </font><font style="vertical-align: inherit;">TD62783 - 250 </font><font style="vertical-align: inherit;">gosok untuk 5 pcs - </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
50 gosok Sisa barang longgar yang saya miliki, tetapi secara umum jelas bahwa Anda dapat menyimpannya dalam 500 gosokan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak ada lagi yang bisa diceritakan. </font><font style="vertical-align: inherit;">Ternyata sebuah counter besar yang indah. </font><font style="vertical-align: inherit;">Diuji pada Solaris. </font><font style="vertical-align: inherit;">Fokus gagal, fokus tidak memiliki sensor kecepatan. </font><font style="vertical-align: inherit;">Saya akan menyelesaikan program untuk bekerja dengan OBD2 hingga ELM327. </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Folder proyek di Yandex.Disk</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Terima kasih atas perhatian Anda!</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id393529/">https://habr.com/ru/post/id393529/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id393517/index.html">–†–µ–ª–∏–≥–∏—è, —Å—É–µ–≤–µ—Ä–∏—è –∏ –∫–æ—Å–º–æ—Å</a></li>
<li><a href="../id393521/index.html">Setelah lima hari kompilasi, Gentoo Linux diinstal pada Tesla Model S</a></li>
<li><a href="../id393523/index.html">–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –¥–∞—É–Ω—Ç–∞–π–º–æ–≤ –æ—Ç Google –∏ Telstra</a></li>
<li><a href="../id393525/index.html">Teleskop Sangat Besar bahkan mendapat lebih banyak fitur</a></li>
<li><a href="../id393527/index.html">Drone asimetris pertama di dunia dengan satu bagian yang bergerak</a></li>
<li><a href="../id393533/index.html">Di Amerika Serikat mulai menguji kapal tak berawak terbesar di dunia "Sea Hunter"</a></li>
<li><a href="../id393535/index.html">4xiDraw: plotter pena buatan rumah di Arduino</a></li>
<li><a href="../id393539/index.html">Luncurkan Nextion Editor 0.34 di bawah Wine</a></li>
<li><a href="../id393543/index.html">Ulasan nyaman, proyek bola pintar Athom Kickstarter</a></li>
<li><a href="../id393549/index.html">Filter baru dapat menyelamatkan pemilik Model X jika menggunakan senjata biologis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>