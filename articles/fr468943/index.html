<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïØÔ∏è üõåüèª ü§ñ cela et ScopeChain en EcmaScript üé† üë®üèº‚Äç‚úàÔ∏è üßõüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour, Habr! 

 Dans un article pr√©c√©dent, nous avons examin√© la th√©orie g√©n√©rale de la POO appliqu√©e √† EcmaScript et le sophisme populaire des d√©ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>cela et ScopeChain en EcmaScript</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/468943/"> Bonjour, Habr! <br><br>  Dans un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">article pr√©c√©dent,</a> nous avons examin√© la th√©orie g√©n√©rale de la POO appliqu√©e √† EcmaScript et le sophisme populaire des d√©veloppeurs novices concernant les diff√©rences entre la POO en JS et les langages classiques. <br><br>  Aujourd'hui, nous allons parler de deux autres concepts EcmaScript tout aussi importants, √† savoir la relation de l'entit√© avec le contexte d'ex√©cution (c'est cette connexion) et la relation de l'entit√© avec le contexte de g√©n√©ration ( <b>ScopeChain</b> ). <br><br>  Commen√ßons donc! <br><br><h3>  √ßa </h3><br>  Lors des entretiens en r√©ponse √† la question: "Dites-nous en plus √† <i>ce</i> sujet.".  Les d√©veloppeurs d√©butants, en r√®gle g√©n√©rale, donnent des r√©ponses tr√®s vagues: "c'est l'objet" avant le point "qui a √©t√© utilis√© pour appeler la m√©thode", "c'est le contexte dans lequel la fonction a √©t√© appel√©e", etc. ... <br><br>  En fait, la situation avec ce concept, qui est central pour EcmaScript, est un peu plus compliqu√©e.  Voyons cela dans l'ordre. <br><br>  Supposons que nous ayons un programme JavaScript dans lequel il existe des variables d√©clar√©es globalement;  fonctions globales;  fonctions locales (d√©clar√©es √† l'int√©rieur d'autres fonctions), fonctions renvoy√©es par les fonctions. <br><a name="habracut"></a><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> b = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = { <span class="hljs-attr"><span class="hljs-attr">a</span></span>: <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-attr"><span class="hljs-attr">b</span></span>: <span class="hljs-number"><span class="hljs-number">25</span></span>, } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fooBaz</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a + <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> test(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fooBar</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> a = <span class="hljs-number"><span class="hljs-number">40</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> b = <span class="hljs-number"><span class="hljs-number">50</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + b; } } fooBar()();</code> </pre> <br>  Lors du transfert du contr√¥le vers le code ex√©cutable, une entr√©e est effectu√©e dans le contexte d'ex√©cution.  Code ex√©cutable - il s'agit de tout code que nous ex√©cutons √† un moment donn√©, il peut s'agir d'un code global ou d'un code de n'importe quelle fonction. <br><br>  <b>Le contexte d'ex√©cution</b> est une abstraction qui typifie et d√©limite le code.  Du point de vue de cette abstraction, le code est divis√© en code global (tous scripts connect√©s, scripts en ligne) et code fonction (le code des fonctions imbriqu√©es n'appartient pas au contexte des fonctions parents). <br><br>  Il existe un troisi√®me type - EvalCode.  Dans cet article, nous le n√©gligeons. <br><br>  Logiquement, l'ensemble des contextes d'ex√©cution est une <b>pile</b> qui fonctionne sur le principe du Last-in-First-out (lifo).  Le bas de la pile est toujours le contexte global et le haut est l'ex√©cutable actuel.  Chaque fois qu'une fonction est appel√©e, une entr√©e est effectu√©e dans son contexte.  Lorsqu'une fonction se termine, son contexte se termine.  Les contextes d√©pens√©s sont supprim√©s de la pile s√©quentiellement et dans l'ordre inverse. <br><br>  Jetez un ≈ìil au code ci-dessus.  Nous avons un appel √† la fonction <b>fooBar</b> en code global.  Dans la fonction <b>fooBar,</b> nous <b>renvoyons</b> <b>une fonction anonyme</b> que nous appelons imm√©diatement.  Les modifications suivantes se produisent avec la pile: le <b>contexte global y</b> p√©n√®tre - lorsque <b>fooBar est</b> appel√© <b>,</b> son contexte p√©n√®tre dans la pile - le contexte <b>fooBar</b> se termine, retourne <b>une fonction anonyme</b> et est supprim√© de la pile - une <b>fonction anonyme</b> est appel√©e, son contexte p√©n√®tre dans la pile - une <b>fonction anonyme</b> remplit, renvoie une valeur et son contexte est supprim√© de la pile - √† la fin du script, le <b>contexte global</b> est supprim√© de la pile. <br><cut></cut><br>  Le contexte d'ex√©cution peut √™tre repr√©sent√© sous forme d'objet.  L'une des propri√©t√©s de cet objet sera l'environnement lexical (LO). <br><br>  <b>L'environnement lexical</b> contient: <br><br><ul><li>  toutes les d√©clarations de variables de contexte </li><li>  toutes les d√©clarations de fonction </li><li>  tous les param√®tres formels de la fonction (si nous parlons du contexte des fonctions) </li></ul><br>  Lors de la saisie du contexte d'ex√©cution, l'interpr√©teur analyse le contexte.  Toutes les d√©clarations de variables et les d√©clarations de fonctions remontent au d√©but du contexte.  Les variables sont cr√©√©es √©gales √† ind√©finies et les fonctions sont compl√®tement pr√™tes √† l'emploi. <br><br>  <b>c'est</b> aussi une propri√©t√© du contexte d'ex√©cution, mais pas du contexte lui-m√™me, comme r√©pondent certains intervieweurs novices!  <b>ceci est</b> d√©fini lors de la saisie du contexte et reste inchang√© jusqu'√† la fin de la dur√©e de vie du contexte (jusqu'√† ce que le contexte soit supprim√© de la pile). <br><br>  Dans le contexte d'ex√©cution global, <b>cela</b> est d√©termin√© par <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le mode strict</a></b> : lorsque le mode strict est d√©sactiv√©, il contient un objet global (dans le navigateur, il est mandat√© au niveau sup√©rieur dans l'objet fen√™tre), avec `` utiliser strict '', cela n'est pas d√©fini. <br><cut></cut><br>  <b>ceci</b> dans le contexte des fonctions - la question est beaucoup plus int√©ressante! <br>  cette fonction est d√©termin√©e par l'appelant et d√©pend de la syntaxe de l'appel.  Par exemple, comme nous le savons, il existe des m√©thodes qui permettent de corriger cela de mani√®re rigide lors de l'appel ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">appeler</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">appliquer</a> ) et une m√©thode qui vous permet de cr√©er un wrapper avec ¬´fix√© ceci¬ª ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bind</a> ).  Dans ces situations, nous le d√©clarons explicitement et sa d√©finition ne fait aucun doute. <br><br>  Avec un appel de fonction normal, la situation est beaucoup plus compliqu√©e! <br><br>  L'un des types int√©gr√©s EcmaScript, <b>ReferenceType</b> , nous aidera √† comprendre comment cela est appos√© dans les fonctions.  Il s'agit de l'un des types internes disponibles au niveau de la mise en ≈ìuvre.  Logiquement, il s'agit d'un objet avec deux propri√©t√©s de <b>base</b> (une r√©f√©rence √† un certain objet de base pour lequel un ReferenceType est renvoy√©), <b>propertyName</b> (une repr√©sentation sous forme de cha√Æne de l'identifiant de l'objet pour lequel un ReferenceType est renvoy√©). <br><br>  <b>ReferenceType est</b> retourn√© pour toutes les d√©clarations de variables, les d√©clarations de fonctions et les r√©f√©rences de propri√©t√© (c'est le cas qui nous int√©resse du point de vue de la compr√©hension). <br><br>  La r√®gle pour d√©finir <b>ceci</b> pour les fonctions appel√©es de la mani√®re habituelle: <br>  <i>Si le <b>ReferenceType se</b> trouve √† gauche des crochets d'activation de fonction, la <b>base de</b> ce <b>ReferenceType est</b> plac√©e dans <code>this</code> fonction.</i>  <i>Si un autre type se trouve √† gauche des crochets, il s'agit alors d'un objet global ou <code>undefined</code> (en fait <code>null</code> , mais comme null n'a pas de valeur sp√©cifique du point de vue d'ecmascript, il est converti en un objet global, dont une r√©f√©rence peut √™tre est √©gal √† <code>undefined</code> selon le mode strict).</i> <br><br>  Regardons un exemple: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">foo</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x; } } obj.foo();<span class="hljs-comment"><span class="hljs-comment">//  10 ..    ReferenceType  base     obj const test = obj.foo;//       test();//  0 ..  test()   .test(),..  base    ,       0.</span></span></code> </pre><br>  Je pense que la m√©thode de d√©finition est clairement illustr√©e.  Consid√©rons maintenant quelques cas moins √©vidents. <br><br><h4>  Expressions fonctionnelles </h4><br>  Revenons √† notre ReferenceType pendant une seconde.  Ce type a une m√©thode <b>GetValue</b> int√©gr√©e qui renvoie le vrai type de l'objet re√ßu via ReferenceType.  Dans la zone d'expression, GetValue se d√©clenche toujours. <br><br>  Un exemple: <br><br><pre> <code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>;<span class="hljs-comment"><span class="hljs-comment">// this     undefined    strict mode })()</span></span></code> </pre><br>  Cela est d√ª au fait que GetValue se d√©clenche toujours dans la zone d'expression.  GetValue renvoie un type Function, et √† gauche des crochets d'activation n'est pas un ReferenceType.  Rappelons notre r√®gle pour d√©terminer <b>ceci</b> : <i>si un autre type se trouve √† gauche des crochets, alors un objet global est plac√© dans <code>this</code> ou <code>undefined</code> (en fait <code>null</code> , mais puisque null n'a pas une certaine valeur du point de vue d'ecmascript, alors il est converti en objet global , le lien vers lequel peut √™tre √©gal √† ind√©fini selon le mode strict)</i> . <br><br>  Les zones d'expression sont: affectation (=), op√©rateurs ||  ou d'autres op√©rateurs logiques, op√©rateur ternaire, initialiseur de tableau, liste s√©par√©e par des virgules. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = { <span class="hljs-attr"><span class="hljs-attr">x</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">foo</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x; } } obj.foo(); <span class="hljs-comment"><span class="hljs-comment">//        //  ? (obj.foo)(); // ,    , GetValue   // ? (obj.foo = obj.foo)(); //        GetValue,     Fuction,   ReferenceType,   0   (   this) //  ||    ,    ..? (obj.foo || obj.foo)();// 0    ,     //  [obj.foo][0]();// 0    ,     // ..</span></span></code> </pre><br>  Situation identique dans les expressions fonctionnelles nomm√©es.  M√™me avec un appel r√©cursif √† cet objet global ou <code>undefined</code> <br><br><h4>  ces fonctions imbriqu√©es appel√©es dans le parent </h4><br>  Aussi une situation importante! <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.x; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> bar(); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> obj = {<span class="hljs-attr"><span class="hljs-attr">x</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>}; obj.test = foo; obj.test();<span class="hljs-comment"><span class="hljs-comment">// undefined</span></span></code> </pre><br>  En effet, l'appel √† <code>bar()</code> √©quivalent √† l'appel √† <code>LE_foo.bar</code> , et l'objet de l'environnement lexical est d√©fini comme tel. <br><br><h4>  Fonctions constructeur </h4><br>  Comme je l'ai √©crit ci-dessus: <blockquote>  cette fonction est d√©termin√©e par l'appelant et d√©pend de la syntaxe de l'appel. </blockquote><br>  Nous invoquons des fonctions constructeur en utilisant le nouveau mot-cl√©.  La particularit√© de cette m√©thode d'activation de fonction est que la m√©thode de fonction interne <i><b>[[construct]]</b></i> est appel√©e, qui effectue certaines op√©rations (le m√©canisme de cr√©ation d'entit√©s par les concepteurs sera discut√© dans le deuxi√®me ou le troisi√®me article sur la POO!) Et appelle la m√©thode interne <i><b>[[call]]</b></i> , qui d√©finit dans <b>cette</b> instance cr√©√©e de la fonction constructeur. <br><br><h3>  Cha√Æne de port√©e </h3><br>  La cha√Æne de port√©e est √©galement une propri√©t√© du contexte d'ex√©cution comme celui-ci.  Il s'agit d'une liste d'objets des environnements lexicaux du contexte actuel et de tous les contextes g√©n√©rateurs.  C'est dans cette cha√Æne que la recherche de variables se produit lors de la r√©solution des noms d'identifiants. <br><br>  Remarque: cela associe une fonction √† un contexte d'ex√©cution et ScopeChain √† des contextes enfants. <br><br>  La sp√©cification indique que ScopeChain est un tableau: <br><br><pre> <code class="javascript hljs"> SC = [LO, LO1, LO2,..., LOglobal];</code> </pre><br>  Cependant, dans certaines impl√©mentations, telles que JS, la cha√Æne de port√©e est impl√©ment√©e via des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">listes li√©es</a> . <br><br>  Afin de mieux comprendre ScopeChain, nous discuterons du cycle de vie des fonctions.  Il est divis√© entre la phase de cr√©ation et la phase d'ex√©cution. <br><br>  Lorsqu'une fonction est cr√©√©e, elle est affect√©e √† la propri√©t√© interne <i><b>[[SCOPE]]</b></i> . <br>  Dans <i><b>[[SCOPE]]</b></i> , une cha√Æne hi√©rarchique d'objets d'environnements lexicaux de contextes sup√©rieurs (g√©n√©rateurs) est enregistr√©e.  Cette propri√©t√© reste inchang√©e jusqu'√† ce que la fonction soit d√©truite par le garbage collector. <br><br>  Faites attention!  <i><b>[[SCOPE]]</b></i> , contrairement √† ScopeChain, est une propri√©t√© de la fonction elle-m√™me, pas de son contexte. <br><br>  Lorsqu'une fonction est appel√©e, son contexte d'ex√©cution est initialis√© et rempli.  Le contexte est appos√© avec ScopeChain = LO (de la fonction elle-m√™me) + [[SCOPE]] (cha√Æne hi√©rarchique de LO affectant les contextes). <br><br>  <b>R√©solution des noms d'identificateurs</b> - interrogation s√©quentielle des objets <b>LO</b> dans la cha√Æne <b>ScopeChain de</b> gauche √† droite.  La sortie est un ReferenceType dont la propri√©t√© de base pointe vers l'objet LO dans lequel l'identifiant a √©t√© trouv√©, et PropertyName sera une repr√©sentation sous forme de cha√Æne du nom de l'identifiant. <br><br>  C'est ainsi que la fermeture est dispos√©e sous le capot!  Une fermeture est essentiellement le r√©sultat d'une recherche dans ScopeChain pour toutes les variables dont les identifiants sont pr√©sents dans la fonction. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x; } (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">20</span></span>; foo();<span class="hljs-comment"><span class="hljs-comment">// 10 ..     &lt;b&gt;&lt;i&gt;[[SCOPE]]&lt;/i&gt;&lt;/b&gt; foo          })()</span></span></code> </pre><br>  L'exemple suivant illustre le cycle de vie <b><i>[[SCOPE]]</i></b> . <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> y = <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [x,y]; } } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> x = <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> bar = foo();<span class="hljs-comment"><span class="hljs-comment">//   ,   foo    bar();// [10,20] .. [[SCOPE]]    foo         </span></span></code> </pre><br>  Une exception importante est <b>la fonction constructeur</b> .  Pour ce type de fonction, [[SCOPE]] pointe toujours vers un objet global. <br><br>  N'oubliez pas non plus que si l'un des maillons de la cha√Æne ScopeChain poss√®de un prototype, la recherche sera √©galement effectu√©e dans le prototype. <br><br><h3>  Conclusion </h3><br>  Nous pr√©senterons les id√©es cl√©s de mani√®re th√©matique: <br><br><ul><li>  c'est la relation de l'entit√© avec le contexte d'ex√©cution </li><li>  ScopeChain est la relation d'une entit√© avec tous les contextes d'apparition </li><li>  ceci et ScopeChain sont des propri√©t√©s de contexte d'ex√©cution </li><li>  cette fonction est d√©termin√©e par l'appelant et d√©pend de la syntaxe de l'appel </li><li>  ScopeChain est l'environnement lexical du contexte actuel + [[Scope]] </li><li>  [[Scope]] - c'est une propri√©t√© de la fonction elle-m√™me, contient une cha√Æne hi√©rarchique d'environnements lexicaux de g√©n√©ration de contextes </li></ul><br>  J'esp√®re que l'article vous a √©t√© utile.  Jusqu'√† de futurs articles, amis! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468943/">https://habr.com/ru/post/fr468943/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468929/index.html">Le mini-manuel sur la configuration d'un hackintosh est aussi simple et indolore que possible</a></li>
<li><a href="../fr468931/index.html">Ex√©cutez systemd dans le conteneur</a></li>
<li><a href="../fr468933/index.html">√âpineux et tranchant, o√π que vous regardiez: le m√©canisme d'auto-aff√ªtage des dents des oursins</a></li>
<li><a href="../fr468935/index.html">Le condens√© des √©v√©nements pour les professionnels des RH dans le domaine des TI en octobre 2019</a></li>
<li><a href="../fr468937/index.html">Attaques par carte bancaire sans contact</a></li>
<li><a href="../fr468945/index.html">ITIL et ITSM sont une histoire de grande d√©ception. Y a-t-il un avantage? Combien cela co√ªte-t-il et qui exactement ¬´n'impl√©mente pas ITIL¬ª?</a></li>
<li><a href="../fr468951/index.html">Gros probl√®mes de configuration pour les petits appareils</a></li>
<li><a href="../fr468953/index.html">Le style de code comme norme de d√©veloppement</a></li>
<li><a href="../fr468955/index.html">La communication est une autre option √† distance configurable</a></li>
<li><a href="../fr468957/index.html">G√©n√©ration de donjons cycliques sur l'exemple d'Unxplored</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>