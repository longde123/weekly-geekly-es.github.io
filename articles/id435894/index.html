<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤟🏾 💪🏽 🐔 Kelas privat. Bersembunyi di php 👨‍🏫 📡 🏙️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di php, seperti di sebagian besar bahasa OOP lainnya, ada pengubah visibilitas. Ini adalah kata kunci publik, dilindungi, dan pribadi. Tetapi mereka b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kelas privat. Bersembunyi di php</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/435894/"><p> Di php, seperti di sebagian besar bahasa OOP lainnya, ada pengubah visibilitas.  Ini adalah kata kunci publik, dilindungi, dan pribadi.  Tetapi mereka berlaku secara eksklusif untuk properti, metode, atau konstanta.  Pengubah ini terkait erat dengan kemampuan untuk merangkum data.  Perlu dicatat bahwa dalam bahasa seperti java, C #, go ( <a href="">https://golang.org/doc/go1.4#internalpackages</a> ), ruby ​​( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://habr.com/post/419969/</a> ), crystal ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https : //crystal-lang.org/reference/syntax_and_semantics/visibility.html</a> ) dimungkinkan untuk membatasi ruang lingkup paket (paket) atau kelas \ tipe.  Dalam php tidak ada cara untuk membatasi ruang lingkup kelas - kelas yang terhubung dapat diakses dari kelas lain.  Namun, Anda dapat meniru fitur ini menggunakan beberapa trik. </p><a name="habracut"></a><br><p>  Mengapa persembunyian tingkat kelas mungkin diperlukan: </p><br><ul><li>  Kelas layanan (pembantu) perpustakaan - jangan membuang API perpustakaan dengan kelas internal yang tidak berarti. </li><li>  Enkapsulasi dengan penyembunyian objek internal "logika bisnis", misalnya, larangan generasi langsung objek dependen melewati kelas yang lebih umum. </li></ul><br><p>  Secara terpisah, kita dapat membedakan partisi kelas "besar" menjadi objek kecil.  Ini adalah praktik yang baik untuk membatasi kompleksitas (dan jumlah baris) metode dan kelas individu.  Jumlah baris di sini berlaku sebagai salah satu penanda bahwa metode kelas atau kelas itu sendiri mengambil tanggung jawab yang tidak perlu.  Saat refactoring metode publik, kami memindahkan sebagiannya ke metode private \ protected.  Tetapi ketika karena satu dan lain alasan kelas tumbuh dan kami memisahkan entitas yang terpisah darinya, kelas yang sangat pribadi \ dilindungi ini ditransfer ke kelas yang terpisah, sehingga kami secara tidak langsung membuka akses ke metode yang sebelumnya terbatas pada ruang lingkup satu kelas. </p><br><p>  Sekarang metode sebenarnya untuk meniru itu sendiri. </p><br><h3 id="na-urovne-soglasheniya-oformleniya-koda">  Pada tingkat perjanjian eksekusi kode </h3><br><p> Menggunakan komentar PHPDoc, Anda dapat menandai kelas, ciri atau antarmuka sebagai <code>internal</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://docs.phpdoc.org/references/phpdoc/tags/internal.html</a> ).  Namun, beberapa IDE (seperti PhpStorm) dapat memahami label tersebut. </p><br><h3 id="ispolzovat-runtime-informaciyu">  Gunakan informasi runtime </h3><br><p>  Saat runtime, Anda dapat memeriksa dari mana konstruktor kelas dipanggil.  Misalnya, melalui metode <code>debug_backtrace</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://php.net/manual/ru/function.debug-backtrace.php</a> ) atau gunakan fungsi Xdebug serupa untuk mengontrol kode di lingkungan dev \ test.  Contoh dari solusi formal ada di sini ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://coderwall.com/p/ixvnga/how-emulates-private-class-concept-in-php</a> ). </p><br><div class="spoiler">  <b class="spoiler_title">menggunakan debug_backtrace</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-comment"><span class="hljs-comment">/** * The private class */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PrivateClass</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * defines the only class able to instantiate the current one * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@var</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> $allowedConsumer = <span class="hljs-string"><span class="hljs-string">'AllowedPrivateClassConsumer'</span></span>; <span class="hljs-comment"><span class="hljs-comment">/** * constructor * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@throws</span></span></span><span class="hljs-comment"> Exception */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** * here comes the privacy filter, it could be extracted to a private method * or to a static method of another class with few adjustments */</span></span> $builder = debug_backtrace(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count($builder) &lt; <span class="hljs-number"><span class="hljs-number">2</span></span> || !<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($builder[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-string"><span class="hljs-string">'class'</span></span>]) || $builder[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-string"><span class="hljs-string">'class'</span></span>] !== <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;allowedConsumer) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Exception</span></span>(<span class="hljs-string"><span class="hljs-string">'Need to be instantiated by '</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;allowedConsumer); } } }</code> </pre> </div></div><br><h3 id="ispolzovat-anonimnye-klassy">  Gunakan kelas anonim </h3><br><p>  Fungsionalitas yang relatif baru di php adalah kelas anonim ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://php.net/manual/ru/language.oop5.anonymous.php</a> ).  Setelah menggambarkan kelas anonim di dalam metode yang dilindungi, kami berusaha menyembunyikannya.  Agar tidak membuat kekacauan definisi kelas di dalam suatu fungsi, Anda dapat menggambarkan kelas "pribadi" dalam file terpisah sebagai abstrak, dan sudah memperluasnya dalam definisi kelas anonim.  Contoh yang baik untuk menggunakan metode ini ada di tautan ini ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://markbakeruk.net/2018/06/25/using-php-anonymous-classes-as-package-private-classes/</a> ). </p><br><p>  Berdasarkan bahan yang ditemukan, jelas bahwa fungsionalitas dari kelas bersembunyi dalam beberapa cara dituntut (dan ada dalam banyak bahasa), tetapi praktik penggunaannya sangat terbatas, mungkin karena kurangnya deskripsi contoh dalam berbagai "praktik terbaik", koleksi template dan sumber serupa.  Yang, menurut saya, agak aneh, bahwa ada penekanan pada menyembunyikan metode internal dan sifat-sifat objek, tetapi hampir tidak ada yang memperhatikan fakta bahwa potongan-potongan kode logis yang lebih besar dalam bentuk kelas perpustakaan utilitas atau domain domain tetap berada dalam ruang visibilitas global. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id435894/">https://habr.com/ru/post/id435894/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id435882/index.html">Ulasan Xiaomi Mi Box S dan perbandingan kecil dengan Mi Box 3</a></li>
<li><a href="../id435884/index.html">Pencarian logam dan ... jaringan saraf</a></li>
<li><a href="../id435886/index.html">SpaceX menunjukkan prototipe Starship dan akan mengurangi 10% staf</a></li>
<li><a href="../id435890/index.html">Sisi gelap orang yang aktif</a></li>
<li><a href="../id435892/index.html">Intisari materi menarik untuk pengembang seluler # 281 (pada 7 - 13 Januari)</a></li>
<li><a href="../id435896/index.html">Menggunakan DiagnosticSource dalam .NET Core: Theory</a></li>
<li><a href="../id435898/index.html">Apa yang harus dipikirkan pada wawancara NALSD</a></li>
<li><a href="../id435900/index.html">Enkapsulasi itu</a></li>
<li><a href="../id435902/index.html">Anda tidak bisa hanya mengambil dan menulis PILIH jika vendor tidak mengizinkannya ... tetapi kami akan menulis</a></li>
<li><a href="../id435904/index.html">AI menerjemahkan aktivitas otak ke dalam ucapan</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>