<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>📌 💍 👨🏾‍🎨 Buat tombol dengan Efek Riak untuk XMars UI 🤜🏽 👩🏼‍🤝‍👨🏿 👩🏼‍🔬</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo semuanya, hari ini saya akan memberi tahu Anda bagaimana saya mengembangkan tombol untuk proyek XMars UI . Oh ya, itu agak sepele, tetapi ada ses...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Buat tombol dengan Efek Riak untuk XMars UI</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/484554/"><p><img src="https://habrastorage.org/webt/qb/fw/za/qbfwzabrpaxjd5t8yzbqojymgwg.jpeg"></p><br><p> Halo semuanya, hari ini saya akan memberi tahu Anda bagaimana saya mengembangkan tombol untuk proyek <a href="http://bit.ly/2RAsroW" rel="nofollow">XMars UI</a> .  Oh ya, itu agak sepele, tetapi ada sesuatu untuk diceritakan.  Saya akan menghilangkan detail yang terkait dengan menambahkan komponen baru ke proyek open source.  Secara lebih rinci saya akan berbicara tentang proyek dalam artikel terpisah. </p><br><h3 id="vvedenie">  Pendahuluan </h3><br><p>  <a href="http://bit.ly/2RbfuDn" rel="nofollow">XMars UI</a> adalah salah satu proyek open source baru saya.  Perpustakaan sederhana komponen UI untuk HTML / CSS dan Bereaksi.  Di masa depan saya berencana untuk mendukung Vue.  Sejauh ini, hanya ada tombol dan ikon :) </p><br><p>  Proyek ini lahir sebagai ide dalam rangka Kontes Telegram, yang intinya adalah mengembangkan versi web klien.  Bersama dengan seorang kolega, kami memutuskan, mengapa tidak mengambil bagian dalam hal ini.  Peran dibagikan sehingga saya memiliki tata letak, dan ketika seorang rekan memahami otorisasi, saya akan terhubung untuk menulis komponen.  Semuanya akan baik-baik saja, tetapi masuk ke Telegram tidak sesederhana itu.  Akibatnya, kami tidak mengirim apa-apa, tetapi saya mengejar banyak hal dan ternyata - sia-sia.  Tetapi seperti yang dikatakan Varlamov, proyek Anda sudah bernilai sesuatu, karena Anda menghabiskan waktu untuk itu.  Sulit untuk tidak setuju dengan ini, karena jika Anda mentransfer ke jam dan uang, maka hanya menyiapkan Webpack di awal proyek tidak lagi gratis.  Melihat semua aib ini, saya memutuskan untuk membuangnya ke open source.  Bootstrap tunggal apa yang digunakan?  Saya ingin kerangka UI saya sendiri untuk proyek saya yang lain. </p><a name="habracut"></a><br><h3 id="the-button">  Tombol </h3><br><p>  Tombol pada antarmuka mungkin merupakan elemen utama yang digunakan pengguna untuk berinteraksi dengan aplikasi.  Oleh karena itu, ini adalah salah satu komponen pertama dari kerangka / pustaka UI. </p><br><p>  Dalam desain Telegram, tidak ada banyak variasi tombol: </p><br><p><img src="https://habrastorage.org/webt/6h/g7/t6/6hg7t6irtlvoinmtwbgu7t1zezu.png"></p><br><p>  Saya menyoroti 3 utama (default, aksen, primer), bulat dengan ikon dan hijau.  Masih ada semi transparan, tetapi dikecewakan.  Untuk sebagian besar, mengembangkan <a href="http://bit.ly/2tr72a0" rel="nofollow">XMars UI</a> Saya mencoba untuk melanjutkan dari kebutuhan, saya belum tahu di mana tombol transparan akan diperlukan. </p><br><p> Pengguna perpustakaan harus merasa nyaman menggunakan kelas CSS.  Saya bukan penggemar sistem penamaan seperti BEM.  Saya suka cara Bootstrap memberi nama kelas.  Tetapi saya akan menyederhanakan sedikit lagi.  Alih-alih <code>.btn .btn-primary</code> , hanya <code>.btn .primary</code> . <code>.btn .primary</code> .  Dan dalam kasus komponen Bereaksi, akan terlihat seperti ini: </p><br><pre> <code class="javascript hljs">&lt;Button primary&gt;Hey&lt;<span class="hljs-regexp"><span class="hljs-regexp">/Button&gt;</span></span></code> </pre> <br><p>  Tombol yang sama tetapi efek riak: </p><br><pre> <code class="javascript hljs">&lt;Button primary ripple&gt;Hey&lt;<span class="hljs-regexp"><span class="hljs-regexp">/Button&gt;</span></span></code> </pre> <br><h3 id="html--css">  HTML / CSS </h3><br><p>  Perpustakaan UI tidak harus diikat ke kerangka UI apa pun.  Di masa depan saya berencana untuk meregangkan tata letak pada komponen <code>Vue</code> .  Mari kita mulai dengan HTML / CSS sederhana. </p><br><p>  Di bawah kap proyek <a href="http://bit.ly/364UK4g" rel="nofollow">Tailwindcss</a> , ini adalah kerangka kerja CSS pertama-utilitas, yaitu, kerangka kerja yang menyediakan Anda dengan utilitas, bukan komponen lengkap. </p><br><p><img src="https://habrastorage.org/webt/by/c_/rk/byc_rkdkrpk4-igmro0h4wnbkli.png"></p><br><p>  Selain Tailwindcss, PostCSS digunakan untuk <a href="https://github.com/postcss/postcss-mixins" rel="nofollow">mixin</a> , <a href="https://github.com/postcss/postcss-custom-properties" rel="nofollow">variabel,</a> dan <a href="https://github.com/postcss/postcss-nested" rel="nofollow">gaya bersarang.</a> </p><br><p>  Secara lebih rinci tentang penggunaan kerangka kerja seperti itu dan bagaimana proyek dikonfigurasikan, saya akan menceritakan dalam artikel terpisah.  Pada tahap ini, cukup kita memiliki toolkit yang sangat kuat dan menggunakan komponen yang digunakan secara penuh. </p><br><p>  <code>&lt;button&gt;</code> memiliki sejumlah gaya default yang harus kita hapus atau ubah. </p><br><p><img src="https://habrastorage.org/webt/rq/uw/ad/rquwad-pftcaam8vqie3bwhsmew.png"></p><br><p>  Dalam kasus Tailwindcss, tag tombol memiliki gaya ini: </p><br><p><img src="https://habrastorage.org/webt/ok/c9/2c/okc92cjctwgo5v8nf0qes8_dcvu.png"></p><br><p>  Semua yang tidak perlu secara default dihapus.  Anda dapat memahat apa yang Anda inginkan tanpa takut bahwa batas default akan keluar pada beberapa negara.  Tapi ini peringatan, <code>outline</code> standar masih perlu dipaku: </p><br><p><img src="https://habrastorage.org/webt/6d/7w/d7/6d7wd77y15peye0xdl8luutiscq.png"></p><br><p>  Tombol di <a href="http://bit.ly/30yxc6C" rel="nofollow">XMars UI</a> memiliki kelas <code>.btn</code> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn"</span></span></span><span class="hljs-tag">&gt;</span></span>Button<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Tambahkan kelas ini ke gaya kami: </p><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.btn</span></span> { @apply text-black text-base leading-snug; @apply py-3 px-4 border-none rounded-lg; @apply inline-block cursor-pointer no-underline; &amp;:focus { @apply outline-none; } }</code> </pre> <br><p>  Selain fakta bahwa Tailwindcs menyediakan kelas yang dapat Anda gunakan, itu menyediakan semacam <code>mixins</code> .  <code>@apply</code> bukan SCSS atau semacam plugin untuk PostCSS.  Ini adalah sintaks dari Tailwindcs sendiri.  Gaya yang diterapkan secara semantik jelas dari namanya.  <code>py-3</code> dan <code>px-4</code> saja dapat menimbulkan pertanyaan.  Yang pertama adalah padding sepanjang y, yaitu, secara vertikal, yaitu <code>padding-top: 0.75rem;</code> <code>padding-bottom: 0.75rem;</code>  .  Akibatnya, <code>px-4</code> secara horizontal adalah <code>padding-right: 1rem;</code>  , <code>padding-left: 1rem;</code>  . </p><br><p>  Desain yang disediakan Telegram untuk membuatnya ringan tidak terdokumentasi dengan baik dan hal-hal seperti tombol <code>border-radius</code> harus diambil dengan penggaris langsung dari gambar.  Pernah bertanya-tanya apa arti sebenarnya dari nilai dalam <code>border-radius</code> ? </p><br><p><img src="https://habrastorage.org/webt/t1/61/sp/t161sp5vhq_sw2hwtb56ibfylgs.gif"></p><br><p>  Ini secara harfiah jari-jari lingkaran yang dihasilkan di sudut.  Jika pertanian kolektif, maka Anda dapat mengubah penggaris seperti yang ditunjukkan pada gambar di atas.  Jadi saya menggunakan seleksi persegi panjang di Gimp. </p><br><p><img src="https://habrastorage.org/webt/9b/-x/bk/9b-xbkbj3mbmrmsgttlhpzx2nbc.png"></p><br><p>  <code>border-radius</code> tombol dalam desain adalah 10px, sayangnya tidak ada kelas seperti itu dari kotak di Tailwindcss, tetapi saya secara visual memiliki <code>rounded-lg</code> yang <code>8px</code> untuk ukuran font default (rem). </p><br><p>  Inilah yang terjadi saat ini, saya melukis tombol abu-abu sehingga ujung-ujungnya terlihat: </p><br><p><img src="https://habrastorage.org/webt/a2/tz/z-/a2tzz-khw1guvggfgjz0vjecfnm.png"></p><br><p>  Selanjutnya, kita perlu membuat efek pada <code>:hover</code> .  Kemudian para desainer dari Telegram memutuskan untuk memberi sedikit cahaya dan menunjukkan warna 0,08% dari <code>#707579</code> .  Saya melihat dua opsi, ambil saja warna dengan pipet atau lakukan seperti yang didokumentasikan.  Opsi pertama lebih sederhana, tetapi di masa depan itu bukan yang terbaik.  Faktanya adalah bahwa jika latar belakang berbeda dari putih, maka pada <code>:hover</code> kita akan mendapatkan warna tertentu, kehilangan "cahaya" dan transparansi tombol.  Untuk ini, lebih baik mengikuti dokumentasi dan meletakkan alpha <del>  laki-laki </del>  salurannya.  Ini dapat dilakukan dengan banyak cara, misalnya menggunakan fungsi warna SCSS.  Tetapi tidak ada SCSS dalam proyek ini, dan karena warna yang sama, saya tidak ingin menghubungkan plug-in apa pun ke PostCSS, kami akan membuat semuanya sangat sederhana.  Di Chrome, ada colopaker yang memungkinkan Anda untuk mengubah warna menjadi sistem yang berbeda, mendorong warna HEX <code>#707579</code> , menerjemahkannya ke <code>rgba</code> dan mengatur saluran alfa - 0,08%. </p><br><p><img src="https://habrastorage.org/webt/tx/oe/hv/txoehvpf_ams30-5kvkur8q-2bc.png"></p><br><p>  Voila!  Sesuatu dengan tajam memotret gambar saya: </p><br><p><img src="https://habrastorage.org/webt/9g/nc/7b/9gnc7bjgm-uljw_rwbxn8cve71c.png"></p><br><p>  Kami <code>rgba(112, 117, 121, 0.08)</code> - <code>rgba(112, 117, 121, 0.08)</code> . </p><br><p><img src="https://habrastorage.org/webt/vn/hc/kh/vnhckhj8plbr9_rmbvr0ug9eawm.png"><br>  (: hover) </p><br><p>  Lebih membosankan dan tanpa banyak usaha, saya menambahkan sisa negara: </p><br><pre> <code class="css hljs"> &amp;<span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:hover</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">var</span></span>(--grey04); } &amp;<span class="hljs-selector-class"><span class="hljs-selector-class">.accent</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">var</span></span>(--blue01); } &amp;<span class="hljs-selector-class"><span class="hljs-selector-class">.primary</span></span> { @apply text-white; <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">var</span></span>(--blue01); &amp;:hover { <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">var</span></span>(--blue02); } }</code> </pre> <br><h3 id="react-komponent">  Bereaksi komponen </h3><br><p>  Awalnya, tombol dibuat untuk kontes Telegram dan tidak mungkin untuk menggunakan kerangka kerja apa pun.  Saya harus menerapkan efek riak pada JS murni.  Saya benar-benar ingin itu tetap demikian, tetapi saat Anda melakukan proyek sendiri, Anda harus mengorbankan sesuatu. </p><br><p>  Komponen yang memerlukan beberapa jenis logika, seperti efek riak, akan diimplementasikan dan hanya tersedia sebagai komponen Bereaksi. </p><br><p>  Bungkus tombol dalam komponen Bereaksi tidak sulit: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { FunctionComponent } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface ButtonProps { } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Button: FunctionComponent&lt;ButtonProps&gt; = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">className</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"btn"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">props.children</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">button</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> Button;</code> </pre> <br><p>  Tombol ini akan ditampilkan dalam gaya yang ditentukan, tetapi sebenarnya itu tidak banyak berguna.  Kita perlu mengaktifkan pengguna untuk menyesuaikan tombol, menambahkan gaya khusus, menggantung penangan acara, dan sebagainya. </p><br><p>  Agar pengguna dapat mentransfer semua yang diperlukan, pertama-tama Anda perlu mengatasi Script, jika tidak, bahkan <code>onClick</code> tidak akan memungkinkan Anda untuk mentransfer secara normal.  <code>ButtonProps</code> sedikit mengedit antarmuka <code>ButtonProps</code> , kami memecahkan masalah: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface ButtonProps extends ButtonHTMLAttributes&lt;HTMLButtonElement&gt;</code> </pre> <br><p>  setelah itu kita dapat dengan aman melakukan penghancuran <code>props</code> : </p><br><pre> <code class="javascript hljs">&lt;button className=<span class="hljs-string"><span class="hljs-string">"btn"</span></span> {...props}&gt;props.children&lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt;</span></span></code> </pre> <br><p>  Penggunaan tombol yang serupa akan berlaku seperti yang diharapkan: </p><br><pre> <code class="javascript hljs">&lt;Button onClick={() =&gt; alert()}&gt;Hey&lt;<span class="hljs-regexp"><span class="hljs-regexp">/Button&gt;</span></span></code> </pre> <br><p><img src="https://habrastorage.org/webt/-_/aq/qb/-_aqqbmdkzkmdf2sr8lodd_wy-o.png"></p><br><p>  Selanjutnya, kami menambahkan gaya tombol dan kemampuan untuk mendaftarkan kelas kustom (tiba-tiba seseorang akan membutuhkan).  Paket npm <a href="https://www.npmjs.com/package/classnames" rel="nofollow">classnames</a> sangat cocok untuk tujuan ini. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface ButtonProps extends ButtonHTMLAttributes&lt;HTMLButtonElement&gt; { primary?: boolean, accent?: boolean, additionalClass?: string, } ... const classNames = classnames( <span class="hljs-string"><span class="hljs-string">'btn'</span></span>, { primary }, { accent }, additionalClass ); ... &lt;button className={classNames} {...props}&gt;props.children&lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt;</span></span></code> </pre> <br><p>  Kelas <code>btn</code> selalu disetel, tetapi <code>primary</code> dan <code>accent</code> hanya jika <code>true</code> .  Classnames menambahkan kelas jika memiliki nilai <code>true</code> logis, menggunakan singkatan ES6 kita mendapatkan entri sederhana <code>{ primary }</code> , bukan <code>{ primary: true }</code> . </p><br><p>  <code>additionalClass</code> adalah sebuah string, dan jika itu kosong atau tidak terdefinisi, itu tidak memainkan peran khusus bagi kami, hanya tidak ada yang akan ditambahkan ke elemen. </p><br><p>  Pada awalnya, saya menetapkan <code>props</code> sebagai berikut: </p><br><pre> <code class="javascript hljs">{...omit(props, [<span class="hljs-string"><span class="hljs-string">'additionalClass'</span></span>, <span class="hljs-string"><span class="hljs-string">'primary'</span></span>])}</code> </pre> <br><p>  Menghilangkan semua yang tidak berlaku untuk properti dari elemen tombol, tetapi ini tidak perlu karena Bereaksi tidak akan membuat terlalu banyak. </p><br><h3 id="ripple-effect">  Efek riak </h3><br><p><img src="https://habrastorage.org/webt/36/ys/8w/36ys8wseofyhctlp1cm5r5kiwqo.gif"></p><br><p>  Sebenarnya, ini terlihat seperti ini, tetapi diinginkan bahwa "gelombang" berbeda dari tempat klik. <br>  Ada banyak cara untuk membuat animasi seperti itu, itu seperti lelucon tentang kotak <a href="https://css-tricks.com/blue-box/" rel="nofollow">biru</a> . </p><br><p>  Tetapi google, melihat contoh-contoh pada codepen, menjadi jelas bahwa dalam kebanyakan kasus, "gelombang" diwujudkan melalui elemen anak, yang mengembang dan menghilang. </p><br><p>  Itu diposisikan di dalam tombol sesuai dengan koordinat klik.  Di <a href="http://bit.ly/2RbcVRD" rel="nofollow">XMars UI</a> , saat ini saya memutuskan untuk tidak menerapkan efek ini pada <code>onPress</code> seperti UI Material, tetapi saya berencana untuk <code>onPress</code> di masa mendatang.  Sejauh ini, hanya <code>onClick</code> . </p><br><p><img src="https://habrastorage.org/webt/dr/rr/wy/drrrwydtouv_xhq3fi6pyahyaye.png"></p><br><p>  Gambar di atas semuanya ajaib.  Klik menciptakan elemen tombol anak, diposisikan secara absolut, di tengah klik dan mengembang.  <code>overflow: hidden</code> properti <code>overflow: hidden</code> gelombang melampaui tombol.  Item harus dihapus di akhir animasi. </p><br><p>  Pertama, kami akan menentukan gaya di mana kami bisa, menggunakan Tailwindcss sebanyak mungkin: </p><br><pre> <code class="plaintext hljs">.with-ripple { @apply relative overflow-hidden; @keyframes ripple { to { @apply opacity-0; transform: scale(2.5); } } .ripple { @apply absolute; z-index: 1; border-radius: 50%; background-color: var(--grey04); transform: scale(0); animation: ripple 0.6s linear; } &amp;.primary { .ripple { background-color: var(--black02); } } }</code> </pre> <br><p>  Elemen yang bertanggung jawab atas efeknya akan diberi kelas <code>.ripple</code> . <code>border-radius: 50%;</code>  sama dengan lingkaran (fillet 50% pada sudut * 2), tombol memiliki posisi relatif, tombol <code>.ripple</code> memiliki posisi absolut.  Animasi ini sangat sederhana, peningkatan gelombang menjadi transparan dalam 0,6 detik.  Warna latar belakang sama dengan <code>:hover</code> dan melipat, dua warna dan tombol "gelombang" transparan memberi kita hasil yang diinginkan.  Pada tombol <code>.primary</code> biru, ini tidak begitu penting dan di sana Anda dapat menggunakan warna yang tidak transparan. </p><br><p>  Pada klik, Anda perlu membuat elemen "gelombang".  Oleh karena itu, kami membuat keadaan untuk bisnis ini dan menambahkan penangan klik yang sesuai ke tombol, tetapi sedemikian rupa sehingga tidak mengganggu kustom onClick. </p><br><pre> <code class="javascript hljs">... const [rippleElements, setRippleElements] = useState&lt;JSX.Element[]&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function">); ... </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">renderRippleElements</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rippleElements</span></span></span><span class="hljs-function">; } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;button className={classNames} {...props} onClick={(event</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (props.onClick) { props.onClick(event); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ripple) { onRippleClick(event); } }} &gt; {children} {renderRippleElements()} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt; );</span></span></code> </pre> <br><p>  <code>rippleElements</code> - array elemen JSX, fungsi render di sini mungkin tampak berlebihan, tetapi ini lebih merupakan masalah gaya dan penggabungan untuk masa depan. </p><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onRippleClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event: React.MouseEvent&lt;HTMLButtonElement, MouseEvent&gt;</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rect = event.currentTarget.getBoundingClientRect(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> d = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.max(event.currentTarget.clientWidth, event.currentTarget.clientHeight); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> left = event.clientX - rect.left - d/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-string"><span class="hljs-string">'px'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> top = event.clientY - rect.top - d/<span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-string"><span class="hljs-string">'px'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> rippleElement = newRippleElement(d, left, top); setRippleElements([...rippleElements, rippleElement]); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">newRippleElement</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d: number, left: string, top: string</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> key = uuid(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div key={key} className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ripple"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> style={{width: d, height: d, left, top}} onAnimationEnd={(</span></span></span><span class="hljs-function">) =&gt;</span></span> onAnimationEnd(key)} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); }</code> </pre> <br><p>  penangan <code>onRippleClick</code> yang menciptakan "gelombang".  Dengan mengklik tombol, kami mengetahui ukuran tombol yang digunakan untuk memposisikan lingkaran dengan benar, setelah itu semua yang diperlukan diteruskan ke <code>newRippleElement</code> yang pada gilirannya hanya menciptakan elemen <code>div</code> dengan kelas <code>ripple</code> , menciptakan gaya yang diperlukan untuk penentuan posisi. </p><br><p>  Dari hal-hal utama yang patut disorot <code>onAnimationEnd</code> .  Kami membutuhkan acara ini untuk menghapus DOM dari elemen yang sudah digunakan. </p><br><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onAnimationEnd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key: string</span></span></span><span class="hljs-function">) </span></span>{ setRippleElements(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rippleElements</span></span></span><span class="hljs-function"> =&gt;</span></span> rippleElements.filter(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">element</span></span></span><span class="hljs-function"> =&gt;</span></span> element.key !== key)); }</code> </pre> <br><p>  Sangat penting untuk tidak lupa, berikan <code>rippleElements</code> saat ini ke dalam argumen, jika tidak, Anda bisa mendapatkan array dengan nilai-nilai lama, dan semuanya tidak akan berfungsi sebagaimana dimaksud. </p><br><p>  Kode tombol lengkap: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> React, { FunctionComponent, ButtonHTMLAttributes, useState } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'react'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uuid <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'uuid/v4'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> classnames <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'classnames'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> interface ButtonProps extends ButtonHTMLAttributes&lt;HTMLButtonElement&gt; { primary?: boolean, accent?: boolean, circle?: boolean, ripple?: boolean, additionalClass?: string, } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Button: FunctionComponent&lt;ButtonProps&gt; = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> [rippleElements, setRippleElements] = useState&lt;JSX.Element[]&gt;<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> {</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">primary</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">accent</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">circle</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ripple</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">additionalClass</span></span></span><span class="hljs-function">, </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">children</span></span></span><span class="hljs-function">} = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">props</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">classNames</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">classnames</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'btn'</span></span></span></span><span class="hljs-function"><span class="hljs-params">, { primary }, { </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">'with-ripple'</span></span></span></span><span class="hljs-function"><span class="hljs-params">: ripple }, { circle }, { accent }, additionalClass </span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onAnimationEnd</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key: string</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">setRippleElements</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rippleElements =&gt; rippleElements.filter(element =&gt; element.key !== key</span></span></span><span class="hljs-function">)); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">onRippleClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event: React.MouseEvent&lt;HTMLButtonElement, MouseEvent&gt;</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">var</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rect</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">currentTarget</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">getBoundingClientRect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Math</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">max</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event.currentTarget.clientWidth, event.currentTarget.clientHeight</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">left</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">clientX</span></span></span><span class="hljs-function"> - </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rect</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">left</span></span></span><span class="hljs-function"> - </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d</span></span></span><span class="hljs-function">/2 + '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">px</span></span></span><span class="hljs-function">'; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">top</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">clientY</span></span></span><span class="hljs-function"> - </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rect</span></span></span><span class="hljs-function">.</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">top</span></span></span><span class="hljs-function"> - </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d</span></span></span><span class="hljs-function">/2 + '</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">px</span></span></span><span class="hljs-function">'; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">rippleElement</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newRippleElement</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d, left, top</span></span></span><span class="hljs-function">); </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">setRippleElements</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[...rippleElements, rippleElement]</span></span></span><span class="hljs-function">); } </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newRippleElement</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d: number, left: string, top: string</span></span></span><span class="hljs-function">) { </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">const</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">key</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">uuid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">; </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">return</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;div key={key} className=</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"ripple"</span></span></span></span><span class="hljs-function"><span class="hljs-params"> style={{width: d, height: d, left, top}} onAnimationEnd={(</span></span></span><span class="hljs-function">) =&gt;</span></span> onAnimationEnd(key)} &gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">renderRippleElements</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rippleElements; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> &lt;button className={classNames} {...props} onClick={(event</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (props.onClick) { props.onClick(event); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ripple) { onRippleClick(event); } }} &gt; {children} {renderRippleElements()} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/button&gt; ); } export default Button;</span></span></code> </pre> <br><p>  Hasil akhirnya dapat dilaporkan di <a href="https://ui.xmars.io/docs/components/buttons" rel="nofollow">sini.</a> </p><br><h3 id="zaklyuchenie">  Kesimpulan </h3><br><p>  Cukup banyak yang dihilangkan, misalnya, bagaimana proyek itu diatur, bagaimana dokumentasi ditulis, tes untuk komponen baru dalam proyek.  Saya akan mencoba untuk membahas topik-topik ini dengan publikasi terpisah. </p><br><p>  <a href="http://bit.ly/36dT1JM" rel="nofollow">Repositori XMars UI Github</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id484554/">https://habr.com/ru/post/id484554/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id484544/index.html">Beberapa metode objek Konsol yang menarik</a></li>
<li><a href="../id484546/index.html">10 pertanyaan wawancara TypeScript yang populer (dengan jawaban singkat)</a></li>
<li><a href="../id484548/index.html">Bagaimana Citrix NetScaler CVE-2019-19781 Kerentanan Kritis Terkena Masalah Industri TI Tersembunyi</a></li>
<li><a href="../id484550/index.html">Apakah holacracy diperlukan dalam perusahaan itu: pro dan kontra</a></li>
<li><a href="../id484552/index.html">Membaca untuk geek: 10 bahan tentang teknologi audio - bagaimana trek musik, rekaman HD dan suara 8D diatur</a></li>
<li><a href="../id484556/index.html">Jadi kapan masih bisa digunakan! Penting?</a></li>
<li><a href="../id484564/index.html">Kami menulis driver untuk laptop untuk bersenang-senang dan untung, atau bagaimana berkomitmen untuk kernel bahkan jika Anda bodoh</a></li>
<li><a href="../id484568/index.html">Hack The Box - Walkthrough Player. Eksploitasi FFmpeg, JWT dan berbagai daftar web</a></li>
<li><a href="../id484572/index.html">Pendekatan manajemen waktu / tugas saya menggunakan VSCode</a></li>
<li><a href="../id484574/index.html">Tidak ada kutu! Vektor Penyakit Tanaman vs Lyme</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>