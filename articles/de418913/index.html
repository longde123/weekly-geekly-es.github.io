<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚òÑÔ∏è üë®üèΩ‚Äç‚úàÔ∏è üßí UE4 | Inventar f√ºr Multiplayer # 1 | Data Warehouse auf DataAsset üöê üõéÔ∏è ü§¥üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Liste der Artikel 

 UE4 | Inventar f√ºr Multiplayer # 1 | Data Warehouse auf DataAsset 
 UE4 | Inventar f√ºr Multiplayer # 2 | Verbinden Sie Blueprint ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>UE4 | Inventar f√ºr Multiplayer # 1 | Data Warehouse auf DataAsset</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/418913/"><div class="spoiler">  <b class="spoiler_title">Liste der Artikel</b> <div class="spoiler_text"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UE4 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inventar f√ºr Multiplayer # 1 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Data Warehouse auf DataAsset</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UE4 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inventar f√ºr Multiplayer # 2 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verbinden Sie Blueprint mit C ++</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UE4 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Inventar f√ºr Multiplayer # 3 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Interaktionsstruktur</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UE4 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ausr√ºstung f√ºr den Mehrspielermodus # 4 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Erstellen und Verbinden eines Containers</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">UE4 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ausr√ºstung f√ºr den Mehrspielermodus # 5 |</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Informations√ºbertragung zwischen Server und Client</a> </p></div></div><br><hr><br><p><img src="https://habrastorage.org/webt/_s/la/0x/_sla0x2mr61e4wocmt62pmtstj0.png" alt="Datenasset" align="left">  In diesem Artikel werde ich versuchen, die Bedeutung und Methodik der Erstellung von <strong><em>DataAsset</em></strong> als Repository f√ºr verschiedene Arten von Daten <strong><em>aufzuzeigen.</em></strong> In unserem Fall handelt es sich um eine Bibliothek f√ºr <strong><em>Akteure</em></strong> und deren Parameter. </p><br><hr><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Eine kleine Einf√ºhrung zum √úberspringen</b> <div class="spoiler_text"><p>  Als ich mich vor ungef√§hr 2 Jahren entschied, ein Spiel zu erstellen, half es mir, dass ich versehentlich auf Informationen √ºber <strong>Unreal Engine 4 stie√ü</strong> und las, wie cool und einfach es ist.  Tats√§chlich ist es f√ºr eine Person, die nicht wei√ü, wie man Code schreibt <em>(eine Programmiersprache spielt in diesem Zusammenhang keine Rolle)</em> , sehr schwierig, etwas zu erstellen, das komplizierter ist als eine kleine Modifikation eines Standardsatzes von Werkst√ºcken aus der Engine.  Daher entwickelte sich der anf√§ngliche Wunsch, ein Super-Mega-Spiel mit dem wachsenden Wissen √ºber die Realit√§t dieses Projekts zu entwickeln, allm√§hlich zu einem Hobby.  Alle Ebenen der Spieleentwicklung, von der 3D-Modellierung und -Animation bis zum Schreiben von Code, f√ºr eine Person zu erweitern, scheint ein wenig machbares Unterfangen zu sein.  Dies ist jedoch ein gutes Training f√ºr das Gehirn. </p><br><p>  Warum hast du dich entschieden etwas zu schreiben? .. Wahrscheinlich deswegen.  dass die vorgestellten Handb√ºcher entweder sehr oberfl√§chliches Wissen vermitteln (und es gibt die meisten von ihnen) oder sogar f√ºr einen sehr professionellen und nur allgemeine Anweisungen enthalten. </p></div></div><br><p>  Es ist fast immer besser, von vorne zu beginnen.  Ich kann nicht sagen, dass ich das immer mache, aber ich werde versuchen, so konsequent wie m√∂glich zu sagen. </p><br><p>  Nat√ºrlich ist es am besten, mit der Struktur zu beginnen, aber leider ist es bei einer geschlossenen Box mit Werkzeugen sehr schwierig zu verstehen, was genau mit ihrer Hilfe gebaut werden kann.  √ñffnen wir also diese Box und sehen, was sich darin befindet. </p><br><hr><br><p>  Die erste zu beantwortende Frage.  Warum <strong><em>DataAsset</em></strong> ? </p><br><ol><li>  Sehr oft k√∂nnen Sie in Artikeln und Tutorials die Verwendung von <strong><em>DataTable sehen</em></strong> .  Warum ist das so schlimm?  Wenn Sie eine Adresse f√ºr eine bestimmte <strong><em>Blaupause</em></strong> speichern, m√ºssen Sie diese Adresse beim Umbenennen oder Verschieben in einen anderen Ordner manuell √§ndern.  Einverstanden - unangenehm?  Mit <strong><em>DataAsset</em></strong> wird dies nicht passieren.  Alle Mitteilungen werden automatisch aktualisiert.  Wenn Sie in den kommenden Jahren absolut sicher sind, dass Ihr Projekt strukturiert ist, k√∂nnen Sie nat√ºrlich Tabellen verwenden. </li><li>  Der zweite unbestreitbare Vorteil ist die F√§higkeit, komplexe Datentypen wie Strukturen ( <strong><em>Struct</em></strong> ) zu speichern. </li></ol><br><p>  Nun ein wenig zu den relativen Nachteilen.  Tats√§chlich sehe ich nur einen.  Dies ist die Notwendigkeit, <em>C ++ - Code</em> zu schreiben. </p><br><p>  Wenn Sie bereits verstehen, dass Sie ohne die Arbeit mit dem Code nichts <em>Episches</em> tun werden, ist dies kein Nachteil, sondern eine Funktion. </p><br><p>  Es sollte beachtet werden, dass es eine Problemumgehung gibt - die Verwendung von <strong><em>Actor</em></strong> als solches Repository.  Eine solche Anwendung scheint jedoch die letzte Entschuldigung daf√ºr zu sein, dass sie C ++ nicht lernen m√∂chte, und birgt das Potenzial, in Zukunft in eine Sackgasse zu geraten. <br>  Wenn Sie davon √ºberzeugt sind, dass alles, was Sie f√ºr Ihr Projekt ben√∂tigen, mit <strong><em>Blueprint</em></strong> erledigt werden kann, verwenden Sie die Tabellen. </p><br><hr><br><p>  <strong><em>Nachdem</em></strong> Sie bereits geglaubt haben, dass <strong><em>DataAsset</em></strong> gut ist, √ºberlegen Sie, wie Sie es f√ºr Ihr Projekt erstellen k√∂nnen. </p><br><div class="spoiler">  <b class="spoiler_title">F√ºr diejenigen, die noch ganz "nicht im Tank" sind</b> <div class="spoiler_text"><blockquote>  Es gibt eine sehr detaillierte Beschreibung der Schritte und mit Bildern im russischsprachigen Forum, das <strong>UE4</strong> gewidmet <strong>ist</strong> .  <em>Google</em> einfach <em>"UE4 DataAsset" f√ºr</em> .  Er hat die Grundlagen dieses Handbuchs vor etwa einem Jahr beherrscht. </blockquote></div></div><br><p>  Erstellen Sie zun√§chst eine <em>C ++ - Klasse</em> wie <em>Child</em> aus <strong><em>UDataAsset</em></strong> . <br>  (Der gesamte folgende Code stammt aus meinem ungeborenen Projekt. Benennen Sie die Namen einfach um, wie Sie m√∂chten.) </p><br><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// Copyright 2018 Dreampax Games, Inc. All Rights Reserved. #pragma once /* Includes from Engine */ #include "Engine/DataAsset.h" #include "Engine/Texture2D.h" #include "GameplayTagContainer.h" /* Includes from Dreampax */ //no includes #include "DreampaxItemsDataAsset.generated.h" UCLASS(BlueprintType) class DREAMPAX_API UDreampaxItemsDataAsset : public UDataAsset { GENERATED_BODY() }</span></span></code> </pre> <br><p>  Auf der Grundlage dieser Klasse k√∂nnen Sie <strong><em>Blueprint</em></strong> sicher erstellen, aber es ist noch zu fr√ºh, um dies zu tun. Bisher ist es nur ein Dummy.  Beachten Sie jedoch, dass bereits Einschl√ºsse f√ºr Texturen und Namen vorgenommen wurden. </p><br><hr><br><p>  Ab diesem Moment beginnen Sie mit der Erstellung der Struktur Ihres Repositorys.  Es wird viele Male wiederholt, daher empfehle ich dringend, Ihren Speicher nicht sofort zu f√ºllen.  Drei bis f√ºnf Elemente, in unserem Fall Inventargegenst√§nde, reichen f√ºr Tests aus.  Manchmal kann Ihr <strong><em>Blueprint</em></strong> nach der Kompilierung leer sein, was √§u√üerst unangenehm ist, wenn Sie bereits ein Dutzend oder zwei Positionen besetzt haben. </p><br><p>  Sie k√∂nnen eine Struktur direkt in der Header-Datei erstellen, weil  In diesem Fall ist es unwahrscheinlich, dass es an anderer Stelle angewendet wird.  Normalerweise ziehe ich es vor, es als separate Header-Datei <em>‚ÄûSrtuctName.h‚Äú zu erstellen</em> und bei Bedarf bei Bedarf zu verbinden. </p><br><div class="spoiler">  <b class="spoiler_title">In meinem Fall sieht es so aus</b> <div class="spoiler_text"><pre> <code class="cpp hljs">USTRUCT(BlueprintType) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FItemsDatabase</span></span></span><span class="hljs-class"> {</span></span> GENERATED_USTRUCT_BODY() <span class="hljs-comment"><span class="hljs-comment">/* Storage for any float constant data */</span></span> UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"ItemsDatabase"</span></span>) TMap&lt;FGameplayTag, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span>&gt; ItemData; <span class="hljs-comment"><span class="hljs-comment">/* Gameplay tag container to store the properties */</span></span> UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"ItemsDatabase"</span></span>) FGameplayTagContainer ItemPropertyTags; <span class="hljs-comment"><span class="hljs-comment">/* Texture for showing in the inventory */</span></span> UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"ItemsDatabase"</span></span>) UTexture2D* IconTexture; <span class="hljs-comment"><span class="hljs-comment">/* The class put on the Mesh on the character */</span></span> UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"ItemsDatabase"</span></span>) TSubclassOf&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ADreampaxOutfitActor</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemOutfitClass</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">/* The class to spawn the Mesh in the level then it is dropped */</span></span> UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"ItemsDatabase"</span></span>) TSubclassOf&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ADreampaxPickupActor</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ItemPickupClass</span></span></span><span class="hljs-class">;</span></span> <span class="hljs-comment"><span class="hljs-comment">//TODO internal call functions };</span></span></code> </pre> <br><p>  <em>Seien Sie Konten bei</em> <strong><em>TMap</em></strong> <em>.</em>  <em>Nicht repliziert!</em>  <em>In diesem Fall spielt es keine Rolle.</em> </p></div></div><br><p>  Bitte beachten Sie, dass ich <strong><em>FName</em></strong> nicht verwende.  Nach modernen Trends wird die Verwendung von <strong><em>FGameplayTag</em></strong> als korrekter angesehen, weil  Reduziert das Fehlerrisiko erheblich und bietet mehrere Vorteile, die sich sp√§ter als n√ºtzlich erweisen werden. </p><br><div class="spoiler">  <b class="spoiler_title">GameplayTag im Editor</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/jl/1p/20/jl1p20bzjqgw5p3nowvlnrejc2m.png" alt="Gameplaytag"></div></div></div><br><div class="spoiler">  <b class="spoiler_title">DataTable f√ºr GameplayTag aus Excel exportiert</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dw/pc/mr/dwpcmrmd11j4wba_uby_3eytaa8.png" alt="Datentabelle"></div></div></div><br><p>  Es wird auch <strong>empfohlen,</strong> Funktionen zum Aufrufen von Variablen in der Struktur <strong>zu definieren</strong> , z. B. <strong>GetSomething ()</strong> .  Anscheinend muss ich noch an meiner Erziehung arbeiten, da sie sich in dieser Datenbank befindet und ich noch keinen solchen Anruf get√§tigt habe. </p><br><div class="spoiler">  <b class="spoiler_title">Hier erfahren Sie, wie Sie eine andere Datenbank als Beispiel verwenden k√∂nnen.</b> <div class="spoiler_text"><pre> <code class="cpp hljs">USTRUCT(BlueprintType) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FBlocksDatabase</span></span></span><span class="hljs-class"> {</span></span> GENERATED_USTRUCT_BODY() <span class="hljs-comment"><span class="hljs-comment">/* The class put on the Mesh for the building block */</span></span> UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"BlocksDatabase"</span></span>) TSubclassOf&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ADreampaxBuildingBlock</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BuildingBlockClass</span></span></span><span class="hljs-class">;</span></span> UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"BlocksDatabase"</span></span>) FVector DefaultSize; UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"BlocksDatabase"</span></span>) FVector SizeLimits; UPROPERTY(EditDefaultsOnly, Category = <span class="hljs-string"><span class="hljs-string">"BlocksDatabase"</span></span>) TArray&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UMaterialInterface</span></span></span><span class="hljs-class"> *&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BlockMaterials</span></span></span><span class="hljs-class">;</span></span> FORCEINLINE TSubclassOf&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ADreampaxBuildingBlock</span></span></span><span class="hljs-class">&gt; * </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GetBuildingBlockClass</span></span></span><span class="hljs-class">() {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;BuildingBlockClass; } <span class="hljs-function"><span class="hljs-function">FORCEINLINE FVector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetDefaultSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DefaultSize; } <span class="hljs-function"><span class="hljs-function">FORCEINLINE FVector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSizeLimits</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SizeLimits; } FORCEINLINE TArray&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UMaterialInterface</span></span></span><span class="hljs-class"> *&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GetBlockMaterials</span></span></span><span class="hljs-class">() {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> BlockMaterials; } };</code> </pre> </div></div><br><p>  Und der wichtigste Punkt ist die Datenbankdeklaration: </p><br><pre> <code class="cpp hljs">UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = <span class="hljs-string"><span class="hljs-string">"ItemsDatabase"</span></span>) TMap&lt;FGameplayTag, FItemsDatabase&gt; ItemsDataBase;</code> </pre> <br><p>  Jetzt k√∂nnen Sie unseren <strong><em>Blueprint</em></strong> bereits erstellen und ausf√ºllen. </p><br><div class="spoiler">  <b class="spoiler_title">Beispiel f√ºr eine DataAsset-F√ºllung</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/webt/8q/fm/ke/8qfmkepu_ehz2ptdnbwbbwzdtoq.png" alt="Beispiel f√ºr eine DataAsset-F√ºllung"></div></div></div><br><p>  Zuvor werden wir jedoch einige weitere Aufruffunktionen schreiben, um Daten aus der Datenbank empfangen zu k√∂nnen. </p><br><div class="spoiler">  <b class="spoiler_title">DreampaxItemsDataAsset.h</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// Copyright 2018 Dreampax Games, Inc. All Rights Reserved. #pragma once /* Includes from Engine */ #include "Engine/DataAsset.h" #include "Engine/Texture2D.h" #include "GameplayTagContainer.h" /* Includes from Dreampax */ //no includes #include "DreampaxItemsDataAsset.generated.h" USTRUCT(BlueprintType) struct FItemsDatabase { GENERATED_USTRUCT_BODY() /* Storage for any float constant data */ UPROPERTY(EditDefaultsOnly, Category = "ItemsDatabase") TMap&lt;FGameplayTag, float&gt; ItemData; /* Gameplay tag container to store the properties */ UPROPERTY(EditDefaultsOnly, Category = "ItemsDatabase") FGameplayTagContainer ItemPropertyTags; /* Texture for showing in the inventory */ UPROPERTY(EditDefaultsOnly, Category = "ItemsDatabase") UTexture2D* IconTexture; /* The class put on the Mesh on the character */ UPROPERTY(EditDefaultsOnly, Category = "ItemsDatabase") TSubclassOf&lt;class ADreampaxOutfitActor&gt; ItemOutfitClass; /* The class to spawn the Mesh in the level then it is dropped */ UPROPERTY(EditDefaultsOnly, Category = "ItemsDatabase") TSubclassOf&lt;class ADreampaxPickupActor&gt; ItemPickupClass; //TODO internal call functions }; UCLASS(BlueprintType) class DREAMPAX_API UDreampaxItemsDataAsset : public UDataAsset { GENERATED_BODY() protected: /* This GameplayTag is used to find a Max size of the stack for the Item. This tag can be missed in the ItemData */ UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "ItemsDatabase") FGameplayTag DefaultGameplayTagForMaxSizeOfStack; /* This is the main Database for all Items. It contains constant common variables */ UPROPERTY(EditDefaultsOnly, BlueprintReadWrite, Category = "ItemsDatabase") TMap&lt;FGameplayTag, FItemsDatabase&gt; ItemsDataBase; public: FORCEINLINE TMap&lt;FGameplayTag, float&gt; * GetItemData(const FGameplayTag &amp;ItemNameTag); FORCEINLINE FGameplayTagContainer * GetItemPropertyTags(const FGameplayTag &amp;ItemNameTag); /* Used in the widget */ UFUNCTION(BlueprintCallable, Category = "ItemDatabase") FORCEINLINE UTexture2D * GetItemIconTexture(const FGameplayTag &amp; ItemNameTag) const; FORCEINLINE TSubclassOf&lt;class ADreampaxOutfitActor&gt; * GetItemOutfitClass(const FGameplayTag &amp; ItemNameTag); FORCEINLINE TSubclassOf&lt;class ADreampaxPickupActor&gt; * GetItemPickupClass(const FGameplayTag &amp; ItemNameTag); int GetItemMaxStackSize(const FGameplayTag &amp; ItemNameTag); FORCEINLINE bool ItemIsFound(const FGameplayTag &amp; ItemNameTag) const; };</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">DreampaxItemsDataAsset.pp</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/// Copyright 2018 Dreampax Games, Inc. All Rights Reserved. #include "DreampaxItemsDataAsset.h" /* Includes from Engine */ // no includes /* Includes from Dreampax */ // no includes TMap&lt;FGameplayTag, float&gt;* UDreampaxItemsDataAsset::GetItemData(const FGameplayTag &amp; ItemNameTag) { return &amp; ItemsDataBase.Find(ItemNameTag)-&gt;ItemData; } FGameplayTagContainer * UDreampaxItemsDataAsset::GetItemPropertyTags(const FGameplayTag &amp; ItemNameTag) { return &amp; ItemsDataBase.Find(ItemNameTag)-&gt;ItemPropertyTags; } UTexture2D* UDreampaxItemsDataAsset::GetItemIconTexture(const FGameplayTag &amp;ItemNameTag) const { if (ItemNameTag.IsValid()) { return ItemsDataBase.Find(ItemNameTag)-&gt;IconTexture; } return nullptr; } TSubclassOf&lt;class ADreampaxOutfitActor&gt;* UDreampaxItemsDataAsset::GetItemOutfitClass(const FGameplayTag &amp;ItemNameTag) { return &amp; ItemsDataBase.Find(ItemNameTag)-&gt;ItemOutfitClass; } TSubclassOf&lt;class ADreampaxPickupActor&gt;* UDreampaxItemsDataAsset::GetItemPickupClass(const FGameplayTag &amp;ItemNameTag) { return &amp; ItemsDataBase.Find(ItemNameTag)-&gt;ItemPickupClass; } int UDreampaxItemsDataAsset::GetItemMaxStackSize(const FGameplayTag &amp; ItemNameTag) { // if DefaultGameplayTagForMaxSizeOfStack is missed return 1 for all items if (!DefaultGameplayTagForMaxSizeOfStack.IsValid()) { return 1; } int MaxStackSize = floor(GetItemData(ItemNameTag)-&gt;FindRef(DefaultGameplayTagForMaxSizeOfStack)); if (MaxStackSize &gt; 0) { return MaxStackSize; } // if Tag for MaxStackSize is "0" return 1 return 1; } bool UDreampaxItemsDataAsset::ItemIsFound(const FGameplayTag &amp; ItemNameTag) const { if (ItemsDataBase.Find(ItemNameTag)) { return true; } return false; }</span></span></code> </pre> </div></div><br><p>  Im Mehrspielermodus gibt es noch nichts.  Dies ist jedoch der erste Schritt in die richtige Richtung. </p><br><p>  Im <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">n√§chsten Artikel werde</a> ich √ºber die Methoden zum Verbinden von <strong><em>DataAsset</em></strong> (Ja und jedem <strong><em>Blueprint</em></strong> ) zum Lesen von Daten in C ++ sprechen und zeigen, welche am korrektesten ist. </p><br><p>  Wenn Sie Fragen oder Anregungen haben, um einen Aspekt detaillierter offenzulegen, schreiben Sie bitte in die Kommentare. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de418913/">https://habr.com/ru/post/de418913/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de418901/index.html">Die Russen gewannen die Mehrheit der Goldmedaillen bei der Europ√§ischen Informatikolympiade eJOI 2018</a></li>
<li><a href="../de418903/index.html">Wissenschaftler: Es gibt nicht genug CO‚ÇÇ auf dem Mars, um die Atmosph√§re zu erw√§rmen. Polexplosion wird nicht helfen</a></li>
<li><a href="../de418907/index.html">So bringen Sie Zabbix bei, Problembenachrichtigungen direkt an den Desktop zu senden</a></li>
<li><a href="../de418909/index.html">Python f√ºhrt: Wer und warum verwendet es</a></li>
<li><a href="../de418911/index.html">[DotNetBook] Span: Neuer .NET-Datentyp</a></li>
<li><a href="../de418915/index.html">Ausgleich des Datenverkehrs zwischen Webservern mithilfe von IP CEF auf Netzwerkger√§ten</a></li>
<li><a href="../de418917/index.html">Sicherheit beginnt mit einem Heimrouter</a></li>
<li><a href="../de418919/index.html">√úber das berufliche Wachstum des Designers und die Arbeit mit Stress. Und wie man in den schwierigsten Zeiten Kraft findet</a></li>
<li><a href="../de418921/index.html">4 Bibliotheken erleichtern einem React-Entwickler das Leben</a></li>
<li><a href="../de418923/index.html">PWA ist gerecht</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>