<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🥉 🌴 🧛🏿 云移动测试平台 ☄️ 🌮 👶🏾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="现在到了我们的测试需求在测试仪的桌面上变得拥挤的时候了。 灵魂向云问。 不完全是 不完全是 



 我们的目标 


 （赶紧阅读，您可以转到下一节） 


 我们正在开发面向国外市场的金融应用程序，该应用程序有不同的格式：用于桌面浏览器（用于Google Chrome的网站和扩展程序），用于移动...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>云移动测试平台</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/464433/"><p> 现在到了我们的测试需求在测试仪的桌面上变得拥挤的时候了。 灵魂向云问。 不完全是 不完全是 </p><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/webt/2o/7s/ww/2o7swwlml3ipcdpgc8qzmkyfdja.jpeg"></div><a name="habracut"></a><br><h1> 我们的目标 </h1><br><p>  <i>（赶紧阅读，您可以转到下一节）</i> </p><br><p> 我们正在开发面向国外市场的金融应用程序，该应用程序有不同的格式：用于桌面浏览器（用于Google Chrome的网站和扩展程序），用于移动浏览器以及用于电话的混合应用程序。 由于应用程序的特殊性，我们特别注意在各种配置和设备上测试应用程序。 对于我们来说，应用程序的稳定和安全运行对于我们客户的桌面浏览器及其任何设备都非常重要。 </p><br><p> 找到一个用于测试的基于云的设备场的原因是，工作形式从办公室更改为完全远程和分布式（在城市和国家之间）。 也就是说，如果更早地进行测试，我们可以一堆（字面意义上）收集不同的设备，并同时在一个表中手动测试下一个组件，那么现在就不可能做到这一点。 此外，随着功能的增长，为了减少人工工作，我们将重要测试的回归集自动化，这意味着组装后我们需要能够在所需的配置和设备上调用测试，并且最好在组装滚动到暂存阶段进行。 </p><br><p> 在这种情况下，最简单，最明显的解决方案是在我们的DevOps管道中使用Android模拟器和iOS设备模拟器。 但是，由于在开发人员的工作计算机上相对容易实现，因此在云中使用变得困难而昂贵。 为了使同一Android模拟器快速运行，需要具有HAXVM支持的x86服务器，而对于iOS模拟器，则仅需要具有xcode的MacOS设备。 但是，不幸的是，即使解决了这个问题，问题仍然存在于仿真器和真实设备上的软件行为之间。 例如，在第二个版本中，我们会在三星设备上捕获无法在模拟器上播放的奇怪错误。 好吧，当然，还有罕见的异国情调的“中国”“愉悦”，它在开发阶段我也想捕捉到一些独特的错误。 </p><br><p> 结果，我们了解了使用移动设备云服务器场的必要性，我们可以在该服务器场上快速运行测试，并在必要时手动进行调试。 而且我们的整个团队都可以从世界上任何地方访问（即使旅行，我们也喜欢工作）。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tk/mv/-3/tkmv-3efjgaskkz1tbveeo0rh-4.jpeg"></div><br><p> 我们的测试是用Python 3.7编写的（以后将很重要），因为堆栈使用的是tox + pytest + Selenium + Appium，当然还有一小套有用的python库。 我们肯定会在Windows和MacOS上使用Edge，Firefox，Chrome，Safari浏览器以及带有浏览器和应用程序的Android和iOS设备上的计算机进行测试。 对于每个设备，我们没有很多测试（少于一千个），但是在设备上的单个线程中进行测试时，全套测试需要花费几个小时。 因此，为我们选择服务的标准将是： </p><br><ul><li>  API测试（硒/鸦片） </li><li>  iOS，Android设备 </li><li> 支持移动浏览器测试 </li><li> 支持下载和测试应用程序 </li><li> 参考设备（GooglePixel（Android 9）和iPhone X（iOS 12+）） </li><li> 手动调试 </li><li> 记录（加上屏幕截图，记录视频运行） </li><li> 设备寄存和可用性 </li><li> 平均测试准备时间 </li><li> 价钱 </li></ul><br><p> 理想的，但不是必需的： </p><br><ul><li> 服务级别python支持（无论如何） </li><li> 支持桌面设备\浏览器 </li></ul><br><h1> 市场调查结果 </h1><br><p> 一个星期，我上网冲浪，尝试了十二种不同的服务。 它们中的大多数为测试机会提供了空闲时间。 我的研究结果，更多的结论是主观的。 您的意见和结果可能与我的不同。 </p><br><p> 在Habré上，我发现<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">2017年有一篇文章</a>专门针对同一主题，但此后出现了新服务，我们的任务更加严格。 因此，例如，三星远程测试实验室，Firebase测试实验室，Xamarin测试云之类的“美味”服务不适合我们。 </p><br><h2> 退出游戏 </h2><br><h3> 三星远程测试实验室 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hd/jg/ky/hdjgkycr6wiajxi8ucwp6spgasa.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 该服务提供了一个免费的机会来尝试使用各种三星设备，包括最新的设备，包括Tizen上的电视或智能手表（每天最多限制10个小时，每天免费提供10积分，相当于每天2.5个小时） ，最小会话时间为半小时（2个学分）。 这对于调试和查找某些设备上的错误的根本原因非常好，该服务甚至提供了对远程调试的访问（远程调试桥，对控制台和系统日志的访问），但是不幸的是，该服务不提供对设备的API访问。  “自动化”的唯一方法是记录用户操作，然后在本地自动化工具中回放它们。 </p><br><h3>  Firebase测试实验室 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ix/4r/t0/ix4rt0ohclapstllgnbyl5726qm.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p>  Google提供的一项服务可让您免费（不太完全）在运行Android和iOS的设备上测试您的应用程序。 但有一个警告-服务需要使用本机自动化工具（对于Android为UIAtomator2和Espresso，对于iOS为XCTest），或者对于Android使用自动蜘蛛网（爬网程序）-Robo Test和Game Loop Test。 也就是说，使用UIAutomator和Selenium las将不起作用。 至于免费-免费软件包每天最多只能在模拟器上进行10次测试，在真实设备上进行5次测试。 如果您需要更多，则每增加一小时，您将分别需要另外支付1美元和5美元。 通常，对于我们的任务，如果我们从头开始编写测试，这将是一个不错的选择，但是我真的根本不想处理数百个测试-这简直太昂贵了。 事实证明，在台式机版本和移动版本之间的测试中，我们将不得不大相径庭，这将大大增加支持的难度。 </p><br><h3>  Visual Studio应用中心 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3g/_o/pr/3g_oprmudubtaulwkgqjahqot74.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 前Xamarin测试云。 该服务最终支持Appium，并允许在数千种不同的设备上进行测试。 但是，与其他Microsoft产品一样，它牢牢地固定在本机堆栈上，这意味着要使用此服务，您不仅需要Visual Studio的存在，还需要专门用Java编写项目和测试。 但是，如果您突然有了Java堆栈（带有MS VS），则价格为每个设备插槽每月99美元，这是相对自由的。 </p><br><h2> 服务选择 </h2><br><h3>  AWS设备场 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zn/pb/r9/znpbr9hu4dkgiqjcwoudrviaid8.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 也许是当今用于在虚拟和真实设备（超过2500台设备）上进行测试的最强大的服务器场。 对我们来说，这是一项优先服务，因为我们的服务仅部署在AWS云中，此外，设备时间的每分钟价格为17美分起。  AWS允许您使用本机框架以及Appium，Calabash和其他自动化测试框架。 除了自动测试之外，该服务还提供了手动调试的功能。 好吧，“尝试” 1000分钟非常诱人。 但是，细节仍然像往常一样是魔鬼。 在测试方面，AWS具有多个功能。 </p><br><p> 正如我已经提到的，我们使用Python 3.7，但是AWS Device Farm仍然可以使用Python 2.7.6（请参阅<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>的手册）。 开箱即用对毒素一无所知。 对我们来说，这意味着缺少许多功能，并且需要处理部分测试以确保向后兼容性，并创建绕过毒素的环境。 此外，用于下载测试包（存档）的相当奇怪的机制还意味着下载用于测试的应用程序。 就我们而言，如果我们通过移动浏览器测试我们的服务，那么下载应用程序是一个额外的步骤。 但是，您可以将应用程序替换为“存根”，并在Python 2.7环境中使用Python 3.7创建venv，然后在其中创建具有tox的环境，从而... </p><br><div style="text-align:center;"><img src="https://i.gifer.com/embedded/download/S5u.gif"></div><br><p> 如果一切都基于旧版本，则Amazon不会成为Amazon。 作为一种替代方法（下面没有服务将没有这样的机会），AWS建议通过AWS CLI（命令行界面）使用AWS Device Farm（请参阅<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">此处</a>的手册）。 也就是说，我们可以在远程调试模式下将设备作为真正的设备从云连接到我们的计算机，但是，以前已经用修补的adb替换了adb（二进制列表中没有linux的二进制文件，但是我确定它是自然存在的）。 也就是说，设置了AWS CLI后，为了进行测试，我们只需要执行一些命令（因为我们不会将GUI用作AWS Device Farm App）。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ka/ln/tv/kalntvkkefpkcemawikixglisfq.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">代码示例</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> boto3 <span class="hljs-comment"><span class="hljs-comment">#  AWS SDK https://pypi.org/project/boto3/ aws_client = boto3.client('devicefarm') response = aws_client.list_devices() #     device_arn = '' for phone in response["devices"]: if phone['name'] == "Google Pixel XL": #      (  ) device_arn = phone['arn'] #   Amazon Resource Name break project_arn = aws_client.list_projects()['projects'][0]['arn'] #        #      ,    SSH    response = aws_client.create_remote_access_session(projectArn=project_arn, deviceArn=device_arn, remoteDebugEnabled=True, ssh-public-key=SSH_KEY) #     adb devices     uuid Google Pixel XL  AWS Device Farm,   iOS #     ... RUN_TESTS() ... #    ( )    aws_client.stop-remote-access-session(arn=response['remoteAccessSession']['arn']) aws_client.delete_remote_access_session(arn=response['remoteAccessSession']['arn'])</span></span></code> </pre> </div></div><br><p> 如果我们要测试该应用程序，也可以通过AWS开发工具包下载。 </p><br><p> 但是我没有在这里讲一个关键的细微差别。 我们再次详细地发现了魔鬼。 事实是，仅当我们对AWS使用私有设备计划时，远程调试选项才可用。 首先，此功能仅应要求提供（您需要写一封信给亚马逊），其次，该选项适用于us-west-2区域，其次，实际上，此选项使我们返回到拥有服务器的服务器使用一组（或至少一个）与其连接的设备进行测试。 优势显而易见-我们可以单独使用此设备，这显然更安全，更快捷，另一方面，我们失去了主要优势-设备的选择和种类。 </p><br><p> 我总体上喜欢这项服务，但是对我们的团队而言，其中有太多“ buts”。 </p><br><h3> 位列 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5a/gg/lp/5agglpijttxv29qnnlrgr12ksgu.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 这个基于云的移动服务器场是第一个使用搜索引擎的服务器。 并没有白费。 展望未来，我要说的是，与一项测试相比，这项服务在一项测试中拥有最佳的设备选择（仅实际设备），并且具有最佳的性能。  Bitbar提供了远程手动和自动测试服务（使用Appium和其他框架），并且，如果需要的话，还允许您使用类似于Firebase Test Lab（机器人测试）的AI爬虫-AI TestBot。 通过预先选择所需的设备池，BitBar的主要优点是测试线程的数量不受限制（也就是说，您可以立即在数百个设备上测试应用程序）。 如果设备忙，则将选择另一个设备，否则会话将排队。 在测试运行结束时，将生成日志，测试记录，保存结果，并将通知发送到邮件。 尽管有机会配置与不同CI / CD工具的交互。 该服务还提供了以不同分辨率测试桌面浏览器的功能，并且可以根据需要在AWS中创建您的私有设备。 确实，您需要支付所有这些芯片的费用-每分钟测试将花费0.29美元。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/oq/te/_v/oqte_v0jovfktqprbfpjzyt6kbw.jpeg"></div><br><p> 设置过程很简单，就像两个手指与沥青的相互作用一样： </p><br><div class="spoiler">  <b class="spoiler_title">代码示例</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://appium.bitbar.com/wd/hub'</span></span> desired_capabilities = { <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Motorola Google Nexus 6'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceId'</span></span>: <span class="hljs-string"><span class="hljs-string">'FA7AN1A00253'</span></span>, <span class="hljs-string"><span class="hljs-string">'newCommandTimeout'</span></span>: <span class="hljs-number"><span class="hljs-number">12000</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-comment"><span class="hljs-comment">#     Chrome,    app 'bitbar_apiKey': 'BITBAR_API_KEY', 'bitbar_project': 'Software Testing', 'bitbar_testrun': 'Test run #N', 'bitbar_device': 'Motorola Google Nexus 6', 'bitbar_app': '23425235' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """</span></span></code> </pre></div></div><br><h3> 科比顿 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pm/jx/7z/pmjx7zlxb9om476zsp_qd24tqb0.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 在真实设备上提供测试服务的另一项服务。 设备的选择比Bitbar（350+）更适中，设备的可用性也更少。 通常，它的基本功能与BitBar非常相似，它允许手动和自动测试（使用Appium-在此无需选择框架）。 无法在桌面浏览器上进行测试。 该服务还允许您使用无限数量的会话和设备来组织测试，但是您不能在此处创建设备池。 服务的价格非常宽松-每增加一分钟测试$ 0.10，但是在试用期间，我提请注意服务的某些不稳定-设备挂起后，Internet经常在设备上掉线。 另外，如果设备忙或预留，则所有正在运行的测试都将失败。 也就是说，与Bitbar不同，会话中没有队列。 没错，它可以低成本组织。  Kobiton有自己的小型API。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/0b/8n/p9/0b8np9ceky_s0e2schcgitmgi4w.jpeg"></div><br><p> 设置也非常简单，与位栏不同，几乎是原始的Appium。 </p><br><div class="spoiler">  <b class="spoiler_title">代码示例</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> base64 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> requests <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> <span class="hljs-comment"><span class="hljs-comment">#  base64EncodedBasicAuth = base64.b64encode(bytes(f'{USERNAME}:{API_KEY}', 'utf-8')) headers = { 'Authorization': f'Basic {base64EncodedBasicAuth}' } reply = requests.get(f'https://api.kobiton.com/v1/apps', params={ }, headers = headers) #     deviceId headers = { 'Authorization': base64EncodedBasicAuth, 'Accept': 'application/json' } reply = requests.get(f'https://api.kobiton.com/v1/devices/{deviceId}/status', params={ }, headers = headers) #   ,      while (reply['isOnline'] == False or reply['isBooked'] == True): sleep(60) #   com_executor = f'https://{USERNAME}:{API_KEY}@api.kobiton.com/wd/hub' desired_capabilities = { 'browserName': 'Chrome', # The generated session will be visible to you only. 'sessionName': 'Automation test session', 'sessionDescription': '', 'deviceOrientation': 'portrait', 'captureScreenshots': True, 'deviceGroup': 'KOBITON', # For deviceName, platformVersion Kobiton supports wildcard # character *, with 3 formats: *text, text* and *text* # If there is no *, Kobiton will match the exact text provided 'deviceName': 'Pixel 2', 'platformName': 'Android', 'platformVersion': '9' } driver = webdriver.Remote(com_executor, desired_capabilities) """ ... """ #   RUN_TESTS() """ ... """ #       ,     (   ) headers = { 'Authorization': {base64EncodedBasicAuth} } requests.delete(f'https://api.kobiton.com/v1/sessions/{sessionId}/terminate', params={ }) """ ... """</span></span></code> </pre></div></div><br><h3> 浏览器堆栈 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ug/zt/ed/ugztedawkg6ed9okmi1htaactgc.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 好旧的BrowserStack。 关于他以及许多使用它的人写了很多东西。 是的，它不仅允许在不同的浏览器上进行测试，而且还可以在不同的设备上进行测试。 既可以在手动模式下使用，也可以使用Selenium / Appium。 根据您的需要-在移动浏览器上或使用您的应用程序。 在功能方面，所有功能都与顶部的两个服务相同，但是与它们不同的是，同时会话的数量已经受到限制。 的确，相反，每月支付199美元，可以无限时间测试。 有针对Jenkins，Travis CI，TeamCity的插件，其丰富的API，出色的日志以及各种配置不同的设备和桌面浏览器。 的确，根据您要测试的内容，设置将有所不同-对于测试浏览器（甚至是移动浏览器），将使用Selenium集线器；对于应用程序，将使用Appium集线器。 此外，要测试该应用程序，您将需要单独付费。 也就是说，为了同时测试移动浏览器和应用程序，您需要支付199美元和另外的159美元（一台设备同时进行测试的价格）。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/xi/xv/zz/xixvzzad9ae94ktoao0yzkodra8.png"></div><br><div class="spoiler">  <b class="spoiler_title">应用示例代码</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://USERNAME:API_KEY@hub-cloud.browserstack.com/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'app'</span></span>: app_name, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">移动浏览器的示例代码</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> selenium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'http://USERNAME:API_KEY@hub.browserstack.com:80/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">'device'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'deviceName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Google Pixel'</span></span>, <span class="hljs-string"><span class="hljs-string">'browserName'</span></span>: <span class="hljs-string"><span class="hljs-string">'Chrome'</span></span>, <span class="hljs-string"><span class="hljs-string">'realMobile'</span></span>: <span class="hljs-string"><span class="hljs-string">'true'</span></span>, <span class="hljs-string"><span class="hljs-string">'os_version'</span></span>: <span class="hljs-string"><span class="hljs-string">'8.0'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>: <span class="hljs-string"><span class="hljs-string">'Bstack-[Python] Sample Test'</span></span> } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3> 实验性 </h3><br><img src="https://habrastorage.org/webt/do/7d/uv/do7duvaiufyiok6muyz_zuerya4.png"><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 另一项服务可以使用Appium，Selenium和其他框架同时手动和自动测试移动设备和桌面浏览器。 与BrowserStack一样，同时进行的会话数是有限的，但价格略有不同-测试移动应用程序时，该服务每月收费199美元，而跨浏览器测试仅需39美元（同时进行一次会话）。 此外，就像使用AWS的Bitbar一样，您可以使用设备构建自己的私人实验室，但是如果需要，可以将其与成千上万个设备，模拟器和不同版本和平台（MacOS，Windows）的浏览器的公共云混合使用。 在有趣的功能中-IntelliJ和Eclipse的扩展功能及其Appium Studio工具的可用性使您可以使用设备的高级功能，例如与FaceID交互，语音控制，扫描条形码，设置通信质量，地理位置等。 在这些缺点中，我可以为试用期命名一组奇怪的设备，为试用期命名严格的关税，以及使用公司邮件的要求（gmail无法使用）。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/fi/z3/wy/fiz3wy8hud0aa5zd28-86zluljg.jpeg"></div><br><div class="spoiler">  <b class="spoiler_title">代码示例</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> appium <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> webdriver <span class="hljs-string"><span class="hljs-string">""" ... """</span></span> com_executor = <span class="hljs-string"><span class="hljs-string">'https://Uhttps://cloud.seetest.io/wd/hub'</span></span> desired_capabilities = {<span class="hljs-string"><span class="hljs-string">"deviceName"</span></span>: <span class="hljs-string"><span class="hljs-string">"iPhone X"</span></span>, <span class="hljs-string"><span class="hljs-string">"accessKey"</span></span>: API_KEY, <span class="hljs-string"><span class="hljs-string">"platformName"</span></span>: <span class="hljs-string"><span class="hljs-string">"ios"</span></span>, <span class="hljs-string"><span class="hljs-string">"deviceQuery"</span></span>: <span class="hljs-string"><span class="hljs-string">"'@os='ios' and @version='12.1.3' and @category='PHONE'"</span></span>, } driver = webdriver.Remote(com_executor, desired_capabilities) <span class="hljs-string"><span class="hljs-string">""" ... """</span></span></code> </pre></div></div><br><h3> 实验室 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/jo/vz/sy/jovzsyon88bmkdxcknin36wro8k.jpeg"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 最古老的云测试服务之一。 几乎有400种不同的实际设备，各种各样的仿真器和仿真器，包括Samsung设备的非典型仿真器，还有针对不同操作系统（包括Linux）的桌面浏览器。  Appium / Selenium和本机框架上的自动化。 该服务的主要优势是存在大量的配置，包括旧的OS，浏览器，设备。  SauceLabs还限制了同时会话的数量，但是在这里，最便宜的选项不是一个，而是两个同时会话。 不寻常的是：实际设备和仿真器上的资费计划是不同的。 因此，最便宜的选择包括两个会话，每个月在模拟器上进行2000分钟的测试，价格为149美元，而在实际设备上已经为349美元。 与CI / CD集成，Slack。不幸的是，我无法实时试用SauceLabs，因为because，注册失败，可能是由于地区原因所致，但我不确定。 </p><br><h3> 完美 </h3><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/pl/bj/h2/plbjh2r1jax9nmtdxkq08sxzfvs.png"></div><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">友情链接</a> </p><br><p> 最新的云测试提供商在视觉上与Experitest最相似，但没有高级功能。 有一种简单的脚本语言。 这很奇怪，但是在针对非企业（企业）资费的服务中，没有针对在桌面浏览器上进行测试的建议，也不可能实时监视测试的执行情况（仅当这不是手动测试时）。 大约有一百种不同的设备可供测试。 它与Jenkins集成，并且有趣的是，与诸如HP ALM，IBM Rational，TFS之类的测试管理工具集成在一起。 还有非常奇怪的收费计划，例如每月5小时的测试（以分钟为单位，最高为0.33美元（这是最昂贵的服务）），尽管可以购买额外的小时套餐，但同样令人感到奇怪的是，每分钟或至少每小时计费一次。 为了便于使用，在试用期内，只有手动测试以及一个公共实验室可用，因此来自不同用户的所有发射都归为一堆。 因此，无法准确判断服务的便利性和速度。 可以看出，该服务主要针对大型公司客户，而至少根据现有信息，该提供程序的功能是我测试过的最不起眼的。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4x/l_/so/4xl_so-pdliodrvlt7huphfnybe.jpeg"></div><br><br><h2> 摘要结果 </h2><br><p> 根据所有选择标准，服务非常相似，服务的性能和价格之间存在差异（例如，如果没有功能，例如AWS）。 因此，为了方便起见，我们将在表格中汇总研究数据，着眼于服务的速度（考虑通过美国VPN的连接）以及价格，以比较设备上的平均每月测试时间（每月5个版本，在Android和iOS设备上进行2小时的测试） = 20小时）。 作为参考值，我将本地计算机上的数据与仿真器一起使用，并再次通过美国VPN将其连接以确保实验的纯度。 </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/m9/1k/ym/m91kymmminidgp5q_ivtq110dqs.png"></div><br><h1> 结论 </h1><br><p> 对我来说，研究和选择适合我们团队的服务非常有趣。 通常，针对每种口味和任何任务都有解决方案，事实证明这些服务在特性和实现方面非常相似。 因此，根据您的任务，我建议以下选择： </p><br><p>  <b>选项A</b> ：如果验证速度对您很重要，并且您需要一次检查数十种不同的设备，则选择<b>Bitbar</b> 。 </p><br><p>  <b>选项B</b> ：如果您优先考虑参考设备的结果，并且配置测试是次要的（但有必要），那么您选择的是<b>BrowserStack</b> 。 这只是我们的情况，因为从统计上讲-所有错误中有90％是来自参考平台和设备的错误（大多数情况下，错误是一次同时出现在所有参考平台上）。 其余的8％是MS IE错误，拒绝了IE支持-2％的MS Edge错误，以及特定配置的0.5％的错误。 </p><br><p>  <b>选项B</b> ：如果您有兴趣检查特殊条件，例如质量差的通信，地理位置或Touch / FaceID，则选择<b>Experitest</b> 。 </p><br><p> 但是从长远来看，如果您的公司占用一个大办公室，那么您的工作是全职的，那么通常来说，甚至使用带有服务器的微型实验室来组织自己的微型实验室，用于连接2-3台设备的仿真器，比使用专业设备花费的成本越来越少，而且更加方便服务。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN464433/">https://habr.com/ru/post/zh-CN464433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN464415/index.html">用于搜索hh.ru的新提示服务</a></li>
<li><a href="../zh-CN464417/index.html">2019年10种流行的PHP框架</a></li>
<li><a href="../zh-CN464421/index.html">Viber电台-在线Messenger中的所有电台</a></li>
<li><a href="../zh-CN464423/index.html">如何管理时间？ 自由职业者的回应</a></li>
<li><a href="../zh-CN464429/index.html">使用Spring平台时最常见的10个错误。 第一部分</a></li>
<li><a href="../zh-CN464435/index.html">如何避免淹没在技术和方法的海洋中：50位专家的经验</a></li>
<li><a href="../zh-CN464437/index.html">开发团队如何通过创建交通站点来赚取更多收入[实施指南]</a></li>
<li><a href="../zh-CN464443/index.html">Natas网站。 通过CTF平台旨在利用Web漏洞。 第二部分</a></li>
<li><a href="../zh-CN464445/index.html">为什么真的不可能成为素食主义者</a></li>
<li><a href="../zh-CN464447/index.html">伯爵计分（Scoring de la Fer）或一项信用评分研究是拓宽视野的一部分。 第一部分</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>