<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü¶ó üí∫ üë®üèº‚Äçüåæ [Locomizer de caso] Que conhecimento pode realmente ser extra√≠do de um conjunto de dados an√¥nimo com coordenadas do usu√°rio üòâ üßü üî´</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este artigo faz parte da s√©rie Case Locomizer, consulte tamb√©m 


- Como acelerar o c√°lculo de um mapa de calor em 20.000 vezes em dois anos e meio 
-...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>[Locomizer de caso] Que conhecimento pode realmente ser extra√≠do de um conjunto de dados an√¥nimo com coordenadas do usu√°rio</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485484/"><blockquote>  Este artigo faz parte da s√©rie Case Locomizer, consulte tamb√©m <br><ul><li>  <a href="https://habr.com/ru/post/485988/">Como acelerar o c√°lculo de um mapa de calor em 20.000 vezes em dois anos e meio</a> </li><li> Open One Ring - um kit de ferramentas para configura√ß√£o flex√≠vel de processos complexos de processamento de dados no Spark na nuvem (em breve) </li></ul></blockquote><br>  Ol√°. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/sy/ye/fp/syyefpnaksenymijgtxh1wywxfo.png" alt="KDPV: o mapa de calor constru√≠do pelos algoritmos do Locomizer para KFC" title="KDPV: o mapa de calor constru√≠do pelos algoritmos do Locomizer para KFC"></a> <br><br>  Recentemente, o New York Times <a href="https://www.nytimes.com/interactive/2019/12/19/opinion/location-tracking-cell-phone.html" rel="nofollow">publicou</a> um artigo sensacional sobre como rastrear usu√°rios por conjuntos de dados an√¥nimos dispon√≠veis comercialmente com as coordenadas de seus movimentos, e aqui, <a href="https://habr.com/ru/company/dcmiran/blog/481336/">em Habr√©,</a> sua tradu√ß√£o gratuita com acr√©scimos de um redator corporativo desconhecido coletou um grande n√∫mero de coment√°rios de diferentes graus de preocupa√ß√£o. <br><br>  Aconteceu que, nos √∫ltimos dois anos e meio, fui l√≠der t√©cnico em um <a href="https://locomizer.com/" rel="nofollow">projeto de geoinforma√ß√£o</a> que se dedica √† tarefa de extrair diretamente o conhecimento desses precisos conjuntos de dados comerciais.  Mas meus coment√°rios com o pedido para deixar de lado o p√¢nico reuniram um grande n√∫mero de contras.  Bem ent√£o.  No ditado sobre a aus√™ncia de paran√≥ia e n√£o o fato de voc√™ n√£o estar sendo seguido, h√° uma certa quantidade de verdade. <br><br>  Mas h√° alguma verdade do outro lado do espelho preto, talvez muito mais.  Ou interessante. <br><a name="habracut"></a><br>  Ent√£o, deixe-me contar em detalhes como n√≥s o seguimos (e se seguimos no sentido de espionagem) voc√™ (e se voc√™ pessoalmente) e que tipo de conhecimento sobre o usu√°rio pode ser obtido sem possuir exatamente qualquer contexto al√©m das coordenadas de seus movimentos coletados dos <abbr title="Um dispositivo que n√£o est√° ligado por fios a um ponto e que fornece comunica√ß√£o por qualquer tipo de comunica√ß√£o por r√°dio: telefones m√≥veis e via sat√©lite, rastreadores GPS, antenas parab√≥licas, etc. No nosso caso, smartphones e tablets com um cart√£o SIM.">terminais de assinantes m√≥veis</abbr> .  Sem excesso de <i>jornalismo</i> e <i>gula</i> , do ponto de vista de um especialista t√©cnico com alguma experi√™ncia real na solu√ß√£o de tarefas fict√≠cias para clientes fict√≠cios, incluindo n√£o apenas v√°rias ag√™ncias de publicidade, Coca-Cola e Guinness, mas tamb√©m, por exemplo, a ONU.  E <i>com um brilho</i> . <br><br>  Al√©m disso!  No final desta s√©rie de artigos, quero compartilhar as ferramentas que desenvolvemos h√° dois anos e meio para que voc√™ possa pesquisar sozinho se comprar (ou obter) um conjunto de dados adequado.  At√© agora, at√© onde eu sei, ningu√©m disponibilizou essas ferramentas publicamente.  Pelo menos, quando pesquisamos h√° dois anos, nada foi encontrado e tivemos que escrever a n√≥s mesmos.  O caminho para c√°lculos r√°pidos foi dif√≠cil e longo, a segunda parte ser√° sobre isso. <br><br>  Ent√£o  √çndice desta anamnese: <br><br><ul><li>  Anatomia de um conjunto de dados an√¥nimo </li><li>  Problemas de precis√£o das coordenadas na faixa do meio </li><li>  Heur√≠sticas para limpeza de dados de ru√≠dos e detritos </li><li>  Que tipo de "conhecimento" √© esse? </li><li>  Pontos de interesse </li><li>  Problemas de extra√ß√£o de conhecimento </li><li>  Pontua√ß√£o do interesse do usu√°rio </li></ul><br>  B√¥nus: <br><br><ul><li>  Obrigado e uma breve FAQ </li></ul><br><h3>  Anatomia de um conjunto de dados an√¥nimo </h3><br>  Leve o fornecedor comercial <a href="https://tamoco.com/" rel="nofollow">Tamoco</a> e veja quais arquivos s√£o <a href="https://tamoco.com/" rel="nofollow">enviados</a> .  Por exemplo, aqui est√° uma parte de um conjunto de dados real do pa√≠s do Reino Unido da Gr√£-Bretanha e Irlanda do Norte, data em 4 de dezembro de 2019: <br><br><pre><code class="plaintext hljs">sdk_ts,device_id,latitude,longitude,accuracy,country,device_type,device_make,device_model,device_language,device_os,device_os_version,device_hw_version,device_screen_width,device_screen_height,device_battery,altitude,inv_id,trigger_type,app_account_id 1575390011,d75f97488c430502046fdb4ebfcc0ffd,51.516766,-0.1279744,10,GB,,,SM-G950W,en-CA,,,,0,0,0,0,4260328,GEO_FENCE_ENTER,115 1575414847,d75f97488c430502046fdb4ebfcc0ffd,51.516766,-0.1279821,10,GB,,,SM-G950W,en-CA,,,,0,0,0,0,4260328,GEO_FENCE_ENTER,115 1575424373,7e3323b382ddaafb9f774af95631cc44,51.51379,-0.0999953,7.6,GB,,,SM-G925F,en-GB,,,,0,0,0,0,31572218,GEO_FENCE_ENTER,115 1575417663,90165d78553fb37b0d62500733b39d11,53.724384,-6.879851,11,IE,aaid,,SM-A605FN,,android,9,,0,0,0,138,0,UNKNOWN_TRIGGER,229 1575417977,b6f2375275a21c40e03e4c6ea9ea4da0,52.75558,-7.9915,5,IE,idfa,,iPhone7.1,,ios,12.4.3,,0,0,0,122,0,UNKNOWN_TRIGGER,229</code> </pre> <br>  Aqui est√° o que vemos nos campos deste conjunto de dados: <br><br><ul><li>  sdk_ts - registro de data e hora na <a href="https://ru.wikipedia.org/wiki/Unix-%25D0%25B2%25D1%2580%25D0%25B5%25D0%25BC%25D1%258F" rel="nofollow">√©poca Unix</a> , </li><li>  device_id - ID do dispositivo anonimizado (terminal de assinante m√≥vel, como um smartphone ou tablet), </li><li>  latitude / longitude - <a href="https://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B5%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D1%2584%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B5_%25D0%25BA%25D0%25BE%25D0%25BE%25D1%2580%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25B0%25D1%2582%25D1%258B" rel="nofollow">coordenadas geogr√°ficas</a> , </li><li>  precis√£o - precis√£o de coordenadas horizontais, metros, </li><li>  pa√≠s - pa√≠s </li><li>  os campos restantes s√£o lixo que n√£o carrega nenhuma carga sem√¢ntica especial. </li></ul><br>  Por que o lixo √© imediatamente? <br><br>  Infelizmente, um campo de altitude aparentemente √∫til n√£o faz sentido, porque a altitude √© mal traduzida na constru√ß√£o de n√∫meros de andares e o v√¥o de avi√£o pode ser eliminado sem ele (mas falaremos sobre isso mais adiante). <br><br>  Diferentemente dos jornalistas dos artigos indicados no in√≠cio, n√£o temos um contexto adicional sobre os usu√°rios e n√£o fazemos suposi√ß√µes infundadas "por padr√£o", como "estava no Pent√°gono - ou seja, funciona no Pent√°gono".  Tamb√©m n√£o somos um tipo de facebook que sabe tudo sobre voc√™ que voc√™ contou sobre si mesmo (e o usu√°rio m√©dio fala muito sobre voc√™), al√©m de todo o seu gr√°fico social.  Compramos dados brutos e n√£o acreditamos neles. <br><br>  Portanto, a partir do contexto, existe apenas um c√≥digo de <abbr title="Pa√≠s + idioma. Por exemplo, en_US para ingl√™s americano ou pt_BR para portugu√™s do Brasil">idioma do</abbr> usu√°rio - ele pode ajudar a identificar turistas estrangeiros, mas isso n√£o √© exato. <br><br>  Bem, al√©m de coordenadas e tempo, h√° tamb√©m um modelo de telefone - teoricamente, ele abre a possibilidade de processar individualmente os propriet√°rios de v√°rios dispositivos no iOS e no Andriod.  Nos coment√°rios sobre o artigo desse blog corporativo, alguns sugeriram fazer uma parada com telefones celulares caros, rastreando-os por geolocaliza√ß√£o ... Hmm, voc√™ sabe, mas esse modelo de neg√≥cios para escrit√≥rios normais que podem comprar dados n√£o ser√° rent√°vel. :) <br><blockquote>  √â importante entender que os dados do fornecedor s√£o brutos, ou seja, retirados dos dispositivos e n√£o processados ‚Äã‚Äãde maneira alguma, exceto, talvez, substituindo o device_id real por um hash de acordo com os requisitos do <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%2589%25D0%25B8%25D0%25B9_%25D1%2580%25D0%25B5%25D0%25B3%25D0%25BB%25D0%25B0%25D0%25BC%25D0%25B5%25D0%25BD%25D1%2582_%25D0%25BF%25D0%25BE_%25D0%25B7%25D0%25B0%25D1%2589%25D0%25B8%25D1%2582%25D0%25B5_%25D0%25B4%25D0%25B0%25D0%25BD%25D0%25BD%25D1%258B%25D1%2585" rel="nofollow">GDPR</a> (√© est√°vel, o mesmo dispositivo ser√° apresentado entre diferentes despejos mensais igualmente). </blockquote><br>  Cada provedor tem seu pr√≥prio conjunto e formato de campos, mas todos t√™m coordenadas, precis√£o, <abbr title="Talvez na ISO 8601, por exemplo, 2020-01-25T22: 30: 47 + 04: 00 ou em alguma outra forma ex√≥tica">hora</abbr> e device_id, e tomei o Tamoco como exemplo como o mais comum.  E o que voc√™ pode assumir sobre um usu√°rio que olha uma linha de dados brutos, se n√£o lida com insinua√ß√µes e adivinha√ß√µes com base em caf√©? <br><br>  A menos que o fato de ele, talvez, na hora indicada, estivesse em algum lugar pr√≥ximo das coordenadas indicadas.  Mais precisamente, isso foi decidido por alguma biblioteca do SDK de algu√©m que coleta geolocaliza√ß√£o no aplicativo em seu terminal de assinante e carregou esses dados no agregador.  Parece-lhe que ele estava l√°, mas a decis√£o final, acreditando nela ou n√£o, √© tomada por n√≥s, e √© fortemente ap√≥s o fato. <br><br><h3>  Problemas de precis√£o das coordenadas na faixa do meio </h3><br>  GPS √© uma coisa incr√≠vel.  Recentemente, houve <a href="https://habr.com/ru/post/483498/">um excelente artigo</a> sobre suas capacidades, n√£o deixe de ler, se n√£o j√°. <br><br>  S√£o apenas todos os exemplos interessantes que descrevem casos ideais que, infelizmente, n√£o se aplicam a conjuntos de dados comerciais. <br><br>  Em primeiro lugar, os terminais de assinantes m√≥veis de conjuntos de dados comerciais n√£o s√£o receptores GPS profissionais, projetados para servir a um prop√≥sito, e s√£o fabricados com uma base de elementos muito mais adequada, com bons amplificadores e grandes antenas.  Um smartphone √© um smartphone - ou seja, os componentes mais baratos embalados em um estojo pequeno com antenas pequenas que funcionam gra√ßas a truques tecnol√≥gicos de v√°rias faixas ao mesmo tempo, dos quais o GPS est√° longe do principal. <br><br>  Em segundo lugar, o ambiente urbano √© um terreno muito, muito acidentado.  Pense por si mesmo - se voc√™ jogar fora o sub√∫rbio de um andar americano, qualquer rua moderna da cidade √© uma ravina profunda com paredes muito √≠ngremes, n√£o apenas porque o horizonte n√£o √© vis√≠vel, mas um peda√ßo do c√©u acima da sua cabe√ßa √© vis√≠vel muito pequeno.  E para precis√£o normal, voc√™ precisa ter 4 sat√©lites em linha direta de vis√£o ao mesmo tempo, melhor ainda.  Por uma quest√£o de interesse, de alguma forma saia para o p√°tio do seu pr√©dio e veja quantos sat√©lites seu smart v√™.  (Muito provavelmente, voc√™ precisar√° de um android com raiz e / ou algum tipo de rastreador GPS pago.) <br><br>  Em terceiro lugar, o usu√°rio m√©dio est√° em constante movimento, ele n√£o espera no local por alguns minutos, at√© que o terminal m√≥vel do assinante capte o n√∫mero necess√°rio de sat√©lites, ele vai ou vai, vira e a visibilidade muda constantemente. <br><br>  Quarto, o usu√°rio nem sempre segura o telefone nas m√£os.  Em um bolso, bolsa ou mochila, ele pode ficar deitado de lado ou de qualquer maneira, e n√£o vai pegar nada. <br><br>  Em quinto lugar, qualquer edif√≠cio feito de concreto armado pode ser uma <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BB%25D0%25B5%25D1%2582%25D0%25BA%25D0%25B0_%25D0%25A4%25D0%25B0%25D1%2580%25D0%25B0%25D0%25B4%25D0%25B5%25D1%258F" rel="nofollow">gaiola</a> cl√°ssica de <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BB%25D0%25B5%25D1%2582%25D0%25BA%25D0%25B0_%25D0%25A4%25D0%25B0%25D1%2580%25D0%25B0%25D0%25B4%25D0%25B5%25D1%258F" rel="nofollow">Faraday</a> ou um <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B0%25D0%25B7%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B0%25D0%25BD%25D1%2582%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D1%2580%25D0%25B5%25D1%2588%25D1%2591%25D1%2582%25D0%25BA%25D0%25B0" rel="nofollow">arranjo faseado</a> , ou um espelho com propriedades n√£o lineares interessantes, que podem amplificar o sinal e suprimi-lo devido a interfer√™ncias a alguma dist√¢ncia.  Ou reflita em um √¢ngulo imprevis√≠vel, mudan√ßa de fase e assim por diante.  Tudo depende do tom do metal nas paredes de concreto. <br><br>  Sexto, os carros ao redor tamb√©m s√£o feitos de metal. <br><br>  S√©timo, dentro do edif√≠cio, o GPS geralmente n√£o pega, e mais ainda no metr√¥. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/pw/p1/a3/pwp1a3191vbzxygmshnbvapsrag.png" alt="A trilha crua de um usu√°rio desconhecido andando por Londres" title="Uma trilha crua de um usu√°rio desconhecido andando por Londres"></a> <br><br>  Todos esses fatores tornam o GPS na cidade extremamente n√£o confi√°vel, e os fabricantes de terminais de assinantes m√≥veis (assim como os provedores de servi√ßos de localiza√ß√£o para sistemas operacionais m√≥veis) precisam sair com v√°rias <abbr title="Mais precisamente, LBS - servi√ßos baseados em localiza√ß√£o; O A-GPS puro √© uma pr√©-carga no dispositivo, um almanaque das posi√ß√µes atuais dos sat√©lites, mas aqui um conjunto de possibilidades um pouco maior">tecnologias de GPS assistido</abbr> . <br><br>  Os mais comuns s√£o a triangula√ß√£o em esta√ß√µes base celulares e redes WiFi (e at√© Bluetooth). <br><br>  Todos esses carros rid√≠culos do Google e Yandex com c√¢meras que fotografam panoramas para o street view, na verdade, coletam principalmente informa√ß√µes sobre CellID, nomes de rede e n√≠veis de sinal de roteadores e as fotos - portanto, uma indulg√™ncia passageira.  Al√©m deles, o HERE Maps coleta essas informa√ß√µes em massa - e nos pa√≠ses desenvolvidos, Apple e mais uma d√∫zia de escrit√≥rios menores.  Bem, aquelas bibliotecas conectadas a aplicativos m√≥veis e fornecem dados de geolocaliza√ß√£o constantemente fazem exatamente a mesma coisa, por exemplo, como quase qualquer widget que mostra um mapa. <br><br>  A quest√£o principal aqui √© exatamente. <br><br>  Ao contr√°rio do GPS, o LBS √© ruim com isso.  20 metros para LTE no caso mais ideal (em geral - at√© alguns quil√¥metros), e quanto ao Wi-Fi, aqui os padr√µes direcionais de roteadores, redes de malha estendidas com repetidores e as caracter√≠sticas f√≠sicas do sinal de frequ√™ncia de 2,4 e 5 GHz reduzem a confiabilidade ao ar livre at√© 150 metros ou mais. <br><br>  E esse √© o constante salto do usu√°rio para o outro lado da rua ou do cruzamento, ou at√© meio quarto do local onde ele realmente est√° - se, por exemplo, o roteador estiver no 5¬∫ andar e ao redor do desfiladeiro de arranha-c√©us, n√£o haver√° sinal ser pego na entrada, mas vai pegar perfeitamente no final deste desfiladeiro. <br><br>  Finalmente, muitos fornecedores pecam com outra caracter√≠stica ruim.  Se n√£o for poss√≠vel determinar a posi√ß√£o com precis√£o aceit√°vel, o usu√°rio ser√° teleportado para o centro de uma certa <a href="https://en.wikipedia.org/wiki/Geo-fence" rel="nofollow">cerca geogr√°fica</a> - ou seja, para o centro do pol√≠gono correspondente a um determinado c√≥digo postal ou regi√£o administrativa, identificado por sinais indiretos, e o mapa estar√° cheio desses "pontos quentes" com milhares de sinais. <br><br> <a href="" rel="nofollow"><img src="https://habrastorage.org/webt/gq/9s/cu/gq9scu4v4_bi30moct9c7mo8di0.png" alt="Veja abaixo o spoiler para uma explica√ß√£o." title="Veja abaixo o spoiler para uma explica√ß√£o."></a> <br><div class="spoiler">  <b class="spoiler_title">Moscou, Kremlin, um pequeno conjunto de dados de novembro de 2019</b> <div class="spoiler_text">  No ponto com coordenadas <a href="https://yandex.ru/maps/-/CKEJ4RKF" rel="nofollow">(55.75270; 37.61720)</a> marcado na ilustra√ß√£o com um marcador <a href="https://yandex.ru/maps/-/CKEJ4RKF" rel="nofollow">,</a> h√° imediatamente 208776 sinais.  Estes s√£o pontos que n√£o foram determinados com a devida precis√£o e se enquadram no ‚Äúcentro‚Äù da cerca geogr√°fica correspondente da Pra√ßa do Senado; √© tamb√©m o ‚Äúcentro‚Äù do Kremlin. <br><br>  Al√©m dela, tamb√©m as seguintes coordenadas s√£o muito "quentes": <br><br><pre> <code class="plaintext hljs">(55.75222; 37.61556) 193 (55.75111; 37.61537) 53 (55.74988; 37.61701) 45 (55.74988; 37.61700) 36</code> </pre> <br>  E em todos os outros pontos desta imagem - exatamente um sinal. </div></div><br>  Pior ainda, esses ‚Äúcentros distritais‚Äù em cada substrato cartogr√°fico s√£o diferentes e, se a Apple e o Google tentarem remov√™-los de pr√©dios residenciais (nos Estados Unidos, houve maus precedentes com a√ß√µes judiciais), ningu√©m se incomodar√° em mudar o ponto do pr√©dio n√£o residencial. <br><br>  Determinar a posi√ß√£o dentro de um grande shopping center com uma √°rea de milhares de metros quadrados √© uma dor √† parte.  O GPS n√£o captura, a rede de celular de todo o centro geralmente √© a mesma e, para entender quais das centenas de lojas o usu√°rio visitou, voc√™ tamb√©m precisa descobrir de alguma forma o local.  Boa sorte com isso. <br><br>  Na verdade, mesmo se houver um campo de altitude, nem sempre √© claro por qual ge√≥ide √© calculado (n√£o necessariamente <abbr title="World Geodetic System '84 - o atual ge√≥ide padr√£o">WGS84</abbr> ), e a FIG sabe a que altura os pisos do edif√≠cio devem ser calculados por n√≥s mesmos.  E quantos existem?  Nos pa√≠ses asi√°ticos, devido a supersti√ß√µes, por exemplo, existem n√£o apenas 13, mas tamb√©m 4 andares.  Essa informa√ß√£o √© muito dif√≠cil de encontrar e, com o processamento em massa, o trabalho nunca ser√° recompensado. <br><br>  Portanto, n√£o importa o quanto n√£o gostar√≠amos, precisamos usar conjuntos de dados brutos sofisticados <br><br><h3>  Heur√≠sticas para limpeza de dados de ru√≠dos e detritos </h3><br>  Mas primeiro vou lhe dizer quem √© nosso paciente. <br><br>  Nosso paciente √© an√¥nimo e seu nome √© milhares, ou melhor, milh√µes, porque nossos clientes pagam pelas estat√≠sticas coletadas em massa.  Uma pessoa espec√≠fica n√£o faz tempo para a Coca-Cola, mesmo que compre um caminh√£o de refrigerante de uma s√≥ vez.  Os comerciantes precisam de padr√µes e tend√™ncias comuns, bem como uma imagem de como eles s√£o definidos ao longo do tempo.  √â importante que os propriet√°rios das redes de bares de Londres saibam que tempo e hora do dia eles receber√£o um fluxo de visitantes em bares localizados na esquina perto da esta√ß√£o de metr√¥ e em que - pr√≥ximo √†s salas de cinema, eles estar√£o completamente b√™bados se essas amostras vierem de milhares de pessoas an√¥nimas. um certo <i>Vassily Poupkine</i> de Ryazan, ou n√£o. <br><blockquote>  O principal √© que existem muitos e s√£o relevantes.  Trabalhamos com <b>popula√ß√µes</b> . </blockquote><br>  Portanto, por exemplo, usu√°rios que viajam de carro e usu√°rios a p√© s√£o usu√°rios de valores diferentes.  Para os primeiros, quanto mais estreito o c√≠rculo de vis√£o, maior a velocidade do movimento, e eles n√£o prestar√£o aten√ß√£o ao p√¥ster.  Mas se eles est√£o em um engarrafamento ou em um longo sem√°foro, ent√£o por que n√£o?  Como os usu√°rios que viajam no √¥nibus, que est√£o olhando ao redor, esta √© a principal ocupa√ß√£o (se n√£o forem est√∫pidos em sua rede social favorita no momento). <br><br>  Tamb√©m √© importante separar os usu√°rios que trabalham na cerca geogr√°fica de destino - o vendedor da loja deve ser separado dos visitantes da loja que estamos procurando.  Mais precisamente, toda a popula√ß√£o de vendedores de todas as lojas da rede de varejo de toda a popula√ß√£o de compradores. <br><br>  E tudo isso significa que precisamos ter faixas de qualidade das seguintes maneiras: <br><br>  ‚Ä¢ sem baixa precis√£o de coordenadas, <br><br>  ‚Ä¢ sem geolocaliza√ß√£o de falhas: <br>  - teletransporta meio quarto para o lado e para tr√°s, <br>  - pula pela estrada, <br>  - fora dos pontos quentes <br><br>  ‚Ä¢ classificado por tipo de deslocamento: <br>  - a p√© <br>  - de carro <br>  - no √¥nibus <br>  - de bicicleta ou scooter, <br>  - em Shinkansen ou no avi√£o ... <br><br>  ‚Ä¢ sem usu√°rios inapropriadamente extraviados na cerca geogr√°fica, <br><br>  ‚Ä¢ sem faixas fragmentadas, cortando incessantemente c√≠rculos sobre uma pequena √°rea (de onde eles v√™m, n√£o √© totalmente claro, mas s√£o suficientes para separ√°-los em uma classe de problemas separada - provavelmente, esses s√£o todos os tipos de bloqueios com alarmes GSM ou bab√°s eletr√¥nicas - eles tamb√©m coletam geolocaliza√ß√£o ) <br><br>  E se a primeira condi√ß√£o for trivial - itere sobre o conjunto de dados e elimine todos os pontos para os quais o campo de precis√£o √© &lt;10 metros, o resto s√£o apenas alguns problemas. <br><br>  Voc√™ mesmo pode adivinhar quais.  Por exemplo, como distinguir um pedestre que espera no ponto de √¥nibus de um motorista parado em um engarrafamento adjacente? <br><br>  Temos que fazer algumas suposi√ß√µes e construir modelos matem√°ticos para cada um desses filtros, cheios de v√°rias suposi√ß√µes.  √Äs vezes, as premissas s√£o bastante fortes em termos de queda de uma parte significativa da popula√ß√£o. <br><br>  Por exemplo, um vendedor de outlet em um shopping center, trabalhando em turnos dois dias a cada dois dias.  Se nos dias de semana √© definitivamente inadequado, ent√£o nos fins de semana pode ser direcionado para uma sala de cinema no mesmo shopping.  Mas a piada √© que o hor√°rio padr√£o de segunda a sexta-feira e dois dias de folga n√£o √© aplic√°vel a ele, e o classificador deve, de alguma forma, dar certo ou jog√°-lo completamente fora da equa√ß√£o. <br><br>  De qualquer forma, um filtro com v√°rias configura√ß√µes usando uma <i>abordagem heur√≠stica</i> √© criado para cada um dos modelos. <br><br>  Coletamos grandes estat√≠sticas, localizamos nela padr√µes indesejados, formulamos uma tarefa, depuramos interativamente, escrevemos um processamento separado e depois a integramos ao processamento do conjunto de dados - se tivermos certeza de que isso exige essa prepara√ß√£o. <br><br>  Existem v√°rios algoritmos prontos.  Por exemplo, para determinar pontos quentes, voc√™ pode usar o filtro cl√°ssico pela frequ√™ncia do sinal na grade. <br><br>  Mas o classificador de acordo com os tipos de movimento, trabalhando no princ√≠pio de uma <abbr title="Um segmento de um determinado comprimento, cujos limites em cada etapa do processamento s√£o deslocados um ponto mais abaixo na trilha">janela deslizante</abbr> e uma <a href="https://en.wikipedia.org/wiki/Finite-state_machine" rel="nofollow">m√°quina de estado</a> (passamos quase seis meses em tentativa e erro para seu desenvolvimento), √© t√£o sofisticado que j√° √© incorreto cham√°-lo de ‚Äúfiltro‚Äù. <br><br>  Al√©m disso, alguns fornecedores escrevem um n√∫mero irrespons√°vel de pontos por trilha - eles se aproximam dos pontos intermedi√°rios nos intervalos entre as medi√ß√µes ou simplesmente tentam remov√™-los a cada par de metros, mas muitos milhares de sinais s√£o recebidos ao caminhar por quil√¥metro.  Isso √© obviamente demais e, para n√£o nos afogarmos em volume, somos for√ßados a afinar trilhas usando outra heur√≠stica complicada com janelas deslizantes e matem√°tica complicada para calcular a dist√¢ncia de todos os pontos das trilhas at√© seus <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B0%25D1%2580%25D0%25B8%25D1%2586%25D0%25B5%25D0%25BD%25D1%2582%25D1%2580" rel="nofollow">centr√≥ides</a> . <br><blockquote>  Portanto, chamamos o processo de sobreposi√ß√£o de uma cadeia de heur√≠sticas no conjunto de dados original, <b>enriquecendo os dados brutos</b> .  E extra√≠mos conhecimento j√° de dados previamente enriquecidos. </blockquote><br>  E aqui est√° um problema com qualquer heur√≠stica: a ordem de aplica√ß√£o afeta muito o resultado.  Portanto, o processo de processamento √© sempre √∫nico, e n√£o muito bem repetido, mesmo com dados do mesmo fornecedor na mesma regi√£o, mas ap√≥s seis meses. <br><br>  E mais uma coisa: voc√™ n√£o pode misturar dados brutos de diferentes fornecedores em um projeto, mesmo que os leve a um denominador comum.  Mas se cada conjunto de dados brutos for processado independentemente por um algoritmo adequado, os sinais enriquecidos (sem ru√≠do) j√° poder√£o ser mesclados em uma √∫nica fonte.  N√£o encontramos usu√°rios duplicados nos dados de diferentes fornecedores. <br><br>  De qualquer forma, algum conhecimento do conjunto de dados enriquecido sempre pode ser extra√≠do se voc√™ tentar. <br><br><h3>  Que tipo de "conhecimento" √© esse? </h3><br>  √ìtima pergunta. <br><br>  <i>- Precisamos encontrar todos os usu√°rios de Ust-Perduysk que gostam de roubar milho fresco do campo coletivo no final de agosto.</i> <i><br></i>  <i>- Com licen√ßa?</i> <i><br></i>  <i>"Bem, esse √© o campo de milho."</i>  <i>Agosto do ano passado.</i> <i><br></i>  <i>- Estamos prestes a "roubar" ...</i> <i><br></i>  <i>- Determine de alguma forma, voc√™ √© especialista!</i> <i><br></i>  <i>Ok.</i>  <i>Mais alguma coisa?</i> <i><br></i>  <i>- Eles deveriam fumar Pall Mall.</i> <i><br></i>  <i>- (para mim mesmo) Por que o Pall Mall ... no entanto, n√£o se importa, n√£o estamos interessados.</i>  <i>Se eles aparecerem, descobriremos: D (em voz alta, com firmeza) Somente se voc√™ der as informa√ß√µes de onde elas as compram.</i> <br><br>  Voc√™ ouviu um di√°logo com um cliente esf√©rico no v√°cuo, mesmo que isso n√£o seja real em termos de entidades "morar em Ust-Perduysk", "campo de milho", "roubar" e uma marca espec√≠fica de cigarros, mas √© completamente aut√™ntico em ess√™ncia.  As tarefas s√£o definidas desta maneira - voc√™ precisa encontrar uma determinada popula√ß√£o, descrita em termos de cerca geogr√°fica e comportamento do usu√°rio, como um local de resid√™ncia, visitando determinadas categorias de locais em um determinado momento, etc.  O alcance de tais tarefas √© muito amplo e o conjunto de par√¢metros pode ser bastante ex√≥tico. <br><br>  Por√©m, se houver algum tipo de modelo <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0%25D1%2582%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25BE%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C" rel="nofollow">matem√°tico</a> , aplicando m√©todos estat√≠sticos a um grande conjunto de dados enriquecidos (isto √©, de alta qualidade, sem anomalias), √© bem poss√≠vel derivar uma popula√ß√£o adequada.  As estimativas ser√£o todas probabil√≠sticas.  N√£o podemos afirmar inequivocamente que um usu√°rio vive em Ust-Perduysk e rouba milho todo m√™s de agosto, mas se houver pelo menos mil deles, encontraremos eles com 90% de probabilidade.  Talvez tamb√©m possamos fumar, mas em rela√ß√£o √† marca de cigarros, √© prov√°vel que seja necess√°rio um contexto adicional e, se o cliente fornecer, encontraremos os corretos entre eles - mas n√£o podemos garantir a precis√£o. <br><br>  Mas essas tarefas com contexto s√£o realmente raras, e geralmente fazemos pesquisas com base em algum conjunto padr√£o de matmodels testados e depurados que analisam a popula√ß√£o em geral em segmentos como: <br><br><ul><li>  vivendo em geocerca / trabalhando em geocerca, </li><li>  distribui√ß√£o por n√≠vel de renda familiar, </li><li>  motoristas </li><li>  amantes para visitar restaurantes e caf√©s, </li><li>  viciados em compras </li><li>  f√£s de esportes </li><li>  m√£es com crian√ßas pequenas, </li><li>  viagem de neg√≥cios </li><li>  turistas estrangeiros ... </li></ul><br>  Para cada categoria (um total de alguns milhares), o processo de processamento √© constru√≠do de acordo com o modelo a partir de opera√ß√µes predefinidas com v√°rias configura√ß√µes e √© parametrizado dependendo dos requisitos espec√≠ficos do cliente. <br><br>  As opera√ß√µes s√£o desenvolvidas da seguinte forma: o cientista de dados escreve o modelo na forma de white paper, depois √© programado e depurado nos conjuntos de dados padr√£o do Python e, no final, o processamento ser√° feito no Spark (escrevemos em Java, mas tamb√©m em Scala), o que eu otimizo.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Sim, algo como no famoso meme sobre desenhar uma coruja, no entanto, ser√° mais detalhado na segunda parte da minha hist√≥ria.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelos para projetos espec√≠ficos de clientes espec√≠ficos s√£o coletados por uma pessoa especialmente treinada - analista de dados. </font></font><a href="https://habr.com/ru/users/keskiy/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> voc√™ </font><font style="vertical-align: inherit;">quiser fazer uma pergunta, escreva </font><a href="https://habr.com/ru/users/keskiy/" class="user_link"><font style="vertical-align: inherit;">keskiy</font></a><font style="vertical-align: inherit;"> nos coment√°rios e Gena responder√°. A prop√≥sito, ele est√° preparando a apresenta√ß√£o visual final na forma de um </font></font><a href="https://ru.wikipedia.org/wiki/%25D0%25A2%25D0%25B5%25D0%25BF%25D0%25BB%25D0%25BE%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25BA%25D0%25B0%25D1%2580%25D1%2582%25D0%25B0" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mapa de calor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ou de uma grande e bela tabela do Excel, porque os clientes, em regra, n√£o entendem muitos megabytes de cal√ßados a partir de n√∫meros. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Quando o modelo √© conclu√≠do, o conjunto de dados √© carregado no S3 no Amazon Web Services e, usando magia (que descreverei em detalhes no terceiro artigo desta s√©rie), ele √© processado no servi√ßo EMR.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que √© importante - nunca assumimos a tarefa de identificar ou encontrar uma pessoa espec√≠fica, porque nenhum de nossos modelos de trabalho funciona em pequenas amostras. </font><font style="vertical-align: inherit;">A natureza estat√≠stica de todas as nossas heur√≠sticas nos impede de trabalhar com um contexto pontual; al√©m disso, descartamos deliberadamente usu√°rios que ultrapassam o percentil 95, porque uma correspond√™ncia boa demais √© um sinal alarmante de uma marca√ß√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No mapa de calor, esses usu√°rios fornecem um hot spot especial. </font><font style="vertical-align: inherit;">Vou dar um exemplo que pode parecer aned√≥tico, mas √© absolutamente real.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eu, uma vez, inadvertidamente, aqueci um pol√≠gono em um mapa de calor.</font></font></b> <div class="spoiler_text">   :     . ,     ,       WB,   Warner Bros.,    .   ,  .          . <br><br>      -     ,    , ‚Äî   ,       device_id, ‚Äî  ,            .     .         ,    . <br><br>          -,    . </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Heur√≠stica - que piada, pode ser enganada. </font><font style="vertical-align: inherit;">O resultado ser√° aned√≥tico. </font><font style="vertical-align: inherit;">"Os usu√°rios que est√£o ativamente interessados ‚Äã‚Äãem lingerie em lojas online est√£o agrupados aqui." Bem, bem. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas este √© um caso degenerado. </font><font style="vertical-align: inherit;">E os casos padr√£o s√£o calculados com base no POI.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pontos de interesse </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Privado </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dor</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tarefa Shai, que contratou separadamente pessoas especialmente treinadas - manter o banco de dados de estabelecimentos categorizados e atra√ß√µes, hot√©is e monumentos, caf√©s de internet e bord√©is ... e os outros poss√≠veis pontos de atra√ß√£o de popula√ß√µes humanas. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como eu disse, temos milhares de categorias, que podem incluir um ou outro lugar interessante para visitar. </font><font style="vertical-align: inherit;">Mais precisamente, uma √°rvore de categorias. </font><font style="vertical-align: inherit;">Pegue os "77 caf√©s e restaurantes":</font></font><br><br><pre> <code class="plaintext hljs">‚Ä¢ 77-1  ‚Ä¢ 77-8  o 77-8-6     ÔÇß 77-8-6-90 McDonalds ‚Ä¢ 77-8-6-90-1 MacAuto ÔÇß 77-8-6-91 Burger King ÔÇß 77-8-6-92 Pasta Hut</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- e assim por diante. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Em cada estabelecimento desses "estabelecimentos", pode haver de um a muitos milhares, e para cada um voc√™ precisa manter e atualizar um diret√≥rio com coordenadas e um conjunto completo de categorias adequadas. Um shopping center de tr√™s andares com centenas de lojas, uma pra√ßa de alimenta√ß√£o e um cinema √© um lugar onde muitos POIs est√£o concentrados ao mesmo tempo com muitas categorias duplicadas, mas um endere√ßo, e levando em conta o fato de que os pontos abrem e fecham, a tarefa pouco automatizada de manter essa base repousa sobre os ombros do pesquisador.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E levando em considera√ß√£o o fato de que a popula√ß√£o pode ser ordenada imediatamente no n√≠vel da prefeitura, ou mesmo no pa√≠s, o tamanho da base do POI para um projeto pode ser estimado em milh√µes de pontos e dezenas de categorias. Mas primeiro voc√™ precisa lev√°-lo. E √© bom se o pa√≠s for desenvolvido ou com uma comunidade ativa de cart√≥grafos OSM. Nem sempre, ent√£o √†s vezes voc√™ tem que correr. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E se algu√©m solicita um c√°lculo em um conjunto de dados hist√≥ricos, √© necess√°rio encontrar a refer√™ncia do PI, relevante alguns anos atr√°s, e essa n√£o √© a tarefa que eu particularmente quero assumir. Bem, se j√° o tiv√©ssemos. Voc√™ tem que acumular constantemente um arquivo desses bancos de dados, de repente algu√©m ser√° √∫til. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se de repente voc√™ tiver interesse em manter uma base de PI, pode perguntar nos coment√°rios do coordenador do projeto Eugene </font></font><a href="https://habr.com/ru/users/mitra_kun/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mitra_kun</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bem, digamos que encontramos, com sucesso, ou compramos de algum diret√≥rio GIS local, um banco de dados de PI para a regi√£o para o nosso pr√≥ximo projeto e classificamos as categorias (que o fornecedor pode diferir radicalmente na organiza√ß√£o da nossa). </font><font style="vertical-align: inherit;">Agora precisaremos pegar nosso conjunto de dados enriquecido, nesta base, e calcular os segmentos de popula√ß√µes de que precisamos.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Problemas de extra√ß√£o de conhecimento </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Voc√™ pode experimentar o m√©todo inovador de rep√≥rteres do The New York Times: "Eu estava no Pent√°gono durante o hor√°rio de trabalho, o que significa que √© um funcion√°rio do Pent√°gono". Mas esse caminho est√° cheio de v√°rias implica√ß√µes. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O que √© "tempo de trabalho"? Eu j√° mencionei o equ√≠voco de que o hor√°rio de trabalho 5/2 √© adequado para todos, mas um dia de trabalho de 8 horas entre 9 e 18 tamb√©m √© verdadeiro apenas para pl√¢ncton de escrit√≥rio. Isso, na melhor das hip√≥teses, fornece cobertura para cerca da metade da popula√ß√£o-alvo (nossa avalia√ß√£o emp√≠rica, que foi deduzida da pr√°tica). Al√©m dos hor√°rios mencionados "dois dias por dia", existem outros, bem como v√°rios turnos do tipo manh√£ e noite, em que o hor√°rio de trabalho corresponde ao tempo de sono de um representante t√≠pico da popula√ß√£o.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A situa√ß√£o nos centros urbanos de grandes cidades como Londres, Nova York ou T√≥quio √© ainda mais interessante: existem muitos edif√≠cios de tipo misto com escrit√≥rios, hot√©is e apartamentos, e √© f√°cil dividir as popula√ß√µes que "vivem" nesses bairros (ou seja, , dormem √† noite) e o trabalho (ou seja, durante o dia com, talvez, uma pausa para o almo√ßo) √© bastante dif√≠cil. E n√≥s, como enfatizei repetidamente, n√£o temos contexto adicional. Somente coordenadas e tempo. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inevitavelmente, uma parte significativa da popula√ß√£o ter√° que ser sacrificada para n√£o complicar as heur√≠sticas de classifica√ß√£o j√° sofisticadas. Portanto, o conjunto de dados inicial deve ter volume suficiente para que, mesmo ao eliminar a maior parte, as leis estat√≠sticas caracter√≠sticas de grandes conjuntos continuem operando nele.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â interessante lidar com cada um dos subconjuntos at√≠picos manualmente, mas esse √© um processo demorado e ingrato. Por isso, conversamos honestamente sobre as implica√ß√µes que surgem e pontuamos em usu√°rios n√£o padr√£o que n√£o se encaixam no modelo majorit√°rio. Portanto, a publicidade projetada para o consumidor de massa n√£o funciona t√£o efetivamente para metade da audi√™ncia como seria se fosse poss√≠vel direcion√°-la para toda a popula√ß√£o.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bem, locais com v√°rios andares. </font><font style="vertical-align: inherit;">No mesmo funcion√°rio de escrit√≥rio em andares diferentes, os PIs de categorias direcionadas para um projeto podem ser localizados. </font><font style="vertical-align: inherit;">Por exemplo, um consult√≥rio odontol√≥gico, uma companhia de seguros, uma m√°quina de gin√°stica. </font><font style="vertical-align: inherit;">E em que categoria contar uma visita de duas horas de algum tipo de consumidor, se aconteceu, por exemplo, em 29 de agosto? </font><font style="vertical-align: inherit;">Ele (ou ela) tratou os dentes, concluiu um contrato na CASCO ou comprou uma academia no final do m√™s? </font><font style="vertical-align: inherit;">N√£o temos nenhum contexto e poder√≠amos examinar os dados por outros meses para, pelo menos, revelar os membros da academia para visitas regulares, mas geralmente o pedido √© estritamente para qualquer agosto somente sem setembro, e √© tudo. </font><font style="vertical-align: inherit;">Assumimos que, com toda a probabilidade, todas as tr√™s op√ß√µes s√£o verdadeiras e levamos em conta uma certa </font></font><abbr title="Pontua√ß√£o, alguns √≥culos abstratos mostrando o grau de interesse como um n√∫mero.  Uma velocidade positiva na categoria significa que h√° interesse em tais poemas, e uma velocidade negativa significa que o uso deles os evita."><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">velocidade</font></font></abbr><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> para cada uma dessas categorias.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Pontua√ß√£o do interesse do usu√°rio </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Infelizmente, n√£o tenho o direito de falar em detalhes sobre a matem√°tica por tr√°s do c√°lculo da velocidade, porque esse √© o know-how patenteado no qual nossos neg√≥cios se baseiam. Utilizamos um modelo matmodel diferente de todos os outros representantes da ind√∫stria, que saiu de pr√©-requisitos biol√≥gicos (o fundador do projeto possui doutorado em biologia) e testamos experimentalmente em popula√ß√µes de v√°rios organismos modelo, de culturas celulares a camundongos, e depois modificados para o comportamento humano.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se n√£o houver detalhes, ao atribuir uma ambul√¢ncia a qualquer visita √† cerca geogr√°fica de destino, levaremos em considera√ß√£o o interesse que o representante da popula√ß√£o possui por todos os POIs dispon√≠veis da categoria selecionada. Suponha que um amante de makdak, se por algum motivo ele n√£o est√° ligado a um restaurante em particular, visitar√° makdaki principalmente, mas ignorar√° o rei do hamb√∫rguer. Assim, com uma taxa positiva na categoria "restaurantes de fast food", ela ter√° uma taxa positiva maior na categoria "McDonalds", que supera a menor taxa negativa na categoria "Burger King".</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Para um usu√°rio selecionado, "total de pontos de experi√™ncia" n√£o tem sentido e pode at√© parecer aleat√≥rio, mas quando milh√µes se acumulam, a m√°gica estat√≠stica acontece - a quantidade de pontua√ß√µes no n√≠vel da popula√ß√£o dentro do intervalo de confian√ßa realmente come√ßa a refletir a imagem dos interesses dessa popula√ß√£o em todos os POIs das categorias selecionadas. Para entender exatamente como isso acontece, voc√™ precisa ler a disserta√ß√£o correspondente - n√£o sou especialista em biologia e n√£o posso julg√°-la profissionalmente - mas as campanhas publicit√°rias conduzidas por nossos clientes, levando em considera√ß√£o os interesses das popula√ß√µes, oferecem resultados muito melhores que os m√©todos convencionais, usado na publicidade e marketing tradicionais.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ainda mais interessante, quando n√£o apenas calculamos as somas, mas cobrimos o mapa inteiro com uma grade uniforme e calculamos as categorias de velocidade dos sinais levados em considera√ß√£o em cada pol√≠gono dessa grade, com base nos interesses dos usu√°rios que possuem o sinal gravado. Na imagem para atrair aten√ß√£o, um deles √© mostrado no in√≠cio do artigo, mas, na verdade, o resultado de um projeto s√£o dezenas, ou mesmo centenas desses mapas - para cada categoria-alvo e segmento da popula√ß√£o. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ou - nada de bom acontece se o conjunto de dados for muito pequeno, barulhento, impreciso ou a base do POI n√£o for compilada corretamente. Devido √†s heur√≠sticas e aos modelos incompletos, os dados devem ser grandes o suficiente para que o resultado seja confi√°vel. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mas o big data n√£o √© realmente sobre tamanho.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E o que √© e como eles surgem durante o processamento ser√° discutido na pr√≥xima parte. </font><font style="vertical-align: inherit;">N√£o mude, em alguns dias falarei sobre como constru√≠mos um transportador automatizado na nuvem Amazon a partir de um prot√≥tipo montado no meu joelho e aprendi a calcular terabytes de dados brutos em minutos, em vez de semanas. </font><font style="vertical-align: inherit;">Este ser√° um artigo muito mais t√©cnico. </font></font><br><br><img src="https://habrastorage.org/webt/bf/xi/nm/bfxinmruslt9rxjidebayvi-154.jpeg" alt="Izhevsk faz parte da equipe Locomizer.  Da esquerda para a direita: Gena, I, Eugene, Anya" title="Izhevsk faz parte da equipe Locomizer.  Da esquerda para a direita: Gena, I, Eugene, Anya"><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Esses s√£o esses caras.</font></font></i> <br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Obrigado e uma breve FAQ </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Sem o feedback de grandes colegas - engenheiros de big data, este artigo n√£o teria sido t√£o claro: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pavel </font></font><a href="https://twitter.com/ajtkulov" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">@ajtkulov</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Gregory </font></font><a href="https://github.com/pomadchin" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pomadchin</font></font></a> </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Andrey </font></font><a href="https://habr.com/ru/users/fall_out_bug/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fall_out_bug</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zhukov</font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E sem as mudan√ßas editoriais de Nadi Noskova e Polina </font></font><a href="https://hudway.co/" rel="nofollow"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rusinova</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> da equipe </font><a href="https://hudway.co/" rel="nofollow"><font style="vertical-align: inherit;">HUDWAY,</font></a><font style="vertical-align: inherit;"> ela n√£o seria t√£o f√°cil de ler.</font></font> Obrigada <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Agora, uma r√°pida FAQ para revisores. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Quantos pontos por hora / dia / minuto uma pessoa "m√©dia" possui? Ou seja, em geral, podemos agrupar por device_id e entender onde a pessoa estava durante o dia? Posso colar dados continuamente por uma semana? </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">R.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> N√£o existe uma m√©dia pronunciada, pode haver pontos de um a milh√µes (o problema da ‚Äúcauda longa‚Äù; removemos os usu√°rios com o n√∫mero de pontos abaixo dos percentis 5 e 95), isso depende muito do fornecedor. Voc√™ pode agrupar, ficar juntos, mas a nuvem de pontos resultante n√£o possui padr√µes √≥bvios "a olho", √© apenas uma nuvem lan√ßada aleatoriamente no mapa. Ap√≥s o enriquecimento, as trajet√≥rias j√° s√£o vis√≠veis, mas geralmente quebram nos locais mais inesperados e n√£o ajudam muito. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√â poss√≠vel juntar-se a fam√≠lias? Quais 2-3 dispositivos ficam juntos por v√°rios dias de folga? Isolada dos vizinhos? </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Duvidoso. √â improv√°vel que os membros da fam√≠lia tenham um conjunto id√™ntico de aplicativos nos terminais de assinantes e √© improv√°vel que os padr√µes de uso coincidam completamente. At√© agora, n√£o tivemos essa tarefa, mas voc√™ pode tentar. Se algu√©m nos ordena esse estudo, √© claro, n√£o podemos gastar tempo livre testando uma hip√≥tese. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Do ponto de vista comercial, √© poss√≠vel segmentar clientes espec√≠ficos?</font></font> Como<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Existe apenas algum device_id, mas obviamente n√£o sabemos o n√∫mero da c√©lula nem o email. Somente se esse usu√°rio novamente em algum lugar passar com o mesmo device_id? √â est√°tico? Ou √© algo como impress√£o digital e pode mudar do provedor de dados? </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A. O</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> provedor atribui device_id, e n√£o √© isso que √© vis√≠vel, por exemplo, nas configura√ß√µes do telefone, ou seja, existe um duplo anonimato. N√£o temos dados al√©m do que √© pintado na anatomia do conjunto de dados. Dentro do provedor, ele permanece o mesmo para um dispositivo, e voc√™ pode colar os conjuntos de dados mensais, o uso provavelmente permanecer√° o mesmo. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Q.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Data Provider, explique com mais detalhes. Ou seja, este n√£o √© um operador de celular nas torres, mas "algo em execu√ß√£o no telefone" que coleta localiza√ß√µes em segundo plano e a drena em algum lugar com um pacote? Se o telefone for antigo, sem a Internet, o bluetooth inclu√≠do - algu√©m coletar√° esses dados? Se estou na estrada em um posto de gasolina, n√£o h√° Wi-Fi em nenhum lugar, posso coletar as informa√ß√µes? </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Essa √© a mesma biblioteca que mostra an√∫ncios em seus aplicativos ou faz parte dela, como mostrar lugares em um mapa. Ele funciona no seu telefone se voc√™ permitiu que os aplicativos coletassem geolocaliza√ß√£o (ou essa permiss√£o est√° registrada no manifesto). As informa√ß√µes s√£o coletadas continuamente enquanto o aplicativo est√° sendo executado em segundo plano, quando a rede est√° dispon√≠vel, as informa√ß√µes acumuladas s√£o enviadas pelo pacote para a nuvem da rede de publicidade ou provedor de servi√ßos de mapas e, a partir da√≠, j√° s√£o coletadas por agregadores. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Um pouco mais sobre os provedores de dados ainda. Acontece que existem mais de um. Eles ainda coletam apenas parte do fluxo, 10/20/40/70%? Eles est√£o de alguma forma quebrados no territ√≥rio? Eles podem se sobrepor em hor√°rio / local, operadora de celular ou outra coisa? Ou apenas estupidamente a quantidade pode responder, sem segmenta√ß√£o? </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sim, existem muitos, mas n√£o sabemos sobre compartilhamentos. Algu√©m √© melhor em um pa√≠s, algu√©m em outro. Os clientes geralmente dizem a si mesmos quais dados eles querem processar. N√£o conseguimos colar usu√°rios de maneira confi√°vel nos conjuntos de dados de diferentes fornecedores na mesma regi√£o pelo mesmo per√≠odo de tempo. A segmenta√ß√£o de todos os fornecedores √© a mesma - de acordo com a geocerca da regi√£o. Pa√≠s, prefeitura, cidade etc., mas as interse√ß√µes entre eles n√£o s√£o percept√≠veis. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se voc√™ tiver mais perguntas, sinta-se √† vontade para perguntar nos coment√°rios de Gene </font></font><a href="https://habr.com/ru/users/keskiy/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">keskiy</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> e Eugene </font></font><a href="https://habr.com/ru/users/mitra_kun/" class="user_link"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mitra_kun</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Os caras est√£o bastante ocupados, mas certamente responder√£o a perguntas interessantes e significativas sobre o processamento de dados do usu√°rio e a manuten√ß√£o de um banco de dados de cantos em poucos dias.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Com problemas t√©cnicos, recomendo que voc√™ espere at√© o final desta s√©rie de artigos. </font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt485484/">https://habr.com/ru/post/pt485484/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt485470/index.html">HighLoad ++, Andrey Gushchin (Zabbix): alto desempenho e particionamento nativo</a></li>
<li><a href="../pt485472/index.html">O que h√° de novo a esperar da AMD?</a></li>
<li><a href="../pt485476/index.html">Tend√™ncias e negocia√ß√£o na bolsa: 4 indicadores populares de an√°lise t√©cnica</a></li>
<li><a href="../pt485480/index.html">Coluna port√°til Z-poject Doublebeef - mono duplo em russo. Testar, desmontar e atualizar</a></li>
<li><a href="../pt485482/index.html">3 problemas na transfer√™ncia de dados para o Google Analytics por meio do Protocolo de avalia√ß√£o</a></li>
<li><a href="../pt485486/index.html">Suporte para Buildpacks no Spring Boot 2.3.0</a></li>
<li><a href="../pt485488/index.html">Mais uma vez sobre DevOps e SRE</a></li>
<li><a href="../pt485490/index.html">Por que Musk n√£o podia nascer na R√∫ssia?</a></li>
<li><a href="../pt485492/index.html">Os cientistas dizem qu√£o r√°pido o universo est√° se expandindo</a></li>
<li><a href="../pt485494/index.html">Escolhas de fim de semana: leitura leve para alunos maiores de STEM</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>