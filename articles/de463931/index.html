<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>☁️ 🛀🏿 ⛹️ Erkundung der Tiefen von Typanmerkungen in Python. Teil 2 🤴🏾 🤘🏽 🍏</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Heute veröffentlichen wir den zweiten Teil einer Übersetzung des Materials, die sich mit Typanmerkungen in Python befasst. 

  

 → Der erste Teil 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Erkundung der Tiefen von Typanmerkungen in Python. Teil 2</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/463931/">  Heute veröffentlichen wir den zweiten Teil einer Übersetzung des Materials, die sich mit Typanmerkungen in Python befasst. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/webt/wr/lw/bq/wrlwbqu0zinltnd22qtfjqnhsb4.jpeg"></a> <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Der erste Teil</a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Wie unterstützt Python Datentypen?</font> </h2><br>  Python ist eine dynamisch typisierte Sprache.  Dies bedeutet, dass die verwendeten Variablentypen nur während der Programmausführung überprüft werden.  In dem Beispiel im vorherigen Teil des Artikels konnte man sehen, dass ein Programmierer, der in Python schreibt, die Variablentypen nicht planen und darüber nachdenken musste, wie viel Speicher zum Speichern seiner Daten benötigt würde. <br><br>  Folgendes passiert, wenn Sie Ihren Python-Code für die Ausführung vorbereiten: „In Python wird der Quellcode mithilfe von CPython in eine viel einfachere Form namens Bytecode konvertiert.  Der Bytecode besteht aus Anweisungen, die im Wesentlichen Prozessoranweisungen ähnlich sind.  Sie werden jedoch nicht vom Prozessor ausgeführt, sondern von einem Softwaresystem, das als virtuelle Maschine bezeichnet wird.  (Hier geht es nicht um virtuelle Maschinen, mit deren Funktionen Sie ganze Betriebssysteme auf ihnen ausführen können. In unserem Fall handelt es sich um eine vereinfachte Version der Umgebung, die Programmen zur Verfügung steht, die auf dem Prozessor ausgeführt werden.) <br><br>  Woher weiß CPython, welche Variablentypen verwendet werden sollen, wenn ein Programm für die Ausführung vorbereitet wird?  Immerhin haben wir diese Typen nicht angegeben.  CPython weiß davon nichts.  Er weiß nur, dass Variablen Objekte sind.  Alles in Python ist ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Objekt</a> , zumindest bis sich herausstellt, dass etwas einen spezifischeren Typ hat. <br><br>  Beispielsweise betrachtet Python als Zeichenfolge alles, was in einfache oder doppelte Anführungszeichen eingeschlossen ist.  Wenn Python auf eine Zahl stößt, wird davon ausgegangen, dass der entsprechende Wert vom numerischen Typ ist.  Wenn wir versuchen, etwas mit einer Entität zu tun, das mit einer Entität ihres Typs nicht möglich ist, wird Python uns dies später mitteilen. <br><br>  Beachten Sie die folgende Fehlermeldung, die angezeigt wird, wenn Sie versuchen, eine Zeichenfolge und eine Zahl hinzuzufügen: <br><br><pre><code class="python hljs">name = <span class="hljs-string"><span class="hljs-string">'Vicki'</span></span> seconds = <span class="hljs-number"><span class="hljs-number">4.71</span></span>; --------------------------------------------------------------------------- TypeError                 Traceback (most recent call last) &lt;ipython-input<span class="hljs-number"><span class="hljs-number">-9</span></span><span class="hljs-number"><span class="hljs-number">-71805</span></span>d305c0b&gt; <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt;       <span class="hljs-number"><span class="hljs-number">3</span></span>       <span class="hljs-number"><span class="hljs-number">4</span></span> ----&gt; <span class="hljs-number"><span class="hljs-number">5</span></span> name + seconds TypeError: must be str, <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> float</code> </pre> <br>  Das System teilt uns mit, dass es keine Zeichenfolgen und Gleitkommazahlen hinzufügen kann.  Darüber hinaus interessierte die Tatsache, dass <code>name</code> eine Zeichenfolge und <code>seconds</code> eine Zahl ist, das System nicht, bis versucht wurde, <code>name</code> und <code>seconds</code> hinzuzufügen. <br><br>  Mit anderen Worten, es kann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">wie folgt</a> beschrieben <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">werden</a> : „Bei der Addition wird die Ententypisierung verwendet.  Python interessiert sich nicht dafür, welchen Typ ein bestimmtes Objekt hat.  Das System interessiert sich nur dafür, ob es einen sinnvollen Aufruf an die Additionsmethode zurückgibt.  Ist dies nicht der Fall, wird ein Fehler ausgegeben. " <br><br>  Was würde das bedeuten?  Dies bedeutet, dass wir beim Schreiben von Programmen in Python keine Fehlermeldung erhalten, bis der CPython-Interpreter mit der Ausführung derselben Zeile beschäftigt ist, in der ein Fehler vorliegt. <br><br>  Dieser Ansatz war unpraktisch, wenn er in Teams angewendet wurde, die an großen Projekten arbeiteten.  Tatsache ist, dass sie in solchen Projekten nicht mit separaten Variablen arbeiten, sondern mit komplexen Datenstrukturen.  In solchen Projekten werden einige Funktionen von anderen aufgerufen, und diese wiederum werden von einigen anderen Funktionen aufgerufen.  Teammitglieder sollten in der Lage sein, den Code für ihre Projekte schnell zu überprüfen.  Wenn sie nicht in der Lage sind, gute Tests zu schreiben, die Fehler in Projekten erkennen, bevor sie in Produktion gehen, bedeutet dies, dass solche Projekte große Probleme erwarten können. <br><br>  Genau genommen kommen wir hier zum Gespräch über Typanmerkungen in Python. <br><br>  Wir können sagen, dass die Verwendung von Typanmerkungen im Allgemeinen viele <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stärken hat</a> .  Wenn Sie mit komplexen Datenstrukturen oder Funktionen arbeiten, die viele Eingabewerte annehmen, vereinfacht die Verwendung von Anmerkungen die Arbeit mit ähnlichen Strukturen und Funktionen erheblich.  Besonders - einige Zeit nach ihrer Entstehung.  Wenn Sie nur eine Funktion mit einem Parameter haben, wie in den hier angegebenen Beispielen, ist die Arbeit mit einer solchen Funktion auf jeden Fall sehr einfach. <br><br>  Was ist, wenn wir mit komplexen Funktionen arbeiten müssen, die viele ähnliche Eingabewerte aus der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PyTorch-</a> Dokumentation übernehmen: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">train</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args, model, device, train_loader, optimizer, epoch)</span></span></span><span class="hljs-function">:</span></span>    model.train()    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> batch_idx, (data, target) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> enumerate(train_loader):        data, target = data.to(device), target.to(device)        optimizer.zero_grad()        output = model(data)        loss = F.nll_loss(output, target)        loss.backward()        optimizer.step()        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> batch_idx % args.log_interval == <span class="hljs-number"><span class="hljs-number">0</span></span>:            print(<span class="hljs-string"><span class="hljs-string">'Train Epoch: {} [{}/{} ({:.0f}%)]\tLoss: {:.6f}'</span></span>.format(                epoch, batch_idx * len(data), len(train_loader.dataset), <span class="hljs-number"><span class="hljs-number">100.</span></span> * batch_idx / len(train_loader), loss.item()))</code> </pre> <br>  Was ist ein <code>model</code> ?  Natürlich können wir uns in die Codebasis vertiefen und herausfinden: <br><br><pre> <code class="python hljs">model = Net().to(device)</code> </pre> <br>  Es wäre jedoch schön, wenn Sie nur den <code>model</code> in der Funktionssignatur angeben und sich vor unnötiger Code-Analyse schützen könnten.  Vielleicht würde es so aussehen: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">train</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args, model </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(type Net)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, device, train_loader, optimizer, epoch)</span></span></span><span class="hljs-function">:</span></span></code> </pre> <br>  Was ist mit <code>device</code> ?  Wenn Sie den Code durchsuchen, können Sie Folgendes herausfinden: <br><br><pre> <code class="python hljs">device = torch.device(<span class="hljs-string"><span class="hljs-string">"cuda"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> use_cuda <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">"cpu"</span></span>)</code> </pre> <br>  Jetzt stehen wir vor der Frage, was <code>torch.device</code> .  Dies ist eine spezielle Art von PyTorch.  Die Beschreibung finden Sie im <a href="">entsprechenden Abschnitt</a> der PyTorch-Dokumentation. <br><br>  Es wäre schön, wenn wir den Typ <code>device</code> in der Argumentliste der Funktion angeben könnten.  Somit würden wir viel Zeit für diejenigen sparen, die diesen Code analysieren müssten. <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">train</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(args, model </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(type Net)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, device </span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"><span class="hljs-params">(type torch.Device)</span></span></span></span><span class="hljs-function"><span class="hljs-params">, train_loader, optimizer, epoch)</span></span></span><span class="hljs-function">:</span></span></code> </pre> <br>  Diese Überlegungen können sehr lange dauern. <br><br>  Infolgedessen stellt sich heraus, dass Typanmerkungen für jemanden, der Code schreibt, sehr nützlich sind.  Sie kommen aber auch denen zugute, die den Code anderer lesen.  Es ist viel einfacher, getippten Code als Code zu lesen, um zu verstehen, mit welcher Entität Sie umgehen müssen.  Typanmerkungen verbessern die Lesbarkeit des Codes. <br><br>  Was wurde in Python getan, um den Code auf die gleiche Lesbarkeit zu bringen, die Code unterscheidet, der in statisch typisierten Sprachen geschrieben wurde? <br><br><h2>  <font color="#3AC1EF">Geben Sie Anmerkungen in Python ein</font> </h2><br>  Jetzt sind wir bereit, ernsthaft über Typanmerkungen in Python zu sprechen.  Beim Lesen von in Python 2 geschriebenen Programmen konnte man sehen, dass die Programmierer ihren Code mit Hinweisen versorgten, die den Lesern des Codes mitteilten, welchen Typ die von den Funktionen zurückgegebenen Variablen oder Werte haben. <br><br>  Ein ähnlicher Code sah ursprünglich so aus: <br><br><pre> <code class="python hljs">users = [] <span class="hljs-comment"><span class="hljs-comment"># type: List[UserID] examples = {} # type: Dict[str, Any]</span></span></code> </pre> <br>  Typanmerkungen waren früher einfache Kommentare.  Aber so kam es, dass Python allmählich zu einer einheitlicheren Art des Umgangs mit Anmerkungen überging.  Insbesondere sprechen wir über die Entstehung des Dokuments <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PEP 3107</a> , das der Annotation von Funktionen gewidmet ist. <br><br>  Als nächstes begannen die Arbeiten an <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PEP 484</a> .  Dieses Dokument, das Typanmerkungen gewidmet ist, wurde in enger Verbindung mit mypy, dem DropBox-Projekt, entwickelt, das darauf abzielt, Typen vor dem Ausführen von Skripten zu überprüfen.  Bei der Verwendung von mypy ist zu beachten, dass während der Skriptausführung keine Typprüfung durchgeführt wird.  Zur Laufzeit kann eine Fehlermeldung empfangen werden, wenn Sie beispielsweise versuchen, einen Typ zu erstellen, den dieser Typ nicht unterstützt.  Sagen Sie - wenn Sie versuchen, ein Wörterbuch in Scheiben zu schneiden oder die <code>.pop()</code> -Methode für eine Zeichenfolge <code>.pop()</code> . <br><br>  In PEP 484 erfahren Sie Folgendes über die Details der Annotationsimplementierung: „Obwohl diese Annotationen zur Laufzeit über das Attribut für reguläre <code>annotations</code> verfügbar sind, werden zur Laufzeit keine Typprüfungen durchgeführt.  Stattdessen sieht dieser Vorschlag die Existenz eines separaten unabhängigen Tools zur Überprüfung von Typen vor, mit dem der Benutzer auf Wunsch den Quellcode seiner Programme überprüfen kann.  Im Allgemeinen funktioniert ein ähnliches Tool zur Typprüfung wie ein sehr leistungsfähiger Linter.  "Natürlich können einzelne Benutzer ein ähnliches Tool zum Überprüfen von Typen zur Laufzeit verwenden, entweder für die Implementierung der Design By Contract-Methodik oder für die Implementierung der JIT-Optimierung. Es sollte jedoch beachtet werden, dass solche Tools noch nicht ausreichend ausgereift sind." <br><br>  Wie sieht die Arbeit mit Typanmerkungen in der Praxis aus? <br><br>  Ihre Verwendung bedeutet beispielsweise die Möglichkeit, die Arbeit in verschiedenen IDEs zu erleichtern.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">PyCharm</a> bietet also basierend auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Typinformationen die</a> Vervollständigung und Überprüfung des Codes an.  Ähnliche Funktionen sind in VS Code verfügbar. <br><br>  Typanmerkungen sind aus einem weiteren Grund nützlich: Sie schützen den Entwickler vor dummen Fehlern.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier ist ein</a> gutes Beispiel für einen solchen Schutz. <br><br>  Angenommen, wir fügen dem Wörterbuch die Namen von Personen hinzu: <br><br><pre> <code class="python hljs">names = {<span class="hljs-string"><span class="hljs-string">'Vicki'</span></span>: <span class="hljs-string"><span class="hljs-string">'Boykis'</span></span>,         <span class="hljs-string"><span class="hljs-string">'Kim'</span></span>: <span class="hljs-string"><span class="hljs-string">'Kardashian'</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dict, first_name, last_name)</span></span></span><span class="hljs-function">:</span></span>    dict[first_name] = last_name   append_name(names,<span class="hljs-string"><span class="hljs-string">'Kanye'</span></span>,<span class="hljs-number"><span class="hljs-number">9</span></span>)</code> </pre> <br>  Wenn wir dies zulassen, gibt es viele falsch geformte Einträge im Wörterbuch. <br>  Lassen Sie uns das beheben: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> typing <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Dict names_new: Dict[str, str] = {<span class="hljs-string"><span class="hljs-string">'Vicki'</span></span>: <span class="hljs-string"><span class="hljs-string">'Boykis'</span></span>,                             <span class="hljs-string"><span class="hljs-string">'Kim'</span></span>: <span class="hljs-string"><span class="hljs-string">'Kardashian'</span></span>} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dic: Dict[str, str] , first_name: str, last_name: str)</span></span></span><span class="hljs-function">:</span></span>    dic[first_name] = last_name append_name(names_new,<span class="hljs-string"><span class="hljs-string">'Kanye'</span></span>,<span class="hljs-number"><span class="hljs-number">9.7</span></span>) names_new</code> </pre> <br>  Überprüfen Sie nun diesen Code mit mypy und erhalten Sie Folgendes: <br><br><pre> <code class="python hljs">(kanye) mbp-vboykis:types vboykis$ mypy kanye.py kanye.py:<span class="hljs-number"><span class="hljs-number">9</span></span>: error: Argument <span class="hljs-number"><span class="hljs-number">3</span></span> to <span class="hljs-string"><span class="hljs-string">"append_name"</span></span> has incompatible type <span class="hljs-string"><span class="hljs-string">"float"</span></span>; expected <span class="hljs-string"><span class="hljs-string">"str"</span></span></code> </pre> <br>  Es ist ersichtlich, dass mypy es Ihnen nicht erlaubt, die Nummer zu verwenden, unter der die Zeichenfolge erwartet wird.  Diejenigen, die solche Tests regelmäßig verwenden möchten, sollten mypy einbeziehen, wenn Codetests in ihren kontinuierlichen Integrationssystemen durchgeführt werden. <br><br><h2>  <font color="#3AC1EF">Geben Sie Hinweise in verschiedene IDEs ein</font> </h2><br>  Einer der wichtigsten Vorteile der Verwendung von Typanmerkungen besteht darin, dass Python-Programmierer dieselben Code-Vervollständigungsfunktionen in verschiedenen IDEs verwenden können, die für statisch typisierte Sprachen verfügbar sind. <br><br>  Angenommen, Sie haben einen Code, der dem folgenden ähnelt.  Dies sind einige Funktionen aus früheren Beispielen, die in Klassen eingeschlossen sind. <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> typing <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Dict <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rainfallRate</span></span></span><span class="hljs-class">:</span></span>    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, hours, inches)</span></span></span><span class="hljs-function">:</span></span>        self.hours= hours        self.inches = inches    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">calculateRate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, inches:int, hours:int)</span></span></span><span class="hljs-function"> -&gt; float:</span></span>        <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> inches/hours rainfallRate.calculateRate() <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">addNametoDict</span></span></span><span class="hljs-class">:</span></span>    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, first_name, last_name)</span></span></span><span class="hljs-function">:</span></span>        self.first_name = first_name        self.last_name = last_name        self.dict = dict    <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">append_name</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dict:Dict[str, str], first_name:str, last_name:str)</span></span></span><span class="hljs-function">:</span></span>        dict[first_name] = last_name addNametoDict.append_name()</code> </pre> <br>  Das Schöne ist, dass wir aus eigener Initiative dem Code Typbeschreibungen hinzugefügt haben. Wir können beobachten, was im Programm passiert, wenn die Klassenmethoden aufgerufen werden: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8dd/b42/ded/8ddb42ded904ffe516a90d990a7ff856.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/731/336/a7a/731336a7aa97c55b1e60930ada747ac0.png"></div><br>  <i><font color="#999999">Tipps zum IDE-Typ</font></i> <br><br><h2>  <font color="#3AC1EF">Erste Schritte mit Typanmerkungen</font> </h2><br>  In der Dokumentation zu mypy finden Sie gute Empfehlungen dazu, wie Sie mit der Eingabe der Codebasis beginnen sollen: <br><br><ol><li>  Fangen Sie klein an - stellen Sie sicher, dass einige Dateien mit mehreren Anmerkungen mit mypy validiert sind. </li><li>  Schreiben Sie ein Skript, um mypy auszuführen.  Dies wird dazu beitragen, konsistente Testergebnisse zu erzielen. </li><li>  Führen Sie mypy in CI-Pipelines aus, um Typfehler zu vermeiden. </li><li>  Kommentieren Sie nach und nach die Module, die im Projekt am häufigsten verwendet werden. </li><li>  Fügen Sie dem vorhandenen Code, den Sie ändern, Typanmerkungen hinzu.  rüste sie mit dem neuen Code aus, den du schreibst. </li><li>  Verwenden Sie MonkeyType oder PyAnnotate, um alten Code automatisch mit Anmerkungen zu versehen. </li></ol><br>  Bevor Sie mit dem Kommentieren Ihres eigenen Codes beginnen, sollten Sie sich mit etwas befassen. <br><br>  Zunächst müssen Sie das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Typisierungsmodul</a> in den Code importieren, wenn Sie etwas anderes als Zeichenfolgen, Ganzzahlen, Boolesche Werte und die Werte anderer grundlegender Python-Typen verwenden. <br><br>  Zweitens ermöglicht dieses Modul die Arbeit mit mehreren komplexen Typen.  Darunter sind <code>Dict</code> , <code>Tuple</code> , <code>List</code> und <code>Set</code> .  Eine Konstruktion der Form <code>Dict[str, float]</code> bedeutet, dass Sie mit einem Wörterbuch arbeiten möchten, dessen Elemente eine Zeichenfolge als Schlüssel und eine Gleitkommazahl als Wert verwenden.  Es gibt auch Typen namens <code>Optional</code> und <code>Union</code> . <br><br>  Drittens müssen Sie sich mit dem Format der Typanmerkungen vertraut machen: <br><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> typing <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">some_function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(variable: type)</span></span></span><span class="hljs-function"> -&gt; return_type:</span></span>  do_something</code> </pre> <br>  Wenn Sie mehr darüber erfahren möchten, wie Sie Typanmerkungen in Ihren Projekten anwenden können, möchte ich darauf hinweisen, dass viele gute Tutorials diesem Thema gewidmet sind.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hier</a> ist einer von ihnen.  Ich halte es für das Beste.  Nachdem Sie es beherrschen, lernen Sie die Code-Annotation und ihre Überprüfung kennen. <br><br><h2>  <font color="#3AC1EF">Die Ergebnisse.</font>  <font color="#3AC1EF">Lohnt es sich, Typanmerkungen in Python zu verwenden?</font> </h2><br>  Fragen wir uns nun, ob Sie in Python Typanmerkungen verwenden sollten.  Eigentlich hängt es von den Funktionen Ihres Projekts ab.  Dazu sagt Guido van Rossum in der Dokumentation zu mypy: „Der Zweck von mypy besteht nicht darin, alle davon zu überzeugen, statisch typisierten Python-Code zu schreiben.  Die statische Eingabe ist jetzt und in Zukunft völlig optional.  Mypys Ziel ist es, Python-Programmierern mehr Optionen zu bieten.  Damit soll Python zu einer wettbewerbsfähigeren Alternative zu anderen statisch typisierten Sprachen werden, die in großen Projekten verwendet werden.  Es soll die Produktivität der Programmierer steigern und die Qualität der Software verbessern. " <br><br>  Die Zeit, die erforderlich ist, um mypy zu konfigurieren und die für ein bestimmtes Programm erforderlichen Typen zu planen, rechtfertigt sich nicht in kleinen Projekten und während Experimenten (z. B. in Jupyter).  Welches Projekt sollte als klein angesehen werden?  Wahrscheinlich derjenige, dessen Volumen nach sorgfältigen Schätzungen 1000 Zeilen nicht überschreitet. <br><br>  Typanmerkungen sind in größeren Projekten sinnvoll.  Dort können sie insbesondere viel Zeit sparen.  Wir sprechen über Projekte, die von Gruppen von Programmierern entwickelt wurden, über Pakete, über Code, die bei der Entwicklung von Versionskontrollsystemen und CI-Pipelines verwendet werden. <br><br>  Ich glaube, dass Typanmerkungen in den nächsten Jahren viel häufiger auftreten werden als jetzt, ganz zu schweigen von der Tatsache, dass sie sich möglicherweise zu einem normalen alltäglichen Werkzeug entwickeln.  Und ich glaube, dass jemand, der vor den anderen mit ihnen arbeitet, nichts verlieren wird. <br><br>  <b>Liebe Leser!</b>  Verwenden Sie Typanmerkungen in Ihren Python-Projekten? <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de463931/">https://habr.com/ru/post/de463931/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de463921/index.html">(Nicht sehr) versteckte Kosten der gemeinsamen Codebasis von iOS und Android</a></li>
<li><a href="../de463923/index.html">.container wird nicht mehr benötigt</a></li>
<li><a href="../de463925/index.html">Vivaldi: Wie zählen wir die Anzahl der Benutzer?</a></li>
<li><a href="../de463927/index.html">Umgehung von Sicherheit und Zensur: 5 VPN und Proxys für Google Chrome</a></li>
<li><a href="../de463929/index.html">Erkundung der Tiefen von Typanmerkungen in Python. Teil 1</a></li>
<li><a href="../de463933/index.html">Ein 20-zeiliges Python-Skript, das Eltern jeden Tag über WhatsApp einen guten Morgen wünscht</a></li>
<li><a href="../de463937/index.html">Ich habe nichts zu verbergen</a></li>
<li><a href="../de463939/index.html">SimbirSoft hat eine mobile Lösung für Versicherungsunternehmen veröffentlicht</a></li>
<li><a href="../de463943/index.html">Die Missgeschicke des schwarzen Einhorns</a></li>
<li><a href="../de463951/index.html">c.tech: Cassandra Meetup # 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>