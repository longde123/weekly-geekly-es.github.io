<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨‍👦‍👦 👩🏿‍🤝‍👨🏻 🤪 Artikel tentang bagaimana CommVault membuat cadangan PostgreSQL 🤝 🕵🏾 ☘️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini, kami akan meninjau pengalaman kami menggunakan cadangan CommVault untuk PostgreSQL. Untuk melakukan ini, kami akan menganalisis seba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Artikel tentang bagaimana CommVault membuat cadangan PostgreSQL</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/softline/blog/442760/">  Pada artikel ini, kami akan meninjau pengalaman kami menggunakan cadangan CommVault untuk PostgreSQL.  Untuk melakukan ini, kami akan menganalisis sebagian kecil dari salah satu proyek kami yang lalu, di mana kami membuat cadangan dari database PostgreSQL dari klien. <br><br><img src="https://habrastorage.org/webt/zl/io/gr/zliogravp0udjmycafd9nm6yrow.jpeg"><a name="habracut"></a><br><br><h4>  <font color="#2e74b5">Tentang CommVault</font> </h4><br>  CommVault adalah platform berskala tunggal yang menyediakan perlindungan data terintegrasi dan manajemen konten.  Platform ini mendukung modul perangkat lunak dengan fungsi untuk membuat cadangan dan memulihkan data, pengarsipannya, deduplikasi, replikasi, distribusi media dan enkripsi secara hierarkis.  Modul platform bekerja dengan konten perusahaan dari berbagai sumber dan menyediakan pencarian informasi ujung-ke-ujung di lingkungan perusahaan dan ketersediaannya yang konstan bahkan dari arsip berkat pengindeksan dokumen tunggal yang cerdas dalam repositori virtual.  Platform ini juga dilengkapi dengan alat analisis canggih yang menghasilkan laporan tentang tindakan pengguna dan aplikasi serta fungsi infrastruktur. <br><br>  CommVault melindungi, mengembalikan, dan mengelola data serta akses ke sana dalam lingkungan fisik dan virtual. <br><br><h4>  <font color="#2e74b5">Tentang cadangan PostgreSQL</font> </h4><br>  Untuk melakukan backup dari database PostgreSQL, agen (iDataAgent) digunakan, yang diinstal pada server tempat database berjalan.  Agen dirancang untuk secara efektif mengelola dan melindungi data bisnis penting dalam database PostgreSQL.  Anda dapat menggunakan agen ini untuk membuat cadangan dan memulihkan seluruh server PostgreSQL atau database individual.  Jika perlu, Anda juga dapat mengembalikan masing-masing tabel. <br><br><h4>  <font color="#2e74b5">Fitur utama:</font> </h4><br>  PostgreSQL iDataAgent memberikan fleksibilitas untuk membuat cadangan basis data dalam berbagai mode dan memulihkannya dalam waktu minimal.  Anda dapat mencadangkan atau mencadangkan seluruh server PostgreSQL, basis data individual, atau log arsip kapan saja. <br><br>  Fitur cadangan dan pemulihan yang dapat dilakukan dalam berbagai mode: <br><br><ul><li>  iDataAgent menyediakan kemampuan untuk memulihkan seluruh server PostgreSQL.  Semua database yang terletak di server sumber dapat dipulihkan di server tujuan. </li><li>  Definisikan satu basis data atau kelompok basis data sebagai data sub-daftar dan buat cadangan dan pulihkan. </li><li>  Cadangkan hanya log di server PostgreSQL.  File log ini dapat digunakan untuk memulihkan transaksi basis data yang hilang karena sistem operasi atau kegagalan disk. </li><li>  Kembalikan seluruh server PostgreSQL Anda pada titik waktu tertentu untuk Pencadangan Berbasis Sistem File. </li><li>  Lihat dan verifikasi status operasi pencadangan dan pemulihan dari Kontroler Pekerjaan dan Peraga Peristiwa di konsol CommCell.  Lacak status pekerjaan Anda dengan laporan yang dapat Anda simpan dan distribusikan. </li><li>  Gunakan pencadangan tingkat blok sebagai cara yang lebih cepat untuk mencadangkan data, karena cadangan hanya untuk luasan (atau bagian database yang dimodifikasi), dan bukan untuk seluruh basis data PostgreSQL. </li><li>  Deduplikasi Tingkat Blok  Deduplikasi menyediakan cara yang lebih cerdas untuk menyimpan data dengan mengidentifikasi dan menghapus duplikat dalam operasi perlindungan data. </li></ul><br>
<h4>  <font color="#2e74b5">Arsitektur</font> </h4><br>  <font color="#2e74b5"><b>Skema</b></font> <br><br><img src="https://habrastorage.org/webt/ys/ji/ct/ysjict_mkf-7kcsciptlw7du77y.png"><br><br>  <font color="#2e74b5"><b>Cara kerjanya:</b></font> <br><br>  Platform CommVault digunakan pada jaringan sebagai bagian dari server manajemen CommServe dan server MediaAgent yang terpisah (disarankan untuk menggunakan server fisik). <br><br>  Agen (iDataAgent) diinstal di server dengan database PostgreSQL dan kebijakan cadangannya dikonfigurasi sesuai dengan persyaratan.  iDataAgent mengumpulkan data yang diperlukan, kompres, deduplikat, jika perlu, mengenkripsi dan mentransfernya ke MediaAgent. <br><br>  Selanjutnya, data ditempatkan pada sistem penyimpanan, pada perpustakaan tape atau pada penyimpanan cloud. <br>  Untuk pemulihan, data diekstraksi dari penyimpanan dan disalin ke server dengan PostgreSQL. <br><br>  <font color="#2e74b5"><b>Pengaturan di CommVault Console</b></font> <br><br>  Sekarang mari kita lihat bagaimana melakukan ini di konsol manajemen. <br><br>  1. Untuk memulai cadangan basis data saat ini, pilih di konsol Browser CommCell: <br><br>  Komputer Klien |  |  PostgreSQL |  |  DumpBasedBackupSet. <br><br>  Klik kanan pada folder <b>default</b> di <b>sublient</b> dan pilih <b>Backup</b> . <br><br><img src="https://habrastorage.org/webt/q5/nm/uj/q5nmujdizcusqcmygdyfz_5xdtq.png"><br><br>  2. Pilih <b>Penuh</b> sebagai jenis cadangan dan pilih <b>Segera</b> . <br><br>  3. Klik <b>OK</b> .  Cadangan <b>PostgreSQL dimulai</b> . <br><br><img src="https://habrastorage.org/webt/zi/cn/ea/zicneazi3vlxtzvxq0nlth7whda.png"><br><br>  4. Selama pelaksanaan pekerjaan, statusnya dapat dimonitor melalui jendela <b>Pekerjaan</b> konsol <b>CommCell</b> mereka. <br><br><img src="https://habrastorage.org/webt/dp/wm/cl/dpwmcly1yjwuwkdthl5fdg8kom4.png"><br><br>  5. Setelah tugas selesai, Anda dapat melihat detail tugas yang diselesaikan dari jendela <b>Riwayat Cadangan</b> .  Pilih folder <b>default</b> di <b>sub-daftar</b> dan pilih <b>Backup History</b> . <br><br><img src="https://habrastorage.org/webt/f8/ye/ju/f8yeju8l0lihgvro3kowl5ntgza.png"><br><br>  6. Di jendela <b>Riwayat Cadangan</b> , Anda dapat melihat data berikut tentang tugas yang diselesaikan: <br><br>  - Kesalahan cadangan saat menyelesaikan tugas; <br>  - Item yang berhasil dicadangkan; <br>  - Detail penugasan; <br>  - Acara; <br>  - File log; <br>  - Media tempat data disimpan. <br><br>  <font color="#2e74b5"><b>Mengapa Anda dapat membuat cadangan</b></font> <br><br>  Cadangan Berbasis Dump: <br><br><ul><li>  Database sistem PostgreSQL; </li><li>  Database pengguna PostgreSQL </li><li>  Mencadangkan sistem file (Pencadangan Berbasis Sistem File). </li></ul><br>  Database PostgreSQL (data dan log) (data dan log): <br><br><ul><li>  File log. </li></ul><br>  Apa yang tidak disalin: <br><br><ul><li>  File aplikasi PostgreSQL (file aplikasi); </li><li>  Data sistem operasi. </li></ul><br>  Gunakan File System iDataAgent untuk membuat cadangan komponen di atas. <br><br><h4>  <font color="#2e74b5">Tantangan</font> </h4><br>  Klien perlu menggunakan platform CommVault untuk mendukung layanannya.  Salah satu layanan adalah database PostgreSQL, yang digunakan dalam konfigurasi cluster 2 node: Master dan Standby.  Keduanya bekerja pada server fisik. <br><br>  <font color="#2e74b5"><b>Fitur konfigurasi PostgreSQL klien</b></font> <br><br>  Konfigurasi cluster PostgreSQL dipilih untuk memastikan toleransi kesalahan dari server database. <br><br>  Klien melakukan backup database PostgreSQL menggunakan pg_dump. <br><br>  Skema pekerjaan disajikan pada gambar di bawah ini: <br><br><img src="https://habrastorage.org/webt/2q/cw/li/2qcwlitdhowursvmsnpc4jak7ec.png"><br><br><h4>  <font color="#2e74b5">Konfigurasikan cadangan dengan CommVault</font> </h4><br>  Untuk menyatukan platform cadangan dan memanfaatkan penyimpanan cadangan, kami memutuskan untuk menggunakan CommVault untuk mencadangkan database PostgreSQL. <br><br>  Karena  klien menggunakan konfigurasi cluster PostgreSQL, untuk cadangan kami memutuskan untuk menggunakan opsi File System Based Backup untuk cadangan file.  Pada saat yang sama, saya harus meninggalkan penggunaan cadangan blok (Block Level Backup), karena  Versi kernel Linux yang digunakan PostgreSQL digunakan lebih tinggi daripada CommVault yang didukung secara resmi.  Karena kenyataan bahwa layanan ini penting untuk organisasi, mereka memutuskan untuk membuat jadwal cadangan sesuai tabel: <br><table><tbody><tr><th><br></th><th>  Salinan lengkap <br></th><th>  Log transaksi <br></th></tr><tr><td>  Grafik <br></td><td>  Sekali sehari, pada 23 jam <br></td><td>  Setiap jam selama 24 jam </td></tr><tr><td>  Masa penyimpanan salinan <br></td><td>  7 hari <br></td><td>  1 hari <br></td></tr></tbody></table><br>  Total volume database lebih dari 1,5 Tb dan untuk tetap dalam RTO dan RPO yang diperlukan, jaringan LAN terpisah digunakan untuk cadangan pada kecepatan 10 Gb / s. <br><br>  Pencadangan dilakukan sesuai dengan diagram di bawah ini: <br><br><img src="https://habrastorage.org/webt/b4/j-/mv/b4j-mvywwwqd0c8_1qpr9rg6-hq.png"><br><br>  Cadangan diambil dari server PostgreSQL Standby dan disimpan di server dengan MediaAgent diinstal.  Selanjutnya, sebulan sekali, salinan lengkap diunggah ke cloud Amazon untuk masa simpan satu tahun. <br><br>  Semua pengaturan yang diperlukan telah dibuat, dan cadangan berhasil. <br><br>  <font color="#2e74b5"><b>Fitur Konfigurasi Cadangan PostgreSQL</b></font> <br><br>  Saat memasang dan mengkonfigurasi cadangan, kami menemui beberapa kesulitan, yang tercantum di bawah ini.  Saya pikir akan bermanfaat untuk mempertimbangkan fitur-fitur ini ketika melakukan proyek serupa dan ketika mengatur administrator database PostgreSQL. <br><br><ol><li>  Periksa bahwa node Master dan Standby memiliki pengaturan layanan PostgreSQL yang sama ditetapkan sesuai dengan dokumentasi CommVault: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi.commvault.com/commvault/v11_sp14/article?p=21491.htm</a> </li><li>  Pastikan parameter yang ditentukan dalam Pemecahan Masalah Cadangan konsisten dengan yang ditentukan oleh tautan: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi.commvault.com/commvault/v11_sp14/article?p=21723.htm</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi.commvault.com/commvault/v11_sp14/article?p=21518.htm</a> </li><li>  Pastikan bahwa hak akses ke server basis data dan basis data ditetapkan sesuai dengan persyaratan berikut: <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi.commvault.com/commvault/v11_sp14/article?p=21523.htm</a> </li></ol><br>  <font color="#2e74b5"><b>Pemulihan</b></font> <br><br>  Mencadangkan itu bagus.  Secara alami, kami tertarik tidak hanya dalam proses penciptaannya, tetapi juga dalam pemulihan.  Untuk apa semua ini dilakukan. <br><br>  Dalam situasi ini, pemulihan, berdasarkan pengalaman kami, mungkin diperlukan untuk klien dalam 2 kasus: <br><br><ol><li>  Untuk memulihkan basis data pada titik waktu tertentu agar dapat mengakses data yang, misalnya, dapat dihapus dari basis data; </li><li>  Dalam kasus hilangnya seluruh cluster database PostgreSQL. </li></ol><br>  Untuk memulihkan database, cukup baca dokumentasi di tautan ini: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi.commvault.com/commvault/v11_sp14/article?p=21502.htm</a> <br><br>  Kami juga akan memusatkan perhatian Anda pada fitur dan langkah-langkah berikut selama pemulihan: <br><br><ol><li>  SELALU mengikuti prosedur pemulihan dengan DBA PostgreSQL.  Ini akan membantu Anda menghindari tindakan yang salah dan dengan cepat menyelesaikan masalah yang muncul selama proses pemulihan; </li><li>  Pemulihan harus dilakukan pada node dengan peran Master; </li><li>  Ketika memulihkan, pastikan untuk memverifikasi bahwa layanan PostgreSQL tidak dimulai setelah operasi selesai; </li><li>  Di simpul yang dipulihkan, ubah pengaturan ke peran Master, karena  dalam kasus kami, kami mendukung node Standby; </li><li>  Nonaktifkan layanan pada Standby node, aktifkan mereka di node Master, lalu aktifkan Standby node dan konfigurasikan replikasi lagi. </li></ol><br><h4>  <font color="#2e74b5">Kesimpulan</font> </h4><br>  Pada artikel ini, kami tidak memperhitungkan cadangan OS Linux itu sendiri dan sistem lainnya.  Itu harus dilakukan secara terpisah.  Dokumentasi CommVault menjelaskan ini secara rinci.  Jika artikel kami membangkitkan minat, dan ada banyak keinginan, maka kami pasti akan menjelaskan cara membuat cadangan sistem lain.  Tulis di komentar sistem mana yang menarik bagi Anda. <br><br>  Kami berharap pengalaman kami akan membantu Anda dalam mengatur cadangan oleh DBA PostgreSQL. <br><br>  Penulis: <br>  Sergey Alexandrov, Kepala Kelompok Cadangan, Softline <br>  Artyom Khmelenko, Teknisi Utama, Softline </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id442760/">https://habr.com/ru/post/id442760/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id442744/index.html">Solusi RIPE dan konsekuensinya untuk mengesampingkan dua LIR Rusia (Netup, gcxc.net)</a></li>
<li><a href="../id442746/index.html">Aplikasi Bodoh untuk Windows Store</a></li>
<li><a href="../id442748/index.html">Hal tentang topi: 10 laporan teratas dari Heisenbug 2018 Moskow</a></li>
<li><a href="../id442754/index.html">Operasi vs database analitik: kolom vs penyimpanan baris</a></li>
<li><a href="../id442758/index.html">5 peretas untuk mengoptimalkan query SQL di Greenplum</a></li>
<li><a href="../id442762/index.html">Trainee Vasya dan kisah-kisahnya tentang idempotency API</a></li>
<li><a href="../id442764/index.html">Manajemen Produk Digest. Apa yang menggairahkan produk dan pemasar pada 2019</a></li>
<li><a href="../id442770/index.html">Ikhtisar pemindai kode batang JavaScript</a></li>
<li><a href="../id442772/index.html">Matematika untuk Ilmuwan Data: Bagian yang Diperlukan</a></li>
<li><a href="../id442776/index.html">Indeks dalam PostgreSQL - 3 (Hash)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>