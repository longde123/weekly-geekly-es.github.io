<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµüèø üïí üöµüèø Aprende OpenGL. Lecci√≥n 6.2 - Representaci√≥n basada en la f√≠sica. Fuentes de luz analiticas üåì üéæ üë©üèº‚Äçü§ù‚Äçüë®üèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La lecci√≥n anterior dio una visi√≥n general de los conceptos b√°sicos de la implementaci√≥n de un modelo de representaci√≥n f√≠sicamente plausible. Esta ve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Aprende OpenGL. Lecci√≥n 6.2 - Representaci√≥n basada en la f√≠sica. Fuentes de luz analiticas</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424453/"><img src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" align="left" width="300">  La lecci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">anterior</a> dio una visi√≥n general de los conceptos b√°sicos de la implementaci√≥n de un modelo de representaci√≥n f√≠sicamente plausible.  Esta vez pasaremos de los c√°lculos te√≥ricos a una implementaci√≥n de renderizaci√≥n espec√≠fica con la participaci√≥n de fuentes de luz directa (anal√≠tica): punto, direccional o reflector. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Contenido</b> <div class="spoiler_text">  Parte 1. Comenzando <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Creaci√≥n de ventanas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola ventana</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Hola triangulo</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreadores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Texturas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Transformaciones</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sistemas de coordenadas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√°mara</a> </li></ol><br>  Parte 2. Iluminaci√≥n b√°sica <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Conceptos b√°sicos de iluminaci√≥n</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Materiales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de textura</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes de luz</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">M√∫ltiples fuentes de iluminaci√≥n</a> </li></ol><br>  Parte 3. Descargar modelos 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Biblioteca Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de pol√≠gono de malla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Clase de modelo 3D</a> </li></ol><br>  Parte 4. Caracter√≠sticas avanzadas de OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de profundidad</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Prueba de plantilla</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mezcla de colores</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Caras de recorte</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Buffer de trama</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Tarjetas c√∫bicas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Manejo avanzado de datos</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GLSL avanzado</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sombreador geom√©trico</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Instancia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Suavizado</a> </li></ol><br>  Parte 5. Iluminaci√≥n avanzada <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Iluminaci√≥n avanzada.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Modelo Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Correcci√≥n gamma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Cartas de sombra</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapas de sombras omnidireccionales</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo normal</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Mapeo de paralaje</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Renderizado diferido</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SSAO</a> </li></ol><br>  Parte 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Teor√≠a</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Fuentes de luz analiticas</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Radiaci√≥n difusa.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Exposici√≥n al espejo.</a> </li></ol><br></div></div><br>  Primero, vamos a actualizar la expresi√≥n para calcular la reflectividad de la lecci√≥n anterior: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>L</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>k</mi><mi>d</mi></msub><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi></mrow><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mo stretchy=&quot;false&quot;>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="131.632ex" height="2.78ex" viewBox="0 -832 56674.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-66" x="16413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-72" x="16963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="17415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="17944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="18378" y="0"></use><g transform="translate(18811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-2B" x="20132" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-66" x="21383" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-72" x="21934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="22385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="22915" y="0"></use><g transform="translate(23348,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(25713,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-29" x="13946" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-29" x="40049" y="0"></use><g transform="translate(40438,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-28" x="41464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="41853" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-2C" x="42357" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="43052" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="43538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="44416" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="44883" y="0"></use><g transform="translate(45363,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-29" x="46237" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="46626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="47477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="47910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="48434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="48919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="49531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="50016" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="50895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="51361" y="0"></use><g transform="translate(51842,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="52716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="53489" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="53975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="54853" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="55320" y="0"></use><g transform="translate(55800,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>k</mi><mi>d</mi></msub><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi></mrow><mo>+</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mn>4</mn><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><mo stretchy="false">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_d \ frac {c} {\ pi} + \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n) }) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br>  En su mayor parte, ya hemos tratado los componentes de esta f√≥rmula, pero la pregunta sigue siendo c√≥mo representar espec√≠ficamente la <i>irradiancia</i> , que es el brillo total de la energ√≠a ( <i>resplandor</i> ) <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> L </script>  toda la escena  Acordamos que el brillo de la energ√≠a <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> L </script>  (en t√©rminos de terminolog√≠a de gr√°ficos por computadora) se considera como la relaci√≥n del flujo de radiaci√≥n ( <i>flujo radiante</i> ) <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.891ex" height="2.419ex" viewBox="0 -780.1 1675.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-68" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="1330" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> \ phi </script>  (energ√≠a de radiaci√≥n de la fuente de luz) al valor del √°ngulo s√≥lido <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> \ omega </script>  .  En nuestro caso, el √°ngulo s√≥lido <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> \ omega </script>  lo consideramos infinitesimal y, por lo tanto, el brillo de la energ√≠a da una idea del flujo de radiaci√≥n para cada rayo de luz individual (su direcci√≥n). <br><br>  ¬øC√≥mo vincular estos c√°lculos con el modelo de iluminaci√≥n que conocemos de lecciones anteriores?  Primero, imagine que recibe una fuente de luz de un solo punto (que emite de manera uniforme en todas las direcciones) con un flujo de radiaci√≥n definido como una tr√≠ada RGB (23.47, 21.31, 20.79).  La <i>intensidad</i> radiante <i>de</i> dicha fuente es igual a su flujo de radiaci√≥n en todas las direcciones.  Sin embargo, habiendo considerado el problema de determinar el color de un punto espec√≠fico <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> p </script>  en la superficie, se puede ver que de todas las posibles direcciones de incidencia de luz en el hemisferio <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> \ Omega </script>  solo vector <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-9"> w_i </script>  obviamente vendr√° de una fuente de luz.  Como solo se representa una fuente de luz, representada por un punto en el espacio, para todas las dem√°s direcciones posibles de incidencia de luz en un punto <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> p </script>  El brillo de la energ√≠a ser√° igual a cero: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2w/yj/_n/2wyj_neazkcr6gnrviq43nerpz8.png"></div><br>  Ahora, si no tenemos en cuenta temporalmente la ley de atenuaci√≥n de la luz para una fuente determinada, resulta que el brillo de la energ√≠a para el haz de luz incidente de esta fuente permanece sin cambios donde sea que coloquemos la fuente (escala de luminosidad basada en el coseno del √°ngulo de incidencia <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.891ex" height="2.419ex" viewBox="0 -780.1 1675.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-68" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="1330" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> \ phi </script>  tampoco cuenta).  En total, una fuente puntual mantiene constante la fuerza de radiaci√≥n independientemente del √°ngulo de visi√≥n, lo que equivale a tomar la fuerza de radiaci√≥n igual al flujo de radiaci√≥n inicial en forma de una tr√≠ada constante (23.47, 21.31, 20.79). <br><br>  Sin embargo, el c√°lculo del brillo de la energ√≠a tambi√©n se basa en la coordenada del punto. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> p </script>  , al menos cualquier fuente de luz f√≠sicamente confiable exhibe atenuaci√≥n de la fuerza de radiaci√≥n al aumentar la distancia desde un punto a una fuente.  Tambi√©n debe tener en cuenta la orientaci√≥n de la superficie, como se puede ver en la expresi√≥n original de luminosidad: el resultado del c√°lculo de la fuerza de radiaci√≥n se debe multiplicar por el valor escalar del vector normal a la superficie <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> n </script>  y vector de incidencia de radiaci√≥n <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-14"> w_i </script>  . <br><br>  Para reescribir lo anterior: para una fuente de luz directa, la funci√≥n de radiaci√≥n <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> L </script>  determina el color de la luz incidente, teniendo en cuenta la atenuaci√≥n a una distancia dada del punto <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> p </script>  y teniendo en cuenta la escala por un factor <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.629ex" height="2.419ex" viewBox="0 -780.1 3715.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="2293" y="0"></use><g transform="translate(2654,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="1013" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> n \ cdot w_i </script>  pero solo para un solo rayo de luz <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-18"> w_i </script>  llegando al punto <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-19"> p </script>  - esencialmente el √∫nico vector que conecta la fuente y el punto.  En forma de c√≥digo fuente, esto se interpreta de la siguiente manera: <br><br><pre><code class="cpp hljs">vec3 lightColor = vec3(<span class="hljs-number"><span class="hljs-number">23.47</span></span>, <span class="hljs-number"><span class="hljs-number">21.31</span></span>, <span class="hljs-number"><span class="hljs-number">20.79</span></span>); vec3 wi = normalize(lightPos - fragPos); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cosTheta = max(dot(N, Wi), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> attenuation = calculateAttenuation(fragPos, lightPos); vec3 radiance = lightColor * attenuation * cosTheta;</code> </pre> <br>  Si cierra los ojos a una terminolog√≠a ligeramente modificada, este c√≥digo deber√≠a recordarle algo.  S√≠, s√≠, este es el mismo c√≥digo para calcular el componente difuso en el modelo de iluminaci√≥n que conocemos.  Para la iluminaci√≥n directa, el brillo de la energ√≠a est√° determinado por un solo vector para la fuente de luz, porque el c√°lculo se lleva a cabo de una manera tan similar a la que todav√≠a conocemos. <br><br><blockquote>  Observo que esta afirmaci√≥n es verdadera solo bajo el supuesto de que una fuente puntual de luz es infinitesimal y est√° representada por un punto en el espacio.  Al modelar una fuente de volumen, su luminosidad diferir√° de cero en muchas direcciones, y no solo en un haz. </blockquote><br>  Para otras fuentes de luz que emiten radiaci√≥n desde un solo punto, el brillo de la energ√≠a se calcula de la misma manera.  Por ejemplo, una fuente de luz direccional tiene una direcci√≥n constante <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-20"> w_i </script>  y no usa atenuaci√≥n, y la fuente de proyecci√≥n muestra una potencia de radiaci√≥n variable, dependiendo de la direcci√≥n de la fuente. <br><br>  Aqu√≠ volvemos al valor de la integral. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>t</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.617ex" height="1.937ex" viewBox="0 -728.2 1557.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="1196" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-21"> \ int </script>  en la superficie del hemisferio <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-22"> \ Omega </script>  .  Como sabemos de antemano las posiciones de todas las fuentes de luz que participan en el sombreado de un punto en particular, no necesitamos tratar de resolver la integral.  Podemos calcular directamente la irradiaci√≥n total proporcionada por este n√∫mero de fuentes de luz, ya que el brillo de la energ√≠a de la superficie se ve afectado por una sola direcci√≥n para cada fuente. <br><br>  Como resultado, el c√°lculo de PBR para fuentes de luz directa es una cuesti√≥n bastante simple, ya que todo se reduce a una b√∫squeda secuencial de las fuentes involucradas en la iluminaci√≥n.  M√°s tarde, aparecer√° un componente del entorno en el modelo de iluminaci√≥n, en el que trabajaremos en el tutorial sobre iluminaci√≥n basada en im√°genes (Iluminaci√≥n basada en im√°genes, <i>IBL</i> ).  No se puede escapar de la estimaci√≥n de la integral, ya que la luz en dicho modelo cae desde muchas direcciones. <br><br><h2>  Modelo de superficie PBR </h2><br>  Comencemos con el sombreador de fragmentos que implementa el modelo PBR descrito anteriormente.  Primero, establecemos los datos de entrada necesarios para el sombreado de la superficie: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 330 core out vec4 FragColor; in vec2 TexCoords; in vec3 WorldPos; in vec3 Normal; uniform vec3 camPos; uniform vec3 albedo; uniform float metallic; uniform float roughness; uniform float ao;</span></span></code> </pre> <br>  Aqu√≠ puede ver la entrada habitual calculada utilizando el sombreador de v√©rtices m√°s simple, as√≠ como un conjunto de uniformes que describen las caracter√≠sticas de la superficie del objeto. <br><br>  Adem√°s, al comienzo del c√≥digo de sombreador, realizamos c√°lculos que son tan familiares por la implementaci√≥n del modelo de iluminaci√≥n Blinn-Fong: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ vec3 N = normalize(Normal); vec3 V = normalize(camPos - WorldPos); [...] }</code> </pre> <br><h4>  Iluminaci√≥n directa </h4><br>  El ejemplo de esta lecci√≥n contiene solo cuatro fuentes de luz puntuales que especifican claramente la irradiaci√≥n de la escena.  Para satisfacer la expresi√≥n de reflectividad, revisamos iterativamente cada fuente de luz, calculamos el brillo de energ√≠a individual y resumimos esta contribuci√≥n, modulando simult√°neamente el valor BRDF y el √°ngulo de incidencia del haz de luz.  Puedes imaginar esta iteraci√≥n como una soluci√≥n de la integral sobre la superficie <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-23"> \ Omega </script>  Solo para fuentes de luz anal√≠ticas. <br><br>  Entonces, primero calculamos los valores calculados para cada fuente: <br><br><pre> <code class="cpp hljs">vec3 Lo = vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>; ++i) { vec3 L = normalize(lightPositions[i] - WorldPos); vec3 H = normalize(V + L); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = length(lightPositions[i] - WorldPos); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> attenuation = <span class="hljs-number"><span class="hljs-number">1.0</span></span> / (distance * distance); vec3 radiance = lightColors[i] * attenuation; [...]</code> </pre> <br>  Dado que los c√°lculos se llevan a cabo en un espacio lineal ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la correcci√≥n gamma se</a> realiza al final del sombreador), se usa una ley de atenuaci√≥n m√°s f√≠sicamente correcta de acuerdo con el cuadrado inverso de la distancia: <br><br><blockquote>  Suponga que la ley del cuadrado inverso es m√°s f√≠sicamente correcta, para controlar mejor la naturaleza del amortiguamiento, es bastante posible usar la f√≥rmula ya familiar que contiene t√©rminos constantes, lineales y cuadr√°ticos. </blockquote><br>  Adem√°s, para cada fuente, tambi√©n calculamos el valor del espejo Cook-Torrance BRDF: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="43.933ex" height="2.66ex" viewBox="0 -832 18915.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(4579,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMAIN-29" x="13946" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mn>4</mn><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-24"> \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} </script></p><br>  El primer paso es calcular la relaci√≥n entre la reflexi√≥n especular y difusa, o, en otras palabras, la relaci√≥n entre la cantidad de luz reflejada y la cantidad de luz refractada por la superficie.  De la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">lecci√≥n anterior,</a> sabemos c√≥mo se ve el c√°lculo del coeficiente de Fresnel: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">vec3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fresnelSchlick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cosTheta, vec3 F0)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> F0 + (<span class="hljs-number"><span class="hljs-number">1.0</span></span> - F0) * <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(<span class="hljs-number"><span class="hljs-number">1.0</span></span> - cosTheta, <span class="hljs-number"><span class="hljs-number">5.0</span></span>); }</code> </pre> <br>  La aproximaci√≥n de Fresnel-Schlick espera el par√°metro <i>F0</i> en la entrada, que muestra el <i>grado de reflexi√≥n de la superficie con un √°ngulo cero de incidencia de luz</i> , es decir.  grado de reflexi√≥n, si observa la superficie a lo largo de la normal de arriba a abajo.  El valor de <i>F0</i> var√≠a seg√∫n el material y adquiere una tonalidad de color para metales, como se puede ver mirando los cat√°logos de materiales PBR.  Para el proceso de <i>flujo de trabajo met√°lico</i> (proceso de autor√≠a de materiales PBR, dividiendo todos los materiales en clases de diel√©ctricos y conductores), se supone que todos los diel√©ctricos se ven bastante confiables a un valor constante de <i>F0 = 0.04</i> , mientras que para las superficies met√°licas <i>F0</i> se establece en funci√≥n del albedo de la superficie.  En forma de c√≥digo: <br><br><pre> <code class="cpp hljs">vec3 F0 = vec3(<span class="hljs-number"><span class="hljs-number">0.04</span></span>); F0 = mix(F0, albedo, metallic); vec3 F = fresnelSchlick(max(dot(H, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), F0);</code> </pre> <br>  Como puede ver, para superficies estrictamente no met√°licas, <i>F0 se</i> establece igual a 0.04.  Pero al mismo tiempo, puede cambiar suavemente de este valor al valor de albedo en funci√≥n de la "metalicidad" de la superficie.  Este indicador generalmente se presenta como una textura separada (de aqu√≠, de hecho, se toma el flujo de trabajo <i>met√°lico</i> , <i>aprox. Trans.</i> ). <br><br>  Habiendo recibido <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>F</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.741ex" height="2.057ex" viewBox="0 -780.1 749.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-46" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>F</mi></math></span></span><script type="math/tex" id="MathJax-Element-25"> F </script>  necesitamos calcular el valor de la funci√≥n de distribuci√≥n normal <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.924ex" height="2.057ex" viewBox="0 -780.1 828.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-44" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>D</mi></math></span></span><script type="math/tex" id="MathJax-Element-26"> D </script>  y funciones de geometr√≠a <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>G</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-47" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></span></span><script type="math/tex" id="MathJax-Element-27"> G </script>  : <br><br>  C√≥digo de funci√≥n para el caso con iluminaci√≥n anal√≠tica: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DistributionGGX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 N, vec3 H, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a = roughness*roughness; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a2 = a*a; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotH = max(dot(N, H), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotH2 = NdotH*NdotH; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> num = a2; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> denom = (NdotH2 * (a2 - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) + <span class="hljs-number"><span class="hljs-number">1.0</span></span>); denom = PI * denom * denom; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> num / denom; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GeometrySchlickGGX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> NdotV, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> r = (roughness + <span class="hljs-number"><span class="hljs-number">1.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> k = (r*r) / <span class="hljs-number"><span class="hljs-number">8.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> num = NdotV; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> denom = NdotV * (<span class="hljs-number"><span class="hljs-number">1.0</span></span> - k) + k; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> num / denom; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GeometrySmith</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 N, vec3 V, vec3 L, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotV = max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = max(dot(N, L), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ggx2 = GeometrySchlickGGX(NdotV, roughness); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ggx1 = GeometrySchlickGGX(NdotL, roughness); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ggx1 * ggx2; }</code> </pre> <br>  Una diferencia importante con respecto a la descrita en la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">parte te√≥rica</a> : aqu√≠ pasamos directamente el par√°metro de rugosidad a todas las funciones mencionadas.  Esto se hace para permitir que cada funci√≥n modifique el valor de rugosidad original a su manera.  Por ejemplo, los estudios de Disney, reflejados en el motor de Epic Games, mostraron que el modelo de iluminaci√≥n da resultados visualmente m√°s correctos si utilizamos el cuadrado de la rugosidad en la funci√≥n de geometr√≠a y la funci√≥n de distribuci√≥n normal. <br><br>  Una vez configuradas todas las funciones, se pueden obtener directamente los valores de NDF y G: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NDF = DistributionGGX(N, H, roughness); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> G = GeometrySmith(N, V, L, roughness);</code> </pre> <br>  Total tenemos a mano todos los valores para calcular todo el BRDF Cook-Torrance: <br><br><pre> <code class="cpp hljs">vec3 numerator = NDF * G * F; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> denominator = <span class="hljs-number"><span class="hljs-number">4.0</span></span> * max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>) * max(dot(N, L), <span class="hljs-number"><span class="hljs-number">0.0</span></span>) + <span class="hljs-number"><span class="hljs-number">0.001</span></span>; vec3 specular = numerator / denominator;</code> </pre> <br>  Tenga en cuenta que limitamos el denominador a un valor m√≠nimo de 0.001 para evitar la divisi√≥n por cero en casos de poner a cero el producto escalar. <br><br>  Ahora procedemos a calcular la contribuci√≥n de cada fuente a la ecuaci√≥n de reflectividad.  Dado que el coeficiente de Fresnel es directamente una variable <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.976ex" height="2.419ex" viewBox="0 -780.1 1281.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-73" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-28"> K_s </script>  , entonces podemos usar el valor de F para indicar la contribuci√≥n de la fuente a la reflexi√≥n especular de la superficie.  De la cantidad <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.976ex" height="2.419ex" viewBox="0 -780.1 1281.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-73" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-29"> K_s </script>  se puede obtener y el √≠ndice de refracci√≥n <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>d</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.065ex" height="2.419ex" viewBox="0 -780.1 1319.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-64" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>d</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-30"> K_d </script>  : <br><br><pre> <code class="cpp hljs">vec3 kS = F; vec3 kD = vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>) - kS; kD *= <span class="hljs-number"><span class="hljs-number">1.0</span></span> - metallic;</code> </pre> <br>  Como consideramos la cantidad <i>kS que</i> representa la cantidad de energ√≠a luminosa como una superficie reflejada, rest√°ndola de la unidad, obtenemos la energ√≠a residual de la luz <i>kD</i> refractada por la superficie.  Adem√°s, dado que los metales no refractan la luz y no tienen un componente difuso de luz reemitida, el componente <i>kD</i> se modular√° para que sea cero para un material totalmente met√°lico.  Despu√©s de estos c√°lculos, tendremos todos los datos a mano para calcular la reflectancia proporcionada por cada una de las fuentes de luz: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> PI = <span class="hljs-number"><span class="hljs-number">3.14159265359</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = max(dot(N, L), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); Lo += (kD * albedo / PI + specular) * radiance * NdotL; }</code> </pre> <br>  El valor final <i>Lo</i> , o brillo de energ√≠a saliente, es esencialmente una soluci√≥n para la expresi√≥n de la reflectividad, es decir.  resultado de integraci√≥n de superficie <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhgM7vObJR1KM1R8hzVXGuPaj0jPFg#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-31"> \ Omega </script>  .  En este caso, no necesitamos tratar de resolver la integral de forma general para todas las direcciones posibles, ya que en este ejemplo solo hay cuatro fuentes de luz que afectan el fragmento que se procesa.  Es por eso que toda "integraci√≥n" se limita a un ciclo simple de fuentes de luz existentes. <br><br>  Solo queda agregar la similitud del componente de iluminaci√≥n de fondo a los resultados del c√°lculo de la fuente de luz directa y el color final del fragmento est√° listo: <br><br><pre> <code class="cpp hljs">vec3 ambient = vec3(<span class="hljs-number"><span class="hljs-number">0.03</span></span>) * albedo * ao; vec3 color = ambient + Lo;</code> </pre> <br><h4>  Renderizado lineal y HDR </h4><br>  Hasta ahora, asumimos que todos los c√°lculos se llevan a cabo en un espacio de color lineal y, por lo tanto, utilizamos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la correcci√≥n gamma</a> como el acorde final en nuestro sombreador.  La realizaci√≥n de c√°lculos en el espacio lineal es extremadamente importante para la simulaci√≥n correcta de PBR, ya que el modelo requiere la linealidad de todos los datos de entrada.  Intente no garantizar la linealidad de ninguno de los par√°metros y el resultado del sombreado ser√° incorrecto.  Adem√°s, ser√≠a bueno establecer las fuentes de luz con caracter√≠sticas cercanas a las fuentes reales: por ejemplo, el color de su radiaci√≥n y el brillo de la energ√≠a pueden variar libremente en un amplio rango.  Como resultado, <i>Lo</i> puede aceptar f√°cilmente valores grandes, pero inevitablemente cae dentro del l√≠mite en el intervalo [0., 1.] debido al bajo rango din√°mico ( <i>LDR</i> ) del b√∫fer de trama predeterminado. <br><br>  Para evitar la p√©rdida de los valores de HDR, antes de la correcci√≥n gamma, es necesario realizar una compresi√≥n de tono: <br><br><pre> <code class="cpp hljs">color = color / (color + vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>)); color = <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(color, vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>/<span class="hljs-number"><span class="hljs-number">2.2</span></span>));</code> </pre> <br>  Aqu√≠ se utiliza el conocido operador Reinhardt, lo que nos permite mantener un amplio rango din√°mico en condiciones de irradiaci√≥n muy cambiante de diferentes partes de la imagen.  Como aqu√≠ no utilizamos un sombreador separado para el procesamiento posterior, las operaciones descritas se pueden agregar simplemente al final del c√≥digo del sombreador. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yq/fq/um/yqfqumstgmvnr5vego8grz9tfby.png"></div><br>  Repito que para el modelado correcto de PBR es extremadamente importante recordar y considerar las caracter√≠sticas de trabajar con espacio de color lineal y renderizado HDR.  El descuido de estos aspectos conducir√° a c√°lculos incorrectos y resultados visualmente est√©ticos. <br><br><h4>  Sombreador PBR para iluminaci√≥n anal√≠tica </h4><br>  Entonces, junto con los toques finales en forma de compresi√≥n tonal y correcci√≥n gamma, solo queda transferir el color final del fragmento a la salida del sombreador de fragmentos y el c√≥digo del sombreador PBR para iluminaci√≥n directa puede considerarse completado.  Finalmente, echemos un vistazo al c√≥digo completo de la funci√≥n <i>main ()</i> de este sombreador: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 330 core out vec4 FragColor; in vec2 TexCoords; in vec3 WorldPos; in vec3 Normal; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   uniform vec3 albedo; uniform float metallic; uniform float roughness; uniform float ao; //   uniform vec3 lightPositions[4]; uniform vec3 lightColors[4]; uniform vec3 camPos; const float PI = 3.14159265359; float DistributionGGX(vec3 N, vec3 H, float roughness); float GeometrySchlickGGX(float NdotV, float roughness); float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness); vec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness); void main() { vec3 N = normalize(Normal); vec3 V = normalize(camPos - WorldPos); vec3 F0 = vec3(0.04); F0 = mix(F0, albedo, metallic); //    vec3 Lo = vec3(0.0); for(int i = 0; i &lt; 4; ++i) { //        vec3 L = normalize(lightPositions[i] - WorldPos); vec3 H = normalize(V + L); float distance = length(lightPositions[i] - WorldPos); float attenuation = 1.0 / (distance * distance); vec3 radiance = lightColors[i] * attenuation; // Cook-Torrance BRDF float NDF = DistributionGGX(N, H, roughness); float G = GeometrySmith(N, V, L, roughness); vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0); vec3 kS = F; vec3 kD = vec3(1.0) - kS; kD *= 1.0 - metallic; vec3 numerator = NDF * G * F; float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0); vec3 specular = numerator / max(denominator, 0.001); //       Lo float NdotL = max(dot(N, L), 0.0); Lo += (kD * albedo / PI + specular) * radiance * NdotL; } vec3 ambient = vec3(0.03) * albedo * ao; vec3 color = ambient + Lo; color = color / (color + vec3(1.0)); color = pow(color, vec3(1.0/2.2)); FragColor = vec4(color, 1.0); }</span></span></span></span></code> </pre> <br>  Espero que despu√©s de leer la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">parte te√≥rica</a> y con el an√°lisis actual de la expresi√≥n de la capacidad reflexiva, esa lista deje de parecer intimidante. <br><br>  Utilizamos este sombreador en una escena que contiene cuatro fuentes de luz puntuales, un cierto n√∫mero de esferas cuyas caracter√≠sticas de superficie cambiar√°n el grado de rugosidad y metalicidad a lo largo de los ejes horizontal y vertical, respectivamente.  En la salida obtenemos la siguiente imagen: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mq/hn/sq/mqhnsqjmfli43gtcnbzzlfglcfa.png"></div><br>  La metalicidad cambia de cero a uno de abajo hacia arriba, y la rugosidad es similar, pero de izquierda a derecha.  Se hace evidente que cambiando solo estas dos caracter√≠sticas de la superficie, ya es posible establecer una amplia gama de materiales. <br><br>  El c√≥digo fuente completo est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> . <br><br><h2>  PBR y texturizado </h2><br>  Ampliaremos nuestro modelo de superficie transmitiendo caracter√≠sticas en forma de texturas.  De esta manera, podemos proporcionar control por fragmento de los par√°metros del material de superficie: <br><br><pre> <code class="cpp hljs">[...] uniform sampler2D albedoMap; uniform sampler2D normalMap; uniform sampler2D metallicMap; uniform sampler2D roughnessMap; uniform sampler2D aoMap; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ vec3 albedo = <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(texture(albedoMap, TexCoords).rgb, <span class="hljs-number"><span class="hljs-number">2.2</span></span>); vec3 normal = getNormalFromNormalMap(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> metallic = texture(metallicMap, TexCoords).r; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> roughness = texture(roughnessMap, TexCoords).r; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ao = texture(aoMap, TexCoords).r; [...] }</code> </pre> <br>  Tenga en cuenta que la textura del albedo de la superficie generalmente es creada por artistas en el espacio de color sRGB, por lo que en el c√≥digo anterior devolvemos el color del texel al espacio lineal para que pueda usarse en c√°lculos posteriores.  Dependiendo de c√≥mo los artistas crean la textura que contiene los datos del <i>mapa de oclusi√≥n ambiental</i> , tambi√©n puede tener que llevarse al espacio lineal.  Los mapas de metalicidad y rugosidad casi siempre se crean en un espacio lineal. <br><br>  El uso de texturas en lugar de par√°metros de superficie fijos en combinaci√≥n con el algoritmo PBR proporciona un aumento significativo en la fiabilidad visual en comparaci√≥n con los algoritmos de iluminaci√≥n utilizados anteriormente: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/vb/6y/kwvb6y_cnms7xxs1donnvr5ktxc.png"></div><br>  El c√≥digo de ejemplo de texturas completo est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> , y las texturas utilizadas est√°n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> (junto con la textura de sombreado de fondo).  Le llamo la atenci√≥n sobre el hecho de que las superficies fuertemente met√°licas aparecen oscurecidas bajo condiciones de iluminaci√≥n directa, ya que la contribuci√≥n de la reflexi√≥n difusa es peque√±a (en el l√≠mite no hay ninguna).  Su sombreado se vuelve m√°s correcto solo cuando se tiene en cuenta el reflejo del espejo de la iluminaci√≥n del entorno, lo que haremos en las pr√≥ximas lecciones. <br><br>  Por el momento, el resultado puede no ser tan impresionante como algunas demostraciones de PBR; sin embargo, todav√≠a no hemos implementado un sistema de iluminaci√≥n basado en im√°genes ( <i>IBL</i> ).  Sin embargo, nuestro render ahora se considera basado en principios f√≠sicos e, incluso sin IBL, muestra una imagen m√°s confiable que antes. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es424453/">https://habr.com/ru/post/es424453/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es424437/index.html">Olmo C√≥modo e inc√≥modo. Json.Encoder y Json.Decoder</a></li>
<li><a href="../es424441/index.html">Novedades en el primer CTP de SQL Server 2019</a></li>
<li><a href="../es424443/index.html">Vivaldi 2.0 a nuestro favor</a></li>
<li><a href="../es424445/index.html">La traducci√≥n de Neil Ford de Microservicios como una arquitectura evolutiva</a></li>
<li><a href="../es424447/index.html">Lisp con sabor a Pascal o al lenguaje de programaci√≥n 8501</a></li>
<li><a href="../es424455/index.html">Intel Optane: ahora 1,5 terabytes</a></li>
<li><a href="../es424457/index.html">Actualizaci√≥n de IDA Pro. Aprendiendo a escribir gestores de arranque en Python</a></li>
<li><a href="../es424459/index.html">Historia de √©xito, o DEV + DEVOPS + OPS</a></li>
<li><a href="../es424461/index.html">¬øPor qu√© aprender idiomas impopulares? Ejemplo de comunidad F #</a></li>
<li><a href="../es424463/index.html">C√≥mo la certeza afecta los pagos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>