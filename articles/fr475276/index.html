<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üêΩ üöå üë©üèΩ‚Äç‚úàÔ∏è Comment √©crire assert correctement üçà üßíüèæ üêÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Parlons maintenant des assertions. 

 Les affirmations sont l'une des choses consid√©r√©es comme acquises, donc tout ici semble √™tre des sp√©cialistes. Q...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment √©crire assert correctement</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/475276/"> Parlons maintenant des assertions. <br><br>  Les affirmations sont l'une des choses consid√©r√©es comme acquises, donc tout ici semble √™tre des sp√©cialistes.  Quelqu'un utilise Java ou Junit int√©gr√©, quelqu'un utilise des biblioth√®ques avanc√©es, quelqu'un construit les siennes. <br><br>  Mais essayons d'aborder cela plus s√©rieusement.  Comment, en fait, non? <br><a name="habracut"></a><br>  Tout d'abord, les assertions font double emploi avec la sp√©cification.  Si la sp√©cification shouldReturnValidOrder est sp√©cifi√©e, cela doit √™tre v√©rifi√© et non assertNotNull. <br><br>  Deuxi√®mement, les assertions devraient √™tre faciles √† lire.  C'est-√†-dire, instantan√©ment, en comparant avec la sp√©cification. <br><br>  S'il y a trop d'affirmations (√† mon go√ªt extr√™me, il y en a beaucoup plus, mais nous mettons une limite d'au moins cinq √† sept), alors le test cesse d'√™tre compr√©hensible.  Pour de bon, chaque test ne devrait avoir qu'une seule raison de tomber. <br><br>  Les actifs peuvent √™tre dirig√©s vers: un champ primitif, un objet, une collection, rarement une fonction ou un thunk. <br><br>  Plus l'objet est complexe, plus les assertions seront complexes et diverses, et plus il sera difficile de lire et de trouver des erreurs. <br><br>  Les d√©clarations positives se lisent mieux que les d√©clarations doubles n√©gatives. <br><br>  Les m√©thodes standard sont mieux lues que les assistants personnalis√©s.  (Qui sait qui et o√π a test√© la biblioth√®que des aides).  Et les assertions devraient √™tre dans le corps de la m√©thode de test, et non quelque part √† l'arri√®re des assistants de test (le sonar jure √† juste titre sur l'absence d'assertions). <br>  Les actifs sur les champs sont plus compr√©hensibles que les assertions sur les objets, et en particulier sur les collections. <br><br>  Dans le cas de champs imbriqu√©s, il est logique de tester compl√®tement. <br><br>  Pas <br><br><pre><code class="java hljs">assertNotNull(order.getCustomer().getName)</code> </pre> <br>  mais <br><br><pre> <code class="java hljs">assertNotNull(order) assertNotNull(order.getCustomer()) assertNotNull(order.getCustomer().getName())</code> </pre><br>  Les assers ne v√©rifient pas simplement b√™tement ce qui est retourn√© par la m√©thode, mais l'influencent.  Et si nous pouvons le changer, alors nous devons le changer. <br><br>  Il est relativement difficile de faire des affirmations sur les collections.  Contiennent-ils des z√©ros, sont-ils tri√©s, exactement comment sont-ils tri√©s, comment les √©l√©ments sont-ils v√©rifi√©s pour l'√©galit√©, etc.  - tout cela fait des collections des objets difficiles √† affirmer, surtout quand il y a une logique dans la m√©thode li√©e aux √©l√©ments des collections. <br><br>  Par cons√©quent, une m√©thode comme: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">List&lt;Order&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOrderList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;OrderDao&gt; orderDaoList)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> orderDaoList.stream().map(orderDao=&gt;order.name(orderDao.getName).build()).collect(Collectors.toList()) }</code> </pre><br>  il est facile de le diviser en deux, un transformateur orderDao =&gt; commandez et testez-le s√©par√©ment, et le second testera le mappage des collections sur le mappeur abstrait, et nous pouvons le tester sur le talon. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-function">List&lt;Order&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getOrderList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(List&lt;OrderDao&gt; orderDaoList, OrderDaoToOrderMapper mapper)</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> orderDaoList.stream().map(mapper::map).collect(Collectors.toList()) }</code> </pre><br>  D'un autre c√¥t√©, les collections se pr√™tent bien √† la typification et √† l'expansion, c'est-√†-dire  nous pouvons relativement facilement cr√©er une collection de son propre type avec toutes les propri√©t√©s test√©es, la co- et la contravariance, etc.  Par cons√©quent, au lieu d'une liste g√©n√©rique, nous pourrions cr√©er notre propre OrderList, ou OrderSet, ou OrderSortedSet, et plus sp√©cifique, mieux c'est.  Et les tests deviendront plus faciles. <br><br>  Il n'est pas beaucoup plus difficile de faire des d√©clarations sur les fonctions que sur les objets, et elles sont bien typ√©es dans certains langages, vous pouvez donc probablement recommander une meilleure frappe, c'est-√†-dire  au lieu de Func &lt;Order, Order&gt;, renvoyez certains OrderComparator. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr475276/">https://habr.com/ru/post/fr475276/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr475264/index.html">Des renifleurs qui pourraient: comment la famille FakeSecurity a infect√© les boutiques en ligne</a></li>
<li><a href="../fr475266/index.html">Nous inversons les mobiles 1 sous Android. Comment ajouter un peu de fonctionnalit√© et abandonner quelques soir√©es</a></li>
<li><a href="../fr475268/index.html">Param√©trage incertain comme m√©thode universelle pour construire l'architecture d'application en C ++ et Java pour un minimum. le prix</a></li>
<li><a href="../fr475270/index.html">SwiftUI: cr√©ation de sections extensibles / r√©ductibles en mode liste</a></li>
<li><a href="../fr475272/index.html">Migration vers une infrastructure d'attente asynchrone √† Rust</a></li>
<li><a href="../fr475280/index.html">Mots de passe Cisco, migration de zone DNS, z√©ro requ√™te LDAP, nous collectons des paquets Ethernet. R√©solution de probl√®mes sur un r√©seau avec r0ot-mi. 2e partie</a></li>
<li><a href="../fr475284/index.html">Gestionnaire et singes d'une minute, recueil</a></li>
<li><a href="../fr475286/index.html">La trig√©n√©ration: une alternative √† l'approvisionnement √©nerg√©tique centralis√©</a></li>
<li><a href="../fr475288/index.html">Discrimination des employ√©s par √¢ge - impitoyable et d√©nu√© de sens</a></li>
<li><a href="../fr475290/index.html">Club des p√®res anonymes 2019-2020 sur Habrahabr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>