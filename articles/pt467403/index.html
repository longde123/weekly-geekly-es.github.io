<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üç¶ üëÄ üîé O que voc√™ pode e n√£o pode extrair dos componentes da web üö• üßù üòô</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Este n√£o √© um tutorial ou uma revis√£o completa - notas bastante interessantes depois de compilar uma biblioteca de componentes. Tudo come√ßou com a his...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O que voc√™ pode e n√£o pode extrair dos componentes da web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467403/"> Este n√£o √© um tutorial ou uma revis√£o completa - notas bastante interessantes depois de compilar uma biblioteca de componentes.  Tudo come√ßou com a hist√≥ria cotidiana usual: existe um c√≥digo legado, voc√™ precisa prender pipmochek e pequenos gravetos ao legado, n√£o √© poss√≠vel reescrever nada uma vez e n√£o tocar em nada aqui com as m√£os;  n√£o toque nos pacotes grandes e assustadores por precau√ß√£o e, de fato, por que voc√™ n√£o pega a melhor estrutura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Vanilla JS</a> e come√ßa a escrever nela, como seus av√≥s deixaram? <br><a name="habracut"></a><br>  Mas como era previsto que o volume de trabalho era muito percept√≠vel, por alguma raz√£o ningu√©m experimentou impulsos criativos com a ideia de escrever tudo em JS simples.  Fomos examinar as ferramentas e escolher delas aquelas que n√£o assustariam os consumidores de nossos componentes a ponto de tremer. <br><br><h2>  As ferramentas </h2><br>  Embora eu j√° tenha estragado toda esta se√ß√£o, algo precisa ser dito aqui.  Em primeiro lugar, os componentes da Web imediatamente ficaram absolutamente incontestados: quando o resultado da criatividade √© uma biblioteca de componentes e voc√™ n√£o pode arrastar um grande monstro para a Angular, que se modulariza completamente, o que resta √© que voc√™ n√£o precisa arrastar o c√≥digo da biblioteca, e funciona "exatamente assim" em navegadores modernos.  Os pr√≥prios componentes da Web ainda s√£o a mesma estrutura incr√≠vel do Vanilla JS, com apenas um pouco de modularidade resolvida.  Ainda h√° muito para escrever com suas pr√≥prias m√£os - voc√™ precisa de um inv√≥lucro com padroniza√ß√£o e tamb√©m √© desej√°vel que exista um m√≠nimo de um padr√£o para cada componente. <br><br>  N√£o existem muitos inv√≥lucros e at√© maduros o suficiente para serem usados ‚Äã‚Äãem um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">produto</a> s√©rio: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hybrids,</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">LitElement,</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Stencil.</a>  E todos fazem a mesma coisa da mesma maneira, a diferen√ßa est√° nas pequenas coisas.  O Hybrids est√° tentando ficar na moda e sem classe, o Stencil est√° na moda e reage, o LitElement nem parece estar se esfor√ßando.  E de acordo com os resultados da escolha de insignificantes insignificantes, LitElement permaneceu na sa√≠da - OOPshniki desviou o olhar de Hybrids, e n√£o amadores da rea√ß√£o - de Stencil, no qual JSX geralmente sentia uma repeti√ß√£o das id√©ias n√£o indiscut√≠veis da rea√ß√£o. <br><br><h2>  Para a batalha? </h2><br>  N√£o √© t√£o interessante falar sobre o que voc√™ pode, est√° tudo na documenta√ß√£o, por isso continuarei falando principalmente sobre o que voc√™ n√£o pode: eles geralmente n√£o escrevem sobre isso na documenta√ß√£o. <br><br><h3>  Padr√µes </h3><br>  Em termos de modelagem, o LitElement usa lit-html, que √© perfeitamente minimalista: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> template = html<span class="hljs-string"><span class="hljs-string">` &lt;div attr=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${a}</span></span></span><span class="hljs-string"> .property=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${b}</span></span></span><span class="hljs-string"> ?booleanAttr=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${c}</span></span></span><span class="hljs-string"> @click=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${handleClick}</span></span></span><span class="hljs-string"> &gt;&lt;/div&gt; `</span></span>;</code> </pre> <br>  Isso n√£o √© html, mas √© preciso lembrar exatamente tr√™s constru√ß√µes em um s√≠mbolo aqui - ".", "?" E "@".  Tudo o resto √© html.  Em rela√ß√£o ao JSX, com seu className e o restante, √© um pouco melhor e legalmente separado do c√≥digo JS / TS.  Mas, a prop√≥sito, o primeiro ‚Äúimposs√≠vel‚Äù segue a partir daqui - vincular qualquer coisa horr√≠vel n√£o funciona, voc√™ pode vincular apenas os valores de atributos e propriedades e o conte√∫do do texto.  Obviamente, n√£o h√° m√°gica nos literais de modelo com tags e, ao custo de uma certa quantidade de pervers√µes, voc√™ pode compilar uma string em tempo de execu√ß√£o e anexar ligantes de lit-html a ela, mas isso est√° realmente entrando na renderiza√ß√£o com suas m√£os e, com o mesmo sucesso, voc√™ pode coletar linhas e envi√°-las no innerHTML.  Normalmente, tudo isso √© feito atrav√©s da composi√ß√£o dos modelos e da decomposi√ß√£o de componentes complexos em componentes mais simples.  O padr√£o √© bastante pequeno - a liga√ß√£o do modelo est√° praticamente ausente, porque √© apenas uma vari√°vel e, para criar um componente, voc√™ precisa de cinco linhas "extras". <br><br><h3>  Componentes </h3><br>  O √∫nico problema (mas significativo) dos componentes √© que, para "misturar" completamente os componentes com a renderiza√ß√£o dos filhos, em algum lugar dentro do modelo dos pais voc√™ precisa do DOM da sombra.  Que, √© claro, est√° inclu√≠do no LitElement por padr√£o e, em geral, parece n√£o ser ruim.  Mas o DOM sombra atualmente tem um grande problema com estilos, semelhante aos m√≥dulos css: para isolar estilos, ele isola perfeitamente, mas ao longo do caminho isso reduz toda a cascata.  √â simplesmente imposs√≠vel entrar em estilos isolados do lado de fora.  Geralmente (quase) nada. <br><br>  Isso interfere bastante, por exemplo, na capacidade de rolar componentes de diferentes t√≥picos.  Tudo o que pode ser feito com o DOM da sombra √© agrupar todas as op√ß√µes de estilo dentro do componente ou tentar tornar o tema completamente dependente das vari√°veis ‚Äã‚Äãcss - esse √© o "quase" com o qual voc√™ pode alterar os estilos isolados.  Mas com o qual √© necess√°rio fornecer vari√°veis ‚Äã‚Äãliteralmente para qualquer estiliza√ß√£o razo√°vel e, com uma alta probabilidade, ainda √© adicionado mais. <br><br>  Felizmente, o Shadow DOM no LitElement pode simplesmente ser desativado no componente.  Infelizmente, isso tamb√©m desativar√° a capacidade de direcionar filhos do elemento nos lugares certos do modelo via &lt;slot&gt;.  Felizmente, tendo pervertido um pouco, voc√™ pode obter o primeiro e o segundo: para isso, <i>basta</i> colocar uma raiz de sombra em cada slot necess√°rio e n√£o ter nada nele, exceto, de fato, &lt;slot&gt;.  Assim, a estiliza√ß√£o do componente estar√° aberta e os slots estar√£o presentes.  Eu queria dar um breve exemplo, mas, infelizmente, o c√≥digo para manipular slots n√£o funciona de qualquer maneira brevemente - pessoas muito interessadas podem ler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">esse problema aqui.</a>  Eu fui inspirado por id√©ias de l√°. <br><br>  Bem, tamb√©m vale a pena mencionar que, no futuro previs√≠vel, o suporte ao navegador e os polyfills <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">:: part</a> e :: theme provavelmente cair√£o, e com eles o DOM sombra se tornar√° a solu√ß√£o que todos esperam h√° muitos anos - para que fique isolado e extens√≠vel / mut√°vel.  Mas at√© agora isso ainda n√£o est√° l√°. <br><br><h3>  Implantar </h3><br>  Nesse momento, a escrita sobre o que √© imposs√≠vel n√£o sai mais, porque tudo pode ser mais aprofundado - existem bibliotecas iluminadas na forma de m√≥dulos ES e, portanto, sem problemas, s√£o captadas por tudo e de qualquer maneira (mesmo com um navegador simples que pode manipular m√≥dulos )  Para o IE e o Edge atual, √© necess√°rio conectar um polyfill de componentes da Web, para m√≥dulos. Se voc√™ deseja levant√°-los diretamente do navegador, precisa de algo que alivie a dor das importa√ß√µes do navegador, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">es-module-shims.</a>  Bem, ou um empacotador. <br><br>  Os componentes da Web conectados ao aplicativo s√£o simples e brega de usar, voc√™ pode come√ßar a us√°-los em html e extrair seus m√©todos e propriedades no c√≥digo.  Voc√™ pode ver como tudo isso pode ser anexado a outra biblioteca ou estrutura <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> (a rea√ß√£o foi excelente, mas, em m√©dia, tudo √© muito bom).  N√≥s nos apegamos ao AngularJS, e tudo era trivial: o ng-prop permite transferir algo para o componente e o ng-on permite que voc√™ ou√ßa eventos. <br><br><h2>  Sum√°rio </h2><br>  Se voc√™ precisar criar uma interface do usu√°rio de componente e prend√™-la a algo em que voc√™ absolutamente n√£o deseja entrar (c√≥digo legado, estrutura assustadora fora de moda e outros lugares ruins) - os componentes da Web ajudam muito bem.  As principais bibliotecas "maduras" que s√£o gerenciadas com elas s√£o pequenas em tamanho, n√£o h√° problemas t√©cnicos s√©rios de modularidade e layout, e voc√™ pode simplesmente fazer isso.  Que tipo de biblioteca voc√™ usa - mesmo que n√£o seja t√£o importante, existem muito poucas diferen√ßas entre elas no momento;  Especificamente, o LitElement que adotamos n√£o criou um √∫nico problema adicional para n√≥s e funcionou da maneira esperada em todos os casos. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt467403/">https://habr.com/ru/post/pt467403/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt467391/index.html">Yandex apresenta RPKI</a></li>
<li><a href="../pt467393/index.html">NX Bootcamp come√ßa em outubro</a></li>
<li><a href="../pt467395/index.html">Habr Weekly # 18 / New Apple Gadgets, um smartphone totalmente modular, a vila de programadores na Bielorr√∫ssia, o fen√¥meno XY</a></li>
<li><a href="../pt467399/index.html">Voc√™ n√£o pode proibir: como implementar o conceito BYOD e n√£o prejudicar a seguran√ßa das informa√ß√µes</a></li>
<li><a href="../pt467401/index.html">Compara√ß√£o de Tesla Model S e Porsche Taycan</a></li>
<li><a href="../pt467405/index.html">Lyft lan√ßa concurso de reconhecimento de objetos 3D</a></li>
<li><a href="../pt467407/index.html">Trabalhamos com o cobot Dobot M1</a></li>
<li><a href="../pt467409/index.html">Para fazer neg√≥cios no Vale do Sil√≠cio, voc√™ precisa se comportar</a></li>
<li><a href="../pt467413/index.html">Estrutura de microsservi√ßo PHP - `Hello world` do Swoft</a></li>
<li><a href="../pt467415/index.html">Mercado de c√¢mbio moderno</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>