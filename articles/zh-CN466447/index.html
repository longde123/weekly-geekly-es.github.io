<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤦🏿 🏣 🤰🏼 我们应该为CDN做什么？ 💠 💪 👺</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈勃！ 在本文中，我们将构建自己的CDN。 为什么不使用现成的解决方案？ 由于作者的网站是完全静态的，因此是在Jekyll上制作的，需要尽快提供大图片。 该服务器不应缓存，它应该存储整个站点，支持HTTP / 2和Brotli，并且应在所有服务器上安装相同的证书。 

 我们还将在Windows S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我们应该为CDN做什么？</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ruvds/blog/466447/">哈勃！ 在本文中，我们将构建自己的CDN。 为什么不使用现成的解决方案？ 由于作者的网站是完全静态的，因此是在Jekyll上制作的，需要尽快提供大图片。 该服务器不应缓存，它应该存储整个站点，支持HTTP / 2和Brotli，并且应在所有服务器上安装相同的证书。 <br><br> 我们还将在Windows Server 2019 Core上运行的IIS上完成所有操作。 <br><br><div style="text-align:center;"> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/jd/-8/bh/jd-8bhr2bkenojiyts1op3nxdr0.jpeg"></a> </div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">简要介绍实施</font> </h2><br> 在末端节点，我们将管理内置在操作系统中的方法，我们需要： <br><br><ol><li> 活动目录 </li><li>  DFS </li><li>  IIS </li><li>  Winacme </li><li>  RSAT </li></ol><br> 可选，但建议： <br><br><ol><li>  Windows管理中心 </li></ol><br> 在具有站点的站点上，仅需要IIS和DFS，Active Directory是必需的，DFS是Active Directory所必需的，它将在服务器之间同步站点的内容。 需要RSAT来管理组件，并且需要Windows Admin Center来编辑注册表。 这也可以通过Powershell完成，我将对此进行讨论。 <br><br> 作者的域名为***。***。Wtf（请不要惊慌），服务器由数据中心命名，并以cache-zur1，cahe-ru等形式命名。 部署了AD，并将服务器连接到它。 现在按顺序。 <br><br><h2>  <font color="#3AC1EF">点选择</font> </h2><br>  RUVDS拥有<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">8个数据中心</a> -欧洲的3个和俄罗斯的5个。 我的选择落在莫斯科的Rucloud和LD8（伦敦的LD8）上。  Rucloud因为它与M9几乎没有什么不同，并且通过伦敦有一条通往美国的跨大陆电缆，因此在欧洲这是必须的。 对于欧洲较密集的地区，您可以选择瑞士或德国-通常，您可以停下来。 <br><br><h2>  <font color="#3AC1EF">选择DNS GeoIP</font> </h2><br> 如果客户端要访问该站点，那么如何了解应该向哪个服务器传输数据？ 当然使用DNS。 也就是说，根据访问DNS的IP地址，将给出相关答案。 <br><br> 我们可以使用自己的DNS（BIND和Maxmind插件）或交钥匙解决方案（Route53）。 订阅Maxmind GeoIP数据库的费用为每月25美元，Route53的费用为每个域区域0.50美元，如果您要处理一百万个请求，则还需支付1美分。 此外，创建另一点来加强DDoS攻击是最后一件事，因此我的选择落在Route53上。 <br><br> 本文是关于欧洲的CDN。 如果您需要俄罗斯的CDN，那么针对您自己的DNS的选择就显而易见了，因为Route53提供了按国家（而非城市）进行的路由。 <br>  Microsoft具有类似的服务（Azure Traffic Manager）。 <br><br><h2>  <font color="#3AC1EF">1.安装IIS</font> </h2><br>  <b>1.1。</b>  <b>IIS安装</b> <br><br> 我们安装IIS的基本组件，集中式证书的支持组件，并在主服务器上安装对远程管理的其他支持。 仅一台服务器需要此组件-启用共享配置后，即使已配置了远程管理，也将无法管理其他服务器。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f09/d98/c66/f09d98c6665d1e5106436c0fd9fc258d.png"><br><br> 通过Powershell： <br><br><pre><code class="plaintext hljs">Install-WindowsFeature Web-Server, Web-CertProvider</code> </pre> <br> 在主服务器上，您必须另外安装： <br><br><pre> <code class="plaintext hljs">Install-WindowsFeature Web-Mgmt-Service</code> </pre> <br>  <b>1.1.1打开遥控器</b> <br><br> 为了能够远程管理IIS服务器，我们需要提高IIS远程管理服务。 在主服务器上，启动服务： <br><br><pre> <code class="plaintext hljs">start-service WMSVC set-service -Name WMSVC -StartupType Automatic</code> </pre> <br> 现在，我们可以通过注册表进行管理。 <br><br><pre> <code class="plaintext hljs">HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WebManagement\Server</code> </pre> <br> 当然，管理注册表的最简单方法是通过Windows Admin Center。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8fd/9cb/7b1/8fd9cb7b19b7523283885d61564eb920.png"><br><br> 但这也可以通过Powershell完成： <br><br><pre> <code class="plaintext hljs">Set-Itemproperty -path "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\WebManagement\Server" -Name "EnableRemoteManagement" -value "1"</code> </pre> <br> 在Windows Server 2012和2016中，防火墙规则本身不会上升；您需要编辑防火墙。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c7/13e/d35/8c713ed356d5418549cdc602c62e3161.png"><br><br><pre> <code class="plaintext hljs">Set-NetFirewallRule -Name IIS-WebServerRole-WMSVC-In-TCP -Enabled True</code> </pre> <br> 检查它是否上升： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/929/121/aa3/929121aa33cdffa49494d791b583da7f.png"><br><br><pre> <code class="plaintext hljs">Test-NetConnection 8.8.8.8 -port 8172</code> </pre> <br> 在三个不同的地方进行了三个编辑，现在我们可以使用另一个带有桌面的服务器通过IIS管理器连接到我们的服务器。 这只是为了方便后续管理。 <br><br>  <b>1.2我们削减了配置的集中化</b> <br><br> 在IIS管理器中没有用于安装集中式配置和证书的按钮，它们仅在本地服务器管理器中，因此对于Server Core，您将必须通过Powershell进行所有操作。 <br><br> 通过SMB进行配置和证书的集中化。 因此，我使两个被剥夺权利的用户（分别用于配置和证书）分别对其文件夹具有读取访问权限，并将其分别命名为certadmin和configadmin。 <br><br> 建议用户在主服务器上位于本地-如果您的域控制器死亡，那么代表域用户通过SMB坚持配置和证书的应用程序将死亡。 使用本地用户消除了这种情况。 <br><br>  <b>1.2.1制作共享文件夹</b> <br><br> 两个公用文件夹应存储在其中一台服务器上，从中可以获取配置和证书。 作为共享文件夹的路径，我们采用IIS配置的默认路径： <br><br><pre> <code class="plaintext hljs">New-SmbShare -ReadAccess configadmin@**.**wtf -Path C:\windows\System32\Inetsrv\Config -Name sharedconfigs</code> </pre> <br> 对于证书，我们可以选择任何一个。 我将它们放在带有IIS的文件夹中。 <br><br><pre> <code class="plaintext hljs">New-SmbShare -Path C:\inetpub\centralizedcerts -Name sharedconfigs -ReadAccess configadmin</code> </pre> <br>  <b>1.2.2我们将节点连接到配置</b> <br><br> 只需为将读取此配置的那些服务器完成设置。 我的名称为cache-ru的主服务器将是head，因此我在其他两个服务器上进行了配置。 <br> 输入有权访问该文件夹的用户的密码： <br><br><pre> <code class="plaintext hljs">$pass = Read-Host -AsSecureString Enable-IISSharedConfig -PhysicalPath \\cache-ru.**.**wtf\SharedConfig -UserName configadmin@**.**wtf -Password $pass -DontCopyRemoteKeys</code> </pre> <br> 进入新会话后应立即打开。 要验证一切正常，您可以打开RSAT→计算机管理→共享文件夹→会话。 我们将看到用户会话和服务器的IP地址，该用户在该用户下读取共享文件夹。 在客户端，它由cmdlet检查： <br><br><pre> <code class="plaintext hljs">Get-IISSharedConfig</code> </pre> <br> 这对我来说是这样的： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/459/bc9/857/459bc9857540abe84a63229992b7d3dd.png"><br><br>  <b>1.2.2将节点连接到证书</b> <br><br> 下一行只能直接输入，并且直接通过GUI连接到运行Server的桌面，而不能在Server Core上运行。 <br><br><pre> <code class="plaintext hljs">$pass = Read-Host -AsSecureString Enable-IISCentralCertProvider -CertStoreLocation \\cache-ru.**.**wtf\centralizedcerts -UserName certadmin@**.**wtf -Password $pass</code> </pre> <br> 如果尝试通过Winrm输入它，则将看到以下输出： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/85f/e1b/c76/85fe1bc7691f4a7c4765560e4d62a2f8.png"><br><br> 要远程执行此操作，您需要编辑注册表。 多么方便！ 我们飞入： <br><br><pre> <code class="plaintext hljs">HKLM:\SOFTWARE\Microsoft\IIS\CentralCertProvider\</code> </pre> <br> 使用参数“ 1”创建一个32位DWORD“ Enabled”： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/06c/ba1/e1e/06cba1e1e6dd5af05cc7f9d0279e138f.png"><br><br><pre> <code class="plaintext hljs">Set-ItemProperty -Path HKLM:\SOFTWARE\Microsoft\IIS\CentralCertProvider\ -Name Enabled -Value 1</code> </pre> <br> 然后，我们使用参数\\ cache-ru。**。** wtf \ centraledcerts创建字符串值CertStoreLocation： <br><br><pre> <code class="plaintext hljs">Set-ItemProperty -Path HKLM:\SOFTWARE\Microsoft\IIS\CentralCertProvider\ -Name CertStoreLocation -Value &lt;a href="about:blank"&gt;\\cache-ru.**.**wtf\centralizedcerts&lt;/a&gt;</code> </pre> <br> 要检查是否一切正常，我们使用： <br><br><pre> <code class="plaintext hljs">Get-IISCentralCertProvider</code> </pre> <br> 输出应如下所示： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c8b/dd6/48d/c8bdd648d8d5f147c8bd28d1bad9cfc0.png"><br><br> 然后，我们才输入： <br><br><pre> <code class="plaintext hljs">$pass = Read-Host -AsSecureString Set-IISCentralCertProvider -UserName certadmin@**.**wtf -Password $pass</code> </pre> <br> 再次检查： <br><br><pre> <code class="plaintext hljs">Get-IISCentralCertProvider</code> </pre> <br> 开箱即用的所有内容都将被调用。 与常见配置不同，集中式证书不会创建活动的SMB会话。 <br><br>  <b>1.2.3布罗特利</b> <br><br> 在每台服务器上，下载并运行<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">IIS压缩</a>文件 <br><br><pre> <code class="plaintext hljs">Start-Process .\iiscompression_amd64.msi -ArgumentList /quiet</code> </pre> <br> 我们已经共享了配置，因此您只需要在一个地方进行配置。 使用IIS管理器，我们转到主服务器上的配置编辑器。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/489/874/4db/4898744dbe1eea52b6bfe3c92ea5a1ad.png"><br><br><pre> <code class="plaintext hljs">system.webServer/httpCompression</code> </pre> <br> 并将Brotli的StaticCompressionLevel设置为11，将Gzip的StaticCompressionLevel设置为9，这是他们可以执行的最大操作。 <br><br>  <b>1.2.4 MIME和标头</b> <br><br> 开箱即用，IIS不会传输编码标头，这就是为什么西里尔字母变成符文的原因。 同样在MIME中，不需要添加webp格式条目。 <br><br>  <b>1.</b>转到调度程序→MIME。 找到.HTML并将其类型修改为：text / html; 字符集= utf-8 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e4c/bef/017/e4cbef017ae044d8720535ff9bdea63a.png"><br><br>  <b>2.</b>不要忘记Webp-您需要手动添加此MIME。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07a/b62/aec/07ab62aecf03ee9b4a32ecd4044d7a42.png"><br><br><h2>  <font color="#3AC1EF">2.我们颁发证书</font> </h2><br> 使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Winacme</a> 。 首先，您需要将域绑定到站点-这可以通过IIS管理器来完成。 构建CDN时，请勿选择主机验证，因为 问题首先从确认域名所有权开始，我们的选择是通过T​​XT记录进行验证。 您将必须手动将证书路径驱动到文件夹的路径，以及从挑战手动复制记录。 现在，让空气进入您的胸部。 <br><br> 为了不手动打印所有内容，请使用以下命令在服务器核心上启用RDP： <br><br><pre> <code class="plaintext hljs">cscript C:\Windows\System32\Scregedit.wsf /ar 0</code> </pre> <br> 这是RDP在服务器核心上的样子： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/856/2ea/478/8562ea478872a08964c125a8b997eae6.png"><br><br> 挑战后，证书将落入Winacme中指定的文件夹中。  Winacme将任务放在计划程序中以续订证书。 安装并忘记了。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f20/8e3/d33/f208e3d33f61e407a19e1ff53e14ecde.png"><br><br> 好了，完成后，我们可以关闭RDP-我们出于充分的理由安装了Server Core，发现了很多细微差别。 <br><br><pre> <code class="plaintext hljs">cscript C:\Windows\System32\Scregedit.wsf /ar 1</code> </pre> <br><h2>  <font color="#3AC1EF">3. Bindim证书到节点</font> </h2><br> 现在，您需要配置其他两个节点，以便HTTPS最终可以正常工作。 此时，在存储证书的服务器上，HTTPS已在运行。 为了使其余部分开始在HTTPS上工作，通常，这是通过netsh完成的。 <br><br> 就像我们习惯的那样，我们通过RDP连接到Windows Server Core来运行此管理单元。 不要在Microsoft网站上查看，尤其是在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">本</a>指南中。 其中的步骤描述不正确。 <br><br> 使用netsh http show sslcert，需要在主节点上获取appid，如下所述，我们将其输入： <br><br><pre> <code class="plaintext hljs">netsh http add sslcert ccs=443 appid= '{4dc3e181-e14b-4a21-b022-59fc669b0914}'</code> </pre> <br>  appid值必须用引号引起来，否则它将不起作用。 <br><br><h2>  <font color="#3AC1EF">4.安装DFS</font> </h2><br> 不要通过DFS同步证书和配置，是出于某种原因发明了专用工具。 我尝试了一下，结果变得很糟糕，由于某种未知的原因，采用config的服务器上的配置只是停止读取更改，尽管这是第一次成功。 我没有找出失败的原因，因此决定以其他方式进行处理。 <br><br> 进一步的配置仅通过RSAT完成，文档中指定的cmdlet仅在具有GUI的Windows Server下工作。 不能仅使用Server Core部署DFS复制。 您需要将另一台具有GUI的服务器或一台运行Windows 10 Pro（已安装RSAT）的计算机加入域。 <br><br>  <b>2.1。</b>  <b>安装</b> <br><br> 在每台服务器上，您需要安装DFS复制： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ebf/999/b17/ebf999b179089dd87a346406bfe6a09d.png"><br><br><pre> <code class="plaintext hljs">Install-WindowsFeature FS-DFS-Replication, FS-DFS-Namespace</code> </pre> <br>  <b>2.2。</b>  <b>制作一个新的复制组</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/53b/3e2/9d6/53b3e29d6aee1c0e9f9a6b4e8f5ea06e.png"><br><br> 首先，您需要致电我们的复制组。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/14d/7ce/a23/14d7cea23a3bd08b1aec745ed40c0fb3.png"><br><br> 选择您喜欢的拓扑。 就个人而言，将内容添加到一个地方会更方便，因此我选择了一颗星星。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2fb/a17/e99/2fba17e99d83b3bec4940c5517c2a690.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/7a2/6e4/508/7a26e4508dfe041bc25c5cf008120ec2.png"><br><br> 其中一台服务器应该是主服务器，它是复制开始的地方。 如果将文件上传到侦听器，则不会复制上传的文件。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d36/298/12a/d3629812afb96964a66db8a1c7682513.png"><br><br> 作为复制文件夹，我选择了包含站点的默认文件夹： <br><br><pre> <code class="plaintext hljs">C:\inetpub\wwwroot</code> </pre> <br> 该文件夹是此特定第一台服务器目录的路径。 您可以在任何位置复制此文件夹的内容，而不管其路径如何。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d10/e94/f5e/d10e94f5e3e48d88ddcc3a5cb97ff5a4.png"><br><br> 在一个组中，我们可以复制几个文件夹，将来如果需要，我们可以扩展它们的列表。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccc/ae9/649/cccae9649e5b0145fb38a6cd59d73490.png"><br><br> 完了 <br><br><h2>  <font color="#3AC1EF">5.测试性能</font> </h2><br> 要了解该网站真正赢得了多少访问者，您需要进行评估。 他们将从两点进行。 作者的电脑在莫斯科，在法兰克福的虚拟服务器。 这三点将分别进行测试。 这是一个摘要。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d26/12c/04a/d2612c04abedc5d8eb796cbeeaaf31f7.png"><br><br> 我们进入Devtools并观看瀑布。 平均而言，在医院中，在站点完全加载之前，CDN会减少大约200毫秒。 图片是页面上最大的对象，一旦进入视口即会加载，因此请注意蓝色垂直线。  CDN将纯HTML +样式和脚本加速了10到15毫秒，图片加载速度提高了220毫秒，这是一个非常明显的差异。 <br><br><div class="spoiler">  <b class="spoiler_title">莫斯科-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/12b/5e5/8a9/12b5e58a9665f6901f073c0eba3f2678.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">伦敦-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/03e/435/b93/03e435b93de7b098fbd98afdacc0c8f4.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">苏黎世-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/1f2/474/cfb/1f2474cfba94d72d5482cb9a0ba0c679.png"></div></div><br> 我还测量了本地主机上Jekyll的速度： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/514/976/285/514976285849bbf746909644173302ba.png"><br><br> 我们转到灯塔，看到奇怪的结果： <br><br><div class="spoiler">  <b class="spoiler_title">莫斯科-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f2b/516/abb/f2b516abbaeb5ea7ec29c39585719d38.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">伦敦-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/9ab/9d8/38c/9ab9d838cd9c67792381c0741ef81a27.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">苏黎世-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/12e/500/00b/12e50000b52c228beb3f08367fbbf00d.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Localhost-Jekyll：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/3eb/449/599/3eb449599c0eee7698301470b48ea67b.png"></div></div><br> 在这种合成中，远方服务器绕过本地主机。 但是为什么呢？ <br> 为了好玩，让我们摆脱Google字体并将其传输到我们的服务器。 <br><br><div class="spoiler">  <b class="spoiler_title">莫斯科-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/457/082/7cb/4570827cb685795120f645da992ebcf8.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">伦敦-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f90/fbd/2ad/f90fbd2ad39d80e6b246faf348fee577.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">苏黎世-莫斯科：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d45/2f0/530/d452f0530f2d1d914aba53649cff763d.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">Localhost-Jekyll：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/bc2/6a1/f27/bc26a1f275f6d3626de02d96b436c186.png"></div></div><br> 数据中心之间的结果保持一致。 但这仍然无法解释任何事情。 我对测试进行了多次重试，结果绝对是铁的，并且可以随时重现。 <br><br> 现在，我们将使用位于法兰克福的具有两个内核和4 GB RAM的VPS，看看它怎么说。 瀑布： <br><br><div class="spoiler">  <b class="spoiler_title">莫斯科-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/025/d40/dd7/025d40dd7962e7e312a6978cff91cabd.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">伦敦-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/961/e9f/acf/961e9facf3d0a4654654f3541c7093a6.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">苏黎世-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d5a/81e/399/d5a81e399de00ca9f3a451d09379f6cd.png"></div></div><br> 在这里，如果正确的话，仅在样式和HTML上节省的时间就达200毫秒。 也就是说，对于来自法兰克福的客户，该站点将仅快200毫秒。 这也反映在灯塔上。 在这种情况下，CDN不仅会加快在线商店的速度，而且还会促进简单的博客。 <br><br><div class="spoiler">  <b class="spoiler_title">莫斯科-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/e4d/e88/785/e4de88785e56ed3102cef5ade05f8462.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">伦敦-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/042/b1c/071/042b1c0716f7e44b2f2dfc0b3955a68f.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">苏黎世-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/db1/ae1/de5/db1ae1de5ebfd5be8c3af5e6822a4376.png"></div></div><br> 现在打开Goog​​le字体，然后再次查看灯塔。 <br><br><div class="spoiler">  <b class="spoiler_title">莫斯科-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/87d/ae6/281/87dae6281e2510fa35ee4aecd45079f0.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">伦敦-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/025/ec2/d7d/025ec2d7d6982b39261551f927167ad2.png"></div></div><br><div class="spoiler">  <b class="spoiler_title">苏黎世-法兰克福：</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/802/f0c/073/802f0c073e6fa0f445dda60d7823da00.png"></div></div><br> 不幸的是，我不再需要进行任何测试，因此我将结束。 <br><br><h2>  <font color="#3AC1EF">结论</font> </h2><br><ul><li> 用于输出所有静态数据的CDN是必需的，尤其是对于沉重的图片或较长的脚本而言。 </li><li> 使用Google字体是可能且必要的，在繁重的情况下，它确实可以加快网站速度。 </li><li> 主服务器，如果您决定在Windows上执行所有这些操作，建议您使用GUI。 </li><li> 从主服务器获取配置的用户最好是本地用户-如果域控制器发生故障，节点可能会失去与配置和证书的连接，并且应用程序池将停止，因为 将无法读取配置。 </li></ul><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/webt/it/t5/3p/itt53pns2iucwylb3bwn1fmmtnu.png"></a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN466447/">https://habr.com/ru/post/zh-CN466447/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN466437/index.html">培训Cisco 200-125 CCNA v3.0。 第43天。路由协议距离向量和链接状态</a></li>
<li><a href="../zh-CN466439/index.html">检查一下自己：您可以回答ChGK几个问题？</a></li>
<li><a href="../zh-CN466441/index.html">Python错误代码：开发人员最常犯的10个错误</a></li>
<li><a href="../zh-CN466443/index.html">ShIoTiny和世界：最小的模拟传感器或ADC</a></li>
<li><a href="../zh-CN466445/index.html">域之间信任之间的攻击</a></li>
<li><a href="../zh-CN466449/index.html">培训Cisco 200-125 CCNA v3.0。 第44天。OSPF简介</a></li>
<li><a href="../zh-CN466451/index.html">Read_You不能_throw</a></li>
<li><a href="../zh-CN466453/index.html">培训Cisco 200-125 CCNA v3.0。 第45天。配置OSPF</a></li>
<li><a href="../zh-CN466455/index.html">服务，微服务和面向批处理的编程</a></li>
<li><a href="../zh-CN466457/index.html">农业和太阳能电池板-电力工程师和农民的双赢策略</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>