<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>◾️ 💝 🥒 Soul Mikrotik gegen seelenloses ILV und den gleichen Anbieter 🏇🏾 👩🏾‍🤝‍👨🏼 🤞</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Der Artikel beschreibt einen Weg, um Zugang zu Ressourcen zu erhalten, die fälschlicherweise unter die Verteilung von Brötchen durch Roskomnadzor (im ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Soul Mikrotik gegen seelenloses ILV und den gleichen Anbieter</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467471/">  Der Artikel beschreibt einen Weg, um Zugang zu Ressourcen zu erhalten, die fälschlicherweise unter die Verteilung von Brötchen durch Roskomnadzor (im Folgenden: RKN) fallen.  Es wird fälschlicherweise gefangen.  Wir sind gesetzestreue Bürger und gehen nicht dorthin, wo uns unsere Regierungsbehörden verbieten.  Wenn Sie sich also plötzlich dazu entschließen, die Methode zu verwenden, um zu einer Art von "legal" blockierten Ressourcen zu gelangen, wird das harte Schwert der Gerechtigkeit wahrscheinlich über Ihren Kopf fliegen und ich bin nicht schuld daran, denn im Moment habe ich Sie gewarnt! <br><a name="habracut"></a><br>  Das Problem trat unerwartet auf, als unsere Zentrale an einen anderen Ort zog und infolgedessen den Anbieter wechselte.  Mitarbeiter in Scharen beschwerten sich bei mir, dass sie nicht auf die Websites zugreifen können, auf die sie zuvor Zugriff hatten.  Gleichzeitig waren von unseren anderen Büros bei anderen Anbietern noch Standorte verfügbar. <br><br>  Wegen des Umzugs habe ich das Problem einige Zeit ignoriert, aber als sich die Buchhaltungsabteilung zu beschweren begann (haben Sie auch die Buchhaltungsabteilung nach der Leitung des Unternehmens an Bedeutung?), Musste ich es klären. <br><br>  Der Verdacht fiel zunächst auf Probleme mit MTU und MSS.  Aber mit ihnen stellte sich glücklicherweise heraus, dass alles in Ordnung war.  Ich habe eine Problemdomäne basierend auf ILV gefunden, auch OK, die Domain ist sauber.  Ich habe die Site über die Gateways anderer Filialen (3 verschiedene Anbieter) geöffnet, sie wird geöffnet.  Aber über unseren Provider zur IP-Domain gehen auch Pings nicht.  Und dann habe ich geraten, die ILV-IP-Problemdomäne zu durchbrechen.  Sie haben bereits vermutet, dass sich die IP in der Datenbank befindet? <br><br>  Aber wo ist dann eine Weiterleitung zu einer Seite, die anzeigt, dass diese Ressource blockiert ist, etc.  usw., fragst du.  Und ich fragte.  Zuerst habe ich wirklich versucht, mehrere Websites zu öffnen, auf denen wir vorher, als es möglich war, alle nach etwas suchten, das wir sehen oder herunterladen konnten.  Und um sicherzustellen, dass auf diesen Websites keine Warnungen bezüglich des Blockierens angezeigt werden, habe ich den Anbieter angerufen. <br><br>  Der Anbieter hat mir zugehört und zugegeben, dass ein Problem vorliegt, aber es gibt keine Warnungen. <br><br>  Ich sympathisierte mit meiner Situation, weigerte mich aber, etwas zu korrigieren.  Wir erfüllen zwar die Sperranforderungen, es gibt jedoch keine Benachrichtigungsanforderungen.  Auf dem wir uns verabschiedeten. <br><br>  Natürlich hatte ich den Wunsch, mit dem Anbieter zu ringen, aber Faulheit und Mangel an Freizeit drängten diesen Wunsch zutiefst.  Ungefähr an dem Ort, an den ich einen Anbieter mit seinem Internet in meinem Herzen geschickt habe, an den die Sonne nicht scheint. <br><br>  Das Problem musste irgendwie gelöst werden.  Unsere Firma verwendet Mikrotiki als Gateway-Router, egal welche, der OS-Router ist für alle gleich.  Nachdem ich mich in Habré umgesehen hatte, fand ich einige Artikel darüber, wie man ILV-Sperren umgeht, ILV-Datenbanken in Mikrotik generiert und lädt.  Gleichzeitig blockierte das Routing den Datenverkehr zu den Gateways, auf denen keine Sperren vorhanden sind.  Aus Gründen des Interesses habe ich diese Methode ausprobiert.  Es funktioniert, passt aber nicht. <br>  Erstens hat das Grundvolumen von 60.000 ip (zu Beginn des Sommers 2019) meine Mikrotik ins tiefe Koma gebracht.  Der CHR-OS-Router mit einer großen Speicherkapazität und mehreren Kernen fühlte sich etwas besser an, machte jedoch deutlich, dass er mit einer derart gewissenhaften Haltung des ILV zu seinen Aufgaben nicht lange halten würde. <br><br>  Zweitens wurde Zugang zu allen blockierten Ressourcen erhalten, einschließlich solcher, die aus „rechtlichen“ Gründen blockiert wurden.  Dass ich als gesetzestreuer Bürger auch nicht zu mir passte. <br><br>  Aber die Idee, den Verkehr über die Gateways, auf denen er nicht blockiert ist, zu zulässigen Standorten zu leiten, bleibt mir im Gedächtnis. <br><br>  Was können wir dafür tun? <br><br>  Das erste, was mir in den Sinn kommt, ist, die IP der Ressource herauszufinden und das Gateway für sie beim Routing dafür zu bestimmen.  Keine Option, eine Ressource kann mehrere IP-Adressen haben und sie können sich manchmal häufig ändern.  Müde vom Hinzufügen. <br><br>  Die zweite Möglichkeit besteht darin, IP mithilfe von Schicht 7 in der Firewall zu analysieren und in die Adressliste einzutragen.  Schon besser, aber Layer 7 hat eine unangenehme Funktion.  Wenn es mehrere Regeln gibt, beginnt er, sich auf die Ressourcen des Verarbeiters zu beziehen, ähnlich wie einige Frauen sich auf das Gehalt ihres Mannes beziehen.  Infolgedessen beginnen Streitigkeiten, Skandale und andere Probleme in der Familie. <br><br>  Das Leiten des gesamten Datenverkehrs über das Remote-Gateway ist ebenfalls nachteilig. <br><br>  Glücklicherweise enthüllte einer der Redner bei der MUM im September ein schreckliches Geheimnis.  Es stellt sich heraus, dass Mikrotiki seit einiger Zeit gelernt hat, eine IP-Domain direkt von ihrem Namen in das Adressblatt zu analysieren und IP zu demselben Blatt hinzuzufügen!  Mit den Informationen, die ich erhalten habe, habe ich das Problem endlich gelöst. <br><br>  Unten finden Sie eine Beispiellösung: <br><br>  1. Wir erstellen in der Firewall das Adressblatt mit der gewünschten Domain. <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Bild hochladen"><img src="https://habrastorage.org/getpro/habr/post_images/2d2/80f/c04/2d280fc0483cd7b2f29ac5a25760b845.png" alt="alist.png"></a> <br><br>  2. Erstellen Sie in Firewall \ Mangle eine Regel, Kette: Prerouting, Erweitert: Dst.Address List = Name unseres Blattes, Aktion: Mark Routing, New Routing Mark = Markenname <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Foto teilen"><img src="https://habrastorage.org/getpro/habr/post_images/77e/27b/c92/77e27bc9239c0dc916ea08a37809f116.png" alt="Ja"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Selfie hochladen"><img src="https://habrastorage.org/getpro/habr/post_images/71b/9d8/0a4/71b9d80a4ec662ed262743b089292ff5.png" alt="Ja"></a> <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Bildhosting"><img src="https://habrastorage.org/getpro/habr/post_images/622/462/778/6224627781f3e0ee32df90b9160d7636.png" alt="Ja"></a> <br><br>  3. Wir gehen zu IP \ Routes.  Erstellen Sie eine neue Standardroute.  Dst-Adresse = 0.0.0.0 / 0, Gateway = Gateway-IP, Routing-Marke = Ihre Marke <br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" title="Foto hochladen"><img src="https://habrastorage.org/getpro/habr/post_images/681/514/307/6815143074027220adef8abc76be0a8b.png" alt="route.png"></a> <br><br>  Das ist alles.  Jetzt analysiert Ihre Mikrotik die IP der gewünschten Domain auf dem Adressblatt, das Sie dafür erstellt haben, markiert die Routen zu dieser IP und sendet sie über das Gateway, das Sie benötigen.  Haben Sie ein Backup-Gateway?  Lächle <br><br>  Es wurde auf Firmware 6.45.5 gemacht <br><br>  Vielen Dank für Ihre Aufmerksamkeit. <cut></cut></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467471/">https://habr.com/ru/post/de467471/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467457/index.html">Der Weg von der Operation zum Spieleentwickler oder die ersten Erfahrungen mit der mobilen Entwicklung auf Unity</a></li>
<li><a href="../de467459/index.html">Wie ein Mikrocontroller Daten mit 1,6 Gbit / s lesen kann</a></li>
<li><a href="../de467461/index.html">RubyRussia 2019. Julian Pokrovsky: Wie man einen Monolithen optimiert</a></li>
<li><a href="../de467463/index.html">Nur Teilung oder wie man eine mathematische Theorie erstellt und 400.000 Dollar damit verdient. Serie Drei, Finale</a></li>
<li><a href="../de467465/index.html">Spart die Cloud Ultra-Budget-Smartphones?</a></li>
<li><a href="../de467473/index.html">Und mehr über Sorten</a></li>
<li><a href="../de467475/index.html">Geben Sie Thread.Abort () an .NET Core zurück. Anwendungsbereitstellung mit der Version von CoreCLR und CoreFX</a></li>
<li><a href="../de467477/index.html">Kubernetes 1.16: Highlights Übersicht</a></li>
<li><a href="../de467479/index.html">Kir Shatrov: Shopify hat mit Rails angefangen und hier lieben sie diesen Rahmen aufrichtig.</a></li>
<li><a href="../de467485/index.html">Problemlösung mit pwnable.kr 23 - md5 Rechner. Wir beschäftigen uns mit Stack Canary. C-Bibliotheken in Python verbinden</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>