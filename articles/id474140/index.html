<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöï ‚õ≥Ô∏è üôÖüèø Menyebarkan Server SonarQube üèÑ ü¶ã üö°</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hai, habrozhiteli! 


 Dalam panduan ini saya ingin menetapkan pengaturan langkah demi langkah untuk menggunakan platform untuk analisis dan pengukura...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menyebarkan Server SonarQube</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/474140/"><h1 id="privet-habrozhiteli">  Hai, habrozhiteli! </h1><br><p> Dalam panduan ini saya ingin menetapkan pengaturan langkah demi langkah untuk menggunakan platform untuk analisis dan pengukuran kualitas kode yang berkelanjutan.  Ada banyak artikel serupa di jaringan, tetapi saya hanya ingin menyoroti hal utama, sehingga semua pendatang baru dapat menanganinya pertama kali.  Kami akan <code>SonarQube 7.9</code> dengan <code>PostgreSQL 10</code> . </p><a name="habracut"></a><br><h3 id="vy-uzhe-izuchili-viki-ne-tak-li">  Anda sudah mempelajari wiki, bukan? </h3><br><h3 id="i-prezhde-chem-nachnyom">  Dan sebelum kita mulai </h3><br><p>  Saya ingin Anda memutuskan versi mana yang akan diterapkan, karena dengan setiap pembaruan semakin banyak plugin yang dibayar, yang, tentu saja, akan memengaruhi biaya atau fungsi keuangan. </p><br><p>  Secara umum - ikuti tautan ini dan buktikan sendiri: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">matriks versi plugin</a> . </p><br><p>  Menurut dokumentasi: <strong>direkomendasikan untuk menjaga server dan database pada mesin yang berbeda</strong> .  Namun di kotak pasir Anda juga bisa melatihnya. </p><br><p>  <strong>Jika Anda memiliki Ubuntu dan 2 server</strong> </p><br><p>  Jika Anda memutuskan untuk mengikuti jalur rekomendasi dan agar tidak repot dengan membuat dua mesin virtual, buat satu - Anda dapat mengubah nama dan ip server kedua dengan mudah dan cukup menggunakan perintah ini: </p><br><p>  ::: ubah nama host ::: </p><br><pre> <code class="bash hljs">$ hostnamectl <span class="hljs-built_in"><span class="hljs-built_in">set</span></span>-hostname sonarapp sudo nano /etc/hostname sudo nano /etc/hosts</code> </pre> <br><p>  ::: ubah ip ubuntu ::: </p><br><pre> <code class="bash hljs">sudo nano /etc/netplan/01-eth0.yaml</code> </pre> <br><p>  Di sana, cari baris yang familier dan ubah parameter nama mesin dan alamat IP. </p><br><p>  <strong>Dan apa yang harus terjadi</strong> : </p><br><p>  Server aplikasi Sonar [SonarApp]: 8 core, 16GB RAM, 20Gb + 50Gb (/ opt) ruang disk </p><br><div class="scrollable-table"><table><thead><tr><th>  pengguna </th><th>  kata sandi </th><th>  IP </th><th>  Platform </th></tr></thead><tbody><tr><td>  admin </td><td>  pass123 </td><td>  192.168.0.15 </td><td>  Ubuntu Linux </td></tr></tbody></table></div><br><p>  Basis data Sonar [SonarDB]: 8 core, 16GB RAM, 20Gb + 50Gb (/ opt) ruang disk </p><br><div class="scrollable-table"><table><thead><tr><th>  pengguna </th><th>  kata sandi </th><th>  IP </th><th>  Platform </th></tr></thead><tbody><tr><td>  admin </td><td>  pass123 </td><td>  192.168.0.16 </td><td>  Linux Debian </td></tr></tbody></table></div><br><h2 id="1-predlagayu-nachat-s-bazy-dannyh">  1. Saya sarankan memulai dengan database </h2><br><p>  Masuk di bawah admin kami yang baik di 192.168.0.16 (SonarDB).  Sangat penting bahwa Anda <strong>TIDAK</strong> dijalankan sebagai root. </p><br><p>  Pastikan PostgreSQL diinstal pada sistem.  Ada banyak opsi, tetapi cobalah yang paling sederhana: </p><br><pre> <code class="bash hljs">$ <span class="hljs-built_in"><span class="hljs-built_in">which</span></span> psql $ psql -V $ find / -name <span class="hljs-string"><span class="hljs-string">'postgres'</span></span></code> </pre> <br><p>  lihat paket mana yang diunduh ke sistem: </p><br><pre> <code class="bash hljs">$ dpkg -l | grep postgres</code> </pre> <br><p>  Jika tidak ada yang ditemukan, periksa apakah PostgreSQL 10 ada di repositori: </p><br><pre> <code class="bash hljs">$ sudo apt-cache search postgresql-10</code> </pre> <br><p>  Dokumentasi instalasi PostgreSQL resmi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">tautan</a> .  Tetapi jika dalam urutan: </p><br><pre> <code class="bash hljs">$ wget -q https://www.postgresql.org/media/keys/ACCC4CF8.asc -O- | sudo apt-key add - $ sudo sh -c <span class="hljs-string"><span class="hljs-string">'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/postgresql.list'</span></span> $ sudo apt-get update $ sudo apt-get install postgresql-10 pgadmin4</code> </pre> <br><ul><li>  Saya punya masalah dengan lokal setelah menambahkan postgres ke sistem.  Metode Solusi (Solusi di <code>/etc/default/locale</code> ): <br><pre> <code class="bash hljs">$ sudo locale-gen en_US.UTF-8 $ sudo localedef -i en_US -f UTF-8 en_US.UTF-8 $ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> LANGUAGE=en_US.UTF-8 $ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> LANG=en_US.UTF-8 $ <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> LC_ALL=en_US.UTF-8 $ sudo locale-gen en_US.UTF-8 $ sudo dpkg-reconfigure locales</code> </pre> </li></ul><br><p>  Perintah dpkg-reconfigure locales akan membuka kotak dialog di bawah Debian untuk memilih lokal yang diinginkan.  Pilih <code>en_US.UTF-8</code> . </p><br><p>  Luncurkan! </p><br><pre> <code class="bash hljs">$ sudo systemctl start postgresql $ sudo systemctl status postgresql $ sudo nano /etc/postgresql/10/main/postgresql.conf <span class="hljs-comment"><span class="hljs-comment">### CTRL + W ### -&gt; listen_addresses = '*' $ sudo systemctl restart postgresql</span></span></code> </pre> <br><p>  Periksa apakah instalasi berhasil: </p><br><pre> <code class="bash hljs">$ sudo apt-get install -y net-tools $ sudo netstat -antup | grep 5432 $ dpkg --get-selections |grep postgres $ pg_lsclusters</code> </pre> <br><p>  Selamat!  Lanjutkan.  :) </p><br><pre> <code class="bash hljs">sudo su -l postgres psql <span class="hljs-comment"><span class="hljs-comment">### CTRL + Z ### -&gt; exit from psql ### exit ###</span></span></code> </pre> <br><p>  Ubah kata sandi untuk pengguna PostgreSQL default </p><br><pre> <code class="bash hljs">$ sudo passwd postgres</code> </pre> <br><p>  Beralih ke pengguna postgres. </p><br><pre> <code class="bash hljs">$ su - postgres</code> </pre> <br><p>  Beralih ke shell PostgreSQL. </p><br><pre> <code class="plaintext hljs">$ psql</code> </pre> <br><h3 id="bazovaya-konfiguraciya-postgresql">  Konfigurasi dasar PostgreSQL </h3><br><p>  Tetapkan kata sandi untuk pengguna yang baru dibuat untuk basis data SonarQube. </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">CREATE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">ROLE</span></span> sonar <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> <span class="hljs-keyword"><span class="hljs-keyword">PASSWORD</span></span> <span class="hljs-string"><span class="hljs-string">'sonar'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> rolname <span class="hljs-keyword"><span class="hljs-keyword">FROM</span></span> pg_roles; <span class="hljs-keyword"><span class="hljs-keyword">alter</span></span> <span class="hljs-keyword"><span class="hljs-keyword">role</span></span> sonar login; <span class="hljs-keyword"><span class="hljs-keyword">SELECT</span></span> pg_reload_conf(); <span class="hljs-keyword"><span class="hljs-keyword">Create</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> PostgreSQL <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> running: <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-keyword"><span class="hljs-keyword">database</span></span> sonar owner sonar;</code> </pre> <br><p>  Keluar dari shell psql: </p><br><pre> <code class="sql hljs">'\q'</code> </pre> <br><h3 id="migraciya-bazy-dannyh-postgresql">  Migrasi Basis Data PostgreSQL </h3><br><p>  Hentikan layanan PostgreSQL </p><br><pre> <code class="bash hljs">$ service postgresql stop <span class="hljs-comment"><span class="hljs-comment"># or $ /usr/lib/postgresql/10/bin/pg_ctl stop -D /var/lib/postgresql/10/main</span></span></code> </pre> <br><p>  Ubah direktori data. </p><br><pre> <code class="bash hljs">$ psql</code> </pre> <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment"># show data_directory; /var/lib/postgresql/10/main</span></span></code> </pre> <br><pre> <code class="bash hljs">$ sudo rsync -av /var/lib/postgresql /opt/sonardb $ sudo mv /var/lib/postgresql/*/main /var/lib/postgresql/*/main.bak $ sudo nano /etc/postgresql/*/main/postgresql.conf <span class="hljs-comment"><span class="hljs-comment"># change location for new data_directory. data_directory = '/opt/sonardb/postgresql/10/main' listen_addresses = '*'</span></span></code> </pre> <br><p>  Ubah cek </p><br><pre> <code class="bash hljs">$ sudo -u postgres psql</code> </pre> <br><pre> <code class="sql hljs"><span class="hljs-comment"><span class="hljs-comment"># show data_directory; ______________________ /opt/sonardb/postgresql/10/main # \q</span></span></code> </pre> <br><p>  Dan juga perlu memeriksa parameter sistem.  Mereka dapat ditambahkan ke file <code>/etc/sysctl.conf</code> (atau <code>/etc/sysctl.d/99-sonarqube.conf</code> ) atau dimasukkan di terminal: </p><br><pre> <code class="bash hljs">sysctl -w vm.max_map_count=262144 sysctl -w fs.file-max=65536 <span class="hljs-built_in"><span class="hljs-built_in">ulimit</span></span> -n 65536 <span class="hljs-built_in"><span class="hljs-built_in">ulimit</span></span> -u 4096</code> </pre> <br><h2 id="2-a-teper-zaymyomsya-serverom-prilozheniya-sonarqube">  2. Dan sekarang kita akan terlibat dalam server aplikasi SonarQube </h2><br><p>  Masuk di bawah admin kami yang baik di 192.168.0.15 (SonarApp).  Penting juga bahwa <strong>BUKAN</strong> root. </p><br><p>  Baris-baris yang dimulai dengan $ character adalah input terminal, dan sisanya adalah apa yang akan kami edit dalam file atau apa yang harus diterima pada output (output informasi) </p><br><p>  <strong>SonarQube membutuhkan JAVA untuk bekerja.</strong>  <strong>Ambil OpenJDK</strong> </p><br><h3 id="ustanovka-open-jdk11">  Instal open-jdk11 </h3><br><pre> <code class="bash hljs">$ sudo apt-get install openjdk-11-jdk</code> </pre> <br><p>  <strong>ubah java PATH</strong> </p><br><pre> <code class="bash hljs">$ nano ~/.bash_profile <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> JAVA_HOME=/usr/lib/jvm/java-11-openjdk-amd64/bin/java <span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PATH=/usr/lib/jvm/java-11-openjdk-amd64/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span></code> </pre> <br><p>  <strong>Pastikan JAVA telah berhasil ditambahkan ke sistem</strong> : </p><br><pre> <code class="bash hljs">$ java -version</code> </pre> <br><h3 id="download-and-configure-sonarqube">  Unduh dan konfigurasikan SonarQube </h3><br><p>  Unduh arsip file pemasang SonarQube. </p><br><pre> <code class="bash hljs">$ wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-7.9.1.zip</code> </pre> <br><p>  Instal unzip dengan menjalankan: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get -y install unzip</span></span></code> </pre> <br><p>  Buka zip arsip dengan menggunakan perintah berikut </p><br><pre> <code class="bash hljs">$ sudo unzip sonarqube-7.9.1.zip -d /opt</code> </pre> <br><p>  Ganti nama direktori </p><br><pre> <code class="bash hljs">$ sudo mv /opt/sonarqube-7.9.1 /opt/sonarqube</code> </pre> <br><h3 id="add-sonar-user-and-privileges">  Tambahkan Pengguna dan Keistimewaan Sonar </h3><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" rel="nofollow">Pelajari lebih lanjut tentang manajemen pengguna di Unix</a> . </p><br><p>  Buat pengguna bernama sonar dan jadikan pemilik <code>/opt/sonarqubedirectory</code> </p><br><pre> <code class="bash hljs">$ sudo adduser sonar $ sudo passwd sonar $ sudo chown -R sonar:sonar /opt/sonarqube</code> </pre> <br><p>  dapatkan daftar pengguna dalam sistem: </p><br><pre> <code class="bash hljs">$ cut -d: -f1 /etc/passwd</code> </pre> <br><p>  Apa grup pengguna baru Anda di: </p><br><pre> <code class="bash hljs">$ groups sonar</code> </pre> <br><p>  <strong>Lanjutan mengkonfigurasi SonarQube</strong> </p><br><pre> <code class="bash hljs">$ sudo nano /opt/sonarqube/conf/sonar.properties</code> </pre> <br><pre> <code class="bash hljs">sonar.jdbc.username=sonar sonar.jdbc.password=sonar sonar.web.host=192.168.0.15 <span class="hljs-comment"><span class="hljs-comment"># sonar.jdbc.url=jdbc:postgresql://localhost/username sonar.jdbc.url=jdbc:postgresql://192.168.0.16/sonar sonar.web.javaAdditionalOpts=-server</span></span></code> </pre> <br><p>  Buat file <code>/etc/systemd/system/sonarqube.service</code> dan lewati konten berikut ini ke file </p><br><pre> <code class="bash hljs">[Unit] Description=SonarQube service After=syslog.target network.target [Service] Type=simple User=sonar Group=sonar PermissionsStartOnly=<span class="hljs-literal"><span class="hljs-literal">true</span></span> ExecStart=/bin/nohup java -Xms32m -Xmx32m -Djava.net.preferIPv4Stack=<span class="hljs-literal"><span class="hljs-literal">true</span></span> -jar /opt/sonarqube/lib/sonar-application-7.9.1.jar StandardOutput=syslog LimitNOFILE=65536 LimitNPROC=8192 TimeoutStartSec=5 Restart=always [Install] WantedBy=multi-user.target</code> </pre> <br><p>  Mulai dan aktifkan sonarqube </p><br><pre> <code class="bash hljs">$ sudo systemctl start sonarqube $ sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> sonarqube</code> </pre> <br><p>  Untuk memeriksa apakah layanan ini berjalan, jalankan: </p><br><pre> <code class="bash hljs">$ sudo systemctl status sonarqube</code> </pre> <br><p>  Log: </p><br><pre> <code class="bash hljs">tail -f /opt/sonarqube/logs/sonar.log</code> </pre> <br><hr><br><p>  Untuk memeriksa ketersediaan database, sambungkan ke 192.168.0.15 dan ketik: </p><br><pre> <code class="bash hljs">$ psql -h 192.168.0.16 -p 5432 -U sonar</code> </pre> <br><p>  Itu saja.  Untuk memastikan semuanya bekerja, buka browser (pastikan bahwa jaringan 192.168.XX dapat diakses dari Anda atau gunakan tautan). </p><br><p>  Kami akan menghubungi 192.168.0.15:9000 dan Anda akan disambut oleh jendela otorisasi. </p><br><p>  Data Pengguna Admin Primer Standar SonarQube: </p><br><div class="scrollable-table"><table><thead><tr><th>  pengguna </th><th>  kata sandi </th></tr></thead><tbody><tr><td>  admin </td><td>  admin </td></tr></tbody></table></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id474140/">https://habr.com/ru/post/id474140/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id474126/index.html">Asynchrony dalam .NET, popularitas di Stack Overflow, perangkat lunak "gereja": wawancara dengan Stephen Cleary</a></li>
<li><a href="../id474130/index.html">TDD, anak laki-laki mokisty dan asli</a></li>
<li><a href="../id474132/index.html">Dengarkan ungkapan-ungkapan ini jika Anda ingin mempertahankan departemen pengembangan</a></li>
<li><a href="../id474136/index.html">Bagaimana cara cepat belajar bahasa tanpa menginjak menyapu? Opini Polyglot</a></li>
<li><a href="../id474138/index.html">Mengembang biakkan meme dalam pengaturan perusahaan: apa yang ditertawakan pengembang Dodo IS</a></li>
<li><a href="../id474144/index.html">Cara membuat startup: proyek IoT dari ide hingga produksi</a></li>
<li><a href="../id474146/index.html">Peningkatan kecepatan cadangan dan kemampuan untuk memilih rasio kompresi di versi baru Zextras Backup</a></li>
<li><a href="../id474150/index.html">Penurunan model sistem dinamis dari filter Kalman diskrit untuk sistem linear sewenang-wenang</a></li>
<li><a href="../id474154/index.html">Vitrektomi - kita membajak ruang terbuka dunia yang dibatasi oleh rongga mata</a></li>
<li><a href="../id474164/index.html">Zimbra adalah segalanya bagi kami</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>