<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üöÅ üïö üèà Edison Sprachaktivierte Holzlampe. Ausgabepreis 5 USD üòú üëãüèΩ ‚óºÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So viel kostet das SONOFF WiFi Relay (von ITEAD), das das Herzst√ºck dieses Ger√§ts ist. 

 ‚ÄûIch hatte keine Fehler. Ich habe gerade zehntausend Wege ge...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Edison Sprachaktivierte Holzlampe. Ausgabepreis 5 USD</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/432990/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e88/abf/193/e88abf193668af125bfc601b4cd290c3.png" alt="Bild"></div><br>  So viel kostet das SONOFF WiFi Relay (von ITEAD), das das Herzst√ºck dieses Ger√§ts ist. <br><br>  ‚ÄûIch hatte keine Fehler.  Ich habe gerade zehntausend Wege gefunden, die nicht funktionieren ‚Äú- Thomas Alva Edison. <br><br>  Das ist unglaublich, noch nicht in einer so fernen Vergangenheit, schrieben die Leute in den Schulen mit Federn.  Heute hat jeder einen magischen Stein mit Bildern in der Tasche, mit dem Sie auf Informationen aus der ganzen Welt zugreifen k√∂nnen.  Senden Sie Sofortnachrichten an jeden auf dem Planeten.  Wir haben Sprachsteuerung, Gesichtserkennung und, wie die Leute sagen, eine Bedrohung f√ºr die gesamte Menschheit seitens der k√ºnstlichen Intelligenz.  In j√ºngerer Zeit schienen diese Technologien eine unvorstellbare Fiktion zu sein.  Heute werde ich Ihnen jedoch zeigen, wie absolut jeder mit grundlegenden Programmierkenntnissen die Sprachsteuerung nutzen kann.  Also fangen wir an! <br><a name="habracut"></a><br>  <b>ACHTUNG !!!</b>  <b>Arbeiten Sie mit Hochspannung.</b>  <b>Sei vorsichtig was du tust!</b>  <b>Der Autor des Artikels ist nicht verantwortlich f√ºr die von Ihnen ergriffenen Ma√ünahmen und f√ºr materielle oder physische Sch√§den, die durch die Verwendung der Informationen aus diesem Artikel entstehen k√∂nnen!</b>  <b>Wenn Sie sich bei etwas nicht sicher sind, bitten Sie eine erfahrene Person, Ihnen zu helfen.</b> <br><br>  Das Hauptschema des Ger√§ts. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d3/cea/912/5d3cea912695eb78e179a1b52fe30c0e.png" alt="Bild"></div><br>  Da das Telefon jeweils nur mit einem WLAN-Zugangspunkt verbunden werden kann, arbeiten wir √ºber einen Router.  Im Allgemeinen ist dies praktisch, wenn sich alle Ihre Smart-Ger√§te im selben Netzwerk befinden und Sie sie problemlos verwalten k√∂nnen, ohne st√§ndig eine neue Verbindung zu jedem von ihnen herstellen zu m√ºssen.  Dies hat den Nachteil, dass alle Ihre Ger√§te vom Zustand eines Routers abh√§ngen. <br><br><h3>  1 - Wir m√ºssen das Sonoff WiFi-Relais neu programmieren </h3><br>  Dazu m√ºssen Sie das Relais zerlegen und die Kontakte zum Blinken anl√∂ten.  Standardm√§√üig ist es so konfiguriert, dass es √ºber einen chinesischen Server funktioniert.  Pers√∂nlich ist mir nicht sehr klar, warum das Licht in der Toilette bereits √ºber einen Server aus dem Reich der Mitte eingeschaltet werden muss. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/66a/ea1/7e6/66aea17e67e107782b36454e5f4975fc.png" alt="Bild"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/af4/c8d/505/af4c8d50561f1465b8fb4cccb2dfa2cb.png" alt="Bild"></div><br><br>  Jetzt k√∂nnen wir das cp2102-Modul von Silicon Labs f√ºr Sonoff Flashing anschlie√üen.  Ich benutze es immer noch, um mit Arduino Mini zu arbeiten. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/388/492/abe/388492abe5d00bc70f84be6295b55fc2.png" alt="Bild"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/91e/847/435/91e8474351f1b5641f1babfe287db07e.png" alt="Bild"></div><br>  WARNUNG !!!  Schlie√üen Sie bei der Neuprogrammierung das WLAN-Relais nicht an das 220/110-Volt-Netzwerk an! <br><br>  Die Neuprogrammierung des Relais ist sehr einfach.  Dies ist ein regul√§res esp8266-Modul.  Ich habe eine Standardskizze des Access Point Servers aus der Arduino IDE genommen und ein wenig ge√§ndert. <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;ESP8266WiFi.h&gt; #include &lt;ESP8266WebServer.h&gt; #include &lt;WiFiClient.h&gt; // name and password from WiFi network const char* ssid = "Your access point (router) name"; const char* password = "router password"; IPAddress ip(192,168,1,112); // enter static ip IPAddress gateway(192,168,1,1); IPAddress subnet(255,255,255,0); //       80 WiFiServer server(80); void setup() { Serial.begin(115200); delay(100); //preparing GPIO pinMode(12, OUTPUT); digitalWrite(12, 1); pinMode(13, OUTPUT); digitalWrite(13, 1); // connecting to WiFi Serial.println(); Serial.println(); Serial.print("Connecting to "); Serial.println(ssid); WiFi.begin(ssid, password); WiFi.config(ip, gateway, subnet); // waiting for connection while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print("."); } Serial.println(""); Serial.println("WiFi connected"); // run server server.begin(); Serial.println("Server started"); // show ip Serial.println(WiFi.localIP()); } void loop() { // connection check WiFiClient client = server.available(); if (!client) { return; } // Waiting for data Serial.println("new client"); while (!client.available()) { delay(1); } // Reading the first line of the query String req = client.readStringUntil('\r'); Serial.println(req); client.flush(); // works with GPIO if (req.indexOf("/12/0") != -1) digitalWrite(12, 0); else if (req.indexOf("/12/1") != -1){ digitalWrite(12, 1); Serial.println("TEST OK"); String s = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html&gt;\r\nTest OK. Uptime: "; // UpTime int Sec = (millis() / 1000UL) % 60; int Min = ((millis() / 1000UL) / 60UL) % 60; int Hours = ((millis() / 1000UL) / 3600UL) % 24; int Day = ((millis() / 1000UL) / 3600UL / 24UL); s += Day; s += "d "; s += Hours; s += ":"; s += Min; s += ":"; s += Sec; s += "&lt;/html&gt;\n"; client.print(s); client.stop(); return; } else // If an invalid query write error { Serial.println("invalid request"); String s = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html&gt;\r\nInvalid request"; s += "&lt;/html&gt;\n"; client.print(s); client.stop(); return; } client.flush(); // Response formation String s = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n&lt;!DOCTYPE HTML&gt;\r\n&lt;html&gt;\r\nGPIO set OK"; s += "&lt;/html&gt;\n"; // Send the response to the client client.print(s); delay(1); Serial.println("Client disonnected"); }</span></span></span></span></code> </pre> <br>  Sie m√ºssen den Namen Ihres Zugangspunkts (Router / Router), das Kennwort und die statische IP-Adresse f√ºr die Gl√ºhbirne angeben.  Die Relaissteuerung befindet sich an Pin 12. Stellen Sie die Blitzgr√∂√üe in der IDE auf 1 MB ein. <br><br>  Halten Sie die Taste auf der Sonoff-Platine gedr√ºckt.  Stecken Sie den USB-Konverter cp2102 in den Computer (w√§hrend Sie die Taste gedr√ºckt halten).  Lassen Sie die Taste nach 2-3 Sekunden los.  Jetzt befindet sich das Relais im Programmiermodus.  Laden Sie die Skizzendatei von der Arduino IDE herunter.  Klicken Sie auf Best√§tigen / Kompilieren.  Starten Sie das Modul nach dem Neuprogrammieren neu. <br><br><h3>  2 - Jetzt erstellen wir eine mobile Anwendung zur Steuerung dieses Relais √ºber WLAN.  (Android) </h3><br>  Ich werde nur die Hauptcode-Schnipsel geben.  Dann k√∂nnen Sie sie f√ºr die Implementierung in Ihren Anwendungen verwenden.  Google bietet eine sehr einfache und bequeme Oberfl√§che f√ºr die Spracherkennung.  Hier ist der Code, mit dem Sie Ihre Stimme in Text umwandeln und in einer regul√§ren Zeile speichern k√∂nnen. <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// Main code to start speech recognition. // You can put it's execution, on some button in your app. Intent speechIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH); speechIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, RecognizerIntent.LANGUAGE_MODEL_FREE_FORM); speechIntent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Speak please"); startActivityForResult(speechIntent, RESULT_SPEECH_TO_TEXT); // Then on onAcivityResult we will get result @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) { if (requestCode == RESULT_SPEECH_TO_TEXT &amp;&amp; resultCode == RESULT_OK) { ArrayList&lt;String&gt; matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS); if (!matches.isEmpty()) { String result_recognition_string = matches.get(0); // convert to lower case, since google speech recognition // returns "different" results. For example: youtube defines as YouTube result_recognition_string = result_recognition_string.toLowerCase(Locale.getDefault()); if (result_recognition_string.contains("lamp on") ) { // lamp on new LightOn().execute(); } } } }</span></span></code> </pre><br>  Dann k√∂nnen Sie es mit den Befehlen vergleichen, die Sie implementieren m√∂chten. <br><br>  Dies ist der Code f√ºr die Arbeit mit Wi-Fi.  Senden einer Nachricht an den Server. <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LightOn</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AsyncTask</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">,</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Void</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String LOG_TAG = <span class="hljs-string"><span class="hljs-string">"MyLog"</span></span>; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> Void </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doInBackground</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Void... params)</span></span></span><span class="hljs-function"> </span></span>{ URL url; HttpURLConnection urlConnection = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://192.168.1.112/12/1"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// "0" to turn off urlConnection = (HttpURLConnection) url .openConnection(); InputStream in = urlConnection.getInputStream(); InputStreamReader isw = new InputStreamReader(in); int data = isw.read(); while (data != -1) { char current = (char) data; data = isw.read(); System.out.print(current); Log.e(LOG_TAG, "Reply from server - " + current); } } catch (Exception e) { e.printStackTrace(); } finally { if (urlConnection != null) { urlConnection.disconnect(); } } return null; } } // run it new LightOn().execute();</span></span></code> </pre><br>  Es ist sehr einfach.  "1" schalten Sie die Gl√ºhbirne ein, "0" schalten Sie die Gl√ºhbirne aus.  Sie k√∂nnen beliebige Schecks hinzuf√ºgen, eine Antwort vom Server erhalten usw.  tp  Ich habe zwei Programme f√ºr mich erstellt.  Das erste ist das Sprachsteuerungs-Widget, das sich auf dem Desktop befindet und immer zur Hand ist.  Die zweite ist eine einfache Anwendung zum Ein- und Ausschalten der Gl√ºhbirne auf Knopfdruck. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/51b/a9c/128/51ba9c128202787dd6cd824953013c75.png" alt="Bild"></div><br>  Ich nehme an, Sie haben es bereits satt, alle Arten von Texten zu lesen, und ich schlage vor, Sie sehen sich ein Video dar√ºber an, wie es war. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/95jC-DHkXWM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Wie Albert Einstein sagte: "Ihre M√∂glichkeiten sind nur durch Ihre Vorstellungskraft begrenzt." <br><br>  Ich w√ºnsche Ihnen einen sch√∂nen Tag und nur intelligente Ger√§te! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de432990/">https://habr.com/ru/post/de432990/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de432980/index.html">VMware NSX f√ºr die Kleinsten. Teil 1</a></li>
<li><a href="../de432982/index.html">Die k√ºrzeste Einf√ºhrung in die Compilererstellung</a></li>
<li><a href="../de432984/index.html">Maschinelles Lernen mit Node.js Verwenden der Tensorflow.js-Bibliothek</a></li>
<li><a href="../de432986/index.html">C vs Go-Schleifen und einfache Mathematik</a></li>
<li><a href="../de432988/index.html">Achter Webmaster. Lebe auf Habr√©</a></li>
<li><a href="../de432992/index.html">Er setzte seine Kopfh√∂rer auf und starb: Wir haben es mit dem seltsamen Tod eines Sch√ºlers in Rimbau zu tun</a></li>
<li><a href="../de432994/index.html">Vivaldi 2.2 - Quantit√§t in Qualit√§t umwandeln</a></li>
<li><a href="../de432996/index.html">Ein paar W√∂rterb√ºcher Interna in CPython (und PyPy)</a></li>
<li><a href="../de432998/index.html">Weihnachtsgeschichte</a></li>
<li><a href="../de433000/index.html">Kotlin kompilieren: JetBrains VS ANTLR VS JavaCC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>