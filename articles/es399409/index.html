<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§πüèæ üéΩ üë©üèæ‚Äçüî¨ Cada clima es bueno: un indicador del clima que cosplay üò≥ üíÇ üòÉ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imaginemos que despu√©s de una escaramuza con Dave Bowman, los restos de la inteligencia una vez poderosa de HAL 9000 fueron suficientes para traer Dis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cada clima es bueno: un indicador del clima que cosplay</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/399409/"><img src="https://habrastorage.org/files/4ce/918/71b/4ce91871b01040ecb8a968131e3c4f32.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Imaginemos que despu√©s de una escaramuza con Dave Bowman, los restos de la inteligencia una vez poderosa de </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HAL 9000 fueron</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> suficientes para traer Discovery One de vuelta a la Tierra y, bajo el lema "muerte a todas las personas", aplastarlo en el planeta, para que no sea m√°s malo hacer esto con las computadoras. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El cataclismo que estall√≥, por supuesto, destruy√≥ a toda la humanidad racional, y solo quedaron individuos como yo, con un martillo en una mano y un Arduino en la otra. Por lo tanto, no es sorprendente que el misterioso dispositivo encontrado por los restos a√∫n misteriosos de la nave espacial que se encuentra en la monta√±a solo se pueda usar en una estaci√≥n meteorol√≥gica. Bueno, con raz√≥n!</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Si descartamos el romance, la dura realidad de la vida fue que el notorio ITEAD ofreci√≥ la pantalla </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nextion HMI NX4832T035 para probar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dado que los productos de Nextion se han descrito repetidamente aqu√≠, es conciso sobre sus capacidades. Esta es una pantalla con su propia API simple y panel t√°ctil para hacer unidades de control con men√∫s gr√°ficos sin mucha molestia.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para este prop√≥sito, Nextion tiene un sistema de comando simple para mostrar im√°genes (y sus partes), elementos de texto, campos de entrada, gr√°ficos. Adem√°s, hay un tipo de lenguaje de script para realizar acciones, por ejemplo, presionando los botones en pantalla o por temporizador. Y al mismo tiempo, un puerto para recibir comandos externos de microcontroladores o similares y devolver datos sobre tocar la pantalla para saber a qu√© botones llegaron las manos juguetonas del propietario y en qu√© estado se encuentra este bot√≥n (presionado, liberado) en este momento. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En t√©rminos generales, no hay necesidad de sufrir y recopilar conjuntos de puntos o conectar una nube de todo tipo de bibliotecas. Una l√≠nea, y el fondo ha cambiado en la pantalla. Al hacer clic, se abre un men√∫. Conectamos Arduino: construimos gr√°ficos de acuerdo con los datos recibidos a trav√©s del puerto serie.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, a juzgar por la descripci√≥n, la pantalla es tan inteligente que puede mostrar y responder (hay un panel t√°ctil) a cualquier cosa. Pero no tengo nada en casa, pero los datos clim√°ticos vuelan peri√≥dicamente por el aire. Desde el mismo </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">BDS-M</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , por ejemplo, o desde el sensor meteorol√≥gico </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PI-TV-2</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, todos ellos se transfieren finalmente a </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Monitoreo de personas</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , desde donde tengo la suerte de verlos a trav√©s de un navegador o una aplicaci√≥n en mi tel√©fono inteligente. Pero no pude resistir la idea de hacer "otra estaci√≥n meteorol√≥gica en el Arduino". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y, para ser honesto, no era tanto una cuesti√≥n de tecnolog√≠a como tal, sino del hecho de que me atra√≠a obstinadamente dise√±ar interfaces. Probablemente, tira con la misma fuerza con la que tira para cantar a todos a quienes el oso le ha pisado la oreja.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, me disculpo de inmediato por el hecho de que habr√° menos equipos m√°s y m√°s fantas√≠as de fantas√≠a. </font><font style="vertical-align: inherit;">Pero primero, una peque√±a demostraci√≥n del producto terminado, seg√∫n la cual puede decidir, seguir leyendo o pasar al siguiente material.</font></font><br>
<br>
<iframe width="560" height="315" src="https://www.youtube.com/embed/8A02d27uJ9U" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, ten√≠a 3.5 pulgadas, 480x320 p√≠xeles, lo que parec√≠a una API bastante simple y siete par√°metros que deb√≠an mostrarse (entre par√©ntesis est√°n los sensores unidos a esto): </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
1) La temperatura interior y exterior (BMP085 / DHT22) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
2) La humedad dentro y exterior (DHT22 / DHT22) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
4) Presi√≥n atmosf√©rica (BMP085) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
5) La concentraci√≥n de gases no muy √∫tiles en la habitaci√≥n, especialmente CO2 (MQ135) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
6) La concentraci√≥n de </font><font style="vertical-align: inherit;">s√≥lidos </font><font style="vertical-align: inherit;">en el aire de la habitaci√≥n, especialmente PM2.5 (Sharp GP2Y1010AU0F)</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠ debe notarse que los camaradas que se han familiarizado con las caracter√≠sticas de los √∫ltimos dos sensores concluyen que la mayor respuesta se logra solo en el campo de CO2 y PM2.5, respectivamente. Esto, de hecho, explica mi elecci√≥n: no es una pena gastar dos centavos y ver qu√© sucede, mientras que los sensores especializados son mucho m√°s caros y, en caso de falla, el sapo siempre tiene algo que mostrar. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Est√° claro que no esperaba mucha precisi√≥n de los sensores baratos; m√°s bien, esperaba correlacionar mis propios sentimientos con sus lecturas. Y, por cierto, todo es bastante obvio: vale la pena cerrar la ventana, ya que al mismo tiempo que aumenta la temperatura y la congesti√≥n, los valores de concentraci√≥n de gas de MQ135 comienzan a aumentar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sin embargo, a los par√°metros. Me pareci√≥ aburrido mostrar solo siete d√≠gitos, por lo tanto, la tarea t√©cnica para el dispositivo se expandi√≥: se me ocurri√≥ que cada par√°metro mostrara un gr√°fico de cambios a lo largo del tiempo. Y para que en una pantalla fuera posible ver hasta cuatro curvas al mismo tiempo para la percepci√≥n visual de los patrones (si los hay) en los cambios en varios indicadores. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Un lector atento y propietario de cualquier dispositivo port√°til con una diagonal de 3.5 pulgadas o m√°s, probablemente dir√° que no hay nada complicado en esto. Al igual, en tal pantalla y m√°s datos encajar√°n f√°cilmente. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero hay un truco: para un electrodom√©stico, los n√∫meros y las firmas deben ser lo m√°s grandes posible para que no tengan que mirar la pantalla durante mucho tiempo con una lupa, tratando de perforar la mente del creador.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En general, quer√≠a la interfaz m√°s grande y no demasiado desordenada, cuya l√≥gica podr√≠a entenderse sin una educaci√≥n superior. </font><font style="vertical-align: inherit;">Teniendo esa imagen en mi cabeza, la transfer√≠ al editor de Nextion y obtuve dos tipos principales de pantalla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pantalla principal con lecturas actuales de sensores:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/5d2/51b/d5c/5d251bd5c5614232b44b219ff0bde021.jpg"></div><br>
<img src="https://habrastorage.org/files/c85/8f5/487/c858f548742546128af66272d59c3775.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s de las lecturas reales, tambi√©n puede ver una indicaci√≥n de la tendencia de cambio (arriba / abajo) y marcadores de par√°metros seleccionados para mostrar en el gr√°fico. </font><font style="vertical-align: inherit;">Los cuadr√°ngulos transl√∫cidos son las √°reas sensoriales invisibles en el trabajo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pantalla con gr√°ficos. </font><font style="vertical-align: inherit;">En realidad, hay cuatro de ellos para mostrar de uno a cuatro gr√°ficos, pero de hecho, todos son id√©nticos. </font><font style="vertical-align: inherit;">Por ejemplo, una pantalla con uno y cuatro gr√°ficos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/f68/cbf/014/f68cbf01497145c2a70f830c67c203d2.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/355/835/edf/355835edf53d4e4fbbed68c1d8a3b56d.jpg"></div><br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/09c/940/2a5/09c9402a56164373aadbf7e5a22e85e4.JPG"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aqu√≠, para cada par√°metro, tambi√©n se muestran su m√°ximo y m√≠nimo para comprender los l√≠mites. Pero no hay una l√≠nea de tiempo: en primer lugar, el dispositivo no tiene reloj y, en segundo lugar, simplemente no hay lugar para la b√°scula. Al menos no encontr√© d√≥nde adjuntarlo, dado que quer√≠a mostrar un m√°ximo de cuatro gr√°ficos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En este caso, el c√≥digo prev√© la adici√≥n de los indicadores obtenidos al archivo cada media hora con una profundidad total de archivo de 48 valores, es decir por alrededor de un d√≠a Aproximadamente, debido a que los datos se transmiten a trav√©s del canal de radio de 433 MHz, que no est√° protegido de la interferencia, por lo que son posibles huecos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y en el caso de estas brechas, el tiempo de vida de los sensores tambi√©n se proporciona en la misma media hora. Y si no hubo recepci√≥n de datos en media hora, las lecturas del sensor no se muestran y no se ingresan en el archivo.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Las tendencias en los indicadores se calculan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mediante el primer algoritmo que aparece</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en los √∫ltimos seis puntos de la historia, es decir. de acuerdo con las seis indicaciones m√°s recientes. Y dado que las lecturas se realizan a intervalos de media hora, resulta que la tendencia refleja cambios en las √∫ltimas tres horas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Como cualquier dise√±ador, tuve que "jugar con las fuentes". En el proceso de dibujar las opciones, result√≥ que mi simetr√≠a favorita se vio obligada a romperse no solo por la combinaci√≥n de indicadores de humedad en la esquina superior derecha, sino tambi√©n por un fen√≥meno mucho m√°s decepcionante en forma de temperaturas negativas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es decir, los inconvenientes estropearon toda la imagen. Por lo tanto, actu√© a mi manera: coloque un signo negativo sobre el valor. Para los matem√°ticos, esto, por supuesto, parecer√° una soluci√≥n b√°rbara, y los involucrados, por supuesto, se estremecer√°n involuntariamente, reflexionando sobre por qu√© las estaciones meteorol√≥gicas deben ser moduladas. Pero result√≥ bastante bien y los n√∫meros no bailan. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La l√≥gica de la interfaz es la siguiente. El modo de funcionamiento principal es el modo de espera con un brillo de pantalla del 15% del valor nominal y actualizaci√≥n peri√≥dica de las lecturas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Toque en cualquier lugar: con√©ctese con un brillo del 100% Despu√©s de esto, al hacer clic en las lecturas, selecci√≥nelas para su posterior visualizaci√≥n en el gr√°fico, y al hacer clic en el "ojo", HAL cambia a la pantalla con gr√°ficos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hay exactamente cinco segundos para esto. </font><font style="vertical-align: inherit;">Luego se borran las marcas, y despu√©s de otros cinco minutos de inactividad, el dispositivo vuelve al modo de espera. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En la pantalla del gr√°fico, la parte izquierda es un paso hacia atr√°s (la pantalla principal o la pantalla con gr√°ficos), y la parte derecha es un aumento en el gr√°fico seleccionado en pantalla completa o, de nuevo, vaya a la pantalla principal si hay un gr√°fico. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Me pareci√≥ que este esquema es lo suficientemente simple como para no agregar botones adicionales, lo que realmente no quiero ver aqu√≠. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por cierto, las im√°genes de fondo se pueden cambiar si se desea. </font><font style="vertical-align: inherit;">Incluso prepar√© algunas opciones adicionales. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para colonos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/7f5/ca7/c80/7f5ca7c80d444ade864e1213b7a85e60.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para hobbits:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/941/05e/ed4/94105eed4f554e5286788bfeab3df7c6.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para los rom√°nticos:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/aed/804/3da/aed8043da8794986a150611ef7e21b6c.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para los amantes del caf√©:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/6d4/0be/56f/6d40be56f89445c1aca705da660063ae.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En concepto, todo el dispositivo no es tanto una estaci√≥n meteorol√≥gica como una pantalla inal√°mbrica especializada. Por lo tanto, el dise√±o es extremadamente simple: solo la pantalla, el Arduino Pro Mini y el receptor de 433 MHz con modulaci√≥n de amplitud est√°n dentro. No hay caracter√≠sticas en el ensamblaje en absoluto: la pantalla es para alimentaci√≥n y puerto serie, el receptor es para alimentaci√≥n y el pin 2 del controlador. Y, aparte de la necesidad de sensores externos compatibles, eso es todo. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Para comprender la simplicidad, muestro una de las opciones de alojamiento con un relleno casi instalado: por </font></font><br>
<br>
<img src="https://habrastorage.org/files/700/2b8/086/7002b80861af43d5a87296066f825fb3.JPG"><br>
<br>
<img src="https://habrastorage.org/files/41d/4a0/ec6/41d4a0ec62ea4d57b458d40625b8a966.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
supuesto, no insisto en dicha configuraci√≥n, pero en mi caso fue √≥ptima tanto en t√©rminos de laboriosidad como de compatibilidad con otros componentes de la automatizaci√≥n del hogar.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, la separaci√≥n de la pantalla y los sensores le permite colocar esta misma pantalla en el lugar m√°s conveniente, como, de hecho, cualquier estaci√≥n meteorol√≥gica con sensores externos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por supuesto, para que todo esto funcione y no cause horror animal al ver trozos de cables, un mont√≥n de sensores y microcontroladores colgando en el aire, debe resolver los casos. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La dura verdad de la vida era que la caja donde BDS-M hab√≠a vivido hasta ahora no pod√≠a acomodar tres sensores adicionales. Por lo tanto, di rienda suelta a los sentimientos e </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">imprim√≠</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> una impresionante </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;">l√°mpara de Markellov</font></a><font style="vertical-align: inherit;"> .</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Desde el punto de vista del sensor meteorol√≥gico, es ideal, ya que es arrastrado por todos los vientos y al mismo tiempo oculta el desorden de manera efectiva y efectiva. Despu√©s de tales metamorfos, BDS-M dej√≥ de existir: ahora es glamoroso (si no te acercas) Multisensor: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Shell: </font></font><br>
<br>
<img src="https://habrastorage.org/files/a8b/afb/02d/a8bafb02d48a400fa5c15fd021572114.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
montado y en su lugar: </font></font><br>
<br>
<img src="https://habrastorage.org/files/65e/4be/cf8/65e4becf853f44a786b39e7e741d38ae.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
result√≥ ser m√°s dif√≠cil con la unidad de visualizaci√≥n. En general, quer√≠a verlo bastante masivo y brutal. Bueno, por supuesto, como si el aborigen que hab√≠a encontrado parte de la nave espacial lo enmarcara en piedra. Por lo tanto, el marco, cuyo modelo ya se ofrec√≠a en Nextion, no se ajustaba de ninguna manera. En primer lugar, daba miedo, y en segundo lugar, la pantalla estaba en un hueco all√≠, lo que categ√≥ricamente no me conven√≠a: quer√≠a enjuagarme con la superficie.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Empec√©, sin embargo, de todos modos con pl√°stico, solo para romper la forma. Las opciones intermedias se parec√≠an a esto: </font></font><br>
<br>
<img src="https://habrastorage.org/files/688/8ba/7e5/6888ba7e5fb04821813a4f0cc8028b75.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
en general, me gust√≥ (decid√≠ no notar un poco de descontento), pero el peso, por supuesto, es bastante rid√≠culo, no de piedra. Por lo tanto, uno de los edificios utilizado como encofrado interno para la fabricaci√≥n de hormig√≥n "marco". </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
El proceso me sorprendi√≥ hasta la m√©dula: rara vez criaba tanta suciedad en casa. El resultado es el mismo. Aunque en algunos lugares result√≥ ser incluso nada, result√≥ que la mezcla de reparaci√≥n reforzada no es muy adecuada para tales productos.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Quiz√°s el concreto de arena pura ser√≠a ideal, pero en este momento ya estaba decepcionado de mis propias habilidades de construcci√≥n y me puse en camino como lo es mi colega. Y √©l, habiendo pensado un poco, dijo que tuvo la felicidad en su vida de trabajar con pintura en aerosol debajo de la piedra. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bingo, pens√© para m√≠ mismo, e inmediatamente comenc√© a sacar los detalles. Despu√©s de todo, imprimir un estuche y pintarlo es mucho m√°s est√©tico que convertir una casa en un sitio de construcci√≥n de gran tama√±o. En general, la pintura era inhumanamente costosa, pero muy fresca (para aquellos interesados ‚Äã‚Äã- Rust-Oleum American Accents Stone). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
En el camino, tambi√©n llegu√© a la conclusi√≥n de que, sin embargo, no me gustaba el cuerpo con algo (muy probablemente, con marcos gruesos en todo el per√≠metro), por lo que me recuper√© y, despu√©s del interrogatorio con una adicci√≥n, llegu√© a una forma aparentemente final. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fue: se </font></font><br>
<br>
<img src="https://habrastorage.org/files/ff2/ef2/20a/ff2ef220a1534983a766a1a8367e0224.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
convirti√≥ en:</font></font><br>
<br>
<img src="https://habrastorage.org/files/dfa/fd7/496/dfafd749673e4d5fa288916efc429e6a.JPG"><br>
<br>
<img src="https://habrastorage.org/files/f7b/341/41a/f7b34141a71f4b88a2f412087c6f1b7e.JPG"><br>
<br>
<img src="https://habrastorage.org/files/4e3/882/4dc/4e38824dcdb54b879398271bd16834a6.JPG"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es f√°cil ver que no hay rastro de masividad, pero por alguna raz√≥n esta forma es de mi agrado. Me detendr√© en eso. Adios </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
La vista, por supuesto, es un aficionado, ya que se ven algunos despojos de la pantalla (el mismo bucle del panel t√°ctil), y no se puede hacer nada de esto de manera razonable. Irrazonable, en mi opini√≥n, - superposiciones, pintura, cintas adhesivas. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Y como imprim√≠ con pl√°stico transparente, por la noche en el espacio general:</font></font><br>
<br>
<img src="https://habrastorage.org/files/c7e/c9f/222/c7ec9f222f2745d2bf3213d045ffd4d8.jpg"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ahora sobre algunos, digamos, los matices del dise√±o. Empezar√©, tal vez, desde el mismo edificio. El deseo de belleza jug√≥ un chiste malo: como quer√≠a que la pantalla estuviera al ras de la superficie, el recorte se hizo lo m√°s posible correspondiente a las dimensiones externas de la pantalla. Y despu√©s de aproximadamente una docena de accesorios, hizo su trabajo: rompi√≥ el cable del panel t√°ctil o rompi√≥ el contacto con la placa, pero ahora es muy dif√≠cil hacer que el sensor funcione. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, probablemente no puedo recomendar tal dise√±o. Bueno, o lo recomiendo, pero tenga en cuenta que esta es una de las formas m√°s f√°ciles y hermosas (s√≠, me halago descaradamente) para romper la pantalla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, tuve que repasar varias caracter√≠sticas de la pantalla en s√≠, una descripci√≥n de la cual personalmente puedo encabezar como "no puedes tomarlo y ...".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Entonces, uno no puede simplemente levantar y mostrar cualquier fuente. Es decir, te√≥ricamente, s√≠. Cualquier fuente de Windows se puede descargar en el convertidor integrado en el entorno de Nextion y la salida ser√° una trama bastante dentuda que no se ver√° mejor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por ejemplo, compare la fuente convertida con la original:</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/fbd/832/99d/fbd83299db274e43bfab9f7e5ffc5adf.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Por lo tanto, tuve que ir por el triste camino. A saber: para componer n√∫meros y firmas a partir de elementos gr√°ficos previamente preparados en GIMP. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego me top√© con las listas. Result√≥ que no puede simplemente tomar y alimentar un conjunto de datos arbitrarios al elemento de forma de onda destinado a dibujar curvas. Primero, debe llevar todo al formato requerido: de 0 a 255 y terminar los puntos intermedios, si hay menos del ancho de la pantalla. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bueno, entonces descubr√≠ que eso no es todo. Resulta que la pantalla no escala 255 puntos l√≥gicos cuando cambia la altura del elemento del gr√°fico de forma de onda. Por lo tanto, al cambiar la altura del elemento del gr√°fico de forma de onda, es necesario cambiar proporcionalmente la escala de los valores, de lo contrario, el gr√°fico se "cortar√°".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
A√∫n as√≠, no puede usar im√°genes con un fondo transparente, lo que limita un poco el ancho √∫til de los campos de informaci√≥n, de modo que no haya una superposici√≥n fea en el √°rea de degradado de la imagen de fondo. En mi opini√≥n, el foro de Nextion discuti√≥ esto y parece que ITEAD prometi√≥ agregar la capacidad de trabajar con im√°genes transparentes, pero a√∫n no lo ha hecho. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Esto, como mi tormento al cambiar la velocidad del puerto (que es necesario para el dibujo r√°pido de gr√°ficos), sin duda, parecer√° rid√≠culo para los camaradas experimentados. Sin embargo, no puedo permanecer en silencio: gast√© decentemente las fuerzas para vencer. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pero en general me siento como un ganador. Lo que quer√≠a, lo hice, y la colecci√≥n de electrodom√©sticos se repon√≠a con otra. Adem√°s, no es del todo in√∫til: es conveniente ver de inmediato lo que muestran los sensores dom√©sticos sin alcanzar un tel√©fono inteligente y no encender una computadora.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Adem√°s, esto no depende de Internet y en este contexto parece un dispositivo anti-IoT, ya que almacena todo en s√≠ mismo. </font><font style="vertical-align: inherit;">Y luego me imagino, como si un pirata inform√°tico con un sentido del humor absurdo cortara mi estaci√≥n meteorol√≥gica y la hiciera cerrar la puerta. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Luego me raspaba afuera con solicitudes como: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Abrir las puertas de la bah√≠a de Pod, HAL </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Verdadero, ¬øser√≠a divertido? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PD En la fabricaci√≥n del dispositivo se guiaron los manuales: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Soluci√≥n Nextion HMI</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FLProg + Nextion HMI. </font><font style="vertical-align: inherit;">Lecci√≥n 1</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬ª </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FLProg + Nextion HMI. </font><font style="vertical-align: inherit;">Lecci√≥n 2</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
¬ª </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FLProg + Nextion HMI. </font><font style="vertical-align: inherit;">Lecci√≥n 3</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
que tambi√©n puedo ofrecer: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
" </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">El dise√±o de la interfaz para editar en Nextion Editor</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
"</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostrar archivo de interfaz de descarga</font></font></a><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mostrar c√≥digo de pieza para Arduino</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// v5:     Serial - Arduino, Serial1 - Nextion</span></span>
<span class="hljs-comment"><span class="hljs-comment">// v6:  </span></span>
<span class="hljs-comment"><span class="hljs-comment">// v7:     </span></span>
<span class="hljs-comment"><span class="hljs-comment">// v8:      ( ,    ,  )</span></span>
<span class="hljs-comment"><span class="hljs-comment">// v9:       DHT.h Adafruit</span></span>
<span class="hljs-comment"><span class="hljs-comment">// v10:     ,      </span></span>
<span class="hljs-comment"><span class="hljs-comment">// v11:    CO2/PM2.5</span></span>
<span class="hljs-comment"><span class="hljs-comment">// v12:     , reDraw   statusBoolean = true</span></span>
<span class="hljs-comment"><span class="hljs-comment">// ToDo:   40 ,     ,     (  )</span></span><font></font>
<font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;DHT.h&gt;</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;RCSwitch.h&gt; //   http://code.google.com/p/rc-switch/</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;MQ135.h&gt; //    CO2</span></span></span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> measurePin  A1  </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// analog</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ledPower  12 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// digital</span></span></span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> samplingTime 280</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> deltaTime 40</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> sleepTime 9680</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> voMeasured = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> calcVoltage = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dustDensity = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ppm = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> analogPin A0 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   MQ135    A0 Arduino</span></span></span></span><font></font>
<font></font>
MQ135 gasSensor = MQ135(analogPin); <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> tempInX 10</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> tempOutX 380 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// 415</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> humidityInX 320 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//325</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> humidityOutX 410</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> pressureX 20 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// 10</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> ppmX 20</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> pmX 370</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> Y0 0 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//    </span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> Y1 5 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// , </span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> Y2 125 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// </span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> Y3 230 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// ppm&amp;pm</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> dotY 125 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//  </span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> minusY 115</span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// </span></span></span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> minusXOut 380</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> minusXIn 10</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> minusH 3 </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> minusPicID 2 </span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> symbolID 1 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//     </span></span></span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> statusTimeOut 2200000 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//  ""   (,       ) 900000</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> updateTimeOut 300000 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//      60000 (300000)</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> historyTimeOut 1800000 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//      (1800000)</span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> selectionTimeOut 5000 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//      </span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> backLightTimeOut 300000 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//      </span></span></span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> waveLimit 254</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> parameterS[<span class="hljs-number"><span class="hljs-number">7</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//  . : tempIn, tempOut, humidityIn, humidityOut, pressure, ppm, pm</span></span>
byte statusS[<span class="hljs-number"><span class="hljs-number">7</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//         ( /  )</span></span>
boolean statusBoolean[<span class="hljs-number"><span class="hljs-number">7</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">/*
//      
int coordinateX[7] = {tempInX, tempOutX, humidityInX, humidityOutX, pressureX, ppmX, pmX};
int coordinateY[7] = {Y2, Y2, Y1, Y1, Y1, Y3, Y3};
*/</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-comment"><span class="hljs-comment">//  : tempIn, tempOut, humidityIn, humidityOut, pressure, ppm, pm</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> historyArray[<span class="hljs-number"><span class="hljs-number">7</span></span>][<span class="hljs-number"><span class="hljs-number">48</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// 7   48 </span></span>
boolean drawArray[<span class="hljs-number"><span class="hljs-number">7</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//       </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> arrayMax; <span class="hljs-comment"><span class="hljs-comment">//       </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> arrayMin;<font></font>
byte waveShift; <span class="hljs-comment"><span class="hljs-comment">//        waveform 0 - 255</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> arrayNorm; <span class="hljs-comment"><span class="hljs-comment">//        </span></span><font></font>
<font></font>
byte count=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
byte arrayCounter; <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
byte waveCount; <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> splitData[<span class="hljs-number"><span class="hljs-number">4</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//       [, , , ]</span></span>
byte thousands, hundreds, tens, ones; <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> tempIn, tempOut, humidityIn, humidityOut, pressure;
<span class="hljs-comment"><span class="hljs-comment">// int tempIn, tempOut, humidityIn, humidityOut, pressure, ppm, pm;</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> symbolX0;
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> posX; <span class="hljs-comment"><span class="hljs-comment">//    X  </span></span>
byte tempInStatus, tempOutStatus, humidityInStatus, humidityOutStatus, pressureStatus, ppmStatus, pmStatus; <span class="hljs-comment"><span class="hljs-comment">//       StatusTimeOut</span></span><font></font>
byte symbolCount, symbolWidth;<font></font>
boolean minusIn = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
boolean minusOut = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<font></font>
byte i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> statusTime, updateTime, historyTime, selectionTime, backLightTime;<font></font>
String stringToNextion;<font></font>
byte historyCount;<font></font>
boolean backLight; <span class="hljs-comment"><span class="hljs-comment">//           </span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> weatherData = <span class="hljs-number"><span class="hljs-number">0</span></span>;
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> dht22Humidity = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//CLICKER VARIABLE SECTION</span></span>
byte buffer[<span class="hljs-number"><span class="hljs-number">30</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// buffer for bytes coming from HMI.</span></span>
byte waveCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-comment"><span class="hljs-comment">// boolean drawArray[7]; //     </span></span><font></font>
boolean allClear;<font></font>
byte currentPage = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
byte searchTarget, searchNumber, searchCounter, pageNum, drawCounter, channelToDraw;<font></font>
<span class="hljs-comment"><span class="hljs-comment">// int historyArray[7][48]; // 7   48 </span></span>
<span class="hljs-comment"><span class="hljs-comment">// int arrayMax; //       </span></span>
<span class="hljs-comment"><span class="hljs-comment">// int arrayMin;</span></span>
<span class="hljs-comment"><span class="hljs-comment">// byte waveShift; //        waveform 0 - 255</span></span>
<span class="hljs-comment"><span class="hljs-comment">// float arrayNorm; //        </span></span>
byte iconCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// int splitData[4]; //       [, , , ]</span></span>
<span class="hljs-comment"><span class="hljs-comment">// int posX; //    X  </span></span>
<span class="hljs-comment"><span class="hljs-comment">// byte count = 0; //    </span></span>
<span class="hljs-comment"><span class="hljs-comment">// String stringToNextion;</span></span>
<span class="hljs-comment"><span class="hljs-comment">// int symbolX0;</span></span>
<span class="hljs-comment"><span class="hljs-comment">// byte symbolCount;</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> minusH 3 </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> minusPicID 2 </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//       </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> axisX[<span class="hljs-number"><span class="hljs-number">5</span></span>][<span class="hljs-number"><span class="hljs-number">7</span></span>] = {{<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">380</span></span>, <span class="hljs-number"><span class="hljs-number">320</span></span>, <span class="hljs-number"><span class="hljs-number">410</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-number"><span class="hljs-number">370</span></span>}, <span class="hljs-comment"><span class="hljs-comment">//  0</span></span>
               {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>},<font></font>
               {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>},<font></font>
               {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>},<font></font>
               {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>}}; <span class="hljs-comment"><span class="hljs-comment">//  1-4</span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> axisY[<span class="hljs-number"><span class="hljs-number">5</span></span>][<span class="hljs-number"><span class="hljs-number">7</span></span>] = {{<span class="hljs-number"><span class="hljs-number">115</span></span>, <span class="hljs-number"><span class="hljs-number">115</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">230</span></span>, <span class="hljs-number"><span class="hljs-number">230</span></span>}, <span class="hljs-comment"><span class="hljs-comment">//  0</span></span>
               {<span class="hljs-number"><span class="hljs-number">145</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>}, <span class="hljs-comment"><span class="hljs-comment">//  1</span></span>
               {<span class="hljs-number"><span class="hljs-number">63</span></span>, <span class="hljs-number"><span class="hljs-number">226</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>}, <span class="hljs-comment"><span class="hljs-comment">//  2 </span></span>
               {<span class="hljs-number"><span class="hljs-number">37</span></span>, <span class="hljs-number"><span class="hljs-number">145</span></span>, <span class="hljs-number"><span class="hljs-number">253</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> }, <span class="hljs-comment"><span class="hljs-comment">//  3</span></span>
               {<span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">105</span></span>, <span class="hljs-number"><span class="hljs-number">185</span></span>, <span class="hljs-number"><span class="hljs-number">265</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>}}; <span class="hljs-comment"><span class="hljs-comment">//  4</span></span><font></font>
<font></font>
<font></font>
byte symbolW[<span class="hljs-number"><span class="hljs-number">5</span></span>][<span class="hljs-number"><span class="hljs-number">11</span></span>] = {{<span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">15</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>, <span class="hljs-number"><span class="hljs-number">30</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>},<font></font>
                       {<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>},<font></font>
                       {<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>},<font></font>
                       {<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>},<font></font>
                       {<span class="hljs-number"><span class="hljs-number">11</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">14</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">13</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">12</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>}};<span class="hljs-comment"><span class="hljs-comment">//   0, 1, 2, 3, 4, 5, 6, 7, 8, 9</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// {13, 7, 15, 13, 17, 15, 13, 14, 14, 14, 5}   25 Comfortaa Light</span></span><font></font>
<font></font>
byte numberPic[<span class="hljs-number"><span class="hljs-number">5</span></span>] = {<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>}; <span class="hljs-comment"><span class="hljs-comment">// ID   </span></span><font></font>
<font></font>
byte symbolH[<span class="hljs-number"><span class="hljs-number">5</span></span>] = {<span class="hljs-number"><span class="hljs-number">60</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>, <span class="hljs-number"><span class="hljs-number">18</span></span>}; <span class="hljs-comment"><span class="hljs-comment">//     25   25 Comfortaa Light</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// CLICKER VARIABLE SECTION ENDS    </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// TREND VARIABLE SECTION</span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> x2 70 </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//    </span></span></span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> trendArray[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">6</span></span>] = {{<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>}, <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
                        {<span class="hljs-number"><span class="hljs-number">-5</span></span>, <span class="hljs-number"><span class="hljs-number">-3</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>},<font></font>
                        {<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>}};<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> sumY, sumXY;<font></font>
byte trendCount;<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> trend; <font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// TREND VARIABLE SECTION ENDS                  </span></span><font></font>
<font></font>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DHTPIN 7</span></span>
<span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DHTTYPE DHT22</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// Setup a DHT22 instance</span></span>
<span class="hljs-function"><span class="hljs-function">DHT </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dht</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DHTPIN, DHTTYPE)</span></span></span></span>;<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// Setup RC-Switch</span></span><font></font>
RCSwitch mySwitch = RCSwitch();<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sendToNextion</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  Serial.write(<span class="hljs-number"><span class="hljs-number">0xff</span></span>);<font></font>
  Serial.write(<span class="hljs-number"><span class="hljs-number">0xff</span></span>);<font></font>
  Serial.write(<span class="hljs-number"><span class="hljs-number">0xff</span></span>);<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//      </span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawMark</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte mark, byte markNum)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> markX;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//        </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (allClear == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) {<font></font>
  allClear = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<font></font>
}<font></font>
<font></font>
markX = axisX[<span class="hljs-number"><span class="hljs-number">0</span></span>][markNum];<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (markNum == <span class="hljs-number"><span class="hljs-number">1</span></span> || markNum == <span class="hljs-number"><span class="hljs-number">3</span></span> || markNum == <span class="hljs-number"><span class="hljs-number">6</span></span>) {<font></font>
  markX = <span class="hljs-number"><span class="hljs-number">475</span></span>;<font></font>
} <font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (markNum == <span class="hljs-number"><span class="hljs-number">0</span></span> || markNum == <span class="hljs-number"><span class="hljs-number">4</span></span> || markNum == <span class="hljs-number"><span class="hljs-number">5</span></span>) {<font></font>
  markX = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (markNum == <span class="hljs-number"><span class="hljs-number">2</span></span>) {<font></font>
  markX = markX - <span class="hljs-number"><span class="hljs-number">15</span></span>;<font></font>
}<font></font>
<font></font>
    stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"fill "</span></span>);<font></font>
    stringToNextion = stringToNextion + String(markX); <span class="hljs-comment"><span class="hljs-comment">// String(axisX[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(axisY[<span class="hljs-number"><span class="hljs-number">0</span></span>][markNum]+<span class="hljs-number"><span class="hljs-number">30</span></span>); <span class="hljs-comment"><span class="hljs-comment">// String(axisY[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"5"</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"30"</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mark == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"RED"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.println("Mark set");</span></span><font></font>
<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mark == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"BLACK"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.println("Mark clear");</span></span><font></font>
<font></font>
}<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.println(stringToNextion);</span></span><font></font>
    Serial.print(stringToNextion);<font></font>
    sendToNextion();<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  :     </span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearSelection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte jj = <span class="hljs-number"><span class="hljs-number">0</span></span>; jj &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; jj++) {
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawArray[jj] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) {<font></font>
    drawArray[jj] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<font></font>
    drawMark(<span class="hljs-number"><span class="hljs-number">0</span></span>, jj);<font></font>
   }<font></font>
  }<font></font>
<font></font>
  allClear = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
  waveCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateHistory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
mySwitch.disableReceive();<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//   ,       -   ,       </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (arrayCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; arrayCounter &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; arrayCounter++) {
  <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("StatusBoolean for array #");// Serial2.print(arrayCounter);// Serial2.print(" = "); // Serial2.println(statusBoolean[arrayCounter]);</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (statusBoolean[arrayCounter] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//       </span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">47</span></span>; i &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; i--) {<font></font>
      historyArray[arrayCounter][i] = historyArray[arrayCounter][i<span class="hljs-number"><span class="hljs-number">-1</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// </span></span><font></font>
    }<font></font>
    historyArray[arrayCounter][<span class="hljs-number"><span class="hljs-number">0</span></span>] = parameterS[arrayCounter]; <span class="hljs-comment"><span class="hljs-comment">//  </span></span><font></font>
  }<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// statusBoolean[arrayCounter] = false; // ,       </span></span><font></font>
<font></font>
  }<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (arrayCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; arrayCounter &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; arrayCounter++) {
 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">47</span></span>; i++) {
   <span class="hljs-comment"><span class="hljs-comment">// Serial2.print(historyArray[arrayCounter][i]);// Serial2.print(", ");</span></span><font></font>
  }<font></font>
 <span class="hljs-comment"><span class="hljs-comment">// Serial2.println();</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// Serial2.println();  </span></span><font></font>
<font></font>
mySwitch.enableReceive(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
  <font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawTrend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte arrayToTrend)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> markX;<font></font>
<font></font>
markX = axisX[<span class="hljs-number"><span class="hljs-number">0</span></span>][arrayToTrend];<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//   X   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayToTrend == <span class="hljs-number"><span class="hljs-number">1</span></span> || arrayToTrend == <span class="hljs-number"><span class="hljs-number">3</span></span> || arrayToTrend == <span class="hljs-number"><span class="hljs-number">6</span></span>) {<font></font>
  markX = <span class="hljs-number"><span class="hljs-number">472</span></span>;<font></font>
} <font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayToTrend == <span class="hljs-number"><span class="hljs-number">0</span></span> || arrayToTrend == <span class="hljs-number"><span class="hljs-number">4</span></span> || arrayToTrend == <span class="hljs-number"><span class="hljs-number">5</span></span>) {<font></font>
  markX = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayToTrend == <span class="hljs-number"><span class="hljs-number">2</span></span>) {<font></font>
  markX = markX - <span class="hljs-number"><span class="hljs-number">15</span></span>;<font></font>
}<font></font>
<font></font>
    stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"xpic "</span></span>);<font></font>
    stringToNextion = stringToNextion + String(markX); <span class="hljs-comment"><span class="hljs-comment">//   X</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(axisY[<span class="hljs-number"><span class="hljs-number">0</span></span>][arrayToTrend]); <span class="hljs-comment"><span class="hljs-comment">//   Y</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"8"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    7x18</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"18"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (trend &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
<font></font>
<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  Y    0</span></span><font></font>
<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (trend &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"8"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    5</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  Y    0</span></span><font></font>
    <font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (trend == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"16"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     10</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  Y    0</span></span><font></font>
 <font></font>
}<font></font>
<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"5"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ID    </span></span>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.println(stringToNextion);    </span></span><font></font>
    Serial.print(stringToNextion);<font></font>
    sendToNextion();<font></font>
 <font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">splitRoutine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
<font></font>
<font></font>
input = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(input); <span class="hljs-comment"><span class="hljs-comment">//      ,   </span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (count = <span class="hljs-number"><span class="hljs-number">0</span></span>; count &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>; count++) {<font></font>
  splitData[count] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
}<font></font>
<font></font>
count = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input &gt; <span class="hljs-number"><span class="hljs-number">9999</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
  count = <span class="hljs-number"><span class="hljs-number">5</span></span>;<font></font>
} <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input &gt; <span class="hljs-number"><span class="hljs-number">999</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  9999</span></span>
  splitData[<span class="hljs-number"><span class="hljs-number">3</span></span>] = input/<span class="hljs-number"><span class="hljs-number">1000</span></span>;<font></font>
  input = input - splitData[<span class="hljs-number"><span class="hljs-number">3</span></span>]*<span class="hljs-number"><span class="hljs-number">1000</span></span>;<font></font>
  count = <span class="hljs-number"><span class="hljs-number">4</span></span>;
<span class="hljs-comment"><span class="hljs-comment">/*
  Serial.print("SplitData Count 4:");
  Serial.println(splitData[3]);
*/</span></span><font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input &gt; <span class="hljs-number"><span class="hljs-number">99</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  999</span></span>
  splitData[<span class="hljs-number"><span class="hljs-number">2</span></span>] = input/<span class="hljs-number"><span class="hljs-number">100</span></span>;<font></font>
  input = input - splitData[<span class="hljs-number"><span class="hljs-number">2</span></span>]*<span class="hljs-number"><span class="hljs-number">100</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
    count = <span class="hljs-number"><span class="hljs-number">3</span></span>;
<span class="hljs-comment"><span class="hljs-comment">/*
  Serial.print("SplitData Count 3:");
  Serial.println(splitData[2]);
*/</span></span>  <font></font>
  }<font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input &gt; <span class="hljs-number"><span class="hljs-number">9</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  99</span></span>
  splitData[<span class="hljs-number"><span class="hljs-number">1</span></span>] = input/<span class="hljs-number"><span class="hljs-number">10</span></span>;<font></font>
  input = input - splitData[<span class="hljs-number"><span class="hljs-number">1</span></span>]*<span class="hljs-number"><span class="hljs-number">10</span></span>;
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
    count = <span class="hljs-number"><span class="hljs-number">2</span></span>;
<span class="hljs-comment"><span class="hljs-comment">/*
  Serial.print("SplitData Count 2:");
  Serial.println(splitData[1]);
*/</span></span>  <font></font>
  }<font></font>
} <font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input &lt; <span class="hljs-number"><span class="hljs-number">10</span></span>) {<font></font>
  splitData[<span class="hljs-number"><span class="hljs-number">0</span></span>] = input;
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
    count = <span class="hljs-number"><span class="hljs-number">1</span></span>;
<span class="hljs-comment"><span class="hljs-comment">/*
  Serial.print("SplitData Count 1:");
  Serial.println(splitData[0]);
*/</span></span>  <font></font>
  }<font></font>
}<font></font>
<font></font>
}<font></font>
<span class="hljs-comment"><span class="hljs-comment">/*
  Serial.print("Input = ");
  Serial.println(input);
  Serial.print("Count = ");
  Serial.println(count);
*/</span></span><font></font>
<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawRoutine</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte page, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value, byte type, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> drawX, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> drawY)</span></span></span><span class="hljs-function"> </span></span>{ <font></font>
<font></font>
mySwitch.disableReceive();  <font></font>
<span class="hljs-comment"><span class="hljs-comment">// page -  ; value = ; type =       ; drawX    X, drawY -  Y</span></span><font></font>
  <font></font>
  boolean minusSign = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<font></font>
<font></font>
  splitRoutine(value);  <font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (page == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-comment"><span class="hljs-comment">//   (  pm25)         ( 470 = 480 - 10)</span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
    drawX = <span class="hljs-number"><span class="hljs-number">470</span></span> - count*<span class="hljs-number"><span class="hljs-number">30</span></span> - <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-comment"><span class="hljs-comment">//       10      ,  30    + 5  </span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
      drawX = drawX - <span class="hljs-number"><span class="hljs-number">30</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   0,        </span></span><font></font>
    }<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (type == <span class="hljs-number"><span class="hljs-number">6</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  pm25</span></span>
    drawX = <span class="hljs-number"><span class="hljs-number">470</span></span> - count*<span class="hljs-number"><span class="hljs-number">30</span></span> - <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-comment"><span class="hljs-comment">//       20      ,  30   </span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
      drawX = drawX - <span class="hljs-number"><span class="hljs-number">30</span></span>;<font></font>
    }<font></font>
  }<font></font>
}<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> posX = drawX;<font></font>
<font></font>
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
  minusSign = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;<font></font>
 }<font></font>
<font></font>
 <font></font>
<font></font>
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (count &lt; <span class="hljs-number"><span class="hljs-number">5</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    9999</span></span><font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((count == <span class="hljs-number"><span class="hljs-number">1</span></span>) &amp;&amp; ((type == <span class="hljs-number"><span class="hljs-number">0</span></span>) || (type  == <span class="hljs-number"><span class="hljs-number">1</span></span>) || (type  == <span class="hljs-number"><span class="hljs-number">6</span></span>))) { <span class="hljs-comment"><span class="hljs-comment">//    pm2.5     0,  0   </span></span>
  <span class="hljs-comment"><span class="hljs-comment">// xpic X, Y, , , X, Y, </span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// </span></span>
    stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"xpic "</span></span>);<font></font>
    stringToNextion = stringToNextion + String(drawX); <span class="hljs-comment"><span class="hljs-comment">// String(axisX[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(drawY); <span class="hljs-comment"><span class="hljs-comment">// String(axisY[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(symbolW[page][<span class="hljs-number"><span class="hljs-number">0</span></span>]);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(symbolH[page]);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(numberPic[page]);<font></font>
   <span class="hljs-comment"><span class="hljs-comment">// // Serial2.println("Temp leading zero");</span></span>
   <span class="hljs-comment"><span class="hljs-comment">// // Serial2.println(stringToNextion);</span></span><font></font>
    Serial.print(stringToNextion);<font></font>
    sendToNextion();<font></font>
    drawX = drawX + symbolW[page][<span class="hljs-number"><span class="hljs-number">0</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//     0</span></span><font></font>
      <font></font>
   } <span class="hljs-comment"><span class="hljs-comment">// count = 1</span></span><font></font>
<font></font>
   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte ii = count; ii &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; ii--) { <span class="hljs-comment"><span class="hljs-comment">//   ,    </span></span><font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((ii == <span class="hljs-number"><span class="hljs-number">1</span></span>) &amp;&amp; ((type == <span class="hljs-number"><span class="hljs-number">0</span></span>) || (type == <span class="hljs-number"><span class="hljs-number">1</span></span>) || (type == <span class="hljs-number"><span class="hljs-number">6</span></span>))) { <span class="hljs-comment"><span class="hljs-comment">//  ,     </span></span>
      stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"xpic "</span></span>);<font></font>
      stringToNextion = stringToNextion + String(drawX); <span class="hljs-comment"><span class="hljs-comment">// String(axisX[page, type]);</span></span>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
      stringToNextion = stringToNextion + String(drawY); <span class="hljs-comment"><span class="hljs-comment">// String(axisY[page, type]);</span></span>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
      stringToNextion = stringToNextion + String(symbolW[page][<span class="hljs-number"><span class="hljs-number">10</span></span>]);<font></font>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
      stringToNextion = stringToNextion + String(symbolH[page]);<font></font>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (page == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
        stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"265"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//        265</span></span>
      } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
        stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"118"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//       135  Comfortaa Light 25</span></span><font></font>
      }<font></font>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//    Y    0</span></span>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
      stringToNextion = stringToNextion + String(numberPic[page]); <font></font>
     <span class="hljs-comment"><span class="hljs-comment">// // Serial2.println("Temp decimal dot");</span></span>
     <span class="hljs-comment"><span class="hljs-comment">// // Serial2.println(stringToNextion);      </span></span><font></font>
      Serial.print(stringToNextion);<font></font>
      sendToNextion();<font></font>
      drawX = drawX + symbolW[page][<span class="hljs-number"><span class="hljs-number">10</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
    } <span class="hljs-comment"><span class="hljs-comment">// ii == 1 &amp;&amp; type == 0 || type == 1</span></span><font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//       </span></span>
    symbolX0 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//       </span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (symbolCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; symbolCount &lt; (splitData[ii<span class="hljs-number"><span class="hljs-number">-1</span></span>]);symbolCount++) { <span class="hljs-comment"><span class="hljs-comment">//     X    (   )</span></span><font></font>
      symbolX0 = symbolX0 + symbolW[page][symbolCount];<font></font>
    }<font></font>
<font></font>
    stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"xpic "</span></span>);<font></font>
    stringToNextion = stringToNextion + String(drawX); <span class="hljs-comment"><span class="hljs-comment">// String(axisX[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(drawY); <span class="hljs-comment"><span class="hljs-comment">// String(axisY[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(symbolW[page][splitData[ii<span class="hljs-number"><span class="hljs-number">-1</span></span>]]);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(symbolH[page]);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(symbolX0); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(numberPic[page]);<font></font>
   <span class="hljs-comment"><span class="hljs-comment">// // Serial2.print("Symbol: "); // Serial2.println(splitData[ii-1]);</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//  // Serial2.println(stringToNextion);    </span></span><font></font>
    Serial.print(stringToNextion);<font></font>
    sendToNextion();<font></font>
    drawX = drawX + symbolW[page][splitData[ii<span class="hljs-number"><span class="hljs-number">-1</span></span>]];<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (minusSign == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) {<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">/*
    symbolX0 = 0; //    
    for (byte ii = count; ii &gt; 0; ii--) { 
      symbolX0 = symbolX0 + symbolW[page][splitData[ii-1]];
    }

    */</span></span><font></font>
    <font></font>
    stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"xpic "</span></span>);<font></font>
    stringToNextion = stringToNextion + String(posX); <span class="hljs-comment"><span class="hljs-comment">// String(axisX[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(drawY<span class="hljs-number"><span class="hljs-number">-8</span></span>); <span class="hljs-comment"><span class="hljs-comment">// String(axisY[page, type]);</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(drawX - posX);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(minusH); <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     0, 0</span></span>
    stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
    stringToNextion = stringToNextion + String(minusPicID);<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    // Serial2.print("Symbol: "); // Serial2.println(splitData[ii-1]);</span></span>
 <span class="hljs-comment"><span class="hljs-comment">//   // Serial2.println(stringToNextion);    </span></span><font></font>
    Serial.print(stringToNextion);<font></font>
    sendToNextion();<font></font>
    <font></font>
  }<font></font>
  <font></font>
 } <span class="hljs-comment"><span class="hljs-comment">// if count &lt; 5    9999</span></span>
  mySwitch.enableReceive(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
}         <font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//     ( )</span></span>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMinMax</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte arrayToMax, byte maxCount)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
  <font></font>
byte getMaxCount = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
arrayMax = historyArray[arrayToMax][getMaxCount]; <span class="hljs-comment"><span class="hljs-comment">//      </span></span>
arrayMin = historyArray[arrayToMax][getMaxCount]; <span class="hljs-comment"><span class="hljs-comment">//      </span></span><font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (byte getMaxCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; getMaxCount &lt; maxCount; getMaxCount++) { <span class="hljs-comment"><span class="hljs-comment">// maxCount 47   , 6  </span></span><font></font>
  <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (historyArray[arrayToMax][getMaxCount+<span class="hljs-number"><span class="hljs-number">1</span></span>] &gt; arrayMax){ <font></font>
    arrayMax = historyArray[arrayToMax][getMaxCount+<span class="hljs-number"><span class="hljs-number">1</span></span>];<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayMin &gt; historyArray[arrayToMax][getMaxCount+<span class="hljs-number"><span class="hljs-number">1</span></span>]){ <font></font>
    arrayMin = historyArray[arrayToMax][getMaxCount+<span class="hljs-number"><span class="hljs-number">1</span></span>];<font></font>
  }<font></font>
  <font></font>
}<font></font>
 <font></font>
}      <font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getTrend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte arrayToTrend)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
mySwitch.disableReceive();<font></font>
getMinMax(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-comment"><span class="hljs-comment">//        </span></span><font></font>
<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (trendCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; trendCount &lt; <span class="hljs-number"><span class="hljs-number">6</span></span>; trendCount++) {
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayMin &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
    trendArray[<span class="hljs-number"><span class="hljs-number">0</span></span>][trendCount] = historyArray[arrayToTrend][<span class="hljs-number"><span class="hljs-number">5</span></span>-trendCount] + <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(arrayMin); <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
  } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
    trendArray[<span class="hljs-number"><span class="hljs-number">0</span></span>][trendCount] = historyArray[arrayToTrend][<span class="hljs-number"><span class="hljs-number">5</span></span>-trendCount];<font></font>
  }<font></font>
}<font></font>
<font></font>
sumY = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
sumXY = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//   ,   XY</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (trendCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; trendCount &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; trendCount++) {<font></font>
  sumY = sumY + trendArray[<span class="hljs-number"><span class="hljs-number">0</span></span>][trendCount];<font></font>
  sumXY = sumXY + trendArray[<span class="hljs-number"><span class="hljs-number">0</span></span>][trendCount]*trendArray[<span class="hljs-number"><span class="hljs-number">1</span></span>][trendCount];<font></font>
}<font></font>
<font></font>
trend = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (sumY/<span class="hljs-number"><span class="hljs-number">10</span></span> + (sumXY/x2)*trendArray[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">5</span></span>]) - (sumY/<span class="hljs-number"><span class="hljs-number">10</span></span> + (sumXY/x2)*trendArray[<span class="hljs-number"><span class="hljs-number">1</span></span>][<span class="hljs-number"><span class="hljs-number">0</span></span>])+<span class="hljs-number"><span class="hljs-number">0.5</span></span>;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// Serial2.print("Trend: "); // Serial2.println(trend);</span></span><font></font>
<font></font>
drawTrend(arrayToTrend);<font></font>
mySwitch.enableReceive(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
}<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reDraw</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
 mySwitch.disableReceive();<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">// Serial2.println("Redraw main page");</span></span>
<span class="hljs-comment"><span class="hljs-comment">/*    
 for (i = 0; i &lt; 7; i++) {
  parameterS[i] = random(255);
  statusS[i] = 1;
 }
    */</span></span> <font></font>
<font></font>
 Serial.print(<span class="hljs-string"><span class="hljs-string">"page 0"</span></span>);<font></font>
 sendToNextion();<font></font>
 <span class="hljs-comment"><span class="hljs-comment">// Serial.print("pic 0,0,6");</span></span>
 <span class="hljs-comment"><span class="hljs-comment">// sendToNextion();</span></span><font></font>
 <font></font>
 <font></font>
 <font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; i++) {
   <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("StatusBoolean on reDraw for item "); // Serial2.print(i); // Serial2.print(" is "); // Serial2.println(statusBoolean[i]);</span></span>
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (statusBoolean[i] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//     " "</span></span><font></font>
    drawRoutine(currentPage, parameterS[i], i, axisX[currentPage][i], axisY[currentPage][i]);<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("Redraw, ");// Serial2.print(i); // Serial2.print(": "); // Serial2.println(parameterS[i]);</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (historyCount &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>) {<font></font>
      getTrend(i);<font></font>
    }<font></font>
<font></font>
   }<font></font>
    <font></font>
  }<font></font>
<font></font>
 mySwitch.enableReceive(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNorm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
arrayNorm = <span class="hljs-number"><span class="hljs-number">1.00</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  1:1</span></span><font></font>
<font></font>
  arrayNorm = <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(arrayMax - arrayMin);<font></font>
  <font></font>
    arrayNorm = waveLimit/arrayNorm; <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
  <font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawHistory</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte arrayCounter, byte waveCount)</span></span></span></span>{<font></font>
mySwitch.disableReceive();<font></font>
byte tC01 = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
byte tC02 = <span class="hljs-number"><span class="hljs-number">0</span></span>; 
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> interPoint, lineMulti;
<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> justPoint;<font></font>
<font></font>
  byte channelCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   ,   (ID = 0),           </span></span><font></font>
<font></font>
      getMinMax(arrayCounter, <span class="hljs-number"><span class="hljs-number">47</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  47   ,  39,        ,   </span></span>
 <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("arrayMax: "); // Serial2.println(arrayMax);</span></span>
 <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("arrayMin: "); // Serial2.println(arrayMin);</span></span><font></font>
      getNorm();<font></font>
      <font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage == <span class="hljs-number"><span class="hljs-number">2</span></span>) {<font></font>
         arrayNorm = arrayNorm*<span class="hljs-number"><span class="hljs-number">0.5</span></span>;      <font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage == <span class="hljs-number"><span class="hljs-number">3</span></span>) {<font></font>
         arrayNorm = arrayNorm*<span class="hljs-number"><span class="hljs-number">0.3</span></span>;      <font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage == <span class="hljs-number"><span class="hljs-number">4</span></span>) {<font></font>
         arrayNorm = arrayNorm*<span class="hljs-number"><span class="hljs-number">0.2</span></span>;<font></font>
      }<font></font>
<font></font>
 <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("arrayNorm: "); // Serial2.println(arrayNorm);   </span></span><font></font>
<font></font>
     <font></font>
     <font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  </span></span>
      stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"add "</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
      stringToNextion = stringToNextion + String(waveCount); <span class="hljs-comment"><span class="hljs-comment">//    ID</span></span>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
      stringToNextion = stringToNextion + String(channelCount); <span class="hljs-comment"><span class="hljs-comment">//   0, 1, 2  3</span></span>
      stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayMin &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
        justPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (historyArray[arrayCounter][tC01] + <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(arrayMin))*arrayNorm + <span class="hljs-number"><span class="hljs-number">0.5</span></span>;<font></font>
        stringToNextion = stringToNextion + String(justPoint); <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
      } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
        justPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) historyArray[arrayCounter][tC01]*arrayNorm + <span class="hljs-number"><span class="hljs-number">0.5</span></span>;<font></font>
        stringToNextion = stringToNextion + String(justPoint); <span class="hljs-comment"><span class="hljs-comment">//    </span></span><font></font>
      }<font></font>
      Serial.print(stringToNextion);<font></font>
      <span class="hljs-comment"><span class="hljs-comment">// // Serial2.print("First point, original");// Serial2.println(historyArray[arrayCounter][tC01]);</span></span>
      <span class="hljs-comment"><span class="hljs-comment">// // Serial2.print("First point: "); // Serial2.println(stringToNextion);          </span></span><font></font>
      sendToNextion(); <font></font>
                <font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (tC01 = <span class="hljs-number"><span class="hljs-number">0</span></span>; tC01 &lt; <span class="hljs-number"><span class="hljs-number">46</span></span>; tC01++) { <span class="hljs-comment"><span class="hljs-comment">//   37  46</span></span><font></font>
          <font></font>
          lineMulti = (historyArray[arrayCounter][tC01+<span class="hljs-number"><span class="hljs-number">1</span></span>] - historyArray[arrayCounter][tC01])/<span class="hljs-number"><span class="hljs-number">9</span></span>; <span class="hljs-comment"><span class="hljs-comment">//         </span></span><font></font>
          <font></font>
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayMin &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
            justPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) historyArray[arrayCounter][tC01] + <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(arrayMin) + lineMulti+<span class="hljs-number"><span class="hljs-number">0.5</span></span>;<font></font>
            interPoint = justPoint;<font></font>
          } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
            justPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) historyArray[arrayCounter][tC01] + lineMulti + <span class="hljs-number"><span class="hljs-number">0.5</span></span>;<font></font>
            interPoint = justPoint;<font></font>
          }<font></font>
          <font></font>
          <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (tC02 = <span class="hljs-number"><span class="hljs-number">0</span></span>; tC02 &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; tC02++) { <span class="hljs-comment"><span class="hljs-comment">//   ,  ,    9</span></span>
            stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"add "</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
            stringToNextion = stringToNextion + String(waveCount); <span class="hljs-comment"><span class="hljs-comment">//     (1, 2, 3  4 )</span></span>
            stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
            stringToNextion = stringToNextion + String(channelCount); <span class="hljs-comment"><span class="hljs-comment">//   0, 1, 2  3</span></span>
            stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
            justPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) interPoint*arrayNorm;<font></font>
            stringToNextion = stringToNextion + String(justPoint);<font></font>
            interPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) interPoint + lineMulti;<font></font>
            Serial.print(stringToNextion);   <font></font>
           <span class="hljs-comment"><span class="hljs-comment">// // Serial2.print("Connecting point: "); // Serial2.println(stringToNextion);                               </span></span><font></font>
            sendToNextion();                      <font></font>
          }<font></font>
          stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"add "</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
          stringToNextion = stringToNextion + String(waveCount); <span class="hljs-comment"><span class="hljs-comment">//     (1, 2, 3  4 )</span></span>
          stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
          stringToNextion = stringToNextion + String(channelCount); <span class="hljs-comment"><span class="hljs-comment">//   0, 1, 2  3</span></span>
          stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (arrayMin &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
            justPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (historyArray[arrayCounter][tC01+<span class="hljs-number"><span class="hljs-number">1</span></span>] + <span class="hljs-built_in"><span class="hljs-built_in">abs</span></span>(arrayMin))*arrayNorm + <span class="hljs-number"><span class="hljs-number">0.5</span></span>;<font></font>
            stringToNextion = stringToNextion + String(justPoint); <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
          } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
            justPoint = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) historyArray[arrayCounter][tC01+<span class="hljs-number"><span class="hljs-number">1</span></span>]*arrayNorm + <span class="hljs-number"><span class="hljs-number">0.5</span></span>;<font></font>
            stringToNextion = stringToNextion + String(justPoint); <span class="hljs-comment"><span class="hljs-comment">//    </span></span><font></font>
          }<font></font>
          <font></font>
          Serial.print(stringToNextion);<font></font>
         <span class="hljs-comment"><span class="hljs-comment">// // Serial2.print("Next/Last point, original: ");// Serial2.println(historyArray[arrayCounter][tC01+1]);               </span></span>
          <span class="hljs-comment"><span class="hljs-comment">// // Serial2.print("Next/Last point: "); // Serial2.println(stringToNextion);               </span></span><font></font>
          sendToNextion();                                  <font></font>
        }<font></font>
    <font></font>
 mySwitch.enableReceive(<span class="hljs-number"><span class="hljs-number">0</span></span>);   <font></font>
  }<font></font>
  <font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drawIcon</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> where, byte what)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//// Serial2.print("Where: "); // Serial2.println(where);</span></span>
<span class="hljs-comment"><span class="hljs-comment">//// Serial2.print("What: "); // Serial2.println(what);</span></span><font></font>
<font></font>
stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"xpic "</span></span>);<font></font>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// String(axisX[page, type]);</span></span>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
stringToNextion = stringToNextion + String(where<span class="hljs-number"><span class="hljs-number">-3</span></span>); <span class="hljs-comment"><span class="hljs-comment">// String(axisY[page, type]);</span></span>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
stringToNextion = stringToNextion + String(<span class="hljs-number"><span class="hljs-number">80</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
stringToNextion = stringToNextion + String(<span class="hljs-number"><span class="hljs-number">30</span></span>);<font></font>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
stringToNextion = stringToNextion + String(what*<span class="hljs-number"><span class="hljs-number">80</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     X = 80*  </span></span>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">"0"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   Y  0</span></span>
stringToNextion = stringToNextion + String(<span class="hljs-string"><span class="hljs-string">","</span></span>);<font></font>
stringToNextion = stringToNextion + String(<span class="hljs-number"><span class="hljs-number">4</span></span>);
<span class="hljs-comment"><span class="hljs-comment">//// Serial2.println(stringToNextion);</span></span><font></font>
Serial.print(stringToNextion);<font></font>
sendToNextion();<font></font>
  <font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(byte pageNum)</span></span></span><span class="hljs-function"> </span></span>{<font></font>
mySwitch.disableReceive();<font></font>
currentPage = pageNum;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">/*
//    
stringToNextion = String("ref page");
stringToNextion = stringToNextion + String(pageNum);
Serial.print(stringToNextion);
sendToNextion();
*/</span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
  String stringToNextion = String(<span class="hljs-string"><span class="hljs-string">"page "</span></span>);<font></font>
  stringToNextion = stringToNextion + String(pageNum);<font></font>
 <span class="hljs-comment"><span class="hljs-comment">// // Serial2.print("Switch to: "); // Serial2.println(stringToNextion);</span></span><font></font>
  Serial.print(stringToNextion);<font></font>
  sendToNextion();<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pageNum == <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
  clearSelection();<font></font>
  reDraw();<font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//        </span></span>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pageNum &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
<font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (pageNum == <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; waveCounter &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//           </span></span>
 <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Draw single, searchCounter-1: "); // Serial2.println(searchCounter-1);</span></span>
      getMinMax(searchCounter<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">47</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      </span></span>
  <span class="hljs-comment"><span class="hljs-comment">//    // Serial2.print("arrayMax: "); // Serial2.println(arrayMax);</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//    // Serial2.print("arrayMin: "); // Serial2.println(arrayMin);</span></span>
      drawRoutine(pageNum, arrayMax, searchCounter<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">117</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 115</span></span>
      drawIcon(<span class="hljs-number"><span class="hljs-number">145</span></span>, searchCounter<span class="hljs-number"><span class="hljs-number">-1</span></span>);<font></font>
      drawRoutine(pageNum, arrayMin, searchCounter<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">185</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 175</span></span>
      drawHistory(searchCounter<span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  :     </span></span>
     } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
<font></font>
              <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
              iconCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;
              <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (drawCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; drawCounter &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; drawCounter++) {
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawArray[drawCounter] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) {
        <span class="hljs-comment"><span class="hljs-comment">//          // Serial2.print("pageNum: "); // Serial2.println(pageNum);</span></span>
       <span class="hljs-comment"><span class="hljs-comment">//           // Serial2.print("iconCounter: "); // Serial2.println(iconCounter);</span></span>
      <span class="hljs-comment"><span class="hljs-comment">//            // Serial2.print("drawCounter: "); // Serial2.println(drawCounter);</span></span>
                  getMinMax(drawCounter, <span class="hljs-number"><span class="hljs-number">39</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   39  47</span></span>
      <span class="hljs-comment"><span class="hljs-comment">//            // Serial2.print("arrayMax: "); // Serial2.println(arrayMax);</span></span>
     <span class="hljs-comment"><span class="hljs-comment">//             // Serial2.print("arrayMin: "); // Serial2.println(arrayMin);</span></span>
                  drawRoutine(pageNum, arrayMax, drawCounter, <span class="hljs-number"><span class="hljs-number">0</span></span>, axisY[pageNum][iconCounter]<span class="hljs-number"><span class="hljs-number">-22</span></span>);   <span class="hljs-comment"><span class="hljs-comment">// -30               </span></span><font></font>
                  drawIcon(axisY[pageNum][iconCounter], drawCounter);<font></font>
                  drawRoutine(pageNum, arrayMin, drawCounter, <span class="hljs-number"><span class="hljs-number">0</span></span>, axisY[pageNum][iconCounter]+<span class="hljs-number"><span class="hljs-number">35</span></span>); <span class="hljs-comment"><span class="hljs-comment">// +30</span></span><font></font>
                  iconCounter++;<font></font>
                }<font></font>
            }      <font></font>
              channelToDraw = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//      ,    ,   - </span></span>
              <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (drawCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; drawCounter &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; drawCounter++) { <span class="hljs-comment"><span class="hljs-comment">//   " "</span></span>
                <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawArray[drawCounter] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) {<font></font>
                  drawHistory(drawCounter, channelToDraw);<font></font>
           <span class="hljs-comment"><span class="hljs-comment">//       // Serial2.print("drawCounter / channelToDraw "); // Serial2.print(drawCounter); // Serial2.print(" | "); // Serial2.println(channelToDraw);</span></span><font></font>
                  channelToDraw++;<font></font>
                 }<font></font>
              }<font></font>
      }<font></font>
    }<font></font>
    <font></font>
  mySwitch.enableReceive(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setup</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
  pinMode(ledPower,OUTPUT);<font></font>
 <span class="hljs-comment"><span class="hljs-comment">// pinMode(measurePin, INPUT);</span></span><font></font>
<font></font>
 pinMode(<span class="hljs-number"><span class="hljs-number">4</span></span>, OUTPUT);<font></font>
 digitalWrite(<span class="hljs-number"><span class="hljs-number">4</span></span>, HIGH);<font></font>
<font></font>
<font></font>
<font></font>
 <font></font>
  currentPage = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  allClear = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;<font></font>
  historyCount = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//       </span></span>
  backLight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//          ,   false</span></span><font></font>
  <font></font>
<span class="hljs-comment"><span class="hljs-comment">//     </span></span>
<span class="hljs-comment"><span class="hljs-comment">//  . : tempIn, tempOut, humidityIn, humidityOut, pressure, ppm, pm</span></span>
 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; i++) {<font></font>
  parameterS[i] = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  statusS[i] = <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
 }<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (arrayCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>; arrayCounter &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; arrayCounter++) {
 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;<span class="hljs-number"><span class="hljs-number">48</span></span>; i++) {<font></font>
  historyArray[arrayCounter][i]=<span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
 }<font></font>
}<font></font>
 <font></font>
 statusTime = millis();<font></font>
 updateTime = millis();<font></font>
 historyTime = millis();<font></font>
 backLightTime = millis();<font></font>
<font></font>
 Serial.begin(<span class="hljs-number"><span class="hljs-number">9600</span></span>);<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">"baud=57600"</span></span>);<font></font>
  sendToNextion();<font></font>
 Serial.end();<font></font>
<font></font>
 Serial.begin(<span class="hljs-number"><span class="hljs-number">57600</span></span>);<font></font>
 Serial.print(<span class="hljs-string"><span class="hljs-string">"baud=57600"</span></span>);<font></font>
 sendToNextion();<font></font>
 <font></font>
 <span class="hljs-comment"><span class="hljs-comment">// Serial2.begin(115200);</span></span><font></font>
 dht.begin();<font></font>
 mySwitch.enableReceive(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
 delay(<span class="hljs-number"><span class="hljs-number">2000</span></span>);<font></font>
 Serial.print(<span class="hljs-string"><span class="hljs-string">"page 0"</span></span>);<font></font>
 sendToNextion();<font></font>
 <span class="hljs-comment"><span class="hljs-comment">// Serial2.println("Ready");</span></span><font></font>
 <font></font>
 reDraw();<font></font>
}<font></font>
<font></font>
<font></font>
<font></font>
<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loop</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{<font></font>
<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span><font></font>
<font></font>
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mySwitch.available()) { <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> value = mySwitch.getReceivedValue();
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value != <span class="hljs-number"><span class="hljs-number">0</span></span>) {
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("RC-Switch: "); // Serial2.println(mySwitch.getReceivedValue());</span></span>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mySwitch.getReceivedValue() / <span class="hljs-number"><span class="hljs-number">100000</span></span> == <span class="hljs-number"><span class="hljs-number">161</span></span>) {<font></font>
<font></font>
        weatherData = mySwitch.getReceivedValue() - <span class="hljs-number"><span class="hljs-number">16100000</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weatherData &gt; <span class="hljs-number"><span class="hljs-number">10000</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
          parameterS[<span class="hljs-number"><span class="hljs-number">3</span></span>] = (weatherData - <span class="hljs-number"><span class="hljs-number">10000</span></span>)/<span class="hljs-number"><span class="hljs-number">10</span></span>;<font></font>
          statusS[<span class="hljs-number"><span class="hljs-number">3</span></span>] = statusS[<span class="hljs-number"><span class="hljs-number">3</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;   <font></font>
          statusBoolean[<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;  <font></font>
        }<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weatherData &gt; <span class="hljs-number"><span class="hljs-number">1000</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
            parameterS[<span class="hljs-number"><span class="hljs-number">1</span></span>] = -(weatherData - <span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
            minusOut = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;<font></font>
          }<font></font>
          <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
            parameterS[<span class="hljs-number"><span class="hljs-number">1</span></span>] = weatherData;<font></font>
            minusOut = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<font></font>
          }<font></font>
        }<font></font>
          statusS[<span class="hljs-number"><span class="hljs-number">1</span></span>] = statusS[<span class="hljs-number"><span class="hljs-number">1</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
          statusBoolean[<span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;<font></font>
      }<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mySwitch.getReceivedValue() / <span class="hljs-number"><span class="hljs-number">10000</span></span> == <span class="hljs-number"><span class="hljs-number">1210</span></span>) {<font></font>
        parameterS[<span class="hljs-number"><span class="hljs-number">4</span></span>] = (mySwitch.getReceivedValue() - <span class="hljs-number"><span class="hljs-number">12100000</span></span>) / <span class="hljs-number"><span class="hljs-number">1.33</span></span>; <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
        statusS[<span class="hljs-number"><span class="hljs-number">4</span></span>] = statusS[<span class="hljs-number"><span class="hljs-number">4</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;   <font></font>
        statusBoolean[<span class="hljs-number"><span class="hljs-number">4</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;   
        <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("Pressure: "); // Serial2.println(parameterS[4]);     </span></span><font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mySwitch.getReceivedValue() / <span class="hljs-number"><span class="hljs-number">100000</span></span> == <span class="hljs-number"><span class="hljs-number">131</span></span>) {<font></font>
        weatherData = mySwitch.getReceivedValue() - <span class="hljs-number"><span class="hljs-number">13100000</span></span>;
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (weatherData &gt; <span class="hljs-number"><span class="hljs-number">1000</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
          parameterS[<span class="hljs-number"><span class="hljs-number">0</span></span>] = -(weatherData - <span class="hljs-number"><span class="hljs-number">1000</span></span>);<font></font>
          minusIn = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;<font></font>
        }<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//  </span></span>
          parameterS[<span class="hljs-number"><span class="hljs-number">0</span></span>] = weatherData;<font></font>
          minusIn = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;<font></font>
        }<font></font>
          statusS[<span class="hljs-number"><span class="hljs-number">0</span></span>] = statusS[<span class="hljs-number"><span class="hljs-number">0</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
          statusBoolean[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;<font></font>
      }<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//        </span></span><font></font>
<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mySwitch.getReceivedValue() / <span class="hljs-number"><span class="hljs-number">10000</span></span> == <span class="hljs-number"><span class="hljs-number">1212</span></span>) {<font></font>
        parameterS[<span class="hljs-number"><span class="hljs-number">2</span></span>] = (mySwitch.getReceivedValue() - <span class="hljs-number"><span class="hljs-number">12120000</span></span>); <span class="hljs-comment"><span class="hljs-comment">// </span></span>
        statusS[<span class="hljs-number"><span class="hljs-number">2</span></span>] = statusS[<span class="hljs-number"><span class="hljs-number">2</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;   <font></font>
        statusBoolean[<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;   
        <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("HumidityIn: "); // Serial2.println(parameterS[2]);     </span></span><font></font>
      }<font></font>
<span class="hljs-comment"><span class="hljs-comment">// CO2 PPM</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mySwitch.getReceivedValue() / <span class="hljs-number"><span class="hljs-number">10000</span></span> == <span class="hljs-number"><span class="hljs-number">1213</span></span>) {<font></font>
        parameterS[<span class="hljs-number"><span class="hljs-number">5</span></span>] = (mySwitch.getReceivedValue() - <span class="hljs-number"><span class="hljs-number">12130000</span></span>); <span class="hljs-comment"><span class="hljs-comment">// CO2</span></span>
        statusS[<span class="hljs-number"><span class="hljs-number">5</span></span>] = statusS[<span class="hljs-number"><span class="hljs-number">5</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;   <font></font>
        statusBoolean[<span class="hljs-number"><span class="hljs-number">5</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;   
        <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("CO2 PPM: "); // Serial2.println(parameterS[5]);     </span></span><font></font>
      }      <font></font>
<span class="hljs-comment"><span class="hljs-comment">// PM2.5</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mySwitch.getReceivedValue() / <span class="hljs-number"><span class="hljs-number">10000</span></span> == <span class="hljs-number"><span class="hljs-number">1214</span></span>) {<font></font>
        parameterS[<span class="hljs-number"><span class="hljs-number">6</span></span>] = (mySwitch.getReceivedValue() - <span class="hljs-number"><span class="hljs-number">12140000</span></span>); <span class="hljs-comment"><span class="hljs-comment">// PM2.5</span></span>
        statusS[<span class="hljs-number"><span class="hljs-number">6</span></span>] = statusS[<span class="hljs-number"><span class="hljs-number">6</span></span>]+<span class="hljs-number"><span class="hljs-number">1</span></span>;   <font></font>
        statusBoolean[<span class="hljs-number"><span class="hljs-number">6</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;   
        <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("PM2.5: "); // Serial2.println(parameterS[6]);     </span></span><font></font>
      } <font></font>
<font></font>
    }<font></font>
    mySwitch.resetAvailable();<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//    mySwitch.enableReceive(0); //  RC Switch</span></span><font></font>
  }   <font></font>
<font></font>
  <font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage == <span class="hljs-number"><span class="hljs-number">0</span></span>) {
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((millis() - selectionTime) &gt; selectionTimeOut) { 
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (allClear == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) {<font></font>
      clearSelection();<font></font>
    }<font></font>
  }<font></font>
 }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Serial.available())<font></font>
  {<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> moretocome = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> endcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bytesread = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
    byte inbyte;<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//bool isascii = false;</span></span><font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (moretocome)<font></font>
    {<font></font>
      inbyte = Serial.read();<font></font>
<font></font>
        delay(<span class="hljs-number"><span class="hljs-number">2</span></span>);<font></font>
        <font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inbyte == <span class="hljs-number"><span class="hljs-number">0xFF</span></span>)<font></font>
      {<font></font>
        endcount++;<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (endcount == <span class="hljs-number"><span class="hljs-number">3</span></span>)<font></font>
        {<font></font>
          moretocome = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
          <span class="hljs-comment"><span class="hljs-comment">// Serial2.println("");</span></span><font></font>
        }<font></font>
      }<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">else</span></span><font></font>
      {<font></font>
        endcount = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
      }<font></font>
      buffer[bytesread] = inbyte;<font></font>
      bytesread++;<font></font>
<font></font>
    }<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x = <span class="hljs-number"><span class="hljs-number">0</span></span>; x &lt; bytesread; x++)<font></font>
    {<font></font>
      <span class="hljs-comment"><span class="hljs-comment">// Serial2.print(buffer[x], HEX);</span></span>
      <span class="hljs-comment"><span class="hljs-comment">// Serial2.print(" ");</span></span><font></font>
    }<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">//// Serial2.println(bytesread, DEC);</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.println("");</span></span><font></font>
<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-number"><span class="hljs-number">101</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
   backLightTime = millis(); <span class="hljs-comment"><span class="hljs-comment">//        </span></span>
   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (backLight == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    ,   </span></span>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.println("Backlight 50%");</span></span>
    Serial.print(<span class="hljs-string"><span class="hljs-string">"dim=100"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  </span></span><font></font>
    sendToNextion();<font></font>
    backLight = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
   } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     </span></span><font></font>
    <font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[<span class="hljs-number"><span class="hljs-number">1</span></span>] == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    </span></span><font></font>
      selectionTime = millis();<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>] &lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (waveCounter &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    4 </span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawArray[buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>] == <span class="hljs-literal"><span class="hljs-literal">false</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    </span></span>
          drawArray[buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>] = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    ,   </span></span>
          drawMark(<span class="hljs-number"><span class="hljs-number">1</span></span>, buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>);<font></font>
          waveCounter = waveCounter + <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//       </span></span>
     <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Set button: "); // Serial2.println(buffer[2]);          </span></span>
     <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Total buttons: "); // Serial2.println(waveCounter);</span></span>
        } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
          drawArray[buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
          drawMark(<span class="hljs-number"><span class="hljs-number">0</span></span>, buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>);
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (waveCounter &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {<font></font>
            waveCounter = waveCounter - <span class="hljs-number"><span class="hljs-number">1</span></span>;<font></font>
          }<font></font>
     <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Clear button: "); // Serial2.println(buffer[2]);          </span></span>
     <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Total buttons: "); // Serial2.println(waveCounter);          </span></span><font></font>
        }<font></font>
      } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawArray[buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    ,  </span></span>
          drawArray[buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//     </span></span>
          drawMark(<span class="hljs-number"><span class="hljs-number">0</span></span>, buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>]<span class="hljs-number"><span class="hljs-number">-1</span></span>);<font></font>
          waveCounter = waveCounter - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
     <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Clear button: "); // Serial2.println(buffer[2]);          </span></span>
     <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Total buttons: "); // Serial2.println(waveCounter);          </span></span><font></font>
        }<font></font>
      }<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">//      </span></span><font></font>
        currentPage = waveCounter;<font></font>
        toPage(waveCounter);    <font></font>
      }<font></font>
    }<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { 
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//      ,    ID = 5    0</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>] == <span class="hljs-number"><span class="hljs-number">5</span></span>) {<font></font>
          toPage(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
        }<font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//   1   ,    ID = 5    0</span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>] == <span class="hljs-number"><span class="hljs-number">5</span></span>) {
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (waveCounter == <span class="hljs-number"><span class="hljs-number">1</span></span>) {<font></font>
            toPage(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
          } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
            toPage(waveCounter); <span class="hljs-comment"><span class="hljs-comment">//       </span></span><font></font>
          }<font></font>
        }<font></font>
      }<font></font>
<font></font>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage == <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    1     ID = 6 -          </span></span>
        <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>] == <span class="hljs-number"><span class="hljs-number">6</span></span>) {<font></font>
          toPage(<span class="hljs-number"><span class="hljs-number">0</span></span>);<font></font>
        }<font></font>
      }      <font></font>
      <font></font>
      <span class="hljs-comment"><span class="hljs-comment">//   </span></span><font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    1, .   1</span></span>
      <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>] &gt; <span class="hljs-number"><span class="hljs-number">5</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//     ID &gt; 2, ..  </span></span>
   <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Buffer[2]: ");</span></span>
   <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.println(buffer[2]);</span></span>
   <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("Normalized button: ");</span></span>
        searchTarget = buffer[<span class="hljs-number"><span class="hljs-number">2</span></span>] - <span class="hljs-number"><span class="hljs-number">5</span></span>; <span class="hljs-comment"><span class="hljs-comment">// ""  ,     ,   :  1 -   -  true   drawarray   1</span></span>
        searchNumber = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
        searchCounter = <span class="hljs-number"><span class="hljs-number">0</span></span>;
   <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.println(searchTarget);</span></span><font></font>
<font></font>
        <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ((searchCounter &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>) &amp;&amp; (searchNumber &lt; searchTarget)) {
          <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (drawArray[searchCounter] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) {<font></font>
            searchNumber++;<font></font>
          }<font></font>
          searchCounter++;<font></font>
        }<font></font>
        <font></font>
   <span class="hljs-comment"><span class="hljs-comment">//     // Serial2.print("searchCounter: "); // Serial2.println(searchCounter);</span></span>
        toPage(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      </span></span><font></font>
      }<font></font>
    }<font></font>
<font></font>
<font></font>
      <font></font>
     }<font></font>
    }<font></font>
  } <font></font>
<font></font>
buffer[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//    *Status   1   </span></span>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span><font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//  :       ,    9</span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((millis() - statusTime) &gt; statusTimeOut) {<font></font>
<font></font>
 <font></font>
 <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">7</span></span>; i++) { <span class="hljs-comment"><span class="hljs-comment">//   </span></span>
  <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("Status of "); // Serial2.print(i); // Serial2.print(" is: "); // Serial2.println(statusS[i]);</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (statusS[i] == <span class="hljs-number"><span class="hljs-number">0</span></span>) {statusBoolean[i] = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("As StatusS "); // Serial2.print(i); // Serial2.print(" is "); // Serial2.print(statusS[i]); // Serial2.println(" StatusBoolean set to false");</span></span><font></font>
    }<font></font>
    statusS[i] = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    </span></span><font></font>
 }<font></font>
  statusTime = millis();<font></font>
  <font></font>
}<font></font>
<font></font>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentPage == <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//       </span></span><font></font>
<font></font>
 <font></font>
<span class="hljs-comment"><span class="hljs-comment">//    </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((millis() - updateTime) &gt; updateTimeOut) {<font></font>
<font></font>
  reDraw();<font></font>
  updateTime = millis();<font></font>
 }<font></font>
<font></font>
 <font></font>
 <font></font>
}<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//         </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((millis() - backLightTime) &gt; backLightTimeOut) {
 <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (backLight == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) {<font></font>
  backLight = <span class="hljs-literal"><span class="hljs-literal">false</span></span>;
  <span class="hljs-comment"><span class="hljs-comment">// Serial2.println("Backlight 15%");</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//Serial.print("page 0");</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// sendToNextion();</span></span>
  currentPage = <span class="hljs-number"><span class="hljs-number">0</span></span>;<font></font>
  clearSelection();<font></font>
  reDraw();<font></font>
  Serial.print(<span class="hljs-string"><span class="hljs-string">"dim=15"</span></span>);<font></font>
  sendToNextion();<font></font>
 }<font></font>
  <font></font>
 }<font></font>
<font></font>
<span class="hljs-comment"><span class="hljs-comment">//   </span></span>
<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((millis() - historyTime) &gt; historyTimeOut) {<font></font>
  updateHistory();<font></font>
<font></font>
    historyCount++;<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// Serial2.print("History Q: "); // Serial2.println(historyCount);</span></span><font></font>
 <font></font>
  historyTime = millis();<font></font>
  }<font></font>
<font></font>
}  </code></pre><br>
<br>
</div></div><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modelo de caja (con cuidado, puede romper la pantalla)</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es399409/">https://habr.com/ru/post/es399409/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es399399/index.html">–ü—Ä–æ—Ä—ã–≤ –≤ –±–æ—Ä—å–±–µ —Å –í–ò–ß: –Ω–æ–≤–æ–µ –∞–Ω—Ç–∏—Ç–µ–ª–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç 98% –≤—Å–µ—Ö –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —à—Ç–∞–º–º–æ–≤ –≤–∏—Ä—É—Å–∞</a></li>
<li><a href="../es399401/index.html">Preg√∫ntele a Ethan No. 108: ¬øHay luz solar instant√°nea?</a></li>
<li><a href="../es399403/index.html">Dolor en las manos al trabajar en una computadora. Parte 2. Liberamos los hombros y el cuello.</a></li>
<li><a href="../es399405/index.html">Cumplea√±os del fundador de Nintendo</a></li>
<li><a href="../es399407/index.html">¬øPor qu√© todav√≠a no puedes comprar auriculares inal√°mbricos?</a></li>
<li><a href="../es399411/index.html">El camino espinoso de la evoluci√≥n del sintetizador: la historia olvidada de las invenciones revolucionarias</a></li>
<li><a href="../es399413/index.html">Una pesadilla completa: USB-C y Thunderbolt 3</a></li>
<li><a href="../es399415/index.html">C√≥mo Atlas se prepar√≥ para el Black Friday</a></li>
<li><a href="../es399417/index.html">Xiaomi nuevos productos con tales descuentos</a></li>
<li><a href="../es399419/index.html">Revisi√≥n del monitor de juegos curvo Lenovo Y27g Razer Edition</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>