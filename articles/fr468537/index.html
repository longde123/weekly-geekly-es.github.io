<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>â˜ªï¸ ğŸ¤™ğŸ½ âºï¸ Bases de DevOps. EntrÃ©e dans le projet Ã  partir de zÃ©ro ğŸ˜° ğŸ‘¨ğŸ¼â€ğŸ’» ğŸ‘©ğŸ»â€ğŸ¤â€ğŸ‘¨ğŸ½</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En novembre 2018, un dÃ©partement de soutien Ã  l'information a Ã©tÃ© crÃ©Ã© en Lituanie et a invitÃ© Andrei Yumashev Ã  diriger. L'annÃ©e derniÃ¨re, le dÃ©parte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bases de DevOps. EntrÃ©e dans le projet Ã  partir de zÃ©ro</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/468537/">  En novembre 2018, un dÃ©partement de soutien Ã  l'information a Ã©tÃ© crÃ©Ã© en Lituanie et a invitÃ© <strong>Andrei Yumashev</strong> Ã  diriger.  L'annÃ©e derniÃ¨re, le dÃ©partement aide l'entreprise Ã  travailler et Ã  se dÃ©velopper et Ã  garder toute l'infrastructure sous contrÃ´le.  Mais cela n'a pas toujours Ã©tÃ© le cas.  Avant de commencer Ã  travailler, Andrei Ã©tait confrontÃ© Ã  des ruines: Nagios Ã  moitiÃ© mort, des cactus vivants et des marionnettes comateuses, un Wiki mort de 120 pages, des tables de tÃ¢ches et une liste de fer incohÃ©rentes, une architecture obsolÃ¨te, 340 cÅ“urs inactifs, 2 To de RAM et 17 To l'espace disque qui, pour une raison quelconque, n'a pas Ã©tÃ© enregistrÃ© dans les tables d'inventaire.  Des plans qui ne fonctionnent pas, des dÃ©lais qui dÃ©passent, un environnement de travail et des outils qui ne sont pas lÃ  - tout cela attendait Andrei dans un nouveau projet. <br><br><img src="https://habrastorage.org/webt/jr/wy/ag/jrwyagng-7fixaij6vkk8bbnet8.jpeg"><br><br>  Lors de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">DevOpsConf 2019,</a> Andrei a fait un rapport dans lequel il a montrÃ© sur des exemples en direct ce qui vaut et ce qui ne devrait pas Ãªtre fait lorsque vous entrez dans un projet que vous n'avez pas vu ou que vous connaissez mal.  Sous la coupe se trouve une version mise Ã  jour de l'histoire - comment analyser correctement la gamme de problÃ¨mes et construire un plan d'activitÃ©, comment calculer correctement les KPI et quand s'arrÃªter Ã  temps. <br><a name="habracut"></a><br><iframe width="560" height="315" src="https://www.youtube.com/embed/YOaIg9By0fU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <strong>Andrey Yumashev</strong> est le propriÃ©taire de ses propres sociÃ©tÃ©s de dÃ©veloppement dans divers domaines (en ligne et hors ligne), un consultant sur la construction de processus et le chef du dÃ©partement de support de l'information chez LiteRes. <br><br>  Un peu plus sur LiteRes.  Il s'agit du plus grand fournisseur de livres Ã©lectroniques et audio en Russie, d'une maison d'Ã©dition et de nombreux projets de partenariat.  Ce sont des centaines de milliers de lignes de Perl, plusieurs clusters de bases de donnÃ©es et rÃ©fÃ©rentiels.  Cela reprÃ©sente 2 Go de trafic sortant par seconde, des centaines de milliers de demandes uniques par jour, plusieurs racks dans diffÃ©rents centres de donnÃ©es et plus de 100 serveurs.  Dans l'ensemble, ce n'est pas seulement une librairie Ã©lectronique. <br><br><h2>  Premiers pas </h2><br>  J'avais l'habitude de travailler dans LiteRes Ã  la piÃ¨ce.  L'entreprise pratique le dÃ©veloppement des effectifs avec l'enregistrement des employÃ©s Ã  distance dans l'Ã‰tat. <br><br>  Le systÃ¨me d'exÃ©cution des tÃ¢ches en litres fonctionne sur le principe d'une Â«vente aux enchÃ¨resÂ».  Dans le tracker de tÃ¢ches interne, les gestionnaires et les architectes dÃ©crivent les tÃ¢ches des projets internes et les Ã©valuent en monnaie locale.  La devise est Â«champignons, herbe et arbreÂ». <br><br>  Commence alors la Â«vente aux enchÃ¨res facileÂ» - tout dÃ©veloppeur peut prendre la tÃ¢che ou nÃ©gocier.  Bravo - vous Ãªtes payÃ©.  Je ne travaillais pas du tout - vous ne comprenez pas.  De faÃ§on ludique, les gens sont intÃ©ressÃ©s Ã  accomplir des tÃ¢ches.  Pour en savoir plus sur ce systÃ¨me, voir la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prÃ©sentation de</a> Dmitry Gribov. <br><br><img src="https://habrastorage.org/webt/1a/zj/wj/1azjwjlwwzndujp6trjhdlzwyn4.jpeg"><br>  <em>Travaillez pour les champignons.</em> <br><br>  Le systÃ¨me me convenait - j'ai soutenu l'expÃ©rience de programmation Perl, travaillÃ© quand c'Ã©tait pratique et n'y ai pas passÃ© trop de temps.  Dans ce mode, j'ai passÃ© quelques annÃ©es jusqu'en novembre de l'annÃ©e derniÃ¨re et j'ai pensÃ© comprendre la structure de l'Ã©cosystÃ¨me. <br><br><h3>  J'avais tort </h3><br>  J'ai Ã©tÃ© invitÃ© dans l'entreprise et informÃ© que mes services en tant que dÃ©veloppeur Perl n'Ã©taient pas nÃ©cessaires, et on m'a proposÃ© de diriger un nouveau dÃ©partement.  En novembre 2018, je suis devenu chef du service information. <br><br>  Devant moi se trouvaient des espaces ouverts: plusieurs racks avec du fer dans plusieurs centres de donnÃ©es Ã  Moscou, une architecture dÃ©passÃ©e, des ressources Ã©trangÃ¨res et lâ€™absence presque complÃ¨te de documentation pertinente pour tout cela.  L'introduction sonnait quelque chose comme ceci: "Maintenant, c'est votre patrimoine, amÃ©liorez, ne cassez pas et soutenez."  Il y avait une liste de tÃ¢ches prÃªte Ã  l'emploi et des plans approximatifs pour l'annÃ©e Ã  venir.  Il fallait comprendre tout cela et le mettre sous une forme humaine. <br><blockquote>  Il y avait un sentiment que je regardais dans l'abÃ®me, et l'abÃ®me me regardait. </blockquote>  L'expÃ©rience des derniÃ¨res annÃ©es m'a beaucoup aidÃ© lorsque j'ai dÃ©veloppÃ© une position claire en travaillant avec un inconnu ou incomprÃ©hensible.  Il s'agit tout d'abord d'une Ã©tude approfondie et d'un plan d'action minimal.  C'est lÃ  que j'ai commencÃ©. <br><br><h2>  La propretÃ© est la clÃ© de la santÃ© </h2><br>  L'ordre est avant tout. <br><br>  Pour le premier mois a rÃ©ussi Ã  trouver: <br><br><ul><li>  Google Sheets dispersÃ©s avec les tÃ¢ches en cours et une pincÃ©e d'informations utiles; </li><li>  documents Ã©pars: Word, textes, bouts de vieilles pages Wiki 120; </li><li>  Nagios Ã  demi mort; </li><li>  surveillance conditionnelle en direct des cactus; </li><li>  marionnette trÃ¨s ancienne avec de rares signes de vie. </li></ul><br>  Toutes ces ruines ont Ã©galement collectÃ© 400 mÃ©triques. <br><br><img src="https://habrastorage.org/webt/gu/q9/bx/guq9bxrahvxth1pywoi2rgw8ck0.jpeg"><br>  <em>Les ruines que j'ai trouvÃ©es le premier mois.</em> <br><br>  J'Ã©tais un peu amusant, j'ai tout lu couramment et je suis restÃ© fidÃ¨le aux processus Trello.  Il lui a transfÃ©rÃ© les tÃ¢ches actuelles de ses collÃ¨gues et a commencÃ© Ã  rÃªver - Ã  rÃ©diger un plan pour le trimestre et l'annÃ©e. <br><br><h3>  PremiÃ¨re erreur </h3><blockquote>  Aucun plan jusqu'Ã  ce que vous exploriez la rÃ©gion. </blockquote>  Le plan brillait de chaleur et de santÃ©, mais ne tenait pas compte de la rÃ©alitÃ©.  C'Ã©tait beau et simple: implÃ©menter la surveillance, analyser les journaux et transfÃ©rer le dÃ©ploiement sur CI / CD.  Quelque part Ã  la fin, il y a eu une Â«analyse des faiblesses du projetÂ» languissante.  Premiers pas classiques. <br><br>  J'ai oubliÃ© l'essentiel.  Ma premiÃ¨re prioritÃ© n'est pas de mettre en place des outils pour la mise en place d'outils, mais d'assurer la viabilitÃ© et la stabilitÃ© du service dans son ensemble. <br><br>  Pendant que j'Ã©crivais le plan et tourmentÃ© par les questions de mes collÃ¨gues, les premiers problÃ¨mes sont arrivÃ©s.  L'un des nÅ“uds d'un des clusters de cluster a manquÃ© d'espace et le SSD dans son ensemble s'est terminÃ© sur l'autre nÅ“ud du mÃªme cluster.  J'ai achetÃ© de toute urgence de nouveaux disques plus gros et notre service a rapidement acquis de l'expÃ©rience dans le remplacement de ces disques en copiant le systÃ¨me d'un disque Ã  l'autre.  AprÃ¨s avoir remplacÃ© les disques, nous avons construit le cluster Ã  partir de zÃ©ro via SST.  Le cluster est construit sur Percona et Galera, et un tel divertissement ne lui revient pas pour rien. <br><br>  Pendant que je voyageais entre les centres de donnÃ©es, les <strong>premiers germes du doute</strong> sur le plan sont nÃ©s. <br><br><img src="https://habrastorage.org/webt/3d/or/b2/3dorb2jimqxrud9f-mtog3yqltw.jpeg"><br>  <em>Ahhhhhh!</em> <br><br>  En mÃªme temps, l'intensitÃ© du travail noir Ã©tait si Ã©levÃ©e que je ne pensais mÃªme pas Ã  recueillir des antÃ©cÃ©dents mÃ©dicaux complets, mais j'ai simplement pris quelques photos pour une Ã©tude plus approfondie. <br><br>  En parallÃ¨le, une autre introduction est apparue.  En litres, il existe des versions audio des livres.  Pour que l'auditeur ne rembobine pas l'enregistrement Ã  chaque fois, nous avons un mÃ©canisme qui suit le moment de l'arrÃªt.  La prochaine fois que vous Ã©coutez, la version audio est lue Ã  partir de la section souhaitÃ©e.  Pour cette tÃ¢che, il a fallu trouver environ 500 cÅ“urs plus rapidement, un tÃ©raoctet de RAM et un peu d'analyse en Java. <br><br>  J'ai commencÃ© Ã  informer Azure, Google, DigitalOcean et tout le reste fourni par les solutions de droplet.  La conteneurisation demande, pourquoi ne pas la mettre en Å“uvre joyeusement?  De plus, dans le "grand" plan, il y avait un point distinct Ã  ce sujet. <br><br>  Un mois s'est Ã©coulÃ© dans la correspondance et les enchÃ¨res, tout a Ã©tÃ© ajoutÃ© aux tÃ¢ches de Trello, dont j'ai gÃ©nÃ©rÃ© une part importante, mais le rÃ©sultat n'a pas progressÃ©.  Je me demandais si j'allais lÃ -bas.  Avant moi, tout a fonctionnÃ© d'une maniÃ¨re ou d'une autre et ne va pas s'arrÃªter, peu importe la quantitÃ© d'activitÃ© vide que je montre.  Je me suis assis soigneusement pour Ã©tudier petit Ã  petit l'inventaire que j'ai rÃ©ussi Ã  collecter.  Puis il s'est levÃ© et s'est rendu au deuxiÃ¨me tour des centres de donnÃ©es. <br><br>  La deuxiÃ¨me visite sereine des centres de donnÃ©es a tout remis Ã  sa place.  Quand j'ai vu tout cela pas dans la console, pas dans Excel, mais vivant, ma conscience de la rÃ©alitÃ© a radicalement changÃ©.  J'ai rÃ©alisÃ© que je ne suis pas du tout occupÃ© par ce que je devrais.  Parce que vous devez d'abord comprendre avec quoi je travaille. <br><blockquote>  Jusqu'Ã  ce que je comprenne avec quoi je travaille, tous les plans sont une perte de temps. </blockquote>  J'ai Ã©tudiÃ© les racks, comparÃ© la rÃ©alitÃ© aux listes, effectuÃ© des modifications et suis tombÃ© sur une semi-unitÃ© Ã  20 lames.  Sur 20, seulement 4 ont fonctionnÃ©, j'ai secouÃ© les lames et j'ai rÃ©alisÃ© que nous n'avions pas besoin de gouttelettes pour la solution.  Parce que j'ai trouvÃ© 340 cÅ“urs dormants, 2 tÃ©raoctets de RAM et 17 tÃ©raoctets d'espace disque!  Ce sont de vieux backends, de vieux nÅ“uds de clusters qui ont tout simplement cessÃ© d'utiliser, et le temps a effacÃ© la mÃ©moire de leur existence.  J'ai roulÃ© Kubernetes sur ces lames et me suis dÃ©barrassÃ© d'une tÃ¢che majeure. <br><br><h3>  PremiÃ¨re sortie d'erreur </h3><blockquote>  Analyser et Ã©tudier.  Sans une analyse prÃ©liminaire de la situation, le train ne bouge pas. </blockquote>  GrÃ¢ce Ã  un voyage rÃ©flÃ©chi sur le terrain, j'avais dÃ©jÃ  entre les mains un plan assez pertinent pour l'Ã©quipement et l'architecture globale du systÃ¨me.  Dans la cour Ã©tait en janvier.  J'ai passÃ© deux mois lÃ -dessus, dont la moitiÃ© je me suis prÃ©cipitÃ© d'un cÃ´tÃ© Ã  l'autre.  Je ne savais pas quel type dâ€™incendie Ã©teindre en premier, quel problÃ¨me rÃ©soudre en premier - la routine avec assistance nâ€™allait nulle part. <br><br>  En parallÃ¨le, j'ai dÃ©duit trois rÃ¨gles.  Ce sont les consÃ©quences de la premiÃ¨re erreur. <br><br><img src="https://habrastorage.org/webt/pk/bc/d6/pkbcd6tndhw7uz0jlv7wkttizts.jpeg"><br>  <em>Trois corollaires.</em> <br><br><h3>  DeuxiÃ¨me plan </h3><br>  J'ai retirÃ© les tÃ¢ches secondaires du premier plan - l'analyse du journal et la mise en Å“uvre de CI / CD.  Ã€ l'Ã©chelle d'une catastrophe gÃ©nÃ©rale, ces petites choses n'ont pas d'importance.  Litres a fonctionnÃ© pendant des annÃ©es et a dÃ©veloppÃ© ses propres logiques pour travailler avec des journaux, et a acquis un dÃ©mon roulant autodidacte.  J'ai poussÃ© dans le cinquiÃ¨me plan ce qui a fonctionnÃ© et n'a pas nÃ©cessitÃ© d'intervention. <br><br>  Le deuxiÃ¨me plan ressemblait Ã  quelque chose comme Ã§a. <br><br>  <strong>GÃ©rez la surveillance</strong> .  Dans sa forme actuelle, elle ne reflÃ©tait pas au moins un tiers des problÃ¨mes, mÃªme si cela fonctionnait. <br><br>  <strong>DÃ©crivez la logique gÃ©nÃ©rale des litres entiers</strong> .  Les noms de serveur sont excellents, mais les ensembles de clÃ©s sont des connaissances essentielles: quoi, oÃ¹, oÃ¹, pourquoi et pourquoi.  L'erreur prÃ©cÃ©dente a clairement montrÃ© que sans cela en aucune faÃ§on. <br><br>  <strong>Mise Ã  l'Ã©chelle</strong> .  Presque les derniÃ¨res ressources gratuites ont pris Kubernetes.  Selon des estimations minimales, il Ã©tait censÃ© terminer l'ensemble du travail en six mois. <br><br>  <strong>Inventaire et Ã©tat du matÃ©riel</strong> .  Dans le cadre du voyage, j'ai littÃ©ralement nettoyÃ© un site Web Ã  partir d'un certain nombre de serveurs qui ont fait peur avec leurs balises - Â«sauvegardeÂ», Â«abonnementÂ», Â«bgpÂ».  Encore une fois, des disques, des disques tombants. <br><br>  <strong>Adapter les guides Ã  la rÃ©alitÃ©</strong> .  La plupart des instructions sont obsolÃ¨tes ou incomplÃ¨tes. <br><br>  Les six premiers mois sont passÃ©s inaperÃ§us dans le chiffre d'affaires, l'achat de matÃ©riel et les ennuis, et je me suis finalement installÃ© dans la deuxiÃ¨me erreur. <br><br><h3>  DeuxiÃ¨me erreur </h3><blockquote>  Ne sous-estimez pas. </blockquote>  <strong>Tout terme qui me vient Ã  l'esprit est sous-estimÃ©</strong> .  Bien sÃ»r, vous pouvez rapidement bÃ©nÃ©ficier du projet.  Mais pour maximiser les rendements, multipliez le temps prÃ©vu par <strong>au moins deux fois</strong> .  Surtout sur un projet complexe et trÃ¨s chargÃ©, dont le trafic augmente rÃ©guliÃ¨rement de plus de 100% par an. <br><br>  Pourquoi au moins deux fois?  Si le projet est instable et non recherchÃ©, prÃ©parez-vous au fait que toute activitÃ© donnera lieu Ã  d'autres activitÃ©s dans les lieux voisins.  Il semblerait que le remplacement des disques - ce qui est plus facile?  La procÃ©dure est simple jusqu'Ã  ce que vous tombiez sur un achat, puis la planification du temps pour des nÅ“uds spÃ©cifiques d'indisponibilitÃ©, puis l'entretien aprÃ¨s le remplacement d'un disque.  J'ai estimÃ© cette opÃ©ration simple par semaine.  En fin de compte, cela a pris deux semaines et demie - mÃªme avec un simple systÃ¨me d'approvisionnement. <br><br>  Un autre exemple est l'achat et l'installation de nouveaux Ã©quipements.  Acheter et coller, qu'est-ce qui est si difficile?  Je n'ai pas pris plus d'un mois pour cela sans tenir compte du dÃ©lai de livraison.  En fait, l'un des trois chÃ¢ssis est toujours debout devant mon bureau.  C'est parce que l'Ã©quipement n'avait tout simplement pas assez d'espace - nous avons calculÃ© la place dans les trous entre l'installation actuelle.  Lorsque nous sommes arrivÃ©s dans l'un des centres de donnÃ©es avec l'intention de secouer le rack, nous avons soudain rÃ©alisÃ© que les deux serveurs Ã©taient Â«intouchablesÂ».  Le premier est l'hÃ´te, et il n'est tout simplement pas sÃ»r de le toucher.  Le second est un panier de 16 disques, en cours de fermeture qui est semÃ© d'un tas de tas de donnÃ©es.  Les pailles n'ont pas Ã©tÃ© posÃ©es, l'analyse n'a pas Ã©tÃ© effectuÃ©e et il est bon qu'ils aient pu en coller deux sur trois. <br><br>  <strong>S'il semble que tout sera simple, vous aurez bientÃ´t des problÃ¨mes</strong> .  Cette installation a soulevÃ© une nouvelle question - si tout va si mal avec l'endroit, alors comment allons-nous nous dÃ©velopper?  Une petite tÃ¢che a maintenant engendrÃ© une sueur gÃ©ante.  En 2020, selon le plan, le transfert d'un data center Ã  un autre et l'extension du reste par des racks.  Cela signifie une migration au sein du centre de donnÃ©es entre les modules.  La migration a Ã©tÃ© complÃ©tÃ©e par la restructuration du rÃ©seau et son transfert vers la 10G. <br><blockquote>  Ne sous-estimez pas le calendrier, le seuil d'entrÃ©e et les consÃ©quences. </blockquote><br><h3>  Concepts de base </h3><br>  Bien sÃ»r, l'essence des erreurs est dÃ©jÃ  dÃ©crite dans le wiki comme des concepts de base. <br><br>  <strong>Tout processus bureaucratique dure au moins un mois</strong> .  Cela s'applique Ã  l'approvisionnement, Ã  la conclusion de nouvelles conditions avec un centre de donnÃ©es ou d'autres entrepreneurs - Ã  tout.  Prenez-le comme un fait. <br><br>  <strong>AprÃ¨s la conclusion du contrat et le paiement, toute livraison dure au moins une semaine et demie</strong> , des disques aux processeurs.  Apprenez Ã  nÃ©gocier avec les fournisseurs pour les dates de prÃ©-livraison.  Par exemple, les disques nous sont expÃ©diÃ©s par petits lots maintenant jusqu'au paiement et mÃªme avant l'approbation de la demande. <br><br>  <strong>Bien qu'il n'y ait pas de comprÃ©hension claire de la mise en Å“uvre, tout plan pour mettre en Å“uvre quelque chose reste un plan.</strong>  Plus les Ã©tapes sont courtes, mieux c'est. <br><br>  Par exemple, pour passer de MySQL Ã  ClickHouse, une large Ã©tape ressemble Ã  ceci: "Remplissons un serveur, puis dessinons un ticket pour la rÃ©intÃ©gration et volons!"  En fait, une Ã©tude dÃ©taillÃ©e du problÃ¨me a conduit Ã  de nouvelles Ã©tapes: achat supplÃ©mentaire d'Ã©quipements, par exemple, processeurs et disques, tickets dÃ©taillÃ©s pour changer la logique du traqueur de comportement des utilisateurs, maintien de l'intÃ©gration inverse, serveurs de files d'attente et bien d'autres. <br><blockquote>  Plus le plan est dÃ©taillÃ©, mieux c'est.  Ã‰crire avec un coup de pinceau large est une garantie de 100% d'erreur dans le dÃ©lai. </blockquote>  <strong>Soumettez tout plan Ã  un maximum de critiques et attendez-vous Ã  un risque maximum</strong> .  Assurez-vous de regarder le plan d'un point de vue commercial - quel profit chaque Ã©tape apportera. <br><br>  Nous avons dÃ» rÃ©aliser des implÃ©mentations obligatoires: monitoring, Ansible, mais nous n'avons pas oubliÃ© la composante mÃ©tier. <br><br><ul><li>  En modifiant l'architecture du rÃ©seau, nous pourrons accepter du trafic supplÃ©mentaire et rÃ©soudre de nombreux problÃ¨mes actuels. </li><li>  En changeant le type de stockage de contenu, nous rÃ©duirons le nombre de bogues avec le retour des livres et augmenterons la vitesse de travail avec les donnÃ©es. </li><li>  DÃ©placez le backend vers le cloud - adaptez instantanÃ©ment la charge lors des campagnes marketing. </li><li>  La traduction du suivi dans ClickHouse est une opportunitÃ© pour les analystes de mieux comprendre les besoins de nos lecteurs et auditeurs bien-aimÃ©s. </li></ul><br>  <strong>La meilleure faÃ§on de faire face Ã  une situation oÃ¹ vous Ãªtes mal familiarisÃ© avec le sujet est de demander l'aide de spÃ©cialistes, pas de dÃ©bordement de pile</strong> .  Le contact vocal rÃ©sout le problÃ¨me plusieurs fois plus rapidement qu'une longue correspondance ou la lecture de documentation. <br><br><h3>  Six mois plus tard </h3><br>  MalgrÃ© le fait que les tÃ¢ches de base sur lesquelles je me reposais au dÃ©but dÃ©rapaient encore, grÃ¢ce aux recherches et aux corrections, quelque chose de bien est apparu dans mes mains. <br><br>  <strong>Outil auto-Ã©crit pour l'inventaire des rÃ©seaux et des adresses.</strong>  Il tapait rÃ©guliÃ¨rement tous nos sous-rÃ©seaux et vÃ©rifiait en outre les donnÃ©es avec la configuration BIND.  Cela a rendu facile et rapide la mise en service de nouveaux services et la comprÃ©hension de la charge rÃ©elle des pools de rÃ©seaux.  Je ne voulais vraiment pas y consacrer du temps, mais je ne pouvais pas trouver d'alternative toute faite, et trouver une adresse Ã  allouer Ã  une nouvelle ressource prenait beaucoup de temps.  Lors de la rÃ©daction de l'outil, la premiÃ¨re Ã©bauche du plan est apparue sur le rÃ©seau. <br><br>  <strong>La marionnette n'est plus aussi morte et confuse</strong> .  J'Ã©tais armÃ© d'une conclusion de l'erreur numÃ©ro un et je n'ai mÃªme pas essayÃ© de passer Ã  Ansible, ce qui est plus confortable pour moi. <br><br>  <strong>Nagios plus ou moins truquÃ©</strong> .  Je l'ai dÃ©placÃ© du bureau vers le centre de donnÃ©es et l'ai distribuÃ© en trois points.  C'Ã©tait beaucoup plus rapide et moins cher que l'implÃ©mentation de Zabbix.  Nous avons bouchÃ© un trou avec des alertes incorrectes dans le temps et les Ã©vÃ©nements, une simple reconfiguration des rÃ¨gles et l'introduction de nÅ“uds de contrÃ´le supplÃ©mentaires. <br><br>  <strong>Comprendre</strong> la maintenance des clusters de bases de donnÃ©es utilisÃ©s. <br><br>  <strong>Wiki fortement gonflÃ©</strong> .  Elle a "grossi" Ã  partir de commentaires et d'instructions sur l'utilisation des environnements. <br><br>  <strong>Trois chÃ¢ssis HP</strong> que nous avons achetÃ©s pour une future installation. <br><br>  <strong>Comprendre le chemin vers le reste de 2019</strong> dans une approximation plus claire. <br><br>  <strong>Ã‰cosystÃ¨me recyclÃ©</strong> pour le travail du dÃ©partement. <br><br>  Pendant ces six mois, j'ai travaillÃ© presque seul.  Les employÃ©s qui ont hÃ©ritÃ© Ã©taient davantage d'administrateurs systÃ¨me.  Ils n'Ã©taient pas vraiment impatients de se plonger dans l'essence de DevOps. <br><br>  Avec beaucoup de difficultÃ©, j'ai trouvÃ© deux spÃ©cialistes dans l'Ã©quipe - junior et middle.  J'ai rassemblÃ© le maximum de connaissances, d'apparences et de mots de passe des administrateurs actuels et je me suis sÃ©parÃ© d'eux avec le cÅ“ur lourd. <br><br><h3>  SystÃ¨me de travail, environnement et outils </h3><br>  Je vais vous parler de l'importance d'introduire un Ã©cosystÃ¨me et un environnement de travail.  J'ai dÃ©jÃ  mentionnÃ© Trello, mais je n'ai pas dit pourquoi et pourquoi je l'ai mis en Å“uvre.  Aucun travail ne sera construit sans fixer des objectifs et des donnÃ©es structurÃ©es.  Cela est partiellement dÃ©montrÃ© par la premiÃ¨re erreur - collectez tout ce qui est. <br><blockquote>  Prenez tout, ne donnez rien. </blockquote>  <strong>Le processus est le moteur du progrÃ¨s</strong> .  Par consÃ©quent, pendant tout ce temps, j'ai travaillÃ© sur le systÃ¨me, malgrÃ© l'obstruction de la recherche et du flux de travail.  GrÃ¢ce au systÃ¨me, six mois plus tard, j'ai mis la locomotive Ã  vapeur du dÃ©partement sur des rails stables. <br><br>  L'introduction d'outils de support et un court cours sur son utilisation permettent de gagner beaucoup de temps pour vous et vos collÃ¨gues.  Surtout si vous, mÃªme au sommet, comprenez dans la gestion et un peu capable de maintenir l'ordre sur le bureau et dans la vie. <br><br>  <strong>Nous ne compliquons pas les outils, nous partons du simple et introduisons le nÃ©cessaire</strong> .  Au dÃ©but de l'annÃ©e, j'ai pensÃ© au tracker qui nous conviendrait.  A immÃ©diatement licenciÃ© Jira et Redmine - trop de contrÃ´le.  Nous passerions du temps Ã  remplir les formulaires, pas les tÃ¢ches.  Google Sheets - Je pense que cela ne vaut pas la peine d'expliquer pourquoi. <br><br>  <strong>Trello Ã©tait parfait</strong> .  Quelques colonnes simples: Â«BacklogÂ» - oÃ¹ toutes les erreurs ou tÃ¢ches constatÃ©es pour le futur s'additionnent, Â«Ã€ la finÂ» - les principales tÃ¢ches Ã  effectuer et Â«TerminerÂ».  Un peu plus tard, il y avait cinq colonnes: Â«BacklogÂ», Â«PauseÂ», Â«SprintÂ», Â«FinishÂ» et Â«StudyÂ». <br><br>  Dans la "pause", des choses qui ont perdu leur pertinence dans le processus de sprint.  Dans Â«LearningÂ» - tÃ¢ches qui nÃ©cessitaient des recherches et ne devraient pas Ãªtre perdues jusqu'au moment de la comprÃ©hension et du transfert des connaissances vers le Wiki.  Le sprint est devenu la preuve que nous sommes passÃ©s au systÃ¨me de sprint.       â€” 2 .      ,     . <strong>      </strong> . <br><br> <strong>  </strong> â€”  ,  Trello.      . ,      ,   .           2-3   ,       . ,         . <br><br>      .      â€” Puppet, Nagios, DNS â€”   SVN   GitLab.    Jenkins.    DNS    ,     Puppet     -   .       ,     1Password.       . <br><blockquote>        ,    . </blockquote><br><h3>  </h3><br>       :  ,    , .    ,      . <br><br>       â€”            .      .    ,     ,           .  ,          â€” Â«.Â». <br><br>   (  )  -    DDoS-      . ,      ,      DDoS.      DNS   ,   10         DNS .     ,         â€” , ,  â€” .   ,     20     . <br><br>        Cloudflare     .               Anti-DDoS     .  ,      Cloudflare        .       .        ,  DDoS'   ,   . <br><br>         .          KPI. <br><br><h3>   KPI </h3><br>          .           .  ,  ,    . <br><br>      KPI.    â€”    . <br><br><ul><li>     .   â€”  . </li><li> Downtime.   â€”  . </li><li>     .    ,  --,   ,    .    ,    . </li></ul><br>         KPI,    â€” . ,   ,    KPI,        . <br><br>   .      90%.      ,    .  â€”  ,  .      .         ,        . <br><br> <strong>    -Nagios  -Puppet</strong>     Zabbix  Grafana  Ansible.      Â«        Â». <br><br>      Prometheus          ,   Zabbix.      Zabbix,   Prometheus â€”     .        â€”      .                . <br><br> <strong>  ,     ,    </strong> . <br><br><ul><li>  . </li><li>     . </li><li>   . </li><li> . </li></ul><br><h3>   </h3><br>       .   ,  <strong>   ,    </strong> .     â€”    .          ,     . <br><br>       .    -    -,  -  .    ,     .      .         .       .       . <br><br>    ,            . <br><br><img src="https://habrastorage.org/webt/cx/ts/v2/cxtsv2pow8pwufw6dzq6ovfai6q.jpeg"><br>       2  .   3     Â« Â»,   â€”   .    . <br><br> <strong> </strong> .      :  ,      ,    ,    Ansible,    . <br><br> <strong> .</strong>          ,        .      .        . <br><br> <strong>  </strong> . <br><br> <strong></strong> â€” ,  ,  .       . <br><br> <strong> </strong> .    â€”  ,             . <br><br>      .      ,           .      .      2019.    ,  ,    , â€”     .                . <br><br><h3>    </h3><br>         .    . <br><blockquote>   . </blockquote>       ,  -    ,    .         . <br><br><ul><li>        ,  ,      . </li><li>   ,      . </li><li>    , ,    â€” . </li><li>      ,  ,  ,  â€”   ,       . </li></ul><br>       .    ,    - .        ,   ,  ,    . <br><blockquote>    . </blockquote>     â€” , , .     ,    ,     . <br><br><img src="https://habrastorage.org/webt/mo/rs/us/morsusn140tgpjhqq_r7j_brdlc.jpeg"><br><br>   ,     â€”  -   . ,     . <br><br><ul><li>        . </li><li>      ,    . </li><li>      ,      ,    . </li></ul><br>       Â«  ,    Â».   ,        â€”  ,  , ,  . <br><br>    ,     ,     . <br><br><h2>   â€”    </h2><br>  Ansible? ,  ,   Puppet  ?        â€”     . <br><br><img src="https://habrastorage.org/webt/q6/7v/5j/q67v5jtkws8xri9l2v-eflfci8e.jpeg"><br><br>          CI/CD?   ,  .  CI/CD  ,      â€” . <strong>    .</strong> <br><br>    ,  ,      .      - ?   ,          KPI?       ,    -. <strong> -</strong> â€”  ,    ,   . <br><blockquote>  . </blockquote><br> <b>  :</b> <br><br><ul><li>    â€”      . </li><li>         . </li><li>    ,     . </li></ul><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">La prochaine confÃ©rence professionnelle DevOpsConf aura lieu au printemps. </font><font style="vertical-align: inherit;">Le programme est toujours en dÃ©veloppement - inscrivez-vous </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ã  la newsletter</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , faites-nous savoir quand nous dÃ©terminons les dates et le lieu. </font><font style="vertical-align: inherit;">Et la prochaine rÃ©union des ingÃ©nieurs DevOps se tiendra Ã  </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HighLoad ++ 2019</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> en novembre. </font><font style="vertical-align: inherit;">La section DevOps contient 13 rapports sur les charges de travail dans AWS, un systÃ¨me de surveillance dans Lamoda, des convoyeurs pour la livraison de modÃ¨les, la vie sans Kubernetes, la vie avec Kubernetes, le minimalisme de Kubernetes et bien plus encore. </font><font style="vertical-align: inherit;">Voir la liste complÃ¨te des sujets et rÃ©sumÃ©s sur la page sÃ©parÃ©e Â« </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Rapports</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Â» et </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rÃ©server des billets</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Cette annÃ©e, HighLoad ++ se tiendra dans trois villes Ã  la fois - Ã  Moscou, Novossibirsk et Saint-PÃ©tersbourg. </font><font style="vertical-align: inherit;">En mÃªme temps. </font><font style="vertical-align: inherit;">Comment ce sera et comment y arriver - dÃ©couvrez-le sur une </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;">page de promo</font></a><font style="vertical-align: inherit;"> sÃ©parÃ©e</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ã©vÃ©nements. </font></font></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr468537/">https://habr.com/ru/post/fr468537/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr468527/index.html">SynthÃ¨se d'un contrÃ´leur par la mÃ©thode du problÃ¨me de dynamique inverse</a></li>
<li><a href="../fr468529/index.html">Apprivoiser Gorynych ou dÃ©compiler eBPF dans Ghidra</a></li>
<li><a href="../fr468531/index.html">Le premier bot PHP pour VKontakte</a></li>
<li><a href="../fr468533/index.html">Faire du stop sur DevOps avec Express 42</a></li>
<li><a href="../fr468535/index.html">Vous n'avez pas besoin de journaux?</a></li>
<li><a href="../fr468543/index.html">ComitÃ© du programme en semaine FrontendConf. Entretien avec Sergey Popov</a></li>
<li><a href="../fr468545/index.html">"Alice, allons au front!"</a></li>
<li><a href="../fr468547/index.html">Parlant anglais, CSS, grille et accessibilitÃ© Ã  FrontendConf</a></li>
<li><a href="../fr468549/index.html">GPU Bound. Comment tout transfÃ©rer sur la carte vidÃ©o et un peu plus. Des animations</a></li>
<li><a href="../fr468553/index.html">Gestion des paramÃ¨tres dans les applications mÃ©tier similaire Ã  un systÃ¨me de contrÃ´le de version</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>