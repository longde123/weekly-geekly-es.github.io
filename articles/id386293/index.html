<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ§‘ğŸ¾â€ğŸ¤â€ğŸ§‘ğŸ¾ ğŸ’ƒğŸ¾ ğŸ¼ Antarmuka untuk Perangkat Crib Swing - Dari Fob Kunci ke Web ğŸ‘©ğŸ½â€ğŸ’» ğŸšœ ğŸ‘©ğŸ¿â€ğŸ’¼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sedikit lebih dari setahun telah berlalu sejak penulisan artikel pertama saya tentang perangkat untuk goyang buaian. Selama waktu ini, saya mengembang...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Antarmuka untuk Perangkat Crib Swing - Dari Fob Kunci ke Web</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/386293/"><div style="text-align:center;"><img src="https://habrastorage.org/files/a17/b69/b13/a17b69b1341b4ba38455428341654685.gif"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sedikit lebih dari setahun telah berlalu sejak penulisan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> pertama saya </font><font style="vertical-align: inherit;">tentang perangkat untuk goyang buaian. </font><font style="vertical-align: inherit;">Selama waktu ini, saya mengembangkan panel kontrol baru dengan layar, dan kemudian antarmuka web ke perangkat ini. </font><font style="vertical-align: inherit;">Jika Anda tertarik untuk belajar lebih banyak, selamat datang di kucing.</font></font><br>
<br>
<a name="habracut"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada awalnya - beberapa kata tentang perangkat itu sendiri, ringkasan singkat dari seri sebelumnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi, perangkat ini dirancang untuk mengayunkan boks bayi dengan mekanisme pendulum. Unit drive dengan elektromagnet dan elektronik di dalamnya dipasang pada bagian boks tetap. Magnet neodymium dipasang pada bagian yang bergerak. Terbang di atas elektromagnet, magnet permanen menginduksi EMF, bentuknya yang menentukan saat menghubungkan elektromagnet yang sama ke sumber daya. Dengan demikian, elektromagnet pada waktu yang tepat mendorong magnet permanen dan, karenanya, bagian boks yang dapat bergerak. Pada saat yang sama ketika elektromagnet tidak diaktifkan, ia memainkan peran sensor posisi untuk bagian boks yang dapat bergerak.</font></font><br>
<br>
<img src="https://habrastorage.org/files/79a/544/62a/79a54462afb845d7b06548478ca65f9e.gif" height="350" align="left"><img src="https://habrastorage.org/getpro/geektimes/post_images/e80/6e9/0bd/e806e90bd42d464c72d0cef045499ea0.jpg" alt="gambar" height="350"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya membuat salinan perangkat pertama untuk saya sendiri. Kemudian ternyata perangkat tersebut dapat dijual, dan selama lebih dari tiga tahun saya telah melakukan ini dengan berbagai tingkat keberhasilan. Sekarang dalam batch kecil, empat model perangkat ini diproduksi dan dijual melalui salah satu produsen furnitur anak-anak terbesar di Rusia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada model pertama perangkat untuk menggoyang buaian, kendali jarak jauh seperti itu digunakan sebagai panel kontrol. Ada empat tombol di atasnya dengan fungsi "Start", "Stop", "Stronger" dan "Weaker". Dengan demikian, menggunakan remote control ini, Anda dapat memulai dan menghentikan ayunan, serta mengubah intensitasnya - pilih satu dari enam level yang memungkinkan. Key fob beroperasi pada frekuensi 433 MHz dan tidak memiliki umpan balik.</font></font><br>
<br>
<div style="text-align:center;"><img src="https://habrastorage.org/files/845/aa6/11b/845aa611b6ee4769bed8bd30d1f63f4c.gif"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah beberapa waktu, versi perangkat yang disederhanakan (model 0) dikembangkan, umumnya tanpa panel kontrol. Mereka mengguncang buaian dengan tangannya - dan terus mengayun tanpa batas. Berhenti - berayun berhenti. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dalam mengembangkan model perangkat ayunan berikutnya (model 2), tugas utama adalah menambahkan timer mabuk dan memulai ayunan dari tangisan anak. Dan itu ternyata menjadi masalah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Faktanya adalah bahwa waktu ayunan harus diatur entah bagaimana, dalam jam dan menit. Dan sensitivitas mikrofon juga bagus untuk diatur. Tetapi semua ini membutuhkan antarmuka, dan kendali jarak jauh "buta" dengan empat tombol jelas tidak cukup.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, pikiran pertama adalah membuat beberapa indikasi pada case perangkat. Letakkan di sana beberapa LED dan / atau layar kecil. Dan kendalikan juga, dengan bantuan remote kecil ini. Namun, kelemahan dari solusi ini adalah bahwa perangkat umumnya dipasang di tempat yang tidak dapat diakses, di suatu tempat di dinding belakang boks di dinding. Dan indikasi pada kasus dalam hal ini tidak akan terlihat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jadi diputuskan untuk membuat panel kontrol dengan tampilan. Sedikit kurang dari satu tahun pengembangan - dan perangkat dengan remote control siap!</font></font><br>
<br>
<img src="https://habrastorage.org/files/6a7/2bd/a6e/6a72bda6ecfa4102917ccc6e36500b74.gif" align="left" height="350"><img src="https://habrastorage.org/files/c9d/5ad/290/c9d5ad290d064d5ababcf7b905b865cf.gif" height="350"><div style="text-align:center;"><img src="https://habrastorage.org/files/a5f/177/1dc/a5f1771dccce41aebe3815e49227f58c.gif"></div><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di dalam konsol adalah ATMega32A, layar adalah layar dari Nokia 1202, dan transceiver adalah NRF24L01 +. Kasingnya adalah standar siap pakai, keyboard adalah film. Dari remote control, Anda dapat mengatur waktu mabuk, sensitivitas mikrofon, intensitas ayunan, serta memulai dan menghentikan proses. Untuk kasus beberapa tempat tidur di ruangan yang sama, kemungkinan mengubah saluran kontrol disediakan, karena NRF24L01 + dengan mudah memungkinkan hal ini.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Konsol dan perangkat selalu saling berdialog. Ini dilakukan untuk umpan balik - status perangkat saat ini ditampilkan di layar, yaitu, apakah proses ayunan sedang berlangsung atau tidak (jika ya, gambar boks pada remote control juga berayun), berapa lama waktu yang tersisa untuk dipompa, apa pengaturan saat ini untuk intensitas mabuk gerakan dan sensitivitas mikrofon. Agar baterai di panel kontrol tidak terkuras terlalu cepat, mode tidur disediakan - jika tidak ada yang menekan tombol pada remote control selama setengah jam, remote control akan "tertidur".</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah pengembangan dan peluncuran "Model 2", meskipun dalam produksi yang sederhana namun tetap, saya terus berpikir untuk meningkatkan perangkat swing. Itu akan luar biasa, saya pikir, jika Anda dapat mengontrol perangkat dari ponsel! Atau dari tablet. Misalnya, ketika saya tidur, saya meletakkan ponsel di sebelah saya. Ada jam alarm, dan surat, dan Anda dapat membaca sesuatu sebelum tidur. Dan tentu saja banyak orangtua muda juga melakukannya. Mengapa menggunakan remote control terpisah untuk perangkat swing saat ini - hal universal - smartphone atau tablet! Biarkan dia menjadi panel kontrol, pikirku.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang kurang lebih cocok dengan antarmuka radio di smartphone modern? Bluetooth dan Wi-Fi. Pada awalnya, saya mempertimbangkan untuk mengendalikan perangkat swing melalui Bluetooth. Dari kelebihan - mudah diimplementasikan dari sisi perangkat. Anda dapat menerapkan modul - "jembatan" Bluetooth-UART, dan ini masalahnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Benar, dari sisi smartphone - masalah terus menerus.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memulai dengan menjaga Bluetooth di ponsel Anda sepanjang waktu adalah ide yang buruk. Selanjutnya, untuk setiap OS Anda harus menulis perangkat lunak Anda sendiri, ini setidaknya dua aplikasi - untuk Android dan untuk iPhone. Tetapi ada juga telepon di bawah Windows Phone ... Setelah mempelajari topik ini lebih dalam, saya menemukan bahwa tidak ada yang dapat bekerja dengan iPhone, sepertinya ada beberapa batasan. Yah, bahkan jika semuanya berhasil. Aplikasi pertama harus ditulis. Kemudian terbitkan di toko yang sesuai. Maka mereka harus dipertahankan dalam urutan kerja yang baik, untuk memperbaiki kesalahan, untuk menanggapi komentar pengguna. Masalahnya adalah bahwa saya tidak pernah melakukan semua ini, bagi saya itu adalah "hutan gelap dengan partisan" dan dalam cara yang baik untuk bagian pekerjaan ini Anda perlu mempekerjakan orang yang berpengetahuan. Dan untuk mempekerjakan tidak satu kali, dan kemudian terus-menerus berkolaborasi dengannya dalam hal dukungan program.Nah, atau pelajari semuanya sendiri. Ternyata entah bagaimana mahal, dan secara teknis jelek. Karena itu, Bluetooth menghilang.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan kemudian saya mengetahui tentang keberadaan ESP8266. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya, sudah banyak yang menulis tentang modul-modul ini di sini, di samping itu, ada forum berbahasa Rusia yang sangat baik. Kurang dari setahun yang lalu, setelah mulai mempertimbangkan modul ini untuk aplikasi saya, untuk waktu yang lama saya tidak bisa membentuk pendapat tentang kemampuannya. Dan sekarang, dilihat dari pertanyaan pendatang baru di forum yang sama, saya melihat bahwa banyak yang tidak tahu apa modul ini (chip) mampu. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada hal penting untuk dikatakan di sini - awalnya ESP8266 "dilengkapi" dengan SDK Cina yang sangat "mentah" dan "buggy", dan oleh karena itu chip tersebut tidak dapat digunakan untuk menyelesaikan tugas "pertempuran" yang sebenarnya. Jadi, tentu saja, itu mungkin untuk bermain, mengedipkan LED, tetapi tidak mungkin untuk melakukan sesuatu yang bekerja secara stabil.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Namun, selama setahun terakhir, situasinya telah berubah secara mendasar. Pada forum berbahasa Rusia yang didedikasikan untuk chip ini, salah satu pesertanya mengimplementasikan proyek - "Pengembangan 'perpustakaan' server web kecil di ESP8266." Orang penyamaran yang luar biasa bersembunyi di bawah nama panggilan pvvx firmware buatan tangan tunggal untuk ESP8266, yang memungkinkan Anda untuk sepenuhnya mengungkapkan kemampuan chip ini. Kode sumber proyek tersedia untuk akses publik, penulis mengizinkannya untuk digunakan sesuka Anda, termasuk untuk tujuan komersial. Selain itu, pvvx terus melengkapi perakitan dengan fitur-fitur baru, dan, yang sangat penting, secara aktif hadir di forum dan tidak bosan (well, mungkin) menasihati pemula (dan bukan pemula juga).</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sebagai akibatnya, saya tidak takut pada pathos, pekerjaan yang luar biasa, menjadi mungkin (di antara banyak hal lainnya) untuk menyediakan perangkat apa pun dengan antarmuka web yang berfungsi penuh dan stabil. Kemampuan chip dan firmware tidak terbatas pada aplikasi ini, tetapi saya harus menyelesaikan masalah ini. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Keuntungan menggunakan ESP8266 sudah jelas, dan terlebih lagi, saat ini tidak ada opsi lain yang sebanding dalam harga dan fungsionalitas.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memang, dengan harga sekitar 170 rubel pada modul ESP8266, Anda dapat mengatur server web dengan antarmuka kontrol perangkat, yang memungkinkan Anda untuk tidak menulis program sama sekali di bawah sistem operasi apa pun, cukup buat antarmuka web sekali saja. Modul ini dapat beroperasi sebagai titik akses dan sebagai stasiun, serta secara bersamaan dalam dua mode ini. Misalnya, dengan menyambungkan ke modul sebagai titik akses, Anda dapat mengonfigurasi parameter komunikasinya, dan kemudian, jika diinginkan, sambungkan modul sebagai stasiun ke jaringan Wi-Fi rumah Anda. Perakitan ("dump", sebagaimana penulis menyebutnya dengan hormat) memiliki banyak pengaturan (lebih dari 250) yang tersedia dari antarmuka web.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, ada firmware lain untuk ESP8266, tetapi tidak satupun dari mereka memiliki kemampuan seperti itu, stabilitas dan kualitas kerja seperti perakitan dari pvvx (ini adalah pendapat subjektif saya, berkaitan dengan tugas saya). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berdasarkan firmware ini, antarmuka web dikembangkan untuk perangkat goyang buaian. Komponen web itu sendiri ditulis sedemikian rupa sehingga situs ditampilkan dengan benar di berbagai layar dengan ukuran dan resolusi yang berbeda. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/e3b/b52/a67/e3bb52a67c6cf9fdf15a8298999d67c2.jpg" alt="gambar" height="800" align="left"><img src="https://habrastorage.org/getpro/geektimes/post_images/f57/0b3/440/f570b344063bba844ebf23a8394eb634.jpg" alt="gambar" height="397" align="left"><img src="https://habrastorage.org/getpro/geektimes/post_images/4a6/8db/1f4/4a68db1f4fad6a2bfaea052ef086adaa.jpg" alt="gambar" height="397"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tentu saja, perangkat keras perangkat harus dibuat ulang yang hebat (sebenarnya - dilakukan lagi). Algoritma swing sekarang diimplementasikan pada mikrokontroler Attiny441, berinteraksi dengan ESP8266 via UART. Suplai 3,3 volt dibuat menggunakan ST1S10. Papan opsi dengan kesalahan (diperbaiki oleh pemasangan di permukaan):</font></font><br>
<br>
<img src="https://habrastorage.org/files/469/e9d/477/469e9d477ad747f39a40291cfad1b0fa.gif" height="350" align="left"><img src="https://habrastorage.org/files/595/0b9/378/5950b9378053444ba6b86cdf831d5ad6.gif" height="350"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, sekarang menjadi lebih mudah untuk "mengikat" Wi-Fi dan antarmuka web dengan apa pun. </font><font style="vertical-align: inherit;">Pada saat yang sama, sistem akan bekerja dengan cukup stabil, dan biaya komponen hanya sekitar 250 rubel (jika Anda menghitung seluruh penjilidan, tidak hanya modul ESP8266 itu sendiri). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dan antarmuka web perangkat untuk goyang boks muncul.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id386293/">https://habr.com/ru/post/id386293/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id386281/index.html">Penggalangan dana untuk pemindai yang tidak biasa yang dapat dengan cepat mengatasi bahkan dengan buku</a></li>
<li><a href="../id386283/index.html">5 kasing asli merek yang mempromosikan diri melalui permainan</a></li>
<li><a href="../id386285/index.html">Memperkenalkan LXBOX 3 Mini PC</a></li>
<li><a href="../id386287/index.html">Sistem penyelamatan kolektif pesawat telah dibuat. Ini tidak menguntungkan - jawab di maskapai penerbangan</a></li>
<li><a href="../id386291/index.html">Dari apa, dari apa, dari apa robot kita terbuat dari apa?</a></li>
<li><a href="../id386295/index.html">Google Inbox Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ĞµÑ‚ Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°Ñ‚ÑŒ Ğ½Ğ° e-mail, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑ Ğ²Ñ‹ÑĞ¾ĞºĞ¸Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸</a></li>
<li><a href="../id386297/index.html">Menunggu ruang berbagi bersama</a></li>
<li><a href="../id386299/index.html">Samsung telah mengumumkan bio-prosesor baru untuk perangkat yang dapat dipakai</a></li>
<li><a href="../id386301/index.html">Virgin Galactic akan menampilkan versi baru SpaceShipTwo pada bulan Februari 2016</a></li>
<li><a href="../id386303/index.html">Lampu pintar yang akan menyelamatkan dari pencuri. Pengiriman beon dimulai</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>