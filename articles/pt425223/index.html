<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçõ üç´ üå∏ JPHP Aplicativos para Android üë©üèª‚Äçüé® üîÇ ‚õèÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As pessoas que escrevem c√≥digo em PHP far√£o de tudo para n√£o mudar para outros idiomas. Sim, eu sei que anteriormente no Habr√© j√° havia uma maneira de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>JPHP Aplicativos para Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/425223/"><p>  As pessoas que escrevem c√≥digo em PHP far√£o de tudo para n√£o mudar para outros idiomas.  Sim, eu sei que anteriormente no Habr√© j√° havia uma <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">maneira</a> de escrever aplicativos Android em PHP, mas foi decidido adapt√°-lo para ser mais r√°pido e compat√≠vel com o Java JPHP. </p><br><p><img src="https://habrastorage.org/webt/an/wt/ni/anwtnimygyt5vbxjo5idig80mn8.jpeg" alt="logo"></p><a name="habracut"></a><br><h2 id="o-yazyke-jphp">  Sobre o JPHP </h2><br><p>  Presumo que voc√™ possa ter uma pergunta.  O que √© o JPHP?  A resposta est√° a√≠, em Habr√©: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JPHP - Novo mecanismo php para Java VM + JIT</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">JPHP - Como Funciona.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Hist√≥ria da cria√ß√£o</a> </li></ul><br><p>  Bem, vamos continuar.  Nos 4 anos que se passaram desde a reda√ß√£o desses posts sobre o JPHP, esse idioma mudou para melhor.  Por exemplo, havia nosso pr√≥prio <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">gerenciador de</a> pacotes <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">jppm</a> sobre o qual tamb√©m precisamos conversar hoje. </p><br><h2 id="kak-vsyo-nachalos">  Como tudo come√ßou </h2><br><p>  Tudo come√ßou quando meu amigo teve a ideia de criar aplicativos Android no JPHP.  Dei a ele o post sobre o qual falamos no come√ßo, mas ele n√£o gostou desse m√©todo porque usa PHP comum.  Bem, n√≥s desenvolvedores que escrevemos em uma linguagem JPHP desconhecida decidimos fazer tudo sozinhos. </p><br><p>  Depois de navegar na Internet, n√£o encontramos outra maneira sen√£o usar o JavaFXPorts.  E o pr√≥prio criador dessa linguagem quis us√°-lo como um mecanismo de interface gr√°fica para o JPHP por 2 anos, sem ter feito nada. </p><br><p>  Como diz o ditado, "Quem al√©m de voc√™?" .. Corri para estudar o trabalho da linguagem JPHP globalmente. </p><br><p>  As primeiras semanas foram malsucedidas.  Eu j√° escrevi a gera√ß√£o autom√°tica de um script de constru√ß√£o para o gradle e tudo ficaria bem, o apk ia funcionar, mas quando eu comecei, um erro era desconhecido para mim naquele momento.  Eu imediatamente percebi que ela era devido ao JPHP, mas eu nunca tinha visto um assim antes.  Agora posso dizer com certeza que esse erro ocorreu devido ao bytecode gerado.  O DalvikVM brega n√£o p√¥de executar o bytecode gerado para a JVM.  Foi isso que se tornou um enorme obst√°culo.  Como os arquivos PHP nos aplicativos JPHP n√£o s√£o compilados.  Havia uma op√ß√£o com arquivos phb, mas isso n√£o resolveu o nosso problema.  A √∫nica maneira era escrever seu pr√≥prio compilador, o que realmente funcionou, mas trouxe v√°rias restri√ß√µes relacionadas √† inclus√£o e avalia√ß√£o, obrigado, Dalvik. </p><br><p>  Depois de muitas tentativas e erros, ainda consegui fazer a primeira vers√£o.  Suas fontes est√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  Esta vers√£o n√£o foi muito r√°pida.  Sim, e usar JavaFX no Android √© um masazismo. </p><br><p>  Por isso, decidi reescrever tudo do zero.  Eu tomei essa decis√£o relativamente recentemente.  Portanto, a biblioteca para JPHP √© um pouco √∫mida.  Mas funciona. </p><br><h2 id="kak-eto-rabotaet">  Como isso funciona </h2><br><p> Tudo come√ßa com o jppm coletando todas as suas fontes e depend√™ncias em um √∫nico arquivo jar.  Compilando neles todos os arquivos <code>php</code> em arquivos de <code>class</code> .  Ap√≥s o qual o arquivo jar resultante √© adicionado, dependendo do gradle.  E ele, por sua vez, compila esses arquivos de classe em dex.  Este √© todo o segredo. </p><br><p>  Iniciar o aplicativo √© mais complicado.  No <code>AndroidManifest.xml</code> inicialmente h√° apenas um <code>BootstrapActivity</code> que carrega todo o JPHP.  Ap√≥s o carregamento, esse <code>BootstrapActivity</code> pode ser modificado no JPHP.  Para <code>Activity</code> criei classes com o mesmo nome. </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">php</span></span>\<span class="hljs-title"><span class="hljs-title">android</span></span>\<span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">Application</span></span>; $bootstrapActivity = Application::getMainActivity();</code> </pre> <br><p>  Usando esse c√≥digo, voc√™ pode obter a pr√≥pria <code>BootstrapActivity</code> partir da qual o JPHP foi carregado. </p><br><p>  Eu acho que voc√™ j√° entendeu o trabalho do carregador JPHP. </p><br><h2 id="nebolshoy-primer">  Um pequeno exemplo </h2><br><p>  Por exemplo, para criar o clicker mais primitivo, voc√™ precisa usar este c√≥digo: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?</span></span> <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">php</span></span>\<span class="hljs-title"><span class="hljs-title">android</span></span>\<span class="hljs-title"><span class="hljs-title">app</span></span>\<span class="hljs-title"><span class="hljs-title">Application</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> <span class="hljs-title"><span class="hljs-title">php</span></span>\<span class="hljs-title"><span class="hljs-title">android</span></span>\<span class="hljs-title"><span class="hljs-title">widget</span></span>\<span class="hljs-title"><span class="hljs-title">Button</span></span>; Application::setMainActivityHandler(fn =&gt; { <span class="hljs-comment"><span class="hljs-comment">//   jPHP $activity = Application::getMainActivity(); //  BootstrapActivity $activity-&gt;setTitle("test"); //   $activity-&gt;setContentView($button = new Button($activity)); //     $button-&gt;text = "Hello from JPHP!"; //     $button-&gt;on("click", function () use ($button) { //     ... $GLOBALS['clicks']++; $button-&gt;text = "Clicks: " . $GLOBALS['clicks']; }); });</span></span></code> </pre> <br><p>  Como resultado, obtivemos um aplicativo simples com um bot√£o: </p><br><p><img src="https://habrastorage.org/webt/lf/04/3w/lf043wq0xgwej0yty6islmvwtnk.jpeg"></p><br><h2 id="zaklyuchenie">  Conclus√£o </h2><br><p>  N√£o acho que algu√©m se interesse pelo meu projeto.  Como ainda n√£o descreve 10% da API do Android.  E escrever aplicativos para Android em PHP n√£o √© um c√¢none.  Mas acho que o projeto encontrar√° seu p√∫blico. </p><br><p>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Projeto Github</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Github JPHP</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Agrupar em VK</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt425223/">https://habr.com/ru/post/pt425223/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt425213/index.html">Planos para a pr√≥xima vers√£o do Vue.js</a></li>
<li><a href="../pt425215/index.html">4 dicas para otimizar seu aplicativo webpack</a></li>
<li><a href="../pt425217/index.html">Toler√¢ncia a falhas do aplicativo ao atualizar o cluster Kubernetes</a></li>
<li><a href="../pt425219/index.html">O que √© sa√∫de mental: uma perspectiva da psicologia / psicoterapia</a></li>
<li><a href="../pt425221/index.html">Como fazer pl√°stico para impress√£o 3D</a></li>
<li><a href="../pt425225/index.html">Como ver os links dentro do seu m√≥dulo PowerShell</a></li>
<li><a href="../pt425227/index.html">Os pesquisadores descobriram uma maneira de detectar e ignorar as chaves Honeytoken em v√°rios servi√ßos da Amazon.</a></li>
<li><a href="../pt425229/index.html">Como ajudamos a CDN MegaFon.TV a n√£o chegar √† Copa do Mundo de 2018</a></li>
<li><a href="../pt425231/index.html">Perguntas frequentes sobre o trabalho de uma aeromo√ßa</a></li>
<li><a href="../pt425233/index.html">Python 3 no Facebook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>