<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚵 🔏 🎮 过渡到3D：芯片架构和记录算法对SSD寿命的影响 😱 👨🏼‍🚀 😹</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="尽管自首款SATA SSD推出以来已经过去了14年，但许多消费者仍然对固态驱动器持相当怀疑的态度。 不信任的主要原因是由于芯片半导体结构的逐渐退化导致闪存的工作资源有限，其结果是设备迟早会失去记录和存储信息的能力。 详细的技术规范通常只会加剧这种情况：购买者很难理解西方数字蓝3D NAND SATA...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>过渡到3D：芯片架构和记录算法对SSD寿命的影响</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wd/blog/438334/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/dq/bj/jq/dqbjjqlr4_mcp8ydxxop_bg98oi.jpeg"></div><br> 尽管自<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">首款SATA SSD</a>推出以来已经过去了14年，但许多消费者仍然对固态驱动器持相当怀疑的态度。 不信任的主要原因是由于芯片半导体结构的逐渐退化导致闪存的工作资源有限，其结果是设备迟早会失去记录和存储信息的能力。 详细的技术规范通常只会加剧这种情况：购买者很难理解西方数字蓝3D NAND SATA SSD描述中提到的2 TB的TBW 500 TB是多还是少？ 这样的驱动器在实际运行条件下能使用多少时间，最有价值的文件可以信任它吗？ 让我们尝试一起理解这个问题，并讨论现代闪存的可靠性。 <a name="habracut"></a><br><br> 严格来说，“生命，宇宙和所有主要问题”的答案早在2014年12月就收到了，当时<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">TechReport</a>网络出版物的家伙完成了对消费者SSD的测试，历时一年。 他们以HyperX，Corsair，Kingston和Samsung产品为例，令人信服地证明，SSD的实际寿命超过了1 PB的配音。 这样的数量几乎不仅对于普通用户而言是不可思议的，甚至对于专业内容制作者而言也是不可思议的：该驱动器在其资源耗尽之前会在道德上过时得多。 <br><br> 但是，有一个重要的细微差别：四年前，使用了MLC NAND芯片，该芯片能够在每个单元中存储2位信息，并使用25纳米工艺技术制造。 当时，这是高度可靠的SLC（单级单元）和更宽敞，更便宜的TLC（三级单元）之间的一个很好的折衷：具有两位单元的芯片提供了可接受的数据存储密度，可以承受多达5,000个写入/擦除周期（平均而言，这个数字达到了3000。 与其最亲密的兄弟无法说的是：尽管所有优势包括高容量和低成本，但TLC的耐用性要低得多，尽管大多数平面微电路几乎只能承受一千个，但几乎没有达到1,500,000个编程/擦除周期的门槛。 <br><br> 造成这种情况的主要原因是向芯片生产中使用的15纳米工艺的过渡。 要了解为什么会发生这种情况，只需记住NAND存储器是如何工作的。 由于高电场强度，由于电子穿过介电层的量子隧穿，通过改变浮栅上的电荷来进行信息位的编码。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lz/qz/ro/lzqzroqafmy7i8nuatakh-sdk5y.png"></div><br>  <i>浮栅晶体管电路</i> <br><br> 从物理学的角度来看，我们只处理可逆雪崩状击穿现象。 电子在电场中加速，从而获得足够的动能以使电介质分子发生碰撞电离，从而导致一对带有相反电荷的基本粒子也被电场加速，并且重复此过程，同时电荷载流子的数量呈指数增加（因此得名） ） 很容易猜到，这样的过程会导致介电层逐渐磨损，结果，电荷泄漏到相邻单元的可能性增加，进而导致数据损坏甚至完全丢失。 而且向新工艺技术的过渡只会加剧这种情况：电介质厚度的减小会导致电池更早失效的事实。 <br><br> 但是，如果问题仅在于此，普通消费者和企业用户将根本不会注意到MLC和TLC之间的区别，在SSD的技术规范中，我们将看到更令人印象深刻的数字。 实际上，一幅完全不同的图片出现在我们眼前，而闪存芯片的结构及其工作细节是造成这种情况的原因：单个单元被组合成页面，并且页面被分成块，而仅在空白页面中记录信息是可能的，并且将其删除逐块 <br><br> 在实践中这意味着什么？ 假设我们有一个部分填充的块，并且想向其中写入新数据。 如果它们的容量小于剩余的可用空间，则会立即进行记录，而无需进行任何其他操作。 如果没有足够的空间，则复杂的多阶段算法将发挥作用。 考虑下图中的情况。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mm/q6/z9/mmq6z9owirwzixgw-eyegu76wrm.png"></div><br>  <i>这是将数据写入闪存的方式</i> <br><br> 我们要记录的新数据在一个块中占据了两页，但实际上只有一页是空闲的：尽管用户较早地删除了旧页面（以黄色突出显示），但实际上记录的信息并未消失。 为了清除新数据的空间，控制器启动了一个称为垃圾收集的过程，删除了不必要的数据并重新分配了现有数据。 为此，除不必要的页面外，所有页面均被复制到第二个空闲块中，而第一页面被完全擦除。 然后，将实际页面转移回第一个块，从第二个块中删除，直到新数据取其应有的位置之后。 <br><br> 在上面的示例中，为了记录两页，我们必须完全重写两次两次，每次六页。 实际上，“垃圾收集”过程看起来要复杂得多，结果，重写周期的数量将大得多。 只能通过知道写放大系数来估计实际图像，写放大系数显示闪存上的实际负载超过计算值的次数。 仅当在绝对干净的，刚刚格式化的磁盘上记录信息时，此指示器才可以等于1；在所有其他情况下，其值都将在2到25之间变化。此外，即使乍一看，相同的驱动器也可能有很大差异，因此取决于所用控制器的型号和固件的功能。 因此，SSD容错能力不仅取决于闪存的类型，还取决于开发人员能够优化FTL（闪存转换层）层性能的程度。 <br><br><h2> 为什么存储密度的急剧增加不影响3D NAND存储器的可靠性？ </h2><br> 因此，现在我们知道闪存如何工作以及哪些因素决定了SSD驱动器的可靠性。 现在该弄清楚从“扁平”芯片过渡到所提供的三维芯片有哪些优势。 首先，由于使用了“电荷陷阱”（Charge Trap Flash）而不是熟悉的浮动百叶窗，因此3D NAND与之前的版本有所不同。 如果在后者中，使用带有掺杂剂的多晶硅来存储电荷，那么在CTF中，它是非导电材料（通常是SiN-氮化硅）的隔离区域。 这种方法使得可以最小化电荷泄漏的可能性，并因此增加了电池的稳定性。 <br><br> 三维存储芯片的结构与其前身相比也发生了重大变化，因为现在每个单元都具有圆柱形结构：外层是控制栅，内层是绝缘体。 由于电池现在彼此位于一个上方，因此它们形成了一个堆叠，多晶硅通道在该堆叠内通过。 容易理解，芯片中的层数决定了堆栈中的单元数。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qz/fu/sx/qzfusxqqkkse80fon8_zwpskgks.jpeg"></div><br>  <i>3D NAND芯片单元设备</i> <br><br> 这种结构可以减少单元之间的干扰，从而简化记录算法：由于不需要检查电荷状态，因此在单元中进行记录就可以一步完成。 另一个重要的细微差别：尽管3D NAND的生产密度大大提高，但仍使用磨合工艺。 因此，例如，使用40纳米工艺技术甚至可以生产48层芯片（第三代三维闪存）。 由于现有的生产线仅需极少的现代化改造，而深紫外光刻技术的需求就完全消失了，这不仅使它们的可靠性提高，而且降低了生产成本。 <br><br> 首先讲的是Western Digital产品，然后是现代<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WD Black SN750 NVMe SSD</a> ，该产品于2019年1月18日开始销售，使用的是采用28纳米工艺技术制成的64层TLC 3D NAND BiCS（比特成本可扩展）。 除了将包装密度再提高1.4倍（顶级型号现在的容量为2 TB，是上一代旗舰产品的两倍）之外，此类芯片的重要特征还在于使用了U形琴弦。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/f_/_h/fp/f__hfpf2mlnadkelyq0-6hwbgle.png"></div><br>  <i>3D NAND BiCS架构</i> <br><br> 由于现在开关晶体管和源极线位于芯片的上部，因此它们实际上没有受到高温影响，高温影响本身可能导致读/写操作期间的错误，从而进一步提高了固态驱动器的可靠性。 <br><br><h2> 记录算法如何影响SSD的寿命？ </h2><br> 上面我们已经写过，无论SSD本身多么坚固和安全，如果SSD的开发人员不费心创建有效的记录算法，其资源就会被浪费。 为了优化此过程，使用了两种非常有效的技术：SLC缓存和损耗均衡。 <br><br> 第一个本质是将可用存储阵列的一部分（其大小取决于驱动器的总容量）（例如，在开发<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">WD Blue 3D NAND SSD时，</a>我们从每250 GB容量的4 GB缓存计算开始）转移到SLC操作模式，即，每个单元中仅记录一位信息，这既可以显着提高其性能，又可以降低磨损率。  SLC参与存储在SSD上的数据的记录和合并，这不仅可以提高操作速度，而且可以降低电池的磨损率。 在当前版本的Western Digital SSD中，使用了nCache 3.0技术，该技术的最新版本已获得Direct-to-TLC功能，这使得在缓存和速度之间找到平衡成为可能：当数据已满或使用SLC-时，绕过缓存写入数据。缓冲区不实用。 一方面，这有助于卸载缓存，同时避免了在填充缓存时性能急剧下降。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ae/ku/i9/aekui9yjp2f3x4s_gqxzafprfxa.png"></div><br>  <i>填充SLC缓冲区时SSD上写入速度的动态变化</i> <br><br> 至于校平磨损技术，它有助于确保尽可能均匀地使用所有可用的页面块。 如您所知，任何操作系统都使用逻辑机制来寻址数据块（LBA），而控制器本身使用物理地址（PBA）进行操作，从而将它们与逻辑地址相关联。 结果，文件的片段实际位于何处都没有关系，因此可以编写一个微程序，以确保单元之间的负载均匀分布。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/at/ug/di/atugdiewcjn3lofybnprm267zty.png"></div><br>  <i>磨损平衡可确保电池均匀负载</i> <br><br> 在一般情况下，其算法如下。 您购买了全新的固态硬盘，尽管上面有可用空间，但信息将记录在空闲块中。 在操作时，您开始删除不需要的文件，并且垃圾回收机制会在后台清理它们，但是，只有在磁盘上至少没有一个块被写入数据之后，才将它们用于记录。 当然，实际上，一切都更加复杂，但是含义并没有改变。 <br><br> 在此，应该对Western Digital产品做一个更重要的说明。 当我们决定开发SSD市场时，我们可以采取两种方式：从第三方制造商那里购买内存和控制器，仅专注于固件的开发和优化，或者建立一个完整的生产周期。 从头开始运行这样的项目是不切实际的，甚至<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">购买SanDisk也</a>花了我们一大笔钱。 但是投入的资金已全部用尽：控制芯片的生产，我们有机会使微程序适应微电路的功能。 <br><br> 应该理解的是，将信息写入闪存单元比乍看之下要复杂得多：它考虑了数百个各种参数，其中最重要的是电荷转移所需的电压和记录时间。 随着芯片的磨损，它们的物理特性也会发生变化：为了成功地进行数据记录，需要的电压更少，同时，减少了其对电池的影响所需的时间。 在大多数SSD中，这些参数是恒定的，但是相反，在Western Digital SSD中，它们随着单元磨损而动态变化，从而可以最大化每个单元的寿命，从而最大程度地减少对半导体结构的负面影响。 <br><br><h2>  QLC 3D NAND-最新一代的闪存 </h2><br> 如果您关注高科技世界的消息，您可能已经知道Western Digital正在积极掌握下一代3D三维存储器-QLC 3D NAND的生产（首次发布于2018年6月）。 首字母缩写QLC代表四级单元。 换句话说，一个单元中可以存储16个电荷级别，不仅可以编码三个信息，还可以编码四个信息位。 与TLC 3D NAND相比，QLC中的记录密度增加了33％：因此，一个64层芯片的容量增加到768 Gbps。 但这不是限制：2018年8月，我们开始发布96层微电路。 通过增加层数，我们能够将容量增加50％，并克服了1 Tbit的障碍：称为3D NAND BiCS4的新芯片可以容纳1.33 Tbit的信息，约166 GB。 通过组合两个48层晶体可以实现如此高的数据存储密度（今天这是最经济可行的方法）。 <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/6c/z5/zp/6cz5zpi4rytexlpstn_7wfy9698.jpeg"></div><br>  <i>将两个48层芯片合并为一个96层</i> <br><br> 增加的容量可能会降低SSD的性能，但是您不必担心：新的3D NAND BiCS4闪存使用四个而不是两个物理阵列，这使得可以通过并行化操作来优化读写数据，而这反过来，这将有助于更有效地使用高速缓存并控制电池损耗水平，同时将QLC芯片的使用寿命保持在与现代TLC解决方案可比的水平。 但是，对QLC基础技术的描述超出了本材料的范围，因此当然值得单独撰写。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN438334/">https://habr.com/ru/post/zh-CN438334/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN438322/index.html">VSaaS 2025：未来的CCTV技术</a></li>
<li><a href="../zh-CN438326/index.html">俄罗斯的5G：为什么需要它？它的价格是多少？何时出现？ 简要介绍主要内容</a></li>
<li><a href="../zh-CN438328/index.html">程序员的薪资泡沫如何膨胀？</a></li>
<li><a href="../zh-CN438330/index.html">亚当斯州立大学。 如何入侵网站。 第一部分</a></li>
<li><a href="../zh-CN438332/index.html">亚当斯州立大学。 如何入侵网站。 第二部分</a></li>
<li><a href="../zh-CN438336/index.html">智能合约自动审核指南。 第1部分：准备审核</a></li>
<li><a href="../zh-CN438338/index.html">智能合约自动审核指南。 第2部分：Slither</a></li>
<li><a href="../zh-CN438340/index.html">媒体：iCloud可能有苹果试图隐藏的数据泄漏</a></li>
<li><a href="../zh-CN438342/index.html">为什么在Ghost Recon Wildlands中欺骗友好的AI</a></li>
<li><a href="../zh-CN438346/index.html">他们是如何做到的？ 加密货币匿名化技术概述</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>