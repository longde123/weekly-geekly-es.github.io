<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游분 丘쐞잺 游댶 Traslado del portal web: del monolito a la arquitectura de microservicios 游꺕 游녽游낖 游</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Compartimos la experiencia de modernizar la arquitectura del portal web, lo que hizo posible que el producto sea conveniente, estable y tolerante a fa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Traslado del portal web: del monolito a la arquitectura de microservicios</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/simbirsoft/blog/449538/">  Compartimos la experiencia de modernizar la arquitectura del portal web, lo que hizo posible que el producto sea conveniente, estable y tolerante a fallas: 춰el tr치fico aument칩 de 350 mil a 7 millones de usuarios!  La historia ser치 칰til para aquellos que planean expandir su producto.  Primero, veremos qu칠 factores pueden interferir con el trabajo y el desarrollo del portal web: <a name="habracut"></a><br><br><ul><li>  <b>Obsolescencia</b>  El enfoque de usabilidad, la adaptaci칩n a diferentes dispositivos, la apariencia y la estructura elementales dejan de satisfacer las necesidades de la audiencia con el tiempo. </li><li>  <b>Obsolescencia tecnol칩gica.</b>  Los est치ndares web y la tecnolog칤a est치n en constante evoluci칩n.  Los cambios afectan tanto a las herramientas del desarrollador (por ejemplo, marcos, bases de datos, otro software) como a los fundamentos fundamentales de la web.  De lo relativamente reciente: una transici칩n masiva de http a https y el abandono del soporte para DNS heredado. <br></li><li>  <b>Errores y bloqueos.</b>  Los desarrolladores pueden hacer frente imperfectamente a su tarea y permitir fallas.  Como resultado de esto, pueden ocurrir violaciones del sitio, comenzando con el hecho de que los botones no funcionan la primera vez, hasta que los sistemas fallan por completo. <br></li></ul><br>  <b>Caso</b> <br><br>  Nos contact칩 un cliente cuyo portal web necesitaba un mayor desarrollo.  En cierto punto, se alcanz칩 un techo de 350 mil visitantes 칰nicos cada mes.  Esto parec칤a insuficiente: el proyecto claramente ten칤a perspectivas y ten칤amos que averiguar qu칠 era lo que imped칤a ampliar a칰n m치s el recurso. <br><br>  <b>Auditoria</b> <br><br>  Result칩 que el viejo motor Bitrix no estaba adaptado a cargas y escalas.  Cada uno de los componentes del sistema se entrecruz칩 estrechamente y dependi칩 el uno del otro.  La correcci칩n constante de errores era una tarea tan insoportable que propusimos una arquitectura de microservicio flexible y comprensible.  En ellos, cada componente es lo suficientemente independiente como para que los errores en su interior no "da침en" los elementos restantes del sistema. <br><br>  Bitrix sigui칩 siendo la base de la arquitectura; al menos, la autorizaci칩n est치 vinculada a ella, pero donde fue posible y prometi칩 una gran eficiencia, transferimos la funcionalidad a los microservicios.  Se convirtieron en la piedra angular del proyecto. <br><br>  La nueva arquitectura combinada nos ha proporcionado un funcionamiento estable y m치s r치pido de los sistemas y una ausencia casi completa de errores en algunos m칩dulos.  Tambi칠n sirvi칩 de base para el trabajo efectivo de los vendedores.  Gracias a la arquitectura mejorada, los especialistas en promoci칩n lograron aumentar la asistencia del recurso en 20 veces. <br><br><img src="https://habrastorage.org/webt/7d/bt/kv/7dbtkvfsxywcnuakaw_wdu92ebs.jpeg"><br><br>  <b>Microservicios</b> <br><br>  En microservicios independientes, distinguimos m칩dulos como un cargador de archivos, b칰squeda y noticias.  Adem치s de estas cosas f치ciles de usar y obvias, se implementaron muchos otros elementos funcionales en forma de microservicios: <br><br><ul><li>  Descarga, almacenamiento y gesti칩n de datos de proyectos de c칩digo abierto; </li><li>  Creaci칩n din치mica de canales RSS; </li><li>  Creaci칩n din치mica de un sistema de bloques, disposici칩n de materiales de cualquier servicio en bloques estructurales; </li><li>  Agregar datos adicionales a los materiales de servicio; </li><li>  Servicio de soporte t칠cnico; </li><li>  Un solo cat치logo de varios datos. </li></ul><br>  Adem치s de todo lo anterior, hemos creado muchos microservicios para un trabajo conveniente con el panel de administraci칩n. <br><br><img src="https://habrastorage.org/webt/mx/7t/e-/mx7te-grrfkdfydja2xll-yjc-w.png"><br><br>  Cada bloque funcional del sitio se ha convertido en una unidad bastante aut칩noma.  Se utiliza un proceso dedicado para cargar y renderizar, minimizando la intersecci칩n con otros servicios. <br><br>  De acuerdo, cuando un usuario realiza un pago, no querr치 esperar mucho tiempo para cargar el script responsable de reproducir el video que no necesita en otra parte de la p치gina.  De hecho, esto es lo que sucede en los sistemas monol칤ticos: las funcionalidades secundarias a veces interfieren con el trabajo de componentes realmente importantes. <br><br>  Dimos el primer paso y facilitamos la vida de los usuarios y desarrolladores, lanzando m치s de 20 nuevos servicios por a침o.  Como resultado: <br><br><ul><li>  Resolvimos el problema de la escala. </li><li>  Implementado un proceso de desarrollo m치s eficiente por equipos distribuidos. </li><li>  Configure la gesti칩n din치mica de recursos para un funcionamiento r치pido y sin problemas del sistema. </li></ul><br><br>  <b>Actualizaci칩n de pila de tecnolog칤a</b> <br><br>  Paralelamente, actualizamos la pila de tecnolog칤a.  Si el portal se bas칩 originalmente en php 5.6 y MySQL 5.6, en el transcurso de la mejora del motor, lo cambiamos a php 7.0 y MySQL 5.7.  Implement칠 el marco Yii2, proporcion칠 el almacenamiento en cach칠 de memcache. <br><br><img src="https://habrastorage.org/webt/zc/zb/6b/zczb6baxnrskcroqim0i0ry1dt8.jpeg"><br><br>  <b>Cola de tareas</b> <br><br>  Para paralelizar mejor las tareas, transferimos los trabajadores web (controladores internos) a la cola RabbitMQ.  Optimiza la secuencia de eventos de activaci칩n, lo que reduce la carga en el sistema.  Trabajar con el sitio se ha vuelto mucho m치s r치pido y m치s c칩modo. <br><br>  <b>Integraci칩n continua</b> <br><br>  Un proceso de desarrollo transparente y manejable es compatible con GitLab CI.  Este es un desarrollo continuo sin interrupciones que deja a los programadores y evaluadores m치s tiempo con preguntas importantes en lugar de parchear agujeros. <br><br>  Para minimizar los errores, introdujimos bucles de desarrollo adicionales.  La cadena consta de varios bucles de prueba de aplicaciones e infraestructura: pre-lanzamiento, donde se llevan a cabo las 칰ltimas pruebas de ensamblaje (pre-prod), combate (prod), varios bucles de prueba para probar varias compilaciones a la vez, as칤 como un bucle para desarrolladores. <br><br>  <b>Sistema de montaje</b> <br><br>  En la etapa inicial, las compilaciones se crean a partir de las fuentes del proyecto.  En lugar de un conjunto dispares de clases, estilos y controladores, se utilizan entidades combinadas, cada una en el shell de un archivo ejecutable.  Solo las construcciones necesarias se colocan en el ensamblaje para realizar eventos en la p치gina.  Esto adem치s proporciona flexibilidad y velocidad del sitio. <br><br>  <b>Monitoreo de errores</b> <br><br>  GitLab CI proporciona funciones avanzadas para la validaci칩n de c칩digo y pruebas automatizadas.  A la m치s m칤nima discrepancia de ensamblajes con los par치metros dados, el sistema notifica a los desarrolladores y no permite iniciar el proceso posterior de implementaci칩n de componentes antes de corregir los errores.  Adem치s, instalamos Sentry, una herramienta completa de monitoreo de errores. <br><br><img src="https://habrastorage.org/webt/it/ut/p8/itutp8xvbdiiouv1swb1idprlxe.png"><br><br>  <b>Optimizaci칩n de procesos.</b> <br><br>  Para mantener el sistema en un estado de alto rendimiento, hemos optimizado constantemente la infraestructura y los procesos comerciales.  Las bibliotecas compartidas y los prototipos de servicios se convirtieron en la base para la r치pida implementaci칩n de nuevas funciones: tomamos plantillas preparadas y en poco tiempo obtenemos un producto que funciona. <br><br>  <b>Monitoreo y operaci칩n</b> <br><br>  Todos los procesos est치n a la vista.  Al monitorear el estado de cada nodo, proporcionamos Zabbix, un sistema de seguimiento integral.  Tuvimos la oportunidad de analizar el n칰cleo de la estructura del proyecto y verlo de manera compacta. <br><br>  Tambi칠n conectamos la plataforma Grafana, que convierte los datos secos en un tablero visual para la comodidad de los empleados del cliente. <br><br>  <b>Estabilizaci칩n y refactorizaci칩n.</b> <br><br>  Seg칰n sea necesario, reestructuramos el sistema: el c칩digo se simplifica y se vuelve conciso.  Al mismo tiempo, siempre hay espacio para crecer, ya que el dopaje regular de los sistemas acelera el sitio.  Como resultado, el recurso se ha vuelto m치s amigable para los motores de b칰squeda y los usuarios. <br><br>  <b>La nueva arquitectura es la base del crecimiento.</b> <br><br>  Al comienzo del trabajo, el recurso ten칤a un potencial modesto para la promoci칩n y no era lo suficientemente conveniente para los clientes, lo que imped칤a los procesos comerciales de la empresa.  Para mejorar el proceso de interacci칩n del usuario con el sitio, actualizamos casi por completo la arquitectura del portal y su estructura, creamos un mecanismo flexible que se integra con una gran cantidad de servicios y aplicaciones, gracias a nuestra propia API.  Muchos servicios han estado funcionando de manera 칩ptima durante m치s de un a침o, sin requerir intervenci칩n; el n칰mero de errores en su trabajo ha disminuido a casi cero. <br><br>  El nuevo sitio es una herramienta poderosa para el desarrollo de negocios, con el potencial para una mayor expansi칩n.  Utilizando la arquitectura actualizada de la aplicaci칩n web, los vendedores del proyecto pudieron implementar su gama de actividades promocionales y aumentar el tr치fico de 350 mil visitantes 칰nicos por mes a m치s de 7 millones.  Adem치s, despu칠s de un aumento m칰ltiple en la audiencia, el portal contin칰a funcionando de manera estable. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/449538/">https://habr.com/ru/post/449538/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449526/index.html">Presentamos Tartiflette: una implementaci칩n de c칩digo abierto de GraphQL para Python 3.6+</a></li>
<li><a href="../449528/index.html">En la descomposici칩n de la respuesta multicanal de un sistema en modos de vibraci칩n "pseudo-patentados"</a></li>
<li><a href="../449532/index.html">ok.tech: encuentro de Cassandra</a></li>
<li><a href="../449534/index.html">Concept car SLA: como se hace en China</a></li>
<li><a href="../449536/index.html">iOS Digest No. 4 (5 de abril - 26 de abril)</a></li>
<li><a href="../449540/index.html">Efecto de sombreado de Doodle</a></li>
<li><a href="../449542/index.html">Medicine se traslada a la web, salas de chat y aplicaciones m칩viles. Conversaci칩n con BestDoctor</a></li>
<li><a href="../449544/index.html">El mundo moderno se basa en API</a></li>
<li><a href="../449546/index.html">V8: un a침o con Specter</a></li>
<li><a href="../449548/index.html">Centro de datos espaciales. Informe de video desde el lanzamiento</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>