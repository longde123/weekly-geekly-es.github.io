<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§öüèø üàöÔ∏è üë©üèª‚Äçü§ù‚Äçüë®üèΩ Azure-Suche üôéüèª ü•û üßíüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Wenn eines Ihrer Projekte die in der Azhurov-Datenbank gespeicherten Daten verwendet, haben Sie m√∂glicherweise die M√∂glichkeit, die Datensuche mithilf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Azure-Suche</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/454820/"><p><img src="https://habrastorage.org/webt/dd/li/cx/ddlicxgiqvi5vlyllvf2hgklivs.jpeg"></p><br><p>  Wenn eines Ihrer Projekte die in der Azhurov-Datenbank gespeicherten Daten verwendet, haben Sie m√∂glicherweise die M√∂glichkeit, die Datensuche mithilfe der Azure-Suche zu verwenden.  Sie k√∂nnen nicht nur nach Datenbanken (Azure Cosmos DB, Azure SQL-Datenbank, in einer Azure-VM gehosteter SQL Server), sondern auch nach Blob (Azure Blob-Speicher, Azure-Tabellenspeicher) suchen. </p><br><p>  Search hat einen kostenlosen Tarif, mit dem Sie bis zu drei Indizes mit einer Gesamtgr√∂√üe von bis zu 50 MB erstellen k√∂nnen.  Der kostenlose Tarif verf√ºgt nicht √ºber Lastausgleichsfunktionen, ist jedoch f√ºr die Verwendung gut geeignet. </p><a name="habracut"></a><br><p> Der Umgang mit der Suche erschien mir ziemlich einfach (obwohl dies nicht immer offensichtlich ist).  Es gibt drei Arten von Objekten: Datenquelle, Index und Indexer.  Das Hauptobjekt ist vielleicht der Index.  Er ist daf√ºr verantwortlich, wie man sucht und wonach man genau sucht.  Die Datenquelle ist eine Datenverbindung, und der Indexer ist ein Job, der Indexdaten aktualisiert. </p><br><p>  √úber die Portal-Benutzeroberfl√§che k√∂nnen Sie Daten importieren und alle drei Objekte erstellen.  Gelegenheit wird im Vorbeigehen sein und der Suche kognitive F√§higkeiten hinzuf√ºgen.  Wenn sich die SQL-Datenbank im Abonnement befindet, k√∂nnen Sie sie beim Erstellen der Datenquelle ausw√§hlen.  Obwohl das Passwort aus irgendeinem Grund, m√ºssen Sie noch eingeben.  Wenn Sie Cosmos DB verwenden m√∂chten, m√ºssen Sie die Verbindungszeichenfolge manuell eingeben.  Vergessen Sie nicht, in der Zeile und in der Datenbank anzugeben und am Ende der Zeile Database = YOUR_BASE_NAME hinzuzuf√ºgen </p><br><p>  Nach Auswahl einer Datenquelle werden Sie aufgefordert, die kognitiven Suchfunktionen zu verwenden.  Die Standardf√§higkeiten sind noch recht klein: Sie k√∂nnen die Sprache definieren, Namen, Namen von Organisationen, Orte und Schl√ºsselphrasen extrahieren.  Es gibt auch eine interessante M√∂glichkeit, die Art des Textes f√ºr positive oder negative Emotionen mithilfe der Stimmungserkennung zu bestimmen.  Diese F√§higkeit sollte f√ºr Produktbewertungen in Online-Shops geeignet sein.  Mithilfe der API-Beschreibung k√∂nnen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ihre eigenen F√§higkeiten erstellen</a> . </p><br><p><img src="https://habrastorage.org/webt/r6/wh/4x/r6wh4xtuxatvapppu0wxw2lh67k.png"></p><br><p>  F√ºr Dateien, die auf blob hochgeladen wurden, ist OCR (Optical Character Recognition) m√∂glich.  Die Erkennung von handschriftlichem (bisher nur englischem) und gedrucktem Text ist m√∂glich.  Mit kognitiven Diensten k√∂nnen verschiedene Objekte auf dem Foto identifiziert werden.  Zum Beispiel ber√ºhmte Orte oder Prominente. </p><br><p>  Der n√§chste Schritt ist das Erstellen eines Index.  Die einzige Option f√ºr den <strong>Suchmodus an</strong> diesem Tag ist "analyseInfixMatching". </p><br><p><img src="https://habrastorage.org/webt/aq/qg/6l/aqqg6ln6ptkzoqgpnizcp2cuezu.png"></p><br><p>  Zu diesem Zeitpunkt k√∂nnen Sie die Kontrollk√§stchen neben den Feldern in Ihrer Tabelle aktivieren oder dem Index ein neues Feld hinzuf√ºgen.  F√ºr alle F√§lle werde ich die M√∂glichkeiten der Felder erl√§utern: </p><br><p>  <strong>Abrufbar</strong> - Das Feld wird in den Suchergebnissen angezeigt <br>  <strong>Filterbar</strong> - Der Feldwert kann gefiltert werden <br>  <strong>Sortierbar</strong> - Sie k√∂nnen das Ergebnis nach diesem Feld sortieren <br>  <strong>Facetable</strong> - eine Art Gruppierung nach bestimmten Merkmalen.  Wenn Sie beispielsweise den folgenden Ausdruck facet = listPrice mit den Werten 10 | 25 | 100 | 500 | 1000 | 2500 verwenden, k√∂nnen Sie die folgenden Ergebnisse in Gruppen aufteilen </p><br><p><img src="https://habrastorage.org/webt/pp/8d/wn/pp8dwnctx7vgllop2h-hsmboqqu.png"></p><br><p>  <strong>Durchsuchbar</strong> - In diesem Feld wird gesucht </p><br><p>  Das Feld Analysator schl√§gt vor, einen Analysator f√ºr verschiedene Sprachen auszuw√§hlen.  Es werden 2 Versionen verwendet - <em>Lucene</em> und <em>Microsoft</em> .  Um zu verstehen, was der Unterschied ist, m√ºssen Sie verstehen, was der Unterschied zwischen den beiden folgenden Begriffen ist: </p><br><p>  <em>Stamming</em> ist der Prozess, bei dem die Basis eines Wortes f√ºr ein bestimmtes <em>Quellwort gefunden</em> wird.  Stamm (Englisch) - Stamm, Stamm, Herkunft.  Stemming verwendet Algorithmen.  Schneidet W√∂rter h√§ufig ab, indem Suffixe und Endungen entfernt werden, um die Grundlage des Wortes zu erhalten. <br>  <em>Lemmatisierung</em> ist der Prozess des Reduzierens einer Wortform auf ein Lemma - ihre normale (Vokabular-) Form.  Das Lemma ist die kanonische Grundform des Wortes.  Die Lemmatisierung verwendet eine W√∂rterbuchsuche, die verschiedene Formen von W√∂rtern enth√§lt. </p><br><p>  Der Lucene-Analysator verwendet Stemming.  Microsoft Analyzer verwendet Lemmatisierung. <br>  Wenn nichts ausgew√§hlt ist, wird standardm√§√üig Lucene verwendet.  Wenn Sie jedoch nach Daten in einer bestimmten Sprache suchen, ist es zweifellos besser, einen Analysator f√ºr diese Sprache zu verwenden. </p><br><p>  <strong>Vorschlag</strong> - Mit dieser <strong>Option</strong> k√∂nnen Sie anhand der Anfangsbuchstaben der Suche Hinweise zu Dokumenten geben, die den eingegebenen Text enthalten. </p><br><p>  Wenn Sie den Probester in Azure Search in der Clientanwendung verwenden, haben Sie zwei M√∂glichkeiten, ihn zu verwenden: den <em>Counsester</em> selbst oder die <em>automatische Vervollst√§ndigung</em> .  Kurz gesagt, die Eingabeaufforderung schl√§gt die gesamte Zeile aus dem Tabellenfeld vollst√§ndig vor, und die automatische Vervollst√§ndigung bietet nur die M√∂glichkeit, ein Wort oder einen Ausdruck aus mehreren W√∂rtern zu vervollst√§ndigen.  Der beste Artikel √ºber die Unterschiede zwischen dem Eingabeaufforderungs- und dem Autocomplete-Modus wird im folgenden Artikel beschrieben: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Autocomplete in Azure Search jetzt in der √∂ffentlichen Vorschau</a> Dieser Artikel enth√§lt sehr visuelle Gifs. </p><br><p>  In der Phase der Erstellung des <strong>Indexers m√ºssen</strong> Sie eine <em>Spalte mit hohem Wasserzeichen</em> angeben.  Dies ist ein Feld, das sich jedes Mal √§ndert, wenn ein Datensatz ge√§ndert wird.  Normalerweise ist dies so etwas wie ein Feld mit dem Datum der letzten √Ñnderung oder ein _ts-Feld in Cosmos DB.  Wenn w√§hrend der Indizierung der Feldwert ge√§ndert wird, √§ndert sich auch der Index. </p><br><p><img src="https://habrastorage.org/webt/sb/-v/-y/sb-v-yttwlbx9lebmpzm5__wyjc.png"></p><br><p>  <strong>L√∂schungen verfolgen</strong> ist eine Option, um Eintr√§ge automatisch aus dem Index zu l√∂schen.  Dazu muss jedoch Soft Delete in Ihrer Datenbank konfiguriert sein.  Wenn Sie Soft Delete verwenden, wird ein Datensatz beim L√∂schen nicht gel√∂scht, sondern einfach als gel√∂scht markiert.  Die Standardoption besteht darin, das Feld isDeleted zur Datenbank hinzuzuf√ºgen und auf true zu setzen, wenn der Datensatz gel√∂scht wird. <br>  Alternativ k√∂nnen Sie jedes Mal, wenn Sie einen Eintrag aus der Datenbank l√∂schen, eine L√∂schanforderung aus der Suche an die Azure Search-API senden.  In diesem Fall kann das Kontrollk√§stchen Trak-L√∂schungen weggelassen werden.  Diese Option gef√§llt mir jedoch nicht wirklich, da der Datensatz im Index verbleibt, wenn die L√∂schanforderung nicht funktioniert.  F√ºr mich gibt es nicht gen√ºgend M√∂glichkeiten, den Index einmal in einem bestimmten Zeitraum vollst√§ndig neu zu erstellen. </p><br><p>  Trotz aller Bequemlichkeit des Portals k√∂nnen Sie nach dem Erstellen einige neue Felder zum Index hinzuf√ºgen, die vorhandenen jedoch nicht √§ndern.  Was tun, wenn Sie etwas √§ndern m√ºssen?  Sie k√∂nnen den Index neu erstellen.  L√∂schen Sie die vorhandene und erstellen Sie eine neue mit den erforderlichen √Ñnderungen.  Das Portal zu benutzen, um dies zu tun, ist eine ziemlich trostlose Aufgabe.  Ich benutze die API f√ºr diese Zwecke.  Mit einer Anwendung wie Postman k√∂nnen Sie den Index JSON abrufen und damit eine Anforderung zur Indexerstellung schreiben.  Es m√ºssen nur kleine √Ñnderungen vorgenommen werden (entfernen Sie beispielsweise die Systemfelder "@ odata.context" und "@ odata.etag"). </p><br><p>  Um mit der API arbeiten zu k√∂nnen, m√ºssen Sie den Schl√ºssel aus dem Portal entnehmen, der dem Header jeder API-Anforderung hinzugef√ºgt werden muss.  Der Schl√ºssel wird hier genommen: </p><br><p><img src="https://habrastorage.org/webt/gb/4q/do/gb4qdotcdf2hz3d_busivo1tal4.png"></p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Eine Abfrage zum Abrufen von Indexdaten</a> lautet: </p><br><pre><code class="plaintext hljs">GET https://[service name].search.windows.net/indexes/[index name]?api-version=[api-version]</code> </pre> <br><p>  <code>api-key: [admin key]</code> muss zum Header hinzugef√ºgt werden <code>api-key: [admin key]</code> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Das Erstellen eines Index ist</a> mit einer der folgenden beiden Abfragen m√∂glich: </p><br><pre> <code class="plaintext hljs">POST https://[servicename].search.windows.net/indexes?api-version=[api-version] Content-Type: application/json api-key: [admin key]</code> </pre> <br><p>  oder </p><br><pre> <code class="plaintext hljs">PUT https://[servicename].search.windows.net/indexes/[index name]?api-version=[api-version]</code> </pre> <br><p>  In body m√ºssen Sie JSON mit dem Inhalt des Index angeben.  Die aktuellste Version ist im Moment 2019-05-06 und bevor sie f√ºr eine lange Zeit 2017-11-11 verwendet wurde </p><br><p>  Wenn Sie die API verwenden, k√∂nnen Sie einige Suchfunktionen verwenden, die im Portal nicht verf√ºgbar sind. </p><br><p>  Um einigen Feldern bei der Suche Priorit√§t einzur√§umen, k√∂nnen Sie <strong>Bewertungsprofile verwenden</strong> . </p><br><p>  Der folgende JSON, der der Anforderung hinzugef√ºgt wurde, bietet dem Feld "Titel" einen doppelten Vorteil gegen√ºber dem Feld "Info": </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"scoringProfiles"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"profileForTitle"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"document"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"weights"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, ‚Äúinfo<span class="hljs-attr"><span class="hljs-attr">": 1 } } ]</span></span></code> </pre> <br><p>  Zus√§tzlich zur M√∂glichkeit, einigen Feldern mithilfe von Gewichten Priorit√§t einzur√§umen, k√∂nnen einige vordefinierte Funktionen verwendet werden: Frische, Gr√∂√üe, Abstand und Tag. </p><br><p>  <strong>Frische wird</strong> nur mit DateTime-Feldern verwendet und erm√∂glicht es Ihnen, die neuesten Datens√§tze in der Suche aufzurufen.  <strong>Die Gr√∂√üe wird</strong> mit int- und double-Feldern verwendet.  Gut und dementsprechend ist diese Funktion gut f√ºr Felder geeignet, in denen Preise, die Anzahl der Downloads und andere numerische Informationen gespeichert sind.  <strong>Die Entfernung wird</strong> nur bei Feldern wie Edm.GeographyPoint verwendet und bei einer Suche nach Entfernung von einem bestimmten Ort erh√∂ht.  Wenn <strong>Tag</strong> als Funktionstyp angegeben ist, werden Dokumente mit Tags, die in der Suchzeichenfolge angezeigt werden, bei der Suche ausgel√∂st. </p><br><p>  Eine der beliebtesten Optionen ist das Abrufen der neuesten Dokumente bei einer Suche wie dieser: </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"scoringProfiles"</span></span>: [{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"newDocs"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"functions"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"freshness"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"fieldName"</span></span>: <span class="hljs-string"><span class="hljs-string">"documentDate"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"boost"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-attr"><span class="hljs-attr">"interpolation"</span></span>: <span class="hljs-string"><span class="hljs-string">"quadratic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"freshness"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"boostingDuration"</span></span>: <span class="hljs-string"><span class="hljs-string">"P7D"</span></span> } } ] } ]</code> </pre> <br><p>  Dokumente, deren documentDate-Feld das Datum der letzten sieben Tage enth√§lt ("P7D"), werden aufgerufen. </p><br><p>  Nachdem Sie ein Bewertungsprofil erstellt haben, k√∂nnen Sie dessen Namen in Anforderungen angeben.  Nur in diesem Fall werden die erforderlichen Felder bei der Suche angezeigt. </p><br><p>  Weitere Informationen finden Sie in der offiziellen Dokumentation: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hinzuf√ºgen von Bewertungsprofilen zu einem Azure Search-Index</a> </p><br><h3 id="data-change-detection-policy">  Richtlinie zur Erkennung von Daten√§nderungen </h3><br><p>  Die API bietet etwas mehr Funktionen f√ºr die Datenquelle.  Wie Sie oben lesen k√∂nnen, k√∂nnen Sie beim Erstellen einer Datenquelle ein Feld angeben, anhand dessen festgestellt werden kann, ob sich die Daten ge√§ndert haben.  In Form von JSON sieht es so aus: </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"dataChangeDetectionPolicy"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"@odata.type"</span></span> : <span class="hljs-string"><span class="hljs-string">"#Microsoft.Azure.Search.HighWaterMarkChangeDetectionPolicy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"highWaterMarkColumnName"</span></span> : <span class="hljs-string"><span class="hljs-string">"[a rowversion or last_updated column name]"</span></span> }        soft delete     policy: <span class="hljs-string"><span class="hljs-string">"dataDeletionDetectionPolicy"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"@odata.type"</span></span> : <span class="hljs-string"><span class="hljs-string">"#Microsoft.Azure.Search.SoftDeleteColumnDeletionDetectionPolicy"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"softDeleteColumnName"</span></span> : <span class="hljs-string"><span class="hljs-string">"IsDeleted"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"softDeleteMarkerValue"</span></span> : <span class="hljs-string"><span class="hljs-string">"true"</span></span> }</code> </pre> <br><p>  Wenn Sie SQL Server verwenden und Ihre Datenbank die √Ñnderungsverfolgung unterst√ºtzt, k√∂nnen gel√∂schte Datens√§tze automatisch aus dem Index gel√∂scht werden.  Die Angabe von highWaterMarkColumnName ist in diesem Fall nicht erforderlich.  Es reicht aus, SqlIntegratedChangeTrackingPolicy anstelle von HighWaterMarkChangeDetectionPolicy anzugeben </p><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"dataChangeDetectionPolicy"</span></span> : { <span class="hljs-attr"><span class="hljs-attr">"@odata.type"</span></span> : <span class="hljs-string"><span class="hljs-string">"#Microsoft.Azure.Search.SqlIntegratedChangeTrackingPolicy"</span></span> }</code> </pre> <br><p>  Es ist sehr bequem.  Es gibt jedoch Nuancen, die es nicht erm√∂glichen, diese Funktion vollst√§ndig zu nutzen. </p><br><p>  Erstens kann SqlIntegratedChangeTrackingPolicy nicht mit Ansichten verwendet werden.  Zweitens sollte die Tabelle keine zusammengesetzten Prim√§rschl√ºssel enthalten.  Es versteht sich von selbst, dass die Version von SQL Server mehr oder weniger neu sein muss.  Schlie√ülich muss die √Ñnderungsverfolgung f√ºr die Datenbank und die Tabellen aktiviert sein, die von der Suche verwendet werden.  F√ºr die Datenbank wird sie folgenderma√üen aktiviert: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> AdventureWorks2012 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> CHANGE_TRACKING = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span> (CHANGE_RETENTION = <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DAYS</span></span>, AUTO_CLEANUP = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>)</code> </pre> <br><p>  Und f√ºr den Tisch so: </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">TABLE</span></span> Person.Contact <span class="hljs-keyword"><span class="hljs-keyword">ENABLE</span></span> CHANGE_TRACKING <span class="hljs-keyword"><span class="hljs-keyword">WITH</span></span> (TRACK_COLUMNS_UPDATED = <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>)</code> </pre> <br><p>  Das ist aber noch nicht alles.  Es wird dringend empfohlen, die Snapshot-Isolation f√ºr die Basis zu aktivieren. </p><br><pre> <code class="sql hljs"><span class="hljs-keyword"><span class="hljs-keyword">ALTER</span></span> <span class="hljs-keyword"><span class="hljs-keyword">DATABASE</span></span> AdventureWorks2012 <span class="hljs-keyword"><span class="hljs-keyword">SET</span></span> ALLOW_SNAPSHOT_ISOLATION <span class="hljs-keyword"><span class="hljs-keyword">ON</span></span>;</code> </pre> <br><p>  Neben dem Tanzen mit einem Tamburin bei der Installation von Change Traking f√ºr die Datenbank ist f√ºr mich der Nachteil die Unf√§higkeit, Ansichten zu verwenden.  Daher muss ich normalerweise immer noch HighWaterMarkChangeDetectionPolicy verwenden </p><br><h3 id="poisk-po-dannym">  Datensuche </h3><br><p>  Standardm√§√üig verwendet die Azure-Suche eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einfache Abfragesyntax</a> .  Es mag nicht √ºberraschend erscheinen, aber es ist ganz einfach: </p><br><p>  <strong>wifi + luxus</strong> sucht gleichzeitig nach den W√∂rtern wifi und luxus <br>  <strong>"Luxushotel"</strong> sucht nach dem Satz <br>  <strong>wifi |</strong>  <strong>Luxus</strong> sucht entweder nach dem Wort WLAN oder nach dem Wort Luxus <br>  <strong>wifi ‚Äìluxury</strong> sucht nach Texten mit dem Wort wifi, aber ohne das Wort <strong>luxus</strong> <br>  <strong>lux</strong> sucht nach W√∂rtern, die mit lux beginnen </p><br><p>  Es ist m√∂glich, Suchregeln in Klammern zu kombinieren.  Beispielsweise sucht die <strong>Motel +</strong> -Regel <strong>(WLAN | Luxus)</strong> nach dem Wort Motel und entweder nach dem Wort WLAN oder nach dem Wort Luxus </p><br><p>  Es ist sch√∂n, dass Azure Search die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Lucene-</a> Syntax verwenden kann.  Um es verwenden zu k√∂nnen, muss der <strong>Suchabfrage queryType = full hinzugef√ºgt werden</strong> </p><br><p>  Der Unterschied zwischen der Azure- und der klassischen Lucene-Syntax besteht nur in fehlender Reichweite. </p><br><p>  In Azure Search k√∂nnen Sie also nicht: <code>mod_date:[20020101 TO 20030101]</code> </p><br><p>  In Azure Search k√∂nnen Sie jedoch $ filter mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ODATA-</a> Syntax verwenden.  Hier ist ein Beispielfilter: </p><br><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Scott"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"filter"</span></span>: <span class="hljs-string"><span class="hljs-string">"(age ge 25 and and lt 50) or surname eq 'Guthrie'"</span></span> }</code> </pre> <br><p>  Filter k√∂nnen auch mit einfacher Abfragesyntax verwendet werden. </p><br><p>  In Lucene wird die Logik ‚Äûoder‚Äú mit <strong>ODER</strong> oder <strong>||</strong> implementiert <br>  Beide Werte k√∂nnen durch Angabe der Anweisung "und" mit: <strong>AND</strong> , <strong>&amp;&amp;</strong> oder <strong>+ ermittelt werden</strong> <br>  F√ºr "nicht" k√∂nnen Sie eine der folgenden <strong>Optionen verwenden</strong> : <strong>NICHT!</strong>  oder <strong>-</strong> </p><br><p>  Die Anweisung "nicht" hat eine gemeinsame Funktion sowohl f√ºr die einfache Syntax als auch f√ºr Lucene.  Das Verhalten h√§ngt vom Suchmodus ab, der sowohl in <strong>searchMode = all</strong> als auch in <strong>searchMode = any festgelegt werden kann</strong> (dieser Wert wird standardm√§√üig verwendet).  In jedem Modus werden bei der Suche nach WLAN-Luxus Dokumente mit dem Wort WLAN oder Dokumente ohne das Wort Luxus gefunden.  Im All-Modus werden auf dieselbe Anfrage Docks mit dem Wort WLAN und gleichzeitig ohne das Wort Luxus gefunden. </p><br><p>  Schauen wir uns einige interessante Lucene-Funktionen an. </p><br><p>  <strong>Mit der Fuzzy-Suche</strong> k√∂nnen Sie nach W√∂rtern suchen, die sich durch einen oder mehrere Buchstaben von der Suche unterscheiden.  Das hei√üt, es hilft, mit Tippfehlern umzugehen.  Wenn Sie beispielsweise nach "blau ~" oder "blau ~ 1" suchen, erhalten Sie "blau" und "blau" und sogar "Kleber".  Gleichzeitig bedeutet eine Suche nach "Business ~ Analyst" Business oder Analyst <br>  <strong>In der N√§he</strong> k√∂nnen Sie nach W√∂rtern suchen, die sich in der N√§he befinden.  Zum Beispiel findet "Hotelflughafen" ~ 5 die W√∂rter "Hotel" und "Flughafen", die sich im Text nicht weiter als 5 W√∂rter voneinander befinden. <br>  <strong>Mit Term Boosting</strong> k√∂nnen <strong>Sie</strong> die Priorit√§t eines Wortes in der Suche festlegen.  Beispiel: "rock ^ 2 electronic" sucht nach den W√∂rtern rock und electronic, aber Eintr√§ge mit dem Wort rock in der Suche werden oben angezeigt. <br>  <strong>Regul√§re Ausdr√ºcke</strong> - mit regul√§ren Ausdr√ºcken.  Alles hier entspricht der offiziellen Lucene Regex-Dokumentation.  Sie finden sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unter folgendem Link</a> .  Bei der Suche m√ºssen regul√§re Ausdr√ºcke zwischen Schr√§gstrichen "/" stehen.  Zum Beispiel wie folgt: / [mh] otel / </p><br><p>  Wenn Ihre Suchzeichenfolge Sonderzeichen enth√§lt, m√ºssen diese mit einem Backslash versehen werden.  Beispielzeichen, die maskiert werden sollen: <strong>+ - &amp;&amp; ||!</strong>  <strong>() {} [] ^ "~ *?: \ /</strong> <br>  Die Suche kann mithilfe einer GET-Anforderung erfolgen.  Das offizielle Beispiel lautet: </p><br><pre> <code class="plaintext hljs">GET /indexes/hotels/docs?search=category:budget AND \"recently renovated\"^3&amp;searchMode=all&amp;api-version=2019-05-06&amp;querytype=full</code> </pre> <br><p>  Sie k√∂nnen jedoch eine POST-Anforderung mit body verwenden.  Wieder ein offizielles Beispiel: </p><br><pre> <code class="plaintext hljs">POST /indexes/hotels/docs/search?api-version=2019-05-06 { "search": "category:budget AND \"recently renovated\"^3", "queryType": "full", "searchMode": "all" }</code> </pre> <br><p>  Wenn Sie eine GET-Anforderung oder einen POST mit dem Datentyp application / x-www-form-urlencoded verwenden, m√ºssen Sie unsichere und reservierte Zeichen codieren. </p><br><p>  Symbole  <strong>/ ?: @ = &amp;</strong> sind reserviert <br>  Die Zeichen <strong>`` &lt;&gt; #% {} | \ ^ ~ []</strong> sind unsicher. <br>  Zum Beispiel wird das Symbol # zu% 23 und das Symbol?  wird% 3F </p><br><h3 id="para-ssylok-dlya-razrabotchikov">  Ein paar Links f√ºr Entwickler. </h3><br><p>  Wenn .NET ein Entwickler ist, k√∂nnen Sie das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Microsoft.Azure.Search</a> NuGet-Paket verwenden <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.</a> Dar√ºber hinaus gibt es Beispiele in <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">NodeJS</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java</a> . </p><br><p>  Ein Beispiel f√ºr eine einfache Anwendung in .NET Core finden Sie hier. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ASP.NET Core Azure-Suchbeispiel</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de454820/">https://habr.com/ru/post/de454820/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de454806/index.html">Schulung Cisco 200-125 CCNA v3.0. Tag 9. Die physische Welt der Schalter. Teil 1</a></li>
<li><a href="../de454808/index.html">√úber Raumfahrzeuge und Weltraum. So erstellen Sie eine Funktion, indem Sie das gesamte Produkt auf dem Weg √§ndern</a></li>
<li><a href="../de454810/index.html">Frische Luft auf dem Mars: Biegen Sie ein CO2-Molek√ºl und holen Sie sich Sauerstoff</a></li>
<li><a href="../de454816/index.html">Konfigurieren des PHP-Fpm + Nginx-Bundles unter WSL</a></li>
<li><a href="../de454818/index.html">Rekko Challenge - wie man den 2. Platz im Wettbewerb um die Schaffung von Empfehlungssystemen belegt</a></li>
<li><a href="../de454824/index.html">Der einfachste Operationsverst√§rker f√ºr diskrete Elemente</a></li>
<li><a href="../de454826/index.html">Reduzieren Sie Backups mit Hashget um 99,5%</a></li>
<li><a href="../de454828/index.html">Erstellen eines Mosaikbildes</a></li>
<li><a href="../de454830/index.html">3 Schl√ºsselqualit√§ten f√ºr einen erfolgreichen Produktmanager: Alexander Belyaev</a></li>
<li><a href="../de454832/index.html">Warum eine viert√§gige Arbeitswoche eine schlechte Geschichte ist</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>