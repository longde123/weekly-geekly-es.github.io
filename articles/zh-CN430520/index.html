<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘ˆğŸ¼ ğŸŒ² â›¹ï¸ å¼•å…¥Spring Data MongoDB ğŸ‘ğŸ» ğŸ‘©ğŸ¾â€ğŸ“ ğŸ¦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç¥å¤§å®¶æœ‰ç¾å¥½çš„ä¸€å¤©ï¼ 

 å…¨æ–°çš„â€œ Springæ¡†æ¶å¼€å‘äººå‘˜â€æµçªç„¶â€œå¼€å§‹â€äº†ï¼Œè¿™é—¨è¯¾ç¨‹åœ¨æ–°å­¦å‘˜å’Œé‚£äº›å·²ç»ä»â€œå¸¸è§„â€ Javaå’Œä¼ä¸šé‚£é‡Œå­¦åˆ°çš„çŸ¥è¯†çš„å­¦å‘˜ä¸­éƒ½éå¸¸å—æ¬¢è¿ã€‚ å› æ­¤ï¼Œå¦‚æœæœ‰è¶£çš„è¯ï¼Œé‚£å°±æ¥æˆ‘ä»¬è¿™é‡Œå…¬å¼€è¯¾ ï¼Œå½“ç„¶ï¼Œå¹¶åˆ†äº«æœ‰å…³è¯¥ä¸»é¢˜çš„æœ‰è¶£ææ–™ã€‚ 

 Spring Data MongoDBæ•™ç¨‹...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>å¼•å…¥Spring Data MongoDB</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/430520/"> ç¥å¤§å®¶æœ‰ç¾å¥½çš„ä¸€å¤©ï¼ <br><br> å…¨æ–°çš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œ Springæ¡†æ¶å¼€å‘äººå‘˜â€</a>æµçªç„¶<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œ</a>å¼€å§‹â€äº†ï¼Œè¿™é—¨è¯¾ç¨‹åœ¨æ–°å­¦å‘˜å’Œé‚£äº›å·²ç»ä»â€œå¸¸è§„â€ Javaå’Œä¼ä¸šé‚£é‡Œå­¦åˆ°çš„çŸ¥è¯†çš„å­¦å‘˜ä¸­éƒ½éå¸¸å—æ¬¢è¿ã€‚ å› æ­¤ï¼Œå¦‚æœæœ‰è¶£çš„è¯ï¼Œé‚£å°±æ¥æˆ‘ä»¬è¿™é‡Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…¬å¼€è¯¾</a> ï¼Œå½“ç„¶ï¼Œå¹¶åˆ†äº«æœ‰å…³è¯¥ä¸»é¢˜çš„æœ‰è¶£ææ–™ã€‚ <br><br>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Spring Data MongoDBæ•™ç¨‹</a>ç¿»è¯‘</i> <i><br></i>  <i>å‘è¡¨è€…Anand Kumar</i> <br><br> èµ°å§ <br><br> åœ¨å½“ä»Šä¸–ç•Œï¼Œå°½å¿«åˆ›å»ºå’Œè¿è¡Œåº”ç”¨ç¨‹åºéå¸¸é‡è¦ã€‚ åŒæ ·ï¼Œè¯¥åº”ç”¨ç¨‹åºåº”æ˜“äºå¼€å‘å’Œç»´æŠ¤ã€‚ <br><br>  Springå°±æ˜¯è¿™æ ·ä¸€ç§æ¡†æ¶ï¼Œå®ƒæä¾›äº†ä¸è®¸å¤šå…¶ä»–ä¸åŒæ¡†æ¶çš„è½»æ¾é›†æˆï¼Œä»è€Œç®€åŒ–äº†ä½¿ç”¨Springçš„åº”ç”¨ç¨‹åºå¼€å‘ã€‚ è¿™æ ·çš„é›†æˆä¹‹ä¸€å°±æ˜¯Springä¸MongoDBçš„é›†æˆã€‚ <br><br><img src="https://habrastorage.org/webt/nb/mx/ey/nbmxeyxhok6yyrwovmk9vfkqgv4.png"><br><br>  <b>1.ç®€ä»‹</b> <a name="habracut"></a><br><br> åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºæœ€è‘—åçš„Spring javaæ¡†æ¶å’Œæœ€è‘—åçš„NoSQLæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼ˆDBMSï¼‰MongoDBçš„ç»„åˆã€‚  MongoDBæ˜¯é¢å‘æ–‡æ¡£çš„NoSQL DBMSï¼Œå®ƒä»¥ç±»ä¼¼JSONçš„æ ¼å¼å­˜å‚¨æ•°æ®ã€‚ <br>  Springæä¾›äº†Spring Dataå’ŒMongoDBçš„é›†æˆï¼Œä»¥ä¿ƒè¿›ä¸¤è€…ä¹‹é—´çš„äº¤äº’ä»¥åŠå¼€å‘äººå‘˜çš„ä¾¿åˆ©ï¼Œä»è€Œæ¶ˆé™¤äº†ä¸ºæ’å…¥ï¼Œæ›´æ–°å’Œåˆ é™¤ç¼–å†™è®¸å¤šæŸ¥è¯¢çš„éœ€è¦ã€‚ <br><br> ä»¥ä¸‹æ˜¯Spring Data MongoDBé¡¹ç›®æä¾›çš„ä¸€äº›åŠŸèƒ½ï¼š <br><br><ol><li>  Spring Dataå…è®¸æ‚¨åŒæ—¶ä½¿ç”¨@Configurationç±»å’ŒXMLé…ç½®ã€‚ </li><li> æ•°æ®è®¿é—®Springå¼‚å¸¸å±‚æ¬¡ç»“æ„ç”¨äºè½¬æ¢å¼‚å¸¸ã€‚ </li><li>  Java POJOå’ŒMongoDBæ–‡æ¡£ä¹‹é—´çš„é›†æˆæ˜ å°„ã€‚ </li><li>  MongoTemplateç±»ï¼Œå®ƒç®€åŒ–äº†å¸¸è§MongoDBæ“ä½œçš„ä½¿ç”¨ã€‚ </li><li> é™¤äº†MongoTemplateï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨MongoReaderå’ŒMongoWriterç±»è¿›è¡Œä½çº§æ¸²æŸ“ã€‚ </li></ol><br> ç†è§£ä»»ä½•æŠ€æœ¯çš„æœ€ä½³æ–¹æ³•æ˜¯åœ¨å®è·µä¸­ä½¿ç”¨å®ƒï¼Œè€Œè¿™æ­£æ˜¯æˆ‘ä»¬ç°åœ¨è¦åšçš„ã€‚ <br><br> è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç®€å•çš„ç¨‹åºæ¥äº†è§£æœ‰å…³Spring Data MongoDBçš„æ›´å¤šä¿¡æ¯ã€‚ <br><br>  <b>2.æŠ€æœ¯å’Œå·¥å…·</b> <br><br> è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹å°†ç”¨äºåˆ›å»ºç¨‹åºçš„æŠ€æœ¯å’Œå·¥å…·ã€‚ <br><br><ol><li>  Eclispe Oxygen.2é‡Šæ”¾ï¼ˆ4.7.2ï¼‰ </li><li>  Java-ç‰ˆæœ¬9.0.4 </li><li> æ‘‡ç¯®-4.6 </li><li>  MongoDBæœåŠ¡å™¨-3.6 </li><li>  MongoCompass-3.6 </li><li>  SpringDataMongoDB-2.0.5-å‘å¸ƒ </li></ol><br>  <b>3.é¡¹ç›®ç»“æ„</b> <br><br> æˆ‘ä»¬é¡¹ç›®çš„ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ <br><br><img src="https://habrastorage.org/webt/ot/f3/_j/otf3_jvoeuqufrnqzfoh4tz3qms.jpeg"><br>  <i>Spring Data MongoDBçš„é¡¹ç›®ç»“æ„</i> <br><br>  gradleé¡¹ç›®å°†å…·æœ‰ä¸Šé¢æ˜¾ç¤ºçš„ç»“æ„ã€‚ å¯¹äºpom.xmlï¼Œé¡¹ç›®çš„ç»“æ„å°†ç•¥æœ‰ä¸åŒã€‚ <br><br>  <b>4.ç¨‹åº</b> <br><br> ä½œä¸ºè¯¥è®¡åˆ’çš„ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†å°è¯•å®Œæˆä»¥ä¸‹ä»»åŠ¡ã€‚ <br><br><ol><li> åœ¨MongoDBä¸­ä¿å­˜å¯¹è±¡ </li><li> åœ¨MongoDBä¸­æ›´æ–°å¯¹è±¡ </li><li> ä»MongoDBä¸­åˆ é™¤å¯¹è±¡ </li><li> ä»MongoDBæ£€ç´¢æ‰€æœ‰å¯¹è±¡ </li></ol><br> ç°åœ¨è®©æˆ‘ä»¬åˆ†æç¨‹åºçš„æ‰€æœ‰ç»„ä»¶ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å°†ä»ç¨‹åºæ‰€éœ€çš„ä¾èµ–é¡¹å’Œjaræ–‡ä»¶å¼€å§‹ã€‚ <br><br>  <b>4.1 gradle</b> <br><br> æˆ‘ä»¬ä½¿ç”¨Gradleä½œä¸ºè¯¥ç¨‹åºçš„ä¸€éƒ¨åˆ†è¿›è¡Œæ„å»ºã€‚  <code>build.gradle</code>æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºã€‚ <br><br><pre> <code class="java hljs">apply plugin: <span class="hljs-string"><span class="hljs-string">'java'</span></span> repositories { mavenCentral() } dependencies { compile group: <span class="hljs-string"><span class="hljs-string">'org.springframework.data'</span></span>, name: <span class="hljs-string"><span class="hljs-string">'spring-data-mongodb'</span></span>, version: <span class="hljs-string"><span class="hljs-string">'2.0.5.RELEASE'</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.google.guava:guava:23.0'</span></span> testImplementation <span class="hljs-string"><span class="hljs-string">'junit:junit:4.12'</span></span> }</code> </pre> <br> åœ¨<code>build.gradle</code>çš„<code>build.gradle</code>æ–‡ä»¶ä¸­ï¼Œ <code>build.gradle</code> <code>apply plugin: 'java'</code>è¡Œ<code>apply plugin: 'java'</code>å‘Šè¯‰æ‚¨è¦å®‰è£…å“ªä¸ªæ’ä»¶ã€‚ åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªJavaæ’ä»¶ã€‚ <br><br>  <code>repositories{}</code>æ ‡ç­¾æŠ¥å‘Šåº”ä»ä¸­æå–ä¾èµ–å…³ç³»çš„ä»“åº“ã€‚ æˆ‘ä»¬é€‰æ‹©äº†<code>mavenCentral</code>æ¥æå–ä¾èµ–çš„jaræ–‡ä»¶ã€‚ æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨jcenteræå–ç›¸åº”çš„ç›¸å…³jaræ–‡ä»¶ã€‚ <br><br>  <code>dependencies {}</code>æ ‡è®°ç”¨äºæä¾›æœ‰å…³éœ€è¦ä¸ºé¡¹ç›®æå–çš„jaræ–‡ä»¶çš„å¿…è¦æ•°æ®ã€‚ <br><br>  <b>4.2 MongoDBçš„é…ç½®</b> <br><br> è¦ä½¿ç”¨MongoDBé…ç½®ï¼Œæˆ‘ä»¬éœ€è¦å®ç°<code>AbstractMongoConfiguration</code>ç±»ã€‚  <code>MongoConfig.java</code>ç±»å°†å¦‚ä¸‹æ‰€ç¤ºã€‚ åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨æ³¨é‡Šè€Œä¸æ˜¯xmlã€‚ ä½†æ˜¯XMLä¹Ÿå¯ä»¥ç”¨æ¥é…ç½®é…ç½®ã€‚ <br><br>  MongoConfig.javaç±»çš„å®ç° <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.tutorial.config; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.annotation.Bean; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.annotation.Configuration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.config.AbstractMongoConfiguration; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.mongodb.MongoClient; <span class="hljs-meta"><span class="hljs-meta">@Configuration</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MongoConfig</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AbstractMongoConfiguration</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDatabaseName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"local"</span></span>; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-meta"><span class="hljs-meta">@Bean</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> MongoClient </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mongoClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MongoClient(<span class="hljs-string"><span class="hljs-string">"127.0.0.1"</span></span>); } }</code> </pre> <br>  <code>@Configuration</code>ç”¨äºå°†<code>MongoConfig.java</code>ç±»å®šä¹‰ä¸ºé…ç½®ç±»ã€‚  <code>@Bean</code>å®šä¹‰<code>MongoClient</code> ã€‚ <br><br>  <b>4.3æ¨¡å‹ç±»åˆ«</b> <br><br> ç°åœ¨è€ƒè™‘æ¨¡å‹çš„ç±»åˆ«ã€‚ æˆ‘ä»¬ä½¿ç”¨<code>student.java</code>ä½œä¸ºæ¨¡å‹ç±»ï¼Œå…¶ä¸­åŒ…å«Studentçš„å±æ€§ï¼Œä¾‹å¦‚Nameå’ŒAgeã€‚  <code>Student.java</code>æ¨¡å‹<code>Student.java</code>ç”¨äºå°†POJOæ˜ å°„åˆ°MongoDBé›†åˆã€‚ <br><br> å­¦ç”Ÿæ¨¡ç‰¹ç­ <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.tutorial.model; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.annotation.Id; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.core.mapping.Document; <span class="hljs-meta"><span class="hljs-meta">@Document</span></span>(collection = <span class="hljs-string"><span class="hljs-string">"students"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Student</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Student</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String studentName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> studentAge)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.studentName = studentName; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.studentAge = studentAge; } <span class="hljs-meta"><span class="hljs-meta">@Id</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String id; String studentName; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> studentAge; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStudentName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> studentName; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setStudentName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String studentName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.studentName = studentName; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getStudentAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> studentAge; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setStudentAge</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> studentAge)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.studentAge = studentAge; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format( <span class="hljs-string"><span class="hljs-string">"Student[id=%s, studentName='%s', studentAge="</span></span>+studentAge+<span class="hljs-string"><span class="hljs-string">"]"</span></span>, id, studentName); } }</code> </pre> <br>  <code>@Document</code>å®šä¹‰ä¸€ä¸ªæ–‡æ¡£ã€‚  <code>collection</code>å±æ€§ç¡®å®šå°†ç”¨äºåŒ¹é…é›†åˆçš„é›†åˆã€‚ å¿…é¡»åœ¨POJOç±»ä¸­è®¿é—®è¢«ç§°ä¸ºé›†åˆä¸€éƒ¨åˆ†çš„æ‰€æœ‰å±æ€§ã€‚  <code>@Id</code>å®šä¹‰é›†åˆæ ‡è¯†ç¬¦ã€‚ <br><br>  <b>4.4 CRUDæ“ä½œ</b> <br><br> è¦æ‰§è¡ŒCRUDæ“ä½œï¼ˆåˆ›å»ºï¼Œè¯»å–ï¼Œæ›´æ–°ï¼Œåˆ é™¤çš„ç¼©å†™ï¼‰ï¼Œä¾‹å¦‚ä»MongoDBä¿å­˜ï¼Œæ›´æ–°ï¼Œåˆ é™¤å’Œæ£€ç´¢æ•°æ®ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨<code>MongoOperations</code> ã€‚ <br><br> ç°åœ¨è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹<code>MongoDBPOperations.java</code>ç±»ã€‚ æ­¤ç±»åŒ…å«CRUDæ“ä½œçš„æ‰€æœ‰æ–¹æ³•çš„å®ç°ã€‚ <br><br> å°†ç”¨äºæ‰§è¡ŒCRUDæ“ä½œçš„MongoDBPOperationsç±» <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.tutorial; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.core.MongoOperations; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.core.query.Criteria; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.core.query.Query; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.core.query.Update; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.tutorial.model.Student; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MongoDBPOperations</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saveStudent</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(MongoOperations mongoOperation, Student student)</span></span></span><span class="hljs-function"> </span></span>{ mongoOperation.save(student); System.out.println(<span class="hljs-string"><span class="hljs-string">"Student saved successfully"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// student object got created with id. System.out.println("student : " + student); } public void searchStudent(MongoOperations mongoOperation, String critera,String value) { // query to search student Query searchStudent = new Query(Criteria.where(critera).is(value)); // find student based on the query Student resultStudent = mongoOperation.findOne(searchStudent, Student.class); System.out.println("Student found!!"); System.out.println("Student details: " + resultStudent); } public void updateStudent(MongoOperations mongoOperation, String critera,String value, String updateCriteria, String updateValue) { // query to search student Query searchStudent = new Query(Criteria.where(critera).is(value)); mongoOperation.updateFirst(searchStudent, Update.update(updateCriteria, updateValue), Student.class); System.out.println("Student got updated successfully"); } public void getAllStudent(MongoOperations mongoOperation) { List listStudent = mongoOperation.findAll(Student.class); for(Student student:listStudent) { System.out.println("Student = " + student); } } public void removeStudent(MongoOperations mongoOperation, String critera,String value) { Query searchStudent = new Query(Criteria.where(critera).is(value)); mongoOperation.remove(searchStudent, Student.class); System.out.println("Student removed successfully!! "); } }</span></span></code> </pre> <br>  Javaç¨‹åºä¸­æœ€é‡è¦çš„ç±»æ˜¯åŒ…å«<code>main</code>æ–¹æ³•çš„ç±»ã€‚ <br><br>  <b>4.5åº”ç”¨ç±»åˆ«</b> <br><br> åŒ…å«mainæ–¹æ³•çš„ä¸»è¦ç±»æ˜¯<code>Application.java</code>ç±»ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨æ­¤ç±»ä»<code>MongoDBPOperations</code>ç±»ä¸­è°ƒç”¨æ–¹æ³•ã€‚ <br><br> è°ƒç”¨MongoDBPOperationsç±»çš„æ–¹æ³•çš„åº”ç”¨ç¨‹åºç±» <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.tutorial; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.ApplicationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.annotation.AnnotationConfigApplicationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.core.MongoOperations; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.tutorial.config.MongoConfig; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.tutorial.model.Student; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// For Annotation ApplicationContext ctx = new AnnotationConfigApplicationContext(MongoConfig.class); MongoOperations mongoOperation = (MongoOperations) ctx.getBean("mongoTemplate"); MongoDBPOperations ops = new MongoDBPOperations(); Student student = new Student("John", 15); //save student ops.saveStudent(mongoOperation, student); // get student based on search criteria ops.searchStudent(mongoOperation, "studentName", "John"); //update student based on criteria ops.updateStudent(mongoOperation, "StudentName", "John", "studentAge", "18"); // get student based on search criteria ops.searchStudent(mongoOperation, "studentName", "John"); // get all the students ops.getAllStudent(mongoOperation); //remove student based on criteria ops.removeStudent(mongoOperation, "studentName", "John"); // get all the students ops.getAllStudent(mongoOperation); } }</span></span></code> </pre> <br> è®©æˆ‘ä»¬é€æ­¥çœ‹ä¸€ä¸‹<code>Application.java</code>ç±»ä¸­æ‰§è¡Œçš„æ“ä½œï¼š <br><br><ol><li> æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code>ApplicationContext</code> ã€‚ è¿™æ˜¯ç”±äºéœ€è¦ä¸‹è½½é…ç½®ã€‚ </li><li> æ­¤å¤–ï¼Œè¿˜<code>MongoOperations</code>äº†ä¸€ä¸ª<code>MongoOperations</code>å¯¹è±¡æ¥åŠ è½½<code>MongoTemplate</code>ç»„ä»¶ã€‚ </li><li>  <code>MongoDBOperations</code>å¯¹è±¡æä¾›å¯¹ç”¨äºæ‰§è¡Œå„ç§<code>MongoOperation</code>æ“ä½œçš„æ–¹æ³•çš„è®¿é—®ã€‚ </li><li> æ­¤å¤–ï¼Œè¿˜åˆ›å»ºäº†ä¸€ä¸ªåä¸ºJohnå’Œ15å²çš„Studentå¯¹è±¡ã€‚ </li><li> æˆ‘ä»¬è°ƒç”¨<code>saveMethod</code>ç±»çš„<code>saveMethod</code>æ–¹æ³•ï¼Œå¹¶ä¼ é€’å¿…è¦çš„å‚æ•°ä»¥å°†å¯¹è±¡ä¿å­˜åœ¨æ•°æ®åº“ä¸­ã€‚ </li><li> åŒæ ·ï¼Œæˆ‘ä»¬<code>MongoDBOperations</code>è°ƒç”¨å„ç§<code>MongoDBOperations</code>æ–¹æ³•ã€‚ </li></ol><br>  <b><b>4.6å¯åŠ¨ç¨‹åº</b></b> <br><br> æœ€åï¼Œç°åœ¨è®©æˆ‘ä»¬å°†è¯¥ç¨‹åºä½œä¸ºJavaåº”ç”¨ç¨‹åºè¿è¡Œã€‚ å³é”®å•å‡»Application.java-&gt; Run as-&gt; Java Applicationã€‚ <br><br> ä»¥ä¸‹ç»“æœå°†å‡ºç°åœ¨æ§åˆ¶å°ä¸­ã€‚ <br><br><img src="https://habrastorage.org/webt/ue/vs/bn/uevsbnjunkbqehapgwio4uzer4i.jpeg"><br>  <i>å¯åŠ¨ç¨‹åºåçš„æ§åˆ¶å°è¾“å‡º</i> <br><br> ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ³¨é‡Šæ‰åˆ é™¤å¯¹è±¡çš„å‘½ä»¤ã€‚  MongoDBå°†æˆåŠŸå­˜å‚¨æ•°æ®ã€‚ <br><br> å¦å¤–ï¼Œè®©æˆ‘ä»¬æ³¨é‡Šæ‰åˆ é™¤å¯¹è±¡çš„è¡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ <br><br> è¯„è®ºåˆ é™¤æ–¹æ³•åçš„ç±»ç”³è¯· <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.tutorial; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.ApplicationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.context.annotation.AnnotationConfigApplicationContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.data.mongodb.core.MongoOperations; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.tutorial.config.MongoConfig; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.tutorial.model.Student; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Application</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// For Annotation ApplicationContext ctx = new AnnotationConfigApplicationContext(MongoConfig.class); MongoOperations mongoOperation = (MongoOperations) ctx.getBean("mongoTemplate"); MongoDBPOperations ops = new MongoDBPOperations(); Student student = new Student("John", 15); //save student ops.saveStudent(mongoOperation, student); // get student based on search criteria ops.searchStudent(mongoOperation, "studentName", "John"); //update student based on criteria ops.updateStudent(mongoOperation, "StudentName", "John", "studentAge", "18"); // get student based on search criteria ops.searchStudent(mongoOperation, "studentName", "John"); // get all the students ops.getAllStudent(mongoOperation); //remove student based on criteria //ops.removeStudent(mongoOperation, "studentName", "John"); // get all the students //ops.getAllStudent(mongoOperation); } }</span></span></code> </pre> <br> å¯¹ç¨‹åºè¿›è¡Œæ›´æ”¹åï¼Œè®©æˆ‘ä»¬é‡æ–°å¯åŠ¨å®ƒã€‚ æ§åˆ¶å°ä¸­å°†æ˜¾ç¤ºä»¥ä¸‹å†…å®¹ã€‚ <br><br><img src="https://habrastorage.org/webt/a8/sc/lv/a8sclvihnd6fkwi9igu92f8ddqk.jpeg"><br>  <i>æ³¨é‡Šåˆ é™¤æ“ä½œæ—¶çš„æ§åˆ¶å°</i> <br><br> ä½œä¸ºå¯¹deleteå‘½ä»¤çš„æ³¨é‡Šçš„ç»“æœï¼ŒMongoDBå°†å­˜å‚¨æ•°æ®ï¼Œå› æ­¤å°†ç±»ä¼¼äºä»¥ä¸‹æ‰€ç¤ºã€‚ <br><br><img src="https://habrastorage.org/webt/yb/8p/to/yb8ptodba8b2ygsony4gz1nvhnu.jpeg"><br>  <i>ä¿å­˜å’Œæ›´æ–°å‘½ä»¤åçš„MongoDBè¾“å‡º</i> <br><br>  <b>5.ä¸‹è½½Eclipseé¡¹ç›®</b> <br><br> æ‚¨å¯ä»¥åœ¨<a href="">æ­¤å¤„</a>ä¸‹è½½æ­¤ç¤ºä¾‹çš„å®Œæ•´æºä»£ç <a href="">ã€‚</a> <br><br> ç»“æŸ <br><br> ä¸å¾€å¸¸ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œç­‰å¾…é—®é¢˜å’Œè¯„è®ºï¼Œæˆ–è€…å‰å¾€<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Yuri</a>å‚åŠ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…¬å¼€è¯¾ç¨‹</a> ï¼Œåœ¨è¿™é‡Œæ‚¨ä¸ä»…å¯ä»¥æ”¶å¬ï¼Œè€Œä¸”å¯ä»¥å››å¤„è¯¢é—®ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN430520/">https://habr.com/ru/post/zh-CN430520/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN430508/index.html">DevOpsï¼šåˆ°åº•æ˜¯ä»€ä¹ˆ</a></li>
<li><a href="../zh-CN430510/index.html">å¦‚ä½•ç¼–å†™æ¯ä¸ªäººéƒ½ä¼šç†è§£çš„ä»£ç ï¼Ÿ</a></li>
<li><a href="../zh-CN430512/index.html">è‡ªç”±èŒä¸šè€…çš„ç”Ÿæ´»ï¼šä¸ä¸çŸ¥åçš„å®¢æˆ·åˆä½œï¼Œè®©è‡ªå·±æ‹–å»¶</a></li>
<li><a href="../zh-CN430514/index.html">åŒºå—é“¾æ…ˆå–„-DataArtèµ¢å¾—é©¬è€³ä»–åŒºå—é“¾å³°ä¼šHackathon</a></li>
<li><a href="../zh-CN430518/index.html">å¦‚ä½•æ¸²æŸ“ä¸­åœŸçš„æ¡†æ¶ï¼šé­”å¤šä¹‹å½±</a></li>
<li><a href="../zh-CN430522/index.html">æ‚¨éœ€è¦ITçš„ä¼ä¸šæ–‡åŒ–å—ï¼Ÿ å…‹æ‹‰æ–¯è¯ºè¾¾å°”å·¥ä½œå®¤Plariumå“ç‰Œç»ç†çš„å‘Šç™½</a></li>
<li><a href="../zh-CN430524/index.html">ç¥ç»ç½‘ç»œæ¶æ„</a></li>
<li><a href="../zh-CN430526/index.html">è€è™æœºï¼šå®ƒä»¬æ¥è‡ªè‹è”å“ªé‡Œï¼Œå¦‚ä½•å¸ƒç½®ï¼Ÿ</a></li>
<li><a href="../zh-CN430528/index.html">ç”¨PyUSB 1.0ç¼–ç¨‹</a></li>
<li><a href="../zh-CN430530/index.html">ç”¨äºç§»åŠ¨æµ‹è¯•è‡ªåŠ¨åŒ–çš„æ¨¡æ‹ŸæœåŠ¡å™¨</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>