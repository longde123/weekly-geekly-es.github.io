<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üåõ ‚úäüèø üòÅ Ensamblar una biblioteca de componentes angulares como componentes web ‚õ©Ô∏è üî¶ üåî</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Se est√°n escribiendo muchos art√≠culos sobre Elementos Angulares y se leen informes regularmente. Por ejemplo, ya no necesita implementar varios angula...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Ensamblar una biblioteca de componentes angulares como componentes web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/456462/">  Se est√°n escribiendo muchos art√≠culos sobre Elementos Angulares y se leen informes regularmente.  Por ejemplo, ya no necesita implementar varios angulares completos, solo recopile los componentes web y util√≠celos en su p√°gina. <br><br>  Pero, por regla general, estos materiales se limitan a considerar una situaci√≥n bastante ut√≥pica: hacemos un proyecto separado, creamos un componente angular, configuramos el proyecto para ensamblar Elementos y, finalmente, compilamos varios archivos JS, conect√°ndolos a una p√°gina normal nos dar√° el resultado deseado.  ¬°Hurra, el componente funciona! .. <br><br><img src="https://habrastorage.org/webt/m0/n_/x-/m0n_x-qmnnmm76bosbioi_b12ni.png" alt="imagen"><br><br>  En la pr√°ctica, surge la necesidad de extraer varios componentes de un proyecto angular de trabajo listo para usar, adem√°s, preferiblemente para no afectar su desarrollo y uso actuales.  Este art√≠culo result√≥ precisamente debido a una de estas situaciones: no solo quer√≠a ensamblar elementos individuales del proyecto, sino hacer que el proceso de compilar toda la biblioteca de IU en Angular en un conjunto de archivos con componentes web nativos. <br><a name="habracut"></a><br><h3>  Preparaci√≥n del m√≥dulo </h3><br>  Primero, recordemos c√≥mo deber√≠a ser el m√≥dulo para compilar Angular Elements. <br><br><pre><code class="javascript hljs">@NgModule({ <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [BrowserModule], <span class="hljs-attr"><span class="hljs-attr">entryComponents</span></span>: [SomeComponent], }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppModule</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(readonly injector: Injector) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ngElement = createCustomElement(SomeComponent, { injector, }); customElements.define(<span class="hljs-string"><span class="hljs-string">'some-component'</span></span>, ngElement); } ngDoBootstrap() {} }</code> </pre> <br>  Necesitamos: <br><br><ol><li>  Agregue a la entrada Componentes el componente que planeamos hacer un elemento angular, importe los m√≥dulos necesarios para el componente. </li><li>  Cree un elemento angular usando createCustomElement y un inyector. </li><li>  Declare un componente web en los elementos personalizados de su navegador. </li><li>  Anule el m√©todo ngDoBootstrap para vaciarlo. </li></ol><br>  El primer elemento es la designaci√≥n del componente en s√≠ y sus dependencias, y los tres restantes son el proceso necesario para la aparici√≥n del componente web en el navegador.  Esta separaci√≥n le permite colocar la l√≥gica de crear un elemento por separado, en una superclase abstracta: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> abstract <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyElementModule</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(injector: Injector, component: InstanceType&lt;any&gt;, name: string) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ngElement = createCustomElement(component, { injector, }); customElements.define(<span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${MY_PREFIX}</span></span></span><span class="hljs-string">-</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${name}</span></span></span><span class="hljs-string">`</span></span>, ngElement); } ngDoBootstrap() {} }</code> </pre><br>  La superclase puede ensamblar un componente nativo completo del inyector, componente y nombre y registrarlo.  El m√≥dulo para crear un elemento espec√≠fico se ver√° as√≠: <br><br><pre> <code class="javascript hljs">@NgModule({ <span class="hljs-attr"><span class="hljs-attr">imports</span></span>: [BrowserModule, MyButtonModule], <span class="hljs-attr"><span class="hljs-attr">entryComponents</span></span>: [MyButtonComponent], }) <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ButtonModule</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyElementModule</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(injector: Injector) { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(injector, MyButtonComponent, <span class="hljs-string"><span class="hljs-string">'button'</span></span>); } }</code> </pre><br>  En este ejemplo, recopilamos el m√≥dulo de nuestro bot√≥n en los metadatos de NgModule y declaramos el componente de este m√≥dulo en entryComponents, y tambi√©n obtenemos el inyector del mecanismo de inyecci√≥n de dependencia angular. <br><br>  El m√≥dulo est√° listo para ensamblar y nos dar√° un conjunto de archivos JS que se pueden plegar en un componente web separado.  De esta forma podemos crear varios m√≥dulos y turnarnos para ensamblar componentes web a partir de ellos. <br><br><h3>  Juntando algunos componentes </h3><br>  Ahora tenemos que configurar el proceso de arranque de los m√≥dulos resultantes.  Sobre todo, me gusta la idea de poner esta l√≥gica en un archivo ejecutable separado, que ser√° responsable de compilar un m√≥dulo en particular. <br><br>  La estructura de los elementos es m√°s o menos as√≠: <br><br><img src="https://habrastorage.org/webt/7t/5x/ff/7t5xffyjpc6svbpmyaapsvbk08o.png" alt="imagen"><br><br>  Un archivo de compilaci√≥n separado en la versi√≥n m√°s simple se ver√≠a as√≠: <br><br><pre> <code class="javascript hljs">enableProdMode(); platformBrowserDynamic() .bootstrapModule(ButtonModule) .catch(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">err</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.error(err));</code> </pre><br>  Este enfoque ayudar√° a evitar f√°cilmente los m√≥dulos preparados y a mantener la estructura del proyecto con elementos claros y simples. <br><br>  En la configuraci√≥n de compilaci√≥n angular.json, especificamos la ruta del archivo recopilado a una determinada carpeta temporal dentro de dist: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"outputPath"</span></span>: <span class="hljs-string"><span class="hljs-string">"projects/elements/dist/tmp"</span></span></code> </pre><br>  Caer√° un conjunto de archivos de salida despu√©s del ensamblaje del m√≥dulo. <br><br>  Para el ensamblaje en s√≠, use el comando de compilaci√≥n habitual en angular-cli: <br><br><pre> <code class="bash hljs">ng run elements:build:production --main=<span class="hljs-string"><span class="hljs-string">'projects/elements/src/${project}/${component}/compile.ts'</span></span></code> </pre><br>  Un elemento separado ser√° el producto final, por lo que activamos los indicadores de producci√≥n con la compilaci√≥n anticipada, y luego sustituimos la ruta al archivo ejecutable, que consiste en el proyecto y el nombre del componente. <br><br>  Ahora recopilaremos el resultado en un archivo separado, que ser√° el paquete final de nuestro componente web separado.  Para hacer esto, use el gato habitual: <br><br><pre> <code class="bash hljs">cat dist/tmp/runtime.js dist/tmp/main.js &gt; dist/tmp/my-<span class="hljs-variable"><span class="hljs-variable">${component}</span></span>.js</code> </pre><br>  Es importante tener en cuenta aqu√≠ que no colocamos el archivo polyfills.js en el paquete de cada componente, porque obtenemos duplicaci√≥n si usamos varios componentes en la misma p√°gina en el futuro.  Por supuesto, debe deshabilitar la opci√≥n outputHashing en angular.json. <br><br>  Transferiremos el paquete resultante de una carpeta temporal a una carpeta para almacenar componentes.  Por ejemplo, as√≠: <br><br><pre> <code class="bash hljs">cp dist/tmp/my-<span class="hljs-variable"><span class="hljs-variable">${component}</span></span>.js dist/components/</code> </pre><br>  Solo queda juntar todo, y el script de compilaci√≥n est√° listo: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// compileComponents.js projects.forEach(project =&gt; { const components = fs.readdirSync(`src/${project}`); components.forEach(component =&gt; compileComponent(project, component)); }); function compileComponent(project, component) { const buildJsFiles = `ng run elements:build:production --aot --main='projects/elements/src/${project}/${component}/compile.ts'`; const bundleIntoSingleFile = `cat dist/tmp/runtime.js dist/tmp/main.js &gt; dist/tmp/my-${component}.js`; const copyBundledComponent = `cp dist/tmp/my-${component}.js dist/components/`; execSync(`${buildJsFiles} &amp;&amp; ${bundleIntoSingleFile} &amp;&amp; ${copyBundledComponent}`); }</span></span></code> </pre><br>  Ahora tenemos un padre ordenado con un conjunto de componentes web: <br><br><img src="https://habrastorage.org/webt/7o/nk/xn/7onkxngfgmbewzxeq9-d5ikovt8.png" alt="imagen"><br><br><h3>  Conecte componentes a una p√°gina normal </h3><br>  Nuestros componentes web ensamblados se pueden insertar de forma independiente en la p√°gina, conectando sus paquetes JS seg√∫n sea necesario: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-elements-input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"input"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/&lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">my-elements-input</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my-input.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Para no arrastrar el zone.js completo con cada componente, lo conectamos una vez al comienzo del documento: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"zone.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  El componente se muestra en la p√°gina y todo est√° bien. <br><br>  Y agreguemos un bot√≥n: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-elements-button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">size</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"l"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onClick()"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">my-elements-button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"my-button.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Lanzamos la p√°gina y ... <br><br><img src="https://habrastorage.org/webt/kq/36/xx/kq36xxo1cjhlf0vqhnptywiytcq.png" alt="imagen"><br><br>  ¬°Oh, est√° roto! <br><br>  Si observamos el paquete, encontramos una l√≠nea tan discreta: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.webpackJsonp=<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.webpackJsonp||[]</code> </pre><br><img src="https://habrastorage.org/webt/49/3n/i_/493ni_nz-hug_uyxsw8eskihvnc.jpeg" alt="imagen"><br><br>  Ventana de parches de Webpack, para no duplicar la carga de los mismos m√≥dulos.  Resulta que solo el primer componente agregado a la p√°gina puede agregarse a elementos personalizados. <br><br>  Para resolver este problema, necesitamos usar custom-webpack: <br><br><ol><li>  Agregue un paquete web personalizado al proyecto con elementos: <br><br> <code>ng add @angular-builders/custom-webpack --project=elements <br></code> <br></li><li>  Configurando angular.json: <br><br><pre> <code class="json hljs"><span class="hljs-string"><span class="hljs-string">"builder"</span></span>: <span class="hljs-string"><span class="hljs-string">"@angular-builders/custom-webpack:browser"</span></span>, <span class="hljs-string"><span class="hljs-string">"options"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"customWebpackConfig"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"path"</span></span>: <span class="hljs-string"><span class="hljs-string">"./projects/elements/elements-webpack.config.js"</span></span> }, ...</code> </pre><br></li><li>  Cree un archivo de configuraci√≥n de paquete web personalizado: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = { <span class="hljs-attr"><span class="hljs-attr">output</span></span>: { <span class="hljs-attr"><span class="hljs-attr">jsonpFunction</span></span>: <span class="hljs-string"><span class="hljs-string">'myElements-'</span></span> + uuidv1(), <span class="hljs-attr"><span class="hljs-attr">library</span></span>: <span class="hljs-string"><span class="hljs-string">'elements'</span></span>, }, };</code> </pre><br>  En √©l, necesitamos generar una identificaci√≥n √∫nica para cada ensamblaje de cualquier manera conveniente.  Me aprovech√© de uuid. <br></li></ol><br>  Puede volver a ejecutar el script de compilaci√≥n: los nuevos componentes se llevan bien en la misma p√°gina. <br><br><h3>  Trayendo belleza </h3><br>  Nuestros componentes usan variables CSS globales que especifican el tema de color y el tama√±o de los componentes. <br><br>  En aplicaciones angulares que usan nuestra biblioteca, se colocan en el componente ra√≠z del proyecto.  Con componentes web independientes, esto no es posible, as√≠ que solo compile los estilos y con√©ctese a la p√°gina donde se usan los componentes web. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// compileHelpers.js compileMainTheme(); function compileMainTheme() { const pathFrom = `../../main-project/styles/themes`; const pathTo = `dist/helpers`; execSync( `lessc ${pathFrom}/theme-default-vars.less ${pathTo}/main-theme.css`,; ); }</span></span></code> </pre><br>  Usamos less, as√≠ que solo compilamos nuestras variables lessc y colocamos el archivo resultante en la carpeta de ayudantes. <br><br>  Este enfoque le permite controlar el estilo de todos los componentes de la p√°gina web sin la necesidad de volver a compilarlos. <br><br><h3>  Gui√≥n final </h3><br>  De hecho, todo el proceso de ensamblar los elementos descritos anteriormente se puede reducir a un conjunto de acciones: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh rm -r -f dist/ &amp;&amp; mkdir -p dist/components &amp;&amp; node compileElements.js &amp;&amp; node compileHelpers.js &amp;&amp; rm -r -f dist/tmp</span></span></code> </pre><br>  Solo queda llamar a este script desde el paquete principal.json para reducir todo el proceso de compilaci√≥n de los componentes angulares reales para el lanzamiento de un solo comando. <br><br>  Todos los scripts descritos anteriormente, as√≠ como demostraciones para usar componentes angulares y nativos, se pueden encontrar en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">github</a> . <br><br><h3>  Total </h3><br>  Organizamos un proceso en el que agregar un nuevo componente web lleva solo un par de minutos, mientras se mantiene la estructura de los principales proyectos angulares de los que se toman. <br><br>  Cualquier desarrollador puede agregar un componente a un conjunto de elementos y ensamblarlos en un conjunto de paquetes JS separados de componentes web sin entrar en los detalles de trabajar con Angular Elements. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/456462/">https://habr.com/ru/post/456462/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../456442/index.html">Admisi√≥n al programa de pregrado de la Universidad Estatal de San Petersburgo con el apoyo de Yandex y JetBrains</a></li>
<li><a href="../456446/index.html">Ceph - de "en la rodilla" a "producci√≥n"</a></li>
<li><a href="../456448/index.html">Reglas para elegir un marco JS</a></li>
<li><a href="../456450/index.html">DO-RA. Avia para monitorear la radiaci√≥n c√≥smica en la aviaci√≥n</a></li>
<li><a href="../456452/index.html">Ejemplos de c√≥digo C ++ antes y despu√©s de Rangos</a></li>
<li><a href="../456466/index.html">Gen√©ricos PHP hoy (bueno, casi)</a></li>
<li><a href="../456470/index.html">Errores del editor de paquetes WSUS</a></li>
<li><a href="../456474/index.html">Tic Tac Toe Parte 0: Comparar Svelte y React</a></li>
<li><a href="../456476/index.html">Modificaciones de pila Bluetooth para mejorar la calidad de audio en auriculares sin c√≥decs AAC, aptX o LDAC</a></li>
<li><a href="../456482/index.html">Atr√°pame si puedes. King Version</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>