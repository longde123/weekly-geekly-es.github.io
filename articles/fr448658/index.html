<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçÆ ‚¨úÔ∏è üë®üèº‚ÄçüöÄ Que peut-on faire via le connecteur OBD dans la voiture ü§üüèæ ‚ôæ üçç</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ce n'est un secret pour personne que dans les voitures modernes, tous les syst√®mes aux globes oculaires sont obstru√©s par divers appareils √©lectroniqu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Que peut-on faire via le connecteur OBD dans la voiture</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448658/"> Ce n'est un secret pour personne que dans les voitures modernes, tous les syst√®mes aux globes oculaires sont obstru√©s par divers appareils √©lectroniques, m√™me un simple l√®ve-vitre a son propre microcontr√¥leur et une adresse sur le r√©seau partag√©.  En tant que propri√©taire int√©ress√©, je me demandais ce qui pouvait √™tre fait avec juste l'acc√®s au connecteur OBD et rien de plus. <br><a name="habracut"></a><br>  <i>Tout ce qui est d√©crit dans l'article se r√©f√®re √† la voiture de 2008 (Mitsubishi Lancer), mais comme la pratique l'a montr√©, apr√®s 10 ans, le constructeur n'a rien chang√© et toutes les fonctions continuent d'√™tre utilis√©es et fonctionnent sur les voitures modernes.</i> <br><br>  La structure du r√©seau dans la voiture est illustr√©e dans l'image: <br><br><img src="https://habrastorage.org/webt/hf/6h/vj/hf6hvjpyobul4yj9vrkugy1jlao.png" alt="image"><br><br>  La voiture dispose de 3 bus CAN (bus moteur haute vitesse 500 kbps, cabine basse vitesse 83,3 kbps, diagnostic) et d'un bus LIN.  Le lien de connexion entre eux est le bloc ETACS (Electronic Total Automobile Control System), qui agit comme une ¬´passerelle¬ª et envoie des messages d'un bus √† un autre, selon certaines r√®gles, et en traite √©galement certains.  Que peut-on faire avec le bus CAN?  Par exemple, discutez avec des blocs ou changez peut-√™tre quelque chose.  Pour d√©marrer un dialogue avec n'importe quel bloc, vous devez conna√Ætre son adresse, ainsi que les fonctions prises en charge (PID), qu'il peut traiter et donner une r√©ponse. <br><br>  Dans le domaine public se trouve un logiciel pour les concessionnaires appel√© MUT III.  Apr√®s avoir √©tudi√© la base de donn√©es, vous pouvez trouver toutes les informations qui nous int√©ressent. <br><br>  √Ä propos des adresses (demande-r√©ponse) dans le r√©seau CAN: <br><br><img src="https://habrastorage.org/webt/qb/sw/m4/qbswm4lnyqnvdrtm1cbtu9bynac.jpeg" alt="image"><br><br>  PID des demandes, d√©cryptage complet des r√©ponses de tous les blocs, y compris la position des octets dans la r√©ponse (si plusieurs valeurs sont envoy√©es dans une trame) et des facteurs avec des unit√©s: <br><br><img src="https://habrastorage.org/webt/6t/ed/_z/6ted_zg_aechaxuzspylu-eossc.jpeg" alt="image"><br><br>  Par exemple, nous voulons conna√Ætre l'angle de braquage.  Pour ce faire, envoyez la commande 2102 √† l'unit√© de commande ESP. En r√©ponse, le message 6102 FFEA000008FFF302 arrivera <br><br>  En regardant le tableau, nous constatons que les octets 2 et 3 sont n√©cessaires. <br><br><img src="https://habrastorage.org/webt/zk/it/ma/zkitmagzo2sqagf1zwgxp55ldfy.jpeg" alt="image"><br><br>  La valeur en int16.  0xFFEA = -22, en multipliant par un facteur de 0,04375, nous obtenons un angle de braquage de -0,9625 degr√©s. <br><br>  Ainsi, vous pouvez demander beaucoup d'informations aux unit√©s de contr√¥le, jusqu'√† combien d'heures la radio a jou√© et combien de disques ont √©t√© charg√©s dans la radio, ainsi que lancer des tests de diagnostic sur tous les n≈ìuds (vous pouvez allumer diff√©rentes lumi√®res sur le tableau de bord et tirer des fl√®ches, par exemple). <br><br><img src="https://habrastorage.org/webt/c-/vs/d_/c-vsd_0fbijn2pkhxq3znablkse.jpeg" alt="image"><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/csiLZci6MO8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Eh bien, tout ce que nous voulions, c'√©tait ce que nous avions appris, mais √† quoi √ßa sert?  Maintenant, si vous modifiez / activez / d√©sactivez quelque chose ... <br><br>  Un exemple simple.  Dans l'unit√© de commande de transmission automatique, il existe un compteur logiciel pour le niveau de vieillissement de l'huile, et lorsqu'une certaine valeur seuil est accumul√©e, un message appara√Æt sur l'√©cran bk indiquant que la transmission doit √™tre entretenue.  L'huile a √©t√© chang√©e et le message continue d'√™tre affich√© √† l'√©cran, car personne ne peut r√©initialiser le compteur et seul le scanner du concessionnaire MUT-III (qui co√ªte environ 1000 $, tout le monde ne peut pas se le permettre) peut le r√©initialiser et certains programmes (√©galement non gratuits).  Dans les m√™mes tableaux, vous pouvez trouver l'√©quipe sous le nom explicite CLEAR_CVT_oil_degradation_level_Start.  Vous pouvez rire vicieusement en direction de OD et r√©initialiser vous-m√™me ce compteur malheureux.  Nous envoyons la commande <b>31</b> 03 au bloc CVT et ... nous obtenons 7F <b>31</b> 33 en r√©ponse. <br><br>  <i>Une petite digression.</i>  Presque tous les v√©hicules utilisent le m√©canisme <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">UDS (alias ISO 14229)</a> pour les diagnostics et l'entretien. <br><br>  Il simplifie la vie des d√©veloppeurs de scanners de diagnostic automobile et est unifi√© pour tous les constructeurs automobiles (mais cela ne signifie pas que certains ne peuvent pas inventer leurs propres modules compl√©mentaires). <br><br>  En cons√©quence, nous avons une r√©ponse d√©chiffr√©e du variateur: 7F - la demande est rejet√©e, 31 est le PID que nous avons envoy√© et le <i>code de r√©ponse n√©gative</i> 33, √† savoir Security Access Denied.  Autrement dit, nous n'avons pas le droit de modifier ou de demander cette fonction.  Qui a-t-elle? <br><br>  <i>Digression 2.</i> UDS utilise un m√©canisme pour restreindre l'acc√®s √† plusieurs niveaux - une session de diagnostic r√©guli√®re, une session √©tendue, une session de programmation, etc.  Chaque session a des niveaux d'acc√®s qui d√©cident de ce que vous pouvez ou non.  Pour y acc√©der, vous devez demander la soi-disant graine du bloc, la traiter avec un algorithme sp√©cifique et la renvoyer au bloc (Cl√©).  Lisez plus <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  Essayons de demander une graine.  Nous envoyons la commande 2701 √† l'ECU et obtenons la r√©ponse 6701 6A43FD3C. <br>  En envoyant une valeur de 4 octets en r√©ponse ( <b>27</b> 02 DEADBEEF), nous obtenons la r√©ponse 7F <b>27</b> 35, o√π 35 est la cl√© non valide (cl√© non valide), car  la valeur "du plafond" a √©t√© envoy√©e.  O√π chercher un algorithme de calcul cl√©?  Il n'y a nulle part ailleurs dans le firmware de l'unit√© de contr√¥le.  Il est assez facile de l'obtenir (mais pas sur tous les blocs, tout d√©pend du microcontr√¥leur utilis√©), on trouve d'abord le gestionnaire de r√©ception CAN, puis la fonction de traitement PID 0x27. <br><br><img src="https://habrastorage.org/webt/ev/ob/0s/evob0smuav3lsj_g66al3yoxrdy.jpeg" alt="image"><br><br>  En r√©p√©tant l'√©change de la cl√© de d√©part avec l'algorithme du firmware, nous obtenons 6702 34 en r√©ponse, o√π 34 est ¬´L'acc√®s est autoris√©¬ª.  Apr√®s cela, la commande de r√©initialisation du niveau de d√©gradation de l'huile est ex√©cut√©e avec succ√®s et ne renvoie pas un code de r√©ponse n√©gative, mais une r√©ponse positive 7103 01 et le compteur est r√©initialis√© avec succ√®s. <br><br>  Ainsi, via le connecteur OBD, vous pouvez faire presque n'importe quoi avec la voiture: changer les num√©ros VIN dans les blocs, configurer l'encodage (configuration), d√©sactiver le dispositif d'immobilisation en moins d'une seconde, effacer les informations d'erreur, entrer le bloc dans l'√©tat de d√©marrage lorsque vous pouvez charger n'importe quel code et l'ex√©cuter.  <i>Le syst√®me de s√©curit√© japonais est l√©g√®rement boiteux.</i> <br><br>  Un exemple de changement de configuration sur une vid√©o: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/xMoWuYTAGrM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  L'article est √©crit √† titre informatif uniquement.  Toute intervention dans les unit√©s de contr√¥le √©lectronique de la voiture peut √™tre la derni√®re pour eux.  Passez une bonne journ√©e √† tous! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr448658/">https://habr.com/ru/post/fr448658/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr448644/index.html">Expressions r√©guli√®res applicatives en tant que foncteur alternatif gratuit</a></li>
<li><a href="../fr448648/index.html">Comment asseoir tout le monde dans la science et ne pas transformer le bureau en foyer de haine</a></li>
<li><a href="../fr448652/index.html">Mozilla WebThings sur Raspberry Pi - pour commencer</a></li>
<li><a href="../fr448654/index.html">Mozilla WebThings - Configuration de la passerelle</a></li>
<li><a href="../fr448656/index.html">Big Brother regarde ... lui-m√™me ou une carte avec l'historique des mouvements dans HomeAssistant</a></li>
<li><a href="../fr448662/index.html">"Russia 404": une option non visible</a></li>
<li><a href="../fr448664/index.html">Cr√©er des cartes comme Tinder sur Swift</a></li>
<li><a href="../fr448668/index.html">Agile: le plus gros probl√®me id√©ologique en informatique</a></li>
<li><a href="../fr448670/index.html">Conception d'interface embarqu√©e</a></li>
<li><a href="../fr448672/index.html">Webinaire - Authentification √† deux facteurs et ES dans l'infrastructure VMware Horizon View √† l'aide des produits Aladdin R.D.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>