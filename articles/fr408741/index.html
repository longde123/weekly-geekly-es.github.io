<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äçüé® ü§õüèª üà∑Ô∏è Pionnier du processeur Qualcomm Centriq 2400. Un tueur Intel? üïã üëÜüèæ ü§õ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="D√©but novembre 2017, Qualcomm Datacenter Technologies (QDT) a achev√© les travaux sur sa nouvelle invention - un processeur bas√© sur la technologie 10 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pionnier du processeur Qualcomm Centriq 2400. Un tueur Intel?</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ua-hosting/blog/408741/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/g7/5n/3n/g75n3ntbmfmydlytlwfk8w_ddya.jpeg"></div><br>  D√©but novembre 2017, Qualcomm Datacenter Technologies (QDT) a achev√© les travaux sur sa nouvelle invention - un processeur bas√© sur la technologie 10 nm - Centriq 2400. Quel avenir attend l'industrie selon les cr√©ateurs de cette innovation?  Quels sont les avantages d'obtenir des serveurs et pourquoi le Centriq 2400 est-il si unique?  En savoir plus √† ce sujet et plus encore. <a name="habracut"></a><br><br>  Le 8 novembre, une conf√©rence de presse de QDT s'est tenue √† San Jose (Californie), au cours de laquelle le d√©but des livraisons du nouveau processeur a √©t√© officiellement annonc√©.  Anand Chandrasekher, vice-pr√©sident principal et chef de la direction, a d√©clar√©: <br><br><blockquote>  La pr√©sentation d'aujourd'hui est une r√©alisation importante et l'aboutissement de plus de 4 ans de conception, de d√©veloppement et de soutien diligents du syst√®me ... Nous avons cr√©√© le processeur de serveur le plus avanc√© au monde, qui offre des performances √©lev√©es combin√©es √† un haut niveau d'efficacit√© √©nerg√©tique, permettant √† nos clients de r√©duire consid√©rablement leurs co√ªts. </blockquote><br><br>  Outre la fiert√© non dissimul√©e de leur produit, les repr√©sentants de l'entreprise n'h√©sitent pas √† d√©clarer que leur processeur Centriq 2400 est nettement sup√©rieur aux produits concurrents, par exemple Intel Xeon Platinum 8180. Selon leurs calculs, pour chaque dollar d√©pens√© (et le co√ªt du processeur est de 1995 $), l'utilisateur obtiendra des performances dans 4 fois.  Et lorsque recalcul√© en performances de 1 watt - de 45% de plus.  Des d√©clarations audacieuses, cependant, de nombreux repr√©sentants de diverses soci√©t√©s int√©ress√©es par le nouveau produit sont plus qu'heureux de les entendre. <br><br><h2>  Sp√©cifications techniques du Qualcomm Centriq 2400 </h2><br>  <b>Architecture CPU:</b> <br><br><ul><li>  jusqu'√† 48 c≈ìurs 64 bits avec une fr√©quence de pointe de 2,6 GHz; </li><li>  Compatibilit√© Armv8 </li><li>  AArch64 uniquement; </li><li>  Armv8 FP / SIMD; </li><li>  Extension de CRC et Armv8 Crypto; </li></ul><br>  <b>Cache CPU:</b> <br><br><ul><li>  64 Ko de cache d'instructions (instructions) L1 et 24 Ko de cache √† cycle unique L0; </li><li>  Cache de donn√©es L1 de 32 Ko; </li><li>  512 Ko de cache L2 total pour 2 c≈ìurs; </li><li>  60 Mo de cache L3 partag√©; </li><li>  filtrage des requ√™tes interprocesseurs L2; </li><li>  QoS; </li></ul><br>  <i>o√π, L (L1, L2, L3, L0) est le niveau, c'est-√†-dire</i>  <i>L0 est le niveau z√©ro.</i> <br><br>  <b>La technologie:</b> <br><br><ul><li>  La technologie FinFET 10 nm de Samsung; </li></ul><br>  <b>Bande passante m√©moire:</b> <br><br><ul><li>  6 canaux pour connecter des modules de m√©moire DDR4; </li><li>  jusqu'√† 2667 MT / s par connexion; </li><li>  128 Go / s - bande passante totale maximale; </li><li>  Compression de bande passante int√©gr√©e </li></ul><br>  <b>Capacit√© m√©moire:</b> <br><br><ul><li>  768 Go = 128 Go x 6 connexions; </li></ul><br>  <b>Type de m√©moire:</b> <br><br><ul><li>  Connexions DDR4 64 bits avec ECC 8 bits; </li><li>  RDIMM et LRDIMM; </li></ul><br>  <b>Interface prise en charge:</b> <br><br><ul><li>  GPIO </li><li>  I¬≤C; </li><li>  SPI </li><li>  SATA 8 bandes Gen 3; </li><li>  32 PCIe Gen3 avec la possibilit√© de connecter jusqu'√† 6 contr√¥leurs PCIe; </li></ul><br>  En plus des caract√©ristiques ci-dessus, il convient de noter que ce processeur poss√®de 18 milliards de transistors sur chaque puce.  Et tous ses c≈ìurs sont connect√©s par un bus en anneau bidirectionnel.  √Ä charge maximale, le Centriq 2400 ne consomme que 120 watts. <br><br>  Le principal objectif du nouveau processeur reste les solutions cloud.  Selon les repr√©sentants de l'entreprise, Centriq 2400 vous permettra de cr√©er des syst√®mes de serveurs qui se caract√©riseront par des performances, une efficacit√© et une √©volutivit√© √©lev√©es. <br><br>  Cela ne pouvait qu'attirer de nombreuses entreprises, dont les technologies cloud sont presque √† la base de leurs activit√©s.  Alibaba, LinkedIn, Cloudflare, American Megatrends Inc., Arm, Cadence Design Systems, Canonical, Chelsio Communications, Excelero, Excelero, Hewlett Packard Enterprise, Illumina, MariaDB, Mellanox, Microsoft Azure, MongoDB, Netronome, Packet, Red Hat, ont assist√© √† la pr√©sentation. ScyllaDB, 6WIND, Samsung, Solarflare, Smartcore, SUSE, Synopsys, Uber, Xilinx.  La liste est assez impressionnante, ce qui indique une attention accrue √† ce produit. <br><br>  Pour le moment, le processeur Qualcomm Centriq 2400 ne fait que gagner du terrain, tant en pr√©valence qu'en popularit√©.  Ce qui, naturellement, conduira √† l'√©mergence de quelque chose de nouveau, similaire ou m√™me plus productif, de la part des concurrents de QDT. <br><br>  Mais tout le monde ne croit pas aveugl√©ment √† la fra√Æcheur des nouveaux articles.  Si ceux qui croient que la r√©alisation de tests et d'analyses comparatives de plusieurs processeurs vous permettront de voir des r√©sultats bien plus indicatifs que les propos des promoteurs du Centriq 2400. <br><br>  Cloudflare a effectu√© une analyse comparative de trois plates-formes: Grantley (Intel), Purley (Intel) et Centriq (Qualcomm). <br><br>  Ci-dessous seront pr√©sent√©s des graphiques de cette analyse et les conclusions de leur auteur - <b>Vlad Krasnov</b> .  ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Original de cette analyse sur le blog de Cloudflare</a> ) <br><br><h2>  Cryptographie √† cl√© publique </h2><br><img src="https://habrastorage.org/webt/_q/42/2j/_q422juc1e9u-oqrqbeoxvsarba.png"><br><br><img src="https://habrastorage.org/webt/bf/up/_y/bfup_ysr_-7byinpj4h03-4ut2q.png"><br><br>  La cryptographie √† cl√© publique est la plus pure performance d'ALU (dispositif de logique arithm√©tique).  Il est int√©ressant, mais pas surprenant, que dans un r√©f√©rentiel de base, le noyau Broadwell soit plus rapide que Skylake, et les deux soient plus rapides que Falkor.  En effet, Broadwell fonctionne √† une fr√©quence plus √©lev√©e, bien qu'en termes d'architecture, il ne soit pas tr√®s inf√©rieur √† Skylake. <br><br>  Falkor est inf√©rieur aux autres dans ce test.  Tout d'abord, le mode turbo a √©t√© activ√© dans l'une des r√©f√©rences de base, ce qui signifie que les processeurs Intel fonctionnent √† une fr√©quence plus √©lev√©e.  De plus, Intel a introduit deux instructions sp√©ciales √† Broadwell pour acc√©l√©rer le traitement des grands nombres: ADCX et ADOX.  Ils effectuent deux op√©rations d'ajout avec report ind√©pendantes par cycle, tandis qu'ARM ne peut en effectuer qu'une seule.  De m√™me, le jeu d'instructions ARMv8 n'a pas de commande unique pour effectuer une multiplication 64 bits; √† la place, une paire d'instructions MUL et UMULH est utilis√©e. <br><br>  Cependant, au niveau SoC, Falkor gagne.  Il est l√©g√®rement plus lent que Skylake en termes de RSA2048, et uniquement parce que RSA2048 n'a pas d'impl√©mentation optimis√©e pour ARM.  La performance de l'ECDSA est ridiculement √©lev√©e.  Une seule puce Centriq peut r√©pondre aux besoins de presque toutes les entreprises du monde avec ECDSA. <br><br>  Il est √©galement tr√®s int√©ressant de voir que Skylake surpasse Broadwell de 30%, malgr√© le fait qu'il ait perdu un c≈ìur dans le test et ne compte que 20% de c≈ìurs de plus que Broadwell.  Cela peut s'expliquer par un mode turbo plus efficace et un hyper-threading am√©lior√©. <br><br><h2>  Cryptographie sym√©trique </h2><br><img src="https://habrastorage.org/webt/pe/mn/ib/pemnibyrsgxfmkwl1luagfrvxbi.png"><br><br><img src="https://habrastorage.org/webt/ri/1u/1p/ri1u1pturbightaxqt2bmqu90o0.png"><br><br>  Les performances des c≈ìurs Intel en cryptographie sym√©trique sont tout simplement excellentes. <br><br>  AES-GCM utilise une combinaison d'instructions mat√©rielles sp√©ciales pour acc√©l√©rer AES et CLMUL.  Intel a introduit ces instructions pour la premi√®re fois en 2010, avec son processeur Westmere et √† chaque g√©n√©ration, il a am√©lior√© ses performances.  ARM a r√©cemment introduit un ensemble d'instructions similaires avec leur jeu d'instructions 64 bits comme ajout facultatif.  Heureusement, tous les fournisseurs d'√©quipement que je connais les ont mis en ≈ìuvre.  Il est tr√®s probable que Qualcomm am√©liorera les performances des instructions cryptographiques dans les g√©n√©rations futures. <br><br>  ChaCha20-Poly1305 est un algorithme plus g√©n√©ral con√ßu de mani√®re √† mieux utiliser les modules SIMD larges.  Qualcomm n'a que 128 bits NEON SIMD, Broadwell a 256 bits AVX2 et Skylake a 512 bits AVX-512.  Cela explique pourquoi Skylake avec une telle marge reste en t√™te dans l'√©valuation du travail avec un seul noyau.  Dans le test de tous les c≈ìurs, en m√™me temps, l'√©cart de Skylake par rapport au reste a √©t√© r√©duit, car il devrait r√©duire la fr√©quence d'horloge lors de l'ex√©cution des charges de travail AVX-512.  Lors de l'ex√©cution de l'AVX-512 sur tous les c≈ìurs, la fr√©quence de base diminue √† 1,4 GHz.  Gardez cela √† l'esprit si vous m√©langez AVX-512 et un autre code. <br><br>  La conclusion concernant la cryptographie sym√©trique est que m√™me si Skylake est en t√™te, Broadwell et Falkor ont montr√© de tr√®s bons r√©sultats, ayant des performances assez √©lev√©es pour les cas r√©els, √©tant donn√© que de notre c√¥t√©, RSA consomme plus de temps processeur que tous les autres algorithmes cryptographiques combin√©s . <br><br><h2>  Compression (compression) </h2><br>  Le prochain test que je voulais faire √©tait la compression.  Pour deux raisons.  Tout d'abord, il s'agit d'une charge de travail importante, car plus la compression est bonne, moins il y a de lacunes dans les capacit√©s, et cela permet une livraison plus rapide du contenu au client.  Deuxi√®mement, il s'agit d'une charge de travail de mauvaise pr√©diction de branche haute fr√©quence tr√®s exigeante. <br><br>  √âvidemment, le premier test sera la populaire biblioth√®que zlib.  Chez Cloudflare, nous utilisons une version am√©lior√©e de la biblioth√®que optimis√©e pour les processeurs Intel 64 bits, et bien qu'elle soit √©crite principalement en C, elle utilise certaines fonctionnalit√©s int√©gr√©es sp√©cifiques √† Intel.  Il serait injuste de comparer cette version optimis√©e avec le zlib d'origine.  Mais ne vous inqui√©tez pas, un petit effort et j'ai adapt√© la biblioth√®que pour qu'elle fonctionne sur l'architecture ARMv8, en utilisant les propri√©t√©s NEON et CRC32.  De plus, sa vitesse est 2 fois sup√©rieure √† celle d'origine, pour certains fichiers. <br><br>  Le deuxi√®me test est la nouvelle biblioth√®que brotli, √©crite en C et permettant l'utilisation de conditions √©gales pour toutes les plateformes. <br><br>  Tous les tests ont √©t√© effectu√©s sur HTML blog.cloudflare.com, en m√©moire, de la m√™me mani√®re que NGINX effectue la compression de streaming.  Sauf si la version sp√©cifique du fichier HTML fait 29329 octets, ce qui est un bon indicateur, car il correspond √† la taille de la plupart des fichiers que nous compressons.  Le test de compression parall√®le est la compression parall√®le de plusieurs fichiers en m√™me temps, la compression unique est la compression d'un fichier en plusieurs flux, similaire au fonctionnement de NGINX. <br><br>  <b>gzip</b> <br><br><img src="https://habrastorage.org/webt/jz/ns/mo/jznsmosepbzqy5mykgygmspskhc.png"><br><br><img src="https://habrastorage.org/webt/mq/cw/rm/mqcwrmjprwyfhogfakh9rez8yas.png"><br><br>  En utilisant gzip au niveau du noyau unique, Skylake gagne sans aucun doute.  Avec une fr√©quence inf√©rieure √† Broadwell, Skylake b√©n√©ficie d'une exposition moindre √† la mauvaise pr√©diction des branches.  Le noyau Falkor n'est pas loin derri√®re.  Au niveau du syst√®me, Falkor fonctionne beaucoup mieux avec plus de c≈ìurs.  Remarquez comment gzip √©volue bien sur plusieurs c≈ìurs. <br><br>  <b>Brotli</b> <br><br>  Avec brotli sur un noyau, la situation est similaire √† la pr√©c√©dente.  Skylake est le plus rapide, mais Falkor n'est pas loin derri√®re.  Et sur la norme 9, Falkor est encore plus rapide.  Le Standard 4 Brotli est tr√®s similaire au gzip niveau 5, tandis que la compression r√©elle est toujours meilleure (8010B contre 8187B). <br><br>  Lors de la compression sur plusieurs c≈ìurs, la situation devient un peu confuse.  Pour les niveaux 4, 5 et 6, brotli √©volue tr√®s bien.  Aux niveaux 7 et 8, il commence √† chuter de mani√®re productive sur le c≈ìur, s'enfon√ßant au fond au niveau 9, o√π nous obtenons 3 fois moins de productivit√© de tous les c≈ìurs par rapport √† un. <br><br>  √Ä mon avis, cela est d√ª au fait qu'√† chaque niveau, brotli commence √† consommer plus de m√©moire et bloque le cache.  Les indicateurs commencent d√©j√† √† se redresser aux niveaux 10 et 11. <br><br><img src="https://habrastorage.org/webt/fj/8b/h_/fj8bh_k2ztukrrvk5mrnsewzh1m.png"><br><br><img src="https://habrastorage.org/webt/gc/re/b9/gcreb99cb-d-ve1ofgmz5rkgity.png"><br><br>  En conclusion, Falkor a gagn√©, √©tant donn√© que la compression dynamique ne d√©passera pas le niveau 7. <br><br><h2>  Golang </h2><br>  Golang est une autre langue tr√®s importante pour Cloudflare.  C'est √©galement l'une des premi√®res langues √† prendre en charge ARMv8, vous pouvez donc vous attendre √† de bonnes performances.  J'ai utilis√© des tests int√©gr√©s, mais je les ai modifi√©s pour plusieurs goroutines. <br><br>  <b>Allez crypto</b> <br><br>  Je voudrais commencer par des tests de performances de chiffrement.  Gr√¢ce √† OpenSSL, nous avons d'excellentes donn√©es sources, et il sera tr√®s int√©ressant de voir √† quel point la biblioth√®que Go est bonne. <br><br><img src="https://habrastorage.org/webt/xy/fj/pf/xyfjpfgcv19xdvypw4tu35ejyrm.png"><br><img src="https://habrastorage.org/webt/9v/xg/tr/9vxgtrubcqgpmuemhspyvlzzr9w.png"><br><img src="https://habrastorage.org/webt/tv/gk/11/tvgk11dl9zsya8m1bvz6cmzwwqk.png"><br><img src="https://habrastorage.org/webt/cn/ws/ue/cnwsuep6om3uhmwimyyxx1oj0yk.png"><br><br>  En ce qui concerne Go crypto, l'ARM et Intel ne sont m√™me pas dans la m√™me cat√©gorie de poids.  Go a un code assembleur hautement optimis√© pour ECDSA, AES-GCM et Chacha20-Poly1305 sur Intel.  Il existe √©galement des fonctions math√©matiques optimis√©es utilis√©es dans les calculs RSA.  ARMv8 n'a pas tout cela, ce qui le place dans une position tr√®s d√©savantageuse. <br><br>  N√©anmoins, l'√©cart peut √™tre r√©duit avec relativement peu d'efforts, et nous savons qu'avec une optimisation appropri√©e, les performances peuvent √™tre comparables √† OpenSSL.  M√™me des changements tr√®s mineurs, tels que la mise en ≈ìuvre de la fonction addMulVVW dans l'assemblage, ont conduit √† d√©cupler les performances RSA, pla√ßant Falkor (avec un score de 8009) au-dessus de Broadwell et Skylake. <br><br>  Il convient de noter une autre chose int√©ressante - sur Skylake, le code Go Chacha20-Poly1305 qui utilise AVX2 fonctionne de la m√™me mani√®re que le code OpenSSL AVX512.  Encore une fois, cela est d√ª au fait que l'AVX2 fonctionne √† des fr√©quences d'horloge plus √©lev√©es. <br><br>  <b>Allez gzip</b> <br><br>  Voyons maintenant les performances Go de gzip.  Il existe √©galement un excellent guide pour un code assez bien optimis√©, et nous pouvons le comparer avec Go.  Dans le cas de la biblioth√®que gzip, il n'y a pas d'optimisations sp√©cifiques pour Intel. <br><br><img src="https://habrastorage.org/webt/q5/r4/zi/q5r4zife3uy5oyx7xibltas7z0i.png"><br><br><img src="https://habrastorage.org/webt/np/lh/zw/nplhzwlsbteyuqd5rys9n_atkea.png"><br><br>  Les performances de Gzip sont plut√¥t bonnes.  Les performances sur un seul c≈ìur Falkor accusent un retard significatif par rapport aux deux processeurs Intel, mais au niveau du syst√®me, il a r√©ussi √† battre Broadwell et situ√© sous Skylake.  Puisque nous savons d√©j√† que Falkor est sup√©rieur aux deux autres processeurs lors de l'ex√©cution de C. Cela ne peut signifier qu'une chose - le backend Go pour ARMv8 n'est toujours pas finalis√© par rapport √† gcc. <br><br>  <b>Go regexp</b> <br><br>  Regexp est largement utilis√© dans une vari√©t√© de t√¢ches, car ses performances sont √©galement extr√™mement importantes.  J'ai ex√©cut√© des tests int√©gr√©s sur des flux de 32 ko. <br><br><img src="https://habrastorage.org/webt/eb/lh/hw/eblhhwqsqlkorgzoskrl1ftjqew.png"><br><br><img src="https://habrastorage.org/webt/ck/so/w-/cksow-2fqsy9q71ayf82_girtme.png"><br><br><img src="https://habrastorage.org/webt/iu/gh/ma/iughmavke4vuhnid0wggsclwgc8.png"><br><br><img src="https://habrastorage.org/webt/hl/zu/39/hlzu39oybk_wktuewhnpnfxm7ia.png"><br><br>  Sur Falkor, les performances de Go regexp ne sont pas tr√®s bonnes.  Il prend la deuxi√®me place sur les tests moyens et complexes, gr√¢ce √† un plus grand nombre de c≈ìurs, mais Skylake est cependant beaucoup plus rapide. <br><br>  Un examen plus approfondi du processus montre que beaucoup de temps est consacr√© √† la fonction bytes.IndexByte.  Cette fonction a une impl√©mentation d'assembleur pour amd64 (runtime.indexbytebody), mais l'impl√©mentation principale est pour Go.  Lors des tests l√©gers, regexp a pass√© encore plus de temps sur cette fonctionnalit√©, ce qui explique l'√©cart plus large. <br><br>  <b>Allez cordes</b> <br><br>  Une autre biblioth√®que importante pour le serveur Web est Go strings.  J'ai test√© uniquement la classe Replacer principale. <br><br><img src="https://habrastorage.org/webt/36/tv/ho/36tvhoaz63ev1njmhzck3zw00iu.png"><br><br><img src="https://habrastorage.org/webt/ii/e9/pv/iie9pvryauw1fjclroxrwt4mnn0.png"><br><br>  Dans ce test, Falkor est √† nouveau √† la tra√Æne, m√™me derri√®re Broadwell.  Un examen plus approfondi r√©v√®le un long s√©jour dans la fonction runtime.memmove.  Tu sais quoi?  Elle a un code assembleur parfaitement optimis√© pour amd64 qui utilise AVX2, mais seulement l'assembleur le plus simple qui copie 8 octets √† la fois.  En modifiant 3 lignes dans ce code et en utilisant les instructions LDP / STP (chargement par paire / stockage par paire), vous pouvez copier 16 octets √† la fois, ce qui a augment√© les performances memmove de 30%, ce qui, √† son tour, acc√©l√®re EscapeString et UnescapeString de 20%.  Et ce n'est que la pointe de l'iceberg. <br><br>  <b>Allez conclusion</b> <br><br>  Le support de Go sur aarch64 est assez d√©cevant.  Je suis heureux d'annoncer que tout a √©t√© compil√© et a fonctionn√© sans probl√®me, mais sur le plan des performances, cela pourrait √™tre mieux.  On a l'impression que la majeure partie de l'effort a √©t√© d√©pens√©e sur le backend du compilateur, et la biblioth√®que √©tait presque intacte.  Il existe de nombreuses optimisations de bas niveau, par exemple mon correctif addMulVVW, qui a pris 20 minutes.  Qualcomm et d'autres fournisseurs d'ARMv8 ont l'intention de d√©penser des ressources techniques importantes pour rectifier la situation, mais n'importe qui peut r√©ellement contribuer √† Go.  Par cons√©quent, si vous voulez laisser votre empreinte sur l'histoire, le moment est venu. <br><br><h2>  Luajit </h2><br>  Lua est la colle qui maintient Cloudflare ensemble. <br><br><img src="https://habrastorage.org/webt/zk/pv/7t/zkpv7t0xtx50qqqyyqnhanp0ydm.png"><br><br><img src="https://habrastorage.org/webt/we/4n/mv/we4nmvud-5vh6l7wds4cnak1fmq.png"><br><br>  √Ä l'exception du test binary_trees, les performances de LuaJIT sur ARM sont tr√®s comp√©titives.  Il remporte deux tests et le troisi√®me se met nez √† nez avec ses concurrents. <br><br>  Il convient de noter que le test binary_trees est extr√™mement important, car il implique de nombreux cycles d'allocation de m√©moire et de r√©cup√©ration de place.  Cela n√©cessite une r√©flexion plus approfondie √† l'avenir. <br><br><h2>  Nginx </h2><br>  En tant que charge de travail NGINX, j'ai d√©cid√© d'en cr√©er un qui ressemblerait au serveur r√©el. <br><br>  J'ai configur√© un serveur qui sert le fichier HTML utilis√© dans le test gzip sur https en utilisant la suite de chiffrement ECDHE-ECDSA-AES128-GCM-SHA256. <br><br>  Il utilise √©galement LuaJIT pour rediriger la demande entrante, supprimer tous les sauts de ligne et les espaces suppl√©mentaires du fichier HTML lors de l'ajout d'un horodatage.  Le HTML est ensuite compress√© √† l'aide de brotli 5. <br><br>  Chaque serveur a √©t√© configur√© pour fonctionner avec autant d'utilisateurs que de processeurs virtuels.  40 pour Broadwell, 48 pour Skylake et 46 pour Falkor. <br><br>  En tant que client pour ce test, j'ai utilis√© le programme hey fonctionnant sur 3 serveurs Broadwell. <br><br>  En m√™me temps que le test, nous avons pris des relev√©s de puissance des blocs BMC correspondants de chaque serveur. <br><br><img src="https://habrastorage.org/webt/ch/9p/mv/ch9pmvqb1ro5yjn-cve_pw70dio.png"><br><br>  Avec la charge de travail, NGINX Falkor a trait√© presque le m√™me nombre de demandes que le serveur Skylake, et les deux √©taient nettement en avance sur Broadwell.  Les relev√©s de puissance tir√©s du BMC montrent que cela s'est produit lorsque l'√©nergie √©tait consomm√©e moiti√© moins que les autres processeurs.  Cela signifie que Falkor a r√©ussi √† obtenir 214 demandes / W, Skylake - 99 demandes / W et Broadwell - 77 demandes / W. <br><br>  J'ai √©t√© surpris que Skylake et Broadwell consomment environ la m√™me quantit√© d'√©nergie, √©tant donn√© qu'ils sont produits de la m√™me mani√®re, et Skylake a plus de c≈ìurs. <br><br>  La faible consommation d'√©nergie de Falkor n'est pas surprenante, car les processeurs Qualcomm sont connus pour leur haute efficacit√© √©nerg√©tique, ce qui leur a permis d'occuper une position dominante sur le march√© des processeurs pour appareils mobiles. <br><br><h2>  Conclusion </h2><br>  L'√©chantillon Falkor que nous avons obtenu m'a vraiment impressionn√©.  Il s'agit d'une √©norme am√©lioration par rapport aux tentatives pr√©c√©dentes de serveurs bas√©s sur ARM.  Bien s√ªr, en comparant le c≈ìur avec le c≈ìur, Intel Skylake est bien meilleur, mais si nous regardons au niveau du syst√®me, les performances deviennent tr√®s attrayantes. <br><br>  La version de production du Centriq SoC contiendra 48 c≈ìurs Falkor fonctionnant √† des fr√©quences allant jusqu'√† 2,6 GHz, ce qui donne une augmentation potentielle des performances de 8%. <br><br>  √âvidemment, le Skylake que nous testons n'est pas un produit phare comme Platinum avec ses 28 c≈ìurs, mais ces 28 c≈ìurs co√ªtent cher et consomment 200 W, tandis que nous essayons d'optimiser nos co√ªts et d'augmenter les performances de 1 watt. <br><br>  Pour le moment, je suis tr√®s pr√©occup√© par les mauvaises performances du langage Go, mais cela changera d√®s que les serveurs bas√©s sur ARM occuperont leur niche sur le march√©. <br><br>  Les performances C et LuaJIT sont tr√®s comp√©titives, et dans de nombreux cas sup√©rieures √† Skylake.  Dans presque tous les tests, Falkor s'est av√©r√© √™tre un digne rempla√ßant de Broadwell. <br><br>  Le plus gros avantage de Falkor pour le moment est sa faible consommation d'√©nergie.  Bien que le TDP soit de 120W, lors de mes tests ce chiffre n'a jamais d√©pass√© 89W (pour les tests go).  A titre de comparaison, Skylake et Broadwell ont d√©pass√© 160W, tandis que leur TDP est de 170W. <br><br>  <b>Comme une publicit√©.</b>  Ce ne sont pas que des serveurs virtuels!  Ce sont des VPS (KVM) avec des disques d√©di√©s, ce qui ne peut pas √™tre pire que des serveurs d√©di√©s, et dans la plupart des cas - mieux!  <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Nous avons cr√©√© VPS (KVM) avec des disques d√©di√©s aux Pays-Bas et aux √âtats-Unis</a> (configurations VPS (KVM) - E5-2650v4 (6 c≈ìurs) / 10 Go DDR4 / 240 Go SSD ou 4 To HDD / 1 Gbit / s 10 To disponibles √† un prix unique - √† partir de 29 $ / mois , des options avec RAID1 et RAID10 sont disponibles)</b> , ne manquez pas la chance de passer une commande pour un nouveau type de serveur virtuel, o√π toutes les ressources vous appartiennent, comme sur un serveur d√©di√©, et le prix est beaucoup plus bas, avec un mat√©riel beaucoup plus productif! <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Comment construire l'infrastructure du b√¢timent.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">classe utilisant des serveurs Dell R730xd E5-2650 v4 co√ªtant 9 000 euros pour un sou?</a>  <b>Dell R730xd 2 fois moins cher?</b>  Nous avons seulement <b><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2 x Intel Dodeca-Core Xeon E5-2650v4 128 Go DDR4 6x480 Go SSD 1 Gbps 100 TV √† partir de 249 $</a> aux Pays-Bas et aux √âtats-Unis!</b> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr408741/">https://habr.com/ru/post/fr408741/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr408731/index.html">Robots militaires et leurs d√©veloppeurs. 2e partie</a></li>
<li><a href="../fr408733/index.html">Un squelette, c'est bien, et deux, c'est mieux: des exosquelettes modernes</a></li>
<li><a href="../fr408735/index.html">Le robot humano√Øde √† 800 $ n'√©tait pas de la taille d'un √™tre humain. D√©sol√© ...</a></li>
<li><a href="../fr408737/index.html">Balances intelligentes QardioBase 2: de mieux en mieux</a></li>
<li><a href="../fr408739/index.html">La photosynth√®se supraconductrice ou comment vider le cheval sph√©rique sous vide</a></li>
<li><a href="../fr408743/index.html">Le plus petit ordinateur portable de jeu GPD WIN - De quoi est-il capable et qui en a besoin?</a></li>
<li><a href="../fr408745/index.html">Mains libres, mais pas un t√©l√©phone. Maison ob√©issante quand il n'y a pas assez de mains</a></li>
<li><a href="../fr408747/index.html">L'apparition du nouveau rover, le premier vol de Falcon Heavy, doute de la fiabilit√© de Dragon et Starliner</a></li>
<li><a href="../fr408749/index.html">Joyeux anniversaire, souris d'ordinateur</a></li>
<li><a href="../fr408751/index.html">Amazon pr√©sente la plate-forme de d√©veloppement 3D, VR et AR</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>