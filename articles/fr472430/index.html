<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏿‍🤝‍🧑🏿 🧚🏻 😖 Comment nous avons choisi la base de composants pour une maison intelligente: à propos des capteurs et d'un contrôleur ☕️ 🐚 👩🏼‍🤝‍👨🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kauri développe des équipements pour les solutions IoT et écrit des logiciels pour cela. Récemment, nous avons testé avec succès le réseau Zigbee avec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons choisi la base de composants pour une maison intelligente: à propos des capteurs et d'un contrôleur</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/kauri_iot/blog/472430/">  <i>Kauri développe des équipements pour les solutions IoT et écrit des logiciels pour cela.</i>  <i>Récemment, nous avons testé avec succès le réseau Zigbee avec une carte de débogage et des capteurs, nous avons donc fait un petit guide.</i> <i><br><br></i>  <i>Parlons des critères de sélection, des fabricants, des prix, un peu grondant le marché russe.</i> <i><br></i> <br><img src="https://habrastorage.org/webt/vt/5f/fw/vt5ffwzvdfn_drf1po1oqppc_88.jpeg" alt="image"><br><a name="habracut"></a><br>  Nous avons compilé pour nous-mêmes la liste suivante de capteurs qui nous intéressent et qui sont responsables de l'indication: <br><br><ol><li>  Fuite </li><li>  La fumée </li><li>  Pénétration (contact magnétique) </li><li>  Mouvements d'objets </li><li>  Briser le verre </li></ol><br>  Ainsi que des capteurs mesurant: <br><br><ol><li>  La température </li><li>  Consommation de gaz / eau </li><li>  Consommation d'énergie </li><li>  Humidité </li></ol><br>  Parmi ceux-ci, nous avons acheté des capteurs de mouvement / lumière, d'intrusion, de fuite et de température / humidité (basés sur des solutions pour une maison intelligente - prévention du vol, du feu, des inondations). <br><br><h3>  <font color="#5dbd35">Comment avons-nous choisi un fabricant?</font> </h3><br>  Le critère de sélection le plus simple est le coût du capteur et sa disponibilité en Russie.  Le capteur lui-même est un appareil simple, différentes sociétés offrent à peu près la même qualité, nous avons donc été guidés par le prix du produit - le moins cher est le mieux.  Après tout, au final, le client paiera tout et des centaines de capteurs peuvent se rendre dans une grande maison.  Si vous payez 1000 roubles ou plus pour chacun, cela coûtera cher. <br><br><img src="https://habrastorage.org/webt/pm/ct/bg/pmctbgqz3rzdczdbsqm7w_jmdec.jpeg" alt="image"><br><br>  Un autre critère important est la consommation d'énergie (nos capteurs, par exemple, fonctionnent sur batterie).  Certains appareils sont placés dans des endroits difficiles d'accès, le remplacement constant des piles peut être un problème désagréable.  Nous avons observé des capteurs prenant en charge la technologie ZigBee, qui est la norme de communication la plus économe en énergie.  Ainsi, nos capteurs peuvent être en mode veille, consommant un minimum d'énergie, et basculer en mode réception-transmission uniquement lorsque cela est nécessaire. <br><br>  Et ZigBee, bien qu'il ait un faible taux de transfert, est considéré comme un réseau entièrement fiable, auto-réparateur, facile à déployer et à utiliser. <br><br><h3>  <font color="#5dbd35">Qui fabrique ces capteurs?</font> </h3><br>  Il existe de nombreuses entreprises, nous venons de regarder la liste.  Xiaomi est le leader - ils ont un produit bon marché, une large sélection, vous pouvez même commander sur Aliexpress.  Pourtant, les capteurs doivent être facilement accessibles et populaires. <br><br>  Les capteurs eux-mêmes sont inutiles, ils doivent être connectés au réseau.  Par conséquent, il est en outre nécessaire de décider quelle base d'élément et quel SoC zigbish choisir afin de tester cette norme de communication. <br><br>  Nous avons choisi entre les cristaux Texas Instruments et Silicon Labs.  Ensuite, ils ont commencé à regarder comment les choses se passent avec le soutien de ces microprocesseurs en Russie.  Lorsque vous commencez à comprendre leur travail, des questions techniques peuvent survenir: la documentation détaillée du fabricant vous aidera ici. <br><img src="https://habrastorage.org/webt/6t/pk/7e/6tpk7e8kpxeovlmyrupj-kuy_ks.jpeg" alt="image"><br>  Il y a aussi des composants difficiles à acheter en Russie - il n'y a pas de distributeurs directs.  Et c'est important: vous devez être en mesure de conclure un accord de partenariat: vous avez choisi un cristal et vous êtes d'accord pour acheter un lot sur une base mensuelle.  En conséquence, ils vous feront une offre spéciale à des prix, etc.  Soit dit en passant, certains fabricants peuvent «présenter» des échantillons de test lors de l'enregistrement d'un projet. <br><br>  En conséquence, nous nous sommes tournés vers les distributeurs de Silicon Labs, nous pouvons conclure un accord avec eux, les prix sont adéquats, il existe un support non seulement matériel mais aussi logiciel (toutes sortes de bibliothèques spécialisées, DLL - tout cela facilite la vie des développeurs). <br><br>  Ensuite, nous avons besoin d'une carte électronique pour travailler avec la puce.  C'est un long processus.  Et pour que les programmeurs puissent immédiatement se mettre au travail, Silicon Labs fournit notamment des cartes de débogage (un package complet pour les développeurs), des pilotes. <br><br><h3>  <font color="#5dbd35">À propos du contrôleur</font> </h3><br><img src="https://habrastorage.org/webt/v2/a2/vw/v2a2vwie7_pk_0as8vrqbfv-kq0.jpeg" alt="image"><br><br>  Le contrôleur collecte des données sur le fonctionnement des capteurs et les envoie au serveur pour un traitement ultérieur.  Nous avons fabriqué notre propre contrôleur modulaire Kauri afin qu'il puisse fonctionner avec autant de normes de communication modernes que possible pour différentes industries.  De la logistique, où LoRa est principalement utilisé, à la vente au détail, où la technologie RFID est nécessaire. <br><br>  Il est également important pour nous que le contrôleur fonctionne de manière autonome.  Et, même s'il y a des problèmes avec le réseau, la maison doit rester «intelligente» et sûre.  Les contrôleurs Xiaomi, par exemple, ne fournissent pas une telle solution.  Ils transmettent toutes les informations aux serveurs en Chine (au fait, les informations sur l'emplacement du logement peuvent également y voler). <br><br>  Le contrôleur Kauri gère tous les appareils sur le LAN ZigBee à l'aide de scripts Python.  Par conséquent, en cas de problèmes avec Internet, le système continuera à exécuter correctement ses tâches. <br><br>  La «boîte» pour le contrôleur lui-même - le boîtier - est fabriquée par de nombreuses entreprises.  Au moment de le choisir, il vaut mieux partir de la sphère d'exploitation - une rue, une maison.  Si le contrôleur est dans la rue, sélectionnez IP au moins 65 (pour résister aux pluies).  Le contrôleur pour les locaux (maison, usine, entrepôt) est sélectionné avec IP40.  Si nous avons besoin d'un appareil scellé (pour travailler sous l'eau) - sélectionnez IP66. <br><br>  Lors du choix d'un logement pour la pièce, vous devez faire attention à son apparence, il doit être esthétique dans la maison.  Pour le contrôleur, nous utilisons le processeur de la famille iMX 8M, Cortex A53. <br><br><h3>  <font color="#5dbd35">À propos de la sécurité</font> </h3><br><img src="https://habrastorage.org/webt/6l/zw/q5/6lzwq5yggvibvrskndaenezps1u.jpeg" alt="image"><br><br>  Nous avons pris la carte de débogage, le capteur et le programmeur a reconstruit le réseau Zigbee.  Ensuite, nous avons vérifié si les capteurs sont apparus sur le réseau et s'ils ont réagi normalement.  Et ici, nous avons pensé à la sécurité.  Le réseau ZigBee lui-même assure la protection des données cryptographiques. <br><br>  Le tableau de débogage est le coordinateur du réseau Zigbee.  Le réseau peut être relativement ouvert (les clés de sécurité sont échangées lorsqu'un nouveau capteur est connecté) et fermé (aucune clé n'est échangée, c'est-à-dire que la clé de sécurité souhaitée est cousue dans le capteur lui-même). <br><br>  L'inconvénient d'un réseau ouvert est que si quelqu'un au moment de la connexion peut intercepter la clé, le décryptage de toutes les informations transmises n'est pas difficile.  Et cela est particulièrement dangereux en ce qui concerne le travail de l'usine, par exemple. <br><br>  Dans notre cas, les paramètres seront définis au niveau de la configuration du réseau, ce qui signifie que le client choisira la méthode de connexion des capteurs et le type de sécurité. <br><br><h3>  <font color="#5dbd35">À propos de l'industrie russe et étrangère</font> </h3><br>  Nous avons utilisé l'élément de base de la production étrangère.  En Russie, malheureusement, ils ne fabriquent pas de composants appropriés.  Toute la technologie ZigBee, microprocesseurs, matrices - tout cela appartient aux Américains. <br><br>  En Russie, la microélectronique n'est pratiquement pas développée, pas même les résistances.  La plupart des composants nationaux sont produits pour l'industrie spatiale, et tout cela coûte de l'argent fou.  Et en tout cas, cela ne convient pas à nos décisions. <br><br><h3>  <font color="#5dbd35">Où avez-vous commandé et combien a-t-il coûté?</font> </h3><br>  Il s'agissait d'un achat régulier pour un individu (sans contrat) au détail dans une boutique en ligne régulière.  En termes de coût, cela s'est avéré comme ceci: <br><br><ul><li>  Un capteur de mouvement coûte 989 roubles </li><li>  Fenêtre et capteur d'ouverture de fenêtre - 989 roubles </li><li>  Fuites d'eau - 929 roubles </li><li>  Humidité de la température - 700 roubles </li></ul><br>  Mais nous l'avons acheté pour nous-mêmes au bureau pour le tester.  Sur le même Aliexpress, ces capteurs peuvent être achetés à moitié prix. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr472430/">https://habr.com/ru/post/fr472430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr472418/index.html">Comment conserver les droits sur le développement personnalisé</a></li>
<li><a href="../fr472420/index.html">Rendre l'interface plus réactive grâce à la promesse différée</a></li>
<li><a href="../fr472422/index.html">Sber X RamblerFront & Meet Up</a></li>
<li><a href="../fr472426/index.html">Semaine de la sécurité 43: La vie secrète des Hanipots IoT</a></li>
<li><a href="../fr472428/index.html">Opérateur Tarantool Kubernetes</a></li>
<li><a href="../fr472432/index.html">Python 3.8: Quoi de neuf et comment l'utiliser?</a></li>
<li><a href="../fr472434/index.html">Mettez à jour vos versions</a></li>
<li><a href="../fr472438/index.html">Comment les procurations sont utilisées dans la sécurité de l'information: 6 cas d'utilisation pratiques</a></li>
<li><a href="../fr472440/index.html">Un jour au Joker 2019</a></li>
<li><a href="../fr472442/index.html">La situation: tout le monde parle du retour des formats audio oubliés - pourquoi ils sont destinés à rester des niches</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>