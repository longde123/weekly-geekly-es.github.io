<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСз ЁЯМ▒ тЩВя╕П рд╢реАрдкрдбреЙрдЧ ЁЯСиЁЯП┐тАНЁЯМ╛ ЁЯд╕ЁЯП╛ ЁЯСйтАНЁЯСйтАНЁЯСз</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╢реАрдкрдбреЙрдЧ рдПрдХ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬреЛ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЛ рд╡рд┐рддрд░рд┐рдд рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред рдЗрд╕рдХрд╛ рд╡рд┐рдХрд╛рд╕ 2009 рдореЗрдВ рдЬрд╛рдкрд╛рдиреА рдХрдВрдкрдиреА рдирд┐рдкреНрдкреЙрди рдЯреЗрд▓реАрдЧреНрд░рд╛рдл рдФрд░ рдЯреЗрд▓реАрдлреЛрди рдХреЙ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рд╢реАрдкрдбреЙрдЧ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/412739/"><p><img src="https://habrastorage.org/webt/ru/g3/9i/rug39i1kkn-c4ack--isbvvzjma.jpeg"></p><br><p>  <strong>рд╢реАрдкрдбреЙрдЧ</strong> рдПрдХ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╕рд┐рд╕реНрдЯрдо рд╣реИ рдЬреЛ рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрдиреЛрдВ рдХреЛ рд╡рд┐рддрд░рд┐рдд рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕рдХрд╛ рд╡рд┐рдХрд╛рд╕ 2009 рдореЗрдВ рдЬрд╛рдкрд╛рдиреА рдХрдВрдкрдиреА <em>рдирд┐рдкреНрдкреЙрди рдЯреЗрд▓реАрдЧреНрд░рд╛рдл рдФрд░ рдЯреЗрд▓реАрдлреЛрди рдХреЙрд░реНрдкреЛрд░реЗрд╢рди рдХреЗ</em> рдбреЗрд╡рд▓рдкрд░реНрд╕ рдиреЗ рд╢реБрд░реВ рдХрд┐рдпрд╛ред  <strong>рд╢реАрдкрдбреЙрдЧ</strong> GPL2 рд▓рд╛рдЗрд╕реЗрдВрд╕ рдХреЗ рддрд╣рдд рдПрдХ рдУрдкрди рд╕реЛрд░реНрд╕ рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╣реИред  рдирд╡реАрдирддрдо рд╕рдВрд╕реНрдХрд░рдг 0.9.3, рдирд╡рдВрдмрд░ 2015 рдореЗрдВ рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЧрдпрд╛, рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдЙрдкрдпреЛрдЧ <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">1</a></sup> рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рд╕рдВрд╕реНрдХрд░рдг 1.0 рдХреА рд╡рд┐рд░рд╛рд╕рдд рд╣реЛрдЧреА <sup><a name="cite_ref-1"></a></sup>  ред  <em>(рдкрд╣рд▓реЗ рд╣реА рдмрди рдЧрдпрд╛ рд╣реИ - рд▓рдЧрднрдЧред)</em> </p><br><blockquote>  рд░реБрдЪрд┐ рдХреЗ рд▓рд┐рдП, рдЕрдЧрд╕реНрдд 2010 рдореЗрдВ рдбреЗрд╡рд▓рдкрд░реНрд╕ рджреНрд╡рд╛рд░рд╛ рдкрд╣рд▓рд╛ рд╕рдВрд╕реНрдХрд░рдг (0.1.0) рдЬрд╛рд░реА рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ - рдФрд░ рд╕рд╛рде рд╣реА, рдореБрдЦреНрдп QEMU рд╡рд┐рдХрд╛рд╕ рд╢рд╛рдЦрд╛ рдореЗрдВ рднреЗрдбрд╝ рдХреА рдЦрд╛рд▓ рдХрд╛ рд╕рдорд░реНрдерди рддреБрд░рдВрдд рд╢рд╛рдорд┐рд▓ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <a name="habracut"></a><br>  рдПрдХ рднреЗрдбрд╝ рдХреЗ рдмрдЪреНрдЪреЗ рдкрд░ рдкрд╣рд▓рд╛ рдкрд░реАрдХреНрд╖рдг рдирд╡рдВрдмрд░ 2011 <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">2</a></sup> рдореЗрдВ рдЖрдпреЛрдЬрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ <sup><a name="cite_ref-2"></a></sup>  рдФрд░ рдкрд░рд┐рдгрд╛рдо I / O рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд▓рд┐рдП рдЕрдЪреНрдЫреЗ рдереЗред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рддрдм <strong>рднреЗрдбрд╝рджреЛрдЧ</strong> рддрдВрддреНрд░ рдХреЛ <strong>рдЕрднреА рднреА</strong> рдЧрд┐рд░реА рд╣реБрдИ рдиреЛрдб рдХреА рдмрд╣рд╛рд▓реА рдХреЗ рд╕рд╛рде рд╕рдорд╕реНрдпрд╛ рдереАред  рдпрд╣ рд╕рдорд╕реНрдпрд╛ рд╢рд╛рдпрдж рдЬрд▓реНрдж рд╣реА рд╣рд▓ рд╣реЛ рдЧрдИ рдереА, рдХреНрдпреЛрдВрдХрд┐ рдЕрдиреБрдкреНрд░рдпреЛрдЧ рд╡рд┐рдХрд╛рд╕ рдмрд╣реБрдд рдЬреАрд╡рдВрдд рд╣реИ, рд▓реЗрдХрд┐рди рдЙрд╕ рд╕рдордп рдореИрдВрдиреЗ рдПрдХ рдЕрд▓рдЧ рд╕рдорд╛рдзрд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред </blockquote><br><h1 id="vozmozhnosti">  рд╕рдВрднрд╛рд╡рдирд╛рдПрдВ </h1><br><p>  рдкреНрд░рдХрд╛рд╢рд┐рдд рдкреНрд░рд╕реНрддреБрддрд┐ рдореЗрдВ <strong>рд╢реАрдкрдбреЙрдЧ рдХреЗ</strong> рдХрд╛рд░реНрдп рд╕рд┐рджреНрдзрд╛рдВрдд рдХрд╛ рдмрд╣реБрдд рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╡рд░реНрдгрди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдореИрдВ рдЦреБрдж рдХреЛ рд╕рд┐рд░реНрдл рдПрдХ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдЕрд╡рд▓реЛрдХрди рддрдХ рд╕реАрдорд┐рдд рд░рдЦреВрдВрдЧрд╛ред </p><br><p>  <strong>рдпрд╣ рд╕реНрдХреЗрд▓реЗрдмрд▓ рд╣реИ</strong> <br>  рдХреНрд▓рд╕реНрдЯрд░ рд╡реЙрд▓реНрдпреВрдо рдХреЛ рдиреЛрдб рд╕реНрддрд░ рдкрд░ рдордирдорд╛рдиреЗ рдврдВрдЧ рд╕реЗ рдмрдврд╝рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рд╕реЗ рдСрдкрд░реЗрд╢рди рдХреЗ рджреМрд░рд╛рди рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдХреНрд╖рдорддрд╛ рдФрд░ рд╕реНрдерд╛рди рдмрдврд╝ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рдиреЛрдбреНрд╕ рдХреА рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝ рдЬрд╛рддреА рд╣реИред  рдЕрдзрд┐рдХ рдиреЛрдбреНрд╕, VDI I / O рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдЬрд┐рддрдирд╛ рдЕрдзрд┐рдХ рд╣реЛрдЧрд╛ред </p><br><p>  <strong>рд╡рд╣ рд╕рд░рд▓ рд╣реИ</strong> <br>  CEPH рдЬреИрд╕реЗ рдЕрдиреНрдп рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдХреЗ рд╡рд┐рдкрд░реАрдд, рднреЗрдбрд╝ рдХрд╛ рдмрдЪреНрдЪрд╛ рд╕реАрдзреЗ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд╕рд╛рде рдХрд╛рдо рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдирд┐рд╢реНрдЪрд┐рдд рдЖрдХрд╛рд░ рдХреЗ рдмреНрд▓реЙрдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреА рд╕реЗрд╡рд╛ рдХреЗ рд▓рд┐рдП рдЕрд▓рдЧ-рдЕрд▓рдЧ рдбреЗрдореЛрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИред  рд╕рднреА рдирд┐рдпрдВрддреНрд░рдг рдПрдХ <strong>рдХреБрддреНрддреЗ рдХреЗ</strong> рдЙрдкрдХрд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬреЛ рд╕реАрдзреЗ <strong>рднреЗрдбрд╝ рдХреЗ</strong> рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рддрд╛ рд╣реИ <br>  <em>(ceph рднреА рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ - рд▓рдЧрднрдЧред)</em> </p><br><p>  <strong>рдЧрд┐рд░реЗ рд╣реБрдП рдиреЛрдб рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИ</strong> <br>  рдкреНрд░рддреНрдпреЗрдХ VDI рдореЗрдВ рдпреЗ рдмреНрд▓реЙрдХ (рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕) рд╣реЛрддреЗ рд╣реИрдВ, рдЬрд┐рдиреНрд╣реЗрдВ рдПрдХ рд╕рд╛рде рдХрдИ рдиреЛрдбреНрд╕ рдореЗрдВ рджреЛрд╣рд░рд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЙрдирдореЗрдВ рд╕реЗ рдПрдХ рдЧрд┐рд░рддрд╛ рд╣реИ, рддреЛ рдбреЗрдЯрд╛ рдЙрдкрд▓рдмреНрдз рд░рд╣рддрд╛ рд╣реИ, рдФрд░ рдЧрд┐рд░реА рд╣реБрдИ рдиреЛрдбреНрд╕ рд╕реЗ рдСрдмреНрдЬреЗрдХреНрдЯ рджреВрд╕рд░реЗ рдиреЛрдб рдХреЛ рджреЛрд╣рд░рд╛рдиреЗ рд▓рдЧрддреЗ рд╣реИрдВред </p><br><p>  <strong>рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ</strong> <br>  рд╢реАрдкрдбреЙрдЧ <strong>рд╕реНрдиреИрдкрд╢реЙрдЯ</strong> Btrfs рдХреЗ рд╕рдорд╛рди рд╣реА рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВред  рд╕рдВрд▓рдЧреНрди VDI рдмреНрд▓реЙрдХ рд╕рд╣реЗрдЬреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рдФрд░ рдирдП рдбреЗрдЯрд╛ рдХреЛ рдирдП рдмреНрд▓реЙрдХ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдХреБрдЫ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдореЗрдВ рд╕рдорд╕реНрдпрд╛рдЧреНрд░рд╕реНрдд рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><p>  <strong>рд╢реАрдкрдбреЙрдЧ SPOF рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ</strong> <br>  рдпрджрд┐ VDI рдХреЛ QEMU рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдХрдИ рд╕реНрдерд╛рдиреЛрдВ рдкрд░ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдХрдиреЗрдХреНрдЯ рд╣реЛрдиреЗ рдкрд░ рд╕рдорд╕реНрдпрд╛ рдЙрддреНрдкрдиреНрди рд╣реЛ рд╕рдХрддреА рд╣реИред  SPOF <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">3</a></sup> рдЗрд╕реЗ рд░реЛрдХ рд╕рдХрддрд╛ рдерд╛ред <sup><a name="cite_ref-3"></a></sup>  рд╢реАрдкрдбреЙрдЧ рдирд╣реАрдВ рд╣реИред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдореЗрдВрдврдХ рдХреЗ рдирдП рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ, рд╡реАрдбреАрдЖрдИ рдХреЛ рдЕрд╡рд░реБрджреНрдз рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ рддрд╛рдХрд┐ рдПрдХ рд╕реЗ рдЕрдзрд┐рдХ рдХрдиреЗрдХреНрд╢рди рдХреА рдЕрдиреБрдорддрд┐ рди рд╣реЛред </p><br><p>  <strong>рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЬреАрд╡рди рдЪрдХреНрд░</strong> <br>  VDI рдСрдмреНрдЬреЗрдХреНрдЯ рддрднреА рдбрд┐рд▓реАрдЯ рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдЬрдм рдЙрдирдХреЗ рд╕рд╛рде рдЬреБрдбрд╝реЗ рд╕рднреА рдХреНрд▓реЛрди рдФрд░ рд╕реНрдиреИрдкрд╢реЙрдЯ рдбрд┐рд▓реАрдЯ рд╣реЛ рдЬрд╛рдПрдВред  рдпрд╣ рдмрд┐рд▓рдХреБрд▓ Btrfs рдХреА рддрд░рд╣ рд╣реА рд╣реИред  рдЗрд╕рд▓рд┐рдП, рдЕрдкреНрд░рдпреБрдХреНрдд рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЛ рд╣рдЯрд╛рдиреЗ рд╕реЗ рднрдВрдбрд╛рд░рдг рдХреЗ рд▓рд┐рдП рдЬрдЧрд╣ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдкрд░реНрдпрд╛рдкреНрдд рдирд╣реАрдВ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </p><br><h1 id="demon-kommunikacii">  рд╕рдВрдЪрд╛рд░ рдбреЗрдореЙрди </h1><br><p>  рд╕реЗрдлрдб рдпрд╛ рдЧреНрд▓рд╕реНрдЯрд░рдПрдлрдПрд╕ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рднреЗрдбрд╝ рдХрд╛ рдмрдЪреНрдЪрд╛ рд╣рд╛рд╕реНрдпрд╛рд╕реНрдкрдж рд░реВрдк рд╕реЗ рдЫреЛрдЯрд╛ рд╣реИред  рдРрд╕рд╛ рдЗрд╕рд▓рд┐рдП рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╡рд╣ рд╕рднреА рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╕реНрд╡рдпрдВ рд╣рд▓ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдХрд╛рдо рдХрд░ рд░рд╣реЗ рдЕрдзрд┐рдХрддрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </p><br><p>  рдмрджрд▓реЗ рдореЗрдВ, рдпрд╣ рдПрдХ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ рднреМрддрд┐рдХ рдбрд┐рд╕реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рд╕рд╛рде рд╣реА рд╕рд╛рде рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдЫрд╛рдкреЗ рдЖрджрд┐ред </p><br><p>  рдпрд╣ рдХреЗрд╡рд▓ рдЙрди рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд╡рд┐рддрд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд░рд╡рд╛рд╣ рдХрд░рддрд╛ рд╣реИ рдЬрд┐рд╕ рдкрд░ рд╡рд╣ рдЪрд▓ рд░рд╣рд╛ рд╣реИред </p><br><p>  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдЙрд╕реЗ рдЙрд╕ рдЬрд╛рдирдХрд╛рд░реА рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдЬреЛ <strong>рд╕рдВрдЪрд╛рд░ рдбреЗрдореЛрди</strong> рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ - рдПрдХ рдкреНрд░рдореБрдЦ рдШрдЯрдХ рдЬрд┐рд╕рдХреЗ рдмрд┐рдирд╛ <strong>рд╢реАрдкрдбреЙрдЧ</strong> рдХрд╛рдо рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред </p><br><p>  <strong>рд╕рдВрдЪрд╛рд░ рдбреЗрдореЙрди</strong> - рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рдбреЗрдЯрд╛ рдХрд╛ рдЖрджрд╛рди-рдкреНрд░рджрд╛рди рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ рдкреНрд░рджрд╛рди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдпрд╣ <strong>рднреЗрдбрд╝ рдХреЗ</strong> рд░рд╛рдХреНрд╖рд╕ рдХрд░ рд░рд╣реЗ рд╣реИрдВред  рдЗрд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ, <strong>рднреЗрдбрд╝реЛрдВ рдХрд╛</strong> рдХреЗрд╡рд▓ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХреМрди рд╕реЗ рдиреЛрдб рдЬреАрд╡рд┐рдд рд╣реИрдВред </p><br><h2 id="corosync">  corosync </h2><br><p>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, <strong>рд╢реАрдкрдбреЙрдЧ</strong> рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рдиреЛрдбреНрд╕ <strong>рдХреЛрд░реЛрд╕рд┐рдВрдХ рдХреЗ</strong> рдорд╛рдзреНрдпрдо рд╕реЗ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░реЗрдВрдЧреЗред  рдпрд╣ 64 рдиреЛрдб рддрдХ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рд░реВрдк рд╕реЗ рдЗрд╕реЗ рдЕрдзрд┐рдХ рд╕реЗрд╡рд╛ рджреЗрдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП, рдЗрд╕рдХрд╛ рдЙрдкрдпреЛрдЧ 16 рдиреЛрдбреНрд╕ рддрдХ рдХреЗ рдЫреЛрдЯреЗ рд╕рдореВрд╣реЛрдВ рдХреЗ рд▓рд┐рдП рдЗрд╖реНрдЯрддрдо рд╣реИред </p><br><p>  рдЖрдорддреМрд░ рдкрд░, <strong>corosync</strong> рдкреЗрд╕рдореЗрдХрд░ рдХрд╛ рднреА рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдХреБрдЫ рдФрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред </p><br><h3 id="ustanovka-corosync-na-debian">  рдбреЗрдмрд┐рдпрди рдкрд░ corosync рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h3><br><p>  Corosync рд╡рд┐рддрд░рдг рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд╣реИ, рдФрд░ рдЗрд╕рдХреА рд╕реНрдерд╛рдкрдирд╛ рд╕рд░рд▓ рд╣реИ: </p><br><pre><code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> install corosync libcoro<span class="hljs-built_in"><span class="hljs-built_in">sync-common4</span></span></code> </pre> <br><h3 id="nastroyka-corosync">  Corosync рд╕реЗрдЯрдЕрдк </h3><br><h2 id="zookeeper">  рдЪрд┐рдбрд╝рд┐рдпрд╛рдШрд░ рд╕рдВрдЪрд╛рд▓рдХ </h2><br><p>  <strong>рд╢реАрдкрдбреЙрдЧ</strong> рдбреЗрд╡рд▓рдкрд░реНрд╕ рдмрдбрд╝реЗ рд╕рдореВрд╣реЛрдВ рдХреЗ рд▓рд┐рдП <strong>рдЬрд╝реБрдХреАрдкрд░</strong> рдХреЗ рдЙрдкрдпреЛрдЧ рдХреА рд╕рд▓рд╛рд╣ рджреЗрддреЗ рд╣реИрдВред  рдбреЗрд╡рд▓рдкрд░реНрд╕ рдХреЗ рдЕрдиреБрд╕рд╛рд░, 1000 рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде рдПрдХ <strong>рднреЗрдбрд╝рджреЛрдЧ</strong> рдкрд░реАрдХреНрд╖рдг рднрдВрдбрд╛рд░рдг <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">4</a></sup> рдмрдирд╛рдпрд╛ рдФрд░ рдкрд░реАрдХреНрд╖рдг рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ <sup><a name="cite_ref-4"></a></sup>  ред </p><br><h3 id="ustanovka-zookeeper-na-debian">  рдбреЗрдмрд┐рдпрди рдкрд░ рдЬрд╝реБрдХреАрдкрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </h3><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> install zookeeper zookeeperd</code> </pre> <br><p>  рдбреЗрдореЙрди рд▓реЙрдиреНрдЪрд┐рдВрдЧ редред </p><br><pre> <code class="hljs pgsql">$ /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/zookeeper/bin/zkServer.sh <span class="hljs-keyword"><span class="hljs-keyword">start</span></span></code> </pre> <br><p>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдкреЛрд░реНрдЯ рдЬрд┐рд╕ рдкрд░ рдЬрд╝реБрдХреАрдкрд░ рдЪрд▓рддрд╛ рд╣реИ 2181 рд╣реИ </p><br><p>  Zookeeper рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдЪрд▓ рд░рд╣рд╛ рд╣реИ: </p><br><pre> <code class="hljs powershell"><span class="hljs-variable"><span class="hljs-variable">$</span></span> sheep <span class="hljs-literal"><span class="hljs-literal">-c</span></span> zookeeper:IP1:PORT1,IP2:PORT2,IP3:PORT3 ...other...option...</code> </pre> <br><p>  <strong>рдЬрд╝реБрдХреАрдкрд░</strong> рдХрд╛ рдмреЛрдирд╕ рдпрд╣ рд╣реИ рдХрд┐ рдЙрд╕рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, <strong>рднреЗрдбрд╝</strong> рдХрд╛ <strong>рдмрдЪреНрдЪрд╛</strong> рдиреЛрдбреНрд╕ рдХрд╛ рдПрдХ рд╕реНрдкрд╖реНрдЯ рдФрд░ рдЖрд╕рд╛рди рд╡рд┐рдиреНрдпрд╛рд╕ рд╣реИ, рд▓реЗрдХрд┐рди рдПрдХ рд╕рдорд╕реНрдпрд╛ рд╣реИ рдХрд┐ рдбреЗрдмрд┐рдпрди рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдкреИрдХреЗрдЬ рдореЗрдВ рдЗрд╕рдХрд╛ рд╕рдорд░реНрдерди рд╢рд╛рдорд┐рд▓ рдирд╣реАрдВ рд╣реИред </p><br><p>  рдЗрд╕рд▓рд┐рдП, рдЬрд╝реБрдХреАрдкрд░ рд╕рдорд░реНрдерди рдХреЗ рд╕рд╛рде рдПрдХ рднреЗрдбрд╝ рдХрд╛ рдмрдЪреНрдЪрд╛ рдкрд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рдЗрд╕реЗ рд╕реНрд░реЛрдд рдХреЛрдб рд╕реЗ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рд╣рд╛рд▓рд╛рдБрдХрд┐ рдореИрдВ рдЗрд╕ рдмрд╛рдд рд╕реЗ рдЗрдВрдХрд╛рд░ рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рдХрд┐ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рд╕реНрдерд┐рддрд┐ рдЕрд▓рдЧ рд╣реЛ рд╕рдХрддреА рд╣реИред <br>  <em>(рдЬрд╝реБрдХреАрдкрд░ рд╕рдорд░реНрдерди рдХреЛ рдЕрднреА рднреА рд╕реНрд░реЛрдд рд╕реЗ рд╕рдВрдХрд▓рди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ - рд▓рдЧрднрдЧред)</em> </p><br><h1 id="nastroyka-demona-sheep">  рднреЗрдбрд╝ рдбреЗрдорди рдХреА рд╕реНрдерд╛рдкрдирд╛ </h1><br><p>  рдиреЛрдб рднреЗрдбрд╝рдкрд╛рд▓рдХ рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рдмрди рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рдСрдмреНрдЬреЗрдХреНрдЯ рдореИрдиреЗрдЬрд░, <strong>рднреЗрдбрд╝</strong> рдбреЗрдореЙрди, рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИред  рдпрд╣ рд╣рдореЗрд╢рд╛ рджреЛ рдкреНрд░рддрд┐рдпреЛрдВ рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ: </p><br><ol><li><p>  рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рдкрд╣рд▓рд╛ рдЙрджрд╛рд╣рд░рдг рдПрдХ рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд╢реБрд░реВ рд╣реЛрддрд╛ рд╣реИ, рдЬреЛ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЗ I / O рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, QEMU рдмреНрд▓реЙрдХ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рд╕реЗ), рд▓рдХреНрд╖реНрдп рдиреЛрдбреНрд╕ рдХреА рдЧрдгрдирд╛ рдХрд░рддрд╛ рд╣реИ рдФрд░ рдЙрдирдХреЗ рдмреАрдЪ рдЖрдЧреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рд▓рд┐рдП рдЕрдиреБрд░реЛрдз рднреЗрдЬрддрд╛ рд╣реИред  рдпрд╣реА рд╣реИ, рдпрд╣ рдХрдИ рдиреЗрдЯрд╡рд░реНрдХ рдХрдиреЗрдХреНрд╢рди рд╕реНрдерд╛рдкрд┐рдд рдХрд░рддрд╛ рд╣реИред </p><br></li><li>  рдПрдХ рдЕрдиреНрдп рд╕реНрдерд╛рдиреАрдп рд╡рд╕реНрддреБ рдкреНрд░рдмрдВрдзрдХ ( <strong>рдСрдмреНрдЬреЗрдХреНрдЯ рдореИрдиреЗрдЬрд░</strong> ) рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ </li></ol><br><p>  рднреЗрдбрд╝ рдбреЗрдорди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдкреИрд░рд╛рдореАрдЯрд░ рд░рдирдЯрд╛рдЗрдо рдкрд░ рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рддрд░реНрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдкрд╛рд░рд┐рдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдпрджрд┐ рдХреЛрдИ рдирд╣реАрдВ рд╣реИ, рддреЛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдорд╛рдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рдХреЗ рд╕рд╛рде рдЖрдкрдХреЛ рд╕рд╛рд╡рдзрд╛рди рд░рд╣рдирд╛ рдЪрд╛рд╣рд┐рдП: </p><br><p>  <strong>рдкреЛрд░реНрдЯ рдирдВрдмрд░</strong> <br>  рдЬрдм рддрдХ рдЕрдиреНрдпрдерд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рднреЗрдбрд╝ рдХрд╛ рдбреЗрдореЙрди рдкреЛрд░реНрдЯ 7000 рдкрд░ рдЪрд▓рддрд╛ рд╣реИ </p><br><p>  <strong>рддрд┐рдЬреЛрд░реА рдХрд╛ рд░рд╛рд╕реНрддрд╛</strong> <br>  рдЬрдм рддрдХ рдЕрдиреНрдпрдерд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, shep рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ / var / lib / sheepdog рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИ, рдФрд░ VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдЗрд╕рдХреЗ <code>obj</code> рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><blockquote>  рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рд░реВрдк рд╕реЗ, рдХреБрдЫ рднреА <strong>рднреЗрдбрд╝ рдХреЗ</strong> рдХрдИ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдХреЛ рдПрдХ рдиреЛрдб рдкрд░ рдХрд╛рдо рдХрд░рдиреЗ <strong>рд╕реЗ</strong> рд░реЛрдХрддрд╛ рд╣реИ - рдореБрдЦреНрдп рд╢рд░реНрдд рдпрд╣ рд╣реИ рдХрд┐ рд╣рд░ рдХреЛрдИ рдЕрдкрдиреЗ рдкреЛрд░реНрдЯ рдирдВрдмрд░ рдФрд░ рдЕрдкрдиреЗ рд╕реНрд╡рдпрдВ рдХреЗ рднрдВрдбрд╛рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред  рдиреЛрдб рдХреЗ рдЖрдИрдкреА рдкрддреЗ рдХрд╛ рдореБрджреНрджрд╛ рд▓рдЧрднрдЧ рд╣рд▓ рд╣реЛ рдЧрдпрд╛ рд╣реИред  рдПрдХ рдЕрд▓рдЧ рдмрдВрджрд░рдЧрд╛рд╣ рдкрд░ рдЪрд▓рдиреЗ рд╡рд╛рд▓реЗ <strong>рднреЗрдбрд╝</strong> рдбреЗрдорди рдХрд╛ рдкреНрд░рддреНрдпреЗрдХ рдЪрд▓ рдЙрджрд╛рд╣рд░рдг рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдПрдХ рдореМрдЬреВрджрд╛ рдХреНрд▓рд╕реНрдЯрд░ рд╕реЗ рдЬреБрдбрд╝ рдЬрд╛рдПрдЧрд╛! <br><br>  рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдпрд╣ рд╣реИ рдХрд┐ рдкреЛрд░реНрдЯ рдирдВрдмрд░ VDI рдХрдВрдЯреЗрдирд░ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХрд╛ рд╣рд┐рд╕реНрд╕рд╛ рд╣реИред  рдЖрдкрдХреЛ рдпрд╣ рдЬрд╛рдирдирд╛ рд╣реЛрдЧрд╛ рдХрд┐ рдХреНрдпрд╛ рдЖрдк рдореМрдЬреВрджрд╛ рдХреНрд▓рд╕реНрдЯрд░ рдХреЗ рджреВрд╕рд░реЗ рдкреЛрд░реНрдЯ рдкрд░ рдЪрд▓рдиреЗ рдХреЗ рд▓рд┐рдП <strong>рднреЗрдбрд╝</strong> рдбреЗрдореЛрди рдХреЛ рдлрд┐рд░ рд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред <br><br>  рдЗрд╕рд▓рд┐рдП, рдпрджрд┐ рдЖрдк рдПрдХ рдЕрд▓рдЧ рдкреЛрд░реНрдЯ рдирдВрдмрд░ рдХреЗ рд╕рд╛рде <strong>рднреЗрдбрд╝ рдХреЗ</strong> рдбреЗрдореЙрди рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдЪрд▓рд╛рддреЗ <strong>рд╣реИрдВ</strong> , рд▓реЗрдХрд┐рди рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдЯреЛрд░ рдХреЗ рд▓рд┐рдП рд╕рдорд╛рди рдкрде рдХреЗ рд╕рд╛рде, рдЖрдк рдореМрдЬреВрджрд╛ VDI рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдЦреЛ рд╕рдХрддреЗ рд╣реИрдВред </blockquote><br><h1 id="demon-sheep-kak-shlyuz">  рдПрдХ рдкреНрд░рд╡реЗрд╢ рджреНрд╡рд╛рд░ рдХреЗ рд░реВрдк рдореЗрдВ рд░рд╛рдХреНрд╖рд╕ рднреЗрдбрд╝ </h1><br><p>  рдЙрди рдорд╢реАрдиреЛрдВ рдкрд░ рдЬрд┐рдирдореЗрдВ VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рд▓рд┐рдП рд╕реНрдЯреЛрд░реЗрдЬ рд╕реНрдкреЗрд╕ рдирд╣реАрдВ рд╣реИ, <strong>рднреЗрдбрд╝-рдмрдХрд░рд┐рдпреЛрдВ</strong> рдХреЛ <code>-G</code> рдлреНрд▓реИрдЧ рдХреЗ рд╕рд╛рде рдЧреЗрдЯрд╡реЗ рдореЛрдб рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЪрд▓рд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред </p><br><p>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╡рд┐рддрд░рд┐рдд рдХрд░рддреЗ рд╕рдордп, рд╕реНрдерд╛рдиреАрдп рднрдВрдбрд╛рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдмрд┐рд▓реНрдХреБрд▓ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛, рдФрд░ рдбреЗрдЯрд╛ рд╕реАрдзреЗ рдЕрдиреНрдп рдиреЛрдбреНрд╕ рдореЗрдВ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </p><br><h1 id="demon-sheep-kak-menedzher-obektov">  рдПрдХ рд╡рд╕реНрддреБ рдкреНрд░рдмрдВрдзрдХ рдХреЗ рд░реВрдк рдореЗрдВ рднреЗрдбрд╝ рджрд╛рдирд╡ </h1><br><p>  рджреВрд╕рд░рд╛ рдЪрд▓ рд░рд╣рд╛ рдЙрджрд╛рд╣рд░рдг, рд╕реНрдерд╛рдиреАрдп рдСрдмреНрдЬреЗрдХреНрдЯ рдкреНрд░рдмрдВрдзрдХ рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ, рдЧреЗрдЯрд╡реЗ рдХреЗ рд░реВрдк рдореЗрдВ рд╢реБрд░реВ рд╣реЛрдиреЗ рд╡рд╛рд▓реЗ рдЙрджрд╛рд╣рд░рдг рд╕реЗ I / O рдЕрдиреБрд░реЛрдз рдкреНрд░рд╛рдкреНрдд рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╕реНрдерд╛рдиреАрдп рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдЯреЛрд░реЗрдЬ ( <strong>рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдЯреЛрд░реЗрдЬ</strong> ) рдореЗрдВ r / w рд╕рдВрдЪрд╛рд▓рди рдХрд░рддрд╛ рд╣реИ </p><br><h2 id="hranilische-obektov">  рд╡рд╕реНрддреБ рднрдВрдбрд╛рд░рдг </h2><br><p>  рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, <strong>рднреЗрдбрд╝рджреЛрдЧ</strong> рдореЗрдВ VDI рд╡рд╕реНрддреБрдУрдВ рдХреЗ рд▓рд┐рдП рднрдВрдбрд╛рд░рдг рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ <code>/var/lib/sheepdog/obj</code> , рдЬрд┐рд╕рдХрд╛ рдЙрдкрдпреЛрдЧ <strong>рднреЗрдбрд╝</strong> рдбреЗрдореЙрди рджреНрд╡рд╛рд░рд╛ рдЕрдкрдиреА рдЖрдВрддрд░рд┐рдХ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдХреЗ рднрд╛рдЧ рдХреЗ рд░реВрдк рдореЗрдВ рднреА рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ - рдпрд╣ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рднрдВрдбрд╛рд░рдг рдкрде рд╣реИред </p><br><p>  рдпрджрд┐ рдЖрдк рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдХрд╣реАрдВ рдФрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдП, рддреЛ рдЖрдк рдЙрд╕ рдкрде рдХреЛ рдкрд╛рд╕ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдЬрд╣рд╛рдВ рд╕реНрдЯрд╛рд░реНрдЯрдЕрдк рдкрд░ рдПрдХ рдЕрдиреНрдп рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЛ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд░рдЦрд╛ рдЧрдпрд╛ рд╣реИред </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sheep</span></span> ... /cesta_do_p┼Щ├нpojn├йho_bodu</code> </pre> <br><p>  рд╕рдВрдкреНрд░реЗрд╖рд┐рдд рдХрд░рдиреЗ рдХреЗ рдФрд░ рднреА рддрд░реАрдХреЗ рд╣реИрдВред  <strong>рд╢реАрдкрдбреЙрдЧ</strong> рдХрд╛ рдирдпрд╛ рд╕рдВрд╕реНрдХрд░рдг рддрдерд╛рдХрдерд┐рдд рдорд▓реНрдЯреА-рдбрд┐рд╡рд╛рдЗрд╕ рддрдХрдиреАрдХ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЖрдкрдХреЛ <strong>рднреЗрдбрд╝рдЪрд╛рд▓</strong> рдХреЛ рдкреБрдирдГ рдЖрд░рдВрдн рдХрд░рдиреЗ рдХреЗ рдмрд┐рдирд╛, рдпрджрд┐ рдЖрд╡рд╢реНрдпрдХ рд╣реЛ, рддреЛ рдореЗрдореЛрд░реА рдХреНрд╖рдорддрд╛ рдХреЛ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рдмрдврд╝рд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рднрдВрдбрд╛рд░рдг рдХреНрд╖рдорддрд╛ рдмрдврд╝рд╛рдирд╛ Btrfs рдХреЗ рд╕рдорд╛рди рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sheep</span></span> ... /cesta_do_A,/cesta_do_B,/cesta_do_C</code> </pre> <br><p>  <em>(рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдкрд╣рд▓реА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЗрд╡рд▓ рдореЗрдЯрд╛рдбреЗрдЯрд╛ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рдПрдЧреА - рд▓рдЧрднрдЧ)</em> </p><br><p>  <strong>рдбреЙрдЧ рдиреЛрдб md рдХреЗ</strong> рдЬрд░рд┐рдП рдЕрддрд┐рд░рд┐рдХреНрдд рд╕реНрдЯреЛрд░реЗрдЬ рдХреЛ рднреА рдЬреЛрдбрд╝рд╛ (рдпрд╛ рд╣рдЯрд╛рдпрд╛) рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ </p><br><p>  ... </p><br><p>  рдорд▓реНрдЯреА-рдбрд┐рд╡рд╛рдЗрд╕ рджреНрд╡рд╛рд░рд╛ рдкреЗрд╢ рдХреА рдЬрд╛рдиреЗ рд╡рд╛рд▓реА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧреА рд╣реЛрддреА рд╣реИ рдЬрдм рд╕реНрдЯреЛрд░реЗрдЬ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо "рдбрд┐рдЬрд╛рдЗрди рджреНрд╡рд╛рд░рд╛" (Btrfs рдпрд╛ FFS рдХреЗ рд╡рд┐рдкрд░реАрдд) рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рд╡рд╕реНрддреБрдУрдВ, рдЙрдирдХреЗ рдЧреБрдгреЛрдВ, рдорд╛рдкрджрдВрдбреЛрдВ рдФрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рд╡рд┐рдХрд▓реНрдк рдПрдХ рдЖрднрд╛рд╕реА рдорд╢реАрди рдХреЗ IO рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдХреЛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд░реВрдк рд╕реЗ рдкреНрд░рднрд╛рд╡рд┐рдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред </p><br><blockquote>  рдорд▓реНрдЯреА-рдбрд┐рд╡рд╛рдЗрд╕ рддрдХрдиреАрдХ рдХреЗ рд▓рд┐рдП рдлрд╝рд╛рдЗрд▓ рдкрдХреНрд╖ рдкрд░ рдЙрдиреНрдирдд рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ, рдЬреЛ рдХрд┐ рдЖрдзреБрдирд┐рдХ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЬреИрд╕реЗ рдХрд┐ btrfs <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">5 рдХреЗ</a></sup> рд▓рд┐рдП рдХреЛрдИ рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИ <sup><a name="cite_ref-5"></a></sup>  рдпрд╛ ext4ред  рд▓реЗрдХрд┐рди рдХреБрдЫ рдкреБрд░рд╛рдиреЗ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдЬреИрд╕реЗ reiserfs рдпрд╛ ext2 <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">6</a></sup> <sup><a name="cite_ref-6"></a></sup>  рдЙрдирдХрд╛ рд╕рдорд░реНрдерди рдордд рдХрд░реЛред <br><br>  рдпрджрд┐ рдЖрдк рдПрдХ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдЬреЛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╡рд┐рд╕реНрддрд╛рд░рд┐рдд рд╡рд┐рд╢реЗрд╖рддрд╛рдУрдВ рдХрд╛ рд╕рдорд░реНрдерди рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИ, рддреЛ рд╣рдореЗрдВ рдорд▓реНрдЯреА-рдбрд┐рд╡рд╛рдЗрд╕ рд╕рдорд░реНрдерди рдХреЗ рдмрд┐рдирд╛ <strong>рднреЗрдбрд╝рджреЛрдЧ</strong> рдХреЛ рд╕рдВрдХрд▓рд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИред </blockquote><br><h2 id="tip-hranilischa---plain-versus-tree">  рднрдВрдбрд╛рд░рдг рдкреНрд░рдХрд╛рд░ - рд╕рд╛рджреЗ рдмрдирд╛рдо рдкреЗрдбрд╝ </h2><br><p>  рдЕрдиреНрдп рд╡рд┐рдХрд▓реНрдкреЛрдВ рдореЗрдВ рд╕реЗ, рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рддреЗ рд╕рдордп, рдЖрдк рднрдВрдбрд╛рд░рдг рдХреЗ рдкреНрд░рдХрд╛рд░ (рдмреИрдХрдПрдВрдб рд╕реНрдЯреЛрд░реЗрдЬ) рдХреЛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдЖрдк рдкреНрд░рдХрд╛рд░ рдХреЛ <strong>рд╕рд╛рджреЗ</strong> рдпрд╛ <strong>рдкреЗрдбрд╝ рдкрд░</strong> рд╕реЗрдЯ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  рдПрдХ <strong>рд╕рд╛рджреЗ</strong> рдкреНрд░рдХрд╛рд░ рдХреЗ рд▓рд┐рдП, рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╕рдВрд░рдЪрдирд╛ рдЗрд╕ рддрд░рд╣ рджрд┐рдЦрд╛рдИ рджреЗрдЧреА: </p><br><pre> <code class="hljs ruby"><span class="hljs-params"><span class="hljs-params">| |</span></span>- obj <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt;id &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|-&lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>-&lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|-&lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>- ... <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt;id  &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> ... <span class="hljs-params"><span class="hljs-params">|- config [] |</span></span>- epoch <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span>- ... <span class="hljs-params"><span class="hljs-params">|- journal \- sheep.log []</span></span></code> </pre> <br><p>  <code>obj</code> рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕рднреА VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рдПрдХ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рднреЗрдЬрд╛ рдЬрд╛рдПрдЧрд╛, рдЬрд┐рд╕рдХрд╛ рдирд╛рдо рд╡рд░реНрддрдорд╛рди рдпреБрдЧ рдХреЗ рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИред  рдпрд╣реА рд╣реИ, рдкреНрд░рддреНрдпреЗрдХ рдпреБрдЧ рдХреЗ рд▓рд┐рдП, рд╕рдВрдмрдВрдзрд┐рдд VDI рд╡рд╕реНрддреБрдУрдВ рдХреЛ рдЕрд▓рдЧ рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рд╣рд╛рд▓рд╛рдВрдХрд┐, рдПрдХ рдпреБрдЧ рдХреЗ рджреМрд░рд╛рди, рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ VDI рдСрдмреНрдЬреЗрдХреНрдЯ рджрд┐рдЦрд╛рдИ рджреЗ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рдмрд╛рдж рдореЗрдВ рдлрд╝рд╛рдЗрд▓реЛрдВ рддрдХ рдкрд╣реБрдВрдЪ рдХреЛ рдзреАрдорд╛ рдХрд░ рджреЗрддреЗ рд╣реИрдВред  рдЗрд╕рд▓рд┐рдП, рдЖрдк рджреВрд╕рд░рд╛ рд╡рд┐рдХрд▓реНрдк рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ <strong>рдкреЗрдбрд╝ рд╣реИ</strong> : </p><br><pre> <code class="hljs ruby"><span class="hljs-params"><span class="hljs-params">|- obj |</span></span> <span class="hljs-params"><span class="hljs-params">|- aa |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>-&lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|-&lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>-&lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|- ... |</span></span> <span class="hljs-params"><span class="hljs-params">|- ab |</span></span> <span class="hljs-params"><span class="hljs-params">| ... |</span></span> <span class="hljs-params"><span class="hljs-params">|- meta |</span></span> <span class="hljs-params"><span class="hljs-params">| |</span></span>- &lt; &gt; <span class="hljs-params"><span class="hljs-params">| |</span></span> <span class="hljs-params"><span class="hljs-params">|- ... |</span></span> <span class="hljs-params"><span class="hljs-params">|- 0a |</span></span> <span class="hljs-params"><span class="hljs-params">| ... |</span></span>- config [] <span class="hljs-params"><span class="hljs-params">|- epoch |</span></span> <span class="hljs-params"><span class="hljs-params">|- &lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">|- &lt; &gt; |</span></span> <span class="hljs-params"><span class="hljs-params">|- ... \- sheep.log []</span></span></code> </pre> <br><p>  рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХреЗ рднрдВрдбрд╛рд░рдг рдореЗрдВ, <strong>рднреЗрдбрд╝</strong> рдбреЗрдорди <code>0a, ..., 99</code> рд╕рд╛рде рдЙрдк-рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдУрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рдмрдирд╛рддрд╛ рд╣реИ <code>0a, ..., 99</code> рдЬреЛ <code>obj</code> рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ <code>0a, ..., 99</code> рд╣реИ, рдФрд░ рдлрд┐рд░ <strong>VDI рдЖрдИрдбреА</strong> рдХреЗ рдЕрдВрддрд┐рдо рджреЛ рд╡рд░реНрдгреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд╕реНрддреБрдУрдВ рдХреЛ <code>0a, ..., 99</code> , рдЬреЛ рди рдХреЗрд╡рд▓ рдкреНрд░рддреНрдпреЗрдХ VDI рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП, рдмрд▓реНрдХрд┐ рдЗрд╕рдХреЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗ рд▓рд┐рдП рднреА рдЕрджреНрд╡рд┐рддреАрдп рд╣реИред рдХреНрд▓реЛрдиред </p><br><h2 id="imena-vdi-obektov">  VDI рдСрдмреНрдЬреЗрдХреНрдЯ рдирд╛рдо </h2><br><p>  рдЬрдм <strong>рднреЗрдбрд╝рджреЛрдЧ</strong> VDI рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдбреЗрдЯрд╛ рдмрдЪрд╛рддрд╛ рд╣реИ, рддреЛ рдлрд╝рд╛рдЗрд▓реЗрдВ <code>obj</code> рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдореЗрдВ рджрд┐рдЦрд╛рдИ рджреЗрдиреЗ <code>obj</code> , рдкреНрд░рддреНрдпреЗрдХ рдХрд╛ рдЕрдкрдирд╛ рдирд╛рдо рдХрдИ рддрддреНрд╡реЛрдВ рд╕реЗ рдпреБрдХреНрдд рд╣реЛрдЧрд╛: </p><br><pre> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^</code> </pre> <br><p>  рдкрд╣рд▓реЗ рджреЛ рд╡рд░реНрдг рд╡рд╕реНрддреБ рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЛ рджрд░реНрд╢рд╛рддреЗ рд╣реИрдВред  рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ <code>00...</code> рдФрд░ рдореЗрдЯрд╛рдбреЗрдЯрд╛ (рдЬреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВ) <code>80...</code> </p><br><pre> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^^^^^</code> </pre> <br><p>  рдЗрд╕рдХреЗ рдмрд╛рдж VDI рдЖрддрд╛ рд╣реИред  рдпрд╣ рди рдХреЗрд╡рд▓ рдкреНрд░рддреНрдпреЗрдХ рдХрдВрдЯреЗрдирд░ рдХреЗ рд▓рд┐рдП, рдмрд▓реНрдХрд┐ рдЗрд╕рдХреЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдпрд╛ рдХреНрд▓реЛрди рдХреЗ рд▓рд┐рдП рднреА рдЕрджреНрд╡рд┐рддреАрдп рд╣реИред </p><br><pre> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^ ^^</code> </pre> <br><p>  VDI рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ рдХреЗ рдЕрдВрддрд┐рдо рджреЛ рдЕрдВрдХ рдЗрдВрдЧрд┐рдд рдХрд░рддреЗ рд╣реИрдВ - <strong>рдкреЗрдбрд╝ рдХреЗ</strong> рднрдВрдбрд╛рд░рдг рдХреЗ рдкреНрд░рдХрд╛рд░ рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ - рдЬрд┐рд╕рдореЗрдВ рд╡рд╣ рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╣реИ рдЬрд┐рд╕рдХреЗ рдЕрдВрддрд░реНрдЧрдд рд╡рд╕реНрддреБ рд╕реНрдерд┐рдд рд╣реИред </p><br><pre> <code class="hljs go">../obj/<span class="hljs-number"><span class="hljs-number">8f</span></span>/<span class="hljs-number"><span class="hljs-number">00e8</span></span>b18f00000005 ^^^^^^^^</code> </pre> <br><p>  рдФрд░ рд╣реЗрдХреНрд╕рд╛рдбреЗрд╕рд┐рдорд▓ рдореЗрдВ VDI рдХрдВрдЯреЗрдирд░ рдХреА рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ VDI рдХрдВрдЯреЗрдирд░ рдореЗрдВ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд╕реАрд░рд┐рдпрд▓ рдирдВрдмрд░ рдХреЗ рдмрд╛рдж рд╣реИ </p><br><h2 id="epoha">  рдпреБрдЧ </h2><br><p>  <code>epoch</code> рдЙрдкрдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдореЗрдВ <code>epoch</code> рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд╕реНрддреБрдУрдВ рдХреА рджреНрд╡рд┐рдЖрдзрд╛рд░реА рд╕реВрдЪреА рд╢рд╛рдорд┐рд▓ рд╣реИред  рд╣рд░ рдмрд╛рд░, рдкреНрд░рддреНрдпреЗрдХ рдХреНрд▓рд╕реНрдЯрд░ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╣реЛрдиреЗ рдкрд░ - рдЬрдм рдПрдХ рдиреЛрдб рдЬреЛрдбрд╝рд╛ рдЬрд╛рддрд╛ рд╣реИ рдпрд╛ рд╣рдЯрд╛ рджрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпреБрдЧ рд╕рдВрдЦреНрдпрд╛ рдмрдврд╝ рдЬрд╛рддреА рд╣реИред  рдЗрд╕ рддрд░рд╣ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдкрд░рд┐рд╡рд░реНрддрди рд╕реЗ <strong>рд╡рд╕реВрд▓реА</strong> рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рд╣реЛрддреА рд╣реИ, рдЬрд┐рд╕рдХреЗ рджреМрд░рд╛рди рдиреЛрдбреНрд╕ рдкрд░ рд╕реНрдерд╛рдиреАрдп рд╡рд╕реНрддреБрдУрдВ рдХреА рд╡рд░реНрддрдорд╛рди рд╕реНрдерд┐рддрд┐ рдХреА рдЬрд╛рдВрдЪ рдХреА рдЬрд╛рдПрдЧреА, рдЬрд┐рд╕рдХреЗ рдмрд╛рдж рдпреБрдЧ рдореЗрдВ рд╡реГрджреНрдзрд┐ рд╣реЛрдЧреАред </p><br><h1 id="kak-optimalno-vybrat-hranilische-vdi-obektov">  рдЗрд╖реНрдЯрддрдо VDI рдСрдмреНрдЬреЗрдХреНрдЯ рд╕реНрдЯреЛрд░реЗрдЬ рдХреИрд╕реЗ рдЪреБрдиреЗрдВ </h1><br><p>  рдЙрдкрд▓рдмреНрдз рд╕рдВрдЧреНрд░рд╣рдг рдХреНрд╖рдорддрд╛ рдХреА рдЧрдгрдирд╛ рдиреЛрдбреНрд╕ рдкрд░ рдореБрдХреНрдд рд╕реНрдерд╛рди рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдХреА рдЬрд╛рддреА рд╣реИред  <strong>рднреЗрдбрд╝</strong> рджреНрд╡рд╛рд░рд╛ рдЪреБрдирд╛ рдЧрдпрд╛ рд╕реНрдерд╛рди рд╣рдореЗрд╢рд╛ рдЗрд╕ рдмрд╛рдд рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдХрд┐рддрдиреА рдЬрдЧрд╣ рдЙрдкрд▓рдмреНрдз рд╣реИ рдЬрд╣рд╛рдВ VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рд╕рдВрдЧреНрд░рд╣реАрдд рд╣реИрдВред </p><br><p>  VDI рдХрдВрдЯреЗрдирд░ рдХрд╛ рдЖрдХрд╛рд░ рд╕рд┐рд░реНрдл рдПрдХ рдЖрднрд╛рд╕реА рдЖрдХрд╛рд░ рд╣реИ рдЬреЛ рдХрд┐рд╕реА рднреА рддрд░рд╣ рд╕реЗ рд╕рдВрдмрдВрдзрд┐рдд рдирд╣реАрдВ рд╣реИ рдХрд┐ VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХрд┐рддрдиреА рдЬрдЧрд╣ рдкрд░ рд╣реИрдВред  рдпрд╣ рдЬрд╛рдирдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдПрдХ рд╕рдореВрд╣ рдореЗрдВ рднреЗрдбрд╝ рдХрд╛ рдмрдЪреНрдЪрд╛ рдбреЗрдЯрд╛ рдХреИрд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ: </p><br><blockquote>  рд╢реАрдкрдбреЙрдЧ рд╣рдореЗрд╢рд╛ рдпреБрдЧ рдХреА рд╕рднреА рдорд╢реАрдиреЛрдВ рдХреЗ рдмреАрдЪ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдбреЗрдЯрд╛ рд╕реНрдЯреЛрд░ рдХрд░рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░рддреЗ рд╣реИрдВред </blockquote><p>  рдЗрд╕рдХрд╛ рдорддрд▓рдм рдпрд╣ рд╣реИ рдХрд┐ рдпрджрд┐ рдиреЛрдбреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рдЧрд┐рд░рддрд╛ рд╣реИ, рддреЛ рдпреБрдЧ рдмрджрд▓ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ <strong>рд╢реАрдкрдбреЙрдЧ</strong> рддреБрд░рдВрдд рд╡рд╕реВрд▓реА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╢реБрд░реВ рдХрд░рддрд╛ рд╣реИ, рдпрд╣ рдиреБрдХрд╕рд╛рди рдХреА рднрд░рдкрд╛рдИ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рд╢реЗрд╖ рдиреЛрдбреНрд╕ рдкрд░ рд▓рд╛рдкрддрд╛ VDI рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░реЗрдЧрд╛ред </p><br><p>  рдПрдХ рдирдпрд╛ рдиреЛрдб рдЬреЛрдбрд╝рддреЗ рд╕рдордп рдПрдХ рд╕рдорд╛рди рд╕реНрдерд┐рддрд┐ рдЙрддреНрдкрдиреНрди рд╣реЛрдЧреАред  <strong>рд╢реАрдкрдбреЙрдЧ</strong> VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рдирдП рдиреЛрдбреНрд╕ рд╕реЗ рдЙрд╕рдХреЗ рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рдореЗрдВ рд▓реЗ рдЬрд╛рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрдЧрд╛, рддрд╛рдХрд┐ рдиреЛрдбреНрд╕ рдкрд░ рдбреЗрдЯрд╛ рд╕реНрдкреЗрд╕ рдХрд╛ рдкреНрд░рддрд┐рд╢рдд рднрд░рдирд╛ рдпрдерд╛рд╕рдВрднрд╡ рд╕рдВрддреБрд▓рд┐рдд рд╣реЛред  рдЕрдкрдиреЗ рдиреЛрдбреНрд╕ рдкрд░ рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдХрд┐рддрдирд╛ рд╕реНрдерд╛рди рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЗрд╕рдХрд╛ рд╡реИрд╢реНрд╡рд┐рдХ рдЕрд╡рд▓реЛрдХрди рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: </p><br><pre> <code class="hljs pgsql">nod1 ~ # collie node md <span class="hljs-keyword"><span class="hljs-keyword">info</span></span> -A Id Size Used Avail Use% <span class="hljs-type"><span class="hljs-type">Path</span></span> Node <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.1</span></span> TB <span class="hljs-number"><span class="hljs-number">391</span></span> GB <span class="hljs-number"><span class="hljs-number">720</span></span> GB <span class="hljs-number"><span class="hljs-number">35</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">702</span></span> GB <span class="hljs-number"><span class="hljs-number">394</span></span> GB <span class="hljs-number"><span class="hljs-number">307</span></span> GB <span class="hljs-number"><span class="hljs-number">56</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">794</span></span> GB <span class="hljs-number"><span class="hljs-number">430</span></span> GB <span class="hljs-number"><span class="hljs-number">364</span></span> GB <span class="hljs-number"><span class="hljs-number">54</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.6</span></span> TB <span class="hljs-number"><span class="hljs-number">376</span></span> GB <span class="hljs-number"><span class="hljs-number">1.2</span></span> TB <span class="hljs-number"><span class="hljs-number">22</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.2</span></span> TB <span class="hljs-number"><span class="hljs-number">401</span></span> GB <span class="hljs-number"><span class="hljs-number">838</span></span> GB <span class="hljs-number"><span class="hljs-number">32</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.5</span></span> TB <span class="hljs-number"><span class="hljs-number">370</span></span> GB <span class="hljs-number"><span class="hljs-number">1.1</span></span> TB <span class="hljs-number"><span class="hljs-number">24</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj Node <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1.6</span></span> TB <span class="hljs-number"><span class="hljs-number">388</span></span> GB <span class="hljs-number"><span class="hljs-number">1.2</span></span> TB <span class="hljs-number"><span class="hljs-number">23</span></span>% /<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/sheepdog-data/obj</code> </pre> <br><h2 id="proizvoditelnost-io">  I / O рдкреНрд░рджрд░реНрд╢рди </h2><br><p>  рдпрд╣рд╛рдВ рдпрд╣ рдХрд╣рдирд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ <strong>рд╢реАрдкрдб рдХреА</strong> рддреБрд▓рдирд╛ рдореЗрдВ <strong>рд╢реАрдкрдбреЙрдЧ</strong> рдЕрд▓рдЧ рддрд░рд╣ рд╕реЗ рдХрд╛рдо рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдЙрдирдХреА рдЕрд▓рдЧ рдкреНрд░рд╛рдердорд┐рдХрддрд╛рдПрдВ рд╣реИрдВред </p><br><p>  рд╕реЗрдл рдХреЗ рд▓рд┐рдП, рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЗ рд╕рд╛рде-рд╕рд╛рде рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕, рд╣реЛрд╕реНрдЯ рдХрдиреЗрдХреНрдЯрд┐рд╡рд┐рдЯреА рдФрд░ рд░рд┐рд╕реНрдкреЙрдиреНрд╕ рд╕реНрдкреАрдб рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░рддреЗ рд╕рдордп рдУрдПрд╕рдбреА рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ "рд╡рдЬрди" рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред  <em>(рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдирд╣реАрдВ - рд▓рдЧрднрдЧ)</em> </p><br><p>  рдХреНрдпрд╛ рд╢реАрдкрдбреЙрдЧ рдРрд╕рд╛ рдХреБрдЫ рдХрд░рддрд╛ рд╣реИ, рдореБрдЭреЗ рдирд╣реАрдВ рдкрддрд╛ред  рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдХрд┐ред  рдЙрд╕рдХреЗ рд▓рд┐рдП рдбреЗрдЯрд╛ рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ рдЖрддрд╛ рд╣реИред  I / O рд╕рдВрдЪрд╛рд▓рди рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдкреНрд░рджрд░реНрд╢рди рджреНрд╡рд┐рддреАрдпрдХ рд╣реИред  рдмреЗрд╢рдХ, рдЕрдзрд┐рдХ рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рдиреЛрдбреНрд╕ рдХреЗ рд╕рд╛рде, рдЗрд╕рдХрд╛ I / O рдкреНрд░рджрд░реНрд╢рди рдмреЗрд╣рддрд░ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рд╣рдореЗрд╢рд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╕рдВрд░рдЪрдирд╛ рдкрд░ рдирд┐рд░реНрднрд░ рдХрд░рддрд╛ рд╣реИред  <em>(рд╣рд╛рд▓рд╛рдВрдХрд┐, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрд░реАрдХреНрд╖рдг</a> рд╕реАрдл рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдмреЗрд╣рддрд░ рднреЗрдбрд╝рдЪрд╛рд▓ рдкреНрд░рджрд░реНрд╢рди рджрд┐рдЦрд╛рддреЗ рд╣реИрдВ - рд▓рдЧрднрдЧ)</em> </p><br><blockquote>  рдореИрдВрдиреЗ 2dB SATA II рдбрд┐рд╕реНрдХ рдкрд░ рд╕рдВрдЧреНрд░рд╣реАрдд рдбреЗрдЯрд╛ рдХреЗ рд╕рд╛рде рднреЗрдбрд╝рджреЛрдЧ рдХреЛ рдПрдХ рдирдпрд╛ рдиреЛрдб рдЬреЛрдбрд╝рд╛ред  рдЗрд╕ рдбрд┐рд╕реНрдХ рдХреЗ рд▓рд┐рдП рдЕрдзрд┐рдХрддрдо рд▓рд┐рдЦрдиреЗ рдХреА рдЧрддрд┐ рд▓рдЧрднрдЧ 80M / s рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рдмрд╣реБрдд рднрд┐рдиреНрди рд╣реЛрддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рдПрд╕рдПрдЯреАрдП рдбреНрд░рд╛рдЗрд╡ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рдкрдврд╝ рдФрд░ рд▓рд┐рдЦ рдирд╣реАрдВ рд╕рдХрддреЗ рд╣реИрдВред <br><br>  рдкреНрд░рд╛рд░рдВрдн рдореЗрдВ, рдЗрд╕ рдбрд┐рд╕реНрдХ рдкрд░ VDI рдкрд░ рдФрд╕рдд рд▓рд┐рдЦрдиреЗ рдХреА рдЧрддрд┐ рд▓рдЧрднрдЧ 20 ~ 30M / s рдереА, рдХреНрдпреЛрдВрдХрд┐ VDI рдХреЗ рдбреЗрдЯрд╛ рдХреЗ рдЕрд▓рд╛рд╡рд╛, 392G рдХрдВрдЯреЗрдирд░ рдбреЗрдЯрд╛ рдХреЛ рдкреБрдирд░реНрдкреНрд░рд╛рдкреНрддрд┐ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЗ рднрд╛рдЧ рдХреЗ рд░реВрдк рдореЗрдВ рджреЛрд╣рд░рд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рдпрд╣ 6.5 рдШрдВрдЯреЗ рддрдХ рдЪрд▓рд╛ред  40 ~ 55M / s рдХреЗ рдмреАрдЪ рдЧрддрд┐ рд▓рд┐рдЦреЗрдВред <br><br>  рдЬрд╛рд╣рд┐рд░ рд╣реИ, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд▓рд┐рдЦрдиреЗ рдХреА рдЧрддрд┐ рд╕реНрдерд╛рдиреАрдп рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ I / O рдкреНрд░рджрд░реНрд╢рди рджреНрд╡рд╛рд░рд╛ рд╕реАрдорд┐рдд рдереАред </blockquote><p>  рд╢реАрдкрдбреЙрдЧ рдХреЗ рд▓рд┐рдП, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдирд┐рдпрдо рд▓рд╛рдЧреВ рд╣реЛрддрд╛ рд╣реИ: "рдЕрдзрд┐рдХ рд╡реАрдбреАрдЖрдИ рд╡рд╕реНрддреБрдПрдВ рддреНрд╡рд░рд┐рдд рдХрдиреЗрдХреНрд╢рди рдХреЗ рд╕рд╛рде рдиреЛрдбреНрд╕ рдкрд░ рд╣реЛрддреА рд╣реИрдВ, I / O рд╕рдВрдЪрд╛рд▓рди рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдмреЗрд╣рддрд░ рд╣реЛрддрд╛ рд╣реИред" </p><br><p>  рдЗрд╕ рддрдереНрдп рдХреЗ рдХрд╛рд░рдг рдХрд┐ рдкреГрд╖реНрдарднреВрдорд┐ рдореЗрдВ VDI рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреЛ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ "рдиреЛрдб рдХреА рддреНрд╡рд░рд┐рдд рдореМрдд" рдЙрди рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреА рдкреНрд░рддрд┐рдХреГрддрд┐ рдХреЛ рдзреАрдорд╛ рдХрд░ рджреЗрдЧреА рдЬреЛ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕реНрдерд╛рди рд▓реЗрддреЗ рд╣реИрдВ, рдпрд╣ VDI рдХрдВрдЯреЗрдирд░ рдХреЗ I / O рд╕рдВрдЪрд╛рд▓рди рдХреЗ рдкреНрд░рджрд░реНрд╢рди рдореЗрдВ рдХрдореА рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рдХрдЯ рд╣реЛрдЧрд╛ред </p><br><h2 id="zanimaemoe-prostranstvo">  рдЬрдЧрд╣ рдШреЗрд░ рд▓реА </h2><br><p>  рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рд░рдЦрддреЗ рд╕рдордп, <strong>рднреЗрдбрд╝</strong> рдбреЗрдореЙрди рдХреЗ рд▓рд┐рдП рдореБрдХреНрдд рд╕реНрдерд╛рди рдХреА рдорд╛рддреНрд░рд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИред  рддрдВрддреНрд░ рд╕рд░рд▓ рд▓рдЧрддрд╛ рд╣реИред  <strong>рднреЗрдбрд╝</strong> рдбреЗрдорди, рдЬрд┐рд╕рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ VDI рдХрдВрдЯреЗрдирд░ рдХреЗ рд╕рд╛рде рдбреЗрдЯрд╛ рдХрд╛ рд╕рдВрдЪрд╛рд░ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд╕рдордп-рд╕рдордп рдкрд░ рдиреЛрдбреНрд╕ рдкрд░ рдореБрдХреНрдд рдФрд░ рдХрдмреНрдЬреЗ рд╡рд╛рд▓реЗ рд╕реНрдерд╛рди рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рддрд╛ рд╣реИ, рдЬреЛ рдЗрд╕реЗ рд╕реЙрд░реНрдЯ рдХрд░рддрд╛ рд╣реИред  рдлрд┐рд░ рдбреЗрдЯрд╛ рдХреЛ рд╕рдмрд╕реЗ рдХрдо рдЙрдкрдпреЛрдЧ рджрд░ рдХреЗ рд╕рд╛рде рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </p><br><p>  рдпрджрд┐ рдореБрдЦреНрдп рд░реВрдк рд╕реЗ рддреЗрдЬрд╝ рд▓рд┐рдЦрдирд╛ рдкрде рд╣реИ, рддреЛ VDI рдХрдВрдЯреЗрдирд░ рдореЗрдВ рд▓рд┐рдЦрдирд╛ рднреА рддреЗрдЬрд╝ рд╣реЛрдЧрд╛ред  рдЪреВрдВрдХрд┐ VDI рдХрдВрдЯреЗрдирд░ рдХреЗ I / O рд╕рдВрдЪрд╛рд▓рди рдХреЛ рддреЗрдЬрд╝ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдкрд╣рд▓реЗ рдХреЗ <strong>рднреЗрдбрд╝</strong> рдХреЗ <strong>рдмрдЪреНрдЪреЗ</strong> рдЕрдЧрд▓реЗ рдСрдкрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рдЖрдЧреЗ рдмрдврд╝ рд╕рдХрддреЗ рд╣реИрдВред </p><br><p>  рдорд╣рддреНрд╡рдкреВрд░реНрдг рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╢реАрдкрдбреЙрдЧ рдХреЗ рд╕рд╛рде рдХреЛрдИ рд╕реНрдерд┐рддрд┐ рдирд╣реАрдВ рд╣реЛрдЧреА рдЬрдм рдиреЛрдбреНрд╕ рдореЗрдВ рд╕реЗ рдПрдХ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рднрд░рд╛ рд╣реЛред  рдпрджрд┐ рдиреЛрдб рдкрд░ рдЙрдкрдпреЛрдЧ рдХреА рджрд░ рдмрд╣реБрдд рдЕрдзрд┐рдХ рдЦрд░рд╛рдм рд╣реЛ рдЬрд╛рддреА рд╣реИ, рддреЛ рднреЗрдбрд╝ рдбреЗрдорди рдЕрдкрдиреЗ рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЛ рдХрд┐рд╕реА рдЕрдиреНрдп рд╕реНрдерд╛рди рдкрд░ рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░ рджреЗрддрд╛ рд╣реИред </p><br><p>  рд╢реАрдкрдбреЙрдЧ рдмрд┐рд▓реНрдХреБрд▓ Btrfs рдХреА рддрд░рд╣ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИ - рдХреЗрд╡рд▓ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХрдмреНрдЬреЗ рд╡рд╛рд▓реЗ рд╕реНрдерд╛рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗред  рдЗрд╕ рдкреНрд░рдХрд╛рд░, рдЖрдк 1 рдЯреАрдмреА рдХреА рдХреНрд╖рдорддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рд╡рд░реНрдЪреБрдЕрд▓ рд╡реАрдбреАрдЖрдИ рдХрдВрдЯреЗрдирд░ рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ, рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдЗрд╕рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдбреЗрдЯрд╛ рдХреЛ рдЙрддрдиреА рд╣реА рдЬрдЧрд╣ рджреЗрдЧрд╛ред  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, VDI рдХрдВрдЯреЗрдирд░реЛрдВ рдореЗрдВ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ рдФрд░ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рдРрд╕реЗ рдкреНрд░рд╛рд░реВрдкреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рд╡рд╛рдВрдЫрдиреАрдп рд╣реИ рдЬреЛ рд╡реЗ рдПрдХ рджреВрд╕рд░реЗ рдХреЗ рдмрд╛рдж рд╕рд╛рдл рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред </p><br><h1 id="zapusk-klastera">  рдХреНрд▓рд╕реНрдЯрд░ рд▓реЙрдиреНрдЪ </h1><br><blockquote>  рдЬрдмрдХрд┐ рд╕рднреА рдиреЛрдбреНрд╕ рдХреЛ рдПрдХ рд╣реА рд╕рдордп рдореЗрдВ рд░реЛрдХрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ, рдиреЛрдбреНрд╕ рдХреЛ рдПрдХ рдмрд╛рд░ рдореЗрдВ рд╢реБрд░реВ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ !!!  рдиреЛрдбреНрд╕ рдХреЛ рдзреАрд░реЗ-рдзреАрд░реЗ рдЬреЛрдбрд╝рд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред  рдиреЛрдб рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдЬреЛ рдиреЛрдбреНрд╕ рдХреА рд╕реВрдЪреА рдореЗрдВ рдкрд╣рд▓реА рдмрд╛рд░ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред <br>  <em>(рдпрд╣ рдПрдХ рдЕрддреНрдпрдВрдд рд╡рд┐рдЪрд┐рддреНрд░ рдХрдерди рд╣реИ - рд▓рдЧрднрдЧ)</em> </blockquote><br><h1 id="vdi">  рд╡реАрдбреАрдЖрдИ </h1><br><p>  рдпрд╣ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ рдХреЗ рд▓рд┐рдП <strong>рднреЗрдбрд╝рджреЛрдЧ</strong> рдореЗрдВ рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдирд╛рдо рд╣реИ, рди рдХрд┐ рдЗрд╕рдХрд╛ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдкреНрд░рд╛рд░реВрдкред <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">7</a></sup> <sup><a name="cite_ref-7"></a></sup>  ред  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдпрд╣ рдирд┐рд╢реНрдЪрд┐рдд рдЖрдХрд╛рд░ рдХреЗ рдбрд┐рдмреНрдмреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдЖрднрд╛рд╕реА рдмреЙрдХреНрд╕ рд╣реИ, рдЬрд┐рд╕рдореЗрдВ <strong>рднреЗрдбрд╝рдбреЙрдЧ</strong> рдлрд┐рд░ рдЙрд╕ рдбреЗрдЯрд╛ рдХреЛ рд░рдЦрддрд╛ рд╣реИ рдЬрд┐рд╕реЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдкрд╣реБрдВрдЪрд╛рддрд╛ рд╣реИред </p><br><h1 id="sozdanie-vdi">  VDI рдмрдирд╛рдирд╛ </h1><br><p>  рдкрд╣рд▓реЗ VDI рдмрдирд╛рдиреЗ рдпрд╛ рдЖрдпрд╛рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд╣рдореЗрдВ рдХреНрд▓рд╕реНрдЯрд░ рдХреЛ рдкреНрд░рд╛рд░реВрдкрд┐рдд рдХрд░рдирд╛ рд╣реЛрдЧрд╛ред  рдХреНрд▓рд╕реНрдЯрд░ рдмрдирд╛рддреЗ рд╕рдордп, рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ рдЬреЛ рддрдм рдкреНрд░рддреНрдпреЗрдХ VDI рдмрдирд╛рддреЗ рд╕рдордп рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдЙрдкрдпреЛрдЧ рдХрд┐рдП рдЬрд╛рдПрдВрдЧреЗред </p><br><p>  рдбрд┐рд╕реНрдХ 1 рдФрд░ рдПрдХ рдЬреАрдмреА рдирд╛рдо рдХреЗ рдирдП рд╡реАрдбреАрдЖрдИ рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХрд╛ рдкреНрд░рджрд░реНрд╢рди рдХрд░рдиреЗ рд╡рд╛рд▓рд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi create disk1 1G root</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@nod</span></span></span><span class="hljs-comment">1 :~# collie vdi list Name Id Size Used Shared Creation time VDI id Copies Tag Block Size Shift disk1 0 1.0 GB 0.0 MB 0.0 MB 2015-12-04 14:07 e8b18f 2 22</span></span></code> </pre> <br><p>  <strong>рдИрдж</strong> <br>  VDI рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ </p><br><p>  <strong>рдЖрдХрд╛рд░</strong> <br>  VDI рдХрд╛ рдЖрдХрд╛рд░ рдЬреЛ рдЬрд░реВрд░реА рдирд╣реАрдВ рдХрд┐ рддреБрд░рдВрдд рдкреНрд░рдЪрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред <br>  рдпрджрд┐ рдпрд╣ VDI рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╣реИ (qcow2 рдФрд░ рдЗрд╕реА рддрд░рд╣) <code>qemu-img convert</code> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ, рддреЛ рдпрд╣ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ рдХреЗ рдЖрдХрд╛рд░ рд╕реЗ рдореЗрд▓ рдирд╣реАрдВ рдЦрд╛рдПрдЧрд╛, рд▓реЗрдХрд┐рди рдпрд╣ рд▓рдЧрд╛рддрд╛рд░ рдмрдврд╝реЗрдЧрд╛ред </p><br><p>  <strong>рдкреНрд░рдпреБрдХреНрдд</strong> <br>  VDI рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдореЗрдВ рдХрд┐рддрдиреА рдЬрдЧрд╣ рд╣реИ рдкрд░ рдЬрд╛рдирдХрд╛рд░реАред <br>  VDI, рдЬрд┐рд╕реЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рджреМрд░рд╛рди рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рдЖрд╡рдВрдЯрди рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реЛрддреА рд╣реИ, рд╡рд╣ рдХреБрдЫ рднреА рдирд╣реАрдВ рд▓реЗрдЧрд╛, рдХреНрдпреЛрдВрдХрд┐ рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯ рдЕрднреА рддрдХ рдЗрд╕рдХреЗ рд▓рд┐рдП рдирд╣реАрдВ рдмрдирд╛рдП рдЧрдП рд╣реИрдВред </p><br><p>  <strong>рд╕рд╛рдЭрд╛</strong> <br>  рдбреЗрдЯрд╛ рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рдХреА рдорд╛рддреНрд░рд╛ рдЬреЛ рдЕрдиреНрдп VDI рджреНрд╡рд╛рд░рд╛ рд╕рд╛рдЭрд╛ рдХреА рдЬрд╛рддреА рд╣реИ </p><br><p>  <strong>рдирд┐рд░реНрдорд╛рдг рдХрд╛ рд╕рдордп</strong> <br>  VDI рдирд┐рд░реНрдорд╛рдг рдХрд╛ рд╕рдордп </p><br><p>  <strong>рдмреНрд▓реЙрдХ рдЖрдХрд╛рд░</strong> <br>  VDI рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЖрдХрд╛рд░ред  рдЪреЗрддрд╛рд╡рдиреА!  рдпрд╣ рдПрдордмреА рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рджреЛ рдмрд╛рдЗрдЯреНрд╕ рдХреА рд╢рдХреНрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВред  рдкреБрд░рд╛рдиреЗ рд╕рдВрд╕реНрдХрд░рдгреЛрдВ рдореЗрдВ, рдХреЗрд╡рд▓ 4 рдПрдордмреА рдирд┐рд╢реНрдЪрд┐рдд рдЖрдХрд╛рд░ рдХреА рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдерд╛ред  рд╡рд░реНрддрдорд╛рди рдореЗрдВ, VDI рдореЗрдВ рдмрдбрд╝реА рд╡рд╕реНрддреБрдПрдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред  рдирд┐рдпрдорд┐рдд рд╡рд░реНрдЪреБрдЕрд▓ рдорд╢реАрди рдХреЗ VDI рдСрдмреНрдЬреЗрдХреНрдЯ рдХреЗ рд▓рд┐рдП рдЗрд╖реНрдЯрддрдо рдЖрдХрд╛рд░ 64MB (26) рдЬреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИред  22 (4 рдПрдордмреА) рдХрд╛ рдбрд┐рдлрд╝реЙрд▓реНрдЯ рдЖрдХрд╛рд░ рднреА рдиреНрдпреВрдирддрдо рд╣реИред  рдХрдо рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рдСрдмреНрдЬреЗрдХреНрдЯ рдХрд╛ рдЖрдХрд╛рд░ рдЬрд┐рддрдирд╛ рдЫреЛрдЯрд╛ рд╣реЛрдЧрд╛, рд╡реАрдбреАрдЖрдИ рдХреЗ рд╕рд╛рде рдХрд╛рдо <strong>рдХрд░рддреЗ рд╕рдордп рд╢реАрдкрдбреЙрдЧ</strong> рдХреЛ <strong>рдЬрд┐рддрдиреА</strong> рдЕрдзрд┐рдХ рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдирд╛ рд╣реЛрдЧрд╛, рдФрд░ рдЖрдИрдУ рдХреЗ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ рдлрд╛рдЗрд▓реЛрдВ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдХреЛрдИ рд╕рд╕реНрддреА рд╕рдорд╕реНрдпрд╛ рдирд╣реАрдВ рд╣реИред  рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреА рдПрдХ рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛, рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ рдзреАрдореА SATA рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд╕рд╛рде, рдкрдврд╝рдиреЗ рдФрд░ рд▓рд┐рдЦрдиреЗ рдХреА рдЧрддрд┐ рдореЗрдВ рддреЗрдЬ рдЧрд┐рд░рд╛рд╡рдЯ рд╣реЛ рд╕рдХрддреА рд╣реИред  рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд╕рдХрдиреЗ рд╡рд╛рд▓реА рд╡рд╕реНрддреБрдУрдВ рдХрд╛ рдЕрдзрд┐рдХрддрдо рдЖрдХрд╛рд░ 31 (2 рдЬреАрдмреА) рд╣реИред  рдпрд╣ рдлрд╛рдпрджреЗрдордВрдж рд╣реЛ рд╕рдХрддрд╛ рд╣реИ рдЕрдЧрд░ VDI рд▓рдЧрд╛рддрд╛рд░ рд╕реНрдерд┐рд░ рдбреЗрдЯрд╛ рдХреА рдПрдХ рдмрдбрд╝реА рд░рд╛рд╢рд┐ рдХреЛ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддрд╛ рд╣реИ, рдЬреИрд╕реЗ рдмреИрдХрдЕрдкред </p><br><p>  <strong>рд╡реАрдбреА рдЖрдИ.рдбреА.</strong> <br>  VDI рдкрд╣рдЪрд╛рдирдХрд░реНрддрд╛ред </p><br><h2 id="chto-soderzhit-vdi">  VDI рдореЗрдВ рдХреНрдпрд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ? </h2><br><p>  VDI рд╕рд╛рдордЧреНрд░реА рдбреЗрдЯрд╛ рд╣реИред  рдпрд╣ рдПрдХ рд╡рд┐рддрд░рд┐рдд рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИ, рдЗрд╕рд▓рд┐рдП <strong>рд╢реАрдкрдбреЙрдЧ</strong> рдЗрд╕ рдбреЗрдЯрд╛ рдпрд╛ рдХрдЪрд░реЗ рдХреЛ рд╣рд▓ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рджреГрд╖реНрдЯрд┐рдХреЛрдг рд╕реЗ, VDI рдПрдХ LVM рддрд╛рд░реНрдХрд┐рдХ рдЖрдпрддрди рдХреА рддрд░рд╣ рджрд┐рдЦрддрд╛ рд╣реИред  рдПрдХ рдкреВрд░реНрд╡ рдЖрдмрд╛рджреА рд╡рд╛рд▓рд╛ VDI рдПрдХ рд╕рдорд░реНрдкрд┐рдд рд╢реНрд░реЗрдгреА рдХреЗ рд╕рд╛рде рдПрдХ рдХреНрд▓рд╛рд╕рд┐рдХ LV рд╡рд┐рднрд╛рдЬрди рд╕реЗ рдореЗрд▓ рдЦрд╛рддрд╛ рд╣реИ, рдЬрдмрдХрд┐ VDI рдПрдХ рдкреВрд▓ рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдПрдХ рдкрддрд▓реА LV рд╡рд┐рднрд╛рдЬрди рдЬреИрд╕рд╛ рджрд┐рдЦрддрд╛ рд╣реИ (LVM (thin_provisioning) рджреЗрдЦреЗрдВ), рд▓реЗрдХрд┐рди рдЗрд╕ рдЕрдВрддрд░ рдХреЗ рд╕рд╛рде рдХрд┐ рдбреЗрдЯрд╛ extents (рдСрдмреНрдЬреЗрдХреНрдЯреНрд╕ рд╕реНрдерд╛рдиреАрдп рд░реВрдк рд╕реЗ рд╕рдВрдЧреНрд░рд╣реАрдд рдирд╣реАрдВ рд╣реИрдВ) рдмреНрд▓реЙрдХ рдбрд┐рд╡рд╛рдЗрд╕, рдФрд░ рдиреЛрдбреНрд╕ рдХреЗ рдмреАрдЪ рдмрд┐рдЦрд░реЗ рд╣реБрдП рд╣реИрдВред </p><br><blockquote>  VDI рдкреНрд░рд╛рд░реВрдк рдЗрд╕ рдЙрдкрдорд╛ рдореЗрдВ рдПрдХ рдлрд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд░реВрдк рдореЗрдВ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред  рдХреНрд░рдорд┐рдХ рд░реВрдк рд╕реЗ рдЖрд░рдХреНрд╖рд┐рдд рдХреБрдЫ рд╡рд╕реНрддреБрдУрдВ (рд╡рд╕реНрддреБрдУрдВ) рдкрд░ рдХрдмреНрдЬрд╛ рдХрд░ рд▓реЗрддреЗ рд╣реИрдВ, рдЕрдиреНрдп рдЙрдиреНрд╣реЗрдВ рдЕрдкрдиреЗ рдЗрдиреЛрдб рдХреЗ рд░реВрдк рдореЗрдВ рдореИрдк рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЙрдиреНрд╣реЗрдВ рд╕реАрдзреЗ рдбреЗрдЯрд╛ рднреЗрдЬрддреЗ рд╣реИрдВред  рдиреЛрдб рд╕реНрдЯреЛрд░реЗрдЬ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо, VDI рдкреНрд░рд╛рд░реВрдк рдФрд░ рдЖрдВрддрд░рд┐рдХ рдлрд╝рд╛рдЗрд▓ рд╕рд┐рд╕реНрдЯрдо рдХрд╛ рдПрдХ рдЧрд▓рдд рд╕рдВрдпреЛрдЬрди рдорд╣рддреНрд╡рдкреВрд░реНрдг I / O рдкреНрд░рджрд░реНрд╢рди рдЧрд┐рд░рд╛рд╡рдЯ рдХрд╛ рдХрд╛рд░рдг рдмрди рд╕рдХрддрд╛ рд╣реИред </blockquote><br><h2 id="kak-poluchit-informaciyu-o-vdi">  VDI рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рдХреИрд╕реЗ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ </h2><br><p>  VDI рдкреНрд░рд╛рд░реВрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрдзрд┐рдХ рдЬрд╛рдирдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдк <strong>qemu-img рдЬрд╛рдирдХрд╛рд░реА рдХрд╛</strong> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: </p><br><pre> <code class="hljs mel">root@nod1 :~# qemu-img info sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:disk1 <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>: sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:test2 <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: qcow2 virtual <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">12</span></span>G (<span class="hljs-number"><span class="hljs-number">12884901888</span></span> bytes) disk <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">4.0</span></span>G cluster_size: <span class="hljs-number"><span class="hljs-number">65536</span></span> Format specific information: compat: <span class="hljs-number"><span class="hljs-number">1.1</span></span> lazy refcounts: false refcount bits: <span class="hljs-number"><span class="hljs-number">16</span></span> corrupt: false</code> </pre> <br><p>  рдХрдорд╛рдВрдб рдХреЗ рдЖрдЙрдЯрдкреБрдЯ рд╕реЗ, рдЖрдк рдпрд╣ рдкрддрд╛ рд▓рдЧрд╛ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдбрд┐рд╕реНрдХ 1 рдореЗрдВ 12G рдХрд╛ рдирд╛рдордорд╛рддреНрд░ рдЖрдХрд╛рд░ рд╣реИред  рд╡рд░реНрддрдорд╛рди рдореЗрдВ рдЗрд╕рдореЗрдВ рдХреЗрд╡рд▓ 4 рдЬреА рд▓рдЧрддрд╛ рд╣реИред  рдЪреВрдВрдХрд┐ рдпрд╣ qcow2 рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рд╣реИ, рдЗрд╕рд▓рд┐рдП рдпрд╣ рд╕реНрдкрд╖реНрдЯ рд╣реИ рдХрд┐ рдЗрд╕реЗ рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред </p><br><pre> <code class="hljs mel">root@nod1 :~# collie vdi list Name Id Size Used Shared Creation time VDI id Copies Tag Block Size Shift disk2 <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">4.0</span></span> GB <span class="hljs-number"><span class="hljs-number">4.0</span></span> GB <span class="hljs-number"><span class="hljs-number">0.0</span></span> MB <span class="hljs-number"><span class="hljs-number">2015</span></span><span class="hljs-number"><span class="hljs-number">-12</span></span><span class="hljs-number"><span class="hljs-number">-04</span></span> <span class="hljs-number"><span class="hljs-number">16</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span> <span class="hljs-number"><span class="hljs-number">825</span></span>dc1 <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">31</span></span> root@nod1 :~# qemu-img info sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:disk2 <span class="hljs-keyword"><span class="hljs-keyword">image</span></span>: sheepdog:localhost:<span class="hljs-number"><span class="hljs-number">8000</span></span>:disk2 <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> <span class="hljs-keyword"><span class="hljs-keyword">format</span></span>: raw virtual <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">4.0</span></span>G (<span class="hljs-number"><span class="hljs-number">4294967296</span></span> bytes) disk <span class="hljs-keyword"><span class="hljs-keyword">size</span></span>: <span class="hljs-number"><span class="hljs-number">4.0</span></span>G root@nod1 :~# find /datastore/obj/ | grep <span class="hljs-number"><span class="hljs-number">825</span></span>dc1 /datastore/obj/meta/<span class="hljs-number"><span class="hljs-number">80825</span></span>dc100000000 /datastore/obj/c1/<span class="hljs-number"><span class="hljs-number">00825</span></span>dc100000000 /datastore/obj/c1/<span class="hljs-number"><span class="hljs-number">00825</span></span>dc100000001</code> </pre> <br><p>  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, Disk2 рдХреЛ рдкреВрд░реНрд╡-рдЖрд╡рдВрдЯрд┐рдд 4 GB VDI рдХреЗ рд░реВрдк рдореЗрдВ рдХрдЪреНрдЪреЗ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ 2 GB рдХреЗ рдмреНрд▓реЙрдХ рдЖрдХрд╛рд░ рдХреЗ рд╕рд╛рде рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛, рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдХреЗрд╡рд▓ рджреЛ 2 GB рд▓реЗрддрд╛ рд╣реИ </p><br><h2 id="eksport-vdi-v-fayl">  рдлрд╝рд╛рдЗрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП VDI рдирд┐рд░реНрдпрд╛рдд рдХрд░реЗрдВ </h2><br><p>  рд╡реАрдбреАрдЖрдИ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдХрдИ рддрд░реАрдХреЛрдВ рд╕реЗ <strong>рд╢реАрдкрдбреЙрдЧ</strong> рд╕реЗ рдирд┐рд░реНрдпрд╛рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд╢рд╛рдпрдж рд╕рдмрд╕реЗ рддреЗрдЬ <strong>рдХреБрддреНрддреЗ рдкрдврд╝рдиреЗ</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд░рд╣реЗ <strong>рд╣реИрдВ</strong> ред  рдХрдорд╛рдВрдб рдереЛрдбрд╝рд╛ рднреНрд░рдорд┐рдд рд╣реИ, рд▓реЗрдХрд┐рди рдЗрд╕рдХрд╛ рдорддрд▓рдм рд╣реИ: "рд╡реАрдбреАрдЖрдИ рдХреА рд╕рд╛рдордЧреНрд░реА рд▓реЛрдб рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рдПрд╕рдЯреАрдбреАрдпреВрдПрд╕рдЯреА рдкрд░ рднреЗрдЬреЗрдВ ..", рдЬрд┐рд╕реЗ рдПрдХ рдлрд╝рд╛рдЗрд▓ рдкрд░ рдкреБрдирд░реНрдирд┐рд░реНрджреЗрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi read disk1 &gt; /backups/soubor.raw</span></span></code> </pre> <br><p>  рдпрджрд┐ VDI рдореЗрдВ 10G рд╣реИ рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ 2G рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рддреЛ рдпрд╣ 10 рдЬреАрдмреА рдХреА рдкреВрд░реА рдХреНрд╖рдорддрд╛ рдХреЗ рд╕рд╛рде рдПрдХ рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдПрдЧрд╛ред </p><br><p>  <strong>рдЗрд╕ рдЖрджреЗрд╢ рдореЗрдВ, VDI рдХреА рд╕рд╛рдордЧреНрд░реА рдЕрдкрд░рд┐рд╡рд░реНрддрд┐рдд рд╣реИрдВ</strong> , рдЗрд╕рд▓рд┐рдП рдпрджрд┐ VDI рдХреА рд╕рд╛рдордЧреНрд░реА, рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рд╕рдВрдХреБрдЪрд┐рдд qcow2 рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдПрдХ рдЖрднрд╛рд╕реА рдбрд┐рд╕реНрдХ, рд╕реАрдзреЗ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИ </p><br><pre> <code class="hljs mel">.. -drive <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">file</span></span>:/disk1_exportovany_z_vdi,..,<span class="hljs-keyword"><span class="hljs-keyword">format</span></span>=qcow2 ..</code> </pre> <br><p>  VDI рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд╛рдиреЗ рдХрд╛ рдПрдХ рдФрд░ рддрд░реАрдХрд╛ рд╣реИ рдХрд┐ <strong>qemu-img Convert</strong> рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ред  рдпрд╣ рдЗрддрдирд╛ рддреЗрдЬрд╝ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдпрд╣ рдЖрдкрдХреЛ рд╕рдВрдмрдВрдзрд┐рдд рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ рдкреНрд░рд╛рд░реВрдк рдХреЗ рд╡рд┐рднрд┐рдиреНрди рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╡реАрдбреАрдЖрдИ рдХреЛ рджреВрд╕рд░реЗ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрджрд▓рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># qemu-img convert -f qcow2 -O file -o preallocation=full,nocow=on sheepdog:localhost:8000:disk1 /disk1_exportovany_z_vdi</span></span></code> </pre> <br><h2 id="inkrementnoe-rezervnoe-kopirovanie">  рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк </h2><br><p>  рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рдмрдирд╛рдПрдБ </p><br><p>  рдкрд╣рд▓реЗ рдФрд░ рджреВрд╕рд░реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рдХреЗ рдмреАрдЪ рдбреЗрд▓реНрдЯрд╛ редред </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi backup test -F snap1 -s snap2 /backups/soubor_diff</span></span></code> </pre> <br><p>  рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рд╕реЗ VDI рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВ </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi restore test -s snap1 /tmp/backup restoring /tmp/backup... done</span></span></code> </pre> <br><p>  рд╡реГрджреНрдзрд┐рд╢реАрд▓ рдмреИрдХрдЕрдк рдЖрдпрд╛рдд рдХрд░рддреЗ рд╕рдордп, VDI рдореЗрдВ рдирд┐рд╢реНрдЪрд┐рдд рд░реВрдк рд╕реЗ рд╕реНрдиреИрдкрд╢реЙрдЯ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрд┐рд╕рд╕реЗ рдмреИрдХрдЕрдк рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред </p><br><p>  рдЫрд╡рд┐ рдкрд░реАрдХреНрд╖рдг рдХреА рдореВрд▓ рд╕рд╛рдордЧреНрд░реА рдХреЛ рдкрдврд╝рдХрд░ рд╕рддреНрдпрд╛рдкрди ... </p><br><pre> <code class="hljs ruby"> root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi read test 0 512 -s 3</span></span></code> </pre> <br><h1 id="import-vdi-iz-fayla">  рдлрд╝рд╛рдЗрд▓ рд╕реЗ VDI рдЖрдпрд╛рдд рдХрд░реЗрдВ </h1><br><p>  рдПрдХ рдореМрдЬреВрджрд╛ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ рдХреЛ рд╕реНрдерд╛рдиреАрдп FS рдлрд╝рд╛рдЗрд▓ рдХреЗ рд░реВрдк рдореЗрдВ рдЖрдпрд╛рдд рдХрд░рдирд╛ рдирд┐рд░реНрдпрд╛рдд рдХреЗ рд╕рдорд╛рди рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  рд▓реЗрдХрд┐рди рдЗрд╕ рдЕрдВрддрд░ рдХреЗ рд╕рд╛рде рдХрд┐ <strong>рдбреЙрдЧ рд░рд╛рдЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ</strong> ("рдПрд╕рдЯреАрдбреАрдЖрдИрдПрди рд╕реЗ рдбреЗрдЯрд╛ рдкрдврд╝рдирд╛ рдФрд░ рд╡реАрдбреАрдЖрдИ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд▓рд┐рдЦрдирд╛ ..") </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi write disk1 &lt; /backups/soubor.raw</span></span></code> </pre> <br><p></p><br><blockquote><ul><li>  рд╕рд╛рдордЧреНрд░реА рдХреЗрд╡рд▓ рдореМрдЬреВрджрд╛ VDI рдореЗрдВ рдЖрдпрд╛рдд рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред </li><li>  рдЖрдпрд╛рддрд┐рдд VDI рд╣рдореЗрд╢рд╛ рдореВрд▓ рдлрд╝рд╛рдЗрд▓ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╕реНрдерд╛рди рд▓реЗрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ VDI рдХреЛ рдкреБрдирд░реНрд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реЗ рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдореЗрдВ рдЪрд┐рд╣реНрдирд┐рдд рдХреНрд╖реЗрддреНрд░ рдкрд░ рдбреЗрдЯрд╛ рд╣реЛрддрд╛ рд╣реИред </li></ul><br></blockquote><p>  рдпрджрд┐ VDI рдЕрднреА рддрдХ рдореМрдЬреВрдж рдирд╣реАрдВ рд╣реИ рдФрд░ рд╣рдореЗрдВ рдирд╣реАрдВ рдкрддрд╛ рдХрд┐ рд╡рд░реНрдЪреБрдЕрд▓ рдбрд┐рд╕реНрдХ рдХреЗ рд▓рд┐рдП рдХрд┐рддрдиреА рдЬрдЧрд╣ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреА, рддреЛ рд╣рдо <strong>qemu-imb рдХрд╛</strong> рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># qemu-img convert -f file -O qcow2 -o redundancy=2:1 ./disk_ukladany_do_vdi sheepdog:localhost:8000:disk</span></span></code> </pre> <br><blockquote>  рд╣рд╛рд▓рд╛рдВрдХрд┐ VDI рдкреНрд░рд╛рд░реВрдк рдЬреИрд╕реЗ qcow2, qed рдФрд░ рдЕрдиреНрдп рдХрд╛ рдЙрдкрдпреЛрдЧ VDI рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред  I / O рджрдХреНрд╖рддрд╛ рдХреЗ рд▓рд┐рдП, рдбреЗрдЯрд╛ рдмреНрд▓реЙрдХ рдХрд╛ рдкреНрд░рдЪрд╛рд░ рдХрд░рдирд╛ рдмреЗрд╣рддрд░ рд╣реИред <br>     ,        <strong>Sheepdog</strong>     VDI. </blockquote><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.sheepdog-project.org/doc/vdi_read_and_write.html</a> </p><br><h1 id="proverka-vdi">  VDI </h1><br><p>    VDI ,      . </p><br><pre> <code class="hljs ruby">root@nod1 <span class="hljs-symbol"><span class="hljs-symbol">:~</span></span><span class="hljs-comment"><span class="hljs-comment"># collie vdi check disk1</span></span></code> </pre> <br><blockquote>    VDI,     .    Sheepdog    ,      .     ,            . </blockquote><p> :   'dog node kill'     ,         ethernet ,   sheep    .          (,    Ethernet),         sheep .               . </p><br><h2 id="io-proizvoditelnost-vdi"> IO  VDI </h2><br><p>  VDI    .          .       ,   IO   VDI. </p><br><p>   <strong>Sheepdog</strong>    SYNC,    .   -,     VFS,   ,       ,       . </p><br><p>       VDI  <strong>Sheepdog</strong>    ,            .              .  <strong>Sheepdog</strong>        VDI-. </p><br><h2 id="ispolzovanie-vfs-kesha-nody">  VFS-  </h2><br><p>      IO  VDI      <strong>sheep</strong>   <strong>-n</strong> .    SYNC         ,   ,        VFS .     ,   VFS  ,   ,      ! </p><br><p>         .            ,          тАФ , ,    . </p><br><pre> <code class="hljs nginx"> <span class="hljs-attribute"><span class="hljs-attribute">sheep</span></span> -n ...</code> </pre> <br><blockquote>   <strong>Sheepdog</strong>      .      <strong>-D</strong> </blockquote><br><h1 id="obektnyy-kesh">   </h1><br><p>     -   .   <strong>sheep</strong>           -   IO тАФ  SSD .  ,   VDI,       SYNC   .             . </p><br><p>       ,   VDI     ,         VDI   . ,     ,     ,      VDI. </p><br><pre> <code class="hljs dos">sheep -w size=<span class="hljs-number"><span class="hljs-number">20000</span></span>,directio,<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span>=/<span class="hljs-built_in"><span class="hljs-built_in">dir</span></span> ...</code> </pre> <br><p> <strong>size</strong> <br>   </p><br><p> <strong>directio</strong> <br>     <strong>sheep</strong>      ,      .      SSD. </p><br><p> <strong>dir</strong> </p><br><pre> <code class="hljs erlang">     ,     .</code> </pre> <br><p>       ( )   <strong>dog</strong> . </p><br><blockquote>        VDI          <strong>dog vd cashe flush</strong> ,     VDI! </blockquote><br><h2 id="zhurnal">  </h2><br><p>   тАФ  .           VDI,     VFS   ,           (/store_dir/journal/[epoch]/[vdi_object_id]),     ,    . </p><br><p>   IO   ,        (cik, cak),   (sequence). </p><br><p>  , <strong>Sheepdog</strong>        VDI ,           ,  SSD-.     ,       VDI    ,           ,                VDI. </p><br><p>        <strong>sheep</strong>      тАФ         </p><br><pre> <code class="hljs matlab">$ sheep -<span class="hljs-built_in"><span class="hljs-built_in">j</span></span> <span class="hljs-built_in"><span class="hljs-built_in">size</span></span>=<span class="hljs-number"><span class="hljs-number">256</span></span>M ...</code> </pre> <br><p>       ,  VDI      ,    .        -,   тАФ   тАФ         -: </p><br><pre> <code class="hljs matlab">$ sheep -<span class="hljs-built_in"><span class="hljs-built_in">j</span></span> dir=/dir,<span class="hljs-built_in"><span class="hljs-built_in">size</span></span>=<span class="hljs-number"><span class="hljs-number">256</span></span>M ...</code> </pre> <br><p>  dir =      ,          .       ,     SW RAID     SSD. </p><br><p> <strong>:</strong>    <strong>sheep</strong>     ,    .     ,      skip,   . </p><br><pre> <code class="hljs matlab">$ sheep -<span class="hljs-built_in"><span class="hljs-built_in">j</span></span> dir=/dir,<span class="hljs-built_in"><span class="hljs-built_in">size</span></span>=<span class="hljs-number"><span class="hljs-number">256</span></span>M,skip ...</code> </pre> <br><hr><br><ol><li> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">тЖС</a> <a name="cite_note-1"></a> .       2015 . <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://events.linuxfoundation.jp/sites/events/files/slides/COJ2015_Sheepdog_20150604.pdf</a></sup> </li><li> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">тЖС</a> <a name="cite_note-2"></a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.abclinuxu.cz/blog/kenyho_stesky/2011/11/sheepdog-hrajeme-si-v-hampejzu</a></sup> </li><li> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">тЖС</a> <a name="cite_note-3"></a> SPOF ( <strong>S</strong> ingle <strong>p</strong> oint <strong>o</strong> f <strong>f</strong> ailure) ,             .  SPOF   VDI   iSCSI  <strong>tgtd</strong></sup> </li><li> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">тЖС</a> <a name="cite_note-4"></a></sup>  <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">1</a></sup> </li><li><p> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">тЖС</a> <a name="cite_note-5"></a> Btrfs тАФ    COW,       ,        .   ,      -,      .      ,     ,              .      ,         ,   .  ,     :</sup> </p><br><p> <sup>autodefrag тАФ     ,          .</sup> </p><br><p> <sup>      </sup> </p><br><p> <sup>nocow тАФ           (),      тАФ           GlusterFS</sup> </p><br><p> <sup> Btrfs   ,     ,     FS,       <strong>Sheepdog</strong> .</sup> </p><br><ul><li> <sup>    ,   ,    ,      </sup> </li><li> <sup>  multipath,                         .</sup> </li></ul><br><p> <sup>,  ,        ,        Sheepdog.</sup> </p><br></li><li><p> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">тЖС</a> <a name="cite_note-6"></a> <strong>Ext2</strong> .     -  FS  Btrfs,    ext2,     inode.    ext3  ext4     .   inode , Sheepdog          . ,      -,   .           ,   <strong>Sheepdog</strong>      ,         <strong>dog vdi check</strong> . ,  ext2  ,            тАФ    -     <strong>dog vdi md</strong> ,       VDI     .</sup> </p><br></li><li> <sup><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">тЖС</a> <a name="cite_note-7"></a>    ,   , <strong>vdi</strong>   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">QEMU_Block_Disk</a></sup> </li></ol><br><h1 id="ssylki">  рд╕рдВрджрд░реНрдн </h1><br><p> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">https://github.com/collie/sheepdog/wiki</a> тАФ ,        <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.osrg.net/sheepdog/</a> тАФ    Nippon Telegraph and Telephone Corporation <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.sheepdog-project.org/doc/index.html</a> тАФ   Sheepdog   0.8.0;  тАФ Valerio Pachera <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">http://www.admin-magazine.com/Archive/2014/23/Distributed-storage-with-Sheepdog</a> тАФ  Udo Seidela   <strong>Sheepdog</strong> ,   23-   Admin   2014  </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi412739/">https://habr.com/ru/post/hi412739/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi412725/index.html">рдХреИрд╕реЗ рдЕрдкрдиреЗ рдЖрдИрдЯреА рдмреБрдирд┐рдпрд╛рджреА рдврд╛рдВрдЪреЗ рдХреЛ рдЙрдмрд╛рдК рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi412727/index.html">2018 рдореЗрдВ рдкреНрд░реЛрдЯреЛрдЯрд╛рдЗрдк рдХреЗ рд▓рд┐рдП рдЯреВрд▓ рдХреИрд╕реЗ рдЪреБрдиреЗрдВ?</a></li>
<li><a href="../hi412729/index.html">GDPRред рдХреНрдпрд╛ рд░реВрд╕ рдореЗрдВ рдЗрд╕реЗ рдкреНрд░рджрд░реНрд╢рди рдХрд░рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ?</a></li>
<li><a href="../hi412735/index.html">рдПрдЯреАрдПрдо рдЕрдХреЗрд▓реЗ рдЫреЛрдбрд╝ рджреЗрдВ PHDays 8 рдкрд░ рдкреНрд░рддрд┐рдпреЛрдЧрд┐рддрд╛</a></li>
<li><a href="../hi412737/index.html">3 рдмрд┐рд▓рд┐рдпрди рд▓реЛрдЧреЛрдВ рдХреЗ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдбреЗрдЯрд╛ рдХреА рд╕реБрд░рдХреНрд╖рд╛ - рдмреНрд░рд┐рдХреНрд╕ рджреЗрд╢реЛрдВ рдореЗрдВ рдХрд╛рдиреВрди рдореЗрдВ рд╕рдорд╛рдирддрд╛рдПрдВ рдФрд░ рдЕрдВрддрд░</a></li>
<li><a href="../hi412741/index.html">рдХреИрд╕реЗ рдбрд░рдиреЗ рд╕реЗ рд░реЛрдХреЗрдВ рдХрд┐ рдХреГрддреНрд░рд┐рдо рдмреБрджреНрдзрд┐ рдЖрдкрдХреЛ рдмрд┐рдирд╛ рдХрд╛рдо рдХреЗ рдЫреЛрдбрд╝ рджреЗрдЧреА</a></li>
<li><a href="../hi412743/index.html">рдкреЗрд╢реЗ: рд╕рд╛рдЗрдмрд░ рдЬрд╛рд╕реВрд╕</a></li>
<li><a href="../hi412747/index.html">рдЖрдИрдЖрдИрдПред рдЪрд┐рдХрд┐рддреНрд╕рд╛ рдбреЗрдЯрд╛ рднрдВрдбрд╛рд░рдг</a></li>
<li><a href="../hi412749/index.html">рдПрдХ рдХрд▓рд╛ рдХреЗ рд░реВрдк рдореЗрдВ рдЗрд▓реЗрдХреНрдЯреНрд░реЙрдирд┐рдХреНрд╕: рд╡рд┐рджреНрдпреБрдд рдкреНрд░рд╡рд╛рд╣</a></li>
<li><a href="../hi412751/index.html">рдЧрдВрдЬрд╛рдкрди: рдЙрдкрдЪрд╛рд░ рдХрд╛ рд╕рд┐рджреНрдзрд╛рдВрдд рдФрд░ рдЕрднреНрдпрд╛рд╕, рднрд╛рдЧ 1 "рдореЗрд░рд╛ рдбрд╛рдпрд╣рд╛рдЗрдбреНрд░реЛрдЯреЗрд╕реНрдЯреЛрд╕реНрдЯреЗрд░реЛрди, рдореЗрд░рд╛ рджреБрд╢реНрдорди"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>