<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚úèÔ∏è üòõ üë©üèæ‚Äçüöí Introdu√ß√£o ao CatBoost. Relat√≥rio Yandex üçä üí∞ ‚§µÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Meu nome √© Stas Kirillov, sou um desenvolvedor l√≠der no grupo de plataformas ML em Yandex. Estamos desenvolvendo ferramentas de aprendizado de m√°quina...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introdu√ß√£o ao CatBoost. Relat√≥rio Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/458790/">  Meu nome √© Stas Kirillov, sou um desenvolvedor l√≠der no grupo de plataformas ML em Yandex.  Estamos desenvolvendo ferramentas de aprendizado de m√°quina, dando suporte e desenvolvendo infraestrutura para elas.  Abaixo est√° minha recente conversa sobre como a biblioteca CatBoost funciona.  No relat√≥rio, falei sobre os pontos de entrada e os recursos do c√≥digo para quem deseja entend√™-lo ou se tornar nosso colaborador. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ySla2kczbeM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - O CatBoost vive no GitHub sob a licen√ßa Apache 2.0, ou seja, √© aberto e gratuito para todos.  O projeto est√° em desenvolvimento ativo, agora nosso reposit√≥rio tem mais de quatro mil estrelas.  O CatBoost √© escrito em C ++, √© uma biblioteca para aumento de gradiente em √°rvores de decis√£o.  Ele suporta v√°rios tipos de √°rvores, incluindo as chamadas √°rvores "sim√©tricas", que s√£o usadas na biblioteca por padr√£o. <br><br><a name="habracut"></a>  Qual √© o lucro de nossas √°rvores alheias?  Eles aprendem rapidamente, aplicam-se rapidamente e ajudam a aprender a ser mais resistente √† altera√ß√£o de par√¢metros em termos de altera√ß√µes na qualidade final do modelo, o que reduz bastante a necessidade de sele√ß√£o de par√¢metros.  Nossa biblioteca √© para facilitar o uso na produ√ß√£o, aprender r√°pido e obter boa qualidade imediatamente. <br><br><img src="https://habrastorage.org/webt/wv/0s/8f/wv0s8fv32vjvrpihdkyek1uv-yu.jpeg"><br><br>  O aumento de gradiente √© um algoritmo no qual constru√≠mos preditores simples que melhoram nossa fun√ß√£o objetivo.  Ou seja, em vez de construir imediatamente um modelo complexo, criamos muitos modelos pequenos por sua vez. <br><br><img src="https://habrastorage.org/webt/nn/jd/e0/nnjde08vq2zueuftpfs6nv1pemw.jpeg"><br><br>  Como est√° o processo de aprendizado no CatBoost?  Eu vou te dizer como isso funciona em termos de c√≥digo.  Primeiro, analisamos os par√¢metros de treinamento que o usu√°rio passa, os validamos e depois verificamos se precisamos carregar os dados.  Como os dados j√° podem ser carregados - por exemplo, em Python ou R. Em seguida, carregamos os dados e constru√≠mos uma grade a partir das bordas para quantificar os recursos num√©ricos.  Isso √© necess√°rio para acelerar o aprendizado. <br><br>  Caracter√≠sticas categ√≥ricas, processamos um pouco diferente.  Categorizamos os recursos desde o in√≠cio e, em seguida, renumeramos os hashes de zero ao n√∫mero de valores exclusivos do recurso categ√≥rico para ler rapidamente combina√ß√µes de recursos categ√≥ricos. <br><br>  Em seguida, lan√ßamos o ciclo de treinamento diretamente - o principal ciclo de nosso aprendizado de m√°quina, onde iterativamente constru√≠mos √°rvores.  Ap√≥s esse ciclo, o modelo √© exportado. <br><br><img src="https://habrastorage.org/webt/ed/m6/lm/edm6lmnfi6ub-9ocgvxci6x7usm.jpeg"><br><br>  O pr√≥prio ciclo de treinamento consiste em quatro pontos.  Primeiro, estamos tentando construir uma √°rvore.  Em seguida, analisamos que tipo de aumento ou diminui√ß√£o da qualidade isso oferece.  Em seguida, verificamos se nosso detector de reciclagem funcionou.  Ent√£o, se for a hora certa, salvamos o instant√¢neo. <br><br><img src="https://habrastorage.org/webt/wn/es/f2/wnesf2muxq15auqojtipuwjzrjk.jpeg"><br><br>  Aprender uma √∫nica √°rvore √© um ciclo atrav√©s dos n√≠veis das √°rvores.  No in√≠cio, selecionamos aleatoriamente uma permuta√ß√£o de dados se usarmos o refor√ßo ordenado ou tivermos recursos categ√≥ricos.  Ent√£o contamos os contadores nessa permuta√ß√£o.  Em seguida, tentamos escolher avidamente boas divis√µes nesta √°rvore.  Por divis√µes, queremos dizer simplesmente certas condi√ß√µes bin√°rias: tal e tal caracter√≠stica num√©rica √© maior que tal ou tal valor, ou tal e tal contador por caracter√≠stica categ√≥rica √© maior que tal e tal valor. <br><br>  Como √© organizado o ciclo de n√≠vel de √°rvore gananciosa?  No in√≠cio, a inicializa√ß√£o √© feita - n√≥s pesamos novamente ou amostramos os objetos, ap√≥s o qual apenas os objetos selecionados ser√£o usados ‚Äã‚Äãpara construir a √°rvore.  O Bootstrap tamb√©m pode ser recontado antes de selecionar cada divis√£o, se a op√ß√£o de amostragem em cada n√≠vel estiver ativada. <br><br>  Em seguida, agregamos as derivadas em histogramas, como fazemos para cada candidato dividido.  Usando histogramas, tentamos avaliar a mudan√ßa na fun√ß√£o objetivo que ocorrer√° se selecionarmos esse candidato dividido. <br><br>  Selecionamos o candidato com a melhor velocidade e o adicionamos √† √°rvore.  Em seguida, calculamos as estat√≠sticas usando essa √°rvore selecionada nas permuta√ß√µes restantes, atualizamos o valor nas folhas nessas permuta√ß√µes, calculamos os valores nas folhas para o modelo e prosseguimos para a pr√≥xima itera√ß√£o do loop. <br><br><img src="https://habrastorage.org/webt/7s/bd/dt/7sbddtjen2ktfvjvgccack2hrrm.jpeg"><br><br>  √â muito dif√≠cil destacar um local onde o treinamento √© realizado; portanto, neste slide - voc√™ pode us√°-lo como um ponto de entrada - os principais arquivos que usamos para o treinamento est√£o listados.  Trata-se de greedy_tensor_search, no qual vivemos o pr√≥prio procedimento para a sele√ß√£o gananciosa de divis√µes.  Este √© o train.cpp, onde temos a principal f√°brica de treinamento de CPU.  Isto √© aprox_calcer, onde est√£o as fun√ß√µes de atualiza√ß√£o dos valores nas folhas.  E tamb√©m score_calcer - uma fun√ß√£o para avaliar algum candidato. <br><br>  Partes igualmente importantes s√£o catboost.pyx e core.py.  Esse √© o c√≥digo do wrapper python, provavelmente muitos de voc√™s incorporar√£o algum tipo de material no wrapper python.  Nosso wrapper python √© escrito em Cython, o Cython √© traduzido em C ++, portanto esse c√≥digo deve ser r√°pido. <br><br>  Nosso wrapper R est√° na pasta R-package.  Talvez algu√©m tenha que adicionar ou consertar algumas op√ß√µes; para op√ß√µes, temos uma biblioteca separada - catboost / libs / options. <br><br>  Viemos de Arcadia para o GitHub, por isso temos muitos artefatos interessantes que voc√™ encontrar√°. <br><br><img src="https://habrastorage.org/webt/wc/aw/as/wcawas_io1tv2tsyir8wv9y9ewu.jpeg"><br><br><img src="https://habrastorage.org/webt/yc/w6/or/ycw6or5ltsotncff_edmb_aq_4e.jpeg"><br><br>  Vamos come√ßar com a estrutura do reposit√≥rio.  Temos uma pasta util onde as primitivas b√°sicas s√£o: vetores, mapas, sistemas de arquivos, trabalho com strings, streams. <br><br>  Temos uma biblioteca na qual as bibliotecas compartilhadas usadas pelo Yandex est√£o localizadas - muitas, n√£o apenas o CatBoost. <br><br>  A pasta CatBoost e contrib √© o c√≥digo das bibliotecas de terceiros √†s quais vinculamos. <br><br>  Vamos agora falar sobre as primitivas de C ++ que voc√™ encontrar√°.  O primeiro s√£o indicadores inteligentes.  No Yandex, usamos THolder desde std :: unique_ptr, e MakeHolder √© usado em vez de std :: make_unique. <br><br><img src="https://habrastorage.org/webt/vo/uy/dw/vouydw0bfucjevtxvyttk36rkim.jpeg"><br><br>  N√≥s temos nosso pr√≥prio SharedPtr.  Al√©m disso, ele existe em duas formas, SimpleSharedPtr e AtomicSharedPtr, que diferem no tipo de contador.  Em um caso, √© at√¥mico, o que significa que como se v√°rios fluxos pudessem possuir um objeto.  Portanto, ser√° seguro do ponto de vista da transfer√™ncia entre fluxos. <br><br>  Uma classe separada, IntrusivePtr, permite que voc√™ possua objetos herdados da classe TRefCounted, ou seja, classes que possuem um contador de refer√™ncia incorporado.  Isso √© para alocar esses objetos por vez, sem alocar adicionalmente um bloco de controle com um contador. <br><br>  Tamb√©m temos nosso pr√≥prio sistema de entrada e sa√≠da.  IInputStream e IOutputStream s√£o interfaces para entrada e sa√≠da.  Eles t√™m m√©todos √∫teis, como ReadTo, ReadLine, ReadAll, em geral, tudo o que √© esperado de InputStreams.  E temos implementa√ß√µes desses fluxos para trabalhar com o console: Cin, Cout, Cerr e Endl separadamente, que √© semelhante ao std :: endl, ou seja, libera o fluxo. <br><br><img src="https://habrastorage.org/webt/n4/cs/wa/n4cswarvhmfpciuulxej55cbea8.jpeg"><br><br>  Tamb√©m temos nossas pr√≥prias implementa√ß√µes de interface para arquivos: TInputFile, TOutputFile.  Esta √© uma leitura em buffer.  Eles implementam leitura em buffer e grava√ß√£o em buffer em um arquivo, para que voc√™ possa us√°-los. <br><br>  Util / system / fs.h possui os m√©todos NFs :: Exists e NFs :: Copy, se voc√™ precisar copiar algo repentinamente ou verificar se realmente existe algum arquivo. <br><br><img src="https://habrastorage.org/webt/a0/vq/4z/a0vq4zt1s-biymm5n2y4bix80a0.jpeg"><br><br>  N√≥s temos nossos pr√≥prios cont√™ineres.  Eles passaram a usar std :: vector h√° algum tempo, ou seja, eles simplesmente herdam de std :: vector, std :: set e std :: map, mas tamb√©m temos nosso pr√≥prio THashMap e THashSet, que em parte possuem interfaces compat√≠veis com unordered_map e unordered_set.  Mas, para algumas tarefas, eles se mostraram mais r√°pidos, por isso ainda os usamos. <br><br><img src="https://habrastorage.org/webt/h-/he/go/h-hegomeoamviz05exj_rt03bzg.jpeg"><br><br>  As refer√™ncias de matriz s√£o an√°logas ao std :: span do C ++.  √â verdade que ele apareceu conosco n√£o no vig√©simo ano, mas muito antes.  N√≥s o usamos ativamente para transferir refer√™ncias a matrizes, como se alocadas em buffers grandes, para n√£o alocar buffers tempor√°rios todas as vezes.  Suponha que, para contar derivadas ou algumas aproxima√ß√µes, possamos alocar mem√≥ria em algum buffer grande pr√©-alocado e passar apenas TArrayRef para a fun√ß√£o de contagem.  √â muito conveniente e usamos muito. <br><br><img src="https://habrastorage.org/webt/18/f0/km/18f0kmuuuuigc-j7zdck_yzn_qi.jpeg"><br><br>  O Arcadia usa seu pr√≥prio conjunto de classes para trabalhar com strings.  Primeiro, TStingBuf - um an√°logo de str :: string_view do C ++ 17. <br><br>  TString n√£o √© de todo std :: sting, √© uma string CopyOnWrite, portanto voc√™ precisa trabalhar com ela com muito cuidado.  Al√©m disso, TUtf16String √© o mesmo TString, apenas seu tipo base n√£o √© char, mas wchar de 16 bits. <br><br>  E temos ferramentas para converter de string para string.  Este √© o ToString, que √© um an√°logo de std :: to_string e FromString emparelhado com o TryFromString, que permite transformar a string no tipo que voc√™ precisa. <br><br><img src="https://habrastorage.org/webt/2f/fo/jv/2ffojvcw39thuqmjwps2cl2kreu.jpeg"><br><br>  N√≥s temos nossa pr√≥pria estrutura de exce√ß√£o, a exce√ß√£o b√°sica nas bibliotecas de arcade √© a exce√ß√£o, que herda de std :: exception.  Temos uma macro ythrow que adiciona informa√ß√µes sobre o local onde a exce√ß√£o foi lan√ßada na yexception, √© apenas um inv√≥lucro conveniente. <br><br>  Existe um an√°logo de std :: current_exception - CurrentExceptionMessage, essa fun√ß√£o lan√ßa a exce√ß√£o atual como uma string. <br><br>  Existem macros para afirma√ß√µes e verifica√ß√µes - s√£o Y_ASSERT e Y_VERIFY. <br><br><img src="https://habrastorage.org/webt/ac/ao/di/acaodinndi3xj9hr7kiju_vreew.jpeg"><br><br>  E n√≥s temos nossa pr√≥pria serializa√ß√£o embutida, √© bin√°ria e n√£o se destina a transferir dados entre diferentes revis√µes.  Em vez disso, essa serializa√ß√£o √© necess√°ria para transferir dados entre dois bin√°rios da mesma revis√£o, por exemplo, no aprendizado distribu√≠do. <br><br>  Aconteceu que temos duas vers√µes de serializa√ß√£o no CatBoost.  A primeira op√ß√£o funciona atrav√©s dos m√©todos de interface Salvar e Carregar, que serializam no fluxo.  Outra op√ß√£o √© usada em nosso treinamento distribu√≠do: ele usa uma biblioteca BinSaver interna bastante antiga, conveniente para serializar objetos polim√≥rficos que devem ser registrados em uma f√°brica especial.  Isso √© necess√°rio para o treinamento distribu√≠do, sobre o qual √© improv√°vel que tenhamos tempo para conversar aqui. <br><br><img src="https://habrastorage.org/webt/lb/oa/q9/lboaq9rvcuexqpoea75mbnbve8g.jpeg"><br><br>  Tamb√©m temos nosso pr√≥prio boost_optional anal√≥gico ou std :: optional - TMaybe.  An√°logo de std :: variant - TVariant.  Voc√™ precisa us√°-los. <br><br><img src="https://habrastorage.org/webt/fd/eg/xo/fdegxof00jzhggi1slypv6s_uvi.jpeg"><br><br>  H√° uma certa conven√ß√£o de que, dentro do c√≥digo CatBoost, lan√ßamos uma TCatBoostException em vez de uma yexception.  Essa √© a mesma exce√ß√£o, apenas o rastreamento de pilha √© sempre adicionado quando √© lan√ßado. <br><br>  E tamb√©m usamos a macro CB_ENSURE para verificar convenientemente algumas coisas e lan√ßar exce√ß√µes, se n√£o forem executadas.  Por exemplo, geralmente usamos isso para analisar op√ß√µes ou analisar par√¢metros passados ‚Äã‚Äãpelo usu√°rio. <br><br><img src="https://habrastorage.org/webt/qn/ut/jk/qnutjk-36n7wnibgpx_1xvhzsw4.jpeg"><br><h5>  <sup><sub>Links do slide: <a href="">primeiro</a> , <a href="">segundo</a></sub></sup> </h5><br>  Antes de come√ßar, recomendamos que voc√™ se familiarize com o estilo do c√≥digo, que consiste em duas partes.  O primeiro √© um estilo de c√≥digo de arcada geral, que fica diretamente na raiz do reposit√≥rio no arquivo CPP_STYLE_GUIDE.md.  Tamb√©m na raiz do reposit√≥rio h√° um guia separado para nossa equipe: catboost_command_style_guide_extension.md. <br><br>  Estamos tentando formatar o c√≥digo Python usando o PEP8.  Nem sempre funciona, porque para o c√≥digo Cython, o linter n√£o funciona para n√≥s e, √†s vezes, algo acontece com o PEP8. <br><br><img src="https://habrastorage.org/webt/dp/cl/kg/dpclkg4wxn_ilcriilpquvfpihk.jpeg"><br><br>  Quais s√£o as caracter√≠sticas da nossa montagem?  O conjunto Arcadia foi originalmente destinado a coletar os aplicativos mais herm√©ticos, ou seja, que haveria um m√≠nimo de depend√™ncias externas devido √† vincula√ß√£o est√°tica.  Isso permite que voc√™ use o mesmo bin√°rio em diferentes vers√µes do Linux sem recompilar, o que √© bastante conveniente.  As metas de montagem s√£o descritas nos arquivos ya.make.  Um exemplo de ya.make pode ser visto no pr√≥ximo slide. <br><br><img src="https://habrastorage.org/webt/ua/zz/eh/uazzehw8w6k-2lo2f49jyk_tv9e.jpeg"><br><br>  Se de repente voc√™ quiser adicionar algum tipo de biblioteca, programa ou outra coisa, voc√™ pode, primeiro, apenas olhar nos arquivos ya.make vizinhos e, em segundo lugar, usar este exemplo.  Aqui listamos os elementos mais importantes do ya.make.  No in√≠cio do arquivo, dizemos que queremos declarar uma biblioteca e, em seguida, listamos as unidades de compila√ß√£o que queremos colocar nessa biblioteca.  Aqui podem estar os dois arquivos cpp e, por exemplo, arquivos pyx para os quais o Cython ser√° iniciado automaticamente e, em seguida, o compilador.  As depend√™ncias da biblioteca s√£o listadas atrav√©s da macro PEERDIR.  Ele simplesmente grava os caminhos para a pasta com a biblioteca ou com outro artefato, relativo √† raiz do reposit√≥rio. <br><br>  Existe uma coisa √∫til, GENERATE_ENUM_SERIALIZATION, necess√°ria para gerar m√©todos ToString, FromString para classes de enumera√ß√£o e enumera√ß√µes descritas em algum arquivo de cabe√ßalho que voc√™ passa para essa macro. <br><br><img src="https://habrastorage.org/webt/gj/w3/rq/gjw3rq4uayzgspxh4sj95pcgime.jpeg"><br><br>  Agora, a coisa mais importante - como compilar e executar algum tipo de teste.  Na raiz do reposit√≥rio est√° o script ya, que baixa os kits de ferramentas e ferramentas necess√°rias, e possui o comando ya make, o subcomando make, que permite criar uma vers√£o -r com uma op√ß√£o -d e uma vers√£o de depura√ß√£o com a op√ß√£o -d.  Os artefatos s√£o transmitidos e separados por um espa√ßo. <br><br>  Para criar o Python, apontei imediatamente aqui bandeiras que podem ser √∫teis.  Estamos falando de criar com o sistema Python, neste caso com o Python 3. Se voc√™ repentinamente tiver um CUDA Toolkit instalado em seu laptop ou m√°quina de desenvolvimento, para uma montagem mais r√°pida, recomendamos especificar o sinalizador ‚Äìd have_cuda no.  O CUDA √© desenvolvido por algum tempo, especialmente em sistemas de 4 n√∫cleos. <br><br><img src="https://habrastorage.org/webt/eg/sn/4k/egsn4kcvq8bepyogckxf0p1vylw.jpeg"><br><br>  Ya ide j√° deve funcionar.  Esta √© uma ferramenta que ir√° gerar uma solu√ß√£o clion ou qt para voc√™.  E para aqueles que vieram com o Windows, temos uma solu√ß√£o Microsoft Visual Studio, que fica na pasta msvs. <br><br>  Ouvinte: <br>  - Voc√™ tem todos os testes atrav√©s do wrapper Python? <br><br>  Stas: <br>  - N√£o, temos separadamente testes que est√£o na pasta pytest.  Estes s√£o testes da nossa interface CLI, ou seja, do nosso aplicativo.  √â verdade que eles funcionam atrav√©s do pytest, ou seja, s√£o fun√ß√µes do Python nas quais fazemos uma chamada de verifica√ß√£o de subprocesso e verificamos que o programa n√£o falha e funciona corretamente com alguns par√¢metros. <br><br>  Ouvinte: <br>  - E os testes de unidade em C ++? <br><br>  Stas: <br>  - Tamb√©m temos testes de unidade em C ++.  Eles geralmente est√£o na pasta lib em subpastas ut.  E eles s√£o escritos assim - teste de unidade ou teste de unidade para.  Existem exemplos.  Existem macros especiais para declarar uma classe de teste de unidade e registros separados para a fun√ß√£o de teste de unidade. <br><br>  Ouvinte: <br>  - Para verificar se nada quebrou, √© melhor iniciar esses e aqueles? <br><br>  Stas: <br>  Sim.  A √∫nica coisa √© que nossos testes de c√≥digo aberto s√£o verdes apenas no Linux.  Portanto, se voc√™ compilar, por exemplo, no Mac, se cinco testes falharem, n√£o haver√° motivo para preocupa√ß√£o.  Devido √† diferente implementa√ß√£o do expositor em diferentes plataformas ou outras diferen√ßas menores, os resultados podem ser muito diferentes. <br><br><img src="https://habrastorage.org/webt/kr/bs/n0/krbsn0v7mas3stqnhzg19l_uwrq.jpeg"><br><br>  Por um exemplo, vamos fazer uma tarefa.  Eu gostaria de mostrar um exemplo.  Temos um arquivo com tarefas - open_problems.md.  Vamos resolver o problema ‚Ññ4 de open_problems.md.  Ele √© formulado da seguinte maneira: se o usu√°rio definir a taxa de aprendizado como zero, devemos cair de TCatBoostException.  Voc√™ precisa adicionar a valida√ß√£o de op√ß√µes. <br><br><img src="https://habrastorage.org/webt/ut/uu/hq/utuuhqx7huwgb0cuqoolyy253vm.jpeg"><br><br>  Primeiro, precisamos criar uma ramifica√ß√£o, clonar nosso fork, origem do clone, origem pop, executar a origem no fork e, em seguida, criar um branch e come√ßar a trabalhar nele. <br><br>  Como a an√°lise de op√ß√µes funciona?  Como eu disse, temos uma importante pasta catboost / libs / options onde a an√°lise de todas as op√ß√µes √© armazenada. <br><br><img src="https://habrastorage.org/webt/e-/n4/bi/e-n4bi3t-z6l5fedfrlaexyeiza.jpeg"><br><br>  Temos todas as op√ß√µes armazenadas no wrapper TOption, o que nos permite entender se a op√ß√£o foi substitu√≠da pelo usu√°rio.  Caso contr√°rio, ele mant√©m algum valor padr√£o em si.  Em geral, o CatBoost analisa todas as op√ß√µes na forma de um grande dicion√°rio JSON, que durante a an√°lise se transforma em dicion√°rios e estruturas aninhados. <br><br><img src="https://habrastorage.org/webt/bm/zo/ch/bmzochyhm--wr1cwi9jg5snn3aq.jpeg"><br><br>  De alguma forma, descobrimos - por exemplo, pesquisando com um grep ou lendo o c√≥digo - que temos a taxa de aprendizado em TBoostingOptions.  Vamos tentar escrever um c√≥digo que simplesmente adicione CB_ENSURE, que nossa taxa de aprendizado seja mais que std :: numeric_limits :: epsilon, que o usu√°rio inseriu algo mais ou menos razo√°vel. <br><br><img src="https://habrastorage.org/webt/1m/u1/ay/1mu1ay3e5usvwwp51l1ctaxjtqy.jpeg"><br><br>  Aqui apenas usamos a macro CB_ENSURE, escrevemos algum c√≥digo e agora queremos adicionar testes. <br><br><img src="https://habrastorage.org/webt/ut/sb/gq/utsbgqg6miybtxhekflu0w6frie.jpeg"><br><br>  Nesse caso, adicionamos um teste na interface da linha de comandos.  Na pasta pytest, temos o script test.py, onde j√° existem alguns exemplos de testes e voc√™ pode escolher um que se pare√ßa com a sua tarefa, copi√°-lo e alterar os par√¢metros para que comece a cair ou n√£o cair, dependendo dos par√¢metros que voc√™ passou.  Nesse caso, apenas pegamos e criamos um pool simples de duas linhas.  (Chamamos os conjuntos de dados no Yandex. Essa √© a nossa peculiaridade.) E depois verificamos se nosso bin√°rio realmente cai se passarmos a taxa de aprendizado 0,0. <br><br><img src="https://habrastorage.org/webt/xb/uk/jn/xbukjnn55irccxybobjki-b8iyw.jpeg"><br><br>  Tamb√©m adicionamos um teste ao python-package, localizado em atBoost / python-package / ut / medium.  Tamb√©m temos grandes e grandes testes relacionados a testes para a cria√ß√£o de pacotes de roda python. <br><br><img src="https://habrastorage.org/webt/ki/jh/1p/kijh1pd1b8rdeyr2scg82dbjtis.jpeg"><br><br>  Al√©m disso, temos chaves para voc√™ criar - -t e -A.  -t executa testes, -A for√ßa todos os testes a serem executados, independentemente de terem tags grandes ou m√©dias. <br><br>  Aqui, por beleza, tamb√©m usei um filtro chamado test.  √â definido usando a op√ß√£o -F e o nome do teste especificado posteriormente, que podem ser caracteres de caracteres selvagens.  Nesse caso, usei test.py::test_zero_learning_rate*, porque, observando nossos testes de pacotes python, voc√™ ver√°: quase todas as fun√ß√µes usam um dispositivo de tipo de tarefa.  Isso √© feito de acordo com o c√≥digo, nossos testes de pacotes python t√™m a mesma apar√™ncia para aprendizado de CPU e GPU e podem ser usados ‚Äã‚Äãpara testes de instrutor de GPU e CPU. <br><br><img src="https://habrastorage.org/webt/hz/qj/yf/hzqjyf9cp0mlftldhq74zot4nya.jpeg"><br><br><img src="https://habrastorage.org/webt/d_/qx/g2/d_qxg2fyla89bki38tdx5o3gc68.jpeg"><br><br>  Em seguida, confirme nossas altera√ß√µes e envie-as para o reposit√≥rio bifurcado.  Publicamos a solicita√ß√£o de pool.  Ele j√° entrou, est√° tudo bem. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt458790/">https://habr.com/ru/post/pt458790/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt458778/index.html">Mecanismo de relat√≥rios do Satellite 6.5: o que e por qu√™</a></li>
<li><a href="../pt458782/index.html">Adapta√ß√£o de programas do ZX Spectrum ao TR-DOS por meios modernos. Parte 3</a></li>
<li><a href="../pt458784/index.html">Transmita projetos e bibliotecas do Altium Designer para o PADS Professional</a></li>
<li><a href="../pt458786/index.html">Os mantenedores de videogame mant√™m a cultura do jogo passo a passo</a></li>
<li><a href="../pt458788/index.html">Modelos personalizados no GTM: um exemplo</a></li>
<li><a href="../pt458792/index.html">Funcion√°rios ‚Äúqueimados‚Äù: existe uma sa√≠da?</a></li>
<li><a href="../pt458794/index.html">Reuni√£o de analistas de neg√≥cios na Redmadrobot 18 de julho</a></li>
<li><a href="../pt458796/index.html">Como preparar seu site para cargas de trabalho pesadas: 5 dicas pr√°ticas e ferramentas √∫teis</a></li>
<li><a href="../pt458798/index.html">Bot nutriente ou como eu quero pegar p√£o de instrutores de fitness</a></li>
<li><a href="../pt458800/index.html">Aprendizagem profunda. Aprendizado Federado</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>