<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíó üôà üë®‚Äçüè≠ ¬øC√≥mo escribir programas en la uni√≥n del desarrollo m√≥vil y los algoritmos? Yandex concurso e historias üßë‚Äçü§ù‚Äçüßë üôåüèª üò≤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Del 10 al 22 de septiembre, se llevar√° a cabo el concurso de desarrollo m√≥vil Yandex.Blitz. El registro est√° abierto . Blitz es un camino corto para l...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øC√≥mo escribir programas en la uni√≥n del desarrollo m√≥vil y los algoritmos? Yandex concurso e historias</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/420305/">  Del 10 al 22 de septiembre, se llevar√° a cabo el concurso de desarrollo m√≥vil Yandex.Blitz.  El registro est√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">abierto</a> .  Blitz es un camino corto para llegar a Yandex: los 5 mejores participantes deber√°n aprobar con √©xito una secci√≥n de la entrevista en lugar de las cuatro est√°ndar para obtener una oferta de trabajo. <br><br>  Con motivo del concurso, hablamos con colegas sobre tareas interesantes que se aplican inmediatamente a plataformas y algoritmos m√≥viles.  Hoy compartiremos sus historias con los lectores de Habr. <br><br><img src="https://habrastorage.org/webt/3z/_5/ry/3z_5rygov_eu9yhgyzngfbv6vmy.png"><br><br>  Se cree que el desarrollo de aplicaciones m√≥viles es algo especial, lejos de la programaci√≥n en el sentido general, y los especialistas que escriben para Android e iOS nunca encuentran la soluci√≥n de tareas intensivas en algoritmos, limit√°ndose a conectar bibliotecas preparadas, dise√±o de pantallas, escribir l√≥gica comercial simple y investigando errores de una plataforma espec√≠fica.  Pero no tan simple. <br><br><a name="habracut"></a>  Crear software para dispositivos m√≥viles siempre est√° lleno de limitaciones.  Incluso en dispositivos de gama alta, las CPU y GPU no son tan potentes y no tienen tanta memoria como en una computadora moderna.  Al mismo tiempo, la parte principal del mercado son los tel√©fonos inteligentes econ√≥micos con hardware a√∫n m√°s d√©bil.  Sus propietarios se ven particularmente afectados por la falta de recursos. <br><br>  El desarrollo de un proyecto competitivo complejo es imposible sin el uso de soluciones que se encarguen de las tareas m√°s r√°pido que en un tiempo cuadr√°tico.  Los usuarios pueden acudir a un competidor si no les gusta la velocidad del trabajo o c√≥mo su aplicaci√≥n consume energ√≠a de la bater√≠a. <br><br>  Hist√≥ricamente, Blitz es una competencia por el conocimiento de algoritmos y la capacidad de traducir la idea de una soluci√≥n en c√≥digo.  Blitz, que se celebrar√° en septiembre, no ser√° una excepci√≥n.  Intentamos seleccionar tareas con algoritmos similares a los utilizados por los desarrolladores m√≥viles de Yandex en proyectos reales para Android e iOS. <br><br><h4>  Acelerando el navegador Sugest </h4><br>  <b><i>Mikhail Efimov, desarrollador principal</i></b> : <br><blockquote> - Hice omnibox - Cadena de b√∫squeda del navegador.  Autocompletar funciona: solo ingrese el comienzo de la palabra y le ofreceremos la palabra completa.  La tarea inicial se puede simplificar de la siguiente manera: despu√©s de recibir una cadena de entrada, busque todas las palabras de un conjunto predefinido en el que la cadena de entrada aparece como una subcadena.  Para hacer esto, tomamos todos los sufijos de la palabra, todas las subcadenas con las que termina.  Por ejemplo, para la palabra "tabla" ser√° "tabla" y "tol".  Los sufijos de uno o dos caracteres, aqu√≠ tendr√≠amos "ol" y "l", no se tienen en cuenta, porque a trav√©s de ellos la basura se mete en el set. <br><br>  Por lo tanto, en lugar de una palabra, obtenemos dos.  Si consistiera en cinco letras, obtendr√≠an tres, etc. Adem√°s, de ellas, por ejemplo, puede construir un trie de estructura de datos conocido, que le permite buscarlas.  Pero esta estructura tiene un inconveniente: puede ocupar mucho espacio en la memoria. <br><br>  Nosotros, a su vez, mantuvimos una lista ordenada de sufijos: matriz de sufijos.  El elemento en la matriz no es el sufijo completo, entonces la estructura ocupar√≠a demasiada memoria, una cantidad cuadr√°tica, sino solo un par de punteros.  El primero de ellos indica la palabra o frase que desea usar, el segundo, el s√≠mbolo en la palabra o frase con la que comienza el sufijo.  Este enfoque ahorra memoria.  Solo tenemos dos punteros, dos n√∫meros de ocho bytes en lugar de palabras muy largas. <br><br>  La siguiente pregunta es c√≥mo almacenar una lista ya ordenada.  Se puede almacenar como una matriz simple, pero luego se insertar√°n nuevas entradas durante mucho tiempo.  Por lo tanto, eleg√≠ almacenar el √°rbol de b√∫squeda binaria "aumentada" - √°rbol de b√∫squeda binaria aumentada.  Como clave, cada nodo en el √°rbol contiene un determinado sufijo para una palabra determinada, y como un "suplemento", la informaci√≥n sobre las prioridades se almacena en los nodos.  Todo lo que necesita hacer es encontrar el nodo del √°rbol que coincida con el prefijo ingresado.  Adem√°s, puede analizar este y los nodos vecinos para comprender cu√°l de las palabras se puede utilizar para emitir. <br><br>  Entre ellos, se seleccionan aquellos con mayor prioridad.  La prioridad se ve afectada por la longitud de la sangr√≠a del sufijo desde el comienzo de la palabra.  Para las palabras con sangr√≠a cero, la prioridad es mayor; por ejemplo, si el usuario ingres√≥ "st", entonces la palabra "tabla" tendr√° una prioridad mucho mayor que la palabra "puente".  Pero, en principio, puede ingresar una secuencia de caracteres tal que, en respuesta, el navegador avisar√° a la palabra d√≥nde se produce esta secuencia en el medio o al final.  Por ejemplo, si no hay una palabra que comience con esta secuencia. </blockquote><br><h4>  Visualizaci√≥n de c√°maras de CCTV en dispositivos m√≥viles Yandex. </h4><br>  <i><b>Sergey Kuznetsov, desarrollador principal</b> :</i> <br><blockquote>  - Ten√≠amos un algoritmo que mostraba c√°maras en un mapa.  Trabaj√≥ en tiempo cuadr√°tico, no muy r√°pido.  Hubo una idea de que se puede mejorar, sin recurrir a ning√∫n adorno. <br><br>  Si hablamos sobre el enunciado del problema, entonces ten√≠amos muchas c√°maras que deb√≠an mostrarse.  A grandes escalas del mapa, pod√≠an cruzarse entre s√≠, y era feo: era necesario mostrar una c√°mara en lugar de muchas intersecciones. <br><br>  Si formalizamos este problema, se reduce a lo siguiente: en el plano hay n cuadrados id√©nticos con lados paralelos a los ejes de coordenadas, y debe elegir entre ellos un n√∫mero tan grande de cuadrados para que no se crucen dentro de √©l, y todos los otros cuadrados se cruzan al menos uno de cuadrados del conjunto original.  El algoritmo de soluci√≥n m√°s simple, cuando seleccionamos un cuadrado y lo intersectamos con todos los dem√°s, funcion√≥ para n <sup>2</sup> .  Pero el problema puede resolverse en n * log (n), utilizando una cierta clase de algoritmos, que en la literatura se llama la "l√≠nea de exploraci√≥n".  Si no conoce este enfoque, entonces este problema, por supuesto, puede resolverse, pero si lo sabe, puede resolverse mucho m√°s f√°cilmente.  Inmediatamente sabes en qu√© direcci√≥n pensar. </blockquote><br><img src="https://habrastorage.org/webt/qp/5g/kq/qp5gkqw4zm-uhpoopbmma9jqk1q.png" width="350"><img src="https://habrastorage.org/webt/mr/sv/qt/mrsvqt_-ri1ognvqr4eokhkvj4m.png" width="350"><br><h5>  <sub><sup>C√°maras en mapas m√≥viles.</sup></sub>  <sub><sup>Si aleja, solo queda un icono</sup></sub> </h5><br><h4>  Obtener datos de una de las fuentes del navegador Sugest </h4><br>  <i><b>Alexander Yashkin, jefe del grupo de backend del portal</b> :</i> <br><blockquote>  - Hay varias fuentes "pesadas" de sugerencias que se muestran al escribir en el navegador omnibox.  Una de esas fuentes es el historial local del usuario.  Un proveedor hist√≥rico carga las sugerencias del historial; Chromium nos envi√≥ un componente.  ¬øQu√© tiene de especial el omnibox?  Debe ser muy r√°pido, solicitarlo inmediatamente, a medida que escribe, por lo que las fuentes son principalmente sincr√≥nicas.  Cuando se inicia el navegador, el proveedor crea un √≠ndice r√°pido de consejos de historial durante la semana pasada.  En Chromium, el √≠ndice de historial para omnibox utiliz√≥ los contenedores asociativos std :: set y std :: map de la biblioteca est√°ndar de C ++.  Para almacenar datos dentro de dichos contenedores, generalmente se utiliza madera roja-negra. <br><br>  Nuestra tarea era acelerar la b√∫squeda del historial en el omnibox.  De los histogramas de los usuarios, vimos que la b√∫squeda hist√≥rica lleva m√°s tiempo, y en computadoras lentas la gente realmente sufre.  Para algunos, la expectativa era una d√©cima de segundo: cuando escribes r√°pidamente caracteres en el omnibox, es demasiado largo y puede ser a√∫n peor. <br><br>  Hice varios enfoques, optimizaciones, aguas arriba en Chromium.  Al mismo tiempo hizo cambios a nuestro c√≥digo.  Luego la tarea pas√≥ a nuestro desarrollador Denis Yaroshevsky.  Es un desarrollador bastante entusiasta: le interesan los algoritmos de C ++, STL.  Despu√©s de hurgar, propuso actuar radicalmente: reemplazar std :: set con flat_set y std :: map con flat_map.  Es decir, solo cambia la estructura b√°sica.  std :: set y std :: map almacenan sus elementos en los nodos del √°rbol, y flat_set y flat_map, de hecho, son envoltorios sobre el vector ordenado.  Los contenedores planos son uno de los contenedores m√°s populares que no forman parte de la biblioteca est√°ndar de C ++.  Quiz√°s en el pr√≥ximo est√°ndar todav√≠a caer√°n en √©l. <br><br>  Al principio hubo cierta desconfianza: el camino propuesto parec√≠a demasiado simple, yaciendo en la superficie.  Para probar la efectividad, hicimos una prueba de rendimiento: tomamos el perfil de uno de nuestros colegas, construimos un √≠ndice de historial a partir de √©l y realizamos consultas populares sobre √©l.  Elegimos 10 consultas y contamos los tiempos.  Denis me mostr√≥ el resultado, las mejoras fueron obvias, y tambi√©n cre√≠ en su idea. <br><br>  El problema encontrado no era espec√≠fico de Yandex.Browser.  Afect√≥ a cualquier navegador basado en Chromium, as√≠ que primero, como participantes en el proyecto Chromium, decidimos hacer un flujo ascendente.  Pero en Chromium hay muchos que se comprometen, y algunas de las ideas propuestas son descabelladas.  Los desarrolladores de Chromium tienen una actitud bastante cautelosa hacia todos los que ofrecen cambiar algo desde el exterior, a√∫n m√°s radicalmente.  Al principio no quer√≠an tomar nuestro parche.  Antes de eso, sugirieron probar la efectividad y escribir un mini-dise√±o-documento para que puedan entender la idea, beneficiarse y criticar la propuesta. <br><br>  Adem√°s, dijeron: una vez que lo necesite, escriba y agregue implementaciones separadas de contenedores planos.  No agregue ninguna biblioteca nueva a nuestro proyecto, ya existen implementaciones en boost, eastl.  Los contenedores planos deb√≠an agregarse a los componentes base de Chromium.  Este es un an√°logo de la biblioteca est√°ndar, y las personas de cromo est√°n muy preocupadas por lo que no entra nada superfluo. <br><br>  Denis Yaroshevsky hizo todo esto, pas√≥ tiempo escribiendo un documento de dise√±o, escribi√≥ la implementaci√≥n flat_set en plantillas C ++, aplic√≥ mucha magia de plantilla, escribi√≥ pruebas que cubr√≠an la funcionalidad de los contenedores, cre√≥ otra prueba de perf sint√©tica: no pudimos enviar la prueba de perf con real Perfil de un colega.  Denis discuti√≥ con los propietarios del c√≥digo base y omnibox, modific√≥ sustancialmente el c√≥digo en funci√≥n de los resultados de la revisi√≥n, y finalmente los super√≥ y subi√≥ el c√≥digo a Chromium. <br><br>  Toda esta saga dur√≥ seis meses.  El cromo luego escribi√≥: ‚ÄúS√≠, realmente vimos una mejora del 10‚Äì20% en todos los histogramas.  ¬°Genial, gracias!  De ellos, ya a trav√©s del flujo descendente, nos lleg√≥ en el navegador, y luego un final feliz.  De hecho, el √≠ndice hist√≥rico se ha acelerado significativamente en todas las configuraciones, en todas las plataformas.  En este √≠ndice, las ventajas de los contenedores planos son mucho mejores que las desventajas. <br><br>  Despu√©s del flujo ascendente, flat_set y flat_map comenzaron a usarse con mucha m√°s frecuencia, ahora en el c√≥digo puede encontrar varios cientos de lugares donde est√°n involucrados.  Moralidad: la paciencia y el trabajo lo moler√°n todo y elegir√°n cuidadosamente no solo algoritmos para su c√≥digo, sino tambi√©n estructuras de datos adecuadas. </blockquote><br><img src="https://habrastorage.org/webt/ax/2-/3k/ax2-3k3so-zw4zsgqtgmkajj7uo.png"><br><h5>  <sub><sup>Vea el lado izquierdo de la gr√°fica.</sup></sub>  <sub><sup>Una fuerte disminuci√≥n en el tiempo de carga de los resultados del omnibox a principios de 2017 se debe precisamente a la transici√≥n a flat_set y flat_map</sup></sub> </h5><br><h4>  Acelerando uno de los HashMap en Chromium </h4><br>  <i><b>Oleg Maksimenko, desarrollador principal</b> :</i> <br><blockquote>  "El objetivo era acelerar el almacenamiento de p√°ginas HTML normales en uno de nuestros subproyectos".  Utilic√© los medios est√°ndar para perfilar el c√≥digo: mir√© qu√© partes del c√≥digo est√°n "activas" en el proceso de guardar.  Encontr√© un lugar inesperado.  Es decir, esta no es la l√≥gica principal, sino solo una b√∫squeda en el contenedor HashMap, que deber√≠a ocupar un peque√±o porcentaje del tiempo total.  En cambio, hubo costos realmente altos. <br><br>  Decid√≠ reemplazar la implementaci√≥n existente.  Era un HashMap interno, de Chromium.  Lo reemplac√© y obtuve una victoria varias veces.  Luego fui un poco m√°s all√° y me asegur√© de que esto no fuera un error de los chicos de Google, que no se tratara de implementar todo el HashMap, sino de una funci√≥n hash.  Esto es algo externo.  Y result√≥ que ten√≠an un hash trivial en el c√≥digo que usamos, la direcci√≥n en la memoria se us√≥ como un hash.  Quiz√°s, debido a algunas caracter√≠sticas, por ejemplo, un volumen peque√±o, tal soluci√≥n les conven√≠a.  Quiz√°s su HashMap no era un punto caliente, pero se convirti√≥ en nuestro cuando aplicamos esta estructura.  Simplemente reemplazando la funci√≥n hash ingenua y trivial con std :: hash, obtuvimos un aumento de velocidad de 3 a 10 veces.  Como resultado, este atractivo para la memoria hash desapareci√≥ de la lista de puntos calientes, comenz√≥ a ocupar un peque√±o porcentaje, como se esperaba al principio.  Todo se volvi√≥ bueno y hermoso. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420305/">https://habr.com/ru/post/es420305/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es420295/index.html">NeoQUEST-2018: el tan esperado Cold Boot, investigaci√≥n cient√≠fica e invitados de Nizhny Novgorod</a></li>
<li><a href="../es420297/index.html">Instrucciones paso a paso para recuperar el acceso a instancias de Linux Amazon EC2 al perder un archivo pem</a></li>
<li><a href="../es420299/index.html">Mis ejemplos favoritos de programaci√≥n funcional en Kotlin</a></li>
<li><a href="../es420301/index.html">Primer ministro indio Narendra Modi: enviaremos la bandera del pa√≠s al espacio a bordo del Gaganyan en 2022</a></li>
<li><a href="../es420303/index.html">Equilibrio de carga al analizar sitios y conectar recursos en la nube adicionales</a></li>
<li><a href="../es420307/index.html">5 trucos CSS que debes conocer</a></li>
<li><a href="../es420311/index.html">C√≥mo nuestra intuici√≥n nos enga√±a sobre el calentamiento global</a></li>
<li><a href="../es420313/index.html">Hacemos horas literarias en base al libro electr√≥nico.</a></li>
<li><a href="../es420315/index.html">Hacemos un configurador 3D sin programaci√≥n y dise√±o.</a></li>
<li><a href="../es420317/index.html">Se ha desarrollado un nuevo an√°lisis de sangre instant√°neo para detectar da√±o cerebral.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>