<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⛰️ 👇🏿 😐 我如何决定类似数据的机器学习竞赛 👨🏽‍🤝‍👨🏻 🧝🏾 ☃️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="哈Ha 最近有来自Tinkoff和McKinsey 的比赛。 比赛分两个阶段进行：第一阶段-以kaggle格式进行排位赛，即 发送预测-获得对预测质量的评估； 获胜者是得分最高的人。 第二个是在莫斯科举行的现场黑客马拉松比赛，其中包含第一阶段前20名的队伍。 在本文中，我将讨论排位赛阶段，在那里我获...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>我如何决定类似数据的机器学习竞赛</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/ods/blog/475182/"><p><img src="https://habrastorage.org/webt/dn/c7/fl/dnc7flggylqet0ug46a30_sm-pk.jpeg"></p><br><p> 哈Ha 最近有来自Tinkoff和McKinsey <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">的</a>比赛。 比赛分两个阶段进行：第一阶段-以kaggle格式进行排位赛，即 发送预测-获得对预测质量的评估； 获胜者是得分最高的人。 第二个是在莫斯科举行的现场黑客马拉松比赛，其中包含第一阶段前20名的队伍。 在本文中，我将讨论排位赛阶段，在那里我获得了第一名并赢得了MacBook。 排行榜上的团队称为“勒莎的孩子”。 </p><br><p> 比赛于9月19日至10月12日举行。 我恰好在结束前一周开始解决问题，并决定几乎全职。 </p><br><h2 id="kratkoe-opisanie-sorevnovaniya"> 比赛的简短说明： </h2><br><p> 在夏天，故事出现在Tinkoff银行应用程序（如Instagram）上。 在故事中，您可以喜欢，不喜欢，跳过或查看到最后。 任务是预测用户对故事的反应。 </p><br><p> 比赛大多以表格形式进行，但故事本身有文字和图片。 </p><a name="habracut"></a><br><h2 id="plan-rasskaza"> 故事计划 </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">公制</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">数据与特征工程</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">我们要解决什么问题以及如何形成预测？</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">型号</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">杀手级功能</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">模型优化</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">有趣的观察</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">阈值预测</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">比赛结果</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">什么没用</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">结论</a> </li></ul><br><p><img src="https://habrastorage.org/webt/j7/jr/7s/j7jr7saxveytzcbrxeplctbxzo8.jpeg"></p><br><h2 id="metrika-anchormetricsanchor"> 公制 <a name="metrics"></a></h2><br><p> 反应预测的取值范围是-1至1（包括1）-值越接近1，获得相似值的可能性越高。 并且值为-1时，最好从用户的眼睛中删除该故事。 </p><br><p> 为了检查解决方案的准确性，使用了一个公式，将其标准化为最大可能的结果： </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><merror><mtext>\&amp;#x5F00;&amp;#x59CB;{array}&amp;#xA0;{l}&amp;#xA0;{\&amp;#x6587;&amp;#x672C;{weight&amp;#xFF08;event&amp;#xFF09;}&amp;#xA0;=&amp;#xA0;\&amp;#x5DE6;\&amp;#xA0;{\&amp;#x5F00;&amp;#x59CB;{array}&amp;#xA0;{ll}&amp;#xA0;{-10}&amp;#xFF06;{\&amp;#xA0;text&amp;#xA0;{dislike}}&amp;#xA0;\\&amp;#xA0;{-0.1}&amp;#xFF06;&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{skip}}&amp;#xA0;\\&amp;#xA0;{0.1}&amp;#xFF06;{\&amp;#xA0;text&amp;#xA0;{view}}&amp;#xA0;\\&amp;#xA0;{0.5}&amp;#xFF06;{\&amp;#xA0;text&amp;#xA0;{like}}&amp;#xA0;\&amp;#xA0;end&amp;#xA0;{array}&amp;#xA0;\&amp;#xA0;right&amp;#x3002;}&amp;#xA0;\\&amp;#xA0;[15pt]&amp;#xA0;{\&amp;#xA0;text&amp;#xA0;{&amp;#x516C;&amp;#x5236;}&amp;#xA0;\&amp;#x5DE6;&amp;#xFF08;y&amp;#xA0;_&amp;#xA0;{\&amp;#x6587;&amp;#x672C;{pred}}&amp;#xA0;\&amp;#x53F3;&amp;#xFF09;=&amp;#xA0;\&amp;#xA0;sum_&amp;#xA0;{i&amp;#xA0;=&amp;#xA0;1}&amp;#xA0;^&amp;#xA0;{n}&amp;#xA0;\&amp;#x5DE6;&amp;#xFF08;\&amp;#x6587;&amp;#x672C;{weight}&amp;#xA0;\&amp;#x5DE6;&amp;#xFF08;\&amp;#x6587;&amp;#x672C;{event}&amp;#xA0;_&amp;#xA0;{i}&amp;#xA0;\&amp;#x53F3;&amp;#xFF09;\&amp;#xA0;cdot&amp;#xA0;y&amp;#xA0;_&amp;#xA0;{\&amp;#x6587;&amp;#x672C;{pred&amp;#xFF0C;}&amp;#xA0;i}&amp;#xA0;\&amp;#x53F3;&amp;#xFF09;}&amp;#xA0;\&amp;#x7ED3;&amp;#x675F;{array}</mtext></merror></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><span class="noError" aria-hidden="true" style="display: inline-block;">\开始{array}&nbsp;{l}&nbsp;{\文本{weight（event）}&nbsp;=&nbsp;\左\&nbsp;{\开始{array}&nbsp;{ll}&nbsp;{-10}＆{\&nbsp;text&nbsp;{dislike}}&nbsp;\\&nbsp;{-0.1}＆&nbsp;{\&nbsp;text&nbsp;{skip}}&nbsp;\\&nbsp;{0.1}＆{\&nbsp;text&nbsp;{view}}&nbsp;\\&nbsp;{0.5}＆{\&nbsp;text&nbsp;{like}}&nbsp;\&nbsp;end&nbsp;{array}&nbsp;\&nbsp;right。}&nbsp;\\&nbsp;[15pt]&nbsp;{\&nbsp;text&nbsp;{公制}&nbsp;\左（y&nbsp;_&nbsp;{\文本{pred}}&nbsp;\右）=&nbsp;\&nbsp;sum_&nbsp;{i&nbsp;=&nbsp;1}&nbsp;^&nbsp;{n}&nbsp;\左（\文本{weight}&nbsp;\左（\文本{event}&nbsp;_&nbsp;{i}&nbsp;\右）\&nbsp;cdot&nbsp;y&nbsp;_&nbsp;{\文本{pred，}&nbsp;i}&nbsp;\右）}&nbsp;\结束{array}</span><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><merror><mtext>\开始{array}&nbsp;{l}&nbsp;{\文本{weight（event）}&nbsp;=&nbsp;\左\&nbsp;{\开始{array}&nbsp;{ll}&nbsp;{-10}＆{\&nbsp;text&nbsp;{dislike}}&nbsp;\\&nbsp;{-0.1}＆&nbsp;{\&nbsp;text&nbsp;{skip}}&nbsp;\\&nbsp;{0.1}＆{\&nbsp;text&nbsp;{view}}&nbsp;\\&nbsp;{0.5}＆{\&nbsp;text&nbsp;{like}}&nbsp;\&nbsp;end&nbsp;{array}&nbsp;\&nbsp;right。}&nbsp;\\&nbsp;[15pt]&nbsp;{\&nbsp;text&nbsp;{公制}&nbsp;\左（y&nbsp;_&nbsp;{\文本{pred}}&nbsp;\右）=&nbsp;\&nbsp;sum_&nbsp;{i&nbsp;=&nbsp;1}&nbsp;^&nbsp;{n}&nbsp;\左（\文本{weight}&nbsp;\左（\文本{event}&nbsp;_&nbsp;{i}&nbsp;\右）\&nbsp;cdot&nbsp;y&nbsp;_&nbsp;{\文本{pred，}&nbsp;i}&nbsp;\右）}&nbsp;\结束{array}</mtext></merror></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \开始{array} {l} {\文本{weight（event）} = \左\ {\开始{array} {ll} {-10}＆{\ text {dislike}} \\ {-0.1}＆ {\ text {skip}} \\ {0.1}＆{\ text {view}} \\ {0.5}＆{\ text {like}} \ end {array} \ right。} \\ [15pt] {\ text {公制} \左（y _ {\文本{pred}} \右）= \ sum_ {i = 1} ^ {n} \左（\文本{weight} \左（\文本{event} _ {i} \右）\ cdot y _ {\文本{pred，} i} \右）} \结束{array} </script></p><br><h2 id="kakie-dannye-est-anchorfeanchor"> 那里有什么数据： <a name="fe"></a></h2><br><ul><li> 基本用户信息 </li><li> 用户交易 </li><li> 有关故事的信息（可从中构造故事的json） </li><li> 用户对故事的反应历史。 </li></ul><br><p> 接下来，我将详细讨论每条数据，如何处理以及提取了哪些特征（以下称为特征）。 </p><br><h2 id="informaciya-o-polzovatele"> 用户信息 </h2><br><p><img src="https://habrastorage.org/webt/8i/db/qy/8idbqykfjkcev60ercr-w4qptza.png"></p><br><p> 最初是什么： </p><br><ul><li> 用户名 </li><li> 用户打开（OPN），使用（UTL）或关闭（CLS）的匿名银行产品 </li><li> 性别，二元化年龄，婚姻状况，首次申请 </li><li>  job_title-人们对自己的看法 </li><li>  job_position_cd-一个人的职务，作为22个类别之一 </li></ul><br><p><img src="https://habrastorage.org/webt/eu/nh/qs/eunhqswbbakece3ccak4f77oids.png"></p><br><p> 作为功​​能，我们使用上述所有内容，但job_title除外，因为 我们假设job_position_cd通常描述一个人的职位。 </p><br><h2 id="tranzakcii"> 交易次数 </h2><br><p><img src="https://habrastorage.org/webt/yn/1f/dh/yn1fdhno1qtsu-bajpbkkmhydw8.png"></p><br><p> 最初是什么： </p><br><ul><li> 用户名 </li><li> 交易日，月 </li><li> 交易金额（二值化，增量为250） </li><li>  Businessman_id-收银机的内部银行ID。 进一步不使用。 </li><li>  Businessman_mcc </li></ul><br><p>  MCC-商家类别代码。 这是收件人提供的标准化服务代码。 此信息是开放的，这里是<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">成绩单</a> 。 这些代码可以方便地分为几类，例如：娱乐，酒店等。 </p><br><p> 对于每个customer_id，我们比较以下功能： </p><br><ul><li> 计算费用金额，平均支票，标准差 </li><li> 交易数量 </li><li> 我们将“我的客户中心”代码分为20个类别，计算有多少人在此类别上花了钱。 获得20个功能 </li><li> 通过将类别中的支出除以支出金额，我们将获得另外20个功能。 即 获取花在该类别上的钱的百分比。 </li></ul><br><h2 id="stories"> 故事 </h2><br><p> 总共有959个故事。 <br> 最初是什么： </p><br><ul><li>  id id </li><li>  json故事。 </li></ul><br><p>  json看起来像这样： </p><br><p><img src="https://habrastorage.org/webt/cu/j2/mf/cuj2mfpq2vxoil9fgcvg5y2zww0.png"></p><br><p> 这是一棵元素树，其中每个元素都由键描述：['guid'，'type'，'description'，'properties'，'content']。  “内容”包含子项列表。 故事由页面组成。 背景，文本，图片都被扔在页面上。 我们没有故事的构建者，要绘制所有这些故事相当困难，而不是事实，这将在将来极大地帮助您。 </p><br><p> 常规字体会提取所有文本和相应的字体大小。 我们提取以下功能： </p><br><ul><li> 页面数，链接数，元素总数 </li><li> 平均文字字体大小 </li><li> 文字元素数量 </li><li>  “文本量”是一种启发式方法，可以根据字体大小仔细考虑文本的长度。 </li></ul><br><div class="spoiler">  <b class="spoiler_title">卷计数代码</b> <div class="spoiler_text"><pre><code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_text_amount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(all_text, font_sizes)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">assert</span></span> len(all_text) == len(font_sizes) lengths = np.array(list(map(len, all_text))) sizes = (np.array(font_sizes) / <span class="hljs-number"><span class="hljs-number">100</span></span>)**<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (lengths * sizes).sum()</code> </pre> </div></div><br><ul><li> 现在，让我们来看整个文本，使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">陀思妥耶夫斯基</a>定义文本的语义：['中性'，'否定'，'跳过'，'语音'，'正']。 并将其添加为5个功能 </li></ul><br><h2 id="reakcii"> 反应 </h2><br><p><img src="https://habrastorage.org/webt/6l/8m/ic/6l8micjuyle2jhaua16ryjcsnaq.png"></p><br><p> 最初是什么： </p><br><ul><li> 用户名和历史 </li><li> 时间 </li><li> 反应 </li></ul><br><p> 我们处理时间并将要素添加为要素： </p><br><ul><li> 星期几 </li><li> 小时，分钟 </li></ul><br><p> 接下来，将基于反应数据添加一组功能，但是目前，我们将与这些功能库作斗争以制定基准。 </p><br><h2 id="kakuyu-zadachu-my-reshaem-i-kak-formirovat-predskazanie-anchorpredictionanchor"> 我们要解决什么问题以及如何形成预测？ <a name="prediction"></a></h2><br><p> 整个高层使用的最佳方法如下：将问题简化为多类分类，即 预测每个反应的可能性。 考虑评估的期望 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.515ex" height="2.419ex" viewBox="0 -780.1 1082.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-2"> E_i </script> 这个故事 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6211;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.928ex" height="2.298ex" viewBox="0 -780.1 830 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">我</text></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>我</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-3">我</script>  ： </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mo>&amp;#x2212;</mo><mn>10</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mi>d</mi><mi>i</mi><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>&amp;#x2212;</mo><mn>0.1</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x8DF3;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x8FC7;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>+</mo><mn>0.1</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x89C6;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x56FE;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow><mo>+</mo><mn>0.5</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x559C;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6B22;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="85.53ex" height="2.419ex" viewBox="0 -780.1 36825.2 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="1044" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-3D" x="1360" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2212" x="2416" y="0"></use><g transform="translate(3195,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-63" x="4446" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-64" x="4879" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-6F" x="5403" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-74" x="5888" y="0"></use><g transform="translate(6250,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="908" y="-213"></use></g><g transform="translate(7237,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-64" x="8067" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="8590" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-73" x="8936" y="0"></use><g transform="translate(9405,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2212" x="10457" y="0"></use><g transform="translate(11458,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-31" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-63" x="12988" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-64" x="13421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-6F" x="13945" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-74" x="14430" y="0"></use><g transform="translate(14792,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="908" y="-213"></use></g><g transform="translate(15778,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(16608,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">跳</text></g><g transform="translate(17438,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">过</text></g><g transform="translate(18268,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2B" x="19321" y="0"></use><g transform="translate(20321,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-31" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-63" x="21851" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-64" x="22284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-6F" x="22808" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-74" x="23293" y="0"></use><g transform="translate(23655,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="908" y="-213"></use></g><g transform="translate(24642,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(25472,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">视</text></g><g transform="translate(26302,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">图</text></g><g transform="translate(27132,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2B" x="28184" y="0"></use><g transform="translate(29184,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2E" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-35" x="779" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-63" x="30714" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-64" x="31147" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-6F" x="31671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-74" x="32156" y="0"></use><g transform="translate(32518,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-50" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="908" y="-213"></use></g><g transform="translate(33505,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(34335,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">喜</text></g><g transform="translate(35165,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">欢</text></g><g transform="translate(35995,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>E</mi><mi>i</mi></msub><mo>=</mo><mo>−</mo><mn>10</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mi>d</mi><mi>i</mi><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>−</mo><mn>0.1</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>跳</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>过</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>+</mo><mn>0.1</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>视</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>图</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow><mo>+</mo><mn>0.5</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>P</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>喜</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>欢</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> E_i = -10 \ cdot P_i（dis）-0.1 \ cdot P_i（跳过）+ 0.1 \ cdot P_i（视图）+ 0.5 \ cdot P_i（喜欢）</script></p><br><p> 二值化 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>E</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.515ex" height="2.419ex" viewBox="0 -780.1 1082.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="1044" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>E</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-5"> E_i </script>  ： <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathcolor=&quot;red&quot;>\&amp;#xFF1A;</mtext><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x7B26;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x53F7;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><msub><mi>E</mi><mi>i</mi></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.444ex" height="2.66ex" viewBox="0 -832 7941.1 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g fill="red" stroke="red"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">：</text></g></g><g transform="translate(1330,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-3D" x="2482" y="0"></use><g transform="translate(3538,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">符</text></g><g transform="translate(4368,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">号</text></g><g transform="translate(5198,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(6028,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="1044" y="-213"></use></g><g transform="translate(7111,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathcolor="red">\：</mtext><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mo>符</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>号</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><msub><mi>E</mi><mi>i</mi></msub><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-6"> \：a_i =符号（E_i）</script><br><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.029ex" height="1.817ex" viewBox="0 -520.7 873.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="748" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>a</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> a_i </script>  -我们对目标的回答 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x6211;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.928ex" height="2.298ex" viewBox="0 -780.1 830 989.6" role="img" focusable="false" style="vertical-align: -0.487ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">我</text></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><mo>我</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-8">我</script> 可以带来价值 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathcolor=&quot;red&quot;>\&amp;#x4E0B;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5348;</mo></mrow><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.18ex" height="2.66ex" viewBox="0 -832 2661 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g fill="red" stroke="red"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">下</text></g></g><g transform="translate(1330,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">午</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-31" x="2160" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathcolor="red">\下</mtext><mrow class="MJX-TeXAtom-ORD"><mo>午</mo></mrow><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-9"> \下午1 </script></p><br><h2 id="model-anchormodelanchor"> 型号 <a name="model"></a></h2><br><p> 从头到尾，我都使用CatBoost。 这是由于CatBoost开箱即用地为分类功能建立了有用的统计数据。 用户的统计信息-他对什么反应有多大的倾向，以及历史记录-他们最常不反应的统计信息，是此任务中最强大的功能。 </p><br><p> 该<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">文档</a>很好地解释了CatBoost如何与分类功能一起工作。 <br>  TLDR： </p><br><ul><li> 生成多个数据排列 </li><li> 按顺序进行，并在他已经看到的那些对象上建立均值目标编码（mte） </li></ul><br><div class="spoiler">  <b class="spoiler_title">在我们的示例中简要介绍mte</b> <div class="spoiler_text"><p> 我们以符号的值为例，例如customer_id之一，我们考虑了该客户做出喜欢，不喜欢，跳过或查看的情况的百分比。 我们得到4个数字。 我们用这4个数字替换customer_id并将其用作符号。 我们为每个customer_id执行此操作。 </p></div></div><br><h2 id="tekuschiy-rezultat"> 当前结果 </h2><br><p> 凭借当前的功能以及未优化的设计，我当时在公共排行榜上排名第11位，结果为<strong>0.31209</strong> </p><br><h2 id="killer-fichi-anchorkilleranchor"> 杀手级功能 <a name="killer"></a></h2><br><p> 在某个时候，出现了一个假设，即应用程序可能会根据用户对它的早期反应来显示故事的频率更高或更小。 然后让我们添加以下功能： </p><br><ul><li> 用户在过去/将来/每月/每天/小时/总计中看到多少次相应历史记录 </li><li> 自上次观看同一故事以来的时间 </li><li> 用户下一次看相同故事的时间 </li><li> 实际上，用户一秒钟一次加载多个故事，通常在5到7个左右。 将这组故事称为一<em>组</em> 。 我将这个数目的故事添加到组中作为功能，这大大提高了质量。 </li></ul><br><p> 当然，这些功能不能在生产中使用，因为 在应用该模型时，它们不会很老套，但是在竞争中，任何手段都是好的。 </p><br><p> 因此，据说-完成了。 在排行榜上获得了<strong>0.35657</strong> 。 </p><br><h2 id="optimizaciya-modeli-anchoroptimizationanchor"> 模型优化 <a name="optimization"></a></h2><br><p> 我使用<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">贝叶斯优化</a>来检查参数 </p><br><p> 有趣的是，我们可以提到max_ctr_complexity参数，该参数负责可组合的最大分类特征数量。 以扰流板为例。 </p><br><div class="spoiler">  <b class="spoiler_title">文档摘录</b> <div class="spoiler_text"><p> 假设训练集中的对象属于两个分类特征：音乐体裁（“摇滚”，“独立”）和音乐风格（“舞蹈”，“古典”）。 这些功能可以以不同的组合出现。  CatBoost可以创建一个新功能，将这些功能组合在一起（“舞蹈摇滚”，“经典摇滚”，“独立舞蹈”或“独立古典”）。 </p></div></div><br><h2 id="interesnye-nablyudeniya-anchorinterestinganchor"> 有趣的观察 <a name="interesting"></a></h2><br><ol><li><p>  CatBoost可以在GPU上进行训练，这大大加快了学习速度，但同时也引入了许多限制，尤其是在分类功能方面。 在此任务中，在GPU上进行培训比在CPU上进行培训要差得多。 </p><br></li><li><p> 根据CatBoost，功能的重要性。 在许多方面，功能的名称可以说明一切，但是从顶部开始，我将解释一些功能，而不是最明显的功能： </p><br><ul><li>  unique_in_group-组中的故事数。  （在组中它们始终是唯一的，就在创建功能时我还不知道） </li><li>  story_at_all-一个人在将来和过去浏览过的故事数。 </li><li>  this_story_before_counter-人们之前看过这个故事的次数。 </li><li>  text_amount-启发式的文本量。 </li><li>  group_number-组的序列号。 </li><li>  near_story_seconds_before / after-本质上，这是直到显示下一组的时间。 <br><br> 图片是可单击的。 <br> <a href=""><img src="https://habrastorage.org/webt/d6/yo/pu/d6yopub7m8jlc9fs3gpoaruqcgu.png"></a> </li></ul><br></li><li><p> 让我们看一下反应随时间的分布： <br><br><img src="https://habrastorage.org/webt/q7/4i/k-/q74ik-2nizvwee3cgdda45hci9m.jpeg"><br><br> 即 在某些时候，反应的分布差异很大。 <br><br> 接下来，我想确认测试中的分布与训练样本末尾的分布相同。 让我们将所有这些作为预测发送，我们得到的结果为0.00237。 我们预测火车最后部分的所有结果-在第一部分得到大约0.009--0.22。 因此，测试中的分布很可能与火车末尾的分布相同，并且绝对看起来不像主要部分。 这就提出了一个假设，即如果分配得到纠正 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathcolor=&quot;red&quot;>\&amp;#x4E0B;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x5348;</mo></mrow><mn>1</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.18ex" height="2.66ex" viewBox="0 -832 2661 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g fill="red" stroke="red"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">下</text></g></g><g transform="translate(1330,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">午</text></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-31" x="2160" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathcolor="red">\下</mtext><mrow class="MJX-TeXAtom-ORD"><mo>午</mo></mrow><mn>1</mn></math></span></span><script type="math/tex" id="MathJax-Element-10"> \下午1 </script> 根据我们的预测，排行榜上的结果将大大改善，因为 火车上和测试上的分布是不同的。 </p><br></li></ol><br><h2 id="treshhold-predskazaniy-anchorthresholdanchor"> 阈值预测 <a name="threshold"></a></h2><br><p> 在获得最终预测的最后一步，添加一个阈值： <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext mathcolor=&quot;red&quot;>\&amp;#xFF1A;</mtext><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x7B26;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x53F7;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF08;</mo></mrow><msub><mi>E</mi><mi>i</mi></msub><mo>+</mo><mtext mathcolor=&quot;red&quot;>\&amp;#x6587;</mtext><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x672C;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x9608;</mo></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#x503C;</mo></mrow></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;#xFF09;</mo></mrow></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="30.158ex" height="2.66ex" viewBox="0 -832 12984.5 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><g fill="red" stroke="red"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">：</text></g></g><g transform="translate(1330,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-3D" x="2482" y="0"></use><g transform="translate(3538,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">符</text></g><g transform="translate(4368,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">号</text></g><g transform="translate(5198,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">（</text></g><g transform="translate(6028,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-45" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMATHI-69" x="1044" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-2B" x="7333" y="0"></use><g fill="red" stroke="red" transform="translate(8334,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://habr.com/ru/company/ods/blog/475182/&amp;usg=ALkJrhg00ItQkqlxJuawKvgVwietynuGuA#MJMAIN-5C"></use><g transform="translate(500,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">文</text></g></g><g transform="translate(9664,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">本</text></g><g transform="translate(10494,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">阈</text><g transform="translate(829,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">值</text></g></g><g transform="translate(12154,0)"><text font-family="STIXGeneral,'Arial Unicode MS',serif" stroke="none" transform="scale(51.874) matrix(1 0 0 -1 0 0)">）</text></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext mathcolor="red">\：</mtext><msub><mi>a</mi><mi>i</mi></msub><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mo>符</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>号</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>（</mo></mrow><msub><mi>E</mi><mi>i</mi></msub><mo>+</mo><mtext mathcolor="red">\文</mtext><mrow class="MJX-TeXAtom-ORD"><mo>本</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mrow class="MJX-TeXAtom-ORD"><mo>阈</mo></mrow><mrow class="MJX-TeXAtom-ORD"><mo>值</mo></mrow></mrow><mrow class="MJX-TeXAtom-ORD"><mo>）</mo></mrow></math></span></span><script type="math/tex" id="MathJax-Element-11"> \：a_i =符号（E_i + \文本{阈值}）</script></p><br><p> 在上一个模型中，如果将垃圾箱二进制化为0，那么我将拥有大约66％的单位。事实证明，+1数量的减少确实带来了质量的极大提高。 仅评估了最后3个前提，因此我发送了具有不同垃圾箱的最佳模型的预测，因此百分比加一约为62、58和54。 </p><br><p> 结果，在公共排行榜上，我最好的成绩是<strong>0.37970</strong> 。 </p><br><h2 id="rezultaty-sorevnovaniya-anchorresultsanchor"> 比赛结果 <a name="results"></a></h2><br><div class="spoiler">  <b class="spoiler_title">关于公共/私人排行榜</b> <div class="spoiler_text"><p> 按照机器学习竞赛的惯例，当您将预测发送到系统时，仅对整个测试样本的一部分评估结果。 通常约为30％。 此部分的结果反映在公共排行榜中。 在剩下的测试中，将评估最终结果，并在比赛结束后显示在私人排行榜上。 </p></div></div><br><p> 在公共排行榜上的比赛结束时，情况如下： </p><br><ol><li>  0.382-可以在这里做广告 </li><li>  0.379-蕾莎的孩子 </li><li>  0.372-园丁 </li><li>  0.35-懒惰＆阿库洛夫 </li></ol><br><p> 在考虑到最终结果的私人排行榜上，我很幸运，由于某种原因，这些人从第四名跌至第四名。 这是最终位置。 </p><br><ol><li>  0.45807乐莎的孩子 </li><li>  0.45264园丁 </li><li>  0.44136竹克 </li><li>  0.43704这可能是您的广告 </li><li>  0.43474懒惰＆阿库洛夫 </li></ol><br><h2 id="chto-ne-srabotalo-anchornonworkinganchor"> 什么没用 <a name="nonworking"></a></h2><br><ol><li> 我尝试使用快速文本将故事中的所有文本转换为向量，然后将向量聚类并将聚类号用作分类特征。 该功能在CatBoost的功能重要性中排在前3位（在story_id和customer_id之后），但是由于某种原因，它是稳定的并且显着恶化了验证结果。 </li><li> 多亏了这些集群，人们可以找到与世界杯有关的故事，并且只在训练集中出现。 <br> 但是，从数据集中弹出此类对象并不能改善结果。 </li><li> 默认情况下，CatBoost会生成对象的随机排列，并根据对象考虑符号以进行分类。 但是我们可以对这套怪兽说，我们的数据中有时间-has_time = True。 然后它将按顺序进行，而不会混合数据集。 在这个问题中，尽管我们确实有时间，但是has_time的结果稳定地更差。 <br><br> 在一般情况下，如果有时间，但在构造平均目标编码时不应考虑，因此模型将使用有关将来正确答案的信息，并可以对其进行重新训练。 显然，在这个问题中，这没有太大的作用，而在不同的排列中重复几次更为重要。 </li><li> 有一种想法是在火车结束时为物体分配更多的重量，即 考虑到更多具有正确分布反应的对象。 但是无论是在验证还是在公共排行榜上，这都给出了更糟糕的结果。 </li><li> 您可以在训练过程中考虑不同权重的不同反应。 尽管这对我而言并没有改善，但对一些团队有所帮助。 </li></ol><br><h2 id="vyvody-anchorconclusionanchor"> 结论 <a name="conclusion"></a></h2><br><p> 竞赛之所以有趣是因为它汇集了许多组成部分，例如表格数据，文本和图片。 有大量的研究空间，仍有很多可以尝试的空间。 通常，我不必感到无聊。 </p><br><p> 感谢比赛的组织者！ </p><br><p> 所有代码都发布在<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">github上</a> 。 </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN475182/">https://habr.com/ru/post/zh-CN475182/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN475170/index.html">在React.JS上创建数据驱动的应用程序的基本模式问题</a></li>
<li><a href="../zh-CN475172/index.html">有益地使用Raspberry Pi的5种方法 第三部分</a></li>
<li><a href="../zh-CN475174/index.html">如何起飞电池或电动副动力的一点理论。 第一部分</a></li>
<li><a href="../zh-CN475178/index.html">在PostgreSQL中用JSONB替换EAV</a></li>
<li><a href="../zh-CN475180/index.html">如何取下电池或操作SkyMax电动动力伞的做法。 第二部分</a></li>
<li><a href="../zh-CN475188/index.html">基于约束的图块放置算法</a></li>
<li><a href="../zh-CN475192/index.html">如何在一家有助于应对全球变暖的公司中找到工作？</a></li>
<li><a href="../zh-CN475194/index.html">通过SOLID编写redux</a></li>
<li><a href="../zh-CN475196/index.html">＃321移动开发者的有趣材料摘要（11月4日至10日）</a></li>
<li><a href="../zh-CN475200/index.html">OpenStreetMap第484号世界新闻（10/22/2019-28/10/2019）</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>