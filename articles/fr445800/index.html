<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ùé üëºüèΩ üê∂ Monades en 15 minutes ‚ò†Ô∏è üîé üïπÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Entr√©e 
 Au YOW! 2013 l' un des d√©veloppeurs de la langue Haskell, prof. Philip Wadler a montr√© comment les monades permettent aux langages fonctionne...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Monades en 15 minutes</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445800/"><h2>  Entr√©e </h2><br>  Au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">YOW!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2013 l'</a> un des d√©veloppeurs de la langue Haskell, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">prof.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Philip Wadler a</a> montr√© comment les monades permettent aux langages fonctionnels purs d'effectuer des op√©rations essentiellement imp√©ratives, telles que la gestion des entr√©es-sorties et des exceptions.  Sans surprise, l'int√©r√™t du public pour ce sujet a g√©n√©r√© une croissance explosive des publications sur les monades sur Internet.  Malheureusement, la plupart de ces publications utilisent des exemples √©crits dans des langages fonctionnels, ce qui implique que les nouveaux arrivants en programmation fonctionnelle veulent en savoir plus sur les monades.  Mais les monades ne sont pas sp√©cifiques √† Haskell ou aux langages fonctionnels, et peuvent bien √™tre illustr√©es par des exemples dans les langages de programmation imp√©ratifs.  C'est le but de ce guide. <br><br>  En quoi ce guide est-il diff√©rent des autres?  Nous allons essayer d'ouvrir les monades en moins de 15 minutes, en utilisant seulement l'intuition et quelques exemples √©l√©mentaires de code Python.  Par cons√©quent, nous ne commencerons pas √† th√©oriser et √† nous plonger dans la philosophie, en discutant des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">burritos</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=http://web.archive.org/web/20081206204420/">des combinaisons spatiales</a> , des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">bureaux</a> et des endofoncteurs. <br><a name="habracut"></a><br><h2>  Exemples de motivation </h2><br>  Nous examinerons trois questions li√©es √† la composition des fonctions.  Nous les r√©soudrons de deux mani√®res: l'imp√©ratif habituel et l'utilisation de monades.  Ensuite, nous comparons les diff√©rentes approches. <br><br><h3>  1. Journalisation </h3><br>  Supposons que nous ayons trois fonctions unaires: <code>f1</code> , <code>f2</code> et <code>f3</code> , qui prennent un nombre et le renvoient augment√© respectivement de 1, 2 et 3.  Chaque fonction g√©n√®re √©galement un message, qui est un rapport sur l'op√©ration termin√©e. <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (x + <span class="hljs-number"><span class="hljs-number">1</span></span>, str(x) + <span class="hljs-string"><span class="hljs-string">"+1"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (x + <span class="hljs-number"><span class="hljs-number">2</span></span>, str(x) + <span class="hljs-string"><span class="hljs-string">"+2"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (x + <span class="hljs-number"><span class="hljs-number">3</span></span>, str(x) + <span class="hljs-string"><span class="hljs-string">"+3"</span></span>)</code> </pre> <br>  Nous aimerions les encha√Æner pour traiter le param√®tre <code>x</code> , en d'autres termes, nous aimerions calculer <code>x+1+2+3</code> .  En outre, nous devons obtenir une explication lisible par l'homme de ce que chaque fonction a fait. <br><br>  Nous pouvons obtenir le r√©sultat dont nous avons besoin de la mani√®re suivante: <br><pre> <code class="python hljs">log = <span class="hljs-string"><span class="hljs-string">"Ops:"</span></span> res, log1 = f1(x) log += log1 + <span class="hljs-string"><span class="hljs-string">";"</span></span> res, log2 = f2(res) log += log2 + <span class="hljs-string"><span class="hljs-string">";"</span></span> res, log3 = f3(res) log += log3 + <span class="hljs-string"><span class="hljs-string">";"</span></span> print(res, log)</code> </pre> <br>  Cette solution n'est pas id√©ale, car elle consiste en un grand nombre de middleware monotones.  Si nous voulons ajouter une nouvelle fonction √† notre cha√Æne, nous serons oblig√©s de r√©p√©ter ce code de liaison.  De plus, les manipulations avec les variables <code>res</code> et <code>log</code> nuisent √† la lisibilit√© du code, ce qui rend difficile de suivre la logique principale du programme. <br><br>  Id√©alement, un programme devrait ressembler √† une simple cha√Æne de fonctions, comme <code>f3(f2(f1(x)))</code> .  Malheureusement, les types de donn√©es renvoy√©s par <code>f1</code> et <code>f2</code> ne correspondent pas aux types de param√®tres <code>f2</code> et <code>f3</code> .  Mais nous pouvons ajouter de nouvelles fonctions √† la cha√Æne: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (x, <span class="hljs-string"><span class="hljs-string">"Ops:"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t, f)</span></span></span><span class="hljs-function">:</span></span> res = f(t[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (res[<span class="hljs-number"><span class="hljs-number">0</span></span>], t[<span class="hljs-number"><span class="hljs-number">1</span></span>] + res[<span class="hljs-number"><span class="hljs-number">1</span></span>] + <span class="hljs-string"><span class="hljs-string">";"</span></span>)</code> </pre> <br>  Maintenant, nous pouvons r√©soudre le probl√®me comme suit: <br><pre> <code class="python hljs">print(bind(bind(bind(unit(x), f1), f2), f3))</code> </pre> <br>  Le diagramme suivant montre le processus de calcul se produisant √† <code>x=0</code> .  Ici <code>v1</code> , <code>v2</code> et <code>v3</code> sont les valeurs obtenues √† la suite d'appels √† l' <code>unit</code> et √† la <code>bind</code> . <br><br><img src="https://habrastorage.org/webt/dy/ta/f0/dytaf0ku8j3y7ctrcrhjlqbs2ck.png"><br><br>  La fonction <code>unit</code> convertit le param√®tre d'entr√©e <code>x</code> en un tuple d'un nombre et d'une cha√Æne.  La fonction <code>bind</code> appelle la fonction qui lui est pass√©e en param√®tre et accumule le r√©sultat dans la variable interm√©diaire <code>t</code> . <br><br>  Nous avons pu √©viter de r√©p√©ter le middleware en le pla√ßant dans la fonction <code>bind</code> .  Maintenant, si nous obtenons la fonction <code>f4</code> , nous l'incluons simplement dans la cha√Æne: <br><pre> <code class="python hljs">bind(f4, bind(f3, ... ))</code> </pre> <br>  Et nous n'avons pas besoin d'apporter d'autres modifications. <br><br><h3>  2. Liste des valeurs interm√©diaires </h3><br>  Nous allons √©galement commencer cet exemple avec de simples fonctions unaires. <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre> <br>  Comme dans l'exemple pr√©c√©dent, nous devons composer ces fonctions afin de calculer <code>x+1+2+3</code> .  Nous devons √©galement obtenir une liste de toutes les valeurs obtenues gr√¢ce au travail de nos fonctions, c'est-√†-dire <code>x</code> , <code>x+1</code> , <code>x+1+2</code> et <code>x+1+2+3</code> . <br><br>  Contrairement √† l'exemple pr√©c√©dent, nos fonctions sont composables, c'est-√†-dire que les types de leurs param√®tres d'entr√©e co√Øncident avec le type du r√©sultat.  Par cons√©quent, une simple cha√Æne <code>f3(f2(f1(x)))</code> renverra le r√©sultat final.  Mais dans ce cas, nous perdons les valeurs interm√©diaires. <br><br>  R√©solvons le probl√®me "de front": <br><pre> <code class="python hljs">lst = [x] res = f1(x) lst.append(res) res = f2(res) lst.append(res) res = f3(res) lst.append(res) print(res, lst)</code> </pre> <br>  Malheureusement, cette solution contient √©galement beaucoup de middleware.  Et si nous d√©cidons d'ajouter <code>f4</code> , nous devrons √† nouveau r√©p√©ter ce code pour obtenir la liste correcte des valeurs interm√©diaires. <br><br>  Par cons√©quent, nous ajoutons deux fonctions suppl√©mentaires, comme dans l'exemple pr√©c√©dent: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (x, [x]) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(t, f)</span></span></span><span class="hljs-function">:</span></span> res = f(t[<span class="hljs-number"><span class="hljs-number">0</span></span>]) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (res, t[<span class="hljs-number"><span class="hljs-number">1</span></span>] + [res])</code> </pre> <br>  Maintenant, nous r√©√©crivons le programme comme une cha√Æne d'appels: <br><pre> <code class="python hljs">print(bind(bind(bind(unit(x), f1), f2), f3))</code> </pre> <br>  Le diagramme suivant montre le processus de calcul se produisant √† <code>x=0</code> .  Encore une fois, <code>v1</code> , <code>v2</code> et <code>v3</code> indiquent les valeurs obtenues √† partir des appels <code>unit</code> et <code>bind</code> . <br><br><img src="https://habrastorage.org/webt/qh/uw/7y/qhuw7yx5fo1yjlcbce34kuhejj4.png"><br><br><h3>  3. Valeurs vides </h3><br>  Essayons de donner un exemple plus int√©ressant, cette fois avec des classes et des objets.  Supposons que nous ayons une classe <code>Employee</code> avec deux m√©thodes: <br><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Employee</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get_boss</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Return the employee's boss def get_wage(self): # Compute the wage</span></span></code> </pre> <br>  Chaque objet de la classe <code>Employee</code> a un gestionnaire (un autre objet de la classe <code>Employee</code> ) et un salaire, auxquels on acc√®de par des m√©thodes appropri√©es.  Les deux m√©thodes peuvent √©galement renvoyer <code>None</code> (l'employ√© n'a pas de gestionnaire, le salaire est inconnu). <br><br>  Dans cet exemple, nous allons cr√©er un programme qui montre le salaire du dirigeant de cet employ√©.  Si le gestionnaire n'est pas trouv√© ou si son salaire ne peut √™tre d√©termin√©, le programme renverra <code>None</code> . <br><br>  Id√©alement, nous devons √©crire quelque chose comme <br><pre> <code class="python hljs">print(john.get_boss().get_wage())</code> </pre> <br>  Mais dans ce cas, si l'une des m√©thodes retourne <code>None</code> , notre programme se terminera avec une erreur. <br><br>  Une fa√ßon √©vidente de g√©rer cette situation pourrait ressembler √† ceci: <br><pre> <code class="python hljs">result = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> john <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> john.get_boss() <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> john.get_boss().get_wage() <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: result = john.get_boss().get_wage() print(result)</code> </pre> <br>  Dans ce cas, nous <code>get_boss</code> des appels suppl√©mentaires aux <code>get_wage</code> <code>get_boss</code> et <code>get_wage</code> .  Si ces m√©thodes sont suffisamment lourdes (par exemple, l'acc√®s √† la base de donn√©es), notre solution ne fonctionnera pas.  Par cons√©quent, nous le changeons: <br><pre> <code class="python hljs">result = <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> john <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: boss = john.get_boss() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> boss <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: wage = boss.get_wage() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> wage <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span>: result = wage print(result)</code> </pre> <br>  Ce code est optimal en termes de calcul, mais est mal lu en raison de trois <code>if</code> imbriqu√©s.  Par cons√©quent, nous allons essayer d'utiliser la m√™me astuce que dans les exemples pr√©c√©dents.  D√©finissez deux fonctions: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">unit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> e <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bind</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e, f)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> e <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> f(e)</code> </pre> <br>  Et maintenant, nous pouvons mettre toute la solution sur une seule ligne. <br><pre> <code class="python hljs">print(bind(bind(unit(john), Employee.get_boss), Employee.get_wage))</code> </pre> <br>  Comme vous l'avez probablement d√©j√† remarqu√©, dans ce cas, nous n'avons pas eu √† √©crire la fonction d' <code>unit</code> : elle renvoie simplement le param√®tre d'entr√©e.  Mais nous allons le laisser pour qu'il nous soit alors plus facile de g√©n√©raliser notre exp√©rience. <br><br>  Notez √©galement qu'en Python, nous pouvons utiliser des m√©thodes en tant que fonctions, ce qui nous a permis d'√©crire <code>Employee.get_boss(john)</code> au lieu de <code>john.get_boss()</code> . <br><br>  Le diagramme suivant montre le processus de calcul lorsque John n'a pas de leader, c'est-√†-dire que <code>john.get_boss()</code> renvoie <code>None</code> . <br><br><img src="https://habrastorage.org/webt/hm/ae/9r/hmae9rlrkzaorijygg-jg2u7wrq.png"><br><br><h2>  Conclusions </h2><br>  Supposons que nous voulons combiner les fonctions de m√™me type <code>f1</code> , <code>f2</code> , <code>‚Ä¶</code> , <code>fn</code> .  Si leurs param√®tres d'entr√©e sont les m√™mes que les r√©sultats, on peut utiliser une simple cha√Æne de la forme <code>fn(‚Ä¶ f2(f1(x)) ‚Ä¶)</code> .  Le diagramme suivant montre un processus de calcul g√©n√©ralis√© avec des r√©sultats interm√©diaires, not√©s <code>v1</code> , <code>v2</code> , <code>‚Ä¶</code> , <code>vn</code> . <br><br><img src="https://habrastorage.org/webt/dl/yl/lp/dlyllpbpaltz_hwgjbugs8ti2zg.png"><br><br>  Souvent, cette approche n'est pas applicable.  Les types de valeurs d'entr√©e et de r√©sultats de fonction peuvent varier, comme dans le premier exemple.  Ou les fonctions peuvent √™tre composables, mais nous voulons ins√©rer une logique suppl√©mentaire entre les appels, comme dans les exemples 2 et 3, nous avons ins√©r√© une agr√©gation de valeurs interm√©diaires et une v√©rification pour une valeur vide, respectivement. <br><br><h3>  1. D√©cision imp√©rative </h3><br>  Dans tous les exemples, nous avons d'abord utilis√© l'approche la plus simple, qui peut √™tre repr√©sent√©e par le diagramme suivant: <br><br><img src="https://habrastorage.org/webt/bo/2i/co/bo2ico2rhkvds3jmirwyzsyd3yc.png"><br><br>  Avant d'appeler <code>f1</code> nous avons fait une initialisation.  Dans le premier exemple, nous avons initialis√© une variable pour stocker un journal commun, dans le second pour une liste de valeurs interm√©diaires.  Apr√®s cela, nous avons intercal√© les appels de fonction avec un certain code de connexion: nous avons calcul√© les valeurs agr√©g√©es, v√©rifi√© le r√©sultat pour <code>None</code> . <br><br><h3>  2. Monades </h3><br>  Comme nous l'avons vu dans les exemples, les d√©cisions imp√©ratives ont toujours souffert de verbosit√©, de r√©p√©tition et de logique confuse.  Pour obtenir un code plus √©l√©gant, nous avons utilis√© un certain mod√®le de conception, selon lequel nous avons cr√©√© deux fonctions: <code>unit</code> et <code>bind</code> .  Ce mod√®le est appel√© la <b>monade</b> .  La fonction de <code>bind</code> contient un middleware tandis que l' <code>unit</code> impl√©mente l'initialisation.  Cela nous permet de simplifier la solution finale en une seule ligne: <br><pre> <code class="python hljs">bind(bind( ... bind(bind(unit(x), f1), f2) ... fn<span class="hljs-number"><span class="hljs-number">-1</span></span>), fn)</code> </pre> <br>  Le processus de calcul peut √™tre repr√©sent√© par un diagramme: <br><br><img src="https://habrastorage.org/webt/tw/n5/ro/twn5ro-lppmqs2rssnne7buoqxo.png"><br><br>  Un appel √† l' <code>unit(x)</code> g√©n√®re une valeur initiale de <code>v1</code> .  Ensuite, <code>bind(v1, f1)</code> g√©n√®re une nouvelle valeur interm√©diaire <code>v2</code> , qui est utilis√©e dans le prochain appel √† <code>bind(v2, f2)</code> .  Ce processus se poursuit jusqu'√† l'obtention d'un r√©sultat final.  En d√©finissant diverses <code>unit</code> et <code>bind</code> dans le cadre de ce mod√®le, nous pouvons combiner diff√©rentes fonctions dans une m√™me cha√Æne de calculs.  Biblioth√®ques <i>de monades</i> ( <i>par exemple, PyMonad ou OSlash - environ Transl.</i> ) <i>Contiennent</i> g√©n√©ralement des monades pr√™tes √† l'emploi (paires d' <code>unit</code> et fonctions de <code>bind</code> ) pour la mise en ≈ìuvre de certaines compositions de fonctions. <br><br>  Pour cha√Æner des fonctions, les valeurs renvoy√©es par <code>unit</code> et <code>bind</code> doivent √™tre du m√™me type que les param√®tres d'entr√©e de <code>bind</code> .  Ce type est appel√© <b>monadique</b> .  Selon le diagramme ci-dessus, le type de variables <code>v1</code> , <code>v2</code> , <code>‚Ä¶</code> , <code>vn</code> doit √™tre de type monadique. <br><br>  Enfin, r√©fl√©chissez √† la fa√ßon dont vous pouvez am√©liorer le code √©crit √† l'aide de monades.  De toute √©vidence, les appels de <code>bind</code> r√©p√©t√©s semblent in√©l√©gants.  Pour √©viter cela, d√©finissez une autre fonction externe: <br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pipeline</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(e, *functions)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> f <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> functions: e = bind(e, f) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> e</code> </pre> <br>  Maintenant √† la place <br><pre> <code class="python hljs">bind(bind(bind(bind(unit(x), f1), f2), f3), f4)</code> </pre> <br>  nous pouvons utiliser l'abr√©viation suivante: <br><pre> <code class="python hljs">pipeline(unit(x), f1, f2, f3, f4)</code> </pre> <br><br><h2>  Conclusion </h2><br>  Les monades sont un mod√®le de conception simple et puissant utilis√© pour composer des fonctions.  Dans les langages de programmation d√©clarative, il aide √† impl√©menter des m√©canismes imp√©ratifs tels que la journalisation ou l'entr√©e / sortie.  Dans les langues imp√©ratives <br>  il permet de g√©n√©raliser et de raccourcir le code qui relie une s√©rie d'appels de fonctions du m√™me type. <br><br>  Cet article ne fournit qu'une compr√©hension superficielle et intuitive des monades.  Vous pouvez en savoir plus en contactant les sources suivantes: <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Wikip√©dia</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Monades en Python (avec une belle syntaxe!)</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Chronologie des tutoriels Monad</a> </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr445800/">https://habr.com/ru/post/fr445800/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr445788/index.html">Vid√©osurveillance en nuage √† faire soi-m√™me: nouvelles fonctionnalit√©s du SDK Web Ivideon</a></li>
<li><a href="../fr445792/index.html">Comment nous d√©veloppons la documentation dans un projet Embox ouvert</a></li>
<li><a href="../fr445794/index.html">Les g√©ants de l'informatique d√©voilent une solution de d√©ploiement de cloud hybride hybride</a></li>
<li><a href="../fr445796/index.html">Fintech Digest: Dorsey paie avec des bitcoins, la strat√©gie de la blockchain en Australie, l'introduction en bourse de Levi, le maire de Chicago et l'in√©vitabilit√© du bitcoin</a></li>
<li><a href="../fr445798/index.html">Rhinoc√©ros √† l'int√©rieur du chat - ex√©cutez le firmware dans l'√©mulateur Kopycat</a></li>
<li><a href="../fr445802/index.html">5 choses que tout le monde devrait savoir sur Internet</a></li>
<li><a href="../fr445804/index.html">Encapsulation pour de vrais samoura√Øs ou les nuances associ√©es au mot-cl√© interne en C #</a></li>
<li><a href="../fr445806/index.html">Comment l'intelligence artificielle change la science</a></li>
<li><a href="../fr445808/index.html">Nous d√©testons et chassons: la vie dangereuse d'un pirate de virus qui se fait de puissants ennemis</a></li>
<li><a href="../fr445814/index.html">Comment un robot de livraison a chang√© les habitudes culinaires des √©tudiants am√©ricains</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>