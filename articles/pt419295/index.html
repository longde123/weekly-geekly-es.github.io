<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë∏üèª üë®üèΩ‚ÄçüöÄ üßìüèΩ Multimodularidade e Punhal 2. Palestra Yandex ü§ú üåÆ üêª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Quando seu aplicativo √© constru√≠do em uma arquitetura de v√°rios m√≥dulos, voc√™ precisa dedicar muito tempo para garantir que todas as comunica√ß√µes entr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Multimodularidade e Punhal 2. Palestra Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/419295/">  Quando seu aplicativo √© constru√≠do em uma arquitetura de v√°rios m√≥dulos, voc√™ precisa dedicar muito tempo para garantir que todas as comunica√ß√µes entre os m√≥dulos sejam escritas corretamente no c√≥digo.  Metade deste trabalho pode ser confiada √† estrutura do Dagger 2. O chefe do grupo Yandex.Map para Android, Vladimir Tagakov <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">Noxa,</a> falou sobre os pr√≥s e contras da multi- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=" class="user_link">modularidade</a> e organiza√ß√£o conveniente dos m√≥dulos internos de DI usando os m√≥dulos Dagger 2. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/pMEAD6jjbaI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Meu nome √© Vladimir, estou desenvolvendo o Yandex.Maps e hoje vou falar sobre a modularidade e o segundo Dagger. <a name="habracut"></a><br><br>  Eu entendi a parte mais longa quando a estudei, a mais r√°pida.  A segunda parte, sobre a qual fiquei sentado por v√°rias semanas, vou lhe contar muito rapidamente e de forma concisa. <br><br><img src="https://habrastorage.org/webt/t5/2r/s5/t52rs5gcestw_7jvexuardxaaus.jpeg"><br><br>  Por que iniciamos um processo dif√≠cil de dividir em m√≥dulos no Maps?  N√≥s s√≥ quer√≠amos aumentar a velocidade de constru√ß√£o, todo mundo sabe disso. <br><br>  O segundo ponto do objetivo √© reduzir o engate de c√≥digo.  Peguei o equipamento da Wikipedia.  Isso significa que desejamos reduzir as interconex√µes entre os m√≥dulos para que os m√≥dulos sejam separados e possam ser usados ‚Äã‚Äãfora do aplicativo.  Declara√ß√£o inicial do problema: outros projetos Yandex devem poder usar parte da funcionalidade do Maps exatamente como n√≥s.  E, para desenvolver essa funcionalidade, estamos envolvidos no desenvolvimento do projeto. <br><br>  Eu quero jogar um chinelo em chamas em dire√ß√£o a [k] apt, que diminui a velocidade da montagem.  Eu n√£o o odeio muito, mas eu o amo muito.  Ele me deixa usar Dagger. <br><br><img src="https://habrastorage.org/webt/9c/bz/iv/9cbzivba2osslltalebrdwqfsre.jpeg"><br><br>  A principal desvantagem do processo de separa√ß√£o de m√≥dulos √©, paradoxalmente, a desacelera√ß√£o da velocidade de montagem.  Especialmente no in√≠cio, quando voc√™ remove os dois primeiros m√≥dulos, Common e alguns de seus recursos, a velocidade geral de constru√ß√£o do projeto diminui, n√£o importa como voc√™ tente.  No final, quanto menos c√≥digo permanecer no seu m√≥dulo principal, a velocidade de constru√ß√£o aumentar√°.  E, ainda assim, isso n√£o significa que tudo est√° muito ruim, h√° maneiras de contornar isso e at√© lucrar com o primeiro m√≥dulo. <br><br>  A segunda desvantagem √© que √© dif√≠cil separar o c√≥digo em m√≥dulos.  Quem tentou, sabe que voc√™ est√° come√ßando a extrair algum tipo de depend√™ncia, alguns cl√°ssicos, e tudo acaba copiando todo o seu m√≥dulo principal para outro m√≥dulo e recome√ßando.  Portanto, voc√™ precisa entender claramente o momento em que precisa parar e interromper a conex√£o usando algum tipo de abstra√ß√£o.  A desvantagem √© mais abstra√ß√µes.  Mais abstra√ß√µes - design mais complexo - mais abstra√ß√µes. <br><br>  √â dif√≠cil adicionar novos m√≥dulos Gradle.  Porque  Por exemplo, um desenvolvedor chega, leva um novo recurso ao desenvolvimento, imediatamente se sai bem, cria um m√≥dulo separado.  Qual √© o problema?  Ele deve se lembrar de todo o c√≥digo dispon√≠vel, que est√° no m√≥dulo principal, para que, se houver, reutilize-o e coloque-o em comum.  Como o processo de remo√ß√£o de algum m√≥dulo no Common √© constante at√© o m√≥dulo principal do aplicativo se transformar em uma camada fina. <br><br>  M√≥dulos, m√≥dulos, m√≥dulos ... M√≥dulos Gradle, m√≥dulos Dagger, m√≥dulos de interface s√£o horr√≠veis. <br><br><img src="https://habrastorage.org/webt/2b/nj/x2/2bnjx25ooi8xw2exdinm5yfmmys.jpeg"><br><br>  O relat√≥rio consistir√° em tr√™s partes: pequeno, grande e complexo.  Primeiro, a diferen√ßa entre Implementa√ß√£o e API no AGP.  O Android Gradle Plugin 3.0 apareceu relativamente recentemente.  Como foi tudo antes dele? <br><br><img src="https://habrastorage.org/webt/qc/oa/fw/qcoafwzux6royjdv11tr0sqvmug.jpeg"><br><br>  Aqui est√° um projeto t√≠pico de um desenvolvedor √≠ntegro, composto por tr√™s m√≥dulos: o m√≥dulo App, que √© o principal, √© montado e instalado no aplicativo e dois m√≥dulos de recursos. <br><br>  Fale imediatamente sobre as flechas.  √â uma grande dor, todo mundo desenha na dire√ß√£o em que √© conveniente para ele desenhar.  Para mim, eles querem dizer que do Core h√° uma seta para o Feature.  Portanto, o Feature conhece o Core, pode usar classes do Core.  Como voc√™ pode ver, n√£o h√° seta entre o Core e o aplicativo, o que significa que o aplicativo parece n√£o estar usando o Core.  O n√∫cleo n√£o √© um m√≥dulo comum, √©, todo mundo depende dele, √© separado, h√° pouco c√≥digo nele.  Enquanto n√£o vamos considerar isso. <br><br>  Nosso m√≥dulo principal mudou, precisamos refaz√™-lo de alguma forma.  N√≥s mudamos o c√≥digo nele.  Cor amarela - altera√ß√£o de c√≥digo. <br><br><img src="https://habrastorage.org/webt/l4/b1/5w/l4b15wdqsgukdttudzee9vbxne0.jpeg"><br><br>  Ap√≥s a remontagem do projeto.  √â claro que, ap√≥s a troca de um m√≥dulo, ele dever√° ser reconstru√≠do e recompilado.  Ok <br><br><img src="https://habrastorage.org/webt/_q/jo/mh/_qjomhp4-vkpioy_0ai112zuam0.jpeg"><br><br>  Ap√≥s a montagem do m√≥dulo de recursos, isso depende dele.  Tamb√©m est√° claro, a depend√™ncia dele foi remontada e voc√™ precisa se atualizar.  Quem sabe o que mudou l√°. <br><br>  E aqui acontece a coisa mais desagrad√°vel.  O m√≥dulo App est√° funcionando, embora n√£o esteja claro o porqu√™.  Sei com certeza que n√£o uso o Core de forma alguma e por que o aplicativo est√° sendo reconstru√≠do n√£o √© claro.  E ele √© muito grande, porque no come√ßo do caminho, e isso √© uma dor muito grande. <br><br><img src="https://habrastorage.org/webt/hu/j8/la/huj8larhnqmhr6dq7qhp2etnkc8.jpeg"><br><br>  Al√©m disso, se v√°rios recursos, muitos m√≥dulos dependem do Core, o mundo inteiro ser√° remontado, leva muito tempo. <br><br>  Vamos atualizar para a nova vers√£o do AGP e substituir, como diz o manual, tudo em compila√ß√£o com a API, e n√£o com a implementa√ß√£o, como voc√™ pensava.  Nada muda.  Os esquemas s√£o id√™nticos.  Qual √© a nova maneira de especificar depend√™ncias de implementa√ß√£o?  Imagine o mesmo esquema usando apenas essa palavra-chave, sem uma API?  Ser√° assim. <br><br><img src="https://habrastorage.org/webt/nj/ns/fg/njnsfgghg9om12lpwlu5yh21hmu.jpeg"><br><br>  Aqui na implementa√ß√£o, √© claramente visto que h√° uma conex√£o entre o Core e o App.  Aqui podemos entender claramente que n√£o precisamos, queremos nos livrar dele, ent√£o remova-o.  Tudo est√° se tornando mais f√°cil. <br><br><img src="https://habrastorage.org/webt/rp/lx/xr/rplxxrfrsee28vucqevngre8xq4.jpeg"><br><br>  Agora quase tudo √© bom, at√© mais do que isso.  Se mudarmos alguma API no Core, adicionar uma nova classe, um novo m√©todo p√∫blico ou privado de pacote, o Core e o Feature ser√£o reconstru√≠dos.  Se voc√™ alterar a implementa√ß√£o dentro do m√©todo ou adicionar um m√©todo privado, teoricamente, a Recria√ß√£o do Recurso n√£o deve acontecer, porque nada mudou. <br><br><img src="https://habrastorage.org/webt/mk/ub/1e/mkub1ect0enydqitlermncinoyk.jpeg"><br><br>  Vamos mais longe.  Aconteceu que muitos dependem do nosso n√∫cleo.  O n√∫cleo √© provavelmente algum tipo de rede ou processamento de dados do usu√°rio.  Por ser a Rede, tudo muda com bastante frequ√™ncia, tudo √© reconstru√≠do e temos a mesma dor da qual fugimos com cuidado. <br>  Vejamos duas maneiras de lidar com isso. <br><br><img src="https://habrastorage.org/webt/um/_d/c-/um_dc-9rumfh-vyvlqdavr6zvgg.jpeg"><br><br>  S√≥ podemos transferir as APIs do nosso m√≥dulo Core para um m√≥dulo separado, sua API, que usamos.  E em um m√≥dulo separado, podemos executar a implementa√ß√£o dessas interfaces. <br><br><img src="https://habrastorage.org/webt/eu/o8/0-/euo80-48enzm_rvppcwmb1qbjca.jpeg"><br><br>  Voc√™ pode olhar para a conex√£o na tela.  O Impl de n√∫cleo n√£o estar√° dispon√≠vel para recursos.  Ou seja, n√£o haver√° conex√£o entre os recursos e a implementa√ß√£o do Core.  E o m√≥dulo, destacado em amarelo, fornecer√° apenas f√°bricas que fornecer√£o algum tipo de implementa√ß√£o de suas interfaces desconhecidas para ningu√©m. <br><br>  Ap√≥s essa convers√£o, quero chamar a aten√ß√£o para o fato de que a API principal, devido ao fato de a palavra-chave API estar permanente, estar√° dispon√≠vel para todos os recursos de forma transit√≥ria. <br><br><img src="https://habrastorage.org/webt/7a/lq/iu/7alqiukvhfpie8_olsuekuczfgi.jpeg"><br><br>  Ap√≥s essas transforma√ß√µes, mudamos algo na implementa√ß√£o que voc√™ faz com mais frequ√™ncia e apenas o m√≥dulo com as f√°bricas ser√° reconstru√≠do, √© muito leve, pequeno, voc√™ nem precisa considerar quanto tempo leva. <br><br><img src="https://habrastorage.org/webt/8p/ri/ah/8priahixb3prj9of3cqpzqjxaeg.jpeg"><br><br>  Outra op√ß√£o nem sempre funciona.  Por exemplo, se esse √© algum tipo de rede, mal posso imaginar como isso pode acontecer, mas se esse √© algum tipo de tela de login do usu√°rio, pode ser que seja. <br><br><img src="https://habrastorage.org/webt/eu/rf/cs/eurfcs3tlrk9jasm6fqphr5lb4y.jpeg"><br><br>  Podemos criar o Sample, o mesmo m√≥dulo raiz completo que o App, e coletar apenas um recurso, pois ser√° muito r√°pido e poder√° ser desenvolvido rapidamente iterativamente.  No final da apresenta√ß√£o, mostrarei quanto tempo leva para criar e criar uma amostra. <br><br>  Com a primeira parte finalizada.  Quais m√≥dulos existem? <br><br><img src="https://habrastorage.org/webt/sv/jm/xk/svjmxkqxazeydcsinvypfuh_-24.jpeg"><br><br>  Existem tr√™s tipos de m√≥dulos.  Comum, √© claro, deve ser o mais leve poss√≠vel e n√£o deve conter nenhum recurso, mas apenas a funcionalidade usada por todos.  Para n√≥s, em nossa equipe, isso √© especialmente importante.  Se fornecermos nossos m√≥dulos de recursos a outros aplicativos, for√ß√°-los-emos a arrastar o Common em qualquer caso.  Se ele √© muito gordo, ningu√©m vai nos amar. <br><br><img src="https://habrastorage.org/webt/bd/n-/1s/bdn-1si0fx1fxre86gldhgepx34.jpeg"><br><br>  Se voc√™ tem um projeto menor, com o Common voc√™ pode se sentir mais relaxado, e tamb√©m n√£o precisa ser muito zeloso. <br><br><img src="https://habrastorage.org/webt/ah/jj/fi/ahjjfiyfzltnadyswlalhsoeh-u.jpeg"><br><br>  O pr√≥ximo tipo de m√≥dulo √© Aut√¥nomo.  O m√≥dulo mais comum e intuitivo que cont√©m um recurso espec√≠fico: algum tipo de tela, algum tipo de script do usu√°rio e assim por diante.  Deve ser o mais independente poss√≠vel e, para isso, na maioria das vezes voc√™ pode criar um aplicativo de amostra e desenvolv√™-lo nele.  O aplicativo de amostra √© muito importante no in√≠cio do processo de divis√£o, porque tudo ainda est√° crescendo lentamente e voc√™ deseja obter lucro o mais r√°pido poss√≠vel.  No final, quando tudo √© transformado em m√≥dulos, voc√™ pode reconstruir tudo, ser√° r√°pido.  Porque n√£o ser√° reconstru√≠do mais uma vez. <br><br><img src="https://habrastorage.org/webt/sz/la/p5/szlap5ot3jnjdtvsj5roegwlboy.jpeg"><br><br>  M√≥dulos de celebridades.  Eu mesmo propus a palavra.  O ponto √© que ele √© muito famoso por todos, e muitos dependem dele.  A mesma rede.  Eu j√° disse que, se voc√™ costuma mont√°-lo, como pode evitar o fato de que tudo lhe √© remontado.  H√° uma outra maneira que pode ser usada para pequenos projetos para os quais n√£o vale a pena dar tudo como um v√≠cio separado, um artefato separado. <br><br><img src="https://habrastorage.org/webt/pk/yq/u8/pkyqu8xflbfu40ufwly3wr4rgzi.jpeg"><br><br>  Como √© isso?  Repetimos que retiram a API do Celebrity, retiram sua implementa√ß√£o e agora preste aten√ß√£o, preste aten√ß√£o nas setas de Feature para Celebrity.  Isso est√° acontecendo.  A API do seu m√≥dulo caiu em Comum, a implementa√ß√£o permaneceu nela e a f√°brica que fornece a implementa√ß√£o dessa API apareceu no seu m√≥dulo principal.  Se algu√©m assistiu Mobius, Denis Neklyudov falou sobre isso.  Esquema muito semelhante. <br><br>  Usamos o Dagger no projeto, gostamos e quer√≠amos tirar o m√°ximo proveito desse benef√≠cio no contexto de diferentes m√≥dulos. <br><br><img src="https://habrastorage.org/webt/kr/ak/xu/krakxunqnjjjoinel9yk0sfbemc.jpeg"><br><br>  Quer√≠amos que cada m√≥dulo tivesse um gr√°fico de depend√™ncia independente, um componente raiz espec√≠fico do qual fazer qualquer coisa, quer√≠amos ter nosso pr√≥prio c√≥digo gerado para cada m√≥dulo Gradle.  N√£o quer√≠amos que o c√≥digo gerado se arrastasse para o c√≥digo principal.  Quer√≠amos o m√°ximo de valida√ß√£o em tempo de compila√ß√£o poss√≠vel.  Sofremos de [k] apt, pelo menos devemos obter algum lucro com o que Dagger d√°.  E com tudo isso, n√£o quer√≠amos for√ßar ningu√©m a usar Dagger.  Nem quem implementa o m√≥dulo de novos recursos separadamente, nem quem os consome, s√£o nossos colegas que solicitam alguns recursos para si. <br><br>  Como organizar um gr√°fico de depend√™ncia separado dentro do nosso m√≥dulo de recursos? <br><br><img src="https://habrastorage.org/webt/9p/-u/im/9p-uimpq3hakpiwmedw-kinrsai.jpeg"><br><br>  Voc√™ pode tentar usar o Subcomponente, e at√© funcionar√°.  Mas isso tem algumas falhas.  Voc√™ pode ver que no Subcomponente n√£o est√° claro quais depend√™ncias ele usa do Componente.  Para entender isso, voc√™ deve remontar o projeto com longa e dolorosa, ver o que Dagger jura e adicion√°-lo. <br>  Al√©m disso, os subcomponentes s√£o projetados de tal forma que for√ßam outras pessoas a usar o Dagger, e isso n√£o funcionar√° facilmente para seus clientes e voc√™ mesmo se voc√™ decidir recusar em algum m√≥dulo. <br><br><img src="https://habrastorage.org/webt/d3/wz/vj/d3wzvj5_hjyy31e9rl-6hlo36ck.jpeg"><br><br>  Uma das coisas mais repugnantes √© que, ao usar o Subcomponente, todas as depend√™ncias s√£o inseridas no m√≥dulo principal.  O Dagger √© projetado para que os subcomponentes sejam gerados por uma classe incorporada de seus componentes de estrutura, o pai.  Talvez algu√©m estivesse olhando para o c√≥digo gerado e seu tamanho em seus componentes gerados?  Temos 20 mil linhas nele.  Como os subcomponentes sempre s√£o classes aninhadas para componentes, acontece que os subcomponentes tamb√©m s√£o aninhados e todo o c√≥digo gerado cai no m√≥dulo principal, esse arquivo de vinte linhas que precisa ser compilado e precisa ser refatorado, o Studio come√ßa a desacelerar. <br><br>  Mas existe uma solu√ß√£o.  Voc√™ pode usar apenas o componente. <br><br><img src="https://habrastorage.org/webt/dr/1b/lc/dr1blc8pj2qzzhxs3pnnu7lbqui.jpeg"><br><br>  No Dagger, um componente pode especificar depend√™ncias.  Isso √© mostrado no c√≥digo e mostrado na figura.  Depend√™ncias nas quais voc√™ especifica m√©todos de Provis√£o, m√©todos de f√°brica que mostram de quais entidades seu componente depende.  Ele os quer no momento da cria√ß√£o. <br>  Antes, eu sempre pensei que apenas outros componentes podem ser especificados nessas depend√™ncias, e √© por isso - a documenta√ß√£o diz isso. <br><br><img src="https://habrastorage.org/webt/gk/us/45/gkus45n1uhs0jhqjojmciaa3y48.jpeg"><br><br>  Agora eu entendo o que significa usar a interface do componente, mas antes eu pensava que era apenas um componente.  De fato, voc√™ precisa usar uma interface composta de acordo com as regras para criar uma interface para um componente.  Em resumo, basta fornecer m√©todos, quando voc√™ tiver getters para algum tipo de depend√™ncia.  Voc√™ tamb√©m pode encontrar um c√≥digo de exemplo na documenta√ß√£o do Dagger. <br><br><img src="https://habrastorage.org/webt/ry/jo/63/ryjo63y8bfqo1a5kfkgeff4iv10.jpeg"><br><br>  O OtherComponent tamb√©m est√° escrito l√°, e isso √© confuso, porque, de fato, voc√™ n√£o pode apenas inserir componentes l√°. <br><br>  Como gostar√≠amos de usar esse neg√≥cio na realidade? <br><br><img src="https://habrastorage.org/webt/sy/v1/r_/syv1r_5jzsr7i8vkniesru582gg.jpeg"><br><br>  Na realidade, existe um m√≥dulo Feature, ele possui um pacote de API vis√≠vel, localizado pr√≥ximo √† raiz de todos os pacotes e diz que existe um ponto de entrada - FeatureActivity.  N√£o √© necess√°rio usar tipealias, apenas para deixar claro.  Pode ser um fragmento, pode ser um ViewController - n√£o importa.  E existem suas depend√™ncias, FeatureDeps, onde √© indicado que ele precisa de um contexto, algum tipo de servi√ßo de rede, do Common, algum tipo de coisa que voc√™ deseja obter do aplicativo e qualquer cliente deve satisfazer isso.  Quando ele faz, tudo vai funcionar. <br><br><img src="https://habrastorage.org/webt/tu/rl/yk/turlykyi-zrmheakatdmpasqqr4.jpeg"><br><br>  Como usamos tudo isso no m√≥dulo de recursos?  Aqui eu uso Activity, isso √© opcional.  Como de costume, criamos nosso pr√≥prio componente raiz do Dagger e usamos o m√©todo m√°gico findComponentDependencies, √© muito semelhante ao Dagger para Android, mas n√£o podemos us√°-lo principalmente porque n√£o queremos arrastar subcomponentes.  Caso contr√°rio, podemos tirar toda a l√≥gica deles. <br><br>  No come√ßo, tentei dizer como funciona, mas voc√™ pode v√™-lo no projeto de amostra na sexta-feira.  Como isso deve ser usado pelos clientes da sua biblioteca no seu m√≥dulo principal? <br><br><img src="https://habrastorage.org/webt/ui/nk/mj/uinkmj6kxqhr3218cfbo_y8v9uk.jpeg"><br><br>  Primeiro de tudo, s√£o apenas tipealias.  De fato, ele tem um nome diferente, mas, por uma quest√£o de brevidade, √©.  A classe de interface MapOfDepth by Dependency fornece sua implementa√ß√£o.  No aplicativo, dizemos que podemos criar depend√™ncias da mesma forma que no Dagger para Android, e √© muito importante que o componente herde essa interface e receba automaticamente os m√©todos de provisionamento.  A adaga a partir deste momento come√ßa a nos for√ßar a fornecer essa depend√™ncia.  At√© que voc√™ o forne√ßa, ele n√£o ser√° compilado.  Esta √© a principal conveni√™ncia: voc√™ decidiu criar um recurso, expandiu seu componente com essa interface - tudo at√© fazer o resto, ele n√£o ser√° apenas compilado, mas produzir√° mensagens de erro claras.  O m√≥dulo √© simples, o ponto √© que ele vincula seu componente √† implementa√ß√£o da interface.  Aproximadamente o mesmo que no Dagger para Android. <br><br>  Vamos passar para os resultados. <br><br><img src="https://habrastorage.org/webt/hs/gv/0o/hsgv0oyk_v-jbzjk8lono2uepju.jpeg"><br><br>  Eu verifiquei nosso mainframe e meu laptop local antes de desligar tudo o que era poss√≠vel.  Se adicionarmos um m√©todo p√∫blico ao Feature, o tempo de compila√ß√£o ser√° significativamente diferente.  Aqui mostro as diferen√ßas quando estou construindo um projeto de amostra.  Isso √© 16 segundos.  Ou quando eu coleciono todos os cart√µes - isso significa dois minutos para ficar sentado e esperar por cada mudan√ßa, mesmo m√≠nima.  Portanto, muitos recursos que desenvolvemos e que ser√£o desenvolvidos em projetos de amostra.  No mainframe, o tempo √© compar√°vel. <br><br><img src="https://habrastorage.org/webt/ey/ou/va/eyouvaxzp3kw8cl0eb3jznokvpe.jpeg"><br><br>  Outro resultado importante.  Antes de destacar o m√≥dulo Feature, era assim: no mainframe, eram 28 segundos, agora s√£o 49 segundos.  Alocamos o primeiro m√≥dulo e j√° recebemos uma desacelera√ß√£o da montagem quase duas vezes. <br><br><img src="https://habrastorage.org/webt/f2/px/_o/f2px_oqd8uktolgh3-f2ae8j6to.jpeg"><br><br>  E outra op√ß√£o √© uma montagem incremental simples do nosso m√≥dulo, n√£o um recurso, como no anterior.  Foram 28 segundos at√© o m√≥dulo ser alocado.  Quando alocamos um c√≥digo que n√£o precisava ser reconstru√≠do a cada vez, e o [k] apt, que n√£o precisava ser executado a cada vez, vencemos tr√™s segundos.  Deus sabe o que, mas espero que, a cada novo m√≥dulo, o tempo diminua. <br><br>  Aqui est√£o links √∫teis para artigos: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">API versus implementa√ß√£o</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo com medi√ß√µes do tempo de constru√ß√£o</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">m√≥dulo de amostra</a> .  A apresenta√ß√£o estar√° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">dispon√≠vel</a> .  Obrigada </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt419295/">https://habr.com/ru/post/pt419295/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt419279/index.html">O resumo de materiais interessantes para o desenvolvedor m√≥vel 264 (30 de julho a 5 de agosto)</a></li>
<li><a href="../pt419281/index.html">rcm - gerenciador de arquivos rc: ajuste e uso</a></li>
<li><a href="../pt419283/index.html">Bezos joga dinheiro e engenheiros para desenvolver um foguete em conex√£o com a acelera√ß√£o da corrida espacial</a></li>
<li><a href="../pt419289/index.html">Ou√ßa e fale: an√∫ncio do HolyJS 2018 em Moscou</a></li>
<li><a href="../pt419291/index.html">An√∫ncio do Heisenbug 2018 Moscou: respostas a todas as perguntas</a></li>
<li><a href="../pt419297/index.html">Visualizando coment√°rios sobre Habr√© na ordem de adi√ß√£o</a></li>
<li><a href="../pt419299/index.html">Uma l√¢mpada inteligente que mostra o clima em sua cidade</a></li>
<li><a href="../pt419303/index.html">Relat√≥rio da Tesla mostrou perdas e receita mais altas do que os investidores esperavam</a></li>
<li><a href="../pt419305/index.html">Spy Toy or Find: M√°quina de escrever Barbie ‚Ñ¢</a></li>
<li><a href="../pt419307/index.html">Roskomnadzor se interessa por conex√µes comerciais do Facebook</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>