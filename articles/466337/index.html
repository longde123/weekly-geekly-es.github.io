<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèáüèª üí∑ üíú ¬øDe qu√© color es tu funci√≥n? üë©üèΩ‚Äçüé§ ‚úÇÔ∏è üåΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="No s√© sobre ti, pero para m√≠ no hay mejor comienzo para el d√≠a que preocuparse por la programaci√≥n. La sangre hierve al ver una cr√≠tica exitosa de uno...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>¬øDe qu√© color es tu funci√≥n?</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/466337/"><p>  No s√© sobre ti, pero para m√≠ no hay mejor comienzo para el d√≠a que preocuparse por la programaci√≥n.  La sangre hierve al ver una cr√≠tica exitosa de uno de los lenguajes "audaces" utilizados por los plebeyos, atormentado durante todo el d√≠a de trabajo entre visitas t√≠midas a StackOverflow. </p><br><p>  (Mientras tanto, usted y yo usamos solo el lenguaje m√°s ilustrado y las herramientas sofisticadas dise√±adas para las manos h√°biles de maestros como nosotros). </p><br><p>  Por supuesto, como autor del serm√≥n, tomo riesgos.  ¬°Te puede gustar el idioma del que me burlo!  Un folleto imprudente podr√≠a haber tra√≠do inadvertidamente a mi blog una furiosa multitud de m√≥viles con horquillas y antorchas listas. </p><br><p>  Para protegerme del fuego justo y no ofender tus sentimientos (probablemente delicados), hablar√© sobre el lenguaje ... </p><a name="habracut"></a><br><p>  ... quien acaba de llegar.  Sobre una efigie de paja, cuyo √∫nico papel es quemar a los cr√≠ticos en la hoguera. </p><br><p>  S√© que esto suena tonto, pero cr√©anme, al final veremos qu√© cara (o caras) fueron pintadas en una cabeza de paja. </p><br><h1 id="novyy-yazyk">  Nuevo idioma </h1><br><p> Ser√° una inflexi√≥n aprender un idioma completamente nuevo (y desagradable) solo para un art√≠culo de blog, as√≠ que digamos que es muy similar al idioma que ya conocemos.  Por ejemplo Javascript.  Tirantes y puntos y comas.  <code>if</code> , <code>while</code> , etc.  - <em>Lingua franca de</em> nuestra multitud. </p><br><p>  Eleg√≠ JS no porque este art√≠culo sea sobre √©l.  Es solo un idioma en el que el lector promedio probablemente entrar√°.  Voila </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">thisIsAFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"!"</span></span>; }</code> </pre> <br><p>  Dado que nuestro animal de peluche es un lenguaje <em>genial</em> (lectura - mala), tiene <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">funciones de primera clase</a> .  Entonces puedes escribir algo como esto: </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  ,     , //    function filter(collection, predicate) { var result = []; for (var i = 0; i &lt; collection.length; i++) { if (predicate(collection[i])){ result.push(collection[i]); } } return result; }</span></span></code> </pre> <br><p>  Esta es una de las caracter√≠sticas de <em>primera clase</em> , y como su nombre lo indica, son geniales y s√∫per √∫tiles.  Probablemente est√©s acostumbrado a transformar las colecciones de datos con su ayuda, pero tan pronto como captas el concepto, comienzas a usarlo en todas partes, maldita sea. </p><br><p>  Quiz√°s en pruebas: </p><br><pre> <code class="javascript hljs">describe(<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ it(<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ expect(<span class="hljs-string"><span class="hljs-string">""</span></span>).not.toBe(<span class="hljs-string"><span class="hljs-string">""</span></span>); }); };</code> </pre> <br><p>  O cuando necesita analizar (analizar) los datos: </p><br><pre> <code class="javascript hljs">tokens.match(Token.LEFT_BRACKET, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">token</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Parse a list literal... tokens.consume(Token.RIGHT_BRACKET); });</span></span></code> </pre> <br><p>  Luego, despu√©s de acelerar, escribes todo tipo de geniales bibliotecas y aplicaciones reutilizables que giran en torno a funciones, llamadas a funciones, retornos de funciones desde funciones, una cabina funcional. </p><br><blockquote>  traductor: en el original "Functapalooza".  El prefijo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">-a-palooza</a> es tan genial que quieres compartirlo con todos. </blockquote><br><h1 id="kakogo-cveta-vasha-funkciya">  ¬øDe qu√© color es tu funci√≥n? </h1><br><p>  Y aqu√≠ comienzan las rarezas.  Nuestro lenguaje tiene una caracter√≠stica peculiar: </p><br><h3 id="1-kazhdaya-funkciya-imeet-cvet">  1. Cada funci√≥n tiene un color. </h3><br><p>  Cada funci√≥n, una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">devoluci√≥n de llamada</a> an√≥nima o una funci√≥n regular con un nombre, es roja o azul.  Dado que el resaltado del c√≥digo en nuestro blog no resalta el color diferente de las funciones, aceptemos que la sintaxis es: </p><br><pre> <code class="javascript hljs">blue*<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomethingAzure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   ... } red*function doSomethingCarnelian(){ //    ... }</span></span></code> </pre> <br><p>  Nuestro lenguaje no tiene funciones incoloras.  ¬øQuieres hacer una funci√≥n?  - Debe elegir un color.  Estas son las reglas.  Y hay algunas reglas m√°s que debes seguir: </p><br><h3 id="2-cvet-vliyaet-na-sposob-vyzova-funkcii">  2. El color afecta la forma en que se llama la funci√≥n </h3><br><p>  Imagine que hay dos sintaxis para llamar a funciones: "azul" y "rojo".  Algo como: </p><br><pre> <code class="javascript hljs">doSomethingAzure(...)*blue; doSomethingCarnelian()*red;</code> </pre> <br><p>  Cuando llama a una funci√≥n, debe usar una llamada que coincida con su color.  Si no lo ha adivinado, llamaron a la funci√≥n roja con <code>*blue</code> despu√©s de los corchetes (o viceversa), suceder√° algo muy malo.  Una pesadilla infantil olvidada hace mucho tiempo, como un payaso con serpientes en lugar de manos que se escond√≠a debajo de tu cama.  Saltar√° del monitor y te chupar√° los ojos. </p><br><p>  Est√∫pida regla, ¬øverdad?  Oh, pero una cosa m√°s: </p><br><h3 id="3-tolko-krasnaya-funkciya-mozhet-vyzvat-krasnuyu-funkciyu">  3. Solo la funci√≥n roja puede causar la funci√≥n roja. </h3><br><p>  Puede llamar a la funci√≥n azul desde rojo.  Esto es kosher: </p><br><pre> <code class="javascript hljs">red*<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomethingCarnelian</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ doSomethingAzure()*blue; }</code> </pre> <br><p>  Pero no al rev√©s.  Si lo intentas: </p><br><pre> <code class="javascript hljs">blue*<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doSomethingAzure</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ doSomethingCarnelian()*red; }</code> </pre> <br><p>  - Ser√°s visitado por el viejo Clown Spider Maw. </p><br><p>  Esto hace que sea m√°s dif√≠cil escribir funciones m√°s altas, como <code>filter()</code> del ejemplo.  Debemos elegir un color para cada nueva funci√≥n y esto afecta el color de las funciones que podemos pasarle.  La soluci√≥n obvia es hacer que <code>filter()</code> rojo.  Entonces podemos llamar al menos funciones rojas, al menos funciones azules.  Pero luego nos lastimamos por la pr√≥xima espina en la corona de espinas, que es el lenguaje dado: </p><br><h3 id="4-krasnye-funkcii-bolnee-vyzyvat">  4. Las funciones rojas causan dolor </h3><br><p>  No identificaremos este "dolor", solo imagine que el programador debe saltar a trav√©s del aro cada vez que llama a la funci√≥n roja.  La llamada puede ser demasiado polisil√°bica o no puede ejecutar la funci√≥n dentro de algunas expresiones.  O solo puede acceder a la funci√≥n roja desde l√≠neas impares. </p><br><p>  No importa lo que sea, pero si decides hacer que la funci√≥n sea roja, todos los que usen tu API querr√°n escupir en tu caf√© o hacer algo peor. </p><br><p>  La soluci√≥n obvia en este caso es nunca usar funciones rojas.  Simplemente haga que todo sea azul, y estar√° de vuelta en el mundo normal, donde todas las funciones son del mismo color, lo que equivale al hecho de que no tienen color y que nuestro lenguaje no es completamente tonto. </p><br><p>  Por desgracia, los s√°dicos que desarrollaron este lenguaje (todos saben que los autores de los lenguajes de programaci√≥n son s√°dicos, ¬øverdad?) Metan la √∫ltima espina: </p><br><h3 id="5-nekotorye-funkcii-yadra-yazyka----krasnye">  5. Algunas de las funciones centrales del lenguaje son rojas. </h3><br><p>  Algunas funciones integradas en la plataforma, funciones que <em>necesitamos</em> usar que no pueden ser escritas por nosotros mismos, est√°n disponibles solo en rojo.  En este punto, una persona inteligente puede comenzar a sospechar que este lenguaje nos odia. </p><br><h1 id="eto-vse-vina-funkcionalnyh-yazykov">  ¬°Todo esto es culpa de los lenguajes funcionales! </h1><br><p>  Puede pensar que el problema es que estamos tratando de usar funciones de orden superior.  Si simplemente dejamos de perder el tiempo con todas estas tonter√≠as funcionales, y comenzamos a escribir funciones azules normales de <em>primer orden</em> (funciones que no funcionan con otras funciones, aprox. Traductor), seg√∫n lo planeado por Dios, nos libraremos de todo este dolor. </p><br><p>  Si llamamos solo funciones azules, hacemos todas nuestras funciones azules.  De lo contrario, hacemos rojo.  Hasta que creamos funciones que acepten funciones, no debemos preocuparnos por el "polimorfismo del color de la funci√≥n" (¬øpolicrom√°tico?) U otras tonter√≠as. </p><br><p>  Pero, por desgracia, las funciones de orden superior son solo un ejemplo.  El problema surge cada vez que queremos dividir nuestro programa en funciones para su reutilizaci√≥n. </p><br><p>  Por ejemplo, tenemos un peque√±o c√≥digo que, bueno, no s√©, implementa el algoritmo de Dijkstra sobre un gr√°fico que representa cu√°nto se presionan mutuamente sus conexiones sociales.  (Pas√© mucho tiempo tratando de decidir qu√© significar√≠a el resultado. ¬øDeseos transitivos?) </p><br><p>  M√°s tarde, necesitaba usar este algoritmo en otro lugar.  Naturalmente, envuelve el c√≥digo en una funci√≥n separada.  Ll√°mala del lugar viejo y del nuevo.  ¬øPero de qu√© color debe ser la funci√≥n?  Probablemente intente hacerlo azul, pero ¬øqu√© pasa si usa una de estas desagradables funciones "solo rojas" de la biblioteca del kernel? </p><br><p>  Digamos que el nuevo lugar desde el que desea llamar a la funci√≥n es azul.  Pero ahora necesita reescribir el c√≥digo de llamada en rojo.  Y luego rehaga la funci√≥n que llama a este c√≥digo.  Uf  Tendr√°s que recordar constantemente el color de todos modos.  Esta ser√° la arena en sus ba√±adores en una programaci√≥n de vacaciones en la playa. </p><br><h1 id="cvetnaya-allegoriya">  Alegor√≠a de color </h1><br><p>  De hecho, no estoy hablando de color.  Esta es una alegor√≠a, un recurso literario.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Joder</a> , no se trata de las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estrellas en las barrigas</a> , se trata de la carrera.  Probablemente ya sospeches ... </p><br><h3 id="krasnye-funkcii---asinhronnye">  Funciones rojas: asincr√≥nicas </h3><br><p>  Si programa en JavaScript o Node.js, cada vez que define una funci√≥n que llama a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una funci√≥n de</a> devoluci√≥n de llamada (devoluci√≥n de llamada) para "devolver" el resultado, escribe una funci√≥n roja.  Mira esta lista de reglas y observa c√≥mo encajan en mi met√°fora: </p><br><ol><li>  Las funciones s√≠ncronas devuelven un resultado, las funciones as√≠ncronas no; a cambio, llaman a una devoluci√≥n de llamada. </li><li>  Las funciones s√≠ncronas devuelven el resultado como un valor de retorno, las funciones as√≠ncronas lo devuelven, provocando la devoluci√≥n de llamada que les pas√≥. </li><li>  No puede llamar a una funci√≥n asincr√≥nica desde una s√≠ncrona, porque no puede conocer el resultado hasta que la funci√≥n asincr√≥nica se ejecute m√°s tarde. </li><li>  Las funciones asincr√≥nicas no se compilan en expresiones debido a devoluciones de llamada, requieren que sus errores se manejen de manera diferente y no se pueden usar en un bloque <code>try/catch</code> o en una serie de otras expresiones que controlan el programa. </li><li>  Todo lo relacionado con Node.js es que la biblioteca del kernel es as√≠ncrona.  (Aunque vuelven a donar y comienzan a agregar versiones de <code>_Sync()</code> a muchas cosas). </li></ol><br><p>  Cuando las personas hablan del <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">"infierno de devoluci√≥n de llamada"</a> , hablan de lo molesto que es tener funciones "rojas" en su idioma.  Cuando crean <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">4089 bibliotecas para programaci√≥n asincr√≥nica</a> (en 2019 ya 11217 - aprox. Traductor), intentan hacer frente al problema a nivel de biblioteca de que se han quedado atrapados con el lenguaje. </p><br><h1 id="i-promise-the-future-is-better">  Prometo que el futuro es mejor </h1><br><blockquote>  en la traducci√≥n: "Prometo que el futuro es mejor" se pierde el juego de palabras del t√≠tulo y el contenido de la secci√≥n </blockquote><p>  La gente de Node.js hace tiempo que se dio cuenta de que las devoluciones de llamada duelen y estaban buscando soluciones.  Una de las t√©cnicas que ha inspirado a muchas personas son las <code>promises</code> , que tambi√©n puede conocer por el <code>futures</code> apodo. </p><br><blockquote>  en la inform√°tica rusa, en lugar de traducir "promesas" como "promesas", se estableci√≥ un documento de seguimiento del ingl√©s: "promesas".  La palabra "Futuros" se usa tal cual, probablemente porque los "futuros" ya est√°n ocupados por la jerga financiera. </blockquote><p>  Promis es un contenedor para la devoluci√≥n de llamadas y el controlador de errores.  Si est√° pensando en pasar una devoluci√≥n de llamada para el resultado y otra devoluci√≥n de llamada para el error, entonces el <code>future</code> es la encarnaci√≥n de esta idea.  Este es un objeto b√°sico que es una operaci√≥n asincr√≥nica. </p><br><p>  Acabo de recibir un mont√≥n de palabras elegantes y puede sonar como una gran soluci√≥n, pero principalmente es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aceite de serpiente</a> .  Las promesas realmente hacen que escribir c√≥digo asincr√≥nico sea un poco m√°s f√°cil.  Son m√°s f√°ciles de componer en expresiones, por lo que la regla 4 es un poco menos estricta. </p><br><p>  Pero para ser honesto, es como la diferencia entre un golpe en el est√≥mago o la ingle.  S√≠, no duele tanto, pero nadie estar√° encantado con esa elecci√≥n. </p><br><p>  A√∫n no puede usar promesas con manejo de excepciones u otros <br>  operadores de gesti√≥n.  No puede llamar a una funci√≥n que devuelve el <code>future</code> del c√≥digo s√≠ncrono.  ( <em>puede</em> , pero el pr√≥ximo responsable del mantenimiento de su c√≥digo inventar√° una m√°quina del tiempo, regresar√° en el momento en que lo hizo y se pegar√° un l√°piz en la cara por la raz√≥n # 2). </p><br><p>  Las promesas a√∫n dividen su mundo en mitades as√≠ncronas y sincr√≥nicas con todo el sufrimiento resultante.  Entonces, incluso si su idioma admite <code>promises</code> o <code>futures</code> , todav√≠a se parece mucho al mio. </p><br><p>  (S√≠, esto incluso incluye el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dart</a> que uso. Por lo tanto, estoy muy contento de que parte del equipo est√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">intentando otros enfoques para el paralelismo</a> ) </p><br><blockquote>  enlace del proyecto abandonado oficialmente </blockquote><br><h1 id="im-awaiting-a-solution">  Estoy esperando una soluci√≥n </h1><br><p>  Los programadores de C # probablemente se sienten complacientes (la raz√≥n por la que se est√°n convirtiendo en m√°s y m√°s v√≠ctimas es que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Halesberg</a> y la compa√±√≠a roc√≠an todo y roc√≠an el lenguaje con az√∫car sint√°ctico).  En C #, puede usar la palabra clave <code>await</code> para llamar a una funci√≥n asincr√≥nica. </p><br><p>  Esto hace que hacer llamadas asincr√≥nicas sea tan f√°cil como sincr√≥nico, con la adici√≥n de una peque√±a y linda palabra clave.  Puede insertar una llamada en <code>await</code> en las expresiones, utilizarlas en el manejo de excepciones, en el flujo de instrucciones.  Puedes volverte loco.  Deja que la lluvia espere como d√≥lares para tu nuevo √°lbum de rapero. </p><br><p>  Async-await es bueno, as√≠ que lo agregamos a Dart.  Es mucho m√°s f√°cil <em>escribir</em> c√≥digo asincr√≥nico con √©l.  Pero, como siempre, hay un "Pero".  Aqui esta  <em>Pero ...</em> a√∫n divides el mundo por la mitad.  Las funciones asincr√≥nicas ahora son m√°s f√°ciles de escribir, pero <em>siguen siendo funciones asincr√≥nicas.</em> </p><br><p>  A√∫n tienes dos colores.  Async-await resuelve el molesto problema # 4: hacen que llamar a funciones rojas no sea m√°s dif√≠cil que llamar a funciones azules.  Pero el resto de las reglas todav√≠a est√°n aqu√≠: </p><br><ol><li>  Las funciones s√≠ncronas devuelven valores, las funciones as√≠ncronas devuelven un contenedor ( <code>Task&lt;T&gt;</code> en C # o <code>Future&lt;T&gt;</code> en Dart) alrededor del valor. </li><li>  Sincr√≥nico acaba de llamar, as√≠ncrono necesita <code>await</code> . </li><li>  Al llamar a una funci√≥n asincr√≥nica, obtienes un objeto contenedor cuando realmente quieres un valor.  No puede expandir el valor hasta que haga que <em>su</em> funci√≥n sea as√≠ncrona y la llame con <code>await</code> (pero vea el siguiente p√°rrafo). </li><li>  Adem√°s de esperar un poco la decoraci√≥n, al menos resolvimos este problema. </li><li>  La biblioteca central de C # es m√°s antigua que la asincron√≠a, por lo que creo que nunca tuvieron este problema. </li></ol><br><p>  <code>Async</code> <em>realmente</em> mejor.  Preferir√≠a async-wait a devoluciones de llamadas desnudas cualquier d√≠a de la semana.  Pero nos mentimos a nosotros mismos si creemos que todos los problemas est√°n resueltos.  Tan pronto como comience a escribir funciones de orden superior, o reutilice el c√≥digo, nuevamente se dar√° cuenta de que el color todav√≠a est√° all√≠, desangrando todo su c√≥digo fuente. </p><br><h1 id="kakoy-yazyk-_ne_-cvetnoy">  ¬øQu√© idioma <em>no</em> es el color? </h1><br><p>  Entonces JS, Dart, C # y Python tienen este problema.  CoffeeScript y la mayor√≠a de los otros lenguajes que compilan en JS tambi√©n (y Dart hered√≥).  Creo que incluso ClojureScript tiene esta trampa, a pesar de sus esfuerzos activos con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">core.async</a> </p><br><p>  ¬øQuieres saber cu√°l no?  <em>Java</em>  Estoy en lo cierto  ¬øCon qu√© frecuencia dice: "S√≠, Java solo lo est√° haciendo bien"?  Y as√≠ sucedi√≥.  En su defensa, est√°n tratando activamente de corregir su supervisi√≥n promoviendo <code>futures</code> y async IO.  Es como una carrera peor que peor. </p><br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">todo</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ya esta</a> en Java </blockquote><p>  C #, de hecho, tambi√©n <em>puede</em> solucionar este problema.  <em>Eligieron</em> tener color.  Antes de agregar async-await y toda esta <code>Task&lt;T&gt;</code> basura, podr√≠a usar llamadas API s√≠ncronas regulares.  Otros tres idiomas que no tienen un problema de "color": Go, Lua y Ruby. </p><br><p>  Adivina lo que tienen en com√∫n? </p><br><p>  <em>Corrientes</em>  O m√°s precisamente: muchas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pilas de llamadas</a> independientes que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pueden cambiar</a> .  Estos no son necesariamente hilos del sistema operativo.  Las corutinas en Go, las corutinas en Lua y los hilos en Ruby son todos adecuados. </p><br><p>  (Es por eso que existe esta peque√±a advertencia para C #: puede evitar el dolor asincr√≥nico en C # utilizando hilos). </p><br><h1 id="pamyat-o-proshlyh-operaciyah">  Memoria de operaciones pasadas </h1><br><p>  El problema fundamental es "¬øc√≥mo continuar desde el mismo lugar cuando se completa la operaci√≥n (as√≠ncrona)"?  Te sumergiste en el abismo de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pila de llamadas</a> y luego llamaste a alg√∫n tipo de operaci√≥n de E / S.  En aras de la aceleraci√≥n, esta operaci√≥n utiliza la API asincr√≥nica subyacente de su sistema operativo.  No <em>puedes</em> esperar a que se complete.  Debe volver al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bucle de eventos de</a> su idioma y darle tiempo al sistema operativo para completar la operaci√≥n. </p><br><p>  Una vez que esto sucede, debe reanudar lo que estaba haciendo.  Por lo general, el lenguaje "recuerda d√≥nde estaba" a trav√©s de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">la pila de llamadas</a> .  Sigue todas las funciones que se han llamado en este momento y observa d√≥nde se muestra el contador de comandos en cada una de ellas. </p><br><p>  Pero para realizar E / S as√≠ncronas, debe relajarse, descartar toda la pila de llamadas en C. Escriba Trick-22.  ¬°Tiene E / S s√∫per r√°pidas, pero no puede usar el resultado!  Todos los idiomas con E / S as√≠ncronas bajo el cap√≥, o, en el caso de JS, el bucle de eventos del navegador, se ven obligados a manejar esto de alguna manera. </p><br><p>  Node, con sus devoluciones de llamadas que marchan para siempre, cierra todas estas llamadas.  Cuando escribes: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeSundae</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback</span></span></span><span class="hljs-function">) </span></span>{ scoopIceCream(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">iceCream</span></span></span><span class="hljs-function">) </span></span>{ warmUpCaramel(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">caramel</span></span></span><span class="hljs-function">) </span></span>{ callback(pourOnIceCream(iceCream, caramel)); }); }); }</code> </pre> <br><p>  Cada una de estas expresiones funcionales <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="><em>cierra</em></a> todo su contexto circundante.  Esto transfiere par√°metros, como <code>iceCream</code> y <code>caramel</code> , desde la pila de llamadas al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mont√≥n</a> .  Cuando una funci√≥n externa devuelve un resultado y la pila de llamadas se destruye, es genial.  Los datos todav√≠a est√°n en alg√∫n lugar del mont√≥n. </p><br><p>  El problema es que tienes que resucitar cada una de estas malditas llamadas nuevamente.  Incluso hay un nombre especial para esta conversi√≥n: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">estilo de paso continuo</a> </p><br><blockquote>  enlace feroz funcionalidad </blockquote><p>  Esto fue inventado por los piratas inform√°ticos en los a√±os 70, como una representaci√≥n intermedia para su uso bajo el cap√≥ de los compiladores.  Esta es una forma muy extra√±a de introducir c√≥digo que facilita la realizaci√≥n de algunas optimizaciones del compilador. </p><br><p>  Nadie pens√≥ que un programador podr√≠a <em>escribir ese c√≥digo</em> .  Y luego apareci√≥ Node, y de repente todos pretendemos escribir un backend compilador.  ¬øD√≥nde nos volteamos por el camino equivocado? </p><br><p>  Tenga en cuenta que las promesas y los <code>futures</code> realmente no ayudan mucho.  Si los usa, sabe que todav√≠a est√° acumulando capas gigantes de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">expresiones funcionales</a> .  Simplemente los pasa a <code>.then()</code> lugar de a la funci√≥n asincr√≥nica en s√≠. </p><br><h1 id="awaiting-a-generated-solution">  En espera de una soluci√≥n generada </h1><br><p>  Async-waitit <em>realmente</em> ayuda.  Si mira debajo del cap√≥ al compilador cuando se encuentra <code>await</code> , ver√° que realmente realiza la conversi√≥n de CPS.  Es por <em>eso</em> que debe usar <code>await</code> en C # - esto es una pista para el compilador - "detenga la funci√≥n en el medio aqu√≠".  Todo despu√©s de <code>await</code> convierte en una nueva funci√≥n que el compilador sintetiza en su nombre. </p><br><p>  Es por eso que async-await no necesita soporte de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tiempo de ejecuci√≥n</a> dentro del marco .NET.  El compilador compila esto en una cadena de cierres relacionados, que ya sabe c√≥mo manejar.  (Curiosamente, los cierres tampoco requieren soporte en tiempo de ejecuci√≥n. Se compilan en clases an√≥nimas. En C #, los cierres son solo objetos). </p><br><p>  Probablemente te est√©s preguntando cuando menciono los generadores.  ¬øHay <code>yield</code> en tu idioma?  Entonces √©l puede hacer algo muy similar. </p><br><p>  (Creo que los generadores y la espera as√≠ncrona son en realidad isom√≥rficos. En alg√∫n lugar de los rincones polvorientos y grietas de mi disco duro se encuentra una pieza de c√≥digo que implementa el bucle del juego en los generadores usando solo la espera as√≠ncrona). </p><br><p>  Entonces, ¬ød√≥nde estoy?  Oh si  Entonces, con devoluciones de llamada, promesas, espera as√≠ncrona y generadores, terminas tomando tu funci√≥n asincr√≥nica y dividi√©ndola en un mont√≥n de cierres que viven en el mont√≥n. </p><br><p>  Su funci√≥n llama externa en tiempo de ejecuci√≥n.  Cuando finaliza el bucle de eventos o la operaci√≥n de E / S, se llama a su funci√≥n y contin√∫a desde donde estaba.  Pero esto significa que todo lo que est√© por encima de su funci√≥n <em>tambi√©n</em> deber√≠a volver.  A√∫n necesita restaurar toda la pila. </p><br><p>  Aqu√≠ es de donde viene la regla: "Puedes llamar a la funci√≥n roja solo desde la funci√≥n roja".  Debe guardar toda la pila de llamadas en cierres en <code>main()</code> o en el controlador de eventos. </p><br><h1 id="realizaciya-steka-vyzovov">  Implementaci√≥n de pila de llamadas </h1><br><p>  Pero usando hilos ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">verde</a> o nivel de sistema operativo), no necesita hacer esto.  Simplemente puede pausar todo el hilo y saltar al sistema operativo o al bucle de eventos <em>sin tener que regresar de todas estas funciones</em> . </p><br><p>  El lenguaje Go, en mi opini√≥n, lo hace a la perfecci√≥n.  Tan pronto como realice alguna operaci√≥n de E / S, Go estacionar√° esta rutina y continuar√° cualquier otra que no est√© bloqueada por E / S. </p><br><p>  Si observa las operaciones de E / S en la biblioteca est√°ndar de Golang, parecen sincronizadas.  En otras palabras, simplemente funcionan y luego devuelven el resultado cuando est√°n listos.  Pero esta sincronizaci√≥n no significa lo mismo que en Javascript.  Go-  ,    IO .  Go       . </p><br><p>   Go ‚Äî   <em></em>    ,        .       ,   ,    . </p><br><p>     ,               API,   ,     .           . </p><br><hr><br><h1 id="ot-perevodchika">   </h1><br><p>  ,           ,          .       ,        . ,      50%          . </p><br><p> ,      ,      ,                 . </p><br><p>  Javascript   -,   , ,   JS   ,    JS   ,          .   ,    JS   . </p><br><p>      ,      (     )   ‚Äî  ,     ,   ,        <code>async</code>         .     <code>import threading</code>      (  ,          AsyncIO, Twisted  Tornado,    ). </p><br><p>     ,             ,     ,     ,        ,                  ,      . </p><br><p>       ,     Go,     Go . </p><br><p>  ,        ,  ,  ( -    )          ,          "async-await  ".      . </p><br><p>    ,       . </p><br><p> ,       ,     . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/466337/">https://habr.com/ru/post/466337/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../466319/index.html">Oferta: VMware compra inicio basado en la nube</a></li>
<li><a href="../466323/index.html">Creamos un juego de plataforma port√°til en el microcontrolador Cortex M0 +</a></li>
<li><a href="../466329/index.html">Mapa electr√≥nico de la vinificaci√≥n en Rusia. Dise√±o y contenido.</a></li>
<li><a href="../466333/index.html">C√≥mo organizar un lugar de trabajo para ti</a></li>
<li><a href="../466335/index.html">Crear una aplicaci√≥n Slack usando las caracter√≠sticas de 8base</a></li>
<li><a href="../466341/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 33. Preparaci√≥n para el examen ICND1</a></li>
<li><a href="../466345/index.html">M√©todo de onda para construir un esquema de color.</a></li>
<li><a href="../466347/index.html">Entrenamiento Cisco 200-125 CCNA v3.0. D√≠a 34. Concepto avanzado de VLAN</a></li>
<li><a href="../466349/index.html">C√≥mo realizar pruebas A / B en 15,000 tiendas sin conexi√≥n</a></li>
<li><a href="../466355/index.html">Los cocodrilos vuelan, pero bajo-bajo (sobre ekranoplans sin emociones, pero con digresiones)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>