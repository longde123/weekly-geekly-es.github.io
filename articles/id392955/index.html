<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚öìÔ∏è üòî ü§∑üèø Modul pengontrol universal untuk Internet of things. Pengujian FatFs ü§æüèø üëÇüèæ üêÖ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Pada artikel ini saya akan mendemonstrasikan proyek pengujian perpustakaan FatFs porting ke modul K66BLEZ1. Pustaka sumber terbuka FatFs dikenal oleh ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Modul pengontrol universal untuk Internet of things. Pengujian FatFs</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/392955/"><a href=""><img align="left" width="1010" src="https://habrastorage.org/getpro/geektimes/post_images/a10/d19/e62/a10d19e628ece2a53ba5c69e85db3f1f.png"></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada artikel ini saya akan mendemonstrasikan proyek pengujian perpustakaan FatFs porting ke modul K66BLEZ1. Pustaka sumber terbuka FatFs dikenal oleh pemrogram mikrokontroler dan mengimplementasikan dukungan untuk sistem file FAT32 pada kartu SD dan MMC. Suatu hal yang tak terpisahkan dalam pengembangan penebang, pengontrol logika yang dapat diprogram, perekam suara, pelacak, dll. Tetapi kadang-kadang itu bisa menjadi hambatan dalam sistem waktu-nyata.</font></font><br>
<br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Memperkenalkan modul K66BLEZ1 dimulai pada artikel ini: </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Modul Pengendali Universal untuk Internet of Things. </font><font style="vertical-align: inherit;">Breathing Life</font></font></a><br>
 <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Artikel tersebut menyebutkan paket perangkat lunak (SDK) untuk keluarga mikrokontroler K66. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Secara khusus, di SDK Anda dapat menemukan contoh untuk menguji FatFs. </font><font style="vertical-align: inherit;">Contohnya sangat sederhana dan karena itu saya memodifikasinya untuk kepraktisan yang lebih besar.</font></font><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisasi output informasi debugging.</font></font></h1><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk contoh asli dari SDK agar dapat bekerja di papan K66BLEZ1, Anda tidak perlu melakukan perubahan apa pun terhadapnya. Tapi ada satu hal, tapi! Tidak akan ada output ke terminal debug. Karena papan modul tidak memiliki konektor khusus untuk debug output dengan antarmuka RS232. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Modul debugging dirancang untuk pekerjaan yang ketat melalui antarmuka SWD dan menggunakan teknologi </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Real Time Terminal (RTT) yang</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dijelaskan dalam </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">artikel ini</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Namun, pendekatan ini mungkin tidak menarik bagi pemilik adapter debugging yang tidak kompatibel dengan J-Link. Oleh karena itu, saya tidak memperbaiki kode output debug dalam aplikasi, tetapi mengarahkannya ke UART4. Di sini sekali lagi, untuk menghindari prototipe, saya mengambil keuntungan dari J-Link. Sinyal RX dan TX dari UART built-in &lt;-&gt; Konverter port Virtual COM adalah output ke adaptor ini pada konektor SWD. Saya menggunakan mereka. Dengan demikian, penyetelan pertama muncul di papan modul. Itu ditunjukkan pada diagram di bawah ini dengan warna merah. </font></font><br>
<a href=""><img align="left" width="339" src="https://habrastorage.org/getpro/geektimes/post_images/0e2/386/683/0e238668328e7f13f2c490b162f075a5.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Klik untuk memperbesar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
mis. pada papan K66BLEZ1, solder koneksi sinyal merah dari konektor debugging dengan sinyal yang diperlukan berasal dari mikrokontroler. </font></font><br>
<a href=""><img align="left" width="490" src="https://habrastorage.org/getpro/geektimes/post_images/acb/481/159/acb481159081f57a5250f3cd5fff64e0.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Klik untuk memperbesar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Di bawah ini adalah diagram adaptor dari konektor J-Link ke konektor debug papan K66BLEZ1 untuk memahami dari mana sinyal berasal dari adaptor. </font></font><br>
<a href=""><img align="left" width="711" src="https://habrastorage.org/getpro/geektimes/post_images/0b9/348/fd0/0b9348fd0b4b27ce8cc79aa33b7f43ee.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Klik untuk memperbesar)</font></font></em></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Organisasi proyek.</font></font></h1><br>
      <b>IAR Embedded Workbench for ARM 7.40.7</b><br>
      FatFs   <b>SDK</b>  . <br>
    ,        SDK  ,                 .<br>
<br>
     UART   <b>board.h</b>. <br>
       <b>sdcard_FatFs.c</b>   <b>BOARD_BootClockRUN</b>  <b>BOARD_BootClockHSRUN</b>, ..     <b>180</b>   <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">120</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> MHz </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ini terletak di sini,</font></font></a> <br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
proyek kedua didasarkan pada yang pertama, tetapi dengan penambahan yang signifikan. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek ini memungkinkan Anda untuk menguji kecepatan membuka, membuat, menulis, membaca, menutup, dan menghapus file. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Proyek </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ada di sini</font></font></a><br>
<br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Deskripsi tes</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami mengkompilasi proyek di IAR dan memprogram melalui adaptor JTAG / SWD ke dalam mikrokontroler MK66FN2M0VLQ18 di papan tulis. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah program dimulai, menu jenis berikut ini ditampilkan di terminal: </font></font><br>
<a href=""><img align="left" width="450" src="https://habrastorage.org/getpro/geektimes/post_images/2a3/7e5/482/2a37e5482fc1811f8d52ec1b23974938.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Klik untuk memperbesar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Menu menawarkan untuk menjalankan salah satu dari tiga tes dan kemampuan untuk mengubah beberapa parameter tes. </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes nomor 1</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> secara berurutan menulis jumlah file yang ditentukan dengan ukuran yang ditentukan. Data acak yang diperoleh oleh fungsi rand direkam. Setiap catatan disertai dengan ukuran waktu pembukaan, perekaman dan penutupan file. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kemudian file dibaca berurutan dan isinya diperiksa, waktu pembukaan, membaca dan menutup file juga diukur. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jika bendera Hapus diatur, maka file kemudian dihapus dan waktu yang diperlukan untuk menghapus file diukur.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk 3 grup operasi: pembuatan file, baca dan hapus terbalik, statistik dirangkum. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beginilah tampilan jendela untuk pengujian penulisan, membaca, menghapus 5 file ukuran 8192 baht. </font></font><br>
<a href=""><img align="left" width="459" src="https://habrastorage.org/getpro/geektimes/post_images/15a/c45/0dc/15ac450dc99132e90ecb742aa1891aa0.png"><br clear="left">
<em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Klik untuk memperbesar)</font></font></em></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Jumlah file dan ukurannya dapat diubah secara sewenang-wenang. Jika nilainya terlalu besar, program akan menampilkan pesan tentang memori yang tidak mencukupi. </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes nomor 2</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> membuat, menulis, membaca, menghapus file dengan ukuran tertentu dan mengulangi ini beberapa kali. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nama file berubah setiap saat. Di sini jumlah entri bisa sangat besar. Tes ini memungkinkan Anda untuk menguji kartu untuk menyelesaikan keausan dan pada saat yang sama melihat gambar degradasi kecepatan tulis dan baca. </font></font><br>
<br>
<b><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tes nomor 3</font></font></i></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membuat file dan menulis padanya nomor yang ditentukan (nilai File Cnt) kali blok dari ukuran yang ditentukan. </font><font style="vertical-align: inherit;">Kemudian prosedur diulang untuk file lain. </font><font style="vertical-align: inherit;">Skenario ini memungkinkan Anda untuk menguji mode perekaman kontinu yang khas pada perangkat perekaman audio dengan perubahan volume.</font></font><br>
 <br>
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hasil</font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada papan K66BLEZ1, perpustakaan FatFs menunjukkan hasil yang sangat baik. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk pengujian, kami menggunakan kartu microSD 8GB </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GOOD RAM SDU8GDMGR</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (kelas 10). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kecepatan tulis rata-rata file 32,768 byte adalah 5,1 Mb / s. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kecepatan tulis maksimum file 32768 byte adalah 11,8 Mb / s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kecepatan baca rata-rata 32768 byte adalah 15,9 Mb / s </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kecepatan membaca maksimum file 32.768 byte adalah 16,2 Mb / s. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pengukuran dilakukan dengan nomor tes 1 pada 100 file. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Telah diamati bahwa banyaknya ukuran file ke ukuran cluster memiliki efek yang kuat pada kecepatan baca dan tulis.</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Juga, dengan sejumlah besar file, waktu pembukaan file mulai mempengaruhi kecepatan keseluruhan, yang meningkat dua kali lipat ketika jumlah file berubah dari satu menjadi seratus. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nilai praktis dari tes ini adalah mereka memungkinkan Anda menemukan opsi pemformatan kartu yang optimal, ukuran file yang optimal, serta mengoptimalkan ukuran blok dari file yang direkam untuk kinerja maksimum. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tes yang sama akan membantu untuk melihat dan mengevaluasi karakteristik keterlambatan perekaman sporadis untuk kartu SD dan MMC sehubungan dengan pengoperasian mekanisme internal mereka untuk menaikkan level keausan sektor memori. </font></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Semua bahan yang terkait dengan proyek ini disimpan di sini</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/Indemsys/K66BLEZ1</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id392955/">https://habr.com/ru/post/id392955/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id392945/index.html">Ahli iklim akhirnya setuju: pemanasan global disebabkan oleh aktivitas manusia</a></li>
<li><a href="../id392947/index.html">Opera Dragonfly offline: panduan lengkap kecil</a></li>
<li><a href="../id392949/index.html">Sejarah Aplikasi Kantor: Bagian I</a></li>
<li><a href="../id392951/index.html">Harap bayar ekstra: mengapa smartphone kehilangan dukungan kartu memori</a></li>
<li><a href="../id392953/index.html">–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –Ω–∞ –≤—Å—Ç—Ä–µ—á—É-–¥–∏—Å–∫—É—Å—Å–∏—é ¬´–°—Ç—Ä–∞—Ö —Ñ–∏–∑–∏–∫–∏¬ª –≤ —Ä–∞–º–∫–∞—Ö –Ω–∞—É—á–Ω–æ-–ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤—Å—Ç—Ä–µ—á ¬´–ù–∞—É–∫–∞ –ù–µ –º—É–∫–∞¬ª</a></li>
<li><a href="../id392957/index.html">–í–∑–ª–æ–º–∞–≤—à–∏–µ iPhone —Ç–µ—Ä—Ä–æ—Ä–∏—Å—Ç–∞ —Ö–∞–∫–µ—Ä—ã –Ω–µ —Å–ø–µ—à–∞—Ç –¥–µ–ª–∏—Ç—å—Å—è —Å–µ–∫—Ä–µ—Ç–∞–º–∏</a></li>
<li><a href="../id392959/index.html">Tinjau Moto 360 generasi ke-2</a></li>
<li><a href="../id392963/index.html">MDI i5 - proyektor DLP portabel di Android</a></li>
<li><a href="../id392965/index.html">Ya, Anda dapat menjalankan aplikasi Linux desktop di bawah Windows 10</a></li>
<li><a href="../id392967/index.html">Pemrograman dalam lukisan klasik</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>