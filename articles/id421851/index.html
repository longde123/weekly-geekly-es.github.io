<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍳 🗑️ 🛎️ Masalah burung hantu dan bola dunia: menghubungkan dua majelis dengan ruang nama dan nama kelas yang identik 🚡 😦 🥅</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Malam ini, gelas memulai percakapan tentang bagaimana manajer paket bekerja pada platform yang berbeda. Selama percakapan, kami sampai pada diskusi te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Masalah burung hantu dan bola dunia: menghubungkan dua majelis dengan ruang nama dan nama kelas yang identik</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/421851/"><p><img src="https://habrastorage.org/webt/3e/8e/s7/3e8es7uiiyc_xknridquachmpak.png"></p><br><p> <em>Malam ini, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">gelas</a> memulai percakapan tentang bagaimana manajer paket bekerja pada platform yang berbeda.</em>  <em>Selama percakapan, kami sampai pada diskusi tentang situasi ketika Anda perlu menghubungkan dua pustaka ke proyek .NET Core yang berisi kelas dengan nama yang sama di namespace yang sama.</em>  <em>Karena saya melakukan sedikit. NET Core, saya ingin memeriksa bagaimana masalah ini dapat diselesaikan.</em>  <em>Apa yang datang dari ini dijelaskan lebih lanjut</em> </p><a name="habracut"></a><br><p>  <strong>Penafian</strong> .  Apakah situasi seperti itu sering terjadi?  Selama lebih dari 10 tahun bekerja dengan .NET, saya tidak pernah harus menghadapi situasi yang sama dalam proyek nyata.  Tetapi percobaan itu menarik. </p><br><p>  Untuk berjaga-jaga, saya akan mengklarifikasi bahwa saya akan melakukan percobaan menggunakan: </p><br><ul><li>  macOS 10.13, </li><li>  .NET Core SDK 2.1.302 </li><li>  Penunggang 2018.2 </li></ul><br><p>  Jadi, kami akan mensimulasikan situasi ketika kami memiliki dua perpustakaan yang memiliki kelas yang kami butuhkan yang harus kami gunakan dalam proyek kami.  Pada saat yang sama, kami tidak memiliki akses ke kode sumber, tetapi kami tidak dapat mendekompilasi rakitan untuk mengubah ruang nama di dalamnya, dan kemudian kami juga tidak dapat mengkompilasi kembali. </p><br><h4 id="podgotovka-eksperimenta">  Persiapan percobaan </h4><br><p>  Jadi, sebagai permulaan, persiapkan satu burung hantu dan dua bola.  Sebagai burung hantu, kami akan memiliki proyek yang menargetkan netcoreapp2.1.  Kami akan membuat dua proyek sebagai bola dunia, satu di antaranya juga akan ditargetkan pada netcoreapp2.1, dan yang kedua di netstandard2.0 </p><br><p><img src="https://habrastorage.org/webt/bs/hz/zz/bshzzzux7fsi_lkytbemm-p7rya.png"></p><br><p>  Di setiap proyek, kami menempatkan kelas Globe, yang akan berada dalam ruang nama yang identik, tetapi mereka akan memiliki implementasi yang berbeda: </p><br><p>  File pertama: </p><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Space</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Globe</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetColor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"Green"</span></span>; } }</code> </pre> <br><p>  File kedua: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Space</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Globe</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetColor</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"Blue"</span></span>; } }</code> </pre> <br><h3 id="popytka-nomer-odin">  Mencoba nomor satu </h3><br><p>  Karena, sesuai dengan kondisi masalah, kita harus bekerja dengan majelis eksternal, dan bukan proyek, kami akan menambahkan tautan ke proyek sesuai, seolah-olah itu hanya perpustakaan.  Untuk melakukan ini, pertama kompilasi semua proyek sehingga kita memiliki Globe1.dll dan Globe2.dll yang kita butuhkan.  Kemudian tambahkan tautan ke mereka di proyek sebagai berikut: </p><br><p><img src="https://habrastorage.org/webt/oc/xx/fz/ocxxfzvbq9-5alrr1lsumpm_ipy.png"></p><br><p>  Sekarang coba buat variabel kelas Globe: </p><br><p><img src="https://habrastorage.org/webt/ei/e0/tq/eie0tqbpu2tt228xv1y0zpuwn0a.png"></p><br><p>  Seperti yang Anda lihat, sudah pada tahap ini IDE memperingatkan kita bahwa ada masalah dengan pemahaman di mana kelas Globe yang kita butuhkan harus diambil. </p><br><p>  Pada awalnya tampaknya situasinya sangat khas dan seharusnya sudah ada, granit siap pakai, jawaban untuk Stack Overflow.  Ternyata, belum ada solusi untuk <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">masalah</a> ini yang diusulkan untuk .NET Core.  Atau Google saya mengecewakan saya.  Tapi saya berhasil menemukan sesuatu yang berguna di Stack Overflow. Satu-satunya publikasi yang masuk akal yang saya kelola untuk google adalah pada tahun 2006 dan menggambarkan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">situasi yang serupa</a> untuk versi klasik .NET.  Dalam hal ini, masalah yang sangat mirip dibahas dalam repositori <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">proyek NuGet</a> . </p><br><p>  Sejauh ini, tidak banyak informasi berguna, tetapi masih ada: </p><br><ul><li>  Dalam versi klasik .NET, mekanisme alias diterapkan </li><li>  Menurut spesifikasinya, C # <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">mendukung penggunaan alias</a> dalam kode </li></ul><br><p>  Masih memahami bagaimana melakukan ini di .NET Core. </p><br><p>  Sayangnya, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">versi dokumentasi saat ini</a> agak sederhana berbicara tentang kemungkinan menghubungkan paket / biaya eksternal.  Dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">deskripsi file csproj</a> juga tidak menjelaskan kemungkinan membuat alias.  Namun demikian, dengan coba-coba, saya dapat mengetahui bahwa alias untuk rakitan di .NET Core masih didukung.  Dan mereka dibuat sebagai berikut: </p><br><pre> <code class="cs hljs">&lt;Project Sdk=<span class="hljs-string"><span class="hljs-string">"Microsoft.NET.Sdk"</span></span>&gt; &lt;PropertyGroup&gt; &lt;OutputType&gt;Exe&lt;/OutputType&gt; &lt;TargetFramework&gt;netcoreapp2<span class="hljs-number"><span class="hljs-number">.1</span></span>&lt;/TargetFramework&gt; &lt;/PropertyGroup&gt; &lt;ItemGroup&gt; &lt;Reference Include=<span class="hljs-string"><span class="hljs-string">"Globe1, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"</span></span>&gt; &lt;HintPath&gt;..\Globe1\bin\Debug\netcoreapp2<span class="hljs-number"><span class="hljs-number">.1</span></span>\Globe1.dll&lt;/HintPath&gt; &lt;Aliases&gt;Lib1&lt;/Aliases&gt; &lt;/Reference&gt; &lt;Reference Include=<span class="hljs-string"><span class="hljs-string">"Globe2, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"</span></span>&gt; &lt;HintPath&gt;..\Globe2\bin\Debug\netstandard2<span class="hljs-number"><span class="hljs-number">.0</span></span>\Globe2.dll&lt;/HintPath&gt; &lt;Aliases&gt;Lib2&lt;/Aliases&gt; &lt;/Reference&gt; &lt;/ItemGroup&gt; &lt;/Project&gt;</code> </pre> <br><p>  Sekarang tinggal belajar bagaimana menggunakan alias ini.  Kata kunci <em>eksternal yang</em> disebutkan sebelumnya akan membantu kami dalam hal ini: </p><br><p>  Berikut ini ditulis dalam dokumentasi tentang hal itu: </p><br><blockquote>  Dalam beberapa kasus, Anda mungkin perlu merujuk dua versi rakitan dengan nama jenis yang sepenuhnya memenuhi syarat.  Misalnya, Anda perlu menggunakan dua atau lebih versi perakitan dalam satu aplikasi.  Menggunakan alias rakitan eksternal, Anda dapat menyertakan ruang nama untuk setiap rakitan dalam pembungkus di dalam ruang nama tingkat root yang dinamai oleh alias ini, yang memungkinkan Anda untuk menggunakannya dalam satu file. <br>  ... <br>  Setiap deklarasi alias eksternal memperkenalkan ruang nama level root tambahan yang cocok dengan namespace global (tetapi tidak ada di dalamnya).  Dengan demikian, referensi ke tipe dari setiap perakitan tanpa ambiguitas dapat dibuat menggunakan nama lengkapnya, yang root adalah alias namespace yang sesuai. </blockquote><p>  Yang benar di sini adalah jangan lupa bahwa extern juga digunakan dalam C # untuk mendeklarasikan metode dengan implementasi eksternal dari kode yang tidak dikelola.  Dalam hal ini, extern biasanya digunakan dengan atribut DllImport.  Anda dapat membaca lebih lanjut tentang ini di bagian yang sesuai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dari dokumentasi</a> . </p><br><p>  Jadi, mari kita coba gunakan alias kita: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> Lib1; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> Lib2; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">Owl</span></span> { ... <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SuperOwl</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Lib1::Space.Globe _firstGlobe; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Lib2::Space.Globe _secondGlobe; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IntegrateGlobe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Lib1::Space.Globe globe</span></span></span><span class="hljs-function">)</span></span> =&gt; _firstGlobe = globe; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IntegrateGlobe</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Lib2::Space.Globe globe</span></span></span><span class="hljs-function">)</span></span> =&gt; _secondGlobe = globe; ... } }</code> </pre> <br><p>  Kode ini bahkan sudah berfungsi.  Dan itu bekerja dengan benar.  Tapi saya tetap ingin membuatnya sedikit lebih elegan.  Ini dapat dilakukan dengan cara yang sangat sederhana: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> Lib1; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-keyword"><span class="hljs-keyword">alias</span></span> Lib2; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceOne=Lib1::Space; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> SpaceTwo=Lib2::Space;</code> </pre> <br><p>  Sekarang Anda dapat menggunakan sintaks yang biasa dan jelas: </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> globe1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpaceOne.Globe() <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> globe2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SpaceTwo.Globe()</code> </pre> <br><h3 id="ispytaniya">  Tes </h3><br><p>  Mari kita uji burung hantu kita: </p><br><p><img src="https://habrastorage.org/webt/fo/zn/6p/fozn6pcfpbiagorzwxbz0ssruqi.png"></p><br><p>  Seperti yang Anda lihat, kode berfungsi dengan baik dan tanpa kesalahan.  Integrasi burung hantu dan bola telah berhasil diselesaikan! </p><br><p>  → Kode sampel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tersedia di GitHub</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id421851/">https://habr.com/ru/post/id421851/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id421839/index.html">Pemrograman Java Fungsional dengan Vavr</a></li>
<li><a href="../id421841/index.html">Robotaxi Waymo tidak cukup siap untuk mengakses jalan umum</a></li>
<li><a href="../id421845/index.html">Apa yang sebenarnya dilakukan analis data? Temuan dari 35 Wawancara</a></li>
<li><a href="../id421847/index.html">Lompat ke awan. Membangun solusi IoT anggaran di NodeMCU + Azure IoT Hub</a></li>
<li><a href="../id421849/index.html">Acara untuk SDM di bidang TI pada bulan September 2018: My Circle Digest</a></li>
<li><a href="../id421855/index.html">Proyektor rumah: “menurut versi” terbaik, fokus ultra-pendek, juara dalam kecerahan dan kecepatan</a></li>
<li><a href="../id421857/index.html">ToFoIn v 1. Reservasi gateway dan beralih di antara saluran eksternal di FreeBSD</a></li>
<li><a href="../id421859/index.html">Catatan dari penyedia IoT. Perangkat dan kalah menang</a></li>
<li><a href="../id421863/index.html">Cara baru untuk membuat nanotube: sekarang dalam warna</a></li>
<li><a href="../id421867/index.html">Cara membuat kode dapat dibaca</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>