<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üï∫ üë£ üë∞üèæ KDB + Datenbank: Von der Finanzierung zur Formel 1 üê¢ üëÇüèΩ ‚èØÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="KDB +, ein KX- Produkt, ist eine bekannte, extrem schnelle S√§ulendatenbank mit engen Kreisen, in der Zeitreihen und darauf basierende analytische Bere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>KDB + Datenbank: Von der Finanzierung zur Formel 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dbtc/blog/446412/">  KDB +, ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">KX-</a> Produkt, ist eine bekannte, extrem schnelle <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">S√§ulendatenbank mit</a> engen Kreisen, in der Zeitreihen und darauf basierende analytische Berechnungen gespeichert werden.  Anfangs war es in der Finanzbranche sehr beliebt (und erfreut sich gro√üer Beliebtheit) - es wird von allen Top-10-Investmentbanken und vielen bekannten Hedgefonds, B√∂rsen und anderen Organisationen verwendet.  Vor kurzem hat KX beschlossen, seinen Kundenstamm zu erweitern und jetzt L√∂sungen in anderen Bereichen anzubieten, in denen eine gro√üe Datenmenge nach Zeit oder auf andere Weise sortiert ist - Telekommunikation, Bioinformatik, Produktion usw.  Insbesondere wurden sie Partner des Aston Martin Red Bull Racing-Teams in der Formel 1, wo sie helfen, Daten von Autosensoren zu sammeln und zu verarbeiten und Tests in einem Windkanal zu analysieren.  In diesem Artikel m√∂chte ich Ihnen erkl√§ren, welche Funktionen von KDB + es √ºberproduktiv machen, warum Unternehmen bereit sind, viel Geld daf√ºr auszugeben, und schlie√ülich, warum dies nicht wirklich eine Datenbank ist. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/efa/f84/839/efaf84839e64d7c0026568d2b8019cd9.jpg"><br><a name="habracut"></a><br>  In diesem Artikel werde ich versuchen, allgemein zu erkl√§ren, was KDB + ist, welche Funktionen und Einschr√§nkungen es hat und welchen Nutzen es f√ºr Unternehmen hat, die gro√üe Datenmengen verarbeiten m√∂chten.  Ich werde nicht auf die Details der Implementierung von KDB + und die Details seiner Q-Programmiersprache eingehen. Beide Themen sind sehr umfangreich und verdienen separate Artikel.  Viele Informationen zu diesen Themen finden Sie unter code.kx.com, einschlie√ülich eines Buches √ºber Q - Q f√ºr Sterbliche (siehe Link unten). <br><br><h2>  Einige Begriffe </h2><br><ul><li> <b>In-Memory-Datenbank.</b>  Eine Datenbank, die Daten im RAM f√ºr einen schnelleren Zugriff speichert.  Die Vorteile einer solchen Datenbank sind verst√§ndlich, und die Nachteile sind die M√∂glichkeit eines Datenverlusts und die Notwendigkeit, viel Speicher auf dem Server zu haben. <br></li><li>  <b>Spaltendatenbank.</b>  Eine Datenbank, in der Daten in Serie gespeichert werden und nicht Datensatz f√ºr Datensatz.  Der Hauptvorteil einer solchen Datenbank besteht darin, dass Daten aus einer Spalte zusammen auf der Festplatte und im Speicher gespeichert werden, was den Zugriff auf sie erheblich beschleunigt.  Es ist nicht erforderlich, Spalten zu laden, die in der Anforderung nicht verwendet werden.  Der Hauptnachteil ist, dass es schwierig ist, Datens√§tze zu √§ndern und zu l√∂schen. <br></li><li>  <b>Zeitreihen.</b>  Daten mit einer Spalte wie Datum oder Uhrzeit.  In der Regel ist die zeitliche Reihenfolge f√ºr solche Daten wichtig, damit Sie leicht feststellen k√∂nnen, welcher Datensatz dem aktuellen vorausgeht oder folgt, oder Funktionen anwenden k√∂nnen, deren Ergebnis von der Reihenfolge der Datens√§tze abh√§ngt.  Klassische Datenbanken basieren auf einem v√∂llig anderen Prinzip - einer Reihe von Datens√§tzen als Satz, bei dem die Reihenfolge der Datens√§tze im Prinzip nicht definiert ist. <br></li><li>  <b>Vektor.</b>  In diesem Zusammenhang ist KDB + eine Liste von Elementen desselben Atomtyps, z. B. Zahlen.  Mit anderen Worten, ein Array von Elementen.  Arrays k√∂nnen im Gegensatz zu Listen kompakt gespeichert und mithilfe von Vektorprozessoranweisungen verarbeitet werden. <br></li></ul><br><h2>  Historischer Hintergrund </h2><br>  KX wurde 1993 von Arthur Whitney gegr√ºndet, der zuvor bei der Morgan Stanley Bank bei A +, dem Nachfolger von APL, einer sehr originellen und beliebten Sprache in der Finanzwelt, gearbeitet hatte.  Nat√ºrlich fuhr Arthur in KX im gleichen Sinne fort und schuf die vektorfunktionale Sprache K, die von den Ideen des radikalen Minimalismus geleitet wurde.  K-Programme sehen aus wie ein unordentlicher Satz von Satzzeichen und Sonderzeichen, die Bedeutung von Zeichen und Funktionen h√§ngt vom Kontext ab, und jede Operation hat viel mehr Bedeutung als in √ºblichen Programmiersprachen.  Aus diesem Grund nimmt das K-Programm ein Minimum an Speicherplatz ein - mehrere Zeilen k√∂nnen Textseiten einer ausf√ºhrlichen Sprache wie Java ersetzen - und ist eine hochkonzentrierte Implementierung des Algorithmus. <br><br>  Eine Funktion auf K, die den gr√∂√üten Teil des LL1-Parsergenerators gem√§√ü einer bestimmten Grammatik implementiert: <br><br><pre><code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> pp:{q:{(x;p3(),y)};r:$[<span class="hljs-number"><span class="hljs-number">-11</span></span>=@x;$x;<span class="hljs-number"><span class="hljs-number">11</span></span>=@x;q[`N;$*x];<span class="hljs-number"><span class="hljs-number">10</span></span>=abs@@x;q[`N;x]  <span class="hljs-number"><span class="hljs-number">2.</span></span>   ($)~*x;(`P;p3 x <span class="hljs-number"><span class="hljs-number">1</span></span>);(<span class="hljs-number"><span class="hljs-number">1</span></span>=<span class="hljs-meta"><span class="hljs-meta">#x)&amp;11=@*x;pp[{(1#x;$[2=#x;;,:]1_x)}@*x]  3.      (?)~*x;(`Q;pp[x 1]);(*)~*x;(`M;pp[x 1]);(+)~*x;(`MP;pp[x 1]);(!)~*x;(`Y;p3 x 1)  4.      (2=#x)&amp;(@x 1)in 100 101 107 7 -7h;($[(@x 1)in 100 101 107h;`Ff;`Fi];p3 x 1;pp[*x])  5.      (|)~*x;`S,(pp'1_x);2=#x;`C,{@[@[x;-1+#x;{x,")"}];0;"(",]}({$[".sC"~4#x;6_-2_x;x]}'pp'x);'`pp];  6.   $[@r;r;($[1&lt;#r;".s.";""],$*r),$[1&lt;#r;"[",(";"/:1_r),"]";""]]}</span></span></code> </pre> <br>  Arthur verk√∂rperte diese Philosophie der extremen Effizienz auch mit einem Minimum an K√∂rperbewegungen in KDB +, die 2003 erschien (ich denke, es ist jetzt klar, woher der Buchstabe K vom Namen stammt), und es gibt nichts weiter als einen Interpreten der vierten Version der Sprache K. Eine f√ºr das Auge des Benutzers angenehmere Version wird zu K hinzugef√ºgt K unter dem Namen Q. Q bietet au√üerdem Unterst√ºtzung f√ºr einen bestimmten SQL-Dialekt - QSQL - und im Interpreter Unterst√ºtzung f√ºr Tabellen als Systemdatentyp, Tools f√ºr die Arbeit mit Tabellen im Speicher und auf der Festplatte usw. <br><br>  Aus Sicht des Benutzers ist KDB + daher nur ein Q-Interpreter mit Unterst√ºtzung f√ºr Tabellen und SQL-√§hnliche Ausdr√ºcke im LINQ-Stil aus C #.  Dies ist der wichtigste Unterschied zwischen KDB + und anderen Datenbanken und der Hauptwettbewerbsvorteil, der h√§ufig √ºbersehen wird.  Dies ist keine Datenbank + eine deaktivierte Hilfssprache, sondern eine vollwertige, leistungsstarke Programmiersprache + integrierte Unterst√ºtzung f√ºr Datenbankfunktionen.  Dieser Unterschied wird eine entscheidende Rolle bei der Auflistung aller Vorteile von KDB + spielen.  Zum Beispiel ... <br><br><h2>  Gr√∂√üe </h2><br>  Nach modernen Ma√üst√§ben ist KDB + nur eine mikroskopische Gr√∂√üe.  Dies ist buchst√§blich eine ausf√ºhrbare Datei, die kleiner als ein Megabyte ist, und eine kleine Textdatei mit einigen Systemfunktionen.  Eigentlich - weniger als ein Megabyte und f√ºr dieses Programm zahlen Unternehmen Zehntausende von Dollar pro Jahr f√ºr einen Prozessor auf dem Server. <br><br><ul><li>  Mit dieser Gr√∂√üe f√ºhlt sich KDB + auf jeder Hardware gro√üartig an - vom Pi-Mikrocomputer bis zu Servern mit Terabyte Speicher.  Dies hat keinerlei Auswirkungen auf die Funktionalit√§t. Dar√ºber hinaus wird Q sofort gestartet, sodass es auch als Skriptsprache verwendet werden kann. <br></li><li>  Bei dieser Gr√∂√üe befindet sich der Q-Interpreter vollst√§ndig im Prozessor-Cache, was die Ausf√ºhrung von Programmen beschleunigt. <br></li><li>  Bei dieser Gr√∂√üe der ausf√ºhrbaren Datei nimmt der Q-Prozess vernachl√§ssigbaren Speicherplatz ein, Sie k√∂nnen sie in Hunderten ausf√ºhren.  Gleichzeitig kann Q bei Bedarf mit zehn oder Hunderten von Gigabyte Speicher in einem Prozess arbeiten. <br></li></ul><br><h2>  Vielseitigkeit </h2><br>  Q ist perfekt f√ºr eine Vielzahl von Aufgaben.  Der Q-Prozess kann als historische Datenbank dienen und einen schnellen Zugriff auf Terabyte an Informationen erm√∂glichen.  Zum Beispiel haben wir Dutzende historischer Datenbanken, von denen einige an einem unkomprimierten Datentag mehr als 100 Gigabyte ben√∂tigen.  Mit angemessenen Einschr√§nkungen wird die Datenbankabfrage jedoch in zehn bis hundert Millisekunden ausgef√ºhrt.  Im Allgemeinen haben wir ein universelles Zeitlimit f√ºr Benutzeranfragen - 30 Sekunden - und es funktioniert sehr selten. <br><br>  Mit der gleichen Leichtigkeit kann Q eine In-Memory-Datenbank sein.  Das Hinzuf√ºgen neuer Daten zu Tabellen im Speicher ist so schnell, dass Benutzerabfragen ein begrenzender Faktor sind.  Die Daten in den Tabellen werden in Spalten gespeichert. Dies bedeutet, dass bei jeder Operation in der Spalte der Prozessor-Cache mit voller Kapazit√§t verwendet wird.  Dar√ºber hinaus versuchte KX, alle grundlegenden Operationen wie die Arithmetik durch Vektorprozessoranweisungen zu implementieren, um deren Geschwindigkeit zu maximieren.  Q kann Aufgaben ausf√ºhren, die f√ºr Datenbanken nicht charakteristisch sind - beispielsweise Streaming-Daten verarbeiten und in "Echtzeit" (mit einer Verz√∂gerung von mehreren zehn Millisekunden bis zu mehreren Sekunden, abh√§ngig von der Aufgabe) verschiedene Aggregatfunktionen f√ºr Finanzinstrumente f√ºr verschiedene Zeitintervalle berechnen oder ein Modell f√ºr die Auswirkungen von Perfect erstellen Transaktionen auf den Markt und f√ºhren die Profilerstellung fast unmittelbar nach ihrer Fertigstellung durch.  Bei solchen Problemen ist die Hauptzeitverz√∂gerung meistens nicht Q, sondern die Notwendigkeit, Daten aus verschiedenen Quellen zu synchronisieren.  Eine hohe Geschwindigkeit wird erreicht, weil sich die Daten und Funktionen, die sie verarbeiten, im selben Prozess befinden und die Verarbeitung auf die Ausf√ºhrung mehrerer QSQL-Ausdr√ºcke und Verkn√ºpfungen reduziert wird, die nicht interpretiert, sondern im Bin√§rcode ausgef√ºhrt werden. <br><br>  Schlie√ülich k√∂nnen alle Serviceprozesse auch in Q geschrieben werden.  Beispielsweise Gateway-Prozesse, die Benutzeranforderungen automatisch an die erforderlichen Datenbanken und Server verteilen.  Der Programmierer hat die v√∂llige Freiheit, jeden Algorithmus zum Ausgleichen, Priorisieren, Fehlertoleranz, Zugriffsrecht, Kontingent und allgemein nach Herzenslust zu implementieren.  Das Hauptproblem hierbei ist, dass Sie dies alles selbst implementieren m√ºssen. <br><br>  Als Beispiel werde ich auflisten, welche Arten von Prozessen wir haben.  Alle von ihnen werden aktiv genutzt und arbeiten zusammen, indem sie Dutzende verschiedener Datenbanken kombinieren, Daten aus vielen Quellen verarbeiten und Hunderte von Benutzern und Anwendungen bedienen. <br><br><ul><li>  <b>Konnektoren (Feedhandler) zu Datenquellen.</b>  Diese Prozesse verwenden normalerweise externe Bibliotheken, die in Q geladen werden. Die C-Schnittstelle in Q ist √§u√üerst einfach und erm√∂glicht das einfache Erstellen von Proxy-Funktionen f√ºr jede C / C ++ - Bibliothek.  Q ist schnell genug, um beispielsweise den Fluss von FIX-Nachrichten von allen europ√§ischen B√∂rsen gleichzeitig zu verarbeiten. <br></li><li>  <b>Tickerplant-H√§ndler,</b> die als Zwischenverbindung zwischen Steckverbindern und Verbrauchern dienen.  Gleichzeitig schreiben sie eingehende Daten in ein spezielles Bin√§rprotokoll und bieten den Verbrauchern Widerstand gegen Verbindungsverlust oder Neustart. <br></li><li>  <b>In-Memory-Datenbank (rdb).</b>  Diese Datenbanken bieten den schnellsten Zugriff auf frische Rohdaten und speichern diese im Speicher.  In der Regel sammeln sie tags√ºber Daten in Tabellen und setzen sie nachts auf Null. <br></li><li>  <b>Persist-Datenbank (pdb).</b>  Diese Datenbanken bieten heute Datenspeicherung in der historischen Datenbank.  Im Gegensatz zu rdb speichern sie in der Regel keine Daten im Speicher, sondern verwenden einen speziellen Cache auf der Festplatte f√ºr einen Tag und kopieren die Daten um Mitternacht in die historische Datenbank. <br></li><li>  <b>Historische Grundlagen (hdb).</b>  Diese Datenbanken bieten Zugriff auf Daten f√ºr fr√ºhere Tage, Monate und Jahre.  Ihre Gr√∂√üe (in Tagen) ist nur durch die Gr√∂√üe der Festplatten begrenzt.  Daten k√∂nnen sich √ºberall befinden, insbesondere auf verschiedenen Festplatten, um einen schnelleren Zugriff zu erm√∂glichen.  Es ist m√∂glich, Daten mit mehreren Algorithmen zu komprimieren.  Die Datenbankstruktur ist gut dokumentiert und einfach. Die Daten werden pro Einheit in normalen Dateien gespeichert, damit sie auch unter Verwendung des Betriebssystems verarbeitet werden k√∂nnen. <br></li><li>  <b>Datenbanken mit aggregierten Informationen.</b>  Verschiedene Aggregationen werden gespeichert, normalerweise mit, gruppiert nach Instrumentenname und Zeitintervall.  In-Memory-Datenbanken aktualisieren ihren Status mit jeder eingehenden Nachricht, und historische Datenbanken speichern vorberechnete Daten, um den Zugriff auf historische Daten zu beschleunigen. <br></li><li>  Schlie√ülich <b>verarbeitet Gateway Prozesse,</b> die Anwendungen und Benutzer bedienen.  Mit Q k√∂nnen Sie die vollst√§ndig asynchrone Verarbeitung eingehender Nachrichten implementieren, diese auf Datenbanken verteilen, Zugriffsrechte √ºberpr√ºfen usw.  Ich stelle fest, dass Nachrichten nicht auf SQL-Anweisungen beschr√§nkt sind und meistens keine SQL-Anweisungen sind, wie dies in anderen Datenbanken der Fall ist.  In den meisten F√§llen ist der SQL-Ausdruck in einer speziellen Funktion verborgen und basiert auf den vom Benutzer angeforderten Parametern. Die Zeit wird konvertiert, gefiltert, die Daten werden normalisiert (z. B. wird der Aktienkurs ausgeglichen, wenn Dividenden gezahlt wurden) usw. <br></li></ul><br>  Typische Architektur f√ºr einen Datentyp: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99a/13e/5e9/99a13e5e9813f09a2d40b676669c052a.png"><br><br><h2>  Geschwindigkeit </h2><br>  Obwohl Q eine interpretierte Sprache ist, ist es gleichzeitig eine Vektorsprache.  Dies bedeutet, dass viele integrierte Funktionen, insbesondere die Arithmetik, Argumente jeglicher Form akzeptieren - Zahlen, Vektoren, Matrizen, Listen, und vom Programmierer wird erwartet, dass er das Programm als Operationen auf Arrays implementiert.  Wenn Sie in einer solchen Sprache zwei Vektoren in einer Million Elementen hinzuf√ºgen, spielt es keine Rolle mehr, dass die Sprache interpretiert wird. Die Addition wird durch eine superoptimierte Bin√§rfunktion ausgef√ºhrt.  Da der L√∂wenanteil der Zeit in Q-Programmen f√ºr Operationen mit Tabellen unter Verwendung dieser grundlegenden vektorisierten Funktionen aufgewendet wird, haben wir eine sehr anst√§ndige Ausgabegeschwindigkeit, die es uns erm√∂glicht, eine gro√üe Datenmenge selbst in einem Prozess zu verarbeiten.  Dies √§hnelt den Mathematikbibliotheken in Python - obwohl Python selbst eine sehr langsame Sprache ist, verf√ºgt es √ºber viele gro√üartige Numpy-Bibliotheken, mit denen Sie numerische Daten mit der Geschwindigkeit einer kompilierten Sprache verarbeiten k√∂nnen (Numpy ist √ºbrigens ideologisch nahe an Q). <br><br>  Dar√ºber hinaus ging KX sehr sorgf√§ltig mit der Gestaltung von Tischen um und optimierte die Arbeit mit ihnen.  Erstens werden verschiedene Arten von Indizes unterst√ºtzt, die von integrierten Funktionen unterst√ºtzt werden und nicht nur auf Tabellenspalten, sondern auch auf beliebige Vektoren angewendet werden k√∂nnen - Gruppierung, Sortierung, Eindeutigkeitsattribut und spezielle Gruppierung f√ºr historische Datenbanken.  Der Index wird elementar √ºberlagert und beim Hinzuf√ºgen von Elementen zur Spalte / zum Vektor automatisch angepasst.  Indizes k√∂nnen Tabellenspalten sowohl im Speicher als auch auf der Festplatte gleicherma√üen gut √ºberlappen.  Bei der Ausf√ºhrung einer QSQL-Abfrage werden Indizes nach M√∂glichkeit automatisch verwendet.  Zweitens erfolgt die Arbeit mit historischen Daten √ºber den OS-Dateizuordnungsmechanismus (Speicherzuordnung).  Gro√üe Tabellen werden nie in den Speicher geladen, stattdessen werden die erforderlichen Spalten direkt dem Speicher zugeordnet und nur der Teil davon wird tats√§chlich geladen (Indizes helfen auch hier), der ben√∂tigt wird.  F√ºr den Programmierer gibt es keinen Unterschied, ob sich die Daten im Speicher befinden oder nicht. Der Mechanismus f√ºr die Arbeit mit mmap ist vollst√§ndig im Darm von Q verborgen. <br><br>  KDB + ist keine relationale Datenbank. Tabellen k√∂nnen beliebige Daten enthalten, w√§hrend sich die Reihenfolge der Zeilen in der Tabelle beim Hinzuf√ºgen neuer Elemente nicht √§ndert und beim Schreiben von Abfragen verwendet werden kann und sollte.  Diese Funktion wird dringend f√ºr die Arbeit mit Zeitreihen (Daten aus Austausch, Telemetrie, Ereignisprotokollen) ben√∂tigt. Wenn die Daten nach Zeit sortiert sind, muss der Benutzer keine SQL-Tricks verwenden, um die erste oder letzte Zeile oder N Zeilen in der Tabelle zu finden , bestimmen Sie, welche Linie der N-ten Linie folgt usw.  Das Verkn√ºpfen von Tabellen wird noch einfacher, da beispielsweise f√ºr 16.000 Transaktionen VOD.L (Vodafone) das letzte Anf√ºhrungszeichen in einer Tabelle mit 500 Millionen Elementen etwa eine Sekunde auf der Festplatte und ein Dutzend Millisekunden im Speicher ben√∂tigt. <br><br>  Ein Beispiel f√ºr eine Zeitverkn√ºpfung ist, dass die Anf√ºhrungszeichen-Tabelle dem Speicher zugeordnet ist, sodass VOD.L nicht angegeben werden muss, wobei der Index f√ºr die sym-Spalte implizit verwendet wird und die Daten nach Zeit sortiert sind.  Fast alle Verkn√ºpfungen in Q sind normale Funktionen, die nicht Teil der select-Anweisung sind: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> aj[`sym`time;<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> trade <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> date=<span class="hljs-number"><span class="hljs-number">2019.03</span></span><span class="hljs-number"><span class="hljs-number">.26</span></span>, sym=`VOD.L;<span class="hljs-keyword"><span class="hljs-keyword">select</span></span> <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> quote <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> date=<span class="hljs-number"><span class="hljs-number">2019.03</span></span><span class="hljs-number"><span class="hljs-number">.26</span></span>]</code> </pre><br>  Schlie√ülich ist anzumerken, dass die Ingenieure bei KX, beginnend mit Arthur Whitney selbst, wirklich von Effizienz besessen sind und alle Anstrengungen unternehmen, um die Standard-Q-Funktionen optimal zu nutzen und die g√§ngigsten Verwendungsmuster zu optimieren. <br><br><h2>  Zusammenfassung </h2><br>  KDB + ist vor allem aufgrund seiner au√üergew√∂hnlichen Vielseitigkeit bei Unternehmen beliebt. Es dient sowohl als In-Memory-Basis als auch als Basis f√ºr die Speicherung von Terabyte historischer Daten und als Plattform f√ºr die Datenanalyse.  Aufgrund der Tatsache, dass die Datenverarbeitung direkt in der Datenbank erfolgt, werden eine hohe Betriebsgeschwindigkeit und Ressourceneinsparungen erzielt.  Eine vollwertige Programmiersprache, die in die Datenbankfunktionen integriert ist, erm√∂glicht es Ihnen, den gesamten Stapel der erforderlichen Prozesse auf derselben Plattform zu implementieren - vom Empfang von Daten bis zur Verarbeitung von Benutzeranforderungen. <br><br><h2>  Zus√§tzliche Informationen </h2><br><h3>  Nachteile </h3><br>  Ein wesentlicher Nachteil von KDB + / Q ist die hohe Eintrittsschwelle.  Die Sprache hat eine seltsame Syntax, einige Funktionen sind stark √ºberladen (Wert hat beispielsweise etwa 11 Anwendungsf√§lle).  Vor allem erfordert es einen radikal anderen Ansatz beim Schreiben von Programmen.  In einer Vektorsprache m√ºssen Sie st√§ndig an Array-Transformationen denken, alle Zyklen durch verschiedene Optionen der Map / Reduce-Funktionen (in Q Adverbien genannt) implementieren und niemals versuchen, Geld zu sparen, indem Sie Vektoroperationen durch atomare ersetzen.  Um beispielsweise den Index des n-ten Auftretens eines Elements in einem Array zu ermitteln, schreiben Sie: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">where</span></span> element=vector)[N]</code> </pre><br>  obwohl dies nach C / Java-Standards furchtbar ineffizient aussieht (= erstellt einen Booleschen Vektor, in dem die Indizes der wahren Elemente darin zur√ºckgegeben werden).  Ein solcher Datensatz macht die Bedeutung des Ausdrucks jedoch verst√§ndlicher und Sie verwenden schnelle Vektoroperationen anstelle langsamer atomarer.  Der konzeptionelle Unterschied zwischen der Vektorsprache und dem Rest ist vergleichbar mit dem Unterschied zwischen den imperativen und funktionalen Programmierans√§tzen, und Sie m√ºssen darauf vorbereitet sein. <br><br>  Einige Benutzer sind auch mit QSQL unzufrieden.  Tatsache ist, dass es nur wie echtes SQL aussieht.  Tats√§chlich ist es nur ein Interpreter von SQL-√§hnlichen Ausdr√ºcken, der die Abfrageoptimierung nicht unterst√ºtzt.  Der Benutzer selbst muss die optimalen Abfragen und auf Q schreiben, f√ºr die viele nicht bereit sind.  Auf der anderen Seite k√∂nnen Sie nat√ºrlich immer selbst Ihre optimale Abfrage schreiben und sich nicht auf einen Black-Box-Optimierer verlassen. <br><br>  Au√üerdem ist ein Buch √ºber Q - Q f√ºr Sterbliche kostenlos auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der Website des Unternehmens verf√ºgbar</a> , und es gibt auch viele andere n√ºtzliche Materialien. <br><br>  Ein weiteres gro√ües Minus sind die Lizenzkosten.  Dies sind Zehntausende von Dollar pro Jahr f√ºr eine CPU.  Nur gro√üe Unternehmen k√∂nnen sich solche Ausgaben leisten.  Vor kurzem hat KX die Lizenzierungsrichtlinien flexibler gestaltet und bietet die M√∂glichkeit, nur f√ºr die Nutzungsdauer zu bezahlen oder KDB + in den Clouds von Google und Amazon zu mieten.  KX bietet auch an, eine <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">kostenlose Version f√ºr nichtkommerzielle Zwecke</a> herunterzuladen (32-Bit-Version oder 64-Bit auf Anfrage). <br><br><h3>  Wettbewerber </h3><br>  Es gibt einige spezialisierte Datenbanken, die auf √§hnlichen Prinzipien basieren - s√§ulenf√∂rmige In-Memory-Datenbanken, die sich auf sehr gro√üe Datenmengen konzentrieren.  Das Problem ist, dass dies spezialisierte Datenbanken sind.  Ein Paradebeispiel ist Clickhouse.  Diese Datenbank √§hnelt dem KDB + -Prinzip zum Speichern von Daten auf der Festplatte und zum Erstellen des Index. Sie f√ºhrt einige Abfragen schneller als KDB + aus, wenn auch nicht wesentlich.  Aber auch wenn die Clickhouse-Datenbank spezialisierter ist als KDB + - Webanalyse im Vergleich zu beliebigen Zeitreihen (dieser Unterschied ist sehr wichtig - zum Beispiel gibt es in Clickhouse keine M√∂glichkeit, die Datensatzreihenfolge zu verwenden).  Vor allem aber verf√ºgt Clickhouse nicht √ºber die Universalit√§t von KDB +, einer Sprache, mit der Daten direkt in der Datenbank verarbeitet werden k√∂nnen, anstatt sie zuvor in eine separate Anwendung zu laden, beliebige SQL-Ausdr√ºcke zu erstellen, beliebige Funktionen in einer Abfrage anzuwenden und Prozesse zu erstellen, die nicht mit der Ausf√ºhrung historischer Datenbankfunktionen zusammenh√§ngen .  Daher ist es schwierig, KDB + mit anderen Datenbanken zu vergleichen. Sie sind m√∂glicherweise in separaten Anwendungsf√§llen besser oder einfach besser, wenn wir √ºber die Aufgaben klassischer Datenbanken sprechen, aber ich kenne kein anderes ebenso effektives und universelles Tool f√ºr die Verarbeitung tempor√§rer Daten. <br><br><h3>  Python-Integration </h3><br>  Um KDB + f√ºr Neulinge zu vereinfachen, hat KX Bibliotheken f√ºr die enge Integration mit Python in einem einzigen Prozess erstellt.  Sie k√∂nnen entweder eine beliebige Python-Funktion von Q aus aufrufen oder umgekehrt - Sie k√∂nnen eine beliebige Q-Funktion von Python aus aufrufen (insbesondere QSQL-Ausdr√ºcke).  Bibliotheken konvertieren bei Bedarf (aus Gr√ºnden der Effizienz nicht immer) Daten aus dem Format einer Sprache in das Format einer anderen.  Infolgedessen leben Q und Python in einer so engen Symbiose, dass die Grenzen zwischen ihnen aufgehoben werden.  Dadurch hat ein Programmierer einerseits vollen Zugriff auf zahlreiche n√ºtzliche Python-Bibliotheken, andererseits erh√§lt er eine schnelle Basis f√ºr die Arbeit mit in Python integrierten Big Data, was besonders f√ºr diejenigen n√ºtzlich ist, die am maschinellen Lernen oder Modellieren beteiligt sind. <br><br>  Arbeiten mit Q in Python: <br><br><pre> <code class="cs hljs"><span class="hljs-number"><span class="hljs-number">1.</span></span> &gt;&gt;&gt; q() <span class="hljs-number"><span class="hljs-number">2.</span></span>q)trade:([]date:();sym:();qty:()) <span class="hljs-number"><span class="hljs-number">3.</span></span> q)\ <span class="hljs-number"><span class="hljs-number">4.</span></span> &gt;&gt;&gt; q.insert(<span class="hljs-string"><span class="hljs-string">'trade'</span></span>, (date(<span class="hljs-number"><span class="hljs-number">2006</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-number"><span class="hljs-number">200</span></span>)) <span class="hljs-number"><span class="hljs-number">5.</span></span> k(<span class="hljs-string"><span class="hljs-string">',0'</span></span>) <span class="hljs-number"><span class="hljs-number">6.</span></span> &gt;&gt;&gt; q.insert(<span class="hljs-string"><span class="hljs-string">'trade'</span></span>, (date(<span class="hljs-number"><span class="hljs-number">2006</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>), <span class="hljs-string"><span class="hljs-string">'MSFT'</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>)) <span class="hljs-number"><span class="hljs-number">7.</span></span> k(<span class="hljs-string"><span class="hljs-string">',1'</span></span>)</code> </pre><br><h3>  Referenzen </h3><br>  Unternehmenswebsite - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://kx.com/</a> <br>  Website f√ºr Entwickler - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://code.kx.com/v2/</a> <br>  Q F√ºr Sterbliche Buch (in Englisch) - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://code.kx.com/q4m3/</a> <br>  Artikel zum Thema KDB + / Q-Anwendungen von kx-Mitarbeitern - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://code.kx.com/v2/wp/</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de446412/">https://habr.com/ru/post/de446412/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de446396/index.html">GPS-Wochenz√§hler zur√ºckgesetzt</a></li>
<li><a href="../de446400/index.html">Dmitry Dumik, Chatfuel: √úber Y Combinator, Technologie-Unternehmertum, Verhaltens√§nderung und Bewusstsein</a></li>
<li><a href="../de446402/index.html">Mehrsprachige Apps in Angular</a></li>
<li><a href="../de446404/index.html">Moderne Alternativen zu PGP</a></li>
<li><a href="../de446408/index.html">Universal DRO basierend auf Arduino Nano - shDRO</a></li>
<li><a href="../de446414/index.html">Eine gute Sache hei√üt nicht Rost</a></li>
<li><a href="../de446418/index.html">Cloudflare f√ºhrte einen eigenen VPN-Dienst ein, der auf der Anwendung 1.1.1.1 f√ºr mobile Ger√§te basiert</a></li>
<li><a href="../de446422/index.html">QuietOn - Kopfh√∂rer, die t√∂ten ...</a></li>
<li><a href="../de446424/index.html">Geschichte eines Berichts</a></li>
<li><a href="../de446428/index.html">Wie HR's Bumblebee Plant gebaut wurde</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>