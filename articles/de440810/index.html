<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🙆🏽 😓 🧡 Talos - "Eine moderne Linux-Distribution für Kubernetes" eingeführt 👩🏼‍🏫 🦁 👨‍🚀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Neulich präsentierte der amerikanische Ingenieur Andrew Rynhard ein interessantes Projekt: eine kompakte Linux-Distribution, die speziell für die Ausf...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Talos - "Eine moderne Linux-Distribution für Kubernetes" eingeführt</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/flant/blog/440810/"><img src="https://habrastorage.org/webt/t-/z1/j4/t-z1j4yey3nifrww_gvguiuw1kk.png"><br><br>  Neulich <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">präsentierte der</a> amerikanische Ingenieur Andrew Rynhard <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein</a> interessantes Projekt: eine kompakte Linux-Distribution, die speziell für die Ausführung von Kubernetes-Clustern entwickelt wurde.  Es erhielt den Namen aus der antiken griechischen Mythologie - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Talos</a> . <a name="habracut"></a><br><br>  Das Projekt schien von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Kelsey Hightowers Tweet</a> aus dem Jahr 2015 inspiriert zu sein, in dem er sagte, wir müssten nur auf das Erscheinen des bedingten KubeOS warten (danach wird das Leben in bewölkten Umgebungen endlich wunderbar sein): <br><br><img src="https://habrastorage.org/webt/ct/ve/hu/ctvehuwa-3w4mimsjrdkig-ick4.png"><br><br>  <i>Übrigens, mit dem Aufkommen von Talos wurde diese Geschichte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">fortgesetzt</a> : Jemand antwortete auf einen historischen Tweet, dass ein solches System bereits aufgetaucht sei, und der Autor von Talos sagte, dass er sich freuen würde, wenn Kelsey sich das Projekt ansehen würde.</i>  <i>Die Reaktion des letzteren wurde jedoch (noch) nicht verfolgt.</i> <br><br>  Anscheinend entwickelte eine Person Talos <i>(der sich als Teil eines ganzen Unternehmens darstellt - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Autonomy</a> )</i> - es dauerte mehr als ein Jahr.  Und jetzt, wenn der Status der Mindestverfügbarkeit erreicht ist, erwartet der Autor, dass andere Vertreter der Kubernetes / Cloud-Community hinzukommen werden.  Was ist das Wesentliche des Projekts? <br><br><h2>  Prinzipien und Merkmale von Talos </h2><br>  Talos ist eine moderne Linux-Distribution, die speziell (und exklusiv!) Für Kubernetes entwickelt wurde.  Um das Ziel bei der Umsetzung zu erreichen, halten Sie sich an folgende Ansätze: <br><br><h3>  Minimalismus </h3><br>  Der allgegenwärtige Minimalismus ist einer der Eckpfeiler der Talos-Architektur.  Eines der eindrucksvollen Beispiele ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">der verwendete Initialisierungsdienst</a> , der (im Gegensatz zu modernen Trends in diesem Bereich) der UNIX-Philosophie folgt, dass „jedes Programm eine Sache tut, aber gut“: <br><br><blockquote>  Wir wollten init auf eine einzige Aufgabe konzentrieren - Kubernetes starten.  Es gibt einfach keine Mechanismen für andere Aktionen. </blockquote><br>  Die Entwickler gingen noch weiter und beraubten ihr Betriebssystem des Benutzerzugriffs auf den Host, der den Systemadministratoren vertraut ist: <b>Talos verfügt weder über Befehlsshells noch über einen SSH-Daemon oder sogar über die Möglichkeit, eigene Prozesse</b> auf dem Host <b>zu starten</b> .  Und wirklich: Warum das alles, wenn Sie Kubernetes und mehr ausführen müssen?  Fast alle Prozesse in Talos laufen in Containern ab. <br><br>  Da die Welt jedoch nicht so perfekt ist (damit das Betriebssystem "von selbst" vollständig funktioniert), gibt es immer noch Tools zum Bedienen des Betriebssystems: <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">osd-</a> Daemon, implementiert nach dem Prinzip, die minimal erforderlichen Berechtigungen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">bereitzustellen</a> (Prinzip der geringsten Berechtigungen) und eine API (basierend auf gRPC) zum Verwalten von Knoten anzubieten; </li><li>  Mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem</a> Dienstprogramm <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">osctl</a> CLI können Sie mit dem osd-Dienst kommunizieren, der auf jedem Knoten ausgeführt wird. </li></ul><br>  Daher wurde eine Reihe grundlegender Betriebsfunktionen implementiert: Neustarten von Diensten und Clusterknoten, Empfangen von Kernelprotokollen (dmesg) und von Containern, Einfügen von Daten in Knotenkonfigurationsdateien usw. <br><br>  Alle diese Komponenten (init, osd, osctl ...) sowie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">einige andere</a> im Distributionskit <b>sind in Go geschrieben</b> .  Der gesamte Quellcode wird übrigens unter den Bedingungen der Open Source-Lizenz Mozilla Public License 2.0 verteilt. <br><br><h3>  Sicherheit </h3><br>  Der oben beschriebene minimalistische Ansatz (alles, was <b>nur</b> zum Ausführen von Kubernetes erforderlich ist) + das Prinzip, nur minimale Berechtigungen selbst zu erteilen, reduzieren die potenzielle Angriffsfläche.  Auch in Talos: <br><br><ul><li>  Der enthaltene Kernel wird gemäß den Empfehlungen des Kernel Self Protection Project ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">KSSP</a> ) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">konfiguriert</a> , das sich auf die Fähigkeit des Kernels konzentriert, unabhängig vor potenziellen Fehlern und Schwachstellen zu schützen (anstatt Userspace-Dienstprogramme für dieselben Zwecke zu verwenden). </li><li>  Das Root-Dateisystem ist schreibgeschützt gemountet, was - zusammen mit dem Fehlen von Shells / SSH - das System unveränderlich macht. </li><li>  verwendet bidirektionales TLS (mTLS) zur Interaktion mit der API; </li><li>  Die Einstellungen und Konfigurationen von Kubernetes werden gemäß den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CIS-Richtlinien</a> (Center for Internet Security) angewendet. </li></ul><br>  Ein zusätzlicher Vorteil, der sich aus dem Minimalismus und der Konzentration auf Unveränderlichkeit ergibt, ist die <b>Vorhersagbarkeit des</b> Verhaltens <b>des</b> Systems (da die Anzahl der Faktoren, die die Umwelt beeinflussen, abnimmt). <br><br><h3>  Relevanz </h3><br>  Die Autoren versprechen, Talos auf die vorletzte Upstream-Version von Kubernetes (K8s 1.13.3 wird derzeit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">unterstützt</a> ) und die neueste verfügbare LTS Linux-Kernel-Version (jetzt unter Verwendung von 4.19.10) zu stützen. <br><br><h3>  Systemkomponenten </h3><br>  Die Hauptkomponenten der Distribution (zusätzlich zu den Kernel- und "proprietären" Dienstprogrammen) sind: <br><br><ul><li>  musl-libc - als Standard-C-Bibliothek; </li><li>  Golang - für <code>init</code> und seine anderen Werkzeuge; </li><li>  gRPC - für die API; </li><li>  enthaltend - um Systemdienste in Containern zu starten (wird mit dem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CRI-</a> Plugin für Kubernetes verwendet); </li><li>  kubeadm - zum Bereitstellen von Clustern. </li></ul><br><h2>  Arbeite mit Talos </h2><br>  Talos-Bereitstellungsbeispiele für AWS-, KVM- und Xen-Bereitstellungen finden Sie in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Projektdokumentation</a> .  Um schnell zu veranschaulichen, wie dies aussieht, finden Sie hier den Installationsalgorithmus für virtuelle Linux KVM-Maschinen: <br><br>  1. Installieren des Masterknotens auf dem Host: <br><br><pre> <code class="bash hljs">docker run --rm --privileged --volume /dev:/dev \ autonomy/talos:latest image -b /dev/sdb -f -p bare-metal \ -u http://<span class="hljs-variable"><span class="hljs-variable">${IP}</span></span>:8080/master.yaml</code> </pre> <br>  2. Erstellen einer VM: <br><br><pre> <code class="bash hljs">virt-install -n master --description <span class="hljs-string"><span class="hljs-string">"Kubernetes master node."</span></span> \ --os-type=Linux --os-variant=generic --virt-type=kvm --cpu=host \ --vcpus=2 --ram=4096 --disk path=/dev/sdb \ --network bridge=br0,model=e1000,mac=52:54:00:A8:4C:E1 \ --graphics none --boot hd --rng /dev/random</code> </pre> <br>  3. Ähnliche Aktionen zum Erstellen eines Arbeitsknotens: <br><br><pre> <code class="bash hljs">docker run --rm --privileged --volume /dev:/dev \ autonomy/talos:latest image -b /dev/sdc -f -p bare-metal \ -u http://<span class="hljs-variable"><span class="hljs-variable">${IP}</span></span>:8080/worker.yaml virt-install -n master --description <span class="hljs-string"><span class="hljs-string">"Kubernetes worker node."</span></span> \ --os-type=Linux --os-variant=generic --virt-type=kvm --cpu=host \ --vcpus=2 --ram=4096 --disk path=/dev/sdc \ --network bridge=br0,model=e1000,mac=52:54:00:B9:5D:F2 \ --graphics none --boot hd --rng /dev/random</code> </pre> <br>  Das Konfigurieren der Interaktion zwischen osd und osctl besteht im Wesentlichen darin, Schlüssel für ihre Authentifizierung zu generieren (bereits erwähnte mTLS) und wird <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> beschrieben. <br><br>  Weitere Arbeit mit ihnen <code>osctl reboot</code> auf Befehle wie <code>osctl reboot</code> , <code>osctl stats</code> und <code>osctl logs</code> .  Demonstration der Ausgabe von Containern im <code>k8s.io</code> Namespace: <br><br><pre> <code class="bash hljs">$ osctl ps -k NAMESPACE ID IMAGE PID STATUS k8s.io 0ca1… sha256:da86… 2341 RUNNING k8s.io 356f… sha256:da86… 2342 RUNNING … k8s.io e42e… sha256:4ff8… 2508 RUNNING k8s.io kubelet k8s.gcr.io/… 2068 RUNNING</code> </pre> <br>  Der Prozess zum Konfigurieren eines Kubernetes-Clusters mit Talos ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> (Mater-Knoten) und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> (Worker) verfügbar. <br><br><h2>  Status und Perspektiven </h2><br>  Das Projekt befindet sich in der Alpha-Version (die neueste Version ist <a href="">v0.1.0-alpha.18</a> ) und in dieser Phase sieht es natürlich eher nach einem interessanten Experiment aus als nach etwas, das der Produktion wirklich nahe kommt. <br><br>  Der Anstieg des Interesses an Talos nach seiner kürzlichen Ankündigung (bereits über 600 Sterne auf GitHub) und der Ruf des einzigen Autors nach gemeinsamer Kreativität können jedoch als hervorragender Anreiz für seine Entwicklung dienen. <br><br><img src="https://habrastorage.org/webt/gw/tz/l2/gwtzl2ri3yoyt-1rculmaeloxxe.png"><br>  <i>Talos Projektaktivität in den letzten Tagen</i> <br><br>  Zumindest enthält die Distribution die für die Welt relevanten Cloud-nativen Ideen, deren Qualitätsimplementierung eine Frage der Zeit ist. <br><br><h2>  PS </h2><br>  Lesen Sie auch in unserem Blog: <br><br><ul><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">AWS hat Firecracker eingeführt - Mikrovirtualisierung für Linux</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vergangenheit, Gegenwart und Zukunft von Docker und anderen ausführbaren Containerumgebungen in Kubernetes</a> "; </li><li>  " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Red Hat ersetzt Docker durch Podman</a> "; </li><li>  "Die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Linux-Distribution von Grund auf neu zum Erstellen von Docker-Images ist unsere Erfahrung mit dappdeps</a> ." </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de440810/">https://habr.com/ru/post/de440810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de440800/index.html">Kali Linux 2019.1 veröffentlicht</a></li>
<li><a href="../de440802/index.html">WearMouse, eine Luftmaus für Wear OS-Uhren</a></li>
<li><a href="../de440804/index.html">DB-Klonoption für Entwicklung / Test</a></li>
<li><a href="../de440806/index.html">Dark Mobile auf CodeFest: funktionale Swift, Missverständnisse Clean Architecture und #Of natürlichZheKotlin</a></li>
<li><a href="../de440808/index.html">TDE in Apache Ignite: Eine wichtige Feature-Story in einem großen Open Source-Projekt</a></li>
<li><a href="../de440814/index.html">Souveränes LPWAN, Teil 1: Lizenzierung und Betrieb von LPWAN-Netzen in Russland - alte neue staatliche Anforderungen</a></li>
<li><a href="../de440816/index.html">Git und Teamentwicklung (für Dummies)</a></li>
<li><a href="../de440818/index.html">Wir führen eine Fehlerprüfung durch</a></li>
<li><a href="../de440820/index.html">Kontrolle und Kontrolle erneut: Änderung der magnetischen Richtung aufgrund der Spannung in Fe / BaTiO3</a></li>
<li><a href="../de440822/index.html">KI in der Medizin: Biowissenschaften und Wirkstoffforschung</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>