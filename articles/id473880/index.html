<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🗜️ ⏸️ 🆗 BlessRNG atau RNG memeriksa kejujuran 👊🏾 🚶 💀</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Di gamedev, Anda sering harus mengikat sesuatu di rumah acak: Unity memiliki Acak sendiri untuk ini, dan System.Random ada secara paralel dengannya. S...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>BlessRNG atau RNG memeriksa kejujuran</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/playgendary/blog/473880/"><img src="https://habrastorage.org/webt/l7/la/vl/l7lavlbtdajd-exhq5l43oeur6i.png"><br><br>  Di gamedev, Anda sering harus mengikat sesuatu di rumah acak: Unity memiliki Acak sendiri untuk ini, dan System.Random ada secara paralel dengannya.  Sekali waktu di salah satu proyek itu tampak bahwa keduanya dapat bekerja secara berbeda (walaupun mereka harus memiliki distribusi yang seragam). <br><br>  Lalu mereka tidak masuk ke detail - itu cukup bahwa transisi ke System.Random memperbaiki semua masalah.  Sekarang kami memutuskan untuk memahami lebih detail dan melakukan sedikit riset: bagaimana "bias" atau RNG yang dapat diprediksi, dan mana yang harus dipilih.  Selain itu, saya sering mendengar pendapat yang bertentangan tentang "kejujuran" mereka - mari kita coba mencari tahu bagaimana hasil nyata berhubungan dengan yang dinyatakan. <br><a name="habracut"></a><br><h2>  Program pendidikan singkat atau RNG sebenarnya adalah PRNG </h2><br>  <i>Jika Anda sudah terbiasa dengan generator nomor acak, Anda dapat langsung melanjutkan ke bagian "Pengujian".</i> <br><br>  Angka acak (MF) adalah urutan angka yang dihasilkan menggunakan beberapa proses acak (kacau), sumber entropi.  Artinya, ini adalah urutan seperti itu, unsur-unsur yang tidak terhubung oleh hukum matematika - mereka tidak memiliki hubungan sebab akibat. <br><br>  Apa yang menciptakan midrange disebut generator angka acak (RNG).  Tampaknya semuanya adalah dasar, tetapi jika kita beralih dari teori ke praktek, maka sebenarnya mengimplementasikan algoritma perangkat lunak untuk menghasilkan urutan seperti itu tidaklah begitu sederhana. <br><br>  Alasannya terletak pada tidak adanya keacakan dalam elektronik konsumen modern.  Tanpa itu, angka acak berhenti menjadi acak, dan generatornya berubah menjadi fungsi biasa dari argumen yang ditentukan dengan sengaja.  Untuk sejumlah spesialisasi di bidang IT, ini adalah masalah serius (misalnya, untuk kriptografi), untuk sisanya ada solusi yang dapat diterima. <br><br>  Kita perlu menulis sebuah algoritma yang akan mengembalikan, bahkan jika tidak benar-benar angka acak, tetapi sedekat mungkin dengan mereka - yang disebut angka pseudorandom (PSN).  Algoritma dalam hal ini disebut pseudo random number generator (PRNG). <br><br>  Ada beberapa opsi untuk membuat PRNG, tetapi untuk semua yang berikut akan relevan: <br><br><ol><li>  Kebutuhan akan pra-inisialisasi. <br><br>  PRNG tidak memiliki sumber entropi, oleh karena itu, sebelum digunakan, ia harus menunjukkan keadaan awal.  Ini ditentukan sebagai angka (atau vektor) dan disebut benih (seed, seed random).  Seringkali, penghitung jam prosesor atau angka yang setara dengan waktu sistem digunakan sebagai seed. </li><li> Reproduksibilitas urutan. <br><br>  PRNG sepenuhnya deterministik, sehingga benih yang ditentukan selama inisialisasi secara unik menentukan seluruh urutan nomor di masa depan.  Ini berarti bahwa satu PRSP, diinisialisasi dengan seed yang sama (pada waktu yang berbeda, dalam program yang berbeda, pada perangkat yang berbeda) akan menghasilkan urutan yang sama. </li></ol><br>  Anda juga perlu mengetahui distribusi probabilitas yang menjadi ciri PRNG - angka apa yang akan dihasilkan dan dengan probabilitas apa.  Paling sering, ini adalah distribusi normal atau distribusi seragam. <br><img src="https://habrastorage.org/webt/f7/2x/j9/f72xj9mz2s52w-ahiwp5uiuqzs0.png"><br>  <i>Distribusi normal (kiri) dan distribusi seragam (kanan)</i> <br><br>  Katakanlah kita memiliki dadu yang jujur ​​dengan 24 wajah.  Jika Anda menjatuhkannya, maka probabilitas sebuah unit jatuh adalah 1/24 (dan juga probabilitas nomor lainnya yang jatuh).  Jika Anda melakukan banyak lemparan dan mencatat hasilnya, Anda akan melihat bahwa semua wajah rontok pada frekuensi yang sama.  Bahkan, dadu ini dapat dianggap sebagai RNG dengan distribusi seragam. <br><br>  Dan jika Anda segera melempar 10 tulang seperti itu dan menghitung jumlah total poin?  Apakah keseragaman akan dipertahankan untuknya?  Tidak.  Paling sering, jumlahnya akan mendekati 125 poin, yaitu beberapa nilai rata-rata.  Dan sebagai hasilnya - bahkan sebelum melakukan lemparan, Anda dapat memperkirakan secara kasar hasil di masa depan. <br><br>  Alasannya adalah untuk mendapatkan jumlah poin rata-rata ada jumlah kombinasi terbesar.  Semakin jauh darinya, semakin sedikit kombinasi - dan, karenanya, semakin sedikit kemungkinan kehilangan.  Jika Anda memvisualisasikan data ini, itu akan jauh menyerupai bentuk bel.  Oleh karena itu, dengan beberapa peregangan, sistem 10 tulang dapat disebut RNG dengan distribusi normal. <br><br>  Contoh lain, baru saja di pesawat - menembak sasaran.  Penembak akan menjadi RNG yang menghasilkan sepasang angka (x, y), yang ditampilkan pada grafik. <br><img src="https://habrastorage.org/webt/hs/o8/t3/hso8t3u11xkoyrp2slwjo4jvpic.png"><br>  Setuju bahwa opsi di sebelah kiri lebih dekat dengan kehidupan nyata - ini adalah RNG dengan distribusi normal.  Tetapi jika Anda perlu menyebarkan bintang di langit gelap, maka opsi yang tepat, diperoleh dengan bantuan RNG dengan distribusi seragam, lebih baik.  Secara umum, pilih generator tergantung pada tugasnya. <br><br>  Sekarang mari kita bicara tentang entropi urutan PSP.  Misalnya, ada urutan yang dimulai seperti ini: <br><br>  89, 93, 33, 32, 82, 21, 4, 42, 11, 8, 60, 95, 53, 30, 42, 19, 34, 35, 62, 23, 44, 38, 74, 36, 52, 18, 58, 79, 65, 45, 99, 90, 82, 20, 41, 13, 88, 76, 82, 24, 5, 54, 72, 19, 80, 2, 74, 36, 71, 9, ... <br><br>  Seberapa acak angka-angka ini pada pandangan pertama?  Mari kita mulai dengan memeriksa distribusinya. <br><img src="https://habrastorage.org/webt/pg/6h/nw/pg6hnwtyc2v9e8xx2-zurotlnsq.png"><br>  Sepertinya dekat dengan seragam, tetapi jika Anda membaca urutan dua angka dan menafsirkannya sebagai koordinat di pesawat, Anda mendapatkan ini: <br><img src="https://habrastorage.org/webt/vd/3_/y2/vd3_y2eijwkjq47tbjsut-els-y.png"><br>  Pola terlihat jelas.  Dan karena data dalam urutan diurutkan dengan cara tertentu (yaitu, mereka memiliki entropi rendah), ini dapat menyebabkan "bias".  Paling tidak, PRNG semacam itu sangat tidak cocok untuk menghasilkan koordinat di pesawat. <br><br>  Urutan lain: <br><br>  42, 72, 17, 0, 30, 0, 15, 9, 47, 19, 35, 86, 40, 54, 97, 42, 69, 19, 20, 88, 4, 3, 67, 27, 42, 56, 17, 14, 20, 40, 80, 97, 1, 31, 69, 13, 88, 89, 76, 9, 4, 85, 17, 88, 70, 10, 42, 98, 96, 53, ... <br><br>  Semuanya tampak baik-baik saja di sini bahkan di pesawat: <br><img src="https://habrastorage.org/webt/ou/kh/ec/oukhecshx_b1qwjmt73micdukry.png"><br>  Mari kita lihat dalam volume (masing-masing kita membaca tiga angka): <br><img src="https://habrastorage.org/webt/ly/sy/08/lysy08ezn_tfyljmvlgjygp_xks.gif"><br>  Dan lagi polanya.  Membangun visualisasi dalam empat dimensi tidak akan berhasil.  Tetapi pola bisa ada baik pada dimensi ini maupun pada yang besar. <br><br>  Dalam kriptografi yang sama, di mana persyaratan yang paling ketat diterapkan pada PRNG, situasi seperti itu secara kategoris tidak dapat diterima.  Oleh karena itu, untuk mengevaluasi kualitasnya, algoritma khusus telah dikembangkan, yang tidak akan kami sentuh sekarang.  Topiknya luas dan mengacu pada artikel terpisah. <br><br><h2>  Pengujian </h2><br>  Jika kami tidak mengetahui sesuatu dengan pasti, lalu bagaimana cara mengatasinya?  Apakah layak untuk menyeberang jalan jika Anda tidak tahu sinyal lalu lintas apa yang dibolehkan?  Konsekuensinya mungkin berbeda. <br><br>  Hal yang sama berlaku untuk keacakan yang terkenal di Unity.  Nah, jika dokumentasi mengungkapkan rincian yang diperlukan, tetapi cerita yang disebutkan di awal artikel terjadi hanya karena kurangnya spesifik yang diinginkan. <br><br>  Dan tanpa mengetahui bagaimana alat ini bekerja, Anda tidak dapat menerapkannya dengan benar.  Secara umum, waktunya telah tiba untuk memeriksa dan melakukan percobaan untuk akhirnya memastikan setidaknya dengan mengorbankan distribusi. <br><br>  Solusinya sederhana dan efektif - untuk mengumpulkan statistik, memperoleh data objektif dan melihat hasilnya. <br><br><h3>  Subjek penelitian </h3><br>  Ada beberapa cara untuk menghasilkan angka acak di Unity - kami menguji lima. <br><br><ol><li>  System.Random.Next ().  Menghasilkan bilangan bulat dalam rentang nilai yang diberikan. </li><li>  System.Random.NextDouble ().  Menghasilkan angka presisi ganda (ganda) dalam kisaran dari [0;  1). </li><li>  UnityEngine.Random.Range ().  Menghasilkan angka presisi tunggal (float) dalam rentang nilai yang diberikan. </li><li>  UnityEngine.Random.value.  Menghasilkan angka presisi tunggal (float) dalam kisaran dari [0;  1). </li><li>  Unity.Mathematics.Random.NextFloat ().  Bagian dari perpustakaan Unity.Mathematics baru.  Menghasilkan angka presisi tunggal (float) dalam rentang nilai yang diberikan. </li></ol><br>  Hampir di mana-mana dalam dokumentasi, distribusi seragam ditunjukkan, dengan pengecualian UnityEngine.Random.value (di mana distribusi tidak ditentukan, tetapi mirip dengan UnityEngine.Random.Range () itu juga diharapkan seragam) dan Unity.Mathematics.Random.NextFloat () (di mana dalam dasarnya adalah algoritma xorshift, yang artinya Anda harus menunggu distribusi yang seragam). <br><br>  Secara default, yang diharapkan dalam dokumentasi diambil untuk hasil yang diharapkan. <br><br><h3>  Metodologi </h3><br>  Kami menulis sebuah aplikasi kecil yang menghasilkan urutan angka acak di masing-masing metode yang disajikan dan menyimpan hasilnya untuk diproses lebih lanjut. <br><br>  Panjang setiap urutan adalah 100.000 angka. <br>  Kisaran angka acak adalah [0, 100). <br><br>  Data dikumpulkan dari beberapa platform target: <br><br><ul><li>  Windows <br>  - Unity v2018.3.14f1, mode Editor, Mono, .NET Standard 2.0 </li><li>  macOS <br>  - Unity v2018.3.14f1, mode Editor, Mono, .NET Standard 2.0 <br>  - Unity v5.6.4p4, mode Editor, Mono, .NET Standard 2.0 </li><li>  Android <br>  - Unity v2018.3.14f1, perakitan pada perangkat, Mono, .NET Standard 2.0 </li><li>  iOS <br>  - Unity v2018.3.14f1, build to device, il2cpp, .NET Standard 2.0 </li></ul><br><h3>  Implementasi </h3><br>  Kami memiliki beberapa cara berbeda untuk menghasilkan angka acak.  Untuk masing-masing dari mereka kami akan menulis kelas pembungkus yang terpisah, yang harus menyediakan: <br><br><ol><li>  Kemampuan untuk mengatur rentang nilai [min / maks).  Ini akan ditetapkan melalui konstruktor. </li><li>  Metode mengembalikan midrange.  Kami akan memilih float sebagai tipenya, sebagai yang lebih umum. </li><li>  Nama metode generasi untuk menandai hasil.  Untuk kenyamanan, kami akan mengembalikan nama kelas penuh + nama metode yang digunakan untuk menghasilkan midrange sebagai nilai. </li></ol><br>  Pertama, nyatakan abstraksi, yang akan diwakili oleh antarmuka IRandomGenerator: <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; } }</code> </pre> <br><h4>  Implementasi System.Random.Next () </h4><br>  Metode ini memungkinkan Anda untuk menentukan rentang nilai, tetapi mengembalikan bilangan bulat, dan float diperlukan.  Anda cukup menginterpretasikan integer sebagai float, atau Anda dapat memperluas rentang nilai dengan beberapa urutan besarnya, mengkompensasinya setiap kali midrange dihasilkan.  Ini akan menghasilkan sesuatu seperti titik tetap dengan akurasi yang ditentukan.  Kami akan menggunakan opsi ini, karena lebih dekat dengan nilai float nyata. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SystemIntegerRandomGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> DefaultFactor = <span class="hljs-number"><span class="hljs-number">100000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Random _generator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _max; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _factor; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"System.Random.Next()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SystemIntegerRandomGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> factor = DefaultFactor</span></span></span><span class="hljs-function">)</span></span> { _min = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)min * factor; _max = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)max * factor; _factor = factor; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)_generator.Next(_min, _max) / _factor; } }</code> </pre> <br><h4>  Implementasi System.Random.NextDouble () </h4><br>  Di sini rentang nilai tetap [0;  1).  Untuk memproyeksikannya ke yang ditentukan dalam konstruktor, kami menggunakan aritmatika sederhana: X * (maks - min) + min. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SystemDoubleRandomGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> Random _generator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> _factor; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"System.Random.NextDouble()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SystemDoubleRandomGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _factor = max - min; _min = min; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(_generator.NextDouble() * _factor) + _min; } }</code> </pre> <br><h4>  Implementasi UnityEngine.Random.Range () </h4><br>  Metode kelas statis UnityEngine.Random ini memungkinkan Anda menentukan rentang nilai dan mengembalikan kisaran menengah dari tipe float.  Tidak diperlukan transformasi tambahan. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UnityRandomRangeGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _max; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"UnityEngine.Random.Range()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnityRandomRangeGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _min = min; _max = max; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; Random.Range(_min, _max); } }</code> </pre> <br><h4>  Implementasi UnityEngine.Random.value </h4><br>  Properti nilai dari kelas statis UnityEngine.Random mengembalikan kelas menengah dari tipe float dari rentang nilai yang tetap [0;  1).  Kami memproyeksikannya ke rentang yang diberikan dengan cara yang sama seperti ketika menerapkan System.Random.NextDouble (). <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UnityRandomValueGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _factor; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"UnityEngine.Random.value"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnityRandomValueGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _factor = max - min; _min = min; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(Random.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span> * _factor) + _min; } }</code> </pre> <br><h4>  Implementasi Unity.Mathematics.Random.NextFloat () </h4><br>  Metode NextFloat () dari kelas Unity.Mathematics.Random mengembalikan kelas menengah dari tipe float dan memungkinkan Anda untuk menentukan rentang nilai.  Satu-satunya nuansa adalah bahwa setiap instance dari Unity.Mathematics.Random harus diinisialisasi dengan beberapa seed - dengan cara ini kita akan menghindari menghasilkan urutan berulang. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> Unity.Mathematics; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UnityMathematicsRandomValueGenerator</span></span> : <span class="hljs-title"><span class="hljs-title">IRandomGenerator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Random _generator; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _min; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _max; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name =&gt; <span class="hljs-string"><span class="hljs-string">"Unity.Mathematics.Random.NextFloat()"</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UnityMathematicsRandomValueGenerator</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> min, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> max</span></span></span><span class="hljs-function">)</span></span> { _min = min; _max = max; _generator = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Random(); _generator.InitState(<span class="hljs-keyword"><span class="hljs-keyword">unchecked</span></span>((<span class="hljs-keyword"><span class="hljs-keyword">uint</span></span>)System.DateTime.Now.Ticks)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Generate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> =&gt; _generator.NextFloat(_min, _max); } }</code> </pre> <br><h4>  Implementasi MainController </h4><br>  Beberapa implementasi IRandomGenerator siap.  Selanjutnya, Anda perlu membuat urutan dan menyimpan dataset yang dihasilkan untuk diproses.  Untuk melakukan ini, buat adegan di Unity dan MainController skrip kecil, yang akan melakukan semua pekerjaan yang diperlukan dan secara bersamaan bertanggung jawab untuk berinteraksi dengan UI. <br><br>  Kami mengatur ukuran dataset dan kisaran nilai midrange, dan juga mendapatkan metode yang mengembalikan array generator yang disetel dan siap digunakan. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainController</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> DefaultDatasetSize = <span class="hljs-number"><span class="hljs-number">100000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> MinValue = <span class="hljs-number"><span class="hljs-number">0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> MaxValue = <span class="hljs-number"><span class="hljs-number">100f</span></span>; ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IRandomGenerator[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateRandomGenerators</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IRandomGenerator[] { <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SystemIntegerRandomGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SystemDoubleRandomGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityRandomRangeGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityRandomValueGenerator(MinValue, MaxValue), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnityMathematicsRandomValueGenerator(MinValue, MaxValue) }; } ... } }</code> </pre> <br>  Dan sekarang kami sedang membuat dataset.  Dalam hal ini, pembuatan data akan digabungkan dengan perekaman hasil dalam aliran teks (dalam format csv).  Untuk menyimpan nilai dari setiap IRandomGenerator, kolom terpisah dialokasikan, dan baris pertama berisi nama generator. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainController</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateCsvDataSet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TextWriter writer, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dataSetSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IRandomGenerator[] generators</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> separator = <span class="hljs-string"><span class="hljs-string">','</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> lastIdx = generators.Length - <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-comment"><span class="hljs-comment">// write header for (int j = 0; j &lt;= lastIdx; j++) { writer.Write(generators[j].Name); if (j != lastIdx) writer.Write(separator); } writer.WriteLine(); // write data for (int i = 0; i &lt;= dataSetSize; i++) { for (int j = 0; j &lt;= lastIdx; j++) { writer.Write(generators[j].Generate()); if (j != lastIdx) writer.Write(separator); } if (i != dataSetSize) writer.WriteLine(); } } ... } }</span></span></code> </pre> <br>  Tetap memanggil metode GenerateCsvDataSet dan menyimpan hasilnya ke file, atau segera mentransfer data melalui jaringan dari perangkat akhir ke server penerima. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">RandomDistribution</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MainController</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateCsvDataSet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> path, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dataSetSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IRandomGenerator[] generators</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> writer = File.CreateText(path)) { GenerateCsvDataSet(writer, dataSetSize, generators); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GenerateCsvDataSet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dataSetSize, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">params</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IRandomGenerator[] generators</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (StringWriter writer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringWriter(CultureInfo.InvariantCulture)) { GenerateCsvDataSet(writer, dataSetSize, generators); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> writer.ToString(); } } ... } }</code> </pre> <br>  Sumber proyek ada di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">GitLab</a> . <br><br><h2>  Hasil </h2><br>  Tidak ada keajaiban yang terjadi.  Apa yang mereka harapkan, mereka mendapatkannya - dalam semua kasus distribusi yang seragam tanpa sedikit pun konspirasi.  Saya tidak melihat titik menerapkan grafik terpisah pada platform - semuanya menunjukkan hasil yang kira-kira sama. <br><br>  Kenyataannya adalah: <br><img src="https://habrastorage.org/webt/yr/cb/io/yrcbio95sz22zrzhszi1syge7o8.gif"><br><br>  Visualisasi urutan di pesawat dari semua metode generasi lima: <br><img src="https://habrastorage.org/webt/zk/0s/lf/zk0slfejixlez-fp2x9prd19u_c.gif"><br><br>  Dan visualisasi dalam 3D.  Saya hanya akan meninggalkan hasil System.Random.Next (), agar tidak menghasilkan banyak konten yang sama. <br><img src="https://habrastorage.org/webt/ao/pw/ud/aopwud2ll4sjvtcpj69p-v8or8s.gif"><br><br>  Kisah yang diceritakan dalam pengantar tentang distribusi normal UnityEngine.Random tidak mengulangi: entah itu awalnya salah, atau ada sesuatu yang berubah di mesin sejak saat itu.  Tapi sekarang kami yakin. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473880/">https://habr.com/ru/post/id473880/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473862/index.html">Kursus Netologi Baru - Pembelajaran Jauh: Pembelajaran Mesin</a></li>
<li><a href="../id473864/index.html">Pembuatan spesifikasi OpenAPI berdasarkan tes fungsional</a></li>
<li><a href="../id473868/index.html">Kami melihat chip Cina novatek NT78820</a></li>
<li><a href="../id473872/index.html">Rencana Persiapan Wawancara Pengembang Java</a></li>
<li><a href="../id473874/index.html">Intisari acara TI pada bulan November (bagian satu)</a></li>
<li><a href="../id473882/index.html">Pengantar Ketergantungan Fungsional</a></li>
<li><a href="../id473884/index.html">Cara membongkar data dengan struktur bersarang dari Google BigQuery menggunakan contoh parameter khusus Google Analytics</a></li>
<li><a href="../id473886/index.html">Workstation kriptografi berdasarkan standar kunci publik. Fungsi untuk parsing dan melihat struktur ASN1</a></li>
<li><a href="../id473888/index.html">Berita dari dunia OpenStreetMap No. 483 (15/10/2019 - 21/10/2019)</a></li>
<li><a href="../id473890/index.html">Operation Calypso: Grup APT Baru Menyerang Kantor Pemerintah di Seluruh Dunia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>