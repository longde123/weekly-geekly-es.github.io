<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë´ üå∞ üêé Organize a lista de reprodu√ß√£o de torrent-TV (Super Wash) üö∂üèø üê™ üññüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="UPD O servi√ßo Torrent-TV, que era a principal fonte de conte√∫do, morreu, ent√£o o artigo n√£o tem significado pr√°tico. 

 Os fluxos no servi√ßo ilegal de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Organize a lista de reprodu√ß√£o de torrent-TV (Super Wash)</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/438842/"> <b>UPD</b>  <b>O servi√ßo Torrent-TV, que era a principal fonte de conte√∫do, morreu, ent√£o o artigo n√£o tem significado pr√°tico.</b> <br><br>  Os fluxos no servi√ßo ilegal de Torrent-TV (Super Wash) s√£o fluxos predominantemente originais de operadores ou de um sat√©lite sem fixa√ß√£o.  Estes s√£o principalmente fluxos de v√≠deo entrela√ßados.  A TV Torrent oferece a mais alta qualidade poss√≠vel, mas baixa estabilidade.  Hoje existem alguns canais, amanh√£ n√£o.  Hoje, alguns canais funcionam bem, amanh√£ √© ruim.  Este servi√ßo n√£o √© adequado para uso cont√≠nuo e sem problemas - pelo qual eles pagaram, ou seja,  n√£o pagou, ent√£o eles receberam.  Mas √© √≥timo quando voc√™ precisa assistir a algo com alta qualidade (se o canal funcionar de forma est√°vel nesse momento).  Outro problema √© a forma√ß√£o de uma lista pessoal conveniente.  Isso ser√° discutido em uma nota. <br><br><img src="https://habrastorage.org/webt/-q/pn/q4/-qpnq4tysuha1lgfmqtcv7uu3ha.png"><br><a name="habracut"></a><br>  A lista de reprodu√ß√£o b√°sica da TV torrent (Super Wash) cont√©m mais de 1200 canais.  Todos os tipos de pa√≠ses regionais, diferentes, duplicatas de SD e HD, diferentes canais de lixo etc. 200 a 300 canais pertencem aos telespectadores russos.  Ao mesmo tempo, o agrupamento de canais aceito n√£o √© conveniente para todos.  Parece que voc√™ pode pegar uma lista de reprodu√ß√£o da Torrent TV, organiz√°-la conforme exigido pela alma do perfeccionista.  O problema √© que os links do AceStream para os canais mudam periodicamente e a lista de reprodu√ß√£o preparada se torna in√∫til.  I.e.  Voc√™ precisa da gera√ß√£o autom√°tica de uma nova lista de reprodu√ß√£o atualizada em um formato conveniente para voc√™.  √â isso que faremos. <br><br>  <b>Voc√™ precisar√° de:</b> <br><br><ul><li>  Experi√™ncia na cria√ß√£o de programas para assistir a Torrent TV ("Super Wash") e saber o que √©. </li><li>  Roteador com suporte a Entware (se necess√°rio, e algumas habilidades podem ser facilmente adaptadas √†s instru√ß√µes do OpenWrt ou Entware nas pr√≥prias caixas). </li></ul><br>  <b>A nota n√£o aborda quest√µes:</b> <br><br><ul><li>  Escolhendo e configurando um gerenciador de IPTV. </li><li>  Configura√ß√µes do sistema como um todo para assistir a Torrent TV. </li><li>  Recursos de caixas Android espec√≠ficas para trabalhar com v√≠deo entrela√ßado em geral e Torrent TV em particular. </li></ul><br>  Usaremos o programa no roteador, que quando solicitado pelo link, baixar√° a lista de reprodu√ß√£o atual de Torrent-TV, criar√° uma nova lista de reprodu√ß√£o e fornecer√°: <br><br><ul><li>  Sua pr√≥pria lista de canais com base na lista preparada de canais favoritos. </li><li>  Voc√™ pode excluir automaticamente os canais SD se houver correspond√™ncia HD para eles. </li><li>  Classifique os grupos e seus nomes de acordo com o seu desejo. </li><li>  Nome do canal exibido como voc√™ deseja. </li><li>  Classifique os canais em um grupo por HD / SD (prim√°rio) e nome. </li><li>  Links internos para fontes de EPG. </li><li>  A origem dos logotipos (assim como os pr√≥prios logotipos) e conformidade com o EPG para os canais de sua escolha. </li></ul><br><h2>  Como tudo funcionar√° ap√≥s o ajuste? </h2><br>  Adicione um link √† lista de reprodu√ß√£o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://192.168.0.1:81/playlist.cgi</a> (substitua 192.168.0.1 pelo endere√ßo interno do seu roteador) no seu gerenciador de IPTV.  Feito. <br><br><img src="https://habrastorage.org/webt/cm/on/1u/cmon1uarl1wclz_9v5zxk2f-p34.png"><br><br>  O princ√≠pio de opera√ß√£o √© muito simples.  O script playlist.cgi no roteador inicia o programa ttv.py, que, com base na lista de reprodu√ß√£o atual de TV torrent (carregada no momento do acesso) e na lista de canais favoritos, gera uma nova lista de reprodu√ß√£o e a distribui. <br><br><h2>  Instalando o software necess√°rio no roteador </h2><br>  Conecte-se via SSH ao roteador.  No Windows, voc√™ pode usar o cliente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">PuTTY</a> para conectar a conex√£o. <br><br>  Instale o software necess√°rio: <br><br><pre><code class="bash hljs">opkg update opkg install wget ca-certificates mc python3 lighttpd-mod-cgi</code> </pre> <br>  <b>O wget</b> √© um programa para baixar arquivos.  Ser√° necess√°rio apenas para a configura√ß√£o inicial. <br><br>  <b>ca-certificates</b> - certificados para o wget. <br><br>  <b>mc</b> - gerenciador de arquivos Midnight Commander.  √â necess√°rio apenas por causa do conveniente editor do mcedit.  Se voc√™ est√° acostumado a usar outro editor de texto, o mc n√£o pode ser instalado. <br><br>  <b>python3</b> √© um int√©rprete Python. <br><br>  <b>lighttpd-mod-cgi</b> - servidor de web lighttpd. <br><br><h2>  Baixar arquivos principais </h2><br><pre> <code class="bash hljs">mkdir -p /opt/etc/ttv wget --no-check-certificate -O /opt/etc/ttv/ttv.py https://raw.githubusercontent.com/Kyrie1965/ttv/master/ttv.py wget --no-check-certificate -O /opt/share/www/playlist.cgi https://raw.githubusercontent.com/Kyrie1965/ttv/master/playlist.cgi chmod +x /opt/share/www/playlist.cgi</code> </pre> <br>  Falarei sobre a consulta deles mais tarde, mas por enquanto apenas mostrarei o conte√∫do.  N√£o encontrei falhas no c√≥digo Python, at√© o momento nunca escrevi nada em Python. <br><br><div class="spoiler">  <b class="spoiler_title">Conte√∫do /opt/etc/ttv/ttv.py</b> <div class="spoiler_text"><pre> <code class="python hljs">PLAYLIST_LOAD_URL = <span class="hljs-string"><span class="hljs-string">"http://91.92.66.82/trash/ttv-list/as.all.tag.player.m3u"</span></span> TEMPLATE_SAVE_PATH = <span class="hljs-string"><span class="hljs-string">"/opt/etc/ttv/template.txt"</span></span> FAVORITES_LOAD_PATH = <span class="hljs-string"><span class="hljs-string">"/opt/etc/ttv/favorites.txt"</span></span> PLAYLIST_SAVE_PATH = <span class="hljs-string"><span class="hljs-string">"/opt/etc/ttv/playlist.m3u"</span></span> LOGOS_URL = <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-comment"><span class="hljs-comment">#LOGOS_URL = "https://raw.githubusercontent.com/Kyrie1965/ttv/master/logos/{}" #LOGOS_URL = "{}" STREAM_URL = "http://127.0.0.1:6878/ace/getstream?id={}&amp;.mp4" #STREAM_URL = "acestream://{}" EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz" #EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz,http://programtv.ru/xmltv.xml.gz,http://api.torrent-tv.ru/ttv.xmltv.xml.gz" import re import urllib.request import os from operator import itemgetter as i from functools import cmp_to_key from urllib.parse import urlencode import gzip def cmp(a, b): return (a &gt; b) - (a &lt; b) def multikeysort(items, columns): comparers = [ ((i(col[1:].strip()), -1) if col.startswith('-') else (i(col.strip()), 1)) for col in columns ] def comparer(left, right): comparer_iter = ( cmp(fn(left), fn(right)) * mult for fn, mult in comparers ) return next((result for result in comparer_iter if result), 0) return sorted(items, key=cmp_to_key(comparer)) def loadChannels(content): lines = content.splitlines() returnChannels = {} pattern = re.compile("group-title=\"(.*?)\"") pattern2 = re.compile("tvg-logo=\"(.*?)\"") channelName = "" channelGroup = "" channelLogoLink = "" channelStreamID = "" waitURI = False for line in lines: if line.startswith("acestream"): if waitURI: channelStreamID = line[12:] HD = False if ("HD" in channelName) or ("UHD" in channelName) or ("4K" in channelName): HD = True tmpDict = {"name": channelName, "group": channelGroup, "stream": channelStreamID, "hd": HD, "logolink": channelLogoLink} returnChannels[channelName.upper()] = tmpDict waitURI = False elif line.startswith("#EXTINF"): index = line.rfind("\",") if (index == -1): continue channelName = line[index+2:] match = pattern.search(line) if match: channelGroup = match.group(1) else: channelGroup = "" match = pattern2.search(line) if match: channelLogoLink = match.group(1) else: channelLogoLink = "" waitURI = True return returnChannels def saveTemplate(content, channels, path): lines = content.splitlines() pattern = re.compile("group-title=\"(.*?)\"") waitURI = False channelName = "" channelReplace = "" channelNewName = "" channelEPG = "" channelGroup = "" channelStreamID = "" groupDict = {} currentGroup = 1 template="" for line in lines: if line.startswith("acestream"): if waitURI: channelStreamID = line[12:] template += channelName template += "/" template += channelReplace template += "/" template += channelNewName template += "/" template += channelEPG template += "/" template += channelName + ".png" template += "/" template += channelGroup template += "\n" waitURI = False elif line.startswith("#EXTINF"): x = line.split("\",") if (len(x) != 2): continue channelName = x[1] channelNewName = x[1] channelEPG = x[1] if (channels.get(channelName.upper() + " HD") != None): channelReplace = channelName + " HD" else: channelReplace = "-" match = pattern.search(x[0]) if match: channelGroup = match.group(1) if (groupDict.get(channelGroup)): channelGroup = groupDict.get(channelGroup) else: newGroupName = "{:02d}_{}".format(currentGroup, channelGroup) currentGroup += 1 groupDict[channelGroup] = newGroupName channelGroup = newGroupName else: channelGroup = "00_Unsigned" waitURI = True file = open(path,'w', encoding='utf-8') file.write(template) file.close() return def loadFavorites(content): returnChannels = {} lines = content.splitlines() for line in lines: parts = line.split('/') if len(parts) == 6: tmpDict = {"name": parts[0], "replace": parts[1], "newName": parts[2], "EPG": parts[3], "logo": parts[4], "group": parts[5]} returnChannels[parts[0].upper()] = tmpDict elif len(parts) == 5: #    tmpDict = {"name": parts[0], "replace": parts[1], "newName": parts[2], "EPG": parts[3], "group": parts[4], "logo": parts[0] + ".png"} returnChannels[parts[0].upper()] = tmpDict return returnChannels def savePlaylist(channels, favorites, path): returnChannels = [] currentChannels = set() for key, chDict in favorites.items(): if chDict["replace"] != "-": if favorites.get(chDict["replace"].upper()) != None and channels.get(chDict["replace"].upper()) != None: currentChannels.add(chDict["replace"]) elif channels.get(chDict["name"].upper()) != None: currentChannels.add(chDict["name"]) elif channels.get(chDict["name"].upper()) != None: currentChannels.add(chDict["name"]) for ch in currentChannels: chFromFavorites = favorites.get(ch.upper()) chFromChannels = channels.get(ch.upper()) tmpDict = {"name": chFromFavorites.get("newName"), "oldName": chFromFavorites.get("name"), "EPG": chFromFavorites.get("EPG"), "group": chFromFavorites.get("group"), "logof": chFromFavorites.get("logo"), "logoc": chFromChannels.get("logolink"), "stream": chFromChannels.get("stream"), "hd": chFromChannels.get("hd")} returnChannels.append(tmpDict) result = multikeysort(returnChannels, ['group', '-hd', 'name']) template="" template += "#EXTM3U url-tvg=" template += "\"" template += EPG_LINKS template += "\"" template += "\n" for n in result: group = n.get("group") if group.find("_", 2, 3) != -1: group = group[3:] if len(LOGOS_URL) &gt; 0: template += "#EXTINF:-1 tvg-name=\"{}\" tvg-logo=\"{}\" group-title=\"{}\",{}".format(n.get("EPG"), LOGOS_URL.format(urllib.parse.quote(n.get("logof"))), group, n.get("name")) else: template += "#EXTINF:-1 tvg-name=\"{}\" tvg-logo=\"{}\" group-title=\"{}\",{}".format(n.get("EPG"), n.get("logoc"), group, n.get("name")) template += "\n" template += STREAM_URL.format(n.get("stream")) template += "\n" file = open(path,'w', encoding='utf-8') file.write(template) file.close() return result #response = urllib.request.urlopen(PLAYLIST_LOAD_URL) #content = response.read().decode("utf-8") #channels = loadChannels(content) content = "" request = urllib.request.Request(PLAYLIST_LOAD_URL) request.add_header('Accept-encoding', 'gzip') response = urllib.request.urlopen(request) if response.info().get('Content-Encoding') == 'gzip': gzipFile = gzip.GzipFile(fileobj=response) content = gzipFile.read().decode("utf-8") else: content = response.read().decode("utf-8") channels = loadChannels(content) if channels == None or (len(channels.keys()) == 0): exit() saveTemplate(content, channels, TEMPLATE_SAVE_PATH) exists = os.path.isfile(FAVORITES_LOAD_PATH) if exists: file = open(FAVORITES_LOAD_PATH,'r', encoding='utf-8') content = file.read() favorites = loadFavorites(content) savePlaylist(channels, favorites, PLAYLIST_SAVE_PATH)</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Conte√∫do /opt/share/www/playlist.cgi</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh PATH=/opt/sbin:/opt/bin:/opt/usr/sbin:/opt/usr/bin:/usr/sbin:/usr/bin:/sbin:/bin python3 /opt/etc/ttv/ttv.py echo "Content-Type: text/plain; charset=UTF-8" echo "" echo "$(cat /opt/etc/ttv/playlist.m3u)"</span></span></code> </pre> <br></div></div><br><h2>  Configura√ß√£o e inicializa√ß√£o do servidor da Web </h2><br>  Abra o arquivo <b>/opt/etc/lighttpd/lighttpd.conf</b> : <br><br><pre> <code class="bash hljs">mcedit /opt/etc/lighttpd/lighttpd.conf</code> </pre> <br>  Para colar do buffer, use Shift + Insert, salve - F2, saia - F10. <br><br>  Altere a linha <b># server.port = 80</b> para: <br><br><pre> <code class="bash hljs">server.port = 81</code> </pre> <br>  Abra o arquivo <b>/opt/etc/lighttpd/conf.d/30-cgi.conf</b> : <br><br><pre> <code class="bash hljs">mcedit /opt/etc/lighttpd/conf.d/30-cgi.conf</code> </pre> <br>  Altere <b>".cgi" =&gt; "/ opt / bin / perl"</b> para: <br><br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">".cgi"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"/bin/sh"</span></span></code> </pre> <br>  Inicie o servidor da web: <br><br><pre> <code class="bash hljs">/opt/etc/init.d/S80lighttpd start</code> </pre> <br><h2>  Crie uma lista de canais favoritos </h2><br>  Execute o programa <b>ttv.py</b> : <br><br><pre> <code class="bash hljs">python3 /opt/etc/ttv/ttv.py</code> </pre> <br>  Um arquivo de <b>modelo template.txt</b> ser√° criado na pasta <b>/ opt / etc / ttv</b> .  Este √© um arquivo de texto simples.  Ser√° sempre relevante, ou seja,  Quando o programa √© iniciado, ele √© substitu√≠do pelos dados atuais. <br><br>  Cada linha deste arquivo corresponde a um canal de Torrent-TV e tem a forma: <br>  <b>CHANNEL_NAME / CHANGE_CHANNEL / YOUR_CHANNEL_NAME / YOUR_CHANNEL_NAME__EPG / YOUR_LOGO / SEU GRUPO</b> <br><br>  Por exemplo: <br><br>  Amedia Premium / Amedia Premium HD / Amedia Premium / Amedia Premium / Amedia Premium.png / 11_Movies <br>  Amedia Premium HD / - / Amedia Premium HD / Amedia Premium HD / Amedia Premium HD.png / 11_Movies <br><br>  Salve este arquivo no seu computador para facilitar a edi√ß√£o (por exemplo, usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">WinSCP</a> ).  Renomeie-o para favorites.txt. <br><br>  Edite o arquivo, deixando apenas os canais necess√°rios. <br><br>  <b>CHANNEL_NAME</b> - O nome do canal na lista de reprodu√ß√£o original. <br><br>  <b>CHANGE_CHANNEL</b> - o nome do canal na lista de reprodu√ß√£o original para substitui√ß√£o.  Coloque um "-" se uma substitui√ß√£o n√£o for necess√°ria.  Por padr√£o, as substitui√ß√µes s√£o substitu√≠das automaticamente no modelo se o canal tiver uma op√ß√£o HD.  Por exemplo, na lista de reprodu√ß√£o original, existem o Amedia Premium e o Amedia Premium HD.  Somente o Amedia Premium HD estar√° na lista final. <br><br>  <b>YOUR_CHANNEL_NAME</b> √© o nome de exibi√ß√£o no gerenciador de IPTV.  Pode ser qualquer coisa e afeta apenas o nome exibido no gerenciador de IPTV.  Por exemplo, o canal original √© chamado "Paramount Comedy HD (R√∫ssia)" e voc√™ o renomeia como "Paramount Comedy HD". <br><br>  <b>YOUR_CHANNEL_B__EPG_NAME</b> - isso √© necess√°rio para total conformidade na fonte EPG selecionada.  Por exemplo, o canal original √© chamado "Match TV HD".  E no EPG esse canal √© chamado de "Match!".  Mude este par√¢metro para "Match!"  e obtenha total conformidade com sua fonte de EPG.  Portanto, para todos os canais, voc√™ pode aproximar a conformidade do EPG de 100%. <br><br>  <b>YOUR_LOGO</b> - o nome do arquivo de logotipo.  Por padr√£o, ttv.py obt√©m links de logotipo da lista de reprodu√ß√£o original, ou seja,  YOUR_LOGO ser√° ignorado.  Para us√°-lo, voc√™ precisa alterar o par√¢metro LOGOS_URL em ttv.py (voc√™ ler√° mais sobre isso mais tarde). <br><br>  <b>YOUR_GROUP</b> - o nome do grupo de canais.  Voc√™ pode usar um √≠ndice, um n√∫mero de dois d√≠gitos, antes do nome do grupo.  Este √≠ndice determina a ordem dos grupos na lista de reprodu√ß√£o final (de menor para maior).  Ap√≥s a classifica√ß√£o, o √≠ndice ser√° removido automaticamente do nome do grupo. <br><br><div class="spoiler">  <b class="spoiler_title">Aqui est√° um exemplo de um arquivo favorites.txt editado</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">Amedia Premium/Amedia Premium HD/Amedia Premium/Amedia Premium/Amedia Premium.png/11_   Amedia Premium HD/-/Amedia Premium HD/Amedia Premium HD/Amedia Premium HD.png/11_   / HD///.png/12_  HD/-/ HD/ HD/ HD.png/12_ Viasat History/Viasat History HD/Viasat History/Viasat History/Viasat History.png/01_ Viasat History HD/-/Viasat History HD/Viasat History/Viasat History.png/01_ Discovery Channel/Discovery Channel HD/Discovery Channel/Discovery Channel/Discovery Channel.png/01_ Discovery Channel HD/-/Discovery Channel HD/Discovery Channel HD/Discovery Channel HD.png/01_ Discovery Science/Discovery Science HD/Discovery Science/Discovery Science/Discovery Science.png/01_ Discovery Science HD/-/Discovery Science HD/Discovery Science HD/Discovery Science HD.png/01_ Amedia Hit/Amedia Hit HD/Amedia Hit/Amedia Hit/Amedia Hit.png/11_   Amedia Hit HD/-/Amedia Hit HD/Amedia Hit HD/Amedia Hit HD.png/11_    /  HD/!/!/ .png/03_   HD/-/! HD/!/  HD.png/03_ Eurosport 1/Eurosport 1 HD/Eurosport 1/Eurosport 1/Eurosport 1.png/03_ Eurosport 1 HD/-/Eurosport 1 HD/Eurosport 1 HD/Eurosport 1 HD.png/03_ Paramount Comedy HD ()/-/Paramount Comedy HD/Paramount Comedy HD ()/Paramount Comedy HD ().png/11_   !  1/!  1 HD/!  1/!  1/!  1.png/03_ !  1 HD/-/!  1 HD/!  1 HD/!  1 HD.png/03_  1/ HD/ 1/ 1/ 1.png/13_-  HD/-/ HD/ HD/ HD.png/13_-</code> </pre> <br></div></div><br>  Copie o arquivo <b>favorites.txt</b> preparado para a <b>pasta / opt / etc / ttv</b> no roteador. <br><br>  Est√° tudo pronto.  Voc√™ pode pegar a lista de reprodu√ß√£o em <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">http://192.168.0.1:81/playlist.cgi</a> (substitua 192.168.0.1 pelo endere√ßo interno do seu roteador).  Basta especificar o link no gerenciador de IPTV e voc√™ sempre ter√° sua lista de reprodu√ß√£o atual.  O script playlist.cgi inicia o programa ttv.py, que, com base na lista de reprodu√ß√£o de torrent-TV atual (carregada no momento da chamada) e favorites.txt, gera uma nova lista de reprodu√ß√£o e fornece essa nova lista de reprodu√ß√£o. <br><br>  Na sa√≠da, se todos os canais estiverem presentes na lista de reprodu√ß√£o atual (caso contr√°rio, os canais ausentes ser√£o ignorados), voc√™ obter√° uma lista de reprodu√ß√£o t√£o elegante: <br><br><div class="spoiler">  <b class="spoiler_title">Lista de reprodu√ß√£o</b> <div class="spoiler_text"> <code>#EXTM3U url-tvg="https://teleguide.info/download/new3/xmltv.xml.gz" <br> #EXTINF:-1 tvg-name="Discovery Channel HD" tvg-logo="http://1ttv.org/uploads/SmWnYlOvkJn8GzttT2UY0vmo8PYfMg.png" group-title="",Discovery Channel HD <br> http://127.0.0.1:6878/ace/getstream?id=b6e518df35bdffc7ea8fdd05025cec851941a102&amp;.mp4 <br> #EXTINF:-1 tvg-name="Discovery Science HD" tvg-logo="http://1ttv.org/uploads/Yjj1p6idV0HGD56Wz7JX5IeKfD44vz.png" group-title="",Discovery Science HD <br> http://127.0.0.1:6878/ace/getstream?id=03fb28986da9168dd56ec6891253bcc496c13eb5&amp;.mp4 <br> #EXTINF:-1 tvg-name="Viasat History" tvg-logo="http://1ttv.org/uploads/MWGbB8wJp5Gm4vbPHl0ktohDDjMKdr.png" group-title="",Viasat History <br> http://127.0.0.1:6878/ace/getstream?id=c6d943e1aac03c179b3af9e99d97ac6779c947c7&amp;.mp4 <br> #EXTINF:-1 tvg-name="Eurosport 1 HD" tvg-logo="http://1ttv.org/uploads/DpFTzUEA3y67Z6ObTPF4xH0XLNRAZm.png" group-title="",Eurosport 1 HD <br> http://127.0.0.1:6878/ace/getstream?id=70bd87520c622ba7dd6e41aface77d5b2f437f87&amp;.mp4 <br> #EXTINF:-1 tvg-name="!" tvg-logo="http://1ttv.org/uploads/MXyy9Uud7oDuH8JqVisjsD0csgAHnQ.png" group-title="",! HD <br> http://127.0.0.1:6878/ace/getstream?id=9af7ac309216464e67092deb23d312a20c483674&amp;.mp4 <br> #EXTINF:-1 tvg-name="!  1 HD" tvg-logo="http://1ttv.org/uploads/9PM8M6cN21wQ3M5isVZgjNepzUI4Ry.png" group-title="",!  1 HD <br> http://127.0.0.1:6878/ace/getstream?id=b8a1e8458419b63ad1c3fa7bd79431d9625c322d&amp;.mp4 <br> #EXTINF:-1 tvg-name="Amedia Hit HD" tvg-logo="http://1ttv.org/uploads/HdnTfcZCgP7Odm1cOKNq9j4yJDRiFP.png" group-title="  ",Amedia Hit HD <br> http://127.0.0.1:6878/ace/getstream?id=ed6d00e9b6c50c95902b33c841302dd709b214da&amp;.mp4 <br> #EXTINF:-1 tvg-name="Amedia Premium HD" tvg-logo="http://1ttv.org/uploads/ornzQpk6WCW6xk0lyBhlwqH8u2QyU7.png" group-title="  ",Amedia Premium HD <br> http://127.0.0.1:6878/ace/getstream?id=c38a7580985fa85fa6e0a82c6fd7403e8e5c2b50&amp;.mp4 <br> #EXTINF:-1 tvg-name="Paramount Comedy HD ()" tvg-logo="http://1ttv.org/uploads/VowjbL265DoceAryIEtqNuPv3NDhFK.png" group-title="  ",Paramount Comedy HD <br> http://127.0.0.1:6878/ace/getstream?id=a9023adab9228b8aa7f1b508b553140b69cecd80&amp;.mp4 <br> #EXTINF:-1 tvg-name=" HD" tvg-logo="http://1ttv.org/uploads/m6ODa3HXr9QNAbSThJNvWeOIEYGp7q.png" group-title="", HD <br> http://127.0.0.1:6878/ace/getstream?id=4318416741f8d35f2de38e7100b89831e0ef0617&amp;.mp4 <br> #EXTINF:-1 tvg-name=" HD" tvg-logo="http://1ttv.org/uploads/ghvqmVpPWqn9x6POAm9UJBvXFzTrqN.png" group-title="-", HD <br> http://127.0.0.1:6878/ace/getstream?id=39b9b54a5031846e4936735ec62d157d5eca56e0&amp;.mp4 <br></code> <br></div></div><br><pre> <code class="bash hljs">: Discovery Channel HD Discovery Science HD Viasat History : Eurosport 1 HD ! HD !  1 HD   : Amedia Hit HD Amedia Premium HD Paramount Comedy HD :  HD -:  HD</code> </pre> <br>  Se necess√°rio, voc√™ pode alterar alguns par√¢metros no programa ttv.py: <br><br><pre> <code class="bash hljs">mcedit /opt/etc/ttv/ttv.py</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Op√ß√µes dispon√≠veis para altera√ß√£o</b> <div class="spoiler_text"> <code>PLAYLIST_LOAD_URL = "http://91.92.66.82/trash/ttv-list/as.all.tag.player.m3u" <br> TEMPLATE_SAVE_PATH = "/opt/etc/ttv/template.txt" <br> FAVORITES_LOAD_PATH = "/opt/etc/ttv/favorites.txt" <br> PLAYLIST_SAVE_PATH = "/opt/etc/ttv/playlist.m3u" <br> LOGOS_URL = "" <br> #LOGOS_URL = "https://raw.githubusercontent.com/Kyrie1965/ttv/master/logos/{}" <br> #LOGOS_URL = "{}" <br> STREAM_URL = "http://127.0.0.1:6878/ace/getstream?id={}&amp;.mp4" <br> #STREAM_URL = "acestream://{}" <br> EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz" <br> #EPG_LINKS = "https://teleguide.info/download/new3/xmltv.xml.gz,http://programtv.ru/xmltv.xml.gz,http://api.torrent-tv.ru/ttv.xmltv.xml.gz"</code> <br> </div></div><br>  <b>PLAYLIST_LOAD_URL</b> - link para baixar a lista de reprodu√ß√£o atual de torrent-TV. <br>  <b>TEMPLATE_SAVE_PATH</b> - caminho para salvar o modelo. <br>  <b>FAVORITES_LOAD_PATH</b> - caminho para carregar a lista de canais favoritos. <br>  <b>PLAYLIST_SAVE_PATH</b> - caminho para salvar uma nova lista de reprodu√ß√£o. <br>  <b>LOGOS_URL</b> - link com os logotipos dos canais.  Voc√™ pode usar a string vazia ("") para obter links da lista de reprodu√ß√£o original, enquanto os logotipos de favorites.txt ser√£o ignorados. <br>  <b>STREAM_URL</b> - visualize o link do stream na lista de reprodu√ß√£o final.  Pode ser um link direto para o Ace Stream ou um link para o Ace Stream Proxy.  Depende do gerenciador de IPTV que voc√™ est√° usando. <br>  <b>EPG_LINKS</b> - Uma lista de links EPG.  Todos os gerentes de IPTV s√£o diferentes.  H√° quem n√£o saiba como acessar o EPG na lista de reprodu√ß√£o.  Existem aqueles que suportam apenas uma fonte EPG de uma lista de reprodu√ß√£o.  H√° quem n√£o saiba combinar o EPG de diferentes fontes. <br><br>  Voc√™ estar√° interessado apenas em STREAM_URL, LOGOS_URL, EPG_LINKS, porque  a apar√™ncia da lista final depende deles.  Para eles, exemplos alternativos s√£o dados no arquivo. <br><br><h2>  Conclus√£o </h2><br>  Como resultado, voc√™ obt√©m a lista de reprodu√ß√£o de Torrent TV real (Super Wash) com sua pr√≥pria lista de canais, com seus pr√≥prios nomes de canal, com seus pr√≥prios grupos e sua classifica√ß√£o arbitr√°ria, seus pr√≥prios logotipos, com seu pr√≥prio mapeamento EPG, com a capacidade de excluir HD / SD duplicado, com classifica√ß√£o canais dentro dos grupos por HD / SD e nome.  Voc√™ s√≥ precisa configurar tudo uma vez e uma vez criar um arquivo dos seus canais favoritos.  E todos os dispositivos da sua rede dom√©stica receber√£o a lista de reprodu√ß√£o desejada por meio do link, fazendo ‚Äútudo √© bonito‚Äù imediatamente, sem configura√ß√µes adicionais. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/bndudCB3Nps" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  UPD  19/02/2019: <br><br><ul><li>  Adicionado suporte ao gzip ao carregar a lista de reprodu√ß√£o original ("superwash" agora fornece ttv.all.tag.player.m3u apenas no gzip).  Sua lista de reprodu√ß√£o criada ser√° fornecida, como antes, em texto / sem formata√ß√£o. </li><li>  Foi adicionada a capacidade de obter links para logotipos da lista de reprodu√ß√£o original. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt438842/">https://habr.com/ru/post/pt438842/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt438832/index.html">Como n√£o perder o or√ßamento para a produ√ß√£o em s√©rie de casos: 20 exemplos da pr√°tica do Bureau of Engineering Design</a></li>
<li><a href="../pt438834/index.html">O designer tem uma nova ideia? O que poderia ser mais f√°cil</a></li>
<li><a href="../pt438836/index.html">Monitoramento da temperatura do servidor fa√ßa voc√™ mesmo</a></li>
<li><a href="../pt438838/index.html">Eventos digitais em Moscou, de 4 a 10 de fevereiro</a></li>
<li><a href="../pt438840/index.html">Orgulho e paix√£o, a hist√≥ria de transformar um sonho em um projeto espacial</a></li>
<li><a href="../pt438850/index.html">Moscow JS 44 - an√∫ncio</a></li>
<li><a href="../pt438852/index.html">Novos gateways GSM da OpenVox</a></li>
<li><a href="../pt438854/index.html">Explica√ß√£o da natureza f√≠sica do fen√¥meno "Lift Force" sem usar a equa√ß√£o de Bernoulli</a></li>
<li><a href="../pt438856/index.html">Sagrado da vida</a></li>
<li><a href="../pt438858/index.html">Como usar a segmenta√ß√£o, segmenta√ß√£o e posicionamento (STP) no desenvolvimento de uma estrat√©gia de marketing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>