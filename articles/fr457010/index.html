<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßó üïπÔ∏è ü§Ω Pourquoi je n'utilise pas de composants Web üö∞ üë®üèΩ‚Äçü§ù‚Äçüë®üèª ü§ûüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="J'√©cris ceci principalement pour moi √† l'avenir, afin d'avoir un endroit o√π me r√©f√©rer lorsque quelqu'un me demande pourquoi je suis sceptique √† propo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pourquoi je n'utilise pas de composants Web</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/457010/"><p>  J'√©cris ceci principalement pour moi √† l'avenir, afin d'avoir un endroit o√π me r√©f√©rer lorsque quelqu'un me demande pourquoi je suis sceptique √† propos des composants Web et pourquoi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Svelte n'est</a> pas compil√© en composants Web par d√©faut.  (Cependant, il peut √™tre compil√© en composants Web, ainsi qu'int√©gr√© avec eux, comme en t√©moigne l'excellente cote sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Custom Elements Everywhere</a> ). </p><br><p>  Aucun des √©l√©ments suivants ne doit √™tre interpr√©t√© comme une critique du travail acharn√© effectu√© sur les composants Web.  J'ai peut-√™tre aussi fait des erreurs dans cette publication, auquel cas je serais heureux de modifier.  Je ne d√©clare pas non plus que vous ne devez pas utiliser de composants Web.  Ils ont leur propre port√©e.  J'explique juste pourquoi ils ne me conviennent pas. </p><a name="habracut"></a><br><h2 id="1-progressivnoe-uluchshenie">  1. Am√©lioration progressive </h2><br><p> Cela peut √™tre une croyance √† l'ancienne, mais je crois que les sites Web devraient fonctionner sans JavaScript autant que possible.  Les composants Web sans JS ne fonctionnent pas.  Ceci est normal pour les √©l√©ments intrins√®quement interactifs, tels que les √©l√©ments de formulaire personnalis√©s (&lt;cool-datepicker&gt;), mais ce n'est pas normal pour la navigation sur le site, par exemple.  Ou imaginez un composant <code>&lt;twitter-share&gt;</code> qui encapsule la logique de construction d'une URL √† <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">envoyer √† Twitter</a> .  Je pourrais l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">impl√©menter sur Svelte</a> , ce qui me rend le HTML suivant sur le serveur: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">target</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"_blank"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">noreferrer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"svelte-1jnfxx"</span></span></span><span class="hljs-tag">&gt;</span></span> Tweet this <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  En d'autres termes, l'habituel <code>&lt;a&gt;</code> dans toute sa splendeur disponible. </p><br><p>  Lorsque JavaScript est activ√©, une am√©lioration progressive se produit - au lieu d'ouvrir un nouvel onglet, une petite fen√™tre contextuelle s'ouvre.  Mais m√™me sans JS, le composant fonctionne toujours bien. </p><br><p>  Dans le cas d'un composant Web HTML, il ressemblerait √† ceci: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">twitter-share</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">url</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">via</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"..."</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br><p>  ... qui est inutile et impropre √† l'utilisation si JS est bloqu√©, ou pour une raison quelconque est cass√©, ou l'utilisateur a un ancien navigateur. </p><br><p>  De plus, <code>class="svelte-1jnfxx"</code> nous offre une encapsulation de style sans Shadow DOM.  Ce qui nous am√®ne au point suivant. </p><br><h2 id="2-css-v-eee-js">  2. CSS dans, euh ... JS </h2><br><p>  Si vous souhaitez utiliser le Shadow DOM pour encapsuler des styles, vous devrez ins√©rer votre CSS dans la <code>&lt;style&gt;</code> .  La seule fa√ßon pratique de le faire, si vous voulez √©viter de charger le contenu clignotant (FOUC), est d'incorporer CSS en tant que cha√Æne en JavaScript qui d√©finit le reste de la logique de votre composant Web. </p><br><p>  Cela contredit le conseil d'am√©lioration des performances qui se lit comme suit: "moins de JavaScript, s'il vous pla√Æt."  La communaut√© CSS-in-JS, en particulier, a √©t√© beaucoup critiqu√©e pour ne pas utiliser de fichiers CSS pour CSS, et nous voici √† nouveau avec des composants Web. </p><br><p>  √Ä l'avenir, nous pourrons utiliser des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">modules CSS</a> ainsi que des <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">feuilles de style</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">constructibles</a> pour r√©soudre ce probl√®me.  Nous aurons √©galement la possibilit√© de styliser les √©l√©ments internes du DOM Shadow via <code>::theme</code> et <code>::part</code> .  Mais ce n'√©tait pas sans probl√®mes ici. </p><br><h2 id="3-ustalost-platformy">  3. Fatigue de la plate-forme </h2><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); max-width: 100%; width: 500px; min-width: 220px; margin-top: 10px; margin-bottom: 10px;" data-tweet-id="1141404066704232448"></twitter-widget><script async="" src="https://platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><blockquote>  C'est une couronne douloureuse pour moi - j'ai annonc√© ces choses comme "The Future" pendant plusieurs ann√©es, mais afin de suivre le <em>pr√©sent,</em> nous avons d√ª remplir la plate-forme avec un tas de fonctionnalit√©s diff√©rentes, √©largissant l'√©cart entre les navigateurs. </blockquote><p>  Au moment de la r√©daction de cet article, sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">https://crbug.com</a> , l'outil de suivi des bogues de Chrome, 61 000 bogues ouverts qui montrent l'√©norme complexit√© de l'√©criture d'un navigateur moderne. </p><br><p>  Chaque fois que nous ajoutons une nouvelle fonctionnalit√© √† la plate-forme, nous augmentons la complexit√© - cr√©ons le potentiel de nouveaux bogues et rendons moins probable que Chrome aura un nouveau concurrent.  Cela cr√©e √©galement des difficult√©s pour les d√©veloppeurs qui sont encourag√©s √† apprendre ces nouvelles fonctionnalit√©s (dont certaines, telles que les importations HTML ou la version originale de la norme Custom Elements, n'ont pas pris racine en dehors de Google et sont maintenant en cours de suppression). </p><br><h2 id="4-polifily">  4. Polyphiles </h2><br><p>  Le fait que vous ayez besoin d'utiliser des polyfichiers pour prendre en charge des navigateurs plus anciens ne contribue pas au d√©veloppement de la situation.  Et cela <em>n'aide</em> pas du tout que les articles sur <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">les feuilles de style constructibles</a> √©crits dans Google (salut Jason!) Ne mentionnent pas que cette fonctionnalit√© n'est disponible que dans Chrome.  (Les trois auteurs de la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sp√©cification</a> travaillent pour Google. Webkit semble <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">avoir des doutes</a> sur certains aspects de cette norme). </p><br><h2 id="5-kompoziciya">  5. Composition </h2><br><p>  Il peut √™tre utile de contr√¥ler quand le contenu d'un slot doit √™tre rendu.  Imaginez que vous disposez d' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><code> &lt;html-include&gt;</code></a> pour charger du contenu suppl√©mentaire lorsqu'il est visible: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Toggle the section for more info:<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toggled-section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html-include</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"./more-info.html"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">toggled-section</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Tout d'un coup!  M√™me si nous n'avons pas encore ouvert la <code>toggled-section</code> <code>more-info.html</code> , mais le navigateur a d√©j√† demand√© <code>more-info.html</code> , ainsi que toutes les images et autres ressources qui s'y trouvent. </p><br><p>  En effet, le contenu des emplacements est rendu √† l' <em>avance dans les</em> composants Web.  En r√©alit√©, il s'av√®re que dans la plupart des cas, vous souhaitez rendre le contenu des slots paresseusement.  Svelte v2 a adopt√© un mod√®le de redning proactif pour r√©pondre aux normes Web, mais c'√©tait la principale source d'inconv√©nients - nous ne pouvions pas cr√©er quelque chose de similaire au React Router, par exemple.  Dans Svelte v3, nous nous sommes √©loign√©s du comportement des composants Web et n'avons jamais regard√© en arri√®re. </p><br><p>  Malheureusement, c'√©tait l'une des caract√©ristiques fondamentales des DOM.  Ce qui nous am√®ne √† ... </p><br><h2 id="6-putanica-mezhdu-svoystvami-i-atributami">  6. Confusion entre propri√©t√©s et attributs </h2><br><p>  Les propri√©t√©s et les attributs sont fondamentalement la m√™me chose, non? </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> button = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'button'</span></span>); button.hasAttribute(<span class="hljs-string"><span class="hljs-string">'disabled'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// false button.disabled = true; button.hasAttribute('disabled'); // true button.removeAttribute('disabled'); button.disabled; // false</span></span></code> </pre> <br><p>  Enfin, presque: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> button.disabled; <span class="hljs-comment"><span class="hljs-comment">// 'boolean' typeof button.getAttribute('disabled'); // 'object' button.disabled = true; typeof button.getAttribute('disabled'); // 'string'</span></span></code> </pre> <br><p>  Il y a des noms qui ne correspondent pas: </p><br><pre> <code class="javascript hljs">div = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); div.setAttribute(<span class="hljs-string"><span class="hljs-string">'class'</span></span>, <span class="hljs-string"><span class="hljs-string">'one'</span></span>); div.className; <span class="hljs-comment"><span class="hljs-comment">// 'one' div.className = 'two'; div.getAttribute('class'); // 'two'</span></span></code> </pre> <br><p>  ... et il y a ceux qui ne sont pas du tout convenus: </p><br><pre> <code class="javascript hljs">input = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'input'</span></span>); input.getAttribute(<span class="hljs-string"><span class="hljs-string">'value'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// null input.value = 'one'; input.getAttribute('value'); // null input.setAttribute('value', 'two'); input.value; // 'one'</span></span></code> </pre> <br><p>  Mais nous pourrions traiter ces bizarreries, l'interaction du format de cha√Æne (HTML) et du DOM.  Il existe un nombre fini de ces fonctionnalit√©s, elles sont document√©es, afin que nous puissions au moins en savoir plus, si nous avons le temps et la patience. </p><br><p>  Les composants Web font la diff√©rence.  Il n'y a plus de garantie sur la relation entre les propri√©t√©s et les attributs, et vous, en tant que d√©veloppeur de composants Web, devez prendre en charge les deux.  Ce qui nous am√®ne √† une telle chose: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyThing</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> get observedAttributes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'foo'</span></span>, <span class="hljs-string"><span class="hljs-string">'bar'</span></span>, <span class="hljs-string"><span class="hljs-string">'baz'</span></span>]; } get foo() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>); } set foo(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'foo'</span></span>, value); } get bar() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>); } set bar(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'bar'</span></span>, value); } get baz() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.hasAttribute(<span class="hljs-string"><span class="hljs-string">'baz'</span></span>); } set baz(value) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'baz'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.removeAttribute(<span class="hljs-string"><span class="hljs-string">'baz'</span></span>); } } attributeChangedCallback(name, oldValue, newValue) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (name === <span class="hljs-string"><span class="hljs-string">'foo'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ... } if (name === 'bar') { // ... } if (name === 'baz') { // ... } } }</span></span></code> </pre> <br><p>  Vous pouvez faire le contraire - les getters et setters <code>attributeChangedCallback</code> appellent.  Dans tous les cas, la commodit√© de travailler avec elle est tout simplement d√©primante.  Dans le m√™me temps, il existe un moyen simple et sans ambigu√Øt√© dans les frameworks de transf√©rer des donn√©es vers un composant. </p><br><h2 id="7-protekayuschiy-dizayn">  7. Conception qui fuit </h2><br><p>  Cet √©l√©ment est un peu vague, mais il me semble √©trange que <code>attributeChangedCallback</code> soit juste une m√©thode de classe.  Vous pouvez litt√©ralement faire ce qui suit: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> element = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelector(<span class="hljs-string"><span class="hljs-string">'my-thing'</span></span>); element.attributeChangedCallback(<span class="hljs-string"><span class="hljs-string">'w'</span></span>, <span class="hljs-string"><span class="hljs-string">'t'</span></span>, <span class="hljs-string"><span class="hljs-string">'f'</span></span>);</code> </pre> <br><p>  Les attributs n'ont pas chang√©, mais le code se comporte comme s'il s'√©tait produit.  Bien s√ªr, il y a toujours eu de nombreuses fa√ßons de nuire √† JavaScript, mais quand je vois un d√©tail d'impl√©mentation ressortir de cette fa√ßon, il me semble que quelque chose ne va pas dans la conception. </p><br><h2 id="8-plohoy-dom">  8. Mauvais DOM </h2><br><p>  Ok, nous avons d√©j√† √©tabli que le DOM est mauvais.  Mais il est toujours difficile d'exag√©rer √† quel point il est g√™nant de cr√©er des applications interactives. </p><br><p>  Il y a quelques mois, j'ai √©crit un article, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">¬´Write less code¬ª,</a> pour illustrer comment Svelte peut √©crire des composants plus efficacement que des frameworks comme React et Vue.  Il n'y avait aucune comparaison avec le DOM vanille, mais le devrait.  En bref, nous avons un composant simple <code>&lt;Adder a={1} b={2}/&gt;</code> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> a; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> b; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{a}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{b}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{a} + {b} = {a + b}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  C‚Äôest tout.  Maintenant, √©crivez la m√™me chose via le composant Web: </p><br><pre> <code class="javascript hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Adder</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HTMLElement</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.attachShadow({ <span class="hljs-attr"><span class="hljs-attr">mode</span></span>: <span class="hljs-string"><span class="hljs-string">'open'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shadowRoot.innerHTML = <span class="hljs-string"><span class="hljs-string">` &lt;input type="number"&gt; &lt;input type="number"&gt; &lt;p&gt;&lt;/p&gt; `</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shadowRoot.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'input'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.p = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shadowRoot.querySelector(<span class="hljs-string"><span class="hljs-string">'p'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.update(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">0</span></span>].addEventListener(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a = +e.target.value; }); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">1</span></span>].addEventListener(<span class="hljs-string"><span class="hljs-string">'input'</span></span>, e =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b = +e.target.value; }); } <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> get observedAttributes() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [<span class="hljs-string"><span class="hljs-string">'a'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>]; } get a() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'a'</span></span>); } set a(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'a'</span></span>, value); } get b() { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> +<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getAttribute(<span class="hljs-string"><span class="hljs-string">'b'</span></span>); } set b(value) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setAttribute(<span class="hljs-string"><span class="hljs-string">'b'</span></span>, value); } attributeChangedCallback() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.update(); } update() { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">0</span></span>].value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.a; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.inputs[<span class="hljs-number"><span class="hljs-number">1</span></span>].value = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.b; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.p.textContent = <span class="hljs-string"><span class="hljs-string">`</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.a}</span></span></span><span class="hljs-string"> + </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.b}</span></span></span><span class="hljs-string"> = </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${</span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.a + </span></span><span class="hljs-keyword"><span class="hljs-string"><span class="hljs-subst"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-string"><span class="hljs-subst">.b}</span></span></span><span class="hljs-string">`</span></span>; } } customElements.define(<span class="hljs-string"><span class="hljs-string">'my-adder'</span></span>, Adder);</code> </pre> <br><p>  Ouais. </p><br><p>  Notez que si nous modifions simultan√©ment <code>a</code> et <code>b</code> , nous aurons alors deux mises √† jour distinctes.  La plupart des frameworks ne souffrent pas de ce probl√®me. </p><br><h2 id="9-globalnye-imena">  9. Noms mondiaux </h2><br><p>  Je ne m'y attarderai pas tr√®s longtemps; il suffit de dire que les dangers de travailler dans un m√™me espace de noms partag√© sont connus et d√©mont√©s depuis longtemps. </p><br><h2 id="10-vse-eti-problemy-uzhe-resheny">  10. Tous ces probl√®mes ont d√©j√† √©t√© r√©solus. </h2><br><p>  La plus grande tristesse est que nous avons d√©j√† de bons mod√®les de composants.  Nous apprenons encore, mais la t√¢che de base - synchroniser la vue avec un certain √©tat en mettant √† jour le DOM dans un style orient√© composant - a d√©j√† √©t√© r√©solue il y a plusieurs ann√©es.  Et nous ajoutons toujours des fonctionnalit√©s √† la plateforme Web juste pour rattraper ce que nous avons d√©j√† dans les biblioth√®ques et les frameworks. </p><br><p>  Puisque nos ressources ne sont pas infinies, le temps pass√© sur une t√¢che signifie un manque d'attention √† une autre t√¢che.  Une √©nergie consid√©rable a √©t√© d√©pens√©e pour les composants Web, malgr√© l'indiff√©rence g√©n√©rale des d√©veloppeurs.  Que pourrions-nous r√©aliser en d√©pensant cette √©nergie pour autre chose? </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr457010/">https://habr.com/ru/post/fr457010/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr456992/index.html">Quelques conseils utiles pour ceux qui d√©cident d'apprendre l'anglais par eux-m√™mes</a></li>
<li><a href="../fr456996/index.html">Trois chevaux blancs</a></li>
<li><a href="../fr456998/index.html">L'histoire compl√®te d'Harold et de l'arbre de Bob Herbert dans Fallout</a></li>
<li><a href="../fr457004/index.html">M√©thodes simples pour optimiser les programmes Go</a></li>
<li><a href="../fr457008/index.html">Antiquit√©s: trois histoires de palmiers</a></li>
<li><a href="../fr457016/index.html">La m√©thodologie BEM comme exemple d'autocollants dans l'opencart</a></li>
<li><a href="../fr457018/index.html">Plus de complexit√©</a></li>
<li><a href="../fr457020/index.html">Une s√©lection de sources acad√©miques et scientifiques</a></li>
<li><a href="../fr457022/index.html">Relocalisation informatique. De Bangkok √† Sydney</a></li>
<li><a href="../fr457032/index.html">O√π vont voler les Am√©ricains: vers Mars ou vers la lune?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>