<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍳 👷🏻 🕺🏾 Une introduction rapide à Svelte du point de vue d'un développeur angulaire 🤵🏿 🤶🏽 🤳</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Svelte est un cadre d'interface utilisateur relativement nouveau développé par Rich Harris , qui est également l'auteur du constructeur Rollup. Très p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Une introduction rapide à Svelte du point de vue d'un développeur angulaire</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467091/"><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Svelte</a> est un cadre d'interface utilisateur relativement nouveau développé par <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rich Harris</a> , qui est également l'auteur du constructeur Rollup.  Très probablement, Svelte semblera complètement différent de ce que vous avez traité auparavant, mais c'est peut-être même bon.  Les deux caractéristiques les plus impressionnantes de ce cadre sont la rapidité et la simplicité.  Dans cet article, nous nous concentrerons sur le second. </p><br><p><img src="https://habrastorage.org/webt/cm/ew/bi/cmewbijh_gf8rjlvipourrlcw4w.jpeg"></p><br><p> Étant donné que mon expérience de développement principale est liée à Angular, il est naturel que j'essaie d'apprendre Svelte en copiant les approches qui me sont déjà familières.  Et c'est exactement de cela que parlera cet article: comment faire les mêmes choses dans Svelte que dans Angular. </p><a name="habracut"></a><br><p>  <em><strong>Remarque:</strong> Malgré le fait que dans certains cas, j'exprimerai ma préférence, l'article n'est pas une comparaison de cadres.</em>  <em>Il s'agit d'une introduction rapide et facile à Svelte pour les personnes qui utilisent déjà Angular comme cadre principal.</em> </p><br><p>  <em><strong>Spoiler d'avertissement:</strong> Svelte est amusant.</em> </p><br><h2 id="komponenty">  Composants </h2><br><p> Dans Svelte, chaque composant est associé au fichier où il est écrit.  Par exemple, le composant <code>Button</code> sera créé en nommant le fichier <code>Button.svelte</code> .  Bien sûr, nous faisons généralement la même chose dans Angular, mais avec nous, c'est juste une convention.  <em>(Dans Svelte, le nom du composant à importer peut également ne pas coïncider avec le nom du fichier - note du traducteur)</em> </p><br><p>  Les composants Svelte sont à fichier unique et se composent de 3 sections: <code>script</code> , <code>style</code> et modèle qui n'ont pas besoin d'être enveloppés dans une balise spéciale. </p><br><p>  Créons un composant très simple qui montre "Hello World". </p><br><p><img src="https://habrastorage.org/webt/uw/ti/6j/uwti6j1vjktqkpb-vdjsi4-kcpg.png" alt="hello_world" title="Bonjour tout le monde"></p><br><h3 id="importirovanie-komponentov">  Importer des composants </h3><br><p>  En général, cela revient à importer un fichier JS, mais avec quelques mises en garde: </p><br><ul><li>  vous devez spécifier explicitement l' <code>.svelte</code> fichier du composant <code>.svelte</code> </li><li>  les composants sont importés à l'intérieur de la <code>&lt;script&gt;</code> </li></ul><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Todo </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Todo.svelte'</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  À partir des extraits ci-dessus, il est évident que le nombre de lignes pour créer un composant dans Svelte est incroyablement petit.  Bien sûr, il y a des implicitités et des limites, mais en même temps, tout est assez simple pour s'y habituer rapidement. </p><br><h2 id="bazovyy-sintaksis">  Syntaxe de base </h2><br><h3 id="interpolyacii">  Interpolation </h3><br><p>  Les interpolations dans Svelte sont plus similaires à celles de React que de Vue ou Angular: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> someFunction = </span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> {...} </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>{ 3 + 5 }<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>{ someFunction() }<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>{ someFunction() ? 0 : 1 }<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  J'ai l'habitude d'utiliser des accolades doubles, donc je suis parfois scellé, mais je n'ai peut-être que ce problème. </p><br><h3 id="atributy">  Attributs </h3><br><p>  La transmission d'attributs aux composants est également assez simple.  Les guillemets sont facultatifs et toutes les expressions Javascript peuvent être utilisées: </p><br><pre> <code class="html hljs xml">//Svelte <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> isFormValid = </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">disabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{!isFormValid}</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h3 id="sobytiya">  Les événements </h3><br><p>  La syntaxe des gestionnaires d'événements est: <code>on:={}</code> . </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> onChange = </span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">e</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(e); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:input</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{onChange}</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Contrairement à Angular, nous n'avons pas besoin d'utiliser de parenthèses après le nom de la fonction pour l'appeler.  Si vous devez passer des arguments au gestionnaire, utilisez simplement la fonction anonyme: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:input</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{(e)</span></span></span><span class="hljs-tag"> =&gt;</span></span> onChange(e, 'a')} /&gt;</code> </pre> <br><p>  Mon avis sur la lisibilité d'un tel code: </p><br><ul><li>  Nous devons imprimer moins, car nous n'avons pas besoin de guillemets et de crochets - c'est bien quand même. </li><li>  Lisez plus fort.  J'ai toujours aimé l'approche angulaire plutôt que React, donc pour moi et Svelte c'est plus difficile à prendre.  Mais c'est juste mon habitude et mon opinion est quelque peu biaisée. </li></ul><br><h3 id="strukturnye-direktivy">  Directives structurelles </h3><br><p>  Contrairement aux directives structurées dans Vue et Angular, Svelte propose une syntaxe spéciale pour les boucles et les branches à l'intérieur des modèles: </p><br><pre> <code class="html hljs xml">{#if todos.length === 0}    {:else} {#each todos as todo} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">todo</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/each} {/if}</code> </pre> <br><p>  J'aime vraiment ça.  Aucun élément HTML supplémentaire n'est nécessaire, et en termes de lisibilité, cela semble incroyable.  Malheureusement, le symbole <code>#</code> dans la disposition du clavier britannique de mon Macbook est dans un endroit inaccessible, ce qui affecte négativement mon expérience avec ces structures. </p><br><h3 id="vhodnye-svoystva">  Propriétés d'entrée </h3><br><p>  La définition des propriétés pouvant être transmises à un composant (analogue à <code>@Input</code> dans Angular) est aussi simple que d'exporter une variable à partir d'un module JS à l'aide du mot-clé <code>export</code> .  Au début, cela peut être déroutant - mais écrivons un exemple et voyons à quel point c'est simple: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> todo = { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">done</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript"> }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> { todo.name } { todo.done ? '✓' : '✕' } <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><ul><li>  Comme vous pouvez le voir, nous avons initialisé la propriété <code>todo</code> avec la valeur: ce sera la valeur de la propriété par défaut, au cas où elle ne serait pas passée du composant parent </li></ul><br><p>  Créez maintenant un conteneur pour ce composant, qui lui transmettra des données: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Todo </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Todo.svelte'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> todos = [{ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">" Svelte"</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">done</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript"> }, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">" Vue"</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">done</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript"> }]; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> {#each todos as todo} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">todo</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{todo}</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag">&gt;</span></span> {/each}</code> </pre> <br><p>  Semblable aux champs d'un objet JS normal, <code>todo={todo}</code> peut être raccourci et réécrit comme suit: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">todo</span></span></span><span class="hljs-tag">}&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Au début, cela me semblait étrange, mais maintenant je pense que c'est génial. </p><br><h3 id="vyhodnye-svoystva">  Propriétés de sortie </h3><br><p>  Pour implémenter le comportement de la directive <code>@Output</code> , par exemple, lorsque le composant parent <code>@Output</code> des notifications de l'enfant, nous utiliserons la fonction <code>createEventDispatcher</code> disponible dans Svelte. </p><br><ul><li>  Importez la fonction <code>createEventDispatcher</code> et affectez sa valeur de retour à la variable de <code>dispatch</code> </li><li>  La fonction de <code>dispatch</code> a deux paramètres: le <em>nom de l'événement</em> et les <em>données</em> (qui tomberont dans le champ de <code>detail</code> de l'objet événement) </li><li>  Nous <code>markDone</code> <code>dispatch</code> à l'intérieur de la fonction <code>markDone</code> , qui est appelée par l'événement click ( <code>on:click</code> ) </li></ul><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { createEventDispatcher } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'svelte'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> todo; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> dispatch = createEventDispatcher(); </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">markDone</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ dispatch(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'done'</span></span></span><span class="javascript">, todo.name); } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> { todo.name } { todo.done ? '✓' : '✕' } <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{markDone}</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dans le composant parent, vous devez créer un gestionnaire pour l'événement <code>done</code> afin de pouvoir marquer les objets nécessaires dans le tableau des <code>todo</code> . </p><br><ul><li>  Créer la fonction <code>onDone</code> </li><li>  Nous affectons cette fonction au gestionnaire d'événements appelé dans le composant enfant, comme suit: <code>on:done={onDone}</code> </li></ul><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Todo </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Todo.svelte'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> todos = [{ </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">" Svelte"</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">done</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript"> }, { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">name</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">" Vue"</span></span></span><span class="javascript">, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">done</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">false</span></span></span><span class="javascript"> }]; </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">onDone</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">event</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> name = event.detail; todos = todos.map(</span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">todo</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> todo.name === name ? {...todo, </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">done</span></span></span><span class="javascript">: </span><span class="hljs-literal"><span class="javascript"><span class="hljs-literal">true</span></span></span><span class="javascript">} : todo; }); } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> {#each todos as todo} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">todo</span></span></span><span class="hljs-tag">} </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:done</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{onDone}</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag">&gt;</span></span> {/each}</code> </pre> <br><p>  <strong>Remarque:</strong> pour déclencher la détection d'un changement dans un objet, nous ne modifions pas l'objet lui-même.  Au lieu de cela, nous attribuons à la variable <code>todos</code> un nouveau tableau, où l'objet de la tâche souhaitée sera déjà changé en terminé. </p><br><p>  <strong>Par conséquent, Svelte est considéré comme vraiment <em>réactif</em> :</strong> avec l'affectation habituelle d'une valeur à une variable, la partie correspondante de la représentation changera également. </p><br><h3 id="ngmodel">  ngModel </h3><br><p>  Svelte a une syntaxe de <code>bind:&lt;&gt;={}</code> spéciale <code>bind:&lt;&gt;={}</code> pour lier des variables spécifiques aux attributs d'un composant et les synchroniser entre elles. </p><br><p>  En d'autres termes, il vous permet d'organiser une liaison de données bidirectionnelle: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> name = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> description = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">""</span></span></span><span class="javascript">; </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">submit</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">e</span></span></span></span><span class="javascript"><span class="hljs-function">) </span></span></span><span class="javascript">{ </span><span class="hljs-comment"><span class="javascript"><span class="hljs-comment">//    } </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:submit</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{submit}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{name}</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{description}</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2 id="reaktivnye-vyrazheniya">  Expressions réactives </h2><br><p>  Comme nous l'avons vu précédemment, Svelte répond à l'attribution de valeurs aux variables et redessine la vue.  Vous pouvez également utiliser des expressions réactives pour répondre aux modifications de la valeur d'une variable et mettre à jour la valeur d'une autre. </p><br><p>  Par exemple, créons une variable qui devrait nous montrer que dans le tableau <code>todos</code> toutes les tâches sont marquées comme terminées: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> allDone = todos.every(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ done }</span></span></span><span class="hljs-function">) =&gt;</span></span> done);</code> </pre> <br><p>  Toutefois, la vue ne sera pas redessinée lorsque le tableau est mis à jour, car la valeur de la variable <code>allDone</code> affectée qu'une seule fois.  Nous utiliserons une expression réactive, qui en même temps nous rappellera l'existence de "labels" en Javascript: </p><br><pre> <code class="javascript hljs">$: allDone = todos.every(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{ done }</span></span></span><span class="hljs-function">) =&gt;</span></span> done);</code> </pre> <br><p>  Ça a l'air très exotique.  S'il vous semble qu'il y a «trop de magie», je vous rappelle que les tags sont du <strong>Javascript valide</strong> . </p><br><p>  Une petite démo expliquant ce qui précède: <br><img src="https://habrastorage.org/webt/ar/n6/lp/arn6lpzksabtu0qd6jr5y_axvfa.gif" alt="démo" title="Démo"></p><br><h2 id="vnedrenie-soderzhimogo">  Injection de contenu </h2><br><p>  Pour incorporer du contenu, des emplacements sont également utilisés qui sont placés au bon endroit à l'intérieur du composant. </p><br><p>  Pour afficher simplement le contenu qui a été transféré à l'intérieur de l'élément composant, un élément <code>slot</code> spécial est utilisé: </p><br><pre> <code class="html hljs xml">// Button.svelte <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">let</span></span></span><span class="javascript"> type; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{type}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> // App.svelte <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Button </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Button.svelte'</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Dans ce cas, la ligne <code>""</code> prendra la place de l'élément <code>&lt;slot&gt;&lt;/slot&gt;</code> . <br>  Les emplacements nommés devront être nommés: </p><br><pre> <code class="html hljs xml">// Modal.svelte <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">'modal'</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-header"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"modal-body"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slot</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> // App.svelte <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> Modal </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./Modal.svelte'</span></span></span><span class="javascript">; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Modal</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">slot</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">slot</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"body"</span></span></span><span class="hljs-tag">&gt;</span></span>  <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Modal</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2 id="huki-zhiznennogo-cikla">  Crochets de cycle de vie </h2><br><p>  Svelte propose 4 crochets de cycle de vie qui sont importés du package <code>svelte</code> . </p><br><ul><li>  onMount - appelé lorsqu'un composant est monté dans le DOM </li><li>  beforeUpdate - appelé avant la mise à jour du composant </li><li>  afterUpdate - appelé après la mise à jour du composant </li><li>  onDestroy - appelé lorsqu'un composant est supprimé du DOM </li></ul><br><p>  La fonction <code>onMount</code> prend en paramètre une fonction de rappel qui sera appelée lorsque le composant sera placé dans le DOM.  Autrement dit, il est similaire à l' <code>ngOnInit</code> crochet <code>ngOnInit</code> . </p><br><p>  Si la fonction de rappel renvoie une autre fonction, elle sera appelée lorsque le composant sera supprimé du DOM. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { onMount, beforeUpdate, afterUpdate, onDestroy } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'svelte'</span></span></span><span class="javascript">; onMount(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">, todo)); afterUpdate(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">, todo)); beforeUpdate(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'  '</span></span></span><span class="javascript">, todo)); onDestroy(</span><span class="hljs-function"><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span><span class="javascript"><span class="hljs-function"> =&gt;</span></span></span><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">console</span></span></span><span class="javascript">.log(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript">, todo)); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Il est important de se rappeler que lors de l'appel à <code>onMount</code> toutes les propriétés qui y sont incluses doivent déjà être initialisées.  Autrement dit, dans le fragment ci-dessus, les <code>todo</code> doivent déjà exister. </p><br><h2 id="upravlenie-sostoyaniem">  Gestion de l'État </h2><br><p>  La gestion de votre état à Svelte est incroyablement simple, et peut-être que cette partie du cadre me sympathise plus que quiconque.  Vous pouvez oublier la verbosité du code lorsque vous utilisez Redux.  Par exemple, nous allons créer du stockage dans notre application pour le stockage et la gestion des tâches. </p><br><h3 id="zapisyvaemye-hranilischa">  Voûtes enregistrables </h3><br><p>  Vous devez d'abord importer l' <code>writable</code> de stockage <code>writable</code> partir du package <code>svelte/store</code> et lui indiquer la valeur initiale <code>initialState</code> </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> { writable } <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'svelte/store'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> initialState = [{ <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" Svelte"</span></span>, <span class="hljs-attr"><span class="hljs-attr">done</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" Vue"</span></span>, <span class="hljs-attr"><span class="hljs-attr">done</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }]; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todos = writable(initialState);</code> </pre> <br><p>  Habituellement, je mets du code similaire dans un fichier séparé comme <code>todos.store.js</code> et <code>todos.store.js</code> exporte la variable de stockage afin que le composant où je l'importe puisse fonctionner avec. </p><br><p>  De toute évidence, l'objet <code>todos</code> est devenu un référentiel et n'est plus un tableau.  Pour obtenir la valeur de stockage, nous allons utiliser un peu de magie dans Svelte: </p><br><ul><li>  En ajoutant le caractère <code>$</code> au nom de la variable de stockage, nous obtenons un accès direct à sa valeur! </li></ul><br><p>  Ainsi, nous remplaçons simplement dans le code toutes les références à la variable <code>todos</code> par <code>$todos</code> : </p><br><pre> <code class="html hljs xml">{#each $todos as todo} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">todo</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{todo}</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on:done</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{onDone}</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Todo</span></span></span><span class="hljs-tag">&gt;</span></span> {/each}</code> </pre> <br><h3 id="ustanovka-sostoyaniya">  Réglage de l'état </h3><br><p>  La nouvelle valeur du stockage enregistrable peut être spécifiée en appelant la méthode <code>set</code> , qui change impérativement l'état en fonction de la valeur transmise: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> todos = writable(initialState); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeAll</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ todos.set([]); }</code> </pre> <br><h3 id="obnovlenie-sostoyaniya">  Mise à jour du statut </h3><br><p>  Pour mettre à jour le stockage (dans notre cas, <code>todos</code> ), en fonction de son état actuel, vous devez appeler la méthode de <code>update</code> et lui passer une fonction de rappel qui renverra le nouvel état du stockage. </p><br><p>  Nous <code>onDone</code> fonction <code>onDone</code> que nous avons créée précédemment: </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDone</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> name = event.detail; todos.update(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">state</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> state.map(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">todo</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> todo.name === name ? {...todo, <span class="hljs-attr"><span class="hljs-attr">done</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>} : todo; }); }); }</code> </pre> <br><p>  Ici, j'ai utilisé un réducteur directement dans le composant, ce qui est une mauvaise pratique.  Nous le déplaçons dans un fichier avec notre référentiel et en exportons une fonction qui mettra simplement à jour l'état. </p><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// todos.store.js export function markTodoAsDone(name) { const updateFn = (state) =&gt; { return state.map((todo) =&gt; { return todo.name === name ? {...todo, done: true} : todo; }); }); todos.update(updateFn); } // App.svelte import { markTodoAsDone } from './todos.store'; function onDone(event) { const name = event.detail; markTodoAsDone(name); }</span></span></code> </pre> <br><h3 id="podpiska-na-izmenenie-sostoyaniya">  Abonnement au changement de statut </h3><br><p>  Afin de découvrir que la valeur dans le référentiel a changé, vous pouvez utiliser la méthode d' <code>subscribe</code> .  Gardez à l'esprit que le référentiel n'est pas un objet <code>observable</code> , mais fournit une interface similaire. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> subscription = todos.subscribe(<span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log); subscription(); <span class="hljs-comment"><span class="hljs-comment">//    </span></span></code> </pre> <br><h2 id="observables">  Observables </h2><br><p>  Si cette partie vous a causé le plus d'enthousiasme, alors je m'empresse de plaire qu'il n'y a pas si longtemps, le support RxJS a été ajouté à Svelte et l'Observable pour ECMAScript a été introduit. </p><br><p>  En tant que développeur Angular, je suis déjà habitué à travailler avec une programmation réactive, et l'absence d'un équivalent de <em>canal asynchrone</em> serait extrêmement gênant.  Mais Svelte m'a aussi surpris ici. </p><br><p>  Voyons un exemple de la façon dont ces outils fonctionnent ensemble: afficher une liste de référentiels sur Github, trouvée par le mot-clé <code>"Svelte"</code> . </p><br><p>  Vous pouvez copier le code ci-dessous et l'exécuter directement dans le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">REPL</a> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> rx </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"https://unpkg.com/rxjs/bundles/rxjs.umd.min.js"</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> { pluck, startWith } = rx.operators; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> ajax = rx.ajax.ajax; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> URL = </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">`https://api.github.com/search/repositories?q=Svelte`</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">const</span></span></span><span class="javascript"> repos$ = ajax(URL).pipe( pluck(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"response"</span></span></span><span class="javascript">), pluck(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"items"</span></span></span><span class="javascript">), startWith([]) ); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> {#each $repos$ as repo} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{repo.url}"</span></span></span><span class="hljs-tag">&gt;</span></span>{repo.name}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> {/each} <span class="hljs-comment"><span class="hljs-comment">&lt;!--   Angular: &lt;div *ngFor="let repo of (repos$ | async)&gt; &lt;a [attr.href]="{{ repo.url }}"&gt;{{ repo.name }}&lt;/a&gt; &lt;/div&gt; --&gt;</span></span></code> </pre><br><p>  Ajoutez simplement le symbole <code>$</code> au nom de la variable observable <code>repos$</code> et Svelte affichera automatiquement son contenu. </p><br><h2 id="moy-spisok-pozhelaniy-dlya-svelte">  Ma liste de souhaits pour Svelte </h2><br><h3 id="podderzhka-typescript">  Support typographique </h3><br><p>  En tant que passionné de Typescript, je ne peux m'empêcher de souhaiter la possibilité d'utiliser des types dans Svelte.  J'y suis tellement habitué que parfois je m'emballe et arrange des types dans mon code, que je dois ensuite supprimer.  J'espère vraiment que Svelte ajoutera bientôt le support pour Typescript.  Je pense que cet article sera sur la liste de souhaits de tous ceux qui souhaitent utiliser Svelte avec une expérience avec Angular. </p><br><h3 id="soglasheniya-i-gaydlayny">  Accords et directives </h3><br><p>  Le rendu de la représentation de n'importe quelle variable du bloc <code>&lt;script&gt;</code> est une fonctionnalité très puissante du framework, mais à mon avis, cela peut conduire à un encombrement de code.  J'espère que la communauté Svelte travaillera à travers un certain nombre de conventions et de directives pour aider les développeurs à écrire du code de composant propre et compréhensible. </p><br><h3 id="podderzhka-soobschestvom">  Soutien communautaire </h3><br><p>  Svelte est un projet grandiose qui, avec un effort accru de la communauté dans la rédaction de packages tiers, de manuels, d'articles de blog et plus encore, peut décoller et devenir un outil reconnu dans le monde étonnant du développement Frontend que nous avons aujourd'hui. </p><br><h2 id="v-zaklyuchenie">  En conclusion </h2><br><p>  Malgré le fait que je n'étais pas fan de la version précédente du framework, Svelte 3 m'a fait bonne impression.  C'est simple, petit, mais peut faire beaucoup.  Il est si différent de tout ce qui l'entoure qu'il m'a rappelé l'excitation que j'ai ressentie lorsque je suis passé de jQuery à Angular. </p><br><p>  Quel que soit le framework que vous utilisez actuellement, l'apprentissage de Svelte ne prendra probablement que quelques heures.  Une fois que vous aurez appris les bases et compris les différences avec ce que vous avez l'habitude d'écrire, travailler avec Svelte sera très facile. </p><br><p>  Dans la chaîne Telegram en langue russe <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">@sveltejs,</a> vous trouverez sûrement des développeurs qui ont de l'expérience avec divers cadres et sont prêts à partager leurs histoires, leurs pensées et leurs conseils concernant Svelte. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr467091/">https://habr.com/ru/post/fr467091/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr467081/index.html">Analyse de la coloration émotionnelle des critiques de Kinopoisk</a></li>
<li><a href="../fr467083/index.html">Comment l'étrange instruction popcount est utilisée dans les processeurs modernes</a></li>
<li><a href="../fr467085/index.html">La décompilation C, C ++ et DotNet sont les bases de l'inverse. Résolution des problèmes de marche arrière avec r0ot-mi. partie 1</a></li>
<li><a href="../fr467087/index.html">Comment j'ai préparé et réussi la certification Oracle Database SQL (1Z0-071)</a></li>
<li><a href="../fr467089/index.html">Exim patché - patchez à nouveau. Nouvelle exécution de commande à distance dans Exim 4.92 en une seule demande</a></li>
<li><a href="../fr467093/index.html">Espionner vos programmes avec Strace</a></li>
<li><a href="../fr467095/index.html">Plus simple qu'il n'y paraît. 20</a></li>
<li><a href="../fr467097/index.html">Utilisation de la bibliothèque de pagination avec Realm</a></li>
<li><a href="../fr467099/index.html">Hapi pour les petits</a></li>
<li><a href="../fr467101/index.html">L'épopée de la création d'un robot avec l'odeur d'un chien</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>