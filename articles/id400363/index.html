<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí∫ üõ∏ ‚òùüèΩ Menyelam dalam: dari CSS ke transistor üîú üåê ü•Å</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="70 tahun yang lalu, pada 16 Desember 1947, di laboratorium Bell Labs, John Bardin dan Walter Brattain, di bawah arahan William Shockley, menciptakan t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Menyelam dalam: dari CSS ke transistor</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/400363/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">70 tahun yang lalu, pada 16 Desember 1947, di laboratorium Bell Labs, John Bardin dan Walter Brattain, di bawah arahan William Shockley, menciptakan transistor bipolar operasional pertama. </font><font style="vertical-align: inherit;">Pada 23 Desember, Brattain mendemonstrasikan penguat transistor pertama kepada rekan-rekannya. </font><font style="vertical-align: inherit;">Karena itu, hari ini sering disebut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transistor Day</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br>
<br>
<img src="https://habrastorage.org/webt/6u/ty/ic/6utyic2_kroyqcpgvrcybtv7kjm.jpeg" alt="Bardin berdiri di sebelah kiri, Brattain berdiri di sebelah kanan, Shockley duduk"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tidak perlu berbicara tentang pentingnya acara ini. </font><font style="vertical-align: inherit;">Transistor dianggap sebagai salah satu penemuan paling penting dari abad ke-20, yang tanpanya komputer akan tetap bekerja pada lampu dan relay, dan menempati seluruh bangunan. </font><font style="vertical-align: inherit;">Shockley, Bardin, dan Brattain menerima Hadiah Nobel Fisika untuk pekerjaan mereka pada tahun 1956. </font><font style="vertical-align: inherit;">Selama bertahun-tahun, transistor telah miniatur menjadi hanya beberapa atom. </font><font style="vertical-align: inherit;">Setiap prosesor memiliki milyaran transistor, sehingga transistor dapat disebut perangkat paling masif yang dibuat oleh umat manusia. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi pekerjaan apa yang dilakukan transistor untuk kita? </font><font style="vertical-align: inherit;">Mari kita melakukan perjalanan mental: kita akan melacak jalur dari beberapa ujung jari tinggi ke ulang tahun kita - transistor. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Apa yang harus diambil sebagai titik awal? </font><font style="vertical-align: inherit;">Yah, setidaknya gambar tombol habrakat.</font></font><br>
<a name="habracut"></a><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">HTML dan CSS</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tombol terdiri dari piksel latar belakang, teks, dan batas. </font><font style="vertical-align: inherit;">Dalam kode, disetel oleh tag &lt;a&gt;, yang menerapkan aturan tata letak CSS. </font><font style="vertical-align: inherit;">Misalnya, aturan CSS diterapkan ke perbatasan ke sudut-sudut:</font></font><br>
<br>
<pre><code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">border-radius</span></span>: 3<span class="hljs-selector-tag"><span class="hljs-selector-tag">px</span></span>;</code></pre><img src="https://habrastorage.org/getpro/geektimes/post_images/b36/f41/354/b36f41354796b490cd910c72747da8af.png" alt="rajutan"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dengan demikian, batas terdiri dari empat segmen dan empat busur ("perempat" dari sebuah lingkaran). </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Browser</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Untuk penelitian, saya mengambil Firefox favorit saya. </font><font style="vertical-align: inherit;">Sebelum FF mulai menggambar tombol kita, dia perlu melakukan banyak pekerjaan untuk mem-parsing dan menghitung posisi elemen:</font></font><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unduh HTML melalui jaringan, parse, buat pohon DOM</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unduh melalui jaringan CSS, lakukan analisis leksikal, parse</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bind aturan berdasarkan prioritas dan pewarisan elemen halaman</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk semua node DOM yang terlihat, buat pohon area persegi panjangnya - bingkai. </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Untuk bingkai, hitung dimensi dan lokasi (lihat </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">video</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat layer dari bingkai dengan mempertimbangkan indeks-z dan tipe konten (&lt;canvas&gt;, SVG, &lt;video&gt;).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Buat daftar gambar secara berurutan: warna latar belakang, gambar latar belakang, batas, keturunan, garis besar.</font></font></li>
</ul><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambah. </font><font style="vertical-align: inherit;">bahan bacaan:</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Gecko:Overview</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">How Browsers Work: Behind the scenes of modern web browsers</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">   </a><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kami tidak akan membahas langkah-langkah ini secara rinci. </font><font style="vertical-align: inherit;">Setelah itu muncul gambar sebenarnya dari elemen-elemen yang diperlukan.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unduh sumbernya untuk mencari tahu apa yang terjadi di sana,</font></font></b><div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">  Mozilla Firefox</a>.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="></a>    Firefox  Mercurial  Visual Studio   C++.  VS        <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">symbols.mozilla.org</a>.      -  /layout/. <br>
<br>
 ,    ,     ,   Firefox.     c   ,       ,     ‚Äî         FF.<br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
File </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">nsCSSRenderingBorders.cpp</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bertanggung jawab untuk menggambar batas </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Dan fungsi umum menggambar batas disebut (siapa yang menyangka): </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DrawBorders ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Fungsi memilih metode rendering optimal untuk berbagai situasi. </font><font style="vertical-align: inherit;">Kami memiliki kasus yang relatif sederhana: ada batas-jari-jari, tetapi batas di semua sisi solid dan berwarna sama.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kami jika</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (allBordersSame &amp;&amp;<font></font>
      mCompositeColors[<span class="hljs-number"><span class="hljs-number">0</span></span>] == <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span> &amp;&amp;<font></font>
      mBorderStyles[<span class="hljs-number"><span class="hljs-number">0</span></span>] == NS_STYLE_BORDER_STYLE_SOLID &amp;&amp;<font></font>
      !mAvoidStroke &amp;&amp;<font></font>
      !mNoBorderRadius)<font></font>
  {<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// Relatively simple case.</span></span><font></font>
    gfxRect outerRect = ThebesRect(mOuterRect);<font></font>
    <span class="hljs-function"><span class="hljs-function">RoundedRect </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">borderInnerRect</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(outerRect, mBorderRadii)</span></span></span></span>;<font></font>
    borderInnerRect.Deflate(mBorderWidths[eSideTop],<font></font>
                            mBorderWidths[eSideBottom],<font></font>
                            mBorderWidths[eSideLeft],<font></font>
                            mBorderWidths[eSideRight]);<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// Instead of stroking we just use two paths: an inner and an outer.</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// This allows us to draw borders that we couldn't when stroking. For example,</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// borders with a border width &gt;= the border radius. (i.e. when there are</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// square corners on the inside)</span></span>
    <span class="hljs-comment"><span class="hljs-comment">//</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// Further, this approach can be more efficient because the backend</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// doesn't need to compute an offset curve to stroke the path. We know that</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// the rounded parts are elipses we can offset exactly and can just compute</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// a new cubic approximation.</span></span><font></font>
    RefPtr&lt;PathBuilder&gt; builder = mDrawTarget-&gt;CreatePathBuilder();<font></font>
    AppendRoundedRectToPath(builder, mOuterRect, mBorderRadii, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);<font></font>
    AppendRoundedRectToPath(builder, ToRect(borderInnerRect.rect), borderInnerRect.corners, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);<font></font>
    RefPtr&lt;Path&gt; path = builder-&gt;Finish();<font></font>
    mDrawTarget-&gt;Fill(path, color);<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>;<font></font>
  }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ada opsi yang jauh lebih kompleks, seperti docking di sudut-sudut dengan jari-jari perbatasan dari berbagai jenis garis putus-putus dan putus-putus, lihat </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DrawDashedOrDottedCorner ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Ada dalam kode sepenuhnya</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">komentar yang bagus</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs">    <span class="hljs-comment"><span class="hljs-comment">//      radius.width</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |&lt;-----------------&gt;|</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |                   |</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |             ___---+-------------</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |         __--     #|#       ###</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |       _-        ##|##     #####</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |     /           ##+##     ##+##</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |   /             # P #     #####</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |  |               #|#       ###</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// | |             __--+-------------</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// ||            _-    ^</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// ||          /       |</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |         /        first dot is filled</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |        |</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |       |</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |      |</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |      |</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |      |</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// +------+</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |##  ##|</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |##  ##|</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// |##  ##|</span></span>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi kembali ke if kita. </font><font style="vertical-align: inherit;">Dari komentar kita belajar bahwa dalam hal ini perbatasan ditarik menggunakan dua persegi panjang - internal dan eksternal, maka jalur yang dibuat (path) diisi dengan warna yang diinginkan.</font></font><br>
<br>
<pre><code class="cpp hljs">AppendRoundedRectToPath(builder, mOuterRect, mBorderRadii, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);<font></font>
AppendRoundedRectToPath(builder, ToRect(borderInnerRect.rect), borderInnerRect.corners, <span class="hljs-literal"><span class="hljs-literal">false</span></span>);<font></font>
RefPtr&lt;Path&gt; path = builder-&gt;Finish();<font></font>
mDrawTarget-&gt;Fill(path, color);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pergi ke </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AppendRoundedRectToPath ()</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> di gfx / 2d / PathHelpers.cpp.</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sekali lagi kita atur breakpoints</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/4cd/ab2/6a9/4cdab26a931ee33578231106b0bbf354.png" alt="a9430-clip-21kb"><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kita belajar dari komentar tentang fungsi bahwa sudut-sudut digambar di empat titik kontrol oleh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">kurva Bezier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Kurva Bezier sering digunakan dalam grafik komputer, termasuk untuk menggambar busur lingkaran dan elips. Ketika kita belajar lebih jauh dari komentar, ada banyak opsi untuk memilih titik kontrol untuk membuat kurva. Dalam hal ini, kita perlu bahwa titik 0 dan 3 milik sisi persegi panjang, titik 0, 1 dan C terletak pada satu garis lurus, titik 3, 2 dan C di sisi lainnya. Lihat gambar: </font></font><br>
<br>
<img src="https://habrastorage.org/files/9d2/6f9/e3a/9d26f9e3a86b42b09fe5fc35be1880a2.png" alt="perbatasan bezier perbatasan mozilla bulat"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tetap bagi kami untuk menghitung rasio panjang segmen 01 / 0C dan 32 / 3C. Di sini penulis menggunakan perkiraan perhitungan dan mendapatkan alpha konstanta ajaib:</font></font><br>
<br>
<pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Float alpha = Float(<span class="hljs-number"><span class="hljs-number">0.55191497064665766025</span></span>);</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sayangnya, artikel dengan algoritma pemilihan pos pemeriksaan yang dirujuk oleh komentar tidak ada dalam domain publik. </font><font style="vertical-align: inherit;">Tetapi secara umum, perlu dicatat bahwa dalam grafik komputer, algoritma sering menggunakan pendekatan untuk meningkatkan kinerja. </font><font style="vertical-align: inherit;">Misalnya, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritma Brezenham</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> memungkinkan Anda untuk menggambar segmen dan lingkaran bukan ‚Äúdi dahi‚Äù - dengan menyelesaikan persamaan y = f (x), tetapi dengan operasi integer yang lebih licik. </font><font style="vertical-align: inherit;">Hal yang sama dengan isi, dll. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Lebih jauh dalam siklus kita pergi dari sudut ke sudut, gunakan alpha untuk menghitung koordinat titik kontrol dan, akhirnya, memanggil fungsi menggambar garis perbatasan dan lengkungan sudut:</font></font><br>
<br>
<pre><code class="cpp hljs">aPathBuilder-&gt;LineTo(p0);<font></font>
aPathBuilder-&gt;BezierTo(p1, p2, p3); </code></pre><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambah. </font><font style="vertical-align: inherit;">bahan bacaan</font></font></b><div class="spoiler_text"><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> :       </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="> Javascript:     </a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Cairo vs. Skia</a><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode AppendRoundedRectToPath () lengkap</font></font></b><div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">
</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AppendRoundedRectToPath</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PathBuilder* aPathBuilder,
                        </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Rect&amp; aRect,
                        </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> RectCornerRadii&amp; aRadii,
                        </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> aDrawClockwise)</span></span></span><span class="hljs-function">
</span></span>{
  <span class="hljs-comment"><span class="hljs-comment">// For CW drawing, this looks like:</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//  ...******0**      1    C</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//              ****</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//                  ***    2</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//                     **</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//                       *</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//                        *</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//                         3</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//                         *</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//                         *</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// Where 0, 1, 2, 3 are the control points of the Bezier curve for</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// the corner, and C is the actual corner point.</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// At the start of the loop, the current point is assumed to be</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// the point adjacent to the top left corner on the top</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// horizontal.  Note that corner indices start at the top left and</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// continue clockwise, whereas in our loop i = 0 refers to the top</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// right corner.</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// When going CCW, the control points are swapped, and the first</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// corner that's drawn is the top left (along with the top segment).</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// There is considerable latitude in how one chooses the four</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// control points for a Bezier curve approximation to an ellipse.</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// For the overall path to be continuous and show no corner at the</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// endpoints of the arc, points 0 and 3 must be at the ends of the</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// straight segments of the rectangle; points 0, 1, and C must be</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// collinear; and points 3, 2, and C must also be collinear.  This</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// leaves only two free parameters: the ratio of the line segments</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// 01 and 0C, and the ratio of the line segments 32 and 3C.  See</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// the following papers for extensive discussion of how to choose</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// these ratios:</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//   Dokken, Tor, et al. "Good approximation of circles by</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//      curvature-continuous Bezier curves."  Computer-Aided</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//      Geometric Design 7(1990) 33--41.</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//   Goldapp, Michael. "Approximation of circular arcs by cubic</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//      polynomials." Computer-Aided Geometric Design 8(1991) 227--238.</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//   Maisonobe, Luc. "Drawing an elliptical arc using polylines,</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//      quadratic, or cubic Bezier curves."</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//      http://www.spaceroots.org/documents/ellipse/elliptical-arc.pdf</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// We follow the approach in section 2 of Goldapp (least-error,</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// Hermite-type approximation) and make both ratios equal to</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//          2   2 + n - sqrt(2n + 28)</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//  alpha = - * ---------------------</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//          3           n - 4</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// where n = 3( cbrt(sqrt(2)+1) - cbrt(sqrt(2)-1) ).</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// This is the result of Goldapp's equation (10b) when the angle</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// swept out by the arc is pi/2, and the parameter "a-bar" is the</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// expression given immediately below equation (21).</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// Using this value, the maximum radial error for a circle, as a</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// fraction of the radius, is on the order of 0.2 x 10^-3.</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// Neither Dokken nor Goldapp discusses error for a general</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// ellipse; Maisonobe does, but his choice of control points</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// follows different constraints, and Goldapp's expression for</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// 'alpha' gives much smaller radial error, even for very flat</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// ellipses, than Maisonobe's equivalent.</span></span>
  <span class="hljs-comment"><span class="hljs-comment">//</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// For the various corners and for each axis, the sign of this</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// constant changes, or it might be 0 -- it's multiplied by the</span></span>
  <span class="hljs-comment"><span class="hljs-comment">// appropriate multiplier from the list before using.</span></span><font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Float alpha = Float(<span class="hljs-number"><span class="hljs-number">0.55191497064665766025</span></span>);<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> {</span></span> Float a, b; } twoFloats;<font></font>
<font></font>
  twoFloats cwCornerMults[<span class="hljs-number"><span class="hljs-number">4</span></span>] = { { <span class="hljs-number"><span class="hljs-number">-1</span></span>,  <span class="hljs-number"><span class="hljs-number">0</span></span> },    <span class="hljs-comment"><span class="hljs-comment">// cc == clockwise</span></span>
                                 {  <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span> },<font></font>
                                 { +<span class="hljs-number"><span class="hljs-number">1</span></span>,  <span class="hljs-number"><span class="hljs-number">0</span></span> },<font></font>
                                 {  <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> } };<font></font>
  twoFloats ccwCornerMults[<span class="hljs-number"><span class="hljs-number">4</span></span>] = { { +<span class="hljs-number"><span class="hljs-number">1</span></span>,  <span class="hljs-number"><span class="hljs-number">0</span></span> },   <span class="hljs-comment"><span class="hljs-comment">// ccw == counter-clockwise</span></span>
                                  {  <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">-1</span></span> },<font></font>
                                  { <span class="hljs-number"><span class="hljs-number">-1</span></span>,  <span class="hljs-number"><span class="hljs-number">0</span></span> },<font></font>
                                  {  <span class="hljs-number"><span class="hljs-number">0</span></span>, +<span class="hljs-number"><span class="hljs-number">1</span></span> } };<font></font>
<font></font>
  twoFloats *cornerMults = aDrawClockwise ? cwCornerMults : ccwCornerMults;<font></font>
<font></font>
  Point cornerCoords[] = { aRect.TopLeft(), aRect.TopRight(),<font></font>
                           aRect.BottomRight(), aRect.BottomLeft() };<font></font>
<font></font>
  Point pc, p0, p1, p2, p3;<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (aDrawClockwise) {<font></font>
    aPathBuilder-&gt;MoveTo(Point(aRect.X() + aRadii[RectCorner::TopLeft].width,<font></font>
                               aRect.Y()));<font></font>
  } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
    aPathBuilder-&gt;MoveTo(Point(aRect.X() + aRect.Width() - aRadii[RectCorner::TopRight].width,<font></font>
                               aRect.Y()));<font></font>
  }<font></font>
<font></font>
  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>; ++i) {
    <span class="hljs-comment"><span class="hljs-comment">// the corner index -- either 1 2 3 0 (cw) or 0 3 2 1 (ccw)</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> c = aDrawClockwise ? ((i+<span class="hljs-number"><span class="hljs-number">1</span></span>) % <span class="hljs-number"><span class="hljs-number">4</span></span>) : ((<span class="hljs-number"><span class="hljs-number">4</span></span>-i) % <span class="hljs-number"><span class="hljs-number">4</span></span>);<font></font>
<font></font>
    <span class="hljs-comment"><span class="hljs-comment">// i+2 and i+3 respectively.  These are used to index into the corner</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// multiplier table, and were deduced by calculating out the long form</span></span>
    <span class="hljs-comment"><span class="hljs-comment">// of each corner and finding a pattern in the signs and values.</span></span>
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i2 = (i+<span class="hljs-number"><span class="hljs-number">2</span></span>) % <span class="hljs-number"><span class="hljs-number">4</span></span>;
    <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i3 = (i+<span class="hljs-number"><span class="hljs-number">3</span></span>) % <span class="hljs-number"><span class="hljs-number">4</span></span>;<font></font>
<font></font>
    pc = cornerCoords[c];<font></font>
<font></font>
    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (aRadii[c].width &gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span> &amp;&amp; aRadii[c].height &gt; <span class="hljs-number"><span class="hljs-number">0.0</span></span>) {<font></font>
      p0.x = pc.x + cornerMults[i].a * aRadii[c].width;<font></font>
      p0.y = pc.y + cornerMults[i].b * aRadii[c].height;<font></font>
<font></font>
      p3.x = pc.x + cornerMults[i3].a * aRadii[c].width;<font></font>
      p3.y = pc.y + cornerMults[i3].b * aRadii[c].height;<font></font>
<font></font>
      p1.x = p0.x + alpha * cornerMults[i2].a * aRadii[c].width;<font></font>
      p1.y = p0.y + alpha * cornerMults[i2].b * aRadii[c].height;<font></font>
<font></font>
      p2.x = p3.x - alpha * cornerMults[i3].a * aRadii[c].width;<font></font>
      p2.y = p3.y - alpha * cornerMults[i3].b * aRadii[c].height;<font></font>
<font></font>
      aPathBuilder-&gt;LineTo(p0);<font></font>
      aPathBuilder-&gt;BezierTo(p1, p2, p3);<font></font>
    } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> {<font></font>
      aPathBuilder-&gt;LineTo(pc);<font></font>
    }<font></font>
  }<font></font>
<font></font>
  aPathBuilder-&gt;Close();<font></font>
}<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Tapi kemudian itu semua tergantung pada backend dari grafik 2D yang digunakan Mozilla. </font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mesin grafis</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Gecko menggunakan pustaka Moz2D platform-independen, yang pada gilirannya dapat menggunakan salah satu backend: Kairo, Skia, Direct2D, Quartz dan NV Path. </font><font style="vertical-align: inherit;">Misalnya, Direct2D, Kairo, Skia tersedia untuk Windows. </font><font style="vertical-align: inherit;">Skia juga merupakan backend Chromium. </font><font style="vertical-align: inherit;">Anda dapat mengubah backend di about: config. </font><font style="vertical-align: inherit;">Backend, pada gilirannya, dapat membaca semua yang ada di CPU, atau mereka dapat menggunakan akselerasi perangkat keras GPU sampai batas tertentu. </font><font style="vertical-align: inherit;">Sebagai contoh, Skia memiliki backend OpenGL sendiri - Ganesh. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Kode Direct2D ditutup, jadi sebaiknya kita nyalakan Skia dan lihat apa fungsinya. </font><font style="vertical-align: inherit;">Fungsi untuk menggambar kurva kubik SkPath :: cubicTo disebut. </font><font style="vertical-align: inherit;">Untuk membuat kurva, kurva ini dibagi oleh </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">algoritma de Castelljo</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menjadi sejumlah segmen lurus, yang sebenarnya digambar (lihat core / SkGeometry.cpp).</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tambah. </font><font style="vertical-align: inherit;">bahan bacaan</font></font></b><div class="spoiler_text"><a href=""> skia/src/core/SkGeometry.cpp</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Adaptive Subdivision of Bezier Curves<br>
</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Performance Of B√©zier Curves Rendering In Web Browsers</a><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Software vs. GPU rasterization in Chromium</a><br>
</div></div><br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kode mesin</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sejujurnya, saya tidak berhasil sepenuhnya memahami internal Skia, jadi saya mengambil langkah mundur - ke AppendRoundedRectToPath (), di mana semua operasi dilakukan pada bilangan bulat - yang mana bisa lebih mudah? </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Setelah membuka kode yang dibongkar, kita harus menemukan operasi penambahan di dalamnya.</font></font><br>
<br>
<pre><code class="hljs powershell">...
<span class="hljs-number"><span class="hljs-number">142</span></span>B1863 <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>                add         byte ptr [<span class="hljs-type"><span class="hljs-type">eax</span></span>],al  
<span class="hljs-number"><span class="hljs-number">142</span></span>B1865 <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">8</span></span>D <span class="hljs-number"><span class="hljs-number">43</span></span> FF <span class="hljs-number"><span class="hljs-number">0</span></span>F <span class="hljs-number"><span class="hljs-number">84</span></span>    add         byte ptr [<span class="hljs-type"><span class="hljs-type">ebp</span></span>-<span class="hljs-number"><span class="hljs-number">7</span></span><span class="hljs-type"><span class="hljs-type">BF000BDh</span></span>],cl  
<span class="hljs-number"><span class="hljs-number">142</span></span>B186B <span class="hljs-number"><span class="hljs-number">67</span></span> <span class="hljs-number"><span class="hljs-number">01</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>             add         dword ptr [<span class="hljs-type"><span class="hljs-type">bx</span></span>+<span class="hljs-type"><span class="hljs-type">si</span></span>],eax  
<span class="hljs-number"><span class="hljs-number">142</span></span>B186E <span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">99</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>F <span class="hljs-number"><span class="hljs-number">57</span></span> C9 F7    add         byte ptr [<span class="hljs-type"><span class="hljs-type">ecx</span></span>-<span class="hljs-number"><span class="hljs-number">836</span></span><span class="hljs-type"><span class="hljs-type">A8F1h</span></span>],bl  
<span class="hljs-number"><span class="hljs-number">142</span></span>B1874 F9                   stc  
<span class="hljs-number"><span class="hljs-number">142</span></span>B1875 <span class="hljs-number"><span class="hljs-number">8</span></span>B C3                mov         eax,ebx  
<span class="hljs-number"><span class="hljs-number">142</span></span>B1877 <span class="hljs-number"><span class="hljs-number">8</span></span>B CA                mov         ecx,edx  
<span class="hljs-number"><span class="hljs-number">142</span></span>B1879 <span class="hljs-number"><span class="hljs-number">99</span></span>                   cdq  
<span class="hljs-number"><span class="hljs-number">142</span></span>B187A F7 <span class="hljs-number"><span class="hljs-number">7</span></span>C <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span>          idiv        eax,dword ptr [<span class="hljs-type"><span class="hljs-type">esp</span></span>+<span class="hljs-number"><span class="hljs-number">28</span></span><span class="hljs-type"><span class="hljs-type">h</span></span>]  <font></font>
...<font></font>
</code></pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ya! Bahkan seseorang yang jauh dari ASM seperti saya dapat dengan mudah menebak bahwa operasi ADD bertanggung jawab untuk penambahan. Ambil operasi pertama: </font></font><br>
<br>
<code>142B1863 00 00 add byte ptr [eax],al </code><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0x142B1863 - alamat di RAM </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
0x00 - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">opcode</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - kode instruksi prosesor. Mozilla ini dikompilasi di bawah x86, dan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">membuka tabel instruksi x86</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , kita akan melihat bahwa kode 00 berarti operasi penambahan 8-bit dengan ADD mnemonics. Operan pertama dapat berupa register atau sel memori akses acak, yang kedua dapat berupa register. Operan pertama ditambahkan ke yang kedua, hasilnya ditulis ke yang pertama. Saya akan menjelaskan, untuk jaga-jaga, bahwa register adalah memori ultrafast RAM di dalam prosesor, misalnya, untuk menyimpan hasil perhitungan menengah. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Byte kedua juga 0x00 dan disebut </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">MOD-REG-R / M</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bitnya menentukan operan dan metode pengalamatan. </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/09d/264/86f/09d26486fdeabed7c7d258cadfea7cc3.png"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
MOD = 00b dalam kombinasi dengan R / M = 000b berarti bahwa </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pengalamatan tidak langsung digunakan</font></font></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
REG = 000b berarti bahwa register AL digunakan (8-bit yang lebih rendah dari register EAX) </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
[eax] - menunjukkan bahwa penambahan dibuat dengan sel RAM, yang alamatnya ada di register EAX.Bagaimana </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
prosesor memproses perintah ADD?</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Berdasarkan uraian mikroarsitektur </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skylake</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font><font style="vertical-align: inherit;">saya menyusun daftar langkah (yang sangat disederhanakan):</font></font><br>
<br>
<ol>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instruksi X86 diambil dari cache instruksi L1 32KB menjadi buffer precoding 16-byte</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Perintah yang sudah dikodekan diatur dalam Instruksi Antrian (berukuran 2x25) dan masuk ke dalam decoder</font></font></li>
<li>  x86   1-4   (¬µOPs).  ADD  1 ¬µOP  ALU (- )  2 ¬µOP  AGU (  ) (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">.</a>,    ).           86      .</li>
<li>   Allocation Queue (IDQ).    ,   Loop Stream Detector ‚Äî     .</li>
<li> :     ,      .              .   .</li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mikrooperasi pergi ke manajer Penjadwal Bersatu, yang memutuskan pada titik apa dan di mana pelabuhan untuk mengirim operasi untuk dieksekusi di luar urutan penerimaan. </font><font style="vertical-align: inherit;">Di belakang setiap port adalah aktuator. </font><font style="vertical-align: inherit;">Operasi mikro kami akan menuju ke ALU dan AGU.</font></font></li>
</ol><br>
<img src="https://habrastorage.org/webt/xs/is/ij/xsisijruqtk6obopjmtkgx-fm7o.png"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inti dari SkyLake. </font><font style="vertical-align: inherit;">Gambar dari </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">en.wikichip.org</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Saya ulangi, ini adalah deskripsi saya yang sangat sederhana dan tidak berpura-pura akurat dan lengkap. </font><font style="vertical-align: inherit;">Untuk referensi lebih lanjut, saya sarankan membaca posting </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Journey Through the Processor Processor Processor</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> dan artikel </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Processors dari Intel Core i7 Family</font></font></a><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ALU</font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sekarang akan menarik untuk mengetahui apa yang terjadi di ALU: bagaimana angka-angkanya ditambahkan? Sayangnya, informasi tentang implementasi spesifik arsitektur mikro dan ALU adalah rahasia dagang Intel, jadi kami beralih ke teori nanti. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Perangkat untuk menambahkan dua bit biner (mis. Bit) disebut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">adder</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Outputnya adalah jumlah dan jumlah bit. </font></font><br>
<br>
<img src="https://habrastorage.org/webt/un/ic/bx/unicbxzbhpwhf79hla4ssznt9rw.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sumber: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Sejak dalam kehidupan nyata, kita perlu menambahkan angka yang terdiri dari beberapa digit, penambah juga harus menerima bit carry dari digit sebelumnya sebagai input. Adder semacam itu disebut </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">penuh</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/webt/so/vw/jl/sovwjlxnsewbnpv5grlt8ii29_c.gif"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Sumber: </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wikipedia</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Seperti dapat dilihat dari gambar, penambah terdiri dari elemen logika: XOR, AND, OR. Dan setiap elemen logis</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dapat diimplementasikan</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> menggunakan beberapa transistor. Atau bahkan </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">estafet</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/355/ccc/357/355ccc357f77c624fc089e5513679985.jpg" alt="Mattausch, Desain CMOS, H20 / 6/6"><br>
<i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Contoh penerapan penambah penuh pada </font><font style="vertical-align: inherit;">transistor </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMOS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sumber</font></font></a></i><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
Jadi kita sampai ke transistor! Meskipun, tentu saja, tidak hanya ALU bekerja pada transistor, tetapi juga unit prosesor lainnya, tetapi sebagian besar transistor digunakan dalam cache sebagai selnya. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Pada kenyataannya, sirkuit adder di prosesor kami dapat dibangun secara berbeda dan jauh lebih rumit. Sebagai contoh, sudah Intel 8008 45 tahun yang lalu mampu menghitung semua carry bit di muka untuk melakukan penambahan secara paralel (yang disebut adder dengan carry paralel). Siapa yang peduli, baca posting </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;">blog yang</font></a><font style="vertical-align: inherit;"> menarik tentang reverse engineering ALU Intel 8008 di </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ken Shirriff. </font><font style="vertical-align: inherit;">Yaitu </font><font style="vertical-align: inherit;">berbagai optimasi digunakan: misalnya, perkalian juga </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bermanfaat untuk</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> tidak dilakukan "langsung".</font></font><br>
<br>
<h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kesimpulan: apa yang kita pelajari?</font></font></h3><br>
<ul>
<li><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ini rumit</font></font></i></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Jelas ditunjukkan: untuk memecahkan masalah kompleksitas yang berlebihan, insinyur menggunakan pemisahan sistem yang kompleks menjadi level (lapisan).</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arsitektur bertingkat memberikan portabilitas: misalnya, Firefox dapat berjalan di berbagai sistem operasi dan pada perangkat keras yang berbeda.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Interaksi antar level disebabkan oleh keterbukaan spesifikasi untuk antarmuka, layanan, dan format data, misalnya HTML dan CSS, C ++, seperangkat perintah x86, dll.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pahlawan kita saat ini bekerja di bagian paling bawah - sebuah </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">transistor</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS </font><font style="vertical-align: inherit;">Saya seorang amatir (pengembang web), dan saya tahu arsitektur C ++, ASM, BT - dari kursus institut, saya bisa mengacaukan sesuatu. </font><font style="vertical-align: inherit;">Silakan kirim komentar.</font></font></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id400363/">https://habr.com/ru/post/id400363/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id400351/index.html">KFC Smart Restaurant di China Menebak Preferensi Pengunjung berdasarkan Wajah</a></li>
<li><a href="../id400355/index.html">Amazon crowdsourcing: bagaimana setengah juta orang mendapatkan uang receh untuk pelatihan AI</a></li>
<li><a href="../id400357/index.html">Google menunjukkan pola amal tiga manfaat</a></li>
<li><a href="../id400359/index.html">Propriosepsi untuk non-spesialis. Bagian 3. Dinamis duduk di kursi</a></li>
<li><a href="../id400361/index.html">Foreve Elon 2016/2017 (Malam Tahun Baru online)</a></li>
<li><a href="../id400365/index.html">Apa yang menjanjikan pengguna VKontakte pada tahun 2017</a></li>
<li><a href="../id400367/index.html">Apa yang harus dilakukan pada akhir pekan: interkom remote control, Nextion remapping yang tanpa anggaran, pertikaian dengan Onlaym</a></li>
<li><a href="../id400371/index.html">2017 bukan hanya ...</a></li>
<li><a href="../id400377/index.html">Ikhtisar materi 3D saat ini</a></li>
<li><a href="../id400379/index.html">Bagaimana kami mengatur pencarian di Telegram, dan apa yang terjadi. UPD: kami menyimpulkan hasil kompetisi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>