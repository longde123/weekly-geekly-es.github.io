<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ฉ๐ผโ๐ซ ๐จ๐ฝโ๐ ๐จ๐ฝโ๐ ููู ูุนูู ุงูุชูููู ูู .NET Core ๐คท๐พ ๐จ๐ฟโ๐จ ๐บ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุฏุนููุง ูุชููู ุนู ุงูุญุฏูุซ ุนู DDD ูุงูุชูููุฑ ููุชุฑุฉ ูู ุงูููุช. ุฃูุชุฑุญ ุงูุชุญุฏุซ ุนู ุจุณูุทุฉ ุ ุญูู ุชูุธูู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู. 


 ุจุนุฏ ุฃู ูุฑุฑุช ุฃูุง ูุฒููุงุฆู ุงูุชุจุฏูู ุฅูู .NET ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ููู ูุนูู ุงูุชูููู ูู .NET Core</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/453416/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุชููู ุนู ุงูุญุฏูุซ ุนู DDD ูุงูุชูููุฑ ููุชุฑุฉ ูู ุงูููุช.  ุฃูุชุฑุญ ุงูุชุญุฏุซ ุนู ุจุณูุทุฉ ุ ุญูู ุชูุธูู ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู. </p><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฃู ูุฑุฑุช ุฃูุง ูุฒููุงุฆู ุงูุชุจุฏูู ุฅูู .NET Core ุ ูุดุฃ ุณุคุงู ุญูู ููููุฉ ุชูุธูู ูููุงุช ุงูุชูููู ุ ูููููุฉ ุฅุฌุฑุงุก ุงูุชุญูููุงุช ุ ุฅูุฎ ูู ุงูุจูุฆุฉ ุงูุฌุฏูุฏุฉ.  ุชู ุงูุนุซูุฑ ุนูู ุงูููุฏ ุงูุชุงูู ูู ุงูุนุฏูุฏ ูู ุงูุฃูุซูุฉ ุ ูุงุณุชุฎุฏูู ุงููุซูุฑ ุจูุฌุงุญ. </p><br><pre style=";text-align:right;direction:rtl"><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IConfiguration Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IHostingEnvironment Environment { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Startup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfiguration configuration, IHostingEnvironment environment</span></span></span><span class="hljs-function">)</span></span> {   Environment = environment;   Configuration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurationBuilder() .AddJsonFile(<span class="hljs-string"><span class="hljs-string">"appsettings.json"</span></span>) .AddJsonFile(<span class="hljs-string"><span class="hljs-string">$"appsettings.</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{Environment.EnvironmentName}</span></span></span><span class="hljs-string">.json"</span></span>) .Build(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุฏุนููุง ูุฑู ููู ูุนูู ุงูุชูููู ุ ููู ุฃู ุงูุญุงูุงุช ูุงุณุชุฎุฏุงู ูุฐุง ุงูููุฌ ุ ูุงูุชู ุชุซู ูู ูุทูุฑู .NET Core.  ุฃุทูุจ ุงููุท. </p><a name="habracut"></a><br><h2 id="kak-bylo-ranshe" style=";text-align:right;direction:rtl">  ููุง ูุงู ูู ูุจู </h2><br><p style=";text-align:right;direction:rtl">  ูุซู ุฃู ูุตุฉ ุ ูุฐุง ุงูููุงู ูู ุจุฏุงูุฉ.  ูุงุญุฏุฉ ูู ุงููุดููุงุช ุงูุฃููู ุจุนุฏ ุงูุชุจุฏูู ุฅูู ASP.NET Core ูู ุชุญููู ูููุงุช ุงูุชูููู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุฐูุฑ ููู ูุงู ูู ูุจู ูุน web.config</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/28/rh/tx/28rhtxxm6uw-67utmgjas0oh0ii.png"></p><br><p style=";text-align:right;direction:rtl">  ูุชููู ุงูุชูููู ูู ุนุฏุฉ ูููุงุช.  ูุงู ุงูููู ุงูุฑุฆูุณู ูู <i>web.config</i> ุ ููุฏ ุชู ุจุงููุนู ุชุทุจูู ุงูุชุญูููุงุช ( <em>web.Development.config</em> ุ ุฅูุฎ) ุนูู ุฐูู ุ ุงุนุชูุงุฏูุง ุนูู ุชูููู ุงูุชุฌููุน.  ูู ุงูููุช ููุณู ุ ุชู ุงุณุชุฎุฏุงู ุณูุงุช <em>xml</em> ุจูุดุงุท ููุจุญุซ ูู ูุณู ูุณุชูุฏ <em>xml ูุชุญูููู</em> . </p></div></div><br><p style=";text-align:right;direction:rtl">  ูููู ููุง ูุนูู ูู ASP.NET Core ุ <em>ุชู</em> ุงุณุชุจุฏุงู <em>ููู web.config</em> ุจู <em>appsettings.json</em> ููู ุชุนุฏ ููุงู ุขููุฉ ุงูุชุญููู ุงููุนุชุงุฏุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุงุฐุง ุชููู ููุง ุฌูุฌูุ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ุงูุจุญุซ ุนู "ุงูุชุญููู ุฅูู ASP.NET Core" ุนูู <em>google</em> ูุชุฌ ุนููุง ุงูููุฏ ุงูุชุงูู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IConfiguration Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IHostingEnvironment Environment { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Startup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfiguration configuration, IHostingEnvironment environment</span></span></span><span class="hljs-function">)</span></span> {  Environment = environment;  Configuration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurationBuilder() .AddJsonFile(<span class="hljs-string"><span class="hljs-string">"appsettings.json"</span></span>) .AddJsonFile(<span class="hljs-string"><span class="hljs-string">$"appsettings.</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{Environment.EnvironmentName}</span></span></span><span class="hljs-string">.json"</span></span>) .Build(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ูููุดุฆ ูุฆุฉ <em>ุจุฏุก ุงูุชุดุบูู</em> ุ ูููู ุจุฅูุดุงุก ูุงุฆู <em>ุชูููู</em> ุจุงุณุชุฎุฏุงู <em>ConfigurationBuilder</em> .  ูู ูุฐู ุงูุญุงูุฉ ุ ูุดูุฑ ุจูุถูุญ ุฅูู ูุตุงุฏุฑ ุงูุชูููู ุงูุชู ูุฑูุฏ ุงุณุชุฎุฏุงููุง. </p><br><p style=";text-align:right;direction:rtl">  ู ูุซู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IConfiguration Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IHostingEnvironment Environment { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Startup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfiguration configuration, IHostingEnvironment environment</span></span></span><span class="hljs-function">)</span></span> {  Environment = environment;  Configuration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurationBuilder() .AddJsonFile(<span class="hljs-string"><span class="hljs-string">$"appsettings.</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{Environment.EnvironmentName}</span></span></span><span class="hljs-string">.json"</span></span>) .Build(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงุนุชูุงุฏูุง ุนูู ูุชุบูุฑ ุงูุจูุฆุฉ ุ ูุชู ุชุญุฏูุฏ ูุตุฏุฑ ุงูุชูููู ูุงุญุฏ ุฃู ุขุฎุฑ. </p></div></div><br><p style=";text-align:right;direction:rtl">  ุบุงูุจูุง ูุง ุชูุฌุฏ ูุฐู ุงูุฅุฌุงุจุงุช ุนูู <abbr title="ุณุชุงููููุฑูููู">SO</abbr> ูุบูุฑูุง ูู ุงูููุงุฑุฏ ุงูุฃูู ุดุนุจูุฉ.  ููู ุงูุดุนูุฑ ูู ูุชุฑู.  ุฃููุง ูุฎุทุฆ.  ูุงุฐุง ูู ููุช ุฃุฑุบุจ ูู ุงุณุชุฎุฏุงู ูุชุบูุฑุงุช ุงูุจูุฆุฉ ุฃู ูุณูุทุงุช ุณุทุฑ ุงูุฃูุงูุฑ ูู ุงูุชููููุ  ููุงุฐุง ุฃุญุชุงุฌ ุฅูู ูุชุงุจุฉ ูุฐุง ุงูุฑูุฒ ูู ูู ูุดุฑูุนุ </p><br><p style=";text-align:right;direction:rtl">  ุจุญุซูุง ุนู ุงูุญูููุฉ ุ ุงุถุทุฑุฑุช ุฅูู ุงูุชุนูู ูู ุงูุชูุซูู ูุดูุฑุฉ ุงููุตุฏุฑ.  ูุฃุฑูุฏ ุฃู ุฃุดุงุฑู ุงููุนุฑูุฉ ุงูููุชุณุจุฉ ูู ูุฐุง ุงูููุงู. </p><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุฑู ููู ูุนูู ุงูุชูููู ูู. NET ุงูุฃุณุงุณูุฉ. </p><br><h2 id="konfiguraciya" style=";text-align:right;direction:rtl">  ุชุฑุชูุจ </h2><br><p style=";text-align:right;direction:rtl">  ูุชู ุชูุซูู ุงูุชูููู ูู .NET Core ุจูุงุณุทุฉ <em>ูุงุฆู</em> ูุงุฌูุฉ <em>IConfiguration</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IConfiguration</span></span> {  <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> key] { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }  <span class="hljs-function"><span class="hljs-function">IConfigurationSection </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetSection</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key</span></span></span><span class="hljs-function">)</span></span>;  <span class="hljs-function"><span class="hljs-function">IEnumerable&lt;IConfigurationSection&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetChildren</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;  <span class="hljs-function"><span class="hljs-function">IChangeToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetReloadToken</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; }</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุฑุณ <strong>[ุณูุณูุฉ ุงูููุชุงุญ]</strong> ุ ูุงูุฐู ูุณูุญ ุจุงูุญุตูู ุนูู ูููุฉ ูุนููุฉ ุงูุชูููู ุญุณุจ ุงูููุชุงุญ </li><li style=";text-align:right;direction:rtl">  <strong>ุฅุฑุฌุงุน GetSection (ููุชุงุญ ุงูุณูุณูุฉ)</strong> ูุณู ุงูุชูููู ุงูุฐู ูุชูุงูู ูุน ููุชุงุญ <em>ุงูููุชุงุญ</em> </li><li style=";text-align:right;direction:rtl">  ุฅุฑุฌุงุน <strong>GetChildren ()</strong> ูุฌููุนุฉ ูุฑุนูุฉ ูู ูุณู ุงูุชูููู ุงูุญุงูู </li><li style=";text-align:right;direction:rtl">  ุฅุฑุฌุงุน <strong>GetReloadToken ()</strong> ูุซูู <em>IChangeToken</em> ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูุชููู ุงูุฅุนูุงูุงุช ุนูุฏ ุชุบููุฑ ุงูุชูููู </li></ul><br><p style=";text-align:right;direction:rtl">  ุงูุชูููู ูู ูุฌููุนุฉ ูู ุฃุฒูุงุฌ ุงููููุฉ ุงูุฑุฆูุณูุฉ.  ุนูุฏ ุงููุฑุงุกุฉ ูู ูุตุฏุฑ ุงูุชูููู (ููู ุ ูุชุบูุฑุงุช ุงูุจูุฆุฉ) ุ ูุชู ุชูููู ุงูุจูุงูุงุช ุงููุฑููุฉ ุฅูู ุจููุฉ ูุณุทุญุฉ.  ุนูู ุณุจูู ุงููุซุงู ุ <em>json ูู</em> ูุงุฆู ูู ุงููููุฐุฌ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">{ "Settings": { "Key": "I am options" } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุชู ุชุฎููุถูุง ุฅูู ุทุฑููุฉ ุนุฑุถ ูุณุทุญุฉ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">Settings:Key = I am options</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ุ ุงูููุชุงุญ ูู <em>ุงูุฅุนุฏุงุฏุงุช: ููุชุงุญ</em> ุ ูุงููููุฉ ูู <em>ุฎูุงุฑุงุช ุฃูุง</em> . <br>  ูุชู ุงุณุชุฎุฏุงู ูููุฑู ุงูุชูููู ูููุก ุงูุชูููู. </p><br><h2 id="provaydery-konfiguracii" style=";text-align:right;direction:rtl">  ูุฒูุฏู ุงูุชูููู </h2><br><p style=";text-align:right;direction:rtl">  ูุงุฆู ุงููุงุฌูุฉ ูุณุคูู ุนู ูุฑุงุกุฉ ุงูุจูุงูุงุช ูู ูุตุฏุฑ ุงูุชูููู. <br>  <em>IConfigurationProvider</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IConfigurationProvider</span></span> {  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TryGet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">out</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span>;  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Set</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> key, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span>;  <span class="hljs-function"><span class="hljs-function">IChangeToken </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetReloadToken</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;  <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>;  <span class="hljs-function"><span class="hljs-function">IEnumerable&lt;</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function">&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetChildKeys</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IEnumerable&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; earlierKeys, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parentPath</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre> <br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ูุณูุญ TryGet (ููุชุงุญ ุงูุณูุณูุฉ ุ ูููุฉ ุงูุณูุณูุฉ ุงูุฎุงุฑุฌูุฉ)</strong> ุจุงูุญุตูู ุนูู ูููุฉ ูุนููุฉ ุงูุชูููู ุญุณุจ ุงูููุชุงุญ </li><li style=";text-align:right;direction:rtl">  <strong>ูุชู ุชุนููู (ููุชุงุญ ุงูุณูุณูุฉ ุ ูููุฉ ุงูุณูุณูุฉ)</strong> ูุชุนููู ูููุฉ ูุนููุฉ ุงูุชูููู </li><li style=";text-align:right;direction:rtl">  ุฅุฑุฌุงุน <strong>GetReloadToken ()</strong> ูุซูู <em>IChangeToken</em> ุงูุชู ูููู ุงุณุชุฎุฏุงููุง ูุชููู ุงูุฅุนูุงูุงุช ุนูุฏ ุชุบููุฑ ูุตุฏุฑ ุงูุชูููู </li><li style=";text-align:right;direction:rtl">  ุฃุณููุจ <strong>Load ()</strong> ุงููุณุคูู ุนู ูุฑุงุกุฉ ูุตุฏุฑ ุงูุชูููู </li><li style=";text-align:right;direction:rtl">  ูุชูุญ ูู <strong>GetChildKeys (IEnumerable &lt;string&gt; laterKeys ุ ุณูุณูุฉ parentPath)</strong> ุงูุญุตูู ุนูู ูุงุฆูุฉ ุจูุงูุฉ ุงูููุงุชูุญ ุงูุชู ูููุฑูุง ูููุฑ ุงูุชูููู ูุฐุง </li></ul><br><p style=";text-align:right;direction:rtl">  ุงููููุฑูู ุงูุชุงูููู ูุชุงุญูู ูู ุงูุตูุฏูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุณููุงู </li><li style=";text-align:right;direction:rtl">  ุฑุณุงุฆู ูุชุจูุง ูุฐุง ุงููุคูู </li><li style=";text-align:right;direction:rtl">  ุฃูุณ </li><li style=";text-align:right;direction:rtl">  ูุชุบูุฑุงุช ุงูุจูุฆุฉ </li><li style=";text-align:right;direction:rtl">  InMemory </li><li style=";text-align:right;direction:rtl">  ุฃุฒุฑู ุณูุงูู </li><li style=";text-align:right;direction:rtl">  ูุฒูุฏ ุงูุชูููู ุงููุฎุตุต </li></ul><br><p style=";text-align:right;direction:rtl">  ูุชู ูุจูู ุงูุงุชูุงููุงุช ุงูุชุงููุฉ ูุงุณุชุฎุฏุงู ูููุฑู ุงูุชูููู. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุชุชู ูุฑุงุกุฉ ูุตุงุฏุฑ ุงูุชูููู ุจุงูุชุฑุชูุจ ุงูุฐู ุชู ุชุญุฏูุฏูุง ุจู. </li><li style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ููุณ ุงูููุงุชูุญ ููุฌูุฏุฉ ูู ูุตุงุฏุฑ ุชูููู ูุฎุชููุฉ (ุงูููุงุฑูุฉ ููุณุช ุญุณุงุณุฉ ูุญุงูุฉ ุงูุฃุญุฑู) ุ ูุณูุชู ุงุณุชุฎุฏุงู ุงููููุฉ ุงูุชู ุชูุช ุฅุถุงูุชูุง ูู ุขุฎุฑ ุงูุฃูุฑ. </li></ol><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ุฃูุดุฃูุง <em>ูุซูููุง</em> ูุฎุงุฏู <em>ุงูููุจ</em> ุจุงุณุชุฎุฏุงู <em>CreateDefaultBuilder</em> ุ ูุณูุชู ุชูุตูู ูููุฑู ุงูุชูููู ุงูุชุงูู ุงูุชุฑุงุถููุง: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/pq/0l/5q/pq0l5qp3qultg9xhtg1kvpimj_y.png"></p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <strong>ChainedConfigurationProvider ูู</strong> ุฎูุงู ูุฐุง ุงููููุฑ ููููู ุงูุญุตูู ุนูู ุงูููู ูููุงุชูุญ ุงูุชูููู ุงูุชู ุชูุช ุฅุถุงูุชูุง ุจูุงุณุทุฉ ูููุฑู ุงูุชูููู ุงูุขุฎุฑูู </li><li style=";text-align:right;direction:rtl">  ูุณุชุฎุฏู <em>JsonConfigurationProvider</em> ูููุงุช <em>json</em> ููุตุฏุฑ ุงูุชูููู.  ููุง ุชุฑู ุ ุชุชู ุฅุถุงูุฉ ุซูุงุซุฉ ูููุฑูู ูู ูุฐุง ุงูููุน ุฅูู ูุงุฆูุฉ ุงููููุฑูู.  ุงูุฃูู ูุณุชุฎุฏู <em>appsettings.json</em> ููุตุฏุฑ ุ ูุงูุซุงูู <em>ูุณุชุฎุฏู appsettings. {Environment} .json</em> .  ุงูุซุงูุซ ููุฑุฃ ุงูุจูุงูุงุช ูู <em>secrets.json</em> .  ุฅุฐุง ููุช ุจุฅูุดุงุก ุงูุชุทุจูู ูู ุชูููู <em>Release</em> ุ ููู ูููู ุงููููุฑ ุงูุซุงูุซ ูุชุตูุงู ุ ูุฃูู ูุง ููุตู ุจุงุณุชุฎุฏุงู ุฃุณุฑุงุฑ ูู ุจูุฆุฉ <em>ุงูุฅูุชุงุฌ</em> </li><li style=";text-align:right;direction:rtl">  <strong>EnvironmentVariablesConfigurationProvider</strong> ุจุงุณุชุฑุฏุงุฏ ูุนููุงุช ุงูุชูููู ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ </li><li style=";text-align:right;direction:rtl">  <strong>CommandLineConfigurationProvider</strong> ูุณูุญ ุจุฅุถุงูุฉ ูุณูุทุงุช ุณุทุฑ ุงูุฃูุงูุฑ ุฅูู ุงูุชูููู </li></ul><br><p style=";text-align:right;direction:rtl">  ูุธุฑูุง ูุฃูู ูุชู ุชุฎุฒูู ุงูุชูููู ููุงููุณ ุ ููู ุงูุถุฑูุฑู ุถูุงู ุชูุฑุฏ ุงูููุงุชูุญ.  ุจุดูู ุงูุชุฑุงุถู ุ ูุฐุง ูุนูู ูุซู ูุฐุง. </p><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ูุฏู ูููุฑ <em>CommandLineConfigurationProvider</em> ุนูุตุฑ ูุน ููุชุงุญ ุงูููุชุงุญ ููุงู ูุฏู ูููุฑ <em>JsonConfigurationProvider</em> ุนูุตุฑ ูุน ููุชุงุญ ุงูููุชุงุญ ุ ุณูุชู ุงุณุชุจุฏุงู ุงูุนูุตุฑ ูู <em>JsonConfigurationProvider</em> ุจุงูุนูุตุฑ ูู <em>CommandLineConfigurationProvider</em> ูุฃูู ูุณุฌู ุฃุฎูุฑูุง ููู ุฃููููุฉ ุฃุนูู. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฃุฐูุฑ ูุซุงู ูู ุจุฏุงูุฉ ุงูููุงู</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IConfiguration Configuration { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IHostingEnvironment Environment { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Startup</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfiguration configuration, IHostingEnvironment environment</span></span></span><span class="hljs-function">)</span></span> {  Environment = environment;  Configuration = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurationBuilder() .AddJsonFile(<span class="hljs-string"><span class="hljs-string">"appsettings.json"</span></span>) .AddJsonFile(<span class="hljs-string"><span class="hljs-string">$"appsettings.</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{Environment.EnvironmentName}</span></span></span><span class="hljs-string">.json"</span></span>) .Build(); }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุง ูุญุชุงุฌ ุฅูู ุฅูุดุงุก <em>IConfiguration ุจุฃููุณูุง ูู</em> ุฃุฌู ุชุญููู ูููุงุช ุงูุชูููู ุ ุญูุซ ูุชู ุชูููู ูุฐุง ุงูุชุฑุงุถููุง.  ูุฐุง ุงูููุฌ ุถุฑูุฑู ุนูุฏูุง ูุฑูุฏ ุชุญุฏูุฏ ุนุฏุฏ ูุตุงุฏุฑ ุงูุชูููู. </p></div></div><br><h2 id="kastomnyy-provayder-konfiguracii" style=";text-align:right;direction:rtl">  ูุฒูุฏ ุงูุชูููู ุงููุฎุตุต </h2><br><p style=";text-align:right;direction:rtl">  ูู ุฃุฌู ูุชุงุจุฉ ูููุฑ ุงูุชูููู ุงูุฎุงุต ุจู ุ ุชุญุชุงุฌ ุฅูู ุชูููุฐ <em>ูุงุฌูุงุช IConfigurationProvider</em> ู <em>IConfigurationSource</em> .  <em>IConfigurationSource ูู</em> ูุงุฌูุฉ ุฌุฏูุฏุฉ ูู <em>ูุฃุฎุฐูุง</em> ูู ุงูุงุนุชุจุงุฑ ูู ูุฐู ุงูููุงูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IConfigurationSource</span></span> { <span class="hljs-function"><span class="hljs-function">IConfigurationProvider </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Build</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationBuilder builder</span></span></span><span class="hljs-function">)</span></span>; }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุชููู ุงููุงุฌูุฉ ูู ุทุฑููุฉ <em>Build</em> ูุงุญุฏุฉ ุชุฃุฎุฐ <em>IConfigurationBuilder</em> ููุนููุฉ ูุชููู ุจุฅุฑุฌุงุน ูุซูู ุฌุฏูุฏ ูู <em>IConfigurationProvider</em> . </p><br><p style=";text-align:right;direction:rtl">  ูุชูููุฐ ูููุฑู ุงูุชูููู ูุฏููุง ุ ุชุชููุฑ ุงููุตูู ุงููุฌุฑุฏุฉ <em>ConfigurationProvider</em> ู <em>FileConfigurationProvider</em> ููุง.  ูู ูุฐู ุงููุฆุงุช ุ ูุชู ุจุงููุนู ุชุทุจูู ุฃุณุงููุจ <em>TryGet</em> ู <em>Set</em> ู <em>GetReloadToken</em> ู <em>GetChildKeys</em> ููุง ูุฒุงู ูุชู ุชุทุจูู ุทุฑููุฉ <em>ุงูุชุญููู</em> ููุท. </p><br><p style=";text-align:right;direction:rtl">  ููููู ูุธุฑุฉ ุนูู ูุซุงู.  ูู ุงูุถุฑูุฑู ุชุทุจูู ูุฑุงุกุฉ ุงูุชูููู ูู ููู <em>yaml</em> ุ ููู ุงูุถุฑูุฑู ุฃูุถูุง ุฃู ูุชููู ูู ุชุบููุฑ ุงูุชูููู ุฏูู ุฅุนุงุฏุฉ ุชุดุบูู ุชุทุจูููุง. </p><br><p style=";text-align:right;direction:rtl">  ูู <em>ุจุฅูุดุงุก</em> ูุฆุฉ <em>YamlConfigurationProvider ูุงุฌุนููุง</em> ูุฑุงุซุฉ <em>FileConfigurationProvider</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">YamlConfigurationProvider</span></span> : <span class="hljs-title"><span class="hljs-title">FileConfigurationProvider</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _filePath; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">YamlConfigurationProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">FileConfigurationSource source</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">source</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Stream stream</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NotImplementedException(); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ููุชุทู ุงูุดูุฑุฉ ุฃุนูุงู ุ ููููู ููุงุญุธุฉ ุจุนุถ ููุฒุงุช ูุฆุฉ <em>FileConfigurationProvider</em> .  ููุจู ุงููููุดุฆ ูุซูู <em>FileConfigurationSource</em> ุ ูุงูุฐู ูุญุชูู ุนูู <em>IFileProvider</em> .  <em>ูุชู</em> ุงุณุชุฎุฏุงู <em>IFileProvider</em> ููุฑุงุกุฉ ููู ุ ูุงูุงุดุชุฑุงู ูู ุญุฏุซ ุชุบููุฑ ููู.  ููููู ุฃูุถูุง ููุงุญุธุฉ ุฃู ุทุฑููุฉ <em>ุงูุชุญููู</em> ุชูุจู <em>ุชุฏูููุง ูููู</em> ููู ููู ุงูุชูููู ููุชูุญูุง ูููุฑุงุกุฉ.  ูุฐู ุทุฑููุฉ ููุฆุฉ <em>FileConfigurationProvider</em> ูููุณุช ูู ูุงุฌูุฉ <em>IConfigurationProvider</em> . </p><br><p style=";text-align:right;direction:rtl">  ุฃุถู ุชุทุจูููุง ุจุณูุทูุง ูุชูุญ ููุง ูุฑุงุกุฉ ููู <em>yaml</em> .  ููุฑุงุกุฉ ุงูููู ุ <em>ุณุฃุณุชุฎุฏู</em> ุญุฒูุฉ <em>YamlDotNet</em> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุทุจูู YamlConfigurationProvider</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">YamlConfigurationProvider</span></span> : <span class="hljs-title"><span class="hljs-title">FileConfigurationProvider</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> _filePath; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">YamlConfigurationProvider</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">FileConfigurationSource source</span></span></span><span class="hljs-function">) : </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">source</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Load</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Stream stream</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (stream.CanSeek) { stream.Seek(<span class="hljs-number"><span class="hljs-number">0L</span></span>, SeekOrigin.Begin); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (StreamReader streamReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamReader(stream)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fileContent = streamReader.ReadToEnd(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> yamlObject = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DeserializerBuilder() .Build() .Deserialize(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringReader(fileContent)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt;; Data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Dictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pair <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> yamlObject) { FillData(String.Empty, pair); } } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FillData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> prefix, KeyValuePair&lt;</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params">&gt; pair</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key = String.IsNullOrEmpty(prefix) ? pair.Key.ToString() : <span class="hljs-string"><span class="hljs-string">$"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{prefix}</span></span></span><span class="hljs-string">:</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">{pair.Key}</span></span></span><span class="hljs-string">"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (pair.Value) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: Data.Add(key, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> IDictionary&lt;<span class="hljs-keyword"><span class="hljs-keyword">object</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">object</span></span>&gt; section: { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sectionPair <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> section) FillData(pair.Key.ToString(), sectionPair); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } }</code> </pre> </div></div><br><p style=";text-align:right;direction:rtl">  ูุฅูุดุงุก ูุซูู ููููุฑ ุงูุชูููู ุงูุฎุงุต ุจูุง ุ ูุฌุจ ุชุทุจูู <em>FileConfigurationSource</em> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุทุจูู YamlConfigurationSource</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">YamlConfigurationSource</span></span> : <span class="hljs-title"><span class="hljs-title">FileConfigurationSource</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">YamlConfigurationSource</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fileName</span></span></span><span class="hljs-function">)</span></span> { Path = fileName; ReloadOnChange = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IConfigurationProvider </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Build</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IConfigurationBuilder builder</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.EnsureDefaults(builder); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> YamlConfigurationProvider(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุงูููู ุฃู ููุงุญุธ ููุง ุฃูู ูุชููุฆุฉ ุฎุตุงุฆุต ุงููุฆุฉ ุงูุฃุณุงุณูุฉ ุ ูุฌุจ ุนููู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ <em>this.EnsureDefaults (ุงูุจูุงุก)</em> . </p></div></div><br><p style=";text-align:right;direction:rtl">  ูุชุณุฌูู ูููุฑ ุชูููู ูุฎุตุต ูู ุงูุชุทุจูู ุ ุชุญุชุงุฌ ุฅูู ุฅุถุงูุฉ ูุซูู ุงููููุฑ ุฅูู <em>IConfigurationBuilder</em> .  ููููู ุงุณุชุฏุนุงุก ุงูุฃุณููุจ <em>Add</em> ูู <em>IConfigurationBuilder</em> ุ ููููู <em>ุณุฃุถุน ุนูู ุงูููุฑ ููุทู</em> ุชููุฆุฉ <em>YamlConfigurationProvider</em> ูู ุทุฑููุฉ <em>ุงูุชูุฏูุฏ</em> . </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุชุทุจูู YamlConfigurationExtensions</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">YamlConfigurationExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IConfigurationBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AddYaml</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> IConfigurationBuilder builder, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> filePath</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (builder == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(builder)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(filePath)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(filePath)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builder .Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> YamlConfigurationSource(filePath)); } }</code> </pre> </div></div><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุงุณุชุฏุนุงุก AddYaml ุงูุทุฑููุฉ</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { CreateWebHostBuilder(args).Build().Run(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IWebHostBuilder </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateWebHostBuilder</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> =&gt; WebHost.CreateDefaultBuilder(args) .ConfigureAppConfiguration((context, builder) =&gt; { builder.AddYaml(<span class="hljs-string"><span class="hljs-string">"appsettings.yaml"</span></span>); }) .UseStartup&lt;Startup&gt;(); }</code> </pre> </div></div><br><h2 id="otslezhivanie-izmeneniy" style=";text-align:right;direction:rtl">  ุชุบููุฑ ุงูุชุชุจุน </h2><br><p style=";text-align:right;direction:rtl">  ูู ุชูููู <em>api</em> ุงูุฌุฏูุฏ ุ ุฃุตุจุญ ูู ุงููููู ุฅุนุงุฏุฉ ูุฑุงุกุฉ ูุตุฏุฑ ุงูุชูููู ุนูุฏ ุชุบููุฑู.  ูู ููุณ ุงูููุช ุ ูุง ูุชู ุฅุนุงุฏุฉ ุชุดุบูู ุงูุชุทุจูู. <br>  ููู ูุนูู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูููุฑ ุงูุชูููู ุชุฑุงูุจ ุงูุชุบููุฑุงุช ูุตุฏุฑ ุงูุชูููู </li><li style=";text-align:right;direction:rtl">  ูู ุญุงูุฉ ุญุฏูุซ ุชุบููุฑ ูู ุงูุชูููู ุ ูุชู ุฅูุดุงุก <em>IChangeToken</em> ุฌุฏูุฏ <em>.</em> </li><li style=";text-align:right;direction:rtl">  ุนูุฏ <em>ุชุบููุฑ IChangeToken</em> ุ ูุชู ุงุณุชุฏุนุงุก ุฅุนุงุฏุฉ ุชุญููู ุงูุชูููู </li></ul><br><p style=";text-align:right;direction:rtl">  ุฏุนููุง ูุฑู ููู ูุชู ุชุทุจูู ุชุชุจุน ุงูุชุบููุฑ ูู <em>FileConfigurationProvider</em> . </p><br><pre style=";text-align:right;direction:rtl"> <code class="cs hljs">ChangeToken.OnChange( <span class="hljs-comment"><span class="hljs-comment">//producer () =&gt; Source.FileProvider.Watch(Source.Path), //consumer () =&gt; { Thread.Sleep(Source.ReloadDelay); Load(reload: true); });</span></span></code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชู ุชูุฑูุฑ ูุนููุชูู ุฅูู ุฃุณููุจ <em>OnChange</em> ูููุฆุฉ ุซุงุจุชุฉ <em>ChangeToken</em> .  ุงููุนููุฉ ุงูุฃููู ูู ูุธููุฉ ุชููู ุจุฅุฑุฌุงุน <em>IChangeToken</em> ุฌุฏูุฏ ุนูุฏูุง <em>ูุชุบูุฑ</em> ูุตุฏุฑ ุงูุชูููู (ูู ูุฐู ุงูุญุงูุฉ ูููู ุงูููู) ุ ููุฐุง ูู ูุง ูุณูู <em>ููุชุฌ</em> .  ุงููุนููุฉ ุงูุซุงููุฉ ูู ูุธููุฉ <em>ุฑุฏ ุงูุงุชุตุงู</em> (ุฃู <em>ุงููุณุชููู</em> ) ุ ูุงูุชู ุณูุชู ุงุณุชุฏุนุงุคูุง ุนูุฏ ุชุบููุฑ ูุตุฏุฑ ุงูุชูููู. <br>  ุชุนุฑู ุนูู ุงููุฒูุฏ ุญูู ูุฆุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ChangeToken</a> . </p><br><p style=";text-align:right;direction:rtl">  ูุง ูููู ุฌููุน ูุฒูุฏู ุงูุชูููู ุจุชูููุฐ ุชุชุจุน ุงูุชุบููุฑ.  ูุฐู ุงูุขููุฉ ูุชุงุญุฉ ูุฃุญูุงุฏ <em>FileConfigurationProvider</em> ู <em>AzureKeyVaultConfigurationProvider</em> . </p><br><h2 id="zaklyuchenie" style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h2><br><p style=";text-align:right;direction:rtl">  ูู .NET Core ุ ูุฏููุง ุขููุฉ ุณููุฉ ููุฑูุญุฉ ูุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู.  ุชุชููุฑ ุงูุนุฏูุฏ ูู ุงููุธุงุฆู ุงูุฅุถุงููุฉ ุฎุงุฑุฌ ุงูุตูุฏูู ุ ููุชู ุงุณุชุฎุฏุงู ุงูุนุฏูุฏ ูู ุงูุฃุดูุงุก ุจุดูู ุงูุชุฑุงุถู. <br>  ุจุงูุทุจุน ุ ููุฑุฑ ูู ุดุฎุต ุทุฑููุฉ ุงุณุชุฎุฏุงูู ุ ููููู ุฃุนูู ุฃู ุงููุงุณ ูุนุฑููู ุฃุฏูุงุชูู. </p><br><p style=";text-align:right;direction:rtl">  ูุฐุง ุงูููุงู ูุง ูุบุทู ุณูู ุงูุฃุณุงุณูุงุช.  ุจุงูุฅุถุงูุฉ ุฅูู ุงูุฃุณุงุณูุงุช ุ ุชุชููุฑ ููุง IOptions ูุงูุจุฑุงูุฌ ุงููุตูุฉ ุจุนุฏ ุงูุชูููู ูุงูุชุญูู ูู ุตุญุฉ ุงูุฅุนุฏุงุฏุงุช ูุงููุฒูุฏ.  ููู ูุฐู ูุตุฉ ุฃุฎุฑู. </p><br><p style=";text-align:right;direction:rtl">  ููููู ุงูุนุซูุฑ ุนูู ูุดุฑูุน ุงูุชุทุจูู ูุน ุฃูุซูุฉ ูู ูุฐู ุงูููุงูุฉ ูู ูุณุชูุฏุน ุงูุชุฎุฒูู ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฌูุซุจ</a> . <br>  ุดุงุฑู ูู ุงูุชุนูููุงุช ุงูุฐู ูุณุชุฎุฏู ูููุฌ ุฅุฏุงุฑุฉ ุงูุชููููุ <br>  ุดูุฑุง ูุงูุชูุงููู </p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">ูุญุฏุซ</a> : ููุง ุงูุชุฑุญ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=" class="user_link">AdAbsurdum</a> ุจุดูู ุตุญูุญ ุ ุนูุฏ ุงูุนูู ูุน ุงููุตูููุงุช ุ ูู ูุชู ุงุณุชุจุฏุงู ุงูุนูุงุตุฑ ุฏุงุฆููุง ุนูุฏ ุฏูุฌ ุงูุชูููู ูู ูุตุฏุฑูู. <br>  ุงููุธุฑ ูู ูุซุงู.  ุนูุฏ ูุฑุงุกุฉ ูุฌููุนุฉ ูู <em>appsettings.json</em> ูุญุตู ุนูู ูุฐุง ุงูุนุฑุถ ุงููุณุทุญ: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">array:0=valueA</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุนูุฏ ุงููุฑุงุกุฉ ูู <em>appsettings.Development.json</em> : </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">array:0=valueB array:1=value</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูุฌุฉ ูุฐูู ุ ุณูููู ุงูุชูููู: </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">array:0=valueB array:1=value</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุชุชู ุฅุถุงูุฉ ุฌููุน ุงูุนูุงุตุฑ ุฐุงุช ุงููุคุดุฑุงุช ุงููุฑูุฏุฉ ( <em>ุงูุตููู: 1</em> ูู ุงููุซุงู) ุฅูู ุงูุตููู ุงููุงุชุฌ.  ุณุชุฎุถุน ุงูุนูุงุตุฑ ูู ูุตุงุฏุฑ ุงูุชูููู ุงููุฎุชููุฉ ุ ูููู ููุง ููุณ ุงูููุฑุณ ( <em>ุงูุตููู: 0</em> ูู ุงููุซุงู) ููุฏูุฌ ุ ูุณูุชู ุงุณุชุฎุฏุงู ุงูุนูุตุฑ ุงูุฐู ุชูุช ุฅุถุงูุชู ูู ุงูููุงูุฉ. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar453416/">https://habr.com/ru/post/ar453416/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar453406/index.html">ุจุทุงุฑูุงุช ุญุฏูุซุฉ ููุดุบูุงุช Sony Discman</a></li>
<li><a href="../ar453408/index.html">ุตูุฏูู ุงูุฃุฏูุงุช ููุจุงุญุซูู - ุงูุฅุตุฏุงุฑ ุงูุซุงูู: ูุฌููุนุฉ ูู 15 ุจูู ุจูุงูุงุช ููุงุถูุนู</a></li>
<li><a href="../ar453410/index.html">ูุง ุชุฑูู ุงููุตุงุจูุญ ุงูุฐููุฉ ูู ุณูุฉ ุงูููููุงุช ุ ุฃู ุฎุทุฑ ุฅูุชุฑูุช ุงูุฃุดูุงุก</a></li>
<li><a href="../ar453412/index.html">ูุตุจุญ Top 3D Shop ุงูููุฒุน ุงูุญุตุฑู ูู UFactory</a></li>
<li><a href="../ar453414/index.html">ุตุนูุฏ ูุณููุท IEO ุ ูู ูุง ุชุญุชุงุฌ ููุนุฑูุชู ุญูู ุงูููุฌุฉ ุงูุฌุฏูุฏุฉ ูุฌูุน ุงูุชุจุฑุนุงุช</a></li>
<li><a href="../ar453418/index.html">ูุง ุชุญุชุงุฌ ุฅูู ูุนุฑูุชู ูุจู ุงูุงูุชูุงู ุฅูู ูุฌููุนุฉ ุฃุฏูุงุช Akka ูุชุทุจูู Sourcing Event ู CQRS</a></li>
<li><a href="../ar453422/index.html">ุงูุชุนุฑู ุนูู ITSM: 10 habratopiks ูุงูููุงุฏ ุงูุฎุจุฑุงุก ู "ุงูุงูุบูุงุณ ุงูุณุฑูุน" ูู ุงูููุถูุน</a></li>
<li><a href="../ar453428/index.html">ุฑูุน ูุฑุงุกุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ูู ุชุทููุฑ iOS</a></li>
<li><a href="../ar453430/index.html">ููุง ูุชุจุช ูุฑุงูุจุชู</a></li>
<li><a href="../ar453432/index.html">ูู ุงูููุงุฏ ุฅูู ุงูุฎูุงุฑุฒููุงุช: ุตูุช ุงููุฎุจ ุงูุจุงูุช ูู ุนุงูู ุงูููุณููู</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>