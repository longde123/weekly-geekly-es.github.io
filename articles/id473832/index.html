<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‹ ğŸ”“ ğŸ¤ ShIoTiny: Pembaruan dan Pemberitahuan ğŸ‘©â€ğŸ“ ğŸ¤  ğŸ‰‘</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Tentang apa artikel ini 
 Kami melanjutkan serangkaian artikel tentang ShIoTiny - pengontrol yang dapat diprogram secara visual berdasarkan chip ESP82...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ShIoTiny: Pembaruan dan Pemberitahuan</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/473832/"><img src="https://habrastorage.org/webt/2x/3l/hz/2x3lhz-tej3w7wnbri8k_crqjbs.jpeg"><br><br><h4>  Tentang apa artikel ini </h4><br>  Kami melanjutkan serangkaian artikel tentang <b>ShIoTiny</b> - pengontrol yang dapat diprogram secara visual berdasarkan chip <b>ESP8266</b> . <br><br>  Artikel ini <b>berbicara</b> tentang apa yang telah berubah sejak firmware <b>ShIoTiny</b> sebelumnya: bagaimana antarmuka pengguna telah berubah;  cara menugaskan kembali "kaki" dan hal-hal lain yang kurang penting, tetapi tidak lama ditunggu-tunggu. <br><br>  Artikel ini menyajikan sesuatu seperti " <i><b>lembar fakta</b></i> " tentang keadaan di bidang <b>pengembangan</b> firmware <b>ShIoTiny</b> .  Mereka yang tidak tertarik dengan perkembangan saya dalam artikel ini dapat melewati artikel ini dengan hati nurani yang jelas. <br><br>  Mereka yang tidak tahu apa yang mereka bicarakan, tetapi ingin mengetahuinya, dapat membaca artikel saya sebelumnya tentang firmware <b>ShIoTiny</b> atau merujuk ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasi</a> . <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>Situs</b> Proyek <b>ShIoTiny</b></a> <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Versi online editor <b>ElDraw</b></a> persis sama dengan di firmware, untuk referensi. <br><br>  Tautan ke skema, firmware, dan lainnya - di situs web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>ShIoTiny</b></a> di bagian dokumentasi. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>Artikel ShIoTiny</b> Sebelumnya dan Artikel Lainnya Saya</a> <br><a name="habracut"></a><br><h3>  Intro untuk meyakinkan masyarakat terhormat </h3><br>  Kebetulan kuartal keempat adalah terburu-buru permanen.  Oleh karena itu, beberapa kawan sudah mulai mengubur proyek <b>ShIoTiny</b> dan menulis surat kepada saya, mereka berkata - â€œhai, penulis, di mana Anda?!  kenapa kamu tidak menulis ?!  kami menggunakan firmware Anda di sini!  dan Anda bukan satu artikel baru! " <br>  Tentu saja, itu dengan cara yang sopan, tetapi dari segi makna itu.  Beberapa, sebaliknya, menulis saran dan komentar, yang banyak membantu dalam menangkap kutu perangkat lunak.  Terima kasih kawan  Itu selalu baik bahwa Anda tidak memasak dalam jus Anda sendiri, tetapi memiliki orang yang berpikiran sama. <br><br>  Teman!  Saya mengingatkan Anda bahwa proyek saya adalah hobi dan selain itu saya punya pekerjaan, seorang istri dan anak-anak.  Jadi saya mohon: bersikap lunak!  Penulis menulis bagaimana ia bisa dan bisa :) <br><br>  Saya segera meyakinkan semua orang: <u>proyek ini tidak mati</u> !  Saya menangkap beberapa kutu dari kode dan, di samping itu, redid situs proyek (meskipun saya masih belum menyelesaikannya - saya mengisi situs dengan konten). <br><br>  Dari sudut pandang sebagian besar ajaran filosofis di dunia tidak ada yang permanen.  Bahkan alam semesta kita berkembang.  Apa yang dapat kita katakan tentang firmware mikrokontroler atau situs web proyek? <br><br>  Perubahan kunci pada firmware <b>ShIoTiny</b> memengaruhi terutama dua hal: kemungkinan mendefinisikan ulang kaki dan halaman status pengontrol.  Kami akan membicarakannya.  Adapun desain baru dari situs proyek, saya tidak akan menyentuhnya di sini: siapa pun yang penasaran akan datang, melihat dan mengkritik. <br><br><h3>  Mendefinisikan ulang <b>ESP8266</b> Kaki </h3><br>  Jadi, kaki atau mereka - <b>GPIO</b> .  Awalnya, kaki-kaki mikrokontroler <b>ESP866</b> tidak dimaksudkan untuk didefinisikan ulang.  Mereka secara kaku dipaku pada input dan output papan <b>ESP-07</b> (siapa pun yang tertarik - semuanya tentang hal itu ada di situs web proyek). <br><br>  Tetapi tiba-tiba ternyata firmware saya tanpa perubahan apa pun tidak hanya terjadi pada modul <b>ESP-07</b> dengan FLASH 1MB, tetapi juga pada <b>ESP-01</b> , <b>ESP-12</b> dan bahkan pada <b>ESP-8285</b> ! <br><br>  Muncul pertanyaan yang benar bahwa seseorang membutuhkan 5 input dan satu output, 6 output lainnya dan tidak ada input, dan ketiga termometer pada saat yang sama. <br><br>  Gelombang surat dari publik yang marah hampir membuat sisa-sisa pikiranku menjadi gelap!  Istri saya sudah bersiap memanggil saya mantri dengan kemeja kematian ... Tapi saya ternyata gila! <br>  Sambil menggertakkan gigi dan minum tiga liter kopi, saya mengumpulkan sisa-sisa otak, yang kebetulan tidak mabuk di tubuh siswa, dan menemukan cara menerapkan trik dengan mendefinisikan kembali kaki sehingga semua orang akan merasa baik. <br><br>  Saya tidak akan membuat pembaca bosan dengan dapur program internal.  Dari sudut pandang pengguna, semuanya terlihat sangat sederhana: ia menusuk mouse pada simpul yang terhubung ke kaki mana pun dari modul <b>GPIO</b> dan memilih satu kaki dari daftar yang mungkin.  Kira-kira seperti yang ditunjukkan pada gambar di bawah ini. <br><br><img src="https://habrastorage.org/webt/zn/-f/9x/zn-f9x5xesj70levkx1noewx5ay.jpeg"><br><br>  <b>N / A</b> - berarti bahwa kaki tidak dipilih. <br>  Jika ada simpul di sirkuit dengan kaki <b>N / A</b> tidak dipilih, maka sirkuit seperti itu tidak dapat dimuat ke dalam perangkat - editor <b>ElDraw</b> tidak akan mengizinkannya.  Tetapi skema semacam itu dapat diunduh ke disk untuk melanjutkan pengeditannya â€œbeberapa saat kemudianâ€. <br><br>  Semuanya sangat sederhana, tetapi ada nuansa. <br><br>  <b>Pertama</b> , yang menurut saya sangat nyaman, hanya kaki yang tidak digunakan yang ditampilkan dalam daftar.  Artinya, memilih satu kaki dua kali tidak mungkin. <br><br>  <b>Kedua</b> , kaki <b>GPIO15</b> dicadangkan untuk tombol AP dan tidak dapat digunakan untuk tujuan lain.  Maaf, tetapi sebaliknya, tidak mungkin ... <br><br>  <b>Ketiga</b> , kaki <b>GPIO16</b> tidak dapat digunakan sebagai input biner biasa ( <b>Input</b> node). <br><br>  <b>Keempat</b> , kaki <b>GPIO9</b> dan <b>GPIO10</b> hanya dapat digunakan pada modul <b>ESP-8285</b> .  Pada modul lain, hasilnya akan menjadi bencana - ketergantungan penuh dan reboot tanpa akhir! <br><br>  Poin terakhir - <b>pemahaman</b> beberapa modul ketika memilih kaki <b>GPIO9</b> dan <b>GPIO10</b> membuat saya berpikir keras.  Lagi pula, saya tidak ingin mengubah pengontrol setiap kali jika kaki salah pilih!  Dan saya menemukan cara baru yang dimodifikasi untuk masuk ke mode konfigurasi. <br><br><h3>  Cara baru untuk masuk ke mode konfigurasi </h3><br>  Jika seseorang membaca artikel saya sebelumnya, maka dia ingat bahwa mode konfigurasi firmware <b>ShIoTiny</b> adalah mode ketika chip ESP8266 menjadi titik akses terbuka, dan sirkuit program tidak memulai secara otomatis setelah reboot.  Dan jika itu tidak dimulai, maka itu tidak akan menggantung ketika memilih kaki <b>GPIO</b> . <br><br>  Artinya, dalam mode konfigurasi, Anda dapat mengubah kaki masalah <b>GPIO9</b> dan <b>GPIO10</b> ke orang lain.  Tapi masalahnya adalah, Anda bisa masuk ke mode konfigurasi hanya dengan menahan tombol <b>AP</b> selama sekitar 4 detik!  Dan selama waktu ini, pengontrol akan memiliki waktu untuk mulai menjalankan program rangkaian "kurva" dan membeku! <br><br>  Untuk mengatasi masalah ini, saya datang dengan interval penjaga setengah detik setelah me-reboot controller.  Jika tombol <b>AP</b> ditekan dalam 0,5 detik setelah me-reboot controller, controller akan segera reboot dalam mode konfigurasi.  Pada saat yang sama, selama interval penjaga setengah detik, skema program tidak dimulai.  Dan itu berarti tidak bisa digantung. <br><br>  Kontra jelas - program tidak memulai segera, tetapi setengah detik kemudian.  Keuntungannya jauh lebih besar - jika Anda memilih "kaki yang salah" atau program sirkuit macet karena alasan lain, Anda selalu dapat masuk ke mode konfigurasi dan memperbaiki situasi tanpa menginstal controller. <br><br>  Dalam praktiknya, semuanya terlihat lebih sederhana daripada lobak kukus: kami menekan tombol <b>Reset</b> dan, melepaskan tombol <b>Reset</b> di sana, tanpa mengganggu, kami menekan tombol <b>AP</b> .  Segera sekitar setengah detik LED <b>STATUS</b> biru menyala (jika Anda, tentu saja, <b>menyoldernya</b> ke <b>GPIO0</b> ) dan pengontrol akan reboot dalam mode konfigurasi. <br><br>  Jika rangkaian program bekerja secara normal, maka Anda selalu dapat beralih ke mode konfigurasi dengan cara "lama" - dengan menekan dan menahan tombol <b>AP</b> selama sekitar 4 detik (sampai LED <b>STATUS</b> biru menyala). <br><br><h3>  <b>Halaman</b> Status <b>ShIoTiny</b> </h3><br>  Kemampuan untuk menghubungkan kaki dengan kehendak pengguna telah menyebabkan revisi halaman informasi utama dari firmware <b>ShIoTiny</b> . <br><br>  Setelah banyak pertimbangan, saya sampai pada kesimpulan bahwa halaman tersebut harus a) informatif dan b) tidak mengandung terlalu banyak. <br><br>  Apa yang saya dapatkan ditunjukkan pada gambar di bawah ini. <br><br><img src="https://habrastorage.org/webt/c6/lr/as/c6lrasjcqqtzgd1fhz_gk--k4z4.jpeg"><br><br>  Ada dua bagian pada halaman informasi utama: <b>Info</b> - informasi umum dan <b>GPIO Bekas</b> - informasi tentang penggunaan kaki I / O.  Mari kita pertimbangkan secara lebih detail. <br><br><h4>  Bagian Info </h4><br>  <b>Name: esp_8266_155da4</b> - nama unik untuk perangkat.  Ini dihasilkan secara otomatis dan tidak dapat diubah. <br><br>  <b>Ver: 2019-10-22 22:54:51 +0700 6b5ee82 clean</b> - versi firmware (tanggal pembuatan dan pengidentifikasi komit). <br><br>  <b>MQTT: Terhubung ke: 192.168.1.2:1064, SSL</b> - koneksi ke server MQTT.  Memperlihatkan alamat IP atau URL server, port server, dan mode SSL jika koneksi aman digunakan.  Ingat bahwa jika program rangkaian tidak mengandung node untuk bekerja dengan MQTT, maka koneksi tidak akan pernah dibuat! <br><br>  <b>WiFi: STA ip: 192.168.1.134.</b>  - <b>Mode</b> operasi <b>WiFi ESP8266</b> : <b>STA</b> - station, <b>AP</b> - titik akses.  Kedua mode dengan alamat IP yang berbeda dapat dipilih secara bersamaan. <br><br>  <b>Sekarang: Rabu 30 Oktober 2019 21:49:28 GMT + 0700</b> - waktu sekarang.  Ditampilkan hanya ada waktu yang ditentukan oleh simpul <b>Set Time</b> !  Jika tidak, maka akan ditunjukkan bahwa waktu tidak disinkronkan dan tidak disetel. <br><br><h4>  Bagian GPIO yang Digunakan </h4><br>  Bagian ini menunjukkan semua kaki modul yang digunakan dalam diagram program dan statusnya saat ini. <br><br>  Format output jelas: <b>GPIO &lt;nomor leg&gt; (fungsi): status</b> <br>  Nomor kaki adalah nomor atau, untuk <b>ADC</b> , alih-alih nomor akan menjadi <b>adc</b> prasasti. <br>  Fungsi: <b>Input</b> - input biner;  <b>Relay</b> - output biner;  <b>ADC</b> - ADC atau tipe sensor: <b>DS182x</b> atau <b>DHTxx</b> . <br><br>  Field "state" - tergantung pada tujuan kaki. <br>  Untuk input dan output biner - 0 atau 1. <br>  Untuk sensor - suhu, kelembaban. <br>  Untuk ADC - bacaannya dihitung ulang sesuai dengan rumus yang diberikan (lihat deskripsi bekerja dengan ADC dalam instruksi). <br><br>  Menurut pendapat saya, halaman utama berisi semua informasi yang diperlukan tentang pengoperasian controller. <br><br><h3>  Kesimpulan </h3><br>  Di sini, pada kenyataannya, semua perubahan besar dalam firmware saat ini.  Selain inovasi ini, lusinan kesalahan kecil diperbaiki. <br><br>  Seperti biasa - instruksi terperinci di situs web <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>ShIoTiny</b></a> di bagian dokumentasi atau di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sini</a> . <br><br>  Saran, harapan, kritik, <s>uang, hadiah,</s> dan sebagainya - kirimkan saya komentar atau email: <b>shiotiny@yandex.ru</b> . <br><br>  Menunggu umpan balik dan saran. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id473832/">https://habr.com/ru/post/id473832/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id473818/index.html">Aplikasi pada TSD dan komunikasi dengan 1C: Enterprise 8.3 melalui HTTP-Service. Bagian 4 (Pemindai OnKeyUp. SC dengan emulasi keyboard)</a></li>
<li><a href="../id473822/index.html">Tawaran Pekerjaan dalam 1 Hari: bagaimana kami mewawancarai dan memberikan umpan balik pada hari yang sama</a></li>
<li><a href="../id473824/index.html">Bagaimana membangun teknologi bisnis untuk perencanaan penjualan dalam satu sistem</a></li>
<li><a href="../id473826/index.html">Otentikasi OTP di Apache Web Server</a></li>
<li><a href="../id473828/index.html">Visi komputer sebagai alternatif pengganti kantor</a></li>
<li><a href="../id473834/index.html">Pemantauan blackbox di jaringan Clos. Laporan Yandex</a></li>
<li><a href="../id473838/index.html">DJI Mavic Mini: quadrocopter lipat paling ringan</a></li>
<li><a href="../id473840/index.html">Streaming video dari perangkat Android melalui aplikasi UDP ke JAVA</a></li>
<li><a href="../id473842/index.html">Oktober Machine Learning dan Intelijen Berita Buatan Intisari</a></li>
<li><a href="../id473844/index.html">Mengapa kita membutuhkan rentang dari C ++ 20 dalam penghancur sederhana?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>