<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👨🏿‍🏭 👩🏿‍🤝‍👨🏻 📫 Envoi et réception de SMS à l'aide de passerelles VoIP OpenVox 👨🏽‍🏭 🐗 💻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sans exagérer, nous pouvons dire que la question la plus populaire sur les passerelles VoIP GSM concerne l'envoi et la réception de messages SMS. Plus...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Envoi et réception de SMS à l'aide de passerelles VoIP OpenVox</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/arttel/blog/405075/"><p> Sans exagérer, nous pouvons dire que la question la plus populaire sur les passerelles VoIP GSM concerne l'envoi et la réception de messages SMS.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Plus tôt,</a> nous avons déjà soulevé ce sujet et examiné les passerelles de fabricants tels que GoIP et Yeastar.  Mais les passerelles <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">OpenVox</a> GSM ne sont alors pas tombées dans notre examen et il est maintenant temps de corriger cette omission. </p><br><p><img src="https://habrastorage.org/web/550/f55/97d/550f5597d9c144e5af177b5b394cca57.jpg"><a name="habracut"></a></p><br><p>  En règle générale, tous les fabricants essaient de prévoir plusieurs façons différentes de travailler avec SMS et OpenVox ici ne fait pas exception.  Considérez chacun d'eux: </p><br><h2 id="web">  WEB </h2><br><p>  La plus standard, la plus logique et la plus gênante des options.  Il est plus approprié pour vérifier les performances ou une action ponctuelle que pour une utilisation constante. </p><br><img src="https://habrastorage.org/web/814/1c5/d53/8141c5d53048493696cfd43ef66df9fd.png"><br><p><br>  Il est facile à utiliser, nous indiquons par quels ports envoyer, la liste des destinataires et le texte du message. </p><br><p>  L'interface WEB offre également la possibilité de visualiser les messages entrants et sortants, il vous suffit tout d'abord d'activer la capacité de recevoir et de stocker des messages localement. </p><br><h2 id="email">  Courriel </h2><br><p>  SMS to Email peut également être attribué aux fonctionnalités standard de ces appareils. </p><br><img src="https://habrastorage.org/web/c44/ea0/b2e/c44ea0b2e32046f28818a9a4afbd050d.png"><br><p><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les passerelles GSM OpenVox</a> VS Series ne <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">font</a> pas exception.  Nous spécifions les données nécessaires pour la connexion à SMTP, les adresses e-mail auxquelles transférer les SMS entrants et configurons le modèle de lettres envoyées.  Dans ce cas, nous avons 4 variables disponibles dans le modèle: le numéro de l'expéditeur, le numéro de port de la carte SIM, l'heure de réception et le texte du message entrant lui-même. </p><br><p>  Le plus souvent, les fabricants offrent également la possibilité inverse - E-mail vers SMS: nous envoyons un e-mail à une adresse qui vérifie périodiquement la passerelle et génère des messages SMS à partir des e-mails entrants, mais OpenVox a décidé de ne pas mettre en œuvre cette opportunité. </p><br><h2 id="http">  HTTP </h2><br><p>  L'envoi et la réception de messages SMS via des requêtes HTTP est probablement l'un des moyens les plus simples d'intégrer ces actions dans le travail des applications tierces. </p><br><img src="https://habrastorage.org/web/362/9da/4ef/3629da4ef3924120aedf7cee9e5af298.png"><br><p><br>  Pour envoyer des SMS, nous devons répondre à une demande du formulaire: </p><br><p><code>http://172.16.99.1/sendsms?username=smsuser&amp;password=password&amp;phonenumber=89996135801&amp;message=Hello</code> </p> <br><pre> <code class="hljs json"> { <span class="hljs-attr"><span class="hljs-attr">"message"</span></span>:<span class="hljs-string"><span class="hljs-string">"Hello"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"report"</span></span>:[{ <span class="hljs-attr"><span class="hljs-attr">"1"</span></span>:[{ <span class="hljs-attr"><span class="hljs-attr">"port"</span></span>:<span class="hljs-string"><span class="hljs-string">"umts-1.1"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"phonenumber"</span></span>:<span class="hljs-string"><span class="hljs-string">"89996135801"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"time"</span></span>:<span class="hljs-string"><span class="hljs-string">"1970-01-01 09:49:03"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"result"</span></span>:<span class="hljs-string"><span class="hljs-string">"success"</span></span> }] }] }</code> </pre> <br><p>  Idéalement, à la suite de la demande, nous pouvons obtenir un rapport sur l'envoi.  Une telle implémentation peut être plus pratique qu'une vérification d'exécution distincte, comme cela se fait dans les passerelles Yeastar. </p><br><p>  En bref sur les paramètres: </p><br><pre> <code class="hljs vhdl">username –  ,      password –    phonenumber –  ,      «,» message –    <span class="hljs-keyword"><span class="hljs-keyword">port</span></span> –     ,           <span class="hljs-keyword"><span class="hljs-keyword">report</span></span> –      JSON  <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> timeout –      SMS</code> </pre> <br><p>  En plus de l'envoi, les passerelles OpenVox vous permettent de recevoir des messages SMS via HTTP. </p><br><img src="https://habrastorage.org/web/411/90b/3ee/41190b3eefc1430982edb6d03a01b7f9.png"><br><p><br>  Tout est très simple: nous précisons l'adresse de notre gestionnaire, le chemin et les noms des paramètres.  À la réception des messages entrants, la passerelle répondra à la demande que nous avons configurée. </p><br><h2 id="ami">  AMI </h2><br><p>  Étant donné que les passerelles OpenVox GSM et UMTS, ainsi que les <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">passerelles GSM Yeastar</a> , sont construites à l'aide du serveur de téléphonie IP Asterisk, elles implémentent elles-mêmes l'interface de gestion Asterisk, qui peut également être utilisée pour envoyer des messages SMS.  Surtout pour cela, la commande est fournie: </p><br><p> <code>GSM send sms &lt;span&gt; &lt;destination&gt; &lt;message&gt; &lt;timeout&gt;</code> </p> <br><p>  En bref sur les paramètres: </p><br><pre> <code class="hljs 1c">span –   <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   destination –   message –   timeout –      /* <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  USSD    sms  ussd */</code> </pre> <br><p>  Le travail avec AMI avec des exemples a été décrit la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">dernière fois</a> , il est donc inutile de s'y attarder plus en détail.  Je note seulement que la mise en œuvre d'OpenVox ne génère pas d'événement séparé spécial lors de la réception de SMS, comme dans Yeastar - nous devons surveiller des événements comme VarSet, de ce type: </p><br><pre> <code class="hljs powershell">Event: VarSet Privilege: dialplan,all Channel: EXTRA<span class="hljs-literal"><span class="hljs-literal">-SMS</span></span>/<span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-literal"><span class="hljs-literal">-1</span></span> Variable: SMSPDU Value: “pdu <span class="hljs-keyword"><span class="hljs-keyword">data</span></span>” Uniqueid: <span class="hljs-number"><span class="hljs-number">625.1</span></span></code> </pre> <br><p>  Et une autre mouche dans la pommade: si nous voulons recevoir des messages via AMI, alors nous devrons abandonner l'utilisation de HTTP vers SMS, car  si cette option est activée, nous ne verrons aucun événement à la réception du SMS. </p><br><h2 id="v-kachestve-zaklyucheniya">  En conclusion </h2><br><p>  Vous pouvez travailler avec n'importe quel appareil sur le marché, mais si j'avais la tâche d'envoyer et de recevoir des SMS, je préférerais que les passerelles OpenVox soient les plus pratiques pour effectuer de telles tâches. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr405075/">https://habr.com/ru/post/fr405075/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr405061/index.html">Un PDG de la poste russe licencié</a></li>
<li><a href="../fr405065/index.html">La machine à sous à l'intérieur comme à l'extérieur. Aperçu du fabricant</a></li>
<li><a href="../fr405069/index.html">Ordinateurs de personnes</a></li>
<li><a href="../fr405071/index.html">L'US Air Force sélectionne SpaceX pour le cinquième vol de l'engin spatial X-37B</a></li>
<li><a href="../fr405073/index.html">Centre de données pour la Coupe du monde</a></li>
<li><a href="../fr405077/index.html">Surveillance de la température budgétaire: Arduino + Zabbix</a></li>
<li><a href="../fr405079/index.html">La Californie paie les États voisins pour récupérer l'excédent d'électricité des centrales solaires</a></li>
<li><a href="../fr405081/index.html">[CASE] Comment nous avons fait une copie de l'ouvrière et de la fermière collective pour le Musée du Parlement européen</a></li>
<li><a href="../fr405083/index.html">Piratage des caméras de vidéosurveillance dans la pratique</a></li>
<li><a href="../fr405085/index.html">Revue vidéo sur la caméra Clevermic UNO PTZ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>