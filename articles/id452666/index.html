<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏽 🐺 🏣 Cara memungkinkan pembayaran mikro di aplikasi Anda 🅿️ 💪🏿 🕸️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Minggu ini saya menghabiskan waktu mengkodekan aplikasi hewan peliharaan publik pertama saya yang didasarkan pada bot obrolan Telegram yang bertindak ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Cara memungkinkan pembayaran mikro di aplikasi Anda</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/452666/"><p>  Minggu ini saya menghabiskan waktu mengkodekan aplikasi hewan peliharaan publik pertama saya yang didasarkan pada bot obrolan Telegram yang bertindak sebagai dompet Bitcoin dan memungkinkan untuk mengirim dan menerima kiat antara pengguna Telegram dan apa yang disebut "Aplikasi Petir".  Saya berasumsi bahwa Anda terbiasa dengan Bitcoin &amp; Telegram secara umum, saya akan mencoba memposting pendek dan tanpa lompatan mendalam ke detail.  Lebih banyak <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sumber daya tentang Bitcoin dapat ditemukan di sini</a> dan Telegram hanyalah sebuah messenger instan yang memungkinkan Anda untuk membuat aplikasi khusus Anda (chat-bot) menggunakan platform mereka. </p><br><h3>  Apa poin utama dari aplikasi tersebut? </h3><br><ul><li>  Memungkinkan untuk menilai ide dan jawaban pengguna lain dengan nilai sebenarnya <br>  'suka virtual'.  Ini membawa percakapan online ke tingkat yang sama sekali baru </li><li>  Contoh nyata dari aplikasi pembayaran mikro yang bekerja dengan entitas lain <br>  melalui internet menggunakan protokol terbuka </li><li>  Semua modul adalah proyek open-source dan dapat dengan mudah digunakan kembali dan disesuaikan <br>  untuk proyek Anda sendiri.  Aplikasi tidak menyampaikan pada layanan komersial pihak ketiga. <br>  Bahkan itu jatuh di bawah bidang e-commerce, yang saat ini hampir ditutup, aplikasi <br>  didasarkan pada solusi terbuka. </li></ul><br><h3>  Apa gunanya? </h3><br><p>  sesuatu seperti ini ... <br></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/097/02b/175/09702b1750c94616a10fc66c1275c00f.png" alt="gambar"></div><a name="habracut"></a><br>  atau seperti itu .. <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ef/1ff/85f/3ef1ff85f1e7b77662c63a9d4d838666.png" alt="gambar"></div><br><p>  Apa arti angka?  Ini adalah <b>unit bitcoin - satoshi</b> .  Sedangkan untuk pertengahan 2019 1000 satoshi memiliki nilai $ 0,06.  Anda dapat membelanjakannya secara online atau menukar dengan mata uang lokal Anda menggunakan banyak layanan yang tersedia.  Jadi ini bukan sekadar <i>"nomor dalam basis data"</i> atau <i>"kupon yang dapat Anda belanjakan di toko mitra kami"</i> , tetapi juga <b>uang internet nyata</b> . </p><br><p>  Anda dapat bertanya apa yang harus dilakukan, jika Anda tidak memiliki bitcoin untuk digunakan dalam aplikasi.  Anda hanya dapat menerima tip dari pengguna aplikasi yang ada atau membeli sejumlah kecil bitcoin di berbagai bursa atau dompet bitcoin untuk ponsel atau komputer. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/883/661/461/883661461bdc686aec7d084d5d581236.png" alt="gambar"><img src="https://habrastorage.org/getpro/habr/post_images/779/716/5d9/7797165d93d292700d9a41a171d882a6.png" alt="gambar"><img src="https://habrastorage.org/getpro/habr/post_images/8fe/33b/84b/8fe33b84bb127132304634363bb4af42.png" alt="gambar"></p><br><p>  Ketika Anda mendapat bitcoin, Anda dapat memulai <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">@atomic_tipbot</a> dan melakukan deposit. </p><br><p>  Anda akan melihat faktur, Anda dapat memilih metode pembayaran pilihan dan mengirim uang hanya memindai kode QR atau dengan menekan tombol ( <i>"buka di dompet"</i> ) pada faktur. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/8fe/33b/84b/8fe33b84bb127132304634363bb4af42.png" alt="gambar"><img src="https://habrastorage.org/getpro/habr/post_images/4a3/da5/f76/4a3da5f76574ac9ebb2161d56bceff62.png" alt="gambar"><img src="https://habrastorage.org/getpro/habr/post_images/54d/a43/0be/54da430be68237193dee82ade50bab37.png" alt="gambar"></p><br><p>  Konfirmasikan pembayaran di dompet ponsel Anda, dan Anda akan melihat layar konfirmasi hampir secara instan di Telegram. </p><br><p>  Sejauh ini kami menyentuh dua bagian aplikasi yang terpisah: telegram bot back-end dan sistem pemrosesan pembayaran (sebenarnya lebih mirip front-end). </p><br><p>  Untuk membuat bot Telegram ini saya telah menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Python Telegram Bot</a> .  Dan tentu saja, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">bot adalah open-source</a> . </p><br><p>  Sebagai sistem pemrosesan pembayaran untuk menghasilkan faktur, periksa status, kirim pemberitahuan, dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">urus</a> UX digunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BTCPayServer</a> yang <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dokumentasinya dapat ditemukan di sini</a> . </p><br><p>  Jika Anda mencari cara untuk memproses acara pembayaran secara langsung, Anda dapat melihat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">halaman manual Electrum CLI</a> untuk pembayaran on-chain dan memeriksa solusi untuk pembayaran off-chain (Lightning) seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Lightning-charge</a> atau <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Sparko</a> . </p><br><h3>  Anda bilang 'tidak ada pihak ketiga' dan 'tidak ada layanan cloud'!? </h3><br><p>  Ya itu benar.  Dalam aplikasi saya, saya menggunakan hosting bersama gratis BTCPayServer misalnya - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">BTCPayJungle</a> , tetapi dimungkinkan untuk berputar bahkan di server khusus Anda sendiri.  Ingatlah bahwa Anda membutuhkan sekitar ~ 500GB ruang untuk menyimpan Bitcoin dan Litecoin blockchain.  BTCPayServer tidak memiliki kunci pribadi atau informasi sensitif apa pun yang dapat memungkinkan peretas untuk mengontrol dana di dompet Anda.  Untuk pembayaran on-chain (standar), Anda harus memberikan kunci xpub dari dompet Anda ke BTCPayServer sehingga dapat menghasilkan alamat publik.  Dengan cara ini, arsitektur BTCPay memungkinkan untuk memproses pembayaran dengan cara yang tidak dapat dipercaya bahkan di lingkungan bersama.  Sangat mudah untuk mengkonfigurasi jika Anda menggunakan dompet yang sudah terbukti seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Electrum</a> . </p><br><h3>  Apa itu Jaringan Petir? </h3><br><p>  Ini adalah sesuatu seperti add-on untuk Bitcoin yang menambahkan lapisan abstraksi tambahan dan memungkinkan untuk melakukan transaksi bitcoin instan dan hampir gratis.  Semua hal ini dimungkinkan berkat sihir multi-tanda tangan kriptografis, yang sering disebut <em>kontrak pintar</em> .  Ada beberapa implementasi protokol LN.  Saya menggunakan implementasi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">c-lightning</a> C. </p><br><p>  Perbedaan utama antara pembayaran on-chain dan off-chain (Lightning) adalah bagaimana transaksi disimpan.  Semua transaksi <b>on-chain</b> disiarkan ke seluruh jaringan sehingga setiap node bitcoin yang berjalan akan mencatat transaksi ini ke dalam blockchain, jika blok yang mengandung transaksi ini akan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">ditambang</a> .  Hei, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">BitFury</a> , apa aku benar?  ;) Itu sebabnya kami menyebut transaksi tersebut <b>on-chain</b> .  Transaksi tersebut akan disimpan dalam blockchain sampai akhir keberadaannya.  Dimungkinkan secara publik untuk melacak, menganalisis, dan memantau setiap transaksi semacam itu melalui jaringan. </p><br><p>  Dalam hal transaksi <b>off-chain</b> (Petir) hal-hal terjadi dengan cara lain.  Setiap node petir memiliki <i>(mungkin banyak)</i> alamat on-chain, dari mana semua dimulai.  Ketika dana diterima pada alamat tersebut, menggunakan teknik kriptografi node dapat membuka apa yang disebut <i>saluran kilat</i> ke node lain, yang berarti bahwa kedua node membuat perjanjian tentang ketersediaan dana di antara mereka.  Kemudian, semua transaksi yang dilakukan melalui saluran (memiliki transaksi sendiri, atau mungkin merupakan transaksi yang dirutekan dari node lain) disimpan hanya pada dua node tersebut (dan simpul perantara jika ada).  Satu-satunya transaksi yang disimpan dalam jaringan blockchain adalah pembukaan dan penutupan transaksi saluran.  Inilah sebabnya mengapa transaksi Lightning kita sebut <b>off-chain</b> .  Kebanyakan mereka hanya ada di file database node. </p><br><h3>  Semuanya divisualisasikan pada diagram </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/3c6/636/b8c/3c6636b8c98d52aab9bd09ff9c52afcb.png" alt="gambar"><br><p>  Cerita pendek: </p><br><p>  1) Pengguna mengirim pesan dan meminta setoran ke bot di <b>Telegram</b> </p><br><p>  2) Telegram memicu <b>aplikasi python</b> bot </p><br><p>  3) <b>aplikasi python</b> mengirimkan permintaan ke <b>BTCPayServer</b> </p><br><p>  4) BTCPayServer menghasilkan alamat masuk untuk BTC dan LTC, juga menghubungi <b>petir-biaya</b> , yang mana mendapatkan data dari <b>c-lightning</b> daemon.  Hasilnya, kami mendapatkan bingkai HTML yang ditangani dengan baik untuk pemrosesan pembayaran </p><br><p>  5) Pengguna membayar faktur dan akan melihat konfirmasi </p><br><p>  6) <b>BTCPayServer</b> mengirimkan <i>pemberitahuan pembayaran</i> <b>faktur</b> (IPN) ke url panggilan balik yang ditentukan, dalam hal ini kami <br>  akan masuk ke <b>callbacks.py</b> (aplikasi python lain untuk mendengarkan panggilan balik) </p><br><p>  7) Menurut detail pembayaran, saldo pengguna diubah dan pengguna mendapat notifikasi </p><br><p>  <i>... jika pengguna memutuskan untuk menarik dana (kiat yang diterimanya) ...</i> </p><br><p>  8) <b>Aplikasi python Bot</b> mendengarkan teks atau gambar QR, ketika mendapat data faktur (string panjang karakter) kemudian mengirimkan permintaan untuk membayar faktur itu ke aplikasi python lain <b>paylightning.py *</b> , yang menginisialisasi pembayaran menggunakan c-lightning RPC </p><br><img src="https://habrastorage.org/getpro/habr/post_images/518/3dc/c81/5183dcc817817f1aa676ff74d17d08bb.png" alt="gambar"><br><p>  <i>* Agar adil, saya perlu menyebutkan bahwa paylightning.py pay-wrapper saya tidak lengkap dan dapat mengembalikan false-negative dalam beberapa kasus tertentu.</i>  <i>Anda harus menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pembungkus pembayaran yang teruji dengan baik untuk c-petir</a> jika digunakan seperti produksi.</i> </p><br><p>  Pengguna dapat saling mengirim tip tentang obrolan grup dan mengirim / menerima <b>nilai</b> tanpa batas.  Tapi itu belum semuanya.  Berkat protokol Lightning Network, yang ada dalam semacam jaringan pembayaran yang disatukan dan disederhanakan Anda dapat mengirim koin saldo yang sama ke aplikasi yang sama sekali berbeda.  Ada tip-bot bitcoin lain di telegram - @lntxbot.  Pengguna dapat meminta setoran ke bot ini </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/f09/c3a/ef9/f09c3aef995f7a82560987646b0d8ee0.png" alt="gambar"><img src="https://habrastorage.org/getpro/habr/post_images/1e2/344/82c/1e234482c56aa0df1d4b341ecfe3beb8.png" alt="gambar"></p><br><p>  Cukup meneruskan data dari @lntxbot ke @atomic_tipbot dan voul'a! </p><br><p>  Ini bukan lagi 'pertukaran nomor dalam basis data' tetapi pembayaran antara dua 'basis data' yang terpisah dan tidak terkait.  Bot sudah memiliki beberapa 'LApps' terintegrasi: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">sat2.io</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">lnsms.world</a> . </p><br><p>  <b>Anda mungkin bertanya, apa sebenarnya arti <i>integrasi LApp</i> ?</b> </p><br><p>  Setiap node <i>Lightning Network</i> bertindak sebagai dompet bitcoin.  Ini memiliki keseimbangan on-chain dan off-chain.  Saldo on-chain biasanya digunakan untuk membuka saluran dan menyimpan dana dari saluran tertutup, dalam tugas pemeliharaan simpul pendek.  Saldo off-chain adalah apa yang sebenarnya digunakan untuk bertukar dana antar node.  Fungsi inti dari setiap node adalah kemampuan untuk mengirim atau menerima dana, sehingga simpul sebagai perangkat lunak menyediakan metode <i><b>pembayaran</b></i> dan <i><b>faktur</b></i> .  Saya akan menunjukkan secara singkat bagaimana ini terjadi: </p><br><pre><code class="bash hljs">user@ln-node:/ % lightning-cli invoice 1000000000 internal_description external_description { <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"64c0c8f5f8f708b08487ad1376f3d256f92ccb9606987ba395c2b4193efde5a0"</span></span>, <span class="hljs-string"><span class="hljs-string">"expires_at"</span></span> : 1558709834, <span class="hljs-string"><span class="hljs-string">"bolt11"</span></span> : <span class="hljs-string"><span class="hljs-string">"lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6"</span></span> }</code> </pre> <br><p>  <a href="">Faktur BOLT11</a> dibuat dalam kasus ini, yang merupakan format terpadu untuk permintaan pembayaran dalam jaringan Bitcoin (dan juga Litecoin).  String ini mencakup data tentang penerima faktur, jumlah, cap waktu, kedaluwarsa, dll.  Untuk memecahkan kode string ini c-lightning menyediakan metode decodepay: </p><br><pre> <code class="bash hljs">user@ln-node:/ % lightning-cli decodepay lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6 { <span class="hljs-string"><span class="hljs-string">"currency"</span></span> : <span class="hljs-string"><span class="hljs-string">"bc"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558105034, <span class="hljs-string"><span class="hljs-string">"expiry"</span></span> : 604800, <span class="hljs-string"><span class="hljs-string">"payee"</span></span> : <span class="hljs-string"><span class="hljs-string">"025a14b8ed40583d67aec92da19453e0b2d1fbbf75f96f85d3dd0ff61a51ee0490"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 1000000000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"1000000000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> : <span class="hljs-string"><span class="hljs-string">"external_description"</span></span>, <span class="hljs-string"><span class="hljs-string">"min_final_cltv_expiry"</span></span> : 10, <span class="hljs-string"><span class="hljs-string">"routes"</span></span> : [ [ { <span class="hljs-string"><span class="hljs-string">"pubkey"</span></span> : <span class="hljs-string"><span class="hljs-string">"03a20c0c2ae4508b669a70e5f82f08f69a3da5da3bf0c973673c3fe977db0f61e3"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_channel_id"</span></span> : <span class="hljs-string"><span class="hljs-string">"574012x1255x1"</span></span>, <span class="hljs-string"><span class="hljs-string">"fee_base_msat"</span></span> : 1000, <span class="hljs-string"><span class="hljs-string">"fee_proportional_millionths"</span></span> : 1, <span class="hljs-string"><span class="hljs-string">"cltv_expiry_delta"</span></span> : 144 } ] ], <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"64c0c8f5f8f708b08487ad1376f3d256f92ccb9606987ba395c2b4193efde5a0"</span></span>, <span class="hljs-string"><span class="hljs-string">"signature"</span></span> : <span class="hljs-string"><span class="hljs-string">"304502210099f31dffd18b6db8296637db3e3a1ffbaf7b7db087a2ad1eedb7639f25e78b25022079038370073681aa1e1a7a05de6588e98ead078896d0a37a15b755c212dc3d37"</span></span> }</code> petir-cli decodepay lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6 <code class="bash hljs">user@ln-node:/ % lightning-cli decodepay lnbc10m1pwdaj72pp5vnqv3a0c7uytppy845fhdu7j2mujejukq6v8hgu4c26pj0hauksqdpqv4u8getjdeskchmyv4ekxunfwp6xjmmwxqyjw5qcqp2rzjqw3qcrp2u3ggke56wrjlstcg76drmfw680cvjum88sl7ja7mpas7xzxz8sqqfecqqyqqqqlgqqqqqqgqjqn8e3ml733dkms2txxldnuwsllwhhkldss73268hdka3e7f083vjhjqurwqrndqd2rcd85pw7vkywnr4dq7yfd59r0g2mw4wzztwr6dcprxzej6 { <span class="hljs-string"><span class="hljs-string">"currency"</span></span> : <span class="hljs-string"><span class="hljs-string">"bc"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558105034, <span class="hljs-string"><span class="hljs-string">"expiry"</span></span> : 604800, <span class="hljs-string"><span class="hljs-string">"payee"</span></span> : <span class="hljs-string"><span class="hljs-string">"025a14b8ed40583d67aec92da19453e0b2d1fbbf75f96f85d3dd0ff61a51ee0490"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 1000000000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"1000000000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> : <span class="hljs-string"><span class="hljs-string">"external_description"</span></span>, <span class="hljs-string"><span class="hljs-string">"min_final_cltv_expiry"</span></span> : 10, <span class="hljs-string"><span class="hljs-string">"routes"</span></span> : [ [ { <span class="hljs-string"><span class="hljs-string">"pubkey"</span></span> : <span class="hljs-string"><span class="hljs-string">"03a20c0c2ae4508b669a70e5f82f08f69a3da5da3bf0c973673c3fe977db0f61e3"</span></span>, <span class="hljs-string"><span class="hljs-string">"short_channel_id"</span></span> : <span class="hljs-string"><span class="hljs-string">"574012x1255x1"</span></span>, <span class="hljs-string"><span class="hljs-string">"fee_base_msat"</span></span> : 1000, <span class="hljs-string"><span class="hljs-string">"fee_proportional_millionths"</span></span> : 1, <span class="hljs-string"><span class="hljs-string">"cltv_expiry_delta"</span></span> : 144 } ] ], <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"64c0c8f5f8f708b08487ad1376f3d256f92ccb9606987ba395c2b4193efde5a0"</span></span>, <span class="hljs-string"><span class="hljs-string">"signature"</span></span> : <span class="hljs-string"><span class="hljs-string">"304502210099f31dffd18b6db8296637db3e3a1ffbaf7b7db087a2ad1eedb7639f25e78b25022079038370073681aa1e1a7a05de6588e98ead078896d0a37a15b755c212dc3d37"</span></span> }</code> </pre> <br><p>  Jika kita perlu membayar faktur, kita harus menggunakan metode pembayaran c-lightning: </p><br><pre> <code class="bash hljs">user@ln-node:/ % lightning-cli pay lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j { <span class="hljs-string"><span class="hljs-string">"id"</span></span> : 163, <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"c3e644a005f56e33df89facbce2c9dfcabbef5d105285a98272cacc77ab2de63"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span> : <span class="hljs-string"><span class="hljs-string">"03021c5f5f57322740e4ee6936452add19dc7ea7ccf90635f95119ab82a62ae268"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 200000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi_sent"</span></span> : 200003, <span class="hljs-string"><span class="hljs-string">"amount_sent_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200003msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558106072, <span class="hljs-string"><span class="hljs-string">"status"</span></span> : <span class="hljs-string"><span class="hljs-string">"complete"</span></span>, <span class="hljs-string"><span class="hljs-string">"payment_preimage"</span></span> : <span class="hljs-string"><span class="hljs-string">"1a9552b9f4e9199e26839353f870b12cc85b7674a2fb134e78aa370032611019"</span></span>, <span class="hljs-string"><span class="hljs-string">"bolt11"</span></span> : <span class="hljs-string"><span class="hljs-string">"lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j"</span></span> }</code> petir-cli membayar lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j <code class="bash hljs">user@ln-node:/ % lightning-cli pay lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j { <span class="hljs-string"><span class="hljs-string">"id"</span></span> : 163, <span class="hljs-string"><span class="hljs-string">"payment_hash"</span></span> : <span class="hljs-string"><span class="hljs-string">"c3e644a005f56e33df89facbce2c9dfcabbef5d105285a98272cacc77ab2de63"</span></span>, <span class="hljs-string"><span class="hljs-string">"destination"</span></span> : <span class="hljs-string"><span class="hljs-string">"03021c5f5f57322740e4ee6936452add19dc7ea7ccf90635f95119ab82a62ae268"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi"</span></span> : 200000, <span class="hljs-string"><span class="hljs-string">"amount_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200000msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"msatoshi_sent"</span></span> : 200003, <span class="hljs-string"><span class="hljs-string">"amount_sent_msat"</span></span> : <span class="hljs-string"><span class="hljs-string">"200003msat"</span></span>, <span class="hljs-string"><span class="hljs-string">"created_at"</span></span> : 1558106072, <span class="hljs-string"><span class="hljs-string">"status"</span></span> : <span class="hljs-string"><span class="hljs-string">"complete"</span></span>, <span class="hljs-string"><span class="hljs-string">"payment_preimage"</span></span> : <span class="hljs-string"><span class="hljs-string">"1a9552b9f4e9199e26839353f870b12cc85b7674a2fb134e78aa370032611019"</span></span>, <span class="hljs-string"><span class="hljs-string">"bolt11"</span></span> : <span class="hljs-string"><span class="hljs-string">"lnbc2u1pwdana3pp5c0nyfgq974hr8huflt9uutyalj4maaw3q5594xp89jkvw74jme3sdql2pshjgr5dus8q6r0dejjqampd3kx2aqcqzpgwjgn45gy80jwjhgm3tpsxg33j6h6pehdus0mnjerrad943cz3vs83g30lyhlhfjxtqvtl76vttkuhs5jekuxpsqmf98l8265pwmm76gp4e7z6j"</span></span> }</code> </pre> <br><p>  Semua status pembayaran ditangani oleh seluruh jaringan dan simpul Anda sendiri.  Anda tidak perlu (tetapi memiliki kemungkinan untuk melakukannya) untuk berkomunikasi sama sekali dengan pengembang aplikasi sisi penerima atau API mereka, beberapa penyedia pemrosesan kartu atau bank apa pun untuk mendapatkan konfirmasi tentang pembayaran Anda atau untuk mengeluarkan dana dari Anda sendiri akun.  Tidak ada pengembalian biaya atau jenis pengaruh eksternal lain pada saldo akun Anda.  Yang Anda butuhkan hanyalah perangkat lunak yang bertindak berdasarkan aturan jaringan yang didesentralisasi.  Ini adalah solusi untuk menukar nilai melalui internet, tanpa perlu arbiter apa pun di tengah yang memutuskan tentang kompatibilitas pembayaran Anda dengan beberapa aturan, terkadang bahkan sebelumnya tidak diketahui oleh semua pihak.  Tidak ada aturan "internal" dalam bitcoin, semua aturan yang harus dipenuhi aplikasi Anda terbuka dan diketahui. </p><br><p>  Hal ini memungkinkan pertukaran nilai <b>langsung</b> , <b>hampir gratis</b> dan <b>instan</b> melalui internet antara orang atau bahkan perangkat lunak itu sendiri dengan cara yang benar-benar otonom. </p><br><p>  Jika ada cara untuk mendapatkan data pembayaran dari aplikasi lain, maka Anda dapat bertindak dengan itu dalam arti finansial.  Seperti dalam contoh kami, lnsms.world adalah aplikasi web yang memungkinkan Anda mengirim sms ke nomor apa pun dan membayarnya dengan bitcoin.  Untuk mengintegrasikan opsi seperti itu di aplikasi kami, kami hanya perlu mengirimkan data yang diperlukan dari formulir web ke lnsms.world: </p><br><pre> <code class="python hljs">payload = { <span class="hljs-string"><span class="hljs-string">'number'</span></span>: phone_number, <span class="hljs-string"><span class="hljs-string">'text'</span></span>: text, <span class="hljs-string"><span class="hljs-string">'force_unicode'</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } send_req = requests.post(<span class="hljs-string"><span class="hljs-string">'https://lnsms.world/invoice'</span></span>, data=payload) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> send_req.status_code == <span class="hljs-number"><span class="hljs-number">201</span></span>: plain_invoice = str(send_req.text)</code> </pre> <br><p>  Saya tidak tahu untuk alasan apa, tetapi lnsms merespons dengan 201 kode status HTTP dan mengembalikan faktur BOLT11.  Ya, itu cukup untuk membayar faktur ini dan pengguna kami akan mengirim sms segera setelah pembayaran diterima.  Kami dapat membebankan biaya atas atau tidak, itu adalah pilihan gratis kami. </p><br><p>  Sekarang, bayangkan, bahwa bot Anda sebenarnya adalah aplikasi yang lebih berguna dan tidak membayar bot lain, tetapi beberapa entitas lain, yang terhubung ke Internet.  Atau, itu mungkin pembayaran antara perangkat lunak, mesin, toko, penyedia layanan secara teratur berulang setiap beberapa detik?  Apakah Anda merasakan kekuatan pembayaran mikro?  Seperti itulah tampilan Internet of Things.  Sudah sekarang ada proyek seperti <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://althea.org/</a> dan dalam waktu dekat kami akan menghadapi perubahan besar di bidang yang kita sebut e-commerce. </p><br><p>  Jika Anda menyukai posting ini dan akan mencoba pembayaran bitcoin sendiri, Anda dapat <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">meninggalkan saya tip di halaman tip saya</a> . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id452666/">https://habr.com/ru/post/id452666/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id452648/index.html">PHP: Cara mem-parsing file XML yang kompleks dan tidak tenggelam dalam kode asli</a></li>
<li><a href="../id452652/index.html">Security Week 21: lubang di Whatsapp, kerentanan baru dalam prosesor Intel, Zero-Day di Windows</a></li>
<li><a href="../id452656/index.html">Pengembangan "firmware" paling sederhana untuk FPGA yang dipasang di Redd, dan debugging menggunakan tes memori sebagai contoh</a></li>
<li><a href="../id452662/index.html">Server HPE di Selectel</a></li>
<li><a href="../id452664/index.html">Saya menagih $ 18.000 untuk halaman web statis ... dan saya lolos begitu saja</a></li>
<li><a href="../id452668/index.html">Cara memeriksa cookie untuk kepatuhan GDPR - alat terbuka baru akan membantu</a></li>
<li><a href="../id452670/index.html">Siapa insinyur data, dan bagaimana mereka menjadi?</a></li>
<li><a href="../id452672/index.html">Habr Mingguan Temui Rilis Percontohan Habrapodcast</a></li>
<li><a href="../id452674/index.html">Acara digital di Moskow dari 21 Mei hingga 26 Mei</a></li>
<li><a href="../id452682/index.html">Prakiraan dan diskusi: sistem penyimpanan hybrid akan memberi jalan ke semua-flash</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>