<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤˜ ğŸ’ ğŸ‘©ğŸ¼â€ğŸ”¬ äº†è§£JavaScriptæ‰¿è¯º ğŸ‘©â€ğŸ¤ ğŸ§ ğŸ§‘ğŸ¾</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ç¾å¥½çš„ä¸€å¤©ï¼Œå“ˆä¼¯ï¼ æˆ‘å‘æ‚¨ä»‹ç»Sukhjinder Aroraæ’°å†™çš„æ–‡ç« â€œ JavaScriptä¸­çš„ç†è§£æ‰¿è¯ºâ€ ã€‚ 



 ç¿»è¯‘ä½œè€…ï¼šä»¥åŠä½œè€…æœ¬äººï¼Œæˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚ æ‹œæ‰˜ï¼Œå¦‚æœå¥¹çœŸçš„å¸®åŠ©æ‚¨è‡ªå·±å­¦ä¹ äº†ä¸€äº›æ–°çŸ¥è¯†ï¼Œé‚£ä¹ˆä¸è¦å¤ªæ‡’æƒ°ï¼Œä¸å»é˜…è¯»åŸå§‹æ–‡ç« å¹¶æ„Ÿè°¢ä½œè€…ï¼ æˆ‘å¾ˆé«˜å…´æ”¶åˆ°æ‚¨çš„åé¦ˆï¼ 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>äº†è§£JavaScriptæ‰¿è¯º</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439746/"> ç¾å¥½çš„ä¸€å¤©ï¼Œå“ˆä¼¯ï¼ æˆ‘å‘æ‚¨ä»‹ç»Sukhjinder Aroraæ’°å†™çš„æ–‡ç« <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">â€œ JavaScriptä¸­çš„ç†è§£æ‰¿è¯ºâ€</a> ã€‚ <br><br><img src="https://habrastorage.org/webt/ox/6m/oa/ox6moan9gwhmc2oouqbhyfzumtm.png"><br><a name="habracut"></a><br>  <i>ç¿»è¯‘ä½œè€…ï¼šä»¥åŠä½œè€…æœ¬äººï¼Œæˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚</i>  <i>æ‹œæ‰˜ï¼Œå¦‚æœå¥¹çœŸçš„å¸®åŠ©æ‚¨è‡ªå·±å­¦ä¹ äº†ä¸€äº›æ–°çŸ¥è¯†ï¼Œé‚£ä¹ˆä¸è¦å¤ªæ‡’æƒ°ï¼Œä¸å»é˜…è¯»åŸå§‹æ–‡ç« å¹¶æ„Ÿè°¢ä½œè€…ï¼</i>  <i>æˆ‘å¾ˆé«˜å…´æ”¶åˆ°æ‚¨çš„åé¦ˆï¼</i> <i><br><br></i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é“¾æ¥åˆ°åŒä¸€ä½œè€…åœ¨å¼‚æ­¥JavaScriptä¸Šçš„æ–‡ç« ç¿»è¯‘</a> ã€‚</i> <br><br>  JavaScriptæ˜¯ä¸€ç§å•çº¿ç¨‹ç¼–ç¨‹è¯­è¨€ï¼Œè¿™æ„å‘³ç€ä¸€æ¬¡å¯ä»¥å®Œæˆä¸€ä»¶äº‹æƒ…ã€‚ åœ¨ES6ä¹‹å‰ï¼Œæˆ‘ä»¬ä½¿ç”¨å›è°ƒæ¥ç®¡ç†å¼‚æ­¥ä»»åŠ¡ï¼Œä¾‹å¦‚ç½‘ç»œè¯·æ±‚ã€‚ <br><br> ä½¿ç”¨promiseï¼Œæˆ‘ä»¬å¯ä»¥é¿å…â€œ hellå›è°ƒâ€ï¼Œå¹¶ä½¿æˆ‘ä»¬çš„ä»£ç æ›´ç®€æ´ï¼Œæ›´å…·å¯è¯»æ€§ä¸”æ›´æ˜“äºç†è§£ã€‚ <br><br> å‡è®¾æˆ‘ä»¬æƒ³å¼‚æ­¥åœ°ä»æœåŠ¡å™¨è·å–ä¸€äº›æ•°æ®ï¼Œä½¿ç”¨å›è°ƒï¼Œæˆ‘ä»¬å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š <br><br><pre><code class="javascript hljs">getData(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x); getMoreData(x, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">y</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(y); getSomeMoreData(y, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">z</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(z); }); }); });</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨<i>getDataï¼ˆï¼‰</i>å‡½æ•°ä»æœåŠ¡å™¨è¯·æ±‚ä¸€äº›æ•°æ®ï¼Œè¯¥å‡½æ•°åœ¨å›è°ƒå‡½æ•°å†…éƒ¨æ¥æ”¶æ•°æ®ã€‚ åœ¨å›è°ƒå‡½æ•°ä¸­ï¼Œæˆ‘é€šè¿‡è°ƒç”¨<i>getMoreDataï¼ˆï¼‰</i>å‡½æ•°ï¼Œå°†å…ˆå‰çš„æ•°æ®ä½œä¸ºå‚æ•°ä¼ é€’<i>ç­‰ç­‰æ¥</i>è¯·æ±‚å…¶ä»–æ•°æ®ã€‚ <br><br> è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„â€œå›è°ƒåœ°ç‹±â€ï¼Œå…¶ä¸­æ¯ä¸ªå›è°ƒåµŒå¥—åœ¨å¦ä¸€ä¸ªå›è°ƒä¸­ï¼Œå¹¶ä¸”æ¯ä¸ªå†…éƒ¨å›è°ƒéƒ½å–å†³äºå…¶çˆ¶çº§ã€‚ <br><br> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨promiseé‡å†™ä¸Šé¢çš„ä»£ç ç‰‡æ®µï¼š <br><br><pre> <code class="javascript hljs">getData() .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(x); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getMoreData(x); }) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">y</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(y); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getSomeMoreData(y); }) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">z</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(z); });</code> </pre> <br> æ‚¨å¯ä»¥çœ‹åˆ°æ¯”ç¬¬ä¸€ä¸ªå›è°ƒç¤ºä¾‹æ›´å…·å¯è¯»æ€§çš„å†…å®¹ã€‚ <br><br><h2> ä»€ä¹ˆæ˜¯è¯ºè¨€ï¼Ÿ </h2><br>  Promiseï¼ˆæ‰¿è¯ºï¼‰æ˜¯ä¸€ä¸ªåŒ…å«å¼‚æ­¥æ“ä½œçš„å°†æ¥å€¼çš„å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä»æœåŠ¡å™¨è¯·æ±‚ä¸€äº›æ•°æ®ï¼ŒPromisæ‰¿è¯ºæˆ‘ä»¬å°†æ¥æ”¶è¿™äº›æ•°æ®ï¼Œä»¥å¤‡å°†æ¥ä½¿ç”¨ã€‚ <br><br> åœ¨æ·±å…¥æ¢è®¨æ‰€æœ‰è¿™äº›æŠ€æœ¯å†…å®¹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹ä¸€ä¸‹è¯ºè¨€çš„æœ¯è¯­ã€‚ <br><br><h3> æ‰¿è¯ºçŠ¶æ€ </h3><br>  JavaScriptä¸­çš„æ‰¿è¯ºä¸ç°å®ç”Ÿæ´»ä¸­çš„æ‰¿è¯ºä¸€æ ·ï¼Œå…·æœ‰3ä¸ªçŠ¶æ€ã€‚ å¯ä»¥æ˜¯1ï¼‰æœªè§£å†³ï¼ˆå¾…å¤„ç†ï¼‰ï¼Œ2ï¼‰å·²è§£å†³/å·²è§£å†³ï¼ˆå·²å®Œæˆï¼‰æˆ–3ï¼‰è¢«æ‹’ç»/è¢«æ‹’ç»ã€‚ <br><br><img src="https://habrastorage.org/webt/pk/hr/zz/pkhrzzgtdsgqvtptwn26gmtbjhk.png"><br><br>  <b>æœªè§£å†³æˆ–å¾…å¤„ç†</b> -å¦‚æœç»“æœæœªå‡†å¤‡å¥½ï¼ŒPromiså°†ç­‰å¾…ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒæœŸæœ›æŸäº›äº‹æƒ…å®Œæˆï¼ˆä¾‹å¦‚ï¼Œå¼‚æ­¥æ“ä½œçš„å®Œæˆï¼‰ã€‚ <br>  <b>å·²è§£å†³æˆ–å·²å®Œæˆ</b> -å¦‚æœç»“æœå¯ç”¨ï¼Œåˆ™æ‰¿è¯ºå·²è§£å†³ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸäº›ä¸œè¥¿å®Œæˆäº†å…¶æ‰§è¡Œï¼ˆä¾‹å¦‚ï¼Œå¼‚æ­¥æ“ä½œï¼‰ï¼Œå¹¶ä¸”ä¸€åˆ‡é¡ºåˆ©ã€‚ <br>  <b>å·²æ‹’ç»</b> -å¦‚æœæ‰§è¡ŒæœŸé—´å‘ç”Ÿé”™è¯¯ï¼Œåˆ™Promisä¼šè¢«æ‹’ç»ã€‚ <br><br> ç°åœ¨æˆ‘ä»¬çŸ¥é“PromisåŠå…¶æœ¯è¯­æ˜¯ä»€ä¹ˆï¼Œè®©æˆ‘ä»¬å›åˆ°Promiseçš„å®é™…éƒ¨åˆ†ã€‚ <br><br><h3> åˆ›å»ºæ‰¿è¯º </h3><br> åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨åªä¼šä½¿ç”¨æ‰¿è¯ºè€Œä¸æ˜¯åˆ›å»ºæ‰¿è¯ºï¼Œä½†æ˜¯äº†è§£å¦‚ä½•åˆ›å»ºå®ƒä»¬å¾ˆé‡è¦ã€‚ <br><br> è¯­æ³•ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { ... });</code> </pre> <br> æˆ‘ä»¬ä½¿ç”¨Promisesæ„é€ å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„promiseï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå³å›è°ƒï¼Œä¹Ÿç§°ä¸ºæ‰§è¡Œå‡½æ•°ï¼Œå®ƒæ¥å—2ä¸ªå›è°ƒï¼Œ <i>resolve</i>å’Œ<i>reject</i> ã€‚ <br><br> åˆ›å»ºæ‰¿è¯ºåï¼Œç«‹å³æ‰§è¡Œæ‰§è¡ŒåŠŸèƒ½ã€‚ é€šè¿‡è°ƒç”¨<i>resolveï¼ˆï¼‰</i>åšå‡ºæ‰¿è¯ºï¼Œå¹¶ç”±<i>rejectï¼ˆï¼‰æ‹’ç»</i> ã€‚ ä¾‹å¦‚ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(allWentWell) { resolve(<span class="hljs-string"><span class="hljs-string">'  !'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { reject(<span class="hljs-string"><span class="hljs-string">'-   '</span></span>); } });</code> </pre> <br>  <i>resolveï¼ˆï¼‰</i>å’Œ<i>rejectï¼ˆï¼‰</i>é‡‡ç”¨ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œé€»è¾‘è¡¨è¾¾å¼ï¼Œæ•°ç»„æˆ–å¯¹è±¡ã€‚ <br><br> è®©æˆ‘ä»¬çœ‹å¦ä¸€ä¸ªç¤ºä¾‹ï¼Œä»¥å……åˆ†ç†è§£å¦‚ä½•åˆ›å»ºæ‰¿è¯ºã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> randomNumber = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random(); setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(randomNumber &lt; <span class="hljs-number"><span class="hljs-number">.6</span></span>) { resolve(<span class="hljs-string"><span class="hljs-string">'  !'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { reject(<span class="hljs-string"><span class="hljs-string">'-   '</span></span>); } }, <span class="hljs-number"><span class="hljs-number">2000</span></span>); });</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä½¿ç”¨Promisæ„é€ å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ–°çš„Promiseã€‚ åˆ›å»ºæ‰¿è¯ºå2ç§’é’Ÿæ‰§è¡Œæˆ–æ‹’ç»æ‰¿è¯ºã€‚ å¦‚æœ<i>randomNumber</i>å°äº.6ï¼Œåˆ™æ‰§è¡Œè¯ºè¨€ï¼Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œåˆ™æ‹’ç»ã€‚ <br><br> åˆ›å»ºæ‰¿è¯ºåï¼Œå®ƒå°†å¤„äºå¾…å¤„ç†çŠ¶æ€ï¼Œå¹¶ä¸”å…¶å€¼å°†æ˜¯<i>undefined</i> ã€‚ <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/cs/wr/c2/cswrc2jdrixhaguff2w9oijiyf4.png"></div><br>  2ç§’åï¼Œè®¡æ—¶å™¨ç»“æŸï¼Œpromiseå°†éšæœºæ‰§è¡Œæˆ–æ‹’ç»ï¼Œå…¶å€¼å°†æ˜¯ä¼ é€’ç»™<i>resolve</i>æˆ–<i>reject</i>å‡½æ•°çš„å€¼ã€‚ ä¸‹é¢æ˜¯ä¸¤ç§æƒ…å†µçš„ç¤ºä¾‹ï¼š <br><br> æˆåŠŸå®Œæˆï¼š <br><br><img src="https://habrastorage.org/webt/eq/3y/ss/eq3ysskatvuvjnvpoaz9k7zdmvi.png"><br><br> æ‰¿è¯ºæ‹’ç»ï¼š <br><br><img src="https://habrastorage.org/webt/qn/7v/ee/qn7vee1ebi19qgo4zzv72tgpfjg.png"><br><br>  <b>æ³¨æ„ï¼š</b>æ‰¿è¯ºåªèƒ½æ‰§è¡Œä¸€æ¬¡æˆ–æ‹’ç»ä¸€æ¬¡ã€‚ è¿›ä¸€æ­¥è°ƒç”¨<i>solveï¼ˆï¼‰</i>æˆ–<i>rejectï¼ˆï¼‰</i>ä¸ä¼šä»¥ä»»ä½•æ–¹å¼å½±å“promiseçš„çŠ¶æ€ã€‚ ä¸€ä¸ªä¾‹å­ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise resolved'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   reject('Promise rejected'); //       });</span></span></code> </pre> <br> ç”±äºé¦–å…ˆè°ƒç”¨äº†<i>resolveï¼ˆï¼‰</i> ï¼Œæ‰€ä»¥Promiseç°åœ¨çš„çŠ¶æ€ä¸ºâ€œå·²å®Œæˆâ€ã€‚ åç»­å¯¹<i>rejectï¼ˆï¼‰çš„</i>è°ƒç”¨ä¸ä¼šä»¥ä»»ä½•æ–¹å¼å½±å“promiseçš„çŠ¶æ€ã€‚ <br><br><h3> ä½¿ç”¨æ‰¿è¯º </h3><br> ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†å¦‚ä½•åˆ›å»ºæ‰¿è¯ºï¼Œç°åœ¨è®©æˆ‘ä»¬å¼„æ¸…æ¥šå¦‚ä½•åº”ç”¨å·²ç»åˆ›å»ºçš„æ‰¿è¯ºã€‚ æˆ‘ä»¬ä½¿ç”¨<i>thenï¼ˆï¼‰</i>å’Œ<i>catchï¼ˆï¼‰</i>æ–¹æ³•ä½¿ç”¨promiseã€‚ <br><br> ä¾‹å¦‚ï¼Œä½¿ç”¨<i>fetch</i>ä»APIæŸ¥è¯¢æ•°æ®ï¼Œè¿™å°†è¿”å›ä¸€ä¸ªpromiseã€‚ <br><br>  <i>.thenï¼ˆï¼‰</i> <b>è¯­æ³•ï¼š</b> <i>promise.thenï¼ˆsuccessCallbackï¼ŒfailureCallbackï¼‰</i> <br><br> å¦‚æœpromiseå·²æˆåŠŸæ‰§è¡Œï¼Œåˆ™è°ƒç”¨<i>successCallback</i> ã€‚ å®ƒé‡‡ç”¨ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ä¼ é€’ç»™<i>resolveï¼ˆï¼‰</i>çš„å€¼ã€‚ <br><br> å¦‚æœæ‰¿è¯ºå·²è¢«æ‹’ç»ï¼Œåˆ™è°ƒç”¨<i>failureCallback</i> ã€‚ å®ƒé‡‡ç”¨ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ˜¯æŒ‡å®šç»™<i>rejectï¼ˆï¼‰</i>çš„å€¼ã€‚ <br><br> ä¸€ä¸ªä¾‹å­ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> randomNumber = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(randomNumber &lt; <span class="hljs-number"><span class="hljs-number">.7</span></span>) { resolve(<span class="hljs-string"><span class="hljs-string">'  !'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { reject(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'-   '</span></span>)); } }); promise.then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); <span class="hljs-comment"><span class="hljs-comment">//  '  !' }, (error) =&gt; { console.log(error); //   } );</span></span></code> </pre> <br> å¦‚æœå·²æ‰§è¡Œè¯ºè¨€ï¼Œåˆ™ä½¿ç”¨ä¼ é€’ç»™<i>resolveï¼ˆï¼‰</i>çš„å€¼æ¥<i>è°ƒç”¨successCallback</i> ã€‚ å¹¶ä¸”å¦‚æœè¯ºè¨€è¢«æ‹’ç»ï¼Œé‚£ä¹ˆ<i>å°†</i>ä½¿ç”¨ä¼ é€’ç»™rejectï¼ˆï¼‰çš„å€¼æ¥<i>è°ƒç”¨failureCallback</i> ã€‚ <br><br>  <i>.catchï¼ˆï¼‰</i> <b>è¯­æ³•ï¼š</b> <i>promise.catch</i> <i>ï¼ˆfailureCallbackï¼‰</i> <br><br> æˆ‘ä»¬ä½¿ç”¨<i>catchï¼ˆï¼‰</i>å¤„ç†é”™è¯¯ã€‚ è¿™æ¯”<i>thenï¼ˆï¼‰</i>æ–¹æ³•å›è°ƒå†…éƒ¨çš„<i>failCallback</i>å†…éƒ¨çš„é”™è¯¯å¤„ç†æ›´å…·å¯è¯»æ€§ã€‚ <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { reject(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Error</span></span>(<span class="hljs-string"><span class="hljs-string">'-   '</span></span>)); }); promise .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); }) .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error); <span class="hljs-comment"><span class="hljs-comment">//   });</span></span></code> </pre> <br><h3> æ‰¿è¯ºé“¾ </h3><br>  <i>thenï¼ˆï¼‰</i>å’Œ<i>catchï¼ˆï¼‰</i>æ–¹æ³•è¿˜å¯ä»¥è¿”å›ä¸€ä¸ªæ–°çš„promiseï¼Œå¯ä»¥åœ¨ä¸Šä¸€ä¸ªthenï¼ˆï¼‰æ–¹æ³•çš„æœ«å°¾ç”±ä¸€ä¸ªå…¶ä»–thenï¼ˆï¼‰é“¾å¤„ç†ã€‚ <br><br> å½“æˆ‘ä»¬è¦å®Œæˆä¸€ç³»åˆ—æ‰¿è¯ºæ—¶ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ç³»åˆ—æ‰¿è¯ºã€‚ <br><br> ä¾‹å¦‚ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise1 '</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise2 '</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { reject(<span class="hljs-string"><span class="hljs-string">'Promise3 '</span></span>); }); promise1 .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); <span class="hljs-comment"><span class="hljs-comment">// Promise1  return promise2; }) .then((data) =&gt; { console.log(data); // Promise2  return promise3; }) .then((data) =&gt; { console.log(data); }) .catch((error) =&gt; { console.log(error); // Promise3  });</span></span></code> </pre> <br><h4> é‚£ä¹ˆè¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ </h4><br> æ»¡è¶³<i>promise1å</i> ï¼Œå°†è°ƒç”¨<i>thenï¼ˆï¼‰</i>æ–¹æ³•<i>ï¼Œ</i>è¯¥æ–¹æ³•è¿”å›promise2ã€‚ <br> æ¥ä¸‹æ¥ï¼Œå½“<i>promise2æ»¡è¶³æ—¶</i> ï¼Œ <i>ç„¶å</i>å†æ¬¡è°ƒç”¨<i>ï¼ˆï¼‰</i>å¹¶è¿”å›<i>promise3</i> ã€‚ <br><br> ç”±äºpromise3è¢«æ‹’ç»ï¼Œå› æ­¤è€Œä¸æ˜¯ä¸‹ä¸€ä¸ª<i>thenï¼ˆï¼‰</i> ï¼Œå°†è°ƒç”¨<i>catchï¼ˆï¼‰</i>æ¥å¤„ç†å¯¹<i>promise3</i>çš„æ‹’ç»ã€‚ <br><br>  <b>æ³¨æ„ï¼š</b>é€šå¸¸ï¼Œä¸€ä¸ª<i>catchï¼ˆï¼‰</i>æ–¹æ³•è¶³ä»¥å¤„ç†é“¾ä¸­ä»»ä½•promiseçš„æ‹’ç»ï¼ˆå¦‚æœæ­¤æ–¹æ³•ä½äºæœ«å°¾ï¼‰ã€‚ <br><br><h4> å¸¸è§é”™è¯¯ </h4><br> å¾ˆå¤šæ–°æ¥è€…é€šè¿‡å°†ä¸€äº›æ‰¿è¯ºæŠ•èµ„äºå…¶ä»–æ‰¿è¯ºä¸­è€ŒçŠ¯é”™ã€‚ ä¾‹å¦‚ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise1 '</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise2 '</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise3 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { reject(<span class="hljs-string"><span class="hljs-string">'Promise3 '</span></span>); }); promise1.then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> { <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data); <span class="hljs-comment"><span class="hljs-comment">// Promise1  promise2.then((data) =&gt; { console.log(data); // Promise2  promise3.then((data) =&gt; { console.log(data); }).catch((error) =&gt; { console.log(error); // Promise3  }); }).catch((error) =&gt; { console.log(error); }) }).catch((error) =&gt; { console.log(error); });</span></span></code> </pre> <br> å°½ç®¡è¿™å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œï¼Œä½†æ˜¯å®ƒè¢«è®¤ä¸ºæ˜¯ä¸å¥½çš„æ ·å¼ï¼Œå¹¶ä¸”ä½¿ä»£ç çš„å¯è¯»æ€§é™ä½ã€‚ å¦‚æœæ‚¨è¦æ‰§è¡Œä¸€ç³»åˆ—æ‰¿è¯ºï¼Œæœ€å¥½å°†å®ƒä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ”¾å…¥å¦ä¸€ä¸ªå†…ã€‚ <br><br><h3>  Promise.allï¼ˆï¼‰ </h3><br> æ­¤æ–¹æ³•æ¥å—ä¸€ä¸ªpromiseæ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„promiseï¼Œå½“æ‰¾åˆ°æˆ–æ‹’ç»äº†ä¸€ä¸ªpromiseæ—¶ï¼Œå°†æ‰§è¡Œæˆ–æ‹’ç»æ•°ç»„ä¸­çš„æ‰€æœ‰promiseæ—¶æ‰§è¡Œä¸€ä¸ªæ–°çš„promiseã€‚ ä¾‹å¦‚ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise1 '</span></span>); }, <span class="hljs-number"><span class="hljs-number">2000</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise2 '</span></span>); }, <span class="hljs-number"><span class="hljs-number">1500</span></span>); }); <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all([promise1, promise2]) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data[<span class="hljs-number"><span class="hljs-number">0</span></span>], data[<span class="hljs-number"><span class="hljs-number">1</span></span>])) .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error));</code> </pre> <br> åœ¨è¿™é‡Œï¼Œ <i>thenï¼ˆï¼‰</i>å†…çš„å‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå…¶ä¸­åŒ…å«å°†promiseçš„å€¼ä¼ é€’åˆ°<i>Promise.allï¼ˆï¼‰çš„</i>é¡ºåºï¼ˆä»…å½“æ‰€æœ‰promiseè¢«æ‰§è¡Œæ—¶ï¼‰ã€‚ <br><br> æ‰¿è¯ºè¢«æ‹’ç»ï¼ŒåŸå› æ˜¯æ‹’ç»äº†å·²ä¼ è¾“æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªæ‰¿è¯ºã€‚ ä¾‹å¦‚ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise1 '</span></span>); }, <span class="hljs-number"><span class="hljs-number">2000</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { reject(<span class="hljs-string"><span class="hljs-string">'Promise2 '</span></span>); }, <span class="hljs-number"><span class="hljs-number">1500</span></span>); }); <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.all([promise1, promise2]) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data[<span class="hljs-number"><span class="hljs-number">0</span></span>], data[<span class="hljs-number"><span class="hljs-number">1</span></span>])) .catch(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">error</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(error)); <span class="hljs-comment"><span class="hljs-comment">// Promise2 </span></span></code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ‰¿è¯ºï¼Œå…¶ä¸­ä¸€ä¸ªåœ¨2ç§’åæ‰§è¡Œï¼Œå¦ä¸€ä¸ªåœ¨1.5ç§’ååç¦»ã€‚ ä¸€æ—¦ç¬¬äºŒä¸ªè¯ºè¨€è¢«æ‹’ç»ï¼Œä»<i>Promise.allï¼ˆï¼‰</i>è¿”å›çš„è¯ºè¨€å°±ä¼šè¢«æ‹’ç»ï¼Œè€Œæ— éœ€ç­‰å¾…ç¬¬ä¸€ä¸ª<i>è¯ºè¨€</i> ã€‚ <br><br> å½“æ‚¨æœ‰å¤šä¸ªæ‰¿è¯ºå¹¶ä¸”æƒ³çŸ¥é“æ‰€æœ‰æ‰¿è¯ºä½•æ—¶å®Œæˆæ—¶ï¼Œæ­¤æ–¹æ³•å¾ˆæœ‰ç”¨ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä»ç¬¬ä¸‰æ–¹APIè¯·æ±‚æ•°æ®ï¼Œå¹¶ä¸”ä»…åœ¨æ‰€æœ‰è¯·æ±‚æˆåŠŸåæ‰æƒ³å¯¹è¿™äº›æ•°æ®åšæŸäº‹ã€‚ <br><br> ç»“æœï¼Œæˆ‘ä»¬æœ‰äº†<i>Promise.allï¼ˆï¼‰</i> ï¼Œå®ƒç­‰å¾…æ‰€æœ‰promiseçš„æˆåŠŸæ‰§è¡Œï¼Œæˆ–è€…åœ¨æ£€æµ‹åˆ°promiseæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå¤±è´¥æ—¶å®Œæˆå…¶æ‰§è¡Œã€‚ <br><br><h3>  Promise.raceï¼ˆï¼‰ </h3><br> æ­¤æ–¹æ³•æ¥å—ä¸€ä¸ªpromiseæ•°ç»„ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„promiseï¼Œå¦‚æœè¯¥æ•°ç»„ä¸­çš„å·²å®ç°promiseæ—©äºè¢«æ‹’ç»ï¼Œåˆ™è¯¥æ–°promiseå°†åœ¨æ»¡è¶³æˆ–è¢«æ‹’ç»åç«‹å³æ‰§è¡Œã€‚ ä¾‹å¦‚ï¼š <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise1 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { resolve(<span class="hljs-string"><span class="hljs-string">'Promise1 '</span></span>); }, <span class="hljs-number"><span class="hljs-number">1000</span></span>); }); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> promise2 = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">resolve, reject</span></span></span><span class="hljs-function">) =&gt;</span></span> { setTimeout(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { reject(<span class="hljs-string"><span class="hljs-string">'Promise2 '</span></span>); }, <span class="hljs-number"><span class="hljs-number">1500</span></span>); }); <span class="hljs-built_in"><span class="hljs-built_in">Promise</span></span>.race([promise1, promise2]) .then(<span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(data)) <span class="hljs-comment"><span class="hljs-comment">// Promise1  .catch((error) =&gt; console.log(error));</span></span></code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸¤ä¸ªæ‰¿è¯ºï¼Œå…¶ä¸­ä¸€ä¸ªåœ¨1ç§’åæ‰§è¡Œï¼Œå¦ä¸€ä¸ªåœ¨1.5ç§’ååç¦»ã€‚ ä¸€æ—¦ç¬¬ä¸€ä¸ªè¯ºè¨€è¢«å®ç°ï¼Œä»Promise.raceï¼ˆï¼‰è¿”å›çš„è¯ºè¨€å°†å…·æœ‰å±¥è¡ŒçŠ¶æ€ï¼Œè€Œæ— éœ€ç­‰å¾…ç¬¬äºŒä¸ªè¯ºè¨€çš„çŠ¶æ€ã€‚ <br><br> åœ¨è¿™é‡Œï¼Œä¼ é€’ç»™<i>thenï¼ˆï¼‰</i>çš„<i>æ•°æ®</i>æ˜¯ç¬¬ä¸€ä¸ªæ‰§è¡Œçš„promiseçš„å€¼ã€‚ <br><br> ç»“æœï¼Œ <i>Promise.raceï¼ˆï¼‰</i>ç­‰å¾…ç¬¬ä¸€ä¸ªpromiseï¼Œå¹¶å°†å…¶çŠ¶æ€ä½œä¸ºè¿”å›çš„promiseçš„çŠ¶æ€ã€‚ <br><br>  <i>ç¿»è¯‘ä½œè€…çš„è¯„è®ºï¼šå› æ­¤ï¼Œåç§°æœ¬èº«ã€‚</i>  <i>ç§æ—-ç§æ—</i> <br><br><h2> ç»“è®º </h2><br> æˆ‘ä»¬äº†è§£äº†ä»€ä¹ˆæ˜¯è¯ºè¨€ï¼Œä»¥åŠå®ƒä»¬åœ¨JavaScriptä¸­çš„ä½œç”¨ã€‚ æ‰¿è¯ºåŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼š1ï¼‰åˆ›å»ºæ‰¿è¯ºå’Œ2ï¼‰ä½¿ç”¨æ‰¿è¯ºã€‚ å¤§å¤šæ•°æ—¶å€™ï¼Œæ‚¨å°†ä½¿ç”¨æ‰¿è¯ºè€Œä¸æ˜¯åˆ›å»ºæ‰¿è¯ºï¼Œä½†æ˜¯äº†è§£å®ƒä»¬æ˜¯å¦‚ä½•åˆ›å»ºçš„å¾ˆé‡è¦ã€‚ <br><br> ä»…æ­¤è€Œå·²ï¼Œå¸Œæœ›æœ¬æ–‡å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN439746/">https://habr.com/ru/post/zh-CN439746/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN439734/index.html">ä½¿ç”¨MicroK8åœ¨å‡ åˆ†é’Ÿå†…åœ¨æ¡Œé¢ä¸Šéƒ¨ç½²Kubernetes</a></li>
<li><a href="../zh-CN439736/index.html">MikroTikå’ŒKerio Controlä¹‹é—´çš„IPSec VPNè¿æ¥</a></li>
<li><a href="../zh-CN439738/index.html">æœç´¢â€œåšå¾—å¥½â€æŒ‰é’®ã€‚ Zyxelåœ¨ä¸­å°ä¼ä¸šç½‘ç»œä¸­</a></li>
<li><a href="../zh-CN439742/index.html">å…¥è¯»ITMOå¤§å­¦JetBrainsç¡•å£«è¯¾ç¨‹</a></li>
<li><a href="../zh-CN439744/index.html">éº»çœç†å·¥å­¦é™¢çš„ç ”ç©¶äººå‘˜è®¾è®¡äº†â€œæ•´æµå¤©çº¿â€ï¼Œå¯å°†Wi-Fiä¿¡å·è½¬æ¢ä¸ºç”µèƒ½</a></li>
<li><a href="../zh-CN439748/index.html">ï¼ƒ285ç§»åŠ¨å¼€å‘äººå‘˜çš„æœ‰è¶£ææ–™æ‘˜è¦ï¼ˆ2æœˆ4æ—¥è‡³10æ—¥ï¼‰</a></li>
<li><a href="../zh-CN439750/index.html">äº†è§£äº§å“ç®¡ç†-åœ¨å“ªé‡Œï¼Ÿ</a></li>
<li><a href="../zh-CN439752/index.html">å¤šæ ¸æ ¸ç£å…±æŒ¯</a></li>
<li><a href="../zh-CN439754/index.html">è°·æ­Œå°†å¼€å§‹å¼€å‘æ™ºèƒ½æ‰‹è¡¨</a></li>
<li><a href="../zh-CN439756/index.html">ä¸ºä»€ä¹ˆéœ€è¦çƒ­å£°å‘ç”Ÿå™¨ï¼Ÿ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>