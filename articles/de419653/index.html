<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👴🏼 👩🏻‍🌾 🧑🏾 So führen Sie Benutzersuchen auf GitHub ohne React + RxJS 6 + Recompose durch 📪 👨🏿‍🎤 Ⓜ️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dieser Artikel ist eine Antwort auf den Übersetzungsartikel „So suchen Sie Benutzer auf GitHub mit React + RxJS 6 + Recompose“ , in dem wir erst geste...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So führen Sie Benutzersuchen auf GitHub ohne React + RxJS 6 + Recompose durch</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/419653/">  Dieser Artikel ist eine Antwort auf den Übersetzungsartikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">„So suchen Sie Benutzer auf GitHub mit React + RxJS 6 + Recompose“</a> , in dem wir erst gestern gelernt haben, wie Sie React, RxJS und Recompose zusammen verwenden.  Nun, ich schlage jetzt vor zu sehen, wie dies ohne diese Tools implementiert werden kann. <br><br><img src="https://habrastorage.org/webt/o_/ig/ob/o_igobe416ik1nqyqp0pa8m0dbo.png"><br><a name="habracut"></a><br><br><div class="spoiler">  <b class="spoiler_title">Haftungsausschluss</b> <div class="spoiler_text">  <i>Es mag vielen scheinen, dass dieser Artikel Elemente des Trolling enthält, in Eile und auf einem Fan geschrieben wurde ... Also, das ist so.</i> <br></div></div><br><br>  Da dies ein Rückgabeartikel ist, habe ich beschlossen, ihn im gleichen Schritt-für-Schritt-Format wie das Original zu erstellen.  Darüber hinaus soll der Artikel die ursprüngliche Implementierung mit der hier beschriebenen vergleichen.  Daher enthält es eine Fülle von Referenzen und Zitaten aus dem Original.  Fangen wir an. <br><br><blockquote>  Dieser Artikel richtet sich an Personen mit Erfahrung mit React und RxJS.  Ich teile nur Vorlagen, die ich für das Erstellen einer solchen Benutzeroberfläche nützlich fand. </blockquote><br>  Dieser Artikel richtet sich an Personen mit Erfahrung mit Javascript (ES6), HTML und CSS.  Außerdem werde ich in meiner Implementierung das <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"verschwindende"</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SvelteJS-</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Framework verwenden</a> , aber es ist so einfach, dass Sie keine Erfahrung damit haben müssen, um den Code zu verstehen. <br><br>  Wir machen das Gleiche: <br><br><img src="https://habrastorage.org/webt/td/kk/jm/tdkkjm_g27kgq-l5h881veo9i5q.gif"><br><br><blockquote>  Arbeiten ohne Klassen mit einem Lebenszyklus oder setState. </blockquote><br>  Ja, ohne Klassen, die mit einem Lebenszyklus oder setState arbeiten.  Und auch ohne React, ReactDOM, RxJS, Recompose.  Und außerdem, ohne componentFromStream, createEventHandler, combinLatest, map, startWith, setObservableConfig, BehaviorSubject, merge, of, catchError, delay, filter, map, zupfen, switchMap, tap, {ein weiterer Bullshit} ... Kurz gesagt, Sie verstehen. <br><br><h3>  Vorbereitung </h3><br>  Alles, was Sie brauchen, ist in meinem <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">REPL-Beispiel</a> auf der SvelteJS-Website.  Sie können dort entweder lokal schnüffeln und die Quelle von dort herunterladen (Schaltfläche mit einem charakteristischen Symbol). <br><br>  Erstellen Sie zunächst eine einfache Datei App.html, die die Stammkomponente unseres Widgets sein wird, mit den folgenden Inhalten: <br><br><pre><code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GitHub username"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-selector-tag"><span class="css"><span class="hljs-selector-tag">input</span></span></span><span class="css"> { </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">font-size</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">20px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">1px</span></span></span><span class="css"> solid black; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">border-radius</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">3px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">margin-bottom</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css">; </span><span class="hljs-attribute"><span class="css"><span class="hljs-attribute">padding</span></span></span><span class="css">: </span><span class="hljs-number"><span class="css"><span class="hljs-number">10px</span></span></span><span class="css">; } </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><br>  Im Folgenden verwende ich die Stile aus dem Originalartikel.  Bitte beachten Sie, dass sie derzeit im Geltungsbereich sind, d. H.  gelten nur für diese Komponente und Sie können Tag-Namen gegebenenfalls sicher verwenden. <br><br>  Ich werde Stile direkt in die Komponenten schreiben, weil SFC und auch weil REPL den Export von CSS / JS / HTML in verschiedene Dateien nicht unterstützt, obwohl dies mit <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Svelte-Präprozessoren</a> einfach möglich ist. <br><br><h3>  <s>Neu komponieren</s> </h3><br>  Ausruhen ... <br><br><h3>  <s>Inline-Komponente</s> </h3><br>  ... Sonnenbaden ... <br><br><h3>  <s>Konfiguration</s> </h3><br>  ... Kaffee trinken ... <br><br><h3>  <s>+ RxJS neu zusammensetzen</s> </h3><br>  ... während andere ... <br><br><h3>  <s>Karte</s> </h3><br>  ... arbeiten. <br><br><h3>  Fügen Sie einen Ereignishandler hinzu </h3><br>  Natürlich nicht wirklich ein Handler, nur eine Bindung: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bind:value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">username</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GitHub username"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Nun, wir definieren den Standard-Benutzernamenwert: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">export</span></span></span><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { data() { </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">return</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">username</span></span></span><span class="javascript">: </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">''</span></span></span><span class="javascript"> }; } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Wenn Sie jetzt etwas in das Eingabefeld eingeben, ändert sich der Benutzername. <br><img src="https://habrastorage.org/webt/3h/xj/ew/3hxjewq7xkgqe_uhg5dqdbvt4wy.gif"><br><br><h3>  <s>Ei und Huhn Problem</s> </h3><br>  Keine Hühner, keine Eier, keine Probleme mit anderen Tieren, wir verwenden kein RxJS. <br><br><h3>  <s>Zusammen stricken</s> </h3><br>  Alles ist bereits reaktiv und verbunden.  Also trinken wir Kaffee. <br><br><h3>  Benutzerkomponente </h3><br><blockquote>  Diese Komponente ist für die Anzeige des Benutzers verantwortlich, dessen Namen wir an ihn übertragen.  Es erhält einen Wert von der App-Komponente und übersetzt ihn in eine AJAX-Anfrage. </blockquote><br>  "Wow wow wow, nimm es ruhig" © <br><br>  Bei uns wird diese Komponente dumm sein und nur eine schöne Benutzerkarte nach einem bisher bekannten Modell anzeigen.  Es spielt keine Rolle, woher die Daten stammen können und / oder an welcher Stelle der Schnittstelle wir diese Karte anzeigen möchten. <br><br>  Die User.html-Komponente sieht ungefähr so ​​aus: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"github-card user-card"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"header User"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"avatar"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/{login}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{avatar_url}&amp;s=80"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{name}</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>{name || login}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"status"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/{login}?tab=repositories"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{public_repos}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>Repos <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://gist.github.com/{login}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{public_gists}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>Gists <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://github.com/{login}/followers"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>{followers}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">strong</span></span></span><span class="hljs-tag">&gt;</span></span>Followers <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span><span class="css"><span class="css"> </span><span class="hljs-comment"><span class="css"><span class="hljs-comment">/*  */</span></span></span><span class="css"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br><h3>  <s>Jsx / css</s> </h3><br>  CSS wurde gerade zur Komponente hinzugefügt.  Anstelle von JSX haben wir <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">HTMLx</a> in Svelte eingebettet. <br><br><h3>  <s>Behälter</s> </h3><br>  Der Container ist eine beliebige übergeordnete Komponente für die Benutzerkomponente.  In diesem Fall ist es eine Komponente der App. <br><br><h3>  <s>debounceTime</s> </h3><br>  Das Debuggen der Texteingabe ist nicht sinnvoll, wenn die Operation nur den Wert im Datenmodell überschreibt.  In der Bindung selbst brauchen wir das also nicht. <br><br><h3>  <s>zupfen</s> </h3><br><h3>  <s>Filter</s> </h3><br><h3>  <s>Karte</s> </h3><br><h3>  Verbinden </h3><br>  Kehren wir zu App.html zurück und importieren Sie die Benutzerkomponente: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> User <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'./User.html'</span></span>;</code> </pre><br><br><h3>  Datenanforderung </h3><br><blockquote>  GitHub bietet eine API zum Abrufen von Benutzerinformationen: </blockquote><br>  Zur Demonstration schreiben wir einfach eine kleine api.js-Datei, die den Datenempfang abstrahiert und die entsprechende Funktion exportiert: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> axios <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-string"><span class="hljs-string">'axios'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUserCard</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">username</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> axios.get(<span class="hljs-string"><span class="hljs-string">`https://api.github.com/users/</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${username}</span></span></span><span class="hljs-string">`</span></span>) .then(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">res</span></span></span><span class="hljs-function"> =&gt;</span></span> res.data); }</code> </pre><br><br>  Und einfach so importieren wir diese Funktion in App.html. <br><br>  Jetzt formulieren wir das Problem in einer spezifischeren Sprache: Wir müssen einen anderen Wert ändern, wenn wir einen Wert im Datenmodell (Benutzername) ändern.  Wir nennen es jeweils Benutzer - Benutzerdaten, die wir von der API erhalten.  Reaktivität in ihrer ganzen Pracht. <br><br>  Schreiben Sie dazu eine berechnete Svelte-Eigenschaft mit der folgenden Konstruktion in App.html: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { getUserCard } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./api.js'</span></span></span><span class="javascript">; ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">user</span></span></span><span class="javascript">: </span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">{ username }</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> username &amp;&amp; getUserCard(username) } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Wenn Sie den Benutzernamen ändern, wird eine Anforderung zum Empfangen von Daten zu diesem Wert gesendet.  Da Ordner jedoch auf jede Änderung reagieren, dh auf die Eingabe in ein Textfeld, werden zu viele Anforderungen gestellt, und wir werden alle verfügbaren Grenzwerte schnell überschreiten. <br><br>  Im Originalartikel wird dieses Problem durch die in RxJS integrierte Funktion debounceTime gelöst, die verhindert, dass wir zu oft Daten anfordern.  Für unsere Implementierung können Sie die eigenständige Lösung verwenden, z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Debounce-Versprechen</a> oder eine andere geeignete Lösung, da Sie aus einer großen Auswahl wählen können. <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> debounce </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'debounce-promise'</span></span></span><span class="javascript">; </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> { getUserCard } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./api.js'</span></span></span><span class="javascript">; ... const getUser = debounce(getUserCard, </span><span class="hljs-number"><span class="javascript"><span class="hljs-number">1000</span></span></span><span class="javascript">); ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { ... computed: { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">user</span></span></span><span class="javascript">: </span><span class="hljs-function"><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"><span class="javascript"><span class="hljs-function"><span class="hljs-params">{ username }</span></span></span></span><span class="javascript"><span class="hljs-function">) =&gt;</span></span></span><span class="javascript"> username &amp;&amp; getUser(username) } }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Diese Bibliothek erstellt also eine Debounce-Version der an sie übergebenen Funktion, die wir dann in der berechneten Eigenschaft verwenden. <br><br><h3>  <s>switchMap</s> </h3><br><h3>  Ajax </h3><br><blockquote>  RxJS bietet eine eigene Ajax-Implementierung, die hervorragend mit switchMap funktioniert! </blockquote><br>  Da wir kein RxJS und insbesondere switchMap verwenden, können wir jede Bibliothek verwenden, um mit Ajax zu arbeiten. <br><br>  Ich benutze <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Axios,</a> weil es für mich bequem ist, aber Sie können alles verwenden und es ändert nichts an der Essenz der Sache. <br><br><h3>  Versuchen Sie es </h3><br>  Zuerst müssen wir die Benutzerkomponente registrieren, um sie als Vorlagen-Tag zu verwenden, da der Import selbst die Komponente nicht zum Vorlagenkontext hinzufügt: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">import</span></span></span><span class="javascript"> User </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">from</span></span></span><span class="javascript"> </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'./User.html'</span></span></span><span class="javascript">; ... export </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">default</span></span></span><span class="javascript"> { </span><span class="hljs-attr"><span class="javascript"><span class="hljs-attr">components</span></span></span><span class="javascript">: { User } ... }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Trotz des scheinbar übermäßigen Kritzelns können unter anderem Instanzen derselben Komponente unterschiedliche Tag-Namen zugewiesen werden, wodurch Ihre Vorlagen semantisch verständlicher werden. <br><br>  Ferner ist der Benutzerwert nicht die Daten selbst, sondern ein Versprechen für diese Daten.  Da wir Freeloader sind und überhaupt keine Arbeit machen wollen, trinken Sie einfach Kaffee mit Keksen. <br><br>  Um echte Daten an die Benutzerkomponente zu übertragen, können wir ein spezielles Design für die Arbeit mit Versprechungen verwenden: <br><br><pre> <code class="html hljs xml">{#await user} <span class="hljs-comment"><span class="hljs-comment">&lt;!--     --&gt;</span></span> {:then user} <span class="hljs-comment"><span class="hljs-comment">&lt;!--      .    . --&gt;</span></span> {#if user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">User</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...user</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/if} {/await}</code> </pre><br>  Es ist sinnvoll, das Vorhandensein des Datenobjekts zu überprüfen, bevor es an die Benutzerkomponente übergeben wird.  Mit dem Spread-Operator können Sie ein Objekt beim Erstellen einer Instanz der Benutzerkomponente in separate Requisiten aufteilen. <br><br><img src="https://habrastorage.org/webt/ml/1c/1c/ml1c1c5qwdhfpq4slz_38vjoym8.gif"><br><br>  Kürzere Arbeit. <br><br><h3>  Fehlerbehandlung </h3><br><blockquote>  Versuchen Sie, einen nicht vorhandenen Benutzernamen einzugeben. <br>  ... <br>  Unsere Anwendung ist kaputt. </blockquote><br>  Ihre wahrscheinlich ja, aber unsere ist definitiv nicht))) Es wird einfach nichts passieren, obwohl dies sicherlich nicht der Fall ist. <br><br><h3>  catchError </h3><br>  Fügen Sie einen zusätzlichen Block für die Verarbeitung abgelehnter Versprechen hinzu: <br><br><pre> <code class="html hljs xml">{#await user} {:then user} {#if user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">User</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...user</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/if} {:catch error} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Error</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...error</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/await}</code> </pre><br><br><h3>  Komponentenfehler </h3><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"error"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>Oops!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span>{response.status}: {response.data.message}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>Please try searching again.<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><blockquote>  Jetzt sieht unsere Benutzeroberfläche viel besser aus: </blockquote><br>  Und nicht sagen, und vor allem keine Anstrengung. <br><br><img src="https://habrastorage.org/webt/ix/2k/af/ix2kaf9saodoqtihwcajw_rb2s4.gif"><br><br><h3>  Ladeanzeige </h3><br>  Kurz gesagt, dort begann eine weitere Häresie mit allen Arten von BehaviorSubjects und ähnlichen.  Wir fügen nur eine Ladeanzeige hinzu und melken den Elefanten nicht: <br><br><pre> <code class="html hljs xml">{#await user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span>Loading...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> {:then user} {#if user} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">User</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...user</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/if} {:catch error} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Error</span></span></span><span class="hljs-tag"> {</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">...error</span></span></span><span class="hljs-tag">} /&gt;</span></span> {/await}</code> </pre><br><blockquote>  Ergebnis? </blockquote><br>  Zwei winzige logiklose Komponenten (Benutzer und Fehler) und eine Steuerungskomponente (App), in denen die komplexeste Geschäftslogik in einer Zeile beschrieben wird - Erstellen einer berechneten Eigenschaft.  Kein Bürsten von beobachtbaren Objekten von Kopf bis Fuß und Verbindungen +100500 Werkzeuge, die Sie nicht benötigen. <br><br>  → <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Interaktive Demo</a> <br><br>  Schreiben Sie einfachen und klaren Code.  Schreiben Sie weniger Code, was weniger Arbeit und mehr Zeit mit Ihrer Familie bedeutet.  Live! <br><br>  Alles Glück und Gesundheit! <br><br><blockquote>  Alle :) </blockquote><br><br><h4>  Fyi </h4><br>  Wenn Sie sich das Beispiel in REPL bereits angesehen haben, haben Sie den Toast wahrscheinlich mit einer Warnung von unten links bemerkt: <br><blockquote>  Kompiliert, aber mit 1 Warnung - überprüfen Sie die Konsole auf Details </blockquote><br>  Wenn Sie nicht zu faul sind, um die Konsole zu öffnen, wird folgende Meldung angezeigt: <br><blockquote>  Nicht verwendeter CSS-Selektor <br>  .Benutzerkarte .Organisation { <br>  Hintergrundposition: oben rechts; <br>  }} <br></blockquote><br>  Svelte Static Analyzer informiert uns, dass einige Komponentenstile nicht verwendet werden.  Darüber hinaus werden auf Ihre Anfrage oder den Befehl der Standard-Compiler-Einstellungen nicht verwendete Stile ohne Ihre Teilnahme aus dem endgültigen CSS-Bundle entfernt. <br><br><h4>  P / s </h4><br>  Lesen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">weitere Artikel über Svelte</a> und schauen Sie sich den russischsprachigen Telegrammkanal <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">SvelteJS an</a> .  Wir freuen uns, Sie zu sehen! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de419653/">https://habr.com/ru/post/de419653/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de419641/index.html">Erstellen einer einfachen C # AI in Unity</a></li>
<li><a href="../de419643/index.html">Minsk EPAM Software Engineering Konferenz: Machen Sie es real</a></li>
<li><a href="../de419647/index.html">Seminar „Schwarzer Freitag im E-Commerce. Geheimnisse des Überlebens, 16. August, Moskau</a></li>
<li><a href="../de419649/index.html">Ein bisschen über Katzen oder welchen CAT wir für die Synchronisierung von Podcasts ausgewählt haben</a></li>
<li><a href="../de419651/index.html">Weder GA noch YM. Wie wir unseren eigenen Clickstream gemacht haben</a></li>
<li><a href="../de419655/index.html">Musik in der Wohnung. Einbetten</a></li>
<li><a href="../de419657/index.html">Wie kollektive Intelligenz für eine Herde Drohnen entwickelt wurde</a></li>
<li><a href="../de419659/index.html">Wo Hollywood Hacker richtig darstellt und wo - fälschlicherweise</a></li>
<li><a href="../de419661/index.html">Einen Radiosender aus GTA machen: San Andreas</a></li>
<li><a href="../de419663/index.html">Regierungsorganisationen locken mit Verträgen, Boni und einer Vereinfachung der Bürokratie Schöpfer von extrem kleinem pH-Wert</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>