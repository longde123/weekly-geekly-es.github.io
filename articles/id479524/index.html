<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ¤¢ ğŸ…ğŸ¿ ğŸš™ Layanan untuk Pemulihan Aktif atau sejarah satu proyek industri di Innopolis ğŸ”· â›‘ï¸ ğŸ£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Halo, Habr! Nama saya Roman, dan saya ingin berbicara hari ini tentang bagaimana kami di Innopolis University mengembangkan bangku tes dan layanan unt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Layanan untuk Pemulihan Aktif atau sejarah satu proyek industri di Innopolis</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/acronis/blog/479524/">  Halo, Habr!  Nama saya Roman, dan saya ingin berbicara hari ini tentang bagaimana kami di Innopolis University mengembangkan bangku tes dan layanan untuk sistem Acronis Active Restore, yang akan segera menjadi bagian dari lini produk perusahaan.  Setiap orang yang tertarik pada bagaimana universitas membangun hubungan dengan mitra industri, saya mengundang Anda untuk melanjutkan di bawah cat. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9e/2e6/1c8/b9e2e61c86c5b53a43ed3ee998d7db0f.jpg" alt="gambar"><br><a name="habracut"></a><br>  Pengembangan Active Restore dimulai di dalam Acronis, tetapi kami, sebagai mahasiswa Universitas Innopolis, mengambil bagian dalam proses ini sebagai bagian dari proyek pelatihan industri.  Kurator saya (dan sekarang kolega) Daulet Tumbaev sudah menulis tentang gagasan itu, dan juga arsitektur, <a href="https://habr.com/ru/company/acronis/blog/477658/">di posnya</a> .  Hari ini saya akan berbicara tentang bagaimana kami menyiapkan layanan dari Innopolis. <br><br>  Semuanya dimulai pada musim panas, ketika kami diberi tahu bahwa pada semester pertama, perusahaan IT akan datang kepada kami dan menawarkan ide-ide mereka untuk kerja praktek.  Maka, pada bulan Desember 2018 kami diberi 15 proyek berbeda, dan pada akhir bulan kami menetapkan prioritas, mencari tahu siapa yang paling suka. <br><br>  Semua mahasiswa mengisi formulir di mana perlu untuk memilih empat proyek di mana kami ingin berpartisipasi.  Itu perlu untuk memotivasi mengapa saya, dan mengapa tepatnya proyek ini.  Sebagai contoh, saya menunjukkan bahwa saya sudah memiliki pengalaman dalam pemrograman dan pengembangan sistem dalam C / C ++.  Tetapi yang paling penting, proyek ini memungkinkan saya untuk mengembangkan keterampilan saya dan terus tumbuh. <br><br>  Dua minggu kemudian, kami ditugaskan, dan dari awal semester kedua, pekerjaan pada proyek dimulai.  Tim dibentuk, pada pertemuan pertama kami mengevaluasi kekuatan dan kelemahan masing-masing dan peran yang ditugaskan. <br><br><ul><li>  Roman Rybkin adalah pengembang Python / C ++. </li><li>  Eugene Ishutin - Pengembang Python / C ++, bertanggung jawab untuk berinteraksi dengan perusahaan. </li><li>  Anastasia Rodionova adalah pengembang Python / C ++ yang bertanggung jawab untuk menulis dokumentasi. </li><li>  Brandon Acosta - menyiapkan lingkungan, menyiapkan dudukan untuk eksperimen dan pengujian. </li></ul><br>  Dua minggu pertama kami harus memulai proses.  Kami menjalin kontak dengan pelanggan, meresmikan persyaratan untuk proyek, meluncurkan proses berulang, dan mengatur lingkungan untuk bekerja. <br><br>  Omong-omong, pekerjaan kami dengan pelanggan benar-benar mulai mendidih ketika kami memulai pilihan.  Faktanya adalah bahwa Acronis memimpin di Universitas Innopolis (dan bukan hanya) subjek pilihan.  Dan Alexey Kostyushko, pengembang terkemuka tim Kernel, mengajarkan dua kursus secara berkelanjutan: Rekayasa Balik dan Arsitektur dan Driver Kernel Windows.  Sejauh yang saya tahu, kursus pemrograman sistem dan komputasi multi-threaded juga direncanakan di masa depan.  Tetapi yang utama adalah bahwa semua kursus ini dirancang sedemikian rupa untuk membantu siswa mengatasi proyek industri.  Mereka serius memompa dalam memahami bidang subjek dan dengan demikian mempermudah pekerjaan pada proyek. <br><br>  Karena ini, kami mulai lebih giat dari tim lain, dan interaksi dengan Acronis sendiri menjadi lebih padat.  Alexey Kostyushko bertindak untuk kami dalam peran sebagai Pemilik Produk, darinya kami menerima pengetahuan yang diperlukan dalam bidang subjek.  Berkat pilihannya, kemampuan keras dan kompetensi kami dipompa dengan sangat kuat, kami menjadi sangat siap untuk memenuhi tugas yang kami hadapi. <br><br><h2>  Dari pemikiran ke proyek </h2><br>  Bulan pertama untuk semua tim adalah sesulit mungkin.  Semua orang tersesat, tidak tahu harus mulai dari mana - mungkin dengan dokumen atau, sebaliknya, menyelami kode.  Pada awalnya, komentar yang saling bertentangan datang dari kurator dan mentor di universitas dan perwakilan perusahaan. <br><br>  Ketika semuanya jatuh ke tempatnya (setidaknya di kepala saya), menjadi jelas bahwa mentor dari universitas membantu kami membangun hubungan internal dalam tim dan menyiapkan dokumen.  Tapi titik terobosan nyata adalah kedatangan Daulet pada bulan Maret.  Kami hanya duduk dan mengerjakan proyek sepanjang akhir pekan.  Kemudian kami memikirkan kembali esensi proyek, memulai kembali, mendistribusikan kembali prioritas tugas dan dengan cepat terbang ke depan.  Kami memahami apa yang perlu dilakukan untuk memulai percobaan (tentang hal itu nanti) dan untuk mengembangkan layanan.  Sejak saat itu, gagasan umum berubah menjadi rencana yang jelas.  Pengembangan kode yang sebenarnya dimulai, dan dalam 2 minggu kami mengembangkan versi pertama dari bangku tes, termasuk mesin virtual, layanan dan kode yang diperlukan untuk mengotomatisasi eksperimen dan mengumpulkan data. <br><br>  Perlu dicatat bahwa seiring dengan proyek industri ada kursus pelatihan yang membantu kami membangun arsitektur yang kompeten untuk proyek kami dan mengatur Manajemen Kualitas.  Pada awalnya, tugas-tugas ini memakan waktu 70-90% dari waktu per minggu, tetapi, ternyata, waktu diperlukan untuk menghindari masalah dalam proses pengembangan.  Tujuan universitas adalah agar kami belajar membangun proses pengembangan secara kompeten, dan perusahaan, sebagai pelanggan, lebih tertarik dengan hasilnya.  Ini, tentu saja, membawa banyak kebingungan, tetapi membantu menggabungkan keterampilan teoretis dan praktis.  Kompleksitas dan beban yang memadai memastikan adanya motivasi, yang menghasilkan proyek yang sukses. <br><br>  Awalnya, dua orang di tim kami terlibat dalam pengembangan murni, satu orang mengambil alih dokumen, dan yang lain terjun ke pengaturan lingkungan.  Namun, kemudian tiga bujangan bergabung dengan kami, yang dengannya kami menjadi satu tim.  Universitas memutuskan untuk meluncurkan proyek industri uji untuk siswa dari tahun ketiga studi.  Memperluas tim dari 4 hingga 7 orang sangat mempercepat prosesnya, karena bujangan kami dapat dengan mudah melakukan tugas yang berkaitan dengan pengembangan.  Ekaterina Levchenko membantu penulisan kode python dan skrip batch untuk bangku tes.  Ansat Abirov dan Ruslan Kim bertindak sebagai pengembang, mereka terlibat dalam pemilihan dan optimalisasi algoritma. <br><br>  Kami bekerja dalam format ini hingga akhir Mei, ketika percobaan diluncurkan.  Pada saat ini, proyek industri untuk bujangan berakhir.  Dua dari mereka memulai magang Acronis dan terus bekerja bersama kami.  Karena itu, setelah Mei, kami sudah bekerja sebagai satu tim yang terdiri dari 6 orang. <br><br>  Sebelum kami adalah semester ketiga, yang di Innopolis bebas dari kegiatan akademik.  Kami hanya memiliki 2 pilihan, dan sisa waktu dihabiskan untuk proyek industri.  Itu di semester ketiga yang bekerja pada layanan berjalan intensif.  Proses pengembangan sepenuhnya jatuh pada rel, demo dan laporan menjadi teratur.  Dalam format ini, kami bekerja selama 1,5 bulan, dan pada akhir Juli kami hampir menyelesaikan bagian pengembangan pekerjaan. <br><br><h2>  Rincian teknis </h2><br>  Pertama, persyaratan untuk suatu layanan dirumuskan, yang harus cukup berinteraksi dengan driver sistem file minifilter (yang dapat Anda baca di <a href="https://docs.microsoft.com/en-us/windows-hardware/drivers/ifs/file-system-minifilter-drivers">sini</a> ) dan arsitekturnya dipikirkan.  Dengan memperhatikan kesederhanaan dukungan kode lebih lanjut, kami segera memberikan pendekatan modular.  Layanan kami mencakup beberapa manajer, agen, dan penangan, dan bahkan sebelum dimulainya pengkodean, kemampuan untuk bekerja dalam mode paralel diletakkan. <br><br>  Namun, setelah membahas arsitektur pada pertemuan dengan Acronis, diputuskan untuk melakukan percobaan terlebih dahulu, dan kemudian mengambil layanan itu sendiri.  Akibatnya, pengembangan hanya memakan waktu 2,5 bulan.  Sisa waktu, kami melakukan percobaan untuk menemukan daftar file minimum yang memadai yang dapat dijalankan Windows.  Dalam sistem nyata, set file ini dihasilkan menggunakan driver, namun, kami memutuskan untuk menemukan set ini secara heuristik, menggunakan metode setengah pembagian, untuk memeriksa operasi driver. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6a5/fd5/6b1/6a5fd56b1bb52d7b30e356735defba4a.png" alt="gambar"><br>  <i>Stand percobaan.</i> <i><br></i> <br><br>  Untuk melakukan ini, kami mengumpulkan stand di Python dari dua mesin virtual.  Salah satunya bekerja di Linux, dan yang kedua memuat Windows.  Dua disk dikonfigurasikan untuk mereka: Virtual HD1 dan Virtual HD2.  Kedua drive terhubung ke VM1 di mana Linux diinstal.  Pada mesin virtual ini pada HD1, aplikasi Killer diinstal, yang "merusak" HD2.  Kerusakan mengacu pada penghapusan beberapa file dari disk.  HD2 adalah disk boot untuk VM2 yang bekerja di bawah Windows.  Setelah "kerusakan" pada disk, kami mencoba memulai VM2.  Jika mungkin untuk melakukan ini, maka file yang dihapus dari disk dianggap tidak perlu dijalankan. <br><br>  Untuk mengotomatiskan proses ini, kami mencoba menghapus file tidak secara acak, tetapi sebagai bagian dari pendekatan yang dipikirkan sebelumnya.  Algoritma terdiri dari 3 langkah: <br><br><ol><li>  Bagilah daftar file menjadi dua. </li><li>  Hapus salah satu dari setengah file. </li><li>  Cobalah untuk memulai sistem.  Jika sistem dimulai, kemudian tambahkan file yang dihapus ke daftar yang tidak perlu.  Jika tidak, kami kembali ke langkah 1. </li></ol><br>  Pertama, kami memutuskan untuk mensimulasikan algoritma.  Misalkan ada 1.000.000 file dalam sistem file.  Dalam hal ini, pencarian yang paling efektif untuk file-file penting terjadi dalam kasus di mana file-file penting sekitar 15% dari total. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8f1/2eb/726/8f12eb72679d42f14095fbd92b81674d.png" alt="gambar"><br>  <i>Metode setengah pembagian.</i> <br><br>  Awalnya, ada banyak masalah dengan eksperimen.  Selama 2-3 minggu, tempat tes sudah siap.  Dan 1-1,5 bulan lagi saya harus menangkap bug, menambahkan kode dan menerapkan berbagai trik untuk membuat stand bekerja. <br><br>  Hal yang paling sulit adalah menangkap bug yang dikaitkan dengan operasi caching disk.  Percobaan bekerja selama 2 hari dan menghasilkan hasil yang sangat optimis yang beberapa kali lebih cepat daripada simulasi.  Namun, pengujian file kritis gagal, sistem tidak memulai.  Ternyata selama pematian paksa mesin virtual, operasi penghapusan yang di-cache oleh sistem file tidak dilakukan, dan, oleh karena itu, disk tidak sepenuhnya dihapus.  Alhasil, algoritma menerima hasil yang salah, dan selama beberapa hari kami berusaha keras untuk memastikan semuanya. <br><br>  Pada titik tertentu, kami perhatikan bahwa selama operasi terus-menerus, algoritma tersebut dimakamkan di salah satu segmen sistem file dan mulai berupaya menghapus file yang sama (dengan harapan hasil baru).  Ini terjadi pada saat-saat ketika algoritma beristirahat di daerah di mana sebagian besar diperlukan, sambil memilih interval yang salah untuk dihapus.  Pada titik ini, kami memutuskan untuk menambahkan daftar file perombakan.  Yaitu, sekali beberapa iterasi, daftar file dikocok.  Ini membantu untuk menghilangkan algoritma dari tongkat tersebut. <br><br>  Ketika semuanya sudah siap, kami meluncurkan dua VM ini selama 3 hari.  Secara total, sekitar 600 iterasi berlalu, di antaranya ada lebih dari 20 peluncuran yang berhasil.  Menjadi jelas bahwa percobaan ini dapat berjalan untuk waktu yang lama, serta pada mesin yang lebih kuat, untuk menemukan ukuran file yang optimal untuk menjalankan Windows.  Selain itu, algoritma dapat didistribusikan di beberapa mesin untuk mempercepat proses ini <br><br>  Dalam kasus kami, selain Windows, hanya ada Python dan layanan kami di disk.  Dalam tiga hari kami berhasil mengurangi jumlah file dari 70 ribu menjadi 50 ribu.  Daftar file berkurang hanya 28%, tetapi menjadi jelas bahwa pendekatan ini berfungsi, dan memungkinkan Anda untuk menentukan set minimum file yang diperlukan untuk memuat OS. <br><br><h2>  Struktur layanan </h2><br>  Mari kita sentuh sedikit struktur layanan.  Modul layanan utama adalah manajer antrian.  Karena kita mendapatkan daftar file dari driver, kita perlu mengembalikan file dari daftar ini.  Untuk melakukan ini, kami membuat pergantian dengan prioritas. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/848/c8b/f16/848c8bf16ea00fa05474ead1a278b045.jpg" alt="gambar"><br><br>  Kami memiliki daftar file yang dipulihkan pada gilirannya.  Dan jika permintaan akses baru muncul, file yang sangat dibutuhkan dipulihkan dalam prioritas.  Berkat ini, di awal antrian akan ada file-file yang benar-benar dibutuhkan pengguna sekarang, dan pada akhir antrian akan ada file-file yang mungkin diperlukan di masa depan.  Tetapi dengan karya aktif pengguna, "antrian objek luar biasa" dapat dibentuk, serta daftar file yang sedang dipulihkan sekarang.  Selain itu, operasi pencarian seharusnya diterapkan ke semua antrian ini sekaligus.  Sayangnya, kami tidak menemukan implementasi antrian yang dapat menetapkan beberapa prioritas file, sementara mendukung pencarian, serta mengubah prioritas dengan cepat.  Kami tidak ingin beradaptasi dengan struktur data yang ada, dan karena itu kami harus menulis sendiri dan mengatur kemampuan untuk bekerja dengannya. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/30b/f65/b91/30bf65b91099cca8fd21f077d7c670f3.jpg" alt="gambar"><br><br>  Layanan kami perlu berkomunikasi terlebih dahulu dengan driver yang Daulet kerjakan, dan setelah itu dengan komponen yang bertanggung jawab untuk mengembalikan file ... Oleh karena itu, untuk permulaan, kami memutuskan untuk membuat emulator kecil kami sendiri dari sistem pemulihan, yang dapat mengeluarkan file dari drive eksternal sehingga mereka dapat pulihkan dan uji layanan. <br><br>  Secara total, dua mode operasi disediakan - mode normal dan pemulihan.  Dalam mode normal, driver mengirimkan kepada kami daftar file yang dipengaruhi oleh startup OS.  Kemudian, ketika sistem sedang berjalan, driver memonitor semua operasi file dan mengirimkan pemberitahuan ke layanan kami, dan itu, pada gilirannya, mengubah daftar file.  Dalam mode pemulihan, driver memberi tahu layanan bahwa pemulihan sistem diperlukan.  Layanan mengantri file, menjalankan agen perangkat lunak yang meminta file dari cadangan, dan memulai proses pemulihan. <br><br><h2>  Diploma, undangan kerja, dan proyek baru </h2><br>  Ketika layanan sudah siap dan diuji, kami memiliki aktivitas terakhir di proyek.  Penting untuk memperbarui dan menyusun semua artefak yang telah kami kumpulkan, serta menyajikan hasil kami kepada pelanggan dan universitas.  Bagi perusahaan, ini adalah langkah lain menuju implementasi proyek, untuk universitas dengan tesis kelulusan kami. <br><br>  Setelah presentasi, sebuah proposal diajukan kepada siswa.  Dan setelah beberapa minggu saya mulai bekerja di Acronis.  Hasil proyek membuat para pengembang berpikir bahwa adalah mungkin untuk membuat layanan lebih efisien dengan menurunkannya ke tingkat Aplikasi Windows Asli.  Tetapi lebih lanjut tentang itu di artikel berikutnya. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id479524/">https://habr.com/ru/post/id479524/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id479512/index.html">MVCC dalam PostgreSQL-4. Jepretan</a></li>
<li><a href="../id479514/index.html">Privasi berdasarkan desain dan privasi secara default (perlindungan data yang dirancang dan privasi default oleh GDPR)</a></li>
<li><a href="../id479516/index.html">Apa itu entropi dalam perangkat lunak dan bagaimana cara mengelolanya?</a></li>
<li><a href="../id479518/index.html">Komunikasi dalam tim jarak jauh adalah pengalaman kami</a></li>
<li><a href="../id479522/index.html">Penerbit Peter. Penjualan musim dingin</a></li>
<li><a href="../id479530/index.html">Sistem koordinat ultrasonik 2.0</a></li>
<li><a href="../id479534/index.html">Kubernetes 1.17 - cara memutakhirkan dan tidak menghabiskan seluruh anggaran kesalahan</a></li>
<li><a href="../id479536/index.html">Load balancing dalam Zimbra Open-Source Edition dengan HAProxy</a></li>
<li><a href="../id479538/index.html">Teknologi memimpin umat manusia ke dalam kemunduran. Sudah waktunya untuk mengubah sesuatu</a></li>
<li><a href="../id479540/index.html">Menggunakan passwordstore.org - pengelola kata sandi gaya KISS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>