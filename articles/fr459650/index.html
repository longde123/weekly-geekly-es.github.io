<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üòæ üë©üèæ‚ÄçüöÄ ‚õΩÔ∏è Comment ne pas perdre d'argent dans la bo√Æte noire: m√©thodes de test de facturation üí† ‚ôëÔ∏è üßóüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La validation des services payants est l'un des principaux probl√®mes d'ing√©nierie lors des tests de Badoo. Notre application est int√©gr√©e √† 70 prestat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment ne pas perdre d'argent dans la bo√Æte noire: m√©thodes de test de facturation</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/badoo/blog/459650/">  La validation des services payants est l'un des principaux probl√®mes d'ing√©nierie lors des tests de Badoo.  Notre application est int√©gr√©e √† 70 prestataires de paiement dans 250 pays du monde, et un bug dans au moins l'un d'entre eux peut entra√Æner des cons√©quences impr√©visibles. <br><br>  Dans cet article, je parlerai des m√©thodes de test que nous utilisons dans Badoo et des limites d'applicabilit√© de ces m√©thodes - les √©tapes de test auxquelles elles sont les plus efficaces. <br><br>  Cet article sera utile aux testeurs, d√©veloppeurs et chefs de produit, dont les projets sont d√©j√† int√©gr√©s avec les prestataires de paiement, ou le processus d'int√©gration ne fait que commencer.  Si dans votre travail vous √™tes confront√© au probl√®me du choix des m√©thodes de test pour de telles int√©grations, bienvenue chez cat! <br><br><img src="https://habrastorage.org/webt/u0/dg/6k/u0dg6kdremnwjnqjqiabc_wq1m8.jpeg"><br><br><a name="habracut"></a><br>  <i>Je m'appelle Vladimir Solodov, je suis ing√©nieur QA facturation chez Badoo: je suis engag√© dans la v√©rification des int√©grations de test et le traitement des paiements.</i>  <i>Mon coll√®gue Viktor Koronevich m'a aid√© √† pr√©parer le texte: avec lui, nous avons fait un rapport lors de la conf√©rence de Heisenbug ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">vid√©o</a> ).</i>  <i>Dans l'article, nous avons √©tendu la zone de description √† toutes les int√©grations avec les fournisseurs de paiement utilis√©s dans Badoo, classifi√© et d√©crit plus en d√©tail la pratique de la suppression des d√©pendances externes.</i> <br><br>  √Ä l'aide d'exemples d'√©tudes de cas, je vais vous expliquer pourquoi vous devriez accorder plus d'attention au test des services payants et comment ne pas aggraver les probl√®mes s'ils surviennent n√©anmoins.  Ensuite, nous d√©crirons les probl√®mes techniques li√©s aux tests d'int√©gration et les moyens de les r√©soudre. <br><br>  La deuxi√®me partie de l'article, dans laquelle nous parlons davantage de l'automatisation des tests de services payants dans les applications iOS, est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  C'est parti! <br><br><h2>  Sp√©cificit√©s du test de facturation </h2><br>  En r√®gle g√©n√©rale, l'objectif d'une entreprise est de g√©n√©rer des revenus.  √Ä Badoo, un r√©seau social de rencontres, les revenus sont g√©n√©r√©s par des pr√™ts et des abonnements premium.  Les pr√™ts sont la monnaie interne de Badoo.  Avec leur aide, par exemple, vous pouvez augmenter votre profil dans les r√©sultats de recherche en premier lieu, faire un cadeau √† un autre utilisateur, etc.  L'abonnement premium est valable pour une certaine p√©riode de temps et vous offre plusieurs options √† la fois: activez le mode "invisible", voyez les personnes qui ont manifest√© de l'int√©r√™t pour vous, confirmez l'authenticit√© de votre compte et bien plus encore. <br><br>  Pour faire fonctionner ces services payants, nous utilisons des int√©grations avec plus de 70 prestataires de paiement.  Le choix du fournisseur d√©pend de la plate-forme, du pays, de l'appareil, de l'op√©rateur mobile et d'autres facteurs.  Par cons√©quent, la question du test des services payants est tr√®s urgente. <br><br>  Pour commencer, r√©fl√©chissez aux raisons pour lesquelles le test des services payants doit √™tre abord√© avec une attention particuli√®re.  Il y a deux raisons. <br><br><h4>  1. Les bogues de facturation sont essentiels pour les entreprises. </h4><br>  Le premier probl√®me est la r√©putation.  L'utilisateur qui a pay√© le service devient plus sensible (et moins tol√©rant) aux bugs de l'application.  Tout commentaire dans l'espace public, qu'il s'agisse d'un examen d'une application de blog ou d'un commentaire sur l'App Store ou Google Play, d'un utilisateur qui rencontre un bug dans un service payant, sera plus √©motionnel - c'est un facteur qui conduit √† des pertes de r√©putation. <br><br>  Le deuxi√®me probl√®me est que, d√®s que vous commencez √† recevoir de l'argent d'un utilisateur pour un service, vous devenez l'objet d'une loi qui prot√®ge le consommateur du service.  Et les pertes de r√©putation peuvent facilement se transformer en pertes financi√®res. <br><br>  Les entreprises perdent de l'argent de trois mani√®res. <br><br>  La premi√®re consiste √† <b>rembourser</b> .  Supposons qu'un utilisateur trouve que vous lui avez vendu un service qui ne r√©pond pas tout √† fait √† ses attentes.  Dans ce cas, il contactera votre √©quipe d'assistance.  Ses employ√©s m√®nent une enqu√™te et d√©couvrent que les attentes de l'utilisateur ne se sont vraiment pas concr√©tis√©es en raison d'un bug dans l'application.  Vous initiez un remboursement.  Dans ce cas, il y a un remboursement: en cons√©quence, l'entreprise est confront√©e √† une perte de b√©n√©fices, et c'est le moyen le plus inoffensif de perdre de l'argent. <br><br>  La deuxi√®me fa√ßon est la <b>r√©trofacturation</b> .  Supposons que la m√™me situation se soit produite, seul l'utilisateur n'a pas contact√© votre service d'assistance, mais la banque qui lui a d√©livr√© la carte ou le prestataire de paiement.  La banque / le fournisseur initie un remboursement.  Dans ce cas, nous avons affaire √† une r√©trofacturation.  Ici, le danger pour les entreprises ne r√©side pas seulement dans la perte de profits.  Apr√®s un certain nombre de refacturations, l'entreprise se voit infliger une amende et sa cote de risque diminue.  La d√©gradation, √† son tour, entra√Æne une augmentation du co√ªt des services des prestataires de paiement. <br><br>  La troisi√®me voie - <b>poursuites (r√©clamations)</b> .  Dans les cas les plus n√©glig√©s, des poursuites (y compris collectives) peuvent avoir lieu, entra√Ænant les cons√©quences les plus graves.  Ainsi, en 2015, apr√®s une action en justice intent√©e par le r√©gulateur d'Ofgem, British Gas a √©t√© oblig√©e de verser une compensation de plusieurs millions de dollars aux utilisateurs qui ont factur√© des frais plus √©lev√©s en raison d'une erreur dans le syst√®me de facturation.  En savoir plus √† ce sujet <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h4>  2. Pour tester les int√©grations, les connaissances et l'expertise sont n√©cessaires. </h4><br>  Les √©quipes qui commencent tout juste le processus d'int√©gration avec les prestataires de paiement sont souvent confront√©es √† ce probl√®me.  Ne connaissant pas tous les cas de facturation possibles, ils manquent des nuances importantes lorsqu'ils r√©alisent la r√©action du syst√®me aux notifications des fournisseurs de paiement. <br><br>  Cela peut entra√Æner des cons√©quences impr√©visibles - de la perte de profits aux utilisateurs m√©contents. <br><br>  Examinons le sch√©ma qui r√©pertorie les types de services payants et examinons le probl√®me plus attentivement. <br><br><img src="https://habrastorage.org/webt/k0/qu/he/k0quhers6cgrorlijjpdjb8pex4.jpeg"><br>  <i><font color="gray">Figure 1. Cas de facturation possibles</font></i> <br><br>  Il existe trois cas principaux: une erreur, un paiement r√©ussi et un remboursement √† l'utilisateur.  Mais chaque cas a des d√©tails, chaque cas que votre syst√®me doit g√©rer diff√©remment. <br><br>  <b>Les erreurs</b> peuvent √™tre critiques et non critiques.  Une erreur de notification peut √™tre attribu√©e √† un blocage non critique - lorsque le fournisseur de paiement informe du manque de fonds dans le compte de l'utilisateur et critique - du mode de paiement de l'utilisateur.  Et si dans le premier cas, vous pouvez essayer de payer plus tard, dans le second - ce serait bien de comprendre pourquoi la m√©thode est bloqu√©e.  Peut-√™tre que l'utilisateur a √©t√© remarqu√© dans une fraude et que vous devriez faire plus attention √† ses transactions. <br><br>  <b>Remboursements</b> .  Vous savez d√©j√† qu'il existe deux types de retours: les remboursements et les r√©trofacturations.  Votre syst√®me doit y r√©pondre diff√©remment.  Par exemple, apr√®s une r√©trofacturation, il est judicieux de penser √† bloquer certaines fonctions de votre application pour l'utilisateur, car la r√©trofacturation est l'une des m√©thodes de fraude les plus populaires. <br><br>  <b>Un paiement r√©ussi</b> peut √™tre un <b>paiement unique</b> ou un abonnement. <br><br>  Les paiements uniques peuvent √™tre consommables et non consommables.  Un exemple de paiement d√©pens√© que nous avons examin√© au tout d√©but de l'article - ce sont les pr√™ts √† Badoo.  Un exemple de paiement durable peut √™tre donn√© √† partir des jeux.  Supposons que vous ayez un personnage que vous jouez.  Vous voulez lui acheter des superpuissances qui existent depuis un certain temps.  Dans ce cas, l'achat appartient √† la classe des paiements durables. <br><br>  <b>Abonnements</b>  Voici la plus grande vari√©t√© de cas.  En plus de l'achat initial d'un abonnement, vous pouvez avoir: <br><br><ul><li>  renouvellement d'un abonnement (renouvellement); <br></li><li>  fermer l'abonnement (annuler l'abonnement); <br></li><li>  abonnement d'essai (essai); <br></li><li>  abonnement au d√©lai de gr√¢ce: lorsque nous ne pouvons pas renouveler l'abonnement et essayer de payer √† nouveau pendant une p√©riode appel√©e p√©riode de gr√¢ce.  Pour l'utilisateur, le d√©lai de gr√¢ce ressemble √† ceci.  Supposons que vous ayez achet√© un abonnement mensuel √† un journal.  La soci√©t√© qui vous envoie des journaux essaie d'annuler le paiement du prochain mois d'abonnement apr√®s la fin du premier mois, mais ne peut pas le faire (en raison d'un verrou de carte, d'un manque de fonds dans le compte, etc.).  Si la p√©riode de validit√© de la p√©riode de gr√¢ce est de dix jours, pendant ce temps, la soci√©t√© essaie d'annuler le paiement, tandis que l'abonnement reste valide.  Si l'entreprise n'est pas en mesure d'annuler l'argent, l'abonnement est annul√©.  Si tel est le cas, l'abonnement est renouvel√© √† partir de la date du dernier paiement; <br></li><li>  paiement partiel (facturation partielle).  Par exemple, PayPal autorise le paiement partiel si le compte de l'utilisateur ne dispose pas de suffisamment de fonds (paiement partiel), ou pour diviser le paiement en plusieurs parties (facture partielle). <br></li></ul><br>  Vous devez √©galement prendre en compte deux caract√©ristiques totalement d√©pendantes du prestataire de paiement: l'abonnement peut √™tre contr√¥l√© par votre application ou g√©r√© en externe. <br><br><ul><li>  Un abonnement g√©r√© en interne est, par exemple, un abonnement utilisant des cartes de cr√©dit ou PayPal, lorsque, apr√®s le premier paiement, vous recevez un jeton avec lequel vous r√©appliquez au fournisseur, sans avoir les d√©tails de paiement de l'utilisateur. <br></li><li>  Un abonnement g√©r√© en externe est lorsque l'agr√©gateur de paiement prend le contr√¥le total de vos abonnements et vous envoie simplement des notifications sur leurs statuts actuels. <br></li></ul><br>  Sur la figure, les zones les plus √©videntes, dont la r√©action est g√©n√©ralement r√©alis√©e en premier lieu, sont surlign√©es en violet.  Tous les autres commencent √† √™tre pris en compte beaucoup plus tard, comme l'accumulation d'expertise.  Ceci est largement facilit√© par l'application incorrecte des m√©thodologies de d√©veloppement it√©ratif dans le domaine de la facturation. <br><br><img src="https://habrastorage.org/webt/7x/kf/bj/7xkfbjf-z3shfhzuftrl3p0tms4.jpeg"><br>  <i><font color="gray">Figure 2. Cas de facturation principalement mis en ≈ìuvre dans les syst√®mes</font></i> <br><br>  Une telle mise en ≈ìuvre progressive peut entra√Æner des cons√©quences impr√©visibles.  Par exemple, dans l'un des projets sur lesquels j'ai travaill√© avant Badoo, la possibilit√© de faire un remboursement n'a pas √©t√© prise en compte.  En cons√©quence, tous les retours ont √©t√© effectu√©s non pas par le biais de remboursements, mais par le biais de r√©trofacturations, ce qui a affect√© n√©gativement la cote de risque de l'entreprise et conduit √† des √©checs dans la collecte des statistiques de revenus.  L'ignorance de toute la vari√©t√© des cas de facturation peut entra√Æner une perte de b√©n√©fices ou une vuln√©rabilit√© de l'entreprise pour les utilisateurs qui se sentent tromp√©s. <br><br>  Ainsi, d'une part, les bogues dans le traitement des paiements doivent √™tre trouv√©s avant la publication, car ils peuvent entra√Æner les cons√©quences les plus n√©gatives.  Si cela n'√©tait pas possible, il est important de comprendre le plus rapidement possible que le bogue est entr√© dans la version finale de l'application, de le corriger et, surtout, ce que beaucoup de gens oublient, ¬´rassure¬ª les utilisateurs qui rencontrent ce bogue. <br><br>  D'un autre c√¥t√©, la situation est compliqu√©e par le fait que l'int√©gration avec les prestataires de paiement est toujours une interaction avec la bo√Æte noire, ce qui ajoute beaucoup de variables au processus de test. <br><br><h2>  Probl√®mes techniques lors des tests de facturation </h2><br>  Examinons-les sur l'exemple de l'int√©gration de Badoo avec l'App Store. <br><br>  Les abonnements sur l'App Store appartiennent √† la classe des gestionnaires externes, c'est-√†-dire qu'ils sont enti√®rement g√©r√©s du c√¥t√© du fournisseur, et notre syst√®me ne peut que demander l'√©tat actuel ou recevoir une notification de sa modification. <br><br>  Nous avons sp√©cifiquement choisi cette int√©gration, car elle est la plus complexe et contient toute la vari√©t√© des cas que l'on retrouve dans le processus d'int√©gration du service avec d'autres prestataires de paiement. <br><br>  Pour commencer, nous nous tournons vers un achat unique non r√©utilisable. <br><br><img src="https://habrastorage.org/webt/ob/xi/rd/obxirdlzjhofj6uvioqwixp-r2k.png"><br>  <i><font color="gray">Figure 3. Processus de paiement unique non remboursable</font></i> <br><br>  √Ä l'√©tape 1, l'utilisateur fait une demande d'achat du service.  L'application d√©cide que le paiement doit √™tre effectu√© et, √† l'√©tape 2, le contr√¥le est transf√©r√© au fournisseur de paiement (App Store).  √âtape 3: l'utilisateur re√ßoit un formulaire pour effectuer un paiement.  √âtape 4: l'utilisateur fournit des donn√©es pour le paiement.  √âtape 5: le fournisseur finalise la transaction et communique le r√©sultat √† l'application en renvoyant un re√ßu contenant des informations compl√®tes sur l'achat (date, service, statut, etc.).  √âtape 6: le ch√®que, compl√©t√© par des donn√©es utilisateur, est envoy√© au serveur pour traitement.  Le serveur traite les donn√©es de contr√¥le et g√©n√®re une notification push pour l'application √† la septi√®me √©tape.  Dans la huiti√®me √©tape, la notification est montr√©e √† l'utilisateur. <br><br>  Le probl√®me est que les √©tapes 3, 4 et 5 sont effectu√©es du c√¥t√© du prestataire de paiement, ne sont pratiquement pas contr√¥l√©es par nous et peuvent avoir diff√©rentes variantes.  Ainsi, le processus n'a pas r√©ellement une structure lin√©aire, comme le montre la figure 2, mais une ramification (voir la figure 4), et chaque branche doit √™tre g√©r√©e diff√©remment par l'application. <br><br><img src="https://habrastorage.org/webt/8h/ur/mv/8hurmv5_d6mact7vy90jcdb9s_i.png"><br>  <i><font color="gray">Figure 4. Branchement d'un diagramme d'√©tat de paiement unique</font></i> <br><br>  L'achat d'abonnements commence de la m√™me mani√®re qu'un paiement unique, mais un contr√¥le plus pouss√© du processus est assez difficile √† contr√¥ler. <br><br><img src="https://habrastorage.org/webt/lj/di/eb/ljdiebqce8tfo236xv8gir0jaa4.png"><br>  <i><font color="gray">Figure 5. √âtats d'abonnement g√©r√©s en externe</font></i> <br><br>  Permettez-moi de vous rappeler que l'abonnement Apple, que nous consid√©rons comme un exemple, est g√©r√© en externe.  Cela signifie que l'utilisateur apr√®s l'achat peut le g√©rer de mani√®re asynchrone: fermer, modifier la date d'expiration, demander un remboursement.  Nous le voyons √† l'√©tape 9. Puisque l'action se d√©roule en dehors de notre syst√®me, dans la figure, je l'ai marqu√©e avec une ligne pointill√©e. <br><br>  √Ä l'√©tape 10, l'App Store peut modifier l'√©tat de l'abonnement: renouveler, fermer, saisir le d√©lai de gr√¢ce dans la fen√™tre. <br><br>  Pour que nous puissions savoir dans quel √©tat se trouve l'abonnement, il y a l'√©tape 11, qui est sp√©cifique aux agr√©gateurs tels que l'App Store et Google Wallet.  √Ä cette √©tape, le syst√®me envoie un jeton, qui est utilis√© comme re√ßu re√ßu au tout d√©but lors de l'achat d'un abonnement ou apr√®s son renouvellement pr√©c√©dent. <br><br>  L'√©tape 12 est la r√©ponse du fournisseur.  Nous recevons un ch√®que avec l'√©tat actuel de l'abonnement.  Le r√©sultat de cette √©tape d√©pend des √©tapes asynchrones 9 et 10. <br><br>  √Ä l'automne 2018, Apple for all a mis en place un m√©canisme de <b>notifications</b> de <b>serveur √† serveur</b> , qui vous permet de notifier les changements survenus avec un abonnement.  La r√©ception d'une telle notification est indiqu√©e √† l'√©tape 13. Pour la plupart des autres fournisseurs, le m√©canisme de notification de serveur √† serveur est le seul, de sorte que l'on peut faire valoir que l'exemple d'Apple couvre toute la vari√©t√© des cas.  Dans le cas d'autres fournisseurs, l'√©tape 13 vous permet d'exclure les √©tapes 11 et 12 du sch√©ma. <br><br>  √Ä l'√©tape 14, le serveur g√©n√®re une r√©ponse pour que l'application modifie l'√©tat de l'abonnement. <br><br>  Ainsi, nous avons obtenu un graphique complet des √©tats qui doivent √™tre pass√©s afin de v√©rifier les services payants. <br><br><img src="https://habrastorage.org/webt/tg/he/vx/tghevxtlppxvc9xuqt4wczbav0s.png"><br>  <i><font color="gray">Figure 6. Processus complet de modification des √©tats de paiement (√† l'aide d'un exemple d'abonnement g√©r√© en externe)</font></i> <br><br>  Les parties que nous ne contr√¥lons pas dans notre syst√®me sont color√©es en orange et ce sont des bo√Ætes noires pour nous. <br><br><h2>  M√©thodes de test de facturation </h2><br>  Ainsi, le principal probl√®me technique lors du test des services payants est la pr√©sence de ¬´bo√Ætes noires¬ª, dont nous contr√¥lons tr√®s peu les √©tats.  Cela d√©finit un ensemble de m√©thodes qui peuvent couvrir toute la vari√©t√© des cas. <br><br>  Il n'y a pas beaucoup de ces m√©thodes, et nous les avons divis√©es en trois cat√©gories: les paiements r√©els, les bacs √† sable et l'√©limination des d√©pendances externes des "bo√Ætes noires". <br><br><h3>  Paiements r√©els </h3><br>  Les paiements r√©els en tant que m√©thode d'essai sont bons dans la mesure o√π ils donnent une id√©e claire de l'√©tat de l'int√©gration.  Une erreur lors d'un paiement r√©el est une preuve inconditionnelle d'un bug. <br><br>  Sinon, les paiements r√©els sont mauvais.  Tout d'abord, cela co√ªte cher: il est √©vident que pour effectuer un vrai paiement, il faut d√©penser de l'argent r√©el.  Vous vous trompez si vous pensez qu'en fin de compte, le montant total sera restitu√© √† l'entreprise: tout d'abord, les prestataires facturent des frais pour chaque transaction, dont la taille, comme d√©crit ci-dessus, d√©pend de la cote de risque de l'organisation et peut atteindre 40% (et m√™me plus) ;  deuxi√®mement, vous risquez de perdre de l'argent lorsque vous testez des paiements dans d'autres pays en raison de l'√©cart de change - la diff√©rence entre les taux d'achat et de vente de la devise (vous effectuerez l'achat au taux de vente de devises √©trang√®res de la banque, et le retour se fera au taux d'achat). <br><br>  En outre, cette m√©thode peut prendre beaucoup de temps, car vous devez attendre la fin de la p√©riode de renouvellement de l'abonnement, la fin des p√©riodes de gr√¢ce, et cela peut prendre des mois. <br><br><h3>  Bacs √† sable </h3><br>  Les bacs √† sable sont magnifiques.  En fait, c'est la m√™me fonctionnalit√© qu'un fournisseur de paiement nous donne dans le cas d'un paiement r√©el, mais sans d√©penser de l'argent r√©el.  Il est enti√®rement pris en charge par le fournisseur, ce qui signifie que l'int√©gration avec le bac √† sable est bon march√©. <br><br>  Le probl√®me de la longueur des tests dans le temps est r√©solu, en r√®gle g√©n√©rale, √† l'aide de diverses astuces.  Par exemple, le sandbox de l'App Store utilise la conversion d'expiration d'abonnement suivante. <br><br><div class="scrollable-table"><table><tbody><tr><td>  Abonnement en temps r√©el <br></td><td>  Dur√©e d'abonnement Apple Sandbox <br></td></tr><tr><td>  1 semaine <br></td><td>  3 minutes <br></td></tr><tr><td>  1 mois <br></td><td>  5 minutes <br></td></tr><tr><td>  2 mois <br></td><td>  10 minutes <br></td></tr><tr><td>  3 mois <br></td><td>  15 minutes <br></td></tr><tr><td>  6 mois <br></td><td>  30 minutes <br></td></tr><tr><td>  1 an <br></td><td>  1 heure <br></td></tr></tbody></table></div>  <i><font color="gray">Tableau 1. Le ratio de la p√©riode de validit√© d'un abonnement r√©el et d'un abonnement dans le bac √† sable d'Apple</font></i> <br><br>  Les abonnements Google Wallet sandbox par d√©faut sont r√©pertori√©s dans le tableau 2 et peuvent √™tre configur√©s dans la console du vendeur. <br><br><div class="scrollable-table"><table><tbody><tr><td>  Abonnement en temps r√©el <br></td><td>  Dur√©e d'abonnement √† Google Sandbox <br></td></tr><tr><td>  1 semaine <br></td><td>  5 minutes <br></td></tr><tr><td>  1 mois <br></td><td>  5 minutes <br></td></tr><tr><td>  3 mois <br></td><td>  10 minutes <br></td></tr><tr><td>  6 mois <br></td><td>  15 minutes <br></td></tr><tr><td>  1 an <br></td><td>  30 minutes <br></td></tr></tbody></table></div>  <i><font color="gray">Tableau 2. D√©finition de la dur√©e d'un abonnement dans le sandbox de Google</font></i> <br><br>     Apple,   Google    , -  . .,     3. <br><br><div class="scrollable-table"><table><tbody><tr><td>    <br></td><td>     Google <br></td></tr><tr><td>   (trial) <br></td><td> 3  <br></td></tr><tr><td>   (introductory) <br></td><td>     <br></td></tr><tr><td> - (3/7 ) <br></td><td> 5  <br></td></tr><tr><td>    (hold) <br></td><td> 10  <br></td></tr><tr><td>  (1/2/3 ) <br></td><td> 5/10/15  () <br></td></tr></tbody></table></div> <i><font color="gray"> 3.        Google</font></i> <br><br>       -:   App Store     ,   Google Wallet          Play Store. <br><br>    ,   -    .   ,     70  ,    Badoo,          .   Adyen  PayPal.     ,       ( Google Wallet),        ( App Store  Fortumo).   ,         . <br><br><img src="https://habrastorage.org/webt/iz/as/im/izasimha0d95e0w214ym9kyfhcy.png"><br> <i><font color="gray"> 7.      </font></i> <br><br><h3>    </h3><br>      ,       ‚Äî    ,        ,         .   : ,   . <br><br>    ‚Äî                  (. . 8). ,    -   +7111-111-11-11               .    +7111-111-11-12  ,         ¬´     ¬ª. <br><br><img width="340" src="https://habrastorage.org/webt/cb/zi/xy/cbzixy8v5c16-fjdnobzksxoij4.png"><br> <i><font color="gray"> 8.  </font></i> <br><br>    ‚Äî    (      ) (. . 9).                .             (      ),          . <br><br><img width="340" src="https://habrastorage.org/webt/t5/nz/_h/t5nz_hwuq-49im9ow_csqennjh4.png"><br> <i><font color="gray"> 9.  </font></i> <br><br>    ‚Äî               (. . 10),                        . <br><br><img width="340" src="https://habrastorage.org/webt/-z/3p/f8/-z3pf8attjz-fiitaqbanlhmbbe.png"><br> <i><font color="gray"> 10.  </font></i> <br><br>          ,      ,                     .      (, , )      .  ,      , ,             ,   . <br><br>      .  3, 4, 5    :    ,      .             -   :          ,    ‚Äî   ,    ‚Äî  .     ¬´  ¬ª. <br><br><img src="https://habrastorage.org/webt/2p/cu/w-/2pcuw-rvhju4ngyzr3ez7rqlhco.png"><br> <i><font color="gray"> 11.            (     App Store)</font></i> <br><br>   ,       (,      ).   ‚Äî      ,     .       . ,   ,           ,            .    ,          . ,              . <br><br><h2>     </h2><br>      .   ,          ?        : <br><br><ul><li>    ‚Äî          ? <br></li><li>   end-to-end ‚Äî    :             -  ? <br></li><li>  ‚Äî   :     ,        . <br></li></ul><br>      . <br><br><img src="https://habrastorage.org/webt/ck/sn/re/cksnrehqrplo3q14juwsyrar31m.png"><br> <i><font color="gray"> 4.     </font></i> <br><br> <b> .</b>    .     .     ,      .   :     ,   . <br><br> <b>.</b> , ,  Apple  Google, .        (   ).      end-to-end :           .  , ,   . <br><br> <b>, , </b> ‚Äî   .      .            .  :         . <br><br><h2>    </h2><br>    ,       ,     . <br><br>      ,        .         . <br><br>      :     .  ,     , ‚Äî            . <br><br>         ,    :     ‚Äî , , ;     ‚Äî    :    . <br><br><img src="https://habrastorage.org/webt/hc/rg/ka/hcrgka-jxqtj6rftvexttwrlvqw.jpeg"><br> <i><font color="gray"> 12.        </font></i> <br><br><h2>     </h2><br>   ,  ,       ,      ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="> </a> . <br><br>      ,      12,      Badoo. <br><br><h4>     </h4><br>          .       .    QA-      .   ,    . ,  -   ,              ,   .   ,         . <br><br>  :      . <br><br><h4>      </h4><br>  ,      , ‚Äî     . ,    Apple      .         .   ,     .       :            -  . <br><br>   ‚Äî ,   . -,       . -,    ,  -,   ,          . <br><br>      ‚Äî    :                    ,   Apple   .       1  ‚Äî ,         . <br><br><h4>      </h4><br>            .          ,       .        ,     -    . <br><br>          ,             (       ). <br><br><h2>  Conclusions </h2><br><ol><li>      ,          . <br></li><li>       (     )         .           ,          . <br></li><li>     ¬´ ¬ª  ,     .     -         ‚Äî     .     ,  : ,    ‚Äî  ,     ‚Äî     . <br></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lorsque vous utilisez des faux, des mokas et des talons, il est important de se rappeler qu'il s'agit de v√©ritables mod√®les de paiement et, comme tout mod√®le, ils ont un degr√© d'approximation de la r√©alit√© et des risques. </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ces risques doivent √™tre reconnus et couverts soit par des paiements en nombre, soit par des contr√¥les suppl√©mentaires.</font></font></font></font><br></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">√Ä propos de la fa√ßon dont nous avons r√©ussi √† r√©aliser une automatisation stable et peu co√ªteuse des tests de services payants dans une application iOS, nous le dirons </font></font></font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dans le prochain article</font></font></font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font></font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Merci de votre attention! </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tous les gros profits et moins de bugs!</font></font></font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr459650/">https://habr.com/ru/post/fr459650/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr459638/index.html">Cr√©ation d'une base de connaissances mondiale sur les batteries</a></li>
<li><a href="../fr459640/index.html">Documents en tant que code. Partie 1: automatiser la mise √† jour</a></li>
<li><a href="../fr459642/index.html">Acc√®s s√©curis√© aux champs d'enregistrement en C ++ sans sacrifier l'efficacit√© (en utilisant CortexM comme exemple)</a></li>
<li><a href="../fr459644/index.html">Gradateurs LED</a></li>
<li><a href="../fr459648/index.html">Tout devrait bien se passer dans l'analyseur: √† la fois fonctionnalit√© et interface ... Nous explorons la nouvelle interface Solar appScreener 3.1</a></li>
<li><a href="../fr459652/index.html">Approche de test de r√©gression automatis√©e</a></li>
<li><a href="../fr459656/index.html">Service OData sans √©crire de code</a></li>
<li><a href="../fr459658/index.html">PVS-Studio voulait mais n'a pas pu trouver de bugs dans robots.txt</a></li>
<li><a href="../fr459662/index.html">PVS-Studio voulait, mais n'a pas pu trouver de bogues dans robots.txt</a></li>
<li><a href="../fr459668/index.html">Comment reconna√Ætre le texte d'une photo: nouvelles fonctionnalit√©s du cadre Vision</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>