<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äç‚öñÔ∏è ‚úñÔ∏è ‚ùé Mejores pr√°cticas de Redis, parte 1 üåû üéè üíä</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En una serie de varios art√≠culos, presentar√© mi traducci√≥n adaptada de la secci√≥n Redis Best Practices del sitio web oficial de Redis Labs. 
 Redis se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Mejores pr√°cticas de Redis, parte 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485672/">  En una serie de varios art√≠culos, presentar√© mi traducci√≥n adaptada de la secci√≥n <a href="https://redislabs.com/redis-best-practices/" rel="nofollow">Redis Best Practices</a> del sitio web oficial de Redis Labs. <div style="text-align:center;"><img src="https://habrastorage.org/webt/hr/6y/f5/hr6yf5w1hp0fh-i5vfa0p1pxeuy.png"></div><a name="habracut"></a><br>  Redis se puede usar de innumerables maneras, sin embargo, hay varios patrones que se pueden usar para resolver problemas comunes.  Hemos compilado una colecci√≥n de patrones comunes que consideramos las <i>mejores pr√°cticas</i> para resolver estos problemas.  Esta colecci√≥n no es exhaustiva y no parece ser un conjunto de las √∫nicas formas de usar Redis, pero esperamos que sirva como un punto de partida para resolver problemas usando Redis. <br><br>  Dividimos esta gu√≠a de mejores pr√°cticas en cap√≠tulos y subcap√≠tulos seg√∫n sea necesario (Nota del traductor: algunos subcap√≠tulos son cortos, por lo que los combinar√© en uno): <br><br><ul><li>  en el cap√≠tulo "Patrones de indexaci√≥n", veremos formas de ir m√°s all√° del acceso habitual de valores clave con Redis.  Incluye formas de usar patrones clave de manera inteligente utilizando varios tipos de datos Redis para ayudar no solo a encontrar datos, sino tambi√©n a reducir la complejidad del acceso; </li><li> El cap√≠tulo Patrones de interacci√≥n se centra en los patrones de Redis que mueven los datos a trav√©s de la infraestructura.  En este caso, Redis no act√∫a como un repositorio, sino como una gu√≠a de datos; </li><li>  El cap√≠tulo ‚ÄúPatrones de almacenamiento de datos‚Äù describe m√©todos para guardar representaciones complejas de datos en Redis.  Calcularemos scripts complejos de documentos que se pueden generalizar de formas simples y complejas; </li><li>  los patrones con respecto a los datos almacenados temporalmente se describen en el cap√≠tulo "Patrones de series temporales"; </li><li>  El l√≠mite de velocidad se usa a menudo en Redis.  En el cap√≠tulo "Patrones b√°sicos de limitaci√≥n de velocidad" pasaremos a los conceptos b√°sicos de sus casos de uso; </li><li>  El filtro Bloom se ha visto durante mucho tiempo en Redis, y en el cap√≠tulo "Patrones con un filtro Bloom" observamos las estructuras de datos probabil√≠sticas y c√≥mo difieren de sus an√°logos improbables; </li><li>  El mostrador es una recepci√≥n sorprendentemente profunda.  En un cap√≠tulo separado, exploramos c√≥mo calcular la actividad y los elementos √∫nicos de manera computacional eficiente; </li><li>  finalmente, hablaremos sobre c√≥mo aprovechar Lua para que Redis haga m√°s con menos. </li></ul><br>  Esta gu√≠a es inconsistente, por lo que puede comenzar con cualquier cap√≠tulo.  Tambi√©n puede usar la navegaci√≥n al comienzo de cada publicaci√≥n para encontrar algo adecuado. <br><br><h2>  Patrones de indexaci√≥n </h2><br>  Conceptualmente, Redis es una base de datos basada en el paradigma clave / valor, cuando cada pieza de datos est√° asociada a una determinada clave.  Si desea obtener datos para algo que no sea una clave, deber√° implementar un √≠ndice que utilice uno de los muchos tipos de datos disponibles en Redis. <br><br>  La indexaci√≥n en Redis es bastante diferente de la que se presenta en otras bases de datos, por lo que sus propios escenarios de uso y datos determinar√°n la mejor estrategia para la indexaci√≥n.  En este cap√≠tulo, veremos algunas estrategias generales de recuperaci√≥n de datos adem√°s de la recuperaci√≥n simple de clave / valor: <br><br><ul><li>  conjuntos ordenados como √≠ndices; </li><li>  √≠ndices lexicogr√°ficos; </li><li>  √≠ndices geoespaciales; </li><li>  Geolocalizaci√≥n de IP </li><li>  b√∫squeda de texto completo; </li><li>  √≠ndices particionados. </li></ul><br><h3>  Conjuntos ordenados como √≠ndices </h3><br>  Los conjuntos ordenados (ZSET) son un tipo de datos est√°ndar en Redis que representa muchos objetos √∫nicos (las repeticiones no se guardan), donde cada objeto se asigna a un n√∫mero (llamado "conteo"), que act√∫a como un mecanismo de clasificaci√≥n natural.  Y aunque los objetos no pueden repetirse, algunos objetos pueden tener el mismo recuento.  Con una complejidad de tiempo relativamente baja para agregar, eliminar y obtener un rango de valores (por rango o recuento), los conjuntos ordenados son bastante adecuados para ser √≠ndices.  Como ejemplo, tome los pa√≠ses del mundo, clasificados por poblaci√≥n: <br><br><pre><code class="plaintext hljs">&gt; ZADD countries-by-pop 1409517397 china &gt; ZADD countries-by-pop 146573899 russia &gt; ZADD countries-by-pop 81456724 germany &gt; ZADD countries-by-pop 333016381 usa &gt; ZADD countries-by-pop 1 mars &gt; ZADD countries-by-pop 37290812 afghanistan &gt; ZADD countries-by-pop 1388350202 india</code> </pre> <br>  Obtener los 5 principales pa√≠ses ser√° simple: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE countries-by-pop 0 4 1) "mars" 2) "afghanistan" 3) "germany" 4) "russia" 5) "india"</code> </pre> <br>  Y obtener pa√≠ses con poblaciones entre 10,000,000 y 1,000,000,000: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE countries-by-pop 10000000 1000000000 1) "afghanistan" 2) "germany" 3) "russia"</code> </pre> <br>  Puede crear m√∫ltiples √≠ndices para demostrar diferentes formas de ordenar los datos.  En nuestro ejemplo, podr√≠amos usar los mismos objetos, pero en lugar de la cantidad de personas, tomemos la densidad de poblaci√≥n, el tama√±o geogr√°fico, la cantidad de usuarios de Internet, etc.  Esto crear√° √≠ndices de alto rendimiento para varios aspectos.  Adem√°s, al dividir el nombre de un objeto con datos sobre √©l almacenados en Redis (en Hash, por ejemplo) o en otro almac√©n de datos, el proceso secundario podr√≠a obtener informaci√≥n adicional sobre cada elemento seg√∫n sea necesario. <br><br><h3>  √çndices lexicogr√°ficos </h3><br>  Los conjuntos ordenados (ZSET) con clasificaci√≥n por conteo tienen una propiedad interesante que se puede usar para crear un mecanismo para la clasificaci√≥n alfab√©tica aproximada.  La propiedad es que los objetos con la misma puntuaci√≥n se pueden devolver en orden lexicogr√°fico y por valores l√≠mite.  Tome los siguientes datos: <br><br><pre> <code class="plaintext hljs">&gt; ZADD animal-list 0 bison 0 boa 0 dog 0 emu 0 falcon 0 alligator 0 chipmunk</code> </pre> <br>  Este comando agregar√° varios animales a la tecla de lista de animales.  Cada objeto tiene una puntuaci√≥n de 0. Despu√©s de ejecutar el comando ZRANGE con los argumentos 0 y -1, vemos un curioso orden: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGE animal-list 0 -1 1) "alligator" 2) "bison" 3) "boa" 4) "chipmunk" 5) "dog" 6) "emu" 7) "falcon"</code> </pre> <br>  Aunque los elementos no se agregaron alfab√©ticamente, se devolvieron ordenados alfab√©ticamente.  Este orden es el resultado de la comparaci√≥n de cadenas binarias, byte por bit.  Esto significa que los caracteres ASCII se devolver√°n en orden alfab√©tico.  Esto sugiere lo siguiente: <br><br><ul><li>  los caracteres en min√∫scula y may√∫scula no se reconocer√°n como lo mismo; </li><li>  Los caracteres multibyte no se ordenar√°n como se esperaba. </li></ul><br>  Redis tambi√©n proporciona algunas caracter√≠sticas avanzadas para reducir a√∫n m√°s las b√∫squedas lexicogr√°ficas.  Por ejemplo, queremos devolver animales comenzando con <i>b</i> y terminando con <i>e</i> .  Podemos usar el siguiente comando: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f 1) "bison" 2) "boa" 3) "chipmunk" 4) "dog" 5) "emu"</code> </pre> <br>  El argumento <i>(f</i> puede ser un poco confuso. Este es un punto importante, porque Redis no tiene idea sobre la comprensi√≥n literal de las letras del alfabeto. Esto significa que debemos tener en cuenta que todo lo que comienza con <i>e</i> siempre estar√° antes que todo lo que comience con <i>f</i> , independientemente de las letras posteriores Otra nota es que el corchete indica b√∫squeda con inclusi√≥n, y el corchete indica b√∫squeda sin inclusi√≥n. En nuestro caso, si consultamos con <i>b</i> , esto se incluir√° en la lista, mientras que <i>f</i> no aparecer√° en la selecci√≥n. Si necesita todos los elementos hasta el final, use  codificado el √∫ltimo s√≠mbolo (255 o 0xFF): <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [c "[\xff" 1) "chipmunk" 2) "dog" 3) "emu" 4) "falcon"</code> </pre> <br>  Este comando tambi√©n puede ser limitado, asegurando as√≠ la paginaci√≥n: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYLEX animal-list [b (f LIMIT 0 2 1) "bison" 2) "boa" &gt; ZRANGEBYLEX animal-list [b (f LIMIT 2 2 1) "chipmunk" 2) "dog"</code> </pre> <br>  El √∫nico inconveniente es que la complejidad del tiempo aumentar√° a medida que aumente la sangr√≠a (primer argumento despu√©s de LIMIT).  Por lo tanto, si tiene 1 mill√≥n de objetos y est√° tratando de obtener los dos √∫ltimos, esto requerir√° un rastreo de solo un mill√≥n. <br><br><h3>  √çndices geoespaciales </h3><br>  Redis tiene varios equipos de indexaci√≥n geoespacial (equipos GEO), pero a diferencia de otros equipos, estos equipos no tienen sus propios tipos de datos.  Estos comandos en realidad complementan el tipo de conjunto ordenado.  Esto se logra codificando la latitud y la longitud en la puntuaci√≥n del conjunto ordenado utilizando el algoritmo geohash. <br>  Agregar elementos a un √≠ndice geogr√°fico es f√°cil.  Suponga que est√° siguiendo a un grupo de autom√≥viles que circulan por una carretera.  Llamamos a este conjunto de autos simplemente "autos".  Digamos que su m√°quina en particular se puede identificar como un objeto "my-car" (utilizamos el t√©rmino "objeto" porque el √≠ndice geogr√°fico es simplemente una forma del conjunto).  Para agregar una m√°quina al conjunto, podemos ejecutar el comando: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17087 36.12306 my-car</code> </pre> <br>  El primer argumento es el conjunto al que agregamos, el segundo es la latitud, el tercero es la longitud y el cuarto es el nombre del objeto. <br><br>  Para actualizar la ubicaci√≥n de la m√°quina, solo necesita ejecutar el comando nuevamente con las nuevas coordenadas.  Esto funciona porque un √≠ndice geogr√°fico es simplemente un conjunto donde no se permiten elementos duplicados. <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.17172 36.12196 my-car</code> </pre> <br>  Agregue un segundo autom√≥vil a "autom√≥viles".  Esta vez Volodia la lleva: <br><br><pre> <code class="plaintext hljs">&gt; GEOADD cars -115.171971 36.120609 volodias-car</code> </pre> <br>  Mirando las coordenadas, puedes decir que estos autos est√°n bastante cerca uno del otro, pero ¬øcu√°nto?  Puede definir esto con el comando GEODIST: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car volodias-car "151.9653"</code> </pre> <br>  Esto significa que dos veh√≠culos est√°n separados por aproximadamente 151 metros.  Tambi√©n puedes calcular en otras unidades: <br><br><pre> <code class="plaintext hljs">&gt; GEODIST cars my-car robins-car ft "498.5737"</code> </pre> <br>  Esto devolvi√≥ la misma distancia en pasos.  Tambi√©n puede usar millas (ml) o kil√≥metros (km). <br><br>  Ahora veamos qui√©n est√° en el radio de cierto punto: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUS cars -115.17258 36.11996 100 m 1) "volodias-car"</code> </pre> <br>  Esto devolvi√≥ a todos dentro de un radio de 100 metros alrededor del punto especificado.  Tambi√©n puede solicitar a todos en el radio de cualquier objeto del conjunto: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m 1) "volodias-car" 2) "my-car"</code> </pre> <br>  Tambi√©n podemos habilitar la distancia agregando el argumento WITHDIST opcional (esto funciona para GEORADIUS o GEORADIUSBYMEMBER): <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST 1) 1) "volodias-car" 2) "0.0000" 2) 1) "my-car" 2) "151.9653"</code> </pre> <br>  Otro argumento opcional para GEORADIUS y GEORADIUSBYMEMBER es WITHCOORD, que devuelve las coordenadas de cada objeto.  WITHDIST y WITHCOORD pueden usarse juntas o por separado: <br><br><pre> <code class="plaintext hljs">&gt; GEORADIUSBYMEMBER cars volodias-car 152 m WITHDIST WITHCOORD 1) 1) "volodias-car" 2) "0.0000" 3) 1) "-115.17197102308273315" 2) "36.12060917648089031" 2) 1) "my-car" 2) "151.9653" 3) 1) "-115.17171889543533325" 2) "36.12196018285882104"</code> </pre> <br>  Dado que los √≠ndices geoespaciales son solo una alternativa a los conjuntos ordenados, se pueden utilizar algunos operadores de estos √∫ltimos.  Si queremos eliminar "my-car" del conjunto de "carros", podemos usar el comando del conjunto ordenado de ZREM: <br><br><pre> <code class="plaintext hljs">&gt; ZREM cars my-car</code> </pre> <br>  Redis proporciona un rico conjunto de herramientas para trabajar con geoespacial, y en esta secci√≥n examinamos solo las b√°sicas. <br><br><h3>  Geolocalizaci√≥n de IP </h3><br>  Encontrar la ubicaci√≥n real del servicio conectado puede ser muy √∫til.  Las tablas de geolocalizaci√≥n de IP suelen ser bastante grandes y dif√≠ciles de administrar de manera efectiva.  Podemos usar conjuntos ordenados para implementar servicios de geolocalizaci√≥n IP r√°pidos y eficientes. <br><br>  IPv4 se hace referencia con mayor frecuencia en notaci√≥n decimal (74.125.43.99, por ejemplo).  Sin embargo, los servicios de red ven esta misma direcci√≥n como un n√∫mero de 32 bits, y cada byte representa uno de los cuatro n√∫meros en forma decimal.  El ejemplo anterior ser√≠a 0x4A7D2B63 en hexadecimal o 1249717091 en decimal. <br><br>  Los conjuntos de datos de geolocalizaci√≥n IP est√°n ampliamente disponibles y generalmente toman la forma de una tabla simple con tres columnas (inicio, final, ubicaci√≥n).  El principio y el final son la representaci√≥n decimal de IPv4.  En Redis, podemos adaptar conjuntos ordenados a este formato, porque no hay "agujeros" en los rangos de IP, por lo tanto, podemos asumir con seguridad que el final de un rango es el comienzo de otro. <br><br>  Para un ejemplo simple, agregue algunos rangos a los conjuntos ordenados: <br><br><pre> <code class="plaintext hljs">&gt; ZADD ip-loc 1249716479 us:1 &gt; ZADD ip-loc 1249716735 taiwan:1 &gt; ZADD ip-loc 1249717759 us:2 &gt; ZADD ip-loc 1249718015 finland:1</code> </pre> <br>  El primer argumento es la clave de nuestro conjunto, el segundo es la representaci√≥n decimal del final del rango de IP y el √∫ltimo es el objeto en s√≠.  Tenga en cuenta que el objeto establecido tiene un n√∫mero despu√©s de los dos puntos.  Esto es solo para facilitar un ejemplo.  Las tablas de IP reales tienen identificadores √∫nicos para cada rango (y m√°s informaci√≥n adicional que solo el nombre del pa√≠s). <br><br>  Para consultar la tabla para una direcci√≥n IP dada, podemos usar el comando ZRANGEBYSCORE con algunos argumentos adicionales.  Tome la direcci√≥n IP y convi√©rtala a decimal.  Esto se puede hacer usando su lenguaje de programaci√≥n.  Primero, use la direcci√≥n del ejemplo original 74.125.43.99 (1249717091).  Si tomamos este n√∫mero como punto de referencia y no especificamos un m√°ximo, y luego limitamos el resultado solo al primer objeto, encontraremos su geolocalizaci√≥n: <br><br><pre> <code class="plaintext hljs">&gt; ZRANGEBYSCORE ip-loc 1249717091 +inf LIMIT 0 1 1) "us:2"</code> </pre> <br>  El primer argumento es la clave de nuestro conjunto ordenado, el segundo es la representaci√≥n decimal de la direcci√≥n IP, el tercero (+ inf) le dice a Redis que solicite sin un l√≠mite superior, y los √∫ltimos tres argumentos simplemente indican que queremos obtener solo el primer resultado. <br><br><h3>  B√∫squeda de texto completo </h3><br>  Antes de la llegada de los m√≥dulos, la b√∫squeda de texto completo se implement√≥ utilizando los comandos nativos de Redis.  El m√≥dulo RedisSearch es mucho m√°s productivo que este patr√≥n, sin embargo, en algunos entornos no est√° disponible.  Adem√°s, este patr√≥n es muy interesante y puede generalizarse a otras cargas de trabajo en las que RedisSearch no ser√° ideal. <br>  Supongamos que tenemos varios documentos de texto que deben buscarse.  Este puede no ser el caso de uso obvio para Redis, ya que proporciona acceso clave, pero, por otro lado, Redis se puede utilizar como un motor de b√∫squeda de texto completo completamente nuevo. <br><br>  Primero, tomemos algunos textos de muestra en los documentos: <br><br>  <i>"Redis es muy r√°pido"</i> <br>  <i>"Los guepardos son r√°pidos"</i> <br>  <i>"Los guepardos tienen manchas"</i> <br><br>  Los dividimos en conjuntos de palabras, separados por un espacio para la simplicidad: <br><br><pre> <code class="plaintext hljs">&gt; SADD ex1 redis is very fast &gt; SADD ex2 cheetahs are very fast &gt; SADD ex3 cheetahs have spots</code> </pre> <br>  Observe que ponemos cada l√≠nea en su propio conjunto.  Puede parecer que solo estamos agregando la l√≠nea completa: SADD es variable y toma varios elementos a la vez como argumentos.  Tambi√©n convertimos todas las palabras a min√∫sculas. <br>  Entonces necesitamos invertir este √≠ndice y mostrar qu√© palabra est√° contenida en qu√© documento.  Para hacer esto, haremos un conjunto para cada palabra y pondremos el nombre del documento como un objeto: <br><br><pre> <code class="plaintext hljs">&gt; SADD redis ex1 &gt; SADD is ex1 &gt; SADD very ex1 ex2 &gt; SADD fast ex1 ex2 &gt; SADD cheetahs ex2 ex3 &gt; SADD have ex3 &gt; SADD spots ex3</code> </pre> <br>  Para mayor claridad, dividimos esto en diferentes comandos, pero todos los comandos generalmente se ejecutan at√≥micamente en el bloque MULTI / EXEC. <br><br>  Para consultar nuestro peque√±o √≠ndice de texto completo, utilizamos el comando SINTER (intersecci√≥n de conjuntos).  Encuentre documentos con "muy" y "r√°pido": <br><br><pre> <code class="plaintext hljs">&gt; SINTER very fast 1) "ex2" 2) "ex1"</code> </pre> <br>  En el caso de que no haya documentos que coincidan con la solicitud, obtendremos un resultado vac√≠o: <br><br><pre> <code class="plaintext hljs">&gt; SINTER cheetahs redis (empty list or set)</code> </pre> <br>  Por consistencia, es mejor usar SUNION en lugar de SINTER: <br><br><pre> <code class="plaintext hljs">&gt; SUNION cheetahs redis 1) "ex2" 2) "ex1" 3) "ex3"</code> </pre> <br>  Eliminar un objeto del √≠ndice es un poco m√°s complicado.  Primero, obtenga palabras indexadas del documento, luego elimine el identificador del documento de cada palabra: <br><br><pre> <code class="plaintext hljs">&gt; SMEMBERS ex3 1) "spots" 2) "have" 3) "cheetahs" &gt; SREM have ex3 &gt; SREM cheetahs ex3 &gt; SREM spots ex3</code> </pre> <br>  Redis no tiene un operador separado para realizar todos estos pasos con un solo comando, por lo que primero debe consultar con el comando SMEMBERS, luego eliminar cada objeto secuencialmente usando SREM. <br><br>  Por supuesto, esta es una b√∫squeda de texto completo muy simplificada.  Puede hacerlo m√°s avanzado utilizando conjuntos ordenados en lugar de los habituales.  En este caso, si una palabra aparece m√°s de una vez en un documento, puede clasificarla m√°s arriba que el documento en el que aparece una vez.  Los patrones descritos anteriormente son m√°s o menos los mismos, con la excepci√≥n de los tipos de conjuntos utilizados. <br><br><h3>  √çndices particionados </h3><br>  Una sola instancia (o fragmento) de Redis es muy viable, pero hay circunstancias en las que podr√≠a necesitar un √≠ndice distribuido en varias instancias.  Por ejemplo, para aumentar el rendimiento al paralelizar √≠ndices que son m√°s grandes que el espacio libre de una instancia.  Supongamos que desea realizar una operaci√≥n en varias teclas.  Una forma efectiva de separar (particionar) estas claves es garantizar una distribuci√≥n uniforme de las claves en cada partici√≥n, realizar cualquier operaci√≥n en cada partici√≥n en paralelo y luego combinar los resultados al final. <br><br>  Para lograr una distribuci√≥n uniforme de claves, utilizaremos un algoritmo de cifrado no criptogr√°fico.  Cualquier funci√≥n r√°pida de hash servir√°, pero usamos el famoso CRC-32 como ejemplo.  En la mayor√≠a de los casos, estos algoritmos devuelven el resultado en hexadecimal (para "my-cool-document" CRC-32 devolver√° F9FDB2C9).  La representaci√≥n hexadecimal es m√°s simple para la m√°quina, pero es solo otra representaci√≥n de enteros decimales, lo que significa que puede realizar c√°lculos sobre estos valores. <br>  A continuaci√≥n, debe determinar el n√∫mero de particiones; esto deber√≠a ser al menos x2 del n√∫mero de copias.  Esto contribuye a√∫n m√°s a la escala. <br><br>  Digamos que tenemos 3 copias y 6 particiones.  La partici√≥n a la que se env√≠a el documento se puede calcular mediante la siguiente operaci√≥n: <br><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&amp;#xA0;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy=&quot;false&quot;>)</mo><mtext>&amp;#xA0;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&amp;#xA0;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="64.438ex" height="2.78ex" viewBox="0 -832 27744 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-68" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-61" x="576" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-73" x="1106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-68" x="1575" y="0"></use><g transform="translate(2152,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-66" x="353" y="-219"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-75" x="2891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6E" x="3463" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-63" x="4064" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-74" x="4497" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-69" x="4859" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6F" x="5204" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6E" x="5690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMAIN-28" x="6290" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-69" x="6680" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-64" x="7025" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-65" x="7549" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6E" x="8015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-74" x="8616" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-69" x="8977" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-66" x="9323" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-69" x="9873" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-63" x="10219" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-61" x="10652" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-64" x="11182" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6F" x="11705" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-72" x="12191" y="0"></use><g transform="translate(12642,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-64" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6F" x="13362" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-63" x="13848" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-75" x="14281" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6D" x="14854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-65" x="15732" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6E" x="16199" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-74" x="16799" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMAIN-29" x="17161" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6D" x="17800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6F" x="18679" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-64" x="19164" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6E" x="19688" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-75" x="20288" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6D" x="20861" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-62" x="21739" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-65" x="22169" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-72" x="22635" y="0"></use><g transform="translate(23087,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-70" x="353" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-61" x="23793" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-72" x="24322" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-74" x="24774" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-69" x="25135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-74" x="25481" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-69" x="25842" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6F" x="26188" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-6E" x="26673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=https://habr.com/ru/post/485672/&amp;xid=17259,15700023,15700043,15700186,15700190,15700256,15700259,15700262,15700265,15700271&amp;usg=ALkJrhhUjDlM8kaoRBUXCYZgYMVYGLf3mA#MJMATHI-73" x="27274" y="0"></use></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>h</mi><mi>a</mi><mi>s</mi><mi>h</mi><msub><mtext>&nbsp;</mtext><mi>f</mi></msub><mi>u</mi><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mo stretchy="false">(</mo><mi>i</mi><mi>d</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>f</mi><mi>i</mi><mi>c</mi><mi>a</mi><mi>d</mi><mi>o</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>d</mi></msub><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo stretchy="false">)</mo><mtext>&nbsp;</mtext><mi>m</mi><mi>o</mi><mi>d</mi><mi>n</mi><mi>u</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><msub><mtext>&nbsp;</mtext><mi>p</mi></msub><mi>a</mi><mi>r</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> hash \ _function (identificador \ _document) \ mod number \ _partitions </script></p><br><br><pre> <code class="plaintext hljs">CRC32(‚Äúmy-cool-document‚Äù) = F9FDB2C9 (16)  4194153161 (10) 4194153161 mod 6 = 5</code> </pre> <br>  En Redis Enterprise, puede controlar a qu√© partici√≥n pertenece la clave, utilizando expresiones regulares predefinidas o envolviendo parte de la clave con llaves.  Entonces, para nuestro ejemplo, podemos establecer la clave para el documento de la siguiente manera: <br><br>  <i>idx: my-cool-document {5}</i> <br><br>  Luego tenemos otro documento que emite una partici√≥n con el n√∫mero 3, por lo tanto, la clave se ver√° as√≠: <br><br>  <i>idx: mi-otro-documento {3}</i> <br><br>  Si tiene teclas auxiliares adicionales con las que necesitar√° trabajar y que est√°n asociadas con este documento, debe estar en la misma partici√≥n para poder realizar operaciones con ambas teclas al mismo tiempo sin encontrar un mont√≥n de errores.  Para hacer esto, debe agregar el mismo n√∫mero de partici√≥n a la clave que el documento. <br><br>  Si observa sus datos de forma remota, ver√° que su √≠ndice se distribuye de manera bastante uniforme entre las particiones.  Puede paralelizar la tarea que debe realizarse para cada partici√≥n.  Cuando tiene una tarea que debe realizarse a trav√©s de todo el √≠ndice, su aplicaci√≥n deber√° realizar la misma l√≥gica para cada partici√≥n, devolver el resultado y combinar seg√∫n sea necesario en la aplicaci√≥n. <br><br>  Sobre esto, el primer art√≠culo llega a su fin.  La siguiente ser√° una traducci√≥n de los subt√≠tulos "Patrones de interacci√≥n" y "Patrones de almacenamiento de datos". </div></div><p>Source: <a href="https://habr.com/ru/post/485672/">https://habr.com/ru/post/485672/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../485648/index.html">El enfoque pit√≥nico de los bucles for: range () y enumerate ()</a></li>
<li><a href="../485650/index.html">T√©cnicas de reducci√≥n de imagen de Docker</a></li>
<li><a href="../485652/index.html">Estad√≠sticas de comentarios en l√≠nea de confluencia</a></li>
<li><a href="../485660/index.html">La propia compa√±√≠a de protecci√≥n DDoS lanz√≥ ataques DDoS, admiti√≥ su fundador.</a></li>
<li><a href="../485664/index.html">Crear par√°metros din√°micos en un trabajo de Jenkins, o c√≥mo hacer que su tarea sea f√°cil de usar</a></li>
<li><a href="../485688/index.html">Myapp extiende vacaciones</a></li>
<li><a href="../485692/index.html">Asesoramiento del especialista de TI al cliente, o c√≥mo automatizar el desorden</a></li>
<li><a href="../485694/index.html">Embox en el procesador Elbrus. O nunca olvides lo que tienes en inteligencia</a></li>
<li><a href="../485702/index.html">Meetup FunCorp iOS # 2</a></li>
<li><a href="../485704/index.html">Pixel art para principiantes: arreglando errores comunes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>