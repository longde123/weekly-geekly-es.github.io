<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐ง๐ฝ ๐ ๐ ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C. ุฃูุงูุฑ ุชุจุงุฏู APDU ุนุจุฑ ูุงุฌูุฉ I2C ๐ซ ๐ถ ๐ฉ๐ปโ๐ณ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ููุฏูุฉ 
 ููุฐ ุจุนุถ ุงูููุช ุ ุดุงุฑูุช ูู ุชุทููุฑ ุฌูุงุฒ ูุงู ูู ุงูุถุฑูุฑู ููู ุชูููุฐ ุงูุชุดููุฑ ุงูุฑูุณู. ูุธุฑูุง ูุฃูู ูุงู ูู ุงูููุชุฑุถ ูู ุงููุณุชูุจู ุงูุชุตุฏูู ุนูู ูุฐุง ุงููุฑุงุฑ ุ ูู...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C. ุฃูุงูุฑ ุชุจุงุฏู APDU ุนุจุฑ ูุงุฌูุฉ I2C</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/439574/" style=";text-align:right;direction:rtl"><h2 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h2><br>  ููุฐ ุจุนุถ ุงูููุช ุ ุดุงุฑูุช ูู ุชุทููุฑ ุฌูุงุฒ ูุงู ูู ุงูุถุฑูุฑู ููู ุชูููุฐ ุงูุชุดููุฑ ุงูุฑูุณู.  ูุธุฑูุง ูุฃูู ูุงู ูู ุงูููุชุฑุถ ูู ุงููุณุชูุจู ุงูุชุตุฏูู ุนูู ูุฐุง ุงููุฑุงุฑ ุ ููุฏ ุชู ุทุฑุญ ูุชุทูุจุงุช ูุนููุฉ ูุชูููุฐ ุงูุชุดููุฑ.  ููุฃุญุฏ ุฎูุงุฑุงุช ุชุจุณูุท ุชูููุฐ ูุฐู ุงููุชุทูุจุงุช ุ ูุธุฑูุง ูู ุฅููุงููุฉ ุฏูุฌ ูุงุฑุฆ ุงูุจุทุงูุฉ ุงูุฐููุฉ ูู ุงูุฌูุงุฒ ุฃู ุชุซุจูุช ุดุฑูุญุฉ ุงูุจุทุงูุฉ ุงูุฐููุฉ ุ ุญูุซ ุชู ุจุงููุนู ุชูููุฐ ุงูุนุฏูุฏ ูู ุงูุณููุงุฑูููุงุช ุงููุงุฒูุฉ ููุนูู ูุน ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ. <br><br>  ูุณูุก ุงูุญุธ ุ ูุฅู ูุซู ูุฐุง ุงูุญู ูุง ููุงุณุจ ูุณุจุจ ูุง ุ ุนูู ุงูุฑุบู ูู ุฃูู ุฅุฐุง ูุงู ูู ุงููููู ุงุณุชุฎุฏุงู ุชุดููุฑ ุงูุฃุฌูุฒุฉ ุงูุฑูุณูุฉ ุงููุนุฏุฉ ุจุงููุนู ุ ูุฅู ูุฐุง ูู ุดุฃูู ุชุณุฑูุน ุชุทููุฑ ุงูููุชุฌ ุงูููุงุฆู ูุฅุตุฏุงุฑ ุงูุดูุงุฏุงุช ุงููุงุญูุฉ ูู ุจุดูู ูุจูุฑ.  ููุงูุช ุฃุณุจุงุจ ุงุณุชุญุงูุฉ ุงุณุชุฎุฏุงู ุฑููุฒ USB ุฃู ุงูุจุทุงูุงุช ุงูุฐููุฉ ุดุงุฆุนุฉ ุฌุฏูุง: ูุงู ููุจุบู ุฃู ูููู ุงูุฌูุงุฒ ูุถุบูุทูุง ุชูุงููุง (ูุญุฏุฉ ุตุบูุฑุฉ ูุฃุฌูุฒุฉ M2M ุฃู IoT) ุ ูุชู ุชุดุบููู ุจุดูู ุฃุณุงุณู ูู ูุถุน ุฎุงูู ูู ุงูุตูุงูุฉ ููุนูู ูู ูุทุงู ุฏุฑุฌุงุช ุญุฑุงุฑุฉ ูุงุณุนุฉ. <br><br>  ูู ูุฐู ุงูููุงูุฉ ุ ุฃูุฏ ุงูุชุญุฏุซ ุนู ุญู ูุญุชูู ููุซู ูุฐู ุงูุญุงูุฉ ุจุงุณุชุฎุฏุงู ุดุฑูุญุฉ A7001 ุ ุงููุชุตูุฉ ุจุงููุธุงู ุนุจุฑ ูุงุฌูุฉ I2C. <br><br><img src="https://habrastorage.org/webt/e5/bw/lh/e5bwlh2fhtuxpwj7cdmmt7ujtjc.png"><br><a name="habracut"></a><br><h2 style=";text-align:right;direction:rtl">  ูุดุงูู ุชูููุฐ ุงูุชุดููุฑ ูู PAC </h2><br>  ูุง ุฃุฑูุฏ ุฃู ุฃุชุญุฏุซ ุนู ูุดููุงุช ุดูุงุฏุฉ ุงูุชุดููุฑ.  ูู ูู ูุนูู ูุน ูุฐุง ูุฏุฑู ูุฐุง ุนูู ุฃู ุญุงู ุ ููู ุงูุจุงูู ูุง ูุจุฏู ุจุญุงุฌุฉ ุฅููู.  ูููู ุญูู ุจุนุถ ุงูููุงุท ุงููููุฉ ูุง ูุฒุงู ุงูุฃูุฑ ูุณุชุญู ุงูููู. <br><br>  ูู ุงููุงุญูุฉ ุงููุธุฑูุฉ ุ ูุง ููุจุบู ุฃู ูููู ููุงู ุฃู ูุดุงูู ุฎุงุตุฉ ูุน ุงูุชุดููุฑ.  ุจุนุฏ ูู ุดูุก ุ ูููู ุฃู ุชุฃุฎุฐ ุฅุญุฏู ููุชุจุงุช ุงูุชุดููุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ OpenSSL ุ ุฃู ุฃู ููุชุจุฉ ุฃุฎุฑู ูุซูุฑุฉ. <br><br>  ุชุจุฏุฃ ุงููุดุงูู ุนูุฏูุง ูููู ูุฐุง ุงูุญู ูุทููุจูุง ููุญุตูู ุนูู ุงูุดูุงุฏุฉ.  ููุง ุฃู ุชุทุจูู ุงูุชุดููุฑ ุงููุญุถ ููุจุฑูุงูุฌ ูู ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ูุญูู ุงูุฌูุงุฒ ุฅูู ุฌูุงุฒ ุญูุงูุฉ ูุนูููุงุช ุชุดููุฑ ูุชูุงูู ุ ุงูุฃูุฑ ุงูุฐู ูุชุทูุจ ุฏุฑุงุณุฉ ุฏูููุฉ ูู ุฃุญุฏ ูุฎุชุจุฑุงุช ุงูุงุฎุชุจุงุฑ.  ุจุนุฏ ูู ุดูุก ุ ุนูุฏ ุชุทููุฑ ุญู ุจุงุณุชุฎุฏุงู ุงูุชุดููุฑ ุ ุนููู ุนุงุฌูุงู ุฃู ุขุฌูุงู ุงูุชูููุฑ ูู ุฃุดูุงุก ูุซู ูุฎุทุท ุฑุฆูุณู ุ ูุชุฎุฒูู ุงูููุงุชูุญ ุ ูุฅูุดุงุก ุฃุฑูุงู ุนุดูุงุฆูุฉ ุ ููุณุงุฆู ุฃุฎุฑู ุฎููุฉ. <br><br>  ููุงู ุทุฑููุฉ ุฃูููุฉ ูุชูููุฐ ุฎูุงุฑุฒููุงุช ุชุดููุฑ ุฑูุณูุฉ ูุนุชูุฏุฉ ูุจุนุถ ุงูุญููู ุ ููุง ูุณูุญ ููุง ุจุชุจุณูุท ุนูููุฉ ุฅูุดุงุก ุงูุฃุฌูุฒุฉ ุงูุทุฑููุฉ ูุชูููู ุงูููุช ุงููุงุฒู ูุชุทููุฑูุง ูุงูุดูุงุฏุงุช ุงููุงุญูุฉ.  ูููู ุชุถููู ุจุทุงูุฉ ุฐููุฉ ุฃู ุดุฑูุญุฉ ุจุทุงูุฉ ุฐููุฉ ูู ุงูุฌูุงุฒ ุ ูุงุณุชุฎุฏุงููุง ูููุน ูู "ุฌุฐุฑ ุงูุซูุฉ" ุ ูุจุงูุชุงูู ุญู ุนุฏุฏ ูุจูุฑ ูู ุงููุดููุงุช ุงููุคููุฉ ุงูุชู ุชุชุทูุจ ุจุญุซูุง ูุทูููุง ูุชุฃููุฏูุง ูู ูุฎุชุจุฑุงุช ุงูุงุฎุชุจุงุฑ. <br><br><img src="https://habrastorage.org/webt/e2/iq/6i/e2iq6i49c7ber2rkbgu6sv8fl3u.png"><br><br><h2 style=";text-align:right;direction:rtl">  ูุชุญูู ุงูุจุทุงูุฉ ุงูุฐููุฉ ูุน ูุงุฌูุฉ I2C </h2><br>  ููุชุงุจุฉ ูุฐู ุงูููุงูุฉ ุ ุงุณุชุฎุฏูุช ุดุฑูุญุฉ A7001 ุ ุงูุชู ุชุชุตู ุจุงูุฌูุงุฒ ุงูููุงุฆู ุนุจุฑ ูุงูู I2C ุ ูุงูุฐู ูุชููุฑ ูู ุฃู ุฌูุงุฒ ุชูุฑูุจูุง.  ุชู ุชูููุฑ ุงูุดุฑูุญุฉ ุจูุงุณุทุฉ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Aladdin RD</a> ุ ุงูุฐู ูุฏูู ุจุงููุนู ุจุฑูุงูุฌ ุซุงุจุช ูุซุจุช ูุฏุนู ุงูุชุดููุฑ ุงูุฑูุณู. <br><br>  ูุชู ุชุตููุน ูุชุญูู A7001AG (ูุชุญูู ูุตุงุฏูุฉ ุขูู) ุจูุงุณุทุฉ NXP.  ุทุจููุง <b>ููุฑูุฉ</b> ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ ุนูู ุงูุดุฑูุญุฉ ุ ูุฅู <b>A7001AG</b> ุนุจุงุฑุฉ ุนู ูุชุญูู ูุญูู ูู ุงููุตูู ุบูุฑ ุงููุตุฑุญ ุจู ุงุณุชูุงุฏูุง ุฅูู ุจููุฉ 80C51 ุงูููุงุณูููุฉ ุจุงุณุชุฎุฏุงู ูุนุงูุฌ ุชุดููุฑ. <br><br>  ูู ูุถุน ุชูููุฑ ุงูุทุงูุฉ ุ ูุณุชููู ูุชุญูู 50 ุฏุฑุฌุฉ ูุฆููุฉ.  ุฅูู ูุฏุนู ุฌูุฏ ุงูุฅูุฏุงุฏ ูู ุงููุทุงู ูู 1.62V ุฅูู 5.5V ููููู ุชุดุบููู ูู ุฏุฑุฌุงุช ุญุฑุงุฑุฉ ูู -25 ุฏุฑุฌุฉ ูุฆููุฉ ุฅูู + 85 ุฏุฑุฌุฉ ูุฆููุฉ. <br><br>  ููุชูุงุนู ูุน ุงูุฃุฌูุฒุฉ ุงูุฎุงุฑุฌูุฉ ุ ูุชู ุงุณุชุฎุฏุงู ูุงุฌูุฉ ุงูุฑููู I2C ุจุณุฑุนุฉ ุชุตู ุฅูู 100 kbit / s. <br><br>  ูุชุญูู ูุชุงุญ ูู ุงูุนุฏูุฏ ูู ุฎูุงุฑุงุช ุงูุณูู.  ุงูุชูู ุจู ุงูุฃูุฑ ุจุชูุณูู HVQFN32.  ูุฐู ุนูุจุฉ ุจูุงุณุชูููุฉ ููุงุณ 5x5x0.85 ูู ูุน 32 ุฌูุฉ ุงุชุตุงู ูููุนุจ 0.5 ูู. <br><br>  ุธููุฑ ุงููุถูุฉ: <br><br><img src="https://habrastorage.org/webt/tn/7r/mz/tn7rmzk8pbzw1ezupbdv7fxvqhm.png"><br><br>  pinout ูู: <br><br><img src="https://habrastorage.org/webt/tr/bo/5r/trbo5rlj2_q0v-lxbs7wbqevlu0.png"><br><br><h2 style=";text-align:right;direction:rtl">  ูุธุงู ุงููุถูู ูุชูุตูู ุฑูุงูุฉ A7001 </h2><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชู ุงุนุชุจุงุฑ ููุญุฉ ESP32 WiFi Kit 32 ูู Heltec ูุชุฎุทูุท</a> ูููุธุงู ุงููุถูู ูุน ูุงุฌูุฉ I2C.  ูููู ุฃูู ูู 1000 ุฑูุจู ุ ููุญุชูู ุนูู ุฌููุน ูุงุฌูุงุช ุงูุณูููุฉ ูุงููุงุณูููุฉ ุงููุงุฒูุฉ ุ ูููุงู ููุตู ูุชูุตูู ุจุทุงุฑูุฉ ุงูููุซููู ูุน ุฏุงุฆุฑุฉ ุงูุดุญู ุ ููุฐูู ุดุงุดุฉ OLED 0.96 ุจูุตุฉ. <br><br><img src="https://habrastorage.org/webt/uf/kq/li/ufkqlihfpi9w0692rq8junv0ybo.jpeg"><br><br>  ูุธุงู ูุซุงูู ุชูุฑูุจูุง ูููุงุฐุฌ ูุฎุชููุฉ ูุฃุฌูุฒุฉ IoT ู M2M ุ ูุงูุชู ุทุงููุง ุฃุฑุฏุช ุงููุนุจ ูุนูุง. <br><br>  ูููู ุจุฑูุฌุฉ ุงูููุญุฉ ูู ุจูุฆุฉ ุงูุชุทููุฑ ุงููุญููุฉ ููู Arduino IDE.  ููุงู ุงูุนุฏูุฏ ูู ุงูุฃูุซูุฉ ููุนูู ูุนูุง.  ููุจุณุงุทุฉ ุ ุงุณุชูุฑุช ุนูู ูุนูุงุฑ ุงุฑุฏูููู IDE. <br><br><h2 style=";text-align:right;direction:rtl">  ูุฎุทุท ุงูุฏุงุฆุฑุฉ </h2><br>  ูุธูุฑ ุงูุฑุณู ุงูุจูุงูู ูุฏุงุฆุฑุฉ ุชูุตูู ุดุฑูุญุฉ A7001 ูู ุงูุดูู.  <s>ุฅูู ูุฎุชูู ููููุงู ุนู ูุฑูุฉ ุงูุจูุงูุงุช ุงูููุตู ุจูุง.</s>  <s>ููููุง ููุตู ุงูุดุฑูุฉ ุงููุตูุนุฉ ุ ูุฌุจ ุฃู ูููู ูููุทุฑุงู 22 (ุฅุดุงุฑุฉ ุฅุนุงุฏุฉ ุงูุถุจุท RST_N) ุฅููุงูุงุช ุนุงููุฉ ุ ููู ุงูุฏุงุฆุฑุฉ ูู ุชุจุฏุฃ ููููุง ููุฐุง ุงููุฎุทุท.</s>  <s>ูุชูุฌุฉ "ุงููุฎุฒ ุงูุนููู" ุ ุชู ุชุญููู ูุงุจููุฉ ุงูุชุดุบูู ุนู ุทุฑูู ุชูุตูู ููุงูู ุณุญุจ R4 ุจููุตู ุงูุทุงูุฉ ุงูุณูุจู.</s> <br><br>  <i>ุงุณุชููุงู: ููุง ูู ููุชุฑุญ ูู ุงูุชุนูููุงุช ุ ูุชูุงูู ุงููุฎุทุท ูุน ูุฑูุฉ ุงูุจูุงูุงุช ุ ูู ุญูู ุฃู ูุตู ุงูุฅุฎุฑุงุฌ ูุฑุจููู</i> <blockquote style=";text-align:right;direction:rtl">  RST_N - ุฅุนุงุฏุฉ ุชุนููู ุงูุฅุฏุฎุงู ุ <b>ูุดุท LOW</b> </blockquote><br><br><img src="https://habrastorage.org/webt/ud/l3/nd/udl3nd7nz2ck8gtwkb3dhdudzqy.png"><br><br>  ูุชู ุชุฌููุน ุงูุฏุงุฆุฑุฉ ุนูู ููุญ ุตุบูุฑ.  ูุชู ุชูุตูู ุฅุดุงุฑุงุช ุงูุทุงูุฉ ูุฅุดุงุฑุงุช I2C ุจุฃุฑุจุนุฉ ุฃุณูุงู ูุชุตูุฉ ุ ููุญุฏุฉ ESP32 ููุณูุง ูุชุตูุฉ ุจุงูููุจููุชุฑ ุนุจุฑ USB ูุชููู ุงูุทุงูุฉ ุฅูู ุงูุฏุงุฆุฑุฉ ุจุฃููููุง ูููุก ุงูุจุฑุงูุฌ ุงูุซุงุจุชุฉ. <br><br><img src="https://habrastorage.org/webt/de/xz/w1/dexzw1kvlnoixvk0ko-9svuvkbg.png"><br><br><h2 style=";text-align:right;direction:rtl">  ุงูุจุทุงูุฉ ุงูุฐููุฉ ุจุฑูุชูููู I2C </h2><br>  ุนูุฏูุง ุณูุนุช ูุฃูู ูุฑุฉ ุนู ุชูุตูู ูููุฑูููุชุฑููุฑ ุงูุจุทุงูุฉ ุงูุฐููุฉ ุนุจุฑ ูุงูู I2C ุ ุฃูุถุญูุง ูู ุฃู ุงูุทุจูุฉ ุงููุงุฏูุฉ ููุงุฌูุฉ ุงูุจุทุงูุฉ ุงูุฐููุฉ (GOST R ISO / IEC 7816-3-2013) ุชู ุงุณุชุจุฏุงููุง ุจู I2C (SMBus) ุ ููู ุดูุก ุขุฎุฑ ูุนูู ูุงููุนุชุงุฏ ุงูุจุทุงูุงุช ุงูุฐููุฉ ููููุง ููุนุงููุฑ GOST R ISO / IEC 7816-4-2013 ุจุงุณุชุฎุฏุงู ุฃูุงูุฑ APDU. <br><br>  ุงุชุถุญ ุฃู ูุฐุง ููุณ ุตุญูุญูุง ุชูุงููุง ุ ุฃู ุจุงูุฃุญุฑู ููุณ ุตุญูุญูุง ุนูู ุงูุฅุทูุงู.  ูุญุฏุซ ุงูุชูุงุนู ูุน ูุชุญูู ุนูู ูุณุชูู ุนุงู ุจุงุณุชุฎุฏุงู ุฃูุงูุฑ APDU ุงูุชูููุฏูุฉ ุ ูููู ูุงู ููุงู ุจุนุถ "buts" ูุฐูู. <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ูุงุฌูุฉ I2C (SMBus) <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ru.wikipedia.org/wiki/IูชC2ูชB2C</a> ุนุจุงุฑุฉ ุนู ุญุงููุฉ ุฐุงุช ุนูุงูุฉ ุจุงูุฑููู ุ ุชุฎุชูู ุงุฎุชูุงููุง ุฌููุฑููุง ุนู ูุงุฌูุฉ UART ุงูุชุณูุณููุฉ ุ ููู ูุตููุฉ ูุชูุตูู ุฌูุงุฒูู ุนูู ุฃุณุงุณ ููุทุฉ ุฅูู ููุทุฉ ูุนุฏู ุงุณุชุฎุฏุงู ุงูุนูููุฉ .  ูุฐุง ูุนูู ุฃู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุณูุฉ (ุฃูุงูุฑ APDU) ูุฌุจ ุฃู ุชููู "ูุนุจุฃุฉ" ูู ุชูุณูู ุจูุงูุงุช ูุงูู I2C. </li><li style=";text-align:right;direction:rtl">  ูุจุฏุฃ ุงูุนูู ุจุงุณุชุฎุฏุงู ุงูุจุทุงูุฉ ุงูุฐููุฉ ุจุฅุนุงุฏุฉ ุชุนููููุง ุ ุนุงุฏุฉ ุนู ุทุฑูู ุฅููุงู ุชุดุบูู ุงูุทุงูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ุฅุฒุงูุฉ ุงูุจุทุงูุฉ ูุนูููุง ูู ูุงุฑุฆ ุงูุจุทุงูุฉ.  ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุนููู ุ ุชุฑุณู ุงูุจุทุงูุฉ ุงูุฐููุฉ ุฃููุงู ูุชูุฉ ุจูุงูุงุช ATR (ุงูุฅุฌุงุจุฉ ุฅูู ุฅุนุงุฏุฉ ุงูุชุนููู) ุ ูุงูุชู ุชุญุชูู ุนูู ูุนูููุงุช ุงูุชูููู ุงูุถุฑูุฑูุฉ ูุชูููู ุงูุชูุงุนู ูุน ุงูุจุทุงูุฉ ุงูุฐููุฉ. <br>  ูููุณุช ุงูุฑูุงูุฉ ุงูููุฌูุฏุฉ ุนูู ูุงูู I2C ุงุณุชุซูุงุกู ุ ููู ูู ุงูุญุงูุฉ ุงูุชู ูุฌุจ ุฃู ูููู ูููุง ูุชุญูู ุฏููู ููุญูููุง ุจููุญุฉ ุงูุฏูุงุฆุฑ ุงููุทุจูุนุฉ ุ ูุฏ ูุง ูููู ูุฏูู ุฏุงุฆุฑุฉ ุฅูุฏุงุฏ ุงูุทุงูุฉ ูู ุงูุฏุงุฆุฑุฉ ุงูููุฑุจุงุฆูุฉ ุงูุฏูููุฉ ุฃู ุงูุชุญูู ูู ุจุฑูุงูุฌ ุฅุฎุฑุงุฌ ุงูุฅุฎุฑุงุฌ ุงููุนุงุฏ ุถุจุทู.  ูุฐูู ุ ูุชู ุชูููุฐ ุฅุนุงุฏุฉ ุชุนููู ุงูุดุฑูุญุฉ ุ ุจูุง ูู ุฐูู ุ ุนูู ูุณุชูู ุฃูุงูุฑ ุจุฑูุชูููู I2C. </li></ol><br>  ุชุชู ูุนุงูุฌุฉ ูุฐู ุงููุดููุงุช ูุบูุฑูุง ูู ุฎูุงู ุจุฑูุชูููู ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C ุ ูุงูุฐู ูููู ุงูุนุซูุฑ ุนูู ูุตู ูู ุนูู ูููุน NXP ุนูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">www.nxp.com/docs/ar/supporting-information/AN12207.pdf</a> . <br><br><h2 style=";text-align:right;direction:rtl">  ุฌุฒุก ุงูุจุฑูุฌูุงุช </h2><br>  ุงูุจุญุซ ูู ุงูููุชุจุฉ ูุน ุชุทุจูู <i>ุจุฑูุชูููู Smart Card I2C Protocol</i> ูู ูุนุท ุฃู ูุชุงุฆุฌ.  ูุฐูู ุ ูุงู ูุง ุจุฏ ูู ูู ููู ุงูููุงุตูุงุช ูุฌุนู ุชูููุฐ ุงูููุงู ุงูุฃุณุงุณูุฉ ููุง ูุงู ูู ูุชูุงูู ุงููุฏ. <br><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ุฑุณู ูุตุงุฏุฑ ูุงุฑุฏูููู IDE</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><pre style=";text-align:right;direction:rtl"><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;Wire.h&gt; #include &lt;vector&gt; // I2C address on chip A7001 #define ADDR_A7001 static_cast&lt;uint16_t&gt;(0x48) using namespace std; typedef std::vector&lt;uint8_t&gt; vect; //-------------------------------------------------------------------------- // Output dump data by serial port void vect_dump(const char * prefix, const vect &amp; v, const size_t start = 0, const size_t count = 0) { if(prefix) { Serial.print(prefix); } if(v.size() &lt; start) { Serial.println("Empty"); return; } for(size_t i=0; i &lt; (v.size()-start) &amp;&amp; (count == 0 || i &lt; count); i++) { uint8_t b = v[start + i]; // Format output HEX data if(i) Serial.print(" "); if(b &lt; 0x0F) Serial.print("0"); Serial.print(b, HEX); } Serial.println(""); } //-------------------------------------------------------------------------- // Send array bytes by I2C to address A7001 and read response result_size bytes vect sci2c_exchange(const vect data, const uint8_t result_size) { Wire.beginTransmission(ADDR_A7001); Wire.write(data.data(), data.size()); Wire.endTransmission(false); Wire.requestFrom(ADDR_A7001, result_size, true); //delay(1); vect result(result_size, 0); if(result_size &gt;= 2) { result[0] = Wire.read(); // Data size CDB result[1] = Wire.read(); // PCB for(size_t i=2; i&lt;result.size()-2 &amp;&amp; Wire.available(); i++) { result[i+2] = Wire.read(); } } return result; } //-------------------------------------------------------------------------- // Read Status Code uint8_t sci2c_status(const char * msg = nullptr) { vect v = sci2c_exchange({0b0111}, 2); uint8_t status = v[1] &gt;&gt; 4; if(msg) { Serial.print(msg); // Prefix switch(status) { case 0b0000: Serial.println("OK (Ready)"); break; case 0b0001: Serial.println("OK (Busy)"); break; case 0b1000: Serial.println("ERROR (Exception raised)"); break; case 0b1001: Serial.println("ERROR (Over clocking)"); break; case 0b1010: Serial.println("ERROR (Unexpected Sequence)"); break; case 0b1011: Serial.println("ERROR (Invalid Data Length)"); break; case 0b1100: Serial.println("ERROR (Unexpected Command)"); break; case 0b1101: Serial.println("ERROR (Invalid EDC)"); break; default: Serial.print("ERROR (Other Exception "); Serial.print(status, BIN); Serial.println("b)"); break; } } return status; } static uint8_t apdu_master_sequence_counter = 0; // Sequence Counter Master, Master to Slave //-------------------------------------------------------------------------- // Send APDU void sci2c_apdu_send(const vect apdu) { vect_dump("C-APDU =&gt; ", apdu); vect data(2, 0); // 0x00 - Master to Slave Data Transmission command + reserve to length data.insert(data.end(), std::begin(apdu), std::end(apdu)); data[0] |= (apdu_master_sequence_counter &lt;&lt; 4); if(++apdu_master_sequence_counter &gt; 0b111) { apdu_master_sequence_counter = 0; } data[1] = data.size() - 2; sci2c_exchange(data, 2); delay(10); sci2c_status(""); } //-------------------------------------------------------------------------- // Receive APDU vect sci2c_apdu_recv(uint8_t result_size) { Wire.beginTransmission(ADDR_A7001); Wire.write(0b0010); // 0010b - Slave to Master Data Transmission command Wire.endTransmission(false); Wire.requestFrom(ADDR_A7001, result_size, true); vect result(result_size, 0); for(size_t i=0; i&lt;result.size() &amp;&amp; Wire.available(); i++) { result[i] = Wire.read(); } vect_dump("R-APDU &lt;= ", result); return result; } //-------------------------------------------------------------------------- void setup(){ Wire.begin(); Serial.begin(9600); while (!Serial); Serial.println(""); Serial.println("Smart Card I2C Protocol Arduino demo on A7001"); Serial.println(""); sci2c_exchange({0b00001111}, 2); //The bits b0 to b5 set to 001111b indicate the Wakeup command. sci2c_status("Status Wakeup: "); sci2c_exchange({0b00001111}, 2); //The bits b0 to b5 set to 001111b indicate the Wakeup command. sci2c_status("Status Wakeup: "); // Soft Reset sci2c_exchange({0b00011111}, 2); //The bits b0 to b5 set to 011111b indicate the Soft Reset command. delay(5); // Wait at least tRSTG (time, ReSeT Guard) sci2c_status("Status SoftReset: "); // Read ATR vect ATR = sci2c_exchange({0b101111}, 29+2); //The bits b0 to b5 set to 101111b indicate the Read Answer to Reset command. sci2c_status("Status ATR: "); vect_dump("ATR: ", ATR, 2); // Parameter Exchange // The bits b0 to b5 set to 111111b of the PCB send by the master device indicate the Parameter Exchange command. // The bits b6 and b7 of the PCB send by the master device code the CDBIsm,max(Command Data Bytes Integer, Slave to Master, MAXimum) vect CDB = sci2c_exchange({0b11111111}, 2); sci2c_status("Status CDB: "); vect_dump("CDB: ", CDB, 1); // Further examples of the exchange of APDU // Exchanges APDU from exmaple chapter sci2c_apdu_send({0x00, 0xA4, 0x04, 0x04, 0x04, 0x54, 0x65, 0x73, 0x74, 0x00}); sci2c_status("Status Test send: "); sci2c_apdu_recv(3+1); // R-APDU size + 1 byte PBC sci2c_status("Status Test recv: "); // Read Card Production Life Cycle sci2c_apdu_send({0x80, 0xCA, 0x9F, 0x7F, 0x00}); sci2c_status("Status card LC send: "); sci2c_apdu_recv(0x30+1); // R-APDU size + 1 byte PBC sci2c_status("Status card LC recv: "); // Read Card Info sci2c_apdu_send({0x80, 0xCA, 0x00, 0x66, 0x00}); sci2c_status("Status card info send: "); sci2c_apdu_recv(0x51+1); // R-APDU size + 1 byte PBC sci2c_status("Status card info recv: "); // Read Key Info sci2c_apdu_send({0x80, 0xCA, 0x00, 0xE0, 0x00}); sci2c_status("Status key send: "); sci2c_apdu_recv(0x17+1); // R-APDU size + 1 byte PBC sci2c_status("Status key recv: "); // Again exchanges APDU from exmaple chapter sci2c_apdu_send({0x00, 0xA4, 0x04, 0x04, 0x04, 0x54, 0x65, 0x73, 0x74, 0x00}); sci2c_status("Status Test send: "); sci2c_apdu_recv(3+1); // R-APDU size + 1 byte PBC sci2c_status("Status Test recv: "); Serial.println("Done!\n"); } //-------------------------------------------------------------------------- void loop() { delay(100); }</span></span></span></span></code> </pre> <br></div></div><br>  ููุนูู ูุน ูููุฐ I2C ุ ุงุณุชุฎุฏูุช ููุชุจุฉ ุงูุฃุณูุงู ุงูููุงุณูุฉ.  ูุฌุจ ุฃู ุฃููู ุนูู ุงูููุฑ ุฃู ูุฐู ุงูููุชุจุฉ ููุณุช ููุงุณุจุฉ ููุชูููุฐ ุงููุงูู ูุจุฑูุชูููู ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C ุ ูุฃูู  ูุง ูุณูุญ ุจุงูุชุญูู ูู ACK ู NACK ุนูุฏ ุฅุฑุณุงู ููุฑุงุกุฉ ูุญุฏุงุช ุงูุจุงูุช ุงููุฑุฏูุฉ ุ ููู ุฃูุฑ ูุทููุจ ูุชูููุฐ ุงูุงุณุชูุจุงู ุงูุตุญูุญ ููุจูุงูุงุช ูุชุบูุฑุฉ ุงูุทูู ูู ุงูุจุทุงูุฉ ุงูุฐููุฉ. <br><br>  ูุนู ุ ูุงูุฃูุซูุฉ ุงููุนุชุงุฏุฉ ูู Wire Wire ูู ุชูุฌุญ ูู ุงููุฑุฉ ุงูุฃููู ุ ูููู ุจุนุฏ ุจุนุถ ุงูุฑูุต ุจุงุณุชุฎุฏุงู ููุญุฉ ููุงุชูุญ <s>ุงูุฏู</s> ุ ุนุฏุฉ ูุชุฑุงุช ูู ุงููููุฉ ุ googling ูู Yandex ู Yandex ูู Google ุ ุชู ุงูุนุซูุฑ ุนูู ุญู. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">Wire.write ( ); Wire.endTransmission (<span class="hljs-literal"><span class="hljs-literal">false</span></span>); Wire.requestFrom (ADDR_A7001, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>);</code> </pre><br>  ุจูุงุกู ุนูู ูุซุงุฆู ุงูููุชุจุฉ ุ ูุง ูููู ูุฐุง ุงูุชุตููู ุจุฅุตุฏุงุฑ ูุงูู I2C ุจุนุฏ ุงุณุชุฏุนุงุก <i>endTransmission</i> .  ููู ุงุชุถุญ ุฃูู ุจุงููุณุจุฉ ูููุญุฏุฉ ุงูููุทูุฉ ุงููุณุชูุฏุฉ ุฅูู ESP32 ุงูุชู ุงุณุชุฎุฏูุชูุง ุ ูุง ูุญุฏุซ ููู ุงูุจูุงูุงุช ูุนูููุง ุฃุซูุงุก ุงุณุชุฏุนุงุก <i>endTransmission (false)</i> ุ ููุง ูู ููุชูุจ ูู ูุซุงุฆู ููุชุจุฉ Wire ุ ูููู ุฃุซูุงุก ุงุณุชุฏุนุงุก <i>requestFrom (ุตูุงุจ)</i> ุ ุจูููุง ูุชู ูุถุน ุงูุจูุงูุงุช ูู ูุงุฆูุฉ ุงูุงูุชุธุงุฑ ููุท ูุจู ูุฐุง ูููู. <br><br>  ุจุงููุธุฑ ุฅูู ูุฐู ุงููููุฏ ุ ุงุถุทุฑุฑุช ุฅูู ุงูููุงู ุจุจุนุถ "ุงูุนูุงุฒุงุช" ุ ููููู ุฃุฑุฏุช ุญููุง ุฅุทูุงู ุดุฑูุญุฉ A7001 ุฏูู ุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูููุชุจุงุช ุงูููุงุณูุฉ.  ููุฐุง ุงูุณุจุจ ุ ูู ูุชู ุชูููุฐ ูุนุงูุฌุฉ ุฎุทุฃ ุงูุจุฑูุชูููู ุ ููู ููู ูู ุงููููู ุฃูุถูุง ุงุณุชูุงู ุจูุงูุงุช ุฐุงุช ุทูู ูุชุบูุฑ (ุฃู ุ ุณุชุญุชุงุฌ ุฏุงุฆููุง ุฅูู ุชุญุฏูุฏ ุนุฏุฏ ูุญุฏุงุช ุงูุจุงูุช ุงููุทููุจ ูุฑุงุกุชูุง). <br><br>  ูุฐู ุงููููุฏ ุบูุฑ ูุณููุญ ุจูุง ูู ูุธุงู ุญูููู ุ ูููููุง ููุณุช ุถุฑูุฑูุฉ ูุฅุธูุงุฑ ุงุณุชุฎุฏุงู ุฃูุงูุฑ APDU ุนูุฏ ุงูุนูู ุนูู ูุงูู I2C.  ูุฐูู ุ ุฅุฐุง ุญุฏุซ ุฎุทุฃ ูู ุจุฑูุชูููู ุงูุชุจุงุฏู ุนูุฏ ุชุจุงุฏู ุงูุจูุงูุงุช ูู ุฎูุงู ูููุฐ I2C ุ ูุฅู ููุชุงุญ ุชุจุฏูู ุงูุทุงูุฉ ูู ููุชุงุญูุง. <br>  ุจูุนูู ุขุฎุฑ ุ ุฅุฐุง ูุงู ูู ุดูุก ูุนูู ุฃุซูุงุก ุชูุฑุงุฑ ูุฐู ุงูุชุฌุงุฑุจ ูุชููู ูุฌุฃุฉ ูุจู ุงูุจุญุซ ุนู ุฎุทุฃ ูู ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ุ ููู ุจุฅููุงู ุชุดุบูู ุงูุทุงูุฉ ูุชุดุบูููุง.  ูุน ุฏุฑุฌุฉ ุนุงููุฉ ูู ุงูุงุญุชูุงู ูุฐุง ูููู ุฃู ูุญู ุงููุดููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุฃูุซูุฉ ุงูุชุนูููุงุช ุงูุจุฑูุฌูุฉ ููุนูู ูุน ุดุฑูุญุฉ A7001 </h2><br>  ูู ุงูุฃูุซูุฉ ุ ุฃุณุชุฎุฏู ุงูุนุฏูุฏ ูู ูุธุงุฆู ุงููุณุงุนุฏ: <br><br>  <b>vect_dump</b> - ุฅุฎุฑุงุฌ ุจูุงูุงุช ุงูุชูุฑูุบ ูู ุชูุณูู HEX ุฅูู ูููุฐ ุงูุชุตุญูุญ ุ <br>  <b>sci2c_exchange</b> - ุฅุฑุณุงู ูุฌููุนุฉ ูู ุงูุจูุงูุงุช ุนุจุฑ I2C ููุฑุงุกุฉ ุงูุนุฏุฏ ุงููุญุฏุฏ ูู ุจุงูุช ุงุณุชุฌุงุจุฉ ุ <br>  <b>sci2c_status</b> - ุงูุฑุฃ ุญุงูุฉ ุงุณุชุฌุงุจุฉ ุงูุฏุงุฆุฑุฉ ุงูุฏูููุฉ ุ ูุฅุฐุง ูุฒู ุงูุฃูุฑ ุ ุงุนุฑุถ ุญุงูุชูุง ูู ูููุฐ ุงูุชุตุญูุญ ุ <br>  <b>sci2c_apdu_send</b> - ุฅุฑุณุงู ุฃูุฑ APDU ุ <br>  <b>sci2c_apdu_recv</b> - ูุฑุงุกุฉ ุงูุงุณุชุฌุงุจุฉ ููุฃูุฑ APDU. <br><br><h3 style=";text-align:right;direction:rtl">  ุฑูุงูุฉ ุชููุฆุฉ </h3><br>  ููููุง ููุตู <i>ุจุฑูุชูููู ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C</i> ุ ูุจู ุงูุจุฏุก ูู ุงูุนูู ูุน ุงูุดุฑูุญุฉ ุ ูุฌุจ ุชูููุฐ ุซูุงุซุฉ ุฃูุงูุฑ ุจุงูุชุณูุณู: ุฅุนุงุฏุฉ ุงูุชุดุบูู (ุฅุนุงุฏุฉ ุชุนููู ุงูุจุงุฑุฏุฉ ุฃู ุงููููุฉ) ุ ูุฑุงุกุฉ ATR (ูุฑุงุกุฉ ุงูุฅุฌุงุจุฉ ุนูู ุฅุนุงุฏุฉ ุงูุชุนููู) ูุฅุนุฏุงุฏ ูุนููุงุช ุงูุชุจุงุฏู (ูุนููุฉ ุชุจุงุฏู ุงูุฃุฌูุฒุฉ ุงูุฑุฆูุณูุฉ).  ูููุท ุจุนุฏ ุฐูู ุงูุดุฑูุญุฉ ูุณุชุนุฏุฉ ููุจูู ุฃูุงูุฑ APDU. <br><br><h3 style=";text-align:right;direction:rtl">  ุฅุนุงุฏุฉ ุชุนููู ูููุฉ </h3><br>  ูู ุดูุก ุจุณูุท ููุง ุ ูุฑุณู ุฃูุฑ ุฅุนุงุฏุฉ ุงูุชุดุบูู ูููุชุธุฑ ุงูููุช ุงููุญุฏุฏ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">sci2c_exchange ({<span class="hljs-number"><span class="hljs-number">0b00011111</span></span>}, <span class="hljs-number"><span class="hljs-number">2</span></span>); delay(<span class="hljs-number"><span class="hljs-number">5</span></span>); <span class="hljs-comment"><span class="hljs-comment">//      (tRSTG, time, ReSeT Guard)</span></span></code> </pre><br><h3 style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุฅุฌุงุจุฉ ูุฅุนุงุฏุฉ ุชุนููู </h3><br>  ูุฑุงุกุฉ ATR ููููุง ุฃูุซุฑ ุชุนููุฏุง ุ ููุง  ูุง ุชุญุชุงุฌ ููุท ุฅูู ุฅุฑุณุงู ุฃูุฑ ุ ูููู ุฃูุถูุง ูุฑุงุกุฉ ุจูุงูุงุช ุงูุงุณุชุฌุงุจุฉ.  ููููุง ููุตู ุงูุจุฑูุชูููู ุ ูููู ุฃู ูููู ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุจูุงูุงุช ุงูุชู ุชู ุฅุฑุฌุงุนูุง CDBATS ุ MAX (ุจุงูุช ุจูุงูุงุช ุงูุฃูุงูุฑ ุ ุงูุฅุฌุงุจุฉ ุนูู ุฅุนุงุฏุฉ ุงูุชุนููู ุ MAXimum) 29 ุจุงูุช. <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">vect ATR = sci2c_exchange({<span class="hljs-number"><span class="hljs-number">0b101111</span></span>}, <span class="hljs-number"><span class="hljs-number">29</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 29  + 1  PCB + 1  โ   vect_dump("ATR: ", ATR);</span></span></code> </pre><br>  ูุฑุงุกุฉ ุจูุงูุงุช ATR: <b>1E 00 00 00 B8 03 11 01 05 B9 02 01 01 BA 01 01 BB 0D 41 37 30 30 31 43 47 20 32 34 32 52 31</b> <br><br>  ุญูุซ 1E ูู ุญุฌู ุงูุจูุงูุงุช ุงูุชู ุชู ุฅุฑุฌุงุนูุง (29 ุจุงูุช + 1 ุจุงูุช ูู PCB) ู 00 ูู PCB (ุจุฑูุชูููู ุงูุชุญูู ูู ุงูุจุงูุช) ุ ูุงูุฐู ูุฌุจ ุฃู ูููู ูุณุงููุงู ูู 0 ุ ูุนูู ูุง ูุจุฏู ุ ูู ูุฐุง ุงููุซุงู ูู ุชุชู ูุฑุงุกุฉ ุงูุจูุงูุงุช ุจุดูู ุตุญูุญ (ูุฌุจ ุฃู ูููู ููุงู ุจุงูุช ูุงุญุฏ ูู PCB ุ ูููุงู ุซูุงุซุฉ ูููู). <br><br>  ูููุง ููู ุงูุจูุงูุงุช ุงููุดูุฑุฉ ุจุชูุณูู TLV: <br><br>  <b>B8h</b> - <i>ูุงุฆู ุจูุงูุงุช ุฐู ูุณุชูู ููุฎูุถ</i> ุ ุญุฌู 3 ุจุงูุช ( <i>11h 01h 05h</i> ) ุ <br>  <b>B9h</b> - <i>ูุงุฆู ุจูุงูุงุช ุฑุจุท ุงูุจุฑูุชูููู</i> ุ 2 ุจุงูุช ูู ุงูุญุฌู ( <i>01h 01h</i> ) ุ <br>  <b>BAh</b> - <i>ูุงุฆู ุจูุงูุงุช ุงูุทุจูุฉ ุงูุนููุง</i> ุ 1 ุจุงูุช ( <i>01h</i> ) ูู ุงูุญุฌู ุ <br>  <b>BBh</b> - <i>ูุงุฆู ุจูุงูุงุช ูุธุงู ุงูุชุดุบูู</i> ุ 13 ุจุงูุช ( <i>41 37 30 30 31 43 47 20 32 34 32 52 31</i> ). <br><br>  <b>ูู ุงูุชุดููุฑ ูู ูุฑุงุกุฉ ุงูุชูููู ููุฑูุงูุฉ</b> <br>  <i>ูุงุฆู ุจูุงูุงุช ููุฎูุถ ุงููุณุชูู</i> : <b>11 ุณุงุนุฉ</b> - ุงูุฅุตุฏุงุฑุงุช <b>ุงูุฑุฆูุณูุฉ</b> ูุงูุซุงูููุฉ ููุจุฑูุชูููู ุงููุฏุนูู. <br><br>  <i>ุฑููุฒ ุงูุชุดุงู ุงูุฃุฎุทุงุก</i> : <b>01 ุณุงุนุฉ</b> - ุฏุนู ุงููุดู ุนู ุงูุฃุฎุทุงุก ููุฑุงูุจุฉ ุชูุงูู ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุจุงุณุชุฎุฏุงู LRC (ุฑูุฒ ุงูุชูุฑุงุฑ ุงูุทููู). <br><br>  <i>ุฅุทุงุฑ ุงูุชุธุงุฑ ุนุฏุฏ ุตุญูุญ (FWI)</i> : <b>05h</b> - ุฃูุตู ุชุฃุฎูุฑ ุจูู ุฃูุฑูู.  ูููู ุฃู ูุชุฑุงูุญ ูุฏู ุงูููู ูู 10 ูููู ุซุงููุฉ ุฅูู 5120 ูููู ุซุงููุฉ ุ ุงูุงูุชุฑุงุถู ูู 5120 ูููู ุซุงููุฉ.  ูุชู ุญุณุงุจ ุงููููุฉ ุจูุงุณุทุฉ ุงููุนุงุฏูุฉ T = 10ms x 2 ^ FWI.  ููู ูุง ูุนุทููุง ูู ูุฐู ุงูุญุงูุฉ ุชุฃุฎูุฑูุง ูุฏุฑู 320 ูููู ุซุงููุฉ (10 ูููู ุซุงููุฉ ร 2 ^ 5). <br><br>  <i>ูุงุฆู ุจูุงูุงุช ุฑุจุท ุงูุจุฑูุชูููู</i> - ูุชููู ูู ูููุชูู ุ <b>01h 01h</b> ุ ูุงูุชู ุชุดูุฑ ุงูุจุฑูุชูููู ุงููุฏุนูู ูุงูุจุฑูุชูููู ุงูุงูุชุฑุงุถู.  ุชุนูู ูุฐู ุงูููู ุฏุนููุง ูุจุฑูุชูููู APDU [GOST R ISO / IEC 7816-3-2013] ุ ูููุง ุชุนุชูุฏ ุ ูุชู ุชุซุจูุช ููุณ ุงูุจุฑูุชูููู ุงูุชุฑุงุถููุง. <br><br>  <i>ูุงุฆู ุจูุงูุงุช ุงูุทุจูุฉ ุงูุนููุง</i> - ุงูุฑูู <b>01h</b> ูุนูู ุฏุนู ุชูุณูู APDU ุงููุตูุฑ ูุงูููุชุฏ. <br><br>  <i>ูุงุฆู ุจูุงูุงุช ูุธุงู ุงูุชุดุบูู</i> ูู ูุนุฑู ูุตู ุญุฌูู ุฅูู 15 ุจุงูุช ุ ููุง ูู ูุญุฏุฏ ูู ุงููุนูุงุฑ [GOST R ISO / IEC 7816-4-2013].  ูู ุญุงูุชูุง ุ ูุฐู ูู ุงูุณูุณูุฉ " <i>A7001CG 242R1</i> ". <br><br><h3 style=";text-align:right;direction:rtl">  ูุงุฌุณุชูุฑ ุชุจุงุฏู ุงูุฃุฌูุฒุฉ ุงููุนููุฉ </h3><br>  ุขุฎุฑ ุฃูุฑ ูุชููุฆุฉ ุฅุนุฏุงุฏุงุช ุงูุชุจุงุฏู: <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs">vect CDB = sci2c_exchange({<span class="hljs-number"><span class="hljs-number">0b11111111</span></span>}, <span class="hljs-number"><span class="hljs-number">2</span></span>); sci2c_status(<span class="hljs-string"><span class="hljs-string">"Status CDB: "</span></span>); vect_dump(<span class="hljs-string"><span class="hljs-string">"CDB: "</span></span>, CDB, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br>  ูููุฉ ุงูุฅุฑุฌุงุน: <b>CCh</b> - (11001100b) ููููุง ููุฑูุฉ ุงูุจูุงูุงุช ุ ูุฌุจ ุฃู ุชููู 4 ู 5 ุจุชุงุช ุฅููุณุงุฑูุง ุซุงุจุชูุง ููุจุชูู 2 ู 3 (ุฑููุฒ NNb CDBIMS ุณุงูุจุฉ ุงูุจุชุฉ ุ MAX) ุ ููููุง ูููููุฉ ุงููุดูุฑุฉ ุ ุชุฏุนู ุงูุฑูุงูุฉ ุงูุญุฏ ุงูุฃูุตู ูุญุฌู ุงูุฃูุฑ ุงููููู ููู 252 ุจุงูุช CDBIMS ูููุฉ MAX (ุนุฏุฏ ุตุญูุญ ูุจุงูุช ุจูุงูุงุช ุงูุฃูุงูุฑ ุ ูุงุฌุณุชูุฑ ุฅูู ุงูุฑููู ุ MAXimum). <br><br>  ููููุง ููุตู ุงูุจุฑูุชูููู ุ ุจุนุฏ ุชูููุฐ ูุฐู ุงูุฃูุงูุฑ ุงูุซูุงุซุฉ ูุจูุฐุง ุงูุชุฑุชูุจ ุ ูุฅู ุงูุฏุงุฆุฑุฉ ุงูุฏูููุฉ ูุณุชุนุฏุฉ ูุชูููุฐ ุฃูุงูุฑ APDU ุงููุนุชุงุฏุฉ (ุนูู ุงูุฑุบู ูู ุฃููุง ุชุนูู ุจุฏูู ุถุจุท ูุนููุงุช ุงูุชุจุงุฏู ุ ุฃู ุฃููุง ูุงูุช ูุงููุฉ ูุฅุฌุฑุงุก "ุฅุนุงุฏุฉ ุชุนููู Soft" ููุฑุงุกุฉ ATR). <br><br><h2 style=";text-align:right;direction:rtl">  ุชูููุฐ ุฃูุงูุฑ APDU </h2><br>  <b>ุชุชููู ูู ุฏูุฑุฉ ูู ุชูููุฐ ุฃูุงูุฑ APDU ูู ุงูุฎุทูุงุช ุงูุชุงููุฉ:</b> <br><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅุฑุณุงู APDU (ูุงุฌุณุชูุฑ ูููู ุงูุฑููู ููุงุฏุฉ ุงูุจูุงูุงุช). </li><li style=";text-align:right;direction:rtl">  ุงูุชุธุฑ ููุช ุงูุญูุงูุฉ ูุงุณุชูุงู ููุนุงูุฌุฉ ุงูุฃูุฑ. </li><li style=";text-align:right;direction:rtl">  ุงูุชุธุฑ ูุนุงูุฌุฉ ุงูุฃูุฑ ููุฑุงุกุฉ ุงูุญุงูุฉ (ุฃูุฑ ุงูุญุงูุฉ). </li><li style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ุจูุงูุงุช ุงูุงุณุชุฌุงุจุฉ (ุงูุฃูุฑ ูู ุงูุฑููู ุฅูู ูุงุฌุณุชูุฑ ููู ุงูุจูุงูุงุช). </li></ol><br>  ูุชู ุชุทุจูู ูุฐุง ุงูููุทู ูู <b>ุงูุฏุงูุชูู sci2c_apdu_send</b> ู <b>sci2c_apdu_recv</b> ุ ูููุงู ููุทุฉ ูููุฉ ููุง: ูู ุชูุณูู ุจุฑูุชูููู ุจุฑูุชูููู ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C ุ ุชูุฌุฏ ุนุฏุงุฏุงุช ุฃูุงูุฑ APDU ุงููููููุฉ.  ูุฌุจ ุฃู ุชุชุญูู ูุฐู ุงูุนุฏุงุฏุงุช ูู ุฃุฌูุฒุฉ Master ู Slave ูุฃู ุชููู ูุตููุฉ ููุชุญูู ูู ุชุณูุณู ุงูุจูุงูุงุช ุงููุฑุณูุฉ ุ ุจุญูุซ ูู ุญุงูุฉ ุญุฏูุซ ุฎุทุฃ ูู ุงูุงุณุชูุจุงู ุ ูููู ุฅุฑุณุงู ุฃู ุทูุจ ุจูุงูุงุช APDU ูุฑุฉ ุฃุฎุฑู. <br><br>  ูููู ุงูุนุซูุฑ ุนูู ุฃูุซูุฉ ูุชูููุฐ ูุฐู ุงููุธุงุฆู ูู ุงูููุฏ ุ ููููุง ููู ุฃูุงูุฑ APDU ูุจูุงูุงุช ุงูุงุณุชุฌุงุจุฉ ููุท. <br><br><h3 style=";text-align:right;direction:rtl">  ูุซุงู ูู ูุฑูุฉ ุงูุจูุงูุงุช: </h3><br>  C-APDU =&gt; <b>00 A4 04 04 04 54 65 73 74 00</b> - ุงูุฑุฃ ุงูููู ุจุงุณู "ุงุฎุชุจุงุฑ". <br>  R-APDU &lt;= <b>6A 86</b> - ููููุง ููุฑูุฉ ุงูุจูุงูุงุช ุ ูุฌุจ ุฃู ูููู ุงูุฌูุงุจ <b>64 82</b> ( <i>ูู ูุชู ุงูุนุซูุฑ ุนูู ุงูููู ุฃู ุงูุชุทุจูู</i> ) ุ ูููู ูู ุญุงูุชูุง ูุชู ุชุญููู ุงูุจุฑูุงูุฌ ุงูุซุงุจุช ุนูู ุงูุฏุงุฆุฑุฉ ุงูุตุบูุฑุฉ ุ ููุฎุชูู ุงูุฌูุงุจ ุนู ุงููุซุงู ุงูููุถุญ ูู ุงููุซุงุฆู. <br><br><h3 style=";text-align:right;direction:rtl">  ุฏูุฑุฉ ูุฑุงุกุฉ ุฅูุชุงุฌ ุจุทุงูุฉ ุญูุงุฉ </h3><br>  C-APDU =&gt; <b>80 CA 9F 7F 00</b> <br>  R-APDU &lt;= <b>9F 7F 2A 47 90 51 67 47 91 12 10 38 00 53 56 00 40 39 93 73 50 48 12 53 63 00 00 00 00 13 2C 19 30 34 30 33 39 00 00 00 00 00 00 00 00 90 00</b> <br><br><h3 style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ูุฑุงุกุฉ ูุนูููุงุช ุงูุจุทุงูุฉ </h3><br><br>  C-APDU =&gt; <b>80 CA 00 66 00</b> <br>  R-APDU &lt;= <b>66 4C 73 4A 06 07 2A 86 48 86 FC 6B 01 60 0C 06 0A 2A 86 48 86 FC 6B 02 02 01 01 63 09 06 07 2A 86 48 86 FC 6B 03 64 0B 06 09 2A 86 48 86 FC 6B 04 02 55 65 0B 06 09 2B 85 10 86 48 64 02 01 03 66 0C 06 0A 2B 06 01 04 01 2A 02 6E 01 02 90 00</b> <br><br><h3 style=";text-align:right;direction:rtl">  ูุฑุงุกุฉ ูุฑุงุกุฉ ูุนูููุงุช ููุชุงุญ </h3><br>  C-APDU =&gt; <b>80 CA 00 E0 00</b> <br>  R-APDU &lt;= <b>E0 12 C0 04 01 FF 80 10 C0 04 02 FF 80 10 C0 04 03 FF 80 10 90 00</b> <br><br><h2 style=";text-align:right;direction:rtl">  ูู ุงูุฎุชุงู </h2><br>  ูุงูุช ุชุฌุฑุจุฉ ุชูููุฐ ุชุจุงุฏู ูุฑู APDU ูู ุฎูุงู ูุงุฌูุฉ I2C ููุชุนุฉ ููุบุงูุฉ.  ุญุชู ุฃููู ูุฌุฏุช ููุณู ุฃููุฑ ุนุฏุฉ ูุฑุงุช ูู ุฃููู ุฃุณุชูุชุน ุจุญู ูุฎุชูู ุงููุถุงูุง ูู ูุฌุงู ุงูุฏุงุฑุงุช ุ ูุฃูุถุงู ูู ุงููุญุงู ุงูุนุงุฏู ุ ููุฐ ุขุฎุฑ ูุฑุฉ ุงุถุทุฑุฑุช ูููุง ุฅูู ุญูู ูููุงุฉ ูุญุงู ููุฐ ุฃูุซุฑ ูู 5 ุณููุงุช. <br><br>  ุขูู ุฃู ุชููู ูุฐู ุงูููุงูุฉ ูููุฏุฉ ูุชุณุงุนุฏ ุนูู ููู ุงูููุชููู ุจูุฐุง ุงูููุถูุน.  ุงูุชุจ ุฅุฐุง ูุงูุช ุงููุงุฏุฉ ุชููู.  ุณุฃุญุงูู ุงูุฅุฌุงุจุฉ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ุงููุงุฑุฏุฉ ูู ูุฐู ุงูููุงูุฉ ุ ูุฅุฐุง ูุงู ููุถูุน ุงุณุชุฎุฏุงู ุจุฑูุชูููู ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C ููุชุนูุง ุ ูุณุฃุญุงูู ุงููุดู ุนูู ุจูุฒูุฏ ูู ุงูุชูุงุตูู ูู ุงูููุดูุฑุงุช ุงูุชุงููุฉ. <br><br><h2 style=";text-align:right;direction:rtl">  ุงููุฑุงุฌุน </h2><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตู ูุงุฌูุฉ I2C (SMBus)</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑูุฉ ุงูุจูุงูุงุช ุนูู ูุชุญูู A7001AG</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุตู ุจุฑูุชูููู ุงูุจุทุงูุฉ ุงูุฐููุฉ I2C</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GOST R ISO / IEC 7816-3-2013</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">GOST R ISO / IEC 7816-4-2013</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar439574/">https://habr.com/ru/post/ar439574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar439564/index.html">ุงูุชุทุจูู ุงูุนููู ูุชุญููู ุดุฌุฑุฉ AST ุจุงุณุชุฎุฏุงู Putout ููุซุงู</a></li>
<li><a href="../ar439566/index.html">ููุงุฐุง ูุซุงุฆู SRE ูููุฉ. ุงูุฌุฒุก 3</a></li>
<li><a href="../ar439568/index.html">ุณูุงูุงุช ุงูุฃูุฑุงุต ุงูุตูุจุฉ ุงููุงุฆูุฉ ุนูู QLC - ูุงุชู ุงููุฑุต ุงูุตูุจุ ููุณ ุญูุง</a></li>
<li><a href="../ar439570/index.html">IPython ุงูุณุญุฑ ูุชุญุฑูุฑ ุนูุงูุงุช ุฎููุฉ Jupyter</a></li>
<li><a href="../ar439572/index.html">ุงูุชุตููู ุจูุณุงุนุฏุฉ ุงูููุจููุชุฑ ูู ุงููุนุฏุงุช ุงูุฅููุชุฑูููุฉ</a></li>
<li><a href="../ar439576/index.html">ูุธุฑุฉ ุดุงููุฉ ุนูู ููุงุจูุงุช ุจุงูุซูู. ูุตุงุฆุญ ูุงูุฎุฏุน</a></li>
<li><a href="../ar439578/index.html">ุฅูู ูุณุฃูุฉ ุงูุชุญููุงุช ูุบูุฑูุง ูู ุงูุนูููุงุช</a></li>
<li><a href="../ar439580/index.html">ุฌุนู Git ููุธุงู ุงูุชุดุบูู Windows ูุนูู ูู ReactOS</a></li>
<li><a href="../ar439584/index.html">ูุดุฑูุน ุงูุทุงูุฉ ูู ุฅุนุงุฏุฉ ุงููุธุฑ ูู ุฅูุฏุงุฏุงุช ุงูุทุงูุฉ ุงููุญูููุฉ</a></li>
<li><a href="../ar439586/index.html">SPBm ุจุฑูุชูููู ูุฃุณุงุณ ููุญุฑู ุงูุขูู ุงููุชุทุฑูุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>