<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏾‍🏫 ⛹🏾 🌰 Wahnsinn und Erfolg von Oracle Database Code 👋🏻 👃 🧑🏿‍🤝‍🧑🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Diese Woche haben die Benutzer von Hacker News beschlossen, die Frage zu diskutieren: "Was ist die maximale Menge an schlechtem - aber immer noch funk...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wahnsinn und Erfolg von Oracle Database Code</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429946/"> Diese Woche haben die Benutzer von Hacker News <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">beschlossen, die Frage zu diskutieren:</a> "Was ist die maximale Menge an schlechtem - aber immer noch funktionierendem - Code, den Sie gesehen haben?"  (Später kamen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Reddit-Benutzer dazu</a> ).  In den Kommentaren wurden viele „lustige“ Geschichten über Dinge erzählt, die uns von Zeit zu Zeit begegnen.  Die Geschichte über den Code „Advanced DBMS, der von den meisten Fortune 100-Unternehmen verwendet wird“ erregte jedoch die größte Aufmerksamkeit. <br><br>  Der Gewinner der Lovecraft Horror-Nominierung war zu Recht die <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Geschichte eines ehemaligen Oracle-Entwicklers,</a> der während der Entwicklung von Version 12.2 an Oracle Database gearbeitet hat.  Die Codebasis des DBMS betrug zu dieser Zeit 25 Millionen Zeilen in C - und sobald Sie nur eine dieser Zeilen geändert haben, brachen <i>Tausende von</i> Tests, die zuvor geschrieben wurden. <br><br>  Im Laufe der Jahre haben mehrere Generationen von Programmierern an dem Code gearbeitet, die regelmäßig von harten Fristen verfolgt wurden - und dank dessen könnte der Code zu einem echten Albtraum werden.  Heute besteht es aus komplexen "Codeteilen", die für Logik, Speicherverwaltung, Kontextumschaltung und vieles mehr verantwortlich sind.  Sie sind über <i>Tausende</i> verschiedener Flags miteinander verbunden.  Der gesamte Code ist durch ein mysteriöses Makro miteinander verbunden, das nicht entschlüsselt werden kann, ohne auf ein Notizbuch zurückzugreifen, in das Sie aufschreiben müssen, was die relevanten Teile des Makros tun.  Infolgedessen kann ein Entwickler ein oder zwei Tage brauchen, um herauszufinden, was das Makro tatsächlich tut. <br><a name="habracut"></a><br>  Um das Verhalten des Codes in dem einen oder anderen Fall vorherzusagen, müssen Sie verstehen und sich daran erinnern, welche Werte und Konsequenzen 20 (oder sogar hundert) Flags haben können.  Die Situation wird durch die Tatsache verschärft, dass verschiedene Entwickler ihre eigenen Typen verwendeten, die im Wesentlichen dasselbe waren (zum Beispiel int32) - und kaum jemand würde riskieren, ein solches Erbe zu berühren (wir können mit Sicherheit sagen, dass dies der Fall war) Oracle 8i-Codebasis). <br><br>  Es stellt sich die Frage: Wie kann Oracle Database bei alledem noch auf den Beinen bleiben?  Das Geheimnis liegt in Millionen von Tests.  Ihre vollständige Implementierung kann 20 bis 30 Stunden dauern (gleichzeitig werden sie verteilt auf einem Testcluster von 100 bis 200 Servern ausgeführt). <br><br>  Das Team, das Ende der 90er Jahre an dem Produkt arbeitete und sich an die Ideen von TDD (testgetriebene Entwicklung) hielt, war der folgenden Meinung: „Automatisierte Tests bedeuten, dass Sie keinen verständlichen Code schreiben müssen - stattdessen sollten Sie dies tun Denk Tests. "  Zukünftig mussten sich die Entwickler an die von ihnen festgelegten Grundsätze halten, und jetzt sehen wir in der Praxis, wie sich diese Idee auf lange Sicht entwickelt hat - mit all ihren Vor- und Nachteilen. <br><br>  Heute dauert das Beheben eines neuen Fehlers in der Oracle-Datenbank mehrere Wochen bis mehrere Monate.  Zunächst muss der Entwickler mehrere Tage damit verbringen, die von ihm benötigten Flags herauszufinden (deren mysteriöse Interaktion einen Fehler verursacht). Danach muss er häufig ein eigenes Flag hinzufügen, das für die Verarbeitung eines bestimmten Skripts verantwortlich ist, das den Fehler verursacht hat. <br><br>  Dann sendet er den Code zum Testen und wechselt am nächsten Tag ruhig zu einer anderen Aufgabe. Er wartet darauf, dass der Testcluster eine neue Oracle DB-Assembly zusammenstellt und alle Tests darauf ausführt.  Wenn der Entwickler Glück hat, werden ungefähr 100 Tests "rot";  Wenn nicht (und diese Option kommt häufiger vor) - ungefähr 1000, muss er überprüfen, welche seiner Annahmen über die Funktionsweise des vorhandenen Codes sich als falsch herausgestellt hat.  Es ist durchaus möglich, dass er feststellen wird, dass er ein Dutzend verschiedener Flaggen studieren muss, die auf nicht offensichtliche Weise an der Arbeit des von ihm geänderten Codes beteiligt waren. <br><br>  Er muss diesen Vorgang einige Wochen lang wiederholen, bevor ihn das Glück endlich anlächelt und alle Tests endlich bestanden sind.  Danach muss er mehrere Dutzend Tests schreiben - um sicherzustellen, dass der Entwickler, der seinen Code in Zukunft stören wird, seinen „Fix“ nicht bricht.  Anschließend werden die Verbesserungen an eine Überprüfung gesendet, die mehrere Wochen bis einige Monate dauern kann. Danach wird der Fehler endgültig in den Hauptarbeitsbereich integriert. <br><br>  Aufgrund der Tatsache, dass das Erstellen des DBMS und das Ausführen der Tests mindestens einen Tag dauert, wird erwartet, dass jeder Entwickler gleichzeitig an 2-3 Fehlern arbeitet und zwischen diesen wechselt, während er auf die Testergebnisse wartet. <br><br>  Wenn Sie der Meinung sind, dass das Leben von Entwicklern, die dem DBMS neue Funktionen hinzufügen, einfacher ist, sind Sie vergebens.  Das Hinzufügen einer kleinen neuen Funktion wie eines neuen Authentifizierungsmodus kann in besonders fortgeschrittenen Fällen 6 Monate bis zu einem Jahr dauern - bis zu zwei Jahre. <br><br>  In dem beschriebenen Fall erlaubt TDD, den "Spaghetti" -Code, in dem es bereits äußerst schwierig ist, etwas zu verstehen, nicht zu zerbröckeln und ein funktionierendes Produkt am Ausgang zu haben.  Gleichzeitig steigen die Kosten weiter und die Qualität des neuen Codes lässt oft zu wünschen übrig.  Nicht nur ein Team von Entwicklern aus den USA, sondern auch ein Team aus Indien arbeitet am DBMS. Einige Oracle-Entwickler geben ihnen nach der etablierten Tradition die Schuld an der Qualität des Codes.  Andere sind mit ihnen nicht einverstanden, und basierend auf dem Änderungsprotokoll sagen sie, dass die Qualität des Codes nicht von der Geografie des Teams abhängt und dass schlechter Code regelmäßig von beiden Teams „fliegt“.  Ein wirklich ernstes Problem für das Produkt sind Entwickler, die das Projekt als „Einstieg in die Branche“ wahrnehmen und nicht länger als 1-2 Jahre am DBMS arbeiten.  In dieser Zeit ist es unmöglich, die Feinheiten des Projekts wesentlich zu verstehen. <br><br>  Nach Aussage eines anderen Entwicklers, der die Oracle 8i-Codebasis Ende der 90er Jahre auf eine der Unix-Versionen portierte, war der Code bereits zu diesem Zeitpunkt eine Kugel aus „Spaghetti“, die überhaupt nicht vollständig zu verstehen war.  Ein anderer Entwickler, der Ende der 80er Jahre mit DBMS-Code gearbeitet hat, behauptet, dass die Codebasis eine große Menge von C-Quellen und eine Reihe von Makefiles für die Assemblierung war - von denen viele viel komplizierter waren als der Kernel-Code selbst.  Natürlich lohnt es sich, realistisch zu sein - kaum ist die Situation bei ähnlichen Produkten besser, Branchenführern, deren Entwicklung seit mehreren Jahrzehnten durchgeführt wird. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de429946/">https://habr.com/ru/post/de429946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de429934/index.html">Was ist da</a></li>
<li><a href="../de429936/index.html">Soll ich auf Android unter iOS von Parallels warten?</a></li>
<li><a href="../de429938/index.html">Wie schnell ist R für die Produktivität?</a></li>
<li><a href="../de429940/index.html">Warum Pflanzen maschinelles Lernen brauchen</a></li>
<li><a href="../de429942/index.html">Holen Sie sich VK-Musik über eine Drittanbieter-API</a></li>
<li><a href="../de429948/index.html">Warum Produktmanager bei Fintech benötigt werden</a></li>
<li><a href="../de429950/index.html">So pflegen Sie gesunde Kommunikationsgewohnheiten von Remote-Teams</a></li>
<li><a href="../de429952/index.html">Die Vergangenheit, Gegenwart und Zukunft von Docker und anderen Containerlaufzeiten in Kubernetes</a></li>
<li><a href="../de429954/index.html">Der Programmierer für die irischen Buchmacher</a></li>
<li><a href="../de429956/index.html">Kontinuierliche Integration in Yandex. Teil 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>