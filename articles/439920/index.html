<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö† ü§≥üèæ üë∑üèª Despliegue autom√°tico de funciones sin servidor desde Git üçº ü¶Ü üë©‚Äçüë©‚Äçüëß</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Usando el bot de gitlab como ejemplo, mostrar√© c√≥mo automatizar el proceso de lanzamiento de funciones sin servidor actualiz√°ndolas autom√°ticamente de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Despliegue autom√°tico de funciones sin servidor desde Git</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rusonyx/blog/439920/"><img src="https://habrastorage.org/webt/l-/2e/f7/l-2ef7pv_cpsvc8_t3svqrwm_jm.png" alt="imagen"><br><br>  Usando el bot de gitlab como ejemplo, mostrar√© c√≥mo automatizar el proceso de lanzamiento de funciones sin servidor actualiz√°ndolas autom√°ticamente desde el repositorio de git.  Pasamos de los juegos al desarrollo pr√°ctico en sin servidor. <a name="habracut"></a><br><br><h3>  ¬øQu√© es un bot de gitlab? </h3><br>  Imagine que necesita automatizar el proceso de reacci√≥n para crear tareas / errores en su rastreador, por ejemplo, Gitlab (Problemas) o Jira.  Es posible que deba agregar autom√°ticamente un artista seg√∫n las etiquetas, mover la tarea a un hito espec√≠fico, agregar un comentario o simplemente cerrar el error desagradable.  Todo esto se hace muy f√°cilmente usando funciones sin servidor.  Como ejemplo, agregaremos un comentario (Nota en la terminolog√≠a de Gitlab) a una tarea reci√©n creada (Problema). <br><br>  Y dado que el bot puede cambiar con frecuencia, automatizaremos su lanzamiento sincronizando autom√°ticamente la funci√≥n con el repositorio git donde se encuentra. <br><br><h3>  Entorno </h3><br>  Primero necesitamos crear un proyecto en Gitlab.  Si no tiene una cuenta de Gitlab, puede crear una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aqu√≠</a> .  Puede crear un nuevo proyecto p√∫blico, por ejemplo, bifurcando mi proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">https://gitlab.com/bbelky/gitbotswf</a> haciendo clic en el bot√≥n <b>Fork</b> en la esquina superior derecha. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qc/7w/xx/qc7wxxt0399rb2of3zusdpkegc0.png" alt="imagen"></div><br>  Para poder editar el c√≥digo bot, debe clonarlo localmente.  De hecho, a los fines de esta gu√≠a, podemos hacer esto en l√≠nea, pero estaremos m√°s cerca de la vida real.  Abre tu terminal y clona el repositorio git.  El enlace se puede encontrar en la esquina superior derecha de su proyecto <b>Clonar</b> &gt; <b>Clonar con HTTPS</b> .  <i>Gu√°rdelo</i> como una <i>URL de Gitlab</i> , a√∫n nos ser√° √∫til. <br><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> &lt;link to your repo&gt; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> gitbotswf/ ls README.md main.go</code> </pre> <br>  Hay un archivo main.go en el repositorio clonado.  Este es nuestro bot escrito en golang.  El bot es muy simple: recibe un webhook de Gitlab en el caso de la creaci√≥n de una nueva tarea (Issue) y agrega un comentario (nota en la terminolog√≠a de Gitlab) a la tarea creada.  Hay comentarios en main.go para ayudarlo a descubrir c√≥mo funciona el bot.  No nos detendremos en esto con m√°s detalle. <br><br>  No cierre la terminal; un poco m√°s tarde tendremos que editar el archivo <i>main.go.</i> <br><br>  Tambi√©n necesitamos crear la API de token de Gitlab para acceder a la API de hitlab. <br><br><ol><li>  Vaya a su perfil de Gitlab&gt; <b>Configuraci√≥n</b> &gt; <b>Tokens de acceso.</b> </li><li>  Crea un nuevo token con el alcance de la API. </li><li>  <i>C√≥pielo</i> y gu√°rdelo como <i>GITLABTOKEN</i> . </li></ol><br><h3>  El bot </h3><br>  Es hora de crear el bot en s√≠.  Creemos una funci√≥n sin servidor con el c√≥digo de nuestro bot basado en la plataforma sin servidor <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Swifty</a> .  Si a√∫n no tiene una cuenta en Rusonyx Swifty, es hora de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">crear una</a> .  Queremos automatizar el proceso de implementaci√≥n de una nueva funci√≥n, as√≠ que hagamos la siguiente secuencia: conecte nuestro repositorio git, cree una funci√≥n basada en el c√≥digo del git y coloque el token api gitlab en un repositorio seguro. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/5b/hx/lg/5bhxlgenzy54-ah5z3ynwu7unhq.png" alt="imagen"></div><br><ol><li>  Inicie sesi√≥n en Swifty y seleccione <b>Repositorios</b> </li><li>  Haga clic en <b>Adjuntar repositorio</b> , seleccione el tipo de <b>URL</b> de <b>Git</b> y pegue su <i>URL de Gitlab</i> . </li><li>  Recuerde seleccionar la opci√≥n del repositorio Mirror autom√°ticamente y haga clic en Listo. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9m/s2/lp/9ms2lps7qejn9txqu6boa5r5zly.png" alt="imagen" width="400" height="233"></div><br>  Ahora Swifty se sincronizar√° autom√°ticamente con su repositorio (hacer git pull) cada 30 minutos.  Ahora cree la funci√≥n en s√≠: <br><br><ol><li>  Vaya a <b>Funciones</b> &gt; <b>Nueva funci√≥n</b> &gt; <b>Desde la</b> pesta√±a <b>repositorio (Plantillas)</b> . </li><li>  Seleccione el repositorio agregado recientemente, por ejemplo, <i><a href="">gitlab.com/bbelky/gitbotswf.git</a></i> .  Ahora ves los archivos de tu repositorio. </li><li>  Seleccione el archivo <i>main.go</i> , haga clic en Siguiente. </li><li>  Seleccione la opci√≥n <b>Sincronizar con el repositorio</b> , ingrese el nombre de la funci√≥n <i>gitbotswf</i> y haga clic en <b>Crear</b> . </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tf/xk/a3/tfxka3smbke9wx6tfzr6djlpm3g.png" alt="imagen"></div><br>  Ahora necesitamos un disparador de API HTTP, cuando se llama, la funci√≥n se activar√°: <br><br><ol><li>  Vaya a la pesta√±a <b>Triggers</b> &gt; <b>Add Trigger</b> &gt; <b>REST API (URL)</b> . </li><li>  Copie la URL resultante y <i>gu√°rdela</i> como <i>BOT_URL</i> . </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ob/nv/8l/obnv8lijs7rvetcb2gbj6lb7_ho.png" alt="imagen"></div><br>  Genial, ahora tenemos un repositorio y una funci√≥n que se sincroniza con √©l autom√°ticamente.  Ahora agregue nuestro token API de Gitlab a cuentas Swifty, un repositorio seguro y encriptado para contrase√±as y tokens. <br><br><ol><li>  Vaya a <b>Cuentas</b> &gt; <b>Crear cuenta</b> . </li><li>  Seleccione un tipo <b>gen√©rico</b> . </li><li>  Nombra <i>GITLABTOKEN</i> y copia tu token.  Guardar. </li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vb/sj/63/vbsj63gl3bssog5ilr9fs2apvzu.png" alt="imagen" width="400" height="233"></div><br>  Ahora agregue el token a la funci√≥n: <br><br><ol><li>  Vaya a <b>Funciones</b> &gt; funci√≥n <i>gitbotswf</i> &gt; <b>Acceso</b> y haga clic en <b>Agregar</b> . </li><li>  Seleccione el tipo <b>Cuentas</b> , <b>GITLABTOKEN</b> y haga clic en <b>Agregar</b> . </li></ol><br><h3>  Activar webhook </h3><br>  En la √∫ltima etapa, necesitamos crear un webhook en Gitlab que se disparar√° cada vez que se cree un nuevo Issue.  Pasemos a Gitlab. <br><br><ol><li>  Seleccione su proyecto&gt; <b>Configuraci√≥n</b> &gt; <b>Integraciones</b> . </li><li>  Agregue el <i>BOT_URL</i> guardado anteriormente al campo <b>URL</b> . </li><li>  Marque la casilla junto a <i>Eventos de problemas</i> y haga clic en <b>Agregar webhook</b> . </li></ol><br><h3>  Prueba </h3><br>  Vayamos al proyecto en Gitlab, en la pesta√±a <b>Problemas</b> y creemos un nuevo <b>Problema</b> .  Revisa los comentarios.  Si!  Si todo funcion√≥ bien, veremos el comentario <i>"¬°Gracias por informar un nuevo problema!"</i>  .  Si ocurri√≥ un error en alg√∫n lugar, preg√∫ntenos aqu√≠ o haga una pregunta en una <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ranura</a> . <br><br><h3>  Actualizaci√≥n y lanzamiento autom√°tico del bot </h3><br>  ¬øQu√© pasa si necesitamos actualizar nuestro bot?  Gracias a la integraci√≥n con git, todo lo que necesita hacer es actualizar su c√≥digo (cambiar el texto de la nota, por ejemplo), ejecutar el c√≥digo en Gitlab y Swifty actualizar√° autom√°ticamente su funci√≥n. <br><br>  Entonces, abra el archivo <i>main.go</i> en la terminal y cambie la variable de <i>nota</i> : <br><br><pre> <code class="go hljs">note := <span class="hljs-string"><span class="hljs-string">"Comments%20changed!"</span></span></code> </pre> <br>  Actualizar git: <br><br><pre> <code class="bash hljs">git add * git commit -m <span class="hljs-string"><span class="hljs-string">"changes"</span></span> git push origin master</code> </pre> <br>  Ir sin servidor! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/439920/">https://habr.com/ru/post/439920/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../439910/index.html">Digital Rights Center invita al D√≠a de Privacidad 2019</a></li>
<li><a href="../439912/index.html">Misterio de la vista sin resolver</a></li>
<li><a href="../439914/index.html">Organizaci√≥n reductora: dando un paso m√°s</a></li>
<li><a href="../439916/index.html">Desembalaje: cargador de arranque Dridex</a></li>
<li><a href="../439918/index.html">En la monta√±a se encuentra Spring Boot ...</a></li>
<li><a href="../439922/index.html">Fiscalidad de la propiedad intelectual en Kazajst√°n: ¬øc√≥mo ser un profesional independiente?</a></li>
<li><a href="../439924/index.html">El volumen de paquetes de tiendas en l√≠nea extranjeras aument√≥ en un 25%</a></li>
<li><a href="../439926/index.html">Conservar dentro y fuera de ViewModel</a></li>
<li><a href="../439928/index.html">Conducci√≥n aut√≥noma en la acera con OpenCV y Tensorflow</a></li>
<li><a href="../439932/index.html">C√≥mo abrimos oficinas de desarrollo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>