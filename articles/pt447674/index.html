<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§¶üèª ‚õπüèº üëî O c√≥digo est√° vivo e morto. Parte Dois A√ß√µes e propriedades ü§≥üèΩ üè≥Ô∏è‚Äçüåà üîû</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Na √∫ltima vez, escrevi que os nomes dos objetos s√£o de grande import√¢ncia e que precisam ser selecionados com cuidado e aten√ß√£o aos detalhes. O mau no...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>O c√≥digo est√° vivo e morto. Parte Dois A√ß√µes e propriedades</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/447674/"><p>  Na √∫ltima vez, escrevi que os nomes dos objetos s√£o de grande import√¢ncia e que precisam ser selecionados com cuidado e aten√ß√£o aos detalhes.  O mau nome assusta e n√£o permite entender a ess√™ncia do que est√° acontecendo.  Mas qual √© a ess√™ncia disso? </p><br><p>  √â dif√≠cil avaliar um her√≥i sem entender suas <em>"estat√≠sticas"</em> e <em>"habilidades"</em> .  O que ele pode e o que √© capaz √© o pr√≥ximo n√≠vel de dificuldade em que temos que mergulhar.  N√£o basta refletir o santu√°rio interno do objeto com a ajuda de um nome exato, voc√™ tamb√©m precisa garantir que ele ainda seja um <em>santu√°rio</em> , e n√£o est√°bulos de quem recebe. </p><br><p>  Sobre isso - no artigo. </p><a name="habracut"></a><br><h2 id="oglavlenie-cikla">  Sum√°rio do ciclo </h2><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Os objetos</a> </li><li>  A√ß√µes e propriedades </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">C√≥digo como texto</a> </li></ol><br><h2 id="deystviya">  Ac√ß√µes </h2><br><p> O personagem ataca, defende, esquiva, atira em um arco, usa feiti√ßos, acena uma l√¢mina.  O nome reflete o objeto, mas o pr√≥prio objeto est√° em movimento, em rea√ß√£o, em a√ß√£o.  Caso contr√°rio, falar√≠amos sobre tabelas no Excel. </p><br><p>  Em C #, a√ß√µes s√£o m√©todos e fun√ß√µes.  E para n√≥s: verbos, √°tomos de movimento verbal.  Os verbos movem o tempo, por causa deles os objetos existem e interagem.  Onde h√° uma mudan√ßa - deve haver um verbo. </p><br><h3 id="settery">  Setters </h3><br><p>  De todas as altera√ß√µes, a atribui√ß√£o √©, no m√≠nimo, m√≥vel.  Descreve estritamente e matematicamente o que s√£o quantidades e o que s√£o iguais, mas nunca comunica vida e vigor a um texto, como os verbos. </p><br><p> Por exemplo, h√° <code>IPullRequest</code> com a propriedade <code>Status</code> , que pode ser <code>Approved</code> , <code>Declined</code> ou <code>Merged</code> .  Voc√™ pode escrever <code>pullRequest.Status = Status.Declined</code> , mas √© o mesmo que dizer <em>"Definir a solicita√ß√£o de pool para o status cancelado"</em> √© imperativo.  Muito mais forte √© <code>pullRequest.Decline()</code> e, consequentemente, <code>pullRequest.Approve()</code> , <code>pullRequest.Merge()</code> . </p><br><p>  Um verbo ativo √© prefer√≠vel a um levantador, mas nem todos os verbos s√£o. </p><br><h3 id="passivnyy-zalog">  Voz passiva </h3><br><p>  <code>PerformPurchase</code> , <code>DoDelete</code> , <code>MakeCall</code> . </p><br><p>  Como no <code>HeroManager</code> um substantivo importante √© obscurecido por um <code>Manager</code> sem sentido, assim como em <code>PerformMigration</code> - <code>Perform</code> .  Afinal, mais vivo - basta <code>Migrate</code> ! </p><br><p>  Os verbos ativos atualizam o texto: n√£o <em>"hit"</em> , mas <em>"hit"</em> ;  n√£o <em>"fez um balan√ßo"</em> , mas <em>"acenou"</em> ;  n√£o <em>"tomou uma decis√£o"</em> , mas <em>"decidiu"</em> .  Assim, no c√≥digo: <code>PerformApplication</code> ‚Üí <code>Apply</code> ;  <code>DoDelete</code> ‚Üí <code>Delete</code> ;  <code>PerformPurchase</code> ‚Üí <code>Purchase</code> , <code>Buy</code> .  <em>(Mas</em> <code>DealDamage</code> <em>se acalmou, embora em casos raros o</em> <code>Attack</code> <em>possa ser considerado</em> <em>.)</em> </p><br><p>  Evitando a voz passiva, desenvolvemos a hist√≥ria, movemos os personagens, mas tamb√©m precisamos garantir que o filme n√£o saia em preto e branco. </p><br><h3 id="silnye-glagoly">  Verbos Fortes </h3><br><p>  Algumas palavras transmitem tons de significado melhor que outras.  Se voc√™ escrever <em>"ele bebeu um copo de √°gua"</em> , ser√° simples e claro.  Mas <em>"bebeu um copo de √°gua"</em> - figurativamente, mais forte. </p><br><p>  Portanto, a mudan√ßa de sa√∫de do jogador pode ser expressa por <code>player.Health = X</code> ou <code>player.SetHealth</code> , mas o mais pitoresco √© <code>player.RestoreHealth</code> . </p><br><p>  Ou, por exemplo, conhecemos <code>Stack</code> n√£o por <code>Add/Remove</code> , mas por <code>Push/Pop</code> . </p><br><p>  Verbos fortes e ativos saturam o objeto com comportamento, se n√£o forem muito espec√≠ficos. </p><br><h3 id="izbytochnye-detali">  Pe√ßas redundantes </h3><br><p>  Assim como no <code>ManualResetEvent</code> , quanto mais nos aproximamos dos internos t√©cnicos do .NET, que s√£o complexos e seria bom express√°-los, mais ricos s√£o os detalhes e excessos da API. </p><br><p>  Acontece que voc√™ precisa fazer algum trabalho em outro encadeamento, mas para n√£o se preocupar em criar e par√°-lo.  Em C # existe o <code>ThreadPool</code> para isso.  Somente aqui est√° um simples <em>"fazendo o trabalho"</em> aqui - <code>QueueUserWorkItem</code> !  Que tipo de item de trabalho ( <code>WorkItem</code> ) √© e o que pode ser, se n√£o for usu√°rio ( <code>User</code> ), n√£o est√° claro.  Muito mais f√°cil seria - <code>ThreadPool.Run</code> ou <code>ThreadPool.Execute</code> . </p><br><p>  Outro exemplo  Lembrar e saber que existe uma instru√ß√£o de <em>compara√ß√£o e troca</em> at√¥mica <em>(CAS)</em> √© bom, mas transport√°-la para o c√≥digo n√£o √© a melhor solu√ß√£o.  <code>Interlocked.CompareExchange(ref x, newX, oldX)</code> √© inferior √†s <code>Atomically.Change(ref x, from: oldX, to: newX)</code> (usando par√¢metros nomeados). </p><br><p>  O c√≥digo n√£o √© um doutorado em trabalhar com um computador qu√¢ntico, n√£o √© um aplicativo para c√°lculos matem√°ticos, mas o leitor √†s vezes √© completamente indiferente ao que as instru√ß√µes de baixo n√≠vel s√£o chamadas.  O uso di√°rio √© importante. </p><br><h3 id="povtoreniya">  Repeti√ß√µes </h3><br><p>  <code>UsersRepository.AddUser</code> , <code>Benchmark.ExecuteBenchmark</code> , <code>AppInitializer.Initialize</code> , <code>UniversalMarshaller.Marshal</code> , <code>Logger.LogError</code> . </p><br><p>  Como eu disse na √∫ltima parte, a repeti√ß√£o corr√≥i o significado, comprime o espa√ßo. </p><br><p>  N√£o <code>UsersRepository.AddUser</code> , mas <code>UsersRepository.Add</code> ;  n√£o <code>Directory.CreateDirectory</code> , mas <code>Directory.Create</code> ;  n√£o <code>HttpWebResponse.GetResponseStream</code> , mas <code>HttpWebResponse.Stream</code> ;  n√£o <code>Logger.LogError</code> , mas <code>Log.Error</code> . </p><br><h3 id="melkiy-sor">  Ninhada fina </h3><br><p>  <code>Check</code> √© uma palavra multifacetada.  <code>CheckHasLongName</code> pode retornar um <code>bool</code> ou lan√ßar uma exce√ß√£o se o usu√°rio tiver um nome muito longo.  Melhor √© o <code>bool HasLongName</code> ou <code>void EnsureHasShortName</code> .  Eu at√© conheci o <code>CheckRebootCounter</code> , que ... Em algum lugar por dentro, reiniciei o IIS! </p><br><p>  <code>Enumerate</code> - da mesma s√©rie.  Existe um m√©todo <code>Directory.EnumerateDirectories(path)</code> no .NET: por algum motivo, √© especificado que as pastas ser√£o listadas, embora <code>path.Directories()</code> <code>Directories.Of(path)</code> ou <code>path.Directories()</code> . </p><br><p>  <code>Calc</code> - <code>Calculate</code> √© t√£o frequentemente reduzido, embora pare√ßa mais com dep√≥sitos de c√°lcio. </p><br><p>  <code>Proc</code> √© outra abrevia√ß√£o sofisticada para <code>Process</code> . </p><br><p>  <code>Base</code> , <code>Impl</code> , <code>Internal</code> , <code>Raw</code> - palavras parasitas que indicam a complexidade dos objetos. </p><br><h3 id="itogo">  Total </h3><br><p>  Mais uma vez, um leitor atento perceber√° que tudo se resume √† simplifica√ß√£o, √† compara√ß√£o da fala natural, e as dicas em si se relacionam amplamente n√£o apenas ao c√≥digo, mas √† escrita em geral.  Utilizando-os, o desenvolvedor aprimora o c√≥digo como texto e o pr√≥prio texto, buscando uma apresenta√ß√£o transparente e suave, para simplificar. </p><br><p>  Agora que descobrimos o movimento e os <em>"efeitos especiais",</em> vamos ver como as rela√ß√µes entre os objetos s√£o descritas. </p><br><h2 id="svoystva">  As propriedades </h2><br><p>  O personagem tem sa√∫de e mana;  os itens est√£o no carrinho de compras;  o sistema solar consiste em planetas.  Os objetos n√£o apenas agem desinteressadamente, mas tamb√©m se relacionam: hierarquicamente (herdeiro do ancestral), composicionalmente (parte inteira), espacialmente (elemento de armazenamento) etc. </p><br><p>  Em C #, propriedades e relacionamentos s√£o m√©todos (geralmente come√ßando com <code>Get</code> ), getters (propriedades com um corpo <code>get</code> espec√≠fico) e campos.  Mas para n√≥s √©: acr√©scimos de palavras que expressam a perten√ßa de um objeto a outro.  Por exemplo, um jogador tem sa√∫de - <code>Player.Health</code> , que corresponde quase exatamente √† <em>"sa√∫de do jogador" em</em> ingl√™s. </p><br><p>  O que est√° mais confuso hoje s√£o m√©todos de a√ß√£o e m√©todos de propriedade. </p><br><h3 id="glagol-vmesto-suschestvitelnogo">  Verbo em vez de um substantivo </h3><br><p>  <code>GetDiscount</code> , <code>CalculateDamage</code> , <code>FetchResult</code> , <code>ComputeFov</code> , <code>CreateMap</code> . </p><br><p>  Os acordos s√£o ouvidos em todos os lugares: os m√©todos devem come√ßar com os verbos.  Voc√™ raramente v√™ algu√©m duvidando: √© mesmo assim?  Afinal, n√£o pode haver uma diferen√ßa significativa entre <code>Player.Health</code> e <code>Player.Health()</code> .  Que os registros sejam sintaticamente diferentes, eles <em>significam</em> a mesma coisa. </p><br><p>  Suponha que, em <code>IUsersRepository</code> , seja <code>IUsersRepository</code> algum <code>GetUser(int id)</code> .  Por que, para representar o usu√°rio, pense em algum tipo de recibo ( <code>Get</code> )?  Ser√° mais preciso - <code>User(int id)</code> ! </p><br><p>  E realmente: n√£o <code>FetchResult()</code> , mas <code>Result()</code> ;  n√£o <code>GetResponse()</code> , mas <code>Response()</code> ;  n√£o <code>CalculateDamage()</code> , mas <code>Damage()</code> . </p><br><p>  Uma conversa DDD fornece um exemplo de um c√≥digo ‚Äúbom‚Äù: <code>DiscountCalculator</code> com o m√©todo <code>CalculateDiscountBy(int customerId)</code> .  Al√©m de haver uma repeti√ß√£o sim√©trica na face - <code>DiscountCalculator.CalculateDiscount</code> , eles tamb√©m especificaram que o desconto √© <em>calculado</em> .  E o que mais, pergunta-se, fazer com ela? </p><br><p>  Seria mais forte ir da pr√≥pria entidade - o <code>Discount</code> com o m√©todo <code>static decimal Of(Customer customer, Order order)</code> para chamar <code>Discount.Of(customer, order)</code> - √© mais simples que <code>_discountCalculator.CalculateDiscountBy(customerId)</code> e corresponde a um √∫nico idioma. </p><br><p>  √Äs vezes, omitindo o verbo, perdemos algo, como, digamos, em <code>CreateMap()</code> : uma substitui√ß√£o direta por <code>Map()</code> pode n√£o ser suficiente.  Ent√£o a melhor solu√ß√£o √© <code>NewMap()</code> : novamente, o objeto est√° na cabe√ßa, n√£o na a√ß√£o. </p><br><p>  O uso de verbos vazios √© caracter√≠stico de uma cultura obsoleta e imperativa, onde o algoritmo √© prim√°rio e est√° √† frente do conceito.  L√° voc√™ encontrar√° frequentemente uma <em>"l√¢mina temperada" do</em> que uma <em>"l√¢mina endurecida"</em> .  Mas o estilo dos livros sobre James Bond n√£o √© adequado para descrever a paisagem.  Onde n√£o h√° movimento, n√£o h√° lugar para o verbo. </p><br><h3 id="drugoe">  Outros </h3><br><p>  Propriedades e m√©todos que expressam as rela√ß√µes entre objetos tamb√©m s√£o objetos; portanto, o mencionado acima se aplica a eles em muitos aspectos. </p><br><p>  Por exemplo, repeti√ß√µes nas propriedades: n√£o <code>Thread.CurrentThread</code> , mas <code>Thread.Current</code> ;  n√£o <code>Inventory.InventoryItems</code> , mas <code>Inventory.Items</code> , etc. </p><br><h2 id="itogo-1">  Total </h2><br><p>  Palavras simples e compreens√≠veis n√£o s√£o confusas e, portanto, o c√≥digo que as consiste tamb√©m n√£o √© confuso.  Por escrito, √© igualmente importante escrever com facilidade: evite preposi√ß√µes passivas, abund√¢ncia de adv√©rbios e adjetivos, repeti√ß√µes, pois as a√ß√µes preferem um verbo a um substantivo.  Um exemplo bem conhecido: <em>"Ele acenou com a cabe√ßa, concordando", em</em> vez de <em>"Ele acenou com a cabe√ßa",</em> causa um sorriso, e eu me lembro de <code>QueueUserWorkItem</code> . </p><br><p>  O texto do c√≥digo tamb√©m √© diferente, pois no primeiro caso voc√™ ser√° pago se a <em>casa estiver em p√©, se afogando nos raios do sol poente</em> ;  no segundo - se a casa estiver de <em>p√©</em> ;  mas vale a pena lembrar: uma <em>casa</em> deve ficar de p√©, e n√£o grudar dos ajudantes. </p><br><p>  Nos dois primeiros artigos da s√©rie, eu queria mostrar como √© importante trabalhar n√£o apenas no algoritmo, mas tamb√©m na palavra;  como os nomes determinam o conte√∫do do que √© chamado;  qu√£o redundante e c√≥digo complicado demais afasta o leitor. </p><br><p>  Junto com isso, bons nomes s√£o apenas notas.  Para <em>tocar</em> , eles devem ser escritos e incorporados na m√∫sica.  Vou lhe contar mais no pr√≥ximo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> final. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt447674/">https://habr.com/ru/post/pt447674/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt447664/index.html">Vendas transversais de an√°lise de neg√≥cios</a></li>
<li><a href="../pt447666/index.html">Backup do MS SQL: Alguns recursos √∫teis do Commvault que nem todo mundo conhece</a></li>
<li><a href="../pt447668/index.html">Int√©rprete MSH</a></li>
<li><a href="../pt447670/index.html">Substitui√ß√£o de importa√ß√£o na pr√°tica. Parte 2. O come√ßo. Hypervisor</a></li>
<li><a href="../pt447672/index.html">Cat√°logo de sistemas de TI da empresa</a></li>
<li><a href="../pt447676/index.html">Novo Mail.ru Mail e o que o polvo tem a ver com isso</a></li>
<li><a href="../pt447678/index.html">O conceito de uma breve enciclop√©dia</a></li>
<li><a href="../pt447680/index.html">Exerc√≠cios de emula√ß√£o: manual do Xbox 360 FMA</a></li>
<li><a href="../pt447682/index.html">Data Center Espacial: 24 horas antes do lan√ßamento</a></li>
<li><a href="../pt447684/index.html">Como mostrar os valores da empresa em um escrit√≥rio (sem p√¥steres e slogans)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>