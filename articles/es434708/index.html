<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üí£ üõ≥Ô∏è üôÖüèø HL 2018. Resumen del informe "¬°Haga que las contrase√±as vuelvan a ser geniales! C√≥mo vencer a la fuerza bruta y dejar a los hackers sin nada " üèä üõåüèæ üèí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! Mi nombre es Akhmadeev Rinat, soy el Sr. Desarrollador PHP. 


 Te presento el resumen del informe. ¬° Haz que las contrase√±as vuelvan a ser...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>HL 2018. Resumen del informe "¬°Haga que las contrase√±as vuelvan a ser geniales! C√≥mo vencer a la fuerza bruta y dejar a los hackers sin nada "</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434708/"><p><img src="https://habrastorage.org/webt/ey/xs/qh/eyxsqh1i0z7s2_fexslxgbdi-fy.png" alt="Las contrase√±as son como la ropa interior"></p><br><p>  Hola Habr!  Mi nombre es Akhmadeev Rinat, soy el Sr.  Desarrollador PHP. </p><br><p>  Te presento el resumen del informe. ¬° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Haz que las contrase√±as vuelvan a ser geniales!</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥mo derrotar a la fuerza bruta y dejar a los hackers sin nada</a> de Alexey Ermishkin de Virgil Security con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">HighLoad ++ 2018</a> . </p><br><p>  Cuando fui al informe, era pesimista.  Pero desde  Como se trata de Virgil Security, a√∫n as√≠ decid√≠ ir.  Al principio, el informe parec√≠a realmente del capit√°n, e incluso comenc√© a perder inter√©s, pero luego, como result√≥, incluso descubr√≠ varios enfoques nuevos para la protecci√≥n con contrase√±a, adem√°s del hash de sal habitual. </p><br><p>  El informe analiza formas de proteger las contrase√±as de los hash a enfoques m√°s modernos, como la contrase√±a de Facebook, Onion, Sphinx y Pythia.  Al final, se presenta el nuevo Servicio simple de cifrado reforzado con contrase√±a (PHE). </p><br><p>  Me gust√≥ tanto el informe que prepar√© un compendio.  Recomiendo a todos que se familiaricen. </p><a name="habracut"></a><br><p>  Alexey Ermishkin comparti√≥ las <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">diapositivas</a> y el informe de video en los comentarios: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/y1MQyl13ssc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h2 id="konspekt">  Resumen </h2><br><h3 id="vstuplenie">  Entrada </h3><br><p><img src="https://habrastorage.org/webt/wd/sg/tu/wdsgtu8tz1yjoswesm2sjy7gs0k.png" alt="Diapositiva 0. Haga las contrase√±as geniales nuevamente"></p><br><p>  Hola a todos, buenos d√≠as a todos!  Me alegro de verlos a todos en la Conferencia de Highload.  Mi nombre es Alexey Ermishkin, trabajo para Virgil Security. </p><br><p><img src="https://habrastorage.org/webt/p_/dm/2o/p_dm2o99hyouir1mw0qn1nq_k0s.png" alt="Virgilsecurity"></p><br><p>  Nos dedicamos al desarrollo de varios productos criptogr√°ficos tanto para desarrolladores individuales como para empresas.  Nos centramos en soluciones integrales, esto es cuando no necesita confiar en el servicio para realizar acciones como la transferencia de datos, la autenticaci√≥n, etc.  Nuestros SDK son abiertos y accesibles para todos. </p><br><p><img src="https://habrastorage.org/webt/mt/_q/ey/mt_qeyv-o-f8tcltewqjz5bdxze.png" alt="Diapositiva 7. Rendimiento, conveniencia, seguridad."></p><br><p>  Las contrase√±as se han utilizado durante mucho tiempo como un medio de autenticaci√≥n, como una forma de llegar a alg√∫n lado.  Eso fue mucho antes de que aparecieran las computadoras.  Pero con la llegada de las computadoras, con la llegada de los sistemas de TI, las personas no han abandonado el h√°bito de usar contrase√±as.  Esto se convirti√≥ en un gran problema para los desarrolladores, porque se encontraron con el problema de c√≥mo hacer que los sistemas sean convenientes, r√°pidos y seguros.  Muy a menudo, cuando dos de estos aspectos intentan hacerlo bien, el tercero no funciona muy bien.  Si hace que el sistema sea productivo y seguro, puede ser inconveniente, etc. </p><br><p><img src="https://habrastorage.org/webt/yf/vy/8n/yfvy8nslfegffzdm8ldboycqpvc.png" alt="Diapositiva 8. ¬øDe qu√© nos estamos protegiendo?"></p><br><p>  Entonces, ¬øde qu√© vamos a hablar hoy? </p><br><p>  Hablar√© sobre la protecci√≥n contra ataques fuera de l√≠nea.  Cuando las contrase√±as ingresan a sus bases de datos, el usuario no las controla.  Si su base de datos est√° pirateada, se filtra en alguna parte, luego los hackers pueden hacer cualquier cosa con ella.  Incluso si de alguna manera protegi√≥ las contrase√±as, pueden comenzar a resolverlas y para esto no necesitan interactuar con nadie, ya tienen todo para esto.  Adem√°s, los usuarios no dejan de usar contrase√±as d√©biles.  Las pol√≠ticas de contrase√±a son, por supuesto, algo √∫til, pero no siempre convenientes, es decir  cuando incluso las personas ingresan, parece una contrase√±a segura, la pol√≠tica a√∫n dice que necesita agregar una letra o n√∫mero, entonces para ellos no es conveniente.  Tambi√©n es obvio que el problema es la necesidad de comparar lo que el usuario ingres√≥ con lo que tiene en la base de datos.  ¬øC√≥mo hacerlo de forma segura?  Bueno, no olvidemos que dentro de la empresa tambi√©n hay personas que no son completamente amigables y que tambi√©n desean protegerse de ellos. </p><br><h3 id="heshi">  Hashes </h3><br><p><img src="https://habrastorage.org/webt/-w/aj/lj/-wajlj6zqzv9v52a1tm-jyykii0.png" alt="Diapositiva 9. ¬øQu√© hay de malo con las contrase√±as?"></p><br><p>  En principio, ¬øpor qu√© las contrase√±as son un tema tan doloroso? ¬øPor qu√© vale la pena trabajar con ellas con m√°s cuidado?  El problema es que la contrase√±a tiene una peque√±a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">entrop√≠a</a> .  ¬øQu√© es la entrop√≠a?  Esta es la cantidad de informaci√≥n contenida en los datos, es decir  por ejemplo, en la palabra Highload, 8 letras son 8 bytes, pero si contamos la entrop√≠a, no ser√°n 64 bits como la palabra completa, sino menos de 30 bits.  Cuando hoy hablan de romper una contrase√±a, dicen que es posible descifrar contrase√±as con entrop√≠a en un momento en el que no haya m√°s ni menos bits.  Es decir  ni siquiera se tiene en cuenta la cantidad de contrase√±as. </p><br><p><img src="https://habrastorage.org/webt/2u/ry/lh/2urylhxlc1vap1pdvcq8wqubgai.png" alt="Diapositiva 10.1.  Hashes"></p><br><p>  ¬øC√≥mo comenz√≥ la gente con la seguridad de contrase√±a?  Lo primero que se me ocurri√≥ fue usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hashes criptogr√°ficos</a> unidireccionales. </p><br><p><img src="https://habrastorage.org/webt/ny/ng/3e/nyng3eb-ukqoj_siqeyekl-m6ys.png" alt="Diapositiva 10.2.  Hashes"></p><br><p>  Su caracter√≠stica notable es que no se pueden volver atr√°s.  Es decir  Si transfiri√≥ alguna informaci√≥n a este hash, recibi√≥ un valor en la salida, no puede recuperar esta informaci√≥n de este valor.  Pero, desafortunadamente, se calculan muy r√°pidamente.  Por ejemplo, un grupo moderno de 4 tarjetas gr√°ficas NVidia puede procesar varios miles de millones de contrase√±as por segundo.  Es decir  Si la entrop√≠a de su contrase√±a es inferior a 40 bits, entonces un grupo de 4 tarjetas de video la recoger√° en un minuto, o incluso menos. </p><br><h3 id="raduzhnye-tablicy">  Mesas arcoiris </h3><br><p><img src="https://habrastorage.org/webt/rw/bd/ku/rwbdku7uc7nlyovcvlp7fh19zbk.png" alt="Diapositiva 11.1.  Mesas arcoiris"></p><br><p>  Adem√°s, cada hash complicado tiene su propia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">tabla de arcoiris</a> .  ¬øQu√© es esta mesa y c√≥mo se hacen? </p><br><p><img src="https://habrastorage.org/webt/m_/sj/yy/m_sjyylroq0g4wcqjj8stum8yq4.png" alt="Diapositiva 11.2.  Mesas arcoiris"></p><br><p>  Es decir  toman las contrase√±as y combinaciones de caracteres m√°s populares que pueden caber en el disco duro, consideran los hashes y las almacenan un poco m√°s para varios terabytes.  Cuando hay alg√∫n tipo de hash, no puede calcularlo, pero encu√©ntrelo muy r√°pido en estas tablas y comp√°relo con la contrase√±a que se calcul√≥ previamente.  Es decir  Las ventajas de las tablas son que funcionan muy r√°pidamente, pero necesita mucho espacio para almacenarlas.  Sin embargo, hay tablas para los hashes m√°s populares en Internet, se pueden descargar o incluso comprar. </p><br><p>  <em>Nota del autor de la sinopsis: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Wikipedia</a> no est√° de acuerdo con el orador: "La tabla del arco iris es una versi√≥n especial de las tablas de b√∫squeda para revertir las funciones hash criptogr√°ficas utilizando el mecanismo de un compromiso razonable entre el tiempo de b√∫squeda en la tabla y la memoria ocupada".</em>  <em>Es decir</em>  <em>no almacena los valores hash de las contrase√±as m√°s populares que caben en el disco, sino simplemente los valores hash de algunas contrase√±as, el resto se calcula sobre la base de las que existen: hay varias contrase√±as por registro en la tabla.</em> </p><br><h3 id="sol">  Sal </h3><br><p><img src="https://habrastorage.org/webt/nx/cx/l3/nxcxl3ijlwytnvaumlbt9zlnjdo.png" alt="Diapositiva 12.1.  Sal"></p><br><p>  Pero, de nuevo, cada mesa arcoiris tiene su propia <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sal</a> .  ¬øQu√© es la sal?  Este es un conjunto aleatorio de bytes, que se agrega a la contrase√±a.  Se almacena en una tabla en alg√∫n lugar cerca del hash y protege de las tablas del arco iris. </p><br><p><img src="https://habrastorage.org/webt/xl/z1/_j/xlz1_j7oasnp6wpvijtlbmpw5n8.png" alt="Diapositiva 12.2.  Sal"></p><br><p>  Es decir  las personas que tengan en sus manos una base con hash salados a√∫n tendr√°n que calcular estos hash.  Pero el problema es que estos hashes se calculan muy r√°pidamente y la sal no ayuda mucho aqu√≠. </p><br><h3 id="kak-zamedlit-perebor">  ¬øC√≥mo ralentizar la b√∫squeda? </h3><br><p><img src="https://habrastorage.org/webt/tb/vh/of/tbvhoftqtm7hlvgibwwvafv9cl4.png" alt="Diapositiva 13.1.  ¬øC√≥mo ralentizar la b√∫squeda?"></p><br><p>  Una forma natural de salir de esto podr√≠a ser ralentizar la clasificaci√≥n de hash de alguna manera.  ¬øC√≥mo se puede hacer esto? </p><br><p><img src="https://habrastorage.org/webt/6j/9c/x0/6j9cx0nof6w-dzgbc3b6nx5qw-8.png" alt="Diapositiva 13.2.  ¬øC√≥mo ralentizar la b√∫squeda?"></p><br><p>  El enfoque m√°s ingenuo es que tomamos alg√∫n tipo de funci√≥n hash, por ejemplo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sha256,</a> y la calculamos iterativamente, es decir  calcule el hash, a partir de este hash el hash nuevamente, etc.  Puedes hacer esto muchos miles e incluso millones de veces.  El problema es que si escribe dicha implementaci√≥n usted mismo, lo m√°s probable es que sea m√°s lenta que la implementaci√≥n de personas involucradas profesionalmente en la adivinaci√≥n de contrase√±as. </p><br><p><img src="https://habrastorage.org/webt/nj/f3/hr/njf3hrodtzqbbu5w3purv-vsm6u.png" alt="Diapositiva 14. Funciones de hash de contrase√±a"><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">SCrypt</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bcrypt</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Argon2</a> </p><br><p>  Y, por lo tanto, a los cript√≥grafos se les ocurrieron varias funciones que est√°n espec√≠ficamente dise√±adas para ralentizar la b√∫squeda de contrase√±as: utilizan una gran cantidad de memoria y todas las instrucciones modernas posibles del procesador.  Si la contrase√±a protegida por dicha funci√≥n cae en manos de los atacantes, tendr√°n que usar hardware muy potente. </p><br><p><img src="https://habrastorage.org/webt/-e/ed/gw/-eedgw4f2c-6q3khy9pywdotzwa.png" alt="Diapositiva 15. Argon2"></p><br><p>  Por ejemplo, la funci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Argon2</a> m√°s moderna funciona de la siguiente manera: en el diagrama puede ver que hay muchos bloques de memoria diferentes a trav√©s de los cuales se ejecuta el hash.  Lo hace de varias maneras, ida y vuelta, la memoria se usa muy intensamente, se usa toda la memoria.  Es bastante dif√≠cil optimizar dicha funci√≥n (velocidad de b√∫squeda). </p><br><p><img src="https://habrastorage.org/webt/eu/gn/u2/eugnu2x_t3tsbyfzqmyesuwlmse.png" alt="Diapositiva 16. Funciones de hashing de contrase√±a"></p><br><p>  Pero estos enfoques tambi√©n tienen sus inconvenientes.  Estas funciones se hacen especialmente lentas, pero son especialmente lentas no solo para los atacantes, sino que tambi√©n ser√°n especialmente lentas para ti.  Cargar√°n tu plancha.  Estas funciones son personalizables, es decir  puede elegir cu√°nta memoria se usar√° para calcular el hash de una sola contrase√±a, hasta varios gigabytes, cu√°ntas pasadas en esta memoria.  Si enrolla estos par√°metros muy en serio, su propio hardware se ver√° afectado y si hay muchas personas que inician sesi√≥n en el sistema, entonces solo tiene que asignar recursos bastante importantes para la protecci√≥n de contrase√±as y contrase√±as simples, bueno, a√∫n se pueden obtener contrase√±as muy simples . </p><br><h3 id="facebooks-password-onion">  Cebolla de la contrase√±a de Facebook </h3><br><p><img src="https://habrastorage.org/webt/jg/ij/6k/jgij6ksfudwqixuwbidyqos8g_y.png" alt="Diapositiva 17. ¬øY no puedes cargar el backend?"></p><br><p>  La gente pens√≥ en esto y formul√≥ la pregunta: ¬øes posible lograr las mismas propiedades sin cargar el backend, sin cargar sus propios servidores? </p><br><p><img src="https://habrastorage.org/webt/3t/bt/i5/3tbti5mfy7-5smkvkfpkzyw8cq0.png" alt="Diapositiva 18. La contrase√±a de Facebook Onion"></p><br><p>  Uno de los pioneros en esto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">fue Facebook</a> .  Estas l√≠neas que ves son las etapas hist√≥ricas de Facebook, c√≥mo protegieron las contrase√±as, al principio solo eran contrase√±as, luego tomaron la antigua funci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">md5</a> , que estuvo agrietada durante mucho tiempo, luego agregaron sal y tomaron el hash <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">sha1</a> , y luego sucedi√≥ Lo interesante, trajeron el c√°lculo de la funci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">hmac</a> (esto es un hash con una clave) al servicio remoto. </p><br><p><img src="https://habrastorage.org/webt/at/hg/59/athg59eofneynp9pmmn1ffzdbg8.png" alt="Diapositiva 19. Facebook"></p><br><p>  Como funciona  Hay un backend, hay un servicio remoto.  Hay alg√∫n tipo de clave secreta en este servicio.  Una persona ingresa al backend, ingresa su contrase√±a.  Esta contrase√±a se mezcla con la sal que est√° en la base de datos, se ejecuta a trav√©s de un hash y se env√≠a al servicio.  El servicio toma su clave privada, calcula la funci√≥n hmac y la env√≠a de vuelta.  En el backend, se coloca en la base. </p><br><p><img src="https://habrastorage.org/webt/nj/hw/ac/njhwackeuo-kschvhkkvaxstmky.png" alt="Diapositiva 20. Facebook"></p><br><p>  Que da  Si Facebook tiene una base de datos de usuarios, entonces no vale la pena ordenar las contrase√±as porque no tienen una clave secreta remota.  Pero el problema con el enfoque de Facebook es que si algo le sucede a su clave privada remota, estar√°n en un gran problema.  No pueden hacer nada al respecto porque usan hashes, usan hmac.  No tienen forma de resolver de alguna manera esta situaci√≥n para que los usuarios no noten nada y esto se arrinconar√°. </p><br><h3 id="sphinx">  Esfinge </h3><br><p><img src="https://habrastorage.org/webt/_t/kq/nd/_tkqnduhchzryj-sgjt-kqytyo0.png" alt="Diapositiva 21. ¬øEs mejor?"></p><br><p>  Los cript√≥grafos lo miraron todo.  Les gust√≥ la idea de usar servicios remotos y decidieron pensar: ¬øes posible hacerlo a√∫n mejor?  ¬øEs posible hacer un sistema similar, pero sin las desventajas que Facebook le ha dotado? </p><br><p><img src="https://habrastorage.org/webt/hh/04/o5/hh04o5poadnr-d4diswhuaferuq.png" alt="Diapositiva 22. ¬øLa contrase√±a es un n√∫mero?"></p><br><p> Y decidieron abordar este problema de la siguiente manera: ¬øqu√© sucede si la contrase√±a o el hash de contrase√±a se representan como un n√∫mero?  Si tenemos la palabra <code>passw0rd</code> , consta de 8 bytes.  En casi todos los lenguajes de programaci√≥n, hay tipos enteros de ocho bytes, es decir,  En principio, este es uno y el mismo.  Es decir  8 bytes, la palabra <code>passw0rd</code> y podemos representarlo como un n√∫mero decimal regular.  ¬øQu√© nos da esto?  Esto nos da una libertad de acci√≥n completamente diferente.  Podemos agregar contrase√±as o hashes de ellos, multiplicarlos, convertirlos en otros n√∫meros.  Podemos realizar operaciones matem√°ticas realmente serias con ellos. </p><br><p><img src="https://habrastorage.org/webt/6h/3d/wm/6h3dwmeitk9jftagy1hszcqbmgo.png" alt="Diapositiva 23.1. Sphinx - administrador de contrase√±as"></p><br><p>  Uno de los primeros sistemas que utiliz√≥ esta tecnolog√≠a fue <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Sphinx</a> .  Ella apareci√≥ hace un par de a√±os.  Este es un administrador de contrase√±as determinista.  Hay muchos programas diferentes, como <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">keepass</a> , donde tiene una contrase√±a maestra y para cada sitio genera una contrase√±a aleatoria.  Pero tambi√©n hay cosas deterministas en las que ingresa su contrase√±a maestra, el sitio al que desea ir y calcula algo all√≠ y emite una contrase√±a √∫nica para cada sitio.  Pero est√° claro que si esta contrase√±a maestra va a alg√∫n lado, todas las contrase√±as de sus sitios se ver√°n comprometidas permanentemente. </p><br><p><img src="https://habrastorage.org/webt/qs/9j/0z/qs9j0z8enfk9_j_p53msuqcxufu.png" alt="Diapositiva 23.2. Sphinx - administrador de contrase√±as"></p><br><p>  ¬øC√≥mo enfrent√≥ Sphinx este problema?  Toma la contrase√±a maestra, toma el dominio en el que desea iniciar sesi√≥n, ejecuta todo a trav√©s de un hash y lo convierte en un n√∫mero.  Pero, de hecho, la criptograf√≠a el√≠ptica se usa all√≠, por simplicidad explicar√© todo esto en n√∫meros ordinarios con matem√°ticas ordinarias.  Lo convierte en un n√∫mero (llam√©moslo <code>a</code> ) y ¬øqu√© hace despu√©s? </p><br><p><img src="https://habrastorage.org/webt/wx/ba/hk/wxbahkcpmzzmwsaxj1_abbdwrpq.png" alt="Diapositiva 24. Sphinx: el &quot;administrador&quot; de las contrase√±as, ¬°disfrazado!"></p><br><p>  Absolutamente maravilloso, cada vez que podemos generar un gran n√∫mero aleatorio <code>r</code> .  Si elevamos el n√∫mero <code>a</code> a la potencia de <code>r</code> , y en alg√∫n momento m√°s tarde elevamos este n√∫mero a la potencia inversa al n√∫mero <code>r</code> , entonces recuperamos el mismo n√∫mero <code>a</code> , ¬øverdad?  Es decir  podemos enmascarar algo desde el principio y luego desenmascararlo. </p><br><p><img src="https://habrastorage.org/webt/pu/yp/5t/puyp5t7x6yprlu_xyybj4z8llna.png" alt="Diapositiva 25.1. Sphinx - administrador de contrase√±as"></p><br><p>  ¬øY qu√© hace la esfinge?  Nuevamente hay un usuario, hay un servicio remoto.  Se env√≠a un n√∫mero enmascarado a este servicio remoto.  En el servicio remoto, hay una clave privada <code>b</code> .  Que esta haciendo el  Multiplica el n√∫mero enviado <code>a^r</code> por su clave secreta <code>b</code> y lo devuelve.  ( <em>Nota del autor del compendio: en la diapositiva, el n√∫mero enviado no se multiplica por la clave privada, sino que se eleva al grado de la clave privada, pero el punto principal s√≠</em> ).  Como el n√∫mero <code>r</code> diferente cada vez, el servicio remoto no puede decir nada sobre qu√© contrase√±a y dominio se enmascararon, es decir,  cada vez que ve algunos n√∫meros aleatorios diferentes.  Y simplemente se multiplica por su clave privada <code>b</code> y env√≠a de vuelta. </p><br><p><img src="https://habrastorage.org/webt/gs/nm/bx/gsnmbxvngd2m2ziqnuqo-mdtney.png" alt="Diapositiva 25.2. Sphinx - administrador de contrase√±as"></p><br><p>  El usuario desenmascara lo que el servidor le envi√≥ y obtiene un n√∫mero: su contrase√±a maestra con el dominio multiplicado por la clave secreta del servidor <code>a^b</code> .  Resulta que no conoce la clave secreta del servidor, el servidor no sabe lo que el usuario le envi√≥, pero al final tambi√©n obtiene alg√∫n tipo de n√∫mero determinista.  Cada vez que ejecute este protocolo, el disfraz ser√° diferente, pero el resultado siempre ser√° el mismo y este resultado se puede volver a convertir en alg√∫n tipo de contrase√±a y utilizar para ingresar a varios sitios. </p><br><p><img src="https://habrastorage.org/webt/7v/zd/hv/7vzdhvrksyvyg_awii2rkvphdgy.png" alt="Diapositiva 26. Sphinx: el &quot;administrador&quot; de las contrase√±as"></p><br><p>  Realmente maravillosa tecnolog√≠a.  Primero, puede generar contrase√±as grandes, es decir  Protege de la ruptura.  En segundo lugar, si un hacker obtiene acceso a varias contrase√±as, no podr√° decir nada sobre el resto, porque  se generan independientemente uno del otro.  En tercer lugar, si la contrase√±a del usuario desaparece en alg√∫n lugar, esto tampoco dar√° nada, porque los piratas inform√°ticos no tendr√°n una clave secreta.  Cuarto, funciona muy r√°pido porque  no se necesitan hashes grandes iterativos aqu√≠, es decir  literalmente se realizan 2-3 multiplicaciones y todo funciona al instante. </p><br><p>  Pero este sistema tiene sus inconvenientes.  El servidor con el que est√° hablando el usuario no sabe nada de √©l.  Simplemente recibe algunos n√∫meros aleatorios como entrada, los multiplica por algo y los env√≠a de vuelta.  El cliente tampoco sabe nada sobre el servidor, env√≠a algo a alguna parte, recibe el resultado, funciona, bueno.  Pero si algo le sucede al servicio, el usuario no podr√° decir nada al respecto, no tiene informaci√≥n para esto.  La clave secreta tampoco se puede cambiar; no se puede hacer nada con ella. </p><br><h3 id="pythia">  Pitia </h3><br><p><img src="https://habrastorage.org/webt/cp/kt/3z/cpkt3zvvpwx7svjbydprtntli5i.png" alt="Diapositiva 27. ¬øPodr√≠a ser mejor?"></p><br><p>  ¬øPodr√≠a ser mejor? </p><br><p><img src="https://habrastorage.org/webt/ot/jg/ms/otjgmsc63aic6zb8mpod01tn9jy.png" alt="Diapositiva 28. ¬°EXTREMO A EXTREMO!"></p><br><p>  Los cript√≥grafos observaron este sistema y pensaron: ¬øes posible mejorar el sistema y complementarlo con propiedades que nos permitan decir que cumple con los principios de extremo a extremo?  Es decir  el cliente puede comunicarse con el servidor, pero al mismo tiempo, tambi√©n puede autenticarlo y confiar en √©l hasta cierto punto. </p><br><p><img src="https://habrastorage.org/webt/gv/2o/p8/gv2op8fshghvw1rvt0dnqnqwxnw.png" alt="Diapositiva 29.1. Pitia"></p><br><p>  Y se les ocurri√≥ un protocolo llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Pythia</a> . </p><br><p><img src="https://habrastorage.org/webt/kq/wd/in/kqwdin-__0xxfcerqmva6s2vewo.png" alt="Diapositiva 29.2. Pitia"></p><br><p>  Fue hecho por el maravilloso hombre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Adam Everspaugh</a> con sus colegas.  ¬øQu√© lo hace √∫nico?  En primer lugar, el servicio sabe qui√©n ingresa la contrase√±a, es decir  el ID de usuario se pasa al servidor m√°s all√° de la contrase√±a.  Puede ser un cuadro de identificaci√≥n aleatorio que se encuentra al lado, o simplemente un nombre de usuario.  No importa  Pero el servicio lo sabe.  Pero el servidor no solo sabe un poco de esto, sino que puede probar matem√°ticamente estrictamente que es √©l. </p><br><p><img src="https://habrastorage.org/webt/pf/lo/zf/pflozf9qji8nzq_nhpswlqd-3xa.png" alt="Diapositiva 30.1. Pitia"></p><br><p>  Como funciona  Hay un backend (alg√∫n tipo de servicio web, sitio) y hay un servicio Pythia.  ¬øQu√© hace el backend y qu√© hace el servicio?  Hay una clave privada <code>k</code> en el servicio, pero tambi√©n transfiere su clave p√∫blica al backend.  El backend del servicio env√≠a no solo el n√∫mero enmascarado <code>a^r</code> , como en el protocolo Sphinx, sino que tambi√©n env√≠a alg√∫n tipo de identificador de usuario ( <code>UserID</code> ).  El servicio multiplica el ID de usuario y la contrase√±a por su clave privada y el resultado <code>(UserID, a)^(r*k)</code> ID de usuario <code>(UserID, a)^(r*k)</code> env√≠a el backend.  Tambi√©n env√≠a una cierta <code>Proof</code> , que puede ser utilizada por el backend para verificar que el servidor no ha sido pirateado, que est√° respondiendo como deber√≠a. </p><br><p><img src="https://habrastorage.org/webt/re/qr/x2/reqrx276lka5gxfal99x0_l9esy.png" alt="Diapositiva 30.2. Pitia"></p><br><p>  Luego hay un desenmascaramiento y el n√∫mero <code>y</code> que resulta como resultado se coloca en un DB.  En la base de datos no solo tenemos un hash, sino un n√∫mero, un punto de una curva el√≠ptica. </p><br><p><img src="https://habrastorage.org/webt/xx/qc/jt/xxqcjtbljojosjg0ssvhptf3oj0.png" alt="Diapositiva 31. Pitia"></p><br><p>  Aqu√≠ hay algunos puntos interesantes: </p><br><ul><li>  La capacidad del servidor para combinar el ID de usuario y la contrase√±a en un solo n√∫mero.  Esto se llama operaci√≥n bilineal o emparejamiento bilineal.  Esta es una matem√°tica relativamente nueva, que recientemente comenz√≥ a usarse.  Ella tiene todas las propiedades de los nuevos matem√°ticos en que no han pasado 30 a√±os para que todos est√©n convencidos de que todo es normal con esto. </li><li>  Pero la <code>Proof</code> que env√≠a el servicio es una tecnolog√≠a bastante antigua.  Esto se llama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">el protocolo Schnorr</a> .  La generaci√≥n de clave p√∫blica es la multiplicaci√≥n de un punto base por alguna clave secreta.  El protocolo Schnorr demuestra que la clave secreta que se utiliz√≥ para generar la clave p√∫blica se utiliz√≥ para multiplicar la contrase√±a del usuario por el mismo n√∫mero.  Este protocolo ha sido durante mucho tiempo, se usa mucho donde y le permite probar.  Esto se llama <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">prueba a prueba de cero</a> : el servidor no muestra su clave p√∫blica, pero dice que la operaci√≥n que realic√© fue realizada por esa clave privada, que acordamos originalmente. </li></ul><br><p><img src="https://habrastorage.org/webt/jz/pg/lo/jzpglodcswcwxprayrpud8semws.png" alt="Diapositiva 32.1. Pros de Pythia"></p><br><p>  ¬øCu√°les son las ventajas de este sistema? </p><br><p><img src="https://habrastorage.org/webt/xn/dg/zg/xndgzgr-to_dgnypnwarbyxengg.png" alt="Diapositiva 32.2. Pros de Pythia"></p><br><p>  Y ella no tiene muchos de ellos. </p><br><ul><li>  El sistema no carga el backend.  Debido a que el backend hace todo, convierte la contrase√±a en un n√∫mero, la disfraza, la env√≠a y luego desenmascara el resultado tambi√©n. </li><li>  Si le roban una base de datos con tales n√∫meros, entonces ordenar las contrase√±as tampoco tiene sentido sin una clave privada. </li><li>  El servicio Pythia puede bloquear los intentos de fuerza bruta, lo que significa que el backend no tiene que hacer esto en principio.  Si ve que con el mismo ID de usuario intentan realizar esta operaci√≥n de transformaci√≥n varias veces, simplemente puede cortarlo y bloquearlo en el l√≠mite de velocidad. </li><li>  Gracias al disfraz, el servicio no sabe nada sobre la contrase√±a.  Cada vez que se le env√≠a un nuevo n√∫mero aleatorio.  Solo el identificador de usuario permanece constante. </li><li>  Gracias a ZKP (prueba de conocimiento cero), el backend siempre sabe que fue el servicio con el que se hab√≠a puesto en contacto. </li><li>  Si tiene una base de datos con hashes y sal, por ejemplo, puede migrar a esa soluci√≥n sin problemas para los usuarios.  Puede que ni siquiera noten nada.  En lugar de la contrase√±a del usuario, toma su hash, lo conduce a Pythia y en el futuro solo usa este protocolo, obtiene el n√∫mero <code>y</code> , vuelve a ponerlo en tu base de datos.  El hash se puede eliminar.  Cada vez que un usuario inicia sesi√≥n en su sistema, se ejecutar√° este protocolo, como resultado se obtendr√° un n√∫mero que comparar√° con lo que est√° en la base de datos.  El sistema de autenticaci√≥n en s√≠ permanecer√° sin cambios, ya que  los usuarios iniciar√°n sesi√≥n antes e iniciar√°n sesi√≥n, con las mismas contrase√±as, incluso las d√©biles.  En este caso, el sistema ser√° mucho m√°s seguro. </li></ul><br><p><img src="https://habrastorage.org/webt/2i/63/ja/2i63jae0xiucsx-dqailxoaqiuw.png" alt="Diapositiva 33.1. Eso no es todo"></p><br><p>  Pero estas no son todas las golosinas. </p><br><p><img src="https://habrastorage.org/webt/oa/dy/h9/oadyh9nurjtlv5qdbgo8f2xfcui.png" alt="Diapositiva 33.2. Eso no es todo"></p><br><p>  Una de las caracter√≠sticas principales es que incluso si el servicio Pythia est√° pirateado, es posible generar una nueva clave privada.  En nuestra base de datos, se almacena un n√∫mero, no un hash.  Si representamos la clave anterior como el n√∫mero <code>k</code> y la nueva como el n√∫mero <code>k'</code> , entonces podemos calcular un n√∫mero llamado token de actualizaci√≥n.  Para hacer esto, multiplicamos el nuevo n√∫mero por el n√∫mero inverso al anterior.  Y con este token de actualizaci√≥n, puede revisar la base de datos de cada usuario y multiplicar este n√∫mero <code>y</code> por el token de actualizaci√≥n.  Despu√©s de hacer esto, su sistema contin√∫a trabajando con la nueva clave privada en el servicio remoto.  Todo sucede al instante.  Si ocurre un desastre, le roban su base de datos con contrase√±as, libera el token de actualizaci√≥n con el clic de un dedo y el hecho de que los piratas inform√°ticos le roben se vuelve instant√°neamente in√∫til.  Simplemente recorre en silencio todos los registros en segundo plano, los actualiza y funcionan con la nueva clave secreta para usted.  Los usuarios generalmente ni siquiera notan nada.  Es decir  La actualizaci√≥n sin problemas y la invalidaci√≥n instant√°nea de la base de datos de contrase√±as son algunas de las caracter√≠sticas innovadoras clave de este sistema. </p><br><p><img src="https://habrastorage.org/webt/uu/cb/_z/uucb_z0ikld1bufittz0asq5m84.png" alt="Diapositiva 34.1. Bono"></p><br><p>  Pero eso no es todo. </p><br><p><img src="https://habrastorage.org/webt/vr/jo/3k/vrjo3kpwbw1xuzdr6wklxmwkrgw.png" alt="Diapositiva 34.2. Bono"></p><br><p>  El n√∫mero que se encuentra en la base es grande <code>y</code> , b√°sicamente es grande y se ve bastante pseudoaleatorio, es decir  Es muy f√°cil no recogerlo.  Si transferimos la funcionalidad que tenemos en el backend, por ejemplo, a dispositivos cliente, a tel√©fonos, entonces podemos usar esta <code>y</code> para generar claves.  Llamamos a esto BrainKey.  Esto significa que el usuario ingresa la contrase√±a en alg√∫n lugar del tel√©fono, tambi√©n la oculta y la env√≠a al servicio remoto.  El servicio le devuelve un cierto n√∫mero <code>y</code> y luego puede usar este <code>y</code> para generar algunas claves asim√©tricas.  Por lo tanto, el usuario de su contrase√±a puede obtener un par de claves.  Esto se usa en todo tipo de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BrainWallets</a> .  Esto es cuando ingresas la contrase√±a y obtienes la billetera bitcoin generada por ella.  Pero esta aplicaci√≥n no se limita a las criptomonedas, es una firma digital, algunas copias de seguridad y recuperaci√≥n de cuenta, es decir.  donde se usa la criptograf√≠a asim√©trica, donde se necesitan claves asim√©tricas.  Se puede utilizar todo esto, pero al mismo tiempo se puede generar un par de claves y, seg√∫n la necesidad, se pueden generar tantas como desee.  Por lo tanto, todos depender√°n de la contrase√±a del usuario, y esto es muy conveniente. </p><br><p><img src="https://habrastorage.org/webt/sy/cw/nl/sycwnl1rpbmtpsc_0ddxi3fjlx0.png" alt="Diapositiva 35.1. Contras?"></p><br><p>  En un barril de miel, no es sin una mosca en la pomada. </p><br><p><img src="https://habrastorage.org/webt/wx/jw/an/wxjwanacuusmfnb_ptce1peh_cg.png" alt="Diapositiva 35.2. Contras?"></p><br><p>  Y las caracter√≠sticas de esta tecnolog√≠a es que es muy nueva.  Utiliza una curva el√≠ptica, que es para operaciones bilineales ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BLS12-381</a> ).  Las matem√°ticas en s√≠ han existido durante alg√∫n tiempo, pero esta curva particular, que se usa en particular en nuestra implementaci√≥n, solo se usa en <nobr>ZCash,</nobr> excepto nosotros.  En consecuencia, las bibliotecas que usan estas nuevas matem√°ticas se pueden contar con los dedos de una mano.  Para llevar esto al estado de producci√≥n, debe dedicar una cierta cantidad de tiempo y esfuerzo.  Sin embargo, la industria no se detiene y todas estas desventajas son temporales.  Como consecuencia de las dos primeras propiedades, la velocidad de estas operaciones bilineales no es muy consistente con las matem√°ticas modernas, en particular el√≠pticas, que todos usamos ahora, cuando usamos el protocolo TLS, cuando usamos algunos sitios.  Esto es alrededor de varios cientos de operaciones en un servicio en un n√∫cleo.  De hecho, esto no nos detuvo y en la primavera implementamos este protocolo, lo lanzamos en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">producci√≥n</a> y tradujimos todos nuestros registros, los protegemos usando este protocolo.  En principio, estamos satisfechos con el rendimiento de nuestras tareas actuales, si es necesario, levantaremos otro nodo con el servicio Pythia y, en principio, ya puede jugar con todo esto. </p><br><h3 id="phe">  PHE </h3><br><p><img src="https://habrastorage.org/webt/hv/1e/1l/hv1e1lslzyk31hgsw2fu5sffk_o.png" alt="Diapositiva 36. ¬øEs a√∫n mejor?"></p><br><p>  ¬øPero pensamos si podemos hacerlo a√∫n mejor?  ¬øEs posible lograr las propiedades que Pythia proporciona usando las matem√°ticas de ayer?  No ma√±ana, no hoy, sino incluso ayer, que se ha utilizado durante muchos a√±os. </p><br><p><img src="https://habrastorage.org/webt/6r/rn/0x/6rrn0xaorj5qjkyuk2hhamqaqyk.png" alt="Diapositiva 37.1. Servicios simples de cifrado reforzado con contrase√±a (PHE)"></p><br><p>  Y, literalmente, en julio de este a√±o, los cient√≠ficos lanzaron un nuevo protocolo llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Simple Password-Hardened Encryption Services,</a> o PHE para abreviar. </p><br><p><img src="https://habrastorage.org/webt/hx/o5/zv/hxo5zveu2y75lmqm-t3pqknaq0e.png" alt="Diapositiva 37.2. Servicios simples de cifrado reforzado con contrase√±a (PHE)"></p><br><p>  Este es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Russell Lai</a> , un cient√≠fico de Europa. </p><br><p>  ¬øCu√°l es la ventaja de este servicio?  En primer lugar, utiliza la curva <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">P-256</a> est√°ndar, que se usa en todas partes, en todos los navegadores, productos, en todas partes, la curva predeterminada, que ha existido durante muchos a√±os.  En segundo lugar, esta cosa funciona aproximadamente 10 veces m√°s r√°pido que Pythia y utiliza primitivas est√°ndar.  Es un poco dif√≠cil, pero puede implementarlo con sus propias manos sin usar bibliotecas oscuras.  Puedes usar <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">OpenSSL</a> , o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Bouncy Castle</a> , cualquier cosa. </p><br><p><img src="https://habrastorage.org/webt/el/f0/ho/elf0hoawmvsekav9jgvkqxp0_ju.png" alt="Diapositiva 38. Servicios simples de cifrado reforzado con contrase√±a (PHE)"></p><br><p>  Pero funciona un poco diferente.  Nuevamente hay un backend, hay un servicio de PHE.  El backend tiene una clave p√∫blica, el servicio tiene una clave privada <code>y</code> .  A diferencia de Pythia, el proceso de registro y el proceso de verificaci√≥n de contrase√±a son un poco diferentes.  Cuando un nuevo usuario llega al servicio y quiere registrarse, ¬øqu√© hace el backend?  Desde el principio, le pidi√≥ al servicio PHE, por favor, deme algunos datos que pueda usar para registrarme, alg√∫n tipo de registro de inscripci√≥n.  El servicio dice OK y responde al backend con las siguientes cosas.  Genera algo de sal aleatoria de 32 bytes ( <code>sNonce</code> ).  Basado en esta sal y su clave privada y, genera dos n√∫meros, llam√©moslos <code>C0</code> y <code>C1</code> .  Tambi√©n genera pruebas ( <code>Proof</code> ) de que estos dos n√∫meros o 2 puntos se generaron precisamente utilizando su clave privada <code>y</code> , utilizando el protocolo Schnorr (como en protocolos anteriores).  El backend verifica la <code>Proof</code> .  No hay contrase√±a aqu√≠ todav√≠a.  ¬øQu√© hace el backend?  Por su parte, tambi√©n tiene su propia clave privada de cliente personal <code>x</code> y, despu√©s de recibir la contrase√±a del usuario, hace casi lo mismo que el servicio, solo agrega la contrase√±a all√≠.  Toma <code>cNonce</code> aleatorio (sal de cliente aleatorio), una contrase√±a, y nuevamente genera 2 n√∫meros <code>HC0</code> y <code>HC1</code> .  ¬øPor qu√© 2?  Porque el primer <code>HC0</code> usa para la autenticaci√≥n, y el segundo n√∫mero <code>HC1</code> mezcla alg√∫n n√∫mero aleatorio <code>M</code> multiplicado por la clave privada <code>x</code> ( <code>MC</code> ).  El n√∫mero <code>M</code> tambi√©n tiene un tama√±o de 32 bytes y luego se puede utilizar para cifrar los datos del usuario (tenemos Servicios de cifrado) ( <em>nota del autor de la nota: la clave de cifrado en este caso ser√° <code>MC</code></em> ).  El n√∫mero <code>MC</code> estar√° disponible como clave solo despu√©s de que el usuario haya ingresado la contrase√±a correcta.  Resulta que en la etapa de registro puede generar no solo un registro de autorizaci√≥n, sino tambi√©n una clave de cifrado, √∫nica para cada usuario, con la que puede cifrar su perfil, algunos datos y algo m√°s.  Luego, el backend simplemente suma lo que envi√≥ el servicio y lo que hizo: suma estos puntos y obtiene <code>T0</code> y <code>T1</code> .  En el primer caso, suma dos ( <code>C0 + HC0</code> ), y en los segundos tres ( <code>C1 + HC1 + MC</code> ).  Y pone en la base 2 sales ( <code>sNonce</code> , <code>cNonce</code> ), con la ayuda de la cual se obtuvieron estos n√∫meros y 2 n√∫meros ( <code>T0</code> y <code>T1</code> ), que resultaron como resultado de la suma. </p><br><p><img src="https://habrastorage.org/webt/ly/9d/fj/ly9dfjao1laxszgo9okoovsvzjy.png" alt="Diapositiva 39. Inicio de sesi√≥n PHE"></p><br><p>  En consecuencia, el proceso de autenticaci√≥n del usuario ocurre en el orden inverso.  El usuario ingresa su contrase√±a en el backend.  El backend calcula <code>HC0</code> y, a partir de lo que tiene en la base de datos, resta <code>HC0</code> de <code>T0</code> y env√≠a el <code>C0</code> resultante al servicio junto con la sal del servidor.  El servicio, al conocer la sal del servidor, calcula el mismo punto en s√≠ mismo y mira, coincide con el hecho de que envi√≥ el backend o no, si coincide, la contrase√±a es correcta y puede responderla con el segundo n√∫mero <code>C1</code> , que restar√° junto con <code>HC1</code> del n√∫mero <code>T1</code> y obtenga la clave de cifrado.  Por lo tanto, la contrase√±a del servicio PHE ni siquiera desaparece.  Ni siquiera deja el backend.  Tiene la forma de algunos puntos multiplicados por la clave privada del backend.  Ni siquiera existe como tal, pero al mismo tiempo, el servicio remoto puede llegar a una conclusi√≥n estricta sobre si esta contrase√±a es correcta o no, y para demostrar con eso que realiz√≥ todos los c√°lculos utilizando su clave privada <code>y</code> . </p><br><p><img src="https://habrastorage.org/webt/bi/7-/op/bi7-opjxk_7cwvgb4lm4wkwgtbi.png" alt="Diapositiva 40.1. Caracter√≠sticas de PHE"></p><br><p>  ¬øQu√© caracter√≠sticas tiene este sistema? </p><br><p><img src="https://habrastorage.org/webt/2t/ar/rm/2tarrmmsr5j4sgk5zlrtcsu1eyc.png" alt="Diapositiva 40.2. Caracter√≠sticas de PHE"></p><br><p>  La contrase√±a, como dije, no deja el backend.  Pero a diferencia de Pythia, necesita una clave privada en el backend.  Bueno, necesitamos y necesitamos, guardar en alguna parte.  PHE tiene todas las funciones b√°sicas de Pythia: </p><br><ul><li>  Tambi√©n puede emitir un token de actualizaci√≥n si algo le sucedi√≥ con la clave privada; </li><li>  Tambi√©n puede revisar toda la base de datos, actualizar y todo estar√° como estaba; </li><li>  protecci√≥n de b√∫squeda; </li><li>  el servicio no sabe nada sobre la contrase√±a; </li><li>   (Pythia , ,  ,    ,  PHE ); </li><li>     . </li></ul><br><p><img src="https://habrastorage.org/webt/vq/_m/yr/vq_myrj2venkvtkjqaij3ujapd4.png" alt=" 41. ..."></p><br><p>      ... </p><br><p><img src="https://habrastorage.org/webt/hp/s9/_t/hps9_tr6ha4ysxt6szxsdhseuoe.png" alt=" 42. passw0rd.io"></p><br><p> ‚Ä¶      .      .   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">passw0rd.io</a>  .    password  ,    18-        ,    ,    zero trust, ..    .     , , ..  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Let's encrypt</a> .  ,   .    CLI     ,   .       <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">2 SDK</a> ,  GO  .Net,     . </p><br><p><img src="https://habrastorage.org/webt/ey/xs/qh/eyxsqh1i0z7s2_fexslxgbdi-fy.png" alt=" 43. Passwords are like underwear"></p><br><p>           : </p><br><ol><li>    . </li><li>      . </li><li>     . </li></ol><br><p><img src="https://habrastorage.org/webt/d4/nh/d4/d4nhd4nzbnhgfq21j-8yqs1ps0m.png" alt=" 44. "></p><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">VirgilSecurity.com</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">@VirgilSecurity</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub.com/VirgilSecurity</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">NoiseSocket.com</a> </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">passw0rd.io</a> </li></ul><br><p>     ,             . </p><br><h3 id="voprosy"> ? </h3><br><p> <strong> 37. ?</strong> </p><br><p><img src="https://habrastorage.org/webt/z_/t0/05/z_t005mcdxnznvcinnqsg-z750a.png" alt=" 45. ?"></p><br><p>     . </p><br><p> Q: ,    !   .     ,      Pythia       update token,        ?        private key  .         update token?  O no? <br> A: , update token-     . <br> Q:    .      -        update token-,       Private key         ? <br> A: ,    update token-,     ,  - ,   ,  ,    update token.     , ..   . <br> Q: , ,    ,   . <br> A: ..     . </p><br><p> Q: ,   ,     ,     -   Pythia  -    ,       ,     ,   ? <br> A:  . <br> Q:      ? <br> A: ,      Pythia   .  Es decir     ,        . <br> Q: ( )  bcrypt      ? <br> A: ,      ,   ,      . </p><br><p> Q:  ,    .      ?  , ‚Ä¶ <br> A: password   <br> Q: password  ?  Fuego!  En general <br> A: 123456   ,        12345, 123456. <br> Q: .    Pythia  ,  PHE   . <br> A:    ,           . <br> Q: .   .         ?  production   ? <br> A:  . !   Pythia. <br> Q:   Pythia,    , ? <br> A:  . <br> Q:   ,  ? <br> A:   . <br> Q: , , ! <br> A:     SDK,     . </p><br><p> Q: ,  ,  ,     , ..   -  ,     ?    ?    ? <br> A: ,    ,    , ..       PHE,    ,    5   2 ,   2   5  .    ,     .    PHE ( ,    ),    ,     10 ,    . <br> Q: ..      - ,      -  ?   ? <br> A:   .     rate limiting,   ,                . <br> Q: ..             , ? <br> A: . </p><br><p> Q: . , ..       Pythia      (),          , ? ? <br> A: ,    ,     . <br> Q:  ,   update   ? <br> A: ,    Pythia  ,         ,  -     -  ,   ,        ,     ) </p><br><p> A: ?   !   .     , ,   PHE,   , . </p><br><h2 id="vyvody">  Conclusiones </h2><br><p>      PHE (    )          + ‚Äî    (  ,   ,  )      (     ).   PHE      ,                   . </p><br><p>         : </p><br><ul><li>       ( <strong></strong> )   ; </li><li>              (      ). </li></ul><br><p>  ,         . </p><br><p>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Scratch</a>   Virgil Security  ,    ,      ! </p><br><p>      (  )? </p><br><p> <strong>UPD</strong> :   <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Scratch</a> .          .     ,     .    . </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es434708/">https://habr.com/ru/post/es434708/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es434698/index.html">Pesimismo sobre el multiproceso</a></li>
<li><a href="../es434700/index.html">Ventajas de seguir las gu√≠as de estilo al desarrollar aplicaciones angulares</a></li>
<li><a href="../es434702/index.html">¬øPor qu√© el SSD moderno me bloquea?</a></li>
<li><a href="../es434704/index.html">Razones para la disminuci√≥n del costo del tr√°fico m√≥vil en Rusia y el pron√≥stico para 2019</a></li>
<li><a href="../es434706/index.html">UDB Que es esto Parte 3. Datapath FIFO</a></li>
<li><a href="../es434710/index.html">Blog de RUVDS sobre Habr: a√±o en tres</a></li>
<li><a href="../es434712/index.html">Tercera prueba de Turing en ruso</a></li>
<li><a href="../es434714/index.html">Sincronizaci√≥n de solicitud de cliente en Spring</a></li>
<li><a href="../es434716/index.html">Mudarse al centro de datos: preparaci√≥n</a></li>
<li><a href="../es434718/index.html">Dos a√±os despu√©s, todav√≠a extra√±o la toma de auriculares</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>