<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๐พโโ๏ธ ๐ค ๐จ๐ฝโ๐ญ ูุดููุฉ ุฅูุดุงุก ูุญุฐู ุงููุงุฆูุงุช ูู C ++ ุจุดูู ูุชูุฑุฑ ๐จโ๐จโ๐ง ๐ฟ ๐คฝ๐ฟ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุชููู ุงูุดุฑูุฉ ุงูุชู ุฃุนูู ูู ุฃุฌููุง ุจูุชุงุจุฉ ูุธุงู ููุชุฑุฉ ุญุฑูุฉ ุงููุฑูุฑ ุงูุฎุงุตุฉ ุจูุง ูุชุญูู ุงูุดุฑูุฉ ูู ูุฌูุงุช DDoS ูุงูุฑูุจูุชุงุช ูุงููุญููุงุช ูุบูุฑ ุฐูู ุงููุซูุฑ. ูุนุชูุฏ ุงูููุชุฌ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุดููุฉ ุฅูุดุงุก ูุญุฐู ุงููุงุฆูุงุช ูู C ++ ุจุดูู ูุชูุฑุฑ</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/477404/" style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/fb/bt/53/fbbt53apqltc7isyigy39vkizmk.jpeg" alt="ุตูุฑุฉ"><br><br>  ุชููู ุงูุดุฑูุฉ ุงูุชู ุฃุนูู ูู ุฃุฌููุง ุจูุชุงุจุฉ ูุธุงู ููุชุฑุฉ ุญุฑูุฉ ุงููุฑูุฑ ุงูุฎุงุตุฉ ุจูุง ูุชุญูู ุงูุดุฑูุฉ ูู ูุฌูุงุช DDoS ูุงูุฑูุจูุชุงุช ูุงููุญููุงุช ูุบูุฑ ุฐูู ุงููุซูุฑ.  ูุนุชูุฏ ุงูููุชุฌ ุนูู ุนูููุฉ ูุซู <a href="https://en.wikipedia.org/wiki/Reverse_proxy" rel="nofollow">ุงูุจุฑููุณู ุงูุนูุณู</a> ุ ูุงูุชู <a href="https://en.wikipedia.org/wiki/Reverse_proxy" rel="nofollow">ูุณุงุนุฏูุง</a> ูู ุชุญููู ูููุงุช ูุจูุฑุฉ ูู ุญุฑูุฉ ุงููุฑูุฑ ูู ุงูููุช ุงูุญูููู ุ ููู ุงูููุงูุฉ ุ ูุง ูุณูุญ ุฅูุง ูู ุฎูุงู ุทูุจุงุช ุงููุณุชุฎุฏููู ุงููุดุฑูุนุฉ ุ ุจุชุตููุฉ ุฌููุน ุงูุทูุจุงุช ุงูุถุงุฑุฉ. <br><br>  ุงูููุฒุฉ ุงูุฑุฆูุณูุฉ ูู ุฃู ุฎุฏูุงุชูุง ุชุนูู ูุน ุญุฑูุฉ ูุฑูุฑ ูุงุฑุฏุฉ ุบูุฑ ูุญุฏูุฏุฉ ุ ูุฐูู ูู ุงูููู ููุบุงูุฉ ุงุณุชุฎุฏุงู ุฌููุน ููุงุฑุฏ ูุญุทุงุช ุงูุนูู ุจุฃูุจุฑ ูุฏุฑ ูููู ูู ุงูููุงุกุฉ.  ุชุณุงุนุฏูุง ุฎุจุฑุฉ ูุจูุฑุฉ ูู ุชุทููุฑ C ++ ุงูุญุฏูุซุฉ ูู ูุฐุง ุ ุจูุง ูู ุฐูู ุฃุญุฏุซ ุงููุนุงููุฑ ููุฌููุนุฉ ูู ุงูููุชุจุงุช ุชุณูู Boost. <br><a name="habracut"></a><br><h3 style=";text-align:right;direction:rtl">  ุนูุณ ุงููููู </h3><br>  ุฏุนูุง ูุนูุฏ ุฅูู ุงููุฑุงุก ุนูุณ ุงููููุงุก ููุฑู ููู ููููู ุชูููุฐู ูู C ++ ู boost.asio.  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ูุญู ุจุญุงุฌุฉ ุฅูู ูุงุฆููู ูุณูู ุฌูุณุงุช ุงูุฎุงุฏู ูุงูุนููู.  ุชูุดุฆ ุฌูุณุฉ ุงูุฎุงุฏู ุงุชุตุงููุง ูุน ุงููุณุชุนุฑุถ ูุชุญุงูุธ ุนููู ุ ูุชููู ุฌูุณุฉ ุงูุนููู ุจุฅูุดุงุก ุงุชุตุงู ุจุงูุฎุฏูุฉ ูุงูุญูุงุธ ุนููู.  ุณุชุญุชุงุฌ ุฃูุถูุง ุฅูู ูุฎุฒู ูุคูุช ููุชูุงุฑ ุงูุฐู ููุบูู ุงูุนูู ุจุฐุงูุฑุฉ ุฏุงุฎููุฉ ุ ุชููุฑุฃ ููู ุฌูุณุฉ ุงูุฎุงุฏู ูู ุงูููุจุณ ูุชูุชุจ ููู ุฌูุณุฉ ุงูุนููู ุฅูู ุงูููุจุณ.  ูููู ุงูุนุซูุฑ ุนูู ุฃูุซูุฉ ูุฌูุณุงุช ุงูุฎุงุฏู ูุงูุนููู ูู ุงููุซุงุฆู ุงูุฎุงุตุฉ ุจ boost.asio.  ููููุฉ ุงูุนูู ูุน ุงููุฎุฒู ุงููุคูุช ุชูุงุฑ ูููู ุงูุนุซูุฑ ุนูููุง ููุงู. <br><br>  ุจุนุฏ ุฃู ูุฌูุน ูููุฐุฌ ุงููููู ุงูุนูุณู ูู ุงูุฃูุซูุฉ ุ ุณูุชุถุญ ุฃู ูุฐุง ุงูุชุทุจูู ูู ูุฎุฏู ุนูู ุงูุฃุฑุฌุญ ุญุฑูุฉ ูุฑูุฑ ูุงุฑุฏุฉ ุบูุฑ ูุญุฏูุฏุฉ.  ุซู ุณูุจุฏุฃ ูู ุฒูุงุฏุฉ ุชุนููุฏ ุงูููุฏ.  ุฏุนููุง ูููุฑ ูู multithreading ุ ู wokers ูุญูุงูุงุช ูุณูุงูุงุช io ุ ููุฐูู ุฃูุซุฑ ูู ุฐูู ุจูุซูุฑ.  ุนูู ูุฌู ุงูุฎุตูุต ุ ุญูู ุชุญุณููุงุช ุณุงุจูุฉ ูุฃูุงููุง ุชุชุนูู ุจูุณุฎ ุงูุฐุงูุฑุฉ ุจูู ุฌูุณุงุช ุงูุฎุงุฏู ูุงูุนููู. <br><br>  ุฃู ููุน ูู ูุณุฎ ุงูุฐุงูุฑุฉ ูุชุญุฏุซ ุนููุ  ุงูุญูููุฉ ูู ุฃูู ุนูุฏ ุงูุชุตููุฉ ุ ูุง ุชูุชูู ุญุฑูุฉ ุงููุฑูุฑ ุฏุงุฆููุง ุฏูู ุชุบููุฑ.  ุงูุธุฑ ุฅูู ุงููุซุงู ุฃุฏูุงู: ุญูุซ ูุฒูู ุฑุฃุณูุง ูุงุญุฏูุง ููุถูู ุงุซููู ุจุฏูุงู ููู.  ูุฒุฏุงุฏ ุนุฏุฏ ุงุณุชุนูุงูุงุช ุงููุณุชุฎุฏู ุงูุชู ูุชู ุชูููุฐ ุฅุฌุฑุงุกุงุช ููุงุซูุฉ ุนูููุง ูุน ุชุนููุฏ ุงูููุทู ุฏุงุฎู ุงูุฎุฏูุฉ.  ูู ุฃู ุญุงู ุ ููููู ูุณุฎ ุงูุจูุงูุงุช ูู ูุซู ูุฐู ุงูุญุงูุงุช ุจูุง ููุงุฏุฉ!  ุฅุฐุง ุชุบูุฑ 1ูช ููุท ูู ุฅุฌูุงูู ุงูุทูุจ ุ ูุธู 99ูช ุจุฏูู ุชุบููุฑ ุ ููุฌุจ ุนููู ุชุฎุตูุต ุฐุงูุฑุฉ ุฌุฏูุฏุฉ ููุฐุง 1ูช ููุท.  ุณูุณุงุนุฏู ูู ูุฐุง ุงูุชุนุฒูุฒ :: asio :: const_buffer ู boost :: asio :: mutable_buffer ุ ูุงูุชู ููููู ูู ุฎูุงููุง ุชูุซูู ุนุฏุฉ ูุชู ูุณุชูุฑุฉ ูู ุงูุฐุงูุฑุฉ ูุน ููุงู ูุงุญุฏ. <br><br>  ุทูุจ ุงููุณุชุฎุฏู: <br><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">Browser -&gt; Proxy: &gt; POST / HTTP/1.1 &gt; User-Agent: curl/7.29.0 &gt; Host: 127.0.0.1:50080 &gt; Accept: */* &gt; Content-Length: 5888903 &gt; Content-Type: application/x-www-form-urlencoded &gt; ... Proxy -&gt; Service: &gt; POST / HTTP/1.1 &gt; User-Agent: curl/7.29.0 &gt; Host: 127.0.0.1:50080 &gt; Accept: */* &gt; Transfer-Encoding: chunked &gt; Content-Type: application/x-www-form-urlencoded &gt; Expect: 100-continue &gt; ... Service -&gt; Proxy: &lt; HTTP/1.1 200 OK Proxy -&gt; Browser &lt; HTTP/1.1 200 OK</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ุงููุดููุฉ </h3><br>  ูุชูุฌุฉู ูุฐูู ุ ุญุตููุง ุนูู ุชุทุจูู ุฌุงูุฒ ูููู ุฃู ูุชุทูุฑ ุจุดูู ุฌูุฏ ููุชูุชุน ุจุฌููุน ุฃููุงุน ุงูุชุญุณููุงุช.  ูู ุฎูุงู ุฅุทูุงูู ูู ุงูุฅูุชุงุฌ ุ ููุง ุณุนุฏุงุก ููุบุงูุฉ ุจุงูููุช ุงูุฐู ุนููุช ููู ุจุดูู ุฌูุฏ ูุซุงุจุช. <br><br>  ูุน ูุฑูุฑ ุงูููุช ุ ุจุฏุฃูุง ูู ุงูุญุตูู ุนูู ุงููุฒูุฏ ูุงููุฒูุฏ ูู ุงูุนููุงุก ุ ูุน ุธููุฑ ุญุฑูุฉ ุงููุฑูุฑ ุงูุชู ููุช ุฃูุถุง.  ูู ูุฑุญูุฉ ูุง ุ ูุงุฌููุง ูุดููุฉ ููุต ุงูุฃุฏุงุก ุฃุซูุงุก ุตุฏ ุงููุฌูุงุช ุงููุจูุฑุฉ.  ุจุนุฏ ุชุญููู ุงูุฎุฏูุฉ ุจุงุณุชุฎุฏุงู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ <a href="https://perf.wiki.kernel.org/index.php/Tutorial" rel="nofollow">perf</a> ุ ูุงุญุธูุง ุฃู ุฌููุน ุงูุนูููุงุช ูุน ูููุฉ ุงูุฐุงูุฑุฉ ุงููุคูุชุฉ ููุฏ ุงูุชุญููู ูู ุงูุฃุนูู.  ุซู ุฃุนุฏูุง ูุถุนูุง ูุดุงุจููุง ุนูู ุฏุงุฑุฉ ุงูุงุฎุชุจุงุฑ ุจุงุณุชุฎุฏุงู <a href="https://github.com/yandex/yandex-tank" rel="nofollow">ุฏุจุงุจุงุช yandex</a> ูุฎุฑุงุทูุด ุชู ุฅูุดุงุคูุง ุจูุงุกู ุนูู ุญุฑูุฉ ูุฑูุฑ ุญููููุฉ.  ุชุซุจูุช ุนูู ุฎุฏูุฉ ูู ุฎูุงู <a href="https://software.intel.com/en-us/vtune" rel="nofollow">ููุจุฑ ููุตูุช ุ</a> ุฑุฃููุง ุงูุตูุฑุฉ ุงูุชุงููุฉ ... <br><br>  ููุทุฉ ุดุงุดุฉ ูููุจุฑ ุงูุตูุช (woslab): <br><br><img src="https://habrastorage.org/webt/tz/ks/d9/tzksd9oddf-rhcfphtkxkun-pdg.png"><br><br>  ูู ููุทุฉ ุงูุดุงุดุฉ ุ ุนูู ุงููุดุบู ุงูุฌุฏูุฏ ููุฏุฉ 67 ุซุงููุฉ ุ ูุญุฐู ุงููุดุบู ุฃูุซุฑ - 97 ุซุงููุฉ. <br><br>  ูุฐุง ุงููุถุน ุฃุฒุนุฌูุง.  ููููุฉ ุชูููู ููุช ุงูุจูุงุก ุงูุชุทุจูู ูู ุงููุดุบู ุงูุฌุฏูุฏ ูุญุฐู ุงููุดุบูุ  ูู ุงูููุทูู ุฃู ูุชู ุฐูู ุนู ุทุฑูู ุงูุชุฎูู ุนู ุงูุชุฎุตูุตุงุช ุงูุซุงุจุชุฉ ูููุงุฆูุงุช ุงูุชู ูุชู ุฅูุดุงุคูุง ูุญุฐููุง ุจุดูู ูุชูุฑุฑ ุนูู ุงููููุฉ.  ุงุณุชูุฑูุง ุนูู ุซูุงุซุฉ ููุฌ.  ุงุซูุงู ูููู ููุงุณู: <a href="https://en.wikipedia.org/wiki/Object_pool_pattern" rel="nofollow">ุชุฌูุน ุงููุงุฆูุงุช</a> <a href="https://en.wikipedia.org/wiki/Stack-based_memory_allocation" rel="nofollow">ูุชุฎุตูุต ุงูููุฏุณ</a> .  ูุชู ูุถุน ุฌูุณุงุช ุงูุนููู ุงูุชู ูุชู ุชูุธูููุง ูู ุชุฌูุน ูู ูุฑุญูุฉ ุจุฏุก ุงูุชุทุจูู ูู ูุถุน ุฌูุฏ ูู ุงูููุฌ ุงูุฃูู.  ูุชู ุงุณุชุฎุฏุงู ุงูุทุฑููุฉ ุงูุซุงููุฉ ูู ูู ููุงู ุญูุซ ุชุชู ูุนุงูุฌุฉ ุทูุจ ุงููุณุชุฎุฏู ูู ุงูุจุฏุงูุฉ ุฅูู ุงูููุงูุฉ ูู ููุณ ุงูุญุฒูุฉ ุ ุจูุนูู ุขุฎุฑ ุ ูู ูุนุงูุฌ ุงูุณูุงู io ููุณู.  ูู ูุชูุงูู ูุฐุง ุจูุฒูุฏ ูู ุงูุชูุตูู.  ูู ุงูุฃูุถู ุฃู ูุชุญุฏุซ ุนู ุงูุทุฑููุฉ ุงูุซุงูุซุฉ ุ ุจุงุนุชุจุงุฑูุง ุงูุทุฑููุฉ ุงูุฃูุซุฑ ุชุนููุฏูุง ูุฅุซุงุฑุฉ ููุงูุชูุงู.  ููุณูู <a href="https://en.wikipedia.org/wiki/Slab_allocation" rel="nofollow">ุชุฎุตูุต</a> ุจูุงุทุฉ ุฃู ุชูุฒูุน ุจูุงุทุฉ. <br><br>  ููุฑุฉ ุชูุฒูุน ุงูุฃููุงุญ ููุณุช ุฌุฏูุฏุฉ.  ุชู ุงุฎุชุฑุงุนู ูุชูููุฐู ูู Solaris ุ ูุชู ุชุฑุญููู ูุงุญููุง ุฅูู kernel Linux ุ ููู ูุชููู ูู ุญูููุฉ ุฃู ุงููุงุฆูุงุช ุงููุณุชุฎุฏูุฉ ูู ุงูุบุงูุจ ูู ููุณ ุงูููุน ุชููู ุฃุณูู ูู ุงูุชุฎุฒูู ูู ุงููุฌูุน.  ูุฃุฎุฐ ุงููุงุฆู ูู ุงูุชุฌูุน ุนูุฏูุง ูุญุชุงุฌ ุฅููู ุ ูุนูุฏ ุงูุงูุชูุงุก ูู ุงูุนูู ุ ูุนูุฏู ูุฑุฉ ุฃุฎุฑู.  ูุง ุชูุฌุฏ ููุงููุงุช ููุดุบู ุฌุฏูุฏ ููุดุบู ุญุฐู!  ุนูุงูุฉ ุนูู ุฐูู ุ ุงูุญุฏ ุงูุฃุฏูู ูู ุงูุชููุฆุฉ.  ูู ูุจ ุงูุฃููุงุญ ุ ูุชู ุงุณุชุฎุฏุงู ุงูุชูุฒูุน ููุฅุดุงุฑุงุช ุ ูุงุตูุงุช ุงููููุงุช ุ ูุงูุนูููุงุช ุ ูุงูุฎููุท.  ูู ุญุงูุชูุง ุ ููุน ุจุดูู ูุซุงูู ุนูู ุฌูุณุงุช ุงูุฎุงุฏู ูุงูุนููู ุ ููุฐูู ูู ูุง ุจุฏุงุฎููุง. <br><br>  ุงูุฑุณู ุงูุจูุงูู (ุชูุฒูุน ุจูุงุทุฉ): <br><br><img src="https://habrastorage.org/webt/zb/k2/u8/zbk2u8m0jexhso3nmkttzxkvrw0.png"><br><br>  ุจุงูุฅุถุงูุฉ ุฅูู ุญูููุฉ ุฃู ูุฎุตุตุงุช ุงูุจูุงุทุงุช ููุฌูุฏุฉ ูู ุงูููุงุฉ ุ ุชูุฌุฏ ุชุทุจููุงุชูุง ุฃูุถูุง ูู ูุณุงุญุฉ ุงููุณุชุฎุฏู.  ููุงู ุนุฏุฏ ูููู ูููู ุ ูุชูู ุงูุชู ุชุชุทูุฑ ุจูุดุงุท ูู ุนูููุง ููููุฉ.  <a href="https://github.com/tarantool/small" rel="nofollow">ุงุณุชูุฑูุง</a> ุนูู ููุชุจุฉ ุชุณูู <a href="https://github.com/tarantool/small" rel="nofollow">libsmall</a> ุ ูุงูุชู ูู ุฌุฒุก ูู <a href="https://github.com/tarantool/tarantool" rel="nofollow">tarantool</a> .  ูุฏููุง ูู ูุง ุชุญุชุงุฌู. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุตุบูุฑ :: ูุฎุตุต </li><li style=";text-align:right;direction:rtl">  ุตุบูุฑ :: slab_cache (ูุคุดุฑ ุชุฑุงุจุท ูุญูู) </li><li style=";text-align:right;direction:rtl">  ุงูุตุบูุฑุฉ :: ุจูุงุทุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุตุบูุฑุฉ :: ุงูุณุงุญุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุตุบูุฑุฉ :: ุงูุญุตุฉ </li></ul><br>  ุจููุฉ :: slab ุงูุตุบูุฑุฉ ุนุจุงุฑุฉ ุนู ุชุฌูุน ุจู ููุน ูุญุฏุฏ ูู ุงููุงุฆูุงุช.  ุงูุจููุฉ ุงูุตุบูุฑุฉ :: slab_cache ูู ุฐุงูุฑุฉ ุชุฎุฒูู ูุคูุช ุชุญุชูู ุนูู ููุงุฆู ูุชุนุฏุฏุฉ ูู ุงูุชุฌูุนุงุช ุจููุน ูุญุฏุฏ ูู ุงููุงุฆูุงุช.  ุงููููู ุตุบูุฑ :: ูุฎุตุต ูู ุฑูุฒ ูุญุฏุฏ ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุถุฑูุฑูุฉ ุ ููุจุญุซ ุนู ุชุฌูุน ููุงุณุจ ููู ุ ุญูุซ ูุชู ุชูุฒูุน ุงููุงุฆู ุงููุทููุจ.  ูุง ุงูุฃุดูุงุก ุงูุตุบูุฑุฉ :: ุงูุณุงุญุฉ ูุงููุงุฆูุงุช ุงูุตุบูุฑุฉ :: ุณุชููู ูุงุถุญุฉ ูู ุงูุฃูุซูุฉ ุฃุฏูุงู. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุฎุชุงู </h3><br>  ููุชุจุฉ libsmall ููุชูุจุฉ ุจูุบุฉ C ุ ูููุณ C ++ ุ ูุฐูู ูุงู ุนูููุง ุชุทููุฑ ุนุฏุฉ ุบูุงู ูุชูุงูู ุดูุงู ูู ููุชุจุฉ C ++ ุงูููุงุณูุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  variti :: slab_allocator </li><li style=";text-align:right;direction:rtl">  variti :: ููุญ </li><li style=";text-align:right;direction:rtl">  variti :: thread_local_slab </li><li style=";text-align:right;direction:rtl">  variti :: slab_allocate_shared </li></ul><br>  ุชุทุจู ูุฆุฉ variti :: slab_allocator ุงูุญุฏ ุงูุฃุฏูู ูู ุงููุชุทูุจุงุช ุงูุชู ุญุฏุฏูุง ุงููุนูุงุฑ ุนูุฏ ูุชุงุจุฉ ูุฎุตุต ุฎุงุต ุจู.  ุฏุงุฎู ุงูุทุจูุงุช variti :: slab ุ ูุชู ุชุบููู ูู ุงูุนูู ูุน ููุชุจุฉ libsmall.  ููุงุฐุง ููุงู ุญุงุฌุฉ ุฅูู variti :: thread_local_slabุ  ุงูุญูููุฉ ูู ุฃู ุงูุชุฎุฒูู ุงููุคูุช ููุญ ุงูุชูุฒูุน ูู ูุงุฆูุงุช ูุคุดุฑ ุงูุชุฑุงุจุท ุงููุญููุฉ.  ูุฐุง ูุนูู ุฃู ูู ูุคุดุฑ ุชุฑุงุจุท ูุฏูู ูุฌููุนุฉ ูู ุฐุงูุฑุงุช ุงูุชุฎุฒูู ุงููุคูุช ุงูุฎุงุตุฉ ุจู.  ูุชู ุฐูู ูู ุฃุฌู ุชูููู ุนุฏุฏ ุงูุนูููุงุช ุงููุญุธูุฑุฉ ุนูุฏ ุชูุฒูุน ูุงุฆู ุฌุฏูุฏ ุฅูู ุตูุฑ.  ูุฐูู ุ ูู ุฐูุฑู ูู ููุถูุน ุ ูุถุน ูุซูููุง ููุฆุฉ variti :: slab ุ ููุชู ุชูุธูู ุงููุตูู ุฅููู ุจุงุณุชุฎุฏุงู ุจุฑูุงูุฌ variti :: thread_local_slab.  ุณุฃุฎุจุฑู ุนู ูุธููุฉ ุงููุงูุจ variti :: slab_allocate_shared ูุงุญููุง. <br><br>  ุฏุงุฎู ูุฆุฉ variti :: slab_allocator ุ ูู ุดูุก ุจุณูุท ููุบุงูุฉ.  ูุฏูู ุงููุฏุฑุฉ ุนูู ุงูุชุฑุฌูุน ูู ููุน ุฅูู ุขุฎุฑ ุ ุนูู ุณุจูู ุงููุซุงู ุ ูู ุงููุฑุงุบ ุฅูู ุงูุญุฑู.  ููู ุงููุซูุฑ ููุงูุชูุงู ุ ููููู ุงูุงูุชุจุงู ุฅูู ุงูุชุดุงุฑ nullptr ุฅูู ุงูุงุณุชุซูุงุก std :: bad_alloc ูู ุญุงูุฉ ููุงุฏ ุงูุฐุงูุฑุฉ ูู ููุญุฉ ุงูุชูุฒูุน.  ูููู ุงูุจุงูู ุจุฅุนุงุฏุฉ ุชูุฌูู ุงูููุงููุงุช ุฏุงุฎู ุจุฑูุงูุฌ variti :: thread_local_slab. <br><br>  ููุชุทู (slab_allocator.hpp): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slab_allocator</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> value_type = T; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> pointer = value_type*; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> const_pointer = <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value_type*; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> reference = value_type&amp;; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> const_reference = <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> value_type&amp;; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> U&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rebind</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> other = slab_allocator&lt;U&gt;; }; slab_allocator() {} <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> U&gt; slab_allocator(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> slab_allocator&lt;U&gt;&amp; other) {} <span class="hljs-function"><span class="hljs-function">T* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allocate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* = </span></span><span class="hljs-literal"><span class="hljs-function"><span class="hljs-params"><span class="hljs-literal">nullptr</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> p = <span class="hljs-keyword"><span class="hljs-keyword">static_cast</span></span>&lt;T*&gt;(thread_local_slab::allocate(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(T) * n)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!p &amp;&amp; n) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::bad_alloc(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> p; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deallocate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T* p, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ thread_local_slab::deallocate(p, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(T) * n); } }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slab_allocator</span></span></span><span class="hljs-class">&lt;void&gt; {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> value_type = <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> pointer = <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> const_pointer = <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> U&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rebind</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> slab_allocator&lt;U&gt; other; }; };</code> </pre> <br>  ุฏุนููุง ูุฑู ููู ูุชู ุชุทุจูู ุงูููุดุฆ ู destructor variti :: slab.  ูู ุงูููุดุฆ ุ ูุฎุตุต ูุง ูุง ูุฒูุฏ ุนู 1 ุฌูุฌุง ุจุงูุช ูู ุงูุฐุงูุฑุฉ ูุฌููุน ุงููุงุฆูุงุช.  ูุง ูุชุฌุงูุฒ ุญุฌู ูู ูุฌููุนุฉ ูู ุญุงูุชูุง 1 ููุฌุงุจุงูุช.  ุงูุญุฏ ุงูุฃุฏูู ูููุงุฆู ุงูุฐู ูููููุง ุชูุฒูุนู ูู 2 ุจุงูุช ูู ุงูุญุฌู (ูู ุงููุงูุน ุ libsmall ุณูุฒูุฏู ุฅูู ุงูุญุฏ ุงูุฃุฏูู ุงููุทููุจ - 8 ุจุงูุช).  ุงููุงุฆูุงุช ุงููุชุจููุฉ ุงููุชุงุญุฉ ูู ุฎูุงู ุชูุฒูุน ุจูุงุทุฉ ูุฏููุง ุณุชููู ูุถุงุนูุฉ ูุงุซููู (ุชู ุถุจุทูุง ุจูุงุณุทุฉ ุซุงุจุช 2.f).  ุฅุฌูุงูู ุ ููููู ุชูุฒูุน ูุงุฆูุงุช ุจุญุฌู 8 ุ 16 ุ 32 ุ ุฅูุฎ.  ุฅุฐุง ูุงู ุญุฌู ุงููุงุฆู ุงููุทููุจ 24 ุจุงูุช ุ ูุณูุญุฏุซ ููุฏุงุฑ ุญูู ูู ุงูุฐุงูุฑุฉ.  ุณูุนูุฏ ุงูุชูุฒูุน ูุฐุง ุงููุงุฆู ุฅููู ุ ูููู ุณูุชู ูุถุนู ูู ุชุฌูุน ูุชูุงูู ูุน ูุงุฆู ุจุญุฌู 32 ุจุงูุช.  8 ุจุงูุช ุงููุชุจููุฉ ุณุชููู ุฎุงููุงู. <br><br>  ููุชุทู (slab.hpp): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">phys_to_virt_p</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">reinterpret_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*&gt;(p) + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">phys_to_virt_n</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n - <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">virt_to_phys_p</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">reinterpret_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">char</span></span>*&gt;(p) - <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> size_t </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">virt_to_phys_n</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> n + <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id); } <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::<span class="hljs-function"><span class="hljs-function">id&amp; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">phys_thread_id</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> *<span class="hljs-keyword"><span class="hljs-keyword">reinterpret_cast</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::thread::id*&gt;(p); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">slab</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> noncopyable { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: slab() { small::quota_init(&amp; quota_, <span class="hljs-number"><span class="hljs-number">1024</span></span> * <span class="hljs-number"><span class="hljs-number">1024</span></span> * <span class="hljs-number"><span class="hljs-number">1024</span></span>); small::slab_arena_create(&amp;arena_, &amp; quota_, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1024</span></span> * <span class="hljs-number"><span class="hljs-number">1024</span></span>, MAP_PRIVATE); small::slab_cache_create(&amp;cache_, &amp;arena_); small::allocator_create(&amp;allocator_, &amp;cache_, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">2.f</span></span>); } ~slab() { small::allocator_destroy(&amp;allocator_); small::slab_cache_destroy(&amp;cache_); small::slab_arena_destroy(&amp;arena_); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allocate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> phys_n = virt_to_phys_n(n); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> phys_p = small::<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(&amp;allocator_, phys_n); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!phys_p) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">nullptr</span></span>; phys_thread_id(phys_p) = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> phys_to_virt_p(phys_p); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deallocate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> phys_p = virt_to_phys_p(<span class="hljs-keyword"><span class="hljs-keyword">const_cast</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*&gt;(p)); <span class="hljs-keyword"><span class="hljs-keyword">auto</span></span> phys_n = virt_to_phys_n(n); assert(phys_thread_id(phys_p) == <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::this_thread::get_id()); small::<span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(&amp;allocator_, phys_p, phys_n); } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: small::quota quota_; small::slab_arena arena_; small::slab_cache cache_; small::allocator allocator_; };</code> </pre> <br>  ุชูุทุจู ูู ูุฐู ุงููููุฏ ุนูู ูุณุฎุฉ ูุนููุฉ ูู ูุฆุฉ variti :: slab.  ูุธุฑูุง ูุฃู ูู ูุคุดุฑ ุชุฑุงุจุท ุฎุงุต ุจู (ููุฑ ูู ูุคุดุฑ ุชุฑุงุจุท ูุญูู) ุ ูุฅู ุงูุญุฏ ุงูุฅุฌูุงูู ููุฐู ุงูุนูููุฉ ูู ูููู 1 ุฌูุฌุง ุจุงูุช ุ ูููู ุณูููู ูุชูุงุณุจูุง ุจุดูู ูุจุงุดุฑ ูุน ุนุฏุฏ ูุคุดุฑุงุช ุงูุชุฑุงุจุท ุงูุชู ุชุณุชุฎุฏู ุชูุฒูุน ุจูุงุทุฉ. <br><br>  ุงููุฎุทุท (std :: thread :: id): <br><br><img src="https://habrastorage.org/webt/_8/65/jy/_865jyoyp0qqoz7-tgsgmjsc9b0.png"><br><br>  ูู ูุงุญูุฉ ุ ูุชูุญ ูู ุงุณุชุฎุฏุงู ูุคุดุฑ ุงูุชุฑุงุจุท ุงููุญูู ุชุณุฑูุน ุนูู ุชูุฒูุน ุงูุฃููุงุญ ูู ุชุทุจูู ูุชุนุฏุฏ ุงูุฎููุท ุ ูู ูุงุญูุฉ ุฃุฎุฑู ุ ูุฅูู ููุฑุถ ูููุฏูุง ุดุฏูุฏุฉ ุนูู ุจููุฉ ุงูุชุทุจูู ุบูุฑ ุงููุชุฒุงูู.  ูุฌุจ ุนููู ุทูุจ ูุฅุฑุฌุงุน ูุงุฆู ูู ููุณ ุงูุฏูู.  ุงูููุงู ุจุฐูู ูุฌุฒุก ูู boost.asio ูู ูู ุจุนุถ ุงูุฃุญูุงู ูุดููุฉ ููุบุงูุฉ.  ูุชุชุจุน ุงูููุงูู ุงูุฎุงุทุฆุฉ ุจุดูู ูุงุถุญ ุ ูู ุจุฏุงูุฉ ูู ูุงุฆู ุ ูุถุน ูุนุฑู ุงูุฏูู ุงูุฐู ุชุณูู ููู ุทุฑููุฉ ุงูุชุฎุตูุต.  ูุชู ุงูุชุญูู ูู ูุฐุง ุงููุนุฑู ูู ุทุฑููุฉ ุฅูุบุงุก ุชุฎุตูุต ุงูุจูุงูุงุช.  ุงููุณุงุนุฏูู phys_to_virt_p ู virt_to_phys_p ูุณุงุนุฏูู ูู ูุฐุง. <br><br>  ููุชุทู (thread_local_slab.hpp): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">thread_local_slab</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> noncopyable { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finalize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function">* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">allocate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">deallocate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">* p, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">size_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>; };</code> </pre> <br>  ููุชุทู (thread_local_slab.cpp): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">thread_local</span></span> slab* slab_; <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> thread_local_slab::initialize() { slab_ = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> slab(slab_cfg_); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> thread_local_slab::finalize() { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> slab_; } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* thread_local_slab::<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> n) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> slab_-&gt;<span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(n); } <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> thread_local_slab::<span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span>* p, <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> n) { slab_-&gt;<span class="hljs-built_in"><span class="hljs-built_in">free</span></span>(p, n); }</code> </pre> <br>  ุนูุฏ ููุฏุงู ุงูุชุญูู ูู ุงูุฏูู (ุนูุฏ ููู ูุงุฆู ุจูู ุณูุงูุงุช io ูุฎุชููุฉ) ุ ูุณูุญ ุงููุคุดุฑ ุงูุฐูู ุจุงูุฅูุฑุงุฌ ุงูุตุญูุญ ุนู ุงููุงุฆู.  ูู ูุง ููุนูู ูู ุชูุฒูุน ุงููุงุฆู ุ ูุชุฐูุฑ ุณูุงู io ุงูุฎุงุต ุจู ุ ุซู ููู ูู std :: shared_ptr ุจููุณู ูุฎุตุต ุ ูุงูุฐู ูุง ููุฑุฌุน ุงููุงุฆู ููุฑูุง ุฅูู ุงูุชูุฒูุน ุ ูููู ููุนูู ูู ุณูุงู io ุงูุฐู ุชู ุญูุธู ูุณุจููุง.  ูุฐุง ูุนูู ุจุดูู ุฌูุฏ ุนูุฏูุง ูุนูู ูู ุณูุงู io ุนูู ููุถูุน ูุงุญุฏ.  ุฎูุงู ุฐูู ุ ูุณูุก ุงูุญุธ ุ ูุฐุง ุงูููุฌ ุบูุฑ ูุงุจู ููุชุทุจูู. <br><br>  ููุชุทู (slab_helper.hpp): <br><br><pre style=";text-align:right;direction:rtl"> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Allocator, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;T&gt; slab_allocate_shared(Allocator allocator, Args... args) { T* p = allocator.allocate(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)p) T(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Args&gt;(args)...); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;T&gt; ptr(p, [allocator](T* p) { p-&gt;~T(); allocator.deallocate(p); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ptr; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> T, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> Allocator, <span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>... Args&gt; <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;T&gt; slab_allocate_shared(Allocator allocator, boost::asio::io_service* io, Args... args) { T* p = allocator.allocate(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ((<span class="hljs-keyword"><span class="hljs-keyword">void</span></span>*)p) T(<span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::forward&lt;Args&gt;(args)...); <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::<span class="hljs-built_in"><span class="hljs-built_in">shared_ptr</span></span>&lt;T&gt; ptr(p, [allocator, io](T* p) { io-&gt;post([allocator, p]() { p-&gt;~T(); allocator.deallocate(p); }); }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ptr; };</code> </pre> <br><h3 style=";text-align:right;direction:rtl">  ูุฑุงุฑ </h3><br>  ุจุนุฏ ุงูุชูุงู ุนูู ุงูุชูุงู libsmall ุ ูููุง ุฃููุงู ุจููู ูุฎุตุตุงุช chun ุฏุงุฎู ุงููุฎุฒู ุงููุคูุช ููุชูุงุฑ ููุจูุงุทุฉ.  ูุงู ูุฐุง ูู ุงูุณูู ุฌุฏุง ุงูููุงู ุจู.  ุจุนุฏ ุฃู ุชููููุง ูุชูุฌุฉ ุฅูุฌุงุจูุฉ ุ ููุฏ ุชูุฏููุง โโูุทุจููุง ุฃุฏูุงุช ุชุฎุตูุต ุงูุฃููุงุญ ุฃููุงู ุนูู ุงููุฎุฒู ุงููุคูุช ููุชูุงุฑ ููุณู ุ ุซู ุนูู ุฌููุน ุงููุงุฆูุงุช ุฏุงุฎู ุฌูุณุงุช ุนูู ุงูุฎุงุฏู ูุงูุนููู. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  variti :: ุงููุทุนุฉ </li><li style=";text-align:right;direction:rtl">  variti :: streambuf </li><li style=";text-align:right;direction:rtl">  variti :: server_session </li><li style=";text-align:right;direction:rtl">  variti :: client_session </li></ul><br>  ูู ุงูููุช ููุณู ุ ูุงู ูู ุงูุถุฑูุฑู ุญู ุงููุดููุงุช ุงูุฅุถุงููุฉ ุ ููู: ููู ุงููุงุฆูุงุช ุงูุจุณูุทุฉ ูุงููุงุฆูุงุช ุงููุฑูุจุฉ ูุงููุฌููุนุงุช ุฅูู ููุฒุนู ุจูุงุทุงุช.  ูุฅุฐุง ูู ุชูู ููุงู ุตุนูุจุงุช ุฎุทูุฑุฉ ูู ุฃูู ูุฆุชูู ูู ุงููุงุฆูุงุช (ูุชู ุงุฎุชุฒุงู ุงููุงุฆูุงุช ุงููุฑูุจุฉ ุฅูู ุฃุดูุงุก ุจุณูุทุฉ) ุ ูุนูุฏ ุชุฑุฌูุฉ ูุฌููุนุงุช ุ ูุงุฌููุง ุตุนูุจุงุช ุฎุทูุฑุฉ. <br><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: ูุงุฆูุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: deque </li><li style=";text-align:right;direction:rtl">  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: ูุงููุงุช </li><li style=";text-align:right;direction:rtl">  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: ุณูุณูุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: ุฎุฑูุทุฉ </li><li style=";text-align:right;direction:rtl">  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: unordered_map </li></ul><br>  ุฃุญุฏ ุงููููุฏ ุงูุฑุฆูุณูุฉ ุนูุฏ ุงูุนูู ูุน ุชูุฒูุน ุงูุฃููุงุญ ูู ุฃู ุนุฏุฏ ุงููุงุฆูุงุช ูู ุงูุฃููุงุน ุงููุฎุชููุฉ ูุง ููุจุบู ุฃู ูููู ูุจูุฑูุง ุฌุฏูุง (ูููุง ูุงู ุฃุตุบุฑ ุ ูุงู ุฃูุถู).  ูู ูุฐุง ุงูุณูุงู ุ ูุฏ ุชูุน ุจุนุถ ุงููุฌููุนุงุช ุนูู ููููู ูุฎุตุตุงุช ุงูุจูุงุทุงุช ุ ูู ุญูู ุฃู ุจุนุถูุง ูุฏ ูุง ูููู ูุฐูู. <br><br>  ุจุงููุณุจุฉ ุฅูู std :: list slab ุ ูุนูู ุงูููุฎุตุตูู ุจุดูู ุฑุงุฆุน.  ูุชู ุชูููุฐ ูุฐู ุงููุฌููุนุฉ ุฏุงุฎูููุง ุจุงุณุชุฎุฏุงู ูุงุฆูุฉ ูุฑุชุจุทุฉ ุ ูููู ููู ุนูุตุฑ ูููุง ุญุฌู ุซุงุจุช.  ูุจุงูุชุงูู ุ ูุน ุฅุถุงูุฉ ุจูุงูุงุช ุฌุฏูุฏุฉ ุฅูู ูุงุฆูุฉ ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุงู :: ูู ุชูุฒูุน ุงูุฃููุงุญ ุ ูุง ุชุธูุฑ ุฃููุงุน ุฌุฏูุฏุฉ ูู ุงููุงุฆูุงุช.  ุงูุดุฑุท ุงููุดุงุฑ ุฅููู ุฃุนูุงู ููุชูุน!  ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: ุฎุฑูุทุฉ ูุฑุชุจุฉ ุจุงููุซู.  ุงููุฑู ุงููุญูุฏ ูู ุฃูู ูู ุงูุฏุงุฎู ููุณุช ูุงุฆูุฉ ูุฑุชุจุทุฉ ุ ูููู ุดุฌุฑุฉ. <br><br>  ูู ุญุงูุฉ ุงูุฃูุฑุงุถ ุงููููููุฉ ุฌูุณูุง :: deque ุ ุงูุฃููุฑ ุฃูุซุฑ ุชุนููุฏุง.  ูุชู ุชุทุจูู ูุฐู ุงููุฌููุนุฉ ูู ุฎูุงู ูุชูุฉ ูุชุฌุงูุฑุฉ ูู ุงูุฐุงูุฑุฉ ุชุญุชูู ุนูู ูุคุดุฑุงุช ุฅูู ูุทุน.  ุนูู ุงูุฑุบู ูู ุฃู ุงูุฃุฌุฒุงุก ุงูุฏูููุฉ ุฏูููุฉ ุฌุฏูุง ุ ุฅูุง ุฃู std :: deque ุชุชุตุฑู ุจููุณ ุงูุทุฑููุฉ ุงูุชู ุชุชุจุนูุง std :: list ุ ูููู ุนูุฏ ููุงูุชูุง ุ ูุชู ุฅุนุงุฏุฉ ุชูุฒูุน ููุณ ูุชูุฉ ุงูุฐุงูุฑุฉ ูุฐู.  ูู ูุฌูุฉ ูุธุฑ ูุฎุตุตุงุช ุงูุจูุงุทุงุช ุ ูุฅู ูู ุนูููุฉ ุฅุนุงุฏุฉ ุชูุฒูุน ููุฐุงูุฑุฉ ูู ูุงุฆู ุจููุน ุฌุฏูุฏ.  ูุนุชูุฏ ุนุฏุฏ ุงููุงุฆูุงุช ุงููุถุงูุฉ ุฅูู ุงููุฌููุนุฉ ุจุดูู ูุจุงุดุฑ ุนูู ุงููุณุชุฎุฏู ููููู ุฃู ูููู ุจุดูู ูุง ูููู ุงูุณูุทุฑุฉ ุนููู.  ูุฐุง ุงููููู ุบูุฑ ููุจูู ุ ูุฐูู ุฅูุง ุฃููุง ูููุง ุฃููุงู ุจุชุญุฏูุฏ ุญุฌู std :: deque ุญูุซูุง ูุงู ุฐูู ูููููุง ุ ุฃู ูุถู std :: list. <br><br>  ุฅุฐุง ุฃุฎุฐูุง std :: vector ู std :: string ุ ูุณูุธููู ุฃูุซุฑ ุชุนููุฏูุง.  ูุดุจู ุชุทุจูู ูุฐู ุงููุฌููุนุงุช ููุนูุง ูุง std :: deque ุ ุฅูุง ุฃู ูุชูุฉ ุงูุฐุงูุฑุฉ ุงููุณุชูุฑุฉ ุงูุฎุงุตุฉ ุจูู ุชููู ุจุดูู ุฃุณุฑุน.  ุงุณุชุจุฏููุง std :: vector ู std :: string ุจู std :: deque ุ ููู ุฃุณูุฃ ุงูุญุงูุงุช ูุน std :: list.  ูุนู ุ ููุฏูุง ุงูุฃุฏุงุก ุงููุธููู ููู ููุงู ูุง ุญุชู ูู ุงูุฃุฏุงุก ุ ููู ูุฐุง ุฃุซุฑ ุนูู ุงูุตูุฑุฉ ุงูููุงุฆูุฉ ุฃูู ุจูุซูุฑ ูู ุงูุชุญุณููุงุช ุงูุชู ุชู ุชุตููู ูู ุดูุก ููุง. <br><br>  ููุฏ ูุนููุง ููุณ ุงูุดูุก ุชูุงููุง ุจุงุณุชุฎุฏุงู std :: unordered_map ุ ูุน ุงูุชุฎูู ุนูู ูุตุงูุญ variti :: flat_map ุงูููุชูุจ ุฐุงุชููุง ูุงูุฐู ุชู ุชูููุฐู ูู ุฎูุงู std :: deque.  ูู ุงูููุช ููุณู ุ ูููุง ุจุจุณุงุทุฉ ุจุชุฎุฒูู ุงูููุงุชูุญ ุงููุณุชุฎุฏูุฉ ุจุดูู ูุชูุฑุฑ ูู ูุชุบูุฑุงุช ูููุตูุฉ ุ ุนูู ุณุจูู ุงููุซุงู ุ ููุง ูู ุงูุญุงู ูุน ุฑุคูุณ ุทูุจุงุช http ูู nginx. <br><br><h3 style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </h3><br>  ุจุนุฏ ุงูุงูุชูุงุก ูู ุงูููู ุงููุงูู ูุฌูุณุงุช ุงูุฎุงุฏู ูุงูุนููู ุฅูู ููุฒุนู ุจูุงุทุงุช ุ ููููุง ุงูููุช ุงูุฐู ุชุณุชุบุฑูู ูุฌููุนุฉ ุงูุนูู ุจุฃูุซุฑ ูู ูุฑุฉ ููุตู. <br><br>  ููุทุฉ ุดุงุดุฉ ูููุจุฑ ุงูุตูุช (coldslab): <br><br><img src="https://habrastorage.org/webt/ls/yx/l_/lsyxl_b6xngl5xap-t5erwn4now.png"><br><br>  ูู ููุทุฉ ุงูุดุงุดุฉ ุ ุนูู ุงููุดุบู ุงูุฌุฏูุฏ 32 ุซุงููุฉ ุ ูุญุฐู ุงููุดุบู - 24 ุซุงููุฉ.  ุจุญููู ูุฐุง ุงูููุช ุ ุชูุช ุฅุถุงูุฉ ูุธุงุฆู ุฃุฎุฑู ููุนูู ูุน ุงููููุฉ: smalloc - 21 ุซุงููุฉ ุ mslab_alloc - 37 ุซุงููุฉ ุ smfree - 8 ุซูุงูู ุ mslab_free - 21 ุซุงููุฉ.  ุงููุฌููุน ุ 143 ุซุงููุฉ ููุงุจู 161 ุซุงููุฉ. <br><br>  ูููู ุชู ุฅุฌุฑุงุก ูุฐู ุงูููุงุณุงุช ููุฑ ุจุฏุก ุงูุฎุฏูุฉ ุฏูู ุชููุฆุฉ ุงููุฎุงุจุฆ ูู ุชูุฒูุน ุงูุจูุงุทุฉ.  ุจุนุฏ ุฅุทูุงู ุงููุงุฑ ุงููุชูุฑุฑ ูู ุฎุฒุงู ูุงูุฏูุณ ุ ุชุญุณูุช ุงูุตูุฑุฉ ุงูุนุงูุฉ. <br><br>  ููุทุฉ ุดุงุดุฉ ููููุจุฑ (hotslab): <br><br><img src="https://habrastorage.org/webt/gc/zj/kt/gczjkt5r8yedhniu5afswdjqk2y.png"><br><br>  ูู ููุทุฉ ุงูุดุงุดุฉ ุ ุนูู ุงููุดุบู ุงูุฌุฏูุฏ 20 ุซุงููุฉ ุ smalloc - 16 ุซุงููุฉ ุ mslab_alloc - 27 ุซุงููุฉ ุ ุญุฐู ุงููุดุบู - 16 ุซุงููุฉ ุ smfree - 7 ุซูุงูู ุ mslab_free - 17 ุซุงููุฉ.  ูุฌููุน 103 ุซุงููุฉ ููุงุจู 161 ุซุงููุฉ. <br><br>  ุฌุฏูู ุงูููุงุณ: <br><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> woslab coldslab hotslab operator new 67s 32s 20s smalloc - 21s 16s mslab_alloc - 37s 27s operator delete 94s 24s 16s smfree - 8s 7s mslab_free - 21s 17s summary 161s 143s 103s</code> </pre><br>  ูู ุงูุญูุงุฉ ุงููุงูุนูุฉ ุ ูุฌุจ ุฃู ุชููู ุงููุชูุฌุฉ ุฃูุถู ุ ุญูุซ ุฅู ููุฒุนู ุงูุจูุงุทุงุช ูุง ูุญููู ูุดููุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ุงูุทูููุฉ ูุชุญุฑูุฑูุง ูุญุณุจ ุ ุจู ุฃูุถูุง ุชูููู ุงูุชุฌุฒุฆุฉ.  ุจุฏูู ุจูุงุทุฉ ุ ุจูุฑูุฑ ุงูููุช ุ ูุฌุจ ุฃู ูุชุจุงุทุฃ ุชุดุบูู ุงููุดุบู ุงูุฌุฏูุฏ ูุญุฐู ุงููุดุบู.  ูุน ุจูุงุทุฉ - ุณุชุจูู ุฏุงุฆูุง ูู ููุณ ุงููุณุชูู. <br><br>  ููุง ูููููุง ุฃู ูุฑู ุ ูุฅู ูุตููู ุงูุฃููุงุญ ูุญููู ุจูุฌุงุญ ูุดููุฉ ุชุฎุตูุต ุงูุฐุงูุฑุฉ ูููุงุฆูุงุช ุงููุณุชุฎุฏูุฉ ุจูุซุฑุฉ.  ุงูุชุจู ููู ุฅุฐุง ูุงูุช ูุณุฃูุฉ ุงูุฅูุดุงุก ุงููุชูุฑุฑ ูุฅุฒุงูุฉ ุงูุฃุดูุงุก ููุงุณุจุฉ ูู.  ููู ูุง ุชูุณู ุงููููุฏ ุงูุชู ููุฑุถูููุง ุนูู ุจููุฉ ุงูุชุทุจูู ุงูุฎุงุต ุจู!  ูุง ูููู ุจุจุณุงุทุฉ ูุถุน ูู ุงููุงุฆูุงุช ุงููุนูุฏุฉ ูู ุชูุฒูุน ุงูุจูุงุทุฉ.  ูู ุจุนุถ ุงูุฃุญูุงู ุนููู ุฃู ุชุชุฎูู ุนู ุงููุซูุฑ!  ุญุณููุง ุ ูููุง ูุงูุช ุจููุฉ ุชุทุจููู ุฃูุซุฑ ุชุนููุฏูุง ุ ูููุง ุชุนูู ุนููู ูู ูุซูุฑ ูู ุงูุฃุญูุงู ุฅุนุงุฏุฉ ุงููุงุฆู ุฅูู ุฐุงูุฑุฉ ุงูุชุฎุฒูู ุงููุคูุช ุงูุตุญูุญุฉ ูู ุญูุซ ุชุนุฏุฏ ุงูุนูููุงุช.  ูุฏ ูููู ุงูุฃูุฑ ุจุณูุทูุง ุนูุฏูุง ุชุนูุฏ ุนูู ุงูููุฑ ุฅูู ูุถุน ุจููุฉ ุงูุชุทุจูู ุ ูุน ูุฑุงุนุงุฉ ุงุณุชุฎุฏุงู ููุฎุตุตุงุช ุงูุจูุงุทุงุช ุ ููููู ุณูุคุฏู ุจุงูุชุฃููุฏ ุฅูู ุตุนูุจุงุช ุนูุฏูุง ุชูุฑุฑ ุฏูุฌูุง ูู ูุฑุญูุฉ ูุชุฃุฎุฑุฉ. <br><br><h3 style=";text-align:right;direction:rtl">  ุชุทุจูู </h3><br>  ุชุญูู ูู ุดูุฑุฉ ุงููุตุฏุฑ <a href="https://github.com/sonntex/slab-allocator" rel="nofollow">ููุง</a> ! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar477404/">https://habr.com/ru/post/ar477404/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar477390/index.html">ุชุฃุฎูุฑ ุดุจูุฉ ุงูุชุตุญูุญ ูู Kubernetes</a></li>
<li><a href="../ar477392/index.html">ูุชุญ ุงููููุฑูููู: ุงูุฎูููุฉ. ูุญู ูุฏุนู ุงููุชุญุฏุซูู</a></li>
<li><a href="../ar477396/index.html">ููููุฉ ุงูุชุณุฌูู ูู ุงูุฏูุฑุฉ ู ... ุงูุฐูุงุจ ุฅูู ุงูููุงูุฉ</a></li>
<li><a href="../ar477400/index.html">ุญูู ูููุฉ ูุฏูุฑ ุงูููุชุฌ: ููููุฉ ุชุญููู ุงููุซุงููุ</a></li>
<li><a href="../ar477402/index.html">ูุดุฑ ูููุฐุฌ ุงูุชุนูู ุงูุนููู Keras ูุชุทุจูู Python ุนูู ุงูููุจ</a></li>
<li><a href="../ar477406/index.html">ุงูุฏุนู ุงูููู ูุงูุฏุนู. ุจุญุซ ุฑุงุฆุน ุนู ุณูู ุงูุนูู ูุงูุฑูุงุชุจ. ูุง ุงูุฐู ุชุบูุฑ ูู 2 ุณููุงุชุ</a></li>
<li><a href="../ar477408/index.html">JavaFX ุชุนูููู: ุชุฎุทูุทุงุช ูุชูุฏูุฉ</a></li>
<li><a href="../ar477414/index.html">ูููุฏุณ ุจูุงูุงุช - ุงููููุฉ ุงูุฃูุซุฑ ุฌุงุฐุจูุฉ ูู ุงููุฑู ุงูุญุงุฏู ูุงูุนุดุฑูู</a></li>
<li><a href="../ar477416/index.html">ูุชู ูููู ุถุงุฑูุง ููุชุฌุฒุฆุฉ</a></li>
<li><a href="../ar477418/index.html">ุงูุงููุณุงุฑ ุซูุงุซู ุงูุฌูุงูุจ ูู ุซูุงุซ ุฎุทูุงุช</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>