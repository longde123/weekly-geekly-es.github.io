<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💉 ☺️ 👨🏼‍✈️ Kembangkan Ekstensi Chrome dengan Angular CLI 🕧 🍆 🤾🏼</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya telah mengembangkan ekstensi untuk Chrome untuk waktu yang lama dan selama ini saya telah beralih dari skrip pengguna Greasemonkey ke aplikasi An...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kembangkan Ekstensi Chrome dengan Angular CLI</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/458556/"> Saya telah mengembangkan ekstensi untuk Chrome untuk waktu yang lama dan selama ini saya telah beralih dari skrip pengguna Greasemonkey ke aplikasi Angular penuh di shell chrome-extension.  Tugas saya adalah saya akan menambal beberapa situs yang sudah berfungsi untuk mengubah fungsionalitasnya dan mengotomatiskan beberapa proses di situs ini.  Terkadang aplikasi saya tumbuh dalam skala besar dan menjadi sulit untuk mendukung ekstensi plain-js (ada banyak pengaturan dalam aplikasi, fungsi CRUD, dll.).  Dan kemudian Angular datang untuk menyelamatkan. <br><br>  Dalam artikel ini, saya akan memberi tahu Anda bagaimana saya berteman dengan <i>Chrome Extension</i> dan <i>Angular CLI</i> , dan mengatur proses pengembangan, serta kesulitan apa yang saya temui dan bagaimana menyelesaikannya. <a name="habracut"></a><br>  Buat folder baru dan inisialisasi aplikasi baru di dalamnya. <br><br><pre><code class="bash hljs">mkdir new-project <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> new-project ng new frontend --routing=<span class="hljs-literal"><span class="hljs-literal">true</span></span> --skipGit=<span class="hljs-literal"><span class="hljs-literal">true</span></span> --style=scss --skipTests=<span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br>  Pada tahap pengembangan, <i>Angular</i> menghasilkan file html dinamis di mana pengembangan berlangsung, dan ekstensi Chrome perlu diberi makan file html statis untuk melihat hasil pekerjaan.  Tentu saja, Anda dapat secara terpisah merakit proyek Angulyarovsk dan kemudian membangun versi build sebagai tambahan, tetapi akan lebih mudah jika ini terjadi secara otomatis. <br><br>  Setelah membuat aplikasi baru, buka folder frontend dan di file package.json di bagian skrip tambahkan skrip baru untuk membangun proyek kami <br><br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"developing"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build --watch --deploy-url /frontend/dist/frontend/ --base-href /frontend/dist/frontend/index.html?/"</span></span></code> </pre> <br>  Perhatikan <code>deploy-url</code> dan <code>base-href</code> . <br><br>  Kemudian, di root proyek, buat folder <i>ekstensi</i> lain dan buat file <i>extension.js</i> di dalamnya, yang akan menjadi skrip <i>latar belakang</i> untuk ekstensi kita.  Struktur proyek saat ini: <br><br><pre> <code class="markdown hljs">| new-project/ | | extension/ | | | extension.js | | frontend/ | | | ...</code> </pre><br>  Content <i>extension.js</i> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ANGULAR_HTML_URL = <span class="hljs-string"><span class="hljs-string">"../../frontend/dist/frontend/index.html"</span></span>; chrome.browserAction.onClicked.addListener(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ chrome.tabs.create({ <span class="hljs-attr"><span class="hljs-attr">url</span></span>: chrome.runtime.getURL(ANGULAR_HTML_URL) }); });</code> </pre> <br>  Ini akan menjadi <i>browserAction</i> , yang akan membuka tab baru dengan aplikasi bersudut kami, yang dalam bentuk rakitan akan disimpan di sepanjang jalur ini. <br><br><div class="spoiler">  <b class="spoiler_title">Tambahkan manifest.json ke proyek kami</b> <div class="spoiler_text"><pre> <code class="json hljs">{ <span class="hljs-attr"><span class="hljs-attr">"manifest_version"</span></span>: <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-attr"><span class="hljs-attr">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Simple Chrome Ext"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"Simple Chrome Extension as an example"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.00"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"author"</span></span>: <span class="hljs-string"><span class="hljs-string">"Bogdan"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"content_security_policy"</span></span>: <span class="hljs-string"><span class="hljs-string">"script-src 'self' 'unsafe-eval'; object-src 'self'"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"background"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"persistent"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"scripts"</span></span>: [<span class="hljs-string"><span class="hljs-string">"/extension/extension.js"</span></span>] }, <span class="hljs-attr"><span class="hljs-attr">"browser_action"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"default_title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Chrome ext"</span></span> } }</code> </pre> <br></div></div><br>  Sekarang kita dapat merakit proyek kita menjadi sebuah ekstensi.  Kami menggunakan <i>chrome: // extensions /</i> , <i>aktifkan</i> mode pengembang dan pilih <i>Unduh ekstensi yang belum dibuka</i> . <br><br><div class="spoiler">  <b class="spoiler_title">Hasil</b> <div class="spoiler_text"><img src="http://charmingdate.ru/aos/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202019-06-30%20%D0%B2%2022.23.39.png" alt="gambar"></div></div><br>  Kenyamanannya adalah kami memiliki pemuatan ulang yang hampir panas.  Kami meluncurkan <i>ng build</i> dengan flag <i>arloji</i> dan ketika kode berubah, proyek akan dibangun kembali dan file js akan diganti.  Artinya, pada halaman ekstensi, kita hanya perlu memuat ulang halaman dan semua pembaruan akan diambil.  Ini sangat mempercepat pengembangan add-on. <br><br>  Poin lain di mana saya memakan anjing adalah bahwa dalam konfigurasi routing: <br><br><pre> <code class="json hljs">{ useHash: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }</code> </pre> <br>  dan juga kami akan kembali di atas, <i>base-href</i> di build kami terdaftar sebagai <i>/frontend/dist/frontend/index.html?/</i> - perhatikan tanda tanya sebelum slash terakhir.  Faktanya adalah bahwa pada beberapa sistem, ketika Anda mengklik tautan dalam aplikasi Angular, semuanya macet tanpa tanda ini.  Rupanya, server web statis dari mesin chrome merasakan perubahan URL sebagai permintaan ke file lain (meskipun useHash: true) dan ketika memperbarui halaman itu menghasilkan kesalahan 404.  Hanya dalam kombinasi ini saya berhasil mencapai operasi yang stabil di semua sistem. <br><br>  Mari kita kembali ke <i>package.json dari</i> aplikasi kita dan menambahkan skrip lain <br><br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"prod"</span></span>: <span class="hljs-string"><span class="hljs-string">"ng build --sourceMap false --prod true --deploy-url /frontend/dist/frontend/ --base-href /frontend/dist/frontend/index.html?/"</span></span></code> </pre> <br>  Ini akan menjadi skrip untuk membangun aplikasi kami untuk versi produksi. <br><br>  Di Toko Web Chrome, arsip zip dengan ekstensi diposkan dan untuk menyederhanakan perakitan, saya membuat skrip untuk tujuan ini <br><br><div class="spoiler">  <b class="spoiler_title">update.sh</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash rm -rf ./prod-build mkdir -p prod-build/frontend cd frontend npm run prod cd .. cp -R ./frontend/dist ./prod-build/frontend cp -R ./extension ./prod-build cp ./manifest.json ./prod-build zip -r prod-build{.zip,} rm -rf ./prod-build</span></span></code> </pre></div></div><br>  Kode sumber dapat ditemukan di <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u="><b>sini</b></a> . <br><br>  Total: kami membuat kit pra-pengembangan untuk Ekstensi Chrome Sudut dengan perutean yang benar dan pembaruan / pembuatan aplikasi yang nyaman. <br><br>  PS: untuk menghilangkan path <i>/ frontend / dist / frontend / tersebut</i> , Anda dapat mengkonfigurasi lingkungan dan menentukan path dalam majelis produksi secara berbeda, tetapi ini bukan titik kunci. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id458556/">https://habr.com/ru/post/id458556/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id458536/index.html">Python + Pyside2 atau cukup "Kalkulator"</a></li>
<li><a href="../id458546/index.html">Hari Otomasi, atau bagaimana kami membangun lapisan autotest</a></li>
<li><a href="../id458548/index.html">Buat pustaka gaya Spring Data Repository Anda sendiri dengan Dynamic Proxy dan Spring IoC</a></li>
<li><a href="../id458550/index.html">Simbol GOST Library untuk DipTrace</a></li>
<li><a href="../id458552/index.html">Tentang membandingkan format penyimpanan di Hadoop: mari kita mulai dengan ORC</a></li>
<li><a href="../id458558/index.html">Presentasi dengan Magento Meetup Kharkiv - Video dan Presentasi</a></li>
<li><a href="../id458560/index.html">Pelatihan Cisco 200-125 CCNA v3.0. Hari 12. Advanced VLAN</a></li>
<li><a href="../id458564/index.html">Lubang-lubang dalam perjalanan untuk menjadi seorang programmer</a></li>
<li><a href="../id458566/index.html">Bagaimana kami menangkap desainer UX dengan umpan langsung?</a></li>
<li><a href="../id458568/index.html">Bagaimana kami mendapatkan gambar 3D pertama dari gereja Kristen tertua di Rusia</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>