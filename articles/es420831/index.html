<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üßìüèΩ üë®üèº‚Äçüíº üë®üèº‚Äç‚öïÔ∏è El dispositivo para la emisi√≥n de cookies "Cook 3000" üë≤üèª üõí üë®üèº‚Äç‚öïÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola a todos! Trabajo para una compa√±√≠a que desarrolla equipos para monitorear plataformas petroleras, granjas mineras, grupos electr√≥genos diesel y o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>El dispositivo para la emisi√≥n de cookies "Cook 3000"</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/wirenboard/blog/420831/"><img src="https://habrastorage.org/webt/kh/e9/2m/khe92mi1t6q68vhqpcgle2f50cw.jpeg"><br><br>  Hola a todos!  Trabajo para una compa√±√≠a que desarrolla equipos para monitorear plataformas petroleras, granjas mineras, grupos electr√≥genos diesel y otras cosas aburridas.  Pero esta vez automatizamos algo m√°s.  Entonces, conozca: "Cook 3000" - el aparato para emitir cookies a los mejores empleados. <br><br>  El dispositivo es una construcci√≥n hecha de PVC y algunas partes: <br>  Una espiral con una unidad (sirve para suministrar productos), una pantalla, un aceptador de monedas y el cerebro de toda la estructura: controlador Wiren Board 6. <br><a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/td/5c/ss/td5csslpot3ey_uuzx0yvirjd90.gif" width="720"><br><br> <a href=""><img src="https://habrastorage.org/webt/cc/39/cu/cc39cuim2tu0o8nine6dmo9r0ok.jpeg" width="360" alt="Haga clic para ampliar la imagen."></a> <a href=""><img src="https://habrastorage.org/webt/zc/ll/vn/zcllvnbavuzknmcx-vkecvjlp9m.jpeg" width="360" alt="Haga clic para ampliar la imagen."></a> <br> <a href=""><img src="https://habrastorage.org/webt/mw/3p/w0/mw3pw0garxwkyjp8orka5ymrcqo.jpeg" width="360" alt="Haga clic para ampliar la imagen."></a> <a href=""><img src="https://habrastorage.org/webt/pb/tc/kx/pbtckxlynifmqbzfun4heex-4m0.jpeg" width="360" alt="Haga clic para ampliar la imagen."></a> <br><br><h2>  Pantalla <br></h2><br>  Como pantalla para <abbr title="Wiren board 6">WB6,</abbr> uso el m√≥dulo de pantalla Nextion (NEXTION MEJORADA NX4832K035). <br><img src="https://habrastorage.org/webt/hw/6j/9d/hw6j9dvuwg6wqxkr9kwp3cp9upk.jpeg" width="450"><br>  El m√≥dulo est√° equipado con un procesador AVR.  Tiene una pantalla TFT de 3.5 '' con una resoluci√≥n de 480 * 320, 32Mb de memoria interna, 1024 bytes de EEPROM, 8192 bytes de RAM. <br><br>  Este dispositivo almacena y muestra gr√°ficos, anima elementos de la interfaz y procesa clics.  Solo los c√≥digos de eventos se transmiten al controlador a trav√©s de UART, lo que facilita la configuraci√≥n de interfaces de complejidad variable. <br><br>  Para cargar las configuraciones y gr√°ficos necesarios en el m√≥dulo de pantalla, se proporciona un editor visual de las interfaces del Editor Nextion.  Puede descargarlo en el sitio web oficial de itead. <br><br> <a href=""><img src="https://habrastorage.org/webt/x6/u_/eb/x6u_ebycvwunndp6nshvmcqizki.png" width="450" alt="Haga clic para ampliar la imagen."></a> <br><br>  Al crear un nuevo proyecto, debe especificar el modelo, la posici√≥n de la pantalla y la codificaci√≥n de caracteres.  Para la visualizaci√≥n correcta del alfabeto cir√≠lico, seleccione iso-8859-5. <br><br> <a href=""><img src="https://habrastorage.org/webt/nh/sw/m1/nhswm1fhm3dfn99dll_kzqsr4iq.png" width="360" alt="Haga clic para ampliar la imagen."></a> <a href=""><img src="https://habrastorage.org/webt/qt/fe/q-/qtfeq-bai9ghnfgimb4ucysox8y.png" width="360" alt="Haga clic para ampliar la imagen."></a> <br><br>  A la izquierda hay una barra de herramientas.  Aqu√≠ puede encontrar los elementos m√°s necesarios para crear una interfaz. <br><br> <a href=""><img src="https://habrastorage.org/webt/7u/ef/da/7uefdanvxiu9o4ebff_cxuedhia.png" width="150" alt="Haga clic para ampliar la imagen." align="left"></a> <br><br>  Hagamos clic en el bot√≥n.  Aparecer√° un bot√≥n condicional en el cuadro de edici√≥n.  Est√≠ralo, edita el texto y el t√≠tulo.  Para mostrar texto, debe agregar una fuente.  Utilizaremos la herramienta Font Creator en la pesta√±a de herramientas.  En el campo "Evento", debe escribir el c√≥digo que se reproducir√° en los eventos. <br><br>  Por ejemplo, si escribe imprimir "bot√≥n presionado \ r" en la pesta√±a "Evento de prensa t√°ctil", luego, cuando hace clic en el bot√≥n, el dispositivo enviar√° a UART: bot√≥n presionado y el car√°cter de salto de l√≠nea. <br><br> <a href=""><img src="https://habrastorage.org/webt/zm/te/k_/zmtek_kvf6e-mb8cxxoddkt6a6m.png" width="350" alt="Haga clic para ampliar la imagen."></a> <br><br>  Se pueden encontrar descripciones y ejemplos de c√≥digos en la documentaci√≥n de la pantalla.  Para la depuraci√≥n, puede usar la funci√≥n Depuraci√≥n.  Esta ventana le permite probar todas las funciones del firmware antes de completar la pantalla. <br><br> <a href=""><img src="https://habrastorage.org/webt/aa/gj/6a/aagj6ajoz26f2oiswoxpdxr0_ce.png" width="550" alt="Haga clic para ampliar la imagen."></a> <br><br>  Si todo est√° en orden, puede conectar la pantalla a la computadora a trav√©s del adaptador USB / UART y completar el firmware haciendo clic en el bot√≥n "Cargar". <br><br> <a href=""><img src="https://habrastorage.org/webt/oi/lf/mk/oilfmkojzwprppfkk5yza0lrpk4.png" width="150" alt="Haga clic para ampliar la imagen." align="left"></a> <br>  Pero, ¬øc√≥mo nos hacemos amigos con WB6? <br>  Puede conectar la pantalla a trav√©s del mismo adaptador USB \ UART a uno de los puertos USB del controlador o directamente a una de las ranuras de expansi√≥n en la placa del controlador. <br>  Estamos interesados ‚Äã‚Äãen los pines TX, RX, 5V y GND. <br><br> <a href=""><img src="https://habrastorage.org/webt/jy/zz/tm/jyzztmnldc_my-wqwjvo4tgwavk.jpeg" width="450" alt="Haga clic para ampliar la imagen."></a> <br><br>  Despu√©s de conectar la pantalla al controlador, recibiremos los datos del evento directamente en el puerto serie. <br><br>  Para responder de alguna manera a estos eventos, escribamos un peque√±o script que enviar√° todos los datos sobre los eventos al tema MQTT.  Primero, cree un archivo en la carpeta ra√≠z del controlador y ll√°melo serial.sh <br><br><div class="spoiler">  <b class="spoiler_title">serial.sh</b> <div class="spoiler_text"><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash #  /dev/ttyMOD3 stty -F /dev/ttyMOD3 ospeed 9600 ispeed 9600 raw clocal -parenb -echo cs8 CR="$(echo -e '\r')" exec 4&lt;&gt; /dev/ttyMOD3 cat &lt;&amp;4 | while : do IFS="$CR" read -r line case "$line" in quit*) break ;; *) if [[ -n "$line" ]]; then echo $line #    MQTT mosquitto_pub -t /devices/screen/controls/raw/meta/type -r -m text mosquitto_pub -t /devices/screen/controls/raw/on -r -m "$line" fi ;; esac done</span></span></code> </pre> <br></div></div><br>  Si hizo todo correctamente, luego de ejecutar el script cuando hace clic en el bot√≥n, en la interfaz web del controlador ver√° un tema con los datos que env√≠a el m√≥dulo de pantalla. <br><br>  En los controladores de la Junta Wiren, se proporciona un sistema <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">de reglas</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">wb-rules</a> .  Las reglas se crean a trav√©s de una interfaz web y se escriben en un lenguaje simple similar a Javascript. <br><br>  En la interfaz web de WB6, vaya a la pesta√±a Scripts y cree un nuevo script haciendo clic en el bot√≥n "Nuevo ...", as√≠gnele el nombre "screen_button.js" u otra cosa.  A continuaci√≥n, escribiremos una regla: al cambiar la pantalla / tema sin procesar (es a √©l a quien le enviamos datos desde la pantalla), se producir√°n ciertas acciones.  En este caso, cuando haga clic en la pantalla, veremos el mensaje "Bot√≥n presionado" en la ventana de depuraci√≥n de la interfaz web: <br><br><div class="spoiler">  <b class="spoiler_title">screen_button.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs">defineVirtualDevice(<span class="hljs-string"><span class="hljs-string">"screen"</span></span>, { <span class="hljs-comment"><span class="hljs-comment">//    title: "nextion screen", cells: { raw: { type: "text", value: "" }, } }); defineRule("screen_button", { whenChanged: "screen/raw", then: function(newValue, devName, cellName) { log(newValue); if (newValue == "button pressed") { //     ¬´button pressed¬ª log(" "); //     . } else if (newValue == "button released") { log("  "); } dev["screen"]["raw"] = ""; // . } });</span></span></code> </pre><br></div></div><br>  Genial  Para procesar los clics en la pantalla, descubrimos.  Ahora hablemos sobre c√≥mo controlamos la pantalla con WB6.  Por ejemplo, cambie el texto del bot√≥n.  La pantalla acepta comandos UART.  Se puede encontrar una lista y una descripci√≥n de los comandos en la documentaci√≥n de la pantalla. <br><br>  Para determinar el final del comando, la pantalla espera tres caracteres especiales (\ xff \ xff \ xff).  Para simplificar la tarea en el futuro: cree un script en la carpeta ra√≠z bash.  Llam√©moslo text.sh: <br><br><div class="spoiler">  <b class="spoiler_title">text.sh</b> <div class="spoiler_text"><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash TEXT=""; UNIT=""; while [ -n "$1" ] do case "$1" in -a) UNIT=$2;; -b) TEXT=$2;; esac shift done echo -en "$UNIT.txt=\"$TEXT\"\xff\xff\xff" &gt; /dev/ttyMOD3 exit 0</span></span></code> </pre><br></div></div><br><br>  Ahora, para cambiar el texto del bot√≥n, solo necesitamos llamar al script con los argumentos: <br> <code>bash /mnt/data/root/text.sh -a b0 -b 'Some Text'</code> <br>  Donde b0 es el nombre del bot√≥n en la pantalla y Some Text es el texto deseado. <br><br>  Un ejemplo del uso del motor de reglas WB6: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> txt1 = <span class="hljs-string"><span class="hljs-string">"some text"</span></span>; runShellCommand(<span class="hljs-string"><span class="hljs-string">"bash /mnt/data/root/text.sh -a b0 -b '"</span></span> + txt1+ <span class="hljs-string"><span class="hljs-string">"'"</span></span>);</code> </pre><br><br>  Del mismo modo, puede cambiar la p√°gina que se muestra actualmente en la pantalla, el texto de varios elementos, variables y otros par√°metros.  No pintar√© aqu√≠ toda la funcionalidad del m√≥dulo de pantalla.  La informaci√≥n ya escrita arriba es bastante suficiente para nuestro proyecto. <br><br><h2>  Aceptador de monedas </h2><br>  Como aceptador de monedas, utilizo la versi√≥n china, que se encuentra en las extensiones de Aliexpress por 400 rublos. <br><br>  Con la conexi√≥n, todo es simple.  + 12v y una salida de pulso para conectarse al m√≥dulo de extensi√≥n de contacto seco <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WBE2-DI-DR-3</a> .  Adem√°s, para determinar la moneda, solo necesitamos contar los impulsos.  Para hacer esto, cree un nuevo script en el motor de reglas: <br><br><div class="spoiler">  <b class="spoiler_title">money.js</b> <div class="spoiler_text"><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timeout_ms = <span class="hljs-number"><span class="hljs-number">1</span></span> * <span class="hljs-number"><span class="hljs-number">200</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timer_id = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timerTime = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timerLast = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> countMoney = <span class="hljs-number"><span class="hljs-number">0</span></span>; defineRule(<span class="hljs-string"><span class="hljs-string">"money"</span></span>, { <span class="hljs-attr"><span class="hljs-attr">whenChanged</span></span>: <span class="hljs-string"><span class="hljs-string">"wb-gpio/MOD1_IN2"</span></span>, <span class="hljs-attr"><span class="hljs-attr">then</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">newValue, devName, cellName</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (newValue) { timerLast = <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>.now() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((timerLast - timerTime) &gt;= <span class="hljs-number"><span class="hljs-number">500</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// ? timerTime = Date.now(); countMoney = 1; } else { timerTime = Date.now(); //     countMoney++; } if (timer_id) { clearTimeout(timer_id); } timer_id = setTimeout(function() { //       if (countMoney == 5) { log("10 ") } else if (countMoney == 4) { log("5 ") } else if (countMoney == 3) { log("2 ") } else if (countMoney == 2) { log("1 ") } timer_id = null; }, timeout_ms); } } });</span></span></code> </pre><br></div></div><br>  Regla bastante simple.  Quiz√°s no sea el m√°s preciso. <br><br><h2>  Bitrix24 </h2><br>  Ahora, probablemente el m√°s interesante.  Tratemos de descubrir c√≥mo traducir la frase "Bien hecho.  Toma una galleta de un estante.  Nuestra empresa utiliza el sistema Bitrix24 como CRM.  La idea es que por cada tarea completada (Tarea) en el bitrix, el empleado reciba algunos puntos electr√≥nicos.  Estos mismos puntos se pueden usar como moneda para nuestro dispositivo.  Veamos c√≥mo conectarse a Bitrix24 y monitorear el √©xito de los empleados. <br><br> <a href=""><img src="https://habrastorage.org/webt/m3/tt/yk/m3ttykeum6-qm1pjvbqxa2golh0.png" width="350" alt="Haga clic para ampliar la imagen."></a> <br><br>  Utilizaremos bitrix24-python-sdk como base. <br>  Instale el SDK en el controlador con el comando <br> <code>pip install bitrix24-python-sdk</code> <br> <br>  A continuaci√≥n, cree un script de Python en la carpeta ra√≠z, ll√°melo bitrix.py: <br><br><div class="spoiler">  <b class="spoiler_title">bitrix.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#!/usr/bin/python3 import pprint from bitrix24 import bitrix24 import sys import subprocess b24_webhook_key = 'some_key' #   ,    . b24_webhook_user = 1 # ID  -    . b24_domain = 'some_domain' #  . page = 1 user_id = [16, 10, 6, 55, 8, 14, 67, 20] #  ,     ord_status = 5 # 5 -   order_list = 0 total_orders = 0 bx24 = bitrix24.Bitrix24(b24_domain, webhook_key=b24_webhook_key, webhook_user=b24_webhook_user) def get_order_list_len(_user_id): result_ = bx24.call( 'task.item.list', {'ORDER': {'DEADLINE': 'desc'}}, {'FILTER': {'RESPONSIBLE_ID': _user_id,'REAL_STATUS': ord_status}}, {'PARAMS': {'NAV_PARAMS': {'nPageSize': 50, 'iNumPage': page}}} ) if result_: return (len(result_['result'])) for user in user_id: while True: order_list = get_order_list_len(user) total_orders = total_orders + order_list page = page + 1 if(order_list &lt; 50): subprocess.call("mosquitto_pub -t /devices/%s/controls/orders_finished/on -r -m %s" % (user, total_orders), shell=True) #    MQTT. page = 1 total_orders = 0 break</span></span></code> </pre><br></div></div><br>  Este script solicita todas las tareas completadas de una lista dada de usuarios, las considera y env√≠a el n√∫mero a los temas en mqtt.  A continuaci√≥n, solo podemos comparar la cantidad obtenida con los valores anteriores y, si los datos nuevos son m√°s, agregar puntos al empleado por el trabajo realizado. <br><br><h2>  Bluetooth </h2><br>  Para escanear dispositivos BLE utilizo Bluez.  El programa ya est√° instalado en el controlador.  Para escanear dispositivos flexibles, solo ingrese algunos comandos en la consola: <br><br><pre> <code class="hljs pgsql">hciconfig hci0 up hcitool lescan <span class="hljs-comment"><span class="hljs-comment">--duplicates</span></span></code> </pre> <br>  Sin embargo, esto no es suficiente para nosotros.  Es recomendable ver el nivel de se√±al.  Para hacer esto, instale la utilidad hcidump adicional: <br><br><pre> <code class="hljs powershell">apt<span class="hljs-literal"><span class="hljs-literal">-get</span></span> install bluez<span class="hljs-literal"><span class="hljs-literal">-hcidump</span></span></code> </pre> <br>  Y complementa nuestro equipo: <br><br><pre> <code class="hljs powershell">hciconfig hci0 up hcitool lescan -<span class="hljs-literal"><span class="hljs-literal">-duplicates</span></span> | hcidump <span class="hljs-literal"><span class="hljs-literal">-a</span></span> | grep <span class="hljs-literal"><span class="hljs-literal">-E</span></span> <span class="hljs-string"><span class="hljs-string">'bdaddr|RSSI'</span></span></code> </pre> <br>  En la salida obtenemos direcciones MAC y dispositivos RSSI bluetooth (ble) cercanos. <br><br> <a href=""><img src="https://habrastorage.org/webt/eg/st/ar/egstarnarzrsym0nfutrfwhawhc.png" width="650" alt="Haga clic para ampliar la imagen."></a> <br><br>  Estas dos l√≠neas pueden estar bellamente envueltas en un script bash y la salida enviada a MQTT. <br>  La segunda <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">forma es el</a> script <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">aioblescan</a> <br>  Requiere Python 3 para funcionar, preferiblemente 3.5.  La ventaja de este script es que puede monitorear direcciones MAC espec√≠ficas, y no todos los relojes inteligentes y tel√©fonos inteligentes pasan por la ventana.  La salida del script tambi√©n se redirige a MQTT, para la conveniencia de trabajar con el motor de reglas. <br><br> <a href=""><img src="https://habrastorage.org/webt/co/bk/cl/cobkcltejo3kbwvhpk-rduxlgxk.png" width="400" alt="Haga clic para ampliar la imagen."></a> <br><br>  Ahora sabemos c√≥mo interactuar con WB6 usando el m√≥dulo de pantalla, podemos contar monedas, monitorear el √©xito de los empleados en Bitrix, escanear dispositivos flexibles y su nivel de se√±al.  Queda por recopilar esto en un mont√≥n y prescribir alg√∫n tipo de l√≥gica.  No pintar√© todos los guiones para este proyecto.  Todo estar√° disponible en el enlace en el dominio p√∫blico.  Quiz√°s uno de ustedes encuentre una aplicaci√≥n m√°s √∫til e inteligente para esto. <br><br><h2>  Vivienda </h2><br>  El cuerpo est√° hecho de PVC espumado de 10 mm.  Tal pl√°stico se vende en l√°minas.  Moderadamente suave  Puede cortar con una sierra para metales o con un cuchillo de oficina regular en una regla. <br><br> <a href=""><img src="https://habrastorage.org/webt/jx/nc/7e/jxnc7ef0lwmeow3j4fhlyz4--gs.jpeg" width="400" alt="Haga clic para ampliar la imagen."></a> <br><br>  Como cierre, se utiliz√≥ un juego de piezas met√°licas para ni√±os "Constructor" y tornillos cortos autorroscantes.  En este kit, se necesitaba casi todo para armar la caja. <br><br> <a href=""><img src="https://habrastorage.org/webt/h0/5m/jl/h05mjlqrtr82bk4krmbjkeyetzq.jpeg" width="400" alt="Haga clic para ampliar la imagen."></a> <br><br><h2>  Conducir </h2><br>  La espiral y el disco se compraron en la aplicaci√≥n B \ U de la tienda en l√≠nea.  piezas para m√°quinas expendedoras.  Alimentado por una fuente de alimentaci√≥n de 24v.  Se conecta a trav√©s del rel√© del m√≥dulo de expansi√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">WBE2-DO-R6C-1</a> . <br><br> <a href=""><img src="https://habrastorage.org/webt/es/fa/ar/esfaaryqjf8rslpblwesr3fcrgm.png" width="200" alt="Haga clic para ampliar la imagen."></a> <a href=""><img src="https://habrastorage.org/webt/be/oa/kt/beoaktz2glv7ksdvod0n4ehkn5e.png" width="200" alt="Haga clic para ampliar la imagen."></a> <a href=""><img src="https://habrastorage.org/webt/v7/bn/0p/v7bn0pxipe6w-bi328ugegtuh3e.png" width="200" alt="Haga clic para ampliar la imagen."></a> <br><br><h2>  Funcional </h2><br>  Funcionalmente similar a una m√°quina expendedora normal.  Regala cookies por dinero y no solo. <br><img src="https://habrastorage.org/webt/oy/kw/vh/oykwvhvrnx0sscx1kktd6fhcej8.gif"><br><br>  Cuando se inicia el dispositivo, la pantalla muestra una pantalla de bienvenida con un logotipo, luego se voltea a la pantalla principal, donde se nos ofrece comprar cookies o jugar un juego. <br><br>  El juego para el usuario es gratuito, pero puede establecer un peque√±o precio para la motivaci√≥n.  Las reglas son simples.  El jugador se ofrece para resolver tres problemas simples.  Si da tres respuestas correctas, recibe un premio en forma de cookies.  Quiz√°s esto es todo lo que necesita saber sobre este art√≠culo.  Volvamos al men√∫ principal y haga clic en "Comprar cookies". <br><br>  A continuaci√≥n, el sistema le pedir√° que seleccione un m√©todo de pago.  Al elegir el m√©todo de pago "Por dinero", aparece una ventana en la pantalla con el precio y la cantidad pagada, que aumenta cuando deposita dinero en el aceptador de monedas. <br><br>  Tan pronto como la cantidad sea suficiente para realizar una compra, el dispositivo cerrar√° autom√°ticamente esta ventana y entregar√° los productos. <br><br>  Pero, como dije antes, tambi√©n se proporciona otra moneda: estos son puntos recibidos por el √©xito de los empleados en el sistema Bitrix24.  Si un empleado cierra una tarea asignada a √©l, se le otorgan puntos.  Adem√°s, se pueden otorgar puntos al jefe para obtener resultados particularmente buenos. <br><br><img src="https://habrastorage.org/webt/cm/ng/ox/cmngoxpzdzbmt3hxh9xc9l9whac.png" width="360" alt="Haga clic para ampliar la imagen."><img src="https://habrastorage.org/webt/p6/bw/yr/p6bwyraqciiu2v0tu371qypzfxq.png" width="360" alt="Haga clic para ampliar la imagen."><br><img src="https://habrastorage.org/webt/kk/df/7d/kkdf7dnz548knhk5p17_21zj6nu.png" width="360" alt="Haga clic para ampliar la imagen."><img src="https://habrastorage.org/webt/wg/9w/cl/wg9wcltq4yk9ogjh-jik8kt0ogc.png" width="360" alt="Haga clic para ampliar la imagen."><br><br>  Para pagar los puntos, el empleado debe seleccionar el elemento "Comprar por puntos". Luego, el dispositivo intentar√° determinar qui√©n est√° parado frente a √©l.  Para hacer esto, escanea los dispositivos Bluetooth a su alrededor y si ve la direcci√≥n MAC del dispositivo que pertenece al empleado e ingresa a la base de datos, as√≠ como el nivel de se√±al es lo suficientemente potente como para asumir que est√° parado cerca, los datos sobre el estado de la cuenta del empleado aparecer√°n en la pantalla, su nombre y oferta para pagar cookies con puntos. <br><br>  Si el sistema no pudo determinar un solo dispositivo familiar, emitir√° una advertencia y le ofrecer√° seleccionar su nombre de la lista y luego ingresar su c√≥digo PIN. <br><br>  En el caso de una entrada correcta, se abre la misma ventana con datos sobre el estado de la cuenta de usuario y el costo del producto.  Cuando se confirma una compra, la cantidad requerida de puntos se debita de la cuenta del usuario y el dispositivo emite las mercanc√≠as. <br><br>  Eso es todo  Este proyecto fue creado exclusivamente con fines educativos y para mostrar que las aplicaciones del controlador Wiren Board est√°n limitadas solo por la imaginaci√≥n.  Todos los archivos y scripts se pueden encontrar en el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">enlace</a> . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es420831/">https://habr.com/ru/post/es420831/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es420819/index.html">Las 10 mejores herramientas de Python para aprendizaje autom√°tico y ciencia de datos</a></li>
<li><a href="../es420821/index.html">Regla 10: 1 en programaci√≥n y escritura</a></li>
<li><a href="../es420825/index.html">Hoy ser√° el primer partido entre los profesionales de OpenAI y Dota 2 (la gente gan√≥). Entendemos c√≥mo funciona el bot</a></li>
<li><a href="../es420827/index.html">Cree un proyecto maven simple utilizando Java EE + WildFly10 + JPA (Hibernate) + Postgresql + EJB + IntelliJ IDEA</a></li>
<li><a href="../es420829/index.html">Sistema de trabajo. Resumen desde el otro lado</a></li>
<li><a href="../es420833/index.html">Errores importantes de monetizaci√≥n de aplicaciones [y c√≥mo solucionarlos]</a></li>
<li><a href="../es420837/index.html">Prueba de matrices RAID de software para dispositivos NVMe utilizando la metodolog√≠a SNIA</a></li>
<li><a href="../es420841/index.html">Revisi√≥n prehospitalaria o "¬°Hola, Swagger! ¬øD√≥nde est√°n mis errores?</a></li>
<li><a href="../es420843/index.html">7 de septiembre, Ekaterimburgo: una reuni√≥n para desarrolladores de .NET</a></li>
<li><a href="../es420845/index.html">La domesticaci√≥n del obstinado con el uso de una muleta: el orificio del adaptador Wi-Fi WF2190 (Realtek8812AU Wireless LAN 802.11ac USB)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>