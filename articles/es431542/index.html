<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üö∏ üéÆ üë∏üèΩ Desarrollo efectivo y mantenimiento de roles Ansible üìì ü§¨ üéôÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ansible es un sistema que resuelve varias tareas de automatizaci√≥n, incluyendo proyectos de configuraci√≥n, respaldo y despliegue. Es agradable usar el...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Desarrollo efectivo y mantenimiento de roles Ansible</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/oleg-bunin/blog/431542/">  Ansible es un sistema que resuelve varias tareas de automatizaci√≥n, incluyendo proyectos de configuraci√≥n, respaldo y despliegue.  Es agradable usar el sistema para escribir scripts de automatizaci√≥n desde un entorno simple a un proyecto grande.  En los guiones, los libros de jugadas juegan un papel importante y los libros de jugadas estructurados juegan papeles. <br><br>  <b>Ansible no es una p√≠ldora m√°gica</b> , y solo ayuda al principio.  Cuando un proyecto crece, se hace dif√≠cil mantener un n√∫mero ampliado de roles.  El mecanismo de entrega continua de roles ayuda a resolver el problema. <br><br>  Sobre esto, la decodificaci√≥n del informe de <b>Alexander Kharkevich</b> en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">DevOps Conf Russia</a> .  En el informe: desarrollo de roles Ansible a trav√©s de CI, un mecanismo para desarrollar roles p√∫blicos y roles p√∫blicos con pruebas de ejecuci√≥n en una infraestructura privada.  Y no hay conclusi√≥n en el informe. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/IzJsBUPXfkE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  <strong>Sobre el orador</strong> : Alexander Kharkevich ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">kharkevich</a> ) ingeniero de sistemas senior en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">EPAM Systems</a> . <br><br>  Comencemos con una descripci√≥n general r√°pida. <br><br><h2>  Sobre Ansible </h2><br>  Ansible es un sistema de gesti√≥n de configuraci√≥n.  Est√° escrito en Python, creado por Junja, y YAML se usa como DSL.  Administrado a trav√©s de Ansible Tower - WebUI para administrar y monitorear el rendimiento del sistema. <br><br>  Ansible apareci√≥ en 2012, despu√©s de 3 a√±os, Red Hat compr√≥ todo el proyecto, y dos a√±os m√°s tarde present√≥ AWX - Project Open Source versi√≥n de Ansible Tower. <br><br><h3>  Instalaci√≥n <br></h3><br>  Para usar Ansible, debes hacer dos cosas simples. <br><br>  En la primera etapa, compile un archivo de inventario en caso de una infraestructura est√°tica. <br><br><img src="https://habrastorage.org/webt/aq/je/io/aqjeioemtokyygau_kxfiil-zt8.png"><br><br>  El segundo es escribir un Playbook que llevar√° el sistema al estado esperado. <br><br><img src="https://habrastorage.org/webt/ul/hs/cy/ulhscyxyzzl9198e7lqq_ykm7sm.png"><br><br>  A menudo tenemos un deseo irresistible de escribir automatizaci√≥n, que puede reutilizarse nuevamente.  La automatizaci√≥n es un buen deseo, y a los muchachos de Ansible se les ocurri√≥ un concepto genial: el papel. <br><br><h3>  Papel <br></h3><br>  Esta es una entidad estructurada que llevar√° el sistema a su estado esperado con la capacidad de reutilizar la automatizaci√≥n. <br><br><img src="https://habrastorage.org/webt/gj/sx/ra/gjsxrakzsho--s_ireyx8_isiqc.png"><br><br>  Por ejemplo, podemos escribir un rol para Oracle Java: tomar un libro de jugadas, poner un rol y aplicarlo al sistema de destino.  La salida tendr√° Java instalado. <br><br><img src="https://habrastorage.org/webt/tz/9k/us/tz9kuse6fl9sljuokqkmmljbgd4.png"><br><br><h3>  C√≥mo imaginamos trabajar con roles <br></h3><br>  Dado que Ansible tiene una funci√≥n tan maravillosa como los roles, pensamos que ahora tomar√≠amos y escribir√≠amos muchos, muchos roles para todas las ocasiones, perder el tiempo y reutilizar para reducir la cantidad de trabajo. <br><img src="https://habrastorage.org/webt/va/vb/1v/vavb1vsgfwficbv2gop8l_hepoe.png"><br><br>  Pensamos que escribir√≠amos papeles hermosos e inteligentes ... <br><br><img src="https://habrastorage.org/webt/rh/hn/sb/rhhnsb_hqwfb-fg3rcdonuzoaqq.png"><br><br>  Pero la vida result√≥ ser m√°s complicada. <br><br><h3>  Al final result√≥ que, en realidad <br></h3><br>  Cuando m√°s de una persona trabaja en escribir un papel o en mejorarlo, todos escriben en un lugar y surgen sorpresas desagradables: el papel se comporta de manera diferente a lo que el autor originalmente pretend√≠a. <br><br>  Es bueno cuando se aplica hasta el final, pero esto no siempre sucede.  A veces, un rol se realiza con √©xito, pero en el sistema de destino esto no afecta en absoluto como se quer√≠a originalmente. <br><img src="https://habrastorage.org/webt/am/nb/3p/amnb3pp-ggmxzah5glc96ih-npk.png"><br><br>  Como resultado, surgen construcciones terribles, intentos de transferir bash a Ansible y enviar todo esto bajo la salsa de administraci√≥n de configuraci√≥n.  Nos encontramos con este fen√≥meno y est√°bamos tristes. <br><br><img src="https://habrastorage.org/webt/-s/j0/zl/-sj0zlcvwj2-hrx2oc57cobvefs.png"><br><br>  Pensando, descubrimos que en nuestra gesti√≥n de configuraci√≥n hay alg√∫n tipo de c√≥digo, lo que significa que las pr√°cticas que se aplican a la gesti√≥n de c√≥digo en el Ciclo de vida del desarrollo de sistemas tambi√©n son aplicables en Ansible. <br><br><ul><li>  Recoge las mejores pr√°cticas. </li><li>  Aplicar an√°lisis est√°tico, pelusa. </li><li>  A prueba. </li><li>  Para overclockear, para entrar en la gesti√≥n de versiones. </li></ul><br>  Decidimos implementar la pr√°ctica en casa e inmediatamente fuimos a buscar las herramientas adecuadas. <br><br><h3>  Las herramientas </h3><br>  Desde el punto de vista de los sistemas de control de versiones y la integraci√≥n continua, hay docenas de soluciones disponibles y un zool√≥gico de pruebas ramificado. <br><br><img src="https://habrastorage.org/webt/xf/u4/2j/xfu42jvysu1pqqzfvext2fdrtxe.png"><br><br>  Desde el punto de vista de la administraci√≥n de versiones en Ansible, no hay tantas soluciones: etiquetar en Git o etiquetar en Git y cargar en Galaxy. <br><br>  Hay muchos enfoques para probar herramientas, cada uno usando lo que les gusta.  Soluciones populares que utilizan KitchenCI, InSpec, Serverspec. <br><br>  Nuestra alma no minti√≥ para tomar Ansible escrito en Python y mezclar herramientas del mundo Ruby.  Por lo tanto, despu√©s de haber desechado todo lo que no es nativo del mundo de Python, obtuvimos la siguiente imagen. <br><br><img src="https://habrastorage.org/webt/xm/qp/1a/xmqp1afvaqz-cggr3as5_w6dzpq.png"><br><br>  Utilizamos: <br><br><ul><li>  Para la gesti√≥n de la configuraci√≥n: GitHub y GitLab.  GitLab est√° mirando directamente en GitHub.  Por qu√© lo hice, lo dir√© m√°s tarde. </li><li>  Para CI, tomamos Travis para la parte p√∫blica y GitLab Runner para la parte privada. </li><li>  Prueba de mol√©cula. </li><li>  Inicie en GitHub y agregue a Ansible Galaxy. </li></ul><br>  Nuestro ciclo de desarrollo con estas herramientas se ha vuelto m√°s divertido. <br><img src="https://habrastorage.org/webt/ho/o0/un/hoo0unaafdbv6-hp46qvbkt3hyi.png"><br><br><h2>  Mol√©cula <br></h2><br>  Esta herramienta ayuda a probar completamente el papel ansible.  Para hacer esto, tiene todo: <br><br><ul><li>  Integraci√≥n con YAML lint y Ansible lint para verificar los roles para el cumplimiento de nuestros requisitos. </li><li>  Infraestructura de prueba para ejecutar pruebas funcionales. </li><li>  Los controladores de Molecule es donde Molecule est√° implementando nuestro banco de pruebas.  Todo es compatible: Azure, Delegated, Docker, EC2, GCE, LXC, LXD, Openstack, Vagrant. </li><li>  Todav√≠a hay algo √∫til y simple: la delegaci√≥n.  Esto significa que Molecule no es responsable de implementar el banco de pruebas y el desarrollador debe escribir un Playbook para elevar el banco de pruebas.  Si tiene una nube s√∫per privada, delegue la creaci√≥n y eliminaci√≥n de m√°quinas de prueba, y la propia Mol√©cula agregar√° todo dentro. </li></ul><br><img src="https://habrastorage.org/webt/l6/b0/ke/l6b0ke6b7sthgz-xxbuqgoqzvlw.png"><br><br><h3>  Matriz de prueba <br></h3><br>  Considere la matriz de prueba en pasos.  Hay 11 pasos en total, pero ser√© breve. <br><br><h4>  No. 1. pelusa <br></h4><br>  Corren pelusa YAML y pelusa Ansible, y encuentran algo. <br><br><img src="https://habrastorage.org/webt/g_/e6/hx/g_e6hxlk44ca411fabcnbamtkmy.png"><br><br>  En el ejemplo anterior, lint jura que el shell no solo debe llamarse en Ansible, sino que debe repararse y vincularse a algo. <br><br><h4>  No. 2. Destruye </h4><br>  La mol√©cula se deshace de todo lo que queda despu√©s de las pruebas anteriores. <br><br>  Hay momentos en que ha pasado una carrera, se ha desarrollado un campo de entrenamiento y se han completado las pruebas.  El soporte debe limpiarse al final, pero intervino fuerza mayor y no hubo limpieza.  Para tales situaciones, la mol√©cula escapa, destruye y limpia el medio ambiente de los residuos. <br><br><img src="https://habrastorage.org/webt/j2/j2/cn/j2j2cnjnsheyah-w-lbspdbtq1w.png"><br><br><h4>  No. 3. Dependencia <br></h4><br>  Tomamos el archivo require.yml y agregamos las dependencias de nuestro rol en otros roles.  Por ejemplo, una referencia al hecho de que el rol no despegar√° sin Java instalado en el sistema: <br><br><pre><code class="xml hljs">--- - src: lean_delivery.java version: 1.4</code> </pre> <br>  Molecule entiende esto y ejecutar√° el script: <br><br><ul><li>  Va galaxia o git </li><li>  Se dar√° cuenta de que es necesario resolver dependencias; </li><li>  Va a Galaxy nuevamente; </li><li>  descargas; </li><li>  se expandir√° </li></ul><br><img src="https://habrastorage.org/webt/w1/lc/i1/w1lci1qzqoqsvtqgkutu0ukxmyy.png"><br><br><h4>  No. 4. Sintaxis <br></h4><br>  El siguiente paso es la verificaci√≥n de sintaxis.  pero no tu rol, sino el Playbook de prueba que agregas a Molecule.  Tambi√©n hay errores de sintaxis en este paso. <br><br>  La diapositiva muestra que el rol ansible se llama 'kibana', y en el Playbook de prueba, se llama ansible-role-kibana.  El sistema dice: "Todo estar√≠a bien y puedes crearlo aqu√≠, ¬°pero no lo har√© porque los nombres no coinciden!" <br><br><img src="https://habrastorage.org/webt/_l/sk/ze/_lskze2oxulkdibbjzvlqftvmtu.png"><br><br><h4>  No. 5. Crear <br></h4><br>  En esta etapa, indicamos el controlador con el que se implementa el sitio de prueba.  Point Google: elevar√° las m√°quinas de prueba en Google Cloud. <br><br>  Podemos escribir en el archivo mol√©cula.yml lo que queramos.  Veamos c√≥mo se ve en un ejemplo para Docker. <br><br><img src="https://habrastorage.org/webt/y5/se/vh/y5sevh4mpxt6gxsvkwbvhkvc7ry.png"><br><br><ul><li>  Estoy especificando las im√°genes de la ventana acoplable para extraer. </li><li>  Indico c√≥mo agruparlos para que se forme un archivo de inventario. </li></ul><br>  Quiero tener dos im√°genes acoplables: una para RHEL-like, la segunda para Debian-like, para asegurarme de que durante la ejecuci√≥n de la prueba todo estar√° bien tanto con RHEL como con Debian. <br><br><h4>  No. 6. Prep√°rate <br></h4><br>  Este es un paso de preparaci√≥n preliminar para el entorno de ejecuci√≥n de prueba. <br><br>  Parece que todo ha aumentado, pero a veces es necesario realizar algunas configuraciones adicionales.  En el caso de las pruebas dentro de un Docker elevado en Debian o Ubuntu, debe instalar un segundo Python, lo que a menudo sucede. <br><br><h4>  No. 7. Converge <br></h4><br>  Se ejecuta la etapa de la primera ejecuci√≥n grande del rol dentro de la instancia, para asegurarse de que llegue al final, y Ansible confirma que todo est√° bien. <br><br><img src="https://habrastorage.org/webt/7v/my/du/7vmydu7hzixdur-0yvrxv7t_oqa.png"><br><br><ul><li>  Mol√©cula se refiere a Ansible. </li><li>  Ansible desplegado en un sitio de prueba. </li><li>  Corre </li><li>  Todo esta bien! </li></ul><br><h4>  No. 8. Idempotencia <br></h4><br>  La prueba de idempotencia es simple y se ve as√≠. <br><br><img src="https://habrastorage.org/webt/nc/yi/kd/ncyikd7lhq6ojlpm_rg9fbv581k.png"><br><br><ul><li>  La primera vez que el rol se ejecuta en el paso anterior. </li><li>  Ansible informa cu√°ntos cambios se han realizado. </li><li>  Relanza el mismo rol. </li><li>  Comprueba que el sistema ha sido llevado al estado esperado, pero no hay cambios en el segundo alquiler. </li></ul><br>  Como resultado, entendemos que nuestro papel no act√∫a de manera destructiva. <br><br>  Esta etapa caus√≥ dolor a los chicos con los que trabajo.  Intentaron trabajar para vencer la prueba de idempotencia.  La mol√©cula puede controlar las etapas que atraviesa, y lo primero que hicieron fue desactivar el control de idempotencia. <br><br><img src="https://habrastorage.org/webt/0k/wg/jn/0kwgjnxvnxh7aekrwrahmoj3w2a.png"><br><br>  Tomamos apagones y nos ganamos, pero los ingenieros son inteligentes y fueron m√°s profundos.  Los desarrolladores decidieron decir que este paso en Ansible no cambia nada. <br><br>  Aunque, de hecho, alg√∫n tipo de equipo aparecer√° aqu√≠.  Ansible tomar√° directamente y <br>  sobrescribir√° el archivo, pero al mismo tiempo todo parece idempotente. <br><br><img src="https://habrastorage.org/webt/2j/x4/ay/2jx4aycosp5ster62dawq2xzzfg.png"><br><br>  Cuando este truco tambi√©n fue captado, la imagen comenz√≥ a verse as√≠. <br><br><img src="https://habrastorage.org/webt/bf/sp/ia/bfspiakbmggjxuxn-hsblzntjzu.png"><br><br>  Bien: el script se ejecut√≥ con el nombre predeterminado y es idempotente. <br><br><h4>  No. 9. Efectos secundarios <br></h4><br>  En la siguiente etapa, los efectos secundarios se superponen.  No es necesario hacer esto, pero es conveniente cuando prueba roles de distribuci√≥n complejos que dependen unos de otros. <br><br>  Por ejemplo, levante la pila ELK, luego Elasticsearch en un cl√∫ster.  En la etapa side_effect, agregue datos de prueba y elimine un par de nodos del cl√∫ster.  El sitio de prueba est√° listo para las pruebas funcionales que tienen lugar en el siguiente paso. <br><br><h4>  N√∫mero 10. Verificar <br></h4><br>  Probar la infraestructura. <br><br><img src="https://habrastorage.org/webt/xe/uu/qj/xeuuqjywe_arafmkfl3tu0nmdte.png"><br><br>  Arriba hay un ejemplo de una prueba muy simple.  Verificamos que tenemos instalado el paquete Docker Community Edition si Ubuntu est√° instalado, tiene la versi√≥n correcta y el servicio se est√° ejecutando. <br><br>  En esta etapa del lanzamiento de las pruebas funcionales, todo puede ser muy complicado. <br><br>  Probablemente el mejor ejemplo ser√≠a, en el caso de la pila ELK, si hacemos una solicitud en alguna solicitud de Elasticsearch para algunos datos de prueba, y dado que conocemos los datos de prueba, nos responder√°.  No verificaremos que todos los componentes instalados est√©n ensamblados, pero veremos que Elasticsearch est√© en funcionamiento y proporcione exactamente lo que necesita en la b√∫squeda. <br><br><img src="https://habrastorage.org/webt/--/bl/_v/--bl_vqbdgl6raurbgf0of-hkly.png"><br><br>  Cuando se ejecutan las pruebas funcionales, parece ser hermoso, se ejecuta de arriba a abajo en todo el inventario y el sistema nos dice que todo est√° bien para nosotros.  Nuevamente, las pruebas se ejecutar√°n si las escribimos. <br><br><h4>  No. 11. Destruye <br></h4><br>  Realizamos pruebas, hay un informe de prueba de alguna forma, y ‚Äã‚Äãahora eliminamos toda la basura detr√°s de nosotros. <br><br><h3>  Automatizaci√≥n <br></h3><br>  La mol√©cula es una gran herramienta.  Ahora queda lo m√°s simple: conectarle un sistema de integraci√≥n continua para disfrutar de las pruebas autom√°ticas de nuestros roles, lo cual hicimos. <br><br><img src="https://habrastorage.org/webt/hx/f6/w8/hxf6w8ahonr80pjg-d1-oquzqcm.png"><br><br>  Como en otros lugares, hay varias caracter√≠sticas. <br><br>  Algunos de los roles que escribimos para automatizar algo son buenos, pero no podemos probar el sistema usando Travis, porque los roles implementan productos que no podemos compartir por razones de licencia. <br><br>  Por ejemplo, tiene una implementaci√≥n automatizada de una base de datos Oracle.  Si coloca la base del instalador en un archivo, los abogados de la compa√±√≠a acudir√°n a usted y lo jurar√°n enormemente.  Para que todos vivan en paz y no juren, decidimos hacer lo siguiente. <br><br><ul><li>  GitLab, en uno de sus √∫ltimos lanzamientos, aprendi√≥ a hacer CI para repositorios de terceros. </li><li>  El papel recae en el GitHub p√∫blico, el mismo GitLab.com p√∫blico est√° conectado a √©l, en el que indicamos: "Estimado GitLab, rec√≥janos el CI para el repositorio externo". </li><li>  Los corredores privados est√°n atornillados a GitLab, en un per√≠metro cerrado, y ya tienen acceso a binarios, que pueden implementar. </li></ul><br>  De hecho, el papel recae p√∫blicamente, los datos tambi√©n, y no estamos enga√±ando a nadie: ejecutamos pruebas reales con herramientas reales. <br><br>  Echemos un vistazo a los pasos de c√≥mo se ve en Travis. <br><br><h4>  Travis <br></h4><br><img src="https://habrastorage.org/webt/s4/86/d6/s486d6rvzntt55xkmllygy5db5i.png"><br><br>  Los pasos: <br><br><ul><li>  En el primer paso, la octava l√≠nea, le decimos a Travis que no solo queremos lanzarlo, sino que tambi√©n usamos el servicio Docker para que Docker est√© disponible dentro de Travis. </li><li>  Luego, la d√©cima l√≠nea, tomamos nuestras reglas de pelusa.  No solo utilizamos las reglas de pelusa Ansible predeterminadas, sino que tambi√©n escribimos las nuestras. </li><li>  En la l√≠nea 15, primero llamamos a lint para ahorrar tiempo al ejecutar la matriz de prueba.  Si algo no est√° escrito de acuerdo con las reglas, y la pelusa no lo encuentra, entonces va al principio y deja un informe.  Un desarrollador que confirma, repara su confirmaci√≥n o descarta los cambios.  Cuando se repare, d√©jelo venir y continuaremos con la prueba. </li></ul><br><h4>  CI p√∫blico <br></h4><br>  El CI p√∫blico parece elemental. <br><br><img src="https://habrastorage.org/webt/tc/am/vt/tcamvta_zifwuzwes75yw5tnk64.png"><br><br>  Desde GitHub, una flecha hacia Travis, dentro de la cual viven Molecule y Docker. <br><br><h4>  CI privado <br></h4><br>  Para la parte privada de GitLab, todo es igual. <br><br><img src="https://habrastorage.org/webt/zs/3_/zc/zs3_zc-hg2mkaitiuji_cquv9yg.png"><br><br>  En el per√≠metro privado, corremos un corredor, y la imagen se ve m√°s divertida. <br><br><img src="https://habrastorage.org/webt/jj/t4/yq/jjt4yq5oizqkseowdueobidaato.png"><br><br>  El c√≥digo pasa de GitHub a GitLab, en alg√∫n lugar donde se ejecuta un corredor privado, que puede extraer servicios externos, por ejemplo, ejecutar algo en Amazon. <br><br>  Un poco de digresi√≥n.  Iniciar e implementar un entorno de prueba en Amazon no desea ser portado, porque necesita claves.  Encontrar mecanismos para ponerlos en p√∫blico, pero al mismo tiempo no convertirse en la pr√≥xima plataforma de inicio para la miner√≠a, esta es una tarea no trivial.  Por lo tanto, no lo resolvimos, pero tomamos el corredor en privado para no extraer bitcoins de Amazon. <br><br>  Incluso aqu√≠, √©ramos un poco flojos e hicimos lo siguiente.  En EPAM tenemos nuestra propia nube privada y es h√≠brida.  Esto significa que se puede acceder a muchas nubes p√∫blicas desde la nube interna, como las regiones.  No puede escribir mil pruebas, pero juegue con las regiones y diga: "Ahora pruebe de acuerdo con este escenario de prueba para la regi√≥n AWS, EPAM Cloud, Azure". <br><br><h3>  Galaxia ansible <br></h3><br>  Llegamos al final, nuestro papel es verde, hermoso, lo publicaremos en Galaxy. <br><br><img src="https://habrastorage.org/webt/0q/zw/tw/0qzwtww1t3m0qoyvlgkzgpptg9u.png"><br><br>  Esta es una operaci√≥n simple: <br><br><ul><li>  La llamada webhook que est√° en Travis. </li><li>  En este caso, Travis se activar√°, CI se ejecutar√° nuevamente. </li><li>  Llamar a webhook. </li><li>  La nueva versi√≥n crecer√° con √©xito en Galaxy. </li></ul><br>  Hay una caracter√≠stica: si no marca un rol, no lo etiqueta, no le asigna una versi√≥n, entonces en Galaxy siempre estar√° sin una versi√≥n.  Tan pronto como otro desarrollador quiera instalarlo √©l mismo a trav√©s de la instalaci√≥n de Ansible Galaxy, eliminar√° el rol que se encuentra en la rama maestra, o en otra rama por defecto.  Por defecto, la rama no siempre es estable, lo cual es inconveniente. <br><br><blockquote>  Si publica algo en Galaxy, no olvide etiquetarlo, de manera que haya versiones, y todo fue genial. <br></blockquote><br><h3>  Patrones <br></h3><br>  Estoy compartiendo un peque√±o truco: para no copiar y pegar cada vez que escribimos un nuevo rol, decidimos crear plantillas y un repositorio separado en el que colocamos la plantilla para escribir r√°pidamente roles desde cero. <br><br>  La plantilla tiene una configuraci√≥n predeterminada para Ansible lint y GitHub issue_template.  Todo es de dominio p√∫blico, por lo tanto, issue_template en una forma hermosa tambi√©n fue hermoso para nosotros emitir solicitudes de extracci√≥n o informes de errores.  Agregamos plantillas para Gitignore, Gitlab-ci y una licencia al mismo repositorio. <br><br><img src="https://habrastorage.org/webt/eb/4m/ta/eb4mta07gv_dgxqszmdkpobnfzq.png"><br><br>  Por defecto, publicamos bajo la licencia Apache 2.0.  Si quiere venir a nosotros y reutilizar las plantillas, puede quitar todo, crear un repositorio cerrado y no explicar nada a nadie.  Gracias apache <br><br>  Tenemos varias opciones de prueba para que pueda patear y comenzar todo r√°pidamente. <br><br><h2>  Resumen <br></h2><br>  No habr√° conclusiones, en cambio, hay enlaces a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">mi GitHub</a> , mi <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">perfil Galaxy</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">GitHub Lean Delivery</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Ansible Galaxy</a> .  Usando los enlaces puedes ver c√≥mo funciona todo.  Todos los ejemplos est√°n disponibles gratuitamente. <br><br><blockquote>  La pr√≥xima <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">conferencia de DevOps</a> se llevar√° a cabo en mayo. <br><br>  Mientras esperamos el evento, suscr√≠base al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">canal</a> y al <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bolet√≠n de</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">YouTube</a> .  El canal se repondr√° con los registros de los mejores informes, y en la lista de correo habr√° selecciones de materiales √∫tiles, transcripciones y noticias de DevOps. <br><br>  Suscr√≠bete, ser√° interesante :) <br></blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es431542/">https://habr.com/ru/post/es431542/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es431532/index.html">Memorias que constan de piezas de 2 nm de espesor.</a></li>
<li><a href="../es431534/index.html">Identidades problem√°ticas entre desarrolladores</a></li>
<li><a href="../es431536/index.html">Ceph. Anatom√≠a del desastre</a></li>
<li><a href="../es431538/index.html">Case Rate & Goods y Mobio: aumento gradual en todos los indicadores</a></li>
<li><a href="../es431540/index.html">Paquetes y gestores de paquetes para k8s</a></li>
<li><a href="../es431544/index.html">Llevar DevOps a las masas</a></li>
<li><a href="../es431546/index.html">¬øPor qu√© estamos diciendo bien?</a></li>
<li><a href="../es431548/index.html">Solar Dozor - ¬øQu√© hay detr√°s de las estrellas?</a></li>
<li><a href="../es431550/index.html">Moldeo por inyecci√≥n de pel√≠cula (IMD): c√≥mo funciona</a></li>
<li><a href="../es431554/index.html">Facebook como contador de un viejo medidor el√©ctrico</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>