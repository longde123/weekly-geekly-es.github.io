<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👩🏽‍🎤 🏄 😈 Testen der Webdienstleistung im Rahmen der kontinuierlichen Integration. Yandex Erfahrung 👩‍👩‍👧‍👧 👆 👴🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fast alle neuen Yandex-Mitarbeiter sind erstaunt über das Ausmaß der Belastungen, denen unsere Produkte ausgesetzt sind. Tausende von Hosts mit Hunder...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Testen der Webdienstleistung im Rahmen der kontinuierlichen Integration. Yandex Erfahrung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/425867/"><p>  Fast alle neuen Yandex-Mitarbeiter sind erstaunt über das Ausmaß der Belastungen, denen unsere Produkte ausgesetzt sind.  Tausende von Hosts mit Hunderttausenden von Anfragen pro Sekunde.  Und dies ist nur eine der Dienstleistungen.  Gleichzeitig müssen wir in Sekundenbruchteilen auf Anfragen reagieren.  Selbst eine geringfügige Änderung des Produkts kann erhebliche Auswirkungen auf die Leistung haben. Daher ist es wichtig, die Auswirkungen Ihres Codes auf den Service zu testen und zu bewerten. </p><br><p>  In unserem Service für Werbetechnologien werden Tests im Rahmen der Continuous-Integration-Methodik durchgeführt, die wir am 25. Oktober auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex-</a> Veranstaltung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von innen</a> ausführlicher diskutieren werden. Heute werden wir den Lesern von Habr die Erfahrung der Automatisierung der Bewertung wichtiger Produktmetriken im Zusammenhang mit der Serviceleistung mitteilen.  Sie lernen, wie Sie einer Maschine eine Analyse anvertrauen und diese nicht in Diagrammen verfolgen.  Lass uns gehen! </p><br><img src="https://habrastorage.org/webt/iz/tt/0g/iztt0gctohbgmc0liwkarkwteye.jpeg"><br><p><a name="habracut"></a>  Es geht nicht darum, wie man die Site testet.  Hierfür gibt es viele Online-Tools.  Heute werden wir über einen hoch ausgelasteten internen Backend-Service sprechen, der Teil eines großen Systems ist und Informationen für einen externen Service vorbereitet.  In unserem Fall für Suchergebnisseiten und Partnerseiten.  Wenn unsere Komponente keine Zeit hat zu antworten, werden die Informationen daraus einfach nicht an den Benutzer weitergegeben.  Das Unternehmen wird also Geld verlieren.  Daher ist es sehr wichtig, rechtzeitig zu reagieren. </p><br><p>  Welche wichtigen Servermetriken können hervorgehoben werden? </p><br><ul><li>  <strong>Anfrage pro Sekunde (RPS)</strong> .  Das Glück eines Benutzers ist uns natürlich wichtig.  Aber was ist, wenn nicht einer, sondern Tausende von Benutzern zu Ihnen kamen?  Wie viele Anforderungen pro Sekunde kann Ihr Server standhalten und nicht fallen? </li><li>  <strong>Zeit pro Anfrage</strong> .  Der Inhalt der Website sollte so schnell wie möglich gerendert werden, damit der Benutzer nicht müde wird zu warten und nicht in den Laden für Popcorn geht.  In unserem Fall wird er keinen wichtigen Teil der Informationen auf der Seite sehen. </li><li>  <strong>Resident Set Size (RSS)</strong> .  Stellen Sie sicher, dass Sie überwachen, wie viel Speicher Ihr Programm belegt.  Wenn der Dienst den gesamten Speicher belegt, ist es kaum möglich, über Fehlertoleranz zu sprechen. </li><li>  <strong>HTTP-Fehler</strong> . </li></ul><br><p>  Also lasst es uns in Ordnung bringen. </p><br><h3 id="request-per-second">  Anfrage pro Sekunde </h3><br><p>  Unser Entwickler, der sich schon lange mit Lasttests beschäftigt, spricht gerne über die kritische Ressource des Systems.  Mal sehen, was es ist. </p><br><p> Jedes System hat seine eigenen Konfigurationsmerkmale, die den Betrieb bestimmen.  Zum Beispiel Warteschlangenlänge, Antwortzeitlimit, Threads-Worker-Pool usw.  Daher kann es vorkommen, dass die Kapazität Ihres Dienstes auf einer dieser Ressourcen beruht.  Sie können ein Experiment durchführen.  Erhöhen Sie nacheinander jede Ressource.  Eine Ressource, deren Erhöhung die Kapazität Ihres Dienstes erhöht, ist für Sie von entscheidender Bedeutung.  In einem gut konfigurierten System müssen Sie nicht eine Ressource, sondern mehrere Ressourcen erhöhen, um die Kapazität zu erhöhen.  Dies kann aber immer noch "gefühlt" werden.  Es ist großartig, wenn Sie Ihr System so konfigurieren können, dass alle Ressourcen mit voller Stärke arbeiten und der Service in den vorgegebenen Zeitrahmen passt. </p><br><p>  Um abzuschätzen, wie viele Anforderungen Ihr Server pro Sekunde aushält, müssen Sie einen Anforderungsstrom an ihn senden.  Da wir diesen Prozess in das CI-System integriert haben, verwenden wir eine sehr einfache „Waffe“ mit eingeschränkter Funktionalität.  Aber von Open Source Software ist Yandex.Tank perfekt für diese Aufgabe.  Er hat detaillierte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterlagen</a> .  Ein Geschenk an Tank ist ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Service</a> zum Anzeigen der Ergebnisse. </p><br><p>  <em>Ein kleines Stück.</em>  Yandex.Tank verfügt über eine ziemlich umfangreiche Funktionalität, die nicht nur auf die Automatisierung von Beschussanforderungen beschränkt ist.  Es wird auch helfen, Metriken Ihres Dienstes zu sammeln, Diagramme zu erstellen und das Modul mit der Logik zu verbinden, die Sie benötigen.  Generell empfehlen wir dringend, ihn kennenzulernen. </p><br><p>  Jetzt müssen Sie Anfragen an den Tank weiterleiten, damit diese bei uns ausgelöst werden können.  Die Anforderungen, mit denen Sie den Server schälen, können vom gleichen Typ sein, künstlich erstellt und weitergegeben werden.  Messungen sind jedoch viel genauer, wenn Sie für einen bestimmten Zeitraum einen echten Pool von Anfragen von Benutzern erfassen können. </p><br><p>  Die Kapazität kann auf zwei Arten gemessen werden. </p><br><p>  <strong>Offenes Lastmodell (Stresstest)</strong> </p><br><p>  Machen Sie "Benutzer", dh mehrere Threads, die eine Anfrage an Ihr System senden.  Die Last, die wir nicht geben werden, ist konstant, sondern baut sie auf oder speist sie sogar in Wellen.  Dann bringt es uns dem wirklichen Leben näher.  Wir erhöhen den RPS und erfassen den Punkt, an dem der geschälte Dienst die SLA „durchbricht“.  So können Sie die Grenzen des Systems finden. </p><br><p>  Um die Anzahl der Benutzer zu berechnen, können Sie die Little-Formel verwenden (Sie können hier darüber lesen).  Ohne die Theorie sieht die Formel folgendermaßen aus: </p><br><p>  RPS = 1000 / T * Arbeiter, wobei </p><br><p>  • T - durchschnittliche Zeit der Anforderungsverarbeitung (in Millisekunden); <br>  • Arbeiter - die Anzahl der Fäden; <br>  • 1000 / T-Anforderungen pro Sekunde - Dieser Wert wird von einem Single-Threaded-Generator generiert. </p><br><p>  <strong>Modell mit geschlossener Last (Lastprüfung)</strong> </p><br><p>  Wir nehmen eine feste Anzahl von "Benutzern".  Sie müssen es so konfigurieren, dass die Eingabewarteschlange, die der Konfiguration Ihres Dienstes entspricht, immer verstopft ist.  Gleichzeitig macht es keinen Sinn, die Anzahl der Threads über das Warteschlangenlimit zu setzen, da wir uns auf dieser Anzahl ausruhen und die verbleibenden Anforderungen vom Server mit einem 5xx-Fehler verworfen werden.  Wir prüfen, wie viele Anfragen pro Sekunde das Design ausgeben kann.  Ein solches Schema ähnelt im allgemeinen Fall nicht dem tatsächlichen Anforderungsfluss, hilft jedoch dabei, das Verhalten des Systems bei maximaler Last darzustellen und seinen Durchsatz zum aktuellen Zeitpunkt abzuschätzen. </p><br><p>  Für die überwiegende Mehrheit der Systeme (bei denen die kritische Ressource nicht mit der Verarbeitung von Verbindungen zusammenhängt) ist das Ergebnis dasselbe.  Gleichzeitig ist das geschlossene Modell geräuschärmer, da sich das System während des gesamten Tests im für uns interessanten Lastbereich befindet. </p><br><p>  Beim Testen unseres Service verwenden wir ein geschlossenes Modell.  Nach dem Schießen gibt uns die Waffe an, wie viele Anfragen pro Sekunde unser Service stellen konnte.  Yandex.Tank dieser Indikator ist auch leicht zu erkennen. </p><br><h3 id="time-per-request">  Zeit pro Anfrage </h3><br><p>  Wenn wir zum vorherigen Absatz zurückkehren, wird deutlich, dass es bei einem solchen Schema keinen Sinn macht, die Antwortzeit auf eine Anfrage zu bewerten.  Je stärker wir das System laden, desto mehr verschlechtert es sich und desto länger reagiert es.  Um die Antwortzeit zu testen, sollte der Ansatz daher unterschiedlich sein. </p><br><p>  Um die durchschnittliche Antwortzeit zu erhalten, verwenden wir denselben Yandex.Tank.  Erst jetzt setzen wir den RPS entsprechend dem Durchschnittsindikator Ihres Systems in der Produktion.  Nach dem Beschuss erhalten wir Antwortzeiten für jede Anfrage.  Basierend auf den gesammelten Daten können Perzentile der Antwortzeiten berechnet werden. </p><br><p>  Als nächstes müssen Sie verstehen, welches Perzentil wir für wichtig halten.  Zum Beispiel bauen wir auf der Produktion auf.  Wir können 1% der Anfragen nach Fehlern, Nichtantworten, Debugging-Anfragen, die lange Zeit funktionieren, Problemen mit dem Netzwerk usw. hinterlassen.  Daher halten wir die Antwortzeit für signifikant, die 99% der Anfragen berücksichtigt. </p><br><h3 id="resident-set-size">  Resident Set Größe </h3><br><p>  Unser Server arbeitet direkt mit Dateien über <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mmap</a> .  Wenn wir den RSS-Index messen, möchten wir wissen, wie viel Speicher das Programm während des Betriebs vom Betriebssystem benötigt hat. </p><br><p>  Unter Linux wird die Datei / proc / PID / smaps geschrieben - dies ist eine kartenbasierte Erweiterung, die den Speicherverbrauch für jede der Prozesszuordnungen anzeigt.  Wenn Ihr Prozess tmpfs verwendet, werden sowohl anonymer als auch nicht anonymer Speicher in Smaps geraten.  Nicht anonymer Speicher umfasst beispielsweise Dateien, die in den Speicher geladen werden.  Hier ist ein Beispieleintrag in smaps.  Eine bestimmte Datei wird angegeben und ihr Parameter Anonym = 0 KB. </p><br><pre><code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea65a60000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea65a61000 r--s <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">79169191</span></span> /place/home/.../some.yabs Size: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">0</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd mr me ms</code> </pre> <br><p>  Dies ist ein Beispiel für eine anonyme Speicherzuweisung.  Wenn ein Prozess (dieselbe mmap) das Betriebssystem auffordert, eine bestimmte Speichergröße zuzuweisen, wird ihm eine Adresse zugewiesen.  Während des Prozesses wird nur virtueller Speicher belegt.  Zu diesem Zeitpunkt wissen wir noch nicht, welcher physische Speicherplatz zugewiesen wird.  Wir sehen eine namenlose Aufzeichnung.  Dies ist ein Beispiel für die Zuweisung von anonymem Speicher.  Das System wurde mit einer Größe von 24572 kB angefordert, aber sie verwendeten es nicht und tatsächlich wurde nur RSS = 4 kB genommen. </p><br><pre> <code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea67264000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea68a63000 rw-p <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> Size: <span class="hljs-number"><span class="hljs-number">24572</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">4</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd wr mr mw me ac</code> </pre> <br><p>  Da der zugewiesene nicht anonyme Speicher nach dem Stoppen des Prozesses nirgendwo hingeht, wird die Datei nicht gelöscht. Wir sind nicht an einem solchen RSS interessiert. </p><br><p>  Bevor Sie mit dem Aufnehmen auf dem Server beginnen, fassen wir das RSS aus / proc / PID / smaps zusammen, das für anonymen Speicher reserviert ist, und merken es sich.  Wir führen Schalen durch, ähnlich der Testzeit pro Anfrage.  Betrachten Sie RSS nach Abschluss erneut.  Der Unterschied zwischen dem Anfangs- und dem Endzustand ist die Speichermenge, die Ihr Prozess während des Betriebs verwendet hat. </p><br><h3 id="http-oshibki">  HTTP-Fehler </h3><br><p>  Vergessen Sie nicht, die Antwortcodes zu befolgen, die der Service während des Tests zurückgibt.  Wenn beim Einrichten eines Tests oder einer Umgebung ein Fehler aufgetreten ist und der Server für alle Ihre Anforderungen 5xx- und 4xx-Fehler zurückgegeben hat, war ein solcher Test nicht sinnvoll.  Wir überwachen den Anteil der schlechten Antworten.  Wenn viele Fehler vorliegen, wird der Test als ungültig betrachtet. </p><br><h3 id="nemnogo-o-tochnosti-izmereniy">  Ein bisschen über Messgenauigkeit </h3><br><p>  Und jetzt das Wichtigste.  Kehren wir zu den vorherigen Absätzen zurück.  Die absoluten Werte der von uns berechneten Metriken sind für uns nicht so wichtig.  Nein, natürlich können Sie unter Berücksichtigung aller Faktoren, Fehler und Schwankungen eine Stabilität der Indikatoren erreichen.  Schreiben Sie parallel eine wissenschaftliche Arbeit zu diesem Thema (übrigens, wenn jemand nach einer suchte, könnte dies eine gute Option sein).  Das interessiert uns aber nicht. </p><br><p>  Es ist wichtig, dass wir das spezifische Commit für den Code in Bezug auf den vorherigen Status des Systems beeinflussen.  Das heißt, der Unterschied zwischen Metriken von Commit zu Commit ist wichtig.  Und hier ist es notwendig, einen Prozess einzurichten, der diese Differenz vergleicht und gleichzeitig die Stabilität des Absolutwerts in diesem Intervall sicherstellt. </p><br><p>  Die Umgebung, Anforderungen, Daten, Servicestatus - alle uns zur Verfügung stehenden Faktoren sollten festgelegt werden.  Es ist dieses System, das im Rahmen der kontinuierlichen Integration für uns funktioniert und uns Informationen über alle Arten von Änderungen liefert, die bei jedem Commit aufgetreten sind.  Trotzdem wird es nicht möglich sein, alles zu reparieren, es wird Lärm geben.  Wir können das Rauschen natürlich reduzieren, indem wir das Sample erhöhen, dh mehrere Iterationen der Aufnahme durchführen.  Nach dem Aufnehmen von beispielsweise 15 Iterationen können wir den Median der resultierenden Stichprobe berechnen.  Außerdem muss ein Gleichgewicht zwischen Rauschen und Aufnahmedauer gefunden werden.  Zum Beispiel haben wir uns auf einen Fehler von 1% geeinigt.  Wenn Sie eine komplexere und genauere statistische Methode gemäß Ihren Anforderungen auswählen möchten, empfehlen wir ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Buch</a> , in dem Optionen mit einer Beschreibung, wann und welche verwendet werden, aufgeführt sind. </p><br><h3 id="chto-eschyo-mozhno-sdelat-s-shumom">  Was kann man sonst noch mit Lärm machen? </h3><br><p>  Beachten Sie, dass die Umgebung, in der Sie Tests durchführen, bei solchen Tests eine wichtige Rolle spielt.  Der Prüfstand sollte zuverlässig sein und keine anderen Programme ausführen, da dies zu einer Verschlechterung Ihres Dienstes führen kann.  Darüber hinaus können und werden die Ergebnisse vom Lastprofil, der Umgebung, der Datenbank und verschiedenen „magnetischen Stürmen“ abhängen. </p><br><p>  Im Rahmen eines einzelnen Commit-Tests führen wir mehrere Iterationen auf verschiedenen Hosts durch.  Erstens, wenn Sie die Cloud verwenden, kann dort alles passieren.  Auch wenn die Cloud wie unsere spezialisiert ist, funktionieren Serviceprozesse dort immer noch.  Daher können Sie sich nicht auf das Ergebnis eines Hosts verlassen.  Und wenn Sie einen eisernen Wirt haben, in dem es wie in der Cloud keinen Standardmechanismus zum Erhöhen der Umgebung gibt, können Sie ihn sogar versehentlich einmal zerbrechen und so belassen.  Und er wird dich immer anlügen.  Deshalb fahren wir unsere Tests in der Cloud. </p><br><p>  Daraus ergibt sich zwar eine andere Frage.  Wenn Ihre Messungen jedes Mal auf verschiedenen Hosts durchgeführt werden, können die Ergebnisse ein wenig Rauschen verursachen und aus diesem Grund auch.  Dann können Sie die Messwerte für den Host normalisieren.  Das heißt, nach historischen Daten den „Wirtskoeffizienten“ erfassen und bei der Analyse der Ergebnisse berücksichtigen. </p><br><p>  Die Analyse historischer Daten zeigt, dass die Hardware unterschiedlich ist.  Das Wort "Hardware" umfasst hier die Kernel-Version und die Folgen der Verfügbarkeit (anscheinend keine beweglichen Kernel-Objekte im Speicher). </p><br><p>  Daher ordnen wir jedem "Host" (beim Neustart "stirbt" der Host und ein "neues" erscheint die Änderung zu, mit der wir den RPS vor der Aggregation multiplizieren. </p><br><p>  Wir prüfen und aktualisieren die Änderungen auf äußerst ungeschickte Weise, was verdächtig an eine Option für ein Verstärkungstraining erinnert. </p><br><p>  Für einen gegebenen Vektor von Posthost-Korrekturen betrachten wir die Zielfunktion: </p><br><ul><li>  In jedem Test berücksichtigen wir die Standardabweichung der erhaltenen „korrigierten“ RPS-Ergebnisse </li><li>  Nehmen Sie den Durchschnitt von ihnen mit gleichen Gewichten <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&amp;#x2212;</mo><mi>n</mi><mi>o</mi><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.778ex" height="2.66ex" viewBox="0 -832 14543.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-78" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-70" x="1039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-28" x="1542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-28" x="1932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="2321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-65" x="2683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-73" x="3149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="3619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="3980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-69" x="4342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6D" x="4687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-65" x="5566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-73" x="6032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="6502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-61" x="6863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6D" x="7393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-70" x="8271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-2212" x="8997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6E" x="9997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6F" x="10598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-77" x="11083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-29" x="11800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-2F" x="12189" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="12690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-61" x="13051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-75" x="13581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-29" x="14153" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>−</mo><mi>n</mi><mi>o</mi><mi>w</mi><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> exp ((testtimestamp - now) / tau) </script>  , </li><li>  Wir haben Tau = 1 Woche. </li></ul><br><p>  Dann setzen wir eine Korrektur (für den Host mit der größten Summe dieser Gewichte) auf 1,0 und suchen nach den Werten aller anderen Korrekturen, die ein Minimum der Zielfunktion ergeben. </p><br><p>  Um die Ergebnisse für historische Daten zu validieren, berücksichtigen wir die Korrekturen für die alten Daten. Wir betrachten das korrigierte Ergebnis für die frischen Daten und vergleichen sie mit den nicht korrigierten. </p><br><p>  Eine weitere Option zum Anpassen der Ergebnisse und zum Reduzieren des Rauschens ist die Normalisierung auf "Kunststoffe".  Führen Sie vor dem Starten des zu testenden Dienstes ein „synthetisches Programm“ auf dem Host aus, mit dem Sie den Status des Hosts auswerten und den Korrekturfaktor berechnen können.  In unserem Fall verwenden wir jedoch hostbasierte Korrekturen, und diese Idee ist eine Idee geblieben.  Vielleicht wird einer von euch sie mögen. </p><br><p>  Vergessen Sie trotz der Automatisierung und all ihrer Vorteile nicht die Dynamik Ihrer Indikatoren.  Es ist wichtig sicherzustellen, dass sich der Service im Laufe der Zeit nicht verschlechtert.  Möglicherweise bemerken Sie keine kleinen Drawdowns, sie können sich ansammeln, und über einen langen Zeitraum können Ihre Indikatoren durchhängen.  Hier ist ein Beispiel unserer Grafiken, die wir bei RPS betrachten.  Es zeigt den relativen Wert für jedes überprüfte Commit, seine Nummer und die Fähigkeit, zu sehen, woher die Freigabe zugewiesen wurde. </p><br><img src="https://habrastorage.org/webt/qu/lj/_h/qulj_hvry8sfubkrt285xlzidsq.png"><br><img src="https://habrastorage.org/webt/gp/76/o9/gp76o9rgelvep5u8rrpyoricmfs.png"><br><p>  Wenn Sie den Artikel lesen, ist es auf jeden Fall interessant für <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie, einen</a> Bericht über Yandex.Tank und eine Analyse der Ergebnisse von Lasttests zu sehen. </p><br><p>  Wir erinnern Sie auch daran, dass wir im Rahmen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex-</a> Veranstaltung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von innen</a> ausführlicher über die Organisation der kontinuierlichen Integration sprechen werden.  Komm zu Besuch! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425867/">https://habr.com/ru/post/de425867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425851/index.html">Infer.NET: Leistungsstarkes maschinelles Lernsystem jetzt OpenSource</a></li>
<li><a href="../de425853/index.html">Alle Konversations-KI bei der ersten Konversationskonferenz</a></li>
<li><a href="../de425855/index.html">Zucken machte mich besser und half mir, die drei dunkelsten Monate meines Lebens zu überleben.</a></li>
<li><a href="../de425859/index.html">Regionale Betreiber lehnen die Aufhebung des Roamings ab</a></li>
<li><a href="../de425861/index.html">Testen Sie sich selbst: Können Sie das Unternehmen vor Cyber-Angriffen schützen?</a></li>
<li><a href="../de425869/index.html">iFixit: Apple hat das Blockieren von überholten MacBooks noch nicht aktiviert</a></li>
<li><a href="../de425871/index.html">Jekaterinburg, 11. Oktober - Atlassian trifft Hafenarbeiter</a></li>
<li><a href="../de425873/index.html">[CppCon 2018] Herb Sutter: Auf dem Weg zu einem einfacheren und leistungsstärkeren C ++</a></li>
<li><a href="../de425875/index.html">Notebook-Matrix-Upgrade TN-> IPS oder wie man einen fortgeschritteneren Laptop von einem Budget-Laptop bekommt</a></li>
<li><a href="../de425877/index.html">Laut Apple-CEO sind chinesische Spionagechips in Supermicro-Servern Fiktion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>