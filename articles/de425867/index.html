<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèΩ‚Äçüé§ üèÑ üòà Testen der Webdienstleistung im Rahmen der kontinuierlichen Integration. Yandex Erfahrung üë©‚Äçüë©‚Äçüëß‚Äçüëß üëÜ üë¥üèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fast alle neuen Yandex-Mitarbeiter sind erstaunt √ºber das Ausma√ü der Belastungen, denen unsere Produkte ausgesetzt sind. Tausende von Hosts mit Hunder...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Testen der Webdienstleistung im Rahmen der kontinuierlichen Integration. Yandex Erfahrung</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/425867/"><p>  Fast alle neuen Yandex-Mitarbeiter sind erstaunt √ºber das Ausma√ü der Belastungen, denen unsere Produkte ausgesetzt sind.  Tausende von Hosts mit Hunderttausenden von Anfragen pro Sekunde.  Und dies ist nur eine der Dienstleistungen.  Gleichzeitig m√ºssen wir in Sekundenbruchteilen auf Anfragen reagieren.  Selbst eine geringf√ºgige √Ñnderung des Produkts kann erhebliche Auswirkungen auf die Leistung haben. Daher ist es wichtig, die Auswirkungen Ihres Codes auf den Service zu testen und zu bewerten. </p><br><p>  In unserem Service f√ºr Werbetechnologien werden Tests im Rahmen der Continuous-Integration-Methodik durchgef√ºhrt, die wir am 25. Oktober auf der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex-</a> Veranstaltung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von innen</a> ausf√ºhrlicher diskutieren werden. Heute werden wir den Lesern von Habr die Erfahrung der Automatisierung der Bewertung wichtiger Produktmetriken im Zusammenhang mit der Serviceleistung mitteilen.  Sie lernen, wie Sie einer Maschine eine Analyse anvertrauen und diese nicht in Diagrammen verfolgen.  Lass uns gehen! </p><br><img src="https://habrastorage.org/webt/iz/tt/0g/iztt0gctohbgmc0liwkarkwteye.jpeg"><br><p><a name="habracut"></a>  Es geht nicht darum, wie man die Site testet.  Hierf√ºr gibt es viele Online-Tools.  Heute werden wir √ºber einen hoch ausgelasteten internen Backend-Service sprechen, der Teil eines gro√üen Systems ist und Informationen f√ºr einen externen Service vorbereitet.  In unserem Fall f√ºr Suchergebnisseiten und Partnerseiten.  Wenn unsere Komponente keine Zeit hat zu antworten, werden die Informationen daraus einfach nicht an den Benutzer weitergegeben.  Das Unternehmen wird also Geld verlieren.  Daher ist es sehr wichtig, rechtzeitig zu reagieren. </p><br><p>  Welche wichtigen Servermetriken k√∂nnen hervorgehoben werden? </p><br><ul><li>  <strong>Anfrage pro Sekunde (RPS)</strong> .  Das Gl√ºck eines Benutzers ist uns nat√ºrlich wichtig.  Aber was ist, wenn nicht einer, sondern Tausende von Benutzern zu Ihnen kamen?  Wie viele Anforderungen pro Sekunde kann Ihr Server standhalten und nicht fallen? </li><li>  <strong>Zeit pro Anfrage</strong> .  Der Inhalt der Website sollte so schnell wie m√∂glich gerendert werden, damit der Benutzer nicht m√ºde wird zu warten und nicht in den Laden f√ºr Popcorn geht.  In unserem Fall wird er keinen wichtigen Teil der Informationen auf der Seite sehen. </li><li>  <strong>Resident Set Size (RSS)</strong> .  Stellen Sie sicher, dass Sie √ºberwachen, wie viel Speicher Ihr Programm belegt.  Wenn der Dienst den gesamten Speicher belegt, ist es kaum m√∂glich, √ºber Fehlertoleranz zu sprechen. </li><li>  <strong>HTTP-Fehler</strong> . </li></ul><br><p>  Also lasst es uns in Ordnung bringen. </p><br><h3 id="request-per-second">  Anfrage pro Sekunde </h3><br><p>  Unser Entwickler, der sich schon lange mit Lasttests besch√§ftigt, spricht gerne √ºber die kritische Ressource des Systems.  Mal sehen, was es ist. </p><br><p> Jedes System hat seine eigenen Konfigurationsmerkmale, die den Betrieb bestimmen.  Zum Beispiel Warteschlangenl√§nge, Antwortzeitlimit, Threads-Worker-Pool usw.  Daher kann es vorkommen, dass die Kapazit√§t Ihres Dienstes auf einer dieser Ressourcen beruht.  Sie k√∂nnen ein Experiment durchf√ºhren.  Erh√∂hen Sie nacheinander jede Ressource.  Eine Ressource, deren Erh√∂hung die Kapazit√§t Ihres Dienstes erh√∂ht, ist f√ºr Sie von entscheidender Bedeutung.  In einem gut konfigurierten System m√ºssen Sie nicht eine Ressource, sondern mehrere Ressourcen erh√∂hen, um die Kapazit√§t zu erh√∂hen.  Dies kann aber immer noch "gef√ºhlt" werden.  Es ist gro√üartig, wenn Sie Ihr System so konfigurieren k√∂nnen, dass alle Ressourcen mit voller St√§rke arbeiten und der Service in den vorgegebenen Zeitrahmen passt. </p><br><p>  Um abzusch√§tzen, wie viele Anforderungen Ihr Server pro Sekunde aush√§lt, m√ºssen Sie einen Anforderungsstrom an ihn senden.  Da wir diesen Prozess in das CI-System integriert haben, verwenden wir eine sehr einfache ‚ÄûWaffe‚Äú mit eingeschr√§nkter Funktionalit√§t.  Aber von Open Source Software ist Yandex.Tank perfekt f√ºr diese Aufgabe.  Er hat detaillierte <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Unterlagen</a> .  Ein Geschenk an Tank ist ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Service</a> zum Anzeigen der Ergebnisse. </p><br><p>  <em>Ein kleines St√ºck.</em>  Yandex.Tank verf√ºgt √ºber eine ziemlich umfangreiche Funktionalit√§t, die nicht nur auf die Automatisierung von Beschussanforderungen beschr√§nkt ist.  Es wird auch helfen, Metriken Ihres Dienstes zu sammeln, Diagramme zu erstellen und das Modul mit der Logik zu verbinden, die Sie ben√∂tigen.  Generell empfehlen wir dringend, ihn kennenzulernen. </p><br><p>  Jetzt m√ºssen Sie Anfragen an den Tank weiterleiten, damit diese bei uns ausgel√∂st werden k√∂nnen.  Die Anforderungen, mit denen Sie den Server sch√§len, k√∂nnen vom gleichen Typ sein, k√ºnstlich erstellt und weitergegeben werden.  Messungen sind jedoch viel genauer, wenn Sie f√ºr einen bestimmten Zeitraum einen echten Pool von Anfragen von Benutzern erfassen k√∂nnen. </p><br><p>  Die Kapazit√§t kann auf zwei Arten gemessen werden. </p><br><p>  <strong>Offenes Lastmodell (Stresstest)</strong> </p><br><p>  Machen Sie "Benutzer", dh mehrere Threads, die eine Anfrage an Ihr System senden.  Die Last, die wir nicht geben werden, ist konstant, sondern baut sie auf oder speist sie sogar in Wellen.  Dann bringt es uns dem wirklichen Leben n√§her.  Wir erh√∂hen den RPS und erfassen den Punkt, an dem der gesch√§lte Dienst die SLA ‚Äûdurchbricht‚Äú.  So k√∂nnen Sie die Grenzen des Systems finden. </p><br><p>  Um die Anzahl der Benutzer zu berechnen, k√∂nnen Sie die Little-Formel verwenden (Sie k√∂nnen hier dar√ºber lesen).  Ohne die Theorie sieht die Formel folgenderma√üen aus: </p><br><p>  RPS = 1000 / T * Arbeiter, wobei </p><br><p>  ‚Ä¢ T - durchschnittliche Zeit der Anforderungsverarbeitung (in Millisekunden); <br>  ‚Ä¢ Arbeiter - die Anzahl der F√§den; <br>  ‚Ä¢ 1000 / T-Anforderungen pro Sekunde - Dieser Wert wird von einem Single-Threaded-Generator generiert. </p><br><p>  <strong>Modell mit geschlossener Last (Lastpr√ºfung)</strong> </p><br><p>  Wir nehmen eine feste Anzahl von "Benutzern".  Sie m√ºssen es so konfigurieren, dass die Eingabewarteschlange, die der Konfiguration Ihres Dienstes entspricht, immer verstopft ist.  Gleichzeitig macht es keinen Sinn, die Anzahl der Threads √ºber das Warteschlangenlimit zu setzen, da wir uns auf dieser Anzahl ausruhen und die verbleibenden Anforderungen vom Server mit einem 5xx-Fehler verworfen werden.  Wir pr√ºfen, wie viele Anfragen pro Sekunde das Design ausgeben kann.  Ein solches Schema √§hnelt im allgemeinen Fall nicht dem tats√§chlichen Anforderungsfluss, hilft jedoch dabei, das Verhalten des Systems bei maximaler Last darzustellen und seinen Durchsatz zum aktuellen Zeitpunkt abzusch√§tzen. </p><br><p>  F√ºr die √ºberwiegende Mehrheit der Systeme (bei denen die kritische Ressource nicht mit der Verarbeitung von Verbindungen zusammenh√§ngt) ist das Ergebnis dasselbe.  Gleichzeitig ist das geschlossene Modell ger√§usch√§rmer, da sich das System w√§hrend des gesamten Tests im f√ºr uns interessanten Lastbereich befindet. </p><br><p>  Beim Testen unseres Service verwenden wir ein geschlossenes Modell.  Nach dem Schie√üen gibt uns die Waffe an, wie viele Anfragen pro Sekunde unser Service stellen konnte.  Yandex.Tank dieser Indikator ist auch leicht zu erkennen. </p><br><h3 id="time-per-request">  Zeit pro Anfrage </h3><br><p>  Wenn wir zum vorherigen Absatz zur√ºckkehren, wird deutlich, dass es bei einem solchen Schema keinen Sinn macht, die Antwortzeit auf eine Anfrage zu bewerten.  Je st√§rker wir das System laden, desto mehr verschlechtert es sich und desto l√§nger reagiert es.  Um die Antwortzeit zu testen, sollte der Ansatz daher unterschiedlich sein. </p><br><p>  Um die durchschnittliche Antwortzeit zu erhalten, verwenden wir denselben Yandex.Tank.  Erst jetzt setzen wir den RPS entsprechend dem Durchschnittsindikator Ihres Systems in der Produktion.  Nach dem Beschuss erhalten wir Antwortzeiten f√ºr jede Anfrage.  Basierend auf den gesammelten Daten k√∂nnen Perzentile der Antwortzeiten berechnet werden. </p><br><p>  Als n√§chstes m√ºssen Sie verstehen, welches Perzentil wir f√ºr wichtig halten.  Zum Beispiel bauen wir auf der Produktion auf.  Wir k√∂nnen 1% der Anfragen nach Fehlern, Nichtantworten, Debugging-Anfragen, die lange Zeit funktionieren, Problemen mit dem Netzwerk usw. hinterlassen.  Daher halten wir die Antwortzeit f√ºr signifikant, die 99% der Anfragen ber√ºcksichtigt. </p><br><h3 id="resident-set-size">  Resident Set Gr√∂√üe </h3><br><p>  Unser Server arbeitet direkt mit Dateien √ºber <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">mmap</a> .  Wenn wir den RSS-Index messen, m√∂chten wir wissen, wie viel Speicher das Programm w√§hrend des Betriebs vom Betriebssystem ben√∂tigt hat. </p><br><p>  Unter Linux wird die Datei / proc / PID / smaps geschrieben - dies ist eine kartenbasierte Erweiterung, die den Speicherverbrauch f√ºr jede der Prozesszuordnungen anzeigt.  Wenn Ihr Prozess tmpfs verwendet, werden sowohl anonymer als auch nicht anonymer Speicher in Smaps geraten.  Nicht anonymer Speicher umfasst beispielsweise Dateien, die in den Speicher geladen werden.  Hier ist ein Beispieleintrag in smaps.  Eine bestimmte Datei wird angegeben und ihr Parameter Anonym = 0 KB. </p><br><pre><code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea65a60000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea65a61000 r--s <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">09</span></span>:<span class="hljs-number"><span class="hljs-number">03</span></span> <span class="hljs-number"><span class="hljs-number">79169191</span></span> /place/home/.../some.yabs Size: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">0</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd mr me ms</code> </pre> <br><p>  Dies ist ein Beispiel f√ºr eine anonyme Speicherzuweisung.  Wenn ein Prozess (dieselbe mmap) das Betriebssystem auffordert, eine bestimmte Speichergr√∂√üe zuzuweisen, wird ihm eine Adresse zugewiesen.  W√§hrend des Prozesses wird nur virtueller Speicher belegt.  Zu diesem Zeitpunkt wissen wir noch nicht, welcher physische Speicherplatz zugewiesen wird.  Wir sehen eine namenlose Aufzeichnung.  Dies ist ein Beispiel f√ºr die Zuweisung von anonymem Speicher.  Das System wurde mit einer Gr√∂√üe von 24572 kB angefordert, aber sie verwendeten es nicht und tats√§chlich wurde nur RSS = 4 kB genommen. </p><br><pre> <code class="hljs go"><span class="hljs-number"><span class="hljs-number">7f</span></span>ea67264000<span class="hljs-number"><span class="hljs-number">-7f</span></span>ea68a63000 rw-p <span class="hljs-number"><span class="hljs-number">00000000</span></span> <span class="hljs-number"><span class="hljs-number">00</span></span>:<span class="hljs-number"><span class="hljs-number">00</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> Size: <span class="hljs-number"><span class="hljs-number">24572</span></span> kB Rss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Pss: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Shared_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Shared_Dirty: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Clean: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Private_Dirty: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Referenced: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Anonymous: <span class="hljs-number"><span class="hljs-number">4</span></span> kB AnonHugePages: <span class="hljs-number"><span class="hljs-number">0</span></span> kB Swap: <span class="hljs-number"><span class="hljs-number">0</span></span> kB KernelPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB MMUPageSize: <span class="hljs-number"><span class="hljs-number">4</span></span> kB Locked: <span class="hljs-number"><span class="hljs-number">0</span></span> kB VmFlags: rd wr mr mw me ac</code> </pre> <br><p>  Da der zugewiesene nicht anonyme Speicher nach dem Stoppen des Prozesses nirgendwo hingeht, wird die Datei nicht gel√∂scht. Wir sind nicht an einem solchen RSS interessiert. </p><br><p>  Bevor Sie mit dem Aufnehmen auf dem Server beginnen, fassen wir das RSS aus / proc / PID / smaps zusammen, das f√ºr anonymen Speicher reserviert ist, und merken es sich.  Wir f√ºhren Schalen durch, √§hnlich der Testzeit pro Anfrage.  Betrachten Sie RSS nach Abschluss erneut.  Der Unterschied zwischen dem Anfangs- und dem Endzustand ist die Speichermenge, die Ihr Prozess w√§hrend des Betriebs verwendet hat. </p><br><h3 id="http-oshibki">  HTTP-Fehler </h3><br><p>  Vergessen Sie nicht, die Antwortcodes zu befolgen, die der Service w√§hrend des Tests zur√ºckgibt.  Wenn beim Einrichten eines Tests oder einer Umgebung ein Fehler aufgetreten ist und der Server f√ºr alle Ihre Anforderungen 5xx- und 4xx-Fehler zur√ºckgegeben hat, war ein solcher Test nicht sinnvoll.  Wir √ºberwachen den Anteil der schlechten Antworten.  Wenn viele Fehler vorliegen, wird der Test als ung√ºltig betrachtet. </p><br><h3 id="nemnogo-o-tochnosti-izmereniy">  Ein bisschen √ºber Messgenauigkeit </h3><br><p>  Und jetzt das Wichtigste.  Kehren wir zu den vorherigen Abs√§tzen zur√ºck.  Die absoluten Werte der von uns berechneten Metriken sind f√ºr uns nicht so wichtig.  Nein, nat√ºrlich k√∂nnen Sie unter Ber√ºcksichtigung aller Faktoren, Fehler und Schwankungen eine Stabilit√§t der Indikatoren erreichen.  Schreiben Sie parallel eine wissenschaftliche Arbeit zu diesem Thema (√ºbrigens, wenn jemand nach einer suchte, k√∂nnte dies eine gute Option sein).  Das interessiert uns aber nicht. </p><br><p>  Es ist wichtig, dass wir das spezifische Commit f√ºr den Code in Bezug auf den vorherigen Status des Systems beeinflussen.  Das hei√üt, der Unterschied zwischen Metriken von Commit zu Commit ist wichtig.  Und hier ist es notwendig, einen Prozess einzurichten, der diese Differenz vergleicht und gleichzeitig die Stabilit√§t des Absolutwerts in diesem Intervall sicherstellt. </p><br><p>  Die Umgebung, Anforderungen, Daten, Servicestatus - alle uns zur Verf√ºgung stehenden Faktoren sollten festgelegt werden.  Es ist dieses System, das im Rahmen der kontinuierlichen Integration f√ºr uns funktioniert und uns Informationen √ºber alle Arten von √Ñnderungen liefert, die bei jedem Commit aufgetreten sind.  Trotzdem wird es nicht m√∂glich sein, alles zu reparieren, es wird L√§rm geben.  Wir k√∂nnen das Rauschen nat√ºrlich reduzieren, indem wir das Sample erh√∂hen, dh mehrere Iterationen der Aufnahme durchf√ºhren.  Nach dem Aufnehmen von beispielsweise 15 Iterationen k√∂nnen wir den Median der resultierenden Stichprobe berechnen.  Au√üerdem muss ein Gleichgewicht zwischen Rauschen und Aufnahmedauer gefunden werden.  Zum Beispiel haben wir uns auf einen Fehler von 1% geeinigt.  Wenn Sie eine komplexere und genauere statistische Methode gem√§√ü Ihren Anforderungen ausw√§hlen m√∂chten, empfehlen wir ein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Buch</a> , in dem Optionen mit einer Beschreibung, wann und welche verwendet werden, aufgef√ºhrt sind. </p><br><h3 id="chto-eschyo-mozhno-sdelat-s-shumom">  Was kann man sonst noch mit L√§rm machen? </h3><br><p>  Beachten Sie, dass die Umgebung, in der Sie Tests durchf√ºhren, bei solchen Tests eine wichtige Rolle spielt.  Der Pr√ºfstand sollte zuverl√§ssig sein und keine anderen Programme ausf√ºhren, da dies zu einer Verschlechterung Ihres Dienstes f√ºhren kann.  Dar√ºber hinaus k√∂nnen und werden die Ergebnisse vom Lastprofil, der Umgebung, der Datenbank und verschiedenen ‚Äûmagnetischen St√ºrmen‚Äú abh√§ngen. </p><br><p>  Im Rahmen eines einzelnen Commit-Tests f√ºhren wir mehrere Iterationen auf verschiedenen Hosts durch.  Erstens, wenn Sie die Cloud verwenden, kann dort alles passieren.  Auch wenn die Cloud wie unsere spezialisiert ist, funktionieren Serviceprozesse dort immer noch.  Daher k√∂nnen Sie sich nicht auf das Ergebnis eines Hosts verlassen.  Und wenn Sie einen eisernen Wirt haben, in dem es wie in der Cloud keinen Standardmechanismus zum Erh√∂hen der Umgebung gibt, k√∂nnen Sie ihn sogar versehentlich einmal zerbrechen und so belassen.  Und er wird dich immer anl√ºgen.  Deshalb fahren wir unsere Tests in der Cloud. </p><br><p>  Daraus ergibt sich zwar eine andere Frage.  Wenn Ihre Messungen jedes Mal auf verschiedenen Hosts durchgef√ºhrt werden, k√∂nnen die Ergebnisse ein wenig Rauschen verursachen und aus diesem Grund auch.  Dann k√∂nnen Sie die Messwerte f√ºr den Host normalisieren.  Das hei√üt, nach historischen Daten den ‚ÄûWirtskoeffizienten‚Äú erfassen und bei der Analyse der Ergebnisse ber√ºcksichtigen. </p><br><p>  Die Analyse historischer Daten zeigt, dass die Hardware unterschiedlich ist.  Das Wort "Hardware" umfasst hier die Kernel-Version und die Folgen der Verf√ºgbarkeit (anscheinend keine beweglichen Kernel-Objekte im Speicher). </p><br><p>  Daher ordnen wir jedem "Host" (beim Neustart "stirbt" der Host und ein "neues" erscheint die √Ñnderung zu, mit der wir den RPS vor der Aggregation multiplizieren. </p><br><p>  Wir pr√ºfen und aktualisieren die √Ñnderungen auf √§u√üerst ungeschickte Weise, was verd√§chtig an eine Option f√ºr ein Verst√§rkungstraining erinnert. </p><br><p>  F√ºr einen gegebenen Vektor von Posthost-Korrekturen betrachten wir die Zielfunktion: </p><br><ul><li>  In jedem Test ber√ºcksichtigen wir die Standardabweichung der erhaltenen ‚Äûkorrigierten‚Äú RPS-Ergebnisse </li><li>  Nehmen Sie den Durchschnitt von ihnen mit gleichen Gewichten <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><mo stretchy=&quot;false&quot;>(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&amp;#x2212;</mo><mi>n</mi><mi>o</mi><mi>w</mi><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy=&quot;false&quot;>)</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="33.778ex" height="2.66ex" viewBox="0 -832 14543.4 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-65" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-78" x="466" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-70" x="1039" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-28" x="1542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-28" x="1932" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="2321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-65" x="2683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-73" x="3149" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="3619" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="3980" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-69" x="4342" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6D" x="4687" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-65" x="5566" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-73" x="6032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="6502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-61" x="6863" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6D" x="7393" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-70" x="8271" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-2212" x="8997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6E" x="9997" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-6F" x="10598" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-77" x="11083" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-29" x="11800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-2F" x="12189" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-74" x="12690" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-61" x="13051" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMATHI-75" x="13581" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://habr.com/ru/company/yandex/blog/425867/&amp;usg=ALkJrhjFIDtdfkrjXn7ZTQ4m00BdQaqxlA#MJMAIN-29" x="14153" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi><mi>x</mi><mi>p</mi><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>t</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>t</mi><mi>i</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>‚àí</mo><mi>n</mi><mi>o</mi><mi>w</mi><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mi>t</mi><mi>a</mi><mi>u</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> exp ((testtimestamp - now) / tau) </script>  , </li><li>  Wir haben Tau = 1 Woche. </li></ul><br><p>  Dann setzen wir eine Korrektur (f√ºr den Host mit der gr√∂√üten Summe dieser Gewichte) auf 1,0 und suchen nach den Werten aller anderen Korrekturen, die ein Minimum der Zielfunktion ergeben. </p><br><p>  Um die Ergebnisse f√ºr historische Daten zu validieren, ber√ºcksichtigen wir die Korrekturen f√ºr die alten Daten. Wir betrachten das korrigierte Ergebnis f√ºr die frischen Daten und vergleichen sie mit den nicht korrigierten. </p><br><p>  Eine weitere Option zum Anpassen der Ergebnisse und zum Reduzieren des Rauschens ist die Normalisierung auf "Kunststoffe".  F√ºhren Sie vor dem Starten des zu testenden Dienstes ein ‚Äûsynthetisches Programm‚Äú auf dem Host aus, mit dem Sie den Status des Hosts auswerten und den Korrekturfaktor berechnen k√∂nnen.  In unserem Fall verwenden wir jedoch hostbasierte Korrekturen, und diese Idee ist eine Idee geblieben.  Vielleicht wird einer von euch sie m√∂gen. </p><br><p>  Vergessen Sie trotz der Automatisierung und all ihrer Vorteile nicht die Dynamik Ihrer Indikatoren.  Es ist wichtig sicherzustellen, dass sich der Service im Laufe der Zeit nicht verschlechtert.  M√∂glicherweise bemerken Sie keine kleinen Drawdowns, sie k√∂nnen sich ansammeln, und √ºber einen langen Zeitraum k√∂nnen Ihre Indikatoren durchh√§ngen.  Hier ist ein Beispiel unserer Grafiken, die wir bei RPS betrachten.  Es zeigt den relativen Wert f√ºr jedes √ºberpr√ºfte Commit, seine Nummer und die F√§higkeit, zu sehen, woher die Freigabe zugewiesen wurde. </p><br><img src="https://habrastorage.org/webt/qu/lj/_h/qulj_hvry8sfubkrt285xlzidsq.png"><br><img src="https://habrastorage.org/webt/gp/76/o9/gp76o9rgelvep5u8rrpyoricmfs.png"><br><p>  Wenn Sie den Artikel lesen, ist es auf jeden Fall interessant f√ºr <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie, einen</a> Bericht √ºber Yandex.Tank und eine Analyse der Ergebnisse von Lasttests zu sehen. </p><br><p>  Wir erinnern Sie auch daran, dass wir im Rahmen der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Yandex-</a> Veranstaltung <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">von innen</a> ausf√ºhrlicher √ºber die Organisation der kontinuierlichen Integration sprechen werden.  Komm zu Besuch! </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de425867/">https://habr.com/ru/post/de425867/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de425851/index.html">Infer.NET: Leistungsstarkes maschinelles Lernsystem jetzt OpenSource</a></li>
<li><a href="../de425853/index.html">Alle Konversations-KI bei der ersten Konversationskonferenz</a></li>
<li><a href="../de425855/index.html">Zucken machte mich besser und half mir, die drei dunkelsten Monate meines Lebens zu √ºberleben.</a></li>
<li><a href="../de425859/index.html">Regionale Betreiber lehnen die Aufhebung des Roamings ab</a></li>
<li><a href="../de425861/index.html">Testen Sie sich selbst: K√∂nnen Sie das Unternehmen vor Cyber-Angriffen sch√ºtzen?</a></li>
<li><a href="../de425869/index.html">iFixit: Apple hat das Blockieren von √ºberholten MacBooks noch nicht aktiviert</a></li>
<li><a href="../de425871/index.html">Jekaterinburg, 11. Oktober - Atlassian trifft Hafenarbeiter</a></li>
<li><a href="../de425873/index.html">[CppCon 2018] Herb Sutter: Auf dem Weg zu einem einfacheren und leistungsst√§rkeren C ++</a></li>
<li><a href="../de425875/index.html">Notebook-Matrix-Upgrade TN-> IPS oder wie man einen fortgeschritteneren Laptop von einem Budget-Laptop bekommt</a></li>
<li><a href="../de425877/index.html">Laut Apple-CEO sind chinesische Spionagechips in Supermicro-Servern Fiktion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>