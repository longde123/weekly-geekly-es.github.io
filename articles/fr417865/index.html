<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üé§ üë©üèº‚Äçüíº ü§ï Accessibilit√© Android - un loup d√©guis√© en mouton? Conf√©rence Yandex üë©üèº‚Äçü§ù‚Äçüë®üèª üßóüèº üëêüèª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il y a un mois, lors du prochain Droid Party, la d√©veloppeur principale Danila Fetisov a examin√© en d√©tail le principe du service, qui est responsable...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Accessibilit√© Android - un loup d√©guis√© en mouton? Conf√©rence Yandex</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/yandex/blog/417865/">  Il y a un mois, lors du prochain <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Droid Party, la</a> d√©veloppeur principale Danila Fetisov a examin√© en d√©tail le principe du service, qui est responsable des fonctions d'accessibilit√© d'Android.  Vous apprendrez √† l'utiliser pour am√©liorer l'accessibilit√© de vos projets, ainsi qu'une dangereuse vuln√©rabilit√© appel√©e clickjacking. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/dxbv5EoiRxc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  - Je m'appelle Danila Fetisov, je suis du bureau de Moscou de Yandex, plus pr√©cis√©ment de Taxi, plus pr√©cis√©ment de Taximeter.  Aujourd'hui, nous allons parler de ce qu'est l'accessibilit√© Android et pourquoi j'ai d√©cid√© d'appeler une si petite chose sainte pour les personnes handicap√©es un loup d√©guis√© en mouton. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/cv/vo/zp/cvvozpr20mbka0ypbsfbidevqg4.jpeg"><br><br>  Donc, les grandes lignes du rapport.  Tout d'abord, nous verrons comment cette chose peut √™tre utilis√©e, cr√©√©e et personnalis√©e.  Je vais peut-√™tre vous dire quelques astuces de vie, des nishtyaks d'√©picerie.  Et puis sur le plus int√©ressant - pourquoi cette chose est dangereuse. <br><img src="https://habrastorage.org/webt/a9/ey/rl/a9eyrlotqmcnesi28xvqz-eccf4.jpeg"><br>  Comment pouvons-nous appliquer cela?  En g√©n√©ral, qu'est-ce que pour ceux qui ne savent pas?  Tous les √©v√©nements se produisent dans le syst√®me, ils entrent dans notre service et nous les traitons. <br><br>  Une fois que quelque chose nous tombe dessus, nous pouvons prendre le contenu √† partir de l√† et l'exprimer en utilisant le m√™me Yandex SpeechKit, Google Text-to-Speech ou autre chose que vous aimez.  Mais ce qui est le plus int√©ressant, nous pouvons non seulement recevoir, mais aussi lancer un √©v√©nement syst√®me.  Vous pouvez toujours dire quelque chose.  Il a lanc√© l'√©v√©nement, a appuy√© sur le bouton, et tout va bien, profitez de la vie. <br><br>  Si nous parlons de ces deux points, ils sont en fait par d√©faut.  Google a lanc√© cette fonctionnalit√© pour que les personnes handicap√©es puissent utiliser votre application.  Mais comme tout le monde le sait, nous, les d√©veloppeurs, ne voulons pas nous ennuyer: nous nous asseyons, regardons le code et pensons: comment l'appliquer?  Et c'est parti. <br><br>  Automatisation, test en simulant les actions des utilisateurs, publicit√© contextuelle.  Vous comprenez: puisque nous obtenons du contenu de l'√©cran, nous pouvons comprendre comment frustrer cet utilisateur. <br><br>  Quoi d'autre est int√©ressant?  Traitement des demandes USSD.  Malheureusement, l'API normale n'est apparue qu'√† partir du 26e SDK, et les d√©veloppeurs doivent en quelque sorte survivre.  Et vous imaginez, ils analysent s√©rieusement les demandes USSD, analysant les interfaces utilisateur √† l'aide d'AccessibilityService. <br><br>  Le sixi√®me point est l'ellipse.  Pourquoi?  Parce qu'apr√®s ce rapport, vous comprendrez comment l'appliquer et pour quoi.  Et puis vous ouvrez litt√©ralement votre flux d'imagination, prenez une tasse de th√©, de caf√© et conduisez pour coder leurs fonctionnalit√©s cool. <br><br>  Par o√π commencer?  La diapositive suivante sera douloureusement courante. <br><img src="https://habrastorage.org/webt/u8/jc/wx/u8jcwxc0utuf1cuifynebg6ln-i.jpeg"><br><br>  Nous prenons un service, h√©ritons d'AccessibilityService et profitons de la vie. <br><br>  Ensuite, nous lan√ßons ce service dans Manifest, et qu'est-ce qui est int√©ressant ici?  Essentiellement un dossier de service r√©gulier.  Mais faites attention au champ d'√©tiquette.  Maintenant, je ne dirai pas ce que c'est.  N'oubliez pas que ce sera un peu plus tard. <br><img src="https://habrastorage.org/webt/u3/0x/_r/u30x_rwrhhj5ofyohytu0m97zua.jpeg"><br><img src="https://habrastorage.org/webt/qk/8p/yd/qk8pydxidl1roqfqjecast4wtns.jpeg"><br><br>  Plus loin dans Manifest, nous avons juste un fichier de configuration, rien d'int√©ressant non plus. <br><img src="https://habrastorage.org/webt/51/g8/eo/51g8eoxbsuo4pug8fio8_cltyhu.jpeg"><br><br>  Et le fichier de configuration lui-m√™me semble un peu plus terrible.  D'apr√®s ce dont vous aurez besoin, 85 √† 90% sont probablement le champ des param√®tres de filtre pour les √©v√©nements entrants. <br><br>  Disons que cela vaut la peine de vouloir recevoir absolument tous les √©v√©nements.  Vous pouvez mettre un filtre uniquement sur les clics, sur le changement de contenu ou sur autre chose. <br><br>  Vient ensuite un filtre pour les packages d'application.  √Ä quoi √ßa sert?  Vous comprenez parfaitement que recevoir des √©v√©nements de toutes les applications du syst√®me serait trop pour une seule application.  Par cons√©quent, Google a d√©cid√© de la limiter en quelque sorte.  Ajout d'un filtre. <br><br>  Plus de description.  Il y avait un champ d'√©tiquette, et maintenant utilisez la description.  En fait, ils cr√©ent une paire, qui indique ensuite √† l'utilisateur pourquoi vous devez activer votre service. <br><br>  Et le dernier point: le contenu est n√©cessaire ou pas n√©cessaire √† partir de la fen√™tre ouverte actuelle.  Si vous voulez simplement comprendre qu'un √©v√©nement s'est produit, d√©finissez-le sur false et ne tourmentez plus l'utilisateur. <br><img src="https://habrastorage.org/webt/qi/xf/n8/qixfn8lb2tnrxvzvsedyjhp26v4.jpeg"><br><br>  L'inclusion du service.  Malheureusement, pour activer cette fonctionnalit√©, vous devrez torturer l'utilisateur et le forcer √† parcourir sept cercles de param√®tres infernaux, relativement parlant. <br><br>  Tout d'abord, nous lui ouvrons des opportunit√©s sp√©ciales.  Cool AccessibilityService - c'est exactement la m√™me √©tiquette du manifeste, dont je vous ai parl√© dans les diapositives pr√©c√©dentes. <br><img src="https://habrastorage.org/webt/ys/kn/5d/yskn5d7xfrtm1xumv1s7qoiah3y.jpeg"><br><br>  Plus loin.  L'utilisateur doit s√©lectionner votre service, puis il commence √† lire la description, pourquoi voulez-vous activer ce service et obtenir un certain contr√¥le sur l'appareil. <br><img src="https://habrastorage.org/webt/hl/1c/ge/hl1cge-ths25xe4nd9idmbs4vzk.jpeg"><br><br>  OK, comprend.  Mais √ßa y √©tait.  Une sorte de dialogue effrayant sort, qui dit: "Mec, si vous l'allumez maintenant, nous prendrons le contr√¥le total de votre demande, relativement parlant, tout sera effrayant."  Les utilisateurs ne lisent pas toujours tout cela, il suffit de cliquer sur ¬´OK¬ª pour que nous soyons derri√®re eux.  Nous vivons donc. <br><br>  Eh bien, o√π en est le traitement des √©v√©nements?  La diapositive suivante est un peu plus intelligente que la premi√®re diapositive sur le service, mais n√©anmoins. <br><img src="https://habrastorage.org/webt/az/l9/w2/azl9w2qudcqjphygfi-60a0dniy.jpeg"><br><br>  Voici notre DummyAccessibilityService, et nous y d√©posons deux m√©thodes, dans lesquelles nous allons tout √©crire.  En fait, l'interruption est une telle m√©thode dans laquelle vous devez nettoyer vos liens, arr√™ter les abonnements ou autre chose. <br><br>  Le plus int√©ressant est la classe AccessibilityEvent, qui nous revient.  Que pouvons-nous en retirer? <br><img src="https://habrastorage.org/webt/no/xx/vc/noxxvcfn4y0yml08swcmvl2xfa8.jpeg"><br>  Pour commencer, nous pouvons comprendre ce qui s'est r√©ellement pass√© dans votre syst√®me.  Nous prenons EventType, et qu'obtenons-nous ici? <br><br>  Et nous obtenons que nous avons une sorte d'activit√© ouverte, ou Dialogue, ou Popup, ou en g√©n√©ral la notification est tomb√©e.  Tout tombe juste l√† sur window_state_changed. <br><br>  Nous comprenons en outre que le contenu de certaines vues a chang√©.  Ils l'ont d√©plac√©, ont jet√© une ligne dans la vue texte ou quelque chose comme √ßa. <br><br>  Et puis nous d√©couvrons quand l'utilisateur clique ou s√©lectionne une vue.  √Ä mon avis, 85, et m√™me 98, probablement, le pourcentage des principales t√¢ches du produit que vous couvrez avec ces types d'√©v√©nements. <br><br>  Mais si vous n'en avez pas assez, s'il vous pla√Æt, vous pouvez aller dans la documentation, je vous montrerai un lien √† la fin du rapport, et, bien s√ªr, vous allez t√©l√©charger le rapport, vous pouvez continuer.  C'est juste une lecture pour toute la soir√©e, il y a une √©norme liste.  S√©rieusement, vous ne le ma√Ætriserez pas √† la fois. <br><img src="https://habrastorage.org/webt/f5/ja/fz/f5jafzlevas63xsqrin83inyxhc.jpeg"><br>  Maintenant, nous avons une question: comment trouver une vue?  Nous avons d√©couvert ce qui s'est pass√©.  Et maintenant, comprenons avec quelle vue, avec quel composant cela s'est produit. <br><br>  Prenez notre √©v√©nement AccessibilityEvent. <br><br>  Nous lui prenons Source et, voila, nous avons d√©j√† des m√©ta-informations de vue. <br><br>  Mais que se passe-t-il si vous √™tes un d√©veloppeur hardcore et que vous ne disposez pas de suffisamment d'informations sur une seule vue, vous voulez comprendre ce qui se passe essentiellement √† l'√©cran maintenant?  Il existe une limitation sur le SDK, mais elle est petite. <br><img src="https://habrastorage.org/webt/zk/op/5-/zkop5-6exzqeskitmmqwurgzjg0.jpeg"><br>  Nous prenons notre AccessibilityService, et nous obtenons, en fait, une r√©f√©rence √† l'√©l√©ment racine dans toute la hi√©rarchie sur l'√©cran actuel.  Et alors seulement, nous obtenons nos m√©ta-informations sur la vue. <br><img src="https://habrastorage.org/webt/rb/re/bb/rbrebb7swp7d2y33m_hfmukf_dc.jpeg"><br>  Bien s√ªr, c'est cool, mais maintenant vous devriez avoir une question dans votre t√™te: eh bien, nous avons un lien vers l'√©l√©ment racine.  Que faisons-nous ensuite? <br><br>  Si vous voulez suivre la voie s√ªre, alors, s'il vous pla√Æt, la premi√®re option.  Prenez une vue ID et trouvez une seule m√©thode. <br><br>  S'il vous semble que c'est ennuyeux, la chasse est quelque chose de plus amusant, alors nous prenons le texte en vue, nous le trouvons dans le texte. <br><br>  Si ce n'est pas assez int√©ressant pour vous - eh bien, les gars, prenez Child and Recursion, marchez dessus.  Ensuite, vous comprendrez exactement ce qui se passe. <br><br>  Super.  Vous et moi avons trouv√© comment trouver une vue.  Comment maintenant interagir avec elle? <br><br>  Encore une fois, nous prenons notre AccessibilityNodeInfo, et maintenant nous y jetons d√©j√† Action.  Quelle action pouvons-nous y lancer? <br><img src="https://habrastorage.org/webt/gq/fg/wt/gqfgwtmaht-gksrhpzagim1siww.jpeg"><br>  Pour commencer, nous pouvons lancer Click.  Pourquoi √† la fin ai-je mis ici non seulement apr√®s Click, mais aussi Click and Select?  Oui, car il y a un tas de cas d'angle, lorsque le clic habituel ne vous sauve pas.  Supposons qu'un utilisateur s√©lectionne un texte et que cliquer sur la vue supprime proprement la s√©lection de ce texte.  Ou, sur certains appareils, en principe, la vue n'est pas cliquable jusqu'√† ce que vous appeliez Select dessus.  En g√©n√©ral, beaucoup de probl√®mes.  Et si vous voulez simplement prendre un bain de vapeur - s√©lectionnez, cliquez.  Deux actions, et c'est tout, il y a du bonheur. <br><br>  Quelle est la prochaine √©tape avec nous?  Et puis nous avons l'installation de texte.  Ici aussi, tout est simple.  Prenez Action_set_text, cr√©ez un Bundle avec notre ligne et vivez. <br><br>  Et le troisi√®me point est d'aller √† la documentation.  Encore une fois, c'est la deuxi√®me soir√©e que vous aurez.  Un tas d'actions directement, √† mon avis, encore plus que des √©v√©nements. <br><br>  Hourra!  La partie la plus ennuyeuse du rapport est termin√©e.  Il est maintenant temps pour toutes sortes de nishtyachkov. <br><br>  Supposons que vous ayez cr√©√© un service, l'avez configur√© et lanc√© une sorte de traitement d'√©v√©nement.  Vous devez maintenant comprendre comment forcer l'utilisateur, comment lui demander de toujours activer ce service.  Pour comprendre cela, vous devez savoir, en principe, que le service est maintenant activ√© ou non. <br><img src="https://habrastorage.org/webt/bt/ns/dk/btnsdk2nbs59tbxcdsxh1tpdeh8.jpeg"><br><br>  Tout est simple jusqu'√† la banalit√©.  Nous prenons AccessibilityManager et lui demandons tous les services actuellement inclus dans le syst√®me, et nous y trouvons les n√¥tres. <br><br>  Mais tout serait bien s√ªr cool si le gestionnaire d'accessibilit√© √©tait un gars normal, et il n'y en avait pas de tel que vous lui demandiez: "Mec, donnez-moi, s'il vous pla√Æt, tous les services disponibles", et il dit: "D√©sol√©, je ne suis pas aujourd'hui d'humeur.  Voici une liste vide pour vous. "  Et vous √™tes tellement assis et pensez: "Merde, nous avons parl√© normalement." <br><img src="https://habrastorage.org/webt/1d/fg/hb/1dfghb7xfautjz-mkrs0pdkjdd4.jpeg"><br><br>  Eh bien, il y a de bons vieux amis - ce sont Settings.Secure.getInt et getString.  Nous demandons d'abord si les services sont m√™me inclus dans le syst√®me.  S'il est inclus, alors tout est jet√© sur une seule ligne, et l√†, nous recherchons d√©j√† le n√¥tre √† travers une sorte de contenu. <br><br>  Et ici, nous rencontrons le fait que nous avons tout fait correctement.  Nous avons cr√©√© la configuration, cr√©√© la construction de tous les √©v√©nements, activ√© le service.  Nous voyons avec certitude que nous avons activ√© le service, et les √©v√©nements ne nous arrivent pas.  Et donc, ils arrivent ou n'arrivent pas.  √Ä ce moment-l√†, j'ai pens√© que dans ma vie une sorte de strie noire √©tait venue.  Il n'y avait pas d'options. <br><br>  J'ai pens√©, pens√©, reserched, reserched, puis, bingo, j'ai r√©alis√© que c'√©tait Xiaomi avec leur MIUI.  C'est juste la douleur des gars!  C'est s√©rieux. <br><br>  D'accord, comprenez quel est le probl√®me.  Comment le r√©soudre maintenant?  Malheureusement, sur certains micrologiciels de MIUI, tout est fait pour que si votre application n'est pas en d√©marrage automatique, le syst√®me ne d√©marrera m√™me pas votre service en principe. <br><img src="https://habrastorage.org/webt/3b/_k/pm/3b_kpmlnpiqfih6eecs3v8w3x-q.jpeg"><br><br>  Mais voici une solution - nous demandons √† l'utilisateur d'ajouter votre application au d√©marrage automatique, et nous continuons √† vivre, √† profiter de la vie. <br><img src="https://habrastorage.org/webt/y-/qq/zh/y-qqzhgxuwg7vj9hvrilasjw5es.jpeg"><br>  Et puis vint la cerise sur le g√¢teau.  Pourquoi ce service, si gentil pour les personnes handicap√©es, est-il un loup d√©guis√© en mouton? <br><br>  Il me semble que beaucoup d'entre vous ont d√©j√† devin√© que si un utilisateur active ce service, nous pouvons facilement voler beaucoup d'informations confidentielles sur son appareil.  Non seulement nous pouvons le voler, nous pouvons le d√©poser quelque part, par exemple, d√©verrouiller l'√©cran s'il est verrouill√© √† l'aide d'un code PIN.  Bon, ok, d√©verrouille l'√©cran.  Et ensuite?  Nous faisons de la publicit√© nous-m√™mes, nous gagnerons beaucoup d'argent, nous vivrons tout de suite.  Et, en fin de compte, nous pouvons essentiellement imiter absolument toutes les actions de l'utilisateur, et, par exemple, mettre une sorte d'application, lui donner des droits d'administrateur et dire √† l'utilisateur: ¬´Au revoir.  Dites adieu √† votre appareil. " <br><img src="https://habrastorage.org/webt/29/pe/c0/29pec0si917-v1ig0uot2phee9s.jpeg"><br>  D'accord, nous pouvons faire tout cela, mais maintenant vous direz: ¬´Vous, bien s√ªr, bien jou√©.  Il nous a expliqu√© comment nous pouvons voler quel type de donn√©es.  Mais comment incitez-vous l'utilisateur √† activer votre AccessibilityService et si l'application est pour gaucher? ¬ª  D'accord, l'utilisateur, il me semble, ouvre simplement les param√®tres, comprend qu'il y a une sorte de non-sens √©crit, ferme, d√©sinstalle l'application et oublie.  Et vous savez, vous aurez raison en ce sens que la premi√®re fa√ßon d'activer les param√®tres syst√®me passe √† ¬´non¬ª, car, vous savez, c'est une sorte de non-sens.  Et ici, une vuln√©rabilit√© vient √† notre aide, qui, en substance, est appel√©e d√©tournement de clics.  Combien d'entre vous connaissent le d√©tournement de clics?  G√©nial, ce sera int√©ressant. <br><br>  Donc, sur la base de cette vuln√©rabilit√©, certains gars - je mets une petite r√©f√©rence, car toutes les captures d'√©cran suivantes proviendront des ressources de ces gars - ont propos√© une attaque appel√©e Cloak and Dagger.  En fait, avec seulement deux autorisations et une interaction utilisateur minimale, vous avez acc√®s √† l'ensemble de l'application directement √† partir du mot ¬´compl√®tement¬ª. <br>  Mais ok, que devons-nous faire pour pirater l'utilisateur? <br><br>  Nous lan√ßons notre application sur Google Play.  Nous esp√©rons que l'utilisateur de la version Android est inf√©rieur √† 8. <br><br>  Vous comprenez, un peu - 95% pour le moment.  Et c'est tout, l'utilisateur t√©l√©charge notre application. <br><img src="https://habrastorage.org/webt/9v/dn/he/9vdnhevjsiqymsps9saljmvqbxo.jpeg"><br><br>  En bref, ce malware explique √† l'utilisateur comment devenir un bon gars, montre une vid√©o √† la fin.  Maintenant, vous verrez tout par vous-m√™me. <br><img src="https://habrastorage.org/webt/gd/7z/mr/gd7zmrvvkntjwcemk7yutwncngi.jpeg"><br><br>  Ok, commen√ßons.  Un petit texte.  On nous dit: "Si vous commencez le tutoriel maintenant, vous deviendrez un bon gars."  D'accord, bien s√ªr, nous commen√ßons. <br><img src="https://habrastorage.org/webt/pl/sv/hm/plsvhmpjsbzpt3bgzrue8sxz9uw.jpeg"><br><br>  Un autre texte.  De plus, les gens seront pr√©sent√©s sous la forme d'hommes verts.  Bon, ok, cliquons sur Suivant. <br><img src="https://habrastorage.org/webt/lb/ma/eu/lbmaeuozr-ryujmjavqj0qkxile.jpeg"><br><br>  Un autre texte.  Et bien.  Maintenant, je vais finir de le lire et je vais certainement voir une vid√©o sur laquelle ils me diront comment devenir un bon gars. <br><img src="https://habrastorage.org/webt/cm/ip/6_/cmip6_hmlgvpcgaye7vxyx61jbs.jpeg"><br><img src="https://habrastorage.org/webt/oj/9h/ad/oj9hadtoyv97xptkrep1llofyok.jpeg"><br><br>  Je clique sur "OK", et l√† commence la vid√©o.  Ce n'est pas si important pour nous.  Il est important de savoir ce qui s'est r√©ellement pass√© sur l'appareil √† ce moment-l√†.  L'utilisateur lance l'application, et puisque nous l'avons install√©e √† partir de Google Play, nous sommes automatiquement autoris√©s √† superposer.  Voila, nous ouvrons la fen√™tre d'accessibilit√©, et en haut juste superposons.  L'utilisateur clique sur D√©marrer le didacticiel, mais s√©lectionne en fait notre AccessibilityService.  Eh bien, vous comprenez la suite. <br><img src="https://habrastorage.org/webt/wn/mz/ao/wnmzaoxeynacfz_ndt0yqwxqipq.jpeg"><br><br>  Ensuite, nous cliquons sur Suivant, s√©lectionnez le commutateur √† bascule. <br><img src="https://habrastorage.org/webt/bl/-h/ei/bl-hei-modlm3kl0v_jdimivloo.jpeg"><br><br>  √Ä la toute fin, nous activons AccessibilityService, et l'utilisateur ne se rend m√™me pas compte que cela s'est produit. <br><br>  Savez-vous quel est le probl√®me?  La superposition est dispos√©e de mani√®re √† ce qu'ils absorbent compl√®tement tous les √©v√©nements, que tous les contacts soient d√©j√† loin ou qu'ils manquent compl√®tement.  Et le point de cette attaque particuli√®re est que nous remplissons la superposition, tout l'√©cran sauf un espace.  Dans ce cas, il s'agit du bouton OK.  Ce bouton est vraiment issu du dialogue.  Lorsque nous cliquons dessus, nous obtenons un √©v√©nement qui dit que le contact avec l'ext√©rieur s'est produit, et tout va bien. <br><br>  Comment Google r√©pond-il √† tous ces probl√®mes?  Vous comprenez, c'est une vuln√©rabilit√© plut√¥t brutale. <br><img src="https://habrastorage.org/webt/mn/mz/hx/mnmzhxn22qbitijiqknvxdeycxm.jpeg"><br>  Tout a commenc√© de fa√ßon assez int√©ressante - le tout avec huit ans de silence.  Google a d√©voil√© cette petite chose, a d√©clar√©: ¬´Les gars, utilisez-le.  C'est s√ªr.  Je dis pour s√ªr. "  Et bien.  Lan√ßa Google.  Les m√™mes gars que Cloak et Dagger ont invent√©, ont apport√© un soutien, des trackers de probl√®mes et des trackers de bugs. <br><br>  Ensuite, Google a dit: ¬´D'accord, les gars, calmez-vous.  Je vais fermer le d√©tournement de clics √† Oreo. "  Eh bien, fermez-le.  Ils restent assis l√†, ils pensent: ¬´Eh bien, bon sang, les gars, tout de m√™me, si les attaquants forcent l'utilisateur √† activer l'accessibilit√©, ce sera mauvais.  Raillons un peu les d√©veloppeurs. <br><br>  Et ils envoient une lettre: "Faites-le, je ne sais pas quoi, sinon votre application sera supprim√©e de Google Play."  En bref, la lettre √©tait la suivante: "Les gars, dites-nous et les utilisateurs pourquoi vous avez besoin d'AccessibiiltyService."  Comment dire?  Dans quel format?  O??  G√©n√©ralement aucune compr√©hension.  Et dans la lettre, bien s√ªr, cela n'est pas indiqu√©. <br><br>  Et bien.  D'√©normes discussions sur reddit, un tas de lettres √† soutenir.  Et puis un d√©veloppeur met une lettre sur reddit, et il dit: ¬´Oui les gars, rien de compliqu√©.  Mettez-le dans la description que je vous ai montr√©e, manifestement, mettez-le dans la description sur Google Play, et tout ira bien, je vous laisserai tranquille. " <br><br>  √Ä ce moment-l√†, j'ai pens√©: bon, d'accord, j'ai trouv√© cette lettre en marge de Reddit.  Mais que faire si je suis un jeune d√©veloppeur, je viens de me familiariser avec AccessibilityService et je veux publier l'application avec cela?  Comment savoir si je dois effectuer de telles actions, dois-je le d√©poser dans la description sur Google Play, etc.?  J'ai pens√©, pens√©, fouill√©, fouill√©, et, vous savez, les gars, je n'ai rien trouv√© du tout. <br><br>  Eh bien, s√©rieusement, il n'y a rien.  Il y a juste une description dans la documentation principale: ¬´Les gars, c'est uniquement pour les personnes handicap√©es, c'est le point.  Vous ne pouvez plus l'utiliser. "  Mais en fait, il s'av√®re que c'est possible. <br><img src="https://habrastorage.org/webt/5b/lw/_3/5blw_3tvoiwpbotsie5ilkmemve.jpeg"><br>  Eh bien, vous et moi avons pris fin.  De quoi pourrions-nous vous parler?  Nous avons discut√© de la fa√ßon de l'utiliser, compris comment tout cr√©er, le configurer et comment g√©rer les √©v√©nements d'interface utilisateur.  Et, bien s√ªr, nous avons compris comment cela est possible, mais vous n'avez pas besoin d'interagir avec le service d'accessibilit√©.  Bien s√ªr, je ne vous recommande pas de le faire, c'√©tait juste pour information.  Voici les sources promises: <br><br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developer.android.com/guide/topics/ui/accessibility/services</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developer.android.com/reference/android/view/accessibility/AccessibilityEvent</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">developer.android.com/reference/android/view/accessibility/AccessibilityNodeInfo</a> <br>  - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cloak-and-dagger.org</a> <br><br>  Les gars, merci beaucoup pour votre attention! </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr417865/">https://habr.com/ru/post/fr417865/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr417855/index.html">Le "Moon Palace" chinois √©tablit un nouveau record</a></li>
<li><a href="../fr417857/index.html">225 $ spoofer GPS capable de rediriger les robots vers le trafic venant en sens inverse</a></li>
<li><a href="../fr417859/index.html">Int√©gration 3CX avec Microsoft Dynamics 365</a></li>
<li><a href="../fr417861/index.html">Motif premier sans fin</a></li>
<li><a href="../fr417863/index.html">Les enfants √† commander bient√¥t? Le UK Ethics Council autorise le g√©nie g√©n√©tique des embryons humains</a></li>
<li><a href="../fr417867/index.html">Comment √©valuer la dur√©e d'un projet informatique et quand cela ne vaut pas la peine de le faire</a></li>
<li><a href="../fr417869/index.html">Comment d√©boguer WebRTC</a></li>
<li><a href="../fr417871/index.html">√Ä la ligne d'arriv√©e du tourisme suborbital</a></li>
<li><a href="../fr417873/index.html">Fa√ßons de cr√©er des fen√™tres pop-up</a></li>
<li><a href="../fr417875/index.html">Sortir du spa Rabbit Hole avec des rails modernes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>