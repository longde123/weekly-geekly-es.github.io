<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üò† üö• üë©üèº‚Äçüöí T√∫neles y VPN resistentes a DPI üë©üèø‚Äç‚úàÔ∏è üë¨ ‚å®Ô∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Vivimos en un momento interesante. Incluso dir√≠a de maneras asombrosas. Por un lado, vemos algunas personas que realmente quieren saber lo que otras p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>T√∫neles y VPN resistentes a DPI</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/415977/"> Vivimos en un momento interesante.  Incluso dir√≠a de maneras asombrosas.  Por un lado, vemos algunas personas que realmente quieren saber lo que otras personas est√°n hablando entre s√≠, y realmente quieren decirles qu√© se puede leer y qu√© no se puede leer.  Por otro lado, los ciudadanos que desean hacer valer sus derechos a los secretos de la correspondencia personal y la informaci√≥n gratuita, y no quieren que los hechos de esta correspondencia y el recibo de esta informaci√≥n se utilicen en su contra.  Una gran cantidad de sitios de terceros, servicios y negocios que son golpeados por ‚Äúcerraduras de alfombra‚Äù sufren como un bono. <br><br>  Pero no, este art√≠culo no se trata de la sociedad, sino de la tecnolog√≠a. <br><br><img src="https://habrastorage.org/webt/ai/x5/4v/aix54v5uoghgxq1dmmisvj-brke.jpeg" alt="imagen"><br><a name="habracut"></a><br>  La alfabetizaci√≥n t√©cnica de las personas, gracias a todo lo que est√° sucediendo, tambi√©n est√° creciendo.  Si antes las palabras "VPN" y "proxies" eran familiares solo para los especialistas de TI, ahora incluso las amas de casa las conocen y, adem√°s, usan lo que significan estas palabras. <br><br>  En general, la noticia recientemente ha sido bastante entretenida.  Por ejemplo, la prestaci√≥n de servicios VPN y similares para cifrar el tr√°fico y evitar los bloqueos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">ahora</a> es <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">punible</a> , y en China generalmente los <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">encarcelan</a> por esto.  Y no hace mucho tiempo, ILV comenz√≥ a usar el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">an√°lisis de paquetes para bloquear</a> el protocolo MTProxy.  Tambi√©n puede referirse a la experiencia de los pa√≠ses que tienen m√°s √©xito en tales asuntos: China, Ir√°n, Kazajst√°n, Venezuela.  En Venezuela, por ejemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">bloquean</a> directamente las conexiones directas a Tor y el tr√°fico ofuscado a los puentes.  En base a todo esto, podemos suponer que el futuro nos espera tambi√©n es muy interesante, especialmente si las "personas responsables" dejan de hacer tonter√≠as una y otra vez y act√∫an de manera m√°s inteligente y sofisticada. <br><br>  En Habr√© repetidamente en los comentarios se expresaron pron√≥sticos de c√≥mo puede continuar la lucha con las tecnolog√≠as de cifrado para los ciudadanos comunes.  Analizando los pensamientos expresados ‚Äã‚Äãy mirando los testimonios de otros pa√≠ses, trat√© de sugerir en qu√© direcci√≥n podr√≠an avanzar las medidas para limitar la comunicaci√≥n.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">DistortNeo</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">shifttstas</a> arrojaron algunas ideas m√°s interesantes, y al final le promet√≠ a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">el777</a> agregar este art√≠culo. <br><br>  Con los filtros ACL, todo est√° claro.  Est√°n actuando ahora, y con un √©xito variable tienen √©xito y no luchan (aunque hay <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pron√≥sticos</a> bastante <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">pesimistas</a> ).  DPI es m√°s interesante. <br><br>  Los m√©todos para "determinar" el tipo de tr√°fico para DPI se pueden dividir en dos grupos: <br><br><ul><li>  An√°lisis de firma.  Es decir, desmontar el paquete "por los huesos", comparar los encabezados y la estructura con las muestras, y as√≠ determinar su prop√≥sito.  Por lo tanto, se detectan muchos t√∫neles, por ejemplo, OpenVPN, L2TP / IPSec, SOCKS, etc. </li><li>  Un an√°lisis preliminar de los patrones de intercambio de tr√°fico, por ejemplo, la relaci√≥n del flujo entrante / saliente, la frecuencia de solicitud-respuesta y otros criterios nos permitir√°n separar el "tr√°fico real" de un protocolo y el t√∫nel que solo se disfraza como protocolo. </li></ul><br><img src="https://habrastorage.org/webt/xj/a3/ny/xja3nye4iqnsser5zm2gxgbcjbq.jpeg" alt="imagen"><br><br>  Puede dividir el tr√°fico en varios grupos y asumir lo que har√°n con cada uno de ellos. <br><br><ol><li>  <b>VPN, t√∫neles y servidores proxy "expl√≠citos" (OpenVPN, L2TP / IPSec, SOCKS, etc.)</b> Los VPN y t√∫neles ordinarios pueden bloquearse autom√°ticamente, como, por ejemplo, esto sucede en China y Venezuela.  Si algunas organizaciones o empresas lo necesitan para el trabajo, perm√≠tales registrarse y certificarse, como lo menciona la ley rusa mencionada anteriormente.  Con un proxy, es a√∫n m√°s f√°cil: ese HTTP, que los SOCKS transmiten direcciones y contenidos en texto claro, lo que generalmente no crea ning√∫n problema para el "corte" selectivo de solicitudes y escuchas telef√≥nicas de la informaci√≥n transmitida. </li><li>  <b>Tecnolog√≠as de doble uso como SSH</b> .  Poco tiempo despu√©s de que se estableci√≥ la sesi√≥n, la velocidad se reduce a una tortuga, por lo que todav√≠a puede trabajar al menos de alguna manera en la consola, pero no hay m√°s navegaci√≥n y descarga.  El hecho de que esto cree problemas durante el trabajo normal no molesta a nadie (lo que ILV nos ha demostrado m√°s de una vez en los √∫ltimos tiempos). </li><li>  <b>Protocolos altamente espec√≠ficos, como mensajeros, clientes de juegos, etc.</b> </li><li>  <b>Compuestos cuyo tipo no se puede determinar</b> . </li></ol><br>  Para los √≠tems 3 y 4, las "listas blancas" son bastante posibles (en las cuales, por ejemplo, se ingresan subredes de servidores oficiales del juego o mensajeros "correctos", y todo lo que los propietarios del servidor desean declarar y organizar seg√∫n sea necesario para que no se toquen, por analog√≠a con los que ILV ya tiene para dominios y direcciones IP).  Y aquellos que no est√°n en estas listas enfrentar√°n el mismo destino que el p√°rrafo 1 o el p√°rrafo 2, aunque es bastante posible no bloquear o cortar la velocidad sin rodeos, sino analizar los patrones de intercambio mencionados anteriormente para determinar si el tr√°fico es "puro" "O" sospechoso ". <br><br>  Es decir, si desea disfrazarse de protocolos especiales, u ofuscar las conexiones para que sea imposible determinar su tipo, tambi√©n deber√° crear un "ruido" que evite la detecci√≥n de patrones de intercambio reales.  Hasta ahora, tales desarrollos no me han llegado a los ojos. <br><br>  Ni siquiera puede recordar acerca de los diferentes t√∫neles ICMP y DNS: una gran cantidad de tr√°fico "donde no se necesita" en ellos tambi√©n autom√°ticamente genera sospechas. <br><br>  5. <b>TLS y SSL, HTTPS</b> .  Es imposible cortar limpio, ya que esto autom√°ticamente significa bloquear todo Internet.  El an√°lisis de patrones no tiene sentido, ya que la navegaci√≥n web es solo el prop√≥sito principal de usar HTTPS.  De todo lo anterior, SSL / TLS en el puerto 443 parece la opci√≥n m√°s "desprevenida" y confiable.  Por lo tanto, tratemos de disfrazarnos como √©l. <br><br><img src="https://habrastorage.org/webt/sj/3u/2z/sj3u2zoggi2ofngemk1maytasyw.jpeg" alt="imagen"><br><br><h3>  Disfrazarse </h3><br>  Para su consideraci√≥n, se decidi√≥ elegir las soluciones Streisand y SoftEther. <br><br>  <a href="" rel="nofollow">Streisand</a> : un conjunto completo de servicios diferentes: OpenConnect / AnyConnect, OpenVPN, stunnel, Shadowsocks, WireGuard.  Todo esto se configura en modo autom√°tico o semiautom√°tico "llave en mano", y en la salida el usuario recibe un servidor configurado, as√≠ como archivos y documentaci√≥n detallada para configurar clientes. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">SoftEther</a> es un servidor VPN que puede levantar L2TP / IPsec, OpenVPN, SSTP y otros protocolos, y tambi√©n tiene su propio protocolo SSL-VPN, que, seg√∫n los autores, es indistinguible del tr√°fico HTTPS normal. <br><br>  Entonces ... <br><br>  <b>OpenConnect / AnyConnect.</b>  Implementaci√≥n de c√≥digo abierto del protocolo SSL de Cisco AnyConnect.  Cuando se establece una conexi√≥n, no solo son visibles los paquetes TLS (TCP), sino tambi√©n los paquetes DTLS (UDP).  DTLS, en principio, tambi√©n se usa mucho "con fines pac√≠ficos", pero esto no es en absoluto como "HTTPS normal".  Sin embargo, si corta el tr√°fico UDP en el cortafuegos, AnyConnect cambia inmediatamente a TCP y desde el exterior se ve, de nuevo, completamente y completamente como TLS normal, e incluso la autenticaci√≥n dentro del t√∫nel encriptado es casi como en HTTP. <br><br>  <b>Calcetines sombr√≠os</b> .  Proxy cifrado SOCKS.  Aparentemente, si se desea, se <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">puede detectar</a> , sin embargo, hay complementos que lo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">disfrazan como "HTTPS puro"</a> .  Tambi√©n hay un <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">complemento</a> para trabajar a trav√©s de websockets, pero m√°s sobre eso m√°s adelante. <br><br>  <b>Guardia de alambre</b>  A juzgar por la descripci√≥n, tiene un cifrado bien retorcido y un mecanismo de configuraci√≥n de sesi√≥n, pero toda la comunicaci√≥n se realiza a trav√©s de UDP.  Wireshark define el tipo de paquetes como algo completamente inaudible, y la opini√≥n de lo que est√° sucediendo con un DPI de terceros es una pregunta muy, muy grande.  <b>Upd: las</b> versiones m√°s nuevas definen Wireguard √∫nicamente como Wireguard, por lo que la respuesta a la pregunta es obvia. <br><br>  <b>obfs3, obfs4</b> .  Los paquetes se ofuscar√°n para que desde el exterior se vean como un conjunto de valores completamente aleatorio.  Es decir, se incluyen en el elemento 4 de la lista anterior. <br><br>  <b>SoftEther</b>  Parece HTTPS, pero con una captura.  Adem√°s de TLS directamente sobre TCP, env√≠a activamente paquetes de paquetes UDP.  Como se descubri√≥ en la documentaci√≥n, UDP puede usarse para acelerar la transferencia de datos en el caso de que no se elimine en el firewall.  Esta funcionalidad est√° deshabilitada en la configuraci√≥n, y despu√©s de deshabilitarla, todo se vuelve como deber√≠a. <br><br>  <b>SSTP</b> .  VPN prokotol de Microsoft.  Compatible de forma nativa en Windows, software de soporte en GNU / Linux.  Desde afuera parece HTTPS, y Wireshark lo confirma completamente. <br><br><h3>  Pero eso no es todo </h3><br>  Supongamos que instal√≥ un servidor VPN o el final de un t√∫nel en un host y lo configur√≥ para escuchar en el puerto 443.  Parece que todo est√° bien, pero hay una PERO: si nos disfrazamos de HTTPS, puede verificar que de hecho se cuelga en el puerto 443 simplemente tratando de enterrarse en este puerto con un simple navegador o CURL, o de cualquier otra manera.  En algunos art√≠culos, dicho m√©todo se llama "conexi√≥n de plomo" y, como se mencion√≥, ya se usa bastante en China. <br><br>  Por lo tanto, necesitamos que en el puerto 443 tengamos el servidor web m√°s com√∫n y decente.  Y aqu√≠ surge un problema interesante. <br><br>  Ninguno de los servicios anteriores en la documentaci√≥n principal encontr√≥ una descripci√≥n del mecanismo de trabajo de uso compartido de puertos.  La <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">opci√≥n SSLH</a> no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">es</a> adecuada, aunque solo sea porque sslh no puede compartir el tr√°fico entre HTTPS y los servicios anteriores.  Al menos, porque si el tipo de tr√°fico sin descifrado completo pudiera distinguir sslh, entonces DPI podr√° hacerlo. <br><br>  La mayor√≠a de los hombres, como <a href="" rel="nofollow">este</a> , sugieren usar la Indicaci√≥n de nombre del servidor (SNI), una extensi√≥n TLS que le permite especificar un nombre de host y luego usar HAProxy, sniproxy y otras herramientas para dispersar las conexiones de los servicios.  El problema es que en las implementaciones TLS modernas, el nombre de host especificado cuando se usa SNI se transmite en texto sin formato, es decir, en forma no cifrada y, por lo tanto, tambi√©n se puede espiar y usar en el futuro. <br><br>  Por lo tanto, improvisaremos, y luego se me ocurrieron dos opciones. <br><br><h4>  Golpe de puerto </h4><br><img src="https://habrastorage.org/webt/54/_n/v7/54_nv7qxgj4idvoek-ooxn6r6ju.jpeg" alt="imagen"><br><br>  La eliminaci√≥n de puertos est√° dise√±ada para activar "servicios ocultos" en el servidor.  Por ejemplo, de manera similar, el puerto en el que se cuelga el demonio SSH a menudo se cierra "fuera" para evitar la fuerza bruta y el uso de vulnerabilidades de 0 d√≠as.  En la versi√≥n cl√°sica (ver, por ejemplo, la implementaci√≥n del demonio knockd), el bloqueo generalmente se entiende como intentos de establecer una conexi√≥n o enviar paquetes a puertos host espec√≠ficos en una secuencia determinada, como resultado de lo cual el demonio lo "reconoce" como propio y activa una regla de firewall que permite el acceso a un puerto espec√≠fico solo desde tu IP. <br><br>  En nuestro caso, esta opci√≥n no es del todo aceptable.  En primer lugar, los puertos "no est√°ndar" pueden estar bloqueados en alg√∫n lugar del camino y, en segundo lugar, el procedimiento en s√≠, cuando se analiza desde el exterior, puede parecer sospechoso.  Dado que nos disfrazamos de HTTPS, necesitamos "tocar" HTTPS. <br><br>  Sorprendentemente, no hab√≠a aldabas HTTP / HTTPS con la funcionalidad requerida y, por lo tanto, naci√≥ un nocker con el nombre rom√°ntico <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">Labean</a> (h√∫sares, ¬° <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">c√°llate</a> !). <br><br>  Dado: nuestro servidor, en el que Nginx se ejecuta en el puerto 443 con certificados configurados correctamente y muestra contenido completamente inofensivo, por ejemplo, GIF con gatos, im√°genes ISO de distribuciones GNU / Linux, o un espejo de Wikipedia y una biblioteca de Moshkov. <br><br>  Al mismo tiempo, las l√≠neas del formulario se ocultaron en la configuraci√≥n de Nginx <br><br><pre><code class="nginx hljs"> <span class="hljs-attribute"><span class="hljs-attribute">location</span></span> <span class="hljs-regexp"><span class="hljs-regexp">~ ^/somesecret/(.*)</span></span> {
    <span class="hljs-attribute"><span class="hljs-attribute">auth_basic</span></span>      <span class="hljs-string"><span class="hljs-string">"Administrator Login"</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">auth_basic_user_file</span></span>  /var/www/.htpasswd;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span>  X-Real-IP  <span class="hljs-variable"><span class="hljs-variable">$remote_addr</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> http://127.0.0.1:8080/<span class="hljs-variable"><span class="hljs-variable">$1</span></span>;
  }
</code></pre><br>
      ,       CURL'   <br>
<code>https://ourserver.org/somesecret/vpn/on</code><br>
  ,   ,     ,           IP-,  - <br>
<code>iptables -t nat -A PREROUTING -p tcp -s {clientIP} --dport 443 -j REDIRECT --to-port 4443</code><br>
    .<br>
<br>
  N  (,   )  ,    ,        ,         IP       .<br>
<br>
     ,    ,  URL   ,   /off  .<br>
<br>
       ,     IPv6 (v6-    X-Real-IP  ).<br>
<br>
   Go,    ,   ,    . ,      nginx  init-    Gihub:<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">https://github.com/uprt/labean</a><br>
<br>
<h4>Websockets</h4><br>
<img src="https://habrastorage.org/webt/as/nw/yn/asnwynceu_p8gghmcgf13e3ryiq.jpeg" alt="image"><br>
<br>
     :      HTTPS ‚Äî    .  Web-         TCP    ,    Websocket (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">RFC 6455</a>).    HTTP-,      ,             TCP-.  , ,       HTTPS       .<br>
<br>
      WS  ,  - ‚Äî    ,     CDN, , Cloudflare    .  ,        :    IP  CDN/proxy          CDN,          VPN/proxy   CDN,       .<br>
<br>
 WS-   (    Haskell),     <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">wstunnel</a>,   nodejs   ,       .<br>
<br>
       .       wss://-, <br>
<br>
<pre><code class="bash hljs">wstunnel -t 33 wss://server:443</code></pre><br>
   ,  ¬´¬ª ws-      ¬´¬ª .   wstunnel,    ,      URI    -  :<br>
<br>
<pre><code class="bash hljs">wstunnel -t 33 wss://ourserver.org:443/hiddenws/</code></pre><br>
  :     <br>
<br>
   ,    443   Nginx c -  . <br>
<br>
    proxy-   Websockets-:<br>
<br>
<pre><code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span> /hiddenws {
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> http://127.0.0.1:8081;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_http_version</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Upgrade <span class="hljs-variable"><span class="hljs-variable">$http_upgrade</span></span>;
    <span class="hljs-attribute"><span class="hljs-attribute">proxy_set_header</span></span> Connection <span class="hljs-string"><span class="hljs-string">"Upgrade"</span></span>;
  }</code></pre><br>
        websockets-.        SOCKS- (, Dante),  OpenVPN, ,   ,    .<br>
<br>
<div class="spoiler"><b class="spoiler_title"> selinux</b><div class="spoiler_text">   RHEL  ,   SELinux,    nginx   <br>
<code>2018/07/05 13:28:03 [crit] 7724#0: *11 connect() to 127.0.0.1:8081 failed (13: Permission denied) while connecting to upstream, client: IP_ADDRES, server: _, request: ¬´GET /hiddenws/?dst=localhost:22 HTTP/1.1¬ª, upstream: ¬´127.0.0.1:8081/hiddenws/?dst=localhost:22¬ª,</code><br>
<br>
        :<br>
<br>
<pre><code class="bash hljs">semanage port -a -t http_port_t -p tcp 22
semanage port -m -t http_port_t -p tcp 22
semanage port -a -t http_port_t -p tcp 8081</code></pre><br>
<br>
 <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" class="user_link">Renatk</a>        .<br>
</div></div><br>
<br>
    ‚Äî   SOCKS-  VPN-       wstunnel,           ¬´¬ª .<br>
<br>
 ,   v2ray  shadowcocks,   websockets    shadowsocks.    : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow">https://github.com/shadowsocks/v2ray-plugin</a><br>
<br>
<h3> </h3><br>
 ‚Äî   VPN- -   MTU,  1400;<br>
 ‚Äî   VPN- 2 IP-.        VPN/,       ;<br>
 ‚Äî  ¬´¬ª IP-   ,    ICMP ping;<br>
 ‚Äî     -  reverse DNS ,     -, , gateway-001.somehomeisp.net;<br>
 ‚Äî      VPN/  DNS- <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> OpenNIC</a>;<br>
         (<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=" rel="nofollow"> </a>).<br>
<br>
<h3> </h3><br>
<img src="https://habrastorage.org/webt/dz/mp/tf/dzmptf35twb-e_wzib77grk3ksq.jpeg" alt="image"><br>
<br>
      - ,     ‚Äî  .     ,   ,   ‚Äî   ,    ,   . ,   HTTPS      ‚Äî ,     ,    -    ¬´   ¬ª/   /etc.,  ,      ¬´ ¬ª,      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">   </a>. <br>
<br>
 ,  ,   ,            ,     ‚Äî  ,   ,    ,   . <br>
 .</div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es415977/">https://habr.com/ru/post/es415977/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es415965/index.html">Qu√© leer en julio: 19 nuevos libros para profesionales digitales</a></li>
<li><a href="../es415967/index.html">SolidFire - Almacenamiento para aquellos ** almacenamiento de odio cking</a></li>
<li><a href="../es415969/index.html">HyperX Pulsefire Surge RGB: un asesino nato</a></li>
<li><a href="../es415973/index.html">C√≥mo no romper el cl√∫ster Apache Ignite desde el principio</a></li>
<li><a href="../es415975/index.html">Los chinos introdujeron una pistola l√°ser con un alcance de casi un kil√≥metro.</a></li>
<li><a href="../es415979/index.html">Semana de la seguridad 24: Rowhammer en Android y la complejidad de las vulnerabilidades de hardware</a></li>
<li><a href="../es415981/index.html">Google y HTTP</a></li>
<li><a href="../es415983/index.html">Early Universe 5. Desplazamiento al rojo cosmol√≥gico y din√°mica de un universo en expansi√≥n uniforme, parte 1</a></li>
<li><a href="../es415987/index.html">QA-Meetup SuperJob</a></li>
<li><a href="../es415989/index.html">An√°lisis del uso de firmas digitales: 10 de las 15 principales criptomonedas no firman software</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>