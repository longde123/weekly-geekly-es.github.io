<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯСиЁЯП╝тАНЁЯФм ЁЯдУ ЁЯзЫЁЯП╜ рдПрдХреНрд╕ 86 рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рд╡реНрдпрд╡рдзрд╛рдиред рднрд╛рдЧ 3. рдХреЛрд░рдмреВрдЯ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рдЗрдВрдЯрд░рдкреНрдЯ рд░реВрдЯрд┐рдВрдЧ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛ ЁЯСиЁЯП┐ ЁЯдЯЁЯП╜ ЁЯЩЛЁЯП╝</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рд╣рдо x86 рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рдЗрдВрдЯрд░рдкреНрдЯ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦрддреЗ рд╣реИрдВред 
 рднрд╛рдЧ 1 ( рд╡реНрдпрд╡рдзрд╛рди рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд╡рд┐рдХрд╛рд╕ ) рдореЗрдВ, рд╣рдордиреЗ рдЕрдВрддрдГрдХреНрд░рд┐рдпрд╛...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>рдПрдХреНрд╕ 86 рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рд╡реНрдпрд╡рдзрд╛рдиред рднрд╛рдЧ 3. рдХреЛрд░рдмреВрдЯ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рдЗрдВрдЯрд░рдкреНрдЯ рд░реВрдЯрд┐рдВрдЧ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдирд╛</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/440304/"> рд╣рдо x86 рд╕рд┐рд╕реНрдЯрдо рдореЗрдВ рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рдЗрдВрдЯрд░рдкреНрдЯ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рдирд╛ рдЬрд╛рд░реА рд░рдЦрддреЗ рд╣реИрдВред <br>  рднрд╛рдЧ 1 ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╡реНрдпрд╡рдзрд╛рди рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рд╡рд┐рдХрд╛рд╕</a> ) рдореЗрдВ, рд╣рдордиреЗ рдЕрдВрддрдГрдХреНрд░рд┐рдпрд╛ 2 рдФрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдмреВрдЯ рд╡рд┐рдХрд▓реНрдкреЛрдВ</a> рдореЗрдВ, рд░реБрдХрд╛рд╡рдЯ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдФрд░ рд╕рд╛рдорд╛рдиреНрдп рд╢рдмреНрджреЛрдВ рдХреА рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рдиреАрдВрд╡реЛрдВ рдХреА рдЬрд╛рдВрдЪ рдХреА, рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рдХреИрд╕реЗ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рдУрдПрд╕ рдирд┐рдпрдВрддреНрд░рдХреЛрдВ рдХреЗ рдмреАрдЪ рдЪрдпрди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рднрд╛рдЧ рдореЗрдВ, рд╣рдо рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рдЗрдВрдЯрд░рдкреНрдЯ рдХрдВрдЯреНрд░реЛрд▓рд░реНрд╕ рдХреЗ рд▓рд┐рдП BIOS IRQ рд░реВрдЯрд┐рдВрдЧ рдХреЛ рдХреИрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рддрд╛ рд╣реИред <br><br>  рдХреЛрдИ рднреА рдЖрдзреБрдирд┐рдХ BIOS рд╡рд┐рдХрд╛рд╕ рдХрдВрдкрдиреА (рдЕрд╡рд╛рд░реНрдбрдмреЙрд╕ / рдПрдПрдордЖрдИрдмреАрдЖрдИрдУрдПрд╕ / рдЗрдВрд╕реАрдб) рдЕрдкрдиреЗ рдХрд╛рд░реНрдпрдХреНрд░рдореЛрдВ рдХреЗ рд╕реНрд░реЛрдд рдХреЛрдб рдХрд╛ рдЦреБрд▓рд╛рд╕рд╛ рдирд╣реАрдВ рдХрд░рддреА рд╣реИред  рд▓реЗрдХрд┐рди рд╕реМрднрд╛рдЧреНрдп рд╕реЗ, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХреЛрд░рдмреВрдЯ</a> , рдореБрдлреНрдд рд╕реЙрдлреНрдЯрд╡реЗрдпрд░ рдХреЗ рд╕рд╛рде рдорд╛рд▓рд┐рдХрд╛рдирд╛ BIOS рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╣реИред  рдЙрдирдХреЗ рдХреЛрдб рдореЗрдВ, рд╣рдо рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рдЗрдВрдЯрд░рдкреНрдЯ рд░рд╛рдЙрдЯрд┐рдВрдЧ рдХреЛ рдХреИрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/mx/vi/wu/mxviwuisp5rglec_kgsk872hmy8.png"><br><br><a name="habracut"></a><br><h2>  рд╕рд┐рджреНрдзрд╛рдВрдд </h2><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдорд╛рд░реЗ рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рдЬреНрдЮрд╛рди рдХреЛ рддрд╛рдЬрд╝рд╛ рдХрд░реЗрдВ рдФрд░ рдкреВрд░рдХ рдХрд░реЗрдВред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 1 рдореЗрдВ,</a> рд╣рдордиреЗ PIC рдФрд░ APIC рдХреЗ рдорд╛рдорд▓реЗ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рд╛рдорд╛рдиреНрдп рд╡реНрдпрд╡рдзрд╛рди рдкрде рдХреА рдкрд╣рдЪрд╛рди рдХреАред <br><br>  <b>рдкреАрдЖрдИрд╕реА:</b> <br><br><img src="https://habrastorage.org/webt/u_/jr/u9/u_jru9pemdeda2xvvbqihvgtp3y.png"><br><br>  <b>APIC:</b> <br><br><img src="https://habrastorage.org/webt/mc/ra/hj/mcrahjn-owk9qrcmyiixcmhomcq.png"><br><br>  рдЗрди рдЖрдВрдХрдбрд╝реЛрдВ рдореЗрдВ, PCI рдбрд┐рд╡рд╛рдЗрд╕ тЖТ PIR рдореИрдкрд┐рдВрдЧ рдХреЛ рдЕрдореВрд░реНрдд рд░реВрдк рд╕реЗ рджрд┐рдЦрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ; рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдпрд╣ рдХреБрдЫ рдЕрдзрд┐рдХ рдЬрдЯрд┐рд▓ рд╣реИред  рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ 4 рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрдиреНрд╕ (INTA #, INTB #, INTC #, INTD #) рд╣реЛрддреА рд╣реИрдВред  рдкреНрд░рддреНрдпреЗрдХ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдЕрдзрд┐рдХрддрдо 8 рдлрд╝рдВрдХреНрд╢рди рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдкрд╣рд▓реЗ рд╕реЗ рд╣реА рдПрдХ INTx # рд░реБрдХрд╛рд╡рдЯ рд╣реЛрддреА рд╣реИред  INTx # рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреМрди рд╕реА рд▓рд╛рдЗрди рдЦреАрдВрдЪреЗрдЧрд╛ рдпрд╛ рддреЛ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░ рдореЗрдВ рддрдп рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ рдпрд╛ рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br><img src="https://habrastorage.org/webt/dk/ny/gh/dknyghwfo8gktn5l_lmmqb5awz0.png"><br><br>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рдлрд╝рдВрдХреНрд╢рди рдЕрд▓рдЧ-рдЕрд▓рдЧ рд▓реЙрдЬрд┐рдХрд▓ рдмреНрд▓реЙрдХ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, рдПрдХ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдПрдХ Smbus рдирд┐рдпрдВрддреНрд░рдХ рдлрд╝рдВрдХреНрд╢рди, рдПрдХ SATA рдирд┐рдпрдВрддреНрд░рдХ рдлрд╝рдВрдХреНрд╢рди, рдПрдХ LPC рдмреНрд░рд┐рдЬ рдлрд╝рдВрдХреНрд╢рди рд╣реЛ рд╕рдХрддрд╛ рд╣реИред  рдУрдПрд╕ рдХреА рдУрд░, рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдЕрдкрдиреЗ рдкреАрд╕реАрдЖрдИ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реНрдерд╛рди рдХреЗ рд╕рд╛рде рдПрдХ рдЕрд▓рдЧ рдбрд┐рд╡рд╛рдЗрд╕ рд╣реИред <br><br>  рдкреАрд╕реАрдЖрдИ рдЙрдкрдХрд░рдг рдореЗрдВ рд╕рдмрд╕реЗ рд╕рд░рд▓ (рдФрд░ рд╕рдмрд╕реЗ рдЖрдо) рдорд╛рдорд▓реЗ рдореЗрдВ, рдХреЗрд╡рд▓ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реИ, рдЬрд┐рд╕рдореЗрдВ рд╕реЗ рдЕрд╡рд░реЛрдз INTA # рд▓рд╛рдЗрди рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╣реИред  рд▓реЗрдХрд┐рди рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ 4 рд╕реЗ рдЕрдзрд┐рдХ рдлрд╝рдВрдХреНрд╢рди рднреА рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВ (рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ 8 рд╕реЗ рдкрд╣рд▓реЗ рдХрд╣рд╛ рдерд╛), рдлрд┐рд░ рдЙрдирдореЗрдВ рд╕реЗ рдХреБрдЫ рдХреЛ рдПрдХ рдЗрдВрдЯреЗрдХреНрд╕ # рд▓рд╛рдЗрди рдкрд░ рд▓рдЧрд╛рдпрд╛ рдЬрд╛рдирд╛ рд╣реЛрдЧрд╛ (рдкреАрд╕реАрдЖрдИ рдЗрдВрдЯрд░рдлреЗрд░рдЯреНрд╕ рд▓рд╛рдЗрди рдХреЛ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ)ред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рд╡рд┐рд╢реЗрд╖ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЛ рд▓рд┐рдЦрдХрд░ рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдкреАрд╕реАрдЖрдИ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЗрдВрдЧрд┐рдд рдХрд░рдирд╛ рдЕрдХреНрд╕рд░ рд╕рдВрднрд╡ рд╣реЛрддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕реЗ рдлрд╝рдВрдХреНрд╢рдВрд╕ рдЬреЛ рдЗрдВрдЯреЗрдХреНрд╕ # рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ (рдФрд░ рдХреНрдпрд╛ рдЙрдирдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ)ред <br><br>  рдЕрдкрдиреЗ рдЬреНрдЮрд╛рди рдХреЛ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рдХрд░рддреЗ рд╣реБрдП, рд╣рдо INTx # тЖТ PIRQy тЖТ IRQz, рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдХрд┐рд╕реА рднреА PCI рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рд░реБрдХрд╛рд╡рдЯ рдХреЗ рдорд╛рд░реНрдЧ (рдорд╛рд░реНрдЧ) рдХреЛ рдирд┐рд░реВрдкрд┐рдд рдХрд░рддреЗ рд╣реИрдВ: <br><br><ul><li>  PCI рдбрд┐рд╡рд╛рдЗрд╕ рдХрд╛ INTx # - рд▓рд╛рдЗрди INT # (INTA #, INTB #, INTC #, INTD #) рдЬреЛ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдЧрд╛ред </li><li>  PIRQy - PIRQ рд▓рд╛рдЗрди (PIRQA, PIRQB, ...) PIR рд╕реЗ рдЬрд┐рд╕рдореЗрдВ INTx # рд▓рд╛рдЗрди рдЬреБрдбрд╝реА рд╣реБрдИ рд╣реИ </li><li>  IRQz - рдмрд╛рдзрд╛ рдирд┐рдпрдВрддреНрд░рдХ (APIC / PIC) рдкрд░ IRQ рд▓рд╛рдЗрди (0, 1, 2, ...), рдЬреЛ PIRQy рд▓рд╛рдЗрди рд╕реЗ рдЬреБрдбрд╝реА рд╣реИ </li></ul><br><h3>  рдЖрдк рд╕рд┐рд░реНрдл рд╣рд░ рдЬрдЧрд╣ INTA # тЖТ PIRQA, INTB # тЖТ PIRQB, ... рдХреЛ рдХрдиреЗрдХреНрдЯ рдХреНрдпреЛрдВ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ ...? </h3><br>  рд░реВрдЯрд┐рдВрдЧ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд░реЗрд╢рд╛рди рдХреНрдпреЛрдВ?  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╣рдо рд╕рднреА рдкреАрд╕реАрдЖрдИ рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рдПрдХ рд╣реА PIRQ рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рд▓рд┐рдП рд╕рднреА рдмрд╛рдзрд╛ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдкрд░реЗрд╢рд╛рди рдФрд░ рдкреНрд░рд╛рдкреНрдд рдирд╣реАрдВ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрддреЗ рд╣реИрдВред  рдЖрдЗрдП рдЗрд╕реЗ рдХрд╣рддреЗ рд╣реИрдВ: <br><br><ul><li>  INTA # тЖТ PIRQA </li><li>  INTB # тЖТ PIRQB </li><li>  INTC # тЖТ PIRQC </li><li>  INTD # тЖТ PIRQD </li></ul><br>  рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдКрдкрд░ рдХрд╣рд╛, рд╕рдмрд╕реЗ рд╕рд╛рдорд╛рдиреНрдп рдорд╛рдорд▓рд╛ рддрдм рд╣реЛрддрд╛ рд╣реИ рдЬрдм рдкреАрд╕реАрдЖрдИ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рд╣реЛрддрд╛ рд╣реИ, рдФрд░ рдЗрд╕рдХреА рд░реБрдХрд╛рд╡рдЯ INTA # рд▓рд╛рдЗрди рд╕реЗ рдЬреБрдбрд╝реА рд╣реЛрддреА рд╣реИ (рдХреНрдпреЛрдВрдХрд┐ рдбрд┐рд╡рд╛рдЗрд╕ рдбреЗрд╡рд▓рдкрд░ рдХреЛ рдЗрд╕реЗ рдЕрд▓рдЧ рддрд░реАрдХреЗ рд╕реЗ рдХреНрдпреЛрдВ рд╢реБрд░реВ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП?)ред  рдЗрд╕рд▓рд┐рдП рдпрджрд┐ рд╣рдо рдЕрдЪрд╛рдирдХ рд╕рднреА рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рд╢реБрд░реВ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓реЗрддреЗ рд╣реИрдВ рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рд▓рд┐рдЦрд╛ рд╣реИ, рддреЛ рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рд▓рдЧрднрдЧ рд╕рднреА рд╡реНрдпрд╡рдзрд╛рдиреЛрдВ рдХреЛ PIRQA рд▓рд╛рдЗрдиреЛрдВ рдореЗрдВ рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред  рдорд╛рди рд▓реАрдЬрд┐рдП рдХрд┐ рд╡рд╣ IRQ16 рдкрд░ рдШрд╛рд╡ рдХрд░ рд░рд╣реА рд╣реИред  рдлрд┐рд░ рд╣рд░ рдмрд╛рд░ рдЬрдм рдкреНрд░реЛрд╕реЗрд╕рд░ рдХреЛ рд╕реВрдЪрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ IRQ16 рд▓рд╛рдЗрди рдкрд░ рдПрдХ рдмрд╛рдзрд╛ рдЙрддреНрдкрдиреНрди рд╣реБрдИ рд╣реИ, рддреЛ рдЙрд╕реЗ IRQ16 рд▓рд╛рдЗрди (PIRQA) рд╕реЗ рдЬреБрдбрд╝реЗ рд╕рднреА рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдбреНрд░рд╛рдЗрд╡рд░реЛрдВ рд╕реЗ рдкреВрдЫрддрд╛рдЫ рдХрд░рдиреА рд╣реЛрдЧреА рдпрджрд┐ рдЙрдирдХреЗ рдкрд╛рд╕ рдЗрд╕рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдмрд╛рдзрд╛ рд╣реИред  рдпрджрд┐ рдРрд╕реЗ рдХрдИ рдЙрдкрдХрд░рдг рд╣реИрдВ, рддреЛ рдпрд╣ рд╕реНрд╡рд╛рднрд╛рд╡рд┐рдХ рд░реВрдк рд╕реЗ рд╡реНрдпрд╡рдзрд╛рди рдХреЗ рд▓рд┐рдП рд╕рд┐рд╕реНрдЯрдо рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рддреЗрдЬ рдирд╣реАрдВ рдХрд░реЗрдЧрд╛ред  рдФрд░ рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ PIRQB-PIRQD рд▓рд╛рдЗрдиреЗрдВ рдЕрдзрд┐рдХрд╛рдВрд╢ рднрд╛рдЧ рдХреЗ рд▓рд┐рдП рдирд┐рд╖реНрдХреНрд░рд┐рдп рд░рд╣реЗрдВрдЧреАред  рд╕реНрдкрд╖реНрдЯрддрд╛ рдХреЗ рд▓рд┐рдП, рд╕рдорд╕реНрдпрд╛ рдХреЛ рджрд░реНрд╢рд╛рддреА рдЖрдХреГрддрд┐: <br><br><img src="https://habrastorage.org/webt/cz/dv/bf/czdvbfsnymw5xyyqujavawdcv_m.png"><br><br>  рд▓реЗрдХрд┐рди рд╕рдм рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ: <br><br><img src="https://habrastorage.org/webt/dk/3e/x6/dk3ex67xjmm_9h0q3miq2djqnti.png"><br><br>  рддрд╕реНрд╡реАрд░ рдереЛрдбрд╝реА рднреНрд░рдорд┐рдд рдХрд░рдиреЗ рд╡рд╛рд▓реА рд╣реИ, рд▓реЗрдХрд┐рди рдмрд╛рдд рдпрд╣ рд╣реИ рдХрд┐ рд╣рдо рдмрд╕ INTx # рд▓рд╛рдЗрдиреЛрдВ рдХреЛ PIRQy рдХреЗ рд╕рд╛рде рд░рд╛рдЙрдВрдб-рд░реЙрдмрд┐рди (PIRQA, PIRQB, PIRQC, PIRQD, PIRQB, PIRQB, PIRQC, PIRQD, PIRQA, PIRQB, PIRQC, PIRQC рд╕реЗ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ) ..) <br><br>  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдпрд╣рд╛рдВ рдпрд╣ рдзреНрдпрд╛рди рд░рдЦрдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ рдХрд┐ рди рдХреЗрд╡рд▓ рдкреАрд╕реАрдЖрдИ рдлрд╝рдВрдХреНрд╢рди рдХреА рд╕рдорд╛рди рд╕рдВрдЦреНрдпрд╛ рдкреНрд░рддреНрдпреЗрдХ рдкреАрдЖрдИрдЖрд░рдХреНрдпреВ рд▓рд╛рдЗрди рдкрд░ рднрд░реА рд╣реБрдИ рд╣реИред  рдЖрдЦрд┐рд░рдХрд╛рд░, рдХреБрдЫ рдлрд╝рдВрдХреНрд╢рди рдмрд╣реБрдд рдореБрд╢реНрдХрд┐рд▓ рд╕реЗ рд╣реА рд╡реНрдпрд╡рдзрд╛рди рдкреИрджрд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдФрд░ рдХреБрдЫ рд╕реНрдерд╛рдпреА рд░реВрдк рд╕реЗ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП рдИрдерд░рдиреЗрдЯ рдирд┐рдпрдВрддреНрд░рдХ)ред  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдпрд╣рд╛рдВ рддрдХ тАЛтАЛрдХрд┐ рдЗрд╕ рддрд░рд╣ рдХреЗ рдПрдХ рд╕рдорд╛рд░реЛрд╣ рдХреЗ рд╕рд╛рде рд╡реНрдпрд╡рдзрд╛рди рдХреЗ рд▓рд┐рдП рдПрдХ рдЕрд▓рдЧ PIRQ рд▓рд╛рдЗрди рдХрд╛ рдЖрд╡рдВрдЯрди рдХрд╛рдлреА рдЙрдЪрд┐рдд рд╣реЛ рд╕рдХрддрд╛ рд╣реИред <br><br>  рдкреВрд░реНрд╡рдЧрд╛рдореА рдХреЗ рдЖрдзрд╛рд░ рдкрд░, рдЕрдиреНрдп рдмрд╛рддреЛрдВ рдХреЗ рдЕрд▓рд╛рд╡рд╛, BIOS рдбреЗрд╡рд▓рдкрд░ рдХреЗ рдкрд╛рд╕ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХрд╛ рдХрд╛рд░реНрдп рд╣реИ рдХрд┐ PIRQ рд▓рд╛рдЗрдиреЗрдВ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд░реБрдХрд╛рд╡рдЯ рдХреЗ рд╕рд╛рде рднрд░реА рд╣реБрдИ рд╣реИрдВред <br><br><h3>  BIOS рдХреЛ рдХреНрдпрд╛ рдХрд░рдирд╛ рдЪрд╛рд╣рд┐рдП? </h3><br>  рд╣рдо рдЖрдХреГрддрд┐ рдореЗрдВ рд╡реНрдпрд╡рд╕реНрдерд┐рдд рд╣реЛрддреЗ рд╣реИрдВ: <br><br><img src="https://habrastorage.org/webt/pm/rq/xg/pmrqxgkdu0nkjz6yb44vdn79a8q.png"><br><br><ul><li>  <b>1) рдмрддрд╛рдПрдВ рдХрд┐ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди INTx рдХреА рдХреМрди рд╕реА рд▓рд╛рдЗрди рдЦреАрдВрдЪрддреА рд╣реИ</b> <br>  рдмрд╛рд╣рд░реА рдкреАрд╕реАрдЖрдИ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рд▓рд┐рдП, рдпрд╣ рдЖрдЗрдЯрдо рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рд╢рд╛рдорд┐рд▓ рдкреАрд╕реАрдЖрдИ рдЙрдкрдХрд░рдгреЛрдВ рдХреЗ рдХрд╛рд░реНрдпреЛрдВ рдХреЗ рд▓рд┐рдП рдпрд╣ рдЕрдЪреНрдЫреА рддрд░рд╣ рд╕реЗ рд╣реЛ рд╕рдХрддрд╛ рд╣реИред </li><li>  <b>2) рдкреНрд░рддреНрдпреЗрдХ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП INTx # тЖТ PIRQy рдореИрдкрд┐рдВрдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ</b> <br>  рдпрд╣ рдзреНрдпрд╛рди рджреЗрдиреЗ рдпреЛрдЧреНрдп рд╣реИ рдХрд┐ рдЪрд╛рд░ рд╕реЗ рдЕрдзрд┐рдХ рдорд╛рдирдХ PIRQy рд╕рд┐рдЧреНрдирд▓ (PIRQA, PIRQB, PIRQC, PIRQD) рд╣реЛ рд╕рдХрддреЗ рд╣реИрдВред  рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП 8: PIRQA-PIRQHред </li></ul><br>  PIRQy рд╕рд┐рдЧреНрдирд▓ рдЪрдпрдирд┐рдд рдЗрдВрдЯрд░рдкреНрдЯ рдХрдВрдЯреНрд░реЛрд▓рд░ (APIC / PIC) рдХреА IRQz рд▓рд╛рдЗрди рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВред  рдЪреВрдВрдХрд┐ рд╣рдо рд╕рднреА рд╕рдВрднрд╛рд╡рд┐рдд рд▓реЛрдбрд┐рдВрдЧ рд╡рд┐рдзрд┐рдпреЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рднрд╛рдЧ 2</a> рджреЗрдЦреЗрдВ), рд╣рдореЗрдВ рджреЛрдиреЛрдВ рдореИрдкрд┐рдВрдЧ рднрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ: <br><br><ul><li>  <b>3 рдП) рд╕рдВрдЪрд╛рд░ PIR тЖТ I / O APIC рдХреЗ рд▓рд┐рдП рдореИрдкрд┐рдВрдЧ PIRQy тЖТ IRQz1 рдореЗрдВ рднрд░реЗрдВ</b> <br>  рд▓реЗрдХрд┐рди рдЖрдо рддреМрд░ рдкрд░ рдпрд╣ рдЖрд╡рд╢реНрдпрдХ рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкреАрдЖрдИрд╕реАрдЖрдИ рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдПрдкреАрдЖрдИрд╕реА рд▓рд╛рдЗрди рдкрд░ рддрдп рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред  рдЖрдо рд╕рдорд╛рдзрд╛рди PIRQA тЖТ IRQ16, PIRQB тЖТ IRQ17, ... рд╕рдмрд╕реЗ рд╕рд░рд▓ рд╕рдорд╛рдзрд╛рди рд╣реИ, рдХреНрдпреЛрдВрдХрд┐  PIRQy рд▓рд╛рдЗрдиреЛрдВ рдХреЛ рдирд┐рдпрдВрддреНрд░рдХ рд▓рд╛рдЗрдиреЛрдВ P16 рдкрд░ рд░рдЦрдХрд░, рдЖрдкрдХреЛ ISA рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рдЕрд╡рд┐рднрд╛рдЬреНрдп рдЕрд╡рд░реЛрдзреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдШрд░реНрд╖ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЪрд┐рдВрддрд╛ рдХрд░рдиреЗ рдХреА рдЬрд╝рд░реВрд░рдд рдирд╣реАрдВ рд╣реИред </li><li>  <b>3 рдмреА) рд╕рдВрдЪрд╛рд░ PIR тЖТ PIC рдХреЗ рд▓рд┐рдП рдореИрдкрд┐рдВрдЧ PIRQy тЖТ IRQz2 рднрд░реЗрдВ</b> <br>  рдпрд╣ рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрдм рд╣рдо PIC рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░реВрдЯрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  рдПрдкреАрдЖрдИрд╕реА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ рдЗрд╕ рддрд░рд╣ рдХрд╛ рдХреЛрдИ рднреА рдЕрд╕реНрдкрд╖реНрдЯ рд╕рдорд╛рдзрд╛рди рдирд╣реАрдВ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдкреАрдЖрдИрд╕реА рдХреЗ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХрд┐рд╕реА рдХреЛ рдЖрдИрдПрд╕рдП рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ рдЕрд╡рд┐рднрд╛рдЬреНрдп рдЕрд╡рд░реЛрдзреЛрдВ рдХреЗ рд╕рд╛рде рд╕рдВрдШрд░реНрд╖ рдХреА рд╕рдВрднрд╛рд╡рдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрддрд╛ рд╣реЛрдирд╛ рдЪрд╛рд╣рд┐рдПред </li></ul><br>  рдЕрдВрддрд┐рдо рдЪреМрдерд╛ рдЖрдЗрдЯрдо рдмрд╛рдзрд╛ рд░рд╛рдЙрдЯрд┐рдВрдЧ рдХрд╛ рдирд┐рд░реНрдзрд╛рд░рдг рдХрд░рдиреЗ рдореЗрдВ рдУрдПрд╕ рдХреА рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред  рдбрд┐рд╡рд╛рдЗрд╕ рд╕реНрд╡рдпрдВ рдЖрдорддреМрд░ рдкрд░ рдЗрди рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред <br><br><ul><li>  <b>4) рдкреНрд░рддреНрдпреЗрдХ PCI рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди / рдЗрдВрдЯрд░рдкреНрдЯ рдкрд┐рди рд░рдЬрд┐рд╕реНрдЯрд░ рднрд░реЗрдВ</b> <br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдЗрдВрдЯрд░рдкреНрдЯ рдкрд┐рди рд░рдЬрд┐рд╕реНрдЯрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдкреЙрдкреНрдпреБрд▓реЗрдЯ рд╣реЛрддрд╛ рд╣реИ рдФрд░ рдЖрдорддреМрд░ рдкрд░ рд░реАрдб-рдУрдирд▓реА рд╣реЛрддрд╛ рд╣реИ, рдЗрд╕рд▓рд┐рдП рднрд░рдиреЗ рдореЗрдВ рд╕рдмрд╕реЗ рдЕрдзрд┐рдХ рд╕рдВрднрд╛рд╡рдирд╛ рдХреЗрд╡рд▓ рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЛ рднрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред  рдпрд╣ рдЙрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдЬрдм рд╣рдо рд░рд╛рдЙрдЯрд░ рдХреЛ рдмрд╛рдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХрд┐рд╕реА рднреА рддрд╛рд▓рд┐рдХрд╛ рдХреЗ рд╕рд╛рде рдУрдПрд╕ рдкреНрд░рджрд╛рди рдХрд┐рдП рдмрд┐рдирд╛ PIC рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд░реВрдЯрд┐рдВрдЧ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ (рдлрд┐рд░ рд╕реЗ рджреЗрдЦреЗрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">2</a> рджреЗрдЦреЗрдВ)ред  рдпрджрд┐ рдЯреЗрдмрд▓ рдкреНрд░рджрд╛рди рдХреА рдЬрд╛рддреА рд╣реИрдВ рдФрд░ рдпрд╣ рдореИрдкрд┐рдВрдЧ рд░реВрдЯрд┐рдВрдЧ рдЯреЗрдмрд▓ ($ рдкреАрдЖрдИрдЖрд░ / рдПрд╕реАрдкреАрдЖрдИ) рдХреЗ рдЕрдиреБрд░реВрдк рд╣реИ, рддреЛ рдУрдПрд╕ рдЕрдХреНрд╕рд░ рдЗрд╕реЗ рдЫреЛрдбрд╝ рджреЗрддрд╛ рд╣реИред </li></ul><br>  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рд╣рдо рдЕрднреА рддрдХ $ рдкреАрдЖрдИрдЖрд░ / рдПрдордкреАрдЯреЗрдмрд▓ / рдПрд╕реАрдкреАрдЖрдИ рддрд╛рд▓рд┐рдХрд╛рдУрдВ рдХреЛ рдирд╣реАрдВ рдЫреВрддреЗ рд╣реИрдВ рдФрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░рддреЗ рд╣реИрдВ рдХрд┐ рд╕рд┐рд╕реНрдЯрдо рд▓реЛрдбрд░ рдкрд░ рдирд┐рдпрдВрддреНрд░рдг рд╕реНрдерд╛рдирд╛рдВрддрд░рд┐рдд рдХрд░рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рд░реВрдЯрд┐рдВрдЧ рдЗрдВрдЯрд░рдкреНрдЯ рдХреЗ рд╕рдВрджрд░реНрдн рдореЗрдВ рдЪрд┐рдкрд╕реЗрдЯ рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЛ рдХреИрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЬрд╛рдПред  рдЗрдВрдЯрд░рдкреНрдЯ рдЯреЗрдмрд▓ рдПрдХ рдЕрд▓рдЧ рд▓реЗрдЦ (рд╕рдВрднрд╡рддрдГ рднрд╡рд┐рд╖реНрдп рдХрд╛ рдПрдХ) рдХреЗ рд▓рд┐рдП рдПрдХ рд╡рд┐рд╖рдп рд╣реИред <br><br>  рддреЛ, рд╕реИрджреНрдзрд╛рдВрддрд┐рдХ рдиреАрдВрд╡ рдХрд╛ рдЕрдзреНрдпрдпрди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдЖрдЦрд┐рд░рдХрд╛рд░ рд╣рдо рдЕрднреНрдпрд╛рд╕ рдХрд░рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ! <br><br><h2>  рдЕрднреНрдпрд╛рд╕ </h2><br>  рдЗрд╕ рд╢реНрд░реГрдВрдЦрд▓рд╛ рдХреЗ рд▓реЗрдЦреЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВ рдПрдХ рдЗрдВрдЯреЗрд▓ рд╣реИрд╢рд╡реЗрд▓ i7 рдкреНрд░реЛрд╕реЗрд╕рд░ рдФрд░ рдПрдХ рд▓рд┐рдВрдХреНрд╕рдПрдХреНрд╕-рдПрд▓рдкреА рдЪрд┐рдкрд╕реЗрдЯ рдХреЗ рд╕рд╛рде рдПрдХ рдХрд╕реНрдЯрдо рдмреЛрд░реНрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВред  рдЗрд╕ рдмреЛрд░реНрдб рдкрд░, рдореИрдВрдиреЗ рд╕реАрдмреАрдЖрдИрдУрдПрд╕ рдХреЗ рд╕рд╛рде рдорд┐рд▓рдХрд░ рдХреЛрд░рдмреВрдЯ рд▓реЙрдиреНрдЪ рдХрд┐рдпрд╛ред  рдХреЛрд░рдмреВрдЯ рд╣рд╛рд░реНрдбрд╡реЗрдпрд░-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЖрд░рдВрднреАрдХрд░рдг рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ, рдФрд░ рд╕реАрдмреАрдЖрдИрдУрдПрд╕ рдкреЗрд▓реЛрдб рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЗ рд▓рд┐рдП рдПрдХ BIOS рдЗрдВрдЯрд░рдлрд╝реЗрд╕ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рд▓реЗрдЦ рдореЗрдВ, рдореИрдВ рдХреЛрд░рдмреВрдЯ рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░рдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд╛ рд╡рд░реНрдгрди рдирд╣реАрдВ рдХрд░реВрдВрдЧрд╛, рд▓реЗрдХрд┐рди рдмрд╕ рдПрдХ рдЙрджрд╛рд╣рд░рдг рдХреЗ рд╕рд╛рде рджрд┐рдЦрд╛рдиреЗ рдХреА рдХреЛрд╢рд┐рд╢ рдХрд░реВрдВрдЧрд╛ рдХрд┐ рдмрд╛рд╣рд░реА рдЙрдкрдХрд░рдгреЛрдВ рд╕реЗ IRQ рдЗрдВрдЯрд░рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рдХрд┐рд╕ рддрд░рд╣ рдХреА BIOS рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреА рдЬрд╛рдиреА рдЪрд╛рд╣рд┐рдПред <br><br>  рдЪреВрдВрдХрд┐ рдХреЛрд░рдмреВрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рдХреНрд░рд┐рдп рд░реВрдк рд╕реЗ рд╡рд┐рдХрд╕рд┐рдд рд╣реЛ рд░рд╣рд╛ рд╣реИ рддрд╛рдХрд┐ рд▓реЗрдЦ рд╣рдореЗрд╢рд╛ рдЕрджреНрдпрддрд┐рдд рд░рд╣реЗ, рд╣рдо рдирд╡реАрдирддрдо рдирд┐рд╢реНрдЪрд┐рдд рд╕рдВрд╕реНрдХрд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">4.9</a> (рд░рд┐рд▓реАрдЬрд╝ 2018-12-20) рдХреЗ рдЙрджрд╛рд╣рд░рдг рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХреЛрдб рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗред <br><br>  рдореЗрд░рд╛ рдирд┐рдХрдЯрддрдо рдорджрд░рдмреЛрд░реНрдб Google рдмреЗрд▓реНрдЯреЛ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдкреИрдВрдерд░ рднрд┐рдиреНрдирддрд╛ рд╣реИред  рдЗрд╕ рдорджрд░рдмреЛрд░реНрдб рдХреЗ рд▓рд┐рдП рдореБрдЦреНрдп рдлрд╝реЛрд▓реНрдбрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">"src \ mainboard \ google \ beltino"</a> рдлрд╝реЛрд▓реНрдбрд░ рд╣реИред  рд╕рднреА рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдпрд╣рд╛рдВ рдХреЗрдВрджреНрд░рд┐рдд рд╣реИрдВ рдФрд░ рдХреЛрдб рдЗрд╕ рдмреЛрд░реНрдб рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢рд┐рд╖реНрдЯ рд╣реИред <br><br>  рддреЛ, рдЖрдЗрдП, рдпрд╣ рдЫрд╛рдВрдЯрдирд╛ рд╢реБрд░реВ рдХрд░реЗрдВ рдХрд┐ рдЙрдкрд░реЛрдХреНрдд рдЖрдЗрдЯрдо рдХрд╣рд╛рдБ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЧрдП рд╣реИрдВ: <br><br><h4>  1) рдмрддрд╛рдПрдВ рдХрд┐ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди INTx рдХреА рдХреМрди рд╕реА рд▓рд╛рдЗрди рдЦреАрдВрдЪрддреА рд╣реИ </h4><br>  рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА DxxIP (рдбрд┐рд╡рд╛рдЗрд╕ xx рдЗрдВрдЯрд░рдкреНрдЯ рдкрд┐рди рд░рдЬрд┐рд╕реНрдЯрд░ (IP) рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ rcba_config рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рдлрд╝рд╛рдЗрд▓ <a href="">"src / mainboard / google / beltino / romstage.c"</a> рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЧрдИ рд╣реИред  рдпрд╣ рд░рдЬрд┐рд╕реНрдЯрд░ рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕рд╛ рдкрд┐рди INTx # (рдП / рдмреА / рд╕реА / рдбреА) рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рдкреНрд░рддреНрдпреЗрдХ рдХрд╛рд░реНрдп рдХреЛ рдПрдХ рдмрд╛рдзрд╛ рдЙрддреНрдкрдиреНрди рдХрд░рддрд╛ рд╣реИред <br><br>  рд╕рдВрднрд╛рд╡рд┐рдд рд╡рд┐рдХрд▓реНрдк ( <a href="">"src / southbridge / Intel / lynxpoint / pch.h" рдлрд╝рд╛рдЗрд▓ рджреЗрдЦреЗрдВ</a> ): <br><br><pre><code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">0</span></span>h = No interrupt <span class="hljs-number"><span class="hljs-number">1</span></span>h = INTA# <span class="hljs-number"><span class="hljs-number">2</span></span>h = INTB# <span class="hljs-number"><span class="hljs-number">3</span></span>h = INTC# <span class="hljs-number"><span class="hljs-number">4</span></span>h = INTD#</code> </pre> <br>  рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдХрдИ рдХрд╛рд░реНрдп рдПрдХ рд╣реА рдкрд┐рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдпрд╣ рдорд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ рдХрд┐ рдХрд╛рд░реНрдп рд░реБрдХрд╛рд╡рдЯ рдХреЗ рд▓рд┐рдП рдкрд┐рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ (рдХреЛрдИ рд░реБрдХрд╛рд╡рдЯ рдирд╣реАрдВ)ред <br>  рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рд▓реЗрдЦ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рдЖрдВрдХрдбрд╝реЗ рдореЗрдВ рджреЗрдЦрд╛ рдерд╛ред <br><br>  рдкреВрд░реНрдг рдХреЛрдб рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдЖрдЗрдЯрдо рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Device interrupt pin register (board specific) */</span></span> RCBA_SET_REG_32(D31IP, (INTC &lt;&lt; D31IP_TTIP) | (NOINT &lt;&lt; D31IP_SIP2) | (INTB &lt;&lt; D31IP_SMIP) | (INTA &lt;&lt; D31IP_SIP)), RCBA_SET_REG_32(D29IP, (INTA &lt;&lt; D29IP_E1P)), RCBA_SET_REG_32(D28IP, (INTA &lt;&lt; D28IP_P1IP) | (INTC &lt;&lt; D28IP_P3IP) | (INTB &lt;&lt; D28IP_P4IP)), RCBA_SET_REG_32(D27IP, (INTA &lt;&lt; D27IP_ZIP)), RCBA_SET_REG_32(D26IP, (INTA &lt;&lt; D26IP_E2P)), RCBA_SET_REG_32(D22IP, (NOINT &lt;&lt; D22IP_MEI1IP)), RCBA_SET_REG_32(D20IP, (INTA &lt;&lt; D20IP_XHCI)),</code> </pre> <br>  рдмреЗрд╣рддрд░ рд╕рдордЭ рдХреЗ рд▓рд┐рдП, рдХреБрдЫ рдЙрджрд╛рд╣рд░рдгреЛрдВ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВ: <br><br>  <b>рдЙрджрд╛рд╣рд░рдг 1:</b> <br><br>  рдбрд┐рд╡рд╛рдЗрд╕ 0x1d (рджрд╢рдорд▓рд╡ рдореЗрдВ 29) рдореЗрдВ рдПрдХ рдлрд╝рдВрдХреНрд╢рди (EHCI рдирд┐рдпрдВрддреНрд░рдХ) рд╣реИред <br><br>  рдЗрд╕ рд╕реНрдерд┐рддрд┐ рдореЗрдВ, INTA # рдХреЗ рд▓рд┐рдП рдПрдХ рд╡реНрдпрд╡рдзрд╛рди рдкреНрд░рджрд╛рди рдХрд░реЗрдВред <br><br>  00: 1d.0 - INTA # <br><br><pre> <code class="cpp hljs">RCBA_SET_REG_32(D29IP, (INTA &lt;&lt; D29IP_E1P)),</code> </pre> <br>  <b>рдЙрджрд╛рд╣рд░рдг 2:</b> <br>  рдбрд┐рд╡рд╛рдЗрд╕ 0x1f (рджрд╢рдорд▓рд╡ рдореЗрдВ 31) рдореЗрдВ рдерд░реНрдорд▓ рд╕реЗрдВрд╕рд░ рдирд┐рдпрдВрддреНрд░рдХ (00: 1f.6), SATA рдирд┐рдпрдВрддреНрд░рдХ 2 (00: 1f.2), SMBus рдирд┐рдпрдВрддреНрд░рдХ (00: 1f.3), SATA рдирд┐рдпрдВрддреНрд░рдХ 1 (00: 1f) рдХрд╛рд░реНрдп рд╣реИрдВ .2)ред  рд╣рдо рдХреЗрд╡рд▓ SMBus рдирд┐рдпрдВрддреНрд░рдХ, SATA рдирд┐рдпрдВрддреНрд░рдХ 1 рдФрд░ рдерд░реНрдорд▓ рд╕реЗрдВрд╕рд░ рдирд┐рдпрдВрддреНрд░рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред <br><br>  00: 1f.2 - INTA # (SATA рдирд┐рдпрдВрддреНрд░рдХ 1) <br>  00: 1f.3 - INTB # (SMBus рдХрдВрдЯреНрд░реЛрд▓рд░) <br>  00: 1f.2 - рдХреЛрдИ рд╡реНрдпрд╡рдзрд╛рди (SATA рдирд┐рдпрдВрддреНрд░рдХ 2 рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ) <br>  00: 1f.6 - INTC # (рдерд░реНрдорд▓ рд╕реЗрдВрд╕рд░ рдирд┐рдпрдВрддреНрд░рдХ) <br><br>  рдЗрд╕ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ рд▓рд┐рдЦрдирд╛ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="cpp hljs">RCBA_SET_REG_32(D31IP, (INTC &lt;&lt; D31IP_TTIP) | (NOINT &lt;&lt; D31IP_SIP2) | (INTB &lt;&lt; D31IP_SMIP) | (INTA &lt;&lt; D31IP_SIP)),</code> </pre> <br>  <b>рдЙрджрд╛рд╣рд░рдг 3:</b> <br><br>  рдПрдХ рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ, рд╣рдорд╛рд░реЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдлрд╝рдВрдХреНрд╢рди рдХреА рд╕рдВрдЦреНрдпрд╛ 4 рд╕реЗ рдЕрдзрд┐рдХ рд╣реИред 0x1c рдбрд┐рд╡рд╛рдЗрд╕ рдореЗрдВ, рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдкреЛрд░реНрдЯ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред  рдкреЛрд░реНрдЯ рдХреЗ рд▓рд┐рдП 0-5 рд╕реЗ рдХрд╛рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдФрд░ рд╕рдорд╛рди рд░реВрдк рд╕реЗ рд▓рд╛рдЗрдиреЛрдВ рдХреЗ рдмреАрдЪ рд╡рд┐рддрд░рд┐рдд рдХрд┐рдП рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдк рдЗрд╕реЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br>  00: 1c.0 - INTA # (рдкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдкреЛрд░реНрдЯ 0) <br>  00.1c.1 - INTB # (рдкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдкреЛрд░реНрдЯ 1) <br>  00.1c.2 - INTC # (рдкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдкреЛрд░реНрдЯ 2) <br>  00.1c.3 - INTD # (рдкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдкреЛрд░реНрдЯ 3) <br>  00.1c.4 - INTA # (рдкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдкреЛрд░реНрдЯ 4) <br>  00.1c.5 - INTB # (рдкреАрд╕реАрдЖрдИ рдПрдХреНрд╕рдкреНрд░реЗрд╕ рдкреЛрд░реНрдЯ 5) <br>  00.1c.6 - рдХреЛрдИ рд░реБрдХрд╛рд╡рдЯ (рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдкреЛрд░реНрдЯ) <br>  00.1c.7 - рдХреЛрдИ рд░реБрдХрд╛рд╡рдЯ (рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЧрдпрд╛ рдкреЛрд░реНрдЯ) <br><br><pre> <code class="cpp hljs">RCBA_SET_REG_32(D28IP, (INTA &lt;&lt; D28IP_P1IP) | (INTB &lt;&lt; D28IP_P2IP) | (INTC &lt;&lt; D28IP_P3IP) | (INTD &lt;&lt; D28IP_P4IP) | (INTA &lt;&lt; D28IP_P5IP) | (INTB &lt;&lt; D28IP_P6IP) | (NOINT &lt;&lt; D28IP_P7IP) | (NOINT &lt;&lt; D28IP_P8IP)),</code> </pre> <br><h4>  2) рдкреНрд░рддреНрдпреЗрдХ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП INTx # тЖТ PIRQy рдореИрдкрд┐рдВрдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </h4><br>  рдпрд╣ рдЬрд╛рдирдХрд╛рд░реА <a href="">"src \ mainboard \ google \ belino \ romstage.c"</a> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рднреА рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЧрдИ рд╣реИ <br>  rcba_config рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ, рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рд╕реЗ рд╣реА DxxIR (рдбрд┐рд╡рд╛рдЗрд╕ xx рдЗрдВрдЯрд░рдкреНрдЯ рд░реВрдЯ рд░рдЬрд┐рд╕реНрдЯрд░) рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗред <br><br>  рдЗрд╕ рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╕реЗ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ PIRQx рд▓рд╛рдЗрди (A / B / C / D / E / F / G / H) рдкреНрд░рддреНрдпреЗрдХ INTx # рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди рдХрд┐рд╕рд╕реЗ рдЬреБрдбрд╝реА рд╣реИред <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Device interrupt route registers */</span></span> RCBA_SET_REG_32(D31IR, DIR_ROUTE(PIRQG, PIRQC, PIRQB, PIRQA)),<span class="hljs-comment"><span class="hljs-comment">/* LPC */</span></span> RCBA_SET_REG_32(D29IR, DIR_ROUTE(PIRQD, PIRQD, PIRQD, PIRQD)),<span class="hljs-comment"><span class="hljs-comment">/* EHCI */</span></span> RCBA_SET_REG_32(D28IR, DIR_ROUTE(PIRQA, PIRQB, PIRQC, PIRQD)),<span class="hljs-comment"><span class="hljs-comment">/* PCIE */</span></span> RCBA_SET_REG_32(D27IR, DIR_ROUTE(PIRQG, PIRQG, PIRQG, PIRQG)),<span class="hljs-comment"><span class="hljs-comment">/* HDA */</span></span> RCBA_SET_REG_32(D22IR, DIR_ROUTE(PIRQA, PIRQA, PIRQA, PIRQA)),<span class="hljs-comment"><span class="hljs-comment">/* ME */</span></span> RCBA_SET_REG_32(D21IR, DIR_ROUTE(PIRQE, PIRQF, PIRQF, PIRQF)),<span class="hljs-comment"><span class="hljs-comment">/* SIO */</span></span> RCBA_SET_REG_32(D20IR, DIR_ROUTE(PIRQC, PIRQC, PIRQC, PIRQC)),<span class="hljs-comment"><span class="hljs-comment">/* XHCI */</span></span> RCBA_SET_REG_32(D23IR, DIR_ROUTE(PIRQH, PIRQH, PIRQH, PIRQH)),<span class="hljs-comment"><span class="hljs-comment">/* SDIO */</span></span></code> </pre> <br>  <b>рдЙрджрд╛рд╣рд░рдг 1:</b> <br><br>  0x1c рдбрд┐рд╡рд╛рдЗрд╕ (рджрд╢рдорд▓рд╡ рдкреНрд░рдгрд╛рд▓реА рдореЗрдВ 28) PCIe рдкреЛрд░реНрдЯ рд╣реИ рдЬреИрд╕рд╛ рдХрд┐ рд╣рдо рдкрд╣рд▓реЗ рд╣реА рдкрддрд╛ рд▓рдЧрд╛ рдЪреБрдХреЗ рд╣реИрдВред <br><br>  рд╣рдо "рд╕реАрдзрд╛" рдХрдиреЗрдХреНрд╢рди рдмрдирд╛рддреЗ рд╣реИрдВ: <br><br><ul><li>  INTA # тЖТ PIRQA </li><li>  INTB # тЖТ PIRQB </li><li>  INTC # тЖТ PIRQC </li><li>  INTD # тЖТ PIRQD </li></ul><br><pre> <code class="cpp hljs">RCBA_SET_REG_32(D28IR, DIR_ROUTE(PIRQA, PIRQB, PIRQC, PIRQD))</code> </pre> <br>  <b>рдЙрджрд╛рд╣рд░рдг 2:</b> <br><br>  рдбрд┐рд╡рд╛рдЗрд╕ 0x1d (рджрд╢рдорд▓рд╡ рдореЗрдВ 29) - INTA # рдкрд░ рдПрдХ рдлрд╝рдВрдХреНрд╢рди (EHCI рдирд┐рдпрдВрддреНрд░рдХ), рдЕрдиреНрдп рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдирд╣реАрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  INTA # рд▓рд╛рдЗрди рдХреЛ PIRQD рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="cpp hljs">RCBA_SET_REG_32(D29IR, DIR_ROUTE(PIRQD, PIRQD, PIRQD, PIRQD))</code> </pre> <br>  рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдХреЗрд╡рд▓ рдкрд╣рд▓рд╛ PIRQD рд░рд┐рдХреЙрд░реНрдб (INTA # рдХреЗ рд▓рд┐рдП) рд╕рдордЭ рдореЗрдВ рдЖрддрд╛ рд╣реИ, рдмрд╛рдХреА рдХрд╛ рдХреЛрдИ рдорддрд▓рдм рдирд╣реАрдВ рд╣реИред <br><br><h4>  3a) рдореИрдкрд┐рдВрдЧ рднрд░реЗрдВ PIRQy тЖТ IRQz1 (PIR тЖТ APIC) </h4><br>  рдЬреИрд╕рд╛ рдХрд┐ рд╣рдордиреЗ рдкрд╣рд▓реЗ рд╣реА рдХрд╣рд╛ рд╣реИ, рдореИрдкрд┐рдВрдЧ рдЕрдХреНрд╕рд░ рдпрд╣рд╛рдВ рддрдп рдХреА рдЬрд╛рддреА рд╣реИ, рдФрд░ рдпрд╣ рдорд╛рдорд▓рд╛ рдХреЛрдИ рдЕрдкрд╡рд╛рдж рдирд╣реАрдВ рд╣реИред <br><br><ul><li>  PIRQA тЖТ IRQ16 </li><li>  PIRQB тЖТ IRQ17 </li><li>  ... </li><li>  PIRQH тЖТ IRQ23 </li></ul><br><h4>  3 рдмреА) рдореИрдкрд┐рдВрдЧ рднрд░реЗрдВ PIRQy тЖТ IRQz2 (PIR тЖТ PIC) </h4><br>  рдХреЛрд░рдмреВрдЯ рдореЗрдВ, рдЗрди рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЛ рднрд░рдиреЗ рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдорджрд░рдмреЛрд░реНрдб рдлрд╝реЛрд▓реНрдбрд░ "src \ mainboard \ google \ belino \" рдореЗрдВ devicetree.cb рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред <br><br>  devicetree.cb (рд▓рд┐рдирдХреНрд╕ рдХрд░реНрдиреЗрд▓ рдореЗрдВ рдПрдХ рд╕рдорд╛рди рдЕрд╡рдзрд╛рд░рдгрд╛ рдХреЗ рд╕рд╛рде рд╕рдВрдЪрд╛рд░ рдХреЗ рд▓рд┐рдП рдирд╛рдо devicetree, рдФрд░ "рд╕реАрдмреА" рдХреЛрд░рдмреВрдЯ рдХреЗ рд▓рд┐рдП рдХрдо рд╣реИ) рдПрдХ рд╡рд┐рд╢реЗрд╖ рдлрд╝рд╛рдЗрд▓ рд╣реИ рдЬреЛ рдЗрд╕ рдорджрд░рдмреЛрд░реНрдб рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЛ рджрд░реНрд╢рд╛рддреА рд╣реИ: рдХреМрди рд╕рд╛ рдкреНрд░реЛрд╕реЗрд╕рд░, рдЪрд┐рдкрд╕реЗрдЯ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ, рдХреМрди рд╕реЗ рдбрд┐рд╡рд╛рдЗрд╕ рдЙрди рдкрд░ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ, рдЬреЛ рдмрдВрдж рдЖрджрд┐  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдЪрд┐рдкрд╕реЗрдЯ рдХреЗ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдХреЗ рд▓рд┐рдП рд╡рд┐рд╢реЗрд╖ рдЬрд╛рдирдХрд╛рд░реА рдЗрд╕ рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХреА рдЬрд╛ рд╕рдХрддреА рд╣реИред  рдпрд╣ рдХреЗрд╡рд▓ рдорд╛рдорд▓рд╛ рд╣реИ рдЬреЛ рд╣рдореЗрдВ рдЪрд╛рд╣рд┐рдП: <br><br><pre> <code class="python hljs">register <span class="hljs-string"><span class="hljs-string">"pirqa_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x8b"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqb_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x8a"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqc_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x8b"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqd_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x8b"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqe_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x80"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqf_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x80"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqg_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x80"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqh_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x80"</span></span></code> </pre> <br>  рдпреЗ рд▓рд╛рдЗрдиреЗрдВ рдореИрдкрд┐рдВрдЧ PIRQy тЖТ IRQz2 рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░рддреА рд╣реИрдВред  рдХреЛрдб рдореЗрдВ, devicetree.cb рдлрд╝рд╛рдЗрд▓ рдХреЛ рдкрд╛рд░реНрд╕ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж, рд╡реЗ "config-&gt; pirqX_rout" рд╡реЗрд░рд┐рдПрдмрд▓реНрд╕ рдореЗрдВ рдмрджрд▓ рдЬрд╛рддреЗ рд╣реИрдВред <br><br>  рдЪрд░ "config-&gt; pirqa_rout = 0x8b" рдХрд╛ рдЕрд░реНрде рд╣реЛрдЧрд╛ рдХрд┐ PIRQA PIC рдирд┐рдпрдВрддреНрд░рдХ рдХреЗ IRIC11 рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди (0x0b = 11) рд╕реЗ рдЬреБрдбрд╝рд╛ рд╣реБрдЖ рд╣реИ, рд╣рд╛рд▓рд╛рдБрдХрд┐, рдЙрдЪреНрдЪ рдмрд┐рдЯ (рдЬреЛ 0x80 рд╣реИ) рдХрд╛ рдЕрд░реНрде рд╣реИ рдХрд┐ рдЗрдВрдЯрд░рдкреНрдЯ рд░реВрдЯрд┐рдВрдЧ рдирд╣реАрдВ рдХреА рдЬрд╛рддреА рд╣реИред  рдИрдорд╛рдирджрд╛рд░реА рд╕реЗ, рдореЗрд░реЗ рдЕрдиреБрднрд╡ рдореЗрдВ рдпрд╣ рдПрдХ рдЧрд▓рддреА рд╣реИ, рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ рдпрд╣ PIC рд░реВрдЯрд┐рдВрдЧ рдХреЛ рдЪрд╛рд▓реВ рдХрд░рдиреЗ рдХреЗ рд▓рд╛рдпрдХ рд╣реИ, рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рд╕реНрд╡рдпрдВ рдХреЛ рдЖрд╡рд╢реНрдпрдХ рд╣реЛрдиреЗ рдкрд░ рдЗрд╕ рдмрд┐рдЯ рдХреЛ 1 рдкрд░ рд╕реЗрдЯ рдХрд░рдХреЗ I / O APIC рдкрд░ рд╕реНрд╡рд┐рдЪ рдХрд░рдиреЗ рдореЗрдВ рд╕рдХреНрд╖рдо рд╣реЛрдЧрд╛ред <br><br>  рдпрд╣реА рд╣реИ, рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ рдпрд╣ рд▓рд┐рдЦрдирд╛ рдЕрдзрд┐рдХ рд╕рд╣реА рд╣реЛрдЧрд╛: <br><br><pre> <code class="python hljs">register <span class="hljs-string"><span class="hljs-string">"pirqa_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0b"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqb_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0a"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqc_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0b"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqd_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0b"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqe_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x80"</span></span> <span class="hljs-comment"><span class="hljs-comment"># not used register "pirqf_routing" = "0x80" # not used register "pirqg_routing" = "0x80" # not used register "pirqh_routing" = "0x80" # not used</span></span></code> </pre><br>  рд╣рдордиреЗ рдЕрдВрддрд┐рдо 4 рдХреЛ рдмрд╛рдзрд┐рдд рдирд╣реАрдВ рдХрд┐рдпрд╛, рдХреНрдпреЛрдВрдХрд┐  IRQ0 рд╡реНрдпрд╡рдзрд╛рди рд╣рдореЗрд╢рд╛ рд╕рд┐рд╕реНрдЯрдо рдЯрд╛рдЗрдорд░ рдХреЗ рддрд╣рдд рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдФрд░ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдЕрдиреБрдкрд▓рдмреНрдз рд╣реИ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рд╛рдорд╛рдиреНрдп рдЖрдИрдмреАрдПрдо-рдкреАрд╕реА рд╕рдВрдЧрдд рдЗрдВрдЯрд░рдкреНрдЯ рдЬрд╛рдирдХрд╛рд░реА рджреЗрдЦреЗрдВ</a> )ред <br><br>  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдо рдмрд┐рдВрджреБ 2 рдкрд░ рдХрд░реАрдм рд╕реЗ рдирдЬрд╝рд░ рдбрд╛рд▓реЗрдВ), рддреЛ рд╣рдо рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдХреБрдЫ PCI рдбрд┐рд╡рд╛рдЗрд╕ PIRQE-PIRQH рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЗрд╕рд▓рд┐рдП рдЙрдиреНрд╣реЗрдВ рдЕрд╕рдВрдмрджреНрдз рдЫреЛрдбрд╝рдирд╛ рдЯреВрдЯреЗ рд╣реБрдП рдЙрдкрдХрд░рдгреЛрдВ рдХрд╛ рд╕рд╣реА рддрд░реАрдХрд╛ рд╣реИред <br><br>  рдЗрд╕рд▓рд┐рдП рдХреБрдЫ рдЗрд╕ рддрд░рд╣ рд▓рд┐рдЦрдирд╛ рдмреЗрд╣рддрд░ рд╣реИ: <br><pre> <code class="python hljs">register <span class="hljs-string"><span class="hljs-string">"pirqa_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x03"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqb_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x04"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqc_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x05"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqd_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x06"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqe_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0a"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqf_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0b"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqg_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0e"</span></span> register <span class="hljs-string"><span class="hljs-string">"pirqh_routing"</span></span> = <span class="hljs-string"><span class="hljs-string">"0x0f"</span></span></code> </pre> <br><br>  рд╕рдВрдмрдВрдзрд┐рдд рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреА рд╡рд╛рд╕реНрддрд╡рд┐рдХ рднрд░рдг рдлрд╝рд╛рдЗрд▓ <a href="">src \ Southbridge \ Intel \ lynxpoint \ lpc.c</a> рдлрд╝рдВрдХреНрд╢рди pch_pirq_init рдореЗрдВ рд╣реЛрддреА рд╣реИред <br><br>  рд░рдЬрд┐рд╕реНрдЯрд░ рднрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдХреЛрдб рд╕реНрдирд┐рдкреЗрдЯ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Get the chip configuration */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">config_t</span></span> *config = dev-&gt;chip_info; pci_write_config8(dev, PIRQA_ROUT, config-&gt;pirqa_routing); pci_write_config8(dev, PIRQB_ROUT, config-&gt;pirqb_routing); pci_write_config8(dev, PIRQC_ROUT, config-&gt;pirqc_routing); pci_write_config8(dev, PIRQD_ROUT, config-&gt;pirqd_routing); pci_write_config8(dev, PIRQE_ROUT, config-&gt;pirqe_routing); pci_write_config8(dev, PIRQF_ROUT, config-&gt;pirqf_routing); pci_write_config8(dev, PIRQG_ROUT, config-&gt;pirqg_routing); pci_write_config8(dev, PIRQH_ROUT, config-&gt;pirqh_routing);</code> </pre> <br>  рд░рдЬрд┐рд╕реНрдЯрд░ рдкрддрд╛ рд╕реНрдерд┐рд░рд╛рдВрдХ рдПрдХ рд╣реА <a href="">pch.h</a> рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рд╡рд░реНрдгрд┐рдд рд╣реИрдВ <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQA_ROUT 0x60 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQB_ROUT 0x61 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQC_ROUT 0x62 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQD_ROUT 0x63 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQE_ROUT 0x68 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQF_ROUT 0x69 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQG_ROUT 0x6A #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> PIRQH_ROUT 0x6B</span></span></code> </pre> <br>  рдЗрд╕ рдЪрд┐рдкрд╕реЗрдЯ рдХреЗ рд▓рд┐рдП PIRQy тЖТ IRQz2 рдХреЛ рдореИрдк рдХрд░рдирд╛ PIRQy_ROUT рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдореЗрдВ LPC PCI рдбрд┐рд╡рд╛рдЗрд╕ (рдкрддрд╛ 00: 1f.0) рдХреЛ рд▓рд┐рдЦрд╛ рдЬрд╛рддрд╛ рд╣реИред  рдпрд╣ рдзреНрдпрд╛рди рджрд┐рдпрд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдП рдХрд┐ рдЕрдХреНрд╕рд░ рдкреАрдЖрдИрд╕реА рдХреЗ рдкреНрд░рддрд┐ рд╕рднреА 15 IRQz2 рд▓рд╛рдЗрдиреЛрдВ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рдирд╣реАрдВ рд╣реИ, рд▓реЗрдХрд┐рди рдХреЗрд╡рд▓ рдПрдХ рд╣рд┐рд╕реНрд╕рд╛ (рдЙрджрд╛рд╣рд░рдг рдХреЗ рд▓рд┐рдП, 3,4,5,6,7,9,10,11,12,14,15)ред  рдЗрди рд░рдЬрд┐рд╕реНрдЯрд░реЛрдВ рдХреЗ рд╡рд┐рд╡рд░рдг рдореЗрдВ рдЙрди рд╕реВрдЪрдирд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЬрд╛рдирдХрд╛рд░реА рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП рдЬрд┐рдирдХреЗ рд▓рд┐рдП IRQs PIRQ рд▓рд╛рдЗрдиреЛрдВ рд╕реЗ рдЗрдВрдЯрд░рдкреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрд▓рдмреНрдз рд╣реИрдВред  рддреЛ, рдКрдкрд░ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдкреНрд░рд╕реНрддрд╛рд╡рд┐рдд рдореИрдкрд┐рдВрдЧ рдХреЗрд╡рд▓ рддрднреА рд╕рдВрднрд╡ рд╣реИ рдЬрдм PIRQ рдХреА рд▓рд╛рдЗрди IRQ3, IRQ4, IRQ5, IRQ6, IRQ10, IRQ11, IRQ14, IRQ15 рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реЛред  рд▓реЗрдХрд┐рди рдЕрдЧрд░ рд╣рдо pch_pirq_init рдлрд╝рдВрдХреНрд╢рди рд╕реЗ рдкрд╣рд▓реЗ рдЯрд┐рдкреНрдкрдгреА рдХреЛ рдзреНрдпрд╛рди рд╕реЗ рджреЗрдЦреЗрдВ, рддреЛ рд╣рдо рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдпрд╣ рд╣реИ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* PIRQ[n]_ROUT[3:0] - PIRQ Routing Control * 0x00 - 0000 = Reserved * 0x01 - 0001 = Reserved * 0x02 - 0010 = Reserved * 0x03 - 0011 = IRQ3 * 0x04 - 0100 = IRQ4 * 0x05 - 0101 = IRQ5 * 0x06 - 0110 = IRQ6 * 0x07 - 0111 = IRQ7 * 0x08 - 1000 = Reserved * 0x09 - 1001 = IRQ9 * 0x0A - 1010 = IRQ10 * 0x0B - 1011 = IRQ11 * 0x0C - 1100 = IRQ12 * 0x0D - 1101 = Reserved * 0x0E - 1110 = IRQ14 * 0x0F - 1111 = IRQ15 * PIRQ[n]_ROUT[7] - PIRQ Routing Control * 0x80 - The PIRQ is not routed. */</span></span></code> </pre> <br><h4>  4) рдкреНрд░рддреНрдпреЗрдХ PCI рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди / рдЗрдВрдЯрд░рдкреНрдЯ рдкрд┐рди рд░рдЬрд┐рд╕реНрдЯрд░ рднрд░реЗрдВ </h4><br>  PCI рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реНрдерд╛рди рдореЗрдВ (рдкреНрд░рддреНрдпреЗрдХ PCI рдорд╛рдирдХ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдХрд╛рд░реНрдп рдХрд░рддрд╛ рд╣реИ) рд╣рдорд╛рд░реЗ рд▓рд┐рдП 2 рд░рдЬрд┐рд╕реНрдЯрд░ рд╣реИрдВ: <br><br><ul><li>  3Ch: рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди - рдпрд╣рд╛рдВ рдЖрдкрдХреЛ IRQz2 рдирдВрдмрд░ (0 рд╕реЗ 15 рддрдХ рдХреА рд╕рдВрдЦреНрдпрд╛) рд▓рд┐рдЦрдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИ, рд╡рд╣ рдЕрд╡рд░реЛрдз рд╕рдВрдЦреНрдпрд╛ рдЬреЛ рдлрд╝рдВрдХреНрд╢рди рдЕрдВрддрддрдГ PIC рдирд┐рдпрдВрддреНрд░рдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╕рдордп рдЦреАрдВрдЪрддреА рд╣реИ </li><li>  3Dh: рдЗрдВрдЯрд░рдкреНрдЯ рдкрд┐рди - рджрд┐рдЦрд╛рддрд╛ рд╣реИ рдХрд┐ рдХреМрди рд╕реА рд▓рд╛рдЗрди INTx # (A / B / C / D) рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреА рд╣реИ </li></ul><br>  рдЪрд▓реЛ рдЖрдЦрд┐рд░реА рдХреЗ рд╕рд╛рде рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВред  рдЕрдиреБрдЪреНрдЫреЗрдж 1 рдореЗрдВ рд╣рдорд╛рд░реЗ рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдИ рдЧрдИ рдЪрд┐рдкрд╕реЗрдЯ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ (DxxIP рд░рдЬрд┐рд╕реНрдЯрд░) рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЗрдВрдЯрд░рдкреНрдЯ рдкрд┐рди рд░рдЬрд┐рд╕реНрдЯрд░ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рднрд░рд╛ рдЬрд╛рдПрдЧрд╛ рдФрд░ рд░реАрдб-рдУрдирд▓реА рд╣реЛрдЧрд╛ред <br><br>  рддреЛ рдпрд╣ рд╣реИ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ PCI рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП IRQz2 рд╡реНрдпрд╡рдзрд╛рди рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди рд░рдЬрд┐рд╕реНрдЯрд░ рдХреЛ рдЖрдмрд╛рдж рдХрд░рдирд╛ рд╣реИред <br><br>  рдореИрдкрд┐рдВрдЧ PIRQy тЖТ IRQz2 (рдЖрдЗрдЯрдо 3 рдмреА), рдФрд░ рдореИрдкрд┐рдВрдЧ INTx # тЖТ PIRQy (рдЖрдЗрдЯрдо 2) рдХреЛ рдЬрд╛рдирддреЗ рд╣реБрдП, рдЖрдк рдкреНрд░рддреНрдпреЗрдХ рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рдЖрд╕рд╛рдиреА рд╕реЗ рднрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдпрд╣ рдЬрд╛рдирддреЗ рд╣реБрдП рдХрд┐ INTx (рд░реБрдХрд╛рд╡рдЯ 1) рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИ (рдЖрдЗрдЯрдо 1)ред <br><br>  рдХреЛрд░рдмреВрдЯ рдореЗрдВ, <a href="">рдЗрдВрдЯрд░рдЪреЗрдВрдЬ</a> рд▓рд╛рдЗрди рд░рдЬрд┐рд╕реНрдЯрд░ рднреА <a href="">sch \ Southbridge \ Intel \ lynxpoint \ lpc.c рдлрд╝рд╛рдЗрд▓</a> рдореЗрдВ pch_pirq_init рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рдкреЙрдкреБрд▓реЗрдЯ рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ: <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* Eric Biederman once said we should let the OS do this. * I am not so sure anymore he was right. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (irq_dev = all_devices; irq_dev; irq_dev = irq_dev-&gt;next) { u8 int_pin=<span class="hljs-number"><span class="hljs-number">0</span></span>, int_line=<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!irq_dev-&gt;enabled || irq_dev-&gt;path.type != DEVICE_PATH_PCI) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; int_pin = pci_read_config8(irq_dev, PCI_INTERRUPT_PIN); <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (int_pin) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-comment"><span class="hljs-comment">/* INTA# */</span></span> int_line = config-&gt;pirqa_routing; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-comment"><span class="hljs-comment">/* INTB# */</span></span> int_line = config-&gt;pirqb_routing; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-comment"><span class="hljs-comment">/* INTC# */</span></span> int_line = config-&gt;pirqc_routing; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-comment"><span class="hljs-comment">/* INTD# */</span></span> int_line = config-&gt;pirqd_routing; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!int_line) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; pci_write_config8(irq_dev, PCI_INTERRUPT_LINE, int_line); }</code> </pre> <br>  рдХрд┐рд╕реА рдХрд╛рд░рдг рд╕реЗ, рдпрд╣ рдХреЛрдб рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ рдореИрдкрд┐рдВрдЧ рдХрд┐рд╕реА рднреА рд╕реНрдерд┐рддрд┐ рдореЗрдВ рд╣реИ INTA # тЖТ PIRQA, INTB # тЖТ PIRQB, INTC # тЖТ PIRQC, INTD # тЖТ PIRQDред  рд╣рд╛рд▓рд╛рдВрдХрд┐ рд╡реНрдпрд╡рд╣рд╛рд░ рдореЗрдВ рд╣рдордиреЗ рджреЗрдЦрд╛ рдХрд┐ рдпрд╣ рдЕрд▓рдЧ рд╣реЛ рд╕рдХрддрд╛ рд╣реИ (рдкреИрд░рд╛рдЧреНрд░рд╛рдл 2 рджреЗрдЦреЗрдВ)ред <br><br>  рдЖрдо рддреМрд░ рдкрд░ "рдПрд░рд┐рдХ рдмрд┐рдбрд░рдореИрди рдиреЗ рдПрдХ рдмрд╛рд░ рдХрд╣рд╛ рдерд╛", рдФрд░ рд╣рдордиреЗ рдЗрд╕реЗ рдХрд╣реАрдВ рднреА рдХреЙрдкреА рдХрд┐рдпрд╛: <br><br><pre> <code class="bash hljs">$ grep <span class="hljs-string"><span class="hljs-string">"Eric Biederman once said"</span></span> -r src/ src/southbridge/intel/fsp_bd82x6x/lpc.c: /* Eric Biederman once said we should <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> the OS <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> this. src/southbridge/intel/i82801gx/lpc.c: /* Eric Biederman once said we should <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> the OS <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> this. src/southbridge/intel/i82801ix/lpc.c: /* Eric Biederman once said we should <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> the OS <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> this. src/southbridge/intel/lynxpoint/lpc.c: /* Eric Biederman once said we should <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> the OS <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> this. src/southbridge/intel/sch/lpc.c: /* Eric Biederman once said we should <span class="hljs-built_in"><span class="hljs-built_in">let</span></span> the OS <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> this.</code> </pre> <br>  рд╕рд╛рдорд╛рдиреНрдп рддреМрд░ рдкрд░, рдХреЛрд░рдмреВрдЯ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рд╡рд┐рд░рд╛рд╕рдд рдЕрд╡рд░реЛрдз рд╕рдорд░реНрдерди рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкрд░рд╡рд╛рд╣ рдирд╣реАрдВ рдХрд░рддрд╛ рд╣реИред  рдЗрд╕ рдЧрд▓рддреА рдкрд░ рдЗрддрдирд╛ рд╣реИрд░рд╛рди рд╣реЛрдиреЗ рдХреЗ рд▓рд╛рдпрдХ рдирд╣реАрдВ рд╣реИред  рдЖрдзреБрдирд┐рдХ рдУрдПрд╕ рд▓реЛрдб рдХрд░рддреЗ рд╕рдордп, рдпрд╣ рдЖрдкрдХреЛ рдкрд░реЗрд╢рд╛рди рдирд╣реАрдВ рдХрд░реЗрдЧрд╛, рд▓реЗрдХрд┐рди рдЕрдЧрд░ рдЖрдкрдХреЛ рдЕрдЪрд╛рдирдХ "рдПрд╕рдкреАрдЖрдИ = рдСрдл рдиреЙрд▓реЗрдкрд┐рдХ" рд╡рд┐рдХрд▓реНрдкреЛрдВ рдХреЗ рд╕рд╛рде рд▓рд┐рдирдХреНрд╕ рдХреЛ рд▓реЛрдб рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рддреЛ рдРрд╕рд╛ рдХрд░рдирд╛ рд╕рдВрднрд╡ рдирд╣реАрдВ рд╣реИред <br><br><h2>  рдирд┐рд╖реНрдХрд░реНрд╖ </h2><br>  рдирд┐рд╖реНрдХрд░реНрд╖ рдореЗрдВ, рд╣рдо рдкреАрд╕реАрдЖрдИ рдореЗрдВ рд░реВрдЯрд┐рдВрдЧ рдХреЗ рд▓рд┐рдП рдЪрд┐рдкрд╕реЗрдЯ рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдП рдЬрд╛рдиреЗ рд╡рд╛рд▓реЗ рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рджреЛрд╣рд░рд╛рдПрдВрдЧреЗ: <br><br><ol><li>  рдЗрдВрдЧрд┐рдд рдХрд░реЗрдВ рдХрд┐ рдкреНрд░рддреНрдпреЗрдХ PCI рдлрд╝рдВрдХреНрд╢рди рдХреЛ INTx # рдкрдВрдХреНрддрд┐ рдЦреАрдВрдЪрддреА рд╣реИ </li><li>  рдкреНрд░рддреНрдпреЗрдХ PCI рдбрд┐рд╡рд╛рдЗрд╕ рдХреЗ рд▓рд┐рдП INTx # тЖТ PIRQy рдореИрдкрд┐рдВрдЧ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ </li><li>  рдореИрдкрд┐рдВрдЧ PIRQy тЖТ IRQz1 (PIR тЖТ APIC) рдФрд░ рдореИрдкрд┐рдВрдЧ PIRQy тЖТ IRQz2 (PIR тЖТ PIC) рднрд░реЗрдВ </li><li>  рдкреНрд░рддреНрдпреЗрдХ PCI рдлрд╝рдВрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдкреАрд╕реАрдЖрдИ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рд╕реНрдерд╛рди рдХреЗ рдЗрдВрдЯрд░рдкреНрдЯ рд▓рд╛рдЗрди / рдЗрдВрдЯрд░рдкреНрдЯ рдкрд┐рди рд░рдЬрд┐рд╕реНрдЯрд░ рдореЗрдВ рднрд░реЗрдВред </li></ol></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi440304/">https://habr.com/ru/post/hi440304/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi440294/index.html">рд░рд╛рд╕реНрдкрдмреЗрд░реА рдкрд╛рдИ рдкрд░ рдорд┐рдбреА-рд░рд╛рдЙрдЯрд░</a></li>
<li><a href="../hi440296/index.html">рдФрджреНрдпреЛрдЧрд┐рдХ IoT рдХреЗ рд▓рд┐рдП 6 рдЖрд╡реЗрджрди</a></li>
<li><a href="../hi440298/index.html">рдирд┐рдГрд╢реБрд▓реНрдХ Libgdx рдкрд░ рд╡реЗрд▓реЗрдВрдЯрд╛рдЗрди рдбреЗ рдЖрд╡реЗрджрди</a></li>
<li><a href="../hi440300/index.html">10 рд╕рд╛рдВрддреНрд╡рдирд╛ рдПрдХ рдкреНрд░реЛ рдХреА рддрд░рд╣ рдЬрд╛рд╡рд╛рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛрдб рдмрд╣рд╕ рдореЗрдВ рдорджрдж рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП</a></li>
<li><a href="../hi440302/index.html">рд╕реАрдЖрд░рдПрдо - рд╕рдлрд▓рддрд╛ рдХреА рд▓рд╛рдЧрдд, рддреНрд░реБрдЯрд┐ рдХреА рд▓рд╛рдЧрдд, рд╕реНрд╡рд╛рдорд┐рддреНрд╡ рдХреА рд▓рд╛рдЧрдд</a></li>
<li><a href="../hi440306/index.html">рдЕрддреНрдпрдзрд┐рдХ рднрд░реА рд╣реБрдИ рдкреНрд░рдгрд╛рд▓рд┐рдпреЛрдВ рдореЗрдВ рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реНрдХреЗрд▓рд┐рдВрдЧ</a></li>
<li><a href="../hi440308/index.html">рд╡рд┐рднрд╛рдЬрд┐рдд рдХрд░реЗрдВ рдФрд░ рдЬреАрддреЗрдВ, рдпрд╛ рдзреАрд░реЗ-рдзреАрд░реЗ рд▓рд┐рдЦреЗрдВ - рдЬрд▓реНрджреА рд╕реЗ рдкрдврд╝реЗрдВ</a></li>
<li><a href="../hi440310/index.html">рдЪрд╛рд▓рд╛рди рдХреЛ рд╕рдордЭрдиреЗ рдФрд░ рдЙрдирд╕реЗ рдбреЗрдЯрд╛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╢реАрди рдХреЛ рдХреИрд╕реЗ рд╕рд┐рдЦрд╛рдирд╛ рд╣реИ</a></li>
<li><a href="../hi440312/index.html">рд╣реИрдХрдХреНрд╡реЗрд╕реНрдЯ 2018. рдкрд░рд┐рдгрд╛рдо рдФрд░ рд▓рд┐рдЦреЗрдВред рджрд┐рди 4-7</a></li>
<li><a href="../hi440314/index.html">JDK 12 рд░рд┐рд▓реАрдЬрд╝ рдХреИрдВрдбрд┐рдбреЗрдЯ: рд╢реЗрдирдВрдбреЛ, рдЬреА 1, рдЬреЗрдПрдордПрдЪ, рдЖрд░реНрдо 64ред рд╕реНрд╡рд┐рдВрдЧ рдСрдл рдмреИрдХ рдореЗрдВ рдХреАрдбрд╝реЗ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>