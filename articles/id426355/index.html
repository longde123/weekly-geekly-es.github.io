<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>⏺️ ✋🏽 👨‍⚕️ Fungsi Math.Sin (double) untuk GPU 🉑 🤟🏿 ♟️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Kata Pengantar 
 Saya perlu menghitung busur dengan peningkatan akurasi pada prosesor kartu video secara real time. 

 Penulis tidak menetapkan tujuan...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Fungsi Math.Sin (double) untuk GPU</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/426355/"><h3>  Kata Pengantar </h3><br>  Saya perlu menghitung busur dengan peningkatan akurasi pada prosesor kartu video secara real time. <br><br>  Penulis tidak menetapkan tujuan untuk melampaui fungsi standar System.Math.Sin () (C #) dan tidak mencapainya. <br><a name="habracut"></a><br>  <i>Hasil karya dan pilihan saya (bagi yang tidak mau membaca):</i> <br><br><div class="spoiler">  <b class="spoiler_title">Sin_3 (rad)</b> <div class="spoiler_text"><pre><code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Math_d { const <span class="hljs-type"><span class="hljs-type">double</span></span> PI025 = Math.PI / <span class="hljs-number"><span class="hljs-number">4</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">17</span></span> = <span class="hljs-number"><span class="hljs-number">131072</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> ),   <span class="hljs-number"><span class="hljs-number">10000</span></span> ( ),  <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">21</span></span> = <span class="hljs-number"><span class="hljs-number">22097152</span></span> (<span class="hljs-number"><span class="hljs-number">16</span></span> )   +<span class="hljs-number"><span class="hljs-number">-1</span></span> ( ) (  ) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem = <span class="hljs-number"><span class="hljs-number">22097152</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem_M1 = length_mem - <span class="hljs-number"><span class="hljs-number">1</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_sin; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    cos,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_cos; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,   sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> Initialise() { Ini_Mem_Sin(); Ini_Mem_Cos(); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;       Cos,   . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;&lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_3(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">double</span></span> rad_025; <span class="hljs-type"><span class="hljs-type">int</span></span> i; //    //<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rad &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { rad = -rad + Math.PI; } i = (<span class="hljs-type"><span class="hljs-type">int</span></span>)(rad / PI025); //   rad_025 = rad - PI025 * i; //     ( ) i = i &amp; <span class="hljs-number"><span class="hljs-number">7</span></span>; //      <span class="hljs-number"><span class="hljs-number">8</span></span> //    switch (i) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(PI025 - rad_025); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   sin    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Sin() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_sin = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_sin[i] = Math.Sin(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   cos    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Cos() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_cos = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_cos[i] = Math.Cos(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      sin  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_sin[i_0]; b = mem_sin[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      cos  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Cos_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_cos[i_0]; b = mem_cos[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      . (<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a)) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="a"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="b"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="s"&gt;  . <span class="hljs-number"><span class="hljs-number">0</span></span> = a, <span class="hljs-number"><span class="hljs-number">1</span></span> = b, <span class="hljs-number"><span class="hljs-number">0.5</span></span> =   a  b. &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> a, <span class="hljs-type"><span class="hljs-type">double</span></span> b, <span class="hljs-type"><span class="hljs-type">double</span></span> s) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a); } }</code> </pre> <br></div></div><br><h3>  Alasan publikasi </h3><br><ul><li>  Tidak ada fungsi Sin standar untuk ganda dalam bahasa HLSL (tapi ini tidak akurat) </li><li>  Ada sedikit informasi yang tersedia di Internet tentang topik ini. </li></ul><br><h3>  Pendekatan yang Dipertimbangkan </h3><br><ul><li>  Taylor Series <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">(Wikipedia)</a> </li><li>  Polinomial ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">penulis fungsi: "asvp"</a> ) </li><li>  Interpolasi linier dari hasil yang telah dihitung sebelumnya dari Math.Sin dan Math.Cos (penulis: ) </li></ul><br><h3>  Parameter yang dianalisis </h3><br><ul><li>  Akurasi dengan Matematika </li><li>  Kecepatan dalam kaitannya dengan Math.Sin </li></ul><br>  <u>Selain analisis, kami akan meningkatkan kinerja mereka.</u> <br><br><h4>  Pangkat Taylor </h4><br>  Pro: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Presisi tertinggi</b> <div class="spoiler_text">  Fungsi ini, yang digunakan untuk menghitung nilai Sin, dapat digunakan untuk menghitung nilai Sin yang <u>akurat</u> .  Semakin banyak iterasi yang dialaminya, semakin akurat nilainya diperoleh pada output (dalam hipotesis).  Dalam praktik pemrograman, ada baiknya mempertimbangkan kesalahan pembulatan perhitungan tergantung pada jenis parameter yang digunakan (ganda, float, desimal, dan lainnya). </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Menghitung sudut mana pun</b> <div class="spoiler_text">  Anda dapat memasukkan nilai apa pun sebagai argumen ke fungsi, sehingga tidak perlu memonitor parameter input. <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Kemandirian</b> <div class="spoiler_text">  Ini tidak memerlukan perhitungan pendahuluan (seperti fungsi yang dibahas di bawah), dan seringkali menjadi dasar untuk mengumpulkan fungsi yang lebih cepat. <br></div></div></li></ul><br>  Cons: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Kecepatan sangat rendah (4-10%)</b> <div class="spoiler_text">  Dibutuhkan banyak iterasi untuk mendapatkan akurasi lebih dekat dengan keakuratan Math.Sin, sebagai akibatnya ia bekerja 25 kali lebih lambat dari fungsi standar. <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Semakin besar sudut, semakin rendah akurasinya</b> <div class="spoiler_text">  Semakin besar sudut yang dimasukkan dalam fungsi, semakin banyak iterasi yang dibutuhkan untuk mencapai akurasi yang sama dengan Math. <br></div></div></li></ul><br>  <i><b>Tampilan asli (kecepatan: 4%):</b></i> <br><br>  Fungsi standar melibatkan menghitung faktorial, serta meningkatkan kekuatan setiap iterasi. <br><br><img src="https://wikimedia.org/api/rest_v1/media/math/render/svg/c847dfe24de5ad14ebd936999a7183ba96d81717" alt="gambar"><br><br>  <i><b>Dimodifikasi (kecepatan: 10%):</b></i> <br><br>  Perhitungan beberapa derajat dapat dikurangi dalam satu siklus (a * = aa;), dan faktor-faktor lain dapat dihitung sebelumnya dan dimasukkan ke dalam array, sementara mengubah tanda-tanda (+, -, +, ...) tidak dapat dinaikkan ke daya dan kalkulasinya juga dapat dikurangi menggunakan nilai sebelumnya. <br><br>  Hasilnya adalah kode berikut: <br><br><div class="spoiler">  <b class="spoiler_title">Dosa (rad, langkah)</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> // &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,    Fact &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] fact; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;            . ///   rad,   . ///  ( Math): <span class="hljs-number"><span class="hljs-number">4</span></span>% (fps)  steps = <span class="hljs-number"><span class="hljs-number">17</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;   .      pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="steps"&gt;  :  ,   .  pi/<span class="hljs-number"><span class="hljs-number">4</span></span>   E<span class="hljs-number"><span class="hljs-number">-15</span></span>  <span class="hljs-number"><span class="hljs-number">8.</span></span> &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin(<span class="hljs-type"><span class="hljs-type">double</span></span> rad, <span class="hljs-type"><span class="hljs-type">int</span></span> steps) { <span class="hljs-type"><span class="hljs-type">double</span></span> ret; <span class="hljs-type"><span class="hljs-type">double</span></span> a; //,     <span class="hljs-type"><span class="hljs-type">double</span></span> aa; // *  <span class="hljs-type"><span class="hljs-type">int</span></span> i_f; //  <span class="hljs-type"><span class="hljs-type">int</span></span> sign; // (  -  +,     = +) ret = <span class="hljs-number"><span class="hljs-number">0</span></span>; sign = <span class="hljs-number"><span class="hljs-number">-1</span></span>; aa = rad * rad; a = rad; i_f = <span class="hljs-number"><span class="hljs-number">1</span></span>; //      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; steps; n++) { sign *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; ret += sign * a / Fact(i_f); a *= aa; i_f += <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   (n!).  n &gt; fact.Length,  <span class="hljs-number"><span class="hljs-number">-1.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="n"&gt; ,     . &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Fact(<span class="hljs-type"><span class="hljs-type">int</span></span> n) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; n &lt; fact.Length) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fact[n]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span>.Log("    . n = " + n + ",   = " + fact.Length); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Init_Fact() { <span class="hljs-type"><span class="hljs-type">int</span></span> steps; steps = <span class="hljs-number"><span class="hljs-number">46</span></span>; fact = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[steps]; fact[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">1</span></span>; n &lt; steps; n++) { fact[n] = fact[n - <span class="hljs-number"><span class="hljs-number">1</span></span>] * n; } }</code> </pre><br></div></div><br>  <i><b>Tampilan superior (kecepatan: 19%):</b></i> <br><br>  Kita tahu bahwa semakin kecil sudutnya, semakin sedikit iterasi yang diperlukan.  Sudut terkecil yang kita butuhkan adalah = 0,25 * PI, mis.  45 derajat.  Mengingat Sin dan Cos di wilayah 45 derajat, kita bisa mendapatkan semua nilai dari -1 hingga 1 untuk Sin (di wilayah 2 * PI).  Untuk melakukan ini, kami membagi lingkaran (2 * PI) menjadi 8 bagian dan untuk setiap bagian kami menunjukkan metode kami sendiri menghitung sinus.  Selain itu, untuk mempercepat perhitungan, kami akan menolak untuk menggunakan fungsi memperoleh sisanya (%) (untuk mendapatkan posisi sudut di dalam zona 45 derajat): <br><br><div class="spoiler">  <b class="spoiler_title">Sin_2 (rad)</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"> // &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,    Fact &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] fact; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   Sin &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;&lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_2(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">double</span></span> rad_025; <span class="hljs-type"><span class="hljs-type">int</span></span> i; //rad = rad % PI2; //% -   .  , fps   <span class="hljs-number"><span class="hljs-number">90</span></span>  <span class="hljs-number"><span class="hljs-number">150</span></span> (  <span class="hljs-number"><span class="hljs-number">100</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span>   ) //rad_025 = rad % PI025; i = (<span class="hljs-type"><span class="hljs-type">int</span></span>)(rad / PI025); rad_025 = rad - PI025 * i; i = i &amp; <span class="hljs-number"><span class="hljs-number">7</span></span>; //     <span class="hljs-number"><span class="hljs-number">8</span></span>  //    switch (i) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos(rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin(PI025 - rad_025, <span class="hljs-number"><span class="hljs-number">8</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;            . ///   rad,   . ///  ( Math): <span class="hljs-number"><span class="hljs-number">10</span></span>% (fps)  steps = <span class="hljs-number"><span class="hljs-number">17</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;   .      pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="steps"&gt;  :  ,   .  pi/<span class="hljs-number"><span class="hljs-number">4</span></span>   E<span class="hljs-number"><span class="hljs-number">-15</span></span>  <span class="hljs-number"><span class="hljs-number">8.</span></span> &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin(<span class="hljs-type"><span class="hljs-type">double</span></span> rad, <span class="hljs-type"><span class="hljs-type">int</span></span> steps) { <span class="hljs-type"><span class="hljs-type">double</span></span> ret; <span class="hljs-type"><span class="hljs-type">double</span></span> a; //,     <span class="hljs-type"><span class="hljs-type">double</span></span> aa; // *  <span class="hljs-type"><span class="hljs-type">int</span></span> i_f; //  <span class="hljs-type"><span class="hljs-type">int</span></span> sign; // (  -  +,     = +) ret = <span class="hljs-number"><span class="hljs-number">0</span></span>; sign = <span class="hljs-number"><span class="hljs-number">-1</span></span>; aa = rad * rad; a = rad; i_f = <span class="hljs-number"><span class="hljs-number">1</span></span>; //      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; steps; n++) { sign *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; ret += sign * a / Fact(i_f); a *= aa; i_f += <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;            . ///   rad,   . ///  ( Math): <span class="hljs-number"><span class="hljs-number">10</span></span>% (fps), <span class="hljs-number"><span class="hljs-number">26</span></span>% (test)  steps = <span class="hljs-number"><span class="hljs-number">17</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;   .      pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="steps"&gt;  :  ,   .  pi/<span class="hljs-number"><span class="hljs-number">4</span></span>   E<span class="hljs-number"><span class="hljs-number">-15</span></span>  <span class="hljs-number"><span class="hljs-number">8.</span></span> &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Cos(<span class="hljs-type"><span class="hljs-type">double</span></span> rad, <span class="hljs-type"><span class="hljs-type">int</span></span> steps) { <span class="hljs-type"><span class="hljs-type">double</span></span> ret; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> aa; // *  <span class="hljs-type"><span class="hljs-type">int</span></span> i_f; //  <span class="hljs-type"><span class="hljs-type">int</span></span> sign; // (  -  +,     = +) ret = <span class="hljs-number"><span class="hljs-number">0</span></span>; sign = <span class="hljs-number"><span class="hljs-number">-1</span></span>; aa = rad * rad; a = <span class="hljs-number"><span class="hljs-number">1</span></span>; i_f = <span class="hljs-number"><span class="hljs-number">0</span></span>; //      <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">0</span></span>; n &lt; steps; n++) { sign *= <span class="hljs-number"><span class="hljs-number">-1</span></span>; ret += sign * a / Fact(i_f); a *= aa; i_f += <span class="hljs-number"><span class="hljs-number">2</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ret; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   (n!).  n &gt; fact.Length,  <span class="hljs-number"><span class="hljs-number">-1.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="n"&gt; ,     . &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Fact(<span class="hljs-type"><span class="hljs-type">int</span></span> n) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (n &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; n &lt; fact.Length) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fact[n]; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">Debug</span></span>.Log("    . n = " + n + ",   = " + fact.Length); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>; } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Init_Fact() { <span class="hljs-type"><span class="hljs-type">int</span></span> steps; steps = <span class="hljs-number"><span class="hljs-number">46</span></span>; fact = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[steps]; fact[<span class="hljs-number"><span class="hljs-number">0</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> n = <span class="hljs-number"><span class="hljs-number">1</span></span>; n &lt; steps; n++) { fact[n] = fact[n - <span class="hljs-number"><span class="hljs-number">1</span></span>] * n; } }</code> </pre> <br></div></div><br><h3>  Polinomial </h3><br>  Saya menemukan metode ini di Internet, penulis membutuhkan fungsi pencarian Sin cepat untuk akurasi ganda ganda (kesalahan &lt;0,000 001) tanpa menggunakan perpustakaan nilai yang dihitung sebelumnya. <br><br>  Pro: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Kecepatan tinggi (9-84%)</b> <div class="spoiler_text">  Awalnya, polinomial yang dilempar tanpa perubahan menunjukkan kecepatan 9% dari Math.Sin asli, yang 10 kali lebih lambat.  Berkat perubahan kecil, kecepatannya meningkat tajam menjadi 84%, yang tidak buruk jika Anda menutup mata untuk akurasi. <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Tidak diperlukan perhitungan awal dan memori tambahan</b> <div class="spoiler_text">  Jika di bagian atas dan lebih jauh di bawah ini kita perlu membuat array variabel untuk mempercepat perhitungan, maka di sini semua koefisien kunci dengan baik hati dihitung dan ditempatkan ke dalam formula oleh penulis sendiri dalam bentuk konstanta. <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Akurasi lebih tinggi dari Mathf.Sin (float)</b> <div class="spoiler_text">  Sebagai perbandingan: <br><br>  0.84147 <b>1</b> - Mathf.Sin (1) (mesin Unity); <br>  0.841470984807897 - Math.Sin (1) (fungsi C # standar); <br>  0.8414709 <b>56802368</b> - sin (1) (GPU, bahasa hlsl); <br>  0.84147 <b>1184637935</b> - <b>Sin_0 (1)</b> . <br></div></div></li></ul><br>  Cons: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Tidak universal</b> <div class="spoiler_text">  Anda tidak dapat menyesuaikan akurasi secara manual karena tidak diketahui alat apa yang digunakan penulis untuk menghitung polinomial ini. <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Mengapa</b> <div class="spoiler_text">  Mengapa penulis memerlukan fungsi yang tidak memerlukan array dan yang memiliki akurasi rendah (dibandingkan dengan ganda)? <br></div></div></li></ul><br>  <i><b>Tampilan asli:</b></i> <br><br><div class="spoiler">  <b class="spoiler_title">Sin_1 (x)</b> <div class="spoiler_text"><pre> <code class="hljs cmake">/// &lt;summary&gt;  ( <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>): <span class="hljs-number"><span class="hljs-number">9</span></span>% (fps)&lt;/summary&gt; /// &lt;param name=<span class="hljs-string"><span class="hljs-string">"x"</span></span>&gt;     -<span class="hljs-number"><span class="hljs-number">2</span></span>*Pi  <span class="hljs-number"><span class="hljs-number">2</span></span>*Pi &lt;/param&gt; public static double Sin_1(double x) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0.9999997192673006</span></span> * x - <span class="hljs-number"><span class="hljs-number">0.1666657564532464</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">3</span></span>) + <span class="hljs-number"><span class="hljs-number">0.008332803647181511</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) - <span class="hljs-number"><span class="hljs-number">0.00019830197237204295</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">7</span></span>) + <span class="hljs-number"><span class="hljs-number">2.7444305061093514</span></span>e-<span class="hljs-number"><span class="hljs-number">6</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">9</span></span>) - <span class="hljs-number"><span class="hljs-number">2.442176561869478</span></span>e-<span class="hljs-number"><span class="hljs-number">8</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">11</span></span>) + <span class="hljs-number"><span class="hljs-number">1.407555708887347</span></span>e-<span class="hljs-number"><span class="hljs-number">10</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">13</span></span>) - <span class="hljs-number"><span class="hljs-number">4.240664814288337</span></span>e-<span class="hljs-number"><span class="hljs-number">13</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">Math</span></span>.Pow(x, <span class="hljs-number"><span class="hljs-number">15</span></span>); }</code> </pre><br></div></div><br>  <i><b>Tampilan superior:</b></i> <br><br><div class="spoiler">  <b class="spoiler_title">Sin_0 (rad)</b> <div class="spoiler_text"><pre> <code class="hljs ruby">/<span class="hljs-regexp"><span class="hljs-regexp">//</span></span> &lt;summary&gt;  ( Math): <span class="hljs-number"><span class="hljs-number">83</span></span>% (fps)&lt;<span class="hljs-regexp"><span class="hljs-regexp">/summary&gt; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">//</span></span> &lt;param name=<span class="hljs-string"><span class="hljs-string">"rad"</span></span>&gt;     -<span class="hljs-number"><span class="hljs-number">2</span></span>*Pi  <span class="hljs-number"><span class="hljs-number">2</span></span>*Pi &lt;<span class="hljs-regexp"><span class="hljs-regexp">/param&gt; public static double Sin_0(double rad) { double x; double xx; double ret; xx = rad * rad; x = rad; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/1 ret = 0.9999997192673006 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/3 ret -= 0.1666657564532464 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/5 ret += 0.008332803647181511 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/7 ret -= 0.00019830197237204295 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/9 ret += 2.7444305061093514e-6 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/11 ret -= 2.442176561869478e-8 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/13 ret += 1.407555708887347e-10 * x; x *= xx; /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/15 ret -= 4.240664814288337e-13 * x; return ret; }</span></span></code> </pre><br></div></div><br><h3>  Interpolasi linier </h3><br>  Metode ini didasarkan pada interpolasi linier antara hasil dua catatan dalam sebuah array. <br>  Entri dibagi menjadi mem_sin dan mem_cos, mereka berisi hasil yang dihitung sebelumnya dari fungsi standar Math.Sin dan Math.Cos pada segmen parameter input dari 0 hingga 0,25 * PI. <br><br>  Prinsip manipulasi dengan sudut dari 0 hingga 45 derajat tidak berbeda dari versi yang ditingkatkan dari seri Taylor, tetapi pada saat yang sama suatu fungsi disebut yang menemukan - di mana dua catatan ada sudut - dan menemukan nilai di antara mereka. <br><br>  Pro: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Kecepatan tinggi (65%)</b> <div class="spoiler_text">  Karena kesederhanaan dari algoritma interpolasi, kecepatan mencapai 65% dari kecepatan Math.Sin.  Saya pikir kecepatan&gt; 33% memuaskan. <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Presisi tertinggi</b> <div class="spoiler_text">  Contoh penolakan yang jarang: <br>  0.255835595715180 - Math.Sin; <br>  0.2558355957151 <b>79</b> - <b>Sin_3</b> . <br></div></div></li><li><div class="spoiler">  <b class="spoiler_title">Kaki cepat</b> <div class="spoiler_text">  Saya suka fungsi ini karena ia lahir dalam penderitaan, ditulis oleh saya dan melampaui persyaratan: kecepatan&gt; 33%, akurasi di atas 1e-14.  Saya akan memberinya nama bangga - Vēlōx Pes. <br></div></div></li></ul><br>  Cons: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">Itu membutuhkan tempat di memori</b> <div class="spoiler_text">  Untuk bekerja, Anda harus terlebih dahulu menghitung dua array: untuk dosa dan untuk cos;  setiap array memiliki berat ~ 16mb (16 * 2 = 32mb) <br></div></div></li></ul><br>  <i><b>Tampilan asli:</b></i> <br><br><div class="spoiler">  <b class="spoiler_title">Sin_3 (rad)</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> Math_d { const <span class="hljs-type"><span class="hljs-type">double</span></span> PI025 = Math.PI / <span class="hljs-number"><span class="hljs-number">4</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">17</span></span> = <span class="hljs-number"><span class="hljs-number">131072</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span> ),   <span class="hljs-number"><span class="hljs-number">10000</span></span> ( ),  <span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">21</span></span> = <span class="hljs-number"><span class="hljs-number">22097152</span></span> (<span class="hljs-number"><span class="hljs-number">16</span></span> )   +<span class="hljs-number"><span class="hljs-number">-1</span></span> ( ) (  ) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem = <span class="hljs-number"><span class="hljs-number">22097152</span></span>; const <span class="hljs-type"><span class="hljs-type">int</span></span> length_mem_M1 = length_mem - <span class="hljs-number"><span class="hljs-number">1</span></span>; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_sin; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;    cos,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span>[] mem_cos; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;  ,   sin,    . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">void</span></span> Initialise() { Ini_Mem_Sin(); Ini_Mem_Cos(); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;       Cos,   . &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;&lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_3(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">double</span></span> rad_025; <span class="hljs-type"><span class="hljs-type">int</span></span> i; //    //<span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (rad &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { rad = -rad + Math.PI; } i = (<span class="hljs-type"><span class="hljs-type">int</span></span>)(rad / PI025); //   rad_025 = rad - PI025 * i; //     ( ) i = i &amp; <span class="hljs-number"><span class="hljs-number">7</span></span>; //      <span class="hljs-number"><span class="hljs-number">8</span></span> //    switch (i) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Sin_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(PI025 - rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Cos_Lerp(rad_025); <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> -Sin_Lerp(PI025 - rad_025); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   sin    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Sin() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_sin = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_sin[i] = Math.Sin(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;   cos    &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; static <span class="hljs-type"><span class="hljs-type">void</span></span> Ini_Mem_Cos() { <span class="hljs-type"><span class="hljs-type">double</span></span> rad; mem_cos = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-type"><span class="hljs-type">double</span></span>[length_mem]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-type"><span class="hljs-type">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; length_mem; i++) { rad = (i * PI025) / length_mem_M1; mem_cos[i] = Math.Cos(rad); } } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      sin  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Sin_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_sin[i_0]; b = mem_sin[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      cos  <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="rad"&gt;     <span class="hljs-number"><span class="hljs-number">0</span></span>  pi/<span class="hljs-number"><span class="hljs-number">4.</span></span> &lt;/param&gt; static <span class="hljs-type"><span class="hljs-type">double</span></span> Cos_Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> rad) { <span class="hljs-type"><span class="hljs-type">int</span></span> i_0; <span class="hljs-type"><span class="hljs-type">int</span></span> i_1; <span class="hljs-type"><span class="hljs-type">double</span></span> i_0d; <span class="hljs-type"><span class="hljs-type">double</span></span> percent; <span class="hljs-type"><span class="hljs-type">double</span></span> a; <span class="hljs-type"><span class="hljs-type">double</span></span> b; <span class="hljs-type"><span class="hljs-type">double</span></span> s; percent = rad / PI025; i_0d = percent * length_mem_M1; i_0 = (<span class="hljs-type"><span class="hljs-type">int</span></span>)i_0d; i_1 = i_0 + <span class="hljs-number"><span class="hljs-number">1</span></span>; a = mem_cos[i_0]; b = mem_cos[i_1]; s = i_0d - i_0; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Lerp(a, b, s); } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt;      . (<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a)) &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="a"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="b"&gt;  . &lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="s"&gt;  . <span class="hljs-number"><span class="hljs-number">0</span></span> = a, <span class="hljs-number"><span class="hljs-number">1</span></span> = b, <span class="hljs-number"><span class="hljs-number">0.5</span></span> =   a  b. &lt;/param&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> static <span class="hljs-type"><span class="hljs-type">double</span></span> Lerp(<span class="hljs-type"><span class="hljs-type">double</span></span> a, <span class="hljs-type"><span class="hljs-type">double</span></span> b, <span class="hljs-type"><span class="hljs-type">double</span></span> s) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> a + s * (b - a); } }</code> </pre><br></div></div><br><br>  <u>UPD: Memperbaiki kesalahan dalam menentukan indeks di Sin_Lerp (), Cos_Lerp (), Ini_Mem_Sin () dan Ini_Mem_Cos ().</u> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id426355/">https://habr.com/ru/post/id426355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id426343/index.html">Aturan perilaku sopan di TI: sejarah ITIL</a></li>
<li><a href="../id426345/index.html">Teka-teki menarik dari wawancara teknis</a></li>
<li><a href="../id426347/index.html">Intisari Universitas ITMO: Studi Baru, Pengalaman Alumni, dan Proyek Internasional</a></li>
<li><a href="../id426349/index.html">Kami membuat stasiun radio Internet sederhana, kompak dan murah</a></li>
<li><a href="../id426351/index.html">Perubahan pada Sertifikasi dan Ujian Microsoft</a></li>
<li><a href="../id426357/index.html">Unity & Vive: Tutorial</a></li>
<li><a href="../id426359/index.html">Inisiatif anti-pembajakan Yandex tidak disetujui oleh pemegang hak cipta</a></li>
<li><a href="../id426361/index.html">Tentang keajaiban lebah, dan bagaimana kita membunuhnya</a></li>
<li><a href="../id426363/index.html">Fakta dan hipotesis tentang kecelakaan "Union MS-10"</a></li>
<li><a href="../id426365/index.html">Jangan percaya Facebook sudah terlambat</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>