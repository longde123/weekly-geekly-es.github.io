<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🌟 🖐🏿 🏒 英特尔爱迪生 英特尔物联网分析云：在ASP.NET上发送SMS和RESTful客户端 ⛓️ 🤚🏽 🌟</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="使用英特尔物联网分析云的最后一部分。使用HTTP网关添加发送SMS通知，并在ASP.NET上创建一个简单的RESTful客户端。总结一下。
 
 发送使用HTTP网关短信通知
 在由以前的工作英特尔爱迪生。使用英特尔物联网分析云：创建规则和发送通知；已经形成的规则使您可以发送：电子邮件通知和管理中继...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>英特尔爱迪生 英特尔物联网分析云：在ASP.NET上发送SMS和RESTful客户端</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/384929/"><img src="https://habrastorage.org/getpro/geektimes/post_images/bd9/939/ed9/bd9939ed9f98c235c4fcb8f033e8ceba.jpg" alt="英特尔物联网分析"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">英特尔物联网分析</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">云的最后一部分</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">使用HTTP网关添加发送SMS通知，并在ASP.NET上创建一个简单的RESTful客户端。</font><font style="vertical-align: inherit;">总结一下。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发送使用HTTP网关短信通知</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
在由以前的工作</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">英特尔爱迪生。</font><font style="vertical-align: inherit;">使用英特尔物联网分析云：创建规则和发送通知；</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已经形成的规则使您可以发送：电子邮件通知和管理中继电源。</font><font style="vertical-align: inherit;">发送短信，添加到创建的这两个规则中。</font></font><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则：</font></font></strong><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higth_temp_PowerOnRelay_and_send_to_web@devdotnet.org</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Low_temp_PowerOffRelay_and_send_to_web@devdotnet.org</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
我们将使用</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> SMS网关</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">该API </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用</font><font style="vertical-align: inherit;">。</font></font><br>
<a name="habracut"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
要发送SMS消息，就足以形成并发送以下形式的GET请求：</font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru/sys/send.php?</font></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
login=&amp; </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
psw </font><font style="vertical-align: inherit;">=&amp; </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">phones=&amp;mes=</font></a><font style="vertical-align: inherit;">，其中：</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">login-</font></a><font style="vertical-align: inherit;">客户的登录</font><font style="vertical-align: inherit;">psw-客户的密码或小写的MD5密码哈希。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
电话-国际格式的数字，不带“ +”符号</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
。短信-要发送的消息文本。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
无需添加Head标头，一切都非常简单。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">我们将形成两个请求：</font></font></strong><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru/sys/send.php?login</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> = </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">tele</font></a><font style="vertical-align: inherit;"> ****和psw = d46d70eb6 ******和电话= 79232 ******＆mes = Relay_power_ON </font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">smsc.ru/sys/send。 php？login = tele</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ****和psw = d46d70eb6 ******＆电话= 79232 ******＆mes = Relay_power_OFF转到</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
“ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规则”</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">，</font></a><font style="vertical-align: inherit;">打开规则</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Higth_temp_PowerOnRelay_and_send_to_web@devdotnet.org。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
添加</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通知类型-HTTP端点</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并输入</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">URL</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/b4c/5ef/f11/b4c5eff113c1821a8a37c0254724887b.png" alt="英特尔物联网分析"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
另外，我们将为第二条规则创建</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Low_temp_PowerOffRelay_and_send_to_web@devdotnet.org</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br>
<br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过电话收到短信</font></font></b><div class="spoiler_text"><img src="https://habrastorage.org/getpro/geektimes/post_images/05f/e2b/b7d/05fe2bb7db543854b31a6d9347efb1b8.png" alt="Intel IoT Analytics"></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从发送SMS消息的功能的缺点来看，有必要注意无法发送动态数据，例如，您不能发送当前的传感器读数。</font></font><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ASP.NET Razor上的简单RESTful客户端我们将</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
形成一个页面，显示当前传感器的读数：温度和压力。</font><font style="vertical-align: inherit;">我们将控制部件放在页面上：接通继电器和LED。</font><font style="vertical-align: inherit;">Cloud API可</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在此处获得</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在ASP.NET Razor netf 4.5上实现。</font><font style="vertical-align: inherit;">要使用JSON，将使用Newtonsoft.Json库。</font><font style="vertical-align: inherit;">Web.config文件包含用于访问云的登录名和密码。</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该示例不是完整的解决方案，而是对API使用的简单演示。</font></font></strong><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
与往常一样，我们获得令牌，这是</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiki授权中的一部分</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码</font></font></b><div class="spoiler_text"><pre><code class="hljs pgsql">string GetNewToken()<font></font>
            {<font></font>
                // <span class="hljs-keyword">login</span>  pass<font></font>
                string strLogin, strPass;<font></font>
                strLogin = <span class="hljs-keyword">System</span>.<span class="hljs-keyword">Configuration</span>.ConfigurationManager.AppSettings["Login"];<font></font>
                strPass = <span class="hljs-keyword">System</span>.<span class="hljs-keyword">Configuration</span>.ConfigurationManager.AppSettings["Pass"];<font></font>
                //,  .<font></font>
                //https://github.com/enableiot/iotkit-api/wiki/<span class="hljs-keyword">Authorization</span>
                // <span class="hljs-type">JSON</span>
                var obj = <span class="hljs-built_in">new</span><font></font>
                {<font></font>
                    username = strLogin,<font></font>
                    <span class="hljs-keyword">password</span> = strPass<font></font>
                };<font></font>
                string postData = JsonConvert.SerializeObject(obj, Formatting.Indented);<font></font>
                //HttpWebRequest<font></font>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.<span class="hljs-keyword">Create</span>("https://dashboard.us.enableiot.com/v1/api/auth/token");<font></font>
                httpWebRequest.<span class="hljs-keyword">Method</span> = "POST";<font></font>
                httpWebRequest.ContentType = "application/json";<font></font>
                //<font></font>
                byte[] byte1 = <span class="hljs-keyword">System</span>.Text.<span class="hljs-keyword">Encoding</span>.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().<span class="hljs-keyword">Write</span>(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().<span class="hljs-keyword">Close</span>();<font></font>
                //<font></font>
                StreamReader reader = <span class="hljs-built_in">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-keyword">return</span> (string)objResponse["token"];<font></font>
            }<font></font>
</code></pre><br>
</div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
读取数据，参见</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wiki Data-API中的部分</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码</font></font></b><div class="spoiler_text"><pre><code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GetStateSensors</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt; dicSensors</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">// </span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Data-API</span>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    <span class="hljs-keyword">from</span> = <span class="hljs-number">-20</span>,<font></font>
                    targetFilter = <span class="hljs-keyword">new</span> { deviceList = <span class="hljs-keyword">new</span>[] { <span class="hljs-string">"9e-8d-22-0c-50-7b"</span> } },<font></font>
                    metrics = <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"99fb5b73-a9e2-4ae0-8a0d-45e6a7cc0541"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					},<font></font>
                    <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"b3731f8a-4f31-414d-a072-b364b1792b5b"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					}<font></font>
				}<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/data/search"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-comment">//add Dic</span>
                <span class="hljs-keyword">string</span> strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                dicSensors.Add(<span class="hljs-string">"pressure"</span>, strValueSensor);<font></font>
                strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">1</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                strValueSensor = Math.Round(<span class="hljs-keyword">decimal</span>.Parse(strValueSensor, System.Globalization.CultureInfo.CreateSpecificCulture(<span class="hljs-string">"en"</span>)), <span class="hljs-number">2</span>).ToString();<font></font>
                dicSensors.Add(<span class="hljs-string">"temperature"</span>, strValueSensor);<font></font>
            }<font></font>
</code></pre><br>
</div></div><br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面</font></font></strong><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/d46/3f7/a36/d463f7a364e3cf24538e96a8f4f7b771.png" alt="英特尔物联网分析"><br>
<br>
<strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">摘要</font></font></strong><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
用于数据收集的云使您无需构建基础架构，从而降低了购买硬件和软件的成本。配置设备，传感器非常简单。开发的API不仅允许接收数据和管理设备，还可以创建自己的管理面板。数据传输没有明显的延迟，请求也不会丢失。有两个角色：管理员和用户。要添加用户，管理员需要指定新的电子邮件，邀请信将发送到该地址。在注册新用户的过程中，将询问该用户有关接受访问邀请（邀请）的信息。因此，用户参与管理他的帐户，包括密码更改。的缺点不可能在SMS消息中包括传感器读数，只能是预先准备的模板。对于电子邮件，没有模板，只有带有传感器读取板的标准视图。发现了另一个功能，包括处理规则的顺序。有时在接通后立即观察到继电器断开的情况。而且，根据继电器的逻辑，应该假设只有在温度降至28 C以下时才关闭。规则逻辑的条件和设备上的代码不包含错误。通过查看警报日志已解决了该情况，新警报已添加到列表的末尾。有时在接通后立即观察到继电器断开的情况。而且，根据继电器的逻辑，应该假设只有在温度降至28 C以下时才关闭。规则逻辑的条件和设备上的代码不包含错误。通过查看警报日志已解决了该情况，新警报已添加到列表的末尾。有时在接通后立即观察到继电器断开的情况。此外，根据继电器的逻辑，仅在温度降至28 C以下时才应将其关闭。规则的逻辑条件和设备上的代码不包含错误。通过查看警报日志已解决了该情况，新警报已添加到列表的末尾。</font></font><br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><img src="https://habrastorage.org/getpro/geektimes/post_images/6dc/b9e/69e/6dcb9e69e68161149a1c8bafe72579c9.png" alt="英特尔物联网分析"></a><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
事件39是最后一个要运行的事件，尽管它在时间上早于事件38。尽管温度进一步升高，继电器也会打开一秒钟，然后关闭。</font><font style="vertical-align: inherit;">可能是由于服务尚未完成。</font><font style="vertical-align: inherit;">当前，英特尔物联网分析云处于开发阶段（BETA状态）。</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">Web.devdotnet.org的</font></a></font><br>
<br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">应用程序</font></font></b><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
测试工作版本</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
该项目</font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;">在这里</font></a><font style="vertical-align: inherit;">可用</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">
资源</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"></font><br><font style="vertical-align: inherit;"></font><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">web.config</font></font></b><div class="spoiler_text"><pre><code class="xml hljs"><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">appSettings</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"Login"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"***"</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">key</span>=<span class="hljs-string">"Pass"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"***"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">appSettings</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">system.web</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">compilation</span> <span class="hljs-attr">debug</span>=<span class="hljs-string">"true"</span> <span class="hljs-attr">targetFramework</span>=<span class="hljs-string">"4.5"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">assemblies</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">assembly</span>=<span class="hljs-string">"Microsoft.Web.Infrastructure, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">add</span> <span class="hljs-attr">assembly</span>=<span class="hljs-string">"System.Net.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">assemblies</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">compilation</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">httpRuntime</span> <span class="hljs-attr">targetFramework</span>=<span class="hljs-string">"4.5"</span>/&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">system.web</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">runtime</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">assemblyBinding</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">"urn:schemas-microsoft-com:asm.v1"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">dependentAssembly</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">assemblyIdentity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"System.Web.Helpers"</span> <span class="hljs-attr">publicKeyToken</span>=<span class="hljs-string">"31bf3856ad364e35"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">bindingRedirect</span> <span class="hljs-attr">oldVersion</span>=<span class="hljs-string">"1.0.0.0-3.0.0.0"</span> <span class="hljs-attr">newVersion</span>=<span class="hljs-string">"3.0.0.0"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">dependentAssembly</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-name">dependentAssembly</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">assemblyIdentity</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"System.Web.WebPages"</span> <span class="hljs-attr">publicKeyToken</span>=<span class="hljs-string">"31bf3856ad364e35"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">bindingRedirect</span> <span class="hljs-attr">oldVersion</span>=<span class="hljs-string">"1.0.0.0-3.0.0.0"</span> <span class="hljs-attr">newVersion</span>=<span class="hljs-string">"3.0.0.0"</span>/&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">dependentAssembly</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">assemblyBinding</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">runtime</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span>
</code></pre><br>
</div></div><br>
<div class="spoiler"><b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">index.cshtml</font></font></b><div class="spoiler_text"><pre><code class="hljs cs">@using System.Net.Http<font></font>
@using Newtonsoft.Json<font></font>
@using Newtonsoft.Json.Linq<font></font>
<font></font>
@{<font></font>
    <span class="hljs-comment">//   Session</span>
    <span class="hljs-keyword">string</span> strToken;<font></font>
    strToken = (<span class="hljs-keyword">string</span>)Session[<span class="hljs-string">"Token"</span>];
    <span class="hljs-keyword">if</span> (strToken == <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        strToken = GetNewToken();<font></font>
        Session[<span class="hljs-string">"Token"</span>] = strToken;<font></font>
    }<font></font>
    <span class="hljs-comment">//Action</span>
    <span class="hljs-keyword">if</span> (Request[<span class="hljs-string">"command"</span>] != <span class="hljs-literal">null</span>)<font></font>
    {<font></font>
        <span class="hljs-keyword">string</span> strCommand = (<span class="hljs-keyword">string</span>)Request[<span class="hljs-string">"command"</span>];<font></font>
        SetSateActuation(strToken,strCommand);<font></font>
    }<font></font>
    <span class="hljs-comment">//  Sensors</span>
    Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt; dicSensors = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt;();<font></font>
    GetStateSensors(strToken, dicSensors);<font></font>
    <span class="hljs-comment">//  Actuation</span>
    <span class="hljs-keyword">bool</span> boolValueLED, boolValueRelay;<font></font>
    GetStateActuations(strToken, <span class="hljs-keyword">out</span> boolValueLED, <span class="hljs-keyword">out</span> boolValueRelay);<font></font>
}<font></font>
        @functions {<font></font>
            <span class="hljs-comment">// Pass a user name to this method.</span>
            <span class="hljs-function"><span class="hljs-keyword">string</span> <span class="hljs-title">GetNewToken</span>(<span class="hljs-params"></span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">// login  pass</span>
                <span class="hljs-keyword">string</span> strLogin, strPass;<font></font>
                strLogin = System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string">"Login"</span>];<font></font>
                strPass = System.Configuration.ConfigurationManager.AppSettings[<span class="hljs-string">"Pass"</span>];
                <span class="hljs-comment">//,  .</span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Authorization</span>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    username = strLogin,<font></font>
                    password = strPass<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/auth/token"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-keyword">return</span> (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"token"</span>];<font></font>
            }<font></font>
            <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GetStateSensors</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, Dictionary&lt;<span class="hljs-keyword">string</span>, <span class="hljs-keyword">string</span>&gt; dicSensors</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">// </span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Data-API</span>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    <span class="hljs-keyword">from</span> = <span class="hljs-number">-20</span>,<font></font>
                    targetFilter = <span class="hljs-keyword">new</span> { deviceList = <span class="hljs-keyword">new</span>[] { <span class="hljs-string">"9e-8d-22-0c-50-7b"</span> } },<font></font>
                    metrics = <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"99fb5b73-a9e2-4ae0-8a0d-45e6a7cc0541"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					},<font></font>
                    <span class="hljs-keyword">new</span> {<font></font>
						id=<span class="hljs-string">"b3731f8a-4f31-414d-a072-b364b1792b5b"</span>,<font></font>
						op=<span class="hljs-string">"none"</span><font></font>
					}<font></font>
				}<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/data/search"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JObject objResponse = JObject.Parse(reader.ReadToEnd());<font></font>
                <span class="hljs-comment">//add Dic</span>
                <span class="hljs-keyword">string</span> strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                dicSensors.Add(<span class="hljs-string">"pressure"</span>, strValueSensor);<font></font>
                strValueSensor = (<span class="hljs-keyword">string</span>)objResponse[<span class="hljs-string">"series"</span>][<span class="hljs-number">1</span>][<span class="hljs-string">"points"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>];<font></font>
                strValueSensor = Math.Round(<span class="hljs-keyword">decimal</span>.Parse(strValueSensor, System.Globalization.CultureInfo.CreateSpecificCulture(<span class="hljs-string">"en"</span>)), <span class="hljs-number">2</span>).ToString();<font></font>
                dicSensors.Add(<span class="hljs-string">"temperature"</span>, strValueSensor);<font></font>
            }<font></font>
<font></font>
            <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GetStateActuations</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, <span class="hljs-keyword">out</span> <span class="hljs-keyword">bool</span> boolValueLED, <span class="hljs-keyword">out</span> <span class="hljs-keyword">bool</span> boolValueRelay</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">//  Actuation</span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Control-Device-API</span>
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/control/devices/9e-8d-22-0c-50-7b?from=-60000"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"GET"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                StreamReader reader = <span class="hljs-keyword">new</span> StreamReader(httpWebRequest.GetResponse().GetResponseStream());<font></font>
                JArray jArr = (JArray)JsonConvert.DeserializeObject(reader.ReadToEnd());<font></font>
                <span class="hljs-comment">//Parse data</span>
                Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt; dicSensorLED = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt;();<font></font>
                Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt; dicSensorRelay = <span class="hljs-keyword">new</span> Dictionary&lt;<span class="hljs-keyword">long</span>, <span class="hljs-keyword">string</span>&gt;();
                <span class="hljs-keyword">long</span> longTicks;
                <span class="hljs-keyword">foreach</span> (JObject item <span class="hljs-keyword">in</span> jArr)<font></font>
                {<font></font>
                    longTicks = DateTime.Parse((<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"created"</span>]).Ticks;
                    <span class="hljs-keyword">if</span> ((<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"command"</span>] == <span class="hljs-string">"LED.v1.0"</span>)<font></font>
                    {<font></font>
                        <span class="hljs-keyword">if</span> (!dicSensorLED.ContainsKey(longTicks)) dicSensorLED.Add(longTicks, (<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"params"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>]);<font></font>
                    }<font></font>
                    <span class="hljs-keyword">else</span><font></font>
                    {<font></font>
                        <span class="hljs-keyword">if</span> (!dicSensorRelay.ContainsKey(longTicks)) dicSensorRelay.Add(longTicks, (<span class="hljs-keyword">string</span>)item[<span class="hljs-string">"params"</span>][<span class="hljs-number">0</span>][<span class="hljs-string">"value"</span>]);<font></font>
                    }<font></font>
                }<font></font>
                <span class="hljs-comment">//find last value</span>
                <span class="hljs-keyword">string</span> strValueLED = dicSensorLED[dicSensorLED.Max(x =&gt; x.Key)];
                <span class="hljs-keyword">string</span> strValueRelay = dicSensorRelay[dicSensorRelay.Max(x =&gt; x.Key)];
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">if</span> (strValueLED == <span class="hljs-string">"0"</span>) boolValueLED = <span class="hljs-literal">false</span>; <span class="hljs-keyword">else</span> boolValueLED = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">if</span> (strValueRelay == <span class="hljs-string">"0"</span>) boolValueRelay = <span class="hljs-literal">false</span>; <span class="hljs-keyword">else</span> boolValueRelay = <span class="hljs-literal">true</span>;<font></font>
                }<font></font>
<font></font>
            <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">SetSateActuation</span>(<span class="hljs-params"><span class="hljs-keyword">string</span> strToken, <span class="hljs-keyword">string</span> strCommand</span>)</span><font></font>
            {<font></font>
                <span class="hljs-comment">//  Actuation</span>
                <span class="hljs-comment">//https://github.com/enableiot/iotkit-api/wiki/Control-Device-API</span>
                <span class="hljs-comment">// </span>
                <span class="hljs-keyword">string</span> strComponentId, strName, strValue, strComplexCommands;
                <span class="hljs-keyword">switch</span> (strCommand)<font></font>
                {<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"led_on"</span>:<font></font>
                        {<font></font>
                            strComponentId=<span class="hljs-string">"64dbdbee-e181-403f-8b51-0872e11a289e"</span>;<font></font>
                            strName=<span class="hljs-string">"LED"</span>;<font></font>
                            strValue = <span class="hljs-string">"1"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"led1_ON"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"led_off"</span>:<font></font>
                        {<font></font>
                            strComponentId = <span class="hljs-string">"64dbdbee-e181-403f-8b51-0872e11a289e"</span>;<font></font>
                            strName = <span class="hljs-string">"LED"</span>;<font></font>
                            strValue = <span class="hljs-string">"0"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"led1_OFF"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"relay_on"</span>:<font></font>
                        {<font></font>
                            strComponentId = <span class="hljs-string">"5f72e39a-463a-4e57-bac7-9b32debfd865"</span>;<font></font>
                            strName = <span class="hljs-string">"RELAY"</span>;<font></font>
                            strValue = <span class="hljs-string">"1"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"relay1_ON"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">case</span> <span class="hljs-string">"relay_off"</span>:<font></font>
                        {<font></font>
                            strComponentId = <span class="hljs-string">"5f72e39a-463a-4e57-bac7-9b32debfd865"</span>;<font></font>
                            strName = <span class="hljs-string">"RELAY"</span>;<font></font>
                            strValue = <span class="hljs-string">"0"</span>;<font></font>
                            strComplexCommands = <span class="hljs-string">"relay1_OFF"</span>;
                            <span class="hljs-keyword">break</span>;<font></font>
                        }<font></font>
                    <span class="hljs-keyword">default</span>:
                        <span class="hljs-comment">// You can use the default case.</span>
                        <span class="hljs-keyword">return</span>;<font></font>
                }<font></font>
                <span class="hljs-comment">// JSON</span>
                <span class="hljs-keyword">var</span> obj = <span class="hljs-keyword">new</span><font></font>
                {<font></font>
                    commands = <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span> {<font></font>
                    componentId = strComponentId,<font></font>
                    parameters= <span class="hljs-keyword">new</span>[] { <span class="hljs-keyword">new</span><font></font>
                                        {<font></font>
                                            name=strName,<font></font>
                                            <span class="hljs-keyword">value</span>=strValue<font></font>
                                        }<font></font>
                    },<font></font>
                    transport=<span class="hljs-string">"ws"</span><font></font>
                }<font></font>
                },<font></font>
                    complexCommands = <span class="hljs-keyword">new</span>[] { strComplexCommands }<font></font>
                };<font></font>
                <span class="hljs-keyword">string</span> postData = JsonConvert.SerializeObject(obj, Formatting.Indented);
                <span class="hljs-comment">//HttpWebRequest</span>
                HttpWebRequest httpWebRequest = (HttpWebRequest)HttpWebRequest.Create(<span class="hljs-string">"https://dashboard.us.enableiot.com/v1/api/accounts/4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa/control"</span>);<font></font>
                httpWebRequest.Method = <span class="hljs-string">"POST"</span>;<font></font>
                httpWebRequest.ContentType = <span class="hljs-string">"application/json"</span>;
                <span class="hljs-comment">//Headers</span>
                httpWebRequest.Headers.Add(<span class="hljs-string">"Authorization"</span>, <span class="hljs-string">"Bearer "</span> + strToken);<font></font>
                httpWebRequest.Headers.Add(<span class="hljs-string">"accountId"</span>, <span class="hljs-string">"4c8c6b2e-c54f-4df5-8bbb-a5e59df85aaa"</span>);
                <span class="hljs-comment">//</span>
                <span class="hljs-keyword">byte</span>[] byte1 = System.Text.Encoding.UTF8.GetBytes(postData);<font></font>
                httpWebRequest.ContentLength = byte1.Length;<font></font>
                httpWebRequest.GetRequestStream().Write(byte1, <span class="hljs-number">0</span>, byte1.Length);<font></font>
                httpWebRequest.GetRequestStream().Close();<font></font>
                <span class="hljs-comment">//</span><font></font>
                httpWebRequest.GetResponse();<font></font>
                }<font></font>
            }<font></font>
        }<font></font>
<font></font>
        &lt;html&gt;<font></font>
        &lt;head&gt;<font></font>
            &lt;title&gt; RESTful   Intel IoT Analytics  ASP.NET Razor&lt;/title&gt;<font></font>
        &lt;/head&gt;<font></font>
        &lt;body&gt;<font></font>
            &lt;h1&gt; RESTful   Intel IoT Analytics  ASP.NET Razor&lt;/h1&gt;<font></font>
&lt;p&gt;: @DateTime.Now.ToString()&lt;/p&gt;<font></font>
    &lt;p&gt;   &lt;a href=<span class="hljs-string">"https://github.com/enableiot/iotkit-api/wiki/Api-Home"</span>&gt;api  intel iot analytics.&lt;/a&gt;&lt;/p&gt;<font></font>
    &lt;p&gt;  API :&lt;/p&gt;<font></font>
    &lt;ol&gt;<font></font>
        &lt;li&gt;,  &lt;/li&gt;<font></font>
        &lt;li&gt;   (sensor)&lt;/li&gt;<font></font>
        &lt;li&gt;   (Actuation)&lt;/li&gt;<font></font>
    &lt;/ol&gt;<font></font>
    &lt;h3&gt; &lt;/h3&gt;<font></font>
    &lt;p&gt;: @dicSensors[<span class="hljs-string">"temperature"</span>] *&lt;/p&gt;<font></font>
    &lt;p&gt;: @dicSensors[<span class="hljs-string">"pressure"</span>] &lt;/p&gt;<font></font>
     @if (boolValueLED==<span class="hljs-literal">false</span>)<font></font>
        {<font></font>
            &lt;p&gt;LED: OFF&lt;/p&gt;<font></font>
        }<font></font>
     <span class="hljs-keyword">else</span><font></font>
     {<font></font>
        &lt;p&gt;LED: ON&lt;/p&gt;<font></font>
     }<font></font>
<font></font>
    @if (boolValueRelay == <span class="hljs-literal">false</span>)<font></font>
    {<font></font>
        &lt;p&gt;: OFF&lt;/p&gt;<font></font>
    }<font></font>
    <span class="hljs-keyword">else</span><font></font>
    {<font></font>
        &lt;p&gt;: ON&lt;/p&gt;<font></font>
    }<font></font>
    &lt;form name=<span class="hljs-string">"formaction"</span> action=<span class="hljs-string">"~/index.cshtml"</span> method=<span class="hljs-string">"get"</span>&gt;<font></font>
        &lt;h3&gt; Actuation&lt;/h3&gt;<font></font>
        &lt;p&gt; LED: <font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"led_on"</span>&gt; ON &lt;/button&gt;<font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"led_off"</span>&gt; OFF &lt;/button&gt;<font></font>
        &lt;/p&gt;<font></font>
        &lt;p&gt; : <font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"relay_on"</span>&gt; ON &lt;/button&gt;<font></font>
            &lt;button name=<span class="hljs-string">"command"</span> type=<span class="hljs-string">"submit"</span> <span class="hljs-keyword">value</span>=<span class="hljs-string">"relay_off"</span>&gt; OFF &lt;/button&gt;<font></font>
        &lt;/p&gt;<font></font>
        &lt;p&gt;&lt;/p&gt;<font></font>
        &lt;p&gt;<font></font>
            &lt;button name=<span class="hljs-string">"update"</span> type=<span class="hljs-string">"submit"</span>&gt;   &lt;/button&gt;<font></font>
        &lt;/p&gt;<font></font>
    &lt;/form&gt;<font></font>
&lt;/body&gt;<font></font>
&lt;/html&gt;<font></font>
</code></pre><br>
</div></div><br>
<b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></b><br>
<ol>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">英特尔爱迪生 </font><font style="vertical-align: inherit;">第一次开始</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">英特尔爱迪生 </font><font style="vertical-align: inherit;">使用英特尔物联网分析云：记录和发送数据</font></font></a></li>
<li><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">英特尔爱迪生 </font><font style="vertical-align: inherit;">与英特尔物联网分析云一起使用：创建规则并发送通知</font></font></a></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">英特尔爱迪生 </font><font style="vertical-align: inherit;">英特尔物联网分析云：在ASP.NET上发送SMS和RESTful客户端</font></font></li>
</ol></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN384929/">https://habr.com/ru/post/zh-CN384929/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN384915/index.html">出版与写作</a></li>
<li><a href="../zh-CN384917/index.html">Raspberry Pi和Arduino上的Turing炸弹模拟器</a></li>
<li><a href="../zh-CN384921/index.html">小米不仅是智能手机制造商的21个原因</a></li>
<li><a href="../zh-CN384923/index.html">保罗·格雷厄姆（Paul Graham）：高科技协会</a></li>
<li><a href="../zh-CN384925/index.html">舒适地唤醒-自己动手做灯光警报</a></li>
<li><a href="../zh-CN384933/index.html">arduino JDY-40无线电模块</a></li>
<li><a href="../zh-CN384937/index.html">物联网的危险是什么，值得创造吗？</a></li>
<li><a href="../zh-CN384941/index.html">冥王星卫星Charon上的“峡谷”是一个巨大的地壳破裂</a></li>
<li><a href="../zh-CN384949/index.html">智能内衣：谁以及为什么制造出贴心的可穿戴“电子产品”</a></li>
<li><a href="../zh-CN384951/index.html">“睡觉，我的快乐，睡觉……”或睡眠有什么问题</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>