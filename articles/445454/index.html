<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë©üèæ‚Äç‚öñÔ∏è üëãüèø üßö Pantalla Braille Raspberry Pi Zero Inside Handy Tech Active Star 40 üë©üèø‚Äçüé® üöò ü§£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="El autor coloc√≥ el Raspberry Pi Zero, un "silbato" Bluetooth y un cable dentro de su nueva pantalla Braille Handy Tech Active Star 40. Un puerto USB i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pantalla Braille Raspberry Pi Zero Inside Handy Tech Active Star 40</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/445454/"><img src="https://habrastorage.org/webt/5i/vv/tl/5ivvtlnh3-qi8x3gtk0kzgczlt4.jpeg"><br><br>  El autor coloc√≥ el Raspberry Pi Zero, un "silbato" Bluetooth y un cable dentro de su nueva pantalla Braille Handy Tech Active Star 40. Un puerto USB incorporado proporciona energ√≠a.  El resultado fue una computadora aut√≥noma sin monitor en ARM con el sistema operativo Linux, equipada con un teclado y una pantalla braille.  Puede cargarlo / alimentarlo a trav√©s de USB, incl.  de un banco de energ√≠a o cargador solar.  Por lo tanto, puede prescindir de la red el√©ctrica no durante varias horas, sino durante varios d√≠as. <a name="habracut"></a><br><br><img src="https://habrastorage.org/webt/so/yo/ky/soyokywncc6nvduroz7wnbngtly.jpeg"><br><br><h1>  Diferenciaci√≥n dimensional de pantallas braille </h1><br>  En primer lugar, difieren en la longitud de la cadena.  Los dispositivos 60 y m√°s familiares son buenos cuando se trabaja con una computadora de escritorio, 40 dispositivos son convenientes para llevar con una computadora port√°til.  Ahora hay pantallas Braille conectadas a tel√©fonos inteligentes y tabletas, con una longitud de cadena de 14 o 18 familiaridad. <br><br>  En el pasado, las pantallas braille eran bastante masivas.  El familiar de 40, por ejemplo, ten√≠a las dimensiones y el peso de una computadora port√°til de 13 pulgadas.  Ahora, con la misma cantidad de familiaridad, son lo suficientemente peque√±os como para colocar una pantalla frente a una computadora port√°til, en lugar de una computadora port√°til en la pantalla. <br><br>  Esto, por supuesto, es mejor, pero a√∫n as√≠ no es muy conveniente mantener dos dispositivos separados en su regazo.  Cuando trabaja en la mesa, no hay quejas, pero vale la pena recordar que la computadora port√°til se llama computadora port√°til de una manera diferente e intenta justificar su nombre, ya que resulta que la pantalla en miniatura de 40 asientos es a√∫n menos conveniente. <br><br>  As√≠ que el autor esper√≥ el lanzamiento del nuevo modelo largamente prometido en la serie Handy Tech Star.  En 2002, se lanz√≥ el modelo anterior Handy Tech Braille Star 40, donde el √°rea del cuerpo es suficiente para colocar una computadora port√°til en la parte superior.  Y si no encaja, se proporciona un soporte retr√°ctil.  Ahora este modelo es reemplazado por Active Star 40, es casi lo mismo, pero con electr√≥nica mejorada. <br><br><img src="https://habrastorage.org/webt/mx/tx/ba/mxtxbaqpjfxzn_j_utlp5i8nxom.jpeg"><br><br>  Y el soporte retr√°ctil permaneci√≥: <br><br><img src="https://habrastorage.org/webt/6-/ds/hq/6-dshqxvtaajiaqqddsv9jnyqaa.jpeg"><br><br>  Pero lo m√°s conveniente en la novedad es un receso aproximadamente del tama√±o de un tel√©fono inteligente (ver KDPV).  Se abre cuando la plataforma retrocede.  Result√≥ ser un inconveniente mantener el tel√©fono inteligente all√≠, pero de alguna manera necesitas usar el compartimento vac√≠o, dentro del cual incluso se proporciona una salida de energ√≠a. <br><br>  Lo primero que se le ocurri√≥ al autor fue poner la Raspberry Pi all√≠, pero cuando se compr√≥ la pantalla, result√≥ que con la "frambuesa" el soporte, que cierra el compartimento, no se desliza.  Ahora, si el tablero fuera solo 3 mm m√°s delgado ... <br><br>  Pero un colega habl√≥ sobre el lanzamiento de Raspberry Pi Zero, que result√≥ ser tan peque√±o que dos cab√≠an en el compartimento ... o tal vez incluso tres.  Se orden√≥ de inmediato junto con una tarjeta de memoria de 64 GB, Bluetooth, un silbato y un cable Micro USB.  Pocos d√≠as despu√©s, todo esto lleg√≥ y amigos videntes ayudaron al autor a preparar un mapa.  Todo funcion√≥ de inmediato como deber√≠a. <br><br><h1>  ¬øQu√© se hizo para esto? </h1><br>  En la parte posterior del Handy Tech Active Star 40 hay dos puertos USB para dispositivos como teclados.  Se incluye un peque√±o teclado conectado magn√©ticamente.  Cuando el teclado est√° conectado y la pantalla funciona a trav√©s de Bluetooth, la computadora tambi√©n lo reconoce como un teclado Bluetooth. <br><br>  Por lo tanto, si conecta un "silbato" Bluetooth al Raspberry Pi Zero colocado en el compartimiento del tel√©fono inteligente, puede intercambiar datos con la pantalla Braille a trav√©s de Bluetooth usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BRLTTY</a> , y si tambi√©n conecta un teclado a la pantalla, el "Malinka" funcionar√° y con ella <br><br>  Pero eso no es todo.  Malinka, a su vez, puede acceder a Internet a trav√©s de Bluetooth PAN desde cualquier dispositivo que lo admita.  El autor configur√≥ su tel√©fono inteligente y sus computadoras en consecuencia en el hogar y en el trabajo, pero en el futuro planea adaptar una "frambuesa" m√°s para esto: una cl√°sica, no Zero, conectada a Ethernet y otro "silbato" Bluetooth. <br><br><h1>  BlueZ 5 y PAN </h1><br>  La forma de configurar un PAN usando <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">BlueZ</a> no era obvia.  El autor encontr√≥ el script pyhton bt-pan (ver m√°s abajo) que le permite configurar PAN sin una GUI. <br><br>  Con √©l, puede configurar tanto el servidor como el cliente.  Habiendo recibido el comando D-Bus apropiado cuando trabaja en modo cliente, crea un nuevo dispositivo de red bnep0 inmediatamente despu√©s de establecer una conexi√≥n con el servidor.  Normalmente, DHCP se usa para asignar una direcci√≥n IP a esta interfaz.  En modo servidor, BlueZ requiere el nombre del dispositivo puente al que el esclavo puede agregarlo para conectar cada cliente.  Generalmente, todo lo que se requiere es configurar la direcci√≥n para el dispositivo de puente e iniciar el servidor DHCP m√°s la m√°scara de IP en el puente. <br><br><h1>  Punto de acceso PAN Bluetooth con Systemd </h1><br>  Para configurar el puente, el autor aplic√≥ systemd-networkd: <br><br>  Archivo /etc/systemd/network/pan.netdev <br><br><pre><code class="plaintext hljs">[NetDev] Name=pan Kind=bridge ForwardDelaySec=0</code> </pre> <br>  Archivo /etc/systemd/network/pan.network <br><br><pre> <code class="plaintext hljs">[Match] Name=pan [Network] Address=0.0.0.0/24 DHCPServer=yes IPMasquerade=yes</code> </pre> <br>  Ahora necesita forzar a BlueZ a configurar el perfil NAP.  Result√≥ que las utilidades regulares de BlueZ 5.36 no se pueden hacer.  Si el autor se equivoca, corr√≠jalo: gur√∫ mlang (sabe c√≥mo mover las orejas) ciego (a veces acceso y cu√°ntico) <br><br>  Pero encontr√≥ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">una publicaci√≥n de blog</a> y <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">un script de Python</a> para hacer las llamadas necesarias a D-Bus. <br><br>  Por conveniencia, el autor us√≥ el servicio Systemd para ejecutar el script y verificar la resoluci√≥n de dependencia. <br><br>  Archivo /etc/systemd/system/pan.service <br><br><pre> <code class="plaintext hljs">[Unit] Description=Bluetooth Personal Area Network After=bluetooth.service systemd-networkd.service Requires=systemd-networkd.service PartOf=bluetooth.service [Service] Type=notify ExecStart=/usr/local/sbin/pan [Install] WantedBy=bluetooth.target</code> </pre> <br>  Archivo / usr / local / sbin / pan <br><br><pre> <code class="plaintext hljs">#!/bin/sh # Ugly hack to work around #787480 iptables -F iptables -t nat -F iptables -t mangle -F iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE exec /usr/local/sbin/bt-pan --systemd --debug server pan</code> </pre> <br>  El segundo archivo no ser√≠a necesario si Debian tuviera IPMasquerade = support (ver <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u="># 787480</a> ). <br><br>  Despu√©s de ejecutar los <i>comandos systemctl daemon-reload</i> y <i>systemctl restart systemd-networkd,</i> puede iniciar el PAN Bluetooth con el comando <i>systemctl start pan</i> <br><br><h1>  Cliente PAN Bluetooth con Systemd </h1><br>  El lado del cliente tambi√©n es f√°cil de configurar con Systemd. <br><br>  Archivo /etc/systemd/network/pan-client.network <br><br><pre> <code class="plaintext hljs">[Match] Name=bnep* [Network] DHCP=yes</code> </pre> <br>  Archivo /etc/systemd/system/pan@.service <br><br><pre> <code class="plaintext hljs">[Unit] Description=Bluetooth Personal Area Network client [Service] Type=notify ExecStart=/usr/local/sbin/bt-pan --debug --systemd client %I --wait</code> </pre> <br>  Ahora, despu√©s de reiniciar la configuraci√≥n, puede conectarse al punto de acceso Bluetooth especificado de esta manera: <br><br><pre> <code class="plaintext hljs">systemctl start pan@00:11:22:33:44:55</code> </pre> <br><h1>  Emparejamiento de l√≠nea de comando </h1><br>  Por supuesto, el servidor y los clientes deben configurarse despu√©s de emparejarlos a trav√©s de Bluetooth.  En el servidor, debe ejecutar bluetoothctl y darle el comando: <br><br><pre> <code class="plaintext hljs">power on agent on default-agent scan on scan off pair XX:XX:XX:XX:XX:XX trust XX:XX:XX:XX:XX:XX</code> </pre> <br>  Despu√©s de comenzar la exploraci√≥n, espere unos segundos hasta que el dispositivo que necesita aparezca en la lista.  Escriba su direcci√≥n y √∫sela emitiendo el comando de emparejamiento y, si es necesario, el comando de confianza. <br><br>  El cliente debe hacer lo mismo, pero el comando de confianza no ser√° necesario con seguridad.  El servidor necesita que acepte la conexi√≥n en el perfil NAP sin la confirmaci√≥n manual del usuario. <br><br>  El autor no est√° seguro de si esta es la secuencia √≥ptima de comandos.  Quiz√°s todo lo que se necesita es emparejar el cliente con el servidor y ejecutar el comando de confianza en el servidor, pero a√∫n no lo ha probado. <br><br><h1>  Habilitaci√≥n del perfil Bluetooth HID </h1><br>  Se requiere que el "Malinka" reconozca el teclado conectado a la pantalla Braille por un cable, y que ya haya sido reenviado por la pantalla a trav√©s de Bluetooth.  Esto se hace de la misma manera, solo que en lugar del <i>agente</i> debe dar el comando <i>KeyboardOnly</i> al <i>agente</i> , y bluetoothctl encontrar√° un dispositivo con un perfil HID. <br><br><h1>  Pero configurar Bluetooth a trav√©s de la l√≠nea de comando es un poco complicado </h1><br>  Aunque el autor logr√≥ configurar todo, entiende que configurar BlueZ a trav√©s de la l√≠nea de comando es inconveniente.  Al principio, pens√≥ que los agentes solo eran necesarios para ingresar c√≥digos PIN, pero result√≥, por ejemplo, que para habilitar el perfil HID uno ten√≠a que escribir "agent KeyboardOnly".  Sorprendentemente, para iniciar Bluetooth PAN, debe escalar los repositorios en busca del script deseado.  √âl recuerda que en la versi√≥n anterior de BlueZ hab√≠a una herramienta de <i>pandillas</i> preparada para esto: ¬ød√≥nde lo hizo en BlueZ 5?  De repente, apareci√≥ una nueva soluci√≥n, desconocida para el autor, ¬øpero tendida en la superficie? <br><br><h1>  Rendimiento </h1><br>  La velocidad de transferencia de datos fue de aproximadamente 120 kbps, que es suficiente.  El procesador ARM de 1 GHz es muy r√°pido para la interfaz de l√≠nea de comando.  El autor todav√≠a planea usar principalmente ssh y emacs en el dispositivo. <br><br><h1>  Fuentes de consola y resoluci√≥n de pantalla </h1><br>  La resoluci√≥n de pantalla predeterminada utilizada por el framebuffer en Raspberry Pi Zero es bastante extra√±a: fbset informa que tiene 656x416 p√≠xeles (por supuesto, el monitor no est√° conectado).  Con una fuente de consola de 8x16, se obtuvieron 82 caracteres por l√≠nea y 26 l√≠neas. <br><br>  Es inconveniente trabajar con una pantalla Braille de 40 caracteres en este modo.  Adem√°s, el autor desea que los caracteres Unicode se muestren en Braille.  Afortunadamente, Linux admite 512 caracteres, y en la mayor√≠a de las fuentes de consola hay 256. Con la configuraci√≥n de la consola, puede usar dos fuentes de 256 caracteres juntas.  El autor agreg√≥ las siguientes l√≠neas al archivo / etc / default / console-setup: <br><br><pre> <code class="plaintext hljs">SCREEN_WIDTH=80 SCREEN_HEIGHT=25 FONT="Lat15-Terminus16.psf.gz brl-16x8.psf"</code> </pre> <br>  Nota: para que la fuente brl-16x8.psf est√© disponible, debe instalar braille de consola. <br><br><h1>  Que sigue </h1><br>  Hay un conector de 3,5 mm en la pantalla Braille, pero el autor no conoce los adaptadores para eliminar el audio de Mini-HDMI.  El autor no pudo usar la tarjeta de sonido integrada en la "frambuesa" (extra√±o, el traductor estaba seguro de que no hab√≠a ninguno en Zero, pero hay formas de enviar el sonido PWM a GPIO).  Planea usar un concentrador USB-OTG y conectar una tarjeta externa y emitir el sonido al altavoz integrado en la pantalla Braille.  Por alguna raz√≥n, dos tarjetas externas no funcionaron, ahora est√° buscando un dispositivo similar en otro chipset. <br><br>  Tambi√©n es inconveniente apagar manualmente la "frambuesa", esperar unos segundos y apagar la pantalla Braille.  Y todo porque cuando se desconecta, elimina la energ√≠a del conector en el compartimento.  El autor planea colocar una peque√±a bater√≠a amortiguadora en el compartimento y, a trav√©s del GPIO, informar a la "frambuesa" acerca de apagar la pantalla para que comience a completar el trabajo.  Tal UPS en miniatura. <br><br><h1>  Imagen del sistema </h1><br>  Si tiene la misma pantalla braille y desea hacer lo mismo con ella, el autor est√° listo para proporcionar una imagen del sistema lista para usar (basada en Raspbian Stretch).  Escr√≠bale sobre esto en la direcci√≥n anterior.  Si hay muchas personas dispuestas, incluso es posible producir conjuntos que incluyan todo lo que necesita para tal alteraci√≥n. <br><br><h1>  Agradecimientos </h1><br>  Gracias a Dave Mielke por corregir el texto. <br><br>  Gracias a Simon Kainz por la ilustraci√≥n de la foto. <br><br>  Gracias a los colegas de la Universidad T√©cnica de Graz por la r√°pida introducci√≥n del autor al mundo de Raspberry Pi. <br><br>  PD: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">El primer tweet</a> del autor sobre este tema (no abre - traductor) se realiz√≥ solo cinco d√≠as antes de la publicaci√≥n del original de este art√≠culo, y podemos suponer que, con la excepci√≥n de los problemas de sonido, la tarea estaba pr√°cticamente resuelta.  Por cierto, el autor edit√≥ la versi√≥n final del texto de la "pantalla Braille autosuficiente" hecha por √©l, conect√°ndolo a trav√©s de SSH a la computadora de la casa. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/445454/">https://habr.com/ru/post/445454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445444/index.html">Actualizaci√≥n de m√≥dulos solares de alto rendimiento de REC y Trina (Solar)</a></li>
<li><a href="../445446/index.html">C√≥mo utilizamos la replicaci√≥n diferida para la recuperaci√≥n ante desastres con PostgreSQL</a></li>
<li><a href="../445448/index.html">Configuraci√≥n de la recepci√≥n autom√°tica de certificados de letsencrypt usando docker en linux</a></li>
<li><a href="../445450/index.html">Extensi√≥n del navegador para toster.ru</a></li>
<li><a href="../445452/index.html">Repositorios √∫tiles con Eloquent?</a></li>
<li><a href="../445456/index.html">Buscar a 1 TB / s</a></li>
<li><a href="../445458/index.html">Electronic Arts tratar√° con 350 empleados y "reducir√° su presencia" en Rusia</a></li>
<li><a href="../445460/index.html">Interactividad sin gadgets</a></li>
<li><a href="../445464/index.html">Disminuci√≥n del tama√±o de la muestra de datos experimentales sin p√©rdida de informaci√≥n.</a></li>
<li><a href="../445466/index.html">Felicitaciones Imagine Cup EMEA Regional Final Champions: ¬°Team Finderr del Reino Unido! El equipo ruso es tercero</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>