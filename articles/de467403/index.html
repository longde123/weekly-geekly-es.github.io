<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>💪🏽 🚴🏽 🤴🏿 Was Sie aus Webkomponenten herausholen können und was nicht 👩🏿‍🤝‍👩🏾 😘 👐🏿</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dies ist kein Tutorial oder eine vollständige Überprüfung, sondern heißblütige Notizen nach dem Kompilieren einer Komponentenbibliothek. Alles begann ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Was Sie aus Webkomponenten herausholen können und was nicht</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/467403/"> Dies ist kein Tutorial oder eine vollständige Überprüfung, sondern heißblütige Notizen nach dem Kompilieren einer Komponentenbibliothek.  Alles begann mit der üblichen Alltagsgeschichte: Es gibt einen Legacy-Code, Sie müssen Pipmochek und kleine Sticks am Legacy befestigen, Sie können nichts einmal umschreiben und hier nichts mit Ihren Händen berühren.  Nur für den Fall, berühren Sie die großen und beängstigenden Pakete nicht. Warum nehmen Sie nicht einfach das beste <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Vanilla JS-</a> Framework und schreiben darauf, wie es Ihre Großväter hinterlassen haben? <br><a name="habracut"></a><br>  Da das Arbeitsvolumen jedoch sehr auffällig sein sollte, erlebte aus irgendeinem Grund niemand kreative Impulse von der Idee, alles in bloßem JS zu schreiben.  Wir haben uns die Werkzeuge angesehen und aus ihnen diejenigen ausgewählt, die die Verbraucher unserer Komponenten nicht vor zitternden Knien erschrecken würden. <br><br><h2>  Die Werkzeuge </h2><br>  Obwohl ich diesen ganzen Abschnitt bereits verwöhnt habe, muss hier etwas gesagt werden.  Erstens wurden Webkomponenten sofort absolut unbestritten: Wenn das Ergebnis der Kreativität eine Bibliothek von Komponenten ist und Sie kein großes Monster a la Angular ziehen können, das sich vollständig vollständig modularisiert, bleibt nur, dass Sie den Bibliothekscode überhaupt nicht ziehen müssen. und funktioniert "einfach so" in modernen Browsern.  Die Webkomponenten selbst sind immer noch das gleiche erstaunliche Vanilla JS-Framework mit nur wenigen gelösten Modularitätsproblemen.  Es bleibt noch zu viel übrig, um mit eigenen Händen zu schreiben - Sie benötigen einen Wrapper mit Standardisierung, und es ist auch wünschenswert, dass für jede Komponente mindestens eine Boilerplate vorhanden ist. <br><br>  Es gibt nicht viele solcher Wrapper und sie sind sogar ausgereift genug, um in einem ernsthaften <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Produkt verwendet zu werden</a> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Hybrids,</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">LitElement,</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Stencil.</a>  Und alle machen ungefähr dasselbe auf die gleiche Weise, der Unterschied liegt in den kleinen Dingen.  Hybrids versucht, trendy und klassenlos zu sein, Stencil ist trendy und reaktionsartig, LitElement scheint sich nicht einmal anzustrengen.  Und nach den Ergebnissen der Auswahl aus unbedeutenden Kleinigkeiten blieb LitElement am Ausgang - OOPshniki wandte sich von Hybrids und Nicht-Amateuren der Reaktion ab - von Stencil, in dem JSX im Allgemeinen eine Wiederholung der nicht unbestreitbarsten Ideen der Reaktion verspürte. <br><br><h2>  Zu kämpfen? </h2><br>  Es ist nicht so interessant, darüber zu sprechen, was Sie können, es steht alles in der Dokumentation, daher werde ich weiterhin hauptsächlich darüber sprechen, was Sie nicht können: Sie schreiben normalerweise nicht darüber in der Dokumentation. <br><br><h3>  Muster </h3><br>  In Bezug auf Vorlagen verwendet LitElement lit-html, was vollkommen minimalistisch ist: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> template = html<span class="hljs-string"><span class="hljs-string">` &lt;div attr=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${a}</span></span></span><span class="hljs-string"> .property=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${b}</span></span></span><span class="hljs-string"> ?booleanAttr=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${c}</span></span></span><span class="hljs-string"> @click=</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${handleClick}</span></span></span><span class="hljs-string"> &gt;&lt;/div&gt; `</span></span>;</code> </pre> <br>  Dies ist kein HTML, aber Sie müssen sich hier genau drei Konstruktionen in einem Symbol merken - ".", "?" Und "@".  Alles andere ist HTML.  In Bezug auf JSX mit seinem Klassennamen und dem Rest ist es ein bisschen schöner und rechtlich vom JS / TS-Code getrennt.  Übrigens folgt von hier aus das erste „Unmögliche“ - etwas Schreckliches zu binden funktioniert nicht, Sie können nur die Werte von Attributen und Eigenschaften sowie den Textinhalt binden.  Natürlich gibt es keine Magie in markierten Vorlagenliteralen, und auf Kosten einer bestimmten Anzahl von Perversionen können Sie zur Laufzeit eine Zeichenfolge kompilieren und Lit-HTML-Ordner daran anhängen, aber dies wird tatsächlich mit Ihren Händen in den Render übertragen, und mit dem gleichen Erfolg können Sie Zeilen sammeln und senden in innerHTML.  Dies geschieht normalerweise durch die Zusammenstellung von Vorlagen und die Aufteilung komplexer Komponenten in einfachere Komponenten.  Die Boilerplate ist ziemlich klein - die Template-Bindung fehlt praktisch, da es sich nur um eine Variable handelt. Um eine Komponente zu erstellen, benötigen Sie fünf "zusätzliche" Zeilen. <br><br><h3>  Komponenten </h3><br>  Das einzige (aber signifikante) Problem der Komponenten besteht darin, dass Sie das Schatten-DOM benötigen, um die Komponenten vollständig mit dem Rendering der Kinder zu „mischen“.  Was natürlich standardmäßig in LitElement enthalten ist und im Allgemeinen nicht schlecht zu sein scheint.  Das Schatten-DOM hat derzeit ein großes Problem mit Stilen, ähnlich wie CSS-Module: Um Stile zu isolieren, werden sie perfekt isoliert, aber auf dem Weg dorthin wird die gesamte Kaskade reduziert.  Es ist einfach unmöglich, von außen in isolierte Stile zu gelangen.  Im Allgemeinen (fast) nichts. <br><br>  Dies beeinträchtigt beispielsweise die Fähigkeit, Komponenten verschiedener Themen zu rollen, erheblich.  Mit dem Schatten-DOM können Sie entweder alle Stiloptionen in die Komponente packen oder versuchen, das Thema vollständig von CSS-Variablen abhängig zu machen - dies ist das "Fast", mit dem Sie isolierte Stile zucken können.  Aber mit denen es notwendig ist, Variablen buchstäblich für jede vernünftige Stilisierung bereitzustellen, und mit hoher Wahrscheinlichkeit wird es dann noch mehr hinzugefügt. <br><br>  Glücklicherweise kann das Shadow DOM in LitElement einfach in der Komponente deaktiviert werden.  Leider wird dadurch auch die Möglichkeit deaktiviert, untergeordnete Elemente des Elements an den richtigen Stellen der Vorlage über &lt;Slot&gt; anzuvisieren.  Glücklicherweise können Sie, nachdem Sie ein wenig pervertiert haben, sowohl die erste als auch die zweite erhalten: Dazu müssen Sie <i>nur</i> eine Schattenwurzel auf jeden erforderlichen Steckplatz legen und nichts außer &lt;slot&gt; darin haben.  Somit ist die Stilisierung der Komponente offen und es sind Schlitze vorhanden.  Ich wollte ein kurzes Beispiel geben, aber leider funktioniert der Code zum Bearbeiten von Slots sowieso nicht kurz - sehr interessierte Leute können <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">diese Ausgabe hier</a> lesen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.</a>  Die Ideen von dort haben mich inspiriert. <br><br>  Erwähnenswert ist auch, dass in absehbarer Zeit die Browserunterstützung und die Polyfills <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">:: part</a> und :: theme wahrscheinlich sinken werden und mit ihnen das Schatten-DOM endlich zur Lösung wird, auf die alle seit vielen Jahren gewartet haben - so dass es isoliert ist und erweiterbar / veränderlich.  Aber bisher ist das noch nicht da. <br><br><h3>  Bereitstellen </h3><br>  An diesem Punkt kommt das Schreiben über „was unmöglich ist“ nicht mehr heraus, da alles weiter entfernt werden kann - beleuchtete Bibliotheken existieren in Form von ES-Modulen und werden daher ohne Probleme von irgendetwas und auf irgendeine Weise aufgenommen (selbst mit einem nackten Browser, der Module handhaben kann) )  Für den Internet Explorer und den aktuellen Edge müssen Sie eine Polyfüllung von Webkomponenten verbinden. Für Module benötigen Sie etwas, das die Schmerzen beim Importieren von Browsern lindert, z. B. <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">es-module-shims</a> , wenn Sie sie direkt aus dem Browser entfernen möchten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">.</a>  Na ja, oder ein Bündler. <br><br>  Die in die Anwendung eingebundenen Webkomponenten sind einfach und kitschig zu verwenden. Sie können sie in HTML verwenden und ihre Methoden und Eigenschaften im Code abrufen.  Sie können hier sehen, wie gut dies alles mit einer anderen Bibliothek oder einem anderen Framework <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">verknüpft werden kann</a> (die Reaktion war hervorragend, aber im Durchschnitt ist alles sehr gut).  Wir haben uns an AngularJS festgehalten, und alles war banal: Mit ng-prop können Sie etwas auf die Komponente übertragen, und mit ng-on können Sie Ereignisse anhören. <br><br><h2>  Zusammenfassung </h2><br>  Wenn Sie eine Komponenten-Benutzeroberfläche erstellen und an etwas befestigen müssen, auf das Sie absolut nicht eingehen möchten (Legacy-Code, unmodernes, beängstigendes Framework und andere schlechte Stellen), helfen Webkomponenten einwandfrei.  Die wichtigsten "ausgereiften" Bibliotheken, die mit ihnen verwaltet werden, sind klein, es gibt keine ernsthaften technischen Probleme hinsichtlich Modularität und Layout, und Sie können es einfach nehmen und tun.  Welche Art von Bibliothek Sie nehmen - auch wenn dies nicht so wichtig ist, gibt es im Moment nur sehr wenige Unterschiede zwischen ihnen.  Insbesondere das von uns getroffene LitElement hat kein einziges zusätzliches Problem für uns geschaffen und in allen Fällen in der erwarteten Weise funktioniert. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de467403/">https://habr.com/ru/post/de467403/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de467391/index.html">Yandex stellt RPKI vor</a></li>
<li><a href="../de467393/index.html">Das NX Bootcamp startet im Oktober</a></li>
<li><a href="../de467395/index.html">Habr Weekly # 18 / New Apple Gadgets, ein vollmodulares Smartphone, das Dorf der Programmierer in Weißrussland, das XY-Phänomen</a></li>
<li><a href="../de467399/index.html">Sie können nicht verbieten, Folgendes mitzubringen: wie Sie das BYOD-Konzept implementieren und die Informationssicherheit nicht beeinträchtigen</a></li>
<li><a href="../de467401/index.html">Vergleich von Tesla Model S und Porsche Taycan</a></li>
<li><a href="../de467405/index.html">Lyft startet 3D-Objekterkennungswettbewerb</a></li>
<li><a href="../de467407/index.html">Wir arbeiten mit dem Cobot Dobot M1</a></li>
<li><a href="../de467409/index.html">Um im Silicon Valley Geschäfte zu machen, müssen Sie sich benehmen</a></li>
<li><a href="../de467413/index.html">PHP Microservice Framework - "Hallo Welt" von Swoft</a></li>
<li><a href="../de467415/index.html">Moderner Devisenmarkt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>