<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👌🏾 🕘 ‼️ Delegierte und Veranstaltungen in C # 🚉 🤱🏽 ™️</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Die Übersetzung des Artikels wurde speziell für Studenten des Kurses "C # Developer" erstellt . 



 Was sind Ereignisse in C #? 
 Ein Ereignis kann v...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Delegierte und Veranstaltungen in C #</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/otus/blog/472094/">  <i>Die Übersetzung des Artikels wurde speziell für Studenten des Kurses <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">"C # Developer" erstellt</a></i> . <br><br><img src="https://habrastorage.org/webt/ir/yd/rp/irydrp5fqzvuhxdmpcokybn5gj4.png"><br><hr><br><h3>  Was sind Ereignisse in C #? </h3><br>  Ein Ereignis kann verwendet werden, um Benachrichtigungen bereitzustellen.  Sie können die Veranstaltung abonnieren, wenn Sie diese Benachrichtigungen benötigen.  Sie können auch eigene Ereignisse erstellen, die Sie darüber informieren, dass etwas passiert ist, das Sie interessiert.  Das .NET Framework bietet integrierte Typen, mit denen Sie Ereignisse erstellen können.  Mit Delegaten, Lambda-Ausdrücken und anonymen Methoden können Sie Ereignisse auf bequeme Weise erstellen und verwenden. <br><a name="habracut"></a><br><h3>  Grundlegendes zu Delegaten in C # </h3><br>  In C # bilden Delegaten die Grundbausteine ​​für Ereignisse.  Ein Delegat ist ein Typ, der die Signatur einer Methode definiert.  In C ++ kann dies beispielsweise mithilfe eines Funktionszeigers erfolgen.  In C # können Sie eine Instanz eines Delegaten erstellen, die auf eine andere Methode verweist.  Sie können diese Methode über die Delegateninstanz aufrufen. <br><br>  Das Folgende ist ein Beispiel für das Deklarieren eines Delegaten und das Aufrufen einer Methode über diesen. <br><br><h3>  Verwenden eines Delegaten in C # </h3><br><pre><code class="cs hljs">}<span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MathDelegate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value2</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Add</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value2</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value1 + value2; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">double</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Subtract</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value1, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> value2</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> value1 - value2; } Console.ReadLine(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { MathDelegate mathDelegate = Add; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = mathDelegate(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); Console.WriteLine(result); <span class="hljs-comment"><span class="hljs-comment">// : 7 mathDelegate = Subtract; result = mathDelegate(5, 2); Console.WriteLine(result); // : 3 }</span></span></code> </pre> <br>  Wie Sie sehen können, verwenden wir das Schlüsselwort delegate, um dem Compiler mitzuteilen, dass wir einen Delegatentyp erstellen. <br><br>  Es ist einfach, Delegierte zusammen mit der automatischen Erstellung eines neuen Delegatentyps zu instanziieren. <br><br>  Sie können auch das <i>neue</i> Schlüsselwort verwenden, um einen Delegaten zu erstellen. <br><br>  <code>MathDelegate mathDelegate = new MathDelegate(Add)</code> ; <br><br>  Ein instanziierter Delegat ist ein Objekt.  Sie können es auch verwenden und als Argument an andere Methoden übergeben. <br><br><h3>  Multicast-Delegierte in C # </h3><br>  Ein weiteres großartiges Merkmal von Delegierten ist, dass Sie sie miteinander kombinieren können.  Dies wird als Multicasting bezeichnet.  Mit dem Operator + oder + = können Sie der Aufrufliste einer vorhandenen Delegateninstanz eine weitere Methode hinzufügen.  In ähnlicher Weise können Sie eine Methode auch mit dem Dekrementierungszuweisungsoperator (- oder - =) aus der Aufrufliste entfernen.  Diese Funktion dient als Grundlage für Ereignisse in C #.  Das folgende Beispiel zeigt einen Multicast-Delegaten. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Hello</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> s</span></span></span><span class="hljs-function">)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">" Hello, {0}!"</span></span>, s); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Goodbye</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> s</span></span></span><span class="hljs-function">)</span></span> { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">" Goodbye, {0}!"</span></span>, s); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Del</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> s</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Del a, b, c, d; <span class="hljs-comment"><span class="hljs-comment">//   a    Hello: a = Hello; //   b    Goodbye: b = Goodbye; //    a  b - c: c = a + b; //  a    c,   d,       Goodbye: d = c - a; Console.WriteLine("Invoking delegate a:"); a("A"); Console.WriteLine("Invoking delegate b:"); b("B"); Console.WriteLine("Invoking delegate c:"); c("C"); Console.WriteLine("Invoking delegate d:"); d("D"); /* : Invoking delegate a: Hello, A! Invoking delegate b: Goodbye, B! Invoking delegate c: Hello, C! Goodbye, C! Invoking delegate d: Goodbye, D! */ Console.ReadLine(); } }</span></span></code> </pre> <br>  Dies ist möglich, weil Delegaten von der <code>System.MulticastDelegate</code> Klasse erben, die wiederum von <code>System.Delegate</code> erbt.  Sie können die in diesen Basisklassen definierten Mitglieder für Ihre Delegaten verwenden. <br><br>  Um beispielsweise herauszufinden, wie viele Methoden ein Multicast-Delegat aufruft, können Sie den folgenden Code verwenden: <br><br><pre> <code class="plaintext hljs">int invocationCount = d.GetInvocationList().GetLength(0);</code> </pre> <br><h3>  Kovarianz und Kontravarianz in C # </h3><br>  Wenn Sie einem Delegaten eine Methode zuweisen, muss die Methodensignatur nicht genau mit dem Delegaten übereinstimmen.  Dies nennt man Kovarianz und Kontravarianz.  Durch Kovarianz kann eine Methode einen abgeleiteten Rückgabetyp haben als den im Delegaten definierten.  Die Kontravarianz ermöglicht eine Methode mit Parametertypen, die weniger abgeleitet sind als die Typen im Delegaten. <br><br><h4>  Kovarianz delegieren </h4><br>  Hier ist ein Beispiel für Kovarianz: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> TextWriter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CovarianceDel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> StreamWriter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MethodStream</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> StringWriter </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MethodString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">null</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CovarianceDel del; del = MethodStream; del = MethodString; Console.ReadLine(); } }</code> </pre> <br>  Da sowohl <code>StreamWriter</code> als auch <code>StringWriter</code> von <code>StringWriter</code> erben, können Sie <code>CovarianceDel</code> mit beiden Methoden verwenden. <br><br><h4>  Kontravarianz bei Delegierten </h4><br>  Das Folgende ist ein Beispiel für eine Kontravarianz. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">TextWriter textWriter</span></span></span><span class="hljs-function">)</span></span> { } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">delegate</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ContravarianceDel</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">StreamWriter streamWriter</span></span></span><span class="hljs-function">)</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ContravarianceDel del = DoSomething; Console.ReadLine(); } }</code> </pre> <br>  Da die <code>DoSomething</code> Methode mit <code>TextWriter</code> , kann sie sicherlich mit <code>StreamWriter</code> .  Aufgrund von Kontravarianzen können Sie einen Delegaten aufrufen und eine Instanz von <code>StreamWriter</code> an die <code>DoSomething</code> Methode übergeben. <br><br>  Mehr über dieses Konzept erfahren Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br><h3>  Lambda-Ausdrücke in C # </h3><br>  Manchmal erfordert eine gesamte Methodensignatur mehr Code als der Hauptteil der Methode.  Es gibt auch Situationen, in denen Sie eine gesamte Methode erstellen müssen, um sie als Delegat zu verwenden. <br><br>  In diesen Fällen hat Microsoft in C # einige neue Funktionen hinzugefügt, z. B. anonyme Methoden in 2.0.  In C # 3.0 wurde es noch besser, als Lambda-Ausdrücke hinzugefügt wurden.  Der Lambda-Ausdruck ist die bevorzugte Methode beim Schreiben von neuem Code. <br><br>  Das Folgende ist ein Beispiel für die neueste Lambda-Syntax. <br><br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">class</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">Program</span></span> { public delegate double MathDelegate(double value1, double value2); public static void Main() { MathDelegate mathDelegate = (x,y) =&gt; x + y; var result = mathDelegate(5, 2); Console.WriteLine(result); // : 7 mathDelegate = (x, y) =&gt; x - y; ; result = mathDelegate(5, 2); Console.WriteLine(result); // : 3 Console.ReadLine(); } }</code> </pre> <br>  Um diesen Code zu lesen, müssen Sie das Wort "folgt" im Kontext der speziellen Lambda-Syntax verwenden.  Zum Beispiel lautet der erste Lambda-Ausdruck im obigen Beispiel "x und y folgen der Addition von x und y". <br><br>  Eine Lambda-Funktion hat im Gegensatz zu einer Methode keinen bestimmten Namen.  Aus diesem Grund werden Lambdas als anonyme Funktionen bezeichnet.  Sie müssen den Typ des Rückgabewerts auch nicht explizit angeben.  Der Compiler übernimmt dies automatisch von Ihrem Lambda.  Im obigen Beispiel werden die Parametertypen x und y ebenfalls nicht explizit angegeben. <br><br>  Sie können Lambdas erstellen, die mehrere Operatoren umfassen.  Sie können dies tun, indem Sie die Aussagen, aus denen das Lambda besteht, in geschweifte Klammern setzen, wie im folgenden Beispiel gezeigt. <br><br><pre> <code class="cs hljs">MathDelegate mathDelegate = (x,y) =&gt; { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Add"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y; };</code> </pre> <br>  Manchmal scheint eine Ankündigung eines Delegierten für eine Veranstaltung etwas umständlich zu sein.  Aus diesem Grund verfügt .NET Framework über mehrere integrierte Delegatentypen, die Sie beim Deklarieren von Delegaten verwenden können.  Im MathDelegate-Beispiel haben Sie den folgenden Delegaten verwendet: <br><br><pre> <code class="plaintext hljs">public delegate double MathDelegate(double value1, double value2);</code> </pre> <br>  Sie können diesen Delegaten durch einen der integrierten Typen ersetzen, nämlich <code>Func &lt;int, int, int&gt;</code> . <br><br>  so, <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; mathDelegate = (x,y) =&gt; { Console.WriteLine(<span class="hljs-string"><span class="hljs-string">"Add"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x + y; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> result = mathDelegate(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); Console.WriteLine(result); <span class="hljs-comment"><span class="hljs-comment">// : 7 mathDelegate = (x, y) =&gt; x - y; ; result = mathDelegate(5, 2); Console.WriteLine(result); // : 3 Console.ReadLine(); } }</span></span></code> </pre> <br>  Func &lt;...&gt; -Typen finden Sie im System-Namespace.  Sie stellen Delegaten dar, die einen Typ zurückgeben und 0 bis 16 Parameter annehmen.  Alle diese Typen werden von System.MulticaseDelegate geerbt, sodass Sie der Aufrufliste mehrere Methoden hinzufügen können. <br><br>  Wenn Sie einen Delegattyp benötigen, der keinen Wert zurückgibt, können Sie die System.Action-Typen verwenden.  Sie können auch 0 bis 16 Parameter annehmen, geben jedoch keinen Wert zurück. <br><br>  Hier ist ein Beispiel für die Verwendung des Aktionstyps: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Action&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; mathDelegate = (x,y) =&gt; { Console.WriteLine(x + y); }; mathDelegate(<span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-comment"><span class="hljs-comment">// : 7 mathDelegate = (x, y) =&gt; Console.WriteLine(x - y) ; mathDelegate(5, 2); // : 3 Console.ReadLine(); } }</span></span></code> </pre> <br>  Weitere Informationen zu integrierten .NET-Delegaten finden Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> . <br><br>  Die Dinge werden kompliziert, wenn Ihre Lambda-Funktion beginnt, sich auf Variablen zu beziehen, die außerhalb des Lambda-Ausdrucks deklariert sind, oder auf diese.  Wenn ein Steuerelement den Bereich einer Variablen verlässt, wird die Variable normalerweise ungültig.  Was aber, wenn der Delegat auf eine lokale Variable verweist?  Um dies zu beheben, generiert der Compiler Code, der die Lebensdauer der erfassten Variablen verlängert, mindestens solange der langlebigste Delegat lebt.  Dies wird als Schließung bezeichnet. <br><br>  Hier erfahren Sie mehr über Schließungen. <br><br><h3>  Ereignisse in C # </h3><br>  Betrachten Sie ein beliebtes Entwicklungsmuster - Publisher-Abonnent (Pub / Sub).  Sie können ein Ereignis abonnieren und werden benachrichtigt, wenn der Ereignisverleger ein neues Ereignis initiiert.  Dieses System wird verwendet, um eine schwache Kommunikation zwischen Komponenten in einer Anwendung herzustellen. <br><br>  Der Delegat bildet die Basis für das Ereignissystem in C #. <br><br>  Eine Veranstaltung ist eine spezielle Art von Delegierten, die eine ereignisorientierte Programmierung ermöglicht.  Ereignisse sind Mitglieder einer Klasse, die unabhängig vom Zugriffsspezifizierer nicht außerhalb der Klasse aufgerufen werden können.  So würde beispielsweise ein als öffentlich deklariertes Ereignis anderen Klassen erlauben, + = und - = für dieses Ereignis zu verwenden, aber das Auslösen eines Ereignisses (dh das Aufrufen eines Delegaten) ist nur in der Klasse zulässig, die das Ereignis enthält.  Schauen wir uns ein Beispiel an: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">// -  Pub public class Pub { // OnChange    callback-  public event Action OnChange = delegate { }; public void Raise() { // OnChange OnChange(); } }</span></span></code> </pre> <br>  Anschließend kann eine Methode in einer anderen Klasse das Ereignis abonnieren, indem dem Ereignisdelegaten eine ihrer Methoden hinzugefügt wird: <br><br>  Das folgende Beispiel zeigt, wie eine Klasse einen offenen Delegaten bereitstellen und ein Ereignis generieren kann. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Program</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//   pub Pub p = new Pub(); //  Subscriber 1   OnChange p.OnChange += () =&gt; Console.WriteLine("Subscriber 1!"); //  Subscriber 2   OnChange p.OnChange += () =&gt; Console.WriteLine("Subscriber 2!"); //  p.Raise(); //   Raise()   callback-     Console.WriteLine("Press enter to terminate!"); Console.ReadLine(); } }</span></span></code> </pre> <br>  Selbst wenn das Ereignis als <code>public</code> deklariert ist, kann es nur in der Klasse, in der es sich befindet, direkt ausgelöst werden. <br><br>  Mit dem Schlüsselwort <code>event</code> schützt der Compiler unser Feld vor unerwünschtem Zugriff. <br><br>  Und auch, <br><br>  Die Verwendung von = (direkte Delegatenzuweisung) ist nicht zulässig.  Daher ist Ihr Code jetzt vor dem Risiko geschützt, frühere Abonnenten durch Verwendung von = anstelle von + = zu löschen. <br><br>  Darüber hinaus stellen Sie möglicherweise die spezielle OnChange-Feldinitialisierungssyntax für einen leeren Delegaten fest, z. B. <code>delegate { }</code> .  Dies stellt sicher, dass unser OnChange-Feld niemals null ist.  Daher können wir die Nullprüfung vor dem Aufrufen des Ereignisses entfernen, wenn keine anderen Klassenmitglieder es auf Null setzen. <br><br>  Wenn Sie das obige Programm ausführen, erstellt Ihr Code eine neue Instanz von Pub, abonniert das Ereignis auf zwei verschiedene Arten und generiert ein Ereignis durch Aufrufen von p.Raise.  Die Pub-Klasse kennt keinen der Abonnenten.  Es wird nur ein Ereignis generiert. <br><br>  Sie können auch meinen Artikel <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">C # Publisher-Subscriber Design Pattern</a> lesen <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">,</a> um ein tieferes Verständnis dieses Konzepts zu erhalten. <br><br>  Nun, das ist alles für jetzt.  Ich hoffe du kommst auf die Idee.  Vielen Dank für das Lesen des Beitrags.  Bitte lassen Sie mich in den Kommentaren unten wissen, ob Fehler oder Änderungen erforderlich sind.  Vielen Dank im Voraus! <br><br><h3>  Nützliche Links </h3><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">www.c-sharpcorner.com/blogs/c-sharp-generic-delegates-func-action-and-predicate</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/covariance-contravariance</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=https://web.archive.org/web/20150707082707/">https://web.archive.org/web/20150707082707/http://diditwith.net/PermaLink,guid,235646ae-3476-4893-899d-105e4d48c25b.aspx</a> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de472094/">https://habr.com/ru/post/de472094/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de472078/index.html">Offene Bankrisiken</a></li>
<li><a href="../de472084/index.html">Sicherheitslücken bei Smartphones</a></li>
<li><a href="../de472086/index.html">Verwendung der Gesetze der Gestaltpsychologie beim Design von Benutzeroberflächen</a></li>
<li><a href="../de472088/index.html">Wie wir uns für ServiceDesk entschieden haben. Teil 2</a></li>
<li><a href="../de472092/index.html">Unsichere PHP-Funktionen</a></li>
<li><a href="../de472096/index.html">Android Clicker abonniert Benutzer für kostenpflichtige Dienste</a></li>
<li><a href="../de472100/index.html">Shchyry Ukrainian Dunno oder How Kiev nicht erraten</a></li>
<li><a href="../de472104/index.html">Habr Weekly # 23 / Microsoft fliegt in Raum und Geist und begräbt Windows Phone, Matrix Legacy und Papierspiele</a></li>
<li><a href="../de472106/index.html">MacBook Pro 2018 T2 für die Verwendung mit ArchLinux (Dualboot)</a></li>
<li><a href="../de472110/index.html">Wir bestehen die Herausforderung RegexPlay zu 100%</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>