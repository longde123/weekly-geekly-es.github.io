<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ™‹ğŸ» ğŸ˜§ ğŸ» Kami menulis "Halo, dunia!" Aplikasi web Haskell (Spock) ğŸ‘©â€ğŸ‘§â€ğŸ‘§ ğŸ¤µğŸ¿ ğŸ›«</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Saya bosan menulis dengan Python, saya menginginkan sesuatu yang tidak biasa. Saya memutuskan untuk mencoba Haskell. Saya tidak tahu bahasa, tetapi sa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Kami menulis "Halo, dunia!" Aplikasi web Haskell (Spock)</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/449628/"><p> Saya bosan menulis dengan Python, saya menginginkan sesuatu yang tidak biasa.  Saya memutuskan untuk mencoba Haskell.  Saya tidak tahu bahasa, tetapi saya tidak ingin menulis program pelatihan konsol, seperti menghitung faktorial.  Setelah mempelajari sejumlah besar posting tentang Haskell dan penerapannya dalam kehidupan nyata, saya menyadari bahwa salah satu poin potensial dari pertumbuhan popularitas bahasa adalah menulis aplikasi web.  Anehnya, ada beberapa <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">kerangka kerja web di</a> bawah Haskell.  Pilihan saya jatuh pada <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Spock</a> , karena, dilihat dari deskripsi, itu adalah kerangka kerja yang sederhana dan cepat untuk dikembangkan.  Saya memiliki beberapa pengalaman menulis aplikasi web di Flask, jadi saya pikir akan menarik untuk membandingkan pendekatan berbeda untuk memecahkan masalah yang sama.  Dalam artikel ini, saya akan mencoba memberikan cara saya coba-coba yang paling terperinci dalam studi Haskell menggunakan contoh penulisan aplikasi web Spock paling sederhana.  Mungkin ini akan berguna bagi mereka yang ragu apakah akan mencoba mempelajari Haskell dan apakah itu akan berguna dalam kehidupan nyata. </p><a name="habracut"></a><br><h2 id="nemnogo-pro-haskell-i-kak-ego-gotovit">  Sedikit tentang Haskell dan cara memasaknya </h2><br><p>  Hal pertama yang dihadapi setiap pengembang saat mempelajari bahasa baru adalah memilih dan mengatur lingkungan pengembangan.  Tentu saja, Anda dapat menulis di buku catatan, tetapi jika Anda memiliki setidaknya beberapa pengalaman dalam mengembangkan proyek produksi, metode ini akan membuat Anda kesal.  Ngomong-ngomong, Haskell cukup tua dan bahasa umum dan memiliki <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">dukungan</a> untuk editor dan ide paling terkenal.  Teman saya Haskellist menggunakan emacs.  Saya sudah terbiasa dengan IDE normal, jadi saya menginstal plugin untuk IntelliJ. </p><br><p>  Juga, untuk pengembangan, Anda perlu <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tumpukan</a> , yang sekarang menjadi standar dan menggabungkan kompiler, sistem manajemen paket, sistem pembangunan dan pengujian. </p><br><p>  Semuanya terlihat cukup ramah, tidak ada masalah dengan instalasi.  Untuk pengembangan, saya menggunakan Mac OS, saya belum mengujinya pada sistem lain, tapi saya curiga bahwa di Linux semuanya akan mulai tanpa masalah juga. </p><br><h2 id="hello-world">  Halo dunia! </h2><br><h3 id="podgotovka">  Persiapan </h3><br><p> Kami pergi ke <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">tutorial</a> dan mencoba melakukan semuanya sesuai dengan instruksi.  Di sana mereka menyarankan terlebih dahulu membuat proyek standar melalui stack: <code>stack new MyLovelyProlect</code> .  Proyek standar adalah folder dengan tiga subfolder: <code>app</code> , <code>src</code> , <code>test</code> .  Ini terlihat cukup logis: satu folder untuk aplikasi utama, satu untuk fungsi tambahan, yang ketiga untuk pengujian.  Karena kami menulis "Halo, dunia!", Kami tidak memerlukan <code>src</code> dan folder <code>test</code> , tetapi kami tidak perlu menghapusnya, karena jika tidak kami harus membersihkan file lain dengan hati-hati, misalnya, <code>HelloWorld.cabal</code> . </p><br><h3 id="sobstvenno-kod">  Sebenarnya kodenya </h3><br><p>  Selanjutnya dalam tutorial ini diusulkan untuk menyalin beberapa kode ke <code>Main.hs</code>  Kami akan menyederhanakannya sedikit lebih untuk membandingkan dengan apa yang ditawarkan flask. </p><br><pre> <code class="haskell hljs"><span class="hljs-meta"><span class="hljs-meta">{-# LANGUAGE OverloadedStrings #-}</span></span> <span class="hljs-keyword"><span class="hljs-keyword">module</span></span> Main <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Web.Spock <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Web.Spock.Config app :: SpockM () () () () app = get root $ text "Hello World!" main :: IO () main = do cfg &lt;- defaultSpockCfg () PCNoDatabase () let mw = spock cfg app runSpock 8080 mw</code> </pre> <br><p>  Sebagai perbandingan, saya akan memberikan kode yang sama dalam labu: </p><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> flask <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Flask app = Flask(__name__) @app.route(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hello</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"Hello World!"</span></span> app.run()</code> </pre> <br><p>  Dengan jumlah baris, labu masih menang: 8 berbanding 13. Tetapi mengingat Haskell adalah bahasa yang diketik secara statis dan 2 baris menempati penentuan jenis, perbedaannya, menurut saya, kecil.  Setidaknya kode di atas tidak membuat saya takut belajar lebih lanjut bahasa. </p><br><h3 id="sborka-i-zapusk">  Perakitan dan peluncuran </h3><br><p>  Selanjutnya, pergi ke <code>HelloWorld.cabal</code> dan tambahkan <code>executable HelloWorld-exe</code> ke bagian <code>build-depends:</code> line <code>Spock &gt;=0.13</code> .  Dalam tutorial di situs ini, diusulkan untuk menyertakan 2 dependensi lagi, tetapi untuk tujuan saya mereka belum diperlukan.  Jika sekarang kita mencoba membangun aplikasi menggunakan <code>stack build --fast --pedantic</code> , kita mendapatkan kesalahan berikut: </p><br><pre> <code class="plaintext hljs">Error: While constructing the build plan, the following exceptions were encountered: In the dependencies for HelloWorld-0.1.0.0: Spock must match &gt;=0.13, but the stack configuration has no specified version (latest matching version is 0.13.0.0) needed since HelloWorld is a build target. Some different approaches to resolving this: * Consider trying 'stack solver', which uses the cabal-install solver to attempt to find some working build configuration. This can be convenient when dealing with many complicated constraint errors, but results may be unpredictable. * Recommended action: try adding the following to your extra-deps in /Users/dkvasov/Documents/Haskell/Spock/HelloWorld/stack.yaml: Spock-0.13.0.0@sha256:8115862eb4fb84a26fb7bcd34f30acf036bd2e7c4eaf813c185c5562d138bba2 Plan construction failed.</code> </pre> <br><p>  Cukup jelas: stack tidak tahu versi Spock mana yang perlu diinstal, jadi itu perlu ditulis dalam file <code>stack.yaml</code> .  Tambahkan <code>extra-deps</code> dan coba untuk membangun lagi.  Ada beberapa kesalahan serupa lainnya akan muncul, dan sebagai hasilnya, di file <code>stack.yaml</code> , saya mendapatkan yang berikut: </p><br><pre> <code class="plaintext hljs">extra-deps: - Spock-0.13.0.0 - Spock-core-0.13.0.0 - reroute-0.5.0.0 - stm-containers-0.2.16 - focus-0.1.5.2</code> </pre> <br><p>  Setelah itu, semuanya berkumpul.  Artefak koleksi saya ada di <code>.stack-work/dist/x86_64-osx/Cabal-2.4.0.1/build</code> . </p><br><p>  Semuanya dimulai dengan perintah <code>stack exec HelloWorld-exe</code> , dan di <code>localhost:8080</code> saya melihat sambutan "Hello, world!".  Tidak perlu menari dengan rebana. </p><br><h3 id="probuem-razobratsya-chto-voobsche-proishodit">  Kami mencoba mencari tahu apa yang sedang terjadi. </h3><br><p>  Sejauh ini, kami belum menggunakan pengetahuan khusus tentang pemrograman fungsional (FP) dan bahasa Haskell.  Kami menggunakan akal sehat dan pengetahuan tentang dasar-dasar pembangunan.  Anda tidak bisa melakukan itu lebih jauh.  Untuk pemahaman lebih lanjut, kita perlu mengetahui beberapa hal tentang AF.  AF bukan antipode OOP.  Mereka yang akrab dengan bahasa Scala tahu bahwa kedua konsep ini hidup berdampingan dengan mudah.  Antipode FP adalah pemrograman imperatif.  Sementara model fungsional perhitungan bergantung pada komposisi fungsi, model imperatif bergantung pada proses perubahan berturut-turut di negara bagian sistem.  Oleh karena itu, dalam bahasa yang murni fungsional seperti Haskell, diasumsikan bahwa fungsinya "murni", yaitu, mereka tidak mengandung keadaan yang dapat berubah dan "efek samping", selain nilai pengembalian.  Ini membuatnya mudah untuk membangun komposisi fitur.  Sebenarnya, persyaratan "kemurnian" memberlakukan banyak pembatasan pada penggunaan bahasa fungsional di dunia nyata.  Namun, karena ada aplikasi produksi di Haskell, maka Anda masih dapat menggunakan fungsi murni di dunia nyata.  Mari kita lihat lebih dekat <code>Main.hs</code> </p><br><p>  Seperti yang saya mengerti, aplikasi <code>app</code> adalah variabel dari tipe <code>SpockM</code> , yang merupakan <em>monad</em> .  Kemungkinan besar, jika Anda tidak terbiasa dengan gaya fungsional pemrograman dan teori kategori, Anda tidak akan mengerti pertama kali apa itu dan mengapa Anda membutuhkannya.  Namun, perlu untuk menangani ini setidaknya pada tingkat dasar, karena monad adalah dasar untuk penerapan bahasa Haskell.  Ada beberapa artikel dengan berbagai tingkat detail mengenai hal ini, termasuk tentang HabrÃ©.  Tentu saja, saya tidak akan membawa mereka ke sini.  Sejauh ini, saya mengusulkan untuk mempertimbangkan bahwa monad adalah sihir yang memungkinkan Anda menghasilkan apa yang disebut efek samping.  Ada monad lain dalam aplikasi kita: <code>IO</code> .  Efek sampingnya adalah input / output data. </p><br><p>  SpockM diparameterisasi oleh empat tipe lainnya.  Mereka sesuai dengan koneksi basis data, sesi, negara, dan nilai kembali.  Untuk aplikasi kosong, semua ini tidak diperlukan, jadi kami akan selalu menggunakan type <code>()</code> , yang disebut Unit.  Di dalam <code>app</code> kami mengikat jalur ke tindakan.  Dalam hal ini, kami menentukan jalur dasar <code>/</code> dan tindakan <code>   "Hello, world!  get-</code> . </p><br><p>  Selanjutnya, kita membuat konfigurasi default dan menetapkannya ke <code>cfg</code> .  Selanjutnya, menggunakan fungsi <code>spock</code> buat middleware untuk aplikasi dan cfg dan transfer ke <code>runSpock</code> bersama dengan port peluncuran yang diinginkan. </p><br><h3 id="zaklyuchenie">  Kesimpulan </h3><br><p>  Jelas bahwa semua yang dijelaskan di sini sangat sederhana, dan setiap orang yang berbicara bahasa Inggris dan dilengkapi dengan otak akan dapat melakukan hal yang sama dengan melihat tutorial awal spock.  Artikel ini lebih tentang bagaimana saya berkenalan dengan bahasa Haskell.  Apa selanjutnya  Lebih lanjut, hampir semua sumber belajar menyarankan untuk menggunakan status dan menulis aplikasi todo, lalu menghubungkan database, lalu ... Mungkin di masa depan saya akan menulis sekuel. </p><br><h2 id="ssylki">  Referensi </h2><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Aplikasi Web Pertama Anda dengan Spock</a> adalah video yang cukup terperinci dalam bahasa Inggris dengan parsing Hello World yang serupa. </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id449628/">https://habr.com/ru/post/id449628/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id449616/index.html">Wawancara fibonacci</a></li>
<li><a href="../id449618/index.html">Masa depan ada di awan</a></li>
<li><a href="../id449622/index.html">Kustomisasi: sesuaikan telepon Snom Anda</a></li>
<li><a href="../id449624/index.html">Bagaimana dan mengapa membaca lembar data, jika mikrokontroler adalah hobi Anda</a></li>
<li><a href="../id449626/index.html">Penegakan Kognitif: Sesi Ilusi Paparan Penuh</a></li>
<li><a href="../id449630/index.html">"Mereka menyarankan untuk berkenalan dengan perhitungan satu indikator, dan ada dua lembar dengan integral dan turunan kedua"</a></li>
<li><a href="../id449632/index.html">AMA dengan Habr. V.8.0. Onboarding, berita untuk semua orang, PWA</a></li>
<li><a href="../id449634/index.html">Saya suka IOT</a></li>
<li><a href="../id449636/index.html">Bagaimana menghindari gigitan serangga berciuman</a></li>
<li><a href="../id449640/index.html">Desain video game: Anda perlu memahami bahwa Anda mewarisi</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>