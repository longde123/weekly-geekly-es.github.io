<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🧑🏾‍🤝‍🧑🏼 ✒️ ⚖️ WeakRef - Vorschlag zur Ergänzung des ECMAScript-Standards 🦓 👩🏻‍💼 👨‍👧‍👦</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Er schrieb einen kleinen Beitrag in seinem Telegrammkanal. Ich dachte, dass es für die Leser von Habr von Interesse sein könnte. 


 Kürzlich erschien...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>WeakRef - Vorschlag zur Ergänzung des ECMAScript-Standards</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/460297/"><p>  <i>Er schrieb einen kleinen Beitrag in seinem Telegrammkanal.</i>  <i>Ich dachte, dass es für die Leser von Habr von Interesse sein könnte.</i> </p><br><p>  Kürzlich erschien im V8-Blog ein Artikel über das neue WeakRef (Stage 3) -Prozal - "Schwache Referenzen und Finalisierer". </p><br><p> Ich werde versuchen, sein Wesen anhand meiner eigenen Worte anhand eines Beispiels zu erklären.  Stellen Sie sich vor, Sie haben eine Art Bildverarbeitung in Ihrem Browser, zum Beispiel wird ein Wasserzeichen auf sie angewendet (ich stimme zu, das Beispiel ist nicht sehr realistisch), und dann werden diese Bilder irgendwie verwendet.  Das Wasserzeichen wird von einer Funktion überlagert, die die CPU intensiv verbraucht.  Bilder können wiederholt werden. Um den Prozessor nicht erneut zu laden, erstellen wir einen Cache mit Bildern mit einem Wasserzeichen in <code>Map</code> . Der Name der Bilddatei ist der Schlüssel.  Hier tritt jedoch ein Problem auf, wenn ein Bild von uns nicht verwendet wird, es sich dennoch im Speicher befindet, da die <code>Map</code> den Schlüssel dazu enthält (starker Bezug).  Damit unsere <code>Map</code> nicht zu viel Speicherplatz verbraucht, müssen Sie solche Situationen irgendwie ermitteln und den Cache mit Ihren Händen bereinigen.  Dies ist nicht sehr praktisch. </p><a name="habracut"></a><br><p>  Hier kommt WeakRef zur Rettung.  Mit WeakRef können Sie ein schwaches Glied zu einem Bild erstellen und es anstelle des Bildes selbst per Schlüssel schreiben: </p><br><pre> <code class="plaintext hljs">const wr = new WeakRef(image); cache.set(name, wr); //    const ref = cache.get(name); const image = ref.deref();</code> </pre> <br><p>  In diesem Fall kann der Garbage Collector unabhängig voneinander Situationen ermitteln, in denen das Bild im Cache nicht mehr benötigt wird, und den Speicher löschen.  Um Schlüssel aus Map im Vorschlag zu löschen, wird vorgeschlagen, die zusätzliche FinalizationGroup-API zu verwenden. </p><br><p>  Eine interessante Tatsache.  Ganz am Anfang des Artikels geben wir einen kleinen Überblick über die WeakMap und WeakSet, die bereits im Standard enthalten sind.  Es stellt sich heraus, dass der formalste Name für die in WeakMap verwendete Beziehung Ephemeron ist. </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">https://v8.dev/features/weak-references</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de460297/">https://habr.com/ru/post/de460297/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de460283/index.html">Neue Do-it-yourself-Programmiersprache</a></li>
<li><a href="../de460285/index.html">Wir bereiten PHP vor. Wie sind while, foreach, array_walk und einige andere beängstigende Wörter</a></li>
<li><a href="../de460287/index.html">Runet News Visualisierung</a></li>
<li><a href="../de460291/index.html">Probleme der Stapelverarbeitung von Anfragen und deren Lösungen (Teil 1)</a></li>
<li><a href="../de460295/index.html">Was bedeutet unsicher in Rust?</a></li>
<li><a href="../de460301/index.html">Hochleistungs-LED-Lampen der neuen Generation</a></li>
<li><a href="../de460305/index.html">AERODISK Motor: Katastrophal. Teil 2. Metrocluster</a></li>
<li><a href="../de460307/index.html">Modellierungserfahrung vom Computer Vision Mail.ru-Team</a></li>
<li><a href="../de460311/index.html">Zeit für eine neue Geldtheorie</a></li>
<li><a href="../de460313/index.html">Haben verschiedene Hits etwas gemeinsam?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>