<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>➗ 🚑 ⛹🏾 如何使用Jenkins构建和滚动存储库中表的元数据模型工件的工件 😎 🦂 🍈</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="一切始于这样一个事实，即我们面临着快速，正确地形成EDWEX，JSON，DDL结构，然后将它们滚动到关系数据库的不同轮廓上的需求。 轮廓是指大家都知道的缩写-DEV，TST，UAT，PRD。 



 当时，我们几乎手动完成了所有工作：我们生成了DDL，并基于Oracle数据库中的元数据收集了edw...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>如何使用Jenkins构建和滚动存储库中表的元数据模型工件的工件</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rostelecom/blog/428101/"> 一切始于这样一个事实，即我们面临着快速，正确地形成EDWEX，JSON，DDL结构，然后将它们滚动到关系数据库的不同轮廓上的需求。 轮廓是指大家都知道的缩写-DEV，TST，UAT，PRD。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/169/a9a/387/169a9a387c429ecc2c76fa39abb3527f.jpg"><br><br> 当时，我们几乎手动完成了所有工作：我们生成了DDL，并基于Oracle数据库中的元数据收集了edwex和json。 输入参数很多。 如果您错过一个，您将错误地形成一个实体。 而且由于整个形成过程是一致且连续的，因此错误只会在最后发现。 关于我们所有人如何自动化并克服错误，请仔细阅读。 <br><a name="habracut"></a><br><h2> 关于基础架构的一些知识 </h2><br> 在将数据填充到关系数据库表中之前，我们需要从源接受它们-以任何格式，例如在Excel中。 使用内部机制将来自源的数据传输到Hadoop（Data Lake）。  Hive已安装了Hive插件-借助它的帮助，我们可以使用类似SQL的语法查看文件的内容。 <br><br> 为了以表格的形式在Data Lake中传输数据，我们需要基于元数据形成的json。 要以Excel格式解析数据，我们需要创建EDWEX文件。  EDWEX（EDW_EXTRACTOR）文件是一组工件，其中包含具有名称的表集以及每个表的字段集，这些表集是基于元数据形成的。 根据模型版本和源ID，字段集会有所不同。  DDL的形成对于在Hive数据库中的操作数据级别和Greenplum数据库中的详细和汇总数据级别创建表本身是必要的。 也就是说，数据主要传输到Hive，必要时进行过滤并传输到Greenplum，以进行后续数据操作并基于该数据创建店面。 <br><br><div class="spoiler">  <b class="spoiler_title">Edwex工件示例</b> <div class="spoiler_text"> 包-包含一组表 <br> 数据-包含一组字段 <br><br>  pack.edwex： <br><br><pre><code class="sql hljs">1 Table_1 User Table_1 bid between to_char($fromdt,'yyyymm') and to_char($actualdt,'yyyymm') 2 Table_2 User Table_2 curbid between to_char($fromdt,'yyyymm') and to_char($actualdt,'yyyymm') 3 Table_3 User Table_3 bid between to_char($fromdt,'yyyymm') and to_char($actualdt,'yyyymm')</code> </pre> <br><br>  data.edwex： <br><br><pre> <code class="sql hljs">1 1 CHARGE_ID NUMBER 38 0 1 2 SVC_ID NUMBER 38 0 1 3 VND_ID NUMBER 38 0 1 4 PRICE NUMBER 38 5 1 5 QUANTITY NUMBER 38 5 1 6 BASE NUMBER 38 5 1 7 TAX NUMBER 38 5 1 8 TOTAL NUMBER 38 5 1 9 TAX_RATE NUMBER 38 5 1 10 TAX_IN VARCHAR 1 1 11 CHARGE_KIND VARCHAR 3 1 12 PRIVILEGE_ID NUMBER 38 0 1 13 CHARGE_REF_ID NUMBER 38 0 1 14 EBID NUMBER 38 0 1 15 INVOICE_ID NUMBER 38 0 1 16 ZERO_STATE_ID NUMBER 38 0 1 17 USER_ID NUMBER 38 0 1 18 BID NUMBER 38 0 1 19 QUANTITY_REAL NUMBER 38 5 2 1 CURBID NUMBER 38 0 2 2 USER_ID NUMBER 38 0 2 3 VND_ID NUMBER 38 0 2 4 APPBID NUMBER 38 0 2 5 SVC_ID NUMBER 38 0 2 6 DEBT NUMBER 38 5 2 7 INSTDEBT NUMBER 38 5 3 1 INVOICE_ID NUMBER 38 0 3 2 INVOICE_DATE DATE 3 3 INVOICE_NUM VARCHAR 64 3 4 INVOICE_NUM_N NUMBER 38 5 3 5 BASE NUMBER 38 5 3 6 TAX NUMBER 38 5 3 7 TOTAL NUMBER 38 5 3 8 PREPAID VARCHAR 1 3 9 EXPLICIT VARCHAR 1 3 10 VND_ID NUMBER 38 0 3 11 ADV_PAYMENT_ID NUMBER 38 0 3 12 MDBID NUMBER 38 0 3 13 BID NUMBER 38 0 3 14 USER_ID NUMBER 38 0 3 15 ZERO_STATE_ID NUMBER 38 0 3 16 ACTIVE_SUM NUMBER 38 5 3 17 SPLIT_VND NUMBER 38 5 3 18 PRECREATED VARCHAR 1</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Json神器示例</b> <div class="spoiler_text"><pre> <code class="java hljs">Table.json: { <span class="hljs-string"><span class="hljs-string">"metadata"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"1"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"charge_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"true"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"2"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"svc_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"3"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"vnd_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"4"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"price"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"5"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"quantity"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"6"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"base"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"7"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"tax"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"8"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"total"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"9"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"tax_rate"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"10"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"tax_in"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"11"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"charge_kind"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"STRING"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"12"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"privilege_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"13"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"charge_ref_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"14"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"ebid"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"15"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"invoice_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"16"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"zero_state_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"17"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"user_id"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"18"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"bid"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> }, { <span class="hljs-string"><span class="hljs-string">"colOrder"</span></span>:<span class="hljs-string"><span class="hljs-string">"19"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>:<span class="hljs-string"><span class="hljs-string">"quantity_real"</span></span>, <span class="hljs-string"><span class="hljs-string">"dataType"</span></span>:<span class="hljs-string"><span class="hljs-string">"DECIMAL"</span></span>, <span class="hljs-string"><span class="hljs-string">"precision"</span></span>:<span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"requied"</span></span>:<span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"keyFile"</span></span>:<span class="hljs-string"><span class="hljs-string">""</span></span> } ], <span class="hljs-string"><span class="hljs-string">"ctlPath"</span></span>:<span class="hljs-string"><span class="hljs-string">"  ctl"</span></span>, <span class="hljs-string"><span class="hljs-string">"errPath"</span></span>:<span class="hljs-string"><span class="hljs-string">"    "</span></span>, <span class="hljs-string"><span class="hljs-string">"inPath"</span></span>:<span class="hljs-string"><span class="hljs-string">"    hdfs"</span></span>, <span class="hljs-string"><span class="hljs-string">"outSchema"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"outTable"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"isPartitioned"</span></span>:<span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">"sourceId"</span></span>:<span class="hljs-string"><span class="hljs-string">"id  "</span></span> }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">示例DDL工件</b> <div class="spoiler_text">  GP_000001_TABLE重命名为Z_GP_000001_TABLE_20180807; <br> 创建表方案。GP_000001_TABLE <br>  （ <br><br>  `charge_id` DECIMAL（38.0）， <br>  svc_id DECIMAL（38.0）， <br>  `vnd_id` DECIMAL（38.0）， <br> 价格DECIMAL（38.5）， <br> 数量DECIMAL（38.5）， <br>  `base` DECIMAL（38.5）， <br>  `tax`十进制（38.5）， <br> 总十进制（38.5）， <br>  `tax_rate` DECIMAL（38.5）， <br>  `tax_in` STRING， <br>  `charge_kind` STRING， <br>  `privilege_id` DECIMAL（38.0）， <br>  `charge_ref_id`十进制（38.0）， <br>  `ebid` DECIMAL（38.0）， <br>  `invoice_id` DECIMAL（38.0）， <br>  `zero_state_id` DECIMAL（38,0）， <br>  `user_id` DECIMAL（38.0）， <br>  `bid` DECIMAL（38.0）， <br>  `quantity_real` DECIMAL（38.5）， <br>  `load_dttm` TIMESTAMP， <br>  `src_id` SMALLINT， <br>  `package_id` BIGINT， <br>  wf_run_id BIGINT， <br>  `md5` STRING <br>  ） <br> 行格式以'\ t'终止的字段 <br> 存储为INPUTFORMAT'org.apache.hadoop.mapred.TextInputFormat'OUTPUTFORMAT'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' <br> 位置“在HDFS中形成的方式” <br>  TBLPROPERTIES（'auto.purge'='true'，'transient_lastDlastDdlTime'='1489060201'）; <br> 插入scheme.GP_000001_TABLE（`charge_id`， <br>  `svc_id`， <br>  `vnd_id`， <br> 价格， <br> 数量 <br>  `base`， <br>  `税`， <br> 总计， <br>  `tax_rate`， <br>  `tax_in`， <br>  `charge_kind`， <br>  `privilege_id`， <br>  `charge_ref_id`， <br>  `ebid`， <br>  `invoice_id`， <br>  `zero_state_id`， <br>  `user_id`， <br> 竞标 <br>  `quantity_real`， <br>  `load_dttm`， <br>  `src_id`， <br>  package_id <br>  `wf_run_id`， <br>  md5） <br><br> 选择“ charge_id”， <br>  `svc_id`， <br>  `vnd_id`， <br> 价格， <br> 数量 <br>  `base`， <br>  `税`， <br> 总计， <br>  `tax_rate`， <br>  `tax_in`， <br>  `charge_kind`， <br>  `privilege_id`， <br>  `charge_ref_id`， <br>  `ebid`， <br>  `invoice_id`， <br>  `zero_state_id`， <br>  `user_id`， <br> 竞标 <br>  `quantity_real`， <br>  load_dttm， <br>  src_id <br>  package_id， <br>  wf_run_id， <br> 来自scheme.Z_GP_000001_TABLE_20180807的md5； <br><br>  GP_000001_TABLE重命名为Z_GP_000001_TABLE_20180807; <br> 创建表方案。GP_000001_TABLE <br>  （ <br><br>  `charge_id` DECIMAL（38.0）， <br>  svc_id DECIMAL（38.0）， <br>  `vnd_id` DECIMAL（38.0）， <br> 价格DECIMAL（38.5）， <br> 数量DECIMAL（38.5）， <br>  `base` DECIMAL（38.5）， <br>  `tax`十进制（38.5）， <br> 总十进制（38.5）， <br>  `tax_rate` DECIMAL（38.5）， <br>  `tax_in` STRING， <br>  `charge_kind` STRING， <br>  `privilege_id` DECIMAL（38.0）， <br>  `charge_ref_id`十进制（38.0）， <br>  `ebid` DECIMAL（38.0）， <br>  `invoice_id` DECIMAL（38.0）， <br>  `zero_state_id` DECIMAL（38,0）， <br>  `user_id` DECIMAL（38.0）， <br>  `bid` DECIMAL（38.0）， <br>  `quantity_real` DECIMAL（38.5）， <br>  `load_dttm` TIMESTAMP， <br>  `src_id` SMALLINT， <br>  `package_id` BIGINT， <br>  wf_run_id BIGINT， <br>  `md5` STRING <br>  ） <br> 行格式以'\ t'终止的字段 <br> 存储为INPUTFORMAT'org.apache.hadoop.mapred.TextInputFormat'OUTPUTFORMAT'org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat' <br> 位置“在HDFS中形成的方式” <br>  TBLPROPERTIES（'auto.purge'='true'，'transient_lastDlastDdlTime'='1489060201'）; <br> 插入scheme.GP_000001_CPA_CHARGE（`charge_id`， <br>  `svc_id`， <br>  `vnd_id`， <br> 价格， <br> 数量 <br>  `base`， <br>  `税`， <br> 总计， <br>  `tax_rate`， <br>  `tax_in`， <br>  `charge_kind`， <br>  `privilege_id`， <br>  `charge_ref_id`， <br>  `ebid`， <br>  `invoice_id`， <br>  `zero_state_id`， <br>  `user_id`， <br> 竞标 <br>  `quantity_real`， <br>  `load_dttm`， <br>  `src_id`， <br>  package_id <br>  `wf_run_id`， <br>  md5） <br><br> 选择“ charge_id”， <br>  `svc_id`， <br>  `vnd_id`， <br> 价格， <br> 数量 <br>  `base`， <br>  `税`， <br> 总计， <br>  `tax_rate`， <br>  `tax_in`， <br>  `charge_kind`， <br>  `privilege_id`， <br>  `charge_ref_id`， <br>  `ebid`， <br>  `invoice_id`， <br>  `zero_state_id`， <br>  `user_id`， <br> 竞标 <br>  `quantity_real`， <br>  load_dttm， <br>  src_id <br>  package_id， <br>  wf_run_id， <br> 来自scheme.Z_GP_000001_TABLE_20180807的md5； <br></div></div><br><h2> 如何自动化 </h2><br> 为了解决这个问题，我们使用了： <br><br><ul><li>  Jenkins-作为实施CI流程的乐队和工具。 <br></li><li>  Python-它实现功能和单元测试。 <br></li><li>  SQL-访问元数据数据库。 <br></li><li>  Shell脚本-用于在目录之间复制工件并在Jenkins服务器上运行的多作业项目中创建脚本。 <br></li></ul><br> 首先，我们最初使用大量源，因此，使用Shell脚本作为开始参数，我们将源ID传递给SQL函数以标识它们。 生成的SQL函数随后将在元数据数据库中自动执行。 根据可用的元数据，这些函数形成一个文件，其中包含每个源表的新SQL函数的列表，以便我们随后可以在可执行程序中对其进行调用。 执行生成的函数的结果是将DDL，JSON或EDWEX值传输到输出参数。 <br><br> 这是Python连接的地方，并编写了所有可执行功能和单元测试。 在使用单元测试启动任何用于滚动工件的模块之前，请检查正确的参数传输以运行python脚本。 测试不仅检查输入参数的正确性，还检查它们在元数据模块中的存在性，创建的文件的大小以及创建日期。 测试还监视创建的新工件的数量和现有工件的数量。 因此，我们优化了服务器资源的使用，因为我们只使用新文件进行滚动，而不会再次重新安装现有模型。 <br><br> 只有成功通过所有检查后，才会执行python程序，该程序创建必要的工件并将结果分解到服务器上的必要项目文件夹中。  Python不仅将生成的json文件定向到目录中，而且将结构形成到Data Lake中，以便正确加载数据。 生成DDL工件时，它们不仅被保存以供以后分析和重复使用，而且还可以使用元数据模块中指定的新模型和结构立即安装在数据库中。 这使您可以在短时间内创建数百个表，而无需进行人工操作。 <br><br><h2> 詹金斯在哪里？ </h2><br> 当需要使用界面直观地管理所有这些过程时，Jenkins进入。 <br><br> 选择该工具的原因是： <br><br><ul><li> 完全满足组装和安装自动化的需求 <br></li><li> 允许您设计一种机制，以通过自检过程的实现来组装工件 <br></li><li> 使您可以轻松地管理工作启动并监视远离编程人员的执行情况 <br></li><li> 允许您配置日志记录机制，以使团队中的任何人都可以理解执行的结果。 组装中的问题将得到明确指示，或者过程将成功完成。 <br></li></ul><br> 为了解决任务，我们创建了几个多任务项目。 之所以使用这种类型的项目，是因为它可以与其他作业同时启动。 每个作业都负责其功能块的实现。 因此，我们用自主并行工件代替了获取工件的顺序过程。 一切都是分开开始的：EDWEX，JSON，DDL的形成，HPE中结构的形成，数据库中表结构的安装。 我们在伪像形成的不同阶段分析结果，如果成功，则着手启动后续操作。 <br><br>  Jenkins部分的实现没有太多技巧。  <b>将String</b>或<b>Run</b>参数发送到输入以启动python代码。  <b>String</b>参数是一个窗口，用于在启动之前输入str类型的值。 可以将<b>运行</b>参数即时转移到另一个作业中执行，因为这足以表明需要从哪个项目中获取接收到的变量。 同样，将节点作为单独的参数传递来执行。 此处仅实现了在DEV，TST，UAT，PRD上划分为运行时的功能。 为了能够跟踪已更改结构的版本，使用了一个单独的作业将接收到的EDWEX文件与修订号一起传输到SVN。 <br><br>  Jenkins中的示例界面： <br><br><img src="https://habrastorage.org/getpro/habr/post_images/00f/250/8c5/00f2508c5c04082a8b753041e471fe14.png"><br><br> 作业执行的结果是必要工件的创建和安装，将它们转移到SVN以及形成HTML报告的结果，该报告显示了通过单元测试的成功以及工件的组装和安装结果。 先前已建立执行链的作业可以手动操作或以自动模式运行。 <br><br><img src="https://habrastorage.org/getpro/habr/post_images/324/549/50f/32454950f7eb0476ca4cc753715c4472.png"><br>  <i>组装和安装机制架构</i> <br><br><h3> 总结一下 </h3><br> 为了自动化工件的形成，已经做了很多工作。 以前，您必须手动爬到服务器上，运行shell脚本，然后长时间动手研究和编辑数据。 现在只需单击开始按钮，指定源系统ID，型号和执行循环。 在詹金斯的帮助下，有可能将工件的整个组装和安装机制进行结构化和分解成独立的阶段。 在开始生成工件及其集成之前，添加了必要的检查。 接收到的工件会自动传输到SVN，从而简化了与系统分析师和数据建模人员的相关团队的合作。 执行检查以避免伪造物形成的空转并确认其正确性。 <br><br> 结果，我们将组装和安装模型工件的耗时过程从几个小时减少到了几分钟。 最重要的是，它们消除了由于人为因素导致的错误的发生，而错误是不可避免地在复杂的常规过程中出现的。 </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN428101/">https://habr.com/ru/post/zh-CN428101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN428089/index.html">10月的“测试者日历”。 反馈：如何发生</a></li>
<li><a href="../zh-CN428091/index.html">实习生如何创建世界上最受欢迎的视频游戏或Windows游戏历史</a></li>
<li><a href="../zh-CN428095/index.html">网络工作室和数字代理商的市场研究</a></li>
<li><a href="../zh-CN428097/index.html">通过DHCP分配的网关在MikroTik中进行递归路由</a></li>
<li><a href="../zh-CN428099/index.html">普通连衣裙和即将到来的5G时代有什么共同点？</a></li>
<li><a href="../zh-CN428103/index.html">圣彼得堡的Mitap：数据工程及更多</a></li>
<li><a href="../zh-CN428105/index.html">Blogger建议：影响营销</a></li>
<li><a href="../zh-CN428107/index.html">Angular 6 SPA模板ASP .NET Core 2.1应用程序的容器化</a></li>
<li><a href="../zh-CN428109/index.html">企业墙</a></li>
<li><a href="../zh-CN428111/index.html">Erlang中任意精度的算术</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>