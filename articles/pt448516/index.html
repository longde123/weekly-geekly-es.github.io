<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üëäüèª üßúüèø üê° Evolua ou crie uma base para rob√¥s na plataforma ARDUINO, e direcionamos sensores e v√≠deo para um computador via smartphone ‚ÄºÔ∏è üï∫üèº üö£</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Para os queridos leitores do GeekTimes, o pr√≥ximo (quarto) artigo aguardado sobre o que acontecer√° se voc√™ misturar novamente o arduino, ESP8266, WI-F...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Evolua ou crie uma base para rob√¥s na plataforma ARDUINO, e direcionamos sensores e v√≠deo para um computador via smartphone</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/448516/"> Para os queridos leitores do GeekTimes, o pr√≥ximo (quarto) artigo <s>aguardado</s> sobre o que acontecer√° se voc√™ misturar novamente o arduino, ESP8266, WI-FI, tempere com um smartphone Android e salpique sobre o aplicativo JAVA. <br><br>  Falaremos sobre os rob√¥s do <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> antes da √∫ltima, que chegou a hora de pelo menos ficar um pouco mais inteligente. <br><br><img src="https://habrastorage.org/webt/dc/uf/us/dcufusp1engi_cqy_pdjltx-qgq.jpeg" alt="imagem"><br><br>  Quem se importa, bem-vindo ao gato. <br><a name="habracut"></a><br>  Se voc√™ n√£o est√° muito interessado em ler artigos antigos, ent√£o brevemente - o ponto era que, para controlar o carrinho de quatro rodas habitual na plataforma Arduino, uma ponte UART sem fio desenvolvida por mim com base no conhecido m√≥dulo ESP8266 foi adicionada a ele.  Tamb√©m por conveni√™ncia (e em geral esse era o objetivo principal) usando o mesmo ESP, escrevi um programador para o arduinki, que permite que voc√™ fa√ßa o flash remotamente. <br><br><img src="https://habrastorage.org/webt/y-/57/pt/y-57pte4rudizc-oitiqraysx7m.png" alt="imagem"><br><br>  Ou seja, o carrinho em algum lugar distante (mas dentro da sua rede WI-FI) viaja (sim, eu gosto de escrever essa palavra), envia dados e recebe comandos e, se necess√°rio, por ordem, tamb√©m pode alterar o programa no microcontrolador AVR.  Consequentemente, o programa em JAVA para o PC foi executado, executando o qual voc√™ pode ter controle e obter telemetria primitiva na forma da dist√¢ncia percorrida (chave reed e √≠m√£ no volante). <br><br><img src="https://habrastorage.org/webt/yf/r_/nk/yfr_nk3y69gts4z4x4ubodhd7cy.png" alt="imagem"><br><br>  Al√©m disso, experimentei com sucesso no pr√≥ximo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> controlar o carrinho usando um smartphone - bot√µes, inclina√ß√µes e at√© voz.  Mas quando o carrinho partiu para a pr√≥xima sala, mesmo a voz n√£o p√¥de devolv√™-lo (ao contr√°rio do gato).  Ela foi at√© l√°, bateu nas paredes e nos m√≥veis, enredou-se nos fios, mas al√©m de informa√ß√µes sobre a dist√¢ncia percorrida, ela n√£o enviou nada. <br><br>  Portanto, surgiu imediatamente a id√©ia de fornecer ao futuro Terminator √≥rg√£os sensoriais.  Uma das op√ß√µes mais f√°ceis para isso √© o uso do sonar. <br><br><img src="https://habrastorage.org/webt/yj/qh/eg/yjqhegrrkudwtrwdx5nr_ppkywo.png" alt="imagem"><br><br>  O algoritmo de trabalho para a desgra√ßa √© simples, iniciamos o sensor de uma frente e, ao mesmo tempo, um contador de microcontrolador.  O HC-SR04 come√ßa a balan√ßar o ultrassom √† dist√¢ncia.  O sinal de resposta do sensor atrav√©s de outro fio sinaliza o final da medi√ß√£o da dist√¢ncia e o intervalo de tempo entre o in√≠cio e a resposta √© proporcional √† dist√¢ncia medida.  Assim, nesse momento desaceleramos o balc√£o e vemos quanto ele entrou. <br><br>  A precis√£o √© obtida at√© cerca de um cent√≠metro e um intervalo de metros a dois.  Ele n√£o gosta de superf√≠cies felpudas e de l√£ (por exemplo, um gato), onde qualquer sinal de eco se afoga irrevogavelmente. <br><br>  <s>A √°rea afetada, o</s> √¢ngulo de vis√£o do HC-SR04, √© pequeno; portanto, para saber o que est√° acontecendo √† frente no √¢mbito de um √¢ngulo de pelo menos 90 graus, √© recomend√°vel fazer o seguinte: <br><br><ol><li>  parafuse o sensor na m√°quina servo e olhe-o em dire√ß√µes diferentes </li><li>  coloque alguns sensores. </li></ol><br>  No in√≠cio, implementei a primeira op√ß√£o, colocando o sonar em um servo barato SG90 e o carrinho se transformou em um ve√≠culo espacial.  Foi necess√°rio tanto tempo para realizar pelo menos tr√™s medi√ß√µes, ent√£o, basicamente, o carrinho ficou rodando com um servo, depois avan√ßou cuidadosamente, mas n√£o muito longe (e de repente um obst√°culo apareceu ao lado), e novamente sentiu o espa√ßo √† sua frente.  Ainda assim, o som n√£o √© a luz para voc√™. <br><br>  Portanto, sem mais delongas, coloquei tr√™s sistemas de sonar ao mesmo tempo.  O carrinho adquiriu uma apar√™ncia de aranha cr√¥nica, parou embotado na frente de obst√°culos e come√ßou a taxi√°-los em movimento.  Mas, no final, os c√©rebros eram suficientes para n√£o ficarem presos em um ambiente amig√°vel.  Tivemos que seguir em frente - para autonomia e progresso.  E aqui, sem sentidos diferentes, at√© o worm nemat√≥ide dir√°, voc√™ n√£o pode faz√™-lo. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/yjUsvUk880o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  Al√©m disso, geralmente os entusiastas come√ßam a esculpir em suas cria√ß√µes v√°rios novos sensores, como girosc√≥pios, aceler√¥metros-magnet√¥metros e at√© sensores FIRE (todos os chineses sem nome produzem em milh√µes de quantidades para o Arduino).  E eu tamb√©m quase comecei por esse caminho escorregadio, mas mudei de id√©ia com o tempo.  E eu fiz isso por esse motivo.  Na perspectiva mais distante, o rob√¥ rob√≥tico deveria ter vis√£o na forma de uma c√¢mera e tamb√©m entender o que v√™.  Mas o microcontrolador AVR da placa Arduino diz adeus a voc√™, mesmo na fase de recebimento do v√≠deo, sem mencionar o processamento.  E de repente meu olhar caiu no velho smartphone GALAXY S7, j√° agredido pela vida. <br><br>  Tal poder de computa√ß√£o, oito n√∫cleos, 4 gigabytes de mem√≥ria, duas c√¢meras, acesso √† rede, o que mais √© necess√°rio para transformar um macaco em uma pessoa? <br><br>  Mas precisamos apenas de um design pequeno para que o smartphone repouse em um carrinho e possa ser facilmente colocado e removido. <br><br><img src="https://habrastorage.org/webt/l6/ej/gf/l6ejgf5jxwlzkqs21pifxg-wtl8.jpeg" alt="imagem"><br><br>  Ent√£o subi no site de desenvolvedores do Android para descobrir quais outros recursos um smartphone comum pode nos dar.  Acabou que n√£o √© pequeno.  Teoricamente voc√™ pode <br><br><div class="spoiler">  <b class="spoiler_title">acesse os seguintes sensores sensores.</b> <div class="spoiler_text">  TYPE_ACCELEROMETER <br><br>  TYPE_AMBIENT_TEMPERATURE <br><br>  TYPE_GAME_ROTATION_VECTOR <br><br>  GEOMAGNETIC_ROTATION_VECTOR <br><br>  TYPE_GRAVITY <br><br>  TYPE_GYROSCOPE <br><br>  TYPE_GYROSCOPE_UNCALIBRATED <br><br>  TYPE_HEART_BEAT <br><br>  TYPE_HEART_RATE <br><br>  TYPE_LIGHT <br><br>  TYPE_LINEAR_ACCELERATION <br><br>  TYPE_LOW_LATENCY_OFFBODY_DETECT <br><br>  TYPE_MAGNETIC_FIELD <br><br>  TYPE_MAGNETIC_FIELD_UNCALIBRATED <br><br>  TYPE_MOTION_DETECT <br><br>  TYPE_ORIENTATION <br><br>  TYPE_POSE_6DOF <br><br>  TYPE_PRESSURE <br><br>  TYPE_PROXIMITY <br><br>  TYPE_RELATIVE_HUMIDITY <br><br>  TYPE_ROTATION_VECTOR <br><br>  TYPE_SIGNIFICANT_MOTION <br><br>  TYPE_STATIONARY_DETECT <br><br>  TYPE_STEP_COUNTER <br><br>  TYPE_STEP_DETECTOR <br><br></div></div><br>  Como se costuma dizer, o que h√° apenas!  E, de fato, n√£o havia muito espec√≠fico para o GALAXY S7.  Por exemplo, um sensor de umidade.  E a temperatura ambiente (embora eu entenda que, por estar dentro do gabinete, ele mostrar√° a temperatura do pr√≥prio smartphone).  Mas os sensores de press√£o e luz estavam presentes.  Sem mencionar os girosc√≥pios, aceler√¥metros, com os quais voc√™ pode facilmente determinar sua posi√ß√£o no espa√ßo. <br><br>  Como resultado, uma decis√£o amadureceu, deixe o smartphone receber e processar todas as informa√ß√µes de n√≠vel superior - v√≠deo e todos esses v√°rios sensores.  E a plataforma Arduino ser√° respons√°vel, por assim dizer, pelo inconsciente - por tudo o que j√° funciona e n√£o requer retrabalho, todos esses motores, sonar, chaves de palheta e assim por diante. <br><br>  Como √© dif√≠cil depurar o programa diretamente no smartphone, mesmo com o UDB, decidi que tudo seria transferido para um computador pessoal normal e processado l√°.  E ent√£o, de alguma forma, quando houver uma vers√£o funcional, retornaremos os c√©rebros de volta ao carrinho.  Temos que come√ßar pequenos e, de fato, √© interessante observar a transmiss√£o de v√≠deo de um carrinho fren√©tico. <br><br>  Os dados dos sensores podem ser enviados em uma linha simples, atrav√©s de um servidor cliente primitivo, n√£o h√° problemas com isso.  Mas com a transfer√™ncia do v√≠deo, imediatamente houve dificuldades.  Em geral, eu precisava de uma transmiss√£o em tempo real da c√¢mera do smartphone para a janela do aplicativo no computador.  Isso √© por enquanto.  No futuro, n√£o apenas eu, mas algum tipo de sistema de reconhecimento de padr√µes poderia olhar para essa foto na janela.  Por exemplo, JAVA OpenCV.  Ou talvez at√© uma rede neural da nuvem: D.  N√£o sei, esse est√°gio ainda est√° muito longe.  Mas eu gostaria de ver o mundo com o "olho" de um caminh√£o rob√≥tico. <br><br>  Todo mundo conhece v√°rios aplicativos, como uma "c√¢mera m√≥vel" da loja do Google, onde voc√™ captura um fluxo de v√≠deo da c√¢mera de um smartphone abrindo um navegador com o IP desejado no computador.  Portanto, no come√ßo eu pensei que n√£o seria dif√≠cil traduzir do meu GALAXY (o que n√£o foi um erro fraco), ent√£o primeiro voc√™ precisa verificar como ser√° a recep√ß√£o no computador, j√° que eu posso escrever de alguma forma apenas em JAVA. <br><br>  Como se viu, com a reprodu√ß√£o de v√≠deo JAVA, para dizer o m√≠nimo, n√£o muito bem.  Em 1997, foi lan√ßado o chamado Java Media Framework - uma biblioteca que facilita o desenvolvimento de programas que funcionam com √°udio e v√≠deo pelos pr√≥prios criadores do JAVA.  Mas, em algum lugar depois de 2003, um grande raio foi colocado nele e desde ent√£o j√° faz 15 anos.  Ap√≥s algumas experi√™ncias, consegui executar um arquivo na janela, n√£o me lembro qual deles j√° (parece AVI), mas essa vis√£o parecia bastante infeliz.  Arquivos com outras extens√µes n√£o desejavam ser executados; em casos extremos, havia uma faixa de √°udio. <br><br>  Na Internet, encontrei mais dois projetos alternativos para trabalhar com v√≠deo: Xuggler e aprica VLCj.  O primeiro projeto era atraente em suas capacidades, mas tamb√©m morreu h√° muito tempo, mas o segundo acabou sendo bastante animado e interessante em sua pr√≥pria id√©ia.  Os caras pegaram e prenderam ao JAVA o conhecido popular media player VLC.  Ou seja, o aprica n√£o usa codecs auto-escritos, mas usa codecs prontos.  Com ele, voc√™ perder√° qualquer arquivo.  Uma decis√£o s√°bia, mas o principal √© que voc√™ j√° possui esse VLC player instalado no seu computador.  Bem, quem n√£o tem?  A √∫nica ressalva, no entanto, √© que voc√™ tem as mesmas profundidades de bits do player e do JAVA.  Por exemplo, mais tarde, com surpresa, descobri que ainda tinha um VLC de 32 bits no computador, em contraste com o JAVA de 64 bits.  E meio dia de vida foi perdido em v√£o. <br><br>  Os desenvolvedores de Caprica prometem aos usu√°rios muitas coisas em seu site.  E todos os formatos de arquivo e inicializa√ß√£o em v√°rias janelas em um aplicativo JAVA, reproduzindo v√≠deos do You-Tube, capturando um fluxo de v√≠deo "ao vivo" e assim por diante.  Mas a dura realidade coloca tudo em seu lugar.  N√£o, eles n√£o enganaram com arquivos - tudo √© reproduzido.  Mas agora o v√≠deo do YouTube n√£o quer mais.  No come√ßo, eu n√£o conseguia entender o porqu√™, mas ent√£o vi uma inscri√ß√£o no log que, de alguma forma, era imposs√≠vel executar um determinado script lua e lembrei imediatamente: <br><blockquote>  Essa "captura de tela" da p√°gina da Web do YouTube √© quebradi√ßa - se o YouTube alterar a estrutura de suas p√°ginas da Web, o VLC √†s vezes falha em encontrar o URL de streaming. Quando isso acontece, voc√™ precisa esperar que um desenvolvedor forne√ßa uma nova LUA script e aguarde o lan√ßamento de uma nova vers√£o do VLC. </blockquote>  Em suma, aparentemente o YouTube mudou a estrutura de sua p√°gina da web e preciso aguardar um novo lan√ßamento.  Por outro lado, preciso de uma transmiss√£o de v√≠deo "ao vivo" e n√£o reproduzir um arquivo do site.  Ou seja, mesmo que o script lua funcionasse, isso n√£o me ajudaria muito. <br><br>  Mas n√£o encontrei o streaming prometido, embora tenha sido escrito que: <br><br><blockquote>  Servidor de streaming de rede (por exemplo, uma esta√ß√£o de r√°dio em rede ou um servidor de v√≠deo sob demanda); <br>  Cliente de streaming de rede; </blockquote>  Talvez seja uma lista de desejos, ou talvez esteja na vers√£o comercial, √© dif√≠cil dizer. <br><br>  Mas os arquivos s√£o reproduzidos, repito, sem queixas.  Por exemplo, voc√™ pode criar, aqui est√° essa indec√™ncia <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/6yH53kRyHXk" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  A instala√ß√£o do pacote em si n√£o √© dif√≠cil e √© descrita at√© em detalhes, por exemplo, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">aqui</a> .  √â verdade que, de alguma forma, prescrevi desajeitadamente vari√°veis ‚Äã‚Äãde ambiente e agora meu VLC inicia pela primeira vez com um atraso de dez segundos, mas salva o necess√°rio no cache e, posteriormente, na sess√£o atual, inicia sem pausas. <br><br>  Ent√£o, no seu projeto JAVA, voc√™ prescreve as depend√™ncias necess√°rias e pode come√ßar a <s>reproduzir os media players nas janelas JAVA</s> para funcionar. <br><br>  Depois de marcar o plano de trabalho aproximado na lateral do computador pessoal, voltei √† fonte dos dados de v√≠deo, meu smartphone ANDROID. <br><br>  Mas aqui eu estava esperando outra decep√ß√£o bastante grande.  Depois de digitalizar alguns sites e at√© o manual ANDROID on-line, descobri que √© imposs√≠vel organizar a transmiss√£o em tempo real usando meios regulares.  Como em Caprica, voc√™ s√≥ pode ler arquivos j√° gravados.  Ou seja, com a c√¢mera ligada, o MEDIA RECORDER come√ßou a gravar quando precisou ser interrompido.  E podemos ter acesso aos dados (e sua transfer√™ncia) somente ap√≥s uma parada. <br><br>  Encontrei confirma√ß√£o de minhas conclus√µes em um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> antigo.  Havia realmente dicas de que, uma vez que algu√©m conseguiu induzir o Android a pensar que ele estava gravando em um arquivo, mas na verdade eles deixaram um buffer.  Mas, de qualquer forma, como j√° foi explicado anteriormente, n√£o foi poss√≠vel capturar um fluxo de v√≠deo no lado do PC no aplicativo JAVA. <br><br>  Portanto, foi tomada uma decis√£o simples, <u>tempor√°ria</u> , em carvalho (quero enfatizar) - enviar um fluxo de v√≠deo da c√¢mera em peda√ßos por dois segundos.  N√£o √© um rover, √© claro, mas o rover j√° sai bastante. <br><br>  Tendo decidido sobre essa decis√£o, comecei a dominar as aulas de CAMERA e MEDIA RECORDER.  Existem alguns exemplos de c√≥digo na rede para iniciar a c√¢mera e gravar arquivos de v√≠deo, mas por algum motivo, nenhum deles funcionou para mim.  Nem no emulador, nem em um dispositivo real.  Descobriu-se que o motivo est√° nas permiss√µes, ou seja, nas permiss√µes.  Acontece que exemplos de c√≥digo foram escritos naqueles dias em que o Android ainda estava livre e o programador poderia fazer o que quisesse se escrevesse todas as permiss√µes necess√°rias no manifesto.  Mas minha vers√£o atual do OC n√£o permitiu isso.  Primeiro, voc√™ tinha que dar ao usu√°rio permiss√£o para gravar o arquivo e ligar a c√¢mera imediatamente ap√≥s iniciar o aplicativo.  Isso me custou atividade extra, ou seja, em Atividade. <br><br><div class="spoiler">  <b class="spoiler_title">Classe MainActivity.java</b> <div class="spoiler_text"><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.Manifest; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Intent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.pm.PackageManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.Camera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.media.MediaRecorder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.AsyncTask; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v4.app.ActivityCompat; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v4.content.ContextCompat; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.Toast; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span></span>{ Camera camera; MediaRecorder mediaRecorder; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> MainActivity m; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> Camera_granted; File videoFile; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) ||(ContextCompat.checkSelfPermission(MainActivity.<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) ) <span class="hljs-comment"><span class="hljs-comment">//ask for authorisation { ActivityCompat.requestPermissions(MainActivity.this, new String[]{Manifest.permission.CAMERA,Manifest.permission.WRITE_EXTERNAL_STORAGE}, 50); } if ((ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED)&amp; (ContextCompat.checkSelfPermission(MainActivity.this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED)) { Toast.makeText(MainActivity.this,"", Toast.LENGTH_SHORT).show();} m=this; MyTask mt = new MyTask(); mt.execute(); } } class MyTask extends AsyncTask&lt;Void, Void, Void&gt; { @Override protected void onPreExecute() { super.onPreExecute(); } @Override protected Void doInBackground(Void... params) { boolean ready = false; while(!ready) { if ((ContextCompat.checkSelfPermission(MainActivity.m, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED)&amp; (ContextCompat.checkSelfPermission(MainActivity.m, Manifest.permission.WRITE_EXTERNAL_STORAGE) == PackageManager.PERMISSION_GRANTED)) { System.out.println(" "); ready=true; } } return null; } @Override protected void onPostExecute(Void result) { Toast.makeText(MainActivity.m,"", Toast.LENGTH_SHORT).show(); Intent intent=new Intent(MainActivity.m,CameraActivity.class); //   : MainActivity.m.startActivity(intent); } }</span></span></code> </pre> <br></div></div><br>  Depois disso, tudo correu bem e o seguinte c√≥digo de funcionamento apareceu.  A segunda atividade da classe Camera_Activity √© respons√°vel por trabalhar com a c√¢mera e gravar arquivos de v√≠deo.  Classe Http_server para encaminhamento (o nome, √© claro, est√° incorreto, mas acabou historicamente).  O c√≥digo √© simples, sempre que houver uma explica√ß√£o. <br><br><img src="https://habrastorage.org/webt/dv/-z/l1/dv-zl1u_fxzjus5hcacejbzhudc.png"><br><br>  Tudo est√° completamente no Github.  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">Link</a> <br><br><div class="spoiler">  <b class="spoiler_title">Camera_Activity</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.Camera; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.media.MediaRecorder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.AsyncTask; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Environment; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.annotation.Nullable; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.SurfaceHolder; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.SurfaceView; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.View; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.Button; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.TextView; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.FileInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.ServerSocket; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.SensorEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.SensorEventListener; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.SensorManager; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.hardware.Sensor; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> android.hardware.Camera.getNumberOfCameras; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.BufferedOutputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.OutputStreamWriter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.PrintWriter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-comment"><span class="hljs-comment">/** * Created by m on 01.02.2019. */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CameraActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AppCompatActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SensorEventListener</span></span></span><span class="hljs-class"> </span></span>{ SurfaceView surfaceView; TextView mTextView; Button mStart; Button mStop; Camera camera; MediaRecorder mediaRecorder; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ServerSocket ss; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> ServerSocket ss2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> MainActivity m; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> stopCamera=<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count=<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> File videoFile1; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> File videoFile2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> File videoFile3; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">volatile</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] data; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SensorManager mSensorManager; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Sensor mAxeleration, mLight,mRotation,mHumidity,mPressure,mTemperature; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ax; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> ay; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> az; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> light; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> z; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> hum; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> press; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">double</span></span> tempr; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String Sensors; <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(@Nullable Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE); <span class="hljs-comment"><span class="hljs-comment">//    mAxeleration = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER); //    mSensorManager.registerListener(this, mAxeleration, SensorManager.SENSOR_DELAY_NORMAL); mLight = mSensorManager.getDefaultSensor(Sensor.TYPE_LIGHT); mSensorManager.registerListener(this, mLight, SensorManager.SENSOR_DELAY_NORMAL); mRotation = mSensorManager.getDefaultSensor(Sensor.TYPE_ORIENTATION); mSensorManager.registerListener(this, mRotation, SensorManager.SENSOR_DELAY_NORMAL); mHumidity = mSensorManager.getDefaultSensor(Sensor.TYPE_LINEAR_ACCELERATION); mSensorManager.registerListener(this, mHumidity, SensorManager.SENSOR_DELAY_NORMAL); mPressure = mSensorManager.getDefaultSensor(Sensor.TYPE_PRESSURE); mSensorManager.registerListener(this, mPressure, SensorManager.SENSOR_DELAY_NORMAL); mTemperature = mSensorManager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE); mSensorManager.registerListener(this, mTemperature, SensorManager.SENSOR_DELAY_NORMAL); setContentView(R.layout.camera); // videoFile = new File(Environment.getExternalStorageDirectory() + File.separator+ Environment.DIRECTORY_DCIM + File.separator + "test.3gp"); videoFile1 = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), "test1.3gp"); videoFile2 = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), "test2.3gp"); videoFile3 = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), "test3.3gp"); // videoFile4 = new File(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM), "testOUT.3gp"); // File file = new File(Environment.getExternalStorageDirectory(),VIDEO_PATH_NAME);//   // "touch" the file try { videoFile1.createNewFile(); videoFile2.createNewFile(); videoFile3.createNewFile(); } catch (IOException e) { } mStart = (Button) findViewById(R.id.btnStartRecord); mStop = (Button) findViewById(R.id.btnStopRecord); surfaceView = (SurfaceView) findViewById(R.id.surfaceView); mTextView = (TextView) findViewById(R.id.textView); SurfaceHolder holder = surfaceView.getHolder(); holder.addCallback(new SurfaceHolder.Callback() { @Override public void surfaceCreated(SurfaceHolder holder) { try { camera.setPreviewDisplay(holder); camera.startPreview(); } catch (Exception e) { e.printStackTrace(); } } @Override public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) { } @Override public void surfaceDestroyed(SurfaceHolder holder) { } }); mStart.setOnClickListener(new View.OnClickListener() { public void onClick(View v){ System.out.println("  "); //    WriteVideo WV = new WriteVideo(); WV.start(); mStart.setClickable(false); mStop.setClickable(true); Http_server.File_is_sent=true; new ServerCreation().execute();//      } } ); mStop.setOnClickListener(new View.OnClickListener() { public void onClick(View v){ stopCamera = false; // mTextView.setText(" "); releaseMediaRecorder(); releaseCamera(); mStart.setClickable(true); mStop.setClickable(false); System.out.println("  "); Http_server.File_is_sent=true; } } ); } @Override public void onAccuracyChanged(Sensor sensor, int accuracy) { //    } @Override public void onSensorChanged(SensorEvent event) { //   switch (event.sensor.getType()) { case Sensor.TYPE_ACCELEROMETER: ax = (int)(event.values[0] * 9); // + -  az = (int)(event.values[2] * 9);//  +  -  // System.out.println(" = "+ ax + "  = " + az); break; case Sensor.TYPE_LIGHT: light = event.values[0]; // System.out.println(" = "+ light); break; case Sensor.TYPE_ORIENTATION: x = (int)event.values[0]; y = (int)event.values[1]+90; //  +  -  z = (int)event.values[2]; // + -  // System.out.println("x = "+ x + " y = " + y+ " z= "+ z); break; case Sensor.TYPE_LINEAR_ACCELERATION: hum = event.values[2]; int k = (int)(hum*100); hum = - (double)k;//   ,    /2 // System.out.println(hum); break; case Sensor.TYPE_PRESSURE: press = event.values[0]*760/10.1325; int i = (int) press; press = (double)i/100; // System.out.println(press); break; case Sensor.TYPE_AMBIENT_TEMPERATURE: tempr = event.values[0]; System.out.println(tempr); break; } Sensors = " tangaz_1 "+ az+ " kren_1 " + ax + " tangaz_2 "+ y + " kren_2 " + z + " forvard_accel "+ hum + " light " + light+ " "; // System.out.println(Sensors); } @Override protected void onResume() { super.onResume(); releaseCamera(); releaseMediaRecorder(); int t = getNumberOfCameras(); mTextView.setText(""+t); if(camera == null) { camera = Camera.open(); // camera.unlock(); } else{ } } @Override protected void onPause() { super.onPause(); } @Override protected void onStop() { super.onStop(); releaseCamera(); releaseMediaRecorder(); } private boolean prepareVideoRecorder() { if (mediaRecorder==null) {mediaRecorder = new MediaRecorder();} camera.unlock(); mediaRecorder.setCamera(camera); mediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA); switch (count) { case 1: mediaRecorder.setOutputFile(videoFile1.getAbsolutePath()); break; case 2: mediaRecorder.setOutputFile(videoFile2.getAbsolutePath()); break; case 3: mediaRecorder.setOutputFile(videoFile3.getAbsolutePath()); break; } mediaRecorder.setPreviewDisplay(surfaceView.getHolder().getSurface()); mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP); //mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4); mediaRecorder.setVideoSize(640,480); mediaRecorder.setOrientationHint(90);//    ,     mediaRecorder.setVideoFrameRate(30); mediaRecorder.setVideoEncoder(1); try { mediaRecorder.prepare(); } catch (Exception e) { e.printStackTrace(); releaseMediaRecorder(); return false; } return true; } private void releaseMediaRecorder() { if (mediaRecorder != null) { mediaRecorder.release(); mediaRecorder = null; if (camera != null) { // camera.lock();//         } } } public void releaseCamera() { if (camera != null) { // camera.setPreviewCallback(null); // SurfaceView.getHolder().removeCallback(SurfaceView); camera.release(); camera = null; } } private class WriteVideo extends Thread{ public void run () { stopCamera=true; do{ // releaseMediaRecorder(); // releaseCamera(); if(camera == null) { camera = Camera.open(Camera.CameraInfo.CAMERA_FACING_BACK); } System.out.println(""); if (prepareVideoRecorder()) { mediaRecorder.start(); } else { releaseMediaRecorder(); } try { Thread.sleep(2000);//     } catch (Exception e) { } count++; if(count==3){count=1;}// 4 if (mediaRecorder != null) { releaseMediaRecorder(); } System.out.println(""); File f=null; switch (count) { case 1: f = videoFile2;// 3 break; case 2: f = videoFile1;//1 break; case 3: f = videoFile2; break; } try { BufferedInputStream bis = new BufferedInputStream(new FileInputStream(f)); data = new byte[bis.available()]; bis.read(data); bis.close(); }catch (Exception e) { System.out.println(e); } if(Http_server.File_is_sent)//       { System.out.println("  "); new HTTP_Server_Calling().execute(); Http_server.File_is_sent=false; } } while(stopCamera); if (mediaRecorder != null) { System.out.println(""); } } } } class ServerCreation extends AsyncTask&lt;Void, Void, Void&gt; { @Override protected void onPreExecute() { super.onPreExecute(); } @Override protected Void doInBackground(Void... params) { try { CameraActivity.ss = new ServerSocket(40001);//      System.out.println("  "); new Http_server(CameraActivity.ss.accept()); CameraActivity.ss2 = new ServerSocket(40002);//      }catch (Exception e) { System.out.println(e); System.out.println("   "); } new HTTP_Server_Calling2().start(); return null; } @Override protected void onPostExecute(Void result) { } } class HTTP_Server_Calling extends AsyncTask&lt;Void, Void, Void&gt; { @Override protected void onPreExecute() { super.onPreExecute(); } @Override protected Void doInBackground(Void... params) { try { new Http_server(CameraActivity.ss.accept()); } catch (Exception e) { System.out.println(e); } return null; } @Override protected void onPostExecute(Void result) { } } class HTTP_Server_Calling2 extends Thread//           { public void run() { while (CameraActivity.stopCamera) { try { Thread.sleep(500);//      new Http_server_Sensors(CameraActivity.ss2.accept()); } catch (Exception e) { System.out.println(e); } } } } class Http_server extends Thread { public Socket socket; public static volatile boolean File_is_sent=true; Http_server(Socket s) { System.out.println("  "); socket = s; setPriority(MAX_PRIORITY); start(); } public void run() { try { System.out.println("    "); BufferedOutputStream bos = new BufferedOutputStream((socket.getOutputStream())); bos.write(CameraActivity.data); bos.flush(); bos.close(); socket.close(); } catch (Exception e) { System.out.println(e); } File_is_sent = true; } } public class Http_server_Sensors extends Thread { public Socket socket; PrintWriter pw; Http_server_Sensors(Socket s) { socket = s; setPriority(MAX_PRIORITY); start(); } public void run() { try { pw = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()), true);//    System.out.println(CameraActivity.Sensors); pw.println(CameraActivity.Sensors);//  pw.flush(); pw.close(); socket.close(); } catch (Exception e) { System.out.println(e); } } }</span></span></code> </pre><br></div></div><br><br>  A ess√™ncia do programa ap√≥s iniciar e ligar a c√¢mera √© a seguinte: <br>  escreva um v√≠deo por dois segundos no primeiro arquivo, <br>  escrevemos o v√≠deo por dois segundos no segundo arquivo e, enquanto isso, enviamos o primeiro arquivo via TCP-IP via WI-FI local para o computador, <br>  escreva o primeiro arquivo novamente e, enquanto isso, envie o segundo, <br>  e assim por diante. <br><br>  Em seguida, o ciclo se repete at√© o bot√£o "parar" ser pressionado ou a bateria do smartphone acabar.  Em princ√≠pio, √© poss√≠vel implementar um an√°logo de pressionar bot√µes, usando comandos de um computador, tamb√©m via TCP, isso n√£o √© dif√≠cil. <br><br>  A princ√≠pio, o buffer de v√≠deo consistia em tr√™s arquivos no formato 3GP (escrevemos o primeiro, enviamos o terceiro, escrevemos o segundo, enviamos o primeiro, escrevemos o terceiro, enviamos o segundo), mas depois os arquivos s√£o suficientes (gravando e enviando um ao outro) n√£o interfira). <br><br>  Com uma resolu√ß√£o de c√¢mera de 640 por 480, os arquivos s√£o obtidos, algo em torno de 200-300 kB, o que √© bastante dif√≠cil para o meu roteador.  Ainda n√£o me incomodei com o som, mas tudo parece simples: voc√™ instala os codificadores de √°udio, as taxas de bits, o n√∫mero de canais e similares. <br><br>  Um pouco mais tarde, quando depurei a transfer√™ncia de v√≠deo, suplementei o c√≥digo tamb√©m transmitindo informa√ß√µes dos sensores do smartphone.  Tudo √© transmitido trivialmente em uma linha, mas n√£o foi poss√≠vel transferi-lo pelo mesmo soquete do v√≠deo.  Aparentemente, as classes para a transmiss√£o de uma sequ√™ncia PrintWriter e a transmiss√£o de dados bin√°rios BufferedOutputStream usam fluxos diferentes, mas, em seguida, eles t√™m um buffer de sa√≠da, no qual s√£o bem sucedidos.  Como resultado, o v√≠deo come√ßa a falhar e desmoronar.  Al√©m disso, o arquivo de v√≠deo √© transmitido a cada dois segundos e, para sensores, esse intervalo √© muito grande.  Portanto, foi decidido distribu√≠-los em diferentes soquetes para que eles n√£o interfiram entre si.  Por esse motivo, uma nova classe Http_server_Sensors apareceu. <br><br>  Assim, organizamos a expedi√ß√£o, agora novamente retornaremos ao lado negro de recebimento. <br><br>  Como j√° vimos desde o primeiro exemplo, reproduzir arquivos de v√≠deo em um aplicativo JAVA usando um player VLC agora n√£o apresenta problemas.  O principal √© obter esses arquivos. <br><br>  O seguinte programa de demonstra√ß√£o √© respons√°vel por isso. <br><br><div class="spoiler">  <b class="spoiler_title">Video player</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.BorderLayout; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.event.ActionEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.event.ActionListener; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.event.WindowAdapter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.event.WindowEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JButton; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JFrame; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JOptionPane; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.JPanel; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.swing.SwingUtilities; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.component.EmbeddedMediaPlayerComponent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.discovery.NativeDiscovery; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.MediaPlayer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> uk.co.caprica.vlcj.player.MediaPlayerEventAdapter; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.net.Socket; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VideoPlayer</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JFrame frame; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> EmbeddedMediaPlayerComponent mediaPlayerComponent; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JButton pauseButton; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JButton rewindButton; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> JButton skipButton; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String mr1, mr2; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> playing_finished = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> File_1_play_starting = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> File_1_play_finished = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> File_2_play_starting = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> File_2_play_finished = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-comment"><span class="hljs-comment">//192.168.1.128 public static void main(final String[] args) { new NativeDiscovery().discover(); mr1 = "D:\\test1.3gp"; mr2 = "D:\\test2.3gp"; SwingUtilities.invokeLater(new Runnable() { @Override public void run() { VideoPlayer vp = new VideoPlayer(); vp.mediaPlayerComponent.getMediaPlayer().setPlaySubItems(true); VideoPlayer.playing_finished=false; new Control().start();//   // while (!Http_client.File_ready) { // System.out.println(""); try { Thread.sleep(100); } catch (Exception e) { } } // while (true) { playing_finished = false; } // System.out.println("  1"); } }); } public VideoPlayer() { frame = new JFrame("My First Media Player"); frame.setBounds(100, 100, 600, 400); frame.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); frame.addWindowListener(new WindowAdapter() { @Override public void windowClosing(WindowEvent e) { System.out.println(e); mediaPlayerComponent.release(); System.exit(0); } }); JPanel contentPane = new JPanel(); contentPane.setLayout(new BorderLayout()); mediaPlayerComponent = new EmbeddedMediaPlayerComponent(); contentPane.add(mediaPlayerComponent, BorderLayout.CENTER); frame.setContentPane(contentPane); JPanel controlsPane = new JPanel(); pauseButton = new JButton("Pause"); controlsPane.add(pauseButton); rewindButton = new JButton("Rewind"); controlsPane.add(rewindButton); skipButton = new JButton("Skip"); controlsPane.add(skipButton); contentPane.add(controlsPane, BorderLayout.SOUTH); pauseButton.addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) { mediaPlayerComponent.getMediaPlayer().pause(); } }); rewindButton.addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) { mediaPlayerComponent.getMediaPlayer().skip(-10000); } }); skipButton.addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) { mediaPlayerComponent.getMediaPlayer().skip(10000); } }); mediaPlayerComponent.getMediaPlayer().addMediaPlayerEventListener(new MediaPlayerEventAdapter() { @Override public void playing(MediaPlayer mediaPlayer) { SwingUtilities.invokeLater(new Runnable() { @Override public void run() { frame.setTitle(String.format( "My First Media Player - %s", mediaPlayerComponent.getMediaPlayer() )); } }); } @Override public void finished(MediaPlayer mediaPlayer) { SwingUtilities.invokeLater(new Runnable() { @Override public void run() { playing_finished = true; System.out.println("finished " + playing_finished); //closeWindow(); } }); } @Override public void error(MediaPlayer mediaPlayer) { SwingUtilities.invokeLater(new Runnable() { @Override public void run() { JOptionPane.showMessageDialog( frame, "Failed to play media", "Error", JOptionPane.ERROR_MESSAGE ); closeWindow(); } }); } }); frame.setVisible(true); //mediaPlayerComponent.getMediaPlayer(); } public void start(String mrl) { mediaPlayerComponent.getMediaPlayer().setPlaySubItems(true); mediaPlayerComponent.getMediaPlayer().prepareMedia(mrl); //mediaPlayerComponent.getMediaPlayer().parseMedia(); mediaPlayerComponent.getMediaPlayer().playMedia(mrl); // mediaPlayerComponent. } public void closeWindow() { frame.dispatchEvent(new WindowEvent(frame, WindowEvent.WINDOW_CLOSING)); } } class PlayFile { public static void run(int number) { if (number==1) { VideoPlayer.mediaPlayerComponent.getMediaPlayer().prepareMedia(VideoPlayer.mr1); System.out.println("  1"); VideoPlayer.mediaPlayerComponent.getMediaPlayer().start(); VideoPlayer.mediaPlayerComponent.getMediaPlayer().playMedia(VideoPlayer.mr1); VideoPlayer.File_1_play_starting = true; VideoPlayer.File_1_play_finished = false; while (!VideoPlayer.playing_finished) {//      try { Thread.sleep(1); } catch (Exception e) { } } VideoPlayer.mediaPlayerComponent.getMediaPlayer().stop(); VideoPlayer.playing_finished = false; VideoPlayer.File_1_play_starting = false; VideoPlayer.File_1_play_finished = true; } { try { Thread.sleep(10); } catch (Exception e) { } } if (number==2) { VideoPlayer.mediaPlayerComponent.getMediaPlayer().prepareMedia(VideoPlayer.mr2); System.out.println("  2"); VideoPlayer.mediaPlayerComponent.getMediaPlayer().start(); VideoPlayer.mediaPlayerComponent.getMediaPlayer().playMedia(VideoPlayer.mr2); VideoPlayer.File_2_play_starting = true; VideoPlayer.File_2_play_finished = false; while (!VideoPlayer.playing_finished) { try { Thread.sleep(1); } catch (Exception e) { } } VideoPlayer.mediaPlayerComponent.getMediaPlayer().stop(); VideoPlayer.playing_finished = false; VideoPlayer.File_2_play_starting = false; VideoPlayer.File_2_play_finished = true; } { try { Thread.sleep(10); } catch (Exception e) { } } } } public class Control extends Thread{ public static boolean P_for_play_1=false; public static boolean P_for_play_2=false; public void run() { // new Http_client(1).start(); while (!Http_client.File1_reception_complete) { try { Thread.sleep(1); } catch (Exception e) { } } while (true) { new Http_client(2).start(); PlayFile.run(1); while (!VideoPlayer.File_1_play_finished) { try { Thread.sleep(1); } catch (Exception e) { } } while (!Http_client.File2_reception_complete) { try { Thread.sleep(1); } catch (Exception e) { } } new Http_client(1).start(); PlayFile.run(2); while (!VideoPlayer.File_2_play_finished) { try { Thread.sleep(1); } catch (Exception e) { } } while (!Http_client.File1_reception_complete) { try { Thread.sleep(1); } catch (Exception e) { } } //PlayFile.run(1); } } } public class Http_client extends Thread { public static boolean File1_starts_writing=false; public static boolean File1_reception_complete=false; public static boolean File2_starts_writing=false; public static boolean File2_reception_complete=false; public int Number; public BufferedOutputStream bos; Http_client(int Number) { this.Number = Number; } public void run(){ try { Socket socket= new Socket("192.168.1.128", 40001); // System.out.println(" "); // PrintWriter pw = new PrintWriter(new OutputStreamWriter(socket.getOutputStream()), true); // pw.println("ready");// Greetings with CLIENT // System.out.println(" "); BufferedInputStream bis = new BufferedInputStream(socket.getInputStream()); if (Number ==1) { File1_starts_writing=true; File1_reception_complete=false; System.out.println("  1,    2"); bos = new BufferedOutputStream(new FileOutputStream(VideoPlayer.mr1)); byte[] buffer = new byte[32768]; while (true) { //     int readBytesCount = bis.read(buffer); if (readBytesCount == -1) { //   break; } if (readBytesCount &gt; 0) { //    - ,   bos.write(buffer, 0, readBytesCount); } } System.out.println(" "); System.out.println(" "); bos.flush(); bos.close(); File1_starts_writing=false; File1_reception_complete=true; } if (Number==2) { File2_starts_writing=true; File2_reception_complete=false; System.out.println("  2,    1"); bos = new BufferedOutputStream(new FileOutputStream(VideoPlayer.mr2)); byte[] buffer = new byte[32768]; while (true) { //     int readBytesCount = bis.read(buffer); if (readBytesCount == -1) { //   break; } if (readBytesCount &gt; 0) { //    - ,   bos.write(buffer, 0, readBytesCount); } } System.out.println(" "); System.out.println(" "); bos.flush(); bos.close(); File2_starts_writing=false; File2_reception_complete=true; } socket.close(); // pw.close(); bis.close(); } catch(Exception e){ System.out.println(e); System.out.println("gfgfg"); } try { Thread.sleep(10); } catch (Exception e) { } } }</span></span></code> </pre></div></div><br><br>  Sua ess√™ncia √© simples.  Um cliente TCP √© iniciado, que come√ßa a aguardar o servidor estar pronto no smartphone.  Ap√≥s receber o primeiro arquivo, ele come√ßa a ser reproduzido imediatamente e o arquivo n√∫mero dois √© esperado em paralelo.  Al√©m disso, espera-se o final da recep√ß√£o do segundo arquivo ou o final da reprodu√ß√£o do primeiro.  O melhor de tudo, √© claro, <s>tr√™s estrelas</s> , quando o arquivo √© baixado mais rapidamente do que √© reproduzido.  Se voc√™ perdeu o primeiro arquivo, mas ainda n√£o recebeu o segundo, tudo est√° aguardando ... Demonstraremos uma tela preta.  Caso contr√°rio, comece rapidamente a reproduzir o segundo arquivo e baixe o primeiro novamente. <br>  Eu tinha uma vaga esperan√ßa de que a pausa entre a troca de arquivos reproduzidos fosse menor que o tempo de rea√ß√£o do olho humano, mas n√£o se concretizou.  Lazer, √© claro, este VLC. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BaY3gD6RBdU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Como resultado, temos um tipo de v√≠deo vil e descont√≠nuo (o primeiro trilobita, aparentemente, viu o mundo assim), onde a nitidez ainda est√° sendo constantemente ajustada.  E devemos levar em conta que o v√≠deo tamb√©m est√° atrasado por dois segundos.  Em resumo, na produ√ß√£o, eu n√£o recomendo espalh√°-lo.  Mas eu tenho falta de peixe e trilobita, como eles dizem ... <br><br>  Resumindo o exposto, podemos absolutamente dizer que: <br><br>  O envio de v√≠deo em partes √© essencialmente inoperante e s√≥ pode ser √∫til nos casos em que o v√≠deo √© longo o suficiente e voc√™ n√£o precisa de uma segunda rea√ß√£o ao que est√° acontecendo. <br><br>  A transmiss√£o de v√≠deo por TCP-IP tamb√©m √© uma id√©ia incorreta, independentemente do que algumas personalidades de Habr diriam sobre a velocidade de transfer√™ncia de dados usando esse protocolo (que √© supostamente ainda mais r√°pido que o UDP).  Obviamente, as intranets sem fio modernas t√™m boas caracter√≠sticas para garantir handshakes cont√≠nuos de servidores e clientes TCP, e o pr√≥prio TCP parece ter sido atualizado para dados longos, mas ainda assim os plugues entre a reprodu√ß√£o de v√≠deos aparecem periodicamente na demonstra√ß√£o. <br><br>  Mas, pelo menos para o futuro, surgiram os seguintes pensamentos: <br><br><ol><li>  envie quadro a quadro (n√£o v√≠deo, mas fotos) via UDP, mas controle as informa√ß√µes via TCP, </li><li>  conduza molduras por todo o UDP, mas com sinais de sincroniza√ß√£o no mesmo canal. </li></ol><br>  Obviamente, at√© agora h√° mais perguntas do que respostas.  Existe velocidade de recep√ß√£o suficiente no JAVA com seu n√≠vel de abstra√ß√£o ao trabalhar com a rede e as imagens?  √â poss√≠vel fazer 30 fotos normais por segundo no n√≠vel acess√≠vel para mim no Android?  Vou ter que colher antes de enviar para reduzir a taxa de bits?  E o JAVA √© suficiente para empacotar e descompactar?  E se, de repente, algo der certo, ser√° poss√≠vel seguir o pr√≥ximo passo, danificar o sistema de vis√£o computacional JAVA OpenCV aqui?  Ele mesmo, √© claro, sempre √© interessante assistir a v√≠deos em fluxo desde o n√≠vel do ch√£o, mas n√£o devemos esquecer o objetivo mais alto - um rob√¥ rob√≥tico com a intelig√™ncia de uma formiga! <br><br>  Mas, enquanto tivermos o que temos, retornaremos ao carrinho atual.  O antigo programa do artigo anterior para o microcontrolador AVR na plataforma Arduino n√£o mudou muito, apenas a op√ß√£o de ramifica√ß√£o foi adicionada - dire√ß√£o aut√¥noma ou controlada pelo operador.  Os dados que o carrinho (medula espinhal) transmite via WIFI s√£o os mesmos - a dist√¢ncia percorrida.  Um pouco mais tarde, tamb√©m anexei a transfer√™ncia de temperatura de um elemento cr√≠tico - o driver do motor.  Tudo isso √© transmitido e recebido primeiro pelo UART, e j√° ao entrar na rede via UDP.  N√£o dou o c√≥digo, toda a an√°lise completa no <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">artigo</a> antes da √∫ltima <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">.</a> <br><br><img src="https://habrastorage.org/webt/zh/gb/vz/zhgbvzhttcqg7o_la1sabrmw2gy.png"><br><br>  Para dois motores, o (driver) ainda √© suficiente, mais ou menos, mas com quatro depois de um tempo superaquece para um estado inoperante.  No come√ßo, tentei usar os sensores anal√≥gicos de temperatura mais simples baseados em diodos zener, como o LM335, mas nada resultou disso.  Eu n√£o tinha uma fonte de tens√£o de refer√™ncia, para abreviar, ION.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">E pegar milivolts com uma bateria fraca n√£o faz sentido. A prop√≥sito, sobre a bateria - quando eu estava cansado de remover e reinserir constantemente 14500 baterias de l√≠tio para recarregar, peguei uma bateria sobressalente de uma chave de fenda e o carrinho come√ßou a funcionar continuamente por uma hora e meia, al√©m de ter uma apar√™ncia e peso amea√ßadores (sim, est√° nesta bateria "Olhos"). Portanto, para medir a temperatura, instalei um aceler√¥metro girosc√≥pio com defeito, baseado no L3G4200D. Felizmente, ele tamb√©m mediu a temperatura e a transmitiu atrav√©s do barramento I2C.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um smartphone sentado atr√°s da bateria e sobre os olhos do eco-sonar transmite um fluxo de v√≠deo, leituras do aceler√¥metro (voc√™ pode us√°-lo para inclinar o carrinho e a inclina√ß√£o do carrinho quando est√° em p√©), girar e inclinar em graus na din√¢mica j√° calculada pelo pr√≥prio smartphone (uma op√ß√£o muito conveniente) , acelera√ß√£o linear na dire√ß√£o da viagem, ilumina√ß√£o. Em geral, √© claro, voc√™ pode transferir tudo o que seu smartphone pode medir da press√£o do ar para a dire√ß√£o norte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Como resultado, o aplicativo em JAVA adquiriu a seguinte forma: </font></font><br><br><img src="https://habrastorage.org/webt/do/6y/oe/do6yoema_7rnzm9z38yfijhzv14.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">O engra√ßado √© que ele realmente se parece com um painel de controle de um Lunokhod sovi√©tico, s√≥ que eu tenho uma tela de TV ao lado e eles a t√™m no centro.</font></font><br><br><img src="https://habrastorage.org/webt/hw/ql/tu/hwqltuwvxsplpvdat2pcokifzye.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ao lig√°-lo, primeiro conecte-se ao carrinho e ao smartphone, selecione o modo de controle manual ou autonomia total - e pronto! At√© a janela de temperatura do motorista ficar amarela e depois vermelha. Gr√°ficos! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Algo assim parece vivo.</font></font><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/AaMWKKeBff8" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">N√£o trago o programa aqui, porque, como sempre, a constru√ß√£o de janelas ocupa 95% do c√≥digo. </font><font style="vertical-align: inherit;">Pode ser encontrado </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aqui. </font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">No futuro, o c√©rebro (smartphone) deve aprender a transferir v√≠deo normal (e n√£o o que √© agora) para um computador, onde deve ser reconhecido de alguma maneira de uma maneira boa (enquanto o objetivo √© criar um mapa da sala no n√≠vel do ch√£o e determinar sua localiza√ß√£o). </font><font style="vertical-align: inherit;">Bem, e j√° sob o comunismo, gostaria de port√°-lo de volta para o meu smartphone para que ele n√£o precisasse de um computador. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Se pelo menos algo der certo, eu definitivamente o publicarei.</font></font> Obrigado pela aten√ß√£o. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt448516/">https://habr.com/ru/post/pt448516/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt448498/index.html">"R√∫ssia 404": quanto de Internet gr√°tis resta para viver</a></li>
<li><a href="../pt448500/index.html">Resolvendo um Crackme simples para Sega Mega Drive</a></li>
<li><a href="../pt448504/index.html">Eles coletaram para todos "Habrom" o livro de refer√™ncia "Por quem foi emitido ..." para passaportes. Download para a sa√∫de</a></li>
<li><a href="../pt448506/index.html">Matrix tem 20 anos: como Wachowski criou o cyberpunk, que determinou a agenda de toda uma gera√ß√£o</a></li>
<li><a href="../pt448510/index.html">Acer em 2019: e se voc√™ remover todas as moscas dos laptops para jogos</a></li>
<li><a href="../pt448518/index.html">Como ver um buraco negro?</a></li>
<li><a href="../pt448522/index.html">Gera√ß√£o de configura√ß√£o para nginx, hist√≥rico de uma solicita√ß√£o pull</a></li>
<li><a href="../pt448524/index.html">Cientistas israelenses pela primeira vez no mundo imprimiram um cora√ß√£o vivo</a></li>
<li><a href="../pt448528/index.html">Servi√ßo Wireguard VPN gratuito na AWS</a></li>
<li><a href="../pt448530/index.html">Como o Megafone dormiu em assinaturas m√≥veis</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>