<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔰 👩🏼‍🏫 👩‍💻 Comment nous avons servi l'infrastructure informatique de Luzhniki pendant la Coupe du monde 🌗 👨‍👨‍👦‍👦 👩🏼‍🔧</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il m'est arrivé de participer à un projet visant à créer une infrastructure d'ingénierie et informatique pour la Luzhniki Grand Sports Arena. Le trava...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comment nous avons servi l'infrastructure informatique de Luzhniki pendant la Coupe du monde</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/lanit/blog/423645/"> Il m'est arrivé de participer à un projet visant à créer une infrastructure d'ingénierie et informatique pour la Luzhniki Grand Sports Arena.  Le travail a duré plusieurs années et s'est terminé avec le soutien des solutions que nous avons introduites lors de la Coupe du Monde de la FIFA.  Sous la coupe - sur la façon dont nous avons mis en œuvre et entretenu le Wi-Fi HD sur le plus grand terrain de sport du pays, quels problèmes nous avons rencontrés et comment les mini-ordinateurs Raspberry Pi nous ont aidés. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c8/d2b/d6a/1c8d2bd6a0ba0e89122651ee69ccc0b9.jpg"></div>  <a href="">Source</a> <br><a name="habracut"></a><br><h2>  13 novembre 2017 </h2><br>  La principale nouvelle du jour: <i>BSA Luzhniki aura deux réseaux Wi-Fi pour les fans, pas un.</i>  Désormais, les points Wi-Fi pour les fans ne sont installés que dans les sky-boxes et sous l'espace tribune.  En 2014, lorsque la reconstruction a commencé, le client a décidé de ne pas construire de Wi-Fi dans les tribunes du stade, car ce message était présent dans les exigences de la FIFA sous la forme d'un souhait modeste.  Le client dispose désormais d'une lettre officielle signée par le directeur informatique de la FIFA, Dick Wiles.  L'essence de la lettre est que maintenant le Wi-Fi HD dans les tribunes du stade n'est pas une demande douce, mais une exigence stricte.  On ne sait pas trop quoi faire maintenant.  Achetés en 2014 et installés selon le projet, les points d'accès et contrôleurs HPE Wi-Fi sont passés à une telle fin de vente qu'il n'y a aucun moyen d'étendre le réseau sur les contrôleurs existants.  Nous allons construire un autre réseau Wi-Fi Luzhniki.  Idéalement, la solution devrait passer par une opération d'essai le 23 mars 2018, lors d'un match test Russie-Brésil.  Tout devrait fonctionner à 100% le 14 juin, lors de la cérémonie d'ouverture de la Coupe du Monde de la FIFA. <br><br><h2>  15 novembre 2017 </h2><br>  Comme ce n'est pas le premier <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">projet d'intégration LANIT</a> à construire une connexion Wi-Fi HD dans les stades (vous pouvez lire ici le premier projet), les principaux points qui méritent une attention particulière sont déjà compris. <br><br><ol><li><div class="spoiler">  <b class="spoiler_title">Tous les clients doivent s'authentifier avant d'accéder à Internet.</b> <div class="spoiler_text">  Si nous parlons de l'accès des clients à Internet dans un lieu public, c'est une exigence de la loi russe.  Le moyen le plus compréhensible de résoudre le problème consiste à proposer à l'abonné d'indiquer son numéro de téléphone mobile en échange de la réception d'un mot de passe unique par SMS. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Les points d'accès ne se trouveront pas là où ils sont optimaux, mais là où ils le permettront.</b> <div class="spoiler_text">  Un point d'accès ne peut être suspendu dans le stade que si trois conditions sont remplies en même temps: a) il n'obscurcit pas la vue;  b) n'atteignez pas avec vos mains;  et c) un câble à paire torsadée peut être remonté.  Dès que le plan d'aménagement des points d'accès est approuvé par les responsables de l'ordre public, en cas de non-respect d'au moins une des conditions, le point sera démantelé et tout argument tel que sondages radio, recommandations de vendeurs, etc.  sera interprétée comme une excuse pour les pauvres. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Il y a toujours des plaintes concernant le travail du Wi-Fi, avec lesquelles on ne sait pas quoi faire.</b> <div class="spoiler_text">  "Quelque chose que je télécharge le fichier depuis trop longtemps via WhatsApp."  "Hier, ma copine était dans le stade et n'a pas pu se connecter."  Il est extrêmement rare qu'une réclamation contienne des informations qui, d'une manière ou d'une autre, aident au travail.  Au milieu d'un match, il est complètement inutile de clarifier l'adresse MAC d'une personne sur un téléphone, de lui demander d'envoyer des captures d'écran, etc.  Si nous ne voulons pas courir dans le stade dans des tentatives sans fin pour vérifier la qualité du Wi-Fi HD, nous devons comprendre quoi faire avec de tels appels. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Il est difficile de comprendre objectivement à quel point le Wi-Fi HD fonctionne dans le stade.</b> <div class="spoiler_text">  L'abonné peut être insatisfait de la qualité du Wi-Fi en raison d'un tas de choses «flottantes» qui échappent même au contrôle de ceux qui sont impliqués dans la maintenance de l'infrastructure informatique de l'installation.  Le code SMS peut ne pas venir en raison de problèmes de téléphone, d'une congestion du réseau cellulaire ou d'une défaillance de la part de l'opérateur SMS.  Il peut y avoir des retards dans l'ouverture des pages Web en raison de problèmes de la part des opérateurs de télécommunications ou des hébergeurs.  Un homme ne comprendra pas comment se connecter ... Personne ne garantit la qualité du signal et l'absence d'interférence dans un support de transmission de données sans fil par définition. </div></div></li></ol><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f02/6a1/830/f026a183035419abe459e78415df9e8f.jpg"></div>  <i>Antenne WiFi au stade.</i>  <i>Veuillez noter qu'il est situé derrière la vitre, ce qui dégrade légèrement la qualité du signal, mais protège physiquement l'antenne des ventilateurs.</i> <br><br><h2>  15 décembre 2017 </h2><br>  Le client a pris la décision finale de construire le deuxième réseau Wi-Fi du stade sur des équipements Cisco Systems.  Selon les calculs les plus préliminaires, environ 500 points d'accès devraient être suspendus dans les tribunes du stade.  Les ingénieurs de Cisco proposent de réaliser le projet sur les contrôleurs AIR-CT8510-500-K9 et sur les points AIR-CAP3702E avec les antennes AIR-ANT2513P4M-N = et AIR-ANT2566D4M-R =.  Si nous commandons de l'équipement aujourd'hui, il arrivera dans au moins un mois et demi, c'est-à-dire le 1er février.  Et le 23 mars est un match test.  Les délais sont extrêmement serrés, les contrôleurs ont donc décidé de commander immédiatement.  Pour surveiller les incidents SI, il a été décidé de compléter la solution et également de commander immédiatement une paire de NGFW basée sur Fortinet ME à l'écart entre notre réseau et le réseau de l'opérateur télécom.  Commander des points d'accès et des antennes radio est encore stupide, car on imagine vaguement combien de points sont nécessaires et où les accrocher.  Un besoin urgent de commencer une enquête radio. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d27/5ee/0d2/d275ee0d257903b92c33cacd31e78393.jpg"></div>  <a href="">Source</a> <br><br><h2>  18 décembre 2017 </h2><br>  Il s'avère que lors de la Coupe du monde au stade, il n'y aura même pas deux réseaux Wi-Fi, mais trois.  Un autre réseau sans fil indépendant (sur des contrôleurs séparés) sera déployé par la FIFA pour leurs propres besoins et ceux des professionnels des médias.  Étant donné que le réseau de la FIFA affecte partiellement l'espace tribune du stade, dans certaines salles, les points d'accès Wi-Fi HPE existants devraient être temporairement désactivés ou, mieux encore, démantelés.  Sinon, cela n'affecte pas l'avancement de notre projet. <br><br><h2>  20 décembre 2017 </h2><br>  Nous avons décidé où accrocher conceptuellement les points d'accès dans les tribunes du stade.  Quatre options ont été envisagées: les passerelles de toit, sous les sièges, le long du périmètre des secteurs (sur la balustrade de la clôture, les portails d'accès aux tribunes) et sous les tribunes, dans l'espoir que le signal radio percera la dalle de plancher (un chemin exotique, mais il existe des projets mis en œuvre de cette façon dans le monde) . <br><br>  La première option était de percer la dalle: mesurer l'atténuation du signal dans la bande 2,4 GHz avec le passage traversant de la dalle.  C'était -80dBm, et cela a enterré la solution. <br><br>  Maintenant c'est au tour de refuser de se placer sous les sièges, car  l'option impliquait beaucoup plus de points d'accès (environ 800) et nécessitait des dalles de béton armé pratiquement criblées d'une épaisseur de 1 m avec des centaines de trous technologiques pour l'alimentation des câbles, ce qui n'est pas clair comment imperméabiliser. <br><br>  L'installation la plus tentante sur le toit semble: la pose du câble le long des passerelles est beaucoup plus facile, d'autant plus qu'il existe même des armoires de télécommunications optiques et climatiques.  Mais ce n'est pas le destin non plus: la distance moyenne entre les passerelles de toit en ligne droite et les tribunes du stade Luzhniki est d'environ 40 m avec une norme de conception d'un maximum de 20 m pour le Wi-Fi HD. <br><br>  La seule option qui reste est de disperser les points autour du périmètre des secteurs du stade.  Cela signifie l'inégalité inévitable de la couverture radio, ainsi que le développement de solutions pour protéger les clients contre les attaques d'équipements.  Il n'y a tout simplement pas d'autre moyen de se conformer aux exigences de la FIFA. <br><br><h2>  25 décembre 2017 </h2><br>  Nous avons divisé les tribunes du stade en secteurs typiques et mené une enquête radio d'un secteur typique.  Pour l'examen, nous avons demandé à Cisco Systems de tester les points AIR-CAP3702E avec des antennes proposées par le fournisseur.  Selon les résultats de l'enquête, il a été possible de définir des moyens de réparer l'équipement.  Pour que les ventilateurs ne puissent pas atteindre les points d'accès, des supports de montage spéciaux sont nécessaires.  Nous devrons les fabriquer sur commande, et plusieurs types de supports sont attendus, en fonction des emplacements d'installation typiques des points d'accès.  Nous avons également besoin de boîtes de montage, comme  les points d'accès proposés par le fournisseur ne sont pas résistants au vandalisme, et les points d'accès Cisco résistants au vandalisme pour le Wi-Fi HD sont beaucoup plus chers et n'apparaîtront certainement pas sur le site pour le match Russie-Brésil. <br><br><h2>  28 décembre 2017 </h2><br>  Les concepteurs ont obtenu les résultats d'une enquête radio dans un secteur du stade et, selon ces données, ont dessiné une tâche pour la fourniture de câbles SCS pour tous les secteurs.  Décidé sur le nombre requis de points d'accès - 430 pièces.  Cela nous a permis de commencer l'achat de points, de confier une tâche au fabricant de supports et de boîtiers de montage, ainsi que de déterminer les commutateurs d'accès croisés à installer afin de pouvoir connecter nos points d'accès.  Il est déjà clair que le projet a besoin de 12 types différents de supports de montage.  Pour l'instant, l'achat de supports devra être limité à un lot pilote, car le client doit d'abord voir la solution en nature et s'assurer que les points d'accès ne gênent personne.  La spécification des commutateurs d'accès, des antennes et des points Wi-Fi a été donnée dans son intégralité dans la commande.  Si le matériel commandé arrive fin février, nous n'aurons qu'un mois avant le début du match test. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f87/986/1cd/f879861cdeabee49f0c033eb5263354d.jpg"></div>  <i>Un fragment du dessin d'installation de l'un des supports utilisés au stade</i> <br><br><h2>  15 janvier 2018 </h2><br>  Le stade est froid, mais il n'y a pas de fortes gelées, ce qui permet à nos installateurs de tirer les câbles vers les emplacements d'installation des points d'accès en 2 équipes.  Les premiers échantillons pilotes de supports de montage sont arrivés.  Étant donné que les points d'accès n'ont pas encore été apportés, ils ont décidé de faire une installation pilote à l'aide d'équipements précédemment empruntés à Cisco Systems pour effectuer des levés radio. <br><br>  En attendant, les ingénieurs travaillent sur une solution d'authentification SMS des abonnés.  Un sous-système distinct devrait en être responsable.  Il existe plusieurs fabricants de logiciels et opérateurs de télécommunications sur le marché auprès desquels vous pouvez acheter ce sous-système - soit sous forme de logiciel, soit sous forme de service.  Nous nous sommes installés sur un produit appelé WNAM de Netams LLC, qui travaillait pour nous au stade Otkritie Arena.  Voici à quoi tout cela devrait ressembler en termes généraux. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fdc/76d/392/fdc76d3927ddcb95a15572712d3fc913.jpg"></div>  <i>Architecture générale du système</i> <br><br>  WNAM communique avec les contrôleurs Wi-Fi à l'aide du protocole RADIUS.  Lorsqu'un abonné essaie de se connecter au SSID, le contrôleur demande à WNAM s'il existe un client avec l'adresse MAC d'où provient la demande de connexion dans la base de données des utilisateurs enregistrés.  Si tel est le cas, le client accède à Internet et est éventuellement redirigé vers le site de départ (dans notre cas, c'est le portail FIFA welcome2018.com).  S'il n'est pas là, le contrôleur redirige l'utilisateur vers le portail d'authentification et jusqu'à présent, à l'exception de ce portail, ne le laisse pas entrer.  Le portail est une page Web qui tourne sur le serveur d'autorisation WNAM.  La conception du portail d'authentification pour chaque projet est unique et est développée séparément (dans notre cas particulier, elle a été envoyée par la commission d'organisation de la FIFA).  Pendant la Coupe du monde, la page de démarrage de l'authentification devrait ressembler à ceci: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee5/804/9de/ee58049de809eefdd5edce08f12c5a88.png"></div><br>  Dès que l'utilisateur entre son numéro de téléphone, WNAM génère un code d'autorisation et l'envoie par SMS via l'utilitaire kannel via le protocole SMPP à l'opérateur SMS, et ce dernier via l'opérateur mobile correspondant à l'utilisateur final. <br><br>  Afin d'échanger des données avec l'opérateur, dans notre cas, nous avons besoin d'un tunnel IPSEC et, bien sûr, d'un accord en vertu duquel cet opérateur SMS travaillera avec nous. <br><br>  L'opérateur est facturé pour l'envoi de chaque SMS.  L'entrepreneur doit payer, dans ce cas, le propriétaire de l'infrastructure Wi-Fi.  (En fait, vous pouvez donner à l'abonné un code unique sur le portail Web, puis lui demander d'envoyer ce code au numéro de l'opérateur SMS. Dans ce cas, l'abonné paiera l'envoi du SMS, mais nous ne sommes pas allés de cette façon). <br><br>  Lors de la livraison réussie du message SMS, l'opérateur mobile génère un rapport de livraison dans la direction opposée confirmant le fait de recevoir le SMS.  Ce message est transmis par l'opérateur SMS à WNAM, nous savons donc si l'abonné a reçu un mot de passe à usage unique ou non. <br><br>  L'utilisateur est invité à saisir un mot de passe sur le portail.  Si le mot de passe est correct, WNAM demande au responsable du traitement d'autoriser l'abonné et de lui donner accès à Internet. <br><br><h2>  1 février 2018 </h2><br>  Des contrôleurs Wi-Fi, des commutateurs d'accès et des pare-feu sont arrivés sur le site.  L'équipement a été installé et la mise en service a commencé.  Les collègues de Netams ont commencé à configurer WNAM.  Pendant ce temps, le client a reçu un appel des services concernés et a été rappelé la haute responsabilité qui incombe à nous tous concernant le développement d'incidents potentiels de sécurité de l'information lors des matchs de la Coupe du monde. <br><br>  Pour gagner du temps, nous négocions activement de manière informelle des unités pilotes d'assemblage avec le client.  Nous expliquons que les antennes et les points d'accès sont déjà achetés et vont à l'objet, donc le maximum que nous pouvons changer dans des conditions de délais extrêmement serrés est de déplacer légèrement les points ou de fixer légèrement les supports.  Sinon, le projet peut être minimisé.  Le client va de l'avant et apporte des ajustements minimes aux solutions pilotes.  Ainsi, nous coordonnons lentement des lots de conception de supports de montage typiques pour la commande. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/275/762/377/275762377822cc6c709cd8c5661fb125.jpg"></div><br><h2>  12 février 2018 </h2><br>  Le comité d'organisation a envoyé des exigences spécifiques pour le réseau Wi-Fi pour les fans.  Les principaux changements concernent les rapports statistiques que le comité d'organisation nous demandera à chaque match de championnat du monde.  Certaines exigences sont très spécifiques.  En plus des éléments évidents, tels que les horaires de téléchargement des canaux de communication et le nombre d'abonnés, il est nécessaire de calculer le ratio d'utilisateurs dans les bandes 2,4 et 5 GHz, ainsi que des données sur la façon dont les abonnés passent par les différentes étapes de l'authentification, et même ventilées par pays d'où ces abonnés sont arrivés. .  La commission d'organisation de la FIFA voulait voir les statistiques non seulement sous forme de graphiques interactifs, mais également sous forme de tableaux avec la possibilité d'exporter automatiquement les données vers Excel et PDF, et avant d'exporter, l'option de définir la période pour laquelle les données sont nécessaires devrait être disponible.  De telles exigences ont conduit à l'idée d'un système «parapluie» distinct pour la collecte et l'analyse des statistiques, qui résumera les données des différentes composantes du service, car les informations sur l'utilisation des canaux des opérateurs de communication, par exemple, devraient être extraites du pare-feu, les statistiques d'authentification des journaux WNAM, et des données sur le nombre d'abonnés dans les bandes 2,4 et 5 GHz - uniquement sur les contrôleurs et nulle part ailleurs.  Ainsi, dans notre projet est apparue l'artillerie lourde sous la forme d'un système de collecte et d'analyse des statistiques Splunk Enterprise. <br><br><h2>  14 février 2018 </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fbb/152/138/fbb15213885a05f496f50ab8fb98b5a7.jpg"></div>  <a href="">Source</a> <br><br>  Mais qu'en est-il des plaintes concernant les mauvaises performances Wi-Fi?  Comment évaluer le service, si vous ne contrôlez pas tous ses composants, il y a trop de problèmes «flottants» et les descriptions d'incidents reçues des abonnés ne prennent que du temps?  Pourquoi ne pas disperser dans le stade des appareils qui se comporteront sur un réseau Wi-Fi de la même manière que nos utilisateurs, et nous envoyer en même temps des journaux détaillés sur la réalité?  Il doit s'agir d'appareils qui pourraient eux-mêmes se connecter à un réseau Wi-Fi, s'authentifier auprès de WNAM, surfer sur Internet, se déconnecter et tout faire selon le script encore et encore, en nous envoyant des journaux détaillés à chaque étape.  Bien sûr, tout cela devrait être bon marché, car le budget du projet est presque épuisé.  Il sera nécessaire de discuter de ce sujet avec les ingénieurs, il peut être possible de trouver quelque chose. <br><br><h2>  15 février 2018 </h2><br>  Nous avons discuté avec les ingénieurs de l'idée d'une surveillance proactive du Wi-Fi en simulant l'activité des utilisateurs.  Ils se souvenaient du Raspberry Pi.  En théorie, il peut être doté des fonctionnalités d'un appareil mobile, s'il est équipé d'un modem GSM avec une carte SIM, qui recevra des SMS avec un code d'authentification unique.  Le produit peut être alimenté par PoE, via un extracteur PoE. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a1d/b62/10b/a1db6210b72c16f230a47f261ba7b374.png"></div>  <i>Aspect Raspberry Pi 3 modèle B sans boîtier</i> <br><br><h2>  26 février 2018 </h2><br>  Les ingénieurs ont publié un projet de dispositif de surveillance proactif basé sur le Raspberry Pi 3 modèle B. Il est prévu de lui connecter un adaptateur Wi-Fi Wi-Fi D-Link DWA-171 / RU / A1A, car l'adaptateur Wi-Fi interne ne prend pas en charge le réseau dans la plage 5GHz (c'est dommage que la version B +, où il y a un adaptateur intégré pour les deux bandes, sortira un mois plus tard), ainsi que le modem 3G / GSM Huawei E3372h-153USB avec une carte SIM.  Le mini-ordinateur peut être alimenté via l'extracteur PoE intermédiaire Upvel UP-102S.  Tout cela sera emballé dans un boîtier en plastique. <br><br>  Sur le mini-ordinateur Raspbian OS, le navigateur Internet Firefox et le composant de transfert Splunk sont installés, ce qui devrait transmettre les journaux à Splunk Enterprise.  Le scénario d'activité du micro-ordinateur est défini par un script python distinct.  Les journaux sont envoyés via Ethernet câblé plutôt que Wi-Fi, ce qui est un autre avantage de la solution. <br><br>  Le script de vérification est basé sur l'interaction avec le navigateur et l'exécution d'actions similaires à ce que l'utilisateur effectue tout en travaillant avec le Wi-Fi (chargement de la page d'authentification, saisie du numéro auquel la carte SIM est enregistrée, saisie du code reçu par SMS, plusieurs Tests de vitesse Internet).  La bibliothèque Selenium créée pour le langage Python était parfaitement adaptée à cela. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9cd/e75/451/9cde7545194b5352e8e4c1a0cf239cc6.png"></div>  <i>Voici un produit.</i>  <i>Sur la photo - le cas avec le couvercle retiré.</i> <br><br><h2>  28 février 2018 </h2><br>  Le client a aimé l'idée avec Raspberry.  Il a accepté d'inclure 50 mini-ordinateurs dans la solution et d'acheter pour eux les cartes SIM de trois opérateurs mobiles.  Maintenant, si pendant un match quelqu'un appelle et commence à se plaindre des mauvaises performances Wi-Fi, nous aurons 50 appareils de référence qui peuvent être utilisés pour voir l'image globale du fonctionnement du service dans le stade. <br><br><h2>  5 mars 2018 </h2><br>  Le premier lot de supports de montage est venu.  Tous les points d'accès et antennes sont déjà sur le site, les câbles SCS sont étendus et il n'y a pas assez de supports.  Nous montons ce qui est.  Nous avons convenu avec le client que des points d'accès sur des secteurs standard seront montés pour le match test Russie-Brésil afin de pouvoir vérifier l'exactitude des décisions sur l'arrangement.  Il est dommage qu'avant la cérémonie d'ouverture, nous n'aurons certainement pas le temps de tester la framboise. <br><br><h2>  15 mars 2018 </h2><br>         .    ,          . ,  ,    –        .  ,  ,  -        .  ,  , ,  ,     . <br><br><h2> 20  2018  </h2><br>          -2, -3  ,     - .        WNAM     3,         IP , MAC-   SIM- ,     . <br><br><h2> 23  2018 .   « — » </h2><br>          ,      .               ( 50%   )  Wi-Fi   ,     .     – ,               ,     -   . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/eba/f79/12a/ebaf7912aa12fed96fe0096357a33c2c.jpg"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/922/137/1cf/9221371cf71c5cf6046cc48694c23302.jpg"></div><br>                 .   ,    .       . -    .        .            ,     . <br><br>       -  -:   , , , AD DS, Wi-Fi…           ,       Splunk Enterprise. Splunk Enterprise     - ,    .      Wi-Fi  . <br><br>   ,        2,4  5  ( ,  ,      Splunk'  API  Wi-Fi  Cisco  HPE       HP IMC,      HP,  Cisco Prime,     Cisco). <br><br>     ,    ,    .      ,     « ».            -2018   «». <br><br>  ,   ,         .      ,       .    -    ,         ,     .  ,  ,   . <br><br>    .  ,     ,     Splunk,     .      ,  ,          ,   , , ,      .    .          . <br><br><h2> 16  2018  </h2><br>  ,      ,          ,    .    SIM-  , , ,  ,          . <br><br>       SMS-.     -     Wi-Fi   ,      FAN-ID   .           WNAM     SMS-   FAN-ID.    ,   FAN ID,    ,      . <br><br><h2> 15  2018  </h2><br>   WNAM       SIM-.   FAN ID     ,   FAN ID   . <br><br> -    -   .    .  ,     Raspberry,       .      14 . <br><br><h2> 12  2018  </h2><br>    ,    Wi-Fi,           .    Wi-Fi ,      .  ,      ,    .    . <br><br><h2> 14 .  «- » </h2><br>     - «»,   -          .    —  ,        « . .  ».      . <br><br>     ,         , –    -   VIP-,          .      ,       ,            . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6f3/ca5/c6e/6f3ca5c6eb558a56c5635a9f49e65689.jpg"></div>  <a href="">Source</a> <br><br>        .   ,       .        ,         ,    ,                .               .   .  ,   Wi-Fi,  . <br><br> -     .     ,     SMS-     – 30%   50%.       ,        ,      . ,     . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/efa/171/0df/efa1710df71b984af961d7d8705dcb0c.png"></div> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u="></a> . <i>      HD WI-FI</i> <br><br><h2> 15  2018  </h2><br>    WNAM  ,             WiFi HD -    FAN ID.     ,     ,   ,     . ,    ,     .       FIFA   ,       Wi-Fi  : <br><br><ul><li>        ,     , </li><li>    ,     , </li><li>       ,  -       . </li></ul><br><h2> 17  2018 .  « — » </h2><br>              Wi-Fi  VIP-.    -.  -      .   –  .  -     .      .       .   .       Wi-Fi. <br><br>   .  ,           : <br><br> <i>–     .     ?</i> <br><br>  .        ,     -  .   : <br><br> <i>–      FAN ID.    , . <br><br> – , –</i>   <i>, –       Instagram. -,      .             .   ,  .</i> <br><br>       - .         ,     .     ,      . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/aee/e32/ff4/aeee32ff45b50b8a7212b3eb307533cb.jpg"></div>  <a href="">Source</a> <br><br><h2> 18  2018  </h2><br>        ,     ,          .         Raspberry Pi,     -    ,     . ,      , Raspberry    ,  Wi-Fi  . ,       ,         .  Splunk    WNAM ,    . ,     . <br><br>      Raspberry ,     ,           .      ,    15  .     Firefox  PhantomJS,           .           Splunk'        . <br><br>        50     Ansible. <br><br>       : ,  ,   Raspberry      . ,        SMS-, ,        .     SMS-     ,  WNAM', , ,     . <br><br><h2> 20  2018 .  «-» </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"Que diable fait le Maroc avec ça?" </font><font style="vertical-align: inherit;">«Notre ingénieur de surveillance WNAM s'est exclamé à la hâte quand il a vu une file d'attente croissante d'envois de SMS sortants sans rapport de livraison. </font><font style="vertical-align: inherit;">Nous avions des statistiques dans les journaux sur l'envoi de SMS pour tous les opérateurs qui ont des codes dans des bases de données ouvertes, et nous pouvions voir quels pays les SMS sont reçus normalement et lesquels avec un retard. </font><font style="vertical-align: inherit;">Le Royaume du Maroc occupe une position extérieure forte dans nos statistiques. </font><font style="vertical-align: inherit;">Au début du second semestre, il a été décidé de rediriger le mailing vers un autre opérateur SMS, ce qui a quelque peu amélioré la situation.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">26 juin 2018. </font><font style="vertical-align: inherit;">Match Danemark-France</font></font></h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/31d/282/402/31d282402b1ffa08900e3c1b7a29610d.jpg"></div> <a href="">Source</a> <br><br>  La retransmission en direct habituelle du match depuis le stade était à la télévision.  Nous devons regarder la diffusion afin de ressentir la dynamique de l'activité du client Wi-Fi: pendant le jeu, elle tombe, et au contraire, elle grandit pendant les pauses. <br><br>  Par rapport au match Portugal-Maroc, l'escorte s'est avérée plus détendue, car le Danemark et la France sont des pays européens et les statistiques SMS pour eux étaient attendues mieux que pour le Maroc.  Par conséquent, nous avons consacré le match au débogage des scripts Rasberry et nous avons été tellement emportés par ce processus que seulement à la fin du match, nous avons réalisé que tout ce temps, il y avait une émission sur un match complètement différent à la télévision, non pas du stade Luzhniki, mais du stade Fisht. <br><br>  Après le match, dans le métro, un gars m'a collé des questions: <br><br>  <i>- Écoutez, et qui vient de jouer au stade Luzhniki?</i> <br><br>  Je me souviens à peine des noms des équipes: <br><br>  <i>- Danemark et France.</i>  <i>Oui, la France.</i> <i><br><br></i>  <i>- Et quel est le score?</i> <br><br>  Je ne me souviens pas du tout du score, parce que je n'ai pas regardé le match, et je l'ai signalé.  Lorsque l'homme s'est rendu compte que j'allais du stade et ne connaissait pas le score, il m'a regardé avec une stupéfaction non déguisée. <br><br><h2>  11 juillet 2018, match Angleterre - Croatie </h2><br>  Au milieu du second semestre, une activité réseau suspecte d'un des abonnés connectés a été détectée sur le pare-feu.  À partir de son adresse IP, le pare-feu a bloqué un grand nombre de connexions sur des ports non standard (qui ont été fermés par la politique de pare-feu).  Des demandes ont été adressées à la Russie, aux pays de la CEI et à l'Europe.  Comme il s'agissait d'un incident de l'EI, les agents de sécurité se sont mis au travail avec enthousiasme. <br><br>  À l'aide des journaux WNAM, nous avons calculé le numéro de téléphone auquel l'abonné est enregistré.  Ils ont appelé le numéro spécifié.  Ils se sont présentés comme le service opérationnel de Luzhniki.  Ils ont informé un gars que nous voyions une activité réseau suspecte du téléphone et aimeraient donc clarifier s'il était un pirate informatique.  Le gars à l'autre bout de la ligne nous a dit qu'il ne comprenait absolument rien.  Nous avons dit que dans ce cas, si cela ne le dérange pas, nous bloquerons son accès au réseau.  L'homme ne s'en souciait pas.  Il y avait une certaine impression qu'il soutenait même cette initiative.  Nous avons bloqué l'accès et transmis les journaux d'incidents au client. <br><br><h2>  15 juillet 2018, match France-Croatie, finale </h2><br>  Au milieu du premier semestre, un représentant du service opérationnel de Luzhniki est venu à notre siège.  Il a amené avec lui un spectateur que nous avons appelé lors du dernier match.  Il s'est avéré que l'homme a pris une position active, a contacté le service des opérations de Luzhniki et a demandé à organiser une réunion.  Il a amené un téléphone avec lui et a déclaré qu'il n'avait fait aucune tentative de piratage, il était donc quelque peu alarmé et aimerait comprendre ce qui le concerne. <br><br>  Il s'est avéré être un smartphone Android bon marché de Samsung, dont un examen rapide a révélé le client torrent installé sur celui-ci, ainsi que de nombreux autres logiciels d'origine douteuse, qui ont probablement généré une activité suspecte.  Nous avons recommandé qu'une personne analyse le téléphone avec un antivirus, supprime les logiciels inutiles et s'abstienne d'utiliser le client torrent. <br><br><h2>  Conclusion </h2><br><blockquote>  <i>La participation de LANIT à la reconstruction de l'infrastructure informatique de la Luzhniki Grand Sports Arena pour la Coupe du monde est terminée.</i>  <i>Pendant quatre ans et demi de travail, nous avons construit une cinquantaine de systèmes informatiques et à faible courant et trois centres de données, suspendu un millier de caméras et 650 panneaux de télévision, configuré des réseaux locaux pour 12 000 ports et créé deux réseaux Wi-Fi haute densité pour les fans du championnat - 430 points d'accès Cisco dans la cuvette du stade et 650 points d'accès HP dans l'espace tribune.</i> </blockquote><br>  Quelles caractéristiques non évidentes ont été identifiées dans la solution lors de la mise en service et de l'essai de HD WiFi à la Luzhniki BSA: <br><br><ul><li><div class="spoiler">  <b class="spoiler_title">L'authentification SMS n'est pas une solution prête à l'emploi.</b>  <b class="spoiler_title">Le déploiement d'un système efficace nécessite une personnalisation hautement qualifiée et une surveillance active.</b> <div class="spoiler_text">  Il s'agit du développement d'un portail d'authentification, de la mise en place d'une interaction avec un opérateur SMS, et la chose la plus difficile à faire est de mettre en place l'intégration avec les contrôleurs Wi-Fi.  Bien que RADIUS soit un protocole standard, il a ses propres caractéristiques d'interaction avec chaque modèle de contrôleur.  Certains modèles de contrôleurs ne peuvent pas du tout être intégrés.  Nous avons eu de la chance: avec les contrôleurs Cisco 8510 et HPE870, WNAM a fonctionné et il a refusé d'être ami avec le HPE870 presque jusqu'au dernier.  En raison de l'intégration avec WNAM des deux contrôleurs, il a été possible de résoudre le problème de l'itinérance entre les réseaux Wi-Fi sur Cisco et HPE.  Si une personne passait de la zone de couverture d'un réseau à la zone de couverture d'un autre, les sessions étaient bien sûr interrompues, mais en raison de la présence d'une base de données commune des abonnés, le changement se faisait plus ou moins imperceptiblement. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">La livraison par SMS ne fonctionne pas toujours comme nous le souhaiterions.</b>  <b class="spoiler_title">Surtout quand il s'agit de pays exotiques.</b> <div class="spoiler_text">  Il y a beaucoup de raisons pour lesquelles les SMS peuvent arriver trop tard (nous connaissons quelques Hongrois qui attendaient des SMS avec un code pendant 5 minutes), ou ne pas arriver du tout.  L'un d'eux est le filtre anti-spam du côté des opérateurs SMS.  Par exemple, un code d'accès unique dans SMS est presque garanti de ne pas parvenir à un abonné avec une carte SIM étrangère, si l'ID de l'expéditeur n'est pas un numéro de téléphone, mais un nom (par exemple, Luzhniki).  Une séquence de plusieurs messages identiques vers le même numéro peut également être perçue par l'opérateur comme du spam et bloquée.  Le problème est aggravé par le fait que parfois un message est transmis non pas par un, mais par une chaîne d'opérateurs SMS que vous ne connaissez pas, chacun ayant ses propres paramètres de filtre anti-spam. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">L'abonné peut refuser l'authentification pour des raisons totalement non évidentes.</b> <div class="spoiler_text">  Tout le monde n'aime pas l'idée de partager son numéro de téléphone mobile en échange d'un accès à Internet.  Une situation est considérée comme normale lorsque 50% de ceux qui accèdent au portail d'authentification reçoivent un accès Internet.  Cependant, pour améliorer la qualité de service, il est toujours utile de découvrir les raisons pour lesquelles les abonnés ont essayé de s'inscrire sur le réseau, mais n'ont pas pu accéder à Internet.  Vous pouvez peut-être y remédier. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Les fans des stades HD ont besoin de beaucoup moins que nous le souhaiterions.</b> <div class="spoiler_text">  Lorsque nous avons conçu le Wi-Fi HD, nous nous attendions à ce que 20% des fans l'utilisent en même temps, bien que dans tous les matches, les indicateurs étaient inférieurs à cette valeur.  Parmi les méthodes que nous avons utilisées pour augmenter le nombre d'utilisateurs, les suivantes ont fonctionné: les annonces vocales et textuelles indiquant que le Wi-Fi gratuit fonctionne dans l'installation, ainsi que l'ajout d'instructions détaillées pour la connexion au portail d'authentification. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">Vous ne serez jamais le seul à offrir une connexion Wi-Fi dans l'établissement.</b> <div class="spoiler_text">  Lors du dernier match, nous avons lancé une analyse de réseau pour Rogue AP et dans les tribunes du stade, nous avons compté plus de 3 000 appareils «étrangers» fonctionnant en mode point d'accès.  De plus, il s'agissait à la fois de téléphones mobiles distribuant le Wi-Fi et de solutions spéciales d'opérateurs étrangers, par exemple Skyroam et Roamingman.  Une publicité était suspendue près des tourniquets d'entrée interdisant la distribution du Wi-Fi dans le stade, mais cela ne semble pas fonctionner du moins d'une manière ou d'une autre. </div></div></li><li><div class="spoiler">  <b class="spoiler_title">La surveillance proactive du Wi-Fi HD, simulant l'activité des utilisateurs, peut être efficace, mais nécessite beaucoup de travail dans la mise en œuvre et la maintenance</b> <div class="spoiler_text">  Il est beaucoup plus amusant de recevoir des données de micro-ordinateurs Raspberry que de s'asseoir et d'attendre une autre plainte d'utilisateurs mécontents.  Bien sûr, Raspberry était capricieux, et l'écriture et le débogage de scripts nous ont pris beaucoup de temps.  Mais cela nous a permis de regarder le service Wi-Fi HD sous un angle différent, a envoyé le processus de surveillance dans une direction plus constructive et, par conséquent, nous a vraiment aidés à localiser plusieurs erreurs «flottantes», ce qui a eu une incidence positive sur la qualité du service.  De plus, chaque fois que quelqu'un nous contactait pour des questions sur le Wi-Fi HD de sa petite amie, nous avions quelque chose à répondre. </div></div></li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr423645/">https://habr.com/ru/post/fr423645/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr423635/index.html">Lecteur de livres audio de style rétro</a></li>
<li><a href="../fr423637/index.html">7 leçons pratiques sur UX</a></li>
<li><a href="../fr423639/index.html">Écriture plus efficace de tableaux dans la mémoire persistante d'un contrat intelligent dans Solidity</a></li>
<li><a href="../fr423641/index.html">Deep Learning et OpenVINO Toolkit. Réponses d'experts Intel</a></li>
<li><a href="../fr423643/index.html">Les banques surveillent de plus en plus la réputation de leurs clients: enquête Business Insider</a></li>
<li><a href="../fr423647/index.html">Créer un réseau neuronal simple</a></li>
<li><a href="../fr423649/index.html">"Kubernetes à tous les domaines!" - Entretien avec le comité de programme de la conférence DevOops</a></li>
<li><a href="../fr423651/index.html">Nous invitons tout le monde au hackathon SmartMail Hack: À propos de Bienvenue</a></li>
<li><a href="../fr423653/index.html">PsRealVehicle, ou plug-in Open Source Tank Physics dans Armored Warfare: Assault</a></li>
<li><a href="../fr423657/index.html">Je ne respecte pas l'encapsulation ou l'utilisation d'un autre type de table de méthodes pour appeler rapidement des méthodes privées</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>