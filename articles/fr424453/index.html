<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üë®üèª‚Äçüíº üßöüèæ üà¥ Apprenez OpenGL. Le√ßon 6.2 - Rendu bas√© sur la physique. Sources de lumi√®re analytiques üéã ü•Å üöª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La le√ßon pr√©c√©dente a donn√© un aper√ßu des bases de la mise en ≈ìuvre d'un mod√®le de rendu physiquement plausible. Cette fois, nous passerons des calcul...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apprenez OpenGL. Le√ßon 6.2 - Rendu bas√© sur la physique. Sources de lumi√®re analytiques</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/424453/"><img src="https://habrastorage.org/web/c9e/9b2/a3b/c9e9b2a3baf749ab8e2b385c6d93d966.png" alt="OGL3" align="left" width="300">  La le√ßon <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">pr√©c√©dente a</a> donn√© un aper√ßu des bases de la mise en ≈ìuvre d'un mod√®le de rendu physiquement plausible.  Cette fois, nous passerons des calculs th√©oriques √† une impl√©mentation de rendu sp√©cifique avec la participation de sources lumineuses directes (analytiques): de type point, directionnel ou spot. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Table des mati√®res</b> <div class="spoiler_text">  Partie 1. Pour commencer <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Opengl</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cr√©ation de fen√™tres</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bonjour fen√™tre</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bonjour triangle</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shaders</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Textures</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Transformations</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Syst√®mes de coordonn√©es</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Appareil photo</a> </li></ol><br>  Partie 2. √âclairage de base <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les couleurs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bases d'√©clairage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mat√©riaux</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes de texture</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources lumineuses</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources d'√©clairage multiples</a> </li></ol><br>  Partie 3. T√©l√©charger des mod√®les 3D <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Biblioth√®que Assimp</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Classe de polygone de maillage</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Classe de mod√®le 3D</a> </li></ol><br>  Partie 4. Fonctionnalit√©s avanc√©es d'OpenGL <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test de profondeur</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Test au pochoir</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">M√©lange de couleurs</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Couper les visages</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tampon de trame</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes cubiques</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Traitement avanc√© des donn√©es</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">GLSL avanc√©</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Shader g√©om√©trique</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Instanciation</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lissage</a> </li></ol><br>  Partie 5. √âclairage avanc√© <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">√âclairage avanc√©.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mod√®le Blinn-Fong.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Correction gamma</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes fant√¥mes</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartes ombr√©es omnidirectionnelles</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Cartographie normale</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Mappage de parallaxe</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">HDR</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Bloom</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Rendu diff√©r√©</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">SSAO</a> </li></ol><br>  Partie 6. PBR <br><br><ol><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Th√©orie</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Sources de lumi√®re analytiques</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Irradiation diffuse.</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">IBL</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Exposition miroir.</a> </li></ol><br></div></div><br>  Tout d'abord, rafra√Æchissons l'expression pour calculer la r√©flectivit√© de la le√ßon pr√©c√©dente: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>L</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>k</mi><mi>d</mi></msub><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>i</mi></mrow><mo>+</mo><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mo stretchy=&quot;false&quot;>)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>p</mi><mo>,</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="131.632ex" height="2.78ex" viewBox="0 -832 56674.5 1197.1" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="963" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-28" x="1124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="1514" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-2C" x="2017" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="2712" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="3198" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="4076" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="4543" y="0"></use><g transform="translate(5023,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-29" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-3D" x="6664" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="7970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="8315" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="8916" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6C" x="9527" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="9826" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="10171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="11050" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="11395" y="0"></use><g transform="translate(11757,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-73" x="0" y="0"></use><g transform="translate(469,-155)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4F" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="1117" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="1995" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2462" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="2942" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-28" x="14781" y="0"></use><g transform="translate(15171,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="737" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-66" x="16413" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-72" x="16963" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="17415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="17944" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="18378" y="0"></use><g transform="translate(18811,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="753" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-2B" x="20132" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-66" x="21383" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-72" x="21934" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="22385" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="22915" y="0"></use><g transform="translate(23348,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(25713,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-29" x="13946" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-29" x="40049" y="0"></use><g transform="translate(40438,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4C" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="963" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-28" x="41464" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="41853" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-2C" x="42357" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="43052" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="43538" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="44416" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="44883" y="0"></use><g transform="translate(45363,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-29" x="46237" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="46626" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="47477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="47910" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="48434" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="48919" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="49531" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="50016" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="50895" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="51361" y="0"></use><g transform="translate(51842,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="52716" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="53489" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="53975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="54853" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="55320" y="0"></use><g transform="translate(55800,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="748" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>L</mi><mi>o</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>i</mi><mi>m</mi><mi>i</mi><mi>t</mi><msub><mi>s</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>k</mi><mi>d</mi></msub><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>p</mi><mi>i</mi></mrow><mo>+</mo><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mn>4</mn><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo></mrow><mo stretchy="false">)</mo><msub><mi>L</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>p</mi><mo>,</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mi>d</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> L_o (p, \ omega_o) = \ int \ limits _ {\ Omega} (k_d \ frac {c} {\ pi} + \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n) }) L_i (p, \ omega_i) n \ cdot \ omega_i d \ omega_i </script></p><br>  Pour la plupart, nous avons d√©j√† trait√© des composants de cette formule, mais la question reste de savoir comment repr√©senter sp√©cifiquement l' <i>irradiance</i> , qui est la luminosit√© √©nerg√©tique totale ( <i>radiance</i> ) <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> L </script>  toute la sc√®ne.  Nous avons convenu que la luminosit√© √©nerg√©tique <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> L </script>  (en termes de terminologie informatique) est consid√©r√© comme le rapport du flux de rayonnement ( <i>flux rayonnant</i> ) <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.891ex" height="2.419ex" viewBox="0 -780.1 1675.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-68" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="1330" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-4"> \ phi </script>  (√©nergie de rayonnement de la source lumineuse) √† la valeur de l'angle solide <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> \ omega </script>  .  Dans notre cas, l'angle solide <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.178ex" height="1.817ex" viewBox="0 -520.7 3090.5 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="1614" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2080" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="2561" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> \ omega </script>  nous l'avons pris comme infinit√©simal, et donc la luminosit√© √©nerg√©tique donne une id√©e du flux de rayonnement pour chaque rayon de lumi√®re individuel (sa direction). <br><br>  Comment lier ces calculs au mod√®le d'√©clairage que nous connaissons des le√ßons pr√©c√©dentes?  Tout d'abord, imaginez que vous disposez d'une source de lumi√®re ponctuelle unique (qui √©met uniform√©ment dans toutes les directions) avec un flux de rayonnement d√©fini comme une triade RVB (23,47, 21,31, 20,79).  L' <i>intensit√©</i> radiante <i>d'</i> une telle source est √©gale √† son flux de rayonnement dans toutes les directions.  Cependant, apr√®s avoir examin√© le probl√®me de la d√©termination de la couleur d'un point sp√©cifique <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-7"> p </script>  en surface, vous pouvez voir celle de toutes les directions possibles d'incidence de la lumi√®re dans l'h√©misph√®re <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> \ Omega </script>  seul vecteur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-9"> w_i </script>  proviendra √©videmment d'une source lumineuse.  Puisqu'une seule source de lumi√®re est repr√©sent√©e, repr√©sent√©e par un point dans l'espace, pour toutes les autres directions possibles d'incidence de la lumi√®re dans un point <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-10"> p </script>  la luminosit√© √©nerg√©tique sera √©gale √† z√©ro: <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2w/yj/_n/2wyj_neazkcr6gnrviq43nerpz8.png"></div><br>  Maintenant, si nous ne prenons pas temporairement en compte la loi d'amortissement de la lumi√®re pour une source donn√©e, il s'av√®re que la luminosit√© √©nerg√©tique du faisceau lumineux incident de cette source reste inchang√©e partout o√π nous pla√ßons la source (√©chelle de luminosit√© bas√©e sur le cosinus de l'angle d'incidence <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.891ex" height="2.419ex" viewBox="0 -780.1 1675.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-68" x="753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="1330" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>p</mi><mi>h</mi><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> \ phi </script>  ne compte pas non plus).  Au total, une source ponctuelle maintient la force de rayonnement constante quel que soit l'angle de vue, ce qui √©quivaut √† prendre la force de rayonnement √©gale au flux de rayonnement initial sous la forme d'une constante de triade (23,47, 21,31, 20,79). <br><br>  Cependant, le calcul de la luminosit√© √©nerg√©tique est √©galement bas√© sur la coordonn√©e du point <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> p </script>  , au moins n'importe quelle source de lumi√®re physiquement fiable montre l'att√©nuation de la force de rayonnement avec une distance croissante d'un point √† une source.  Vous devez √©galement prendre en compte l'orientation de la surface, comme le montre l'expression originale pour la luminosit√©: le r√©sultat du calcul de la force de rayonnement doit √™tre multipli√© par la valeur scalaire du vecteur normal √† la surface <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.395ex" height="1.455ex" viewBox="0 -520.7 600.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> n </script>  et vecteur d'incidence de rayonnement <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-14"> w_i </script>  . <br><br>  Pour r√©√©crire ce qui pr√©c√®de: pour une source de lumi√®re ponctuelle directe, la fonction de rayonnement <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>L</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.583ex" height="2.057ex" viewBox="0 -780.1 681.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>L</mi></math></span></span><script type="math/tex" id="MathJax-Element-15"> L </script>  d√©termine la couleur de la lumi√®re incidente, en tenant compte de l'att√©nuation √† une distance donn√©e du point <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-16"> p </script>  et en tenant compte de la mise √† l'√©chelle par un facteur <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>n</mi><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="8.629ex" height="2.419ex" viewBox="0 -780.1 3715.3 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="850" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="1284" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="1807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="2293" y="0"></use><g transform="translate(2654,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="1013" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>n</mi><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> n \ cdot w_i </script>  mais seulement pour un seul rayon de lumi√®re <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-18-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-18"> w_i </script>  aller droit au but <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>p</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.259ex" height="1.817ex" viewBox="-38.5 -520.7 542 782.1" role="img" focusable="false" style="vertical-align: -0.607ex; margin-left: -0.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-70" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>p</mi></math></span></span><script type="math/tex" id="MathJax-Element-19"> p </script>  - essentiellement le seul vecteur reliant la source et le point.  Sous forme de code source, cela est interpr√©t√© comme suit: <br><br><pre><code class="cpp hljs">vec3 lightColor = vec3(<span class="hljs-number"><span class="hljs-number">23.47</span></span>, <span class="hljs-number"><span class="hljs-number">21.31</span></span>, <span class="hljs-number"><span class="hljs-number">20.79</span></span>); vec3 wi = normalize(lightPos - fragPos); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> cosTheta = max(dot(N, Wi), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> attenuation = calculateAttenuation(fragPos, lightPos); vec3 radiance = lightColor * attenuation * cosTheta;</code> </pre> <br>  Si vous fermez les yeux sur une terminologie l√©g√®rement modifi√©e, ce morceau de code devrait vous rappeler quelque chose.  Oui, oui, c'est le m√™me code pour calculer la composante diffuse dans le mod√®le d'√©clairage que nous connaissons.  Pour un √©clairage direct, la luminosit√© de l'√©nergie est d√©termin√©e par un seul vecteur pour la source de lumi√®re, car le calcul est effectu√© d'une mani√®re si similaire √† celle que nous connaissons encore. <br><br><blockquote>  Je note que cette affirmation n'est vraie que sous l'hypoth√®se qu'une source ponctuelle de lumi√®re est infinit√©simale et est repr√©sent√©e par un point dans l'espace.  Lors de la mod√©lisation d'une source de volume, sa luminosit√© sera diff√©rente de z√©ro dans de nombreuses directions, et pas seulement sur un faisceau. </blockquote><br>  Pour d'autres sources lumineuses √©mettant un rayonnement √† partir d'un seul point, la luminosit√© √©nerg√©tique est calcul√©e de la m√™me mani√®re.  Par exemple, une source de lumi√®re directionnelle a une direction constante <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-20-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>i</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.464ex" height="1.817ex" viewBox="0 -520.7 1060.8 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-77" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="1013" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>w</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-20"> w_i </script>  et n'utilise pas d'att√©nuation, et la source de projection montre une puissance de rayonnement variable, selon la direction de la source. <br><br>  Nous revenons ici √† la valeur de l'int√©grale <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-21-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>t</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.617ex" height="1.937ex" viewBox="0 -728.2 1557.5 834" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="595" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="1196" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-21"> \ int </script>  √† la surface de l'h√©misph√®re <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-22-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-22"> \ Omega </script>  .  Puisque nous connaissons √† l'avance les positions de toutes les sources de lumi√®re participant √† l'ombrage d'un point particulier, nous n'avons pas besoin d'essayer de r√©soudre l'int√©grale.  Nous pouvons calculer directement l'irradiation totale fournie par ce nombre de sources lumineuses, car la luminosit√© √©nerg√©tique de la surface est affect√©e par une seule direction pour chaque source. <br><br>  Par cons√©quent, le calcul PBR pour les sources de lumi√®re directe est une question assez simple, car tout se r√©sume √† une recherche s√©quentielle des sources impliqu√©es dans l'√©clairage.  Plus tard, un composant de l'environnement appara√Ætra dans le mod√®le d'√©clairage, sur lequel nous travaillerons dans le tutoriel sur l'√©clairage bas√© sur l'image ( <i>Image-Based Lighting</i> , <i>IBL</i> ).  Il n'y a pas d'√©chappatoire √† l'estimation de l'int√©grale, car la lumi√®re dans un tel mod√®le tombe de plusieurs directions. <br><br><h2>  Mod√®le de surface PBR </h2><br>  Commen√ßons par le fragment shader qui impl√©mente le mod√®le PBR d√©crit ci-dessus.  Tout d'abord, nous d√©finissons les donn√©es d'entr√©e n√©cessaires pour l'ombrage de surface: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 330 core out vec4 FragColor; in vec2 TexCoords; in vec3 WorldPos; in vec3 Normal; uniform vec3 camPos; uniform vec3 albedo; uniform float metallic; uniform float roughness; uniform float ao;</span></span></code> </pre> <br>  Ici, vous pouvez voir l'entr√©e habituelle calcul√©e √† l'aide du vertex shader le plus simple, ainsi qu'un ensemble d'uniformes qui d√©crivent les caract√©ristiques de surface de l'objet. <br><br>  De plus, au tout d√©but du code du shader, nous effectuons des calculs qui sont si familiers de la mise en ≈ìuvre du mod√®le d'√©clairage Blinn-Fong: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ vec3 N = normalize(Normal); vec3 V = normalize(camPos - WorldPos); [...] }</code> </pre> <br><h4>  √âclairage direct </h4><br>  L'exemple de cette le√ßon ne contient que quatre sources lumineuses ponctuelles qui sp√©cifient clairement l'irradiation de la sc√®ne.  Pour satisfaire l'expression de la r√©flectivit√©, nous parcourons it√©rativement chaque source de lumi√®re, calculons la luminosit√© √©nerg√©tique individuelle et r√©sumons cette contribution, en modulant simultan√©ment la valeur BRDF et l'angle d'incidence du faisceau lumineux.  Vous pouvez imaginer cette it√©ration comme une solution de l'int√©grale sur la surface <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-23-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-23"> \ Omega </script>  Pour les sources lumineuses analytiques uniquement. <br><br>  Donc, nous calculons d'abord les valeurs calcul√©es pour chaque source: <br><br><pre> <code class="cpp hljs">vec3 Lo = vec3(<span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; <span class="hljs-number"><span class="hljs-number">4</span></span>; ++i) { vec3 L = normalize(lightPositions[i] - WorldPos); vec3 H = normalize(V + L); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance = length(lightPositions[i] - WorldPos); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> attenuation = <span class="hljs-number"><span class="hljs-number">1.0</span></span> / (distance * distance); vec3 radiance = lightColors[i] * attenuation; [...]</code> </pre> <br>  Comme les calculs sont effectu√©s dans un espace lin√©aire ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">une correction gamma est</a> effectu√©e √† la fin du shader), une loi d'att√©nuation plus correcte physiquement est utilis√©e en fonction du carr√© inverse de la distance: <br><br><blockquote>  Supposons que la loi du carr√© inverse soit plus correcte physiquement, afin de mieux contr√¥ler la nature de l'amortissement, il est tout √† fait possible d'utiliser la formule d√©j√† famili√®re contenant des termes constants, lin√©aires et quadratiques. </blockquote><br>  De plus, pour chaque source, nous calculons √©galement la valeur du miroir Cook-Torrance BRDF: <br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-24-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>4</mn><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo><mo stretchy=&quot;false&quot;>(</mo><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy=&quot;false&quot;>)</mo></mrow></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="43.933ex" height="2.66ex" viewBox="0 -832 18915.6 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-72" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="1252" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="1781" y="0"></use><g transform="translate(2215,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-44" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-46" x="828" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-47" x="1578" y="0"></use></g><g transform="translate(4579,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-34" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-28" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="1140" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="1625" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="2504" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2970" y="0"></use><g transform="translate(3451,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="4673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="5107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="5630" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="6477" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-29" x="7078" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-28" x="7467" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="8107" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="8592" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="9471" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="9937" y="0"></use><g transform="translate(10418,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-69" x="748" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-63" x="11542" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="11975" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6F" x="12499" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-74" x="12984" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6E" x="13346" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMAIN-29" x="13946" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>D</mi><mi>F</mi><mi>G</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mn>4</mn><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>o</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mtext>&nbsp;</mtext><mi>o</mi><mi>m</mi><mi>e</mi><mi>g</mi><msub><mi>a</mi><mi>i</mi></msub><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>n</mi><mo stretchy="false">)</mo></mrow></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-24"> \ frac {DFG} {4 (\ omega_o \ cdot n) (\ omega_i \ cdot n)} </script></p><br>  La premi√®re √©tape consiste √† calculer le rapport entre la r√©flexion sp√©culaire et diffuse, ou, en d'autres termes, le rapport entre la quantit√© de lumi√®re r√©fl√©chie et la quantit√© de lumi√®re r√©fract√©e par la surface.  De la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">le√ßon pr√©c√©dente,</a> nous savons √† quoi ressemble le calcul du coefficient de Fresnel: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">vec3 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fresnelSchlick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cosTheta, vec3 F0)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> F0 + (<span class="hljs-number"><span class="hljs-number">1.0</span></span> - F0) * <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(<span class="hljs-number"><span class="hljs-number">1.0</span></span> - cosTheta, <span class="hljs-number"><span class="hljs-number">5.0</span></span>); }</code> </pre> <br>  L'approximation de Fresnel-Schlick attend le param√®tre <i>F0</i> √† l'entr√©e, qui montre le <i>degr√© de r√©flexion de surface √† un angle d'incidence de lumi√®re nul</i> , c'est-√†-dire  degr√© de r√©flexion, si vous regardez la surface le long de la normale de haut en bas.  La valeur de <i>F0</i> varie en fonction du mat√©riau et acquiert une dominante de couleur pour les m√©taux, comme on peut le voir en consultant les catalogues de mat√©riaux PBR.  Pour le processus de <i>workflow m√©tallique</i> (processus de cr√©ation de mat√©riaux PBR, division de tous les mat√©riaux en classes de di√©lectriques et de conducteurs), il est suppos√© que tous les di√©lectriques semblent assez fiables √† une valeur constante de <i>F0 = 0,04</i> , tandis que pour les surfaces m√©talliques, <i>F0</i> est d√©fini en fonction de l'alb√©do de surface.  Sous forme de code: <br><br><pre> <code class="cpp hljs">vec3 F0 = vec3(<span class="hljs-number"><span class="hljs-number">0.04</span></span>); F0 = mix(F0, albedo, metallic); vec3 F = fresnelSchlick(max(dot(H, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>), F0);</code> </pre> <br>  Comme vous pouvez le voir, pour les surfaces strictement non m√©talliques, <i>F0 est</i> fix√© √† 0,04.  Mais en m√™me temps, il peut facilement passer de cette valeur √† la valeur d'alb√©do sur la base de la ¬´m√©tallicit√©¬ª de la surface.  Cet indicateur est g√©n√©ralement pr√©sent√© comme une texture distincte (√† partir d'ici, en fait, <i>le</i> flux de travail <i>m√©tallique</i> est pris, <i>environ Trans.</i> ). <br><br>  Ayant re√ßu <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-25-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>F</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.741ex" height="2.057ex" viewBox="0 -780.1 749.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-46" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>F</mi></math></span></span><script type="math/tex" id="MathJax-Element-25"> F </script>  nous devons calculer la valeur de la fonction de distribution normale <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-26-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.924ex" height="2.057ex" viewBox="0 -780.1 828.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-44" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>D</mi></math></span></span><script type="math/tex" id="MathJax-Element-26"> D </script>  et fonctions de g√©om√©trie <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-27-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>G</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.827ex" height="2.057ex" viewBox="0 -780.1 786.5 885.9" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-47" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>G</mi></math></span></span><script type="math/tex" id="MathJax-Element-27"> G </script>  : <br><br>  Code de fonction du bo√Ætier avec √©clairage analytique: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DistributionGGX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 N, vec3 H, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a = roughness*roughness; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> a2 = a*a; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotH = max(dot(N, H), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotH2 = NdotH*NdotH; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> num = a2; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> denom = (NdotH2 * (a2 - <span class="hljs-number"><span class="hljs-number">1.0</span></span>) + <span class="hljs-number"><span class="hljs-number">1.0</span></span>); denom = PI * denom * denom; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> num / denom; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GeometrySchlickGGX</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> NdotV, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> r = (roughness + <span class="hljs-number"><span class="hljs-number">1.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> k = (r*r) / <span class="hljs-number"><span class="hljs-number">8.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> num = NdotV; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> denom = NdotV * (<span class="hljs-number"><span class="hljs-number">1.0</span></span> - k) + k; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> num / denom; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">float</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GeometrySmith</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(vec3 N, vec3 V, vec3 L, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> roughness)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotV = max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = max(dot(N, L), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ggx2 = GeometrySchlickGGX(NdotV, roughness); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ggx1 = GeometrySchlickGGX(NdotL, roughness); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ggx1 * ggx2; }</code> </pre> <br>  Une diff√©rence importante par rapport √† celle d√©crite dans la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie th√©orique</a> : ici on passe directement le param√®tre de rugosit√© √† toutes les fonctions mentionn√©es.  Ceci est fait pour permettre √† chaque fonction de modifier la valeur de rugosit√© d'origine √† sa mani√®re.  Par exemple, des √©tudes Disney, refl√©t√©es dans le moteur d'Epic Games, ont montr√© que le mod√®le d'√©clairage donne des r√©sultats visuellement plus corrects si nous utilisons le carr√© de la rugosit√© dans la fonction g√©om√©trique et la fonction de distribution normale. <br><br>  Apr√®s avoir r√©gl√© toutes les fonctions, on peut directement obtenir les valeurs NDF et G: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NDF = DistributionGGX(N, H, roughness); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> G = GeometrySmith(N, V, L, roughness);</code> </pre> <br>  Au total, nous avons √† port√©e de main toutes les valeurs pour le calcul de la totalit√© du BRDF Cook-Torrance: <br><br><pre> <code class="cpp hljs">vec3 numerator = NDF * G * F; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> denominator = <span class="hljs-number"><span class="hljs-number">4.0</span></span> * max(dot(N, V), <span class="hljs-number"><span class="hljs-number">0.0</span></span>) * max(dot(N, L), <span class="hljs-number"><span class="hljs-number">0.0</span></span>) + <span class="hljs-number"><span class="hljs-number">0.001</span></span>; vec3 specular = numerator / denominator;</code> </pre> <br>  Veuillez noter que nous limitons le d√©nominateur √† une valeur minimale de 0,001 pour √©viter la division par z√©ro en cas de mise √† z√©ro du produit scalaire. <br><br>  Nous allons maintenant calculer la contribution de chaque source √† l'√©quation de r√©flectivit√©.  Le coefficient de Fresnel √©tant directement une variable <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-28-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.976ex" height="2.419ex" viewBox="0 -780.1 1281.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-73" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-28"> K_s </script>  , alors nous pouvons utiliser la valeur de F pour indiquer la contribution de la source √† la r√©flexion sp√©culaire de la surface.  De la quantit√© <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-29-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>s</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="2.976ex" height="2.419ex" viewBox="0 -780.1 1281.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-73" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>s</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-29"> K_s </script>  peut √™tre obtenu et l'indice de r√©fraction <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-30-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>K</mi><mi>d</mi></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.065ex" height="2.419ex" viewBox="0 -780.1 1319.7 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-64" x="1201" y="-213"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>K</mi><mi>d</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-30"> K_d </script>  : <br><br><pre> <code class="cpp hljs">vec3 kS = F; vec3 kD = vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>) - kS; kD *= <span class="hljs-number"><span class="hljs-number">1.0</span></span> - metallic;</code> </pre> <br>  Puisque nous consid√©rons la quantit√© <i>kS</i> repr√©sentant la quantit√© d'√©nergie lumineuse comme une surface r√©fl√©chie, en la soustrayant de l'unit√©, nous obtenons l'√©nergie r√©siduelle de la lumi√®re <i>kD</i> r√©fract√©e par la surface.  De plus, comme les m√©taux ne r√©fractent pas la lumi√®re et n'ont pas de composante diffuse de lumi√®re r√©√©mise, la composante <i>kD</i> sera modul√©e pour √™tre nulle pour un mat√©riau tout m√©tal.  Apr√®s ces calculs, nous disposerons de toutes les donn√©es pour calculer la r√©flectance fournie par chacune des sources lumineuses: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> PI = <span class="hljs-number"><span class="hljs-number">3.14159265359</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> NdotL = max(dot(N, L), <span class="hljs-number"><span class="hljs-number">0.0</span></span>); Lo += (kD * albedo / PI + specular) * radiance * NdotL; }</code> </pre> <br>  La valeur finale <i>Lo</i> , ou luminosit√© de l'√©nergie sortante, est essentiellement une solution √† l'expression de la r√©flectivit√©, c'est-√†-dire  r√©sultat d'int√©gration de surface <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-31-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="7.824ex" height="2.419ex" viewBox="0 -780.1 3368.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-4F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-6D" x="1013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-65" x="1892" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-67" x="2358" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=https://habr.com/ru/post/424453/&amp;usg=ALkJrhha-d6cgxZeLqXT8idMi2AIxndLMw#MJMATHI-61" x="2839" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>O</mi><mi>m</mi><mi>e</mi><mi>g</mi><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-31"> \ Omega </script>  .  Dans ce cas, nous n'avons pas besoin d'essayer de r√©soudre l'int√©grale sous une forme g√©n√©rale pour toutes les directions possibles, car dans cet exemple, il n'y a que quatre sources de lumi√®re qui affectent le fragment en cours de traitement.  C'est pourquoi toute ¬´int√©gration¬ª se limite √† un simple cycle de sources lumineuses existantes. <br><br>  Il ne reste plus qu'√† ajouter la similitude du composant d'√©clairage de fond aux r√©sultats du calcul de la source de lumi√®re directe et la couleur finale du fragment est pr√™te: <br><br><pre> <code class="cpp hljs">vec3 ambient = vec3(<span class="hljs-number"><span class="hljs-number">0.03</span></span>) * albedo * ao; vec3 color = ambient + Lo;</code> </pre> <br><h4>  Rendu lin√©aire et HDR </h4><br>  Jusqu'√† pr√©sent, nous avons suppos√© que tous les calculs sont effectu√©s dans un espace colorim√©trique lin√©aire, et avons donc utilis√© <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">la correction gamma</a> comme accord final dans notre shader.  La r√©alisation de calculs dans un espace lin√©aire est extr√™mement importante pour la simulation correcte de PBR, car le mod√®le n√©cessite la lin√©arit√© de toutes les donn√©es d'entr√©e.  Essayez de ne pas garantir la lin√©arit√© de l'un des param√®tres et le r√©sultat de l'ombrage sera incorrect.  De plus, il serait int√©ressant de r√©gler les sources lumineuses avec des caract√©ristiques proches des sources r√©elles: par exemple, la couleur de leur rayonnement et la luminosit√© √©nerg√©tique peuvent varier librement sur une large plage.  Par cons√©quent, <i>Lo</i> peut facilement accepter de grandes valeurs, mais tombe in√©vitablement sous la coupure dans l'intervalle [0., 1.] en raison de la faible plage dynamique ( <i>LDR</i> ) du tampon de trame par d√©faut. <br><br>  Pour √©viter la perte des valeurs HDR, avant la correction gamma, il est n√©cessaire d'effectuer une compression de tonalit√©: <br><br><pre> <code class="cpp hljs">color = color / (color + vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>)); color = <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(color, vec3(<span class="hljs-number"><span class="hljs-number">1.0</span></span>/<span class="hljs-number"><span class="hljs-number">2.2</span></span>));</code> </pre> <br>  L'op√©rateur familier de Reinhardt est utilis√© ici, ce qui nous permet de maintenir une large plage dynamique dans des conditions d'irradiation tr√®s changeante de diff√©rentes parties de l'image.  Comme nous n'utilisons pas ici un shader s√©par√© pour le post-traitement, les op√©rations d√©crites peuvent √™tre ajout√©es simplement √† la fin du code du shader. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yq/fq/um/yqfqumstgmvnr5vego8grz9tfby.png"></div><br>  Je r√©p√®te que pour la mod√©lisation correcte de PBR, il est extr√™mement important de se souvenir et de consid√©rer les caract√©ristiques du travail avec l'espace colorim√©trique lin√©aire et le rendu HDR.  La n√©gligence de ces aspects entra√Ænera des calculs incorrects et des r√©sultats visuellement inesth√©tiques. <br><br><h4>  Shader PBR pour √©clairage analytique </h4><br>  Ainsi, avec les touches finales sous forme de compression tonale et de correction gamma, il ne reste plus qu'√† transf√©rer la couleur finale du fragment √† la sortie du shader de fragment et le code de shader PBR pour l'√©clairage direct peut √™tre consid√©r√© comme termin√©.  Enfin, regardons tout le code de la fonction <i>main ()</i> de ce shader: <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#version 330 core out vec4 FragColor; in vec2 TexCoords; in vec3 WorldPos; in vec3 Normal; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   uniform vec3 albedo; uniform float metallic; uniform float roughness; uniform float ao; //   uniform vec3 lightPositions[4]; uniform vec3 lightColors[4]; uniform vec3 camPos; const float PI = 3.14159265359; float DistributionGGX(vec3 N, vec3 H, float roughness); float GeometrySchlickGGX(float NdotV, float roughness); float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness); vec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness); void main() { vec3 N = normalize(Normal); vec3 V = normalize(camPos - WorldPos); vec3 F0 = vec3(0.04); F0 = mix(F0, albedo, metallic); //    vec3 Lo = vec3(0.0); for(int i = 0; i &lt; 4; ++i) { //        vec3 L = normalize(lightPositions[i] - WorldPos); vec3 H = normalize(V + L); float distance = length(lightPositions[i] - WorldPos); float attenuation = 1.0 / (distance * distance); vec3 radiance = lightColors[i] * attenuation; // Cook-Torrance BRDF float NDF = DistributionGGX(N, H, roughness); float G = GeometrySmith(N, V, L, roughness); vec3 F = fresnelSchlick(max(dot(H, V), 0.0), F0); vec3 kS = F; vec3 kD = vec3(1.0) - kS; kD *= 1.0 - metallic; vec3 numerator = NDF * G * F; float denominator = 4.0 * max(dot(N, V), 0.0) * max(dot(N, L), 0.0); vec3 specular = numerator / max(denominator, 0.001); //       Lo float NdotL = max(dot(N, L), 0.0); Lo += (kD * albedo / PI + specular) * radiance * NdotL; } vec3 ambient = vec3(0.03) * albedo * ao; vec3 color = ambient + Lo; color = color / (color + vec3(1.0)); color = pow(color, vec3(1.0/2.2)); FragColor = vec4(color, 1.0); }</span></span></span></span></code> </pre> <br>  J'esp√®re qu'apr√®s avoir lu la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">partie th√©orique</a> et avec l'analyse d'aujourd'hui de l'expression de la capacit√© de r√©flexion, cette liste cessera d'√™tre intimidante. <br><br>  Nous utilisons ce shader dans une sc√®ne contenant quatre sources lumineuses ponctuelles, un certain nombre de sph√®res dont les caract√©ristiques de surface vont changer le degr√© de leur rugosit√© et de leur m√©tallicit√© le long des axes horizontal et vertical, respectivement.  √Ä la sortie, nous obtenons l'image suivante: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/mq/hn/sq/mqhnsqjmfli43gtcnbzzlfglcfa.png"></div><br>  La m√©tallicit√© passe de z√©ro √† un de bas en haut, et la rugosit√© est similaire, mais de gauche √† droite.  Il devient √©vident qu'en changeant uniquement ces deux caract√©ristiques de surface, il est d√©j√† possible de d√©finir une large gamme de mat√©riaux. <br><br>  Le code source complet est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br><h2>  PBR et texturation </h2><br>  Nous √©largirons notre mod√®le de surface en transmettant des caract√©ristiques sous forme de textures.  De cette fa√ßon, nous pouvons fournir un contr√¥le par fragment des param√®tres du mat√©riau de surface: <br><br><pre> <code class="cpp hljs">[...] uniform sampler2D albedoMap; uniform sampler2D normalMap; uniform sampler2D metallicMap; uniform sampler2D roughnessMap; uniform sampler2D aoMap; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ vec3 albedo = <span class="hljs-built_in"><span class="hljs-built_in">pow</span></span>(texture(albedoMap, TexCoords).rgb, <span class="hljs-number"><span class="hljs-number">2.2</span></span>); vec3 normal = getNormalFromNormalMap(); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> metallic = texture(metallicMap, TexCoords).r; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> roughness = texture(roughnessMap, TexCoords).r; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> ao = texture(aoMap, TexCoords).r; [...] }</code> </pre> <br>  Notez que la texture de l'alb√©do de surface est g√©n√©ralement cr√©√©e par des artistes dans l'espace colorim√©trique sRGB.Par cons√©quent, dans le code ci-dessus, nous renvoyons la couleur texel √† l'espace lin√©aire afin qu'elle puisse √™tre utilis√©e dans d'autres calculs.  Selon la fa√ßon dont les artistes cr√©ent la texture contenant les donn√©es de la <i>carte d'occlusion ambiante</i> , il peut √©galement √™tre n√©cessaire de la placer dans un espace lin√©aire.  Les cartes de m√©tallicit√© et de rugosit√© sont presque toujours cr√©√©es dans un espace lin√©aire. <br><br>  L'utilisation de textures au lieu de param√®tres de surface fixes en combinaison avec l'algorithme PBR donne une augmentation significative de la fiabilit√© visuelle par rapport aux algorithmes d'√©clairage pr√©c√©demment utilis√©s: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kw/vb/6y/kwvb6y_cnms7xxs1donnvr5ktxc.png"></div><br>  L'exemple de code de texturation complet est <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> , et les textures utilis√©es sont <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> (avec la texture d'ombrage d'arri√®re-plan).  J'attire votre attention sur le fait que les surfaces fortement m√©talliques apparaissent assombries dans des conditions d'√©clairage direct, car la contribution de la r√©flexion diffuse est faible (√† la limite il n'y en a pas du tout).  Leur ombrage ne devient plus correct qu'en prenant en compte la r√©flexion miroir de l'√©clairage de l'environnement, ce que nous ferons dans les prochaines le√ßons. <br><br>  Pour le moment, le r√©sultat n'est peut-√™tre pas aussi impressionnant que certaines d√©monstrations PBR - pourtant, nous n'avons pas encore impl√©ment√© un syst√®me d'√©clairage bas√© sur l'image ( <i>IBL</i> ).  N√©anmoins, notre rendu est d√©sormais consid√©r√© comme bas√© sur des principes physiques et, m√™me sans IBL, il montre une image plus fiable qu'auparavant. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr424453/">https://habr.com/ru/post/fr424453/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr424437/index.html">Orme. Confortable et maladroit. Json.Encoder et Json.Decoder</a></li>
<li><a href="../fr424441/index.html">Nouveaut√©s du premier CTP de SQL Server 2019</a></li>
<li><a href="../fr424443/index.html">Vivaldi 2.0 en notre faveur</a></li>
<li><a href="../fr424445/index.html">La traduction par Neil Ford des microservices en tant qu'architecture √©volutive</a></li>
<li><a href="../fr424447/index.html">Lisp parfum√© avec Pascal ou le langage de programmation 8501st</a></li>
<li><a href="../fr424455/index.html">Intel Optane - maintenant 1,5 t√©raoctets</a></li>
<li><a href="../fr424457/index.html">Mise √† niveau d'IDA Pro. Apprendre √† √©crire des chargeurs de d√©marrage en Python</a></li>
<li><a href="../fr424459/index.html">Success Story, ou DEV + DEVOPS + OPS</a></li>
<li><a href="../fr424461/index.html">Pourquoi apprendre des langues impopulaires. Exemple de communaut√© F #</a></li>
<li><a href="../fr424463/index.html">Comment la certitude affecte les paiements</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>