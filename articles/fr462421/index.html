<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üçü üë©üèæ‚Äçüè≠ ü¶ê Apollo Guidance Computer - logiciel d'architecture et de syst√®me. 2e partie üí£ üì® üëÉüèø</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Lien vers la partie 1 

 Dans cette partie, nous verrons comment l'AGC est organis√© du point de vue d'un programmeur. La liste des r√©f√©rences et des s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Apollo Guidance Computer - logiciel d'architecture et de syst√®me. 2e partie</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/462421/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Lien vers la partie 1</a> <br><br>  Dans cette partie, nous verrons comment l'AGC est organis√© du point de vue d'un programmeur.  La liste des r√©f√©rences et des sources figure √† la fin de la premi√®re partie de l'article.  Le mat√©riel de cette partie est bas√© sur le mat√©riel du livre [1]. <br><br><img src="https://habrastorage.org/webt/0m/uy/tm/0muytmmcp6wrwtq0f37i4eo5gii.jpeg"><br><br><h3>  Repr√©sentation des nombres en m√©moire d'AGC </h3><br>  AGC utilise des mots de 15 bits, avec un signe √† la 15e place.  Il y a √©galement une d√©charge de parit√©, qui est enregistr√©e et contr√¥l√©e par le mat√©riel et est compl√®tement transparente pour le logiciel, avec chaque op√©ration de lecture et d'√©criture dans la m√©moire. <br><a name="habracut"></a><br><img src="https://habrastorage.org/webt/8t/wg/cr/8twgcrrgkp8jtgz6rfu7kbektzc.jpeg"><br><br>  Les nombres entiers sont pr√©sent√©s au format "addition 1".  C'est comme suit: <br><br>  Les nombres non n√©gatifs de 0 √† 16383 sont pr√©sent√©s sous forme de codes de 000 000 000 000 000 √† 011 111 111 111 111, respectivement. <br><br>  Les nombres n√©gatifs sont form√©s en inversant les nombres positifs, c'est-√†-dire  -1 est repr√©sent√© par 111 111 111 111 111 et jusqu'√† -16383, repr√©sent√© par le code binaire 100 000 000 000 000. <br><br>  Les op√©rations arithm√©tiques sont effectu√©es comme suit: <br><br><pre><code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">2</span></span>: <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> <span class="hljs-number"><span class="hljs-number">010</span></span> <span class="hljs-number"><span class="hljs-number">-5</span></span>: <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">010</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> (= <span class="hljs-number"><span class="hljs-number">-3</span></span>)</code> </pre> <br>  Ajouter deux nombres n√©gatifs est un peu plus compliqu√©. <br><br>  Si nous ajoutons selon les r√®gles habituelles, alors rien ne fonctionnera: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">-2</span></span>: <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">101</span></span> <span class="hljs-number"><span class="hljs-number">-5</span></span>: <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">010</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">110</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> (= <span class="hljs-number"><span class="hljs-number">-8</span></span>)</code> </pre><br>  Cependant, vous pouvez remarquer que l'ajout des bits les plus significatifs g√©n√®re un bit de retenue.  Nous avons juste besoin d'ajouter le bit de retenue pour obtenir le r√©sultat correct: <br><br><pre> <code class="cpp hljs"><span class="hljs-number"><span class="hljs-number">-2</span></span>: <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">101</span></span> <span class="hljs-number"><span class="hljs-number">-5</span></span>: <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">010</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">110</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> (= <span class="hljs-number"><span class="hljs-number">-8</span></span>) Carry <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">111</span></span> <span class="hljs-number"><span class="hljs-number">000</span></span> (= <span class="hljs-number"><span class="hljs-number">-7</span></span>)</code> </pre><br>  Vous pouvez √©galement remarquer que z√©ro positif et n√©gatif sont possibles dans ce syst√®me, ce qui cr√©e des difficult√©s suppl√©mentaires pour les programmeurs, par exemple, lors de la comparaison du r√©sultat d'une op√©ration avec z√©ro. <br><br>  Le d√©bordement de la batterie pendant les op√©rations arithm√©tiques peut √©galement √™tre surveill√©, ce qui sera discut√© ci-dessous. <br><br>  ACG ne prend en charge que l'arithm√©tique enti√®re et ne peut pas effectuer d'op√©rations avec des nombres r√©els dans le mat√©riel, mais peut le faire dans le logiciel.  L'AGC utilise une repr√©sentation d√©cimale binaire de nombres de 28 bits (9 d√©cimales), qui occupe deux cellules de m√©moire, 14 bits chacune.  Des chiffres de signe sont √©galement utilis√©s, et le mot bas et le mot haut peuvent avoir un signe diff√©rent!  Autrement dit, il peut y avoir un nombre repr√©sent√© comme, par exemple, +5 * 10000 + -5 * 100 = 49500. √âtrange, mais possible. <br><br>  Les distances et les vitesses de calcul sont pr√©sent√©es dans le syst√®me m√©trique, mais les donn√©es pour l'√©quipage sont affich√©es dans le syst√®me anglais de mesures (pieds, etc.). <br><br><img src="https://habrastorage.org/webt/ak/_k/vu/ak_kvuyqkgck82014uex_lqfau8.jpeg"><br>  <i>Format d'instruction</i> <br><br><h3>  Mod√®le de m√©moire </h3><br>  Dans la partie pr√©c√©dente, il a d√©j√† √©t√© mentionn√© que la m√©moire de l'ordinateur est divis√©e en 2 Kslov RAM et 36 K mots ROM.  Comme l'instruction ne prend que 12 bits pour la valeur d'adresse, le principe de la division de la m√©moire en banques est utilis√©.  Un registre sp√©cial est utilis√© pour indiquer la banque actuelle. <br><br>  Pour basculer vers une nouvelle banque de m√©moire, la commande ¬´Transf√©rer dans une nouvelle banque¬ª (TNB) est utilis√©e, qui effectue les op√©rations suivantes: <br><br><ul><li>  Copie le registre bancaire actuel ("Banque") dans le registre "Banque enregistr√©e" </li><li>  Copie une adresse 12 bits de l'emplacement de m√©moire suivant la commande TNB dans le registre "Adresse de retour" </li><li>  Nous chargeons la nouvelle adresse bancaire dans le registre bancaire et chargeons l'offset indiqu√© par l'instruction TNB dans le compteur d'instructions. </li></ul><br><h3>  Registres </h3><br>  AGC a des registres mapp√©s √† l'espace d'adressage.  Ils occupent les 48 premiers mots de la m√©moire physique. <br><br>  <b>La batterie</b> occupe l'adresse 0 <sub>8</sub> . <br><br>  La batterie est utilis√©e dans la plupart des op√©rations arithm√©tiques et logiques (OR, AND, etc.).  Bien que l'AGC fonctionne avec des mots de 15 bits, la batterie a une capacit√© de 16 bits, car elle stocke une d√©charge de d√©bordement.  Lorsque les donn√©es sont charg√©es dans la batterie, elles tombent dans les bits inf√©rieurs, le bit 14 contenant le signe du nombre.  Apr√®s avoir effectu√© l'op√©ration arithm√©tique, si aucun d√©bordement ne s'est produit, le bit 15 contiendra simplement une copie du signe, et ce bit est invisible pour le programmeur.  Nous appelons ces chiffres de signe respectivement S1 et S2.  Si un d√©bordement se produit, alors S1 et S2 ne seront pas √©gaux.  Bien que le bit S2 reste invisible pour le programmeur, dans AGC, il existe jusqu'√† deux fa√ßons de d√©finir l'√©tat de d√©bordement. <br><br>  Tout d'abord, lorsqu'un d√©bordement se produit, les interruptions sont automatiquement d√©sactiv√©es.  Un gestionnaire d'interruption, s'il se produit √† ce moment, pourrait r√©initialiser ce bit, ce qui serait tr√®s ind√©sirable.  Les interruptions ne sont autoris√©es que lorsque l'indicateur de d√©passement est effac√©.  L'indicateur n'est r√©initialis√© que lorsque la batterie est nettoy√©e ou lorsqu'une nouvelle valeur est charg√©e.  Pour v√©rifier l'indicateur de d√©bordement, la commande Transf√©rer vers le stockage (TS) peut √™tre utilis√©e, qui enregistre la valeur de la batterie en m√©moire uniquement s'il n'y a pas eu de d√©bordement, et s'il y a eu un d√©bordement vers le haut ou vers le bas, la valeur dans la batterie est remplac√©e par +1 ou -1 en cons√©quence.  La commande TS ignore √©galement l'instruction de programme suivante en cas de d√©passement.  Il est suppos√© que le programmeur √©crira le code qui traite le d√©bordement et le placera √† travers une commande du TS, et imm√©diatement apr√®s le TS ins√©rera un saut √† l'instruction apr√®s le gestionnaire de d√©bordement. <br><br>  <b>Registre L</b> - Adresse 00001 <sub>8</sub> <br><br>  Le registre L est √©galement appel√© ¬´accumulateur d'ordre faible¬ª et est destin√© √† √©tendre la gamme de nombres avec lesquels les op√©rations sont effectu√©es.  Il peut √©galement √™tre utilis√© pour le stockage temporaire de variables. <br><br>  <b>Registre Q</b> - Adresse 00002 <sub>8</sub> <br><br>  Le registre Q est destin√© √† stocker l'adresse de retour.  Le registre Q contient une adresse de 12 bits qui, avec la banque de m√©moire actuelle, donne l'adresse de retour compl√®te du sous-programme. <br><br>  <b>Registre EBANK</b> (Erasable Storage Bank) - Adresse 00003 <sub>8</sub> <br><br>  La RAM (√©galement appel√©e ¬´m√©moire effa√ßable¬ª dans l'AGC) contient 2048 mots, divis√©s en 8 banques de 256 mots chacune.  L'adresse de la banque RAM est de 3 bits et est contenue dans le registre EBANK. <br><br>  <b>Registre FBAN</b> K (Banque de stockage fixe) - Adresse 00004 <sub>8</sub> <br><br>  La ROM a des banques de 1024 mots et contient 36 banques.  Le registre FBANK a 5 bits et vous permet d'adresser 32 banques. <br><br>  <b>Bit d'extension fixe</b> (Superbank Bit) <br><br>  Utilis√© pour adresser la derni√®re ROM 4Kslov. <br><br>  <b>Registre BBANK</b> ( <b>Registre des</b> deux banques) - Adresse 00006 <sub>8</sub> <br><br>  Lors du transfert du contr√¥le vers un autre programme, les registres FBANK et EBANK doivent √™tre modifi√©s en m√™me temps.  Le registre BBANK contient les deux adresses - les num√©ros de banque de RAM et de ROM.  L'√©criture met automatiquement √† jour les registres FBANK et EBANK. <br><br>  <b>Registre Z</b> (le compteur de programmes) - 00005 <sub>8</sub> <br><br>  Le registre Z est le compteur de programme, c'est-√†-dire qu'il d√©termine l'adresse de la commande en cours d'ex√©cution.  Il a une capacit√© de 12 bits. <br><br>  <b>Registre z√©ro</b> (une source de z√©ros) - Adresse 00007 <sub>8</sub> <br><br>  Contient la constante 0. <br><br>  <b>Registres des gestionnaires d'interruptions</b> - Adresse 00008 <sub>8</sub> - 00012 <sub>8</sub> <br><br>  Les registres ZRUPT, BRUPT, ARUPT, LRUPT, QRUPT et BANKRUPT sont situ√©s respectivement √† ces adresses. <br><br>  <b>Registres ZRUPT et BRUPT</b> - sauvegardent automatiquement le contenu du registre Z (compteur d'instructions) et du registre B (registre interne, qui contient l'adresse de la commande qui sera ex√©cut√©e ensuite). <br><br>  <b>Les registres ARUPT, LRUPT, QRUPT et BANKRUPT</b> sont utilis√©s pour √©conomiser la batterie et les registres L, Q et BB.  Ces registres doivent √™tre sauvegard√©s et restaur√©s manuellement jusqu'√† l'ex√©cution de l'instruction RESUME, qui sert √† revenir de l'interruption. <br><br>  Pendant le traitement des interruptions, l'AGC d√©sactive les interruptions jusqu'√† ce que l'instruction RESUME soit ex√©cut√©e.  Ainsi, le gestionnaire d'interruption seul ne peut pas √™tre interrompu. <br><br>  Plus t√¥t, il a √©t√© mentionn√© que la batterie a une capacit√© de 16 bits, et le bit le plus significatif est utilis√© pour d√©tecter le d√©bordement et n'est pas disponible par programme.  Cependant, le registre ARUPT, qui stocke la batterie pendant une interruption, a 15 bits.  Chaque fois qu'une condition de d√©passement se produit, les interruptions sont d√©sactiv√©es jusqu'√† ce que l'indicateur de d√©passement soit effac√©. <br><br>  Les registres ARUPT, LRUPT, QRUPT et BANKRUPT ne peuvent pas √™tre utilis√©s en dehors du gestionnaire d'interruption.  Physiquement, ils restent accessibles, mais du point de vue du programme principal, leur √©tat change √† des moments arbitraires. <br><br>  <b>Edition des registres</b> - adresses 00020 <sub>8</sub> - 00023 <sub>8</sub> <br><br>  Les trois premiers registres sont des registres √† d√©calage: cycle √† droite, d√©calage √† droite, cycle √† gauche, c'est-√†-dire un d√©calage cyclique √† droite, un d√©calage √† droite et un d√©calage cyclique √† gauche.  Le syst√®me d'instruction AGC n'a pas d'op√©rations de d√©calage, et pour d√©caler un nombre d'un bit, il doit √™tre √©crit dans l'un de ces registres puis compt√©.  Chaque enregistrement est d√©cal√© d'un bit. <br><br>  <b>Le registre EDOP</b> (EDit Interpretive OPcode) est le quatri√®me des registres d'√©dition. <br><br>  Les commandes d'interpr√©tation, qui seront discut√©es ci-dessous, sont stock√©es dans deux en un mot et occupent 7 bits chacune.  Une op√©ration ET avec un masque suffit pour lire la commande d'ordre faible, mais l'ordre √©lev√© n√©cessitera un d√©calage de 7 bits.  Le registre EDOP effectue ce d√©calage en une seule op√©ration. <br><br>  La modification des registres ne peut pas √™tre utilis√©e dans les gestionnaires d'interruption, et voici pourquoi.  Les registres r√©guliers doivent √™tre enregistr√©s au d√©but du gestionnaire et restaur√©s lors de sa fermeture.  Mais les registres d'√©dition effectuent des op√©rations sur les donn√©es lors de leur √©criture, ce qui entra√Ænera un fonctionnement incorrect du programme interrompu. <br><br><h3>  Minuteries et horloges </h3><br><h4>  Horloge temps r√©el </h4><br>  AGC n'utilise pas le calendrier, les jours, les mois et l'ann√©e.  Au lieu de cela, le compte √† rebours est √† partir du point ¬´z√©ro¬ª, qui commence quelques heures avant le d√©but.  L'horloge est affich√©e en deux mots en m√©moire, aux adresses 00024 <sub>8</sub> (T2), 00025 <sub>8</sub> (T1).  Le mot T1 est incr√©ment√© toutes les 10 ms, le mot T2 est d'environ toutes les 164 secondes, lorsque le mot T1 est plein. <br><br><h4>  Minuteries </h4><br>  00026 <sub>8</sub> (T3) Liste d'attente - incr√©ment toutes les 10 ms., D√©cal√© de 5 ms par rapport au T4RUPT <br>  00027 <sub>8</sub> (T4) T4RUPT - incr√©ment toutes les 10 ms. <br>  00030 <sub>8</sub> (T5) Pilote automatique - incr√©ment toutes les 100 ms. <br>  00031 <sub>8</sub> (T6) horloge haute r√©solution - incr√©ment toutes les 1/1600 s = 0,625 ms. <br><br>  Le premier temporisateur, T3, est n√©cessaire pour que la liste des t√¢ches fonctionne (liste d'attente).  La liste d'attente est une liste de t√¢ches tr√®s courtes, chacune prenant peu de temps, et peut √™tre ex√©cut√©e directement dans le gestionnaire d'interruption.  La liste contient jusqu'√† sept t√¢ches, chacune commen√ßant √† un certain intervalle.  Le temps d'ex√©cution de la t√¢che est strictement limit√© √† 4 ms.  Pendant ce temps, l'ordinateur parvient √† ex√©cuter environ 160 instructions. <br><br>  Le temporisateur T4 ex√©cute des t√¢ches p√©riodiques critiques allant de 20 √† 120 ms, y compris l'√©change de donn√©es avec DSKY, les commutateurs d'interrogation sur les panneaux de commande du navire et d'autres t√¢ches. <br><br><h3>  Unit√© de mesure inertielle IMU (L'unit√© de mesure inertielle) </h3><br>  L'IMU est une plate-forme stabilis√©e gyroscopiquement avec des acc√©l√©rom√®tres, qui sert √† d√©terminer la position et les acc√©l√©rations du navire dans l'espace. <br><br><img src="https://habrastorage.org/webt/u1/2z/m4/u12zm4_fj9had0nyhitgbxzvsvi.jpeg"><br><br>  Nous ne d√©crirons pas ici le principe de fonctionnement du gyroscope, nous notons seulement que la position des axes du gyroscope est mesur√©e par le dispositif CDU (Coupling Data Unit).  Cet appareil g√©n√®re des impulsions lorsque les gyroscopes tournent, produisant 32 768 impulsions par tour, ce qui correspond √† une r√©solution de 39,55 secondes d'arc par impulsion. <br><br>  La CDU transmet √©galement √† l'AGC la position des axes du sextant et du radar d'approche.  √âtant donn√© que le sextant est uniquement dans le module de commande et que le radar est uniquement dans le module lunaire, ils utilisent le m√™me port AGC. <br><br>  L'IMU dispose √©galement de trois acc√©l√©rom√®tres √† pendule (acc√©l√©rom√®tres pendulaires √† int√©gration puls√©e, PIPA).  Mais il y a une l√©g√®re subtilit√©.  Malgr√© le fait que le module lunaire et le module de commande ont le m√™me IMU, leurs plages de mesure de vitesse sont diff√©rentes.  La plage de vitesse IMU du module de commande est de 0 √† 11000 m / s, et pour le module lunaire - jusqu'√† 1700 m / s.  La r√©solution IMU du module de commande est de 5,85 cm / s, pour le module lunaire - 1 cm / s. <br><br><h4>  Compteurs CDUS (X, Y, Z, OPTIS, OPTT) et PIPAS (X, Y, Z) </h4><br>  Le transfert de donn√©es de la CDU vers l'AGC est le suivant: les impulsions des capteurs peuvent incr√©menter et d√©cr√©menter les compteurs.  Le nombre dans le compteur a un signe indiquant la direction du mouvement.  Les compteurs sont situ√©s √† des adresses sp√©cifiques en m√©moire et peuvent √™tre lus par programmation.  Un total de 8 compteurs sont utilis√©s, dont six affichent des vitesses et des angles, et deux sont utilis√©s pour afficher la position angulaire du sextant dans le module de commande ou du radar d'approche dans le module lunaire. <br><br><h4>  Gestion des appareils via des compteurs </h4><br>  Le CDU fonctionnait dans les deux sens, par exemple, il pouvait non seulement d√©terminer la position du radar de proximit√©, mais aussi lire le contenu du registre dans la m√©moire de l'ordinateur et appliquer une tension aux moteurs d'entra√Ænement du radar jusqu'√† ce que le radar soit install√© √† l'angle requis. <br><br><h3>  Autres interfaces informatiques </h3><br>  Le module lunaire poss√®de une poign√©e (Attitude Controller Assembly, ACA) dont la position peut √™tre lue par programmation.  Chaque axe de ce contr√¥leur a envoy√© des valeurs aux variables P_RHCCTR, Q_RHCCTR et R_RHCCTR. <br><br><img src="https://habrastorage.org/webt/kp/vx/ad/kpvxada5xg8drivi5clo5oestiw.jpeg"><br>  <i>Contr√¥leur ACA</i> <br><br><img src="https://habrastorage.org/webt/-o/fh/mh/-ofhmh3zap3wxjjepvtjmm8caxa.jpeg"><br>  <i>Apparence du contr√¥leur ACA</i> <br><br>  Contr√¥leur ACA install√© uniquement dans le module lunaire <br><br><h3>  INLINK (canal de transmission de t√©l√©m√©trie) </h3><br>  Le dispositif INLINK permet une communication bidirectionnelle avec la Terre et sert √† transmettre des informations t√©l√©m√©triques et √† recevoir des donn√©es du centre de contr√¥le de vol.  Les astronautes peuvent entrer les donn√©es n√©cessaires pour le vol via DSKY, mais ce processus est lent et sem√© d'erreurs.  Gr√¢ce au registre INLINK, les donn√©es peuvent √™tre saisies directement depuis la Terre dans l'ordinateur. <br><br><h3>  Gestion moteur </h3><br>  Pendant le processus d'atterrissage du module lunaire, l'AGC calcule en continu les valeurs n√©cessaires de la force de traction et envoie des signaux de commande aux moteurs.  Pendant les 12 minutes que dure l'atterrissage, le moteur br√ªle environ la moiti√© du carburant et le programme doit prendre en compte la r√©duction de masse.  La pouss√©e du moteur varie de 92,5%, ce qui √©quivaut √† 46 700 N, jusqu'√† 10% de la pleine pouss√©e.  Mais une pouss√©e sup√©rieure √† 65% provoque une usure s√©v√®re de la chambre de combustion et de la buse, de sorte que le programme AGC devrait minimiser le temps lorsque le moteur est dans ce mode. <br><br>  L'ordinateur est connect√© aux moteurs de la plate-forme d'atterrissage via l'ensemble de commande du moteur de descente (DECA).  La gestion s'effectue via le registre THRUST.  L'√©quipage peut r√©gler manuellement la valeur de pouss√©e via le contr√¥leur de pouss√©e / translation manuelle (TTHC). <br><br><img src="https://habrastorage.org/webt/sc/rb/pi/scrbpifblpmwc-jpquopdwzlfee.jpeg"><br>  <i>Contr√¥leur manuel de pouss√©e / translationnel (TTHC).</i> <br><br><img src="https://habrastorage.org/webt/c1/pk/zo/c1pkzoar4qavk1u3thkmfvi3omy.jpeg"><br>  <i>Contr√¥leur manuel de pouss√©e / translationnel (TTHC).</i>  <i>Apparence</i> <br><br>  La poign√©e du contr√¥leur est connect√©e directement √† DECA, l'ordinateur ne voit pas les valeurs saisies manuellement. <br><br><h3>  Appareils analogiques </h3><br>  Des indicateurs analogiques, ALTM (affichages analogiques: altim√®tre et d√©bitm√®tres), sont √©galement utilis√©s pour indiquer l'altitude et le taux de changement de hauteur que l'AGC contr√¥le via le registre ALTM.  Les indicateurs analogiques sont r√©alis√©s sous forme d'√©chelles verticales (tapem√®tres). <br><br><img src="https://habrastorage.org/webt/7n/g5/i2/7ng5i2xka7ftivyn3-yka16yfc8.jpeg"><br>  <i>Indicateurs de hauteur et de vitesse verticale</i> <br><br><h3>  Adressage et banques de m√©moire </h3><br>  Comme d√©j√† mentionn√©, AGC dispose de deux types de m√©moire, la RAM, √©galement appel√©e ¬´m√©moire effa√ßable¬ª, et la ROM (m√©moire fixe).  La capacit√© m√©moire est de 38 Kslov, ce qui ne permet pas d'adresser directement toute la m√©moire, car la longueur d'adresse dans le mot de commande est de 12 bits. <br><br>  Pour s√©parer la m√©moire en banques, les registres de banque EBANK et FBANK sont utilis√©s, qui sp√©cifient la banque de RAM et ROM, respectivement.  Cela √©tend l'espace d'adressage de 32 K mots, et pour √©tendre davantage l'espace d'adressage ROM, le bit d'extension fixe est utilis√©, ce qui permet d'acc√©der √† 36 K mots. <br><br><h3>  Banques RAM </h3><br>  La RAM a un volume de 2K mots et est divis√©e en 8 banques de 256 mots. <br><br><img src="https://habrastorage.org/webt/gm/7t/ro/gm7troqez7mshhtmfcli8xwlx8y.png"><br>  <i>D√©cryptage d'adresse RAM</i> <br><br>  Pour adresser un mot dans une banque RAM, 8 bits sont n√©cessaires.  Deux bits suppl√©mentaires sont n√©cessaires pour d√©terminer le type de banque: non commutable (non commut√©e) ou commutable (commut√©e).  Les bits 9 et 10 de la figure ci-dessus en sont responsables (notez que les bits sont num√©rot√©s √† partir de 1).  Si ces bits contiennent 00, 01 et 10, alors le registre EBANK n'est pas utilis√©, si 11 est utilis√©, alors le contenu d'EBANK est combin√© avec l'adresse 8 bits enregistr√©e dans le mot de commande, comme illustr√© dans la figure ci-dessous.  Si le registre EBANK n'est pas utilis√©, alors les trois premi√®res banques de m√©moire sont appel√©es, ce qui est appel√© un terme un peu trompeur ¬´Fixed Erasable¬ª.  Pour acc√©der √† la RAM, les bits 11 et 12 doivent √™tre mis √† 0. <br><br><img src="https://habrastorage.org/webt/vv/5u/e0/vv5ue0ug_znwbvn7iucs3lck1rm.png"><br>  <i>D√©cryptage de l'adresse RAM √† l'aide du registre EBANK</i> <br><br><h3>  ROM </h3><br>  Pour acc√©der √† la ROM, une approche similaire est utilis√©e.  Les bits 11 et 12 du mot de contr√¥le d√©terminent quelles banques sont utilis√©es, si ces bits contiennent 00, alors la RAM est utilis√©e, comme indiqu√© dans la section pr√©c√©dente, si 10 ou 11, alors les 12 bits sont utilis√©s comme une adresse dans la ROM, le registre FBANK n'est pas utilis√©, si 01, alors l'adresse compos√©e des 10 bits inf√©rieurs du mot de contr√¥le et du contenu du registre FBANK est utilis√©e. <br><br><img src="https://habrastorage.org/webt/4z/51/qs/4z51qslc2mu53chbsiur4xk8zgc.png"><br>  <i>D√©cryptage de l'adresse ROM</i> <br><br><img src="https://habrastorage.org/webt/w9/5n/-5/w95n-5c-ynpbwxb8em80wgkeanu.png"><br>  <i>D√©cryptage de l'adresse ROM √† l'aide du registre FBANK</i> <br><br><h3>  Banques communes </h3><br>  Un sous-produit important du sch√©ma de s√©paration de m√©moire pour les banques est la possibilit√© de connecter des banques de ROM et de RAM au m√™me espace d'adressage et d'utiliser la RAM sans avoir √† changer de registre de banque.  La figure explique le fonctionnement d'un tel sch√©ma. <br><br><img src="https://habrastorage.org/webt/4_/3f/ty/4_3ftyjhzqksrtmibr0_lgwdvf4.png"><br>  <i>Le sch√©ma d'utilisation de la RAM et de la ROM dans le m√™me espace d'adressage</i> <br><br><h3>  M√©moire au-del√† de 32 mots </h3><br>  Pour acc√©der √† la m√©moire au-dessus de 32 mots, le bit d'extension ROM, Fixed Extension Bit, est utilis√© comme Superbank Bit.  Le bit superbank est situ√© dans le bit 7 du canal d'entr√©e / sortie 7. Le canal 7 diff√®re des autres canaux en ce qu'il prend en charge la lecture et l'√©criture.  Bien s√ªr, le bit d'extension ROM doit √™tre enregistr√© √† la fois pendant la gestion des interruptions et lors des t√¢ches de commutation. <br><br><h3>  Transfert de contr√¥le entre banques </h3><br>  Notez l'ordre dans lequel les registres FBANK, Z et BB sont situ√©s dans la m√©moire inf√©rieure.  Il semblerait, pourquoi ne pas les combiner en un seul mot?  Mais cela est fait expr√®s pour cr√©er un m√©canisme de transfert de contr√¥le.  Lorsque vous passez √† une autre banque, les nouvelles valeurs doivent √™tre d√©finies sur FBANK et EBANK ou BBANK.  Cependant, cela pose un probl√®me.  Supposons, par exemple, que le programme s'ex√©cute √† l'adresse 01033 <sub>8</sub> dans la banque de ROM 07 et que vous deviez aller √† l'adresse 02371 <sub>8</sub> dans la banque de ROM 13. Si vous modifiez le registre Z, il transf√®re le contr√¥le √† l'adresse 02371 <sub>8</sub> dans la banque actuelle, dont nous n'avons pas besoin.  Si nous changeons d'abord de banque actuelle, une situation similaire se produira.  Une commutation simultan√©e du registre Z et de la banque de m√©moire est n√©cessaire.  Pour ce faire, utilisez l'instruction DXCH, qui lit la batterie et enregistre L, et √©change leur contenu avec deux emplacements cons√©cutifs en m√©moire.  Ainsi, il est possible d'√©changer la batterie et d'enregistrer L soit avec une paire de FBANK, Z, soit avec une paire de Z, BB.  Ces options sont cod√©es par deux mn√©moniques: Double Transfer Control Switching Both Banks (DTCB) et Double Transfer Control Switching Fixed Bank (DTCF).  La commande DTCB vous permet non seulement d'aller √† une autre adresse, mais √©galement de changer la banque de RAM, et la commande DTCF transf√®re le contr√¥le, laissant la banque de RAM la m√™me.  Le retour de la fonction est le suivant.  Les valeurs initiales de Z et BBANK (ou FBANK) sont √©crites sur l'accumulateur et le registre L. La fonction appel√©e doit sauvegarder ces valeurs puis effectuer l'op√©ration inverse en √©changeant les valeurs avec les registres des banques et Z. <br><br><h3>  Quelques inconv√©nients de l'architecture AGC </h3><br>  La plupart des architectures informatiques ont un pointeur de pile et / ou des registres d'index (au moins un).  Mais pas chez AGC.  La prise en charge du pointeur de pile n√©cessiterait du mat√©riel suppl√©mentaire.  Il n'y a pas de registres d'index qui permettraient d'organiser l'acc√®s aux structures de donn√©es √† l'adresse (pointeur + d√©calage), mais il existe une commande INDEX qui √©limine le besoin d'un tel registre.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">De plus, bien qu'il n'y ait pas de registres d'index mat√©riel, ils sont √©mul√©s par la machine virtuelle Interpreter, qui sera discut√©e ci-dessous. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">L'une des caract√©ristiques d'AGC est l'utilisation d'un syst√®me d'exploitation en temps r√©el multithread. </font><font style="vertical-align: inherit;">Pour qu'un tel syst√®me fonctionne, en r√®gle g√©n√©rale, un m√©canisme de verrouillage des donn√©es partag√©es (mutex) est requis. </font><font style="vertical-align: inherit;">Mais dans AGC il n'y a pas un tel m√©canisme, donc les d√©veloppeurs de logiciels devraient v√©rifier soigneusement tous les cas d'acc√®s partag√© aux donn√©es de divers processus afin d'exclure la possibilit√© d'un acc√®s simultan√© √† ces donn√©es.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Interruptions </font></font></h3><br> 4000 <sub>8</sub> Startup <br>      AGC <br><br> 4004 <sub>8</sub> T6RUPT <br> TIME6  0.   . <br><br> 4010 <sub>8</sub> T5RUPT <br> TIME5  .   . <br><br> 4014 <sub>8</sub> T3RUPT <br> TIME3  .    WAITLIST. <br><br> 4020 <sub>8</sub> T4RUPT <br> TIME4  .      DSKY <br><br> 4024 <sub>8</sub> KEYRUPT1 <br>   DSKY.      DSKY    15 <br><br> 4030 <sub>8</sub> KEYRUPT2 <br>    DSKY.    DSKY    16 (   ) <br><br> 4034 <sub>8</sub> UPRUPT <br>    INLINK <br>   DSKY <br><br> 4040 <sub>8</sub> DOWNRUPT <br>  Downlink  .    AGC <br><br> 4044 <sub>8</sub> RADARUPT <br>    RNRAD.     <br><br> 4050 <sub>8</sub> RUPT10 <br> LM P64 <br><br><h2>   </h2><br>  ,  Order Code,    ,   ,       ,       .    .      , Q-Code. <br><br>  000     ,  011, 100  111    ,   001, 010, 101  110  Q-. <br><br><img src="https://habrastorage.org/webt/hh/yx/md/hhyxmdpjdwpkw9rwxyvzr25b0x8.jpeg"><br> <i>   Q-</i> <br><br>          .       ,            ,             . ,    TC (transfer control),      ,      ,        (Enable Interrupts). <br><br>      ,    .         00006 <sub>8</sub> ,       ,       00006 <sub>8</sub>         . ,       ,         ,           .        ,    . <br><br><h4>   </h4><br><br>  AGC  41 .    6 : <br><br><ul><li> - </li><li>   </li><li>   </li><li>   </li><li>  - </li><li>  Divers </li></ul><br>         AGC.      [1]. <br><br><h3>    :  - </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AGC n'a pas de disques durs ou de lecteurs de bande, et toutes les communications avec le monde ext√©rieur se r√©sument √† la d√©finition et √† la lecture de bits dans les ports d'entr√©e / sortie. Les p√©riph√©riques AGC comprennent la plate-forme inertielle, les moteurs, le radar, le DSKY et les commutateurs du panneau de commande. L'√©change de donn√©es √† grande vitesse n'est pas requis et la vitesse d'√©change n'est pas un facteur limitant significatif. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Pour l'entr√©e et la sortie sont les soi-disant canaux. L'√©criture et la lecture d'un canal sont similaires √† l'√©criture et √† la lecture d'une cellule RAM, mais contrairement √† la RAM, la plupart des canaux sont unidirectionnels. Il existe √©galement des ports de comptage, qui sont utilis√©s pour lire les positions des axes de l'IMU, du radar et du sextant. Les impulsions des capteurs d'angle incr√©mentent et d√©cr√©mentent les compteurs, qui peuvent ensuite √™tre lues par AGC. </font></font><br><br><img src="https://habrastorage.org/webt/og/hd/kz/oghdkzhjxyu3ph5jthlxfakxquc.jpeg"><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">P√©riph√©riques AGC</font></font></i> <br><br>  -         EXTEND  .      000,    PCode.   PCode     ,   PCode  .  9    ‚Äî   . AGC,  ,    512 ,      16.        15- ,      ,     -    AND, OR  Exclusive OR.           -.     WOR (Write with OR), WAND (Write with AND), ROR (Read and OR)  RXOR (Read and XOR). <br><br>  -       .     L (low-order accumulator),      ,  ,      ,     .           AND, OR  XOR. <br><br>     -       . , DSKY     5 .    DSKY   KEYRUPT,       . <br><br>   ,        ,   uplink  downlink,       51 /c  1900 / (  ). <br><br><h3>  Logiciels </h3><br><img src="https://habrastorage.org/webt/7h/dn/vx/7hdnvxlfxhmv2quvha5jx9o_ft8.jpeg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Le logiciel AGC est bas√© sur le syst√®me d'exploitation Executive en temps r√©el et la machine virtuelle Interpreter. </font><font style="vertical-align: inherit;">Nous les examinerons en d√©tail dans la prochaine partie.</font></font></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr462421/">https://habr.com/ru/post/fr462421/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr462407/index.html">Food Design Digest juillet 2019</a></li>
<li><a href="../fr462409/index.html">Biblioth√®que de g√©n√©rateur de code assembleur pour microcontr√¥leurs AVR. Partie 1</a></li>
<li><a href="../fr462411/index.html">R√©solvez le Sudoku avec l'algorithme X</a></li>
<li><a href="../fr462415/index.html">D√©ployer des applications Symfony + React sur AWS via CI</a></li>
<li><a href="../fr462417/index.html">P√©tition d'Apple</a></li>
<li><a href="../fr462423/index.html">Gestion de projet</a></li>
<li><a href="../fr462429/index.html">VueJs + VueRouter + modal. Un autre v√©lo</a></li>
<li><a href="../fr462431/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 309 (29 juillet - 4 ao√ªt)</a></li>
<li><a href="../fr462433/index.html">Programmeur pour EPROM sur Arduino</a></li>
<li><a href="../fr462435/index.html">R√©trospective: comment les adresses IPv4 ont diminu√©</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>