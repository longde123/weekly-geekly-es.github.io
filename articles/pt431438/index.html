<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üíáüèø üéÖüèæ üí≠ Julia. Cordas e metaprograma√ß√£o üõÄüèº üëÜüèª üë©üèª‚Äç‚öñÔ∏è</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuamos a estudar a jovem e promissora linguagem de prop√≥sito geral Julia . Desta vez, prestaremos mais aten√ß√£o √†s falas, iniciaremos t√≠midos pass...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Julia. Cordas e metaprograma√ß√£o</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/431438/"><p><img src="https://habrastorage.org/webt/6l/xj/yu/6lxjyun5cnvtfoa8m0tq1sdktf4.png"></p><br><p>  Continuamos a estudar a jovem e promissora linguagem de prop√≥sito geral <strong>Julia</strong> .  Desta vez, prestaremos mais aten√ß√£o √†s falas, iniciaremos t√≠midos passos no mundo da metaprograma√ß√£o e ensinaremos o int√©rprete a realizar opera√ß√µes simb√≥licas (existem apenas duas imagens sob o corte, mas muito a√ß√∫car sint√°tico) </p><a name="habracut"></a><br><h3 id="stroki">  Linhas </h3><br><p> Vari√°veis ‚Äã‚Äãde seq√º√™ncia de caracteres s√£o criadas colocando caracteres entre aspas duplas, caracteres √∫nicos s√£o definidos como caracteres √∫nicos do tipo <em>char</em> .  A concatena√ß√£o de cadeias √© realizada usando a multiplica√ß√£o "*": </p><br><pre><code class="cpp hljs">cats = <span class="hljs-number"><span class="hljs-number">4</span></span> s1 = <span class="hljs-string"><span class="hljs-string">"How many cats "</span></span>; s2 = <span class="hljs-string"><span class="hljs-string">"is too many cats?"</span></span>; s3 = s1*s2 Out[]: <span class="hljs-string"><span class="hljs-string">"How many cats is too many cats?"</span></span></code> </pre> <br><p>  Ou seja, a exponencia√ß√£o age assim: </p><br><pre> <code class="cpp hljs">s1^<span class="hljs-number"><span class="hljs-number">3</span></span> Out[]: <span class="hljs-string"><span class="hljs-string">"How many cats How many cats How many cats "</span></span></code> </pre> <br><p>  Por outro lado, as linhas s√£o indexadas: </p><br><pre> <code class="cpp hljs">s1[<span class="hljs-number"><span class="hljs-number">3</span></span>] Out[]: <span class="hljs-string"><span class="hljs-string">'w'</span></span>: ASCII/Unicode U+<span class="hljs-number"><span class="hljs-number">0077</span></span> (category Ll: Letter, lowercase) s1[<span class="hljs-number"><span class="hljs-number">5</span></span>:<span class="hljs-number"><span class="hljs-number">13</span></span>] Out[]: <span class="hljs-string"><span class="hljs-string">"many cats"</span></span> s1[<span class="hljs-number"><span class="hljs-number">13</span></span>:<span class="hljs-number"><span class="hljs-number">-1</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>] Out[]: <span class="hljs-string"><span class="hljs-string">"stac ynam"</span></span> s2[end] Out[]: <span class="hljs-string"><span class="hljs-string">'?'</span></span>: ASCII/Unicode U+<span class="hljs-number"><span class="hljs-number">003f</span></span> (category Po: Punctuation, other)</code> </pre> <br><p>  As cadeias podem ser criadas a partir de cadeias e outros tipos: </p><br><pre> <code class="cpp hljs">s4 = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>(s3, <span class="hljs-string"><span class="hljs-string">" - I don't know, but "</span></span>, cats, <span class="hljs-string"><span class="hljs-string">" is too few."</span></span>) #   s4 = <span class="hljs-string"><span class="hljs-string">"$s3 - I don't know, but $cats is too few."</span></span> Out[]: <span class="hljs-string"><span class="hljs-string">"How many cats is too many cats? - I don't know, but 4 is too few."</span></span></code> </pre> <br><p>  Existem muitas <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">fun√ß√µes √∫teis</a> no arsenal, por exemplo, procurando por um elemento: </p><br><pre> <code class="cpp hljs">findfirst( isequal(<span class="hljs-string"><span class="hljs-string">'o'</span></span>), s4 ) Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span> findlast( isequal(<span class="hljs-string"><span class="hljs-string">'o'</span></span>), s4 ) Out[]: <span class="hljs-number"><span class="hljs-number">26</span></span> findnext( isequal(<span class="hljs-string"><span class="hljs-string">'o'</span></span>), s4, <span class="hljs-number"><span class="hljs-number">7</span></span> ) #      Out[]: <span class="hljs-number"><span class="hljs-number">11</span></span></code> </pre> <br><p>  E assim, voc√™ pode implementar facilmente <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">o Cipher de C√©sar</a> </p><br><pre> <code class="cpp hljs">caesar(X, n) = prod( [x += n <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x in X] ) str3 = <span class="hljs-string"><span class="hljs-string">"    "</span></span>; caesar(str3, <span class="hljs-number"><span class="hljs-number">3</span></span>) Out[]: <span class="hljs-string"><span class="hljs-string">"####"</span></span> str4 = caesar(str3, <span class="hljs-number"><span class="hljs-number">-32</span></span>) Out[]: <span class="hljs-string"><span class="hljs-string">"\0\0\0\0"</span></span> <span class="hljs-string"><span class="hljs-string">"Latin letters go before Cyrillic"</span></span> &lt; str4 &lt; str3 Out[]: <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre> <br><p>  Aqui, ocorre uma execu√ß√£o em todos os caracteres da cadeia, <em>n</em> √© adicionado ao c√≥digo de cada uma delas.  Acontece uma matriz de caracteres <em>char</em> que s√£o colados pela fun√ß√£o <em>prod ()</em> , que implementa a multiplica√ß√£o de todos os elementos da matriz recebida. </p><br><h3 id="simvolnye-vychisleniya">  Computa√ß√£o de caracteres </h3><br><p>  <em>Julia</em> j√° possui pacotes de v√°rios graus de prontid√£o para c√°lculos simb√≥licos, por exemplo: </p><br><ul><li>  <a href="">Sympy</a> </li><li>  <a href="">Symata</a> </li><li>  <a href="">Symengine</a> </li><li>  <a href="">Express√µes lineares</a> </li></ul><br><p>  mas de alguma forma aprendemos a colar cordas, por que n√£o implementar a√ß√µes simb√≥licas com matrizes.  Digamos que desej√°ssemos adicionar duas matrizes diferentes: </p><br><pre> <code class="cpp hljs">m1 = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> m3 = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"ln(3)"</span></span>; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>] Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"ln(3)"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> m1+m3 Out[]: MethodError: no method matching +(::String, ::String) ...</code> </pre> <br><p>  Para come√ßar, execute suas canetas divertidas nos operadores b√°sicos: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Base: *, -, +</code> </pre> <br><p>  Se em <em>C ++</em> essa mutila√ß√£o foi chamada de sobrecarga do operador, basta adicionar um m√©todo para uma fun√ß√£o existente. </p><br><pre> <code class="cpp hljs">+(a::String, b::String) = a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * b Out[]: + (generic function with <span class="hljs-number"><span class="hljs-number">164</span></span> methods)</code> </pre> <br><p>  Mais de uma centena e meia de m√©todos, e aqui est√° outro que permanecer√° at√© o final da sess√£o. </p><br><pre> <code class="cpp hljs">m1+m3 Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-string"><span class="hljs-string">"a+ln(3)"</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Agora subportar a multiplica√ß√£o, a saber, determinamos o caso de multiplicar uma string por um n√∫mero: </p><br><pre> <code class="cpp hljs">function *(a::String, b::Number) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> b == <span class="hljs-number"><span class="hljs-number">1</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> end end end Out[]: * (generic function with <span class="hljs-number"><span class="hljs-number">344</span></span> methods)</code> </pre> <br><p>  Ou seja, se a string √© multiplicada por zero, obtemos zero, se por uma, obtemos a mesma string e, em outros casos, cegamos o n√∫mero com o sinal "*" e a string (adicionamos colchetes para que n√£o haja incertezas nos caracteres).  Pessoalmente, gosto da visualiza√ß√£o em uma linha da fun√ß√£o, que √© √∫til para o operador tern√°rio: </p><br><pre> <code class="cpp hljs">*(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (b==<span class="hljs-number"><span class="hljs-number">1</span></span>) ? a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> Out[]:</code> </pre> <br><p>  Exporemos os casos restantes a execu√ß√µes semelhantes e obteremos algo como: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Base: *, -, + +(a::String, b::String) = a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * b *(a::String, b::String) = a * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * b * <span class="hljs-string"><span class="hljs-string">")"</span></span> *(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (b==<span class="hljs-number"><span class="hljs-number">1</span></span>) ? a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> *(b::Number, a::String) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-number"><span class="hljs-number">0</span></span> : (b==<span class="hljs-number"><span class="hljs-number">1</span></span>) ? a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"*("</span></span> * a * <span class="hljs-string"><span class="hljs-string">")"</span></span> +(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? a : a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * <span class="hljs-string"><span class="hljs-string">"$b"</span></span> +(b::Number, a::String) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? a : a * <span class="hljs-string"><span class="hljs-string">"+"</span></span> * <span class="hljs-string"><span class="hljs-string">"$b"</span></span> -(b::Number, a::String) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? <span class="hljs-string"><span class="hljs-string">"-"</span></span> * a : <span class="hljs-string"><span class="hljs-string">"$b"</span></span> * <span class="hljs-string"><span class="hljs-string">"-"</span></span> * a -(a::String, b::Number) = (b==<span class="hljs-number"><span class="hljs-number">0</span></span>) ? a : a * <span class="hljs-string"><span class="hljs-string">"-"</span></span> * <span class="hljs-string"><span class="hljs-string">"$b"</span></span> # m1 = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-string"><span class="hljs-string">"a"</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>] m2 = [<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"b"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>] m1*m2 Out[]: <span class="hljs-number"><span class="hljs-number">2</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-string"><span class="hljs-string">"2*(a)+4"</span></span> <span class="hljs-string"><span class="hljs-string">"b+2*(a)"</span></span> <span class="hljs-string"><span class="hljs-string">"2*(a)+4"</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span></code> </pre> <br><p>  E vamos calcular o determinante!  Mas como a fun√ß√£o interna √© complicada, nossos m√©todos n√£o s√£o suficientes para alimentar uma matriz com linhas - obtemos um erro.  Isso significa que preparamos nosso pr√≥prio usando o <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">s√≠mbolo Levi-Civita</a> </p><br><pre> <code class="cpp hljs">Œµ = zeros(Int, <span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>) Œµ[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">1</span></span> Œµ[<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>] = Œµ[<span class="hljs-number"><span class="hljs-number">2</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-number"><span class="hljs-number">-1</span></span> Œµ Out[]: <span class="hljs-number"><span class="hljs-number">3</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span>√ó<span class="hljs-number"><span class="hljs-number">3</span></span> Array{Int64,<span class="hljs-number"><span class="hljs-number">3</span></span>}: [:, :, <span class="hljs-number"><span class="hljs-number">1</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> [:, :, <span class="hljs-number"><span class="hljs-number">2</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> [:, :, <span class="hljs-number"><span class="hljs-number">3</span></span>] = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  F√≥rmula de produto misto </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo stretchy=&quot;false&quot;>[</mo><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>a</mi></mrow><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>b</mi></mrow><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>c</mi></mrow><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy=&quot;false&quot;>]</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>,</mo><mi>j</mi><mo>,</mo><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn></mrow></msubsup><mtext>&amp;#xA0;</mtext><mi>v</mi><mi>a</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>s</mi><mi>i</mi><mi>l</mi><mi>o</mi><msub><mi>n</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><msup><mi>a</mi><mi>i</mi></msup><msup><mi>b</mi><mi>j</mi></msup><msup><mi>c</mi><mi>k</mi></msup></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="59.328ex" height="3.624ex" viewBox="0 -987.6 25544 1560.2" role="img" focusable="false" style="vertical-align: -1.33ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-65" x="548" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-66" x="1015" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-74" x="1565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-5B" x="1927" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-76" x="2455" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-65" x="2941" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="3407" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-61" x="3841" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-76" x="4620" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-65" x="5106" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="5572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-62" x="6006" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-76" x="6685" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-65" x="7171" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="7637" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="8071" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-72" x="8754" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="9206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-67" x="9551" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-68" x="10032" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-74" x="10608" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-5D" x="10970" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-3D" x="11526" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-73" x="12832" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-75" x="13302" y="0"></use><g transform="translate(13874,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6D" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-33" x="1242" y="510"></use><g transform="translate(878,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-2C" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6A" x="624" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-2C" x="1036" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6B" x="1315" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-3D" x="1836" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-31" x="2615" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-76" x="17306" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-61" x="17791" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-72" x="18321" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-65" x="18772" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-70" x="19239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-73" x="19742" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="20212" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6C" x="20557" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6F" x="20856" y="0"></use><g transform="translate(21341,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6E" x="0" y="0"></use><g transform="translate(600,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6A" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6B" x="758" y="0"></use></g></g><g transform="translate(22946,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-61" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="748" y="583"></use></g><g transform="translate(23820,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-62" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6A" x="607" y="583"></use></g><g transform="translate(24641,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6B" x="613" y="583"></use></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>&nbsp;</mtext><mi>l</mi><mi>e</mi><mi>f</mi><mi>t</mi><mo stretchy="false">[</mo><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>a</mi></mrow><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>b</mi></mrow><mtext>&nbsp;</mtext><mi>v</mi><mi>e</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mi>c</mi></mrow><mtext>&nbsp;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mo stretchy="false">]</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mi>j</mi><mo>,</mo><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mn>3</mn></mrow></msubsup><mtext>&nbsp;</mtext><mi>v</mi><mi>a</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>s</mi><mi>i</mi><mi>l</mi><mi>o</mi><msub><mi>n</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi><mi>k</mi></mrow></msub><msup><mi>a</mi><mi>i</mi></msup><msup><mi>b</mi><mi>j</mi></msup><msup><mi>c</mi><mi>k</mi></msup></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-1"> \ left [\ vec {a} \ vec {b} \ vec {c} \ right] = \ sum_ {i, j, k = 1} ^ {3} \ varepsilon_ {ijk} a ^ ib ^ jc ^ k </script></p><br><p>  pode ser usado para encontrar o determinante de uma matriz 3x3, entendendo <em>a</em> , <em>b</em> , <em>c</em> como a primeira, segunda e terceira linha (coluna), respectivamente </p><br><pre> <code class="cpp hljs">detrmnt(arr) = sum( Œµ[i,j,k]*arr[<span class="hljs-number"><span class="hljs-number">1</span></span>,i]*arr[<span class="hljs-number"><span class="hljs-number">2</span></span>,j]*arr[<span class="hljs-number"><span class="hljs-number">3</span></span>,k] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i in <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>, j in <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span>, k in <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">3</span></span> ) detrmnt([<span class="hljs-string"><span class="hljs-string">"a"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"b"</span></span>; <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-string"><span class="hljs-string">"c"</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-string"><span class="hljs-string">"d"</span></span>]) Out[]: <span class="hljs-string"><span class="hljs-string">"2*(c)+2*(b)+2*(-1*(a))+-2*(d)"</span></span></code> </pre> <br><p>  √â f√°cil adivinhar que, para as matrizes, √© mais complicado, tudo parecer√° muito trivial - existem muitos colchetes e multiplica√ß√µes de n√∫meros; portanto, seria bom fazer algumas fun√ß√µes que conduzem √† desfatoriza√ß√£o.  Este ser√° o seu dever de casa. <br>  Al√©m disso, a multiplica√ß√£o de matrizes √© mais complicada: </p><br><pre> <code class="cpp hljs">Rx = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; Rz = [<span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"-sin(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; T = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"x0"</span></span> <span class="hljs-string"><span class="hljs-string">"y0"</span></span> <span class="hljs-string"><span class="hljs-string">"z0"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>]; Rx*Rz Out[]: MethodError: <span class="hljs-function"><span class="hljs-function">no method matching </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">zero</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(::String)</span></span></span><span class="hljs-function"> ...</span></span></code> </pre> <br><p>  dar√° um erro.  Neg√≥cio claro, para matrizes com uma dimens√£o de mais de tr√™s, m√©todos mais avan√ßados e complexos s√£o utilizados, cujas chamadas n√£o foram ‚Äúsobrecarregadas‚Äù.  Bem, abordaremos os m√©todos j√° existentes com nosso pr√≥prio multiplicador (isso, √© claro, n√£o √© recomendado, especialmente em programas mais ou menos complexos, onde provavelmente ocorrer√£o conflitos internos). </p><br><pre> <code class="cpp hljs">function *( a::Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}, b::Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>} ) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a)</span></span></span><span class="hljs-function">[2] </span></span>== size(b)[<span class="hljs-number"><span class="hljs-number">1</span></span>] res = Array{Any}(undef, size(a)[<span class="hljs-number"><span class="hljs-number">1</span></span>], size(b)[<span class="hljs-number"><span class="hljs-number">2</span></span>] ) fill!(res, <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(a)[<span class="hljs-number"><span class="hljs-number">1</span></span>], j = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(b)[<span class="hljs-number"><span class="hljs-number">2</span></span>], k = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(a)[<span class="hljs-number"><span class="hljs-number">2</span></span>] res[i,j] = res[i,j] + a[i,k]*b[k,j] end res <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> error(<span class="hljs-string"><span class="hljs-string">"Matrices must have same size mult"</span></span>) end end Out[]: * (generic function with <span class="hljs-number"><span class="hljs-number">379</span></span> methods)</code> </pre> <br><p>  Agora voc√™ pode multiplicar com seguran√ßa: </p><br><pre> <code class="cpp hljs">X = Rx*Rz*T Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span>?<span class="hljs-number"><span class="hljs-number">4</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-string"><span class="hljs-string">"x0"</span></span> <span class="hljs-string"><span class="hljs-string">"y0"</span></span> <span class="hljs-string"><span class="hljs-string">"z0"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Vamos manter essa matriz em mente, mas, por enquanto, come√ßaremos os primeiros passos </p><br><h2 id="metaprogrammirovanie">  Metaprograma√ß√£o </h2><br><h3 id="kotirovki">  Cita√ß√µes </h3><br><p>  Julia apoia a metaprograma√ß√£o.  Isso √© semelhante √† programa√ß√£o simb√≥lica, onde lidamos com express√µes (por exemplo, 6 * 7) em oposi√ß√£o a valores (por exemplo, 42).  Puxando opera√ß√µes para o int√©rprete, obtemos imediatamente o resultado, que, como vimos, pode ser contornado com a ajuda das linhas: </p><br><pre> <code class="cpp hljs">x = <span class="hljs-string"><span class="hljs-string">"6*7"</span></span> Out[]: <span class="hljs-string"><span class="hljs-string">"6*7"</span></span></code> </pre> <br><p>  As strings podem ser transformadas em express√µes usando <em>parse ()</em> e depois avaliadas usando <em>eval ()</em> : </p><br><pre> <code class="cpp hljs">eval(Meta.parse(ans)) Out[]: <span class="hljs-number"><span class="hljs-number">42</span></span></code> </pre> <br><p>  Por que todas essas dificuldades?  O truque √© que, quando temos uma <em>express√£o</em> , podemos modific√°-la de v√°rias maneiras interessantes: </p><br><pre> <code class="cpp hljs">x = replace(x, <span class="hljs-string"><span class="hljs-string">"*"</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">"+"</span></span>) eval(Meta.parse(x)) Out[]: <span class="hljs-number"><span class="hljs-number">13</span></span></code> </pre> <br><p>  Para evitar confus√£o com as linhas, √© fornecido um operador de face franzida <code>:()</code> </p><br><pre> <code class="cpp hljs">y = :(<span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) Out[]: :(<span class="hljs-number"><span class="hljs-number">2</span></span>^<span class="hljs-number"><span class="hljs-number">8</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>) eval(y) Out[]: <span class="hljs-number"><span class="hljs-number">255</span></span></code> </pre><br><p>  Voc√™ pode "citar" uma express√£o, fun√ß√£o, bloco de c√≥digo ... </p><br><pre> <code class="cpp hljs">quote x = <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span> hypot(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) end Out[]: quote #= In[<span class="hljs-number"><span class="hljs-number">13</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# x = <span class="hljs-number"><span class="hljs-number">2</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span> #= In[<span class="hljs-number"><span class="hljs-number">13</span></span>]:<span class="hljs-number"><span class="hljs-number">3</span></span> =# hypot(x, <span class="hljs-number"><span class="hljs-number">5</span></span>) end :(function mysum(xs) sum = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x in xs sum += x end end) Out[]: :(function mysum(xs) #= In[<span class="hljs-number"><span class="hljs-number">14</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# sum = <span class="hljs-number"><span class="hljs-number">0</span></span> #= In[<span class="hljs-number"><span class="hljs-number">14</span></span>]:<span class="hljs-number"><span class="hljs-number">3</span></span> =# <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x = xs #= In[<span class="hljs-number"><span class="hljs-number">14</span></span>]:<span class="hljs-number"><span class="hljs-number">4</span></span> =# sum += x end end)</code> </pre> <br><p>  E agora analisaremos a matriz calculada anteriormente (√© melhor iniciar uma nova sess√£o ap√≥s a se√ß√£o anterior, minhas sobrecargas feias podem facilmente entrar em conflito com os pacotes de plug-in): </p><br><pre> <code class="cpp hljs">X = [ <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"cos(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"sin(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(-sin(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"-sin(œï)*(cos(œï))"</span></span> <span class="hljs-string"><span class="hljs-string">"cos(œï)"</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-string"><span class="hljs-string">"x0"</span></span> <span class="hljs-string"><span class="hljs-string">"y0"</span></span> <span class="hljs-string"><span class="hljs-string">"z0"</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; ] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(X,<span class="hljs-number"><span class="hljs-number">1</span></span>), j = <span class="hljs-number"><span class="hljs-number">1</span></span>:size(X,<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> typeof(X[i,j]) == String X[i,j] = Meta.parse(X[i,j]) end end X Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span>√ó<span class="hljs-number"><span class="hljs-number">4</span></span> Array{Any,<span class="hljs-number"><span class="hljs-number">2</span></span>}: :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) :(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï) * -(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï))) :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï) * <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) :(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) <span class="hljs-number"><span class="hljs-number">0</span></span> :(-(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) * -(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï))) :(-(<span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(œï)) * <span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) :(<span class="hljs-built_in"><span class="hljs-built_in">cos</span></span>(œï)) <span class="hljs-number"><span class="hljs-number">0</span></span> :x0 :y0 :z0 <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Como alguns supuseram, essa √© uma matriz de transforma√ß√µes, j√° resolvemos <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">isso</a> , apenas agora para coordenadas tridimensionais.  Vamos calcular valores espec√≠ficos: </p><br><pre> <code class="cpp hljs">œï = <span class="hljs-number"><span class="hljs-number">20</span></span>*pi/<span class="hljs-number"><span class="hljs-number">180</span></span> x0 = <span class="hljs-number"><span class="hljs-number">4</span></span> y0 = <span class="hljs-number"><span class="hljs-number">-0.5</span></span> z0 = <span class="hljs-number"><span class="hljs-number">1.3</span></span> Xtr = [ eval(x) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> x in X] Out[]: <span class="hljs-number"><span class="hljs-number">4</span></span>√ó<span class="hljs-number"><span class="hljs-number">4</span></span> Array{Real,<span class="hljs-number"><span class="hljs-number">2</span></span>}: <span class="hljs-number"><span class="hljs-number">0.939693</span></span> <span class="hljs-number"><span class="hljs-number">0.34202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">-0.321394</span></span> <span class="hljs-number"><span class="hljs-number">0.883022</span></span> <span class="hljs-number"><span class="hljs-number">0.34202</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0.116978</span></span> <span class="hljs-number"><span class="hljs-number">-0.321394</span></span> <span class="hljs-number"><span class="hljs-number">0.939693</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-number"><span class="hljs-number">-0.5</span></span> <span class="hljs-number"><span class="hljs-number">1.3</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br><p>  Essa matriz gira em torno dos eixos <strong>X</strong> e <strong>Z</strong> <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mn>20</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>i</mi><mi>r</mi><mi>c</mi></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.871ex" height="2.419ex" viewBox="0 -935.7 2527.6 1041.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-30" x="500" y="0"></use><g transform="translate(1001,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="787" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-72" x="1132" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="1584" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mn>20</mn><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>c</mi><mi>i</mi><mi>r</mi><mi>c</mi></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-2"> 20 ^ {\ circ} </script>  e transferir para <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><merror><mtext>\&amp;#xA0;vec&amp;#xA0;{R}&amp;#xA0;=&amp;#xA0;\&amp;#xA0;{x0,&amp;#xA0;y0,&amp;#xA0;z0&amp;#xA0;\}</mtext></merror></math>" role="presentation"><span class="noError" aria-hidden="true" style="display: inline-block;">\&nbsp;vec&nbsp;{R}&nbsp;=&nbsp;\&nbsp;{x0,&nbsp;y0,&nbsp;z0&nbsp;\}</span><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><merror><mtext>\&nbsp;vec&nbsp;{R}&nbsp;=&nbsp;\&nbsp;{x0,&nbsp;y0,&nbsp;z0&nbsp;\}</mtext></merror></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ vec {R} = \ {x0, y0, z0 \} </script></p><br><pre> <code class="cpp hljs">x = [<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>]; y = [<span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>]; z = [<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-number"><span class="hljs-number">-1</span></span>] R = [ x' y' z' ones( length(x) ) ] plot(x', y', z', w = <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/c9/9j/av/c99java0rhnfpg9xmjub5l_azca.png"></p><br><pre> <code class="cpp hljs">R2 = R*Xtr plot!( R2[:,<span class="hljs-number"><span class="hljs-number">1</span></span>], R2[:,<span class="hljs-number"><span class="hljs-number">2</span></span>], R2[:,<span class="hljs-number"><span class="hljs-number">3</span></span>], w = <span class="hljs-number"><span class="hljs-number">3</span></span>)</code> </pre> <br><p><img src="https://habrastorage.org/webt/fi/ze/2i/fize2is4325hcoh6trzdgelyf9a.png"></p><br><h3 id="fruit-of-the-expression-tree">  Fruto da √Årvore de Express√£o </h3><br><p>  Como j√° vimos, as strings suportam "interpola√ß√£o", o que nos permite criar facilmente strings grandes a partir de componentes menores. </p><br><pre> <code class="cpp hljs">x = <span class="hljs-string"><span class="hljs-string">""</span></span> print(<span class="hljs-string"><span class="hljs-string">"$x $x $x  ..."</span></span>) Out[]:     ...</code> </pre> <br><p>  Com aspas (aspas) - a mesma hist√≥ria: </p><br><pre> <code class="cpp hljs">x = :(<span class="hljs-number"><span class="hljs-number">6</span></span>*<span class="hljs-number"><span class="hljs-number">7</span></span>) y = :($x + $x) Out[]: :(<span class="hljs-number"><span class="hljs-number">6</span></span> * <span class="hljs-number"><span class="hljs-number">7</span></span> + <span class="hljs-number"><span class="hljs-number">6</span></span> * <span class="hljs-number"><span class="hljs-number">7</span></span>) eval(y) Out[]: <span class="hljs-number"><span class="hljs-number">84</span></span></code> </pre> <br><h3 id="the-root-of-all-eval">  A raiz de todos os Eval </h3><br><p>  <code>eval()</code> n√£o apenas retorna o valor de uma express√£o.  Vamos tentar citar a declara√ß√£o da fun√ß√£o: </p><br><pre> <code class="cpp hljs">ex = :( cats() = println(<span class="hljs-string"><span class="hljs-string">"Meow!"</span></span>) ) cats() Out[]: UndefVarError: cats <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> defined</code> </pre> <br><p>  Agora revive-a: </p><br><pre> <code class="cpp hljs">eval(ex) Out[]: cats (generic function with <span class="hljs-number"><span class="hljs-number">1</span></span> method) cats() Out[]: Meow!</code> </pre> <br><p>  Usando a interpola√ß√£o, podemos construir a defini√ß√£o de uma fun√ß√£o rapidamente;  de fato, podemos executar imediatamente v√°rias fun√ß√µes. </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name in [:dog, :bird, :mushroom] println(:($name() = println($(<span class="hljs-string"><span class="hljs-string">"I'm $(name)!"</span></span>)))) end Out[]: dog() = begin #= In[<span class="hljs-number"><span class="hljs-number">27</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# println(<span class="hljs-string"><span class="hljs-string">"I'm dog!"</span></span>) end bird() = begin #= In[<span class="hljs-number"><span class="hljs-number">27</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# println(<span class="hljs-string"><span class="hljs-string">"I'm bird!"</span></span>) end mushroom() = begin #= In[<span class="hljs-number"><span class="hljs-number">27</span></span>]:<span class="hljs-number"><span class="hljs-number">2</span></span> =# println(<span class="hljs-string"><span class="hljs-string">"I'm mushroom!"</span></span>) end <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> name in [:dog, :bird, :mushroom] eval(:($name() = println($(<span class="hljs-string"><span class="hljs-string">"I'm $(name)!"</span></span>)))) end dog() Out[]: I'm dog! mushroom() Out[]: I'm mushroom!</code> </pre> <br><p>  Isso pode ser extremamente √∫til ao agrupar uma API (por exemplo, de uma biblioteca C ou atrav√©s de HTTP).  As APIs geralmente definem uma lista de fun√ß√µes dispon√≠veis, para que voc√™ possa captur√°-las e criar um shell inteiro de uma s√≥ vez!  Consulte Exemplos de Clang.jl, TensorFlow.jl ou √Ålgebra linear b√°sica. </p><br><h3 id="original-sin">  Pecado original </h3><br><p>  Aqui est√° um exemplo mais pr√°tico.  Considere a seguinte defini√ß√£o da fun√ß√£o <code>sin()</code> baseada na s√©rie de Taylor: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mtext>&amp;#xA0;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>i</mi><mi>n</mi><mi>f</mi><mi>t</mi><mi>y</mi></mrow></msubsup><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mo>&amp;#x2212;</mo><mn>1</mn><msup><mo stretchy=&quot;false&quot;>)</mo><mi>k</mi></msup></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mn>1</mn><mo>+</mo><mn>2</mn><mi>k</mi><mo stretchy=&quot;false&quot;>)</mo><mo>!</mo></mrow><msup><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>1</mn><mo>+</mo><mn>2</mn><mi>k</mi></mrow></msup></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="44.434ex" height="3.503ex" viewBox="0 -1091.4 19131.4 1508.3" role="img" focusable="false" style="vertical-align: -0.969ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-73" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="469" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6E" x="815" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-28" x="1415" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-78" x="1805" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-29" x="2377" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-3D" x="3044" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-73" x="4351" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-75" x="4820" y="0"></use><g transform="translate(5393,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6D" x="0" y="0"></use><g transform="translate(878,490)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-69" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6E" x="699" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-66" x="1299" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-74" x="1850" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-79" x="2211" y="0"></use></g><g transform="translate(878,-327)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6B" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-3D" x="521" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-31" x="1300" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-66" x="8537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-72" x="9087" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-61" x="9539" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-63" x="10068" y="0"></use><g transform="translate(10502,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-2212" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-31" x="1168" y="0"></use><g transform="translate(1668,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-29" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6B" x="550" y="583"></use></g></g><g transform="translate(13028,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-28" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-31" x="389" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-2B" x="1112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-32" x="2112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6B" x="2613" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-29" x="3134" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-21" x="3524" y="0"></use></g><g transform="translate(16831,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-78" x="0" y="0"></use><g transform="translate(572,412)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-31" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-2B" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMAIN-32" x="1279" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=https://habr.com/ru/post/431438/&amp;usg=ALkJrhgOkUKBQBQQBBdT-Ij2tidhskEqRQ#MJMATHI-6B" x="1779" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>s</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo><mo>=</mo><mtext>&nbsp;</mtext><mi>s</mi><mi>u</mi><msubsup><mi>m</mi><mrow class="MJX-TeXAtom-ORD"><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>i</mi><mi>n</mi><mi>f</mi><mi>t</mi><mi>y</mi></mrow></msubsup><mtext>&nbsp;</mtext><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mo>‚àí</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mi>k</mi></msup></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mn>2</mn><mi>k</mi><mo stretchy="false">)</mo><mo>!</mo></mrow><msup><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>+</mo><mn>2</mn><mi>k</mi></mrow></msup></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-4"> sin (x) = \ sum_ {k = 1} ^ {\ infty} \ frac {(- 1) ^ k} {(1 + 2k)!} x ^ {1 + 2k} </script></p><br><pre> <code class="cpp hljs">mysin(x) = sum((<span class="hljs-number"><span class="hljs-number">-1</span></span>)^k/factorial(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>*k) * x^(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>) mysin(<span class="hljs-number"><span class="hljs-number">0.5</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) Out[]: (<span class="hljs-number"><span class="hljs-number">0.4794255386041834</span></span>, <span class="hljs-number"><span class="hljs-number">0.479425538604203</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> BenchmarkTools @benchmark mysin(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) Out[]: BenchmarkTools.Trial: memory estimate: <span class="hljs-number"><span class="hljs-number">112</span></span> bytes allocs estimate: <span class="hljs-number"><span class="hljs-number">6</span></span> -------------- minimum time: <span class="hljs-number"><span class="hljs-number">1.105</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) median time: <span class="hljs-number"><span class="hljs-number">1.224</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) mean time: <span class="hljs-number"><span class="hljs-number">1.302</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) maximum time: <span class="hljs-number"><span class="hljs-number">9.473</span></span> Œºs (<span class="hljs-number"><span class="hljs-number">0.00</span></span>% GC) -------------- samples: <span class="hljs-number"><span class="hljs-number">10000</span></span> evals/sample: <span class="hljs-number"><span class="hljs-number">10</span></span></code> </pre> <br><p>  Agora √© muito mais lento do que poderia ser.  O motivo √© que iteramos sobre k, o que √© relativamente caro.  A grava√ß√£o expl√≠cita √© muito mais r√°pida: </p><br><pre> <code class="cpp hljs">mysin(x) = x - x^<span class="hljs-number"><span class="hljs-number">3</span></span>/<span class="hljs-number"><span class="hljs-number">6</span></span> + x^<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">120</span></span> # + ...</code> </pre> <br><p>  Mas isso √© entediante de escrever e n√£o se parece mais com a s√©rie Taylor original.  Al√©m disso, h√° um alto risco de mudas.  Existe uma maneira de matar uma lebre com dois tiros?  Que tal Julia nos escrever esse c√≥digo?  Primeiro, considere a vers√£o simb√≥lica da fun√ß√£o +. </p><br><pre> <code class="cpp hljs">plus(a, b) = :($a + $b) plus(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>) Out[]: :(<span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br><p>  Com <code>plus()</code> podemos fazer muitas coisas interessantes, por exemplo, uma soma simb√≥lica: </p><br><pre> <code class="cpp hljs">reduce(+, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>) Out[]: <span class="hljs-number"><span class="hljs-number">55</span></span> reduce(plus, <span class="hljs-number"><span class="hljs-number">1</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>) Out[]: :(((((((((<span class="hljs-number"><span class="hljs-number">1</span></span> + <span class="hljs-number"><span class="hljs-number">2</span></span>) + <span class="hljs-number"><span class="hljs-number">3</span></span>) + <span class="hljs-number"><span class="hljs-number">4</span></span>) + <span class="hljs-number"><span class="hljs-number">5</span></span>) + <span class="hljs-number"><span class="hljs-number">6</span></span>) + <span class="hljs-number"><span class="hljs-number">7</span></span>) + <span class="hljs-number"><span class="hljs-number">8</span></span>) + <span class="hljs-number"><span class="hljs-number">9</span></span>) + <span class="hljs-number"><span class="hljs-number">10</span></span>) eval(ans) Out[]: <span class="hljs-number"><span class="hljs-number">55</span></span> reduce(plus, [:(x^<span class="hljs-number"><span class="hljs-number">2</span></span>), :x, <span class="hljs-number"><span class="hljs-number">1</span></span>]) Out[]: :((x ^ <span class="hljs-number"><span class="hljs-number">2</span></span> + x) + <span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br><p>  Isso nos d√° uma parte importante do quebra-cabe√ßa, mas tamb√©m precisamos descobrir o que estamos resumindo.  Vamos criar uma vers√£o simb√≥lica da s√©rie Taylor acima que interpola o valor de k. </p><br><pre> <code class="cpp hljs">k = <span class="hljs-number"><span class="hljs-number">2</span></span> :($((<span class="hljs-number"><span class="hljs-number">-1</span></span>)^k) * x^$(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k) / $(factorial(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k))) Out[]: :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>)</code> </pre> <br><p>  Agora voc√™ pode rebitar os elementos da linha como em um transportador: </p><br><pre> <code class="cpp hljs">terms = [:($((<span class="hljs-number"><span class="hljs-number">-1</span></span>)^k) * x^$(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k) / $(factorial(<span class="hljs-number"><span class="hljs-number">1</span></span>+<span class="hljs-number"><span class="hljs-number">2</span></span>k))) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>:<span class="hljs-number"><span class="hljs-number">5</span></span>] Out[]: <span class="hljs-number"><span class="hljs-number">6</span></span>-element Array{Expr,<span class="hljs-number"><span class="hljs-number">1</span></span>}: :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">1</span></span>) :((<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) / <span class="hljs-number"><span class="hljs-number">6</span></span>) :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>) :((<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">7</span></span>) / <span class="hljs-number"><span class="hljs-number">5040</span></span>) :((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">9</span></span>) / <span class="hljs-number"><span class="hljs-number">362880</span></span>) :((<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">11</span></span>) / <span class="hljs-number"><span class="hljs-number">39916800</span></span>)</code> </pre> <br><p>  E resuma-os: </p><br><pre> <code class="cpp hljs">reduce(plus, ans) Out[]: :((((((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">1</span></span> + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) / <span class="hljs-number"><span class="hljs-number">6</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">7</span></span>) / <span class="hljs-number"><span class="hljs-number">5040</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">9</span></span>) / <span class="hljs-number"><span class="hljs-number">362880</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">11</span></span>) / <span class="hljs-number"><span class="hljs-number">39916800</span></span>) :(mysin(x) = $ans) Out[]: :(mysin(x) = begin #= In[<span class="hljs-number"><span class="hljs-number">52</span></span>]:<span class="hljs-number"><span class="hljs-number">1</span></span> =# (((((<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">1</span></span>) / <span class="hljs-number"><span class="hljs-number">1</span></span> + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">3</span></span>) / <span class="hljs-number"><span class="hljs-number">6</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">5</span></span>) / <span class="hljs-number"><span class="hljs-number">120</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">7</span></span>) / <span class="hljs-number"><span class="hljs-number">5040</span></span>) + (<span class="hljs-number"><span class="hljs-number">1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">9</span></span>) / <span class="hljs-number"><span class="hljs-number">362880</span></span>) + (<span class="hljs-number"><span class="hljs-number">-1</span></span> * x ^ <span class="hljs-number"><span class="hljs-number">11</span></span>) / <span class="hljs-number"><span class="hljs-number">39916800</span></span> end) eval(ans) mysin(<span class="hljs-number"><span class="hljs-number">0.5</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">sin</span></span>(<span class="hljs-number"><span class="hljs-number">0.5</span></span>) Out[]: (<span class="hljs-number"><span class="hljs-number">0.4794255386041834</span></span>, <span class="hljs-number"><span class="hljs-number">0.479425538604203</span></span>) @<span class="hljs-function"><span class="hljs-function">benchmark </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mysin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.5</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> Out[]: BenchmarkTools.Trial: memory estimate: 0 bytes allocs estimate: 0 -------------- minimum time: 414.363 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ns</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> median time: 416.328 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ns</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> mean time: 431.885 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ns</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> maximum time: 3.352 Œº</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">s</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.00</span></span></span></span><span class="hljs-function"><span class="hljs-params">% GC)</span></span></span><span class="hljs-function"> -------------- samples: 10000 evals/sample: 201</span></span></code> </pre> <br><p>  Nada mal para uma implementa√ß√£o ing√™nua!  O f√≥ton n√£o tem tempo para percorrer cem metros e meio e o seno j√° foi calculado! <br>  Este √© o tempo para terminar.  Para aqueles que desejam esclarecer melhor este t√≥pico, aconselharei <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">um tutorial interativo executado no Jupyter</a> , cuja tradu√ß√£o foi usada principalmente aqui, um <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">curso em v√≠deo</a> do site oficial e a <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">se√ß√£o correspondente da</a> documenta√ß√£o.  Para os rec√©m-chegados, aconselho que voc√™ caminhe pelo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=pt&amp;u=">centro</a> , pois j√° existe uma quantidade aceit√°vel de materiais. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/pt431438/">https://habr.com/ru/post/pt431438/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../pt431428/index.html">Guia completo do CMake. Parte Um: Sintaxe</a></li>
<li><a href="../pt431430/index.html">A participa√ß√£o em projetos de c√≥digo aberto pode ser ben√©fica para as empresas - por que e o que isso oferece</a></li>
<li><a href="../pt431432/index.html">Como gerar confirma√ß√µes significativas. Aplicar padr√£o de consolida√ß√£o convencional</a></li>
<li><a href="../pt431434/index.html">Tr√™s hist√≥rias de moderniza√ß√£o no data center</a></li>
<li><a href="../pt431436/index.html">Por que a documenta√ß√£o do SRE √© importante. Parte 2</a></li>
<li><a href="../pt431440/index.html">Timofey Bokarev, um designer de jogos russo interessante</a></li>
<li><a href="../pt431442/index.html">WD Black NVMe atualizado: do que o 3D NAND √© realmente capaz?</a></li>
<li><a href="../pt431444/index.html">Como planejar um sprint de duas semanas</a></li>
<li><a href="../pt431446/index.html">Light? A camera OSMO! DJI introduziu o menor OSMO Pocket steadicam</a></li>
<li><a href="../pt431448/index.html">Samsung Buds 2019: atualiza√ß√£o misteriosa para o Gear IconX ou poss√≠veis assassinos do Apple AirPods</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>