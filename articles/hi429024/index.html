<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ЁЯХЯ ЁЯПС ЁЯзХЁЯП┐ OpenCV рдХреЗ рд╕рд╛рде GIF рдмрдирд╛рдПрдБ ЁЯУЯ ЁЯзШЁЯП╛ тЬ│я╕П</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="рдпрд╣ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдПрдЧрд╛ рдХрд┐ OpenCV, Python рдФрд░ ImageMagick рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдирд┐рдореЗрдЯреЗрдб GIF рдХреИрд╕реЗ рдмрдирд╛рдПрдВред рдлрд┐рд░ OpenCV рдХреЗ рд╕рд╛рде рдПрдХ рдореЗрдо рдЬрдирд░реЗрдЯрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рд╡рд┐рдз...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>OpenCV рдХреЗ рд╕рд╛рде GIF рдмрдирд╛рдПрдБ</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/429024/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/g1/sx/hd/g1sxhdlqfra2bohbg5d7yjliv6g.gif"></div><br><br>  рдпрд╣ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЖрдкрдХреЛ рджрд┐рдЦрд╛рдПрдЧрд╛ рдХрд┐ OpenCV, Python рдФрд░ ImageMagick рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдирд┐рдореЗрдЯреЗрдб GIF рдХреИрд╕реЗ рдмрдирд╛рдПрдВред  рдлрд┐рд░ OpenCV рдХреЗ рд╕рд╛рде рдПрдХ рдореЗрдо рдЬрдирд░реЗрдЯрд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рд╡рд┐рдзрд┐рдпреЛрдВ рдХреЛ рд╕рдВрдпреЛрдЬрд┐рдд рдХрд░реЗрдВ! <br><br>  рд╣рдо рд╕рднреА рдХреЛ рд╕рдордп-рд╕рдордп рдкрд░ рд╣рдВрд╕рдиреЗ рдХреА рдЬрд░реВрд░рдд рд╣реИред  рдФрд░ рд╢рд╛рдпрдж рд▓реБрд▓рдЬрд╛ рдХреЛ рдЦреЛрдЬрдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЕрдЪреНрдЫрд╛ рддрд░реАрдХрд╛ рдореЗрдореЛрдВ рдХреЗ рд╕рд╛рде рд╣реИред  рдореЗрд░реЗ рдХреБрдЫ рдкрд╕рдВрджреАрджрд╛: <br><br><ul><li>  Krogit рдореЗрдВрдврдХ: "рд▓реЗрдХрд┐рди рдпрд╣ рдореЗрд░рд╛ рд╡реНрдпрд╡рд╕рд╛рдп рдирд╣реАрдВ рд╣реИ" </li><li>  рдХреНрд░реЛрдзреА рдмрд┐рд▓реНрд▓реА </li><li>  рдорд╣рд╛рдХрд╛рд╡реНрдп рдХреА рд╡рд┐рдлрд▓рддрд╛ </li><li>  рдЕрдЪреНрдЫрд╛ рдЖрджрдореА рдЬреАрдЬреА </li></ul><br>  <b>рд▓реЗрдХрд┐рди рдореЗрд░реЗ рд▓рд┐рдП рд╡реНрдпрдХреНрддрд┐рдЧрдд рд░реВрдк рд╕реЗ, рдЗрдирдореЗрдВ рд╕реЗ рдХреЛрдИ рднреА рдореЗрдо "рдбреАрд▓ рд╡рд┐рде рдЗрдЯ" рдореЗрдо ("рдЗрд╕рдХреЗ рд╕рд╛рде рдбреАрд▓" рдпрд╛ "рдЗрд╕реЗ рдЦреБрдж рд╕рдордЭреЗрдВ") рдХреЗ рд╕рд╛рде рддреБрд▓рдирд╛ рдХрд░ рд╕рдХрддрд╛ рд╣реИ, рдЬрд┐рд╕рдХрд╛ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд▓реЗрдЦ рдХреА рд╢реБрд░реБрдЖрдд рдореЗрдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред</b> <br><a name="habracut"></a><br>  рдпрд╣ рдЖрдорддреМрд░ рдкрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдорд╛рдорд▓реЛрдВ рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><ol><li>  рдХрд┐рд╕реА рдРрд╕реЗ рд╡реНрдпрдХреНрддрд┐ рдХреЗ рд▓рд┐рдП рдЬрд╡рд╛рдм рдпрд╛ рдЖрдкрддреНрддрд┐ рдХреЗ рд░реВрдк рдореЗрдВ, рдЬреЛ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдХрд┐рдП рдЧрдП рдХрд┐рд╕реА рдХрд╛рдо рдХреЛ рдордВрдЬреВрд░реА рдирд╣реАрдВ рджреЗрддрд╛ / рдХрд╣рд╛ рдЬрд╛рддрд╛ рд╣реИ ("рдЗрд╕рдХреЗ рд╕рд╛рде рд╕реМрджрд╛") </li><li>  рдЕрдкрдиреЗ рдЪрд╢реНрдореЗ рдкрд░ рд░рдЦрдирд╛ рдорд╛рдиреЛ рдЖрдк рдЙрд╕ рд╡реНрдпрдХреНрддрд┐ рдХреЛ рд╕рдорд╕реНрдпрд╛ рдХреЗ рд╕рд╛рде рдЕрдХреЗрд▓рд╛ рдЫреЛрдбрд╝ рдХрд░ рдЬрд╛ рд░рд╣реЗ рд╣реИрдВ ("рдЗрд╕реЗ рд╕реНрд╡рдпрдВ рд╕рдордЭреЗрдВ") </li></ol><br>  рдХреБрдЫ рд╕рд╛рд▓ рдкрд╣рд▓реЗ рдореИрдВрдиреЗ рд▓реЗрдЦрдХ рдХреЗ рдмреНрд▓реЙрдЧ рдкрд░ рдПрдХ рдордЬреЗрджрд╛рд░ рд▓реЗрдЦ рдкрдврд╝рд╛ рдерд╛, рдЬрд┐рд╕реЗ рдпрд╛рдж рдирд╣реАрдВ рдХрд░ рд╕рдХрддрд╛ рдХрд┐ рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬрд╝рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЗрд╕ рддрд░рд╣ рдХреЗ рдореАрдореНрд╕ рдХреИрд╕реЗ рдмрдирд╛рдП рдЬрд╛ рд╕рдХрддреЗ рд╣реИрдВред  рдкрд┐рдЫрд▓реЗ рд╣рдлреНрддреЗ рдореБрдЭреЗ рдпрд╣ рдЧрд╛рдЗрдб рдХрд╣реАрдВ рдирд╣реАрдВ рдорд┐рд▓рд╛, рдЗрд╕рд▓рд┐рдП рдПрдХ рдмреНрд▓реЙрдЧрд░, рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬрд╝рди рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдФрд░ рдореЗрдо рдкрд░ рд╡рд┐рд╢реЗрд╖рдЬреНрдЮ рдХреЗ рд░реВрдк рдореЗрдВ, рдореИрдВрдиреЗ рдЦреБрдж рдПрдХ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рд▓рд┐рдЦрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛!  (рд╡реИрд╕реЗ, рдЕрдЧрд░ рдЖрдк рдЧрд▓рддреА рд╕реЗ рдореВрд▓ рд╕реНрд░реЛрдд рдХреЛ рдЬрд╛рдирддреЗ рд╣реИрдВ, рддреЛ рдХреГрдкрдпрд╛ рдореБрдЭреЗ рдмрддрд╛рдПрдВ рддрд╛рдХрд┐ рдореИрдВ рд▓реЗрдЦрдХ рдХреЛ рдзрдиреНрдпрд╡рд╛рдж рджреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдХреВрдВ</a> ред <b>UPD:</b> рдмрд╕ рдХрд┐рд░реНрдХ рдХреИрд╕рд░ рдХреЗ рдмреНрд▓реЙрдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">MakeArtWithPython</a> рд╕реЗ рдореВрд▓ рд▓реЗрдЦ рдорд┐рд▓рд╛)ред <br><br>  OpenCV рдкрд░ рдореЗрдореЗ рдЬрдирд░реЗрдЯрд░ рд╡рд┐рдХрд╕рд┐рдд рдХрд░рдирд╛ рд╣рдореЗрдВ рдХрдИ рдореВрд▓реНрдпрд╡рд╛рди рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдХреМрд╢рд▓ рд╕рд┐рдЦрд╛рдПрдЧрд╛, рдЬрд┐рд╕рдореЗрдВ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ: <br><br><ol><li>  рдбреАрдк рд▓рд░реНрдирд┐рдВрдЧ рддрдХрдиреАрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП рдлреЗрд╕ рдбрд┐рдЯреЗрдХреНрд╢рди </li><li>  рдЪреЗрд╣рд░реЗ рдХреА рдЬрдЧрд╣реЗрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдФрд░ рдЖрдВрдЦреЛрдВ рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП dlib рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдирд╛ </li><li>  рдкреНрд░рд╛рдкреНрдд рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдЖрдВрдЦреЛрдВ рдХреЗ рдмреАрдЪ рд░реЛрдЯреЗрд╢рди рдХреЗ рдХреЛрдг рдХреА рдЧрдгрдирд╛ рдХреИрд╕реЗ рдХрд░реЗрдВ </li><li>  рдФрд░ рдЕрдВрдд рдореЗрдВ, OpenCV рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдирд┐рдореЗрдЯреЗрдб GIF рдХреИрд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд░реЗрдВ (ImageMagick рд╕реЗ рдереЛрдбрд╝реА рдорджрдж рдХреЗ рд╕рд╛рде) </li></ol><br>  рдпрд╣ рдорд╛рд░реНрдЧрджрд░реНрд╢рд┐рдХрд╛ рдордЬрд╝реЗрджрд╛рд░ рдФрд░ рдордиреЛрд░рдВрдЬрдХ рд╣реЛрдиреА рдЪрд╛рд╣рд┐рдП - рдФрд░ рд╕рд╛рде рд╣реА рдЖрдкрдХреЛ рдореВрд▓реНрдпрд╡рд╛рди рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬрд╝рди рдкреНрд░реЛрдЧреНрд░рд╛рдорд┐рдВрдЧ рдХреМрд╢рд▓ рд╕рд┐рдЦрд╛рдПрдБ рдЬреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХ рджреБрдирд┐рдпрд╛ рдореЗрдВ рдХрд╛рдо рдЖрддреЗ рд╣реИрдВред <br><br><h1>  OpenCV рдХреЗ рд╕рд╛рде GIF рдмрдирд╛рдирд╛ </h1><br>  рдЧрд╛рдЗрдб рдХреЗ рдкрд╣рд▓реЗ рднрд╛рдЧ рдореЗрдВ, рд╣рдо рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдФрд░ рдирд┐рд░реНрднрд░рддрд╛ рдкрд░ рдЪрд░реНрдЪрд╛ рдХрд░реЗрдВрдЧреЗ, рдЬрд┐рд╕рдореЗрдВ рд╡рд┐рдХрд╛рд╕ рдкрд░реНрдпрд╛рд╡рд░рдг рдХрд╛ рдЙрдЪрд┐рдд рд╡рд┐рдиреНрдпрд╛рд╕ рднреА рд╢рд╛рдорд┐рд▓ рд╣реИред <br><br>  рдлрд┐рд░ рд╣рдорд╛рд░реЗ OpenCV GIF рдЬрдирд░реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рдкреНрд░реЛрдЬреЗрдХреНрдЯ / рдХреИрдЯрд▓реЙрдЧ рд╕рдВрд░рдЪрдирд╛ рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред <br><br>  рдЬреИрд╕реЗ рд╣реА рд╣рдо рдкрд░рд┐рдпреЛрдЬрдирд╛ рд╕рдВрд░рдЪрдирд╛ рдХреЛ рд╕рдордЭрддреЗ рд╣реИрдВ, рд╣рдо рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВрдЧреЗ: 1) рд╣рдорд╛рд░реА рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓;  2) OpenCV рдХреЗ рд╕рд╛рде GIF рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯред <br><br>  рдЕрдВрдд рдореЗрдВ, рд╣рдо рд▓реЛрдХрдкреНрд░рд┐рдп рдореЗрдо "рдбреАрд▓ рд╡рд┐рдж рдЗрдЯ" рдкрд░ рдХрд╛рд░реНрдпрдХреНрд░рдо рдХреЗ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХрд╛ рдореВрд▓реНрдпрд╛рдВрдХрди рдХрд░реЗрдВрдЧреЗред <br><br><h4>  рдкреВрд░реНрд╡рд╛рдкреЗрдХреНрд╖рд╛рдПрдБ рдФрд░ рдирд┐рд░реНрднрд░рддрд╛рдПрдБ </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/ad6/c3e/193/ad6c3e193373bc04c877e60070d73071.png"><br>  <b>рдЕрдВрдЬреАрд░ред</b>  <b>1. рд╣рдо GIF рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП OpenCV, dlib рдФрд░ ImageMagick рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗ</b> <br><br><h3>  Opencv рдФрд░ dlib </h3><br>  OpenCV рдХреЛ рдлреНрд░реЗрдо рдФрд░ рдмреЗрд╕рд┐рдХ рдЗрдореЗрдЬ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдореЗрдВ рдЪреЗрд╣рд░реЗ рдХреЛ рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрджрд┐</a> рд╕рд┐рд╕реНрдЯрдо рдкрд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">OpenCV</a> рд╕реНрдерд╛рдкрд┐рдд рдирд╣реАрдВ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╣реИ, рддреЛ</a> рдореЗрд░реЗ рдХрд┐рд╕реА <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">OpenCV рдЗрдВрд╕реНрдЯреЙрд▓реЗрд╢рди рдЧрд╛рдЗрдб</a> рдХрд╛ рдкрд╛рд▓рди рдХрд░реЗрдВред <br><br>  рд╣рдо рдЪреЗрд╣рд░реЗ рдХреА рд╕реНрдерд▓реЛрдВ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдбреЗрд▓рд┐рдм рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рд╣рдореЗрдВ рдЪреЗрд╣рд░реЗ рдкрд░ рджреЛ рдЖрдБрдЦреЗрдВ рдЦреЛрдЬрдиреЗ рдФрд░ рдзреВрдк рдХрд╛ рдЪрд╢реНрдорд╛ рд▓рдЧрд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред  рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ рдирд┐рд░реНрджреЗрд╢ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ dlib рд╕реНрдерд╛рдкрд┐рдд</a> рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред <br><br><h4>  ImageMagick </h4><br>  рдпрджрд┐ рдЖрдк <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">ImageMagick рд╕реЗ</a> рдкрд░рд┐рдЪрд┐рдд рдирд╣реАрдВ рд╣реИрдВ, рддреЛ рд╡реНрдпрд░реНрде рдореЗрдВред  рдпрд╣ рдПрдХ рдХреНрд░реЙрд╕-рдкреНрд▓реЗрдЯрдлрд╝реЙрд░реНрдо рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рдЯреВрд▓ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рдХрдИ рдЗрдореЗрдЬ рдкреНрд░реЛрд╕реЗрд╕рд┐рдВрдЧ рдлреАрдЪрд░реНрд╕ рд╣реИрдВред <br><br>  рдХреНрдпрд╛ рдЖрдк PNG / JPG рдХреЛ рдПрдХ рдХрдорд╛рдВрдб рд╕реЗ PDF рдореЗрдВ рдмрджрд▓рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?  рдХреЛрдИ рдмрд╛рдд рдирд╣реАрдВред <br><br>  рдХрдИ рдЫрд╡рд┐рдпрд╛рдВ рд╣реИрдВ рдЬрд┐рдирд╕реЗ рдЖрдкрдХреЛ рдПрдХ рдмрд╣реБ-рдкреГрд╖реНрда рдкреАрдбреАрдПрдл рдмрдирд╛рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ?  рдЖрд╕рд╛рдиреА рд╕реЗред <br><br>  рдмрд╣реБрднреБрдЬ, рд░реЗрдЦрд╛рдУрдВ рдФрд░ рдЕрдиреНрдп рдЖрдХреГрддрд┐рдпреЛрдВ рдХреЛ рдЦреАрдВрдЪрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ?  рдФрд░ рдпрд╣ рд╕рдВрднрд╡ рд╣реИред <br><br>  рдХреИрд╕реЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмреИрдЪ рд░рдВрдЧ рдЧреНрд░реЗрдбрд┐рдВрдЧ рдпрд╛ рдПрдХ рдЖрджреЗрд╢ рдХреЗ рд╕рд╛рде рд╕рднреА рдЪрд┐рддреНрд░реЛрдВ рдХрд╛ рдЖрдХрд╛рд░ рдмрджрд▓рдиреЗ?  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЖрдкрдХреЛ OpenCV рдХреЗ рд▓рд┐рдП рдкрд╛рдпрдерди рдореЗрдВ рдХреБрдЫ рдкрдВрдХреНрддрд┐рдпрд╛рдБ рд▓рд┐рдЦрдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдирд╣реАрдВ рд╣реИред <br><br>  ImageMagick рдХрд┐рд╕реА рднреА рдЗрдореЗрдЬ рд╕реЗ GIF рднреА рдмрдирд╛рддрд╛ рд╣реИред <br><br>  Ubuntu (рдпрд╛ рд░рд╛рд╕реНрдкрд┐рдпрди) рдкрд░ ImageMagick рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрд╕ apt рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВ: <br><br>  OpenCVShell рдХреЗ рд╕рд╛рде GIF рдмрдирд╛рдирд╛ <br><br><pre><code class="bash hljs">$ sudo apt-get install imagemagick</code> </pre> <br>  MacOS рдкрд░, рдЖрдк HomeBrew рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ: <br><br><pre> <code class="bash hljs">$ brew install imagemagick</code> </pre> <br><h4>  imutils </h4><br>  рдЕрдзрд┐рдХрд╛рдВрд╢ рд▓реЗрдЦреЛрдВ, рдкрд╛рдареНрдпрдХреНрд░рдореЛрдВ рдФрд░ рдкреБрд╕реНрддрдХреЛрдВ рдореЗрдВ, рдореИрдВ рдЕрдкрдиреЗ рд╕реБрд╡рд┐рдзрд╛рдЬрдирдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">imutils</a> рдЫрд╡рд┐ рдкреНрд░рд╕рдВрд╕реНрдХрд░рдг <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкреИрдХреЗрдЬ рдХрд╛</a> рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реВрдВред  рдпрд╣ рдкрд╛рдЗрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рдПрдХ рд╕рд┐рд╕реНрдЯрдо рдпрд╛ рд╡рд░реНрдЪреБрдЕрд▓ рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рд╕реНрдерд╛рдкрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ: <br><br><pre> <code class="bash hljs">$ pip install imutils</code> </pre> <br><h2>  рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреА рд╕рдВрд░рдЪрдирд╛ </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e42/281/af0/e42281af07fb94c9ae60a526098f662d.png"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">2. рдкреНрд░реЛрдЬреЗрдХреНрдЯ рд╕рдВрд░рдЪрдирд╛ рдореЗрдВ рджреЛ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛рдПрдВ, рдПрдХ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдФрд░ рдПрдХ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╢рд╛рдорд┐рд▓ рд╣реИрдВ</font></i> <br><br>  рд╣рдорд╛рд░реА рдкрд░рд┐рдпреЛрдЬрдирд╛ рдореЗрдВ рджреЛ рдХреИрдЯрд▓реЙрдЧ рд╣реИрдВ: <br><br><ul><li>  <code>images/</code> : рдЗрдирдкреБрдЯ рдЫрд╡рд┐рдпреЛрдВ рдХреЗ рдЙрджрд╛рд╣рд░рдг рдЬрд┐рдирдХреЗ рд▓рд┐рдП рд╣рдо рдПрдХ рдПрдирд┐рдореЗрдЯреЗрдб GIF рдмрдирд╛рдирд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВред  рдореБрдЭреЗ рдЕрдкрдиреЗ рд╕рд╛рде рдХреБрдЫ рдЫрд╡рд┐рдпрд╛рдВ рдорд┐рд▓реАрдВ, рд▓реЗрдХрд┐рди рдЕрдкрдиреЗ рдЖрдк рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рд▓рд┐рдП рд╕реНрд╡рддрдВрддреНрд░ рдорд╣рд╕реВрд╕ рдХрд░реЗрдВред </li><li>  <code>assets/</code> : рдЗрд╕ рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рд╣рдорд╛рд░рд╛ рдлреЗрд╕ рдбрд┐рдЯреЗрдХреНрдЯрд░, рдлреЗрд╕ рд▓реИрдВрдбрдорд╛рд░реНрдХ рдбрд┐рдЯреЗрдХреНрдЯрд░ рдФрд░ рд╕рднреА рдЪрд┐рддреНрд░ + рд╕рдВрдмрдВрдзрд┐рдд рдорд╛рд╕реНрдХ рд╢рд╛рдорд┐рд▓ рд╣реИрдВред  рдЗрди рдкрд░рд┐рд╕рдВрдкрддреНрддрд┐рдпреЛрдВ рдХреЗ рд╕рд╛рде, рд╣рдо рдкрд╣рд▓реЗ рдлрд╝реЛрд▓реНрдбрд░ рд╕реЗ рдореВрд▓ рдЪрд┐рддреНрд░реЛрдВ рдкрд░ рдЕрдВрдХ рдФрд░ рдкрд╛рда рдбрд╛рд▓реЗрдВрдЧреЗред </li></ul><br>  рдмрдбрд╝реА рд╕рдВрдЦреНрдпрд╛ рдореЗрдВ рд╡рд┐рдиреНрдпрд╛рд╕ рдпреЛрдЧреНрдп рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рдХрд╛рд░рдг, рдореИрдВрдиреЗ JSON рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛, рдЬреЛ: 1) рдорд╛рдкрджрдВрдбреЛрдВ рдХреЗ рд╕рдВрдкрд╛рджрди рдХреА рд╕реБрд╡рд┐рдзрд╛ рдкреНрд░рджрд╛рди рдХрд░реЗрдЧрд╛;  2) рдХрдо рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рддрд░реНрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрдЧреАред  рдЗрд╕ рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рднреА рд╡рд┐рдиреНрдпрд╛рд╕ рдкреИрд░рд╛рдореАрдЯрд░ <code>config.json</code> рдореЗрдВ рд╕рдореНтАНрдорд┐рд▓рд┐рдд рд╣реИрдВред <br><br>  <code>config.json</code> рдФрд░ <code>create_gif.py</code> рдХреА рд╕рд╛рдордЧреНрд░реА рдкрд░ рд╡рд┐рдЪрд╛рд░ рдХрд░реЗрдВред <br><br><a name="1"></a>  <font color="gray">рд▓рдЧрднрдЧред</font>  <font color="gray">рдкреНрд░рддрд┐: рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдХреЛрдб рдФрд░ рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬрд╝рди, рдорд╢реАрди рд▓рд░реНрдирд┐рдВрдЧ рдФрд░ OpenCV рдкрд░ 17-рдкреЗрдЬ рдореИрдиреБрдЕрд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдкрдВрдЬреАрдХрд░рдг рдХреЗ рдмрд╛рдж</a> рдЬрд╛рд░реА рдХрд┐рдП рдЬрд╛рддреЗ рд╣реИрдВ (рджрд░реНрдкрдг: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕реНрд░реЛрдд рдХреЛрдб</a> , <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдореИрдиреБрдЕрд▓</a> )ред</font> <br><br><h2>  OpenCV рдХреЗ рд╕рд╛рде GIF рдЬрдирд░реЗрд╢рди </h2><br>  рддреЛ, рдЪрд▓рд┐рдП рдЬрд╛рд░реА рд░рдЦрддреЗ рд╣реИрдВ рдФрд░ рдЕрдкрдирд╛ OpenCV GIF рдЬрдирд░реЗрдЯрд░ рдмрдирд╛рдирд╛ рд╢реБрд░реВ рдХрд░рддреЗ рд╣реИрдВ! <br><br><h4>  JSON рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд╕рд╛рдордЧреНрд░реА </h4><br>  рдЖрдЗрдП JSON рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд╕реЗ рд╢реБрд░реВ рдХрд░реЗрдВ, рдФрд░ рдлрд┐рд░ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдкрд░ рдЬрд╛рдПрдВред <br><br>  рдПрдХ рдирдпрд╛ <code>config.json</code> рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреБрдВрдЬреА / рдорд╛рди рдЬреЛрдбрд╝реЗ рдбрд╛рд▓реЗрдВ: <br><br>  OpenCVPththon рдХреЗ рд╕рд╛рде GIF рдмрдирд╛рдирд╛ <br><br><pre> <code class="python hljs">{ <span class="hljs-string"><span class="hljs-string">"face_detector_prototxt"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deploy.prototxt"</span></span>, <span class="hljs-string"><span class="hljs-string">"face_detector_weights"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/res10_300x300_ssd_iter_140000.caffemodel"</span></span>, <span class="hljs-string"><span class="hljs-string">"landmark_predictor"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/shape_predictor_68_face_landmarks.dat"</span></span>,</code> </pre> <br>  рдпреЗ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">OpenCV рдлреЗрд╕ рдбрд┐рдЯреЗрдХреНрдЯрд░</a> рдореЙрдбрд▓ рдлрд╛рдЗрд▓реНрд╕ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбреАрдк рд▓рд░реНрдирд┐рдВрдЧ рдореЗрдВ рд╣реИрдВ</a> ред <br><br>  рдЕрдВрддрд┐рдо рдкрдВрдХреНрддрд┐ dlib рдлреЗрд╕ рдкреНрд░реЗрдбрд┐рдХреНрдЯрд░ рдХрд╛ рдорд╛рд░реНрдЧ рд╣реИред <br><br>  рдФрд░ рдЕрдм рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рдЗрдореЗрдЬ рдлрд╛рдЗрд▓ рдХреЗ рдХреБрдЫ рд░рд╛рд╕реНрддреЗ рд╣реИрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-string"><span class="hljs-string">"sunglasses"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"sunglasses_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/sunglasses_mask.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it.png"</span></span>, <span class="hljs-string"><span class="hljs-string">"deal_with_it_mask"</span></span>: <span class="hljs-string"><span class="hljs-string">"assets/deal_with_it_mask.png"</span></span>,</code> </pre> <br>  рдпреЗ рд╣рдорд╛рд░реЗ рдзреВрдк рдХреЗ рдЪрд╢реНрдореЗ, рдкрд╛рда рдФрд░ рдЙрдирдХреЗ рд▓рд┐рдП рдореЗрд▓ рдЦрд╛рдиреЗ рд╡рд╛рд▓реЗ рд░рд╛рд╕реНрддреЗ рд╣реИрдВ, рдЬреЛ рдиреАрдЪреЗ рджрд┐рдЦрд╛рдП рдЧрдП рд╣реИрдВред <br><br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдлреИрдВрд╕реА рдзреВрдк рдХрд╛ рдЪрд╢реНрдорд╛ рдФрд░ рдПрдХ рдореБрдЦреМрдЯрд╛: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c18/c4c/647/c18c4c6471e203aedea66a80c9080192.png"></div><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">3. рдЖрдкрдХреЛ рдкрд┐рдХреНрд╕рд▓ рд╡рд╛рд▓реЗ рдЪрд╢реНрдореЗ рдкрд╕рдВрдж рдирд╣реАрдВ рд╣реИрдВ?</font></i>  <i><font color="gray">рдмрд╕ рдЗрд╕рдХреЗ рд╕рд╛рде рд░рдЦреЛ</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58b/91a/d9c/58b91ad9c2e66238b3f3ac22fe1ee439.png"></div><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">4. рдЖрдкрдХреЛ рд╕рдордЭ рдореЗрдВ рдирд╣реАрдВ рдЖрддрд╛ рдХрд┐ рдЖрдкрдХреЛ рдзреВрдк рдХреЗ рдЪрд╢реНрдореЗ рдХреЗ рд▓рд┐рдП рдорд╛рд╕реНрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рдХреНрдпреЛрдВ рд╣реИ?</font></i>  <i><font color="gray">рдмрд╕ рдЗрд╕рдХреЗ рд╕рд╛рде рд░рдЦреЛ - рдпрд╛ рдЙрддреНрддрд░ рдХреЗ рд▓рд┐рдП рдмрд╛рдХреА рд▓реЗрдЦ рдкрдврд╝реЗрдВред</font></i> <br><br>  рдФрд░ рдЕрдм рд╣рдорд╛рд░рд╛ рдкрд╛рда "рдЖрдИрдЯреА рдХреЗ рд╕рд╛рде рд╕реМрджрд╛" рдФрд░ рдореБрдЦреМрдЯрд╛ рд╣реИ: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ec3/4e4/923/ec34e4923e2d05a5b33c065de8f5af66.png"></div><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">5. рдХреНрдпрд╛ рдЖрдк Helvetica Neue Condensed рд╕реЗ рдирдлрд░рдд рдХрд░рддреЗ рд╣реИрдВ?</font></i>  <i><font color="gray">рдЗрд╕рд╕реЗ рдирд┐рдкрдЯреЛ</font></i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6c/f70/819/c6cf708198bda68d849029b3ded02265.png"></div><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">6: рдпрд╣ рдореБрдЦреМрдЯрд╛ рдЖрдкрдХреЛ рдкрд╛рда рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдПрдХ рд╕реАрдорд╛ рдЦреАрдВрдЪрдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИред</font></i>  <i><font color="gray">рдУрд╣, рд╢рд╛рдпрдж рдЖрдк рдирд╣реАрдВ рдЪрд╛рд╣рддреЗ, рдХреНрдпрд╛ рдЖрдк рдПрдХ рд╕реАрдорд╛ рдЪрд╛рд╣рддреЗ рд╣реИрдВ?</font></i>  <i><font color="gray">рдареАрдХ рд╣реИ, рдЗрд╕рдХреЗ рд╕рд╛рде рд░рдЦреЛ</font></i> <br><br>  рдлреЛрдЯреЛ рдкрд░ рд╕рдВрдмрдВрдзрд┐рдд рдЫрд╡рд┐ рдХреЛ рдУрд╡рд░рд▓реЗ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдорд╛рд╕реНрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИ: рд╣рдо рдмрд╛рдж рдореЗрдВ рдЗрд╕рд╕реЗ рдирд┐рдкрдЯреЗрдВрдЧреЗред <br><br>  рдЕрдм рдореЗрдо рдЬрдирд░реЗрдЯрд░ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдкреИрд░рд╛рдореАрдЯрд░ рд╕реЗрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="python hljs"> <span class="hljs-string"><span class="hljs-string">"min_confidence"</span></span>: <span class="hljs-number"><span class="hljs-number">0.5</span></span>, <span class="hljs-string"><span class="hljs-string">"steps"</span></span>: <span class="hljs-number"><span class="hljs-number">20</span></span>, <span class="hljs-string"><span class="hljs-string">"delay"</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-string"><span class="hljs-string">"final_delay"</span></span>: <span class="hljs-number"><span class="hljs-number">250</span></span>, <span class="hljs-string"><span class="hljs-string">"loop"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"temp_dir"</span></span>: <span class="hljs-string"><span class="hljs-string">"temp"</span></span> }</code> </pre> <br>  рдпрд╣рд╛рдБ рдкреНрд░рддреНрдпреЗрдХ рдкреИрд░рд╛рдореАрдЯрд░ рдХреЗ рд▓рд┐рдП рдкрд░рд┐рднрд╛рд╖рд╛рдПрдБ рджреА рдЧрдИ рд╣реИрдВ: <br><br><ul><li>  <code>min_confidence</code> : рдиреНрдпреВрдирддрдо рдЖрд╡рд╢реНрдпрдХ рдЪреЗрд╣рд░рд╛ рдкрд╣рдЪрд╛рди рд╕рдВрднрд╛рд╡рдирд╛ред </li><li>  <code>steps</code> : рдЕрдВрддрд┐рдо рдПрдиреАрдореЗрд╢рди рдореЗрдВ рдлрд╝реНрд░реЗрдо рдХреА рд╕рдВрдЦреНрдпрд╛ред  рдкреНрд░рддреНрдпреЗрдХ "рд╕реНрдЯреЗрдк" рдзреВрдк рдХреЗ рдЪрд╢реНрдореЗ рдХреЛ рдКрдкрд░реА рд╕реАрдорд╛ рд╕реЗ рдиреАрдЪреЗ рд▓рдХреНрд╖реНрдп (рдпрд╛рдиреА рдЖрдВрдЦреЛрдВ рдХреЗ рд▓рд┐рдП) рддрдХ рд▓реЗ рдЬрд╛рддрд╛ рд╣реИред </li><li>  <code>delay</code> : рд╕реЗрдХрдВрдб рдХреЗ рд╕реМрд╡реЗрдВ рд╣рд┐рд╕реНрд╕реЗ рдореЗрдВ рдлреНрд░реЗрдо рдХреЗ рдмреАрдЪ рджреЗрд░реАред </li><li>  <code>final_delay</code> : рдПрдХ рд╕реЗрдХрдВрдб рдХреЗ рд╕реМрд╡реЗрдВ рд╣рд┐рд╕реНрд╕реЗ рдореЗрдВ рдЕрдВрддрд┐рдо рдлреНрд░реЗрдо рдореЗрдВ рджреЗрд░реА (рдЗрд╕ рд╕рдВрджрд░реНрдн рдореЗрдВ рдЙрдкрдпреЛрдЧреА, рдХреНрдпреЛрдВрдХрд┐ рд╣рдо рдЪрд╛рд╣рддреЗ рд╣реИрдВ рдХрд┐ рдкрд╛рда рдмрд╛рдХреА рдлрд╝реНрд░реЗрдореЛрдВ рдХреА рддреБрд▓рдирд╛ рдореЗрдВ рдЕрдзрд┐рдХ рд╕рдордп рддрдХ рдкреНрд░рджрд░реНрд╢рд┐рдд рд╣реЛ)ред </li><li>  <code>loop</code> : рдПрдХ рд╢реВрдиреНрдп рдорд╛рди рдЗрдВрдЧрд┐рдд рдХрд░рддрд╛ рд╣реИ рдХрд┐ рдЬреАрдЖрдИрдПрдл рд╣рдореЗрд╢рд╛ рдХреЗ рд▓рд┐рдП рджреЛрд╣рд░рд╛рддрд╛ рд╣реИ, рдЕрдиреНрдпрдерд╛ рдПрдиреАрдореЗрд╢рди рдХреЗ рджреЛрд╣рд░рд╛рд╡ рдХреА рд╕рдВрдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рдПрдХ рд╕рдХрд╛рд░рд╛рддреНрдордХ рдкреВрд░реНрдгрд╛рдВрдХ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рдХрд░реЗрдВред </li><li>  <code>temp_dir</code> : рдЕрдВрддрд┐рдо рдЬреАрдЖрдИрдПрдл рдмрдирд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдЕрд╕реНрдерд╛рдпреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдЬрд┐рд╕рдореЗрдВ рдкреНрд░рддреНрдпреЗрдХ рдлрд╝реНрд░реЗрдо рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд┐рдпрд╛ рдЬрд╛рдПрдЧрд╛ред </li></ul><br><h4>  рдореЗрдо, GIF рдФрд░ OpenCV </h4><br>  рд╣рдордиреЗ JSON рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдИ, рдЕрдм рд╣рдо рд╡рд╛рд╕реНрддрд╡рд┐рдХ рдХреЛрдб рдкрд░ рдЪрд▓рддреЗ рд╣реИрдВред <br><br>  рдПрдХ рдирдИ рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ, рдЗрд╕реЗ <code>create_gif.py</code> рдирд╛рдо рджреЗрдВ рдФрд░ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдкреЗрд╕реНрдЯ рдХрд░реЗрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    from imutils import face_utils from imutils import paths import numpy as np import argparse import imutils import shutil import json import dlib import cv2 import sys import os</span></span></code> </pre> <br>  рдпрд╣рд╛рдВ рд╣рдо рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рдЖрдпрд╛рдд рдХрд░рддреЗ рд╣реИрдВред  рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╣рдо imutils, dlib рдФрд░ OpenCV рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред  рдЗрди рдирд┐рд░реНрднрд░рддрд╛рдУрдВ рдХреЛ рд╕реНрдерд╛рдкрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдКрдкрд░ рджрд┐рдП рдЧрдП рдкреВрд░реНрд╡рд╛рдкреЗрдХреНрд╖рд╛рдПрдБ рдФрд░ рдирд┐рд░реНрднрд░рддрд╛ рдЕрдиреБрднрд╛рдЧ рджреЗрдЦреЗрдВред <br><br>  рдЕрдм рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдкреИрдХреЗрдЬ рд╣реИрдВ, рддреЛ <code>overlay_image</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд░рддреЗ рд╣реИрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">overlay_image</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(bg, fg, fgMask, coords)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#     (, )  #    (sH, sW) = fg.shape[:2] (x, y) = coords #          #  ,   , **  # ,    overlay = np.zeros(bg.shape, dtype="uint8") overlay[y:y + sH, x:x + sW] = fg # - , **  ** # ,    ,    # ,       alpha = np.zeros(bg.shape[:2], dtype="uint8") alpha[y:y + sH, x:x + sW] = fgMask alpha = np.dstack([alpha] * 3) #  -   , #   - output = alpha_blend(overlay, bg, alpha) #   return output</span></span></code> </pre> <br>  <code>overlay_image</code> рдлрдВрдХреНрд╢рди, рдмреИрдХрдЧреНрд░рд╛рдЙрдВрдб рдЗрдореЗрдЬ ( <code>bg</code> ) рдХреЗ рдКрдкрд░ <code>fgMask</code> <i>(</i> рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ <i>(x, y)</i> ) рдкрд░ рдПрдХ рдЕрдЧреНрд░рднреВрдорд┐ ( <code>fg</code> ) рд▓рдЧрд╛рддрд╛ рд╣реИ, рдЬреЛ <code>fgMask</code> рдлреЛрд░рдЧреНрд░рд╛рдЙрдВрдб рдорд╛рд╕реНрдХ рдкрд░ рдЕрд▓реНрдлрд╛ рдкрд╛рд░рджрд░реНрд╢рд┐рддрд╛ рдХрд╛ рдПрд╣рд╕рд╛рд╕ <code>fgMask</code> рд╣реИред <br><br>  рдУрдкрдирд╕реАрд╡реА рдХреА рдореВрд▓ рдмрд╛рддреЗрдВ рд╕реЗ рдЦреБрдж рдХреЛ рдкрд░рд┐рдЪрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЬреИрд╕реЗ рдорд╛рд╕реНрдХ рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдЗрд╕ рдЧрд╛рдЗрдб</a> рдХреЛ рдкрдврд╝рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред <br><br>  рд╕рдореНрдорд┐рд╢реНрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреВрд░рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдЕрд▓реНрдлрд╛ рд╕рдореНрдорд┐рд╢реНрд░рдг рдХрд░реЗрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alpha_blend</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(fg, bg, alpha)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#  ,    - #        [0, 1] fg = fg.astype("float") bg = bg.astype("float") alpha = alpha.astype("float") / 255 #  - fg = cv2.multiply(alpha, fg) bg = cv2.multiply(1 - alpha, bg) #     ,    output = cv2.add(fg, bg) #   return output.astype("uint8")</span></span></code> </pre> <br>  рдпрд╣ рдЕрд▓реНрдлрд╛ рдмреНрд▓реЗрдВрдбрд┐рдВрдЧ рдХрд╛рд░реНрдпрд╛рдиреНрд╡рдпрди <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">LearnOpenCV рдмреНрд▓реЙрдЧ рдкрд░</a> рднреА рдЙрдкрд▓рдмреНрдз рд╣реИред <br><br>  рд╕рдВрдХреНрд╖реЗрдк рдореЗрдВ, рд╣рдо рдЕрдЧреНрд░рднреВрдорд┐, рдкреГрд╖реНрдарднреВрдорд┐ рдФрд░ рдЕрд▓реНрдлрд╛ рдЪреИрдирд▓ рдХреЛ рдЕрд╕реНрдерд╛рдпреА рдмрд┐рдВрджреБрдУрдВ рдХреА рд╕реАрдорд╛ рдореЗрдВ рдмрджрд▓ рджреЗрдВрдЧреЗ <i>[0, 1]</i> ред  рдлрд┐рд░ рд╣рдо рдЕрд▓реНрдлрд╛ рд╕рдореНрдорд┐рд╢реНрд░рдг рдХрд░рддреЗ рд╣реИрдВ, рдкрд░рд┐рдгрд╛рдо рдкреНрд░рд╛рдкреНрдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдЧреНрд░рднреВрдорд┐ рдФрд░ рдкреГрд╖реНрдарднреВрдорд┐ рдЬреЛрдбрд╝рддреЗ рд╣реИрдВ рдЬреЛ рд╣рдо рдХреЙрд▓рд┐рдВрдЧ рдлрд╝рдВрдХреНрд╢рди рдкрд░ рд▓реМрдЯрддреЗ рд╣реИрдВред <br><br>  рд╣рдо рдПрдХ рд╕рд╣рд╛рдпрдХ рдлрд╝рдВрдХреНрд╢рди рднреА рдмрдирд╛рдПрдВрдЧреЗ рдЬреЛ ImageMagick рдФрд░ <code>convert</code> рдХрдорд╛рдВрдб рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЫрд╡рд┐ рдкрдереЛрдВ рдХреЗ рд╕реЗрдЯ рд╕реЗ GIF рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрддрд╛ рд╣реИ: <br><br><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create_gif</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(inputPath, outputPath, delay, finalDelay, loop)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment">#        imagePaths = sorted(list(paths.list_images(inputPath))) #      lastPath = imagePaths[-1] imagePaths = imagePaths[:-1] #   imagemagick 'convert'  #  GIF      #   ( ) cmd = "convert -delay {} {} -delay {} {} -loop {} {}".format( delay, " ".join(imagePaths), finalDelay, lastPath, loop, outputPath) os.system(cmd)</span></span></code> </pre> <br>  <code>create_gif</code> рдлрд╝рдВрдХреНрд╢рди рдЫрд╡рд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдлрд╝реНрд░реЗрдо рдФрд░ рдЫреЛрд░реЛрдВ рдХреЗ рдмреАрдЪ рдирд┐рд░реНрджрд┐рд╖реНрдЯ рджреЗрд░реА рдХреЗ рд╕рд╛рде GIF рдПрдирд┐рдореЗрд╢рди рдореЗрдВ рдЗрдХрдЯреНрдард╛ рдХрд░рддрд╛ рд╣реИред  ImageMagick рдпрд╣ рд╕рдм рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░рддрд╛ рд╣реИ - рд╣рдо рдХреЗрд╡рд▓ рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ <code>convert</code> рдХрдорд╛рдВрдб рдХреЛ рдЧрддрд┐рд╢реАрд▓ рд░реВрдк рд╕реЗ рд╡рд┐рднрд┐рдиреНрди рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЙрдкрд▓рдмреНрдз <code>convert</code> рддрд░реНрдХ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП, рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рджреЗрдЦреЗрдВ</a> ред  рд╡рд╣рд╛рдБ рдЖрдк рджреЗрдЦреЗрдВрдЧреЗ рдХрд┐ рдЗрд╕ рдЯреАрдо рдХреЗ рдХрд┐рддрдиреЗ рдХрд╛рд░реНрдп рд╣реИрдВ! <br><br>  рдЗрд╕ рд╕рдорд╛рд░реЛрд╣ рдореЗрдВ рд╡рд┐рд╢реЗрд╖ рд░реВрдк рд╕реЗ, рд╣рдо: <br><br><ul><li>  <code>imagePaths</code> рд▓реЗрдВред </li><li>  рдЕрдВрддрд┐рдо рдЫрд╡рд┐ рдХрд╛ рдкрде рдЪреБрдиреЗрдВ, рдЬрд┐рд╕рдореЗрдВ рдПрдХ рдЕрд▓рдЧ рд╡рд┐рд▓рдВрдм рд╣реЛрдЧрд╛ред </li><li>  рдЕрдВрддрд┐рдо рдкрде рдХреЛ рдмрд╛рд╣рд░ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП <code>imagePaths</code> рдкреБрди: рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВред </li><li>  рд╣рдо рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рддрд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде рдПрдХ рдХрдорд╛рдВрдб рдХреЛ рдЗрдХрдЯреНрдард╛ рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдСрдкрд░реЗрдЯрд┐рдВрдЧ рд╕рд┐рд╕реНрдЯрдо рдХреЛ GIF рдПрдирд┐рдореЗрд╢рди рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП <code>convert</code> рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрджреЗрд╢ рджреЗрддреЗ рд╣реИрдВред </li></ul><br>  рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдЕрдкрдиреА рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рддрд░реНрдХ рдЕрд╕рд╛рдЗрди рдХрд░реЗрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#      ap = argparse.ArgumentParser() ap.add_argument("-c", "--config", required=True, help="path to configuration file") ap.add_argument("-i", "--image", required=True, help="path to input image") ap.add_argument("-o", "--output", required=True, help="path to output GIF") args = vars(ap.parse_args())</span></span></code> </pre> <br>  рд╣рдорд╛рд░реЗ рдкрд╛рд╕ рддреАрди рдХрдорд╛рдВрдб рд▓рд╛рдЗрди рддрд░реНрдХ рд╣реИрдВ рдЬрд┐рдиреНрд╣реЗрдВ рд░рдирдЯрд╛рдЗрдо рдкрд░ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ: <br><br><ul><li>  <code>--config</code> : JSON рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХрд╛ рдкрдеред  рд╣рдордиреЗ рдкрд┐рдЫрд▓реЗ рдЕрдиреБрднрд╛рдЧ рдореЗрдВ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдХреА рд╕рдореАрдХреНрд╖рд╛ рдХреАред </li><li>  <code>--image</code> : рдЗрдирдкреБрдЯ рдЫрд╡рд┐ рдХреЗ рд▓рд┐рдП рдкрде, рдЬрд┐рд╕рдХреЗ рдЦрд┐рд▓рд╛рдл рдПрдиреАрдореЗрд╢рди рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ (рдпрд╛рдиреА рдЪреЗрд╣рд░реЗ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдирд╛, рдзреВрдк рдХрд╛ рдЪрд╢реНрдорд╛ рдЬреЛрдбрд╝рдирд╛, рдФрд░ рдлрд┐рд░ рдкрд╛рда)ред </li><li>  <code>--output</code> : рдкрд░рд┐рдгрд╛рдорд╕реНрд╡рд░реВрдк GIF рдХреЗ рд▓рд┐рдП рдкрдеред </li></ul><br>  рдХрдорд╛рдВрдб рд▓рд╛рдЗрди / рдЯрд░реНрдорд┐рдирд▓ рдкрд░ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдЪрд▓рд╛рддреЗ рд╕рдордп рдЗрдирдореЗрдВ рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рддрд░реНрдХ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реЛрддреА рд╣реИред <br><br>  рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓, рд╕рд╛рде рд╣реА рдЪрд╢реНрдорд╛ рдФрд░ рд╕рдВрдмрдВрдзрд┐рдд рдорд╛рд╕реНрдХ рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    JSON, #     config = json.loads(open(args["config"]).read()) sg = cv2.imread(config["sunglasses"]) sgMask = cv2.imread(config["sunglasses_mask"]) #    (  ),   #  ,  ,     #   GIF- shutil.rmtree(config["temp_dir"], ignore_errors=True) os.makedirs(config["temp_dir"])</span></span></code> </pre> <br>  рдпрд╣рд╛рдВ рд╣рдо рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ (рдЬреЛ рднрд╡рд┐рд╖реНрдп рдореЗрдВ рдкрд╛рдпрдерди рдбрд┐рдХреНрд╢рдирд░реА рдХреЗ рд░реВрдк рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реЛ рд╕рдХрддреА рд╣реИ)ред  рдлрд┐рд░ рдзреВрдк рдХрд╛ рдЪрд╢реНрдорд╛ рдФрд░ рдореБрдЦреМрдЯрд╛ рд▓реЛрдб рдХрд░реЗрдВред <br><br>  рдпрджрд┐ рдкрд┐рдЫрд▓реА рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реЗ рдХреБрдЫ рд░рд╣рддрд╛ рд╣реИ, рддреЛ рдЕрд╕реНрдерд╛рдпреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рд╣рдЯрд╛рдПрдВ, рдФрд░ рдлрд┐рд░ рдЦрд╛рд▓реА рдЕрд╕реНрдерд╛рдпреА рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдХреЛ рдлрд┐рд░ рд╕реЗ рдмрдирд╛рдПрдБред  рдЕрд╕реНрдерд╛рдпреА рдлрд╝реЛрд▓реНрдбрд░ рдореЗрдВ рдЬреАрдЖрдИрдПрдл рдПрдиреАрдореЗрд╢рди рд╕реЗ рдкреНрд░рддреНрдпреЗрдХ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдлреНрд░реЗрдо рд╣реЛрдЧрд╛ред <br><br>  рдЕрдм <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">OpenCV рдбреАрдк рд▓рд░реНрдирд┐рдВрдЧ рдлреЗрд╕ рдбрд┐рдЯреЗрдХреНрдЯрд░</a> рдХреЛ рдореЗрдореЛрд░реА рдореЗрдВ рд▓реЛрдб рдХрд░реЗрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># load our OpenCV face detector and dlib facial landmark predictor print("[INFO] loading models...") detector = cv2.dnn.readNetFromCaffe(config["face_detector_prototxt"], config["face_detector_weights"]) predictor = dlib.shape_predictor(config["landmark_predictor"])</span></span></code> </pre> <br>  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, <code>cv2.dnn.readNetFromCaffe</code> рдХреЙрд▓ рдХрд░реЗрдВред  <code>dnn</code> рдореЙрдбреНрдпреВрд▓ рдХреЗрд╡рд▓ OpenCV 3.3 рдпрд╛ рдмрд╛рдж рдХреЗ рд╕рдВрд╕реНрдХрд░рдг рдореЗрдВ рдЙрдкрд▓рдмреНрдз рд╣реИред  рдПрдХ рдЪреЗрд╣рд░рд╛ рдбрд┐рдЯреЗрдХреНрдЯрд░ рдЫрд╡рд┐ рдореЗрдВ рдЪреЗрд╣рд░реЗ рдХреА рдЙрдкрд╕реНрдерд┐рддрд┐ рдХрд╛ рдкрддрд╛ рд▓рдЧрд╛рдПрдЧрд╛: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a91/d3a/0cd/a91d3a0cde3dcb3cac9799c823e47c8c.jpg"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">7. OpenCV DNN рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдлреЗрд╕ рдбрд┐рдЯреЗрдХреНрдЯрд░ рдСрдкрд░реЗрд╢рди</font></i> <br><br>  рдлрд┐рд░ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">dlib рдлреЗрд╕ рд▓реИрдВрдбрдорд╛рд░реНрдХ рдкреНрд░реЗрдбрд┐рдХреНрдЯрд░</a> рд▓реЛрдб рдХрд░реЗрдВред  рдпрд╣ рдЖрдкрдХреЛ рд╡реНрдпрдХреНрддрд┐рдЧрдд рд╕рдВрд░рдЪрдирд╛рдУрдВ рдХреЛ рд╕реНрдерд╛рдиреАрдп рдмрдирд╛рдиреЗ рдХреА рдЕрдиреБрдорддрд┐ рджреЗрдЧрд╛: рдЖрдБрдЦреЗрдВ, рднреМрдВ, рдирд╛рдХ, рдореБрдВрд╣ рдФрд░ рдареЛрдбрд╝реА рд░реЗрдЦрд╛: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/056/816/890/0568168909b7f01d2f70f6e58faa9ed9.jpg"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">8. dlib рджреНрд╡рд╛рд░рд╛ рдЦреЛрдЬреЗ рдЧрдП рд╕реНрдерд▓ рдореЗрд░реЗ рдЪреЗрд╣рд░реЗ рдкрд░ рдЕрдВрдХрд┐рдд рд╣реИрдВ</font></i> <br><br>  рдмрд╛рдж рдореЗрдВ рдЗрд╕ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдореЗрдВ рд╣рдо рдХреЗрд╡рд▓ рдЖрдВрдЦ рдХреНрд╖реЗрддреНрд░ рдХреЛ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВред <br><br>  рдЪрд▓ рд░рд╣рд╛ рд╣реИ, рдЪрд▓реЛ рдЪреЗрд╣рд░рд╛ рдорд┐рд▓: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       image = cv2.imread(args["image"]) (H, W) = image.shape[:2] blob = cv2.dnn.blobFromImage(cv2.resize(image, (300, 300)), 1.0, (300, 300), (104.0, 177.0, 123.0)) #        print("[INFO] computing object detections...") detector.setInput(blob) detections = detector.forward() #       ,  #  ,      i = np.argmax(detections[0, 0, :, 2]) confidence = detections[0, 0, i, 2] #    if confidence &lt; config["min_confidence"]: print("[INFO] no reliable faces found") sys.exit(0)</span></span></code> </pre> <br>  рдЗрд╕ рдмреНрд▓реЙрдХ рдореЗрдВ рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдХрд░рддреЗ рд╣реИрдВ: <br><br><ul><li>  рдореВрд▓ <code>image</code> рдбрд╛рдЙрдирд▓реЛрдб рдХрд░реЗрдВред </li><li>  рд╣рдо рдПрдХ рддрдВрддреНрд░рд┐рдХрд╛ рдиреЗрдЯрд╡рд░реНрдХ рдХреЗ рдлреЗрд╕ рдбрд┐рдЯреЗрдХреНрдЯрд░ рдХреЛ рднреЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ <code>blob</code> рдХрд╛ рдирд┐рд░реНрдорд╛рдг рдХрд░рддреЗ рд╣реИрдВред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣ рдЖрд▓реЗрдЦ</a> рдмрддрд╛рддрд╛ рд╣реИ рдХрд┐ OpenCV рд╕реЗ <code>blobFromImage</code> рдХреИрд╕реЗ рдХрд╛рдо рдХрд░рддрд╛ рд╣реИред </li><li>  рдЪреЗрд╣рд░рд╛ рдкрд╣рдЪрд╛рдирдиреЗ рдХреА рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХрд░реЗрдВред </li><li>  рд╣рдо рдЙрдЪреНрдЪрддрдо рд╕рдВрднрд╛рд╡рдирд╛ рд╡рд╛рд▓реЗ рд╡реНрдпрдХреНрддрд┐ рдХреЛ рдкрд╛рддреЗ рд╣реИрдВ рдФрд░ рдЗрд╕рдХреА рддреБрд▓рдирд╛ рдиреНрдпреВрдирддрдо рд╕реНрд╡реАрдХрд╛рд░реНрдп рд╕рдВрднрд╛рд╡рдирд╛ рд╕реАрдорд╛ рд╕реЗ рдХрд░рддреЗ рд╣реИрдВред  рдпрджрд┐ рдорд╛рдирджрдВрдб рдкреВрд░рд╛ рдирд╣реАрдВ рд╣реБрдЖ рд╣реИ, рддреЛ рд╕реНрдХреНрд░рд┐рдкреНрдЯ рд╕реЗ рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВред  рдЕрдиреНрдпрдерд╛, рдЬрд╛рд░реА рд░рдЦреЗрдВред </li></ul><br>  рдЕрдм рд╣рдо рдЪреЗрд╣рд░реЗ рдХреЛ рдирд┐рдХрд╛рд▓реЗрдВрдЧреЗ рдФрд░ рд╕реНрдерд▓реЛрдВ рдХреА рдЧрдгрдирд╛ рдХрд░реЗрдВрдЧреЗ: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#   (x, y)  #    box = detections[0, 0, i, 3:7] * np.array([W, H, W, H]) (startX, startY, endX, endY) = box.astype("int") #    dlib    #       rect = dlib.rectangle(int(startX), int(startY), int(endX), int(endY)) shape = predictor(image, rect) shape = face_utils.shape_to_np(shape) #        ,  #     (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS["left_eye"] (rStart, rEnd) = face_utils.FACIAL_LANDMARKS_IDXS["right_eye"] leftEyePts = shape[lStart:lEnd] rightEyePts = shape[rStart:rEnd]</span></span></code> </pre> <br>  рдЪреЗрд╣рд░реЗ рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдФрд░ рдЪреЗрд╣рд░реЗ рдХреЗ рд╕реНрдерд╛рди рдЦреЛрдЬрдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрд╛рд░реНрдп рдХрд░рддреЗ рд╣реИрдВ: <br><br><ul><li>  рд╣рдо рдЪреЗрд╣рд░реЗ рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдмрд╛рдЙрдВрдбрд┐рдВрдЧ рдмреЙрдХреНрд╕ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВред </li><li>  Dlib рдореЗрдВ рдПрдХ <code>rectangle</code> рд╡рд╕реНрддреБ рдмрдирд╛рдПрдБ рдФрд░ рдЪреЗрд╣рд░реЗ рдХрд╛ рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рд▓рд╛рдЧреВ рдХрд░реЗрдВред </li><li>  рд╣рдо рдХреНрд░рдорд╢рдГ <code>leftEyePts</code> рдФрд░ <code>rightEyePts</code> <code>leftEyePts</code> рдХреА <code>leftEyePts</code> <i>x (y,</i> рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ <i>) рдХреЛ</i> рдкреБрдирдГ рдкреНрд░рд╛рдкреНрдд рдХрд░рддреЗ рд╣реИрдВред </li></ul><br>  рдЖрдВрдЦреЛрдВ рдХреЗ рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдХреЛ рджреЗрдЦрддреЗ рд╣реБрдП, рдЖрдк рдЧрдгрдирд╛ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдХрд┐ рдзреВрдк рдХрд╛ рдЪрд╢реНрдорд╛ рдХрд╣рд╛рдВ рдФрд░ рдХреИрд╕реЗ рд▓рдЧрд╛рдПрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#       leftEyeCenter = leftEyePts.mean(axis=0).astype("int") rightEyeCenter = rightEyePts.mean(axis=0).astype("int") #      dY = rightEyeCenter[1] - leftEyeCenter[1] dX = rightEyeCenter[0] - leftEyeCenter[0] angle = np.degrees(np.arctan2(dY, dX)) - 180 #      ,  #      sg = imutils.rotate_bound(sg, angle) #     **  ,    #   тАФ       # 90%       sgW = int((endX - startX) * 0.9) sg = imutils.resize(sg, width=sgW) #      ( ,   #  ),      #     - тАФ   #       , #     sgMask = cv2.cvtColor(sgMask, cv2.COLOR_BGR2GRAY) sgMask = cv2.threshold(sgMask, 0, 255, cv2.THRESH_BINARY)[1] sgMask = imutils.rotate_bound(sgMask, angle) sgMask = imutils.resize(sgMask, width=sgW, inter=cv2.INTER_NEAREST)</span></span></code> </pre> <br>  рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдЖрдВрдЦ рдХреЗ рдХреЗрдВрджреНрд░ рдХреА рдЧрдгрдирд╛ рдХрд░рддреЗ рд╣реИрдВ, рдлрд┐рд░ рд╕реЗрдВрдЯреНрд░реЛрдЗрдбреНрд╕ рдХреЗ рдмреАрдЪ рдХрд╛ рдХреЛрдгред  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдлрд╝реНрд░реЗрдо рдореЗрдВ рдЪреЗрд╣рд░реЗ рдХреЗ</a> рдХреНрд╖реИрддрд┐рдЬ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдВрд░реЗрдЦрдг рдХреЗ</a> рд╕рд╛рде рдПрдХ рд╣реА рдСрдкрд░реЗрд╢рди рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  рдЕрдм рдЖрдк рдЪрд╢реНрдореЗ рдХреЛ рдШреБрдорд╛ рдФрд░ рдЖрдХрд╛рд░ рдмрджрд▓ рд╕рдХрддреЗ рд╣реИрдВред  рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╣рдо <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд░реЛрдЯреЗрдЯ_рдмрд╛рдЙрдВрдб рдлрд╝рдВрдХреНрд╢рди рдХрд╛</a> рдЙрдкрдпреЛрдЧ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдХрд░рддреЗ рд╣реИрдВ</a> , рди рдХрд┐ рдХреЗрд╡рд▓ <code>rotate</code> , рддрд╛рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдУрдкрдирд╕реАрд╡реА рдЙрди</a> рднрд╛рдЧреЛрдВ рдХреЛ рдЯреНрд░рд┐рдо рди рдХрд░реЗрдВ рдЬреЛ рдХрд┐ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдПрдлрд╛рдЗрди</a> рд░реВрдкрд╛рдВрддрд░рдг рдХреЗ рдмрд╛рдж рджрд┐рдЦрд╛рдИ рдирд╣реАрдВ рджреЗрддреЗ рд╣реИрдВред <br><br>  рд╡рд╣реА рдСрдкрд░реЗрд╢рди рдЬреЛ рдЪрд╢реНрдореЗ рдкрд░ рд▓рдЧрд╛рдП рдЧрдП рдереЗ, рдорд╛рд╕реНрдХ рдкрд░ рд▓рд╛рдЧреВ рд╣реЛрддреЗ рд╣реИрдВред  рд▓реЗрдХрд┐рди рдкрд╣рд▓реЗ рдЖрдкрдХреЛ рдЗрд╕реЗ рдЧреНрд░реЗ рдФрд░ рдмрд┐рдирд╛рд░рд╛рдЗрдЬрд╝ рдХреЗ рд░рдВрдЧреЛрдВ рдореЗрдВ рдмрджрд▓рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ, рдХреНрдпреЛрдВрдХрд┐ рдорд╛рд╕реНрдХ рд╣рдореЗрд╢рд╛ рджреНрд╡рд┐рдЖрдзрд╛рд░реА рд╣реЛрддреЗ рд╣реИрдВред  рдлрд┐рд░ рд╣рдо рдЙрд╕реА рддрд░рд╣ рд╕реЗ рдореБрдЦреМрдЯреЗ рдХреЛ рдШреБрдорд╛рддреЗ рдФрд░ рдЖрдХрд╛рд░ рджреЗрддреЗ рд╣реИрдВ рдЬреИрд╕реЗ рд╣рдордиреЗ рдЪрд╢реНрдореЗ рд╕реЗ рдХрд┐рдпрд╛ рдерд╛ред <br><br>  <i><b>рдиреЛрдЯ:</b> рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рдорд╛рд╕реНрдХ рдХрд╛ рдЖрдХрд╛рд░ рдмрджрд▓рддреЗ рд╕рдордп, рд╣рдо рдирд┐рдХрдЯрддрдо рдкрдбрд╝реЛрд╕реА рдмрд┐рдВрджреБрдУрдВ рдХреЗ рд▓рд┐рдП рдкреНрд░рдХреНрд╖реЗрдк рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рдХреНрдпреЛрдВрдХрд┐ рдорд╛рд╕реНрдХ рдореЗрдВ рдХреЗрд╡рд▓ рджреЛ рдорд╛рди (0 рдФрд░ 255) рд╣реЛрдиреЗ рдЪрд╛рд╣рд┐рдПред</i>  <i>рдЕрдиреНрдп рдкреНрд░рдХреНрд╖реЗрдк рд╡рд┐рдзрд┐рдпрд╛рдВ рдЕрдзрд┐рдХ рд╕реМрдВрджрд░реНрдпрд╡рд╛рджреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдорд╛рд╕реНрдХ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреБрдХреНрдд рдирд╣реАрдВ рд╣реИрдВред</i>  <i><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдпрд╣рд╛рдВ</a> рдЖрдк рдирд┐рдХрдЯрддрдо рдкрдбрд╝реЛрд╕реА рдмрд┐рдВрджреБрдУрдВ рдкрд░ рдкреНрд░рдХреНрд╖реЗрдк рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдЕрддрд┐рд░рд┐рдХреНрдд рдЬрд╛рдирдХрд╛рд░реА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред</i> <br><br>  рдХреЛрдб рдХреЗ рд╢реЗрд╖ рддреАрди рдмреНрд▓реЙрдХ GIF рдПрдиреАрдореЗрд╢рди рдХреЗ рд▓рд┐рдП рдлреНрд░реЗрдо рдмрдирд╛рддреЗ рд╣реИрдВ: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment">#    ,   #  N       #    steps = np.linspace(0, rightEyeCenter[1], config["steps"], dtype="int") # start looping over the steps for (i, y) in enumerate(steps): #      #  ,    **    #  ,       #   shiftX = int(sg.shape[1] * 0.25) shiftY = int(sg.shape[0] * 0.35) y = max(0, y - shiftY) # add the sunglasses to the image output = overlay_image(image, sg, sgMask, (rightEyeCenter[0] - shiftX, y))</span></span></code> </pre> <br>  рдЫрд╡рд┐ рдХреЗ рдКрдкрд░ рд╕реЗ рдЪрд╢реНрдорд╛ рдЧрд┐рд░рддрд╛ рд╣реИред  рдкреНрд░рддреНрдпреЗрдХ рдлреНрд░реЗрдо рдкрд░, рдЙрдиреНрд╣реЗрдВ рдЪреЗрд╣рд░реЗ рдХреЗ рдХрд░реАрдм рдкреНрд░рджрд░реНрд╢рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИ рдЬрдм рддрдХ рдХрд┐ рд╡реЗ рдЕрдкрдиреА рдЖрдВрдЦреЛрдВ рдХреЛ рдХрд╡рд░ рдирд╣реАрдВ рдХрд░рддреЗред  JSON рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдореЗрдВ <code>"steps"</code> рдЪрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реБрдП, рд╣рдо рдкреНрд░рддреНрдпреЗрдХ рдлреНрд░реЗрдо рдХреЗ рд▓рд┐рдП y-рдирд┐рд░реНрджреЗрд╢рд╛рдВрдХ рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВред  рдРрд╕рд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП, рдмрд╣реБрдд рдкреНрд░рдпрд╛рд╕ рдХреЗ рдмрд┐рдирд╛, рд╣рдо NumPy рд╕реЗ рд▓рд┐рдВрдЪрд╕реНрдкреЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдмрд╛рдИрдВ рдФрд░ рдКрдкрд░ рдХреА рдУрд░ рдереЛрдбрд╝реА рд╕реА рдмрджрд▓рд╛рд╡ рд╡рд╛рд▓реА рд░реЗрдЦрд╛рдПрдВ рдереЛрдбрд╝реА рдЕрдЬреАрдм рд▓рдЧ рд╕рдХрддреА рд╣реИрдВ, рд▓реЗрдХрд┐рди рдЙрдиреНрд╣реЗрдВ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░рдиреЗ рдХреА рдЖрд╡рд╢реНрдпрдХрддрд╛ рд╣реИ рдХрд┐ рдЪрд╢реНрдорд╛ рдЖрдВрдЦреЛрдВ рдХреЛ рдкреВрд░реА рддрд░рд╣ рд╕реЗ рдХрд╡рд░ рдХрд░реЗрдВ, рдФрд░ рди рдХреЗрд╡рд▓ рдЙрд╕ рдмрд┐рдВрджреБ рдкрд░ рдЬрд╛рдПрдВ рдЬрд╣рд╛рдВ рдЖрдВрдЦ рдХрд╛ рдХреЗрдВрджреНрд░ рд╣реИред  рдореИрдВрдиреЗ рдкреНрд░рддреНрдпреЗрдХ рдЕрдХреНрд╖ рдХреЗ рд╕рд╛рде рдСрдлрд╕реЗрдЯ рдХреА рдЧрдгрдирд╛ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдиреБрднрд╡рдЬрдиреНрдп рд░реВрдк рд╕реЗ рдкреНрд░рддрд┐рд╢рдд рдирд┐рд░реНрдзрд╛рд░рд┐рдд рдХрд┐рдпрд╛ рд╣реИред  рдЕрдЧрд▓реА рдкрдВрдХреНрддрд┐ рдХреЛрдИ рдирдХрд╛рд░рд╛рддреНрдордХ рдорд╛рди рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдирд╣реАрдВ рдХрд░рддреА рд╣реИред <br><br>  <code>overlay_image</code> рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, <code>overlay_image</code> рдЕрдВрддрд┐рдо <code>output</code> рдлрд╝реНрд░реЗрдо рдЙрддреНрдкрдиреНрди рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдЕрдм рдПрдХ рдЕрдиреНрдп рдореБрдЦреМрдЯрд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ "рдЖрдИрдЯреА рдХреЗ рд╕рд╛рде рд╕реМрджрд╛" рдкрд╛рда рд▓рд╛рдЧреВ рдХрд░реЗрдВ: <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#    ,    #  "DEAL WITH IT"   if i == len(steps) - 1: #   "DEAL WITH IT"  , #   dwi = cv2.imread(config["deal_with_it"]) dwiMask = cv2.imread(config["deal_with_it_mask"]) dwiMask = cv2.cvtColor(dwiMask, cv2.COLOR_BGR2GRAY) dwiMask = cv2.threshold(dwiMask, 0, 255, cv2.THRESH_BINARY)[1] #       80%   #  oW = int(W * 0.8) dwi = imutils.resize(dwi, width=oW) dwiMask = imutils.resize(dwiMask, width=oW, inter=cv2.INTER_NEAREST) #  ,   ,  #   oX = int(W * 0.1) oY = int(H * 0.8) output = overlay_image(output, dwi, dwiMask, (oX, oY))</span></span></code> </pre> <br>  рдЕрдВрддрд┐рдо рдЪрд░рдг рдореЗрдВ рд╣рдо рдкрд╛рда рдХреЛ рд▓рд╛рдЧреВ рдХрд░рддреЗ рд╣реИрдВ, рдЬреЛ рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдПрдХ рдФрд░ рдЫрд╡рд┐ рд╣реИред <br><br>  рдореИрдВрдиреЗ рдПрдХ рдЫрд╡рд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХрд╛ рдирд┐рд░реНрдгрдп рд▓рд┐рдпрд╛ рдХреНрдпреЛрдВрдХрд┐ OpenCV рдлреЛрдВрдЯ рдХреА рдкреНрд░рддрд┐рдкрд╛рджрди рдХреНрд╖рдорддрд╛рдПрдВ рдХрд╛рдлреА рд╕реАрдорд┐рдд рд╣реИрдВред  рдЗрд╕рдХреЗ рдЕрд▓рд╛рд╡рд╛, рдореИрдВ рдкрд╛рда рдХреЗ рдЪрд╛рд░реЛрдВ рдУрд░ рдПрдХ рдЫрд╛рдпрд╛ рдФрд░ рдПрдХ рд╕реАрдорд╛ рдЬреЛрдбрд╝рдирд╛ рдЪрд╛рд╣рддрд╛ рдерд╛, рдЬреЛ рдлрд┐рд░ рд╕реЗ OpenCV рдирд╣реАрдВ рдЬрд╛рдирддрд╛ рдХрд┐ рдХреИрд╕реЗред <br><br>  рдЗрд╕ рдХреЛрдб рдХреЗ рдмрд╛рдХреА рд╣рд┐рд╕реНрд╕реЛрдВ рдореЗрдВ, рд╣рдо рдЫрд╡рд┐ рдФрд░ рдореБрдЦреМрдЯрд╛ рджреЛрдиреЛрдВ рдХреЛ рд▓реЛрдб рдХрд░рддреЗ рд╣реИрдВ, рдФрд░ рдлрд┐рд░ рдЕрдВрддрд┐рдо рдкрд░рд┐рдгрд╛рдо рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрд▓реНрдлрд╛ рд╕рдореНрдорд┐рд╢реНрд░рдг рдХрд░рддреЗ рд╣реИрдВред <br><br>  рдпрд╣ рдЬреАрдЖрдИрдПрдл-рдПрдиреАрдореЗрд╢рди рдХреЗ рдмрд╛рдж рдХреЗ рдирд┐рд░реНрдорд╛рдг рдХреЗ рд╕рд╛рде рдкреНрд░рддреНрдпреЗрдХ рдлреНрд░реЗрдо рдХреЛ рдбрд┐рд╕реНрдХ рдореЗрдВ рд╕рд╣реЗрдЬрдиреЗ рдХреЗ рд▓рд┐рдП рд╣реА рд░рд╣рддрд╛ рд╣реИ: <br><br><pre> <code class="python hljs"> <span class="hljs-comment"><span class="hljs-comment">#      p = os.path.sep.join([config["temp_dir"], "{}.jpg".format( str(i).zfill(8))]) cv2.imwrite(p, output) #      ,     #   GIF- print("[INFO] creating GIF...") create_gif(config["temp_dir"], args["output"], config["delay"], config["final_delay"], config["loop"]) #  --    print("[INFO] cleaning up...") shutil.rmtree(config["temp_dir"], ignore_errors=True)</span></span></code> </pre> <br>  рд╣рдо рдбрд┐рд╕реНрдХ рдкрд░ рдкрд░рд┐рдгрд╛рдо рд▓рд┐рдЦрддреЗ рд╣реИрдВред  рд╕рднреА рдлрд╝реНрд░реЗрдореЛрдВ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж, рд╣рдо GIF рдПрдиреАрдореЗрд╢рди рдлрд╝рд╛рдЗрд▓ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП <code>create_gif</code> рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдХреЙрд▓ рдХрд░рддреЗ рд╣реИрдВред  рдпрд╛рдж рд░рдЦреЗрдВ рдХрд┐ рдпрд╣ рдПрдХ рд╢реЗрд▓ рд╣реИ рдЬреЛ рдЗрдореЗрдЬрдореИрдЬрд┐рдХ <code>convert</code> рдХрдорд╛рдВрдб-рд▓рд╛рдЗрди рдЯреВрд▓ рдХреЗ рдорд╛рдкрджрдВрдбреЛрдВ рдХреЛ рдкрд╛рд░ рдХрд░рддрд╛ рд╣реИред <br><br>  рдЕрдВрдд рдореЗрдВ, рдЕрд╕реНрдерд╛рдпреА рдЖрдЙрдЯрдкреБрдЯ рдирд┐рд░реНрджреЗрд╢рд┐рдХрд╛ рдФрд░ рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЫрд╡рд┐ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЛ рд╣рдЯрд╛ рджреЗрдВред <br><br><h2>  рдкрд░рд┐рдгрд╛рдо </h2><br>  рдЕрдм рдордЬрд╝реЗрджрд╛рд░ рд╣рд┐рд╕реНрд╕рд╛: рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рд╣рдорд╛рд░реЗ рдореЗрдо рдЬрдирд░реЗрдЯрд░ рдиреЗ рдХреНрдпрд╛ рдмрдирд╛рдпрд╛ рд╣реИ! <br><br>  рд╕реНрд░реЛрдд рдХреЛрдб, рдирдореВрдирд╛ рдЪрд┐рддреНрд░ рдФрд░ рдЧрд╣рди рд╢рд┐рдХреНрд╖рдг рдореЙрдбрд▓ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рдирд╛</a> рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред  рдлрд┐рд░ рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдирд┐рдореНрди рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/dca/b24/46e/dcab2446ec5dc96065e37a473375eea6.gif"><br>  <i><font color="gray">рдЪрд┐рддреНрд░ 9. рдЗрд╕ рдкрд╛рдпрдерди рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЗ рд╕рд╛рде OpenCV рдФрд░ ImageMagick рдХреЗ рд╕рд╛рде рдЙрддреНрдкрдиреНрди GIF рдПрдиреАрдореЗрд╢рди</font></i> <br><br>  рдпрд╣рд╛рдВ рдЖрдк OpenCV рдФрд░ ImageMagick рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдмрдирд╛рдП рдЧрдП рдЬреАрдЖрдИрдПрдл рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред  рдЗрд╕ рдкрд░ рдирд┐рдореНрди рдХреНрд░рд┐рдпрд╛рдПрдВ рдХреА рдЬрд╛рддреА рд╣реИрдВ: <br><br><ol><li>  рдореЗрд░реЗ рдЪреЗрд╣рд░реЗ рдХреА рд╕рд╣реА рдкрд╣рдЪрд╛рдиред </li><li>  рдЖрдВрдЦреЛрдВ рдХрд╛ рд╕реНрдерд╛рдиреАрдпрдХрд░рдг рдФрд░ рдЙрдирдХреЗ рдХреЗрдВрджреНрд░реЛрдВ рдХреА рдЧрдгрдирд╛ред </li><li>  рдЪреЗрд╣рд░реЗ рдкрд░ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рдЪрд╢реНрдорд╛ рдкрдбрд╝ рдЬрд╛рддрд╛ рд╣реИред </li></ol><br>  рдореЗрд░реЗ рдмреНрд▓реЙрдЧ рдХреЗ рдкрд╛рдардХреЛрдВ рдХреЛ рдкрддрд╛ рд╣реИ рдХрд┐ рдореИрдВ рдЬреБрд░рд╛рд╕рд┐рдХ рдкрд╛рд░реНрдХ рдореЗрдВ рдПрдХ рдмрдбрд╝рд╛ рдмреЗрд╡рдХреВрдл рд╣реВрдВ рдФрд░ рдЕрдХреНрд╕рд░ рдЗрд╕рдХрд╛ рдЙрд▓реНрд▓реЗрдЦ рдореЗрд░реА рдкреБрд╕реНрддрдХреЛрдВ, рдкрд╛рдареНрдпрдХреНрд░рдореЛрдВ рдФрд░ рдЕрдзреНрдпрдпрди рдЧрд╛рдЗрдбреЛрдВ рдореЗрдВ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред <br><br>  <i>рдЬреБрд░рд╛рд╕рд┐рдХ рдкрд╛рд░реНрдХ</i> рдкрд╕рдВрдж рдирд╣реАрдВ рд╣реИ? <br><br>  рдареАрдХ рд╣реИ, рдпрд╣рд╛рдБ рдореЗрд░рд╛ рдЬрд╡рд╛рдм рд╣реИ: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian_jp.jpg \ --output adrian_jp_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/da9/0d7/740/da90d7740e8ac813b9f99a727b9e04bc.gif"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">10. OpenCV GIF рдПрдиреАрдореЗрд╢рди, рдЬреБрд░рд╛рд╕рд┐рдХ рд╡рд░реНрд▓реНрдб 2 рдХреА рд╣рд╛рд▓рд┐рдпрд╛ рд╕реНрдХреНрд░реАрдирд┐рдВрдЧ рдХреА рддрд╕реНрд╡реАрд░ рдкрд░ рдЖрдзрд╛рд░рд┐рдд рд╣реИ</font></i> <br><br>  рдпрд╣рд╛рдВ рдореИрдВ рдПрдХ рд╡рд┐рд╖рдпрдЧрдд рдЯреА-рд╢рд░реНрдЯ рдореЗрдВ "рдЬреБрд░рд╛рд╕рд┐рдХ рд╡рд░реНрд▓реНрдб: 2" рд╢реЛ рдореЗрдВ рдПрдХ рдЧрд┐рд▓рд╛рд╕ рдкреНрд░рдХрд╛рд╢ рдФрд░ рдПрдХ рд╕рдВрдЧреНрд░рд╣ рдкреБрд╕реНрддрдХ рдХреЗ рд╕рд╛рде рд╣реВрдВред <br><br>  рдордЬреЗрджрд╛рд░ рдХрд╣рд╛рдиреА: <br><br>  рдкрд╛рдВрдЪ рдпрд╛ рдЫрд╣ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдореЗрд░реА рдкрддреНрдиреА рдФрд░ рдореИрдВрдиреЗ рдбрд┐рдЬреНрдиреА рд╡рд░реНрд▓реНрдб, рдлреНрд▓реЛрд░рд┐рдбрд╛ рдореЗрдВ рдПрдкрдХреЛрдЯ рд╕реЗрдВрдЯрд░ рдереАрдо рдкрд╛рд░реНрдХ рдХрд╛ рджреМрд░рд╛ рдХрд┐рдпрд╛ред <br><br>  рд╣рдо рдХрдиреЗрдХреНрдЯрд┐рдХрдЯ рдореЗрдВ рдХрдареЛрд░ рд╕рд░реНрджрд┐рдпреЛрдВ рд╕реЗ рджреВрд░ рдЬрд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдпрд╛рддреНрд░рд╛ рд▓реЗрдиреЗ рдХрд╛ рдлреИрд╕рд▓рд╛ рдХрд┐рдпрд╛, рдФрд░ рд╕рдЦреНрдд рдзреВрдк рдХреА рдЬрд░реВрд░рдд рдереАред <br><br>  рджреБрд░реНрднрд╛рдЧреНрдп рд╕реЗ, рдлреНрд▓реЛрд░рд┐рдбрд╛ рдореЗрдВ рд╣рд░ рд╕рдордп рдмрд╛рд░рд┐рд╢ рд╣реБрдИ, рдФрд░ рддрд╛рдкрдорд╛рди рдореБрд╢реНрдХрд┐рд▓ рд╕реЗ 10 рдбрд┐рдЧреНрд░реА рд╕реЗрд▓реНрд╕рд┐рдпрд╕ рд╕реЗ рдЕрдзрд┐рдХ рд╣реЛ рдЧрдпрд╛ред <br><br>  рдХреИрдиреЗрдбрд┐рдпрди рдЧрд╛рд░реНрдбрди рдХреЗ рдкрд╛рд╕, рддреГрд╖рд╛ рдиреЗ рдореЗрд░реА рдПрдХ рддрд╕реНрд╡реАрд░ рд▓реА: рд╡рд╣ рдХрд╣рддреА рд╣реИ рдХрд┐ рдореИрдВ рдПрдХ рдЪрдордбрд╝реА рдХреА рддрд░рд╣ рджрд┐рдЦрддреА рд╣реВрдБ рдЬрд┐рд╕рдореЗрдВ рдкреАрдЫреЗ рдХреА рдУрд░ рд╣рд░реЗ-рднрд░реЗ рдмрдЧреАрдЪреЗ, рдХрд╛рд▓реЗ рдХрдкрдбрд╝реЗ рдФрд░ рдПрдХ рд╣реБрдб, рд╣рд░реЗ-рднрд░реЗ рдмрдЧреАрдЪреЛрдВ рдХреА рдкреГрд╖реНрдарднреВрдорд┐ рдХреЗ рдЦрд┐рд▓рд╛рдл рд╣реИ: <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/vampire.jpg \ --output vampire_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/ad1/1ce/ca2/ad11ceca2ed48792a5aa28c0c8dc7f40.gif"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i>  <i><font color="gray">11. OpenCV рдФрд░ рдкрд╛рдпрдерди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ, рдЖрдк рдЗрд╕ рдореЗрдо рдпрд╛ рдПрдХ рдФрд░ рдПрдирд┐рдореЗрдЯреЗрдб GIF рдмрдирд╛ рд╕рдХрддреЗ рд╣реИрдВ</font></i> <br><br>  рдЙрд╕реА рд╢рд╛рдо, рддреНрд░рд┐рд╢рд╛ рдиреЗ рд╕реЛрд╢рд▓ рдиреЗрдЯрд╡рд░реНрдХ рдкрд░ рдПрдХ рддрд╕реНрд╡реАрд░ рдкреНрд░рдХрд╛рд╢рд┐рдд рдХреА - рдореБрдЭреЗ рдЗрд╕рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░рдирд╛ рдерд╛ред <br><br>  рдЖрдк рдореЗрдВ рд╕реЗ рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ PyImageConf 2018 рдореЗрдВ рднрд╛рдЧ рд▓рд┐рдпрд╛ ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u=">рд╕рдореАрдХреНрд╖рд╛ рдкрдврд╝реЗрдВ</a> ) рдЬрд╛рдирддреЗ рд╣реИрдВ рдХрд┐ рдореИрдВ рд╣рдореЗрд╢рд╛ рдЪреБрдЯрдХреБрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдЦреБрд▓рд╛ рд╣реВрдВред  рдпрд╣рд╛рдБ рдПрдХ рдЙрджрд╛рд╣рд░рдг рд╣реИ: <br><br>  <i>рдкреНрд░рд╢реНрди: рдореБрд░реНрдЧрд╛ рд╕рдбрд╝рдХ рдкрд╛рд░ рдХреНрдпреЛрдВ рдХрд░рддрд╛ рд╣реИ?</i> <br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/rooster.jpg \ --output rooster_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/5dd/e92/ef0/5dde92ef04cb35436e87b0b70cc5926d.gif"><br>  <i><font color="gray">рдЕрдВрдЬреАрд░ред</font></i> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12. рдЪреЗрд╣рд░рд╛ рдХрдо рд╡рд┐рдкрд░реАрдд рдХреЗ рд╕рд╛рде рднреА рдкрд╣рдЪрд╛рдирд╛ рдЬрд╛рддрд╛ рд╣реИ, рдФрд░ OpenCV рдлреЛрдЯреЛ рдХреЛ рд╕рд╣реА рдврдВрдЧ рд╕реЗ рд╕рдВрд╕рд╛рдзрд┐рдд рдХрд░рддрд╛ рд╣реИ рдФрд░ рдзреВрдк рдХрд╛ рдЪрд╢реНрдорд╛ рдХрдо рдХрд░рддрд╛ рд╣реИ</font></font></font></i> <br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЙрддреНрддрд░: рдореИрдВ рдЗрд╕ рдЬрд╡рд╛рдм рдХреЛ рдирд╣реАрдВ рдХрд╣реВрдВрдЧрд╛ - рдЗрд╕рдХреЗ рд╕рд╛рде рд░рдЦреЛред </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рдореЗрдВ, рд╣рдо рдПрдХ рдЕрдЪреНрдЫреЗ рдореЗрдо рдХреЗ рд╕рд╛рде рдЖрдЬ рдХреЗ рдЧрд╛рдЗрдб рдХрд╛ рдирд┐рд╖реНрдХрд░реНрд╖ рдирд┐рдХрд╛рд▓рддреЗ рд╣реИрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд▓рдЧрднрдЧ рдЫрд╣ рд╕рд╛рд▓ рдкрд╣рд▓реЗ, рдореЗрд░реЗ рдкрд┐рддрд╛ рдФрд░ рдореИрдВрдиреЗ рдПрдХ рдЫреЛрдЯреЗ рд╕реЗ рдмреАрдЧрд▓, рдЬреЗрдореНрдорд╛ рдХреЛ рдЕрдкрдирд╛рдпрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрд╣рд╛рдБ рдЖрдк рдореЗрд░реЗ рдХрдВрдзреЗ рдкрд░ рдЧреЗрдорд╛ рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВ:</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/pupper.jpg \ --output pupper_out.gif [INFO] loading models... [INFO] computing object detections... [INFO] creating GIF... [INFO] cleaning up...</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/08a/b5a/728/08ab5a728e8bd48ac2550a2962e76165.gif"><br> <i><font color="gray"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдЬреАрд░ред </font><font style="vertical-align: inherit;">13. рдЧреЗрдорд╛ рд╕реНрд╡рд╛рджрд┐рд╖реНрдЯ рд╣реИред </font><font style="vertical-align: inherit;">рдХреНрдпрд╛ рдЖрдкрдХреЛ рдРрд╕рд╛ рдирд╣реАрдВ рд▓рдЧрддрд╛? </font><font style="vertical-align: inherit;">рдлрд┐рд░ "рдЗрд╕рдХреЗ рд╕рд╛рде рд╢рд░реНрддреЛрдВ рдкрд░ рдЖрдПрдВ!" </font></font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рд╕рд╣рдордд рдирд╣реАрдВ рд╣реИ рдХрд┐ рд╡рд╣ рдкреНрдпрд╛рд░рд╛ рд╣реИ? </font><font style="vertical-align: inherit;">рдЗрд╕рд╕реЗ рдирд┐рдкрдЯреЛред</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдПрдХ рдЧреБрдг рддреНрд░реБрдЯрд┐ рд╣реИ? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЪрд┐рдВрддрд╛ рдордд рдХрд░реЛ! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдпрджрд┐ рдЖрдкрдиреЗ рдпрд╣ рддреНрд░реБрдЯрд┐ рджреЗрдЦреА рд╣реИ:</font></font><br><br><pre> <code class="bash hljs">$ python create_gif.py --config config.json --image images/adrian.jpg \ --output adrian_out.gif ... Traceback (most recent call last): File <span class="hljs-string"><span class="hljs-string">"create_gif.py"</span></span>, line 142, <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> &lt;module&gt; (lStart, lEnd) = face_utils.FACIAL_LANDMARKS_IDXS[<span class="hljs-string"><span class="hljs-string">"left_eye"</span></span>] AttributeError: module <span class="hljs-string"><span class="hljs-string">'imutils.face_utils'</span></span> has no attribute <span class="hljs-string"><span class="hljs-string">'FACIAL_LANDMARKS_IDXS'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ... рддреЛ рдЖрдкрдХреЛ рдмрд╕ imutils рдкреИрдХреЗрдЬ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░рдирд╛ рд╣реЛрдЧрд╛: </font></font><br><br><pre> <code class="bash hljs">$ pip install --upgrade imutils Collecting imutils ... Successfully installed imutils-0.5.1</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдХреНрдпреЛрдВ? </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдбрд┐рдлрд╝реЙрд▓реНрдЯ рд░реВрдк рд╕реЗ, рдпрд╣ </font></font><code>imutils.face_utils</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dlib (рдЗрд╕ рдЖрд▓реЗрдЦ рдореЗрдВ) рдХреЗ рд░реВрдк рдореЗрдВ рдирд┐рд░реНрдорд┐рдд 68-рдмрд┐рдВрджреБ рд▓реИрдВрдбрдорд╛рд░реНрдХ рдбрд┐рдЯреЗрдХреНрдЯрд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддрд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдирд╣реАрдВ рд╣реИ </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=hi&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдПрдХ рддреНрд╡рд░рд┐рдд 5 рдЕрдВрдХреЛрдВ рдбрд┐рдЯреЗрдХреНрдЯрд░</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , рдЬреЛ рдЕрдм рднреА imutils рдХреЗ рд╕рд╛рде рдХрд╛рдо рдХрд░ рд░рд╣рд╛ рд╣реИред </font><font style="vertical-align: inherit;">рдореИрдВрдиреЗ рд╣рд╛рд▓ рд╣реА рдореЗрдВ рджреЛрдиреЛрдВ рдбрд┐рдЯреЗрдХреНрдЯрд░реЛрдВ рдХрд╛ рд╕рдорд░реНрдерди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП imutils рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рд╣реИ (рддрд╛рдХрд┐ рдЖрдкрдХреЛ рдПрдХ рддреНрд░реБрдЯрд┐ рджрд┐рдЦрд╛рдИ рджреЗ)ред</font></font><br><br><h1>  рд╕рд╛рд░рд╛рдВрд╢ </h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЖрдЬ рдХреЗ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдореЗрдВ, рдЖрдкрдиреЗ OpenCV рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ GIF рдмрдирд╛рдирд╛ рд╕реАрдЦрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдкрд╛рда рдХреЛ рдордЬреЗрджрд╛рд░ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдордиреЗ рдПрдХ рд▓реЛрдХрдкреНрд░рд┐рдп рдореЗрдо (рдФрд░ рдореЗрд░рд╛ рдкрд╕рдВрджреАрджрд╛) GIF рдПрдиреАрдореЗрд╢рди "рдбреАрд▓ рд╡рд┐рде рдЗрдЯ" рдЙрддреНрдкрдиреНрди рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП OpenCV рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛, рдЬреЛ рд▓рдЧрднрдЧ рд╣рд░ рд╕реЛрд╢рд▓ рдиреЗрдЯрд╡рд░реНрдХрд┐рдВрдЧ рд╕рд╛рдЗрдЯ рдкрд░ рдПрдХ рдпрд╛ рдХрд┐рд╕реА рдЕрдиреНрдп рд░реВрдк рдореЗрдВ рдкрд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЗрд╕ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдореЗрдВ, рд╣рдордиреЗ рдХрдИ рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рд╕рдорд╕реНрдпрд╛рдУрдВ рдХреЛ рд╣рд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрдВрдкреНрдпреВрдЯрд░ рд╡рд┐рдЬрд╝рди рдФрд░ рдЧрд╣рд░реА рд╢рд┐рдХреНрд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рд╡реНрдпрдХреНрддрд┐рдпреЛрдВ рдХреА рдкрд╣рдЪрд╛рди </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЪреЗрд╣рд░реЗ рдкрд░ рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЪреЗрд╣рд░реЗ рдХреЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдХреА рдкрд╣рдЪрд╛рди (рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рдЖрдВрдЦ) </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЪреЗрд╣рд░реЗ рдХреЛ рд╕рдВрд░реЗрдЦрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдВрдЦреЛрдВ рдХреЗ рдмреАрдЪ рдХреЗ рдХреЛрдг рдХреА рдЧрдгрдирд╛ </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> рдЕрд▓реНрдлрд╛ рд╕рдореНрдорд┐рд╢реНрд░рдг рдХреЗ рд╕рд╛рде рдкрд╛рд░рджрд░реНрд╢реА рдорд┐рд╢реНрд░рдг рдмрдирд╛рдПрдВ </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдВрдд рдореЗрдВ, рд╣рдордиреЗ рдЙрддреНрдкрдиреНрди рдЫрд╡рд┐рдпреЛрдВ рдХрд╛ рдПрдХ рд╕реЗрдЯ рд▓рд┐рдпрд╛ рдФрд░ OpenCV рдФрд░ ImageMagick рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдПрдХ рдПрдирд┐рдореЗрдЯреЗрдб GIF рдмрдирд╛рдпрд╛ред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдореБрдЭреЗ рдЖрд╢рд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЛ рдЖрдЬ рдХрд╛ рдЯреНрдпреВрдЯреЛрд░рд┐рдпрд▓ рдЕрдЪреНрдЫрд╛ рд▓рдЧрд╛ рд╣реЛрдЧрд╛! </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдЕрдЧрд░ рдЖрдкрдХреЛ рдпрд╣ рдкрд╕рдВрдж рдЖрдпрд╛, рддреЛ рдХреГрдкрдпрд╛ рдПрдХ рдЯрд┐рдкреНрдкрдгреА рдЫреЛрдбрд╝реЗрдВ рдФрд░ рдореБрдЭреЗ рдмрддрд╛рдПрдВред </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">рдареАрдХ рд╣реИ, рдЕрдЧрд░ рдЖрдк рдЗрд╕реЗ рдкрд╕рдВрдж рдирд╣реАрдВ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдпрд╣ рдХреЛрдИ рдмрд╛рдд рдирд╣реАрдВ рд╣реИ, рдмрд╕ рдЗрд╕рдХреЗ рд╕рд╛рде рд░рдЦреЛред</font></font> ;) </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/hi429024/">https://habr.com/ru/post/hi429024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../hi429014/index.html">рд╡рд┐рд╕реНрддрд╛рд░ рд╕реЗ рдЧреИрдЯ рд╕рдмрдЯреНрд░реА</a></li>
<li><a href="../hi429016/index.html">рд╡реЛрд▓реНрд╡реЛ рдФрд░ Baidu рдПрдХ рд╕рд╛рде рдорд╛рдирд╡ рд░рд╣рд┐рдд рд╡рд╛рд╣рди рд╡рд┐рдХрд╕рд┐рдд рдХрд░реЗрдВрдЧреЗ</a></li>
<li><a href="../hi429018/index.html">рдирдпрд╛ Gmail рдбрд┐рдЬрд╝рд╛рдЗрди рдЗрддрдирд╛ рдзреАрдорд╛ рдХреНрдпреЛрдВ рд╣реИ?</a></li>
<li><a href="../hi429020/index.html">рдПрдХ рдзрд╛рд░рд╛рдкреНрд░рд╡рд╛рд╣ рд╕реЗрдЯрд░ рдХреНрдпрд╛ рд╣реИ</a></li>
<li><a href="../hi429022/index.html">рд╣рд╛рдИрд▓реЛрдб рдкрд░ рдЧреНрд░рд┐рдбрдЧреИрди: рдЬрд╣рд╛рдВ рд╡рд┐рддрд░рд┐рдд рдбреАрдмреАрдПрдордПрд╕, рдЗрди-рдореЗрдореЛрд░реА рдФрд░ рдУрдкрди рд╕реЛрд░реНрд╕ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдмрд╛рдд рдХрд░рдиреА рд╣реИ</a></li>
<li><a href="../hi429028/index.html">рдХреЛрд░реЛрд▓реЗрд╡ред рд╡реЗрдм рдХреЗ рд▓рд┐рдП рджрд╡рд╛</a></li>
<li><a href="../hi429030/index.html">Logomachine рдкреНрд░рддрд┐ рдЯрд┐рдкреНрдкрдгреА рдирд┐: рд╢реБрд▓реНрдХ рд▓реЛрдЧреЛ рдмрдирд╛рддрд╛ рд╣реИ</a></li>
<li><a href="../hi429032/index.html">рд╕реНрдкреНрд▓рдВрдХ рдлрд╛рдЗрдиреЗрдВрд╢рд┐рдпрд▓ рд╕рд░реНрд╡рд┐рд╕реЗрдЬ рдЗрдВрдбрд╕реНрдЯреНрд░реА рдРрдк рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╣реИ, рдпрд╛ рд╕реНрдкреНрд▓рдВрдХ рдлрд╛рдЗрдиреЗрдВрд╕ рдПрдирд╛рд▓рд┐рдЯрд┐рдХреНрд╕ рдмрд╛рдЬрд╛рд░ рдореЗрдВ рдХреИрд╕реЗ рдкреНрд░рд╡реЗрд╢ рдХрд░рддрд╛ рд╣реИ</a></li>
<li><a href="../hi429034/index.html">рднреВрдорд┐рдЧрдд рдкреНрд░реЛрдЧреНрд░рд╛рдорд░ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдХреБрдЫ рдХрд╣рд╛рдирд┐рдпрд╛рдБ</a></li>
<li><a href="../hi429036/index.html">рдЯреНрд░рд╕реНрдЯ рдореА, рдореБрдЭреЗ рдкрддрд╛ рд╣реИ рдХрд┐ рдореИрдВ рдХреНрдпрд╛ рдХрд░ рд░рд╣рд╛ рд╣реВрдВ: рдХрд╛рд░реНрдп рдирд┐рд╖реНрдкрд╛рджрди рд╡рд╛рддрд╛рд╡рд░рдг рдореЗрдВ рдПрдХ рдореЙрдбреНрдпреВрд▓рд░ рд░реЛрдмреЛрдЯ рдХрд╛ рдЖрддреНрдо-рдЕрдиреБрдХреВрд▓рди</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>