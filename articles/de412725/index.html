<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü•° üë©üèæ‚Äçüíª üëö So machen Sie Ihre IT-Infrastruktur langweilig üåµ ü§ôüèΩ üßúüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Michael DeHaan ist der Mann, der Ansible erschaffen hat. Viele der Dinge, die Systemadministratoren, Release- und DevOps-Ingenieure regelm√§√üig tun, si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>So machen Sie Ihre IT-Infrastruktur langweilig</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/redhatrussia/blog/412725/">  Michael DeHaan ist der Mann, der Ansible erschaffen hat.  Viele der Dinge, die Systemadministratoren, Release- und DevOps-Ingenieure regelm√§√üig tun, sind, gelinde gesagt, uninteressant.  DeHaan m√∂chte, dass diese Personen ihre Zeit f√ºr interessantere Dinge (bei der Arbeit oder vor der B√ºrot√ºr) freigeben und einen Produktcode schreiben, der Administratorzeit spart. <br>  Mehr Zeit, weniger Adrenalin w√§hrend der Gesch√§ftszeiten, weniger Skripte und weniger Fehler. <br>  √úbrigens k√∂nnen Sie diesen Absatz zu Ende lesen, indem Sie sich stattdessen am 6. Juni <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">hier</a> mit Livestream verbinden. <br><br><img src="https://habrastorage.org/webt/4p/xi/b6/4pxib6asllealgf8sje7orcjsbg.png" width="100%"><br><a name="habracut"></a><br>  Wenn Sie noch weiter gelesen haben ... <br><br><h3>  Ansible: Kontinuierliche Integration und Lieferung </h3><br>  Ansible ist eine leistungsstarke Open Source-Automatisierungssprache.  Ja, es eignet sich nicht nur hervorragend f√ºr das Management, sondern auch f√ºr die Bereitstellung und Orchestrierung von IT-Systemen.  Ansible wurde urspr√ºnglich entwickelt, um eine Vielzahl von Automatisierungsaufgaben effektiv zu l√∂sen und als einfache universelle Grundlage f√ºr den Ersatz herk√∂mmlicher Steuerungen. Letztendlich erwies es sich jedoch in vielen Bereichen als sehr n√ºtzlich.  Zum Beispiel bei gleichzeitiger Sicherstellung von Ausfallzeiten w√§hrend der kontinuierlichen Integration und Anwendungsbereitstellung (CI / CD).  Normalerweise wird dieses Problem durch die umfassende Verfeinerung der Software, die Verwendung verschiedener Softwarepakete und viele Tricks gel√∂st, die f√ºr jede spezifische Konfiguration einzigartig sind.  Ansible wurde urspr√ºnglich speziell f√ºr solche Orchestrierungsszenarien entwickelt und bietet eine schl√ºsselfertige L√∂sung "alles in einem". <br><br><h3>  Kontinuierliche Integration und Anwendungsbereitstellung (CI / CD) </h3><br>  Einige gemeinsame Wahrheiten.  Die Praxis der Entwicklung von Softwaresystemen in den letzten 10 Jahren zeigt, dass der lange Lebenszyklus von Softwareversionen (kaskadierendes Entwicklungsmodell) im Vergleich zu einem kurzen Zyklus (der sogenannten "iterativen" oder agilen Entwicklung) einen viel h√∂heren Overhead aufweist.  Es geht nur um Arrhythmie: Wenn Programmierer gerade erst anfangen, an einer neuen Version zu arbeiten, haben die IT-Mitarbeiter, die f√ºr das Testen und die Bereitstellung verantwortlich sind, einfach nichts zu tun.  Aber je n√§her die Version an der Version liegt, desto mehr IT-Experten sind besch√§ftigt und desto h√§ufiger m√ºssen Programmierer den Kontext wechseln, abwechselnd an Fehlern arbeiten und die n√§chste Version planen. <br><br><img src="https://habrastorage.org/webt/qv/sl/b1/qvslb1fsnltkxftsz2hxtgebghg.png" align="right">  Dar√ºber hinaus verl√§ngert ein langer Zyklus das Intervall zwischen der Identifizierung und Beseitigung von Softwarefehlern und -m√§ngeln, was insbesondere f√ºr gro√üe Websysteme mit einem Benutzerpublikum von mehreren Millionen Dollar von entscheidender Bedeutung ist.  Daher setzt die Softwareindustrie unter dem Motto ‚Äûschneller und h√§ufiger ver√∂ffentlichen‚Äú schnell agile Methoden ein, damit die Teilnehmer am Entwicklungsprozess ihren Arbeitskontext seltener wechseln und Verbesserungen und Innovationen viel schneller erstellen, debuggen und implementieren k√∂nnen. <br><br>  Die Automatisierung der Qualit√§tskontrolle, die TDD-Entwicklung durch Tests und andere verwandte Techniken erh√∂hen die Effektivit√§t neuer Arbeitsmethoden weiter.  Wo ist die Automatisierung?  Wo sind die Technologien, die die Zahnr√§der schneller drehen lassen und die Beteiligung des Menschen auf das unbedingt notwendige Minimum reduzieren? <br><br>  Und hier zum Beispiel Ansible und Ansible Tower von Red Hat zur Orchestrierung von IT-Systemen als Teil moderner Softwareentwicklungsprozesse. <br><br><h3>  Keine Ausfallzeiten </h3><br>  Ein bisschen offensichtlicher.  Ausfallzeiten bedeuten entgangenen Gewinn und unzufriedene Kunden.  Daher ist in Web-Warteschlangensystemen, deren Benutzer √ºber alle Zeitzonen verteilt sind, das geplante Herunterfahren nur in wirklich schwerwiegenden F√§llen zul√§ssig, deren Liste das Aktualisieren von Anwendungsversionen nicht explizit enth√§lt.  √Ñhnlich verh√§lt es sich in Unternehmensumgebungen, in denen die Unzug√§nglichkeit eines Intranets oder Buchhaltungssystems die Produktivit√§t der Mitarbeiter erheblich verringert.  Daher sollte jede Prozessautomatisierung Aktualisierungen bereitstellen, ohne den Betrieb zu unterbrechen - mit anderen Worten, ohne Ausfallzeiten. <br><br>  Es ist durchaus m√∂glich, keine Ausfallzeiten zu erzielen, aber daf√ºr ben√∂tigen wir geeignete Tools, um beispielsweise eine erweiterte, mehrstufige und mehrstufige Orchestrierung bereitzustellen, wie beispielsweise das Ansible-System. <br><br><h3>  Anwendungserstellungssysteme </h3><br>  Continuous Delivery (CD) beginnt mit Continuous Integration (CI).  Ein System, das Quellcode-Repositorys auf √Ñnderungen √ºberwacht, die entsprechenden Tests unabh√§ngig ausf√ºhrt und mit jeder Code-Aktualisierung automatisch eine neue Version der Anwendung erstellt (und im Idealfall testet), z. B. das Jenkins-Projekt (jenkins.io). <br><br>  Um den Staffelstab nach erfolgreichem Zusammenstellen der neuen Version der Anwendung an das CD-System weiterzuleiten, kann das CI-System-Build-Subsystem Ansible aufrufen, um diese neue Version sofort denjenigen bereitzustellen, die Unit- oder Integrationstests durchf√ºhren.  Insbesondere kann Jenkins Tower verwenden, um Baugruppen in verschiedenen Umgebungen bereitzustellen, und die Test- oder Zwischenumgebung kann auf der Grundlage der Produktionsumgebung modelliert werden, wodurch die Vorhersagbarkeit w√§hrend des gesamten Software-Lebenszyklus erheblich verbessert wird.  Die von Ansible aus den Ergebnissen der Ausf√ºhrung von Automatisierungsskripten zur√ºckgegebenen Daten k√∂nnen direkt in die Build Systems-Jobs des Tower-Systems einbezogen werden.  Mit Tower k√∂nnen Sie sogar Bereitstellungsszenarien in einer Zwischenumgebung testen, bevor Sie sie auf "Kampf" -Servern ausf√ºhren. <br><br><h3>  Mehrstufiges Anwendungsupdate nacheinander </h3><br>  Das CD-System muss in der Lage sein, die fortlaufenden Aktualisierungsprozesse von mehrstufigen Anwendungen zu koordinieren.  Dank der Push-Architektur und der Funktionen der mehrstufigen mehrstufigen Orchestrierung kann Ansible diese Aufgabe bew√§ltigen, indem alle Anwendungsebenen nach Ebenen aktualisiert werden und Daten zwischen ihnen ausgetauscht werden. <br><br>  Um einzelne Updates zu implementieren, verwendet Ansible Play-Skripte, mit denen Sie die Gruppe der Zielhosts genau angeben und Aufgaben (Rollen) zuweisen k√∂nnen, die f√ºr sie ausgef√ºhrt werden m√ºssen.  Aufgaben sind normalerweise Ank√ºndigungen, dass sich eine bestimmte IT-Ressource in einem bestimmten Zustand befinden muss. Beispielsweise muss f√ºr eine Version einer Software ein bestimmtes Paket installiert werden, und f√ºr eine andere muss das Code-Repository √ºberpr√ºft werden.  Webanwendungstopologien m√ºssen in der Regel in strikter Reihenfolge aktualisiert werden, und Sie k√∂nnen Anwendungen und Systemkonfigurationen nicht auf allen Computern gleichzeitig aktualisieren. <br><br>  Wenn der Dienst neu gestartet wird, bleibt er einige Zeit nicht verf√ºgbar, und das Ersetzen der Anwendungsversion erfolgt ebenfalls nicht sofort.  Daher ziehen wir das System vor der Aktualisierung aus dem Ausgleichspool.  Daher m√ºssen Sie in der Lage sein, das Verbinden und Trennen von Maschinen vom Pool zu automatisieren.  Konsequent ist das Schl√ºsselwort.  Ansible kann die Gr√∂√üe des Fensters eines aufeinanderfolgenden Updates sehr genau steuern.  Nun, die Entwicklung solcher Updates wird sehr sorgf√§ltig durchgef√ºhrt, und wenn irgendwann ein Fehler auftritt, wird das Update ausgesetzt, um den Rest der IT-Infrastruktur nicht zu deaktivieren. <br><br><h3>  Kontinuierliche Bereitstellung f√ºr Automatisierungsskripte </h3><br>  Zus√§tzlich zur CD-Funktionalit√§t f√ºr Dienste, die im kommerziellen Betriebsmodus betrieben werden, k√∂nnen Sie auch die kontinuierliche Bereitstellung von Automatisierungsskripten selbst organisieren (Ansible Playbook-Befehlss√§tze. H√∂ren Sie nicht auf zu lesen, im zweiten Teil finden Sie Beispiele f√ºr Playbooks).  Auf diese Weise k√∂nnen Systemadministratoren und Entwickler Skripts mithilfe des Quellcode-Repositorys verwalten, diese Skripts in einer Zwischenumgebung testen und sie bei einem erfolgreichen Einbruch automatisch in die Produktionsumgebung √ºbertragen.  Mit anderen Worten, wenn Sie mit Skripten arbeiten, erhalten Sie alle methodischen und anderen Vorteile des zentralen Code-Repositorys, die Sie bei der Entwicklung von Software gewohnt sind. <br><br>  √Ñnderungen an Software- und Systemkonfigurationen sind einer der Hauptgr√ºnde f√ºr ungeplante Ausf√§lle.  Daher gibt es zus√§tzlich zu automatisierten Tests eine menschliche Kontrolle.  Es kann durch Integration in ein Code-Inspektionssystem wie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Gerrit organisiert</a> werden und die √Ñnderungen erst anwenden, nachdem sie von den zust√§ndigen Genossen genehmigt wurden. <br><br><h3>  Alternative Updates und Lastausgleichssysteme </h3><br>  Ansible arbeitet sehr unabh√§ngig mit Lastausgleichssystemen, wenn aufeinanderfolgende Updates durchgef√ºhrt werden.  Daher k√∂nnen Sie einfach in ein Playbook-Skript in einem beliebigen Zyklus f√ºr eine Gruppe von Hosts schreiben, z. B. "F√ºhren Sie diese Aktion auf System X im Auftrag von Host Y aus", und Ansible k√ºmmert sich um den Rest. <br><br>  Ansible interagiert gut mit Load Balancern aller Art und kann ein Flag zum vor√ºbergehenden Trennen eines Hosts setzen, um die Verf√ºgbarkeits√ºberwachung f√ºr diesen Host w√§hrend des Aktualisierungszeitraums zu deaktivieren.  Das einfache Schema "√úberwachung ausschalten - Aus dem Pool entfernen - Gew√ºnschte Softwareversion aktualisieren - Zur√ºck zum Pool - √úberwachung einschalten" implementiert problemlos eine sequentielle Aktualisierung ohne Ausfallzeiten und ohne Fehlalarme.  Und das alles in einem vollautomatischen Modus ohne Bedienereingriff. <br><br><h3>  Integrierte Zwischenpr√ºfung </h3><br>  Tower kann mit verschiedenen Ressourceninventardateien (Inventar) arbeiten, wodurch es einfach ist, aufeinanderfolgende Aktualisierungsszenarien in einer Zwischenumgebung zu testen, bevor sie auf "Kampf" -Servern ausgef√ºhrt werden.  Dazu reicht es aus, die Produktionsumgebung in der Testumgebung zu simulieren, Ansible mit dem Parameter "-i" auszuf√ºhren und anzugeben, welche Inventardatei beim Ausf√ºhren des Skripts verwendet werden soll - f√ºr die Testumgebung oder f√ºr die Produktionsumgebung.  Das Skript selbst muss nicht ge√§ndert werden. <br><br><h3>  Bereitstellung der Versionskontrolle </h3><br>  Einige Leute m√∂gen es, Anwendungen zusammen mit Betriebssystempaketen (RPM, Debs usw.) hei√üer zu packen, aber oft, insbesondere f√ºr Webanwendungen, ist ein solches Packen nicht erforderlich.  Daher enth√§lt Ansible mehrere Module zum Bereitstellen von Anwendungen direkt aus Versionskontrollsystemen.  Im Playbook-Skript k√∂nnen Sie eine Abstimmung mit dem Code-Repository f√ºr das angegebene Tag oder die angegebene Versionsnummer schreiben. Danach √ºberpr√ºft Ansible diese Bedingung auf allen Zielservern und aktiviert die n√§chsten Schritte nur, wenn die Version ersetzt werden muss, wodurch unn√∂tige Neustarts des Dienstes vermieden werden. <br><br><h3>  Integration mit √úberwachungstools </h3><br>  Als vollwertiges Orchestrierungssystem unterst√ºtzt Ansible die Integration in APM-basierte Anwendungsleistungsmanagementsysteme auf √úberwachungsebene.  W√§hrend der Bereitstellungs- oder Integrationstestphase m√ºssen Sie beispielsweise den APM-Software-Agenten mit der Anwendung installieren oder aktualisieren.  Ansible spielt hierf√ºr eine besondere Rolle. Nach der Installation und Aktivierung des Agenten kann Ansible ihn im APM-√úberwachungsstapel konfigurieren (sofern er noch nicht konfiguriert ist), sodass Anwendungsmanager sofort √ºberpr√ºfen k√∂nnen, ob die neue Version installiert wurde und problemlos funktioniert . <br><br>  Wenn nach dem Aktualisieren der Anwendung in der Produktionsumgebung ein Fehler aufgetreten ist, rufen die √úberwachungstools m√∂glicherweise Ansible auf, um ein Rollback auf die vorherige Version durchzuf√ºhren.  Nat√ºrlich nur, wenn ein solches Rollback erlaubt ist. <br><br><h3>  Ereignisbenachrichtigung </h3><br>  Im CI / CD-Paradigma m√∂chte jeder so schnell wie m√∂glich Ereignisbenachrichtigungen erhalten.  Ansible bietet sowohl integrierte Funktionen, einschlie√ülich eines E-Mail-Moduls, als auch die Integration in externe Benachrichtigungstools wie Instant Messenger, soziale Netzwerke oder Ereignisregistrierungssysteme. <br><br><h3>  Bereitstellung mithilfe eines Ressourcenstatusmodells </h3><br>  Eine der Hauptfunktionen von Ansible, die es zu einem sehr n√ºtzlichen Tool f√ºr die Bereitstellung von Anwendungen macht, ist die regelm√§√üige Verwendung des Ressourcenstatusmodells in Softwareupdateprozessen, die bei der Verwaltung von Systemkonfigurationen an Beliebtheit gewonnen hat.  Im Gegensatz zu herk√∂mmlichen Open Source-Steuerelementen muss Ansible nicht mit zus√§tzlicher Software oder speziellen Skripten ausgestattet sein, um die Anwendungsbereitstellung zu organisieren. <br><br>  In Ansible k√∂nnen Sie die Reihenfolge von Ereignissen auf verschiedenen Architekturebenen sehr genau registrieren und steuern. Auf diese Weise k√∂nnen Sie Aktionen an andere Systeme delegieren sowie Anweisungen des Ressourcenmodells (z. B. "Paket X muss sich im Status Y befinden") und herk√∂mmliche Skriptbefehle (z. B. "Skript ausf√ºhren") kombinieren .sh ") innerhalb eines Prozesses. <br><br>  Ansible macht es auch einfach, √úberpr√ºfungen verschiedener Bedingungen durchzuf√ºhren und Entscheidungen basierend auf deren Ergebnissen zu treffen.  Die Kombination der Prozesse der Systemkonfiguration und der Anwendungsbereitstellung in einer einzigen Toolkette ist wesentlich effizienter als ein Schema mit mehreren spezialisierten Tools und erh√∂ht au√üerdem die Konsistenz der Betriebssystemrichtlinien und -anwendungen. <br><br><h3>  Bereitstellungstests </h3><br>  Je mehr M√∂glichkeiten, desto h√∂her die Verantwortung.  Die Automatisierung kontinuierlicher Bereitstellungsprozesse erh√∂ht das Risiko der Bereitstellung einer fehlgeschlagenen Konfiguration auf allen Knoten des Systems erheblich.  Um die Risiken zu verringern, schl√§gt Ansible vor, Kontrolltests in das Skript einzuf√ºgen, die die sequentielle Aktualisierung unterbrechen, wenn etwas schief geht.  Um verschiedene Bedingungen zu testen, einschlie√ülich des Status der Funktionsweise von Diensten, k√∂nnen Sie beliebige Tests mithilfe der Befehls- oder Skriptmodule bereitstellen und solche Tests sogar als separate Ansible-Module erstellen. <br><br>  Das Fail-Modul kann die Ausf√ºhrung des Skripts auf dem Host jederzeit unterbrechen, sodass Sie Fehler in einem fr√ºhen Stadium der sequentiellen Aktualisierung erkennen k√∂nnen.  Aufgrund des Unterschieds zwischen der Zwischenumgebung und der Produktionsumgebung generiert letztere beispielsweise einen Konfigurationsfehler, der die "Kampf" -Server deaktiviert.  In diesem Fall kann in der ersten Phase des sequentiellen Updates ein Notausgang im Playbooks-Skript registriert werden.  Wenn Sie √ºber 100 Server verf√ºgen und das Fenster f√ºr aufeinanderfolgende Updates 10 ist, haben Sie bei einem solchen Notstopp Zeit, dies ruhig herauszufinden, das Skript zu reparieren und die Aktualisierung fortzusetzen. <br><br>  Im Falle eines Fehlers funktioniert Ansible nicht weiter und bel√§sst die Systeme in einem halbkonfigurierten Zustand. Es wird ein Fehler generiert, um die Aufmerksamkeit des Bedieners auf sich zu ziehen und ihm mitzuteilen, auf welchen Hosts der Aktualisierungszyklus fehlerhaft war und wie viele √Ñnderungen auf jeder Plattform vorgenommen wurden.  Ansible verf√ºgt √ºber einen Simulationslaufmodus, in dem das System einen Bericht dar√ºber generiert, welche √Ñnderungen vorgenommen worden w√§ren, wenn das Skript ohne seine tats√§chliche Ausf√ºhrung ausgef√ºhrt worden w√§re. <br><br><h3>  Konformit√§tspr√ºfung </h3><br>  Es gibt Umgebungen, in denen sich Konfigurationen nur √§ndern, wenn es ohne sie keinen Weg gibt.  √Ñnderungen in solchen Umgebungen werden vorab analysiert.  Es werden kontinuierliche Liefersysteme ‚Äûmit Vorbehalt‚Äú verwendet. <br><br>  Ansible verf√ºgt √ºber einen Simulationslaufmodus (aktiviert durch das Flag "--check"), in dem das System einen Bericht dar√ºber generiert, welche √Ñnderungen bei der Ausf√ºhrung des Skripts vorgenommen werden.  In diesem Fall findet die eigentliche Ausf√ºhrung des Skripts nicht statt. Der Simulationslauf l√§sst keine Fehler zu, hilft jedoch, die Details und Ergebnisse der vorgeschlagenen √Ñnderungen besser zu verstehen und zu analysieren. <br><br>  Auf der anderen Seite k√∂nnen Sie mit Ansible trotz der kontinuierlichen Bereitstellung neuer Assemblys Konformit√§tspr√ºfungen viel h√§ufiger ausf√ºhren, um den Moment zu erfassen, in dem sich einige Dinge in der Produktionsumgebung aufgrund menschlicher Eingriffe √§ndern, und m√ºssen beispielsweise durch Ausf√ºhren des entsprechenden Ansible-Skripts behoben werden, um √Ñnderungen vorzunehmen Softwareversion, Berechtigungen anpassen usw. <br><br><h3>  Autopilot-Bereitstellung </h3><br>  Wenn Sie in einer Welt der mehrstufigen mehrstufigen Orchestrierung sequentieller Software-Update-Prozesse ohne Ausfallzeiten leben, wird CI / CD h√∂chstwahrscheinlich ausschlie√ülich von Bedienern (sowohl manuell als auch mit teilweiser Automatisierung) ausgef√ºhrt und erfordert wie im Round Dance koordinierte Aktionen aller Prozessteilnehmer.  Ansible kann zusammen mit seiner einzigartigen Architektur und dem Fehlen von Software-Agenten auf den Zielhosts (Erh√∂hung der Sicherheit und Eliminierung der Notwendigkeit, das Managementsystem selbst zu verwalten) komplexe Bereitstellungsprozesse einfach beschreiben und einfach automatisieren, dh Ansible implementiert hier den vollst√§ndigen Autopilot-Modus. <br><br>  Beispiele f√ºr Ansible-Automatisierungsskripte finden Sie auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">GitHub</a> . Jetzt geben wir eine Grundlage und ein Beispiel f√ºr das Schreiben eines Playbook-Skripts, das in Ansible oder Ansible Tower ausgef√ºhrt werden kann.  Zusammen mit einer <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Liste von Modulen</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">anderen Dokumenten</a> hilft sie Ihnen dabei, zu lernen, wie Sie Ihre eigenen Playbooks-Skripte erstellen. <br><br><h3>  Was ist ein Spielbuch? </h3><br>  Ein Playbook-Skript besteht im Wesentlichen aus einer Reihe von Spielen, die zur Ausf√ºhrung auf einem einzelnen Remote-Host oder einer Gruppe von Hosts gesendet werden.  Es ist wie bei einer Montageanleitung f√ºr IKEA-M√∂bel: Befolgen Sie die Anweisungen genau und erhalten Sie genau das, was Sie im Gesch√§ft gesehen haben.  So funktionieren Skripte. <br><br><h3>  Module </h3><br>  Wir werden ein Playbook erstellen, das den Webserver auf dem RHEL / CentOS 7-Host installiert und eine index.html-Datei darauf basierend auf der im Skript angegebenen Vorlage erstellt.  Das hier gezeigte Beispielskript ist voll funktionsf√§hig und einsatzbereit.  Im Folgenden sehen wir uns ein Beispiel f√ºr ein Playbook-Skript an und zeigen, wie die Module verwendet werden. <br><br><h3>  Autoren (Autoren) </h3><br>  Ein Autor ist jemand, der Anweisungen erstellt, die von Modulen ausgef√ºhrt werden (h√§ufig zusammen mit zus√§tzlichen Werten: Argumente, Speicherorte usw.).  Die Module werden auf dem Zielhost in der Reihenfolge ausgef√ºhrt, in der sie im Playbook-Skript folgen (einschlie√ülich include'y und anderer darin enthaltener zus√§tzlicher Dateien).  Der Status des Hosts √§ndert sich (oder √§ndert sich nicht) in Abh√§ngigkeit von den Ergebnissen der Modulausf√ºhrung, die in Form von Ansible- und Tower-Ausgabe angezeigt werden. <br><br><h3>  Playbook-Skriptausf√ºhrung </h3><br>  Zun√§chst m√ºssen Sie einige Dinge √ºber das Ausf√ºhren von Playbook-Skripten wissen.  Playbook ist eine Art symbolisches System, das das Modul √ºber die Notwendigkeit informiert, eine Aufgabe auszuf√ºhren.  Um Ihr Playbook erfolgreich zu starten, ist es wichtig, die folgenden Punkte zu verstehen: <br><br>  <b>1. Zielsystem (Ziel)</b> <br>  Da Playbook-Skripte Anweisungen f√ºr Module enthalten und mit diesen interagieren, ist Ansible der Ansicht, dass Sie verstehen, was Sie tun m√∂chten, und es einfach automatisieren.  Deshalb sagen wir, dass Playbooks wie Anweisungen oder Anweisungen sind: Sie teilen den automatisierten Elementen mit, wie Sie die Aufgabe konfigurieren m√∂chten.  Gleichzeitig m√ºssen Sie selbst sehr gut verstehen, wie der Zielhost funktioniert, auf dem das Playbook-Skript ausgef√ºhrt wird. <br><br>  <b>2. Aufgaben</b> <br>  Wenn Sie einen Webserver in einem Teil des Playbooks starten m√ºssen, m√ºssen Sie wissen, wie dies gemacht wird, um zu wissen, welches Servicemodul daf√ºr verwendet werden soll, und um den Webserver mit Namen zu starten.  Wenn das Playbook das Softwarepaket installiert, sollten Sie wissen, wie dies auf dem Zielhost ausgef√ºhrt wird.  Sie sollten zumindest auf einer grundlegenden Ebene auch die Essenz der ausgef√ºhrten Aufgaben verstehen.  Ist f√ºr die Software, die Sie installieren m√∂chten, eine zus√§tzliche Hostkonfiguration erforderlich?  Gibt es Verzweigungen, die von den Bedingungen und Werten der Argumente abh√§ngen?  Wenn dabei Variablen √ºbergeben werden, m√ºssen Sie genau verstehen, was und warum. <br><br>  <b>Playbook Script Beispiel</b> <br>  Das folgende Beispiel f√ºr ein Playbook-Skript hilft Ihnen zu verstehen, was Sie gerade gelesen haben.  Der Zielhost darin ist der RHEL / CentOS 7-Server, auf dem unser Skript den NGINX-Webserver installiert und anschlie√üend die Datei index.html im Standard-Webroot-Verzeichnis erstellt.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nach Abschluss der Installation und Erstellung des Index wird der Webserver gestartet. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">* Hinweis: Um dieses Playbook-Beispielskript in Ansible Tower auszuf√ºhren, m√ºssen Sie zuerst Inventar und Konten konfigurieren. </font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Playbooks beginnen mit drei YAML-Bindestrichen (---), gefolgt von: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Name</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Einfach der Name des Skripts, um die Lesbarkeit des Playbooks zu gew√§hrleisten. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Hosts</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Eine Liste der Zielhosts, auf denen Ansible arbeiten soll. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Werden Sie</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : Hier haben wir eine echte Aussage geschrieben, um sicherzustellen, dass nginx ohne Probleme installiert wurde (dieses Feld ist nicht immer erforderlich).</font></font><br><br><pre><code class="hljs css">1 <span class="hljs-selector-tag"><span class="hljs-selector-tag">---</span></span> 2 <span class="hljs-selector-tag"><span class="hljs-selector-tag">-</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">name</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">Install</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">nginx</span></span> 3 <span class="hljs-selector-tag"><span class="hljs-selector-tag">hosts</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">host</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.name</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ip</span></span> 4 <span class="hljs-selector-tag"><span class="hljs-selector-tag">become</span></span>: <span class="hljs-selector-tag"><span class="hljs-selector-tag">true</span></span></code> </pre> <br>  Mit dem Einzug als den vorherigen drei Zeilen gibt es die <b>Aufgaben</b> : Direktive, nach der mit zus√§tzlichem Einzug (gem√§√ü den YAML-Verschachtelungsregeln) Aufgaben aufgelistet werden (Spiele).  In diesem Beispiel haben wir zwei Aufgaben und beide verwenden das Yum-Modul.  Die erste Aufgabe f√ºgt ein Epel-Release-Repository hinzu, damit Sie nginx installieren k√∂nnen.  Nachdem epel auf dem System angezeigt wurde, installiert die zweite Task das nginx-Paket. <br><br>  Die Anweisung <b>state</b> : bedeutet, dass Ansible den Status des Zielhosts √ºberpr√ºfen muss, bevor weitere Aktionen ausgef√ºhrt werden.  Wenn in unserem Beispiel bereits ein Repository oder Nginx auf dem Host vorhanden ist, versteht Ansible, dass diese beiden Aufgaben nicht ausgef√ºhrt werden m√ºssen, und f√§hrt mit den folgenden Schritten fort. <br><br><pre> <code class="hljs sql">1 tasks: 2 - name: Add epel-<span class="hljs-keyword"><span class="hljs-keyword">release</span></span> repo <span class="hljs-number"><span class="hljs-number">3</span></span> yum: <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: epel-<span class="hljs-keyword"><span class="hljs-keyword">release</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> state: <span class="hljs-keyword"><span class="hljs-keyword">present</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">7</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Install</span></span> nginx <span class="hljs-number"><span class="hljs-number">8</span></span> yum: <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: nginx <span class="hljs-number"><span class="hljs-number">10</span></span> state: <span class="hljs-keyword"><span class="hljs-keyword">present</span></span></code> </pre> <br>  Die Download-Seite, die standardm√§√üig in nginx verwendet wird, eignet sich hervorragend, um zu √ºberpr√ºfen, ob nginx korrekt installiert wurde. M√∂glicherweise m√∂chten Sie dies jedoch mit Ihrer HTML-Startdatei tun.  In diesem Beispiel befindet sich die Indexdateivorlage der Einfachheit halber in demselben Verzeichnis, in dem das Playbook gestartet wird.  Das Ziel ist nur der Standardpfad in Nginix, f√ºr den keine Sites konfiguriert sind. <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Insert</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> Page <span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> src: <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.html <span class="hljs-number"><span class="hljs-number">4</span></span> dest: /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/nginx/html/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.html</code> </pre> <br>  Die letzte Zeile in unserem Playbook dient nur dazu, zu √ºberpr√ºfen, ob der Nginx-Dienst erfolgreich gestartet wurde (oder um ihn zu starten, wenn nicht). <br><br><pre> <code class="hljs pgsql"><span class="hljs-number"><span class="hljs-number">1</span></span> - <span class="hljs-type"><span class="hljs-type">name</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Start</span></span> NGiNX <span class="hljs-number"><span class="hljs-number">2</span></span> service: <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span>: nginx <span class="hljs-number"><span class="hljs-number">4</span></span> state: started</code> </pre> <br>  Das gesamte Playbook-Skript war ungef√§hr so ‚Äã‚Äãlang wie der erste Absatz in diesem Beitrag: <br><br><pre> <code class="hljs delphi"><span class="hljs-number"><span class="hljs-number">1</span></span> --- <span class="hljs-number"><span class="hljs-number">2</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: Install nginx <span class="hljs-number"><span class="hljs-number">3</span></span> hosts: host.<span class="hljs-keyword"><span class="hljs-keyword">name</span></span>.ip <span class="hljs-number"><span class="hljs-number">4</span></span> become: true <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> tasks: <span class="hljs-number"><span class="hljs-number">7</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: Add epel-release repo <span class="hljs-number"><span class="hljs-number">8</span></span> yum: <span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: epel-release <span class="hljs-number"><span class="hljs-number">10</span></span> state: present <span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-number"><span class="hljs-number">12</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: Install nginx <span class="hljs-number"><span class="hljs-number">13</span></span> yum: <span class="hljs-number"><span class="hljs-number">14</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: nginx <span class="hljs-number"><span class="hljs-number">15</span></span> state: present <span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">17</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: Insert <span class="hljs-keyword"><span class="hljs-keyword">Index</span></span> Page <span class="hljs-number"><span class="hljs-number">18</span></span> template: <span class="hljs-number"><span class="hljs-number">19</span></span> src: <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.html <span class="hljs-number"><span class="hljs-number">20</span></span> dest: /usr/share/nginx/html/<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>.html <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">22</span></span> - <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: Start NGiNX <span class="hljs-number"><span class="hljs-number">23</span></span> service: <span class="hljs-number"><span class="hljs-number">24</span></span> <span class="hljs-keyword"><span class="hljs-keyword">name</span></span>: nginx <span class="hljs-number"><span class="hljs-number">25</span></span> state: started</code> </pre> <br><h3>  Zusammenfassung </h3><br>  Playbook-Skripte sind eine einfache und bequeme M√∂glichkeit, viele Dinge mit ein wenig Code zu erledigen.  Im obigen Beispiel haben wir drei Module verwendet: yum, template und service, um das Repository und das Softwarepaket auf dem Server zu installieren, eine Datei aus der lokalen Vorlage zu erstellen und dann den gerade installierten Dienst zu starten.  Gleichzeitig erschien unser Playbook-Skript etwas l√§nger als dieses Angebot!  Und obwohl wir es auf einem Host ausgef√ºhrt haben, kann es genauso gut auf Dutzenden und Hunderten von Servern ausgef√ºhrt werden, daf√ºr m√ºssen nur sehr kleine √Ñnderungen vorgenommen werden.  Dar√ºber hinaus k√∂nnen Sie mit Tower ein Playbook-Skript in eine Jobvorlage einf√ºgen, um es auf einer Gruppe von Servern in der AWS-Cloud oder in einem Unternehmensdatenzentrum auszuf√ºhren. <br><br>  Ansible Architekturmerkmale und die F√§higkeit zur Integration in CI-Systeme wie Jenkins automatisieren nicht nur Konfigurationsmanagementprozesse, sondern auch ein viel breiteres Spektrum von IT-Aufgaben.  Aus diesem Grund nennen wir Ansible liebevoll ein integriertes Orchestrierungssystem und nicht nur ein Tool f√ºr die Softwarebereitstellung und das Konfigurationsmanagement. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de412725/">https://habr.com/ru/post/de412725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de412715/index.html">Multithreading lernen Gehen Sie mit Bildern programmieren</a></li>
<li><a href="../de412717/index.html">Hallo Aliens; Bitte t√∂te uns nicht</a></li>
<li><a href="../de412719/index.html">MDG k√ºndigt Sprachsynthesewettbewerb an</a></li>
<li><a href="../de412721/index.html">Drei Hoffnungen der Menschheit auf die Entdeckung von Au√üerirdischen</a></li>
<li><a href="../de412723/index.html">Auf der Suche nach einer neuen Milliarden-Dollar-Farbe</a></li>
<li><a href="../de412727/index.html">Wie w√§hle ich ein Tool f√ºr das Prototyping im Jahr 2018 aus?</a></li>
<li><a href="../de412729/index.html">DSGVO. Ist es notwendig, es in Russland durchzuf√ºhren?</a></li>
<li><a href="../de412735/index.html">Lassen Sie den ATM Alone-Wettbewerb an PHDays 8</a></li>
<li><a href="../de412737/index.html">Schutz personenbezogener Daten von 3 Milliarden Menschen - √Ñhnlichkeiten und Unterschiede in der Gesetzgebung in den BRICS-L√§ndern</a></li>
<li><a href="../de412739/index.html">Sch√§ferhund</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>