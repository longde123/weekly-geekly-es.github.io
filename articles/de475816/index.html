<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üî© „Ä∞Ô∏è üìè Xcode 11 und XCFrameworks: ein neues Framework-Paketierungsformat ü§æ üë∂üèæ üêª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Im Leben vieler Unternehmen, die √ºber einen eigenen Stapel von Bibliotheken und Komponenten verf√ºgen und diese entwickeln, wird es manchmal schwierig,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Xcode 11 und XCFrameworks: ein neues Framework-Paketierungsformat</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/true_engineering/blog/475816/"><p><img src="https://habrastorage.org/webt/nd/9g/nt/nd9gntw7zmcbecyibkxwc8aheno.png"></p><br><p>  Im Leben vieler Unternehmen, die √ºber einen eigenen Stapel von Bibliotheken und Komponenten verf√ºgen und diese entwickeln, wird es manchmal schwierig, das Volumen dieses Stapels zu verwalten. </p><br><p>  Bei der Entwicklung f√ºr die iOS-Plattform und allgemein f√ºr das Apple-√ñkosystem gibt es zwei M√∂glichkeiten, Bibliotheken als Abh√§ngigkeiten zu verbinden: </p><br><ol><li>  Sammeln Sie sie jedes Mal, wenn Sie die Anwendung erstellen. </li><li>  Sammeln Sie sie im Voraus mit den bereits gesammelten Abh√§ngigkeiten. </li></ol><br><p>  Bei der Wahl des zweiten Ansatzes wird es logisch, CI / CD-Systeme zu verwenden, um Bibliotheken in gebrauchsfertige Artefakte zu integrieren. </p><br><p>  Die Notwendigkeit, Bibliotheken f√ºr mehrere Plattformen oder Prozessorarchitekturen im Apple-√ñkosystem zu erstellen, erfordert jedoch h√§ufig nicht immer triviale Vorg√§nge, sowohl beim Erstellen der Bibliothek als auch des Endprodukts, das sie verwendet. </p><br><p>  Vor diesem Hintergrund war es schwer, es nicht zu bemerken, und es war √§u√üerst interessant, eine der Innovationen von Apple zu studieren, die auf der WWDC 2019 im Rahmen der Pr√§sentation von <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Binary Frameworks in Swift vorgestellt wurden</a> - das Verpackungsformat der Frameworks ist XCFramework. </p><br><p>  XCFramework bietet mehrere Vorteile gegen√ºber etablierten Ans√§tzen: </p><br><ol><li>  Abh√§ngigkeitspaketierung f√ºr alle Zielplattformen und -architekturen in einem einzigen Paket. </li><li>  Verbindungspaket im XCFramework-Format als einzelne Abh√§ngigkeit f√ºr alle Zielplattformen und -architekturen. </li><li>  Keine Notwendigkeit, ein fettes / universelles Ger√ºst aufzubauen. </li><li>  X86_64-Slice muss nicht entfernt werden, bevor die endg√ºltigen Anwendungen in den AppStore geladen werden. </li></ol><br><p>  In diesem Artikel erkl√§ren wir, warum dieses neue Format eingef√ºhrt wurde, was es ist und was es dem Entwickler bietet. </p><a name="habracut"></a><br><h1 id="kak-poyavilsya-novyy-format">  Wie das neue Format erschien </h1><br><p>  Apple hat zuvor den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Swift Package Manager-</a> Abh√§ngigkeitsmanager ver√∂ffentlicht. <br>  Unter dem Strich k√∂nnen Sie mit Swift PM Bibliotheken in Form von Open Source-Code mit einer Beschreibung der Abh√§ngigkeiten bereitstellen. </p><br><p>  Aus der Sicht des Entwicklers, der die Bibliothek bereitstellt, m√∂chte ich zwei Aspekte von Swift PM hervorheben. </p><br><ul><li>  Das offensichtliche Minus ist, dass aus dem einen oder anderen Grund nicht alle Bibliotheksanbieter ihren Quellcode f√ºr Verbraucher √∂ffnen m√∂chten. </li><li>  Ein offensichtliches Plus: Beim Kompilieren von Abh√§ngigkeiten aus Quellen m√ºssen wir nicht mehr die Bin√§rkompatibilit√§t von Bibliotheken beachten. </li></ul><br><p>  XCFramework Apple bietet als neues Bin√§rformat f√ºr Paketbibliotheken eine Alternative zu Swift Packages an. </p><br><p>  Dieses Format sowie die M√∂glichkeit, die in XCFramework zusammengestellte Bibliothek zu verbinden, sind ab Xcode 11 und dessen Betaversionen verf√ºgbar. </p><br><h1 id="chto-izsebya-predstavlyaet-xcframework">  Was ist XCFramework? </h1><br><p>  Im Kern ist XCFramework eine neue M√∂glichkeit, Bibliotheken in ihren verschiedenen Versionen zu verpacken und bereitzustellen. </p><br><p>  Das neue Format erm√∂glicht unter anderem auch das Packen statischer Bibliotheken mit ihren Header-Dateien, einschlie√ülich der in C / Objective-C geschriebenen. </p><br><p>  Betrachten Sie das Format genauer. </p><br><ol><li><p>  <strong>Abh√§ngigkeitspaketierung f√ºr alle Zielplattformen und -architekturen in einem einzigen Paket</strong> </p><br><p> Alle Bibliotheksassemblys f√ºr jede der Zielplattformen und -architekturen k√∂nnen jetzt in einem einzigen Bundle mit der Erweiterung .xcframework zusammengefasst werden. <br>  Zu diesem Zeitpunkt m√ºssen Sie jedoch Skripts verwenden, um den <code>xcodebuild</code> mit der neuen <code>-create-xcframework</code> f√ºr Xcode 11 <code>-create-xcframework</code> . </p><br><p>  Der Montage- und Verpackungsprozess wird weiter betrachtet. </p><br></li><li><p>  <strong>Verbindungspaket im XCFramework-Format als einzelne Abh√§ngigkeit f√ºr alle Zielplattformen und -architekturen</strong> </p><br><p>  Da Bundle .xcframework alle erforderlichen Abh√§ngigkeiten-Assembly-Optionen enth√§lt, m√ºssen wir uns keine Gedanken √ºber die Architektur und die Zielplattform machen. </p><br><p>  In Xcode 11 ist eine in .xcframework gepackte Bibliothek wie ein regul√§res .framework verbunden. <br>  Dies kann in den Zieleinstellungen auf folgende Weise erreicht werden: </p><br><ul><li>  Hinzuf√ºgen von .xcframework zum Abschnitt "Frameworks und Bibliotheken" auf der Registerkarte "Allgemein" </li><li>  Hinzuf√ºgen von .xcframework zu "Binary mit Bibliotheken verkn√ºpfen" auf der Registerkarte "Phasen erstellen" </li></ul><br></li><li><p>  <strong>Keine Notwendigkeit, Fett / universellen Rahmen zu bauen</strong> </p><br><p>  Bisher mussten zur Unterst√ºtzung mehrerer Bibliotheken und mehrerer Architekturen in einer Plug-In-Bibliothek die sogenannten Fat- oder Universal-Frameworks erstellt werden. <br>  Dazu wurde der <code>lipo</code> , um alle Optionen des zusammengesetzten Frameworks in eine einzige dicke Bin√§rdatei zu n√§hen. </p><br><p>  Weitere Details dazu finden Sie beispielsweise in folgenden Artikeln: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Wie erstelle</a> ich mein <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">eigenes iOS-Framework</a> ? (Habr.ru) </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Schreiben eines benutzerdefinierten universellen Frameworks in Xcode 10.2 und iOS 12</a> (medium.com) </li></ul><br></li><li><p>  <strong>Es ist nicht erforderlich, das x86_64-Segment zu entfernen, bevor Endanwendungen in den AppStore geladen werden</strong> </p><br><p>  In der Regel wird ein solches Slice verwendet, um Bibliotheken im iOS-Simulator bereitzustellen. <br>  Wenn Sie versuchen, eine Anwendung mit Abh√§ngigkeiten, die x86_64-Slice enthalten, im AppStore herunterzuladen, tritt m√∂glicherweise der bekannte Fehler <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ITMS-90087 auf</a> . </p><br></li></ol><br><h1 id="sozdanie-iupakovka-xcframework-teoriya">  XCFramework erstellen und verpacken: Theorie </h1><br><p>  In der zuvor erw√§hnten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Pr√§sentation</a> sind mehrere Schritte erforderlich, um die Bibliothek im XCFramework-Format zusammenzustellen und zu verpacken: </p><br><ol><li><p>  <strong>Projektvorbereitung</strong> </p><br><p>  Zun√§chst m√ºssen Sie in allen Zielbereichen des Projekts, die f√ºr das Erstellen der Bibliothek f√ºr die Zielplattformen verantwortlich sind, die neue Einstellung "Bibliotheken f√ºr die Verteilung erstellen" f√ºr Xcode 11 aktivieren. </p><br><p><img src="https://habrastorage.org/webt/wl/vs/ak/wlvsakcfadbfihsrebpvtey6uec.png"></p><br></li><li><p>  <strong>Projektassembly f√ºr Zielplattformen und Architekturen</strong> </p><br><p>  Als N√§chstes m√ºssen wir alle Ziele f√ºr die Zielplattformen und -architekturen erfassen. <br>  Wir betrachten Beispiele f√ºr das Aufrufen von Befehlen am Beispiel einer bestimmten Projektkonfiguration. </p><br><p>  Nehmen wir an, wir haben im Projekt zwei Schemata: ‚ÄûXCFrameworkExample-iOS‚Äú und ‚ÄûXCFramework-macOS‚Äú. </p><br><p><img src="https://habrastorage.org/webt/on/ug/s8/onugs8ismapkgs0hngnvdixne9m.png"></p><br><p>  Ebenfalls im Projekt gibt es zwei Ziele, die die Bibliothek f√ºr iOS und macOS sammeln. </p><br><p><img src="https://habrastorage.org/webt/m8/li/dj/m8lidjpvlt6svz9nc052imlcnik.png"></p><br><p>  Um alle erforderlichen Bibliothekskonfigurationen zu erstellen, m√ºssen beide Ziele mithilfe der entsprechenden Schemata erfasst werden. <br>  F√ºr iOS ben√∂tigen wir jedoch zwei Assemblys: eine f√ºr Endger√§te (ARM) und eine f√ºr den Simulator (x86_64). </p><br><p>  Insgesamt m√ºssen wir 3 Frameworks sammeln. </p><br><p>  Dazu k√∂nnen Sie den Befehl <code>xcodebuild</code> : </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO</span></span></code> </pre> <br><p>  Als Ergebnis haben wir 3 zusammengestellte Frameworks erhalten, die wir im .xcframework-Container weiter verpacken werden. </p><br></li><li><p>  <strong>Zusammengesetztes .framework in .xcframework packen</strong> </p><br><p>  Sie k√∂nnen dies mit dem folgenden Befehl tun: </p><br><pre> <code class="bash hljs">xcodebuild -create-xcframework \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -framework <span class="hljs-string"><span class="hljs-string">"./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework"</span></span> \ -output <span class="hljs-string"><span class="hljs-string">"./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><p>  Es kann viele <code>-framework</code> Parameter- <code>-framework</code> , die auf alle .framework-Assemblys verweisen, die Sie an den .xcframework-Container anh√§ngen m√∂chten. </p><br></li></ol><br><h1 id="podgotovka-proekta-biblioteki-dlya-buduschey-sborki-iupakovki-xcframework">  Vorbereiten eines Bibliotheksprojekts f√ºr das zuk√ºnftige Zusammenstellen und Packen von XCFramework </h1><br><p>  <strong>TL; DR: Das fertige Projekt kann <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">aus dem Repository von Github</a> heruntergeladen werden.</strong> </p><br><p>  Als Beispiel implementieren wir eine Bibliothek, die f√ºr zwei Plattformen verf√ºgbar sein wird: iOS und macOS. <br>  Wir werden die im vorherigen Abschnitt des Artikels erw√§hnte Projektkonfiguration verwenden: zwei Schemata und zwei entsprechende Framework-Ziele f√ºr iOS- und macOS-Plattformen. </p><br><p>  Wird die Bibliothek selbst eine einfache Erweiterung f√ºr <code>String?</code> bereitstellen <code>String?</code>  ( <code>Optional where Wrapped == String</code> ), mit einer einzelnen Eigenschaft. </p><br><p>  Wir nennen diese Eigenschaft <code>isNilOrEmpty</code> und werden uns, wie der Name schon sagt, wissen lassen, wann sie sich in <code>String?</code>  fehlender Wert oder der darin gespeicherte String ist leer. </p><br><p>  Der Code kann wie folgt implementiert werden: </p><br><pre> <code class="swift hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extension</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Optional</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">where</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Wrapped</span></span></span><span class="hljs-class"> == </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> isNilOrEmpty: <span class="hljs-type"><span class="hljs-type">Bool</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> .some(string) = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> string.isEmpty } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }</code> </pre> <br><p>  Wir fahren direkt mit der Erstellung und Konfiguration des Projekts fort. </p><br><ol><li><p>  <strong>Zun√§chst m√ºssen wir ein Projekt vom Typ "Framework" f√ºr eine von zwei Zielplattformen Ihrer Wahl erstellen: iOS oder macOS.</strong> </p><br><p>  Dies k√∂nnen Sie in Xcode √ºber den Men√ºpunkt ‚ÄûDatei‚Äú =&gt; ‚ÄûNeu‚Äú =&gt; ‚ÄûProjekt‚Äú oder √ºber das Tastenk√ºrzel <strong>‚áß +  + N</strong> (standardm√§√üig) <strong>tun</strong> . </p><br><p>  W√§hlen Sie im oberen Bereich des Dialogfelds die gew√ºnschte Plattform (iOS oder macOS) aus, w√§hlen Sie den Typ des Framework-Projekts aus und klicken Sie auf die Schaltfl√§che "Weiter". </p><br><p>  Auf dem n√§chsten Bildschirm m√ºssen wir den Projektnamen im Feld "Produktname" festlegen. </p><br><p>  Alternativ k√∂nnen Sie den "Basis" -Namen des Projekts verwenden, in der zuvor erw√§hnten Konfiguration ist es "XCFrameworkExample". </p><br><p>  In Zukunft werden wir bei der Konfiguration des Projekts dem Basisnamen, der im Namen des Ziels verwendet wird, Suffixe f√ºr Plattformen hinzuf√ºgen. </p><br></li><li><p>  <strong>Danach m√ºssen Sie im Projekt ein anderes Target vom Typ "Framework" f√ºr eine andere der aufgelisteten Plattformen erstellen (mit Ausnahme der Plattform, f√ºr die das Projekt urspr√ºnglich erstellt wurde).</strong> </p><br><p>  Verwenden Sie dazu den Men√ºpunkt "Datei" =&gt; "Neu" =&gt; "Ziel". </p><br><p>  Als n√§chstes w√§hlen wir im Dialog eine andere (relativ zu der in Absatz 1 ausgew√§hlten) der beiden Plattformen aus, woraufhin wir erneut den Projekttyp "Framework" ausw√§hlen. </p><br><p>  F√ºr das Feld "Produktname" k√∂nnen wir sofort den Namen mit dem Suffix der Plattform verwenden, f√ºr die wir in diesem Absatz das Ziel hinzuf√ºgen.  Wenn die Plattform also macOS ist, k√∂nnte der Name "XCFrameworkExample-macOS" lauten (% base_name% -% platform%). </p><br></li><li><p>  <strong>Wir richten Ziele und Diagramme ein, um die Unterscheidung zu erleichtern.</strong> </p><br><p>  Benennen Sie zun√§chst unsere Schemata und die mit ihnen verkn√ºpften Ziele um, sodass ihre Namen die Plattformen widerspiegeln. Beispiel: </p><br><ul><li>  "XCFrameworkExample-iOS" </li><li>  "XCFrameworkExample-macOS" </li></ul><br></li><li><p>  <strong>F√ºgen Sie als N√§chstes die Datei mit dem Code unserer Erweiterung f√ºr <code>String?</code> zum Projekt hinzu .swift <code>String?</code></strong> </p><br><p>  F√ºgen Sie dem Projekt eine neue .swift-Datei mit dem Namen "Optional.swift" hinzu. <br>  Und in der Datei selbst haben wir die oben erw√§hnte Erweiterung f√ºr <code>Optional</code> . </p><br><p>  Es ist wichtig, dass Sie nicht vergessen, die Codedatei beiden Zielen hinzuzuf√ºgen. </p><br><p><img src="https://habrastorage.org/webt/qp/eh/qs/qpehqsezf7pb-pg4pc8wao7l4cs.png"></p><br></li></ol><br><p>  Jetzt haben wir ein Projekt, das wir mit den Befehlen aus der vorherigen Phase in XCFramework zusammenstellen k√∂nnen. </p><br><h1 id="process-sborki-iupakovki-biblioteki-vformat-xcframework">  Der Prozess des Assemblierens und Packens der Bibliothek im .xcframework-Format </h1><br><p>  Zu diesem Zeitpunkt k√∂nnen Sie das Bash-Skript in einer separaten Datei verwenden, um die Bibliothek zu erstellen und im .xcframework-Format zu verpacken.  Dar√ºber hinaus k√∂nnen diese Entwicklungen k√ºnftig genutzt werden, um die L√∂sung in das CI / CD-System zu integrieren. </p><br><p>  Das Skript sieht h√§sslich einfach aus und fasst die zuvor erw√§hnten Befehle f√ºr die Assemblierung zusammen: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh # ---------------------------------- # BUILD PLATFORM SPECIFIC FRAMEWORKS # ---------------------------------- # iOS devices xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios.xcarchive" \ -sdk iphoneos \ SKIP_INSTALL=NO # iOS simulator xcodebuild archive \ -scheme XCFrameworkExample-iOS \ -archivePath "./build/ios_sim.xcarchive" \ -sdk iphonesimulator \ SKIP_INSTALL=NO # macOS xcodebuild archive \ -scheme XCFrameworkExample-macOS \ -archivePath "./build/macos.xcarchive" \ SKIP_INSTALL=NO # ------------------- # PACKAGE XCFRAMEWORK # ------------------- xcodebuild -create-xcframework \ -framework "./build/ios.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/ios_sim.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -framework "./build/macos.xcarchive/Products/Library/Frameworks/XCFrameworkExample.framework" \ -output "./build/XCFrameworkExample.xcframework"</span></span></code> </pre> <br><h1 id="soderzhimoe-xcframework">  .Xcframework-Inhalt </h1><br><p>  Als Ergebnis des Assembler-Skripts aus dem vorherigen Absatz des Artikels erhalten wir das begehrte Bundle .xcframework, das dem Projekt hinzugef√ºgt werden kann. </p><br><p>  Wenn wir uns dieses Bundle ansehen, das wie .framework im Wesentlichen ein einfacher Ordner ist, sehen wir die folgende Struktur: </p><br><p><img src="https://habrastorage.org/webt/pg/sr/g6/pgsrg6uc4prxhairmnoy57p9wus.png"></p><br><p>  Hier sehen wir, dass es sich bei .xcframework um Assemblys im .framework-Format handelt, die nach Plattform und Architektur unterteilt sind.  Um auch den Inhalt des Bundles .xcframework zu beschreiben, befindet sich im Inneren eine Info.plist-Datei. </p><br><div class="spoiler">  <b class="spoiler_title">Die Datei Info.plist hat folgenden Inhalt</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">version</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1.0"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>AvailableLibraries<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>arm64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios-x86_64-simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>ios<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatformVariant<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>simulator<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryIdentifier<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos-x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>LibraryPath<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkExample.framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedArchitectures<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>x86_64<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>SupportedPlatform<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>macos<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">array</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>CFBundlePackageType<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>XFWK<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span>XCFrameworkFormatVersion<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span>1.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">string</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dict</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">plist</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> </div></div><br><p>  M√∂glicherweise stellen Sie fest, dass f√ºr den Schl√ºssel "CFBundlePackageType" im Gegensatz zum Format ".framework" der neue Wert "XFWK" und nicht "FMWK" verwendet wird. </p><br><h1 id="itogi">  Zusammenfassung </h1><br><p>  Das Bibliothekspaketformat in XCFramework ist also nichts anderes als ein regul√§rer Container f√ºr Bibliotheken, die im .framework-Format kompiliert wurden. </p><br><p>  Mit diesem Format k√∂nnen Sie jedoch jede der darin enthaltenen Architekturen und Plattformen separat speichern und unabh√§ngig voneinander verwenden.  Dies beseitigt eine Reihe von Problemen, die mit dem weit verbreiteten Ansatz zum Aufbau von Fett- / Universalger√ºsten verbunden sind. </p><br><p>  Wie dem auch sei, im Moment gibt es eine wichtige Nuance in Bezug auf die Verwendung von XCFramework in realen Projekten - das Abh√§ngigkeitsmanagement, das Apple nicht im XCFramework-Format implementiert hat. </p><br><p>  Zu diesem Zweck werden √ºblicherweise Swift PM, Carthage, CocoaPods und andere Abh√§ngigkeitsverwaltungssysteme sowie deren Assemblys verwendet.  Daher ist es nicht verwunderlich, dass die Unterst√ºtzung f√ºr das neue Format gerade in den Projekten <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">CocoaPods</a> und <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Carthage</a> bereits im Gange ist. </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de475816/">https://habr.com/ru/post/de475816/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de475804/index.html">Importieren Sie geplante Anrufberichte von CoMagic nach einem Zeitplan in BigQuery mithilfe von Google Cloud-Funktionen</a></li>
<li><a href="../de475808/index.html">GitHub hat ein tausendj√§hriges Repository erstellt, in dem Open Source-Repositorys f√ºr die Nachwelt gespeichert werden</a></li>
<li><a href="../de475810/index.html">Wie 82.000 Tonnen der Kernbest√§nde der UdSSR aus dem Ural exportiert werden</a></li>
<li><a href="../de475812/index.html">So bleiben Sie im Open Space verr√ºckt: Erstellen Sie ein neues B√ºro von Grund auf neu</a></li>
<li><a href="../de475814/index.html">Docker-Transformation: Verkauf von Docker Enterprise in Mirantis und Aktualisierung des Pfads</a></li>
<li><a href="../de475826/index.html">Warum Amazon (und andere) Bewertungen nicht vertrauensw√ºrdig sind</a></li>
<li><a href="../de475830/index.html">Tragbare Retro-Konsole zum Selbermachen</a></li>
<li><a href="../de475834/index.html">Scrum wird dir nicht helfen. Wir verstehen warum</a></li>
<li><a href="../de475836/index.html">Interview mit Arthur Khachuyan: Wie berechnet man einen Milliard√§r in sozialen Netzwerken?</a></li>
<li><a href="../de475838/index.html">Menschen ver√§ndern. Oder ... Menschen ver√§ndern. Informationen zum ‚ÄûAbheben‚Äú des Transformationsprojekts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>