<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñåÔ∏è üç£ üë©üèæ‚Äçüé® Premiers pas pour la rouille üöó ü¶â ü§∞üèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Bonjour √† tous. R√©cemment, j'ai rencontr√© un nouveau langage de programmation Rust. J'ai remarqu√© qu'il √©tait diff√©rent des autres que j'avais rencont...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Premiers pas pour la rouille</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/433302/"><p><img src="https://habrastorage.org/webt/ra/od/jn/raodjnsmyuf5nphvpqwkhcwliyi.jpeg" alt="image"></p><br><p>  Bonjour √† tous.  R√©cemment, j'ai rencontr√© un nouveau langage de programmation Rust.  J'ai remarqu√© qu'il √©tait diff√©rent des autres que j'avais rencontr√©s auparavant.  J'ai donc d√©cid√© de creuser plus profond√©ment.  Je souhaite partager les r√©sultats et mes impressions: </p><br><ul><li>  Je vais commencer par les principales caract√©ristiques de Rust, √† mon avis </li><li>  Je vais d√©crire des d√©tails de syntaxe int√©ressants </li><li>  Je vais expliquer pourquoi Rust n'est pas susceptible de conqu√©rir le monde </li></ul><br><p>  Je vais vous expliquer tout de suite que j'√©cris en Java depuis une dizaine d'ann√©es, donc je vais argumenter depuis mon clocher. </p><a name="habracut"></a><br><h1 id="killer-feature">  Fonction tueur </h1><br><p> Rust essaie de prendre une position interm√©diaire entre les langages de bas niveau tels que C / C ++ et Java / C # / Python / Ruby de haut niveau ... Plus le langage est proche du mat√©riel, plus il y a de contr√¥le, plus il est facile de pr√©dire comment le code s'ex√©cutera.  Mais avoir un acc√®s complet √† la m√©moire est beaucoup plus facile de tirer sur votre jambe.  Contrairement √† C / C ++, Python / Java et tout le reste sont apparus.  Ils n'ont pas besoin de penser √† vider la m√©moire.  Le pire est le NPE, les fuites ne sont pas si courantes.  Mais pour que cela fonctionne, vous avez besoin, au minimum, d'un garbage collector, qui, √† son tour, commence √† vivre sa propre vie, en parall√®le avec le code utilisateur, ce qui r√©duit sa pr√©visibilit√©.  La machine virtuelle offre toujours l'ind√©pendance de la plate-forme, mais combien il en faut est un point discutable, je ne vais pas le soulever maintenant. </p><br><p>  Rust est un langage de bas niveau, le compilateur g√©n√®re un binaire, qui ne n√©cessite pas de trucs suppl√©mentaires pour fonctionner.  Toute la logique de suppression des objets inutiles est int√©gr√©e dans le code au moment de la compilation, c'est-√†-dire  il n'y a pas non plus de garbage collector lors de l'ex√©cution.  Rust n'a √©galement aucune r√©f√©rence nulle et les types sont s√ªrs, ce qui le rend encore plus fiable que Java. </p><br><p>  L'id√©e de poss√©der une r√©f√©rence d'objet et d'emprunter est au c≈ìur de la gestion de la m√©moire.  Si une seule variable poss√®de chaque objet, d√®s qu'il expire √† la fin du bloc, tout ce qu'il pointe peut √™tre effac√© r√©cursivement.  Des liens peuvent √©galement √™tre emprunt√©s pour la lecture ou l'√©criture.  Ici fonctionne le principe d'un √©crivain et de nombreux lecteurs. </p><br><p>  Ce concept peut √™tre d√©montr√© dans le morceau de code suivant.  <em>Test</em> <em>()</em> est appel√© √† partir de la m√©thode <em>main ()</em> , qui cr√©e une structure de donn√©es r√©cursive <em>MyStruct</em> qui impl√©mente l'interface du destructeur.  <em>Drop</em> vous permet de d√©finir la logique √† ex√©cuter avant que l'objet ne soit d√©truit.  Quelque chose de similaire au finaliseur en Java, √† la diff√©rence de Java, le moment de l'appel de la m√©thode <em>drop ()</em> est tout √† fait certain. </p><br><pre><code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { test(); <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"End of main"</span></span>) } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = MyStruct { v: <span class="hljs-number"><span class="hljs-number">1</span></span>, s: <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>::new( <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(MyStruct { v: <span class="hljs-number"><span class="hljs-number">2</span></span>, s: <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>::new(<span class="hljs-literal"><span class="hljs-literal">None</span></span>), }) ), }; <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"End of test"</span></span>) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyStruct</span></span></span></span> { v: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, s: <span class="hljs-built_in"><span class="hljs-built_in">Box</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>&lt;MyStruct&gt;&gt;, } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Drop</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MyStruct { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">drop</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"Cleaning {}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.v) } }</code> </pre> <br><p>  La conclusion sera la suivante: </p><br><pre> <code class="plaintext hljs">End of test Cleaning 1 Cleaning 2 End of main</code> </pre> <br><p>  C'est-√†-dire  avant de quitter <em>test (), la</em> m√©moire a √©t√© effac√©e r√©cursivement.  Le compilateur s'est occup√© de cela en ins√©rant le code n√©cessaire.  Ce qui est <em>Box</em> et <em>Option</em> sera d√©crit un peu plus tard. </p><br><p>  De cette fa√ßon, Rust prend la s√©curit√© des langages de haut niveau et la pr√©visibilit√© des langages de programmation de bas niveau. </p><br><h1 id="chto-esche-interesnogo">  Quoi d'autre int√©ressant </h1><br><p>  Ensuite, je vais √©num√©rer les caract√©ristiques de la langue par ordre d√©croissant d'importance, √† mon avis. </p><br><h2 id="oop">  Oop </h2><br><p>  Ici, Rust est g√©n√©ralement en avance sur les autres.  Si la plupart des langues sont parvenues √† la conclusion que l'h√©ritage multiple doit √™tre abandonn√©, alors dans Rust il n'y a aucun h√©ritage du tout.  C'est-√†-dire  une classe ne peut impl√©menter des interfaces qu'en quantit√© quelconque, mais ne peut pas h√©riter d'autres classes.  En termes de Java, cela signifierait de rendre toutes les classes finales.  En g√©n√©ral, la vari√©t√© syntaxique pour maintenir la POO n'est pas si grande.  C'est peut-√™tre pour le mieux. </p><br><p>  Pour combiner des donn√©es, il existe des structures qui peuvent contenir une impl√©mentation.  Les interfaces sont appel√©es trait et peuvent √©galement contenir des impl√©mentations par d√©faut.  Ils n'atteignent pas les classes abstraites, car  ne peut pas contenir de champs, beaucoup se plaignent de cette restriction.  La syntaxe est la suivante, je pense que les commentaires ne sont pas n√©cessaires ici: </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { MyPrinter { value: <span class="hljs-number"><span class="hljs-number">10</span></span> }.print(); } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Printer</span></span></span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Printer { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"hello!"</span></span>) } } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyPrinter</span></span></span></span> { value: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Printer <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> MyPrinter { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">print</span></span></span></span>(&amp;<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>) { <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.value) } }</code> </pre> <br><p>  Parmi les fonctionnalit√©s que j'ai remarqu√©es, il convient de noter les √©l√©ments suivants: </p><br><ul><li>  Les classes n'ont pas de constructeurs.  Il n'y a que des initialiseurs qui sp√©cifient les valeurs des champs entre accolades.  Si vous avez besoin d'un constructeur, cela se fait par des m√©thodes statiques. </li><li>  La m√©thode d'instance diff√®re de la m√©thode statique en ayant la r√©f√©rence <em>&amp; self</em> comme premier argument. </li><li>  Les classes, interfaces et m√©thodes peuvent √©galement √™tre g√©n√©ralis√©es.  Mais contrairement √† Java, ces informations ne sont pas perdues au moment de la compilation. </li></ul><br><h2 id="esche-nemnogo-bezopasnosti">  Un peu plus de s√©curit√© </h2><br><p>  Comme je l'ai dit, Rust accorde une grande attention √† la fiabilit√© du code et essaie d'√©viter la plupart des erreurs au stade de la compilation.  Pour cela, la possibilit√© de rendre les liens vides a √©t√© exclue.  Cela m'a rappel√© les types nullables de Kotlin.  <em>L'option est</em> utilis√©e pour cr√©er des liens vides.  Tout comme dans Kotlin, en essayant d'acc√©der √† une telle variable, le compilateur battra des mains, for√ßant √† ins√©rer des ch√®ques.  Essayer d'extraire la valeur sans v√©rifier peut entra√Æner une erreur.  Mais cela ne peut certainement pas se faire par accident comme, par exemple, en Java. </p><br><p>  J'ai √©galement aim√© le fait que toutes les variables et tous les champs de classe sont immuables par d√©faut.  Bonjour encore Kotlin.  Si la valeur peut changer, cela doit √™tre indiqu√© explicitement avec le mot-cl√© <em>mut</em> .  Je pense que le d√©sir d'immuabilit√© am√©liore consid√©rablement la lisibilit√© et la pr√©visibilit√© du code.  Bien que l' <em>option</em> pour une raison quelconque soit modifiable, je n'ai pas compris cela, voici le code de la documentation: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> <span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> x = <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> y = x.take(); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(x, <span class="hljs-literal"><span class="hljs-literal">None</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">assert_eq!</span></span>(y, <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(<span class="hljs-number"><span class="hljs-number">2</span></span>));</code> </pre> <br><h2 id="perechisleniya">  Transferts </h2><br><p>  La rouille est appel√©e <em>enum</em> .  Ce n'est qu'en plus d'un nombre limit√© de valeurs qu'elles peuvent encore contenir des donn√©es et des m√©thodes arbitraires.  Ainsi, c'est quelque chose entre les √©num√©rations et les classes en Java.  L' <em>option d'√©num√©ration</em> standard dans mon premier exemple appartient juste √† ce type: </p><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">enum</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Option</span></span></span></span>&lt;T&gt; { <span class="hljs-literal"><span class="hljs-literal">None</span></span>, <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(T), }</code> </pre> <br><p>  Il existe une construction sp√©ciale pour traiter ces valeurs: </p><br><pre> <code class="rust hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> a = <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> a { <span class="hljs-literal"><span class="hljs-literal">None</span></span> =&gt; <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"empty"</span></span>), <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(v) =&gt; <span class="hljs-built_in"><span class="hljs-built_in">println!</span></span>(<span class="hljs-string"><span class="hljs-string">"{}"</span></span>, v) } }</code> </pre> <br><h2 id="a-takzhe">  Aussi </h2><br><p>  Je n'ai pas l'intention d'√©crire un manuel sur Rust, mais je veux simplement souligner ses caract√©ristiques.  Dans cette section, je d√©crirai ce qui est utile, mais, √† mon avis, pas si unique: </p><br><ul><li>  Les fans de programmation fonctionnelle ne seront pas d√©√ßus, il y a des lambdas pour eux.  L'it√©rateur a des m√©thodes pour traiter la collection, par exemple, <em>filter</em> et <em>for_each</em> .  Quelque chose comme les flux Java. </li><li>  La construction de <em>correspondance</em> peut √©galement √™tre utilis√©e pour des choses plus complexes que l' <em>√©num√©ration</em> r√©guli√®re, par exemple, pour le traitement de mod√®les. </li><li>  Il existe un grand nombre de classes int√©gr√©es, par exemple, des collections: <em>Vec, LinkedList, HashMap</em> , etc. </li><li>  Vous pouvez cr√©er des macros </li><li>  Il est possible d'ajouter des m√©thodes aux classes existantes </li><li>  Inf√©rence de type automatique prise en charge </li><li>  Avec le langage vient un cadre de test standard </li><li>  L'utilitaire de <em>chargement</em> int√©gr√© est utilis√© pour cr√©er et g√©rer les d√©pendances </li></ul><br><h1 id="lozhki-degtya">  Voler dans la pommade </h1><br><p>  Cette section est n√©cessaire pour compl√©ter l'image. </p><br><h2 id="killer-problem">  Probl√®me tueur </h2><br><p>  L'inconv√©nient principal vient de la caract√©ristique principale.  Vous devez tout payer.  Dans Rust, il est tr√®s g√™nant de travailler avec des structures de donn√©es de graphe modifiables, car  tout objet ne doit pas avoir plus d'un lien.  Pour contourner cette limitation, il existe un tas de classes int√©gr√©es: </p><br><ul><li>  <em>Box</em> - une valeur immuable sur le tas, un analogue des wrappers pour les primitives en Java </li><li>  <em>Cellule</em> - valeur variable </li><li>  <em>RefCell</em> - valeur variable accessible par r√©f√©rence </li><li>  <em>Rc</em> - compteur de r√©f√©rences, pour plusieurs r√©f√©rences √† un objet </li></ul><br><p>  Et ceci est une liste incompl√®te.  Pour le premier √©chantillon de Rust, j'ai imprudemment d√©cid√© d'√©crire une liste li√©e individuellement avec des m√©thodes de base.  En fin de compte, le lien vers le n≈ìud a <em>abouti √† l'option &lt;Rc &lt;RefCell &lt;ListNode&gt; &gt;&gt; suivante</em> : </p><br><ul><li>  <em>Option</em> - pour traiter un lien vide </li><li>  <em>Rc</em> - pour plusieurs liens, comme  le dernier n≈ìud est r√©f√©renc√© par le n≈ìud pr√©c√©dent et la feuille elle-m√™me </li><li>  <em>RefCell</em> - pour lien mutable </li><li>  <em>ListNode</em> - l'√©l√©ment suivant lui-m√™me </li></ul><br><p>  Il semble moyen, un total de trois enveloppes autour d'un objet.  Le code pour simplement ajouter un √©l√©ment √† la fin de la liste est tr√®s lourd, et il contient des √©l√©ments non √©vidents, tels que le clonage et l'emprunt: </p><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ListNode</span></span></span></span> { val: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>, next: Node, } <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LinkedList</span></span></span></span> { root: Node, last: Node, } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Node</span></span></span></span> = <span class="hljs-built_in"><span class="hljs-built_in">Option</span></span>&lt;Rc&lt;RefCell&lt;ListNode&gt;&gt;&gt;; <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> LinkedList { <span class="hljs-keyword"><span class="hljs-keyword">pub</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">mut</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>, val: <span class="hljs-built_in"><span class="hljs-built_in">i32</span></span>) -&gt; LinkedList { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> n = Rc::new(RefCell::new(ListNode { val: val, next: <span class="hljs-literal"><span class="hljs-literal">None</span></span> })); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.root.is_none()){ <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.root = <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(n.clone()); } <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.last.map(|v| { v.borrow_mut().next = <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(n.clone()) }); <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.last = <span class="hljs-literal"><span class="hljs-literal">Some</span></span>(n); <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> } ...</code> </pre> <br><p>  Sur Kotlin, la m√™me chose semble beaucoup plus simple: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(value: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> newNode = ListNode(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, value); root = root ?: newNode; last?.next = newNode last = newNode; }</code> </pre> <br><p>  Comme je l'ai d√©couvert plus tard, de telles structures ne sont pas typiques de Rust, et mon code est compl√®tement non idiomatique.  Les gens √©crivent m√™me des articles entiers: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">10 fa√ßons de faire une liste √† Rust</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Une autre fa√ßon</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tourment semblable au mien</a> </li></ul><br><p>  Ici, Rust sacrifie la lisibilit√© pour la s√©curit√©.  De plus, de tels exercices peuvent toujours conduire √† des liens en boucle qui se bloquent en m√©moire, car  aucun ramasse-miettes ne les enl√®vera.  Je n‚Äôai pas √©crit de code de travail dans Rust, donc j‚Äôai du mal √† dire √† quel point de telles difficult√©s compliquent la vie.  Il serait int√©ressant de recevoir les commentaires des ing√©nieurs en exercice. </p><br><h2 id="slozhnost-izucheniya">  Difficult√© d'apprentissage </h2><br><p>  Le long processus d'apprentissage de Rust d√©coule en grande partie de la section pr√©c√©dente.  Avant d'√©crire quoi que ce soit, vous devez passer du temps √† ma√Ætriser le concept cl√© de la propri√©t√© de la m√©moire, comme  il impr√®gne chaque ligne.  Par exemple, la liste la plus simple m'a pris quelques soir√©es, alors que sur Kotlin la m√™me chose est √©crite en 10 minutes, bien que ce ne soit pas ma langue de travail.  De plus, de nombreuses approches famili√®res de l'√©criture d'algorithmes ou de structures de donn√©es dans Rust seront diff√©rentes ou ne fonctionneront pas du tout.  C'est-√†-dire  lors du passage √† celui-ci, une restructuration plus profonde de la pens√©e sera n√©cessaire, il ne suffit pas de ma√Ætriser la syntaxe.  C'est loin de JavaScript, qui avale et endure tout.  Je pense que Rust ne sera jamais la langue que les enfants apprennent dans une √©cole de programmation.  M√™me C / C ++ a plus de chances dans ce sens. </p><br><h1 id="v-itoge">  En fin de compte </h1><br><p>  J'ai trouv√© l'id√©e de g√©rer la m√©moire au stade de la compilation tr√®s int√©ressante.  En C / C ++, je n'ai aucune exp√©rience, donc je ne comparerai pas avec un pointeur intelligent.  La syntaxe est g√©n√©ralement agr√©able et il n'y a rien de superflu.  J'ai critiqu√© Rust pour la complexit√© de la mise en ≈ìuvre de structures de donn√©es graphiques, mais je soup√ßonne que c'est une caract√©ristique de tous les langages de programmation non GC.  Peut-√™tre que la comparaison avec Kotlin n'√©tait pas enti√®rement honn√™te. </p><br><h1 id="todo">  Todo </h1><br><p>  Dans cet article, je n'ai pas du tout abord√© le multithreading, je pense que c'est un grand sujet √† part.  Il est toujours pr√©vu d'√©crire une sorte de structure de donn√©es ou d'algorithme plus compliqu√© que la liste, si vous avez des id√©es, partagez-les dans les commentaires.  Il serait int√©ressant de savoir quels types d'applications sont g√©n√©ralement √©crits en rouille. </p><br><h1 id="pochitat">  Lisez </h1><br><p>  Si vous √™tes int√©ress√© par Rust, voici quelques liens: </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Programmation de Rust: d√©veloppement rapide et s√ªr de syst√®mes</a> - un bon livre, il existe √©galement une version √©lectronique </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Documentation Rust</a> - documentation officielle, il y a des exemples </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Code rouille idiomatique</a> - liste des articles </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ruRust / easy</a> et <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ruRust / general</a> - cha√Ænes dans Gitter </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r / rouille /</a> - Reddit </li></ul><br><p>  <strong>UPD: Merci √† tous pour vos commentaires.</strong>  <strong>J'ai appris beaucoup de choses utiles par moi-m√™me.</strong>  <strong>Corrections d'inexactitudes et de fautes de frappe, ajout de liens.</strong>  <strong>Je pense que de telles discussions contribuent grandement √† l'√©tude des nouvelles technologies.</strong> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr433302/">https://habr.com/ru/post/fr433302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr433292/index.html">Le condens√© de mat√©riaux int√©ressants pour le d√©veloppeur mobile # 279 (du 10 au 16 d√©cembre)</a></li>
<li><a href="../fr433294/index.html">Quelques recommandations de travail d'√©quipe simples</a></li>
<li><a href="../fr433296/index.html">Gestion financi√®re dans une entreprise informatique</a></li>
<li><a href="../fr433298/index.html">Network Digest: 17 documents d'experts sur le Wi-Fi et la 5G</a></li>
<li><a href="../fr433300/index.html">Cr√©ation d'un centre multim√©dia √† domicile. Prologue</a></li>
<li><a href="../fr433304/index.html">Test de charge avec criquet. 3e partie</a></li>
<li><a href="../fr433306/index.html">Visual studio 2019</a></li>
<li><a href="../fr433308/index.html">Transfert de la configuration PBX vers le service 3CX PBX Express</a></li>
<li><a href="../fr433316/index.html">Design digest: int√©gration, feedback, recherche d'id√©es et prise de d√©cision</a></li>
<li><a href="../fr433318/index.html">garbage.collect ()</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>