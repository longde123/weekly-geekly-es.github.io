<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üñ≤Ô∏è üéá üçâ WiFi Abluftventilator-Controller üë©üèæ‚Äçüè´ ü§ï ü§πüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Fast zwei Jahre sind seit der Herstellung des Feuchtigkeitsreglers f√ºr das Badezimmer vergangen . W√§hrend dieser ganzen Zeit diente der Controller tre...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>WiFi Abluftventilator-Controller</h1><div class="post__body post__body_full">
      <div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/389751/"><img src="https://habrastorage.org/getpro/geektimes/post_images/3a1/a88/611/3a1a8861166cf7da5704db22042179b4.jpg" alt="Bild" width="50%" height="50%"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Fast zwei Jahre sind seit der Herstellung </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">des Feuchtigkeitsreglers f√ºr das Badezimmer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vergangen </font><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">W√§hrend dieser ganzen Zeit diente der Controller treu, ohne St√∂rungen und Einfrieren, wie es sich f√ºr ein gutes Ger√§t geh√∂rt, und bekam sogar eine glamour√∂se handgefertigte H√ºlle mit der leichten Hand meiner Frau.</font></font><br>
<a name="habracut"></a><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/c86/ff9/d8d/c86ff9d8d569c42c9d7cf7569b012272.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Aber der technologische Fortschritt schreitet unaufhaltsam voran und neue Trends verfolgten mich erneut. </font><font style="vertical-align: inherit;">Ich habe lange die Idee gepflegt, das Konzept eines Smart Home auf WiFi-Modulen ESP8266 umzusetzen. </font><font style="vertical-align: inherit;">Er experimentierte einige Zeit mit diesen Modulen und beschloss nun, sein ‚ÄûSmart Home‚Äú auf sie zu √ºbertragen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Hauptziel des Projekts war die Implementierung neuer Funktionen, die ich in Zukunft auf anderen Ger√§ten verwenden werde. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Was bringt mir das Upgrade des L√ºftercontrollers auf dem ESP8266?</font></font><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neue Funktionen</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Zeigen Sie alle WiFi-Anzeigen von einem Computer / Tablet / Telefon aus an.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verarbeitung zus√§tzlicher Parameter - Betriebszeit des L√ºfters und Brenndauer der Lampe im Bad.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WiFi-L√ºftersteuerung von Computer / Tablet / Telefon.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einrichten des Controllers √ºber WLAN mit Speichern von Werten im nichtfl√ºchtigen Speicher.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regelm√§√üige Aufzeichnung der Werte aller Indikatoren auf einem Server im Internet.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nun, da es immer noch das Internet gibt, wird die Zeit mit Synchronisation √ºber das NTP-Protokoll angezeigt.</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
All diese Funktionen erm√∂glichen es, den Betrieb der Steuerung zu analysieren und in Zukunft die Parameter des Steueralgorithmus zu optimieren. </font><font style="vertical-align: inherit;">Nun, dieser Controller wird in das allgemeine System eines Smart Homes integriert und √ºberwacht die Umgebungsparameter des Badezimmers. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0aa/4eb/9af/0aa4eb9aff0949f62d03278d63b78888.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Schema hat sich gegen√ºber der vorherigen Version nicht wesentlich ge√§ndert:</font></font><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Atmega328 ersetzt durch ESP8266</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Sieben-Segment-Anzeige ersetzte das fertige Anzeigemodul durch TN1637</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Triac mit einem Optokoppler wird durch ein Halbleiterrelais ersetzt (das gleiche, aber in dem Fall). </font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Hauptunterschiede im Steuerungsprogramm.</font></font><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Liste der Komponenten</font></font></h4><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ESP8266 ESP07-Modul mit Adapterplatine ~ $ 2.3 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vierstellige Sieben-Segment-Anzeige auf dem TM1637-Chip mit I2C-Verbindung ~ $ 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Halbleiterrelais OMRON G3MB-202P ~ $ 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Stromversorgung 220V / 3,3V 600mA ~ $ 2,2 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Temperatur- und Feuchtigkeitssensor (geringe Genauigkeit, aber ausreichend f√ºr meine Aufgaben) DHT11 ~ $ 0.7 </font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Instrumentenkoffer 110x73x34 ~ $ 1</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fotowiderstand, nur Widerst√§nde, Steckbrett und Dr√§hte</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Insgesamt ca. 9 USD </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Alle Teile au√üer dem Geh√§use und dem Netzteil wurden auf aliexpress.com gekauft. </font><font style="vertical-align: inherit;">Ich bestelle Koffer und Netzteile zu vern√ºnftigen Preisen bei taobao.com</font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/5c1/97c/326/5c197c32676bae632c6c787660684342.jpg" alt="Bild"><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Controller-Baugruppe</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Dieser Controller ist ein Prototyp f√ºr zuk√ºnftige Ger√§te des ESP8266, daher wurde die Installation auf einem Steckbrett durchgef√ºhrt. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0f4/7e5/506/0f47e5506e9cb91f6fd3f81687b7c9db.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich mache einen Lichtfilter unter dem Indikator aus einer Ordnerecke f√ºr Papiere, die ich in einem Schreibwarengesch√§ft gekauft habe. Ein transparentes Fenster f√ºr den Fotowiderstand - ein Schutzfilm, der von einem Telefon √ºbrig geblieben ist (ich habe ihn einmal mit einem Rand bestellt, jetzt liegt er herum). </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/eb6/241/e2d/eb6241e2d359c96633d1a1ab43ed5435.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Und dies ist mein alter Controller, der zwei Jahre im Badezimmer gearbeitet hat. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0ed/70f/3dd/0ed70f3dd2b9ecb5c0bc5211d99cee9a.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Beim Debuggen wurde ein technologischer Defekt festgestellt - die Fotodiode hinter dem Fenster im Geh√§use erhielt zu wenig Licht und ohne Verst√§rker funktionierte es nicht, als die Lampe im Badezimmer gez√ºndet wurde. Ich musste sie in Richtung der Lampe herausbringen. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/7dc/b61/e7e/7dcb61e7ec707b9669015f42bb828b5a.jpg" alt="Bild"><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/4be/f32/079/4bef32079eac0bf243f9310fbd7f7646.jpg" alt="Bild"><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Jetzt werde ich Ihnen die Funktionen des Programms, die Steuerungsalgorithmen und die Einstellungen dieses Controllers erl√§utern.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
ESP8266 verf√ºgt im Gegensatz zu Atmega328, auf dem die vorherige Version implementiert wurde, √ºber viel mehr Speicher (RAM, ROM. EEPROM), wodurch Sie zusammen mit dem integrierten WiFi die Funktionen des integrierten WEB-Servers implementieren k√∂nnen, ohne Speicher f√ºr Textzeichenfolgen zu sparen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Mit dem GPIO ist der ESP8266 jedoch ziemlich schlecht, weshalb ein Luxus wie die Verwaltung eines Sieben-Segment-Indikators f√ºr ihn nicht direkt zug√§nglich ist. </font><font style="vertical-align: inherit;">Daher wurde die Anzeige auf dem TM1637-Chip ausgew√§hlt, f√ºr deren Anschluss nur zwei Ausg√§nge erforderlich sind.</font></font><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Entwicklungsumgebung</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich habe genug mit verschiedenen ESP8266-Firmwares gespielt, die es mir erm√∂glichen, Programme auf den eingebauten Interpreten LUA, JC zu schreiben und im Allgemeinen √ºber WEB zu programmieren. Ich habe versucht, auf ein SDK zu schreiben. Er entschied sich f√ºr eine Kompromissoption - die Programmierung in der Arduino IDE. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine ziemlich einfache Installation, Programmierung und eine gro√üe Anzahl vorgefertigter Bibliotheken, die gr√∂√ütenteils auf dem ESP funktionieren. Diese Umgebung erm√∂glichte die Verwendung vieler alter Codes, die die grundlegende Logik f√ºr den Betrieb des L√ºftersteuerungsreglers bereitstellen, die aus der vorherigen Version beibehalten wurde. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Grunds√§tzlich war es interessant, den bew√§hrten Algorithmus zu √ºbertragen, der die in der Zustands√ºbergangstabelle beschriebene endliche deterministische Zustandsmaschine implementiert: </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/0b4/084/954/0b4084954c75e341cc80122c1b48c6b9.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Arduino-Bibliotheken kamen ohne Probleme auf</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DHT f√ºr die Arbeit mit Feuchtigkeits- / Temperatursensoren von Adafruit</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">f√ºr die Arbeit mit der Anzeige am TM1637 DigitalTube</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Details zur Verwendung der Arduino IDE zum Programmieren des ESP8266 werden </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in diesem Artikel ausf√ºhrlich beschrieben.</font></font></a><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neue Funktionen implementieren</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist sehr unpraktisch, WiFi-Controller herzustellen, in denen die Netzwerkverbindungsparameter zusammengef√ºgt sind. Stellen Sie sich vor, was die √Ñnderung des Zugriffspunktnamens oder des Kennworts bewirkt, wenn ein Dutzend solcher Controller zu Hause sind. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daher implementiert dieses Programm die Funktionen zum Speichern von Verbindungsparametern im nichtfl√ºchtigen EEPROM-Speicher und deren Konfiguration √ºber das Netzwerk. Die Struktur zum Speichern sowie zum Lesen und Schreiben der Parameter ist in den Dateien WC_EEPROM.h und WC_EEPROM.cpp meines Projekts implementiert. Die √úberpr√ºfung des Lesens und Schreibens erfolgt durch Berechnen der Pr√ºfsumme der Konfiguration und Vergleichen mit der im EEPROM geschriebenen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Neben der Netzwerkkonfiguration werden auch alle Zeit√ºberschreitungen und andere Parameter des L√ºftersteuerungsalgorithmus im Speicher gespeichert, sodass dieser Controller direkt ‚Äû√ºber Funk‚Äú optimiert und eingestellt werden kann.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Anzeige der Betriebsarten, der Controller-Konfiguration sowie der direkten L√ºftersteuerung erfolgt √ºber den integrierten WEB-Server (Dateien WC_HTTP.h und WC_TTP.cpp). </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Der Algorithmus zur Konfiguration des Zugriffspunkts lautet wie folgt: </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Wenn der ESP-Schrank keine Verbindung zu dem in der EEPROM-Konfiguration angegebenen Zugriffspunkt herstellen konnte Anschlie√üend wird der Zugriffspunkt erh√∂ht und unter der Adresse 192.168.4.1 k√∂nnen Sie konfigurieren. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, wenn verbunden, funktioniert es wie gewohnt. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Hauptseite des WEB-Servers zeigt die grundlegenden Parameter des Controllers und erm√∂glicht das manuelle Ein- und Ausschalten des Controllers (analog zum Dr√ºcken der manuellen Steuertaste). </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/cf8/ebe/af6/cf8ebeaf6be714e3ef08094effc831c0.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Hier k√∂nnen Sie auch zur Netzwerkeinstellungsseite </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/798/18e/6d0/79818e6d0e5302d38efcdde24130753b.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und zur Einstellungsseite des Controller-Betriebsalgorithmus gehen</font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/b50/f14/58b/b50f1458b47bfae1545c36fd2928c9fa.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf diesen beiden Seiten k√∂nnen Sie den Controller neu starten und alle Standardeinstellungen zur√ºcksetzen. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich plane, in Zukunft Sch√∂nheit in die Benutzeroberfl√§che zu bringen, wenn sich das Konzept eines Smart Home √ºber WLAN mehr oder weniger in meinem Kopf festgesetzt hat. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Eine weitere in diesem Programm implementierte Funktion ist eine Echtzeituhr, die √ºber das NTP-Protokoll im Internet synchronisiert wird. (Dateien WC_NTP.h und WC_NTP.cpp) </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Ich werde den </font><font style="vertical-align: inherit;">Hauptalgorithmus </font><font style="vertical-align: inherit;">nicht beschreiben, die Logik der Arbeit hat gut funktioniert und bleibt gleich, </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie k√∂nnen dar√ºber im vorherigen Artikel lesen</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Wesentliche √Ñnderungen haben sich auf die Anzeige ausgewirkt. Ich m√∂chte auf eine ‚ÄûFunktion‚Äú aufmerksam machen - die DisplaySpecialChar () -Funktion, mit der Sie jedes Zeichen anzeigen k√∂nnen, das Sie sich f√ºr die Anzeige auf einem Sieben-Segment-Indikator mit einer Bitmaske vorstellen k√∂nnen. Ich habe dieses "Prozent" -Symbol in der Feuchtigkeitsanzeige </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/de2/393/0a5/de23930a598bc88b2f76712ebaa4219a.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
und das "Grad" -Symbol in der Temperaturanzeige gefunden. Die </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/62d/330/3aa/62d3303aa4f387f9a41326d0926529d2.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Bits in der Bitmaske entsprechen den Indikatorsegmenten. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nun, die letzte der neuen Funktionen ist das Speichern von Parametern auf einem Server im Internet zur Anzeige und anschlie√üenden Analyse. Die Werte f√ºr Luftfeuchtigkeit, Temperatur, einen analogen Anschluss mit einem Fotowiderstand zum Einstellen der Beleuchtungsschwelle, die Zeit des L√ºfters, die Zeit des Brennens des Lichts und die UPTIME-Zeit des Controllers seit dem letzten Neustart werden gespeichert.</font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Aufzeichnung auf dem Server erfolgt in zwei Modi. </font><font style="vertical-align: inherit;">Die Parameter werden h√§ufiger aufgezeichnet, wenn im Badezimmer ‚Äûetwas passiert‚Äú. Zu diesem Zeitpunkt ist entweder das Licht an oder der L√ºfter funktioniert. </font><font style="vertical-align: inherit;">Alle Zeit√ºberschreitungen werden √ºber die WEB-Schnittstelle konfiguriert. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Daten werden auf meinem Server im Internet gespeichert. </font><font style="vertical-align: inherit;">Die Serveradresse kann konfiguriert werden, das Aufnahmeformat ist jedoch weiterhin in das Programm eingen√§ht. </font><font style="vertical-align: inherit;">Wieder bis zu besseren Zeiten ustanivaniya Konzept))). </font><font style="vertical-align: inherit;">Jetzt werden die Parameter mit dem einfachsten PHP-Skript in einer Tabelle mit einfacher Struktur gespeichert. </font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/ead/95d/d8e/ead95dd8e903225e298e4dfa1dcbfe89.jpg" alt="Bild"><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Es ist ganz einfach, die Speichereinstellungen f√ºr dieselbe "√∂ffentliche √úberwachung" neu zu konfigurieren. </font><font style="vertical-align: inherit;">Pers√∂nlich passt dieser Server nicht zu mir mit Einschr√§nkungen hinsichtlich der H√§ufigkeit der Datenspeicherung und der Tiefe des Archivs.</font></font><br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Optimieren Sie die Controller-Einstellungen</font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach dem ‚ÄûTestbetrieb‚Äú k√∂nnen Sie feststellen, ob die Beleuchtungs- und Feuchtigkeitsschwellenwerte richtig eingestellt sind, sowie die Zeit√ºberschreitungen verschiedener Ereignisse. </font><font style="vertical-align: inherit;">In der vorherigen Implementierung habe ich die Reaktionszeit auf 20 Minuten eingestellt und mit einer Stoppuhr im Badezimmer gesessen. </font><font style="vertical-align: inherit;">Nachdem ich die Parametergrafik w√§hrend mehrerer Duschen beobachtet hatte, sah ich Folgendes:</font></font><br>
<img src="https://habrastorage.org/getpro/geektimes/post_images/25b/d3b/aed/25bd3baed056cad736524d82f429043b.jpg" alt="Bild"><br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Luftfeuchtigkeit im Winter √§ndert sich um 35-40%</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Normalisierungszeit der Luftfeuchtigkeit bei nat√ºrlicher Bel√ºftung 20-25 Minuten</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Feuchtigkeitsnormalisierungszeit mit einem Arbeitsventilator 10-12 min</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der L√ºfter verdoppelt die Effizienz der Bel√ºftung</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Auf dieser Grundlage k√∂nnen Sie die Betriebszeit des L√ºfters sicher auf 12 Minuten reduzieren, wodurch die Lebensdauer verl√§ngert und ein wenig Energie gespart wird. </font><font style="vertical-align: inherit;">Eine √§hnliche Analyse kann f√ºr andere Jahreszeiten durchgef√ºhrt werden, wenn die Luftfeuchtigkeit in der Wohnung v√∂llig anders ist. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Nach der Analyse k√∂nnen Sie nun den Zeitraum f√ºr das Schreiben von Parametern auf den Server verl√§ngern.</font></font><br>
<br>
<h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schlussfolgerungen</font></font></h4><br>
<br>
<ul>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Controller des ESP8266 ist stabil und erf√ºllt seine Funktionen.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Funktionalit√§t wurde erweitert, ist jetzt einfach zu verwalten und l√§sst sich normal in das Smart Home-System integrieren</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einige Dinge m√ºssen verbessert werden, zum Beispiel die WEB-Oberfl√§che, die Zugriffsberechtigung, der Serverteil und einige Ungenauigkeiten bei der Berechnung des L√ºfters und der Betriebsstunden. </font><font style="vertical-align: inherit;">Andere Verbesserungsw√ºnsche k√∂nnen aufgedeckt werden.</font></font></li>
<li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Pilotprojekt f√ºr Smart Home on WiFi kann als erfolgreich angesehen werden;)</font></font></li>
</ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Die Skizze kann hier heruntergeladen werden. </font><font style="vertical-align: inherit;">Ich w√§re Ihnen sehr dankbar, wenn Sie Fehler melden w√ºrden. </font></font><br>
<br>
<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Skizze des L√ºftercontrollers √ºber WLAN Die</font></font></a><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
f√ºr das Projekt aufgewendete Zeit betr√§gt zwei Tage. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
PS Ich beantworte sofort die Frage, warum es so schwierig ist. </font><font style="vertical-align: inherit;">Kann ich parallel zum Schalter oder am Timer sitzen? </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
 - Ja, das kannst du. </font><font style="vertical-align: inherit;">Aber die Einbeziehung von Timer und Licht passte nicht zu mir. </font><font style="vertical-align: inherit;">Dar√ºber hinaus ist es ein Hobby, einige Ideen umzusetzen, die in anderen Projekten verwendet werden. </font></font><br>
<br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Das Lager war wieder fehlerhaft, also die Bilder aus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">meinem Blog</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">Dort k√∂nnen </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=aue&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sie √ºber meine Entwicklungen im Smart Home sehen</font></font></a></div>
      
    </div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de389751/">https://habr.com/ru/post/de389751/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de389733/index.html">D√§nische Banker prognostizieren die Einf√ºhrung eines bedingungslosen Einkommens in Europa</a></li>
<li><a href="../de389735/index.html">Visualisierung aller Gelder und M√§rkte der Welt</a></li>
<li><a href="../de389737/index.html">"... jetzt m√ºssen wir f√ºr die Menschen weicher werden und die Fragen umfassender betrachten" - Benutzer von Read & Comment auf den Giktayms</a></li>
<li><a href="../de389739/index.html">Der Evolutionsprozess von Videoadaptern von den 80ern bis zu den 2000ern</a></li>
<li><a href="../de389749/index.html">Video Bewertung WLToys V383 - Testflug</a></li>
<li><a href="../de389755/index.html">DeLorean kehrt auf den Automarkt zur√ºck</a></li>
<li><a href="../de389759/index.html">3D gedrucktes Spielzeug f√ºr Kinder (meistens)</a></li>
<li><a href="../de389761/index.html">LG arbeitet an einer universellen Kreditkarte</a></li>
<li><a href="../de389765/index.html">Die NASA wird ein Team von 4 Personen f√ºr 30 Tage in eine Flugsimulation auf einem Asteroiden einsetzen</a></li>
<li><a href="../de389767/index.html">Fortsetzung des Artikels √ºber √Ñnderungen am MC2-Drucker, Teil 2. Kalibrierung, Verfeinerung des K√ºhlsystems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>