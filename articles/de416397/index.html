<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🤾🏽 🥘 👨🏾‍🤝‍👨🏻 Wir automatisieren UI-Tests von Android-Anwendungen mithilfe des Seitenobjektmusters 💪🏻 📼 🤲🏻</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Das Seitenobjektmuster erschien in Webtests und erwies sich dort als sehr gut. Als ich anfing, Tests für Android-Anwendungen zu automatisieren, dachte...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Wir automatisieren UI-Tests von Android-Anwendungen mithilfe des Seitenobjektmusters</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/416397/"><img src="https://habrastorage.org/webt/4_/iz/s7/4_izs7jhyvtyy6meo09cgf1ee2c.png" alt="Bild"><br><br>  Das Seitenobjektmuster erschien in Webtests und erwies sich dort als sehr gut.  Als ich anfing, Tests für Android-Anwendungen zu automatisieren, dachte ich als erstes darüber nach.  Ich suchte im Netzwerk nach Informationen, fragte meine Kollegen und fand im Prinzip keine Gründe, es nicht zu versuchen.  Ich schlage vor zu sehen, was daraus wurde. <br><a name="habracut"></a><br>  Das klassische Seitenobjekt impliziert zwei Abstraktionsebenen: Seitenelemente und Tests.  Ich hebe noch eine hervor - Geschäftslogik.  Ich stelle fest, dass die Art und Weise, wie Sie Ihr Framework erstellen, die Leichtigkeit des Schreibens von Tests in der Zukunft sowie deren Unterstützung erheblich beeinflussen wird.  Ich versuche, den Testcode so aussehen zu lassen, als wäre er ein normaler Testfall, der von einem normalen Tester geschrieben wurde.  Das heißt,  Ich fange am Ende an: <br><br><ol><li>  Ich schreibe einen schönen und klaren Testfallcode, </li><li>  Ich implementiere Methoden aus dem Testfall in der Geschäftslogikschicht. </li><li>  Ich beschreibe die Elemente, die für den Test benötigt werden. </li></ol><br>  Dieser Ansatz ist gut, weil wir nichts extra tun - das Framework baut so weit auf, wie es für die Tests erforderlich ist.  Wir können sagen, dass dies das Konzept von MVP beim Testen ist: Sie haben schnell ein Stück gemacht, und es hat bereits begonnen, Vorteile zu bringen.  Wenn Sie zuerst Tausende von Zeilen schreiben, die Seiten Ihrer Anwendung beschreiben und wie Sie mit ihnen interagieren, und nach drei Monaten beim ersten Klick aus dem Loch herauskommen und feststellen, dass Sie alles anders machen mussten, ist der größte Teil Ihrer Kreation für immer zum Scheitern verurteilt. " Staub sammeln “in den Kellern von Git ... Ein echter Tester weiß, dass es umso billiger ist, einen Fehler zu beheben, je früher er gefunden wird.  Verwenden Sie diesen Ansatz in allem - haben Sie in ein paar Stunden einen Test geschrieben, ihn ausprobiert, haben ihn nicht gemocht - haben ihn rausgeworfen, eine Lektion gelernt, sind weitergefahren. <br><br>  Die Eingabe lautet also: <br><br><ul><li>  Android-Anwendung für den Handel an der Börse; </li><li>  Java, um mit Entwicklern im selben Stack zu arbeiten; </li><li>  Grundgerüst UI Automator; </li><li>  Sie müssen einen Anmeldetest in die Anwendung schreiben. </li></ul><br><h3>  Projektvorbereitung </h3><br>  Da ich versucht habe, so viel wie möglich in den Entwicklungsprozess zu integrieren, habe ich nicht begonnen, ein neues Projekt zu erstellen.  Gemäß der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> müssen instrumentelle Tests im Ordner <code>src/androidTest/java</code> .  In meinem Fall wurde der Kollektor bereits konfiguriert. Wenn etwas nicht stimmt, lesen Sie <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">die Build-Konfiguration</a> .  Wir brauchen auch eine Entwicklungsumgebung, Android SDK, Emulator, Tools, Plattform-Tools und die notwendigen Plattformen für den Emulator.  Wenn Sie Android Studio verwenden, kann dies alles schnell über den SDK-Manager installiert werden: <br><br><img src="https://habrastorage.org/webt/fi/fg/vd/fifgvdmdiqds3uyoqitomjwsmsa.png"><br><br><h3>  Testschicht </h3><br>  Wie ich oben geschrieben habe, werden wir den Anmeldetest in der Anwendung automatisieren.  Denken Sie daran, dass der Code wie ein normaler Testfall aussehen sollte: <br><br>  <b>Voraussetzung:</b> Führen Sie die Anwendung aus. <br>  <b>Schritt 1:</b> Melden Sie sich mit dem Konto myLogin / myPassword an. <br>  <b>Schritt 2:</b> Überprüfen Sie den Namen des aktuellen Benutzers. <br>  <b>Erwartetes Ergebnis:</b> Derzeitiger Benutzer ist Ivan Ivanov. <br><br>  <i>Kleiner Haftungsausschluss: Gemäß den Best Practices des Designtests müssen Sie unter der Voraussetzung ein Konto erstellen / finden.</i>  <i>Ich habe diesen Moment der Einfachheit halber weggelassen.</i> <br><br>  Unsere Klasse wird so aussehen: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@RunWith</span></span>(AndroidJUnit4.class) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginTests</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> TestApplication myApp; <span class="hljs-meta"><span class="hljs-meta">@Before</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ myApp = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> TestApplication(); } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testLogin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ myApp.login(<span class="hljs-string"><span class="hljs-string">"myLogin"</span></span>,<span class="hljs-string"><span class="hljs-string">"myPassword"</span></span>); String currentUser = myApp.getCurrentUserName(); assertEquals(<span class="hljs-string"><span class="hljs-string">"Wrong name"</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, currentUser); } <span class="hljs-meta"><span class="hljs-meta">@After</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tearDown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ myApp.close(); } }</code> </pre> <br><h3>  Geschäftslogik </h3><br>  Der Test verwendet die <code>TestApplication()</code> -Klasse und ihre beiden Methoden: <code>login()</code> und <code>getCurrentUserName()</code> .  Außerdem benötigen Sie einen Klassenkonstruktor (der die Anwendung darin startet) und die Methode <code>close()</code> . Die Vorderseite ist klar: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TestApplication</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UiDevice device; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PageObject page; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestApplication</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String login, String password)</span></span></span><span class="hljs-function"> </span></span>{ } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCurrentUserName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ } }</code> </pre> <br>  Eine Instanz unserer Klasse hat zwei Variablen: <br><br><ul><li>  <code>device</code> , das zur Klasse <code>android.support.test.uiautomator.UiDevice</code> - über dieses interagieren wir mit unserem Gerät; </li><li>  <code>page</code> , die <code>PageObject</code> Klasse, die wir im nächsten Abschnitt erstellen werden. </li></ul><br>  Beginnen wir mit dem Konstruktor.  Erstellen Sie darin Instanzen unserer Variablen und führen Sie die Anwendung aus: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TestApplication</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Connect to device device = UiDevice.getInstance(InstrumentationRegistry.getInstrumentation()); device.pressHome(); // Get launch intent String packageName = InstrumentationRegistry.getTargetContext() .getPackageName(); Context context = InstrumentationRegistry.getContext(); Intent intent = context.getPackageManager() .getLaunchIntentForPackage(packageName) .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK); // Stat application context.startActivity(intent); // Get page objects page = new PageObject(device, packageName); }</span></span></code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Einige Tipps zum Starten der Anwendung</b> <div class="spoiler_text">  Um die zu testende Anwendung besser steuern zu können, können Sie die Erwartungen für den Start des Starters (wenn Sie den Emulator "kalt" ausführen) und die Anwendung selbst hinzufügen.  Dies wird auch in der <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Dokumentation</a> empfohlen. <br></div></div><br>  <i>Hinweis: Das Ausführen der Anwendung über <code>android.content.Context.getTargetContext()</code> ist nur geeignet, wenn sich Ihre Tests im selben Projekt wie die Anwendung selbst befinden.</i>  <i>Wenn separat, muss das Menü durchlaufen werden.</i> <br><br>  Die Geschäftslogik des Tests sind die spezifischen Schritte, die der Benutzer ausführen muss, um ein aussagekräftiges (für den Benutzer) Ergebnis zu erzielen.  Die Anmeldung mit Ihrem eigenen Ultraschall ist ein wichtiges Ergebnis.  Schritte: Klicken Sie auf die Schaltfläche "Anmelden", geben Sie den Benutzernamen in das Feld "Anmelden" ein, geben Sie das Kennwort in das Feld "Kennwort" ein und klicken Sie auf die Schaltfläche "Anmelden".  Daher ist unsere Methode mit Schritten gefüllt: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String login, String password)</span></span></span><span class="hljs-function"> </span></span>{ page.login().click(); page.loginEntry().setText(login); page.passwordEntry().setText(password); page.signIn().click(); }</code> </pre> <br>  Um den aktuellen Benutzer zu erhalten, ist alles einfacher. Rufen Sie einfach den Feldwert ab: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCurrentUserName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> page.currentUserName().getText(); } }</code> </pre> <br>  Um die Anwendung zu schließen, klicken Sie einfach auf die Schaltfläche Home: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">close</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ device.pressHome(); }</code> </pre> <br><h3>  Beschreibung der Seitenelemente </h3><br>  Das Konzept dieser Ebene besteht darin, dass sie gebrauchsfertige Elemente zurückgeben sollte (in unserem Kontext ist dies die Klasse <code>android.support.test.uiautomator.UiObject2</code> ).  Das heißt, der Verbraucher sollte sich keine Gedanken über den Zustand des Objekts machen. Wenn er zurückkehrt, können Sie sofort mit ihm interagieren: Klicken Sie auf den Text, füllen Sie ihn aus oder lesen Sie ihn.  Dies ist eine wichtige Konsequenz - in dieser Schicht werden wir die Erwartungen verwirklichen: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUiObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BySelector selector)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> device.wait(Until.findObject(selector), <span class="hljs-number"><span class="hljs-number">10000</span></span>); }</code> </pre> <br>  Die oben definierte Methode wird von der öffentlichen Schnittstelle unserer <code>PageObject</code> Klasse verwendet.  Beispiel für das Anmeldefeld: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loginEntry</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUiObject(loginEntrySelector()); }</code> </pre> <br>  Es bleibt zu bestimmen, mit welchem ​​Selektor wir das Feld finden.  Die Instanz von <code>android.support.test.uiautomator.BySelector</code> am bequemsten mit den statischen Methoden der Klasse <code>android.support.test.uiautomator.By</code> .  Ich stimmte der Entwicklung zu, dass es überall, wann immer möglich, eine eindeutige Ressourcen-ID geben wird: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> BySelector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loginEntrySelector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> By.res(packageName, <span class="hljs-string"><span class="hljs-string">"login"</span></span>); }</code> </pre> <br>  Es ist praktisch, die Benutzeroberfläche im Dienstprogramm uiautomatorviewer zu überprüfen, das im Toolpaket enthalten ist (installiert im Abschnitt Vorbereitung): <br><br><img src="https://habrastorage.org/webt/gw/yw/mv/gwywmvdmhdkyjk-orutm6xbkfja.png"><br><br>  Wählen Sie das gewünschte Element aus und sehen Sie sich im Abschnitt Knotendetails die Ressourcen-ID an.  Es besteht aus dem Namen des Pakets und der Kennung.  Wir haben den Namen des Pakets im Konstruktor der <code>TestApplication</code> Klasse erhalten und ihn beim Erstellen des <code>PageObject</code> . <br><br>  Vollständiger Code: <br><br><div class="spoiler">  <b class="spoiler_title">Klasse PageObject</b> <div class="spoiler_text"><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PageObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> UiDevice device; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String packageName; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> BySelector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loginButtonSelector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> By.res(packageName, <span class="hljs-string"><span class="hljs-string">"user_view"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> BySelector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loginEntrySelector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> By.res(packageName, <span class="hljs-string"><span class="hljs-string">"login"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> BySelector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">passwordEntrySelector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> By.res(packageName, <span class="hljs-string"><span class="hljs-string">"password"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> BySelector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signInSelector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> By.res(packageName, <span class="hljs-string"><span class="hljs-string">"btnLogin"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> BySelector </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">userNameSelector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> By.res(packageName, <span class="hljs-string"><span class="hljs-string">"user_name"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PageObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(UiDevice device, String packageName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.device = device; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.packageName = packageName; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">login</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUiObject(loginButtonSelector()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loginEntry</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUiObject(loginEntrySelector()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">passwordEntry</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUiObject(passwordEntrySelector()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">signIn</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUiObject(signInSelector()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">currentUserName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getUiObject(userNameSelector()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> UiObject2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUiObject</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(BySelector selector)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> device.wait(Until.findObject(selector), <span class="hljs-number"><span class="hljs-number">10000</span></span>); } }</code> </pre> <br></div></div><br><h3>  Ausführen von Tests </h3><br>  Das ist alles, es bleibt zu laufen.  Stellen Sie zunächst eine Verbindung zum Gerät her oder starten Sie den Emulator.  Überprüfen Sie die Verbindung mit dem Befehl <code>adb devices</code> (das Dienstprogramm adb ist Teil der Plattform-Tools): <br><br><pre> <code class="bash hljs">List of devices attached emulator-5554 device</code> </pre> <br>  Wenn Sie einen Gradle haben, dann tun Sie es <br><br><pre> <code class="bash hljs">gradlew.bat connectedAndroidTest</code> </pre> <br>  und genießen Sie, wie "Roboter injiziert werden, nicht Menschen" (c). </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de416397/">https://habr.com/ru/post/de416397/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de416381/index.html">Bericht des Club of Rome 2018, Kapitel 3.13: Philanthropie, Investition, Crowdsourcing und Blockchain</a></li>
<li><a href="../de416385/index.html">Wenn die Korrelation zu 100% herauskommt, hat sich irgendwo ein Fehler eingeschlichen: die Praktikumserfahrung bei der Rambler Group</a></li>
<li><a href="../de416387/index.html">Shrimp: Skalieren und teilen Sie HTTP-Bilder in modernem C ++ mit ImageMagic ++, SObjectizer und RESTinio</a></li>
<li><a href="../de416391/index.html">Optimierung der Platzierung virtueller Maschinen auf Servern</a></li>
<li><a href="../de416393/index.html">IIDF-Konferenz: Unternehmen sind nicht gegen Startups</a></li>
<li><a href="../de416399/index.html">Wie wir Bewertungen von mobilen Apps mithilfe von maschinellem Lernen analysiert haben</a></li>
<li><a href="../de416401/index.html">Blender: 3D-Modell eines Chips zur Verbindung mit der KiCad-Bibliothek</a></li>
<li><a href="../de416403/index.html">Fintech Digest: Angriff auf die PIR Bank, den Federal Tax Service und Steuern von der Übertragung von Karte zu Karte sowie einige Blockchain- und Kryptowährungen</a></li>
<li><a href="../de416405/index.html">Bachelor-Studiengänge in Partnerschaft mit Yandex</a></li>
<li><a href="../de416407/index.html">Verkehr von Mikrotiks Schnüffler sparen</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>