<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ü§ôüèæ üìß üöü Propre plate-forme vid√©o ou comment utiliser beaucoup de ressources informatiques. Partie 1 ‚ôëÔ∏è ‚è∞ üêÅ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sur la photo - le premier v√©lo volant √† quatre roues. Source 

 Aujourd'hui, en raison de la disponibilit√© des services n√©cessaires, publier des vid√©o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Propre plate-forme vid√©o ou comment utiliser beaucoup de ressources informatiques. Partie 1</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/436568/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/il/db/l0/ildbl0rgeufxd3tgzdstzyosr5a.jpeg" width="500"></div>  <sub>Sur la photo - le premier v√©lo volant √† quatre roues.</sub>  <sub><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Source</a></sub> <br><br>  Aujourd'hui, en raison de la disponibilit√© des services n√©cessaires, publier des vid√©os sur le r√©seau n'est pas une t√¢che difficile.  Cependant, il n'y a pas tant de documents sur la structure interne de ces syst√®mes, en particulier dans le segment de langue russe. <br><br>  Je participe depuis un certain temps √† la conception et au d√©veloppement d'une plateforme vid√©o de haute qualit√©.  Dans cet article, je veux d√©crire ces moments que j'aimerais moi-m√™me conna√Ætre au d√©but du d√©veloppement. <br><br>  L'article ne revendique pas le statut de leader, j'essaierai de d√©crire uniquement les points int√©ressants ou non √©vidents affectant le traitement et la diffusion de contenu vid√©o bas√© sur HTML5. <br>  Le mat√©riel est con√ßu pour ceux qui sont d√©j√† dans le sujet, ou est pr√™t √† rechercher une ventilation des abr√©viations, des termes et des concepts. <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">La deuxi√®me partie.</a> <br><a name="habracut"></a><br><h3>  Format </h3><br>  H264 High-profile, malgr√© sa popularit√©, il s'av√®re que cela ne fonctionne pas partout - certains navigateurs n'incluent pas son support.  Heureusement, sur les appareils modernes, presque partout o√π H264 n'est pas pris en charge, VP8 / 9 fonctionne.  VP9 est pr√©f√©rable d'utiliser, car  Je n'ai pas vu d'anciennes versions de d√©codeurs pouvant VP8, mais pas VP9 ou H264.  VP9 donne une qualit√© d'image comparable √† H264 lorsque le d√©bit binaire est ~ 30% inf√©rieur - ceci est important pour r√©duire la charge sur les canaux.  De plus, si l'utilisation du codec MPEG peut potentiellement avoir des pr√©tentions l√©gales (une histoire tr√®s compliqu√©e), alors VP9 est d'accord.  Certes, la vitesse d'encodage de VP9 est environ un ordre de grandeur inf√©rieur, par cons√©quent, plus de ressources devraient √™tre allou√©es pour son traitement. <br><br>  S'il est n√©cessaire de prendre en charge d'anciens √©quipements qui ne peuvent pas faire face √† H264 High, vous pouvez ajouter 480p H264 Main avec un d√©bit binaire inf√©rieur comme troisi√®me format. <br><br>  Hi10P est massivement pr√©f√©rable de ne pas l'utiliser en raison de la mauvaise prise en charge du d√©codage mat√©riel. <br>  Le H265 n√©cessitera √©videmment des frais de licence, ce qui n'est pas pour tout le monde. <br><br><h3>  Doux contre dur </h3><br>  Les encodeurs mat√©riels n'utilisent pas la plupart des fonctionnalit√©s avanc√©es des codecs (√©conomiser de l'espace sur les puces), donnant des fichiers encod√©s de mani√®re non optimale.  Le choix du format est limit√©, tous ne peuvent pas √™tre configur√©s avec des param√®tres d'encodage - souvent, des valeurs qui affectent vraiment le r√©sultat, il n'y a qu'un d√©bit binaire, et m√™me cela est per√ßu de mani√®re tr√®s particuli√®re.  Si tout est fait comme il se doit, sur les puces normales, vous pouvez obtenir un r√©sultat compl√®tement sain avec un lin√©aire (effet dans les sc√®nes dynamiques) et un d√©bit binaire un peu plus √©lev√©. <br><br>  Et, bien s√ªr, pour que l'encodeur mat√©riel fonctionne, vous avez besoin d'un appareil - une carte vid√©o ou un processeur avec un noyau vid√©o, que tous les serveurs n'ont pas. <br><br>  Mais ils sont rapides.  Tr√®s.  Par rapport au traitement logiciel, la vitesse peut augmenter de quelques centaines de fois, √† un niveau auquel les E / S disque peuvent ne pas √™tre suffisantes. <br><br>  Le traitement par les m√©thodes mat√©rielles d√©pend fortement du fournisseur de la solution - chaque fournisseur a son propre ensemble de biblioth√®ques et d'utilitaires pour cela, et il y a beaucoup de choix: Intel Quick Sync, NVenc, AMD VCE. <br><br>  Avec le traitement logiciel, il n'y a pas de telles restrictions, et avec un d√©bit binaire √©quivalent, le r√©sultat est meilleur.  Pour travailler avec diff√©rents formats et codecs, il y a ffmpeg;  Les ¬´apparatchiks¬ª n'ont pas ce luxe (avec des r√©serves). <br><br><h3>  Crit√®res de qualit√© vid√©o </h3><br>  Pour d√©terminer la qualit√© cible, il est plus facile de lire en bits par pixel, BPP.  Ce param√®tre est ind√©pendant de la r√©solution, de la fr√©quence d'images et de la dur√©e.  De l√†, consid√©rez d√©j√† le bitrate selon la formule <br><pre><code class="plaintext hljs">BPP * Framerate * Width * Height</code> </pre>  Les meilleures valeurs BPP sont choisies au mieux par des exp√©riences ind√©pendantes pour la vid√©o que vous pr√©voyez de traiter.  Une bonne valeur initiale pour H264 est d'environ 0,09 bps.  Pour les codecs hautes performances, tels que H265 et VP9, ‚Äã‚Äãce param√®tre peut √™tre r√©duit proportionnellement au taux de compression comparatif.  De plus, le BPP peut √™tre l√©g√®rement r√©duit pour la vid√©o haute r√©solution, comme  l'efficacit√© des codecs augmente l√©g√®rement avec la r√©solution, mais pour cette correction, vous devez prendre en compte la r√©solution de la section d'encodage (tranches, une caract√©ristique des codecs qui vous permet d'encoder de la vid√©o avec des blocs de r√©solution fractionnaire semi-ind√©pendants). <br><br>  Pour le d√©bit binaire obtenu par la formule ci-dessus, il est conseill√© de pr√©d√©terminer les valeurs maximales en fonction de la vitesse Internet attendue du client - peu de gens seront √† l'aise de regarder une vid√©o de tr√®s haute qualit√© mais constamment tamponn√©e. <br><br>  C'est pourquoi il n'est pas pratique d'utiliser les param√®tres Q des codecs (perroquets de qualit√©) - des valeurs fixes donnent un d√©bit final impr√©visible. <br><br>  maxRate est mieux fait avec une marge, car  les codecs peuvent ne pas conserver avec pr√©cision les valeurs requises, m√™me avec un codage √† deux passes. <br><br>  Pour maintenir la qualit√© des sc√®nes dynamiques, il est pr√©f√©rable d'activer le mode VBR des codecs, cependant, minRate est pr√©f√©rable de d√©finir au moins 90% du d√©bit binaire total afin que les pics de d√©bit ne conduisent pas √† des sous-ex√©cutions de tampon. <br><br>  Des utilitaires comme Intel VPA, ffprobe et Python sont utiles dans le contr√¥le de la qualit√©.  En utilisant ce dernier, il est commode de faire des comparaisons de la source et de la vid√©o convertie, de lire des m√©triques arbitraires, telles que l'√©cart moyen des pixels. <br><br>  Le calcul du PSNR et du SSIM en pratique est extr√™mement inefficace en raison des optimisations psychovisuelles, qui sont incluses dans les codecs par d√©faut.  Si vous souhaitez calculer ces m√©triques de mani√®re plus ou moins ad√©quate, vous pouvez d√©sactiver les optimisations via <pre> <code class="plaintext hljs">-tune [psnr|ssim]</code> </pre>  Cependant, le fichier final sera bien s√ªr diff√©rent de celui cr√©√© sans ces drapeaux. <br><br><h3>  Aper√ßu </h3><br>  Le principal probl√®me de la g√©n√©ration d'images miniatures est une source floue.  La d√©finition et la recherche d'images claires est une t√¢che tr√®s simple et gourmande en ressources.  Heureusement, la solution √† ce probl√®me dans la plupart des codecs est incluse dans le processus de codage vid√©o.  Vous pouvez prendre l'image cl√© la plus proche d'une certaine position; de toutes les images qui l'entourent, ce sera la plus claire.  Dans ffmpeg, cela peut √™tre fait comme ceci: <br><br><pre> <code class="plaintext hljs">-ss [] -vf \"select='eq(pict_type,PICT_TYPE_I)'\" -vsync vfr</code> </pre> <br>  Les encodeurs standard ne compressent pas de la meilleure fa√ßon, donc apr√®s avoir re√ßu l'image, il est pr√©f√©rable de la compresser avec quelque chose comme optipng - √©conomisant en moyenne 500 Ko sur les aper√ßus FHD. <br><br>  Les images haute r√©solution sont mieux r√©alis√©es entrelac√©es.  Ainsi, nous augmenterons l√©g√®rement la taille (de 5 √† 10%), mais r√©duirons s√©rieusement le temps d'affichage sur la page de chargement. <br><br>  L'article s'est d√©j√† r√©v√©l√© dense, et j'ai des doutes sur le fait que toutes les informations doivent √™tre regroup√©es dans un seul texte √©norme.  Si vous √™tes int√©ress√© √† poursuivre sur ce sujet, √©crivez dans les commentaires ou marquez dans le sondage. <br><br>  La plateforme est ferm√©e, mais vous pouvez voir son travail <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ici</a> . <br><br>  <sub>* Je n'ai aucun lien avec les auteurs des sites respectifs et je ne peux pas partager leurs points de vue et opinions.</sub>  <sub>Je ne peux pas commenter les d√©cisions concernant qui et comment l'acc√®s au code est accord√©.</sub> <br><br>  Pr√™t √† r√©pondre aux questions. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr436568/">https://habr.com/ru/post/fr436568/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr436554/index.html">Transf√©rez 30 000 lignes de code de Flow vers TypeScript</a></li>
<li><a href="../fr436556/index.html">Emplois dans une entreprise allemande - comment postuler et ne pas obtenir un refus?</a></li>
<li><a href="../fr436558/index.html">Joyeux 18e anniversaire, Wikipedia; c√©l√©brer la maturit√© d'un bon projet</a></li>
<li><a href="../fr436560/index.html">Protocoles cryptographiques pour le vote √©lectronique</a></li>
<li><a href="../fr436564/index.html">Fonctionnement de ProGuard</a></li>
<li><a href="../fr436570/index.html">Exorcisme programmeur</a></li>
<li><a href="../fr436572/index.html">Concours de projet de cybers√©curit√© Skolkovo Cybersecurity Challenge 2019</a></li>
<li><a href="../fr436578/index.html">Prix ‚Äã‚Äãde la s√©curit√© personnelle pour les administrateurs de grandes soci√©t√©s informatiques par an</a></li>
<li><a href="../fr436584/index.html">Loi sur la gestion des runets - mise en ≈ìuvre des dispositions et domaines de responsabilit√©</a></li>
<li><a href="../fr436586/index.html">JS battle: comment j'ai √©crit mon eval ()</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>