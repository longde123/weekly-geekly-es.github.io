<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>๐จ๏ธ ๐ โฌ๏ธ ูุดุฑ CEPH ุงูููุฒุนุฉ ุงูุชุฎุฒูู ูุชูุตููู ุฅูู Kubernetes ๐ง๐ผ ๐ฅ ๐ถ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ุงูุฌุฒุก 1 ูููู ุจูุดุฑ ุงูุจูุฆุฉ ููุนูู ูุน microservices. ุงูุฌุฒุก 1 ูู ุชุซุจูุช Kubernetes HA ุนูู ุงููุนุฏู ุงูุนุงุฑู (ุฏุจูุงู) 
 ูุฑุญุจุงู ุนุฒูุฒู ุงููุฑุงุก ูู ูุจุฑ! 


 ูู ููุดูุฑ ุณ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>ูุดุฑ CEPH ุงูููุฒุนุฉ ุงูุชุฎุฒูู ูุชูุตููู ุฅูู Kubernetes</h1><div class="post__body post__body_full" style=";text-align:right;direction:rtl"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/465399/" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/w-/ha/t9/w-hat9zskv2ab6vdpumzdxllw8w.png"></p><br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฒุก 1 ูููู ุจูุดุฑ ุงูุจูุฆุฉ ููุนูู ูุน microservices.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงูุฌุฒุก 1 ูู ุชุซุจูุช Kubernetes HA ุนูู ุงููุนุฏู ุงูุนุงุฑู (ุฏุจูุงู)</a> </p><br><h2 style=";text-align:right;direction:rtl">  ูุฑุญุจุงู ุนุฒูุฒู ุงููุฑุงุก ูู ูุจุฑ! </h2><br><p style=";text-align:right;direction:rtl">  ูู ููุดูุฑ ุณุงุจู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุ</a> ุชุญุฏุซุช ุนู ููููุฉ ูุดุฑ ูุฌููุนุฉ ุชุฌุงูุฒ ูุดู Kubernetes.  ูููู ุงูุญูููุฉ ูู ุฃูู ูู Kubernetes ุ ูู ุงููุฑูุญ ูุดุฑ ุชุทุจููุงุช ุนุฏููุฉ ุงูุฌูุณูุฉ ูุง ุชุญุชุงุฌ ุฅูู ุงูุญูุงุธ ุนูู ุญุงูุชูุง ุฃู ุงูุนูู ูุน ุงูุจูุงูุงุช.  ููู ูู ูุนุธู ุงูุญุงูุงุช ุ ูุญุชุงุฌ ุฅูู ุญูุธ ุงูุจูุงูุงุช ูุนุฏู ููุฏูุง ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู ุงููููุฏ. <br>  Kubernetes ูุณุชุฎุฏู ูุฌูุฏุงุช ููุฐู ุงูุฃุบุฑุงุถ.  ุนูุฏูุง ูุนูู ูุน ุญููู Kubernetes ุงูุณุญุงุจูุฉ ุ ูุง ุชูุฌุฏ ูุดุงูู ุฎุงุตุฉ.  ูุญุชุงุฌ ููุท ุฅูู ุทูุจ ูุญุฏุฉ ุงูุชุฎุฒูู ุงููุทููุจุฉ ูู Google ุฃู Amazon ุฃู ุฃู ูููุฑ ุณุญุงุจุฉ ุขุฎุฑ ุ ูุจุชูุฌูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู</a> ุ ูู ุจุชูุตูู ูุญุฏุงุช ุงูุชุฎุฒูู ุงููุณุชููุฉ ุจุงููุฑูู. <br>  ุนูุฏูุง ูุชุนุงูู ูุน ุงููุนุงุฏู ุงูุนุงุฑูุฉ ุ ุชููู ุงูุฃููุฑ ุฃูุซุฑ ุชุนููุฏูุง.  ุงูููู ุฃุฑูุฏ ุฃู ุฃุชุญุฏุซ ุนู ุฃุญุฏ ุงูุญููู ุงููุงุฆูุฉ ุนูู ุงุณุชุฎุฏุงู ceph. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูููุดูุฑ ุณุฃููู: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ููููุฉ ูุดุฑ ceph ุงูููุฒุนุฉ ุงูุชุฎุฒูู </li><li style=";text-align:right;direction:rtl">  ููููุฉ ุงุณุชุฎุฏุงู Ceph ุนูุฏ ุงูุนูู ูุน Kubernetes <a name="habracut"></a></li></ul><br><h2 style=";text-align:right;direction:rtl">  ููุฏูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฃูุฏ ุฃู ุฃูุถุญ ููู ุณุชููู ูุฐู ุงูููุงูุฉ ูููุฏุฉ.  ุฃููุงู ุ ุจุงููุณุจุฉ ูููุฑุงุก ุงูุฐูู ูุดุฑูุง ุงููุฌููุนุฉ ููููุง ูููุดูุฑุชู ุงูุฃููู ูู ุฃุฌู ุงูุงุณุชูุฑุงุฑ ูู ุจูุงุก ุจููุฉ ุงูุฎุฏูุงุช ุงููุตุบุฑุฉ.  ุซุงููุงู ุ ุจุงููุณุจุฉ ููุฃุดุฎุงุต ุงูุฐูู ูุฑุบุจูู ูู ูุญุงููุฉ ูุดุฑ ูุฌููุนุฉ ceph ุจููุฑุฏูู ูุชูููู ุฃุฏุงุฆูุง. </p><br><p style=";text-align:right;direction:rtl">  ูู ูุฐุง ุงูููุดูุฑ ุ ูู ุฃุชุทุฑู ุฅูู ููุถูุน ุชุฎุทูุท ุงููุฌููุนุงุช ูุฃู ุงุญุชูุงุฌุงุช ุ ุณุฃุชุญุฏุซ ููุท ุนู ุงููุจุงุฏุฆ ูุงูููุงููู ุงูุนุงูุฉ.  ูู ุฃุชุทุฑู ุฅูู "ุงูุชูููู" ูุงูุชูููู ุงูุนููู ุ ูููุงู ุงูุนุฏูุฏ ูู ุงูููุดูุฑุงุช ุญูู ูุฐุง ุงูููุถูุน ุ ุจูุง ูู ุฐูู ุนูู Habr.  ุณุชููู ุงูููุงูุฉ ุฐุงุช ุทุจูุนุฉ ุชูููุฏูุฉ ุฃูุซุฑ ุ ูููู ูู ุงูููุช ููุณู ุณุชุณูุญ ูู ุจุงูุญุตูู ุนูู ุญู ุนููู ููููู ุชููููู ููููุง ูุงุญุชูุงุฌุงุชู ูู ุงููุณุชูุจู. </p><br><ol style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฆูุฉ ุงููุถูููู ุ ููุงุฑุฏ ุงููุถูู ุ ุฅุตุฏุงุฑุงุช ูุธุงู ุงูุชุดุบูู ูุงูุจุฑุงูุฌ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูููู ุงููุชูุฉ Ceph</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูููู ุนูุฏ ุงููุชูุฉ ูุจู ุงูุชุซุจูุช</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุซุจูุช ceph ูุดุฑ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅูุดุงุก ูุชูุฉ ceph</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅุนุฏุงุฏ ุงูุดุจูุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุซุจูุช ุญุฒู ceph</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชุฑููุจ ูุชููุฆุฉ ุงููุฑุงูุจูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุถููุง OSD</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฑุจุท ceph ุฅูู kubernetes</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฅูุดุงุก ุชุฌูุน ุจูุงูุงุช</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎูู ุณุฑ ุงูุนููู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุดุฑ ูุฒูุฏ cbd rbd</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุฎูู ูุฆุฉ ุงูุชุฎุฒูู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">Kubernetes + ุงุฎุชุจุงุฑ ุงูุฑุจุงุท ceph</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุงุฆูุฉ ุงูููุงุฏ ุงููุณุชุฎุฏูุฉ ูู ุฅุนุฏุงุฏ ุงูููุงู</a> </li></ol><br><a name="vm"></a><br><h2 style=";text-align:right;direction:rtl">  ูุงุฆูุฉ ุงููุถูู ููุชุทูุจุงุช ุงููุธุงู </h2><br><div class="scrollable-table" style=";text-align:right;direction:rtl"><table style=";text-align:right;direction:rtl"><tbody><tr><th>  <b>ุงุณู</b> </th><th>  <b>ุนููุงู IP</b> </th><th>  <b>ุชุนููู</b> </th></tr><tr><td>  ceph01 ุงุฎุชุจุงุฑ </td><td>  10.73.88.52 </td><td>  CEPH-node01 </td></tr><tr><td>  ceph02 ุงุฎุชุจุงุฑ </td><td>  10.73.88.53 </td><td>  CEPH-node02 </td></tr><tr><td>  ceph03 ุงุฎุชุจุงุฑ </td><td>  10.73.88.54 </td><td>  CEPH-node03 </td></tr></tbody></table></div><br><p style=";text-align:right;direction:rtl">  ุนูุฏ ูุชุงุจุฉ ููุงู ุ ุฃุณุชุฎุฏู ุฃุฌูุฒุฉ ุงูุชุฑุงุถูุฉ ูุน ูุฐุง ุงูุชูููู </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/kd/-z/bd/kd-zbdwb_76g1vvvgmtojoirseo.png"></p><br><p style=";text-align:right;direction:rtl">  ูู ูููุง ูุฏูู ูุธุงู ุชุดุบูู ุฏูุจูุงู 9.5 ูุซุจุช.  ูุฐู ูู ุขูุงุช ุงุฎุชุจุงุฑ ุ ููู ูููุง ูุฑุตุงู ุ ุงูุฃูู ููุธุงู ุงูุชุดุบูู ุ ูุงูุซุงูู ููุธุงู ุงูุชุดุบูู OSD. </p><br><p style=";text-align:right;direction:rtl">  ุฃูุง ุณูู ูุดุฑ ุงููุชูุฉ ูู ุฎูุงู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ูุดุฑ ceph.  ููููู ูุดุฑ ูุฌููุนุฉ ceph ูู ุงููุถุน ุงููุฏูู ุ ูุชู ุดุฑุญ ุฌููุน ุงูุฎุทูุงุช ูู ุงููุซุงุฆู ุ ููู ุงูุบุฑุถ ูู ูุฐู ุงูููุงูุฉ ูู ูุนุฑูุฉ ูุฏู ุณุฑุนุฉ ูุดุฑ ceph ูุงูุจุฏุก ูู ุงุณุชุฎุฏุงูู ูู kubernetes. <br>  Ceph ุดุฑุงูุฉ ุฌุฏุง ููููุงุฑุฏ ุ ูุฎุงุตุฉ RAM.  ูุณุฑุนุฉ ุฌูุฏุฉ ุ ููู ุงููุณุชุญุณู ุงุณุชุฎุฏุงู ูุญุฑูุงุช ุฃูุฑุงุต SSD. </p><br><p style=";text-align:right;direction:rtl">  ููููู ูุฑุงุกุฉ ุงููุฒูุฏ ุญูู ุงููุชุทูุจุงุช ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงุฆู ceph ุงูุฑุณููุฉ.</a> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u="><br></a> </p><br><a name="ceph"></a><br><h2 style=";text-align:right;direction:rtl">  ูููู ุงููุชูุฉ Ceph </h2><br><p style=";text-align:right;direction:rtl">  <strong>MON</strong> <br>  <em>ุฌูุงุฒ ุงูุนุฑุถ ูู ุจุฑูุงูุฌ ุฎูู ูุนูู ูููุณู ุชุจุฏุฃ ููู ุงููุฌููุนุฉ.</em>  <em>ุจูุฌุฑุฏ ุฃู ูุฏููุง ุดุงุดุฉ ูุงุญุฏุฉ ุชุนูู ุนูู ุงูุฃูู ุ ูุฏููุง ูุฌููุนุฉ Ceph.</em>  <em>ุชููู ุงูุดุงุดุฉ ุจุชุฎุฒูู ูุนูููุงุช ุญูู ุตุญุฉ ูุญุงูุฉ ุงููุชูุฉ ูู ุฎูุงู ุชุจุงุฏู ุงูุจุทุงูุงุช ุงููุฎุชููุฉ ูุน ุงูุดุงุดุงุช ุงูุฃุฎุฑู.</em>  <em>ููุฌุฃ ุงูุนููุงุก ุฅูู ุงูุดุงุดุงุช ููุนุฑูุฉ ุฃู OSD ููุชุงุจุฉ / ูุฑุงุกุฉ ุงูุจูุงูุงุช ุฅููู.</em>  <em>ุนูุฏ ูุดุฑ ูุญุฏุฉ ุชุฎุฒูู ุฌุฏูุฏุฉ ุ ูุฅู ุฃูู ุดูุก ุชูุนูู ูู ุฅูุดุงุก ุฌูุงุฒ (ุฃู ุนุฏุฉ ุฃุฌูุฒุฉ).</em>  <em>ูููู ุฃู ุชุนูุด ุงููุฌููุนุฉ ุนูู ุดุงุดุฉ ูุงุญุฏุฉ ุ ููู ููุตู ุจุฅุฌุฑุงุก 3 ุฃู 5 ุดุงุดุงุช ูุชุฌูุจ ุณููุท ุงููุธุงู ุจุฃูููู ุจุณุจุจ ุณููุท ุดุงุดุฉ ูุงุญุฏุฉ.</em>  <em>ุงูุดูุก ุงูุฑุฆูุณู ูู ุฃู ุนุฏุฏ ูุฐู ูุฌุจ ุฃู ูููู ุบุฑูุจุง ูู ุฃุฌู ุชุฌูุจ ุญุงูุงุช ุงููุณุงู ุงูุฏูุงุบ.</em>  <em>ุชุนูู ุงูุดุงุดุงุช ูู ุงููุตุงุจ ุงููุงูููู ุ ูุฐูู ุฅุฐุง ุณูุท ุฃูุซุฑ ูู ูุตู ุงูุดุงุดุงุช ุ ูุณูุชู ุญุธุฑ ุงููุฌููุนุฉ ูููุน ุนุฏู ุชูุงุณู ุงูุจูุงูุงุช.</em> <br>  <strong>MGR</strong> <br>  <em>ูุนูู ุจุฑูุงูุฌ Ceph Manager ุงูุฎูู ูุน ุจุฑูุงูุฌ ุงูุฎูู ููุดุงุดุฉ ูุชูููุฑ ุชุญูู ุฅุถุงูู.</em> <em><br></em>  <em>ููุฐ ุงูุฅุตุฏุงุฑ 12.x ุ ุฃุตุจุญ ุงูุจุฑูุงูุฌ ุงูุฎูู ูู ceph-mgr ุถุฑูุฑููุง ููุชุดุบูู ุงูุนุงุฏู.</em> <em><br></em>  <em>ุฅุฐุง ูู ูุชู ุชุดุบูู ุงูุจุฑูุงูุฌ ุงูุฎูู mgr ุ ูุณุชุฑู ุชุญุฐูุฑูุง ุญูู ูุฐุง ุงูุฃูุฑ.</em> <br>  <strong>OSD (ุฌูุงุฒ ุชุฎุฒูู ุงููุงุฆูุงุช)</strong> <br>  <em>OSD ูู ูุญุฏุฉ ุชุฎุฒูู ุชุฎุฒู ุงูุจูุงูุงุช ููุณูุง ูุชุนุงูุฌ ุทูุจุงุช ุงูุนููู ูู ุฎูุงู ุชุจุงุฏู ุงูุจูุงูุงุช ูุน ุฃุฌูุฒุฉ OSD ุงูุฃุฎุฑู.</em>  <em>ูุฐุง ูู ุนุงุฏุฉ ุงููุฑุต.</em>  <em>ุนุงุฏุฉู ูุง ูููู ููู OSD ุดูุทุงู OSD ูููุตู ูููู ุชุดุบููู ุนูู ุฃู ุฌูุงุฒ ูุซุจุช ุนููู ูุฐุง ุงููุฑุต.</em> </p><br><p style=";text-align:right;direction:rtl">  ุณุชุนูู ุงูุดูุงุทูู ุงูุซูุงุซุฉ ุนูู ูู ุฌูุงุฒ ูู ูุฌููุนุชูุง.  ููููุง ูุฐูู ุ ูู ุจูุฑุงูุจุฉ ูุฅุฏุงุฑุฉ ุงูุดูุงุทูู ูุฎุฏูุฉ ูุดูุงุทูู OSD ููุญุฑู ูุงุญุฏ ูู ุงูุฌูุงุฒ ุงูุธุงูุฑู. </p><br><a name="before"></a><br><h2 style=";text-align:right;direction:rtl">  ุชูููู ุนูุฏ ุงููุชูุฉ ูุจู ุงูุชุซุจูุช </h2><br><p style=";text-align:right;direction:rtl">  ุชุญุฏุฏ ูุซุงุฆู ceph ุณูุฑ ุงูุนูู ุงูุชุงูู: </p><br><p style=";text-align:right;direction:rtl"><img src="https://habrastorage.org/webt/wz/9i/gu/wz9igu71hiezyom4zvtbxp6ye30.png"></p><br><p style=";text-align:right;direction:rtl">  ุณูู ุฃุนูู ูู ุงูุนูุฏุฉ ุงูุฃููู ูู ูุธุงู ุงุฎุชุจุงุฑ ceph01 ุ ุณูููู ูุณุคูู ุงูุนูุฏุฉ ุ ูุณูู ูุญุชูู ุฃูุถูุง ุนูู ูููุงุช ุชููุฆุฉ ููุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ูููุดุฑ ceph.  ููู ุชุนูู ุงูุฃุฏุงุฉ ุงููุณุงุนุฏุฉ ceph-ุงูุชุดุงุฑ ุจุดูู ุตุญูุญ ุ ูุฌุจ ุงููุตูู ุฅูู ุฌููุน ุนูุฏ ูุธุงู ุงููุฌููุนุฉ ุนุจุฑ ssh ุจุงุณุชุฎุฏุงู ุนูุฏุฉ ุงููุณุคูู.  ููุฑุงุญุฉ ุ ุณุฃูุชุจ ุฃุณูุงุก ุงููุถูููู ุงููุตูุฑุฉ ูููุฌููุนุฉ </p><br><pre style=";text-align:right;direction:rtl"><code class="plaintext hljs">10.73.88.52 ceph01-test 10.73.88.53 ceph02-test 10.73.88.54 ceph03-tset</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุณุฎ ุงูููุงุชูุญ ุฅูู ุงููุถูููู ุงูุขุฎุฑูู.  ุฌููุน ุงูุฃูุงูุฑ ุงูุชู ุณุฃููุฐูุง ูู ุงูุฌุฐุฑ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ssh-copy-id ceph02-test ssh-copy-id ceph03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงุฆู ุงูุฅุนุฏุงุฏ</a> </p><br><anchor>  CEPH-ูุดุฑ </anchor><br><h2 style=";text-align:right;direction:rtl">  ุชุซุจูุช ceph ูุดุฑ </h2><br><p style=";text-align:right;direction:rtl">  ุงูุฎุทูุฉ ุงูุฃููู ูู ุชุซุจูุช ูุดุฑ ceph ุนูู ุฌูุงุฒ ุงุฎุชุจุงุฑ ceph01 </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">wget -q -O- 'https://download.ceph.com/keys/release.asc' | apt-key add -</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุชุญุชุงุฌ ุฅูู ุงุฎุชูุงุฑ ุงูุฅุตุฏุงุฑ ุงูุฐู ุชุฑูุฏ ูุถุนู.  ูููู ููุง ุชูุฌุฏ ุตุนูุจุงุช ุ ูุฅู ceph ููุธุงู ุงูุชุดุบูู ุฏุจูุงู ูุฏุนู ุงูุญุฒู ุงููุถูุฆุฉ ููุท. <br>  ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุถุน ุฅุตุฏุงุฑ ุฃุญุฏุซ ุ ูุณูุชุนูู ุนููู ุงุณุชุฎุฏุงู ูุฑุขุฉ ุ ุนูู ุณุจูู ุงููุซุงู <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">https://mirror.croit.io/debian-mimic/dists/</a> </p><br><p style=";text-align:right;direction:rtl">  ุฅุถุงูุฉ ูุณุชูุฏุน ูุน ุชูููุฏ ุนูู ุฌููุน ุงูุนูุฏ ุงูุซูุงุซุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">apt install curl apt-transport-https -y curl https://mirror.croit.io/keys/release.gpg &gt; /usr/share/keyrings/croit-signing-key.gpg echo 'deb [signed-by=/usr/share/keyrings/croit-signing-key.gpg] https://mirror.croit.io/debian-mimic/ stretch main' &gt; /etc/apt/sources.list.d/croit-ceph.list apt update apt install ceph-deploy</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงูุช ุงูููุนุฉ ูุงููุฉ ุจุงููุณุจุฉ ูู ุ ูููููู ุงุณุชุฎุฏุงู ุงููุณุชูุฏุนุงุช ุงูุฑุณููุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">echo deb https://download.ceph.com/debian-luminous/ $(lsb_release -sc) main | tee /etc/apt/sources.list.d/ceph.list apt-transport-https apt update apt install ceph-deploy</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุญู ุฃูุถุง ุชุซุจูุช NTP ุนูู ุฌููุน ุงูุนูุฏ ุงูุซูุงุซุฉ. </p><br><div class="spoiler" style=";text-align:right;direction:rtl">  <b class="spoiler_title">ูุฃู ูุฐู ุงูุชูุตูุฉ ูู ูุซุงุฆู ceph</b> <div class="spoiler_text" style=";text-align:right;direction:rtl"><p style=";text-align:right;direction:rtl">  ููุตู ุจุชุซุจูุช NTP ุนูู ุงูุนูุฏ Ceph (ุฎุงุตุฉ ุนูู ุงูุนูุฏ Ceph Monitor) ูููุน ุงููุดููุงุช ุงููุงุดุฆุฉ ุนู ุณุงุนุฉ ุงูุชูููุช. <br></p></div></div><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">apt install ntp</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฃูุฏ ูู ุชูููู ุฎุฏูุฉ NTP.  ุชุฃูุฏ ูู ุฃู ูู ุนูุฏุฉ Ceph ุชุณุชุฎุฏู ููุณ ุฎุงุฏู NTP.  ุชุณุชุทูุน ุฃู ุชุฑู ุงููุฒูุฏ ูู ุงูุชูุงุตูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ููุง</a> </p><br><a name="ceph-install"></a><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุชูุฉ ceph </h2><br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุฏููู ููููุงุช ุงูุชูููู ูุงููููุงุช ูุดุฑ ceph </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">mkdir my-cluster cd my-cluster</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูููู ุจุฅูุดุงุก ุชูููู ูุชูุฉ ุฌุฏูุฏ ุ ุนูุฏ ุงูุฅูุดุงุก ุ ุฃุดุฑ ุฅูู ุฃูู ุณูููู ููุงู ุซูุงุซุฉ ุฃุฌูุฒุฉ ุนุฑุถ ูู ูุธุงููุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy new ceph01-test ceph02-test ceph03-test</code> </pre> <br><a name="ceph-network"></a><br><h2 style=";text-align:right;direction:rtl">  ุฅุนุฏุงุฏ ุงูุดุจูุฉ </h2><br><p style=";text-align:right;direction:rtl">  ุงูููุทุฉ ุงููููุฉ ุงูุขู ุ ููุฏ ุญุงู ุงูููุช ููุญุฏูุซ ุนู ุดุจูุฉ ceph.  ูุณุชุฎุฏู Ceph ุดุจูุชูู ุนุงูุชูู ูุดุจูุฉ ูุชูุฉ ููุนูู <br><img src="https://habrastorage.org/webt/jz/dp/wz/jzdpwzxrzpdqr7k9v4u53hmc05s.png"></p><br><p style=";text-align:right;direction:rtl">  ููุง ุชุฑูู ูู ูุฎุทุท ุงูุดุจูุฉ ุงูุนุงูุฉ ุ ูุฐุง ูู ูุณุชูู ุงููุณุชุฎุฏู ูุงูุชุทุจูู ุ ูุดุจูุฉ ุงููุชูุฉ ูู ุงูุดุจูุฉ ุงูุชู ูุชู ูู ุฎูุงููุง ูุณุฎ ุงูุจูุงูุงุช. <br>  ูู ุงููุฑุบูุจ ููู ููุบุงูุฉ ูุตู ูุงุชูู ุงูุดุจูุชูู ุนู ุจุนุถูุง ุงูุจุนุถ.  ุฃูุถุง ุ ุดุจูุฉ ุงููุชูุฉ ุณุฑุนุฉ ุงูุดุจูุฉ ูุฑุบูุจ ููู ุนูู ุงูุฃูู 10 ุฌูุฌุงุจุงูุช. <br>  ุจุงูุทุจุน ุ ููููู ุงูุงุญุชูุงุธ ุจูู ุดูุก ุนูู ููุณ ุงูุดุจูุฉ.  ูููู ูุฐุง ูุญููู ุจุญูููุฉ ุฃูู ุจูุฌุฑุฏ ุฒูุงุฏุฉ ุญุฌู ุงููุณุฎ ุงููุชูุงุซู ุจูู OSDs ุ ุนูู ุณุจูู ุงููุซุงู ุ ุนูุฏูุง ุชุณูุท ุฃู ุชุถุงู OSDs ุฌุฏูุฏุฉ (ุงูุฃูุฑุงุต) ุ ุณูุฒุฏุงุฏ ุงูุชุญููู ุนูู ุงูุดุจูุฉ.  ูุจุงูุชุงูู ูุฅู ุณุฑุนุฉ ูุงุณุชูุฑุงุฑ ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุฎุงุตุฉ ุจู ุชุนุชูุฏ ุฅูู ุญุฏ ูุจูุฑ ุนูู ุงูุดุจูุฉ ุงููุณุชุฎุฏูุฉ ุจูุงุณุทุฉ ceph. <br>  ูุณูุก ุงูุญุธ ุ ููุณ ูุฏู ูุฌููุนุฉ ุงููุญุงูุงุฉ ุงูุงูุชุฑุงุถูุฉ ุดุจูุฉ ูููุตูุฉ ุ ูุณูู ุฃุณุชุฎุฏู ุดุฑูุญุฉ ุดุจูุฉ ูุดุชุฑูุฉ. <br>  ูุชู ุชูููู ุงูุดุจูุฉ ูููุชูุฉ ูู ุฎูุงู ููู ุงูุชูููู ุ ุงูุฐู ุฃูุดุฃูุงู ุจุงูุฃูุฑ ุงูุณุงุจู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">/my-cluster# cat ceph.conf [global] fsid = 2e0d92b0-e803-475e-9060-0871b63b6e7f mon_initial_members = ceph01-test, ceph02-test, ceph03-test mon_host = 10.73.88.52,10.73.88.53,10.73.88.54 auth_cluster_required = cephx auth_service_required = cephx auth_client_required = cephx</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุง ูููููุง ุฃู ูุฑู ุ ูุฅู cef ูุดุฑ ูู ููุดุฆ ุฅุนุฏุงุฏุงุช ุงูุดุจูุฉ ุงูุงูุชุฑุงุถูุฉ ุจุงููุณุจุฉ ููุง ุ ูุฐูู ุณุฃุถูู ูุนููุฉ ุงูุดุจูุฉ ุงูุนุงูุฉ = {public-network / netmask} ุฅูู ุงููุณู ุงูุนุงู ูู ุงูุชููุฆุฉ.  ุดุจูุชู ูู 10.73.0.0/16 ุ ูุฐูู ุจุนุฏ ุฅุถุงูุฉ ุงูุชูููู ุงูุฎุงุต ุจู ุณูุจุฏู ููุฐุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">[global] fsid = 2e0d92b0-e803-475e-9060-0871b63b6e7f mon_initial_members = ceph01-test, ceph02-test, ceph03-test mon_host = 10.73.88.52,10.73.88.53,10.73.88.54 public network = 10.73.0.0/16 auth_cluster_required = cephx auth_service_required = cephx auth_client_required = cephx</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ููุช ุชุฑุบุจ ูู ูุตู ุดุจูุฉ ุงููุชูุฉ ุนู ุนุงูุฉ ุ ูุฃุถู ุดุจูุฉ ูุชูุฉ ุงููุนููุฉ = {cluster-network / netmask} <br>  ููููู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุฑุงุกุฉ</a> ุงููุฒูุฏ ุนู ุงูุดุจูุงุช <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ุงููุซุงุฆู.</a> </p><br><a name="ceph-pack"></a><br><h2 style=";text-align:right;direction:rtl">  ุชุซุจูุช ุญุฒู ceph </h2><br><p style=";text-align:right;direction:rtl">  ุจุงุณุชุฎุฏุงู ceph-publish ุ ูููู ุจุชุซุจูุช ุฌููุน ุญุฒู ceph ุงูุชู ูุญุชุงุฌูุง ุนูู ุงูุนูุฏ ุงูุซูุงุซ ูุฏููุง. <br>  ููููุงู ุจุฐูู ุ ูู ุงุฎุชุจุงุฑ ceph01 ุ ุชูููุฐ <br>  ุฅุฐุง ูุงู ุงูุฅุตุฏุงุฑ ูู ุชูููุฏ ุฐูู ุงูุญูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy install --release mimic ceph01-test ceph02-test ceph03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ุงูุฅุตุฏุงุฑ ูุถูุฆูุง ุฅุฐู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy install --release luminous ceph01-test ceph02-test ceph03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุงูุชุธุฑ ุญุชู ูุชู ุชุฃุณูุณ ูู ุดูุก. </p><br><a name="ceph-mon"></a><br><h2 style=";text-align:right;direction:rtl">  ุชุฑููุจ ูุชููุฆุฉ ุงููุฑุงูุจูู </h2><br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุชุซุจูุช ุฌููุน ุงูุญุฒู ุ ุณูููู ุจุฅูุดุงุก ูุจุฏุก ุชุดุบูู ุดุงุดุงุช ูุธุงููุง. <br>  ุงุฎุชุจุงุฑ C ceph01 ุงูููุงู ุจูุง ููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy mon create-initial</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูุชู ุฅูุดุงุก ุงูุดุงุดุงุช ูู ูุฐู ุงูุนูููุฉ ุ ูุณูุชู ุฅุทูุงู ุงูุดูุงุทูู ุ ูุณูู ูุชุญูู ูุดุฑ ceph ูู ุงููุตุงุจ ุงููุงูููู. <br>  ุงูุขู ูุจุนุซุฑ ุงูุชููููุงุช ุนูู ุนูุฏ ุงููุชูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy admin ceph01-test ceph02-test ceph03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชุญูู ูู ุญุงูุฉ ูุฌููุนุชูุง ุ ุฅุฐุง ูุนูุช ูู ุดูุก ุจุดูู ุตุญูุญ ุ ูููุจุบู ุฃู ุชููู ุงูุญุงูุฉ <br>  HEALTH_OK </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">~/my-cluster# ceph status cluster: id: 2e0d92b0-e803-475e-9060-0871b63b6e7f health: HEALTH_OK services: mon: 3 daemons, quorum ceph01-test,ceph02-test,ceph03-test mgr: no daemons active osd: 0 osds: 0 up, 0 in data: pools: 0 pools, 0 pgs objects: 0 objects, 0 B usage: 0 B used, 0 B / 0 B avail pgs:</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุงููููุณูููุฑ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy mgr create ceph01-test ceph02-test ceph03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชุญูู ูู ุงูุญุงูุฉ ูุฑุฉ ุฃุฎุฑู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph -s</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุฃู ูุธูุฑ ุงูุฎุท </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">mgr: ceph01-test(active), standbys: ceph02-test, ceph03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููุชุจ ุงูุชูููู ูุฌููุน ุงููุถูููู ูู ุงููุชูุฉ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy admin ceph01-test ceph02-test ceph03-test</code> </pre> <br><a name="ceph-osd"></a><br><h2 style=";text-align:right;direction:rtl">  ูุถููุง OSD </h2><br><p style=";text-align:right;direction:rtl">  ูู ุงูููุช ุงูุญุงูู ุ ูุฏููุง ูุฌููุนุฉ ุนูู ุ ููููุง ูุง ุชุญุชูู ุนูู ุฃูุฑุงุต (osd ูู ูุตุทูุญุงุช ceph) ูุชุฎุฒูู ุงููุนูููุงุช. </p><br><p style=";text-align:right;direction:rtl">  ูููู ุฅุถุงูุฉ OSD ูุน ุงูุฃูุฑ ุงูุชุงูู (ุนุฑุถ ุนุงู) </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy osd create --data {device} {ceph-node}</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ููู ุงูุงุฎุชุจุงุฑ ุงูุฎุงุต ุจู ุ ูุชู ุชุฎุตูุต ุงููุฑุต / dev / sdb ุชุญุช osd ุ ูุฐูู ูู ุญุงูุชู ุณุชููู ุงูุฃูุงูุฑ ููุง ููู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph-deploy osd create --data /dev/sdb ceph01-test ceph-deploy osd create --data /dev/sdb ceph02-test ceph-deploy osd create --data /dev/sdb ceph03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญูู ูู ุฃู ุฌููุน OSDs ุชุนูู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph -s</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs"> cluster: id: 2e0d92b0-e803-475e-9060-0871b63b6e7f health: HEALTH_OK services: mon: 3 daemons, quorum ceph01-test,ceph02-test,ceph03-test mgr: ceph01-test(active) osd: 3 osds: 3 up, 3 in</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุฃูุถูุง ุชุฌุฑุจุฉ ุจุนุถ ุงูุฃูุงูุฑ ุงููููุฏุฉ ูู OSD. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph osd df ID CLASS WEIGHT REWEIGHT SIZE USE AVAIL %USE VAR PGS 0 hdd 0.00490 1.00000 5.0 GiB 1.0 GiB 4.0 GiB 20.05 1.00 0 1 hdd 0.00490 1.00000 5.0 GiB 1.0 GiB 4.0 GiB 20.05 1.00 0 2 hdd 0.00490 1.00000 5.0 GiB 1.0 GiB 4.0 GiB 20.05 1.00 0 TOTAL 15 GiB 3.0 GiB 12 GiB 20.05</code> </pre> <br><p style=";text-align:right;direction:rtl">  ู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph osd tree ID CLASS WEIGHT TYPE NAME STATUS REWEIGHT PRI-AFF -1 0.01469 root default -3 0.00490 host ceph01-test 0 hdd 0.00490 osd.0 up 1.00000 1.00000 -5 0.00490 host ceph02-test 1 hdd 0.00490 osd.1 up 1.00000 1.00000 -7 0.00490 host ceph03-test 2 hdd 0.00490 osd.2 up 1.00000 1.00000</code> </pre><br><p style=";text-align:right;direction:rtl">  ุฅุฐุง ูุงู ูู ุดูุก ุนูู ูุง ูุฑุงู ุ ุซู ูุฏููุง ูุฌููุนุฉ ceph ุงูุนุงููุฉ.  ูู ุงูุฌุฒุก ุงูุชุงูู ุ ุณุฃุญุฏุฏ ููููุฉ ุงุณุชุฎุฏุงู ceph ูุน kubernetes </p><br><a name="kubernetes"></a><br><h1 style=";text-align:right;direction:rtl">  ุฑุจุท ceph ุฅูู kubernetes </h1><br><p style=";text-align:right;direction:rtl">  ูุณูุก ุงูุญุธ ุ ูู ุฃููู ูุงุฏุฑูุง ุนูู ูุตู ุนูููุฉ ูุฌูุฏุงุช Kubernetes ุจุงูุชูุตูู ูู ูุฐู ุงูููุงูุฉ ุ ูุฐุง ุณุฃุญุงูู ุฃู ุฃุชูุงูู ูุน ููุฑุฉ ูุงุญุฏุฉ. <br>  ุชุณุชุฎุฏู Kubernetes ูุฆุงุช ุงูุชุฎุฒูู ููุนูู ูุน ูุญุฏุงุช ุชุฎุฒูู ุจูุงูุงุช ุงูุจูุงูุงุช ุ ูููู ูุฆุฉ ุชุฎุฒูู ูุฒูุฏ ุฎุงุต ุจูุง ุ ูููููู ุงุนุชุจุงุฑูุง ูููุน ูู "ุจุฑูุงูุฌ ุงูุชุดุบูู" ููุนูู ูุน ุฃุญุฌุงู ุชุฎุฒูู ุจูุงูุงุช ูุฎุชููุฉ.  ูููู ุงูุนุซูุฑ ุนูู ุงููุงุฆูุฉ ุงููุงููุฉ ุงูุชู ุชุฏุนู kubernetes ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู ุงูุฑุณููุฉ</a> . <br>  ุชุฏุนู Kubernetes ููุณูุง ุฃูุถูุง ุงูุนูู ูุน rbd ุ ููู ุตูุฑุฉ ูุณุคูู kube-controller-manager ูุง ุชุญุชูู ุนูู ุนููู rbd ูุซุจุช ุ ูุฐูู ุชุญุชุงุฌ ุฅูู ุงุณุชุฎุฏุงู ุตูุฑุฉ ูุฎุชููุฉ. <br>  ุชุฌุฏุฑ ุงูุฅุดุงุฑุฉ ุฃูุถูุง ุฅูู ุฃู ูุญุฏุงุช ุงูุชุฎุฒูู (pvc) ุงูุชู ุชู ุฅูุดุงุคูุง ูู rbd ูููู ุฃู ุชููู ReadWriteOnce (RWO) ููุท ุ ููุง ูุนูู ุฃูู ููููู ุชุญููู ูุญุฏุฉ ุงูุชุฎุฒูู ุงูุชู ุชู ุฅูุดุงุคูุง ููุท ููููุฏ ูุงุญุฏ. </p><br><p style=";text-align:right;direction:rtl">  ููู ุชุชููู ูุฌููุนุชูุง ูู ุงูุนูู ูุน ูุญุฏุงุช ุชุฎุฒูู ceph ุ ูุญุชุงุฌ ุฅูู: <br>  ูู ูุชูุฉ Ceph: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุชุฌูุน ุงูุจูุงูุงุช ูู ูุชูุฉ ceph </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุนููู ูููุชุงุญ ุงููุตูู ุฅูู ุชุฌูุน ุงูุจูุงูุงุช </li><li style=";text-align:right;direction:rtl">  ุงูุญุตูู ุนูู ุณุฑ ุงููุดุฑู ceph </li></ul><br><p style=";text-align:right;direction:rtl">  ููู ุชุชููู ูุฌููุนุชูุง ูู ุงูุนูู ูุน ูุญุฏุงุช ุชุฎุฒูู ceph ุ ูุญุชุงุฌ ุฅูู: <br>  ูู ูุชูุฉ Ceph: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุชุฌูุน ุงูุจูุงูุงุช ูู ูุชูุฉ ceph </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุนููู ูููุชุงุญ ุงููุตูู ุฅูู ุชุฌูุน ุงูุจูุงูุงุช </li><li style=";text-align:right;direction:rtl">  ุงูุญุตูู ุนูู ุณุฑ ุงููุดุฑู ceph </li></ul><br><p style=";text-align:right;direction:rtl">  ูู ูุชูุฉ Kubernetes: </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  ุฎูู ุณุฑูุฉ ุงููุดุฑู ูููุชุงุญ ุงูุนููู </li><li style=";text-align:right;direction:rtl">  ูู ุจุชุซุจูุช ูุฒูุฏ ceph rbd ุฃู ูู ุจุชุบููุฑ ุตูุฑุฉ kube-controller-manager ุฅูู ุตูุฑุฉ ุชุฏุนู rbd </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุณุฑ ูุน ููุชุงุญ ุนููู ceph </li><li style=";text-align:right;direction:rtl">  ุฅูุดุงุก ูุฆุฉ ุงูุชุฎุฒูู </li><li style=";text-align:right;direction:rtl">  ุชุซุจูุช ceph-common ุนูู ููุงุญุธุงุช ุงูุนุงูู kubernetes </li></ul><br><a name="ceph-pool"></a><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุชุฌูุน ุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ูู ูุชูุฉ ceph ุ ูู ุจุฅูุดุงุก ุชุฌูุน ููุญุฏุงุช kubernetes </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph osd pool create kube 8 8</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณุฃูุฏู ููุง ุดุฑุญูุง ุตุบูุฑูุง ุ ุงูุฃุฑูุงู 8 8 ูู ุงูููุงูุฉ ูู ุฃุฑูุงู pg ู pg.  ุชุนุชูุฏ ูุฐู ุงูููู ุนูู ุญุฌู ูุชูุฉ ceph.  ููุงู ุงูุขูุงุช ุงูุญุงุณุจุฉ ุงูุฎุงุตุฉ ุงูุชู ุชุญุณุจ ููุฏุงุฑ pg ู pgs ุ ุนูู ุณุจูู ุงููุซุงู ุ ูุณุคูู ูู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ceph</a> <br>  ุจุงุฏุฆ ุฐู ุจุฏุก ุ ุฃูุตู ุจุชุฑูู ุงูุชุฑุงุถููุง ุ ุฅุฐุง ูุงู ูููู ุฒูุงุฏุฉ ูุฐุง ุงููุจูุบ ูู ุงููุณุชูุจู (ูููู ุชุฎููุถู ููุท ูู ุฅุตุฏุงุฑ Nautilus). </p><br><a name="ceph-key"></a><br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุนููู ูุชุฌูุน ุงูุจูุงูุงุช </h2><br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุนููู ููุชุฌูุน ุงูุฌุฏูุฏ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph auth add client.kube mon 'allow r' osd 'allow rwx pool=kube'</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณูู ูุชููู ููุชุงุญูุง ููุนููู ุ ูู ุงููุณุชูุจู ุณูุญุชุงุฌู ูุฅูุดุงุก kubernetes ุณุฑู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph auth get-key client.kube AQDd5aldka5KJRAAkpWTQYUMQi+5dfGDqSyxkg==</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุงูุญุตูู ุนูู ููุชุงุญ ุงููุณุคูู </h2><br><p style=";text-align:right;direction:rtl">  ูุงูุญุตูู ุนูู ููุชุงุญ ุงููุณุคูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ceph auth get client.admin 2&gt;&amp;1 |grep "key = " |awk '{print $3'} AQAv+Itdx4DwKBAAKVhWRS3+eEPqV3Xrnlg9KA==</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ูู ูุธุงู ceph ุ ุงูุชูู ูู ุงูุนูู ูุงูุขู ูุญุชุงุฌ ุฅูู ุงูุงูุชูุงู ุฅูู ุฌูุงุฒ ููููู ุงููุตูู ุฅูู ูุธุงู kubernetes</strong> <br>  ุณุฃุนูู ูุน master01-test (10.73.71.25) ูู ุงููุชูุฉ ุงูุชู ูุดุฑุชูุง ูู ุงูููุดูุฑ ุงูุฃูู. </p><br><a name="kubernetes-secrets"></a><br><h2 style=";text-align:right;direction:rtl">  ุฎูู ุณุฑ ุงูุนููู </h2><br><p style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ููู ุจุฑูุฒ ุงูุนููู ุงูุฐู ุชููููุงู (ูุง ุชูุณ ุงุณุชุจุฏุงูู ุจุฑูุฒู ุงููููุฒ) </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">echo AQDd5aldka5KJRAAkpWTQYUMQi+5dfGDqSyxkg== &gt; /tmp/key.client</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฎูู ุณุฑ ุณูู ูุณุชุฎุฏูู ูู ุงููุณุชูุจู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl create secret generic ceph-secret --from-file=/tmp/key.client --namespace=kube-system --type=kubernetes.io/rbd</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุฅูุดุงุก ุณุฑ ุงููุดุฑู </h2><br><p style=";text-align:right;direction:rtl">  ุฅูุดุงุก ููู ุจุฑูุฒ ุงููุดุฑู (ูุง ุชูุณู ุงุณุชุจุฏุงูู ุจุฑูุฒู ุงููููุฒ) </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">echo AQAv+Itdx4DwKBAAKVhWRS3+eEPqV3Xrnlg9KA== &gt; /tmp/key.admin</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุฅูุดุงุก ุณุฑ ุงููุณุคูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl create secret generic ceph-admin-secret --from-file=/tmp/key.admin --namespace=kube-system --type=kubernetes.io/rbd</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญูู ูู ุฃู ุงูุฃุณุฑุงุฑ ูุฏ ุชู ุฅูุดุงุคูุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl get secret -n kube-system | grep ceph ceph-admin-secret kubernetes.io/rbd 1 8m31s ceph-secret kubernetes.io/rbd 1 7m32s</code> </pre> <br><a name="kubernetes-provisioner"></a><br><h2 style=";text-align:right;direction:rtl">  ุงูุทุฑููุฉ ุงูุฃููู ูุดุฑ ูุฒูุฏ ceph rbd </h2><br><p style=";text-align:right;direction:rtl">  ูููู ุจุงุณุชูุณุงุฎ ูุณุชูุฏุน kubernetes-incubator / ุงูุชุฎุฒูู ุงูุฎุงุฑุฌู ูู github ุ ููู ูุญุชูู ุนูู ูู ูุง ุชุญุชุงุฌู ูุชูููู ุตุฏุงูุงุช kubernetes ูุน ูุณุชูุฏุน ceph. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">git clone https://github.com/kubernetes-incubator/external-storage.git cd external-storage/ceph/rbd/deploy/ NAMESPACE=kube-system sed -r -i "s/namespace: [^ ]+/namespace: $NAMESPACE/g" ./rbac/clusterrolebinding.yaml ./rbac/rolebinding.yaml</code> </pre> <br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl -n $NAMESPACE apply -f ./rbac</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุงุณุชูุชุงุฌ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">clusterrole.rbac.authorization.k8s.io/rbd-provisioner created clusterrolebinding.rbac.authorization.k8s.io/rbd-provisioner created deployment.extensions/rbd-provisioner created role.rbac.authorization.k8s.io/rbd-provisioner created rolebinding.rbac.authorization.k8s.io/rbd-provisioner created serviceaccount/rbd-provisioner created</code> </pre> <br><h2 style=";text-align:right;direction:rtl">  ุงูุทุฑููุฉ ุงูุซุงููุฉ: ุงุณุชุจุฏุงู ุตูุฑุฉ kube-controller-manager </h2><br><p style=";text-align:right;direction:rtl">  ูุง ููุฌุฏ ุฃู ุฏุนู rbd ูู ุงูุตูุฑุฉ ุงูุฑุณููุฉ kube-controller-manager ุ ูุฐูู ุณูุญุชุงุฌ ุฅูู ุชุบููุฑ ุตูุฑุฉ ูุฏูุฑ-ุงูุฅุฏุงุฑุฉ. <br>  ููููุงู ุจุฐูู ุ ูู ูู ูู ูุนุงูุฌุงุช Kubernetes ุ ุชุญุชุงุฌ ุฅูู ุชุญุฑูุฑ ููู kube-controller-manager.yaml ูุงุณุชุจุฏุงู ุงูุตูุฑุฉ ุจู gcr.io/google_containers/hyperkube:v1.15.2.  ุงูุชุจู ุฅูู ุฅุตุฏุงุฑ ุงูุตูุฑุฉ ุงูุฐู ูุฌุจ ุฃู ูุชุทุงุจู ูุน ุฅุตุฏุงุฑ ูุธุงู Kubernet. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">vim /etc/kubernetes/manifests/kube-controller-manager.yaml</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุจุนุฏ ุฐูู ุ ุณุชุญุชุงุฌ ุฅูู ุฅุนุงุฏุฉ ุชุดุบูู kube-controller-manager </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">ubectl get pods -A | grep manager kube-system kube-controller-manager-master01-test 1/1 Running 0 5m54s kube-system kube-controller-manager-master02-test 1/1 Running 0 5m54s kube-system kube-controller-manager-master03-test 1/1 Running 9111 103d</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฌุจ ุชุญุฏูุซ ุงูุณููุงุช ุชููุงุฆููุง ุ ูููู ุฅุฐุง ูู ูุญุฏุซ ูุฐุง ูุณุจุจ ูุง ุ ููููู ุฅุนุงุฏุฉ ุฅูุดุงุฆูุง ูุฏูููุง ูู ุฎูุงู ุงูุญุฐู. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl delete pod -n kube-system kube-controller-manager-master01-test kubectl delete pod -n kube-system kube-controller-manager-master02-test kubectl delete pod -n kube-system kube-controller-manager-master03-test</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฃูุฏ ูู ุฃู ูู ุดูุก ุนูู ูุง ูุฑุงู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl describe pod -n kube-system kube-controller-manager-master02-test | grep Image: Image: gcr.io/google_containers/hyperkube:v1.15.2</code> </pre> <br><p style=";text-align:right;direction:rtl">  - </p><br><a name="storage-class"></a><br><h2 style=";text-align:right;direction:rtl">  ุฎูู ูุฆุฉ ุงูุชุฎุฒูู </h2><br><p style=";text-align:right;direction:rtl">  <strong>ุงูุทุฑููุฉ ุงูุฃููู - ุฅุฐุง ุงุณุชุฎุฏูุช ุงููููุฑ ceph.com/rbd</strong> <br>  ูู ุจุฅูุดุงุก ููู yaml ูุน ูุตู ููุฆุฉ ุงูุชุฎุฒูู ุงูุฎุงุตุฉ ุจูุง.  ุฃูุถูุง ุ ูููู ุชูุฒูู ุฌููุน ุงููููุงุช ุงููุณุชุฎุฏูุฉ ุฃุฏูุงู <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูู ูุณุชูุฏุน ุงูุชุฎุฒูู ุงูุฎุงุต ุจู</a> ูู ุฏููู ceph </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./storage-class.yaml kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: ceph-rbd provisioner: ceph.com/rbd parameters: monitors: 10.73.88.52:6789, 10.73.88.53:6789, 10.73.88.54:6789 pool: kube adminId: admin adminSecretNamespace: kube-system adminSecretName: ceph-admin-secret userId: kube userSecretNamespace: kube-system userSecretName: ceph-secret imageFormat: "2" imageFeatures: layering EOF</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏูุฌู ูู ูุฌููุนุชูุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl apply -f storage-class.yaml</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฃูุฏ ูู ุฃู ูู ุดูุก ุนูู ูุง ูุฑุงู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl get sc NAME PROVISIONER AGE ceph-rbd ceph.com/rbd 7s</code> </pre> <br><p style=";text-align:right;direction:rtl">  <strong>ุงูุทุฑููุฉ ุงูุซุงููุฉ - ุฅุฐุง ููุช ุชุณุชุฎุฏู ุงููููุฑ kubernetes.io/rbd</strong> <br>  ุฅูุดุงุก ูุฆุฉ ุงูุชุฎุฒูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./storage-class-hyperkube.yaml kind: StorageClass apiVersion: storage.k8s.io/v1 metadata: name: ceph-rbd provisioner: kubernetes.io/rbd allowVolumeExpansion: true parameters: monitors: 10.73.88.52:6789, 10.73.88.53:6789, 10.73.88.54:6789 pool: kube adminId: admin adminSecretNamespace: kube-system adminSecretName: ceph-admin-secret userId: kube userSecretNamespace: kube-system userSecretName: ceph-secret imageFormat: "2" imageFeatures: layering EOF</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฏูุฌู ูู ูุฌููุนุชูุง </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl apply -f storage-class-hyperkube.yaml storageclass.storage.k8s.io/ceph-rbd created</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุฃูุฏ ูู ุฃู ูู ุดูุก ุนูู ูุง ูุฑุงู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl get sc NAME PROVISIONER AGE ceph-rbd kubernetes.io/rbd 107s</code> </pre> <br><a name="test"></a><br><h2 style=";text-align:right;direction:rtl">  Kubernetes + ุงุฎุชุจุงุฑ ุงูุฑุจุงุท ceph </h2><br><p style=";text-align:right;direction:rtl">  ูุจู ุงุฎุชุจุงุฑ ceph + kubernetes ุ ูุฌุจ ุชุซุจูุช ุงูุญุฒูุฉ ceph-common ุนูู ูู ุฑูุฒ ุนูู ูู ุงููุชูุฉ. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">apt install curl apt-transport-https -y curl https://mirror.croit.io/keys/release.gpg &gt; /usr/share/keyrings/croit-signing-key.gpg echo 'deb [signed-by=/usr/share/keyrings/croit-signing-key.gpg] https://mirror.croit.io/debian-mimic/ stretch main' &gt; /etc/apt/sources.list.d/croit-ceph.list apt update apt install ceph-common</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุจุฅูุดุงุก ููู yaml PersistentVolumeClaim </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./claim.yaml kind: PersistentVolumeClaim apiVersion: v1 metadata: name: claim1 spec: accessModes: - ReadWriteOnce storageClassName: ceph-rbd resources: requests: storage: 1Gi EOF</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุชูู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl apply -f claim.yaml</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุชุญูู ูู ุฅูุดุงุก PersistentVolumeClaim. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">bectl get pvc NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE claim1 Bound pvc-d1e47825-289c-4201-acb8-033e62a3fe81 1Gi RWO ceph-rbd 44m</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูุฃูุถุง ุฎูู ุชููุงุฆูุง PersistentVolume. </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl get pv NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE pvc-d1e47825-289c-4201-acb8-033e62a3fe81 1Gi RWO Delete Bound default/claim1 ceph-rbd 37m</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุดุฆ ูุฑูุฉ ุงุฎุชุจุงุฑ ูุงุญุฏุฉ ูุถูู ูููุง pvc ุงูุฐู ุชู ุฅูุดุงุคู ูู ุฏููู / mnt.  ูู ุจุชุดุบูู ูุฐุง ุงูููู /mnt/test.txt ูุน ุงููุต "Hello World!" </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./create-file-pod.yaml kind: Pod apiVersion: v1 metadata: name: create-file-pod spec: containers: - name: test-pod image: gcr.io/google_containers/busybox:1.24 command: - "/bin/sh" args: - "-c" - "echo Hello world! &gt; /mnt/test.txt &amp;&amp; exit 0 || exit 1" volumeMounts: - name: pvc mountPath: "/mnt" restartPolicy: "Never" volumes: - name: pvc persistentVolumeClaim: claimName: claim1 EOF</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุณููุชูู ููุชุญูู ูู ุฃูู ุฃููู ูููุชู </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl apply -f create-file-pod.yaml kubectl get pods -w</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุฏุนูุง ููุชุธุฑ ุงููุถุน </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">create-file-pod 0/1 Completed 0 16s</code> </pre> <br><p style=";text-align:right;direction:rtl">  ููููู ุจุฅูุดุงุก ูุญุฏุฉ ุฃุฎุฑู ุ ููู ุจุชูุตูู ูุญุฏุฉ ุงูุชุฎุฒูู ุงูุฎุงุตุฉ ุจูุง ุจู ุจุงููุนู / mnt / test ุ ูุจุนุฏ ุฐูู ุชุฃูุฏ ูู ุฃู ุงูููู ุงูุฐู ุชู ุฅูุดุงุคู ุจูุงุณุทุฉ ุงููุฌูุฏ ุงูุฃูู ูู ููุงูู ุงูุตุญูุญ </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">cat &lt;&lt;EOF &gt;./test-pod.yaml kind: Pod apiVersion: v1 metadata: name: test-pod spec: containers: - name: test-pod image: gcr.io/google_containers/busybox:1.24 command: - "/bin/sh" args: - "-c" - "sleep 600" volumeMounts: - name: pvc mountPath: "/mnt/test" restartPolicy: "Never" volumes: - name: pvc persistentVolumeClaim: claimName: claim1 EOF</code> </pre> <br><p style=";text-align:right;direction:rtl">  ูู ุจุชุดุบูู kubectl get po -w ูุงูุชุธุฑ ุญุชู ูุชู ุชุดุบูู pod <br>  ุจุนุฏ ุฐูู ุ ุฏุนูุง ูุฐูุจ ุฅููู ููุชุญูู ูู ุฃู ูุญุฏุฉ ุงูุชุฎุฒูู ูุชุตูุฉ ูููููุง ูู ุฏููู / mnt / test </p><br><pre style=";text-align:right;direction:rtl"> <code class="plaintext hljs">kubectl exec test-pod -ti sh cat /mnt/test/test.txt Helo world!</code> </pre> <br><p style=";text-align:right;direction:rtl">  ุดูุฑุง ูู ุนูู ุงููุฑุงุกุฉ ุญุชู ุงูููุงูุฉ.  ุขุณู ููุชุฃุฎูุฑ ูู ุงููุดุฑ. <br>  ุฃูุง ูุณุชุนุฏ ููุฅุฌุงุจุฉ ุนูู ุฌููุน ุงูุฃุณุฆูุฉ ูู ุงูุฑุณุงุฆู ุงูุดุฎุตูุฉ ุฃู ูู ุงูุดุจูุงุช ุงูุงุฌุชูุงุนูุฉ ุงููุดุงุฑ ุฅูููุง ูู ููู ุงูุชุนุฑูู ุงูุฎุงุต ุจู. <br>  ูู ุงูููุดูุฑ ุงูุตุบูุฑ ุงูุชุงูู ุ ุณุฃุฎุจุฑู ุจููููุฉ ูุดุฑ ุชุฎุฒูู S3 ุงุณุชูุงุฏูุง ุฅูู ูุฌููุนุฉ ceph ุงูุชู ุชู ุฅูุดุงุคูุง ุ ุซู ููููุง ููุฎุทุฉ ุงููุงุฑุฏุฉ ูู ุงูููุดูุฑ ุงูุฃูู. </p><br><a name="book"></a><br><p style=";text-align:right;direction:rtl">  ุงูููุงุฏ ุงููุณุชุฎุฏูุฉ ูููุดุฑ </p><br><ul style=";text-align:right;direction:rtl"><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุงููุซุงุฆู ุงูุฑุณููุฉ Ceph</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุชูุฏูู ูุณุชูุฏุน Ceph ุจุงูุตูุฑ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุซุงุฆู Kubernetes ุงูุฑุณููุฉ</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ุญุงุถูุฉ kubernetes / ุงูุชุฎุฒูู ุงูุฎุงุฑุฌู</a> </li><li style=";text-align:right;direction:rtl">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=ar&amp;u=">ูุณุชูุฏุน kubernetes-ceph-percona ูุน ูููุงุช ุงูุนููุฉ</a> </li></ul></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/ar465399/">https://habr.com/ru/post/ar465399/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../ar465379/index.html">ูุฑุงูุจุฉ ูุถุฎุฉ ุงูุฃูุณูููู ูุญููุฉ ุงูุตูุน ูุงุณูููุฉ</a></li>
<li><a href="../ar465391/index.html">ุนูู ุฎุทู ุญุฑูุฉ Scala ุงูุฑูุณูุฉ. ุงูุฌุฒุก 1</a></li>
<li><a href="../ar465393/index.html">ุทุงูุฉ ุงูุจุทุงุฑูุฉ ูุฃุฌูุฒุฉ MySensors</a></li>
<li><a href="../ar465395/index.html">ูุง ูู ุงููุฑู ุงูุฑุฆูุณู ุจูู Dependency Injection ููุญุฏุฏ ุงูุฎุฏูุฉุ</a></li>
<li><a href="../ar465397/index.html">ููู ุธูุฑ ูุชุฑุฌู Nitro ุ ููุง ูุณุงุนุฏ ุงููุทูุฑูู ูู ุงูุชูุทูู ูุงูุฏุนู ุงูููู</a></li>
<li><a href="../ar465401/index.html">5 ุฃูุดุทุฉ ูุชุณุฑูุน ุญู ุงููุดููุงุช ูู ุฃู ูุฑูู ุชูููููุฌูุง ุงููุนูููุงุช</a></li>
<li><a href="../ar465403/index.html">Achtung! ูุงููุฑุงุช ุฌุฏูุฏุฉ ุนูู ุงูุทุฑูู ุฃู ุฃุญุฏุซ ุงููุนูููุงุช ุนู ุงูุฑุงุฏุงุฑุงุช ูุฃุฌูุฒุฉ ุงููุดู ุนู ุงูุฑุงุฏุงุฑ</a></li>
<li><a href="../ar465407/index.html">1. ูุธุฑุฉ ุนุงูุฉ ุนูู ููุงุชูุญ ุทุจูุฉ Extreme Enterprise</a></li>
<li><a href="../ar465409/index.html">Vue.js ุฃูุถู ุงูููุงุฑุณุงุช ูุชุทููุฑ ุงูููุจ</a></li>
<li><a href="../ar465415/index.html">ูุชุญุฏุซ ุนู DevOps ุจูุบุฉ ูููููุฉ</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>