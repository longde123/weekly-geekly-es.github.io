<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>游븽游낖 游늶 游뛊游낗 Pruebas de rendimiento del servidor en la nube con Dwarf Fortress 久쬂잺 游눬 游녤</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Dwarf Fortress es un juego legendario que simula un mundo de fantas칤a en detalle, y un jugador (en uno de los modos) puede construir y gestionar un as...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Pruebas de rendimiento del servidor en la nube con Dwarf Fortress</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/401485/">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Dwarf Fortress</a> es un juego legendario que simula un mundo de fantas칤a en detalle, y un jugador (en uno de los modos) puede construir y gestionar un asentamiento (fortaleza) de gnomos (enanos).  Ya se ha escrito lo suficiente sobre el juego, as칤 que no entrar칠 en detalles.  Es importante que, debido al gran tama침o del mundo del juego y los altos detalles de la simulaci칩n, el juego requiera bastante recursos, tanto el procesador como la memoria / cach칠.  El juego es compatible con los tres principales sistemas operativos. <br><br>  Hay un proyecto DFHack para el juego, que se dedica a la ingenier칤a inversa de las estructuras de datos del juego y le permite crear complementos y scripts en C ++, Lua o Ruby. <br><br>  Soy el autor de la aplicaci칩n y el c칩digo del servidor que lo acompa침a que implementa completamente la interfaz de usuario del juego en dispositivos iOS.  Es decir, el usuario coloca el juego original, el complemento y la aplicaci칩n, y puede jugar de forma remota desde un dispositivo m칩vil con todas las comodidades. <br><br>  El servidor se puede instalar tanto en casa como alquilado de uno de los proveedores de la nube.  Y naci칩 la idea de este estudio: en primer lugar, para averiguar cu치l de los servicios en la nube es m치s adecuado y se puede recomendar a los usuarios en primer lugar, y en segundo lugar, comparar el rendimiento del servidor utilizando algo diferente de los servidores web y utilidades especiales . <br><a name="habracut"></a><br>  Para las pruebas, se utiliz칩 la versi칩n de Dwarf Fortress / DFHack 0.43.03-r1.  Tengo una imagen p칰blica de Docker, incluido el juego en s칤 y la versi칩n m칤nima de DFHack (as칤 como el c칩digo del servidor en s칤 para el juego remoto, pero en este caso no se usa).  Se escribi칩 un script en Lua para ejecutar pruebas y enviar los resultados a un servidor web.  Tambi칠n para la automatizaci칩n, se utiliz칩 el siguiente script, especificado en los datos del usuario al configurar los servidores.  Es decir, solo necesita crear un servidor, esperar hasta que lleguen los resultados y eliminarlo. <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash fallocate -l 4G /swp ; chmod 600 /swp ; mkswap /swp ; swapon /swp ; echo '/swp none swap sw 0 0' &gt;&gt;/etc/fstab apt-get update apt-get install -fy docker.io apt install unzip wget https://github.com/mifki/dfremote-cloud-benchmark/raw/master/benchmark.lua wget http://mifki.com/a/t/gloveloved.zip unzip gloveloved.zip -d save/ docker run --name=df -dt -v $PWD/save:/df_linux/data/save -v $PWD/benchmark.lua:/df_linux/hack/scripts/benchmark.lua mifki/dfremote sleep 5 docker exec df /df_linux/dfhack-run benchmark server_name</span></span></code> </pre> <br>  Se probaron los siguientes proveedores: Digital Ocean, Amazon Lightsail, Amazon EC2, Vultr, Linode, Google Compute Engine y Macbook Pro Late 2013 2Ghz Core i7. <br><br>  Si el servicio en la nube admite la creaci칩n de un servidor con Docker con un solo clic, entonces se us칩 esta caracter칤stica; de lo contrario, se seleccion칩 la versi칩n de Ubuntu 16.04.  Por lo tanto, solo Vultr no us칩 Ubuntu, sino CentOS 7. Para los servidores con m치s de 2 GB de memoria, no se us칩 el archivo de intercambio.  Para Google Compute Engine micro y peque침o, se seleccion칩 una unidad SSD. <br><br>  Se eligieron las opciones de servidor m치s baratas, en primer lugar, porque son m치s interesantes para quienes las van a usar para el juego, y en segundo lugar, porque Dwarf Fortress todav칤a usa solo un n칰cleo de procesador para la simulaci칩n y (en la versi칩n especificada) Aplicaci칩n de 32 bits. <br><br><h3>  Pruebas </h3><br>  El proceso de jugar Dwarf Fortress consta de dos partes: la generaci칩n del mundo y la historia inicial, en la que puedes especificar el tama침o del mundo y la duraci칩n de la historia (y otros par치metros), y el proceso del juego en s칤.  Consistentemente, sin reiniciar el juego, se realizaron las siguientes pruebas: <br><br><ol><li>  Generando un mundo de un tama침o muy peque침o con una historia muy larga. </li><li>  Generando un mundo de gran tama침o con una historia corta. </li><li>  Jugabilidad  Us칩 uno de los "grupos" (cuando muchas personas juegan por turno) guarda - glovedloved (Anethadef칤ni, 254).  La elecci칩n no es tan importante, siempre que haya una fortaleza lo suficientemente grande, y nada que detenga autom치ticamente el juego no suceda durante la prueba, que dur칩 20 d칤as en el juego. </li></ol><br>  La 칰ltima prueba es m치s importante, en primer lugar, porque es el juego en s칤 mismo, por lo que sucede todo, y en segundo lugar, se ve menos afectado por el azar que la generaci칩n del mundo (en el que civilizaciones, asentamientos, paisajes, eventos y etc.) <br><br><h3>  Resultados </h3><br>  Aqu칤 est치 el horario.  Tiempo de ejecuci칩n en segundos, respectivamente, menos es mejor.  Precios mensuales en d칩lares estadounidenses. <br><br><img src="https://habrastorage.org/files/d87/d72/2de/d87d722deebd43f48670376da89c58f7.png" alt="imagen"><br><br>  Una propagaci칩n no natural en los resultados de la primera prueba es inmediatamente visible, no s칠 exactamente con qu칠 est치 conectado.  Creo, en parte con el almacenamiento en cach칠, en parte con el bajo rendimiento del servidor reci칠n creado por alguna raz칩n.  Por lo tanto, los resultados se ordenan por la 칰ltima prueba, que, como se se침al칩, es la m치s importante.  La segunda prueba tambi칠n generalmente se correlaciona con los resultados de la tercera. <br><br>  Adem치s del primer lugar esperado en el servidor EC2 c4.large, que est치 relacionado con el rendimiento optimizado tipo C4, Amazon Lightsail result칩 ser el m치s r치pido, lo que, teniendo en cuenta el precio, es una sorpresa bastante agradable.  Le sigue casi el mismo resultado del servidor y la computadora port치til de procesador 칰nico de Google.  Adem치s, el previamente desconocido Vultr, Linode, del que esperaba m치s, result칩 ser bueno.  El Premio del P칰blico es para Digital Ocean: m치s lento, pero el m치s f치cil y r치pido de usar.  Los servidores EC2 m3.medium bastante caros son sorprendentemente lentos, y los servidores GCE m치s baratos son realmente malos incluso con SSD, no obtuve el resultado de probar el servidor de tama침o micro. <br><br>  Por separado, hay que decir sobre las instancias EC2 de tipo T2.  Su caracter칤stica es que con un servidor simple recibe cr칠ditos de procesador (hasta cierto l칤mite), que se gastan bajo carga.  Al gastar pr칠stamos, el servidor se ejecuta a plena capacidad cuando se agota: el rendimiento cae al 20%.  Por un lado, es muy adecuado para nuestros prop칩sitos: las personas, especialmente desde un dispositivo m칩vil, no juegan continuamente todo el d칤a, adem치s la simulaci칩n en el juego se detiene cuando una persona hace algo en el men칰, etc., por lo que esta es una buena opci칩n para obtener Alto rendimiento por poco dinero.  Por otro lado, este es un rendimiento "falso", por lo que no inclu칤 instancias de este tipo en las pruebas para no confundir a nadie.  Por experiencia, siempre que haya pr칠stamos, son bastante r치pidos, cuando se agotan, muy lentos. <br><br>  Eso es todo </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es401485/">https://habr.com/ru/post/es401485/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es401475/index.html">Interpretaci칩n de m칰ltiples mundos y multiverso: 쯣ueden resultar ser una misma idea?</a></li>
<li><a href="../es401477/index.html">Los investigadores de IBM miden la conductividad t칠rmica a trav칠s de un contacto monoat칩mico</a></li>
<li><a href="../es401479/index.html">Vacante</a></li>
<li><a href="../es401481/index.html">10 tecnolog칤as que deber칤an estar en un tel칠fono inteligente moderno</a></li>
<li><a href="../es401483/index.html">Elementos de protecci칩n de billetes. Investigaci칩n privada</a></li>
<li><a href="../es401487/index.html">La octava generaci칩n de Intel Core permanecer치 en el proceso de fabricaci칩n de 14 nm.</a></li>
<li><a href="../es401489/index.html">Ford est치 desarrollando su propio sistema aut칩nomo de control de veh칤culos</a></li>
<li><a href="../es401491/index.html">Ingenieros japoneses han creado un polinizador quadrocopter</a></li>
<li><a href="../es401493/index.html">Los matem치ticos arrojan luz sobre una hip칩tesis minimalista</a></li>
<li><a href="../es401495/index.html">La historia de la tecnolog칤a implantable. Aud칤fonos</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>