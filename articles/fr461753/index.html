<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèÜ üñáÔ∏è üë®üèº‚Äçü§ù‚Äçüë®üèª InterSystems IRIS Global Transactions üí™üèø ü§º üõåüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="InterSystems IRIS DBMS prend en charge les curieuses structures de stockage de donn√©es - globales. En fait, ce sont des cl√©s √† plusieurs niveaux avec ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>InterSystems IRIS Global Transactions</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/461753/"><img src="https://habrastorage.org/webt/fh/h6/kb/fhh6kbibffqggpvpjk1bpabnj1w.png" alt="InterSystems IRIS et transaction" align="left">  InterSystems IRIS DBMS prend en charge les curieuses structures de stockage de donn√©es - globales.  En fait, ce sont des cl√©s √† plusieurs niveaux avec divers avantages suppl√©mentaires sous la forme de transactions, des fonctions rapides pour parcourir les arbres de donn√©es, des verrous et leur propre langage ObjectScript. <br><br>  Plus d'informations sur les globaux dans la s√©rie d'articles ¬´Globals - Swords-Masons for Data Storage¬ª: <br><br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les arbres.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Partie 1</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Les arbres.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">2e partie</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Tableaux clairsem√©s.</a>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">3e partie</a> <br><br>  Il est devenu int√©ressant pour moi de savoir comment les transactions sont mises en ≈ìuvre dans le monde, quelles sont les fonctionnalit√©s.  Apr√®s tout, il s'agit d'une structure de stockage des donn√©es compl√®tement diff√©rente de celle des tables habituelles.  Niveau beaucoup plus bas. <br><a name="habracut"></a><br>  Comme vous le savez d'apr√®s la th√©orie des bases de donn√©es relationnelles, une bonne impl√©mentation de transaction doit satisfaire aux exigences <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">ACID</a> : <br><br>  <b>A - Atomique (atomicit√©).</b>  Toutes les modifications apport√©es √† la transaction ou aucune du tout sont enregistr√©es. <br><br>  <b>C - Coh√©rence.</b>  Une fois la transaction termin√©e, l'√©tat logique de la base de donn√©es doit √™tre coh√©rent en interne.  √Ä bien des √©gards, cette exigence s'applique au programmeur, mais dans le cas des bases de donn√©es SQL, elle s'applique √©galement aux cl√©s √©trang√®res. <br><br>  <b>I - Isoler (isolement).</b>  Les transactions parall√®les ne devraient pas s‚Äôaffecter. <br><br>  <b>D - Durable.</b>  Une fois la transaction termin√©e avec succ√®s, les probl√®mes aux niveaux inf√©rieurs (panne de courant, par exemple) ne devraient pas affecter les donn√©es modifi√©es par la transaction. <br><br>  Les globaux sont des structures de donn√©es non relationnelles.  Ils ont √©t√© cr√©√©s pour un travail ultrarapide sur un mat√©riel tr√®s limit√©.  Voyons comment les transactions globales sont impl√©ment√©es √† l'aide de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">image Docker IRIS officielle</a> . <br><br>  Pour prendre en charge les transactions dans IRIS, les commandes suivantes sont utilis√©es: <a href="">TSTART</a> , <a href="">TCOMMIT</a> , <a href="">TROLLBACK</a> . <br><br><h2>  1. Atomicit√© </h2><br>  Le moyen le plus simple de v√©rifier l'atomicit√©.  V√©rification √† partir de la console de base de donn√©es. <br><br><pre><code class="bash hljs">Kill ^a TSTART Set ^a(1) = 1 Set ^a(2) = 2 Set ^a(3) = 3 TCOMMIT</code> </pre> <br>  Nous concluons ensuite: <br><br><pre> <code class="bash hljs">Write ^a(1), ‚Äú ‚Äù, ^a(2), ‚Äú ‚Äù, ^a(3)</code> </pre> <br>  Nous obtenons: <br><br><pre> <code class="bash hljs">1 2 3</code> </pre> <br>  Tout va bien.  Atomicit√© observ√©e: tous les changements sont enregistr√©s. <br><br>  Nous compliquons la t√¢che, introduisons une erreur et voyons comment la transaction est enregistr√©e, partiellement ou pas du tout. <br><br>  V√©rifions √† nouveau l'atomicit√©: <br><br><pre> <code class="bash hljs">Kill ^A TSTART Set ^a(1) = 1 Set ^a(2) = 2 Set ^a(3) = 3</code> </pre> <br>  Ensuite, arr√™tez de force le conteneur, d√©marrez et voyez. <br><br><pre> <code class="bash hljs">docker <span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> my-iris</code> </pre> <br>  Cette commande est presque √©quivalente √† une mise hors tension forc√©e, car elle envoie un signal pour arr√™ter imm√©diatement le processus SIGKILL. <br><br>  Peut-√™tre que la transaction a √©t√© partiellement enregistr√©e? <br><br><pre> <code class="bash hljs">WRITE ^a(1), ^a(2), ^a(3) ^ &lt;UNDEFINED&gt; ^a(1)</code> </pre> <br>  - Non, pas conserv√©. <br><br>  Testez la commande de restauration: <br><br><pre> <code class="bash hljs">Kill ^A TSTART Set ^a(1) = 1 Set ^a(2) = 2 Set ^a(3) = 3 TROLLBACK WRITE ^a(1), ^a(2), ^a(3) ^ &lt;UNDEFINED&gt; ^a(1)</code> </pre> <br>  Rien n'a √©t√© conserv√© non plus. <br><br><h2>  2. Coh√©rence </h2><br>  √âtant donn√© que dans les bases de donn√©es sur les globaux, les cl√©s sont √©galement cr√©√©es sur les globaux (je rappelle qu'un global est une structure de niveau inf√©rieur pour stocker des donn√©es qu'une table relationnelle), pour r√©pondre √† l'exigence de coh√©rence, vous devez inclure le changement de cl√© dans la m√™me transaction que le changement global. <br><br>  Par exemple, nous avons une personne globale ^ dans laquelle nous stockons des personnalit√©s et nous utilisons le NIF comme cl√©. <br><br><pre> <code class="bash hljs">^person(1234567, <span class="hljs-string"><span class="hljs-string">'firstname'</span></span>) = <span class="hljs-string"><span class="hljs-string">'Sergey'</span></span> ^person(1234567, <span class="hljs-string"><span class="hljs-string">'lastname'</span></span>) = <span class="hljs-string"><span class="hljs-string">'Kamenev'</span></span> ^person(1234567, <span class="hljs-string"><span class="hljs-string">'phone'</span></span>) = <span class="hljs-string"><span class="hljs-string">'+74995555555 ...</span></span></code> </pre> <br>  Afin d'avoir une recherche rapide par nom et pr√©nom, nous avons fait la cl√© ^ index. <br><br><pre> <code class="bash hljs">^index(<span class="hljs-string"><span class="hljs-string">'Kamenev'</span></span>, <span class="hljs-string"><span class="hljs-string">'Sergey'</span></span>, 1234567) = 1</code> </pre> <br>  Pour que la base soit convenue, nous devons ajouter des personnalit√©s comme celle-ci: <br><br><pre> <code class="bash hljs">TSTART ^person(1234567, <span class="hljs-string"><span class="hljs-string">'firstname'</span></span>) = <span class="hljs-string"><span class="hljs-string">'Sergey'</span></span> ^person(1234567, <span class="hljs-string"><span class="hljs-string">'lastname'</span></span>) = <span class="hljs-string"><span class="hljs-string">'Kamenev'</span></span> ^person(1234567, <span class="hljs-string"><span class="hljs-string">'phone'</span></span>) = <span class="hljs-string"><span class="hljs-string">'+74995555555 ^index('</span></span>Kamenev<span class="hljs-string"><span class="hljs-string">', '</span></span>Sergey<span class="hljs-string"><span class="hljs-string">', 1234567) = 1 TCOMMIT</span></span></code> </pre> <br>  Par cons√©quent, lors de la suppression, nous devons √©galement utiliser la transaction: <br><br><pre> <code class="bash hljs">TSTART Kill ^person(1234567) ZKill ^index(<span class="hljs-string"><span class="hljs-string">'Kamenev'</span></span>, <span class="hljs-string"><span class="hljs-string">'Sergey'</span></span>, 1234567) TCOMMIT</code> </pre> <br>  En d'autres termes, la satisfaction de l'exigence de coh√©rence incombe enti√®rement au programmeur.  Mais en ce qui concerne les globaux, c'est normal, en raison de leur nature de bas niveau. <br><br><h2>  3. Isolement </h2><br>  C'est l√† que les d√©serts commencent.  De nombreux utilisateurs travaillent simultan√©ment sur la m√™me base de donn√©es, modifient les m√™mes donn√©es. <br><br>  La situation est comparable √† la situation o√π de nombreux utilisateurs travaillent simultan√©ment avec le m√™me r√©f√©rentiel avec le code et tentent de valider des modifications sur plusieurs fichiers √† la fois. <br><br>  La base de donn√©es devrait r√©soudre ce probl√®me en temps r√©el.  √âtant donn√© que dans les entreprises s√©rieuses, il y a m√™me une personne sp√©ciale qui est responsable du contr√¥le de version (pour la fusion des succursales, la r√©solution des conflits, etc.), et la base de donn√©es devrait faire tout cela en temps r√©el, la complexit√© de la t√¢che et la conception correcte de la base de donn√©es et le code qui le sert. <br><br>  La base de donn√©es ne peut pas comprendre la signification des actions effectu√©es par les utilisateurs afin de pr√©venir les conflits s'ils travaillent sur les m√™mes donn√©es.  Il ne peut annuler qu'une transaction contrairement √† une autre ou les ex√©cuter s√©quentiellement. <br><br>  Un autre probl√®me est que pendant l'ex√©cution de la transaction (avant la validation), l'√©tat de la base de donn√©es peut √™tre incoh√©rent, il est donc souhaitable que d'autres transactions n'aient pas acc√®s √† l'√©tat incoh√©rent de la base de donn√©es, qui est obtenu dans les bases de donn√©es relationnelles de plusieurs mani√®res: cr√©ation d'instantan√©s, lignes multiversionnelles et etc. <br><br>  Dans l'ex√©cution parall√®le de transactions, il est important pour nous qu'elles n'interf√®rent pas entre elles.  C'est la propri√©t√© de l'isolement. <br><br>  SQL d√©finit 4 niveaux d'isolement: <br><br><ul><li>  LIRE NON ENGAG√â </li><li>  LIRE ENGAG√â </li><li>  LECTURE R√âP√âTABLE </li><li>  S√âRIALISABLE </li></ul><br>  Examinons chaque niveau s√©par√©ment.  Les co√ªts de mise en ≈ìuvre de chaque niveau augmentent presque exponentiellement. <br><br>  <b>LIRE NON ENGAG√â</b> est le niveau d'isolement le plus bas, mais le plus rapide.  Les transactions peuvent lire les modifications apport√©es par l'autre. <br><br>  <b>READ COMMITTED</b> est le prochain niveau d'isolement, qui est un compromis.  Les transactions ne peuvent pas lire les modifications apport√©es par l'autre avant un commit, mais peuvent lire toutes les modifications apport√©es apr√®s un commit. <br><br>  Si nous avons une longue transaction T1, au cours de laquelle il y a eu des validations dans les transactions T2, T3 ... Tn qui fonctionnaient avec les m√™mes donn√©es que T1, alors lorsque nous demandons des donn√©es dans T1, nous obtiendrons des r√©sultats diff√©rents √† chaque fois.  Ce ph√©nom√®ne est appel√© lecture non r√©p√©table. <br><br>  <b>REPEATABLE READ</b> - dans ce niveau d'isolement, nous n'avons pas le ph√©nom√®ne de lecture non r√©p√©table, car pour chaque demande de lecture de donn√©es, un instantan√© des donn√©es de r√©sultat est cr√©√© et lorsqu'elles sont r√©utilis√©es dans la m√™me transaction, les donn√©es de l'instantan√© sont utilis√©es.  Cependant, √† ce niveau d'isolement, les donn√©es fant√¥mes peuvent √™tre lues.  Cela fait r√©f√©rence √† la lecture de nouvelles lignes ajout√©es par des transactions valid√©es simultan√©es. <br><br>  <b>SERIALIZABLE</b> est le plus haut niveau d'isolement.  Il se caract√©rise par le fait que les donn√©es utilis√©es de quelque mani√®re que ce soit dans la transaction (lecture ou modification) ne deviennent disponibles pour d'autres transactions qu'apr√®s la fin de la premi√®re transaction. <br><br>  Commen√ßons par d√©terminer s'il existe une isolation des op√©rations dans une transaction par rapport au thread principal.  Ouvrons 2 fen√™tres de terminal. <br><div class="scrollable-table"><table><tbody><tr><td><pre> <code class="bash hljs">Kill ^t Write ^t(1) 2</code> </pre> </td><td><pre> <code class="bash hljs">TSTART Set ^t(1)=2</code> </pre> </td></tr></tbody></table></div><br>  Il n'y a pas d'isolement.  Un thread voit ce que fait le second qui a ouvert la transaction. <br><br>  Voyons si les transactions de diff√©rents flux voient ce qui se passe √† l'int√©rieur. <br><br>  Nous ouvrons 2 fen√™tres de terminal et ouvrons 2 transactions en parall√®le. <br><div class="scrollable-table"><table><tbody><tr><td><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> ^t TSTART Write ^t(1) 3</code> </pre> </td><td><pre> <code class="bash hljs">TSTART Set ^t(1)=3</code> </pre></td></tr></tbody></table></div><br>  Les transactions simultan√©es voient les donn√©es des autres.  Nous avons donc obtenu le niveau d'isolement le plus simple, mais aussi le plus rapide LIRE NON COMMIT√â. <br><br>  En principe, cela pourrait √™tre pr√©vu pour les mondiaux, pour qui la vitesse a toujours √©t√© primordiale. <br><br>  Mais que faire si nous avons besoin d'un niveau d'isolement plus √©lev√© dans les op√©rations mondiales? <br><br>  Ici, vous devez vous demander pourquoi les niveaux d'isolation sont n√©cessaires et comment ils fonctionnent. <br><br>  Le niveau d'isolement le plus √©lev√© de SERIALIZE signifie que le r√©sultat des transactions ex√©cut√©es simultan√©ment est √©quivalent √† leur ex√©cution s√©quentielle, ce qui garantit l'absence de collisions. <br><br>  Nous pouvons le faire √† l'aide de verrous comp√©tents en ObjectScript, qui ont beaucoup de fa√ßons diff√©rentes d'appliquer: vous pouvez faire des verrous multiples r√©guliers et incr√©mentiels avec la commande <a href="">LOCK</a> . <br><br>  Des niveaux d'isolement plus faibles sont des compromis con√ßus pour augmenter la vitesse de la base de donn√©es. <br><br>  Voyons comment nous pouvons atteindre diff√©rents niveaux d'isolement √† l'aide de verrous. <br><br>  Cet op√©rateur vous permet de prendre non seulement les verrous exclusifs n√©cessaires pour modifier les donn√©es, mais aussi les verrous dits partag√©s, qui peuvent prendre plusieurs threads √† la fois, lorsqu'ils ont besoin de lire des donn√©es qui ne devraient pas √™tre modifi√©es par d'autres processus pendant la lecture. <br><br>  Plus d'informations sur la m√©thode de verrouillage √† deux phases en russe et en anglais: <br><br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Verrouillage biphas√©</a> <br>  ‚Üí <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Verrouillage biphas√©</a> <br><br>  La difficult√© est que pendant la transaction, l'√©tat de la base de donn√©es peut √™tre incoh√©rent, cependant, ces donn√©es incoh√©rentes sont visibles par d'autres processus.  Comment √©viter cela? <br><br>  En utilisant des verrous, nous ferons de telles fen√™tres de visibilit√© dans lesquelles l'√©tat de la base de donn√©es sera convenu.  Et tous les appels √† de telles fen√™tres de visibilit√© de l'√©tat convenu seront contr√¥l√©s par des verrous. <br><br>  Les verrous partag√©s des m√™mes donn√©es sont r√©utilisables - plusieurs processus peuvent les prendre.  Ces verrous emp√™chent d'autres processus de modifier les donn√©es, c'est-√†-dire  ils sont utilis√©s pour former les fen√™tres de l'√©tat coordonn√© de la base de donn√©es. <br><br>  Des verrous exclusifs sont utilis√©s pour modifier les donn√©es - un seul processus peut prendre un tel verrou.  Le blocage exclusif peut prendre: <br><br><ol><li>  Tout processus si les donn√©es sont libres </li><li>  Seul le processus qui a un verrou partag√© sur ces donn√©es et le premier a demand√© un verrou exclusif. </li></ol><br><img src="https://habrastorage.org/webt/ba/pu/mx/bapumxoivygurvclagw-mkw9p8w.png"><br><br>  Plus la fen√™tre de visibilit√© est √©troite, plus il faut de temps aux autres processus pour attendre, mais plus l'√©tat de la base de donn√©es peut √™tre coh√©rent. <br><br>  <b>READ_COMMITED</b> - l'essence de ce niveau est que nous ne voyons que les donn√©es d'autres flux qui sont verrouill√©s.  Si les donn√©es d'une autre transaction ne sont pas encore valid√©es, alors nous voyons leur ancienne version. <br><br>  Cela nous permet de parall√©liser le travail au lieu d'attendre que le verrou soit lib√©r√©. <br><br>  Sans astuces sp√©ciales, nous ne pourrons pas voir l'ancienne version des donn√©es dans IRIS, nous devons donc faire avec les verrous. <br><br>  Par cons√©quent, nous devrons utiliser des verrous partag√©s pour permettre la lecture des donn√©es uniquement √† des moments de coh√©rence. <br><br>  Supposons que nous ayons une base d'utilisateurs ^ personne qui se transf√®re de l'argent. <br><br>  Moment du transfert de la personne 123 √† la personne 242: <br><br><pre> <code class="bash hljs">LOCK +^person(123), +^person(242) Set ^person(123, amount) = ^person(123, amount) - amount Set ^person(242, amount) = ^person(242, amount) + amount LOCK -^person(123), -^person(242)</code> </pre> <br>  Le moment de demander le montant d'argent √† la personne 123 avant le d√©bit doit √™tre accompagn√© d'un verrou exclusif (par d√©faut): <br><br><pre> <code class="bash hljs">LOCK +^person(123) Write ^person(123)</code> </pre> <br>  Et si vous devez afficher l'√©tat du compte dans votre compte, vous pouvez utiliser le verrouillage partag√© ou ne pas l'utiliser du tout: <br><br><pre> <code class="bash hljs">LOCK +^person(123)<span class="hljs-comment"><span class="hljs-comment">#‚ÄùS‚Äù Write ^person(123)</span></span></code> </pre> <br>  Cependant, si nous supposons que les op√©rations de base de donn√©es sont effectu√©es presque instantan√©ment (je me souviens que les globaux sont une structure de niveau beaucoup plus faible qu'une table relationnelle), alors le besoin de ce niveau diminue. <br><br>  <b>REPEATABLE READ</b> - Dans ce niveau d'isolement, il est <b>suppos√©</b> qu'il peut y avoir plusieurs lectures de donn√©es qui peuvent √™tre modifi√©es par des transactions simultan√©es. <br><br>  En cons√©quence, nous devrons mettre un verrou partag√© sur la lecture des donn√©es que nous modifions et des verrous exclusifs sur les donn√©es que nous modifions. <br><br>  Heureusement, l'op√©rateur LOCK permet √† un op√©rateur de r√©pertorier en d√©tail tous les verrous n√©cessaires, qui peuvent √™tre tr√®s nombreux. <br><br><pre> <code class="bash hljs">LOCK +^person(123, amount)<span class="hljs-comment"><span class="hljs-comment">#‚ÄùS‚Äù  ^person(123, amount)</span></span></code> </pre> <br>  autres op√©rations (pour le moment, les threads parall√®les tentent de changer ^ personne (123, montant), mais ne peuvent pas) <br><br><pre> <code class="bash hljs">LOCK +^person(123, amount)  ^person(123, amount) LOCK -^person(123, amount)  ^person(123, amount) LOCK -^person(123, amount)<span class="hljs-comment"><span class="hljs-comment">#‚ÄùS‚Äù</span></span></code> </pre> <br>  Lorsque vous r√©pertoriez des verrous s√©par√©s par des virgules, ils sont pris de mani√®re s√©quentielle, et si vous le faites: <br><br><pre> <code class="bash hljs">LOCK +(^person(123),^person(242))</code> </pre> <br>  puis ils sont pris atomiquement en une seule fois. <br><br>  <b>S√âRIALISER</b> - nous devrons d√©finir les verrous de sorte que finalement toutes les transactions qui ont des donn√©es communes soient ex√©cut√©es s√©quentiellement.  Pour cette approche, la plupart des serrures doivent √™tre exclusives et prises dans les plus petites zones du monde pour des performances. <br><br>  Si nous parlons de radiations dans la personne globale, alors seul le niveau d'isolement SERIALIZE lui est acceptable, car l'argent doit √™tre d√©pens√© strictement s√©quentiellement, sinon il est possible de d√©penser le m√™me montant plusieurs fois. <br><br><h2>  4. Durabilit√© </h2><br>  J'ai effectu√© des tests avec une d√©coupe difficile du conteneur √† travers <br><br><pre> <code class="bash hljs">docker <span class="hljs-built_in"><span class="hljs-built_in">kill</span></span> my-iris</code> </pre> <br>  La base les a bien tol√©r√©s.  Aucun probl√®me n'a √©t√© identifi√©. <br><br><h2>  Conclusion </h2><br>  Pour les pays du monde entier, InterSystems IRIS prend en charge les transactions.  Ils sont vraiment atomiques, fiables.  Pour garantir la coh√©rence de la base de donn√©es sur les globaux, les efforts du programmeur et l'utilisation des transactions sont n√©cessaires, car il n'y a pas de constructions int√©gr√©es complexes telles que des cl√©s √©trang√®res. <br><br>  Le niveau d'isolement des globaux sans utilisation de verrous est LIRE NON COMMIS, et lors de l'utilisation de verrous, il peut √™tre assur√© jusqu'au niveau SERIALIZE. <br><br>  L'exactitude et la rapidit√© des transactions sur les globaux d√©pendent beaucoup de la comp√©tence du programmeur: plus les verrous partag√©s sont largement utilis√©s lors de la lecture, plus le niveau d'isolement est √©lev√© et plus les verrous exclusifs sont pris, plus la vitesse est √©lev√©e. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr461753/">https://habr.com/ru/post/fr461753/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr461743/index.html">Security Week 31: vuln√©rabilit√© VLC et t√©l√©phone cass√©</a></li>
<li><a href="../fr461745/index.html">DeviceLock DLP: Prix du march√© noir russe pour percer les donn√©es personnelles (plus une r√©ponse √† la r√©ponse de Tinkoff Bank)</a></li>
<li><a href="../fr461747/index.html">Comment nous avons impl√©ment√© ML dans une application avec pr√®s de 50 millions d'utilisateurs. Exp√©rience Sberbank</a></li>
<li><a href="../fr461749/index.html">La beaut√© dans l'≈ìil du spectateur</a></li>
<li><a href="../fr461751/index.html">Contribution du concepteur au d√©veloppement d'applications mobiles</a></li>
<li><a href="../fr461755/index.html">La psychologie de la vision sonore. Svetlana Lebedeva a expliqu√© comment les gens apprennent une nouvelle fa√ßon de percevoir</a></li>
<li><a href="../fr461759/index.html">√âcoute des communications VoIP crypt√©es</a></li>
<li><a href="../fr461761/index.html">DPKI: rem√©dier aux inconv√©nients de l'ICP centralis√©e avec la blockchain</a></li>
<li><a href="../fr461763/index.html">Les agences de publicit√© peuvent-elles tuer des entreprises au d√©but du voyage</a></li>
<li><a href="../fr461765/index.html">Nous traversons des k8 avec Kafka, √©conomisons des conteneurs, √©chappons aux d√©chets dans Ansible: les 10 meilleurs rapports de DevOops 2018</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>