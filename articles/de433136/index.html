<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôâÔ∏è ü•û ü§∂üèΩ System.Transactions-Infrastruktur in der .NET-Welt üåßÔ∏è üì∞ üçí</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Haben Sie ein Konstrukt wie using (var scope = new TransactionScope(TransactionScopeOption.Required)) in C # gesehen? Dies bedeutet, dass sich der im ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>System.Transactions-Infrastruktur in der .NET-Welt</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/custis/blog/433136/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/ct/df/aq/ctdfaqnuvdjaw6tobyxja78mk-s.png"></div><br>  Haben Sie ein Konstrukt wie <code>using (var scope = new TransactionScope(TransactionScopeOption.Required))</code> in C # gesehen?  Dies bedeutet, dass sich der im <code>using</code> Block ausgef√ºhrte Code in der Transaktion befindet und nach dem Beenden dieses Blocks die √Ñnderungen festgeschrieben oder zur√ºckgesetzt werden.  Es klingt verst√§ndlich, bis Sie anfangen, tiefer zu graben.  Und je tiefer Sie graben, desto ‚Äûseltsamer und seltsamer‚Äú wird es.  Als ich mich mit der <code>TransactionScope</code> Klasse und allgemein mit .NET-Transaktionen vertraut machte, stellten sich auf jeden Fall eine ganze Reihe von Fragen. <br><br>  Was ist die <code>TransactionScope</code> Klasse?  Sobald wir das Konstrukt <code>using (var scope = new TransactionScope())</code> verwenden, wird alles in unserem Programm sofort transaktional?  Was sind "Ressourcenmanager" und "Transaktionsmanager"?  Kann ich meinen eigenen Ressourcenmanager schreiben und wie wird eine Verbindung zur erstellten <code>TransactionScope</code> Instanz hergestellt?  Was ist eine verteilte Transaktion und stimmt eine verteilte Transaktion in SQL Server oder Oracle Database mit einer verteilten .NET-Transaktion? <br><br>  In dieser Ver√∂ffentlichung habe ich versucht, Material zu sammeln, das hilft, Antworten auf diese Fragen zu finden und ein Verst√§ndnis f√ºr Transaktionen in der .NET-Welt aufzubauen. <br><a name="habracut"></a><br><div class="spoiler">  <b class="spoiler_title">Inhalt</b> <div class="spoiler_text">  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einf√ºhrung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was sind Transaktionen und welche Probleme l√∂sen sie?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Welche Transaktionen werden hier ber√ºcksichtigt?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TL; DR-Abschnitt</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Transaktionen basierend auf System.Transactions</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was ist das</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ressourcenmanager</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Arten von Ressourcenmanagern</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verwenden von TransactionScope</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Anwendbarkeit von Softwaretransaktionen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Ein Beispiel f√ºr einen unbest√§ndigen Ressourcenmanager</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TL; DR-Abschnitt</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verteilte Transaktionen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Was ist das</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Transaktionsprotokolle</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Zweiphasige Fixierung</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">System.Transations Spickzettel</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Einschr√§nkungen und Alternativen f√ºr verteilte Software-Transaktionen</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Also ist es in .NET Core?</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Verteilte Transaktionen und WCF</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">TL; DR-Abschnitt</a> <br>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Fazit Krippe</a> </div></div><br><a name="Introduction"></a><h2>  Einf√ºhrung </h2><br><a name="Transactions"></a><h4>  Was sind Transaktionen und welche Probleme l√∂sen sie? </h4><br>  Bei den hier in Rede stehenden Transaktionen handelt es sich um Vorg√§nge, die das System von einem akzeptablen Zustand in einen anderen √ºbertragen und die das System garantiert nicht in einem inakzeptablen Zustand belassen, selbst wenn unvorhergesehene Situationen auftreten.  Welche akzeptablen Bedingungen dies im Allgemeinen sind, h√§ngt vom Kontext ab.  Hier betrachten wir eine akzeptable Situation, in der die von uns verarbeiteten Daten ganzheitlich sind.  Es versteht sich, dass die √Ñnderungen, aus denen sich die Transaktion zusammensetzt, entweder zusammen oder nicht festgeschrieben werden.  Dar√ºber hinaus k√∂nnen √Ñnderungen an einer Transaktion von √Ñnderungen isoliert werden, die von einer anderen Transaktion am System vorgenommen wurden.  Die Grundvoraussetzungen f√ºr Transaktionen werden mit dem Akronym ACID bezeichnet.  F√ºr die erste Bekanntschaft mit ihnen ist <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ein Artikel auf Wikipedia</a> geeignet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/4r/p7/2b/4rp72bf2l_qdxmlhawxsjslkj-i.png" width="250"></div><br>  Ein klassisches Beispiel f√ºr eine Transaktion ist der Geldtransfer zwischen zwei Konten.  In dieser Situation ist das Abheben von Geld von Konto Nr. 1 ohne Gutschrift auf Konto Nr. 2 nicht akzeptabel, genau wie das Gutschreiben auf Konto Nr. 2 ohne Abheben von Konto Nr. 1. Mit anderen Worten, wir m√∂chten, dass beide Vorg√§nge sowohl abheben als auch gutschreiben - sofort durchgef√ºhrt.  Wenn einer von ihnen fehlschl√§gt, sollte der zweite Vorgang nicht ausgef√ºhrt werden.  Sie k√∂nnen dieses Prinzip "alles oder nichts" nennen.  Dar√ºber hinaus ist es w√ºnschenswert, dass Operationen auch bei Systemfehlern wie einem Stromausfall synchron ausgef√ºhrt werden, dh dass das System in einem akzeptablen Zustand ist, sobald es nach der Wiederherstellung verf√ºgbar wird. <br><br>  In mathematischen Begriffen k√∂nnen wir sagen, dass es in Bezug auf das System eine Invariante gibt, die wir beibehalten m√∂chten.  Zum Beispiel der Betrag auf beiden Konten: Es ist erforderlich, dass der Betrag nach der Transaktion (Geldtransfer) derselbe bleibt wie zuvor.  √úbrigens erscheint im klassischen Beispiel der Geld√ºberweisung auch die Buchhaltung - ein Themenbereich, in dem das Konzept der Transaktion nat√ºrlich entstanden ist. <br><br>  Wir veranschaulichen das Beispiel des Geldtransfers zwischen zwei Konten.  Das erste Bild zeigt die Situation, als die √úbertragung von 50 Rubel von Konto Nr. 1 auf Konto Nr. 2 erfolgreich abgeschlossen wurde.  Die gr√ºne Farbe zeigt an, dass sich das System in einem akzeptablen Zustand befindet (Daten sind vollst√§ndig). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/sn/az/ra/snazracqgy0u8fdxtrtksb8jc7g.png"></div><br>  Stellen Sie sich nun vor, dass die √úberweisung au√üerhalb der Transaktion erfolgt und nach dem Abheben von Geld von Konto Nr. 1 ein Fehler aufgetreten ist, aufgrund dessen das abgezogene Geld nicht auf Konto Nr. 2 gutgeschrieben wurde. Das System befindet sich in einem inakzeptablen Zustand (rote Farbe). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/yj/8h/ph/yj8hphqu7cszpcdvnboh97h3xfe.png"></div><br>  Wenn zwischen dem Auszahlungs- und dem Gutschriftvorgang ein Fehler aufgetreten ist, die √úberweisung jedoch im Rahmen einer Transaktion durchgef√ºhrt wurde, wird der Auszahlungsvorgang abgebrochen.  Infolgedessen bleibt das System in seinem urspr√ºnglichen akzeptablen Zustand. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/3d/6b/wi/3d6bwim5vko1yam5mhiv1ekl9ve.png"></div><br>  Ich werde Beispiele f√ºr Situationen aus der Erfahrung unseres Unternehmens nennen, in denen Transaktionen n√ºtzlich sind: Bilanzierung von Waren (Ber√ºcksichtigung der Anzahl von Waren verschiedener Arten, die sich in bestimmten Gesch√§ften befinden und unterwegs sind), Bilanzierung von Lagerressourcen (Ber√ºcksichtigung des Volumens eines Raums, der von Waren eines bestimmten Typs belegt ist, Volumen eines Raums, frei f√ºr die Platzierung von Waren, die Menge an Waren, die Mitarbeiter und automatisierte Lagersysteme pro Tag bewegen k√∂nnen). <br><br>  Die Probleme, die auftreten, wenn die Datenintegrit√§t verletzt wird, liegen auf der Hand.  Die vom System bereitgestellten Informationen werden nicht nur falsch - sie verlieren den Kontakt zur Realit√§t und werden zu Unsinn. <br><br><a name="KindsOfTransactions"></a><h4>  Welche Transaktionen werden hier ber√ºcksichtigt? </h4><br>  Die Vorteile von Transaktionen sind bekannt.  Ben√∂tigen wir zur Wahrung der Datenintegrit√§t eine relationale Datenbank, da dort Transaktionen durchgef√ºhrt werden?  Nicht wirklich.  Es wurde oben gesagt, dass das Konzept einer Transaktion vom Kontext abh√§ngt, und jetzt werden wir kurz √ºberlegen, √ºber welche Transaktionen wir bei der Diskussion von Informationssystemen sprechen k√∂nnen. <br><br>  Zun√§chst trennen wir die Konzepte von Fachdom√§nentransaktionen (Gesch√§ftstransaktionen) und Systemtransaktionen.  Die zweite kann an verschiedenen Orten und auf verschiedene Arten implementiert werden. <br><br>  Gehen wir von der h√∂chsten Ebene - dem Themenbereich.  Die interessierte Person kann erkl√§ren, dass es einige akzeptable Zust√§nde gibt, und sie m√∂chte das Informationssystem nicht au√üerhalb dieser Zust√§nde sehen.  Wir werden keine zus√§tzlichen Beispiele nennen: Hier ist die √úberweisung von Geld zwischen Konten geeignet.  Wir stellen nur klar, dass eine √úberweisung nicht unbedingt eine √úberweisung zwischen den Abrechnungskonten zweier Bankkunden ist.  Nicht weniger wichtig ist die Aufgabe der Rechnungslegung, wenn die Konten die Quellen und den Zweck der Mittel der Organisation widerspiegeln sollten und die √úbertragung die √Ñnderung der Verteilung der Mittel nach diesen Quellen und Zwecken widerspiegeln sollte.  Dies war ein Beispiel f√ºr eine <b>Betreff-Domain-Transaktion</b> . <br><br>  Lassen Sie uns nun die h√§ufigsten und interessantesten Beispiele f√ºr die Implementierung von Systemtransaktionen sehen.  Bei Systemtransaktionen stellen verschiedene technische Mittel die Anforderungen des Themenbereichs bereit.  Eine klassisch bew√§hrte L√∂sung dieser Art ist eine <strong>relationale DBMS-Transaktion</strong> (erstes Beispiel).  Moderne Datenbankverwaltungssysteme (sowohl relational <a href="">als auch nicht sehr</a> ) bieten einen Transaktionsmechanismus, mit dem Sie entweder alle w√§hrend des angegebenen Arbeitszeitraums vorgenommenen √Ñnderungen speichern (festschreiben) oder verwerfen (Rollback) k√∂nnen.  Bei Verwendung eines solchen Mechanismus werden Vorg√§nge zum Abheben von Geld von einem Konto und zur Gutschrift auf einem anderen Konto, aus denen die Transaktion des betreffenden Bereichs besteht, zu einer Systemtransaktion zusammengefasst und entweder zusammen oder √ºberhaupt nicht ausgef√ºhrt. <br><br>  Die Verwendung eines DBMS ist nat√ºrlich nicht erforderlich.  Grob gesagt k√∂nnen Sie den DBMS-Transaktionsmechanismus im Allgemeinen in Ihrer bevorzugten Programmiersprache implementieren und das instabile und fehlerhafte Analogon vorhandener Tools genie√üen.  Ihr ‚ÄûFahrrad‚Äú kann jedoch f√ºr bestimmte Situationen im Themenbereich optimiert werden. <br><br>  Es gibt interessantere Optionen.  Moderne industrielle Programmiersprachen (in erster Linie C # und Java) bieten Tools, die speziell f√ºr die Organisation von Transaktionen mit v√∂llig unterschiedlichen Subsystemen und nicht nur f√ºr das DBMS entwickelt wurden.  In dieser Ver√∂ffentlichung werden wir solche Transaktionssoftware nennen.  Im Fall von C # sind dies <b>Transaktionen aus dem System.Transactions-Namespace</b> (das zweite Beispiel), die im Folgenden beschrieben werden. <br><br>  Bevor Sie zu <code>System.Transactions</code> Transaktionen <code>System.Transactions</code> , k√∂nnen Sie ein weiteres interessantes Ph√§nomen erw√§hnen.  <code>System.Transactions</code> Tools kann der Programmierer den <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">programmatischen Transaktionsspeicher</a> unabh√§ngig implementieren.  In diesem Fall sind Programmoperationen, die sich auf den Status des Systems auswirken (bei klassischen imperativen Programmiersprachen handelt es sich um eine Zuweisungsoperation), standardm√§√üig in Transaktionen enthalten, die √§hnlich wie DBMS-Transaktionen festgeschrieben und zur√ºckgesetzt werden k√∂nnen.  Mit diesem Ansatz wird die Notwendigkeit der Verwendung von Synchronisationsmechanismen (in C # <code>lock</code> , in Java- <code>synchronized</code> ) erheblich reduziert.  Eine Weiterentwicklung dieser Idee ist <strong>der auf Plattformebene unterst√ºtzte Software-Transaktionsspeicher</strong> (drittes Beispiel).  Ein solches Wunder wird voraussichtlich in einer Sprache zu finden sein, deren Eleganz die industrielle Anwendbarkeit √ºbertrifft - Clojure.  Und f√ºr Arbeiter-Bauern-Sprachen gibt es Plug-In-Bibliotheken, die die Funktionalit√§t des programmatischen Transaktionsspeichers bereitstellen. <br><br>  Systemtransaktionen k√∂nnen mehrere Informationssysteme umfassen. In diesem Fall werden sie verteilt.  Verteilt k√∂nnen sowohl DBMS-Transaktionen als auch Software sein.  Alles h√§ngt davon ab, welche Funktionen ein bestimmtes Transaktionstool unterst√ºtzt.  Detailliertere verteilte Transaktionen werden im entsprechenden Abschnitt erl√§utert.  Ich werde ein Bild geben, um das Verst√§ndnis der besprochenen Themen zu erleichtern. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/di/yd/4s/diyd4spwelqhd61eoetfacuncjm.png"></div><br><a name="TLDR1"></a><h4>  TL; DR-Abschnitt </h4><br>  Es gibt Prozesse, die aus mehreren unteilbaren (atomaren) Operationen bestehen, die auf das System angewendet werden, im allgemeinen Fall nicht unbedingt informativ.  Jede unteilbare Operation kann das System in einem inakzeptablen Zustand belassen, wenn die Datenintegrit√§t beeintr√§chtigt wird.  Wenn beispielsweise eine Geld√ºberweisung zwischen zwei Konten durch zwei unteilbare Vorg√§nge dargestellt wird: Abheben vom Konto Nr. 1 und Gutschrift auf Konto Nr. 2, verletzt nur einer dieser Vorg√§nge die Integrit√§t der Daten.  Geld verschwindet entweder mitten im Nirgendwo oder erscheint mitten im Nirgendwo.  Eine Transaktion kombiniert unteilbare Operationen, so dass sie alle zusammen (nat√ºrlich nacheinander, falls erforderlich) oder √ºberhaupt nicht ausgef√ºhrt werden.  Wir k√∂nnen √ºber Dom√§nentransaktionen und Transaktionen in technischen Systemen sprechen, die normalerweise Dom√§nentransaktionen implementieren. <br><br><a name="SystemTransactions"></a><h2>  Transaktionen basierend auf System.Transactions </h2><br><a name="WhatIsIt1"></a><h4>  Was ist das </h4><br>  In der .NET-Welt gibt es ein Software-Framework, das von den Erstellern einer Transaktionsverwaltungsplattform entwickelt wurde.  Aus Sicht eines Transaktionsprogrammierers besteht dieses Framework aus den <code>System.Transactions</code> <code>TransactionScope</code> , <code>TransactionScopeOption</code> , <code>TransactionScopeAsyncFlowOption</code> und <code>TransactionOptions</code> <code>System.Transactions</code> Namespace.  Wenn wir √ºber .NET Standard sprechen, ist all dies ab <a href="">Version 2.0</a> verf√ºgbar. <br><br>  Transaktionen aus dem <code>System.Transactions</code> Namespace basieren auf <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">dem X / Open XA-Standard von The Open Group</a> .  Dieser Standard f√ºhrt viele der unten diskutierten Begriffe ein und beschreibt vor allem verteilte Transaktionen, die in dieser Ver√∂ffentlichung in einem speziellen Abschnitt ebenfalls behandelt werden.  Die Implementierung von Softwaretransaktionen auf anderen Plattformen, beispielsweise <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java,</a> basiert auf demselben Standard. <br><br>  Ein typischer Transaktionsanwendungsfall f√ºr einen C # -Programmierer lautet wie folgt: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Transactions.TransactionScope(System.Transactions.TransactionScopeOption.Required)) { <span class="hljs-comment"><span class="hljs-comment">// -  ,    . scope.Complete(); }</span></span></code> </pre> <br>  Innerhalb des <code>using</code> Blocks befindet sich der Code, der die Arbeit erledigt, dessen Ergebnisse zusammen festgeschrieben oder abgebrochen werden m√ºssen.  Klassische Beispiele f√ºr solche Arbeiten sind das Lesen und Schreiben in die Datenbank oder das Senden und Empfangen von Nachrichten aus der Warteschlange.  Wenn das Steuerelement den <code>using</code> Block verl√§sst, wird die Transaktion festgeschrieben.  Wenn Sie den Anruf " <code>Complete</code> entfernen, wird die Transaktion zur√ºckgesetzt.  Ziemlich einfach. <br><br>  Es stellt sich heraus, dass w√§hrend eines Transaktions-Rollbacks alle Operationen, die in einem solchen <code>using</code> werden, abgebrochen werden.  Und wenn ich einer Variablen einen anderen Wert zugewiesen habe, stellt diese Variable den alten Wert wieder her?  Als ich zum ersten Mal ein √§hnliches Design sah, dachte ich es mir.  Tats√§chlich werden nat√ºrlich nicht alle √Ñnderungen r√ºckg√§ngig gemacht, sondern nur ganz <i>besondere</i> .  Wenn alle √Ñnderungen √ºberhaupt r√ºckg√§ngig gemacht w√ºrden, w√§re dies der oben beschriebene Software-Transaktionsspeicher.  Lassen Sie uns nun sehen, welche besonderen √Ñnderungen an Programmtransaktionen auf der Basis von <code>System.Transactions</code> . <br><br><a name="ResourceManagers"></a><h4>  Ressourcenmanager </h4><br>  Damit Transaktionen auf der Basis von <code>System.Transactions</code> unterst√ºtzt werden <code>System.Transactions</code> , muss es √ºber Informationen <code>System.Transactions</code> , dass eine Transaktion gerade ausgef√ºhrt wird, und dass sie in einer Registrierung von Transaktionsteilnehmern registriert ist.  Sie k√∂nnen Informationen dar√ºber <code>System.Transactions.Transaction</code> ob die Transaktionsarbeit ausgef√ºhrt wird, indem Sie die statische Eigenschaft <code>Current</code> der <code>System.Transactions.Transaction</code> Klasse <code>System.Transactions.Transaction</code> .  Wenn Sie den <code>using</code> Block des oben angegebenen Typs eingeben, wird diese Eigenschaft nur festgelegt, wenn sie zuvor noch nicht festgelegt wurde.  <code><i>Transaction.Enlist Smth</i></code> sich als Teilnehmer an einer Transaktion zu registrieren, k√∂nnen Sie Methoden vom Typ <code>Transaction.Enlist <i>Smth</i></code> .  Dar√ºber hinaus m√ºssen Sie die f√ºr diese Methoden erforderliche Schnittstelle implementieren.  Ressourcenmanager - Dies ist ein solches ‚ÄûEtwas‚Äú, das die Interaktion mit Transaktionen von <code>System.Transactions</code> (eine genauere Definition finden Sie unten). <br><br>  Was sind Ressourcenmanager?  Wenn wir von C # aus mit einem DBMS arbeiten, z. B. SQL Server oder Oracle Database, verwenden wir normalerweise die entsprechenden Treiber und diese sind die Verwaltungsressourcen.  Im Code werden sie durch die Typen <code>System.Data.SqlClient.SqlConnection</code> und <code>Oracle.ManagedDataAccess.Client.OracleConnection</code> .  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Sie sagen auch,</a> dass MSMQ Transaktionen unterst√ºtzt, die auf <code>System.Transactions</code> basieren.  Anhand von Kenntnissen und Beispielen aus dem Internet k√∂nnen Sie Ihren eigenen Ressourcenmanager erstellen.  Das einfachste Beispiel finden Sie im n√§chsten Abschnitt. <br><br>  Zus√§tzlich zu den Ressourcenmanagern ben√∂tigen wir einen Transaktionsmanager, der die Transaktion √ºberwacht und den Ressourcenmanagern rechtzeitig Befehle erteilt.  Abh√§ngig davon, welche Ressourcenmanager an der Transaktion beteiligt sind (welche Merkmale sie haben und wo sie sich befinden), sind verschiedene Transaktionsmanager mit der Arbeit verbunden.  In diesem Fall erfolgt die Auswahl der entsprechenden Version automatisch und erfordert nicht die Intervention eines Programmierers. <br><br>  <code>System.Transactions.IEnlistmentNotification</code> ist der Ressourcenmanager eine Instanz einer Klasse, die die spezielle <code>System.Transactions.IEnlistmentNotification</code> Schnittstelle implementiert.  Die vom Client <code>System.Transactions.Transaction.Current</code> mithilfe der statischen Eigenschaft <code>System.Transactions.Transaction.Current</code> als Teilnehmer an der Transaktion <code>System.Transactions.Transaction.Current</code> .  Anschlie√üend ruft der Transaktionsmanager nach Bedarf Methoden der angegebenen Schnittstelle auf. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/tw/ea/vp/tweavpimeod539do_fkzpr6yzrw.png"></div><br>  Es ist klar, dass sich zur Laufzeit die Anzahl der an der Transaktion beteiligten Ressourcenmanager √§ndern kann.  Nach Eingabe des <code>using</code> Blocks k√∂nnen wir beispielsweise zuerst etwas in SQL Server und dann in Oracle Database tun.  Abh√§ngig von dieser Gruppe von Ressourcenmanagern wird der verwendete Transaktionsmanager bestimmt.  Genauer gesagt wird das verwendete Transaktionsprotokoll von der Gruppe der Ressourcenmanager bestimmt, und der Transaktionsmanager, der es unterst√ºtzt, wird basierend auf dem Protokoll bestimmt.  Wir werden uns <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">sp√§ter die</a> Transaktionsprotokolle ansehen, wenn wir √ºber verteilte Transaktionen sprechen.  Der Mechanismus zum automatischen Ausw√§hlen des entsprechenden Transaktionsmanagers zur Laufzeit beim √Ñndern der an der Transaktion beteiligten Ressourcenmanager wird als Transaktionspromotion bezeichnet. <br><br><a name="KindsOfResourceManagers"></a><h4>  Arten von Ressourcenmanagern </h4><br>  Ressourcenmanager k√∂nnen in zwei gro√üe Gruppen unterteilt werden: dauerhaft und variabel. <br><br>  Durable Resource Manager - Ein Ressourcenmanager, der eine Transaktion unterst√ºtzt, auch wenn das Informationssystem nicht verf√ºgbar ist (z. B. beim Neustart des Computers).  Volatile Resource Manager - Ein Ressourcenmanager, der eine Transaktion nicht unterst√ºtzt, wenn das Informationssystem nicht verf√ºgbar ist.  Ein inkonsistenter Ressourcenmanager unterst√ºtzt nur Transaktionen im Speicher. <br><br>  Die klassischen langfristigen Ressourcenmanager sind das DBMS (oder der DBMS-Treiber f√ºr die Softwareplattform).  Unabh√§ngig davon, was passiert - zumindest eine Fehlfunktion des Betriebssystems, zumindest ein Stromausfall - garantiert das DBMS die Datenintegrit√§t, nachdem es wieder in den Betriebszustand zur√ºckgekehrt ist.  Daf√ºr m√ºssen Sie nat√ºrlich einige Unannehmlichkeiten bezahlen, aber in diesem Artikel werden wir sie nicht ber√ºcksichtigen.  Ein Beispiel f√ºr einen nicht persistenten Ressourcenmanager ist der oben erw√§hnte Software-Transaktionsspeicher. <br><br><a name="TransactionScope"></a><h4>  Verwenden von TransactionScope </h4><br>  Beim Erstellen eines Objekts vom Typ <code>TransactionScope</code> Sie einige Parameter angeben. <br><br>  Erstens gibt es eine Einstellung, die der Laufzeit mitteilt, was sie ben√∂tigt: <br><br><ol><li>  Verwenden Sie eine Transaktion, die zu diesem Zeitpunkt bereits vorhanden ist. </li><li>  Stellen Sie sicher, dass Sie eine neue erstellen. </li><li>  F√ºhren Sie umgekehrt Code innerhalb eines <code>using</code> Blocks au√üerhalb einer Transaktion aus. </li></ol><br>  Die <code>System.Transactions.TransactionScopeOption</code> Enumeration ist f√ºr all dies verantwortlich. <br><br>  Zweitens k√∂nnen Sie die Transaktionsisolationsstufe festlegen.  Dies ist ein Parameter, mit dem Sie einen Kompromiss zwischen der Unabh√§ngigkeit von √Ñnderung und Geschwindigkeit finden k√∂nnen.  Die unabh√§ngigste Ebene - serialisierbar - stellt sicher, dass es keine Situationen gibt, in denen √Ñnderungen innerhalb einer Transaktion, die noch nicht festgeschrieben wurden, in einer anderen Transaktion sichtbar sind.  Jede n√§chste Ebene f√ºgt eine solche spezifische Situation hinzu, wenn sich gleichzeitig ausgef√ºhrte Transaktionen gegenseitig beeinflussen k√∂nnen.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Standardm√§√üig wird eine Transaktion auf serialisierbarer Ebene ge√∂ffnet, was unangenehm sein kann (siehe z. B. </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesen Kommentar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Festlegen der Transaktionsisolationsstufe w√§hrend der Erstellung </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ist f√ºr Ressourcenmanager ratsam. Sie unterst√ºtzen m√∂glicherweise nicht einmal alle aufgelisteten Ebenen </font></font><code>System.Transactions.IsolationLevel</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dar√ºber hinaus sollte ber√ºcksichtigt werden, dass bei Verwendung des Verbindungspools f√ºr die Arbeit mit der Datenbank die Verbindung, f√ºr die die Transaktionsisolationsstufe ge√§ndert wurde </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, diese Stufe</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> bei der R√ºckkehr in den Pool beibeh√§lt </font><font style="vertical-align: inherit;">. Wenn der Programmierer diese Verbindung aus dem Pool empf√§ngt und sich auf die Standardwerte st√ºtzt, beobachtet er unerwartetes Verhalten. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Typische Arbeitsszenarien c</font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und bedeutende Fallstricke (n√§mlich verschachtelte Transaktionen) werden in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesem Artikel √ºber "Habr" ausf√ºhrlich behandelt</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><a name="Applicability"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anwendbarkeit von Softwaretransaktionen </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es sollte gesagt werden, dass in fast jedem Informationssystem im kommerziellen Betrieb Prozesse gestartet werden, die das System in einen inakzeptablen Zustand f√ºhren k√∂nnen. </font><font style="vertical-align: inherit;">Daher kann es erforderlich sein, diese Prozesse zu steuern, herauszufinden, ob der aktuelle Status des Systems akzeptabel ist, und ihn gegebenenfalls wiederherzustellen. </font><font style="vertical-align: inherit;">Softwaretransaktionen - ein vorgefertigtes Tool, um das System in einem akzeptablen Zustand zu halten. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In jedem Fall w√§re es konstruktiv, die Kosten zu ber√ºcksichtigen:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Integration von Prozessen in die Software-Transaktionsinfrastruktur (diese Prozesse m√ºssen sich auch </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vieler anderer Dinge </font><font style="vertical-align: inherit;">bewusst sein </font><font style="vertical-align: inherit;">);</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wartung dieser Infrastruktur (z. B. die Kosten f√ºr die Anmietung von Ger√§ten mit Windows an Bord); </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mitarbeiterschulung (da das Thema .NET-Transaktionen nicht √ºblich ist). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wir d√ºrfen nicht vergessen, dass der Transaktionsprozess m√∂glicherweise verpflichtet ist, seinen Fortschritt der "Au√üenwelt" zu melden, um beispielsweise ein Journal der Aktionen au√üerhalb der Transaktion zu f√ºhren. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Offensichtlich erfordert die Ablehnung von Softwaretransaktionen die Schaffung oder Implementierung anderer Mittel zur Aufrechterhaltung der Datenintegrit√§t, die ebenfalls ihren Wert haben werden. </font><font style="vertical-align: inherit;">Letztendlich kann es F√§lle geben, in denen Verst√∂√üe gegen die Datenintegrit√§t so selten sind, dass es einfacher ist, durch chirurgische Eingriffe einen akzeptablen Zustand des Systems wiederherzustellen, als einen automatischen Wiederherstellungsmechanismus aufrechtzuerhalten.</font></font><br><br><a name="Example"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Ein Beispiel f√ºr einen unbest√§ndigen Ressourcenmanager </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schauen wir uns nun ein Beispiel f√ºr einen einfachen Ressourcenmanager an, der die Wiederherstellung nach einem Systemfehler nicht unterst√ºtzt. Wir werden einen Block Software-Transaktionsspeicher haben, der einen Wert speichert, der gelesen und geschrieben werden kann. Wenn keine Transaktion vorhanden ist, verh√§lt sich dieser Block wie eine regul√§re Variable und speichert bei Vorhandensein einer Transaktion den Anfangswert, der nach dem Zur√ºcksetzen der Transaktion wiederhergestellt werden kann. Der Code f√ºr einen solchen Ressourcenmanager ist unten dargestellt:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Stm</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">System</span></span>.<span class="hljs-title"><span class="hljs-title">Transactions</span></span>.<span class="hljs-title"><span class="hljs-title">IEnlistmentNotification</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T _current; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> T _original; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _enlisted; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T Value { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _current; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!Enlist()) { _original = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } _current = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Stm</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">T </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span></span><span class="hljs-function">)</span></span> { _current = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; _original = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Enlist</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_enlisted) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> currentTx = System.Transactions.Transaction.Current; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentTx == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; currentTx.EnlistVolatile(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, System.Transactions.EnlistmentOptions.None); _enlisted = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">region</span></span></span><span class="hljs-meta"> IEnlistmentNotification public void Commit(System.Transactions.Enlistment enlistment) { _original = _current; _enlisted = false; } public void InDoubt(System.Transactions.Enlistment enlistment) { _enlisted = false; } public void Prepare(System.Transactions.PreparingEnlistment preparingEnlistment) { preparingEnlistment.Prepared(); } public void Rollback(System.Transactions.Enlistment enlistment) { _current = _original; _enlisted = false; } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endregion</span></span></span><span class="hljs-meta"> IEnlistmentNotification }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist ersichtlich, dass die einzige formale Anforderung die Implementierung der Schnittstelle ist </font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Von den interessanten Methoden </font></font><code>Enlist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(die kein Teil sind </font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) und </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Die Methode </font></font><code>Enlist</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pr√ºft lediglich, ob der angegebene Code im Rahmen der Transaktion funktioniert, und registriert in diesem Fall eine Instanz ihrer Klasse als nicht konstanten Ressourcenmanager. Die Methode </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird vom Transaktionsmanager aufgerufen, bevor die √Ñnderungen festgeschrieben werden. Unser Ressourcenmanager signalisiert seine Bereitschaft zum Festschreiben durch Aufrufen einer Methode </font></font><code>System.Transactions.PreparingEnlistment.Prepared</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der folgende Code zeigt ein Beispiel f√ºr die Verwendung unseres Ressourcenmanagers:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stm = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Stm&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Transactions.TransactionScope(System.Transactions.TransactionScopeOption.Required)) { stm.Value = <span class="hljs-number"><span class="hljs-number">2</span></span>; scope.Complete(); }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn Sie </font></font><code>using</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Eigenschaft </font><font style="vertical-align: inherit;">unmittelbar nach dem Verlassen des Blocks </font><font style="vertical-align: inherit;">lesen </font></font><code>stm.Value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wird dort der erwartete Wert erwartet </font></font><code>2</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wenn Sie den Aufruf entfernen </font></font><code>scope.Complete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wird die Transaktion zur√ºckgesetzt und f√ºr die Eigenschaft </font></font><code>stm.Value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wird der Wert </font></font><code>1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">vor dem Start der Transaktion festgelegt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine vereinfachte Abfolge von Aufrufen bei der Arbeit mit Transaktionen ist </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der folgenden Abbildung dargestellt.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/09/je/1d/09je1dkghhmmwts6rvaufuntpna.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es ist ersichtlich, dass in diesem Beispiel nicht alle von der Infrastruktur bereitgestellten M√∂glichkeiten ber√ºcksichtigt werden </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Wir werden sie im n√§chsten Abschnitt genauer betrachten, nachdem wir uns mit Transaktionsprotokollen und verteilten Transaktionen vertraut gemacht haben.</font></font><br><br><a name="TLDR2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TL; DR-Abschnitt </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Programmierer kann eine Klasse verwenden </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, um Code innerhalb einer vorhandenen oder neuen Transaktion auszuf√ºhren. Eine Transaktion wird genau dann festgeschrieben, wenn die </font></font><code>TransactionScope</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Methode </font><font style="vertical-align: inherit;">f√ºr eine vorhandene Instanz der Klasse </font></font><code>Dispose</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aufgerufen wird, obwohl die Methode zuvor aufgerufen wurde</font></font><code>Complete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Ein Programmierer kann angeben, ob er eine neue Transaktion starten, eine vorhandene nutzen oder umgekehrt Code au√üerhalb einer vorhandenen Transaktion ausf√ºhren m√∂chte. An der Transaktion sind nur Ressourcenmanager beteiligt - Softwarekomponenten, die bestimmte Funktionen implementieren. Ressourcenmanager k√∂nnen langfristig (Wiederherstellung nach einem Systemfehler) und zeitweise (nicht Wiederherstellung) sein. Ein DBMS ist ein Beispiel f√ºr einen langlebigen Ressourcenmanager. Der Ressourcenmanager wird von einem Transaktionsmanager koordiniert - einer Softwarekomponente, die von der Laufzeit ohne Teilnahme eines Programmierers automatisch ausgew√§hlt wird. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inkonsistenter Ressourcenmanager ist eine Klasse, die die Schnittstelle </font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Methode </font><font style="vertical-align: inherit;">implementiert</font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Best√§tigung der Bereitschaft, √Ñnderungen festzuschreiben, oder umgekehrt Signalisierung eines Rollbacks von √Ñnderungen. </font><font style="vertical-align: inherit;">Wenn der Aufrufer etwas mit dem Ressourcenmanager tut, pr√ºft er, ob die Transaktion jetzt ge√∂ffnet ist, und meldet sich mit der Methode an, wenn sie ge√∂ffnet ist </font></font><code>System.Transactions.Transaction.EnlistVolatile</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><a name="DistributedTransactions"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verteilte Transaktionen </font></font></h2><br><a name="WhatIsIt2"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Was ist das </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine verteilte Transaktion umfasst mehrere Informationssubsysteme (tats√§chlich ist nicht alles so einfach, mehr dazu weiter unten). </font><font style="vertical-align: inherit;">Es versteht sich, dass √Ñnderungen in allen Systemen, die an einer verteilten Transaktion beteiligt sind, entweder festgeschrieben oder zur√ºckgesetzt werden m√ºssen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Oben wurden verschiedene Mittel zur Implementierung von Transaktionen vorgestellt: DBMS, Infrastruktur </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und programmatischer Transaktionsspeicher, die in die Plattform integriert sind. </font><font style="vertical-align: inherit;">Mit diesen Tools k√∂nnen auch verteilte Transaktionen bereitgestellt werden. </font><font style="vertical-align: inherit;">Wenn Sie beispielsweise in der Oracle-Datenbank Daten in mehreren Datenbanken innerhalb einer einzelnen Transaktion √§ndern (und tats√§chlich lesen), werden diese automatisch in verteilte Daten umgewandelt. </font><font style="vertical-align: inherit;">Als n√§chstes werden wir √ºber Software-verteilte Transaktionen sprechen, zu denen auch heterogene Ressourcenmanager geh√∂ren k√∂nnen.</font></font><br><br><a name="TransactionProtocols"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Transaktionsprotokolle </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Transaktionsprotokoll ist eine Reihe von Prinzipien, nach denen die an einer Transaktion beteiligten Anwendungen interagieren. In der .NET-Welt werden die folgenden Protokolle am h√§ufigsten verwendet. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Leicht.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Es wird nicht mehr als ein dauerhafter Ressourcenmanager verwendet. Alle Transaktionsinteraktionen finden innerhalb derselben Anwendungsdom√§ne statt, oder der Ressourcenmanager unterst√ºtzt die Heraufstufung und das einphasige Festschreiben (Implementieren </font></font><code>IPromotableSinglePhaseNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OleTx.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Die Interoperabilit√§t zwischen mehreren Anwendungsdom√§nen und mehreren Computern ist zul√§ssig. Sie k√∂nnen viele dauerhafte Ressourcenmanager verwenden. Auf allen teilnehmenden Computern muss Windows ausgef√ºhrt werden. Verwenden Sie Remote Procedure Calls (RPCs). </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WS-AT.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Interoperabilit√§t zwischen mehreren Anwendungsdom√§nen und mehreren Computern ist zul√§ssig. Sie k√∂nnen viele dauerhafte Ressourcenmanager verwenden. Auf den teilnehmenden Computern werden m√∂glicherweise verschiedene Betriebssysteme ausgef√ºhrt, nicht nur Windows. Das Hypertext Transmission Protocol (HTTP) wird verwendet. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es wurde oben angemerkt, dass das aktuelle Transaktionsprotokoll die Wahl des Transaktionsmanagers beeinflusst und die Eigenschaften der an der Transaktion beteiligten Kontrollressourcen die Wahl des Protokolls beeinflussen. Jetzt listen wir die bekannten Transaktionsmanager auf. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lightweight Transaction Manager (LTM)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . Eingef√ºhrt in .NET Framework 2.0 und h√∂her. Verwaltet Transaktionen mithilfe des Lightweight-Protokolls. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kernel Transaction Manager (KTM)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Eingef√ºhrt in Windows Vista und Windows Server 2008. Verwaltet Transaktionen mithilfe des Lightweight-Protokolls. Es kann ein Transaktionsdateisystem (TxF) und eine Transaktionsregistrierung (TxR) unter Windows Vista und Windows 2008 </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">aufrufen</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><b><font style="vertical-align: inherit;">Distributed Transaction Coordinator (MSDTC)</font></b><font style="vertical-align: inherit;"> . Verwaltet Transaktionen mit den Protokollen OleTx und WS-AT. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es sollte auch ber√ºcksichtigt werden, dass einige Ressourcenmanager nicht alle aufgef√ºhrten Protokolle unterst√ºtzen. Beispielsweise unterst√ºtzen MSMQ und SQL Server 2000 Lightweight nicht, sodass Transaktionen mit MSMQ oder SQL Server 2000 von MSDTC verwaltet werden, selbst wenn sie die einzigen Teilnehmer sind. Technisch ergibt sich diese Einschr√§nkung aus der Tatsache, dass die angegebenen Ressourcenmanager nat√ºrlich die Schnittstelle implementieren</font></font><code>System.Transactions.IEnlistmentNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Implementieren Sie die Schnittstelle nicht </font></font><code>System.Transactions.IPromotableSinglePhaseNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Es enth√§lt unter anderem eine Methode </font></font><code>Promote</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, die die Laufzeit bei Bedarf aufruft, um zu einem steileren Transaktionsmanager zu wechseln. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Mehrdeutigkeit des Konzepts der verteilten Transaktion sollte nun offensichtlich werden. </font><font style="vertical-align: inherit;">Beispielsweise k√∂nnen Sie eine verteilte Transaktion als eine Transaktion definieren, an der sie teilnimmt:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> mindestens zwei Ressourcenmanager; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> willk√ºrlich variable Ressourcenmanager und mindestens zwei langlebige; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Mindestens zwei Ressourcenmanager befinden sich notwendigerweise auf verschiedenen Computern. </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Daher ist es besser, immer zu kl√§ren, um welche Transaktionen es sich handelt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In diesem Zusammenhang wird vor allem MSDTC diskutiert. </font><font style="vertical-align: inherit;">Es ist eine Softwarekomponente von Windows, die verteilte Transaktionen verwaltet. </font><font style="vertical-align: inherit;">Es gibt eine grafische Oberfl√§che zum Konfigurieren und √úberwachen von Transaktionen, die Sie im Dienstprogramm "Komponentendienste" unter dem Pfad "Computer - Arbeitsplatz - Koordinator f√ºr verteilte Transaktionen - Lokaler DTC" finden.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/vo/35/gc/vo35gcdta3c9qx5w5cnsuxkbzz8.png"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> W√§hlen Sie zur Konfiguration im Kontextmen√º des Knotens ‚ÄûLokaler DTC‚Äú das Element ‚ÄûEigenschaften‚Äú aus. Um verteilte Transaktionen zu √ºberwachen, w√§hlen Sie im zentralen Bereich das Element ‚ÄûTransaktionsstatistik‚Äú aus. </font></font><br><br><a name="TwoPhaseCommit"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Zweiphasige Fixierung </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn mehrere Ressourcenmanager an der Transaktion teilnehmen, k√∂nnen die Ergebnisse ihrer Arbeit unterschiedlich sein: Beispielsweise wurde einer von ihnen erfolgreich abgeschlossen, und er ist bereit, die √Ñnderungen festzuschreiben, und der andere hat einen Fehler, und er wird die √Ñnderungen r√ºckg√§ngig machen. Das Wesentliche einer verteilten Transaktion liegt jedoch in der Tatsache, dass √Ñnderungen an allen an der Transaktion beteiligten Steuerungsressourcen entweder alle zusammen festgeschrieben oder zur√ºckgesetzt werden. Daher wird in solchen F√§llen √ºblicherweise ein zweiphasiges Fixierungsprotokoll verwendet. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Im Allgemeinen ist das Wesentliche dieses Protokolls wie folgt. W√§hrend der </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ersten Phase</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An der Transaktion beteiligte Ressourcenmanager bereiten Informationen vor, die ausreichen, um den Fehler zu beheben (wenn es sich um einen langfristigen Ressourcenmanager handelt) und um als Ergebnis eines Commits erfolgreich abgeschlossen zu werden. Aus technischer Sicht signalisiert der Ressourcenmanager, dass er die erste Phase abgeschlossen hat, indem er die Methode </font></font><code>System.Transactions.PreparingEnlistment.Prepared</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der Methode </font><font style="vertical-align: inherit;">aufruft </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Oder der Ressourcenmanager kann Sie durch Aufrufen der Methode benachrichtigen, dass die √Ñnderungen r√ºckg√§ngig gemacht wurden </font></font><code>ForceRollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn alle an der Transaktion beteiligten Ressourcenmanager ‚Äûabgestimmt‚Äú haben, dh dem Transaktionsmanager mitgeteilt haben, ob sie die √Ñnderungen festschreiben oder zur√ºcksetzen m√∂chten, beginnt die </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zweite Phase</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Zu diesem Zeitpunkt werden Ressourcenmanager angewiesen, ihre √Ñnderungen festzuschreiben (wenn alle Teilnehmer f√ºr die Korrektur gestimmt haben) oder √Ñnderungen abzulehnen (wenn mindestens ein Teilnehmer f√ºr das Rollback gestimmt hat). Technisch wird dies als Methodenaufrufe ausgedr√ºckt </font></font><code>Commit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und </font></font><code>Rollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">die Ressourcenmanager implementieren, und in dem sie verursachen ein Verfahren </font></font><code>System.Transactions.Enlistment.Done</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Ressourcenmanager kann die Methode auch </font></font><code>System.Transactions.Enlistment.Done</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">in der ersten Phase </font><font style="vertical-align: inherit;">aufrufen </font><font style="vertical-align: inherit;">. In diesem Fall wird davon ausgegangen, dass er keine √Ñnderungen vornehmen wird (z. B. nur zum Lesen) und nicht an der zweiten Phase teilnehmen wird. Lesen Sie mehr √ºber das Zwei-Phasen-Commit </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bei Microsoft</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn die Verbindung zwischen dem Transaktionsmanager und mindestens einem der Ressourcenmanager unterbrochen wird, wird die Transaktion eingefroren ("im Zweifel", im Zweifel). </font><font style="vertical-align: inherit;">Der Transaktionsmanager </font></font><code>InDoubt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">benachrichtigt </font><font style="vertical-align: inherit;">durch Aufrufen von Methoden </font><font style="vertical-align: inherit;">verf√ºgbare Ressourcenmanager √ºber dieses Ereignis, die angemessen reagieren k√∂nnen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt immer noch eine </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dreiphasige Fixierung</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> und ihre Modifikationen mit ihren Vor- und Nachteilen. </font><font style="vertical-align: inherit;">Das dreiphasige Festschreibungsprotokoll ist weniger verbreitet, m√∂glicherweise weil es noch mehr Kommunikationskosten zwischen den interagierenden Subsystemen erfordert.</font></font><br><br><a name="Interfaces"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Spickzettel auf System.Transactions-Schnittstellen </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Etwas ist schwierig. Um die Dinge ein wenig zu kl√§ren, werde ich kurz die wichtigsten Namespace-Schnittstellen beschreiben, die </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">zum Erstellen eines Ressourcenmanagers erforderlich sind. Hier ist ein Klassendiagramm.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bs/rj/sx/bsrjsxptqz6w3g7l6zxawrzeyco.png"></div><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IEnlistmentNotification.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Ressourcenmanager implementiert diese Schnittstelle. Der Transaktionsmanager ruft die implementierten Methoden in der folgenden Reihenfolge auf. In der ersten Phase ruft er die Methode auf </font></font><code>Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(es sei denn, die Sterne kamen zusammen, um die Methode aufzurufen </font></font><code>ISinglePhaseNotification.SinglePhaseCommit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, wie im n√§chsten Absatz beschrieben). Bei dieser Methode speichert der Ressourcenmanager die Informationen, die zur Wiederherstellung nach einem Fehler erforderlich sind, bereitet die endg√ºltige Festschreibung von √Ñnderungen auf seiner Seite vor und stimmt ab, die √Ñnderungen festzuschreiben oder zur√ºckzusetzen. Wenn es eine zweite Phase kommt, in </font><font style="vertical-align: inherit;">Abh√§ngigkeit von der Verf√ºgbarkeit von Ressourcen und die </font><font style="vertical-align: inherit;">Kontrolle √ºber die Abstimmungsergebnisse der Steuer Transaktion ist ein von drei Methoden: </font></font><code>Commit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>InDoubt</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><code>Rollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ISinglePhaseNotification.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Ressourcenmanager implementiert diese Schnittstelle, wenn er dem Transaktionsmanager die M√∂glichkeit geben m√∂chte, die Ausf√ºhrung zu optimieren, indem er die zweite Festschreibungsphase reduziert. Wenn der Transaktionsmanager nur einen Ressourcenmanager sieht, versucht er in der ersten Festschreibungsphase </font></font><code>SinglePhaseCommit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(stattdessen </font></font><code>IEnlistmentNotification.Prepare</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), </font><font style="vertical-align: inherit;">die Methode des Ressourcenmanagers aufzurufen </font><font style="vertical-align: inherit;">und damit die Abstimmung und den √úbergang zur zweiten Phase auszuschlie√üen. Dieser Ansatz hat Vor- und Nachteile, √ºber die Microsoft hier am deutlichsten geschrieben </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hat</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ITransactionPromoter.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Ressourcenmanager implementiert diese Schnittstelle (nicht nur direkt, sondern √ºber die Schnittstelle</font></font><code>IPromotableSinglePhaseNotification</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">), wenn er dem Transaktionsmanager die M√∂glichkeit geben m√∂chte, das Lightweight-Protokoll auch bei Fernaufrufen einzuhalten, bis andere Bedingungen auftreten, die eine Protokollkomplikation erfordern. Wenn Sie das Protokoll komplizieren m√ºssen, wird die Methode aufgerufen </font></font><code>Promote</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IPromotableSinglePhaseNotification.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der Ressourcenmanager implementiert diese Schnittstelle, um zum einen die Schnittstelle zu implementieren </font></font><code>ITransactionPromoter</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und zum anderen, damit der Transaktionsmanager einphasiges Festschreiben, Aufrufen von Methoden </font></font><code>IPromotableSinglePhaseNotification.SinglePhaseCommit</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und verwenden kann </font></font><code>IPromotableSinglePhaseNotification.Rollback</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Der Transaktionsmanager ruft eine Methode </font></font><code>IPromotableSinglePhaseNotification.Initialize</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">auf, um die erfolgreiche Registrierung des Ressourcenmanagers auf vereinfachte Weise zu markieren. Mehr oder weniger kann dies aus </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">einem Microsoft-Dokument verstanden werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Schauen wir uns etwas mehr an</font></font><code>System.Transactions.Enlistment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und seine Erben. Dieser Instanztyp wird vom Transaktionsmanager bereitgestellt, wenn er die vom Ressourcenmanager implementierten Schnittstellenmethoden aufruft.</font></font><br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/qi/bd/xc/qibdxcddktegq5h2xnpuaelygj0.png"></div><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Einberufung. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Ressourcenmanager kann eine einzelne Methode dieses Typs - </font></font><code>Done</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, - </font><font style="vertical-align: inherit;">aufrufen </font><font style="vertical-align: inherit;">, um den erfolgreichen Abschluss seines Teils der Arbeit zu signalisieren. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vorbereitung der Eintragung. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit einer Instanz dieses Typs w√§hrend der ersten Festschreibungsphase kann der Ressourcenmanager seine Absicht signalisieren, die √Ñnderungen festzuschreiben oder zur√ºckzusetzen. </font><font style="vertical-align: inherit;">Ein langlebiger Ressourcenmanager kann auch die Informationen abrufen, die zur Wiederherstellung nach einem Systemfehler erforderlich sind. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SinglePhaseEnlistment. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mit einer Instanz dieses Typs kann der Ressourcenmanager dem Transaktionsmanager mithilfe eines vereinfachten Schemas (einphasiges Festschreiben) Informationen √ºber die Ergebnisse seiner Arbeit √ºbermitteln.</font></font><br><br><a name="LimitationsAndAlternatives"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Einschr√§nkungen und Alternativen f√ºr verteilte Software-Transaktionen </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine kurze Untersuchung der im Internet gefundenen Meinungen zeigt, dass verteilte Transaktionen in vielen Bereichen aus der Mode kommen. Schauen Sie </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sich</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zum Beispiel </font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;">diesen b√∂swilligen Kommentar</font></a><font style="vertical-align: inherit;"> an </font><font style="vertical-align: inherit;">. Das Hauptziel der Kritik, die kurz erw√§hnt </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hier</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - synchron (Blockierung) ist die Art von verteilten Transaktionen. Wenn ein Benutzer eine Anforderung sendet, w√§hrend deren Verarbeitung eine verteilte Transaktion organisiert wurde, erh√§lt er eine Antwort erst, nachdem (erfolgreich oder fehlerhaft) alle in der Transaktion enthaltenen Subsysteme die Arbeit beendet haben. Gleichzeitig gibt es eine von der Forschung gest√ºtzte Meinung, dass das Zwei-Phasen-Festschreibungsprotokoll eine schlechte Leistung aufweist, insbesondere mit einer Zunahme der Anzahl der an der Transaktion beteiligten Subsysteme, wie beispielsweise in erw√§hnt</font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diese Ver√∂ffentlichung auf "Habr√©"</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn der Ersteller des Systems es vorzieht, die Antwort so schnell wie m√∂glich an den Benutzer zur√ºckzusenden und die Datenkoordination auf einen sp√§teren Zeitpunkt zu verschieben, ist eine andere L√∂sung f√ºr ihn besser geeignet. Im Kontext des Brewer-Theorems ( </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CAP-Theorem</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) k√∂nnen wir sagen, dass verteilte Transaktionen f√ºr F√§lle geeignet sind, in denen Datenkonsistenz wichtiger ist als Verf√ºgbarkeit.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Es gibt andere praktische Einschr√§nkungen f√ºr die Verwendung von Software-verteilten Transaktionen. Beispielsweise wurde experimentell festgestellt, dass verteilte Transaktionen, die das OleTx-Protokoll verwenden, keine Netzwerkdom√§nen √ºberschreiten sollten. Auf jeden Fall waren lange Versuche, sie zur Arbeit zu bringen, nicht erfolgreich. Dar√ºber hinaus wurde festgestellt, dass die Interaktion zwischen mehreren Instanzen von Oracle Database (verteilte Datenbanktransaktionen) die Anwendbarkeit von verteilten Software-Transaktionen erheblich einschr√§nkt (erneut fehlgeschlagen).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Was sind die Alternativen zu verteilten Transaktionen? Zun√§chst muss ich sagen, dass es sehr schwierig sein wird, auf technische Transaktionen (normal, nicht verteilt) zu verzichten. Es gibt wahrscheinlich Prozesse im System, die die Datenintegrit√§t vor√ºbergehend st√∂ren k√∂nnen, und es wird notwendig sein, diese Prozesse irgendwie zu √ºberwachen. Ebenso kann sich in Bezug auf den Themenbereich ein Konzept ergeben, das einen Prozess umfasst, der durch eine Reihe von Prozessen in verschiedenen technischen Systemen implementiert wird und im Bereich integraler Daten beginnen und enden sollte. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wenn wir zu Alternativen zu verteilten Transaktionen √ºbergehen, k√∂nnen wir L√∂sungen feststellen, die auf Messaging-Diensten wie RabbitMQ und Apache Kafka basieren. In </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieser Ver√∂ffentlichung zu "Habr√©" werden</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> vier solcher L√∂sungen betrachtet:</font></font><br><br><ol><li>   ,        ,    ; </li><li>    ,           (Transaction Log Tailing); </li><li>       ,       ; </li><li>             (Event Sourcing). </li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine weitere Alternative ist die Saga-Vorlage. Es handelt sich um eine Kaskade von Subsystemen mit ihren lokalen Transaktionen. Nach Abschluss der Arbeiten ruft jedes System Folgendes auf (entweder unabh√§ngig oder mit Hilfe eines Koordinators). F√ºr jede Transaktion gibt es eine entsprechende Stornierungstransaktion, und anstatt die Kontrolle zu √ºbertragen, kann das Subsystem die Stornierung von √Ñnderungen initiieren, die zuvor von den vorherigen Subsystemen vorgenommen wurden. Auf "Habr√©" gibt es einige gute Artikel √ºber die Vorlage "Saga". Zum Beispiel in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dieser Ver√∂ffentlichung ist</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die allgemeine Information √ºber die ACID Prinzipien sind in mikrosluzhbah beibehalten, und in </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">diesem Artikel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> beschreibt die Fallstudie Vorlage ‚ÄûSaga‚Äú mit dem Koordinator.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In unserem Unternehmen verwenden einige Produkte erfolgreich Software-verteilte Transaktionen √ºber WCF, es gibt jedoch auch andere Optionen. Als wir einmal versuchten, Freunde mit verteilten Transaktionen zu einem neuen System zu machen, hatten wir viele Probleme, einschlie√ülich einer Kollision mit den oben beschriebenen Einschr√§nkungen und parallelen Problemen bei der Aktualisierung der Software-Infrastruktur. Daher haben wir unter Bedingungen eines Mangels an Ressourcen f√ºr die Durchf√ºhrung einer anderen Kapitalentscheidung die folgenden Taktiken angewendet. Der angerufene Teilnehmer erfasst die √Ñnderungen in jedem Fall, stellt jedoch fest, dass sie sich in einem Entwurfszustand befinden, sodass diese √Ñnderungen den Betrieb des angerufenen Systems noch nicht beeintr√§chtigen. Wenn der Anrufer dann seine Arbeit √ºber eine verteilte Transaktion abschlie√üt, aktiviert das DBMS die vom aufgerufenen System vorgenommenen √Ñnderungen. Auf diese Weise,Anstelle von Software-verteilten Transaktionen verwendeten wir verteilte DBMS-Transaktionen, die sich in diesem Fall als viel zuverl√§ssiger herausstellten.</font></font><br><br><a name="NetCore"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Also ist es in .NET Core? </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In .NET Core (und sogar in .NET Standard) gibt es alle erforderlichen Typen zum Organisieren von Transaktionen und zum Erstellen eines eigenen Ressourcenmanagers. </font><font style="vertical-align: inherit;">Leider </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">haben </font><font style="vertical-align: inherit;">basierende Transaktionen in .NET Core </font><font style="vertical-align: inherit;">eine schwerwiegende Einschr√§nkung: Sie funktionieren nur mit dem Lightweight-Protokoll. </font><font style="vertical-align: inherit;">Wenn beispielsweise zwei dauerhafte Ressourcenmanager im Code verwendet werden, l√∂st die Umgebung zur Laufzeit eine Ausnahme aus, sobald der zweite Manager aufgerufen wird.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Tatsache ist, dass sie versuchen, .NET Core vom Betriebssystem unabh√§ngig zu machen, sodass die Verkn√ºpfung zu Transaktionsmanagern wie KTM und MSDTC ausgeschlossen ist, dh sie werden zur Unterst√ºtzung von Transaktionen mit den angegebenen Eigenschaften ben√∂tigt. </font><font style="vertical-align: inherit;">Es ist m√∂glich, dass die Verbindung von Transaktionsmanagern in Form von Plug-Ins implementiert wird. Bisher wurde dies jedoch mit einer Heugabel geschrieben, sodass Sie sich noch nicht auf die industrielle Verwendung verteilter Transaktionen in .NET Core verlassen k√∂nnen. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Erfahrungsgem√§√ü k√∂nnen Sie die Unterschiede bei verteilten Transaktionen in .NET Framework und in .NET Core √ºberpr√ºfen, indem Sie denselben Code schreiben, ihn kompilieren und auf verschiedenen Plattformen ausf√ºhren.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Beispiel f√ºr einen solchen Code, der SQL Server und Oracle Database nacheinander aufruft.</font></font></b> <div class="spoiler_text"><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] args</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scope = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Transactions.TransactionScope(System.Transactions.TransactionScopeOption.Required)) { MsSqlServer(); Oracle(); scope.Complete(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Oracle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Oracle.ManagedDataAccess.Client.OracleConnection(<span class="hljs-string"><span class="hljs-string">"User Id=some_user;Password=some_password;Data Source=some_db"</span></span>)) { conn.Open(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cmd = conn.CreateCommand()) { cmd.CommandText = <span class="hljs-string"><span class="hljs-string">"update t_hello set id_hello = 2 where id_hello = 1"</span></span>; cmd.ExecuteNonQuery(); } conn.Close(); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MsSqlServer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> builder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Data.SqlClient.SqlConnectionStringBuilder { DataSource = <span class="hljs-string"><span class="hljs-string">"some_computer\\some_db"</span></span>, UserID = <span class="hljs-string"><span class="hljs-string">"some_user"</span></span>, Password = <span class="hljs-string"><span class="hljs-string">"some_password"</span></span>, InitialCatalog = <span class="hljs-string"><span class="hljs-string">"some_scheme"</span></span>, Enlist = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, }; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> conn = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.Data.SqlClient.SqlConnection(builder.ConnectionString)) { conn.Open(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cmd = conn.CreateCommand()) { cmd.CommandText = <span class="hljs-string"><span class="hljs-string">"update t_hello set id_hello = 2 where id_hello = 1"</span></span>; cmd.ExecuteNonQuery(); } conn.Close(); } }</code> </pre> </div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Build-Ready-Projekte </font></font><a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sind auf GitHub</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Das Ausf√ºhren des Beispiels f√ºr .NET Core schl√§gt fehl. </font><font style="vertical-align: inherit;">Der Ort und der Typ der ausgel√∂sten Ausnahme h√§ngen von der Reihenfolge des DBMS-Aufrufs ab. In jedem Fall weist diese Ausnahme jedoch auf eine ung√ºltige Transaktionsoperation hin. </font><font style="vertical-align: inherit;">Das Ausf√ºhren des Beispiels f√ºr .NET Framework ist erfolgreich, wenn MSDTC zu diesem Zeitpunkt ausgef√ºhrt wird. </font><font style="vertical-align: inherit;">In der grafischen Oberfl√§che von MSDTC k√∂nnen Sie jedoch die Registrierung einer verteilten Transaktion beobachten.</font></font><br><br><a name="WCF"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Verteilte Transaktionen und WCF </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Windows Communication Foundation (WCF) ist das .NET-Framework zum Organisieren und Aufrufen von Netzwerkdiensten. Im Vergleich zu den modischeren REST- und ASP.NET-Web-API-Ans√§tzen hat es seine eigenen Vor- und Nachteile. WCF ist mit .NET-Transaktionen sehr gut befreundet, und in der Welt von .NET Framework ist es praktisch, es zum Organisieren von Transaktionen zu verwenden, die zwischen dem Client und dem Dienst verteilt werden. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In .NET Core funktioniert diese Technologie nur auf der Clientseite. Das hei√üt, Sie k√∂nnen keinen Dienst erstellen, sondern nur auf einen vorhandenen Dienst verweisen. Dies ist jedoch nicht sehr wichtig, da, wie oben erw√§hnt, bei verteilten Transaktionen in .NET Core die Dinge √ºberhaupt nicht gut laufen. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wie WCF funktioniert</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">F√ºr Leser, die mit WCF nicht vertraut sind, finden Sie hier die k√ºrzesten Hintergrundinformationen zur Praxis dieser Technologie. Kontext - zwei Informationssysteme, die als Client und Service bezeichnet werden. Der Client greift zur Laufzeit auf ein anderes Informationssystem zu, das den f√ºr den Client interessanten Dienst unterst√ºtzt, und erfordert, dass eine Operation ausgef√ºhrt wird. Anschlie√üend wird die Verwaltung an den Client zur√ºckgegeben.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Um einen Dienst in WCF zu erstellen, m√ºssen Sie normalerweise eine Schnittstelle schreiben, die den Vertrag f√ºr den zu erstellenden Dienst beschreibt, und eine Klasse, die diese Schnittstelle implementiert. Die Klasse und die Schnittstelle sind mit speziellen WCF-Attributen gekennzeichnet, die sie von den √ºbrigen Typen unterscheiden und einige Details des Verhaltens w√§hrend der Ermittlung und des Aufrufs des Dienstes angeben. Diese Typen sind in einen Server eingebunden (z. B. in eine DLL, f√ºr die IIS festgelegt ist) und werden durch eine Konfigurationsdatei (es gibt Optionen) erg√§nzt, in der Details zur Dienstimplementierung angegeben sind. Nach dem Start kann auf den Dienst beispielsweise unter der Netzwerkadresse zugegriffen werden. Im Internetbrowser sehen Sie die Vertr√§ge, die der angeforderte Dienst implementiert.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ein Programmierer, der auf einen vorhandenen WCF-Dienst zugreifen m√∂chte, verwendet ein in die Entwicklungsumgebung integriertes Konsolendienstprogramm oder eine grafische Oberfl√§che, um Typen in C # (oder einer anderen unterst√ºtzten Sprache) zu bilden, die Servicevertr√§gen an der Adresse des Dienstes entsprechen. Die Datei mit den erhaltenen Typen ist im Clientanwendungsprojekt enthalten. Danach verwendet der Programmierer dieselben Begriffe, die in der Serviceschnittstelle enthalten sind, und nutzt die Vorteile des Fortschritts (statische Typisierung). Dar√ºber hinaus gibt die Konfigurationsdatei des Clients die technischen Merkmale des aufgerufenen Dienstes an (sie kann auch ohne Konfigurationsdatei im Code konfiguriert werden).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WCF unterst√ºtzt verschiedene Arten von Transport, Verschl√ºsselung und anderen subtileren technischen Parametern. </font><font style="vertical-align: inherit;">Die meisten von ihnen sind durch das Konzept der "Bindung" (Bindung) verbunden. </font><font style="vertical-align: inherit;">Der WCF-Dienst verf√ºgt √ºber drei wichtige Parameter:</font></font><br><br><ol><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> die Adresse, unter der es verf√ºgbar ist; </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Bindung </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Vertrag (Schnittstellen). </font></font></li></ol><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Alle diese Parameter werden in den Service- und Client-Konfigurationsdateien festgelegt. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In unserem Unternehmen wird WCF (mit und ohne verteilte Transaktionen) h√§ufig in implementierten Produkten verwendet. Angesichts der Modetrends ist die Verwendung in neuen Produkten jedoch immer noch fraglich. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">So initiieren Sie verteilte Transaktionen in WCF</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Um initiierte Transaktionen in WCF zu initiieren </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, muss der Programmierer mehrere Attribute im Code festlegen, sicherstellen, dass die verwendeten Bindungen verteilte Transaktionen unterst√ºtzen, </font></font><code>transactionFlow="true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">dass </font><font style="vertical-align: inherit;">sie auf dem Client und im Service geschrieben sind </font><font style="vertical-align: inherit;">und dass der entsprechende Transaktionsmanager auf allen beteiligten Computern ausgef√ºhrt wird (h√∂chstwahrscheinlich) wird es MSDTC sein).</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verteilte Transaktionsbindungen: NetTcpBinding, NetNamedPipeBinding, WSHttpBinding, WSDualHttpBinding und WSFederationHttpBinding. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Die Methode (Operation) der Serviceschnittstelle muss mit einem Attribut gekennzeichnet sein </font></font><code>System.ServiceModel.TransactionFlowAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Bei bestimmten Attributparametern und beim Festlegen des </font></font><code>TransactionScopeRequired</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attributparameters </font><font style="vertical-align: inherit;">wird </font><font style="vertical-align: inherit;">die </font></font><code>System.ServiceModel.OperationBehaviorAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaktion dann zwischen dem Client und dem Dienst verteilt. </font><font style="vertical-align: inherit;">Dar√ºber hinaus wird standardm√§√üig davon ausgegangen, dass der Dienst f√ºr das Festschreiben der Transaktion abstimmt, es sei denn, zur Laufzeit wird eine Ausnahme ausgel√∂st. </font><font style="vertical-align: inherit;">Um dieses Verhalten zu √§ndern, m√ºssen Sie den entsprechenden </font></font><code>TransactionAutoComplete</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attributparameterwert </font><font style="vertical-align: inherit;">festlegen </font></font><code>System.ServiceModel.OperationBehaviorAttribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Der Code f√ºr einen einfachen WCF-Dienst, der verteilte Transaktionen unterst√ºtzt.</font></font></b> <div class="spoiler_text"><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">System.ServiceModel.ServiceContract</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IMyService</span></span> { [System.ServiceModel.OperationContract] [System.ServiceModel.TransactionFlow(System.ServiceModel.TransactionFlowOption.Mandatory)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input</span></span></span><span class="hljs-function">)</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyService</span></span> : <span class="hljs-title"><span class="hljs-title">IMyService</span></span> { [System.ServiceModel.OperationBehavior(TransactionScopeRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] [System.ServiceModel.TransactionFlow(System.ServiceModel.TransactionFlowOption.Mandatory)] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoSomething</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> input</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (input == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> System.ArgumentNullException(<span class="hljs-keyword"><span class="hljs-keyword">nameof</span></span>(input)); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> input.Length; } }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Offensichtlich unterscheidet es sich vom regul√§ren Servicecode nur in der Verwendung des Attributs </font></font><code>System.ServiceModel.TransactionFlow</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">und in der speziellen Einstellung des Attributs </font></font><code>System.ServiceModel.OperationBehavior</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font></div></div><br><div class="spoiler"> <b class="spoiler_title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispielkonfiguration f√ºr diesen Dienst.</font></font></b> <div class="spoiler_text"><pre> <code class="cs hljs">&lt;system.serviceModel&gt; &lt;services&gt; &lt;service name=<span class="hljs-string"><span class="hljs-string">"WcfWithTransactionsExample.MyService"</span></span> behaviorConfiguration=<span class="hljs-string"><span class="hljs-string">"serviceBehavior"</span></span>&gt; &lt;endpoint address=<span class="hljs-string"><span class="hljs-string">""</span></span> binding=<span class="hljs-string"><span class="hljs-string">"wsHttpBinding"</span></span> bindingConfiguration=<span class="hljs-string"><span class="hljs-string">"mainWsBinding"</span></span> contract=<span class="hljs-string"><span class="hljs-string">"WcfWithTransactionsExample.IMyService"</span></span>/&gt; &lt;endpoint address=<span class="hljs-string"><span class="hljs-string">"mex"</span></span> contract=<span class="hljs-string"><span class="hljs-string">"IMetadataExchange"</span></span> binding=<span class="hljs-string"><span class="hljs-string">"mexHttpBinding"</span></span>/&gt; &lt;/service&gt; &lt;/services&gt; &lt;bindings&gt; &lt;wsHttpBinding&gt; &lt;binding name=<span class="hljs-string"><span class="hljs-string">"mainWsBinding"</span></span> maxReceivedMessageSize=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span> maxBufferPoolSize=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span> transactionFlow=<span class="hljs-string"><span class="hljs-string">"true"</span></span> closeTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span> openTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span> receiveTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span> sendTimeout=<span class="hljs-string"><span class="hljs-string">"00:10:00"</span></span>&gt; &lt;security mode=<span class="hljs-string"><span class="hljs-string">"None"</span></span>/&gt; &lt;readerQuotas maxArrayLength=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span> maxStringContentLength=<span class="hljs-string"><span class="hljs-string">"209715200"</span></span>/&gt; &lt;/binding&gt; &lt;/wsHttpBinding&gt; &lt;/bindings&gt; &lt;/system.serviceModel&gt;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beachten Sie, dass die Bindung vom Typ WSHttpBinding ist und das Attribut verwendet wird </font></font><code>transactionFlow="true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">.</font></font><br></div></div><br><a name="TLDR3"></a><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> TL; DR-Abschnitt </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verteilte Transaktionen umfassen mehrere Ressourcenmanager, und alle √Ñnderungen m√ºssen entweder festgeschrieben oder zur√ºckgesetzt werden. Einige moderne DBMS implementieren verteilte Transaktionen, die einen bequemen Mechanismus zum Verbinden mehrerer Datenbanken bieten. Verteilte Transaktionen mit Software (nicht in DBMS implementiert) k√∂nnen verschiedene Kombinationen von Ressourcenmanagern auf verschiedenen Computern enthalten, auf denen verschiedene Betriebssysteme ausgef√ºhrt werden. Sie weisen jedoch Einschr√§nkungen auf, die ber√ºcksichtigt werden m√ºssen, bevor Sie sich auf sie verlassen k√∂nnen. Eine moderne Alternative zu verteilten Transaktionen sind Messaging-L√∂sungen. In .NET Core werden verteilte Transaktionen noch nicht unterst√ºtzt.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WCF ist eines der standardm√§√üigen und bew√§hrten Tools zum Erstellen und Zugreifen auf Dienste in der .NET-Welt und unterst√ºtzt verschiedene Arten von Transport und Verschl√ºsselung. </font><font style="vertical-align: inherit;">WCF ist sehr eng mit verteilten Transaktionen befreundet </font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font><font style="vertical-align: inherit;">Das Einrichten verteilter Transaktionen f√ºr WCF besteht darin, den Code mit mehreren Attributen zu markieren und den Dienst- und Clientkonfigurationsdateien einige W√∂rter hinzuzuf√ºgen. </font><font style="vertical-align: inherit;">Nicht alle WCF-Bindungen unterst√ºtzen verteilte Transaktionen. </font><font style="vertical-align: inherit;">Dar√ºber hinaus ist klar, dass Transaktionen in WCF dieselben Einschr√§nkungen aufweisen wie ohne Verwendung von WCF. </font><font style="vertical-align: inherit;">Mit der .NET Core-Plattform k√∂nnen Sie bisher nur auf Dienste in WCF zugreifen, anstatt sie zu erstellen.</font></font><br><br><a name="Conclusion"></a><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Fazit Krippe </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Dieser Beitrag bietet einen √úberblick √ºber die Grundlagen von .NET-Softwaretransaktionen. Einige Schlussfolgerungen zu Trends bei Softwaretransaktionen finden Sie in den Abschnitten zur Anwendbarkeit und zu den Einschr√§nkungen der behandelten Themen. Abschlie√üend werden die wichtigsten Thesen der Ver√∂ffentlichung zusammengefasst. Ich nehme an, dass sie als Spickzettel verwendet werden k√∂nnen, wenn Softwaretransaktionen als eine der Optionen zur Implementierung eines technischen Systems oder zum Aktualisieren relevanter Informationen im Speicher betrachtet werden. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaktionen (Themenbereich, DBMS, Software)</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Dom√§nenanforderungen werden manchmal in Form von Transaktionen formuliert - Operationen, die, beginnend im Bereich integraler Daten, nach Abschluss (einschlie√ülich erfolglos) auch in den Bereich integraler Daten (m√∂glicherweise bereits anders) fallen sollten. Diese Anforderungen werden normalerweise als Systemtransaktionen implementiert. Ein klassisches Beispiel f√ºr eine Transaktion ist die √úberweisung von Geld zwischen zwei Konten, die aus zwei unteilbaren Vorg√§ngen besteht: Abheben von Geld von einem Konto und Gutschrift auf einem anderen. Neben den bekannten Transaktionen, die vom DBMS implementiert werden, gibt es auch Softwaretransaktionen, beispielsweise in der .NET-Welt. Ressourcenmanager sind Softwarekomponenten, die sich der Existenz solcher Transaktionen bewusst sind und in diese einbezogen werden k√∂nnen, dh vorgenommene √Ñnderungen festschreiben oder zur√ºcksetzen.Ressourcenmanager erhalten vom Transaktionsmanager, der die Grundlage der Infrastruktur bildet, Anweisungen zum Festschreiben und Zur√ºcksetzen von √Ñnderungen</font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Langlebige und zeitweise Ressourcenmanager.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Langfristige Ressourcenmanager unterst√ºtzen die Datenwiederherstellung nach einem Systemausfall. DBMS-Treiber f√ºr .NET bieten normalerweise solche Funktionen. Intermittierende Ressourcenmanager </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">unterst√ºtzen keine</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Notfallwiederherstellung. Der programmatische Transaktionsspeicher - eine M√∂glichkeit zur Verwaltung von Objekten im RAM - kann als Beispiel f√ºr einen unbest√§ndigen Ressourcenmanager angesehen werden. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Transaktionen und .NET-Ressourcenmanager.</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Der .NET-Programmierer verwendet Softwaretransaktionen und erstellt seine eigenen Ressourcenmanager mithilfe von Typen aus dem Namespace</font></font><code>System.Transactions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. Diese Infrastruktur erm√∂glicht die Verwendung von Transaktionen mit verschiedenen Verschachtelungen und Isolationen (mit bekannten Einschr√§nkungen). Die Verwendung von Transaktionen ist nicht kompliziert und besteht darin, den Code in einen Block </font></font><code>using</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">mit bestimmten Merkmalen zu </font><font style="vertical-align: inherit;">verpacken </font><font style="vertical-align: inherit;">. Die auf diese Weise in die Transaktion einbezogenen Ressourcenmanager m√ºssen jedoch die erforderlichen Funktionen f√ºr ihren Teil beibehalten. Die Verwendung heterogener Ressourcenmanager in einer Transaktion oder die Verwendung eines Managers auf unterschiedliche Weise kann eine Transaktion automatisch in eine verteilte verwandeln. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verteilte Transaktionen (DBMS, Software).</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Eine verteilte Transaktion umfasst mehrere Subsysteme, deren √Ñnderungen synchronisiert werden m√ºssen, dh sie werden entweder alle zusammen festgeschrieben oder zur√ºckgesetzt. Verteilte Transaktionen sind in einigen modernen DBMS implementiert. Durch Software verteilte Transaktionen (dies sind nicht diejenigen, die vom DBMS implementiert werden) unterliegen zus√§tzlichen Einschr√§nkungen f√ºr die interagierenden Prozesse und Plattformen. Verteilte Transaktionen geraten nach und nach aus der Mode und weichen L√∂sungen, die auf Messaging-Diensten basieren. Um eine normale Transaktion in eine verteilte zu verwandeln, muss der Programmierer nichts tun: Wenn zur Laufzeit ein Ressourcenmanager mit bestimmten Merkmalen in der Transaktion enthalten ist, f√ºhrt der Transaktionsmanager automatisch alles aus, was erforderlich ist. Regelm√§√üige Softwaretransaktionen sind in .NET Core und .NET Standard verf√ºgbar, verteilte Transaktionen sind nicht verf√ºgbar.</font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Verteilte Transaktionen √ºber WCF. </font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">WCF ist eines der Standard-.NET-Tools zum Erstellen und Aufrufen von Diensten, das auch standardisierte Protokolle unterst√ºtzt. </font><font style="vertical-align: inherit;">Mit anderen Worten, auf WCF-Dienste, die auf eine bestimmte Weise konfiguriert sind, kann von jeder Anwendung aus zugegriffen werden, nicht nur von .NET oder Windows. </font><font style="vertical-align: inherit;">Um eine verteilte Transaktion √ºber WCF zu erstellen, m√ºssen Sie die Typen, aus denen der Dienst besteht, mit zus√§tzlichen Attributen kennzeichnen und minimale √Ñnderungen an den Dienst- und Clientkonfigurationsdateien vornehmen. </font><font style="vertical-align: inherit;">Sie k√∂nnen keine WCF-Dienste in .NET Core und .NET Standard erstellen, aber Sie k√∂nnen WCF-Clients erstellen. </font></font><br><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Beispiel f√ºr die √úberpr√ºfung von System.Transactions auf GitHub</font></font></a> <br><br><div class="spoiler">  <b class="spoiler_title">Referenzen</b> <div class="spoiler_text"><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Grundbegriffe </font></font></h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">ACID</a> ( ¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a> ( Microsoft) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> ( Microsoft) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  </a> ( ¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> ( ¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u="> </a> ( ¬´¬ª) <br><br><h4>     </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   X/Open XA</a> ( The Open Group) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">Java Transaction API</a> ( ¬´¬ª) <br> <a href="">     Cache</a> (  InterSystems) <br><br><h4>   .NET </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">   .NET</a> (   Tech Blog Collection) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     TransactionScope</a> (¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">  ,     </a> ( Microsoft) <br> <a href="">   .NET Standard 2.0</a> ( .NET Standard  GitHub) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">       </a> ( YarFullStack) <br><br><h4>    </h4><br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     </a> (¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     </a> (¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    ¬´¬ª     </a> (¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">     ¬´¬ª  </a> (¬´¬ª) <br> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=">    </a> (¬´¬ª) <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Editorial</b> <div class="spoiler_text"><ul><li> 20.12.2018 . </li><li> 21.12.2018  .      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">OlegAxenow</a> . </li><li> 23.12.2018      <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=de&amp;u=" class="user_link">qw1</a> . </li></ul><br></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de433136/">https://habr.com/ru/post/de433136/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de433122/index.html">React-Hot-Loader v4.6</a></li>
<li><a href="../de433126/index.html">Zabbix Review: So organisieren Sie eine Code√ºberpr√ºfung zur √úberwachung der Konfiguration</a></li>
<li><a href="../de433128/index.html">Was IT-Profis spielen und was nicht (Bulletin 2018)</a></li>
<li><a href="../de433130/index.html">M√∂ge Gewalt mit uns sein: unsere eigene Immunit√§t gegen Krebs</a></li>
<li><a href="../de433132/index.html">"Testerkalender" f√ºr Dezember. Versuchen Sie einen anderen Ansatz</a></li>
<li><a href="../de433138/index.html">F√ºnf Prinzipien des Produktdesigns bei Booking</a></li>
<li><a href="../de433140/index.html">Bereites Google Pay Client-Modul</a></li>
<li><a href="../de433142/index.html">Zeitlose Klassiker oder eine √úbersicht √ºber neue Angriffsmethoden √ºber Microsoft Office</a></li>
<li><a href="../de433144/index.html">.NET Core 2.2 ver√∂ffentlicht. Was gibt's Neues? (1 von 3)</a></li>
<li><a href="../de433146/index.html">[Wettbewerb] Top 25 Spielekonsolen (alte Zeiten ersch√ºttern)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>