<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🚬 🥝 🤹🏽 Comprendre le code propre sur Android 👋 👆 🛌🏽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="En guise d'introduction, je voudrais rappeler la citation de l' oncle Bob 
 Vous lisez cet article pour deux raisons. Le premier - vous êtes programme...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Comprendre le code propre sur Android</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/443662/">  En guise d'introduction, je voudrais rappeler la citation de l' <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">oncle Bob</a> <br><blockquote>  Vous lisez cet article pour deux raisons.  Le premier - vous êtes programmeur, le second - vous voulez être le meilleur programmeur. </blockquote><a name="habracut"></a>  Imaginez que vous êtes dans une bibliothèque et que vous cherchez des livres.  Si la bibliothèque est triée, a des catégories de livres, vous trouverez rapidement celui dont vous avez besoin.  De plus, la décoration intérieure et l'architecture fraîches rendront votre séjour dans cette bibliothèque très confortable pour vous. <br><br>  Comme pour l'écriture de livres, si vous voulez créer quelque chose de génial, vous devez savoir comment écrire et organiser votre code.  Si vous avez des membres de l'équipe ou quelqu'un d'autre qui a votre code (obsolète), ils ont juste besoin de voir les noms de variables ou les packages ou les classes, et ils comprendront immédiatement.  Ils n'ont pas besoin de dire «E ** l» dans ce code et de le recommencer à zéro. <br><br><h3>  Qu'est-ce qu'un code propre? </h3><br><img src="https://habrastorage.org/webt/v4/r0/yl/v4r0ylqrnss6avbpaws2xrhfjrq.png"><br><br><div class="spoiler">  <b class="spoiler_title">La traduction</b> <div class="spoiler_text">  Cher programmeur: <br><br>  Quand j'ai écrit ce code, seul Dieu et moi savions comment cela fonctionne! <br>  Maintenant, seul Dieu le sait! <br><br>  Avant d'essayer d'optimiser cette routine et cela ne mènera pas au succès (le plus probable), veuillez augmenter le compteur de temps pour avertir le prochain développeur <br><br>  Nombre total d'heures passées: 567 <br></div></div><br>  Comme vous pouvez le voir, il ne suffit pas de terminer le développement plus rapidement.  Si à l'avenir ils ne peuvent pas comprendre ce code, il deviendra également une dette technique. <br><br>  Votre code est dans un état «pur» si chaque membre de votre équipe peut le comprendre.  Le code propre peut être lu et amélioré par tout développeur autre que l'auteur d'origine.  La compréhension s'accompagne de lisibilité, de mutabilité, d'extensibilité et de maintenabilité. <br><br><h3>  Dois-je m'en occuper? </h3><br>  La raison pour laquelle vous devez vous soucier de la propreté de votre code est que vous décrivez vos pensées à d'autres développeurs.  C'est pourquoi vous devez vous assurer que votre code est plus élégant, simple et lisible. <br><br><h3>  Signes de code propre </h3><br><ul><li>  Votre code doit être élégant: votre code doit vous faire sourire comme une boîte à musique bien faite ou une voiture bien conçue </li><li>  Votre code doit être concentré: chaque fonction, chaque classe, chaque module implémente une tâche, qui ne reste pas du tout distraite et non polluée par les détails environnants. </li><li>  Le code ne contient pas de doublons </li><li>  Réussir tous les tests avec succès </li><li>  Réduction du nombre d'entités, de méthodes, de classes, etc. </li></ul><br><blockquote>  La différence entre un bon programmeur et un professionnel est qu'un programmeur professionnel comprend que la compréhensibilité du code est primordiale.  Un professionnel utilise ce pouvoir pour écrire du code que tout le monde comprend - Robert C. Martin </blockquote><h3>  Écrivez les noms conscients </h3><br>  Choisir un bon nom peut prendre beaucoup de temps, mais cela économisera plus tard.  Le nom d'une variable, d'une fonction, d'une classe doit répondre à toutes les questions importantes.  Il devrait vous expliquer pourquoi il existe, pourquoi il est nécessaire et comment l'utiliser.  Si le nom nécessite un commentaire, le nom ne révèle pas son but <br><br>  Exemple simple <br><br><pre><code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Bad variables naming var a = 0 // user ages var w = 0 // user weight var h = 0 // user height // Bad functions naming fun age() fun weight() fun height() // Bad classes naming to get user data class UserInfo() // Best practices varibales naming var userAge = 0 var userWeight = 0 var userHeight = 0 // Best practices functions naming fun setUserAge() fun setUserWeight() fun setUserHeight() // Best practices classes naming to get user data class Users()</span></span></code> </pre> <br><h3>  Noms de classe </h3><br>  Les classes et les objets doivent être des noms, tels que Custom, WikiPage, Account et AddressParser.  Évitez les mots comme Manager, Processor, Data ou Info.  N'oubliez pas non plus que le nom de la classe ne doit pas être un verbe. <br><br><h3>  Noms des méthodes </h3><br>  Les noms de méthode doivent être des verbes, par exemple postPayment, deletePage ou save.  Les modificateurs d'accès, les prédicats doivent être nommés par leur valeur et avec le préfixe get, défini et selon la norme JavaBean. <br><br>  Avant de continuer, faites une petite pause, faites le plein de café et de biscuits. <br><br><img src="https://habrastorage.org/webt/y3/v6/mq/y3v6mquhag8gv1eacnkv96tcdge.gif"><br><br>  OK, passons maintenant aux principes SOLIDES. <br><br><h3>  Écrire du code adhérant aux principes SOLID </h3><br>  Ces principes ont été développés par Uncle Bob, SOLID est une abréviation qui décrit un ensemble de principes conçus pour écrire du bon code. <br><br><h3>  Principe (s) de responsabilité unique </h3><br>  Cela signifie que chaque classe ne devrait avoir qu'une seule responsabilité.  Il ne devrait jamais y avoir plus d'une raison pour changer une classe.  Pas besoin de tout ajouter à votre classe, simplement parce que vous pouvez le faire.  Divisez les grandes classes en plus petites et évitez les classes divines. <br><br>  Un exemple: <br><br>  Nous avons un RecyclerView.Adapter avec une logique métier à l'intérieur de onBindViewHolder <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyAdapter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> friendList: List&lt;FriendListData.Friend&gt;) : RecyclerView.Adapter&lt;CountryAdapter.MyViewHolder&gt;() { <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyViewHolder</span></span></span></span>(view: View) : RecyclerView.ViewHolder(view) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name: TextView = view.findViewById(R.id.text1) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> popText: TextView = view.findViewById(R.id.text2) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onBindViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(holder: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MyViewHolder</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> friend = friendList[position] <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> status = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(friend.maritalStatus == <span class="hljs-string"><span class="hljs-string">"Married"</span></span>) { <span class="hljs-string"><span class="hljs-string">"Sold out"</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-string"><span class="hljs-string">"Available"</span></span> } holder.name.text = friend.name holder.popText.text = friend.email holder.status.text = status } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItemCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> friendList.size } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(parent: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ViewGroup</span></span></span></span><span class="hljs-function"><span class="hljs-params">, viewType: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: MyViewHolder { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> view = LayoutInflater.from(parent.context).inflate(R.layout.item_friendlist, parent, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MyViewHolder(view) } }</code> </pre> <br>  Cela rend RecyclerView.Adapter non seulement responsable car il contient la logique métier à l'intérieur de onBindViewHolder.  Cette méthode est uniquement responsable de l'insertion de données dans la vue. <br><br><h3>  Le principe d'ouverture / fermeture (O) </h3><br>  Les entités logicielles doivent être ouvertes pour l'expansion, mais fermées pour la modification.  Cela signifie que si vous développez la classe A et vos collègues voudront changer la fonction à l'intérieur de cette classe.  Ils peuvent facilement le faire en développant cette classe sans changer la classe elle-même. <br>  Un exemple simple est la classe RecyclerView.Adapter.  Vous pouvez facilement le développer et créer votre propre adaptateur avec un comportement non standard sans modifier le RecyclerView.Adapter lui-même. <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FriendListAdapter</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> friendList: List&lt;FriendListData.Friend&gt;) : RecyclerView.Adapter&lt;CountryAdapter.MyViewHolder&gt;() { <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyViewHolder</span></span></span></span>(view: View) : RecyclerView.ViewHolder(view) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name: TextView = view.findViewById(R.id.text1) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> popText: TextView = view.findViewById(R.id.text2) } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onBindViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(holder: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">MyViewHolder</span></span></span></span><span class="hljs-function"><span class="hljs-params">, position: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> friend = friendList[position] holder.name.text = friend.name holder.popText.text = friend.email } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getItemCount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> friendList.size } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreateViewHolder</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(parent: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ViewGroup</span></span></span></span><span class="hljs-function"><span class="hljs-params">, viewType: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: MyViewHolder { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> view = LayoutInflater.from(parent.context).inflate(R.layout.item_friendlist, parent, <span class="hljs-literal"><span class="hljs-literal">false</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> MyViewHolder(view) } }</code> </pre> <br><h3>  Le principe de substitution de Barbara Lisk (L) </h3><br>  La classe enfant doit compléter le parent et ne pas la modifier.  Cela signifie que la sous-classe doit remplacer les méthodes parentes qui ne violent pas les fonctionnalités de cette classe parente.  Par exemple, nous créons une interface de classe qui a un écouteur onClick () et ensuite vous appliquez l'écouteur dans MyActivity et lui donnez une action Toast lorsque onClick () est appelé. <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ClickListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyActivity</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppCompatActivity</span></span></span></span>(), ClickListener { <span class="hljs-comment"><span class="hljs-comment">//........ override fun onClick() { // Do the magic here toast("OK button clicked") } }</span></span></code> </pre> <br><h3>  Principe de séparation des interfaces </h3><br>  Ce principe stipule que le client ne doit pas dépendre de méthodes qu'il n'utilise pas. <br>  Cela signifie que si vous voulez écrire la classe A et y ajouter la fonctionnalité d'une autre classe B. Il n'est pas nécessaire de redéfinir toutes les classes A à l'intérieur de la classe B. <br><br>  Exemple: dans notre activité, nous devons implémenter SearchView.OnQueryTextListener (), mais nous n'avons besoin que de la méthode onQuerySubmit (). <br><br><pre> <code class="kotlin hljs">mSearchView.setOnQueryTextListener(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : SearchView.OnQueryTextListener{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextSubmit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-comment"><span class="hljs-comment">// Only need this method return true } override fun onQueryTextChange(query: String?): Boolean { // We don't need to implement this method return false } })</span></span></code> </pre> <br>  Comment fait-on cela?  C'est facile!  Créez simplement un rappel et une classe étendant SearchView.OnQueryTextListener () <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchViewQueryTextCallback</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextSubmit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchViewQueryTextListener</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> callback: SearchViewQueryTextCallback): SearchView.OnQueryTextListener { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextSubmit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { callback.onQueryTextSubmit(query) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } }</code> </pre> <br>  Et donc nous l'ajoutons à notre vue <br><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> listener = SearchViewQueryTextListener( <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : SearchViewQueryTextCallback { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextSubmit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// Do the magic here } } ) mSearchView.setOnQueryTextListener(listener)</span></span></code> </pre> <br>  Ou alors en utilisant la fonction d'extension dans Kotlin <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SearchViewQueryTextCallback</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextSubmit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> SearchView.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupQueryTextSubmit</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(callback: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">SearchViewQueryTextCallback</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { setOnQueryTextListener(<span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : SearchView.OnQueryTextListener{ <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextSubmit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { callback.onQueryTextSubmit(query) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextChange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> } }) }</code> </pre> <br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> listener = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : SearchViewQueryTextCallback { <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onQueryTextSubmit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(query: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// Do the magic here } } mSearchView.setupQueryTextSubmit(listener)</span></span></code> </pre> <br><h3>  Principe d'inversion de dépendance </h3><br>  Dépendance à l'égard des abstractions, sans dépendance à quelque chose de spécifique. <br>  La définition de l'inversion de la dépendance à l'égard de l'oncle Bob se compose de deux concepts. <br><br>  Les modules de niveau supérieur ne doivent pas dépendre de modules de niveau inférieur.  Les deux doivent être liés à des abstractions.  Les abstractions ne devraient pas dépendre des détails.  Les détails doivent dépendre des abstractions.  Les modules de haut niveau qui implémentent une logique complexe devraient être facilement réutilisables sans modification des modules de niveau inférieur.  Pour ce faire, vous devez saisir une abstraction qui sépare les modules des niveaux supérieur et inférieur les uns des autres. <br><br>  Un exemple simple de ce modèle MVP.  Vous disposez d'un objet d'interface qui vous aide à communiquer avec des classes spécifiques.  Ce que cela signifie - les classes d'interface utilisateur (activité / fragment) n'ont pas besoin de connaître la mise en œuvre réelle des méthodes du présentateur.  Ainsi, si vous apportez des modifications à l'intérieur du présentateur, les classes d'interface utilisateur n'ont pas à se soucier de ces modifications. <br><br>  Jetons un coup d'oeil à un exemple <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserActionListener</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getUserData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserPresenter</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">UserActionListener</span></span></span></span>() { <span class="hljs-comment"><span class="hljs-comment">// ..... override fun getUserData() { val userLoginData = gson.fromJson(session.getUserLogin(), DataLogin::class.java) } // ..... }</span></span></code> </pre> <br>  Et maintenant sur l'activité <br><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UserActivity</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">AppCompatActivity</span></span></span></span>() { <span class="hljs-comment"><span class="hljs-comment">//..... val presenter = UserPresenter() override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) // Activity doesn't need to know how presenter works // for fetching data, it just know how to call the functions // So, if you add method inside presenter, it won't break the UI. // even the UI doesn't call the method. presenter.getUserData() } //.... }</span></span></code> </pre> <br>  De cette façon, nous créons une interface qui résume l'implémentation du présentateur, et notre classe view conserve une référence à PresenterInterface. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr443662/">https://habr.com/ru/post/fr443662/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr443652/index.html">Chaque jour sur Outlook j'ai juste de la farine ...</a></li>
<li><a href="../fr443654/index.html">Suivre la trace des calculatrices: Qalculate</a></li>
<li><a href="../fr443656/index.html">Sur les traces des calculatrices: Qalculate</a></li>
<li><a href="../fr443658/index.html">Configuration du cluster Kubernetes HA sur du métal nu, surveillance, journaux et exemples d'utilisation. Partie 3/3</a></li>
<li><a href="../fr443660/index.html">Experts: «Un scanner 3D coûtera 10 fois moins cher qu'une erreur avec un contrôle qualité traditionnel»</a></li>
<li><a href="../fr443664/index.html">Station météo Arduino</a></li>
<li><a href="../fr443666/index.html">Notre approche de la coloration des fils</a></li>
<li><a href="../fr443668/index.html">Retour aux microservices avec Istio. 3e partie</a></li>
<li><a href="../fr443670/index.html">Erreur dans la nouvelle version de Google Chrome (73.0.3683.75)</a></li>
<li><a href="../fr443672/index.html">Tests basés sur les risques</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>