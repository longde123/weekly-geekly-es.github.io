<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🍇 👨‍👨‍👧 🤝 Grâce à l'incroyable pépin dans Ocarina of Time, il a été possible d'ajouter des modèles de Star Fox 64 🙁 ♠️ 👩🏻‍🏫</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Au cours des années d'écriture d'articles sur les jeux, j'ai parlé de nombreux problèmes incroyables , de codes inconnus depuis longtemps , de trucs p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Grâce à l'incroyable pépin dans Ocarina of Time, il a été possible d'ajouter des modèles de Star Fox 64</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/post/485908/"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/57c/4bb/e19/57c4bbe1942225f6f87df254b77ca7de.jpg" alt="image"></div><br>  Au cours des années d'écriture d'articles sur les jeux, j'ai parlé de nombreux <a href="https://arstechnica.com/gaming/2019/02/after-glitch-grants-access-bethesda-says-locked-fallout-76-vault-will-open/">problèmes incroyables</a> , de <a href="https://arstechnica.com/gaming/2016/02/decades-later-players-are-still-unlocking-secrets-in-classic-mortal-kombat/">codes inconnus depuis longtemps</a> , de <a href="https://arstechnica.com/gaming/2014/01/how-an-emulator-fueled-robot-reprogrammed-super-mario-world-on-the-fly/">trucs pour l'exécution de code arbitraire</a> et de <a href="https://arstechnica.com/gaming/2017/09/searching-for-the-hidden-motion-to-unlock-the-switchs-nes-emulator/">recherches de contenu profondément caché</a> dans des jeux et équipements classiques.  Mais rien ne pouvait me préparer à <a href="https://www.twitch.tv/zfg1/clip/StylishTallYogurtYee%3Ffilter%3Dclips%26amp%3Brange%3D7d%26amp%3Bsort%3Dtime">cette vidéo Twitch</a> dans laquelle une flotte d'Arwing volante de <em>Star Fox 64</em> envahit le monde d' <em>Ocarina of Time</em> pour attaquer Link. <br><br>  Vous vous attendez à voir une telle scène uniquement dans un dessin animé créé par un fan ou un piratage ROM que Nintendo <a href="https://arstechnica.com/gaming/2016/12/nintendo-sends-cease-and-desist-notice-to-pokemon-rom-hacker/">aime retirer d'Internet</a> .  Mais la chose la plus étonnante à propos de cette vidéo est qu'elle montre une version non modifiée de la ROM originale <em>Ocarina of Time</em> japonaise utilisant la console standard et les contrôleurs N64. <br><br>  Toute la matinée, j'ai compris comment c'était même possible.  Pour expliquer cela, vous devrez approfondir le cœur des instructions du langage machine de Nintendo 64, <em>la</em> gestion <em>de la</em> mémoire d' <em>Ocarina of Time</em> et le processus de développement du jeu au milieu des années 90 lui-même.  Si vous êtes aussi curieux que moi, rejoignez-nous. <br><a name="habracut"></a><br><h2>  Liens obsolètes et nouveau code </h2><br>  Ce passage étonnant a commencé avec la découverte d'un problème majeur en octobre de l'année dernière: le joueur Glitches0and0stuff utilisant des émulateurs et une étude minutieuse des zones de mémoire de Nintendo 64 a <a href="https://www.youtube.com/watch%3Fv%3DFX_1u7JaYLc">découvert un moyen de manipuler des liens obsolètes</a> dans <em>Ocarina of Time</em> . <br><br>  En fait, le problème est que le joueur ramasse l'élément, puis astuces le jeu pour le décharger directement des mains de Link lorsqu'il franchit le seuil d'un nouvel emplacement de chargement (par exemple, la pièce suivante).  À ce stade, le jeu libère la zone de mémoire occupée par cet objet afin qu'il puisse être utilisé pour d'autres objets dans le jeu lors de leur chargement.  Mais en même temps, le jeu pense que Link tient <em>quelque chose</em> , il continue donc de mettre à jour le pointeur vers le "lien obsolète" dans la mémoire libérée, en écrivant des données représentant la position et l'angle d'un objet inexistant.  Avec une manipulation prudente, ce pointeur peut ensuite être utilisé pour «corrompre» les données de l'objet nouvellement chargé avec des valeurs arbitraires. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/246/283/c4e/246283c4ea2d7a7e728215345d8006be.png"></div><br>  <i>Les chasseurs spatiaux ne peuvent pas comparer avec Link.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c17/551/016/c175510164f143b6eff520c137a01d09.png"></div><br>  <i>Arwing de <em>Star Fox 64</em> peut subir des dégâts et tirer sur Link car ils sont toujours dans le jeu.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/57c/4bb/e19/57c4bbe1942225f6f87df254b77ca7de.jpg"></div><br>  <i>La visée avec le bouton Z permet de viser facilement un boomerang au bas de l'Arwing.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/abc/30b/e25/abc30be25dd61c7ed1890738c44270dc.png"></div><br>  <i>Le lien contient un objet "vide" - la préparation du problème est effectuée avec l'exécution de code arbitraire.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/284/b1c/9a5/284b1c9a5fe7b372b0343e6dc6f01424.png"></div><br>  <i>La partie la plus importante de la technique consiste à geler la caméra à la position de glitch.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5d5/0f2/8bf/5d50f28bfc957af49c3c292e6c526dab.png"></div><br>  <i>Un dispositif permettant de maintenir les boutons / positions nécessaires du joystick analogique du contrôleur 3 pour accéder directement aux titres.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c80/dd9/ad9/c80dd9ad93f3e8a357bbee17f42f4e61.png"></div><br>  <i>Après dix minutes de saisie du nom de fichier, le code Arwing est prêt à être téléchargé</i> <br><br>  Initialement, cette astuce a été utilisée pour simplement «gâcher» le jeu, par exemple, pour <a href="https://www.youtube.com/watch%3Fv%3DFX_1u7JaYLc">charger de nouveaux objets dans des coffres au trésor</a> ou pour changer la position d'autres objets à l'intérieur de la pièce (comme <a href="https://www.youtube.com/watch%3Fv%3D_7E4dFD8Bmw">expliqué en détail ici</a> ).  Cependant, après un certain temps, les joueurs ont découvert que la même méthode peut être utilisée pour <a href="https://www.youtube.com/watch%3Fv%3DRoEmGCNsbno">modifier des codes de saut d'assembleur individuels</a> , indiquant au jeu où il doit rechercher la prochaine instruction lors de l'exécution de certains événements de jeu. <br><br>  Après avoir inséré le code souhaité de cette manière, vous pouvez forcer le jeu à aller dans la zone de mémoire contenant les dernières valeurs de rotation connues pour les frondes X et Y.  Si <em>ces</em> valeurs sont spécifiées exactement, elles seront interprétées comme <em>un autre</em> code de saut, qui exécute une transition vers la zone mémoire où le nom du fichier actuel est stocké.  Ensuite, ce nom de fichier sera interprété comme un code machine N64 normal, afin que le joueur puisse se déplacer rapidement à n'importe quel endroit du jeu dont il a besoin (bien sûr, s'il convertit correctement les caractères binaires du nom de fichier en <a href="https://www.zophar.net/documents/n64/n64-opcodes-list.html">opcodes correspondants</a> ). <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/_7E4dFD8Bmw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Explication de glitch avec un lien obsolète qui était à l'origine utilisé pour remplacer les objets dans les coffres.</i> <br><br>  Le premier exemple sérieux d'utilisation de cette manipulation avec des codes de transition a été de <a href="https://www.youtube.com/watch%3Fv%3DwdRJWDKb5Bo">charger la cinématique du jeu avec des légendes</a> .  Ainsi, le joueur a établi un <a href="https://www.thegamer.com/ocarina-of-time-new-speedrun-record/">nouveau record du monde pour le speedran du jeu dans la catégorie "Any%"</a> .  Pour ce faire rapidement dans la zone initiale du jeu, vous devez utiliser d'autres problèmes, y compris <a href="https://www.zeldaspeedruns.com/oot/misc/walking-while-talking">le problème de caméra «marcher pendant la conversation»</a> , qui vous permet de charger et de décharger des pierres au moment et à l'endroit parfaits.  Pour cela, vous devez également maintenir certains boutons et positions du joystick analogique des contrôleurs connectés aux premier et troisième ports Nintendo 64 afin que leurs signaux soient interprétés comme un code de localisation de la cinématique avec des légendes. <br><br><h2>  Déverrouiller Arwing </h2><br>  La méthode décrite ci-dessus est assez bonne si vous voulez simplement aller à la cinématique.  Mais il a une sérieuse limitation: le système de fichiers <em>Ocarina of Time</em> est limité à huit caractères, c'est-à-dire que le nom de fichier ne peut être converti qu'en quelques instructions de code machine.  Heureusement, ces deux emplacements d'instructions peuvent également être utilisés pour éliminer pratiquement la limite de caractères. <br><br>  Cela se fait d'une manière extrêmement confuse, décrite en détail dans <a href="https://pastebin.com/29hHtupt">ce Pastebin</a> et <a href="https://www.youtube.com/watch%3Fv%3DwIyEUScOMxc">cette vidéo</a> .  Il suffit de dire qu'il utilise trois fois la méthode décrite ci-dessus, ce qui élimine les vérifications importantes de l'indicateur de position du nom de fichier, puis définit ce pointeur sur une valeur de position négative. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/RoEmGCNsbno" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Explication détaillée de l'exécution de code arbitraire dans <em>Ocarina of Time</em></i> <br><br>  En conséquence, les joueurs ont la possibilité d'entrer un code de plusieurs centaines de caractères, ce qui leur permet de précharger des séquences d'instructions machine beaucoup plus complexes pour mettre en œuvre la méthode de transition de code décrite ci-dessus.  Mais ce n'est pas encore suffisant pour encoder les graphiques, les animations et la logique de gameplay nécessaires pour attaquer Arwing.  Heureusement, Nintendo nous a beaucoup aidés en cachant commodément tout ce code Arwing au fond de toutes les cartouches <em>Ocarina of Time</em> . <br><br>  Pourquoi?  Le personnage et graphiste Satoru Takizawa a <a href="http://iwataasks.nintendo.com/interviews/">déclaré à Iwata Asks dans une interview en 2011</a> que c'était juste un moyen de réutiliser le code pour déplacer l'un des ennemis de <em>Zelda</em> : <br><br><blockquote>  <a href="https://zelda.gamepedia.com/Volvagia">Volvagia</a> est un dragon, donc il se tortille et se déplace par vagues.  Je viens de remettre au boss programmeur Kazuaki Morita des pièces du modèle dragon, et il l'a immédiatement mis en mouvement.  Il restait un mystère pour moi comment il avait réussi ... alors je n'ai pas pu résister à ne pas lui demander.  Il a répondu que c'était la même chose que la programmation pour <em>Star Fox 64</em> .  Il y a une scène dans ce jeu dans laquelle un autre combattant se bloque sur la queue d'Arwing, et les mouvements de vol du combattant sont exactement les mêmes que ceux de Volvagia.  J'étais étonné, c'était un vrai miracle pour moi. </blockquote><br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/H10Tl3sTpWM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  <i>Vidéo de 2007 montrant Arwing survolant la forêt de Kokiri (codes GameShark et émulateur utilisés).</i> <br><br>  Après avoir copié les animations nécessaires à Volvagia, Morita semble avoir laissé le bloc entier de code Arwing dans les données de poubelle du jeu.  Il y a de nombreuses années, <a href="https://tcrf.net/Notes:The_Legend_of_Zelda:_Ocarina_of_Time">les chercheurs de données en ont</a> pris connaissance.  Et <a href="https://www.engadget.com/2005/10/05/hidden-star-fox-arwing-in-ocarina-of-time/">depuis plus d'une décennie, les</a> joueurs savent comment accéder à ces parties cachées du code en utilisant <a href="http://www.eeggs.com/items/46440.html">des dispositifs de triche comme GameShark</a> , qui changent les valeurs en mémoire pour remplacer les ennemis par Arwing. <br><br>  Mais grâce aux astuces de manipulation de la mémoire décrites dans l'article, un dispositif de triche externe n'est plus nécessaire.  Le 23 janvier, le joueur ZFG1 l'a <a href="https://www.twitch.tv/zfg1/clip/StylishTallYogurtYee%3Ffilter%3Dclips%26amp%3Brange%3D7d%26amp%3Bsort%3Dtime">prouvé une fois pour toutes</a> en chargeant Arwing à l'aide de la ROM Zelda non modifiée et de la console standard Nintendo 64 dans un flux Twitch.  Le résultat a été un jeu dans lequel toutes les portes ont été remplacées par Arwing, volant autour de Ling, l'attaquant avec des tirs dommageables de blasters, et même tombant au sol lorsqu'il est renversé. <br><br>  La préparation pour l'enregistrement de ce clip a <a href="https://www.twitch.tv/videos/540663120%3Ft%3D2h11m15s">pris plus d'une heure</a> , au cours de laquelle trois cycles d'exécution de code arbitraire ont été créés et en 10 minutes, le nom du fichier pour le chargement d'Arwing a été soigneusement entré.  Mais en même temps, ce clip était l'aboutissement de mois et d'années de travail d'une communauté obsédée par le désir de bien comprendre et maîtriser le jeu classique et ses pépins. <br><br>  En plus de la valeur de divertissement, le clip "Arwings in Zelda" a prouvé que la communauté, un groupe de spécialistes en informatique, avec suffisamment de temps et d'efforts, peut faire des choses incroyables avec du matériel et des logiciels de jeu classiques. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr485908/">https://habr.com/ru/post/fr485908/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr485886/index.html">Comment (et pourquoi) analyser gratuitement les clés et les annonces de concurrents de Yandex.Direct et Google Ads</a></li>
<li><a href="../fr485892/index.html">La fin de l'ère Trident</a></li>
<li><a href="../fr485896/index.html">Base de données massivement parallèle Greenplum - un programme éducatif court</a></li>
<li><a href="../fr485898/index.html">Exportez Google Forms + téléchargez Google Script via l'API REST (Python)</a></li>
<li><a href="../fr485904/index.html">Meetup Test de charge à Raiffeisenbank</a></li>
<li><a href="../fr485910/index.html">Déploiement d'API avec AWS Elastic Beanstalk</a></li>
<li><a href="../fr485914/index.html">Propulsé par ZeroTier. Un guide pratique pour la construction de réseaux virtuels. Partie 1</a></li>
<li><a href="../fr485916/index.html">Supprimer les inutiles [effacer le calendrier des inutiles]</a></li>
<li><a href="../fr485918/index.html">Les navigateurs indépendants ne sont plus compétitifs</a></li>
<li><a href="../fr485924/index.html">Astuces pour interviewer un chef de projet ou se promener dans un champ de mines de merveilles</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>