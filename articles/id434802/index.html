<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>🔸 ⛵️ 🤶🏾 "Saya tidak akan memberikan batu" atau bagaimana sumber daya permainan "Cursed Lands" diatur 🕺🏻 🌷 🐽</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Apakah Anda ingat banyak game Rusia? Kualitatif? Berkesan? Ya, benar. Jika Anda berusia di atas 35 atau Anda adalah penggemar industri game Rusia, mak...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>"Saya tidak akan memberikan batu" atau bagaimana sumber daya permainan "Cursed Lands" diatur</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/434802/"><p><img src="https://habrastorage.org/webt/ry/nk/a_/rynka_dqz5ny9nqgs7gawsw4zxy.jpeg"></p><br><p>  Apakah Anda ingat banyak game Rusia?  Kualitatif?  Berkesan?  Ya, benar.  Jika Anda berusia di atas 35 atau Anda adalah penggemar industri game Rusia, maka Anda mungkin akrab dengan Cursed Lands. </p><br><p>  Kisah itu dimulai dengan sangat biasa: musim panas, panas.  Tidak ada yang istimewa untuk dilakukan, dan ketika dengan malas menelusuri isi hard drive laptop, tatapanku menangkap sebuah folder dengan ikon naga yang sudah dikenalnya yang telah menganggur selama beberapa tahun. </p><br><p>  Penggemar game apa yang tidak tertarik untuk mengetahui apa yang ada di dalamnya? </p><a name="habracut"></a><br><h1 id="vvedenie">  Pendahuluan </h1><br><h2 id="informaciya-ob-igre">  Info gim </h2><br><p>  <strong>Cursed Lands</strong> - atau, sebagaimana mereka dipanggil di luar CIS, <strong>Evil Islands: Curse of the Lost Soul</strong> , game siluman-RPG yang dirilis pada 2000.  Game ini dikembangkan oleh Nival Interactive, yang pada waktu itu telah memantapkan dirinya sebagai rangkaian game Alloda (Rage of Mages di luar negeri).  Sebagian besar lulusan Universitas Negeri Moskow bekerja di dalamnya - mereka cukup mampu mewujudkan salah satu game pertama dengan dunia yang sepenuhnya tiga dimensi. <br>  Pada tahun 2010, Mail.Ru ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">informasi</a> ) mentransfer judul, tetapi permainan masih dijual di toko GOG atas nama Nival. </p><br><p>  Relatif baru-baru ini, permainan berusia 18 tahun - ulang tahun dianggap 26 Oktober, tanggal rilis di CIS.  Terlepas dari usia, server master resmi masih dalam pelayanan: secara berkala, seseorang memutuskan untuk merangkak melalui hutan Gipat dan memukul selusin atau dua kerangka dengan satu regu kawan. </p><br><h2 id="korotko-o-state">  Secara singkat tentang artikel tersebut </h2><br><p>  Awalnya, tujuan saya hanya menulis konverter satu arah "untuk saya sendiri" di Python 3, menggunakan perpustakaan standar eksklusif.  Namun, dalam prosesnya, dokumentasi tentang format dimulai dengan lancar, upaya untuk membakukan output entah bagaimana.  Untuk beberapa format, struktur dijelaskan menggunakan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Struct Kaitai</a> .  Akibatnya, semuanya menghasilkan penulisan artikel ini dan wiki dalam format. </p><br><p>  Saya segera mencatat: sebagian besar file game telah diteliti, editor fan telah ditulis untuk mereka.  Namun, informasi ini sangat terfragmentasi, dan tidak ada deskripsi lengkap tentang format dalam domain publik, juga tidak ada set yang memadai untuk membuat modifikasi. </p><br><h2 id="i-o-tom-kak-eyo-chitat">  ... dan cara membacanya </h2><br><p>  Skema (file .ksy) disediakan untuk semua format, yang dapat dikonversi dalam dua klik menjadi kode dalam beberapa bahasa paling populer. </p><br><p>  Sayangnya, sudah pada tahap akhir penulisan artikel ini, saya menemukan bahwa Habr yang terhormat tidak dapat menyoroti YAML (dan JSON), dan semua skema menggunakannya.  Ini seharusnya bukan masalah besar, tetapi jika tidak nyaman untuk membaca skema, saya dapat menyarankan Anda untuk menyalinnya ke editor pihak ketiga, misalnya, PLTN. </p><br><h1 id="resursy-i-gde-oni-obitayut">  Sumber daya dan tempat tinggal mereka </h1><br><p>  Gim ini adalah aplikasi portabel yang berisi mesin dengan perpustakaan, peluncur dan, bahkan, sumber daya yang dikemas. </p><br><blockquote>  <strong>Ini menarik:</strong> pengaturan gim hampir seluruhnya disimpan dalam registri.  Bug kamera dalam versi GOG disebabkan oleh fakta bahwa penginstal tidak mendaftarkan nilai default yang benar. </blockquote><p>  Sekilas tentang isi folder game, kami segera melihat beberapa ekstensi file baru: ASI dan REG. <br>  Yang pertama adalah perpustakaan yang dinamis, yang tidak akan kami pertimbangkan (ini dilakukan oleh spesialis dalam rekayasa terbalik), tetapi yang kedua adalah format file hak milik pertama dari game. </p><br><h2 id="reg">  REG </h2><br><p>  File jenis ini adalah serialisasi biner dari file INI teks yang terkenal. <br>  Konten dibagi menjadi beberapa bagian yang menyimpan kunci dan nilainya.  File REG mempertahankan hierarki ini, tetapi mempercepat membaca dan mem-parsing data - pada tahun 2000, ini tampaknya penting. </p><br><p>  Secara umum, Anda dapat menggambarkan struktur diagram ini: <br><img src="https://habrastorage.org/webt/yh/se/fo/yhsefo2h5nxp0ghwse2zla8cmv0.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre><code class="plaintext hljs">meta: id: reg title: Evil Islands, REG file (packed INI) application: Evil Islands file-extension: reg license: MIT endian: le doc: Packed INI file seq: - id: magic contents: [0xFB, 0x3E, 0xAB, 0x45] doc: Magic bytes - id: sections_count type: u2 doc: Number of sections - id: sections_offsets type: section_offset doc: Sections offset table repeat: expr repeat-expr: sections_count types: section_offset: doc: Section position in file seq: - id: order type: s2 doc: Section order number - id: offset type: u4 doc: Global offset of section in file instances: section: pos: offset type: section types: section: doc: Section representation seq: - id: keys_count type: u2 doc: Number of keys in section - id: name_len type: u2 doc: Section name lenght - id: name type: str encoding: cp1251 size: name_len doc: Section name - id: keys type: key doc: Section's keys repeat: expr repeat-expr: keys_count types: key: doc: Named key seq: - id: order type: s2 doc: Key order in section - id: offset type: u4 doc: Key offset in section instances: key_record: pos: _parent._parent.offset + offset type: key_data key_data: seq: - id: packed_type type: u1 doc: Key value info - id: name_len type: u2 doc: Key name lenght - id: name type: str encoding: cp1251 size: name_len doc: Key name - id: value type: value doc: Key value instances: is_array: value: packed_type &gt; 127 doc: Is this key contain array value_type: value: packed_type &amp; 0x7F doc: Key value type types: value: doc: Key value seq: - id: array_size type: u2 if: _parent.is_array doc: Value array size - id: data type: switch-on: _parent.value_type cases: 0: s4 1: f4 2: string repeat: expr repeat-expr: '_parent.is_array ? array_size : 1' doc: Key value data string: doc: Sized string seq: - id: len type: u2 doc: String lenght - id: value type: str encoding: cp1251 size: len doc: String</code> </pre> </div></div><br><blockquote>  <strong>Ini menarik:</strong> pada tahun 2002, Nival berbagi beberapa alat dengan komunitas permainan ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://web.archive.org/web/20020610194020/">snapshot situs</a> ) - salah satunya adalah serializer INI di REG.  Seperti yang Anda duga, deserializer segera muncul, meskipun bukan yang resmi. </blockquote><p>  Dengan folder mulai diurutkan, mari kita beralih ke subdirektori. <br>  Tampilan pertama jatuh pada folder Kamera yang berisi file CAM. </p><br><h2 id="cam">  Cam </h2><br><p>  Format yang sangat sederhana adalah hanya mengemas posisi kamera dari waktu ke waktu.  Kamera dijelaskan oleh posisi dan rotasi.  Dua bidang lainnya mungkin adalah waktu dan langkah dalam urutan gerakan. </p><br><p><img src="https://habrastorage.org/webt/cu/8u/bj/cu8ubjrcz2pode-v3lydliwrvsq.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: cam title: Evil Islands, CAM file (cameras) application: Evil Islands file-extension: cam license: MIT endian: le doc: Camera representation seq: - id: cams type: camera repeat: eos types: vec3: doc: 3d vector seq: - id: x type: f4 doc: x axis - id: y type: f4 doc: y axis - id: z type: f4 doc: z axis quat: doc: quaternion seq: - id: w type: f4 doc: w component - id: x type: f4 doc: x component - id: y type: f4 doc: y component - id: z type: f4 doc: z component camera: doc: Camera parameters seq: - id: unkn0 type: u4 doc: unknown - id: unkn1 type: u4 doc: unknown - id: position type: vec3 doc: camera's position - id: rotation type: quat doc: camera's rotation</code> </pre> </div></div><br><p>  Di folder berikutnya - Res, (tidak terduga!) File RES yang arsip disimpan. </p><br><h2 id="res">  RES </h2><br><p>  Format ini terkadang disembunyikan di bawah ekstensi lain, tetapi aslinya masih persis RES. <br>  Struktur data sangat khas untuk arsip dengan akses acak ke file: ada tabel untuk menyimpan informasi tentang file di dalamnya, daftar nama, dan isi file. <br>  Struktur direktori terkandung langsung dalam nama-nama. </p><br><p>  Perlu dicatat dua fakta yang sangat menarik: </p><br><ol><li>  Arsip dioptimalkan untuk memuat informasi file ke daftar tertaut dengan hashing tertutup. </li><li>  Anda dapat menyimpan konten file satu kali, tetapi merujuknya dengan nama yang berbeda.  Sejauh yang saya tahu, fakta ini digunakan dalam repack penggemar, di mana ukuran permainan sangat berkurang karena ini.  Dalam distribusi asli, pengoptimalan arsip tidak digunakan. </li></ol><br><p><img src="https://habrastorage.org/webt/_9/ie/8_/_9ie8_m0lc_b1n0ddnagkue514g.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: res title: Evil Islands, RES file (resources archive) application: Evil Islands file-extension: res license: MIT endian: le doc: Resources archive seq: - id: magic contents: [0x3C, 0xE2, 0x9C, 0x01] doc: Magic bytes - id: files_count type: u4 doc: Number of files in archive - id: filetable_offset type: u4 doc: Filetable offset - id: nametable_size type: u4 doc: Size of filenames instances: nametable_offset: value: filetable_offset + 22 * files_count doc: Offset of filenames table filetable: pos: filetable_offset type: file_record repeat: expr repeat-expr: files_count doc: Files metadata table types: file_record: doc: File metadata seq: - id: next_index type: s4 doc: Next file index - id: file_size type: u4 doc: Size of file in bytes - id: file_offset type: u4 doc: File data offset - id: last_change type: u4 doc: Unix timestamp of last change time - id: name_len type: u2 doc: Lenght of filename - id: name_offset type: u4 doc: Filename offset in name array instances: name: io: _root._io pos: name_offset + _parent.nametable_offset type: str encoding: cp1251 size: name_len doc: File name data: io: _root._io pos: file_offset size: file_size doc: Content of file</code> </pre> </div></div><br><blockquote>  <strong>Ini menarik:</strong> dalam versi Rusia dari gim ini, arsip Speech.res berisi dua subdirektori s dan t dengan konten yang benar-benar identik, itulah sebabnya ukuran arsip dua kali lebih besar - itulah sebabnya gim tidak muat pada satu CD. </blockquote><p>  Sekarang Anda dapat membuka zip semua arsip (dapat disarangkan): </p><br><ul><li>  RES hanyalah sebuah arsip, </li><li>  MPR - lanskap level game, </li><li>  MQ - informasi tentang tugas multiplayer, </li><li>  ANM - satu set animasi, </li><li>  MOD - model 3d, </li><li>  BON - lokasi tulang model. </li></ul><br><p>  Jika file di dalam arsip tidak memiliki ekstensi, kami akan meletakkan ekstensi induk - untuk arsip BON dan ANM. </p><br><p>  Anda juga dapat membagi semua file yang diterima menjadi empat grup: </p><br><ol><li>  Tekstur </li><li>  Basis data </li><li>  Model </li><li>  Level file. </li></ol><br><p>  Mari kita mulai dengan yang sederhana - dengan tekstur. </p><br><h2 id="mmp">  MMP </h2><br><p>  Sebenarnya, teksturnya.  Ini memiliki judul kecil yang menunjukkan parameter gambar, jumlah level MIP dan kompresi yang digunakan.  Setelah header adalah level gambar MIP dalam urutan ukuran menurun. </p><br><p><img src="https://habrastorage.org/webt/a7/1s/-r/a71s-rtar5cg6ipi53n86bbsxps.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: mmp title: Evil Islands, MMP file (texture) application: Evil Islands file-extension: mmp license: MIT endian: le doc: MIP-mapping texture seq: - id: magic contents: [0x4D, 0x4D, 0x50, 0x00] doc: Magic bytes - id: width type: u4 doc: Texture width - id: height type: u4 doc: Texture height - id: mip_levels_count type: u4 doc: Number of MIP-mapping stored levels - id: fourcc type: u4 enum: pixel_formats doc: FourCC label of pixel format - id: bits_per_pixel type: u4 doc: Number of bits per pixel - id: alpha_format type: channel_format doc: Description of alpha bits - id: red_format type: channel_format doc: Description of red bits - id: green_format type: channel_format doc: Description of green bits - id: blue_format type: channel_format doc: Description of blue bits - id: unused size: 4 doc: Empty space - id: base_texture type: switch-on: fourcc cases: 'pixel_formats::argb4': block_custom 'pixel_formats::dxt1': block_dxt1 'pixel_formats::dxt3': block_dxt3 'pixel_formats::pnt3': block_pnt3 'pixel_formats::r5g6b5': block_custom 'pixel_formats::a1r5g5b5': block_custom 'pixel_formats::argb8': block_custom _: block_custom types: block_pnt3: seq: - id: raw size: _root.bits_per_pixel block_dxt1: seq: - id: raw size: _root.width * _root.height &gt;&gt; 1 block_dxt3: seq: - id: raw size: _root.width * _root.height block_custom: seq: - id: lines type: line_custom repeat: expr repeat-expr: _root.height types: line_custom: seq: - id: pixels type: pixel_custom repeat: expr repeat-expr: _root.width types: pixel_custom: seq: - id: raw type: switch-on: _root.bits_per_pixel cases: 8: u1 16: u2 32: u4 instances: alpha: value: '_root.alpha_format.count == 0 ? 255 : 255 * ((raw &amp; _root.alpha_format.mask) &gt;&gt; _root.alpha_format.shift) / (_root.alpha_format.mask &gt;&gt; _root.alpha_format.shift)' red: value: '255 * ((raw &amp; _root.red_format.mask) &gt;&gt; _root.red_format.shift) / (_root.red_format.mask &gt;&gt; _root.red_format.shift)' green: value: '255 * ((raw &amp; _root.green_format.mask) &gt;&gt; _root.green_format.shift) / (_root.green_format.mask &gt;&gt; _root.green_format.shift)' blue: value: '255 * ((raw &amp; _root.blue_format.mask) &gt;&gt; _root.blue_format.shift) / (_root.blue_format.mask &gt;&gt; _root.blue_format.shift)' channel_format: doc: Description of bits for color channel seq: - id: mask type: u4 doc: Binary mask for channel bits - id: shift type: u4 doc: Binary shift for channel bits - id: count type: u4 doc: Count of channel bits enums: pixel_formats: 0x00004444: argb4 0x31545844: dxt1 0x33545844: dxt3 0x33544E50: pnt3 0x00005650: r5g6b5 0x00005551: a1r5g5b5 0x00008888: argb8</code> </pre> </div></div><br><p>  Kemungkinan format kemasan piksel: </p><br><table><thead><tr><th>  fourcc </th><th>  Deskripsi </th></tr></thead><tbody><tr><td>  44 44 00 00 </td><td>  ARGB4 </td></tr><tr><td>  44 58 54 31 </td><td>  Dxt1 </td></tr><tr><td>  44 58 54 33 </td><td>  Dxt3 </td></tr><tr><td>  50 4E 54 33 </td><td>  PNT3 - RLE Compressed ARGB8 </td></tr><tr><td>  50 56 00 00 </td><td>  R5G5B5 </td></tr><tr><td>  51 55 00 00 </td><td>  A1R5G5B5 </td></tr><tr><td>  88 88 00 00 </td><td>  ARGB8 </td></tr></tbody></table><br><div class="spoiler">  <b class="spoiler_title">Tentang PNT3</b> <div class="spoiler_text"><p>  Jika format gambar adalah <strong>PNT3</strong> , maka struktur piksel setelah dibongkar adalah ARGB8;  <code>bits_per_pixel</code> - ukuran gambar terkompresi dalam byte. </p><br><h4 id="raspakovka-pnt3">  Membongkar PNT3 </h4><br><pre> <code class="python hljs">n = <span class="hljs-number"><span class="hljs-number">0</span></span> destination = <span class="hljs-string"><span class="hljs-string">b""</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> src &lt; size: v = int.from_bytes(source[src:src + <span class="hljs-number"><span class="hljs-number">4</span></span>], byteorder=<span class="hljs-string"><span class="hljs-string">'little'</span></span>) src += <span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> v &gt; <span class="hljs-number"><span class="hljs-number">1000000</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> v == <span class="hljs-number"><span class="hljs-number">0</span></span>: n += <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: destination += source[src - (<span class="hljs-number"><span class="hljs-number">1</span></span> + n) * <span class="hljs-number"><span class="hljs-number">4</span></span>:src - <span class="hljs-number"><span class="hljs-number">4</span></span>] destination += <span class="hljs-string"><span class="hljs-string">b"\x00"</span></span> * v n = <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> </div></div><br><blockquote>  <strong>Ini menarik:</strong> beberapa tekstur dipantulkan secara vertikal (atau ada juga yang tidak tercermin?). <br>  Dan permainan ini sangat iri dengan transparansi - jika gambar menggunakan saluran alpha, warna piksel transparan harus benar-benar hitam.  Atau putih - itulah keberuntungannya. </blockquote><p>  Format sederhana sudah berakhir, mari kita beralih ke yang lebih kaku - pada satu waktu, jajaran pembuat mod dengan marah menyimpan alat pengeditan mereka sendiri untuk format berikut, dan tidak sia-sia.  Aku sudah memperingatkanmu. </p><br><h2 id="bazy-dannyh-db-i-izhe-s-nimi">  Database (* DB dan lainnya) </h2><br><p>  Format ini sangat tidak nyaman untuk dijelaskan - pada dasarnya, ini adalah pohon node serial (atau tabel catatan).  File terdiri dari beberapa tabel dengan tipe bidang yang ditentukan.  Struktur umum: tabel bersarang di simpul "root" yang umum, catatan adalah simpul di dalam tabel. </p><br><p>  Di setiap node, jenis dan ukurannya ditentukan: </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> type_index; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> raw_size; <span class="hljs-comment"><span class="hljs-comment">//      unsigned length; //     read(raw_size); if (raw_size &amp; 1) { length = raw_size &gt;&gt; 1; for (int i = 0; i &lt; 3; i++) length &lt;&lt;= 8; read(raw_size); length += raw_size; } else length = raw_size &gt;&gt; 1;</span></span></code> </pre> <br><p>  Jenis bidang tabel diambil oleh indeks dari format string untuk tabel, tipe nyata ditentukan oleh nilai yang diperoleh. </p><br><div class="spoiler">  <b class="spoiler_title">Jenis bidang</b> <div class="spoiler_text"><table><thead><tr><th>  penunjukan </th><th>  deskripsi </th></tr></thead><tbody><tr><td>  S </td><td>  tali </td></tr><tr><td>  Saya </td><td>  4b int </td></tr><tr><td>  U </td><td>  4b tidak ditandatangani </td></tr><tr><td>  F </td><td>  4b mengapung </td></tr><tr><td>  X </td><td>  bit byte </td></tr><tr><td>  f </td><td>  array mengambang </td></tr><tr><td>  saya </td><td>  array int </td></tr><tr><td>  B </td><td>  bool </td></tr><tr><td>  b </td><td>  array bool </td></tr><tr><td>  H </td><td>  byte hex tidak dikenal </td></tr><tr><td>  T </td><td>  waktu </td></tr><tr><td>  0 </td><td>  tidak disebutkan </td></tr><tr><td>  1 </td><td> <code>0FII</code> </td> </tr><tr><td>  2 </td><td> <code>SUFF</code> </td> </tr><tr><td>  3 </td><td> <code>FFFF</code> </td> </tr><tr><td>  4 </td><td> <code>0SISS</code> </td> </tr><tr><td>  5 </td><td> <code>0SISS00000U</code> </td> </tr></tbody></table></div></div><br><div class="spoiler">  <b class="spoiler_title">Deskripsi pangkalan</b> <div class="spoiler_text"><h4 id="predmety-idb">  Item (.idb) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Material </td><td> <code>SSSIFFFIFIFfIX</code> </td> </tr><tr><td>  Senjata </td><td> <code>SSISIIIFFFFIFIXB00000IHFFFfHHFF</code> </td> </tr><tr><td>  Armor </td><td> <code>SSISIIIFFFFIFIXB00000ffBiHH</code> </td> </tr><tr><td>  Item cepat </td><td> <code>SSISIIIFFFFIFIXB00000IIFFSbH</code> </td> </tr><tr><td>  Item pencarian </td><td> <code>SSISIIIFFFFIFIXB00000Is</code> </td> </tr><tr><td>  Menjual Barang </td><td> <code>SSISIIIFFFFIFIXB00000IHI</code> </td> </tr></tbody></table><br><h4 id="pereklyuchateli-ldb">  Switch (.ldb) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Ganti prototipe </td><td> <code>SfIFTSSS</code> </td> </tr></tbody></table><br><h4 id="umeniya-i-navyki-pdb">  Keterampilan dan Keterampilan (.pdb) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Kemampuan </td><td> <code>SSI0000000s</code> </td> </tr><tr><td>  Keterampilan </td><td> <code>SSI0000000SSIIIFFFIIIIBI</code> </td> </tr></tbody></table><br><h4 id="sledy-printsdb">  Jejak kaki (prints.db) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Jejak darah </td><td> <code>0S11</code> </td> </tr><tr><td>  Jejak api </td><td> <code>0S110000001</code> </td> </tr><tr><td>  Jejak kaki </td><td> <code>0S11</code> </td> </tr></tbody></table><br><h4 id="zaklinaniya-sdb">  Mantra (.sdb) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Prototipe </td><td> <code>SSSFIFIFFFFIIIIUSSIIbIXFFFFF</code> </td> </tr><tr><td>  Pengubah </td><td> <code>SSFIFFISX</code> </td> </tr><tr><td>  Pola </td><td> <code>0SssSX</code> </td> </tr><tr><td>  Templat Armor </td><td> <code>0SssSX</code> </td> </tr><tr><td>  Pola Senjata </td><td> <code>0SssSX</code> </td> </tr></tbody></table><br><h4 id="suschestva-udb">  Makhluk (.udb) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Bagian yang rusak </td><td> <code>SffUU</code> </td> </tr><tr><td>  Ras </td><td> <code>SUFFUUFfFUUf222222000000000000SssFSsfUUfUUIUSBFUUUU</code> </td> </tr><tr><td>  Prototipe monster </td><td> <code>SSIUIFFFSFFFFFFFFFUFFFFFFff33sfssSFFFFFUFUSF</code> </td> </tr><tr><td>  NPC </td><td> <code>SUFFFFbbssssFUB</code> </td> </tr></tbody></table><br><h4 id="vykriki-acksdb">  Teriakan (acks.db) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Jawabannya </td><td> <code>0S0000000044444444444444444444445444444444444</code> </td> </tr><tr><td>  Jeritan </td><td> <code>0S0000000044444</code> </td> </tr><tr><td>  Lainnya </td><td> <code>0S0000000044</code> </td> </tr></tbody></table><br><h4 id="zadaniya-qdb">  Quests (.qdb) </h4><br><table><thead><tr><th>  meja </th><th>  struktur </th></tr></thead><tbody><tr><td>  Misi </td><td> <code>SFIISIIs</code> </td> </tr><tr><td>  Briefing </td><td> <code>SFFsSsssssI</code> </td> </tr></tbody></table></div></div><br><blockquote>  <strong>Ini menarik:</strong> 16 Januari 2002 Nival memposting basis sumber untuk multiplayer dalam format csv, serta utilitas-konverter dalam format game ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=https://web.archive.org/web/20020610194020/">snapshot situs</a> ).  Secara alami, konverter terbalik tidak lambat muncul.  Ada juga setidaknya dua dokumen yang menggambarkan bidang dan jenisnya dari pembuat mod, tetapi membacanya sangat sulit. </blockquote><br><h2 id="adb">  Adb </h2><br><p>  Basis data animasi untuk jenis unit tertentu.  Berbeda dengan * DB yang disebutkan di atas, itu cukup "manusia" - itu adalah tabel tingkat tunggal dengan ukuran bidang statis. </p><br><p><img src="https://habrastorage.org/webt/vm/f4/jr/vmf4jr_3jtmqytycobxvurk7v2c.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: adb title: Evil Islands, ADB file (animations database) application: Evil Islands file-extension: adb license: MIT endian: le doc: Animations database seq: - id: magic contents: [0x41, 0x44, 0x42, 0x00] doc: Magic bytes - id: animations_count type: u4 doc: Number of animations in base - id: unit_name type: str encoding: cp1251 size: 24 doc: Name of unit - id: min_height type: f4 doc: Minimal height of unit - id: mid_height type: f4 doc: Middle height of unit - id: max_height type: f4 doc: Maximal height of unit - id: animations type: animation doc: Array of animations repeat: expr repeat-expr: animations_count types: animation: doc: Animation's parameters seq: - id: name type: str encoding: cp1251 size: 16 doc: Animation's name - id: number type: u4 doc: Index in animations array - id: additionals type: additional doc: Packed structure with animation parameters - id: action_probability type: u4 doc: Percents of action probability - id: animation_length type: u4 doc: Lenght of animation in game ticks - id: movement_speed type: f4 doc: Movement speed - id: start_show_hide1 type: u4 - id: start_show_hide2 type: u4 - id: start_step_sound1 type: u4 - id: start_step_sound2 type: u4 - id: start_step_sound3 type: u4 - id: start_step_sound4 type: u4 - id: start_hit_frame type: u4 - id: start_special_sound type: u4 - id: spec_sound_id1 type: u4 - id: spec_sound_id2 type: u4 - id: spec_sound_id3 type: u4 - id: spec_sound_id4 type: u4 types: additional: seq: - id: packed type: u8 instances: weapons: value: 'packed &amp; 127' allowed_states: value: '(packed &gt;&gt; 15) &amp; 7' action_type: value: '(packed &gt;&gt; 18) &amp; 15' action_modifyer: value: '(packed &gt;&gt; 22) &amp; 255' animation_stage: value: '(packed &gt;&gt; 30) &amp; 3' action_forms: value: '(packed &gt;&gt; 36) &amp; 63'</code> </pre> </div></div><br><blockquote>  <strong>Ini menarik:</strong> untuk beberapa unit, format basis data yang terpotong sebagian digunakan, yang jarang dieksplorasi. </blockquote><p>  Setelah berurusan dengan basis data, kami menyatakan jeda iklan.  Tetapi kami tidak akan mengiklankan apa pun - bukan metode kami.  Lebih baik menunjukkan apa yang berguna selanjutnya - bagaimana nama file makhluk. </p><br><h2 id="format-imyon-modeley">  Format Nama Model </h2><br><p>  Nama ini dikumpulkan dari kelompok dua karakter - singkatan dari "level" logis. <br>  Misalnya, karakter wanita akan tidak <code>unhufe</code> - <code>Unit &gt; Human &gt; Female</code> , dan <code>initwesp</code> - <code>Inventory &gt; Item &gt; Weapon &gt; Spear</code> , yaitu, tombak dalam inventaris (bukan bagian belakang, dan itu bagus). </p><br><div class="spoiler">  <b class="spoiler_title">Elemen lengkap pohon nama:</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">un: # unit an: # animal wi: # wild ti # tiger ba # bat bo # boar hy # hyen de # deer gi # rat ra # rat cr # crawler wo # wolf ho: # home co # cow pi # pig do # dog ho # horse ha # hare or: # orc fe # female ma # male mo: # monster co # column (menu) un # unicorn cu # Curse be # beholder tr # troll el # elemental su # succub (harpie) ba # banshee dr # driad sh # shadow li # lizard sk # skeleton sp # spider go # golem, goblin ri # Rick og # ogre zo # zombie bi # Rik's dragon cy # cyclope dg # dragon wi # willwisp mi # octopus to # toad hu: # human fe # female ma # male in: # inventory it: # item qu # quest qi # interactive ar: # armor pl # plate gl # gloves lg # leggins bt # boots sh # shirt hl # helm pt # pants li: # loot mt # material tr # trade we: # weapon hm # hammer dg # dagger sp # spear cb # crossbow sw # sword ax # axe bw # bow gm # game menu fa: # faces un: # unit an: # animal wi: # wild ti: # tiger face # face ba: # bat face # face bo: # boar face # face de: # deer face # face ra: # rat face # face cr: # crawler face # face wo: # wolf face # face ho: # home co: # cow face # face pi: # pig face # face do: # dog face # face ho: # horse face # face ha: # hare face # face hu: # human fe: # female fa # me # th # ma: # male fa # me # th # mo: # monster to: # toad face # face tr: # troll face # face or: # orc face # face sp: # spider face # face li: # lizard face # face na: # nature fl: # flora bu # bush te # termitary tr # tree li # waterplant wa # waterfall sk # sky st # stone ef: # effects cu # ar # co # components st: # static si # switch bu: # building to # tower ho # house tr # trap br # bridge ga # gate we # well (waterhole) wa: # wall me # medium li # light to # torch st # static</code> </pre> </div></div><br><blockquote>  <strong>Ini menarik:</strong> menurut klasifikasi ini, jamur adalah pohon, golem dengan goblin adalah saudara, dan Tka-Rick adalah monster.  Juga di sini Anda dapat melihat nama monster yang "berfungsi", curiga mirip dengan yang dimiliki D &amp; D - pemirsa (mata jahat), succub (harpy), ogre (cannibal), driad (rimbawan). </blockquote><p>  Setelah beristirahat secara moral, kami langsung terjun ke dalam model.  Mereka disajikan dalam beberapa format yang dihubungkan bersama. </p><br><h2 id="lnk">  Lnk </h2><br><p>  Logikanya - dasar dari model.  Menjelaskan hierarki bagian-bagian model, dalam hal pemodelan 3d modern - hierarki tulang. </p><br><p><img src="https://habrastorage.org/webt/we/va/a1/wevaa186p5bq4fvw8-4vtxbfiju.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: lnk title: Evil Islands, LNK file (bones hierarchy) application: Evil Islands file-extension: lnk license: MIT endian: le doc: Bones hierarchy seq: - id: bones_count type: u4 doc: Number of bones - id: bones_array type: bone repeat: expr repeat-expr: bones_count doc: Array of bones types: bone: doc: Bone node seq: - id: bone_name_len type: u4 doc: Length of bone's name - id: bone_name type: str encoding: cp1251 size: bone_name_len doc: Bone's name - id: parent_name_len type: u4 doc: Length of bone's parent name - id: parent_name type: str encoding: cp1251 size: parent_name_len doc: Bone's parent name</code> </pre> </div></div><br><p>  Nama induk tulang induk adalah string kosong (panjang 0). </p><br><p>  Ada tulang, namun, tidak cukup untuk memberi nama dan menyatukannya - Anda harus mengumpulkannya menjadi kerangka. </p><br><h2 id="bon">  Bon </h2><br><p>  Disebutkan sebelumnya, format ini (jika bukan arsip) mengatur posisi bagian (tulang) model relatif terhadap bagian induk.  Hanya offset yang disimpan, tanpa rotasi - salah satu perbedaan dari format modern. </p><br><p><img src="https://habrastorage.org/webt/rq/f0/nt/rqf0ntdd5sxadr0us5gfq5cfq2g.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: bon title: Evil Islands, BON file (bone position) application: Evil Islands file-extension: bon license: MIT endian: le doc: Bone position seq: - id: position type: vec3 doc: Bone translation repeat: eos types: vec3: doc: 3d vector seq: - id: x type: f4 doc: x axis - id: y type: f4 doc: y axis - id: z type: f4 doc: z axis</code> </pre> </div></div><br><p>  Seperti yang Anda lihat, ada terlalu banyak angka untuk satu offset - faktanya adalah bahwa di sini kita pertama kali menemukan salah satu fitur kunci dari mesin game - interpolasi model trilinear. </p><br><p>  Cara kerjanya: model memiliki tiga parameter interpolasi - kondisional, kekuatan, ketangkasan, pertumbuhan.  Ada juga 8 keadaan ekstrim model.  Dengan menggunakan parameter, kita bisa mendapatkan model akhir dengan interpolasi trilinear. </p><br><div class="spoiler">  <b class="spoiler_title">Algoritma itu sendiri</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">trilinear</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(val, coefs=[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">, </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params">])</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># Linear interpolation by str t1 = val[0] + (val[1] - val[0]) * coefs[1] t2 = val[2] + (val[3] - val[2]) * coefs[1] # Bilinear interpolation by dex v1 = t1 + (t2 - t1) * coefs[0] # Linear interpolation by str t1 = val[4] + (val[5] - val[4]) * coefs[1] t2 = val[6] + (val[7] - val[6]) * coefs[1] # Bilinear interpolation by dex v2 = t1 + (t2 - t1) * coefs[0] # Trilinear interpolation by height return v1 + (v2 - v1) * coefs[2]</span></span></code> </pre> </div></div><br><blockquote>  <strong>Ini menarik:</strong> interpolasi model trilinear digunakan untuk menghidupkan beberapa objek, misalnya, membuka pintu batu dan peti. </blockquote><p>  Sekarang saatnya untuk melihat bagian-bagian dari model itu sendiri. </p><br><h2 id="fig">  Gbr </h2><br><p>  Mungkin reli ini tidak mungkin dimengerti.  Anda dapat menemukan deskripsinya dan plug-in untuk blender di internet, tetapi bahkan dengan mereka kesadarannya tidak langsung datang.  Lihatlah: </p><br><p><img src="https://habrastorage.org/webt/c_/yx/bu/c_yxbuglpgn1h0j2g48gc1lk1dw.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: fig title: Evil Islands, FIG file (figure) application: Evil Islands file-extension: fig license: MIT endian: le doc: 3d mesh seq: - id: magic contents: [0x46, 0x49, 0x47, 0x38] doc: Magic bytes - id: vertex_count type: u4 doc: Number of vertices blocks - id: normal_count type: u4 doc: Number of normals blocks - id: texcoord_count type: u4 doc: Number of UV pairs - id: index_count type: u4 doc: Number of indeces - id: vertex_components_count type: u4 doc: Number of vertex components - id: morph_components_count type: u4 doc: Number of morphing components - id: unknown contents: [0, 0, 0, 0] doc: Unknown (aligment) - id: group type: u4 doc: Render group - id: texture_index type: u4 doc: Texture offset - id: center type: vec3 doc: Center of mesh repeat: expr repeat-expr: 8 - id: aabb_min type: vec3 doc: AABB point of mesh repeat: expr repeat-expr: 8 - id: aabb_max type: vec3 doc: AABB point of mesh repeat: expr repeat-expr: 8 - id: radius type: f4 doc: Radius of boundings repeat: expr repeat-expr: 8 - id: vertex_array type: vertex_block doc: Blocks of raw vertex data repeat: expr repeat-expr: 8 - id: normal_array type: vec4x4 doc: Packed normal data repeat: expr repeat-expr: normal_count - id: texcoord_array type: vec2 doc: Texture coordinates data repeat: expr repeat-expr: texcoord_count - id: index_array type: u2 doc: Triangles indeces repeat: expr repeat-expr: index_count - id: vertex_components_array type: vertex_component doc: Vertex components array repeat: expr repeat-expr: vertex_components_count - id: morph_components_array type: morph_component doc: Morphing components array repeat: expr repeat-expr: morph_components_count types: morph_component: doc: Morphing components indeces seq: - id: morph_index type: u2 doc: Index of morphing data - id: vertex_index type: u2 doc: Index of vertex vertex_component: doc: Vertex components indeces seq: - id: position_index type: u2 doc: Index of position data - id: normal_index type: u2 doc: Index of normal data - id: texture_index type: u2 doc: Index of texcoord data vec2: doc: 2d vector seq: - id: u type: f4 doc: u axis - id: v type: f4 doc: v axis vec3: doc: 3d vector seq: - id: x type: f4 doc: x axis - id: y type: f4 doc: y axis - id: z type: f4 doc: z axis vec3x4: doc: 3d vector with 4 values per axis seq: - id: x type: f4 doc: x axis repeat: expr repeat-expr: 4 - id: y type: f4 doc: y axis repeat: expr repeat-expr: 4 - id: z type: f4 doc: z axis repeat: expr repeat-expr: 4 vertex_block: doc: Vertex raw block seq: - id: block type: vec3x4 doc: Vertex data repeat: expr repeat-expr: _root.vertex_count vec4x4: doc: 4d vector with 4 values per axis seq: - id: x type: f4 doc: x axis repeat: expr repeat-expr: 4 - id: y type: f4 doc: y axis repeat: expr repeat-expr: 4 - id: z type: f4 doc: z axis repeat: expr repeat-expr: 4 - id: w type: f4 doc: w axis repeat: expr repeat-expr: 4</code> </pre> </div></div><br><p>  Apa kesulitannya?  Jadi bagaimanapun, data normals dan simpul disimpan dalam blok 4, dan simpul juga diatur dalam 8 blok untuk interpolasi. </p><br><blockquote>  <strong>Ini menarik:</strong> mungkin, pengelompokan semacam itu dibuat untuk mempercepat pemrosesan dengan bantuan instruksi SSE yang muncul dalam prosesor Intel sejak 1999. </blockquote><p>  Kita membaca dan menyusun model, tetapi ada sesuatu yang hilang.  Tepat - animasi! </p><br><h2 id="anm">  Anm </h2><br><p>  Animasi disimpan dalam bentuk komponen sebagai status kunci.  Fakta yang menarik adalah bahwa ia mendukung tidak hanya animasi kerangka, tetapi juga verteks morphing. </p><br><p><img src="https://habrastorage.org/webt/i_/yb/lr/i_yblr5zy2irqqer1jqi6tm8v_c.png"></p><br><div class="spoiler">  <b class="spoiler_title">Deskripsi struktur</b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: anm title: Evil Islands, ANM file (bone animation) application: Evil Islands file-extension: anm license: MIT endian: le doc: Bone animation seq: - id: rotation_frames_count type: u4 doc: Number of rotation frames - id: rotation_frames type: quat repeat: expr repeat-expr: rotation_frames_count doc: Bone rotations - id: translation_frames_count type: u4 doc: Number of translation frames - id: translation_frames type: vec3 repeat: expr repeat-expr: translation_frames_count doc: Bone translation - id: morphing_frames_count type: u4 doc: Number of morphing frames - id: morphing_vertex_count type: u4 doc: Number of vertices with morphing - id: morphing_frames type: morphing_frame repeat: expr repeat-expr: morphing_frames_count doc: Array of morphing frames types: vec3: doc: 3d vector seq: - id: x type: f4 doc: x axis - id: y type: f4 doc: y axis - id: z type: f4 doc: z axis quat: doc: quaternion seq: - id: w type: f4 doc: w component - id: x type: f4 doc: x component - id: y type: f4 doc: y component - id: z type: f4 doc: z component morphing_frame: doc: Array of verteces morphing seq: - id: vertex_shift type: vec3 repeat: expr repeat-expr: _parent.morphing_vertex_count doc: Morphing shift per vertex</code> </pre> </div></div><br><p>  Itu saja - sekarang kami memiliki model lengkap, Anda dapat mengagumi kadal pertapa yang baru saja dirender: </p><br><p><img src="https://habrastorage.org/webt/bu/tk/sm/butksmbjbom_kgib93drtz9xvj8.jpeg"></p><br><div class="spoiler">  <b class="spoiler_title">Momen nostalgia</b> <div class="spoiler_text"><h4 id="uznat-chto-nuzhno-yascheru">  Cari tahu apa yang dibutuhkan Kadal </h4><br><p>  <em>Percakapan dengan kadal di rumahnya</em> </p><br><p>  <strong>Hermit Lizard:</strong> Kamu telah datang, kawan.  Ini bagus. </p><br><p>  <strong>Zach: Hanya</strong> itu yang ingin kau katakan padaku? </p><br><p>  <strong>Lizard Hermit:</strong> Anda sedang terburu-buru lagi.  Saya ingat pertanyaan Anda dan akan menjawabnya.  Saya datang ke orang-orang dengan besi untuk membuat kesepakatan.  Tapi saya melihat bagaimana mereka lakukan pada Anda.  Mereka tidak memegang kata-kata, saya berhenti mempercayai mereka.  Anda menepati janji Anda.  Kesepakatan akan ditawarkan kepada Anda. </p><br><p>  <strong>Kadal Hermit:</strong> Orang-orang menyukai emas.  Kadal emas tidak menarik.  Anda akan menyelesaikan tugas saya, dan saya akan memberi Anda emas yang saya miliki.  Ada banyak emas. </p><br><p>  <strong>Zach <em>(serius dan tanpa banyak minat)</em> :</strong> Hmm ... Emas ... Itu pasti tidak akan sakit ... </p><br><p>  <strong>Zach:</strong> Akan lebih baik jika kamu bisa membantuku mencari tahu di mana penyihir tua yang kucari selama ini.  Lagi pula, kadal adalah orang kuno, dan Anda bisa mengetahuinya! </p><br><p>  <strong>Hermit Lizard:</strong> Anda benar.  Kadal adalah orang kuno.  Saya bisa mengumpulkan semua yang kita tahu tentang orang tua itu.  Apakah Anda setuju untuk menyelesaikan misi saya? </p><br><p>  <strong>Zach:</strong> Bicara apa!  Anggap saja semuanya sudah dilakukan. </p><br><p>  <strong>Kadal Hermit <em>(serius)</em> :</strong> Sudah selesai?  Apakah Anda ingin menipu saya? </p><br><p>  <strong>Zach:</strong> Sebenarnya, saya ingin membuat lelucon, kalau tidak Anda benar-benar serius. </p><br><p>  <strong>Kadal Pertapa: Begitu</strong> .  Ini sebuah lelucon.  Saya kira saya bisa membuat lelucon juga.  Lalu.  Dan sekarang saya ingin Anda mengembalikan air ke Kanal.  Para Orc mencuri air dari kami. </p><br><p>  <strong>Kadal Hermit:</strong> Pergi ke selatan di sepanjang air.  Anda akan melihat bendungan dan Terusan.  Bendungan harus dinaikkan.  Leverage.  Saya akan memberikannya.  Saluran harus diblokir.  Batu itu.  Saya tidak akan memberi batu.  Dia sudah berbaring di tepi Kanal.  Hulu bendungan.  Batu itu berat.  Ketika para orc menggali, mereka mengangkatnya untuk waktu yang lama.  Jika Anda mendorongnya, dia akan jatuh kembali dengan cepat. </p><br><p>  <strong>Lizard Hermit:</strong> Setelah itu, kembali.  Saya akan menceritakan semua yang saya pelajari tentang Pesulap tua itu. </p><br><p>  <strong>Zach:</strong> Tangan di tangan!  Tapi omong-omong, jika Anda menambahkan sedikit koin ke cerita, saya tidak akan tersinggung sama sekali. </p><br><p>  <strong>Kadal Pertapa:</strong> Untuk koin, pergi ke kerabat saya yang tinggal di dangkal lebih jauh di selatan.  Pergi ke pulau berpasir terjauh, yang ketiga berturut-turut.  Harta akan menjadi milik Anda! </p><br><p>  <strong>Lizard Hermit <em>(untuk dirinya sendiri)</em> :</strong> Strange.  Pria ini suka humor.  Saya sedang bercanda.  Pria itu tidak tertawa.  Sangat aneh. </p></div></div><br><p>  Sekarang - yang paling menarik: bagaimana peta disimpan. </p><br><h2 id="mp">  MP </h2><br><p>  Ini adalah file header peta.  Karena kebetulan yang tidak menguntungkan, ekstensi tersebut bertepatan dengan yang terjadi pada penyimpanan multipemain, yang tidak akan kami pertimbangkan. </p><br><p>  Pertama, Anda perlu memberikan gambaran umum tentang lanskap: </p><br><ul><li>  jumlah "potongan" - potongan kartu 32x32 meter; </li><li>  tinggi maksimum (karena ketinggian simpul disimpan dalam skala bilangan bulat); </li><li>  jumlah ubin atlases. </li></ul><br><p>     ,     — ,   . </p><br><p><img src="https://habrastorage.org/webt/rq/5a/zv/rq5azvlnywx7dynoartwivfelea.png"></p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: mp title: Evil Islands, MP file (map header) application: Evil Islands file-extension: mp license: MIT endian: le doc: Map header seq: - id: magic contents: [0x72, 0xF6, 0x4A, 0xCE] doc: Magic bytes - id: max_altitude type: f4 doc: Maximal height of terrain - id: x_chunks_count type: u4 doc: Number of sectors by x - id: y_chunks_count type: u4 doc: Number of sectors by y - id: textures_count type: u4 doc: Number of texture files - id: texture_size type: u4 doc: Size of texture in pixels by side - id: tiles_count type: u4 doc: Number of tiles - id: tile_size type: u4 doc: Size of tile in pixels by side - id: materials_count type: u2 doc: Number of materials - id: animated_tiles_count type: u4 doc: Number of animated tiles - id: materials type: material doc: Map materials repeat: expr repeat-expr: materials_count - id: id_array type: u4 doc: Tile type repeat: expr repeat-expr: tiles_count enum: tile_type - id: animated_tiles type: animated_tile doc: Animated tiles repeat: expr repeat-expr: animated_tiles_count types: material: doc: Material parameters seq: - id: type type: u4 doc: Material type by enum: terrain_type - id: color type: rgba doc: RGBA diffuse color - id: self_illumination type: f4 doc: Self illumination - id: wave_multiplier type: f4 doc: Wave speed multiplier - id: warp_speed type: f4 doc: Warp speed multiplier - id: unknown size: 12 types: rgba: doc: RGBA color seq: - id: r type: f4 doc: Red channel - id: g type: f4 doc: Green channel - id: b type: f4 doc: Blue channel - id: a type: f4 doc: Alpha channel enums: terrain_type: 0: base 1: water_notexture 2: grass 3: water animated_tile: doc: Animated tile parameters seq: - id: start_index type: u2 doc: First tile of animation - id: length type: u2 doc: Animation frames count enums: tile_type: 0: grass 1: ground 2: stone 3: sand 4: rock 5: field 6: water 7: road 8: empty 9: snow 10: ice 11: drygrass 12: snowballs 13: lava 14: swamp 15: highrock</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><table><thead><tr><th> terrain type </th><th>  Jenis </th></tr></thead><tbody><tr><td>  0 </td><td>   </td></tr><tr><td>  1 </td><td>    </td></tr><tr><td>  2 </td><td>   </td></tr><tr><td>  3 </td><td>   </td></tr></tbody></table></div></div><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><table><thead><tr><th> material type </th><th>  Jenis </th></tr></thead><tbody><tr><td>  0 </td><td> grass </td></tr><tr><td>  1 </td><td> ground </td></tr><tr><td>  2 </td><td> stone </td></tr><tr><td>  3 </td><td> sand </td></tr><tr><td>  4 </td><td> rock </td></tr><tr><td> 5 </td><td> field </td></tr><tr><td>  6 </td><td> water </td></tr><tr><td>  7 </td><td> road </td></tr><tr><td>  8 </td><td> (empty) </td></tr><tr><td>  9 </td><td> snow </td></tr><tr><td>  10 </td><td> ice </td></tr><tr><td>  11 </td><td> drygrass </td></tr><tr><td> 12 </td><td> snowballs </td></tr><tr><td> 13 </td><td> lava </td></tr><tr><td> 14 </td><td> swamp </td></tr><tr><td>  15 </td><td> highrock </td></tr></tbody></table></div></div><br><p>      ,      <code>Res/aiinfo.res/tileDesc.reg</code> . </p><br><blockquote> <strong> :</strong>     ,   —       . <br>   :       . </blockquote><p>       .  ! </p><br><h2 id="sec"> SEC </h2><br><p>      —  3232 .       ,    <code>ZonenameXXXYYY</code> . </p><br><p><img src="https://habrastorage.org/webt/9-/pd/_l/9-pd_ltybkk7hx_oywo4wsfwrpc.png"></p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="plaintext hljs">meta: id: sec title: Evil Islands, SEC file (map sector) application: Evil Islands file-extension: sec license: MIT endian: le doc: Map sector seq: - id: magic contents: [0x74, 0xF7, 0x4B, 0xCF] doc: Magic bytes - id: liquids type: u1 doc: Liquids layer indicator - id: vertexes type: vertex doc: Vertex array 33x33 repeat: expr repeat-expr: 1089 - id: liquid_vertexes type: vertex doc: Vertex array 33x33 if: liquids != 0 repeat: expr repeat-expr: 'liquids != 0 ? 1089 : 0' - id: tiles type: tile doc: Tile array 16x16 repeat: expr repeat-expr: 256 - id: liquid_tiles type: tile doc: Tile array 16x16 if: liquids != 0 repeat: expr repeat-expr: 'liquids != 0 ? 256 : 0' - id: liquid_material type: u2 doc: Index of material if: liquids != 0 repeat: expr repeat-expr: 'liquids != 0 ? 256 : 0' types: vertex: doc: Vertex data seq: - id: x_shift type: s1 doc: Shift by x axis - id: y_shift type: s1 doc: Shift by y axis - id: altitude type: u2 doc: Height (z position) - id: packed_normal type: normal doc: Packed normal normal: doc: Normal (3d vector) seq: - id: packed type: u4 doc: Normal packed in 4b instances: x: doc: Unpacked x component value: packed &gt;&gt; 11 &amp; 0x7FF y: doc: Unpacked y component value: packed &amp; 0x7FF z: doc: Unpacked z component value: packed &gt;&gt; 22 tile: doc: Tile parameters seq: - id: packed type: u2 doc: Tile information packed in 2b instances: index: doc: Tile index in texture value: packed &amp; 63 texture: doc: Texture index value: packed &gt;&gt; 6 &amp; 255 rotation: doc: Tile rotation (*90 degrees) value: packed &gt;&gt; 14 &amp; 3</code> </pre> </div></div><br><p>      —       . </p><br><div class="spoiler"> <b class="spoiler_title">  </b> <div class="spoiler_text"><h4 id="raspakovka-normali">   </h4><br><p> 10    z,  11  x  y </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> packed_normal; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> x = ((<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)((packed_normal &gt;&gt; <span class="hljs-number"><span class="hljs-number">11</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x7FF</span></span>) - <span class="hljs-number"><span class="hljs-number">1000.0f</span></span>) / <span class="hljs-number"><span class="hljs-number">1000.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> y = ((<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(packed_normal &amp; <span class="hljs-number"><span class="hljs-number">0x7FF</span></span>) - <span class="hljs-number"><span class="hljs-number">1000.0f</span></span>) / <span class="hljs-number"><span class="hljs-number">1000.0f</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> z = (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span>)(packed_normal &gt;&gt; <span class="hljs-number"><span class="hljs-number">22</span></span>) / <span class="hljs-number"><span class="hljs-number">1000.0f</span></span>;</code> </pre> <br><h4 id="informaciya-o-teksture">    </h4><br><p> 6     , 8   , 2   </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">short</span></span> texture; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> tile_index = f &amp; <span class="hljs-number"><span class="hljs-number">63</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> texture_index = (f &gt;&gt; <span class="hljs-number"><span class="hljs-number">6</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">255</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> rotation = (f &gt;&gt; <span class="hljs-number"><span class="hljs-number">14</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">3</span></span>;</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title"> 3d </b> <div class="spoiler_text"><h4 id="poluchenie-landshafta">   </h4><br><p>    33   33 ,  ,  3232 .     — 1  . </p><br><p>  : <br> x =   x + x_offset / 254 <br> y =   y + y_offset / 254 <br> z = altitude / 65535 * max_altitude ( .mp ) </p><br><p>     "",       : </p><br><pre> <code class="plaintext hljs"> 0 1 2 *-*-* |\|\| ~ 33 *-*-* |\|\| ~ 66 *-*-* ~ ~ ~</code> </pre> <br><p>       ,  , 1616 .   — 2  .      ,  90 . </p></div></div><br><p>        .   ,     ,     ID  ,       MP . </p><br><blockquote> <strong> :</strong>    MP,     ,       :  ID     , -     . <br>  ID       —         . </blockquote><p>  —      : </p><br><p><img src="https://habrastorage.org/webt/so/88/c6/so88c6ufcpzn1cqhxc7orbzeif4.jpeg"></p><br><p>   - —    ,         . </p><br><h2 id="mob"> MOB </h2><br><p>    ( )   ,     ,     :   .           —    " ",     . <br>         ,    (    ). </p><br><p>   : </p><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> structure { <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> type_id; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> size; byte data[size - <span class="hljs-number"><span class="hljs-number">8</span></span>]; } node;</code> </pre> <br><div class="spoiler"> <b class="spoiler_title">  (,   !)</b> <div class="spoiler_text"><p><img src="https://habrastorage.org/webt/hf/jd/yi/hfjdyiujzmtzizewv5i86pmjil0.png"></p><br><p>   ( , ) </p><br><pre> <code class="plaintext hljs">meta: id: mob title: Evil Islands, MOB file (map entities) application: Evil Islands file-extension: mob license: MIT endian: le doc: Map entities tree seq: - id: root_node type: node doc: Root node types: node: doc: Entity node seq: - id: type_id type: u4 doc: Node children type ID - id: size type: u4 doc: Node full size - id: data type: node_data size: size - 8 doc: Node stored data node_data: doc: Node data seq: - id: value type: switch-on: _parent.type_id cases: 0xA000: node 0x00001E00: node 0x00001E01: node 0x00001E02: node 0x00001E03: node 0x00001E0B: node 0x00001E0E: node 0x0000A000: node 0x0000AA01: node 0x0000ABD0: node 0x0000B000: node 0x0000B001: node 0x0000CC01: node 0x0000DD01: node 0x0000E000: node 0x0000E001: node 0x0000F000: node 0x0000FF00: node 0x0000FF01: node 0x0000FF02: node 0xBBAB0000: node 0xBBAC0000: node 0xBBBB0000: node 0xBBBC0000: node 0xBBBD0000: node 0xBBBE0000: node 0xBBBF0000: node 0xDDDDDDD1: node _: u1 doc: Node elements repeat: eos</code> </pre> </div></div><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"><table><thead><tr><th>   </th><th>  () </th><th>  </th></tr></thead><tbody><tr><td> AiGraph </td><td></td><td>   </td></tr><tr><td> AreaArray </td><td></td><td></td></tr><tr><td> Byte </td><td>  1 </td><td> 1   </td></tr><tr><td> Diplomacy </td><td> 4096 </td><td> 32x32   2  </td></tr><tr><td> Dword </td><td>  4 </td><td> 4   </td></tr><tr><td>  Mengapung </td><td>  4 </td><td> 4  </td></tr><tr><td> LeverStats </td><td> 12 </td><td>   </td></tr><tr><td> Null </td><td>  0 </td><td>   </td></tr><tr><td> Plot </td><td> 12 </td><td> 3 floats (vec3) </td></tr><tr><td> Plot2DArray </td><td></td><td></td></tr><tr><td> Quaternion </td><td>  16 </td><td> 4 floats (vec4) </td></tr><tr><td> Record </td><td> &gt;8 </td><td>   </td></tr><tr><td> Rectangle </td><td></td><td></td></tr><tr><td>  Tali </td><td></td><td>  </td></tr><tr><td> StringArray </td><td> &gt;4 </td><td>   </td></tr><tr><td> StringEncrypted </td><td> &gt;4 </td><td>    </td></tr><tr><td> UnitStats </td><td>  180 </td><td>   </td></tr><tr><td> Unknown </td><td></td><td></td></tr></tbody></table></div></div><br><div class="spoiler"> <b class="spoiler_title">  type_id</b> <div class="spoiler_text"><table><thead><tr><th> type_id </th><th>   </th><th>   </th></tr></thead><tbody><tr><td> 0x00000000 </td><td> Record </td><td> ROOT </td></tr><tr><td> 0x00001E00 </td><td> Record </td><td> VSS_SECTION </td></tr><tr><td> 0x00001E01 </td><td> Record </td><td> VSS_TRIGER </td></tr><tr><td> 0x00001E02 </td><td> Record </td><td> VSS_CHECK </td></tr><tr><td> 0x00001E03 </td><td> Record </td><td> VSS_PATH </td></tr><tr><td> 0x00001E04 </td><td> Dword </td><td> VSS_ID </td></tr><tr><td> 0x00001E05 </td><td> Rectangle </td><td> VSS_RECT </td></tr><tr><td> 0x00001E06 </td><td> Dword </td><td> VSS_SRC_ID </td></tr><tr><td> 0x00001E07 </td><td> Dword </td><td> VSS_DST_ID </td></tr><tr><td> 0x00001E08 </td><td>  Tali </td><td> VSS_TITLE </td></tr><tr><td> 0x00001E09 </td><td>  Tali </td><td> VSS_COMMANDS </td></tr><tr><td> 0x00001E0A </td><td> Byte </td><td> VSS_ISSTART </td></tr><tr><td> 0x00001E0B </td><td> Record </td><td> VSS_LINK </td></tr><tr><td> 0x00001E0C </td><td>  Tali </td><td> VSS_GROUP </td></tr><tr><td> 0x00001E0D </td><td> Byte </td><td> VSS_IS_USE_GROUP </td></tr><tr><td> 0x00001E0E </td><td> Record </td><td> VSS_VARIABLE </td></tr><tr><td> 0x00001E0F </td><td> StringArray </td><td> VSS_BS_CHECK </td></tr><tr><td> 0x00001E10 </td><td> StringArray </td><td> VSS_BS_COMMANDS </td></tr><tr><td> 0x00001E11 </td><td>  Tali </td><td> VSS_CUSTOM_SRIPT </td></tr><tr><td> 0x0000A000 </td><td> Record </td><td> OBJECTDBFILE </td></tr><tr><td> 0x0000AA00 </td><td> Null </td><td> LIGHT_SECTION </td></tr><tr><td> 0x0000AA01 </td><td> Record </td><td> LIGHT </td></tr><tr><td> 0x0000AA02 </td><td>  Mengapung </td><td> LIGHT_RANGE </td></tr><tr><td> 0x0000AA03 </td><td>  Tali </td><td> LIGHT_NAME </td></tr><tr><td> 0x0000AA04 </td><td> Plot </td><td> LIGHT_POSITION </td></tr><tr><td> 0x0000AA05 </td><td> Dword </td><td> LIGHT_ID </td></tr><tr><td> 0x0000AA06 </td><td> Byte </td><td> LIGHT_SHADOW </td></tr><tr><td> 0x0000AA07 </td><td> Plot </td><td> LIGHT_COLOR </td></tr><tr><td> 0x0000AA08 </td><td>  Tali </td><td> LIGHT_COMMENTS </td></tr><tr><td> 0x0000ABD0 </td><td> Record </td><td> WORLD_SET </td></tr><tr><td> 0x0000ABD1 </td><td> Plot </td><td> WS_WIND_DIR </td></tr><tr><td> 0x0000ABD2 </td><td>  Mengapung </td><td> WS_WIND_STR </td></tr><tr><td> 0x0000ABD3 </td><td>  Mengapung </td><td> WS_TIME </td></tr><tr><td> 0x0000ABD4 </td><td>  Mengapung </td><td> WS_AMBIENT </td></tr><tr><td> 0x0000ABD5 </td><td>  Mengapung </td><td> WS_SUN_LIGHT </td></tr><tr><td> 0x0000B000 </td><td> Record </td><td> OBJECTSECTION </td></tr><tr><td> 0x0000B001 </td><td> Record </td><td> OBJECT </td></tr><tr><td> 0x0000B002 </td><td> Dword </td><td> NID </td></tr><tr><td> 0x0000B003 </td><td> Dword </td><td> OBJTYPE </td></tr><tr><td> 0x0000B004 </td><td>  Tali </td><td> OBJNAME </td></tr><tr><td> 0x0000B005 </td><td> Null </td><td> OBJINDEX </td></tr><tr><td> 0x0000B006 </td><td>  Tali </td><td> OBJTEMPLATE </td></tr><tr><td> 0x0000B007 </td><td>  Tali </td><td> OBJPRIMTXTR </td></tr><tr><td> 0x0000B008 </td><td>  Tali </td><td> OBJSECTXTR </td></tr><tr><td> 0x0000B009 </td><td> Plot </td><td> OBJPOSITION </td></tr><tr><td> 0x0000B00A </td><td> Quaternion </td><td> OBJROTATION </td></tr><tr><td> 0x0000B00B </td><td> Null </td><td> OBJTEXTURE </td></tr><tr><td> 0x0000B00C </td><td> Plot </td><td> OBJCOMPLECTION </td></tr><tr><td> 0x0000B00D </td><td> StringArray </td><td> OBJBODYPARTS </td></tr><tr><td> 0x0000B00E </td><td>  Tali </td><td> PARENTTEMPLATE </td></tr><tr><td> 0x0000B00F </td><td>  Tali </td><td> OBJCOMMENTS </td></tr><tr><td> 0x0000B010 </td><td> Null </td><td> OBJ_DEF_LOGIC </td></tr><tr><td> 0x0000B011 </td><td> Byte </td><td> OBJ_PLAYER </td></tr><tr><td> 0x0000B012 </td><td> Dword </td><td> OBJ_PARENT_ID </td></tr><tr><td> 0x0000B013 </td><td> Byte </td><td> OBJ_USE_IN_SCRIPT </td></tr><tr><td> 0x0000B014 </td><td> Byte </td><td> OBJ_IS_SHADOW </td></tr><tr><td> 0x0000B015 </td><td> Null </td><td> OBJ_R </td></tr><tr><td> 0x0000B016 </td><td>  Tali </td><td> OBJ_QUEST_INFO </td></tr><tr><td> 0x0000C000 </td><td> Null </td><td> SC_OBJECTDBFILE </td></tr><tr><td> 0x0000CC00 </td><td> Null </td><td> SOUND_SECTION </td></tr><tr><td> 0x0000CC01 </td><td> Record </td><td> SOUND </td></tr><tr><td> 0x0000CC02 </td><td> Dword </td><td> SOUND_ID </td></tr><tr><td> 0x0000CC03 </td><td> Plot </td><td> SOUND_POSITION </td></tr><tr><td> 0x0000CC04 </td><td> Dword </td><td> SOUND_RANGE </td></tr><tr><td> 0x0000CC05 </td><td>  Tali </td><td> SOUND_NAME </td></tr><tr><td> 0x0000CC06 </td><td> Dword </td><td> SOUND_MIN </td></tr><tr><td> 0x0000CC07 </td><td> Dword </td><td> SOUND_MAX </td></tr><tr><td> 0x0000CC08 </td><td>  Tali </td><td> SOUND_COMMENTS </td></tr><tr><td> 0x0000CC09 </td><td> Null </td><td> SOUND_VOLUME </td></tr><tr><td> 0x0000CC0A </td><td> StringArray </td><td> SOUND_RESNAME </td></tr><tr><td> 0x0000CC0B </td><td> Dword </td><td> SOUND_RANGE2 </td></tr><tr><td> 0x0000CC0D </td><td> Byte </td><td> SOUND_AMBIENT </td></tr><tr><td> 0x0000CC0E </td><td> Byte </td><td> SOUND_IS_MUSIC </td></tr><tr><td> 0x0000D000 </td><td> Null </td><td> PR_OBJECTDBFILE </td></tr><tr><td> 0x0000DD00 </td><td> Null </td><td> PARTICL_SECTION </td></tr><tr><td> 0x0000DD01 </td><td> Record </td><td> PARTICL </td></tr><tr><td> 0x0000DD02 </td><td> Dword </td><td> PARTICL_ID </td></tr><tr><td> 0x0000DD03 </td><td> Plot </td><td> PARTICL_POSITION </td></tr><tr><td> 0x0000DD04 </td><td>  Tali </td><td> PARTICL_COMMENTS </td></tr><tr><td> 0x0000DD05 </td><td>  Tali </td><td> PARTICL_NAME </td></tr><tr><td> 0x0000DD06 </td><td> Dword </td><td> PARTICL_TYPE </td></tr><tr><td> 0x0000DD07 </td><td>  Mengapung </td><td> PARTICL_SCALE </td></tr><tr><td> 0x0000E000 </td><td> Record </td><td> DIRICTORY </td></tr><tr><td> 0x0000E001 </td><td> Record </td><td> FOLDER </td></tr><tr><td> 0x0000E002 </td><td>  Tali </td><td> DIR_NAME </td></tr><tr><td> 0x0000E003 </td><td> Dword </td><td> DIR_NINST </td></tr><tr><td> 0x0000E004 </td><td> Dword </td><td> DIR_PARENT_FOLDER </td></tr><tr><td> 0x0000E005 </td><td> Byte </td><td> DIR_TYPE </td></tr><tr><td> 0x0000F000 </td><td> Record </td><td> DIRICTORY_ELEMENTS </td></tr><tr><td> 0x0000FF00 </td><td> Record </td><td> SEC_RANGE </td></tr><tr><td> 0x0000FF01 </td><td> Record </td><td> MAIN_RANGE </td></tr><tr><td> 0x0000FF02 </td><td> Record </td><td> RANGE </td></tr><tr><td> 0x0000FF05 </td><td> Dword </td><td> MIN_ID </td></tr><tr><td> 0x0000FF06 </td><td> Dword </td><td> MAX_ID </td></tr><tr><td> 0x31415926 </td><td> AiGraph </td><td> AIGRAPH </td></tr><tr><td> 0xACCEECCA </td><td>  Tali </td><td> SS_TEXT_OLD </td></tr><tr><td> 0xACCEECCB </td><td> StringEncrypted </td><td> SS_TEXT </td></tr><tr><td> 0xBBAB0000 </td><td> Record </td><td> MAGIC_TRAP </td></tr><tr><td> 0xBBAB0001 </td><td> Dword </td><td> MT_DIPLOMACY </td></tr><tr><td> 0xBBAB0002 </td><td>  Tali </td><td> MT_SPELL </td></tr><tr><td> 0xBBAB0003 </td><td> AreaArray </td><td> MT_AREAS </td></tr><tr><td> 0xBBAB0004 </td><td> Plot2DArray </td><td> MT_TARGETS </td></tr><tr><td> 0xBBAB0005 </td><td> Dword </td><td> MT_CAST_INTERVAL </td></tr><tr><td> 0xBBAC0000 </td><td> Record </td><td> LEVER </td></tr><tr><td> 0xBBAC0001 </td><td> Null </td><td> LEVER_SCIENCE_STATS </td></tr><tr><td> 0xBBAC0002 </td><td> Byte </td><td> LEVER_CUR_STATE </td></tr><tr><td> 0xBBAC0003 </td><td> Byte </td><td> LEVER_TOTAL_STATE </td></tr><tr><td> 0xBBAC0004 </td><td> Byte </td><td> LEVER_IS_CYCLED </td></tr><tr><td> 0xBBAC0005 </td><td> Byte </td><td> LEVER_CAST_ONCE </td></tr><tr><td> 0xBBAC0006 </td><td> LeverStats </td><td> LEVER_SCIENCE_STATS_NEW </td></tr><tr><td> 0xBBAC0007 </td><td> Byte </td><td> LEVER_IS_DOOR </td></tr><tr><td> 0xBBAC0008 </td><td> Byte </td><td> LEVER_RECALC_GRAPH </td></tr><tr><td> 0xBBBB0000 </td><td> Record </td><td> UNIT </td></tr><tr><td> 0xBBBB0001 </td><td> Null </td><td> UNIT_R </td></tr><tr><td> 0xBBBB0002 </td><td>  Tali </td><td> UNIT_PROTOTYPE </td></tr><tr><td> 0xBBBB0003 </td><td> Null </td><td> UNIT_ITEMS </td></tr><tr><td> 0xBBBB0004 </td><td> UnitStats </td><td> UNIT_STATS </td></tr><tr><td> 0xBBBB0005 </td><td> StringArray </td><td> UNIT_QUEST_ITEMS </td></tr><tr><td> 0xBBBB0006 </td><td> StringArray </td><td> UNIT_QUICK_ITEMS </td></tr><tr><td> 0xBBBB0007 </td><td> StringArray </td><td> UNIT_SPELLS </td></tr><tr><td> 0xBBBB0008 </td><td> StringArray </td><td> UNIT_WEAPONS </td></tr><tr><td> 0xBBBB0009 </td><td> StringArray </td><td> UNIT_ARMORS </td></tr><tr><td> 0xBBBB000A </td><td> Byte </td><td> UNIT_NEED_IMPORT </td></tr><tr><td> 0xBBBC0000 </td><td> Record </td><td> UNIT_LOGIC </td></tr><tr><td> 0xBBBC0001 </td><td> Null </td><td> UNIT_LOGIC_AGRESSIV </td></tr><tr><td> 0xBBBC0002 </td><td> Byte </td><td> UNIT_LOGIC_CYCLIC </td></tr><tr><td> 0xBBBC0003 </td><td> Dword </td><td> UNIT_LOGIC_MODEL </td></tr><tr><td> 0xBBBC0004 </td><td>  Mengapung </td><td> UNIT_LOGIC_GUARD_R </td></tr><tr><td> 0xBBBC0005 </td><td> Plot </td><td> UNIT_LOGIC_GUARD_PT </td></tr><tr><td> 0xBBBC0006 </td><td> Byte </td><td> UNIT_LOGIC_NALARM </td></tr><tr><td> 0xBBBC0007 </td><td> Byte </td><td> UNIT_LOGIC_USE </td></tr><tr><td> 0xBBBC0008 </td><td> Null </td><td> UNIT_LOGIC_REVENGE </td></tr><tr><td> 0xBBBC0009 </td><td> Null </td><td> UNIT_LOGIC_FEAR </td></tr><tr><td> 0xBBBC000A </td><td>  Mengapung </td><td> UNIT_LOGIC_WAIT </td></tr><tr><td> 0xBBBC000B </td><td> Byte </td><td> UNIT_LOGIC_ALARM_CONDITION </td></tr><tr><td> 0xBBBC000C </td><td>  Mengapung </td><td> UNIT_LOGIC_HELP </td></tr><tr><td> 0xBBBC000D </td><td> Byte </td><td> UNIT_LOGIC_ALWAYS_ACTIVE </td></tr><tr><td> 0xBBBC000E </td><td> Byte </td><td> UNIT_LOGIC_AGRESSION_MODE </td></tr><tr><td> 0xBBBD0000 </td><td> Record </td><td> GUARD_PT </td></tr><tr><td> 0xBBBD0001 </td><td> Plot </td><td> GUARD_PT_POSITION </td></tr><tr><td> 0xBBBD0002 </td><td> Null </td><td> GUARD_PT_ACTION </td></tr><tr><td> 0xBBBE0000 </td><td> Record </td><td> ACTION_PT </td></tr><tr><td> 0xBBBE0001 </td><td> Plot </td><td> ACTION_PT_LOOK_PT </td></tr><tr><td> 0xBBBE0002 </td><td> Dword </td><td> ACTION_PT_WAIT_SEG </td></tr><tr><td> 0xBBBE0003 </td><td> Dword </td><td> ACTION_PT_TURN_SPEED </td></tr><tr><td> 0xBBBE0004 </td><td> Byte </td><td> ACTION_PT_FLAGS </td></tr><tr><td> 0xBBBF0000 </td><td> Record </td><td> TORCH </td></tr><tr><td> 0xBBBF0001 </td><td>  Mengapung </td><td> TORCH_STRENGHT </td></tr><tr><td> 0xBBBF0002 </td><td> Plot </td><td> TORCH_PTLINK </td></tr><tr><td> 0xBBBF0003 </td><td>  Tali </td><td> TORCH_SOUND </td></tr><tr><td> 0xDDDDDDD1 </td><td> Record </td><td> DIPLOMATION </td></tr><tr><td> 0xDDDDDDD2 </td><td> Diplomacy </td><td> DIPLOMATION_FOF </td></tr><tr><td> 0xDDDDDDD3 </td><td> StringArray </td><td> DIPLOMATION_PL_NAMES </td></tr><tr><td> 0xFFFFFFFF </td><td> Unknown </td><td> UNKNOWN </td></tr></tbody></table></div></div><br><p>        — ,    ,     Nival,    —  ,     (  ,  ). </p><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> key; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; size; i++) { key += (((((key * <span class="hljs-number"><span class="hljs-number">13</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span>) + key) &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span>) - key) * <span class="hljs-number"><span class="hljs-number">4</span></span> + <span class="hljs-number"><span class="hljs-number">2531011</span></span>; data[i] ^= key &gt;&gt; <span class="hljs-number"><span class="hljs-number">16</span></span>; }</code> </pre> </div></div><br><blockquote> <strong> :</strong>      ,       (   )    .   ,      ,       ,       . </blockquote><p>      (  ,   ,    — Windows 98): </p><br><p><img src="https://habrastorage.org/webt/8w/qv/gz/8wqvgzyxxuqmqremuny92irjzue.jpeg"></p><br><blockquote> <strong> :</strong>       ,     . ,        ( , ,  " :   ",     ). </blockquote><p>  ,     ,  -     -   , , Collada      : </p><br><p><img src="https://habrastorage.org/webt/l8/2i/tc/l82itcjm6orpd7hb0tp6p9rqq5y.jpeg"></p><br><h1 id="epilog">  </h1><br><p>          .      ,          <em> </em>   . </p><br><p>  ,            .     -   ,   — -    ,      . , -... </p><br><p>     —     ! </p><br><p> <strong>UPD (23.01.2019):</strong> <br>        ,             : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">github</a> . <br>        ,          (,   ""      ). </p><br><div class="spoiler"> <b class="spoiler_title">   </b> <div class="spoiler_text"><h3 id="obschaya-informaciya-ob-igre">     </h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://ru.nival.com/games/history/zemli</a> —    </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://ru.wikipedia.org/wiki/_</a> —    </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://allods.gipat.ru/index.php?p=ei</a> —    " " </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://evil-islands.github.io</a> —  ,     </li></ul><br><h3 id="instrumenty-s-otkrytymi-ishodnikami">     </h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://gipatgroup.org/utilities</a> — EiEdit (.res, .*db), MobSurgeon (.mob) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://svn.gipat.org/trac/GGWiki</a> — EiEdit (.res, .*db), MobSurgeon (.mob),    .mp, .sec, .*db </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/demothorg/eifixer</a> —     </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/konstvest/ei_figer</a> —   Blender   .lnk, .fig, .bon, .anm </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/demothorg/ei-tools</a> —       (.mob, .lnk, .mpr, .res) +   </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/konstvest/ei_maper</a> —   (.mpr, .mp, .sec, .mob) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://github.com/chemmalion/EIDBEditor</a> —     (.*db) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://gitlab.com/ykurganov/open-evil-islands</a> —       ,      </li></ul><br><h3 id="kommyuniti">  </h3><br><ul><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">https://vk.com/evil.islands</a> —   </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://allods.gipat.ru</a> — " " </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://gipat.ru</a> —  " " </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://gipatgroup.org/forum</a> —  GipatGroup (   —  ) </li><li> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">http://honestgroup.net/forum</a> —  HonestGroup </li></ul></div></div></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id434802/">https://habr.com/ru/post/id434802/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id434792/index.html">Freelansim 2018: hasil tahun ini</a></li>
<li><a href="../id434794/index.html">Ketrampilan soft-tester yang sukses</a></li>
<li><a href="../id434796/index.html">Coding the Art: bagaimana kita menghasilkan grafik dan animasi dalam proyek desain</a></li>
<li><a href="../id434798/index.html">Sombong - dokumentasi pintar API web RESTful Anda - Ulasan pengembang pemula untuk pemula</a></li>
<li><a href="../id434800/index.html">(5-2) Cara untuk memigrasi tabel SQL besar</a></li>
<li><a href="../id434804/index.html">Fintech-startup Robinhood tidak dapat meluncurkan analog rekening bank</a></li>
<li><a href="../id434806/index.html">Tahun baru dibongkar dengan sampan</a></li>
<li><a href="../id434810/index.html">Pemula untuk bekerja dengan Spring Cloud</a></li>
<li><a href="../id434812/index.html">Manajemen waktu proyek</a></li>
<li><a href="../id434816/index.html">Detox dan Appium: Tes Antarmuka Otomatis di Bereaksi Asli</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>