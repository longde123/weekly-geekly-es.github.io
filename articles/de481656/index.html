<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>‚ôüÔ∏è üìî üë©‚Äçüíº PagerDuty oder warum die Operationsabteilung nachts m√∂glicherweise nicht schl√§ft üßïüèø ü¶â üòé</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Je komplexer das System ist, desto mehr w√§chst es mit allen Arten von Warnungen. Und es besteht die Notwendigkeit, genau auf diese Warnungen zu reagie...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>PagerDuty oder warum die Operationsabteilung nachts m√∂glicherweise nicht schl√§ft</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/funcorp/blog/481656/">  Je komplexer das System ist, desto mehr w√§chst es mit allen Arten von Warnungen.  Und es besteht die Notwendigkeit, genau auf diese Warnungen zu reagieren, sie zu aggregieren und zu visualisieren.  Ich denke eine Situation, die vielen vor einer nerv√∂sen Zecke bekannt ist. <br><br>  Die Entscheidung, die diskutiert wird, ist nicht die unerwartetste, aber die Suche liefert keinen vollst√§ndigen Artikel zu diesem Thema. <br><br>  Aus diesem Grund habe ich beschlossen, die Erfahrungen von FunCorp zu teilen und dar√ºber zu sprechen, wie der Pflichtprozess aufgebaut ist, wer anruft, warum und wie Sie dies alles betrachten k√∂nnen. <br><br><img src="https://habrastorage.org/webt/uo/be/fh/uobefhsiue_mt_swg86e3utvspa.jpeg"><br><a name="habracut"></a><br><h3>  Was ist PagerDuty? </h3><br>  Um all diese Probleme zu l√∂sen, suchten wir nach einem geeigneten Werkzeug.  Nach einer kurzen Suche haben wir uns f√ºr PagerDuty entschieden.  PD schien uns eine ziemlich vollst√§ndige und pr√§gnante L√∂sung mit vielen Integrationen und Einstellungen zu sein.  Wie ist sie? <br><br>  Kurz gesagt, PagerDuty ist eine Vorfallbearbeitungsplattform, die eingehende Vorf√§lle durch verschiedene Integrationen verarbeiten, die Reihenfolge der Vorf√§lle anpassen und dann den zust√§ndigen Techniker je nach Ebene des Vorfalls benachrichtigen kann (bei Anruf auf hoher Ebene, bei Anruf aus Anwendung auf niedriger Ebene / SMS). . <br><br><h3>  Wer ist die diensthabende Person? </h3><br>  Dies ist wahrscheinlich das erste Mal, dass Sie mit dem Einrichten einer PD beginnen. <br><br>  FunCorp hat wie andere Unternehmen eine ehrenamtliche Funktion inne.  Es wird einmal t√§glich von Ingenieur zu Ingenieur √ºbertragen.  Es gibt die sogenannte erste und zweite Antwortzeile auf Warnungen von PagerDuty.  Angenommen, ein Alarm mit hoher Priorit√§t kommt an, und wenn 10 Minuten nach dem Anruf an den Vermittler aus der ersten Leitung keine Reaktion auf ihn erfolgt (d. H. Er wird nicht in den Best√§tigungs- oder Abwicklungsstatus versetzt), geht der Anruf an den zweiten diensthabenden Techniker.  Dies wird in PagerDuty selbst √ºber Eskalationsrichtlinien konfiguriert. <br><br><img src="https://habrastorage.org/webt/92/8l/fm/928lfmtz8x2qizk8lqbl2nhxo8m.png"><br><br>  Wenn die zweite Telefonzentrale nicht antwortet, wird die Benachrichtigung an die <em>Haupttelefonzentrale zur√ºckgesendet</em> . <br><br>  Daher kann eine eingehende Warnung mit hoher Priorit√§t nicht unbearbeitet bleiben. <br><br>  Nun wollen wir sehen, wo die Vorf√§lle herkommen k√∂nnen. <br><br><h3>  Welche Integrationen verwenden wir? </h3><br>  Viele verschiedene Vorf√§lle aus verschiedenen Diensten werden in PD eingespeist.  Wir haben jetzt ungef√§hr 25 solcher Dienste und verwenden f√ºr ihre Verarbeitung einige vorgefertigte Integrationen. <br><br><ul><li>  Prometheus <br></li></ul><br>  Das prim√§re Messwerterfassungssystem ist Prometheus.  In Habr√© ist schon viel dar√ºber geschrieben worden, ich m√∂chte nur sagen, dass wir mehrere f√ºr verschiedene Umgebungen haben: eine sammelt Metriken von virtuellen Maschinen und Dockern, die andere von Amazon-Diensten, die dritte von ‚ÄûEisenmaschinen‚Äú.  Als Exporteur von Metriken wird haupts√§chlich Telegraf verwendet. <br><br><ul><li>  E-Mail <br></li></ul><br>  Auch hier denke ich, dass der Name alles verdeutlicht.  Diese Integration wird verwendet, um Benachrichtigungen von einigen Skripten zu senden, die auf der Krone ausgef√ºhrt werden.  PD gibt Ihnen eine bestimmte Adresse, an die Sie Briefe senden.  Beim Erstellen eines Dienstes mit dieser Integration k√∂nnen Sie Priorit√§ten festlegen, in welcher Reihenfolge eingehende Vorf√§lle verarbeitet werden, wie eine Warnung erstellt wird (f√ºr jeden eingehenden Brief, f√ºr einen eingehenden Brief + eine bestimmte Regel usw.). <br><br><img src="https://habrastorage.org/webt/uf/m4/oy/ufm4oy_rnmfwjqycf1pusdovjli.png"><br><br><ul><li>  Schlaff <br></li></ul><br>  Meiner Meinung nach eine sehr interessante Integration.  Es gibt Zeiten, in denen etwas passiert, das jedoch nicht von Vorf√§llen abgedeckt wird.  Aus diesem Grund haben wir die Integration von Slack hinzugef√ºgt, um den Vorfall zu erstellen.  Das hei√üt, in Corporate Slack k√∂nnen Sie schreiben <b>/ callofduty alles verlangsamt und bald bricht es</b> und PD verarbeitet dies und sendet den Vorfall an den Duty Engineer. <br><br>  Wir machen: <br><br><img src="https://habrastorage.org/webt/nh/kf/re/nhkfre_6z0ttieniuawwicimmns.png"><br><br>  Wir sehen: <br><br><img src="https://habrastorage.org/webt/0_/z2/qr/0_z2qrbmpxts_ifrm7pocr2p3nm.jpeg"><br><br><ul><li>  API <br></li></ul><br>  HTTP-Integration.  Hier gibt es eigentlich nichts besonders Interessantes, nur eine POST-Anfrage mit einem Body im JSON-Format.  Ein interessantes Beispiel: Wir verwenden es f√ºr die externe √úberwachung √ºber <a href="https://www.statuscake.com/">https://www.statuscake.com/</a> .  Dieser Service pr√ºft die Verf√ºgbarkeit unserer Websites auf der ganzen Welt.  In dem Fall, dass wir einen inakzeptablen Antwortcode erhalten (z. B. 502), wird ein Vorfall erstellt, und dann verl√§uft alles entlang der oben beschriebenen Kette.  StatusCake selbst kann interne URLs, den Ablauf eines SSL-Zertifikats oder einer Dom√§ne √ºberwachen. <br><br><ul><li>  Librenms <br></li></ul><br>  Dies ist ein weiteres √úberwachungssystem. Weitere Informationen finden Sie auf der Website <a href="https://www.librenms.org/">https://www.librenms.org/</a> .  Mit seiner Hilfe √ºberwachen wir Netzwerkschnittstellen und iDRAC von Servern. <br><br><img src="https://habrastorage.org/webt/np/s1/w6/nps1w6rdvqei3g8xjisl14gkpra.png"><br><br>  Es gab auch Integrationen wie Datadog, CloudWatch.  Mehr dar√ºber, was daraus geworden ist, finden Sie <a href="https://habr.com/ru/company/funcorp/blog/425431/">hier</a> . <br><br><h3>  Visualisierung </h3><br>  Das prim√§re Ereignismeldesystem ist Slack.  Alle Vorf√§lle, die zu PD kommen, werden in einen speziellen Chat geschrieben. Wenn sich ihr Status √§ndert, wird dies auch im Chat angezeigt. <br><br><img src="https://habrastorage.org/webt/n8/tc/vv/n8tcvvpb-yge19fvkex6czlqzfw.png"><br><br>  Als es m√∂glich wurde, n√ºtzliche Daten auf den Bildschirmen von Monitoren anzuzeigen, die unter der Decke hingen, wurde uns pl√∂tzlich klar, dass wir (in der Entwicklungsabteilung) nichts auf ihnen anzuzeigen haben.  Es gibt eine wundervolle Grafana, die jedoch nicht abgedeckt werden kann, und Mitarbeiter reagieren auf Warnungen, nicht auf Diagramme. <br><br>  Nach einer gr√ºndlichen, aber erfolglosen Suche auf GitHub nach einem √ºbersichtlichen und informativen ‚ÄûBoard‚Äú f√ºr PD haben wir beschlossen, unser eigenes zu schreiben - nur mit dem, was wir brauchten.  Obwohl zun√§chst die Idee bestand, das PD-Interface selbst anzuzeigen, sah es noch unpraktischer aus. <br><br>  Zum Schreiben ben√∂tigen Sie lediglich den Schl√ºssel f√ºr PD mit Leserechten. <br>  Und hier ist was wir haben: <br><br><img src="https://habrastorage.org/webt/5e/fw/8w/5efw8w15hhnzulhg0gebjeis_8w.png"><br><br>  Auf dem Bildschirm werden die aktuellen offenen Vorf√§lle, der Name des aktuellen Einsatzleiters aus dem ausgew√§hlten Zeitplan und die Zeit ohne Vorfall mit hoher Priorit√§t angezeigt (ein Bereich mit einem Vorfall mit hoher Priorit√§t wird rot hervorgehoben). <br><br>  <a href="https://github.com/suknark/pdviewer">Den Quellcode f√ºr diese Implementierung finden Sie hier</a> . <br><br>  Als Ergebnis haben wir ein praktisches Dashboard, √ºber das wir alle unsere Vorf√§lle anzeigen k√∂nnen.  Ich w√ºrde mich freuen, wenn einer von Ihnen von unserer Erfahrung profitieren w√ºrde. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/de481656/">https://habr.com/ru/post/de481656/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../de481640/index.html">Ver√∂ffentlichung der neuen Version des DevOpsProdigy KubeGraf Plugins</a></li>
<li><a href="../de481644/index.html">So √ºberleben Sie eine SQL-Datenbank im 21. Jahrhundert: Clouds, Kubernetes und PostgreSQL Multimaster</a></li>
<li><a href="../de481648/index.html">Junos PyEZ am Beispiel der Aufgabe, freie ipv4-Subnetze zu finden</a></li>
<li><a href="../de481652/index.html">Backdoor (?) Auf BlackBerry Android-Smartphones</a></li>
<li><a href="../de481654/index.html">Die Geschichte, wie Ihnen QA Engineer mithilfe von Test IT mithilfe des Bot Frameworks das Leben erleichtert hat</a></li>
<li><a href="../de481662/index.html">Erprobung neuer Tools zum Erstellen und Automatisieren der Bereitstellung in Kubernetes</a></li>
<li><a href="../de481664/index.html">Serverlose Preise und Kosten: AWS Lambda</a></li>
<li><a href="../de481666/index.html">Benutzerdefinierte SwiftLint-Regeln</a></li>
<li><a href="../de481668/index.html">Das erste Problem mit dem Viewer oder die Schwierigkeiten beim Konvertieren von WebRTC-Videostreams in HLS</a></li>
<li><a href="../de481670/index.html">Erstellen Sie einen Aktionsplan mit dem AWS Cloud Adoption Framework</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>