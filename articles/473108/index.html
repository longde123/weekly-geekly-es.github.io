<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üïµüèº üÜë ü•Å Componentes agulares en angular üë®üèæ‚Äçü§ù‚Äçüë®üèº üèáüèª üßìüèΩ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Cuando trabajas en una biblioteca de componentes reutilizables, la pregunta API es especialmente aguda. Por un lado, debe tomar una decisi√≥n confiable...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Componentes agulares en angular</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/tinkoff/blog/473108/"><p>  Cuando trabajas en una biblioteca de componentes reutilizables, la pregunta API es especialmente aguda.  Por un lado, debe tomar una decisi√≥n confiable y precisa, por otro lado, para satisfacer muchos casos especiales.  Esto se aplica al trabajo con datos y a las caracter√≠sticas externas de varios casos de uso.  Adem√°s, todo debe actualizarse y desplegarse f√°cilmente en los proyectos. </p><br><p>  Dichos componentes necesitan una flexibilidad sin precedentes.  En este caso, el entorno no se puede hacer demasiado complicado, ya que ser√°n utilizados tanto por los seniors como por June.  La reducci√≥n de la duplicaci√≥n de c√≥digo es una de las tareas de la biblioteca de componentes.  Por lo tanto, la configuraci√≥n no se puede convertir en c√≥digo de copia. </p><br><p><img src="https://habrastorage.org/webt/pc/0n/84/pc0n84gqkevxlhxdkfw7xhyay_i.png" alt="bruce lee"></p><a name="habracut"></a><br><h2 id="data-agnostic-komponenty">  Componentes independientes de datos </h2><br><p>  Digamos que hacemos un bot√≥n con un men√∫ desplegable.  ¬øCu√°l ser√° su API?  Por supuesto, necesita algunos <i>elementos</i> como entrada: una variedad de elementos de men√∫.  Lo m√°s probable es que la primera versi√≥n de la interfaz sea as√≠: </p><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">MenuItem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> text: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">readonly</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onClick</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>): </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span></span>; }</code> </pre> <br><p>  Bastante r√°pido, <code>disabled: boolean</code> se sumar√° a esto.  Luego, los dise√±adores vendr√°n y dibujar√°n un men√∫ con iconos.  Y los chicos del proyecto vecino, por otro lado, dibujar√°n √≠conos.  Y ahora la interfaz est√° creciendo, es necesario cubrir m√°s y m√°s casos especiales, y de la abundancia de banderas, el componente comienza a parecerse a la Asamblea de la ONU. </p><br><p><img src="https://habrastorage.org/webt/_i/yl/6a/_iyl6asyyxmlupg18qiudynytnk.jpeg"></p><br><p>  Los gen√©ricos vienen al rescate.  Si organiza el componente para que no le importe el modelo de datos, todos estos problemas desaparecer√°n.  En lugar de llamar a <code>item.onClick</code> en un clic, el men√∫ simplemente emitir√° el elemento <code>item.onClick</code> .  Lo que debe hacer despu√©s es una tarea para los usuarios de la biblioteca.  Incluso si llaman al mismo <code>item.onClick</code> . En <code>item.onClick</code> . </p><br><p>  En el caso de un estado <code>disabled</code> , por ejemplo, el problema se resuelve utilizando controladores especiales.  El m√©todo <code>disabledItemHandler: (item: T) =&gt; boolean</code> se pasa al componente <code>disabledItemHandler: (item: T) =&gt; boolean</code> , a trav√©s del cual se ejecuta cada elemento.  El resultado dice si este elemento est√° bloqueado. </p><br><p><img src="https://habrastorage.org/webt/zg/xf/nc/zgxfnc8ssnfx9uw6y355gcymmdc.png"></p><br><p>  Si est√° haciendo un <em>ComboBox</em> , puede pensar en una interfaz que almacena una cadena para mostrar y un valor arbitrario real que se utiliza en el c√≥digo.  Esta idea es clara.  Despu√©s de todo, cuando el usuario escribe el texto, <em>ComboBox</em> debe filtrar las opciones de acuerdo con la l√≠nea ingresada. </p><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ComboBoxItem</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> text: <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>: any; }</code> </pre> <br><p>  Pero aqu√≠, tambi√©n, surgir√°n las limitaciones de este enfoque, tan pronto como aparezca un dise√±o en el que la l√≠nea no sea suficiente.  Adem√°s, el formulario contendr√° un contenedor en lugar del valor real, la b√∫squeda no siempre se realiza exclusivamente por la representaci√≥n de cadena (por ejemplo, podemos ingresar un n√∫mero de tel√©fono, pero se debe mostrar el nombre de la persona).  Y la cantidad de interfaces crecer√° con el advenimiento de otros componentes, incluso si el modelo de datos bajo ellos es el mismo. </p><br><p>  Los gen√©ricos y los controladores tambi√©n ayudar√°n aqu√≠.  D√©mosle la funci√≥n <code>(item: T) =&gt; string</code> componente <code>stringify</code> .  El valor predeterminado es <code>item =&gt; String(item)</code> .  Por lo tanto, incluso puede usar las clases como opciones definiendo el m√©todo <code>toString()</code> en ellas.  Como se mencion√≥ anteriormente, es necesario filtrar las opciones no solo por representaci√≥n de cadena.  Este tambi√©n es un buen caso para usar controladores.  Puede proporcionar un componente con una funci√≥n que recibe una cadena de b√∫squeda y un elemento como entrada.  <code>boolean</code> ; esto indicar√° si el elemento es adecuado para la solicitud. </p><br><blockquote>  Otro ejemplo com√∫n de uso de una interfaz es una identificaci√≥n √∫nica, que coincide con copias de objetos JavaScript.  Cuando recibimos el valor del formulario de inmediato, y las opciones de selecci√≥n vinieron en una solicitud separada del servidor: solo tendr√°n una copia del elemento actual.  Esta tarea es manejada por un controlador que recibe dos elementos como entrada y devuelve su igualdad.  La comparaci√≥n predeterminada es normal <code>===</code> . </blockquote><p>  El componente de visualizaci√≥n de pesta√±as, de hecho, no necesita saber en qu√© forma se le pas√≥ la pesta√±a: al menos con texto, al menos con un objeto con campos adicionales, incluso con c√≥mo.  El conocimiento del formato no es necesario para la implementaci√≥n, pero muchos hacen el enlace a un formato espec√≠fico.  La ausencia de v√≠nculos significa que los componentes no implicar√°n cambios importantes durante el refinamiento, no obligar√°n a los usuarios a adaptar sus datos para ellos y permitir√°n combinar componentes at√≥micos entre s√≠ como cubos de lego. </p><br><p>  La misma opci√≥n de elementos es adecuada tanto para el men√∫ contextual como para el cuadro combinado, selecci√≥n, selecci√≥n m√∫ltiple, componentes simples que se incluyen f√°cilmente en dise√±os m√°s complejos.  Sin embargo, debe poder mostrar de alguna manera datos arbitrarios. </p><br><p><img src="https://habrastorage.org/webt/cu/zh/sf/cuzhsfzxk1srcnv-vt5dun9muh8.png"><br>  <em>Las listas pueden contener avatares, diferentes colores, √≠conos, la cantidad de mensajes no le√≠dos y mucho m√°s.</em> </p><br><blockquote>  Para hacer esto, los componentes deben trabajar con la apariencia de manera similar a los gen√©ricos. </blockquote><br><h2 id="design-agnostic-komponenty">  Componentes agn√≥sticos de dise√±o </h2><br><p>  Angular proporciona herramientas poderosas para definir la apariencia. </p><br><p>  Por ejemplo, considere un <em>ComboBox</em> , ya que puede parecer muy diverso.  Por supuesto, se establecer√° un cierto nivel de restricciones en el componente, ya que debe obedecer el dise√±o general de la aplicaci√≥n.  Su tama√±o, colores predeterminados, relleno: todo esto deber√≠a funcionar solo.  No queremos obligar a los usuarios a pensar en todo lo relacionado con la apariencia. </p><br><p><img src="https://habrastorage.org/webt/ah/rj/v7/ahrjv7_hlb0ta2fnsshusxssukw.png"></p><br><p>  Los datos arbitrarios son como el agua: no tienen forma, no llevan nada espec√≠fico en s√≠ mismos.  Nuestra tarea es proporcionar una oportunidad para establecer un "recipiente" para ellos.  En este sentido, el desarrollo de un componente abstra√≠do de la apariencia es el siguiente: </p><br><p><img src="https://habrastorage.org/webt/1f/ve/hl/1fvehlcg_sv4heypbphk72juuzs.png"></p><br><p>  El componente es una especie de estante del tama√±o requerido, y se utiliza una plantilla personalizada para mostrar el contenido, que se "pone".  Inicialmente, se establece un m√©todo est√°ndar, como la salida de una representaci√≥n de cadena, en el componente, y el usuario puede transferir opciones m√°s complejas desde el exterior.  Echemos un vistazo a las posibilidades que Angular tiene para esto. </p><br><ol><li><p>  La forma m√°s sencilla de cambiar la apariencia es la interpolaci√≥n de l√≠neas.  Pero una l√≠nea invariable no es adecuada para mostrar elementos del men√∫, ya que no sabe nada acerca de cada elemento, y todos se ver√°n iguales.  <strong>Una cadena est√°tica est√° privada de contexto</strong> .  Pero es bastante adecuado para configurar el texto "No se encontr√≥ nada" si la lista de opciones est√° vac√≠a. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>{{content}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li><p>  Ya hemos hablado sobre la representaci√≥n de cadenas de datos arbitrarios.  El resultado tambi√©n es una cadena, pero est√° determinado por el valor de entrada.  En esta situaci√≥n, el contexto ser√° un elemento de la lista.  Esta es una opci√≥n m√°s flexible, aunque no permite dise√±ar el resultado (la cadena no est√° interpolada en HTML) y a√∫n m√°s, no permitir√° el uso de directivas o componentes. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>{{content(context)}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li><p>  Angular proporciona <code>ng-template</code> y la directiva estructural <code>*ngTemplateOutlet</code> para <code>*ngTemplateOutlet</code> .  Con su ayuda, podemos definir una pieza de HTML que espera que se ingresen algunos datos y pasarlos al componente.  All√≠ ser√° instanciado con un contexto espec√≠fico.  Le transmitiremos nuestro elemento sin preocuparnos por el modelo.  Elaborar la plantilla adecuada para sus objetos es tarea del consumidor-desarrollador de nuestro componente. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; context: context"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Una plantilla es una herramienta muy poderosa, pero necesita ser definida en alg√∫n componente existente.  Esto complica enormemente su reutilizaci√≥n.  A veces se requiere la misma apariencia en diferentes partes de la aplicaci√≥n e incluso en diferentes aplicaciones.  En mi pr√°ctica, esto, por ejemplo, es la aparici√≥n de la selecci√≥n de cuenta con la visualizaci√≥n del nombre, la moneda y el saldo. <br><img src="https://habrastorage.org/webt/ub/qx/4q/ubqx4q9n5_igvvckb9p-2yx2zjm.png"></p><br></li><li><p>  La forma m√°s compleja de personalizar el aspecto que resuelve este problema son los componentes din√°micos.  En Angular, la directiva <code>*ngComponentOutlet</code> ha existido durante mucho tiempo para crearlos declarativamente.  No permite la transferencia de contexto, pero este problema se resuelve mediante la implementaci√≥n de dependencias.  Podemos hacer un token para el contexto y agregarlo al <code>Injector</code> con el que se crea el componente. </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngComponentOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; injector: injector"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Vale la pena se√±alar que el contexto puede ser no solo el elemento que queremos mostrar, sino tambi√©n las circunstancias en las que se encuentra: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-focused</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"focused"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- ... --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Por ejemplo, en el caso del retiro de una cuenta, el estado de enfoque del elemento se refleja en la apariencia: el fondo del icono cambia de gris a blanco.  En t√©rminos generales, tiene sentido transferir al contexto aquellas condiciones que potencialmente afectan la visualizaci√≥n de la plantilla.  Este punto es quiz√°s la √∫nica interfaz de limitaci√≥n de este enfoque. </p><br></li></ol><br><p><img src="https://habrastorage.org/webt/0r/_b/ny/0r_bnyldkla9a93ovsesmivwvqg.png"></p><br><h2 id="universalnyy-outlet">  Salida universal </h2><br><p>  Las herramientas descritas anteriormente est√°n disponibles en Angular desde la quinta versi√≥n.  Pero queremos cambiar f√°cilmente de una opci√≥n a otra.  Para hacer esto, ensamblaremos un componente que acepte contenido y contexto como entrada e implemente la forma apropiada de insertar este contenido autom√°ticamente.  En general, es suficiente para nosotros aprender a distinguir entre tipos <code>string</code> , <code>number</code> , <code>(context: T) =&gt; string | number</code>  <code>(context: T) =&gt; string | number</code> , <code>TemplateRef&lt;T&gt;</code> y <code>Type&lt;any&gt;</code> (pero hay algunos matices aqu√≠, que discutiremos a continuaci√≥n). </p><br><p>  La plantilla del componente se ver√° as√≠: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitch</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"type"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'primitive'"</span></span></span><span class="hljs-tag">&gt;</span></span>{{content}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'function'"</span></span></span><span class="hljs-tag">&gt;</span></span>{{content(context)}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'template'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; context: context"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'component'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngComponentOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content; injector: injector"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  El c√≥digo obtendr√° un tipo getter para seleccionar el m√©todo apropiado.  Cabe se√±alar que, en general, no podemos distinguir un componente de una funci√≥n.  Cuando se usan m√≥dulos perezosos, necesitamos un <code>Injector</code> que sepa sobre la existencia del componente.  Para hacer esto, crearemos una clase de contenedor.  Esto tambi√©n permitir√° determinarlo por <code>instanceof</code> : </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ComponentContent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>( readonly component: Type&lt;T&gt;, private readonly injector: Injector | null = null, ) {} }</code> </pre> <br><p>  Agregue un m√©todo para crear un inyector con el contexto pasado: </p><br><pre> <code class="javascript hljs">createInjectorWithContext(injector: Injector, <span class="hljs-attr"><span class="hljs-attr">context</span></span>: C): Injector { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Injector.create({ <span class="hljs-attr"><span class="hljs-attr">parent</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.injector || injector, <span class="hljs-attr"><span class="hljs-attr">providers</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">provide</span></span>: CONTEXT, <span class="hljs-attr"><span class="hljs-attr">useValue</span></span>: context, }, ], }); }</code> </pre> <br><p>  En cuanto a las plantillas, en la mayor√≠a de los casos puede trabajar con ellas tal cual.  Pero debemos tener en cuenta que la plantilla est√° sujeta a verificaci√≥n de cambios en lugar de su definici√≥n.  Si lo transfiere a la <em>Vista</em> , que es paralela o m√°s alta en el √°rbol desde el lugar de la definici√≥n, los cambios que pueden activarse en ella no se recoger√°n en la <em>Vista</em> original. </p><br><p>  Para corregir esta situaci√≥n, utilizaremos no solo una plantilla, sino una directiva que tambi√©n tendr√° <code>ChangeDetectorRef</code> su lugar de definici√≥n.  De esta manera, podemos comenzar a verificar los cambios cuando sea necesario. </p><br><h2 id="polimorfnye-shablony">  Patrones polim√≥rficos </h2><br><p>  En la pr√°ctica, puede ser √∫til controlar el comportamiento de la plantilla seg√∫n el tipo de contenido que ingres√≥. </p><br><p>  Por ejemplo, queremos dar la oportunidad de transferir una plantilla a un componente para algo especial.  Al mismo tiempo, en la mayor√≠a de los casos, solo necesita un icono.  En tal situaci√≥n, puede configurar el comportamiento predeterminado y usarlo cuando una primitiva o funci√≥n ingres√≥ a la entrada.  A veces, incluso el tipo de primitivo es importante: por ejemplo, si tiene un componente de insignia para mostrar el n√∫mero de mensajes no le√≠dos en una pesta√±a, pero desea resaltar las p√°ginas que requieren atenci√≥n con un icono especial. </p><br><p><img src="https://habrastorage.org/webt/sr/ag/gk/sraggknu2ikgpz5tezg5o4zgsdc.png"></p><br><p>  Para hacer esto, debe agregar una cosa m√°s: pasar una plantilla para mostrar primitivas.  Agregue <code>@ContentChild</code> al componente, que toma <code>TemplateRef</code> del contenido.  Si se encuentra uno y se pasa una funci√≥n, cadena o n√∫mero al contenido, podemos instanciarlo con el primitivo como contexto: </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngSwitchCase</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'interpolation'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngIf</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"!template; else child"</span></span></span><span class="hljs-tag">&gt;</span></span>{{primitive}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">child</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngTemplateOutlet</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"template; context: { $implicit: primitive }"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-container</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Ahora podemos dise√±ar la interpolaci√≥n o incluso pasar el resultado a alg√∫n componente para su visualizaci√≥n: </p><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">context</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"context"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-primitive</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"primitive"</span></span></span><span class="hljs-tag">&gt;</span></span>{{primitive}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Es hora de poner nuestro c√≥digo en pr√°ctica. </p><br><h2 id="ispolzovanie">  Uso </h2><br><p>  Por ejemplo, describimos dos componentes: pesta√±as y <em>ComboBox</em> .  La plantilla de pesta√±as consistir√° simplemente en una salida de contenido para cada pesta√±a, donde el objeto pasado por el usuario ser√° el contexto: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag"> *</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngFor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"let tab of tabs"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.disabled</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"disabledItemHandler(tab)"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">context</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"getContext(tab)"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onClick(tab)"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Debe establecer estilos predeterminados: por ejemplo, tama√±o de fuente, subrayado debajo de la pesta√±a actual, color.  Pero dejaremos una apariencia concreta al contenido.  El c√≥digo del componente ser√° algo como esto: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TabsComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ @Input() tabs: ReadonlyArray&lt;T&gt; = []; @Input() content: Content = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{$implicit}</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>($implicit); @Input() disabledItemHandler: <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tab: T</span></span></span><span class="hljs-function">) =&gt;</span></span> boolean = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; @Input() activeTab: T | <span class="hljs-literal"><span class="hljs-literal">null</span></span> = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; @Output() activeTabChange = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter&lt;T&gt;(); getContext($implicit: T): IContextWithActive&lt;T&gt; { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> { $implicit, <span class="hljs-attr"><span class="hljs-attr">active</span></span>: $implicit === <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.activeTab, }; } onClick(tab: T) { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.activeTab = tab; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.activeTabChange.emit(tab); } }</code> </pre> <br><p>  Tenemos un componente que puede funcionar con una matriz arbitraria, mostr√°ndolo como pesta√±as.  Simplemente puede pasar cadenas all√≠ y obtener el aspecto b√°sico: </p><br><p><img src="https://habrastorage.org/webt/vs/r8/yp/vsr8yp5h-bhqkel8nyjwns_fwyk.png"></p><br><p>  Y puede transferir objetos y una plantilla para mostrarlos y personalizar la apariencia seg√∫n sus necesidades, agregar HTML, iconos e indicadores: </p><br><p><img src="https://habrastorage.org/webt/px/jm/gg/pxjmggknrn2tlx1kp6lgxhfpoik.png"></p><br><p>  En el caso de <em>ComboBox,</em> primero haremos dos componentes b√°sicos que consisten en: un campo de entrada con un icono y un men√∫.  Lo √∫ltimo no tiene sentido para pintar en detalle: es muy similar a las pesta√±as, solo verticalmente y tiene otros estilos b√°sicos.  Y el campo de entrada se puede implementar de la siguiente manera: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">input</span></span></span><span class="hljs-tag"> [(</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ngModel</span></span></span><span class="hljs-tag">)]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"content"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">mousedown</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onMouseDown($event, input)"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">let-icon</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">innerHTML</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">content-outlet</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Si coloca la <em>entrada en una</em> posici√≥n absolutamente absoluta, bloquear√° la salida y todos los clics estar√°n en ella.  Esto es conveniente para un campo de entrada simple con un √≠cono decorativo, como un √≠cono de lupa.  En el ejemplo anterior, se aplica el enfoque de plantilla polim√≥rfica: la cadena transmitida se usar√° como <code>innerHTML</code> para insertar el icono SVG.  Si, por ejemplo, necesitamos mostrar el avatar del usuario ingresado, podemos transferir la plantilla all√≠. </p><br><p>  <em>ComboBox</em> tambi√©n necesita un √≠cono, pero debe ser interactivo.  Para evitar que rompa el foco, agregue el controlador <code>onMouseDown</code> a la salida: </p><br><pre> <code class="javascript hljs">onMouseDown(event: MouseEvent, <span class="hljs-attr"><span class="hljs-attr">input</span></span>: HTMLInputElement) { event.preventDefault(); input.focus(); }</code> </pre> <br><p>  Pasar la plantilla como contenido nos permitir√° elevarla m√°s a trav√©s de CSS simplemente haciendo la <em>posici√≥n:</em> icono <em>relativo</em> .  Luego puede suscribirse a los clics en el <em>ComboBox</em> : </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-input</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app-input</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag"> #</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">icon</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">viewBox</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0 0 24 24"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag"> [</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class.icon_opened</span></span></span><span class="hljs-tag">]=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"opened"</span></span></span><span class="hljs-tag"> (</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">click</span></span></span><span class="hljs-tag">)=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onClick()"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">polyline</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">points</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"7,10 12,15 17,10"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">fill</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"none"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"currentColor"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-linecap</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"round"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-linejoin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"round"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">stroke-width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ng-template</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  Gracias a dicha organizaci√≥n, obtenemos el comportamiento deseado: </p><br><p><img src="https://habrastorage.org/webt/ty/i2/d9/tyi2d9hy6ayosztbibp-1ye0cdg.gif"></p><br><p>  El c√≥digo de componente, como en el caso de las pesta√±as, prescinde del conocimiento del modelo de datos.  Se parece a esto: </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">export</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ComboBoxComponent</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ @Input() items: ReadonlyArray&lt;T&gt; = []; @Input() content: Content = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">{$implicit}</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>($implicit); @Input() stringify = <span class="hljs-function"><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">item: T</span></span></span><span class="hljs-function">) =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>(item); @Input() value: T | <span class="hljs-literal"><span class="hljs-literal">null</span></span> = <span class="hljs-literal"><span class="hljs-literal">null</span></span>; @Output() valueChange = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> EventEmitter&lt;T | <span class="hljs-literal"><span class="hljs-literal">null</span></span>&gt;(); stringValue = <span class="hljs-string"><span class="hljs-string">''</span></span>; <span class="hljs-comment"><span class="hljs-comment">//          get filteredItems(): ReadonlyArray&lt;T&gt; { return this.items.filter(item =&gt; this.stringify(item).includes(this.stringValue), ); } }</span></span></code> </pre> <br><p>  Este c√≥digo simple le permite usar cualquier objeto en <em>ComboBox</em> y personalizar su pantalla de manera muy flexible.  Despu√©s de algunas mejoras que no est√°n relacionadas con el concepto descrito, est√° listo para usar.  La apariencia se puede personalizar para todos los gustos: </p><br><p><img src="https://habrastorage.org/webt/78/-l/xr/78-lxrmsic1iiltn-qx0dekwf2s.gif"></p><br><h2 id="vyvod">  Conclusi√≥n </h2><br><p>  La creaci√≥n de componentes agn√≥sticos elimina la necesidad de tener en cuenta cada caso particular.  Al mismo tiempo, los usuarios obtienen una herramienta simple para configurar el componente para una situaci√≥n espec√≠fica.  Estas soluciones son f√°ciles de reutilizar.  La independencia del modelo de datos hace que el c√≥digo sea universal, confiable y extensible.  Al mismo tiempo, escribimos no tantas l√≠neas y utilizamos principalmente las herramientas angulares integradas. </p><br><p>  Usando el enfoque descrito, notar√° r√°pidamente lo conveniente que es pensar en t√©rminos de contenido en lugar de l√≠neas o patrones espec√≠ficos.  Mostrar mensajes de error de validaci√≥n, informaci√≥n sobre herramientas, ventanas modales: este enfoque es bueno no solo para personalizar la apariencia, sino tambi√©n para transferir contenido como un todo.  ¬°Dibujar dise√±os y probar la l√≥gica es f√°cil!  Por ejemplo, para mostrar la ventana emergente, el usuario no necesita crear un componente o incluso una plantilla, simplemente puede pasar la cadena de c√≥digo auxiliar y volver a ella m√°s tarde. </p><br><p>  Nosotros en Tinkoff.ru hemos aplicado con √©xito el enfoque descrito y lo hemos movido a una peque√±a biblioteca de c√≥digo abierto (1 KB gzip) llamada <strong><em>ng-polymorpheus</em></strong> . </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">C√≥digo fuente</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">paquete npm</a> </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Demo interactiva y sandbox</a> </p><br><blockquote>  ¬øTambi√©n tiene algo que quer√≠a poner en c√≥digo abierto, pero est√° asustado por las tareas asociadas?  Pruebe el <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">iniciador de biblioteca de c√≥digo abierto angular</a> , que creamos para nuestros proyectos.  Ya tiene CI configurado, verifica confirmaciones, linters, generaci√≥n de CHANGELOG, cobertura de prueba y todo eso. </blockquote></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/473108/">https://habr.com/ru/post/473108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../473090/index.html">PocketBook 632 y 632 Aqua review: peque√±os lectores insignia de 6 pulgadas con E Ink</a></li>
<li><a href="../473092/index.html">AMA con Habr, # 13: noticias importantes para usuarios y empresas</a></li>
<li><a href="../473094/index.html">Incre√≠bles historias de desarrolladores, parte 5: Secretos del universo</a></li>
<li><a href="../473098/index.html">Compilaci√≥n de FFmpeg en WebAssembly (= ffmpeg.js): Parte 1 - Cocinar</a></li>
<li><a href="../473100/index.html">La comunicaci√≥n asincr√≥nica es la verdadera raz√≥n por la cual el trabajo remoto es m√°s eficiente.</a></li>
<li><a href="../473114/index.html">Laravel: analizamos los conceptos b√°sicos. Tercera parte: la final</a></li>
<li><a href="../473118/index.html">El software de Siemens Digital Industries redefine el dise√±o el√©ctrico</a></li>
<li><a href="../473120/index.html">El desarrollador quiere ir al inicio. ¬øQu√© hacer con el empleador?</a></li>
<li><a href="../473124/index.html">C√≥mo usamos las cadenas de Markov para evaluar soluciones y encontrar errores. Con Python Script</a></li>
<li><a href="../473128/index.html">FutureVSReal - en # X5TechFutureNight</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>