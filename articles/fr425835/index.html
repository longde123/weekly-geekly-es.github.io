<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>👈🏽 🚵🏼 🚑 «Breaking Bugs» dans Sberbank: comment corriger le taux de bogues sur sept jours par jour 👩🏿‍🌾 💆 👡</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="La correction de bogues est une partie fastidieuse mais obligatoire de tout développement, et tout le monde ne veut pas le faire. Comment transformer ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>«Breaking Bugs» dans Sberbank: comment corriger le taux de bogues sur sept jours par jour</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/sberbank/blog/425835/">  La correction de bogues est une partie fastidieuse mais obligatoire de tout développement, et tout le monde ne veut pas le faire.  Comment transformer la correction de bugs en quelque chose d'excitant?  Organisez un concours!  Dans cet article, nous parlerons en détail de notre "marathon de correction de bogues" de 24 heures - de la préparation préliminaire au ratissage des derniers commits après l'attribution des gagnants. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/cdCPurqsfq0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><a name="habracut"></a><br><h2>  Infecté par l'idée </h2><br>  L'échelle de développement de notre application Sberbank Online a considérablement augmenté au cours de la dernière année.  Parallèlement à cela, de petits bogues ont commencé à s'accumuler, qui ne se reflétaient en aucune façon sur les mesures clés.  Mais nous avons compris qu'il s'agit d'une bombe à retardement et qu'il faut en faire quelque chose. <br><br>  Nous avons été inspirés par la façon dont nos collègues <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Avito</a> résolvent ces problèmes, et nous avons décidé d'organiser une attaque massive contre les bogues au format bagaton - en tenant compte de notre structure de développement, de notre culture et des spécificités du flux. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b5/6c3/9d9/5b56c39d9317f652772bb7266bd4ae19.jpg"><br><br>  Il fallait tout arranger pour que les gars eux-mêmes veuillent participer à un bagaton et prouver leur sang-froid sans directives d'en haut.  Pour ce faire, la compétition doit avoir une ambiance cool.  Nous avons décidé de proposer un style spécial, quelque chose de reconnaissable sur les bugs.  Les bogues sont des bogues.  Qui détruit les insectes dans la vie ordinaire?  Désinsectiseurs - gars en combinaison de protection chimique jaune.  Où ont-ils été allumés ces dernières années?  Dans une série populaire sur un professeur de chimie.  Il y a une base, on termine avec des activités.  Ils ont organisé un tournoi de jeux vidéo, un quiz avec des prix, des nominations individuelles sympas ... et bien sûr, beaucoup de plats délicieux.  Mais l'essentiel, quoi qu'on en dise, c'est la compétition d'élimination des bogues.  Cela a été rappelé un tableau de bord avec une interface web, montrant la progression des équipes, leurs positions actuelles, le nombre de points, etc.  Nous avons discuté de tout avec les chefs d'équipe - ils ont approuvé nos plans. <br><br><h2>  Android vs iOS - si malhonnête </h2><br>  Tout d'abord, nous voulions pousser les développeurs Android de Sberbank Online avec leurs collègues iOS, pour jouer sur la rivalité des plateformes.  Mais dans le processus, les organisations ont réalisé que ce n'était pas la meilleure solution, car techniquement les plates-formes fonctionnent dans des conditions inégales.  Il se trouve que sur iOS, les builds sont plus rapides et les autotests sont exécutés. <br><br>  Ensuite, nous avons changé le format et formé des équipes mixtes: cinq développeurs Android et iOS chacun.  Auparavant, les capitaines étaient choisis parmi les développeurs proactifs pour aider à former des équipes.  Il s'est avéré neuf équipes.  Et malgré le fait que nous ayons résolu le problème du fer du point de vue du fair-play, nous devions toujours nous assurer que d'autres restrictions ne gêneraient pas notre armée de correcteurs de bogues. <br><br>  La prochaine quête était le choix de la date de bagaton.  Les dates de sortie pour chaque plateforme sont différentes - elles ont été sélectionnées pour que tout le monde soit à l'aise.  Nous avons essayé de rapprocher le plus possible la date de l'attribution du candidat à la libération. <br><br>  De plus, bagaton charge fortement les infrastructures de plate-forme.  Quand il y a une compétition, qui corrige les bugs plus rapidement, le nombre de pull demandes décolle.  Un mois et demi avant Bagaton, il y avait un risque que notre équipement ne puisse pas faire face aux pics prévus.  Mais à ce moment-là, nous attendions du fer neuf, et il est arrivé juste à temps.  Nous avons réussi à connecter, configurer et renforcer l'infrastructure de bande passante des deux plateformes à plusieurs reprises. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6ed/6a1/a4d/6ed6a1a4d6c80cc58404762f5bda2d09.jpg"><br><br><h2>  Pipeline - comment ne pas tout abaisser dans un tuyau </h2><br>  Tout a été fait ici comme suit: juste avant le début du bagaton de notre développement, nous avons pris la branche dans laquelle les équipes devaient travailler.  De nombreuses demandes de tirage avec des bugs corrigés y ont été versées lors du bagaton.  Des autotests ont été exécutés sur chacun d'eux, les développeurs ont examiné les demandes d'extraction et les testeurs ont vérifié les nouvelles versions pour corriger le bogue.  Et donc toutes les 24 heures de la compétition. <br><br>  Il fallait également répartir la charge des testeurs.  Nous avons fait un graphique horaire du nombre prévu de demandes de tirage dans l'intervalle de bagaton de 24 heures - en fonction du nombre de participants, de la charge du serveur, des activités de tiers, etc.  Comparé aux performances moyennes des testeurs et au nombre d'heures effectives de chaque bagaton d'accompagnement.  Nous avons réparti le "devoir" pour que le samedi matin, les lignes soient aussi peu nombreuses que possible.  En général, ils se sont trompés. <br><br>  Dans le même temps, nous avons tenu compte du fait qu'après bagaton, il était nécessaire de commencer immédiatement les tests de régression afin d'évaluer la qualité de la branche le plus tôt possible et de décider de sa perfusion dans la branche dev.  C'est une charge supplémentaire pour les testeurs. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a41/535/7a6/a415357a6c7f1b40d4f67a436baa52bb.jpg"><br><br><h2>  Examen des fonctionnalités </h2><br>  Il était très important pour nous non seulement de corriger les bugs, mais de le faire qualitativement.  Trois procédures permettent de vérifier le code envoyé par les développeurs dans les demandes d'extraction.  Pour que le code s'aligne, ils doivent réussir: <br><br><ul><li>  Trois développeurs expérimentés ont examiné et approuvé le code. <br></li><li>  le code s'est normalement écrasé et n'a pas échoué aux autotests; <br></li><li>  Après la génération et l'infusion, le bogue dans l'assembly sur les conditions décrites ne reprend pas. <br></li></ul><br>  Nous craignions qu'en mode compétitif, personne ne se révise.  Et au sein de l'équipe, vous ne pouvez pas laisser d'avis.  Par conséquent, ils ont décidé de ne rien inventer et d'agir sur le flux standard, comme dans le mode de travail: un examen croisé arbitraire - celui qui est libre, il prend le processus sur lui-même. <br><br>  Il était également nécessaire d'effectuer un suivi afin que les avis ne soient pas envoyés dans la file d'attente.  Afin de jouer la sécurité, nous avons attiré des signataires de la revue (même ceux qui n'ont pas participé au bagaton lui-même) et avons rappelé activement aux participants l'orientation sur la qualité.  Un développeur iOS senior, en parallèle avec la correction de bugs pour son équipe, a reçu en un jour 80 requêtes pull - il a lu et compris.  C'est vraiment beaucoup! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a96/76f/365/a9676f36579300e2bec0b5e9390db4a6.jpg"><br><h2>  Nous sélectionnons et évaluons les bugs </h2><br>  Nous avons pris des bogues de faible priorité, nous avons éliminé les déchets évidents par les étiquettes et les dates.  Au total, 490 bugs se sont avérés - pour la plupart de petite et moyenne taille, que les mains n'ont pas atteints en raison de tâches plus importantes.  Ce sont tous des triviaux et des mineurs sensés: <br><br><ul><li>  bogues qui sont passés de version en version à plusieurs reprises <br></li><li>  bugs résolus à la demande des utilisateurs <br></li><li>  crash le plus récent <br></li><li>  bogues de régression <br></li><li>  bogues affectant l'UX <br></li></ul><br>  Tous les bogues ont été divisés en trois vagues selon la priorité de fermeture: <br><br><ul><li>  La première vague - environ 230 bugs <br></li><li>  La deuxième vague - environ 150 bugs <br></li><li>  La troisième vague (réserve) - environ 110 bugs <br></li></ul><br>  Les défauts ont été évalués non pas par leur complexité, mais par leur criticité pour l'entreprise.  Les plus critiques sont «artificiellement» et placés temporairement en priorité «bloqueur» et «critique».  Plus la priorité du bug est élevée, plus il a été attribué de points.  La complexité n'a pas été prise en compte - il est arrivé que le bloqueur de bugs se ferme en 20 minutes, et le trivial - en 4 heures.  Pour un bug, vous pourriez gagner de 1 à 7 points. <br><br>  Nous avons conservé le score de chaque équipe pour les bogues fermés en fonction de leur valeur dans les règles de bagaton.  Si les équipes ont eu le temps, elles ont mis au travail le défaut suivant.  La motivation par la valeur a permis de fermer en premier lieu des bugs plus critiques. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/353/685/20c/35368520cbfb2124fbadb00bf134a144.jpg"><br><br><h2>  Comment fermer les bogues </h2><br>  Nous avons divisé la première vague de bugs en 11 groupes (avec une marge), égaux en nombre de points et dans le ratio d'Android et iOS.  La première vague est constituée de bogues «chers», prioritaires avec un coût accru.  Pour une recherche pratique dans Jira, nous leur avons attribué les étiquettes appropriées.  Environ 20 bugs ont été publiés dans chaque groupe. <br><br>  Au début du bagaton, nous avons rassemblé des capitaines d'équipe et joué des labels.  De plus, les capitaines dans leur filtre ont désigné l'étiquette souhaitée et distribué les bogues correspondants au sein de l'équipe.  Nous avons donc réussi à éliminer la correction de bugs chaotique, où les gars prenaient simplement ce qui leur était le plus compréhensible. <br><br>  Les quatre premières heures, les équipes se sont vues attribuer des points uniquement pour les bugs avec les labels du groupe qui leur étaient tombés pour fixer un rythme précis.  Lorsque le temps était écoulé, les bogues encore ouverts passaient dans la deuxième vague, s'ajoutant aux autres qui avaient du sens de se fermer dans le bagaton. <br><br>  À 19h00, tous les bugs non dévoilés sont entrés dans la troisième vague - en plus des bugs qui étaient déjà prévus là-bas.  En conséquence, pour la soirée, nous avons eu des bogues «rapides» qui se fermaient dans le flux habituel: caches et actuels, déchargés littéralement un jour avant le bagaton, ainsi que des bogues avec la priorité la plus basse.  Les trois vagues se sont mises au travail.  En conséquence, 286 des 493 bogues sélectionnés ont été fermés pour bagaton. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b8b/05b/054/b8b05b054526ffe489b12fa48106d40b.jpg"><br><br><h2>  Bagaton unit </h2><br>  Le siège social de Bagaton était situé dans notre salle de conférence, il y avait aussi des quiz et un tournoi de jeux vidéo.  Les équipes n'étaient pas limitées, dispersées partout où cela leur convenait.  En conséquence, toute la banque a découvert bagaton.  Un consommateur de produits du quatrième étage a déclaré: «Je vais me rencontrer au 14e étage, à la recherche de la bonne salle de réunion.  Tout à coup, je comprends que je viens de voir des visages familiers, je reviens - mes développeurs sont assis avec des figurines puissantes et principales, sans aucune attention pour moi.  Ha - je pense - ils ne se cacheront pas de leur propriétaire de produit et sur 10 étages, d'accord, asseyez-vous déjà, le bugfix est une bonne chose. " <br><br>  Il y avait une équipe dans laquelle un seul Android est venu au bagaton et en même temps six développeurs iOS puissants.  Nous avons exceptionnellement éliminé cette équipe un autre package avec des bugs iOS. <br><br>  De plus, sept développeurs des régions sont venus à bagaton.  Certains ont rencontré leurs équipes pour la première fois, ce qu'ils n'avaient auparavant vu que par vidéoconférence.  C'était très cool de voir comment ces gars-là ont activement rejoint le processus. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/678/c20/e70/678c20e7076b0060b880de303b6fab26.jpg"><br><br><h2>  Comment les résultats ont-ils été évalués? </h2><br>  Pour près d'une centaine de développeurs, nous n'avions que 15 testeurs.  Et la nuit, il y en a quatre.  Tous n'étaient pas suffisants, les tests se sont donc poursuivis le lendemain.  Ce sont les testeurs qui ont attribué des points aux équipes, nous les avons donc retirés de l'équipe afin d'éliminer les biais.  Dans un flux de travail normal, le testeur peut appeler le développeur et découvrir: "Écoutez, mec, il y a un tel problème ...".  Sur bagaton, c'était strict: les testeurs devraient envelopper tout ce qui ne passe pas clairement. <br><br>  Nous avons donc pu constater que certains développeurs ne travaillent pas dans le flux accepté.  Le hackathon est devenu une sorte de catalyseur pour tous les écarts.  Ceux qui travaillent clairement dans le flux ont réussi les tests lors de la première vague et ont obtenu des points.  Tous ceux qui ne correspondaient pas vraiment sont entrés dans la file d'attente, qu'ils avaient déjà ratissée après bagaton.  Il a obtenu 60 bugs. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/972/60c/53e/97260c53e33bf174dfa680c945710af2.jpg"><br><br><h2>  Incidents </h2><br>  En général, tout s'est déroulé comme d'habitude, les incidents étaient typiques et résolus dans un ordre de marche.  Quand quelque chose s'est cassé, certains des Signors sont immédiatement passés du correctif à l'élimination de l'incident. <br><br>  Il y a eu un drôle d'incident.  Lors de la préparation du tableau de bord, nous avons décrit les risques possibles: accès à Jira, mises à jour continues, etc.  Ils ont informé tous les administrateurs que pendant le temps du bagaton il était nécessaire de suspendre tous les travaux de maintenance, les mises à jour de Jira et des serveurs.  Création de comptes de sauvegarde pour accéder à Jira.  Et soudain, vers 18h00, nous nous rendons compte que le tableau de bord a cessé de collecter des données.  Les hypothèses étaient différentes.  Peut-être n’ont-ils pas pris en compte un protocole de sécurité?  La raison était inattendue.  Notre organisation est très grande, il n'est pas toujours possible d'obtenir des informations complètes sur tous les processus planifiés.  Notre tableau de bord a été déployé sur une machine virtuelle sur l'un des serveurs secondaires.  Il s'est avéré que c'est ce jour-là, vendredi soir, que ce serveur, selon un plan inconnu, a été physiquement déconnecté de la prise, chargé dans la voiture et envoyé en résidence permanente dans notre nouveau centre de données.  Par conséquent, samedi matin, nous devions collecter toutes les données et calculer les points en mode manuel. <br><br><h2>  Fusionner les branches et autres résultats </h2><br>  En mode de fonctionnement normal, toute la branche est entraînée manuellement par plus de 800 cas de test.  Une équipe complète de testeurs effectue nos tests de régression à temps plein en deux semaines.  Nous ne pouvions pas nous permettre de continuer à nous développer inchangés aussi longtemps.  Pour réduire le temps de test, nous avons sélectionné les principaux cas de test de la santé de l'application - environ 107. Jusqu'à la fin de lundi, ils ont piloté 80% d'iOS, 50% d'Android et n'ont révélé aucun bug critique.  Nous avons décidé que les succursales pouvaient être fusionnées. <br><br>  Sur les 286 bugs fermés sur le bagaton, 182 bugs ont été corrigés.  Les autres sont des redjacks qui ne sont pas pertinents pour diverses raisons, des bugs (quelque part la conception ou la fonctionnalité a déjà changé).  Ces bogues ne sont pas critiques, mais maintenant ils n'auront plus besoin d'être distraits et vous pouvez vous concentrer calmement sur les tâches importantes. <br><br>  De plus, beaucoup, suite aux résultats de bagaton, avaient une question: combien de bugs avons-nous fait?  Seulement huit bugs sur iOS et sept bugs sur Android. <br><br>  Il est important pour nous que les développeurs se sentent responsables du code produit sur un pied d'égalité avec les autres membres de l'équipe.  C'est important dans tout développement, mais dans le développement distribué, cela devient une condition préalable à un travail réussi.  Et à notre avis, nous avons réussi à augmenter le niveau de cette même propriété et esprit d'équipe.  Le résultat a été une histoire avec beaucoup de profits: en peu de temps, nous avons corrigé un tas de bugs, déchargé les backlogs, amélioré les compétences de l'équipe et obtenu beaucoup de fans. <br><br>  <i>Matériel préparé par l'équipe Sberbank Digital Business Platform</i> </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr425835/">https://habr.com/ru/post/fr425835/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr425823/index.html">Statistiques IPO 2018: 45 milliards de dollars levés, Dropbox a levé moins d'argent que les sociétés pharmaceutiques et les vendeurs immobiliers</a></li>
<li><a href="../fr425827/index.html">Leçon Google+: les projets doivent s'assurer que les frontières entre les intérêts des utilisateurs dans la vie réelle sont respectées en ligne</a></li>
<li><a href="../fr425829/index.html">Comment nous nous sommes battus avec Roskomnadzor et ce qu'il en est advenu</a></li>
<li><a href="../fr425831/index.html">Alerte RKN - Base de données Roskomnadzor dans votre navigateur</a></li>
<li><a href="../fr425833/index.html">Un outil pour vous aider à choisir les meilleures idées pour votre produit.</a></li>
<li><a href="../fr425837/index.html">Copier la sémantique et la gestion des ressources en C ++</a></li>
<li><a href="../fr425839/index.html">Examen de la conférence Atlassian</a></li>
<li><a href="../fr425843/index.html">Python pour l'enfant: choisir un tutoriel</a></li>
<li><a href="../fr425845/index.html">Applications de verrouillage automatique sur Google Play</a></li>
<li><a href="../fr425847/index.html">Un exemple d'utilisation de Microsoft Flow ou Comment donner des fleurs à votre femme</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>