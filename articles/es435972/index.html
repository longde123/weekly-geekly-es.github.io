<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üéã üë®üèª‚Äç‚úàÔ∏è üßôüèª Introduciendo programaci√≥n reactiva en Spring üë¥üèæ üë©üèæ‚Äçü§ù‚Äçüë©üèΩ üôÜüèæ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hola Habr! 

 Esta semana esperamos un nuevo libro de Spring 5 de la imprenta: 


 Entre las caracter√≠sticas interesantes de Spring 5, la programaci√≥n...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Introduciendo programaci√≥n reactiva en Spring</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/piter/blog/435972/">  Hola Habr! <br><br>  Esta semana esperamos un nuevo <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">libro</a> de Spring 5 de la imprenta: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ap/o3/tt/apo3ttu5x8fqhvkjyzyrj8g3m2s.jpeg"></div><br>  Entre las caracter√≠sticas interesantes de Spring 5, la programaci√≥n reactiva merece una menci√≥n especial, cuya implementaci√≥n en este marco se describe brevemente en el art√≠culo propuesto por Matt Raible.  En el libro mencionado, los patrones reactivos se discuten en el cap√≠tulo 11. <br><br>  Matt fue coautor de Josh Long, autor de otro gran libro sobre Java y Spring, " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Java in the Cloud</a> " <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">,</a> publicado el verano pasado. <br><a name="habracut"></a><br>  La programaci√≥n reactiva es su manera de construir sistemas que sean resistentes a altas cargas.  El procesamiento de tr√°fico enorme ya no es un problema, ya que el servidor no bloquea y los procesos del cliente no tienen que esperar las respuestas.  El cliente no puede observar directamente c√≥mo se ejecuta el programa en el servidor y sincronizarse con √©l.  Cuando la API encuentra dificultades para procesar solicitudes, a√∫n debe dar respuestas razonables.  No debe rechazar y descartar mensajes de manera incontrolada.  Debe informar a los componentes superiores que est√° trabajando bajo carga para que puedan liberarlo parcialmente de esta carga.  Esta t√©cnica se llama contrapresi√≥n, un aspecto importante de la programaci√≥n reactiva. <br><br>  Somos coautores de este art√≠culo con <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Josh Long</a> .  Josh es un campe√≥n de Java, Spring Developer Advocate y, en general, un hombre global que trabaja en Pivotal.  He estado trabajando con Spring durante mucho tiempo, pero fue Josh quien me mostr√≥ el Spring Boot, fue en la conferencia Devoxx en B√©lgica.  Desde entonces, nos hemos convertido en buenos amigos, somos aficionados a Java y escribimos aplicaciones geniales. <br><br>  <b>Programaci√≥n reactiva o E / S, E / S, vamos a trabajar ...</b> <br><br>  La programaci√≥n reactiva es un enfoque para crear software que utiliza activamente E / S as√≠ncronas.  La E / S asincr√≥nica es una idea peque√±a, cargada de grandes cambios en la programaci√≥n.  La idea en s√≠ es simple: corregir la situaci√≥n con una asignaci√≥n ineficiente de recursos, liberando aquellos recursos que habr√≠an estado inactivos sin nuestra intervenci√≥n, esperando la finalizaci√≥n de E / S.  La entrada / salida asincr√≥nica invierte el enfoque habitual para el procesamiento de E / S: el cliente se libera y puede realizar otras tareas, esperando nuevas notificaciones. <br><br>  Considere lo que es com√∫n entre la entrada / salida s√≠ncrona y as√≠ncrona, y cu√°les son las diferencias entre ellos. <br><br>  Escribiremos un programa simple que lea datos de la fuente (espec√≠ficamente, estamos hablando del enlace <code>java.io.File</code> ).  Comencemos con una implementaci√≥n que utiliza el viejo <code>java.io.InputStream</code> : <br><br>  <i>Ejemplo 1. Lectura sincr√≥nica de datos de un archivo</i> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.example.io; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.extern.log4j.Log4j2; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.util.FileCopyUtils; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.FileInputStream; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.function.Consumer; <span class="hljs-meta"><span class="hljs-meta">@Log</span></span>4j2 <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Synchronous</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reader</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File file, Consumer&lt;BytesPayload&gt; consumer)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> (FileInputStream in = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileInputStream(file)) { <span class="hljs-comment"><span class="hljs-comment">//1 byte[] data = new byte[FileCopyUtils.BUFFER_SIZE]; int res; while ((res = in.read(data, 0, data.length)) != -1) { //2 consumer.accept(BytesPayload.from(data, res)); //3 } } } }</span></span></code> </pre> <br><ol><li>  Proporcionamos un archivo para leer con el archivo <code>java.io.File</code> habitual. </li><li>  Extraiga los resultados de la fuente l√≠nea por l√≠nea ... </li><li>  Escrib√≠ este c√≥digo para tomar <code>Consumer&lt;BytesPayloadgt;</code>  llamado cuando llegan nuevos datos </li></ol><br>  Bastante simple, ¬øqu√© dices?  Ejecute este c√≥digo y ver√° en la salida del registro (a la izquierda de cada l√≠nea), lo que indica que todas las acciones ocurren en un solo hilo. <br>  Aqu√≠ extraemos bytes de nuestros datos tomados en la fuente (en este caso, estamos hablando de una subclase de <code>java.io.FileInputStream</code> heredada de <code>java.io.InputStream</code> ).  ¬øQu√© hay de malo en este ejemplo?  En este caso, usamos un InputStream que apunta a datos ubicados en nuestro sistema de archivos.  Si el archivo est√° all√≠ y el disco duro funciona, este c√≥digo funcionar√° como se esperaba. <br><br>  Pero, ¬øqu√© sucede si leemos los datos no de <code>File</code> , sino de un socket de red, y utilizamos otra implementaci√≥n de <code>InputStream</code> ?  ¬°Nada de qu√© preocuparse!  Por supuesto, no habr√° absolutamente nada de qu√© preocuparse si la velocidad de la red es infinitamente alta.  Y si el canal de red entre este y el otro nodo nunca falla.  Si se cumplen estas condiciones, el c√≥digo funcionar√° perfectamente. <br><br>  Pero, ¬øqu√© sucede si la red se ralentiza o se establece?  En este caso, quiero decir que aumentaremos el per√≠odo hasta que la operaci√≥n <code>in.read(‚Ä¶)</code> .  De hecho, ¬°es posible que no regrese en absoluto!  Este es un problema si intentamos hacer algo m√°s con la secuencia de la que estamos leyendo datos.  Por supuesto, siempre puede crear otra secuencia y leer datos a trav√©s de ella.  Esto puede hacerse hasta cierto punto, pero, al final, alcanzaremos el l√≠mite en el que simplemente agregar subprocesos para una mayor escala ya no ser√° suficiente.  No tendremos una verdadera competencia m√°s all√° del n√∫mero de n√∫cleos que hay en nuestra m√°quina.  Callej√≥n sin salida!  En este caso, podemos aumentar el procesamiento de entrada / salida (la lectura se entiende aqu√≠) solo debido a flujos adicionales, pero aqu√≠ tarde o temprano alcanzaremos el l√≠mite. <br><br>  En este ejemplo, el trabajo principal es la lectura: casi nada sucede en otros frentes.  Dependemos de las E / S.  Considere c√≥mo una soluci√≥n asincr√≥nica nos ayuda a superar parcialmente la monopolizaci√≥n de nuestros flujos. <br><br>  <i>Ejemplo 2. Lectura as√≠ncrona de datos de un archivo</i> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.example.io; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> lombok.extern.log4j.Log4j2; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.springframework.util.FileCopyUtils; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.File; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.io.IOException; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.ByteBuffer; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.channels.AsynchronousFileChannel; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.channels.CompletionHandler; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.file.Path; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.nio.file.StandardOpenOption; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.Collections; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.ExecutorService; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.concurrent.Executors; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.function.Consumer; <span class="hljs-meta"><span class="hljs-meta">@Log</span></span>4j2 <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Asynchronous</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reader</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CompletionHandler</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Integer</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ByteBuffer</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> bytesRead; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> position; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AsynchronousFileChannel fileChannel; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> Consumer&lt;BytesPayload&gt; consumer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> ExecutorService executorService = Executors.newFixedThreadPool(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">read</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(File file, Consumer&lt;BytesPayload&gt; c)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.consumer = c; Path path = file.toPath(); <span class="hljs-comment"><span class="hljs-comment">// 1 this.fileChannel = AsynchronousFileChannel.open(path, Collections.singleton(StandardOpenOption.READ), this.executorService); //2 ByteBuffer buffer = ByteBuffer.allocate(FileCopyUtils.BUFFER_SIZE); this.fileChannel.read(buffer, position, buffer, this); //3 while (this.bytesRead &gt; 0) { this.position = this.position + this.bytesRead; this.fileChannel.read(buffer, this.position, buffer, this); } } @Override public void completed(Integer result, ByteBuffer buffer) { //4 this.bytesRead = result; if (this.bytesRead &lt; 0) return; buffer.flip(); byte[] data = new byte[buffer.limit()]; buffer.get(data); //5 consumer.accept(BytesPayload.from(data, data.length)); buffer.clear(); this.position = this.position + this.bytesRead; this.fileChannel.read(buffer, this.position, buffer, this); } @Override public void failed(Throwable exc, ByteBuffer attachment) { log.error(exc); } }</span></span></code> </pre> <br><ol><li>  Esta vez adaptamos <code>java.io.File</code> , haciendo <code>Java NIO java.nio.file.Path</code> partir de √©l </li><li>  Al crear un <code>Channel</code> , en particular, especificamos el servicio <code>java.util.concurrent.ExecutorService</code> , que se utilizar√° para llamar al controlador <code>CompletionHandler</code> cuando aparezcan los datos necesarios. </li><li>  Comenzamos a leer pasando un enlace a <code>CompletionHandler&lt;Integer, ByteBuffer&gt; (this)</code> </li><li>  En la devoluci√≥n de llamada, lea los bytes del <code>ByteBuffer</code> en la capacidad de <code>byte[]</code> </li><li>  Al igual que en el ejemplo <code>Synchronous</code> , los datos de <code>byte[]</code> se pasan al consumidor. </li></ol><br>  Haremos una reserva de inmediato: ¬°este c√≥digo result√≥ ser mucho m√°s dif√≠cil!  Hay tantas cosas que suceden aqu√≠ que su cabeza est√° girando de inmediato, sin embargo, perm√≠tanme se√±alar ... este c√≥digo lee los datos del <code>Java NIO Channel</code> y luego los procesa en un hilo separado responsable de las devoluciones de llamada.  Por lo tanto, la corriente en la que comenz√≥ la lectura no est√° monopolizada.  Volvemos casi instant√°neamente despu√©s de llamar a <code>.read(..)</code> , y cuando, finalmente, tenemos los datos a nuestra disposici√≥n, se realiza una devoluci√≥n de llamada, ya en otro hilo.  Si hay un retraso entre las llamadas a <code>.read()</code> puede pasar a otros asuntos ejecut√°ndolos en nuestro hilo.  La duraci√≥n de una operaci√≥n de lectura as√≠ncrona, desde el primer byte hasta el √∫ltimo, no es, en el mejor de los casos, mayor que la de una operaci√≥n de lectura s√≠ncrona.  Por lo general, una operaci√≥n asincr√≥nica no es significativamente m√°s larga.  Sin embargo, yendo a tales dificultades adicionales, podemos manejar m√°s efectivamente nuestros flujos.  Haga m√°s trabajo, multiplexe las E / S en un grupo con un n√∫mero finito de subprocesos. <br><br>  Trabajo para una empresa de computaci√≥n en la nube.  ¬°Nos gustar√≠a que obtenga nuevas instancias de la aplicaci√≥n para resolver problemas con el escalado horizontal!  Por supuesto, aqu√≠ estoy un poco falso.  La E / S asincr√≥nica complica un poco las cosas, pero espero que este ejemplo ilustre c√≥mo el c√≥digo reactivo es tan √∫til: le permite procesar m√°s solicitudes y hacer m√°s trabajo en su hardware existente si el rendimiento depende en gran medida de las E / S.  Si el rendimiento depende del uso del procesador (por ejemplo, estamos hablando de operaciones con n√∫meros de Fibonacci, extracci√≥n de bitcoins o criptograf√≠a), entonces la programaci√≥n reactiva no nos dar√° nada. <br><br>  ¬°Actualmente, la mayor√≠a de nosotros no usamos implementaciones de <code>Channel</code> o <code>InputStream</code> en nuestro trabajo diario!  Tenemos que pensar en los problemas a nivel de abstracciones de nivel superior.  Se trata de cosas como matrices, o m√°s bien, la jerarqu√≠a <code>java.util.Collection</code> .  La colecci√≥n <code>java.util.Collection</code> muestra muy bien en un InputStream: ambas entidades suponen que puede operar con todos los datos a la vez, y casi al instante.  Se espera que pueda terminar de leer la mayor√≠a de <code>InputStreams</code> antes, en lugar de m√°s tarde.  Los tipos de recopilaci√≥n se vuelven un poco inc√≥modos al pasar a grandes cantidades de datos.  ¬øQu√© sucede si se trata de algo potencialmente infinito (ilimitado), por ejemplo, sockets web o eventos del servidor?  ¬øQu√© hacer si hay un retraso entre las grabaciones? <br><br>  Necesitamos una mejor manera de describir este tipo de datos.  Estamos hablando de eventos asincr√≥nicos, tales que ocurrir√°n al final.  Puede parecer que <code>Future&lt;T&gt;</code> o <code>CompletableFuture&lt;T&gt;</code> son muy adecuados para este prop√≥sito, pero describen solo una cosa que sucede al final.  De hecho, Java no proporciona una met√°fora adecuada para describir este tipo de datos.  Los tipos <code>Iterator</code> y <code>Stream</code> de Java 8 pueden no estar relacionados, sin embargo, ambos est√°n orientados a la extracci√≥n;  usted mismo solicita la siguiente entrada, no el tipo debe enviar una devoluci√≥n de llamada a su c√≥digo.  Se supone que si el procesamiento basado en inserci√≥n fuera compatible en este caso, lo que permitir√≠a lograr mucho m√°s a nivel de subproceso, entonces la API tambi√©n proporcionar√≠a control de subprocesamiento y programaci√≥n.  <code>Iterator</code> implementaciones de <code>Iterator</code> no dicen nada acerca de los subprocesos, y todos los subprocesos de Java 8 comparten el mismo grupo de bifurcaci√≥n. <br><br>  Si <code>Iterator</code> y <code>Stream</code> realmente admitieran el procesamiento push, entonces encontrar√≠amos otro problema que realmente se intensifica precisamente en el contexto de E / S: ¬°necesitaremos alg√∫n tipo de mecanismo de penetraci√≥n inversa!  Dado que el consumidor de datos se procesa de forma as√≠ncrona, no tenemos idea de cu√°ndo estar√°n los datos en la tuber√≠a y en qu√© cantidad.  No sabemos cu√°ntos datos deber√°n procesarse en la pr√≥xima devoluci√≥n de llamada: ¬°un byte o un terabyte! <br><br>  Al extraer datos de un <code>InputStream</code> , lee tanta informaci√≥n como est√° listo para procesar, y nada m√°s.  En los ejemplos anteriores, leemos datos en el b√∫fer <code>byte[]</code> de una longitud fija y conocida.  En un contexto asincr√≥nico, necesitamos alguna forma de decirle al proveedor cu√°ntos datos estamos dispuestos a procesar. <br>  Si se√±or.  Aqu√≠ falta algo seguro. <br><br>  <b>Busca la met√°fora que falta</b> <br><br>  En este caso, estamos buscando una met√°fora que refleje bellamente la esencia de las E / S asincr√≥nicas, que soporte dicho mecanismo para la transferencia inversa de datos y nos permita controlar el flujo de ejecuci√≥n en sistemas distribuidos.  En la programaci√≥n reactiva, la capacidad de un cliente para indicar qu√© carga puede manejar se denomina "flujo inverso". <br><br>  Ahora hay una serie de buenos proyectos: Vert.x, Akka Streams y RxJava, que admiten la programaci√≥n reactiva.  El equipo de Spring tambi√©n ejecuta un proyecto llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Reactor</a> .  Entre estos diversos est√°ndares hay un campo general bastante amplio, asignado de facto al est√°ndar de <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">iniciativa Reactive Streams</a> .  La iniciativa Reactive Streams define cuatro tipos: <br><br>  Interfaz del <code>Publisher&lt;T&amp;gt</code> ;  produce valores que finalmente pueden llegar.  Interfaz del <code>Publisher&lt;T&amp;gt</code> ;  produce valores de tipo <code>T</code> para el <code>Subscriber&lt;T&gt;</code> . <br><br>  <i>Ejemplo 3. Secuencias reactivas: interfaz <code>Publisher&lt;T&gt;</code></i> . <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.reactivestreams; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Publisher</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">subscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscriber&lt;? </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">super</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Tgt; s)</span></span></span></span>; }</code> </pre> <br>  El tipo de suscriptor se suscribe a <code>Publisher&lt;T&gt;</code> , recibiendo notificaciones de cualquier valor nuevo de tipo <code>T</code> trav√©s de su <code>onNext(T)</code> .  Si se produce alg√∫n error, se <code>onError(Throwable)</code> su <code>onError(Throwable)</code> .  Cuando el procesamiento se completa normalmente, se <code>onComplete</code> m√©todo <code>onComplete</code> del suscriptor. <br><br>  <i>Ejemplo 4. Secuencias de chorro: interfaz de <code>Subscriber&lt;T&gt;</code> .</i> <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.reactivestreams; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onSubscribe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Subscription s)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onNext</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(T t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onError</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Throwable t)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onComplete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  Cuando el <code>Subscriber</code> conecta por primera vez al <code>Publisher</code> , recibe una <code>Subscription</code> en el <code>Subscriber#onSubscribe</code> .  Suscripci√≥n La <code>Subscription</code> es quiz√°s la parte m√°s importante de toda la especificaci√≥n;  es ella quien proporciona el flujo de retorno.  Un suscriptor utiliza el m√©todo de solicitud de <code>Subscription#request</code> para solicitar datos adicionales o el m√©todo de <code>Subscription#cancel</code> para detener el procesamiento. <br><br>  <i>Ejemplo 5. Secuencias reactivas: interfaz de <code>Subscription&lt;T&gt;</code></i> . <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.reactivestreams; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscription</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">request</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cancel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre> <br>  La especificaci√≥n de flujo reactivo proporciona otro tipo √∫til, aunque obvio: el <code>Processor&lt;A,B&gt;</code> es solo una interfaz que hereda tanto el <code>Subscriber&lt;A&gt;</code> como el <code>Publisher&lt;B&gt;</code> . <br><br>  <i>Ejemplo 6. Secuencias de chorro: interfaz del <code>Processor&lt;T&gt;</code></i> . <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> org.reactivestreams; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Processor</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Subscriber</span></span></span><span class="hljs-class">&amp;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ltT</span></span></span><span class="hljs-class">&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Publisher</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">R</span></span></span><span class="hljs-class">&gt; </span></span>{ }</code> </pre> <br>  Una especificaci√≥n no se posiciona como una receta para implementaciones; de hecho, su prop√≥sito es definir tipos para soportar la interoperabilidad.  El beneficio obvio de los tipos asociados con flujos reactivos es que, sin embargo, encontraron un lugar en la versi√≥n Java 9, adem√°s, sem√°nticamente son "uno a uno" corresponden a interfaces de la clase <code>java.util.concurrent.Flow</code> , por ejemplo: <code>java.util.concurrent.Flow.Publisher</code> . <br><br>  <b>Conoce a Reactor</b> <br><br>  Los tipos de flujos reactivos por s√≠ solos no son suficientes;  Se necesitan implementaciones de orden superior para soportar operaciones como el filtrado y la transformaci√≥n.  Como tal, el proyecto Reactor es conveniente;  se basa en la especificaci√≥n de Reactive Streams y proporciona dos especializaciones de <code>Publisher&lt;T&gt;</code> . <br><br>  Primero, <code>Flux&lt;T&gt;</code> es un <code>Publisher</code> que produce cero o m√°s valores.  El segundo, <code>Mono&lt;T&gt;</code> , es <code>Publisher&lt;T&gt;</code> , produciendo cero o un valor.  Ambos publican valores y pueden manejarlos en consecuencia, sin embargo, sus capacidades son mucho m√°s amplias que la especificaci√≥n de Reactive Streams.  Ambos proporcionan operadores que le permiten procesar flujos de valor.  Los tipos de reactores componen bien: la salida de uno de ellos puede servir como entrada para el otro, y si un tipo necesita trabajar con otros flujos de datos, conf√≠an en instancias de <code>Publisher&lt;T&gt;</code> . <br><br>  Tanto <code>Mono&lt;T&gt;</code> como <code>Flux&lt;T&gt;</code> implementan <code>Publisher&lt;T&gt;</code> ;  Recomendamos que sus m√©todos acepten instancias de <code>Publisher&lt;T&gt;</code> pero devuelvan <code>Flux&lt;T&gt;</code> o <code>Mono&lt;T&gt;</code> ;  Esto ayudar√° al cliente a distinguir qu√© tipo de datos recibe. <br><br>  Supongamos que se le proporcion√≥ el <code>Publisher&lt;T&gt;</code> y se le pidi√≥ que mostrara la interfaz de usuario para este <code>Publisher&lt;T&gt;</code> .  ¬øDeber√≠a mostrar una p√°gina con detalles para un registro, ya que puede obtener <code>CompletableFuture&lt;T&gt;</code> ?  ¬øO mostrar una p√°gina de resumen con una lista o cuadr√≠cula donde todas las entradas se muestran p√°gina por p√°gina?  Es dificil de decir. <br><br>  A su vez, <code>Flux&lt;T&gt;</code> y <code>Mono&lt;T&gt;</code> muy espec√≠ficos.  Sabe que necesita mostrar una p√°gina de revisi√≥n si <code>Flux&lt;T&gt;</code> recibe <code>Flux&lt;T&gt;</code> , y una p√°gina con detalles para un registro (o no uno) cuando recibe <code>Mono&lt;T&gt;</code> . <br><br>  Reactor es un proyecto de c√≥digo abierto lanzado por Pivotal;  Ahora se ha vuelto muy popular.  Facebook lo usa en su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">motor a</a> reacci√≥n <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">para llamar a procedimientos remotos</a> , y tambi√©n lo usa en <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Rsocket</a> , dirigido por el creador de RxJava, Ben Christensen.  Salesforce lo usa en su <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">implementaci√≥n reactiva de gRPC</a> .  Reactor implementa los tipos Reactive Streams, por lo que puede interactuar con otras tecnolog√≠as que admiten estos tipos, por ejemplo, con <a href="">RxJava 2</a> de Netflix, <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Akka Streams</a> de Lightbend y con el proyecto <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Vert.x</a> de la Fundaci√≥n Eclipse.  David Cairnock, director de RxJava 2, tambi√©n colabor√≥ ‚Äã‚Äãactivamente con Pivotal para desarrollar Reactor, haciendo que el proyecto sea a√∫n mejor.  Adem√°s, por supuesto, est√° presente de una forma u otra en Spring Framework, comenzando con Spring Framework 4.0. <br><br>  <b>Programaci√≥n reactiva con Spring WebFlux</b> <br><br>  A pesar de su utilidad, Reactor es solo la base.  Nuestras aplicaciones deben comunicarse con fuentes de datos.  Debe admitir autenticaci√≥n y autorizaci√≥n.  La primavera ofrece todo esto.  Si Reactor nos da la met√°fora faltante, entonces Spring nos ayuda a todos a hablar un idioma com√∫n. <br><br>  Spring Framework 5.0 se lanz√≥ en septiembre de 2017. Se basa en las especificaciones Reactor y Reactive Streams.  Tiene un nuevo modelo de componentes y tiempo de ejecuci√≥n reactivo llamado <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=es&amp;u=">Spring WebFlux</a> . <br><br>  Spring WebFlux es independiente de la API de Servlet y no requiere que funcionen.  Viene con adaptadores que le permiten usarlo en la parte superior del motor Servlet, si es necesario, pero esto no es necesario.  Tambi√©n proporciona un tiempo de ejecuci√≥n completamente nuevo basado en Netty llamado Spring WebFlux.  Spring Framework 5, que trabaja con Java 8 y Java EE 7 y versiones posteriores, ahora sirve como base para gran parte del ecosistema de Spring, incluidos Spring Data Kay, Spring Security 5, Spring Boot 2 y Spring Cloud Finchley. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/es435972/">https://habr.com/ru/post/es435972/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../es435960/index.html">Experimento de pensamiento: aleteo en marcha</a></li>
<li><a href="../es435962/index.html">25 aniversario de Aeron: sensaciones e impresiones de la versi√≥n actualizada de Aeron Remastered</a></li>
<li><a href="../es435964/index.html">Ethereum planea ser 99% m√°s econ√≥mico</a></li>
<li><a href="../es435968/index.html">Descripci√≥n general de los algoritmos de aprendizaje autom√°tico profundo para robots</a></li>
<li><a href="../es435970/index.html">Gu√≠a para principiantes sobre desarrollo de servidores web con Node.js</a></li>
<li><a href="../es435974/index.html">Three.js - hacer controles para espacio o planetario</a></li>
<li><a href="../es435976/index.html">WebAssembly en producci√≥n y el "campo minado" de Smart TV: una entrevista con Andrei Nagih</a></li>
<li><a href="../es435978/index.html">Soluciones de protecci√≥n biom√©trica</a></li>
<li><a href="../es435984/index.html">Redes neuronales y la filosof√≠a del lenguaje.</a></li>
<li><a href="../es435986/index.html">Windows reservar√° 7 GB para actualizaciones del sistema para evitar quedarse sin espacio en el disco duro</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>