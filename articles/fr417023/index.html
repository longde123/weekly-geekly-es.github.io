<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>üèà üì¨ ‚ôàÔ∏è Exp√©rience du Groupe Rambler: comment nous avons commenc√© √† contr√¥ler compl√®tement la formation et le comportement des composants frontaux React üïå üë©‚Äçüíº üçÄ</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Il existe de nombreuses fa√ßons de cr√©er une application Web moderne, mais chaque √©quipe est in√©vitablement confront√©e au m√™me ensemble de questions: c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Exp√©rience du Groupe Rambler: comment nous avons commenc√© √† contr√¥ler compl√®tement la formation et le comportement des composants frontaux React</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/company/rambler-co/blog/417023/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/qx/mz/rd/qxmzrd_ehgvjx1pimjk_fuelvgk.jpeg"></div><br>  Il existe de nombreuses fa√ßons de cr√©er une application Web moderne, mais chaque √©quipe est in√©vitablement confront√©e au m√™me ensemble de questions: comment r√©partir les responsabilit√©s avant et arri√®re, comment minimiser l'apparence de la logique en double - par exemple, lors de la validation des donn√©es, quelles biblioth√®ques utiliser pour travailler, comment garantir la fiabilit√© et un transport transparent entre l'avant et l'arri√®re et documenter le code. <br><br>  √Ä notre avis, nous avons r√©ussi √† mettre en ≈ìuvre un bon exemple de solution √©quilibr√©e en complexit√© et en profit, que nous utilisons avec succ√®s dans une production bas√©e sur Symfony et React. <a name="habracut"></a><br><br>  Quel type de format d'√©change de donn√©es pouvons-nous choisir lors de la planification du d√©veloppement de l'API backend dans un produit Web activement d√©velopp√© qui contient des formulaires dynamiques avec des champs connexes et une logique m√©tier complexe? <br><br><ul><li>  SWAGGER est une bonne option, il existe une documentation et des outils de d√©bogage pratiques.  De plus, il existe des biblioth√®ques pour Symfony qui automatisent le processus, mais malheureusement le sch√©ma JSON s'est av√©r√© pr√©f√©rable; </li><li>  Sch√©ma JSON - cette option a √©t√© propos√©e par les d√©veloppeurs frontaux.  Ils avaient d√©j√† des biblioth√®ques leur permettant d'afficher des formulaires.  Cela a d√©termin√© notre choix.  Le format vous permet de d√©crire les contr√¥les primitifs qui peuvent √™tre effectu√©s dans le navigateur.  Il existe √©galement une documentation qui d√©crit toutes les options possibles pour le sch√©ma; </li><li>  GraphQL est assez jeune.  Pas tellement de biblioth√®ques c√¥t√© serveur et frontend.  Au moment o√π le syst√®me a √©t√© cr√©√©, il n'√©tait pas consid√©r√©, √† l'avenir - la meilleure fa√ßon de cr√©er une API, il y aura un article s√©par√© √† ce sujet; </li><li>  SOAP - a un typage strict des donn√©es, la capacit√© de construire de la documentation, mais il n'est pas si facile de se faire des amis avec le front React.  SOAP a √©galement un surco√ªt plus important pour la m√™me quantit√© utilisable de donn√©es transmises; </li></ul><br>  Tous ces formats ne couvraient pas compl√®tement nos besoins, j'ai donc d√ª √©crire ma propre moissonneuse.  Une approche similaire peut fournir des solutions tr√®s efficaces pour une application particuli√®re, mais cela comporte des risques: <br><br><ul><li>  forte probabilit√© de bugs; </li><li>  souvent pas une documentation √† 100% et une couverture de test; </li><li>  faible "modularit√©" en raison de la fermeture de l'API logicielle.  Typiquement, ces solutions sont √©crites sous un monolithe et n'impliquent pas de partage entre projets sous forme de composants, car cela n√©cessite une construction architecturale particuli√®re (lire le co√ªt de d√©veloppement); </li><li>  niveau √©lev√© d'entr√©e de nouveaux d√©veloppeurs.  Cela peut prendre beaucoup de temps pour comprendre toute la fra√Æcheur d'un v√©lo; </li></ul><br>  Par cons√©quent, il est recommand√© d'utiliser des biblioth√®ques communes et stables (comme le pav√© gauche de npm) selon la r√®gle - le meilleur code est celui que vous n'avez jamais √©crit, mais qui a r√©solu le probl√®me commercial.  Le d√©veloppement du backend d'application web dans les technologies publicitaires du Groupe Rambler est r√©alis√© chez Symfony.  Nous ne nous attarderons pas sur tous les composants utilis√©s du framework, ci-dessous nous parlerons de la partie principale, sur la base de laquelle le travail est mis en ≈ìuvre - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">forme Symfony</a> .  Le frontend utilise React et la biblioth√®que correspondante qui √©tend le sch√©ma JSON pour les sp√©cificit√©s WEB - <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React JSON Schema Form</a> . <br><br>  Sch√©ma g√©n√©ral de travail: <br><br><img src="https://habrastorage.org/webt/fk/ym/pf/fkympfjqrjcrpzb2u04mc5lsera.png"><br><br>  Cette approche pr√©sente de nombreux avantages: <br><br><ul><li>  la documentation est g√©n√©r√©e √† partir de la bo√Æte, tout comme la possibilit√© de cr√©er des tests automatiques - toujours selon le sch√©ma; </li><li>  toutes les donn√©es transmises sont saisies; </li><li>  Il est possible de transmettre des informations sur les r√®gles de validation de base; <br>  Int√©gration rapide de la couche de transport dans React - gr√¢ce √† la biblioth√®que de sch√©mas JSON de Mozilla React; </li><li>  la possibilit√© de g√©n√©rer des composants Web frontaux √† partir de la bo√Æte gr√¢ce √† l'int√©gration de bootstrap; </li><li>  regroupement logique, un ensemble de validations et les valeurs possibles des √©l√©ments HTML, ainsi que toute la logique m√©tier est contr√¥l√©e en un seul point - sur le backend, il n'y a pas de duplication de code; </li><li>  il est aussi simple que possible de porter l'application sur d'autres plates-formes - la partie vue est s√©par√©e de celle de contr√¥le (voir le paragraphe pr√©c√©dent), au lieu de React et du navigateur, l'application Android ou iOS peut restituer et traiter les demandes des utilisateurs; </li></ul><br>  Examinons plus en d√©tail les composants et le sch√©ma de leur interaction. <br><br>  Initialement, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sch√©ma JSON</a> vous permet de d√©crire les v√©rifications primitives qui peuvent √™tre effectu√©es sur le client, telles que la liaison ou la saisie de diff√©rentes parties du sch√©ma: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> schema = { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"A registration form"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">"A simple form example."</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"firstName"</span></span>, <span class="hljs-string"><span class="hljs-string">"lastName"</span></span> ], <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"firstName"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"First name"</span></span> }, <span class="hljs-string"><span class="hljs-string">"lastName"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Last name"</span></span> }, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Password"</span></span>, <span class="hljs-string"><span class="hljs-string">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">3</span></span> }, <span class="hljs-string"><span class="hljs-string">"telephone"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Telephone"</span></span>, <span class="hljs-string"><span class="hljs-string">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span> } } }</code> </pre> <br>  Pour travailler avec des sch√©mas frontaux, il existe la biblioth√®que populaire <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">React JSON Schema Form</a> qui fournit les modules compl√©mentaires n√©cessaires au <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">sch√©ma JSON</a> pour le d√©veloppement Web: <br><br>  <b>uiSchema</b> - Le sch√©ma JSON d√©termine lui-m√™me le type de param√®tres √† transmettre, mais cela ne suffit pas pour cr√©er une application Web.  Par exemple, un champ de type String peut √™tre repr√©sent√© comme &lt;entr√©e ... /&gt; ou &lt;textarea ... /&gt;, ce sont des nuances importantes, en tenant compte du fait que vous devez dessiner correctement un diagramme pour le client.  UiSchema sert √©galement √† transmettre ces nuances, par exemple, pour le sch√©ma JSON pr√©sent√© ci-dessus, vous pouvez sp√©cifier le composant Web visuel de l'uSchema suivant: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> uiSchema = { <span class="hljs-string"><span class="hljs-string">"firstName"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:autofocus"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:emptyValue"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-string"><span class="hljs-string">"age"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"updown"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Age of person"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:description"</span></span>: <span class="hljs-string"><span class="hljs-string">"(earthian year)"</span></span> }, <span class="hljs-string"><span class="hljs-string">"bio"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-string"><span class="hljs-string">"password"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"password"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"Hint: Make it strong!"</span></span> }, <span class="hljs-string"><span class="hljs-string">"date"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"alt-datetime"</span></span> }, <span class="hljs-string"><span class="hljs-string">"telephone"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:options"</span></span>: { <span class="hljs-string"><span class="hljs-string">"inputType"</span></span>: <span class="hljs-string"><span class="hljs-string">"tel"</span></span> } } }</code> </pre><br>  Un exemple de Live Playground <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">peut √™tre vu ici</a> . <br><br>  Avec cette utilisation du sch√©ma, le rendu frontal sera impl√©ment√© par les composants de bootstrap standard sur plusieurs lignes: <br><br><pre> <code class="javascript hljs">render(( <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Form</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">schema</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{schema}</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">uiSchema</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">{uiSchema}</span></span></span></span><span class="xml"><span class="hljs-tag"> /&gt;</span></span></span><span class="xml"> ), document.getElementById("app"));</span></span></code> </pre><br>  Si les widgets standard fournis avec bootstrap ne vous conviennent pas et que vous avez besoin de personnalisation - pour certains types de donn√©es, vous pouvez sp√©cifier vos propres mod√®les dans uiSchema, au moment de l'√©criture, la <i>cha√Æne</i> , le <i>nombre</i> , l' <i>entier</i> , le <i>bool√©en sont</i> pris en charge. <br><br>  <b>FormData</b> - contient des donn√©es de formulaire, par exemple: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"firstName"</span></span>: <span class="hljs-string"><span class="hljs-string">"Chuck"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"lastName"</span></span>: <span class="hljs-string"><span class="hljs-string">"Norris"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"age"</span></span>: <span class="hljs-number"><span class="hljs-number">78</span></span>, <span class="hljs-attr"><span class="hljs-attr">"bio"</span></span>: <span class="hljs-string"><span class="hljs-string">"Roundhouse kicking asses since 1940"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"password"</span></span>: <span class="hljs-string"><span class="hljs-string">"noneed"</span></span> }</code> </pre><br>  Apr√®s le rendu, les widgets seront remplis de ces donn√©es - utiles pour √©diter des formulaires, ainsi que pour certains m√©canismes personnalis√©s que nous avons ajout√©s pour les champs associ√©s et les formulaires complexes, plus √† ce sujet ci-dessous. <br><br>  Vous pouvez en savoir plus sur toutes les nuances de la configuration et de l'utilisation des sections d√©crites ci-dessus sur la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">page</a> du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">plugin</a> . <br><br>  Hors de la bo√Æte, la biblioth√®que vous permet de travailler uniquement avec ces trois sections, mais pour une application Web √† part enti√®re, vous devez ajouter un certain nombre de fonctionnalit√©s: <br><br>  <b>Erreurs</b> - il est √©galement n√©cessaire de pouvoir transf√©rer les erreurs de divers contr√¥les backend pour le rendu √† l'utilisateur, et les erreurs peuvent √™tre de simples validations - par exemple, l'unicit√© de la connexion lors de l'enregistrement de l'utilisateur, ou plus complexes bas√©es sur la logique m√©tier - c'est-√†-dire  nous devons √™tre en mesure de personnaliser leur nombre (erreurs) et les textes des notifications affich√©es.  Pour ce faire, en plus de celles d√©crites ci-dessus, la section Erreurs a √©t√© ajout√©e √† l'ensemble des donn√©es transmises - pour chaque champ, une liste d'erreurs de rendu est d√©finie ici <br><br>  <b>Action</b> , <b>m√©thode</b> - pour envoyer les donn√©es pr√©par√©es par l'utilisateur au backend, deux attributs ont √©t√© ajout√©s contenant l'URL du backend du contr√¥leur effectuant le traitement et la m√©thode de livraison HTTP <br><br>  En cons√©quence, pour la communication entre l'avant et l'arri√®re, nous avons obtenu json avec les sections suivantes: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"action"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://..."</span></span>, <span class="hljs-attr"><span class="hljs-attr">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"errors"</span></span>:{}, <span class="hljs-attr"><span class="hljs-attr">"schema"</span></span>:{}, <span class="hljs-attr"><span class="hljs-attr">"formData"</span></span>:{}, <span class="hljs-attr"><span class="hljs-attr">"uiSchema"</span></span>:{} }</code> </pre><br>  Mais comment g√©n√©rer ces donn√©es sur le backend?  Au moment de la cr√©ation du syst√®me, il n'existait aucune biblioth√®que pr√™te √† l'emploi permettant de convertir Symfony Form en sch√©ma JSON.  Maintenant, ils sont d√©j√† apparus, mais ont leurs inconv√©nients - par exemple, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">LiformBundle</a> interpr√®te le sch√©ma JSON assez librement et modifie le standard √† sa discr√©tion, donc, malheureusement, j'ai d√ª √©crire ma propre impl√©mentation. <br><br>  Comme base de g√©n√©ration, le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">formulaire Symfony</a> standard <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">est utilis√©</a> .  Il suffit d'utiliser le g√©n√©rateur et d'ajouter les champs n√©cessaires: <br><div class="spoiler">  <b class="spoiler_title">Exemple de formulaire</b> <div class="spoiler_text"><pre> <code class="php hljs">$builder -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, TextType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.title'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.title'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'description'</span></span>, TextareaType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.description'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.description'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'year'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; range(<span class="hljs-number"><span class="hljs-number">1981</span></span>, <span class="hljs-number"><span class="hljs-number">1990</span></span>), <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.year'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.year'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'genre'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'fantasy'</span></span>, <span class="hljs-string"><span class="hljs-string">'thriller'</span></span>, <span class="hljs-string"><span class="hljs-string">'comedy'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'genre.choice.'</span></span>.$val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.genre'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.genre'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'available'</span></span>, CheckboxType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.available'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.available'</span></span>, ], ]);</code> </pre><br></div></div><br>  En sortie, cette forme est convertie en un circuit de la forme: <br><div class="spoiler">  <b class="spoiler_title">Exemple JsonSchema</b> <div class="spoiler_text"><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"action"</span></span>: <span class="hljs-string"><span class="hljs-string">"//localhost/create.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"method"</span></span>: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"schema"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"maxLength"</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-attr"><span class="hljs-attr">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.title"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.description"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"year"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.year"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"available"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.available"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>, <span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>, <span class="hljs-string"><span class="hljs-string">"available"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"formData"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"year"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"uiSchema"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.title"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"text"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"description"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.description"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"year"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.year"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"available"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.available"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"checkbox"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"mainForm"</span></span> } }</code> </pre><br></div></div><br>  Tout le code qui convertit les formulaires en JSON est ferm√© et n'est utilis√© que dans le groupe Rambler, si la communaut√© s'int√©resse √† ce sujet, nous le <s>remanierons</s> au format bundle dans notre <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">r√©f√©rentiel github</a> . <br><br>  Examinons quelques autres aspects sans lesquels il est difficile de cr√©er une application Web moderne: <br><br><h3>  Validation sur le terrain </h3><br>  Il est d√©fini √† l'aide du <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">validateur symfony</a> , qui d√©crit les r√®gles de validation d'un objet, un exemple de validateur: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"title"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Length"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"min"</span></span></span><span class="hljs-tag">&gt;</span></span>1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"max"</span></span></span><span class="hljs-tag">&gt;</span></span>255<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"minMessage"</span></span></span><span class="hljs-tag">&gt;</span></span>title.min<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"maxMessage"</span></span></span><span class="hljs-tag">&gt;</span></span>title.max<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"NotBlank"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"message"</span></span></span><span class="hljs-tag">&gt;</span></span>title.not_blank<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">option</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">constraint</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">property</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Dans cet exemple, une contrainte de type NotBlank modifie le sch√©ma en ajoutant un champ au tableau des champs obligatoires du sch√©ma, et une contrainte de type Longueur ajoute les attributs schema-&gt; properties-&gt; title-&gt; maxLength et schema-&gt; properties-&gt; title-&gt; minLength, dont la validation doit d√©j√† tenir compte √† l'extr√©mit√© avant. <br><br><h3>  Regroupement d'√©l√©ments </h3><br>  Dans la vraie vie, les formes simples sont plus susceptibles de faire exception √† la r√®gle.  Par exemple, un projet peut avoir un formulaire avec un grand nombre de champs et tout donner dans une liste solide n'est pas la meilleure option - nous devons prendre soin des utilisateurs de notre application: <br><img src="https://habrastorage.org/webt/ez/wo/w3/ezwow3h3t7sgngwhcujbv-b93vw.png"><br>  La d√©cision √©vidente est de diviser le formulaire en groupes logiques d'√©l√©ments de contr√¥le afin qu'il soit plus facile pour l'utilisateur de naviguer et de faire moins d'erreurs: <br><img src="https://habrastorage.org/webt/o3/z2/w-/o3z2w-uxh-gqpzd1sjsynspzltu.png"><br>  Comme vous le savez, les capacit√©s du formulaire Symfony pr√™t √† l'emploi sont assez grandes - par exemple, les formulaires peuvent √™tre h√©rit√©s d'autres formulaires, c'est pratique, mais dans notre cas, il y a des inconv√©nients.  Dans l'impl√©mentation actuelle, l'ordre dans le sch√©ma JSON d√©termine l'ordre dans lequel l'√©l√©ment de formulaire est dessin√© dans le navigateur; l'h√©ritage peut violer cet ordre.  Une option √©tait de regrouper des √©l√©ments, par exemple: <br><br><div class="spoiler">  <b class="spoiler_title">Exemple de formulaire imbriqu√©</b> <div class="spoiler_text"><pre> <code class="php hljs">$info = $builder -&gt;create(<span class="hljs-string"><span class="hljs-string">'info'</span></span>,FormType::class,[<span class="hljs-string"><span class="hljs-string">'inherit_data'</span></span>=&gt;<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'title'</span></span>, TextType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.title'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.title'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'description'</span></span>, TextareaType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.description'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.description'</span></span>, ], ]); $builder -&gt;add($info) -&gt;add(<span class="hljs-string"><span class="hljs-string">'year'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; range(<span class="hljs-number"><span class="hljs-number">1981</span></span>, <span class="hljs-number"><span class="hljs-number">1990</span></span>), <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.year'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.year'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'genre'</span></span>, ChoiceType::class, [ <span class="hljs-string"><span class="hljs-string">'choices'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'fantasy'</span></span>, <span class="hljs-string"><span class="hljs-string">'thriller'</span></span>, <span class="hljs-string"><span class="hljs-string">'comedy'</span></span>, ], <span class="hljs-string"><span class="hljs-string">'choice_label'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($val)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'genre.choice.'</span></span>.$val; }, <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.genre'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.genre'</span></span>, ], ]) -&gt;add(<span class="hljs-string"><span class="hljs-string">'available'</span></span>, CheckboxType::class, [ <span class="hljs-string"><span class="hljs-string">'label'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'label.available'</span></span>, <span class="hljs-string"><span class="hljs-string">'attr'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'title.available'</span></span>, ], ]);</code> </pre><br></div></div><br>  Ce formulaire sera converti en un circuit du formulaire: <br><br><div class="spoiler">  <b class="spoiler_title">Exemple JsonSchema imbriqu√©</b> <div class="spoiler_text"><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"schema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"info"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.title"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.description"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1981"</span></span>, <span class="hljs-string"><span class="hljs-string">"1982"</span></span>, <span class="hljs-string"><span class="hljs-string">"1983"</span></span>, <span class="hljs-string"><span class="hljs-string">"1984"</span></span>, <span class="hljs-string"><span class="hljs-string">"1985"</span></span>, <span class="hljs-string"><span class="hljs-string">"1986"</span></span>, <span class="hljs-string"><span class="hljs-string">"1987"</span></span>, <span class="hljs-string"><span class="hljs-string">"1988"</span></span>, <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.available"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"info"</span></span>, <span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>, <span class="hljs-string"><span class="hljs-string">"available"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">et uiSchema correspondant</b> <div class="spoiler_text"><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"uiSchema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"info"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.title"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"text"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.description"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"form"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.available"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"checkbox"</span></span> }, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span> }</code> </pre><br></div></div><br>  Cette m√©thode de regroupement ne nous convenait pas puisque le formulaire pour les donn√©es commence √† d√©pendre de la pr√©sentation et ne peut pas √™tre utilis√©, par exemple, dans l'API ou d'autres formulaires.  Il a √©t√© d√©cid√© d'utiliser des param√®tres suppl√©mentaires dans uiSchema sans rompre la norme actuelle du sch√©ma JSON.  Par cons√©quent, des options suppl√©mentaires de ce type ont √©t√© ajout√©es au formulaire symphonie: <br><br><pre> <code class="php hljs"><span class="hljs-string"><span class="hljs-string">'fieldset'</span></span> =&gt; [ <span class="hljs-string"><span class="hljs-string">'groups'</span></span> =&gt; [ [ <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'base'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'info'</span></span>, <span class="hljs-string"><span class="hljs-string">'fields'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-string"><span class="hljs-string">'description'</span></span>], <span class="hljs-string"><span class="hljs-string">'order'</span></span> =&gt; [<span class="hljs-string"><span class="hljs-string">'title'</span></span>, <span class="hljs-string"><span class="hljs-string">'description'</span></span>] ] ], <span class="hljs-string"><span class="hljs-string">'type'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'base'</span></span> ]</code> </pre><br>  Cela sera converti dans le sch√©ma suivant: <br><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"ui:group"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"base"</span></span>, <span class="hljs-string"><span class="hljs-string">"groups"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"info"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"legend.info"</span></span>, <span class="hljs-string"><span class="hljs-string">"fields"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"info"</span></span> ] },</code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Version compl√®te du sch√©ma et uiSchema</b> <div class="spoiler_text"><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"schema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"maxLength"</span></span>: <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-string"><span class="hljs-string">"minLength"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.title"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.description"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"1989"</span></span>, <span class="hljs-string"><span class="hljs-string">"1990"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.available"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"required"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span>, <span class="hljs-string"><span class="hljs-string">"year"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>, <span class="hljs-string"><span class="hljs-string">"available"</span></span> ], <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br><pre> <code class="hljs powershell"><span class="hljs-string"><span class="hljs-string">"uiSchema"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.title"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"text"</span></span> }, <span class="hljs-string"><span class="hljs-string">"description"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.description"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"textarea"</span></span> }, <span class="hljs-string"><span class="hljs-string">"year"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.year"</span></span> }, <span class="hljs-string"><span class="hljs-string">"genre"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-string"><span class="hljs-string">"available"</span></span>: { <span class="hljs-string"><span class="hljs-string">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.available"</span></span>, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"checkbox"</span></span> }, <span class="hljs-string"><span class="hljs-string">"ui:group"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"base"</span></span>, <span class="hljs-string"><span class="hljs-string">"groups"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"group"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"info"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"legend.info"</span></span>, <span class="hljs-string"><span class="hljs-string">"fields"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> ] } ], <span class="hljs-string"><span class="hljs-string">"order"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"info"</span></span> ] }, <span class="hljs-string"><span class="hljs-string">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"fieldset"</span></span> }</code> </pre><br></div></div><br>  √âtant donn√© que du c√¥t√© frontal, la <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">biblioth√®que React que nous utilisons</a> ne prend pas cela en charge, j'ai d√ª ajouter cette fonctionnalit√© nous-m√™mes.  Avec l'ajout d'un nouvel √©l√©ment ¬´ui: group¬ª, nous avons la possibilit√© de contr√¥ler pleinement le processus de regroupement des √©l√©ments et des formulaires √† l'aide de l'API actuelle. <br><br><h3>  Formes dynamiques </h3><br>  Que faire si un champ d√©pend d'un autre, par exemple, une liste d√©roulante de sous-cat√©gories d√©pend de la cat√©gorie s√©lectionn√©e? <br><br><img src="https://habrastorage.org/webt/4p/6c/-t/4p6c-tgimotfkxkvhfrvglduxlw.gif"><br><br>  Symfony FORM nous donne la possibilit√© de cr√©er <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">des formulaires dynamiques</a> √† l'aide d'√©v√©nements, mais, malheureusement, au moment de la mise en ≈ìuvre, cette fonctionnalit√© n'√©tait pas prise en charge par JSON Schema, bien que <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">cette fonctionnalit√© soit apparue</a> dans les versions r√©centes.  Initialement, l'id√©e √©tait de donner la liste enti√®re √† un objet Enum et EnumNames, en fonction de laquelle filtrer les valeurs: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"sgenre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"eccentric"</span></span>, <span class="hljs-string"><span class="hljs-string">"romantic"</span></span>, <span class="hljs-string"><span class="hljs-string">"grotesque"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"sgenre.choice.eccentric"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"sgenre.choice.romantic"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> }, { <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"sgenre.choice.grotesque"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br>  Mais avec cette approche, pour chacun de ces √©l√©ments, il est n√©cessaire d'√©crire son propre traitement sur le front-end, sans parler du fait que tout devient tr√®s compliqu√© lorsqu'il y a plusieurs de ces objets ou qu'un √©l√©ment d√©pend de plusieurs listes.  De plus, la quantit√© de donn√©es envoy√©es au frontend augmente consid√©rablement pour le traitement et le rendu corrects de toutes les d√©pendances.  Par exemple, imaginez un dessin d'une forme compos√©e de trois champs interconnect√©s - pays, villes, rues.  La quantit√© de donn√©es initiales qui doivent √™tre envoy√©es au backend au front end peut perturber les clients l√©gers et, comme vous vous en souvenez, nous devons prendre soin de nos utilisateurs.  Par cons√©quent, il a √©t√© d√©cid√© d'impl√©menter la dynamique en ajoutant des attributs personnalis√©s: <br><br><ul><li>  SchemaID - un attribut du sch√©ma, contient l'adresse du contr√¥leur pour traiter le FormData actuellement entr√© et mettre √† jour le sch√©ma du formulaire actuel, si la logique m√©tier l'exige; </li><li>  Recharger - un attribut indiquant au frontend qu'un changement dans ce champ d√©clenche une mise √† jour du circuit en envoyant des donn√©es de formulaire au backend; </li></ul><br>  La pr√©sence d'un <i>SchemaID</i> peut sembler √™tre une duplication - apr√®s tout, il y a un attribut d' <i>action</i> , mais ici nous parlons de la division des responsabilit√©s - le contr√¥leur <i>SchemaID est</i> responsable de la mise √† jour interm√©diaire du <i>sch√©ma</i> et de <i>UISchema</i> , et le contr√¥leur d' <i>action</i> effectue l'action commerciale n√©cessaire - par exemple, cr√©e ou met √† jour un objet et ne permet pas qu'une partie du formulaire soit envoy√©e en tant que produit des contr√¥les de validation. Avec ces ajouts, le sch√©ma commence √† ressembler √† ceci: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"schemaId"</span></span>: <span class="hljs-string"><span class="hljs-string">"//localhost/schema.json"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"properties"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"genre.choice.fantasy"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.thriller"</span></span>, <span class="hljs-string"><span class="hljs-string">"genre.choice.comedy"</span></span> ], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"sgenre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"enum"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"enumNames"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"label.sgenre"</span></span> } }, <span class="hljs-attr"><span class="hljs-attr">"uiSchema"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"genre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:options"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"reload"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.genre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"sgenre"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"select"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"ui:help"</span></span>: <span class="hljs-string"><span class="hljs-string">"title.sgenre"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"ui:widget"</span></span>: <span class="hljs-string"><span class="hljs-string">"mainForm"</span></span> }, <span class="hljs-attr"><span class="hljs-attr">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"object"</span></span> }</code> </pre><br>  En cas de modification du champ ¬´genre¬ª, le frontend envoie le formulaire complet avec les donn√©es actuelles au backend, re√ßoit en r√©ponse un ensemble de sections n√©cessaires au rendu du formulaire: <br><br><pre> <code class="hljs css">{ <span class="hljs-attribute"><span class="hljs-attribute">action</span></span>: ‚Äúhttps://...‚Äù, method: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, schema:{} <span class="hljs-selector-tag"><span class="hljs-selector-tag">formData</span></span>:{} <span class="hljs-selector-tag"><span class="hljs-selector-tag">uiSchema</span></span>:{} }</code> </pre><br>  et rendre √† la place du formulaire actuel.  Ce qui changera exactement apr√®s l'envoi est d√©termin√© par le verso, la composition ou le nombre de champs peut changer, etc.  - tout changement que la logique m√©tier de l'application n√©cessitera. <br><br><h3>  Conclusion </h3><br>  En raison d'une petite extension de l'approche standard, nous avons obtenu un certain nombre de fonctionnalit√©s suppl√©mentaires qui nous permettent de contr√¥ler pleinement la formation et le comportement des composants frontaux React, de cr√©er des circuits dynamiques bas√©s sur la logique m√©tier, d'avoir un point unique pour la formation des r√®gles de validation et la possibilit√© de cr√©er rapidement et de mani√®re flexible de nouvelles pi√®ces VIEW - par exemple, mobiles ou de bureau applications.  Dans ces exp√©riences audacieuses, vous devez vous souvenir de la norme sur la base de laquelle vous travaillez et maintenir une compatibilit√© descendante avec elle.  Au lieu de React, toute autre biblioth√®que peut √™tre utilis√©e sur le frontend, l'essentiel est d'√©crire un adaptateur de transport sur le sch√©ma JSON et de connecter une biblioth√®que de rendu de formulaire.  Bootstrap a bien fonctionn√© avec React car nous avions de l'exp√©rience avec cette pile technologique, mais l'approche dont nous avons parl√© ne vous limite pas dans le choix des technologies.  Au lieu de Symfony, il pourrait √©galement y avoir tout autre framework qui vous permet de convertir des formulaires au format de sch√©ma JSON. <br><br>  Mise √† jour: vous pouvez voir notre rapport sur le <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=fr&amp;u=">Meetup # 14 de Symfony Moscou</a> √† ce sujet √† partir de 1:15:00. </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/fr417023/">https://habr.com/ru/post/fr417023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../fr417009/index.html">Comment mettre en ≈ìuvre la technologie d'apprentissage automatique dans votre entreprise</a></li>
<li><a href="../fr417011/index.html">TOP 10 des nouveaux projets blockchain de 2018 - Forbes</a></li>
<li><a href="../fr417013/index.html">Les ¬´dunes de sable¬ª de Pluton ne sont pas faites de sable - ce sont des granules de m√©thane gel√©</a></li>
<li><a href="../fr417015/index.html">Nous comprenons ce qui enregistre et ce qui n'enregistre pas l'application Burger King</a></li>
<li><a href="../fr417017/index.html">Comment une exp√©rience nucl√©aire rat√©e a g√©n√©r√© accidentellement l'astronomie des neutrinos</a></li>
<li><a href="../fr417027/index.html">Comment ai-je √©crit la biblioth√®que C ++ 11 standard ou pourquoi boost est si effrayant. Pr√©sentation</a></li>
<li><a href="../fr417029/index.html">Profilage de code avec LLVM</a></li>
<li><a href="../fr417031/index.html">S√©curit√© Mobile OAuth 2.0</a></li>
<li><a href="../fr417033/index.html">QIWI Kitchen le 7 juin - vid√©o des discours de nos intervenants</a></li>
<li><a href="../fr417035/index.html">UnnyWorld: post-mortem</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>