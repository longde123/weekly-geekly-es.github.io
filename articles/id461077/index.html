<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ‘°ğŸ» ğŸ›« ğŸ‘©ğŸ¿â€ğŸ¤â€ğŸ‘©ğŸ» Bagaimana pentester dimasak? Pengujian Pintu Masuk untuk Interns Keamanan Digital ğŸ‘¨ğŸ¿â€ğŸ’¼ ğŸ‘¦ğŸ¾ ğŸ“¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Summer of Hack 2019 di Digital Security sudah berjalan lancar, yang berarti saatnya untuk memberi tahu bagaimana kami merekrut orang. 



 Di bawah po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Bagaimana pentester dimasak? Pengujian Pintu Masuk untuk Interns Keamanan Digital</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/dsec/blog/461077/">  <b>Summer of Hack 2019</b> di Digital Security sudah berjalan lancar, yang berarti saatnya untuk memberi tahu bagaimana kami merekrut orang. <br><br><img src="https://habrastorage.org/webt/iv/ef/ud/ivefudzwssbwskpfaxaxkczsxvu.jpeg"><br><br>  Di bawah potongan, bahan tebal dan menarik tentang bagaimana kami memilih spesialis muda untuk magang kami "Summer of Hack 2019", dan secara khusus ke Departemen Audit Keamanan. <br><br>  Pertimbangkan apa, menurut pendapat kami, pentester harus tahu agar berhasil melakukan tugasnya. <br><br>  Kami akan menganalisis sejumlah tugas sulit yang kami siksa, termasuk atas nama salah satu dari mereka. <br><a name="habracut"></a><br>  Mungkin bagian paling menarik dari seleksi untuk magang di departemen audit keamanan adalah profil kami.  Setiap tahun kami berkumpul di seluruh departemen dan mendiskusikan keterampilan apa, menurut pendapat kami, dalam permintaan untuk spesialis modern di bidang keselamatan praktis, mengingat tugas-tugas paling menarik yang harus diselesaikan tahun ini, dan menulis bidang pengetahuan yang tanpanya sulit membayangkan seorang auditor yang sukses.  Ketika semua lelucon itu bercanda dan kisah-kisah diceritakan, intinya tetap satu set ide. <br><br>  Tahun ini, kami dipandu oleh persyaratan berikut: <br><br><ul><li>  Pengetahuan dasar tentang aplikasi web perangkat dan serangannya; </li><li>  Pengetahuan dasar tentang perlindungan berbasis browser dan mekanisme kontrol akses (ya, SOP dan CORS yang sama, di mana tanpa mereka); </li><li>  Keterampilan membaca kode dasar dan kemampuan untuk melihat logika di baliknya; </li><li>  Memahami operasi jaringan komputer dan perutean di dalamnya; </li><li>  Pengalaman dengan sistem seperti Linux; </li><li>  Kemampuan untuk tidak takut pada teknologi asing.  Kemampuan untuk google dan mensistematisasikan informasi yang diterima; </li><li> Dan sejumput Android (meskipun tidak perlu, tapi ini adalah kemauan kecil kami). </li></ul><br>  Setelah pertanyaan dikembangkan.  Sebagian, kami meminjam mereka dari pertanyaan yang kami tanyakan selama wawancara, tetapi lebih dari setengahnya disiapkan khusus untuk kuesioner ini.  Pakar kami menghabiskan waktu pribadi mereka untuk mempersiapkan tempat pembuangan lalu lintas, berdebat tentang bagaimana merumuskan pertanyaan dengan lebih baik, dan kerentanan apa yang â€œterlalu spesifik, mengapa peserta pelatihan menyiksaâ€.  Untuk semangat seperti itu, kami tidak bisa tidak melepaskan topi kami (putih, tentu saja). <br><br>  Analisis setiap pertanyaan terdiri dari dua bagian.  Bagian pertama adalah jawaban dari salah satu peserta pelatihan kami - Danila <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=" class="user_link">Korgik_0</a> Leontyeva (dia adalah penulis publikasi), dan yang kedua adalah komentar dari para spesialis yang menumpuk kuesioner. <br><br><hr><br>  <i>Halo, Habr!</i> <i><br><br></i>  <i>Pertama, sedikit penyimpangan liris.</i> <i><br></i>  <i>Lebih khusus lagi, "Bagaimana saya mengetahui tentang Summ3r 0f h4ck".</i> <i><br></i>  <i>Saya mendengar tentang pengumuman magang dari pidato oleh <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Denis Rybin</a> dan <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Ilya Bulatov</a> di konferensi RuCTF2019.</i> <i><br><br></i>  <i>Secara harfiah setelah 4 hari, sebuah <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">posting</a> diposting di habr tentang pembukaan set magang.</i> <i><br><br></i>  <i>Dan di malam hari di hari yang sama saya membuka tugas, di departemen audit keamanan, dan membenamkan diri dalam pekerjaan.</i>  <i>Hari ini saya akan berbagi dengan pembaca kesulitan apa yang harus saya hadapi dan pilihan solusi apa yang bisa saya tawarkan.</i> <br><br><hr><br><h1>  <strong><font color="#cc0000">1</font></strong>  <strong><font color="#cc0000">Kode sumber php</font></strong> </h1><br>  Periksa kodenya.  Jelaskan kekurangan apa yang Anda lihat dan bagaimana Anda akan memperbaikinya. <br><br><img src="https://habrastorage.org/webt/ne/0x/ku/ne0xkuq_5uz955i1rypa8or5spk.jpeg"><br><br><div class="spoiler">  <b class="spoiler_title">Penguraian pekerjaan</b> <div class="spoiler_text">  Baris ke-4 - gunakan hash md5. <br>  Masalah - md5 dapat di-brutal dalam jumlah waktu yang wajar menggunakan hashcat. <br>  Bagaimana cara memperbaikinya? <br><br>  Menggunakan lebih banyak algoritma hashing "intensif sumber daya". <br>  Dalam hal ini, Anda harus sepenuhnya menolak cookie pengguna dan mengikat semua logika ke phpsession. <br><br>  Baris ke-5 - PostgreSQL-suntikan. <br>  Bagaimana cara memperbaikinya? <br>  Menggunakan pernyataan yang disiapkan. <br>  Implementasi pernyataan yang disiapkan untuk memverifikasi login <br><br><pre><code class="plaintext hljs">$query = "SELECT username FROM login WHERE username=?"; $stmt = $conn-&gt;prepare($query); $stmt-&gt;execute(array($username)); $username = $stmt-&gt;fetchColumn(); if($username == FALSE) { die(" !"); }</code> </pre> <br>  11 baris - sejumlah keputusan yang gagal. <br><br><ol><li>  Kehidupan sesi terlalu lama.  Setahun penuh banyak.  Jika cookie berhasil dibajak, akses panjang ke akun pengguna oleh penyerang dimungkinkan. </li><li>  Bendera httpHanya hilang.  Jika diatur ke TRUE, cookie hanya akan dapat diakses melalui protokol HTTP.  Artinya, cookie dalam hal ini tidak akan tersedia untuk bahasa scripting seperti JavaScript. </li><li>  Tidak ada hashing cookie. </li><li>  Kurangnya pengaturan bendera aman.  Bendera aman menunjukkan bahwa cookie harus dikirim dari klien melalui koneksi HTTPS yang aman.  Jika diatur ke TRUE, cookie dari klien akan dikirim ke server hanya jika koneksi aman dibuat. </li></ol><br>  Bagaimana cara memperbaikinya? <br>  Secara default, di php, masa sesi hanya 24 menit, mari kita terapkan ini. <br>  Tetapkan bendera aman, httpOnly. <br><br>  Dalam hal ini, Anda harus menolak cookie pengguna yang aneh dan mengikat semua logika ke phpsession. <br><br>  18 baris - XSS (Bahasa Inggris Cross-Site Scripting - "intersite scripting"). <br>  Bagaimana cara memperbaikinya?  Ubah semua karakter yang mungkin menjadi entitas HTML yang sesuai. <br><br><pre> <code class="plaintext hljs">$query = htmlentities($query, ENT_QUOTES, "UTF-8");</code> </pre> <br>  Kami akan secara eksplisit menunjukkan pengkodean untuk menghindari substitusi UTF-7. <br><br><pre> <code class="plaintext hljs">header("Content-Type: text/html; charset=utf-8");</code> </pre> <br>  Baris 20 - cacat pada sistem otentikasi dan penyimpanan sesi. <br><br>  Masalah - jika Anda mengatur id pengguna yang dikodekan dalam base64 di pengguna cookie, Anda dapat masuk ke akunnya! <br><br>  Bagaimana cara memperbaikinya?  Saat memberikan otorisasi kepada pengguna, kami merekam sesi dalam database dan ketika menginstal sesi kami memeriksa keberadaannya di database. <br><br><pre> <code class="plaintext hljs"> $query = "SELECT sessions FROM login WHERE sessions=?"; $stmt = $conn-&gt;prepare($query); $stmt-&gt;execute(array($_COOKIE["user"])); $session = $stmt-&gt;fetchColumn(); if($session == TRUE) { do_login($_COOKIE["user"]); }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Komentar Pakar D:</b> <div class="spoiler_text"><blockquote>  Pertanyaan pertama yang ditanyakan oleh kuisioner magang di masa mendatang adalah kerentanan web yang utama dan dikenal luas.  Satu-satunya kesulitan di sini adalah perlunya melihatnya dalam kode sumber di PHP.  Namun, tidak ada yang mengatur tugas "menyembunyikan bug". <br><br>  Berikut adalah daftar kerentanan yang dapat dideteksi dalam daftar ini berdasarkan frekuensi deteksi mereka: <br><br>  <b>Pembuatan kata sandi menggunakan algoritma MD5</b> bahkan diketahui oleh kandidat yang jauh dari web.  Namun, ada juga nuansa yang menarik, misalnya, banyak kandidat menggunakan istilah yang sangat salah, mencoba menggambarkan masalah dengan kata-kata mereka sendiri.  "Algoritma kerentanan", "fungsi satu arah", "keberadaan tabrakan" dan belokan aneh lainnya pergi ke pertempuran, setelah diperiksa lebih dekat, mereka ternyata tidak lebih dari satu set kata-kata besar yang tidak mengungkapkan esensi.  Tentu saja, di sini kami pergi ke sebuah pertemuan dan tidak menemukan kesalahan dengan orang-orang yang baru saja bersiap untuk memulai jalan untuk mempelajari kebijaksanaan keamanan informasi.  Untuk mendapatkan "set-off", menyebutkan ancaman akan cukup, bahwa dalam kasus kompromi database, hash MD5 dapat disortir oleh penyerang dalam waktu yang dapat diterima dan kata sandi (atau string yang setara) dapat diperoleh dalam teks yang jelas.  Dan, tentu saja, banyak yang menyebutkan kekurangan garam dan kekerasan berdasarkan penggunaan meja pelangi.  Kami juga menerima komentar seperti itu secara positif, terutama jika responden menjelaskan mengapa ini merupakan ancaman. <br><br>  <b>Potensi injeksi SQL.</b>  Sulit untuk menambahkan sesuatu;  saat membuat panggilan ke database, input pengguna login dan kata sandi secara langsung digabungkan dengan permintaan.  Jika Anda tidak dapat memanipulasi nilai kata sandi pada tahap ini (hash diambil darinya), maka memasukkan injeksi ke nama pengguna tidak akan menyulitkan penyerang potensial. <br><br>  <b>Output dari informasi debug yang tidak perlu yang mengarah ke serangan XSS.</b>  Dengan membaca daftar dengan hati-hati, orang dapat memperhatikan panggilan gema, yang menampilkan permintaan yang dihasilkan ke database dalam komentar HTML pada halaman.  Tentu saja, kesimpulan informasi tambahan pada halaman tersebut sepenuhnya opsional dan, kemungkinan besar, hanya dilupakan oleh pengembang setelah melakukan tes.  Informasi tambahan semacam itu sangat bermanfaat bagi penyerang dan memungkinkan pemahaman yang jauh lebih baik tentang cara kerja aplikasi.  Namun, sayangnya, ini hanya setengah dari masalah.  Faktanya adalah bahwa seorang penyerang dapat memanipulasi isi dari variabel kueri, dan isinya tidak dapat disaring atau melarikan diri sebelum ditampilkan kepada pengguna - ada potensi serangan XSS.  Namun, eksploitasinya mungkin menjadi sakit kepala karena fungsi strtoupper yang buruk.  Vektor yang disuntikkan oleh penyerang akan menjadi huruf besar, dan jika ini bukan masalah untuk tag HTML, maka Javascript sangat tersinggung oleh banding seperti itu.  Ini dapat dengan mudah diverifikasi menggunakan konsol browser. <br><br><img src="https://habrastorage.org/webt/cg/ev/oy/cgevoykot6pzht0mx5ppeqyxwne.png"><br><br>  Yah, setidaknya, tampaknya, penyerang harus beralih ke apa yang disebut "serangan tanpa script" atau teknik canggih untuk memotong penyaringan (dalam hal ini, JSFUCK akan melakukannya), sehingga fakta risiko keamanan tidak membatalkan ini. <br><br>  <b>Kesalahan dalam logika mekanisme manajemen sesi</b> adalah bagian yang paling menarik dari tugas tersebut.  Penemuannya diperlukan tidak hanya untuk membaca sumber baris demi baris, tetapi juga untuk memahami logika seluruh daftar.  Orang bisa merasakan ada sesuatu yang salah dengan memperhatikan pengaturan cookie yang berisi id pengguna yang dikodekan base64 di blok ingat-saya.  Analisis lebih lanjut dari logika mekanisme ini membawa kita pada pemikiran: "Ternyata penyerang yang mengetahui atau melewati id dapat masuk ke akun apa pun tanpa memasukkan nama pengguna dan kata sandi?!".  Ya, memang, seorang penyerang dapat secara mandiri menghasilkan pengguna cookie di sisinya dan memberikan nilai id apa pun yang dikodekan oleh base64.  Mengirim permintaan dengan cookie seperti itu tanpa nama pengguna dan kata sandi akan memicu fungsi do_login dan masuk ke akun orang lain. <br><br>  Penyebutan 4 kerentanan ini dalam respons kandidat secara langsung memengaruhi skor mereka. <br><br>  Namun, banyak tergantung pada kualitas respons.  Menyebutkan cara-cara untuk memperbaiki situasi, mengomentari faktor-faktor tambahan yang memengaruhi kelayakan serangan, penggunaan istilah-istilah yang tepat dan kemampuan untuk menyusun pemikiran Anda, mengomentari kelemahan tambahan atau ancaman potensial - semua ini menghangatkan hati kami dan menyebabkan peningkatan peringkat akhir. <br></blockquote><br></div></div><br><hr><br><h1>  <strong><font color="#cc0000">2</font></strong>  <strong><font color="#cc0000">Jwt</font></strong> </h1><br>  Saat meneliti aplikasi web, Anda menemukan bahwa aplikasi tersebut menggunakan token JWT sebagai otorisasi. <br><br>  Masalah keamanan apa yang Anda lihat, pemeriksaan seperti apa yang akan Anda lakukan? <br><br>  Token JWT: <br><br><pre> <code class="plaintext hljs">eyJhbGciOiJOb25lIiwidHlwIjoiSldUIn0.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6InNla2EiL CJpYXQiOjE1MTYyMzkwMjIsInJvbGUiOiJub2JvZHkiLCJpc0FkbWluIjoiRmFsc2UiLCJwYX Nzd29yZCI6IjFkMDBjYUgifQ.F7Y1mCAmg5-QFok-rkpLdwe8prCyiKsCyJ-3Z5f7luI</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Penguraian pekerjaan</b> <div class="spoiler_text">  Token Web Dan JSON (JWT). <br>  Strukturnya -&gt; [base64url (HEADER)]. [Base64url (PAYLOAD)]. [Base64url (SIGNATURE)] <br>  [base64url (HEADER)] = eyJhbGciOiJOb25lIiwidHlwIjoiSldUIn0 <br>  base64url decode -&gt; {"alg": "None", "typ": "JWT"} <br>  Orang dapat segera mencatat fakta bahwa algoritma tanda tangan ("alg": "Tidak ada") dari tanda tangan tidak digunakan.  Beberapa perpustakaan JWT tidak mendukung algoritma "tidak ada", yaitu, algoritma tanda tangan.  Ketika tajuk alg â€œtidak adaâ€, sisi server tidak akan melakukan verifikasi tanda tangan. <br>  Artinya, Anda dapat menulis muatan apa pun di base64url, dan tanda tangannya tidak akan diverifikasi. <br>  Yang memungkinkan kami membuat pengguna dengan hak admin. <br><br>  Juga, fakta bahwa bagian muatan tidak menggunakan header seperti aud (mendefinisikan penerima yang dimaksudkan token JWT) dan exp (masa pakai token) menyederhanakan kehidupan kita. <br><br>  Taksiran Muatan <br>  eyJhbGciOiJOb25lIiwidHlwIjoiSldUIn0.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6ImhhY2siLCJpYXQiOjE1MTYyMzkwMjIsInJvbGUiOiJub2JvZHkiLCJpc0FkbWluIjoiVHJ1ZSIsInBhc3N3b3JkIjoiaGFjayJ9 <br><br>  base64url decode payload -&gt; {"sub": "1234567890", "name": "hack", "iat": 1516239022, "role": "nobody", "isAdmin": "True", "password": "hack Â»} <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Komentar Pakar D:</b> <div class="spoiler_text"><blockquote>  Dalam pekerjaan auditor sering harus berurusan dengan teknologi baru, dan kemampuan untuk memahaminya sangat penting.  Termasuk pertanyaan ini dalam kuesioner, kami berasumsi bahwa sebagian besar kandidat hampir tidak mendengar tentang teknologi token JWT kecuali untuk namanya.  Karena itu, pertanyaan ini, pertama-tama, ditujukan pada kemampuan untuk mencari dan menganalisis informasi dari sumber-sumber publik.  Akibatnya, seseorang yang melewatkan penerbitan Google atas permintaan "JWT" â€‹â€‹dan "jwt kerentanan" bisa sampai pada kesimpulan berikut: <br><br>  1. Token ini tidak memiliki algoritme tanda tangan, sehingga penyerang dapat memodifikasi bidang apa pun di dalam token, yang tidak diasumsikan oleh konsep token JWT. <br><br>  2. Bidang di dalam token berisi kata sandi pengguna dalam teks yang jelas, menyimpan informasi tersebut di token, setidaknya, merupakan praktik yang buruk.  Dalam kebanyakan kasus, Anda dapat menolak keputusan seperti itu dan dengan demikian meningkatkan tingkat keamanan Anda. <br><br>  3. Mengingat kurangnya tanda tangan dan kemampuan kami untuk memodifikasi bidang di dalam token, masuk akal untuk berasumsi bahwa mengubah nilai isAdmin dapat meningkatkan hak istimewa kami menjadi hak istimewa administrator. <br><br>  4. Gagasan menarik lainnya yang hanya beberapa orang yang disebutkan dalam jawaban mereka berkaitan dengan fakta kemampuan untuk mentransfer input pengguna di bidang token JWT.  Dalam situasi normal, penyerang tidak dapat mempengaruhi data dalam token dengan cara apa pun, yang berarti bahwa pengembang sering dapat mengabaikan pengenalan cek tambahan dalam kode penangan.  Ini memunculkan ide sederhana: tapi mari kita coba melakukan serangan klasik bukan melalui parameter GET / POST, tetapi melalui bidang token.  Ini bisa memberikan hasil yang baik secara tak terduga.  Pendekatan kreatif semacam itu dengan justifikasi tindakan kami yang benar sangat kami hargai dalam menilai hal ini dan masalah lainnya. <br><br>  Banyak kandidat dalam jawaban mereka mengatur pengulangan singkat tentang bagaimana token JWT disusun, dan di mana digunakan, itu menarik bagi kita untuk membaca, namun, pertama-tama, kita mengevaluasi aspek-aspek jawaban mengenai keamanan. <br></blockquote><br></div></div><br><hr><br><h1>  <strong><font color="#cc0000">Nomor 3</font></strong>  <strong><font color="#cc0000">CORS / CSRF / IDOR / ???</font></strong> </h1><br><br>  Dalam aplikasi web, kata sandi pengguna diubah menggunakan permintaan berikut (lihat Opsi 1).  Apa potensi ancaman keamanan yang Anda lihat?  Pemeriksaan apa yang akan Anda lakukan?  Apakah situasi akan berubah dalam hal perilaku berikut (lihat Opsi 2)?  Jelaskan jawaban Anda. <br><img src="https://habrastorage.org/webt/mr/b-/se/mrb-seaadzkgqbmqvsq-zcqflyo.jpeg"><br><div class="spoiler">  <b class="spoiler_title">Penguraian pekerjaan</b> <div class="spoiler_text">  <b>Opsi 1</b> <br>  "Potensi ancaman keamanan apa yang Anda lihat?" <br><br>  1) Kurangnya kontrol akses. <br>  Jika nomor pengguna-ke mana permintaan perubahan kata sandi dibuat tidak dicentang, maka kata sandi dapat diubah untuk setiap pengguna terdaftar dalam sistem. <br>  Bagaimana cara memperbaikinya?  - Mencocokkan JSESSION dari database dan id-shnik yang diminta. <br><br>  2) Kemampuan untuk melakukan serangan CSRF <br>  Kami memikat pengguna resmi ke host yang dikendalikan oleh kami dan, setelah mengajukan permintaan, ke example.com atas nama korban, untuk mengubah kata sandi. <br>  Bagaimana cara memperbaikinya?  - Menambahkan token CSRF. <br><br>  <b>Opsi 2</b> <br>  "Potensi ancaman keamanan apa yang Anda lihat?" <br>  Kelemahan dalam kebijakan CORS. <br>  Anda disarankan untuk memasukkan daftar putih tajuk Akses-Kontrol-Bolehkan-Asal. <br><br>  Bagaimana cara memperbaikinya?  - <br><br>  1) Memodifikasi file .htaccess <br><br><pre> <code class="plaintext hljs">&lt;ifmodule mod_headers.c&gt; Header always set Access-Control-Allow-Origin: "https://whitelist.domain.ru" Header always set Access-Control-Allow-Methods "PUT" &lt;/ifmodule&gt;</code> </pre><br>  2) PHP <br><br><pre> <code class="plaintext hljs">&lt;?php header('Access-Control-Allow-Origin: â€œhttps://whitelist.domain.ruâ€); header('Access-Control-Allow-Methods: PUT'); ?&gt;</code> </pre><br>  "Apakah situasinya akan berubah dengan perilaku berikut?" <br><br>  Ya  Karena dalam kasus kedua, permintaan PUT digunakan, yang penting, karena menggunakan permintaan PUT membuat permintaan CORS "sulit", yang pada gilirannya benar-benar menghilangkan kita dari kesempatan untuk melakukan serangan CSRF + tidak adanya header seperti Access-Control-Allow-Kredensial: true merampas kita kemampuan untuk mengirim di tempat dengan tajuk http dan cookie pengguna lainnya. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Komentar Ahli I:</b> <div class="spoiler_text"><blockquote>  Mari kita perhatikan, secara berurutan, apa masalah utama yang terlihat pada pertanyaan yang diberikan: <br><br>  1) Memang, karena pengidentifikasi angka pengguna "10012" diamati dalam permintaan, langkah pertama adalah memeriksa apakah mungkin untuk mengubah kata sandi untuk pengguna lain?  Bisakah cukup <b>menentukan id orang lain</b> ? <br>  Kerentanan kelas IDOR cukup mudah untuk dieksploitasi dan seringkali memiliki tingkat kritikalitas tinggi. <br><br>  2) Permintaan untuk mengubah kata sandi terjadi dengan metode POST, token CSRF tidak diamati, dan jenis kontennya adalah "teks / polos".  Ada kemungkinan <b>memalsukan permintaan seperti itu.</b> <br><br>  Akibatnya, untuk mengubah kata sandi korban, cukup bagi penyerang meyakinkan mereka untuk hanya mengunjungi tautan "jahat". <br><br>  3) Di header respons, server <b>mengungkapkan versi perangkat lunak yang digunakan</b> .  Ini bisa disebut kerentanan pada bentangan, tetapi lebih baik menyembunyikan spanduk tersebut - penyerang dapat dengan mudah menemukan eksploitasi 1 hari yang terkenal pada mereka, ditambah nilai perangkat lunak yang digunakan sangat menyederhanakan perencanaan serangan lebih lanjut. <br><br>  4) Kami akan sangat senang melihat kalimat "Apa yang akan terjadi jika kami <b>mengubah format data dari JSON ke XML</b> ?" <br><br>  Faktanya adalah bahwa kerangka kerja modern cerdas, omnivora dan dapat memproses data dalam format yang berbeda.  Dan ketika parsing XML, kerentanan XXE yang berbahaya sering diizinkan.  Dengan bantuannya, penyusup dapat "pergi" ke jaringan internal, dapat membaca file konfigurasi dari server, dan kadang-kadang menjalankan RCE. <br><br>  5) Saya juga ingin melihat komentar seperti "Mengapa <b>pengetahuan orang tua tidak diperiksa</b> saat mengganti kata sandi?" <br><br>  Adapun "Varian No. 2", ada "jebakan" di dalamnya - header CORS digunakan di sini, dan Tipe-Konten dari permintaan sudah diatur ke "application / json". <br><br>  Kesalahan yang dibuat oleh sebagian besar kandidat adalah jawaban dari formulir "-Itu tanda bintang di Allow-Origin, yang berarti Anda dapat mengirim permintaan dari situs mana pun!" <br><br>  Tidak, kamu tidak bisa.  Pertama, Bolehkan-Kredensial: Header benar tidak ada, yang berarti bahwa browser harus menjalankan permintaan "dengan cookie", sehingga permintaan akan anonim, tanpa sesi.  Dan kedua, bahkan jika tajuk seperti itu ada, browser tetap akan melarang pengiriman cookie - hanya karena "tanda bintang".  Kombinasi mereka dilarang, dan peramban diabaikan. <br></blockquote></div></div><br><hr><br><h1>  <strong><font color="#cc0000">Nomor 4</font></strong>  <strong><font color="#cc0000">Dump jaringan</font></strong> </h1><br>  Bayangkan Anda masuk ke jaringan internal perusahaan dan mencegat lalu lintas yang pembuangannya terlampir di bawah ini.  Jelaskan serangan apa yang akan Anda coba lakukan dan dengan alat apa? <br><br>  Dump: <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">yadi.sk/d/qkLcfwSCzdxcwg</a> <br><br><div class="spoiler">  <b class="spoiler_title">Penguraian pekerjaan</b> <div class="spoiler_text">  1) Spoofing LLMNR &lt; <br>  Seorang penyerang di subnet lokal dapat mendengarkan dan menanggapi pesan siaran, mengklaim bahwa nama host yang diminta adalah alamat IP-nya sendiri. <br>  Ini mengarah pada fakta bahwa komputer klien yang meminta terhubung ke komputer penyerang dan, tergantung pada protokol, dapat mencoba untuk mengotentikasi. <br><br>  Utilitas yang digunakan adalah Intercepter-NG, sebuah proyek di githab VindicateTool. <br><br>  2) penyalahgunaan HSRP. <br>  Bermasalah - ketika parameter "preempt" diatur ke 1, penyerang memiliki kesempatan untuk "mengeluarkan" router lain, karena prioritas yang lebih tinggi.  Setelah mengirim HSRP ke multicast, router yang dikendalikan menjadi router utama (Active Router) dalam jaringan, dan semua lalu lintas akan melewatinya.  Bahkan, kami sampai pada implementasi serangan mitm. <br><br>  Untuk vektor serangan ini, kita perlu mengetahui grup dan kata sandi. <br>  Dari dump lalu lintas yang diberikan kepada kami, kami mengenali grup (itu - 3) dan kata sandi.  Kata sandi dalam kasus kami adalah default - cisco. <br><br>  Utilitas yang digunakan adalah yersinia, scapy. <br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Komentar pakar X:</b> <div class="spoiler_text"><blockquote>  Tujuan dari pertanyaan ini adalah untuk menentukan keakraban peserta pelatihan dengan teknik modern (dan tidak demikian) untuk melakukan serangan MitM.  Mari kita lihat skenario potensial berdasarkan dump lalu lintas yang ada: <br><br>  <b>1) spoofing ARP</b> <br>  Spoofing ARP adalah cara tertua dan termudah untuk mengimplementasikan serangan MitM.  Ini terdiri dari mengirimkan permintaan ARP gratis untuk menjadi tuan rumah A. <br><br>  Alamat IP host B adalah alamat IP, dan alamat MAC kami adalah alamat MAC.  Permintaan semacam itu memungkinkan Anda untuk memodifikasi tabel ARP pada host A, memaksanya untuk mengirim permintaan ke perangkat kami ketika mencoba menghubungi host B. Host B biasanya merupakan gateway default. <br><br>  Alat yang Disarankan: bettercap, arpspoof <br><br>  <b>2) LLMNR, spoofing NBNS</b> <br>  Link-Local Multicast Name Resolution dan NetBIOS Name Service adalah protokol yang digunakan untuk menyelesaikan nama host di jaringan lokal.  Berbeda dengan protokol DNS, tidak ada server khusus yang menyimpan semua informasi, sebaliknya, permintaan disiarkan ke semua host di jaringan, jika nama host dalam permintaan cocok dengan nama host perangkat, itu akan mengirim respons. <br><br>  Seperti yang telah dicatat dengan benar dalam jawaban, penyerang dapat menanggapi permintaan tersebut dengan mengirimkan alamat IP-nya di respons, yang akan mengarah pada fakta bahwa di masa depan korban akan menghubungi perangkat penyerang, alih-alih perangkat yang nama hostnya muncul dalam permintaan.  Selain itu, penyerang dapat meminta otentikasi NTLM dari korban, yang menyebabkan perangkat korban mengirim hash NTLM, yang selanjutnya dapat digunakan untuk brute force. <br><br>  Alat yang Disarankan: Responder <br><br>  <b>3) WPAD spoofing</b> <br>  Spoofing WPAD dapat dikaitkan dengan kasus khusus dari spoofing LLMNR dan NBNS.  Protokol Penemuan Auto Proksi Web digunakan untuk mengkonfigurasi server proxy HTTP secara otomatis. <br><br>  Perangkat mengirim permintaan LLMNR / NBNS dengan nama host wpad, menerima alamat IP yang sesuai, dan mencoba mengakses file wpad.dat melalui HTTP, yang menyimpan informasi tentang pengaturan proxy. <br><br>  Akibatnya, penyerang dapat melakukan spoofing LLMNR / NBNS dan memberikan file wpad.dat kepada korban, sebagai akibatnya, semua lalu lintas HTTP dan HTTPS akan melewati penyerang. <br><br>  Alat yang Disarankan: Responder, mitm6 <br><br>  <b>4) Iklan Router</b> <br>  Seperti yang Anda lihat dari dump, ada perangkat dengan IPv6 diaktifkan di jaringan.  Saat berada di jaringan, Anda dapat mencoba mengirim pesan ke Iklan Router IPv6 korban untuk mengubah gateway default atau server DNS. <br><br>  Pesan Router Advertising (RA) adalah bagian dari mekanisme SLAAC (Stateless Address Autoconfiguration), yang diperlukan untuk secara otomatis mendapatkan alamat IPv6 di jaringan, tanpa menggunakan server DHCPv6, atau bersamaan dengan itu.  Ini dicapai dengan secara berkala mengirim pesan RA multicast ke router, yang berisi alamat gateway default, awalan jaringan, alamat server DNS, awalan domain. <br><br>  Alat yang Direkomendasikan: paket mentah <br><br>  <b>5) DHCP spoofing</b> <br>  Juga, dalam dump, permintaan DHCP Discover dari perangkat yang sama diulangi pada beberapa interval.  Anda dapat menarik kesimpulan tentang tidak adanya server DHCP di jaringan ini dan menanggapi permintaan Temukan berikutnya dengan menetapkan korban sebagai gateway default ke perangkat. <br><br>  Alat yang Disarankan: Yersinia <br><br>  <b>6) Spoofing HSRP</b> <br>  Selain itu, paket HSRP dapat dilihat di dump.  Hot Standby Router Protocol dapat meningkatkan ketersediaan router yang bertindak sebagai gateway default.          IP-,     -.   Hello -        ,           .           HSRP, ,      ,      HSRP         . <br><br>  : Yersinia <br><br> <b>7) STP-</b> <br> Spanning Tree Protocol      L2-  .    BPDU-,           ,     .          BPDU-,   ,   ,    ,    ,         ,   ,   ,     STP,    ,    . <br><br>  : Yersinia <br></blockquote></div></div><br><hr><br><h1> <strong><font color="#cc0000">â„–5. NGINX config</font></strong> </h1><br><br>    - nginx.  ,       ? <br><br> : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">pastebin.com/nYp7uVbB</a> <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text">   nginx,          : <br> 1)  86 ,   http  X-Managed      secured,  nginx     /management/ <br> 2)        API  70  105 . <br><br></div></div><br><div class="spoiler"> <b class="spoiler_title">  J:</b> <div class="spoiler_text"><blockquote>        ,          .   nginx    ,     web-,       nginx    web-  /.           nginx ,  , ,     . <br><br> ,     ,   ,            .      ,         . ,    ,     . <br><br>         <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">gixy</a> . <br><br> Gixy  4    : <br><br> <b>1) Alias travesal:</b> <br><br>   80     : <br><br><pre> <code class="plaintext hljs">location /static { alias /prod_static/; }</code> </pre><br>     - ,    .  : //host/static../etc/passwd.   -     alias:     ,   /static,   /prod_static/,       : /prod_static/../etc/passwd,      /etc/passwd.    alias traversal  <a href=""></a> <br><br> <b>2) Http Splitting (CRLF injection)</b> <br>    nginx  ,   ,        .       HTTP-. <br> : <a href="https://github.com/yandex/gixy/blob/master/docs/ru/plugins/">github.com/yandex/gixy/blob/master/docs/ru/plugins/httpsplitting.md</a> <br><br> <b>3)   -   </b> <br>   75      Â«riginÂ»   .    , -       , ,  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">production.host.evil.com</a> . <br> : <a href="">github.com/yandex/gixy/blob/master/docs/ru/plugins/origins.md</a> <br><br> <b>4)     add_header</b> <br>  nginx  :      add_header,       , ,    ,  .      CSP      . <br> : <a href="">github.com/yandex/gixy/blob/master/docs/ru/plugins/addheaderredefinition.md</a> <br><hr><br>  ,   gixy,          .       : <br><br> 1)   17     <b>default_type   text/html.</b>     :   ,     ,  nginx    Content-Type,    default_type.   ,         Content-Type: text/html.            HTML-  ,   , , XSS-   . <br><br> <b>2)    POST-</b> <br>  29-30   ,           .  ,   â€œâ€ POST-.       .  Tapi!       SSRF  ,     ,   ,     , . <br><br> <b>3)   php-fpm</b> <br>   48  ,  FastCGI-    unix ,    9000.  ,    ,   .   ,      PHP-. <br><br> <b>4) â€œâ€ CSP</b> <br>  production.host  Content-Security-Policy,    Javascript,    . <br><br> <b>5) â€œâ€ CORS</b> <br>   76-77   CORS,          ,       cookie  . <br><br> 6)     ,   86   <b>  </b>  .       secured     /managed. <br><br> 7)      ,    ,        ,    -. ,   ,  ,    /user/{userid}  IDOR. <br><br>   ,       ,    ,     . <br></blockquote></div></div><br><hr><br><h1> <strong><font color="#cc0000">â„–6. Linux Permissions</font></strong> </h1><br>     Linux      ? <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text">  ~ ()  Debian <br> C              ( ,      /etc/passwd). <br> ,      ftp  ,     ~. <br><br> : <br> * root@server:~# ls ~ftp <br> * welcome.msg <br>      : <br> * root@server:~# cat ~ftp/welcome.msg <br> * Welcome, archive user %U@%R! <br>   ,    :      : <br> * root@amorale:~# echo ~ftp <br> * /srv/ftp <br><br></div></div><br><div class="spoiler"> <b class="spoiler_title">  K:</b> <div class="spoiler_text"><blockquote>    ,        : <br><br><ul><li>       </li><li>  ACL      </li><li>    </li><li>      </li><li>  capabilities </li></ul><br>   ,      ,   : <br> â€œ ,   rootâ€   . <br><br>      ,     <code>Linux/Unix</code> . <br>    ,        â€œ â€ â€”           . <br>   ,     ,    <code>funky_test.txt</code>      <br><br><pre> <code class="plaintext hljs">-rwxrw-rx 1 alice interns 12  4 13:00 funky_test.txt</code> </pre> <br> ,    Linux/Unix   : <br><br><ul><li>  - â€”    â€œrwxâ€  alice </li><li>   â€”    â€œrwâ€   interns </li><li>    â€”    â€œrxâ€  others </li></ul><br>          <code>read, write, execute</code> . <br><br> ,     â€”       ,      : <br><br><ul><li>    ,      read </li><li>    ,      read </li><li>     read </li></ul><br>  ,       <code>read</code>            .      ,      execute  . <br><br>            ,    . <br><br>          , ,    .      : <br><br> 1.          ,       ls. <br><br> 2.      â€” <code>POSIX Access Control Lists</code> . <br><br><h4>    c   . </h4><br><h6>  1 </h6><br> ,   <code>alice</code>     <code>interns</code> .      <code>funny_test.txt</code>    : <br><br><pre> <code class="plaintext hljs">$ whoami alice $ id uid=1001(alice) gid=1001(alice) groups=1001(alice),1002(interns) $ ls -la ----rwx--- 1 alice interns 12  4 13:00 funky_test.txt $ cat funky_test.txt cat: funky_test.txt: Permission denied $</code> </pre><br><h5>  2 </h5><br>   â€”   <code>funky_test.txt</code>  604.    <code>bob</code> ,    <code>interns</code>    : <br><br><pre> <code class="plaintext hljs">$ whoami bob $ id uid=1002(bob) gid=1003(bob) groups=1003(bob),1002(interns) $ ls -la funky_test.txt -rw----r-- 1 alice interns 12  4 13:00 funky_test.txt $ cat funky_test.txt cat: funky_test.txt: Permission denied</code> </pre><br><h5>  </h5><br>    <code>alice</code>       ,  .  , <code>permission_denied</code>    : <br><br><pre> <code class="plaintext hljs">$ id uid=1001(alice) gid=1001(alice) groups=1001(alice),1002(interns) $ ls -la ----rwx--- 1 alice interns 12  4 13:00 funky_test.txt $ chmod 777 funky_test.txt $ ls -la funky_test.txt -rwxrwxrwx 1 alice interns 12  4 13:00 funky_test.txt $ cat funky_test.txt secret_pass</code> </pre><br>      bob    . <br><br><h5>   </h5><br>    ,          Â«  Â»,  : <br><br><ul><li>  ID      <code>effective UID</code> â€”      </li><li>  GID        <code>effective GID</code> â€”      </li><li>      others. </li></ul><br><h5>   </h5><br>  ,      â€”   ,       â€œâ€    ,        ,    , : <br><br><ul><li>    ,   ,          <code>others</code>     </li><li>   ,     ,   <code>others</code>     </li></ul><br>           . <br><br><h4> POSIX Access Control Lists </h4><br>      â€”         /.   ,     ACL,  ,       â€œ <code>+</code> â€ <br><br>      POSIX ACLs,    â€”     ,            .      ACL,        . <br><br><h5>  Contoh </h5><br>   .        <code>alice</code>   <code>funky_test.txt</code>  ,   <br><br><pre> <code class="plaintext hljs">-rwxrw-rx 1 alice interns 12  4 13:00 funky_test.txt</code> </pre> <br>      ACL.  <code>getfacl</code> , ,    ACL,   ,     <code>ls</code> . <br><br><pre> <code class="plaintext hljs">$ getfacl funky_test.txt # file: funky_test.txt # owner: alice # group: interns user::rwx group::rw- other::rx</code> </pre><br>   , ACL        .  ,     bob  : <br><br><pre> <code class="plaintext hljs">setfacl -mu:bob:rwx funky_test.txt</code> </pre><br>       â€œ <code>+</code> â€   <br><br><pre> <code class="plaintext hljs">ls -l funky_test.txt -rwxrwxr-x+ 1 alice interns 12  4 13:00 funky_test.txt</code> </pre><br>     : <br><br><pre> <code class="plaintext hljs">getfacl funky_test.txt # file: funky_test.txt # owner: alice # group: interns user::rwx user:bob:rwx group::rw- mask::rwx other::rx</code> </pre><br>  ACL     .  : <br><br><ol><li>     .      <code>effective UID</code>  <code>effective GID</code>  â€”  .        ,       ACL,       .  ,     ,   ,  ,         ,    . </li><li>   ACL  <code>mask</code> ,      ACL    <code>owner, group, others</code> </li></ol><br><h5>   </h5><br>  ,         ,  ,     â€”      . <br><br>   ,  ACL,     , : <br><br><ul><li>        ACL,     ; </li><li>   ,         ACL,     . </li></ul><br></blockquote></div></div><br><br><hr><br><h1> <strong><font color="#cc0000">â„–7. Network Dump II</font></strong> </h1><br>            .  ,        ,   ,       . <br><br>  : <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">yadi.sk/d/e3gNme4MBo6tFQ</a> <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text">   â€”      . <br>      ,     . <br>   ,     . <br><br><img src="https://habrastorage.org/webt/2t/zn/ip/2tznipywtpqwalr5drvxxr4z0sw.png"><br><br>   ,     SMB-,  ,    ,       .       SMB object list (File -&gt; Export objects -&gt; SMBâ€¦ ). <br><br>    â€”     . <br><br><img src="https://habrastorage.org/webt/fe/rt/xy/fertxyt0du3kv3qwcmivz1m6opg.png"><br> <i>(  SMB object list)</i> <br><br><img src="https://habrastorage.org/webt/xo/yd/t-/xoydt-qmcbddrx1lkoqmpplyslg.png"><br> <i>(NotTruePass.jpg)</i> <br><br>     . <br><br>        â€œâ€    TCP-â€¦     .    .  :( <br><br>    ,        .    . <br><br><img src="https://habrastorage.org/webt/fd/ch/fc/fdchfcsbkrwxmx08ltr_1qnoozg.png"><br> <i>(  desktop.ini)</i> <br><br>     â€œâ€     . ,      NTLM,   ,  ,  NTLM      â€œPass-the-hashâ€.               Â«-Â». <br><br>     â€œâ€    : <br><br><pre> <code class="plaintext hljs">1)User - 1 Account: IEUser Domain: WIN7 Host: WIN7 hex dump session key - 49 0c 38 3e f8 eb 63 88 79 0f 62 84 09 84 d2 dc 2) User - 2 Account: winwin Domain: WIN7 Host: WIN7 hex dump session key - 8d f6 1b 35 79 a3 78 d3 2e 81 09 f1 95 4f 71 0a 3) User - 3 Account: 192.192.192.29 Domain: WIN7 Host: WIN7 hex dump session key - c3 19 e0 21 1b e2 63 c6 03 9e e7 38 1b 56 f0 d1</code> </pre><br>            .       MSEDGEWIN10. <br><br>    â€”     : <br><br> 1) SMB Relay. <br>           . <br>      ,   MITM- <br> (.             ). <br><br>      â€”        ,      ,  . <br>      .       ,       . <br><br>    ,  ,  ,     . <br><br> 2) NTLM Relay. <br>         ,  NTLM-. <br><br>         ,   NTLM-. <br><br>          . <br>     ,     ,  ,    . <br></div></div><br><div class="spoiler"> <b class="spoiler_title">  K:</b> <div class="spoiler_text"><blockquote>   ,  ,    : <br><br><ol><li>    (    ) </li><li>        â€” / </li><li>      ,       </li></ol><br>       ,        : <br><br><ol><li>     </li><li>     </li><li>     </li></ol><br>     Wireshark,    <code>Protocol Hierarchy Statistics</code>  <code>Conversations</code> . <br><br> <code>Protocol Hierarchy Statistics</code> â€”           . <br><br><img src="https://habrastorage.org/webt/_3/sy/co/_3sycoln1juvmnzbdlzrug24fgq.png"><br><br> Conversations â€”   ,         . <br><br><img src="https://habrastorage.org/webt/31/xp/r7/31xpr7rmhyghnrctn3acyznwa9w.png"><br><br><img src="https://habrastorage.org/webt/rw/21/_d/rw21_dwv4digkin6kodypnfpl2w.png"><br><br>       : <br><br><ol><li>    (60%) â€”  TCP, ,  , SMB.   Protocol hierarchy  SMB  40%,        TCP,     ,     20%      SMB. </li><li>      192.192.192.128  192.192.192.129.   SMB      . </li></ol><br> <b>  </b> <br><br>    . <br><br>        â€”     SMB. <br><br>        ,    â€”     wireshark â€”  <code>ExportObject</code> . <br>              <code>tcp stream</code> .     ,     ,    <code>tcp stream</code> ,            .           ,      . <br><br>    , ,     ,     ,     .  ,         . <br><br> <b>  .</b> <br>     SMB       . <br><br>    NTLM-     â€œntlmsspâ€.    <code>info</code> ,  3    : <br><br><img src="https://habrastorage.org/webt/mm/gn/pj/mmgnpjekpvddsd1f6vdx5ih8hec.png"><br><br> ,        . <br><br><img src="https://habrastorage.org/webt/rk/ix/7m/rkix7mvmxaaxs09m0vvazlblvco.png"><br><br><img src="https://habrastorage.org/webt/tx/zc/hc/txzchc1u7ufdzoqkjxtnrnsvfd0.png"><br><br><img src="https://habrastorage.org/webt/pd/hg/vd/pdhgvdcc_obs9smchhmwidqmawy.png"><br><br>          Net-NTLMv2-,  : <br><br><ul><li> challenge  </li><li> response  </li><li>   </li></ul><br>  <code>Net-NTLMv2</code>       <code>hashcat</code> . <br><br> ,        <code>WIN7\winwin</code>  <code>WIN7\192.192.192.129</code> â€”      ,          .    <code>WIN7\IEUser</code> â€” ,       ,  ,  ,   ,  SMB. <br><br>  <code>Net-NTLM</code>   ,   ,    Wireshark.    ,  PCredz (https://github.com/lgandx/PCredz) <br><br><img src="https://habrastorage.org/webt/jd/gn/zj/jdgnzjzb6pgscawu43bxtf5wc0y.png"><br><br>     <code>IEUser</code> (   )     hashcat. <br><br><img src="https://habrastorage.org/webt/ky/i6/gf/kyi6gfki84pqjj4fgjximusk9qa.png"><br><br> <b>     ,      .</b> <br><br>        6,   ,   <code>SMB/NTLM</code> , <code>DNS</code> . <br><br> ,      ,    <code>NT</code>  <code>LM</code>  <code>NTLMv1 (Net-NTLMv1)</code> , <code>NTLMv2 (Net-NTLMv2)</code> ( <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">     </a> ). <br><br> -    <code>NT</code>  <code>LM</code>  <code>NTLM</code> ,         <code>NTLM</code>  <code>NTLMv1</code>  <code>NTLMv2</code> . ,           .    . <br><br>     ,  <code>NTLMv1/NTLMv2</code> â€”    challenge-response .        ,    . <br><br>  NT  LM â€”   â€œ  â€ â€”        . <br><br>      : <br><br><ul><li> PassTheHash â€” ,        ,     .  Tapi     ,  <code>NT</code> .  PassTheHash  NTLMv2  â€”   .        ,      â€œâ€  ,       ,    . </li><li> NTLM Relay â€” ,        ,     NTLM.      ,    . </li><li> Spoofing,     Windows: LLMNR, NetBios </li><li>     : MS17-010,    /  ,   . </li></ul><br> <b></b> <br><br>     : <br><br><ul><li>    ( ) </li><li>       </li><li>       ,           </li><li>            eternalBlue </li><li>  NTLM relay </li><li>   NTLM relay    â€”   SMB </li><li>       </li><li>   ,     (ARP-spoofing,  DNS   )  </li></ul><br></blockquote></div></div><br><hr><br><h1> <strong><font color="#cc0000">â„–8. SSH Pivoting Tricks</font></strong> </h1><br><img src="https://habrastorage.org/webt/ui/gy/a1/uigya1oqcd1poeuc6whph79ehzw.png"><br>      (10.0.10.0/24),      SSH  Linux- (10.0.20.5)    (10.0.20.0/24).   ,         .     ,         ,     //  Linux-. <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> ,    ,   : <br>    <br> nmap      <br><br>    ? <br><br> : <br><br> 1)  ping. <br>  -&gt; ping -b 10.0.20.255 <br>  ping  ,     ,    . <br>    ,               . <br>           . <br> ,     CentOS 7. <br>        . <br><br><img src="https://habrastorage.org/webt/7y/vu/rn/7yvurntbjwgei1q8rr6yth0kjww.png"><br> <i>(  )</i> <br><br>    ,           .  :( <br><br><img src="https://habrastorage.org/webt/nd/r1/jc/ndr1jchof8-_rzbgh-ru1xg7vh0.png"><br><br> 2)   ARP-  . <br>  -&gt; <br>  Debian â€” arp-scan --interface=/* */ 10.0.0.0/16 <br>  Linux      arp,    ( Debian) -   ,      arp-scan. <br> arp-scan,   ,      ,    . <br></div></div><br><div class="spoiler"> <b class="spoiler_title">  KryaKrya:</b> <div class="spoiler_text"><blockquote>       ,           ,  ,      Pivoting.      ,      ,   ,          ,      ,          . <br><br> ,       ping    ,  ARP- (arp -a),    (route).   ,     netcat (nc -h),  ,      (nc -vnz 10.0.20.3 0-1000).    ,      ,        , , ,   ,   -     bash,   python      . <br><br>     â€”    SSH-,   SOCKS-  SSH,          . <br> ssh -D 1337 user@10.0.20.5 -f -N <br><br>            .     nmap  SOCKS-   proxychains    . <br><br> proxychains nmap 10.0.20.0/24 <br> nmap 10.0.20.0/24 --proxy socks4://10.0.20.5:1337 <br><br>     nmap       - SOCKS-.     SYN- ( nmap    )  SOCKS-,  SOCKS-    TCP-   ,  SYN-      ,    SYN,    SYN ACK.      CONNECT- (-sT),  nmap      SOCKS-. <br><br> nmap -sT 10.0.20.0/24 --proxy socks4://10.0.20.5:1337 <br><br> ,    -  ,         ,        . ,       Linux-,   nmap  -sT  ,     ,     ,      ,    ,    ,        . <br></blockquote></div></div><br><hr><br><h1> <strong><font color="#cc0000">â„–9. Android SSL pinning bypass</font></strong> </h1><br>      Android.  ,        HTTPS. <br><br> 1) ,           HTTP . <br><br> 2)  ,      SSL-pinning,        ? <br><br><div class="spoiler"> <b class="spoiler_title"> </b> <div class="spoiler_text"> Â«,           HTTP-.Â» <br><br>        . <br>        proxy host   wifi. <br><br>  Android     ,  ,      . <br><br>  â€”    (  )   â€”   ( ,  ). <br>  ,      MITM,   Android 6.0,      ,     . <br><br>       6.0,         . <br><br> Â« ,      SSL-pinning,        ?Â» <br><br>  ,    SSL-pinning. <br><br> SSL-pinning â€”   ,    ,   Â«Â»      . <br><br>        HTTPS-,   ,  Â«Â».      ,       . <br><br>   ,      MITM-,    . <br><br>   ,      ,     ,       . <br><br>   â€”  Frida. <br> Frida â€”    Dinamic Instrumentation Toolkit,    ,         . <br> , Frida        Javascript. <br>       Frida     ,    , ,  Â«TrueÂ»  Â«FalseÂ»,     . <br><br>     Frida: <br><br> 1.      ,      .      -. <br><br> 2.      Frida.        Root. <br><br>      . <br>  APK-           .  ,       ,      . <br>      .     apk  META-INF    . <br><br> â€œâ€ APK-. <br>       APK   smali   Java,     ,     . <br>     ,    ,     . <br><br></div></div><br><div class="spoiler"> <b class="spoiler_title">  I:</b> <div class="spoiler_text"><blockquote> ,     MITM HTTPS       . <br><br>      ,       Proxy   WiFi.      ProxyDroid,    iptables  . <br><br> ,      Root ,         , ? <br><br>    SSL-Pinning,    , ,  â€œFrida+Objectionâ€. ,           :) <br></blockquote></div></div><br><hr><br><h1> <strong><font color="#cc0000">â„–10.    ?</font></strong> </h1><br>          ,       . <br><br>    â€œ â€. ,      ,  dns-rebinding. <br><br>     .  Terima kasih atas perhatian anda! <br><br><hr><br> <b>    <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=id&amp;u=">Digital Security</a></b> <br><br>    ,       . <br>       3  (  -      ).      0  5        2.5,   3.1337. <br><br>      .  ,     50 .        ,          â€œ <i>   </i> â€   -   ) <br><br>         .      29 ,     43.5.         24%    . <br><br>    : <br><br><img src="https://habrastorage.org/webt/fn/iq/fb/fniqfb7brnsnuqx08am8vx7xmtq.png"><br><br> ,         ,       ,    ,     ,              .    ,       ,     .         . <br><br>  ,     , ,  ,                  . <br><br> ,  ,          : <br><br><img src="https://habrastorage.org/webt/wn/z_/p9/wnz_p90qafczlytjrpuddurwkbc.jpeg"><br><br>          (  !),    ,          ,   ,         â€œ â€. <br><br>             -     ,        ,        . ,        ,   Summer of Hack 2019. <br><br>     ,                 .                    . </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/id461077/">https://habr.com/ru/post/id461077/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../id461067/index.html">65 pertanyaan SQL teratas dari wawancara kerja yang harus Anda persiapkan di tahun 2019. Bagian I</a></li>
<li><a href="../id461069/index.html">Kamera IP Luar Ruangan Nobelic: Tes, Teknologi, dan Kemampuan Sistem Pengawasan Video Ivideon</a></li>
<li><a href="../id461071/index.html">Optimalisasi permintaan basis data pada contoh layanan B2B untuk pembangun</a></li>
<li><a href="../id461073/index.html">Kami menghubungkan peta online ke navigator di smartphone. Bagian 3 - OverpassTurbo</a></li>
<li><a href="../id461075/index.html">Kecerdasan bisnis. Objek IT, komponen, alat</a></li>
<li><a href="../id461079/index.html">Kota tanpa kemacetan lalu lintas</a></li>
<li><a href="../id461081/index.html">Hari ketika Dodo berhenti. Skrip asinkron</a></li>
<li><a href="../id461083/index.html">Menulis perangkat lunak dengan fungsi utilitas klien-server Windows, bagian 02</a></li>
<li><a href="../id461085/index.html">Beralih bahasa di aplikasi Android</a></li>
<li><a href="../id461087/index.html">Menghasilkan ruang bawah tanah dan gua untuk game saya</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>