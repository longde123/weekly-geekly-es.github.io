<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸš ğŸ–¤ ğŸ¼ Gatsby.jsè¯¦ç»† ğŸ¥  âœ‹ğŸ¿ ğŸ‘¸</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="å¦‚æ‚¨æ‰€çŸ¥ï¼Œæ‚¨ä¸èƒ½ä»…åœ¨æŸäº›æ ·æ¿ä¸Šèµ°å¾—å¤ªè¿œï¼Œå› æ­¤æ‚¨å¿…é¡»æ·±å…¥ç ”ç©¶ä»»ä½•æŠ€æœ¯æ¥å­¦ä¹ å¦‚ä½•ç¼–å†™æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚ æœ¬æ–‡è®¨è®ºäº†Gatsby.jsçš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯¥çŸ¥è¯†å°†ä½¿æ‚¨èƒ½å¤Ÿåˆ›å»ºå’Œç»´æŠ¤å¤æ‚çš„ç½‘ç«™å’Œåšå®¢ã€‚ 
 ä¸Šä¸€ç¯‡æœ‰å…³å¦‚ä½•ä½¿ç”¨JAM-stackåˆ›å»ºå’Œå‘å¸ƒä¸ªäººåšå®¢çš„æ–‡ç«  

 ä¸‹é¢è®¨è®ºçš„ä¸»é¢˜ï¼š 


- é¡µé¢ç»“æ„å’Œè·¯ç”± 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>Gatsby.jsè¯¦ç»†</h1><div class="post__body post__body_full"><div class="post__text post__text-html post__text_v1" id="post-content-body" data-io-article-url="https://habr.com/ru/post/442298/"><p><img src="https://habrastorage.org/webt/05/2c/ll/052cllvfmcuw_rru5rhjwhxxqem.jpeg"></p><br><p> å¦‚æ‚¨æ‰€çŸ¥ï¼Œæ‚¨ä¸èƒ½ä»…åœ¨æŸäº›æ ·æ¿ä¸Šèµ°å¾—å¤ªè¿œï¼Œå› æ­¤æ‚¨å¿…é¡»æ·±å…¥ç ”ç©¶ä»»ä½•æŠ€æœ¯æ¥å­¦ä¹ å¦‚ä½•ç¼–å†™æœ‰ä»·å€¼çš„ä¸œè¥¿ã€‚ æœ¬æ–‡è®¨è®ºäº†<strong>Gatsby.js</strong>çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯¥çŸ¥è¯†å°†ä½¿æ‚¨èƒ½å¤Ÿåˆ›å»ºå’Œç»´æŠ¤å¤æ‚çš„ç½‘ç«™å’Œåšå®¢ã€‚ </p><a name="habracut"></a><br><blockquote> <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šä¸€ç¯‡</a>æœ‰å…³å¦‚ä½•ä½¿ç”¨JAM-stackåˆ›å»ºå’Œå‘å¸ƒä¸ªäººåšå®¢çš„æ–‡ç«  </blockquote><p> ä¸‹é¢è®¨è®ºçš„ä¸»é¢˜ï¼š </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡µé¢ç»“æ„å’Œè·¯ç”±</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç»„ä»¶ï¼Œæ¨¡æ¿åŠå…¶äº¤äº’</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¤„ç†æ•°æ®</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¤–æŒ‚ç¨‹å¼</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åº”ç”¨ç¨‹å¼æ ·å¼</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½¿ç”¨React-Helmetè¿›è¡ŒSEOä¼˜åŒ–</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PWAè®¾ç½®</a> </li></ul><br><h2 id="podgotovka"> å‡†å¤‡å·¥ä½œ </h2><br><div class="spoiler">  <b class="spoiler_title">åœ¨PCä¸Šå®‰è£…Gatsby</b> <div class="spoiler_text"><pre><code class="bash hljs">yarn global add gatsby-cli</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">å…‹éš†æœ€å°é¡¹ç›®</b> <div class="spoiler_text"><pre> <code class="bash hljs"> npx gatsby new gatsby-tutorial https://github.com/gatsbyjs/gatsby-starter-hello-world <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> gatsby-tutorial</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">å‚¨å­˜åº“åˆå§‹åŒ–</b> <div class="spoiler_text"><pre> <code class="bash hljs"> git init git add . git commit -m <span class="hljs-string"><span class="hljs-string">"init commit"</span></span></code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">å¥åº·æ£€æŸ¥</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> yarn start</code> </pre> <br><p> å¦‚æœæ§åˆ¶å°ä¸­ä»¥åŠæµè§ˆå™¨ä¸­è·¯å¾„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">httpï¼š// localhostï¼š8000</a>éƒ½æ²¡æœ‰é”™è¯¯ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‚¨å°†</a>çœ‹åˆ°â€œ Hello worldï¼â€ã€‚ è¿™æ„å‘³ç€ä¸€åˆ‡æ­£å¸¸ã€‚ æ‚¨å¯ä»¥å°è¯•æ›´æ”¹<em>/src/pages/index.js</em>æ–‡ä»¶çš„å†…å®¹ä»¥æ£€æŸ¥æ˜¯å¦æœ‰çƒ­é‡è½½ã€‚ </p></div></div><br><h2 id="struktura-stranic-i-routing"> é¡µé¢ç»“æ„å’Œè·¯ç”± </h2><br><p> è¦åœ¨Gatsbyä¸­åˆ›å»ºé¡µé¢ï¼Œåªéœ€å°†æ–°æ–‡ä»¶æ”¾åœ¨<em>/ src / pages</em>æ–‡ä»¶å¤¹ä¸­ï¼Œå®ƒå°†è¢«ç¼–è¯‘æˆå•ç‹¬çš„HTMLé¡µé¢ã€‚  <strong>è¯·åŠ¡å¿…æ³¨æ„ï¼Œæ­¤é¡µé¢çš„è·¯å¾„å°†ä¸åç§°ä¸ºçš„å®é™…è·¯å¾„ç›¸å¯¹åº”</strong> ã€‚ ä¾‹å¦‚ï¼Œå†æ·»åŠ å‡ é¡µï¼š </p><br><pre> <code class="plaintext hljs">src â””â”€â”€ pages â”œâ”€â”€ about.js â”œâ”€â”€ index.js â””â”€â”€ tutorial â”œâ”€â”€ part-four.js â”œâ”€â”€ part-one.js â”œâ”€â”€ part-three.js â”œâ”€â”€ part-two.js â””â”€â”€ part-zero.js</code> </pre><br><p> å†…å®¹è¿˜ä¸é‡è¦ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ä»»ä½•æ–‡æœ¬æ¥åŒºåˆ†é¡µé¢ã€‚ </p><br><pre> <code class="plaintext hljs">import React from "react"; export default () =&gt; &lt;div&gt;Welcome to tutorial/part-one&lt;/div&gt;;</code> </pre> <br><p> ç­¾å…¥æµè§ˆå™¨ï¼š </p><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">HTTPï¼š//æœ¬åœ°ä¸»æœºï¼š8000 /æ•™ç¨‹/ç¬¬ä¸€éƒ¨åˆ†</a> </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">httpï¼š//æœ¬åœ°ä¸»æœºï¼š8000 /å…³äº</a> </li></ul><br><p> è¿™æ ·ï¼Œåœ¨æ„å»ºæ–‡ä»¶æ—¶ï¼Œæ‚¨å¯ä»¥ç«‹å³è§£å†³è·¯ç”±é—®é¢˜ã€‚ </p><br><blockquote> è¿˜æœ‰ä¸€ä¸ªç‰¹æ®Šçš„<strong>createPage API</strong> ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å®ƒæ¥æ›´çµæ´»åœ°æ§åˆ¶é¡µé¢çš„è·¯å¾„å’Œåç§°ï¼Œä½†æ˜¯è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬éœ€è¦äº†è§£Gatsbyä¸­æ•°æ®çš„æ“ä½œï¼Œå› æ­¤åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œè¿›ä¸€æ­¥çš„è€ƒè™‘ã€‚ </blockquote><p> ä½¿ç”¨é“¾æ¥åˆå¹¶åˆ›å»ºçš„é¡µé¢ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†GatsbyåŒ…ä¸­çš„<code>&lt;Link /&gt;</code>ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æ˜¯ä¸“é—¨ä¸ºå†…éƒ¨å¯¼èˆªè€Œåˆ›å»ºçš„ã€‚ å¯¹äºæ‰€æœ‰å¤–éƒ¨é“¾æ¥ï¼Œè¯·ä½¿ç”¨å¸¸è§„çš„<code>&lt;a&gt;</code>æ ‡è®°ã€‚ </p><br><p>  <em>/src/pages/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link } from "gatsby"; export default () =&gt; ( &lt;div&gt; &lt;ul&gt; &lt;li&gt; &lt;Link to="/about"&gt;about&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-zero"&gt;Part #0&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-one"&gt;Part #1&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-two"&gt;Part #2&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-three"&gt;Part #3&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-four"&gt;Part #4&lt;/Link&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; );</code> </pre> <br><blockquote> å¼•æ“ç›–ä¸‹çš„<code>&lt;Link&gt;</code>å…·æœ‰ç”¨äºä¼˜åŒ–é¡µé¢åŠ è½½çš„éå¸¸æ£˜æ‰‹çš„æœºåˆ¶ï¼Œå› æ­¤å¯ä»¥ä»£æ›¿<code>&lt;a&gt;</code>æ¥å¯¼èˆªç«™ç‚¹ã€‚ å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿™é‡Œ</a>æ‰¾åˆ°æ›´å¤šè¯¦ç»†ä¿¡æ¯ã€‚ </blockquote><p><img src="https://habrastorage.org/webt/no/ev/fj/noevfjkjdbel6tonxughcn6mkfq.gif" alt="å¯¼èˆª"></p><br><p> åˆ›å»ºé¡µé¢ï¼Œæ·»åŠ é“¾æ¥ï¼Œäº‹å®è¯æ˜å¯¼èˆªå·²å®Œæˆã€‚ </p><br><h2 id="komponenty-shablony-i-ih-vzaimodeystvie"> ç»„ä»¶ï¼Œæ¨¡æ¿åŠå…¶äº¤äº’ </h2><br><p> å¦‚æ‚¨æ‰€çŸ¥ï¼Œåœ¨ä»»ä½•é¡¹ç›®ä¸­æ€»æ˜¯æœ‰é‡å¤å…ƒç´ ï¼Œå¯¹äºç½‘ç«™æ¥è¯´ï¼Œå®ƒæ˜¯é¡µçœ‰ï¼Œé¡µè„šï¼Œå¯¼èˆªæ ã€‚ åŒæ ·ï¼Œé¡µé¢ï¼ˆæ— è®ºå†…å®¹å¦‚ä½•ï¼‰éƒ½æ˜¯æ ¹æ®æŸç§ç»“æ„æ„å»ºçš„ï¼Œå¹¶ä¸”ç”±äº<strong>Gatsby</strong>æ˜¯<strong>React</strong>çš„ç¼–è¯‘å™¨ï¼Œå› æ­¤ä½¿ç”¨ç›¸åŒçš„ç»„ä»¶æ–¹æ³•æ¥è§£å†³è¿™äº›é—®é¢˜ã€‚ </p><br><p> åˆ›å»ºæ ‡é¢˜å’Œå¯¼èˆªé¢æ¿çš„ç»„ä»¶ï¼š </p><br><p>  <em>/src/components/header.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link } from "gatsby"; /** *         *  ,     React-. *      ,    *  " ".     *    ""  GraphQL  gatsby- */ import logoSrc from "../images/logo.png"; export default () =&gt; ( &lt;header&gt; &lt;Link to="/"&gt; &lt;img src={logoSrc} alt="logo" width="60px" height="60px" /&gt; &lt;/Link&gt; That is header &lt;/header&gt; );</code> </pre> <br><p>  <em>/src/components/sidebar.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link } from "gatsby"; export default () =&gt; ( &lt;div&gt; &lt;ul&gt; &lt;li&gt; &lt;Link to="/about"&gt;about&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-zero"&gt;Part #0&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-one"&gt;Part #1&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-two"&gt;Part #2&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-three"&gt;Part #3&lt;/Link&gt; &lt;/li&gt; &lt;li&gt; &lt;Link to="/tutorial/part-four"&gt;Part #4&lt;/Link&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/div&gt; );</code> </pre> <br><p> å¹¶å°†å®ƒä»¬æ·»åŠ åˆ°<em>/src/pages/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import Header from "../components/header"; import Sidebar from "../components/sidebar"; export default () =&gt; ( &lt;div&gt; &lt;Header /&gt; &lt;Sidebar /&gt; &lt;h1&gt;Index page&lt;/h1&gt; &lt;/div&gt; );</code> </pre> <br><p> æˆ‘ä»¬æ£€æŸ¥ï¼š </p><br><p><img src="https://habrastorage.org/webt/bg/l6/jn/bgl6jndogi4j0qzvm9q0jvsiglk.jpeg" alt="index_page"></p><br><p> ä¸€åˆ‡æ­£å¸¸ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦åˆ†åˆ«åœ¨æ¯ä¸ªé¡µé¢ä¸Šå¯¼å…¥Headerå’ŒSidebarï¼Œè¿™ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œè¦è§£å†³æ­¤é—®é¢˜ï¼Œåˆ›å»ºä¸€ä¸ªå¸ƒå±€ç»„ä»¶å¹¶ç”¨å®ƒåŒ…è£…æ¯ä¸ªé¡µé¢å°±è¶³å¤Ÿäº†ã€‚ </p><br><blockquote> ç›–èŒ¨æ¯”å¸ƒå±€==ååº”å®¹å™¨ <br>  <em>æ˜¯çš„ï¼Œè¿™ä¸æ˜¯ä¸¥æ ¼çš„å¹³ç­‰ï¼Œå› ä¸ºè¿™å‡ ä¹æ˜¯åŒä¸€ä»¶äº‹</em> </blockquote><p>  <em>/src/components/layout.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import Header from "./header"; import Sidebar from "./sidebar"; export default ({ children }) =&gt; ( &lt;&gt; &lt;Header /&gt; &lt;div style={{ margin: `0 auto`, maxWidth: 650, backgroundColor: `#eeeeee` }} &gt; &lt;Sidebar /&gt; {children} &lt;/div&gt; &lt;/&gt; );</code> </pre> <br><p>  <em>/src/pages/index.js</em> ï¼ˆä»¥åŠæ‰€æœ‰å…¶ä»–é¡µé¢ï¼‰ </p><br><pre> <code class="plaintext hljs">import React from "react"; import Layout from "../components/layout"; export default () =&gt; ( &lt;Layout&gt; &lt;h1&gt;Index page&lt;/h1&gt; &lt;/Layout&gt; );</code> </pre> <br><p> å®Œæˆï¼Œçœ‹ä¸€ä¸‹æµè§ˆå™¨ï¼š </p><br><p><img src="https://habrastorage.org/webt/9p/9v/wo/9p9vwogkf2px--00mtzbgz2ke64.gif" alt="å¸ƒå±€å›¾"></p><br><blockquote> ä¸ºä»€ä¹ˆé¡¹ç›®çš„æ‰€æœ‰æ–‡ä»¶åéƒ½å¸¦æœ‰å°å†™å­—æ¯ï¼Ÿ é¦–å…ˆï¼Œè®©æˆ‘ä»¬ç¡®å®š<strong>Reactçš„</strong>å‘½åç©ºé—´æ¥è‡ªä»¥ä¸‹äº‹å®ï¼šâ€œæ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç±»ï¼Œå¹¶ä¸”è¯¥ç±»æ€»æ˜¯å¤§å†™ã€‚â€ åœ¨<strong>Gatsbyä¸­ï¼Œ</strong>æ–‡ä»¶ä»ç„¶åŒ…å«ç±»ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªâ€œä½†æ˜¯â€-â€œæ¯ä¸ªæ–‡ä»¶æ˜¯æ½œåœ¨é¡µé¢ï¼Œå…¶åç§°æ˜¯è¯¥é¡µé¢çš„URLâ€ã€‚ ç¤¾åŒºå¾—å‡ºçš„ç»“è®ºæ˜¯ï¼Œåƒ<code>http://domain.com/User/Settings</code>è¿™æ ·çš„é“¾æ¥ä¸æ˜¯<em>comme-il-faut</em> ï¼Œä¹Ÿä¸æ˜¯<em>kebab</em> -caseçš„æ–‡ä»¶åã€‚ </blockquote><br><div class="spoiler">  <b class="spoiler_title">æ¡£æ¡ˆç»“æ„</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> src â”œâ”€â”€ components â”‚ â”œâ”€â”€ header.js â”‚ â”œâ”€â”€ layout.js â”‚ â””â”€â”€ sidebar.js â”œâ”€â”€ images â”‚ â””â”€â”€ logo.png â””â”€â”€ pages â”œâ”€â”€ about.js â”œâ”€â”€ index.js â””â”€â”€ tutorial â”œâ”€â”€ part-eight.js â”œâ”€â”€ part-five.js â”œâ”€â”€ part-four.js â”œâ”€â”€ part-one.js â”œâ”€â”€ part-seven.js â”œâ”€â”€ part-six.js â”œâ”€â”€ part-three.js â”œâ”€â”€ part-two.js â””â”€â”€ part-zero.js</code> </pre> </div></div><br><h2 id="rabota-s-dannymi"> å¤„ç†æ•°æ® </h2><br><p> ç°åœ¨ç«™ç‚¹ç»“æ„å·²å‡†å¤‡å°±ç»ªï¼Œæ‚¨å¯ä»¥ç»§ç»­è¿›è¡Œå†…å®¹å¡«å……ã€‚ ç»å…¸çš„â€œç¡¬ä»£ç â€æ–¹æ³•ä¸é€‚åˆJAMå †æ ˆçš„åˆ›å»ºè€…ï¼Œä¹Ÿä¸é€‚åˆâ€œä»AJAXè¯·æ±‚ä¸­å‘ˆç°å†…å®¹â€ï¼Œå› æ­¤ï¼Œä»–ä»¬å»ºè®®åœ¨ç¼–è¯‘æ—¶ç”¨å†…å®¹å¡«å……ç«™ç‚¹ã€‚ å¯¹äº<strong>Gatsbyè€Œè¨€</strong> ï¼Œ <strong>GraphQL</strong>å¯¹æ­¤è´Ÿè´£ï¼Œè¿™ä½¿æ‚¨å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨ä»»ä½•æ¥æºçš„æ•°æ®æµã€‚ </p><br><blockquote> ç®€è€Œè¨€ä¹‹è°ˆè®ºGraphQLæ˜¯ä¸å¯èƒ½çš„ï¼Œå› æ­¤å»ºè®®æ‚¨è‡ªå·±ç ”ç©¶å®ƒæˆ–ç­‰å¾…æˆ‘çš„ä¸‹ä¸€ç¯‡æ–‡ç« ã€‚ æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„</a>é˜…è¯»æœ‰å…³ä½¿ç”¨GraphQLçš„æ›´å¤šä¿¡æ¯ã€‚ </blockquote><p> ä¸ºäº†ä¸<strong>GraphQL</strong>ä¸€èµ·<strong>ä½¿ç”¨</strong> ï¼Œä»ç¬¬äºŒä¸ªç‰ˆæœ¬å¼€å§‹ï¼Œ <code>gatsby</code>è½¯ä»¶åŒ…å…·æœ‰ä¸€ä¸ª<code>gatsby</code>ç»„ä»¶ï¼Œè¯¥ç»„ä»¶æ—¢å¯ä»¥åœ¨é¡µé¢ä¸Šä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨ç®€å•ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œè¿™æ˜¯å®ƒä¸å…ˆå‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">é¡µé¢æŸ¥è¯¢çš„</a>ä¸»è¦åŒºåˆ«ã€‚ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ç½‘ç«™å°šæœªè¿æ¥ä»»ä½•æ•°æ®æºï¼Œå› æ­¤ï¼Œè®©æˆ‘ä»¬å°è¯•æ˜¾ç¤ºé¡µé¢çš„å…ƒæ•°æ®ï¼Œä¾‹å¦‚ï¼Œç„¶åç»§ç»­è¿›è¡Œæ›´å¤æ‚çš„äº‹æƒ…ã€‚ </p><br><p> è¦ç”Ÿæˆ<code>query</code>æ‚¨éœ€è¦æ‰“å¼€<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">httpï¼š//æœ¬åœ°ä¸»æœºï¼š8000 / ___ graphql</a> ï¼Œå¹¶åœ¨æ–‡æ¡£ä¸­ä½¿ç”¨ä¾§è¾¹æ æ¥æŸ¥æ‰¾æœ‰å…³è¯¥ç«™ç‚¹çš„å¯ç”¨æ•°æ®ï¼Œå¹¶ä¸”ä¸è¦å¿˜è®°è‡ªåŠ¨å®Œæˆã€‚ </p><br><p><img src="https://habrastorage.org/webt/qw/im/yd/qwimydi9eummj2mlkdpuzxdlg_0.gif" alt="å›¾"></p><br><p>  <em>/src/components/sidebar.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; export default () =&gt; ( &lt;StaticQuery query={graphql` { allSitePage { edges { node { id path } } } } `} render={({ allSitePage: { edges } }) =&gt; ( &lt;ul&gt; {edges.map(({ node: { id, path } }) =&gt; ( &lt;li key={id}&gt; &lt;Link to={path}&gt;{id}&lt;/Link&gt; &lt;/li&gt; ))} &lt;/ul&gt; )} /&gt; );</code> </pre> <br><p> ç°åœ¨ï¼Œä½¿ç”¨<code>query</code>æˆ‘ä»¬å¯ä»¥è·å–æœ‰å…³åœ¨å¯¼èˆªé¢æ¿ä¸­å‘ˆç°çš„é¡µé¢çš„æ•°æ®ï¼Œè€Œä¸å¿…æ‹…å¿ƒé“¾æ¥ä¸åŒ¹é…åç§°è¿™ä¸€äº‹å®ï¼Œå› ä¸ºæ‰€æœ‰æ•°æ®éƒ½æ˜¯è‡ªåŠ¨æ”¶é›†çš„ã€‚ </p><br><p><img src="https://habrastorage.org/webt/nc/pk/6l/ncpk6l8hirx9guim5am6ikgpfvo.jpeg" alt="queried_navigation_panel"></p><br><p> å®é™…ä¸Šï¼Œæ‰€æœ‰è¿™äº›æ•°æ®éƒ½å¯ä»¥åœ¨æˆ‘ä»¬çš„ç½‘ç«™ä¸Šä½¿ç”¨ï¼Œè€Œæ— éœ€ä½¿ç”¨ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œä¹Ÿæ— éœ€ä½¿ç”¨è‰¯å¥½çš„æ—§â€œç¡¬ç¼–ç â€ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬é¡ºåˆ©åœ°è¿›è¡Œäº†æœ¬æ–‡çš„ä¸‹ä¸€ä¸ªä¸»é¢˜-æ’ä»¶ã€‚ </p><br><h2 id="plaginy"> å¤–æŒ‚ç¨‹å¼ </h2><br><p>  Gatsbyçš„æ ¸å¿ƒæ˜¯å¸¦æœ‰è®¸å¤šæ’ä»¶çš„ç¼–è¯‘å™¨ã€‚ ä½¿ç”¨å®ƒä»¬ï¼Œæ‚¨å¯ä»¥è‡ªå®šä¹‰æŸäº›æ–‡ä»¶ï¼Œæ•°æ®ç±»å‹å’Œå„ç§æ ¼å¼çš„å¤„ç†ã€‚ </p><br><p> åœ¨åº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•çº§åˆ«åˆ›å»ºæ–‡ä»¶<em>/gatsby-config.js</em> ã€‚ å®ƒè´Ÿè´£æ•´ä¸ªç¼–è¯‘å™¨çš„é…ç½®ï¼Œå¹¶å°è¯•é…ç½®ç¬¬ä¸€ä¸ªç”¨äºå¤„ç†æ–‡ä»¶çš„æ’ä»¶ï¼š </p><br><p> æ’ä»¶å®‰è£…ï¼š </p><br><pre> <code class="bash hljs">yarn add gatsby-source-filesystem</code> </pre> <br><p> åœ¨<em>/gatsby-config.js</em>æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®<em>ï¼š</em> </p><br><pre> <code class="plaintext hljs">module.exports = { plugins: [ { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/`, } } ], }</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">æœ‰å…³ä¸Šè¿°æ–‡ä»¶çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> /** * gatsby-config.js     *     JS *     */ module.exports = { /** *  'plugins'  pipeline  * ,      */ plugins: [ /** *        , *         */ `gatsby-example-plugin`, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/`, } } ], }</code> </pre> </div></div><br><p> è¿˜è®°å¾—æˆ‘ä»¬è°ˆè®ºè¿‡å°†æ­£ç¡®çš„å›¾åƒå¯¼å…¥<strong>Gatsby</strong>å—ï¼Ÿ </p><br><p>  <em>/src/components/header.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; export default () =&gt; ( &lt;StaticQuery query={graphql` { allFile(filter: { name: { eq: "logo" } }) { edges { node { publicURL } } } } `} render={({ allFile: { edges: [ { node: { publicURL } } ] } }) =&gt; ( &lt;header&gt; &lt;Link to="/"&gt; &lt;img src={publicURL} alt="logo" width="60px" height="60px" /&gt; &lt;/Link&gt; That is header &lt;/header&gt; )} /&gt; );</code> </pre> <br><p> è¯¥ç«™ç‚¹ä¸Šæ²¡æœ‰ä»»ä½•æ›´æ”¹ï¼Œä½†æ˜¯ç°åœ¨ä½¿ç”¨GraphQLä»£æ›¿äº†å›¾ç‰‡ï¼Œè€Œä¸æ˜¯ç®€å•çš„Webpackå¯¼å…¥ã€‚ ä¹ä¸€çœ‹ï¼Œè®¾è®¡ä¼¼ä¹å¤ªå¤æ‚äº†ï¼Œæ˜¯ä¸å¿…è¦çš„æ‰‹åŠ¿ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸è¦æ€¥äºä¸‹ç»“è®ºï¼Œå› ä¸ºäº‹æƒ…æ˜¯åœ¨åŒä¸€ä¸ªæ’ä»¶ä¸­ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬å†³å®šåœ¨ç½‘ç«™ä¸Šå‘å¸ƒæ•°åƒå¼ ç…§ç‰‡ï¼Œé‚£ä¹ˆæ— è®ºå¦‚ä½•æˆ‘ä»¬éƒ½å¿…é¡»è€ƒè™‘ä¼˜åŒ–æ‰€æœ‰å†…å®¹çš„åŠ è½½ï¼Œå¹¶ä¸”ä¸ºäº†ä¸ä»å¤´å¼€å§‹æ„å»º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å»¶è¿ŸåŠ è½½è¿‡ç¨‹</a> ï¼Œæˆ‘ä»¬åªéœ€æ·»åŠ ä¸€ä¸ª<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">gatsby-image</a>æ’ä»¶å³å¯ä¼˜åŒ–æ‰€æœ‰å†…å®¹çš„åŠ è½½ä½¿ç”¨<code>query</code>å¯¼å…¥çš„å›¾ç‰‡ã€‚ </p><br><p> å®‰è£…æ ·å¼æ’ä»¶ï¼š </p><br><pre> <code class="bash hljs">yarn add gatsby-plugin-typography react-typography typography typography-theme-noriega node-sass gatsby-plugin-sass gatsby-plugin-styled-components styled-components babel-plugin-styled-components</code> </pre> <br><p>  <em>gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">module.exports = { plugins: [ { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/` } }, // add style plugins below `gatsby-plugin-typography`, `gatsby-plugin-sass`, `gatsby-plugin-styled-components` ] };</code> </pre> <br><blockquote> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å®˜æ–¹ç½‘ç«™ä¸Šï¼Œ</a>æ‚¨å¯ä»¥æ‰¾åˆ°é€‚åˆå„ç§å£å‘³çš„æ’ä»¶ã€‚ </blockquote><br><h2 id="stilizaciya-prilozheniya"> åº”ç”¨ç¨‹å¼æ ·å¼ </h2><br><p> è®©æˆ‘ä»¬å¼€å§‹ä½¿ç”¨å„ç§æ–¹æ³•æ¥è®¾è®¡åº”ç”¨ç¨‹åºçš„æ ·å¼ã€‚ åœ¨ä¸Šä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å·²ç»å®‰è£…äº†ç”¨äºå¤„ç†<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">SASSçš„</a>æ’ä»¶ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ ·å¼åŒ–ç»„ä»¶</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">typography.js</a>åº“ï¼Œä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç°æˆçš„css.modulesæ”¯æŒã€‚ </p><br><p> è®©æˆ‘ä»¬ä»å…¨å±€æ ·å¼å¼€å§‹ï¼Œä¸å…¶ä»–ä¸æ•´ä¸ªç½‘ç«™ç›¸å…³çš„æ ·å¼ä¸€æ ·ï¼Œå…¨å±€æ ·å¼å¿…é¡»åœ¨<em>/gatsby-browser.js</em>æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®ï¼š </p><br><pre> <code class="plaintext hljs">import "./src/styles/global.scss";</code> </pre> <br><blockquote> æœ‰å…³<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">gatsby-browser.jsçš„</a>æ›´å¤šä¿¡æ¯ </blockquote><p>  <em>/src/styles/global.scss</em> </p><br><pre> <code class="plaintext hljs">body { background-color: lavenderblush; }</code> </pre> <br><p> ç”±äºå„ç§åŸå› ï¼Œè¿‘å¹´æ¥çš„è¶‹åŠ¿å€¾å‘äºâ€œ CSS in JSâ€æ–¹æ³•ï¼Œå› æ­¤æ‚¨ä¸åº”æ»¥ç”¨å…¨å±€æ ·å¼ï¼Œæœ€å¥½å°†è‡ªå·±é™åˆ¶åœ¨æŒ‡ç¤ºå­—ä½“å’Œé‡ç”¨çš„ç±»ä¸Šã€‚ è¯¥ç‰¹å®šé¡¹ç›®è®¡åˆ’å°†<strong>Typography.js</strong>ç”¨äºè¿™äº›ç›®çš„ï¼Œå› æ­¤å…¨å±€æ ·å¼å°†ä¿æŒç©ºç™½ã€‚ </p><br><p> åœ¨å°†<code>gatsby-plugin-typography</code>æ·»åŠ åˆ°é…ç½®åï¼Œæ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°ç«™ç‚¹å¤–è§‚çš„å˜åŒ–-è¿™æ˜¯å› ä¸ºå·²åº”ç”¨å…¶é»˜è®¤é¢„è®¾ï¼Œç°åœ¨æˆ‘ä»¬å°†ä¸ºè‡ªå·±é…ç½®å®ƒã€‚ </p><br><p>  <em>/src/utils/typography.js</em> </p><br><pre> <code class="plaintext hljs">import Typography from "typography"; import theme from "typography-theme-noriega"; const typography = new Typography(theme); export default typography;</code> </pre> <br><blockquote> æ‚¨å¯ä»¥ä»<a href="">åˆ—è¡¨ä¸­</a>é€‰æ‹©å…¶ä»–ä»»ä½•é¢„è®¾ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨è½¯ä»¶åŒ…APIåˆ›å»ºè‡ªå·±çš„é¢„è®¾ï¼ˆGatsbyå®˜æ–¹ç½‘ç«™<a href="">çš„</a>é…ç½®<a href="">ç¤ºä¾‹</a> ï¼‰ </blockquote><p>  <em>/gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">module.exports = { plugins: [ { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/` } }, { resolve: `gatsby-plugin-typography`, options: { pathToConfigModule: `src/utils/typography` } }, `gatsby-plugin-sass`, `gatsby-plugin-styled-components` ] };</code> </pre> <br><p> å¹¶ä¸”æ ¹æ®æ‰€é€‰çš„é¢„è®¾ï¼Œç«™ç‚¹çš„å…¨å±€æ ·å¼å°†è¢«æ›´æ”¹ã€‚ ç¡®å®šå“ªç§æ–¹æ³•å¯ä»¥ä¸ºè‡ªå·±è®¾ç½®å…¨å±€æ ·å¼ï¼Œè¿™æ˜¯æŠ€æœ¯ä¸Šçš„ä¸ªäººå–œå¥½å’Œå·®å¼‚çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨<strong>styled-components</strong>å¯¹ç»„ä»¶è¿›è¡Œ<strong>æ ·å¼è®¾ç½®</strong> ï¼š </p><br><p> æ·»åŠ å…·æœ‰å…¨å±€å˜é‡<em>/src/utils/vars.js</em>çš„æ–‡ä»¶ </p><br><pre> <code class="plaintext hljs">export const colors = { main: `#663399`, second: `#fbfafc`, main50: `rgba(102, 51, 153, 0.5)`, second50: `rgba(251, 250, 252, 0.5)`, textMain: `#000000`, textSecond: `#ffffff`, textBody: `#222222` };</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">/src/components/header.js</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; import styled from "styled-components"; import { colors } from "../utils/vars"; const Header = styled.header` width: 100%; height: 3em; display: flex; justify-content: space-between; align-items: center; background-color: ${colors.main}; color: ${colors.textSecond}; padding: 0.5em; `; const Logo = styled.img` border-radius: 50%; height: 100%; `; const logoLink = `height: 100%;`; export default () =&gt; ( &lt;StaticQuery query={graphql` { allFile(filter: { name: { eq: "logo" } }) { edges { node { publicURL } } } } `} render={({ allFile: { edges: [ { node: { publicURL } } ] } }) =&gt; ( &lt;Header&gt; That is header &lt;Link to="/" css={logoLink}&gt; &lt;Logo src={publicURL} alt="logo" /&gt; &lt;/Link&gt; &lt;/Header&gt; )} /&gt; );</code> </pre> </div></div><br><div class="spoiler">  <b class="spoiler_title">/src/components/sidebar.js</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> import React from "react" import { Link, StaticQuery, graphql } from "gatsby" import styled from "styled-components" import { colors } from "../utils/vars" const Sidebar = styled.section` position: fixed; left: 0; width: 20%; height: 100%; display: flex; flex-direction: column; justify-content: center; background-color: ${colors.second}; color: ${colors.textMain}; ` const navItem = ` display: flex; align-items: center; margin: 0 1em 0 2em; padding: 0.5em 0; border-bottom: 0.05em solid ${colors.mainHalf}; postion: relative; color: ${colors.textBody}; text-decoration: none; &amp;:before { content: ''; transition: 0.5s; width: 0.5em; height: 0.5em; position: absolute; left: 0.8em; border-radius: 50%; display: block; background-color: ${colors.main}; transform: scale(0); } &amp;:last-child { border-bottom: none; } &amp;:hover { &amp;:before { transform: scale(1); } } ` export default () =&gt; ( &lt;StaticQuery query={graphql` { allSitePage { edges { node { id, path } } } } `} render={({ allSitePage: { edges } }) =&gt; ( &lt;Sidebar&gt; { edges.map(({ node: { id, path } }) =&gt; ( &lt;Link to={path} key={id} css={navItem} &gt;{id}&lt;/Link&gt; )) } &lt;/Sidebar&gt; )} /&gt; )</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/qf/1w/i6/qf1wi6f95fjjjx794g8qvujbksw.gif" alt="é£æ ¼çš„"></p><br><p> å·²ç»å¯¹ç°æœ‰å…ƒç´ è¿›è¡Œäº†æ ·å¼åŒ–ï¼Œæ˜¯æ—¶å€™å°†å†…å®¹ä¸<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Contentful</a>å…³è”ï¼Œè¿æ¥marginæ’ä»¶å¹¶ä½¿ç”¨<strong>createPages API</strong>ç”Ÿæˆé¡µé¢äº†ã€‚ </p><br><blockquote> åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä¸Šä¸€ç¯‡æ–‡ç« ä¸­</a>é˜…è¯»æœ‰å…³å¦‚ä½•é“¾æ¥Gatsbyå’ŒContentfulçš„æ›´å¤šä¿¡æ¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ã€‚</a> </blockquote><br><div class="spoiler">  <b class="spoiler_title">å†…å®¹ä¸°å¯Œçš„æ•°æ®ç»“æ„</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> [ { "id": "title", "type": "Symbol" }, { "id": "content", "type": "Text", }, { "id": "link", "type": "Symbol", }, { "id": "orderNumber", "type": "Integer", } ]</code> </pre> </div></div><br><p> è½¯ä»¶åŒ…å®‰è£…ï¼š </p><br><pre> <code class="bash hljs">yarn add dotenv gatsby-source-contentful gatsby-transformer-remark</code> </pre> <br><p>  <em>/gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">if (process.env.NODE_ENV === "development") { require("dotenv").config(); } module.exports = { plugins: [ `gatsby-transformer-remark`, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/`, } }, { resolve: `gatsby-plugin-typography`, options: { pathToConfigModule: `src/utils/typography`, }, }, { resolve: `gatsby-source-contentful`, options: { spaceId: process.env.CONTENTFUL_SPACE_ID, accessToken: process.env.CONTENTFUL_ACCESS_TOKEN, }, }, `gatsby-plugin-sass`, `gatsby-plugin-styled-components`, ], }</code> </pre> <br><p> åˆ é™¤åŒ…å«æ‰€æœ‰æ–‡ä»¶çš„<em>/ src / pages</em>æ–‡ä»¶å¤¹ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ¥ç®¡ç†Gatsbyä¸­çš„èŠ‚ç‚¹ï¼š </p><br><p>  <em>/gatsby-node.js</em> </p><br><pre> <code class="plaintext hljs">const path = require(`path`); /** *  ,      *       */ exports.createPages = ({ graphql, actions }) =&gt; { /** *        *        *    */ const { createPage } = actions; return graphql(` { allContentfulArticle { edges { node { title link content { childMarkdownRemark { html } } } } } } `).then(({ data: { allContentfulArticle: { edges } } }) =&gt; { /** *       *  createPage()    *      */ edges.forEach(({ node }) =&gt; { createPage({ path: node.link, component: path.resolve(`./src/templates/index.js`), context: { slug: node.link } }); }); }); };</code> </pre> <br><blockquote> æœ‰å…³<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">gatsby-node.jsçš„</a>æ›´å¤šä¿¡æ¯ </blockquote><p> åˆ›å»ºä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œå®ƒå°†ä½œä¸ºç”Ÿæˆé¡µé¢çš„åŸºç¡€ <br>  <em>/src/templates/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { graphql } from "gatsby"; import Layout from "../components/layout"; export default ({ data: { allContentfulArticle: { edges: [ { node: { content: { childMarkdownRemark: { html } } } } ] } } }) =&gt; { return ( &lt;Layout&gt; &lt;div dangerouslySetInnerHTML={{ __html: html }} /&gt; &lt;/Layout&gt; ); }; export const query = graphql` query($slug: String!) { allContentfulArticle(filter: { link: { eq: $slug } }) { edges { node { title link content { childMarkdownRemark { html } } } } } } `;</code> </pre> <br><blockquote> ä¸ºä»€ä¹ˆåœ¨è¿™é‡Œä¸ä½¿ç”¨<code>&lt;StaticQuery /&gt;</code>ç»„ä»¶ï¼Ÿ äº‹å®æ˜¯ï¼Œå®ƒä¸æ”¯æŒç”¨äºæ„é€ è¯·æ±‚çš„å˜é‡ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦ä½¿ç”¨é¡µé¢ä¸Šä¸‹æ–‡ä¸­çš„<code>$slug</code>å˜é‡ã€‚ </blockquote><br><div class="spoiler">  <b class="spoiler_title">æ›´æ–°å¯¼èˆªæ ä¸­çš„é€»è¾‘</b> <div class="spoiler_text"><pre> <code class="plaintext hljs"> import React from "react"; import { Link, StaticQuery, graphql } from "gatsby"; import styled from "styled-components"; import { colors } from "../utils/vars"; const Sidebar = styled.section` position: fixed; left: 0; width: 20%; height: 100%; display: flex; flex-direction: column; justify-content: center; background-color: ${colors.second}; color: ${colors.textMain}; `; const navItem = ` display: flex; align-items: center; margin: 0 1em 0 2em; padding: 0.5em 0; border-bottom: 0.05em solid ${colors.main50}; postion: relative; color: ${colors.textBody}; text-decoration: none; &amp;:before { content: ''; transition: 0.5s; width: 0.5em; height: 0.5em; position: absolute; left: 0.8em; border-radius: 50%; display: block; background-color: ${colors.main}; transform: scale(0); } &amp;:last-child { border-bottom: none; } &amp;:hover { &amp;:before { transform: scale(1); } } `; export default () =&gt; ( &lt;StaticQuery query={graphql` { allContentfulArticle(sort: { order: ASC, fields: orderNumber }) { edges { node { title link orderNumber } } } } `} render={({ allContentfulArticle: { edges } }) =&gt; ( &lt;Sidebar&gt; {edges.map(({ node: { title, link, orderNumber } }) =&gt; ( &lt;Link to={link} key={link} css={navItem}&gt; {orderNumber}. {title} &lt;/Link&gt; ))} &lt;/Sidebar&gt; )} /&gt; );</code> </pre> </div></div><br><p><img src="https://habrastorage.org/webt/fn/bc/fs/fnbcfsl-qbdzkh1murfclmr7itk.gif" alt="èµ„æ–™"></p><br><h2 id="seo-optimizaciya">  SEOä¼˜åŒ– </h2><br><p> åœ¨æŠ€â€‹â€‹æœ¯æ–¹é¢ï¼Œå¯ä»¥è®¤ä¸ºè¯¥ç«™ç‚¹å·²ç»å‡†å¤‡å°±ç»ªï¼Œå› æ­¤è®©æˆ‘ä»¬å¤„ç†å…¶å…ƒæ•°æ®ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹æ’ä»¶ï¼š </p><br><pre> <code class="bash hljs">yarn add gatsby-plugin-react-helmet react-helmet</code> </pre> <br><blockquote>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">react-helmet</a>ä¸ºHTMLé¡µé¢ç”Ÿæˆ<code>&lt;head&gt;...&lt;/head&gt;</code> ï¼Œå¹¶ä¸Gatsbyæ¸²æŸ“ç»“åˆä½¿ç”¨ï¼Œæ˜¯ä½¿ç”¨SEOçš„å¼ºå¤§è€Œä¾¿æ·çš„å·¥å…·ã€‚ </blockquote><p>  <em>/src/templates/index.js</em> </p><br><pre> <code class="plaintext hljs">import React from "react"; import { graphql } from "gatsby"; import { Helmet } from "react-helmet"; import Layout from "../components/layout"; export default ({ data: { allContentfulArticle: { edges: [ { node: { title, content: { childMarkdownRemark: { html } } } } ] } } }) =&gt; { return ( &lt;Layout&gt; &lt;Helmet&gt; &lt;meta charSet="utf-8" /&gt; &lt;title&gt;{title}&lt;/title&gt; &lt;/Helmet&gt; &lt;div dangerouslySetInnerHTML={{ __html: html }} /&gt; &lt;/Layout&gt; ); }; export const query = graphql` query($slug: String!) { allContentfulArticle(filter: { link: { eq: $slug } }) { edges { node { title link content { childMarkdownRemark { html } } } } } } `;</code> </pre> <br><p> ç°åœ¨<code>title</code>ç½‘ç«™çš„<code>title</code>å°†å§‹ç»ˆä¸è¯¥æ–‡ç« çš„æ ‡é¢˜åŒ¹é…ï¼Œè¿™å°†æ˜¾ç€å½±å“ä¸“é—¨é’ˆå¯¹æ­¤é—®é¢˜çš„æœç´¢ç»“æœä¸­ç½‘ç«™çš„å‘è¡Œã€‚ åœ¨è¿™é‡Œï¼Œæ‚¨å¯ä»¥è½»æ¾åœ°æ·»åŠ <code>&lt;meta name="description" content=" "&gt;</code>çš„æè¿°<code>&lt;meta name="description" content=" "&gt;</code> ï¼Œå¹¶åˆ†åˆ«ä¸ºæ¯ç¯‡æ–‡ç« æä¾›æè¿°ï¼Œä»è€Œä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨æœç´¢é¡µé¢ä¸Šäº†è§£æ–‡ç« çš„å«ä¹‰ï¼Œé€šå¸¸æ¥è¯´ï¼Œæ‰€æœ‰SEOåŠŸèƒ½ç°åœ¨éƒ½å¯ä»¥ä½¿ç”¨å¹¶ä¸”æ˜“äºç®¡ç†ä¸€ä¸ªåœ°æ–¹ã€‚ </p><br><p><img src="https://habrastorage.org/webt/_7/l2/ht/_7l2hthmllnqdgycorxhaz2v_mw.png" alt="eo"></p><br><h2 id="nastroyka-pwa">  PWAè®¾ç½® </h2><br><p>  <strong>Gatsby</strong>æ—¨åœ¨æä¾›å¼€ç®±å³ç”¨çš„ä¸€æµæ€§èƒ½ã€‚ å®ƒè§£å†³äº†ä»£ç åˆ†ç¦»å’Œæœ€å°åŒ–çš„é—®é¢˜ï¼Œä»¥åŠåœ¨åå°è¿›è¡Œé¢„åŠ è½½ï¼Œå›¾åƒå¤„ç†ç­‰å½¢å¼çš„ä¼˜åŒ–ï¼Œä»è€Œä½¿æ‚¨åˆ›å»ºçš„ç«™ç‚¹æ— éœ€ä»»ä½•æ‰‹åŠ¨é…ç½®å³å¯å…·æœ‰é«˜æ€§èƒ½ã€‚ è¿™äº›æ€§èƒ½åŠŸèƒ½æ˜¯æ”¯æŒæ¸è¿›å¼Webåº”ç”¨ç¨‹åºæ–¹æ³•çš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ </p><br><p> ä½†æ˜¯ï¼Œé™¤äº†ä¸Šè¿°æ‰€æœ‰æ¡ä»¶å¤–ï¼Œå¯¹äºå°†å…¶å®šä¹‰ä¸º<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">PWA</a>çš„ç½‘ç«™ï¼Œè¿˜æœ‰ä¸‰ä¸ªåŸºæœ¬æ ‡å‡†ï¼š </p><br><ul><li>  httpsåè®® </li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">manifest.jsonçš„</a>å­˜åœ¨ </li><li> ç”±äº<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æœåŠ¡äººå‘˜</a>è€Œå¯¼è‡´ç¦»çº¿è®¿é—®è¯¥ç«™ç‚¹ </li></ul><br><p> ç›–èŒ¨æ¯”æ— æ³•è§£å†³ç¬¬ä¸€ç‚¹ï¼Œå› ä¸º<em>åŸŸ</em> ï¼Œ <em>æ‰˜ç®¡</em>å’Œ<em>åè®®</em>æ˜¯éƒ¨ç½²é—®é¢˜ï¼Œæ ¹æœ¬ä¸æ˜¯å¼€å‘é—®é¢˜ï¼Œä½†æ˜¯æˆ‘å»ºè®®æ‚¨ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Netlify</a> ï¼Œå®ƒé»˜è®¤æƒ…å†µä¸‹è§£å†³äº†httpsé—®é¢˜ã€‚ </p><br><p> æˆ‘ä»¬ç»§ç»­è¿›è¡Œå…¶ä½™çš„é¡¹ç›®ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†å®‰è£…ä¸¤ä¸ªæ’ä»¶ï¼š </p><br><pre> <code class="bash hljs">yarn add gatsby-plugin-manifest gatsby-plugin-offline</code> </pre> <br><p> å¹¶é…ç½®å®ƒä»¬<em>/src/gatsby-config.js</em> </p><br><pre> <code class="plaintext hljs">if (process.env.NODE_ENV === "development") { require("dotenv").config(); } module.exports = { plugins: [ { resolve: `gatsby-plugin-manifest`, options: { name: `GatsbyJS translated tutorial`, short_name: `GatsbyJS tutorial`, start_url: `/`, background_color: `#f7f0eb`, theme_color: `#a2466c`, display: `standalone`, icon: `public/favicon.ico`, include_favicon: true } }, `gatsby-plugin-offline`, `gatsby-transformer-remark`, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images/` } }, { resolve: `gatsby-plugin-typography`, options: { pathToConfigModule: `src/utils/typography` } }, { resolve: `gatsby-source-contentful`, options: { spaceId: process.env.CONTENTFUL_SPACE_ID, accessToken: process.env.CONTENTFUL_ACCESS_TOKEN } }, `gatsby-plugin-sass`, `gatsby-plugin-styled-components`, `gatsby-plugin-react-helmet` ] };</code> </pre> <br><p> æ‚¨å¯ä»¥ä½¿ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ–‡æ¡£æ¥è‡ª</a>å®šä¹‰æ¸…å•ï¼Œä¹Ÿå¯ä»¥é€šè¿‡<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¦†ç›–æ’ä»¶è®¾ç½®</a>æ¥è‡ªå®šä¹‰æœåŠ¡äººå‘˜ç­–ç•¥ã€‚ </p><br><p> æ‚¨ä¸ä¼šæ³¨æ„åˆ°å¼€å‘æ¨¡å¼çš„ä»»ä½•å˜åŒ–ï¼Œä½†æ˜¯è¯¥ç«™ç‚¹å·²ç»æ»¡è¶³äº†Webä¸–ç•Œçš„æœ€æ–°è¦æ±‚ï¼Œå¹¶ä¸”åœ¨httpsï¼š//åŸŸä¸Šæ‰˜ç®¡æ—¶ï¼Œå®ƒå°†ä¸ç›¸ç­‰ã€‚ </p><br><h2 id="vyvod"> ç»“è®º </h2><br><p> å‡ å¹´å‰ï¼Œå½“æˆ‘ç¬¬ä¸€æ¬¡é‡åˆ°å°†Reactåº”ç”¨ç¨‹åºå¸¦åˆ°äº’è”ç½‘ï¼Œæ”¯æŒå®ƒå’Œæ›´æ–°å†…å®¹çš„é—®é¢˜æ—¶ï¼Œæˆ‘æ— æ³•æƒ³è±¡å¸‚åœºä¸Šå·²ç»å­˜åœ¨å¯ä»¥ç®€åŒ–æ‰€æœ‰è¿™äº›æµç¨‹çš„JAMå †æ ˆæ–¹æ³•ï¼Œç°åœ¨æˆ‘ä¸ä¼šå¯¹æ­¤æ„Ÿåˆ°æƒŠè®¶ç®€å•ã€‚ ç›–èŒ¨æ¯”ï¼ˆGatsbyï¼‰è§£å†³äº†å¤§å¤šæ•°å½±å“ç½‘ç«™æ€§èƒ½çš„é—®é¢˜ï¼Œå³å¼€ç®±å³ç”¨ã€‚å¦‚æœæ‚¨å¯¹è‡ªå®šä¹‰å®ƒçš„å¤æ‚æ€§æœ‰æ‰€äº†è§£ï¼Œæ‚¨å¯ä»¥åœ¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">Lighthouseä¸­</a>è·å¾—æ‰€æœ‰é¡¹ç›®çš„100ï¼…æŒ‡æ ‡ï¼Œè¿™å°†å¤§å¤§å½±å“ç½‘ç«™åœ¨æœç´¢å¼•æ“ä¸­çš„æŠ•æ”¾ï¼ˆè‡³å°‘åœ¨Googleä¸Šï¼‰ã€‚ </p><br><p>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;pto=nl&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å¸¦é¡¹ç›®çš„å­˜å‚¨åº“</a> </p></div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN442298/">https://habr.com/ru/post/zh-CN442298/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN442286/index.html">ä¿„ç½—æ–¯çœ¼ç§‘åŒ»ç”Ÿè°ˆåˆ°äº†ä»¿ç”Ÿè§†è§‰ã€‚ æ–°çš„ç§»åŠ¨åº”ç”¨ç¨‹åºæ¼”ç¤ºäº†ç½‘ç»œçš„å·¥ä½œ</a></li>
<li><a href="../zh-CN442288/index.html">è¾å°„ï¼šæ¥æº</a></li>
<li><a href="../zh-CN442290/index.html">ç”¨ä¸­æ–‡ST-Link V2åˆ¶ä½œST-Link V2.1</a></li>
<li><a href="../zh-CN442292/index.html">Sberseasonså®ä¹ ï¼šPythonï¼ŒUX / UIï¼Œæ•°æ®ä»¥åŠæ›´å¤šå­¦ç”Ÿ</a></li>
<li><a href="../zh-CN442294/index.html">å¥¥åˆ—æ ¼Â·é˜¿å¡”è«è¯ºå¤«ï¼ˆOleg Artamonovï¼‰æœ‰ä»€ä¹ˆé”™è¯¯</a></li>
<li><a href="../zh-CN442300/index.html">æˆ‘çœ‹ç€æˆ‘æƒ³è¦çš„åœ°æ–¹å¬ã€‚ å°†Chromecasté›†æˆåˆ°Androidåº”ç”¨ä¸­</a></li>
<li><a href="../zh-CN442304/index.html">æŠ˜å å¼æ™ºèƒ½æ‰‹æœºï¼šåº”ç”¨ç¨‹åºå¦‚ä½•ï¼Ÿ</a></li>
<li><a href="../zh-CN442306/index.html">å¦‚ä½•å°†ä¸€ä¸ªgitä¾›åº”åˆ°å¦ä¸€ä¸ªgit</a></li>
<li><a href="../zh-CN442310/index.html">é€šè¿‡Raspberry Piçš„Sonoff Basicå›ºä»¶</a></li>
<li><a href="../zh-CN442312/index.html">RPZåˆ†å‘çš„DoT</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>