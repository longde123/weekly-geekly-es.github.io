<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134228602-6"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134228602-6');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ğŸ˜› ğŸ”µ ğŸ¦ æˆ‘ä»¬åœ¨Goä¸­å¤„ç†æ¥å£ ğŸ’¡ ğŸ‘¦ğŸ¿ ğŸª</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="åœ¨è¿‡å»çš„å‡ ä¸ªæœˆä¸­ï¼Œæˆ‘ä¸€ç›´åœ¨è¿›è¡Œä¸€é¡¹ç ”ç©¶ï¼Œè¯¢é—®äººä»¬åœ¨Goä¸­éš¾äºç†è§£çš„å†…å®¹ã€‚ è€Œä¸”æˆ‘æ³¨æ„åˆ°ç­”æ¡ˆä¸­ç»å¸¸æåˆ°æ¥å£çš„æ¦‚å¿µã€‚ Goæ˜¯æˆ‘ä½¿ç”¨çš„ç¬¬ä¸€ç§ç•Œé¢è¯­è¨€ï¼Œæˆ‘è®°å¾—é‚£æ—¶è¿™ä¸ªæ¦‚å¿µä¼¼ä¹å¾ˆæ··ä¹±ã€‚ åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘æƒ³è¿™æ ·åšï¼š 



1. ç”¨äººç±»è¯­è¨€è§£é‡Šä»€ä¹ˆæ˜¯æ¥å£ã€‚ 
2. è§£é‡Šå®ƒä»¬çš„ç”¨å¤„ä»¥åŠå¦‚ä½•åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ 
3....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <link href="https://fonts.googleapis.com/css?family=Quicksand&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script>document.write('<script src="//pagea' + 'd2.googles' + 'yndication.com/pagea' + 'd/js/a' + 'dsby' + 'google.js"><\/script>')</script>
  <script>
        var superSpecialObject = {};
        superSpecialObject['google_a' + 'd_client'] = 'ca-p' + 'ub-6974184241884155';
        superSpecialObject['enable_page_level_a' + 'ds'] = true;
       (window['a' + 'dsbygoogle'] = window['a' + 'dsbygoogle'] || []).push(superSpecialObject);
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly-es.github.io/index.html"></a>
    <div class="page-header-text">Geekly articles weekly</div>
  </header>
  <section class="page js-page"><h1>æˆ‘ä»¬åœ¨Goä¸­å¤„ç†æ¥å£</h1><div class="post__body post__body_full"><div class="post__text post__text-html" id="post-content-body" data-io-article-url="https://habr.com/ru/company/mailru/blog/463063/"><div style="text-align:center;"><img src="https://habrastorage.org/webt/_f/w7/1l/_fw71luza3o_kj1bh6t015wlp4c.jpeg"></div><br> åœ¨è¿‡å»çš„å‡ ä¸ªæœˆä¸­ï¼Œæˆ‘ä¸€ç›´åœ¨è¿›è¡Œä¸€é¡¹<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ç ”ç©¶ï¼Œ</a>è¯¢é—®äººä»¬åœ¨Goä¸­éš¾äºç†è§£çš„å†…å®¹ã€‚ è€Œä¸”æˆ‘æ³¨æ„åˆ°ç­”æ¡ˆä¸­ç»å¸¸æåˆ°æ¥å£çš„æ¦‚å¿µã€‚  Goæ˜¯æˆ‘ä½¿ç”¨çš„ç¬¬ä¸€ç§ç•Œé¢è¯­è¨€ï¼Œæˆ‘è®°å¾—é‚£æ—¶è¿™ä¸ªæ¦‚å¿µä¼¼ä¹å¾ˆæ··ä¹±ã€‚ åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘æƒ³è¿™æ ·åšï¼š <br><br><ol><li> ç”¨äººç±»è¯­è¨€è§£é‡Šä»€ä¹ˆæ˜¯æ¥å£ã€‚ </li><li> è§£é‡Šå®ƒä»¬çš„ç”¨å¤„ä»¥åŠå¦‚ä½•åœ¨ä»£ç ä¸­ä½¿ç”¨å®ƒä»¬ã€‚ </li><li>è®¨è®º<code>interface{}</code>ä»€ä¹ˆï¼ˆä¸€ä¸ªç©ºæ¥å£ï¼‰ã€‚ </li><li> å¹¶é€æ­¥ä»‹ç»ä¸€äº›åœ¨æ ‡å‡†åº“ä¸­å¯ä»¥æ‰¾åˆ°çš„æœ‰ç”¨çš„æ¥å£ç±»å‹ã€‚ </li></ol><a name="habracut"></a><br><h2> é‚£ä¹ˆä»€ä¹ˆæ˜¯æ¥å£ï¼Ÿ </h2><br>  Goä¸­çš„æ¥å£ç±»å‹æ˜¯ä¸€ç§<i>å®šä¹‰</i> ã€‚ å®ƒå®šä¹‰å¹¶æè¿°äº†<i>æŸäº›å…¶ä»–ç±»å‹åº”å…·æœ‰</i>çš„ç‰¹å®šæ–¹æ³•ã€‚ <br><br> æ ‡å‡†åº“ä¸­çš„æ¥å£ç±»å‹ä¹‹ä¸€æ˜¯<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">fmt.Stringer</a>æ¥å£ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Stringer <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { String() <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> }</code> </pre> <br> æˆ‘ä»¬è¯´ï¼Œå¦‚æœæŸä¸ªâ€œä¸œè¥¿â€å…·æœ‰å¸¦æœ‰ç‰¹å®šç­¾åå­—ç¬¦ä¸²å€¼<code>String()</code>çš„æ–¹æ³•ï¼Œåˆ™<i>æ»¡è¶³è¯¥æ¥å£</i> ï¼ˆæˆ–<i>å®ç°æ­¤æ¥å£</i> ï¼‰çš„ä¸œè¥¿ã€‚ <br><br> ä¾‹å¦‚ï¼Œ <code>Book</code>ç±»å‹æ»¡è¶³æ¥å£ï¼Œå› ä¸ºå®ƒå…·æœ‰<code>String()</code>å­—ç¬¦ä¸²æ–¹æ³•ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Book <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Title <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Author <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(b Book)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fmt.Sprintf(<span class="hljs-string"><span class="hljs-string">"Book: %s - %s"</span></span>, b.Title, b.Author) }</code> </pre> <br>  <code>Book</code>ç±»å‹æˆ–åŠŸèƒ½æ— å…³ç´§è¦ã€‚ é‡è¦çš„æ˜¯å®ƒå…·æœ‰ä¸€ä¸ªç§°ä¸º<code>String()</code>çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•è¿”å›å­—ç¬¦ä¸²å€¼ã€‚ <br><br> è¿™æ˜¯å¦ä¸€ä¸ªä¾‹å­ã€‚  <code>Count</code>ç±»å‹ä¹Ÿ<i>æ»¡è¶³</i> <code>fmt.Stringer</code> <i>æ¥å£ï¼Œ</i>å› ä¸ºå®ƒå…·æœ‰å…·æœ‰ç›¸åŒç­¾åå­—ç¬¦ä¸²å€¼<code>String()</code> ã€‚ <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Count <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(c Count)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">string</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> strconv.Itoa(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>(c)) }</code> </pre> <br> åœ¨è¿™é‡Œå¿…é¡»äº†è§£ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„<code>Book</code>å’Œ<code>Count</code> ï¼Œå®ƒä»¬çš„è¡Œä¸ºä¸åŒã€‚ ä½†æ˜¯å®ƒä»¬éƒ½æ»¡è¶³äº<code>fmt.Stringer</code>æ¥å£è¿™ä¸€äº‹å®ä½¿å®ƒä»¬å›¢ç»“åœ¨ä¸€èµ·ã€‚ <br><br> æ‚¨å¯ä»¥ä»å¦ä¸€ä¾§çœ‹å®ƒã€‚ å¦‚æœçŸ¥é“å¯¹è±¡æ»¡è¶³<code>fmt.Stringer</code>æ¥å£ï¼Œåˆ™å¯ä»¥å‡å®šå®ƒå…·æœ‰å¯ä»¥è°ƒç”¨çš„å¸¦æœ‰ç­¾åå­—ç¬¦ä¸²å€¼<code>String()</code>çš„æ–¹æ³•ã€‚ <br><br> ç°åœ¨æœ€é‡è¦çš„æ˜¯ã€‚ <br><br>  <i>å½“æ‚¨åœ¨Goï¼ˆå˜é‡ï¼Œå‡½æ•°å‚æ•°æˆ–ç»“æ„å­—æ®µçš„å£°æ˜ï¼‰ä¸­çœ‹åˆ°å…·æœ‰æ¥å£ç±»å‹çš„å£°æ˜æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ç±»å‹çš„å¯¹è±¡ï¼Œåªè¦å®ƒæ»¡è¶³è¯¥æ¥å£ã€‚</i> <br><br> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå‡½æ•°ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WriteLog</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(s fmt.Stringer)</span></span></span></span> { log.Println(s.String()) }</code> </pre> <br> ç”±äº<code>WriteLog()</code>åœ¨å‚æ•°<code>fmt.Stringer</code>ä½¿ç”¨æ¥å£ç±»å‹<code>fmt.Stringer</code> ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ä¼ é€’ä»»ä½•æ»¡è¶³<code>fmt.Stringer</code>æ¥å£çš„å¯¹è±¡ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ä¹‹å‰åœ¨<code>WriteLog()</code>æ–¹æ³•ä¸­åˆ›å»ºçš„<code>Book</code>å’Œ<code>Count</code>ç±»å‹ï¼Œä»£ç å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ <br><br> å¦å¤–ï¼Œç”±äºä¼ é€’çš„å¯¹è±¡æ»¡è¶³<code>fmt.Stringer</code>æ¥å£ï¼Œå› æ­¤æˆ‘ä»¬<i>çŸ¥é“</i>å®ƒå…·æœ‰<code>String()</code>æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡<code>WriteLog()</code>å‡½æ•°å®‰å…¨åœ°è°ƒç”¨è¯¥æ–¹æ³•ã€‚ <br><br> è®©æˆ‘ä»¬å°†å…¶æ±‡æ€»ä¸ºä¸€ä¸ªç¤ºä¾‹ï¼Œä»¥æ¼”ç¤ºæ¥å£çš„åŠŸèƒ½ã€‚ <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-string"><span class="hljs-string">"strconv"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> ) <span class="hljs-comment"><span class="hljs-comment">//   Book,    fmt.Stringer. type Book struct { Title string Author string } func (b Book) String() string { return fmt.Sprintf("Book: %s - %s", b.Title, b.Author) } //   Count,    fmt.Stringer. type Count int func (c Count) String() string { return strconv.Itoa(int(c)) } //   WriteLog(),    , //   fmt.Stringer   . func WriteLog(s fmt.Stringer) { log.Println(s.String()) } func main() { //   Book    WriteLog(). book := Book{"Alice in Wonderland", "Lewis Carrol"} WriteLog(book) //   Count    WriteLog(). count := Count(3) WriteLog(count) }</span></span></code> </pre> <br> å¤ªæ£’äº† åœ¨ä¸»å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸åŒç±»å‹çš„<code>Book</code>å’Œ<code>Count</code> ï¼Œä½†æ˜¯å°†å®ƒä»¬ä¼ é€’ç»™äº†<i>ç›¸åŒçš„</i> <code>WriteLog()</code>å‡½æ•°ã€‚ å¥¹è°ƒç”¨äº†é€‚å½“çš„<code>String()</code>å‡½æ•°ï¼Œå¹¶å°†ç»“æœå†™å…¥æ—¥å¿—ã€‚ <br><br> å¦‚æœ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">æ‰§è¡Œä»£ç </a> ï¼Œæ‚¨å°†å¾—åˆ°ç±»ä¼¼çš„ç»“æœï¼š <br><br><pre> <code class="plaintext hljs">2009/11/10 23:00:00 Book: Alice in Wonderland - Lewis Carrol 2009/11/10 23:00:00 3</code> </pre> <br> æˆ‘ä»¬å°†ä¸å¯¹æ­¤è¿›è¡Œè¯¦ç»†ä»‹ç»ã€‚ è¦è®°ä½çš„ä¸»è¦äº‹æƒ…ï¼šåœ¨<code>WriteLog()</code>å‡½æ•°çš„å£°æ˜ä¸­ä½¿ç”¨æ¥å£ç±»å‹ï¼Œæˆ‘ä»¬ä½¿å‡½æ•°å¯¹æ¥æ”¶åˆ°çš„å¯¹è±¡çš„<i>ç±»å‹</i>æ— åŠ¨äºè¡·ï¼ˆæˆ–çµæ´»ï¼‰ã€‚ é‡è¦çš„æ˜¯<i>ä»–æœ‰ä»€ä¹ˆæ–¹æ³•</i> ã€‚ <br><br><h2> ä»€ä¹ˆæ˜¯æœ‰ç”¨çš„ç•Œé¢ï¼Ÿ </h2><br> æ‚¨å¯ä»¥åœ¨Goä¸­å¼€å§‹ä½¿ç”¨ç•Œé¢çš„åŸå› æœ‰å¾ˆå¤šã€‚ ä»¥æˆ‘çš„ç»éªŒï¼Œæœ€é‡è¦çš„æ˜¯ï¼š <br><br><ol><li> æ¥å£æœ‰åŠ©äºå‡å°‘é‡å¤ï¼Œå³å‡å°‘æ ·æ¿ä»£ç çš„æ•°é‡ã€‚ </li><li> å®ƒä»¬ä½¿åœ¨å•å…ƒæµ‹è¯•ä¸­ä»£æ›¿å®é™…å¯¹è±¡æ›´å®¹æ˜“ä½¿ç”¨å­˜æ ¹ã€‚ </li><li> ä½œä¸ºä¸€ç§æ¶æ„å·¥å…·ï¼Œç•Œé¢å¯å¸®åŠ©è§£å¼€éƒ¨åˆ†ä»£ç åº“ã€‚ </li></ol><br> è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹è¿™äº›ä½¿ç”¨æ¥å£çš„æ–¹å¼ã€‚ <br><br><h3> å‡å°‘æ ·æ¿ä»£ç é‡ </h3><br> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŒ…å«æŸç§å®¢æˆ·æ•°æ®çš„<code>Customer</code>ç»“æ„ã€‚ åœ¨ä»£ç çš„ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ­¤ä¿¡æ¯å†™å…¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">bytes.Buffer</a> ï¼Œåœ¨å¦ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬è¦å°†å®¢æˆ·ç«¯æ•°æ®å†™å…¥ç£ç›˜ä¸Šçš„<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">os.File</a> ã€‚ ä½†æ˜¯ï¼Œåœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›é¦–å…ˆå°†<code>ustomer</code>ç»“æ„åºåˆ—åŒ–ä¸ºJSONã€‚ <br><br> åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨Goæ¥å£å‡å°‘æ ·æ¿ä»£ç çš„æ•°é‡ã€‚ <br><br>  Goå…·æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">io.Writer</a>æ¥å£ç±»å‹ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Writer <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> { Write(p []<span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>) (n <span class="hljs-keyword"><span class="hljs-keyword">int</span></span>, err error) }</code> </pre> <br> æˆ‘ä»¬å¯ä»¥åˆ©ç”¨<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">bytes.Buffer</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">os.File</a>ç±»å‹æ»¡è¶³æ­¤æ¥å£çš„äº‹å®ï¼Œå› ä¸ºå®ƒä»¬åˆ†åˆ«å…·æœ‰<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">bytes.Buffer.Writeï¼ˆï¼‰</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">os.File.Writeï¼ˆï¼‰</a>æ–¹æ³•ã€‚ <br><br> ç®€å•å®æ–½ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ( <span class="hljs-string"><span class="hljs-string">"encoding/json"</span></span> <span class="hljs-string"><span class="hljs-string">"io"</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-string"><span class="hljs-string">"os"</span></span> ) <span class="hljs-comment"><span class="hljs-comment">//   Customer. type Customer struct { Name string Age int } //   WriteJSON,   io.Writer   . //    ustomer  JSON,     // ,     Write()  io.Writer. func (c *Customer) WriteJSON(w io.Writer) error { js, err := json.Marshal(c) if err != nil { return err } _, err = w.Write(js) return err } func main() { //   Customer. c := &amp;Customer{Name: "Alice", Age: 21} //    Buffer    WriteJSON var buf bytes.Buffer err := c.WriteJSON(buf) if err != nil { log.Fatal(err) } //   . f, err := os.Create("/tmp/customer") if err != nil { log.Fatal(err) } defer f.Close() err = c.WriteJSON(f) if err != nil { log.Fatal(err) } }</span></span></code> </pre> <br> å½“ç„¶ï¼Œè¿™åªæ˜¯ä¸€ä¸ªè™šæ„çš„ç¤ºä¾‹ï¼ˆæˆ‘ä»¬å¯ä»¥ä»¥ä¸åŒçš„æ–¹å¼æ„é€ ä»£ç ä»¥è·å¾—ç›¸åŒçš„ç»“æœï¼‰ã€‚ ä½†è¿™å¾ˆå¥½åœ°è¯´æ˜äº†ä½¿ç”¨æ¥å£çš„ä¼˜ç‚¹ï¼šæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€æ¬¡<code>Customer.WriteJSON()</code>æ–¹æ³•ï¼Œå¹¶åœ¨æ¯æ¬¡éœ€è¦å†™å…¥æ»¡è¶³<code>io.Writer</code>æ¥å£çš„å†…å®¹æ—¶è°ƒç”¨å®ƒã€‚ <br><br> ä½†æ˜¯ï¼Œå¦‚æœæ‚¨<i>ä¸ç†Ÿæ‚‰</i> Goï¼Œæ‚¨å°†æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šâ€œ <i>æˆ‘æ€ä¹ˆçŸ¥é“io.Writeræ¥å£æ˜¯å¦å­˜åœ¨ï¼Ÿ</i>  <i>ä»¥åŠæ‚¨å¦‚ä½•é¢„å…ˆçŸ¥é“ä»–å¯¹<code>bytes.Buffer</code>å’Œ<code>os.File</code>æ„Ÿåˆ°æ»¡æ„ï¼Ÿ</i>  â€ <br><br> ææ€•æ²¡æœ‰ç®€å•çš„è§£å†³æ–¹æ¡ˆã€‚ æ‚¨åªéœ€è¦è·å–ç»éªŒï¼Œç†Ÿæ‚‰æ ‡å‡†åº“ä¸­çš„æ¥å£å’Œä¸åŒç±»å‹å³å¯ã€‚ è¿™å°†æœ‰åŠ©äºé˜…è¯»è¯¥åº“çš„æ–‡æ¡£å¹¶æŸ¥çœ‹å…¶ä»–äººçš„ä»£ç ã€‚ ä¸ºäº†å¿«é€Ÿå‚è€ƒï¼Œæˆ‘åœ¨æ–‡ç« ç»“å°¾æ·»åŠ äº†æœ€æœ‰ç”¨çš„æ¥å£ç±»å‹ã€‚ <br><br> ä½†æ˜¯ï¼Œå³ä½¿æ‚¨ä¸ä½¿ç”¨æ ‡å‡†åº“ä¸­çš„æ¥å£ï¼Œä¹Ÿä¸ä¼šé˜»æ­¢æ‚¨åˆ›å»ºå’Œä½¿ç”¨<i>è‡ªå·±çš„æ¥å£ç±»å‹</i> ã€‚ æˆ‘ä»¬å°†åœ¨ä¸‹é¢è®¨è®ºã€‚ <br><br><h3> å•å…ƒæµ‹è¯•å’Œå­˜æ ¹ </h3><br> è¦äº†è§£æ¥å£å¦‚ä½•åœ¨å•å…ƒæµ‹è¯•ä¸­æä¾›å¸®åŠ©ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæ›´å¤æ‚çš„ç¤ºä¾‹ã€‚ <br><br> å‡è®¾æ‚¨æœ‰ä¸€å®¶å•†åº—ï¼Œå¹¶åœ¨PostgreSQLä¸­å­˜å‚¨æœ‰å…³é”€å”®å’Œå®¢æˆ·æ•°é‡çš„ä¿¡æ¯ã€‚ æ‚¨æƒ³ç¼–å†™ä¸€ä¸ªä»£ç ï¼Œè®¡ç®—æœ€åä¸€å¤©çš„é”€å”®ä»½é¢ï¼ˆæ¯ä¸ªå®¢æˆ·çš„ç‰¹å®šé”€å”®æ•°é‡ï¼‰ï¼Œå››èˆäº”å…¥åˆ°å°æ•°ç‚¹åä¸¤ä½ã€‚ <br><br> æœ€å°çš„å®ç°å¦‚ä¸‹æ‰€ç¤ºï¼š <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// : main.go package main import ( "fmt" "log" "time" "database/sql" _ "github.com/lib/pq" ) type ShopDB struct { *sql.DB } func (sdb *ShopDB) CountCustomers(since time.Time) (int, error) { var count int err := sdb.QueryRow("SELECT count(*) FROM customers WHERE timestamp &gt; $1", since).Scan(&amp;count) return count, err } func (sdb *ShopDB) CountSales(since time.Time) (int, error) { var count int err := sdb.QueryRow("SELECT count(*) FROM sales WHERE timestamp &gt; $1", since).Scan(&amp;count) return count, err } func main() { db, err := sql.Open("postgres", "postgres://user:pass@localhost/db") if err != nil { log.Fatal(err) } defer db.Close() shopDB := &amp;ShopDB{db} sr, err := calculateSalesRate(shopDB) if err != nil { log.Fatal(err) } fmt.Printf(sr) } func calculateSalesRate(sdb *ShopDB) (string, error) { since := time.Now().Sub(24 * time.Hour) sales, err := sdb.CountSales(since) if err != nil { return "", err } customers, err := sdb.CountCustomers(since) if err != nil { return "", err } rate := float64(sales) / float64(customers) return fmt.Sprintf("%.2f", rate), nil }</span></span></code> </pre> <br> ç°åœ¨ï¼Œæˆ‘ä»¬è¦ä¸º<code>calculateSalesRate()</code>å‡½æ•°åˆ›å»ºä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œä»¥éªŒè¯è®¡ç®—æ˜¯å¦æ­£ç¡®ã€‚ <br><br> ç°åœ¨æœ‰é—®é¢˜äº†ã€‚ æˆ‘ä»¬å°†éœ€è¦é…ç½®PostgreSQLçš„æµ‹è¯•å®ä¾‹ï¼Œä»¥åŠåˆ›å»ºå’Œåˆ é™¤è„šæœ¬ä»¥ç”¨å‡æ•°æ®å¡«å……æ•°æ®åº“ã€‚ å¦‚æœæˆ‘ä»¬çœŸçš„æƒ³æµ‹è¯•æˆ‘ä»¬çš„è®¡ç®—ï¼Œæˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå·¥ä½œè¦åšã€‚ <br><br> æ¥å£å¯ä»¥è§£æ•‘ï¼ <br><br> æˆ‘ä»¬å°†åˆ›å»ºè‡ªå·±çš„æ¥å£ç±»å‹ï¼Œä»¥æè¿°<code>CountSales()</code>å’Œ<code>CountCustomers()</code>æ–¹æ³•ï¼Œ <code>calculateSalesRate()</code>å‡½æ•°æ‰€ä¾èµ–çš„æ¥å£ç±»å‹ã€‚ ç„¶åæ›´æ–°ç­¾å<code>calculateSalesRate()</code>ä»¥å°†æ­¤æ¥å£ç±»å‹ç”¨ä½œå‚æ•°ï¼Œè€Œä¸æ˜¯æŒ‡å®šçš„<code>*ShopDB</code>ç±»å‹ã€‚ <br><br> åƒè¿™æ ·ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// : main.go package main import ( "fmt" "log" "time" "database/sql" _ "github.com/lib/pq" ) //    ShopModel.     //     ,     //  -,     . type ShopModel interface { CountCustomers(time.Time) (int, error) CountSales(time.Time) (int, error) } //  ShopDB    ShopModel,   //       -- CountCustomers()  CountSales(). type ShopDB struct { *sql.DB } func (sdb *ShopDB) CountCustomers(since time.Time) (int, error) { var count int err := sdb.QueryRow("SELECT count(*) FROM customers WHERE timestamp &gt; $1", since).Scan(&amp;count) return count, err } func (sdb *ShopDB) CountSales(since time.Time) (int, error) { var count int err := sdb.QueryRow("SELECT count(*) FROM sales WHERE timestamp &gt; $1", since).Scan(&amp;count) return count, err } func main() { db, err := sql.Open("postgres", "postgres://user:pass@localhost/db") if err != nil { log.Fatal(err) } defer db.Close() shopDB := &amp;ShopDB{db} sr := calculateSalesRate(shopDB) fmt.Printf(sr) } //       ShopModel    //    *ShopDB. func calculateSalesRate(sm ShopModel) string { since := time.Now().Sub(24 * time.Hour) sales, err := sm.CountSales(since) if err != nil { return "", err } customers, err := sm.CountCustomers(since) if err != nil { return "", err } rate := float64(sales) / float64(customers) return fmt.Sprintf("%.2f", rate), nil }</span></span></code> </pre> <br> å®Œæˆæ­¤æ“ä½œåï¼Œæˆ‘ä»¬å°†åªåˆ›å»ºä¸€ä¸ªæ»¡è¶³<code>ShopModel</code>æ¥å£çš„å­˜æ ¹ã€‚ ç„¶åï¼Œæ‚¨å¯ä»¥åœ¨å‡½æ•°<code>calculateSalesRate()</code>å¯¹æ•°å­¦é€»è¾‘çš„æ­£ç¡®æ“ä½œè¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ä½¿ç”¨å®ƒã€‚ åƒè¿™æ ·ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-comment"><span class="hljs-comment">// : main_test.go package main import ( "testing" ) type MockShopDB struct{} func (m *MockShopDB) CountCustomers() (int, error) { return 1000, nil } func (m *MockShopDB) CountSales() (int, error) { return 333, nil } func TestCalculateSalesRate(t *testing.T) { //  . m := &amp;MockShopDB{} //     calculateSalesRate(). sr := calculateSalesRate(m) // ,        //   . exp := "0.33" if sr != exp { t.Fatalf("got %v; expected %v", sr, exp) } }</span></span></code> </pre> <br> ç°åœ¨è¿è¡Œæµ‹è¯•ï¼Œä¸€åˆ‡æ­£å¸¸ã€‚ <br><br><h3> åº”ç”¨æ¶æ„ </h3><br> åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨æ¥å£å°†ä»£ç çš„æŸäº›éƒ¨åˆ†ä¸ä½¿ç”¨ç‰¹å®šç±»å‹åˆ†ç¦»ã€‚ ä¾‹å¦‚ï¼Œåªè¦æ»¡è¶³<code>ShopModel</code>æ¥å£ï¼Œé‚£ä¹ˆ<code>calculateSalesRate()</code>å‡½æ•°å¯¹æ‚¨ä¼ é€’çš„å†…å®¹<code>ShopModel</code> ã€‚ <br><br> æ‚¨å¯ä»¥æ‰©å±•è¿™ä¸ªæƒ³æ³•ï¼Œå¹¶åœ¨å¤§å‹é¡¹ç›®ä¸­åˆ›å»ºæ•´ä¸ªâ€œç»Ÿä¸€â€çº§åˆ«ã€‚ <br> å‡è®¾æ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ªä¸æ•°æ®åº“äº¤äº’çš„Webåº”ç”¨ç¨‹åºã€‚ å¦‚æœæ‚¨åˆ›å»ºä¸€ä¸ªæè¿°ä¸æ•°æ®åº“äº¤äº’çš„ç‰¹å®šæ–¹æ³•çš„æ¥å£ï¼Œåˆ™å¯ä»¥é€šè¿‡HTTPå¤„ç†ç¨‹åºè€Œä¸æ˜¯ç‰¹å®šç±»å‹æ¥å¼•ç”¨è¯¥æ¥å£ã€‚ ç”±äºHTTPå¤„ç†ç¨‹åºä»…å¼•ç”¨è¯¥æ¥å£ï¼Œå› æ­¤è¿™å°†æœ‰åŠ©äºå½¼æ­¤æ–­å¼€HTTPçº§åˆ«å’Œä¸æ•°æ®åº“çš„äº¤äº’çº§åˆ«çš„é“¾æ¥ã€‚ ç‹¬ç«‹å¤„ç†å…³å¡å°†æ›´åŠ å®¹æ˜“ï¼Œå¹¶ä¸”å°†æ¥æ‚¨å°†èƒ½å¤Ÿæ›¿æ¢æŸäº›å…³å¡è€Œä¸ä¼šå½±å“å…¶ä»–å…³å¡çš„å·¥ä½œã€‚ <br><br> æˆ‘<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« ä¸­</a>ä»‹ç»äº†è¿™ç§æ¨¡å¼ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å…¶ä¸­</a>æœ‰æ›´å¤šè¯¦ç»†ä¿¡æ¯å’Œå®é™…ç¤ºä¾‹ã€‚ <br><br><h2> ä»€ä¹ˆæ˜¯ç©ºæ¥å£ï¼Ÿ </h2><br> å¦‚æœæ‚¨å·²ç»åœ¨Goä¸Šç¼–ç¨‹äº†ä¸€æ®µæ—¶é—´ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ä¼šé‡åˆ°ä¸€ä¸ª<i>ç©ºçš„æ¥å£ç±»å‹</i> <code>interface{}</code> ã€‚ æˆ‘å°†å°è¯•è§£é‡Šå®ƒæ˜¯ä»€ä¹ˆã€‚ åœ¨æœ¬æ–‡å¼€å¤´ï¼Œæˆ‘å†™é“ï¼š <br><br><blockquote>  Goä¸­çš„æ¥å£ç±»å‹æ˜¯ä¸€ç§<i>å®šä¹‰</i> ã€‚ å®ƒå®šä¹‰å¹¶æè¿°äº†<i>æŸäº›å…¶ä»–ç±»å‹åº”å…·æœ‰</i>çš„ç‰¹å®šæ–¹æ³•ã€‚ </blockquote><br> ç©ºçš„æ¥å£ç±»å‹<i>ä¸èƒ½æè¿°æ–¹æ³•</i> ã€‚ ä»–æ²¡æœ‰è§„çŸ©ã€‚ å› æ­¤ï¼Œä»»ä½•å¯¹è±¡éƒ½æ»¡è¶³ä¸€ä¸ªç©ºæ¥å£ã€‚ <br><br> æœ¬è´¨ä¸Šï¼Œç©ºæ¥å£ç±»å‹<code>interface{}</code>æ˜¯ä¸€ç§ç©ç¬‘ã€‚ å¦‚æœåœ¨å£°æ˜ï¼ˆå˜é‡ï¼Œå‡½æ•°å‚æ•°æˆ–ç»“æ„å­—æ®µï¼‰ä¸­é‡åˆ°å®ƒï¼Œåˆ™å¯ä»¥ä½¿ç”¨<i>ä»»ä½•ç±»å‹</i>çš„å¯¹è±¡ã€‚ <br><br> è€ƒè™‘ä»¥ä¸‹ä»£ç ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"fmt"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { person := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{}, <span class="hljs-number"><span class="hljs-number">0</span></span>) person[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Alice"</span></span> person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>] = <span class="hljs-number"><span class="hljs-number">21</span></span> person[<span class="hljs-string"><span class="hljs-string">"height"</span></span>] = <span class="hljs-number"><span class="hljs-number">167.64</span></span> fmt.Printf(<span class="hljs-string"><span class="hljs-string">"%+v"</span></span>, person) }</code> </pre> <br> åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†åœ°å›¾åˆå§‹åŒ–ä¸º<code>person</code> ï¼Œå®ƒä½¿ç”¨å­—ç¬¦ä¸²ç±»å‹çš„é”®å’Œç©ºæ¥å£ç±»å‹çš„<code>interface{}</code>ä½œä¸ºå€¼ã€‚ æˆ‘ä»¬ä¸ºæ˜ å°„å€¼åˆ†é…äº†ä¸‰ç§ä¸åŒç±»å‹ï¼ˆå­—ç¬¦ä¸²ï¼Œæ•´æ•°å’Œfloat32ï¼‰ï¼Œè¿™æ²¡æœ‰é—®é¢˜ã€‚ ç”±äºä»»ä½•ç±»å‹çš„å¯¹è±¡éƒ½æ»¡è¶³ç©ºæ¥å£ï¼Œå› æ­¤ä»£ç å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œã€‚ <br><br> æ‚¨å¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„è¿è¡Œæ­¤ä»£ç </a> ï¼Œæ‚¨å°†çœ‹åˆ°ç±»ä¼¼çš„ç»“æœï¼š <br><br><pre> <code class="plaintext hljs">map[age:21 height:167.64 name:Alice]</code> </pre> <br> åœ¨ä»åœ°å›¾ä¸­æå–å’Œä½¿ç”¨å€¼æ—¶ï¼Œè¯·åŠ¡å¿…ç‰¢è®°è¿™ä¸€ç‚¹ã€‚ å‡è®¾æ‚¨è¦è·å–<code>age</code>å€¼å¹¶å°†å…¶å¢åŠ 1ã€‚å¦‚æœæ‚¨ç¼–å†™ç±»ä¼¼çš„ä»£ç ï¼Œåˆ™å®ƒå°†æ— æ³•ç¼–è¯‘ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { person := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{}, <span class="hljs-number"><span class="hljs-number">0</span></span>) person[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Alice"</span></span> person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>] = <span class="hljs-number"><span class="hljs-number">21</span></span> person[<span class="hljs-string"><span class="hljs-string">"height"</span></span>] = <span class="hljs-number"><span class="hljs-number">167.64</span></span> person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>] = person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>] + <span class="hljs-number"><span class="hljs-number">1</span></span> fmt.Printf(<span class="hljs-string"><span class="hljs-string">"%+v"</span></span>, person) }</code> </pre> <br> æ‚¨å°†æ”¶åˆ°ä¸€æ¡é”™è¯¯æ¶ˆæ¯ï¼š <br><br><pre> <code class="plaintext hljs">invalid operation: person["age"] + 1 (mismatched types interface {} and int)</code> </pre> <br> åŸå› æ˜¯å­˜å‚¨åœ¨mapä¸­çš„å€¼é‡‡ç”¨<code>interface{}</code>ç±»å‹ï¼Œå¹¶å¤±å»äº†å…¶åŸå§‹çš„åŸºæœ¬intç±»å‹ã€‚ å¹¶ä¸”ç”±äºè¯¥å€¼ä¸å†æ˜¯æ•´æ•°ï¼Œå› æ­¤æˆ‘ä»¬æ— æ³•å¯¹å…¶åŠ 1ã€‚ <br><br> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæ‚¨éœ€è¦å†æ¬¡ä½¿è¯¥å€¼æˆä¸ºæ•´æ•°ï¼Œç„¶åæ‰å¯ä»¥ä½¿ç”¨å®ƒï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> main <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">"log"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { person := <span class="hljs-built_in"><span class="hljs-built_in">make</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">map</span></span>[<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>]<span class="hljs-keyword"><span class="hljs-keyword">interface</span></span>{}, <span class="hljs-number"><span class="hljs-number">0</span></span>) person[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] = <span class="hljs-string"><span class="hljs-string">"Alice"</span></span> person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>] = <span class="hljs-number"><span class="hljs-number">21</span></span> person[<span class="hljs-string"><span class="hljs-string">"height"</span></span>] = <span class="hljs-number"><span class="hljs-number">167.64</span></span> age, ok := person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>].(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> !ok { log.Fatal(<span class="hljs-string"><span class="hljs-string">"could not assert value to int"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> } person[<span class="hljs-string"><span class="hljs-string">"age"</span></span>] = age + <span class="hljs-number"><span class="hljs-number">1</span></span> log.Printf(<span class="hljs-string"><span class="hljs-string">"%+v"</span></span>, person) }</code> </pre> <br> å¦‚æœ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">è¿è¡Œthis</a> ï¼Œä¸€åˆ‡å°†æŒ‰é¢„æœŸå·¥ä½œï¼š <br><br><pre> <code class="plaintext hljs">2009/11/10 23:00:00 map[age:22 height:167.64 name:Alice]</code> </pre> <br> é‚£ä¹ˆä»€ä¹ˆæ—¶å€™åº”è¯¥ä½¿ç”¨ç©ºæ¥å£ç±»å‹å‘¢ï¼Ÿ <br><br> ä¹Ÿè®¸<i>ä¸æ˜¯å¤ªç»å¸¸</i> ã€‚ å¦‚æœæ‚¨é‡åˆ°è¿™ç§æƒ…å†µï¼Œè¯·åœä¸‹æ¥è€ƒè™‘<code>interface{}</code>ä½¿ç”¨<code>interface{}</code>æ˜¯å¦æ­£ç¡®ã€‚ ä½œä¸ºä¸€èˆ¬å»ºè®®ï¼Œæˆ‘å¯ä»¥è¯´ï¼Œä½¿ç”¨ç‰¹å®šç±»å‹ï¼ˆå³éç©ºæ¥å£ç±»å‹ï¼‰å°†æ›´åŠ æ¸…æ™°ï¼Œå®‰å…¨å’Œé«˜æ•ˆã€‚ åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæœ€å¥½ä½¿ç”¨é€‚å½“ç±»å‹çš„å­—æ®µå®šä¹‰<code>Person</code>ç»“æ„ï¼š <br><br><pre> <code class="go hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> Person <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> { Name <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Age <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Height <span class="hljs-keyword"><span class="hljs-keyword">float32</span></span> }</code> </pre> <br> å¦ä¸€æ–¹é¢ï¼Œå½“æ‚¨éœ€è¦è®¿é—®å’Œä½¿ç”¨ä¸å¯é¢„æµ‹æˆ–ç”¨æˆ·å®šä¹‰çš„ç±»å‹æ—¶ï¼Œç©ºæ¥å£éå¸¸æœ‰ç”¨ã€‚ å‡ºäºæŸç§åŸå› ï¼Œæ­¤ç±»æ¥å£åœ¨æ ‡å‡†åº“çš„ä¸åŒä½ç½®ä½¿ç”¨ï¼Œä¾‹å¦‚<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">gob.Encode</a> ï¼Œ <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">fmt.Print</a>å’Œ<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">template.Execute</a>å‡½æ•°ã€‚ <br><br><h2> æœ‰ç”¨çš„æ¥å£ç±»å‹ </h2><br> è¿™æ˜¯æ ‡å‡†åº“ä¸­æœ€éœ€è¦å’Œæœ€æœ‰ç”¨çš„æ¥å£ç±»å‹çš„ç®€çŸ­åˆ—è¡¨ã€‚ å¦‚æœæ‚¨è¿˜ä¸ç†Ÿæ‚‰å®ƒä»¬ï¼Œåˆ™å»ºè®®é˜…è¯»ç›¸å…³æ–‡æ¡£ã€‚ <br><br><ul><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">å†…å»ºé”™è¯¯</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">fmt.Stringer</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">io.Reader</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">ä½œå®¶</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">io.ReadWriteCloser</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://golang.org/pkg/net/">http.ResponseWriter</a> <br></li><li>  <a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=https://golang.org/pkg/net/">http.Handler</a> <br></li></ul><br> æ ‡å‡†åº“çš„è¯¦ç»†åˆ—è¡¨ä¹Ÿå¯ä»¥<a href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=zh-CN&amp;u=">åœ¨æ­¤å¤„æ‰¾åˆ°</a> ã€‚ </div></div><p>Source: <a rel="nofollow" href="https://habr.com/ru/post/zh-CN463063/">https://habr.com/ru/post/zh-CN463063/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../zh-CN463045/index.html">ä½¿ç”¨ç¥ç»ç½‘ç»œè‡ªåŠ¨æ£€æµ‹æ–‡æœ¬å¯¹è¯ä¸­çš„æƒ…ç»ª</a></li>
<li><a href="../zh-CN463055/index.html">å…³äºå…¬å¸å†…éƒ¨çš„ç®¡ç†å‘˜ï¼Œå¼€å‘äººå‘˜ï¼Œæ— ä¼‘æ­¢çš„æ··ä¹±å’ŒDevOpsè½¬å‹</a></li>
<li><a href="../zh-CN463057/index.html">Yii Framework 2è‡ªå®šä¹‰æƒé™</a></li>
<li><a href="../zh-CN463059/index.html">ITä¸­çš„ä¸‰è€…</a></li>
<li><a href="../zh-CN463061/index.html">åœ¨Figmaä¸­å‡†å¤‡å¸ƒå±€çš„è§„åˆ™</a></li>
<li><a href="../zh-CN463067/index.html">é¦–å…ˆæ˜¯æ­£é¢ï¼Œç„¶åæ˜¯èƒŒé¢ï¼ˆæŸå¤©ï¼‰</a></li>
<li><a href="../zh-CN463069/index.html">React BasicåŠ¨ç”»æŒ‡å—</a></li>
<li><a href="../zh-CN463071/index.html">äº’è”ç½‘ä¸­æ–­æœ‰ä»€ä¹ˆå½±å“ï¼Ÿ</a></li>
<li><a href="../zh-CN463073/index.html">QUICçš„å®é™…åº”ç”¨ï¼šUberå¦‚ä½•å®æ–½ä»¥ä¼˜åŒ–æ€§èƒ½</a></li>
<li><a href="../zh-CN463075/index.html">æ–°çš„å¼€æºè®¸å¯è¯</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter57283870 = new Ya.Metrika({
                  id:57283870,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/57283870" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134228602-6', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

<footer class="page-footer">
  <div class="page-footer-legal-info-container page-footer-element">
    <p>
      Weekly-Geekly ES | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
    </p>
  </div>
  <div class="page-footer-counters-container page-footer-element">
    <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=9uU9J9pq8z7k8xEBHYSfs6DenIBAHs3vLIHcPIJW9d0&co=3a3a3a&ct=ffffff'/></a>
  </div>
</footer>
  
</body>

</html>